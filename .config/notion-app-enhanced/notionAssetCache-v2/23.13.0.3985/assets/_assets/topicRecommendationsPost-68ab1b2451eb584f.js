"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[91866],{29037:(e,t,n)=>{n.r(t),n.d(t,{checkmarkIcon:()=>r,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.92 3.91 12.17 12.18",svg:(0,n(474848).jsx)("path",{d:"M15.784 4.002a.625.625 0 0 1 .214.857L9.445 15.784a.625.625 0 0 1-1.01.085l-4.37-5.098a.625.625 0 0 1 .948-.814l3.806 4.44 6.109-10.181a.625.625 0 0 1 .857-.214"})},r=(0,n(340498).wt)("checkmark",o)},105819:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,pencilLineIcon:()=>r});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.63 4.12 14.99 11.76",svg:(0,n(474848).jsx)("path",{d:"m13.987 5.682-.684.684-1.288-1.288.692-.691a.91.91 0 0 1 1.28 0c.35.35.35.93 0 1.28zm-9.433 9.433 7.914-7.914-1.289-1.289-7.92 7.908c-.122.122-.214.29-.274.457l-.336 1.082c-.06.229.153.442.366.366l1.082-.335q.252-.07.457-.275m12.446.76H5.61l1.25-1.25H17a.625.625 0 1 1 0 1.25"})},r=(0,n(340498).wt)("pencilLine",o)},282148:(e,t,n)=>{n.d(t,{N5:()=>l,YA:()=>u,eQ:()=>m});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949),n(581454),n(737550);var o=()=>n(221844),r=()=>n(919709),i=()=>n(191772),a=()=>n(319975),s=()=>n(751156),d=()=>n(108184),c=()=>n(780054);function l(e){const{linkAnnotationToCitationAnnotations:t,useExportedCitations:n,getRecordModelFn:o}=e;let a=1;const s={},d={};return e=>{if(!r().BEe(e))return{val:[e],modified:!1};const l=e[1],u=r().VtW(l);if(!u)return{val:[e],modified:!1};const m=t(u),{annotations:p,status:h}=m;if("other_link"===h)return{val:[r().Ey_(e[0],[...p,...l.filter((e=>!r().sh$(e)))])],modified:!0};if("missing_citation"===h)return{val:[],modified:!0};const g=p.map((e=>{if(r().bZo(e)){if(n){const t=r().NpB(e).href;let n;d[t]?n=d[t]:(n=""+a++,s[n]=t,d[t]=n);const l=(0,i()._0)({citationAnnotation:e,baseUrl:c().A.domainBaseUrl,getRecordModel:o});if(!l)return;return r().Ey_(`[${n}]`,[r().Sez(l)])}return r().wmz(e)}})).filter((e=>void 0!==e));return{val:g,modified:!0}}}function u(e){const{store:t,environment:n,transaction:o,modifyTokens:i}=e,s=t.getTitleStore(),d=null==s?void 0:s.getValue();if(s&&void 0!==d){const e=r().RQ(d).map(i),t=e.map((e=>e.val)).flat(),c=e.map((e=>e.modified)).some(Boolean),l=p(t);c&&a().R9({environment:n,store:s,value:l,transaction:o})}const c=t.getPropertiesStore(),l=null==c?void 0:c.getValue();l&&Object.entries(l).forEach((e=>{let[s,d]=e;if("title"===s)return;const c=r().RQ(d).map(i),l=c.map((e=>e.val)).flat(),u=c.map((e=>e.modified)).some(Boolean),m=p(l);if(u){const e=t.getPropertyStore(s);if(!e)return;a().R9({environment:n,store:e,value:m,transaction:o})}}));const m=t.getContentStores();m&&m.forEach((e=>u({store:e,environment:n,transaction:o,modifyTokens:i})))}function m(e){const{markdown:t,environment:n,linkAnnotationToCitationAnnotations:r,useExportedCitations:i,markdownLinkifyIt:a,tinyMceMicrosoftWordPasteFilter:c,clipboardActions:m}=e,p=new(o().A)({name:"AIChatTranscript.MarkdownChatStep",isTemporaryData:!0,isSyntheticAssistantData:!0}),h=p.makeGetRecordModelFn(n.currentUser.id),g=s().createAndCommit({userAction:"AIChatTranscript.MarkdownChatStep.markdownToBlocks",environment:n,canUndo:!1,perform:e=>{const o=m.markdownToBlocks({environment:n,text:t,inMemoryRecordCache:p,transaction:e,markdownOptions:{},markdownLinkifyIt:a,tinyMceMicrosoftWordPasteFilter:c});if(!o)return;const s=l({linkAnnotationToCitationAnnotations:r,useExportedCitations:i,getRecordModelFn:h});for(const t of o)u({store:t,environment:n,transaction:e,modifyTokens:s});return(0,d().wrapTemporaryBlocksInList)({environment:n,stores:o,inMemoryRecordCache:p,transaction:e})}}).performResult;return p.addCacheFallback(n.defaultRecordCache.inMemoryRecordCache),g}function p(e){if(!e.length)return e;const t=[];let n=[],o=!1;const i=e=>{const t=r().uPN(e),n=r().g2K(t),o=r().VtW(t);return n?r().NpB(n).href:o?r().cQR(o):void 0},a=()=>{if(n.length){const e=new Set,o=n.filter((t=>{const n=i(t);return!n||!e.has(n)&&(e.add(n),!0)}));t.push(...o),n=[]}};for(const s of e){i(s)?(o=!0,n.push(s)):o?r()._g9(s)?n.push(s):(a(),o=!1,t.push(s)):t.push(s)}return a(),t}},336588:(e,t,n)=>{n.d(t,{OD:()=>i,iq:()=>s,vy:()=>c});var o=()=>n(496603),r=()=>n(534177);function i(e){let{layout:t}=e;return"minimal"===t?"16px 0px 16px 0px":16}const a=1;function s(e){let{layout:t}=e;return"minimal"===t?a:24}function d(e){let{layout:t,theme:n,borderOnly:i}=e;if("dark"===n.mode)return n.homeShadow.card.hovered;n.mode;const s=function(e){let{mode:t}=e;switch(t){case"dark":return 0;case"light":return a;default:return(0,r().ub)(t),0}}({mode:n.mode});return(0,o().oE)([i||"card"!==t?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${s}px rgba(0, 0, 0, 0.05)`]).join(", ")}function c(e){const{layout:t,theme:n,borderOnly:o}=e;return{unhoveredBoxShadow:d({layout:t,theme:n,borderOnly:o}),hoveredBoxShadow:"light"===n.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):"rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset"}}},348869:(e,t,n)=>{n.d(t,{g:()=>s});n(944114);var o=()=>n(386164),r=()=>n(532659),i=()=>n(449506),a=()=>n(901389);async function s(e){const{environment:t,onResponse:n,data:s,userId:d,tracking:c,abortSignal:l}=e,u=await i().callStreamApi({eventName:"runInferenceTranscript",environment:t,data:s,userId:d,tracking:c,abortSignal:l,headers:(0,o().WS)({spaceId:s.spaceId})});if("success"!==u.type)return null!=l&&l.aborted?{error:{message:"Aborted",code:0}}:(a().Qg(u),{error:{message:u.error.message,code:u.status}});const m=[];if(r().hS.is(u.data))for await(const o of u.data){if("error"===o.type)return{error:{message:o.message,code:o.errorCode}};null==n||n(o),m.push(o)}return{value:m}}},406533:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>r,questionMarkCircleIcon:()=>i});n(296540);var o=n(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,o.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},i=(0,n(340498).wt)("questionMarkCircle",r)},506180:(e,t,n)=>{n.r(t),n.d(t,{TopicRecommendationsPost:()=>R});n(16280),n(898992),n(354520),n(581454);var o=n(296540),r=()=>n(17022),i=()=>n(484714),a=()=>n(56366),s=()=>n(401497),d=()=>n(919709),c=()=>n(959013),l=()=>n(498212),u=()=>n(973647),m=()=>n(284371),p=()=>n(884107),h=()=>n(282148),g=()=>n(348869),v=()=>n(261237),f=()=>n(493733),y=()=>n(659602),w=()=>n(335722),x=()=>n(186445),k=()=>n(249847),I=()=>n(645873),S=()=>n(765957),b=()=>n(568008),C=()=>n(336588),T=n(474848);function O(e){let{title:t,topics:n,phase:o,error:r}=e;const i=(0,s().IS)((e=>({section:{marginBottom:24},sectionTitle:{fontSize:m().J.UIRegular.desktop,fontWeight:m().Wy.medium,marginBottom:8},loading:{fontSize:m().J.UIRegular.desktop,color:e.text.secondary},error:{fontSize:m().J.UIRegular.desktop,color:e.text.uiRedSecondary},topicsList:{display:"flex",flexWrap:"wrap",gap:8},topicTag:{display:"inline-block",padding:"4px 8px",backgroundColor:e.surface.wash,borderRadius:4,fontSize:m().J.UISmall.desktop}})),[]);return(0,T.jsxs)("div",{style:i.section,children:[(0,T.jsx)("h4",{style:i.sectionTitle,children:t}),"analyzing"===o?(0,T.jsx)("div",{style:i.loading,children:"Analyzing your recent activity..."}):void 0,"done"===o&&n.length>0?(0,T.jsx)("div",{style:i.topicsList,children:n.map(((e,t)=>(0,T.jsxs)("span",{style:i.topicTag,children:[e.topic," ","(",e.confidence,")"]},t)))}):void 0,"done"===o&&0===n.length?(0,T.jsx)("div",{style:i.loading,children:"No topics identified"}):void 0,"error"===o?(0,T.jsxs)("div",{style:i.error,children:["Failed to analyze topics",r?`: ${r}`:void 0]}):void 0]})}function N(e){let{title:t,state:n,loadingMessage:a,waitingMessage:d,headerContent:c}=e;const l=(0,i().v3)(),u=(0,I().fJ)(y().g),g=(0,I().fJ)(w().S),{value:x}=(0,I().fJ)(p().R.clipboardActions),k=(0,o.useMemo)((()=>{if(!n.data||"done"!==n.phase||!x)return;if(["idle","pending"].includes(u.status)||["idle","pending"].includes(g.status))return;const e=u.value,t=g.value;return e&&t?r().e.withListenerIgnored((()=>(0,h().eQ)({markdown:n.data,environment:l,markdownLinkifyIt:e,tinyMceMicrosoftWordPasteFilter:t,clipboardActions:x,linkAnnotationToCitationAnnotations:()=>({annotations:[],status:"other_link"}),useExportedCitations:!1}))):void 0}),[n.data,n.phase,x,u,g,l]),S=(0,s().IS)((e=>({section:{marginBottom:24},sectionTitle:{fontSize:m().J.UIRegular.desktop,fontWeight:m().Wy.medium,marginBottom:8},headerContent:{marginBottom:12,fontSize:m().J.UISmall.desktop,color:e.text.secondary},loading:{fontSize:m().J.UIRegular.desktop,color:e.text.secondary},error:{fontSize:m().J.UIRegular.desktop,color:e.text.uiRedSecondary}})),[]);return(0,T.jsxs)("div",{style:S.section,children:[(0,T.jsx)("h4",{style:S.sectionTitle,children:t}),c?(0,T.jsx)("div",{style:S.headerContent,children:c}):void 0,"waiting"===n.phase&&d?(0,T.jsx)("div",{style:S.loading,children:d}):void 0,"loading"===n.phase?(0,T.jsx)("div",{style:S.loading,children:a}):void 0,"done"===n.phase&&k?(0,T.jsx)(v().c,{disabled:!0,displayName:"RecommendationList",children:(0,T.jsx)(f().A,{store:k,disabled:!0,disableCommentMenu:!0,disableHoverMenu:!0,disableDrag:!0})}):void 0,"done"!==n.phase||n.data?void 0:(0,T.jsx)("div",{style:S.loading,children:"No recommendations found"}),"error"===n.phase?(0,T.jsxs)("div",{style:S.error,children:["Failed to load recommendations",n.error?`: ${n.error}`:void 0]}):void 0]})}function R(){const e=(0,i().v3)(),t=(0,a().O$)(S().AppStoreCurrentSpaceStore),[n,r]=(0,o.useState)({phase:"analyzing",data:[],error:void 0}),[p,h]=(0,o.useState)({phase:"loading",data:null,error:void 0}),[v,f]=(0,o.useState)({phase:"waiting",data:null,error:void 0}),y=(0,k().T)(),w=(0,c().tz)(),I=(0,a().K8)((()=>{const e=S().default.state.currentUserSettingsStore;return e?b().EF(e):[]}),[],{useDeepEqual:!0}),R=!0,D=(0,o.useCallback)((async()=>{var n,o,r;return await(0,g().g)({environment:e,data:{transcript:[{id:(0,l().gB)("config"),type:"config",value:{type:"search",scopeForNextSearch:{type:"everything",dateRangeFilter:{startDate:new Date(Date.now()-15552e6).toISOString(),endDate:(new Date).toISOString()}}}},{id:(0,l().gB)("context"),type:"context",value:{timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,userName:e.currentUser.id?null===(n=(0,x()._m)(e))||void 0===n||null===(n=n.getModel())||void 0===n?void 0:n.getDisplayName(w):"",userId:y??"",spaceName:(null==t||null===(o=t.getModel())||void 0===o?void 0:o.name)??"",spaceId:(null==t?void 0:t.id)??"",spaceViewId:(null==t||null===(r=t.getModel())||void 0===r?void 0:r.id)??"",currentDatetime:(new Date).toISOString(),surface:"home_module"}},{id:(0,l().gB)("user-topics"),type:"user",userId:y??"",value:(0,d().x9d)('Based on my recent activity, analyze what topics I\'m currently most interested in. \n\nReturn your response as a JSON array of exactly 3 topics, formatted like this:\n[{\n\t"topic": "AI UX Design",\n\t"confidence": "high",\n\t"reason": "visited 15+ pages about AI interfaces and user experience"\n}, {\n\t"topic": "Database Optimization", \n\t"confidence": "medium",\n\t"reason": "searched for and read several posts about query performance"\n}, {\n\t"topic": "Team Management",\n\t"confidence": "low", \n\t"reason": "commented on a few leadership-related discussions"\n}]\n\nRequirements:\n- Exactly 3 topics maximum\n- Be specific and actionable (not too broad)\n- Topics should be unique and not too similar to each other, since we will later be recommending content for each topic\n- Confidence: "high", "medium", or "low" \n- Reason: brief explanation of why you identified this topic\n- Valid JSON format only, no other text')}],traceId:(0,l().gB)("topic-inference"),spaceId:(null==t?void 0:t.id)??"",generateTitle:!1}})}),[e,t,y,w]),E=(0,o.useCallback)((async n=>{var o,r,i;const a=`Based on my specified topics of interest, suggest 3-4 CONCISE recommendations for fresh workspace content:\n\nMY SPECIFIED TOPICS: ${n.join(", ")}\n\nCRITICAL REQUIREMENT - EXCLUDE MY OWN CONTENT:\n- DO NOT recommend any pages, documents, or content that I created or authored\n- DO NOT recommend any content where I am listed as the creator, owner, or primary contributor\n- DO NOT recommend any pages where I have made edits or significant contributions\n- DO NOT recommend any discussions, comments, or threads that I started or am actively participating in\n- ONLY recommend content created by OTHER people that I likely haven't seen\n\nAdditional Requirements:\n- ONLY 3-4 recommendations maximum\n- Each recommendation should be 2-3 sentences max \n- Prioritize very recent content (last 2 months)\n- Focus specifically on: ${n.join(", ")}\n- Format as markdown with bullet points (- or *)\n- Include working links in markdown format: [link text](URL)\n- For Notion pages: Use proper https://dev.notion.so/notion/ URLs (NOT www.notion.so)  \n- For Slack messages: Use proper https://app.slack.com/client/ URLs (format: https://app.slack.com/client/WORKSPACE_ID/CHANNEL_ID)\n- External links: Use full https:// URLs\n- Use markdown list format: \n  - Recommendation 1\n  - Recommendation 2`;return await(0,g().g)({environment:e,data:{transcript:[{id:(0,l().gB)("config"),type:"config",value:{type:"search",scopeForNextSearch:{type:"everything",dateRangeFilter:{startDate:new Date(Date.now()-5184e6).toISOString(),endDate:(new Date).toISOString()},excludeCreatedByFilter:y?[y]:[]}}},{id:(0,l().gB)("context"),type:"context",value:{timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,userName:e.currentUser.id?null===(o=(0,x()._m)(e))||void 0===o||null===(o=o.getModel())||void 0===o?void 0:o.getDisplayName(w):"",userId:y??"",spaceName:(null==t||null===(r=t.getModel())||void 0===r?void 0:r.name)??"",spaceId:(null==t?void 0:t.id)??"",spaceViewId:(null==t||null===(i=t.getModel())||void 0===i?void 0:i.id)??"",currentDatetime:(new Date).toISOString(),surface:"home_module"}},{id:(0,l().gB)("user-topic-recs"),type:"user",userId:y??"",value:(0,d().x9d)(a)}],traceId:(0,l().gB)("user-topic-recommendations"),spaceId:(null==t?void 0:t.id)??"",generateTitle:!1}})}),[e,t,y,w]),U=(0,o.useCallback)((async n=>{var o,r,i;const a=n.map((e=>e.topic)),s=n.filter((e=>"high"===e.confidence)).map((e=>e.topic)),c=`Based on my activity patterns and discovered topics, suggest 3-4 CONCISE recommendations for fresh content:\n\nIDENTIFIED TOPICS: ${a.join(", ")}\nHIGH CONFIDENCE TOPICS: ${s.join(", ")||"None"}\n\nCRITICAL REQUIREMENT - EXCLUDE MY OWN CONTENT:\n- DO NOT recommend any pages, documents, or content that I created or authored\n- DO NOT recommend any content where I am listed as the creator, owner, or primary contributor  \n- DO NOT recommend any pages where I have made edits or significant contributions\n- DO NOT recommend any discussions, comments, or threads that I started or am actively participating in (including Slack and Notion)\n- DO NOT recommend any pull requests that I made\n- DO NOT recommend pages that I have likely seen. If it's too close to my interests, then it's likely that I was participating in the conversation already. Optimize for diverse, new content outside my team.\n- Figure out who's on my team. You should deprioritize content from people on my team, since I probably have already seen it.\n- ONLY recommend content created by OTHER people that I likely haven't seen\n\nAdditional Requirements:\n- ONLY 3-4 recommendations maximum  \n- Each recommendation should be 2-3 sentences max\n- Prioritize very recent content (last 2 weeks)\n- Format as markdown with bullet points (- or *)\n- Include working links in markdown format: [link text](URL)\n- For Notion pages: Use proper https://dev.notion.so/notion/ URLs (NOT www.notion.so)  \n- For Slack messages: Use proper https://app.slack.com/client/ URLs (format: https://app.slack.com/client/WORKSPACE_ID/CHANNEL_ID)\n- External links: Use full https:// URLs\n- Use markdown list format: \n  - Recommendation 1\n  - Recommendation 2`;return await(0,g().g)({environment:e,data:{transcript:[{id:(0,l().gB)("config"),type:"config",value:{type:"search",scopeForNextSearch:{type:"everything",dateRangeFilter:{startDate:new Date(Date.now()-5184e6).toISOString(),endDate:(new Date).toISOString()},excludeCreatedByFilter:y?[y]:[]}}},{id:(0,l().gB)("context"),type:"context",value:{timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,userName:e.currentUser.id?null===(o=(0,x()._m)(e))||void 0===o||null===(o=o.getModel())||void 0===o?void 0:o.getDisplayName(w):"",userId:y??"",spaceName:(null==t||null===(r=t.getModel())||void 0===r?void 0:r.name)??"",spaceId:(null==t?void 0:t.id)??"",spaceViewId:(null==t||null===(i=t.getModel())||void 0===i?void 0:i.id)??"",currentDatetime:(new Date).toISOString(),surface:"home_module"}},{id:(0,l().gB)("user-recs"),type:"user",userId:y??"",value:(0,d().x9d)(c)}],traceId:(0,l().gB)("topic-recommendations"),spaceId:(null==t?void 0:t.id)??"",generateTitle:!1}})}),[e,t,y,w]),A=(0,o.useCallback)((e=>{try{const t=e.filter((e=>"search-chat"===e.type)).sort(((e,t)=>e.id.localeCompare(t.id))),n=t.map((e=>e.value)).join("").match(/\[[\s\S]*\]/);if(!n)return[];const o=JSON.parse(n[0]);return o.filter((e=>e.topic&&e.confidence&&e.reason&&["high","medium","low"].includes(e.confidence))).slice(0,3)}catch(t){return[]}}),[]),M=(0,o.useCallback)((e=>{const t=e.filter((e=>"search-chat"===e.type)).sort(((e,t)=>e.id.localeCompare(t.id)));return(t.length>0?t.map((e=>e.value)).join(""):null)||"No recommendations available"}),[]);(0,o.useEffect)((()=>{if(!t)return void h({phase:"done",data:null});if(0===I.length)return void h({phase:"done",data:null});(async()=>{h({phase:"loading",data:null,error:void 0});try{const t=I.map((e=>e.name)),n=await E(t);var e;if(!u().Q.isSuccess(n))throw new Error((null===(e=n.error)||void 0===e?void 0:e.message)??"Unknown error");const o=M(n.value);h({phase:"done",data:o})}catch(t){h({phase:"error",data:null,error:t instanceof Error?t.message:"Unknown error"})}})()}),[I,t,R,E,M]),(0,o.useEffect)((()=>{if(!t)return;(async()=>{r({phase:"analyzing",data:[],error:void 0});try{const t=await D();var e;if(!u().Q.isSuccess(t))throw new Error((null===(e=t.error)||void 0===e?void 0:e.message)??"Unknown error");const n=A(t.value);r({phase:"done",data:n})}catch(t){r({phase:"error",data:[],error:t instanceof Error?t.message:"Unknown error"})}})()}),[e,t,y,w,R,D,A]),(0,o.useEffect)((()=>{if("done"!==n.phase||0===n.data.length||!t)return void("done"===n.phase&&0===n.data.length&&f({phase:"done",data:null}));(async()=>{f({phase:"loading",data:null,error:void 0});try{const t=await U(n.data);var e;if(!u().Q.isSuccess(t))throw new Error((null===(e=t.error)||void 0===e?void 0:e.message)??"Unknown error");const o=M(t.value);f({phase:"done",data:o})}catch(t){f({phase:"error",data:null,error:t instanceof Error?t.message:"Unknown error"})}})()}),[n.phase,n.data,e,t,y,w,R,U,M]);const[B,j]=(0,o.useState)(!1),F=(0,s().IS)((e=>{const{unhoveredBoxShadow:t,hoveredBoxShadow:n}=(0,C().vy)({layout:"card",theme:e});return{container:{position:"relative",padding:16,borderRadius:12,backgroundColor:"dark"===e.mode?e.surface.wash:e.surface.page,boxShadow:B?n:t},prototypeNote:{fontSize:m().J.UISmall.desktop,fontStyle:"italic",color:e.text.secondary,marginBottom:12},title:{fontWeight:m().Wy.medium,marginBottom:8},content:{fontSize:m().J.UIRegular.desktop,lineHeight:"1.5"},topicTag:{display:"inline-block",padding:"4px 8px",backgroundColor:e.surface.wash,borderRadius:4,fontSize:m().J.UISmall.desktop}}}),[B]),L=(0,o.useCallback)((()=>j(!0)),[]),z=(0,o.useCallback)((()=>j(!1)),[]);return(0,T.jsxs)("div",{style:F.container,onMouseEnter:L,onMouseLeave:z,children:[(0,T.jsx)("div",{style:F.prototypeNote,children:"Are more than ~60% of the results helpful? Let us know in #proj-feed-posts! (Note: Links may be broken.)"}),(0,T.jsx)("div",{style:F.title,children:"Recommended content based on your topics"}),(0,T.jsxs)("div",{style:F.content,children:[I.length>0?(0,T.jsx)(N,{title:"Based on Your Topic Subscriptions",state:p,loadingMessage:"Finding content for your subscribed topics...",headerContent:(0,T.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:I.map(((e,t)=>(0,T.jsx)("span",{style:F.topicTag,children:e.name},t)))})}):void 0,(0,T.jsx)(O,{title:"Your Activity Analysis",topics:n.data,phase:n.phase,error:n.error}),(0,T.jsx)(N,{title:"Based on Your Activity Patterns",state:v,loadingMessage:"Finding content for discovered topics...",waitingMessage:"Waiting for topic analysis..."})]})]})}},568008:(e,t,n)=>{n.d(t,{EF:()=>s,OY:()=>d,qM:()=>c});n(581454);var o=()=>n(498212),r=()=>n(751156),i=()=>n(755199),a=()=>n(765957);function s(e){var t;const n=(null===(t=e.getSettings())||void 0===t?void 0:t.custom_topics)||{};return Object.entries(n).map((e=>{let[t,n]=e;return{id:t,...n}}))}function d(e){var t;const{environment:n,name:s,creator:d,description:c,icon:l}=e,u=a().default.state.currentUserSettingsStore;if(!u)return;const m=Date.now(),p=(0,o().lZ)(),h=(null===(t=u.getSettings())||void 0===t?void 0:t.custom_topics)||{};r().createAndCommit({userAction:"userTopicsActions.createTopic",environment:n,canUndo:!0,cellTarget:"main",perform:e=>{i().mJ({userSettingsStore:u,data:{custom_topics:{...h,[p]:{name:s,createdAt:m,updatedAt:m,creator:d,...c?{description:c}:{},...l?{icon:l}:{}}}},transaction:e})}})}function c(e){var t;const{environment:n,topicId:o}=e,s=a().default.state.currentUserSettingsStore;if(!s)return;const d=(null===(t=s.getSettings())||void 0===t?void 0:t.custom_topics)||{};if(!d[o])return;const c={...d};delete c[o],r().createAndCommit({userAction:"userTopicsActions.removeTopic",environment:n,canUndo:!0,cellTarget:"main",perform:e=>{i().mJ({userSettingsStore:s,data:{custom_topics:c},transaction:e})}})}}}]);