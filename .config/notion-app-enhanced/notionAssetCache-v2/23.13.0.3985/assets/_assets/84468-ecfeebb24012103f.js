"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[84468],{16789:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>a,notionCalendarIcon:()=>r});o(296540);var i=o(474848);const a={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{fill:"#000",d:"M3.345 15.902c-.307-.003-.58-.083-.792-.285l-.001-.001-.07-.075a1.1 1.1 0 0 1-.258-.716L2.22 3.685c0-.644.534-1.223 1.165-1.263l10.917-.688q.035-.003.071-.003a1.03 1.03 0 0 1 .797.368c.164.194.253.441.253.709v.285s.007.233-.22.249l.001.001-10.041.641c-.737.047-1.335.697-1.335 1.45l-.005 10.298c-.007.17-.145.17-.258.17z"}),(0,i.jsx)("path",{fill:"#000",d:"m17.784 16.765-.003.05a.82.82 0 0 1-.647.737l-.02.002-11.647.72H5.43a.93.93 0 0 1-.603-.26.97.97 0 0 1-.295-.681V5.455a.82.82 0 0 1 .707-.747l.029-.004L16.92 3.96l.055-.002a.796.796 0 0 1 .774.583q.025.09.031.185z"}),(0,i.jsx)("path",{fill:"#fff",d:"M18.5 4.786c0-.439-.169-.842-.477-1.136a1.5 1.5 0 0 0-1.142-.414l-.598.037c-.15.004-.143-.113-.143-.113v-.352c0-.51-.197-.98-.555-1.322a1.74 1.74 0 0 0-1.328-.482l-10.919.688C2.325 1.756 1.5 2.651 1.5 3.686l.002 11.14c0 .51.197.98.555 1.322.33.317.757.488 1.214.488l.4-.007c.131 0 .153.062.153.178v.57c0 .457.179.879.5 1.186.296.284.68.437 1.089.437l.048-.001.024.001.108-.003 11.502-.71a2 2 0 0 0 .15-.018c.698-.087 1.254-.714 1.254-1.437l-.002-.007.003-.06zM3.345 15.902c-.307-.003-.58-.083-.792-.285l-.001-.001-.07-.075a1.1 1.1 0 0 1-.258-.716L2.22 3.685c0-.644.534-1.223 1.165-1.263l10.917-.688q.035-.003.071-.003a1.03 1.03 0 0 1 .797.368c.164.194.253.441.253.709v.285s.007.233-.22.249l.001.001-10.041.641c-.737.047-1.335.697-1.335 1.45l-.005 10.298c-.007.17-.145.17-.258.17zm14.443.863-.003.05a.82.82 0 0 1-.647.737l-.02.002-11.647.719h-.036a.93.93 0 0 1-.603-.259.97.97 0 0 1-.294-.681l-.002-.032V5.505l.002-.05a.82.82 0 0 1 .706-.747q.015-.001.029-.004l11.652-.744.055-.002a.796.796 0 0 1 .774.583q.025.09.031.185v7.698l.003 4.34"}),(0,i.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"m16.11 16.391-9.75.579c-.4.028-.752-.11-.741-.642v-8.29c0-.284.23-.466.483-.48L16.24 6.94a.427.427 0 0 1 .46.432v8.304c0 .304-.074.695-.587.715z",clipRule:"evenodd"}),(0,i.jsx)("path",{fill:"#000",d:"M8.639 10.072c-.477.03-.638.4-.638.97v.101c-.057.014-.104.026-.162.03-.343.022-.59-.263-.591-.773-.001-.78.684-1.515 1.99-1.598 1.162-.074 1.906.5 1.907 1.51 0 .76-.618 1.3-1.227 1.47 1.143.057 1.62.707 1.622 1.538.001 1.421-1.017 2.226-2.59 2.326l-.038.002c-1.182.075-2.011-.383-2.012-1.173 0-.45.323-.831.81-.862.037-.003.075.005.113.002.097.805.63 1.101 1.164 1.068.515-.033.876-.387.876-.887v-.02c0-.781-.64-.82-1.602-.859l-.153-.931c.896-.168 1.343-.466 1.342-1.006 0-.58-.315-.941-.81-.91h-.001zm4.297-.384c-.953.281-1.163-.146-1.059-.593a36 36 0 0 0 2.62-.797l.007 5.995 1.038.154c0 .39-.218.634-.609.66-.324.02-1.077.048-1.439.07-.562.036-1.59.122-1.59.122a.7.7 0 0 1-.04-.228c0-.19.077-.386.324-.471l.752-.248z"})]})},r=(0,o(340498).wt)("notionCalendar",a)},184468:(e,t,o)=>{o.d(t,{j:()=>Se});o(944114),o(898992),o(908872);var i=()=>o(175482),a=(o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(803949),o(581454),o(737550),()=>o(496603)),r=()=>o(534177),n=()=>o(700500),l=()=>o(970013),s=()=>o(641007),d=()=>o(206267),c=()=>o(792071),p=()=>o(134025),u=()=>o(912720),f=()=>o(199378),m=()=>o(179034),g=()=>o(919709);function v(e){var t;const{blockValue:o,factoryButtonDeprecationContext:i,source:a}=e,r=function(e){return c().Bj6.fromValue(m().ev,e).getCreatedByPointer()??{id:s().rb.id,table:s().rb.table}}(o),n=o.space_id,l=d().JW(),p=d().JW(),v=i.isRootBlockFactoryBlock&&i.isCurrentBlockRootBlock?i.rootTextContainerId:d().JW(),_=function(e){const{automationActionId:t,textContainerBlockId:o,creatorPointer:i,originalBlockValue:a,spaceId:r,blockContent:n}=e;return{table:m().ev,value:{id:o,space_id:r,alive:!0,parent_table:f().SC,parent_id:t,type:"text",version:0,content:n,created_time:a.created_time,created_by_table:i.table,created_by_id:i.id}}}({automationActionId:p,textContainerBlockId:v,creatorPointer:r,originalBlockValue:o,blockContent:"duplication"===a?null===(t=o.content)||void 0===t?void 0:t.map((t=>e.pointerMapper({id:t,table:m().ev}).id)):o.content,spaceId:n}),b=function(e){const{automationId:t,automationActionId:o,spaceId:i,textContainerBlockId:a}=e;return{table:f().SC,value:{id:o,space_id:i,alive:!0,parent_table:u().yB,parent_id:t,type:"duplicate_blocks",blocks:[a],version:0,config:void 0}}}({automationActionId:p,automationId:l,creatorPointer:r,originalBlockValue:o,spaceId:n,textContainerBlockId:v}),y=function(e){var t;const{creatorPointer:o,automationActionId:i,originalBlockValue:a,spaceId:r,automationId:n}=e,l=d().JW(),s=Date.now();return{table:u().yB,value:{id:n,space_id:r,alive:!0,trigger:{id:l,type:"button"},parent_id:a.id,parent_table:m().ev,action_ids:[i],status:"active",properties:{name:(0,g().q4_)(null===(t=a.properties)||void 0===t?void 0:t.title)},created_by_id:o.id,created_by_table:o.table,created_time:a.created_time??s,last_edited_time:a.last_edited_time??s,version:0,last_edited_by_id:a.last_edited_by_id??o.id,last_edited_by_table:a.last_edited_by_table??o.table}}}({automationActionId:p,automationId:l,creatorPointer:r,originalBlockValue:o,spaceId:n});return{textContainerBlock:_,automation:y,automationAction:b}}o(354520);class _{constructor(e,t,i){this.childToParentMap=new Map,this.unmappedContentIds=new Set,this.extraTranscludedChildren=new(o(99895).G)((()=>new Set)),this.logWarning=t,this.createCopyIndicator=i;for(const{model:o}of e)if(o instanceof c().zgg)for(const t of o.getContentPointers()){e.getModel(t)?this.childToParentMap.has(t.id)?this.extraTranscludedChildren.get(t.id).add(o.id):this.childToParentMap.set(t.id,o.pointer.id):this.unmappedContentIds.add(t.id)}!this.createCopyIndicator&&this.logWarning&&this.logWarning({type:"multiReferencedContentIds",contentIds:Array.from(this.extraTranscludedChildren.keys())})}remapDuplicateBlockParent(e){const{originalBlockPointer:t,duplicateMapper:o}=e,i=this.childToParentMap.get(t.id);if(!i)return;const a=o({requested:{table:m().ev,id:i},requester:t});return a&&a.table===m().ev?a:void 0}createCopyIndicatorBlockValue(e){const{type:t,targetSpaceId:i,sourceBlockId:a,duplicateParentId:r,createdBy:l,createOptions:s,additionalRecordsToMutate:p}=e,{model:u}=c().zgg.create({id:(0,d().JW)(),type:n().xd.copyIndicator,space_id:i,parentPointer:{id:r,table:m().ev,spaceId:i},createdBy:l},{useCrdt:o(807427).I()}),f=u.__IM_SORRY__getValue();return s.onCreate({type:t,duplicateBlockId:f.id,sourceBlockId:a,duplicateParentId:r}),p.push({table:m().ev,value:f}),f.id}remapDuplicateBlockContent(e){const{originalBlockPointer:t,duplicateMapper:o,originalBlockContent:i,originalCreatedBy:a,duplicateBlockId:n,targetSpaceId:l}=e,s=[];return{content:i.map((e=>{if(this.createCopyIndicator&&this.extraTranscludedChildren.has(e)&&this.extraTranscludedChildren.get(e).has(t.id))return this.createCopyIndicatorBlockValue({type:"multi-transcluded-content",targetSpaceId:l,sourceBlockId:e,duplicateParentId:n,createdBy:a,createOptions:this.createCopyIndicator,additionalRecordsToMutate:s});const i=o({requested:{table:m().ev,id:e},requester:t});return i?i.id:this.isUnmappedContentId(e)?this.createCopyIndicator?this.createCopyIndicatorBlockValue({type:"unmapped-content",targetSpaceId:l,sourceBlockId:e,duplicateParentId:n,createdBy:a,createOptions:this.createCopyIndicator,additionalRecordsToMutate:s}):void(null===(r=this.logWarning)||void 0===r||r.call(this,{type:"unmappedContentId",block:t,contentId:e})):e;var r})).filter(r().O9),additionalRecords:s}}isUnmappedContentId(e){return this.unmappedContentIds.has(e)}}var b=()=>o(728396);function y(e,t,o){if((0,b().A8)(e)||(0,b().Jc)(e))return[];const i=[];return o&&i.push(...o),null!=t&&t.previousViewsMainCollectionViewBlockPointer&&i.push(t.previousViewsMainCollectionViewBlockPointer.id),i}var I=()=>o(142748),k=()=>o(813690),h=()=>o(388821),w=()=>o(696706),C=()=>o(519831),M=()=>o(869558),q=()=>o(343666),B=()=>o(197959),x=()=>o(37165),T=()=>o(144081),S=()=>o(204384),P=()=>o(161479),R=()=>o(123382),V=()=>o(743246);o(16280);function A(e){const{mapper:t,requested:o,requester:i,table:a}=e,r=L({mapper:t,requested:o,requester:i});if(!(0,w().Yt)(r,a))throw new Error(`Expected mapped duplicate for ${o.table} ${o.id} to be a ${a}, but it is a ${r.table} (while duplicating ${i.table} ${i.id})`);return r}function L(e){const{mapper:t,requested:o,requester:i}=e,a=t({requested:o,requester:i});if(!a)throw new Error(`Unable to find mapped duplicate for ${o.table} ${o.id} while duplicating ${i.table} ${i.id}`);return a}var D=()=>o(522328),N=()=>o(433519),z=()=>o(498212),O=()=>o(973647),j=()=>o(720665),U=()=>o(189141),F=()=>o(612740),E=()=>o(31503);const $="415fc269-e68f-4da0-b3e3-b1273b741a7f";var G=()=>o(651124),W=()=>o(68263),H=()=>o(861017),J=()=>o(824862),Y=()=>o(665344);var Q=()=>o(777447);function Z(e){var t;const{blockId:o,spaceId:i,mapper:a,requester:r}=e;if(!o)return;return null===(t=a({requested:(0,F().iL)({blockId:o,spaceId:i}),requester:r}))||void 0===t?void 0:t.id}var K=()=>o(142406);function X(e){var t,o,i,l,d,p,f,_,b,y,I,k,h,q,x;const{originalBlock:T,duplicateBlock:S,mapper:R,options:A,originOptions:L,rewiredUriMap:D,typedCollectionViewBlocks:N,actor:X,helperRecordMap:ee,factoryButtonDeprecationContext:te,legacyTransclusionFixer:oe,installationImprint:ie,shouldExcludeBlocksFromLimit:ae=!1,accessLockingValidator:re}=e,ne={table:m().ev,id:T.id,spaceId:T.space_id};null!==(t=T.format)&&void 0!==t&&t.app_config_uri&&null!==(o=S.format)&&void 0!==o&&o.app_config_uri&&((0,G().Sn)(T.format.app_config_uri)?S.format.app_config_uri=void 0:((0,n().Ef)(S.type)&&N.push({table:m().ev,id:S.id,spaceId:S.space_id}),D[T.id]=S.id));const le=[];if(S.crdt_data&&delete S.crdt_data,S.crdt_format_version&&delete S.crdt_format_version,null!==(i=S.format)&&void 0!==i&&i.site_id&&delete S.format.site_id,null!==(l=S.format)&&void 0!==l&&l.marketplace_listing_id&&delete S.format.marketplace_listing_id,null!==(d=S.format)&&void 0!==d&&d.slug&&delete S.format.slug,null!==(p=S.format)&&void 0!==p&&p.trigger_id_to_schedule_id&&delete S.format.trigger_id_to_schedule_id,"factory"===S.type&&te){const{automation:e,automationAction:t,textContainerBlock:o}=v({blockValue:S,source:"duplication",pointerMapper:e=>R({requested:e,requester:ne})??e,factoryButtonDeprecationContext:te});le.push(e,t,o),te.factoryBlockIdToNewTextContainerIdMap.set(T.id,{id:o.value.id,table:m().ev});const i=S;i.type="button",i.content=[],i.format={...i.format,automation_id:e.value.id}}let se;if((0,z().uj)(T.id)&&(S.format||(S.format={}),S.format.copied_from_pointer={table:m().ev,id:T.id,spaceId:T.space_id},S.copied_from=T.id),T.parent_table===m().ev&&(se=null==te?void 0:te.factoryBlockIdToNewTextContainerIdMap.get(T.parent_id)),se??=(null==oe?void 0:oe.remapDuplicateBlockParent({originalBlockPointer:ne,duplicateMapper:R}))??R({requested:{table:S.parent_table,id:S.parent_id,spaceId:S.space_id},requester:ne}),se&&(S.parent_id=se.id,S.parent_table!==se.table&&(0,F().LA)(se)&&(S.parent_table=se.table)),null!==(f=S.format)&&void 0!==f&&f.ai_instructions_page_pointer&&(S.format.ai_instructions_page_pointer=R({requested:S.format.ai_instructions_page_pointer,requester:ne})),null!==(_=S.format)&&void 0!==_&&_.ai_skill_pointer&&(S.format.ai_skill_pointer=R({requested:S.format.ai_skill_pointer,requester:ne})),null!==(b=S.format)&&void 0!==b&&b.ai_block_configuration_menu){if(A.resolveTemplateVariables){const e=(0,U().p8)(S.format.ai_block_configuration_menu);if(O().Q.isSuccess(e)){const t=e.value;if("context"in t){const e=(t.context??[]).map((e=>{if("currentPage"===e.type){var t;return{type:"page",pageId:(null===(t=R({requested:{table:m().ev,id:e.pageId,spaceId:S.space_id},requester:ne}))||void 0===t?void 0:t.id)??e.pageId}}if("page"===e.type||"collection"===e.type||"slack"===e.type)return e;(0,r().HB)(e)}));S.format.ai_block_configuration_menu={...t,context:e}}}}}const de=S;de.view_ids&&(de.view_ids=de.view_ids.map((e=>{var t;return(null===(t=R({requested:{table:M().Gy,id:e,spaceId:de.space_id},requester:ne}))||void 0===t?void 0:t.id)||e})));const ce=c().Bj6.fromBlock(de).getCollectionPointers(),pe=[];for(const a of ce){var ue;const e=null==ee?void 0:ee.getValue(a);if(null==e||null===(ue=e.format)||void 0===ue?void 0:ue.bot_id)pe.push(a);else{const e=R({requested:a,requester:ne})||a;if(e.table!==C().Vl)throw new Error(`Collection pointer for duplicate collection is invalid: ${JSON.stringify(e)}`);pe.push(e)}}pe.length>0&&(de.collection_id=pe[0].id,de.format={...de.format,collection_pointer:pe[0],collection_pointers:pe}),null!==(y=S.format)&&void 0!==y&&y.form_layout_pointer&&(S.format.form_layout_pointer=R({requested:S.format.form_layout_pointer,requester:ne}));let fe=[];var me,ge,ve,_e,be,ye;if(A.duplicateDiscussions){if("page"===S.type&&null!==(me=S.format)&&void 0!==me&&me.suggestions){S.format.suggestions.filter((e=>["insert","remove"].includes(e.type))).length>0&&(fe=S.format.suggestions.map((e=>e.discussionId)),delete S.format.suggestions)}}else null!==(I=S.format)&&void 0!==I&&I.suggestions&&delete S.format.suggestions;(S.discussions&&(A.duplicateDiscussions?S.discussions=S.discussions.filter((e=>!fe.includes(e))).map((e=>{var t;return(null===(t=R({requested:w().L3.fromPointerLike({table:B().$Y,id:e,spaceId:S.space_id}),requester:ne}))||void 0===t?void 0:t.id)||e})):delete S.discussions),S.permissions)&&(A.duplicatePermissions?S.permissions=function(e){const{block:t,targetSpaceSettings:o,targetTeamSettings:i}=e;return(t.permissions||[]).filter((e=>!((0,W().P3)(e)||(0,W().Ds)(e)||(!i&&o.disablePublicAccess||i&&i.disable_public_access)&&(0,W().FP)(e)||(!i&&o.disableGuests||i&&i.disable_guests)&&(0,W().B2)(e)&&!o.memberUserIds.includes(e.user_id))))}({block:S,targetSpaceSettings:A.duplicatePermissions.targetSpaceSettings,targetTeamSettings:null===(ge=A.duplicatePermissions)||void 0===ge?void 0:ge.targetTeamSettings}):(delete S.permissions,"form"===S.type&&(S.permissions=(0,E().eb)())));S.content_classification&&delete S.content_classification,S.moved&&delete S.moved,S.properties||(S.properties={});for(const a in S.properties){const e=A.duplicateDiscussions?S.properties[a]:g().Uee(S.properties[a],{removeSuggestionAnnotationsAndText:!0,removeSuggestionAnnotations:!0,removeDiscussions:!0});S.properties[a]=e}if(!ae||S.type===n().xd.collectionViewPage||S.content&&0!==S.content.length?S.ignore_block_count&&delete S.ignore_block_count:S.ignore_block_count=!0,S.properties)for(const a of Object.keys(S.properties)){const e=S.properties[a];e&&(S.properties[a]=(0,K().R)({...L,text:{value:e,spaceId:(0,P().e)(S.space_id)},mapper:R,requester:ne,resolveTemplateVariables:A.resolveTemplateVariables||!1}))}if("transclusion_reference"===S.type&&A.deepCopyTransclusionContainers){const e=S;if(e.format&&e.format.transclusion_reference_pointer){const t=e.format.transclusion_reference_pointer,o=R({requested:t,requester:ne});o&&(e.format.transclusion_reference_pointer=o)}}if((0,n().$I)(S.type)&&A.shallowCopyNavigableBlock){const e=S;e.type="text";const t=g().ld4(T.id,T.space_id),o=[g().wmz(t)];e.properties={title:o},e.content=[]}if("transclusion_container"===S.type&&!A.deepCopyTransclusionContainers){const e=S;e.type="transclusion_reference",e.content=void 0;const t=e.format||{};t.transclusion_reference_pointer=ne,e.format=t}if("alias"===S.type&&S.format&&S.format.alias_pointer){const e=S.format.alias_pointer,t=R({requested:e,requester:ne});t&&(S.format.alias_pointer=t)}if("image"===S.type){var Ie;const e=null===(Ie=S.format)||void 0===Ie?void 0:Ie.image_hyperlink;if(S.format&&e){const[t]=(0,H().Jq)({url:e,isMobile:!1,baseUrl:"",publicDomainName:"",protocol:void 0,currentUrl:void 0});if(t){const e=function(e){const{route:t,spaceId:o,mapper:i,requester:a}=e;if("page"!==t.name||!t.blockId)return;const r=Z({blockId:t.blockId,spaceId:o,mapper:i,requester:a});return r?(0,Q().wv)({pageId:r,scrollToBlockId:Z({blockId:t.scrollToBlockId,spaceId:o,mapper:i,requester:a}),peekViewBlockId:Z({blockId:t.peekViewBlockId,spaceId:o,mapper:i,requester:a}),collectionViewId:Z({blockId:t.collectionViewId,spaceId:o,mapper:i,requester:a})}):void 0}({route:t,spaceId:S.space_id,mapper:R,requester:ne});e&&(S.format.image_hyperlink=e)}}}if(ve=S,(0,n().p7)(ve.type)&&S.format)if(ie)S.format.installation_imprint={pointer:ie};else if(S.format.installation_imprint&&re&&re.shouldOverwriteInstallationOnBlock(S.format.installation_imprint.pointer.id)){const e=re.getNewInstallationForInstallationId(S.format.installation_imprint.pointer.id);e&&void 0!==e&&(S.format.installation_imprint={pointer:{id:e.id,table:Y()._i}})}if((S.type===n().xd.externalObjectInstancePage&&(S.type=n().xd.externalObjectInstance),S.type===n().xd.externalObjectInstance)&&(null!==(_e=S.format)&&void 0!==_e&&_e.related_external_object_uris_to_instance_ids&&(S.format.related_external_object_uris_to_instance_ids=(0,j().MU)((0,r().WP)(S.format.related_external_object_uris_to_instance_ids).map((e=>{var t;let[o,i]=e;return[o,(null===(t=R({requested:{table:m().ev,id:i,spaceId:de.space_id},requester:ne}))||void 0===t?void 0:t.id)||i]})))),A.convertExternalObjectInstancesToPlaceholders&&(null===(be=S.format)||void 0===be||!be.is_placeholder)&&null!==(ye=S.format)&&void 0!==ye&&ye.bot_id)){const e=null==ee?void 0:ee.getValue({table:J().GP,id:S.format.bot_id}),t=null==e?void 0:e.integration_id;if(t){const e={is_placeholder:!0,integration_id:t};S.format=e}}S.file_ids&&function(e){var t;const o=JSON.stringify(e.properties);e.file_ids=null==e||null===(t=e.file_ids)||void 0===t?void 0:t.filter((t=>{var i,a,r,n,l,s;return!(null===(i=e.format)||void 0===i||!i.display_source||-1===(null===(a=e.format)||void 0===a||null===(a=a.display_source)||void 0===a?void 0:a.indexOf(t)))||!(null===(r=e.format)||void 0===r||!r.page_cover||-1===(null===(n=e.format)||void 0===n||null===(n=n.page_cover)||void 0===n?void 0:n.indexOf(t)))||!(null===(l=e.format)||void 0===l||!l.page_icon||-1===(null===(s=e.format)||void 0===s||null===(s=s.page_icon)||void 0===s?void 0:s.indexOf(t)))||-1!==o.indexOf(t)}))}(S);const ke=T,he=S;if(he.format&&(null!==(k=ke.format)&&void 0!==k&&k.original_source||null!==(h=ke.format)&&void 0!==h&&h.image_edit_metadata)&&(he.format.original_source=void 0,he.format.image_edit_metadata=void 0),null!==(q=S.format)&&void 0!==q&&q.automation_id){const e=R({requested:{table:u().yB,id:S.format.automation_id,spaceId:S.space_id},requester:ne});e&&(S.format.automation_id=e.id)}var we;null!==(x=S.format)&&void 0!==x&&x.workflow_id&&(S.format.workflow_id=null===(we=R({requested:{table:V().C0,id:S.format.workflow_id,spaceId:S.space_id},requester:ne}))||void 0===we?void 0:we.id);if(S.type===n().xd.transcription&&S.format){var Ce,Me,qe,Be;if(S.format.transcription_notes_id)S.format.transcription_notes_id=null===(Me=R({requested:{table:m().ev,id:S.format.transcription_notes_id,spaceId:S.space_id},requester:ne}))||void 0===Me?void 0:Me.id;if(S.format.transcription_transcript_id)S.format.transcription_transcript_id=null===(qe=R({requested:{table:m().ev,id:S.format.transcription_transcript_id,spaceId:S.space_id},requester:ne}))||void 0===qe?void 0:qe.id;if(S.format.transcription_summary_id)S.format.transcription_summary_id=null===(Be=R({requested:{table:m().ev,id:S.format.transcription_summary_id,spaceId:S.space_id},requester:ne}))||void 0===Be?void 0:Be.id;const e=null===(Ce=S.format.transcription_state)||void 0===Ce?void 0:Ce.state;"transcribing"!==e&&"summarizing"!==e||(S.format.transcription_state={state:"paused"})}if("collection"===T.parent_table&&T.type===n().xd.copyIndicator&&S.properties&&(0,r().uv)(S.properties).length>0&&(S.type=n().xd.page),!A.preserveSourceMetadataTimestamps){const e=Date.now();S.created_time=e,S.last_edited_time=e}X&&(S.last_edited_by_id=X.id,S.last_edited_by_table=X.table,S.created_by_id=X.id,S.created_by_table=X.table),S.non_content_children&&(S.non_content_children=S.non_content_children.map((e=>{var t;return(null===(t=R({requested:{table:m().ev,id:e,spaceId:S.space_id},requester:ne}))||void 0===t?void 0:t.id)||e})));const xe=S;if(xe.content){var Te;if(oe){const e=oe.remapDuplicateBlockContent({originalBlockPointer:ne,duplicateMapper:R,originalBlockContent:xe.content,originalCreatedBy:X||s().TI.pointer,duplicateBlockId:xe.id,targetSpaceId:S.space_id});xe.content=e.content,le.push(...e.additionalRecords)}else xe.content=xe.content.map((e=>{var t;return(null===(t=R({requested:{table:m().ev,id:e},requester:ne}))||void 0===t?void 0:t.id)||e}));if(S.space_id===$&&null!==(Te=S.properties)&&void 0!==Te&&Te.title){var Se,Pe,Re;const e=(0,g().RQ)(null===(Se=S.properties)||void 0===Se?void 0:Se.title);e&&e.length>0&&e[0].length>0&&null!==(Pe=e[0][0])&&void 0!==Pe&&null!==(Pe=Pe.trim())&&void 0!==Pe&&Pe.startsWith("ðŸŽ²")&&null!==(Re=e[0][0])&&void 0!==Re&&null!==(Re=Re.trim())&&void 0!==Re&&Re.endsWith("ðŸŽ²")&&(xe.content=a().k4(xe.content))}}return{duplicateRecord:S,additionalRecords:le}}var ee=()=>o(713998),te=()=>o(715256),oe=()=>o(443881);function ie(e,t,o,i,a,n,s){var d,c,p,f;const g={table:C().Vl,id:e.id,spaceId:e.space_id};if(function(e,t,o){var i;if(null===(i=e.format)||void 0===i||!i.compound_workflow_template_instances)return;const a={table:C().Vl,id:e.id,spaceId:e.space_id};t.format||(t.format={});t.format.compound_workflow_template_instances=e.format.compound_workflow_template_instances.map((e=>({...e,instance_pointers:e.instance_pointers.map((e=>{const i=t.space_id;if("property"===e.type)return e;const r=e.type,n=A({table:r,mapper:o,requested:{table:r,id:e.id,spaceId:i},requester:a});return{type:n.table,id:n.id}}))})))}(e,t,o),null!==(d=e.format)&&void 0!==d&&d.app_config_uri&&(a[e.id]=t.id),(0,z().uj)(e.id)){if(t.format||(t.format={}),t.format.copied_from_pointer={table:C().Vl,id:e.id,spaceId:e.space_id},void 0!==t.format.collection_default_template&&"empty"!==t.format.collection_default_template){const e=o({requested:{table:m().ev,id:t.format.collection_default_template.template_page_id},requester:g});e&&(t.format.collection_default_template={template_page_id:e.id})}if(t.format.layout_pointer){const e=A({mapper:o,table:T().zx,requested:t.format.layout_pointer,requester:g});t.format.layout_pointer=e}t.copied_from=e.id}const v=o({requested:{table:t.parent_table,id:t.parent_id},requester:g});v&&(t.parent_id=v.id);const _=l().Dp(t);for(const r in _){const a=_[r];if(a&&"relation"===a.type&&l().Nv(a)){const e=o({requested:l().Nv(a),requester:g});e?(a.collection_id=e.id,a.collection_pointer={id:e.id,table:C().Vl,spaceId:(0,P().e)(e.spaceId)}):a.property&&(a.property=void 0)}var b;if(a&&"title"===a.type&&t.name&&(t.name=(0,K().R)({...i,text:{value:t.name,spaceId:t.space_id},mapper:o,requester:g,resolveTemplateVariables:!1})),a&&"button"===a.type&&a.automation_id)a.automation_id=(null===(b=o({requested:{id:a.automation_id,spaceId:e.space_id,table:u().yB},requester:g}))||void 0===b?void 0:b.id)??a.automation_id;n.checkGate({disableExposureLogging:!0,gateName:"collection_unique_select_options_validation",actor:s||te().S3})&&a&&l().DQ(a)&&a.options&&(a.options=(0,ee().ki)(a.options))}t.description&&(t.description=(0,K().R)({...i,text:{value:t.description,spaceId:t.space_id},mapper:o,requester:g,resolveTemplateVariables:!1}));for(const r in _){const e=_[r];if(!e||"formula"!==e.type||"v2"!==e.version||!e.formula2)continue;const{value:a}=(0,oe().RI)({baseUrl:i.baseUrl,formula:e.formula2.code,publicDomainName:i.publicDomainName,spaceId:t.space_id,visitors:{visitFormulaContextValue:void 0,visitFormulaPageProperty:e=>{if("collection"in e&&e.collection){const t=o({requested:e.collection,requester:g});if(t&&t.table===C().Vl)return{type:"replace",value:{...e,collection:t}}}return{type:"keep"}},visitRecordPointer:void 0}});e.formula2.code=a}if(t.template_pages&&(t.template_pages=t.template_pages.map((e=>{var t;return(null===(t=o({requested:{table:m().ev,id:e},requester:g}))||void 0===t?void 0:t.id)||e}))),null!==(c=t.format)&&void 0!==c&&c.collection_mode&&"page_tree"===t.format.collection_mode.type){var y;const e=t.format.collection_mode.root_page_pointer,i=(null===(y=o({requested:w().L3.fromPointerLike({table:"block",id:e.id,spaceId:t.space_id}),requester:g}))||void 0===y?void 0:y.id)||e.id;t.format.collection_mode={type:"page_tree",root_page_pointer:{id:i,table:"block",spaceId:t.space_id}}}null!==(p=t.format)&&void 0!==p&&p.related_external_object_uris_to_instance_ids&&(t.format.related_external_object_uris_to_instance_ids=(0,j().MU)((0,r().WP)(t.format.related_external_object_uris_to_instance_ids).map((e=>{var i;let[a,r]=e;return[a,(null===(i=o({requested:{table:C().Vl,id:r,spaceId:t.space_id},requester:g}))||void 0===i?void 0:i.id)||r]})))),delete t.deleted_schema,null!==(f=t.format)&&void 0!==f&&f.automation_ids&&(t.format.automation_ids=t.format.automation_ids.map((e=>{var i;return null===(i=o({requested:{id:e,table:u().yB,spaceId:t.space_id},requester:g}))||void 0===i?void 0:i.id})).filter(r().O9))}var ae=()=>o(921598),re=()=>o(300525);var ne=()=>o(691678),le=()=>o(976618);o(672577);var se=()=>o(262986);const de={block:!0,collection:!0,collection_view:!0,discussion:!0,comment:!0,reaction:!0,automation:!0,automation_action:!0,skill:!0,layout:!0,form_question:!0,workflow:!0};function ce(e){const t=e.clone(),o=c().b4_.fromRecordMap(t);function i(e){return(0,I().Yn)(e.pointer,o).some(((e,t)=>{const o=e.table!==m().ev;return 0===t?o:o||(0,n().$I)(e.type)}))}const a=[];for(const{pointer:r,model:n}of t)n&&!i(n)||a.push(r);return a.forEach((e=>t.delete(e))),t}function pe(e){return e.table in de}function ue(e){const{sourceBlockId:t,targetBlockPointer:o,recordMap:i,options:r,baseUrl:n,publicDomainName:l,actor:s,getRecordRole:p,mapper:u,preventLegacyTransclusions:f,createLegacyTransclusionCopyIndicator:g,logWarning:v,spaceIdCreator:b,installationImprint:w,experimentService:C,isTemplateInstantiation:M}=e,x=[];let P=i;null!=r&&r.shallowCopyNavigableBlock&&(P=ce(i));const R=e.recordPointerMap||h().RecordMapPolymorphic.create(),V={table:m().ev,id:t};for(const{pointer:a}of P){if(a.id===t){R.set(a,o);continue}let e=R.get(a);!e&&u&&(e=u({requested:a,requester:V})),e||(e={spaceId:o.spaceId,table:a.table,id:(null==b?void 0:b.idInSavedSpace(a.table))??d().Dt()}),R.set(a,e)}let A;f&&(A=new _(i,v,g??!1));const L=h().RecordMap.create(),D=e=>{let{requested:t}=e;return R.get(t)},N={},z=[],O=new Set,j=i.getModel({id:t,table:m().ev}),U=j?function(e){const t="duplication",o=new Map;let i;return"factory"===e.type?(i={type:t,isRootBlockFactoryBlock:!0,isCurrentBlockRootBlock:!1,factoryBlockIdToNewTextContainerIdMap:o,rootTextContainerId:d().JW()},i.factoryBlockIdToNewTextContainerIdMap.set(e.id,{id:i.rootTextContainerId,table:m().ev})):i={type:t,isRootBlockFactoryBlock:!1,factoryBlockIdToNewTextContainerIdMap:o},i}(j):void 0;for(const{pointer:a,model:d}of P){if(void 0===d)continue;if(!pe(d))continue;if(!(null!=r&&r.duplicateDiscussions||a.table!==B().$Y&&a.table!==q().SN&&a.table!==S().ez))continue;const e=Boolean((null==r?void 0:r.resolveTemplateVariables)&&ge({rootSourceBlockIds:[t],childSourcePointer:a,getSourceRecordValue:k().xb.fromRecordMap(i)}))?{...r,resolveTemplateVariables:!1}:r;if(d.table===T().zx){const e=y(d.getRawModules(),d.getFormat(),d.getBlocks());for(const t of e)O.add(t)}null!=U&&U.isRootBlockFactoryBlock&&(U.isCurrentBlockRootBlock=d.id===t);const{duplicateRecord:c,additionalRecords:u}=me({table:d.table,record:d.__IM_SORRY__getValue(),mapper:D,options:e,rewiredUriMap:N,typedCollectionViewBlocks:z,originOptions:{baseUrl:n,publicDomainName:l},actor:s,getRecordRole:p,factoryButtonDeprecationContext:U,legacyTransclusionFixer:A,installationImprint:w,experimentService:C,layoutCollectionViewBlocksToRemove:O});if(void 0!==c){if(d.table===m().ev&&c.id===o.id){const e=c;delete e.parent_id,delete e.parent_table,delete e.alive}M&&d.table===m().ev&&d.autoGenerateOnTemplateDuplication()&&x.push({table:m().ev,id:c.id,spaceId:c.space_id}),fe({duplicateRecordMap:L,duplicateRecordResult:{duplicateRecord:c,additionalRecords:u,duplicateRecordTable:d.table}})}}!function(e){const{rewiredUriMap:t,typedCollectionViewBlocks:o,duplicateRecordMap:i}=e;if(a().Im(t)||0===o.length)return;const r=a().oE(o.map((e=>i.getValue(e))));r.forEach((e=>{var o;const i=null==e||null===(o=e.format)||void 0===o?void 0:o.app_uri_map;i&&Object.entries(i).forEach((e=>{let[o,a]=e;i[o]=t[a]}))}));const n=r.reduce(((e,t)=>{var o;const i=null==t||null===(o=t.format)||void 0===o?void 0:o.app_id;return i&&(e[i]=e[i]?[...e[i],t]:[t]),e}),{});Object.entries(n).forEach((e=>{let[t,o]=e;const i=d().JW();o.forEach((e=>{var t;null!=e&&null!==(t=e.format)&&void 0!==t&&t.app_id&&(e.format.app_id=i)}))}))}({rewiredUriMap:N,typedCollectionViewBlocks:z,duplicateRecordMap:L});const F=function(e,t,o,i){if(0===e.size)return t;const a=new Set;for(const d of e){const e=o({requested:{id:d,table:m().ev},requester:i});a.add((null==e?void 0:e.id)||d)}const r=t.clone(),n=c().b4_.fromRecordMap(r);function l(e){return(0,I().Yn)(e.pointer,n).some(((e,t)=>a.has(e.id)))}const s=[];for(const{pointer:d,model:c}of r)c&&!l(c)||s.push(d);return s.forEach((e=>r.delete(e))),r}(O,L,D,V);return{duplicateRecordMap:F,originalToDuplicate:R,aiBlocksToAutoGenerate:x}}function fe(e){const{duplicateRecordResult:t,duplicateRecordMap:o}=e,{additionalRecords:i,duplicateRecord:a,duplicateRecordTable:r}=t;o.setValue(w().L3.fromPointerLike({table:r,id:a.id}),a);for(const n of i)o.setValue(w().L3.fromPointerLike({id:n.value.id,table:n.table}),n.value)}function me(e){const{table:t,record:o,mapper:i,options:n,originOptions:l,actor:s,helperRecordMap:d,getRecordRole:c,rewiredUriMap:p,typedCollectionViewBlocks:g,factoryButtonDeprecationContext:v,legacyTransclusionFixer:_,installationImprint:b,accessLockingValidator:y,experimentService:I,isTemplateInstantiation:k,shouldExcludeBlocksFromLimit:h,targetBlockIds:z,layoutCollectionViewBlocksToRemove:O}=e,j=a().mg(o),U=L({mapper:i,requested:w().L3.fromPointerLike({table:t,id:o.id,spaceId:o.space_id}),requester:w().L3.fromPointerLike({table:t,id:o.id})});j.id=U.id,j.space_id=(0,P().e)(U.spaceId);const F=[];if(t===m().ev){const e=j,{additionalRecords:t}=X({originalBlock:o,duplicateBlock:e,mapper:i,options:n??{},rewiredUriMap:p,typedCollectionViewBlocks:g,originOptions:l,actor:s,helperRecordMap:d,factoryButtonDeprecationContext:v,legacyTransclusionFixer:_,installationImprint:b,shouldExcludeBlocksFromLimit:h,accessLockingValidator:y});F.push(...t)}else if(t===C().Vl){ie(o,j,i,l,p,I,s)}else if(t===M().Gy){!function(e,t,o,i,a,r,n){var l,s,d,c,p,u,f;const g={table:M().Gy,id:e.id,spaceId:e.space_id};null!==(l=e.format)&&void 0!==l&&l.app_config_uri&&null!==(s=t.format)&&void 0!==s&&s.app_config_uri&&((0,G().Sn)(e.format.app_config_uri)?t.format.app_config_uri=void 0:i[e.id]=t.id);const v=null===(d=t.format)||void 0===d?void 0:d.collection_pointer;if(v){const e=null==a?void 0:a.getModel(v);if(!Boolean(null==e?void 0:e.isSyncedCollection())){const e=o({requested:v,requester:g})||v;t.format={...t.format,collection_pointer:e}}}if(t.format){var _;const e=null===(_=t.format.collection_groups)||void 0===_?void 0:_.map((e=>"relation"===e.value.type&&(0,ae().WO)(e.value.value)&&e.value.value?{...e,value:{type:"relation",value:o({requested:e.value.value,requester:g})}}:e));t.format.collection_groups=e;const i=t.format.collection_view_default_template;if(void 0!==i&&"empty"!==i){const e=o({requested:{table:m().ev,id:i.template_page_id},requester:g});e&&(r&&null!=n&&n.includes(e.id)||(t.format.collection_view_default_template={template_page_id:e.id}))}}const b=o({requested:{table:t.parent_table,id:t.parent_id,spaceId:t.space_id},requester:g});if(b&&(t.parent_id=b.id),t.page_sort&&(t.page_sort=t.page_sort.map((e=>{var i;return(null===(i=o({requested:{table:m().ev,id:e,spaceId:t.space_id},requester:g}))||void 0===i?void 0:i.id)||e}))),"page"===t.type&&null!==(c=t.format)&&void 0!==c&&c.page_pointer){var y;const e=t.format.page_pointer,i=(null===(y=o({requested:w().L3.fromPointerLike({table:"block",id:e.id,spaceId:t.space_id}),requester:g}))||void 0===y?void 0:y.id)||e.id;t.format.page_pointer={table:"block",id:i,spaceId:t.space_id}}if(null!==(p=t.format)&&void 0!==p&&p.property_filters){const e=t.format.property_filters;for(const t of e)t.filter&&(0,re().w)(t.filter,(e=>{var t;return null===(t=o({requested:e,requester:g}))||void 0===t?void 0:t.id}))}if(null!==(u=t.format)&&void 0!==u&&u.filters2){const e=t.format.filters2;for(const t of e)t.filter&&(0,re().w)(t.filter,(e=>{var t;return null===(t=o({requested:e,requester:g}))||void 0===t?void 0:t.id}))}const I=t.query2;var k;I&&I.filter&&(0,re().w)(I.filter,(e=>{var t;return null===(t=o({requested:e,requester:g}))||void 0===t?void 0:t.id})),null!==(f=t.format)&&void 0!==f&&f.form_block_pointer&&(t.format.form_block_pointer=o({requested:null===(k=t.format)||void 0===k?void 0:k.form_block_pointer,requester:g}))}(o,j,i,p,d,k,z)}else t===B().$Y?function(e,t,o,i){const a={table:B().$Y,id:e.id,spaceId:e.space_id},r=o({requested:{table:t.parent_table,id:t.parent_id,spaceId:t.space_id},requester:a});if(r&&(t.parent_id=r.id),t.comments&&(t.comments=t.comments.map((e=>{var i;return(null===(i=o({requested:{table:q().SN,id:e,spaceId:t.space_id},requester:a}))||void 0===i?void 0:i.id)||e}))),"default"===t.type&&t.context)t.context=(0,K().R)({...i,text:{value:t.context,spaceId:t.space_id},mapper:o,requester:a,resolveTemplateVariables:!1});else if("suggestion"===t.type)throw new Error("Not implemented")}(o,j,i,l):t===q().SN?function(e,t,o,i){const a={table:q().SN,id:e.id,spaceId:e.space_id},r=o({requested:w().L3.fromPointerLike({table:t.parent_table,id:t.parent_id,spaceId:t.space_id}),requester:a});if(r&&(t.parent_id=r.id),t.text&&(t.text=(0,K().R)({...i,text:{value:t.text,spaceId:t.space_id},mapper:o,requester:a,resolveTemplateVariables:!1})),t.content)for(const[s,d]of t.content.entries()){var n;const e=null===(n=o({requested:w().L3.fromPointerLike({table:m().ev,id:d,spaceId:t.space_id}),requester:a}))||void 0===n?void 0:n.id;e&&(t.content[s]=e)}if(t.reactions)for(const[s,d]of t.reactions.entries()){var l;const e=null===(l=o({requested:{table:S().ez,id:d,spaceId:t.space_id},requester:a}))||void 0===l?void 0:l.id;e&&(t.reactions[s]=e)}}(o,j,i,l):t===S().ez?function(e,t,o,i){const a={table:S().ez,id:e.id,spaceId:e.space_id},r=o({requested:w().L3.fromPointerLike({table:t.parent_table,id:t.parent_id,spaceId:t.space_id}),requester:a});r&&(t.parent_id=r.id)}(o,j,i):t===u().yB?(0,N().i)({originalRecord:o,duplicateRecord:j,mapper:i,options:n??{},actor:s}):t===f().SC?(0,D().I)({originalRecord:o,duplicateRecord:j,mapper:i,getRecordRole:c,options:n??{},originOptions:l}):t===V().C0?function(e){const{original:t,duplicate:o,mapper:i}=e,a={table:V().C0,id:t.id,spaceId:t.space_id},r=i({requested:{table:m().ev,id:t.parent_id,spaceId:t.space_id},requester:a});if(r&&(o.parent_id=r.id),o.space_id=(null==r?void 0:r.spaceId)??t.space_id,o.data){o.data.runtime_actor_pointer=void 0;for(const e of(null===(n=o.data)||void 0===n?void 0:n.modules)??[]){var n;if(!e.state)continue;const t=(0,se().jK)(e.type);null!=t&&t.stateDuplicator&&(e.state=t.stateDuplicator({original:e.state,mapper:i,requester:a}))}for(const e of o.data.triggers??[]){if(e.enabled=!1,!e.state)continue;const t=(o.data.modules??[]).find((t=>t.id===e.moduleId));if(!t)throw new Error(`Unable to find module with key "${e.moduleId}"`);const r=se().Nh[t.type];if(!r)continue;const n=r.triggers[e.state.type];if(!n)throw new Error(`Unable to find trigger definition for "${e.state.type}" in module "${t.type}"`);const l=n.triggerDuplicator;e.state=l({original:e.state,mapper:i,requester:a})}}}({original:o,duplicate:j,mapper:i,originOptions:l}):t===R().MC?function(e){let{original:t,duplicate:o,mapper:i,originOptions:a}=e;const r={table:R().MC,id:t.id,spaceId:t.space_id},n=i({requested:w().L3.fromPointerLike({table:o.parent_table,id:o.parent_id,spaceId:o.space_id}),requester:r});n&&(o.parent_id=n.id)}({original:o,duplicate:j,mapper:i,originOptions:l}):t===T().zx?function(e){var t,o;let{original:i,duplicate:a,mapper:r,layoutCollectionViewBlocksToRemove:n}=e;const l={table:T().zx,id:i.id,spaceId:i.space_id};a.parent_id=L({mapper:r,requested:w().L3.fromPointerLike({table:a.parent_table,id:a.parent_id,spaceId:a.space_id}),requester:l}).id,a.format||(a.format={}),a.format.copied_from_pointer={table:T().zx,id:i.id,spaceId:i.space_id},a.modules=(0,ne().Pe)(a.modules);const s=(0,le().E)(a.modules,(e=>"views"===e.type||"viewsMain"===e.type?{type:e.type,id:e.id,collection_view_block_pointer:{...A({table:m().ev,mapper:r,requested:w().L3.fromPointerLike(e.collection_view_block_pointer),requester:l}),spaceId:a.space_id}}:"formQuestion"===e.type?{type:"formQuestion",id:e.id,formQuestionId:{...A({table:x().lo,mapper:r,requested:w().L3.fromPointerLike({table:x().lo,id:e.formQuestionId,spaceId:a.space_id}),requester:l}),spaceId:a.space_id}.id,parentModuleId:e.parentModuleId,parentConditionalGroupId:e.parentConditionalGroupId,conditionalGroups:e.conditionalGroups}:"placeholder"===e.type?{type:"placeholder",id:e.id,parentModuleId:e.parentModuleId,parentConditionalGroupId:e.parentConditionalGroupId}:e)),d=Object.fromEntries(Object.entries(s.form_conditional_modules??{}).filter((e=>{const[t,o]=e;return"formQuestion"===o.type||"placeholder"===o.type})));a.modules={...s,form_conditional_modules:d},null!==(t=a.format)&&void 0!==t&&t.previousViewsMainCollectionViewBlockPointer&&null!=n&&n.has(a.format.previousViewsMainCollectionViewBlockPointer.id)&&delete a.format.previousViewsMainCollectionViewBlockPointer;const c=null===(o=i.blocks)||void 0===o?void 0:o.filter((e=>!(null!=n&&n.has(e))));c&&(a.blocks=c.map((e=>L({mapper:r,requested:{table:m().ev,id:e,spaceId:a.space_id},requester:l}).id)))}({original:o,duplicate:j,mapper:i,layoutCollectionViewBlocksToRemove:O}):t===x().lo?function(e){const{original:t,duplicate:o,mapper:i}=e,a={table:x().lo,id:t.id,spaceId:t.space_id},r=i({requested:w().L3.fromPointerLike({table:o.parent_table,id:o.parent_id,spaceId:o.space_id}),requester:a});r&&(o.parent_id=r.id)}({original:o,duplicate:j,mapper:i,originOptions:l}):(0,r().HB)(t);return{duplicateRecord:j,additionalRecords:F}}function ge(e){const{rootSourceBlockIds:t,childSourcePointer:o,getSourceRecordValue:i}=e;for(const a of(0,I()._N)(o,i))if(ve({rootSourceBlockIds:t,recordWithTable:a}))return!0;return!1}function ve(e){const{recordWithTable:t,rootSourceBlockIds:o}=e;if(t.table!==m().ev)return t.table===f().SC;if(o.includes(t.value.id))return!1;if(c().Bj6.fromBlock(t.value).isTemplateVariableContainerBlock())return!0}var _e=()=>o(583835),be=()=>o(857639),ye=()=>o(416504),Ie=()=>o(416845),ke=()=>o(798880),he=()=>o(439180),we=()=>o(357625),Ce=()=>o(246826),Me=()=>o(751156),qe=()=>o(780054),Be=()=>o(518736),xe=()=>o(217429),Te=()=>o(630116);function Se(e){const{environment:t,sourceBlockId:o,sourceBlockSubtree:i,targetBlockPointer:a,targetRecordCache:r,transaction:n,deepCopyTransclusionContainers:l,duplicateDiscussions:s,shallowCopyNavigableBlock:d,resolveTemplateVariables:c,recordPointerMap:p,preventLegacyTransclusions:u,createLegacyTransclusionCopyIndicator:f,spaceIdCreator:m,installationImprint:g,templateInstallationMetadata:v,isTemplateInstantiation:_,appendContentOnly:b}=e,y=t.currentUser.id;let I=!1;("onboarding"===(null==v?void 0:v.source)||"team_home"===(null==v?void 0:v.source)||null!=v&&v.isFirstPartyPaidTemplate&&xe().default.checkGate({gateName:"adoption_opt_templates_out_of_block_limit"}))&&(I=!0);const{duplicateRecordMap:k,originalToDuplicate:h,aiBlocksToAutoGenerate:w}=ue({sourceBlockId:o,targetBlockPointer:a,recordMap:i,recordPointerMap:p,options:{deepCopyTransclusionContainers:l,duplicateDiscussions:s,shallowCopyNavigableBlock:d,resolveTemplateVariables:!!c&&{currentUserId:y,currentTimeZone:(0,ye().P)()}},baseUrl:qe().A.domainBaseUrl,publicDomainName:qe().A.publicDomainName,actor:y?{table:ke().oo,id:y}:void 0,getRecordRole:r.makeGetRecordRoleFn(y),preventLegacyTransclusions:u,createLegacyTransclusionCopyIndicator:f,installationImprint:g,logWarning:Pe,spaceIdCreator:m,experimentService:xe().default,isTemplateInstantiation:Boolean(_)}),C=new(Te().Bv)(t,a,{inMemoryRecordCache:r});n.postPerformAssertions.push((function(){if(n.isLocal)return;if(!C.getParentStore())throw new(Ie().yI4)(`Initialized template was not given a parent before being committed in transaction ${n.getUserActionForAnalyticsPurposesOnly()}`)}));const M=C.getSpaceStore(),q=(0,Be().D8)(M);for(const{model:B}of k)B&&Re({transaction:n,model:B,rootStore:C,currentUserId:y,targetBlockPointer:a,targetRecordCache:r,isTemplateInstantiation:_,shouldExcludeBlocksFromLimit:I,appendContentOnly:b,useCrdt:q});w.length>0&&n.postSubmitCallbacks.push((async()=>{await async function(e){const{environment:t,aiBlockPointers:o,parentPageId:i}=e,a=(0,_e().Dv)("generateAiBlockTask");for(const r of o)for await(const e of(0,we().UT)(t,a,{blockId:r.id,spaceId:r.spaceId,parentPageId:i},{spaceIds:[]}));}({environment:t,aiBlockPointers:w,parentPageId:C.id})}));return{targetBlockStore:C,originalToDuplicate:h,subtreeSize:k.getSize()}}function Pe(e){"unmappedContentId"===e.type||("multiReferencedContentIds"===e.type?be().log({level:"warning",from:"createBlockActions",type:"multiReferencedContentIds",data:{ids:e.contentIds}}):(0,r().HB)(e))}function Re(e){const{transaction:t,model:o,rootStore:a,targetBlockPointer:l,currentUserId:s,targetRecordCache:d,isTemplateInstantiation:c,shouldExcludeBlocksFromLimit:g,appendContentOnly:v,useCrdt:_}=e;if(o.table===m().ev)return void function(e){var t,o;const{transaction:a,model:l,rootStore:s,targetBlockPointer:d,currentUserId:c,targetRecordCache:u,isTemplateInstantiation:f,shouldExcludeBlocksFromLimit:m,appendContentOnly:g,useCrdt:v}=e,_=l.__IM_SORRY__getValue(),b=Te().Bv.createChildStore(s,l.pointer);l.id===d.id&&f&&_.is_template&&(_.is_template=!1,_.format&&delete _.format.automation_id);!m||(y=_,y.type===n().xd.collectionViewPage||y.content&&0!==y.content.length)||(_.ignore_block_count=!0);var y;const I=l.getFormat(),k=(null===(t=u.getRecord({pointer:l.pointer,userId:c}))||void 0===t||null===(t=t.value)||void 0===t?void 0:t.format)??{},h=p().op.update({pointer:l.pointer,path:["format"],args:(0,r().uv)(k).reduce(((e,t)=>t in I&&void 0!==I[t]?e:{...e,[t]:null}),{})}),w=l.pointer.table===d.table&&l.pointer.id===d.id?null===(o=u.getRecord({pointer:l.pointer,userId:c}))||void 0===o?void 0:o.value:void 0;w&&(delete _.created_by_id,delete _.created_by_table,delete _.created_time);if(w&&g&&l.id===s.id){const e=s.getContentIds()??[],t=l.getContentIds()??[];return void Me().applyOperation({store:b,operation:p().op.update({args:{content:[...e,...t]},pointer:l.pointer,path:[]}),transaction:a})}const C=w?i().mP({existingBlock:w,updatedBlock:_}).concat([h]):i().VC({block:_,useCrdt:v});for(const i of C)(0,he().ph)(i)?Me().applyCrdtTextOperation({store:b,operation:i,invertedOperation:void 0,transaction:a}):Me().applyOperation({store:b,operation:i,transaction:a})}({transaction:t,model:o,rootStore:a,targetBlockPointer:l,currentUserId:s,targetRecordCache:d,isTemplateInstantiation:c,shouldExcludeBlocksFromLimit:g,appendContentOnly:v,useCrdt:_});if(c){var b;if(o.table===u().yB&&o.parent_id===l.id)return;if(o.table===f().SC&&o.isType("create_page")&&(null===(b=o.getConfig())||void 0===b?void 0:b.template_page_id)===l.id)return}const y=(0,Te().Oo)(a,o.pointer),I=o.__IM_SORRY__getValue();Ce().KY({store:y,value:I,transaction:t})}},262986:(e,t,o)=>{o.d(t,{jK:()=>v,Nh:()=>g});o(898992),o(737550);var i=()=>o(638681),a=()=>o(861017);const r={type:"calendar",config:{},triggers:{},effects:{"calendar.getEvents":{versionAvailability:"1.0.0"}},authentication:{type:"oauth2"},latestVersion:"1.0.0",stateDuplicator:e=>{let{original:t}=e},getModuleConfigurationStatus:e=>{var t;return null!==(t=e.state)&&void 0!==t&&t.connectionPointer?"ready":"invalid"},getDescription:e=>e.formatMessage({id:"workflows.modules.calendar.description",defaultMessage:"Integration with Calendar"}),getName:(e,t)=>e.formatMessage({id:"workflows.modules.calendar.name",defaultMessage:"Calendar"}),getMessageIfNotValid:(e,t)=>e.formatMessage({id:"workflows.modules.calendar.notConnected",defaultMessage:"Calendar is not connected to {workflowName}"},{workflowName:t}),getModuleConfigSection:()=>"connections",getIcon:()=>o(16789).notionCalendarIcon};o(296540);var n=o(474848);const l=(0,o(340498).wt)("codegen",{viewBox:"0 0 400 401",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M283.622 136.052C279.717 139.957 279.717 146.288 283.622 150.194L326.358 192.93C330.263 196.835 330.263 203.167 326.358 207.072L283.622 249.809C279.717 253.714 279.717 260.046 283.622 263.951L304.835 285.164C308.74 289.07 315.072 289.07 318.977 285.164L397.068 207.072C400.973 203.167 400.973 196.835 397.068 192.93L318.977 114.838C315.072 110.933 308.74 110.933 304.835 114.838L283.622 136.052Z",fill:"white"}),(0,n.jsx)("path",{d:"M248.267 299.307C244.362 295.401 238.03 295.401 234.125 299.307L207.069 326.362C203.164 330.268 196.832 330.268 192.927 326.362L73.639 207.072C69.7338 203.167 69.7338 196.835 73.639 192.93L192.927 73.6402C196.832 69.7349 203.164 69.7349 207.069 73.6402L234.125 100.696C238.03 104.601 244.362 104.601 248.267 100.696L269.48 79.4824C273.385 75.5772 273.385 69.2456 269.48 65.3404L207.069 2.92899C203.164 -0.976329 196.832 -0.976329 192.927 2.92899L2.92888 192.93C-0.976293 196.835 -0.976292 203.167 2.92888 207.072L192.927 397.074C196.832 400.979 203.164 400.979 207.069 397.074L269.48 334.662C273.385 330.757 273.385 324.425 269.48 320.52L248.267 299.307Z",fill:"white"}),(0,n.jsx)("path",{d:"M250 200C250 227.614 227.614 250 200 250C172.386 250 150 227.614 150 200C150 172.386 172.386 150 200 150C227.614 150 250 172.386 250 200Z",fill:"white"})]})}),s={type:"codegen",config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"codegen.run":{versionAvailability:"*"},"codegen.runStatus":{versionAvailability:"*"}},stateDuplicator:()=>{},getModuleConfigurationStatus:e=>{var t;return null!==(t=e.state)&&void 0!==t&&t.connectionPointer?"ready":"invalid"},getDescription:e=>e.formatMessage({id:"workflows.modules.codegen.description",defaultMessage:"Integration with Codegen"}),getName:(e,t)=>e.formatMessage({id:"workflows.modules.codegen.name",defaultMessage:"Codegen"}),getMessageIfNotValid:(e,t)=>e.formatMessage({id:"workflows.modules.codegen.notConnected",defaultMessage:"Codegen is not configured for {workflowName}"},{workflowName:t}),getModuleConfigSection:()=>"connections",getIcon:()=>l};const d={type:"github",config:{scopes:[]},authentication:{type:"oauth2"},latestVersion:"1.0.0",triggers:{},effects:{"github.getPullRequest":{versionAvailability:"*"},"github.getUser":{versionAvailability:"*"},"github.listPullRequests":{versionAvailability:"*"},"github.listOrganizationRepositories":{versionAvailability:"*"},"github.parseGithubUrlToParts":{versionAvailability:"*"}},stateDuplicator:()=>{},getModuleConfigurationStatus:e=>{var t;return null!==(t=e.state)&&void 0!==t&&t.connectionPointer?"ready":"invalid"},getDescription:e=>e.formatMessage({id:"workflows.modules.github.description",defaultMessage:"Fetch information about pull requests, issues, repositories, and more."}),getName:(e,t)=>e.formatMessage({id:"workflows.modules.github.name",defaultMessage:"Github"}),getMessageIfNotValid:e=>e.formatMessage({id:"workflows.modules.github.notConnected",defaultMessage:"Please connect to Github"}),getModuleConfigSection:()=>"connections",getIcon:()=>o(564613).gitHubIcon};const c={type:"mcpServer",config:{},authentication:void 0,latestVersion:"1.0.0",stateDuplicator:()=>{},getModuleConfigurationStatus:e=>{var t;return null!==(t=e.state)&&void 0!==t&&t.serverUrl?"ready":"invalid"},triggers:{},effects:{"mcpServer.runTool":{versionAvailability:"*"}},getDescription:e=>e.formatMessage({id:"workflows.modules.mcpServer.description",defaultMessage:"Integration with MCP server for AI inference with tools"}),getName:(e,t)=>e.formatMessage({id:"workflows.modules.mcpServer.name",defaultMessage:"MCP Server"}),getMessageIfNotValid:(e,t)=>e.formatMessage({id:"workflows.modules.mcpServer.notConnected",defaultMessage:"MCP Server is not configured in {workflowName}"},{workflowName:t}),getModuleConfigSection:()=>"connections",getIcon:()=>o(818541).V};const p={type:"notionmail",config:{},latestVersion:"1.0.0",triggers:{"notionmail.email.received":{isTriggerConfigured:e=>{let{email:t}=e;return Boolean(t)},triggerDuplicator:e=>{let{original:t}=e;return t},versionAvailability:"*"}},effects:{},stateDuplicator:()=>{},getModuleConfigurationStatus:e=>{var t;return null!==(t=e.state)&&void 0!==t&&t.connectionPointer?"ready":"invalid"},getDescription:e=>e.formatMessage({defaultMessage:"Integration with Notion Mail",id:"workflow.module.notionmail.description"}),getName:e=>e.formatMessage({defaultMessage:"Notion Mail",id:"workflow.module.notionmail.title"}),getMessageIfNotValid:(e,t)=>e.formatMessage({defaultMessage:"Notion Mail is not connected to {workflowName}",id:"workflow.module.notionmail.notConnected"},{workflowName:t}),getModuleConfigSection:()=>"connections",getIcon:()=>o(733816).o};const u={type:"pipedream",config:{scopes:["read","write"]},authentication:{type:"pipedream"},latestVersion:"1.0.0",triggers:{"pipedream.trigger":{isTriggerConfigured:()=>!0,triggerDuplicator:e=>{let{original:t}=e;return t},versionAvailability:"0.0.0"}},effects:{"pipedream.action":{versionAvailability:"*"}},stateDuplicator:e=>{let{original:t}=e;return t},getModuleConfigurationStatus:e=>{var t;return null!==(t=e.state)&&void 0!==t&&t.connectionPointer?"ready":"invalid"},getDescription:e=>e.formatMessage({id:"workflows.modules.pipedream.description",defaultMessage:"Integration with external service"}),getName:(e,t)=>e.formatMessage({id:"workflows.modules.pipedream.name",defaultMessage:"integration"}),getMessageIfNotValid:(e,t)=>e.formatMessage({id:"workflows.modules.pipedream.notConnected",defaultMessage:"Integration is not connected to {workflowName}"},{workflowName:t}),getModuleConfigSection:()=>"connections",getIcon:()=>o(824375).sparklesIcon};function f(e){var t;return Boolean(null===(t=e.channelIds)||void 0===t?void 0:t.length)||Boolean(e.allChannels)}const m={type:"zendesk",config:{scopes:["read","write"]},authentication:{type:"oauth2"},latestVersion:"1.0.0",triggers:{"zendesk.ticket":{isTriggerConfigured:()=>!0,triggerDuplicator:e=>{let{original:t}=e;return{type:t.type,status:t.status,priority:t.priority,tags:t.tags}},versionAvailability:"*"}},effects:{"zendesk.getTicket":{versionAvailability:"*"},"zendesk.addTicket":{versionAvailability:"*"},"zendesk.addComment":{versionAvailability:"*"},"zendesk.getComments":{versionAvailability:"*"},"zendesk.updateTicket":{versionAvailability:"*"}},stateDuplicator:()=>{},getModuleConfigurationStatus:e=>{var t;return null!==(t=e.state)&&void 0!==t&&t.connectionPointer?"ready":"invalid"},getDescription:e=>e.formatMessage({id:"workflows.modules.zendesk.description",defaultMessage:"Integration with Zendesk Support"}),getName:(e,t)=>e.formatMessage({id:"workflows.modules.zendesk.name",defaultMessage:"Zendesk"}),getMessageIfNotValid:(e,t)=>e.formatMessage({id:"workflows.modules.zendesk.notConnected",defaultMessage:"Zendesk is not connected to {workflowName}"},{workflowName:t}),getModuleConfigSection:()=>"connections",getIcon:()=>o(295434).zendeskIcon},g={slack:{type:"slack",config:{scopes:["app_mentions:read","channels:history","channels:read","chat:write","chat:write.customize","files:read","files:write","groups:history","groups:read","im:history","im:read","im:write","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users:read.email","channels:join","chat:write.public","emoji:read"]},authentication:{type:"oauth2"},latestVersion:"1.0.0",triggers:{"slack.message":{isTriggerConfigured:f,triggerDuplicator:e=>{let{original:t}=e;return{type:t.type}},versionAvailability:"*"},"slack.thread.created":{isTriggerConfigured:f,triggerDuplicator:e=>{let{original:t}=e;return{type:t.type}},versionAvailability:"*"},"slack.reaction.added":{isTriggerConfigured:f,triggerDuplicator:e=>{let{original:t}=e;return{type:t.type,reactions:t.reactions}},versionAvailability:"*"}},effects:{"slack.createThreadInChannel":{versionAvailability:"*"},"slack.createThreadInDirectMessage":{versionAvailability:"0.0.0"},"slack.replyInThread":{versionAvailability:"*"},"slack.updateMessage":{versionAvailability:"*"},"slack.addReactionToMessage":{versionAvailability:"*"},"slack.removeReactionFromMessage":{versionAvailability:"*"},"slack.getThreadsInChannelSince":{versionAvailability:"*"},"slack.queryChannels":{versionAvailability:"*"},"slack.getUser":{versionAvailability:"*"},"slack.findUserByEmail":{versionAvailability:"*"},"slack.parseSlackMessageUrlToId":{versionAvailability:"*"},"slack.getSlackUrlFromMessageId":{versionAvailability:"*"}},stateDuplicator:()=>{},getModuleConfigurationStatus:e=>{var t;return null!==(t=e.state)&&void 0!==t&&t.connectionPointer?"ready":"invalid"},getDescription:e=>e.formatMessage({defaultMessage:"This connection allows sending messages and receiving triggers from a connected Slack workspace.",id:"workflow.module.slack.description"}),getName:e=>e.formatMessage({defaultMessage:"Slack",id:"workflow.module.slack.title"}),getMessageIfNotValid:(e,t)=>e.formatMessage({defaultMessage:"Slack is not connected to {workflowName}",id:"workflow.module.slack.notConnected"},{workflowName:t}),getModuleConfigSection:()=>"connections",getIcon:()=>o(485324).slackTintableIcon},files:{type:"files",config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"files.getFileContent":{versionAvailability:"*"},"files.getFileUrl":{versionAvailability:"*"},"files.getFileName":{versionAvailability:"*"}},stateDuplicator:e=>{let{original:t}=e;return t},getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({defaultMessage:"This connection allows working with files in your Workflow.",id:"workflow.module.files.description"}),getName:e=>e.formatMessage({defaultMessage:"Files",id:"workflow.module.files.title"}),getModuleConfigSection:()=>"system",getIcon:()=>o(767499).B},notion:o(286885).I,notionmail:p,zendesk:m,config:o(788060).$,github:d,mcpServer:c,calendar:r,pipedream:u,codegen:s};function v(e){return g[e]}i().union([i().object({optional:{callbackType:i().literals(...a().Bi),moduleSpecific:i().string(),redirectToAuth:i().literal("true"),transcriptId:i().string(),workflowId:i().string()},required:{moduleId:i().string(),spaceId:i().string(),type:i().literal("workflow"),userId:i().string()}}),i().object({optional:{callbackType:i().literals(...a().Bi),moduleSpecific:i().string(),redirectToAuth:i().literal("true")},required:{integrationId:i().string(),spaceId:i().string(),transcriptId:i().string(),type:i().literal("agent"),userId:i().string()}})])},286885:(e,t,o)=>{o.d(t,{I:()=>r});o(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"4.64 2.4 10.71 15.2",svg:(0,o(474848).jsx)("path",{d:"M6.175 2.4c-.842 0-1.525.683-1.525 1.525v.4c0 1.283.481 2.52 1.349 3.465L8.027 10l-2.028 2.21a5.13 5.13 0 0 0-1.35 3.465v.4c0 .842.684 1.525 1.526 1.525h7.65c.842 0 1.525-.683 1.525-1.525v-.4c0-1.283-.481-2.52-1.349-3.465L11.973 10l2.028-2.21a5.13 5.13 0 0 0 1.349-3.465v-.4c0-.842-.683-1.525-1.525-1.525zM5.9 3.925c0-.152.123-.275.275-.275h7.65c.152 0 .275.123.275.275v.4c0 .97-.364 1.905-1.02 2.62l-2.416 2.632a.625.625 0 0 0 0 .845l2.416 2.633c.62.676.98 1.548 1.017 2.46l-2.907-2.463a1.84 1.84 0 0 0-2.38 0l-2.907 2.464a3.88 3.88 0 0 1 1.017-2.46l2.415-2.633a.625.625 0 0 0 0-.846L6.92 6.945a3.88 3.88 0 0 1-1.02-2.62z"})},a=(0,o(340498).wt)("hourglass",i),r={type:"notion",config:{},latestVersion:"1.0.0",effects:{"notion.sendNotification":{versionAvailability:"*"},"notion.getPageDiscussions":{versionAvailability:"*"},"notion.addCommentToPage":{versionAvailability:"*"},"notion.addCommentToDiscussion":{versionAvailability:"*"}},triggers:{recurrence:{isTriggerConfigured:()=>!0,triggerDuplicator:e=>{let{original:t}=e;return{...t,scheduleId:void 0}},versionAvailability:"*"},"notion.page.discussion.comment.added":{isTriggerConfigured:e=>{let{collectionId:t}=e;return Boolean(t)},triggerDuplicator:e=>{let{original:t}=e;return t},versionAvailability:"*"},"notion.page.created":{isTriggerConfigured:e=>{let{collectionId:t}=e;return Boolean(t)},triggerDuplicator:e=>{let{original:t}=e;return t},versionAvailability:"*"},"notion.page.updated":{isTriggerConfigured:e=>{let{collectionId:t}=e;return Boolean(t)},triggerDuplicator:e=>{let{original:t}=e;return t},versionAvailability:"*"},"notion.page.deleted":{isTriggerConfigured:e=>{let{collectionId:t}=e;return Boolean(t)},triggerDuplicator:e=>{let{original:t}=e;return t},versionAvailability:"*"}},stateDuplicator:e=>{let{original:t}=e;return t},getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({defaultMessage:"This connection provides internal Notion functionality for workflows.",id:"workflow.module.notion.description"}),getName:e=>e.formatMessage({defaultMessage:"Notion",id:"workflow.module.notion.title"}),getModuleConfigSection:()=>"system",getIcon:()=>a}},295434:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>i,zendeskIcon:()=>a});o(296540);const i={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{fill:"#000",d:"M9.298 6.778v10.073H1zm0-3.633a4.16 4.16 0 0 1-4.17 4.17C2.817 7.315 1 5.457 1 3.145zm1.363 13.665a4.16 4.16 0 0 1 4.17-4.17A4.16 4.16 0 0 1 19 16.81zm0-3.592V3.145H19z"})},a=(0,o(340498).wt)("zendesk",i)},342967:(e,t,o)=>{o.d(t,{v:()=>a});o(898992),o(354520);var i=()=>o(534177);function a(e,t){return Object.fromEntries((0,i().WP)({}).filter((e=>{let[o,i]=e;return i.moduleId===t})))}},433519:(e,t,o)=>{o.d(t,{i:()=>p});o(581454);var i=o.n(o(794148)),a=()=>o(534177);var r=()=>o(192845),n=()=>o(857639),l=()=>o(792071),s=()=>o(696706),d=()=>o(912720),c=()=>o(199378);function p(e){var t,o;const{originalRecord:p,duplicateRecord:u,mapper:f,options:m,actor:g}=e,v=s().L3.fromSpaceShardRecordId({id:p.id,spaceId:p.space_id},d().yB);u.copied_from_pointer=v;const _=(null===(t=f({requested:s().L3.fromPointerLike({table:u.parent_table,id:u.parent_id,spaceId:u.space_id}),requester:v}))||void 0===t?void 0:t.id)??u.parent_id;u.parent_id=_;const b=(u.action_ids??[]).map((e=>{var t;return(null===(t=f({requested:s().L3.fromPointerLike({table:c().SC,id:e,spaceId:u.space_id}),requester:v}))||void 0===t?void 0:t.id)??e}));u.action_ids=b;const y=Date.now();u.created_time=y,u.last_edited_time=y,u.last_executed_time=void 0,u.last_failed_time=void 0,(0,a().O9)(null===(o=u.properties)||void 0===o?void 0:o.schedule_id)&&(u.properties.schedule_id=void 0),(0,a().O9)(g)&&(u.created_by_id=g.id,u.created_by_table=g.table,u.last_edited_by_id=g.id,u.last_edited_by_table=g.table),"recurrence"===u.trigger.type&&m.shouldDisableRecurrenceAutomation&&(u.status="disabled_duplication"),function(e){return"event"===e.trigger.type}(u)&&function(e){var t;const{duplicateRecord:o,mapper:a,originalRecord:s}=e,c=l().Bj6.fromAutomation(o);i()(c.isEventType());const p={id:s.id,spaceId:s.space_id,table:d().yB},{value:u}=(0,r().n)({automationModel:c,visitors:{visitCollectionProperty:void 0,visitRecordPointer:e=>{const t=a({requested:e,requester:p});if(t){const e=t.spaceId??o.space_id;return e!==o.space_id?{type:"replace",value:void 0}:{type:"replace",value:{...t,spaceId:e}}}return{type:"replace",value:void 0}}}});i()(u.isEventType());const f=u.getTrigger();o.trigger=f;const m={sourceAutomationParentId:s.parent_id,sourceAutomationId:s.id,sourceAutomationName:(null===(t=s.properties)||void 0===t?void 0:t.name)??""};o.trigger.event.source||(n().log({data:{miscDataToConvertToString:m},from:"duplicateHelpers.duplicateAutomationEventValueHelper",level:"info",type:"duplicateAutomationMissingTriggerSource"}),o.status="disabled")}({duplicateRecord:u,mapper:f,originalRecord:p})}},485324:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>a,slackTintableIcon:()=>r});o(296540);var i=o(474848);const a={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("g",{clipPath:"url(#clip0_11939_10342)",children:(0,i.jsx)("path",{d:"M4.782 12.375c0 1.04-.85 1.89-1.891 1.89S1 13.416 1 12.375s.85-1.891 1.89-1.891h1.892zm.953 0c0-1.041.85-1.891 1.89-1.891s1.891.85 1.891 1.89v4.735c0 1.04-.85 1.891-1.89 1.891s-1.891-.85-1.891-1.89zm1.891-7.593c-1.041 0-1.891-.85-1.891-1.891S6.585 1 7.625 1s1.891.85 1.891 1.89v1.892zm-.001.953c1.041 0 1.891.85 1.891 1.89s-.85 1.891-1.89 1.891H2.89c-1.04 0-1.89-.85-1.89-1.89s.85-1.892 1.89-1.892zm7.593 1.89c0-1.04.85-1.89 1.891-1.89S19 6.584 19 7.624s-.85 1.891-1.89 1.891h-1.892zm-.953 0c0 1.041-.85 1.891-1.89 1.891s-1.891-.85-1.891-1.89V2.89c0-1.04.85-1.891 1.89-1.891s1.891.85 1.891 1.89zm-1.89 7.593c1.04 0 1.89.85 1.89 1.891S13.415 19 12.375 19s-1.891-.85-1.891-1.89v-1.892zm0-.952c-1.041 0-1.891-.85-1.891-1.891s.85-1.891 1.89-1.891h4.735c1.04 0 1.89.85 1.89 1.89s-.85 1.891-1.89 1.891z"})}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_11939_10342",children:(0,i.jsx)("path",{d:"M1 1h18v18H1z"})})})]})},r=(0,o(340498).wt)("slackTintable",a)},522328:(e,t,o)=>{o.d(t,{I:()=>v});o(898992),o(354520),o(581454),o(737550);var i=()=>o(534177),a=()=>o(496603),r=()=>o(977345),n=()=>o(792071),l=()=>o(696706),s=()=>o(199378),d=()=>o(519831),c=()=>o(192845);function p(e){const{duplicatedAction:t,mapper:o,options:p,originOptions:u,sourceSpaceId:f}=e,m=n().Bj6.fromAutomationAction(t),g=m.pointer;const v=e=>{let{requested:t,requester:i}=e;return a=t.id,Boolean((null==p?void 0:p.isTemplateInstantiation)&&p.sourceBlockIds.has(a))?t:o({requested:t,requester:i});var a};function _(e){const t=(0,r().y5)(e);if("action"===t.source){var o;const e=l().L3.fromSpaceShardRecordId({id:t.action_id,spaceId:m.space_id},s().SC),i=(null===(o=v({requested:e,requester:g}))||void 0===o?void 0:o.id)??t.action_id;return(0,r().$y)({...t,action_id:i})}if("global"===t.source)return e;(0,i().HB)(t)}const b=m.pointer,{remappedRecordPointers:y,value:I}=(0,c().G)({automationActionModel:m,baseUrl:u.baseUrl,preventClearingConfig:!1,publicDomainName:u.publicDomainName,sourceSpaceId:f,visitors:{visitCollectionProperty:void 0,visitCollectionPropertyPointer:e=>{const o=v({requested:e,requester:b});if(o){const i=o.spaceId??t.space_id;return i!==t.space_id||o.table!==d().Vl?{type:"replace",value:void 0}:{type:"replace",value:{...o,propertyId:e.propertyId,spaceId:i}}}return(e.spaceId??t.space_id)!==t.space_id?{type:"replace",value:void 0}:{type:"keep"}},visitFormulaContextValue:e=>({type:"replace",value:_(e)}),visitFormulaPageProperty:e=>{if("collection"in e&&e.collection){const o=v({requested:e.collection,requester:g});if(o&&o.table===d().Vl){const i=o.spaceId??t.space_id;return i!==t.space_id?{type:"replace",value:void 0}:{type:"replace",value:{...e,collection:{...o,spaceId:i}}}}}else if("contextValueId"in e&&e.contextValueId)return{type:"replace",value:{...e,contextValueId:_(e.contextValueId)}};return{type:"keep"}},visitRecordPointer:e=>{const o=v({requested:e,requester:b});if(o){const e=o.spaceId??t.space_id;return e!==t.space_id?{type:"replace",value:void 0}:{type:"replace",value:{...o,spaceId:e}}}return(e.spaceId??t.space_id)!==t.space_id?{type:"replace",value:void 0}:{type:"keep"}}}}),k=I.getConfig();if(t.config=k,!(0,a().Im)(k))return y}var u=()=>o(537012),f=()=>o(273900),m=()=>o(813690),g=()=>o(179034);function v(e){const{originalRecord:t,duplicateRecord:o,mapper:a,getRecordRole:r,options:n,originOptions:d,duplicateBlocks:c=!0}=e,v=t.space_id!==o.space_id,_={table:s().SC,id:t.id,spaceId:t.space_id},b=a({requested:l().L3.fromPointerLike({table:o.parent_table,id:o.parent_id,spaceId:o.space_id}),requester:_}),y=p({duplicatedAction:o,mapper:a,options:n.resolveAutomationConfig,originOptions:d,sourceSpaceId:t.space_id});let I=r;y&&(I=m().Oj.tryUntilFound(...Array.from(y).map((e=>m().Oj.constantForPointer(e,"editor"))),I));const k=(null==b?void 0:b.id)??o.parent_id;if(o.parent_id=k,v&&"http_request"===o.type&&o.config){o.config.url=void 0;for(const e of o.config.customHeaders??[])e.value=""}const h=(0,u().Mn)(o);if(h){h.some((e=>{const t=I(e.pointer);return!t||!(0,f().q_)(t,e.minimumRequiredRole)}))&&(o.config={})}const w=(o.blocks??[]).map((e=>{var t;return null===(t=a({requested:l().L3.fromPointerLike({table:g().ev,id:e,spaceId:o.space_id}),requester:_}))||void 0===t?void 0:t.id})).filter(i().O9);o.blocks=w.length>0?w:void 0,c||(o.blocks=void 0)}},733816:(e,t,o)=>{o.d(t,{o:()=>a});o(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.12 15.25 11.75",svg:(0,o(474848).jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zm1.25 7.49L7.366 10 3.625 6.259zm.884.885H15.49l-3.74-3.741-1.309 1.308a.625.625 0 0 1-.884 0L8.25 10.884zM12.634 10l3.741 3.741V6.26zM4.509 5.375 10 10.866l5.491-5.491z"})},a=(0,o(340498).wt)("envelope",i)},767499:(e,t,o)=>{o.d(t,{B:()=>r});o(296540);var i=o(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"4.12 2.37 11.75 15.25",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M12.93 12.442a.625.625 0 0 1-.884 0l-1.421-1.42v3.465a.625.625 0 1 1-1.25 0v-3.466l-1.42 1.42a.625.625 0 1 1-.884-.883L9.558 9.07a.625.625 0 0 1 .884 0l2.487 2.487a.625.625 0 0 1 0 .884"}),(0,i.jsx)("path",{d:"M6.25 2.375A2.125 2.125 0 0 0 4.125 4.5v11c0 1.174.951 2.125 2.125 2.125h7.5a2.125 2.125 0 0 0 2.125-2.125V8.121c0-.563-.224-1.104-.622-1.502L11.63 2.997a2.13 2.13 0 0 0-1.502-.622zM5.375 4.5c0-.483.392-.875.875-.875H10V6.25a2 2 0 0 0 2 2h2.625v7.25a.875.875 0 0 1-.875.875h-7.5a.875.875 0 0 1-.875-.875zm8.741 2.75H12a1 1 0 0 1-1-1V4.134z"})]})},r=(0,o(340498).wt)("arrowPageUp",a)},788060:(e,t,o)=>{o.d(t,{$:()=>a,J:()=>i});function i(e){return void 0===e.value&&"string"!==e.rootType}const a={type:"config",config:{},latestVersion:"1.0.0",triggers:{},effects:{},stateDuplicator:e=>{let{original:t}=e;return t},getModuleConfigurationStatus:(e,t)=>{if(!t)return"invalid";const{modules:a}=t;if(!a)return"ready";for(const r of a){const e=(0,o(342967).v)(t,r.id);for(const t of Object.values(e))if(i(t))return"invalid"}return"ready"},getDescription:e=>e.formatMessage({id:"workflows.modules.config.description",defaultMessage:"Access configuration values"}),getName:e=>e.formatMessage({id:"workflows.modules.config.name",defaultMessage:"Configuration variables"}),getMessageIfNotValid:void 0,getModuleConfigSection:()=>"connections",getIcon:()=>o(735790).M}},818541:(e,t,o)=>{o.d(t,{V:()=>a});o(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"3.87 2.62 12.26 14.76",svg:(0,o(474848).jsx)("path",{d:"M3.875 3.25c0-.345.28-.625.625-.625h4c.345 0 .625.28.625.625v4c0 .345-.28.625-.625.625H7.125v.596c0 .179.126.333.302.368l5.39 1.075c.76.152 1.308.819 1.308 1.594v.617H15.5c.345 0 .625.28.625.625v4c0 .345-.28.625-.625.625h-4a.625.625 0 0 1-.625-.625v-4c0-.345.28-.625.625-.625h1.375v-.617a.375.375 0 0 0-.302-.368l-5.39-1.076a1.625 1.625 0 0 1-1.308-1.593v-.596H4.5a.625.625 0 0 1-.625-.625zm4 3.375v-2.75h-2.75v2.75zm4.25 6.75v2.75h2.75v-2.75z"})},a=(0,o(340498).wt)("connections",i)}}]);