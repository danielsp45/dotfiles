"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[21367,67608],{18953:(e,t,o)=>{o.d(t,{H:()=>i});o(296540);var n=o(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"4.53 2.55 11.03 14.94",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M13.105 4.184a1.475 1.475 0 1 1-2.934-.309 1.475 1.475 0 0 1 2.934.309m-5.297 7.25-.753 2.994-2.334 2.101a.55.55 0 0 0 .737.817l2.582-2.325.72-2.864-.662-.476a2.3 2.3 0 0 1-.29-.247"}),(0,n.jsx)("path",{d:"M11.681 8.169q.127.206.208.442l.567 1.67a.55.55 0 0 0 .66.354l2.032-.527a.55.55 0 1 0-.276-1.065l-1.539.4-.403-1.186a3.296 3.296 0 0 0-3.278-2.232l-3.02.145a.55.55 0 0 0-.513.438l-.501 2.42a.55.55 0 0 0 1.077.223l.415-2.002 1.654-.08-.03.294-.603 2.18a1.45 1.45 0 0 0 .516 1.537l3.05 2.335-2.08 1.51a.55.55 0 1 0 .647.89l2.579-1.873a.64.64 0 0 0 .013-1.026l-2.168-1.659z"})]})},i=(0,o(340498).wt)("figureRun",a)},413267:(e,t,o)=>{o.d(t,{b:()=>a});o(296540);var n=o(474848);const a=(0,o(340498).wt)("thinCheck",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M6.385 14.162c.362 0 .642-.15.84-.444L13.652 3.71c.144-.226.205-.417.205-.602 0-.485-.341-.82-.833-.82-.335 0-.54.123-.746.444l-5.926 9.4-3.042-3.903c-.205-.267-.417-.376-.718-.376-.492 0-.848.348-.848.827 0 .212.075.417.253.629l3.541 4.416c.24.3.492.437.848.437z"})})},454531:(e,t,o)=>{o.d(t,{W:()=>h});var n=()=>o(780054),a=()=>o(972435),i=()=>o(867772),r=()=>o(681810),s=()=>o(901389),l=()=>o(896628),d=()=>o(383594),c=()=>o(675925),p=()=>o(751156),u=()=>o(892632);const g=1500,m=(0,o(959013).YK)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},preparing:{defaultMessage:"Preparing...",id:"pageCover.status.preparing"},downloading:{defaultMessage:"Downloading...",id:"pageCover.status.downloading"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image link…",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function h(e){let{environment:t,intl:o,store:n,rect:a,from:i}=e;d().W(t,{originGap:3,originRect:a,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:o.formatMessage(m.pageCover),onDelete:()=>{!function(e){let{environment:t,store:o}=e;d().I(),p().createAndCommit({userAction:"PageCover.handleDelete",environment:t,canUndo:!0,perform:e=>{l().PT({store:o,transaction:e})}})}({environment:t,store:n})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:o,position:a}=e;(0,c().o)(t,{action:"edit_cover",block_type:"page",from:i},(e=>{b({environment:t,store:n,url:{originUrl:o},position:a}),e()}))}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:o.formatMessage(m.fileTypeCaption,{idealImageWidth:g}),onUpload:e=>{(0,c().o)(t,{action:"edit_cover",block_type:"page",from:i},(a=>{var i;d().I(),u().QM({environment:t,file:e[0],bucket:"secure",record:(null===(i=n.getCoverStore())||void 0===i?void 0:i.pointer)??n.pointer,isFileBlock:!1,reportRichUploadMetrics:!0,onStart:f,onProgress:v,onComplete:e=>{var o;o={environment:t,store:n,url:{originUrl:e}},y({...o,position:.5})},onError:()=>{s().f1(o.formatMessage(m.uploadFailed))}}),a()}))}},{type:"embed",title:o.formatMessage(m.embedTitle),inputPlaceholder:o.formatMessage(m.embedPlaceholder),caption:o.formatMessage(m.embedCaption),buttonText:o.formatMessage(m.embedSubmit),onChange:e=>{(0,c().o)(t,{action:"edit_cover",block_type:"page",from:i},(o=>{var a;a={environment:t,store:n,url:e},y({...a,position:.5}),d().I(),o()}))}},{type:"unsplash",onChange:e=>{let{url:o,position:a}=e;(0,c().o)(t,{action:"edit_cover",block_type:"page",from:i},(e=>{b({environment:t,store:n,url:{originUrl:o},position:a}),e()}))}}]})}async function y(e){const{environment:t,store:o,url:n,position:s}=e,{serverCommitResult:d}=p().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{l().fg({store:o,url:n,position:s||.5,transaction:e})}});await d,r().A.state.loadingMode===i().vS&&r().A.setState({loadingMode:i().Gi,dataURL:r().A.state.dataURL,uploadProgress:t.device.isMobileNative?void 0:100,progressText:a().A.formatMessage(m.downloading)})}function b(e){y(e),n().A.isMobile&&d().I()}function f(e){const{file:t,name:o,size:n}=e;if(d().I(),r().A.setState({loadingMode:i().Wc,file:t,name:o,size:n}),t.type.indexOf("image")>=0)if(t instanceof File){const e=new FileReader;e.onload=e=>{r().A.state.loadingMode===i().Wc&&r().A.setState({...r().A.state,loadingMode:i().vS,uploadProgress:0,dataURL:e.target.result})},e.readAsDataURL(t)}else r().A.state.loadingMode===i().Wc&&r().A.setState({...r().A.state,loadingMode:i().vS,dataURL:t.dataURL,progressText:a().A.formatMessage(m.preparing)});else r().A.state.loadingMode===i().Wc&&r().A.setState({...r().A.state,loadingMode:i().vS,progressText:a().A.formatMessage(m.preparing)})}function v(e){const{progressPercent:t,progressText:o}=e;r().A.state.loadingMode===i().vS&&r().A.setState({...r().A.state,uploadProgress:t,progressText:o})}},544862:(e,t,o)=>{o.d(t,{A:()=>A});var n=o(296540),a=()=>o(484714),i=()=>o(56366),r=()=>o(959013),s=()=>o(896628),l=()=>o(454531),d=()=>o(751156),c=()=>o(478726),p=()=>o(227440),u=()=>o(867772),g=()=>o(681810),m=()=>o(608581),h=()=>o(145214),y=()=>o(704152),b=()=>o(807683),f=()=>o(401497),v=()=>o(534177),x=o(474848);function k(e){let{src:t,placeholderSrc:o,placeholderBehavior:a,imageStyle:i,containerStyle:r,onLoadComplete:s,testId:l}=e;const[d,c]=(0,n.useState)(!0);let p;switch(a){case"force-show-placeholder":p=!0;break;case"force-show-src":p=!1;break;case"show-placeholder-if-loading-src":p=!!o&&(d||void 0===t);break;default:(0,v().HB)(a)}const u=(0,f().IS)((()=>{const e={gridColumn:1,gridRow:1};return{container:{display:"grid",...r},srcWrapper:{...p&&{display:"none"},...e},placeholderWrapper:{pointerEvents:"none",...e}}}),[r,p]);(0,n.useEffect)((()=>{void 0!==t&&c(!0)}),[t]);const g=(0,n.useCallback)((e=>{c(!1),null==s||s()}),[s]);return(0,x.jsxs)("div",{style:u.container,children:[(0,x.jsx)(b().Ay,{src:t,onLoad:g,style:i,placeholderStyle:u.srcWrapper,placeholderLoadedStyle:u.srcWrapper,testId:l}),o&&(0,x.jsx)(b().Ay,{src:o,style:i,placeholderStyle:u.placeholderWrapper,placeholderLoadedStyle:u.placeholderWrapper})]})}var w=()=>o(453101);const A=function(e){let{store:t,disabled:r,paddingRight:l,paddingLeft:c,height:p,proxyWidth:m}=e;const h=(0,a().v3)(),y=(0,a().Y0)(),f=(0,i().uB)(void 0,o(454305).A),v=(0,i().K8)((()=>r||"suggest"===o(77246).Uv.getMode(t)||(0,o(600871).aD)(y)),[r,t,y]),w=(0,i().K8)((()=>t.getCover()),[t]),A=(0,i().O$)(g().A),[S,j]=(0,n.useState)(void 0);if(!w)return null;const I=A.loadingMode!==u().pF&&A.loadingMode!==u().Wc;return(0,x.jsx)(o(801678).A,{mouseStore:f,onFlushTemporaryPosition:e=>function(e,t,o){const{imagePosition:n,reset:a}=e;d().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:o,canUndo:!0,perform:e=>{s().yY({store:t,coverPosition:n,transaction:e}),a()}})}(e,t,h),renderControl:e=>{let{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:a,isVisible:i,isRepositioning:r}=e;return(0,x.jsx)(M,{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:a,isVisible:i,isRepositioning:r,lastProxiedUrl:S,store:t,disabled:v,paddingRight:l,paddingLeft:c,mouseStore:f})},source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:p,maxHeight:280,cursor:"default"},preventClickPropagation:!0,render:e=>(0,x.jsxs)(n.Fragment,{children:[(0,x.jsx)(o(360083).A,{url:w.cover,isAuthenticated:!0,permissionRecord:w.pointer,width:m,onFinishedLoadingProxyUrl:j,render:(t,o)=>{const n={width:"100%",height:p,maxHeight:280,objectFit:"cover",opacity:I?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},a={width:"100%",height:p,maxHeight:280};return(0,x.jsx)(k,{src:o,placeholderSrc:I?A.dataURL:void 0,placeholderBehavior:I?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:a,imageStyle:n,onLoadComplete:C,testId:"pageCover"})}}),I&&(0,x.jsxs)("div",{style:b().fd,children:[(0,x.jsx)(o(331542).A,{size:"md",style:{marginRight:4}}),(0,x.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:void 0!==A.uploadProgress?(0,x.jsx)(o(773382).A,{percentage:A.uploadProgress}):A.progressText?(0,x.jsx)("span",{children:A.progressText}):null})]})]})})};function C(){g().A.reset()}function M(e){let{isVisible:t,isRepositioning:o,handleCancelClick:s,handleRepositionClick:d,handleSavePositionClick:b,lastProxiedUrl:f,store:v,disabled:k,paddingRight:A,paddingLeft:C,mouseStore:M}=e;const S=(0,a().v3)(),j=(0,r().tz)(),I=(0,n.useCallback)((e=>function(e,t,o,n,a){a.reset();const i=e.target.getBoundingClientRect();l().W({environment:t,intl:o,store:n,rect:i,from:"page_header"})}(e,S,j,v,M)),[S,j,v,M]),T=(0,i().K8)((()=>g().A.state.loadingMode),[]),R=(0,i().K8)((()=>function(e){let t;return t=Boolean(e.isFullWidth())?"100%":c().x6,t}(v)),[v]),{device:P}=S,B=(0,i().O$)(p().e);if(k||T!==u().pF||!B)return null;const{isMobile:_}=P;return(0,x.jsx)(h().A,{animate:{width:R,opacity:t?1:0},style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,x.jsxs)(m().A,{isVisible:t,position:"bottom",style:{marginRight:A,marginLeft:C},children:[!o&&(0,x.jsx)(y().A,{style:{borderRight:_?"none":void 0,...w().k},onClick:I,children:(0,x.jsx)(r().sA,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!o&&!_&&(0,x.jsx)(y().A,{style:{...w().k,borderRight:"none"},onClick:e=>d(e,f),children:(0,x.jsx)(r().sA,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),o&&!_&&(0,x.jsx)(y().A,{style:w().k,onClick:b,children:(0,x.jsx)(r().sA,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),o&&!_&&(0,x.jsx)(y().A,{style:{...w().k,borderRight:"none"},onClick:s,children:(0,x.jsx)(r().sA,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})}},575154:(e,t,o)=>{o.d(t,{q:()=>u});o(898992),o(354520),o(581454);var n=()=>o(56366),a=()=>o(663077),i=()=>o(496603),r=()=>o(227440),s=()=>o(863987),l=()=>o(793863),d=()=>o(200277),c=()=>o(640653),p=()=>o(580101);function u(e){let{parentStore:t,returnAllTemplates:o}=e;const u=(0,n().K8)((()=>{const e=s().A.getState();return((null==e?void 0:e.templatesWithRowIds)??[]).map((e=>e.template)).filter((e=>(0,a().Xq)(e,"collection")))}),[],{useDeepEqual:!0}),g=(0,n().K8)((()=>{p().A.getState();const e=(0,c().p3)().function;return e&&(0,a().AU)(e)?e:void 0}),[]),m=(0,n().K8)((()=>(0,d().$)({persona:g,parentStore:t})),[g,t],{useDeepEqual:!0}),h=!(0,n().O$)(r().e);return(0,n().K8)((()=>h?[]:(0,i().hS)([...u,...m,...o?(0,l().oA)():[]],(e=>e.templateId))),[u,m,o,h])}},580101:(e,t,o)=>{o.d(t,{A:()=>a});class n extends(()=>o(757695))().Store{getInitialState(){}}const a=new n},608581:(e,t,o)=>{o.d(t,{A:()=>p});o(898992),o(354520),o(581454),o(941795);var n=o(296540),a=()=>o(401497),i=()=>o(955825),r=()=>o(284371),s=()=>o(780054),l=()=>o(963575),d=o(474848);function c(e){const{button:t,isLast:o}=e,s=(0,a().IS)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:r().Wy.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return n.cloneElement(t,{...(0,i().AH)(t.props.style,s.button,o&&s.buttonLast),hoveredStyle:(0,i().AH)(s.buttonHovered,o&&s.buttonLast).style,pressedStyle:s.buttonPressed})}const p=function(e){let{children:t,isVisible:p,position:u,style:g}=e;const m=(0,a().IS)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.shadowSM,display:"flex",whiteSpace:"nowrap",borderRadius:l().A.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:s().A.isMobile?"auto":"none",opacity:s().A.isMobile?1:0,fontFamily:r().vc(o(662303).locale).sans,position:"absolute",right:l().A.horizontal.small,bottom:l().A.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:l().A.vertical.small,bottom:void 0}})),[]),h=n.Children.toArray(t).filter(o(534177).O9),y=h.length;return(0,d.jsx)(o(145214).A,{animate:{opacity:p?1:0},...(0,i().AH)(m.container,g,p&&m.containerHover,"top"===u&&m.containerTop),children:h.map(((e,t)=>{const a=t===y-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===o(859428).A&&n.isValidElement(e))return n.cloneElement(e,{render:(t,o)=>{const n=e.props.render(t,o);return(0,d.jsx)(c,{isLast:a,button:n},e.key)}});if(e.type===o(704152).A&&n.isValidElement(e))return(0,d.jsx)(c,{isLast:a,button:e},e.key)}}))})}},681810:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(867772).Ay)},793863:(e,t,o)=>{o.d(t,{H:()=>T,Mq:()=>P,oA:()=>R});o(581454);var n=o(296540),a=()=>o(484714),i=()=>o(56366),r=()=>o(401497),s=()=>o(536095),l=()=>o(177148),d=()=>o(598985),c=()=>o(421559),p=()=>o(340498),u=()=>o(919709),g=()=>o(959013),m=()=>o(778078),h=()=>o(496603),y=()=>o(939740),b=()=>o(554509),f=()=>o(89924),v=()=>o(621767),x=()=>o(913454),k=()=>o(317053),w=()=>o(458097),A=()=>o(84817),C=()=>o(115512),M=o(474848);const S=n.forwardRef(((e,t)=>{const{icon:n,label:i,description:s,...l}=e,{isPhone:d}=(0,a().Y0)(),c=(0,r().IS)((e=>({button:{width:"100%",borderRadius:12,margin:0,...(0,C().nl)({width:1,color:e.stroke.input})},hovered:d?{}:{background:e.modalBackground,...(0,C().nl)({width:2,color:e.stroke.uiBlueSecondary})},pressed:{background:e.modalBackground,...(0,C().nl)({width:2,color:e.stroke.uiBluePrimary})},templateIcon:{marginTop:s?2:0},enterIcon:{width:16,justifySelf:"end",color:e.icon.tertiary}})),[s,d]);return(0,M.jsx)(o(760217).A,{...l,buttonStyle:c.button,hoveredStyle:c.hovered,pressedStyle:c.pressed,itemMarginLeft:0,itemMarginRight:8,ref:t,title:(0,M.jsxs)(A().Y1,{direction:"horizontal",align:s?"top-left":"center-left",gap:12,padding:"12px 14px",children:[(0,M.jsx)("div",{style:c.templateIcon,children:n}),(0,M.jsxs)(A().Y1,{gap:4,children:[(0,M.jsx)(b().D,{styleName:"UIRegular-14px/Medium",children:i}),s&&(0,M.jsx)(b().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:s})]}),l.focused&&(0,o(356596).K)(c.enterIcon)]})})}));S.displayName="SearchResultButton";var j=()=>o(813321);function I(e){const{template:t,label:o,description:n}=e;return(0,M.jsx)(S,{icon:(0,M.jsx)(v().z,{template:t,size:18}),label:o??t.value.targetCollection.name,description:n??t.description,...e})}function T(e){let{query:t,onSelectTemplate:o,onAddEmptyPage:m,onAddEmptyDatabase:v,onMarketplaceClick:A,showEmptyPageButton:C}=e;const T=(0,i().K8)((()=>(0,x().getIsSetupGeneratorEnabled)()),[]),{isPhone:B}=(0,a().Y0)(),_=(0,r().IS)((e=>({optionIcon:{height:p().Ev.default,width:"auto",color:e.icon.secondary},section:{gap:8,padding:"0 0 8px 0"},sectionTitle:{padding:"16px 0 0 0",marginTop:0,marginBottom:4}})),[]),D=function(e){const t=(0,i().K8)((()=>R()),[]);return(0,n.useMemo)((()=>P(e,t)),[e,t])}(t),E=(0,i().K8)((()=>x().globalWorkflowTemplates.fromIdOfType({templateId:s().MH,type:"collection"})),[]),F=D.map((e=>({key:e.templateId,render:t=>{let{ref:o,...n}=t;return(0,M.jsx)(I,{template:e,...n})},action:()=>o(e,{type:"suggested_template",allOrderedTemplateIds:D.map((e=>e.templateId))})}))),W=(0,n.useMemo)((()=>T?{key:s().MH,render:e=>{let{ref:o,...n}=e;return(0,M.jsx)(I,{template:E,label:(0,M.jsx)(g().sA,{id:"workflowTemplatesOnboardingModal.searchResults.buildWithAiLabel",defaultMessage:"Build “{searchQuery}” with AI",values:{searchQuery:t}}),description:(0,M.jsx)(g().sA,{id:"workflowTemplatesOnboardingModal.searchResults.buildWithAiDescription",defaultMessage:"Use AI to generate a tailored setup"}),...n})},action:async()=>{o(E,{type:"ai_generated_template"});const e=w().A.state;if(!e.open||!e.setupGenerator)return;e.setupGenerator.store.setState({...e.setupGenerator.store.state,prompt:(0,u().x9d)(t)}),(0,k().moveToNextOnboardingStep)(B);await e.setupGenerator.submitPrompt({from:"initial-input"})&&(0,k().moveToNextOnboardingStep)(B)}}:void 0),[T,E,t,o,B]),L=(0,n.useMemo)((()=>(0,h().oE)([C?{key:"new-page",render:e=>(0,M.jsx)(S,{icon:(0,l().Y)(_.optionIcon),label:(0,M.jsx)(g().sA,{id:"workflowTemplatesOnboardingModal.searchResults.newPage",defaultMessage:"New “{searchQuery}” page",values:{searchQuery:t}}),...e}),action:()=>m({title:t})}:void 0,{key:"new-database",render:e=>(0,M.jsx)(S,{icon:(0,c().T)(_.optionIcon),label:(0,M.jsx)(g().sA,{id:"workflowTemplatesOnboardingModal.searchResults.newDatabase",defaultMessage:"New “{searchQuery}” database",values:{searchQuery:t}}),...e}),action:()=>v({title:t})},{key:"marketplace",render:e=>(0,M.jsx)(S,{icon:(0,d().J)(_.optionIcon),label:j().Ac,...e}),action:e=>A(e.event)}])),[C,_.optionIcon,t,m,v,A]),N=(0,n.useMemo)((()=>[{key:"collection-templates",items:(0,h().oE)([...F,W]),render:e=>(0,M.jsx)(f().A,{title:(0,M.jsx)(b().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:(0,M.jsx)(g().sA,{id:"workflowTemplatesOnboardingModal.searchResults.topResults",defaultMessage:"Top results"})}),style:_.section,desktopTitleStyle:_.sectionTitle,mobileTitleStyle:_.sectionTitle,...e})},{key:"more-options",items:L,render:e=>(0,M.jsx)(f().A,{title:(0,M.jsx)(b().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:(0,M.jsx)(g().sA,{id:"workflowTemplatesOnboardingModal.searchResults.moreOptions",defaultMessage:"More options"})}),style:_.section,desktopTitleStyle:_.sectionTitle,mobileTitleStyle:_.sectionTitle,...e})}]),[F,W,L,_]);return(0,M.jsx)(y().Ay,{initialFocus:0,type:y().Oh.Vertical,sections:N})}function R(){const e=h().sb([...(0,s().dj)(),...(0,s().Lh)()]);return x().globalWorkflowTemplates.allOfType({templateIds:e,type:"collection"})}function P(e,t){return(0,m().Ay)(e,t,(e=>`${e.value.targetCollection.name} ${e.description}`),{minThreshold:m().qR,normalizeFuzzyScore:!0})}},801678:(e,t,o)=>{o.d(t,{A:()=>m});var n=o(296540),a=()=>o(662303),i=()=>o(56366),r=()=>o(959013),s=()=>o(381349),l=()=>o(496603),d=()=>o(284371),c=()=>o(720665),p=()=>o(145214),u=o(474848);const g={isRepositioning:!1};const m=function(e){const t=(0,n.useRef)(null),a=(0,o(484714).v3)(),[r,s]=(0,n.useState)(g),d=(0,n.useCallback)((()=>{s(g)}),[]),{renderControl:p,onFlushTemporaryPosition:m,style:y,source:b,store:f}=e,{isRepositioning:v,image:x,startDragRenderedPosition:k,startDragImageScreenHeight:w}=r,A=(0,i().K8)((()=>0===o(502438).default.state.stores.length),[]),[C,M]=(0,n.useState)(!1),S=(0,i().uB)(e.mouseStore,o(454305).A),j=(0,i().K8)((()=>S.state.mouseEntered),[S]),I=(0,o(401497).IS)((()=>({dragContainer:{width:"100%",cursor:v?"move":"inherit"},container:{position:"relative",width:"100%",zIndex:1}})),[v]),T=(0,i().K8)((()=>function(e,t,o){return(0,l().Et)(o)?o:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,l().Et)(e))return e}const o=.5;if(t.isCollectionView()){const e=t.getCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,c().pN)(t)?o:t}}const n=t.getFormat(),a=n.page_cover_position;if((0,l().Et)(a))return a;return o}(e,t)}(b,f,r.temporaryPosition)),[r.temporaryPosition,b,f]);(0,n.useEffect)((()=>{const e=e=>{const o=t.current;o&&!o.contains(e.target)&&v&&m({imagePosition:T,reset:()=>{S.reset(),d()}})};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)}),[T,v,S,m,d]),v&&!A&&d();const R=(0,n.useMemo)((()=>(0,l().nF)((e=>{S.setState({...S.state,mouseEntered:!0})}),100)),[S]),P=(0,n.useMemo)((()=>(0,l().sg)((e=>{S.setState({...S.state,mouseEntered:!1})}),100)),[S]),B=(0,n.useCallback)(((e,t)=>{o(778417).IU({environment:a});const n=new Image;n.onload=()=>{s((e=>({...e,isRepositioning:!0,image:n})))},t&&(n.src=t)}),[a]),_=(0,n.useCallback)((e=>{m({imagePosition:T,reset:()=>{d()}})}),[T,m,d]),D=(0,n.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,o(819121).p)(t)&&M(!0)}),[]),E=(0,n.useCallback)((()=>{M(!0)}),[]),F=(0,n.useCallback)((e=>{if(x&&v){const e=t.current;if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/x.width*x.height;s((e=>({...e,startDragImageScreenHeight:t,startDragRenderedPosition:T})))}}}),[x,T,v]),W=(0,n.useCallback)((e=>{if(v){const t=e.diffY/(w||0)+(k||0);s((e=>({...e,temporaryPosition:(0,l().LI)((0,o(40845).A)(t,0,1),4)})))}}),[v,w,k]),L=(0,n.useCallback)((()=>{s((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),N=(0,i().K8)((()=>p({handleRepositionClick:B,handleSavePositionClick:_,handleCancelClick:d,isVisible:j||C||v,isRepositioning:v})),[B,_,C,v,j,p,d]),U=(0,o(79043).A)(Boolean(e.preventClickPropagation));return(0,u.jsxs)("div",{ref:t,onFocus:D,onBlur:E,onMouseEnter:R,onMouseMove:R,onMouseLeave:P,...U,...(0,o(955825).AH)(I.container,y),children:[(0,u.jsx)(o(603820).A,{onDraggableDragStart:F,onDraggableDragMove:W,onDraggableDragEnd:L,onDraggableDragCancel:L,disabled:!v,render:t=>(0,u.jsx)("div",{style:I.dragContainer,...t,children:e.render({imagePosition:T,isRepositioning:v})})}),(0,u.jsx)(h,{small:e.small,isRepositioning:v}),N]})};function h(e){let{small:t,isRepositioning:o}=e;if(t)return null;const n={background:s().Ay.blackWithAlpha(.4),borderRadius:4,color:s().Ay.white,fontSize:12,fontFamily:d().vc(a().locale).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,u.jsx)(p().A,{visible:o,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:n,children:(0,u.jsx)(r().sA,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},813321:(e,t,o)=>{o.d(t,{VJ:()=>U,oI:()=>G,Ac:()=>V});o(581454);var n=o(296540),a=()=>o(484714),i=()=>o(56366),r=()=>o(401497),s=()=>o(536095),l=()=>o(529099),d=()=>o(569397),c=()=>o(340498),p=o(474848);const u={viewBox:"0 0 20 20",fittedViewBox:"4.12 2.37 11.76 15.25",svg:(0,p.jsx)("path",{d:"M6.25 2.375h7.5c1.174 0 2.125.951 2.125 2.125v8.545a.85.85 0 0 1-.333.675 1.706 1.706 0 0 0-.053 2.666l.16.133a.625.625 0 0 1-.399 1.106h-9A2.125 2.125 0 0 1 4.125 15.5v-11c0-1.174.951-2.125 2.125-2.125m-.875 12.56v.565c0 .483.392.875.875.875h7.673a2.97 2.97 0 0 1 .007-2.616H6.55c-.649 0-1.175.527-1.175 1.176m9.25-2.426V4.5a.875.875 0 0 0-.875-.875H8.19v8.884zm-7.56-8.884H6.25a.875.875 0 0 0-.875.875v8.313a2.4 2.4 0 0 1 1.176-.304h.515z"})},g=(0,c().wt)("bookClosed",u);var m=()=>o(177148);const h={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("path",{d:"M9.938 7.313a2.625 2.625 0 1 0 0 5.25 2.625 2.625 0 0 0 0-5.25"}),(0,p.jsx)("path",{d:"M10 4.875a5.125 5.125 0 1 0 0 10.25 5.125 5.125 0 0 0 0-10.25M6.125 10a3.875 3.875 0 1 1 7.75 0 3.875 3.875 0 0 1-7.75 0"}),(0,p.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},y=(0,c().wt)("target",h);var b=()=>o(598985),f=()=>o(421559),v=()=>o(959013),x=()=>o(496603),k=()=>o(2220),w=()=>o(197190),A=()=>o(493823),C=()=>o(8980),M=()=>o(554509),S=()=>o(235921),j=()=>o(227440),I=()=>o(913454),T=()=>o(575154),R=()=>o(349379),P=()=>o(466934),B=()=>o(458097),_=()=>o(84817),D=()=>o(704152),E=()=>o(3486);function F(e){let{template:t,onSelect:a,index:i}=e;const s=(0,n.useCallback)((()=>a(t)),[a,t]),l=(0,r().IS)((e=>{const o=(0,E().d)(t.value.targetCollection.icon,e);return{button:{borderRadius:U,border:`1px solid ${o.stroke.secondary}`,overflow:"hidden"},buttonInner:{borderRadius:U,background:`${o.fill.tertiary}`},buttonHovered:{background:`${o.fill.secondary}`},textContainer:{padding:"20px 20px 10px",color:o.text.primary},description:{marginTop:2,color:o.text.primary,opacity:.6,textWrap:"balance"},outerImageContainer:{overflow:"visible",position:"relative",height:108,width:"calc(100% - 22px)",marginLeft:22,marginTop:-4},imageContainer:{position:"absolute",top:0,transition:"top 0.2s ease",width:"100%",height:"100%",marginTop:4,lineHeight:0,borderRadius:"6px 0",overflow:"hidden",background:e.modalBackground,boxShadow:"dark"===e.mode?`0 0 0 1px ${e.stroke.secondary}`:`0px 0px 0px 1px ${e.stroke.secondary}, 0px 2px 4px -1px rgba(0, 0, 0, 0.06), 0px 12px 32px -6px rgba(0, 0, 0, 0.12)`}}}),[t.value.targetCollection.icon]);return(0,p.jsx)(D().A,{style:l.button,hoveredStyle:l.buttonHovered,ariaLabel:t.value.targetCollection.name,onClick:s,children:(0,p.jsx)("div",{style:l.buttonInner,children:(0,p.jsxs)(_().Y1,{gap:"auto",height:"fill",children:[(0,p.jsxs)("div",{style:l.textContainer,children:[(0,p.jsx)(M().D,{styleName:"UIRegular-14px/Medium",children:t.value.targetCollection.name}),(0,p.jsx)(M().D,{styleName:"UISmall-12px/Regular",customStyles:l.description,children:t.description})]}),(0,p.jsx)("div",{style:l.outerImageContainer,children:(0,p.jsx)("div",{style:l.imageContainer,children:(0,p.jsx)(o(92924).i,{template:t,index:i})})})]})})})}const W=n.memo(F);function L(e){let{title:t,description:o,onSelect:a,icon:i,iconFn:s}=e;const l=(0,n.useCallback)((()=>a()),[a]),d=(0,r().IS)((e=>{const t=(0,E().d)(i,e);return{button:{borderRadius:U,background:`${t.fill.tertiary}`,border:`1px solid ${t.stroke.secondary}`,overflow:"hidden"},buttonHovered:{background:`${t.fill.secondary}`},textContainer:{padding:"16px 20px",color:t.text.primary,gap:4,display:"flex",flexDirection:"column"},description:{marginTop:2,color:t.text.primary,opacity:.6,textWrap:"balance"},icon:{height:c().Ev.default,width:c().Ev.default}}}),[i]);return(0,p.jsx)(D().A,{style:d.button,hoveredStyle:d.buttonHovered,onClick:l,children:(0,p.jsx)(_().Y1,{gap:"auto",height:"fill",children:(0,p.jsxs)("div",{style:d.textContainer,children:[(0,p.jsx)(C().I,{icon:s,style:d.icon}),(0,p.jsx)(M().D,{styleName:"UIRegular-14px/Medium",children:t}),(0,p.jsx)(M().D,{styleName:"UISmall-12px/Regular",customStyles:d.description,children:o})]})})})}const N=n.memo(L),U=12,H={};function O(e){let{iconFn:t,iconColorName:o,label:n,onClick:a}=e;const i=(0,r().IS)((e=>({button:{padding:"16px 18px",borderRadius:U,borderWidth:1,borderStyle:"solid",borderColor:"dark"===e.mode?e.stroke.secondary:e.stroke.primary},hovered:{background:e.buttonHoveredBackground,borderColor:e.palette.translucentGray[100]},icon:{height:19,width:"auto",color:o?e.icon[o]:void 0,marginBottom:8}})),[o]);return(0,p.jsxs)(w().A,{style:i.button,hoveredStyle:i.hovered,onClick:a,children:[(0,p.jsx)("div",{children:t(i.icon)}),(0,p.jsx)(M().D,{styleName:"UIRegular-14px/Medium",children:n})]})}function z(e){let{iconFn:t,iconColorName:o,label:n,onClick:a}=e;const i=(0,r().IS)((e=>({button:{padding:"5px 12px",display:"flex",gap:8,justifyContent:"center",alignItems:"center",borderRadius:20,color:e.text.secondary},icon:{height:19,width:"auto",color:o?e.icon[o]:void 0,marginBottom:0}})),[o]);return(0,p.jsxs)(w().A,{style:i.button,onClick:a,children:[(0,p.jsx)("div",{children:t(i.icon)}),(0,p.jsx)(M().D,{styleName:"UIRegular-14px/Regular",children:n})]})}const K=16,$=4,V=(0,p.jsx)(v().sA,{id:"workflowTemplatesOnboardingModal.button.marketplace",defaultMessage:"More in Marketplace"});function G(e){let{parentStore:t,onAddEmptyPage:o,onAddEmptyDatabase:c,onSelectTemplate:u,onMarketplaceClick:g,showEmptyPageButton:h,onPromptSubmit:y}=e;const w=(0,a().v3)(),{isPhone:_}=(0,a().Y0)(),D=(0,i().K8)((()=>B().A.getShouldShowExpandedTemplateList()),[]),E=(0,T().q)({parentStore:t,returnAllTemplates:D}),F=(0,i().K8)((()=>B().A.state.open&&"new_user_onboarding"===B().A.state.origin),[]),L=(0,i().K8)((()=>B().A.state.open&&("land_on_app_from_new_user_onboarding"===B().A.state.origin||F)),[F]),U=(0,n.useMemo)((()=>F?E.slice(0,$):D?E:function(e){let{arr:t,min:o}=e;if(t.length<=o)return[...t];return t.slice(0,2*Math.floor(t.length/2))}({arr:E,min:1})),[E,D,F]),G=(0,i().K8)((()=>(0,I().getIsSetupGeneratorEnabled)()&&!L&&j().A.state.online),[L]),Q=F,J=!D,X=(0,n.useCallback)((()=>{B().A.setShouldShowExpandedTemplateList(!0),B().A.state.open&&(0,k().u)({environment:w,event:{eventName:"template_picker_show_more_templates_clicked",eventProperties:(0,P().gM)(B().A.state)}})}),[w]),Z=(0,r().IS)((e=>({container:{width:"100%",maxWidth:560+K,alignSelf:"center",alignItems:"center"},basicButtonGrid:{display:"grid",gridTemplateColumns:`repeat(auto-fit, minmax(calc((100% - ${2*K}px) / 3), 1fr))`,maxWidth:"100%",gap:K,marginTop:K,marginBottom:_?26:2*K},newUserOnboardingButtons:{display:"flex",gap:4,margin:`${K}px auto 40px auto`,justifyContent:"center"},templateButtonGrid:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:K,marginTop:_?13:F?36:18},showMoreButton:{marginTop:K,height:32,paddingLeft:12,paddingRight:12},marketplaceButton:{marginTop:K,gap:6},marketplaceIcon:{height:19,width:"auto",color:e.icon.secondary}})),[F,_]);(0,n.useEffect)((()=>{const{state:e}=B().A;e.open&&void 0!==e.flowId&&!H[e.flowId]&&((0,R().DF)({environment:w,eventProperties:{collection_template_ids_shown:U.map((e=>e.templateId)),...(0,P().gM)(e)}}),H[e.flowId]=!0)}),[U,w]);const ee=(0,n.useCallback)((()=>{u(I().globalWorkflowTemplates.fromIdOfType({templateId:s().MH,type:"collection"}),{type:"ai_generated_template"})}),[u]),te=(0,n.useCallback)((e=>{u(e,{type:"suggested_template",allOrderedTemplateIds:U.map((e=>e.templateId))})}),[u,U]),oe=L?z:O,ne=(0,x().oE)([h?(0,p.jsx)(oe,{iconFn:m().Y,iconColorName:"secondary",label:(0,p.jsx)(v().sA,{id:"workflowTemplatesOnboardingModal.button.emptyPage",defaultMessage:"Empty page"}),onClick:o},"emptyPage"):void 0,(0,p.jsx)(oe,{iconFn:f().T,iconColorName:"secondary",label:(0,p.jsx)(v().sA,{id:"workflowTemplatesOnboardingModal.button.emptyDatabase",defaultMessage:"Empty database"}),onClick:c},"emptyDatabase"),G?(0,p.jsx)(oe,{iconFn:l().aiFaceIcon,iconColorName:"secondary",label:(0,p.jsx)(v().sA,{id:"workflowTemplatesOnboardingModal.button.buildWithAi",defaultMessage:"Build with AI"}),onClick:ee},"buildWithAi"):void 0]),ae=(0,i().K8)((()=>{var e;return null===(e=S().A.state.planTypeAndSurveyInfo)||void 0===e?void 0:e.planType}),[]),ie=F&&("personal"===ae||"school"===ae);return(0,p.jsxs)("div",{style:Z.container,children:[!F&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{style:L?Z.newUserOnboardingButtons:Z.basicButtonGrid,children:ne}),(0,p.jsx)(M().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:(0,p.jsx)(v().sA,{defaultMessage:"Suggested",id:"workflowTemplatesOnboardingModal.templateSelection.heading"})})]}),(0,p.jsx)("div",{style:Z.templateButtonGrid,children:ie?("personal"===ae?Y:q).map(((e,t)=>(0,p.jsx)(N,{title:e.title,description:e.description,onSelect:()=>{null==y||y(e.prompt),B().A.state.open&&(0,R().ux)({environment:w,eventProperties:{selected_index:t,personal_school_template_name:e.title,...(0,P().gM)(B().A.state)}})},icon:e.icon,iconFn:e.iconFn},t))):U.map(((e,t)=>(0,p.jsx)(W,{template:e,onSelect:te,index:t},e.templateId)))}),Q?null:J?(0,p.jsx)(A().p,{style:Z.showMoreButton,onClick:X,children:(0,p.jsx)(M().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:(0,p.jsx)(v().sA,{id:"workflowTemplatesOnboardingModalSelectionLanding.seeMore",defaultMessage:"More templates"})})}):(0,p.jsxs)(A().p,{size:"lg",style:Z.marketplaceButton,onClick:g,children:[(0,b().J)(Z.marketplaceIcon),(0,p.jsx)(M().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:V}),(0,p.jsx)(C().I,{icon:d().C,size:"sm",color:"secondary"})]})]})}const Y=[{title:"To-Do List",description:"Track and organize your daily tasks",icon:"/icons/checkbox_gray.svg",type:"personal",prompt:"\n\t\t\tMake me a to-do list template with fields for task name, description, due date, priority level, and status (Not Started/In Progress/Done). \n\nInclude: A kanban board view grouped by status, a calendar view to see tasks by due date, and add a table view sorted by priority and due date.\n\nSample content should be focused on personal user use cases. No business or work type vernacular.\n\t\t\t",iconFn:o(425940).a},{title:"Project Tracker",description:"Manage your personal or work projects",icon:"/icons/target_gray.svg",type:"school",prompt:"\n\t\tMake me a project management template with fields for project name, description, start date, end date, status (Planning/In Progress/Completed), and priority. \n\nUse a multi-select column to tag projects with relevant categories. Create a kanban board view for projects, a timeline view to visualize project timelines, and a table view for projects filtered by category.\n\nSample content should be focused on personal user use cases. No business or work type vernacular.\n\t\t\t",iconFn:y},{title:"Entertainment and Media",description:"Keep track of your favorite media",icon:"/icons/play_gray.svg",type:"personal",prompt:"\n\t\t\tMake me a media tracking template with fields for title, media type (Movie/TV Show/Book/Podcast), genre, release date, status (Want to Watch/In Progress/Completed), rating, and personal notes. \n\nInclude: a table view sorted by rating, a gallery view with cover images, a kanban board grouped by status, and a view filtered by each media type.\n\nSample content should be focused on personal user use cases. No business or work type vernacular.",iconFn:g},{title:"Habit Tracker",description:"Monitor and track your daily habits",icon:"/icons/chart-line_gray.svg",type:"personal",prompt:"\n\t\t\tMake me a habit tracking template with fields for habit name, category, frequency (Daily/Weekly/Monthly), target goal, current streak, and a checkbox for each day of the month. \n\nInclude: a calendar view to check off habits each day, a table view grouped by category, and a gallery view showing progress charts for each habit. \n\nAdd a formula field to calculate completion rate.\n\nSample content should be focused on personal user use cases. No business or work type vernacular.\n\t\t\t",iconFn:o(18953).H}],q=[{title:"Class Notes",description:"Organize your study materials and notes",icon:"/icons/pencil_gray.svg",type:"school",prompt:"Make me a template for taking class notes, with fields for the class name, date, topic, and the actual notes content.\n\nPlease include both a table view and a page view that shows the full notes.\n\nSample content should be focused on student user use cases. No business or work type vernacular.",iconFn:o(105819).pencilLineIcon},{title:"Schedule Planner",description:"Track your schedule and assignments",icon:"/icons/calendar_gray.svg",type:"school",prompt:"Make me a template for tracking my class assignments, with fields for the class name, assignment name, due date, status, and priority. \n\nPlease include both a calendar view and a table view sorted by due date.\n\nSample content should be focused on student user use cases. No business or work type vernacular.",iconFn:o(42583).D},{title:"Research Planner",description:"Organize research papers and citations",icon:"/icons/book_gray.svg",type:"school",prompt:"Make me a template for organizing research papers and sources, with fields for the title, author, publication date, citation, summary, and key findings. \n\nPlease include a gallery view to easily browse papers.\n\nSample content should be focused on student user use cases. No business or work type vernacular.",iconFn:g},{title:"Group Projects",description:"Track group assignments and deadlines",icon:"/icons/people_gray.svg",type:"school",prompt:"\n\t\tMake me a template for managing group projects, with fields for task name, assignee, due date, status, and priority. \n\nPlease include a kanban board view to track task progress and a calendar view for deadlines.\n\nSample content should be focused on student user use cases. No business or work type vernacular.",iconFn:o(835607).peopleIcon}]},867772:(e,t,o)=>{o.d(t,{Ay:()=>l,Gi:()=>i,Wc:()=>n,pF:()=>r,vS:()=>a});const n="loadingLocalImage",a="uploading",i="downloading",r="loaded";class s extends(()=>o(757695))().Store{getInitialState(){return{loadingMode:r}}}const l=s}}]);