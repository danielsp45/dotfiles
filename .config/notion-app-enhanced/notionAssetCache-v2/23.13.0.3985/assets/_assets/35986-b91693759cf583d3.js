"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[35986],{135986:(e,t,o)=>{o.d(t,{A$:()=>Oe,DZ:()=>dt,xl:()=>it,HJ:()=>We,L7:()=>Be,xv:()=>ut,Re:()=>Ge,bj:()=>Xe,D1:()=>Ve,b9:()=>Ye,f1:()=>Je,p1:()=>He,bi:()=>$e,Dm:()=>qe,D9:()=>Fe,ds:()=>Re});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(823215),o(354520),o(672577),o(430670),o(803949),o(581454),o(737550);var i=o(296540),n=()=>o(484714),r=()=>o(56366),a=()=>o(401497),l=()=>o(66689),s=()=>o(128914),p=()=>o(536095),d=()=>o(663077),c=()=>o(716016),u=()=>o(970013),y=()=>o(713998),g=()=>o(455348),m=()=>o(743176),f=()=>o(617871),S=()=>o(412237),b=()=>o(668725),h=()=>o(344417),v=()=>o(340498),T=()=>o(386164),w=()=>o(76118),_=()=>o(931075),A=()=>o(959013),x=()=>o(381349),P=()=>o(496603),C=()=>o(534177),M=()=>o(284371),I=()=>o(416726),k=()=>o(449506),j=()=>o(686526),N=()=>o(36629),D=()=>o(896628),K=()=>o(751156),O=()=>o(67103),E=()=>o(774952),B=()=>o(2220),R=()=>o(617254),F=()=>o(374562),G=()=>o(313892),L=()=>o(551882),z=()=>o(13898),U=()=>o(760217),H=()=>o(285790),W=()=>o(419357),$=()=>o(710149),q=()=>o(147294),V=()=>o(89924),Y=()=>o(933117),X=()=>o(859428),J=()=>o(125565),Q=()=>o(780054),Z=()=>o(175116),ee=()=>o(921855),te=()=>o(852353),oe=()=>o(68465),ie=()=>o(521488),ne=()=>o(148307),re=()=>o(217429),ae=()=>o(53137),le=()=>o(252833);const se=[f().ob,f().Hd,f().e1,f().io,f().k0,f().zG];var pe=()=>o(898486),de=()=>o(553965),ce=()=>o(470928),ue=()=>o(817126),ye=()=>o(249847),ge=()=>o(963589),me=()=>o(176983),fe=()=>o(255824),Se=()=>o(962730),be=()=>o(765957),he=()=>o(463830),ve=()=>o(227440),Te=()=>o(411671),we=()=>o(991249),_e=()=>o(112698),Ae=()=>o(118849),xe=()=>o(44750),Pe=()=>o(621767),Ce=()=>o(913454),Me=()=>o(204067),Ie=()=>o(265793),ke=()=>o(393695),je=()=>o(759709),Ne=()=>o(334684),De=()=>o(878665),Ke=o(474848);const Oe=4,Ee=10;function Be(e){let{collectionContextStore:t,onAccept:o}=e;const i=(0,n().v3)(),l=(0,A().tz)(),s=(0,a().IS)((e=>({iconStyle:{fill:e.aiPurpleColor}})),[]),p=(0,r().K8)((()=>{var e;return null===(e=t.collectionStore())||void 0===e?void 0:e.getSchema()}),[t]),d=(0,r().K8)((()=>(0,oe().QV)()),[]),c=!(0,r().O$)(ve().e),u=(0,r().K8)((()=>{if(c)return[];if(d){return pt((0,te().lO)({environment:i,collectionContextStore:t}),p)}return[]}),[t,p,i,d,c]);return(0,r().K8)((()=>Object.fromEntries(u.map((e=>[te().dC[e.propertyType].toLowerCase(),it({collectionContextStore:t,propertyType:e.propertyType,propertyName:te().dC[e.propertyType],disablePropertyTooltip:!0,intl:l,iconStyle:s.iconStyle,onAccept:o,isSuggestedProperty:!0,isOffline:c})])))),[t,l,o,s.iconStyle,u,c])}function Re(e){let{collectionContextStore:t,propertySchema:o,disableSuggestions:p,hasAiEnabled:d,showAiSuggestions:c,getFilteredSuggestedItemKeys:u,onAccept:y,iconStyle:m,buttonStyle:f,onAfterAccept:S}=e;const b=(0,n().v3)(),h=(0,a().DP)(),v=(0,A().tz)(),w=(0,a().IS)((e=>({aiIconStyle:{fill:e.aiPurpleColor},defaultIconStyle:{fill:e.icon.primary}})),[]),_=(0,ge().X)("nds_default_property_noticon"),x=(0,r().K8)((()=>{var e;const o=null===(e=t.collectionStore())||void 0===e||null===(e=e.getFormat())||void 0===e?void 0:e.app_config_uri;return o?(0,G().lS)((0,R().appConfigs)(),o):void 0}),[t]);(0,Ie().b)(t);const C=(0,ke().Y)(t),M=(0,r().K8)((()=>{var e;return null===(e=t.collectionStore())||void 0===e?void 0:e.getSchema()}),[t]),I=(0,r().K8)((()=>{var e;return null===(e=t.collectionStore())||void 0===e?void 0:e.getFormat()}),[t]),j=function(e){let{collectionContextStore:t,showAiSuggestions:o}=e;const a=(0,n().v3)(),l=(0,r().K8)((()=>{var e;const o=null===(e=t.collectionStore())||void 0===e?void 0:e.getSchema();return o?P().oE(Object.values(o).map((e=>null==e?void 0:e.name.toLocaleLowerCase()))):[]}),[t]),s=(0,i.useCallback)((e=>e.filter((e=>!l.includes(e.name.toLocaleLowerCase())))),[l]),p=(0,r().K8)((()=>{const e=t.collectionStore(),o=null==e?void 0:e.getFormat();if(null!=o&&o.ai_suggested_properties&&(null==o?void 0:o.ai_suggested_properties.length)>0)return s(null==o?void 0:o.ai_suggested_properties)}),[t,s]),[d,c]=(0,i.useState)(p||"loading"),u=(0,i.useRef)(!1);return(0,i.useEffect)((()=>{if(u.current||p)return;(async()=>{const e=t.collectionStore(),o=null==e?void 0:e.getSpaceId(),i=null==e?void 0:e.id,n=[];if(o&&i&&e.getName()){const t=await k().callApi({eventName:"getAiSuggestedProperties",environment:a,data:{spaceId:null==e?void 0:e.getSpaceId(),collectionId:null==e?void 0:e.id,schema:P().oE(Object.values(e.getSchema())),collectionName:(0,ee().r4)(e.getName(),e),numSuggestion:Ee},headers:(0,T().WS)({spaceId:o})});if("success"===t.type){const o=t.data.properties.filter((e=>!l.includes(e.name.toLocaleLowerCase())));n.push(...o),K().createAndCommit({environment:a,perform:t=>{D().zA({stores:[e],update:{ai_suggested_properties:o},transaction:t})},canUndo:!0,userAction:"propertyType.generateAiSuggestion"})}}const r=s(n);c(r)})(),u.current=!0}),[t,a,d,o,p,l,s]),d}({collectionContextStore:t,showAiSuggestions:c}),N=(0,r().K8)((()=>(0,oe().QV)()),[]),O=!(0,r().O$)(ve().e),E=(0,r().K8)((()=>{if(o||p||O)return[];const e=C.filter((e=>(0,Ce().shouldShowInSuggestedProperties)(e)));if(x){const e=function(e){let{appConfig:t,collectionFormat:o,collectionSchema:i,hasAiEnabled:n}=e;if(!o||!i)return[];const r=e=>{const t=o.app_config_uri,r=g().u9.derivePropertyUris(i??{},o.app_uri_map);if(e.collectionUri!==t)return!1;let a=!0;e.uri===(0,F().Jb)().uri&&r.has(l().yx.GithubPrsRelation)&&(a=!1);return e.dependencies.some((e=>"property"===e.type&&e.collectionUri===t&&(0,s().LE)(e.uri)&&!r.has(e.uri)))&&(!e.isAi||n)&&a},a={};t.allFeatures.forEach((e=>{(0,G().$n)(e)&&e.variants.every((e=>Boolean(t.allFeatures.find((t=>t.uri===e&&(0,G().lK)(t)&&r(t))))))&&(a[e.uri]=e.variants)}));const p=Object.values(a).flat(),d=t.allFeatures.filter((e=>(0,G().lK)(e)&&!p.find((t=>t===e.uri))?r(e):!!(0,G().$n)(e)&&Boolean(a[e.uri])));return d.sort(((e,t)=>(0,G().$n)(e)?-1:(0,G().$n)(t)?1:e.dependencies.length-t.dependencies.length))}({appConfig:x,collectionFormat:I,collectionSchema:M,hasAiEnabled:d});return(N?e.filter((e=>"notion://tasks/task_summary_feature"!==e.uri)):e).map((e=>({type:"typed",appConfigFeature:e})))}if(e.length>0)return e.map((e=>({type:"workflow",template:e})));if(c)return"loading"===j?"loading":j.map((e=>({type:"ai_suggestion",propertySchema:e})));if(!N){return pt((0,te().lO)({environment:b,collectionContextStore:t}),M)}return[]}),[o,p,C,x,c,N,I,M,d,j,b,t,O]),B=(0,i.useMemo)((()=>{if("loading"===E)return[];const e=E.filter((e=>"workflow"===e.type)).map((e=>Ze(e.template.templateId)));return u(e).map(et)}),[E,u]);(0,je().O)({collectionContextStore:t,origin:"suggested_properties",shownTemplateIds:B});return(0,r().K8)((()=>"loading"===E?"loading":Object.fromEntries(E.map(((e,o)=>{switch(e.type){case"ai_suggestion":return[e.propertySchema.name.toLowerCase(),it({collectionContextStore:t,propertyType:e.propertySchema.type,propertyName:e.propertySchema.name,disablePropertyTooltip:!0,intl:v,onAccept:y,isSuggestedProperty:!0,iconStyle:m,isOffline:O,buttonStyle:f})];case"typed":return[e.appConfigFeature.name.toLowerCase(),ot({appConfig:x,suggestedProperty:e.appConfigFeature,isDisabled:!1,isDefaultNoticonEnabled:_,environment:b,collectionContextStore:t,theme:h,iconStyle:m??w.defaultIconStyle,buttonStyle:f,onAfterAccept:S})];case"workflow":return[(0,Ce().getWorkflowTemplateName)(e.template).toLowerCase(),tt({environment:b,template:e.template,collectionContextStore:t,iconStyle:m??w.defaultIconStyle,suggestedFeatureAnalytics:{origin:"suggested_properties",selectedIndex:B.indexOf(e.template.templateId),shownTemplateIds:B},buttonStyle:f,onAccept:S})];case"derived_ai_property":return[te().dC[e.propertyType].toLowerCase(),it({collectionContextStore:t,propertyType:e.propertyType,propertyName:te().dC[e.propertyType],disablePropertyTooltip:!0,intl:v,iconStyle:w.aiIconStyle,onAccept:y,isSuggestedProperty:!0,isOffline:O,buttonStyle:f})]}})))),[x,t,b,v,E,h,y,B,m,w,O,f,S,_])}function Fe(e){const{hasMoreSuggestions:t,filteredSuggestedPropertyItems:o,showAiSuggestions:n,setIsShowingMoreSuggestions:r,hasSearchInput:l,disableSuggestions:s,isLoading:p,title:d,from:c}=e,u=(0,A().tz)(),y=(0,ge().X)("db_ux_properties"),g=(0,a().IS)((e=>({loadingShimmer:{height:10,borderRadius:4,margin:"12px 14px",backgroundColor:e.lightDividerColor},loadingTitleStyle:{marginTop:"tableHeader"===c?14:8,marginBottom:0,paddingLeft:"tableHeader"===c?14:0},moreSuggestionsButtonContainer:{display:"flex",alignItems:"center",lineHeight:1.2,color:e.text.secondary,fontSize:12},titleContainer:{display:"flex",alignItems:"center"},aiIcon:{display:"inline-flex",width:v().Ev.sm,height:v().Ev.sm,fill:e.icon.secondary,marginRight:6},desktopTitleStyleTableHeader:{fontSize:12,fontWeight:M().Wy.medium,color:e.text.secondary,marginLeft:3},desktopStyleTableHeader:{padding:8,gap:2,display:"flex",flexDirection:"column",margin:0}})),[c]),m=(0,i.useMemo)((()=>({key:"suggested",render:e=>(0,Ke.jsx)(V().A,{...e,title:(0,Ke.jsxs)("span",{style:g.titleContainer,children:[(0,S().aiFaceSmallIcon)(g.aiIcon),(0,Ke.jsx)(E().c,{textStyleName:"UISmall-12px/Medium"})]}),disableMobileBorders:!0,desktopTitleStyle:g.loadingTitleStyle,mobileTitleStyle:g.loadingTitleStyle}),items:[]})),[g.aiIcon,g.titleContainer,g.loadingTitleStyle]),f=(0,i.useMemo)((()=>({key:"suggested",render:e=>(0,Ke.jsxs)(V().A,{...e,title:u.formatMessage(dt.suggestedSectionTitle),disableMobileBorders:!0,children:[(0,Ke.jsx)($().A,{style:{width:"80%",...g.loadingShimmer}}),(0,Ke.jsx)($().A,{style:{width:"50%",...g.loadingShimmer}}),(0,Ke.jsx)($().A,{style:{width:"60%",...g.loadingShimmer}}),(0,Ke.jsx)($().A,{style:{width:"50%",...g.loadingShimmer}})]}),items:[]})),[g.loadingShimmer,u]),h=(0,i.useMemo)((()=>y?m:f),[y,m,f]),T=(0,i.useMemo)((()=>({key:"more-suggestions",render:e=>(0,Ke.jsx)(U().A,{...e,title:(0,Ke.jsxs)("div",{style:g.moreSuggestionsButtonContainer,children:[(0,Ke.jsx)(A().sA,{id:"database.collectionsettings.propertySuggestions.more",defaultMessage:"More"}),(0,b().b)({fill:x().Ay.uiGray,width:12,height:12,marginLeft:4})]})}),action:e=>{r(!0),e.event&&"stopPropagation"in e.event&&e.event.stopPropagation()}})),[r,g.moreSuggestionsButtonContainer]);return(0,i.useMemo)((()=>s?{key:"suggested",render:()=>null,items:[]}:o.length?{key:"suggested",render:e=>(0,Ke.jsx)(V().A,{...e,title:d,desktopTitleStyle:"tableHeader"===c?g.desktopTitleStyleTableHeader:{},desktopStyle:"tableHeader"===c?g.desktopStyleTableHeader:{}}),items:t&&!l?[...o,T]:o}:p&&n&&!l?h:{key:"suggested",render:()=>null,items:[]}),[s,o,t,l,T,p,n,h,d,c,g.desktopStyleTableHeader,g.desktopTitleStyleTableHeader])}function Ge(e){let{environment:t,collectionContextStore:o,propertySchema:n,onAccept:a,section:l,iconStyle:s,buttonStyle:p}=e;const d=(0,A().tz)(),c=(0,r().K8)((()=>(0,te().xm)({collectionContextStore:o,environment:t})),[o,t]),u=(0,i.useMemo)((()=>"all"===l?c:l.flatMap((e=>{switch(e){case"basic":return Le;case"advanced":return ze;case"metadata":return Ue;default:(0,C().HB)(e)}})).filter((e=>c.includes(e)))),[l,c]),y=!(0,r().O$)(ve().e);return(0,r().K8)((()=>Object.fromEntries(u.map((e=>{const t=(0,te().GN)(d,e);return[t.toLowerCase(),it({propertyType:e,propertyName:t,collectionContextStore:o,onAccept:a,intl:d,propertySchema:n,isSuggestedProperty:!1,iconStyle:s,isOffline:y,buttonStyle:p})]})))),[o,d,a,n,u,s,y,p])}const Le=["text","number","select","multi_select","status","date","person","file","checkbox","url","phone_number","email"],ze=["relation","rollup","formula","button","auto_increment_id","place"],Ue=["created_time","last_edited_time","created_by","last_edited_by"];function He(e){let{iconStyle:t,buttonStyle:o,onAfterAccept:i}=e;const l=(0,A().tz)(),s=(0,n().v3)(),c=(0,Z().ET)(),u=(0,a().IS)((e=>({defaultIconStyle:{fill:e.icon.primary}})),[]),y=(0,r().K8)((()=>{const e=function(e){var t;let{environment:o,collectionContextStore:i,spaceStore:n}=e;if(!(0,ce().Io)())return!1;const r=null==n?void 0:n.getModel();if(!r||!(0,_().Xi)(r))return!1;const a=null===(t=i.collectionViewBlockStore())||void 0===t?void 0:t.isCollectionViewPageWithContent();if(a)return!1;const l=i.collectionStore();if(!l)return!1;const s=(0,Me().NU)({environment:o,collectionStore:l,templateId:p().z$});if(s)return!1;return!0}({environment:s,collectionContextStore:c,spaceStore:be().default.getState().currentSpaceStore}),n=(0,ce().$3)({environment:s,collectionStore:c.collectionStore()});if(!e&&!n)return{};const r=Ce().globalWorkflowTemplates.fromId(p().z$);if(!(0,d().bz)(r))return{};const a=(0,ce().xE)(s),y="verification_upsell_item_collection_entrypoint",g=n?(0,Ke.jsx)(Ae().A,{subscriptionTier:"business",analyticsName:y}):a?(0,Ke.jsx)(q().Ee,{style:{marginLeft:2},newBadgeKey:"verification",didUserEngage:!1,keyType:"date"}):void 0;return{[r.templateId]:tt({environment:s,template:r,collectionContextStore:c,suggestedFeatureAnalytics:void 0,titleBadge:g,onAccept:()=>{var e,t;n?(0,we().K)(s,{from:y,upsell:{type:"product",product:"business",limit:{type:"none"},trialability:"none"}}):((0,B().u)({environment:s,event:{eventName:"page_verification_property_added",eventProperties:{space_id:null===(e=be().default.getState().currentSpaceStore)||void 0===e?void 0:e.id,collection_id:null===(t=c.collectionStore())||void 0===t?void 0:t.id}}}),null==i||i())},titleOverride:l.formatMessage(O().Gl.verificationPropertyName),isUpsell:n,tooltip:(0,Ke.jsx)(A().sA,{...ct.verification}),iconStyle:t??u.defaultIconStyle,buttonStyle:o})}}),[i,l,c,s,t,u.defaultIconStyle,o]);return y}function We(e){let{filteredAiDerivedPropertyItems:t}=e;const o=(0,A().tz)();return(0,i.useMemo)((()=>t.length?{key:"autofill",render:e=>(0,Ke.jsx)(V().A,{...e,title:o.formatMessage(dt.autofillSectionTitle)}),items:t}:{key:"autofill",render:()=>null,items:[]}),[t,o])}function $e(e){let{searchProperties:t,titleText:o,desktopTitleStyle:n,desktopStyle:r,topBorder:l,inputStyle:s}=e;const{searchInput:p,showSearchInput:d,handleSearchInputChange:c,handleToggleSearchInput:u}=t,y=(0,A().tz)(),g=(0,i.useCallback)((e=>{e&&Q().A.isMobile&&e.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}),[]),m=(0,a().IS)((()=>({titleContainer:{display:"flex",alignItems:"center"},icon:{width:v().Ev.xs,height:v().Ev.xs},button:{width:20,height:20,margin:4}})),[]),f=(0,i.useMemo)((()=>(0,Ke.jsxs)("span",{style:m.titleContainer,children:[(0,Ke.jsx)("span",{children:o}),(0,Ke.jsx)(X().A,{placement:Se().W.Top,renderTooltip:()=>(0,Ke.jsx)(A().sA,{id:"tableHeaderPropertyCreationMenu.searchTooltip",defaultMessage:"Search types"}),render:e=>(0,Ke.jsx)(H().A,{ariaLabel:y.formatMessage(dt.newSearchPlaceholder),icon:h().u,iconStyle:m.icon,style:m.button,onClick:u,...e})})]})),[u,m,o,y]),S=(0,i.useCallback)((e=>{"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||e.stopPropagation(),"ArrowDown"!==e.key&&"ArrowUp"!==e.key||e.currentTarget.blur()}),[]),b=(0,i.useMemo)((()=>({key:"search-input",render:e=>(0,Ke.jsx)(W().Ay,{...e,ref:g,placeholder:y.formatMessage(dt.newSearchPlaceholder),value:p,onChange:c,autoFocus:!0,focusInitial:!0,style:s,preventCaptureArrowShortcuts:!0,onKeyDown:S}),action:()=>{}})),[g,c,p,s,y,S]);return(0,i.useMemo)((()=>({key:"search-input",render:e=>(0,Ke.jsx)(V().A,{...e,topBorder:l,title:f,desktopStyle:r,desktopTitleStyle:n}),items:d?[b]:[]})),[r,n,f,b,d,l])}function qe(e){let{title:t,filteredStandardPropertyItems:o,key:n,desktopStyle:r,topBorder:a}=e;return(0,i.useMemo)((()=>o.length?{key:n,render:e=>(0,Ke.jsx)(V().A,{...e,topBorder:a,desktopStyle:r,title:t}),items:o}:{key:n,render:()=>null,items:[]}),[o,a,r,n,t])}function Ve(e){let{collectionContextStore:t,propertySchema:o,propertyGroupId:a,buttonStyle:s,propertyName:p,onAfterAccept:d}=e;const c=(0,n().v3)(),u=(0,A().tz)(),g=(0,r().K8)((()=>ae().A.bots.state),[]),m=(0,r().K8)((()=>t.collectionStore()),[t]),S=(0,r().K8)((()=>(null==m?void 0:m.getSchema())??{}),[m]),b=(0,r().K8)((()=>Boolean(null==m?void 0:m.isPageTreeCollection())),[m]),h=(0,r().K8)((()=>t.databaseType),[t]),v=(0,r().K8)((()=>{var e;return null===(e=be().default.state.currentSpaceStore)||void 0===e?void 0:e.canEdit()}),[]),T=(0,r().K8)((()=>{if(void 0===o)return function(e,t){if(!e)return[];const o=re().default.checkGate({gateName:"cron_connected_relation"}),i=re().default.checkGate({gateName:"connected_relation"}),n=re().default.checkGate({gateName:"slack_connected_relation"}),r=re().default.checkGate({gateName:"salesforce_connected_relation_database_actions_enabled"}),a=e.getDatabaseType()===l().dC,s=ae().A.state;if(!s.loaded)return[];const p=s.integrations,d={};if(!a){const e=p.find((e=>e.id===f().ob)),t=(0,F().Jb)();var c;e&&(d[t.name]={name:t.name,pattern:ie().Y,integration:e,tooltipImage:{img:ne().A.images.tooltips.properties.githubSyncPullStatusPng,scale:.5},description:t.description,canOnlyAdminAuth:{disabledPropertyTooltipMessage:null===(c=t.canOnlyAdminAuth)||void 0===c?void 0:c.disabledPropertyTooltipMessage}})}const u=[];if(t&&(u.push(f().Hd,f().e1,f().k0),n&&u.push(f().zG)),o&&u.push(f().io),u.forEach((e=>{const t=p.find((t=>t.id===e));if(null!=t&&t.info.original_url_patterns)for(const i of t.info.original_url_patterns){var o;null!==(o=i.additional_types)&&void 0!==o&&o.connectedRelation&&(d[i.name]||(d[i.name]={name:(0,le().Fe)({pattern:i,integration:t}),pattern:i,integration:t}))}})),!i)return Object.values(d);for(const l of p)if(l.info.original_url_patterns&&t&&![...se,f().F6].includes(l.id))for(const e of l.info.original_url_patterns){var y;null!==(y=e.additional_types)&&void 0!==y&&y.connectedRelation&&(d[e.name]||(l.id===f().mn&&r?d[l.name]={name:l.name,pattern:e,integration:l}:d[e.name]={name:(0,le().Fe)({pattern:e,integration:l}),pattern:e,integration:l}))}return Object.values(d)}(m,v)}),[m,o,v]),_=(0,r().K8)((()=>{var e;return null===(e=t.collectionStore())||void 0===e?void 0:e.getSpaceId()}),[t]),x=(0,ye().T)(),P=(0,ue().Ld)({spaceId:_,userId:x}),M=(0,r().K8)((()=>Boolean(null==m?void 0:m.isSyncedCollection())),[m]),I=(0,me().J)(),k=(0,fe().a)(),j=!(0,r().O$)(ve().e),N=(0,i.useMemo)((()=>{if(null!=T&&T.length&&!k&&!j)return Object.fromEntries(T.map((e=>{const{isDisabled:o,featureAvailability:i,propertyDisabledTooltip:n}=function(e){let{propertyConfig:t,databaseType:o,bots:i,isSpaceAdmin:n,isMobile:r,isWikiCollection:a,isSyncedCollection:s,schema:p,intl:d,featureAvailabilities:c}=e;const u="integration"in t?t.integration.id:t.integrationId;if(!u)return{isDisabled:!1};const g=c[u];if(g&&!(0,w().e2)(g))return{isDisabled:!1,featureAvailability:g};var m;if((0,y().iY)({isAuthed:Boolean(i.find((e=>e.integration_id===u))),isSpaceAdmin:n,isPropertyAdminAuthOnly:Boolean(t.canOnlyAdminAuth),isMobile:r}))return{isDisabled:!0,propertyDisabledTooltip:null===(m=t.canOnlyAdminAuth)||void 0===m?void 0:m.disabledPropertyTooltipMessage};if(u===f().ob){if(lt(p,f().ob))return{isDisabled:!0,propertyDisabledTooltip:d.formatMessage(dt.duplicateGithubPropertyTooltip)};if(a)return{isDisabled:!0,propertyDisabledTooltip:d.formatMessage(dt.wikiGithubPropertyTooltip)};if(s)return{isDisabled:!0,propertyDisabledTooltip:d.formatMessage(dt.syncedDatabaseGithubPropertyTooltip)}}else if(u===f().io){if(lt(p,f().io),o!==l().TC)return{isDisabled:!0,propertyDisabledTooltip:d.formatMessage(dt.nonMeetingsCronPropertyTooltip)};if(lt(p,f().io))return{isDisabled:!0,propertyDisabledTooltip:d.formatMessage(dt.duplicateCronEventPropertyTooltip)}}return{isDisabled:!1}}({propertyConfig:e,bots:g,isSpaceAdmin:I,environment:c,isWikiCollection:b,databaseType:h,isSyncedCollection:M,schema:S,intl:u,isMobile:c.device.isMobile,featureAvailabilities:P});return[e.name.toLowerCase(),nt({connectedRelationProperty:e,isDisabled:o,propertyDisabledTooltip:n,environment:c,intl:u,collectionContextStore:t,propertyGroupId:a,featureAvailability:i,buttonStyle:s,propertyName:p,onAfterAccept:d})]})).filter(C().O9))}),[T,k,g,I,c,b,h,M,S,u,t,a,P,j,s,p,d]);return N}function Ye(e){const{collectionContextStore:t,buttonStyle:o,onAfterAccept:a}=e,l=(0,n().v3)(),s=(0,A().tz)(),p=(0,r().K8)((()=>{var e;return(null===(e=t.collectionStore())||void 0===e?void 0:e.getSchema())??{}}),[t]),d=(0,ge().X)("connected_relations_database_actions_enabled"),c=!(0,r().O$)(ve().e),[y,g]=(0,i.useMemo)((()=>{if(!d)return[{},[]];const e={};for(const[i,n]of Object.entries(p)){if(!n||!(0,u().UU)(n))continue;const r=n.connectedRelation.integration_id;if(!r||!(0,f().KB)(r))continue;const p=rt({propertySchema:n,environment:l,intl:s,collectionContextStore:t,propertyId:i,integrationId:r,isOffline:c,buttonStyle:o,onAfterAccept:a});e[r]||(e[r]={}),e[r][n.name.toLowerCase()]=p}return[e,Object.values(e).flat()]}),[s,p,d,l,t,c,o,a]);return[y,g]}function Xe(e){let{filteredConnectedPropertyItems:t,hideTitle:o,desktopStyle:n}=e;const r=(0,A().tz)();return(0,i.useMemo)((()=>t.length?{key:"connected",render:e=>(0,Ke.jsx)(V().A,{...e,title:r.formatMessage(dt.connectedRelationSectionTitle),hideTitle:o,topBorder:o,desktopStyle:n}),items:t}:{key:"connected",render:()=>null,items:[]}),[t,o,n,r])}function Je(e){let{filteredConnectedPropertyItemsPerIntegration:t}=e;const o=(0,A().tz)();return(0,i.useMemo)((()=>0===Object.keys(t).length?[{key:"existingConnectedRelations",render:()=>null,items:[]}]:Object.entries(t).map((e=>{let[t,i]=e;return 0===i.length?{key:t,render:()=>null,items:[]}:{key:t,render:e=>(0,Ke.jsx)(V().A,{...e,title:o.formatMessage(dt.existingConnectedRelationSectionTitle,{integrationName:(0,f().mi)(t)})}),items:i}}))),[t,o])}const Qe="workflow.";function Ze(e){return`${Qe}${e}`}function et(e){return e.replace(Qe,"")}function tt(e){let{environment:t,template:o,collectionContextStore:i,suggestedFeatureAnalytics:n,titleBadge:r,titleOverride:a,isUpsell:l,onAccept:s,tooltip:p,iconStyle:d,buttonStyle:c}=e;const u=a||(0,Ce().getWorkflowTemplateName)(o);return{key:Ze(o.templateId),searchKeys:[o.templateId],action:()=>{l||(0,xe().p)({environment:t,template:o,collectionContextStore:i,suggestedFeatureAnalytics:n}),s&&s()},render:e=>(0,Ke.jsx)(X().A,{style:{whiteSpace:"break-spaces"},placement:Se().W.Left,renderTooltip:()=>p,disableTooltip:!p,render:t=>(0,Ke.jsx)(U().A,{...(0,de().A)(t,e),title:(0,Ke.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,Ke.jsx)(J().A,{style:{marginRight:4},children:u}),r]}),icon:(0,Ke.jsx)(Pe().z,{template:o,size:16,iconStyle:d}),style:c})})}}function ot(e){let{appConfig:t,suggestedProperty:o,isDisabled:i,isDefaultNoticonEnabled:n,propertyDisabledTooltip:r,environment:a,collectionContextStore:l,theme:p,iconStyle:d,buttonStyle:c,onAfterAccept:y}=e;const f=l.collectionStore(),S=g().u9.derivePropertyUris((null==f?void 0:f.getSchema())??{},null==f?void 0:f.getPropertyMapping()),b=re().default.checkGate({gateName:"db_ux_properties"}),h=(e,t,o,r)=>{const a=o.dependencies.find((e=>{var t;return"property"===e.type&&e.collectionUri===(null==f||null===(t=f.getFormat())||void 0===t?void 0:t.app_config_uri)&&(0,s().LE)(e.uri)&&!S.has(e.uri)})),l=o.dependencies.find((e=>"property"===e.type&&(0,u().$M)(e.propertySchema)&&(0,u().om)(e.propertySchema)));if(a)return(0,Ke.jsx)(U().A,{...e,disabled:i,disabledFeedback:i,title:(0,Ke.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[t,l?(0,Ke.jsx)(L().A,{}):null,o.isNew?"notion://projects/tasks_with_sprints_feature"===o.uri&&(0,Ke.jsx)(z().A,{}):null]}),icon:(0,Ke.jsx)(m().zB,{type:a.propertySchema.type,theme:p,icon:r,size:16,style:d,isDefaultNoticonEnabled:n}),style:c})},v=new(he().A);return{key:o.name,searchKeys:[o.name],render:e=>{var i,n;return(0,Ke.jsx)(De().A,{showImage:!r,caption:r??o.description,tooltipImage:r||b||null===(i=o.tooltipImage)||void 0===i?void 0:i.img,tooltipImageScale:null===(n=o.tooltipImage)||void 0===n?void 0:n.scale,render:i=>{if((0,G().lK)(o))return h({...(0,de().A)(e,i)},o.name,o,o.icon);{const n=P().oE(o.variants.map((e=>{const o=null==t?void 0:t.allFeatures.find((t=>t.uri===e));if(o&&(0,G().lK)(o))return o})));return(0,Ke.jsx)(Y().A,{buttonPopupStore:v,items:n,getKey:e=>e.name,onSelect:async e=>{await N().h3({environment:a,feature:e,collectionContextStore:l,addFeatureFrom:"new_property"}),j().os({collectionSettingsStore:l.settingsStore}),y&&y()},selectedItem:void 0,renderOrigin:t=>h({focused:Boolean(e.focused),...(0,de().A)(P().cJ(e,"onClick","focused"),(0,de().A)(i,t))},o.name,n[0],o.icon),renderItem:e=>(0,Ke.jsx)(U().A,{...e,title:e.value.name,shouldWrapCaption:!0,shouldWrapTitle:!0,style:c})})}}})},action:async()=>{(0,G().lK)(o)?(await N().h3({environment:a,feature:o,collectionContextStore:l,addFeatureFrom:"new_property"}),j().os({collectionSettingsStore:l.settingsStore})):v.setState({open:!0}),y&&y()}}}function it(e){const{collectionContextStore:t,propertySchema:o,propertyName:i,propertyType:n,disablePropertyTooltip:r,intl:a,onAccept:l,iconStyle:s,isSuggestedProperty:p,isOffline:d,buttonStyle:u}=e;return{key:i,searchKeys:[i,..."en"!==a.locale?[te().Hp[n]]:[]],render:e=>{const l=o&&(null==o?void 0:o.type)===n,p=function(e){let{intl:t,collectionContextStore:o,propertyType:i,propertySchema:n,isOffline:r}=e;if(r&&(0,Ne().$)({propertyType:i,propertySchema:n,allowAIProperty:!1}))return t.formatMessage(I().AY.unavailableOfflineTooltip);if("auto_increment_id"===i){var a;if(null!=n&&n.type)return t.formatMessage(pe().qh.convert_to_auto_increment_id_property);const e=o.collectionStore();if(null==e?void 0:e.isPageTreeCollection())return t.formatMessage(pe().qh.wiki_forbidden_auto_increment_id_property);if(Boolean(null==e?void 0:e.isSyncedCollection()))return t.formatMessage(pe().qh.synced_database_forbidden_auto_increment_id_property);const i=e&&e.id,r=e&&e.getFormat(),l=e&&(null===(a=e.getSpaceStore())||void 0===a?void 0:a.id),s=e&&e.getSchema(),p=e&&e.getDeletedSchema();if(!(i&&r&&l&&s&&p))return;const d=e.getModel();if(d&&(0,c().N_)(d))return t.formatMessage(pe().qh.duplicate_auto_increment_id_property)}}({intl:a,collectionContextStore:t,propertyType:n,propertySchema:o,isOffline:d}),y=void 0!==p,g=re().default.checkGate({gateName:"db_ux_properties"}),m=r||!ct.hasOwnProperty(n)||g?void 0:a.formatMessage(ct[n]);return(0,Ke.jsx)(at,{isChecked:l,buttonMenuItemProps:e,propertyName:i,propertyType:n,isDisabled:y,tooltip:p??m,iconStyle:s,buttonStyle:u})},action:()=>{l({propertyType:n,isSuggestedProperty:p,propertyName:i})}}}function nt(e){let{connectedRelationProperty:t,isDisabled:o,propertyDisabledTooltip:i,environment:n,collectionContextStore:r,intl:a,propertyGroupId:l,featureAvailability:s,buttonStyle:p,propertyName:d,onAfterAccept:c}=e;const u=s&&!(0,w().e2)(s);return{key:t.name,searchKeys:[t.name],render:e=>(0,Ke.jsx)(at,{buttonMenuItemProps:e,propertyName:t.name,propertyType:"relation",isDisabled:o,tooltip:i,icon:t.integration.info.icon,buttonStyle:p,badge:u?(0,Ke.jsx)(_e().B,{upsell:s.upsell,analyticsName:"collection_connected_property",disableTooltip:!0}):void 0}),action:async()=>{if(u)return void(0,we().K)(n,{from:"collection_connected_property",upsell:s.upsell});const e=re().default.checkGate({gateName:"salesforce_connected_relation_database_actions_enabled"});if(t.integration.id===f().mn&&e){const e=r.collectionStore();(0,B().u)({environment:n,event:{eventName:"salesforce_actions",eventProperties:{actionType:"navigate_to_object_selection",integrationId:t.integration.id,collectionId:null==e?void 0:e.id}}}),j().a2({collectionSettingsStore:r.settingsStore,item:{type:"connectedRelationDatabaseActions",source:"ConnectedRelationObjectSelection",integrationId:t.integration.id}})}else await N().XO({environment:n,connectedRelationProperty:t,collectionContextStore:r,intl:a,from:"new_property",propertyGroupId:l,propertyName:d});c&&c()}}}function rt(e){const{propertySchema:t,intl:o,collectionContextStore:i,propertyId:n,integrationId:r,isOffline:a,buttonStyle:l,onAfterAccept:s}=e;return{key:n,searchKeys:[n],render:e=>(0,Ke.jsx)(at,{buttonMenuItemProps:e,propertyName:t.name,propertyType:"relation",icon:t.icon,isDisabled:a,tooltip:a?o.formatMessage(I().AY.unavailableOfflineTooltip):void 0,buttonStyle:l}),action:()=>{j().a2({collectionSettingsStore:i.settingsStore,item:{type:"connectedRelationDatabaseActions",source:"connectedRelationAddProperties",rootPropertyId:n,integrationId:r,rootPropertySchema:t}}),s&&s()}}}const at=i.memo((function(e){let{buttonMenuItemProps:t,isChecked:o,propertyName:n,propertyType:r,isDisabled:l,badge:s,tooltip:p,tooltipImage:d,tooltipImageScale:c,icon:u,iconStyle:y,buttonStyle:g}=e;const f=(0,a().DP)(),S=(0,a().IS)((e=>({container:{display:"inline-flex",alignItems:"center",maxWidth:"100%",overflow:"hidden"},span:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginRight:4},defaultIconStyle:{fill:e.icon.primary}})),[]),b=(0,ge().X)("nds_default_property_noticon"),h=(0,i.useCallback)((e=>(0,Ke.jsx)(U().A,{...e?(0,de().A)(t,e):t,disabled:l,disabledFeedback:l,title:(0,Ke.jsxs)("div",{style:S.container,children:[(0,Ke.jsx)("span",{style:S.span,children:n}),s]}),isChecked:o,icon:(0,Ke.jsx)(m().zB,{type:r,theme:f,icon:u,size:16,style:y??S.defaultIconStyle,isDefaultNoticonEnabled:b}),buttonStyle:g})),[t,l,n,s,o,r,u,g,S,f,y,b]);return p?(0,Ke.jsx)(De().A,{showImage:!l,caption:p,tooltipImage:l?void 0:d,tooltipImageScale:c,render:e=>h(e)}):h(void 0)}));function lt(e,t){for(const i in e){var o;const n=e[i];if(n&&"connectedRelation"in n&&(null===(o=n.connectedRelation)||void 0===o?void 0:o.integration_id)===t)return!0}return!1}const st=["ai_summary"];function pt(e,t){const o=t?function(e){const t=new Set;for(const i in e){const n=e[i];if(n&&"ai_inference"in n){var o;const e=null===(o=n.ai_inference)||void 0===o?void 0:o.type;if(e)switch(e){case"custom":t.add("ai_custom_prompt");break;case"summarize":t.add("ai_summary");break;case"extract":t.add("ai_extract");break;case"translate":t.add("ai_translate")}}else n&&"select_ai_inference"in n&&t.add("ai_keywords")}return t}(t):new Set;return e.map((e=>({type:"derived_ai_property",propertyType:e}))).filter((e=>!st.includes(e.propertyType)||!o.has(e.propertyType)))}const dt=(0,A().YK)({propertyNameLabel:{defaultMessage:"Name",id:"database.viewSettings.propertyTypeSelect.propertyNameLabel"},searchPlaceholder:{defaultMessage:"Search or add new property",id:"database.viewSettings.propertyTypeSelect.searchPlaceholder"},newSearchPlaceholder:{defaultMessage:"Search types...",id:"database.viewSettings.propertyTypeSelect.newSearchPlaceholder"},searchToChangePlaceholder:{defaultMessage:"Search for property type",id:"database.viewSettings.propertyTypeSelect.searchToChangePlaceholder"},propertyNameInputPlaceholder:{defaultMessage:"Property name",id:"database.viewSettings.propertyTypeSelect.propertyNameInputPlaceholder"},suggestedSectionTitle:{defaultMessage:"Suggested",id:"database.viewSettings.propertyTypeSection.suggested"},loadingSuggestedSectionTitle:{defaultMessage:"Thinking...",id:"database.viewSettings.propertyTypeSection.loadingSuggested"},connectedRelationSectionTitle:{defaultMessage:"Connections",id:"database.viewSettings.propertyTypeSection.connected"},existingConnectedRelationSectionTitle:{defaultMessage:"{integrationName}",id:"database.viewSettings.propertyTypeSection.existingConnectedIntegrationTitle"},typesSectionTitle:{defaultMessage:"Type",id:"database.viewSettings.propertyTab.propertyType"},autofillSectionTitle:{defaultMessage:"AI autofill",id:"database.viewSettings.propertyTab.autofillProperties"},newProperty:{defaultMessage:"New property",id:"database.viewSettings.newProperty"},newPropertyWithDatabaseName:{defaultMessage:"New property on {databaseName}",id:"database.viewSettings.newPropertyOnDatabase"},changePropertyType:{defaultMessage:"Change property type",id:"database.viewSettings.changePropertyType"},selectToAddNewProperty:{defaultMessage:"Select to add",id:"database.viewSettings.selectToAdd"},newPill:{defaultMessage:"New",id:"database.viewSettings.newHighlightedFeature"},duplicateGithubPropertyTooltip:{defaultMessage:"A database can only have one GitHub Pull Requests property",id:"database.viewSettings.propertyTab.duplicateGithubProperty.tooltip"},wikiGithubPropertyTooltip:{defaultMessage:"A wiki cannot have a GitHub Pull Requests property",id:"database.viewSettings.propertyTab.wikiGithubProperty.tooltip"},syncedDatabaseGithubPropertyTooltip:{defaultMessage:"A synced database cannot have a GitHub Pull Requests property",id:"database.viewSettings.propertyTab.syncedDatabaseGithubProperty.tooltip"},nonMeetingsCronPropertyTooltip:{defaultMessage:"The Cron Calendar property can only be added to a Meetings database",id:"database.viewSettings.propertyTab.nonMeetingsCronProperty.tooltip"},duplicateCronEventPropertyTooltip:{defaultMessage:"A database can only have one Cron Calendar event property",id:"database.viewSettings.propertyTab.duplicateCronEventProperty.tooltip"},upgradeRequired:{defaultMessage:"Please upgrade to use this property",id:"database.viewSettings.propertyTab.upgradeRequired"},selectType:{defaultMessage:"Select type",id:"database.viewSettings.propertyTabGrid.selectType"}}),ct=(0,A().YK)({text:{defaultMessage:"Add text that can be formatted. Great for summaries, notes, or descriptions.",id:"database.viewSettings.propertyTab.textProperty.tooltip"},number:{defaultMessage:"Accepts numbers. These can also be formatted as currency or progress bars. Useful for tracking counts, prices, and completion.",id:"database.viewSettings.propertyTab.numberProperty.tooltip"},select:{defaultMessage:"Select one option from a list of tags. Useful for categorization.",id:"database.viewSettings.propertyTab.selectProperty.tooltip"},multi_select:{defaultMessage:"Select one or more options from a list of tags. Useful for tagging items across multiple categories.",id:"database.viewSettings.propertyTab.multiSelectProperty.tooltip"},date:{defaultMessage:"Accepts a date or a date range (time optional). Useful for deadlines, especially with calendar and timeline views.",id:"database.viewSettings.propertyTab.dateProperty.tooltip"},formula:{defaultMessage:"Perform calculations based on other properties using Notion’s formula language.",id:"database.viewSettings.propertyTab.formulaProperty.tooltip"},relation:{defaultMessage:"Connect databases and mention database pages. Useful for connecting items across your workspace.",id:"database.viewSettings.propertyTab.relationProperty.tooltip"},rollup:{defaultMessage:"View and aggregate information about properties from relation properties. Useful for summarizing interconnected data.",id:"database.viewSettings.propertyTab.rollupProperty.tooltip"},person:{defaultMessage:"Tag anyone in your Notion workspace. Useful for assigning tasks or referencing relevant team members.",id:"database.viewSettings.propertyTab.personProperty.tooltip"},file:{defaultMessage:"Upload files and images for easy retrieval. Useful for storing documents and photos.",id:"database.viewSettings.propertyTab.filesProperty.tooltip"},checkbox:{defaultMessage:"Use a checkbox to indicate whether a condition is true or false. Useful for lightweight task tracking.",id:"database.viewSettings.propertyTab.checkboxProperty.tooltip"},url:{defaultMessage:"Accepts a link to a website and opens the link in a new tab when clicked.",id:"database.viewSettings.propertyTab.urlProperty.tooltip"},email:{defaultMessage:"Accepts an email address and launches your mail client when clicked.",id:"database.viewSettings.propertyTab.emailProperty.tooltip"},phone_number:{defaultMessage:"Accepts a phone number and prompts your device to call it when clicked.",id:"database.viewSettings.propertyTab.phoneNumberProperty.tooltip"},created_time:{defaultMessage:"Records the timestamp of an item’s creation. Auto-generated and not editable.",id:"database.viewSettings.propertyTab.createdTimeProperty.tooltip"},created_by:{defaultMessage:"Automatically records the person who created the item. Auto-generated and not editable.",id:"database.viewSettings.propertyTab.createdByProperty.tooltip"},last_edited_time:{defaultMessage:"Records the timestamp of an item’s last edit. Auto-updated and not editable.",id:"database.viewSettings.propertyTab.lastEditedTimeProperty.tooltip"},last_edited_by:{defaultMessage:"Records the person who edited the item last. Auto-updated and not editable.",id:"database.viewSettings.propertyTab.lastEditedByProperty.tooltip"},auto_increment_id:{defaultMessage:"Automatically creates a numerical ID for each item. IDs are unique and cannot be manually changed.",id:"database.viewSettings.propertyTab.uniqueIdProperty.tooltip"},status:{defaultMessage:"Track this item’s progress using status tags categorized by To-do, In progress, and Complete.",id:"database.viewSettings.propertyTab.statusProperty.tooltip"},verification:{defaultMessage:"Indicate whether a page has been verified by the page owner, with the option to set an expiration date.",id:"database.viewSettings.propertyTab.verificationProperty.tooltip"},button:{defaultMessage:"Trigger actions based on the item properties.",id:"database.viewSettings.propertyTab.buttonProperty.tooltip"},ai_summary:{defaultMessage:"Text property with AI summary set up for you. Generates a summary based on page content and properties.",id:"database.viewSettings.propertyTab.aiSummaryProperty.tooltip"},ai_translate:{defaultMessage:"Text property with AI translate set up for you. Translate a property to another language using AI. ",id:"database.viewSettings.propertyTab.aiTranslateProperty.tooltip"},ai_category:{defaultMessage:"Select property that automatically adds tags based on the page content and properties.",id:"database.viewSettings.propertyTab.aiCategoryProperty.tooltip"},ai_keywords:{defaultMessage:"Multi-select property that automatically adds tags based on the page content and properties.",id:"database.viewSettings.propertyTab.aiKeywordsProperty.tooltip"},ai_custom_prompt:{defaultMessage:"Text property with a custom AI prompt. Generate content based on the page content and properties.",id:"database.viewSettings.propertyTab.aiCustomPromptProperty.tooltip"},ai_extract:{defaultMessage:"Text property with a custom AI prompt. Extract key info based on the page content and properties.",id:"database.viewSettings.propertyTab.aiExtractProperty.tooltip"},title:{defaultMessage:"Add a title for your database item. This determines the page’s title.",id:"database.viewSettings.propertyTab.titleProperty.tooltip"},location:{defaultMessage:"Display the location of which database this item belongs to.",id:"database.viewSettings.propertyTab.locationProperty.tooltip"},last_visited_time:{defaultMessage:"Records the timestamp of the last time you visited this page. Auto-updated and not editable.",id:"database.viewSettings.propertyTab.lastVisitedTimeProperty.tooltip"},place:{defaultMessage:"Display a physical location on a map.",id:"database.viewSettings.propertyTab.placeProperty.tooltip"}});function ut(e){let{environment:t,collectionContextStore:o,appConfig:i}=e;const n=(0,r().K8)((()=>{const e=o.collectionStore();return Boolean(e&&(0,oe().jq)(t,Te().A.getMode(t,e),e))}),[t,o]),a=(0,r().K8)((()=>{var e,t;if(!n)return!1;if(void 0!==i)return!1;if(null===(e=o.collectionStore())||void 0===e||!e.getName())return!1;const r=null===(t=o.collectionStore())||void 0===t?void 0:t.getSchema();return!(r&&(0,C().uv)(r).length>u().Hm)&&(0,oe().QV)()}),[n,i,o]);return{hasAiEnabled:n,showAiSuggestions:a}}},393695:(e,t,o)=>{o.d(t,{Y:()=>l});var i=()=>o(484714),n=()=>o(56366),r=()=>o(200277),a=()=>o(265793);function l(e){const t=(0,i().v3)();return(0,a().b)(e),(0,n().K8)((()=>{const o=e.collectionStore();return o?(0,r().N)(t,o):[]}),[t,e])}},412237:(e,t,o)=>{o.r(t),o.d(t,{aiFaceSmallIcon:()=>r,iconDefinition:()=>n});o(296540);var i=o(474848);const n={viewBox:"0 0 16 16",fittedViewBox:"2.89 1.43 11.63 12.81",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M7.204 1.93a3.47 3.47 0 0 0-4.097.39.625.625 0 1 0 .834.931 2.22 2.22 0 0 1 3.16.202.625.625 0 0 0 .944-.818 3.5 3.5 0 0 0-.84-.705m6.018.976A3.47 3.47 0 0 0 8.463 4.1l-5.077 8.476a.625.625 0 0 0 .437.938l4.41.715a.625.625 0 0 0 .2-1.234l-3.5-.568 4.602-7.685a2.22 2.22 0 0 1 3.822.02.625.625 0 1 0 1.08-.63 3.46 3.46 0 0 0-1.214-1.226m-7.83 2.105a1.094 1.094 0 1 0-.35 2.159 1.094 1.094 0 0 0 .35-2.159"}),(0,i.jsx)("path",{d:"M10.762 5.881a1.093 1.093 0 1 0-.35 2.159 1.093 1.093 0 0 0 .35-2.159"})]})},r=(0,o(340498).wt)("aiFaceSmall",n)},551882:(e,t,o)=>{o.d(t,{A:()=>c});o(296540);var i=()=>o(484714),n=()=>o(56366),r=()=>o(959013),a=()=>o(68465),l=()=>o(765957),s=()=>o(411671),p=()=>o(464708),d=o(474848);function c(e){const{message:t}=e,o=(0,i().v3)();return(0,n().K8)((()=>{const e=l().default.state.mainEditorCurrentBlockStore,t=e&&s().A.getMode(o,e);return(0,a().ZE)(t)}),[o])?(0,d.jsx)(p().A,{color:"purple",style:{padding:"1px 4px",display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,...e.style},content:t??(0,d.jsx)(r().sA,{id:"aiBadgeComponent.label",defaultMessage:"AI"})}):null}},759709:(e,t,o)=>{o.d(t,{O:()=>l});var i=o(296540),n=()=>o(484714),r=()=>o(56366),a=()=>o(2220);function l(e){let{collectionContextStore:t,shownTemplateIds:o,origin:l}=e;const s=(0,n().v3)(),p=(0,r().K8)((()=>{var e;return null===(e=t.collectionStore())||void 0===e?void 0:e.getWorkflowTemplateId()}),[t]),d=(0,i.useRef)(!1);(0,i.useEffect)((()=>{!d.current&&o.length>0&&((0,a().u)({environment:s,event:{eventName:"suggested_feature_templates_shown",eventProperties:{origin:l,collection_template_id:p,template_ids_shown:o}}}),d.current=!0)}))}},878665:(e,t,o)=>{o.d(t,{A:()=>d});var i=o(296540),n=()=>o(401497),r=()=>o(381349),a=()=>o(859428),l=()=>o(103448),s=()=>o(962730),p=o(474848);function d(e){const{render:t,showImage:o,caption:d,description:c,tooltipImage:u,placement:y,tooltipDelayThreshold:g,hideTooltipBeforeImageLoaded:m,imageContainerStyle:f}=e,S=e.tooltipImageScale||1,[b,h]=i.useState(!1),[v,T]=i.useState({width:0,height:0});i.useEffect((()=>{if(u){const e=new Image;e.src=u,e.onload=()=>{T({width:"number"==typeof S?e.width*S:S.widthPx,height:"number"==typeof S?e.width*S:S.heightPx}),h(!0)}}}),[u,S]);const w=(0,n().IS)((()=>({tooltip:{whiteSpace:"break-spaces"},description:{fontWeight:"normal",color:r().Ay.uiLightGray}})),[]),_=(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{children:d}),c&&(0,p.jsx)("div",{style:w.description,children:c})]});return(0,p.jsx)(a().A,{placement:y??s().W.Left,disableTooltip:void 0===d||!b&&m,delayThreshold:g,style:w.tooltip,render:t,renderTooltip:()=>u&&b&&o?(0,p.jsx)(l().A,{caption:_,imageURL:u,imageWidth:v.width,imageHeight:v.height,imageContainerStyle:f}):_})}}}]);