"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[87137],{267299:(e,t,a)=>{a.r(t),a.d(t,{TabSpacesPopup:()=>Q});var n=a(296540),i=()=>a(484714),o=()=>a(56366),s=()=>a(175947),c=()=>a(897119),r=()=>a(644914),p=()=>a(962730),l=()=>a(377586),u=()=>a(948914),d=()=>a(730591),g=(a(581454),()=>a(396182)),b=()=>a(401497),m=()=>a(859384),h=()=>a(424139),S=()=>a(340498),x=a(474848);const f={viewBox:"0 0 20 20",fittedViewBox:"0.5 4.12 17.13 15.38",svg:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125H8.598a4.6 4.6 0 0 0-.207-1.25H15.5a.875.875 0 0 0 .875-.875v-7.5a.875.875 0 0 0-.875-.875h-11a.875.875 0 0 0-.875.875v5.165a4.6 4.6 0 0 0-1.25.28z"}),(0,x.jsx)("path",{d:"M4 19.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m-1.969-4.094h1.375v-1.375a.625.625 0 1 1 1.25 0v1.375h1.375a.625.625 0 1 1 0 1.25H4.656v1.375a.625.625 0 1 1-1.25 0v-1.375H2.031a.625.625 0 1 1 0-1.25"})]})},y=(0,S().wt)("rectanglePlus",f),v={viewBox:"0 0 20 20",fittedViewBox:"0.5 1.99 16.54 17.51",svg:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("path",{d:"M6.75 2.545a.55.55 0 0 1 .55-.55h5.4a.55.55 0 0 1 0 1.1H7.3a.55.55 0 0 1-.55-.55m-1.25 1.7a.55.55 0 1 0 0 1.1h9a.55.55 0 0 0 0-1.1zm-2.537 4.3c0-1.174.951-2.125 2.125-2.125h9.825c1.174 0 2.125.951 2.125 2.125v6.45a2.125 2.125 0 0 1-2.125 2.125h-6.45a4.6 4.6 0 0 0 .135-1.25h6.315a.875.875 0 0 0 .875-.875v-6.45a.875.875 0 0 0-.875-.875H5.088a.875.875 0 0 0-.875.875v2.86a4.7 4.7 0 0 0-1.25.112z"}),(0,x.jsx)("path",{d:"M2.963 12.656A3.502 3.502 0 0 0 4 19.5a3.5 3.5 0 1 0-1.037-6.844m-1.557 3.375c0-.345.28-.625.625-.625h1.375v-1.375a.625.625 0 0 1 1.25 0v1.375h1.375a.625.625 0 0 1 0 1.25H4.656v1.375a.625.625 0 1 1-1.25 0v-1.375H2.031a.625.625 0 0 1-.625-.625"})]})},M=(0,S().wt)("rectangleStackBadgePlus",v);var T=()=>a(858141),w=()=>a(236262),j=()=>a(959013),k=()=>a(284371),C=()=>a(874913),I=()=>a(383594),A=()=>a(439264),R=()=>a(805751),B=()=>a(928600),P=()=>a(939740),E=()=>a(89924),D=()=>a(722872);function G(e){return{icon:{height:20,width:20,fill:e.icon.primary},buttonList:{display:"flex",flexDirection:"column",gap:2},button:{width:"100%",borderRadius:6},tabSpaceButton:{display:"flex",fontSize:14,height:28,paddingLeft:10,paddingRight:10,color:e.text.primary,alignItems:"center",justifyContent:"space-between",maxWidth:250,width:"100%"},tabSpaceLabelWrapper:{display:"flex",alignItems:"center",flex:1,minWidth:0,gap:8,height:"100%"},tabSpaceTitleText:{display:"flex",alignItems:"center",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",lineHeight:0,height:"100%"},currentSelectedTabSpace:{background:e.sidebarItemSelectedBackground,color:e.text.primary,borderRadius:6},tabSpaceIcon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:22,height:18},rightIconWrapper:{display:"flex",alignItems:"center",justifyContent:"center",gap:4,marginLeft:6}}}var F=()=>a(11356),O=()=>a(498212),W=()=>a(623580),H=()=>a(187820);function z(e){let{mode:t,setMode:a,originRect:i,tabSpaceId:o,initialTitle:s,initialIcon:r,onSave:u,isCreate:d,onCancel:g}=e;const[m,h]=(0,n.useState)({title:s,icon:r});(0,n.useEffect)((()=>{h({icon:r,title:s})}),[r,s]);const S=(0,b().IS)((e=>({...G(e),wrapper:{display:"flex",alignItems:"center",color:e.text.primary,fontSize:14,padding:"4px 8px",width:250},iconButton:{width:28,height:28,marginRight:6,flexShrink:0,flexGrow:0,boxShadow:`inset 0 0 0 1px ${e.darkDividerColor}`},input:{display:"block",flexGrow:1,fontSize:14,lineHeight:"20px",paddingTop:4,paddingBottom:4,paddingLeft:10,paddingRight:10,width:"100%",borderRadius:4,boxShadow:e.inputBoxShadow,background:e.inputBackground,cursor:"text",position:"relative"}})),[]),f=(e,t)=>{u(m.title,t?void 0:e??m.icon,o),h({title:void 0,icon:void 0})},y=e=>{var t;const a=void 0===e;h((t=>({...t,icon:e}))),null!==(t=m.title)&&void 0!==t&&t.length&&f(e,a)},v=e=>{h((t=>({...t,title:e.target.value})))},M=e=>{"Enter"===e.key&&(e.preventDefault(),f())},T=(0,n.useMemo)((()=>{if(void 0!==m.icon)return{icon:m.icon,pointer:{table:"block",id:(0,O().Ay)()}}}),[m.icon]);return(0,x.jsx)(c().Ay,{popupType:l().n.Popup,render:()=>(0,x.jsx)(B().A,{menuType:D().gu.Popup,children:(0,x.jsx)(R().A,{debugName:"RenameTabSpacePopup",capture:!0,allowMenuList:!1,allowEsc:!0,children:(0,x.jsxs)("div",{style:S.wrapper,children:[(0,x.jsx)(H().B6,{disabled:!1,bucket:"public",icon:T,defaultIcon:(0,F().G)(S.icon),isEmptyPage:!1,size:18,onChange:y,style:S.iconButton,mediaPickerTabs:["emoji"],hideCustomEmoji:!0,openMenuOnMount:"icon"===t}),(0,x.jsx)(W().A,{value:m.title,onFocus:()=>a("rename"),onChange:v,onKeyDown:M,autoFocus:"rename"===t,maxlength:40,style:S.input})]})})}),open:Boolean(t),originRect:i,placementToOrigin:d?p().W.Bottom:p().W.Center,alignmentToOrigin:p().C.Center,onDismiss:e=>{if("Escape"===e.key)return g(),void h({title:void 0,icon:void 0});f()},trapFocus:!0})}var L=()=>a(126617),K=()=>a(760217),N=()=>a(285790);const V=(0,j().YK)({more:{id:"tabSpacesMenuItem.more",defaultMessage:"More"}});function Y(e){let{label:t,icon:a,rightOnClick:i,...o}=e;const{isChecked:s,...c}=o,r=(0,j().tz)(),p=(0,n.useRef)(null),[l,u]=(0,n.useState)(!1),d=(0,b().IS)((e=>({...G(e),ellipsisButton:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:4,marginLeft:4},ellipsisButtonIcon:{height:S().Ev.sm,width:S().Ev.sm}})),[]);return(0,x.jsx)(K().A,{...c,ref:p,style:{...s?d.currentSelectedTabSpace:{}},onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),title:t,icon:a||(0,F().G)(d.icon),right:l&&i?(0,x.jsx)("div",{style:d.tabSpaceIcon,children:(0,x.jsx)(N().A,{icon:L().Y,ariaLabel:r.formatMessage(V.more),style:d.ellipsisButton,iconStyle:d.ellipsisButtonIcon,onClick:e=>{e.stopPropagation(),p.current&&i(e,p.current.getBoundingClientRect())}})}):void 0,ignoreLocalHoverState:!1})}const $=(0,j().YK)({newGroupFromTabs:{id:"tabSpacesMenu.newGroupFromTabs",defaultMessage:"New group from {count} {count, plural, one {tab} other {tabs}}"},newEmptyGroup:{id:"tabSpacesMenu.newEmptyGroup",defaultMessage:"New empty group"},thisWindow:{id:"tabSpacesMenu.thisWindow",defaultMessage:"This window"},ungroupedTabs:{id:"tabSpacesMenu.ungroupedTabs",defaultMessage:"{count} ungrouped {count, plural, one {tab} other {tabs}}"},tabGroups:{id:"tabSpacesMenu.tabGroups",defaultMessage:"Tab groups"},tabSpaceActionChangeIcon:{id:"tabSpacesMenu.changeIcon",defaultMessage:"Change icon"},tabSpaceActionRename:{id:"tabSpacesMenu.tabSpaceActionRename",defaultMessage:"Rename tab group"},tabSpaceActionDelete:{id:"tabSpacesMenu.tabSpaceActionDelete",defaultMessage:"Delete tab group"}});function _(e){let{tabSpacesState:t}=e;const a=(0,n.useRef)(null),{tabSpaces:i,orderedTabSpaceIds:o,activeTabSectionId:s,ungroupedTabCount:c}=t,r=(0,j().tz)(),p=(0,g().I)(),[l,u]=(0,n.useState)(),[m,h]=(0,n.useState)(),[S,f]=(0,n.useState)(!1),[v,w]=(0,n.useState)(),[F,O]=(0,n.useState)(void 0),[W,H]=(0,n.useState)(void 0),L=o.length>0,K=c>0,N=Boolean(!L&&!F),V=(0,n.useMemo)((()=>l?i[l]:void 0),[i,l]),_=(0,n.useCallback)(((e,t)=>{h(e),u(t)}),[h,u]),q=(0,n.useCallback)((()=>{h(void 0),u(void 0)}),[h,u]),Q=(0,n.useCallback)((e=>{w(e),f(!0)}),[w,f]),U=(0,n.useCallback)((()=>{f(!1),w(void 0)}),[f,w]),X=(0,n.useCallback)((()=>{q(),O(void 0),H(void 0),I().I()}),[q,O,H]),Z=(0,n.useCallback)((()=>{d().A.update((e=>({...e,open:!1})))}),[]),ee=(0,n.useCallback)(((e,t,a)=>{if(X(),e)if(a)C().tabSpacesState.updateTabSpaceMetadata(a,{title:e,icon:t});else{const a="ungroupedTabs"===W?"ungroupedTabs":"empty";C().tabSpacesState.createTabSpace({title:e,icon:t,source:a})}}),[X,W]),te=(0,n.useCallback)((e=>{if(!a.current)return;const t=a.current.getBoundingClientRect();N&&(t.y+=30),_(t,void 0),H(e),O("rename")}),[_,H,O,N]),ae=(0,n.useCallback)((e=>{C().tabSpacesState.setActiveTabSection(e),Z()}),[Z]),ne=(0,b().IS)((e=>({...G(e),modal:{minWidth:230,maxHeight:"70vh"},sectionHeader:{color:e.text.secondary,fontSize:12,fontWeight:k().Wy.medium,padding:"6px 8px 4px 12px"}})),[]),ie=(0,n.useMemo)((()=>({"ungrouped-section":{key:"ungrouped-section",items:[{key:"ungrouped-section-item",action:()=>{ae("ungrouped")},render:e=>(0,x.jsx)(Y,{...e,label:r.formatMessage($.ungroupedTabs,{count:c}),icon:(0,T().p)(ne.icon),isChecked:"ungrouped"===s})}],render:e=>(0,x.jsx)(E().A,{...e,title:r.formatMessage($.thisWindow)})},"tab-spaces-section":{key:"tab-spaces-section",items:o.map((e=>({key:e,action:()=>{ae(e)},render:t=>{const a=i[e];return a?(0,x.jsx)(Y,{...t,label:a.title,icon:a.icon,isChecked:s===e,rightOnClick:(t,a)=>{Q(t.currentTarget.getBoundingClientRect()),_(a,e)}}):null}}))),render:e=>{const{children:t,...n}=e;return(0,x.jsxs)(E().A,{...n,title:r.formatMessage($.tabGroups),hideTitle:N,topBorder:L,children:[L&&(0,x.jsx)(A().Ay,{style:ne.buttonList,shouldAnimateDrop:!0,direction:"vertical",keys:o,renderKey:e=>t[o.indexOf(e)],onDrop:e=>{C().tabSpacesState.reorderTabSpaces(e)},onDragEnd:()=>p("TabSpacesMenu","TabSpacesMenu/onDragEnd")}),(0,x.jsx)("div",{ref:a,style:{height:W?36:0}})]})}},"tab-spaces-create-section":{key:"tab-spaces-create-section",items:[...K?[{key:"new-tab-space-from-ungrouped",action:()=>{te("ungroupedTabs")},render:e=>(0,x.jsx)(Y,{...e,icon:M(ne.icon),label:r.formatMessage($.newGroupFromTabs,{count:c})})}]:[],{key:"new-empty-tab-space",action:()=>{te("emptyTabSpace")},render:e=>(0,x.jsx)(Y,{...e,label:r.formatMessage($.newEmptyGroup),icon:y(ne.icon)})}],render:e=>(0,x.jsx)(E().A,{topBorder:!N,...e})}})),[s,ae,W,c,ne,r,N,L,K,te,Q,o,p,_,i]),oe=(0,n.useMemo)((()=>{const e=["tab-spaces-section","tab-spaces-create-section"];return L&&e.unshift("ungrouped-section"),e.map((e=>ie[e]))}),[ie,L]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{style:ne.modal,children:(0,x.jsx)(R().A,{debugName:"TabSpacesMenu",capture:!0,allowEsc:!0,children:(0,x.jsx)(B().A,{menuType:D().gu.Popup,children:(0,x.jsx)(P().Ay,{type:P().Oh.Vertical,initialFocus:void 0,sections:oe})})})}),(0,x.jsx)(J,{open:S,originRect:v,tabSpaceId:l,onDismiss:U,setRenameTabSpacePopupMode:O,closeTabSpacesMenu:Z}),(0,x.jsx)(z,{mode:F,setMode:O,originRect:m,tabSpaceId:l,initialTitle:(null==V?void 0:V.title)||"",initialIcon:null==V?void 0:V.icon,isCreate:Boolean(W),onSave:ee,onCancel:X})]})}function q(e){let{setRenameTabSpacePopupMode:t,tabSpaceId:a,closeSecondaryPopup:i,closeTabSpacesMenu:o}=e;const s=(0,j().tz)(),c=(0,b().IS)((e=>({...G(e),modal:{width:200}})),[]),r=(0,n.useCallback)((e=>{t(e),i()}),[i,t]),p=(0,n.useMemo)((()=>[{key:"tab-space-actions",items:[{key:"tab-space-action-change-icon",action:()=>{r("icon")},render:e=>(0,x.jsx)(Y,{...e,label:s.formatMessage($.tabSpaceActionChangeIcon),icon:(0,h().emojiFaceIcon)(c.icon)})},{key:"tab-space-action-rename",action:()=>{r("rename")},render:e=>(0,x.jsx)(Y,{...e,label:s.formatMessage($.tabSpaceActionRename),icon:(0,m().M)(c.icon)})}],render:e=>(0,x.jsx)(E().A,{...e})},{key:"tab-space-delete",items:[{key:"tab-space-action-delete",action:()=>{a&&(C().tabSpacesState.deleteTabSpace(a),i(),o())},render:e=>(0,x.jsx)(Y,{...e,label:s.formatMessage($.tabSpaceActionDelete),icon:(0,w().trashIcon)(c.icon)})}],render:e=>(0,x.jsx)(E().A,{topBorder:!0,...e})}]),[a,i,o,s,c,r]);return a?(0,x.jsx)("div",{style:c.modal,children:(0,x.jsx)(R().A,{debugName:"TabSpacesSecondaryMenu",capture:!0,allowEsc:!0,children:(0,x.jsx)(B().A,{menuType:D().gu.Popup,children:(0,x.jsx)(P().Ay,{type:P().Oh.Vertical,initialFocus:void 0,sections:p})})})}):null}function J(e){let{open:t,setRenameTabSpacePopupMode:a,originRect:n,tabSpaceId:i,onDismiss:o,closeTabSpacesMenu:s}=e;return(0,x.jsx)(c().Ay,{popupType:l().n.Popup,render:()=>(0,x.jsx)(q,{tabSpaceId:i,setRenameTabSpacePopupMode:a,closeSecondaryPopup:o,closeTabSpacesMenu:s}),open:t,originRect:n,placementToOrigin:p().W.Right,alignmentToOrigin:p().C.Start,originGap:8,onDismiss:o,trapFocus:!0})}function Q(){const e=(0,i().v3)(),[t,a]=(0,n.useState)(),{open:g,tabSpacesState:b}=(0,o().K8)((()=>d().A.getState()),[]),m=(0,o().O$)(u().b),h=(0,o().K8)((()=>(0,r().km)(e)),[e]);return(0,n.useEffect)((()=>{a(new DOMRect(h,m?0:(0,s().ek)(e.device.isElectronMac)+10,0,0))}),[h,m,e.device.isElectronMac]),b?(0,x.jsx)(c().Ay,{popupType:l().n.Popup,render:()=>(0,x.jsx)(_,{tabSpacesState:b}),open:g,originRect:t,placementToOrigin:p().W.Right,alignmentToOrigin:p().C.Start,originGap:10,onDismiss:()=>{d().A.update((e=>({...e,open:!1})))},trapFocus:!0,disableFlippingPlacement:!0}):null}}}]);