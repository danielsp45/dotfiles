"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[25957,28464,67608,82122],{346:(e,t,o)=>{o.d(t,{MG:()=>h,T1:()=>g,a1:()=>x,dt:()=>m,kg:()=>f,lC:()=>v,n_:()=>b});var n=o(296540),i=()=>o(484714),r=()=>o(56366),a=()=>o(187174),s=()=>o(645873),l=()=>o(941463),d=()=>o(441199),c=()=>o(749687),u=()=>o(737230),p=()=>o(756114);const g=new(s().O2)("PerformanceToolbar",(()=>Promise.all([o.e(16471),o.e(92845),o.e(84468),o.e(48632),o.e(75078),o.e(95168),o.e(36908),o.e(21194),o.e(23930),o.e(61347),o.e(45624)]).then(o.bind(o,462407)))),h=(0,s()._h)(g,(e=>e.PerformanceToolbar)),m=(0,s()._h)(g,(e=>e.PerformanceToolbarSettings));function f(){const e=(0,i().v3)();return(0,r().K8)((()=>(0,p().D)(e,e.RouterStore.state)),[e])}function b(){const e=(0,i().v3)(),t=y("PerformanceToolbarStore"),o=y("isPerformanceToolbarVisible");return(0,r().K8)((()=>!(!t||!o)&&o(e,e.RouterStore.state,t.state)),[o,e,t])}function v(){const e=y("PerformanceToolbarStore");return(0,r().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function x(){const e=(0,i().v3)(),t=y("createPerformanceToolbarMouseListeners"),o=y("PerformanceToolbarStore"),{sidebarExpanded:a,sidebarWidth:s,secondarySidebarExpanded:p,secondarySidebarWidth:g,updateSidebarExpanded:h,updateSidebarWidth:m}=(0,r().K8)((()=>({sidebarExpanded:c().sidebarExpandedStore.state,sidebarWidth:c().sidebarWidthStore.state,secondarySidebarExpanded:d().default.isOpen(),secondarySidebarWidth:l().Ay.getWidth(),updateSidebarExpanded:u().Ay.state.expanded,updateSidebarWidth:u().Ay.state.width})),[]);return(0,n.useEffect)((()=>{if(o&&t)return t(e,(e=>o.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),a,s,p,g,h,m)}),[t,e,o,a,s,p,g,h,m])}function y(e){const t=f(),[{value:o}]=(0,a().Yb)((()=>t?g.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return o}},29037:(e,t,o)=>{o.r(t),o.d(t,{checkmarkIcon:()=>i,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.92 3.91 12.17 12.18",svg:(0,o(474848).jsx)("path",{d:"M15.784 4.002a.625.625 0 0 1 .214.857L9.445 15.784a.625.625 0 0 1-1.01.085l-4.37-5.098a.625.625 0 0 1 .948-.814l3.806 4.44 6.109-10.181a.625.625 0 0 1 .857-.214"})},i=(0,o(340498).wt)("checkmark",n)},69447:(e,t,o)=>{o.d(t,{Lq:()=>n,WK:()=>r,nh:()=>i});const n=40,i=48,r=60},77279:(e,t,o)=>{o.r(t),o.d(t,{default:()=>i});class n extends(()=>o(757695))().Store{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const i=new n},97059:(e,t,o)=>{o.d(t,{W:()=>m,w:()=>h});o(944114);var n=()=>o(585515),i=()=>o(577449),r=()=>o(161479),a=()=>o(545285),s=()=>o(763824),l=()=>o(780054),d=()=>o(870618),c=()=>o(670631),u=()=>o(227440),p=()=>o(217429),g=()=>o(540758);async function h(e){const{environment:t}=e;return(await s().lX(Object.keys(c().A.state.offlinePages||{}),100,(e=>async function(e){const{environment:t,pageId:o}=e,s={page:{id:o,spaceId:(0,r().e)(void 0)},baseUrl:l().A.domainBaseUrl,publicDomainName:l().A.publicDomainName,shouldTraverseToggleBlocks:!0,limit:1/0,cursor:{stack:[]},verticalColumns:!1},c=[];return await n().T(s,i().h.sideEffect((e=>((0,a().u)(e)&&c.push(e.id),Promise.resolve())),i().h.fromMonomorphicFunctionUnsafe((async e=>{const o=await d().h7({environment:t,pointer:e,useInMemoryCacheOnly:!1,skipAccessWrites:!0});return null==o?void 0:o.model})))),c}({environment:t,pageId:e})))).flat()}function m(e,t){return!u().A.state.online&&(e.device.isElectron||e.device.isMobileNative)&&p().default.checkGate({gateName:"download_for_offline"})&&!(0,g().Bd)(t)}},115562:(e,t,o)=>{o.d(t,{W:()=>l});o(296540);var n=()=>o(819121),i=()=>o(401497),r=()=>o(955825),a=()=>o(677195),s=o(474848);function l(e){const{selectorSize:t="normal",...o}=e,{disabled:l,checked:d}=o,[c,u]=(0,n().A)(),p=function(e){const{checked:t,disabled:o,isFocusVisible:n,selectorSize:r}=e;return(0,i().IS)((e=>({root:{position:"absolute",display:"flex",width:"large"===r?15:11,height:"large"===r?15:11,margin:1.5,justifyContent:"center",alignItems:"center",flexShrink:0,borderRadius:"large"===r?2:1,transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${o?e.tint.regular:e.blueColor}`,background:o?e.tint.regular:e.blueColor}:{boxShadow:`0 0 0 1.5px ${o?e.icon.quaternary:e.stroke.input}`,background:e.surface.page},...n&&{boxShadow:e.buttonBlueFocusRing}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"large"===r?18:void 0,height:"large"===r?18:void 0,...o?{pointerEvents:"none"}:{cursor:"pointer"}},icon:{color:e.text.contrastPrimary,width:"large"===r?12:10,height:"large"===r?12:10,ariaHidden:!0}})),[r,t,o,n])}({checked:d,disabled:l,selectorSize:t,isFocusVisible:u});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{ref:c,type:"checkbox",style:p.input,...o}),(0,s.jsx)("span",{...(0,r().AH)(p.root,l?{}:{pseudoActive:p.active}),children:d&&(0,a().R)(p.icon)})]})}},149375:(e,t,o)=>{o.d(t,{v:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("arrowLeftThick",{viewBox:"0 0 16 16",directional:!0,svg:(0,n.jsx)("path",{d:"M1.54004 8.05762C1.54004 8.2627 1.62891 8.46094 1.78613 8.61133L6.29102 13.1162C6.45508 13.2734 6.63965 13.3486 6.82422 13.3486C7.25488 13.3486 7.5625 13.041 7.5625 12.6309C7.5625 12.4189 7.48047 12.2344 7.34375 12.1045L5.8125 10.5527L3.78906 8.70703L5.38867 8.80273H13.7012C14.1455 8.80273 14.46 8.49512 14.46 8.05762C14.46 7.61328 14.1455 7.3125 13.7012 7.3125H5.38867L3.7959 7.4082L5.8125 5.5625L7.34375 4.01074C7.48047 3.87402 7.5625 3.68945 7.5625 3.47754C7.5625 3.06738 7.25488 2.7666 6.82422 2.7666C6.63965 2.7666 6.45508 2.83496 6.27734 3.00586L1.78613 7.50391C1.62891 7.64746 1.54004 7.85254 1.54004 8.05762Z"})})},175116:(e,t,o)=>{o.d(t,{ET:()=>l,Ks:()=>d,RI:()=>s,p2:()=>a});o(16280);var n=o(296540);const i="collectionContextStore",r=(0,o(446943).C)({displayName:i,legacyContextKey:i,modernContextDefaultValue:void 0}),a=r.context,s=r.Provider;function l(){const e=n.useContext(a);if(void 0===e)throw new Error(`No context provided: ${i}`);return e}function d(){return n.useContext(a)}},255824:(e,t,o)=>{o.d(t,{a:()=>r});var n=()=>o(56366);const i=new(o(496506).ComputedStore)((()=>o(263711).g.state.isOpen),{debugName:"IsInPageViewModeStore"});function r(){return(0,n().O$)(i)}},256863:(e,t,o)=>{o.d(t,{A:()=>a});o(296540);var n=()=>o(56366),i=()=>o(824862),r=o(474848);const a=function(e){const{botValue:t,botStore:a,showActiveDot:s,style:l,size:d}=e,c=(0,o(959013).tz)(),u=(0,n().K8)((()=>{if(a){const e=a.getIcon();if(e)return{pointer:{table:i().GP,id:a.id,spaceId:a.getSpaceId()},icon:e}}else if(null!=t&&t.icon)return{pointer:{table:i().GP,id:t.id,spaceId:t.space_id},icon:t.icon}}),[a,t]),p=(0,n().K8)((()=>(null==a?void 0:a.getDisplayName(c))??(0,o(799288).Hg)(t)),[a,t,c]),{activeDotStyle:g}=(0,o(401497).IS)((e=>({activeDotStyle:{height:10,width:10,backgroundColor:e.palette.green[400],border:"2px solid white",borderRadius:"50%",position:"absolute",left:11,top:11}})),[]);return(0,r.jsxs)("div",{style:l,children:[(0,r.jsx)(o(187820).B6,{icon:u,title:p,size:d||18,disabled:!0,isEmptyPage:!1,useInvertedColors:!0}),s?(0,r.jsx)("div",{style:g}):void 0]})}},398217:(e,t,o)=>{o.d(t,{Jv:()=>f,Rl:()=>b,mA:()=>m});var n=o(296540),i=()=>o(484714),r=()=>o(56366),a=()=>o(401497),s=()=>o(970013),l=()=>o(743176),d=()=>o(780054),c=()=>o(68465),u=()=>o(159588),p=()=>o(963589),g=o(474848);const h=function(){return(0,g.jsx)(o(464708).A,{color:"purple",style:{marginLeft:6,padding:"1px 4px",display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1},content:(0,g.jsx)(o(959013).sA,{defaultMessage:"AI",id:"database.property.aiAutofillEnabledIndicator"})})};const m=n.memo((function(e){const{propertySchema:t,showIcon:n,showDragIcon:i,hideName:r,badge:s,style:l,iconStyle:c,iconSize:p,dragHandleStyle:h,className:m,labelSizeVariant:f}=e,v=d().A.isMobile?16:14,x=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",lineHeight:"120%",minWidth:0,fontSize:v,...l},iconWrapper:{display:"grid",justifyContent:"center",alignItems:"center",marginRight:r?void 0:"small"===f||i?4:d().A.isMobile?9:6,...c},dragHandle:{gridColumn:1,gridRow:1,opacity:i?1:0,transition:`opacity ${u().bM}`},itemIcon:{gridColumn:1,gridRow:1,opacity:i?0:1,transition:`opacity ${u().bM}`},dragIcon:{fill:e.icon.secondary}})),[v,r,c,f,i,l]);return(0,g.jsxs)("div",{className:m,style:x.container,children:[n&&(0,g.jsxs)("div",{style:x.iconWrapper,children:[(0,g.jsx)("div",{style:x.itemIcon,children:(0,g.jsx)(b,{propertySchema:t,iconSize:p,iconStyle:c})}),(0,g.jsx)("div",{style:x.dragHandle,children:(0,g.jsx)(o(57232).A,{style:h,iconSize:12,iconStyle:x.dragIcon})})]}),!r&&(0,g.jsx)("div",{style:{...o(284371).RC},children:t.name}),s]})}));function f(e){const{propertySchema:t}=e,o=(0,i().v3)();return(0,r().K8)((()=>(0,c().O0)(o)&&s().$M(t)&&s().om(t)),[o,t])?(0,g.jsx)(h,{}):null}function b(e){const{propertySchema:t,iconSize:o,iconStyle:n}=e,i=(0,a().DP)(),r=(0,p().X)("nds_default_property_noticon"),s=d().A.isMobile?18:16;return(0,g.jsx)(l().zB,{type:t.type,icon:t.icon,size:o||s,theme:i,style:n,isDefaultNoticonEnabled:r})}},413267:(e,t,o)=>{o.d(t,{b:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("thinCheck",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M6.385 14.162c.362 0 .642-.15.84-.444L13.652 3.71c.144-.226.205-.417.205-.602 0-.485-.341-.82-.833-.82-.335 0-.54.123-.746.444l-5.926 9.4-3.042-3.903c-.205-.267-.417-.376-.718-.376-.492 0-.848.348-.848.827 0 .212.075.417.253.629l3.541 4.416c.24.3.492.437.848.437z"})})},454531:(e,t,o)=>{o.d(t,{W:()=>m});var n=()=>o(780054),i=()=>o(972435),r=()=>o(867772),a=()=>o(681810),s=()=>o(901389),l=()=>o(896628),d=()=>o(383594),c=()=>o(675925),u=()=>o(751156),p=()=>o(892632);const g=1500,h=(0,o(959013).YK)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},preparing:{defaultMessage:"Preparing...",id:"pageCover.status.preparing"},downloading:{defaultMessage:"Downloading...",id:"pageCover.status.downloading"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image link…",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function m(e){let{environment:t,intl:o,store:n,rect:i,from:r}=e;d().W(t,{originGap:3,originRect:i,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:o.formatMessage(h.pageCover),onDelete:()=>{!function(e){let{environment:t,store:o}=e;d().I(),u().createAndCommit({userAction:"PageCover.handleDelete",environment:t,canUndo:!0,perform:e=>{l().PT({store:o,transaction:e})}})}({environment:t,store:n})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:o,position:i}=e;(0,c().o)(t,{action:"edit_cover",block_type:"page",from:r},(e=>{b({environment:t,store:n,url:{originUrl:o},position:i}),e()}))}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:o.formatMessage(h.fileTypeCaption,{idealImageWidth:g}),onUpload:e=>{(0,c().o)(t,{action:"edit_cover",block_type:"page",from:r},(i=>{var r;d().I(),p().QM({environment:t,file:e[0],bucket:"secure",record:(null===(r=n.getCoverStore())||void 0===r?void 0:r.pointer)??n.pointer,isFileBlock:!1,reportRichUploadMetrics:!0,onStart:v,onProgress:x,onComplete:e=>{var o;o={environment:t,store:n,url:{originUrl:e}},f({...o,position:.5})},onError:()=>{s().f1(o.formatMessage(h.uploadFailed))}}),i()}))}},{type:"embed",title:o.formatMessage(h.embedTitle),inputPlaceholder:o.formatMessage(h.embedPlaceholder),caption:o.formatMessage(h.embedCaption),buttonText:o.formatMessage(h.embedSubmit),onChange:e=>{(0,c().o)(t,{action:"edit_cover",block_type:"page",from:r},(o=>{var i;i={environment:t,store:n,url:e},f({...i,position:.5}),d().I(),o()}))}},{type:"unsplash",onChange:e=>{let{url:o,position:i}=e;(0,c().o)(t,{action:"edit_cover",block_type:"page",from:r},(e=>{b({environment:t,store:n,url:{originUrl:o},position:i}),e()}))}}]})}async function f(e){const{environment:t,store:o,url:n,position:s}=e,{serverCommitResult:d}=u().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{l().fg({store:o,url:n,position:s||.5,transaction:e})}});await d,a().A.state.loadingMode===r().vS&&a().A.setState({loadingMode:r().Gi,dataURL:a().A.state.dataURL,uploadProgress:t.device.isMobileNative?void 0:100,progressText:i().A.formatMessage(h.downloading)})}function b(e){f(e),n().A.isMobile&&d().I()}function v(e){const{file:t,name:o,size:n}=e;if(d().I(),a().A.setState({loadingMode:r().Wc,file:t,name:o,size:n}),t.type.indexOf("image")>=0)if(t instanceof File){const e=new FileReader;e.onload=e=>{a().A.state.loadingMode===r().Wc&&a().A.setState({...a().A.state,loadingMode:r().vS,uploadProgress:0,dataURL:e.target.result})},e.readAsDataURL(t)}else a().A.state.loadingMode===r().Wc&&a().A.setState({...a().A.state,loadingMode:r().vS,dataURL:t.dataURL,progressText:i().A.formatMessage(h.preparing)});else a().A.state.loadingMode===r().Wc&&a().A.setState({...a().A.state,loadingMode:r().vS,progressText:i().A.formatMessage(h.preparing)})}function x(e){const{progressPercent:t,progressText:o}=e;a().A.state.loadingMode===r().vS&&a().A.setState({...a().A.state,uploadProgress:t,progressText:o})}},505108:(e,t,o)=>{o.d(t,{a:()=>g});var n=o(296540),i=()=>o(401497),r=()=>o(534177),a=()=>o(284371),s=()=>o(84817),l=()=>o(819121),d=()=>o(955825),c=o(474848);function u(e){const{disabled:t,checked:o,selectorSize:n}=e,[r,a]=(0,l().A)(),s=function(e){const{checked:t,disabled:o,isFocusVisible:n,selectorSize:r}=e;return(0,i().IS)((e=>({root:{position:"absolute",display:"flex",width:15,height:15,padding:5,margin:1.5,justifyContent:"center",alignItems:"center",gap:8,flexShrink:0,borderRadius:"50%",transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${o?e.tint.regular:e.blueColor}`,background:o?e.tint.regular:e.blueColor}:{boxShadow:`0 0 0 1.5px ${o?e.icon.quaternary:e.stroke.input}`,background:e.surface.page},...n&&{boxShadow:e.buttonBlueFocusRing}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"small"===r?14:18,height:"small"===r?14:18,...o?{pointerEvents:"none"}:{cursor:"pointer"}}})),[t,o,n,r])}({checked:o,disabled:t,isFocusVisible:a,selectorSize:n});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",{ref:r,type:"radio",style:s.input,className:"radio-button",...e}),(0,c.jsx)("span",{...(0,d().AH)("custom-radio-button",s.root,t?{}:{pseudoActive:s.active})})]})}var p=()=>o(554509);const g=n.forwardRef((function(e,t){let{additionalContent:o,description:r,isDisabled:l,isSelected:d,label:u,name:p,onChange:g,width:f="fill",selectorSize:b="normal",selectAlignXAxis:v="left",selectAlignYAxis:x="center",selectType:y="checkbox",style:S,supportText:C,value:k,colorName:w,alignAdditionalContent:A,...j}=e;const M=(0,n.useId)(),P=function(e){const{isSelected:t,isDisabled:o,selectAlignYAxis:n,alignAdditionalContent:r}=e;return(0,i().IS)((e=>{const i=t&&!o?e.blueColor:e.selectorBorderUnselected;return{container:{display:"flex",alignItems:r??"center",gap:12,userSelect:"none",padding:"9px 16px 10px 10px",borderRadius:6,border:`1px solid ${i}`,...!o&&{cursor:"pointer"}},title:{fontWeight:a().Wy.medium,fontSize:14,userSelect:"none",lineHeight:18},additionalContentWrapper:{flexShrink:0},selectorWrapper:{display:"flex",..."top"===n?{marginTop:2}:{}},rightAlignSelectorWrapper:{display:"flex"}}}),[t,o,n,r])}({isSelected:d,isDisabled:l,selectAlignYAxis:x,alignAdditionalContent:A}),I=(0,c.jsxs)(s().Y1,{direction:"horizontal",align:"top"===x?"top-left":"center-left",gap:12,width:f,children:[(0,c.jsx)("div",{style:P.selectorWrapper,children:(0,c.jsx)(m,{id:M,selectType:y,name:p,value:k,onChange:g,isSelected:d,selectorSize:b,isDisabled:l,...j})}),(0,c.jsx)(h,{colorName:w,description:r,label:u,selectorSize:b,supportText:C,isDisabled:l})]}),R=(0,c.jsxs)(s().Y1,{direction:"horizontal",align:"top"===x?"top-center":"center",gap:12,children:[(0,c.jsx)(h,{colorName:w,description:r,label:u,selectorSize:b,supportText:C,isDisabled:l}),(0,c.jsx)("div",{style:{...P.selectorWrapper,...P.rightAlignSelectorWrapper},children:(0,c.jsx)(m,{id:M,selectType:y,name:p,value:k,onChange:g,selectorSize:b,isSelected:d,isDisabled:l,...j})})]}),T=o?(0,c.jsx)("div",{style:P.additionalContentWrapper,children:o}):null;return(0,c.jsx)("label",{ref:t,style:{...P.container,...S},htmlFor:M,children:"left"===v?(0,c.jsxs)(c.Fragment,{children:[I,T]}):(0,c.jsxs)(c.Fragment,{children:[T,R]})})}));function h(e){const{description:t,label:o,supportText:n,selectorSize:i,isDisabled:a,colorName:l}=e;let d;return"large"===i?d="Page-Content/Text-Block":"normal"===i||void 0===i?d="Body-13px/Medium":"small"===i?d="Body-12px/Regular":(0,r().HB)(i),(0,c.jsxs)(s().Y1,{gap:4,children:[(0,c.jsxs)(s().Y1,{gap:2,children:[(0,c.jsx)(p().D,{styleName:d,colorName:l||(a?"quaternary":"primary"),children:o}),t?(0,c.jsx)(p().D,{styleName:"Caption-12px/Regular",colorName:a?"quaternary":"secondary",children:t}):null]}),n?(0,c.jsx)(p().D,{styleName:"Caption-12px/Medium",colorName:"tertiary",children:n}):null]})}function m(e){const{selectType:t,selectorSize:n="normal",id:a,name:s,value:l,onChange:d,isSelected:p,isDisabled:g,...h}=e,m=(0,i().IS)((()=>({checkboxWrapper:{minWidth:18,display:"flex",justifyContent:"center"}})),[]);switch(t){case"radio":return(0,c.jsx)(u,{id:a,name:s,value:l,onChange:d,checked:p,disabled:g,selectorSize:n,...h});case"checkbox":return(0,c.jsx)("div",{style:m.checkboxWrapper,children:(0,c.jsx)(o(115562).W,{id:a,name:s,value:l,onChange:d,checked:p,disabled:g,selectorSize:n,...h})});case"none":return null;default:(0,r().HB)(t)}}},525432:(e,t,o)=>{o.d(t,{Bd:()=>s,DN:()=>h,II:()=>x,R8:()=>v,U9:()=>b,VM:()=>f,ZF:()=>p,ZI:()=>c,bf:()=>d,jx:()=>u,wW:()=>m,xO:()=>l});o(16280),o(296540);var n=()=>o(651124),i=()=>o(959013),r=()=>o(712505),a=o(474848);let s=function(e){return e[e.ViewSettings=0]="ViewSettings",e[e.FilterBar=1]="FilterBar",e[e.TopbarFilterPopup=2]="TopbarFilterPopup",e[e.TopbarSortPopup=3]="TopbarSortPopup",e[e.TopbarFollowPopup=4]="TopbarFollowPopup",e[e.MobileSheet=5]="MobileSheet",e}({});const l=480,d=320;function c(e){const{timelineViewTab:t,collectionContextStore:o}=e,i=u({collectionContextStore:o}),r=p({collectionContextStore:o});return"timeline"===i?"timeline"===t?"timeline_properties":r?"timeline_table_properties":void 0:(0,n().u9)(u({collectionContextStore:o}))}function u(e){var t;const{collectionContextStore:o}=e,n=null===(t=o.collectionViewStore())||void 0===t?void 0:t.getType();if(!n)throw new Error("View type was not defined.");return n}function p(e){const{collectionContextStore:t}=e,o=t.normalizedFormatStore.state;return Boolean(o.timeline_show_table)}const g=600;function h(e,t,o){const n=o||0,i=e.settingsStore.state;if(i.open&&!0!==i.hideSettingsPopup)return m(e,t,n)}function m(e,t,o){const n=o||0,i=e.settingsStore.state,a=u({collectionContextStore:e});return i.open&&"form_editor"===a||t||r().default.isSidePeekOpen()||e.isInHomeWidgetStore.state||e.isInlineViewStore.state||n<=g?"popup":"sidebar"}function f(e){let{hasOnlyLinkedDataSources:t,isCollectionViewPageWithContent:o,locked:n}=e;return o?n?(0,a.jsx)(i().sA,{defaultMessage:"Unlock wiki",id:"action.unlockWikiName.name"}):(0,a.jsx)(i().sA,{defaultMessage:"Lock wiki",id:"action.lockWikiName.name"}):t?n?(0,a.jsx)(i().sA,{defaultMessage:"Unlock views",id:"database.viewSettings.mainTab.unlockViews.title"}):(0,a.jsx)(i().sA,{defaultMessage:"Lock views",id:"database.viewSettings.mainTab.lockViews.title"}):n?(0,a.jsx)(i().sA,{defaultMessage:"Unlock database",id:"database.viewSettings.mainTab.unlockDatabase.title"}):(0,a.jsx)(i().sA,{defaultMessage:"Lock database",id:"database.viewSettings.mainTab.lockDatabase.title"})}let b=function(e){return e[e.Source=0]="Source",e[e.Relation=1]="Relation",e}({});const v=6;function x(e){let{currentViewType:t,isPlaceholderExternalCollection:o,collectionContextStore:n,allowedActions:i,settingsHeaderSizeObserver:r}=e;return"page"!==t&&"form_editor"!==t&&(!o&&(!!n.shouldAllowNewItemCreation()&&(!(i&&!i.includes("addItem"))&&!(r&&r.rect.state.width>d))))}},544862:(e,t,o)=>{o.d(t,{A:()=>k});var n=o(296540),i=()=>o(484714),r=()=>o(56366),a=()=>o(959013),s=()=>o(896628),l=()=>o(454531),d=()=>o(751156),c=()=>o(478726),u=()=>o(227440),p=()=>o(867772),g=()=>o(681810),h=()=>o(608581),m=()=>o(145214),f=()=>o(704152),b=()=>o(807683),v=()=>o(401497),x=()=>o(534177),y=o(474848);function S(e){let{src:t,placeholderSrc:o,placeholderBehavior:i,imageStyle:r,containerStyle:a,onLoadComplete:s,testId:l}=e;const[d,c]=(0,n.useState)(!0);let u;switch(i){case"force-show-placeholder":u=!0;break;case"force-show-src":u=!1;break;case"show-placeholder-if-loading-src":u=!!o&&(d||void 0===t);break;default:(0,x().HB)(i)}const p=(0,v().IS)((()=>{const e={gridColumn:1,gridRow:1};return{container:{display:"grid",...a},srcWrapper:{...u&&{display:"none"},...e},placeholderWrapper:{pointerEvents:"none",...e}}}),[a,u]);(0,n.useEffect)((()=>{void 0!==t&&c(!0)}),[t]);const g=(0,n.useCallback)((e=>{c(!1),null==s||s()}),[s]);return(0,y.jsxs)("div",{style:p.container,children:[(0,y.jsx)(b().Ay,{src:t,onLoad:g,style:r,placeholderStyle:p.srcWrapper,placeholderLoadedStyle:p.srcWrapper,testId:l}),o&&(0,y.jsx)(b().Ay,{src:o,style:r,placeholderStyle:p.placeholderWrapper,placeholderLoadedStyle:p.placeholderWrapper})]})}var C=()=>o(453101);const k=function(e){let{store:t,disabled:a,paddingRight:l,paddingLeft:c,height:u,proxyWidth:h}=e;const m=(0,i().v3)(),f=(0,i().Y0)(),v=(0,r().uB)(void 0,o(454305).A),x=(0,r().K8)((()=>a||"suggest"===o(77246).Uv.getMode(t)||(0,o(600871).aD)(f)),[a,t,f]),C=(0,r().K8)((()=>t.getCover()),[t]),k=(0,r().O$)(g().A),[j,M]=(0,n.useState)(void 0);if(!C)return null;const P=k.loadingMode!==p().pF&&k.loadingMode!==p().Wc;return(0,y.jsx)(o(801678).A,{mouseStore:v,onFlushTemporaryPosition:e=>function(e,t,o){const{imagePosition:n,reset:i}=e;d().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:o,canUndo:!0,perform:e=>{s().yY({store:t,coverPosition:n,transaction:e}),i()}})}(e,t,m),renderControl:e=>{let{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:i,isVisible:r,isRepositioning:a}=e;return(0,y.jsx)(A,{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:i,isVisible:r,isRepositioning:a,lastProxiedUrl:j,store:t,disabled:x,paddingRight:l,paddingLeft:c,mouseStore:v})},source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:u,maxHeight:280,cursor:"default"},preventClickPropagation:!0,render:e=>(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(o(360083).A,{url:C.cover,isAuthenticated:!0,permissionRecord:C.pointer,width:h,onFinishedLoadingProxyUrl:M,render:(t,o)=>{const n={width:"100%",height:u,maxHeight:280,objectFit:"cover",opacity:P?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},i={width:"100%",height:u,maxHeight:280};return(0,y.jsx)(S,{src:o,placeholderSrc:P?k.dataURL:void 0,placeholderBehavior:P?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:i,imageStyle:n,onLoadComplete:w,testId:"pageCover"})}}),P&&(0,y.jsxs)("div",{style:b().fd,children:[(0,y.jsx)(o(331542).A,{size:"md",style:{marginRight:4}}),(0,y.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:void 0!==k.uploadProgress?(0,y.jsx)(o(773382).A,{percentage:k.uploadProgress}):k.progressText?(0,y.jsx)("span",{children:k.progressText}):null})]})]})})};function w(){g().A.reset()}function A(e){let{isVisible:t,isRepositioning:o,handleCancelClick:s,handleRepositionClick:d,handleSavePositionClick:b,lastProxiedUrl:v,store:x,disabled:S,paddingRight:k,paddingLeft:w,mouseStore:A}=e;const j=(0,i().v3)(),M=(0,a().tz)(),P=(0,n.useCallback)((e=>function(e,t,o,n,i){i.reset();const r=e.target.getBoundingClientRect();l().W({environment:t,intl:o,store:n,rect:r,from:"page_header"})}(e,j,M,x,A)),[j,M,x,A]),I=(0,r().K8)((()=>g().A.state.loadingMode),[]),R=(0,r().K8)((()=>function(e){let t;return t=Boolean(e.isFullWidth())?"100%":c().x6,t}(x)),[x]),{device:T}=j,B=(0,r().O$)(u().e);if(S||I!==p().pF||!B)return null;const{isMobile:W}=T;return(0,y.jsx)(m().A,{animate:{width:R,opacity:t?1:0},style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,y.jsxs)(h().A,{isVisible:t,position:"bottom",style:{marginRight:k,marginLeft:w},children:[!o&&(0,y.jsx)(f().A,{style:{borderRight:W?"none":void 0,...C().k},onClick:P,children:(0,y.jsx)(a().sA,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!o&&!W&&(0,y.jsx)(f().A,{style:{...C().k,borderRight:"none"},onClick:e=>d(e,v),children:(0,y.jsx)(a().sA,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),o&&!W&&(0,y.jsx)(f().A,{style:C().k,onClick:b,children:(0,y.jsx)(a().sA,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),o&&!W&&(0,y.jsx)(f().A,{style:{...C().k,borderRight:"none"},onClick:s,children:(0,y.jsx)(a().sA,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})}},551619:(e,t,o)=>{o.d(t,{Hy:()=>T,NV:()=>I,O9:()=>W,Rg:()=>B,Sm:()=>L,dK:()=>E,f7:()=>D,l8:()=>H,n$:()=>_,no:()=>F,sx:()=>R});var n=()=>o(402014),i=()=>o(484714),r=()=>o(792485),a=()=>o(56366),s=()=>o(700500),l=()=>o(651124),d=()=>o(519831),c=()=>o(620689),u=()=>o(591197),p=()=>o(835066),g=()=>o(780054),h=()=>o(964345),m=()=>o(68465),f=()=>o(504836),b=()=>o(478726),v=()=>o(747100),x=()=>o(963589),y=()=>o(665579),S=()=>o(765957),C=()=>o(525569),k=()=>o(217429),w=()=>o(375447),A=()=>o(66496),j=()=>o(548821),M=()=>o(712505),P=()=>o(302022);function I(e){(0,n().SQ)({event:e,context:n().y$.EditorMouseDown,callback:()=>{}})}function R(e){(0,n().SQ)({event:e,context:n().y$.Click,callback:()=>{}})}function T(e){return(0,a().K8)((()=>Boolean(P().A.state.pageMap[e.id])||A().A.state.pages.has(e.id)),[e.id])}function B(e,t){const o=(0,i().v3)(),n=(0,r().S)(),s=T(e),l=(0,a().K8)((()=>{var o,n;return t===j().Rr.Frame?Boolean(null===(o=S().default.state.currentLoadingContainerStore)||void 0===o?void 0:o.state.ready):t===j().Rr.PeekView&&M().default.state.open?Boolean(null===(n=M().default.state.loadingContainerStore)||void 0===n?void 0:n.state.ready):t===j().Rr.CollectionPageView||t===j().Rr.CollectionPageViewFullScreen?e.isReady():void 0}),[t,e]),d=D(e);return(0,a().K8)((()=>{if(!l)return!1;const t=o.currentUser.isLoggedIn(),i=n&&n.publicEditModeStore.state;return Boolean(e&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=i&&i.hasPublicPermission)||"edit"===(null==i?void 0:i.permission))&&!s&&!d&&(!(0,m().ZE)(i)||"completionPopup"!==C().default.state.type))}),[o.currentUser,d,l,n,s,e])}function W(e,t){const o=(0,i().v3)(),n=(0,r().S)(),{isTablet:s}=(0,i().Y0)(),l=(0,x().X)("tablet_refresh_template_pills_gate");return(0,a().K8)((()=>{if(t===j().Rr.SitePreview)return!1;if(g().A.isMobile&&(!s||!l))return!1;if(!o.currentUser.isLoggedIn())return!1;const i=n&&n.publicEditModeStore.state;if(null!=i&&i.hasPublicPermission&&"edit"!==(null==i?void 0:i.permission))return!1;if(e.getContentLength()>1)return!1;if(!e.canEdit()||e.isNonEditableState())return!1;const r=e.getContentStores()[0];if(r&&!r.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const a=h().gZ.state,d=h().Di.state;if(a&&e.id===d)return!1;return!((0,b().L5)(t)?u().VY.state:u().u3.state)}),[o,n,e,t,s,l])}function D(e){return(0,a().K8)((()=>{if(e.isCollectionView()){const t=e.getCollectionStoreIfSingleSource();return!!t&&t.isSyncedCollection()}return e.isType(s().xd.externalObjectInstancePage)}),[e])}function L(e){return(0,a().K8)((()=>{if(!(0,f().vL)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===d().Vl){return!!t.getFormatStore().getKeyStore("external_collection_type").getValue()}return!1}),[e])}function E(e){return(0,a().K8)((()=>{if(!(0,f().pB)())return!1;var t;return!!e.isCollectionView()&&((null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("external_collection_type").getValue())??!1)}),[e])}function H(e){return(0,a().K8)((()=>{if(!k().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"}))return!1;var t;return!!e.isCollectionView()&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("static_import_collection_type").getValue())===l().IE.CsvImport}),[e])}function _(e){const t=(0,i().v3)(),{device:o,WindowSizeStore:n}=t,r=(0,a().K8)((()=>{const e=n.state.height,o=g().A.isMobile&&w().Ay.state.open?e:0;return c().C6(t)+o}),[t,n]);return(0,a().K8)((()=>"home-phone"===e?y().q3:o.isTablet?380:o.isIOS?Math.max(350,r):g().A.isMobile?400:"side-peek"===e||"center-peek"===e?v().ln:"home"===e?y().wH:"30vh"),[o,r,e])}function F(e){const t=(0,i().v3)(),o=(0,a().K8)((()=>(0,p().dC)(t,e)),[t,e]);return(0,a().K8)((()=>o&&!e.isFullWidth()?(0,p().Zy)(t,(0,v().cq)(e),(0,v().RX)(e)):0),[t,o,e])}},555267:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),i=()=>o(401497),r=()=>o(62856),a=()=>o(331542),s=o(474848);function l(e){let{loadingMessage:t}=e;const o=(0,i().DP)(),l=(0,r().A)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:l?(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(a().A,{}),t?(0,s.jsx)("div",{style:{marginLeft:8,color:o.text.secondary},children:t}):void 0]}):void 0})}},567121:(e,t,o)=>{o.d(t,{EG:()=>a,K5:()=>r,RH:()=>i,Yi:()=>s,ls:()=>n});const n=32,i=202,r=1e3,a="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",s="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},578194:(e,t,o)=>{o.d(t,{r:()=>n});const n=(0,o(583835).Dv)("importEvernote")},591197:(e,t,o)=>{o.d(t,{VY:()=>s,ZJ:()=>r,u3:()=>a});var n=()=>o(496506);class i extends(()=>o(757695))().Store{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const r=new i,a=new(n().ComputedStore)((()=>!1!==r.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),s=new(n().ComputedStore)((()=>!1!==r.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},608581:(e,t,o)=>{o.d(t,{A:()=>u});o(898992),o(354520),o(581454),o(941795);var n=o(296540),i=()=>o(401497),r=()=>o(955825),a=()=>o(284371),s=()=>o(780054),l=()=>o(963575),d=o(474848);function c(e){const{button:t,isLast:o}=e,s=(0,i().IS)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:a().Wy.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return n.cloneElement(t,{...(0,r().AH)(t.props.style,s.button,o&&s.buttonLast),hoveredStyle:(0,r().AH)(s.buttonHovered,o&&s.buttonLast).style,pressedStyle:s.buttonPressed})}const u=function(e){let{children:t,isVisible:u,position:p,style:g}=e;const h=(0,i().IS)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.shadowSM,display:"flex",whiteSpace:"nowrap",borderRadius:l().A.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:s().A.isMobile?"auto":"none",opacity:s().A.isMobile?1:0,fontFamily:a().vc(o(662303).locale).sans,position:"absolute",right:l().A.horizontal.small,bottom:l().A.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:l().A.vertical.small,bottom:void 0}})),[]),m=n.Children.toArray(t).filter(o(534177).O9),f=m.length;return(0,d.jsx)(o(145214).A,{animate:{opacity:u?1:0},...(0,r().AH)(h.container,g,u&&h.containerHover,"top"===p&&h.containerTop),children:m.map(((e,t)=>{const i=t===f-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===o(859428).A&&n.isValidElement(e))return n.cloneElement(e,{render:(t,o)=>{const n=e.props.render(t,o);return(0,d.jsx)(c,{isLast:i,button:n},e.key)}});if(e.type===o(704152).A&&n.isValidElement(e))return(0,d.jsx)(c,{isLast:i,button:e},e.key)}}))})}},614842:(e,t,o)=>{o.d(t,{S:()=>a,d:()=>s});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"6.07 3.77 7.85 12.28",svg:(0,o(474848).jsx)("path",{d:"M7.309 6.71c.22-.88 1.251-1.68 2.656-1.68 1.635 0 2.708 1.036 2.708 2.047 0 .603-.368 1.203-1.048 1.617l-.014.008-1.242.849-.003.002c-.805.556-1.31 1.45-1.31 2.417a.625.625 0 0 0 1.25 0c0-.522.275-1.046.769-1.388l1.215-.83c.944-.58 1.633-1.536 1.633-2.675 0-1.945-1.905-3.297-3.958-3.297-1.812 0-3.474 1.044-3.869 2.625a.625.625 0 1 0 1.213.303m3.435 8.351a1 1 0 1 1-2 0 1 1 0 0 1 2 0"})},i=(0,o(340498).wt)("questionMark",n);var r=()=>o(262986);function a(e){return e}const s={getName:(e,t)=>{const o=r().Nh[e.type];return o?o.getName(t,e):e.type},getDescription:(e,t)=>{const o=r().Nh[e.type];return o?o.getDescription(t):`Unknown module: ${e.type}`},getIcon:e=>{const t=r().Nh[e];return t?t.getIcon():i},isValidAndConnected:(e,t)=>{const o=r().Nh[e.type];if(!o)return!1;return"ready"===o.getModuleConfigurationStatus(e,t)},getMessageIfNotValid:(e,t,o)=>{var n,i;return null===(n=r().Nh[e.type])||void 0===n||null===(i=n.getMessageIfNotValid)||void 0===i?void 0:i.call(n,t,o)},getModuleConfigSection:e=>{var t,o;return(null===(t=r().Nh[e.type])||void 0===t||null===(o=t.getModuleConfigSection)||void 0===o?void 0:o.call(t))??"system"}}},665579:(e,t,o)=>{o.d(t,{$L:()=>s,BZ:()=>c,EC:()=>h,EI:()=>y,E_:()=>j,Ed:()=>p,Fq:()=>b,Lu:()=>C,Mk:()=>g,O0:()=>A,UO:()=>M,V$:()=>w,VQ:()=>m,Xx:()=>S,Xy:()=>d,YS:()=>f,_g:()=>x,dd:()=>u,pW:()=>l,q3:()=>a,wH:()=>r});var n=()=>o(496603),i=()=>o(534177);const r=160,a=40,s=24,l=20,d=600,c=270,u=405,p=480,g=500,h=void 0,m=16,f=10,b=8,v=(o(69447).nh,{backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"}),x=4;function y(e){return{icon:e.icon.secondary,text:e.text.secondary}}function S(e){return{width:48,height:48,fill:e.icon.tertiary}}function C(e){let{theme:t,isPhone:o}=e;return o?t.personalHomeBackgroundPhone:t.surface.page}const k=1;function w(e){let{isPhone:t,theme:o}=e;return{zIndex:1,position:"relative",display:"flex",flexDirection:"column",borderRadius:12,background:o.home.tile.background,boxShadow:j({isPhone:t,theme:o}),...v}}function A(e){let{mode:t}=e;switch(t){case"dark":return 0;case"light":return k;default:return(0,i().ub)(t),0}}function j(e){let{isPhone:t,theme:o,borderOnly:i}=e;if("dark"===o.mode)return"unset";o.mode;const r=A({mode:o.mode});return(0,n().oE)([i||t?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${r}px rgba(0, 0, 0, 0.05)`]).join(", ")}function M(e){const{isPhone:t,theme:o,borderOnly:n}=e;return{unhoveredBoxShadow:j({isPhone:t,theme:o,borderOnly:n}),hoveredBoxShadow:"light"===o.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):o.homeShadow.card.hovered}}},677195:(e,t,o)=>{o.d(t,{R:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("verificationCheck",{viewBox:"0 0 6 7",svg:(0,n.jsx)("path",{d:"M2.84245 6.11619C2.71116 6.30644 2.53392 6.40156 2.31072 6.40156C2.20131 6.40156 2.10066 6.37881 2.00875 6.33332C1.92123 6.28782 1.83589 6.21545 1.75274 6.11619L0.150985 4.25515C0.0503282 4.12694 0 3.99874 0 3.87053C0 3.73406 0.04814 3.61826 0.14442 3.52314C0.245077 3.42388 0.365427 3.37425 0.50547 3.37425C0.597374 3.37425 0.680525 3.39286 0.754923 3.43008C0.833698 3.46317 0.912473 3.52934 0.991247 3.6286L2.28446 5.21049L5.00875 1.07896C5.13129 0.892857 5.28446 0.799805 5.46827 0.799805C5.60394 0.799805 5.72648 0.841161 5.83589 0.923874C5.9453 1.00659 6 1.11618 6 1.25266C6 1.32297 5.98249 1.39327 5.94748 1.46358C5.91685 1.52975 5.88184 1.59178 5.84245 1.64968L2.84245 6.11619Z"})})},681810:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(867772).Ay)},735695:(e,t,o)=>{o.d(t,{Ay:()=>j,iZ:()=>k,vE:()=>C});var n=o(296540),i=()=>o(804773),r=()=>o(401497),a=()=>o(149375),s=()=>o(66913),l=()=>o(959013),d=()=>o(284371),c=()=>o(686526),u=()=>o(704152),p=()=>o(285790),g=()=>o(928600),h=()=>o(480095),m=()=>o(554509),f=()=>o(780054),b=()=>o(722872),v=()=>o(253579),x=()=>o(255824),y=o(474848);const S=(0,l().YK)({back:{defaultMessage:"Back",id:"collectionsSettingsMenu.back"}}),C=290,k=400;function w(e){let{children:t,title:o,desktopTitleType:n,settingsStackLength:i,handleClose:c,handleBackArrowClick:g,hideDesktopHeader:h,hasBackStack:f}=e;const b=(0,x().a)(),v=(0,l().tz)(),C=(0,r().IS)((e=>({hiddenDesktopHeaderDiv:{height:0},nonHiddenDesktopHeaderDiv:{display:"flex",alignItems:b?"top":"center",padding:b?"0px 14px 6px 14px":"14px 16px 6px 16px",height:b?void 0:42},arrowButton:{marginRight:8,marginLeft:-2,height:22},arrowIcon:{width:16,height:16},title:{flexGrow:1,fontWeight:b?d().Wy.medium:d().Wy.semibold,fontSize:b?16:14,lineHeight:b?"24px":void 0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},closeButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:18,height:18,flexShrink:0},closeButtonHover:{background:e.buttonPressedBackground},closeIcon:{width:14,fill:e.text.secondary}})),[b]),k=!b;return(0,y.jsxs)(y.Fragment,{children:[h?(0,y.jsx)("div",{style:C.hiddenDesktopHeaderDiv}):(0,y.jsxs)("div",{style:C.nonHiddenDesktopHeaderDiv,children:[(i>1||f)&&(0,y.jsx)(p().A,{icon:a().v,style:C.arrowButton,iconStyle:C.arrowIcon,onClick:g,ariaLabel:v.formatMessage(S.back)}),"sectionHeader"===n?(0,y.jsx)(m().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",customStyles:{flexGrow:1},children:o}):(0,y.jsx)("span",{style:C.title,children:o}),k&&(0,y.jsx)(u().A,{onClick:c,style:C.closeButton,hoveredStyle:C.closeButtonHover,children:(0,s().V)(C.closeIcon)})]}),t]})}function A(e,t){let{children:r,footer:a,header:s,unconstrainedWidth:l,desktopWidth:d,title:u,desktopTitleType:p,collectionSettingsStore:m,fullHeight:S,hideDesktopHeader:k,menuScrollerStyle:A,innerContentWrapperStyle:j,disableScroller:M,handleBackArrowClick:P,hasBackStack:I,handleClose:R}=e;const T=(0,o(175116).Ks)(),B=(0,b().Tf)(),W=(0,x().a)(),{currentTab:D,settingsStackLength:L,hideHeader:E}=(0,o(56366).K8)((()=>{const e=m.state;return{currentTab:(0,o(940371).S)(m),settingsStackLength:e.stack.length,hideHeader:e.hideSettingsHeader}}),[m]),H=(0,n.useCallback)((()=>{var e;P?P():c().yl({collectionSettingsStore:m,keepPreviousRef:"form_editor"===(null==T||null===(e=T.collectionViewStore())||void 0===e?void 0:e.getType())})}),[P,m,T]),_=(0,n.useCallback)((e=>{R?R(e):c().os({collectionSettingsStore:m})}),[R,m]),F=(0,n.useCallback)((e=>{(0,v().rW)(e.target)||(0,v().iX)(e.target)||(0,v().u2)(e.target)||o(263711).g.state.isOpen||_(e)}),[_]);if(!D)return null;let V;if(f().A.isMobile)V={disableScroller:M,menuType:b().gu.Modal,title:u,left:L>1?(0,y.jsx)(h().MobileModalBackButton,{}):void 0,onClickLeft:L>1?H:void 0,scrollerStyle:A,innerRef:t,right:B?void 0:(0,y.jsx)(h().DoneMenuText,{}),onClickRight:B?void 0:_};else{const e=l||d?void 0:W?280:C;V={disableScroller:M,menuType:b().gu.Popup,minWidth:W?280:C,width:d,maxHeight:S?"100%":"80vh",...e&&{maxWidth:e},onClickOutside:F,scrollerStyle:{flexGrow:0,...A},header:!E&&(0,y.jsx)(w,{settingsStackLength:L,handleClose:_,handleBackArrowClick:H,hasBackStack:I,hideDesktopHeader:k,title:u,desktopTitleType:p,children:s}),paddingTop:E?6:0,footer:a,innerRef:t}}const N=(0,y.jsxs)(y.Fragment,{children:[f().A.isMobile&&s,r,f().A.isMobile&&a]});return S?(0,y.jsx)(i().Y,{direction:"vertical",children:(0,y.jsx)(g().A,{...V,children:N})}):(0,y.jsx)(o(297872).A,{capture:!0,allowMobileAutoScroll:!0,allowEsc:!0,render:e=>(0,y.jsx)(i().Y,{direction:"vertical",children:(0,y.jsx)(g().A,{...V,...e,children:(0,y.jsx)("div",{style:j,children:N})})})})}const j=(0,n.forwardRef)(A)},756114:(e,t,o)=>{o.d(t,{D:()=>n});function n(e,t){t.route.name;return!1}},801678:(e,t,o)=>{o.d(t,{A:()=>h});var n=o(296540),i=()=>o(662303),r=()=>o(56366),a=()=>o(959013),s=()=>o(381349),l=()=>o(496603),d=()=>o(284371),c=()=>o(720665),u=()=>o(145214),p=o(474848);const g={isRepositioning:!1};const h=function(e){const t=(0,n.useRef)(null),i=(0,o(484714).v3)(),[a,s]=(0,n.useState)(g),d=(0,n.useCallback)((()=>{s(g)}),[]),{renderControl:u,onFlushTemporaryPosition:h,style:f,source:b,store:v}=e,{isRepositioning:x,image:y,startDragRenderedPosition:S,startDragImageScreenHeight:C}=a,k=(0,r().K8)((()=>0===o(502438).default.state.stores.length),[]),[w,A]=(0,n.useState)(!1),j=(0,r().uB)(e.mouseStore,o(454305).A),M=(0,r().K8)((()=>j.state.mouseEntered),[j]),P=(0,o(401497).IS)((()=>({dragContainer:{width:"100%",cursor:x?"move":"inherit"},container:{position:"relative",width:"100%",zIndex:1}})),[x]),I=(0,r().K8)((()=>function(e,t,o){return(0,l().Et)(o)?o:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,l().Et)(e))return e}const o=.5;if(t.isCollectionView()){const e=t.getCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,c().pN)(t)?o:t}}const n=t.getFormat(),i=n.page_cover_position;if((0,l().Et)(i))return i;return o}(e,t)}(b,v,a.temporaryPosition)),[a.temporaryPosition,b,v]);(0,n.useEffect)((()=>{const e=e=>{const o=t.current;o&&!o.contains(e.target)&&x&&h({imagePosition:I,reset:()=>{j.reset(),d()}})};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)}),[I,x,j,h,d]),x&&!k&&d();const R=(0,n.useMemo)((()=>(0,l().nF)((e=>{j.setState({...j.state,mouseEntered:!0})}),100)),[j]),T=(0,n.useMemo)((()=>(0,l().sg)((e=>{j.setState({...j.state,mouseEntered:!1})}),100)),[j]),B=(0,n.useCallback)(((e,t)=>{o(778417).IU({environment:i});const n=new Image;n.onload=()=>{s((e=>({...e,isRepositioning:!0,image:n})))},t&&(n.src=t)}),[i]),W=(0,n.useCallback)((e=>{h({imagePosition:I,reset:()=>{d()}})}),[I,h,d]),D=(0,n.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,o(819121).p)(t)&&A(!0)}),[]),L=(0,n.useCallback)((()=>{A(!0)}),[]),E=(0,n.useCallback)((e=>{if(y&&x){const e=t.current;if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/y.width*y.height;s((e=>({...e,startDragImageScreenHeight:t,startDragRenderedPosition:I})))}}}),[y,I,x]),H=(0,n.useCallback)((e=>{if(x){const t=e.diffY/(C||0)+(S||0);s((e=>({...e,temporaryPosition:(0,l().LI)((0,o(40845).A)(t,0,1),4)})))}}),[x,C,S]),_=(0,n.useCallback)((()=>{s((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),F=(0,r().K8)((()=>u({handleRepositionClick:B,handleSavePositionClick:W,handleCancelClick:d,isVisible:M||w||x,isRepositioning:x})),[B,W,w,x,M,u,d]),V=(0,o(79043).A)(Boolean(e.preventClickPropagation));return(0,p.jsxs)("div",{ref:t,onFocus:D,onBlur:L,onMouseEnter:R,onMouseMove:R,onMouseLeave:T,...V,...(0,o(955825).AH)(P.container,f),children:[(0,p.jsx)(o(603820).A,{onDraggableDragStart:E,onDraggableDragMove:H,onDraggableDragEnd:_,onDraggableDragCancel:_,disabled:!x,render:t=>(0,p.jsx)("div",{style:P.dragContainer,...t,children:e.render({imagePosition:I,isRepositioning:x})})}),(0,p.jsx)(m,{small:e.small,isRepositioning:x}),F]})};function m(e){let{small:t,isRepositioning:o}=e;if(t)return null;const n={background:s().Ay.blackWithAlpha(.4),borderRadius:4,color:s().Ay.white,fontSize:12,fontFamily:d().vc(i().locale).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,p.jsx)(u().A,{visible:o,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:n,children:(0,p.jsx)(a().sA,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},843189:(e,t,o)=>{o.d(t,{E:()=>a});var n=o(296540),i=()=>o(960715),r=o(474848);const a=n.forwardRef(((e,t)=>{let{children:n,color:a,disabled:s,iconLeading:l,iconStyle:d,iconTrailing:c,isLoading:u,shape:p="default",size:g="md",style:h,...m}=e;const f=(0,o(963589).X)("nds_button_gap")||Boolean(c),b=(0,o(401497).IS)((e=>{const t=a?`${a}Primary`:"primary",r=a||"regular",c=a?`${a}Hover`:"primaryHover",m=a?`${a}Pressed`:"primaryPressed";return{button:{...(0,i().qq)({shape:p,size:g,hasIconOnly:Boolean(l)&&!n,isButtonGapEnabled:f}),justifyContent:"center",color:e.text[t],background:e.tint[r],opacity:s||u?.3:1,fontWeight:o(284371).Wy.medium,...h},hovered:{background:s?e.tint[r]:e.tint[c]},pressed:{background:s?e.tint[r]:e.tint[m]},icon:{...(0,i().D3)({size:g,hasIconOnly:!n,isButtonGapEnabled:f}),...d}}}),[n,a,s,l,d,f,u,p,g,h]);return(0,r.jsxs)(o(197190).A,{ref:t,style:b.button,hoveredStyle:b.hovered,pressedStyle:b.pressed,disabled:s||u,...m,children:[u?(0,r.jsx)(o(331542).A,{style:{marginRight:4}}):null,l?l(b.icon):null,n,c?c(b.icon):null]})}));a.displayName="TintButton"},867772:(e,t,o)=>{o.d(t,{Ay:()=>l,Gi:()=>r,Wc:()=>n,pF:()=>a,vS:()=>i});const n="loadingLocalImage",i="uploading",r="downloading",a="loaded";class s extends(()=>o(757695))().Store{getInitialState(){return{loadingMode:a}}}const l=s}}]);