"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[4112],{89244:(e,t,s)=>{s.d(t,{A:()=>h,i:()=>f});s(296540);var i=()=>s(56366),n=()=>s(994310),a=()=>s(959013),r=()=>s(278768),o=()=>s(449506),l=()=>s(901389),d=()=>s(874913),c=()=>s(589994),u=()=>s(404141),g=()=>s(554509),p=()=>s(843878),m=s(474848);async function f(e){let{locale:t,environment:s,origin:i}=e;r().wG(s,{locale:t,origin:i});const a=await o().callApi({eventName:"setlocale",environment:s,data:{locale:t}});"success"===a.type?(n().A.set("preferredLocale",t),await c().transactionQueue.drain(),s.device.isElectron?d().refreshAll({includeFocusedWindow:!0}):window.location.reload(!0)):l().Qg(a)}const h=function(e){const t=(0,s(484714).v3)(),n=(0,s(722872).Tf)(),{device:r,WindowSizeStore:o}=t,l=(0,i().K8)((()=>o.state.paddingLeftCSS),[o]),d=(0,i().K8)((()=>o.state.paddingRightCSS),[o]),c=(0,i().K8)((()=>u().A.state.highlightedSetting===u().r.LanguageSetting),[]),h=(0,s(141966).H)(r.isMobile,n),S=(0,s(401497).IS)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"auto",height:"auto",paddingLeft:r.isMobile?l:0,paddingRight:r.isMobile?d:0,...c?{backgroundColor:e.buttonHoveredBackground,marginLeft:-1*(0,p().AL)(r.isMobile),marginRight:-1*(0,p().AL)(r.isMobile),paddingLeft:(0,p().AL)(r.isMobile),paddingRight:(0,p().AL)(r.isMobile),marginTop:-1*h,marginBottom:h+5,paddingTop:h/2,paddingBottom:h/2}:{}}})),[r.isMobile,h,l,d,c]);return(0,m.jsx)("div",{style:S.container,children:(0,m.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",width:"100%"},children:[(0,m.jsxs)(s(84817).Y1,{direction:"vertical",gap:6,children:[(0,m.jsx)(g().D,{id:"languageRegionSettings.language.label",styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,m.jsx)(a().sA,{id:"languageRegionSettings.language.label",defaultMessage:"Language"})}),(0,m.jsx)(g().D,{id:"languageSettings.languageSwitcher.subtitle",styleName:"UIMedium-13px/Regular",colorName:"secondary",children:(0,m.jsx)(a().sA,{id:"languageSettings.languageSwitcher.subtitle",defaultMessage:"Change the language used in the user interface."})})]}),(0,m.jsx)(s(850369).A,{confirm:!0,onChange:e=>f({locale:e,environment:t,origin:"languageSettings"}),currentLocale:e.locale,origin:"languageSettings"})]})})}},122555:(e,t,s)=>{s.d(t,{p:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("arrowUpLeft",{viewBox:"0 0 16 16",directional:!0,svg:(0,i.jsx)("path",{d:"M0.845703 8.58691L0.852539 1.72363C0.852539 1.48665 0.923177 1.29525 1.06445 1.14941C1.21029 0.999023 1.40625 0.923828 1.65234 0.923828H8.51562C8.74349 0.923828 8.93034 0.999023 9.07617 1.14941C9.22201 1.2998 9.29492 1.47526 9.29492 1.67578C9.29492 1.8763 9.21973 2.04948 9.06934 2.19531C8.91895 2.33659 8.74121 2.40723 8.53613 2.40723H6.10254L3.16309 2.30469L4.40723 3.39844L10.915 9.91992C11.0745 10.084 11.1543 10.264 11.1543 10.46C11.1543 10.5921 11.1178 10.7174 11.0449 10.8359C10.972 10.9544 10.8763 11.0479 10.7578 11.1162C10.6439 11.1891 10.5186 11.2256 10.3818 11.2256C10.1813 11.2256 10.0013 11.1481 9.8418 10.9932L3.32715 4.47852L2.21973 3.23438L2.33594 6.05078V8.60742C2.33594 8.8125 2.26302 8.99251 2.11719 9.14746C1.97591 9.29785 1.80273 9.37305 1.59766 9.37305C1.39714 9.37305 1.22168 9.29785 1.07129 9.14746C0.920898 8.99707 0.845703 8.81022 0.845703 8.58691Z"})})},158469:(e,t,s)=>{s.d(t,{f:()=>a});s(296540);var i=s(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"2.62 2.62 15.26 15.26",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M8.387 5.933c.115-.523.861-.523.976 0l.202.918a1.75 1.75 0 0 0 1.334 1.334l.918.202c.523.115.523.861 0 .976l-.918.202a1.75 1.75 0 0 0-1.334 1.334l-.202.918c-.115.523-.861.523-.976 0l-.202-.918a1.75 1.75 0 0 0-1.334-1.334l-.918-.202c-.523-.115-.523-.861 0-.976l.918-.202a1.75 1.75 0 0 0 1.334-1.334z"}),(0,i.jsx)("path",{d:"M8.875 2.625a6.25 6.25 0 1 0 3.955 11.09l3.983 3.982a.625.625 0 1 0 .884-.884l-3.983-3.982a6.25 6.25 0 0 0-4.84-10.205m-5 6.25a5 5 0 1 1 10 0 5 5 0 0 1-10 0"})]})},a=(0,s(340498).wt)("sparkleMagnifyingGlass",n)},183607:(e,t,s)=>{s.d(t,{X:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("arrowsDiverging",{viewBox:"0 0 12 12",svg:(0,i.jsx)("path",{d:"M6 11.2891C6.42188 11.2891 6.63281 11.0469 6.63281 10.5625V7.3457C6.63281 7.00586 6.71875 6.64062 6.89062 6.25C7.06641 5.85938 7.29492 5.47266 7.57617 5.08984C7.86133 4.70703 8.16992 4.35547 8.50195 4.03516C8.83789 3.71484 9.16406 3.45312 9.48047 3.25L9.95508 2.94531C10.1621 2.81641 10.2656 2.63281 10.2656 2.39453C10.2656 2.21875 10.2109 2.07227 10.1016 1.95508C9.99219 1.83789 9.8418 1.7793 9.65039 1.7793C9.4668 1.7793 9.29102 1.83398 9.12305 1.94336L8.81836 2.14844C8.51367 2.34766 8.20898 2.58984 7.9043 2.875C7.59961 3.15625 7.31641 3.45508 7.05469 3.77148C6.79297 4.08398 6.56836 4.39258 6.38086 4.69727C6.19727 4.99805 6.07227 5.26953 6.00586 5.51172H5.98828C5.91797 5.26953 5.79102 4.99805 5.60742 4.69727C5.42383 4.39258 5.19922 4.08398 4.93359 3.77148C4.67188 3.45508 4.38867 3.15625 4.08398 2.875C3.7832 2.58984 3.48047 2.34766 3.17578 2.14844L2.87109 1.94336C2.69922 1.83398 2.52344 1.7793 2.34375 1.7793C2.14844 1.7793 1.99609 1.83984 1.88672 1.96094C1.78125 2.08203 1.72852 2.22461 1.72852 2.38867C1.72852 2.62695 1.83203 2.8125 2.03906 2.94531L2.51367 3.25C2.83008 3.45312 3.1543 3.71484 3.48633 4.03516C3.81836 4.35547 4.12695 4.70703 4.41211 5.08984C4.69727 5.47266 4.92773 5.85938 5.10352 6.25C5.2793 6.64062 5.36719 7.00586 5.36719 7.3457V10.5625C5.36719 11.0469 5.57812 11.2891 6 11.2891ZM1.81641 3.9707L3.71484 1.52734C3.85547 1.33984 3.88281 1.17578 3.79688 1.03516C3.71484 0.890625 3.55469 0.814453 3.31641 0.806641L0.808594 0.712891C0.613281 0.705078 0.466797 0.763672 0.369141 0.888672C0.271484 1.00977 0.251953 1.16406 0.310547 1.35156L1.02539 3.75391C1.0918 3.98438 1.20312 4.125 1.35938 4.17578C1.51953 4.22656 1.67188 4.1582 1.81641 3.9707ZM10.0898 3.95898C10.2266 4.1543 10.375 4.23047 10.5352 4.1875C10.6992 4.14062 10.8164 4.00391 10.8867 3.77734L11.6777 1.39258C11.7402 1.20508 11.7246 1.04883 11.6309 0.923828C11.541 0.798828 11.3984 0.736328 11.2031 0.736328L8.68945 0.753906C8.45117 0.753906 8.28711 0.824219 8.19727 0.964844C8.10742 1.10156 8.13086 1.26562 8.26758 1.45703L10.0898 3.95898Z"})})},183804:(e,t,s)=>{s.d(t,{A:()=>l,C:()=>d});s(296540);var i=()=>s(562866),n=()=>s(725118),a=()=>s(803557),r=()=>s(437487),o=s(474848);function l(e){const{onInviteClick:t,onInviteComplete:s,buttonStyle:a,buttonContainerStyle:r,spacePermissionsSettingsStore:l,shouldAddMembers:d=!0}=e;return[{key:"slack_imports",render:()=>(0,o.jsx)(n().R,{inviteOrigin:"space_setting_slack_dropdown",canEditPermission:!0,onInviteClick:t,onInviteComplete:s,buttonLabel:(0,o.jsx)(i().$c,{type:"slack"}),buttonStyle:a,buttonContainerStyle:r,spacePermissionsSettingsStore:l,shouldAddMembers:d}),action:()=>{}},{key:"google_imports",render:()=>(0,o.jsx)(i().aI,{inviteOrigin:"space_setting_google_dropdown",canEditPermission:!0,onInviteClick:t,onInviteComplete:s,buttonLabel:(0,o.jsx)(i().$c,{type:"google"}),buttonStyle:a,buttonContainerStyle:r,spacePermissionsSettingsStore:l,shouldAddMembers:d}),action:()=>{}}]}function d(e){const{onClickAuthenticated:t,hideChevronIcon:s,containerStyle:n,buttonStyle:l,flowId:d}=e;return[{key:"slack_imports",render:()=>(0,o.jsx)(a().Xx,{onClickAuthenticated:e=>{let{isAfterImportConnection:s}=e;return t(r().NL.Slack,!s)},title:(0,o.jsx)(i().$c,{type:"slack"}),containerStyle:n,buttonStyle:l,from:"share_menu",inviteOrigin:"page_share_modal",flowId:d,loadContacts:!0,hideChevronIcon:s}),action:()=>{}},{key:"google_imports",render:()=>(0,o.jsx)(a().KG,{onClickAuthenticated:e=>{let{isAfterImportConnection:s}=e;return t(r().NL.Google,!s)},containerStyle:n,buttonStyle:l,from:"share_menu",inviteOrigin:"page_share_modal",flowId:d,loadContacts:!0,hideChevronIcon:s,buttonLabel:(0,o.jsx)(i().$c,{type:"google"})}),action:()=>{}}]}},212473:(e,t,s)=>{s.r(t),s.d(t,{arrowUpRightSquareIcon:()=>a,iconDefinition:()=>n});s(296540);var i=s(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.75 13.75",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M7.875 7c0-.345.28-.625.625-.625H13c.345 0 .625.28.625.625v4.5a.625.625 0 1 1-1.25 0V8.509l-5.12 5.12a.625.625 0 1 1-.884-.883l5.12-5.121H8.5A.625.625 0 0 1 7.875 7"}),(0,i.jsx)("path",{d:"M3.125 5.25c0-1.174.951-2.125 2.125-2.125h9.5c1.174 0 2.125.951 2.125 2.125v9.5a2.125 2.125 0 0 1-2.125 2.125h-9.5a2.125 2.125 0 0 1-2.125-2.125zm2.125-.875a.875.875 0 0 0-.875.875v9.5c0 .483.392.875.875.875h9.5a.875.875 0 0 0 .875-.875v-9.5a.875.875 0 0 0-.875-.875z"})]})},a=(0,s(340498).wt)("arrowUpRightSquare",n)},232461:(e,t,s)=>{s.d(t,{J:()=>l});var i=()=>s(484714),n=()=>s(56366),a=()=>s(765957),r=()=>s(329304),o=()=>s(787766);function l(){const e=(0,n().O$)(a().AppStoreCurrentSpaceStore),t=(0,i().v3)(),s=(0,n().K8)((()=>{var e;return null===(e=t.currentUser)||void 0===e?void 0:e.id}),[t]),l=(0,n().K8)((()=>t.device.isMobile),[t]),d=(0,r().P9)({name:"slack_imports_invite",spaceId:null==e?void 0:e.id,userId:s}),c=(0,r().P9)({name:"google_imports_invite",spaceId:null==e?void 0:e.id,userId:s}),u=(0,n().K8)((()=>(null==e?void 0:e.canEditMembership())??!1),[e]);return(0,o().vC)({canEditPermission:u,isMobile:l,hasAccessToFeature:(d||c)??!1})}},235741:(e,t,s)=>{s.d(t,{P:()=>r});s(296540);var i=()=>s(959013),n=()=>s(534177),a=s(474848);function r(e){if(e.canArchive)return null;const t=e.reason;switch(t){case"isNotOwnerOfTeam":return(0,a.jsx)("div",{style:{whiteSpace:"normal"},children:(0,a.jsx)(i().sA,{id:"sidebar.outlinerTeamToggleButton.cannotArchiveTooltip.notOwner",defaultMessage:"Only teamspace owners can archive teamspaces"})});case"multipleUnarchivedTeams":return(0,a.jsx)("div",{style:{whiteSpace:"normal"},children:(0,a.jsx)(i().sA,{id:"sidebar.outlinerTeamToggleButton.cannotArchiveTooltip.multipleUnarchivedTeams",defaultMessage:"To archive, make another teamspace default or archive all other teamspaces"})});case"multipleWorkspaceMembers":case"invalidUserOrSpaceView":return(0,a.jsx)("div",{style:{whiteSpace:"normal"},children:(0,a.jsx)(i().sA,{id:"sidebar.outlinerTeamToggleButton.cannotArchiveTooltip.moreThanOneMember",defaultMessage:"To archive, there must only be one member in the workspace"})});default:(0,n().HB)(t)}}},238453:(e,t,s)=>{s.d(t,{U4:()=>w,Wz:()=>T,e6:()=>j,fC:()=>A,zA:()=>C});s(898992),s(354520),s(581454),s(737550);var i=s(296540),n=()=>s(484714),a=()=>s(56366),r=()=>s(187174),o=()=>s(798880),l=()=>s(196131),d=()=>s(496603),c=()=>s(720665),u=()=>s(746970),g=()=>s(449506),p=()=>s(751156),m=()=>s(47373),f=()=>s(773442),h=()=>s(765957),S=()=>s(21735),x=()=>s(217429),b=()=>s(630116),y=()=>s(134217),v=()=>s(749240);function j(e){let{spaceStore:t,requestType:s}=e;const i=A({spaceStore:t}),o=(0,n().v3)(),[{value:l=[]}]=(0,r().Yb)((async()=>{if(!i)return;const e=await g().callApi({eventName:"getAccessRequests",environment:o,data:{parentTable:"space",parentId:t.id,size:100,status:"pending"}});if("failed"===e.type)throw e.error;const s=e.data.accessRequestIds;return u().si(o,t,s)}),[t,o,i]),c=(0,a().K8)((()=>l.filter((e=>"pending"===e.accessRequest.status))),[l]),p=(0,f().T)({spaceStore:t,requests:c}),m=(0,a().K8)((()=>(0,d().yU)(c,p??[]).filter((e=>{const[t,i]=e;return"member"===s&&"space_membership_request"===i||("guest"===s&&"guest_invite_request"===i||"member_or_guest"===s&&("guest_invite_request"===i||"space_membership_request"===i))})).map((e=>{let[t]=e;return t}))),[s,p,c]);return(0,d().oE)(m)}function A(e){let{spaceStore:t}=e;return(0,a().K8)((()=>t.canEditMembership()&&(0,m().x3)()),[t])}function C(e){let{spaceStore:t,internalDomains:s}=e;const i=(0,n().v3)(),[{value:a}]=(0,r().Yb)((async()=>{if(0===s.length)return!1;let e;if(S().A.state.shouldUseEdgeCache&&x().default.checkGate({gateName:"edge_cache_plus_settings"})){const n=await g().callApi({eventName:"listUsers",environment:i,data:{cursor:void 0,membershipFilter:"guests",limit:1,spaceId:t.id,includeDomains:s.map((e=>e.url))}});if("success"!==n.type)return!1;e=n.data.users.length>0}else{const i=v().subscriptionDataStoreInstance.state;if(!i)return!1;e=(0,y().oe)(i).map((e=>b().LU.createChildStore(t,{table:o().oo,id:e.userId}).getModel())).some((e=>(0,l().JD)(e,s)))}return t.canEditMembership()&&e&&"enterprise"!==t.getSubscriptionTier()}),[i,s,t]);return a??!1}function w(e){let{requestType:t,spaceStore:s}=e;const i=j({spaceStore:s,requestType:t});return(0,a().K8)((()=>{const{currentSpaceViewStore:e}=h().default.state;if(e)return i.filter((s=>{const i=function(e){var t,s;let{requestType:i,currentSpaceViewStore:n}=e;const a=Date.now()-10*c().Gq,r="member"===i?null===(t=n.getSettings())||void 0===t?void 0:t.last_opened_member_request_tab:null===(s=n.getSettings())||void 0===s?void 0:s.last_opened_guest_request_tab;return r??a}({requestType:t,currentSpaceViewStore:e});return i<s.accessRequest.created_time})).length}),[t,i])}function T(e){let{requestType:t,spaceStore:s}=e;const a=(0,n().v3)(),r=A({spaceStore:s});(0,i.useEffect)((()=>{const{currentSpaceViewStore:e}=h().default.state;e&&r&&"member"!==t&&p().createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:a,canUndo:!0,perform:t=>{p().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_guest_request_tab"],command:"set",args:Date.now()},transaction:t})}})}),[t,a,r]),(0,i.useEffect)((()=>()=>{const{currentSpaceViewStore:e}=h().default.state;e&&r&&"guest"!==t&&p().createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:a,canUndo:!0,perform:t=>{p().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_member_request_tab"],command:"set",args:Date.now()},transaction:t})}})}),[t,a,r])}},238518:(e,t,s)=>{s.r(t),s.d(t,{OutlinerTeamOverflow:()=>ne,TeamOverflowMenu:()=>ae});s(898992),s(354520),s(581454);var i=s(296540),n=()=>s(484714),a=()=>s(56366),r=()=>s(401497),o=()=>s(934999),l=()=>s(26440),d=()=>s(764781),c=()=>s(126617),u=()=>s(212727),g=()=>s(35588),p=()=>s(97835),m=()=>s(835607),f=s(474848);const h=(0,s(340498).wt)("personAdmin",{viewBox:"0 0 15 16",svg:(0,f.jsx)("path",{d:"M6.082 7.215a2.71 2.71 0 001.504-.438c.451-.296.811-.69 1.08-1.182a3.352 3.352 0 00.403-1.634 3.21 3.21 0 00-.403-1.6 3.059 3.059 0 00-1.08-1.141A2.776 2.776 0 006.082.796c-.547 0-1.048.143-1.504.43a3.153 3.153 0 00-1.087 1.156 3.195 3.195 0 00-.403 1.593 3.39 3.39 0 00.41 1.627c.269.487.629.88 1.08 1.175a2.71 2.71 0 001.504.438zm0-1.19c-.314 0-.606-.088-.875-.266a1.974 1.974 0 01-.636-.738 2.247 2.247 0 01-.239-1.046c0-.379.08-.718.24-1.019.159-.3.37-.538.635-.71.264-.179.556-.267.875-.267.319 0 .61.086.875.26.264.172.476.41.636.71.16.296.239.634.239 1.012 0 .387-.08.738-.24 1.053-.159.31-.37.556-.635.738a1.508 1.508 0 01-.875.273zm-4.266 7.54h5.948a3.113 3.113 0 01-.082-.752v-.43H1.59c-.082 0-.141-.014-.178-.041-.032-.027-.048-.073-.048-.137 0-.26.105-.56.315-.902.21-.342.512-.673.909-.992.4-.323.893-.59 1.476-.8.588-.213 1.26-.32 2.017-.32a5.648 5.648 0 011.92.328c.17-.42.466-.732.89-.937a6.605 6.605 0 00-1.313-.417 6.856 6.856 0 00-1.497-.157c-.92 0-1.75.139-2.488.417-.739.273-1.372.631-1.9 1.073-.525.442-.928.918-1.21 1.429-.279.51-.418.998-.418 1.463 0 .784.584 1.175 1.75 1.175zm6.843-.731c0 .438.091.804.274 1.1.182.297.469.58.861.848.392.274.907.588 1.545.944a.6.6 0 00.294.082.62.62 0 00.335-.082c.638-.36 1.153-.675 1.545-.944.392-.269.679-.551.861-.847.182-.297.274-.664.274-1.101v-2.468a.979.979 0 00-.137-.54c-.087-.141-.24-.26-.458-.355a17.47 17.47 0 00-.417-.15c-.182-.069-.38-.14-.595-.213-.21-.077-.403-.145-.581-.205a13.002 13.002 0 01-.403-.15 1.263 1.263 0 00-.417-.055c-.146 0-.292.028-.438.082-.077.028-.205.07-.383.13l-.574.198c-.205.073-.399.144-.58.212-.183.064-.32.114-.411.15-.219.096-.374.215-.465.356a1.02 1.02 0 00-.13.54v2.468zm2.598 1.326a.601.601 0 01-.212-.04.416.416 0 01-.178-.124l-1.155-1.244a.671.671 0 01-.096-.178.492.492 0 01-.034-.178c0-.145.048-.264.144-.355a.492.492 0 01.341-.13.485.485 0 01.363.15l.793.869 1.613-2.229a.484.484 0 01.41-.219c.132 0 .246.048.342.144.1.091.15.205.15.342 0 .04-.009.086-.027.136a.463.463 0 01-.075.15l-1.983 2.722c-.086.123-.218.184-.396.184z"})});var S=()=>s(617668),x=()=>s(979340),b=()=>s(468006),y=()=>s(959013),v=()=>s(534177),j=()=>s(416726),A=()=>s(946141),C=()=>s(575143),w=()=>s(452558),T=()=>s(704152),M=()=>s(406699),k=()=>s(928600),I=()=>s(8980),D=()=>s(89924),R=()=>s(859428),_=()=>s(986863),P=()=>s(38337),B=()=>s(722872),U=()=>s(37433),L=()=>s(632709),O=()=>s(962730),q=()=>s(765957),W=()=>s(463830),E=()=>s(205618),z=()=>s(486130),F=()=>s(406965),N=()=>s(475355),G=()=>s(848237);s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698);function K(e){let{adminStatus:t,accessLevel:s,isArchivedTeam:i}=e;if("adminThatCanPerformPrivilegedActions"===t)return new Set(["join","joinAsOwner"]);if(i)switch(t){case"none":return new Set;case"admin":return new Set("open"===s?["join"]:[]);default:(0,v().HB)(t)}switch(s){case"open":return new Set(["join"]);case"closed":case"private":return new Set;default:(0,v().HB)(s)}}var V=()=>s(931956),H=()=>s(605685),$=()=>s(685781),Y=()=>s(233510),J=()=>s(976519),Q=()=>s(211825),Z=()=>s(418426),X=()=>s(235741);const ee=["join","view","add","duplicate","leave","archive","restore"],te=["add"],se=["join","joinAsOwner","upgradeSelfToOwner","leave"],ie=(0,y().YK)({add:{defaultMessage:"Add members",id:"sidebar.outlinerTeamToggleButton.addLabel"},leave:{defaultMessage:"Leave teamspace",id:"sidebar.outlinerTeamToggleButton.leaveLabel"},joinAsOwner:{defaultMessage:"Join as owner",id:"sidebar.outlinerTeamToggleButton.joinAsOwnerLabel"},joinAsMember:{defaultMessage:"Join as member",id:"sidebar.outlinerTeamToggleButton.joinAsMemberLabel"},joinTeamspace:{defaultMessage:"Join teamspace",id:"sidebar.outlinerTeamToggleButton.joinLabel"},upgradeSelfToOwner:{defaultMessage:"Become owner",id:"sidebar.outlinerTeamToggleButton.upgradeSelfToOwnerLabel"},archive:{defaultMessage:"Archive teamspace",id:"sidebar.outlinerTeamToggleButton.archiveLabel"},restore:{defaultMessage:"Restore teamspace",id:"outlinerTeamOverflow.teamActions.restoreLabel"},duplicate:{defaultMessage:"Duplicate teamspace",id:"sidebar.outlinerTeamToggleButton.duplicateLabel"},teamspaceSettings:{defaultMessage:"Teamspace settings",id:"sidebar.outlinerTeamToggleButton.ownerViewLabel"},viewMembers:{defaultMessage:"View members",id:"sidebar.outlinerTeamToggleButton.unjoinedMemberViewLabel"}});function ne(e){let{teamStore:t,style:s,from:i,hideJoin:o,onPopupClick:l,onPopupClose:d}=e;const u=(0,n().Y0)(),g=(0,y().tz)(),p=(0,a().uB)(void 0,E().A),m=(0,a().O$)(q().AppStoreCurrentSpaceStore),h=(0,a().uB)(void 0,W().A),S=(0,r().IS)((e=>({buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:20,width:20,...s}})),[s]),x=g.formatMessage({defaultMessage:"Teamspace settings and members...",id:"sidebar.outlinerTeamToggleButton.tooltip"});return m?u.isMobile?null:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(R().A,{textWrap:!1,renderTooltip:()=>x,placement:O().W.Bottom,render:e=>(0,f.jsx)(M().Ay,{popupType:M().z7.Popup,buttonPopupStore:h,alignmentToOrigin:M().yP.Start,originGap:2,renderOrigin:t=>(0,f.jsx)(T().A,{ariaLabel:x,className:P()._Oc,style:S.buttonStyle,...e,...t,children:(0,f.jsx)(I().I,{icon:c().Y,size:"sm",color:"secondary"})}),render:e=>(0,f.jsx)(ae,{teamStore:t,permissionsInviteStore:p,onDismiss:e.close,from:i,hideJoin:o,buttonPopupStore:h}),onClick:l,onClose:d})}),(0,f.jsx)(_().u,{permissionsInviteStore:p,store:t})]}):null}function ae(e){const{teamStore:t,permissionsInviteStore:s,onDismiss:c,from:T,hideJoin:M,buttonPopupStore:_}=e,W=(0,r().DP)(),E=(0,n().v3)(),ne=(0,r().IS)((()=>({menuItemButton:{minWidth:200},caption:{minWidth:230}})),[]),ae=(0,a().O$)(q().AppStoreCurrentSpaceStore),re=(0,Q().G)(t),oe=(0,a().K8)((()=>(0,b().Sh)({archived_by:t.getArchivedBy()})),[t]),le=E.currentUser.id,de=(0,a().K8)((()=>z()._.getSpacePermissionGroupIds({userId:le,spaceId:null==ae?void 0:ae.id})),[le,ae]),ce=(0,a().K8)((()=>le?t.getTeamRoleForUser(le,de)??"none":"none"),[le,t,de]),ue=(0,a().K8)((()=>!(!t.isDefined()||!le)&&Boolean(t.isOwner(le))),[le,t]),ge=(0,J().q)(t.id),pe=(0,V().X)(t),{id:me,name:fe,isDefault:he}=(0,a().K8)((()=>({id:t.id,name:t.getName(),isDefault:t.isDefault()})),[t]),Se=(0,H().c)(),xe=(0,a().K8)((()=>(0,U().sx)({environment:E,spaceStore:ae})),[ae,E]),be=(0,$().a)(T),ye=function(e){const{isDefault:t,accessLevel:s,settings:i}=(0,a().K8)((()=>({isDefault:e.isDefault(),accessLevel:e.getTeamAccessLevel(),settings:e.getSettings()})),[e]),n="private"===s,r=(0,Y().c)(),o=n&&!r?"business":void 0,l=(null==i?void 0:i.disable_public_access)||(null==i?void 0:i.disable_export)||(null==i?void 0:i.disable_guests),d=(0,Y().Z)(),c=l&&!d?"enterprise":void 0,u=(0,x().hW)([c,o]);if(t)return"isDefault";if(u)return u}(t),ve="isDefault"===(je=ye)?(0,f.jsx)(y().sA,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateDefaultTeamspace",defaultMessage:"Cannot duplicate a default teamspace"}):"business"===je?(0,f.jsx)(y().sA,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateTeamspaceWithBusinessFeaturesOnDowngradedAccount",defaultMessage:"Cannot duplicate a teamspace with settings only allowed on Business plans or above"}):"enterprise"===je?(0,f.jsx)(y().sA,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateTeamspaceWithEnterpriseFeaturesOnDowngradedAccount",defaultMessage:"Cannot duplicate a teamspace with settings only allowed on Enterprise plans or above"}):void 0===je?void 0:(0,v().HB)(je);var je;const Ae=(0,a().K8)((()=>t.getTeamAccessLevel()),[t]),Ce=(0,Z().$)(t),we=(0,i.useCallback)((e=>{A().ks(E,{store:t,from:T,option:e})}),[E,t,T]),Te=ge&&!Se.canArchive,Me=(0,a().K8)((()=>Boolean(null==ae?void 0:ae.canAdmin())),[ae]),{joinLeaveOptionsToShow:ke,leaveOptionDisabledState:Ie}=function(e){let{teamRole:t,adminStatus:s,isDefaultTeam:i,accessLevel:n,isArchivedTeam:a}=e;switch(t){case"owner":case"member":const e=new Set,r=!a;return r&&e.add("leave"),"owner"!==t&&"adminThatCanPerformPrivilegedActions"===s&&e.add("upgradeSelfToOwner"),{joinLeaveOptionsToShow:e,leaveOptionDisabledState:r&&i?{disabled:!0,disabledReasonKey:"defaultTeam"}:void 0};case"team_level_guest":return{joinLeaveOptionsToShow:new Set,leaveOptionDisabledState:void 0};case"none":return{joinLeaveOptionsToShow:K({adminStatus:s,accessLevel:n,isArchivedTeam:a}),leaveOptionDisabledState:void 0};default:(0,v().HB)(t)}}({teamRole:ce,adminStatus:be?"adminThatCanPerformPrivilegedActions":Me?"admin":"none",isArchivedTeam:oe,isDefaultTeam:he,accessLevel:Ae}),De=ke.has("joinAsOwner"),Re=be&&!(1===ke.size&&ke.has("leave")),_e=(0,a().K8)((()=>(0,U().mN)(t)),[t]),Pe={add:{type:"action",show:!oe&&pe,handle:()=>{s.update((e=>({...e,modalOpen:!0})))},title:ie.add,icon:(0,f.jsx)(I().I,{icon:p().x})},leave:{type:"action",...Re&&{colorOverride:W.redBadgeBackground},show:ke.has("leave"),handle:()=>{G().JC({environment:E,teamStore:t,from:T,userGroupsInTeam:Ce})},title:ie.leave,disabled:Boolean(null==Ie?void 0:Ie.disabled),icon:(0,f.jsx)(I().I,{icon:g()._}),disabledTooltipText:"defaultTeam"===(null==Ie?void 0:Ie.disabledReasonKey)&&(0,f.jsx)(y().sA,{id:"sidebar.outlinerTeamToggleButton.cannotLeaveDefaulTeamTooltip",defaultMessage:"Cannot leave a default teamspace"})},join:{type:"action",show:!M&&ke.has("join"),handle:async()=>{if(ae)switch(Ae){case"open":await G().e2({environment:E,teamStore:t,currentSpaceStore:ae,from:T,andNavigateToTeamHome:!1});break;case"closed":case"private":await G().z9({environment:E,teamStore:t,currentSpaceStore:ae,from:T,action:"joinClosedOrPrivateTeamAsMember"});break;default:(0,v().HB)(Ae)}},title:De?ie.joinAsMember:ie.joinTeamspace,icon:(0,f.jsx)(I().I,{icon:S().plusIcon,color:"secondary"})},joinAsOwner:{type:"action",show:De,handle:()=>G().z9({environment:E,teamStore:t,currentSpaceStore:ae,from:T,action:"joinTeamAsOwner"}),title:ie.joinAsOwner,icon:(0,f.jsx)(I().I,{icon:h})},upgradeSelfToOwner:{type:"action",show:ke.has("upgradeSelfToOwner"),handle:()=>G().z9({environment:E,teamStore:t,currentSpaceStore:ae,from:T,action:"upgradeToOwner"}),title:ie.upgradeSelfToOwner,icon:(0,f.jsx)(I().I,{icon:h})},archive:{type:"action",show:!oe&&ue,colorOverride:W.redBadgeBackground,handle:async()=>{Te||(await G().mm({teamStore:t,environment:E,from:T}),F().P({environment:E,messageStoreEmitValue:-1}))},title:ie.archive,disabled:Te,disabledTooltipText:(0,X().P)(Se),icon:(0,f.jsx)(I().I,{icon:o().B})},restore:{type:"action",show:oe,handle:async()=>{ue&&_e&&(await G().Q8({environment:E,teamStore:t,teamName:fe,from:T}),F().P({environment:E,messageStoreEmitValue:-1}))},title:ie.restore,icon:(0,f.jsx)(I().I,{icon:l().w}),disabled:!_e||!ue,disabledTooltipText:_e?(0,f.jsx)(y().sA,{id:"outlinerTeamOverflow.restoreArchivedTeam.disabledTooltipText.notOwner",defaultMessage:"Only teamspace owners can restore archived teamspaces."}):(0,f.jsx)(y().sA,{id:"outlinerTeamOverflow.restoreArchivedTeam.disabledTooltipText.noDefaultTeam",defaultMessage:"You must have an active default teamspace to restore this {accessLevel} teamspace.",values:{accessLevel:Ae}})},duplicate:{type:"action",show:!oe&&xe,handle:()=>{N().hX({environment:E,teamStore:t,from:T,buttonPopupStore:_})},title:ie.duplicate,disabled:void 0!==ye,icon:(0,f.jsx)(I().I,{icon:d().V}),disabledTooltipText:ve,caption:(0,f.jsx)(y().sA,{id:"sidebar.outlinerTeamToggleButton.duplicateCaption",defaultMessage:"Duplicates permissions and other settings but not pages and members"})},view:{type:"action",show:!oe,handle:()=>G().F2({environment:E,teamId:me,tab:L().p.Members,from:T}),title:re&&!oe?ie.teamspaceSettings:ie.viewMembers,icon:re?(0,f.jsx)(I().I,{icon:u().gearIcon}):(0,f.jsx)(I().I,{icon:m().peopleIcon})}},Be=(Re?[{sectionName:"join/leave section",orderedOptions:se},{sectionName:"other actions",orderedOptions:ee.filter((e=>!se.includes(e)))}]:[{sectionName:"add section",orderedOptions:te},{sectionName:"other actions section",orderedOptions:ee.filter((e=>!te.includes(e)))}]).map((e=>{const t=e.orderedOptions.filter((e=>Pe[e].show));if(0!==t.length)return{sectionName:e.sectionName,filteredOptions:t}})).filter(v().O9).map((e=>{const t=e.filteredOptions.map((e=>{const t=Pe[e],{type:s}=t;return"action"===s?(0,j().Ls)({key:e,displayName:t.title,analyticsName:t.title.defaultMessage,svg:()=>t.icon,validators:[],closeParentMenu:!0,action:()=>{c(),we(e),t.handle()},render:e=>(0,f.jsx)(R().A,{placement:O().W.Left,textWrap:!1,disableTooltip:!(t.disabled&&t.disabledTooltipText),renderTooltip:()=>t.disabledTooltipText,render:s=>(0,f.jsx)(C().A,{...e,...s,svg:()=>t.icon,title:(0,f.jsx)(y().sA,{...t.title}),buttonStyle:{...ne.menuItemButton,...!t.disabled&&t.colorOverride?{fill:t.colorOverride,color:t.colorOverride}:{fill:W.icon.primary,color:W.text.primary}},disabled:t.disabled,disabledFeedback:t.disabled,caption:t.caption,captionStyle:ne.caption,shouldWrapCaption:!0})})}):"extensionAction"===s?(0,j().uk)({key:e,displayName:t.title,analyticsName:t.title.defaultMessage,svg:()=>t.icon,width:250,validators:[],subActions:()=>t.subActionSections.map((t=>({...t,actions:t.actions.map((t=>({...t,action:s=>{c(),we(e),t.action(s)}})))})))}):void(0,v().HB)(s)}));return(0,j().gy)({key:e.sectionName,render:e=>(0,f.jsx)(D().A,{...e}),actions:t})}));return(0,f.jsx)(k().A,{className:P()._En,menuType:B().gu.Popup,minWidth:"100%",children:(0,f.jsx)(w().A,{context:{blocks:[],environment:E,publicEditMode:void 0},sections:Be,initialFocus:void 0})})}},274041:(e,t,s)=>{s.d(t,{$O:()=>r,cN:()=>o,fh:()=>a,h5:()=>l});var i=()=>s(645873);const n={PublicPagesSection:new(i().O2)("PublicPagesSection",(()=>Promise.all([s.e(25700),s.e(91325)]).then(s.bind(s,692536)))),DomainsSection:new(i().O2)("DomainsSection",(()=>Promise.all([s.e(98775),s.e(33996),s.e(27229),s.e(56859)]).then(s.bind(s,312338)))),GeneralAccessPermissionSection:new(i().O2)("PublishedSiteSettings",(()=>Promise.all([s.e(31889),s.e(77651)]).then(s.bind(s,598697)))),FormShareMenu:new(i().O2)("FormShareMenu",(()=>Promise.all([s.e(9304),s.e(39541),s.e(45620),s.e(58102),s.e(25700),s.e(9066),s.e(51859)]).then(s.bind(s,830422))))},a=(0,i()._h)(n.PublicPagesSection,(e=>e.PublicPagesSection)),r=(0,i()._h)(n.DomainsSection,(e=>e.DomainsSection)),o=(0,i()._h)(n.GeneralAccessPermissionSection,(e=>e.GeneralAccessPermissionSection)),l=(0,i()._h)(n.FormShareMenu,(e=>e.FormShareMenu))},353147:(e,t,s)=>{s.d(t,{b:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("at",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M.911 8.034c0 4.505 3.049 7.24 7.246 7.24 1.135 0 2.215-.158 2.885-.376.472-.15.622-.397.622-.65a.44.44 0 00-.451-.444 1.3 1.3 0 00-.321.048c-.834.205-1.552.341-2.516.341-3.74 0-6.29-2.255-6.29-6.118 0-3.698 2.407-6.275 6.03-6.275 3.206 0 5.886 1.975 5.886 5.523 0 2.072-.697 3.466-1.825 3.466-.752 0-1.176-.437-1.176-1.183V4.972c0-.37-.205-.595-.554-.595-.341 0-.553.226-.553.595v.779h-.062c-.349-.84-1.203-1.374-2.222-1.374-1.77 0-3.014 1.51-3.014 3.678 0 2.187 1.237 3.712 3.042 3.712 1.06 0 1.88-.575 2.276-1.545h.062c.13.963.943 1.551 2.023 1.551 1.907 0 3.09-1.873 3.09-4.498 0-3.971-2.92-6.548-6.96-6.548C3.886.727.912 3.632.912 8.034zm6.911 2.652c-1.223 0-2.003-1.018-2.003-2.638 0-1.593.786-2.611 2.01-2.611 1.258 0 2.05.998 2.05 2.584 0 1.62-.813 2.665-2.057 2.665z"})})},367049:(e,t,s)=>{s.d(t,{X:()=>a});var i=()=>s(56366),n=()=>s(765957);function a(){return(0,i().K8)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:t}=n().default.state;if(!e||!t)return!1;const s=e.getMemberCountFromPublicSpaceData(),i=t.getWorkspacePages()??[];return 1===s&&0===i.length&&"personal"===e.getPlanType()}),[])}},382055:(e,t,s)=>{s.d(t,{$3:()=>u,AQ:()=>d,Ae:()=>l,BL:()=>c,FL:()=>o,FX:()=>n,Vp:()=>r,XL:()=>a,nY:()=>g});var i=()=>s(679924);function n(e,t){(0,i().v)(e,"workspace_creation_ability",t)}function a(e,t){(0,i().v)(e,"workspace_creation_setting_updated",t)}function r(e,t){(0,i().v)(e,"claimable_spaces_viewed",t)}function o(e,t){(0,i().v)(e,"space_transfer_requested",t)}function l(e,t){(0,i().v)(e,"space_transfer_completed",t)}function d(e,t){(0,i().v)(e,"space_claim_upgrade_requested",t)}function c(e,t){(0,i().v)(e,"space_claim_upgrade_completed",t)}function u(e,t){(0,i().v)(e,"space_claim_deletion_started",t)}function g(e,t){(0,i().v)(e,"space_claim_deletion_canceled",t)}},406965:(e,t,s)=>{s.d(t,{P:()=>u,U:()=>c});s(581454);var i=()=>s(945382),n=()=>s(534177),a=()=>s(37433),r=()=>s(646736),o=()=>s(765957),l=()=>s(134206),d=()=>s(912979);function c(){l().A.reset(),d().A.reset()}async function u(e){let{environment:t,messageStoreEmitValue:s,spaceStore:l}=e;if(!function(e){const t=d().A.state;switch(t.loadingState){case"uninitialized":return!0;case"loading":return!1;case"loaded":return-1===e||e!==t.messageStoreEmitValue;default:(0,n().HB)(t)}}(s))return!1;const{currentSpaceStore:c,currentUserStore:u}=o().default.state,g=c||l;if(!g||!u)return!1;"uninitialized"===d().A.state.loadingState&&d().A.setState({loadingState:"loading"});const p=await async function(e){let{environment:t,currentSpaceStore:s,currentUserStore:n}=e;const o=s.getModel(),l=n.id,d=(0,r().dp)(s,l).getModel();if(void 0===o||void 0===d)return;if((0,i().fK)({space:o,spaceUser:d})){return await(0,a().S)({environment:t,spaceStore:s,includeArchived:!0,currentUserId:l,minRoleOnTeamStores:"reader"})}const c=await(0,a().qd)({fromCache:!1,environment:t,spaceStore:s,includeArchived:!0,currentUserId:l});if(!c)return;return c.teams}({environment:t,currentSpaceStore:g,currentUserStore:u});if(!(0,n().O9)(p))return d().A.setState({loadingState:"uninitialized"}),!1;const{archivedTeams:m,unarchivedTeams:f}=(0,a().vd)(p);return d().A.setState({loadingState:"loaded",archivedTeamIds:m.map((e=>e.id)),unarchivedTeamIds:f.map((e=>e.id)),messageStoreEmitValue:s}),!0}},441977:(e,t,s)=>{s.d(t,{J:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("sidebarHome",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.54446 3.06854C9.8066 2.84385 10.1934 2.84385 10.4556 3.06854L15.7064 7.56922C16.0832 7.89219 16.3 8.36369 16.3 8.85996V14.6C16.3 15.5389 15.5389 16.3 14.6 16.3H11.75C11.3634 16.3 11.05 15.9866 11.05 15.6V11.7H8.95001V15.6C8.95001 15.9866 8.63661 16.3 8.25001 16.3H5.40001C4.46113 16.3 3.70001 15.5389 3.70001 14.6V8.85996C3.70001 8.36369 3.91687 7.89219 4.29367 7.56922L9.54446 3.06854ZM10 4.52198L5.20477 8.63218C5.13828 8.68918 5.10001 8.77238 5.10001 8.85996V14.6C5.10001 14.7657 5.23433 14.9 5.40001 14.9H7.55001V11.5C7.55001 10.8373 8.08727 10.3 8.75001 10.3H11.25C11.9128 10.3 12.45 10.8373 12.45 11.5V14.9H14.6C14.7657 14.9 14.9 14.7657 14.9 14.6V8.85996C14.9 8.77238 14.8617 8.68918 14.7952 8.63218L10 4.52198Z"})})},452745:(e,t,s)=>{s.d(t,{u:()=>n});s(296540);const i={viewBox:"0 0 16 16",fittedViewBox:"2.85 2.2 10.29 11.6",svg:(0,s(474848).jsx)("path",{d:"M7.755 2.26a.55.55 0 0 1 .49 0l.962.482a7.3 7.3 0 0 0 3.277.774h.11c.302 0 .547.244.547.547v4.333a4.92 4.92 0 0 1-2.983 4.524l-1.943.833a.55.55 0 0 1-.43 0l-1.943-.833A4.92 4.92 0 0 1 2.86 8.396V4.062c0-.302.245-.546.547-.546h.11c1.138 0 2.26-.265 3.277-.774zm2.567 4.123a.55.55 0 0 0-.944-.566L7.371 9.163 6.268 7.875a.55.55 0 1 0-.836.716l1.6 1.867a.55.55 0 0 0 .89-.075z"})},n=(0,s(340498).wt)("checkmarkShieldFillSmall",i)},457638:(e,t,s)=>{s.d(t,{lR:()=>U,P6:()=>I,uF:()=>D,pG:()=>B,ug:()=>R,j$:()=>P,DZ:()=>k});s(296540);var i=()=>s(340498),n=s(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M6.575 10A3.425 3.425 0 0 1 10 6.575v-.64c0-.445.533-.664.847-.35l1.328 1.329a.49.49 0 0 1 0 .7l-1.328 1.329a.495.495 0 0 1-.847-.35v-.918A2.325 2.325 0 1 0 12.325 10a.55.55 0 1 1 1.1 0 3.425 3.425 0 0 1-6.85 0"}),(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},r=(0,i().wt)("arrowInCircleClockwiseInCircle",a);var o=()=>s(973238);const l={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.12 16.53 14.66",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v6.04l-1.25-.632V7.5H3.625v6.25c0 .483.392.875.875.875h7.213l.454 1.25H4.5a2.125 2.125 0 0 1-2.125-2.125zm2.258.184a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25m2.625-.625a.625.625 0 1 0-1.25 0 .625.625 0 0 0 1.25 0m1.375.625a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25"}),(0,n.jsx)("path",{d:"m17.426 14.65.474-.17a.433.433 0 0 0 .047-.796l-5.644-2.85a.433.433 0 0 0-.604.533l2.268 6.239a.435.435 0 0 0 .815.007l.574-1.509 2.225 2.433a.758.758 0 1 0 1.122-1.022l-2.287-2.501z"})]})},d=(0,i().wt)("browserClick",l);var c=()=>s(12193);const u={viewBox:"0 0 20 20",fittedViewBox:"4.87 1.62 9.98 16.75",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.86 6.61a.969.969 0 1 0 0-1.938.969.969 0 0 0 0 1.937"}),(0,n.jsx)("path",{d:"M9.86 1.625a4.984 4.984 0 0 0-2.563 9.26v5.17c0 .18.078.351.213.47l1.938 1.695a.625.625 0 0 0 .823 0l1.937-1.695a.625.625 0 0 0 .063-.877l-1.104-1.289 1.104-1.288a.63.63 0 0 0 .15-.407v-1.779a4.984 4.984 0 0 0-2.563-9.26M6.124 6.609a3.734 3.734 0 1 1 5.394 3.347.63.63 0 0 0-.347.56v1.917l-1.303 1.52c-.2.234-.2.58 0 .813l1.05 1.226-1.06.927-1.312-1.148v-5.255a.63.63 0 0 0-.347-.56 3.73 3.73 0 0 1-2.075-3.347"})]})},g=(0,i().wt)("key",u);var p=()=>s(835607),m=()=>s(735790),f=()=>s(158469),h=()=>s(959013),S=()=>s(186445),x=()=>s(47373),b=()=>s(972435),y=()=>s(807778),v=()=>s(134217),j=()=>s(749240),A=()=>s(401497),C=()=>s(171347),w=()=>s(238453);function T(){const e=(0,s(56366).O$)(s(765957).AppStoreCurrentSpaceStore);return e?(0,n.jsx)(M,{spaceStore:e}):null}function M(e){let{spaceStore:t}=e;const s=((0,w().U4)({spaceStore:t,requestType:"guest"})??0)+((0,w().U4)({spaceStore:t,requestType:"member"})??0),i=(0,A().IS)((e=>({container:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",right:6,top:6},badge:{top:-3,right:-5}})),[]);return 0===s?null:(0,n.jsx)("div",{style:i.container,children:(0,n.jsx)(C().A,{count:s,style:i.badge,color:C().g.Red})})}const k=(0,h().YK)({offlineModeDebugTab:{id:"spaceSettingsSidebar.offlineModeDebugTab.title",defaultMessage:"Offline Mode"},offlineTab:{id:"spaceSettingsSidebar.offlineTab.title",defaultMessage:"Offline"},accountTab:{id:"spaceSettingsSidebar.accountTab.title",defaultMessage:"My account"},generalTab:{id:"spaceSettingsSidebar.generalTab.title",defaultMessage:"General"},settingsTab:{id:"spaceSettingsSidebar.settingsTab.title",defaultMessage:"Settings"},teamsTab:{id:"spaceSettingsSidebar.teamsTab.title",defaultMessage:"Teamspaces"},peopleTab:{id:"spaceSettingsSidebar.peopleTab.title",defaultMessage:"People"},membersTab:{id:"spaceSettingsSidebar.membersTab.title",defaultMessage:"Members"},explorePlansTab:{id:"spaceSettingsSidebar.explorePlansTab.title",defaultMessage:"Explore plans"},upgradePlanTab:{id:"spaceSettingsSidebar.upgradePlanTab.title",defaultMessage:"Upgrade plan"},billingTab:{id:"spaceSettingsSidebar.billingTab.title",defaultMessage:"Billing"},subscriptionTab:{id:"spaceSettingsSidebar.subscriptionTab.title",defaultMessage:"Subscription"},connectedAppsTab:{id:"spaceSettingsSidebar.connectedAppsTab.title",defaultMessage:"My connected apps"},connectionsTab:{id:"spaceSettingsSidebar.connectionsTab.title",defaultMessage:"Connections"},userConnectionsTab:{id:"spaceSettingsSidebar.userConnectionsTab.title",defaultMessage:"My connections"},securityTab:{id:"spaceSettingsSidebar.securityTab.title",defaultMessage:"Security"},securityAndDataTab:{id:"spaceSettingsSidebar.securityAndDataTab.title",defaultMessage:"Security & data"},identityTab:{id:"spaceSettingsSidebar.identityTab.title",defaultMessage:"Identity"},identityProvisioningTab:{id:"spaceSettingsSidebar.identity&ProvisioningTab.title",defaultMessage:"Identity & provisioning"},publicPagesTab:{id:"spaceSettingsSidebar.publicPages.title",defaultMessage:"Public pages"},sitesTab:{id:"spaceSettingsSidebar.sites.title",defaultMessage:"Sites"},customEmojiTab:{id:"spaceSettingsSidebar.emoji.title",defaultMessage:"Emoji"},adminContentSearchTab:{id:"spaceSettingsSidebar.adminContentSearch.title",defaultMessage:"Content search"},languageAndRegionTab:{id:"spaceSettingsSidebar.languageAndRegionTab.title",defaultMessage:"Language & region"},integrationsTab:{id:"spaceSettingsSidebar.integrationsTab.title",defaultMessage:"Integrations"},spaceConnectionsTab:{id:"spaceSettingsSidebar.spaceConnectionsTab.title",defaultMessage:"Connections"},auditLogTab:{id:"spaceSettingsSidebar.auditLogTab.title",defaultMessage:"Audit log"},notificationsAndSettings:{id:"spaceSettingsSidebar.notificationsAndSettings.title",defaultMessage:"My notifications & settings"},preferences:{id:"spaceSettingsSidebar.preferences.title",defaultMessage:"Preferences"},mySettings:{id:"spaceSettingsSidebar.mySettings.title",defaultMessage:"My settings"},notifications:{id:"spaceSettingsSidebar.notifications.title",defaultMessage:"Notifications"},myNotifications:{id:"spaceSettingsSidebar.myNotifications.title",defaultMessage:"My notifications"},analyticsTab:{id:"spaceSettingsSidebar.analyticsTab.title",defaultMessage:"Analytics"},importTab:{id:"spaceSettingsSidebar.importsTab.title",defaultMessage:"Import"},verifiedPagesTab:{id:"spaceSettingsSidebar.verifiedPagesTab.title",defaultMessage:"Verified pages"},requestsTab:{id:"spaceSettingsSidebar.requestsTab.title",defaultMessage:"Requests"},experimentsTab:{id:"spaceSettingsSidebar.experimentsTab.title",defaultMessage:"Experiments"},performanceToolbarTab:{id:"spaceSettingsSidebar.performanceToolbarTab.title",defaultMessage:"Performance Toolbar"},userSimilarityScoresTab:{id:"spaceSettingsSidebar.userSimilarityScoresTab.title",defaultMessage:"User Similarity Scores"},collectionsDebugTab:{id:"spaceSettingsSidebar.collectionsDebug.title",defaultMessage:"Collections"},aiTab:{id:"spaceSettingsSidebar.aiTab.title",defaultMessage:"Notion AI"},designPreviewsTab:{id:"spaceSettingsSidebar.designPreviewsTab.title",defaultMessage:"Design Previews"}});function I(e,t){return{width:20,height:20,marginRight:8,color:t?e.text.uiBluePrimary:e.icon.primary,fill:t?e.text.uiBluePrimary:e.icon.primary,flexShrink:0}}function D(e){return{width:14,height:14,color:e.icon.primary}}const R={profile:(e,t)=>{const i=(0,S()._m)(e);return(0,y().xu)(e)&&i?(0,n.jsx)("div",{style:I(t),children:(0,n.jsx)(s(453697).A,{size:20,hasTooltip:!0,avatarShouldShowShadow:!0,userStore:i})}):(0,s(788621).personCircleIcon)()},notifications_and_settings:()=>(0,m().M)(),user_settings:()=>(0,m().M)(),notifications:()=>(0,s(104077).r)(),connected_apps:()=>(0,s(212473).arrowUpRightSquareIcon)(),language_and_region:()=>(0,c().globeIcon)(),offline:()=>(0,o().arrowInCircleDownIcon)(),settings:()=>(0,s(212727).gearIcon)(),teams:()=>(0,s(737693).V)(),members:()=>(0,p().peopleIcon)(),plans:e=>{const t=j().subscriptionDataStoreInstance.state;return t&&v().Fq(t)?(0,s(889074).O)():(0,y().xu)(e)?(0,s(132855).arrowInCircleUpFillIcon)():(0,s(911259).arrowInCircleUpIcon)()},billing:()=>(0,s(302995).creditCardIcon)(),subscription:()=>r(),requests:()=>(0,s(898615).F)(),security:()=>g(),identity_provisioning:()=>(0,s(15936).g)(),admin_content_search:()=>(0,s(207207).J)(),integrations:()=>(0,s(858141).p)(),audit_log:()=>(0,s(517397).F)(),analytics:()=>(0,f().f)(),imports:()=>(0,s(820579).f)(),sites:()=>d(),public_pages:()=>(0,c().globeIcon)(),custom_emoji:()=>(0,s(424139).emojiFaceIcon)(),experiments:()=>(0,s(824375).sparklesIcon)(),performance_toolbar:()=>(0,s(200582).m)(),user_similarity_scores:()=>(0,p().peopleIcon)(),collection_debug:()=>(0,s(62616).c)(),offline_mode_debug:()=>(0,o().arrowInCircleDownIcon)(),verified_pages:()=>(0,s(112665).J)(),ai:()=>(0,s(529099).aiFaceIcon)(),design_previews:()=>(0,f().f)()};function _(e){const t=(0,S()._m)(e);return(0,y().xu)(e)?t?(0,n.jsx)(s(683195).UserName,{userStore:t}):(0,n.jsx)(h().sA,{id:"spaceSettings.sidebar.personalSettingsSection.userDetails.title",defaultMessage:"Me"}):`${b().A.formatMessage(k.accountTab)}`}const P={profile:e=>_(e),notifications_and_settings:()=>b().A.formatMessage(k.notificationsAndSettings),user_settings:e=>(0,y().xu)(e)?b().A.formatMessage(k.preferences):b().A.formatMessage(k.mySettings),notifications:e=>(0,y().xu)(e)?b().A.formatMessage(k.notifications):b().A.formatMessage(k.myNotifications),connected_apps:e=>(0,y().xu)(e)?b().A.formatMessage(k.connectionsTab):b().A.formatMessage(k.userConnectionsTab),language_and_region:()=>b().A.formatMessage(k.languageAndRegionTab),offline:()=>b().A.formatMessage(k.offlineTab),settings:e=>(0,y().xu)(e)?b().A.formatMessage(k.generalTab):b().A.formatMessage(k.settingsTab),teams:()=>b().A.formatMessage(k.teamsTab),members:e=>(0,x().Qd)()||(0,x().bW)(e)?b().A.formatMessage(k.peopleTab):b().A.formatMessage(k.membersTab),plans:()=>function(){const e=j().subscriptionDataStoreInstance.state;if(v().Fq(e))return b().A.formatMessage(k.explorePlansTab);return b().A.formatMessage(k.upgradePlanTab)}(),billing:()=>b().A.formatMessage(k.billingTab),subscription:()=>b().A.formatMessage(k.subscriptionTab),requests:()=>b().A.formatMessage(k.requestsTab),security:e=>(0,y().xu)(e)?b().A.formatMessage(k.securityTab):b().A.formatMessage(k.securityAndDataTab),identity_provisioning:e=>(0,y().xu)(e)?b().A.formatMessage(k.identityTab):b().A.formatMessage(k.identityProvisioningTab),admin_content_search:()=>b().A.formatMessage(k.adminContentSearchTab),integrations:()=>b().A.formatMessage(k.spaceConnectionsTab),audit_log:()=>b().A.formatMessage(k.auditLogTab),analytics:()=>b().A.formatMessage(k.analyticsTab),imports:()=>b().A.formatMessage(k.importTab),sites:()=>b().A.formatMessage(k.sitesTab),public_pages:()=>b().A.formatMessage(k.publicPagesTab),custom_emoji:()=>b().A.formatMessage(k.customEmojiTab),verified_pages:()=>b().A.formatMessage(k.verifiedPagesTab),experiments:()=>b().A.formatMessage(k.experimentsTab),performance_toolbar:()=>b().A.formatMessage(k.performanceToolbarTab),user_similarity_scores:()=>b().A.formatMessage(k.userSimilarityScoresTab),collection_debug:()=>b().A.formatMessage(k.collectionsDebugTab),offline_mode_debug:()=>b().A.formatMessage(k.offlineModeDebugTab),ai:()=>b().A.formatMessage(k.aiTab),design_previews:()=>b().A.formatMessage(k.designPreviewsTab)},B={profile:()=>null,notifications_and_settings:()=>null,user_settings:()=>null,notifications:()=>null,connected_apps:()=>null,language_and_region:()=>null,offline:()=>null,settings:()=>null,teams:()=>null,members:e=>(0,x().bW)(e)&&(0,n.jsx)(T,{}),plans:()=>null,billing:()=>null,subscription:()=>null,requests:()=>null,security:()=>null,identity_provisioning:()=>null,sites:()=>null,public_pages:()=>null,custom_emoji:()=>null,admin_content_search:()=>null,integrations:()=>null,audit_log:()=>null,analytics:()=>null,imports:()=>null,verified_pages:()=>null,experiments:()=>null,performance_toolbar:()=>null,user_similarity_scores:()=>null,collection_debug:()=>null,offline_mode_debug:()=>null,ai:()=>(0,n.jsx)(s(147294).Ee,{newBadgeKey:"notion_ai_workspace_settings",didUserEngage:!1,keyType:"date"}),design_previews:()=>null};function U(e){switch(e){case"profile":case"notifications_and_settings":case"user_settings":case"notifications":case"connected_apps":case"language_and_region":case"offline":case"settings":case"members":case"plans":case"billing":case"subscription":case"security":case"identity_provisioning":case"admin_content_search":case"integrations":case"imports":case"teams":case"audit_log":case"analytics":case"sites":case"public_pages":case"custom_emoji":case"verified_pages":case"requests":case"experiments":case"performance_toolbar":case"user_similarity_scores":case"collection_debug":case"offline_mode_debug":case"ai":case"design_previews":return e;default:return}}},517397:(e,t,s)=>{s.d(t,{F:()=>a});s(296540);var i=s(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"2.4 2.88 15.21 14.27",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M7.975 5.175a.55.55 0 1 0 0 1.1h4.05a.55.55 0 1 0 0-1.1zm-.55 2.692a.55.55 0 0 1 .55-.55h4.05a.55.55 0 1 1 0 1.1h-4.05a.55.55 0 0 1-.55-.55"}),(0,i.jsx)("path",{d:"M2.4 4.861c0-1.092.883-1.975 1.975-1.975h8.55c1.092 0 1.975.883 1.975 1.975v7.889h2.075c.345 0 .625.28.625.625v1.8a1.973 1.973 0 0 1-1.975 1.975h-8.55A1.973 1.973 0 0 1 5.1 15.175V7.25H3.025a.625.625 0 0 1-.625-.625zM9.554 15.9h6.07a.723.723 0 0 0 .726-.725V14H9.5v1.175c0 .256-.049.5-.137.725zm-2.025 0c.4-.002.72-.325.72-.725v-1.8c0-.345.28-.625.626-.625h4.775V4.861a.723.723 0 0 0-.725-.725H6.213c.088.224.137.469.137.725v10.314c0 .402.323.725.725.725zM5.1 4.861a.723.723 0 0 0-.724-.725.723.723 0 0 0-.725.725V6H5.1z"})]})},a=(0,s(340498).wt)("scroll",n)},545274:(e,t,s)=>{s.d(t,{m:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("arrowUpCircled",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.993 15.126c.966 0 1.875-.185 2.728-.554a7.218 7.218 0 003.787-3.78 6.788 6.788 0 00.553-2.728c0-.966-.184-1.875-.553-2.727a7.136 7.136 0 00-1.531-2.25 7.219 7.219 0 00-2.256-1.53 6.805 6.805 0 00-2.735-.554c-.966 0-1.875.185-2.727.554a7.241 7.241 0 00-3.774 3.78 6.788 6.788 0 00-.553 2.727c0 .967.184 1.876.553 2.728.37.852.878 1.604 1.525 2.256a7.124 7.124 0 002.256 1.524 6.77 6.77 0 002.727.554zm0-1.395a5.598 5.598 0 01-4.013-1.654 5.735 5.735 0 01-1.21-1.804 5.567 5.567 0 01-.437-2.209c0-.783.146-1.517.438-2.2a5.715 5.715 0 011.21-1.812 5.6 5.6 0 011.797-1.217 5.599 5.599 0 012.208-.438c.789 0 1.525.146 2.208.438a5.66 5.66 0 013.029 3.028 5.55 5.55 0 01.437 2.201c0 .789-.146 1.525-.437 2.209a5.68 5.68 0 01-1.217 1.804 5.68 5.68 0 01-1.805 1.217 5.567 5.567 0 01-2.208.437zM8 11.51a.597.597 0 00.43-.164.584.584 0 00.172-.431V7.688L8.547 6.28l.622.78.759.793a.53.53 0 00.417.177c.16 0 .291-.052.396-.157a.518.518 0 00.164-.39.595.595 0 00-.164-.417L8.485 4.783A.664.664 0 008 4.558c-.173 0-.333.075-.479.225L5.26 7.066a.593.593 0 00-.157.417.538.538 0 00.554.547.557.557 0 00.416-.177l.766-.8.615-.766-.055 1.401v3.227c0 .173.057.317.171.43.114.11.258.165.431.165z"})})},578150:(e,t,s)=>{s.d(t,{x:()=>p});s(296540);var i=()=>s(959013),n=()=>s(802790),a=()=>s(843878),r=()=>s(8178),o=()=>s(963589),l=()=>s(454529),d=()=>s(931404),c=()=>s(682817),u=()=>s(413107),g=s(474848);function p(){const e=(0,i().tz)(),t=(0,o().X)("offline_clear_cache");return(0,g.jsxs)(a().Ay,{children:[(0,g.jsx)(r().A,{large:!0,divider:"full",children:e.formatMessage(l().y.offlineSettingsTitle)}),(0,g.jsx)(n().A,{size:24,isHidden:!0}),t?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u().L,{}),(0,g.jsx)(n().A,{size:80})]}):null,(0,g.jsx)(d().N,{}),(0,g.jsx)(n().A,{size:80}),(0,g.jsx)(c().v4,{})]})}},605685:(e,t,s)=>{s.d(t,{c:()=>d});s(898992),s(354520),s(581454);var i=()=>s(484714),n=()=>s(56366),a=()=>s(433847),r=()=>s(534177),o=()=>s(240865),l=()=>s(765957);function d(){const e=(0,i().v3)().currentUser.id,t=(0,n().O$)(l().AppStoreCurrentSpaceViewStore),s=(0,o().V)()??1;return(0,n().K8)((()=>e&&null!=t&&t.isDefined()?(0,a().z8)({userId:e,teamsThatUserIsANonGuestMemberOf:t.getNonGuestTeamsStores().map((e=>e.getModel())).filter(r().O9),spaceMembersCount:s}):{canArchive:!1,reason:"invalidUserOrSpaceView"}),[e,t,s])}},638743:(e,t,s)=>{s.d(t,{n:()=>l});var i=()=>s(484714),n=()=>s(187174),a=()=>s(534177),r=()=>s(449506);const o={};function l(e){let{spaceId:t}=e;const s=(0,i().v3)(),[{status:l,error:d,value:c}]=(0,n().Yb)((async()=>{if(!t)return{overrides:{},organizationInfo:void 0,isOrganizationOwner:!1};const e=await r().callApi({eventName:"getOrganizationSettingsOverrides",environment:s,data:{spaceId:t}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,a().HB)(e)}),[s,t]);return{organizationOverrides:(null==c?void 0:c.overrides)??o,organizationInfo:null==c?void 0:c.organizationInfo,isOrganizationOwner:null==c?void 0:c.isOrganizationOwner,loading:"pending"===l||"idle"===l,error:d}}},683195:(e,t,s)=>{s.r(t),s.d(t,{LazyExperimentSettings:()=>fm,SpaceSettings:()=>qm,UserName:()=>Am});s(16280);var i=s(296540),n=()=>s(804773),a=()=>s(484714),r=()=>s(852507),o=()=>s(56366),l=()=>s(401497),d=()=>s(553034),c=()=>s(449552),u=()=>s(901497),g=()=>s(206267),p=()=>s(762433),m=()=>s(979340),f=()=>s(959013),h=()=>s(496603),S=()=>s(284371),x=()=>s(746970),b=()=>s(881738),y=()=>s(559926),v=()=>s(278768),j=()=>s(901389),A=()=>s(209660),C=()=>s(755636),w=()=>s(426116),T=()=>s(804411),M=()=>s(72234),k=()=>s(751156),I=()=>s(755199),D=()=>s(21735),R=()=>s(217429),_=(s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),s(898992),s(803949),()=>s(604995)),P=()=>s(416845),B=()=>s(386164),U=()=>s(348564),L=()=>s(824862),O=()=>s(798880),q=()=>s(449506),W=()=>s(898486),E=()=>s(972435),z=()=>s(106628),F=()=>s(230357),N=()=>s(757695);class G extends N().Store{getInitialState(){return{spaceId:void 0,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set}}isUserOrBotRemoved(e){return Boolean(e&&(this.state.removedUserIds.has(e)||this.state.removedBotIds.has(e)))}}const K=new G;class V extends N().Store{getInitialState(){return{cachedResponses:{}}}getCursor(e,t,s){if(s<=1||this.state.spaceId!==e)return;const i=(0,F()._)(t);if(this.state.filterStr!==i)return;const n=this.state.cachedResponses[s-1];return"success"===n.status?null==n?void 0:n.nextCursor:void 0}startLoading(e,t){this.updateResultHelper(e,t,{status:"loading"})}updateLoadedResult(e,t,s){this.updateResultHelper(e,t,{...s,status:"success",loadedAt:Date.now()})}updateError(e,t){this.updateResultHelper(e,t,{status:"error"})}updateResultHelper(e,t,s){const i=(0,F()._)(t);1!==t.pageNum&&this.state.spaceId===e&&this.state.filterStr===i?this.setState({spaceId:e,filterStr:i,cachedResponses:{...this.state.cachedResponses,[t.pageNum]:{...s}}}):this.setState({spaceId:e,filterStr:i,cachedResponses:{[t.pageNum||1]:{...s}}})}}const H=new V,$=(0,f().YK)({loadCurrentAuditLogError:{id:"auditlog.error.loadCurrentAuditLogError",defaultMessage:"Failed to load audit logs"}});async function Y(e){const{environment:t,spaceId:s,excludeCurrentUsers:i}=e,n=await q().callApi({eventName:"getHistoricalAuditLogUsers",environment:t,data:{spaceId:s,excludeCurrentUsers:i}});return"success"!==n.type?[]:n.data.results}async function J(e){const{environment:t,spaceId:s,shouldUseEdgeCache:i}=e;if(K.getState().spaceId!==s&&K.reset(),!s)return;const n=await z().T.searchActions.load(),[a,r]=await Promise.all([i?{userIds:[],botIds:await n.getSpaceBotIds({environment:t})}:n.searchSpaceActorIds({environment:t,membersOnly:!1}),Y({environment:t,spaceId:s,excludeCurrentUsers:i})]),o={spaceId:s,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set};a.userIds.forEach((e=>{o.allUserIds.add(e)})),a.botIds.forEach((e=>{o.allBotIds.add(e)})),r.forEach((e=>{var t;(t=e.actorId)!==L().eR.id&&t!==O().BF.id&&t!==O().mc.id||o.allUserIds.has(e.actorId)?e.actorType!==O().oo||o.allUserIds.has(e.actorId)?e.actorType!==L().GP||o.allBotIds.has(e.actorId)||(o.allBotIds.add(e.actorId),o.removedBotIds.add(e.actorId)):(o.allUserIds.add(e.actorId),o.removedUserIds.add(e.actorId)):o.allUserIds.add(e.actorId)})),K.setState(o)}var Q=()=>s(416504),Z=()=>s(821879),X=()=>s(46413),ee=(s(354520),s(581454),()=>s(764880)),te=()=>s(824160),se=()=>s(448693),ie=()=>s(848401),ne=()=>s(457688),ae=()=>s(630116),re=()=>s(30731),oe=s(474848);const le=(0,f().j4)((function(e){const{parentStore:t,auditLogHistoricalUserStore:n,selectedActors:r,onChange:o,intl:l}=e,d=(0,a().v3)(),[c,u]=(0,i.useState)(new Set(r.map(re().Ht))),g=(0,oe.jsx)(f().sA,{id:"auditlogActorFilter.title",defaultMessage:"User"}),p=(0,i.useCallback)((()=>{const e=Array.from(c).map(re().Hl).filter((e=>void 0!==e));o(e)}),[c,o]),m=(0,i.useCallback)((()=>{const e=r.map(re().Ht);u(new Set(e))}),[r]),h=(0,i.useCallback)((e=>{"applyButton"!==e?m():p()}),[p,m]);return(0,oe.jsx)(Z().A,{mode:Z().C.Pill,title:g,icon:s(91451).z,iconStyles:{marginRight:2},items:Array.from(c),hasItemsSelected:(null==r?void 0:r.length)>0,onChange:e=>{u(new Set(e))},renderFooter:!0,allowApplyBatchSelection:!0,keepInputOnItemConfirm:!0,onMenuDismiss:h,labelText:{title:g,tokenInputPlaceholder:l.formatMessage({defaultMessage:"Search user...",id:"auditlogActorFilter.searchActor.placeholder"}),resultSectionTitle:l.formatMessage({defaultMessage:"Select users",id:"auditlogActorFilter.searchActor.resultsTitle"}),componentDebugName:"SearchActorFilter"},performRequest:e=>async function(e){let{args:t,auditLogHistoricalUserStore:s,selectedActors:i,environment:n}=e;const{query:a}=t,{allUserIds:r,allBotIds:o,spaceId:l}=s.getState(),d=100,c=await z().T.searchActions.load();let u;if(D().A.state.shouldUseEdgeCache&&R().default.checkGate({gateName:"edge_cache_audit_log"})&&l){const e=await q().callApi({eventName:"listUsers",environment:n,data:{cursor:void 0,membershipFilter:void 0,limit:d,sort:"name_normalized",sortDirection:"asc",query:a,spaceId:l}});let t=[];"success"===e.type&&(t=e.data.users.map((e=>e.id))),u=await c.searchActorsById({environment:n,query:a,userIds:[...t,...r],botIds:[...o]})}else u=await c.searchActorsById({environment:n,query:a,userIds:[...r],botIds:[...o]});const g=[...u.users.map((e=>`notion_user:${e.id}`)),...u.bots.map((e=>`bot:${e.id}`))];if(a.length>0)return g.slice(0,d);const p=i.map(re().Ht),m=new Set(p),f=g.filter((e=>!m.has(e)));return[...p,...f].slice(0,Math.max(p.length,d))}({args:e,auditLogHistoricalUserStore:n,selectedActors:r,environment:d}),renderResultMenuItem:(e,s)=>{var i;const a=ue(e,t);return(0,oe.jsx)(de,{...s,item:e,tempActorSelections:c,showRemovedBadge:n.isUserOrBotRemoved(null===(i=a.asActor)||void 0===i?void 0:i.id),actor:a,intl:l})},renderToken:(e,s)=>(0,oe.jsx)(ce,{item:e,handlers:s,tempActorSelections:c,parentStore:t}),renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})})),de=(0,i.forwardRef)(((e,t)=>{const{item:s,intl:i,tempActorSelections:n,showRemovedBadge:a,actor:r}=e,l=(0,o().K8)((()=>(0,ee().lR)(i,r)),[i,r]);return(0,oe.jsx)(ne().A,{...e,ref:t,actor:r,useEmailAsTooltip:!0,isChecked:n.has(s),userTitle:(0,oe.jsxs)("div",{style:{display:"flex",gap:4},children:[l,a&&(0,oe.jsx)(te().A,{children:(0,oe.jsx)(f().sA,{id:"auditlogActorFilter.removed_user",defaultMessage:"Removed"})})]})})}));function ce(e){let{item:t,handlers:s,tempActorSelections:i,parentStore:n}=e;const a=1===i.size,r=(0,o().K8)((()=>ue(t,n)),[n,t]);return r?(0,oe.jsx)(se().Ay,{format:ie().mI.Small,showRemoveButton:!0,isSingle:a,onClickRemove:s.onRemove,actor:r,shouldShrink:!0,hasPersonHoverCard:!1},t):null}function ue(e,t){const s=(0,re().Hl)(e);return s?"notion_user"===s.actorType?(0,ee().MR)(function(e,t){return ae().LU.createChildStore(t,{table:O().oo,id:e}).getModel()}(s.actorId,t)):(0,ee().oC)(function(e,t){return ae().vK.createChildStore(t,{table:L().GP,id:e}).getModel()}(s.actorId,t)):(0,ee().MR)(void 0)}de.displayName="ResultMenuItem";const ge=(0,f().YK)({auditLogNotSupportedDateRangeError:{id:"auditLog.dateTimeRangeMenu.notSupportedDateRange",defaultMessage:"Audit Log retains events from the past year."}});const pe=(0,f().j4)((function(e){const{spaceStore:t,intl:i}=e,[n,a]=(0,o().$y)(F().A),[r,l,d]=(0,o().$y)(K),c=(0,o().uB)(void 0,X().D),u=(0,o().uB)(void 0,X().D),g=(0,_().ah)((0,Q().P)());return(0,oe.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:4},children:[(0,oe.jsx)(s(873066).A,{mode:Z().C.Pill,focused:!1,title:(0,oe.jsx)(f().sA,{id:"auditlogDateFilter.title",defaultMessage:"Date"}),icon:s(563884).k,value:n.timeRange,showButtons:"footer",onChange:e=>{a({...n,timeRange:e,pageNum:1})},minDate:g.minus({years:1}),maxDate:g.endOf("day"),customErrorMessage:e=>{if(e===s(609989).$.NOT_SUPPORTED)return i.formatMessage(ge.auditLogNotSupportedDateRangeError)}}),(0,oe.jsx)(le,{parentStore:t,auditLogHistoricalUserStore:d,selectedActors:n.actors,onChange:e=>{a({...n,actors:e,pageNum:1})}}),(0,oe.jsx)(s(237824).A,{lastSelectionStore:c,componentStore:u,onChange:e=>{a({...n,actions:e,pageNum:1})}})]})}));var me=()=>s(8178);function fe(){return(0,oe.jsx)(me().A,{large:!0,style:{marginBottom:0,paddingBottom:0,fontSize:16,fontWeight:S().Wy.medium,display:"flex",justifyContent:"space-between"},children:(0,oe.jsx)("div",{style:{gap:8,display:"flex"},children:(0,oe.jsx)(f().sA,{id:"auditlog.title",defaultMessage:"Audit log"})})})}var he=()=>s(326346),Se=()=>s(884107),xe=()=>s(641300),be=()=>s(704152),ye=()=>s(859428),ve=()=>s(125565),je=()=>s(47373),Ae=()=>s(962730),Ce=()=>s(623742);function we(e){const{auditLogEntry:t,spaceStore:s,id:n}=e,a=(0,f().tz)(),r=(0,o().K8)((()=>{if(t.actor.actorType===O().oo){const e=ae().LU.createChildStore(s,{id:t.actor.actorId,table:O().oo});if(e.isDefined()&&!e.getIsDeleted())return{actorStore:e};if(t.actor.email)return{avatar:{name:t.actor.name,email:t.actor.email}}}else if(t.actor.actorType===L().GP){const e=ae().vK.createChildStore(s,{id:t.actor.actorId,table:L().GP});return e.isDefined()?{actorStore:e}:{avatar:{name:t.actor.name,email:t.actor.actorId}}}return{actorStore:void 0}}),[s,t]),d=(0,o().K8)((()=>{var e,t;if(r)return(null===(e=r.actorStore)||void 0===e?void 0:e.getDisplayName(a))??(null===(t=r.avatar)||void 0===t?void 0:t.name)}),[r,a]),c=(0,o().K8)((()=>{var e,t;if(r)return(null===(e=r.actorStore)||void 0===e?void 0:e.getDetail())??(null===(t=r.avatar)||void 0===t?void 0:t.email)}),[r]),u=(0,i.useMemo)((()=>{var e;if(t.actor.actorType===O().oo)return(0,Ce().v)(null===(e=t.actor.meta)||void 0===e?void 0:e.spaceRole)}),[t]),g=(0,l().IS)((()=>({container:{display:"block",width:"100%",paddingBlock:6}})),[]),p=(0,i.createRef)();return(0,oe.jsx)(ye().A,{disableTooltip:Te(p.current),renderTooltip:()=>(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)("div",{children:d}),(0,oe.jsx)("div",{children:c})]}),placement:Ae().W.Bottom,render:e=>(0,oe.jsx)("div",{...e,style:g.container,children:(0,oe.jsx)(Ce().A,{id:n,...r,spaceRole:u})})})}function Te(e){return!!e&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}var Me=()=>s(617842);const ke={id:"actor",headerTitle:(0,oe.jsx)(f().sA,{id:"auditlog.logTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`;return(0,oe.jsx)(we,{spaceStore:e.spaceStore,auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:30},sortable:!1},Ie={id:"event",headerTitle:(0,oe.jsx)(f().sA,{id:"auditlog.logTable.eventColumn.header",defaultMessage:"Event"}),renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return(0,oe.jsx)(s(17297).m,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:40},sortable:!1},De={id:"dateTimeAndMenu",headerTitle:(0,oe.jsx)(f().sA,{id:"auditlog.logTable.dateColumn.header",defaultMessage:"Date"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`,i=`event-${e.auditLogEntry.actionName}-${e.id}`,n=`datetime-${e.auditLogEntry.actionName}-${e.id}`;return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(s(829351).V,{auditLogEntry:e.auditLogEntry,id:n}),(0,oe.jsx)(Pe,{auditLogEntry:e.auditLogEntry,ids:{actorColumnId:t,eventColumnId:i,dateTimeColumnId:n}})]})},widthData:{width:25},sortable:!0},Re=[ke,Ie,De];function _e(){return(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"40vh",flexDirection:"column"},children:[(0,oe.jsx)("div",{children:(0,oe.jsx)(ve().A,{isSecondaryColor:!0,style:{fontWeight:500},children:(0,oe.jsx)(f().sA,{id:"auditlog.logTable.noResults",defaultMessage:"No results"})})}),(0,oe.jsx)(ve().A,{isSecondaryColor:!0,children:(0,oe.jsx)(f().sA,{id:"auditlog.logTable.noResultsHelpText",defaultMessage:"Try different filters. Logs may take some time to show up."})})]})}function Pe(e){const{auditLogEntry:t,ids:i}=e,n=(0,o().K8)((()=>(0,je().Qd)()),[]),r=he().Gb,d=(0,f().tz)(),c=(0,a().v3)(),u=(0,l().DP)(),g=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"flex-end",width:"100%"},button:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:28,borderRadius:6}})),[]);return(0,oe.jsx)(ye().A,{delayThreshold:80,placement:Ae().W.Bottom,render:e=>(0,oe.jsx)("div",{style:g.container,...e,children:(0,oe.jsx)(be().A,{style:g.button,onClick:async()=>{const e=await Se().R.clipboardActions.load();var s;e.copyString({environment:c,stringValue:(0,he().ZM)({auditLogEntry:t,intl:d,getAuditLogEventText:(s=i.eventColumnId,e=>{var t;return null===(t=document.getElementById(s))||void 0===t?void 0:t.textContent}),isTeamGuestsEnabled:n,csvColumnNames:r}),copiedMessage:e.clipboardMessages.copiedToClipboard})},children:(0,s(536583).d)({width:16,height:16,fill:u.icon.secondary})})}),renderTooltip:()=>(0,oe.jsx)(f().sA,{id:"AuditLogSettings.copyAuditLogEvent",defaultMessage:"Copy row"})})}const Be=(0,f().j4)((function(e){const{searchResponse:t,spaceStore:s}=e,[n,a]=(0,o().$y)(F().A),r=t.results||[],d=t.hasMoreResults,c=Boolean(r.length),u=e=>{const t={...n,pageNum:e};a(t)},g=(0,l().IS)((e=>(0,xe().rC)({columnRenderInfo:Re,theme:e,containerMarginTop:0})),[]),p=r.map(((e,t)=>({id:t.toString(),auditLogEntry:e,spaceStore:s,isClickable:!1}))),m=(0,i.useCallback)((()=>{const e=n.sortOrder===U().K7.CreatedOldest?U().K7.CreatedNewest:U().K7.CreatedOldest;a({...n,sortOrder:e,pageNum:1})}),[n,a]),h=(0,i.useMemo)((()=>({column:De,sortAscending:n.sortOrder===U().K7.CreatedOldest})),[n]);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(xe().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Re,rows:p,sortState:h,onSortStateChanged:m,renderNoRowsComponent:_e,styles:g}),c?(0,oe.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:[(0,oe.jsx)(Me().M,{onClick:()=>{u(n.pageNum-1)},disabled:1===n.pageNum,children:(0,oe.jsx)(f().sA,{id:"auditlog.logTable.previousPage",defaultMessage:"Previous"})}),(0,oe.jsx)(Me().M,{disabled:!d,onClick:()=>{u(n.pageNum+1)},children:(0,oe.jsx)(f().sA,{id:"auditlog.logTable.nextPage",defaultMessage:"Next"})})]}):null]})}));const Ue=(0,f().j4)((function(e){const{spaceStore:t}=e,n=(0,a().v3)(),r=null==t?void 0:t.id,[l]=(0,o().$y)(H),[d]=(0,o().$y)(F().A),c=(0,F()._)(d)!==l.filterStr?void 0:l.cachedResponses[d.pageNum];(0,i.useEffect)((()=>{r&&async function(e){var t,s;const{environment:i,spaceId:n}=e,a=F().A.getState();H.startLoading(n,a);const{sortOrder:r,pageSize:o,pageNum:l}=a,d={spaceId:n,limit:o,cursor:H.getCursor(n,a,l),filters:{timeRange:{starting:a.timeRange.starting?_().C6.toUnixMs(a.timeRange.starting):void 0,ending:a.timeRange.ending?_().C6.toUnixMs(a.timeRange.ending):void 0},...(null===(t=a.actors)||void 0===t?void 0:t.length)>0?{actors:a.actors}:void 0,...(null===(s=a.actions)||void 0===s?void 0:s.length)>0?{actions:a.actions}:void 0},sort:r||U().K7.CreatedNewest},c=await q().callApi({eventName:"searchAuditLog",environment:i,data:d,headers:(0,B().WS)({spaceId:d.spaceId})});if("success"!==c.type)if(H.updateError(n,a),(0,P().op4)(c.body)){const e=(0,W().Hu)(E().A.getIntl(),c);j().f1(e)}else j().f1(E().A.formatMessage($.loadCurrentAuditLogError));else H.updateLoadedResult(n,a,c.data)}({environment:n,spaceId:r})}),[n,r,d]);const u=(0,o().K8)((()=>D().A.state.shouldUseEdgeCache&&R().default.checkGate({gateName:"edge_cache_audit_log"})),[]);return(0,i.useEffect)((()=>{J({environment:n,spaceId:r,shouldUseEdgeCache:u})}),[n,r,u]),(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(fe,{}),(0,oe.jsxs)("div",{style:{justifyContent:"space-between",display:"flex",paddingTop:12,paddingBottom:12},children:[(0,oe.jsx)(pe,{spaceStore:t}),(0,oe.jsx)(s(652399).A,{parentStore:t})]}),"loading"===(null==c?void 0:c.status)&&(0,oe.jsx)(s(366951).A,{}),"success"===(null==c?void 0:c.status)&&(0,oe.jsx)(Be,{searchResponse:c,spaceStore:t})]})}));var Le=()=>s(645873);const Oe=new(Le().O2)("collectionDebugSettings",(()=>s.e(26403).then(s.bind(s,917682)))),qe=(0,Le()._h)(Oe,(e=>e.CollectionDebugSettings)),We={settingsTab:new(Le().O2)("customEmojiSettings",(()=>s.e(10408).then(s.bind(s,656301))))},Ee=(0,Le()._h)(We.settingsTab,(e=>e.CustomEmojiSettings)),ze=new(Le().O2)("SitesSettingsTab",(async()=>await Promise.all([s.e(25700),s.e(78171)]).then(s.bind(s,238544)))),Fe=(0,Le()._h)(ze,(e=>e.SitesSettingsTab)),Ne=new(Le().O2)("designPreviews",(()=>s.e(23754).then(s.bind(s,159003)))),Ge=(0,Le()._h)(Ne,(e=>e.DesignPreviews));var Ke=()=>s(186445),Ve=()=>s(38337),He=()=>s(87878),$e=()=>s(310795),Ye=()=>s(836251),Je=()=>s(141966),Qe=()=>s(470928),Ze=()=>s(963589),Xe=()=>s(176983),et=()=>s(691298),tt=()=>s(722038),st=()=>s(578150);const it=new(Le().O2)("offlineModeDebugSettings",(()=>s.e(3551).then(s.bind(s,819494)))),nt=(0,Le()._h)(it,(e=>e.OfflineModeDebugSettings));var at=()=>s(346),rt=()=>s(274041),ot=()=>s(352704),lt=()=>s(367049);function dt(){const e=(0,Ze().X)("personal_sharing_simplified_settings"),t=(0,lt().X)();return!!e&&t}var ct=()=>s(311337),ut=()=>s(765957),gt=()=>s(814431),pt=()=>s(227440),mt=()=>s(423219),ft=()=>s(522094);class ht extends N().Store{getInitialState(){return{status:"unconfigured",emailDomains:[],domainVerifications:[],spaces:[],createAccount:!1,useMetadataUrl:!0}}}const St=ht;var xt=()=>s(132813),bt=()=>s(311670);class yt extends N().Store{getInitialState(){return{emailDomains:[],spaceCreation:"admins_only",settings:{}}}async updateValueForSpace(e){const{environment:t,spaceId:s,store:i}=e,n=await q().callApi({eventName:"getEmailDomainsForSpace",environment:t,data:{spaceId:s}});if("failed"===n.type)return void j().Qg(n);const{data:a}=n,r=Object.keys(a);return 0!==r.length?i.setState({emailDomains:r,spaceCreation:a[r[0]].spaceCreationEnum,settings:a[r[0]].settings}):i.setState(this.getInitialState()),i.state}}const vt=yt;var jt=()=>s(678894),At=()=>s(404141),Ct=()=>s(309049),wt=()=>s(762299),Tt=()=>s(224701),Mt=()=>s(529099),kt=()=>s(340498);const It=(0,kt().xh)("paperPlane",{default:{loader:()=>s.e(5857).then(s.bind(s,808936))},small:{loader:()=>s.e(5857).then(s.bind(s,18350))},fill:{loader:()=>s.e(5857).then(s.bind(s,59442))},fillSmall:{loader:()=>s.e(5857).then(s.bind(s,691393))}},["send","fly","flight","email","inbox","outbox"]);var Dt=()=>s(843014),Rt=()=>s(84817),_t=()=>s(460292),Pt=()=>s(554509),Bt=()=>s(864943),Ut=()=>s(47170),Lt=()=>s(19575),Ot=()=>s(991249),qt=()=>s(324561),Wt=()=>s(329304),Et=()=>s(240865),zt=()=>s(803025);function Ft(e){var t;let{currentSettingsTab:s}=e;const n=(0,a().v3)(),r=(0,l().IS)((e=>({aiIcon:{width:16,height:16,color:e.icon.purplePrimary},assistantIcon:{width:16,height:16},buttonStyle:{display:"flex",padding:"0px 12px 0px 10px",justifyContent:"center",alignItems:"center",gap:6,borderRadius:6,border:`1px solid ${e.stroke.primary}`}})),[]),o=(0,Ut().O)(),d=(0,qt()._3)({spaceId:o}),c=function(){const e=(0,zt().q)(),t=(0,Ut().O)(),s=(0,qt().f_)({spaceId:t}),i=(0,Et().V)()??1;return"sales_eligible"===e&&(s&&(0,p().Fq)(s)&&!(0,m().sP)((0,p().AI)(s))||i>5)}(),u=(0,Wt()._X)({name:"ai_usage",amount:"unknown",spaceId:o,userId:null===(t=n.currentUser)||void 0===t?void 0:t.id}),g=function(e){return void 0!==e&&!(0,p().TB)(e)&&(0,p().Gm)(e)}(d)&&!(0,Wt().e2)(u)&&!["plans","billing"].includes(s),h=i.useMemo((()=>c?{onClick:()=>(0,Lt().lK)({openedFrom:"settings_sidebar"}),text:(0,oe.jsx)(f().sA,{id:"settingsUpsellButton.contactSales",defaultMessage:"Chat with Sales"}),icon:(0,oe.jsx)(_t().Q,{iconGroup:It,colorName:"primary",variantName:"default"})}:void 0!==(null==u?void 0:u.upsell)&&g?{onClick:()=>{(0,Ot().K)(n,{from:"ai_upsell_settings",upsell:u.upsell})},text:(0,oe.jsx)(f().sA,{...Dt().D.getNotionAI}),icon:(0,Mt().aiFaceIcon)(r.assistantIcon)}:void 0),[c,g,null==u?void 0:u.upsell,r,n]);return h?(0,oe.jsx)(Rt().Y1,{direction:"vertical",padding:16,align:"center-left",children:(0,oe.jsxs)(Bt().A,{size:"lg",onClick:h.onClick,style:r.buttonStyle,children:[h.icon,(0,oe.jsx)(Pt().D,{styleName:"UIRegular-14px/Medium",children:h.text})]})}):null}var Nt=()=>s(418583),Gt=()=>s(843878),Kt=()=>s(457638),Vt=()=>s(493823);const Ht=(0,f().YK)({apply_credit:{id:"spaceSubscriptionBilling.applyCreditButton.label",defaultMessage:"Apply credit"},update:{id:"spaceSubscriptionBilling.updateButton.label",defaultMessage:"Update"},add:{id:"spaceSubscriptionBilling.addButton.label",defaultMessage:"Add"},apply:{id:"spaceSubscriptionBilling.apply.label",defaultMessage:"Apply"}});const $t=(0,f().j4)((function(e){const t=(0,l().DP)(),s={marginLeft:18,marginRight:-4,fontWeight:S().Wy.medium},{title:i,caption:n,buttonArgs:a}=e,r=(0,oe.jsx)(f().sA,{...Ht[a.buttonPurpose]});return(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:14},children:[(0,oe.jsx)("div",{style:{marginRight:"auto"},children:i}),(0,oe.jsx)("div",{style:{color:t.text.secondary},children:n}),(0,oe.jsx)("div",{style:{minWidth:110,display:"flex",justifyContent:"flex-end"},children:a.showButton&&(0,oe.jsx)(Vt().p,{isBlue:!0,onClick:a.onClick,style:s,children:r})})]})}));const Yt={workspaceBalance:(0,oe.jsx)(f().sA,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.workspaceSubscriptionBalance.title",defaultMessage:"Workspace balance"}),applyCoupon:(0,oe.jsx)(f().sA,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.applyCoupon.title",defaultMessage:"Apply coupon"}),discount:(0,oe.jsx)(f().sA,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.discount.title",defaultMessage:"Discount"})};var Jt=()=>s(517492);const Qt={height:"100%",padding:"36px 60px"},Zt={display:"flex",flexDirection:"column",height:"100%"};const Xt=function(e){let{spaceStore:t,billingData:i,billingEvents:n}=e;const a=(0,f().tz)();return(0,o().O$)(pt().A).online?(0,oe.jsx)("div",{style:Zt,children:(0,oe.jsxs)(s(2143).H,{style:Qt,type:s(756279).A.Y,children:[(0,oe.jsx)(me().A,{large:!0,divider:"full",children:(0,oe.jsx)(f().sA,{...Kt().DZ.billingTab})}),(0,oe.jsx)(es,{billingData:i}),(0,oe.jsx)(ts,{}),(0,oe.jsx)(s(278597).g,{spaceStore:t,events:n,upcomingInvoiceData:void 0})]})}):(0,oe.jsx)(Gt().Ay,{children:(0,oe.jsx)(ve().A,{isSmall:!0,style:{textAlign:"center"},children:a.formatMessage(Nt().D.offline)})})};function es(e){let{billingData:t}=e;const s=t.lockedCurrencyCode;if(!s)return null;const i=(0,p().o2)(t,s),n=-Math.min(0,i.amount);return(0,oe.jsx)($t,{title:Yt.workspaceBalance,caption:(0,oe.jsx)("div",{children:(0,oe.jsx)(Jt().v,{cost:{amount:n,currencyCode:s},trailingZeroDisplay:"stripIfInteger"})}),buttonArgs:{showButton:!1,buttonPurpose:"apply_credit",onClick:h().lQ}})}function ts(){return(0,oe.jsx)("div",{style:{flex:"none",marginTop:30}})}var ss=()=>s(807778),is=()=>s(134217),ns=()=>s(960236),as=()=>s(58293);var rs=()=>s(209426),os=()=>s(128265),ls=()=>s(479314),ds=()=>s(742117),cs=()=>s(706024),us=()=>s(2220),gs=()=>s(946548),ps=()=>s(21140),ms=()=>s(459401),fs=()=>s(721672),hs=()=>s(573660),Ss=()=>s(477657),xs=()=>s(238453),bs=()=>s(118849),ys=()=>s(870092),vs=()=>s(568688);var js=()=>s(383716);const As=4;function Cs(e){let{securitySettingsStore:t,spaceStore:s}=e;const i=(0,f().tz)(),n=(0,l().IS)((()=>({horizontalScrollWrapper:{minWidth:750}})),[]);return(0,oe.jsxs)(Rt().Y1,{direction:"vertical",padding:"36px 60px",style:n.horizontalScrollWrapper,children:[(0,oe.jsxs)(Rt().Y1,{direction:"vertical",gap:16,children:[(0,oe.jsx)(js().n,{title:i.formatMessage(Rs.title)}),(0,oe.jsxs)(Rt().Y1,{direction:"horizontal",gap:14,children:[s&&(0,oe.jsx)(Ts,{spaceStore:s}),s&&(0,oe.jsx)(Ms,{spaceStore:s})]})]}),(0,oe.jsx)(ws,{securitySettingsStore:t,spaceStore:s})]})}function ws(e){let{securitySettingsStore:t,spaceStore:s}=e;const n=(0,f().tz)(),{setPage:a}=(0,i.useContext)(ls().K),r=(0,l().IS)((e=>({button:{padding:"3px 0 0 0",height:"100%"},icon:{height:14,width:14,fill:e.icon.tertiary},headerContainer:{marginTop:32}})),[]);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)("div",{style:r.headerContainer,children:(0,oe.jsx)("span",{style:{fontSize:16,fontWeight:500},children:n.formatMessage(Rs.permissionsTitle)})}),(0,oe.jsxs)(ms().L,{children:[(0,oe.jsx)(Vt().p,{style:r.button,onClick:()=>a("people_invitation_settings"),ignoreLocalHoverState:!0,children:(0,oe.jsx)(hs().y,{title:n.formatMessage(Rs.membersAndGuestsSettingTitle),byline:n.formatMessage(Rs.memberAndGuestsSettingByline),onClick:()=>a("people_invitation_settings"),item:(0,ds().V)(r.icon)})}),(0,oe.jsx)(ks,{securitySettingsStore:t,spaceStore:s})]})]})}function Ts(e){let{spaceStore:t}=e;const s=(0,f().tz)(),{setPage:n}=(0,i.useContext)(ls().K),{requestsSize:r,requestedUserStores:l,totalRequestedUsersSize:d}=function(e){let{spaceStore:t,userStoreLimit:s}=e;const{requests:i,isLoading:n}=(0,vs().I)({spaceId:t.id});return(0,o().K8)((()=>{let e=0;if(!i)return{requestsSize:e,requestedUserStores:[],totalRequestedUsersSize:0,isLoading:n};const a=new Set;for(const t of Object.values(i)){for(const e of t)a.add(e.created_by_id);e+=t.length}return{requestsSize:e,requestedUserStores:Array.from(a).slice(0,s).map((e=>ys().L.createChildStore(t,{table:O().oo,id:e}))),totalRequestedUsersSize:a.size,isLoading:n}}),[t,i,n,s])}({spaceStore:t,userStoreLimit:As}),c=(0,a().v3)(),u=(0,o().K8)((()=>(0,ss().Le)()),[]);return(0,oe.jsx)(fs().A,{headerText:s.formatMessage(Rs.upgradesTitle),mainText:(0,oe.jsx)(f().sA,{id:"requestsHomePage.upgradeRequests.pending",defaultMessage:"{requestsSize} pending",values:{requestsSize:r}}),bottom:(0,oe.jsx)(Ds,{avatarProps:{users:l,totalMemberCount:d},requestsLength:r,pendingText:u?Rs.noPendingRequests:Rs.noPlanOrAddOnRequests}),onClick:()=>{n("upgrades"),(0,us().u)({environment:c,event:{eventName:"request_tab_upgrades_clicked",eventProperties:{number_of_requests:r}}})}})}function Ms(e){let{spaceStore:t}=e;const s=(0,f().tz)(),i=(0,xs().e6)({spaceStore:t,requestType:"member_or_guest"}),n=new Set;for(const r of i)for(const{actor:e}of r.createdByActorsWithReason)n.add(e.id);const a=[...n].slice(0,As).map((e=>ae().LU.createChildStore(t,{table:O().oo,id:e})));return(0,oe.jsx)(fs().A,{headerText:s.formatMessage(Rs.peoplesTitle),mainText:(0,oe.jsx)(f().sA,{id:"requestsHomePage.peopleRequests.pending",defaultMessage:"{requestsSize} pending",values:{requestsSize:i.length}}),bottom:(0,oe.jsx)(Ds,{avatarProps:i.length?{users:a,totalMemberCount:n.size}:void 0,requestsLength:i.length,pendingText:Rs.noGuestOrMemberRequests}),onClick:()=>{A().Ow({currentTab:"members",subtab:"requests"})}})}function ks(e){let{securitySettingsStore:t,spaceStore:s}=e;const i=(0,f().tz)(),n=(0,a().v3)(),r=(0,o().K8)((()=>t.state),[t]),l=(0,qt().f_)({spaceId:s.id}),d=(0,p().eh)(l,"enterprise");return(0,oe.jsx)(hs().y,{title:(0,oe.jsx)(Is,{showUpsell:!d}),byline:i.formatMessage(Rs.purchaseRequestsMemberSettingsByline),item:(0,oe.jsx)(gs().A,{disabled:!d,on:!r.disableMemberUpgradeRequests,onClick:()=>{cs().X(n,{spaceStore:s,securitySettingsStore:t,fields:{disableMemberUpgradeRequests:!r.disableMemberUpgradeRequests}})}})})}function Is(e){let{showUpsell:t}=e;const s=(0,f().tz)(),i=(0,a().v3)();return(0,oe.jsxs)(Rt().Y1,{direction:"horizontal",gap:4,children:[s.formatMessage(Rs.purchaseRequestsMemberSettingsTitle),t&&(0,oe.jsx)(bs().A,{subscriptionTier:"enterprise",analyticsName:"upgrade_requests_page",onClick:async()=>{await Ot().K(i,{from:"upgrade_requests_page",upsell:{type:"product",product:"enterprise",limit:{type:"none"},trialability:"none"}})}})]})}function Ds(e){let{avatarProps:t,requestsLength:s,pendingText:i}=e;const n=(0,f().tz)();return(0,oe.jsxs)(ps().wt,{justifyContent:"end",style:{minHeight:24},children:[t&&(0,oe.jsx)(Ss().t,{users:t.users,totalMemberCount:t.totalMemberCount,isLoading:!1}),!s&&(0,oe.jsx)(Pt().D,{styleName:"UISmall-12px/Regular",colorName:"tertiary",children:n.formatMessage(i)})]})}const Rs=(0,f().YK)({title:{id:"RequestsSettingsPage.title",defaultMessage:"Requests"},upgradesTitle:{id:"RequestsSettingsPage.UpgradesTileTitle",defaultMessage:"Upgrades"},peoplesTitle:{id:"RequestsSettingsPage.PeopleTileTitle",defaultMessage:"People"},permissionsTitle:{id:"RequestsSettingsPage.permissionsTitle",defaultMessage:"Permissions"},membersAndGuestsSettingTitle:{id:"RequestsSettingsPage.membersAndGuestsSettingTitle",defaultMessage:"Inviting guests and members"},memberAndGuestsSettingByline:{id:"RequestsSettingsPage.memberAndGuestsSettingByline",defaultMessage:"Configure who can send and approve member additions"},purchaseRequestsMemberSettingsTitle:{id:"RequestsSettingsPage.purchaseRequestsMemberSettingsTitle",defaultMessage:"Allow members to request upgrades"},purchaseRequestsMemberSettingsByline:{id:"RequestsSettingsPage.purchaseRequestsMemberSettingsByline",defaultMessage:"Users in your workspace can send purchase requests to the workspace owner"},noPlanOrAddOnRequests:{id:"RequestsSettingsPage.upgradeRequests.noPlanOrAddOnRequests",defaultMessage:"No plan or add-on requests"},noPendingRequests:{id:"RequestsSettingsPage.upgradeRequests.noPendingRequests",defaultMessage:"No upgrade requests"},noGuestOrMemberRequests:{id:"RequestsSettingsPage.peopleRequests.noGuestOrMemberRequests",defaultMessage:"No guest or member requests"}});var _s=()=>s(534177),Ps=()=>s(966505),Bs=()=>s(709062),Us=()=>s(809730),Ls=()=>s(37433),Os=()=>s(637573),qs=()=>s(287882),Ws=()=>s(76118),Es=()=>s(204063),zs=()=>s(690197);function Fs(e){let{title:t,byline:s,settingItem:i,style:n}=e;const a=(0,l().IS)((e=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",...n||{}},settingLeft:{width:"60%"},settingTitle:{fontWeight:S().Wy.regular},settingByline:{marginBottom:4}})),[n]);return(0,oe.jsxs)("div",{style:a.settingContainer,children:[(0,oe.jsxs)("div",{style:a.settingLeft,children:[(0,oe.jsx)(me().A,{smallMarginBottom:!0,style:a.settingTitle,children:t}),(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:a.settingByline,children:s})]}),i]})}var Ns=()=>s(558094),Gs=()=>s(265665),Ks=()=>s(624090),Vs=()=>s(735384),Hs=()=>s(197190),$s=()=>s(623580),Ys=()=>s(107683),Js=()=>s(484595),Qs=()=>s(106261);const Zs=(0,f().YK)({deleteFromTrashLayoutTitle:{defaultMessage:"Auto-delete from Trash",id:"updateRetentionWindowModal.layoutTitle.deleteFromTrash."},deleteFromTrashTitle:{defaultMessage:"Auto-delete from Trash",id:"updateRetentionWindowModal.title.deleteFromTrash"},deleteFromTrashDescription:{defaultMessage:"Customize how long pages stay in Trash before being automatically deleted",id:"updateRetentionWindowModal.description.deleteFromTrash"},deleteFromTrashDefaultOptionTitle:{defaultMessage:"30 days, then delete from Trash",id:"updateRetentionWindowModal.defaultOption.title.deleteFromTrash"},deleteFromTrashDefaultOptionDescription:{defaultMessage:"Pages deleted from Trash are retained for an additional period of time. Retained pages can be restored by workspace owners",id:"updateRetentionWindowModal.defaultOption.description.deleteFromTrash"},deleteFromTrashImmediateEffect:{defaultMessage:"Reducing this retention setting may lead to pages being deleted from Trash immediately. Please type your workspace name to continue",id:"updateRetentionWindowModal.immediateEffect.deleteFromTrash"},purgeLayoutTitle:{defaultMessage:"Retaining deleted pages",id:"updateRetentionWindowModal.layoutTitle.purge"},purgeTitle:{defaultMessage:"Retaining deleted pages",id:"updateRetentionWindowModal.title.purge"},purgeDescription:{defaultMessage:"Pages deleted from Trash are retained for a period of time. Only workspace owners can view and restore retained pages.",id:"updateRetentionWindowModal.description.purge"},purgeDefaultOptionTitle:{defaultMessage:"30 days, then permanently delete",id:"updateRetentionWindowModal.defaultOption.title.purge"},purgeDefaultOptionDescription:{defaultMessage:"Pages are removed from Notion's servers and cannot be restored",id:"updateRetentionWindowModal.defaultOption.description.purge"},purgeImmediateEffect:{defaultMessage:"Reducing the retain period could lead to pages being deleted from Notion server. Please type your workspace name to continue ",id:"updateRetentionWindowModal.immediateEffect.purge"}});var Xs=()=>s(702723);const ei=(0,f().YK)({days:{defaultMessage:"days",id:"customRetentionWindow.relativeDates.days"},years:{defaultMessage:"years",id:"customRetentionWindow.relativeDates.years"}}),ti=(0,f().YK)({inputPlaceholder:{defaultMessage:"...",id:"customRetentionWindow.timeNum.inputPlaceholder"}}),si=(0,_s().uv)(qs().Vl).map((e=>({key:e,label:(0,oe.jsx)(ve().A,{children:E().A.formatMessage(ei[e])})})));function ii(e){const{isDropdownEnabled:t,timeNumString:s,timeUnit:i,setTimeNumString:n,setTimeUnit:a}=e,r=(0,f().tz)(),o=(0,l().IS)((e=>({dropdownRow:{display:"flex"},input:{width:70,marginRight:4,marginLeft:6},dropdown:{marginTop:0,marginBottom:0,marginRight:4,borderRadius:4,border:`1px solid ${e.lightDividerColor}`}})),[]);return(0,oe.jsxs)("span",{style:o.dropdownRow,children:[(0,oe.jsx)($s().A,{style:o.input,value:s,onChange:e=>n(e.target.value),placeholder:r.formatMessage(ti.inputPlaceholder),disabled:!t}),(0,oe.jsx)(Xs().m,{buttonStyle:o.dropdown,disabled:!t,type:"dropdown",currentOption:i,options:si,onSelectOption:e=>t&&a(e),isMobile:!1})]})}const ni=(0,f().YK)({invalidNumber:{defaultMessage:"Please enter a valid number",id:"updateRetentionWindow.error.invalidNumber"},outOfRangeTrash:{defaultMessage:"Pages can't be in Trash for longer than 10 years",id:"updateRetentionWindow.error.outOfRangeTrash"},outOfRangeRetained:{defaultMessage:"Pages can't be retained for longer than 10 years",id:"updateRetentionWindow.error.outOfRangeRetained"},lowerBoundTrash:{defaultMessage:"Pages can't be in Trash for less than 1 day",id:"updateRetentionWindow.error.lowerBoundTrash"},lowerBoundRetained:{defaultMessage:"Pages can't be retained for less than 1 day",id:"updateRetentionWindow.error.lowerBoundRetained"}});function ai(e){let{isSelected:t,retentionType:s,hasChosenRetentionWindow:n,currentRetentionWindowInSeconds:a,errorMessage:r,onNextRetentionWindowInSecondsChange:o,onClick:d,setErrorMessage:c,style:u}=e;const g=(0,f().tz)(),p=(0,l().IS)((e=>({rowStyles:{display:"flex",fontSize:14,background:t?e.lightBlueBannerBackground:"inherit",...u,alignItems:"flex-start",flexFlow:"column"},centeredRow:{display:"flex",flexFlow:"row",alignItems:"center"},errorMessageStyle:{marginTop:8,width:"100%",display:"flex",paddingLeft:28,color:e.errorText,fontWeight:S().Wy.regular}})),[u,t]),[m,h]=(0,i.useState)((0,qs().sV)(a)),[x,b]=(0,i.useState)(`${(0,qs().Uw)(a,m)}`),y=Number(x)*qs().Vl[m],v=!n&&t;return(0,i.useEffect)((()=>{o(y)}),[o,y]),(0,i.useEffect)((()=>{if(t){if(void 0===x)return void c(g.formatMessage(ni.invalidNumber));const e=parseInt(x);if(isNaN(e)||e.toString()!==x)return void c(g.formatMessage(ni.invalidNumber));const t=qs().Vl[m]*e;if(t>qs().J1){const e="delete_from_trash"===s?ni.outOfRangeTrash:ni.outOfRangeRetained;return void c(g.formatMessage(e))}if(t<qs().PL){const e="delete_from_trash"===s?ni.lowerBoundTrash:ni.lowerBoundRetained;return void c(g.formatMessage(e))}c(void 0)}}),[x,m,t,c,g,s]),(0,oe.jsxs)(Vt().p,{style:p.rowStyles,onClick:d,children:[(0,oe.jsxs)("div",{style:p.centeredRow,children:[(0,oe.jsx)(Js().A,{isSelected:t}),(0,oe.jsx)(ve().A,{style:p.centeredRow,children:"delete_from_trash"===s?(0,oe.jsx)(f().sA,{defaultMessage:"<dropdownpicker></dropdownpicker>, then delete from trash",id:"updateRetentionWindowModal.custom.deleteFromTrash",values:{dropdownpicker:e=>(0,oe.jsx)(ii,{isDropdownEnabled:v,timeNumString:x,timeUnit:m,setTimeNumString:b,setTimeUnit:h})}}):(0,oe.jsx)(f().sA,{defaultMessage:"<dropdownpicker></dropdownpicker>, then permanently delete",id:"updateRetentionWindowModal.custom.permanentlyDelete",values:{dropdownpicker:e=>(0,oe.jsx)(ii,{isDropdownEnabled:v,timeNumString:x,timeUnit:m,setTimeNumString:b,setTimeUnit:h})}})})]}),r?(0,oe.jsx)(ve().A,{style:p.errorMessageStyle,children:r}):null]})}const ri=(0,f().YK)({invalidWorkspaceName:{id:"updateRetentionWindow.error.invalidWorkspaceName",defaultMessage:"Must type in workspace name correctly"}});function oi(e){let{isOpen:t,closeModal:s,currentRetentionWindowInSeconds:n,spaceStore:r,retentionType:d,onSaveRetentionWindow:c}=e;const u=(0,a().v3)(),g=(0,l().IS)((e=>({contentStyle:{display:"flex",flexFlow:"column",alignItems:"center",paddingTop:24,paddingLeft:15,paddingRight:15},headerStyle:{display:"flex",flexFlow:"column",alignItems:"center",marginBottom:16},headerTitleStyle:{fontWeight:S().Wy.semibold,fontSize:17,marginBottom:8},headerDescriptionStyle:{width:"100%",textAlign:"center",fontSize:14},defaultOptionStyle:{display:"flex",flexFlow:"column",paddingLeft:8},defaultOptionTitleStyle:{fontSize:13,fontWeight:S().Wy.medium},defaultOptionDescriptionStyle:{width:350,fontSize:12,whiteSpace:"normal",lineHeight:"16px",fontWeight:S().Wy.regular},iconStyle:{color:e.icon.tertiary,width:36,marginBottom:12},saveButtonStyles:{width:"100%",marginBottom:4,marginTop:16},errorMessageStyle:{marginTop:4,color:e.errorText},cancelButtonStyles:{width:"100%",paddingTop:5,paddingBottom:5,display:"flex",justifyContent:"center",marginBottom:16,borderRadius:4},optionStyle:{width:"100%",height:void 0,marginBottom:4,paddingTop:8,paddingBottom:8,fontWeight:S().Wy.medium,display:"flex",flexFlow:"row"},confirmationContainerStyle:{marginTop:16,width:"100%",paddingTop:14,paddingBottom:14,padingLeft:14,paddingRight:14,backgroundColor:e.palette.red[100],display:"flex",flexFlow:"column",alignItems:"center",borderRadius:4},confirmationDescription:{color:e.palette.red[800],fontSize:14,paddingBottom:6},confirmationContentStyle:{width:"90%"}})),[]),p=(0,o().K8)((()=>r.getName()),[r]),[m,h]=(0,i.useState)(void 0),[x,b]=(0,i.useState)(void 0===n),[y,j]=(0,i.useState)(n),A=x?void 0:y,[C,w]=(0,i.useState)(!1),[T,M]=(0,i.useState)(""),k=A===n||(0,_s().O9)(m),I=T!==p,D=(0,i.useCallback)((()=>{m||(v().kF(u,{type:d,value:A}),c(A),M(""),w(!1),s())}),[u,d,c,A,m,s]),R=(0,i.useCallback)((()=>{C?T===p?D():h(E().A.formatMessage(ri.invalidWorkspaceName)):!function(e){let{nextRetentionWindowValue:t,currentRetentionWindowValue:s,retentionType:i}=e;const n=li(s,i),a=li(t,i);if(a<n)return!0;return!1}({nextRetentionWindowValue:A,retentionType:d,currentRetentionWindowValue:n})?D():w(!0)}),[C,T,p,A,d,n,D]),_=(0,i.useCallback)((()=>{C||x||(w(!1),b(!0),h(void 0))}),[C,x,w,b,h]),P=(0,i.useCallback)((()=>{C||x&&(w(!1),b(!1))}),[C,x,w,b]),B=function(e){return(0,i.useMemo)((()=>"delete_from_trash"===e?{layoutTitle:Zs.deleteFromTrashLayoutTitle,title:Zs.deleteFromTrashTitle,description:Zs.deleteFromTrashDescription,defaultOptionTitle:Zs.deleteFromTrashDefaultOptionTitle,defaultOptionDescription:Zs.deleteFromTrashDefaultOptionDescription,immediateEffect:Zs.deleteFromTrashImmediateEffect}:"purge"===e?{layoutTitle:Zs.purgeLayoutTitle,title:Zs.purgeTitle,description:Zs.purgeDescription,defaultOptionTitle:Zs.purgeDefaultOptionTitle,defaultOptionDescription:Zs.purgeDefaultOptionDescription,immediateEffect:Zs.purgeImmediateEffect}:void(0,_s().HB)(e)),[e])}(d);return(0,oe.jsx)(Ys().s,{isOpen:t,onDismiss:s,areaConstraint:{width:{type:"max",length:460}},render:e=>{let{displayMode:t}=e;return(0,oe.jsx)(Qs().B,{displayMode:t,title:(0,oe.jsx)(f().sA,{...B.layoutTitle}),children:(0,oe.jsxs)("div",{style:g.contentStyle,children:[(0,oe.jsxs)("div",{style:g.headerStyle,children:[(0,oe.jsx)("div",{children:(0,Vs().I)(g.iconStyle)}),(0,oe.jsx)(ve().A,{style:g.headerTitleStyle,children:(0,oe.jsx)(f().sA,{...B.title})}),(0,oe.jsx)(ve().A,{style:g.headerDescriptionStyle,isSecondaryColor:!0,isMultiline:!0,children:(0,oe.jsx)(f().sA,{...B.description})})]}),(0,oe.jsxs)(Vt().p,{style:g.optionStyle,onClick:_,children:[(0,oe.jsx)(Js().A,{isSelected:x}),(0,oe.jsxs)("div",{style:g.defaultOptionStyle,children:[(0,oe.jsx)(ve().A,{style:g.defaultOptionTitleStyle,children:(0,oe.jsx)(f().sA,{...B.defaultOptionTitle})}),(0,oe.jsx)(ve().A,{isSecondaryColor:!0,isMultiline:!0,style:g.defaultOptionDescriptionStyle,children:(0,oe.jsx)(f().sA,{...B.defaultOptionDescription})})]})]}),(0,oe.jsx)(ai,{style:g.optionStyle,isSelected:!x,retentionType:d,hasChosenRetentionWindow:C,currentRetentionWindowInSeconds:n,errorMessage:m,onClick:P,onNextRetentionWindowInSecondsChange:j,setErrorMessage:h}),C?(0,oe.jsxs)("div",{style:g.confirmationContainerStyle,children:[(0,oe.jsx)(ve().A,{isMultiline:!0,style:{...g.confirmationContentStyle,...g.confirmationDescription},children:(0,oe.jsx)(f().sA,{...B.immediateEffect})}),(0,oe.jsx)($s().A,{style:g.confirmationContentStyle,value:T,placeholder:p,onChange:e=>M(e.target.value)})]}):null,(0,oe.jsx)(Es().A,{onClick:R,disabled:C?I:k,style:g.saveButtonStyles,size:"lg",children:(0,oe.jsx)(f().sA,{id:"updateRetentionWindowModal.save",defaultMessage:"Save"})}),(0,oe.jsx)(Hs().A,{onClick:s,style:g.cancelButtonStyles,children:(0,oe.jsx)(ve().A,{isSecondaryColor:!0,children:(0,oe.jsx)(f().sA,{id:"updateRetentionWindowModal.cancel",defaultMessage:"Cancel"})})})]})})}})}function li(e,t){return e||("delete_from_trash"===t?Ks().I4:Ks().qI)}function di(e){const{spaceStore:t}=e,s=(0,a().v3)(),n=(0,f().tz)(),r=(0,l().IS)((e=>({genericSetting:{width:"100%",paddingTop:24},settingItem:{display:"flex",alignItems:"center"},currentSettingLabel:{fontWeight:S().Wy.medium},changeButtonStyle:{fontSize:12,marginLeft:8},lockIconStyle:{color:e.text.tertiary,width:20,marginLeft:4}})),[]),d=(0,Wt()._X)({name:"configurable_retention",spaceId:t.id,userId:s.currentUser.id}),[u,g]=i.useState({isOpen:!1,retentionType:"delete_from_trash"}),{saveDeleteFromTrashDelay:p,savePurgeDelay:m}=function(e){let{environment:t,spaceStore:s}=e;return{saveDeleteFromTrashDelay:(0,i.useCallback)((e=>{k().createAndCommit({userAction:"securitySettingsActions.saveDataRetentionSettings",environment:t,canUndo:!0,perform:t=>{k().applyOperation({store:s,operation:{pointer:s.pointer,path:["settings"],command:"update",args:{delete_from_trash_delay_seconds:e??null}},transaction:t})}})}),[s,t]),savePurgeDelay:(0,i.useCallback)((e=>{k().createAndCommit({userAction:"securitySettingsActions.saveDataRetentionSettings",environment:t,canUndo:!0,perform:t=>{k().applyOperation({store:s,operation:{pointer:s.pointer,path:["settings"],command:"update",args:{purge_delay_seconds:e??null}},transaction:t})}})}),[s,t])}}({environment:s,spaceStore:t}),{currentDeleteFromTrashDelayInSeconds:h,currentPurgeDelayInSeconds:x}=(0,o().K8)((()=>({currentDeleteFromTrashDelayInSeconds:(0,Ws().e2)(d)?t.getSettings().delete_from_trash_delay_seconds:void 0,currentPurgeDelayInSeconds:(0,Ws().e2)(d)?t.getSettings().purge_delay_seconds:void 0})),[t,d]);return(0,oe.jsxs)("div",{children:[u.isOpen?(0,oe.jsx)(oi,{isOpen:u.isOpen,closeModal:()=>g({...u,isOpen:!1}),spaceStore:t,currentRetentionWindowInSeconds:u.currentRetentionWindowInSeconds,retentionType:u.retentionType,onSaveRetentionWindow:"delete_from_trash"===u.retentionType?p:m}):void 0,(0,oe.jsx)(ci,{dataRetentionAvailability:d}),(0,oe.jsx)(Fs,{style:r.genericSetting,title:(0,oe.jsx)(f().sA,{id:"securitySettings.dataRetention.deleteFromTrash.title",defaultMessage:"Once pages are moved to Trash, delete them after"}),byline:(0,oe.jsx)(f().sA,{id:"securitySettings.dataRetention.deletedFromTrash.byline",defaultMessage:"Anyone with edit or full access will be able to restore or manually delete pages in Trash"}),settingItem:(0,oe.jsxs)("div",{style:r.settingItem,children:[(0,oe.jsx)(ve().A,{style:r.currentSettingLabel,children:(0,oe.jsx)(f().sA,{id:"securitySettings.dataRetention.deleteFromTrash.currentSetting",defaultMessage:"{duration}",values:{duration:(0,qs().rN)(h,n)}})}),(0,Ws().e2)(d)?(0,oe.jsx)(Bt().A,{size:"lg",disabled:!1,style:r.changeButtonStyle,onClick:()=>g({isOpen:!0,retentionType:"delete_from_trash",currentRetentionWindowInSeconds:h}),children:(0,oe.jsx)(f().sA,{defaultMessage:"Change",id:"securitySettings.dataRetention.deleteFromTrash.button"})}):(0,oe.jsx)("div",{children:(0,c().g)(r.lockIconStyle)})]})}),(0,oe.jsx)(Fs,{style:r.genericSetting,title:(0,oe.jsx)(f().sA,{id:"securitySettings.dataRetention.purge.title",defaultMessage:"After pages are deleted from Trash, retain them for"}),byline:(0,oe.jsx)(f().sA,{id:"securitySettings.dataRetention.purge.byline",defaultMessage:"During the retention period, only workspace owners can view or restore the page from Content search. After the retention period, the page will be permanently deleted from Notions servers"}),settingItem:(0,oe.jsxs)("div",{style:r.settingItem,children:[(0,oe.jsx)(ve().A,{style:r.currentSettingLabel,children:(0,oe.jsx)(f().sA,{id:"securitySettings.dataRetention.purge.currentSetting",defaultMessage:"{duration}",values:{duration:(0,qs().rN)(x,n)}})}),(0,Ws().e2)(d)?(0,oe.jsx)(Bt().A,{size:"lg",disabled:!1,style:r.changeButtonStyle,onClick:()=>g({isOpen:!0,retentionType:"purge",currentRetentionWindowInSeconds:x}),children:(0,oe.jsx)(f().sA,{defaultMessage:"Change",id:"securitySettings.dataRetention.purge.button"})}):(0,oe.jsx)("div",{children:(0,c().g)(r.lockIconStyle)})]})})]})}function ci(e){const{dataRetentionAvailability:t}=e,s=(0,l().IS)((e=>({bannerStyle:{borderRadius:4,padding:15,width:"100%",backgroundColor:e.lightBlueBannerBackground,flexFlow:(0,Ws().e2)(t)?"column":"row",display:"flex",overflow:"hidden"},bannerLabelStyle:{marginBottom:8},bannerImage:{width:75,display:"flex",alignItems:"center",paddingRight:15},bannerTitleBold:{fontWeight:S().Wy.bold},helpIcon:{fill:"inherit"}})),[t]),i=(0,a().v3)();return(0,Ws().e2)(t)?(0,oe.jsxs)("div",{style:s.bannerStyle,children:[(0,oe.jsx)(ve().A,{style:s.bannerLabelStyle,children:(0,oe.jsx)(f().sA,{id:"securitySettings.dataRetention.disclaimer.title",defaultMessage:"How page deletion and retention works in Notion"})}),(0,oe.jsx)(ve().A,{style:s.bannerLabelStyle,isMultiline:!0,isSmall:!0,children:(0,oe.jsx)(f().sA,{id:"securitySettings.dataRetention.disclaimer.description",defaultMessage:"A page can be moved to Trash by anyone with edit or full access. The page can then be restored or deleted. Workspace owners can customize whether pages in Trash are automatically deleted after a period of time, and how long deleted pages are retained on Notions servers."})}),(0,oe.jsx)(zs().A,{title:(0,oe.jsx)(Gs().j,{children:(0,oe.jsx)(f().sA,{defaultMessage:"Learn more about data retention in Notion",id:"securitySettings.dataRetention.learnMore"})}),iconStyle:s.helpIcon,buttonStyle:{maxWidth:"100%",overflow:"hidden"},href:(0,Ye().xS)("guides.customDataRetentionRules"),analyticsFrom:"security_settings"})]}):(0,oe.jsxs)("div",{style:s.bannerStyle,children:[(0,oe.jsx)("div",{style:s.bannerImage,children:(0,oe.jsx)(Ns().X,{product:"enterprise"})}),(0,oe.jsxs)("div",{children:[(0,oe.jsx)(ve().A,{style:{...s.bannerLabelStyle,...s.bannerTitleBold},children:(0,oe.jsx)(f().sA,{id:"securitySettings.dataRetention.upsell.title",defaultMessage:"Upgrade to the Enterprise plan to customize your workspaces data retention policy"})}),(0,oe.jsx)(ve().A,{style:s.bannerLabelStyle,isMultiline:!0,isSecondaryColor:!0,children:(0,oe.jsx)(f().sA,{id:"securitySettings.dataRetention.upsell.description",defaultMessage:"Workspaces on the Enterprise plan also get SAML SSO, custom guest limits, audit logging, and other advanced security controls"})}),(0,oe.jsx)(Es().A,{onClick:()=>{null!=t&&t.upsell&&(0,Ot().K)(i,{from:"space_settings_cdrr_settings",upsell:t.upsell})},size:"lg",children:(0,oe.jsx)(f().sA,{defaultMessage:"Upgrade to Enterprise",id:"securitySettings.upgradeButton.text"})})]})]})}var ui=()=>s(973189),gi=()=>s(10984),pi=()=>s(802790),mi=()=>s(331542),fi=()=>s(662303),hi=()=>s(676007),Si=function(e){return e[e.Keep=0]="Keep",e[e.Remove=1]="Remove",e}(Si||{});function xi(e){return(0,oe.jsx)(hi().a,{open:e.isOpen,onDismiss:e.onDismiss,render:()=>(0,oe.jsx)(bi,{...e})})}function bi(e){const{onDismiss:t,onSave:s,guestCount:n}=e,[a,r]=(0,i.useState)(Si.Keep),o=(0,l().IS)((e=>({container:{width:350,padding:30,borderRadius:5,height:400,alignItems:"center"},title:{fontFamily:S().vc(fi().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center"},subtitle:{fontFamily:S().vc(fi().locale).sans,fontSize:14,fontWeight:300,lineHeight:"19px",margin:10,textAlign:"center"},radioContainer:{display:"flex",flexDirection:"column"},button:{justifyContent:"space-between",marginTop:10,height:70,borderRadius:5},buttonText:{display:"flex",flexDirection:"column"},optionSubtitle:{whiteSpace:"break-spaces"},actionButtonsContainer:{display:"flex",flexDirection:"column",marginTop:20},cancelButton:{justifyContent:"center",margin:"8px auto 0"}})),[]),d=(0,i.useCallback)((()=>{const e=a===Si.Keep;s(e)}),[s,a]);return(0,oe.jsxs)("div",{style:o.container,children:[(0,oe.jsx)(ve().A,{style:o.title,children:(0,oe.jsx)(f().sA,{id:"disableGuestsConfig.title",defaultMessage:"Disable inviting guests?"})}),(0,oe.jsx)(ve().A,{isSmall:!0,style:o.subtitle,isMultiline:!0,children:(0,_s().O9)(n)?(0,oe.jsx)(f().sA,{id:"disableGuestsConfig.description",defaultMessage:"Your workspace currently has {guestCount, plural, one {1 guest} other {{guestCount} guests}}. You can choose to:",values:{guestCount:n}}):(0,oe.jsx)(f().sA,{id:"disableGuestsConfig.description.noGuestCount",defaultMessage:"You are turning off guests in this workspace. You can choose to:"})}),(0,oe.jsxs)("div",{style:o.radioContainer,children:[(0,oe.jsxs)(Bt().A,{size:"lg",onClick:()=>r(Si.Keep),style:o.button,children:[(0,oe.jsx)(Js().A,{isSelected:a===Si.Keep}),(0,oe.jsxs)("div",{style:o.buttonText,children:[(0,oe.jsx)(ve().A,{children:(0,oe.jsx)(f().sA,{id:"disableGuestsConfig.keepExistingGuests.title",defaultMessage:"Keep existing guests"})}),(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:o.optionSubtitle,children:(0,oe.jsx)(f().sA,{id:"disableGuestsConfig.keepExistingGuests.description",defaultMessage:"Guests will still be able to access the pages theyve been invited to"})})]})]}),(0,oe.jsxs)(Bt().A,{size:"lg",onClick:()=>r(Si.Remove),style:o.button,children:[(0,oe.jsx)(Js().A,{isSelected:a===Si.Remove}),(0,oe.jsxs)("div",{style:o.buttonText,children:[(0,oe.jsx)(ve().A,{children:(0,oe.jsx)(f().sA,{id:"disableGuestsConfig.removeExistingGuests.title",defaultMessage:"Remove existing guests"})}),(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:o.optionSubtitle,children:(0,oe.jsx)(f().sA,{id:"disableGuestsConfig.removeExistingGuests.description",defaultMessage:"All guests will be removed from your workspace"})})]})]})]}),(0,oe.jsxs)("div",{style:o.actionButtonsContainer,children:[(0,oe.jsx)(Es().A,{size:"lg",onClick:d,children:(0,oe.jsx)(f().sA,{id:"disableGuestsModal.saveChanges",defaultMessage:"Disable inviting guests"})}),(0,oe.jsx)(Vt().p,{onClick:t,style:o.cancelButton,children:(0,oe.jsx)(f().sA,{id:"disableGuestsModal.cancel",defaultMessage:"Cancel"})})]})]})}var yi=()=>s(719147),vi=()=>s(127955),ji=()=>s(987017);const Ai={security:(0,oe.jsx)(f().sA,{id:"securityTabs.security.title",defaultMessage:"Security"}),data_retention:(0,oe.jsx)("div",{style:{display:"flex"},children:(0,oe.jsx)(f().sA,{id:"securityTabs.dataRetention.title",defaultMessage:"Data retention"})})},Ci=(0,_s().uv)(Ai),wi=Ci.map((e=>Ai[e])),Ti=.5;const Mi=function(e){let{securitySettingsStore:t,spaceStore:s,organizationOverrides:n}=e;const r=(0,a().v3)(),d=(0,l().IS)((()=>({tabMenu:{marginBottom:24}})),[]),c=(0,o().K8)((()=>At().A.getState().defaultSubtab),[]),[u,g]=(0,i.useState)((()=>c&&Ci.includes(c)?Ci.indexOf(c):0)),p=(0,i.useCallback)((e=>{v()._J(r,{tab:Ci[e]}),g(e)}),[g,r]);return(0,oe.jsx)(Gt().Ay,{children:(0,oe.jsxs)("div",{children:[(0,oe.jsx)(me().A,{large:!0,divider:"full",children:(0,oe.jsx)(f().sA,{id:"securitySettings.securityAndData.title",defaultMessage:"Security & data"})}),(0,oe.jsx)(ji().Ay,{tabs:wi,selectedIndex:u,onChange:p,style:d.tabMenu}),0===u?(0,oe.jsx)(Ni,{securitySettingsStore:t,spaceStore:s,organizationOverrides:n}):(0,oe.jsx)(di,{spaceStore:s})]})})};function ki(e,t,s,i){cs().X(i,{spaceStore:s,securitySettingsStore:t,fields:e})}function Ii(e){return{fontWeight:S().Wy.medium,fontSize:18,borderBottom:`1px solid ${e.regularDividerColor}`,paddingBottom:6,marginBottom:12,display:"flex",alignItems:"center"}}function Di(e,t){const{subscriptionTier:s="enterprise"}=t||{};Ot().K(e,{from:"space_saml",upsell:{type:"product",product:s,limit:{type:"none"},trialability:"none"}})}function Ri(e,t,s,i){const{name:n,isToggleEnabled:a,showUpgradeIfDisabled:r}=e;if(!a)return r?Di(i):void 0;ki({[n]:!t.state[n]},t,s,i)}function _i(e){let{style:t,subscriptionTier:s="enterprise"}=e;const i=(0,a().v3)();return(0,oe.jsx)(bs().A,{subscriptionTier:s,analyticsName:"space_saml",onClick:()=>Di(i,{subscriptionTier:s}),desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3,...t}})}function Pi(e){let{requestTogglesAvailableForTier:t,spaceStore:s,securitySettingsStore:i,organizationOverrides:n,isShownInRequestsTab:r=!1}=e;const d=(0,a().v3)(),c=(0,o().K8)((()=>(0,is().dW)()),[]),u=(0,o().K8)((()=>t&&!Boolean(i.state.disableMembershipRequests)),[t,i]),g=(0,o().K8)((()=>t&&!Boolean(i.state.disableExternalMembershipRequests)),[t,i]),p=(0,o().K8)((()=>t&&!Boolean(i.state.disableGuestMembershipRequests)),[t,i]),m=(0,l().DP)();return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(vi().AJ,{environment:d,toggleOn:u,onClick:()=>Ri({name:"disableMembershipRequests",isToggleEnabled:t,showUpgradeIfDisabled:!1},i,s,d),isReadOnly:!1,upsellOrigin:"space_saml",style:{marginBottom:r?0:24},shouldShowUpsell:!t,isControlledByOrganization:Boolean(n.disable_membership_requests)}),r?(0,oe.jsx)(pi().A,{size:0,dividerColor:m.stroke.secondary}):null,(0,oe.jsx)(vi().fm,{environment:d,toggleOn:g,onClick:()=>Ri({name:"disableExternalMembershipRequests",isToggleEnabled:t,showUpgradeIfDisabled:!1},i,s,d),isReadOnly:!1,upsellOrigin:"space_saml",style:{marginBottom:r?0:24},shouldShowUpsell:!t,isControlledByOrganization:Boolean(n.disable_external_membership_requests)}),c&&r?(0,oe.jsx)(pi().A,{size:0,dividerColor:m.stroke.secondary}):null,c&&(0,oe.jsx)(vi().Ck,{environment:d,toggleOn:p,onClick:()=>Ri({name:"disableGuestMembershipRequests",isToggleEnabled:t,showUpgradeIfDisabled:!1},i,s,d),isReadOnly:!1,upsellOrigin:"space_saml",style:{marginBottom:r?0:24},shouldShowUpsell:!t,isControlledByOrganization:Boolean(n.disable_guest_membership_requests)})]})}function Bi(e){let{toggleAvailableForTier:t,guestCount:s,securitySettingsStore:i,spaceStore:n,publicAccessRequestsExpEnabled:r,isControlledByOrganization:l,showDivider:d}=e;const c=(0,a().v3)(),u=(0,o().O$)(i),g=(0,o().K8)((()=>!t||r&&!i.state.disablePublicAccessRequests),[t,i,r]),p=(0,o().K8)((()=>t?g||l?()=>{}:()=>async function(e,t,s){const i=e.state.disableGuests,n=e.state.enableGuestInviteRequests;if(i)ki({disableGuests:!i,...n&&{enableGuestInviteRequests:!n}},e,t,s);else{if(R().default.checkGate({gateName:"show_keep_existing_guests_modal"}))return void e.setState({...e.state,disableGuestsModalOpen:!0});{const{accept:e}=await j().Gh({message:(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.disableGuests.confirmationModal.message",defaultMessage:"Are you sure? All guests in this workspace will be removed."}),acceptLabel:(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.disableGuests.confirmationModal.confirmButton.label",defaultMessage:"Yes"})});if(!e)return}ki({disableGuests:!i},e,t,s)}}(i,n,c):()=>Di(c)),[c,t,i,n,g,l]);return(0,oe.jsxs)("div",{children:[(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[(0,oe.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.guestsSection.allowGuests.label",defaultMessage:"Allow members to invite guests to pages"}),!t&&(0,oe.jsx)(_i,{}),(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.guestsSection.disableGuests.caption",defaultMessage:"Your workspace currently has <gueststablink> {guestCount, plural, one {1 guest} other {{guestCount} guests}}</gueststablink>",values:{gueststablink:e=>(0,oe.jsx)(yi().A,{onClick:()=>{Ps().Gq(c,{source_tab:At().A.state.currentTab,destination_tab:"members",destination_subtab:ui().d.Guests}),At().A.setState({...At().A.state,currentTab:"members",defaultSubtab:ui().d.Guests})},children:e}),guestCount:s}})})]}),(0,oe.jsx)("div",{onClick:p,style:{marginTop:5,opacity:g?Ti:void 0},children:(0,oe.jsx)(gs().A,{on:!u.disableGuests,disabled:g,isLocked:l,lockedTooltip:(0,Bs().C_)()})})]}),d?(0,oe.jsx)(pi().A,{size:24,style:{opacity:0}}):null,(0,oe.jsx)(xi,{isOpen:Boolean(u.disableGuestsModalOpen),onDismiss:()=>{i.setState({...i.state,disableGuestsModalOpen:!1})},onSave:e=>{ki({disableGuests:!0,keepExistingGuests:e},i,n,c),i.setState({...i.state,disableGuestsModalOpen:!1})},guestCount:s})]})}function Ui(e){let{toggleAvailableForTier:t,securitySettingsStore:s,spaceStore:i,publicAccessRequestsExpEnabled:n,isControlledByOrganization:r,showDivider:l=!0}=e;const d=(0,a().v3)(),c=(0,o().K8)((()=>!t||!s.state.disableGuests||n&&!s.state.disablePublicAccessRequests),[s,t,n]),u=(0,o().K8)((()=>t&&c?()=>{}:()=>{r||Ri({name:"enableGuestInviteRequests",isToggleEnabled:t,showUpgradeIfDisabled:!0},s,i,d)}),[d,t,s,i,c,r]),g=(0,o().K8)((()=>(0,is().dW)()),[]),p=(0,o().K8)((()=>!t||s.state.disableGuests),[s,t]);return(0,oe.jsxs)("div",{children:[(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[(0,oe.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,oe.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.guestsSection.enableGuestInviteRequests.label",defaultMessage:"Allow members to request adding guests"}),t&&(0,oe.jsx)(zs().A,{style:{marginLeft:0},href:(0,Ye().xS)("guides.guestRequests"),analyticsFrom:"space_saml"}),!t&&(0,oe.jsx)(_i,{style:{marginTop:0}})]}),(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.guestsSection.enableGuestInviteRequests.caption",defaultMessage:"{hasRequestTab, select, true {Requests must be approved by a workspace owner. You can view all requests <requeststablink>here</requeststablink>} other {Requests must be approved by a workspace owner}}",values:{hasRequestTab:g,requeststablink:e=>(0,oe.jsx)(yi().A,{onClick:()=>{Ps().Gq(d,{source_tab:At().A.state.currentTab,destination_tab:"members",destination_subtab:ui().d.Requests}),At().A.setState({...At().A.state,currentTab:"members",defaultSubtab:ui().d.Requests})},children:e})}})})]}),(0,oe.jsx)(ye().A,{render:e=>(0,oe.jsx)("div",{onClick:u,style:{marginTop:5,opacity:c?Ti:void 0},...e,children:(0,oe.jsx)(gs().A,{on:s.state.enableGuestInviteRequests,disabled:c,isLocked:r,lockedTooltip:(0,Bs().C_)()})}),renderTooltip:()=>(0,oe.jsx)("div",{style:{},children:(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.guestsSection.enableGuestInviteRequests.disabled.label",defaultMessage:"Disable inviting guests to use this feature"})}),disableTooltip:p,placement:Ae().W.Top})]}),l?(0,oe.jsx)(pi().A,{size:24,style:{opacity:0}}):null]})}function Li(e){let{disableGuestsAvailableForTier:t,enableGuestInviteRequestAvailableForTier:s,enableExternalAccessRequestSettingForTier:i,securitySettingsStore:n,spaceStore:a,organizationOverrides:r}=e;return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(me().A,{large:!0,divider:"full",children:(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.guestsSection.title",defaultMessage:"Inviting members & guests"})}),(0,oe.jsx)(Oi,{securitySettingsStore:n,spaceStore:a,disableGuestsAvailableForTier:t,enableGuestInviteRequestAvailableForTier:s,enableExternalAccessRequestSettingForTier:i,organizationOverrides:r,isShownInRequestsTab:!1})]})}function Oi(e){let{disableGuestsAvailableForTier:t,enableGuestInviteRequestAvailableForTier:s,enableExternalAccessRequestSettingForTier:i,securitySettingsStore:n,spaceStore:a,organizationOverrides:r,isShownInRequestsTab:d=!1}=e;const c=(0,o().K8)((()=>(0,is().dW)()),[]),u=(0,o().K8)((()=>R().default.checkGate({gateName:"allow_public_page_access_request",disableExposureLogging:!0})),[]),g=(0,Os().r)(),p=(0,l().DP)();return void 0===g?(0,oe.jsx)(mi().A,{}):(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Fi,{spaceStore:a,securitySettingsStore:n,toggleAvailableForTier:i,publicAccessRequestsExpEnabled:u,showDivider:!d}),d?(0,oe.jsx)(pi().A,{size:0,dividerColor:p.stroke.secondary}):null,(0,oe.jsx)(Bi,{securitySettingsStore:n,spaceStore:a,toggleAvailableForTier:t,guestCount:g,publicAccessRequestsExpEnabled:u,isControlledByOrganization:Boolean(r.disable_guests),showDivider:!d}),d?(0,oe.jsx)(pi().A,{size:0,dividerColor:p.stroke.secondary}):null,(0,oe.jsx)(Ui,{securitySettingsStore:n,spaceStore:a,toggleAvailableForTier:s,publicAccessRequestsExpEnabled:u,isControlledByOrganization:Boolean(r.enable_guest_invite_requests),showDivider:!d}),d?(0,oe.jsx)(pi().A,{size:0,dividerColor:p.stroke.secondary}):null,(0,oe.jsx)(Pi,{spaceStore:a,securitySettingsStore:n,requestTogglesAvailableForTier:c,organizationOverrides:r,isShownInRequestsTab:d})]})}function qi(e){let{enable:t,featureUpsellButton:s,securitySettingsStore:i,spaceStore:n,isControlledByOrganization:r}=e;const l=(0,a().v3)(),d=(0,o().K8)((()=>i.state.disablePublicAccess),[i]),c=(0,Ze().X)("sharing_anyone_with_the_link");return(0,oe.jsxs)("div",{children:[(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:t?()=>{r||async function(e,t,s){const i=e.state.disablePublicAccess,n=R().default.checkGate({gateName:"sharing_anyone_with_the_link"});if(!i){const{accept:e}=await j().Gh({message:n?(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.messageAWTLUpdate",defaultMessage:"Are you sure you want to disable publishing sites, forms, and public links?"}):(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.message",defaultMessage:"Are you sure you want to disable publishing sites and forms?"}),description:(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.description",defaultMessage:"This will remove access for anyone who is not a member or guest of the workspace from all pages in this workspace."}),acceptLabel:(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.confirmButton.label",defaultMessage:"Yes"})});if(!e)return}ki({disablePublicAccess:!i},e,t,s)}(i,n,l)}:()=>Di(l),children:[(0,oe.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[c?(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.preventPublicSharing.labelAWTLUpdate",defaultMessage:"Disable publishing sites, forms, and public links"}):(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.preventPublicSharing.label",defaultMessage:"Disable publishing sites and forms"}),!t&&s,(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:c?(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.preventPublicSharing.captionUpdatedAWTL",defaultMessage:"Disable the Publish site and Anyone on the web with link options in the Share menu on every page and form in this workspace"}):(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.preventPublicSharing.caption",defaultMessage:"Disable the Share to web option in the Share menu on every page and form in this workspace."})})]}),(0,oe.jsx)("div",{style:{marginTop:5,opacity:t?void 0:Ti},children:(0,oe.jsx)(gs().A,{on:d,disabled:!t,isLocked:r,lockedTooltip:(0,Bs().C_)()})})]}),(0,oe.jsx)(pi().A,{size:24,style:{opacity:0}})]})}function Wi(e){let{enable:t,featureUpsellButton:s,securitySettingsStore:i,spaceStore:n}=e;const r=(0,a().v3)(),l=(0,o().K8)((()=>i.state.disableSpacePageEdits),[i]);return(0,o().K8)((()=>(0,Ls().zI)()>0),[])?null:(0,oe.jsxs)("div",{children:[(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>Ri({name:"disableSpacePageEdits",isToggleEnabled:t,showUpgradeIfDisabled:!0},i,n,r),children:[(0,oe.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.disableSpacePageEdits.label",defaultMessage:"Prevent members from editing the Workspace section"}),!t&&s,(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"},children:(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.disableSpacePageEdits.caption",defaultMessage:"Disable the ability for members to create, move, reorder, and delete top-level Workspace pages."})})]}),(0,oe.jsx)("div",{style:{marginTop:5,opacity:t?void 0:Ti},children:(0,oe.jsx)(gs().A,{on:l,disabled:!t})})]}),(0,oe.jsx)(pi().A,{size:24,style:{opacity:0}})]})}function Ei(e){let{enable:t,spaceStore:s,securitySettingsStore:i,featureUpsellButton:n,isControlledByOrganization:r}=e;const l=(0,a().v3)(),d=(0,o().K8)((()=>i.state.disableMoveToSpace),[i]);return(0,oe.jsxs)("div",{children:[(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>{r||Ri({name:"disableMoveToSpace",isToggleEnabled:t,showUpgradeIfDisabled:!0},i,s,l)},children:[(0,oe.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.disableMovingPages.label",defaultMessage:"Disable duplicating pages to other workspaces"}),!t&&n,(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.disableMovingPages.caption",defaultMessage:"Prevent anyone from duplicating pages to other workspaces via the Move To or Duplicate To actions."})})]}),(0,oe.jsx)("div",{style:{marginTop:5,opacity:t?void 0:Ti},children:(0,oe.jsx)(gs().A,{on:d,disabled:!t,isLocked:r,lockedTooltip:(0,Bs().C_)()})})]}),(0,oe.jsx)(pi().A,{size:24,style:{opacity:0}})]})}function zi(e){let{enable:t,securitySettingsStore:s,spaceStore:i,featureUpsellButton:n,isControlledByOrganization:r}=e;const l=(0,a().v3)(),d=(0,o().K8)((()=>s.state.disableExport),[s]);return(0,oe.jsxs)("div",{children:[(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>{r||Ri({name:"disableExport",isToggleEnabled:t,showUpgradeIfDisabled:!0},s,i,l)},children:[(0,oe.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.disableExport.label",defaultMessage:"Disable export"}),!t&&n,(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.disableExport.caption",defaultMessage:"Prevent anyone from exporting as Markdown, CSV, or PDF."})})]}),(0,oe.jsx)("div",{style:{marginTop:5,opacity:t?void 0:Ti},children:(0,oe.jsx)(gs().A,{on:d,disabled:!t||r,isLocked:r,lockedTooltip:(0,Bs().C_)()})})]}),(0,oe.jsx)(pi().A,{size:24,style:{opacity:0}})]})}function Fi(e){let{securitySettingsStore:t,spaceStore:s,publicAccessRequestsExpEnabled:i,toggleAvailableForTier:n,isControlledByOrganization:r,showDivider:l=!1}=e;const d=(0,a().v3)(),c=(0,o().K8)((()=>t.state.disablePublicAccessRequests),[t]),u=(0,o().K8)((()=>{if(!n)return()=>Di(d,{subscriptionTier:"plus"});const e=!t.state.disablePublicAccessRequests,i=!e;return()=>{r||ki({disablePublicAccessRequests:e,...i&&{disableGuests:!1,enableGuestInviteRequests:!1}},t,s,d)}}),[d,s,t,n,r]);return i?(0,oe.jsxs)("div",{children:[(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:u,children:[(0,oe.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.disablePublicAccessRequests.label",defaultMessage:"Allow page access requests from non-members"}),!n&&(0,oe.jsx)(_i,{subscriptionTier:"plus"}),(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.securitySection.disablePublicAccessRequests.caption",defaultMessage:"This allows anyone with the link to a page to request access. Workspace members can always request access."})})]}),(0,oe.jsx)("div",{style:{marginTop:5,opacity:n?void 0:Ti},children:(0,oe.jsx)(gs().A,{on:!c,disabled:!n,isLocked:r,lockedTooltip:(0,Bs().C_)()})})]}),l?(0,oe.jsx)(pi().A,{size:24,style:{opacity:0}}):null]}):null}function Ni(e){let{securitySettingsStore:t,spaceStore:s,organizationOverrides:n}=e;const a=(0,l().DP)(),r=(0,ns().lh)({spaceId:s.id}),d=(0,o().K8)((()=>(0,Us().e)({billingData:r})),[r]),c=(0,o().O$)(t),u=(0,o().K8)((()=>(0,gi().OX)()),[]),g=(0,o().K8)((()=>(0,gi().jR)()),[]),p=(0,oe.jsx)(_i,{});return d?(0,oe.jsxs)(i.Fragment,{children:[(0,oe.jsx)(me().A,{large:!0,divider:"full",children:(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.generalSection.title",defaultMessage:"General"})}),(0,oe.jsx)(qi,{enable:!0,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_public_access)}),(0,oe.jsx)(Wi,{enable:!0,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p}),(0,oe.jsx)(Ei,{enable:!0,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_move_to_space)}),(0,oe.jsx)(zi,{enable:!0,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_export)}),(0,oe.jsx)(Li,{securitySettingsStore:t,spaceStore:s,disableGuestsAvailableForTier:!0,enableGuestInviteRequestAvailableForTier:u,enableExternalAccessRequestSettingForTier:g,organizationOverrides:n}),(0,oe.jsx)("div",{style:{height:36}})]}):(0,oe.jsxs)(i.Fragment,{children:[(0,oe.jsx)("div",{style:Ii(a),children:(0,oe.jsx)("span",{style:{marginRight:8},children:(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.generalSection.title",defaultMessage:"General"})})}),(0,oe.jsx)(qi,{enable:c.disablePublicAccess,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_public_access)}),(0,oe.jsx)(Wi,{enable:c.disableSpacePageEdits,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p}),(0,oe.jsx)(Ei,{enable:c.disableMoveToSpace,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_move_to_space)}),(0,oe.jsx)(zi,{enable:c.disableExport,spaceStore:s,securitySettingsStore:t,featureUpsellButton:p,isControlledByOrganization:Boolean(n.disable_export)}),(0,oe.jsx)(Li,{securitySettingsStore:t,spaceStore:s,disableGuestsAvailableForTier:c.disableGuests,enableGuestInviteRequestAvailableForTier:c.enableGuestInviteRequests,enableExternalAccessRequestSettingForTier:g,organizationOverrides:n}),(0,oe.jsx)("div",{style:{height:32}})]})}var Gi=()=>s(638743),Ki=()=>s(714300);function Vi(e){let{spaceStore:t}=e;const s=(0,f().tz)(),{setPage:n}=(0,i.useContext)(ls().K);return(0,oe.jsxs)(Rt().Y1,{height:"fill",direction:"vertical",gap:16,padding:"36px 60px",children:[(0,oe.jsx)(js().n,{title:s.formatMessage($i.title),goBack:()=>n("home")}),(0,oe.jsx)(Hi,{spaceStore:t})]})}function Hi(e){let{spaceStore:t}=e;const s=(0,Ki().l)({spaceId:t.id}),i=(0,o().K8)((()=>(0,Us().e)({billingData:s})),[s]),n=(0,o().uB)(void 0,xt().A);(0,r().l)((()=>{const e=n.getValueForSpace(t);e&&n.setState(e)}));const a=(0,o().O$)(n),{organizationOverrides:l}=(0,Gi().n)({spaceId:t.id}),d=(0,p().AI)(s),c=(0,o().K8)((()=>(0,m().OX)(d)),[d]),u=(0,o().K8)((()=>(0,m().jR)(d)),[d]);return i?(0,oe.jsx)(Oi,{securitySettingsStore:n,spaceStore:t,disableGuestsAvailableForTier:!0,enableExternalAccessRequestSettingForTier:u,enableGuestInviteRequestAvailableForTier:c,organizationOverrides:l,isShownInRequestsTab:!0}):(0,oe.jsx)(Oi,{securitySettingsStore:n,spaceStore:t,disableGuestsAvailableForTier:a.disableGuests,enableExternalAccessRequestSettingForTier:u,enableGuestInviteRequestAvailableForTier:a.enableGuestInviteRequests,organizationOverrides:l,isShownInRequestsTab:!0})}const $i=(0,f().YK)({title:{id:"RequestsSettingPage.PeopleInvitationSettings.title",defaultMessage:"Inviting guests and members"}});var Yi=()=>s(938621);function Ji(e){let{spaceStore:t,securitySettingsStore:s}=e;const n=(0,o().K8)((()=>"requests"===At().A.state.currentTab&&At().A.state.defaultSubtab||"home"),[]),[a,r]=(0,i.useState)(n),l=(0,os().n)();return(0,oe.jsx)(ls().K.Provider,{value:{currentPage:a,setPage:r,isSalesEligible:l},children:(0,oe.jsx)(Qi,{securitySettingsStore:s,spaceStore:t})})}function Qi(e){let{spaceStore:t,securitySettingsStore:s}=e;const{currentPage:n}=(0,i.useContext)(ls().K);switch(n){case"home":return(0,oe.jsx)(Cs,{securitySettingsStore:s,spaceStore:t});case"people_invitation_settings":return(0,oe.jsx)(Vi,{spaceStore:t});case"upgrades":return(0,oe.jsx)(Yi().Z,{spaceStore:t});default:return null}}var Zi=()=>s(749240),Xi=()=>s(406965);const en={VerifiedPagesSettings:new(Le().O2)("VerifiedPagesSettings",(()=>Promise.all([s.e(6463),s.e(93449),s.e(29252),s.e(74357),s.e(16006)]).then(s.bind(s,541616))))},tn=(0,Le()._h)(en.VerifiedPagesSettings,(e=>e.VerifiedPagesSettings));var sn=()=>s(710967),nn=()=>s(404302),an=()=>s(495427),rn=()=>s(249847);var on=()=>s(701144),ln=()=>s(837503),dn=()=>s(518658),cn=()=>s(459173),un=()=>s(497799),gn=()=>s(223544);function pn(e){let{spaceStore:t,sharedWithFilterItems:s,setSharedWithFilter:n,runNewSearch:a,includeGroups:r,includeGuests:o}=e;const l=(0,un().H)({spaceStore:t}),d=(0,i.useMemo)((()=>l.loading?[]:o?[...l.members,...l.guests]:l.members),[l,o]),c=(0,i.useMemo)((()=>l.loading?new Set:new Set(l.guests.map((e=>e.id)))),[l]);return(0,oe.jsx)(gn().Jo,{isMultiSelect:!0,includePermissionGroups:r,userStores:d,title:(0,oe.jsx)(f().sA,{id:"adminContentSearchTab.pagesTable.filters.sharedWith.title",defaultMessage:"Shared with"}),selectedItems:s??[],setSelectedItems:function(e){const t=e.map((e=>{let{id:t,type:s}=e;return{type:s,id:t}}));n(t.length>0?t:void 0)},onMenuClose:a,guestUserIdSet:c,includeGuests:o})}var mn=()=>s(333046);function fn(e){let{spaceStore:t,filters:s,runNewSearch:n,setFilters:r,hasUserConfirmedAcknowledgement:d}=e;const c=function(e){const[t,s]=(0,i.useState)([]),n=(0,a().v3)(),r=(0,o().K8)((()=>(null==e?void 0:e.spaceStore)??ut().default.state.currentSpaceStore),[null==e?void 0:e.spaceStore]),l=(0,rn().T)();return(0,i.useEffect)((()=>{!async function(){const e=await(0,Ls().S)({spaceStore:r,currentUserId:l,includeArchived:!1,minRoleOnTeamStores:"editor",environment:n});s(e)}()}),[r,l,n]),t}(),u=(0,l().IS)((e=>({container:{margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItemsCenter:"center"}})),[]);return(0,oe.jsxs)("div",{style:u.container,children:[(0,oe.jsx)(an().nv,{mode:an().Ke.Button,query:s.query,setQueryFilter:function(e){r({query:e},{runSearchAfter:!0})},disabled:!d}),d?(0,oe.jsxs)("div",{style:u.filterPillsContainer,children:[(0,oe.jsx)(cn().MC,{spaceStore:t,selectedPageStatus:s.pageStatus,setSelectedPageStatus:function(e){r({pageStatus:e})},onMenuClose:n}),(0,oe.jsx)(dn().Z,{lastEditedTime:s.lastEditedTime,createdTime:s.createdTime,setLastEditedTime:function(e){r({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){r({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}}),(0,oe.jsx)(mn().j,{selectedTeamIds:s.teamIds,setSelectedTeamIds:function(e){r({teamIds:e})},onMenuClose:n,teamStores:c}),(0,oe.jsx)(pn,{spaceStore:t,sharedWithFilterItems:s.sharedWith,setSharedWithFilter:function(e){r({sharedWith:e})},runNewSearch:n,includeGroups:!0,includeGuests:!0}),(0,oe.jsx)(on().tE,{selectedAudience:s.audience,setSelectedAudience:function(e){r({audience:e})},onMenuClose:n,audienceValues:nn().p}),(0,oe.jsx)(ln().Q,{spaceStore:t,createdByFilterIds:s.createdBy,setCreatedByFilter:function(e){r({createdBy:e})},runNewSearch:n,includeGuests:!0})]}):null]})}function hn(e){let{spaceStore:t,filters:s,pageStores:i,hasUserConfirmedAcknowledgement:n}=e;const a=(0,o().K8)((()=>t.getName()),[t]);return(0,oe.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:24},children:[(0,oe.jsx)(ve().A,{isMultiline:!0,style:{marginBottom:20},isSecondaryColor:!0,children:(0,oe.jsx)(f().sA,{id:"adminContentSearchTab.description.dataRetentionPolicy",defaultMessage:"Workspace owners can search for any page in <b>{workspaceName}</b>. This includes private pages and deleted pages retained per the <link>data retention policy</link>",values:{workspaceName:a,b:e=>(0,oe.jsx)("b",{children:e}),link:e=>(0,oe.jsx)(yi().A,{onClick:()=>At().A.setState({openedFrom:"content_search",open:!0,currentTab:"security",highlightedSetting:void 0,defaultSubtab:"data_retention"}),children:e})}})}),(0,oe.jsx)(sn().t,{spaceId:t.id,disabled:0===i.length||!n,filters:s})]})}const Sn=function(e){let{spaceStore:t,userStore:i}=e;const n=(0,a().v3)(),r=(0,o().K8)((()=>{const e=ut().default.state.currentSpaceViewStore,t=null==e?void 0:e.getSettings();return(null==t?void 0:t.admin_content_search_acknowledgement)??!1}),[]),{showSuggestions:l,loadNextPage:d,pageStores:c,loading:u,error:g,runNewSearch:p,filters:m,setFilters:h,refreshSearchResult:S}=(0,s(583521).I)({spaceStore:t,userStore:i,hasUserConfirmedAcknowledgement:r});return(0,oe.jsxs)(Gt().Ay,{children:[(0,oe.jsx)(me().A,{large:!n.device.isMobile||void 0,divider:n.device.isMobile?void 0:"full",children:(0,oe.jsx)(f().sA,{id:"adminContentSearchTab.title",defaultMessage:"Content search"})}),(0,oe.jsx)(hn,{spaceStore:t,pageStores:c,filters:m,hasUserConfirmedAcknowledgement:r}),(0,oe.jsx)(fn,{spaceStore:t,runNewSearch:p,setFilters:h,filters:m,hasUserConfirmedAcknowledgement:r}),(0,oe.jsx)(s(793571).r,{loading:u,error:g,pageStores:c,loadNextPage:d,filters:m,setFilters:h,showSuggestions:l,runNewSearch:p,hasUserConfirmedAcknowledgement:r,refreshSearchResult:S})]})};var xn=()=>s(916727),bn=()=>s(96689),yn=()=>s(908928),vn=()=>s(515402),jn=()=>s(633457),An=()=>s(235195),Cn=()=>s(40851),wn=()=>s(870897),Tn=()=>s(251126),Mn=()=>s(378765);const kn=function(e){let{spaceStore:t,userStore:n,organizationOverrides:r}=e;const l=(0,a().v3)(),d=(0,o().uB)(void 0,Cn().A),{device:c}=l,u=(0,o().K8)((()=>(0,s(640653).s7)(l)),[l]);return(0,i.useEffect)((()=>{u||A().Ow({currentTab:"members"})}),[u]),u?(0,oe.jsxs)(Gt().Ay,{children:[(0,oe.jsx)(me().A,{large:!c.isMobile||void 0,divider:c.isMobile?void 0:"full",style:{paddingBottom:12},children:(0,oe.jsx)(f().sA,{id:"spaceConnectionsSettings.title",defaultMessage:"Connections"})}),(0,oe.jsx)(Dn,{spaceStore:t,userStore:n,requestStore:d,organizationOverrides:r})]}):null};function In(e){let{error:t,result:s,ready:i,organizationOverrides:n}=e;return(0,o().O$)(ut().AppStoreCurrentSpaceStore)?(0,oe.jsxs)(Mn().A,{loaded:i,spinnerSize:"sm",showSpinnerTimeout:600,children:[t&&(0,oe.jsx)("div",{children:(0,oe.jsx)(f().sA,{id:"spaceIntegrationSettings.error",defaultMessage:"Something went wrong"})}),s&&(0,oe.jsx)(wn().Ay,{...s,organizationOverrides:n})]}):null}function Dn(e){let{spaceStore:t,userStore:s,requestStore:i,organizationOverrides:n}=e;const r=(0,a().v3)(),l=(0,o().uB)(i,Cn().A),d=(0,Ze().X)("ai_connector_discoverability");return(0,oe.jsx)(Tn().A,{requestStore:l,request:{spaceId:t.id,userId:s.id},performRequest:async e=>(d&&await async function(e,t){let{spaceId:s}=e;const i=await q().callApi({eventName:"getConnectedAppsForUniversalQna",environment:t,data:{spaceId:s},headers:(0,B().WS)({spaceId:s})});var n;return"success"===i.type&&An().A.setState({...An().A.state,appsConnectionData:(null===(n=i.data)||void 0===n?void 0:n.appsData)||[]}),[]}(e,r),async function(e,t){let{spaceId:s}=e;return{guestBotIds:(await Promise.all([yn().Ju({environment:t,table:bn().NX,id:s,type:"guest"}),yn().Ju({environment:t,table:bn().NX,id:s,type:"external"}),jn().oX({environment:t}),vn().g({environment:t})]))[0].botIds}}(e,r)),render:(e,t,s)=>(0,oe.jsx)(In,{error:e,result:t,ready:s,organizationOverrides:n})})}var Rn=()=>s(313633),_n=()=>s(297872),Pn=()=>s(453697),Bn=()=>s(382055),Un=(s(944114),()=>s(319625)),Ln=()=>s(532313);const On=10,qn=[50,100,200,500,1e3],Wn=50;function En(e){var t;let{spaceStore:s,samlConfigStore:n,memberCountFilter:r,isPrimarySpace:l}=e;const d=(0,a().v3)(),c=(0,o().K8)((()=>n.state.emailDomains),[n]),[u,g]=(0,i.useState)({spaces:[],nextEarliestCreatedAt:Date.now(),numPagesLoaded:0,hasNextPage:!1,loading:!1,error:void 0}),p=(0,Wt().P9)({name:"claimable_spaces",spaceId:s.id,userId:null===(t=d.currentUser)||void 0===t?void 0:t.id}),m=(0,i.useCallback)((async e=>{if(p&&0!==c.length&&l&&u.nextEarliestCreatedAt&&!u.loading&&!(e&&u.numPagesLoaded>0||u.error)){g((e=>({...e,loading:!0})));try{const{spaces:e,earliestCreatedAt:t,hasMoreSpaces:i}=await(0,Ln().L5)({fn:async()=>await async function(e,t,s,i,n){const a=await q().callApi({eventName:"getSpacesCreatedByUserWithDomains",environment:e,data:{spaceId:t,emailDomains:s,spacesLimit:On,memberCountFilter:n,spaceCreatedTimeUpperBound:i}});if("failed"===a.type)throw a.error;return{spaces:a.data.results.map((e=>({id:e.id,name:e.spaceName,icon:e.spaceIcon,createdAt:e.spaceCreatedTime,memberCount:e.memberCount,subscriptionTier:e.subscriptionTier,creatorEmailDomain:e.spaceCreatedByDomain,creator:e.spaceCreator,admins:e.admins,spaceRequest:e.spaceRequest,isDelinquent:e.isDelinquent,isPendingBilling:e.isPendingBilling,isActorInSpace:e.isActorInSpace}))),earliestCreatedAt:a.data.hasMoreSpaces?a.data.earliestCreatedAt:void 0,hasMoreSpaces:a.data.hasMoreSpaces}}(d,s.id,c,u.nextEarliestCreatedAt?u.nextEarliestCreatedAt-1:Date.now(),r),handleError:(e,t)=>t?{status:"throw",error:e}:{status:"retry"},retryAttemptsMS:qn,retryAttemptRandomOffsetMS:Wn,initialInput:void 0});g((s=>{const n=[...s.spaces],a=new Set(s.spaces.map((e=>e.id)));for(const t of e)a.has(t.id)||n.push(t);return{spaces:n,nextEarliestCreatedAt:t,numPagesLoaded:s.numPagesLoaded+1,hasNextPage:i,loading:!1,error:void 0}}))}catch(t){const e=(0,Un().A)(t);g((t=>({...t,loading:!1,error:e})))}}}),[d,p,r,l,s,c,u.nextEarliestCreatedAt,u.numPagesLoaded,u.loading,u.error]);const f=(0,i.useCallback)((async()=>{await m(!1)}),[m]),h=(0,i.useCallback)((async()=>{await m(!0)}),[m]),S=(0,i.useCallback)((async()=>{g({spaces:[],nextEarliestCreatedAt:Date.now(),numPagesLoaded:0,hasNextPage:!1,loading:!1,error:void 0}),await m(!0)}),[m]);return{claimableSpaces:u.spaces,loading:u.loading,error:u.error,hasNextPage:u.hasNextPage,loadFirstPage:h,loadNextPage:f,resetFirstPage:S,setSpaceRequest:function(e,t){g((s=>{const i=s.spaces.map((s=>s.id===e?{...s,spaceRequest:t}:s));return{...s,spaces:i}}))},removeClaimableSpace:function(e){g((t=>{const s=t.spaces.filter((t=>t.id!==e));return{...t,spaces:s}}))}}}var zn=()=>s(187174);async function Fn(e){var t;const{environment:s,spaceId:i,store:n}=e;if(!(await(0,Wt().Se)(s,{name:"saml",spaceId:i,userId:null===(t=ut().default.state.currentUserStore)||void 0===t?void 0:t.id})))return n.reset(),{};const a=await q().callApi({eventName:"getSamlConfigForSpace",environment:s,data:{spaceId:i}});if("failed"===a.type)j().Qg(a);else if(a.data&&a.data.samlConfig){const e={...a.data.samlConfig,useMetadataUrl:!Boolean(a.data.samlConfig.idpMetadata)};return n.setState(e),a.data}return n.reset(),{}}const Nn={SettingsPage:"settings-page",WorkspacesPage:"workspaces-page",ManagedUsersPage:"managed-users-page"};let Gn=function(e){return e[e.Single=0]="Single",e[e.Multi=1]="Multi",e}({});const Kn=(0,i.createContext)(null);function Vn(e){let{spaceStore:t,samlConfigStore:s,domainSettingsStore:n,children:r}=e;const l=(0,a().v3)(),[d,c]=(0,i.useState)(Nn.SettingsPage),[u,g]=(0,i.useState)(Gn.Single),p=(0,o().K8)((()=>s.state.emailDomains),[s]),f=(0,o().K8)((()=>Boolean(s.state.id)&&s.state.id===t.id),[s,t]),{loading:h,error:S,loaded:x}=function(e){let{spaceStore:t,samlConfigStore:s,domainSettingsStore:i}=e;const n=(0,a().v3)(),[{status:r,error:o}]=(0,zn().Yb)((async()=>{const e=await Fn({environment:n,spaceId:t.id,store:s});return(0,P().USz)(e)?e:e.samlConfig?{samlResponse:e,domainResponse:await i.updateValueForSpace({environment:n,spaceId:t.id,store:i})}:{samlResponse:e,domainResponse:void 0}}),[n,s,t,i]);return{loading:"pending"===r,loaded:"resolved"===r,error:o}}({spaceStore:t,samlConfigStore:s,domainSettingsStore:n}),{loading:b,error:y,claimableSpaces:v,setSpaceRequest:j,removeClaimableSpace:A,hasNextPage:C,loadNextPage:w,loadFirstPage:T,resetFirstPage:M}=En({spaceStore:t,samlConfigStore:s,isPrimarySpace:f,memberCountFilter:"single"}),{loading:k,error:I,claimableSpaces:D,setSpaceRequest:R,removeClaimableSpace:_,hasNextPage:B,loadNextPage:U,loadFirstPage:L,resetFirstPage:O}=En({spaceStore:t,samlConfigStore:s,isPrimarySpace:f,memberCountFilter:"multi"}),W=v.length+D.length>0,[E,z,F,N,G,K,V,H]=u===Gn.Single?[b,y,v,j,A,C,w,T,M]:[k,I,D,R,_,B,U,L,O],{loading:$,error:Y,domainVerifications:J}=function(e){let{spaceStore:t}=e;const s=(0,a().v3)(),[n,r]=(0,i.useState)([]),[{status:o,error:l}]=(0,zn().Yb)((async()=>{if(!(0,m().HO)(t.getSubscriptionTier()))return void r([]);const e=await q().callApi({eventName:"getDomainVerificationCodesForSpace",environment:s,data:{spaceId:t.id,verifiedOnly:!0}});"success"===e.type?r(e.data.domainVerifications):r([])}),[s,t]);return{loading:"pending"===o,domainVerifications:"resolved"===o?n:[],error:l}}({spaceStore:t,emailDomains:p});(0,i.useEffect)((()=>{T(),L()}),[F,T,L]);const Q={page:d,navigateTo:function(e){c(e),0===v.length&&D.length>0&&g(Gn.Multi),"workspaces-page"===e&&Bn().Vp(l,{verifiedDomains:p,tab:u===Gn.Single?"single":"multi"})},loadingSaml:h,loadingSpaces:E,loadingVerifications:$,errorSaml:S,errorClaimableSpaces:z,errorVerifications:Y,loadedSaml:x,domainVerifications:J,hasBrowsableSpaces:W,claimableSpaces:F,setSpaceRequest:N,removeClaimableSpace:G,resetInitialClaimableSpaces:H,hasMoreClaimableSpaces:K,loadMoreClaimableSpaces:V,tab:u,setSelectedTab:function(e){g(e),"workspaces-page"===d&&Bn().Vp(l,{verifiedDomains:p,tab:e===Gn.Single?"single":"multi"})},verifiedDomains:p};return(0,oe.jsx)(Kn.Provider,{value:Q,children:r})}var Hn=()=>s(133033),$n=()=>s(285790),Yn=(s(672577),()=>s(560838)),Jn=()=>s(818044),Qn=()=>s(173019),Zn=()=>s(640479);const Xn=(0,kt().wt)("showDeletedPages",{viewBox:"0 0 16 16",svg:(0,oe.jsx)("path",{d:"M1.89551 8.5498C1.89551 11.9404 4.61621 14.668 8 14.668C11.3838 14.668 14.1045 11.9404 14.1045 8.5498C14.1045 5.16602 11.4043 2.45898 8.02051 2.45898C7.66504 2.45898 7.31641 2.49316 7.01562 2.55469L8.66992 0.920898C8.78613 0.797852 8.85449 0.640625 8.85449 0.462891C8.85449 0.09375 8.56738 -0.207031 8.20508 -0.207031C8.01367 -0.207031 7.84961 -0.138672 7.7334 -0.00878906L4.93066 2.8418C4.79395 2.97852 4.71875 3.15625 4.71875 3.33398C4.71875 3.51855 4.78711 3.68262 4.93066 3.82617L7.7334 6.65625C7.84961 6.7793 8.00684 6.84082 8.20508 6.84082C8.56738 6.84082 8.85449 6.55371 8.85449 6.17773C8.85449 6 8.78613 5.85645 8.66309 5.72656L6.80371 3.88086C7.15234 3.80566 7.56934 3.77148 8.02051 3.77148C10.666 3.77148 12.7646 5.88379 12.7646 8.5498C12.7646 11.2021 10.6455 13.3281 8 13.3281C5.35449 13.3281 3.23535 11.2021 3.23535 8.5498C3.23535 8.14648 2.97559 7.85938 2.5791 7.85938C2.17578 7.85938 1.89551 8.14648 1.89551 8.5498Z"})});var ea=()=>s(412632),ta=()=>s(436572);const sa={managedUsers:[],filters:{query:"",multiFactorStatus:void 0,workspaceId:void 0},numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,loading:!1,error:void 0};function ia(e){let{spaceStore:t,samlConfigStore:s,userStatus:n}=e;const r=(0,a().v3)(),[l,d]=(0,i.useState)(sa),c=(0,i.useRef)(void 0),u=(0,o().K8)((()=>Boolean(s.state.id)&&s.state.id===t.id),[s,t]),g=(0,o().K8)((()=>s.state.emailDomains),[s]),p=(0,i.useCallback)((async e=>{if(0===g.length)return;if(!u)return;let s=l.loading,i=l.error,a=l.hasNextPage,o=l.paginationToken;if(e.restartSearch&&(d((e=>({...sa,filters:e.filters}))),s=sa.loading,i=sa.error,a=sa.hasNextPage,o=sa.paginationToken),a&&!s&&!i){d((e=>({...e,loading:!0}))),c.current=l.filters;try{var p;const e=await q().callApi({eventName:"getManagedUsers",environment:r,data:{spaceId:t.id,emailDomains:g,query:l.filters.query,multiFactorStatus:l.filters.multiFactorStatus,workspaceId:l.filters.workspaceId,paginationToken:o,userStatus:n}});if(Ps().F2(r,{filters:{multiFactorStatus:l.filters.multiFactorStatus,workspaceId:l.filters.workspaceId},query_length:(null===(p=l.filters.query)||void 0===p?void 0:p.length)??0,current_page:o,user_status:n}),"failed"===e.type)throw e.error;const s=e.data.nextPaginationToken,i=e.data.results;d((e=>{const t=[...e.managedUsers],n=new Set(e.managedUsers.map((e=>e.userId)));for(const s of i)n.has(s.userId)||t.push(s);return{...e,managedUsers:t,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:s,hasNextPage:Boolean(s)}}))}catch(m){const e=(0,Un().A)(m);d((t=>({...t,loading:!1,error:e})))}}}),[r,t,g,u,l.loading,l.error,l.hasNextPage,l.paginationToken,l.filters,n]);(0,i.useEffect)((()=>{h().n4(c.current,l.filters)||p({restartSearch:!0})}),[l.filters,p]);const m=(0,i.useCallback)((()=>p({restartSearch:!1})),[p]),f=(0,i.useCallback)((e=>{d((t=>({...t,filters:{...t.filters,...e}})))}),[]),S=(0,i.useCallback)(((e,t)=>{d((s=>({...s,managedUsers:s.managedUsers.map((s=>s.userId===e?{...s,workspaces:s.workspaces.filter((e=>e.id!==t))}:s))})))}),[]),x=(0,i.useCallback)((e=>{d((t=>({...t,managedUsers:[...t.managedUsers,e]})))}),[]),b=(0,i.useCallback)((e=>{d((t=>({...t,managedUsers:t.managedUsers.filter((t=>t.userId!==e))})))}),[]);return{managedUsers:l.managedUsers,filters:l.filters,loading:l.loading,error:l.error,removeWorkspaceFromUser:S,addUserToManagedUsers:x,removeUserFromManagedUsers:b,setFilters:f,hasNextPage:l.hasNextPage,loadNextPage:m}}let na=function(e){return e[e.NotSuspended=0]="NotSuspended",e[e.Suspended=1]="Suspended",e}({});function aa(e){switch(e){case na.Suspended:return"suspended";case na.NotSuspended:return"notSuspended";default:(0,_s().HB)(e)}}var ra=()=>s(738418),oa=()=>s(625383),la=()=>s(368332);function da(e){let{workspace:t}=e;const s=(0,f().tz)(),i=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"}})),[]);return(0,oe.jsxs)("div",{style:i.container,children:[t.name??(0,la().a)(s),t.isExternal?(0,oe.jsx)(ca,{}):null]})}function ca(){const e=(0,l().IS)((e=>({icon:{marginLeft:4,height:14,width:14,opacity:.5}})),[]);return(0,oe.jsx)(ye().A,{render:t=>(0,oe.jsx)("div",{...t,children:(0,ra().G)(e.icon)}),renderTooltip:()=>(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.userAccess.externalSpaceNameTooltipText",defaultMessage:"This is an external workspace that does not belong to this user."})})}function ua(e){let{workspaceSummaries:t}=e;const s=(0,f().tz)(),i=(0,l().IS)((e=>({noWorkspaces:{paddingInline:8,opacity:.5},workspaceName:{maxWidth:"80%"},plusMore:{opacity:.5,marginLeft:4},titleContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%",marginLeft:4}})),[]);if(t.length<=0)return(0,oe.jsx)(ve().A,{style:i.noWorkspaces,children:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.userAccess.noWorkspaces",defaultMessage:"No workspaces"})});const n=t.find((e=>e.name)),a=n?n.name:(0,la().a)(s),r=t.length-1;return(0,oe.jsxs)("div",{style:i.titleContainer,children:[(0,oe.jsx)(ve().A,{isInline:!0,style:i.workspaceName,children:a}),!n||n.isExternal?(0,oe.jsx)(ca,{}):null,r>0?(0,oe.jsxs)(ve().A,{isInline:!0,style:i.plusMore,children:[(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.userAccess.additionalCount",defaultMessage:"+{numRemainingWorkspaces}",values:{numRemainingWorkspaces:r}}),""]}):null]})}var ga=()=>s(30626),pa=()=>s(381349),ma=()=>s(722872),fa=()=>s(463830),ha=()=>s(575143),Sa=()=>s(406699),xa=()=>s(928600),ba=()=>s(939740),ya=()=>s(897119),va=()=>s(89924),ja=()=>s(962036);const Aa=(0,f().YK)({menuAriaLabel:{defaultMessage:"Open action menu for this user.",id:"identityAndProvisioning.managedUsers.table.menu.ariaLabel"}});function Ca(e){let{managedUser:t,managedUserActionSections:s}=e;const i=(0,o().uB)(void 0,fa().A),n=(0,f().tz)(),a=(0,l().IS)((()=>({container:{minWidth:265}})),[]);return(0,oe.jsx)(Sa().Ay,{popupType:ya().nl.Popup,style:a.container,buttonPopupStore:i,renderOrigin:e=>(0,oe.jsx)($n().A,{ariaLabel:n.formatMessage(Aa.menuAriaLabel),icon:ga()._,...e}),render:()=>(0,oe.jsx)(wa,{managedUser:t,popupStore:i,managedUserActionSections:s})})}function wa(e){let{managedUser:t,popupStore:s,managedUserActionSections:i}=e;const n=[],a=(0,l().IS)((()=>({destructiveIcon:{fill:pa().Ay.red,color:pa().Ay.red}})),[]);for(const[r,o]of i.entries()){const e=o.map(((e,s)=>({key:s,render:s=>{var i,n;return(0,oe.jsx)(ha().A,{...s,shouldWrapCaption:!0,svg:t=>e.icon(e.isDestructive?{...t,...a.destructiveIcon}:t),title:e.title,style:{paddingTop:8,paddingBottom:8,...e.isDestructive?a.destructiveIcon:{}},disabled:null===(i=e.getDisabledState)||void 0===i?void 0:i.call(e,t),disabledFeedback:null===(n=e.getDisabledState)||void 0===n?void 0:n.call(e,t)})},action:()=>e.onClick(t)}))),s={key:`section-${r}`,render:e=>(0,oe.jsx)(va().A,{topBorder:r>0,...e}),items:e};n.push(s)}return(0,oe.jsxs)(xa().A,{menuType:ma().gu.Popup,children:[(0,oe.jsx)(ba().Ay,{type:ba().Oh.Vertical,initialFocus:void 0,sections:n,onAccept:()=>{s.setState({open:!1})}}),(0,oe.jsx)(va().A,{topBorder:!0,children:(0,oe.jsx)(ja().A,{title:(0,oe.jsx)(f().sA,{defaultMessage:"Learn about user suspension",id:"managedUsersDashboard.userActionsMenu.helpButton"}),href:(0,Ye().xS)("guides.managedUsers"),analyticsFrom:"managed_users_dashboard_user_actions_menu"})})]})}var Ta=()=>s(236527),Ma=function(e){return e.ManagedUser="managed-user",e.Loading="loading",e}(Ma||{});const ka={marginLeft:4,height:14,width:14,opacity:.5},Ia=[{id:"user",headerTitle:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.user",defaultMessage:"Users"}),renderCell:e=>e.type===Ma.ManagedUser?(0,oe.jsx)(Ta()._,{userId:e.managedUser.userId}):(0,oe.jsx)(Ta().a,{}),widthData:{width:70},sortable:!1},{id:"access",headerTitle:(0,oe.jsx)("span",{style:{paddingInline:8},children:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.access",defaultMessage:"Workspaces"})}),renderCell:e=>e.type===Ma.ManagedUser?(0,oe.jsx)(ua,{workspaceSummaries:e.managedUser.workspaces}):(0,oe.jsx)(s(75491).Kb,{}),widthData:{width:60},sortable:!1},{id:"lastActive",headerTitle:(0,oe.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},children:[(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.lastActive",defaultMessage:"Last active"}),(0,oe.jsx)(ye().A,{render:e=>(0,oe.jsx)("div",{...e,children:(0,ra().G)(ka)}),renderTooltip:()=>(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.lastActive.tooltip",defaultMessage:"This may be delayed by several hours."})})]}),renderCell:e=>e.type===Ma.ManagedUser?(0,oe.jsx)(s(893468).F,{lastActiveAt:e.managedUser.lastActiveAt,containerStyle:{opacity:.5}}):(0,oe.jsx)(oa().h,{}),widthData:{width:60},sortable:!1},{id:"menu",headerTitle:null,renderCell:e=>e.type===Ma.ManagedUser?(0,oe.jsx)(Ca,{managedUser:e.managedUser,managedUserActionSections:e.managedUserActionSections}):null,widthData:{width:15},sortable:!1,hasClickableContents:!0}],Da=[{id:"1",isClickable:!1,type:Ma.Loading},{id:"2",isClickable:!1,type:Ma.Loading},{id:"3",isClickable:!1,type:Ma.Loading}];function Ra(e){let{managedUsers:t,loadMoreManagedUsers:s,onEditDetails:i,loading:n,managedUserActionSections:a}=e;const r=t.map((e=>({id:e.userId,type:Ma.ManagedUser,managedUser:e,isClickable:!0,managedUserActionSections:a}))),o=(0,l().IS)((e=>(0,xe().rC)({columnRenderInfo:Ia,theme:e,containerMarginTop:0})),[]);const d=n?[...r,...Da]:r;return(0,oe.jsx)(xe().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Ia,rows:d,onRowClick:function(e){e.type===Ma.ManagedUser&&i(e.managedUser)},renderNoRowsComponent:()=>(0,oe.jsx)(_a,{loading:n}),styles:o,loadMoreMethod:s?{type:"scroll",onLoadMore:s}:void 0})}function _a(e){const t=(0,l().IS)((()=>({text:{marginTop:15,marginBottom:40,textAlign:"center"}})),[]);return(0,oe.jsx)(ve().A,{isSmall:!0,style:t.text,children:!e.loading&&(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.empty",defaultMessage:"No users found."})})}var Pa=()=>s(771495),Ba=()=>s(869190),Ua=()=>s(402390),La=()=>s(920949),Oa=()=>s(907514),qa=()=>s(145214),Wa=()=>s(139125),Ea=()=>s(101919);function za(e){let{title:t,byline:s,isOn:i,onToggle:n,disabled:a,tooltipForDisabled:r}=e;function o(){a||n()}return(0,oe.jsx)(ye().A,{placement:Ae().W.Top,alignment:Ae().C.End,disableTooltip:!r||!a,renderTooltip:()=>r,render:e=>(0,oe.jsx)("div",{...e,children:(0,oe.jsx)(Fs,{title:t,byline:s,settingItem:(0,oe.jsx)(gs().A,{on:i,disabled:a,onClick:o})})})})}var Fa=()=>s(721249),Na=()=>s(555893),Ga=()=>s(187820);function Ka(e){const{userId:t,workspaces:s,spaceStore:n,removeWorkspaceFromUser:a}=e,r=(0,l().IS)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",gap:8,marginTop:12}})),[]);return(0,oe.jsx)("div",{style:r.container,children:s.map(((e,r)=>(0,oe.jsxs)(i.Fragment,{children:[(0,oe.jsx)(Va,{userId:t,spaceId:n.id,workspace:e,removeWorkspaceFromUser:a}),r<s.length-1?(0,oe.jsx)(pi().A,{size:8}):null]},e.id)))})}function Va(e){const{userId:t,spaceId:s,workspace:i,removeWorkspaceFromUser:n}=e,r=(0,f().tz)(),o=(0,a().v3)(),d=Ha(i),c=(0,l().IS)((()=>({container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",gap:12,overflow:"hidden"},workspaceContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%",gap:12,overflow:"hidden"},iconContainer:{alignSelf:"center"},textContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},name:{fontSize:14,fontWeight:500},nameUntitled:{fontSize:14,fontWeight:500,opacity:.25},byline:{lineHeight:1.3,fontSize:12,opacity:.5}})),[]);async function u(){Ps().PG(o,{external_space_id:i.id});const{accept:e}=await j().Gh({message:(0,oe.jsx)(ve().A,{style:j().xh.title,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.message",defaultMessage:"Remove user from workspace?"})}),description:(0,oe.jsx)(ve().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.description",defaultMessage:"This user will no longer have access to the workspace you are removing them from. This action is not reversible."})}),acceptLabel:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.acceptLabel",defaultMessage:"Remove"}),cancelLabel:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.cancelLabel",defaultMessage:"Go back"})});if(!e)return;const a=await q().callApi({eventName:"removeManagedUserFromSpace",environment:o,data:{userId:t,targetSpaceId:i.id,requestingSpaceId:s}});Ps().st(o,{external_space_id:i.id}),"success"===a.type?(n(t,i.id),ta().D6({label:(0,oe.jsx)(f().sA,{defaultMessage:"Successfully removed user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceConfirmation",values:{workspaceName:i.name}})})):ta().D6({label:(0,oe.jsx)(f().sA,{defaultMessage:"Failed to remove user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceFailure",values:{workspaceName:i.name}})})}const g=i.icon?{pointer:{table:bn().NX,id:i.id,spaceId:i.id},icon:i.icon}:void 0;return(0,oe.jsx)("div",{style:c.container,children:(0,oe.jsxs)("div",{style:c.workspaceContainer,children:[(0,oe.jsx)("div",{style:c.iconContainer,children:(0,oe.jsx)(Ga().B6,{disabled:!0,icon:g,iconRecordCategory:"workspace",isEmptyPage:!1,size:28,title:i.name,isLarge:!0,emojiSize:24,isRaw:!1})}),(0,oe.jsxs)("div",{style:c.textContainer,children:[(0,oe.jsx)(ve().A,{style:c.name,isMultiline:!0,children:(0,oe.jsx)(da,{workspace:i})}),(0,oe.jsx)(ve().A,{style:c.byline,children:(0,oe.jsx)($a,{workspace:i,intl:r})})]}),(0,oe.jsx)("div",{children:(0,oe.jsx)(ye().A,{render:e=>(0,oe.jsx)(Vt().p,{isRed:!0,onClick:u,disabled:d,disabledFeedback:d,...e,children:(0,oe.jsx)(f().sA,{defaultMessage:"Remove",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspace"})}),renderTooltip:()=>(0,oe.jsx)(f().sA,{defaultMessage:"You cannot remove this user from the workspace because they are the only user in the workspace. To remove this user, delete the workspace instead.",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspace.disableTooltip"}),disableTooltip:!d,placement:Ae().W.Bottom})})]})})}function Ha(e){const t=e.membersCount;return"number"==typeof t?1===t:1===t.length&&1===t[0]}function $a(e){const{workspace:t,intl:s}=e;return Ha(t)?(0,oe.jsx)(f().sA,{defaultMessage:"{plan}  1 member",id:"identityAndProvisioning.managedUsers.table.userAccess.oneMemberWorkspace",values:{plan:(0,m().u2)({product:t.plan,intl:s})}}):Array.isArray(t.membersCount)?1===t.membersCount.length?(0,oe.jsx)(f().sA,{defaultMessage:"{plan}  {lowerEnd}+ members",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembersLowerEndRange",values:{plan:(0,m().u2)({product:t.plan,intl:s}),lowerEnd:t.membersCount[0]}}):(0,oe.jsx)(f().sA,{defaultMessage:"{plan}  {lowerEnd} - {higherEnd} members",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembersRange",values:{plan:(0,m().u2)({product:t.plan,intl:s}),lowerEnd:t.membersCount[0],higherEnd:t.membersCount[1]}}):(0,oe.jsx)(f().sA,{defaultMessage:"{plan}  {numMembers} {numMembers, plural, one {member} other {members}}",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembers",values:{plan:(0,m().u2)({product:t.plan,intl:s}),numMembers:t.membersCount}})}const Ya=(0,f().YK)({namePlaceholder:{defaultMessage:"Display name",id:"identityAndProvisioning.managedUsers.table.userAccess.namePlaceholder"},emailPlaceholder:{defaultMessage:"Email",id:"identityAndProvisioning.managedUsers.table.userAccess.emailPlaceholder"}});function Ja(e){let{spaceStore:t,managedUser:s,onClose:i,removeWorkspaceFromUser:n}=e;const a=Boolean(s),{isAccessGranted:r,toggleDataAccessConsent:o,loading:l}=(0,Na().e)({userId:null==s?void 0:s.userId,spaceId:t.id});return(0,oe.jsx)(hi().a,{open:a,onDismiss:i,preventHideChildrenWhileOpening:!0,render:()=>s?(0,oe.jsx)(Qa,{managedUser:s,isAccessGranted:r,toggleDataAccessConsent:o,loadingSupportAccess:l,renderWorkspacesOverview:()=>(0,oe.jsx)(Ka,{spaceStore:t,userId:s.userId,workspaces:s.workspaces,removeWorkspaceFromUser:n})}):null})}function Qa(e){let{managedUser:t,renderWorkspacesOverview:s,isAccessGranted:i,toggleDataAccessConsent:n,loadingSupportAccess:r}=e;const d=(0,f().tz)(),c=(0,a().v3)(),u=(0,o().K8)((()=>new(ae().LU)(c,{id:t.userId,table:O().oo})),[t,c]),{hasStagedChanges:g,resetState:p,saveChanges:m,loading:h,profilePhoto:S,name:x,email:b}=(0,Fa().u)({userStore:u}),y=(0,o().K8)((()=>u.getIsSuspended()?{type:"suspended"}:(0,Wa().qh)({profilePhoto:S.value,name:x.value,email:b.value})),[u,S.value,x.value,b.value]),v=function(e){const{loadingSupportAccess:t}=e;return(0,l().IS)((e=>({container:{position:"relative",display:"flex",flexDirection:"column",background:e.popoverBackground,width:420,maxHeight:520,overflow:"hidden",borderRadius:8},innerContainer:{position:"relative",display:"flex",flexDirection:"column",width:"100%",height:"100%",overflowY:"auto",padding:"36px 24px",gap:16},label:{color:e.text.secondary},horizontalLabel:{color:e.text.secondary,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",gap:4},value:{color:e.text.primary},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:e.modalBackground},avatarContainer:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},iconStyle:{border:`1px solid ${e.tableDividerColor}`,color:e.text.tertiary,fontWeight:500},inputContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%",gap:8},inputRow:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},icon:{color:e.icon.tertiary,fill:"currentColor",width:14,height:14},supportAccessRow:{position:"relative",width:"100%",opacity:t?.5:1},infoContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},infoRow:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},footer:{position:"absolute",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",paddingInline:4,boxShadow:e.shadow2XS,background:e.popoverBackground,left:0,right:0,bottom:0,height:48},button:{height:30,marginInline:4}})),[t])}({loadingSupportAccess:r}),j=(0,Ua().H)(d),A=!(0,o().O$)(pt().e),C=t.mfaMethods.filter((e=>"backup_code"!==e)),w=d.formatList(C.map((e=>(0,La().YX)(e))),{type:"conjunction"});return(0,oe.jsxs)("div",{style:v.container,children:[(0,oe.jsxs)("div",{style:v.innerContainer,children:[(0,oe.jsx)("div",{style:v.avatarContainer,children:(0,oe.jsx)(Wa().Ay,{size:56,avatarType:y,isOffline:A,loading:S.loading,onUploadProfilePhoto:S.set,onRemoveProfilePhoto:S.remove})}),(0,oe.jsxs)("div",{style:v.inputContainer,children:[(0,oe.jsxs)("div",{style:v.inputRow,children:[(0,oe.jsx)(Ea().A,{children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.nameLabel",defaultMessage:"Name"})}),(0,oe.jsx)($s().A,{style:v.input,disabled:h,value:x.value,placeholder:d.formatMessage(Ya.namePlaceholder),onChange:e=>{x.set(e.target.value)}})]}),(0,oe.jsxs)("div",{style:v.inputRow,children:[(0,oe.jsx)(Ea().A,{children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.emailLabel",defaultMessage:"Email"})}),(0,oe.jsx)($s().A,{style:v.input,disabled:h,value:b.value,placeholder:d.formatMessage(Ya.emailPlaceholder),onChange:e=>{b.set(e.target.value)}})]})]}),(0,oe.jsxs)("div",{style:v.infoContainer,children:[(0,oe.jsxs)("div",{style:v.infoRow,children:[(0,oe.jsx)(ve().A,{style:v.label,isSmall:!0,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.accountCreatedLabel",defaultMessage:"Account created"})}),t.accountCreatedAt?(0,oe.jsx)(ve().A,{isSmall:!0,style:v.value,children:(0,Ba().W_)(t.accountCreatedAt,"medium",j)}):(0,oe.jsx)(ve().A,{isSecondaryColor:!0,isSmall:!0,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.emptyAccountCreated",defaultMessage:"Incomplete"})})]}),(0,oe.jsx)(pi().A,{size:16}),(0,oe.jsxs)("div",{style:v.infoRow,children:[(0,oe.jsx)(ve().A,{style:v.label,isSmall:!0,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.lastActiveLabel",defaultMessage:"Last active"})}),t.lastActiveAt?(0,oe.jsx)(ve().A,{isSmall:!0,style:v.value,children:(0,Oa().DG)(t.lastActiveAt)}):(0,oe.jsx)(ve().A,{isSecondaryColor:!0,isSmall:!0,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.emptyLastActive",defaultMessage:"No activity"})})]}),(0,oe.jsx)(pi().A,{size:16}),(0,oe.jsxs)("div",{style:v.infoRow,children:[(0,oe.jsx)(ve().A,{style:v.label,isSmall:!0,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.mfaLabel",defaultMessage:"2-step verification method"})}),C.length>0?(0,oe.jsx)(ve().A,{isSmall:!0,style:v.value,children:w}):(0,oe.jsx)(ve().A,{isSecondaryColor:!0,isSmall:!0,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.emptyMfa",defaultMessage:"Not configured"})})]}),(0,oe.jsx)(pi().A,{size:16}),(0,oe.jsx)("div",{style:v.supportAccessRow,children:(0,oe.jsx)(za,{title:(0,oe.jsxs)(ve().A,{style:v.horizontalLabel,isSmall:!0,children:[(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.supportAccessToggleMessage",defaultMessage:"Support access"}),(0,oe.jsx)(ye().A,{placement:Ae().W.Bottom,render:e=>(0,oe.jsx)("div",{...e,children:(0,Hn().$)(v.icon)}),renderTooltip:()=>(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.supportAccessToggleMessage.tooltip",defaultMessage:"Grant Notion support temporary access to this account so we can troubleshoot problems or recover content on its behalf"})})]}),byline:null,isOn:i,onToggle:n,disabled:r})})]}),(0,oe.jsx)("div",{children:t.workspaces.length>0?(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Ea().A,{children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.workspacesLabel",defaultMessage:"Workspaces"})}),s()]}):null})]}),(0,oe.jsxs)(qa().A,{visible:g||h,initial:{translateY:48,opacity:0},animate:{opacity:1,translateY:0},exit:{translateY:48,opacity:0},style:v.footer,children:[(0,oe.jsx)(Bt().A,{size:"lg",color:"uiRed",disabled:h,style:v.button,onClick:p,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.cancelButton",defaultMessage:"Cancel"})}),(0,oe.jsx)(Es().A,{disabled:h,style:v.button,onClick:()=>m(),children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.details.saveButton",defaultMessage:"Save changes"})})]})]})}var Za=()=>s(296746);const Xa=(0,f().YK)({placeholder:{id:"identityProvisioningSettings.managedUsers.searchInput.placeholder",defaultMessage:"Search name, email, or user ID"}});function er(e){let{spaceStore:t,samlConfigStore:s}=e;const{navigateTo:n}=(0,i.useContext)(Kn),r=(0,a().v3)(),d=(0,f().tz)(),c=(0,l().IS)((e=>({link:{fontSize:14,fontWeight:400,color:e.text.secondary,textDecoration:"none"},title:{marginTop:21,fontWeight:S().Wy.semibold,fontSize:17,display:"flex",justifyContent:"flex-start",alignItems:"center"},byline:{fontSize:14,fontWeight:S().Wy.regular,color:e.text.secondary,paddingBottom:20},count:{marginLeft:4,opacity:.5,fontWeight:400},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"},filters:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",margin:"0 auto 12px"}})),[]),u=(0,o().K8)((()=>s.state.spaces),[s]),{managedUsers:g,filters:p,loadNextPage:m,setFilters:h,removeWorkspaceFromUser:x,loading:b,selectedTab:y,setSelectedTab:v,onOpenDetailsModal:A,onCloseDetailsModal:w,selectedUser:T,managedUserActionSections:M}=function(e){let{spaceStore:t,samlConfigStore:s}=e;const n=(0,a().v3)(),r=(0,f().tz)(),[l,d]=(0,i.useState)(),[c,u]=(0,i.useState)(na.NotSuspended),g=(0,o().K8)((()=>n.currentUser.id),[n]),p=(0,i.useCallback)(((e,t)=>{Ps().Si(n,{user_status:aa(c),from:t}),d(e.userId)}),[n,c]),m=ia({userStatus:"notSuspended",spaceStore:t,samlConfigStore:s}),h=ia({userStatus:"suspended",spaceStore:t,samlConfigStore:s});let S;S=c===na.NotSuspended?m:h;const x=(0,i.useCallback)((async e=>{Ps().th(n);const{accept:s}=await j().Gh({message:(0,oe.jsx)(ve().A,{style:j().xh.title,children:(0,oe.jsx)(f().sA,{defaultMessage:"Suspend this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.title"})}),acceptLabel:(0,oe.jsx)(f().sA,{defaultMessage:"Yes",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.acceptLabel"}),description:(0,oe.jsx)(ve().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,oe.jsx)(f().sA,{defaultMessage:"This user will not be able to log into Notion and their Notion integrations will stop working. They can be unsuspended at any time from the Managed Users dashboard.",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.description"})})});if(!s)return;const i=await q().callApi({eventName:"updateUserSuspension",environment:n,data:{userId:e.userId,spaceId:t.id,suspend:!0}});Ps().Az(n,{suspended_user_id:e.userId}),"failed"===i.type&&j().f1((0,W().Hu)(E().A.getIntl(),i)),h.addUserToManagedUsers(e),m.removeUserFromManagedUsers(e.userId)}),[n,t.id,h,m]),b=(0,i.useCallback)((async e=>{Ps().fv(n);const{accept:s}=await j().Gh({message:(0,oe.jsx)(ve().A,{style:j().xh.title,children:(0,oe.jsx)(f().sA,{defaultMessage:"Log out this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.title"})}),acceptLabel:(0,oe.jsx)(f().sA,{defaultMessage:"Log out user",id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.acceptLabel"}),description:(0,oe.jsx)(ve().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.description",defaultMessage:"You are about to log out this user from their current session. They will need to re-authenticate to log back into Notion."})})});if(!s)return;const i=await q().callApi({eventName:"logoutManagedUsers",environment:n,data:{spaceId:t.id,target:{type:ea().u.User,userId:e.userId}}});if(Ps().uL(n),"failed"===i.type)return j().f1((0,W().Hu)(E().A.getIntl(),i)),void ta().D6({label:(0,oe.jsx)(f().sA,{id:"managedUsers.toastMessage.logout.failed",defaultMessage:"Failed to logged out user"})});ta().D6({label:(0,oe.jsx)(f().sA,{id:"managedUsers.toastMessage.logout.success",defaultMessage:"Successfully logged out user"})})}),[n,t.id]),y=(0,i.useCallback)((async e=>{Ps().HD(n);const{accept:s}=await j().Gh({message:(0,oe.jsx)(ve().A,{style:j().xh.title,children:(0,oe.jsx)(f().sA,{defaultMessage:"Reset password for this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.title"})}),acceptLabel:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.acceptLabel",defaultMessage:"Reset passwords for user"}),description:(0,oe.jsx)(ve().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.description",defaultMessage:"You are about to reset the password for this user. This will also remove any 2-step verification settings they might have and they will be logged out of of their current session.{br}{br}This user will need to re-authenticate via their email the next time they attempt to log back into Notion, and they will be prompted to set a new password upon logging in.",values:{br:(0,oe.jsx)("br",{})}})})});if(!s)return;const i=await q().callApi({eventName:"resetPasswordsForManagedUsers",environment:n,data:{spaceId:t.id,target:{type:ea().u.User,userId:e.userId}}});if(Ps().CF(n),"failed"===i.type)return j().f1((0,W().Hu)(r,i)),void ta().D6({label:(0,oe.jsx)(f().sA,{id:"managedUsers.toastMessage.forcePasswordReset.fail",defaultMessage:"Failed to reset password for user"})});ta().D6({label:(0,oe.jsx)(f().sA,{id:"managedUsers.toastMessage.forcePasswordReset.success",defaultMessage:"Successfully reset password for user"})})}),[n,r,t.id]),v=(0,i.useCallback)((async e=>{const s=await q().callApi({eventName:"updateUserSuspension",environment:n,data:{userId:e.userId,spaceId:t.id,suspend:!1}});Ps().P4(n),"failed"===s.type&&j().c1(s.error.message),h.removeUserFromManagedUsers(e.userId),m.addUserToManagedUsers(e)}),[n,t.id,h,m]),A=(0,i.useCallback)((async e=>{Ps().KB(n,{user_status:aa(c)});const{accept:s}=await j().Gh({message:(0,oe.jsx)(ve().A,{style:j().xh.title,children:(0,oe.jsx)(f().sA,{defaultMessage:"Delete this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.title"})}),acceptLabel:(0,oe.jsx)(f().sA,{defaultMessage:"Yes",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.acceptLabel"}),description:(0,oe.jsx)(ve().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,oe.jsx)(f().sA,{defaultMessage:"This action cannot be undone. This will permanently delete the user's entire account. All private workspaces will be deleted, and they will be removed from all shared workspaces.",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.description"})})});if(!s)return;const i=await q().callApi({eventName:"deleteManagedUser",environment:n,data:{userId:e.userId,spaceId:t.id}});Ps().$W(n,{user_status:aa(c)}),"success"===i.type?(h.removeUserFromManagedUsers(e.userId),m.removeUserFromManagedUsers(e.userId)):j().f1((0,W().Hu)(E().A.getIntl(),i))}),[n,c,t.id,h,m]),C=(0,i.useMemo)((()=>S.managedUsers.find((e=>{let{userId:t}=e;return t===l}))),[l,S.managedUsers]),w=(0,i.useMemo)((()=>{let e;const t={onClick:e=>p(e,"dropdown_menu"),icon:Qn().r,title:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.userDetails",defaultMessage:"Edit details"})},s={onClick:e=>A(e),icon:Vs().I,title:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser",defaultMessage:"Delete user"}),isDestructive:!0};switch(c){case na.NotSuspended:e=[[t,{onClick:b,icon:Jn().k,title:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.logout",defaultMessage:"Log out"})},{onClick:y,icon:Zn().r,title:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.passwordReset",defaultMessage:"Reset password"})}],[{onClick:x,icon:Yn()._,title:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser",defaultMessage:"Suspend user"}),getDisabledState:e=>e.userId===g},s]];break;case na.Suspended:e=[[t],[{onClick:e=>v(e),icon:Xn,title:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.table.menu.action.unSuspendUser",defaultMessage:"Reactivate user"})},s]];break;default:(0,_s().HB)(c)}return e.filter((e=>e.length>0))}),[p,g,c,A,x,v,b,y]);return{...S,selectedTab:c,setSelectedTab:u,selectedUser:C,managedUserActionSections:w,onOpenDetailsModal:p,onCloseDetailsModal:function(){d(void 0)}}}({spaceStore:t,samlConfigStore:s}),k=(0,i.useCallback)((e=>A(e,"row_click")),[A]);return(0,oe.jsxs)(Gt().Ay,{children:[(0,oe.jsx)(yi().A,{style:c.link,onClick:()=>n(Nn.SettingsPage),children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.breadcrumb",defaultMessage:" Identity & Provisioning"})}),(0,oe.jsxs)(me().A,{large:!0,style:c.title,children:[(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.title",defaultMessage:"User management"}),(0,oe.jsx)($n().A,{icon:Hn().$,ariaLabel:d.formatMessage({defaultMessage:"Managed users settings help button",id:"identityProvisioningSettings.managedUsers.helpButton.label"}),onClick:()=>C().f({environment:r,url:(0,Ye().xS)("guides.managedUsers")})})]}),(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:c.byline,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.byline",defaultMessage:"Manage and view users that are using your verified domains"})}),(0,oe.jsx)(ji().Ay,{tabs:[(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.table.notSuspendedTab.title",defaultMessage:"Active"},"notSuspended.title"),(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.table.suspendedTab.title",defaultMessage:"Suspended"},"suspended")],selectedIndex:y,onChange:e=>v(e),style:c.tabBarMenu}),(0,oe.jsx)(an().nv,{mode:an().Ke.Button,query:p.query,setQueryFilter:e=>{h({query:e})},placeholderText:E().A.formatMessage(Xa.placeholder)}),(0,oe.jsxs)("div",{style:c.filters,children:[(0,oe.jsx)(Za().f,{selectedSpaceId:p.workspaceId,setSelectedSpaceId:e=>{h({workspaceId:e})},spaceData:u}),(0,oe.jsx)(Pa().M,{selectedMfaMethod:p.multiFactorStatus,setSelectedMfaMethod:e=>{h({multiFactorStatus:e})}})]}),(0,oe.jsx)(Ra,{managedUsers:g,loading:b,loadMoreManagedUsers:m,onEditDetails:k,managedUserActionSections:M},y),(0,oe.jsx)(Ja,{spaceStore:t,managedUser:T,onClose:w,removeWorkspaceFromUser:x})]})}var tr=()=>s(177167),sr=()=>s(179030),ir=()=>s(926110),nr=()=>s(511303);var ar=()=>s(689216);function rr(e){var t;let{spaceStore:s,samlConfigStore:n,domainSettingsStore:r}=e;const l=(0,a().v3)(),d=(0,o().K8)((()=>n.state.emailDomains),[n]),c=(0,o().K8)((()=>"disabled"!==n.state.status&&"unconfigured"!==n.state.status),[n]),u=(0,Wt().P9)({name:"domain_settings",spaceId:s.id,userId:null===(t=l.currentUser)||void 0===t?void 0:t.id})??!1,g=function(e){var t;let{environment:s,samlConfigStore:i,spaceStore:n}=e;const a=(0,Wt().P9)({name:"saml",spaceId:n.id,userId:null===(t=s.currentUser)||void 0===t?void 0:t.id});return(0,o().K8)((()=>i.state.emailDomains.length>0||a),[i,a])}({environment:l,samlConfigStore:n,spaceStore:s})??!1,p=(0,o().K8)((()=>g&&(!n.state.id||n.state.id===s.id)),[g,n,s]),m=(0,o().K8)((()=>r.state.emailDomains.length>0&&u),[r,u]),f=(0,o().K8)((()=>d.length>0),[d]),h=(0,i.useCallback)((async()=>{if(n.state.emailDomains.length>0)return(0,ar().n)({onRequest:()=>q().callApi({eventName:"updateWorkspaceCreationForEmailDomains",environment:l,data:{emailDomains:n.state.emailDomains,workspaceCreationEnum:r.state.spaceCreation,spaceId:s.id}}),onSuccess:()=>{r.setState({...r.state,emailDomains:n.state.emailDomains})}})}),[l,s,r,n]),S=(0,i.useCallback)((async()=>{if(n.state.emailDomains.length>0)return(0,ar().n)({onRequest:()=>q().callApi({eventName:"updateEmailDomainSettings",environment:l,data:{emailDomains:n.state.emailDomains,spaceId:s.id,preventProfileEdits:r.state.settings.prevent_profile_edits,preventMembersJoiningExternalWorkspace:r.state.settings.prevent_members_joining_external_workspace,customSessionDuration:(0,la().k)(r.state.settings.custom_session_duration),preventGrantingSupportAccess:r.state.settings.prevent_granting_support_access,disableNotionMail:r.state.settings.disable_notion_mail}}),onSuccess:()=>{r.setState({...r.state,emailDomains:n.state.emailDomains})}})}),[l,s,r,n]);return{verifiedDomains:d,isSamlStatusEnabled:c,isSamlAvailable:g,isSamlEditable:p,isDomainSettingsAvailable:m,isClaimSpacesAvailable:g&&u,canSaveWorkspaceCreationSetting:f,saveWorkspaceCreationSetting:h,saveEmailDomainSettings:S}}function or(e){let{title:t,byline:s,targetTier:n}=e;const r=(0,a().v3)(),o=(0,i.useCallback)((()=>Ot().K(r,{from:"space_saml",upsell:{type:"product",product:n,limit:{type:"none"},trialability:"none"}})),[r,n]);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsxs)(me().A,{smallMarginBottom:!0,style:{fontWeight:S().Wy.regular,display:"flex",alignItems:"center"},children:[(0,oe.jsx)("span",{style:{marginRight:8},children:t}),(0,oe.jsx)(bs().A,{subscriptionTier:n,analyticsName:"space_saml",onClick:o})]}),(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,children:s})]})}const lr={browseWorkspaces:(0,oe.jsx)(f().sA,{defaultMessage:"Browse workspaces",id:"identityAndProvisioning.claimWorkspaces.button"}),noWorkspaces:(0,oe.jsx)(f().sA,{defaultMessage:"No workspaces",id:"identityAndProvisioning.claimWorkspaces.buttonEmpty"}),loadingError:(0,oe.jsx)(f().sA,{defaultMessage:"Error loading workspaces.",id:"identityAndProvisioning.claimWorkspaces.errorByline"})};function dr(e){let{promptUpgrade:t}=e;const{navigateTo:s,loadingSpaces:n,hasBrowsableSpaces:a,errorClaimableSpaces:r}=(0,i.useContext)(Kn),o=Boolean(r),d=!a||n,c=!a&&!n,u=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.title",defaultMessage:"Claim workspaces"}),g=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.message",defaultMessage:"Claim workspaces created by users with a verified domain or require owners to use an external domain."}),p=(0,l().IS)((e=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:d?.5:1,minWidth:160},settingErrorByline:{color:e.errorText,marginTop:8,fontSize:13}})),[d]);if(t)return(0,oe.jsx)(or,{title:u,byline:g,targetTier:"enterprise"});let m;return m=n?(0,oe.jsx)(mi().A,{}):a?lr.browseWorkspaces:lr.noWorkspaces,(0,oe.jsx)("div",{style:p.settingContainer,children:(0,oe.jsx)(Fs,{title:u,byline:g,settingItem:(0,oe.jsxs)("div",{style:p.buttonAndErrorContainer,children:[(0,oe.jsx)(ye().A,{placement:Ae().W.Top,alignment:Ae().C.End,render:e=>(0,oe.jsx)(Bt().A,{disabled:d,size:"lg",style:p.button,onClick:()=>s(Nn.WorkspacesPage),...e,children:m}),disableTooltip:!c,renderTooltip:()=>(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.tooltip",defaultMessage:"There are no available workspaces to claim"})}),o?(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:p.settingErrorByline,children:lr.loadingError}):null]})})})}var cr=()=>s(689094),ur=()=>s(543649),gr=()=>s(375243);function pr(e){let{spaceStore:t,samlConfigStore:s,promptUpgrade:n,disabled:r,saveWorkspaceCreationSetting:d,renderOverrideAddDomainButton:c}=e;const u=(0,a().v3)(),g=(0,o().uB)(void 0,ur().A),p=(0,l().IS)((()=>({flex:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",margin:"18px 0px"},button:{position:"relative",marginLeft:"auto",marginRight:0,opacity:r?.5:1},plusIcon:{width:14,height:14,fill:"inherit",marginRight:"6px"}})),[r]),m=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.emailDomainsSection.title",defaultMessage:"Verified domains"}),h=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.emailDomainsSection.byline",defaultMessage:"Verify ownership of an email domain to access advanced security features including single sign-on."}),x=[...(0,o().K8)((()=>s.state.emailDomains.map(gr().vv)),[s]),...(0,o().K8)((()=>s.state.domainVerifications.filter((e=>!s.state.emailDomains.includes(e.domain))).sort(((e,t)=>e.createdAt-t.createdAt)).map(gr().W0)),[s])],b=(0,i.useCallback)((async()=>{await Fn({environment:u,spaceId:t.id,store:s})}),[u,t,s]),{resetInitialClaimableSpaces:y}=(0,i.useContext)(Kn),v=(0,i.useCallback)((async e=>{switch(e.type){case"verified":return(0,ar().n)({onRequest:()=>q().callApi({eventName:"setSamlConfig",environment:u,data:{spaceId:t.id,removedEmailDomains:[e.domain]}}),onSuccess:async()=>{await b(),y()}});case"unverified":case"invalid":return(0,ar().n)({onRequest:()=>q().callApi({eventName:"deleteDomainVerificationCode",environment:u,data:{id:e.id}}),onSuccess:()=>b()})}}),[u,t,b,y]),j=(0,i.useCallback)((()=>(0,ar().n)({onRequest:()=>q().callApi({eventName:"setSamlConfig",environment:u,data:{spaceId:t.id}}),onSuccess:()=>b()})),[u,b,t]),A=(0,i.useCallback)((async()=>{await b(),await d()}),[d,b]);return n?(0,oe.jsx)(or,{title:m,byline:h,targetTier:"business"}):(0,oe.jsx)(gr().Ay,{disabled:r,domains:x,onRemoveDomain:v,domainVerificationStore:g,verificationType:"saml_config",verificationTargetId:t.id,refreshDomains:A,onClickAddDomain:j,renderOverrideAddDomainButton:e=>c?c():(0,oe.jsxs)("div",{style:p.flex,children:[(0,oe.jsxs)("div",{children:[(0,oe.jsx)(me().A,{smallMarginBottom:!0,style:{fontWeight:S().Wy.medium},children:m}),(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:{marginBottom:4},children:h})]}),(0,oe.jsx)("div",{children:(0,oe.jsx)(Vt().p,{isBlue:!0,style:p.button,iconLeading:e=>(0,cr().W)({...e,...p.plusIcon}),disabled:r,onClick:e,children:(0,oe.jsx)(f().sA,{defaultMessage:"Add domain",id:"securitySAMLSettings.emailDomainsSection.addDomain"})})})]})})}function mr(e){let{domainSettingsStore:t,samlConfigStore:s,disabled:n,promptUpgrade:r,verifiedDomains:d,tooltip:c,saveWorkspaceCreationSetting:u}=e;const g=(0,a().v3)(),p=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"}})),[]),m=(0,o().K8)((()=>{const e=s.state.id;if(!e)return;return new(ae().SL)(g,{table:bn().NX,id:e}).getName()}),[g,s]),h=(0,i.useCallback)((async e=>{t.setState({...t.state,spaceCreation:e}),await u(),Bn().XL(g,{workspace_creation:e})}),[t,u,g]),S=(0,o().K8)((()=>d.length>0?t.state.spaceCreation:"admins_only"),[t,d]),x=(0,oe.jsx)(f().sA,{id:"domainSettings.workspaceCreation.title",defaultMessage:"Workspace creation"}),b=(0,oe.jsx)(f().sA,{id:"domainSettings.workspaceCreation.byline",defaultMessage:"Customize who can create new workspaces."}),y=(0,oe.jsx)(f().sA,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.titleWithSpaceName",defaultMessage:"{primaryWorkspaceName} workspace owners",values:{primaryWorkspaceName:m}}),v=(0,oe.jsx)(f().sA,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.title",defaultMessage:"Only workspace owners"});return r?(0,oe.jsx)("div",{style:p.settingContainer,children:(0,oe.jsx)(or,{title:x,byline:b,targetTier:"enterprise"})}):(0,oe.jsx)(ye().A,{placement:Ae().W.Top,alignment:Ae().C.End,render:e=>(0,oe.jsx)("div",{...e,style:p.settingContainer,children:(0,oe.jsx)(Xs().A,{isMobile:g.device.isMobile,disabled:n,title:x,caption:b,type:"dropdown",currentOption:S,options:[{key:"unrestricted",label:(0,oe.jsx)(f().sA,{id:"domainSettings.workspaceCreation.unrestricted.title",defaultMessage:"Anyone"}),caption:(0,oe.jsx)(f().sA,{id:"domainSettings.workspaceCreation.unrestricted.caption",defaultMessage:"Any user can create new workspaces."})},{key:"admins_only",label:m?y:v,caption:(0,oe.jsx)(f().sA,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.captionWithSpaceName",defaultMessage:"Only workspace owners of this workspace can create new workspaces."})}],onSelectOption:h})}),disableTooltip:!c,renderTooltip:()=>c})}function fr(e){let{spaceStore:t,samlConfigStore:s,domainSettingsStore:i,isCurrentSpaceEnterprise:n}=e;const{verifiedDomains:a,isSamlAvailable:r,saveWorkspaceCreationSetting:o,isSamlEditable:l,isDomainSettingsAvailable:d,canSaveWorkspaceCreationSetting:c,isClaimSpacesAvailable:u}=rr({spaceStore:t,samlConfigStore:s,domainSettingsStore:i}),g=d&&l;return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(pr,{disabled:!l,promptUpgrade:!r,spaceStore:t,samlConfigStore:s,saveWorkspaceCreationSetting:o}),(0,oe.jsx)(mr,{disabled:!g||!c,promptUpgrade:!n,verifiedDomains:a,samlConfigStore:s,domainSettingsStore:i,tooltip:0===a.length?(0,oe.jsx)(f().sA,{id:"domainSettings.workspaceCreation.disabledTooltip",defaultMessage:"There must be at least one verified domain to configure the workspace creation setting."}):void 0,saveWorkspaceCreationSetting:o}),(0,oe.jsx)(dr,{promptUpgrade:!u})]})}var hr=()=>s(326399);function Sr(e){let{domainSettingsStore:t,saveEmailDomainSettings:s,promptUpgrade:n,disabled:r}=e;const d=(0,a().v3)(),c=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"}})),[]),u=(0,i.useMemo)((()=>Object.entries(hr().iI).map((e=>{let[t,s]=e;return{key:t,label:(0,oe.jsx)(ve().A,{children:(0,Oa().OH)(0,s)})}}))),[]),g=(0,o().K8)((()=>(0,la().k)(t.state.settings.custom_session_duration)??hr().DP),[t]),p=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.customSessionDuration.title",defaultMessage:"Session duration"}),m=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.customSessionDuration.message",defaultMessage:"Control how long your managed users can be logged in for before they must re-authenticate."});return n?(0,oe.jsx)("div",{style:c.settingContainer,children:(0,oe.jsx)(or,{title:p,byline:m,targetTier:"enterprise"})}):(0,oe.jsx)("div",{style:c.settingContainer,children:(0,oe.jsx)(Xs().A,{isMobile:d.device.isMobile,disabled:r,title:p,caption:m,type:"dropdown",currentOption:g,options:u,onSelectOption:async function(e){const i=t.state.settings.custom_session_duration??hr().iI[hr().DP],n=hr().iI[e];if(void 0===n)return;Ps().m4(d,{custom_session_duration_ms:i});const{accept:a}=await j().Gh({message:(0,oe.jsx)(ve().A,{style:j().xh.title,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.message",defaultMessage:"Confirm change"})}),description:(0,oe.jsxs)(ve().A,{isMultiline:!0,isSecondaryColor:!0,children:[(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.description",defaultMessage:"You are about to change the session duration for all of your managed users from <b>{oldDuration}</b> to <b>{newDuration}.</b>",values:{oldDuration:(0,Oa().OH)(0,i),newDuration:(0,Oa().OH)(0,n),b:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,oe.jsx)("b",{children:t})}}}),(0,oe.jsx)("br",{}),(0,oe.jsx)("br",{}),(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.secondDescription",defaultMessage:"This may log some users out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})]}),acceptLabel:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.acceptLabel",defaultMessage:"Confirm change"}),cancelLabel:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.cancelLabel",defaultMessage:"Cancel"})});a&&(t.setState({...t.state,settings:{...t.state.settings,custom_session_duration:n}}),Ps().JN(d,{new_session_duration_ms:n}),await s())}})})}function xr(e){let{domainSettingsStore:t,saveEmailDomainSettings:s,promptUpgrade:n,hasVerifiedDomains:r,disabled:d}=e;const c=(0,a().v3)(),u=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),g=(0,o().K8)((()=>Boolean(!t.state.settings.disable_notion_mail)),[t]),p=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.enableNotionMail.title",defaultMessage:"Notion Mail"}),m=(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.enableNotionMail.message",defaultMessage:"Enable Notion Mail for all members under your company domains."}),(0,oe.jsx)("br",{}),(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.enableNotionMail.terms",defaultMessage:"By using Notion Mail, you agree to the Notion Mail and Notion AI Supplementary Terms."})]}),h=(0,i.useCallback)((async()=>{const e=Boolean(!t.state.settings.disable_notion_mail);t.setState({...t.state,settings:{...t.state.settings,disable_notion_mail:e}}),Ps().R_(c,{new_value:e}),await s()}),[c,t,s]);return n?(0,oe.jsx)("div",{style:u.settingContainer,children:(0,oe.jsx)(or,{title:p,byline:m,targetTier:"enterprise"})}):(0,oe.jsx)("div",{style:u.settingContainer,children:(0,oe.jsx)(za,{title:(0,oe.jsx)("div",{style:u.settingsTitle,children:p}),byline:m,isOn:g,onToggle:h,disabled:d||!r})})}function br(e){let{spaceId:t,domainSettingsStore:s,promptUpgrade:i,verifiedDomains:n,disabled:r}=e;const o=n.length>0,d=(0,a().v3)(),c=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:!r&&o?1:.5}})),[r,o]),u=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.forcePasswordReset.title",defaultMessage:"Reset passwords for all users"}),g=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.forcePasswordReset.message",defaultMessage:"Force reset the passwords for all managed users and require them to create a new one the next time they log in."});async function p(){Ps().m6(d,{email_domains:n});const{accept:e}=await j().Gh({message:(0,oe.jsx)(ve().A,{style:j().xh.title,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.message",defaultMessage:"Reset passwords for your managed users?"})}),description:(0,oe.jsx)(ve().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.description",defaultMessage:"You are about to reset the passwords for of your managed users, including you. This will also remove any 2-step verification settings they might have and they will be logged out of of their current session.{br}{br}The affected users will need to re-authenticate via their email the next time they attempt to log back into Notion, and they will be prompted to set a new password upon logging in.",values:{br:(0,oe.jsx)("br",{})}})}),acceptLabel:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.acceptLabel",defaultMessage:"Reset passwords for all managed users"}),cancelLabel:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.cancelLabel",defaultMessage:"Cancel"})});if(!e)return;const i=s.state.emailDomains;await q().callApi({eventName:"resetPasswordsForManagedUsers",environment:d,data:{spaceId:t,target:{type:ea().u.Domains,emailDomains:i}}}),ta().D6({label:(0,oe.jsx)(f().sA,{id:"managedUsers.toastMessage.forcePasswordReset.all.success",defaultMessage:"Successfully reset passwords for all managed users"})}),Ps().Jm(d,{email_domains:i})}return i?(0,oe.jsx)("div",{style:c.settingContainer,children:(0,oe.jsx)(or,{title:u,byline:g,targetTier:"enterprise"})}):(0,oe.jsx)("div",{style:c.settingContainer,children:(0,oe.jsx)(Fs,{title:u,byline:g,settingItem:(0,oe.jsx)("div",{style:c.buttonAndErrorContainer,children:(0,oe.jsx)(ye().A,{placement:Ae().W.Top,alignment:Ae().C.End,render:e=>(0,oe.jsx)(Vt().p,{isRed:!0,disabled:r||!o,style:c.button,onClick:p,...e,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.logoutButton",defaultMessage:"Reset passwords for all users"})}),disableTooltip:o,renderTooltip:()=>(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.tooltip",defaultMessage:"You must verify a domain to manage its users"})})})})})}function yr(e){let{spaceId:t,domainSettingsStore:s,promptUpgrade:i,verifiedDomains:n,disabled:r}=e;const o=n.length>0,d=(0,a().v3)(),c=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:!r&&o?1:.5}})),[r,o]),u=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.logoutAllUsers.title",defaultMessage:"Log out all users"}),g=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.logoutAllUsers.message",defaultMessage:"Force log out all managed users and require them to re-authenticate."});async function p(){Ps().V6(d,{email_domains:n});const{accept:e}=await j().Gh({message:(0,oe.jsx)(ve().A,{style:j().xh.title,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.message",defaultMessage:"Log out all of your managed users?"})}),description:(0,oe.jsx)(ve().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.description",defaultMessage:"You are about to log all of your managed users out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})}),acceptLabel:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.acceptLabel",defaultMessage:"Log out all managed users"}),cancelLabel:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.cancelLabel",defaultMessage:"Cancel"})});if(!e)return;const i=s.state.emailDomains;await q().callApi({eventName:"logoutManagedUsers",environment:d,data:{spaceId:t,target:{type:ea().u.Domains,emailDomains:i}}}),ta().D6({label:(0,oe.jsx)(f().sA,{id:"managedUsers.toastMessage.logout.all.success",defaultMessage:"Logging out managed users. This may take a few minutes to complete."})}),Ps().wE(d,{email_domains:i})}return i?(0,oe.jsx)("div",{style:c.settingContainer,children:(0,oe.jsx)(or,{title:u,byline:g,targetTier:"enterprise"})}):(0,oe.jsx)("div",{style:c.settingContainer,children:(0,oe.jsx)(Fs,{title:u,byline:g,settingItem:(0,oe.jsx)("div",{style:c.buttonAndErrorContainer,children:(0,oe.jsx)(ye().A,{placement:Ae().W.Top,alignment:Ae().C.End,render:e=>(0,oe.jsx)(Vt().p,{isRed:!0,disabled:r||!o,style:c.button,onClick:p,...e,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.logoutButton",defaultMessage:"Log out all users"})}),disableTooltip:o,renderTooltip:()=>(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.tooltip",defaultMessage:"You must verify a domain to manage its users"})})})})})}function vr(e){let{promptUpgrade:t,hasVerifiedDomains:s,disabled:n}=e;const{navigateTo:r}=(0,i.useContext)(Kn),o=(0,a().v3)(),d=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.title",defaultMessage:"Managed users dashboard"}),c=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.message",defaultMessage:"Manage and view users that are using your verified domains"}),u=(0,l().IS)((e=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:!n&&s?1:.5}})),[s,n]);return t?(0,oe.jsx)("div",{style:u.settingContainer,children:(0,oe.jsx)(or,{title:d,byline:c,targetTier:"enterprise"})}):(0,oe.jsx)("div",{style:u.settingContainer,children:(0,oe.jsx)(Fs,{title:d,byline:c,settingItem:(0,oe.jsx)("div",{style:u.buttonAndErrorContainer,children:(0,oe.jsx)(ye().A,{placement:Ae().W.Top,alignment:Ae().C.End,render:e=>(0,oe.jsx)(Bt().A,{disabled:n||!s,size:"lg",style:u.button,onClick:()=>{Ps().ud(o),r(Nn.ManagedUsersPage)},...e,children:(0,oe.jsx)(f().sA,{defaultMessage:"View dashboard",id:"identityAndProvisioning.managedUsers.button"})}),disableTooltip:s,renderTooltip:()=>(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.tooltip",defaultMessage:"You must verify a domain to manage its users"})})})})})}function jr(e){let{domainSettingsStore:t,saveEmailDomainSettings:s,promptUpgrade:i,verifiedDomains:n,disabled:r}=e;const d=(0,a().v3)(),c=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),u=n.length>0,g=(0,o().K8)((()=>Boolean(t.state.settings.prevent_granting_support_access)),[t]),p=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.preventGrantingSupportAccess.title",defaultMessage:"Prevent managed users from granting support access"}),m=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.preventGrantingSupportAccess.message",defaultMessage:"Control if managed users can enable support access on their accounts."});return i?(0,oe.jsx)("div",{style:c.settingContainer,children:(0,oe.jsx)(or,{title:p,byline:m,targetTier:"enterprise"})}):(0,oe.jsx)("div",{style:c.settingContainer,children:(0,oe.jsx)(za,{title:(0,oe.jsx)("div",{style:c.settingsTitle,children:p}),byline:m,isOn:g,onToggle:async function(){const e=Boolean(!t.state.settings.prevent_granting_support_access);t.setState({...t.state,settings:{...t.state.settings,prevent_granting_support_access:e}}),Ps().R_(d,{new_value:e}),await s()},disabled:r||!u})})}function Ar(e){let{domainSettingsStore:t,saveEmailDomainSettings:s,promptUpgrade:i,disabled:n}=e;const r=(0,a().v3)(),d=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"}})),[]),c=(0,o().K8)((()=>Boolean(t.state.settings.prevent_members_joining_external_workspace)),[t]),u=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.preventMembersJoiningExternalSpaces.title",defaultMessage:"External workspace access"}),g=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.preventMembersJoiningExternalSpaces.message",defaultMessage:"Control if managed users are able to join workspaces that aren't owned by your organization."});if(i)return(0,oe.jsx)("div",{style:d.settingContainer,children:(0,oe.jsx)(or,{title:u,byline:g,targetTier:"enterprise"})});const p=c?"on":"off";return(0,oe.jsx)("div",{style:d.settingContainer,children:(0,oe.jsx)(Xs().A,{isMobile:r.device.isMobile,disabled:n,title:u,caption:g,type:"dropdown",currentOption:p,options:[{key:"on",label:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.enabled.titleGeneric",defaultMessage:"Only workspace owners"}),caption:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.enabled.caption",defaultMessage:"Only workspace owners of your connected workspaces can join external workspaces."})},{key:"off",label:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.disabled.titleWithSpaceName",defaultMessage:"Anyone"}),caption:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.disabled.caption",defaultMessage:"All users can join any workspace."})}],onSelectOption:async function(){const e=Boolean(!t.state.settings.prevent_members_joining_external_workspace);t.setState({...t.state,settings:{...t.state.settings,prevent_members_joining_external_workspace:e}}),Ps().Y1(r,{new_value:e}),await s()}})})}function Cr(e){let{domainSettingsStore:t,saveEmailDomainSettings:s,promptUpgrade:i,hasVerifiedDomains:n,disabled:r}=e;const d=(0,a().v3)(),c=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),u=(0,o().K8)((()=>Boolean(t.state.settings.prevent_profile_edits)),[t]),g=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.preventProfileEdits.title",defaultMessage:"Allow managed users to change profile information"}),p=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.preventProfileEdits.message",defaultMessage:"Control if managed users can change their preferred name, email address, and profile photo."});return i?(0,oe.jsx)("div",{style:c.settingContainer,children:(0,oe.jsx)(or,{title:g,byline:p,targetTier:"enterprise"})}):(0,oe.jsx)("div",{style:c.settingContainer,children:(0,oe.jsx)(za,{title:(0,oe.jsx)("div",{style:c.settingsTitle,children:g}),byline:p,isOn:!u,onToggle:async function(){const e=Boolean(!t.state.settings.prevent_profile_edits);t.setState({...t.state,settings:{...t.state.settings,prevent_profile_edits:e}}),Ps().R_(d,{new_value:e}),await s()},disabled:r||!n})})}function wr(e){var t;let{spaceStore:s,samlConfigStore:i,domainSettingsStore:n}=e;const{verifiedDomains:r,isDomainSettingsAvailable:d,isSamlEditable:c,saveEmailDomainSettings:u}=rr({spaceStore:s,samlConfigStore:i,domainSettingsStore:n}),g=(0,l().IS)((e=>({byline:{fontSize:14,fontWeight:S().Wy.regular,color:e.text.secondary},helpButton:{marginTop:18,marginBottom:16}})),[]),p=(0,a().v3)(),m=d&&c,h=(0,Wt().P9)({name:"managed_users",spaceId:s.id,userId:null===(t=p.currentUser)||void 0===t?void 0:t.id}),x=(0,o().K8)((()=>s.id),[s]);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)("div",{children:(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:g.byline,children:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.byline",defaultMessage:"These settings apply to all users with a verified domain, even if they are not a member of this workspace."})})}),(0,oe.jsx)(zs().A,{title:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.managedUsers.helpButton",defaultMessage:"Learn about managed users"}),href:(0,Ye().xS)("guides.managedUsers"),style:g.helpButton,analyticsFrom:"managed_users_section"}),(0,oe.jsx)(vr,{promptUpgrade:!h,hasVerifiedDomains:r.length>0,disabled:!m}),(0,oe.jsx)(Cr,{promptUpgrade:!h,hasVerifiedDomains:r.length>0,domainSettingsStore:n,saveEmailDomainSettings:u,disabled:!m}),(0,oe.jsx)(Ar,{promptUpgrade:!h,domainSettingsStore:n,saveEmailDomainSettings:u,disabled:!m}),(0,oe.jsx)(jr,{promptUpgrade:!h,verifiedDomains:r,domainSettingsStore:n,saveEmailDomainSettings:u,disabled:!m}),(0,oe.jsx)(Sr,{promptUpgrade:!h,domainSettingsStore:n,saveEmailDomainSettings:u,disabled:!m}),(0,oe.jsx)(yr,{spaceId:x,promptUpgrade:!h,domainSettingsStore:n,verifiedDomains:r,disabled:!m}),(0,oe.jsx)(br,{spaceId:x,promptUpgrade:!h,domainSettingsStore:n,verifiedDomains:r,disabled:!m}),(0,oe.jsx)(xr,{promptUpgrade:!h,hasVerifiedDomains:r.length>0,domainSettingsStore:n,saveEmailDomainSettings:u,disabled:!m})]})}function Tr(e){let{spaceStore:t,samlConfigStore:s}=e;const n=(0,a().v3)();return{updateSamlIdpUrl:(0,i.useCallback)((async e=>{let i=!1;return await(0,ar().n)({onRequest:()=>q().callApi({eventName:"setSamlConfig",environment:n,data:{spaceId:t.id,idpMetadataUrl:e}}),onSuccess:()=>{i=!0,s.setState({...s.state,useMetadataUrl:!0,idpMetadataUrl:e,idpMetadata:void 0})}}),i}),[s,t,n]),updateSamlIdpXml:(0,i.useCallback)((async e=>{let i=!1;return await(0,ar().n)({onRequest:()=>q().callApi({eventName:"setSamlConfig",environment:n,data:{spaceId:t.id,idpMetadata:e}}),onSuccess:()=>{i=!0,s.setState({...s.state,useMetadataUrl:!1,idpMetadataUrl:void 0,idpMetadata:e})}}),i}),[s,t,n]),updateStatus:(0,i.useCallback)((e=>(0,ar().n)({onRequest:()=>q().callApi({eventName:"setSamlConfig",environment:n,data:{spaceId:t.id,status:e}}),onSuccess:()=>{s.setState({...s.state,status:e})}})),[s,t,n]),updateCreateAccount:(0,i.useCallback)((e=>(0,ar().n)({onRequest:()=>q().callApi({eventName:"setSamlConfig",environment:n,data:{spaceId:t.id,createAccount:e}}),onSuccess:()=>{s.setState({...s.state,createAccount:e})}})),[s,t,n])}}function Mr(e){let{spaceStore:t,samlConfigStore:s,disabled:i}=e;const{updateCreateAccount:n}=Tr({samlConfigStore:s,spaceStore:t}),r=(0,a().v3)(),d=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),c=(0,o().K8)((()=>s.state.createAccount),[s]);return(0,oe.jsx)("div",{style:d.settingContainer,children:(0,oe.jsx)(za,{title:(0,oe.jsxs)("div",{style:d.settingsTitle,children:[(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.createAccount.title",defaultMessage:"Automatic account creation"}),(0,oe.jsx)($n().A,{icon:Hn().$,onClick:()=>C().f({environment:r,url:(0,Ye().xS)("guides.samlJIT")})})]}),byline:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.createAccount.byline",defaultMessage:"Automatically create Notion accounts for new users who log in via SAML SSO."}),isOn:c,onToggle:async function(){await n(!s.state.createAccount)},disabled:i})})}function kr(e){let{spaceStore:t,samlConfigStore:s,promptUpgrade:i,disabled:n}=e;const r=(0,a().v3)(),{updateStatus:d}=Tr({samlConfigStore:s,spaceStore:t}),c=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"}})),[]),u=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.accountAuth.title",defaultMessage:"Login method"}),g=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.accountAuth.byline",defaultMessage:"Customize how users access workspaces that have SAML SSO enabled. Workspace owners can always log in with a password or passkey."}),p=(0,o().K8)((()=>"enforced"===s.state.status?"enforced":"enforced_for_domain"===s.state.status?"enforced_for_domain":"not_enforced"),[s]);if(i)return(0,oe.jsx)("div",{style:c.settingContainer,children:(0,oe.jsx)(or,{title:u,byline:g,targetTier:"business"})});const m=[{key:"enforced",label:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.accountAuth.option.enforced",defaultMessage:"Only SAML SSO"})},{key:"not_enforced",label:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.accountAuth.option.notEnforced",defaultMessage:"Any method"})}];return"enforced_for_domain"===p?(0,oe.jsx)("div",{style:c.settingContainer,children:(0,oe.jsx)(Xs().A,{isMobile:r.device.isMobile,disabled:!0,title:u,caption:g,type:"custom",customButton:(0,oe.jsx)(Vt().p,{disabled:!0,disabledFeedback:!0,children:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.accountAuth.option.enforcedForDomain",defaultMessage:"Enforced for domain"})})})}):(0,oe.jsx)("div",{style:c.settingContainer,children:(0,oe.jsx)(Xs().A,{isMobile:r.device.isMobile,title:u,caption:g,type:"dropdown",currentOption:p,options:m,onSelectOption:async function(e){"enforced"===e?await d("enforced"):"enforced_for_domain"===e?await d("enforced_for_domain"):await d("configured")}})})}var Ir=()=>s(759358);function Dr(e){let{spaceStore:t,samlConfigStore:s,domainSettingsStore:n,isSamlStatusEnabled:a,promptUpgrade:r,disabled:d}=e;const[c,u]=(0,i.useState)(!1),[g,p]=(0,i.useState)({isOpened:!1,enableSamlOnSave:!1}),[m,h]=(0,i.useState)(!1),{updateStatus:S,updateSamlIdpUrl:x,updateSamlIdpXml:b}=Tr({samlConfigStore:s,spaceStore:t}),{verifiedDomains:y}=rr({spaceStore:t,samlConfigStore:s,domainSettingsStore:n}),v=(0,o().K8)((()=>({id:t.id,status:s.state.status,idpMetadataUrl:s.state.idpMetadataUrl,idpMetadata:s.state.idpMetadata,createAccount:s.state.createAccount,emailDomains:s.state.emailDomains})),[t.id,s]),j="unconfigured"===v.status,A=(0,l().IS)((()=>({configButton:{marginTop:14}})),[]),C=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.samlToggle.title",defaultMessage:"Enable SAML SSO"}),w=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.samlToggle.byline",defaultMessage:"Workspace members can log in with SAML SSO if their email address uses a verified domain."}),T=j?(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.editSamlConfig.enableSaml",defaultMessage:"Enable SAML"}):(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.editSamlConfig.saveChanges",defaultMessage:"Save changes"});async function M(e){try{h(!0),await S(e)}finally{h(!1)}}return r?(0,oe.jsx)(or,{title:C,byline:w,targetTier:"business"}):(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(za,{title:C,byline:w,isOn:a,disabled:d||m,tooltipForDisabled:0===y.length?(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.samlToggle.disabledTooltipNoVerifiedDomains",defaultMessage:"Verify a domain to enable SAML."}):void 0,onToggle:async function(){if(d)return;const{useMetadataUrl:e,idpMetadata:t,idpMetadataUrl:i}=s.state,n=e&&i||!e&&t;switch(s.state.status){case"disabled":n?await M("configured"):p({isOpened:!0,enableSamlOnSave:!0});break;case"unconfigured":p({isOpened:!0,enableSamlOnSave:!0});break;case"configured":case"enforced":await M("disabled");break;case"enforced_for_domain":break;default:(0,_s().HB)(s.state.status)}}}),(0,oe.jsx)(Bt().A,{disabled:d,disabledFeedback:d,size:"lg",style:A.configButton,onClick:function(){d||p({isOpened:!0,enableSamlOnSave:!1})},children:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.samlToggle.configure",defaultMessage:"Edit SAML SSO configuration"})}),g.isOpened?(0,oe.jsx)(Ir().N,{saveButtonText:T,onSave:async function(e){const{metadataUrl:t,metadataXml:i}=e;u(!0);let n=!1;if(t?n=await x(t):i&&(n=await b(i)),n){switch(s.state.status){case"disabled":g.enableSamlOnSave&&await S("configured");break;case"unconfigured":await S("configured");break;case"enforced":case"enforced_for_domain":case"configured":break;default:(0,_s().HB)(s.state.status)}p({isOpened:!1,enableSamlOnSave:!1}),u(!1)}else u(!1)},samlConfig:v,loading:c,onDismiss:()=>p({isOpened:!1,enableSamlOnSave:!1}),headerByline:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.editSamlConfig.byline",defaultMessage:"Configure SAML SSO for your Notion workspace with your Identity Provider (IDP). <guidelink>Learn more</guidelink>.",values:{guidelink:e=>(0,oe.jsx)(yi().A,{hoverColor:"blue",href:(0,Ye().xS)("guides.samlSettings"),external:!0,children:e})}})}):null]})}var Rr=()=>s(994877);const _r={id:"name",headerTitle:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.secondaryWorkspaces.table.name",defaultMessage:"Name"}),renderCell:e=>(0,oe.jsx)(qr,{space:e.space,isCurrentSpace:e.isCurrentSpace}),widthData:{width:50},sortable:!0},Pr={id:"memberCount",headerTitle:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.secondaryWorkspaces.table.memberCount",defaultMessage:"Members"}),renderCell:e=>(0,oe.jsx)(ve().A,{children:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.secondaryWorkspaces.table.members",defaultMessage:"{count} members",values:{count:e.space.memberCount}})}),widthData:{width:20},sortable:!0},Br={id:"createdAt",headerTitle:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.secondaryWorkspaces.table.plan",defaultMessage:"Created at"}),renderCell:e=>{const t=e.space.createdTime;return(0,oe.jsx)(ve().A,{children:t&&(0,Ba().W_)(t,"medium",fi().locale)})},widthData:{width:20},sortable:!0},Ur=[_r,Pr,Br];function Lr(e){let{spaceStore:t,spaces:s}=e;const[n,a]=(0,i.useState)({column:_r,sortAscending:!1}),r=(0,o().K8)((()=>s.map((e=>({id:e.id,isClickable:!1,isCurrentSpace:t.id===e.id,space:e})))),[s,t]),d=(0,l().IS)((e=>(0,xe().rC)({columnRenderInfo:Ur,theme:e,containerMarginTop:12})),[]);return(0,oe.jsx)(xe().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Ur,rows:Or(r,n),sortState:n,onSortStateChanged:a,renderNoRowsComponent:()=>(0,oe.jsx)(ve().A,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.secondaryWorkspaces.empty",defaultMessage:"No linked workspaces."})}),styles:d})}function Or(e,t){let{column:s,sortAscending:i}=t,n=[];switch(s.id){case"name":n=h().Ul(e,(e=>e.space.name));break;case"createdAt":n=h().Ul(e,(e=>e.space.createdTime));break;case"memberCount":n=h().Ul(e,(e=>e.space.memberCount))}return i?n:n.reverse()}function qr(e){const t=(0,l().IS)((()=>({container:{display:"flex",justifyContent:"center",alignItems:"center",gap:4}})),[]);return(0,oe.jsxs)(ve().A,{style:t.container,children:[e.space.name,e.isCurrentSpace?(0,oe.jsx)(te().A,{children:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.secondaryWorkspaces.table.name.currentBadge",defaultMessage:"Current"})}):null]})}function Wr(e){let{spaceStore:t,spaces:s}=e;const n=(0,a().v3)(),r=(0,l().IS)((()=>({settingContainer:{margin:"18px 0"}})),[]),d=(0,i.useCallback)((()=>{Rr().SI({environment:n,from:"saml_settings",prepopulatedContent:`Request to add or remove a workspace for SAML single sign-on on workspace ${t.id}.`})}),[t,n]),c=(0,o().K8)((()=>(0,m().bp)(t.getSubscriptionTier())),[t]);return(0,oe.jsxs)("div",{style:r.settingContainer,children:[(0,oe.jsx)(Fs,{title:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.secondaryWorkspaces.title",defaultMessage:"Linked workspaces"}),byline:(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.secondaryWorkspaces.description",defaultMessage:"This SAML SSO configuration applies to the following other workspaces."}),c&&(0,oe.jsxs)(oe.Fragment,{children:[" ",(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.secondaryWorkspaces.contact",defaultMessage:"<contactlink>Contact support</contactlink> to add or remove a workspace.",values:{contactlink:e=>(0,oe.jsx)(yi().A,{onClick:d,children:e})}})]})]}),settingItem:null}),(0,oe.jsx)(Lr,{spaceStore:t,spaces:s})]})}function Er(e){let{spaceStore:t,samlConfigStore:s,domainSettingsStore:i}=e;const{verifiedDomains:n,isSamlAvailable:a,isSamlEditable:r,isSamlStatusEnabled:l}=rr({spaceStore:t,samlConfigStore:s,domainSettingsStore:i}),d=!r||!a||!l,c=(0,o().K8)((()=>s.state.spaces),[s]);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(zs().A,{title:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.samlToggle.learnMore",defaultMessage:"Learn about SAML SSO"}),href:(0,Ye().xS)("guides.samlSettings"),style:{marginTop:18,marginBottom:16},analyticsFrom:"saml_settings"}),(0,oe.jsx)(Dr,{disabled:!r||0===n.length,promptUpgrade:!a,isSamlStatusEnabled:l,spaceStore:t,samlConfigStore:s,domainSettingsStore:i}),(0,oe.jsx)(kr,{disabled:d,promptUpgrade:!a,spaceStore:t,samlConfigStore:s}),(0,oe.jsx)(Mr,{disabled:d,spaceStore:t,samlConfigStore:s}),(0,oe.jsx)(Wr,{spaceStore:t,spaces:c})]})}var zr=()=>s(122555),Fr=()=>s(364280);function Nr(e){let{spaceStore:t,samlConfigStore:s,domainSettingsStore:n,organizationOnboardingInfo:r}=e;const d=(0,a().v3)(),{saveWorkspaceCreationSetting:c}=rr({spaceStore:t,samlConfigStore:s,domainSettingsStore:n}),u=(0,l().IS)((()=>({iconArrow:{height:14,width:14,fill:"currentColor",transform:"rotate(90deg)",marginTop:4},button:{margin:"4px 0px 16px",width:"fit-content",display:"flex",alignItems:"center",justifyContent:"center",gap:4}})),[]),{buttonLabel:g,onClick:p}=(0,ir().gO)({environment:d,organizationOnboardingInfo:r}),m=(0,i.useCallback)((()=>(0,oe.jsxs)(Vt().p,{isBlue:!0,onClick:p,style:u.button,children:[g,(0,zr().p)(u.iconArrow)]})),[g,p,u.button,u.iconArrow]),h=(0,i.useCallback)((()=>(0,oe.jsx)(Fs,{title:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.emailDomainsSection.organization.title",defaultMessage:"Verified domains"}),byline:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.emailDomainsSection.organization.byline",defaultMessage:"Verify ownership of an email domain to access advanced security features including single sign-on."}),settingItem:m()})),[m]),S=(0,o().K8)((()=>s.state.emailDomains.length+s.state.domainVerifications.length>0),[s]);return(0,oe.jsxs)(Fr().VP,{gap:16,children:[S?(0,oe.jsx)(pr,{disabled:!0,promptUpgrade:!1,spaceStore:t,samlConfigStore:s,saveWorkspaceCreationSetting:c,renderOverrideAddDomainButton:h}):h(),(0,oe.jsx)(Fs,{title:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.saml.organization.title",defaultMessage:"Enable SAML SSO"}),byline:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.saml.organization.byline",defaultMessage:"Workspace members can log in with SAML SSO if their email address uses a verified email domain."}),settingItem:m()})]})}s(737550);var Gr=()=>s(978604),Kr=()=>s(799288),Vr=()=>s(925907),Hr=()=>s(693954),$r=()=>s(792071),Yr=()=>s(384100),Jr=()=>s(124749);const Qr={container:{display:"flex",alignItems:"center",fontSize:S().J.UIRegular.desktop,overflow:"hidden"},userAvatar:{paddingRight:6},userName:{flexShrink:1,...S().RC}};function Zr(e,t){const s=$r().Bj6.fromValue(L().GP,e);return s.getCreatedByTable()===O().oo&&s.getCreatedById()===t}const Xr={buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:20,width:20,marginRight:1}};function eo(e){let{onRevokeToken:t}=e;const n=(0,l().DP)(),[a,r]=(0,i.useState)(!1);return(0,oe.jsx)(ye().A,{textWrap:!1,renderTooltip:()=>(0,oe.jsx)(f().sA,{defaultMessage:"Revoke this token.",id:"revokeTokenButton.tooltip"}),placement:Ae().W.Right,render:e=>(0,oe.jsx)(Sa().Ay,{popupType:Sa().z7.Popup,placementToOrigin:Sa().sx.Right,renderOrigin:t=>(0,oe.jsx)(be().A,{className:Ve().hqd,style:Xr.buttonStyle,...e,...t,children:(0,Vs().I)({fill:n.icon.secondary,width:12,height:12})}),onClick:()=>{r(!0)},render:e=>a?(0,oe.jsx)(s(817045).S,{onCancel:e.close,onSubmit:t,headerText:(0,oe.jsx)(f().sA,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.message",defaultMessage:"Revoke this token?"}),bylineText:(0,oe.jsx)(f().sA,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.description",defaultMessage:"Existing SCIM configurations that use this token will no longer work once the token is revoked, and youll have to provide them with a new token."}),submitText:(0,oe.jsx)(f().sA,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.acceptButton.label",defaultMessage:"Revoke token"})}):null})})}function to(){const e=(0,l().DP)();return(0,oe.jsx)(ye().A,{textWrap:!1,renderTooltip:()=>(0,oe.jsx)(f().sA,{defaultMessage:"Outdated token. Revoke this token and generate a new one to view its contents.",id:"manageScimTokenTable.OutdatedWarningIcon.tooltip"}),placement:Ae().W.Right,render:t=>(0,oe.jsx)("div",{...t,style:{paddingLeft:"4px"},children:(0,Hr().Q)({fill:(0,pa().k5)("orange",e).fill,width:12,height:12})})})}function so(e){let{clipboardTextFn:t}=e;const s=(0,a().v3)();const i=(0,l().DP)(),n={height:25,background:i.whiteButtonBackground,color:i.text.primary,fontWeight:S().Wy.regular,padding:"4px 6px",fontSize:11.5};return(0,oe.jsxs)(Vt().p,{isGray:!0,size:"xs",onClick:async function(){const e=await t();if(void 0!==e){const t=await Se().R.clipboardActions.load();t.copyString({environment:s,stringValue:e,copiedMessage:t.clipboardMessages.copiedTokenToClipboard,showCopyModal:!!s.device.isSafari||void 0})}},style:n,children:[(0,Vr().n)({height:16,width:16,paddingRight:4}),(0,oe.jsx)(f().sA,{defaultMessage:"Copy",id:"codeBlock.copyToClipboard.button"})]})}const io="";function no(){return(0,oe.jsx)(ye().A,{textWrap:!1,renderTooltip:()=>(0,oe.jsx)(f().sA,{defaultMessage:"This token can only be viewed by its creator.",id:"manageScimTokenTable.renderTokenThatCannotBeViewed.tooltip"}),placement:Ae().W.Right,render:e=>(0,oe.jsx)("div",{...e,children:io})})}function ao(e){let{row:t}=e;const s=(0,a().v3)();return t.legacy?(0,oe.jsxs)(oe.Fragment,{children:[io,(0,oe.jsx)(to,{})]}):t.ownedByCurrentUser?(0,oe.jsxs)(oe.Fragment,{children:[io,(0,oe.jsx)(so,{clipboardTextFn:()=>yn().dA({environment:s,botId:t.id})})]}):(0,oe.jsx)(no,{})}const ro={id:"token",headerTitle:(0,oe.jsx)(f().sA,{id:"manageScimTokenTable.columnTitle.token",defaultMessage:"Token"}),renderCell:e=>(0,oe.jsx)(ao,{row:e}),widthData:{width:40},sortable:!1,hasClickableContents:!0};function oo(){const e=Qr;return(0,oe.jsx)(ye().A,{textWrap:!1,renderTooltip:()=>(0,oe.jsx)(f().sA,{defaultMessage:"This token was created by a user who is no longer an admin in the workspace.",id:"scimTableLegacyUserCell.tooltip"}),placement:Ae().W.Right,render:t=>(0,oe.jsx)("div",{...t,children:(0,oe.jsxs)("div",{style:e.container,children:[(0,oe.jsx)(Pn().A,{style:e.userAvatar,avatarShouldShowShadow:!0,size:20}),(0,oe.jsx)("div",{style:e.userName,children:(0,oe.jsx)("i",{children:"Deactivated user"})})]})})})}const lo={id:"addedBy",headerTitle:(0,oe.jsx)(f().sA,{id:"manageScimTokenTable.columnTitle.addedBy",defaultMessage:"Added by"}),renderCell:e=>{if(e.legacy)return(0,oe.jsx)(oo,{});{const t=e.ownedByCurrentUser?(0,oe.jsx)(ve().A,{isSecondaryColor:!0,style:{marginLeft:4,textAlign:"center"},children:(0,oe.jsx)(f().sA,{id:"manageSCIMTokenTable.colums.addedBy.selfIndicator",defaultMessage:"(you)"})}):null;return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(s(317131).l,{isClickable:!1,userStores:[e.ownerUserStore]}),t]})}},widthData:{width:40},sortable:!1,hasClickableContents:!1},co={id:"created",headerTitle:(0,oe.jsx)(f().sA,{id:"manageScimTokenTable.columnTitle.created",defaultMessage:"Created"}),renderCell:e=>(0,oe.jsx)(oa().d,{includeTime:!0,dateTs:e.createdAt}),widthData:{width:40},sortable:!0,hasClickableContents:!1},uo=[ro,lo,co,{id:"revokeToken",headerTitle:void 0,renderCell:e=>(0,oe.jsx)(eo,{onRevokeToken:e.onRevokeToken}),widthData:{width:10},sortable:!1,hasClickableContents:!0}];function go(e,t){let{column:s,sortAscending:i}=t;const n=null==s?void 0:s.id;let a=e=>e.id;switch(n){case"name":a=e=>e.name;break;case"created":a=e=>e.createdAt;break;case"token":case"addedBy":case"revokeToken":case void 0:break;default:(0,_s().HB)(n)}const r=h().Ul(e,a);return i||r.reverse(),r}function po(e){let{botStores:t,onRevokeToken:s}=e;const n=(0,Jr().$)(),a=(0,o().O$)(ut().AppStoreCurrentSpaceStore),r=(0,f().tz)(),d=(0,o().K8)((()=>{if(!a)return[];const e=null==n?void 0:n.id;return h().oE(t.map((t=>{const i=t.getModel();if(!i||!(0,Kr().SZ)(i))return;const n={id:i.id,isClickable:!1,createdAt:i.getCreatedAt(),userLocale:r.locale,name:i.getName(),onRevokeToken:async()=>{await s(i.id)}},o=function(e){const t=$r().Bj6.fromValue(L().GP,e);return"notion_user"===t.getCreatedByTable()&&t.getCreatedById()===O().BF.id}(i);return o?{...n,legacy:o}:{...n,legacy:o,ownedByCurrentUser:Zr(i,e),ownerUserStore:"notion_user"===i.getCreatedByTable()?(0,Yr().z5)({userId:i.getCreatedById(),currentSpaceStore:a}):void 0}})))}),[t,a,n,r.locale,s]),[c,u]=(0,i.useState)({column:co,sortAscending:!1}),g=(0,l().IS)((e=>(0,xe().rC)({columnRenderInfo:uo,theme:e,containerMarginTop:0})),[]);return(0,oe.jsx)(xe().WE,{columnRenderInfo:uo,rows:go(d,c),sortState:c,onSortStateChanged:u,onRowClick:()=>null,renderNoRowsComponent:()=>(0,oe.jsx)(ve().A,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:(0,oe.jsx)(f().sA,{id:"manageSCIMTokenTable.noTokensFound.message",defaultMessage:"No active SCIM tokens."})}),styles:g})}async function mo(e){let{environment:t,spaceId:s}=e;return(await yn().Ju({environment:t,table:bn().NX,id:s,type:"scim"})).botIds}const fo=function(e){let{botIds:t,setBotIds:s,spaceStore:n}=e;const r=(0,a().v3)(),o=n.id;if((0,i.useEffect)((()=>{void 0===t&&mo({environment:r,spaceId:o}).then(s)}),[t,r,s,o]),t){const e=t.map((e=>ae().sk.createChildStore(n,{table:L().GP,id:e,spaceId:o})));return(0,oe.jsx)(po,{botStores:e,onRevokeToken:async e=>{await yn().KA({environment:r,botId:e,onSuccess:()=>{mo({environment:r,spaceId:o}).then(s)}})}})}return(0,oe.jsx)(mi().A,{})};function ho(e){let{userStore:t,spaceStore:s,promptUpgrade:n}=e;const[r,l]=(0,i.useState)(void 0),d=(0,a().v3)(),c=(0,o().K8)((()=>function(e){let{botIds:t,spaceStore:s,environment:i}=e;if(void 0===t)return"Undefined";const n=t.map((e=>ae().sk.createChildStore(s,{table:L().GP,id:e,spaceId:s.id}))).filter((e=>e.isDefined()));if(n.some((e=>e.getCreatedByTable()===O().oo&&e.getCreatedById()===O().BF.id)))return"SpaceHasExistingToken";const a=n.some((e=>e.getCreatedByTable()===O().oo&&e.getCreatedById()===i.currentUser.id));if(a)return"UserHasExistingToken";return"Able"}({botIds:r,spaceStore:s,environment:d})),[r,d,s]),u=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.scim.title",defaultMessage:"SCIM tokens"}),g=(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.scim.byline",defaultMessage:"Generate a token to configure SCIM."});return n?(0,oe.jsx)(or,{title:u,byline:g,targetTier:"enterprise"}):(0,oe.jsxs)("div",{children:[(0,oe.jsx)(Fs,{title:u,byline:g,settingItem:(0,oe.jsx)(Gr().K,{onNewScimToken:e=>l((t=>[...t??[],e])),spaceStore:s,userStore:t,tokenCreationAbility:c})}),(0,oe.jsx)(zs().A,{title:(0,oe.jsx)(f().sA,{id:"securitySAMLSettings.SCIMSection.helpButton.label",defaultMessage:"Learn about SCIM"}),style:{marginTop:18,marginBottom:24},href:(0,Ye().xS)("guides.scim"),analyticsFrom:"scim_settings"}),(0,oe.jsx)(fo,{spaceStore:s,userStore:t,botIds:r,setBotIds:l})]})}var So=()=>s(675801);function xo(e){let{userStore:t,spaceStore:s}=e;const i=(0,a().v3)(),n=(0,Wt().P9)({name:"scim",spaceId:s.id,userId:t.id}),r=(0,o().K8)((()=>Boolean(s.getSettings().are_scim_invite_emails_suppressed)),[s]),d=(0,l().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:16}})),[]);return(0,oe.jsxs)("div",{style:d.container,children:[(0,oe.jsx)(ho,{promptUpgrade:!n,userStore:t,spaceStore:s}),n?(0,oe.jsx)(So().S,{isEnabled:r,onToggle:()=>{(0,So().i)({environment:i,spaceStore:s,areScimInviteEmailsSuppressed:!r})}}):null]})}var bo=()=>s(591256);function yo(e){let{userStore:t,spaceStore:s,samlConfigStore:n,domainSettingsStore:r}=e;const{organizationInfo:o,isOrganizationOwner:l}=(0,Gi().n)({spaceId:s.id}),{onboardingInfo:d}=function(e){let{spaceId:t,allowSecondaryWorkspace:s}=e;const n=(0,a().v3)(),{updateCacheWithRecordMap:r}=(0,i.useContext)(nr().N),[{status:o,value:l},d]=(0,zn().Yb)((async()=>{const e=await q().callApi({eventName:"getOrganizationOnboardingInfo",environment:n,data:{spaceId:t,allowSecondaryWorkspace:s}});return"success"===e.type?(r({data:e.data}),e.data.result):"failed"===e.type?{onboardingStatus:"ineligible"}:(0,_s().HB)(e)}),[n,t,r,s]);return{loading:"pending"===o||"idle"===o,onboardingInfo:l,refresh:d}}({spaceId:s.id,allowSecondaryWorkspace:!0});return(0,oe.jsx)(vo,{userStore:t,spaceStore:s,samlConfigStore:n,domainSettingsStore:r,organizationInfo:o,isOrganizationOwner:l,organizationOnboardingInfo:d})}function vo(e){let{userStore:t,spaceStore:s,samlConfigStore:n,domainSettingsStore:a,organizationInfo:r,isOrganizationOwner:d,organizationOnboardingInfo:c}=e;const u=(0,o().O$)(pt().e),{loadingSaml:g,loadedSaml:p,errorSaml:m}=(0,i.useContext)(Kn),h=void 0!==r,S=c&&("not_started"===c.onboardingStatus||"domain_verified"===c.onboardingStatus),x=h&&c&&"ineligible"===(null==c?void 0:c.onboardingStatus),b=c&&"ineligible"!==(null==c?void 0:c.onboardingStatus),y=b||h,v=b,A=h&&!d,C=(0,l().IS)((e=>({header:{marginTop:36},title:{display:"flex",alignItems:"center",gap:6}})),[]),w=(0,o().K8)((()=>(0,gi().OX)()),[]);return(0,i.useEffect)((()=>{u&&!g&&m&&j().c1(m.message)}),[m,g,u]),u?g?(0,oe.jsx)(Gt().Ay,{centerContent:!0,children:(0,oe.jsx)(mi().A,{})}):m?null:p?(0,oe.jsxs)(Gt().Ay,{children:[S?(0,oe.jsx)(ir().s,{organizationOnboardingInfo:c}):x&&d?(0,oe.jsx)(ir().s,{organizationOnboardingInfo:{onboardingStatus:"completed",organizationId:null==r?void 0:r.id}}):null,r&&!d?(0,oe.jsx)(sr().l,{display:"inline",tint:"blue",iconGroup:tr().x,label:(0,oe.jsx)(f().sA,{id:"workspaceSettingsModal.organizationsBanner.member.title",defaultMessage:"Settings that can only be managed by organization owners have been moved to the organization console."}),description:(0,oe.jsx)(f().sA,{id:"workspaceSettingsModal.organizationsBanner.member.tooltip",defaultMessage:"Verifying domains and managing accounts can only be done by organization owners. Organization owners can manage all workspaces in {organizationName}.",values:{organizationName:r.name}})}):null,y?null:(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(me().A,{large:!0,divider:"full",children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.domain.title",defaultMessage:"Domain management"})}),(0,oe.jsx)(fr,{spaceStore:s,samlConfigStore:n,domainSettingsStore:a,isCurrentSpaceEnterprise:w})]}),y?null:(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(me().A,{large:!0,divider:"full",style:C.header,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.userManagement.title",defaultMessage:"User management"})}),(0,oe.jsx)(wr,{spaceStore:s,samlConfigStore:n,domainSettingsStore:a})]}),A?null:v?(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(me().A,{large:!0,divider:"full",style:"completed"===(null==c?void 0:c.onboardingStatus)?void 0:C.header,children:(0,oe.jsxs)("div",{style:C.title,children:[(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.saml.title",defaultMessage:"SAML single sign-on (SSO)"}),(0,oe.jsx)(zs().A,{href:(0,Ye().xS)("guides.samlSettings"),analyticsFrom:"saml_settings"})]})}),(0,oe.jsx)(Nr,{spaceStore:s,samlConfigStore:n,domainSettingsStore:a,organizationOnboardingInfo:c})]}):(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(me().A,{large:!0,divider:"full",style:C.header,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.saml.title",defaultMessage:"SAML single sign-on (SSO)"})}),(0,oe.jsx)(Er,{spaceStore:s,samlConfigStore:n,domainSettingsStore:a})]}),(0,oe.jsx)(me().A,{large:!0,divider:"full",style:C.header,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.scim.title",defaultMessage:"SCIM provisioning"})}),(0,oe.jsx)(xo,{userStore:t,spaceStore:s}),(0,oe.jsx)(me().A,{large:!0,divider:"full",style:C.header,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.setupInfo.title",defaultMessage:"Setup information"})}),(0,oe.jsx)(bo().K,{spaceStore:s})]}):null:(0,oe.jsx)(Gt().Ay,{children:(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"},children:(0,oe.jsx)(f().sA,{defaultMessage:"Please go online to manage identity and provisioning settings.",id:"identityProvisioningSettings.offline.message"})})})}var jo=()=>s(818211),Ao=()=>s(183607),Co=()=>s(545274),wo=()=>s(720665),To=()=>s(91709),Mo=()=>s(365002),ko=()=>s(506090),Io=()=>s(322769);function Do(){return(0,oe.jsx)(ye().A,{renderTooltip:()=>(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.pendingWorkspaceClaim.Explanation",defaultMessage:"Workspace claim request is being processed."}),render:e=>(0,oe.jsx)(ve().A,{...e,children:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.pendingClaim",defaultMessage:"Pending"})})})}var Ro=()=>s(695608);function _o(e){let{admin:t}=e;const s=(0,f().tz)();return(0,oe.jsx)(ye().A,{renderTooltip:()=>(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.pendingWorkspaceTransferExplanation",defaultMessage:"Waiting for {name} to transfer the workspace to an external account.",values:{name:(0,Ro().c6)(s,t)}}),render:e=>(0,oe.jsx)(ve().A,{...e,children:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.pendingTransfer",defaultMessage:"Pending"})})})}let Po=function(e){return e.Single="single",e.Multi="multi",e}({});function Bo(e){const{space:t,mode:s}=e,i=(0,o().uB)(void 0,fa().A),n=(0,l().IS)((()=>({container:{minWidth:325}})),[]);return s===Po.Single?(0,oe.jsx)(Lo,{action:e.action,space:t}):(0,oe.jsx)(Sa().Ay,{popupType:ya().nl.Popup,style:n.container,buttonPopupStore:i,renderOrigin:e=>(0,oe.jsx)($n().A,{icon:ga()._,...e}),render:()=>(0,oe.jsx)(Uo,{space:t,actions:e.actions,popupStore:i})})}function Uo(e){let{space:t,actions:s,popupStore:i}=e;const n={key:"workspace-actions",render:e=>(0,oe.jsx)(va().A,{...e}),items:s.map((e=>{const s=!!e.getDisabledState&&e.getDisabledState(t),i=e.getTooltip?e.getTooltip(t):null;return{key:e.id,render:t=>(0,oe.jsx)(ye().A,{render:i=>(0,oe.jsx)(ha().A,{...t,...i,shouldWrapCaption:!0,svg:t=>e.getIcon(t),title:e.name,caption:e.caption,style:{paddingTop:8,paddingBottom:8,opacity:s?.5:1},disabled:s}),renderTooltip:()=>i,disableTooltip:!Boolean(i),placement:Ae().W.Left}),action:()=>e.onAction(t)}}))};return(0,oe.jsx)(xa().A,{menuType:ma().gu.Popup,children:(0,oe.jsx)(ba().Ay,{type:ba().Oh.Vertical,initialFocus:void 0,sections:[n],onAccept:()=>{i.setState({open:!1})}})})}function Lo(e){const{action:t,space:s}=e,n=(0,l().IS)((e=>({button:{paddingLeft:5,paddingRight:5}})),[]),a=i.useCallback((()=>{t.onAction(s)}),[t,s]);return(0,oe.jsx)(Vt().p,{size:"sm",style:n.button,onClick:a,children:t.name})}var Oo=()=>s(379990),qo=()=>s(254437);function Wo(e){let{users:t,deletedUserEmailDomain:s}=e;const i=(0,o().uB)(void 0,fa().A),n=(0,l().IS)((()=>({container:{minWidth:275}})),[]);return(0,oe.jsx)(Sa().Ay,{popupType:ya().nl.Popup,style:n.container,buttonPopupStore:i,renderOrigin:e=>(0,oe.jsx)(Fo,{users:t,deletedUserEmailDomain:s,...e}),render:()=>(0,oe.jsx)(Eo,{users:t,popupStore:i})})}function Eo(e){let{users:t,popupStore:s}=e;const i=(0,a().v3)(),n={key:"workspace-users-menu",render:e=>(0,oe.jsx)(va().A,{...e}),items:t.map((e=>({key:e.id,render:t=>(0,oe.jsx)(zo,{user:e,...t}),action:()=>C().f({environment:i,url:`mailto:${e.email}`})})))};return(0,oe.jsx)(xa().A,{menuType:ma().gu.Popup,children:(0,oe.jsx)(ba().Ay,{type:ba().Oh.Vertical,initialFocus:0,sections:[n],onAccept:()=>{s.setState({open:!1})}})})}function zo(e){let{user:t,...s}=e;const i=(0,f().tz)(),n=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",height:"auto",paddingTop:8,paddingBottom:8,margin:"0 6px"},avatarContainer:{display:"flex",justifyContent:"center",alignItems:"center"},copyContainer:{display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"auto",opacity:.5},nameContainer:{marginLeft:8,marginRight:8},name:{fontSize:14,lineHeight:1.2,maxWidth:300},email:{fontSize:12,lineHeight:1.2,opacity:.5,maxWidth:300}})),[]);return(0,oe.jsxs)(Vt().p,{style:n.container,...s,children:[(0,oe.jsx)("div",{style:n.avatarContainer,children:(0,oe.jsx)(Pn().A,{userValue:t,size:24})}),(0,oe.jsxs)("div",{style:n.nameContainer,children:[(0,oe.jsx)(ve().A,{style:n.name,children:(0,Ro().c6)(i,t)}),(0,oe.jsx)(ve().A,{style:n.email,children:t.email})]}),(0,oe.jsx)("div",{style:n.copyContainer,children:(0,qo().F)({height:18,width:18})})]})}function Fo(e){let{users:t,deletedUserEmailDomain:s,...i}=e;const n=(0,f().tz)(),a=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginLeft:"-8px",maxWidth:"100%"},empty:{fontSize:14,maxWidth:150,opacity:.5},plusMore:{opacity:.5,display:"inline"}})),[]);return 0===t.length?(0,oe.jsx)(ye().A,{render:e=>(0,oe.jsx)(Vt().p,{style:a.container,disabled:!0,...i,...e,children:(0,oe.jsx)(ve().A,{style:a.empty,children:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.users.empty",defaultMessage:"Deleted user"})})}),disableTooltip:!s,renderTooltip:()=>(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.users.emptyTooltip",defaultMessage:"Deleted user from {domain}",values:{domain:`@${s}`}})}):(0,oe.jsx)(Vt().p,{style:a.container,...i,children:(0,oe.jsx)(ve().A,{children:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.users.name",defaultMessage:"{remainingCount, plural, =0 {{firstUser}} one {{firstUser} <gray>+{remainingCount}</gray>} other {{firstUser} <gray>+{remainingCount}</gray>}}",values:{firstUser:(0,Ro().c6)(n,t[0]),remainingCount:t.length-1,gray:e=>(0,oe.jsx)(ve().A,{style:a.plusMore,children:e})}})})})}const No=[{id:"spaces",headerTitle:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.name",defaultMessage:"Workspaces"}),renderCell:e=>(0,oe.jsx)(Oo().H,{id:e.space.id,name:e.space.name,icon:e.space.icon,subscriptionTier:e.space.subscriptionTier,memberCount:e.space.memberCount}),widthData:{width:60},sortable:!1},{id:"admins",headerTitle:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.admins",defaultMessage:"Workspace owners"}),renderCell:e=>(0,oe.jsx)(Wo,{users:e.space.admins}),widthData:{width:40},sortable:!1},{id:"createdBy",headerTitle:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.createdBy",defaultMessage:"Created by"}),renderCell:e=>e.space.creator?(0,oe.jsx)(Wo,{users:[e.space.creator]}):(0,oe.jsx)(Wo,{users:[],deletedUserEmailDomain:e.space.creatorEmailDomain}),widthData:{width:40},sortable:!1},{id:"createdAt",headerTitle:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.createdAt",defaultMessage:"Created date"}),renderCell:e=>(0,oe.jsx)(ve().A,{style:{opacity:.5},children:(0,Oa().DG)(e.space.createdAt)}),widthData:{width:30},sortable:!1},{id:"action",headerTitle:null,renderCell:e=>{if((0,Io().D1)(e.space.spaceRequest))return(0,oe.jsx)(_o,{admin:e.space.admins[0]});if((0,Io().me)(e.space.spaceRequest))return(0,oe.jsx)(Do,{});if((0,Io().kF)(e.space.spaceRequest)){const t=e.actions.find((e=>"recover-space"===e.id));return t&&(0,oe.jsx)(Bo,{space:e.space,action:t,mode:Po.Single})}return e.actions.length>0?(0,oe.jsx)(Bo,{space:e.space,actions:e.actions.filter((e=>"recover-space"!==e.id)),mode:Po.Multi}):null},widthData:{width:15},sortable:!1}];function Go(e){let{claimableSpaces:t,spaceActions:s,loadMoreClaimableSpaces:i,loading:n}=e;const a=t.map((e=>({id:e.id,isClickable:!1,space:e,actions:s}))),r=(0,l().IS)((e=>(0,xe().rC)({columnRenderInfo:No,theme:e,containerMarginTop:0})),[]);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(xe().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:No,rows:a,renderNoRowsComponent:()=>(0,oe.jsx)(ve().A,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:!n&&(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.empty",defaultMessage:"No claimable workspaces."})}),styles:r,getStyleForRow:function(e){if((0,Io().D1)(e.space.spaceRequest)||(0,Io().me)(e.space.spaceRequest)||(0,Io().kF)(e.space.spaceRequest))return{opacity:.5}},loadMoreMethod:i?{type:"scroll",onLoadMore:i}:void 0}),n&&(0,oe.jsx)(mi().A,{style:{margin:"24px auto 24px"}})]})}var Ko=()=>s(842599),Vo=()=>s(66913),Ho=()=>s(889154),$o=()=>s(413267),Yo=()=>s(187485);const Jo=(0,f().YK)({emailPlaceholder:{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.placeholder",defaultMessage:"it@example.com"}});function Qo(e){let{onDismiss:t,spaceQueuedForTransfer:s,currentSpaceId:n}=e;const[r,o]=(0,i.useState)(),[d,c]=(0,i.useState)(!1),{setSpaceRequest:u}=(0,i.useContext)(Kn),g=(0,a().v3)(),p=(0,l().IS)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.palette.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.text.secondary},modalIcon:{fill:e.icon.secondary,height:24,width:24},title:{fontWeight:S().Wy.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:S().Wy.regular,textAlign:"center",fontSize:13,lineHeight:"16px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.icon.secondary,height:16,width:16},dividerContainer:{marginTop:20},dividerInner:{borderBottomColor:e.regularDividerColor},contactEmailContainer:{position:"relative",width:"100%",minHeight:56,marginTop:13},contactEmailTitle:{fontWeight:S().Wy.medium,fontSize:14,marginBottom:8,display:"inline-flex",alignItems:"center"},helpIcon:{fill:e.icon.tertiary,marginLeft:4,height:16,width:16},primaryButton:{width:"100%",marginTop:32},buttonCaption:{color:e.text.secondary,marginTop:8,textAlign:"center",fontSize:12},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:S().Wy.medium,color:e.text.tertiary},buttonCaptionError:{color:e.errorText,marginTop:8,fontSize:13}})),[]),m=Boolean(s);return(0,oe.jsx)(hi().a,{open:m,innerStyle:p.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)("div",{style:p.closeIconContainer,children:(0,oe.jsx)(Vt().p,{size:"sm",onClick:t,ignoreLocalHoverState:!0,children:(0,Vo().V)(p.closeIcon)})}),(0,oe.jsx)("div",{children:(0,Ho().G)(p.modalIcon)}),(0,oe.jsxs)(ve().A,{style:p.title,children:[(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.selfServe.title",defaultMessage:"Require account change"}),(0,oe.jsx)(Yo().A,{href:(0,Ye().xS)("guides.domainManagement"),children:(0,oe.jsx)($n().A,{icon:Hn().$})})]}),(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:p.description,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.byline",defaultMessage:"Youre about to require the Workspace Owner of 1 workspace to use an external Notion accounts. They will be unable to use the workspace until the change is made."})}),(0,oe.jsxs)("div",{style:p.workspaceContainer,children:[s?(0,oe.jsx)(Oo().H,{id:s.id,name:s.name,icon:s.icon,subscriptionTier:s.subscriptionTier,memberCount:s.memberCount}):null,(0,oe.jsx)("div",{style:p.checkContainer,children:(0,$o().b)(p.check)})]}),(0,oe.jsx)(pi().A,{size:"100%",innerStyle:p.dividerInner,style:p.dividerContainer}),(0,oe.jsxs)("div",{style:p.contactEmailContainer,children:[(0,oe.jsxs)(ve().A,{style:p.contactEmailTitle,children:[(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.title",defaultMessage:"Send request from"}),(0,oe.jsx)(ye().A,{renderTooltip:()=>(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.table.pendingExplanation",defaultMessage:"The Workspace Owner can contact this email for inquiries"}),render:e=>(0,oe.jsx)("span",{...e,children:(0,Hn().$)(p.helpIcon)})})]}),(0,oe.jsx)($s().A,{value:r,placeholder:E().A.formatMessage(Jo.emailPlaceholder),onChange:e=>{c(!1),o(e.target.value)}}),d&&(0,oe.jsx)(ve().A,{isSmall:!0,style:p.buttonCaptionError,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.error",defaultMessage:"Invalid email address"})})]}),(0,oe.jsx)(Es().A,{size:"lg",style:p.primaryButton,onClick:async()=>{const e=(0,Ko().qh)(r);var i;if((0,Ko().DT)(e)){if(s&&e){const a=await q().callApi({eventName:"initiateWorkspaceTransfer",environment:g,data:{requestingSpaceId:n,targetSpaceId:s.id,contactEmail:e}});if("failed"===a.type)j().f1((0,W().Hu)(E().A.getIntl(),a));else{const n=a.data.workspaceTransfer;u(s.id,n),Bn().FL(g,{contactEmail:e,currentOwners:s.admins.map((e=>e.id)),targetSpaceId:s.id,verifiedDomain:s.creatorEmailDomain,subscriptionTier:s.subscriptionTier}),t(),i=s.name,ta().D6({label:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.toast",defaultMessage:"Account change successfully requested for {spaceName}",values:{spaceName:i}})})}}}else c(!0)},children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.confirm",defaultMessage:"Confirm change"})}),(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:p.buttonCaption,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.buttonCaption",defaultMessage:"This cannot be undone"})}),(0,oe.jsx)(Vt().p,{style:p.secondaryButton,onClick:t,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.cancel",defaultMessage:"Cancel"})})]})})}function Zo(e){let{onDismiss:t,spaceQueuedForClaiming:s,requestingSpaceId:n}=e;const r=(0,a().v3)(),{setSpaceRequest:o}=(0,i.useContext)(Kn),d=(0,l().IS)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.palette.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.text.secondary},title:{fontWeight:S().Wy.medium,fontSize:16,marginBottom:8,display:"inline-flex",alignItems:"center",justifyContent:"center"},description:{fontWeight:S().Wy.regular,textAlign:"center",fontSize:13,lineHeight:"16px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.icon.secondary,height:16,width:16},primaryButton:{width:"100%",marginTop:32},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:S().Wy.medium,color:e.text.tertiary},buttonCaption:{color:e.text.secondary,marginTop:8,textAlign:"center",fontSize:12}})),[]),c=Boolean(s),u=async()=>{if(!s)return;const e=await q().callApi({eventName:"requestClaimAndUpgrade",environment:r,data:{requestingSpaceId:n,targetSpaceId:s.id}});var i;"failed"===e.type?j().Qg(e):(Bn().AQ(r,{currentOwners:s.admins.map((e=>e.id)),targetSpaceId:s.id,verifiedDomain:s.creatorEmailDomain,memberCount:s.memberCount}),o(s.id,e.data.spaceRequest),i=s.name,ta().D6({label:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.toast",defaultMessage:"Workspace claim successfully requested for {spaceName}",values:{spaceName:i}})})),t()};return(0,oe.jsx)(hi().a,{open:c,innerStyle:d.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)("div",{style:d.closeIconContainer,children:(0,oe.jsx)(Vt().p,{size:"sm",onClick:t,children:(0,Vo().V)(d.closeIcon)})}),(0,oe.jsxs)(ve().A,{style:d.title,children:[(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.title",defaultMessage:"Request workspace claim"}),(0,oe.jsx)(Yo().A,{href:(0,Ye().xS)("guides.domainManagement"),children:(0,oe.jsx)($n().A,{icon:Hn().$})})]}),(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:d.description,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.byline",defaultMessage:"Youre about to take ownership of {currentWorkspaceName} and upgrade it to an Enterprise plan. Youll become the Workspace owner and the existing owners will be downgraded to members.",values:{currentWorkspaceName:s?s.name:"the workspace below"}})}),(0,oe.jsxs)("div",{style:d.workspaceContainer,children:[s?(0,oe.jsx)(Oo().H,{id:s.id,name:s.name,icon:s.icon,subscriptionTier:s.subscriptionTier,memberCount:s.memberCount}):null,(0,oe.jsx)("div",{style:d.checkContainer,children:(0,$o().b)(d.check)})]}),(0,oe.jsx)(Es().A,{size:"lg",style:d.primaryButton,onClick:u,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.sendRequest",defaultMessage:"Send request"})}),(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:d.buttonCaption,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.buttonCaption",defaultMessage:"This request may take a few days to process. For more information, contact your <accountmanageremail>Account Management team</accountmanageremail>.",values:{accountmanageremail:e=>(0,oe.jsx)(yi().A,{href:"mailto:am@makenotion.com",children:e})}})}),(0,oe.jsx)(Vt().p,{style:d.secondaryButton,onClick:t,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.cancel",defaultMessage:"Cancel"})})]})})}function Xo(e){let{onDismiss:t,spaceQueuedForClaiming:s}=e;const i=(0,l().IS)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.palette.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.text.secondary},modalIcon:{fill:e.icon.secondary,height:24,width:24},title:{fontWeight:S().Wy.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:S().Wy.regular,textAlign:"center",fontSize:13,lineHeight:"16px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.icon.secondary,height:16,width:16},primaryButton:{width:"100%",marginTop:32},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:S().Wy.medium,color:e.text.tertiary}})),[]),n=Boolean(s);return(0,oe.jsx)(hi().a,{open:n,innerStyle:i.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)("div",{style:i.closeIconContainer,children:(0,oe.jsx)(Vt().p,{size:"sm",onClick:t,ignoreLocalHoverState:!0,children:(0,Vo().V)(i.closeIcon)})}),(0,oe.jsx)("div",{children:(0,Co().m)(i.modalIcon)}),(0,oe.jsxs)(ve().A,{style:i.title,children:[(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.title",defaultMessage:"Claim workspace"}),(0,oe.jsx)(Yo().A,{href:(0,Ye().xS)("guides.domainManagement"),children:(0,oe.jsx)($n().A,{icon:Hn().$})})]}),(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:i.description,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.byline",defaultMessage:"Youre about to take ownership of {currentWorkspaceName} and upgrade it to an Enterprise plan. Youll become the Workspace owner and the existing owners will be downgraded to members.",values:{currentWorkspaceName:s?s.name:"the workspace below"}})}),(0,oe.jsxs)("div",{style:i.workspaceContainer,children:[s?(0,oe.jsx)(Oo().H,{id:s.id,name:s.name,icon:s.icon,subscriptionTier:s.subscriptionTier,memberCount:s.memberCount}):null,(0,oe.jsx)("div",{style:i.checkContainer,children:(0,$o().b)(i.check)})]}),(0,oe.jsx)(Es().A,{size:"lg",style:i.primaryButton,onClick:async()=>{s&&await Tt().zo(s)},children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.reviewAndPay",defaultMessage:"Review and pay"})}),(0,oe.jsx)(Vt().p,{style:i.secondaryButton,onClick:t,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.cancel",defaultMessage:"Cancel"})})]})})}var el=()=>s(751735),tl=()=>s(73332);const sl=(0,f().YK)({emailPlaceholder:{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.placeholder",defaultMessage:"it@example.com"}});function il(e){let{onDismiss:t,spaceQueuedForDeletion:s,currentSpaceId:n}=e;const[r,o]=(0,i.useState)({email:void 0,didError:!1}),[d,c]=(0,i.useState)(!1),[u,g]=(0,i.useState)(!1),{setSpaceRequest:p}=(0,i.useContext)(Kn),m=(0,l().IS)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.palette.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.text.secondary},modalIcon:{fill:"dark"===e.mode?e.palette.red[700]:e.palette.red[500],height:24,width:24},title:{fontWeight:S().Wy.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:S().Wy.regular,textAlign:"center",fontSize:13,lineHeight:"16px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.icon.secondary,height:16,width:16},checkboxContainer:{display:"inline-flex",marginTop:8,alignItems:"center"},checkbox:{color:"dark"===e.mode?e.palette.gray[400]:e.palette.gray[200],marginRight:8},primaryButton:{width:"100%",marginTop:32,background:"dark"===e.mode?e.palette.red[700]:e.palette.red[500],justifyContent:"center",fontWeight:S().Wy.medium,color:pa().Ay.white},primaryButtonHovered:{background:"dark"===e.mode?(0,el().e$)(e.palette.red[700],.3):(0,el().e$)(e.palette.red[500],.3)},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:S().Wy.medium,color:e.text.tertiary},checkboxCaption:{color:e.text.secondary,textAlign:"center",fontSize:12},dividerContainer:{marginTop:18},divider:{borderBottomColor:e.regularDividerColor}})),[]),h=(0,a().v3)(),x=(0,i.useCallback)((()=>{o({email:void 0,didError:!1}),c(!1),g(!1),t()}),[t]),b=(0,i.useCallback)((e=>{o({didError:!1,email:e.target.value})}),[]),y=(0,i.useCallback)((()=>c((e=>!e))),[]),v=(0,i.useCallback)((async()=>{const e=(0,Ko().qh)(r.email);if(!(0,Ko().DT)(e))return void o({...r,didError:!0});if(!s)return;g(!0);const t=await q().callApi({eventName:"deleteSpaceForDomain",environment:h,data:{requestingSpaceId:n,targetSpaceId:s.id,contactEmail:e}});if("failed"===t.type)g(!1),j().f1((0,W().Hu)(E().A.getIntl(),t));else{const n=t.data.spaceDeletion;p(s.id,n),Bn().$3(h,{contactEmail:e,currentOwners:s.admins.map((e=>e.id)),targetSpaceId:s.id,verifiedDomain:s.creatorEmailDomain,targetSubscriptionTier:s.subscriptionTier}),x(),i=s.name,ta().D6({label:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.toast",defaultMessage:"Successfully deleted {spaceName}",values:{spaceName:i}})})}var i}),[x,r,n,h,p,s]),A=Boolean(s);return(0,oe.jsx)(hi().a,{open:A,innerStyle:m.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:x,render:()=>(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)("div",{style:m.closeIconContainer,children:(0,oe.jsx)(Vt().p,{size:"sm",onClick:x,ignoreLocalHoverState:!0,children:(0,Vo().V)(m.closeIcon)})}),(0,oe.jsx)("div",{children:(0,Vs().I)(m.modalIcon)}),(0,oe.jsxs)(ve().A,{style:m.title,children:[(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.title",defaultMessage:"Delete workspace"}),(0,oe.jsx)(Yo().A,{href:(0,Ye().xS)("guides.domainManagement"),children:(0,oe.jsx)($n().A,{icon:Hn().$})})]}),(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:m.description,children:s?(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.byline",defaultMessage:"Youre about to permanently delete {currentWorkspaceName} and all of its contents. The workspace owner will be notified.",values:{currentWorkspaceName:s.name}}):void 0}),(0,oe.jsxs)("div",{style:m.workspaceContainer,children:[s?(0,oe.jsx)(Oo().H,{id:s.id,name:s.name,icon:s.icon,subscriptionTier:s.subscriptionTier,memberCount:s.memberCount}):void 0,(0,oe.jsx)("div",{style:m.checkContainer,children:(0,$o().b)(m.check)})]}),(0,oe.jsx)(pi().A,{size:0,style:m.dividerContainer,innerStyle:m.divider}),(0,oe.jsx)(nl,{value:r.email,placeholder:E().A.formatMessage(sl.emailPlaceholder),onChange:b,labelMessage:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.title",defaultMessage:"Contact email"}),helpMessage:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.deleteWorkspaces.deletionModal.tooltipExplanation",defaultMessage:"The Workspace Owner of the deleted workspace can contact this email for inquiries"}),errorMessage:r.didError?(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.error",defaultMessage:"Invalid email address"}):void 0}),(0,oe.jsx)(Vt().p,{disabled:!d||!r.email||u,disabledFeedback:!0,size:"lg",style:m.primaryButton,hoveredStyle:m.primaryButtonHovered,onClick:v,children:u?(0,oe.jsx)(mi().A,{}):(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.deleteButton",defaultMessage:"Delete workspace"})}),(0,oe.jsxs)("div",{style:m.checkboxContainer,children:[(0,oe.jsx)(tl().T,{style:m.checkbox,size:14,checked:d,onClick:y}),(0,oe.jsx)(ve().A,{isSmall:!0,style:m.checkboxCaption,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.checkboxLabel",defaultMessage:"I'm sure I want to delete this workspace"})})]}),(0,oe.jsx)(Vt().p,{style:m.secondaryButton,onClick:x,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.cancel",defaultMessage:"Cancel"})})]})})}function nl(e){const t=(0,l().IS)((e=>({emailInputTitle:{fontWeight:S().Wy.medium,fontSize:14,marginBottom:8,display:"inline-flex",alignItems:"center"},emailContainer:{position:"relative",width:"100%",minHeight:56,marginTop:13},inputCaptionError:{color:e.errorText,marginTop:8,fontSize:13},helpIcon:{fill:e.icon.tertiary,marginLeft:4,height:16,width:16}})),[]);return(0,oe.jsxs)("div",{style:t.emailContainer,children:[(0,oe.jsxs)(ve().A,{style:t.emailInputTitle,children:[e.labelMessage,e.helpMessage&&(0,oe.jsx)(ye().A,{renderTooltip:()=>e.helpMessage,render:e=>(0,oe.jsx)("span",{...e,children:(0,Hn().$)(t.helpIcon)})})]}),(0,oe.jsx)($s().A,{value:e.value,placeholder:e.placeholder,onChange:e.onChange}),e.errorMessage&&(0,oe.jsx)(ve().A,{isSmall:!0,style:t.inputCaptionError,children:e.errorMessage})]})}function al(e){let{onDismiss:t,onAccept:s,spaceQueued:i,descriptionMessage:n,divider:a,modalIcon:r,title:o,acceptMessage:d,isLoading:c}=e;const u=(0,l().IS)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.palette.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.text.secondary},modalIcon:{height:24,width:24,fill:e.icon.secondary},title:{fontWeight:S().Wy.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:S().Wy.regular,textAlign:"center",fontSize:13,lineHeight:"16px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.icon.secondary,height:16,width:16},primaryButton:{width:"100%",marginTop:32,justifyContent:"center",fontWeight:S().Wy.medium},secondaryButton:{margin:"8px auto 0",width:"100%",justifyContent:"center",fontWeight:S().Wy.medium,color:e.text.tertiary},dividerContainer:{marginTop:18},divider:{borderBottomColor:e.regularDividerColor}})),[]),g=Boolean(i);return(0,oe.jsx)(hi().a,{open:g,innerStyle:u.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)("div",{style:u.closeIconContainer,children:(0,oe.jsx)(Vt().p,{size:"sm",onClick:t,ignoreLocalHoverState:!0,children:(0,Vo().V)(u.closeIcon)})}),r&&(0,oe.jsx)("div",{children:r(u.modalIcon)}),(0,oe.jsxs)(ve().A,{style:u.title,children:[o,(0,oe.jsx)(Yo().A,{href:(0,Ye().xS)("guides.domainManagement"),children:(0,oe.jsx)($n().A,{icon:Hn().$})})]}),(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:u.description,children:n}),(0,oe.jsxs)("div",{style:u.workspaceContainer,children:[i?(0,oe.jsx)(Oo().H,{id:i.id,name:i.name,icon:i.icon,subscriptionTier:i.subscriptionTier,memberCount:i.memberCount}):void 0,(0,oe.jsx)("div",{style:u.checkContainer,children:(0,$o().b)(u.check)})]}),a&&(0,oe.jsx)(pi().A,{size:0,style:u.dividerContainer,innerStyle:u.divider}),(0,oe.jsx)(Es().A,{size:"lg",style:u.primaryButton,onClick:s,disabled:c,children:c?(0,oe.jsx)(mi().A,{}):d}),(0,oe.jsx)(Vt().p,{style:u.secondaryButton,onClick:t,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.claimableSpaceConfirmationModal.cancel",defaultMessage:"Cancel"})})]})})}function rl(e){let{onDismiss:t,spaceQueuedForRecovery:s,currentSpaceId:n}=e;const{setSpaceRequest:r}=(0,i.useContext)(Kn),o=(0,a().v3)(),[l,d]=(0,i.useState)(!1),c=(0,i.useCallback)((()=>{d(!1),t()}),[t]),u=(0,i.useCallback)((async()=>{if(!n||!s)return;d(!0);const e=await q().callApi({eventName:"cancelSpaceDeletionForDomain",environment:o,data:{requestingSpaceId:n,targetSpaceId:s.id}});if("failed"===e.type)return d(!1),void j().f1((0,W().Hu)(E().A.getIntl(),e));var t;r(s.id,void 0),Bn().nY(o,{targetSpaceId:s.id,verifiedDomain:s.creatorEmailDomain}),c(),t=s.name,ta().D6({label:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.table.recoverSpace.toast",defaultMessage:"Successfully recovered {spaceName}",values:{spaceName:t}})})}),[r,n,o,s,c]);return(0,oe.jsx)(al,{onDismiss:c,onAccept:u,spaceQueued:s,modalIcon:Xn,title:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.title",defaultMessage:"Recover workspace"}),descriptionMessage:s?(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.byline",defaultMessage:"Restore workspace content and the workspace owner's access.",values:{currentWorkspaceName:s.name}}):void 0,acceptMessage:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.deleteButton",defaultMessage:"Recover"}),isLoading:l,divider:!1})}let ol=!1;function ll(e){let{spaceStore:t,subscriptionDataStore:s}=e;const{claimableSpaces:n,domainVerifications:r,loadingSpaces:d,errorClaimableSpaces:c,errorVerifications:u,navigateTo:g,removeClaimableSpace:h,loadMoreClaimableSpaces:x,tab:b,setSelectedTab:y,verifiedDomains:v}=(0,i.useContext)(Kn),A=(0,a().v3)(),C=(0,Ki().l)({spaceId:null==t?void 0:t.id}),w=(0,o().K8)((()=>!ko().A.state.open&&Boolean(ko().A.state.succeeded)),[]),[T,M]=(0,i.useState)(),[k,I]=(0,i.useState)(),[D,R]=(0,i.useState)(),[_,P]=(0,i.useState)(),B=(0,Mo().Y)(C,s);function U(){M(void 0),I(void 0),R(void 0),P(void 0)}(0,i.useEffect)((()=>{w&&T&&(h(T.id),M(void 0),ko().A.reset())}),[w,T,h,M]);const L=(0,p().bO)(C),O=(0,l().IS)((e=>({link:{fontSize:14,fontWeight:400,color:e.text.secondary,textDecoration:"none"},title:{marginTop:21,fontWeight:S().Wy.semibold,fontSize:17},byline:{fontSize:14,fontWeight:S().Wy.regular,color:e.text.secondary,marginRight:"auto",paddingRight:20},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"}})),[]);if((0,i.useEffect)((()=>{c?j().c1(c.message):u&&j().c1(u.message)}),[c,u]),c)return null;if(u)return null;const q=n.filter((e=>(0,jo().Av)(e.spaceRequest,e.memberCount))),W=n.filter((e=>!(0,jo().Av)(e.spaceRequest,e.memberCount))),E=[{id:"external-transfer",getIcon:e=>(0,Ao().X)({...e,height:14,width:14}),name:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.externalTransfer",defaultMessage:"Require account change"}),caption:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.externalTransferCaption",defaultMessage:"Owner will be prompted to change workspace ownership to a personal account."}),onAction:e=>I(e)},{id:"space-deletion",getIcon:e=>(0,Vs().I)({...e,height:14,width:14}),name:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace",defaultMessage:"Delete workspace"}),caption:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpaceCaption",defaultMessage:"Owner will lose access to the workspace immediately."}),onAction:e=>R(e),getDisabledState:e=>{const{isEligible:t}=dl(r,e.creatorEmailDomain);return!t||e.isDelinquent||e.isPendingBilling||!(0,m().dL)(e.subscriptionTier)},getTooltip:e=>{const t=dl(r,e.creatorEmailDomain);return t.isEligible?!(0,m().dL)(e.subscriptionTier)||e.isDelinquent||e.isPendingBilling?(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace.ineligibleTooltip",defaultMessage:"The workspace is ineligible for deletion."}):void 0:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace.disabledTooltip",defaultMessage:"You're in the 14-day notification period after verifying a domain.{br} This feature will be enabled in {numDays, plural, one {{numDays} day} other {{numDays} days}}.",values:{numDays:t.daysUntilEligible,br:(0,oe.jsx)("br",{})}})}},{id:"recover-space",getIcon:()=>{},name:(0,oe.jsx)(f().sA,{id:"identityAndProvisioning.claimWorkspaces.actions.recoverSpace",defaultMessage:"Recover"}),caption:void 0,onAction:e=>P(e)}],z=[{id:"claim-and-upgrade",getIcon:e=>(0,Co().m)({...e,height:14,width:14}),name:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimAndUpgrade",defaultMessage:"Claim and upgrade"}),caption:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimAndUpgradeCaption",defaultMessage:"Take ownership of the workspace and upgrade it to an Enterprise plan"}),onAction:e=>M(e),getDisabledState:e=>{const{isEligible:t}=dl(r,e.creatorEmailDomain);return L||!t||e.isDelinquent||e.isPendingBilling},getTooltip:e=>{const t=dl(r,e.creatorEmailDomain);return e.isDelinquent||e.isPendingBilling?(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimSpace.ineligibleTooltip",defaultMessage:"The workspace is ineligible for claiming."}):t.isEligible?void 0:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.actions.disabledTooltip",defaultMessage:"You're in the 14-day notification period after verifying a domain.{br} This feature will be enabled in {numDays, plural, one {{numDays} day} other {{numDays} days}}.",values:{numDays:t.daysUntilEligible,br:(0,oe.jsx)("br",{})}})}}];return(0,oe.jsxs)(Gt().Ay,{children:[(0,oe.jsx)(yi().A,{style:O.link,onClick:()=>g(Nn.SettingsPage),children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.breadcrumb",defaultMessage:" Identity & Provisioning"})}),(0,oe.jsx)(me().A,{large:!0,style:O.title,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.title",defaultMessage:"Manage workspaces"})}),(0,oe.jsxs)(Fr().fI,{children:[(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:O.byline,children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.byline",defaultMessage:"Claim verified-domain workspaces to your Enterprise plan or require Owners to use an external domain."})}),(0,oe.jsx)(Bt().A,{size:"lg",onClick:()=>{To().U6({environment:A,data:{spaceId:t.id,emailDomains:v}})},children:(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.exportClaimableWorkspaces.button",defaultMessage:"Export to CSV"})})]}),(0,oe.jsx)(ji().Ay,{tabs:[(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.singleSpaces",defaultMessage:"Single-member"},"single"),(0,oe.jsx)(f().sA,{id:"identityProvisioningSettings.claimWorkspaces.multiSpaces",defaultMessage:"Multi-member"},"multi")],selectedIndex:b,onChange:e=>y(e),style:O.tabBarMenu}),(0,oe.jsx)(Qo,{onDismiss:U,spaceQueuedForTransfer:k,currentSpaceId:t.id}),b===Gn.Single?(0,oe.jsx)(Go,{claimableSpaces:q,spaceActions:E,loadMoreClaimableSpaces:x,loading:d},"single"):(0,oe.jsx)(Go,{claimableSpaces:W,spaceActions:z,loadMoreClaimableSpaces:x,loading:d},"multi"),B?(0,oe.jsx)(Zo,{onDismiss:U,spaceQueuedForClaiming:T,requestingSpaceId:t.id}):(0,oe.jsx)(Xo,{onDismiss:U,spaceQueuedForClaiming:T}),(0,oe.jsx)(il,{onDismiss:U,spaceQueuedForDeletion:D,currentSpaceId:t.id}),(0,oe.jsx)(rl,{onDismiss:U,spaceQueuedForRecovery:_,currentSpaceId:t.id})]})}function dl(e,t){if(ol)return{isEligible:!0};const s=e.find((e=>{let{domain:s}=e;return t===s}));if(!s||!s.verified_at)return{isEligible:!0};const i=(Date.now()-s.verified_at)/wo().nD;return i>=14?{isEligible:!0}:{isEligible:!1,daysUntilEligible:Math.ceil(14-i)}}function cl(e){let{userStore:t,spaceStore:s,samlConfigStore:n,domainSettingsStore:a}=e;const{page:r}=(0,i.useContext)(Kn);switch(r){case Nn.SettingsPage:return(0,oe.jsx)(yo,{userStore:t,spaceStore:s,samlConfigStore:n,domainSettingsStore:a});case Nn.WorkspacesPage:return(0,oe.jsx)(ll,{spaceStore:s,subscriptionDataStore:Zi().subscriptionDataStoreInstance});case Nn.ManagedUsersPage:return(0,oe.jsx)(er,{spaceStore:s,samlConfigStore:n})}}["local","development","staging"].includes("production")&&(0,s(604341).exposeDebugValue)("bypassDomainVerificationWaitingPeriod",(function(){ol=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}));const ul=function(e){let{userStore:t,spaceStore:s,samlConfigStore:i,domainSettingsStore:n}=e;return(0,oe.jsx)(Vn,{spaceStore:s,samlConfigStore:i,domainSettingsStore:n,children:(0,oe.jsx)(cl,{userStore:t,spaceStore:s,samlConfigStore:i,domainSettingsStore:n})})};var gl=()=>s(98219),pl=()=>s(863569),ml=()=>s(899687),fl=()=>s(789148),hl=()=>s(942906),Sl=()=>s(113474);function xl(e){let{isMobile:t}=e;const s=(0,a().v3)(),i=E().A.getIntl(),n=(0,o().K8)((()=>ut().default.state.currentUserSettingsStore),[]),{currentTimeZone:r,auto_update_disabled:l}=(0,o().K8)((()=>{const e=null==n?void 0:n.getSettings();return{currentTimeZone:null!=e&&e.time_zone&&(0,fl().PJ)(null==e?void 0:e.time_zone)?e.time_zone:void 0,auto_update_disabled:null==e?void 0:e.disable_auto_set_timezone}}),[n]),d=!l||!r;return n?(0,oe.jsx)(Xs().A,{isMobile:t,type:"timezonePicker",currentTimeZone:r,title:(0,oe.jsx)(f().sA,{id:"dateAndTimeSettings.timeZone.title",defaultMessage:"Timezone"}),caption:(0,oe.jsx)(f().sA,{id:"dateAndTimeSettings.timeZone.caption",defaultMessage:"Current timezone setting."}),renderOrigin:e=>(0,oe.jsx)(Sl()._,{focused:!1,disabled:d,buttonStyle:{width:void 0,margin:0},title:r?(0,ml().Dy)(i,r):(0,oe.jsx)(f().sA,{id:"dateAndTimeSettings.timeZone.error",defaultMessage:"Error finding timezone"}),...e}),disabled:d,onSelect:e=>{hl().Lj({environment:s,userSettingsStore:n,timeZone:e})}}):null}function bl(e){let{isMobile:t}=e;const s=(0,a().v3)(),n=(0,o().K8)((()=>ut().default.state.currentUserSettingsStore),[]),r=(0,o().K8)((()=>{var e;return null==n||null===(e=n.getSettings())||void 0===e?void 0:e.disable_auto_set_timezone}),[n])??!1,l=(0,i.useCallback)((e=>{const t=!r;hl().W2({environment:s,userSettingsStore:e,disableAutoSetTimezone:t}),t||hl().xw({environment:s,userSettingsStore:e})}),[s,r]),d=(0,oe.jsx)(f().sA,{id:"dateAndTimeSettings.autoTimeZone.title",defaultMessage:"Set timezone automatically using your location"}),c=(0,oe.jsx)(f().sA,{id:"dateAndTimeSettings.autoTimeZone.caption",defaultMessage:"Reminders, notifications and emails are delivered based on your time zone."});return(n&&(0,oe.jsx)(Xs().A,{isMobile:t,title:d,caption:c,type:"toggle",isOn:!r,onToggle:()=>l(n)}))??null}var yl=()=>s(89244),vl=()=>s(537296),jl=()=>s(857639),Al=()=>s(668725),Cl=()=>s(502800),wl=()=>s(700250),Tl=()=>s(760217);const Ml=function(e){const[t,n]=i.useState([]),[r,d]=i.useState([]),c=(0,a().v3)(),u=(0,o().uB)(void 0,fa().A),g=(0,l().IS)((e=>({plainButton:{paddingLeft:8,paddingRight:8,marginLeft:-8},icon:{width:10,marginLeft:4,fill:e.icon.tertiary}})),[]);function p(e){return r.some((t=>t.code===e.code))}(0,i.useEffect)((()=>{const e=c.SpellCheckStore;e&&(e.getAvailableLanguages().then(n).catch((e=>{jl().log({level:"error",from:"SpellcheckerLanguagesPicker",type:"getAvailableLanguages",error:(0,Cl().convertErrorToLog)(e)})})),e.getLanguages().then(d).catch((e=>{jl().log({level:"error",from:"SpellcheckerLanguagesPicker",type:"getLanguages",error:(0,Cl().convertErrorToLog)(e)})})))}),[c]),(0,i.useEffect)((()=>{const e=c.SpellCheckStore;if(!e)return;const t=r.map((e=>{let{code:t}=e;return t}));e.setLanguages(t)}),[r,c.SpellCheckStore]);const m=r.length>0?r.slice(0,3).map((e=>{let{name:t}=e;return t})).join(", ")+(r.length>3?"":""):(0,oe.jsx)(f().sA,{id:"languageRegionSettings.spellchecker.picker.label",defaultMessage:"Select languages"});return(0,oe.jsx)(Sa().Ay,{popupType:Sa().z7.Popup,buttonPopupStore:u,renderOrigin:e=>(0,oe.jsxs)(Vt().p,{style:g.plainButton,...e,children:[m,(0,Al().b)(g.icon)]}),placementToOrigin:wl().UV.Bottom,alignmentToOrigin:wl().MY.Start,render:e=>{const i=[{key:"spellcheckerlanguages",render:e=>(0,oe.jsx)(va().A,{...e,topBorder:0!==e.index}),items:t.map((e=>{const t={key:e.code,render:t=>function(e){const t=e.language.name||e.language.code;return(0,oe.jsx)(Tl().A,{...e.props,title:(0,oe.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,oe.jsx)("div",{style:{marginRight:0},children:t})}),shouldWrapCaption:!0,right:p(e.language)?(0,s(982615).$)({width:12,height:12}):void 0})}({language:e,props:t}),action:()=>{p(e)?d(r.filter((t=>t.code!==e.code))):d([...r,e])}};return t}))}],n={menuType:ma().gu.Popup,width:240};return(0,oe.jsx)(xa().A,{className:Ve().jtA,...n,children:(0,oe.jsx)(ba().Ay,{type:ba().Oh.Vertical,initialFocus:void 0,sections:i})})}})};const kl=function(e){const t=(0,a().v3)();return t.device.isElectron&&t.device.isWindows?(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(pi().A,{size:24,isHidden:!0}),(0,oe.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto"},children:(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",width:"100%"},children:[(0,oe.jsxs)("div",{style:{flex:1},children:[(0,oe.jsx)(ve().A,{children:(0,oe.jsx)(f().sA,{id:"languageRegionSettings.spellchecker.label",defaultMessage:"Spellchecker languages"})}),(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,oe.jsx)(f().sA,{id:"languageSettings.spellcheckerSwitcher.subtitle",defaultMessage:"Change the languages used by the spellchecker."})})]}),(0,oe.jsx)(Ml,{})]})})]}):null};function Il(){const e=(0,o().K8)((()=>ut().default.state.currentUserSettingsStore),[]),t=(0,o().K8)((()=>{var t;return(null==e||null===(t=e.getSettings())||void 0===t?void 0:t.preferred_locale)||Ua().q}),[e]),s=(0,a().v3)(),{isMobile:i}=(0,a().Y0)(),n=(0,o().K8)((()=>(0,ss().xu)(s)),[s]);if(!e)return null;const r=[{key:"timezone-auto",renderSettingsItem:()=>(0,oe.jsx)(bl,{isMobile:i})},{key:"timezone-manual",renderSettingsItem:()=>(0,oe.jsx)(xl,{isMobile:i})}].filter(_s().O9);return n?(0,oe.jsxs)("div",{style:{paddingTop:48},children:[(0,oe.jsx)(me().A,{large:!0,divider:"full",children:(0,oe.jsx)(f().sA,{id:"languageSettings.languageAndTimeSection.title",defaultMessage:"Language & Time"})}),(0,oe.jsx)(yl().A,{locale:t,userSettingsStore:e}),(0,oe.jsx)(kl,{}),(0,oe.jsx)(pi().A,{size:18,isHidden:!0}),(0,oe.jsx)(pl().A,{}),(0,oe.jsx)(pi().A,{size:18,isHidden:!0}),(0,oe.jsx)(vl().U,{items:r})]}):(0,oe.jsxs)(Gt().Ay,{children:[(0,oe.jsx)(me().A,{large:!0,divider:"full",children:(0,oe.jsx)(f().sA,{id:"languageSettings.languageSection.title",defaultMessage:"Language & region"})}),(0,oe.jsx)(yl().A,{locale:t,userSettingsStore:e}),(0,oe.jsx)(kl,{}),(0,oe.jsx)(pi().A,{size:24}),(0,oe.jsx)(pl().A,{})]})}const Dl=new(Le().O2)("SpaceProfileSettings",(()=>s.e(30001).then(s.bind(s,371110)))),Rl=(0,Le()._h)(Dl,(e=>e.SpaceProfileSettings));var _l=()=>s(739793),Pl=()=>s(239837),Bl=()=>s(878079),Ul=()=>s(332381),Ll=()=>s(388450);function Ol(){const{isElectron:e,isElectronMac:t,isMobile:s,desktopAppId:i}=(0,a().Y0)(),n=(0,a().v3)(),r=(0,o().K8)((()=>(0,Bl().Z5)()),[]),l=(0,o().K8)((()=>(0,ss().xu)(n)),[n]),d=(0,o().K8)((()=>{const n=(0,Bl().fb)();return function(e){const{isMobile:t,isElectron:s,isElectronMac:i,desktopAppId:n,slackFeatureGateChecks:{showSlackNotificationSetting:a,showNotionActivityNotificationsToSlackSetting:r}}=e,o=!t&&s,l=o&&i&&Boolean(n),d=s&&(0,Pl().M5)();return[t?{key:"notify_mobile",renderSettingsItem:()=>(0,oe.jsx)(Ul().L,{target:"notify_mobile"})}:void 0,o?{key:"notify_desktop",renderSettingsItem:()=>(0,oe.jsx)(Ul().L,{target:"notify_desktop"})}:void 0,d?{key:"disable_ai_meeting_notes_audio_process_detection_notification",renderSettingsItem:()=>(0,oe.jsx)(Ul().L,{target:"disable_ai_meeting_notes_audio_process_detection_notification"})}:void 0,l?{key:"desktop_badge",renderSettingsItem:()=>(0,oe.jsx)(Ul().L,{target:"desktop_badge"})}:void 0,a&&!r?{key:"notify_slack",renderSettingsItem:()=>(0,oe.jsx)(Ll().R,{target:"notify_slack"})}:void 0].filter(_s().O9)}({isMobile:s,isElectron:e,isElectronMac:t,desktopAppId:i,slackFeatureGateChecks:{showSlackNotificationSetting:n,showNotionActivityNotificationsToSlackSetting:r}})}),[s,e,t,i,r]),c=(0,o().K8)((()=>{var e;const t=(0,Bl().fb)();return function(e){const{isSlackNotificationSettingEnabled:t,showSlackNotificationSetting:s,showNotionActivityNotificationsToSlackSetting:i}=e;if(!s||!i)return[];return[{key:"notify_slack",renderSettingsItem:()=>(0,oe.jsx)(Ll().R,{target:"notify_slack"})},t?{key:"notify_slack_all_activity",renderSettingsItem:()=>(0,oe.jsx)(Ll().R,{target:"notify_slack_all_activity"})}:void 0,t?{key:"notify_slack_mention",renderSettingsItem:()=>(0,oe.jsx)(Ll().R,{target:"notify_slack_mention"})}:void 0].filter(_s().O9)}({isSlackNotificationSettingEnabled:Boolean(null===(e=ut().default.state.currentSpaceViewStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.notify_slack),showSlackNotificationSetting:t,showNotionActivityNotificationsToSlackSetting:r})}),[r]),u=(0,o().K8)((()=>{var e;return function(e){const{showNotifyEmailAlwaysSetting:t}=e;return[{key:"notify_email",renderSettingsItem:()=>(0,oe.jsx)(Ul().L,{target:"notify_email"})},t?{key:"notify_email_always",renderSettingsItem:()=>(0,oe.jsx)(Ul().L,{target:"notify_email_always"})}:void 0,{key:"notify_email_digest",renderSettingsItem:()=>(0,oe.jsx)(Ul().L,{target:"notify_email_digest"})},{key:"notify_home_digest_email",renderSettingsItem:()=>(0,oe.jsx)(Ul().L,{target:"notify_home_digest_email"})},{key:"marketing_emails",renderSettingsItem:()=>(0,oe.jsx)(Ul().L,{target:"marketing_emails"})}].filter(_s().O9)}({showNotifyEmailAlwaysSetting:(null===(e=ut().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getNotifyEmail())||!1})}),[]),g=(0,o().K8)((()=>n.WindowSizeStore.state.paddingBottomCSS),[n.WindowSizeStore]);return(0,oe.jsxs)(Gt().Ay,{children:[d.length>0?(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(me().A,{large:!s,divider:"full",children:l?(0,oe.jsx)(f().sA,{id:"notificationSettings.notificationsSection.title.v2",defaultMessage:"Notifications"}):(0,oe.jsx)(f().sA,{id:"notificationSettings.notificationsSection.title",defaultMessage:"My notifications"})}),(0,oe.jsx)(vl().U,{items:d}),(0,oe.jsx)(pi().A,{size:48,isHidden:!0})]}):void 0,r?(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(me().A,{large:!s,divider:"full",children:(0,oe.jsx)(f().sA,{id:"notificationSettings.slackNotificationsSection.title",defaultMessage:"Slack notifications"})}),(0,oe.jsx)(vl().U,{items:c}),(0,oe.jsx)(pi().A,{size:48,isHidden:!0})]}):void 0,(0,oe.jsx)(me().A,{large:!s,divider:"full",children:(0,oe.jsx)(f().sA,{id:"notificationSettings.emailNotificationsSection.title",defaultMessage:"Email notifications"})}),(0,oe.jsx)(vl().U,{items:u}),(0,oe.jsx)(pi().A,{size:48,isHidden:!0}),(0,oe.jsx)("div",{style:{marginTop:4,marginBottom:s?g:void 0},children:(0,oe.jsx)(zs().A,{title:(0,oe.jsx)(f().sA,{id:"myNotificationSettings.helpButton.caption",defaultMessage:"Learn about notifications"}),href:(0,Ye().xS)("guides.notificationSettings"),analyticsFrom:"notifications_settings"})})]})}var ql=()=>s(471327);const Wl={whiteSpace:"normal",paddingTop:5,paddingBottom:5,height:"auto"};function El(e){const t=(0,a().v3)(),{onView:s}=e,n=(0,f().tz)();(0,i.useEffect)((()=>{s(t)}),[t,s]);const r=n.formatMessage({id:"settingsPrompt.learnMore.button",defaultMessage:"Learn more"});return(0,oe.jsxs)("div",{children:[(0,oe.jsx)(pi().A,{size:0}),(0,oe.jsx)(ql().X,{icon:e.icon,title:e.title,description:e.descriptionMessage,onDismiss:e.onDismiss,primaryAction:{text:e.buttonText,onClick:t=>(e.onDismiss(),e.onClick(t)),ariaLabel:e.buttonAriaLabel},secondaryAction:{icon:e=>(0,Hn().$)(e),text:r,ariaLabel:r,onClick:e.onClickLearnMore},customPrimaryButtonStyles:Wl})]})}const zl=function(e){const t=(0,l().IS)((t=>({style:{display:"flex",height:"100%",flexDirection:e.isReversed?"row-reverse":"row"},sidebarStyle:{height:"100%",background:t.cardSidebarBackground,flexGrow:0,flexShrink:0,width:240,overflowY:"auto"},childrenStyle:{flexGrow:1,position:"relative",zIndex:1,height:"100%",overflow:"hidden"}})),[e.isReversed]);return(0,oe.jsxs)("div",{style:t.style,onMouseDown:e.onMouseDown,onClick:e.onClick,onDoubleClick:e.onDoubleClick,onContextMenu:e.onContextMenu,tabIndex:-1,role:"presentation",children:[(0,oe.jsx)("div",{style:t.sidebarStyle,children:e.sidebar}),(0,oe.jsx)("div",{style:t.childrenStyle,role:e.contentRole,"aria-labelledby":e.contentLabelledBy,id:e.contentId,children:e.children})]})};var Fl=()=>s(76590),Nl=()=>s(593467),Gl=()=>s(591779),Kl=()=>s(301608),Vl=()=>s(5347),Hl=()=>s(452864),$l=()=>s(305961),Yl=()=>s(687646),Jl=()=>s(997583),Ql=()=>s(249117),Zl=()=>s(655546),Xl=()=>s(175458),ed=()=>s(733815);const td=640;function sd(e){let{data:t,loading:s,error:n,daysFilter:r,setDaysFilter:o}=e;const[d,c]=(0,Jl().z)(),u=(0,l().IS)((e=>({title:{fontWeight:S().Wy.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:1},titleText:{flexShrink:1},infoIcon:{marginLeft:4,flexShrink:0},container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{pageViews:g,uniquePageViews:p,pagesCreated:m,pageEdits:h}=t,x=(0,a().v3)(),b=(0,i.useCallback)((e=>{Fl().Y5(x,{daysFilter:e}),o(e)}),[x,o]);return(0,oe.jsxs)("div",{style:u.container,ref:d,children:[(0,oe.jsxs)("div",{style:u.titleContainer,children:[(0,oe.jsxs)(ve().A,{style:u.title,children:[(0,oe.jsx)("div",{style:u.titleText,children:(0,oe.jsx)(f().sA,{id:"workspaceAnalytics.content.contentEngagement.title",defaultMessage:"Content engagement"})}),(0,oe.jsx)(ye().A,{placement:Ae().W.Bottom,render:e=>(0,oe.jsx)(zs().A,{...e,href:(0,Ye().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:u.infoIcon}),renderTooltip:()=>"all_time"!==r?(0,oe.jsx)(f().sA,{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.lastDays",defaultMessage:"Activity on all workspace pages (includes private and shared) over the {dateRange}",values:{dateRange:E().A.formatMessage(Kl().Yr[r])}}):(0,oe.jsx)(f().sA,{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.allTime",defaultMessage:"All time activity on all pages in the workspace (includes private and shared)"})})]}),(0,oe.jsx)(ed().Z,{currentFilter:r,onChangeFilter:b})]}),(0,oe.jsxs)(Ql().xA,{gap:16,children:[(0,oe.jsx)(Ql().LX,{row:1,col:1,children:(0,oe.jsx)(Xl().a,{style:u.cardContainer,textStyles:u.cardTextContainer,loading:s,error:n,icon:$l().d,iconStyles:{height:48,width:48},title:(0,oe.jsx)(f().sA,{id:"workspaceAnalytics.content.contentEngagement.totalViews",defaultMessage:"{pageViews} total views",values:{pageViews:(0,oe.jsx)(Zl()._,{abbreviateNumber:c<td,num:g})}}),byline:(0,oe.jsx)(ve().A,{isSecondaryColor:!0,children:(0,oe.jsx)(f().sA,{id:"workspaceAnalytics.content.contentEngagement.uniqueViews",defaultMessage:"{uniquePageViews, plural, one {{uniquePageViews} unique page viewed} other {{uniquePageViews} unique pages viewed}}",values:{uniquePageViews:(0,oe.jsx)(Zl()._,{abbreviateNumber:c<td,num:p})}})})})}),(0,oe.jsx)(Ql().LX,{row:1,col:2,children:(0,oe.jsx)(Xl().a,{style:u.cardContainer,textStyles:u.cardTextContainer,loading:s,error:n,icon:Yl().k,iconStyles:{height:36,width:36},title:(0,oe.jsx)(f().sA,{id:"workspaceAnalytics.content.contentEngagement.pagesCreated",defaultMessage:"{pagesCreated} pages created",values:{pagesCreated:(0,oe.jsx)(Zl()._,{abbreviateNumber:c<td,num:m})}}),byline:(0,oe.jsx)(ve().A,{isSecondaryColor:!0,children:(0,oe.jsx)(f().sA,{id:"workspaceAnalytics.content.contentEngagement.pageEdits.byline",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,oe.jsx)(Zl()._,{abbreviateNumber:c<td,num:h})}})})})})]})]})}var id=()=>s(108944),nd=()=>s(994776),ad=()=>s(773290),rd=()=>s(882690);const od=(0,f().YK)({views:{id:"workspaceAnalytics.contentTab.contentTable.viewsColumn.tooltip",defaultMessage:"Number of times users have viewed the page"},uniqueViews:{id:"workspaceAnalytics.contentTab.contentTable.uniqueViewsColumn.tooltip",defaultMessage:"Total number of users that have viewed page in the selected period"}}),ld={id:"page",headerTitle:(0,oe.jsx)(Sd,{message:Kl().bo.page}),renderCell:e=>(0,oe.jsx)(s(744766).oc,{blockStore:e.navigableBlockStore,rightIcon:(0,oe.jsx)(s(663484).r,{blockStore:e.navigableBlockStore})}),widthData:{width:320,maxWidth:320},sortable:!1},dd={id:"location",headerTitle:(0,oe.jsx)(f().sA,{id:"settings.workspaceAnalytics.contentTab.allPages.table.location.name",defaultMessage:"Location"}),renderCell:e=>(0,oe.jsx)(s(421645).E,{blockStore:e.navigableBlockStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},cd={id:"audience",headerTitle:(0,oe.jsx)(Sd,{message:Kl().bo.audience}),renderCell:e=>(0,oe.jsx)(ve().A,{children:(0,s(592010).Z)(e.audience)}),widthData:{width:140},sortable:!1},ud={id:"views",headerTitle:(0,oe.jsx)(rd().Z,{tooltipMessageDescriptor:od.views,columnHeader:Kl().bo.allViews}),renderCell:e=>(0,oe.jsx)(ve().A,{children:e.views.toLocaleString()}),widthData:{width:100},sortable:!0},gd={id:"uniqueViews",headerTitle:(0,oe.jsx)(rd().Z,{tooltipMessageDescriptor:od.uniqueViews,columnHeader:Kl().bo.uniqueViews}),renderCell:e=>(0,oe.jsx)(ve().A,{children:e.uniqueViews.toLocaleString()}),widthData:{width:100},sortable:!0},pd={id:"createdBy",headerTitle:(0,oe.jsx)(Sd,{message:Kl().bo.createdBy}),renderCell:e=>e.createdById?(0,oe.jsx)(ad().T,{blockStore:e.navigableBlockStore,userIds:[e.createdById]}):null,widthData:{width:140},sortable:!1},md={id:"createdTime",headerTitle:(0,oe.jsx)(Sd,{message:Kl().bo.createdAt}),renderCell:e=>(0,oe.jsx)(oa().d,{dateTs:e.createdTime}),widthData:{width:100},sortable:!1},fd=[ld,ud,gd,dd,cd,{id:"lastEditedBy",headerTitle:(0,oe.jsx)(Sd,{message:Kl().bo.lastEditedBy}),renderCell:e=>e.lastEditedById?(0,oe.jsx)(ad().T,{blockStore:e.navigableBlockStore,userIds:[e.lastEditedById]}):null,widthData:{width:140},sortable:!1},{id:"lastEditedTime",headerTitle:(0,oe.jsx)(Sd,{message:Kl().bo.lastEditedAt}),renderCell:e=>(0,oe.jsx)(oa().d,{dateTs:e.lastEditedTime}),widthData:{width:100},sortable:!1},pd,md];function hd(e){let{navigableBlockStores:t,analyticsByPageId:s,runNewSearch:n,sort:a,setSort:r,loadNextPage:d,loading:c,error:u}=e;const g=(0,o().K8)((()=>t.map((e=>{var t,i,n;return{id:e.id,isClickable:!1,navigableBlockStore:e,teamStore:(0,id().Uo)(e),views:(null===(t=s.get(e.id))||void 0===t?void 0:t.pageViews)||0,uniqueViews:(null===(i=s.get(e.id))||void 0===i?void 0:i.uniquePageViews)||0,createdTime:e.getCreatedTime(),lastEditedTime:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById(),audience:(null===(n=s.get(e.id))||void 0===n?void 0:n.audience)||"private"}}))),[t,s]),p=(0,i.useMemo)((()=>function(e){const t=fd.find((t=>"pageViews"===e.field&&"views"===t.id||"uniquePageViews"===e.field&&"uniqueViews"===t.id)),s=t?{column:t,sortAscending:"asc"===e.direction}:void 0;return s}(a)),[a]),m=(0,l().IS)((e=>(0,xe().rC)({columnRenderInfo:fd,theme:e,containerMarginTop:0})),[]),h=(0,l().IS)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return u?(0,oe.jsx)(nd().t,{error:u,runNewSearch:n}):(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(xe().WE,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:fd,rows:g,sortState:p,onSortStateChanged:e=>{r(function(e){const t="views"===e.column.id?"pageViews":"uniquePageViews",s=e.sortAscending?"asc":"desc";return{field:t,direction:s}}(e))},loadMoreMethod:{type:"scroll",onLoadMore:d},renderNoRowsComponent:()=>(0,oe.jsx)(ve().A,{isSmall:!0,style:h.emptyQuery,children:!c&&0===t.length&&(0,oe.jsx)(f().sA,{id:"settings.workspaceAnalytics.contentTab.allPages.table.empty",defaultMessage:"No pages found with your query."})}),styles:m}),c?(0,oe.jsx)(mi().A,{style:h.loadingSpinner}):null]})}function Sd(e){let{message:t}=e;const s=(0,f().tz)();return(0,oe.jsx)(oe.Fragment,{children:s.formatMessage(t)})}var xd=()=>s(179034);const bd={query:"",createdBy:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[]},yd={field:"pageViews",direction:"desc"},vd=Nl().Jb,jd={filters:bd,sort:yd,timeRange:vd,navigableBlockIds:[],analyticsByPageId:new Map,numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};function Ad(e){let{spaceStore:t,teamStores:s,timeRange:n,filters:a,runNewSearch:r,setFilters:d,setTimeRange:c}=e;const u=(0,Ls().uJ)({spaceStore:t}),g=(0,i.useMemo)((()=>((null==u?void 0:u.teams)??[]).map((e=>e.store))),[u]),p=(0,Ls().qQ)(t),m=(0,Ls().D5)(),h=(0,i.useMemo)((()=>m?g:p),[g,p,m]),S=(0,o().K8)((()=>s??h),[s,h]),x=(0,l().IS)((e=>({container:{width:"100%",margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItems:"center"},timeRangeContainer:{display:"flex",flexDirectionRow:"row",alignItems:"center",justifyContent:"center",gap:4,borderRight:`1px solid ${e.tableDividerColor}`,marginRight:12,paddingRight:6}})),[]);return(0,oe.jsxs)("div",{style:x.container,children:[(0,oe.jsx)(an().nv,{mode:an().Ke.OnChange,query:a.query,setQueryFilter:function(e){d({query:e},{runSearchAfter:!0})},placeholderText:E().A.formatMessage(an().Jj.titleOnlyPlaceholder)}),(0,oe.jsxs)("div",{style:x.filterPillsContainer,children:[(0,oe.jsxs)("div",{style:x.timeRangeContainer,children:[(0,oe.jsx)(ve().A,{isSecondaryColor:!0,children:(0,oe.jsx)(f().sA,{id:"settings.workspaceAnalytics.contentTab.timeRange",defaultMessage:"Views from"})}),(0,oe.jsx)(ed().Z,{currentFilter:n,onChangeFilter:c})]}),(0,oe.jsx)(mn().j,{selectedTeamIds:a.teamIds,setSelectedTeamIds:function(e){d({teamIds:e})},onMenuClose:r,teamStores:S}),(0,oe.jsx)(ln().Q,{spaceStore:t,createdByFilterIds:a.createdBy,setCreatedByFilter:function(e){d({createdBy:e})},runNewSearch:r,includeGuests:!1}),(0,oe.jsx)(dn().Z,{lastEditedTime:a.lastEditedTime,createdTime:a.createdTime,setLastEditedTime:function(e){d({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){d({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}})]})]})}function Cd(e){var t;let{spaceStore:s,teamStores:n,contentEngagement:r}=e;const d=(0,Gl().ZC)(s.id),c=(0,i.useRef)(!1),{loadNextPage:u,navigableBlockStores:g,analyticsByPageId:p,runNewSearch:m,setFilters:f,setTimeRange:S,timeRange:x,filters:b,sort:y,setSort:v,loading:j,error:A}=function(e){let{spaceStore:t}=e;const s=(0,a().v3)(),[n,r]=(0,i.useState)(jd),o=(0,i.useRef)(bd),l=(0,i.useRef)(yd),d=(0,i.useRef)(vd),c=(0,i.useCallback)((async e=>{let{fetchFromFirstPage:i,ignoreSearchInputComparison:a}=e;const c=!h().n4(n.filters,o.current)||!h().n4(n.sort,l.current)||!h().n4(n.timeRange,d.current);if(!a&&!c)return;o.current=n.filters,l.current=n.sort,d.current=n.timeRange;let u=n.loading,g=n.error,p=n.hasNextPage,m=n.paginationToken;if(i&&(r((e=>({...jd,filters:e.filters,timeRange:e.timeRange,sort:e.sort}))),u=jd.loading,g=jd.error,p=jd.hasNextPage,m=jd.paginationToken),!p||u)return;if(g)return;r((e=>({...e,loading:!0})));const f=await q().callApi({eventName:"loadContentAnalytics",environment:s,data:{spaceId:t.id,sort:n.sort,titleQuery:n.filters.query,filters:{inTeams:n.filters.teamIds,lastEditedTime:(0,re().ES)(n.filters.lastEditedTime),createdTime:(0,re().ES)(n.filters.createdTime),createdBy:n.filters.createdBy},timeRange:n.timeRange,startCursor:m}});if("failed"===f.type)return void r((e=>({...e,loading:!1,error:f.error})));const S=f.data.results;r((e=>{const t=[],s=new Set(e.navigableBlockIds),i=new Map(e.analyticsByPageId);for(const a of S){const e=a.id,n=a.analytics;s.has(e)||(t.push(e),i.set(e,n))}const n=[...e.navigableBlockIds,...t];return{...e,navigableBlockIds:n,analyticsByPageId:i,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:f.data.nextCursor,hasNextPage:Boolean(f.data.nextCursor)}}))}),[s,t,n.filters,n.sort,n.timeRange,n.loading,n.error,n.hasNextPage,n.paginationToken]),u=(0,i.useMemo)((()=>n.navigableBlockIds.map((e=>new(ae().Bv)(s,{id:e,table:xd().ev})))),[n.navigableBlockIds,s]);(0,i.useEffect)((()=>{n.shouldReRunSearch&&(r((e=>({...e,shouldReRunSearch:!1}))),c({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[n.shouldReRunSearch,c]);const g=(0,i.useCallback)((async()=>{n.shouldReRunSearch||await c({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[n.shouldReRunSearch,c]),p=(0,i.useCallback)((async e=>{await c({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[c]),m=(0,i.useCallback)(((e,t)=>{r((s=>({...s,filters:{...s.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})));for(const i of(0,_s().uv)(e))h().n4(e[i],bd[i])||Fl().Tm(s,{filter:i,value:"createdBy"===i||"teamIds"===i?e[i]:void 0})}),[s]),f=(0,i.useCallback)((e=>{r((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),Fl().$s(s,{daysFilter:e})}),[s]),S=(0,i.useCallback)((e=>{r((t=>({...t,sort:e,shouldReRunSearch:!0}))),Fl().PH(s,{column:e.field,isAscending:"asc"===e.direction})}),[s]);return{filters:n.filters,sort:n.sort,timeRange:n.timeRange,analyticsByPageId:n.analyticsByPageId,loading:n.loading,error:n.error,navigableBlockStores:u,loadNextPage:g,runNewSearch:p,setFilters:m,setTimeRange:f,setSort:S}}({spaceStore:s}),C=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:16}})),[]),w=(0,o().K8)((()=>{const e=R().default.checkGate({gateName:"allow_space_member_to_export_analytics"});return Boolean(s.canAdmin())||e&&s.canRead()}),[s]),T=(0,i.useMemo)((()=>void 0!==d&&s.id!==d),[s.id,d]);(0,i.useEffect)((()=>{c.current&&!T||(m(!0),c.current=!0)}),[m,T]);const M=(0,o().K8)((()=>s.getName()),[s]);if("NotFoundError"===(null==r||null===(t=r.error)||void 0===t?void 0:t.name))return(0,oe.jsx)(Hl().H,{type:"empty",spaceName:M});const k={...b,daysFilter:x,lastEditedTime:(0,re().ES)(b.lastEditedTime),createdTime:(0,re().ES)(b.createdTime)};return(0,oe.jsxs)("div",{style:C.container,children:[(0,oe.jsx)(sd,{data:r.data,loading:r.loading,error:r.error,daysFilter:r.daysFilter,setDaysFilter:r.setDaysFilter}),(0,oe.jsx)(wd,{canExport:w,filters:k}),(0,oe.jsx)(Ad,{spaceStore:s,teamStores:n,runNewSearch:m,setFilters:f,filters:b,timeRange:x,setTimeRange:S}),(0,oe.jsx)(hd,{navigableBlockStores:g,analyticsByPageId:p,runNewSearch:m,sort:y,setSort:v,loadNextPage:u,loading:j,error:A})]})}function wd(e){const t=(0,l().IS)((()=>({sectionTitle:{fontWeight:S().Wy.semibold,fontSize:16},sectionTitleSection:{display:"flex",flexFlow:"row",alignItems:"center"},helpInfo:{marginLeft:4},wrapper:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:12},exportButton:{marginLeft:5}})),[]),{canExport:s,filters:i}=e,{daysFilter:n}=i,a=(0,oe.jsxs)("div",{style:t.sectionTitleSection,children:[(0,oe.jsx)(ve().A,{style:t.sectionTitle,children:(0,oe.jsx)(f().sA,{id:"settings.workspaceAnalytics.contentTab.allPages.title",defaultMessage:"Pages"})}),(0,oe.jsx)(ye().A,{placement:Ae().W.Bottom,render:e=>(0,oe.jsx)(zs().A,{...e,href:(0,Ye().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:t.helpInfo}),renderTooltip:()=>"all_time"!==n?(0,oe.jsx)(f().sA,{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.lastDays",defaultMessage:"Activity from the {dateRange} on pages you have access to",values:{dateRange:E().A.formatMessage(Kl().Yr[n])}}):(0,oe.jsx)(f().sA,{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.allTime",defaultMessage:"All time activity on pages you have access to in the workspace"})})]});return(0,oe.jsxs)("div",{style:t.wrapper,children:[a,s&&(0,oe.jsx)(Vl().L,{style:t.exportButton,analyticsType:bt().e.Content,filters:i})]})}var Td=()=>s(957963),Md=()=>s(385527),kd=()=>s(374255);const Id=640;function Dd(e){let{data:t,loading:s,error:n,daysFilter:r,setDaysFilter:d}=e;const c=(0,a().v3)(),{organizationOwnerRecordCache:u}=(0,i.useContext)(nr().N),g=(0,l().IS)((e=>({title:{fontWeight:S().Wy.medium,fontSize:16,marginBlock:"9px 4px",display:"flex",alignItems:"center",overflow:"hidden"},titleText:{...S().RC,flexShrink:1},helpInfo:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},overviewCard:{width:"fit-content"}})),[]),[p,m]=(0,Jl().z)(),{pageViews:h,uniquePageViews:x,pageEdits:b,topPages:y}=t,v=(0,o().K8)((()=>y.map((e=>{let{pageId:t,pageViews:s}=e;return{store:new(ae().Bv)(c,{id:t,table:xd().ev},{inMemoryRecordCache:u}),caption:(0,oe.jsx)(f().sA,{id:"workspaceAnalytics.overview.contentEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,oe.jsx)(Zl()._,{abbreviateNumber:!1,num:s})}})}}))),[c,y,u]),j=(0,i.useCallback)((e=>{d(e),Fl().n_(c,{filter:"content_engagement",daysFilter:e})}),[c,d]);return(0,oe.jsxs)("div",{style:g.container,ref:p,children:[(0,oe.jsxs)("div",{style:g.titleContainer,children:[(0,oe.jsxs)(ve().A,{style:g.title,children:[(0,oe.jsx)("div",{style:g.titleText,children:(0,oe.jsx)(f().sA,{id:"workspaceAnalytics.overview.contentEngagement.title",defaultMessage:"Content engagement"})}),(0,oe.jsx)(ye().A,{placement:Ae().W.Bottom,render:e=>(0,oe.jsx)(zs().A,{...e,href:(0,Ye().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:g.helpInfo}),renderTooltip:()=>"all_time"!==r?(0,oe.jsx)(f().sA,{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.lastDays",defaultMessage:"Activity on all pages in the workspace over the {dateRange}",values:{dateRange:E().A.formatMessage(Kl().Yr[r])}}):(0,oe.jsx)(f().sA,{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.allTime",defaultMessage:"All time activity on all pages in the workspace"})})]}),(0,oe.jsx)(ed().Z,{currentFilter:r,onChangeFilter:j})]}),(0,oe.jsxs)(Ql().xA,{gap:16,children:[(0,oe.jsx)(Ql().LX,{row:1,col:1,colEnd:3,children:(0,oe.jsx)(Xl().a,{loading:s,error:n,icon:$l().d,textStyles:g.overviewCard,title:(0,oe.jsx)(f().sA,{id:"workspaceAnalytics.overview.contentEngagement.views",defaultMessage:"{pageViews} total views",values:{pageViews:(0,oe.jsx)(Zl()._,{abbreviateNumber:m<Id,num:h})}})})}),(0,oe.jsx)(Ql().LX,{row:2,col:1,colEnd:3,children:(0,oe.jsx)(Xl().a,{loading:s,error:n,icon:Md().h,textStyles:g.overviewCard,iconStyles:{height:18,width:18},title:(0,oe.jsx)(f().sA,{id:"workspaceAnalytics.overview.contentEngagement.uniqueViews",defaultMessage:"{uniquePageViews, plural, one {{uniquePageViews} unique page viewed} other {{uniquePageViews} unique pages viewed}}",values:{uniquePageViews:(0,oe.jsx)(Zl()._,{abbreviateNumber:m<Id,num:x})}})})}),(0,oe.jsx)(Ql().LX,{row:3,col:1,colEnd:3,children:(0,oe.jsx)(Xl().a,{loading:s,error:n,icon:Td().j,textStyles:g.overviewCard,iconStyles:{height:18,width:18},title:(0,oe.jsx)(f().sA,{id:"workspaceAnalytics.overview.contentEngagement.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,oe.jsx)(Zl()._,{abbreviateNumber:m<Id,num:b})}})})}),(0,oe.jsx)(Ql().LX,{row:1,rowEnd:4,col:3,colEnd:5,children:(0,oe.jsx)(kd().N,{loading:s,error:n,title:(0,oe.jsx)(f().sA,{id:"workspaceAnalytics.overview.contentEngagement.popularPages",defaultMessage:"Most popular pages"}),items:v})})]})]})}var Rd=()=>s(188668);function _d(e){var t,s;let{onUserTabFilterChange:i,spaceStore:n,contentEngagement:a,userEngagement:r}=e;const d=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:24}})),[]),c=(0,o().K8)((()=>n.getName()),[n]);if("NotFoundError"===(null===(t=a.error)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(s=r.error)||void 0===s?void 0:s.name))return(0,oe.jsx)(Hl().H,{type:"empty",spaceName:c});return(0,oe.jsxs)("div",{style:d.container,children:[(0,oe.jsx)(Rd().R,{data:r.data,loading:r.loading,error:r.error,daysFilter:r.daysFilter,setDaysFilter:function(e){i({graphFilter:"all_time"===e?"last_90_days":e}),r.setDaysFilter(e)}}),(0,oe.jsx)(Dd,{data:a.data,loading:a.loading,error:a.error,daysFilter:a.daysFilter,setDaysFilter:a.setDaysFilter})]})}var Pd=()=>s(63964),Bd=()=>s(254685);const Ud={[bt().e.Overview]:(0,oe.jsx)(f().sA,{id:"workspaceAnalyticsTabs.overview.title",defaultMessage:"Overview"}),[bt().e.Users]:(0,oe.jsx)(f().sA,{id:"workspaceAnalyticsTabs.members.title",defaultMessage:"Members"}),[bt().e.Content]:(0,oe.jsx)(f().sA,{id:"workspaceAnalyticsTabs.content.title",defaultMessage:"Content"}),[bt().e.Search]:(0,oe.jsx)(f().sA,{id:"workspaceAnalyticsTabs.search.title",defaultMessage:"Search"})};function Ld(e){const{currentTab:t,spaceAnalyticsStoreState:s,onUserTabFilterChange:i,spaceStore:n}=e;switch(t){case bt().e.Content:return(0,oe.jsx)(Cd,{spaceStore:n,contentEngagement:e.contentEngagementData});case bt().e.Users:return(0,oe.jsx)(Bd().A,{spaceStore:n,usersTabData:s.usersTabData,onUserTabFilterChange:i,userEngagement:e.userEngagementData});case bt().e.Overview:return(0,oe.jsx)(_d,{contentEngagement:e.contentEngagementData,userEngagement:e.userEngagementData,spaceStore:n,onUserTabFilterChange:i});case bt().e.Search:return(0,oe.jsx)(Pd().A,{spaceStore:n});default:(0,_s().HB)(t)}}const Od=function(e){let{spaceStore:t}=e;const n=(0,l().IS)((e=>({headingStyle:{marginBottom:0,paddingBottom:0,fontSize:16,fontWeight:S().Wy.medium,display:"flex",justifyContent:"space-between"},title:{display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},tabsStyle:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14}})),[]),r=(0,a().v3)(),d=(0,rn().T)(),c=(0,s(23534).M)({spaceId:t.id}),u=(0,s(807106)._)({spaceStore:t,userId:d}),[g,p]=(0,o().$y)(bt().A),m=(0,o().K8)((()=>Boolean(null==t?void 0:t.getSettings().disable_page_analytics)),[t]),h=(0,o().K8)((()=>null==t?void 0:t.getName()),[t]),x=(0,i.useCallback)((async e=>{await Nl().OJ({environment:r,spaceStore:t,currentTab:g.currentTab,currentSpaceId:g.currentSpaceId,usersTabData:g.usersTabData,setState:p,graphFilter:e.graphFilter,tableFilter:e.tableFilter})}),[r,t,g,p]),b=(0,i.useCallback)((e=>{Fl().Wt(r,{tab:e}),p({...g,currentTab:e})}),[p,g,r]),y=(0,o().K8)((()=>{const e=[];return function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(bt().e.Overview),function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(bt().e.Users),e.push(bt().e.Content),function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(bt().e.Search),e}),[t]),v=(0,o().K8)((()=>y.length>1),[y]),j=g.currentTab||y[0];(0,i.useEffect)((()=>{!async function(){const e=t.id;e&&bt().A.shouldRefreshState(e)&&(j===bt().e.Users?await x({graphFilter:"last_90_days",tableFilter:"last_90_days"}):j===bt().e.Content||j===bt().e.Overview||j===bt().e.Search||(0,_s().HB)(j))}()}));const A=(0,i.useCallback)((()=>{C().f({environment:r,url:(0,Ye().xS)("guides.workspaceAnalytics")})}),[r]),w=y.map((e=>Ud[e])),T=m?(0,oe.jsx)(Hl().H,{type:"disabled",spaceName:h}):(0,oe.jsxs)(oe.Fragment,{children:[v&&(0,oe.jsx)(ji().Ay,{tabs:w,selectedIndex:y.indexOf(j),onChange:e=>{b(y[e])},style:n.tabsStyle}),Ld({currentTab:j,spaceAnalyticsStoreState:g,onUserTabFilterChange:x,spaceStore:t,contentEngagementData:c,userEngagementData:u})]});return(0,oe.jsxs)(Gt().Ay,{children:[(0,oe.jsxs)(me().A,{large:!0,style:n.headingStyle,children:[(0,oe.jsxs)("div",{style:n.title,children:[(0,oe.jsx)(f().sA,{id:"settings.workspaceAnalytics.title",defaultMessage:"Workspace analytics"}),(0,oe.jsx)(ye().A,{placement:Ae().W.Right,render:e=>(0,oe.jsx)(zs().A,{...e,href:(0,Ye().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:n.helpInfo}),renderTooltip:()=>(0,oe.jsx)(f().sA,{id:"settings.workspaceAnalytics.dataDisclaimerTooltip",defaultMessage:"Data available from the start date of your Enterprise Plan"})})]}),(0,oe.jsx)(Bt().A,{size:"sm",onClick:A,iconLeading:Hn().$,children:(0,oe.jsx)(f().sA,{id:"workspaceAnalytics.title.helpButton",defaultMessage:"Learn more"})})]}),(0,Gt().J_)(),T]})};var qd=()=>s(861646),Wd=()=>s(701763);function Ed(){const e=(0,Ze().X)("sharing_contacts_tab_refresh"),t=(0,o().K8)((()=>{const{currentSpaceStore:e}=ut().default.state;return e}),[]),s=(0,qt().f_)({spaceId:null==t?void 0:t.id});return(0,o().K8)((()=>{if(!t)return!1;const e=(0,p().AI)(s);return(0,m().dL)(e)||(0,m().Pg)(e)}),[t,s])&&e}var zd=()=>s(232461);function Fd(){const e=(0,Ze().X)("personal_sharing_contacts_tab"),t=(0,o().O$)(ut().AppStoreCurrentSpaceStore),s=(0,zd().J)(),i=(0,o().K8)((()=>{const e=null==t?void 0:t.getModel();if(!t||!e)return!1;const s=t.getSubscriptionTier();return"personal"===t.getPlanType()||"enterprise"!==s}),[t]);return!!(e&&s&&i)}var Nd=()=>s(605402),Gd=()=>s(910609),Kd=()=>s(334992),Vd=()=>s(709438),Hd=()=>s(792223),$d=()=>s(777967),Yd=()=>s(583705),Jd=()=>s(731320),Qd=()=>s(970209),Zd=()=>s(280161);function Xd(e){let{spaceStore:t,spacePermissionsSettingsStore:s}=e;const{canUseGroups:i,canEditGroups:n,isSpaceStoreDefined:a}=function(e){let{spaceStore:t}=e;const s=(0,Hd().zh)(),{canEditMembership:i,isSpaceStoreDefined:n}=(0,o().K8)((()=>({canEditMembership:t.canEditMembership(),isSpaceStoreDefined:t.isDefined()})),[t]),a=i&&s;return{canUseGroups:s,canEditMembership:i,canEditGroups:a,isSpaceStoreDefined:n}}({spaceStore:t}),r=(0,o().K8)((()=>0!==(0,Ls().zI)()),[]),l=(0,o().K8)((()=>0!==(0,Jd().Qo)()),[]);return a?(0,oe.jsxs)("div",{children:[i?!l&&(0,oe.jsx)(ve().A,{isMultiline:!0,style:{marginTop:17,marginBottom:17},children:r?(0,oe.jsx)(f().sA,{id:"spacePermissionsSettings.groupsTab.captionWithTeamsV2",defaultMessage:"Set up groups to streamline page permissions from the share menu and manage teamspace members in bulk."}):(0,oe.jsx)(f().sA,{id:"spacePermissionsSettings.groupsTab.caption",defaultMessage:"Set up groups to conveniently control page permissions from the share menu."})}):(0,oe.jsx)(Qd().A,{subscriptionTier:"plus",from:"permission_groups",icon:Yd().$,title:(0,oe.jsx)(f().sA,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",defaultMessage:"Upgrade to create groups"}),caption:(0,oe.jsx)(f().sA,{id:"spacePermissionsSettings.groupsTab.upgradeCaption.plus",defaultMessage:"Upgrade to the Plus Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups"}),(0,oe.jsx)(Zd().r,{spaceStore:t,permissionsSettingsStore:s,canEdit:n,containerMarginTop:i?0:void 0})]}):null}const ec=(0,kt().xh)("personCropCircleBadgePlus",{default:{loader:()=>s.e(89509).then(s.bind(s,582094))},small:{loader:()=>s.e(89509).then(s.bind(s,845052))},fill:{loader:()=>s.e(89509).then(s.bind(s,845324))},fillSmall:{loader:()=>s.e(89509).then(s.bind(s,478419))}},["person","add","user","new","plus"]);var tc=()=>s(980427),sc=()=>s(496414),ic=()=>s(183804),nc=()=>s(377586),ac=()=>s(592674),rc=()=>s(887080),oc=()=>s(278238),lc=()=>s(205224),dc=()=>s(646736),cc=()=>s(118789),uc=()=>s(710149),gc=()=>s(61442),pc=()=>s(568625);class mc extends N().Store{getInitialState(){return{isModalOpen:!1,guests:[],handleClickDecline:()=>{}}}}const fc=new mc;function hc(e){let{userId:t,spaceStore:s,shouldDisableInteraction:n}=e;const{environment:r,styles:d,isSubscribed:c,handleConvertToMemberClick:u,handleRemoveClick:g}=function(e){let{userId:t,spaceStore:s,shouldDisableInteraction:n}=e;const r=(0,l().IS)((e=>({container:{width:"100%",display:"flex",justifyContent:"flex-end",opacity:n?.5:1},button:{display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:10,paddingLeft:0,paddingRight:0},buttonIcon:{width:20,height:20,fill:e.icon.secondary},upgradeButton:{padding:"0px 6px 0px 8px",width:257},removeMenuDivider:{paddingTop:4,paddingBottom:4,borderTop:`1px solid ${e.stroke.secondary}`},removeButton:{width:257,padding:"0px 6px 0px 8px",color:oc().l8[e.mode].red},upgradeIcon:{width:17,height:17}})),[n]),d=(0,o().K8)((()=>{const e=Zi().subscriptionDataStoreInstance.state;return Boolean(e&&is().Fq(e))}),[]),c=(0,a().v3)(),u=(0,i.useCallback)((()=>{const e=ae().LU.createChildStore(s,{table:O().oo,id:t}),i=d?"read_and_write":"editor";lc().P({environment:c,guestUserStore:e,role:i,store:s,isConvertToAdmin:!d,origin:"guest_pages_popup"})}),[d,s,c,t]),g=(0,i.useCallback)((()=>{fc.setState({...fc.state,isModalOpen:!0,guests:[t],handleClickDecline:()=>{Wd().jR(c,{from:"guest",button_name:"confirm_in_dialog",count:1});const e=ae().LU.createChildStore(s,{table:O().oo,id:t});lc().D({environment:c,guestUserStore:e,store:s})}})}),[s,c,t]);return{environment:c,styles:r,isSubscribed:d,handleConvertToMemberClick:u,handleRemoveClick:g}}({userId:t,spaceStore:s,shouldDisableInteraction:n});return(0,oe.jsx)("div",{style:d.container,children:(0,oe.jsx)(Sa().Ay,{popupType:Sa().z7.Popup,renderOrigin:e=>(0,oe.jsx)(Vt().p,{style:d.button,...e,children:(0,oe.jsx)(oe.Fragment,{children:(0,pc().L)(d.buttonIcon)})}),onClick:()=>{Wd().jR(r,{from:"guest",button_name:"actions"})},disabled:n,render:()=>(0,oe.jsx)("div",{children:(0,oe.jsx)(ba().Ay,{type:ba().Oh.Vertical,initialFocus:void 0,sections:[{key:"upgrade",render:e=>(0,oe.jsx)(va().A,{...e}),items:[{key:"upgrade",render:e=>(0,oe.jsx)(Tl().A,{...e,buttonStyle:d.upgradeButton,icon:(0,Co().m)(d.upgradeIcon),title:(0,oe.jsx)(f().sA,{id:"peopleSectionguestsTab.upgradeToAdmin",defaultMessage:"Upgrade to {isSubscribed, select, true {member} other {admin}}",values:{isSubscribed:c}})}),action:()=>{u(),Wd().jR(r,{from:"guest",button_name:"upgrade"})}}]},{key:"remove",render:e=>(0,oe.jsx)(va().A,{...e,style:d.removeMenuDivider}),items:[{key:"remove",render:e=>(0,oe.jsx)(Tl().A,{...e,buttonStyle:d.removeButton,icon:(0,Yn()._)(d.upgradeIcon),title:(0,oe.jsx)(f().sA,{id:"peopleSectionguestsTab.remove",defaultMessage:"Remove from workspace"})}),action:()=>{g(),Wd().jR(r,{from:"guest",button_name:"remove"})}}]}]})})})})}const Sc=(0,kt().wt)("peopleFillXmark",{viewBox:"0 0 20 20",svg:(0,oe.jsx)("path",{d:"M12.2061 6.75684C12.0374 6.75684 11.8916 6.69531 11.7686 6.57227C11.6501 6.44922 11.5908 6.30339 11.5908 6.13477C11.5908 5.96615 11.6523 5.82259 11.7754 5.7041L13.5801 3.89258L11.7754 2.08105C11.6523 1.96257 11.5908 1.81901 11.5908 1.65039C11.5908 1.47721 11.6501 1.33366 11.7686 1.21973C11.8916 1.10124 12.0374 1.04199 12.2061 1.04199C12.3838 1.04199 12.5319 1.10352 12.6504 1.22656L14.4551 3.02441L16.2803 1.21973C16.4033 1.09212 16.5469 1.02832 16.7109 1.02832C16.8841 1.02832 17.0299 1.08984 17.1484 1.21289C17.2669 1.33138 17.3262 1.47493 17.3262 1.64355C17.3262 1.80762 17.2646 1.95117 17.1416 2.07422L15.3369 3.89258L17.1348 5.69727C17.2624 5.82031 17.3262 5.96615 17.3262 6.13477C17.3262 6.30339 17.2646 6.44922 17.1416 6.57227C17.0231 6.69531 16.8796 6.75684 16.7109 6.75684C16.5332 6.75684 16.3828 6.69303 16.2598 6.56543L14.4551 4.76758L12.6572 6.56543C12.5387 6.69303 12.3883 6.75684 12.2061 6.75684ZM1.89746 13.2441C1.51465 13.2441 1.21387 13.1576 0.995117 12.9844C0.776367 12.8112 0.666992 12.5742 0.666992 12.2734C0.666992 11.8314 0.799154 11.3688 1.06348 10.8857C1.33236 10.4027 1.71745 9.94922 2.21875 9.52539C2.72461 9.10156 3.33301 8.75749 4.04395 8.49316C4.75488 8.22884 5.55241 8.09668 6.43652 8.09668C7.3252 8.09668 8.125 8.22884 8.83594 8.49316C9.54688 8.75749 10.153 9.10156 10.6543 9.52539C11.1602 9.94922 11.5475 10.4027 11.8164 10.8857C12.0853 11.3688 12.2197 11.8314 12.2197 12.2734C12.2197 12.5742 12.1104 12.8112 11.8916 12.9844C11.6729 13.1576 11.3721 13.2441 10.9893 13.2441H1.89746ZM6.44336 6.87988C5.94661 6.87988 5.48861 6.74544 5.06934 6.47656C4.65462 6.20768 4.31966 5.84538 4.06445 5.38965C3.8138 4.93392 3.68848 4.4235 3.68848 3.8584C3.68848 3.30241 3.8138 2.80111 4.06445 2.35449C4.31966 1.90332 4.6569 1.54557 5.07617 1.28125C5.49544 1.01693 5.95117 0.884766 6.44336 0.884766C6.9401 0.884766 7.39811 1.01465 7.81738 1.27441C8.23665 1.53418 8.57161 1.88965 8.82227 2.34082C9.07747 2.78743 9.20508 3.28874 9.20508 3.84473C9.20508 4.41439 9.07747 4.92936 8.82227 5.38965C8.57161 5.84538 8.23665 6.20768 7.81738 6.47656C7.39811 6.74544 6.9401 6.87988 6.44336 6.87988Z"})});function xc(e){let{isModalOpen:t,handleDismiss:s,handleConfirm:i,title:n,description:a,ctaText:r}=e;const{styles:o}=function(){const e=(0,l().IS)((e=>({modal:{width:300,overflow:"hidden",borderRadius:5},container:{display:"flex",padding:"20px 20px 12px 20px",flexDirection:"column",width:299,justifyContent:"center",alignItems:"flex-start",gap:20},iconAndTitle:{display:"flex",flexDirection:"column",alignItems:"center",gap:9,width:"100%"},iconContainer:{display:"flex",justifyContent:"center",alignItems:"center",width:36,height:36},icon:{color:e.icon.secondary,fontSize:24,fontWeight:510},title:{color:e.text.primary,textAlign:"center",fontSize:17,fontWeight:590,width:"100%",wordBreak:"break-word"},description:{color:e.text.secondary,textAlign:"center"},footer:{display:"flex",flexDirection:"column",gap:8,alignItems:"center",width:"100%"},declineButton:{height:32,padding:"0 12px",borderRadius:6,width:"100%",textAlign:"center",alignItems:"center",justifyContent:"center",background:oc().l8[e.mode].red},declineButtonHovered:{background:e.tint.uiRedPressed},declineText:{fontWeight:590,color:e.text.contrastPrimary},cancelButton:{display:"flex",height:24,padding:"0px 6px",justifyContent:"center",alignItems:"center",gap:4,textAlign:"center"}})),[]);return{styles:e}}();return(0,et().A)({shouldPreserveTextSelection:!0,shouldPreserveBlockSelection:!0,shouldRestoreSelection:!0}),(0,oe.jsx)(hi().a,{open:t,innerStyle:o.modal,showCloseIcon:!0,onDismiss:s,render:()=>(0,oe.jsx)(_n().A,{capture:!0,allowEsc:!0,render:()=>(0,oe.jsxs)("div",{style:o.container,children:[(0,oe.jsxs)("div",{style:o.iconAndTitle,children:[(0,oe.jsx)("div",{style:o.iconContainer,children:(0,oe.jsx)("div",{style:o.icon,children:Sc({width:24,height:24})})}),(0,oe.jsx)("div",{style:o.title,children:n})]}),(0,oe.jsx)("div",{style:o.description,children:a}),(0,oe.jsxs)("div",{style:o.footer,children:[(0,oe.jsx)(Vt().p,{style:o.declineButton,onClick:()=>{i(),s()},hoveredStyle:o.declineButtonHovered,children:(0,oe.jsx)("div",{style:o.declineText,children:r})}),(0,oe.jsx)(Vt().p,{style:o.cancelButton,onClick:s,children:(0,oe.jsx)("div",{children:(0,oe.jsx)(f().sA,{id:"BulkDeclineConfirmationDialog.cancel",defaultMessage:"Cancel"})})})]})]})})})}function bc(){const{isModalOpen:e,handleClickDecline:t,handleDismiss:s,guests:n,firstGuestName:r}=function(){const{isModalOpen:e,guests:t,handleClickDecline:s}=(0,o().K8)((()=>{const{isModalOpen:e,guests:t,handleClickDecline:s}=fc.state;return{isModalOpen:e,guests:t,handleClickDecline:s}}),[]),n=(0,f().tz)(),r=(0,o().K8)((()=>{const{currentSpaceStore:e}=ut().default.state;if(0===t.length||!e)return;return ae().LU.createChildStore(e,{table:O().oo,id:t[0]}).getDisplayName(n)}),[t,n]),l=(0,a().v3)(),d=(0,i.useCallback)((()=>{fc.reset(),Wd().jR(l,{from:"guest",button_name:"confirm_in_dialog",count:t.length})}),[l,t]);return{isModalOpen:e,guests:t,firstGuestName:r,handleClickDecline:s,handleDismiss:d}}();return 0===n.length?null:(0,oe.jsx)(xc,{isModalOpen:e,handleDismiss:s,handleConfirm:t,title:(0,oe.jsx)(f().sA,{id:"GuestBulkRemoveConfirmationDialog.title",defaultMessage:"Remove {numberOfGuests, plural, one {{firstGuestName}} other {{numberOfGuests} guests}} from the workspace?",values:{numberOfGuests:n.length,firstGuestName:r}}),description:(0,oe.jsx)(f().sA,{id:"GuestBulkRemoveConfirmationDialog.description",defaultMessage:"They will lose access to all shared pages. To add them as a guest in the future, a request must be submitted, or an admin must invite them."}),ctaText:(0,oe.jsx)(f().sA,{id:"GuestBulkRemoveConfirmationDialog.remove",defaultMessage:"Remove"})})}var yc=()=>s(584262),vc=()=>s(433847),jc=()=>s(435009),Ac=()=>s(492414),Cc=()=>s(958378);function wc(e){let{guestUserId:t,pageIds:s}=e;const{menuListItems:i,styles:n}=function(e){let{guestUserId:t,pageIds:s}=e;const i=(0,l().IS)((()=>({container:{width:256},chevron:{marginLeft:8,width:16,height:16}})),[]),n=(0,a().v3)(),r=(0,f().tz)(),d=(0,o().K8)((()=>s.map((e=>{var s;const i=new(ae().Bv)(n,{table:xd().ev,id:e}),a=null===(s=i.getPermissionItems().find((e=>"user_permission"===e.type&&e.user_id===t)))||void 0===s?void 0:s.role;return{key:e,render:e=>(0,oe.jsx)(Cc().A,{...e,store:i,placeholder:(0,oe.jsx)(f().sA,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"}),caption:a?r.formatMessage((0,vc().an)(a,"block")):void 0}),action:()=>{const e=(0,Ac().Ay)({store:i,fullyQualified:!1,pageVisitSource:yc().y8.LinkInPage});jc().oo({environment:n,url:e,openInNew:"tab"})}}}))),[s,t,n,r]);return{menuListItems:d,styles:i}}({guestUserId:t,pageIds:s});return(0,oe.jsx)("div",{style:n.container,children:(0,oe.jsx)(ba().Ay,{type:ba().Oh.Vertical,initialFocus:void 0,sections:[{key:"pages",render:e=>(0,oe.jsx)(va().A,{...e}),items:i}]})})}function Tc(e){let{from:t,guestUserId:s,pageIds:i,shouldDisableInteraction:n}=e;const{styles:r}=function(e){let{shouldDisableInteraction:t}=e;const s=(0,l().IS)((e=>({button:{opacity:t?.5:1,color:e.text.secondary},chevron:{width:10,marginLeft:4,fill:e.icon.tertiary}})),[t]);return{styles:s}}({shouldDisableInteraction:n}),o=(0,a().v3)(),d=i.length;return 0===d?(0,oe.jsx)(Vt().p,{disabled:!0,style:r.button,children:(0,oe.jsx)(f().sA,{id:"peopleSectionguestsTab.GuestPagesButton.noPages",defaultMessage:"No pages"})}):(0,oe.jsx)(Sa().Ay,{popupType:Sa().z7.Popup,onClick:()=>{Wd().jR(o,{from:t,button_name:"open_pages"})},renderOrigin:e=>(0,oe.jsxs)(Vt().p,{...e,style:r.button,children:[(0,oe.jsx)(f().sA,{id:"GuestPagesButton.button",defaultMessage:"{numOfPages, plural, one {{numOfPages} page} other {{numOfPages} pages}}",values:{numOfPages:d}}),(0,Al().b)(r.chevron)]}),disabled:n,render:()=>(0,oe.jsx)(wc,{pageIds:i,guestUserId:s})})}function Mc(e){let{userId:t,guestPageIds:s,shouldDisableInteraction:i}=e;return(0,oe.jsx)(Tc,{pageIds:s,guestUserId:t,shouldDisableInteraction:i,from:"guest"})}const kc=10,Ic=10,Dc=5;var Rc=()=>s(762286),_c=()=>s(868146);function Pc(e){let{userId:t,spaceStore:n,restorationStatus:a,isInternalGuest:r,isForSuggestionsTable:d}=e;const c=(0,f().tz)().formatMessage({id:"peopleSettings.userCell.guest",defaultMessage:"Guest"}),{name:u,email:g,userStore:p,styles:m}=function(e){let{userId:t,spaceStore:s,isForSuggestionsTable:i}=e;const n=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",fontSize:S().J.UIRegular.desktop,width:"100%",justifyContent:"space-between"},titleContainer:{maxWidth:i?210:163},userAvatarWrapper:{position:"relative"},userAvatarIcon:{position:"absolute",left:17,top:18},userName:{height:17,alignSelf:"stretch",fontSize:S().J.UIRegular.desktop,fontStyle:"normal",fontWeight:510,lineHeight:"18px",...S().RC},userEmail:{height:17,alignSelf:"stretch",fontSize:S().J.UISmall.desktop,fontStyle:"normal",fontWeight:400,lineHeight:"15px",color:e.text.secondary,...S().RC},nameContainer:{display:"flex",alignItems:"center",gap:10,marginTop:4,marginBottom:4}})),[i]),a=(0,f().tz)(),r=ae().LU.createChildStore(s,{table:O().oo,id:t}),{name:d,email:c}=(0,o().K8)((()=>({name:r.getDisplayName(a),email:r.getEmail()})),[r,a]);return{name:d,email:c,styles:n,userStore:r}}({userId:t,spaceStore:n,isForSuggestionsTable:d}),[h,x]=(0,i.useState)(!1);return(0,oe.jsxs)("div",{style:m.container,children:[(0,oe.jsxs)("div",{style:m.nameContainer,children:[(0,oe.jsxs)("div",{style:m.userAvatarWrapper,children:[(0,oe.jsx)(Pn().A,{userStore:p,size:28}),r?(0,oe.jsx)(ye().A,{style:{width:250},textWrap:!0,placement:Ae().W.Right,alignment:Ae().C.Start,render:e=>(0,oe.jsx)("div",{...e,style:m.userAvatarIcon,children:(0,oe.jsx)(_t().Q,{iconGroup:_c().u,colorName:"secondary",variantName:"mini"})}),renderTooltip:()=>(0,oe.jsxs)("div",{children:[(0,oe.jsx)(Pt().D,{styleName:"Body-12px/Medium",colorName:"contrastPrimary",children:(0,oe.jsx)(f().sA,{id:"userCell.internalGuest.tooltip.title",defaultMessage:"Using an email domain associated with your workspace"})}),(0,oe.jsx)(Pt().D,{styleName:"Body-12px/Medium",colorName:"contrastSecondary",children:(0,oe.jsx)(f().sA,{id:"userCell.internalGuest.tooltip.description",defaultMessage:"Youll see this icon for users who have a workspace owner email domain, verified domain, or allowed email domain"})})]})}):void 0]}),(0,oe.jsxs)("div",{style:m.titleContainer,children:[(0,oe.jsx)("div",{style:m.userName,title:d?g:u,children:d?g:u}),(0,oe.jsx)("div",{style:m.userEmail,title:d?c:g,children:d?c:g}),a?(0,oe.jsx)(s(881753).A,{spaceStore:n,restorationStatus:a,didAttemptRecovery:h}):void 0]})]}),h||"canBeRestored"!==(null==a?void 0:a.status)?void 0:(0,oe.jsx)(s(266324).A,{spaceId:n.id,userStore:p,onSubmit:()=>x(!0)})]})}function Bc(e){let{spaceStore:t,domainFilterValues:s,internalDomains:i}=e;return(0,o().K8)((()=>{const e=D().A.state.shouldUseEdgeCache,t=R().default.checkGate({gateName:"edge_cache_plus_settings"}),s=R().default.checkGate({gateName:"virtualize_people_table"});return e&&t||s}),[])?(0,oe.jsx)(Uc,{spaceStore:t,domainFilterValues:s,internalDomains:i}):(0,oe.jsx)(Wc,{spaceStore:t,domainFilterValues:s,internalDomains:i})}function Uc(e){let{spaceStore:t,domainFilterValues:s,internalDomains:n}=e;const r=(0,xs().fC)({spaceStore:t}),d=(0,Hd().r1)({spaceStore:t}),c=(0,l().IS)((e=>({titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,height:32},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`},headerContainer:{display:"flex",justifyContent:r&&d?"space-between":"flex-end"},actionsContainer:{display:"flex",borderRadius:6,border:`1px solid ${e.stroke.primary}`,boxShadow:"0px 2px 12px 0px rgba(29, 27, 22, 0.06)"},actionLeftButton:{borderRadius:"4px 0px 0px 4px",paddingLeft:10,paddingRight:0,height:30},buttonContainerApprove:{display:"flex",padding:"0px 12px 0px 0px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.uiBluePrimary},buttonContainerDecline:{display:"flex",padding:"0px 12px 0px 10px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:oc().l8[e.mode].red},buttonIcon:{width:20,height:20,paddingTop:1,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:10},buttonText:{fontSize:14,fontWeight:510},buttonDivider:{width:1,background:e.stroke.secondary},actionRightButton:{borderRadius:"0px 4px 4px 0px",paddingLeft:0,paddingRight:0,height:30}})),[r,d]),u=(0,o().K8)((()=>Rc().A.state.searchQuery),[]),[g,p]=(0,i.useState)({by:Lc.id,asc:!1}),m=(0,i.useMemo)((()=>({field:"user"===g.by?"name_normalized":"type",direction:g.asc?"asc":"desc"})),[g]),h=(0,cc().n)({query:u??"",sort:m,filter:"guests",limit:30}),S=(0,o().K8)((()=>{var e;return null==h||null===(e=h.rowsStore.state.rows)||void 0===e?void 0:e.filter((e=>{var t;if(void 0===s||0===s.length)return!0;const i=null===(t=e.email)||void 0===t?void 0:t.split("@")[1];return null==s?void 0:s.some((e=>"other"===e?!(null!=n&&n.some((e=>e.url===i))):i===e))}))}),[s,n,h]),x=(0,Hd().k4)({spaceStore:t}),b=(0,a().v3)(),[y,v]=(0,i.useState)(new Set),j=(0,i.useMemo)((()=>{const e=void 0!==S&&y.size>0&&y.size===S.length;return x?{header:{isDisabled:void 0===S||0===S.length,isSelected:e,onClick:()=>{void 0!==S&&(e?(v(new Set),Wd().Y1(b,{from:"guests",action:"deselect_all",row_count:y.size})):(v(new Set(S.map((e=>e.id)))),Wd().Y1(b,{from:"guests",action:"select_all",row_count:S.length})))}},row:{getDisabledState:()=>!1,getSelectedState:e=>y.has(e.id),onClick:e=>{v((t=>{if(t.has(e.id)){Wd().Y1(b,{from:"guests",action:"deselect_row",row_count:1});const s=new Set(t);return s.delete(e.id),s}return Wd().Y1(b,{from:"guests",action:"select_row",row_count:1}),new Set(t).add(e.id)}))}}}:void 0}),[x,S,y,b]),A=(0,o().K8)((()=>{const e=Zi().subscriptionDataStoreInstance.state;return Boolean(e&&is().Fq(e))}),[]),C=(0,i.useCallback)((()=>{Wd().jR(b,{from:"guest",button_name:"bulk_upgrade",count:y.size}),y.forEach((e=>{const s=ae().LU.createChildStore(t,{table:O().oo,id:e}),i=A?"read_and_write":"editor";lc().P({environment:b,guestUserStore:s,role:i,store:t,isConvertToAdmin:!A,origin:"guest_actions"})})),v(new Set)}),[y,b,A,t]),w=(0,i.useCallback)((()=>{Wd().jR(b,{from:"guest",button_name:"bulk_remove",count:y.size}),fc.setState({...fc.state,isModalOpen:!0,guests:Array.from(y),handleClickDecline:()=>{Wd().jR(b,{from:"guest",button_name:"confirm_in_dialog",count:y.size}),y.forEach((e=>{const s=ae().LU.createChildStore(t,{table:O().oo,id:e});lc().D({environment:b,guestUserStore:s,store:t})})),v(new Set)}})}),[y,b,t]),T=!(null!=S&&S.some((e=>y.has(e.id)))),{columns:M,transformRow:k}=function(e){let{users:t,spaceStore:s,internalDomains:n,selectedGuestIds:a,environment:r,canEditMembership:o}=e;const[l,d]=(0,i.useState)({});(0,zn().Yb)((async()=>{if(!t)return;if(!o)return;const e=t.map((e=>e.id)),i=await q().callApi({eventName:"getGuestPagesForUserIds",environment:r,data:{spaceId:s.id,guestUserIds:e},headers:(0,B().WS)({cellId:void 0,spaceId:s.id})});"success"===i.type&&d((t=>{const s={...t};for(const a of e){var n;s[a]=(null===(n=i.data.guestIdToPages[a])||void 0===n?void 0:n.pageIds)??[]}return s}))}),[s,r,t,o]);const c=(0,i.useCallback)((e=>{const t=e.email.split("@")[1],i=n.some((e=>e.url===t));if("page_guest"===((0,dc().dp)(s,e.id).getMembershipType()??e.membership_type))return{id:e.id,spaceStore:s,shouldDisableInteraction:a.has(e.id),guestPageIds:l[e.id],isInternalGuest:i}}),[s,n,l,a]),u=(0,i.useMemo)((()=>o?[Lc,Oc,qc]:[Lc]),[o]);return{columns:u,transformRow:c}}({users:S,spaceStore:t,internalDomains:n,selectedGuestIds:y,environment:b,canEditMembership:x});return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsxs)("div",{style:c.headerContainer,children:[r&&d?(0,oe.jsx)("div",{style:c.titleContainer,children:(0,oe.jsx)("span",{children:(0,oe.jsx)(f().sA,{id:"peopleSectionguestsTab.activeguests.title",defaultMessage:"Active"})})}):void 0,y.size>0&&!T?(0,oe.jsxs)("div",{style:c.actionsContainer,children:[(0,oe.jsx)(Vt().p,{style:c.actionLeftButton,onClick:C,children:(0,oe.jsxs)("div",{style:c.buttonContainerApprove,children:[(0,oe.jsx)("div",{style:c.buttonIcon,children:(0,Co().m)({width:20,height:16})}),(0,oe.jsx)("div",{style:c.buttonText,children:(0,oe.jsx)(f().sA,{id:"spaceSettings.peopleSection.guestsTable.bulkUpgrade",defaultMessage:"Upgrade {numberOfRequests, plural, one {1 guest} other {{numberOfRequests} guests}} to {isSubscribed, select, true {member} other {admin}}",values:{numberOfRequests:y.size,isSubscribed:A}})})]})}),(0,oe.jsx)("div",{style:c.buttonDivider}),(0,oe.jsx)(Vt().p,{style:c.actionRightButton,onClick:w,children:(0,oe.jsxs)("div",{style:c.buttonContainerDecline,children:[(0,oe.jsx)("div",{style:{...c.buttonIcon,paddingTop:3},children:(0,Yn()._)({width:20,height:16})}),(0,oe.jsx)("div",{style:c.buttonText,children:(0,oe.jsx)(f().sA,{id:"spaceSettings.peopleSection.guestsTable.bulkDecline",defaultMessage:"Remove from workspace"})})]})})]}):void 0]}),(0,oe.jsxs)("div",{style:{marginTop:r&&d?4:-1,height:"100%"},children:[(0,oe.jsx)(gc().M,{columns:M,rows:S,listSource:h,transformRow:k,sort:g,onSortChange:p,estimatedRowHeight:42,allowHorizontalScroll:!0,renderEmpty:()=>(0,oe.jsx)(ve().A,{isSmall:!0,style:c.emptyMessage,children:(0,oe.jsx)(f().sA,{id:"peopleSectionGuestsTab.emptySearch",defaultMessage:"No search results"})}),multiselect:j}),(0,oe.jsx)(bc,{})]})]})}const Lc={id:"user",headerTitle:(0,oe.jsx)("div",{style:{fontSize:14},children:(0,oe.jsx)(f().sA,{id:"peopleSectionGuestsTab.user",defaultMessage:"User"})}),renderCell:e=>(0,oe.jsx)(Pc,{userId:e.id,spaceStore:e.spaceStore,isInternalGuest:e.isInternalGuest}),widthData:{widthPercent:35,minWidth:250},sortable:!0,border:!0},Oc={id:"access",headerTitle:(0,oe.jsx)("div",{style:{fontSize:14},children:(0,oe.jsx)(f().sA,{id:"peopleSectionGuestsTab.access",defaultMessage:"Access"})}),headerCellPadding:"0 0 0 8px",renderCell:e=>void 0!==e.guestPageIds?(0,oe.jsx)(Mc,{userId:e.id,guestPageIds:e.guestPageIds,shouldDisableInteraction:e.shouldDisableInteraction}):(0,oe.jsx)(uc().A,{style:{width:60,height:12,borderRadius:4,marginLeft:8}}),widthData:{widthPercent:55,minWidth:180},sortable:!1},qc={id:"actions",headerTitle:void 0,renderCell:e=>(0,oe.jsx)(hc,{userId:e.id,spaceStore:e.spaceStore,shouldDisableInteraction:e.shouldDisableInteraction}),widthData:{widthPercent:10,minWidth:50},sortable:!1};function Wc(e){let{spaceStore:t,domainFilterValues:s,internalDomains:n}=e;const{environment:r,tableStyles:d,styles:c,sortState:u,setSortState:g,selectedRowIds:p,setSelectedRowIds:m,rows:h,searchQuery:S,onClickApprove:x,onClickDecline:b,isApproveButtonLoading:y,canEditMembership:v,columnRenderInfo:j,isSubscribed:A,shouldHideActions:C,shouldShowRequest:w,canAdmin:T,guestsCount:M,shouldShowLoadMore:k,onLoadMore:I}=function(e){let{spaceStore:t,domainFilterValues:s,internalDomains:n}=e;const r=(0,o().K8)((()=>{const e=Zi().subscriptionDataStoreInstance.state;return e?(0,is().oe)(e):[]}),[]),d=(0,xs().fC)({spaceStore:t}),c=(0,Hd().r1)({spaceStore:t}),u=(0,a().v3)(),g=(0,l().IS)((e=>({titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,height:32},titleNumber:{color:e.text.tertiary},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`},emptyDivider:{height:1,backgroundColor:e.stroke.secondary},headerContainer:{display:"flex",justifyContent:d&&c?"space-between":"flex-end"},actionsContainer:{display:"flex",borderRadius:6,border:`1px solid ${e.stroke.primary}`,boxShadow:"0px 2px 12px 0px rgba(29, 27, 22, 0.06)"},actionLeftButton:{borderRadius:"4px 0px 0px 4px",paddingLeft:10,paddingRight:0,height:30},buttonContainerApprove:{display:"flex",padding:"0px 12px 0px 0px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.uiBluePrimary},buttonContainerDecline:{display:"flex",padding:"0px 12px 0px 10px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:oc().l8[e.mode].red},buttonIcon:{width:20,height:20,paddingTop:1,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:10},buttonText:{fontSize:14,fontWeight:510},buttonDivider:{width:1,background:e.stroke.secondary},actionRightButton:{borderRadius:"0px 4px 4px 0px",paddingLeft:0,paddingRight:0,height:30}})),[d,c]),p=(0,Hd().k4)({spaceStore:t}),m=(0,i.useMemo)((()=>p?[Ec,zc,Fc]:[Ec]),[p]),h=(0,l().IS)((e=>({...(0,xe().rC)({columnRenderInfo:m,theme:e,containerMarginTop:0})})),[m]),S=(0,o().K8)((()=>m[0]),[m]),[x,b]=(0,i.useState)({column:S,sortAscending:!0}),[y,v]=(0,i.useState)([]),j=(0,f().tz)(),A=(0,o().K8)((()=>Rc().A.state.searchQuery),[]),C=(0,o().K8)((()=>r.map((e=>{const s=ae().LU.createChildStore(t,{table:O().oo,id:e.userId}),i=s.getEmail(),a=null==i?void 0:i.split("@")[1],r=n.some((e=>e.url===a));return{spaceStore:t,user:e,email:i,userName:s.getDisplayName(j),id:e.userId,shouldDisableInteraction:y.includes(e.userId),isClickable:!1,isInternalGuest:r}})).filter((e=>{var t;if(A){var i;if(!((null===(i=e.email)||void 0===i?void 0:i.includes(A))||e.userName.includes(A)))return!1}if(!s||0===s.length)return!0;const a=null===(t=e.email)||void 0===t?void 0:t.split("@")[1];return null==s?void 0:s.some((e=>"other"===e?!(null!=n&&n.some((e=>e.url===a))):a===e))}))),[t,r,j,A,y,n,s]),w=(0,o().K8)((()=>{const e=Zi().subscriptionDataStoreInstance.state;return Boolean(e&&is().Fq(e))}),[]),T=(0,i.useCallback)((()=>{Wd().jR(u,{from:"guest",button_name:"bulk_upgrade",count:y.length}),y.forEach((e=>{const s=ae().LU.createChildStore(t,{table:O().oo,id:e}),i=w?"read_and_write":"editor";lc().P({environment:u,guestUserStore:s,role:i,store:t,isConvertToAdmin:!w,origin:"guest_actions"}),v([])}))}),[y,u,w,t]),M=(0,i.useCallback)((()=>{Wd().jR(u,{from:"guest",button_name:"bulk_remove",count:y.length}),fc.setState({...fc.state,isModalOpen:!0,guests:y,handleClickDecline:()=>{Wd().jR(u,{from:"guest",button_name:"confirm_in_dialog",count:y.length}),y.forEach((e=>{const s=ae().LU.createChildStore(t,{table:O().oo,id:e});lc().D({environment:u,guestUserStore:s,store:t})})),v([])}})}),[y,u,t]),k=!C.some((e=>y.includes(e.id))),[I,D]=(0,i.useState)(Ic),R=(0,i.useCallback)((()=>{D(I+Ic)}),[I]),_=I<C.length,P=C.slice(0,I);return{environment:u,tableStyles:h,styles:g,sortState:x,setSortState:b,selectedRowIds:y,setSelectedRowIds:v,rows:P,searchQuery:A,onClickApprove:T,onClickDecline:M,isApproveButtonLoading:!1,canEditMembership:p,columnRenderInfo:m,isSubscribed:w,shouldHideActions:k,shouldShowRequest:d,canAdmin:c,guestsCount:C.length,shouldShowLoadMore:_,onLoadMore:R}}({spaceStore:t,domainFilterValues:s,internalDomains:n});return(0,oe.jsxs)("div",{children:[(0,oe.jsxs)("div",{style:c.headerContainer,children:[w&&T?(0,oe.jsxs)("div",{style:c.titleContainer,children:[(0,oe.jsx)("span",{children:(0,oe.jsx)(f().sA,{id:"peopleSectionguestsTab.activeguests.title",defaultMessage:"Active"})}),(0,oe.jsx)("span",{style:c.titleNumber,children:M})]}):void 0,p.length>0&&!C?(0,oe.jsxs)("div",{style:c.actionsContainer,children:[(0,oe.jsx)(Vt().p,{style:c.actionLeftButton,onClick:x,isLoading:y,children:(0,oe.jsxs)("div",{style:c.buttonContainerApprove,children:[(0,oe.jsx)("div",{style:c.buttonIcon,children:(0,Co().m)({width:20,height:16})}),(0,oe.jsx)("div",{style:c.buttonText,children:(0,oe.jsx)(f().sA,{id:"spaceSettings.peopleSection.guestsTable.bulkUpgrade",defaultMessage:"Upgrade {numberOfRequests, plural, one {1 guest} other {{numberOfRequests} guests}} to {isSubscribed, select, true {member} other {admin}}",values:{numberOfRequests:p.length,isSubscribed:A}})})]})}),(0,oe.jsx)("div",{style:c.buttonDivider}),(0,oe.jsx)(Vt().p,{style:c.actionRightButton,onClick:b,children:(0,oe.jsxs)("div",{style:c.buttonContainerDecline,children:[(0,oe.jsx)("div",{style:{...c.buttonIcon,paddingTop:3},children:(0,Yn()._)({width:20,height:16})}),(0,oe.jsx)("div",{style:c.buttonText,children:(0,oe.jsx)(f().sA,{id:"spaceSettings.peopleSection.guestsTable.bulkDecline",defaultMessage:"Remove from workspace"})})]})})]}):void 0]}),(0,oe.jsxs)("div",{style:{marginTop:w&&T?4:-1},children:[(0,oe.jsx)(xe().WE,{allowHorizontalScroll:v,setStickyHeaderRow:!0,columnRenderInfo:j,rows:Nc(h,u),showRowBorders:!0,hideHeaderRowPadding:!0,sortState:u,onSortStateChanged:g,loadMoreMethod:k?{type:"button",onLoadMore:I}:void 0,renderNoRowsComponent:()=>(0,oe.jsx)(ve().A,{isSmall:!0,style:c.emptyMessage,children:S?(0,oe.jsx)(f().sA,{id:"peopleSectionGuestsTab.emptySearch",defaultMessage:"No search results"}):(0,oe.jsx)(f().sA,{id:"peopleSectionGuestsTab.emptyRow",defaultMessage:"No guests"})}),styles:d,multiselect:v?{header:{isDisabled:0===h.length,isSelected:p.length>0&&p.length===h.length,onClick:()=>{p.length===h.length?(m([]),Wd().Y1(r,{from:"guests",action:"deselect_all",row_count:p.length})):(m(h.map((e=>e.id))),Wd().Y1(r,{from:"guests",action:"select_all",row_count:h.length}))}},row:{getDisabledState:()=>!1,getSelectedState:e=>p.includes(e.id),onClick:e=>{m((t=>t.includes(e.id)?(Wd().Y1(r,{from:"guests",action:"deselect_row",row_count:1}),t.filter((t=>t!==e.id))):(Wd().Y1(r,{from:"guests",action:"select_row",row_count:1}),t.concat(e.id))))}}}:void 0}),(0,oe.jsx)(bc,{})]})]})}const Ec={id:"user",headerTitle:(0,oe.jsx)("div",{style:{fontSize:14},children:(0,oe.jsx)(f().sA,{id:"peopleSectionGuestsTab.user",defaultMessage:"User"})}),renderCell:e=>(0,oe.jsx)(Pc,{userId:e.user.userId,spaceStore:e.spaceStore,isInternalGuest:e.isInternalGuest}),widthData:{width:210},sortable:!0},zc={id:"access",headerTitle:(0,oe.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,oe.jsx)(f().sA,{id:"peopleSectionGuestsTab.access",defaultMessage:"Access"})}),renderCell:e=>(0,oe.jsx)(Mc,{userId:e.user.userId,guestPageIds:e.user.guestPageIds,shouldDisableInteraction:e.shouldDisableInteraction}),widthData:{width:180},sortable:!1},Fc={id:"actions",headerTitle:(0,oe.jsx)(oe.Fragment,{}),renderCell:e=>(0,oe.jsx)(hc,{userId:e.user.userId,spaceStore:e.spaceStore,shouldDisableInteraction:e.shouldDisableInteraction}),widthData:{width:300},sortable:!1};function Nc(e,t){let{sortAscending:s}=t;const i=h().Ul(e,(e=>e.email));return s||i.reverse(),i}var Gc=()=>s(42476),Kc=()=>s(353147);const Vc=(0,kt().wt)("checkMarkShield",{viewBox:"0 0 10 11",svg:(0,oe.jsx)("path",{d:"M5.08789 10.4893C5.03906 10.4893 4.9821 10.4795 4.91699 10.46C4.85514 10.4437 4.79167 10.4193 4.72656 10.3867C4.02669 10.0189 3.43262 9.68522 2.94434 9.38574C2.45931 9.08952 2.06868 8.79655 1.77246 8.50684C1.47624 8.21712 1.25977 7.90462 1.12305 7.56934C0.989583 7.23405 0.922852 6.84831 0.922852 6.41211V2.8623C0.922852 2.52051 0.986328 2.26335 1.11328 2.09082C1.24023 1.91829 1.45345 1.77018 1.75293 1.64648C1.84733 1.60742 1.98405 1.55534 2.16309 1.49023C2.34212 1.42188 2.54069 1.35026 2.75879 1.27539C2.98014 1.19727 3.19987 1.12077 3.41797 1.0459C3.63932 0.971029 3.83789 0.904297 4.01367 0.845703C4.19271 0.787109 4.32617 0.743164 4.41406 0.713867C4.52148 0.681315 4.63379 0.655273 4.75098 0.635742C4.87142 0.616211 4.98372 0.606445 5.08789 0.606445C5.19206 0.606445 5.30436 0.616211 5.4248 0.635742C5.5485 0.655273 5.66243 0.681315 5.7666 0.713867C5.85449 0.743164 5.98633 0.787109 6.16211 0.845703C6.34115 0.904297 6.53971 0.971029 6.75781 1.0459C6.97591 1.12077 7.19564 1.19727 7.41699 1.27539C7.63835 1.35026 7.83854 1.42025 8.01758 1.48535C8.19661 1.55046 8.33333 1.60417 8.42773 1.64648C8.72721 1.77018 8.9388 1.91829 9.0625 2.09082C9.18945 2.26335 9.25293 2.52051 9.25293 2.8623V6.41211C9.25293 6.84831 9.1862 7.23568 9.05273 7.57422C8.92253 7.91276 8.70931 8.23014 8.41309 8.52637C8.12012 8.81934 7.73112 9.11393 7.24609 9.41016C6.76107 9.70638 6.16374 10.0319 5.4541 10.3867C5.389 10.4193 5.32389 10.4437 5.25879 10.46C5.19694 10.4795 5.13997 10.4893 5.08789 10.4893ZM4.55078 7.73047C4.6582 7.73047 4.75586 7.70605 4.84375 7.65723C4.9349 7.60514 5.01302 7.5319 5.07812 7.4375L7.34863 3.9707C7.3877 3.90885 7.41862 3.84538 7.44141 3.78027C7.46745 3.71517 7.48047 3.65169 7.48047 3.58984C7.48047 3.4401 7.4235 3.31641 7.30957 3.21875C7.19889 3.12109 7.07031 3.07227 6.92383 3.07227C6.73177 3.07227 6.57064 3.17643 6.44043 3.38477L4.54102 6.40723L3.68652 5.3623C3.62142 5.28092 3.55306 5.22233 3.48145 5.18652C3.41309 5.15072 3.33333 5.13281 3.24219 5.13281C3.0957 5.13281 2.96875 5.18652 2.86133 5.29395C2.75391 5.39811 2.7002 5.52507 2.7002 5.6748C2.7002 5.74642 2.71322 5.81478 2.73926 5.87988C2.7653 5.94499 2.80599 6.01172 2.86133 6.08008L4.00391 7.44727C4.08203 7.54167 4.16504 7.61328 4.25293 7.66211C4.34082 7.70768 4.4401 7.73047 4.55078 7.73047Z"})}),Hc=(0,kt().wt)("globe4",{viewBox:"0 0 12 12",svg:(0,oe.jsx)("path",{d:"M5.99512 10.5156C5.64355 10.5156 5.31315 10.4001 5.00391 10.1689C4.69792 9.94108 4.42773 9.62207 4.19336 9.21191C3.96224 8.7985 3.77995 8.31673 3.64648 7.7666C3.51302 7.21647 3.44629 6.6224 3.44629 5.98438C3.44629 5.3431 3.51302 4.7474 3.64648 4.19727C3.77995 3.64388 3.96224 3.16211 4.19336 2.75195C4.42448 2.33854 4.69466 2.01628 5.00391 1.78516C5.31315 1.55404 5.64355 1.43848 5.99512 1.43848C6.34993 1.43848 6.68197 1.55404 6.99121 1.78516C7.30046 2.01628 7.57064 2.33854 7.80176 2.75195C8.03613 3.16211 8.21842 3.64388 8.34863 4.19727C8.47884 4.7474 8.54395 5.3431 8.54395 5.98438C8.54395 6.6224 8.47721 7.21647 8.34375 7.7666C8.21354 8.31673 8.03125 8.7985 7.79688 9.21191C7.56576 9.62207 7.29557 9.94108 6.98633 10.1689C6.68034 10.4001 6.34993 10.5156 5.99512 10.5156ZM5.99512 2.15137C5.76725 2.15137 5.5459 2.25553 5.33105 2.46387C5.11947 2.6722 4.92904 2.95703 4.75977 3.31836C4.59375 3.67643 4.46191 4.08496 4.36426 4.54395C4.2666 5.00293 4.21777 5.48307 4.21777 5.98438C4.21777 6.48242 4.2666 6.95931 4.36426 7.41504C4.46191 7.87077 4.59375 8.27767 4.75977 8.63574C4.92904 8.99382 5.11947 9.27702 5.33105 9.48535C5.5459 9.69368 5.76725 9.79785 5.99512 9.79785C6.22624 9.79785 6.44759 9.69368 6.65918 9.48535C6.87402 9.27702 7.06445 8.99382 7.23047 8.63574C7.39974 8.27767 7.5332 7.87077 7.63086 7.41504C7.72852 6.95931 7.77734 6.48242 7.77734 5.98438C7.77734 5.48307 7.72852 5.00293 7.63086 4.54395C7.5332 4.08496 7.39974 3.67643 7.23047 3.31836C7.06445 2.95703 6.87402 2.6722 6.65918 2.46387C6.44759 2.25553 6.22624 2.15137 5.99512 2.15137ZM5.61914 1.50684H6.37598V10.4229H5.61914V1.50684ZM5.99512 7.47363C6.51921 7.47363 7.01562 7.51432 7.48438 7.5957C7.95312 7.67708 8.37142 7.79427 8.73926 7.94727C9.1071 8.10026 9.40007 8.2793 9.61816 8.48438L9.04199 8.96289C8.84017 8.8099 8.58464 8.67806 8.27539 8.56738C7.9694 8.45671 7.62272 8.3737 7.23535 8.31836C6.84798 8.25977 6.43457 8.23047 5.99512 8.23047C5.55892 8.23047 5.14714 8.25977 4.75977 8.31836C4.3724 8.3737 4.02409 8.45671 3.71484 8.56738C3.40885 8.67806 3.15332 8.8099 2.94824 8.96289L2.37207 8.48438C2.59342 8.2793 2.88802 8.10026 3.25586 7.94727C3.6237 7.79427 4.04199 7.67708 4.51074 7.5957C4.97949 7.51432 5.47428 7.47363 5.99512 7.47363ZM10.4189 5.59375V6.35059H1.57617V5.59375H10.4189ZM5.99512 4.5C5.47428 4.5 4.97949 4.45931 4.51074 4.37793C4.04199 4.29329 3.6237 4.17611 3.25586 4.02637C2.88802 3.87337 2.59342 3.69434 2.37207 3.48926L2.94824 3.00586C3.15332 3.16211 3.41048 3.29557 3.71973 3.40625C4.02897 3.51367 4.37728 3.59668 4.76465 3.65527C5.15202 3.71387 5.56217 3.74316 5.99512 3.74316C6.43457 3.74316 6.84798 3.71387 7.23535 3.65527C7.62272 3.59668 7.9694 3.51367 8.27539 3.40625C8.58464 3.29557 8.84017 3.16211 9.04199 3.00586L9.61816 3.48926C9.40007 3.69434 9.1071 3.87337 8.73926 4.02637C8.37142 4.17611 7.95312 4.29329 7.48438 4.37793C7.01562 4.45931 6.51921 4.5 5.99512 4.5ZM5.99512 11.1309C5.28874 11.1309 4.62467 10.9958 4.00293 10.7256C3.38118 10.4587 2.83268 10.0876 2.35742 9.6123C1.88216 9.1403 1.50944 8.59342 1.23926 7.97168C0.972331 7.34993 0.838867 6.68424 0.838867 5.97461C0.838867 5.26823 0.972331 4.60417 1.23926 3.98242C1.50944 3.36068 1.88053 2.81217 2.35254 2.33691C2.8278 1.86165 3.3763 1.49056 3.99805 1.22363C4.62305 0.953451 5.28874 0.818359 5.99512 0.818359C6.7015 0.818359 7.36556 0.953451 7.9873 1.22363C8.6123 1.49056 9.16081 1.86165 9.63281 2.33691C10.1081 2.81217 10.4808 3.36068 10.751 3.98242C11.0212 4.60417 11.1562 5.26823 11.1562 5.97461C11.1562 6.68424 11.0212 7.34993 10.751 7.97168C10.4808 8.59342 10.1081 9.1403 9.63281 9.6123C9.16081 10.0876 8.61393 10.4587 7.99219 10.7256C7.37044 10.9958 6.70475 11.1309 5.99512 11.1309ZM5.99512 10.1396C6.56803 10.1396 7.10514 10.0306 7.60645 9.8125C8.10775 9.5944 8.55046 9.29492 8.93457 8.91406C9.31868 8.52995 9.61816 8.08724 9.83301 7.58594C10.0511 7.08138 10.1602 6.54427 10.1602 5.97461C10.1602 5.40495 10.0511 4.86947 9.83301 4.36816C9.61816 3.86361 9.31868 3.4209 8.93457 3.04004C8.55046 2.65592 8.10612 2.35482 7.60156 2.13672C7.10026 1.91862 6.56478 1.80957 5.99512 1.80957C5.42546 1.80957 4.88835 1.91862 4.38379 2.13672C3.88249 2.35482 3.43978 2.65592 3.05566 3.04004C2.6748 3.4209 2.37533 3.86361 2.15723 4.36816C1.94238 4.86947 1.83496 5.40495 1.83496 5.97461C1.83496 6.54427 1.94238 7.08138 2.15723 7.58594C2.37533 8.08724 2.6748 8.52995 3.05566 8.91406C3.43978 9.29492 3.88249 9.5944 4.38379 9.8125C4.88835 10.0306 5.42546 10.1396 5.99512 10.1396Z"})});var $c=()=>s(785606),Yc=()=>s(567865);const Jc=(0,f().YK)({infoTitle:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.title",defaultMessage:"Find teammates more easily by filtering to your workspaces email domains"},infoDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.description",defaultMessage:"Upgrade these guests to members for better collaboration and reduced page-by-page permissions."},emailDomainTooltip:{defaultMessage:"Your workspaces email domains include allowed email domains, verified domains, and workspace owner email domains.",id:"spacePermissionsSettings.guestsTab.internalGuestBanner.tooltip"},overLimitTitle:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.title",defaultMessage:"Your workspace is over the {limit}-guest limit"},upsellDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.upselldescription",defaultMessage:"Find teammates who are currently guests by filtering to your workspaces email domains and upgrade them to members to continue collaborating. To get more guest seats, <upgradelink>upgrade your plan</upgradelink> or <saleslink>reach out to sales</saleslink>."},contactSalesDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.contactSales.description",defaultMessage:"Find teammates who are currently guests by filtering to your workspaces email domains and upgrade them to members to continue collaborating. To get more guest seats, <saleslink>reach out to sales</saleslink>."},salesAssistedDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.salesAssisted.description",defaultMessage:"Find teammates who are currently guests by filtering to your workspaces email domains and upgrade them to members to continue collaborating. To get more guest seats, reach out to your account manager."},nonAdminTooltip:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.nonAdmin.tooltip",defaultMessage:"New users can continue to be added as members. To resume adding guests, contact your workspace owner to upgrade or remove existing guests from your workspace."}}),Qc={warning_upsell:{iconGroup:Gc().A,tint:"yellow",label:Jc.overLimitTitle,description:Jc.upsellDescription,tooltip:Jc.emailDomainTooltip},warning_contact_sales:{iconGroup:Gc().A,tint:"yellow",label:Jc.overLimitTitle,description:Jc.contactSalesDescription,tooltip:Jc.emailDomainTooltip},warning_sales_assisted:{iconGroup:Gc().A,tint:"yellow",label:Jc.overLimitTitle,description:Jc.salesAssistedDescription,tooltip:Jc.emailDomainTooltip},warning_nonadmin:{iconGroup:Gc().A,tint:"yellow",label:Jc.overLimitTitle,tooltip:Jc.nonAdminTooltip},info:{iconGroup:_c().u,tint:"gray",label:Jc.infoTitle,description:Jc.infoDescription,tooltip:Jc.emailDomainTooltip}};function Zc(e){let{spaceStore:t,internalDomains:s,domainFilterValues:i,setDomainFilterValues:n}=e;const a=(0,Hd().r1)({spaceStore:t}),r=s.length>0;if(!r)return null;const o=r&&a,l=(0,oe.jsx)(Xc,{spaceStore:t});return o||l?(0,oe.jsxs)(Rt().Y1,{padding:"16px 0px",gap:16,children:[l,o?(0,oe.jsx)(eu,{internalDomains:s,domainFilterValues:i??[],setDomainFilterValues:n}):void 0]}):null}function Xc(e){let{spaceStore:t}=e;const s=function(e){let{spaceStore:t}=e;const s=(0,a().v3)(),i=(0,Hd().r1)({spaceStore:t}),n=s.currentUser.id,r=t.id,o=(0,Wt()._X)({name:"internal_guests",spaceId:r,userId:n,amount:0}),l=(0,zt().q)();if(!o)return null;return(0,Ws().N9)(o,{available:()=>i?{...Qc.info,messageValues:{}}:null,unavailable:e=>{let{limit:t,upsell:s}=e;return i?"sales_assisted"===l?{...Qc.warning_sales_assisted,messageValues:{limit:t.total}}:"none"===s.type||"enterprise"===s.product&&"sales_eligible"===l?{...Qc.warning_contact_sales,messageValues:{limit:t.total,saleslink:e=>(0,oe.jsx)(yi().A,{onClick:()=>(0,Lt().lK)({initialQuestion:"manage_guests",openedFrom:"people_guest_limit_banner"}),children:e})}}:"product"===s.type?{...Qc.warning_upsell,messageValues:{limit:t.total,saleslink:e=>(0,oe.jsx)(yi().A,{onClick:()=>(0,Lt().lK)({initialQuestion:"manage_guests",openedFrom:"people_guest_limit_banner"}),children:e}),upgradelink:e=>(0,oe.jsx)(yi().A,{onClick:()=>{At().A.setState({...At().A.state,currentTab:"plans",defaultSubtab:void 0})},children:e})}}:(0,_s().HB)(s):{...Qc.warning_nonadmin,messageValues:{limit:t.total}}}})}({spaceStore:t});if(!s)return null;const i=(0,oe.jsx)(ye().A,{style:{width:250},textWrap:!0,renderTooltip:()=>(0,oe.jsx)(f().sA,{...s.tooltip}),originGap:6,placement:Ae().W.Bottom,alignment:Ae().C.Start,render:e=>(0,oe.jsx)("div",{style:{paddingLeft:3,display:"inline-block",verticalAlign:"text-bottom"},...e,children:(0,Hn().$)({width:14})})});return(0,oe.jsx)($c().I,{children:(0,oe.jsx)(sr().l,{iconGroup:s.iconGroup,display:"inline",tint:s.tint,label:(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(f().sA,{...s.label,values:s.messageValues}),s.description?void 0:i]}),description:s.description&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(f().sA,{...s.description,values:s.messageValues}),i]})})})}function eu(e){let{internalDomains:t,domainFilterValues:s,setDomainFilterValues:i}=e;const n=[...t.map((e=>({key:e.url,value:`${e.url}`,title:tu({domain:`${e.url}`})}))),{key:"other",value:"other",title:tu({domain:"other"})}];return(0,oe.jsx)(Yc().uI,{pillIcon:Kc().b,pillTitle:s?(0,oe.jsx)(f().sA,{id:"spacePermissionsSettings.guestsTab.internalDomainFilter.filtered",defaultMessage:"Email domain: {domainFilter}",values:{domainFilter:s.join(", ")}}):(0,oe.jsx)(f().sA,{id:"spacePermissionsSettings.guestsTab.internalDomainFilter.placeholder",defaultMessage:"Email domain"}),selectedItems:s,setSelectedItems:e=>{i(e)},items:n})}function tu(e){let{domain:t}=e;return(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:["other"===t?(0,oe.jsx)(f().sA,{defaultMessage:"Other",id:"spacePermissionsSettings.guestsTab.internalDomainFilter.otherOptionLabel"}):`@${t}`,(0,oe.jsx)("div",{style:{paddingLeft:5},children:"other"===t?Hc({width:14}):Vc({width:14})})]})}const su=(0,kt().wt)("peopleFillCheckmark",{viewBox:"0 0 20 20",svg:(0,oe.jsx)("path",{d:"M14.5391 10.3174C14.4115 10.3174 14.2975 10.29 14.1973 10.2354C14.097 10.1807 13.999 10.0964 13.9033 9.98242L12.29 8.01367C12.1715 7.86328 12.1123 7.70833 12.1123 7.54883C12.1123 7.38021 12.1693 7.23665 12.2832 7.11816C12.4017 6.99967 12.5452 6.94043 12.7139 6.94043C12.8141 6.94043 12.9053 6.96322 12.9873 7.00879C13.0739 7.0498 13.1582 7.12272 13.2402 7.22754L14.5117 8.84082L17.2188 4.51367C17.3555 4.28581 17.5309 4.17188 17.7451 4.17188C17.9046 4.17188 18.0482 4.22428 18.1758 4.3291C18.3034 4.42936 18.3672 4.56608 18.3672 4.73926C18.3672 4.81673 18.349 4.89648 18.3125 4.97852C18.2806 5.05599 18.2419 5.12891 18.1963 5.19727L15.1406 9.97559C14.9948 10.2035 14.7943 10.3174 14.5391 10.3174ZM2.85645 16.2441C2.47363 16.2441 2.17285 16.1576 1.9541 15.9844C1.73535 15.8112 1.62598 15.5742 1.62598 15.2734C1.62598 14.8314 1.75814 14.3688 2.02246 13.8857C2.29134 13.4027 2.67643 12.9492 3.17773 12.5254C3.68359 12.1016 4.29199 11.7575 5.00293 11.4932C5.71387 11.2288 6.51139 11.0967 7.39551 11.0967C8.28418 11.0967 9.08398 11.2288 9.79492 11.4932C10.5059 11.7575 11.112 12.1016 11.6133 12.5254C12.1191 12.9492 12.5065 13.4027 12.7754 13.8857C13.0443 14.3688 13.1787 14.8314 13.1787 15.2734C13.1787 15.5742 13.0693 15.8112 12.8506 15.9844C12.6318 16.1576 12.3311 16.2441 11.9482 16.2441H2.85645ZM7.40234 9.87988C6.9056 9.87988 6.44759 9.74544 6.02832 9.47656C5.61361 9.20768 5.27865 8.84538 5.02344 8.38965C4.77279 7.93392 4.64746 7.4235 4.64746 6.8584C4.64746 6.30241 4.77279 5.80111 5.02344 5.35449C5.27865 4.90332 5.61589 4.54557 6.03516 4.28125C6.45443 4.01693 6.91016 3.88477 7.40234 3.88477C7.89909 3.88477 8.3571 4.01465 8.77637 4.27441C9.19564 4.53418 9.5306 4.88965 9.78125 5.34082C10.0365 5.78743 10.1641 6.28874 10.1641 6.84473C10.1641 7.41439 10.0365 7.92936 9.78125 8.38965C9.5306 8.84538 9.19564 9.20768 8.77637 9.47656C8.3571 9.74544 7.89909 9.87988 7.40234 9.87988Z"})});var iu=()=>s(196131),nu=()=>s(920773);function au(e){let{request:t,shouldDisableInteraction:s,requestType:n,handleApprove:r,handleDecline:o}=e;const d=function(e){let{shouldDisableInteraction:t}=e;return(0,l().IS)((e=>({approveButton:{background:e.outlineBlueButtonHoveredBackground,color:e.blueColor,fontWeight:510,fontSize:14,borderRadius:4,paddingLeft:10,paddingRight:10},declineButton:{marginRight:10,borderRadius:4,paddingLeft:10,paddingRight:10,color:e.text.secondary},container:{opacity:t?.5:1,display:"flex",width:"100%",justifyContent:"flex-end"}})),[t])}({shouldDisableInteraction:s}),[c,u]=(0,i.useState)(!1),g=(0,a().v3)(),p=(0,i.useCallback)((()=>{Wd().jR(g,{from:`${n}_request`,button_name:"decline"}),o(t)}),[g,n,t,o]),m=(0,i.useCallback)((async()=>{u(!0),Wd().jR(g,{from:`${n}_request`,button_name:"approve"}),await r(t),u(!1)}),[g,t,n,r]);return(0,oe.jsxs)("div",{style:d.container,children:[(0,oe.jsx)("div",{children:(0,oe.jsx)(Vt().p,{style:d.declineButton,onClick:p,disabled:s,children:(0,oe.jsx)(f().sA,{id:"spaceSettings.peopleSection.requestsTable.Decline",defaultMessage:"Decline"})})}),(0,oe.jsx)("div",{children:(0,oe.jsx)(Vt().p,{style:d.approveButton,onClick:m,isLoading:c,disabled:s,children:(0,oe.jsx)(f().sA,{id:"spaceSettings.peopleSection.requestsTable.approve",defaultMessage:"Approve"})})})]})}function ru(e){const{isModalOpen:t,handleClickDecline:s,handleClickDismiss:n,requestType:r,requests:l}=e,d=function(e,t,s){const n=(0,a().v3)();return(0,i.useCallback)((()=>{s(),Wd().jR(n,{from:"member"===e?"member_request":"guest_request",button_name:"dismiss_in_dialog",count:t.length})}),[s,n,t,e])}(r,l,n),c=(0,f().tz)(),u=(0,o().K8)((()=>{var e;return null===(e=l[0])||void 0===e||null===(e=e.createdByActorsWithReason[0])||void 0===e?void 0:e.actor.getDisplayName(c)}),[l,c]),g=(0,o().K8)((()=>{var e;return null===(e=l[0])||void 0===e?void 0:e.forActor.email}),[l]);return 0===l.length?null:(0,oe.jsx)(xc,{isModalOpen:t,handleDismiss:d,handleConfirm:()=>s(l),title:(0,oe.jsx)(f().sA,{id:"RequestBulkDeclineConfirmationDialog.title",defaultMessage:"Decline {numberOfRequests, plural, one {{requestType} request for {firstRequestEmail}} other {{numberOfRequests} {requestType} requests}}?",values:{numberOfRequests:l.length,requestType:r,firstRequestEmail:g}}),description:(0,oe.jsx)(f().sA,{id:"RequestBulkDeclineConfirmationDialog.description",defaultMessage:"{numberOfRequests, plural, one {To add them as a {requestType} in the future, {inviter} must resubmit a request, or an admin must invite them} other {Requests must be resubmitted, or an admin must add them as {isMemberRequest, select, true {members} other {guests}} in the future}}.",values:{numberOfRequests:l.length,requestType:r,isMemberRequest:"member"===r,inviter:u}}),ctaText:(0,oe.jsx)(f().sA,{id:"RequestBulkDeclineConfirmationDialog.decline",defaultMessage:"Decline"})})}function ou(e){let{createdByActorsWithReason:t,latestRequestTime:s}=e;return(0,oe.jsx)("div",{style:{width:241,maxHeight:600,overflowY:"auto",whiteSpace:"pre-wrap",padding:"12px 12px 12px 12px"},children:t.map((e=>(0,oe.jsx)(lu,{createdByActorWithReason:e,latestRequestTime:s},e.actor.id)))})}function lu(e){let{createdByActorWithReason:t,latestRequestTime:s}=e;const{requestorName:i,reason:n,actor:a,styles:r}=function(e){let{createdByActorWithReason:t}=e;const{actor:s,reason:i}=t,n=(0,f().tz)(),a=(0,o().K8)((()=>s.getDisplayName(n)),[n,s]),r=(0,l().IS)((e=>({avatar:{width:24,height:24},metadata:{display:"flex",alignItems:"center",gap:6,flex:"1 0 0"},userName:{textOverflow:"ellipsis",fontSize:14,fontWeight:510,overflow:"hidden",width:100,whiteSpace:"nowrap"},timestamp:{color:e.text.tertiary,textAlign:"right",fontSize:12,fontWeight:400,lineHeight:"15px"},header:{display:"flex",alignItems:"center",gap:10},reason:{paddingLeft:30,fontSize:14,fontWeight:400,color:e.text.primary,display:"inline-block",overflowWrap:"break-word",inlineSize:200},noReason:{color:e.text.quaternary}})),[]);return{requestorName:a,reason:i,actor:s,styles:r}}({createdByActorWithReason:t});return(0,oe.jsxs)("div",{children:[(0,oe.jsxs)("div",{style:r.header,children:[(0,oe.jsx)(Pn().A,{hasTooltip:!0,userValue:a,style:r.avatar,size:24,avatarShouldShowShadow:!1}),(0,oe.jsxs)("div",{style:r.metadata,children:[(0,oe.jsx)("div",{style:r.userName,children:i}),(0,oe.jsx)(ve().A,{isSmall:!0,isSecondaryColor:!0,isMultiline:!0,style:r.timestamp,children:(0,Oa().nl)(s)})]})]}),(0,oe.jsx)("span",{style:r.reason,children:n||(0,oe.jsx)("div",{style:r.noReason,children:(0,oe.jsx)(f().sA,{id:"requestReasonContent.noReason",defaultMessage:"No message"})})})]})}function du(e){let{request:t,shouldDisableInteraction:s,requestType:i}=e;const{styles:n,firstRequestorName:r,numberOfRequestors:d}=function(e){let{request:t,shouldDisableInteraction:s}=e;const i=(0,l().IS)((e=>({firstRequestorName:{color:e.text.secondary,opacity:s?.5:1,maxWidth:118,...S().RC},buttonSuffix:{color:e.text.tertiary,paddingLeft:4},chevron:{width:10,marginLeft:4,fill:e.icon.tertiary}})),[s]),n=(0,a().v3)(),r=(0,f().tz)(),d=(0,o().K8)((()=>{if(0===t.createdByActorsWithReason.length)return;return new(ae().LU)(n,{table:O().oo,id:t.createdByActorsWithReason[0].actor.id}).getDisplayName(r)}),[n,r,t.createdByActorsWithReason]);return{styles:i,firstRequestorName:d,numberOfRequestors:t.createdByActorsWithReason?t.createdByActorsWithReason.length:0}}({request:t,shouldDisableInteraction:s}),c=(0,a().v3)();return void 0===r||0===d?null:(0,oe.jsx)(Sa().Ay,{popupType:Sa().z7.Popup,onClick:()=>{Wd().jR(c,{from:`${i}_request`,button_name:"open_requested_by"})},renderOrigin:e=>(0,oe.jsx)(Vt().p,{...e,disabled:s,children:(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)("span",{style:n.firstRequestorName,title:r,children:r}),(0,oe.jsx)("span",{style:n.buttonSuffix,children:d>1?(0,oe.jsxs)("div",{children:["+",d-1]}):null}),(0,Al().b)(n.chevron)]})}),render:()=>(0,oe.jsx)(ou,{createdByActorsWithReason:t.createdByActorsWithReason,latestRequestTime:t.accessRequest.created_time})})}function cu(e){let{request:t,spaceStore:s,shouldDisableInteraction:i}=e;const{accessRequest:n,forActor:a}=t,r=function(e){let{accessRequest:t}=e;return(0,o().K8)((()=>t.isGuestInviteRequest()?t.getAttributes().permission_records_and_roles.map((e=>e.id)):[]),[t])}({accessRequest:n});return(0,oe.jsx)(Tc,{pageIds:r,guestUserId:a.id,shouldDisableInteraction:i,from:"guest_request"})}var uu=()=>s(854150);function gu(e){let{spaceStore:t,request:n}=e;const{teamStores:a}=function(e){let{request:{accessRequest:t},spaceStore:s}=e;const n=(0,Ls().uJ)({spaceStore:s}),a=(0,i.useMemo)((()=>((null==n?void 0:n.teams)??[]).map((e=>e.store))),[n]),r=(0,Ls().qQ)(s),l=(0,Ls().D5)(),d=(0,i.useMemo)((()=>l?a:r),[a,r,l]),c=(0,o().K8)((()=>{var e,i;const n=d.filter((e=>e.isDefault())),a=null===(e=t.getAttributes())||void 0===e?void 0:e.origin_table,r=null===(i=t.getAttributes())||void 0===i?void 0:i.origin_id;if(a&&r){const e=ae().h4.createChildStore(s,{table:uu().yK,id:r});n.includes(e)||n.push(e)}return n}),[t,s,d]);return{teamStores:c}}({request:n,spaceStore:t});return(0,oe.jsx)(s(791570).A,{teamStores:a,from:"member_request"})}function pu(e){let{request:t,spaceStore:s}=e;const{relativeDate:i,email:n,userStore:a,styles:r}=function(e){let{request:{accessRequest:t,forActor:s},spaceStore:i}=e;const n=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",fontSize:S().J.UIRegular.desktop,gap:10,flex:"1 0 0",maxWidth:50},userAvatar:{},title:{height:17,alignSelf:"stretch",fontSize:S().J.UIRegular.desktop,fontStyle:"normal",fontWeight:510,lineHeight:"18px",maxWidth:160,...S().RC},subtitle:{height:17,alignSelf:"stretch",fontSize:S().J.UISmall.desktop,fontStyle:"normal",fontWeight:400,lineHeight:"15px",color:e.text.secondary,maxWidth:160,...S().RC}})),[]),a=ae().LU.createChildStore(i,{table:O().oo,id:s.id}),{email:r}=(0,o().K8)((()=>({email:a.getEmail()})),[a]),d=(0,f().tz)(),c=(0,o().K8)((()=>t.created_time),[t]),u=_().KQ(c,(0,Q().P)()),g=(0,Ba().ZF)({value:u,date_format:"relative",userTimeZone:(0,Q().P)(),intl:d,allowRelativeDates:!0});return{email:r,styles:n,userStore:a,relativeDate:g}}({request:t,spaceStore:s});return(0,oe.jsxs)("div",{style:r.container,children:[(0,oe.jsx)(Pn().A,{style:r.userAvatar,userStore:a,size:28}),(0,oe.jsxs)("div",{children:[(0,oe.jsx)("div",{style:r.title,title:n,children:n}),(0,oe.jsx)("div",{style:r.subtitle,title:i,children:i})]})]})}function mu(e){let{spaceStore:t,requests:s,requestType:n,domainFilterValues:r,internalDomains:d}=e;const c=(0,a().v3)(),[u,g]=(0,i.useState)(Dc),[p,m]=(0,i.useState)({column:fu,sortAscending:!0}),S=(0,o().K8)((()=>Rc().A.state.searchQuery),[]),[x,b]=(0,i.useState)([]),{rows:y,hasMore:v}=function(e){let{spaceStore:t,requestType:s,requests:i,searchQuery:n,domainFilters:a=[],internalDomains:r=[],limit:l,selectedRowIds:d,sortState:c}=e;const u=(0,o().K8)((()=>i.map((e=>{const i=ae().LU.createChildStore(t,{table:O().oo,id:e.forActor.id});return{id:e.accessRequest.id,spaceStore:t,isClickable:!1,request:e,requestType:s,email:i.getEmail(),shouldDisableInteraction:d.includes(e.accessRequest.id)}}))),[t,s,i,d]),g=(0,h().oE)(a),p=u.filter((e=>{var t;const s=e.email?(0,Ko().zN)(e.email):void 0,i=(0,iu().C7)(e.email,r);return!(n&&(null===(t=e.email)||void 0===t||!t.includes(n)))&&(!(g.length>0)||g.some((e=>"other"===e?!i:s===e)))})),m=function(e,t){let{sortAscending:s}=t;const i=(0,h().Ul)(e,(e=>e.email));s||i.reverse();return i}(p,c),f=m.length>l;return{rows:m.slice(0,l),hasMore:f}}({spaceStore:t,requestType:n,requests:s,domainFilters:(0,h().oE)(r),internalDomains:d,searchQuery:S,limit:u,sortState:p,selectedRowIds:x}),j=(0,i.useMemo)((()=>s.filter((e=>x.includes(e.accessRequest.id)))),[s,x]),[A,C]=(0,i.useState)(!1),[w,T]=(0,i.useState)(void 0),M=!y.some((e=>x.includes(e.id))),k=(0,i.useCallback)((async()=>{C(!0),Wd().jR(c,{from:`${n}_request`,button_name:"bulk_approve",count:j.length});const e=await yu({environment:c,spaceStore:t,requests:j.map((e=>e.accessRequest)),requestType:n,status:"approved"});C(!1),e&&b([])}),[c,t,j,n]),I=(0,i.useCallback)((()=>{Wd().jR(c,{from:`${n}_request`,button_name:"bulk_decline",count:j.length}),T(j)}),[c,n,T,j]),D=(0,i.useCallback)((()=>T(void 0)),[T]),R=function(e){let{requestType:t,onClickApprove:s,onClickDecline:i}=e;return"member"===t?[fu,hu,xu,bu({onClickApprove:s,onClickDecline:i})]:[fu,Su,xu,bu({onClickApprove:s,onClickDecline:i})]}({requestType:n,onClickApprove:e=>yu({environment:c,spaceStore:t,requests:[e.accessRequest],requestType:n,status:"approved"}),onClickDecline:e=>T([e])}),_=(0,l().IS)((e=>({container:{paddingBottom:30},headerContainer:{display:"flex",justifyContent:"space-between"},titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,minHeight:30,paddingTop:10},titleNumber:{color:e.text.tertiary},actionsContainer:{display:"flex",borderRadius:6,border:`1px solid ${e.stroke.primary}`,boxShadow:"0px 2px 12px 0px rgba(29, 27, 22, 0.06)"},actionLeftButton:{borderRadius:"4px 0px 0px 4px",paddingLeft:10,paddingRight:0,height:30},buttonContainerApprove:{display:"flex",padding:"0px 12px 0px 0px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.uiBluePrimary},buttonContainerDecline:{display:"flex",padding:"0px 12px 0px 10px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.secondary},buttonIcon:{width:20,height:20,paddingTop:1,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:10},buttonText:{fontSize:14,fontWeight:510},buttonDivider:{width:1,background:e.stroke.secondary},actionRightButton:{borderRadius:"0px 4px 4px 0px",paddingLeft:0,paddingRight:0,height:30},noRowContainer:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`},noRowText:{color:e.text.secondary,fontSize:14,fontWeight:400,textAlign:"center"}})),[]),P=function(e){return(0,l().IS)((t=>({...(0,xe().rC)({columnRenderInfo:e,theme:t,containerMarginTop:0})})),[e])}(R);return 0===s.length?null:(0,oe.jsxs)("div",{style:_.container,children:[(0,oe.jsxs)("div",{style:_.headerContainer,children:[(0,oe.jsxs)("div",{style:_.titleContainer,children:[(0,oe.jsx)("div",{children:(0,oe.jsx)(f().sA,{id:"peopleSectionMembersTab.memberRequests.title",defaultMessage:"Requests"})}),(0,oe.jsx)("span",{style:_.titleNumber,children:s.length})]}),x.length>0&&!M?(0,oe.jsxs)("div",{style:_.actionsContainer,children:[(0,oe.jsx)(nu().p,{style:_.actionLeftButton,onClick:k,isLoading:A,children:(0,oe.jsxs)("div",{style:_.buttonContainerApprove,children:[(0,oe.jsx)("div",{style:_.buttonIcon,children:su({width:20,height:20})}),(0,oe.jsx)("div",{style:_.buttonText,children:(0,oe.jsx)(f().sA,{id:"spaceSettings.peopleSection.requestsTable.bulkApprove",defaultMessage:"Approve {numberOfRequests, plural, one {1 request} other {{numberOfRequests} requests}}",values:{numberOfRequests:x.length}})})]})}),(0,oe.jsx)("div",{style:_.buttonDivider}),(0,oe.jsx)(nu().p,{style:_.actionRightButton,onClick:I,isLoading:!1,children:(0,oe.jsxs)("div",{style:_.buttonContainerDecline,children:[(0,oe.jsx)("div",{style:{..._.buttonIcon,paddingTop:3},children:Sc({width:20,height:20})}),(0,oe.jsx)("div",{style:_.buttonText,children:(0,oe.jsx)(f().sA,{id:"spaceSettings.peopleSection.requestsTable.bulkDecline",defaultMessage:"Decline"})})]})})]}):void 0]}),(0,oe.jsx)("div",{style:{marginTop:4},children:(0,oe.jsx)(xe().WE,{allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:R,rows:y,showRowBorders:!0,hideHeaderRowPadding:!0,sortState:p,onSortStateChanged:m,renderNoRowsComponent:()=>(0,oe.jsx)("div",{style:_.noRowContainer,children:(0,oe.jsx)("div",{style:_.noRowText,children:(0,oe.jsx)(f().sA,{id:"peopleSectionRequestTable.emptySearch",defaultMessage:"No search results"})})}),styles:P,getStyleForRow:e=>{if(e.shouldDisableInteraction)return{backgroundColor:"rgba(35, 131, 226, 0.07)"}},loadMoreMethod:v?{type:"button",onLoadMore:()=>g(u+Dc)}:void 0,multiselect:s.length>0?{header:{isDisabled:0===y.length,isSelected:x.length>0&&x.length===y.length,onClick:()=>{x.length===y.length?(b([]),Wd().Y1(c,{from:`${n}_request`,action:"deselect_all",row_count:x.length})):(b(y.map((e=>e.id))),Wd().Y1(c,{from:`${n}_request`,action:"select_all",row_count:y.length}))}},row:{getDisabledState:e=>!1,getSelectedState:e=>x.includes(e.id),onClick:e=>{b((t=>t.includes(e.id)?(Wd().Y1(c,{from:`${n}_request`,action:"deselect_row",row_count:1}),t.filter((t=>t!==e.id))):(Wd().Y1(c,{from:`${n}_request`,action:"select_row",row_count:1}),t.concat(e.id))))}}}:void 0})}),(0,oe.jsx)(ru,{isModalOpen:(0,_s().O9)(w),requestType:n,requests:w??[],handleClickDecline:async e=>{await yu({environment:c,spaceStore:t,requests:e.map((e=>e.accessRequest)),requestType:n,status:"rejected"})&&b([]),T(void 0)},handleClickDismiss:D})]})}const fu={id:"user",headerTitle:(0,oe.jsx)("div",{style:{fontSize:14},children:(0,oe.jsx)(f().sA,{id:"peopleSectionRequestsTable.user",defaultMessage:"User"})}),renderCell:e=>(0,oe.jsx)(pu,{request:e.request,spaceStore:e.spaceStore}),widthData:{width:219},sortable:!0},hu={id:"teamspaces",headerTitle:(0,oe.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,oe.jsx)(f().sA,{id:"peopleSectionRequestsTable.teamspaces",defaultMessage:"Teamspaces"})}),renderCell:e=>(0,oe.jsx)(gu,{spaceStore:e.spaceStore,request:e.request}),widthData:{width:175},sortable:!1},Su={id:"pages",headerTitle:(0,oe.jsx)("div",{style:{paddingLeft:8,fontSize:14,minWidth:175,textAlign:"left"},children:(0,oe.jsx)(f().sA,{id:"peopleSectionRequestsTable.pages",defaultMessage:"Access"})}),renderCell:e=>(0,oe.jsx)(cu,{request:e.request,spaceStore:e.spaceStore,shouldDisableInteraction:e.shouldDisableInteraction}),widthData:{width:175},sortable:!1},xu={id:"requestBy",headerTitle:(0,oe.jsx)("div",{style:{paddingLeft:8,fontSize:14,minWidth:160,textAlign:"left"},children:(0,oe.jsx)(f().sA,{id:"peopleSectionRequestsTable.requestBy",defaultMessage:"Requested by"})}),renderCell:e=>(0,oe.jsx)(du,{request:e.request,shouldDisableInteraction:e.shouldDisableInteraction,requestType:e.requestType}),widthData:{width:120},sortable:!1};function bu(e){let{onClickApprove:t,onClickDecline:s}=e;return{id:"actions",headerTitle:(0,oe.jsx)("div",{style:{minWidth:155}}),renderCell:e=>(0,oe.jsx)(au,{request:e.request,shouldDisableInteraction:e.shouldDisableInteraction,requestType:e.requestType,handleApprove:t,handleDecline:s}),widthData:{width:100},sortable:!1}}async function yu(e){let t,{environment:s,spaceStore:i,requests:n,requestType:a,status:r}=e;if(0===n.length)return!0;if("member"===a){const e=n.filter((e=>"guest_invite_request"!==e.getType())),a=n.filter((e=>"guest_invite_request"===e.getType())),o=await x().p4({environment:s,store:i,requests:e,status:r,from:"requests_center"}),l=await x().KB({environment:s,store:i,requests:a,status:r,from:"requests_center"});t={failedUsers:o.failedUsers.concat(l.failedUsers),resolvedUsers:o.resolvedUsers.concat(l.resolvedUsers)}}else"guest"===a?t=await x().aV({environment:s,requests:n,status:r,from:"requests_center"}):(0,_s().HB)(a);const o=function(e){let{requestType:t,result:{resolvedUsers:s,failedUsers:i},status:n}=e;if("guest"===t&&"approved"===n&&s.length>0)return{label:(0,oe.jsx)(f().sA,{id:"PeopleSectionRequestsTable.bulkApproveToast.guests",defaultMessage:"Approved {numberOfSuccesses, plural, one {guest request for {userEmail}} other {{numberOfSuccesses} guest requests}}",values:{numberOfSuccesses:s.length,userEmail:s[0].getEmail()}})};if("guest"===t&&"approved"===n&&i.length>0)return{label:(0,oe.jsx)(f().sA,{id:"PeopleSectionRequestsTable.bulkApproveToast.guests.failed",defaultMessage:"Failed approve {numberOfRequests, plural, one {guest request for {userEmail}} other {{numberOfRequests} guest requests}}, please try again.",values:{numberOfRequests:i.length,userEmail:i[0].getEmail()}})};if("guest"===t&&"rejected"===n&&s.length>0)return{label:(0,oe.jsx)(f().sA,{id:"PeopleSectionRequestsTable.bulkDeclineToast.guests.success",defaultMessage:"Declined {numberOfSuccesses, plural, one {guest request for {userEmail}} other {{numberOfSuccesses} guest requests}}",values:{numberOfSuccesses:s.length,userEmail:s[0].getEmail()}})};if("guest"===t&&"rejected"===n&&i.length>0)return{label:(0,oe.jsx)(f().sA,{id:"PeopleSectionRequestsTable.bulkDeclineToast.guests.failed",defaultMessage:"Failed decline {numberOfSuccesses, plural, one {guest request for {userEmail}} other {{numberOfSuccesses} guest requests}}, please try again.",values:{numberOfSuccesses:i.length,userEmail:i[0].getEmail()}})};if("member"===t&&"approved"===n&&s.length>0)return{label:(0,oe.jsx)(f().sA,{id:"PeopleSectionRequestsTable.bulkApproveToast.members.success",defaultMessage:"Approved {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}",values:{numberOfRequests:s.length,userEmail:s[0].getEmail()}})};if("member"===t&&"approved"===n&&i.length>0)return{label:(0,oe.jsx)(f().sA,{id:"PeopleSectionRequestsTable.bulkApproveToast.members.failed",defaultMessage:"Failed to approve {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}, please try again.",values:{numberOfRequests:i.length,userEmail:i[0].getEmail()}})};if("member"===t&&"rejected"===n&&s.length>0)return{label:(0,oe.jsx)(f().sA,{id:"PeopleSectionRequestsTable.bulkDeclineToast.members.success",defaultMessage:"Declined {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}",values:{numberOfRequests:s.length,userEmail:s[0].getEmail()}})};if("member"===t&&"rejected"===n&&i.length>0)return{label:(0,oe.jsx)(f().sA,{id:"PeopleSectionRequestsTable.bulkDeclineToast.members.failed",defaultMessage:"Failed to decline {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}, please try again.",values:{numberOfRequests:i.length,userEmail:i[0].getEmail()}})};return}({requestType:a,result:t,status:r});return o&&ta().D6(o),0===t.failedUsers.length}const vu=(0,f().YK)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating"}});function ju(){sc().m({message:vu.updatingPermissions})}function Au(){sc().V()}function Cu(e){let{spaceStore:t,spacePermissionsSettingsStore:s}=e;const[n,r]=(0,i.useState)(),l=(0,a().v3)(),d=(0,Os().r)()??0,c=(0,o().K8)((()=>{const e=ac().A.getData(l,{spaceId:t.id});return e?e.filter((e=>e.hasGuests)).map((e=>e.domain)):[]}),[l,t]),u=(0,xs().fC)({spaceStore:t}),g=(0,Hd().r1)({spaceStore:t}),p=(0,xs().e6)({spaceStore:t,requestType:"guest"});return(0,xs().Wz)({requestType:"guest",spaceStore:t}),(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Zc,{spaceStore:t,internalDomains:c,domainFilterValues:n,setDomainFilterValues:r}),u&&g?(0,oe.jsx)(mu,{requests:p,spaceStore:t,requestType:"guest",domainFilterValues:n,internalDomains:c}):void 0,d>0?(0,oe.jsx)(Bc,{spaceStore:t,domainFilterValues:n??[],internalDomains:c}):(0,oe.jsx)("div",{children:(0,oe.jsx)(wu,{spacePermissionsSettingsStore:s})})]})}function wu(e){let{spacePermissionsSettingsStore:t}=e;const s=(0,l().IS)((e=>({container:{marginTop:32,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",minHeight:296,width:"100%",border:`1px dashed ${e.palette.gray[300]}`,borderRadius:4,padding:16,gap:12},icon:{width:24,height:24}})),[]),i=(0,o().O$)(ut().AppStoreCurrentSpaceStore),n=(0,zd().J)();return(0,oe.jsxs)("div",{style:s.container,children:[(0,oe.jsx)(_t().Q,{iconGroup:ec,variantName:"fill",style:s.icon}),(0,oe.jsx)(Pt().D,{styleName:"UIRegular-14px/Medium",children:(0,oe.jsx)(f().sA,{id:"spaceSettings.people.guestsTab.noGuests",defaultMessage:"No guests yet"})}),n?(0,oe.jsx)(Tu,{spaceStore:i,spacePermissionsSettingsStore:t}):void 0]})}function Tu(e){const{spaceStore:t,spacePermissionsSettingsStore:s}=e,i=(0,l().IS)((()=>({origin:{padding:"12px",height:32},importListButton:{height:28,borderRadius:4,border:void 0,width:"100%"},importListButtonContainer:{padding:"0 6px",alignItems:"center"}})),[]),n=(0,a().v3)();if(!t)return null;const r=(0,ic().A)({onInviteClick:ju,onInviteComplete:Au,buttonStyle:i.importListButton,buttonContainerStyle:i.importListButtonContainer,spacePermissionsSettingsStore:s,shouldAddMembers:!1});return(0,oe.jsx)(Sa().Ay,{popupType:nc().n.Popup,alignmentToOrigin:Sa().yP.Center,placementToOrigin:Sa().sx.Bottom,render:()=>(0,oe.jsx)(rc().A,{importListItems:r}),renderOrigin:e=>(0,oe.jsx)(Bt().A,{style:i.origin,...e,onClick:()=>{e.onClick(),tc().V(n,{source:"guests_tab"})},children:(0,oe.jsx)(f().sA,{id:"spaceSettings.people.guestsTab.importContacts",defaultMessage:"Import contacts"})})})}var Mu=()=>s(317194),ku=()=>s(68263),Iu=()=>s(848538),Du=()=>s(763392);function Ru(e){let{user:t,spaceStore:s,shouldDisableAction:n}=e;const{styles:r,handleRemoveMemberFromWorkspace:d,environment:c,isCurrentUser:u}=function(e){let{user:t,spaceStore:s}=e;const n=(0,l().IS)((e=>({container:{width:"100%",display:"flex",justifyContent:"flex-end"},button:{display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:10,paddingLeft:0,paddingRight:0},buttonIcon:{width:20,height:20,fill:e.icon.secondary},upgradeButton:{},removeMenuDivider:{borderTop:e.stroke.secondary},removeButton:{color:oc().l8[e.mode].red},upgradeIcon:{width:17,height:17}})),[]),r=(0,a().v3)(),d=(0,i.useCallback)((async()=>{const{currentUserSettingsStore:e}=ut().default.state;return e?await(0,Du().Vr)({user:t,spaceStore:s,environment:r,userSettingStore:e}):()=>{}}),[s,r,t]),c=(0,o().K8)((()=>{var e;return(null===(e=ut().default.state.currentUserStore)||void 0===e?void 0:e.id)===t.userId}),[t]);return{styles:n,handleRemoveMemberFromWorkspace:d,environment:r,isCurrentUser:c}}({user:t,spaceStore:s}),g=new(fa().A);return(0,oe.jsx)("div",{style:r.container,children:(0,oe.jsx)(Sa().Ay,{buttonPopupStore:g,popupType:Sa().z7.Popup,renderOrigin:e=>(0,oe.jsx)(Vt().p,{style:r.button,...e,children:(0,oe.jsx)(oe.Fragment,{children:(0,pc().L)(r.buttonIcon)})}),onClick:()=>{Wd().jR(c,{from:"member",button_name:"actions"})},disabled:n,render:()=>(0,oe.jsx)("div",{children:(0,oe.jsx)(ba().Ay,{type:ba().Oh.Vertical,initialFocus:void 0,sections:[{key:"remove",render:e=>(0,oe.jsx)(va().A,{...e,style:r.removeMenuDivider}),items:[{key:"remove",render:e=>(0,oe.jsx)(Tl().A,{...e,buttonStyle:r.removeButton,icon:(0,Yn()._)(r.upgradeIcon),title:(0,oe.jsx)(f().sA,{id:"peopleSectionmembersTab.removeMember",defaultMessage:"{isCurrentUser, select, true {Leave workspace} other {Remove from workspace}} ",values:{isCurrentUser:u}})}),action:async()=>{g.setState({open:!1}),await d(),Wd().jR(c,{from:"member",button_name:"remove"})}}]}]})})})})}var _u=()=>s(698449),Pu=()=>s(452558),Bu=()=>s(419357);function Uu(e){let{shouldShowSearchHeader:t,sections:s,filterPlaceholder:n}=e;const r=(0,a().v3)(),[o,l]=(0,i.useState)(""),d=o,c=(0,oe.jsx)(va().A,{isInput:!0,children:(0,oe.jsx)(Bu().Ay,{value:d,onChange:(0,i.useCallback)((e=>{l(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:n&&E().A.formatMessage(n)})}),u={menuType:ma().gu.Popup,maxWidth:350,maxHeight:300,header:t?c:void 0};return(0,oe.jsx)(xa().A,{...u,children:(0,oe.jsx)(Pu().A,{filter:d,context:{blocks:[],environment:r,publicEditMode:void 0},initialFocus:0,sections:s})})}const Lu=(0,f().YK)({filterGroups:{defaultMessage:"Filter groups...",id:"GroupPopupContent.filterGroups"}});function Ou(e){let{groups:t,spaceStore:s,spacePermissionsSettingsStore:i}=e;const n=t.map((e=>({group:e.group,numberOfGroupMembers:e.memberCount}))),a=(0,l().IS)((e=>({buttonTitle:{display:"flex",padding:"4px 6px 4px 8px",alignItems:"flex-start",gap:8,alignSelf:"stretch"},groupName:{color:e.text.primary,fontSize:14},groupMemberCount:{color:e.text.secondary,fontSize:12}})),[]),r=t.length>5;return(0,oe.jsx)(Uu,{shouldShowSearchHeader:r,sections:[{key:"groups for member",render:e=>(0,oe.jsx)(va().A,{...e}),actions:n.map((e=>{const{group:t,numberOfGroupMembers:n}=e;return{key:t.group_id,displayName:t.name,analyticsName:t.name??"unknown group",searchName:t.name,render:e=>(0,oe.jsx)(Tl().A,{style:{padding:4},textWrapperStyle:{marginLeft:0,marginRight:0},title:(0,oe.jsxs)("div",{style:a.buttonTitle,children:[(0,oe.jsx)(Ga().B6,{disabled:!0,bucket:"public",icon:t.icon?{pointer:s.pointer,icon:t.icon}:void 0,size:20,isEmptyPage:!1,title:t.name}),(0,oe.jsxs)("div",{children:[(0,oe.jsx)("div",{style:a.groupName,children:t.name}),(0,oe.jsx)("div",{style:a.groupMemberCount,children:(0,oe.jsx)(f().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:n}})})]})]}),...e}),action:()=>{i.setState({...i.state,currentTab:ui().d.Groups})},closeParentMenu:!1}}))}],filterPlaceholder:Lu.filterGroups})}function qu(e){let{user:t,spaceStore:s,spacePermissionsSettingsStore:n,spacePermissionGroupIds:r}=e;const{styles:d,groups:c,numberOfGroups:u,firstGroupName:g,onClick:p}=function(e){let{spacePermissionGroupIds:t}=e;const s=(0,a().v3)(),n=(0,i.useCallback)((()=>{Wd().jR(s,{from:"member",button_name:"open_groups"})}),[s]),r=(0,l().IS)((e=>({button:{marginRight:8},noGroups:{marginRight:8,color:e.text.tertiary},chevron:{width:10,marginLeft:4,fill:e.icon.tertiary},noneGroupText:{color:e.text.tertiary},groupNameText:{color:e.text.secondary,maxWidth:100,...S().RC},groupNumberText:{color:e.text.secondary}})),[]),d=(0,f().tz)(),c=(0,o().K8)((()=>h().oE(t.map((e=>Nd().A.state.permissionGroupsAndMemberCounts.find((t=>t.group.group_id===e)))))),[t]),u=c.length,g=u>0?(0,_u().Pf)({groupName:c[0].group.name,intl:d}):void 0;return{styles:r,groups:c,numberOfGroups:u,firstGroupName:g,onClick:n}}({spacePermissionGroupIds:r});return(0,oe.jsx)(Sa().Ay,{popupType:Sa().z7.Popup,onClick:p,renderOrigin:e=>(0,oe.jsx)(Vt().p,{disabled:0===u,style:0===u?d.noGroups:d.button,...e,children:0===u?(0,oe.jsx)("span",{style:d.noneGroupText,children:(0,oe.jsx)(f().sA,{id:"userGroupsCell.noGroups",defaultMessage:"None"})}):1===u?(0,oe.jsx)("span",{style:d.groupNameText,title:g,children:g}):(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)("div",{style:d.groupNumberText,children:u}),(0,Al().b)(d.chevron)]})}),render:()=>(0,oe.jsx)(Ou,{groups:c,spaceStore:s,spacePermissionsSettingsStore:n})})}var Wu=()=>s(912913);function Eu(e){let{user:t,spaceStore:s,maxWidth:n,shouldShowRemoveUserInRoleDropdown:r}=e;const d=(0,l().IS)((e=>({button:{color:e.text.secondary,maxWidth:n}})),[n]),c=(0,a().v3)(),{isPermissionSelectDisabled:u,currentUserId:g}=(0,o().K8)((()=>{let e=!0;return(s.canAdmin()||s.canEditMembership()&&(ku().NB(t.role)||t.userId===c.currentUser.id))&&(e=!1),{isPermissionSelectDisabled:e,currentUserId:c.currentUser.id}}),[s,c,t.role,t.userId]),p=(0,o().K8)((()=>ut().default.state.currentUserSettingsStore),[]),m=(0,f().tz)(),S=(0,o().K8)((()=>{const e=m.formatMessage({id:"spacePermissionSettings.memberRoleSelect.permissionitem.roleUpgradeDisabled",defaultMessage:"Cannot upgrade to a higher role than member"}),t="enterprise"===s.getSubscriptionTier();return h().oE(ku().Gb.filter((e=>!!r||"none"!==e)).map((i=>{if(t||"membership_admin"!==i)return{role:i,disabledInfo:!s.canAdmin()&&ku().EH(i)?{isDisabled:!0,disabledMessage:e}:void 0}})))}),[m,s,r]),x=(0,i.useCallback)((async()=>{const{currentUserSettingsStore:e}=ut().default.state;if(e)return await(0,Du().Vr)({user:t,spaceStore:s,environment:c,userSettingStore:e})}),[t,s,c]);return p?(0,oe.jsx)(Wu().Ay,{role:t.role,table:bn().NX,type:"user_permission",disabled:u,isUserPermission:t.userId===g,upgradeButtonName:"space_permission_item",availableRoleItems:S,buttonStyle:d.button,onChange:async e=>{await Du().qb({member:t,newRole:e,currentUserSettingsStore:p,spaceStore:s,environment:c})},onClick:()=>{Wd().jR(c,{from:"member",button_name:"open_role"})},onRemoveMemberClick:async()=>{await x()},onRemoveSelfClick:async()=>{await x()},from:"spaceSettings"}):null}function zu(e){let{user:t,spaceStore:s,shouldShowRemoveUserInRoleDropdown:i}=e;return(0,oe.jsx)("div",{children:(0,oe.jsx)(Eu,{user:t,spaceStore:s,maxWidth:148,shouldShowRemoveUserInRoleDropdown:i})})}var Fu=()=>s(967554);function Nu(e){let{spaceStore:t,spacePermissionsSettingsStore:s,shouldShowHeading:i}=e;return(0,o().K8)((()=>{const e=D().A.state.shouldUseEdgeCache,t=R().default.checkGate({gateName:"edge_cache_plus_settings"}),s=R().default.checkGate({gateName:"virtualize_people_table"});return e&&t||s}),[])?(0,oe.jsx)(Gu,{spaceStore:t,spacePermissionsSettingsStore:s,shouldShowHeading:i}):(0,oe.jsx)(Ju,{spaceStore:t,spacePermissionsSettingsStore:s,shouldShowHeading:i})}function Gu(e){let{spaceStore:t,spacePermissionsSettingsStore:s,shouldShowHeading:n}=e;const r=(0,l().IS)((e=>({titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,height:32},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",boxShadow:`inset 0 -1px 0 ${e.tableDividerColor}`}})),[]),d=(0,o().K8)((()=>Rc().A.state.searchQuery),[]),[c,u]=(0,i.useState)({by:$u.id,asc:!1}),g=(0,i.useMemo)((()=>({field:"user"===c.by?"name_normalized":"type",direction:c.asc?"asc":"desc"})),[c]),p=(0,cc().n)({query:d??"",sort:g,filter:"members",limit:30}),m=(0,o().K8)((()=>null==p?void 0:p.rowsStore.state.rows),[p]),{columns:S,transformRow:x}=function(e){let{users:t,spaceStore:s,spacePermissionsSettingsStore:n}=e;const r=(0,o().K8)((()=>"on"===R().default.getEligibleGroup({experimentId:"members_tab_remove_users_in_role_dropdown",defaultGroup:"control"})),[]),l=(0,Hd().k4)({spaceStore:s}),d=(0,o().K8)((()=>s.canAdmin()),[s]),c=(0,i.useMemo)((()=>h().oE([Ku,Vu,Hu,$u,l&&!r?Yu:void 0])),[l,r]),u=(0,a().v3)(),[{value:g}]=(0,zn().Yb)((async()=>{if(!d)return;const e=await q().callApi({eventName:"getRecentlyRemovedUsers",environment:u,data:{spaceId:s.id}});if("failed"===e.type)throw j().Qg(e),e;return e.data.recentlyRemovedMembers}),[s.id,u,d]),[p,m]=(0,i.useState)({});(0,zn().Yb)((async()=>{if(!t)return;const e=t.map((e=>e.id)),i=await q().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:u,data:{spaceId:s.id,userIds:e},headers:(0,B().WS)({cellId:void 0,spaceId:s.id})});"success"===i.type&&m((t=>{const s={...t,...i.data.userToGroupMap};for(const i of e)void 0===s[i]&&(s[i]=[]);return s}))}),[u,s.id,t],{debugName:"userToPermissionGroupIds",debounce:300,throttle:1e3});const f=(0,i.useCallback)((e=>{var t;const i=(0,dc().dp)(s,e.id),a=i.getMembershipType()??e.membership_type;if(void 0===a||!(0,Iu().MN)(a))return;const o=(0,Iu().C4)(a);return{id:e.id,role:o,firstJoinedSpaceTime:e.first_joined_space_time,spaceStore:s,spaceUserStore:i,isSpaceUserStoreLoaded:i.isReady(),restorationStatus:(null==g||null===(t=g.find((t=>t.userId===e.id)))||void 0===t?void 0:t.restorationStatus)??void 0,spacePermissionsSettingsStore:n,spacePermissionGroupIds:p[e.id],shouldShowRemoveUserInRoleDropdown:r,shouldDisableAction:!(d||!l||"editor"!==o&&"membership_admin"!==o)}}),[g,d,l,r,s,n,p]);return{columns:c,transformRow:f}}({users:m,spaceStore:t,spacePermissionsSettingsStore:s});return(0,oe.jsxs)(oe.Fragment,{children:[n?(0,oe.jsx)("div",{style:r.titleContainer,children:(0,oe.jsx)(f().sA,{id:"peopleSectionMembersTab.activeMembers.title",defaultMessage:"Active"})}):void 0,(0,oe.jsx)("div",{style:{marginTop:n?4:-1,height:"100%"},children:(0,oe.jsx)(gc().M,{columns:S,listSource:p,transformRow:x,sort:c,onSortChange:u,estimatedRowHeight:42,allowHorizontalScroll:!0,renderEmpty:()=>(0,oe.jsx)(ve().A,{isSmall:!0,style:r.emptyMessage,children:(0,oe.jsx)(f().sA,{id:"peopleSectionMembersTab.emptySearch",defaultMessage:"No search results"})})})})]})}const Ku={id:"user",headerTitle:(0,oe.jsx)("div",{style:{fontSize:14},children:(0,oe.jsx)(f().sA,{id:"peopleSectionMembersTable.userTable.user",defaultMessage:"User"})}),renderCell:e=>(0,oe.jsx)(Pc,{userId:e.id,restorationStatus:e.restorationStatus,spaceStore:e.spaceStore}),widthData:{widthPercent:35,minWidth:250},sortable:!0,border:!0},Vu={id:"teamspaces",headerTitle:(0,oe.jsx)("div",{style:{fontSize:14},children:(0,oe.jsx)(f().sA,{id:"peopleSectionMembersTable.userTable.teamspaces",defaultMessage:"Teamspaces"})}),headerCellPadding:"0 0 0 8px",renderCell:e=>e.isSpaceUserStoreLoaded&&void 0!==e.spacePermissionGroupIds?(0,oe.jsx)(Fu().A,{user:{userId:e.id,role:e.role,firstJoinedSpaceTime:e.firstJoinedSpaceTime},userPermissionGroupIds:new Set(e.spacePermissionGroupIds)}):(0,oe.jsx)(uc().A,{style:{width:100,height:12,borderRadius:4,marginLeft:8}}),widthData:{widthPercent:20,minWidth:125},sortable:!1},Hu={id:"groups",headerTitle:(0,oe.jsx)("div",{style:{fontSize:14},children:(0,oe.jsx)(f().sA,{id:"peopleSectionMembersTable.userTable.groups",defaultMessage:"Groups"})}),headerCellPadding:"0 0 0 8px",renderCell:e=>void 0!==e.spacePermissionGroupIds?(0,oe.jsx)(qu,{user:{userId:e.id,role:e.role,firstJoinedSpaceTime:e.firstJoinedSpaceTime},spaceStore:e.spaceStore,spacePermissionsSettingsStore:e.spacePermissionsSettingsStore,spacePermissionGroupIds:e.spacePermissionGroupIds}):(0,oe.jsx)(uc().A,{style:{width:60,height:12,borderRadius:4,marginLeft:8}}),widthData:{widthPercent:20,minWidth:125},sortable:!1},$u={id:"role",headerTitle:(0,oe.jsx)("div",{style:{fontSize:14},children:(0,oe.jsx)(f().sA,{id:"peopleSectionMembersTable.userTable.role",defaultMessage:"Role"})}),headerCellPadding:"0 0 0 8px",renderCell:e=>(0,oe.jsx)(zu,{user:{userId:e.id,role:e.role,firstJoinedSpaceTime:e.firstJoinedSpaceTime},spaceStore:e.spaceStore,shouldShowRemoveUserInRoleDropdown:e.shouldShowRemoveUserInRoleDropdown}),widthData:{widthPercent:25,minWidth:155},sortable:!0},Yu={id:"actions",headerTitle:void 0,renderCell:e=>(0,oe.jsx)(Ru,{user:{userId:e.id,role:e.role,firstJoinedSpaceTime:e.firstJoinedSpaceTime},spaceStore:e.spaceStore,shouldDisableAction:e.shouldDisableAction}),widthData:{width:51},sortable:!1};function Ju(e){let{spaceStore:t,spacePermissionsSettingsStore:s,shouldShowHeading:n}=e;const r=(0,o().K8)((()=>"on"===R().default.getEligibleGroup({experimentId:"members_tab_remove_users_in_role_dropdown",defaultGroup:"control"})),[]),d=(0,o().K8)((()=>{const e=Zi().subscriptionDataStoreInstance.state;return e?(0,is().Ye)(e):[]}),[]),{tableStyles:c,styles:u,sortState:g,setSortState:p,rows:m,membersCount:S,searchQuery:x,columnRenderInfo:b,shouldShowLoadMore:y,onLoadMore:v}=function(e){let{members:t,spaceStore:s,spacePermissionsSettingsStore:n,shouldShowRemoveUserInRoleDropdown:r}=e;const d=(0,a().v3)(),c=(0,Hd().k4)({spaceStore:s}),u=(0,o().K8)((()=>s.canAdmin()),[s]),g=(0,o().K8)((()=>h().oE([Qu,Zu,Xu,eg,c&&!r?tg:void 0])),[c,r]),p=(0,l().IS)((e=>({...(0,xe().rC)({columnRenderInfo:g,theme:e,containerMarginTop:0})})),[g]),m=(0,l().IS)((e=>({titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,height:32},titleNumber:{color:e.text.tertiary},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`}})),[]),[S,x]=(0,i.useState)({column:eg,sortAscending:!1}),b=(0,f().tz)(),y=(0,o().K8)((()=>Rc().A.state.searchQuery),[]),v=(0,Hd().BV)({spaceStore:s,members:t}),j=(0,o().K8)((()=>s.getSpaceId()),[s]),[{value:A}]=(0,zn().Yb)((async()=>{const e=await q().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:d,data:{spaceId:j,userIds:t.map((e=>e.userId))},headers:(0,B().WS)({cellId:void 0,spaceId:j})});return"success"===e.type?e.data.userToGroupMap:{}}),[d,j,t],{debugName:"userToPermissionGroupIds",debounce:300,throttle:1e3}),C=(0,o().K8)((()=>t.map((e=>{const t=ae().LU.createChildStore(s,{table:O().oo,id:e.userId}),i=null==v?void 0:v.find((t=>t.userId===e.userId));return{spaceStore:s,user:e,email:t.getEmail(),userName:t.getDisplayName(b),id:e.userId,isClickable:!1,userRole:e.role,spacePermissionsSettingsStore:n,firstJoinedSpaceTime:e.firstJoinedSpaceTime,shouldDisableAction:!(u||!c||"editor"!==e.role&&"membership_admin"!==e.role),restorationStatus:null==i?void 0:i.restorationStatus,spacePermissionGroupIds:(null==A?void 0:A[e.userId])||[],shouldShowRemoveUserInRoleDropdown:r}})).filter((e=>{var t,s;return void 0===y||(((null===(t=e.email)||void 0===t?void 0:t.includes(y))||(null===(s=e.userName)||void 0===s?void 0:s.includes(y)))??!1)}))),[s,t,b,y,u,c,n,v,A,r]),w=C.length,T=(0,o().K8)((()=>function(e,t){let{sortAscending:s,column:i}=t,n=e;switch(i.id){case"user":n=h().Ul(e,(e=>e.email));break;case"roles":n=h().Ul(e,(e=>ku().TE[e.userRole]))}s||n.reverse();return n}(C,S)),[C,S]),[M,k]=(0,i.useState)(kc),I=(0,i.useCallback)((()=>{k(M+kc)}),[M]),D=M<T.length,R=T.slice(0,M);return{tableStyles:p,styles:m,sortState:S,setSortState:x,rows:R,searchQuery:y,membersCount:w,columnRenderInfo:g,onLoadMore:I,shouldShowLoadMore:D}}({members:d,spaceStore:t,spacePermissionsSettingsStore:s,shouldShowRemoveUserInRoleDropdown:r});return(0,oe.jsxs)(oe.Fragment,{children:[n?(0,oe.jsxs)("div",{style:u.titleContainer,children:[(0,oe.jsx)("span",{children:(0,oe.jsx)(f().sA,{id:"peopleSectionMembersTab.activeMembers.title",defaultMessage:"Active"})}),(0,oe.jsx)("span",{style:u.titleNumber,children:S})]}):void 0,(0,oe.jsx)("div",{style:{marginTop:n?4:-1},children:(0,oe.jsx)(xe().WE,{allowHorizontalScroll:!0,setStickyHeaderRow:!0,columnRenderInfo:b,rows:m,showRowBorders:!0,hideHeaderRowPadding:!0,sortState:g,onSortStateChanged:p,loadMoreMethod:y?{type:"button",onLoadMore:v}:void 0,renderNoRowsComponent:()=>(0,oe.jsx)(ve().A,{isSmall:!0,style:u.emptyMessage,children:x?(0,oe.jsx)(f().sA,{id:"peopleSectionMembersTab.emptySearch",defaultMessage:"No search results"}):(0,oe.jsx)(f().sA,{id:"peopleSectionMembersTab.emptyRow",defaultMessage:"No members"})}),styles:c})})]})}const Qu={id:"user",headerTitle:(0,oe.jsx)("div",{style:{fontSize:14},children:(0,oe.jsx)(f().sA,{id:"peopleSectionMembersTab.user",defaultMessage:"User"})}),renderCell:e=>(0,oe.jsx)(Pc,{userId:e.user.userId,restorationStatus:e.restorationStatus,spaceStore:e.spaceStore}),widthData:{width:219},sortable:!0},Zu={id:"teamspaces",headerTitle:(0,oe.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,oe.jsx)(f().sA,{id:"teamspaces",defaultMessage:"Teamspaces"})}),renderCell:e=>(0,oe.jsx)(Fu().A,{user:e.user,userPermissionGroupIds:new Set(e.spacePermissionGroupIds)}),widthData:{width:175},sortable:!1},Xu={id:"groups",headerTitle:(0,oe.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,oe.jsx)(f().sA,{id:"groups",defaultMessage:"Groups"})}),renderCell:e=>(0,oe.jsx)(qu,{user:e.user,spaceStore:e.spaceStore,spacePermissionsSettingsStore:e.spacePermissionsSettingsStore,spacePermissionGroupIds:e.spacePermissionGroupIds}),widthData:{width:118.5},sortable:!1},eg={id:"roles",headerTitle:(0,oe.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,oe.jsx)(f().sA,{id:"peopleSectionMembersTable.userTable.role",defaultMessage:"Role"})}),renderCell:e=>(0,oe.jsx)(zu,{user:e.user,spaceStore:e.spaceStore,shouldShowRemoveUserInRoleDropdown:e.shouldShowRemoveUserInRoleDropdown}),widthData:{width:118.5},sortable:!0},tg={id:"actions",headerTitle:void 0,renderCell:e=>(0,oe.jsx)(Ru,{user:e.user,spaceStore:e.spaceStore,shouldDisableAction:e.shouldDisableAction}),widthData:{width:51},sortable:!1};var sg=()=>s(569397),ig=()=>s(97835);function ng(e){let{isPrimary:t,leftIcon:s,rightIcon:i,onClick:n,content:a,style:r,titleStyle:o}=e;const d=(0,l().IS)((e=>({container:{display:"flex",width:"100%",padding:8,justifyContent:"flex-start",alignItems:"center",borderRadius:8,background:e.onboardingPreviewBackground,...r},iconContainer:{display:"flex",width:20,height:20,paddingTop:1,flexDirection:"column",alignItems:"center",justifyContent:"center",gap:10},title:{display:"flex",fontSize:14,fontWeight:500,color:t?e.text.primary:e.text.secondary,paddingLeft:6,paddingRight:2,height:18,cursor:n?"pointer":"default",width:"100%",...o},ctaIconContainer:{display:"flex",width:16,height:16,paddingTop:1,flexDirection:"column",alignItems:"center",gap:10,paddingLeft:2,paddingRight:0,cursor:n?"pointer":"default"}})),[n,t,r,o]);return(0,oe.jsxs)("div",{style:d.container,children:[s?(0,oe.jsx)("div",{style:d.iconContainer,onClick:n,children:s}):void 0,(0,oe.jsx)("div",{style:d.title,onClick:n,children:a}),i?(0,oe.jsx)("div",{style:d.ctaIconContainer,onClick:n,children:i}):void 0]})}function ag(e){let{currentTab:t}=e;const s=(0,l().IS)((e=>({icon:{fontSize:14,fontWeight:510,fill:e.icon.secondary,cursor:"pointer"},ctaIcon:{fontSize:12,fill:e.icon.secondary,fontWeight:510}})),[]),n=(0,a().v3)(),r=(0,i.useCallback)((()=>{At().A.setState({...At().A.state,currentTab:"security",defaultSubtab:void 0}),Wd().pf(n,{current_tab:t})}),[n,t]);return(0,i.useEffect)((()=>{Wd().W2(n,{current_tab:t})}),[n,t]),(0,oe.jsx)(ng,{leftIcon:(0,ig().x)(s.icon),content:(0,oe.jsx)(f().sA,{id:"PeopleSectionSecurityBanner.title",defaultMessage:"Some invite settings have moved, make changes in Security tab"}),rightIcon:(0,sg().C)(s.ctaIcon),onClick:r})}var rg=()=>s(987555);const og=3;function lg(e){let{spaceStore:t,internalDomains:s}=e;const{environment:n,tableStyles:r,sortState:d,setSortState:c,selectedRowIds:u,setSelectedRowIds:g,rows:p,searchQuery:m,canEditMembership:h,columnRenderInfo:S,guestsCount:x,onClickApprove:b,isSubscribed:y}=function(e){let{spaceStore:t,internalDomains:s}=e;const n=(0,a().v3)(),r=(0,Hd().k4)({spaceStore:t}),d=(0,i.useMemo)((()=>r?[ug,gg,pg]:[ug]),[r]),c=(0,l().IS)((e=>({...(0,xe().rC)({columnRenderInfo:d,theme:e,containerMarginTop:0})})),[d]),u=(0,o().K8)((()=>d[0]),[d]),[g,p]=(0,i.useState)({column:u,sortAscending:!0}),[m,h]=(0,i.useState)([]),S=(0,f().tz)(),x=(0,o().K8)((()=>Rc().A.state.searchQuery),[]),b=(0,o().K8)((()=>{const e=Zi().subscriptionDataStoreInstance.state;return Boolean(e&&is().Fq(e))}),[]),[y,v]=(0,i.useState)([]),[j,A]=(0,i.useState)(new Set),[C,w]=(0,i.useState)({}),T=(0,o().K8)((()=>D().A.state.shouldUseEdgeCache&&R().default.checkGate({gateName:"edge_cache_plus_settings"})),[]),M=(0,i.useRef)(void 0);(0,zn().Yb)((async()=>{var e;if(!T)return;M.current&&M.current.abort(),M.current=new AbortController;const i=await q().callApi({eventName:"listUsers",environment:n,data:{cursor:void 0,membershipFilter:"guests",limit:og+j.size,sort:"name_normalized",sortDirection:"asc",query:x??"",spaceId:t.id,includeDomains:s.map((e=>e.url))},abortSignal:null===(e=M.current)||void 0===e?void 0:e.signal});if(M.current=void 0,"success"===i.type){const e=i.data.users;v(e.filter((e=>!j.has(e.id))).slice(0,og).map((e=>e.id)))}}),[n,s,x,T,t.id,j]),(0,zn().Yb)((async()=>{if(!T)return;const e=await q().callApi({eventName:"getGuestPagesForUserIds",environment:n,data:{spaceId:t.id,guestUserIds:y},headers:(0,B().WS)({cellId:void 0,spaceId:t.id})});"success"===e.type&&w((t=>{const s={...t};for(const n of y){var i;s[n]=(null===(i=e.data.guestIdToPages[n])||void 0===i?void 0:i.pageIds)??[]}return s}))}),[T,n,t.id,y]);const k=(0,o().K8)((()=>{if(T)return[];const e=Zi().subscriptionDataStoreInstance.state;return e?(0,is().oe)(e):[]}),[T]),I=(0,o().K8)((()=>T?y.map((e=>{const s=ae().LU.createChildStore(t,{table:O().oo,id:e}),i=s.getEmail();return{spaceStore:t,id:e,guestPageIds:C[e],email:i,userName:s.getDisplayName(S),guestUserStore:s,shouldDisableInteraction:m.includes(e),isClickable:!1,isInternalGuest:!0,isSubscribed:b,setUpgradedGuestIds:A}})):k.map((e=>{const i=ae().LU.createChildStore(t,{table:O().oo,id:e.userId}),n=i.getEmail(),a=null==n?void 0:n.split("@")[1],r=s.some((e=>e.url===a));return{spaceStore:t,id:e.userId,guestPageIds:e.guestPageIds,email:n,userName:i.getDisplayName(S),guestUserStore:i,shouldDisableInteraction:m.includes(e.userId),isClickable:!1,isInternalGuest:r,isSubscribed:b}})).filter((e=>{if(x){var t;if(!((null===(t=e.email)||void 0===t?void 0:t.includes(x))||e.userName.includes(x)))return!1}return e.isInternalGuest})).slice(0,og)),[T,y,t,s,C,S,m,b,k,x]),_=(0,i.useCallback)((()=>{Wd().jR(n,{from:"guest_suggestions",button_name:"bulk_upgrade",count:m.length}),m.forEach((e=>{const s=ae().LU.createChildStore(t,{table:O().oo,id:e}),i=b?"read_and_write":"editor";lc().P({environment:n,guestUserStore:s,role:i,store:t,isConvertToAdmin:!b,origin:"suggested_guest_table"})})),A((e=>{const t=new Set(e);for(const s of m)t.add(s);return t})),h([])}),[m,n,b,t]),P=!I.some((e=>m.includes(e.id)));return{environment:n,tableStyles:c,sortState:g,setSortState:p,selectedRowIds:m,setSelectedRowIds:h,rows:I,searchQuery:x,isApproveButtonLoading:!1,canEditMembership:r,columnRenderInfo:d,isSubscribed:b,shouldHideActions:P,guestsCount:I.length,onClickApprove:_}}({spaceStore:t,internalDomains:s}),v=(0,f().tz)(),j=function(){const e=(0,l().IS)((e=>({suggestions:{transition:"opacity 1s",marginTop:12},suggestionsHidden:{transition:"opacity 1s",opacity:0},titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,height:32},titleNumber:{color:e.text.tertiary},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`},emptyDivider:{height:1,backgroundColor:e.stroke.secondary},headerContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},suggestionsMenu:{width:265},hideSuggestionIcon:{height:20,width:20},learnMoreIcon:{height:20,width:20},learnMoreMenuItem:{color:e.text.secondary},learnMoreSection:{paddingTop:4,paddingBottom:4,borderTop:`1px solid ${e.stroke.secondary}`},optionsContainer:{display:"flex",alignItems:"center"},actionsContainer:{display:"flex",borderRadius:6,border:`1px solid ${e.stroke.primary}`,boxShadow:"0px 2px 12px 0px rgba(29, 27, 22, 0.06)"},buttonIcon:{width:20,height:20,paddingTop:1,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:10},buttonText:{fontSize:14,fontWeight:510},buttonContainerApprove:{display:"flex",padding:"0px 12px 0px 0px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.uiBluePrimary},approveButton:{borderRadius:"4px 0px 0px 4px",paddingLeft:10,paddingRight:0,height:30}})),[]);return e}(),[A,w]=(0,i.useState)(!0),T=(0,i.useCallback)((()=>{C().f({environment:n,url:(0,Ye().xS)("guides.invitePerson")})}),[n]);if(0===s.length)return null;if(0===p.length)return null;if(!A)return null;const M=u.length>0;return(0,oe.jsxs)("div",{style:A?j.suggestions:j.suggestionsHidden,children:[(0,oe.jsxs)("div",{style:j.headerContainer,children:[(0,oe.jsxs)("div",{style:j.titleContainer,children:[(0,oe.jsx)("span",{children:(0,oe.jsx)(f().sA,{id:"peopleSectionguestsTab.suggestions.title",defaultMessage:"Suggestions"})}),(0,oe.jsx)("span",{style:j.titleNumber,children:x})]}),(0,oe.jsx)("div",{style:j.optionsContainer,children:M?(0,oe.jsx)("div",{style:j.actionsContainer,children:(0,oe.jsx)(Vt().p,{style:j.approveButton,onClick:b,children:(0,oe.jsxs)("div",{style:j.buttonContainerApprove,children:[(0,oe.jsx)("div",{style:j.buttonIcon,children:(0,Co().m)({width:20,height:16})}),(0,oe.jsx)("div",{style:j.buttonText,children:(0,oe.jsx)(f().sA,{id:"spaceSettings.peopleSection.guestsTable.bulkUpgrade",defaultMessage:"Upgrade {numberOfRequests, plural, one {1 guest} other {{numberOfRequests} guests}} to {isSubscribed, select, true {member} other {admin}}",values:{numberOfRequests:u.length,isSubscribed:y}})})]})})}):(0,oe.jsx)(Sa().Ay,{popupType:Sa().z7.Popup,renderOrigin:e=>(0,oe.jsx)($n().A,{icon:pc().L,ariaLabel:v.formatMessage({id:"peopleSectionSuggestionsTable.ellipsisButton.ariaLabel",defaultMessage:"More"}),style:{height:24,width:24},iconStyle:{width:20,height:20},...e}),onClick:()=>{Wd().jR(n,{from:"guest_suggestions",button_name:"upgrade"})},render:()=>(0,oe.jsx)("div",{children:(0,oe.jsx)(ba().Ay,{type:ba().Oh.Vertical,initialFocus:void 0,style:j.suggestionsMenu,sections:[{key:"hide_suggestions",render:e=>(0,oe.jsx)(va().A,{...e}),items:[{key:"hide_suggestions",render:e=>(0,oe.jsx)(Tl().A,{...e,icon:(0,rg().T)(j.hideSuggestionIcon),title:(0,oe.jsx)(f().sA,{id:"peopleSectionguestsTab.hideSuggestions",defaultMessage:"Hide Suggestions"})}),action:()=>{w(!1),Wd().jR(n,{from:"guest_suggestions",button_name:"hide_suggestions"})}}]},{key:"learn_more",render:e=>(0,oe.jsx)(va().A,{...e,style:j.learnMoreSection}),items:[{key:"learn_more",render:e=>(0,oe.jsx)(Tl().A,{...e,icon:(0,Hn().$)(j.learnMoreIcon),title:(0,oe.jsx)(f().sA,{id:"peopleSectionguestsTab.learnMore",defaultMessage:"Learn more"}),style:j.learnMoreMenuItem}),action:()=>{T(),Wd().jR(n,{from:"guest_suggestions",button_name:"suggestions_learn_more"})}}]}]})})})})]}),(0,oe.jsx)("div",{style:{marginBottom:36,marginTop:4},children:(0,oe.jsx)(xe().WE,{allowHorizontalScroll:h,setStickyHeaderRow:!0,columnRenderInfo:S,rows:mg(p,d),showRowBorders:!0,hideHeaderRowPadding:!0,sortState:d,onSortStateChanged:c,renderNoRowsComponent:()=>(0,oe.jsx)(ve().A,{isSmall:!0,style:j.emptyMessage,children:m?(0,oe.jsx)(f().sA,{id:"peopleSectionGuestsTab.emptySearch",defaultMessage:"No search results"}):(0,oe.jsx)(f().sA,{id:"peopleSectionGuestsTab.emptyRow",defaultMessage:"No guests"})}),styles:r,multiselect:h?{header:{isDisabled:0===p.length,isSelected:u.length>0&&u.length===p.length,onClick:()=>{u.length===p.length?(g([]),Wd().Y1(n,{from:"guest_suggestions",action:"deselect_all",row_count:u.length})):(g(p.map((e=>e.id))),Wd().Y1(n,{from:"guest_suggestions",action:"select_all",row_count:p.length}))}},row:{getDisabledState:()=>!1,getSelectedState:e=>u.includes(e.id),onClick:e=>{g((t=>t.includes(e.id)?(Wd().Y1(n,{from:"guest_suggestions",action:"deselect_row",row_count:1}),t.filter((t=>t!==e.id))):(Wd().Y1(n,{from:"guest_suggestions",action:"select_row",row_count:1}),t.concat(e.id))))}}}:void 0})})]})}function dg(){const e=(0,l().DP)();return(0,oe.jsx)("div",{style:{color:e.text.secondary},children:(0,oe.jsx)(f().sA,{id:"peopleSectionguestsTab.suggestions.reason.approvedEmailDomain",defaultMessage:"Approved email domain"})})}function cg(e){let{spaceStore:t,upgradeMember:s,guestUserStore:n,disabled:r}=e;const o=(0,l().DP)(),d=(0,a().v3)(),[c,u]=(0,i.useState)(!1);return(0,oe.jsx)(Vt().p,{disabled:r,style:{background:o.tint.uiBlue,color:o.text.uiBluePrimary,fontWeight:510,fontSize:14,borderRadius:4,paddingTop:4,paddingBottom:4,paddingLeft:12,paddingRight:12,marginLeft:24,...r&&{color:o.text.uiBlueTertiary}},hoveredStyle:{background:o.tint.uiBlueHover},onClick:async()=>{u(!0),Wd().jR(d,{from:"guest_suggestions",button_name:"upgrade"}),await s({environment:d,store:t,guestUserStore:n}),u(!1)},isLoading:c,children:(0,oe.jsx)(f().sA,{id:"spaceSettings.peopleSection.suggestionsTable.upgrade",defaultMessage:"Upgrade"})})}const ug={id:"user",headerTitle:(0,oe.jsx)("div",{style:{fontSize:14},children:(0,oe.jsx)(f().sA,{id:"peopleSectionGuestsTab.guest",defaultMessage:"User"})}),renderCell:e=>(0,oe.jsx)(Pc,{userId:e.id,spaceStore:e.spaceStore,isInternalGuest:e.isInternalGuest,isForSuggestionsTable:!0}),widthData:{width:210},sortable:!0},gg={id:"access",headerTitle:(0,oe.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,oe.jsx)(f().sA,{id:"peopleSectionGuestsTab.access",defaultMessage:"Access"})}),renderCell:e=>(0,oe.jsx)("div",{style:{display:"flex"},children:void 0!==e.guestPageIds?(0,oe.jsx)(Mc,{userId:e.id,guestPageIds:e.guestPageIds,shouldDisableInteraction:e.shouldDisableInteraction}):(0,oe.jsx)(uc().A,{style:{width:60,height:12,borderRadius:4,marginLeft:8}})}),widthData:{width:120},sortable:!1},pg={id:"reason",headerTitle:(0,oe.jsx)("div",{style:{fontSize:14},children:(0,oe.jsx)(f().sA,{id:"peopleSectionguestsTab.suggestions.reason",defaultMessage:"Reason"})}),renderCell:e=>(0,oe.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center"},children:[(0,oe.jsx)(dg,{}),(0,oe.jsx)(cg,{upgradeMember:async t=>{var s;await lc().P({origin:"suggested_guest_table",isConvertToAdmin:!1,role:e.isSubscribed?"read_and_write":"editor",...t}),null===(s=e.setUpgradedGuestIds)||void 0===s||s.call(e,(t=>{const s=new Set(t);return s.add(e.id),s}))},spaceStore:e.spaceStore,guestUserStore:e.guestUserStore,disabled:e.shouldDisableInteraction})]}),widthData:{width:256},sortable:!1};function mg(e,t){let{sortAscending:s}=t;const i=h().Ul(e,(e=>e.email));return s||i.reverse(),i}function fg(e){let{spaceStore:t,spacePermissionsSettingsStore:s}=e;const i=(0,a().v3)(),n=(0,o().K8)((()=>{const e=ac().A.getData(i,{spaceId:t.id});return(null==e?void 0:e.filter((e=>e.hasMembers)).map((e=>e.domain)))??[]}),[i,t]),r=(0,xs().fC)({spaceStore:t}),l=(0,Hd().r1)({spaceStore:t}),d=(0,xs().e6)({spaceStore:t,requestType:"member"});(0,xs().Wz)({requestType:"member",spaceStore:t});const c=(0,xs().zA)({spaceStore:t,internalDomains:n}),u=r&&0!==d.length,g=u||c;return(0,oe.jsxs)(oe.Fragment,{children:[c&&!u?(0,oe.jsx)(lg,{spaceStore:t,internalDomains:n}):void 0,u?(0,oe.jsxs)("div",{style:{paddingTop:16,paddingBottom:16},children:[l?(0,oe.jsx)(ag,{currentTab:"members"}):void 0,(0,oe.jsx)(mu,{requests:d,spaceStore:t,requestType:"member"})]}):void 0,(0,oe.jsx)(Nu,{spaceStore:t,spacePermissionsSettingsStore:s,shouldShowHeading:g}),c&&u?(0,oe.jsx)(lg,{spaceStore:t,internalDomains:n}):void 0]})}function hg(e){let{recentRecoverableUser:t,spaceStore:n}=e;const{environment:r,styles:o,handleReprovisionToUserChange:d,userId:c,selectedTransferToUser:u}=function(e){let{recentRecoverableUser:t,spaceStore:s}=e;const n=(0,l().IS)((e=>({container:{display:"flex",width:"100%",justifyContent:"flex-end"},button:{display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:10,paddingLeft:0,paddingRight:0},buttonIcon:{width:20,height:20,fill:e.icon.secondary},removeMenuDivider:{borderTop:e.stroke.secondary},upgradeIcon:{width:17,height:17}})),[]),r=(0,a().v3)(),[o,d]=(0,i.useState)(),c=(0,i.useCallback)((async(e,i)=>{const{accept:n}=await j().Gh({message:(0,oe.jsx)(f().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationMessage",defaultMessage:"Transfer their private pages?"}),description:(0,oe.jsx)(f().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationDescription",defaultMessage:"This action cannot be undone."}),acceptLabel:(0,oe.jsx)(f().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmButton.label",defaultMessage:"Transfer private pages"})});if(!n)return;d(i);const a=await q().callApi({eventName:"transferSpaceUserContent",environment:r,data:{spaceId:s.id,fromUserId:e,toUserId:i}});"failed"===a.type?j().Qg(a):(t.privatePagesCount=0,Rc().A.setState({...Rc().A.state,recentRecoverableUsers:[...Rc().A.state.recentRecoverableUsers.filter((t=>t.userId!==e)),t]}))}),[r,s,t]);return{environment:r,styles:n,handleReprovisionToUserChange:c,userId:t.userId,selectedTransferToUser:o}}({recentRecoverableUser:t,spaceStore:n});return c?(0,oe.jsx)("div",{style:o.container,children:(0,oe.jsx)(Sa().Ay,{popupType:Sa().z7.Popup,onClick:()=>{Wd().jR(r,{from:"recently_left",button_name:"actions"})},renderOrigin:e=>(0,oe.jsx)(Vt().p,{style:o.button,...e,children:(0,oe.jsx)(oe.Fragment,{children:(0,pc().L)(o.buttonIcon)})}),render:()=>(0,oe.jsx)("div",{children:(0,oe.jsx)(ba().Ay,{type:ba().Oh.Vertical,initialFocus:void 0,sections:[{key:"transfer",render:e=>(0,oe.jsx)(va().A,{...e,style:o.removeMenuDivider}),items:[{key:"transfer",render:e=>(0,oe.jsx)(s(140828).A,{mode:Z().C.Button,focused:!1,title:(0,oe.jsx)(f().sA,{id:"spacePermissionsSettings.reprovision.toUser.title",defaultMessage:"Transfer private pages"}),parentStore:n,userIds:u?[u]:[],onChange:e=>{let[t]=e;d(c,t)}}),action:()=>{Wd().jR(r,{from:"recently_left",button_name:"open_transfer_ownership"})}}]}]})})})}):null}function Sg(e){let{spaceStore:t,recentRecoverableUsers:s}=e;const i=(0,l().IS)((e=>({icon:{fontSize:14,fontWeight:510,fill:e.icon.secondary}})),[]);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,oe.jsx)(ng,{leftIcon:(0,ra().G)(i.icon),content:(0,oe.jsx)(f().sA,{id:"peopleSectionReprovisioningTab.settingsDeeplinkBannerTitle",defaultMessage:"People left the workspace in the past 30 days and had private pages appear here"})})}),(0,oe.jsx)(xg,{recentRecoverableUsers:s,spaceStore:t})]})}function xg(e){let{spaceStore:t,recentRecoverableUsers:s}=e;const{rows:n,sortState:a,setSortState:r,tableStyles:d}=function(e){let{recentRecoverableUsers:t,spaceStore:s}=e;const n=(0,l().IS)((e=>(0,xe().rC)({columnRenderInfo:yg,theme:e,containerMarginTop:0})),[]),[a,r]=(0,i.useState)({column:yg[0],sortAscending:!0}),d=(0,o().K8)((()=>t.map((e=>{const t=ae().LU.createChildStore(s,{table:O().oo,id:e.userId});return{spaceStore:s,reprovisioningUser:e,email:t.getEmail(),id:e.userId,isClickable:!1}}))),[s,t]);return{rows:d,sortState:a,setSortState:r,tableStyles:n}}({recentRecoverableUsers:s,spaceStore:t}),c=(0,l().IS)((e=>({noRowContainer:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`}})),[]);return(0,oe.jsx)("div",{style:{marginTop:4},children:(0,oe.jsx)(xe().WE,{setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:yg,rows:vg(n,a),showRowBorders:!0,hideHeaderRowPadding:!0,sortState:a,onSortStateChanged:r,renderNoRowsComponent:()=>(0,oe.jsx)(ve().A,{isSmall:!0,style:c.noRowContainer,children:(0,oe.jsx)(f().sA,{id:"peopleSectionReprovisioningTab.noUser",defaultMessage:"No recent left user"})}),styles:d})})}function bg(e){let{userLeftTime:t}=e;const s=(0,f().tz)(),i=(0,o().K8)((()=>{const e=_().KQ(t,(0,Q().P)());return(0,Ba().ZF)({value:e,date_format:"relative",userTimeZone:(0,Q().P)(),intl:s,allowRelativeDates:!0})}),[t,s]);return(0,oe.jsx)(ve().A,{isSmall:!0,children:i})}const yg=[{id:"user",headerTitle:(0,oe.jsx)("div",{style:{fontSize:14},children:(0,oe.jsx)(f().sA,{id:"peopleSectionReprovisioningTab.user",defaultMessage:"User"})}),renderCell:e=>(0,oe.jsx)(Pc,{userId:e.reprovisioningUser.userId,spaceStore:e.spaceStore}),widthData:{width:220},sortable:!0},{id:"pageCount",headerTitle:(0,oe.jsx)("div",{style:{fontSize:14},children:(0,oe.jsx)(f().sA,{defaultMessage:"Private pages",id:"peopleSectionReprovisioningTab.privatePages"})}),renderCell:e=>(0,oe.jsx)(ve().A,{isSmall:!0,children:e.reprovisioningUser.privatePagesCount}),widthData:{width:100},sortable:!1},{id:"leftTime",headerTitle:(0,oe.jsx)("div",{style:{fontSize:14},children:(0,oe.jsx)(f().sA,{defaultMessage:"Left workspace",id:"peopleSectionReprovisioningTab.leftTime"})}),renderCell:e=>(0,oe.jsx)(bg,{userLeftTime:e.reprovisioningUser.userLeftTime}),widthData:{width:100},sortable:!1},{id:"actions",headerTitle:"",renderCell:e=>(0,oe.jsx)(hg,{recentRecoverableUser:e.reprovisioningUser,spaceStore:e.spaceStore}),widthData:{width:100},sortable:!1}];function vg(e,t){let{sortAscending:s}=t;const i=h().Ul(e,(e=>e.email));return s||i.reverse(),i}var jg=()=>s(437607),Ag=()=>s(778078),Cg=()=>s(190106);const wg=(0,kt().wt)("arrowDownPage",{viewBox:"0 0 14 18",svg:(0,oe.jsx)("path",{d:"M7.67969 9.39844V11.7891L7.61719 13.0078L8.21875 12.3828L8.8125 11.7656C8.875 11.7031 8.94531 11.6536 9.02344 11.6172C9.10677 11.5755 9.19271 11.5547 9.28125 11.5547C9.45312 11.5547 9.59635 11.612 9.71094 11.7266C9.83073 11.8411 9.89062 11.9844 9.89062 12.1562C9.89062 12.2552 9.8724 12.3411 9.83594 12.4141C9.79948 12.487 9.74479 12.5573 9.67188 12.625L7.51562 14.6016C7.42708 14.6849 7.34115 14.7448 7.25781 14.7812C7.17969 14.8177 7.09375 14.8359 7 14.8359C6.90104 14.8359 6.8125 14.8177 6.73438 14.7812C6.65625 14.7448 6.57031 14.6849 6.47656 14.6016L4.32031 12.625C4.2474 12.5573 4.19271 12.487 4.15625 12.4141C4.11979 12.3411 4.10156 12.2552 4.10156 12.1562C4.10156 11.9844 4.15885 11.8411 4.27344 11.7266C4.39323 11.612 4.54167 11.5547 4.71875 11.5547C4.79688 11.5547 4.8776 11.5755 4.96094 11.6172C5.04427 11.6536 5.11719 11.7031 5.17969 11.7656L5.77344 12.3828L6.375 13.0078L6.32031 11.7891V9.39844C6.32031 9.21615 6.38542 9.0625 6.51562 8.9375C6.65104 8.80729 6.8125 8.74219 7 8.74219C7.18229 8.74219 7.34115 8.80729 7.47656 8.9375C7.61198 9.0625 7.67969 9.21615 7.67969 9.39844ZM2.83594 17.3203C1.9974 17.3203 1.36458 17.1042 0.9375 16.6719C0.510417 16.2396 0.296875 15.6016 0.296875 14.7578V2.96875C0.296875 2.13021 0.510417 1.49479 0.9375 1.0625C1.36458 0.625 1.9974 0.40625 2.83594 0.40625H6.60156C6.92969 0.40625 7.21615 0.429688 7.46094 0.476562C7.70573 0.518229 7.93229 0.598958 8.14062 0.71875C8.34896 0.833333 8.5625 1.0026 8.78125 1.22656L12.875 5.39062C13.1042 5.61979 13.276 5.84115 13.3906 6.05469C13.5104 6.26302 13.5911 6.49479 13.6328 6.75C13.6745 7 13.6953 7.30729 13.6953 7.67188V14.7578C13.6953 15.5964 13.4818 16.2318 13.0547 16.6641C12.6276 17.1016 11.9948 17.3203 11.1562 17.3203H2.83594ZM2.96094 15.7812H11.0312C11.4115 15.7812 11.6953 15.6849 11.8828 15.4922C12.0703 15.2995 12.1641 15.0234 12.1641 14.6641V7.88281H7.95312C7.39583 7.88281 6.97917 7.74479 6.70312 7.46875C6.43229 7.19271 6.29688 6.77604 6.29688 6.21875V1.9375H2.96875C2.58854 1.9375 2.30469 2.03646 2.11719 2.23438C1.92969 2.43229 1.83594 2.71094 1.83594 3.07031V14.6641C1.83594 15.0234 1.92969 15.2995 2.11719 15.4922C2.30469 15.6849 2.58594 15.7812 2.96094 15.7812ZM8.10156 6.53125H11.9531L7.64844 2.14844V6.07031C7.64844 6.23177 7.68229 6.34896 7.75 6.42188C7.82292 6.49479 7.9401 6.53125 8.10156 6.53125Z"})});function Tg(e){let{spaceStore:t}=e;const{styles:s,shouldEnableExportGuests:n,handleExportGuestsClick:r}=function(e){let{spaceStore:t}=e;const s=(0,l().IS)((e=>({button:{display:"flex",width:28,height:28,justifyContent:"center",gap:10,alignItems:"center"},buttonIcon:{width:20,height:20,fontSize:16,fontStyle:"normal",flexDirection:"column",flexShrink:0,fontWeight:510,fill:e.icon.secondary}})),[]),n=(0,o().K8)((()=>{const{currentSpaceStore:e}=ut().default.state,t=Zi().subscriptionDataStoreInstance.state;return Boolean(e&&t&&"subscribed_admin"===t.type&&R().default.checkGate({gateName:"enable_guest_export"}))}),[]),r=(0,a().v3)(),d=(0,f().tz)(),c=(0,o().K8)((()=>R().default.checkGate({gateName:"edge_cache_plus_settings"})),[]),u=(0,i.useCallback)((()=>{if(c)return void To().li({spaceStore:t,intl:d,environment:r});const e=Zi().subscriptionDataStoreInstance.state;if(t&&e&&"subscribed_admin"===e.type){const s=(0,is().oe)(e);To().s6(r,{intl:d,spaceStore:t,guests:s})}}),[r,d,c,t]);return{styles:s,shouldEnableExportGuests:n,handleExportGuestsClick:u}}({spaceStore:t});return n?(0,oe.jsx)(ye().A,{render:e=>(0,oe.jsx)(Vt().p,{style:s.button,onClick:r,...e,children:wg(s.buttonIcon)}),renderTooltip:()=>(0,oe.jsx)(f().sA,{id:"exportGuestsButton.label",defaultMessage:"Export guests as CSV"})}):null}var Mg=()=>s(347930),kg=()=>s(562866),Ig=()=>s(716730),Dg=()=>s(998109);function Rg(e){let{spaceStore:t,origin:s,requestFrom:n,inviteFrom:r}=e;const{shouldShowRequestMemberButtion:l,canEditMembership:d}=(0,o().K8)((()=>({shouldShowRequestMemberButtion:!t.canEditMembership()&&!t.getDisableMembershipRequests()&&(0,je().x3)(),canEditMembership:t.canEditMembership()})),[t]),c=(0,o().K8)((()=>{const e=Zi().subscriptionDataStoreInstance.state;return Boolean(e&&is().Fq(e))}),[]),u=(0,zd().J)(),g=(0,i.useCallback)((()=>{const e=(0,f().YK)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating"}});sc().m({message:e.updatingPermissions})}),[]),p=(0,i.useCallback)((()=>{sc().V()}),[]),m=(0,a().v3)(),h=(0,i.useCallback)((()=>{(0,Ig().q)(m)}),[m]);return l?(0,oe.jsx)(kg().cx,{store:t,analyticsFrom:n,origin:s?(0,oe.jsx)("div",{onClick:h,children:s}):(0,oe.jsx)(Es().A,{size:"lg",onClick:h,children:(0,oe.jsx)(f().sA,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})}):(0,oe.jsx)(Dg().n,{step:"collaborate_add_member",isFullWidth:!1,showContentOverlays:!1,children:(0,oe.jsx)(Mg().H,{disabled:!d,store:t,onInviteClick:g,onInviteComplete:p,isSubscribed:c,membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,enableInviteDropdown:u,origin:s,analyticsFrom:r})})}function _g(e){let{spaceStore:t,currentTab:s,spacePermissionsSettingsStore:n}=e;return(0,i.useEffect)((()=>()=>{Rc().A.reset()}),[]),(0,oe.jsxs)("div",{style:{display:"flex",height:34,paddingBottom:0,justifyContent:"flex-end",alignItems:"center",gap:10},children:[(0,oe.jsxs)("div",{style:{display:"flex",height:28,justifyContent:"flex-end",alignItems:"center",gap:4},children:[(0,oe.jsx)(Cg().A,{handleSearchQueryChange:e=>{Rc().A.setState({...Rc().A.state,searchQuery:e}),s===ui().d.Groups&&n.setState({...n.state,groupsFilter:e??""})},isSearchBarAlwaysOpen:!1,currentTab:s}),s===ui().d.Guests?(0,oe.jsx)(Tg,{spaceStore:t}):null]}),(0,oe.jsx)("div",{style:{paddingBottom:2},children:(0,oe.jsx)(Pg,{spaceStore:t,currentTab:s,spacePermissionsSettingsStore:n})})]})}function Pg(e){let{spaceStore:t,currentTab:s,spacePermissionsSettingsStore:n}=e;const{canUseGroups:r,canCreateGroups:l,handleCreateGroupClick:d,shouldShowRequestMemberButtion:c,canEditMembership:u}=function(e){let{spaceStore:t,currentTab:s,spacePermissionsSettingsStore:n}=e;const r=(0,Hd().zh)(),l=(0,Hd().k4)({spaceStore:t}),d=(0,a().v3)(),c=(0,i.useCallback)((()=>{k().createAndCommit({userAction:"PeopleSectionGroupsTab.handleCreateGroupClick",environment:d,canUndo:!0,perform:e=>{const s=w().np({spaceStore:t,transaction:e});if(s){n.setState({...n.state,editingNameGroupId:s.getGroupId(),groupNameInputValue:""});const e=$r().Bj6.fromValue(jg().n,s.getValue()),t=[...Nd().A.state.permissionGroupsAndMemberCounts,{group:e,memberCount:0}],i=(0,Ag().Ay)(n.state.groupsFilter,t,(e=>e.group.name||""));Nd().A.setState({...Nd().A.state,permissionGroupsAndMemberCounts:i})}}})}),[d,t,n]),u=(0,o().K8)((()=>!t.canEditMembership()&&!t.getDisableMembershipRequests()&&(0,je().x3)()),[t]),g=(0,Hd().k4)({spaceStore:t});return{canUseGroups:r,canCreateGroups:l,shouldShowRequestMemberButtion:u,canEditMembership:g,handleCreateGroupClick:c}}({spaceStore:t,currentTab:s,spacePermissionsSettingsStore:n});return s===ui().d.Groups&&r?l?(0,oe.jsx)(ye().A,{renderTooltip:()=>!l&&(0,oe.jsx)(f().sA,{id:"spacePermissionsSettings.groupsTab.groupCreationInsufficientPermissions",defaultMessage:"Only membership admins and workspace owners can add a permission group."}),render:e=>(0,oe.jsx)(Es().A,{size:"lg",onClick:d,...e,children:(0,oe.jsx)(f().sA,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",defaultMessage:"Create a group"})})}):null:c||u?(0,oe.jsx)(Rg,{spaceStore:t,requestFrom:"space_settings_add_members",inviteFrom:"space_settings_add_members"}):null}var Bg=()=>s(480822);function Ug(){const e=(0,o().K8)((()=>{const e=ut().default.state.currentSpaceStore;if(null!=e&&e.isDefined())return e}),[]),t=(0,o().O$)(Zi().subscriptionDataStoreInstance),s=(0,Gd().o)({spaceId:null==e?void 0:e.id}),n=(0,o().uB)(void 0,ui().A),a=Ed();return(0,i.useEffect)((()=>{a&&n.setState({...n.state,currentTab:ui().d.Guests})}),[n,a]),e&&t?(0,oe.jsxs)(Gt().Ay,{children:[(0,oe.jsx)(Mu().gz,{spaceStore:e}),(0,oe.jsx)(Mu().K,{spaceStore:e,inviteLinkCode:s,spacePermissionsSettingsStore:n}),(0,oe.jsx)(Og,{subscriptionData:t,spaceStore:e,spacePermissionsSettingsStore:n})]}):(0,oe.jsx)(Lg,{})}function Lg(){return(0,oe.jsx)(Gt().Ay,{centerContent:!0,children:(0,oe.jsx)(mi().A,{})})}function Og(e){var t;let{subscriptionData:s,spaceStore:n,spacePermissionsSettingsStore:r}=e;(0,i.useEffect)((()=>{if(At().A.state.open&&"members"===At().A.state.currentTab&&At().A.state.defaultSubtab){const e=At().A.state.defaultSubtab!==ui().d.Requests?At().A.state.defaultSubtab:ui().d.Members;r.setState({...r.state,currentTab:e})}}),[r]);const{memberCount:d,recentRecoverableUsers:c,currentTab:u,canReprovisionContent:g,tabs:p,currentTabs:m,environment:h,billingData:S}=function(e){let{subscriptionData:t,spaceStore:s,spacePermissionsSettingsStore:i}=e;const n=(0,a().v3)(),r=(0,Et().V)()??1,d=(0,Os().r)();(0,Hd().rl)({spaceStore:s,subscriptionData:t});const c=(0,o().K8)((()=>{const{recentRecoverableUsers:e}=Rc().A.state;return e.filter((e=>e.privatePagesCount>0))}),[]),u=(0,o().K8)((()=>i.state.currentTab),[i]),g=(0,Hd().t1)({spaceStore:s,subscriptionData:t}),p=(0,xs().U4)({spaceStore:s,requestType:"guest"}),m=(0,xs().U4)({spaceStore:s,requestType:"member"}),h=(0,l().IS)((e=>({activeTabStyle:{color:e.text.primary},inactiveTabStyle:{color:e.text.tertiary},redDot:{background:e.redBadgeBackground,marginLeft:6,marginTop:6}})),[]),S=(0,o().K8)((()=>{const e=Nd().A.state.permissionGroupsAndMemberCounts.length;return void 0===r?{}:{[ui().d.Members]:(0,oe.jsx)(Eg,{text:(0,oe.jsx)("div",{children:(0,oe.jsx)(f().sA,{id:"spacePermissionsSettings.membersTab.title",defaultMessage:"Members"})}),number:r,isCurrentTab:u===ui().d.Members,styles:h,unread:(m??0)>0}),[ui().d.Guests]:(0,oe.jsx)(Eg,{text:(0,oe.jsx)(f().sA,{id:"spacePermissionsSettings.guestsTab.title",defaultMessage:"Guests"}),number:d,isCurrentTab:u===ui().d.Guests,styles:h,unread:(p??0)>0}),[ui().d.Groups]:(0,oe.jsx)(Eg,{text:(0,oe.jsx)(f().sA,{id:"spaceBasicSettings.groupsTab.title",defaultMessage:"Groups"}),number:e,isCurrentTab:u===ui().d.Groups,styles:h}),[ui().d.Reprovisioning]:(0,oe.jsx)(Eg,{text:(0,oe.jsx)(f().sA,{id:"spaceBasicSettings.reprovisioningTab.title",defaultMessage:"Recently left"}),number:c.length,isCurrentTab:u===ui().d.Reprovisioning,styles:h}),[ui().d.Requests]:(0,oe.jsx)(f().sA,{id:"spaceBasicSettings.requestsTab.title",defaultMessage:"Requests"}),[ui().d.Contacts]:(0,oe.jsx)(Eg,{text:(0,oe.jsx)(f().sA,{id:"spaceBasicSettings.contactsTab.title",defaultMessage:"Contacts"}),isCurrentTab:u===ui().d.Contacts,styles:h})}}),[r,d,u,h,m,p,c.length]),x=dt(),b=(0,ns().lh)({spaceId:s.id}),y=Ed(),v=Fd(),j=Wg({canReprovisionContent:g,hideGroupsTab:x,showGuestTabFirst:y,showContactsTab:v}),A=j.map((e=>S[e]));return{billingData:b,memberCount:r,recentRecoverableUsers:c,currentTab:u,canReprovisionContent:g,tabs:A,currentTabs:j,environment:n}}({subscriptionData:s,spaceStore:n,spacePermissionsSettingsStore:r}),x=(0,Kd().A)(n),b=(0,qt().Q7)(n.id,S,d),y=x&&u===ui().d.Members&&(null==S?void 0:S.subscription),v=dt(),j=Ed(),A=Fd();return(0,oe.jsxs)("div",{style:{paddingLeft:2,paddingRight:2,height:"100%"},children:[(0,oe.jsx)(ji().Ay,{tabs:p,selectedIndex:m.indexOf(u),onChange:e=>function(e){let{newSelectedIndex:t,environment:s,spacePermissionsSettingsStore:i,currentTab:n,canReprovisionContent:a,hideGroupsTab:r,showGuestTabFirst:o,showContactsTab:l}=e;const d=Wg({canReprovisionContent:a,hideGroupsTab:r,showGuestTabFirst:o,showContactsTab:l})[t];switch(d){case ui().d.Members:Wd().K4(s,{tab:"members"});break;case ui().d.Groups:Wd().K4(s,{tab:"groups"});break;case ui().d.Guests:Wd().K4(s,{tab:"guests"});break;case ui().d.Reprovisioning:Wd().K4(s,{tab:"reprovisioning"});break;case ui().d.Requests:Wd().K4(s,{tab:"requests"});break;case ui().d.Contacts:Wd().K4(s,{tab:"contacts"});break;default:(0,_s().HB)(d)}n===ui().d.Requests&&d!==ui().d.Requests&&Ct().A.reset();i.setState({...i.state,currentTab:d})}({newSelectedIndex:e,environment:h,spacePermissionsSettingsStore:r,currentTab:u,canReprovisionContent:g,hideGroupsTab:v,showGuestTabFirst:j,showContactsTab:A}),style:{paddingRight:0,marginTop:-6,marginLeft:-12,paddingLeft:4,width:"calc(100% + 12px)"},tabTitleStyle:{fontSize:16,fontWeight:400},tabBorderStyle:{left:0,right:0},hideTabBorder:!0,right:(0,oe.jsx)(_g,{spaceStore:n,currentTab:u,spacePermissionsSettingsStore:r})}),y?(0,oe.jsx)("div",{style:{margin:"20px 0 20px 0"},children:(0,oe.jsx)(Bg().x,{quantityOfPaidSeats:b,quantityOfSpaceMembers:d,nextBillingDate:(null===(t=S.subscription)||void 0===t?void 0:t.currentPeriodEnd.toLocaleString({month:"short",day:"numeric",year:"numeric"}))??""})}):null,(0,oe.jsx)(qg,{currentTab:u,spaceStore:n,spacePermissionsSettingsStore:r,recentRecoverableUsers:c})]})}function qg(e){let{currentTab:t,spaceStore:s,spacePermissionsSettingsStore:i,recentRecoverableUsers:n}=e;switch(t){case ui().d.Members:return(0,oe.jsx)(fg,{spaceStore:s,spacePermissionsSettingsStore:i});case ui().d.Guests:return(0,oe.jsx)(Cu,{spaceStore:s,spacePermissionsSettingsStore:i});case ui().d.Groups:return(0,oe.jsx)(Xd,{spaceStore:s,spacePermissionsSettingsStore:i});case ui().d.Reprovisioning:return(0,oe.jsx)(Sg,{spaceStore:s,recentRecoverableUsers:n});case ui().d.Contacts:return(0,oe.jsx)($d().x,{spaceStore:s});default:return null}}function Wg(e){let{canReprovisionContent:t,hideGroupsTab:s,showGuestTabFirst:i,showContactsTab:n}=e;return i?[ui().d.Guests,ui().d.Members,...s?[]:[ui().d.Groups],...t?[ui().d.Reprovisioning]:[],...n?[ui().d.Contacts]:[]]:[ui().d.Members,ui().d.Guests,...s?[]:[ui().d.Groups],...t?[ui().d.Reprovisioning]:[],...n?[ui().d.Contacts]:[]]}function Eg(e){let{text:t,number:s,isCurrentTab:i,unread:n,styles:a}=e;return(0,oe.jsxs)("div",{style:{display:"flex",fontSize:S().J.UIRegular.desktop,fontWeight:S().Wy.medium,lineHeight:"18px",...i?a.activeTabStyle:a.inactiveTabStyle},children:[t,s&&s>0?(0,oe.jsx)("div",{style:{fontSize:S().J.UIRegular.desktop,lineHeight:"18px",paddingLeft:4,...a.inactiveTabStyle},children:s}):void 0,n?(0,oe.jsx)(Vd().m,{style:a.redDot,size:6}):void 0]})}var zg=()=>s(667734),Fg=()=>s(782649),Ng=()=>s(499446),Gg=()=>s(812941),Kg=()=>s(284230),Vg=()=>s(21497),Hg=()=>s(848237),$g=()=>s(912979),Yg=()=>s(344417),Jg=()=>s(112886),Qg=()=>s(946141),Zg=()=>s(56394),Xg=()=>s(933117);function ep(e){let{selectItems:t,currentSelectedItem:s,onChange:i,icon:n}=e;const a=(0,l().IS)((()=>({filterWrap:{marginRight:0}})),[]);return(0,oe.jsx)(Xg().A,{items:t,getKey:e=>e.key,selectedItem:s,onSelect:i,renderItem:e=>(0,oe.jsx)(Tl().A,{title:e.value.name,...e,isChecked:s.key===e.value.key}),renderOrigin:e=>(0,oe.jsx)(Zg().A,{...e,title:s.originName??s.name,on:!s.showFilterAsOffWhenSelected,icon:n,wrapStyle:a.filterWrap})})}const tp={[Vg().J2]:{key:Vg().J2,name:(0,oe.jsx)(f().sA,{id:"manageTeamsAccessFilter.accessFilter.filterAllTeams",defaultMessage:"Any"}),originName:(0,oe.jsx)(f().sA,{id:"manageTeamsAccessFilter.accessSelectPlaceolder",defaultMessage:"Access"}),showFilterAsOffWhenSelected:!0},[Vg().b4]:{key:Vg().b4,name:(0,oe.jsx)(f().sA,{id:"manageTeamsAccessFilter.accessFilter.filterOpenTeams",defaultMessage:"Open"})},[Vg().lX]:{key:Vg().lX,name:(0,oe.jsx)(f().sA,{id:"manageTeamsAccessFilter.accessFilter.filterClosedTeams",defaultMessage:"Closed"})},[Vg().OD]:{key:Vg().OD,name:(0,oe.jsx)(f().sA,{id:"manageTeamsAccessFilter.accessFilter.filterPrivateTeams",defaultMessage:"Private"})}},sp=h().oE([tp[Vg().J2],tp[Vg().b4],tp[Vg().lX],tp[Vg().OD]]);function ip(e){let{manageTeamsStore:t}=e;const s=(0,a().v3)(),n=(0,o().K8)((()=>t.state.filterAccess),[t]),r=(0,l().IS)((e=>({keyIcon:{width:kt().Ev.sm,height:kt().Ev.sm,marginRight:2,...n!==Vg().J2?{fill:pa().Ay.blue}:{fill:e.icon.secondary}}})),[n]),d=(0,i.useCallback)((e=>{t.update((t=>({...t,filterAccess:e.key}))),Qg().hj(s,{filter:"access",value:e.key})}),[t,s]),c=tp[n];return(0,oe.jsx)(ep,{selectItems:sp,currentSelectedItem:c,onChange:d,icon:(0,Jg().a)(r.keyIcon)})}const np={viewBox:"0 0 16 16",fittedViewBox:"2.5 2.5 11.01 11.01",svg:(0,oe.jsx)("path",{d:"M2.5 3.4a.9.9 0 0 1 .9-.9h9.2a.9.9 0 0 1 .9.9v1.2a.9.9 0 0 1-.9.9H3.4a.9.9 0 0 1-.9-.9zm.8 3.1h9.4v6.1a.9.9 0 0 1-.9.9H4.2a.9.9 0 0 1-.9-.9zM6.4 8a.5.5 0 0 0 0 1h3.2a.5.5 0 1 0 0-1z"})},ap=(0,kt().wt)("archiveBoxFillSmall",np),rp="showArchived",op="hideArchived",lp={[op]:{key:op,name:(0,oe.jsx)(f().sA,{id:"manageTeamsArchivedFilter.archivedFilter.hideArchivedTeams",defaultMessage:"Active"}),originName:(0,oe.jsx)(f().sA,{id:"manageTeamsArchivedFilter.archivedSelectPlaceolder",defaultMessage:"Active"}),showFilterAsOffWhenSelected:!0},[rp]:{key:rp,name:(0,oe.jsx)(f().sA,{id:"manageTeamsArchivedFilter.archivedFilter.showArchivedTeams",defaultMessage:"Archived"})}};function dp(e){let{manageTeamsStore:t}=e;const s=(0,a().v3)(),n=(0,o().K8)((()=>t.state.showOnlyArchivedTeams),[t]),r=(0,l().IS)((e=>({archiveIcon:{width:kt().Ev.sm,height:kt().Ev.sm,marginRight:4,...n?{fill:pa().Ay.blue}:{fill:e.icon.secondary}}})),[n]),d=[lp[op],lp[rp]],c=(0,i.useCallback)((e=>{t.update((t=>({...t,showOnlyArchivedTeams:e.key===rp}))),Qg().hj(s,{filter:"archived",value:e.key})}),[t,s]),u=lp[n?rp:op];return(0,oe.jsx)(ep,{selectItems:d,currentSelectedItem:u,onChange:c,icon:ap(r.archiveIcon)})}s(430670);const cp={viewBox:"0 0 16 16",fittedViewBox:"2.89 1.85 10.22 12.3",svg:(0,oe.jsx)("path",{d:"M8 1.85c-.925 0-1.673.382-2.179 1.012-.495.617-.73 1.435-.73 2.29 0 .856.235 1.674.73 2.291.506.63 1.255 1.012 2.18 1.012.924 0 1.672-.382 2.178-1.012.495-.617.73-1.435.73-2.29 0-.856-.235-1.674-.73-2.291C9.673 2.232 8.925 1.85 8 1.85m0 7.403c-2.175 0-4.115 1.06-4.94 2.672-.3.585-.165 1.179.19 1.594.34.396.873.63 1.43.63h6.64c.557 0 1.09-.234 1.43-.63.355-.415.49-1.01.19-1.594-.825-1.612-2.765-2.672-4.94-2.672"})},up=(0,kt().wt)("personFillSmall",cp),gp="ShowTeamsWithNoOwnersId";function pp(e){let{teamStores:t,manageTeamsStore:s}=e;const n=(0,a().v3)(),r=(0,o().K8)((()=>s.state.filterByOwner),[s]),d=function(e){switch(e.type){case Vg().wf:return;case Vg().wA:return e.id;case Vg().qG:return gp;default:(0,_s().HB)(e)}}(r),c=(0,o().O$)(ut().AppStoreCurrentSpaceStore),u=(0,f().tz)(),g=(0,o().K8)((()=>{const e=t.flatMap((e=>e.getOwnerUserIds()));return h().sb(e)}),[t]),p=(0,l().IS)((e=>({icon:{marginRight:2,fill:e.icon.secondary},blueFill:{fill:pa().Ay.blue}})),[]),m=(0,i.useCallback)((e=>{if(c)return(0,Yr().z5)({userId:e,currentSpaceStore:c}).getValue()}),[c]),S=(0,i.useCallback)((e=>{const t=e[e.length-1];let i;i=t===d||void 0===t?{type:Vg().wf}:t===gp?{type:Vg().qG}:{type:Vg().wA,id:t},s.update((e=>({...e,filterByOwner:i}))),Qg().hj(n,{filter:"owner",value:i.type})}),[d,s,n]),x=(0,Le().fJ)(z().T.searchActions),b=(0,i.useCallback)((async e=>{let{query:t}=e;if(!c||"resolved"!==x.status)return[];const s=x.value,i=(await s.searchUsers({environment:n,query:t,parentStore:c,userIds:g})).map((e=>e.id));return""===t?[gp,...i]:i}),[c,g,x.status,x.value,n]),y=(0,i.useCallback)(((e,t)=>{if(!c)return null;if(e===gp)return(0,oe.jsx)(Tl().A,{...t,title:(0,oe.jsx)(f().sA,{id:"manageTeamsOwnerFilter.noOwnersFilterOption",defaultMessage:"No owners"}),isChecked:r.type===Vg().qG,className:"notranslate"});const s=m(e);return s?(0,i.createElement)(ne().A,{...t,key:e,actor:(0,ee().MR)(s),isChecked:d===e}):null}),[c,m,d,r.type]),v=(0,o().K8)((()=>{if(r.type!==Vg().wA)return;const e=m(r.id);return e?(0,Ro().c6)(u,e):void 0}),[r,m,u]);let j;return j=r.type===Vg().qG?(0,oe.jsx)(f().sA,{id:"manageTeamsOwnerFilter.filterTitle.onlyOrphanedTeams",defaultMessage:"Owner: None"}):v?(0,oe.jsx)(f().sA,{id:"manageTeamsOwnerFilter.filterTitle.withSpecifiedOwner",defaultMessage:"Owner: {teamOwnerName}",values:{teamOwnerName:v}}):(0,oe.jsx)(f().sA,{id:"manageTeamsOwnerFilter.filterTitle.unset",defaultMessage:"Owner"}),(0,oe.jsx)(Z().A,{mode:Z().C.Pill,title:j,disabled:0===t.length,icon:up,iconStyles:{...p.icon,...r.type!==Vg().wf&&p.blueFill},items:h().oE([d]),hasItemsSelected:(0,_s().O9)(d),onChange:S,labelText:{title:j,tokenInputPlaceholder:u.formatMessage({defaultMessage:"Search teamspace owner...",id:"manageTeamsOwnerFilter.searchOwner.placeholder"}),resultSectionTitle:u.formatMessage({defaultMessage:"Select users",id:"manageTeamsOwnerFilter.searchOwner.resultsTitle"}),componentDebugName:"ManageTeamsSearchOwnerFilter"},performRequest:b,renderResultMenuItem:y,renderToken:()=>null,renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})}var mp=()=>s(452745);const fp="showAll",hp="showTeamsWithSecurityOverrides",Sp={[fp]:{key:fp,name:(0,oe.jsx)(f().sA,{id:"ManageTeamsSecurityOverridesFilter.showAllOption",defaultMessage:"Show all"}),originName:(0,oe.jsx)(f().sA,{id:"ManageTeamsSecurityOverridesFilter.showAllPlaceholder",defaultMessage:"Security"}),showFilterAsOffWhenSelected:!0},[hp]:{key:hp,name:(0,oe.jsx)(f().sA,{id:"ManageTeamsSecurityOverridesFilter.showTeamsWithSecurityOverrides",defaultMessage:"Has overrides"})}};function xp(e){let{manageTeamsStore:t}=e;const s=(0,a().v3)(),n=(0,o().K8)((()=>t.state.showTeamsWithSecurityOverrides),[t]),r=(0,l().IS)((e=>({securityIcon:{width:kt().Ev.sm,height:kt().Ev.sm,marginRight:4,fill:e.icon.secondary},blueFill:{fill:pa().Ay.blue}})),[]),d=[Sp[fp],Sp[hp]],c=(0,i.useCallback)((e=>{t.setState({...t.state,showTeamsWithSecurityOverrides:e.key===hp}),Qg().hj(s,{filter:"securityOverrides",value:e.key})}),[t,s]),u=Sp[n?hp:fp];return(0,oe.jsx)(ep,{selectItems:d,currentSelectedItem:u,onChange:c,icon:(0,mp().u)({...r.securityIcon,...n&&r.blueFill})})}const bp=16,yp=5;function vp(e){let{manageTeamsStore:t,teamStores:s}=e;const n=(0,l().IS)((()=>({container:{display:"flex",alignItems:"center",marginTop:20,flexWrap:"wrap",gap:`${bp}px ${yp}px`},searchContainer:{maxWidth:250,marginRight:"auto"},dropdownContainer:{display:"flex",alignContent:"stretch",flexWrap:"wrap",gap:`${bp}px ${yp}px`}})),[]),a=(0,o().K8)((()=>t.state.searchQuery),[t]),r=(0,i.useCallback)((e=>{t.update((t=>({...t,searchQuery:e})))}),[t]);return(0,oe.jsxs)("div",{style:n.container,children:[(0,oe.jsx)(jp,{style:n.searchContainer,onChange:r,value:a}),(0,oe.jsxs)("div",{style:n.dropdownContainer,children:[(0,oe.jsx)(dp,{manageTeamsStore:t}),(0,oe.jsx)(pp,{teamStores:s,manageTeamsStore:t}),(0,oe.jsx)(ip,{manageTeamsStore:t}),(0,oe.jsx)(xp,{manageTeamsStore:t})]})]})}function jp(e){let{style:t,value:s,onChange:n}=e;const a=(0,f().tz)(),r=(0,l().IS)((e=>({input:{boxShadow:e.inputBoxShadow,borderRadius:100,fontSize:12},searchIcon:{width:kt().Ev.sm,height:kt().Ev.sm,marginRight:2,flexGrow:0,flexShrink:0,fill:e.icon.secondary}})),[]),o=(0,i.useCallback)((e=>n(e.target.value)),[n]);return(0,oe.jsx)($s().A,{placeholder:a.formatMessage({defaultMessage:"Search teamspaces...",id:"manageTeamsFilterRow.searchFilter.placeholder"}),style:{...r.input,...t},value:s,onChange:o,left:(0,Yg().u)(r.searchIcon),format:$s().C.Small,showClearButton:!0})}s(908872);var Ap=()=>s(402014),Cp=()=>s(126158),wp=()=>s(468006),Tp=()=>s(632709),Mp=()=>s(553965);function kp(e){let{teamStore:t,accessLevel:i,isTeamOwner:n,isArchivedTeam:r,onChangeAccessLevel:d,width:c}=e;const u=(0,a().v3)(),g=function(e){return(0,o().K8)((()=>e.isDefault()),[e])}(t),p=(0,s(209592).Z)({teamStore:t,onChange:d,isDefault:g}),m=g?"default":i,h=p.find((e=>e.key===m)),x=!n||r||Boolean(null==h?void 0:h.disableAllOptionsTooltip);let b;x&&(null!=h&&h.disableAllOptionsTooltip||!n?b=(0,oe.jsx)(f().sA,{id:"manageTeamsAccessCell.onlyTeamOwnersCanChangeAccessLevel",defaultMessage:"Only teamspace owners can change teamspace access levels"}):r&&(b=(0,oe.jsx)(f().sA,{id:"manageTeamsAccessCell.archivedTeamCannotChangeAccessLevel",defaultMessage:"Cannot change access level for archived team"})));const y=(0,s(233510).c)(),v=(0,l().IS)((e=>{const t=e.text.tertiary;return{selectButton:{paddingLeft:8,marginLeft:-8,maxWidth:c},label:{...x&&{color:t},fontSize:S().J.UIRegular.desktop,fontWeight:S().Wy.regular},chevron:{width:10,marginLeft:4,fill:e.icon.secondary,...x&&{fill:t}},tooltip:{width:200}}}),[x,c]);if(!h)throw new Error(`Selected access level is not an option found in team access level option: ${m}`);return(0,oe.jsx)(Xg().A,{items:p,getKey:e=>e.key,selectedItem:h,onSelect:e=>"private"!==e.key||y?e.onSelect():Ot().K(u,{from:"team_security_settings",upsell:{type:"product",product:"business",limit:{type:"none"},trialability:"none"}}),renderItem:e=>(0,oe.jsx)(ye().A,{textWrap:!0,style:v.tooltip,placement:Ae().W.Bottom,disableTooltip:!e.value.tooltip,renderTooltip:()=>e.value.tooltip,render:t=>(0,oe.jsx)(Tl().A,{title:e.value.title,...(0,Mp().A)(e,t)})}),disabled:x,renderOrigin:e=>(0,oe.jsx)(ye().A,{textWrap:!0,style:v.tooltip,disableTooltip:!b,renderTooltip:()=>b,alignment:Ae().C.Center,placement:Ae().W.Left,render:t=>(0,oe.jsxs)(Vt().p,{style:v.selectButton,disabled:x,...(0,Mp().A)(e,t),children:[(0,oe.jsx)(Gs().j,{style:v.label,children:h.level}),(0,Al().b)(v.chevron)]})})})}function Ip(e){let{teamOwnerIds:t,manageTeamsStore:n}=e;const a=(0,o().O$)(ut().AppStoreCurrentSpaceStore),r=(0,f().tz)(),{userIds:d,groupIds:c}=t,u=(0,i.useMemo)((()=>[...d,...c]),[c,d]),{userStore:g,groupStore:p}=(0,o().K8)((()=>{if(!a)return{userStore:void 0,groupStore:void 0};const{filterByOwner:e}=n.state;let t=d[0]||c[0];if(e.type===Vg().wA){const s=e.id;u.includes(s)&&(t=s)}return t?d.includes(t)?{userStore:(0,Yr().z5)({userId:t,currentSpaceStore:a}),groupStore:void 0}:{userStore:void 0,groupStore:(0,s(510473).E)({groupId:t,spaceStore:a})}:{userStore:void 0,groupStore:void 0}}),[a,c,n,u,d]),m=(0,o().K8)((()=>null!=g&&g.isDefined()?(0,Ro().c6)(r,g.getModel()):null!=p&&p.isDefined()?p.getName():void 0),[g,p,r]),h=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",fontSize:S().J.UIRegular.desktop,overflow:"hidden"},userAvatar:{paddingRight:6},nMoreOwnersText:{paddingLeft:3,color:e.text.secondary},noOwners:{marginRight:8,color:e.text.tertiary},userName:{flexShrink:1}})),[]);return u.length<1?(0,oe.jsx)("div",{style:h.noOwners,children:(0,oe.jsx)(f().sA,{id:"manageTeamsOwnersCell.noOwners",defaultMessage:"No owners"})}):(0,oe.jsxs)("div",{style:h.container,children:[(0,oe.jsx)(Pn().A,{style:h.userAvatar,avatarShouldShowShadow:!0,userStore:g,size:20}),(0,oe.jsx)(Gs().j,{style:h.userName,children:m}),u.length>1&&(0,oe.jsx)("div",{style:h.nMoreOwnersText,children:(0,oe.jsx)(f().sA,{id:"manageTeamsOwnersCell.nMoreOwnersLabel",defaultMessage:"+{numAdditionalOwners}",values:{numAdditionalOwners:u.length-1}})})]})}const Dp=[Vg().o6,Vg().xT,Vg().p2,Vg().MQ,Vg().rN],Rp={[Vg().p2]:{headerTitle:(0,oe.jsx)(f().sA,{id:"manageTeamsTable.columnTitle.access",defaultMessage:"Access"}),renderCell:e=>{let{data:t,environment:s}=e;return(0,oe.jsx)(kp,{teamStore:t.store,accessLevel:t.accessLevel,isTeamOwner:t.isCurrentUserOwnerOfTeam,isArchivedTeam:t.isArchivedTeam,onChangeAccessLevel:(e,i)=>Hg().qH({environment:s,store:t.store,accessLevel:e,isDefault:i,teamName:t.name,from:"manage_teams_table"}),width:90})},colWidth:{width:90},hasClickableContents:!0},[Vg().o6]:{headerTitle:(0,oe.jsx)(f().sA,{id:"manageTeamspacesTable.columnTitle.teamspace",defaultMessage:"Teamspace"}),renderCell:e=>{let{data:t}=e;return(0,oe.jsx)(_p,{teamStore:t.store,isArchivedTeam:t.isArchivedTeam,name:t.name})},colWidth:{minWidth:30,widthPercent:35}},[Vg().xT]:{headerTitle:(0,oe.jsx)(f().sA,{id:"manageTeamsTable.columnTitle.owners",defaultMessage:"Owners"}),renderCell:e=>{let{data:t,manageTeamsStore:s}=e;return(0,oe.jsx)(Ip,{teamOwnerIds:t.owners,manageTeamsStore:s})},colWidth:{minWidth:60,widthPercent:25}},[Vg().MQ]:{headerTitle:(0,oe.jsx)(f().sA,{id:"manageTeamsTable.columnTitle.updated",defaultMessage:"Updated"}),renderCell:e=>{let{data:t}=e;return t.lastUpdated&&(0,oe.jsx)(Pp,{lastUpdatedMillis:t.lastUpdated})},colWidth:{minWidth:50,widthPercent:15}},[Vg().rN]:{headerTitle:void 0,renderCell:e=>{let{data:t}=e;return(0,oe.jsx)(s(238518).OutlinerTeamOverflow,{teamStore:t.store,from:"manage_teams_table"})},colWidth:{width:30},hasClickableContents:!0}};function _p(e){let{teamStore:t,name:i,isArchivedTeam:n}=e;const r=(0,a().v3)(),o=(0,s(211825).G)(t),d=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden"},teamIcon:{marginRight:12},nameAndMembersContainer:{display:"flex",flexDirection:"column",minWidth:0},nameAndArchivedPillContainer:{display:"flex"},nameText:{lineHeight:"18px",fontWeight:S().Wy.regular},smallText:{fontSize:(0,s(115512).ny)(r,"UISmall"),color:e.text.secondary,fontWeight:S().Wy.regular},archivedTag:{marginLeft:5}})),[r]),c=`${(0,s(192940).h)(t)}`;return(0,oe.jsxs)("div",{style:d.container,children:[(0,oe.jsx)(s(898808).x,{style:d.teamIcon,size:28,store:t,disabled:!0}),(0,oe.jsxs)("div",{style:d.nameAndMembersContainer,children:[(0,oe.jsxs)("div",{style:d.nameAndArchivedPillContainer,children:[(0,oe.jsx)(Gs().j,{style:d.nameText,children:i}),n&&(0,oe.jsx)(te().A,{desktopStyle:d.archivedTag,mobileStyle:d.archivedTag,children:(0,oe.jsx)(f().sA,{id:"manageTeamsTable.archivedTag",defaultMessage:"Archived"})})]}),(0,oe.jsxs)(Gs().j,{style:d.smallText,children:[(0,oe.jsx)(f().sA,{id:"manageTeamsTableColumnData.numMembersLabel",defaultMessage:"{numMembers, plural, one {1 member} other {{numMembers} members}}",values:{numMembers:c}}),o?(0,oe.jsxs)(oe.Fragment,{children:["  ",(0,oe.jsx)(f().sA,{id:"manageTeamsTableColumnData.joinedLabel",defaultMessage:"Joined"})]}):void 0]})]})]})}function Pp(e){let{lastUpdatedMillis:t}=e;return(0,oe.jsx)(Gs().j,{children:(0,Ba().W_)(t,"very_short",fi().locale)})}function Bp(e){let{teamStores:t,manageTeamsStore:s}=e;const n=(0,a().v3)(),r=(0,Jr().$)(),{sortAscending:d,sortColumn:c}=(0,o().K8)((()=>{const{sortAscending:e,sortColumn:t}=s.state;return{sortAscending:e,sortColumn:t}}),[s]),u=(0,o().K8)((()=>{const e=null==r?void 0:r.id;return e?h().oE(t.map((t=>{if(!t.canRead()||!t.isReady())return;const{ownerUserIds:s,ownerGroupIds:i}=t.getAllOwnerIds();return{store:t,name:t.getName()??"",owners:{userIds:s,groupIds:i},isCurrentUserOwnerOfTeam:Boolean(t.isOwner(e)),hasSecurityOverrides:t.hasSecurityOverrides(),accessLevel:t.getTeamAccessLevel(),isArchivedTeam:(0,wp().Sh)({archived_by:t.getArchivedBy()}),lastUpdated:t.getLastEditedTime()}}))):[]}),[null==r?void 0:r.id,t]),g=(0,o().K8)((()=>{const{showOnlyArchivedTeams:e,filterByOwner:t,showTeamsWithSecurityOverrides:i,filterAccess:n}=s.state;return u.filter((t=>e?t.isArchivedTeam:!t.isArchivedTeam)).filter((e=>!i||e.hasSecurityOverrides)).filter((e=>{if(n===Vg().b4&&"open"!==e.accessLevel)return!1;if(n===Vg().lX&&"closed"!==e.accessLevel)return!1;if(n===Vg().OD&&"private"!==e.accessLevel)return!1;switch(t.type){case Vg().qG:return e.owners.userIds.length+e.owners.groupIds.length===0;case Vg().wA:return[...e.owners.userIds,e.owners.groupIds].includes(t.id);case Vg().wf:return!0;default:(0,_s().HB)(t)}}))}),[s,u]),p=(0,o().K8)((()=>{const{sortAscending:e,sortColumn:t}=s.state;return(0,Ng().WQ)({data:g,sortAscending:e,sortColumn:t})}),[s,g]),m=(0,o().K8)((()=>(0,Ag().Ay)(s.state.searchQuery,p,(e=>e.name))),[s,p]),f=(0,i.useCallback)((e=>Hg().F2({environment:n,teamId:e,tab:Tp().p.Members,from:"manage_teams_table"})),[n]),S=(0,l().IS)((e=>({container:{marginTop:17,tableLayout:"fixed",borderCollapse:"collapse",width:"100%",minWidth:Dp.reduce(((e,t)=>e+Fp(Rp[t].colWidth)+Ep),0)},tableHeaderRow:{borderTop:`1px solid ${e.tableDividerColor}`,borderBottom:`1px solid ${e.tableDividerColor}`},noTeamsLabel:{marginTop:15,marginBottom:40,textAlign:"center"}})),[]),x=(0,i.useCallback)((e=>{const{sortColumn:t,sortAscending:i}=s.state,a=e===t&&!i;s.setState({...s.state,sortAscending:a,sortColumn:e}),Qg().xl(n,{sortBy:e,sortOrder:i?"ascending":"descending"})}),[s,n]),b=(0,i.useCallback)((()=>{s.reset()}),[s]);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsxs)("table",{style:S.container,children:[(0,oe.jsx)("thead",{children:(0,oe.jsx)("tr",{style:S.tableHeaderRow,children:Dp.map((e=>(0,oe.jsx)(Lp,{column:e,onSortableColumnClick:x,sortAscending:d,sortColumn:c},`header_${e}`)))})}),(0,oe.jsxs)("tbody",{children:[(0,oe.jsx)("tr",{children:Dp.map((e=>(0,oe.jsx)("td",{},`padding_row_${e}`)))}),m.map((e=>(0,oe.jsx)(Up,{onShowTeamSettings:f,teamData:e,manageTeamsStore:s},`${e.store.id}_row`)))]})]}),(0,oe.jsx)(qp,{style:S.noTeamsLabel,numItemsAfterFilter:m.length,numItemsBeforeFilter:t.length,onResetFilters:b})]})}function Up(e){let{teamData:t,manageTeamsStore:s,onShowTeamSettings:n}=e;const[a,r]=(0,i.useState)(!1),o=(0,i.useCallback)((()=>r(!0)),[]),d=(0,i.useCallback)((()=>r(!1)),[]),c=(0,i.useCallback)((e=>{Wp(e,(()=>n(t.store.id)))}),[n,t.store.id]),u=!t.isArchivedTeam,g=(0,l().IS)((e=>({teamRow:{cursor:u?"pointer":"default",borderBottom:`1px solid ${e.tableDividerColor}`}})),[u]);return(0,oe.jsx)("tr",{onMouseLeave:u?d:void 0,onMouseEnter:u?o:void 0,style:g.teamRow,onClick:u?c:void 0,children:Dp.map((e=>(0,oe.jsx)(Op,{isRowHovered:a,teamData:t,columnData:Rp[e],manageTeamsStore:s},`${t.store.id}_${e}`)))})}function Lp(e){let{column:t,onSortableColumnClick:s,sortColumn:i,sortAscending:n}=e;const a=Rp[t],r=(0,l().IS)((e=>({th:Np(a),innerDiv:{display:"flex",alignItems:"center",minWidth:Fp(a.colWidth),height:32},text:{fontSize:S().J.UISmall.desktop,fontWeight:S().Wy.regular,color:e.text.secondary},sortButton:{padding:5,margin:-5,overflow:"hidden",maxWidth:"100%"},sortIcon:{fill:e.text.secondary,width:12,height:12,marginLeft:4}})),[a]),o=(0,oe.jsx)(Gs().j,{style:r.text,children:a.headerTitle}),d=(c=t,Vg().LR.includes(c)?(0,oe.jsxs)(Vt().p,{style:r.sortButton,onClick:()=>s(t),children:[o,(()=>{if(t===i)return(0,Cp().m)({...r.sortIcon,...n&&{transform:"rotate(180deg)"}})})()]}):o);var c;return(0,oe.jsx)("th",{style:r.th,children:(0,oe.jsx)("div",{style:r.innerDiv,children:d})})}function Op(e){let{teamData:t,columnData:s,isRowHovered:i,manageTeamsStore:n}=e;const r=(0,a().v3)(),o=(0,l().IS)((e=>({td:{...Np(s),...i&&{background:e.buttonHoveredBackground}},innerDiv:{minWidth:Fp(s.colWidth),fontSize:S().J.UIRegular.desktop,color:e.text.primary,height:56,display:"flex",alignItems:"center"}})),[s,i]),d=Wp,c=Boolean(s.hasClickableContents);return(0,oe.jsx)("td",{style:o.td,children:(0,oe.jsx)("div",{style:o.innerDiv,onClick:c?d:void 0,children:s.renderCell({environment:r,data:t,manageTeamsStore:n})})})}function qp(e){let{style:t,numItemsBeforeFilter:s,numItemsAfterFilter:i,onResetFilters:n}=e;if(0!==i)return null;let a;return a=0!==s?(0,oe.jsx)(f().sA,{id:"manageTeamsTable.emptyManageTeamTableDisclaimer.teamsFilteredOut",defaultMessage:"Could not find any teamspaces. <linkbutton>Reset your filters</linkbutton>",values:{linkbutton:e=>(0,oe.jsx)(yi().A,{onClick:n,children:e})}}):(0,oe.jsx)(f().sA,{id:"manageTeamsTable.emptyManageTeamTableDisclaimer.noTeamsExist",defaultMessage:"Could not find any teamspaces."}),(0,oe.jsx)(ve().A,{isSmall:!0,style:t,children:a})}function Wp(e,t){(0,Ap().SQ)({event:e,context:Ap().y$.Click,callback:t})}const Ep=10,zp={paddingLeft:Ep/2,paddingRight:Ep/2};function Fp(e){return"minWidth"in e?e.minWidth:e.width}function Np(e){let t={};return t="width"in e.colWidth?{width:e.colWidth.width}:{width:`${e.colWidth.widthPercent}%`,minWidth:e.colWidth.minWidth},{...zp,...t}}function Gp(e){let{}=e;const{isMobile:t=!1}=(0,a().Y0)(),s=(0,a().v3)(),n=(0,o().uB)(Vg()._5),r=(0,l().IS)((()=>({container:{marginTop:8},header:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8},subheader:{display:"flex",flexDirection:"column",flexShrink:1,overflow:"hidden"}})),[]),d=(0,Ls().D5)(),{teams:c}=(0,Ls().lG)(),u=(0,i.useMemo)((()=>c.map((e=>e.store))),[c]),{unarchivedTeamIds:g,archivedTeamIds:p,isLoading:m}=(0,o().K8)((()=>{const e=$g().A.state;return"loaded"!==e.loadingState?{unarchivedTeamIds:[],archivedTeamIds:[],isLoading:!0}:{unarchivedTeamIds:e.unarchivedTeamIds,archivedTeamIds:e.archivedTeamIds,isLoading:!1}}),[]),h=(0,o().K8)((()=>m?[]:(0,Ng().Gd)({environment:s,teamIds:[...g,...p]})),[p,s,m,g]),S=(0,i.useMemo)((()=>d?u:h),[u,h,d]),x=(0,i.useCallback)((()=>Hg().vn("workspace_settings")),[]);return(0,oe.jsxs)("div",{style:r.container,children:[(0,oe.jsxs)(me().A,{large:!t,style:r.header,small:!0,children:[(0,oe.jsxs)("div",{style:r.subheader,children:[(0,oe.jsx)(f().sA,{id:"manageTeamsBrowser.title",defaultMessage:"Manage teamspaces"}),(0,oe.jsx)(ve().A,{isSmall:!0,style:{marginTop:3},children:(0,oe.jsx)(f().sA,{id:"manageTeamsBrowser.subtitle",defaultMessage:"Manage all teamspaces you have access to here"})})]}),(0,oe.jsx)(Es().A,{onClick:x,size:"lg",className:Ve().e6S,children:(0,oe.jsx)(f().sA,{id:"manageTeamsBrowser.newTeamButton.text",defaultMessage:"New teamspace"})})]}),m?(0,oe.jsx)(mi().A,{}):(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(vp,{teamStores:S,manageTeamsStore:n}),(0,oe.jsx)(Bp,{teamStores:S,manageTeamsStore:n})]})]})}var Kp=()=>s(941541);function Vp(){const e=(0,a().v3)(),{currentSpaceStore:t,currentUserStore:n}=(0,o().K8)((()=>{const{currentSpaceStore:e,currentUserStore:t}=ut().default.state;return{currentSpaceStore:e,currentUserStore:t}}),[]);return(0,i.useEffect)((()=>{if("loading"===$g().A.state.loadingState||!t||!n)return;Xi().P({environment:e,messageStoreEmitValue:-1});const i=Kp().Ay.addListener((0,s(921997).Li)({userId:n.id,spaceId:t.id}),void 0,(t=>{let{value:s}=t;Xi().P({environment:e,messageStoreEmitValue:s})}),void 0,e);return function(){i&&Kp().Ay.removeListener(i,e)}}),[t,n,e]),null}const Hp=i.memo(Vp);var $p=()=>s(885067);function Yp(){const e=(0,a().Y0)();return(0,oe.jsx)(me().A,{large:!e.isMobile||void 0,divider:e.isMobile?void 0:"full",children:(0,oe.jsx)(f().sA,{id:"teamsWorkspaceSettings.title",defaultMessage:"Teamspace settings"})})}function Jp(){const e=(0,a().v3)(),t=(0,o().O$)(ut().AppStoreCurrentSpaceStore),s=(0,o().uB)(void 0,xt().A),n=(0,o().K8)((()=>t&&s.getValueForSpace(t)),[t,s]),r=(0,o().K8)((()=>(0,je().Qd)()),[]),l=(null==n?void 0:n.disableTeamCreation)??!1,d=(null==n?void 0:n.disableTeamGuests)??!1,c=void 0===n,u=(0,i.useCallback)((()=>{const s=l?"allowTeamCreation":"disableTeamCreation";t&&n&&(0,Ng().zY)({newSettingValue:s,environment:e,spaceStore:t,workspaceSecuritySettings:n})}),[t,l,e,n]);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)($p().y,{disabled:c,onChange:u,title:(0,oe.jsx)(f().sA,{id:"teamWorkspacesSettings.disableTeamCreation.workspaceOwners.title",defaultMessage:"Limit teamspace creation to only workspace owners"}),description:(0,oe.jsx)(f().sA,{id:"teamWorkspacesSettings.disableTeamCreation.workspaceOwners.caption",defaultMessage:"Only allow workspace owners to create teamspaces"}),selected:l}),(0,oe.jsx)(pi().A,{size:34}),r&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)($p().y,{disabled:c,onChange:async function(){if(t&&n){if(!Boolean(n.disableTeamGuests)){const{accept:e}=await j().Gh({message:(0,oe.jsx)(f().sA,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.message",defaultMessage:"Are you sure you want to disable teamspace guests?"}),description:(0,oe.jsx)(f().sA,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.description",defaultMessage:"This action will remove all teamspace guests from the workspace."}),acceptLabel:(0,oe.jsx)(f().sA,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.acceptButton",defaultMessage:"Disable and remove teamspace guests"})});if(!e)return}cs().V(e,{securitySettingsState:{...n,disableTeamGuests:!n.disableTeamGuests},spaceStore:t})}},title:(0,oe.jsx)(f().sA,{id:"teamWorkspacesSettings.disableTeamGuests.workspaceOwners.title",defaultMessage:"Allow teamspace owners to add teamspace guests"}),description:(0,oe.jsx)(f().sA,{id:"teamWorkspacesSettings.disableTeamGuests.workspaceOwners.caption",defaultMessage:"This will allow teamspace owners with membership admin permissions to add teamspace guests. Disabling will remove all teamspace guests."}),selected:!d}),(0,oe.jsx)(pi().A,{size:34})]})]})}function Qp(e){let{}=e;const t=(0,l().IS)((()=>({learnMoreLinkContainer:{paddingTop:6,paddingBottom:20}})),[]),s=(0,a().v3)(),n=(0,o().O$)(ut().AppStoreCurrentSpaceStore),r=(0,i.useCallback)((async e=>{let{addedTeams:t,removedTeams:i}=e;n&&await(0,Ng().R6)({environment:s,addedTeams:t,removedTeams:i,spaceStore:n})}),[n,s]),d=(0,Ls().D5)(),{teams:c,updateStatus:u}=(0,Ls().uJ)(),g=(0,i.useMemo)((()=>c.map((e=>e.store))),[c]),{unarchivedTeams:p,isLoaded:m}=(0,Ls().NA)(),h=(0,i.useMemo)((()=>d?g:p),[g,p,d]),S=(0,i.useMemo)((()=>"fetching"!==u),[u]),x=(0,i.useMemo)((()=>d?S:m),[m,S,d]),b=0===h.length?null:(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Kg().A,{unarchivedTeams:h,onUpdate:r,description:(0,oe.jsx)(ve().A,{isSmall:!0,isMultiline:!0,children:(0,oe.jsx)(f().sA,{id:"teamsWorkspaceSettings.defaultTeams.caption",defaultMessage:"Choose teamspaces that all new and current workspace members will automatically join"})})}),(0,oe.jsx)(pi().A,{size:34})]});return(0,oe.jsxs)(Gt().Ay,{children:[(0,oe.jsx)(Yp,{}),(0,oe.jsx)(Gg().A,{helpCenterLocation:"settingsAndPermissions",analyticsFrom:"teams_learn_more_workspace_settings",containerStyle:t.learnMoreLinkContainer}),(0,oe.jsx)(Hp,{}),x?(0,oe.jsxs)(oe.Fragment,{children:[b,(0,oe.jsx)(Jp,{}),(0,oe.jsx)(Gp,{})]}):null]})}var Zp=()=>s(885475),Xp=()=>s(874913),em=()=>s(948914);const tm=(0,kt().wt)("clockAlternate",{viewBox:"0 0 20 20",svg:(0,oe.jsx)("path",{d:"M10.417 6.09961C10.5811 6.09961 10.7201 6.15885 10.834 6.27734C10.9525 6.39128 11.0117 6.53027 11.0117 6.69434V11.2949L10.376 9.34668L12.5977 12.3408C12.7116 12.4867 12.7617 12.6416 12.748 12.8057C12.7344 12.9697 12.6592 13.0996 12.5225 13.1953C12.3721 13.3001 12.2148 13.3389 12.0508 13.3115C11.8913 13.2842 11.75 13.1908 11.627 13.0312L9.99316 10.8779C9.93392 10.8005 9.89062 10.7253 9.86328 10.6523C9.83594 10.5749 9.82227 10.4928 9.82227 10.4062V6.69434C9.82227 6.53027 9.87923 6.39128 9.99316 6.27734C10.1117 6.15885 10.2529 6.09961 10.417 6.09961ZM10.6768 17.126C9.93848 17.126 9.22298 17.0098 8.53027 16.7773C7.84212 16.5495 7.20638 16.2259 6.62305 15.8066C6.04427 15.3919 5.54297 14.9111 5.11914 14.3643C4.96875 14.182 4.90495 13.9928 4.92773 13.7969C4.95052 13.6009 5.03939 13.446 5.19434 13.332C5.36296 13.2135 5.53841 13.1748 5.7207 13.2158C5.90299 13.2568 6.06478 13.3571 6.20605 13.5166C6.54785 13.9678 6.94889 14.3597 7.40918 14.6924C7.87402 15.0205 8.37988 15.2734 8.92676 15.4512C9.47819 15.6335 10.0615 15.7269 10.6768 15.7314C11.4606 15.736 12.1943 15.5902 12.8779 15.2939C13.5661 15.0023 14.1676 14.599 14.6826 14.084C15.2021 13.5645 15.6077 12.9629 15.8994 12.2793C16.1956 11.5911 16.3438 10.8529 16.3438 10.0645C16.3438 9.2806 16.1956 8.54688 15.8994 7.86328C15.6077 7.17513 15.2021 6.57357 14.6826 6.05859C14.1676 5.53906 13.5661 5.13346 12.8779 4.8418C12.1943 4.55013 11.4606 4.4043 10.6768 4.4043C9.88835 4.4043 9.15234 4.55013 8.46875 4.8418C7.78971 5.12891 7.19043 5.52995 6.6709 6.04492C6.15137 6.5599 5.74349 7.15918 5.44727 7.84277C5.1556 8.52181 5.00749 9.25326 5.00293 10.0371H3.6084C3.61296 9.07096 3.7998 8.16406 4.16895 7.31641C4.53809 6.46875 5.0485 5.72135 5.7002 5.07422C6.35189 4.42708 7.10156 3.92122 7.94922 3.55664C8.80143 3.1875 9.71061 3.00293 10.6768 3.00293C11.6429 3.00293 12.5521 3.1875 13.4043 3.55664C14.2565 3.92578 15.0062 4.4362 15.6533 5.08789C16.305 5.73503 16.8154 6.4847 17.1846 7.33691C17.5537 8.18913 17.7383 9.09831 17.7383 10.0645C17.7383 11.0306 17.5537 11.9398 17.1846 12.792C16.8154 13.6442 16.305 14.3962 15.6533 15.0479C15.0062 15.6995 14.2565 16.2077 13.4043 16.5723C12.5521 16.9414 11.6429 17.126 10.6768 17.126ZM2.78809 8.66992H6.16504C6.33822 8.66992 6.4681 8.71094 6.55469 8.79297C6.64583 8.87044 6.68913 8.9707 6.68457 9.09375C6.68001 9.21224 6.63216 9.33984 6.54102 9.47656L4.87988 11.7803C4.76595 11.9352 4.63151 12.015 4.47656 12.0195C4.32161 12.0195 4.1849 11.9398 4.06641 11.7803L2.40527 9.47656C2.31413 9.3444 2.26628 9.2168 2.26172 9.09375C2.25716 8.9707 2.29818 8.87044 2.38477 8.79297C2.47591 8.71094 2.61035 8.66992 2.78809 8.66992Z"})});var sm=()=>s(441977);function im(){const e=(0,o().K8)((()=>{var e;return null===(e=em().A.state.preferences)||void 0===e?void 0:e.onStartup}),[]);if(!e)return null;const t=[{key:"continue",label:(0,oe.jsx)(f().sA,{id:"OnDesktopAppStartupSetting.continue.label",defaultMessage:"Continue where you left off"}),renderIcon:e=>tm({width:20,height:20,...e})},{key:"default_page",label:(0,oe.jsx)(f().sA,{id:"OnDesktopAppStartupSetting.defaultPage.label",defaultMessage:"Your default page"}),renderIcon:e=>(0,sm().J)({width:20,height:20,...e})}];return(0,oe.jsx)(Xs().A,{isMobile:!1,title:(0,oe.jsx)(f().sA,{id:"onStartup.title",defaultMessage:"On startup"}),caption:(0,oe.jsx)(f().sA,{id:"onStartup.description",defaultMessage:"Choose what to show when the Notion app starts."}),type:"dropdown",currentOption:e,options:t,onSelectOption:e=>{Xp().electronAppFeatures.setPreference("onStartup",e)}})}var nm=()=>s(420844);const am=function(){const e=(0,o().K8)((()=>{var e;return null===(e=em().A.state.preferences)||void 0===e?void 0:e.onStartup}),[]),t=(0,a().v3)(),i=(0,nm().OC)({environment:t}),n=(0,o().K8)((()=>!t.device.isMobile&&Boolean("on"===R().default.getEligibleGroup({experimentId:"settings_refresh_2025",defaultGroup:"control"}))),[t]),r=[...(0,o().K8)((()=>n&&Array.isArray(i)?i:[]),[n,i]),e?{key:"on-startup",renderSettingsItem:()=>(0,oe.jsx)(im,{})}:void 0,{key:"default-page",renderSettingsItem:()=>(0,oe.jsx)(s(993342).A,{isMobile:!1})}].filter(_s().O9);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(me().A,{large:!0,divider:"full",children:n?(0,oe.jsx)(f().sA,{id:"desktopAppSettings.settingsSection.title",defaultMessage:"Desktop app"}):(0,oe.jsx)(f().sA,{id:"desktopAppStartupSettings.settingsSection.title",defaultMessage:"Startup"})}),(0,oe.jsx)(vl().U,{items:r}),(0,oe.jsx)(pi().A,{size:48,isHidden:!0})]})};var rm=()=>s(704444);const om=function(e){let{isMobile:t}=e;const s=(0,a().v3)(),n=(0,o().K8)((()=>ut().default.state.currentUserSettingsStore),[]),r=(0,o().K8)((()=>{var e;return null==n||null===(e=n.getSettings())||void 0===e?void 0:e.profile_discoverable}),[n])??!0,l=(0,i.useCallback)((e=>{const t=!r;k().createAndCommit({userAction:"ProfileDIscoverabilitySettings.onToggleOption",environment:s,canUndo:!0,perform:e=>{n&&I().mJ({userSettingsStore:n,data:{profile_discoverable:t},transaction:e})}})}),[s,r,n]),d=(0,oe.jsx)(f().sA,{id:"profileDiscoverabilitySettings.title",defaultMessage:"Profile discoverability"}),c=(0,oe.jsx)(f().sA,{id:"profileDiscoverabilitySettings.caption",defaultMessage:"Users with your email can see your name and profile picture when inviting you to a new workspace. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,oe.jsx)(yi().A,{external:!0,href:(0,Ye().xS)("guides.profileSettings"),onClick:e=>{e.stopPropagation()},children:e})}});return(0,oe.jsx)(Xs().A,{isMobile:t,title:d,caption:c,isOn:r,type:"toggle",onToggle:()=>l(n)})};const lm=(0,s(149397).k)((function(e){let{passwordRequestStore:t,userEmailDomainSettings:n,billingData:l}=e;const{isPhone:d,isMobile:c,isElectron:u,isMobileNative:g}=(0,a().Y0)(),p=(0,a().v3)(),m=(0,nm().OC)({environment:p}),h=(0,nm().jo)(),S=(0,o().uB)(void 0,jt().A);(0,r().l)((()=>{T().Q(p,S)}));const x=(0,o().K8)((()=>S.state.accountSettings),[S]),b=(0,tt().y)(),y=(0,o().K8)((()=>(0,ss().xu)(p)),[p]),v=(0,o().K8)((()=>s(430483).zD.isAiEnabled()&&R().default.checkGate({gateName:"ai_co_editing"})),[]),j=(0,o().K8)((()=>c&&t?(0,nm().xF)({isPhone:d,isMobileNative:g,showOfflineSettings:b,passwordRequestStore:t,userEmailDomainSettings:n,billingData:l,accountSettings:x}):y?h:m),[m,c,d,g,b,t,n,x,l,h,y]);(0,i.useEffect)((()=>(u&&Xp().setGlobalShortcutsEnabled(!1),()=>{u&&Xp().setGlobalShortcutsEnabled(!0)})),[u]);const A=[{key:"timezone-auto",renderSettingsItem:()=>(0,oe.jsx)(bl,{isMobile:c})},{key:"timezone-manual",renderSettingsItem:()=>(0,oe.jsx)(xl,{isMobile:c})}].filter(_s().O9),C=[{key:"ai-co-editing",renderSettingsItem:()=>(0,oe.jsx)(s(928229).t,{isMobile:c})}],w=[(0,o().K8)((()=>(0,rm().y)(p)),[p])?{key:"cookies",renderSettingsItem:()=>(0,oe.jsx)(rm().A,{isMobile:c})}:void 0,{key:"view-history",renderSettingsItem:()=>(0,oe.jsx)(s(991627).L,{isMobile:c})},{key:"profile-discoverability",renderSettingsItem:()=>(0,oe.jsx)(om,{isMobile:c})}].filter(_s().O9);return(0,oe.jsxs)(Gt().Ay,{children:[(0,oe.jsx)(me().A,{large:!c,divider:"full",children:y?(0,oe.jsx)(f().sA,{id:"preferences.settingsSection.title",defaultMessage:"Preferences"}):(0,oe.jsx)(f().sA,{id:"mySettings.settingsSection.title",defaultMessage:"My settings"})}),(0,oe.jsx)(vl().U,{items:j}),y?(0,oe.jsx)(Il,{}):null,(0,oe.jsx)(pi().A,{size:48,isHidden:!0}),(0,oe.jsx)(am,{}),v?(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(me().A,{large:!c,divider:"full",children:(0,oe.jsx)(f().sA,{id:"notificationAndPersonalSettings.aiSection.title",defaultMessage:"Notion AI"})}),(0,oe.jsx)(vl().U,{items:C}),(0,oe.jsx)(pi().A,{size:48,isHidden:!0})]}):null,y?null:(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(me().A,{large:!c,divider:"full",children:(0,oe.jsx)(f().sA,{id:"notificationAndPersonalSettings.dateAndTimeSection.title",defaultMessage:"Date & time"})}),(0,oe.jsx)(vl().U,{items:A}),(0,oe.jsx)(pi().A,{size:48,isHidden:!0})]}),(0,oe.jsx)(me().A,{large:!c,divider:"full",children:(0,oe.jsx)(f().sA,{id:"mySettings.privacySection.title",defaultMessage:"Privacy"})}),(0,oe.jsx)(vl().U,{items:w})]})}));var dm=()=>s(271084),cm=()=>s(317182);function um(e){const{up:t}=e,s={width:10,height:10,marginLeft:4};return t?(0,Cp().m)({...s,transform:"rotate(180deg)"}):(0,Cp().m)(s)}function gm(e){let{users:t,store:s,extraColumns:n,initialSort:a,tableStyle:r}=e;const[l,d]=(0,i.useState)(a),c=(0,f().tz)();function u(e,t){return(0,oe.jsxs)(be().A,{disabled:!t.sortable,ignoreLocalHoverState:!0,onClick:()=>{!function(e){d({column:e,asc:(null==l?void 0:l.column)===e&&!(null!=l&&l.asc)})}(e)},style:{display:"flex",alignItems:"center"},children:[t.title,t.sortable&&l&&l.column===e&&um({up:l.asc})]},e)}const g=(0,i.useMemo)((()=>({title:(0,oe.jsx)(f().sA,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),style:{width:"60%"},sortable:!0,renderer:e=>(0,oe.jsx)(Ce().A,{actorStore:e}),getValue:e=>e.getDisplayName(c)})),[c]),p=(0,i.useMemo)((()=>({name:g,...n})),[n,g]),m=h().HP(p).map((e=>({key:e,header:u(e,p[e]),style:p[e].style}))),S=(0,o().K8)((()=>{const e=t.map((e=>ae().LU.createChildStore(s,{table:O().oo,id:e.userId}))).filter((e=>e.isDefined()));return l?e.sort(((e,t)=>{const s=p[l.column].getValue(e),i=p[l.column].getValue(t),n=s<i?-1:s>i?1:0;return l.asc?n:-1*n})):e}),[t,s,p,l]);return(0,oe.jsx)(cm().A,{columns:m,rows:S.map((e=>{const t=Object.values(p).map(((t,s)=>t.renderer?t.renderer(e):(0,oe.jsx)(i.Fragment,{children:t.getValue(e)},s)));return{key:e.id,columns:t}})),tableStyle:r})}function pm(e){const{store:t}=e,{isOnline:s,subscriptionDataStoreData:i,userSimilarityData:n,visibleUsersLoaded:a,visibleUsers:r}=(0,o().K8)((()=>{const e=Zi().subscriptionDataStoreInstance.state,s=e?(0,is().Be)(e):[],i=h().Si(s.map((e=>ae().LU.createChildStore(t,{table:O().oo,id:e.userId}).isReady())));return{isOnline:pt().A.state.online,subscriptionDataStoreData:e,userSimilarityData:dm().k.state||{},visibleUsersLoaded:i,visibleUsers:s}}),[t]);if(!s)return(0,oe.jsx)(ve().A,{isSmall:!0,style:{textAlign:"center"},children:(0,oe.jsx)(f().sA,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."})});if(!i)return(0,oe.jsx)(mi().A,{style:{margin:"calc(50% - 1em) auto"}});if(!a)return(0,oe.jsx)(mi().A,{style:{margin:"calc(50% - 1em) auto"}});const l={style:{},title:(0,oe.jsx)(oe.Fragment,{children:"Similarity Score"}),sortable:!0,renderer:e=>{var t;return(0,oe.jsx)(oe.Fragment,{children:(null===(t=n[e.id])||void 0===t?void 0:t.toFixed(3))||0})},getValue:e=>n[e.id]||0};return(0,oe.jsxs)("div",{style:{width:"100%"},children:[(0,oe.jsx)(me().A,{large:!0,divider:"full",style:{marginBottom:16,paddingBottom:4,display:"flex"},children:"User Similarity Scores"}),(0,oe.jsx)(gm,{users:r,store:t,extraColumns:{similarityColumn:l},initialSort:{column:"similarityColumn",asc:!1},tableStyle:{borderTop:void 0}})]})}const mm=new(Le().O2)("experimentSettings",(()=>Promise.all([s.e(23930),s.e(7717)]).then(s.bind(s,45135)))),fm=(0,Le()._h)(mm,(e=>e.ExperimentSettings)),hm={display:"flex",flexDirection:"column",justifyContent:"space-between",paddingTop:12,paddingBottom:12,paddingLeft:8,paddingRight:8,gap:4},Sm={user_settings:{},profile:{},notifications:{},notifications_and_settings:{},connected_apps:{},language_and_region:{},offline:{},settings:{},teams:{adminOnly:!0,membersOnly:!0},members:{membersOnly:!0},analytics:{membersOnly:!0,enterpriseOnly:!0},plans:{membersOnly:!0},billing:{},subscription:{},requests:{adminOnly:!0},security:{adminOnly:!0},identity_provisioning:{adminOnly:!0},admin_content_search:{adminOnly:!0,enterpriseOnly:!0},integrations:{adminOnly:!0},imports:{},audit_log:{adminOnly:!0,enterpriseOnly:!0},public_pages:{membersOnly:!0},sites:{membersOnly:!0},custom_emoji:{membersOnly:!0},verified_pages:{membersOnly:!0},experiments:{},performance_toolbar:{},user_similarity_scores:{},collection_debug:{},offline_mode_debug:{},ai:{},design_previews:{}},xm=(0,f().YK)({dialogLabel:{id:"spaceSettings.dialogLabel",defaultMessage:"Settings & members"}});function bm(e){let{spaceStore:t,userStore:n}=e;const d=(0,a().v3)(),{open:c,currentTab:u,openedFrom:g,upsellType:p}=(0,o().K8)((()=>{const{open:e,currentTab:t,openedFrom:s,upsellType:i}=At().A.state;return{open:e,currentTab:t,openedFrom:s,upsellType:i}}),[]),m=(0,o().uB)(void 0,s(194763).A),f=(0,o().uB)(void 0,jt().A),h=(0,o().uB)(void 0,xt().A),S=(0,o().uB)(void 0,St),b=(0,o().uB)(void 0,vt);(0,r().l)((()=>{const e=h.getValueForSpace(t);e&&h.setState(e)})),(0,r().l)((()=>{T().Q(d,f)})),(0,i.useEffect)((()=>{c&&v().bt(d,{tab:u,from:g,upsell_type:p})}),[c]);const y=(0,i.useCallback)((()=>{Tt().x(d),jm(),x().Wy({environment:d,spaceId:t.id,canAdmin:t.canAdmin()})}),[d,t]),j=(0,i.useCallback)((()=>{_m((()=>{At().A.setState({...At().A.state,open:!1}),s(189157).A.reset(),b.reset(),jm(),Ct().A.reset()}),d,t,m,f,h)}),[d,t,m,f,h,b]),A=(0,l().IS)((()=>({modalInner:{width:1150,maxWidth:"calc(100vw - 100px)",height:"calc(100vh - 100px)",overflow:"hidden",borderRadius:12,maxHeight:715}})),[]);return(0,oe.jsx)(hi().a,{ariaLabel:E().A.formatMessage(xm.dialogLabel),open:c,innerStyle:A.modalInner,onOpen:y,onDismiss:j,render:()=>(0,oe.jsx)(Om,{spaceStore:t,userStore:n,spaceBasicSettingsStore:m,spaceProfileSettingsStore:f,securitySettingsStore:h,samlSettingsStore:S,spaceDomainSettingsStore:b,onModalDismiss:j}),className:Ve().w7$})}function ym(e,t){const s=Sm[e];return!(s.adminOnly&&!t.canAdmin())&&(!(s.membersOnly&&!t.canRead())&&!(s.enterpriseOnly&&!(0,m().OX)(t.getSubscriptionTier())))}function vm(e,t){return!!pt().A.state.online||!(!t||"offline"!==e)}function jm(){F().A.reset(),H.reset()}function Am(e){let{userStore:t}=e;const s=(0,f().tz)(),i=(0,o().K8)((()=>t.getFullName(s)),[s,t]);return i?(0,oe.jsx)(ve().A,{style:{fontWeight:S().Wy.medium},children:i}):null}function Cm(e,t,s){const{disablePublicAccess:i,disableGuests:n,disableMoveToSpace:a,disableExport:r,disableSpacePageEdits:o,disablePublicAccessRequests:l,disableTeamCreation:d,disableMembershipRequests:c,disableExternalMembershipRequests:u,disableGuestMembershipRequests:g,disableTeamGuests:p,enableGuestInviteRequests:m,enableAiTraining:f,zeroRetentionEnabled:h,disableMemberUpgradeRequests:S}=e.state;k().createAndCommit({userAction:"SpaceSettings.attemptCloseCurrentTab",environment:s,canUndo:!0,perform:e=>{w().l3({environment:s,disablePublicAccess:i,disableGuests:n,disableMoveToSpace:a,disableExport:r,disableSpacePageEdits:o,disablePublicAccessRequests:l,transaction:e,spaceStore:t,disableTeamCreation:d,disableMembershipRequests:c,disableExternalMembershipRequests:u,disableGuestMembershipRequests:g,disableTeamGuests:p,enableGuestInviteRequests:m,enableAiTraining:Boolean(f),zeroRetentionEnabled:Boolean(h),disableMemberUpgradeRequests:Boolean(S)})}})}function wm(e){let{spaceStore:t}=e;const s=(0,a().v3)(),i=(0,o().K8)((()=>(0,je().bW)(s)),[s]),n=(0,o().K8)((()=>Ct().A.state.count),[]);return i?(0,oe.jsx)(Ug,{}):(0,oe.jsx)(ot().A,{store:t,unreadAccessRequests:n})}function Tm(e){let{spaceStore:t}=e;const s=(0,a().v3)(),i=(0,o().O$)(Zi().subscriptionDataStoreInstance),n=(0,qt()._3)({spaceId:t.id}),r=(0,o().K8)((()=>wt().A.getData(s,{spaceId:t.id})),[t,s]),l=(0,o().K8)((()=>gt().L.getData(s,{spaceId:t.id})??[]),[t,s]);if(n){if((0,p().Fq)(n)){const e=is().BA(i);return e?(0,oe.jsx)(Nt().A,{spaceStore:t,billingData:n,upcomingInvoiceData:r,customerData:e,billingEvents:l}):null}return(0,oe.jsx)(Xt,{spaceStore:t,billingData:n,billingEvents:l})}return null}function Mm(){const e=(0,o().K8)((()=>(0,$e().LB)()),[]),t=(0,o().K8)((()=>(0,$e().jw)()),[]);return(0,oe.jsx)(Gt().Ay,{children:(0,oe.jsx)(gl().A,{genericImporterEnabled:e,zipImporterEnabled:t})})}function km(e){return{fontSize:12,lineHeight:1,marginBottom:1,color:e.text.secondary,fontWeight:S().Wy.semibold,alignItems:"center",display:"flex",height:24,paddingLeft:8,paddingRight:8,textOverflow:"ellipsis",overflow:"hidden"}}function Im(){const e=(0,l().DP)(),t=(0,a().v3)(),s=(0,o().K8)((()=>(0,Ke()._m)(t)),[t]),i=(0,o().K8)((()=>null==s?void 0:s.getEmail()),[s]),n={size:20,hasTooltip:!0,avatarShouldShowShadow:!0,userStore:s};return(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center",height:44,paddingLeft:8,paddingRight:8},children:[(0,oe.jsx)("div",{"aria-hidden":!0,style:(0,Kt().P6)(e),children:(0,oe.jsx)(Pn().A,{...n})}),s?(0,oe.jsxs)("div",{children:[(0,oe.jsx)(Am,{userStore:s}),i&&(0,oe.jsx)(ve().A,{isSmall:!0,children:i})]}):(0,oe.jsx)(f().sA,{id:"spaceSettings.sidebar.personalSettingsSection.userDetails.title",defaultMessage:"Me"})]})}function Dm(e){let{tab:t}=e;const s=(0,l().DP)(),i=(0,a().v3)(),n=(0,o().O$)(ut().AppStoreCurrentSpaceStore);return(0,o().K8)((()=>"members"===t&&i.device.isDesktop&&(null==n?void 0:n.canEditMembership())&&(0,je().x3)()&&!(0,je().bW)(i)&&Ct().A.state.count>0),[t,i,n])?(0,oe.jsx)(Vd().m,{color:s.redBadgeBackground}):null}function Rm(e){let{spaceProfileSettingsStore:t,billingData:s}=e;const i=(0,p().eh)(s,"student");return(0,oe.jsx)(Rl,{isEducationPlan:i,spaceProfileSettingsStore:t})}async function _m(e,t,s,i,n,a){const{currentUserStore:r,currentUserSettingsStore:o}=ut().default.state;if(!r||!o)throw new Error("No user or settings store.");const l=(0,oe.jsx)(f().sA,{id:"spaceSettings.closeSettingsDialog.confirmationMessage",defaultMessage:"Your changes have not been saved. Save changes?"}),d=(0,oe.jsx)(f().sA,{id:"spaceSettings.closeSettingsDialog.confirmationButton.label",defaultMessage:"Yes"}),c=(0,oe.jsx)(f().sA,{id:"spaceSettings.closeSettingsDialog.cancelationButton.label",defaultMessage:"No"}),{currentTab:u}=At().A.state;if("profile"===u){if(!h().n4(n.state,n.getValueForUser(r,o,E().A.getIntl()))){const{profilePhoto:s,name:i,startDayOfWeek:a}=n.state;return i?j().ui({message:l,showCancel:!0,keepFocus:!0,items:[{label:(0,oe.jsx)(f().sA,{id:"spaceSettings.closeSettingsDialog.updateSettingsButton.label",defaultMessage:"Update"}),color:"blue",onAccept:()=>{k().createAndCommit({userAction:"SpaceSettings.attemptCloseCurrentTab",environment:t,canUndo:!0,perform:e=>{const{currentUserStore:t}=ut().default.state;if(t&&b().b({userStore:t,data:{name:i,profilePhoto:s},transaction:e}),o){const t=o.getSettings();(null==t?void 0:t.start_day_of_week)!==a&&I().mJ({userSettingsStore:o,data:{start_day_of_week:a},transaction:e})}}}),e()}}],handleCancel:()=>{e()}}):j().f1((0,oe.jsx)(f().sA,{id:"profileSettings.personalInfoSection.nameMissing.message",defaultMessage:"Please fill in name."})),!0}e()}else if("settings"===u&&s.canEdit()){const n=!h().n4(a.state,a.getValueForSpace(s)),r=!h().n4(i.state,i.getValueForSpace(s));if(n||r){const{accept:o}=await j().Gh({message:l,acceptLabel:d,cancelLabel:c});return o?(r&&w().Ef({environment:t,spaceStore:s,spaceBasicSettingsStore:i}),n&&Cm(a,s,t),e()):e(),!0}e()}else if("audit_log"===u)jm(),e();else if("analytics"===u)bt().A.reset(),e();else if("plans"===u&&s.canAdmin()){const i=a.getValueForSpace(s);!h().n4(a.state,a.getValueForSpace(s))&&i&&(a.setState(i),Cm(a,s,t)),e()}else"teams"===u?(Xi().U(),e()):e();return!1}function Pm(e){let{tab:t,spaceStore:s,spaceBasicSettingsStore:i,spaceProfileSettingsStore:r,securitySettingsStore:d,spaceDomainSettingsStore:c}=e;const u=(0,l().DP)(),g=(0,a().v3)(),{itemRef:p,onKeyDown:m,onFocus:f,isTabbable:h}=(0,n().e)(),x=(0,o().K8)((()=>At().A.state.currentTab===t),[t]),b=(0,o().K8)((()=>ym(t,s)),[s,t]),y=(0,o().K8)((()=>Kt().ug[t](g,u)),[g,t,u]),j=(0,o().K8)((()=>Kt().j$[t](g)),[g,t]),A=(0,o().K8)((()=>Kt().pG[t](g)),[g,t]),C=(0,tt().y)(),w=(0,o().K8)((()=>!vm(t,C)),[t,C]),T=(0,ns().EF)(Zi().subscriptionDataStoreInstance),M="plans"===t&&!T,k=x&&!M,I=(0,l().IS)((e=>({icon:{...(0,Kt().P6)(e,M),...w?{fill:e.text.quaternary}:{}},title:w?{color:e.text.quaternary}:M?{color:e.text.uiBluePrimary}:{},button:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingLeft:8,paddingRight:8,borderRadius:4,marginTop:1,marginBottom:1,minHeight:27,position:"relative",...x?{background:e.buttonHoveredBackground}:{}}})),[w,M,x]);return b?(0,oe.jsxs)(be().A,{ref:p,onKeyDown:m,onFocus:f,disallowTabbing:!h,role:"tab","aria-selected":x,"aria-controls":x?`settings-tabpanel-${t}`:void 0,id:`settings-tab-${t}`,disabled:w,hovered:x,style:I.button,onClick:e=>{if(x)return null;_m((()=>{At().A.setState({...At().A.state,currentTab:t,defaultSubtab:void 0}),c.reset(),v().Y7(g,{tab:t})}),g,s,i,r,d)},testId:`settings-tab-${t}`,children:[(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center",...k&&{fontWeight:S().Wy.semibold}},children:[(0,oe.jsx)("div",{style:I.icon,children:y}),(0,oe.jsx)(ve().A,{style:I.title,isMultiline:!0,children:j}),A]}),(0,oe.jsx)(Dm,{tab:t})]}):null}function Bm(e){let{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:n,spaceDomainSettingsStore:r,renderBelowPrompt:d}=e;const g=(0,l().DP)(),p=(0,a().v3)(),m=(0,f().tz)(),h=(0,o().K8)((()=>function(e){var t,s;const{currentSpaceViewStore:i,currentSpaceStore:n,currentUserStore:a}=ut().default.state;if(!n||!ym("analytics",n))return!1;if(null==a||!a.id)return!1;if(null==n||!n.isDefined())return!1;const r=null==i?void 0:i.getSettings();return"dismissed"!==(null==r||null===(t=r.space_analytics_settings_prompt)||void 0===t?void 0:t.status)&&"hidden"!==(null==r||null===(s=r.space_analytics_settings_prompt)||void 0===s?void 0:s.status)&&(M().OV(e),!0)}(p)),[p]),S=(0,o().O$)(ut().AppStoreCurrentSpaceStore),x=(0,o().K8)((()=>null==S?void 0:S.canAdmin()),[S]),b=(0,o().K8)((()=>function(e,t){var s,i;const{currentSpaceViewStore:n,currentSpaceStore:a,currentUserStore:r}=ut().default.state;if(null==r||!r.id)return!1;if(null==a||!a.isDefined())return!1;const o=null==n?void 0:n.getSettings();return!("dismissed"===(null==o||null===(s=o.passkey_settings_prompt)||void 0===s?void 0:s.status)||"hidden"===(null==o||null===(i=o.passkey_settings_prompt)||void 0===i?void 0:i.status)||!t.state.accountSettings.hasPassword||t.state.accountSettings.hasPasskeys||(M().mj(e),0))}(p,i)),[p,i]),y=(0,Ze().X)("passkey_nudges");if(h){const e=x?(0,oe.jsx)(f().sA,{id:"enterpriseSpaceAnalyticsSettingsPrompt.caption.workspaceOwner",defaultMessage:"Explore how members & guests are engaging with this workspace, common searches that are made, and content engagement metrics with workspace analytics."}):(0,oe.jsx)(f().sA,{id:"enterpriseSpaceAnalyticsSettingsPrompt.caption.member",defaultMessage:"See how your content is performing by reviewing metrics like number of views or unique visitors using workspace analytics."});return(0,oe.jsx)(El,{onDismiss:()=>M().Jm(p),onClick:()=>{_m((()=>{At().A.setState({...At().A.state,currentTab:"analytics",defaultSubtab:void 0}),r.reset(),v().Y7(p,{tab:"analytics"}),M().p$(p)}),p,t,s,i,n)},onView:e=>{"enterprise"===(null==S?void 0:S.getSubscriptionTier())&&M().p$(e)},onClickLearnMore:()=>{const e=(0,Ye().xS)("guides.workspaceAnalytics");C().f({environment:p,url:e})},descriptionMessage:e,title:(0,oe.jsx)(f().sA,{id:"enterpriseSpaceAnalyticsSettingsPrompt.title",defaultMessage:"New workspace analytics"}),buttonText:(0,oe.jsx)(f().sA,{id:"enterpriseSpaceAnalyticsSettingsPrompt.cta",defaultMessage:"View metrics"}),buttonAriaLabel:m.formatMessage({id:"enterpriseSpaceAnalyticsSettingsPrompt.cta",defaultMessage:"View metrics"}),icon:(0,u().J)((0,Kt().uF)(g))})}return y&&b?(0,oe.jsx)(El,{onClick:()=>{_m((()=>{At().A.setState({...At().A.state,open:!0,currentTab:"profile",defaultSubtab:void 0,highlightedSetting:At().r.Passkey}),v().Y7(p,{tab:"profile"})}),p,t,s,i,n)},onView:M().VW,onDismiss:()=>M().VI(p),onClickLearnMore:()=>{const e=(0,Ye().xS)("guides.passkeys");C().f({environment:p,url:e})},descriptionMessage:(0,oe.jsx)(f().sA,{id:"passkeySettingsPrompt.description",defaultMessage:"Set up a passkey for faster, safer log-ins."}),title:(0,oe.jsx)(f().sA,{id:"passkeySettingsPrompt.title",defaultMessage:"Enable passkeys for better protection"}),buttonText:(0,oe.jsx)(f().sA,{id:"passkeySettingsPrompt.button.label",defaultMessage:"Enable passkeys"}),buttonAriaLabel:m.formatMessage({id:"passkeySettingsPrompt.button.ariaLabel",defaultMessage:"Enable passkeys"}),icon:(0,c().g)((0,Kt().uF)(g))}):d}function Um(e){let{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d}=e;const c=(0,l().DP)(),u=(0,a().v3)(),h=u.device.isMobileNative,S=(0,qt().f_)({spaceId:t.id}),x=(0,o().K8)((()=>At().A.state.currentTab),[]),b=(0,p().et)(S),v=function(e,t){const s=(0,o().O$)(Zi().subscriptionDataStoreInstance),i=(0,qt()._3)({spaceId:t.id});return!(!s||!i||e||!((0,p().Fq)(i)||i.paymentMethod||s.hasPaidNonzero))}(b,t),j=(0,o().K8)((()=>t.canAdmin()),[t]),A=function(){const e=(0,a().v3)(),t=(0,as().r)(),s=(0,qt().f_)({spaceId:null==t?void 0:t.id});return(0,o().K8)((()=>{if(!t)return!1;const i=t.canAdmin(),n=(0,p().AI)(s);return(0,ss().Gy)(e)&&i&&(0,m().jR)(n)}),[s,e,t])}(),C=Boolean((0,p().KH)(S,"plan")),w=(0,tt().y)(),[T,M,k,I,D]=(0,o().K8)((()=>{const e=(0,Je().l)();return[e,e,e,e&&R().default.checkGate({gateName:"download_for_offline"}),e||R().default.checkGate({gateName:"design_previews_enabled"})]}),[]),_=(0,at().kg)(),P=(0,o().K8)((()=>{const e=mt().A.getData(u,{spaceId:t.id}),s=e&&(null==e?void 0:e.pointers.length)>0;return!u.device.isMobile&&((0,He().wA)({spaceStore:t})||s)}),[u,t]);(0,et().A)({shouldPreserveTextSelection:!0,shouldPreserveBlockSelection:!0,shouldRestoreSelection:!0});const B=(0,o().K8)((()=>(0,Qe().Ur)({environment:u,spaceStore:t})),[u,t]),U=(0,o().K8)((()=>(0,ss().xu)(u)),[u]),L=(0,Xe().J)(),O=(0,o().K8)((()=>t.isAiEnabledOnSpace()),[t]),q=(0,Ze().X)("notion_ai_workspace_settings")&&(L||O),W=dt(),E=(0,Ze().X)("public_pages_settings_tab"),z=(0,o().K8)((()=>(0,ct().y)(u)),[u]);return(0,oe.jsxs)("div",{style:hm,children:[(0,oe.jsx)(n().Y,{direction:"vertical",children:(0,oe.jsxs)("div",{role:"tablist","aria-orientation":"vertical",children:[(0,oe.jsx)("div",{style:km(c),children:(0,oe.jsx)(f().sA,{id:"spaceSettings.sidebar.personalSettingsSection.title",defaultMessage:"Account"})}),U?null:(0,oe.jsx)(Im,{}),(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"profile"}),(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"user_settings"}),(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"notifications"}),!z&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"connected_apps"}),U?null:(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"language_and_region"}),w&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"offline"}),(0,oe.jsx)(pi().A,{size:18,isHidden:!0}),(0,oe.jsx)("div",{style:km(c),children:(0,oe.jsx)(f().sA,{id:"spaceSettings.sidebar.workspaceSettingsSection.title",defaultMessage:"Workspace"})}),C||U||h?null:(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"plans"}),C||!v||U?null:(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"billing"}),(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"settings"}),A&&!U?(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"requests"}):null,!U&&!W&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"teams"}),(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"members"}),U&&!W?(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"teams"}):null,U&&!W?(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"security"}):null,U&&!W?(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"identity_provisioning"}):null,!u.device.isMobile&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"analytics"}),!u.device.isMobile&&U&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"admin_content_search"}),!u.device.isMobile&&U&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"audit_log"}),U?(0,oe.jsx)(pi().A,{size:16,dividerColor:c.stroke.secondary}):null,b&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"subscription"}),q&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"ai"}),B&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"verified_pages"}),!E&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"sites"}),E&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"public_pages"}),P&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"custom_emoji"}),!U&&!W&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"security"}),(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"identity_provisioning"})]}),!u.device.isMobile&&!U&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"admin_content_search"}),(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"integrations"}),!u.device.isMobile&&!z&&(0,oe.jsx)("span",{onClick:()=>{const e=g().JW();ft().A.setState({flowId:e}),y().kY(u,{from:"settings",flowId:e})},children:(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"imports"})}),!u.device.isMobile&&!U&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"audit_log"}),U&&!z?(0,oe.jsx)(pi().A,{size:16,dividerColor:c.stroke.secondary}):null,A&&U?(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"requests"}):null,v?(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"billing"}):null,!U&&!C||h?null:(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"plans"}),T&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(pi().A,{size:18,isHidden:!0}),(0,oe.jsx)("div",{style:km(c),children:(0,oe.jsx)(f().sA,{id:"spaceSettings.sidebar.developmentSettingsSection.title",defaultMessage:"Development"})}),M&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"experiments"}),_&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"performance_toolbar"}),k&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"user_similarity_scores"}),M&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"collection_debug"}),I&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"offline_mode_debug"})]}),D&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(pi().A,{size:18,isHidden:!0}),(0,oe.jsx)("div",{style:km(c),children:(0,oe.jsx)(f().sA,{id:"spaceSettings.sidebar.qaSettingsSection.title",defaultMessage:"QA"})}),D&&(0,oe.jsx)(Pm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,tab:"design_previews"})]})]})}),(0,oe.jsx)(Bm,{spaceStore:t,spaceBasicSettingsStore:s,spaceProfileSettingsStore:i,securitySettingsStore:r,spaceDomainSettingsStore:d,renderBelowPrompt:j?(0,oe.jsx)(Ft,{currentSettingsTab:x}):null})]})}function Lm(){const e=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",gap:6},icon:{width:22,height:22,fill:e.text.secondary}})),[]);return(0,oe.jsx)(Gt().Ay,{centerContent:!0,children:(0,oe.jsxs)("div",{style:e.container,children:[(0,d().C)(e.icon),(0,oe.jsx)(zg().g,{isSecondaryColor:!0})]})})}function Om(e){let{spaceStore:t,userStore:s,spaceBasicSettingsStore:i,spaceProfileSettingsStore:n,securitySettingsStore:a,samlSettingsStore:r,spaceDomainSettingsStore:l,onModalDismiss:d}=e;const{organizationOverrides:c}=(0,Gi().n)({spaceId:t.id}),u=(0,Ze().X)("settings_modal_close_button"),g=(0,o().K8)((()=>At().A.state.currentTab),[]),p=(0,qt()._3)({spaceId:t.id}),m=(0,tt().y)(),f=(0,o().K8)((()=>function(e,t,s,i,n,a,r,o,l,d){const c={profile:()=>(0,oe.jsx)(Rm,{spaceProfileSettingsStore:n,billingData:d}),notifications_and_settings:()=>(0,oe.jsx)(_l().A,{isMobile:!1,isMobileNative:!1,billingData:d}),user_settings:()=>(0,oe.jsx)(lm,{billingData:d}),notifications:()=>(0,oe.jsx)(Ol,{}),language_and_region:()=>(0,oe.jsx)(Il,{}),connected_apps:()=>(0,oe.jsx)(Zp().Ay,{location:"settings-page",spaceStore:t}),offline:()=>(0,oe.jsx)(st().x,{}),settings:()=>(0,oe.jsx)(qd().Ay,{spaceStore:t,billingData:d,spaceBasicSettingsStore:i,securitySettingsStore:a,organizationOverrides:l}),requests:()=>(0,oe.jsx)(Ji,{securitySettingsStore:a,spaceStore:t}),teams:()=>(0,oe.jsx)(Qp,{}),members:()=>(0,oe.jsx)(wm,{spaceStore:t}),analytics:()=>(0,oe.jsx)(Od,{spaceStore:t}),plans:()=>(0,oe.jsx)(rs().o3,{}),billing:()=>(0,oe.jsx)(Tm,{spaceStore:t}),subscription:()=>(0,oe.jsx)(Gt().Ay,{children:(0,oe.jsx)(Fg().L,{})}),security:()=>(0,oe.jsx)(Mi,{spaceStore:t,userStore:s,securitySettingsStore:a,organizationOverrides:l}),identity_provisioning:()=>(0,oe.jsx)(ul,{spaceStore:t,userStore:s,samlConfigStore:r,domainSettingsStore:o}),admin_content_search:()=>(0,oe.jsx)(Sn,{spaceStore:t,userStore:s}),integrations:()=>(0,oe.jsx)(kn,{spaceStore:t,userStore:s,organizationOverrides:l}),audit_log:()=>(0,oe.jsx)(Gt().Ay,{children:(0,oe.jsx)(Ue,{spaceStore:t})}),imports:()=>(0,oe.jsx)(Mm,{}),sites:()=>(0,oe.jsx)(Fe,{spaceStore:t}),public_pages:()=>(0,oe.jsx)(rt().fh,{spaceStore:t}),custom_emoji:()=>(0,oe.jsx)(Ee,{spaceStore:t}),verified_pages:()=>(0,oe.jsx)(tn,{spaceStore:t}),experiments:()=>(0,oe.jsx)(Gt().Ay,{children:(0,oe.jsx)(fm,{})}),performance_toolbar:()=>(0,oe.jsx)(Gt().Ay,{children:(0,oe.jsx)(at().dt,{})}),user_similarity_scores:()=>(0,oe.jsx)(Gt().Ay,{children:(0,oe.jsx)(pm,{store:t})}),collection_debug:()=>(0,oe.jsx)(Gt().Ay,{children:(0,oe.jsx)(qe,{})}),offline_mode_debug:()=>(0,oe.jsx)(Gt().Ay,{children:(0,oe.jsx)(nt,{})}),ai:()=>(0,oe.jsx)(Gt().Ay,{children:(0,oe.jsx)(xn().KZ,{spaceStore:t,billingData:d,securitySettingsStore:a})}),design_previews:()=>(0,oe.jsx)(Gt().Ay,{children:(0,oe.jsx)(Ge,{})})};let u=e;return ym(u,t)||(u=A().Yp(t),A().Ow({currentTab:u})),c[u]}(g,t,s,i,n,a,r,l,c,p)),[g,r,a,i,l,n,t,s,c,p]),h=(0,o().K8)((()=>!vm(g,m)),[g,m]);return(0,oe.jsx)(_n().A,{capture:!0,allowEsc:!0,render:e=>(0,oe.jsxs)(zl,{sidebar:(0,oe.jsx)(Um,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:n,securitySettingsStore:a,spaceDomainSettingsStore:l}),contentId:`settings-tabpanel-${g}`,contentLabelledBy:`settings-tab-${g}`,contentRole:"tabpanel",...e,children:[h?(0,oe.jsx)(Lm,{}):f(),u?(0,oe.jsx)(Rn().A,{onClick:d}):null]})})}const qm=i.memo(bm)},689216:(e,t,s)=>{s.d(t,{n:()=>o});var i=()=>s(534177),n=()=>s(901389),a=()=>s(898486),r=()=>s(972435);async function o(e){let{onRequest:t,onSuccess:s}=e;const o=await t();switch(o.type){case"success":s&&await s(o);break;case"failed":n().f1((0,a().Hu)(r().A.getIntl(),o));break;default:(0,i().HB)(o)}}},787766:(e,t,s)=>{s.d(t,{Hc:()=>d,Io:()=>u,Mg:()=>p,S3:()=>o,X3:()=>l,dE:()=>g,iO:()=>c,vC:()=>m,vG:()=>r});s(944114),s(898992),s(803949);var i=()=>s(401497),n=()=>s(381349),a=()=>s(284371);function r(e){const{focus:t}=e;return(0,i().IS)((e=>({searchBar:{padding:16},inputStyle:{minWidth:60,width:"auto",borderTopLeftRadius:4,borderTopRightRadius:4,fontSize:14,fontWeight:a().Wy.regular},inputOuterStyle:{padding:6,borderRadius:6,height:20,alignItems:"center",minHeight:32,background:e.palette.gray[30],...t&&{background:"none"}}})),[t])}function o(){return(0,i().IS)((e=>({selectAllSectionStyle:{display:"flex",flexDirection:"column",gap:2,padding:"8px 0px 16px 0px"},sectionMenuItem:{padding:"12px 0px 0px 2px",display:"flex",flexDirection:"column",gap:2},dividerStyle:{margin:"0px 16px"},dividerInnerStyle:{borderBottom:`1px solid ${e.stroke.secondary}`},selectAllStyle:{display:"flex",fontSize:14,color:e.text.primary},totalCountsStyle:{paddingLeft:3,fontSize:14,color:e.text.tertiary}})),[])}function l(){return(0,i().IS)((e=>({footerStyle:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:60,padding:"12px 16px 16px 16px",borderTop:`1px solid ${e.stroke.secondary}`}})),[])}function d(){return(0,i().IS)((e=>({labelContainer:{display:"flex",alignItems:"center",color:n().Ay.uiLightBlack,size:14,gap:6},importListButton:{height:28,borderRadius:4,border:void 0,width:"100%"},importListButtonContainer:{padding:"0 6px",alignItems:"center"}})),[])}function c(){return(0,i().IS)((e=>({topContainer:{display:"flex",alignItems:"center",width:"100%",height:40,padding:"0 16px",borderBottom:`1px solid ${e.stroke.secondary}`},sendInviteLabel:{color:e.text.primary,fontSize:14,fontWeight:a().Wy.medium,textAlign:"left",verticalAlign:"top"}})),[])}function u(e,t){return(0,i().IS)((s=>({buttonContainer:{padding:"0 8px",...t},button:{height:32,borderRadius:4,border:`1px solid ${s.stroke.primary}`,...e}})),[e,t])}function g(e){const{filteredImportedContacts:t,inviteTargetsStore:s}=e,i=s.state.inviteTargets.length;return 0!==i&&i===t.length}function p(e){const{filteredImportedContacts:t}=e,s={};return t.forEach(((e,t)=>{const i=e.value.email[0].toUpperCase(),n=/^[A-Za-z]$/.test(i)?i:"#";s[n]||(s[n]=[]),s[n].push(e)})),s}function m(e){const{canEditPermission:t,isMobile:s,hasAccessToFeature:i}=e;return!(s||i||!t)}},803557:(e,t,s)=>{s.d(t,{KG:()=>r,Xx:()=>a});var i=()=>s(645873);const n={SlackImportContactsButton:new(i().O2)("SlackImportContactsButton",(()=>s.e(55901).then(s.bind(s,659126)))),GoogleImportContactsButton:new(i().O2)("GoogleImportContactsButton",(()=>s.e(37398).then(s.bind(s,97509))))},a=(0,i()._h)(n.SlackImportContactsButton,(e=>e.default)),r=(0,i()._h)(n.GoogleImportContactsButton,(e=>e.GoogleImportContactsButton))},804800:(e,t,s)=>{s.d(t,{L:()=>n});class i extends(()=>s(757695))().Store{getInitialState(){return{open:!1,type:void 0}}}const n=new i},818044:(e,t,s)=>{s.d(t,{k:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("logout",{viewBox:"0 0 30 30",svg:(0,i.jsx)("path",{d:"M17,24l9-9l-9-9l-1.406,1.406L22.188,14H8v2h14.188l-6.594,6.594L17,24z M6,4h16V2H4v26h18v-2H6V4z"})})},850369:(e,t,s)=>{s.d(t,{A:()=>m});s(581454),s(296540);var i=()=>s(401497),n=()=>s(950705),a=()=>s(959013),r=()=>s(209199),o=()=>s(901389),l=()=>s(700250),d=()=>s(760217),c=()=>s(406699),u=()=>s(939740),g=()=>s(824160),p=s(474848);const m=function(e){let{currentLocale:t,pickerLabel:d,confirm:m,onChange:h,origin:S,showGlobeIcon:x}=e;const b=(0,i().DP)(),y=(0,s(484714).v3)(),v=(0,a().tz)(),j=(0,s(56366).uB)(void 0,s(463830).A),{device:A}=y,C="ja-JP"===t,w=(0,s(963589).X)("polyglot");if(A.isMobile)return null;const T=d||(0,n().V)(v)[t].languageNameInThatLanguage;return(0,p.jsx)(c().Ay,{onClick:()=>{s(278768).Kn(y,{origin:S})},popupType:c().z7.Popup,buttonPopupStore:j,renderOrigin:e=>(0,p.jsxs)(s(493823).p,{"aria-label":v.formatMessage({id:"languagePicker.ariaLabel",defaultMessage:"Language: {language}"},{language:T}),style:{marginLeft:-8,paddingLeft:8,paddingRight:8,display:"flex",alignItems:"center",...x&&{color:b.icon.secondary}},...e,children:[x&&(0,s(328347).h)({width:16,height:16,fill:b.icon.secondary,marginRight:4}),T,(0,r().Hx)(t)&&!C&&(0,p.jsx)(g().A,{desktopStyle:{marginLeft:4},children:(0,p.jsx)(a().sA,{id:"languagePicker.betaBadge",defaultMessage:"Beta"})}),(0,s(668725).b)({width:10,marginLeft:4,fill:x?b.icon.secondary:b.icon.tertiary})]}),placementToOrigin:l().UV.Bottom,alignmentToOrigin:l().MY.Start,render:e=>{let i;i=w?[...r().fy,...r().Tf]:[...r().fy];const l=[{key:"languages",render:e=>(0,p.jsx)(s(89924).A,{...e,topBorder:0!==e.index}),items:i.map((s=>{const i={key:s,render:e=>function(e,t,s,i){const a=(0,n().V)(i)[e],{languageNameInThatLanguage:r,languageNameInCurrentLanguage:o}=a;return(0,p.jsx)(f,{label:r,caption:o,focused:t,props:s,locale:e})}(s,e.focused,e,v),action:()=>{!function(e,t,s,i,r){t!==e&&function(e,t,s,i){const{languageNameInThatLanguage:r}=(0,n().V)(t)[e];if(s){const t=()=>{i(e)};o().ui({showCancel:!0,keepFocus:!1,message:(0,p.jsx)(a().sA,{id:"languagePicker.changeLanguage.confirmationMessage",defaultMessage:"Are you sure you want to update the language to {language}?",values:{language:r}}),items:[{label:(0,p.jsx)(a().sA,{id:"languagePicker.changeLanguage.updateButton.label",defaultMessage:"Update"}),color:"red",onAccept:t}]})}else i(e)}(e,s,i,r)}(s,t,v,m,h),e.close()}};return i}))}],d={menuType:s(722872).gu.Popup,width:240};return(0,p.jsx)(s(928600).A,{className:s(38337).jtA,...d,children:(0,p.jsx)(u().Ay,{type:u().Oh.Vertical,initialFocus:void 0,sections:l})})}})};function f(e){const{locale:t}=e,s=(0,i().DP)(),n="ja-JP"===t;return(0,p.jsx)(d().A,{...e.props,title:(0,p.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,p.jsx)("div",{style:{...e.style,marginRight:0},children:e.label})}),caption:e.caption&&(0,p.jsx)("span",{style:{color:s.text.secondary},children:e.caption}),shouldWrapCaption:!0,right:(0,r().Hx)(e.locale)&&!n&&(0,p.jsx)(g().A,{children:(0,p.jsx)(a().sA,{id:"languagePicker.betaBadge",defaultMessage:"Beta"})})})}},868146:(e,t,s)=>{s.d(t,{u:()=>i});const i=(0,s(340498).xh)("checkmarkShieldFill",{default:{loader:()=>s.e(93213).then(s.bind(s,193213))},small:{loader:()=>s.e(50335).then(s.bind(s,850335))},mini:{loader:()=>s.e(43249).then(s.bind(s,243249))},large:{loader:()=>s.e(56823).then(s.bind(s,956823))}})},885067:(e,t,s)=>{s.d(t,{y:()=>r});s(296540);var i=()=>s(946548),n=()=>s(125565),a=s(474848);function r(e){let{title:t,description:s,disabled:r=!1,selected:o,onChange:l=(()=>{})}=e;return(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>!r&&l(!o),children:[(0,a.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[t,s&&(0,a.jsx)(n().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:s})]}),(0,a.jsx)("div",{style:{marginTop:5},children:(0,a.jsx)(i().A,{on:o,disabled:r})})]})}},887080:(e,t,s)=>{s.d(t,{A:()=>g});s(296540);var i=()=>s(56366),n=()=>s(401497),a=()=>s(959013),r=()=>s(645873);const o=new(r().O2)("DisconnectContactModal",(async()=>{const{DisconnectContactModal:e}=await s.e(6178).then(s.bind(s,538049));return{DisconnectContactModal:e}})),l=(0,r()._h)(o,(e=>e.DisconnectContactModal));var d=()=>s(939740),c=()=>s(89924),u=s(474848);const g=function(e){const{importListItems:t}=e,r=(0,i().uB)(void 0,s(970585).A),o=(0,i().K8)((()=>s(804800).L.getState().open),[]),g=(0,n().IS)((e=>({InviteDropdownMenu:{background:e.cardContentBackground,width:265,borderRadius:8},helpIcon:{width:14,height:14,fill:e.icon.secondary},helpSection:{color:e.text.secondary,fontSize:12,padding:"0 8px",width:"100%"}})),[]),p={key:"all_import_sections",render:e=>(0,u.jsx)(c().A,{...e,title:(0,u.jsx)(a().sA,{id:"spacePermissionsSettings.inviteLinkRefreshModal.inviteDropdownMenu.title",defaultMessage:"Import from"})}),items:t},m={key:"help_section",render:e=>(0,u.jsx)(c().A,{...e,topBorder:!0}),items:[{key:"help_section",render:e=>f,action:()=>{}}]},f=(0,u.jsx)(s(187485).A,{style:{display:"flex",padding:"0 4px"},className:"notion-print-ignore",href:(0,s(836251).xS)("guides.publicAPI"),external:!0,children:(0,u.jsx)(s(493823).p,{iconLeading:s(133033).$,iconStyle:g.helpIcon,style:g.helpSection,children:(0,u.jsx)(a().sA,{id:"spacePermissionsSettings.inviteLinkRefreshModal.inviteDropdownMenu.learnMore",defaultMessage:"Learn more"})})});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(s(928600).A,{menuType:s(722872).gu.Popup,children:(0,u.jsx)(d().Ay,{type:d().Oh.Vertical,store:r,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,sections:[p,m],style:g.InviteDropdownMenu})}),o&&(0,u.jsx)(l,{open:o})]})}},889154:(e,t,s)=>{s.d(t,{G:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("personBadgeExclamationMark",{viewBox:"0 0 24 22",svg:(0,i.jsx)("path",{d:"M14 20.91c1.36 0 2.64-.26 3.838-.781a10.166 10.166 0 003.183-2.158 10.198 10.198 0 002.159-3.174 9.59 9.59 0 00.78-3.848c0-1.36-.263-2.64-.79-3.838a10.165 10.165 0 00-2.158-3.183 10.165 10.165 0 00-3.184-2.158A9.52 9.52 0 0013.99.988c-1.27 0-2.47.228-3.603.684A10.24 10.24 0 007.34 3.566 10.179 10.179 0 005.152 6.39a9.75 9.75 0 00-1.045 3.466c.235-.045.508-.074.82-.087.32-.02.61-.013.87.02.137-1.01.44-1.948.908-2.813A8.088 8.088 0 018.512 4.7a8.261 8.261 0 012.5-1.504 8.095 8.095 0 012.978-.547c1.153 0 2.23.215 3.233.645a8.233 8.233 0 012.646 1.777 8.365 8.365 0 011.787 2.647 8.11 8.11 0 01.645 3.232 8.15 8.15 0 01-2.139 5.557c-.319-.378-.775-.736-1.367-1.074-.593-.345-1.296-.625-2.11-.84-.813-.215-1.712-.322-2.695-.322-.469 0-.918.029-1.347.087-.43.053-.837.124-1.221.215.117.469.176.96.176 1.475 0 .762-.134 1.488-.4 2.178a6.308 6.308 0 01-1.095 1.865c.6.26 1.228.462 1.885.605A9.426 9.426 0 0014 20.91zm-.01-8.3a3.02 3.02 0 001.69-.47 3.53 3.53 0 001.21-1.318c.3-.56.45-1.191.45-1.894 0-.658-.15-1.26-.45-1.807a3.55 3.55 0 00-1.21-1.309 3.035 3.035 0 00-1.69-.488c-.625 0-1.191.163-1.699.489a3.622 3.622 0 00-1.65 3.115c0 .696.15 1.321.449 1.875.3.553.7.993 1.201 1.318a3.194 3.194 0 001.7.488zM5.3 21.017c.67 0 1.305-.13 1.904-.391a5.082 5.082 0 001.582-1.074A5 5 0 009.87 17.97c.26-.6.39-1.237.39-1.914 0-.684-.13-1.325-.39-1.924a4.945 4.945 0 00-1.064-1.582 4.946 4.946 0 00-1.582-1.065 4.772 4.772 0 00-1.924-.39c-.677 0-1.315.13-1.914.39a4.87 4.87 0 00-1.582 1.074A5.082 5.082 0 00.73 14.142a4.707 4.707 0 00-.391 1.914c0 .683.13 1.325.39 1.924a5.07 5.07 0 001.075 1.581c.455.456.983.811 1.582 1.065.599.26 1.237.39 1.914.39zm-.01-1.797a.788.788 0 01-.576-.244.768.768 0 01-.244-.577c0-.227.081-.423.244-.585a.788.788 0 01.576-.245c.234 0 .43.085.586.254a.788.788 0 01.244.576.77.77 0 01-.244.577.8.8 0 01-.586.244zm.01-2.325a.601.601 0 01-.43-.156.613.613 0 01-.166-.41l-.078-2.793a.63.63 0 01.176-.488.673.673 0 01.498-.186.66.66 0 01.488.186.63.63 0 01.176.488l-.078 2.793a.592.592 0 01-.176.41.554.554 0 01-.41.157z"})})},898615:(e,t,s)=>{s.d(t,{F:()=>a});s(296540);var i=s(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 3.13 15.26 14.86",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M9.533 5.813a.625.625 0 0 1 .884 0l2.5 2.5a.625.625 0 1 1-.884.884l-1.408-1.408v3.966a.625.625 0 1 1-1.25 0V7.739L7.917 9.197a.625.625 0 0 1-.884-.884z"}),(0,i.jsx)("path",{d:"M15.5 3.13c1.174 0 2.125.951 2.125 2.125v7.5A2.125 2.125 0 0 1 15.5 14.88h-4.935l-3.871 2.978a.625.625 0 0 1-1.006-.496V14.88H4.5a2.125 2.125 0 0 1-2.125-2.125v-7.5c0-1.174.951-2.125 2.125-2.125zm.875 2.125a.875.875 0 0 0-.875-.875h-11a.875.875 0 0 0-.875.875v7.5c0 .483.392.875.875.875h1.813c.345 0 .625.28.625.625v1.838l3.033-2.334a.63.63 0 0 1 .381-.13H15.5a.875.875 0 0 0 .875-.874z"})]})},a=(0,s(340498).wt)("commentArrowUp",n)},926110:(e,t,s)=>{s.d(t,{ei:()=>j,s:()=>y,gO:()=>v,jw:()=>T,Ox:()=>w});s(296540);var i=()=>s(484714),n=()=>s(401497),a=()=>s(148307),r=()=>s(122555),o=()=>s(449552),l=()=>s(234748),d=s(474848);const c=(0,s(340498).wt)("typesPersonOutline",{viewBox:"0 0 20 20",svg:(0,d.jsx)("g",{children:(0,d.jsx)("path",{d:"M9.303 16.45q-1.743 0-1.743-1.177 0-.696.417-1.463.423-.765 1.21-1.428.793-.663 1.9-1.073 1.107-.417 2.481-.417 1.375 0 2.482.417 1.114.409 1.9 1.073t1.203 1.428q.424.767.424 1.463 0 1.176-1.75 1.176H9.303Zm-.226-1.183h8.976q.123 0 .17-.041.055-.042.055-.137 0-.396-.307-.902-.307-.513-.916-.992-.602-.485-1.484-.8-.874-.32-2.003-.32-1.134 0-2.01.32-.874.315-1.476.8-.601.48-.916.992-.308.506-.308.902 0 .096.048.137.056.04.171.04Zm4.491-5.175a2.73 2.73 0 0 1-1.503-.438 3.2 3.2 0 0 1-1.08-1.169 3.34 3.34 0 0 1-.404-1.627 3.2 3.2 0 0 1 .403-1.592 3.2 3.2 0 0 1 1.08-1.156q.684-.43 1.504-.43.834 0 1.511.424.684.423 1.08 1.141a3.2 3.2 0 0 1 .404 1.6q0 .895-.404 1.634a3.2 3.2 0 0 1-1.087 1.175 2.7 2.7 0 0 1-1.504.438m0-1.19q.486 0 .882-.273t.636-.738q.24-.472.24-1.046 0-.56-.24-1.012a1.9 1.9 0 0 0-.636-.71 1.58 1.58 0 0 0-.882-.26 1.5 1.5 0 0 0-.868.266 1.9 1.9 0 0 0-.635.718q-.24.45-.24 1.011 0 .575.24 1.04.238.464.635.738.405.266.868.266M1.886 16.45q-.732 0-1.1-.307-.37-.308-.37-.923 0-.848.403-1.627.411-.787 1.128-1.395a5.5 5.5 0 0 1 1.668-.957 5.8 5.8 0 0 1 2.03-.355q.534 0 1.06.095.526.089 1.019.274.498.184.936.451a3.2 3.2 0 0 0-.882.861 3.3 3.3 0 0 0-.65-.28 5 5 0 0 0-.724-.178A4.6 4.6 0 0 0 4.1 12.3a4.5 4.5 0 0 0-1.285.691q-.553.43-.875.985-.314.546-.314 1.134 0 .096.041.137.048.04.15.041h4.806q-.035.342.13.67.164.335.444.492zm3.766-6.282q-.717 0-1.312-.383a2.84 2.84 0 0 1-.944-1.025 3 3 0 0 1-.348-1.436A2.83 2.83 0 0 1 4.34 4.917a2.38 2.38 0 0 1 1.312-.383q.718 0 1.306.376.594.376.943 1.005.356.63.356 1.401 0 .78-.356 1.436a2.8 2.8 0 0 1-.943 1.032 2.34 2.34 0 0 1-1.306.383Zm0-1.169q.39 0 .718-.226.328-.225.526-.601a1.8 1.8 0 0 0 .199-.855 1.7 1.7 0 0 0-.199-.82q-.19-.37-.519-.581a1.3 1.3 0 0 0-.725-.212q-.396 0-.724.219a1.6 1.6 0 0 0-.52.58q-.19.37-.191.821 0 .465.191.848.198.383.527.608.328.219.717.219"})})});var u=()=>s(734459),g=()=>s(713996),p=()=>s(959013),m=()=>s(534177),f=()=>s(435009),h=()=>s(2220),S=()=>s(554509),x=()=>s(204063),b=()=>s(188409);function y(e){let{organizationOnboardingInfo:t}=e;const s=(0,i().v3)(),n=w(),o=(0,p().tz)();if(!t||"ineligible"===t.onboardingStatus)return null;const{buttonLabel:l,onClick:c}=v({environment:s,organizationOnboardingInfo:t});return(0,d.jsxs)("div",{style:n.bannerContainer,children:[(0,d.jsxs)("div",{style:n.title,children:[(0,d.jsx)("img",{src:a().A.images.onboarding.planTypeForWorkSplitIntentDarkmodePng,style:{height:77,width:77},alt:"Organization onboarding icon"}),(0,d.jsx)(S().D,{styleName:"UITitle-22px/Semibold",children:o.formatMessage(T.title)}),(0,d.jsx)(S().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:o.formatMessage(T.byline)})]}),(0,d.jsx)(j,{}),(0,d.jsxs)(x().A,{size:"lg",style:n.button,onClick:c,children:[l,(0,r().p)(n.iconArrow)]})]})}function v(e){let{environment:t,organizationOnboardingInfo:s}=e;switch(s.onboardingStatus){case"not_started":return{buttonLabel:(0,d.jsx)(p().sA,{id:"workspaceSettingsModal.organizationsBanner.startSetUpButton",defaultMessage:"Set up organization"}),onClick:()=>{(0,h().u)({environment:t,event:{eventName:"org_console_onboarding_navigate",eventProperties:{spaceId:s.spaceId,route:g()._P.name,from:"settings-modal-banner"}}}),f().oo({environment:t,openInNew:"tab",makeTabActive:!0,url:(0,u().re)({organizationId:u().Zf,tabRoute:g()._P,queryParams:{[b().ge]:s.spaceId}})})}};case"domain_verified":return{buttonLabel:(0,d.jsx)(p().sA,{id:"workspaceSettingsModal.organizationsBanner.finishSetUpButton",defaultMessage:"Finish set up"}),onClick:()=>{(0,h().u)({environment:t,event:{eventName:"org_console_onboarding_navigate",eventProperties:{organizationId:s.organizationId,route:g()._P.name,from:"settings-modal-banner"}}}),f().oo({environment:t,openInNew:"tab",makeTabActive:!0,url:(0,u().re)({organizationId:s.organizationId,tabRoute:g()._P})})}};case"completed":return{buttonLabel:(0,d.jsx)(p().sA,{id:"workspaceSettingsModal.organizationsBanner.orgSettingsButton",defaultMessage:"Go to organization console"}),onClick:()=>{f().oo({environment:t,openInNew:"tab",makeTabActive:!0,url:(0,u().re)({organizationId:s.organizationId,tabRoute:g().Vo})})}};default:(0,m().HB)(s)}}function j(){const e=w();return(0,d.jsxs)("div",{style:e.features,children:[(0,d.jsx)(C,{icon:o().g,description:(0,d.jsx)(p().sA,{id:"workspaceSettingsModal.organizationsBanner.owner.item.organizationOwnerRole",defaultMessage:"<blue>A new organization owner role</blue> manages all workspace settings and owner permissions.",values:{blue:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,d.jsx)(A,{chunks:t})}}})}),(0,d.jsx)(C,{icon:l().I,description:(0,d.jsx)(p().sA,{id:"workspaceSettingsModal.organizationsBanner.owner.item.organizationWideVisibility",defaultMessage:"<blue>Organization-wide visibility</blue> of people, sharing and security settings, and audit logs all in one place.",values:{blue:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,d.jsx)(A,{chunks:t})}}})}),(0,d.jsx)(C,{icon:c,description:(0,d.jsx)(p().sA,{id:"workspaceSettingsModal.organizationsBanner.owner.item.simplifiedSettingsManagement",defaultMessage:"<blue>Simplified settings management</blue> across organization, workspace, and teamspace levels.",values:{blue:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,d.jsx)(A,{chunks:t})}}})})]})}function A(e){return(0,d.jsx)(S().D,{styleName:"UIRegular-14px/Medium",colorName:"uiBluePrimary",as:"span",children:e.chunks})}function C(e){const t=(0,n().IS)((e=>({container:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexDirection:"row",gap:8},icon:{fill:e.icon.uiBluePrimary,height:16,width:16}})),[]);return(0,d.jsxs)("div",{style:t.container,children:[e.icon(t.icon),(0,d.jsx)(S().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:e.description})]})}function w(){return(0,n().IS)((e=>({bannerContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",gap:20,padding:24,borderRadius:12,marginBlock:12,background:"dark"===e.mode?e.cardBackground:"#F0F6FD"},title:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",gap:6,width:"100%"},features:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",gap:10,width:"100%"},icon:{height:16,width:16,fill:e.icon.secondary},button:{display:"flex",alignItems:"center",justifyContent:"center",gap:4},iconArrow:{height:14,width:14,fill:"currentColor",transform:"rotate(90deg)",marginTop:4}})),[])}const T=(0,p().YK)({title:{id:"organization.onboarding.modal.title",defaultMessage:"Get more from your Enterprise plan"},titleLimited:{id:"organization.onboarding.modal.title.limited",defaultMessage:"Get more from your Enterprise Limited plan"},byline:{id:"organization.onboarding.modal.byline",defaultMessage:"Get a birds-eye view of members, guests, and security settings across all your workspaces."}})},931956:(e,t,s)=>{s.d(t,{X:()=>l});var i=()=>s(56366),n=()=>s(534177),a=()=>s(10984),r=()=>s(211825),o=()=>s(43450);function l(e){const t=(0,o().R)(e),s=(0,r().G)(e);return(0,i().K8)((()=>{if(!(0,a().El)())return!1;const i=e.getSetting("invite_access");switch(i){case void 0:return!1;case"team_members":return s;case"team_owners":return t;default:(0,n().HB)(i)}}),[e,t,s])}},980427:(e,t,s)=>{s.d(t,{V:()=>a});var i=()=>s(2220),n=()=>s(217429);function a(e,t){(0,i().u)({environment:e,event:{eventName:"open_import_contacts_dropdown",eventProperties:{source:t.source}}}),n().default.logEvent("open_import_contacts_dropdown",void 0,{metadata:t})}}}]);