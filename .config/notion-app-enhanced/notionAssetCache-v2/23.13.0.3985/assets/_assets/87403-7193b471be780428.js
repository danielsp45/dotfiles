"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[87403],{184966:(e,t,n)=>{n.d(t,{H2:()=>S,Nm:()=>j,TM:()=>b,tt:()=>C});n(944114),n(809678),n(898992),n(581454),n(737550);var o=()=>n(134025),i=()=>n(142748),r=()=>n(433847),s=()=>n(68263),l=()=>n(798880),a=()=>n(116225),d=()=>n(896628),c=()=>n(722101),u=()=>n(44729),p=()=>n(246826),m=()=>n(751156),f=()=>n(2220),h=()=>n(186445),g=()=>n(765957),y=()=>n(630116),v=()=>n(659915),x=()=>n(747444);function b(e){const{environment:t,collectionStore:n,publishingEnabled:o,transaction:i}=e;m().createAndCommitOrAppend({environment:t,perform:e=>{d().zA({stores:[n],update:{publishing_enabled:o},transaction:e})},userAction:"Posts.setPublishingEnabled",canUndo:!0,transaction:i})}function S(e){const{environment:t,collectionStore:n,followingEnabled:o,transaction:i}=e;m().createAndCommitOrAppend({environment:t,perform:e=>{d().zA({stores:[n],update:{following_enabled:o},transaction:e})},userAction:"Posts.setFollowingEnabled",canUndo:!0,transaction:i})}function C(e){const{environment:t,draftPostStore:n,onSubmitPost:s,from:c}=e,p=t.currentUser.id;n&&p&&(n.isPublishedDraft()||(!function(e){const{environment:t,postStore:n}=e;m().createAndCommit({environment:t,perform:e=>(n.getContentStores().toReversed().some((t=>{if(!(0,v().o)(t))return!0;u().zz({childStore:t,parentStore:n,transaction:e})})),n),userAction:"PostChannel.trimPostDraft",canUndo:!1})}({environment:t,postStore:n}),function(e){const{environment:t,draftPostStore:n,userId:s}=e;if(!n.isDefined()||n.isPublishedDraft())return;const a=(0,i().Yn)(n.getParentPointer(),n.getRecordModel),c=(0,r().wD)(a).map((e=>({...e,role:A(e.role,"comment_only")})));c.push({type:"restricted_permission"}),c.push({type:"user_permission",user_id:s,role:"editor"}),m().createAndCommit({environment:t,perform:e=>(m().applyOperation({store:n,operation:o().op.update({pointer:n.pointer,path:[],args:{alive:!0,created_by_id:s,created_by_table:l().oo,created_time:Date.now(),last_edited_time:Date.now()}}),transaction:e}),m().applyOperation({store:n,operation:o().op.set({pointer:n.pointer,path:["permissions"],args:c}),transaction:e}),d().zA({stores:[n],update:{draft_status:"published"},transaction:e}),n),userAction:"PostChannel.publishDraft",canUndo:!1}).performResult}({environment:t,draftPostStore:n,userId:p}),null==s||s(),x().A.setState({isOpen:!1}),(0,f().u)({environment:t,event:{eventName:"post_created",eventProperties:{block_id:n.id,parent_collection_id:n.getParentId(),from:c}}}),a().u4({name:"post_created"})))}function A(e,t){if(!e)return e;const n="string"==typeof e&&e in s().TE?s().TE[e]:void 0;if(!n)return e;return n>s().TE[t]?t:e}function j(e){var t,n;const{environment:o,collectionStore:i}=e,r=null===(t=(0,h()._m)(o))||void 0===t?void 0:t.id,s=null===(n=g().default.state.currentSpaceStore)||void 0===n?void 0:n.id;if(!r||!s||!i)return;return m().createAndCommit({environment:o,perform:e=>{null!=i&&i.isPublishingEnabled()||b({environment:o,collectionStore:i,publishingEnabled:!0,transaction:e});const t=p().Wv({environment:o,transaction:e,type:"page",inMemoryRecordCache:o.defaultRecordCache.inMemoryRecordCache});u().X$({childStore:t,parentStore:i,transaction:e});const n=p().Wv({environment:o,transaction:e,type:"text",inMemoryRecordCache:o.defaultRecordCache.inMemoryRecordCache}),r=y().Bv.createChildStore(t,n.pointer);return p().zv({store:r,transaction:e,data:{alive:!0,parent_id:t.id,parent_table:t.table}}),c().BC({parentStore:t.getContentStore(),appendStore:r,transaction:e}),t},userAction:"PostChannel.createEmptyPostStore",canUndo:!1}).performResult}},265665:(e,t,n)=>{n.d(t,{j:()=>c});var o=n(296540),i=()=>n(484714),r=()=>n(401497),s=()=>n(284371),l=()=>n(859428);var a=()=>n(962730),d=n(474848);function c(e){let{children:t,style:n,tooltipStyle:c,placement:u=a().W.Bottom}=e;const{isSafari:p}=(0,i().Y0)(),m=(0,o.useRef)(null),f=function(e){const[t,n]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{const{current:t}=e;if(!t)return void n(!1);const o="ResizeObserver"in window?new ResizeObserver((e=>{let[t]=e;n(t.target.scrollWidth>t.target.clientWidth)})):void 0;return null==o||o.observe(t),()=>null==o?void 0:o.unobserve(t)}),[]),t}(m),h=(0,r().IS)((()=>({overflowText:{...s().RC,...n}})),[n]);return(0,d.jsx)(l().A,{delayThreshold:500,placement:u,textWrap:!0,style:c,forceVisibleState:!(p||!f)&&void 0,renderTooltip:()=>f?t:void 0,render:e=>(0,d.jsx)("div",{ref:m,style:h.overflowText,...e,children:t})})}},484595:(e,t,n)=>{n.d(t,{A:()=>l,p:()=>r});var o=n(296540),i=n(474848);const r=8;function s(e,t){let{isSelected:o}=e;const{radioButtonStyle:s,dotStyle:l}=(0,n(401497).IS)((e=>({radioButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,borderRadius:16,marginRight:r,background:o?e.blueColor:e.whiteButtonBackground,border:o?"none":`1px solid ${e.radioButtonBorder}`,transition:"background 100ms ease-out"},dotStyle:{width:6,height:6,borderRadius:6,background:e.text.contrastPrimary,transition:"opacity 100ms ease-out",opacity:o?1:0}})),[o]);return(0,i.jsx)("div",{ref:t,style:s,children:(0,i.jsx)("div",{style:l})})}const l=o.forwardRef(s)},522500:(e,t,n)=>{n.d(t,{q:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("megaphone",{viewBox:"0 0 64 64",svg:(0,o.jsx)("path",{d:"m54,10v40h-4l-20-10h-4l4,16h-10l-4-16c-4.94,0-8-3.06-8-8v-4c0-4.94,3.06-8,8-8h14l20-10h4Z"})})},659915:(e,t,n)=>{n.d(t,{o:()=>i,s:()=>r});n(898992),n(430670);var o=()=>n(919709);function i(e){return!e.isTransclusionType()&&!e.isCollectionView()&&!e.hasContent()&&e.isEmptyTitle()}function r(e){const t=(0,o().tyK)(e.getTitleValue()),n=e.getContentStores().flatMap((e=>(0,o().tyK)(e.getTitleValue())));return t.length>0||n&&n.length>0}},661945:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{isOpen:!1}}}const i=new o},732800:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(296540),i=()=>n(959013),r=n(474848);function s(e){const t=(0,n(56366).K8)((()=>{const t=e.postStore?(0,n(108944).Uo)(e.postStore):void 0;return t?null==t?void 0:t.getRawMembership().length:0}),[e.postStore]);return(0,r.jsx)(n(676007).a,{open:e.isOpen,onDismiss:e.onDismiss,render:()=>(0,r.jsx)(n(887480).Ay,{icon:n(522500).q,title:(0,r.jsx)(i().sA,{id:"posts.confirmMentionEveryoneModal.title",defaultMessage:"Notify {sizeOfTeam} people?",values:{sizeOfTeam:t}}),subtitle:(0,r.jsx)(i().sA,{id:"posts.confirmMentionEveryoneModal.subtitle",defaultMessage:"Using @everyone notifies everyone in the teamspace. Are you sure you want to send this?"}),confirmText:(0,r.jsx)(i().sA,{id:"posts.confirmMentionEveryoneModal.confirmText",defaultMessage:"Send"}),cancelText:(0,r.jsx)(i().sA,{id:"posts.confirmMentionEveryoneModal.cancelText",defaultMessage:"Edit message"}),confirmTextStyle:"red",radioOptions:[],onDismiss:e.onDismiss,onConfirm:e.onConfirm})})}const l=o.memo(s)},747444:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{isOpen:!1,blockStore:void 0}}}const i=new o},809678:(e,t,n)=>{var o=n(746518),i=n(437628),r=n(225397),s=n(206469),l=Array;o({target:"Array",proto:!0},{toReversed:function(){return i(r(this),l)}}),s("toReversed")},853306:(e,t,n)=>{n.d(t,{A:()=>C});n(581454);var o=n(296540),i=()=>n(662303),r=()=>n(56366),s=()=>n(401497),l=()=>n(66913),a=()=>n(284371),d=()=>n(115512),c=()=>n(141333),u=()=>n(265665),p=()=>n(484595),m=()=>n(704152),f=()=>n(864943),h=()=>n(204063),g=()=>n(125565),y=n(474848);const v=20;function x(e){var t;let{icon:l,iconStyle:u,title:p,subtitle:m,confirmText:x,confirmTextStyle:C="blue",confirmTextPerRadioOption:A,cancelText:j,hideCancelButton:R=!1,radioOptions:w,defaultSelectedRadioOption:T,onDismiss:k,onSelectRadio:B,onConfirm:M,width:P,footer:_}=e;const D=(0,n(484714).v3)(),[I,z]=(0,o.useState)(T??(null===(t=w[0])||void 0===t?void 0:t.key)),E=(0,r().uB)(void 0,n(17090).A),O=(0,r().K8)((()=>null==E?void 0:E.state.elementRef),[E]),W=(0,c().CR)(O),U=(0,c().yE)(O),H=(0,c().o7)(O),$=U>0,V=Math.ceil(U+H)<Math.floor(W),F=(0,o.useCallback)((e=>{e!==I&&(z(e),null==B||B(e))}),[B,I]),K=(0,o.useCallback)((()=>{M(I)}),[M,I]),L=(0,s().IS)((e=>{const t={marginLeft:-20,marginRight:-20,height:1,borderTop:`1px solid ${e.regularDividerColor}`,transition:"opacity 200ms"};return{container:{display:"flex",position:"relative",flexDirection:"column",justifyContent:"center",overflow:"hidden",width:`min(${P??400}px, calc(100vw - 40px))`,maxHeight:"80vh",padding:v,borderRadius:6,alignItems:"stretch"},icon:{width:36,height:36,fill:e.icon.secondary,marginBottom:6,...u},iconContainer:{width:"100%",display:"flex",justifyContent:"center"},title:{fontFamily:a().vc(i().locale).sans,fontSize:17,lineHeight:"22px",fontWeight:a().Wy.medium,textAlign:"center",marginBottom:14},subtitle:{fontFamily:a().vc(i().locale).sans,fontSize:(0,d().ny)(D,"UIRegular"),lineHeight:(0,d().ks)(D,"UIRegular"),fontWeight:a().Wy.regular,marginTop:6,marginBottom:6,textAlign:"center"},radioContainer:{display:"flex",flexDirection:"column",gap:8},topDivider:{...t,opacity:$?1:0},bottomDivider:{...t,opacity:V?1:0},scroller:{marginLeft:-20,marginRight:-20,paddingLeft:v,paddingRight:v},actionButtonsContainer:{display:"flex",flexDirection:"column",marginTop:20},cancelButton:{marginTop:8,justifyContent:"center"},dismissButton:{position:"absolute",top:10,right:10,zIndex:1}}}),[D,u,V,$,P]),G=(null==A?void 0:A[I])??x;return(0,y.jsxs)("div",{style:L.container,children:[(0,y.jsx)("div",{style:L.dismissButton,children:(0,y.jsx)(b,{onClick:k})}),l&&(0,y.jsx)("div",{style:L.iconContainer,children:l(L.icon)}),(0,y.jsx)(g().A,{isMultiline:!0,style:L.title,children:p}),m&&(0,y.jsx)(g().A,{isSmall:!0,style:L.subtitle,isMultiline:!0,children:m}),w.length>0&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{style:L.topDivider}),(0,y.jsx)(n(2143).H,{type:n(756279).A.Y,style:L.scroller,store:E,children:(0,y.jsx)("div",{style:L.radioContainer,children:w.map((e=>(0,y.jsx)(S,{radioItem:e,isSelected:e.key===I,onSelectRadio:F,left:e.left},e.key)))})}),(0,y.jsx)("div",{style:L.bottomDivider})]}),(0,y.jsxs)("div",{style:L.actionButtonsContainer,children:["blue"===C?(0,y.jsx)(h().A,{size:"lg",onClick:K,children:G}):"red"===C?(0,y.jsx)(h().A,{size:"lg",onClick:K,isRed:!0,children:G}):(0,y.jsx)(f().A,{size:"lg",onClick:K,children:G}),!R&&(0,y.jsx)(f().A,{size:"lg",onClick:k,style:L.cancelButton,children:j??(0,y.jsx)(n(959013).sA,{id:"radioModal.cancel",defaultMessage:"Cancel"})})]}),_]})}function b(e){let{onClick:t}=e;const n=(0,s().IS)((e=>({button:{display:"flex",justifyContent:"center",alignItems:"center",width:24,height:24,borderRadius:"100%",background:e.lightGrayButtonBackground},buttonHovered:{background:e.lightGrayButtonHoveredBackground},buttonPressed:{background:e.lightGrayButtonPressedBackground},closeIcon:{width:16,height:16,fill:e.icon.secondary}})),[]);return(0,y.jsx)(m().A,{style:n.button,hoveredStyle:n.buttonHovered,pressedStyle:n.buttonPressed,onClick:t,children:(0,l().V)(n.closeIcon)})}function S(e){let{radioItem:t,isSelected:n,onSelectRadio:o,left:i}=e;const r=(0,s().IS)((e=>({button:{display:"flex",justifyContent:"space-between",gap:10,height:"auto",minHeight:70,borderRadius:8,paddingTop:12,paddingBottom:12,paddingLeft:14,paddingRight:14-p().p,border:void 0,boxShadow:n?`inset 0 0 0 1px ${e.icon.uiBluePrimary}`:`inset 0 0 0 1px ${e.stroke.primary}`},buttonText:{display:"flex",flexDirection:"column",gap:2,...a().RC},optionTitle:{fontWeight:a().Wy.medium},optionSubtitle:{whiteSpace:"break-spaces"},left:{display:"flex",alignItems:"center",justifyContent:"center"}})),[n]);return(0,y.jsxs)(f().A,{size:"lg",onClick:()=>o(t.key),style:r.button,children:[i&&(0,y.jsx)("div",{style:r.left,children:i}),(0,y.jsxs)("div",{style:r.buttonText,children:[(0,y.jsx)(g().A,{style:r.optionTitle,children:(0,y.jsx)(u().j,{children:t.title})}),t.subtitle&&(0,y.jsx)(g().A,{isSmall:!0,isMultiline:!0,style:r.optionSubtitle,children:t.subtitle})]}),(0,y.jsx)(p().A,{isSelected:n})]})}const C=o.memo(x)},887480:(e,t,n)=>{n.d(t,{Ay:()=>i().A,yQ:()=>s});var o=()=>n(645873),i=()=>n(853306);const r=new(o().O2)("radioModalRenderer",(()=>n.e(35818).then(n.bind(n,415995)))),s=(0,o()._h)(r,(e=>e.default))}}]);