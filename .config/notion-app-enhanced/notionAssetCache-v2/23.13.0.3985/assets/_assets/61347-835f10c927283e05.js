(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[2411,5834,34208,61347],{53528:(e,t,n)=>{"use strict";n.d(t,{OH:()=>a,T2:()=>l,do:()=>d});var o=()=>n(597777),i=()=>n(869190),r=()=>n(604995),s=()=>n(416504);function a(e){const{dateTime:t,intl:n,shortenDateAndRange:o}=e,s=r().C6.toPersistedDate(t.valueOf());return i().ZF({value:s,allowRelativeDates:!0,intl:n,shortenDateAndRange:o,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:n,userTimeZone:o,displayInUserTimezone:s,alwaysIncludeTimezone:a}=e,l=r().C6.toPersistedDateTime(t.valueOf(),t.zoneName);return i().ZF({value:l,allowRelativeDates:!0,intl:n,userTimeZone:o,displayInUserTimezone:s,alwaysIncludeTimezone:a})}function d(e){const{luxonRange:t,intl:n}=e,a=r().C6.toPersistedDateRange(t),l=i().ZF({value:a,allowRelativeDates:!1,shortenDateAndRange:!0,intl:n,displayInUserTimezone:!0}),d=t.end.setZone((0,s().P)()),c=i().fU({start_time:d.toFormat(o().GE),humanReadable:!1,intl:n});return n.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:c})}},93263:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454);var o=n(296540);const i=function(e,t){if(e.ref&&t.ref){const n=t.ref;t.ref=t=>{e.ref(t),n(t)}}return o.cloneElement(e,t)};var r=n(474848);const s=function(e){const[t,s]=(0,o.useState)([]),{render:a}=e,l=(0,n(56366).K8)((()=>a()),[a]),d=(0,o.useMemo)((()=>new Set(l.map((e=>e.key)))),[l]),c=(0,n(591779).ZC)(l);if(c){const e=[],n=new Set(t.map((e=>e.key)));for(const t of c)if(!d.has(t.key)&&!n.has(t.key)){const n={visible:!1,onAnimationEnd:()=>{s((e=>e.filter((e=>e.key!==o.key))))}},o=i(t,n);e.push(o)}e.length>0&&s((t=>[...t,...e]))}const u=t.filter((e=>!d.has(e.key))).concat(l);return(0,r.jsx)("div",{className:e.className,children:u})}},204333:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});n(898992),n(354520),n(737550);var o=n(296540),i=()=>n(484714),r=()=>n(56366),s=n(474848);const a=(0,n(340498).wt)("commentAdd",{viewBox:"0 0 16 15",svg:(0,s.jsx)("path",{d:"M4.73926 14.6865C4.46582 14.6865 4.25163 14.5977 4.09668 14.4199C3.94629 14.2422 3.87109 14.0007 3.87109 13.6953V12.0137H3.50195C2.84115 12.0137 2.27376 11.8861 1.7998 11.6309C1.3304 11.3757 0.968099 11.0111 0.712891 10.5371C0.46224 10.0586 0.336914 9.47982 0.336914 8.80078V3.49609C0.336914 2.81706 0.46224 2.24056 0.712891 1.7666C0.963542 1.28809 1.32585 0.921224 1.7998 0.666016C2.27832 0.410807 2.86165 0.283203 3.5498 0.283203H12.4434C13.127 0.283203 13.708 0.410807 14.1865 0.666016C14.665 0.921224 15.0296 1.28809 15.2803 1.7666C15.5309 2.24056 15.6562 2.81706 15.6562 3.49609V8.80078C15.6562 9.47982 15.5309 10.0586 15.2803 10.5371C15.0296 11.0111 14.665 11.3757 14.1865 11.6309C13.708 11.8861 13.127 12.0137 12.4434 12.0137H8.21875L5.88086 14.085C5.64844 14.29 5.44792 14.4404 5.2793 14.5361C5.11068 14.6364 4.93066 14.6865 4.73926 14.6865ZM5.07422 13.1758L7.24121 11.0293C7.38704 10.8835 7.52148 10.7878 7.64453 10.7422C7.77214 10.6921 7.94076 10.667 8.15039 10.667H12.4023C13.0495 10.667 13.528 10.5075 13.8379 10.1885C14.1523 9.86491 14.3096 9.38639 14.3096 8.75293V3.53711C14.3096 2.9082 14.1523 2.43424 13.8379 2.11523C13.528 1.79167 13.0495 1.62988 12.4023 1.62988H3.58398C2.94141 1.62988 2.46289 1.79167 2.14844 2.11523C1.83854 2.43424 1.68359 2.9082 1.68359 3.53711V8.75293C1.68359 9.38639 1.83854 9.86491 2.14844 10.1885C2.46289 10.5075 2.94141 10.667 3.58398 10.667H4.52051C4.71191 10.667 4.85091 10.7103 4.9375 10.7969C5.02865 10.8789 5.07422 11.0225 5.07422 11.2275V13.1758ZM4.8418 6.14844C4.8418 5.95703 4.90104 5.80208 5.01953 5.68359C5.13802 5.56055 5.29525 5.49902 5.49121 5.49902H7.36426V3.62598C7.36426 3.43913 7.4235 3.28646 7.54199 3.16797C7.66048 3.04492 7.81087 2.9834 7.99316 2.9834C8.18457 2.9834 8.33952 3.04264 8.45801 3.16113C8.58105 3.27962 8.64258 3.43457 8.64258 3.62598V5.49902H10.5156C10.707 5.49902 10.862 5.56055 10.9805 5.68359C11.099 5.80208 11.1582 5.95703 11.1582 6.14844C11.1582 6.33073 11.099 6.48112 10.9805 6.59961C10.862 6.7181 10.707 6.77734 10.5156 6.77734H8.64258V8.65723C8.64258 8.84408 8.58105 8.99902 8.45801 9.12207C8.33952 9.24056 8.18457 9.2998 7.99316 9.2998C7.81087 9.2998 7.66048 9.24056 7.54199 9.12207C7.4235 8.99902 7.36426 8.84408 7.36426 8.65723V6.77734H5.49121C5.2998 6.77734 5.14258 6.7181 5.01953 6.59961C4.90104 6.48112 4.8418 6.33073 4.8418 6.14844Z"})});var l=()=>n(959013),d=()=>n(555776),c=()=>n(24157);const u=(0,o.forwardRef)((function(e,t){const u=(0,i().v3)(),m=(0,i().Y0)(),p=(0,l().tz)(),{selectable:f,store:g,containerRect:v}=e,[b,h]=(0,o.useState)(!1),y=(0,n(444570).Jj)(),x=(0,r().K8)((()=>g.isFirstBlockInCalloutV2Block()),[g]),S=(0,r().K8)((()=>{var e;const t=Boolean(n(94953).A.getFirstSelectedDiscussionId()||n(372154).A.getFramePageFirstSelectedDiscussionId()||d().A.state.isActivelyComposing),o=g.getDiscussionStores().filter((e=>!e.getResolved())).length>0,i=n(116008).A.getBlockStore()===g,r=g.getType(),s="toggle"===r&&!n(468484).A.isOpen(g.id)&&(0,n(299545).O3)(g,{recursivelyLoadAllDiscussions:!0}).length>0;if(!f||m.isMobile||!f.props.shouldShowCommentMenu||g.isNavigableAncestorNonCommentableState()||t||r&&["video","image"].includes(r)||g.isEmptyTitle()||o||i||s||x)return!1;const a="empty"!==c().default.state.mode&&c().default.state.multiSelection;if(a&&(0,n(231722).kM)(a))return!0;return!(a?(null===(e=(0,n(962845).ZS)({multiSelection:a,filterCommonAncestors:!1,focus:"end"}))||void 0===e?void 0:e.stores)??[]:[]).some((e=>e.id===g.id))}),[g,f,m.isMobile,x]),C=(0,r().K8)((()=>{var e;const t=n(186445).ZT(u),o=null==t||null===(e=t.getContentWrapEl())||void 0===e?void 0:e.getBoundingClientRect();return(0,n(278014).jU)({marginItemType:"add_comment",nodeRect:o,containerRect:v})}),[u,v]),A=(0,n(401497).IS)((e=>({container:{position:"relative",right:C},iconStyle:{marginLeft:.65,...y?(0,n(327994).Cz)(e,b):{}},iconButton:{paddingLeft:6,paddingRight:6,width:"unset"}})),[y,b,C]),w=(0,o.useCallback)((async()=>{if(g.isType(n(700500).uP)){const e=g.getBlockTitleStore(),t=n(871399).default.state,o=t.isOpen?t.selectableBoundingRect:void 0,i=n(792002).mk(e);if(i){const t=await n(862292).T.formulas.load();n(441467).hN({environment:u,blockStore:g,multiSelection:{start:{index:i.startIndex,store:e},end:{index:i.endIndex,store:e}},rect:o,from:"right_margin",formulasModule:t})}}else(0,n(730307).l)({environment:u,blockStore:g,from:"right_margin"})}),[u,g]),T=(0,o.useCallback)((e=>{h(e),e?d().A.setHoverWithSource("right_margin_button"):d().A.resetHoverSource("right_margin_button")}),[]),k=(0,o.useCallback)((()=>T(!0)),[T]),B=(0,o.useCallback)((()=>T(!1)),[T]);return S?(0,s.jsx)("div",{style:A.container,onMouseDown:n(728611).tr,children:(0,s.jsx)(n(859428).A,{placement:n(962730).W.Bottom,delayThreshold:300,renderTooltip:()=>(0,s.jsx)(l().sA,{defaultMessage:"Comment",id:"selectableCommentMenu.commentPrompt.tooltip"}),render:e=>(0,s.jsx)("div",{onMouseOver:k,onMouseLeave:B,children:(0,s.jsx)(n(285790).A,{ref:t,ariaLabel:p.formatMessage({id:"selectableCommentMenu.iconButton",defaultMessage:"Comment"}),disallowTabbing:!0,icon:a,onClick:w,style:A.iconButton,iconStyle:A.iconStyle,...e})})})}):null}))},247123:(e,t,n)=>{"use strict";n.d(t,{QU:()=>p,f2:()=>m,r6:()=>f});n(581454),n(296540);var o=()=>n(56366),i=()=>n(401497),r=()=>n(959013),s=()=>n(534177),a=()=>n(756279),l=()=>n(765957),d=()=>n(2143),c=()=>n(921194),u=n(474848);function m(e){const{openState:t}=e,{mainEditorCurrentBlockStore:n,currentSpaceStore:r}=(0,o().K8)((()=>{const{mainEditorCurrentBlockStore:e,currentSpaceStore:t}=l().default.state;return{mainEditorCurrentBlockStore:e,currentSpaceStore:t}}),[]),s=(0,i().IS)((e=>({scroller:{display:"flex",flexDirection:"column",maxHeight:290,border:`1px solid ${e.lightDividerColor}`,borderRadius:6,paddingTop:8,paddingLeft:12,paddingRight:12,paddingBottom:12,marginTop:15,marginBottom:5,marginLeft:-12,marginRight:-12},editContainer:{marginTop:2,marginBottom:2,color:e.text.primary}})),[]);if(!n||!r)return null;const m=Date.now();return(0,u.jsx)(d().H,{type:a().A.Y,style:s.scroller,children:t.permissionChanges.map(((e,t)=>{let[o,i]=e;const a={timestamp:m,space_id:r.id,type:"permission-changed",permission_data:{before:o,after:i}};return(0,u.jsx)("div",{style:s.editContainer,children:(0,u.jsx)(c().A,{rootStore:n,edit:a})},`${o.type}-${t}`)}))})}function p(e){return["remove","restrict"].includes(e.type)?(0,u.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccessV2",defaultMessage:"Change and unlink"}):(0,u.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.relink",defaultMessage:"Relink"})}function f(e){switch(e.type){case"remove":case"restrict":return(0,u.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"});case"restore":case"restoreTeamPermissions":return(0,u.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"});default:throw s().HB(e)}}},266626:(e,t,n)=>{"use strict";n.d(t,{M5:()=>K,CX:()=>E});n(898992),n(672577),n(430670),n(581454);var o=n(296540),i=()=>n(484714),r=()=>n(56366),s=()=>n(401497),a=()=>n(700500),l=()=>n(555776),d=()=>n(145214),c=()=>n(93263),u=()=>n(186445),m=()=>n(728611),p=()=>n(278014),f=()=>n(108944),g=()=>n(569912),v=()=>n(953418),b=()=>n(640653),h=()=>n(695625),y=()=>n(397248),x=()=>n(337567),S=()=>n(871399),C=()=>n(666710),A=()=>n(444570),w=(n(18107),n(967357),()=>n(751735)),T=()=>n(381349),k=()=>n(410282);var B=n(474848);const M=new Map([[a().xd.toggle,28],[a().xd.header,28],[a().xd.subHeader,28],[a().xd.subSubHeader,28],[a().xd.toDo,28],[a().xd.bulletedList,28],[a().xd.numberedList,28],[a().xd.text,24]]),R=new Map([[a().xd.image,-2]]),j=(0,o.forwardRef)((function(e,t){const{store:a,selectable:l,insertionLocation:d,state:c,nodeRect:u,containerRect:m}=e,p=(0,i().v3)(),f=(0,i().WS)(),g=(0,n(792485).S)(),v=(0,r().K8)((()=>C().default.state.selectableRectMap.get(l)),[l]),b=(0,r().K8)((()=>A().TH({environment:p,store:a,selectableBoundingRect:v})),[p,a,v]),h=(0,r().K8)((()=>!(null!=g&&g.publicEditModeStore.state.hasPublicPermission)&&("editor"===a.getRole()||"read_and_write"===a.getRole())||"edit"===(null==g?void 0:g.publicEditModeStore.state.permission)),[null==g?void 0:g.publicEditModeStore,a]),y=(0,r().K8)((()=>{var e,t;return"comment_only"===(null===(e=a.getNavigableBlockStore({skipCurrent:!0}))||void 0===e?void 0:e.getRole())||"comment"===(null==g||null===(t=g.publicEditModeStore.state)||void 0===t?void 0:t.permission)}),[null==g?void 0:g.publicEditModeStore,a]),x=(0,r().K8)((()=>"suggest"===n(77246).Uv.getMode(a)),[a]),j=(0,r().K8)((()=>a.isFirstBlockInCalloutV2Block()),[a]),_=(0,r().K8)((()=>{var e;const t="external_object_instance_page"===a.getType(),o=g&&(0,n(696746).Nh)(g.pageStore.id);return!f&&(!a.isNavigableAncestorNonEditableState()||"collection"===(null===(e=a.getParentStore())||void 0===e?void 0:e.table))&&(h||y&&x)&&!t&&!a.isNavigableAncestorExternallyImportedPage()&&!o&&!j&&v}),[y,h,j,f,x,g,v,a]),[P,I]=(0,o.useState)(!1),E=(0,r().K8)((()=>{var e;return a.id===(null===(e=a.getNavigableBlockStore())||void 0===e?void 0:e.getContentIds().at(-1))}),[a]),H=(0,r().K8)((()=>{if(!v)return 0;if("above"===d){return-12-A().mC(l)/2-2}{const e=v.height-12;return E?e+12:e}}),[d,E,l,v]),K=(0,r().K8)((()=>{if(!v)return 0;if("above"===d){const e=A().mC(l);return-.5*Math.max(3,e)-3}{const e=v.height-1.5;return E?e+12:e}}),[d,E,l,v]),{indentHintSize:D,additionalHorizontalPadding:F,additionalVerticalPadding:L}=(0,r().K8)((()=>{var e,t,o;const i=null==a?void 0:a.getRecordStoreUIParent();if(i instanceof n(630116).Bv&&["collection_view","collection_view_page"].includes(i.getType())){const e=(0,n(638146).cf)({userId:p.currentUser.id,viewBlockId:i.id}),t=i.getCollectionViewStores().find((t=>t.id===e));if(t){if("table"===t.getType())return{indentHintSize:0,additionalHorizontalPadding:5,additionalVerticalPadding:1}}}const r=null===(e=a.getParentBlockStore())||void 0===e?void 0:e.getType(),s=a.getType(),l=s?R.get(s)??0:0;if(!r)return{indentHintSize:void 0,additionalHorizontalPadding:0,additionalVerticalPadding:l};const c=null===(t=a.getParentBlockStore())||void 0===t?void 0:t.getContentIds(),u=a.id===(null==c?void 0:c[0]),m=a.id===(null==c?void 0:c.at(-1)),f=(()=>{if(a.isTransclusionType()||a.isInsideTransclusion())return 5;const e=a.getNumberOfDuplicateBlocksAncestors();return e>0?n(571400).t*e:0})(),g=(null===(o=a.getParentBlockStore())||void 0===o?void 0:o.getParentTable())===n(199378).SC;return u&&!g||m&&"below"===d?{indentHintSize:M.get(r),additionalHorizontalPadding:f,additionalVerticalPadding:l}:{indentHintSize:void 0,additionalHorizontalPadding:f,additionalVerticalPadding:l}}),[d,a,p.currentUser.id]),{left:z,positioningAdjustment:N}=(0,r().K8)((()=>{const e=A().KG({store:a,selectableBoundingRect:v,containerWidth:b});return void 0!==D?{left:26+D+F-e,positioningAdjustment:e}:{left:26+F-e,positioningAdjustment:e}}),[D,F,a,v,b]),U=(0,r().K8)((()=>{const e=function(e){var t;const n=e.getParentBlockStore(),o=null==n?void 0:n.getType(),i=null===(t=e.getParentBlockStore())||void 0===t?void 0:t.getContentIds();if(e.id!==(null==i?void 0:i[0]))return!1;switch(o){case"bulleted_list":case"toggle":case"to_do":case"numbered_list":return!0;default:return!1}}(a),t=a.getParentBlockStore();return e&&t?(0,k().j)(t):(0,k().j)(a)}),[a]),O=((null==u?void 0:u.left)??0)-((null==m?void 0:m.left)??0),V=(0,s().IS)((e=>{const t={position:"absolute",top:K+L,height:3,transition:"0.15s",left:O-N},o=function(e){const{blockBackgroundColor:t,theme:n}=e,o=(0,T().k5)(t,n);return o&&o.background?(0,w().X4)(o.background,.66):(0,w().X4)(n.contentBackground,.66)}({blockBackgroundColor:U,theme:e});return{plusIconStyles:{width:16,...(0,n(327994).Cz)(e,P)},buttonStyles:{position:"absolute",top:H+L,left:O-z,width:24,height:24,display:"flex",justifyContent:"center",borderRadius:3,backdropFilter:"blur(4px)",background:o},buttonHoveredStyles:{backdropFilter:"blur(4px)",background:(0,T().Qr)([e.buttonHoveredBackground,o])},lineStyles:{...t,width:b?`${b}px`:void 0,background:P?(0,w().X4)(e.icon.secondary,.4):"transparent"},lighterLineStyles:void 0!==D?{...t,width:b?D-2+"px":void 0,background:P?(0,w().X4)(e.icon.secondary,.4):"transparent",left:-D+N}:{},mediumColorStyle:{color:e.text.contrastSecondary}}}),[P,H,z,K,D,L,b,N,U,O]);return _?(0,B.jsx)(n(859428).A,{placement:n(962730).W.Bottom,delayThreshold:n(348501).q,renderTooltip:function(){return(0,B.jsx)("div",{style:{textAlign:"center"},children:(0,B.jsx)(n(959013).sA,{defaultMessage:"Click <mediumcolor>to add block</mediumcolor>",id:"block.InterBlockAddButton.tooltip.addBlock",values:{mediumcolor:e=>(0,B.jsx)("span",{style:V.mediumColorStyle,children:e})}})})},render:e=>(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(n(704152).A,{ref:t,style:V.buttonStyles,hoveredStyle:V.buttonHoveredStyles,onClick:()=>{(0,n(358063).yO)(p,a,d)},onMouseEnter:t=>{var n;I(!0),S().default.setState({...c,isHoveringPlusButton:!0}),null===(n=e.onMouseEnter)||void 0===n||n.call(e,t)},onMouseLeave:t=>{var n;I(!1),S().default.setState({...c,isHoveringPlusButton:!1}),null===(n=e.onMouseLeave)||void 0===n||n.call(e,t)},children:(0,n(689094).W)(V.plusIconStyles)}),(0,B.jsx)("div",{style:V.lighterLineStyles}),(0,B.jsx)("div",{style:V.lineStyles}),void 0!==D?(0,B.jsx)("div",{style:V.lineStyles}):void 0]})}):(S().default.setState({...c,isPlusButtonVisible:!1}),null)}));var _=()=>n(204333),P=()=>n(737517);const I=[a().xd.page,a().xd.callout,a().xd.column,a().xd.transclusionContainer];function E(e){var t;const n=(0,i().v3)(),{container:a}=e,C=(0,r().O$)(S().default),A=(0,r().K8)((()=>(0,b().s7)(n)),[n]),w=(0,o.useRef)(null),T=(0,o.useRef)(void 0),{targetSelectable:k,icon:M}=(0,r().K8)((()=>C.isOpen?function(e,t,n){const{mouseX:o,mouseY:i}=n;if(e.current&&y().ux(e.current.getBoundingClientRect(),o,i)&&t.current)return t.current;for(const d of n.nearbySelectables){const e=d.selectable;if("top-left-corner"===d.hoveredRegion||"above-content"===d.hoveredRegion){const n={targetSelectable:e,icon:"plus_above"};return t.current=n,n}if("bottom-left-corner"===d.hoveredRegion||"below-content"===d.hoveredRegion){var r;const n=null===(r=e.props.store.getParentBlockStore())||void 0===r?void 0:r.getType();if(n&&I.includes(n)&&e.props.isLastItem){const n={targetSelectable:e,icon:"plus_below"};return t.current=n,n}}}const s=n.currentStore,a=s&&h().T.findSelectablesFromStore(s).find((e=>Boolean(e.props.shouldShowHoverMenu||e.props.shouldShowCommentMenu)));if(!a)return{targetSelectable:void 0,icon:void 0};const l={targetSelectable:a,icon:S().default.isRightMarginCommentHovered()?"comment":"6-dot"};return t.current=l,l}(w,T,C):{targetSelectable:void 0,icon:void 0}),[C]),R=null==k?void 0:k.props.store,E=(0,r().K8)((()=>u().ZT(n)),[n]),H=(0,o.useMemo)((()=>{var e;if(!C.isOpen)return!1;const t=null==E||null===(e=E.getContentWrapEl())||void 0===e?void 0:e.getBoundingClientRect().left;return void 0!==t&&C.mouseX>t}),[C,E]),F=(0,r().K8)((()=>{if(!R)return!1;const e=f().Nq(R);return(null==R?void 0:R.pathIsDead())||e&&(0,x().pQ)(e.id)}),[R]),[L,z]=(0,o.useState)(null==k||null===(t=k.getNode())||void 0===t?void 0:t.getBoundingClientRect());(0,o.useEffect)((()=>{if(!k)return;const e=k.getNode();if(!e)return;const t=()=>{z(e.getBoundingClientRect())},n=(0,v().NM)(e);n&&(0,m().P4)(n,"scroll",t);const o=(0,v().T8)(e);return o&&o!==n&&(0,m().P4)(o,"scroll",t),t(),()=>{n&&(0,m().Ol)(n,"scroll",t),o&&(0,m().Ol)(o,"scroll",t)}}),[k]),(0,o.useEffect)((()=>{"comment"!==M&&l().A.state.isHovered&&l().A.resetHoverSource("right_margin_button")}),[M]);const N=null==a?void 0:a.getBoundingClientRect(),U=(0,r().K8)((()=>R?(0,p().ac)({marginItemType:"selectable_hover_menu_overlay_item",store:R,nodeRect:L,containerRect:N,environment:n}):0),[R,L,N,n]),O=(0,s().IS)((()=>({container:{position:"absolute",top:U},commentMenu:{marginLeft:3}})),[U]),V=(0,r().K8)((()=>K.state),[]);return(0,g().A)((e=>(0,B.jsxs)(B.Fragment,{children:[V?(0,B.jsx)(D,{container:a}):null,(0,B.jsx)(c().A,{render:()=>C.isOpen?k&&R&&M&&!F?(S().default.setState({...C,isPlusButtonVisible:"plus_above"===M||"plus_below"===M}),[(0,B.jsxs)(d().A,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},config:{duration:150,delay:H?150:0,timingFunction:"ease-in-out"},style:O.container,...e,children:["comment"===M?(0,B.jsx)("div",{style:O.commentMenu,children:(0,B.jsx)(_().A,{selectable:k,store:R,ref:w,containerRect:N})}):void 0,"6-dot"===M?(0,B.jsx)(P().A,{selectable:k,store:R,isWorkspaceAdmin:A,ref:w,nodeRect:L,containerRect:N}):void 0,"plus_above"===M||"plus_below"===M?(0,B.jsx)(j,{store:R,selectable:k,insertionLocation:"plus_above"===M?"above":"below",ref:w,state:C,nodeRect:L,containerRect:N}):void 0]},R.id)]):(S().default.setState({...C,isPlusButtonVisible:!1}),[]):[]})]})))}const H={"top-left-corner":"green","bottom-left-corner":"green","above-content":"blue","below-content":"blue"},K=n(757695).Store.createValue(!1);function D(e){const{container:t}=e,n=(0,i().v3)(),s=(0,r().K8)((()=>S().default.state.isOpen?S().default.state.nearbySelectables.flatMap((e=>{let{selectable:t,hoveredRegion:o}=e;const i=C().default.state.selectableRectMap.get(t);if(!i)return[];const r=A().TH({environment:n,store:t.props.store,selectableBoundingRect:i}),s=A().KG({store:t.props.store,selectableBoundingRect:i,containerWidth:r}),a=A().mC(t);return{selectableRect:i,hoverRegionRect:(0,S().getHoverRegionOfRect)(i,o,r,s,a),hoveredRegion:o}})):[]),[n]),a=null==t?void 0:t.getBoundingClientRect(),l=((null==a?void 0:a.top)??0)+((null==t?void 0:t.scrollTop)??0),d=((null==a?void 0:a.left)??0)+((null==t?void 0:t.scrollLeft)??0);return(0,B.jsx)("div",{style:{pointerEvents:"none"},children:s.map(((e,t)=>{let{selectableRect:n,hoverRegionRect:i,hoveredRegion:r}=e;return(0,B.jsxs)(o.Fragment,{children:[(0,B.jsx)("div",{style:{position:"absolute",top:i.top-l,left:i.left-d,width:i.width,height:i.height,outline:`1px solid ${H[r]}`,fontSize:8,fontFamily:"monospace"},children:r}),(0,B.jsx)("div",{style:{position:"absolute",top:n.top-l,left:n.left-d,width:n.width,height:n.height,outline:"1px solid gray",fontSize:8,fontFamily:"monospace"}})]},t)}))})}(0,n(604341).exposeDebugValue)("SelectableHoverDebuggerEnabledStore",K)},278014:(e,t,n)=>{"use strict";n.d(t,{ac:()=>T,jU:()=>B,qg:()=>k});var o=()=>n(799954),i=()=>n(700500),r=()=>n(908521),s=()=>n(534177),a=()=>n(571400),l=()=>n(236030),d=()=>n(519839),c=()=>n(799832),u=()=>n(835066),m=()=>n(780054),p=()=>n(444570),f=()=>n(327994),g=()=>n(980914),v=()=>n(217429),b=()=>n(871399),h=()=>n(502438),y=()=>n(809724);const x=l().Fh-2,S=10,C=4,A=15,w=24;function T(e){const{marginItemType:t,store:n,nodeRect:a,containerRect:d}=e,c=v().default.checkGate({gateName:"content_reskin_v2"}),u=c?function(e){const t=v().default.checkGate({gateName:"content_reskin_v2"});if(!t)return 0;const{store:n,marginItemType:s}=e,a=n.getType(),l=n.getNavigableAncestorFormat(),d=Boolean(l.page_small_text),c=(0,y().xU)(n),u=n.isFirstChildInParentBlock();if(c)return c.wrapper.paddingTop+c.title.paddingTop-(d?1.5:0);if(a===i().xd.text)return o().dE.paddingTop-(d?1.5:0);if(a===i().xd.header){return 39.5-(d?2.5:0)-(u?r().Aw.header-o().dE.paddingTop:0)}if(a===i().xd.subHeader){return 31.5-(d?2:0)-(u?r().Aw.subHeader-o().dE.paddingTop:0)}if(a===i().xd.subSubHeader){return 25-(d?1.5:0)-(u?r().Aw.subSubHeader-o().dE.paddingTop:0)}if(a===i().xd.divider)return 2;if(a===i().xd.table)return"presence_avatars"===s?5.5:14;return 8}({store:n,marginItemType:t}):function(e){const{store:t,marginItemType:n}=e,o=t.getType(),r=t.getNavigableAncestorFormat(),s=Boolean(r.page_small_text);return o===i().xd.divider?-6:o===i().xd.header?s?7:10:o===i().xd.subHeader?s?4:6:o===i().xd.collectionView?8:o===i().xd.table?"presence_avatars"===n?5.5:14:3}({store:n,marginItemType:t}),p=c?function(e){const t=v().default.checkGate({gateName:"content_reskin_v2"});if(!t)return 0;const{baseOffset:n,store:o}=e;if(o.isTransclusionType())return n-1.5;if(j(o))return v().default.checkGate({gateName:"db_ux_chrome"})?(l().tt-w)/2:n+1;if("ai_block"===o.getType())return o.hasContent()?n+9:n+15;if(o.getType()===i().xd.button)return n+6;return n}({baseOffset:u,store:n}):function(e){const{baseOffset:t,store:n}=e;if(n.isTransclusionType())return t+5;if(j(n))return v().default.checkGate({gateName:"db_ux_chrome"})?(l().tt-w)/2:t+1;if("ai_block"===n.getType())return n.hasContent()?t+9:t+15;if(n.getType()===i().xd.button)return t+3;return t}({baseOffset:u,store:n}),g=((null==a?void 0:a.top)??0)-((null==d?void 0:d.top)??0)+p,b=m().A.isMobile?16:22,h=(f().jK-b)/2;if("selectable_hover_menu_overlay_item"===t)return g;if("attribution_avatars"===t)return g-h;if("presence_avatars"===t){const{attributionsIncludeFoundBlock:t,avatarCount:n}=e;return g+h+(n+(t?1:0)-1)*A}(0,s().HB)(t)}function k(e){const{marginItemType:t,store:n,environment:o,nodeRect:i,containerRect:r,selectable:a}=e,l=m().A.isMobile?16:22,d=(0,p().zb)()+S,{maxLeft:u,isBoundedByParentContainer:f}=function(e){const{selectable:t,nodeRect:n,store:o}=e,i=(null==n?void 0:n.left)??0;if(o.isCollectionView()||o.isInsideCollection()){const e=(0,c().U)(o);if(e&&"table"!==e.getViewType())return{maxLeft:i,isBoundedByParentContainer:!1}}const r=null==t?void 0:t.getScrollerContext();let s=0;if(r&&r.horizontalScroller){const e=r.horizontalScroller.getClientRect();s=(null==e?void 0:e.left)??0}const a=Math.max(s,i),l=j(o)&&_(o)?x:0,d=a-l<=s,u=d?s:a;return{maxLeft:u,isBoundedByParentContainer:d}}({selectable:a,nodeRect:i,store:n}),g=R(o,d+w,n,f),v=u-((null==r?void 0:r.left)??0);if("drag_handle"===t)return v-R(o,d,n,f);if("plus_button"===t)return v-g;if("attribution_avatars"===t){return v-M({marginItemType:t,store:n,originalMenuOffset:g,environment:o,isBoundedByParentContainer:f})-C-l}if("presence_avatars"===t){return v-M({marginItemType:t,originalMenuOffset:g,environment:o,store:n,isBoundedByParentContainer:f})-C-l}(0,s().HB)(t)}function B(e){const{marginItemType:t,nodeRect:n,containerRect:o}=e;if("add_comment"===t)return((null==o?void 0:o.right)??0)-((null==n?void 0:n.right)??0);(0,s().HB)(t)}function M(e){var t;const{marginItemType:n,originalMenuOffset:o,environment:i,store:r,isBoundedByParentContainer:a}=e,l=b().default.state,d=l.isOpen&&(null===(t=l.currentStore)||void 0===t?void 0:t.id)===r.id;switch(n){case"attribution_avatars":return d?o:R(i,0,r,a);case"presence_avatars":return d&&l.currentStore&&!b().default.isRightMarginCommentHovered()?o:R(i,0,r,a);case"drag_handle":case"plus_button":return o;default:(0,s().HB)(n)}}function R(e,t,n,r){if(!r&&_(n)&&j(n))return t+x;if(n.isQuoteBlockChild()){return t+3+14+o().CC.paddingLeft}if(v().default.checkGate({gateName:"db_ux_chrome"})&&n.getType()===i().xd.collectionView)return t+6;if(n.isTransclusionType()||"ai_block"===n.getType())return t+4;if(n.isDirectChildOfAiBlock())return t+13;if(n.isInsideTransclusion())return t+5;if(n.getType()===i().xd.table){const o=g().Xe({simpleTableStore:n,environment:e,includeInline:!(0,u().dC)(e,n)}),i=n.isImmediateColumnChild();return 0!==o||i?t+8:t}const s=n.getNumberOfDuplicateBlocksAncestors();return s>0?t+a().t*s:t}function j(e){var t;if(e.getType()!==i().xd.page&&!e.isPersonProfile())return!1;const n=(0,c().U)(e);if(!n)return!1;return(e.isInsideCollection()||Boolean(null==n||null===(t=n.collectionStore())||void 0===t?void 0:t.isPageTreeCollection()))&&(0,d().f5)({collectionContextStore:n})}function _(e){var t;const n=h().default.state.stores.includes(e);return b().default.state.isOpen&&(null===(t=b().default.state.currentStore)||void 0===t?void 0:t.id)===e.id||n}},334684:(e,t,n)=>{"use strict";n.d(t,{$:()=>a});var o=()=>n(970013),i=()=>n(713998),r=()=>n(534177);const s=["button","formula","auto_increment_id","file"];function a(e){const{propertyType:t,propertySchema:n,allowAIProperty:a}=e,l=(0,r().O9)(n)&&(0,o().$M)(n)&&(0,r().O9)((0,o().om)(n)),d=!a&&l,c=(0,r().O9)((0,i().Dz)(n));return s.includes(t)||d||c}},358063:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>C,yO:()=>T});n(898992),n(672577);var o=n(296540),i=()=>n(484714),r=()=>n(56366),s=()=>n(401497),a=()=>n(206267),l=()=>n(959013),d=()=>n(679924);var c=()=>n(751156),u=()=>n(413962),m=()=>n(87017),p=()=>n(478726),f=()=>n(299545),g=()=>n(695625),v=()=>n(393255),b=()=>n(77246),h=()=>n(871399),y=()=>n(611371),x=n(474848);const S=(0,l().YK)({ariaLabelApple:{id:"block.selectableAddMenu.ariaLabel.apple",defaultMessage:"Click to add below. Option-click to add a block above"},ariaLabelWindows:{id:"block.selectableAddMenu.ariaLabel.windows",defaultMessage:"Click to add below. Alt-click to add a block above"}}),C=(0,o.forwardRef)((function(e,t){let{store:o,nodeRect:a,containerRect:d,selectable:c}=e;const u=(0,l().tz)(),m=(0,s().DP)(),p=(0,i().v3)(),f=(0,i().WS)(),g=(0,n(792485).S)(),v=(0,r().K8)((()=>{var e;return"editor"===o.getRole()||"read_and_write"===o.getRole()||"edit"===(null==g||null===(e=g.publicEditModeStore.state)||void 0===e?void 0:e.permission)}),[null==g?void 0:g.publicEditModeStore,o]),h=(0,r().K8)((()=>{var e,t;return"comment_only"===(null===(e=o.getNavigableBlockStore({skipCurrent:!0}))||void 0===e?void 0:e.getRole())||"comment"===(null==g||null===(t=g.publicEditModeStore.state)||void 0===t?void 0:t.permission)}),[null==g?void 0:g.publicEditModeStore,o]),C=(0,r().K8)((()=>"suggest"===b().Uv.getMode(o)),[o]),k=(0,r().K8)((()=>o.isFirstBlockInCalloutV2Block()),[o]),B=(0,r().K8)((()=>{var e;const t="external_object_instance_page"===o.getType(),i=g&&(0,n(696746).Nh)(g.pageStore.id);return!f&&(!o.isNavigableAncestorNonEditableState()||"collection"===(null===(e=o.getParentStore())||void 0===e?void 0:e.table))&&(v||h&&C)&&!t&&!o.isNavigableAncestorExternallyImportedPage()&&!i&&!k&&!o.isPersonProfile()}),[h,v,k,f,C,g,o]),M=(0,r().K8)((()=>{var e;return null===(e=o.getSpaceStore())||void 0===e?void 0:e.getFreezeSettings()}),[o]),R="active"===(0,n(973454).p)(M),j=(0,n(963589).X)("content_reskin_v2");return!B||R?null:(0,x.jsx)(n(859428).A,{placement:n(962730).W.Bottom,delayThreshold:300,renderTooltip:()=>(0,x.jsx)(w,{}),render:e=>(0,x.jsx)(n(704152).A,{ref:t,disallowTabbing:!0,onClick:()=>{if(!(0,y().EF)(p))return(0,y().QY)(p);T(p,o,(0,n(281322).r)().option?"above":"below")},style:A(o,p,m,a,d,c,j),ariaLabel:u.formatMessage(p.device.isApple?S.ariaLabelApple:S.ariaLabelWindows),...e,children:(0,n(689094).W)({width:16})})})}));function A(e,t,o,i,r,s,a){const l=(0,n(278014).qg)({marginItemType:"plus_button",store:e,environment:t,nodeRect:i,containerRect:r,selectable:s});return{display:"flex",alignItems:"center",justifyContent:"center",fill:o.icon.tertiary,position:"absolute",left:l,width:24,height:24,borderRadius:4,pointerEvents:"auto",...a?{}:{cursor:"-webkit-grab"}}}function w(){const e=(0,s().DP)(),t=(0,i().v3)(),n={color:e.text.contrastSecondary};return(0,x.jsxs)("div",{style:{textAlign:"center"},children:[(0,x.jsx)(l().sA,{defaultMessage:"Click <mediumcolor>to add below</mediumcolor>",id:"block.selectableAddMenu.tooltip.addBlockBelow",values:{mediumcolor:e=>(0,x.jsx)("span",{style:n,children:e})}}),(0,x.jsx)("div",{children:t.device.isApple?(0,x.jsx)(l().sA,{defaultMessage:"Option-click <mediumcolor>to add above</mediumcolor>",id:"block.selectableAddMenu.tooltip.addAbove",values:{mediumcolor:e=>(0,x.jsx)("span",{style:n,children:e})}}):(0,x.jsx)(l().sA,{defaultMessage:"Alt-click <mediumcolor>to add a block above</mediumcolor>",id:"block.selectableAddMenu.tooltip.addAbove.windows",values:{mediumcolor:e=>(0,x.jsx)("span",{style:n,children:e})}})})]})}function T(e,t,n){const o="above"===n,i=b().Uv.getMode(t),r=g().T.findSelectablesFromStore(t).find((e=>Boolean(e.props.onInsertRowBelow)));(0,p().fc)(t)||(o?r&&r.props.onInsertRowAbove?c().createAndCommit({userAction:"SelectableAddMenu.handleClick.onInsertRowBelow",environment:e,canUndo:!0,perform:e=>{r.props.onInsertRowAbove&&r.props.onInsertRowAbove({transaction:e})}}):c().createAndCommit({environment:e,userAction:"SelectableAddMenu.handleClick.addAbove",canUndo:!0,perform:n=>{const o=m().insertTextAbove({environment:e,blocks:[t],transaction:n,skipAnalytics:!0});if("suggest"===i&&o){const t=u().RR(e,n,o);u().tM(n,o,{id:a().JW(),type:"insert",discussionId:t.id}),u().c3({environment:e,transaction:n,discussionStore:t,addModifiedBlockIdsAfter:[o.id]})}}}):f().wm(t)?v().zz({environment:e,blockStore:t,insertedTextBlockLocation:"none"}):r&&r.props.onInsertRowBelow?c().createAndCommit({userAction:"SelectableAddMenu.handleClick.onInsertRowBelow",environment:e,canUndo:!0,perform:e=>{r.props.onInsertRowBelow&&r.props.onInsertRowBelow({transaction:e})}}):c().createAndCommit({environment:e,userAction:"SelectableAddMenu.handleClick.addBelow",canUndo:!0,perform:n=>{const o=m().insertTextBelow({environment:e,blocks:[t],transaction:n,skipAnalytics:!0});if("suggest"===i&&o){const t=u().RR(e,n,o);u().tM(n,o,{id:a().JW(),type:"insert",discussionId:t.id}),u().c3({environment:e,transaction:n,discussionStore:t,addModifiedBlockIdsAfter:[o.id]})}}}),function(e){(0,d().v)(e,"click_add_menu")}(e),h().default.reset())}},409268:(e,t,n)=>{"use strict";n.d(t,{s:()=>r});n(898992),n(672577);var o=n.n(n(791611)),i=()=>n(489348);function r(e){const t=i().A.find((t=>t.store===e));if(t){const e=t.getContentWrapEl();if(e)return o()(e.innerText)}return 0}},427636:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});n(296540);var o=n(474848);const i=function(e){const{botStore:t,avatarSize:i,shouldShowBadge:r,style:s,inline:a}=e,l=(0,n(959013).tz)(),d=(0,n(484714).Y0)(),c=(0,n(56366).K8)((()=>null==t?void 0:t.getDisplayName(l)),[t,l]),{outerStyle:u,avatarWrapStyle:m,badgeStyle:p}=(0,n(401497).IS)((e=>({outerStyle:{display:"flex",alignItems:"center",minWidth:0,...s},avatarWrapStyle:a?{width:"none",minHeight:"none",marginRight:6}:{marginRight:6},badgeStyle:{padding:"2px 6px",borderRadius:4,color:e.text.secondary,background:e.legacyDefaultSelectColor,fontSize:n(780054).A.isMobile?11:9,lineHeight:d.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",marginLeft:8,marginTop:1}})),[s,a,d]);return(0,o.jsxs)("div",{style:u,children:[(0,o.jsx)("div",{style:m,children:(0,o.jsx)(n(256863).A,{botStore:t,size:i})}),(0,o.jsx)("div",{style:{...n(284371).RC},children:c}),r&&(0,o.jsx)("div",{style:p,children:"Bot"})]})}},438632:(e,t,n)=>{"use strict";n.d(t,{PD:()=>c,cb:()=>d,yR:()=>u});n(16280),n(944114),n(898992),n(354520),n(803949),n(581454);var o=n.n(n(625473)),i=n.n(n(716471)),r=()=>n(496603),s=()=>n(534177),a=()=>n(634201),l=()=>n(919709);let d=function(e){return e[e.removed=-1]="removed",e[e.added=1]="added",e[e.same=0]="same",e}({});function c(e,t){const n=new(i())({timeout:2,editCost:6}),o=n.main(t,e);return n.cleanupSemantic(o),o}function u(e){const{before:t,after:n,isIncompleteAfter:i,insertCursor:u}=e,m={count:0,encoding:{},decoding:{},annotationEncoding:{},annotationDecoding:{}},p=e=>{const t=m.encoding[e];if(t)return t;{const t=String.fromCharCode(m.count);return m.count++,m.encoding[e]=t,m.decoding[t]=e,t}},f=e=>{const t=o()(e),n=m.annotationEncoding[t];if(n)return n;{const n=String.fromCharCode(m.count);return m.count++,m.annotationEncoding[t]=n,m.annotationDecoding[n]=e,n}},g=t=>r().Bq(l().RQ(t).map((t=>{let n=[];if("word"===e.mode||"wordUnderlineFinal"===e.mode){if("undefined"==typeof Intl||!Intl.Segmenter)throw new Error("Intl.Segmenter is not supported");{const e=new Intl.Segmenter(void 0,{granularity:"word"}).segment(t[0]);n=Array.from(e).map((e=>e.segment))}}else n=a().PE(t[0]);const o=n.map(p);if(l().qXl(t)){const e=l().uPN(t),n=l().jhx(e);n&&(o[0]=f({type:"mention",value:n}),e.forEach((e=>{l().iGj(e)||l().gir(e)||l().lfl(e)||(o.unshift(f({type:"start",value:e})),o.push(f({type:"end",value:e})))})))}else if(l().GiG(t)){const e=l().uPN(t),n=l().j1D(e);if(n){o[0]=f({type:"equation",value:n});for(const t of e)l().iGj(t)||l().gir(t)||l().lfl(t)||(o.unshift(f({type:"start",value:t})),o.push(f({type:"end",value:t})))}}else if(l().BEe(t)){l().uPN(t).forEach((e=>{o.unshift(f({type:"start",value:e})),o.push(f({type:"end",value:e}))}))}return o}))).join("");if(m.count>65535)throw new Error("This string has way too many different characters.");const v=c(g(n),g(t)),b=[];let h=[],y=0;const x=i?r().Kl(v,(e=>0===e[0]||1===e[0])):0;let S=!1;const C=e.insertionAnnotation,A=e.deletionAnnotation;return v.forEach((t=>{let[n,o]=t;o.split("").forEach((t=>{if(m.decoding[t]){const o=m.decoding[t];n===d.added?b.push([o,[...h,"wordUnderlineFinal"===e.mode?e.underlineAnnotation:C]]):n===d.removed&&(!i||y<=x)?"wordUnderlineFinal"!==e.mode&&b.push([o,[...h,A]]):(i&&u&&!S&&y===x+1&&(S=!0,b.push(["",[["tc"]]])),b.push([o,h]))}else{const o=m.annotationDecoding[t];if(n===d.added)if("mention"===o.type)b.push([l().Sj,[...h,"wordUnderlineFinal"===e.mode?e.underlineAnnotation:C,o.value]]);else if("start"===o.type)h=[...h,o.value];else if("end"===o.type)h=h.filter((e=>!r().n4(e,o.value)));else if("equation"===o.type){const e=l().U35(o.value),t=l().G0H(e,[...h,C]);b.push(t)}else(0,s().HB)(o);else if(n===d.removed){if("mention"===o.type)"wordUnderlineFinal"!==e.mode&&b.push([l().Sj,[...h,A,o.value]]);else if("equation"===o.type){const e=l().U35(o.value),t=l().G0H(e,[...h,A]);b.push(t)}}else if(n===d.same)if("mention"===o.type)b.push([l().Sj,[...h,o.value]]);else if("start"===o.type)h=[...h,o.value];else if("end"===o.type)h=h.filter((e=>!r().n4(e,o.value)));else if("equation"===o.type){const e=l().U35(o.value),t=l().G0H(e,h);b.push(t)}else(0,s().HB)(o)}})),i&&(y+=1)})),l().__s(b)}},442277:(e,t,n)=>{"use strict";n.d(t,{B:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("arrowRightSmaller",{viewBox:"0 0 16 16",directional:!0,svg:(0,o.jsx)("path",{d:"M15.383 8.352a.877.877 0 01-.274.64l-5.156 5.14a.864.864 0 01-.617.266.831.831 0 01-.602-.234.795.795 0 01-.234-.586c0-.12.02-.232.063-.336a.912.912 0 01.187-.273l1.75-1.766 2.914-2.656.274.5-2.711.156H1.484c-.26 0-.471-.078-.632-.234a.851.851 0 01-.235-.617c0-.256.078-.461.235-.618a.856.856 0 01.632-.242h9.493l2.71.164-.273.508L10.5 5.5 8.75 3.727a.946.946 0 01-.188-.266.917.917 0 01-.062-.344c0-.234.078-.43.234-.586a.831.831 0 01.602-.234.79.79 0 01.328.07c.104.047.203.117.297.211l5.148 5.133a.877.877 0 01.274.64z"})})},571400:(e,t,n)=>{"use strict";n.d(t,{t:()=>o});const o=35},654734:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var o=n(296540),i=()=>n(597777),r=()=>n(869190),s=()=>n(604995),a=()=>n(416504),l=n(474848);const d=function(e){const t=(0,n(959013).tz)(),d=(0,n(401497).DP)(),m=(0,n(396182).I)(),p=(0,o.useRef)(),f=(0,o.useCallback)((()=>{const t=e.value;if(!t)return;const o=s().q8(t,(0,a().P)());if(!o)return;const i=o.valueOf(),r=i-Date.now();r<0||r>n(720665).nD||p.current&&p.current.timestamp===i||(p.current&&clearTimeout(p.current.timer),p.current={timestamp:i,timer:setTimeout((()=>m("DateBox","DateBox/createReminderTimer")),r)})}),[m,e.value]),g=(0,o.useCallback)((()=>{p.current&&(clearTimeout(p.current.timer),p.current=void 0)}),[]);(0,o.useEffect)((()=>{f()}),[f]),(0,o.useEffect)((()=>()=>{g()}),[g]);const{value:v,withComma:b}=e,h=(0,n(56366).K8)((()=>v?(0,r().ZF)({value:v,date_format:e.dateFormat,time_format:e.timeFormat,userTimeZone:(0,a().P)(),allowRelativeDates:!0,intl:t,shortenDateAndRange:e.shortenDateAndRange,displayInUserTimezone:e.displayInUserTimezone,getToday:n(838924).x1}):void 0),[t,e.dateFormat,e.displayInUserTimezone,e.shortenDateAndRange,e.timeFormat,v]);if(!v)return null;const y=s().AA(v,(0,a().P)(),n(662303).locale);let x;if((0,i().Lh)(v)){const e=s().Zs(v,(0,a().P)());x=e?{color:d.errorText}:{color:n(381349).Ay.blue}}const S=(0,l.jsxs)(l.Fragment,{children:[h,(0,i().Lh)(v)&&(0,n(599987).P)({display:"inline-block",width:"1em",marginLeft:6,marginRight:2,paddingBottom:4,verticalAlign:"middle"}),b?", ":null]});return e.disableTooltip?(0,l.jsx)("div",{className:e.className,style:{...e.style,...x},children:S}):(0,l.jsx)(n(859428).A,{renderTooltip:()=>(0,l.jsxs)(l.Fragment,{children:[e.tooltipHeader,(0,l.jsxs)("div",{style:u(d,e.tooltipHeader),children:[c(y.start),y.end?` → ${c(y.end)}`:""]})]}),render:t=>(0,l.jsx)("div",{className:e.className,style:{...e.style,...x},...t,children:S}),placement:e.tooltipPlacement})};function c(e){return(0,r().eV)({value:e,preset:"medium"})}function u(e,t){return t?{color:e.text.contrastSecondary}:{}}},704907:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var o=n(296540),i=()=>n(56366),r=()=>n(433847),s=()=>n(959013),a=()=>n(901389),l=()=>n(579627),d=()=>n(247123),c=()=>n(878377),u=()=>n(108944),m=()=>n(125565),p=n(474848);const f=function(e){let{store:t}=e;const f=(0,n(401497).DP)(),g=(0,n(484714).v3)(),v=(0,o.useMemo)((()=>({environment:g,blocks:[t],publicEditMode:void 0})),[g,t]),b=(0,i().K8)((()=>c().Uo6([c().Ezz,c().AU6(c().p2L)])(v)),[v]),h=(0,i().K8)((()=>c().Uo6([c()._mr,c().AU6(c().Km9)])(v)),[v]);if(b){const{device:e}=g;return(0,p.jsx)("div",{style:{backgroundColor:f.sidebarSecondaryBackground,boxShadow:`0 -1px 0 ${f.regularDividerColor}`,marginTop:e.isMobile?28:1},children:(0,p.jsxs)(n(704152).A,{disabled:!h,style:{padding:12},onClick:()=>async function(e,t){if(!e.isDefined())return;const n=e.getPermissionItems(),o=u().KA(e),i=o?r().wD(u().E(o)):[],c=r().Cd(e.getModel(),n,i),m={type:"restore",permissionChanges:c},{accept:f}=await a().Gh({message:(0,d().r6)(m),acceptLabel:(0,d().QU)(m),cancelLabel:(0,p.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.actionButton.close",defaultMessage:"Close"}),description:(0,p.jsx)(d().f2,{openState:m})});f&&l().YD({environment:t,store:e})}(t,g),children:[(0,p.jsx)(m().A,{isMultiline:!0,isSmall:!0,children:(0,p.jsx)(s().sA,{id:"blockMenuRestrictedMessage.label",defaultMessage:"You don’t have permission to edit this block because it is restricted."})}),h?(0,p.jsx)(m().A,{style:{marginTop:6,fontWeight:n(284371).Wy.semibold},children:(0,p.jsx)(s().sA,{id:"blockMenuRestrictedMessage.adminRestoreAction.label",defaultMessage:"Restore permissions"})}):void 0]})})}return null}},706965:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});n(296540);var o=()=>n(56366),i=()=>n(401497),r=()=>n(764880),s=()=>n(310442),a=()=>n(824862),l=()=>n(798880),d=()=>n(959013),c=()=>n(534177),u=()=>n(284371),m=()=>n(43972),p=()=>n(972435),f=()=>n(907514),g=()=>n(646736),v=n(474848);function b(e){const{store:t}=e,n=(0,i().DP)(),b=(0,o().K8)((()=>t.getCreatedTime()),[t]),h=(0,o().K8)((()=>t.getLastEditedTime()),[t]),y=(0,o().K8)((()=>{const e=t.getCreatedByPointer();if(e)return(0,r().xC)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),x=(0,o().K8)((()=>{const e=t.getLastEditedByPointer();if(e)return(0,r().xC)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),S=(0,o().K8)((()=>{const e=t.getSpaceStore();if(!e)return!1;const n=null==y?void 0:y.asActor;if(!n)return!1;const o=n.table;switch(o){case l().oo:return(0,g().dp)(e,n.id).isMember();case a().GP:return(0,g().Ts)(e,n.id).isMember();case s().yj:return!1;default:(0,c().HB)(o)}}),[t,y]),C=b?(0,f().nl)(b,{useCompactFormat:!0,useLowercase:!0}):"",A=h?(0,f().nl)(h,{useLowercase:!0,useCompactFormat:!0}):"";if(!(h?(0,f().nl)(h,{useLowercase:!0,useCompactFormat:!0,roundDownYears:!0}):""))return null;const w={display:"flex",gap:4,color:n.text.contrastSecondary,height:16,fontSize:12},T={size:14,style:{marginRight:2}},k=p().A.getIntl();return(0,v.jsxs)(v.Fragment,{children:[(e=>{let t;if(null!=x&&x.asActor)t=(0,v.jsx)(d().sA,{defaultMessage:"Edited by {editor} {timestamp}",id:"pagePropertiesHeader.editedBy.label",values:{editor:(0,v.jsx)("span",{style:{fontWeight:u().Wy.medium,color:n.text.contrastPrimary},children:(0,v.jsxs)("span",{style:{display:"flex"},children:[!e&&(0,m().w)({actor:x,...T}),(0,r().lR)(k,x)]})}),timestamp:A}});else{if(!A)return;o=A,t=(0,v.jsx)(d().sA,{defaultMessage:"Edited {timestamp}",id:"pagePropertiesHeader.edited.label",values:{timestamp:o}})}var o;return(0,v.jsx)("div",{style:{...w,marginTop:3,marginBottom:3},children:t})})(e.compactFormat),(e=>{let t;if(null!=y&&y.asActor&&S)t=(0,v.jsx)(d().sA,{id:"pagePropertiesHeader.createdBy.label",defaultMessage:"Created by {creator} {timestamp}",values:{creator:(0,v.jsx)("span",{style:{fontWeight:u().Wy.medium,color:n.text.contrastPrimary},children:(0,v.jsxs)("span",{style:{display:"flex"},children:[!e&&(0,m().w)({actor:y,...T}),(0,r().lR)(k,y)]})}),timestamp:C}});else{if(!C)return;t=(0,v.jsx)(d().sA,{id:"pagePropertiesHeader.created.label",defaultMessage:"Created {timestamp}",values:{timestamp:C}})}return(0,v.jsx)("div",{style:{...w,marginBottom:4},children:t})})(e.compactFormat)]})}},715011:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var o=n(296540),i=()=>n(959013),r=()=>n(409268),s=n(474848);function a(e){const t=(0,o.useMemo)((()=>(0,r().s)(e.store)),[e.store]);return(0,s.jsx)(i().sA,{id:"pageWordCount.wordCount",defaultMessage:"{count, plural, one {# word} other {# words}}",values:{count:t}})}},735790:(e,t,n)=>{"use strict";n.d(t,{M:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.25 15.25 11.5",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M3 7.375h6.829a2.501 2.501 0 0 0 4.842 0H17a.625.625 0 1 0 0-1.25h-2.329a2.501 2.501 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25M12.25 5.5a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5"}),(0,o.jsx)("path",{fillRule:"evenodd",d:"M7.75 15.75a2.5 2.5 0 0 0 2.421-1.875H17a.625.625 0 1 0 0-1.25h-6.829a2.5 2.5 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25h2.329A2.5 2.5 0 0 0 7.75 15.75m0-1.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})]})},r=(0,n(340498).wt)("sliders",i)},737517:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var o=n(296540),i=()=>n(484714),r=()=>n(56366);function s(e,t){(0,n(679924).v)(e,"click_selection_menu",{block_type:t.blockType})}var a=()=>n(406699),l=()=>n(574012),d=()=>n(871399),c=()=>n(444570),u=()=>n(327994),m=(n(898992),n(354520),()=>n(959013)),p=()=>n(795168),f=()=>n(419357),g=()=>n(89924),v=()=>n(962036),b=()=>n(722872),h=()=>n(836251),y=()=>n(502438),x=n(474848);const S=(0,m().YK)({filterActions:{defaultMessage:"Search actions…",id:"selectableHoverMenu.filterActions.placeholder"}});function C(e){const{hasEditorPermissions:t,isWorkspaceAdmin:s,store:a,onDismiss:l,containerRef:d,query:c,setQuery:u}=e,m=(0,i().v3)(),f=(0,i().WS)(),g=(0,r().K8)((()=>y().default.state.stores),[]),v=(0,r().K8)((()=>{var e;return{environment:m,blocks:y().default.state.stores.length?y().default.state.stores:[a],originRect:null===(e=d.current)||void 0===e?void 0:e.getBoundingClientRect(),publicEditMode:void 0,analyticsFrom:"selection_menu"}}),[m,a,d]),h=(0,r().K8)((()=>a.isNavigableAncestorNonEditableState()),[a]),S=(0,r().K8)((()=>(0,n(478726).yU)(a)),[a]),[C,T]=(0,n(857437).$)(),k=(0,o.useCallback)((e=>{const t=g[0];if(t){const o=t.getType();if(o){const i=(0,n(799832).U)(t),r=(0,n(476492).sl)(i)||{};(0,n(741496).N)(m,{analyticsName:e.analyticsName,action_type:e.analyticsActionType,from:"selection_menu",block_id:t.id,block_type:o,is_toggleable:(0,n(494043).Yt)(o,t.getFormat()),parent_collection_id:t.getParentCollectionIdUpToTwoLevels(),...r})}}e.closeParentMenu&&l()}),[m,l,g]),B=(0,r().K8)((()=>a.isCollectionView()),[a]),M=(0,n(891078).i0)(a),R=!f&&t&&!h&&!S&&!M,j=R&&(0,x.jsx)(A,{filter:c,setQuery:u,inputComboboxProps:C});let _;_=f?{menuType:b().gu.ActionSheet,header:j}:{menuType:b().gu.Popup,width:265,header:j};const P=(0,r().K8)((()=>void 0!==a.getAssociatedCollectionStore()),[a]);return(0,x.jsxs)(n(928600).A,{..._,children:[(0,x.jsx)(n(452558).A,{filter:c,initialFocus:c?0:void 0,sections:P?p().SH:p().JS,context:v,onAccept:k,comboboxProps:R?T:void 0,shouldShowBlockTypeTitle:!0}),c||!t&&!s?void 0:(0,x.jsx)(n(819493).$,{store:a,wordCountStores:g,isPageMoreButton:!1,hideTopBorder:!1}),c?void 0:(0,x.jsx)(n(704907).A,{store:a}),!c&&B?(0,x.jsx)(w,{}):void 0]})}function A(e){const{filter:t,setQuery:n,inputComboboxProps:o}=e,r=(0,i().Y0)(),s=(0,m().tz)();return(0,x.jsx)(g().A,{isInput:!0,children:(0,x.jsx)(f().Ay,{value:t,onChange:e=>n(e.target.value),focus:!r.isMobile||void 0,focusAfterAnimation:!0,placeholder:s.formatMessage(S.filterActions),preventCaptureDeleteWhenEmpty:!0,preventCaptureClipboardShortcuts:!0,preventCaptureSpacebarWhenEmpty:!0,...o})})}function w(){return(0,x.jsx)(g().A,{topBorder:!0,children:(0,x.jsx)(v().A,{title:(0,x.jsx)(m().sA,{defaultMessage:"Learn about databases",id:"blocks.hoverBlockMenu.collectionHelpButton"}),href:(0,h().xS)("guides.database"),analyticsFrom:"selectable_hover_menu"})})}const T=(0,o.forwardRef)((function(e,t){const{selectable:m,store:p,disableDrag:f,isWorkspaceAdmin:g,nodeRect:v,containerRect:b}=e,h=(0,i().v3)(),y=(0,i().WS)(),S=(0,n(792485).S)(),[A,w]=(0,o.useState)(!1),T=(0,o.useRef)(null),k=(0,c().Jj)(),B=(0,r().K8)((()=>(0,c().zb)()),[]),M=u().jK,R=(0,r().K8)((()=>(0,n(278014).qg)({marginItemType:"drag_handle",store:p,environment:h,nodeRect:v,containerRect:b,selectable:m})),[p,h,v,b,m]),j=(0,r().K8)((()=>p.isNavigableAncestorNonEditableState()&&!p.isInsideCollection()),[p]),_=(0,r().K8)((()=>{var e;return"editor"===p.getRole()||"read_and_write"===p.getRole()||"edit"===(null==S||null===(e=S.publicEditModeStore.state)||void 0===e?void 0:e.permission)}),[null==S?void 0:S.publicEditModeStore,p]),P=(0,r().K8)((()=>"suggest"===n(77246).Uv.getMode(p)),[p]),I=!f&&_&&!j&&!P,E=(0,n(401497).IS)((e=>({div:{position:"absolute",left:R,width:B,height:M,pointerEvents:"auto",cursor:I?"-webkit-grab":void 0},popup:{width:265,overflow:"hidden"},iconStyle:k?(0,u().Cz)(e,A):{}})),[R,B,M,I,k,A]),[H,K]=(0,o.useState)(""),D=(0,r().K8)((()=>{const e=d().default.state;return e.isOpen&&e.menuIsOpen&&e.currentStore===p}),[p]);(0,o.useEffect)((()=>()=>{D&&d().default.reset()}),[]);const F=(0,o.useCallback)((()=>{const e=d().default.state,t=l().A.state;if(e.isOpen){K(""),y&&t.phase===l().i.shown?l().A.onHide((()=>d().default.setState({...e,menuIsOpen:!0}))):d().default.setState({...e,menuIsOpen:!0}),n(778417).Lt({environment:h,store:p});const o=p.getType();o&&s(h,{blockType:o})}}),[h,y,p]),L=(0,o.useCallback)((()=>d().default.reset()),[]);return(0,r().K8)((()=>{if(!m||!m.props.shouldShowHoverMenu||y)return!1;const e=p.getType();return!e||!["column_list"].includes(e)}),[p,m,y])?(0,x.jsx)("div",{style:E.div,ref:T,children:(0,x.jsx)(n(897119).Ay,{popupType:y?a().z7.SlideUp:a().z7.Popup,open:D,placementToOrigin:a().sx.Left,alignmentToOrigin:a().yP.Center,onDismiss:L,originGap:5,forceInitialInbound:!0,style:E.popup,render:()=>(0,x.jsx)(C,{hasEditorPermissions:_,isWorkspaceAdmin:g,store:p,onDismiss:L,containerRef:T,query:H,setQuery:K}),origin:(0,x.jsx)(n(199896).Ay,{className:n(38337).LpV,store:p,isHoverMenu:!0,canDrag:I,canSelect:!1,analyticsName:"selection_menu",disableForceTouch:!0,disableHorizontalDragEdgeScroll:!0,onMouseEnter:()=>{w(!0)},onMouseLeave:()=>{w(!1)},children:(0,x.jsx)(n(348501).A,{ref:t,width:B,height:M,disallowTabbing:!0,onClick:F,disableDrag:!I,iconStyle:E.iconStyle})}),trapFocus:D})}):null}))},791611:e=>{var t=/[a-zA-Z0-9_\u0392-\u03c9\u00c0-\u00ff\u0600-\u06ff]+|[\u4e00-\u9fff\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g;e.exports=function(e){var n=e.match(t),o=0;if(!n)return 0;for(var i=0;i<n.length;i++)n[i].charCodeAt(0)>=19968?o+=n[i].length:o+=1;return o}},819493:(e,t,n)=>{"use strict";n.d(t,{$:()=>k,b:()=>B});n(898992),n(908872),n(296540);var o=()=>n(662303),i=()=>n(484714),r=()=>n(56366),s=()=>n(401497),a=()=>n(764880),l=()=>n(869190),d=()=>n(959013),c=()=>n(777092),u=()=>n(921855),m=()=>n(972435),p=()=>n(963589),f=()=>n(154060),g=()=>n(303742),v=()=>n(311337),b=()=>n(962730),h=()=>n(765957),y=()=>n(706965),x=()=>n(678553),S=()=>n(89924),C=()=>n(859428),A=()=>n(125565),w=()=>n(715011),T=n(474848);function k(e){let{isPageMoreButton:t,hideTopBorder:n,store:o,wordCountStores:l,showWordCount:c}=e;const u=(0,r().K8)((()=>B(o)),[o]),{device:p}=(0,i().v3)(),k=(0,r().K8)((()=>p.isPhone),[p]),R=m().A.getIntl(),j=(0,i().v3)(),_=(0,s().IS)((()=>({menuItem:{paddingTop:k?8:n?0:6,paddingBottom:k?8:16}})),[n,k]);return(0,r().K8)((()=>{var e;const t=(0,f().A)(j)&&o.getSpaceId()!==(null===(e=h().default.state.currentSpaceStore)||void 0===e?void 0:e.id);return(0,v().y)(j)||t||(0,g().o)(h().default.state.currentSpaceStore)}),[j,o])||u&&!u.canAccess?null:(0,T.jsx)(S().A,{topBorder:!t&&!n,style:{paddingTop:t?0:8,paddingBottom:t?0:8},children:(0,T.jsx)(x().Ay,{style:u?void 0:_.menuItem,shouldWrapTitle:!0,title:u?(0,T.jsx)(C().A,{placement:b().W.Right,render:e=>(0,T.jsxs)("div",{...e,children:[c?(0,T.jsx)(A().A,{isSmall:!0,isSecondaryColor:!0,isMobile:p.isPhone,isMultiline:!0,style:{marginBottom:4,marginTop:8},children:(0,T.jsx)(d().sA,{id:"pageMoreButton.wordCount.caption",defaultMessage:"Word count: {count}",values:{count:(0,T.jsx)(w().A,{store:o})}})}):void 0,l?(0,T.jsx)(M,{stores:l}):void 0,(0,T.jsx)(A().A,{isSmall:!0,isSecondaryColor:!0,isMobile:p.isPhone,isMultiline:!0,style:{marginBottom:4},children:(0,T.jsx)(d().sA,{id:"blockAuthorInfo.label",defaultMessage:"Last edited by {author}",values:{author:u.lastEditedBy.asActor?(0,a().lR)(R,u.lastEditedBy):void 0}})}),(0,T.jsx)(A().A,{isSmall:!0,isSecondaryColor:!0,isMobile:p.isPhone,style:{marginBottom:c?8:0},children:u.lastEditedTime})]}),renderTooltip:()=>(0,T.jsx)(y().A,{store:o,compactFormat:!0})}):void 0,loading:!u})})}function B(e){const t=e.getCreatedByPointer(),n=e.getCreatedTime(),i=e.getLastEditedByPointer(),r=e.getLastEditedTime(),s=m().A.getIntl();if(!e.canRead())return{canAccess:!1};if(t&&n&&r&&i){const a=(0,c().vt)({parentStore:e,pointer:t}),d=(0,l().jE)(n,o().locale,s),u=(0,c().vt)({parentStore:e,pointer:i}),m=(0,l().jE)(r,o().locale,s);if(!u)return;return{canAccess:!0,createdBy:a,createdTime:d,lastEditedBy:u,lastEditedTime:m}}}function M(e){const{stores:t}=e,n=(0,p().X)("selectable_word_count"),o=(0,r().K8)((()=>n?R(t):0),[n,t]);return n?(0,T.jsx)(A().A,{isSmall:!0,isSecondaryColor:!0,style:{marginBottom:4},children:(0,T.jsx)(d().sA,{id:"blockMetadataMenuItem.wordCount",defaultMessage:"{count, plural, one {# word} other {# words}}",values:{count:o}})}):null}function R(e){return e.reduce(((e,t)=>{const n=(0,u().r4)(t.getTitleValue(),t);return e+(0,u().sQ)(n)+R(t.getContentStores())}),0)}},973454:(e,t,n)=>{"use strict";n.d(t,{p:()=>l,A:()=>d});var o=n(296540),i=()=>n(615234);const r=24*i().pT;function s(e){return a(e).status}function a(e){if(null==e||!e.enabled)return{status:"disabled"};const t=e.start_ts?1e3*e.start_ts-Date.now():0;return t<=0?{status:"active"}:t<=r?{status:"warning",nextUpdateInMs:t}:{status:"scheduled",nextUpdateInMs:t-r}}function l(e){const[t,n]=(0,o.useState)((()=>s(e)));return(0,o.useEffect)((()=>{if(null==e||!e.enabled)return;let t;return function o(){t=void 0;const{status:i,nextUpdateInMs:r}=a(e);n(i),r&&(t=setTimeout(o,r))}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[e]),t}function d(e){const[t,n]=(0,o.useState)((()=>Date.now())),r=(null==e?void 0:e.enabled)&&e.start_ts;return(0,o.useEffect)((()=>{if("number"!=typeof r)return;const e=r;let t;return function o(){const r=Date.now();n(r);const s=e*i().TD-r;if(s>0){const e=s%i().Xb,n=0===e?i().Xb:e;t=setTimeout(o,n)}else t=void 0}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[r]),{freezeStatus:s(e),minUntilFreeze:r?Math.floor((r*i().TD-t)/i().Xb):void 0}}}}]);