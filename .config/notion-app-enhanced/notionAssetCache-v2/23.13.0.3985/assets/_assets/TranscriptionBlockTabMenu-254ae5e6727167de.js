"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[42704],{213:(e,t,n)=>{n.r(t),n.d(t,{TranscriptionBlockTabMenu:()=>L});n(944114);var a=n(296540),o=()=>n(484714),i=()=>n(764781),s=()=>n(822639),r=()=>n(742852),l=()=>n(959013),c=()=>n(884107),d=()=>n(760217),p=()=>n(928600),u=()=>n(939740),b=()=>n(8980),m=()=>n(89924),g=()=>n(722872),y=(n(898992),n(823215),n(354520),n(581454),()=>n(857639)),f=()=>n(919709),T=()=>n(534177),k=()=>n(436572),M=()=>n(725614),h=()=>n(659602),C=()=>n(862292),w=()=>n(951177),v=()=>n(972435),B=()=>n(969197),x=()=>n(24157);const S=(0,l().YK)({copiedTabContents:{id:"transcriptionBlockCopyActions.copyTabContents.toast.success",defaultMessage:"Copied blocks in tab to clipboard"},failedToCopyTabContents:{id:"transcriptionBlockCopyActions.copyTabContents.toast.failure",defaultMessage:"Weâ€™re unable to copy tab contents"},emptyTabContents:{id:"transcriptionBlockCopyActions.copyTabContents.toast.empty",defaultMessage:"Nothing to copy"}});var A=()=>n(827326),D=()=>n(353890),j=n(474848);function L(e){const{tabStore:t,tabType:n,selected:L,onClose:I}=e,{store:z,canEdit:V}=(0,D().s)(),F=(0,o().v3)(),H=(0,l().tz)(),O=(0,a.useMemo)((()=>{const e=[];return L&&e.push({key:"copy-contents",render:e=>(0,j.jsx)(d().A,{...e,icon:(0,i().V)({height:20,width:20}),title:(0,j.jsx)(l().sA,{id:"transcriptionBlock.tabMenu.copyContents.label",defaultMessage:"Copy contents"})}),action:()=>{!async function(e){const{environment:t,tabStore:n}=e,a=n.getContentStores();if(a.length<1)return;const o=a.map(B().aI).filter(T().O9);if(o.every((e=>{const t=e.getValue();return!t||0===(0,f().AhH)(t)}))||o.length<1)return void k().D6({label:v().A.formatMessage(S.emptyTabContents)});function i(t){y().log({level:"warning",from:"transcriptionBlockCopyActions",type:t,data:{miscDataToConvertToString:{rootBlockId:e.tabStore.getParentId(),tabBlockId:e.tabStore.id}}}),k().D6({label:v().A.formatMessage(S.failedToCopyTabContents)})}M().setMultiSelection({multiSelection:{start:{store:o[0],index:0},end:{store:o[o.length-1],index:1/0}},readOnly:!0});const s="empty"!==x().default.state.mode&&x().default.state.multiSelection;if(!s)return void i("copyTabContents:missingMultiSelection");const r=await c().R.clipboardActions.load(),l=r.serializeMultiTextSelectionToClipboardData({environment:t,multiSelection:s,action:"copy"});if(!l)return void i("copyTabContents:failedToSerializeToClipboardData");const d=await h().g.load(),p=await C().T.formulas.load(),{markdown:u,html:b}=(0,w().Ij)({clipboardData:l,multiSelection:s,currentUserId:t.currentUser.id,isWindows:t.device.isWindows,markdownLinkifyIt:d,formulasModule:p});b||u?r.copyString({environment:t,stringValue:u,htmlValue:b,copiedMessage:S.copiedTabContents}):i("copyTabContents:failedToSerializeToMarkdown")}({environment:F,tabStore:t}),I()}}),e.push({key:"copy-link",render:e=>(0,j.jsx)(d().A,{...e,icon:(0,r().w)({height:20,width:20}),title:(0,j.jsx)(l().sA,{id:"transcriptionBlock.tabMenu.copyTabLink.label",defaultMessage:"Copy link to tab"})}),action:async()=>{try{(await c().R.clipboardActions.load()).copyLinkToBlock({environment:F,blockStore:t})}finally{I()}}}),"transcript"===n&&V&&e.push({key:"delete-transcript",render:e=>(0,j.jsx)(d().A,{...e,icon:(0,j.jsx)(b().I,{icon:s().l}),isRedOnHover:!0,title:(0,j.jsx)(l().sA,{id:"transcriptionBlock.tabMenu.transcript.delete.label",defaultMessage:"Delete transcript"})}),action:async()=>{await(0,A().L)({environment:F,intl:H,store:z}),I()}}),e}),[F,H,z,t,n,V,L,I]);return(0,j.jsx)(p().A,{menuType:g().gu.Popup,children:(0,j.jsx)(u().Ay,{type:u().Oh.Vertical,initialFocus:0,style:{minWidth:220},sections:[{key:"tab-menu",render:e=>(0,j.jsx)(m().A,{...e,topBorder:!1}),items:O}]})})}},822639:(e,t,n)=>{n.d(t,{l:()=>o});n(296540);const a={viewBox:"0 0 20 20",fittedViewBox:"1.6 2.52 16.8 14.96",svg:(0,n(474848).jsx)("path",{d:"M8.256 3.424a2.86 2.86 0 0 1 4.107-.062l2.985 2.985a2.86 2.86 0 0 1 .06 3.984L9.86 16.226h2.84a.625.625 0 1 1 0 1.25H7.625q-.03 0-.058-.002a2.85 2.85 0 0 1-2.143-.836L2.44 13.653a2.86 2.86 0 0 1-.06-3.984zm3.223.822a1.61 1.61 0 0 0-2.313.035L4.794 8.926l5.384 5.139 4.32-4.59a1.61 1.61 0 0 0-.034-2.244zm-2.055 10.62L4.04 9.727l-.751.799a1.61 1.61 0 0 0 .034 2.243l2.985 2.985a1.61 1.61 0 0 0 2.312-.035zm5.813 1.36a.625.625 0 1 0 0 1.25h2.537a.625.625 0 1 0 0-1.25z"})},o=(0,n(340498).wt)("eraserLineDashed",a)},827326:(e,t,n)=>{n.d(t,{L:()=>l});const a=(0,n(583835).Dv)("expungeTranscriptData");var o=()=>n(901389),i=()=>n(357625),s=()=>n(436572);const r=(0,n(959013).YK)({deletionFailed:{id:"transcriptionBlock.tabMenu.transcript.delete.deletionFailed",defaultMessage:"Something went wrong while deleting the transcript."}});async function l(e){const{environment:t,store:n,intl:l}=e,{accept:c}=await o().Gh({message:l.formatMessage({id:"transcriptionBlock.transcript.deleteHeader.label",defaultMessage:"Permanently delete transcript"}),description:l.formatMessage({id:"transcriptionBlock.tabMenu.transcript.delete.description",defaultMessage:"This will delete the transcript from the page and all versions containing the block from version history."}),acceptLabel:l.formatMessage({id:"transcriptionBlock.tabMenu.transcript.delete.accept",defaultMessage:"Delete"}),acceptButtonType:"solid",acceptColor:"red",cancelLabel:l.formatMessage({id:"transcriptionBlock.tabMenu.transcript.delete.cancel",defaultMessage:"Cancel"}),mode:"normal"});if(!c)return;const d=n.pointer.spaceId;if(!d)return;s().D6({label:l.formatMessage({id:"transcriptionBlock.tabMenu.transcript.delete.deleting",defaultMessage:"Deleting transcript..."}),durationMs:"keep"});const{value:p}=await(0,i().UT)(t,a,{transcriptionBlockPointer:{...n.pointer,spaceId:d},deletionTimeRange:{startTime:n.getCreatedTime(),endTime:Date.now()}},{spaceIds:[]}).next();s().N2(),p.error&&s().D6({label:l.formatMessage(r.deletionFailed)})}}}]);