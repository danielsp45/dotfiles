"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[35756],{94778:(e,t,o)=>{o.d(t,{A:()=>s});o(296540);var n=()=>o(401497),i=()=>o(575157),r=()=>o(959013),l=()=>o(760217),a=()=>o(8980),c=o(474848);function s(e){const{collectionContextStore:t,onClick:o,isCompact:s,compactColor:d="primary",...u}=e,p=(0,n().IS)((e=>({compactFormButton:{color:"secondary"===d?e.text.secondary:void 0,display:"flex",flexDirection:"row"}})),[d]),w=(0,c.jsx)(l().A,{..."menuItem"===u.type?u:{focused:!1},onClick:o,title:(0,c.jsx)("div",{style:p.compactFormButton,children:(0,c.jsx)(r().sA,{defaultMessage:"Form",id:"database.collectionViewSelect.newFormButtonTitle"})}),style:{padding:"1 0"},icon:(0,c.jsx)(a().I,{icon:i().D,color:d})}),v=(0,c.jsx)(l().A,{..."menuItem"===u.type?{...u,onClick:o}:{focused:!1,onClick:o},title:(0,c.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:(0,c.jsx)(r().sA,{defaultMessage:"Form",id:"CollectionViewTabBar.newFormItem.title"})}),icon:(0,c.jsx)(a().I,{icon:i().D}),shouldWrapCaption:!0,caption:(0,c.jsx)(r().sA,{defaultMessage:"Create a form to input data directly into this database",id:"CollectionViewTabBar.newFormItem.description"})});return s?w:v}},445689:(e,t,o)=>{o.r(t),o.d(t,{CollectionViewSelect:()=>q});o(898992),o(354520),o(581454);var n=o(296540),i=()=>o(484714),r=()=>o(56366),l=()=>o(959013),a=()=>o(496603),c=()=>o(430923),s=()=>o(751156),d=()=>o(94778),u=()=>o(274652),p=()=>o(736767),w=()=>o(406699),v=()=>o(439264),g=()=>o(939740),f=()=>o(897119),S=()=>o(89924),m=()=>o(152077),C=()=>o(186445),x=()=>o(722872),b=()=>o(553965),y=()=>o(621866),h=()=>o(463830),V=()=>o(92253),j=()=>o(519839),k=()=>o(401497),A=()=>o(126617),B=()=>o(340498),T=()=>o(760217),I=()=>o(285790),O=()=>o(859428),M=()=>o(780054),N=()=>o(852353),P=()=>o(697650),D=()=>o(673730),F=()=>o(962730),_=()=>o(745266),E=()=>o(31902),R=()=>o(454869),W=o(474848);function K(e){const{collectionContextStore:t,collectionViewStore:o,menuListItemProps:i,onClose:a}=e,c=(0,k().IS)((e=>({tooltipMessage:{color:e.text.contrastSecondary}})),[]),s=(0,l().tz)(),d=(0,r().uB)(void 0,h().A),u=(0,m().WA)(),[p,v,g,f,S,C]=(0,r().K8)((()=>[o.getName(),o.getType(),o.getFormat().collection_view_icon,o.getFormat().description,o.getCollectionStore(),t.permissionScopesStore.state.canConfigureBlock&&!u]),[o,t,u]),x=(0,P().xf)(S),y=(0,n.useCallback)((e=>{d.setState({open:!1}),e&&a()}),[d,a]),{renderMenu:V}=(0,R().y)({collectionViewStore:o,collectionContextStore:t,onClose:y});return void 0===v?null:(0,W.jsx)(O().A,{renderTooltip:e=>(0,W.jsxs)("div",{...e,style:D().Q$,children:[(0,W.jsx)("div",{children:(0,j().OO)({collectionViewName:p,collectionViewType:v})}),void 0!==S&&(0,W.jsx)("div",{style:c.tooltipMessage,children:f||(0,W.jsx)(l().sA,{defaultMessage:"{viewType, select, Table {Table view of {collection}} Board {Board view of {collection}} Timeline {Timeline view of {collection}} Calendar {Calendar view of {collection}} List {List view of {collection}} Gallery {Gallery view of {collection}} Form {Form} Chart {Chart view of {collection}} other {collection}}",id:"collectionTabBar.viewTab.tooltip",values:{viewType:N().to[v],collection:x}})})]}),placement:F().W.Left,render:e=>(0,W.jsx)(T().A,{title:(0,W.jsx)(E().A,{collectionViewType:v,collectionViewName:p}),icon:(0,W.jsx)(_().h,{color:"regular",viewIcon:g,viewType:v}),showDragHandle:!M().A.isMobile&&C,right:C?(0,W.jsx)(w().Ay,{popupType:M().A.isMobile?w().z7.BottomSheet:w().z7.Popup,renderOrigin:e=>(0,W.jsx)(I().A,{icon:A().Y,iconStyle:{width:B().Ev.sm,height:B().Ev.sm},ariaLabel:s.formatMessage({id:"collectionViewSelectItem.viewSettings.ariaLabel",defaultMessage:"Database view settings"}),...e}),render:V,buttonPopupStore:d}):null,rightStyle:{marginRight:8},...(0,b().A)(e,i)})})}function L(e){const{collectionContextStore:t,onAddViewClick:s,onClose:v,onViewClick:C}=e,y=(0,l().tz)(),V=(0,i().v3)(),k=(0,i().Y0)(),[A,B]=n.useState(0),[T,I]=n.useState(""),[O,M]=(0,o(857437).$)(),N=(0,o(46986).Y4)(),P=(0,r().uB)(void 0,h().A),D=(0,r().uB)(void 0,o(970585).A),F=(0,m().WA)(),_=(0,r().K8)((()=>{var e;return!(k.isPhone||null!==(e=t.collectionViewBlockStore())&&void 0!==e&&e.isCollectionViewPageWithContent()||F)}),[t,k.isPhone,F]),E=(0,r().K8)((()=>{var e;return((null===(e=t.collectionViewBlockStore())||void 0===e?void 0:e.getCollectionViewStores())??[]).filter((e=>(0,j().As)(e,T)))}),[t,T]),R=(0,r().K8)((()=>t.permissionScopesStore.state.canConfigureBlock&&!F),[t,F]),K=!k.isPhone&&R&&""===T,L=(0,r().K8)((()=>!(0,j().NB)(t,k)),[t,k]),q=n.useCallback((e=>{I(e.target.value),D.setState({...D.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}),[D]),Q=n.useCallback(((e,n)=>{const i=t.collectionViewStore(),r=o(728611).Vr(e);i&&C({currentCollectionViewStore:i,newCollectionViewStore:n,openInNew:r});const l=t.isFullScreenStore.state,a=t.isRootChildStore.state,c=t.isInPeekRendererStore.state;(0,o(180762).t)({environment:V,collectionContextStore:t,collectionViewId:n.id,openInNew:r,isFullScreen:l,isRootChild:a,isInPeekRenderer:c}),(0,o(436696).X)({environment:V,collectionContextStore:t,action:"click_view_in_dropdown",new_view_type:n.getType(),new_view_id:n.id}),r||v()}),[t,V,C,v]);n.useEffect((()=>{var e,o;const n=null===(e=t.collectionViewStore())||void 0===e?void 0:e.id,i=((null===(o=t.collectionViewBlockStore())||void 0===o?void 0:o.getCollectionViewStores())||[]).findIndex((e=>e.id===n));i>=0&&B(i)}),[t]);const $=E.map((e=>({key:e.id,render:o=>(0,W.jsx)(G,{collectionContextStore:t,onClose:v,collectionViewStore:e,props:o}),action:t=>{let{event:o}=t;Q(o,e)}}))),X=E.length>0?{key:"views",render:e=>(0,W.jsx)(H,{menuListSectionProps:e,collectionContextStore:t,filteredViewStores:E,isDraggable:K,menuListStore:D}),items:$}:void 0,J=T&&0===E.length&&N?{key:"noResults",render:e=>(0,W.jsx)(S().A,{...e}),items:[{key:"noResults",action:()=>{},render:e=>(0,W.jsx)(p().A,{caption:(0,W.jsx)(l().sA,{defaultMessage:"No results",id:"database.collectionViewSelect.noResultsTitle"})})}]}:void 0,Z=(0,r().K8)((()=>(!k.isPhone||N)&&Y(t)),[t,k.isPhone,N]),ee=(0,o(914873).e)({collectionContextStore:t,environment:V}),te=(0,o(818870).Q)({collectionContextStore:t,environment:V,from:"addNewDatabaseButtonInViewOverflowMenu",onAction:v}),oe=(0,o(670495).L)({environment:V,collectionContextStore:t,onAddNewFormClick:v,from:"addFormButtonInViewOverflowMenu"})??(()=>{}),ne=(0,a().oE)([Z?{key:"newView",action:()=>P.setState({open:!0}),render:e=>(0,W.jsx)(o(811979).A,{...e,buttonPopupStore:P,popupType:V.device.isPhone?f().nl.BottomSheet:f().nl.Popup,bottomSheetInitialState:"half",alignmentToOrigin:w().yP.Center,placementToOrigin:w().sx.Right,renderOrigin:t=>(0,W.jsx)(u().o,{...(0,b().A)(t,e),color:"primary",title:(0,W.jsx)(l().sA,{defaultMessage:"New view",id:"database.collectionViewSelect.newViewButtonTitle"})}),render:e=>(0,W.jsx)(c().y7,{collectionContextStore:t,onClose:()=>{v(),e.close()},forceHideAdvancedConfigItems:!0})})}:void 0,L?{key:"newFormView",action:oe,render:e=>(0,W.jsx)(d().A,{collectionContextStore:t,isCompact:!0,type:"menuItem",...e})}:void 0,te,ee]),ie=N&&R&&ne.length>0?{key:"config",render:e=>(0,W.jsx)(S().A,{topBorder:!0,...e}),items:ne}:void 0;return(0,W.jsx)(o(297872).A,{capture:!0,allowEsc:!0,render:e=>{let n;return n=k.isPhone?{menuType:x().gu.Modal,title:(0,W.jsx)(z,{collectionContextStore:t}),right:(0,W.jsx)(o(480095).DoneMenuText,{}),onClickRight:v}:{menuType:x().gu.Popup,minWidth:290,maxWidth:320,maxHeight:"50vh"},(0,W.jsxs)(o(928600).A,{...n,...e,header:_?(0,W.jsx)(S().A,{disableDesktopPadding:!0,children:(0,W.jsx)(o(419357).Ay,{value:T,focus:!k.isPhone,style:{marginTop:8,marginBottom:4},textWrapperStyle:{marginLeft:8,marginRight:8},onChange:q,placeholder:y.formatMessage({defaultMessage:"Search for a view...",id:"collectionViewSelect.viewSearch.label"}),...O})}):null,footer:R&&!N&&(Z||L)&&(0,W.jsxs)(S().A,{topBorder:!0,children:[Z&&(0,W.jsx)(U,{collectionContextStore:t,onClose:v,onAddViewClick:s}),L&&(0,W.jsx)(d().A,{collectionContextStore:t,isCompact:!0,compactColor:"secondary",type:"button",onClick:oe})]}),children:[(0,W.jsx)(g().Ay,{type:g().Oh.Vertical,initialFocus:A,sections:(0,a().oE)([X,J,ie]),store:D,comboboxProps:M}),N?null:(0,W.jsxs)(W.Fragment,{children:[T&&0===E.length&&(0,W.jsx)(p().A,{caption:(0,W.jsx)(l().sA,{defaultMessage:"No results",id:"database.collectionViewSelect.noResultsTitle"})}),k.isPhone?(0,W.jsx)(U,{collectionContextStore:t,onClose:v,onAddViewClick:s}):null]})]})}})}const q=n.memo(L);function z(e){let{collectionContextStore:t}=e;const o=(0,r().K8)((()=>{var e;return(null===(e=t.collectionViewBlockStore())||void 0===e?void 0:e.getCollectionViewStores())||[]}),[t]);return(0,W.jsx)(l().sA,{defaultMessage:"{numberOfViews, plural, one {{numberOfViews} view} other {{numberOfViews} views}}",id:"database.mobileSelectViewMenu.title",values:{numberOfViews:o.length}})}function H(e){const t=(0,i().v3)(),o=(0,r().K8)((()=>e.filteredViewStores.map((e=>e.id))),[e.filteredViewStores]),l=n.useCallback(((o,n)=>{const i=e.collectionContextStore.collectionViewBlockStore();i&&(s().createAndCommit({userAction:"CollectionViewSelect2.handleViewsDrop",environment:t,canUndo:!0,perform:e=>{(0,V().i)({collectionViewBlockStore:i,newViewIds:o,transaction:e})}}),e.menuListStore.reset())}),[t,e.collectionContextStore,e.menuListStore]);return e.isDraggable?(0,W.jsx)(S().A,{...e.menuListSectionProps,children:(0,W.jsx)(v().Ay,{direction:"vertical",keys:o,renderKey:t=>e.menuListSectionProps.children[o.indexOf(t)],onDrop:l})}):(0,W.jsx)(S().A,{...e.menuListSectionProps})}function G(e){let{collectionViewStore:t,props:o,collectionContextStore:n,onClose:i}=e;return(0,W.jsx)(K,{collectionContextStore:n,collectionViewStore:t,onClose:i,menuListItemProps:o})}function Y(e){var t;if(!e.permissionScopesStore.state.canConfigureBlock)return!1;return!(0,C().sj)((null==e||null===(t=e.collectionViewBlockStore())||void 0===t?void 0:t.id)??"")}function U(e){const t=(0,i().Y0)(),o=(0,r().K8)((()=>Y(e.collectionContextStore)),[e.collectionContextStore]),n=(0,r().K8)((()=>"viewsMain"===e.collectionContextStore.viewsModuleContextStore.getViewModuleType()),[e.collectionContextStore]);if(!o)return null;const a=(0,W.jsx)(l().sA,{defaultMessage:"New view",id:"database.collectionViewSelect.newViewButtonTitle"});return n?(0,W.jsx)(y().i,{renderOrigin:e=>(0,W.jsx)(u().o,{onClick:()=>{e.onClick()},color:"secondary",title:a,focused:!1}),onClose:e.onClose}):(0,W.jsx)(w().Ay,{popupType:t.isPhone?f().nl.SlideUp:f().nl.Popup,alignmentToOrigin:w().yP.Center,placementToOrigin:w().sx.Right,renderOrigin:e=>(0,W.jsx)(u().o,{...e,title:a,color:"secondary",focused:!1}),render:t=>(0,W.jsx)(c().y7,{collectionContextStore:e.collectionContextStore,onClose:()=>{e.onClose(),t.close()},forceHideAdvancedConfigItems:!0})})}},465505:(e,t,o)=>{o.d(t,{P:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.72 1.77 14.55 16.45",svg:(0,o(474848).jsx)("path",{d:"M10.302 1.853a.63.63 0 0 0-.604 0l-6.65 3.669c-.2.11-.323.32-.323.547v7.862c0 .228.124.437.323.547l6.65 3.67a.63.63 0 0 0 .604 0l6.65-3.67c.2-.11.323-.32.323-.547V6.069a.63.63 0 0 0-.323-.547zM3.975 7.127l5.4 2.98v6.434l-5.4-2.98zm6.65 9.414v-6.434l5.4-2.98v6.435zM15.356 6.07 10 9.024 4.644 6.069 10 3.114z"})},i=(0,o(340498).wt)("cube",n)},564037:(e,t,o)=>{o.r(t),o.d(t,{getCurrentWorkflowNavigationState:()=>h,getDefaultClosedNavigationState:()=>C,getDefaultOpenNavigationState:()=>m,getIsWorkflowEditorOpen:()=>b,getIsWorkflowEditorStateOpen:()=>x,getIsWorkflowNavigationStateCurrent:()=>y,getMergedWorkflowNavigationState:()=>V,routeArgsGivenNavigationState:()=>j,useIsWorkflowEditorOpen:()=>A,useWorkflowNavigationState:()=>k});var n=()=>o(484714),i=()=>o(56366),r=()=>o(496603),l=()=>o(498212),a=()=>o(534177),c=()=>o(671593),s=()=>o(638681),d=()=>o(765957),u=()=>o(990402),p=()=>o(46986);const w=s().object({required:{isOpen:s().literal(!0)},optional:{}}),v={agent:s().intersection([w,s().object({required:{type:s().literal("agent")},optional:{}})]),module:s().intersection([w,s().object({required:{type:s().literal("module"),id:s().string()},optional:{}})]),database:s().intersection([w,s().object({required:{type:s().literal("database"),id:s().string()},optional:{}})]),trigger:s().intersection([w,s().object({required:{type:s().literal("trigger"),id:s().string()},optional:{}})]),debug:s().intersection([w,s().object({required:{type:s().literal("debug")},optional:{}})]),preview:s().intersection([w,s().object({required:{type:s().literal("preview")},optional:{collectionViewId:s().string()}})]),runtime_actor:s().intersection([w,s().object({required:{type:s().literal("runtime_actor")},optional:{}})]),view_settings:s().intersection([w,s().object({required:{type:s().literal("view_settings"),id:s().string()},optional:{}})]),runs:s().intersection([w,s().object({required:{type:s().literal("runs")},optional:{}})])},g=s().union(Object.values(v)),f=s().object({required:{isOpen:s().literal(!1)},optional:{}}),S=s().union([g,f]);function m(){return{isOpen:!0,type:"agent"}}function C(){return{isOpen:!1}}function x(e){return(null==e?void 0:e.isOpen)??!1}function b(e){return x(h(e))}function y(e){const{currentNavigationState:t,navigationState:o}=e,n=V({defaultNavigationState:{isOpen:!1},currentNavigationState:t,newNavigationState:o});return(0,r().n4)(t,n)}function h(e){const{RouterStore:t}=e;if("page"!==t.state.route.name)return;const o=d().default.state.mainEditorCurrentBlockStore;return o&&(0,u().m)(o)?function(e){const{workflowViewType:t,workflowViewId:o,collectionViewId:n}=e;switch(t){case"agent":case"debug":case"runtime_actor":return{isOpen:!0,type:t};case"module":case"trigger":case"view_settings":if(!o)return;return{isOpen:!0,type:t,id:o};case"database":if(!o)return;return{isOpen:!0,type:t,id:(0,l().ZA)(o)??o};case"preview":return{isOpen:!0,type:"preview",collectionViewId:n};case"runs":return{isOpen:!0,type:"runs"};default:return}}(t.state.route):void 0}function V(e){const{defaultNavigationState:t,currentNavigationState:o,newNavigationState:n}=e;if(!(0,p().re)())return{isOpen:!1};const i={...t};if(o)for(const[l,a]of Object.entries(o))i[l]=a;if(n)for(const[l,a]of Object.entries(n))i[l]=a;const r=(0,c().tf)(S,i);if(r)throw r;return i}function j(e){if(!e.isOpen)return{workflowViewType:void 0,workflowViewId:void 0,collectionViewId:void 0};const t=e.type,o={};switch(t){case"debug":case"runtime_actor":return{...o,workflowViewType:t,workflowViewId:void 0};case"module":case"trigger":case"view_settings":case"database":return{...o,workflowViewType:t,workflowViewId:e.id};case"runs":case"agent":return{...o,workflowViewType:t};case"preview":return{...o,workflowViewType:"preview",collectionViewId:e.collectionViewId};default:(0,a().HB)(t)}}function k(){const e=(0,n().v3)();return(0,i().K8)((()=>h(e)??{isOpen:!1}),[e])}function A(){const e=(0,n().v3)();return(0,i().K8)((()=>b(e)),[e])}},670495:(e,t,o)=>{o.d(t,{L:()=>c});var n=o(296540),i=()=>o(154017),r=()=>o(751156),l=()=>o(645873),a=()=>o(339034);function c(e){let{environment:t,collectionContextStore:o,from:c,onAddNewFormClick:s}=e;const{value:d}=(0,l().fJ)(a().formsEditorDependency),u=(0,n.useCallback)((()=>{var e;const n=(null===(e=o.collectionViewBlockStore())||void 0===e||null===(e=e.inMemoryRecordCache)||void 0===e?void 0:e.isTemporaryData)??!1;r().createAndCommit({userAction:"CollectionViewTabBar.createGenericViewType",environment:t,canUndo:!0,skipDefaultPostPerformValidationChecks:n,perform:e=>{d&&d.formEditorActions.createAndFocusCollectionFormEditorView({environment:t,collectionContextStore:o,transaction:e})}}),null==s||s(),(0,i().b)({environment:t,collectionContextStore:o,view_type:"form_editor",from:c})}),[t,o,d,s,c]);return d?u:void 0}},691093:(e,t,o)=>{o.r(t),o.d(t,{closeWorkflowEditor:()=>p,onConfigItemClick:()=>d,showWorkflowEditor:()=>u});var n=()=>o(496603),i=()=>o(435009),r=()=>o(118078),l=()=>o(890754),a=()=>o(492414),c=()=>o(765957),s=()=>o(564037);function d(e){const{environment:t,navigationState:o,parentStore:i}=e,r=(0,s().getCurrentWorkflowNavigationState)(t);(0,n().n4)(r,o)?u({environment:t,navigationState:{isOpen:!0,type:"agent"},parentStore:i}):u({environment:t,navigationState:o,parentStore:i})}function u(e){const{environment:t,parentStore:o,redirect:n}=e,d=(0,s().getMergedWorkflowNavigationState)({defaultNavigationState:(0,s().getDefaultOpenNavigationState)(),currentNavigationState:(0,s().getCurrentWorkflowNavigationState)(t),newNavigationState:e.navigationState}),u=(0,l().getMergedChatSidebarState)({environment:t,update:e.chatSidebarState}),p=(0,s().routeArgsGivenNavigationState)(d),w=(0,l().routeArgsGivenChatSidebarState)(u);(0,r().maybeCloseNotionSidebar)({environment:t});const v=(0,a().Ef)({environment:t,updates:{...p,...w,store:o}}),g=void 0!==o&&c().default.state.mainEditorCurrentBlockStore!==o;i().oo({environment:t,url:v,redirect:n??!g})}function p(e){const{environment:t,newStore:o,redirect:n}=e,c=(0,s().routeArgsGivenNavigationState)((0,s().getDefaultClosedNavigationState)()),d=(0,l().routeArgsGivenChatSidebarState)(l().CLOSED_CHAT_SIDEBAR_STATE),u=(0,a().Ef)({environment:t,updates:{...c,...d,store:o}});(0,r().maybeOpenNotionSidebar)(),i().oo({environment:t,url:u,redirect:n??!0})}},736767:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),i=o(474848);function r(e,t){return(0,i.jsx)(o(678553).Ay,{...e,ref:t,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}const l=(0,n.forwardRef)(r)},811979:(e,t,o)=>{o.d(t,{A:()=>c});var n=o(296540),i=()=>o(56366),r=()=>o(592678),l=o(474848);function a(e,t){const{onClose:a,persistOnClose:c,render:u,stopClickPropagation:p,onClick:w,disablePopup:v,disabled:g,forceInitialInbound:f,renderOrigin:S,originGap:m,borderRadius:C,popupWrapStyle:x}=e,b=(0,i().uB)(e.buttonPopupStore,o(463830).A);(0,n.useEffect)((()=>()=>{b.setState({open:!1})}),[b]);const y=(0,n.useCallback)((()=>s(a,c,b)),[a,c,b]),h=(0,n.useCallback)((()=>(0,l.jsx)(d,{onClose:a,persistOnClose:c,render:u,buttonPopupStore:b})),[a,c,u,b]),V=(0,n.useCallback)((e=>function(e,t,o,n,i){t&&(null==e||e.stopPropagation());if(e&&r().Vt(e))return;o&&o(e);n||i.setState({...i.state,open:!0})}(e,p,w,v,b)),[p,w,v,b]),j=(0,i().K8)((()=>S({...e,onClick:g?o(496603).D_:V})),[g,V,e,S]),k=(0,i().K8)((()=>b.state.open),[b]);return(0,l.jsx)(o(897119).Ay,{ref:t,...e,forceInitialInbound:Boolean(f),render:h,open:k,onDismiss:y,origin:j,originGap:m,borderRadius:C,popupWrapStyle:x,trapFocus:!0})}const c=n.forwardRef(a);function s(e,t,o){e&&e(),t||o.reset()}function d(e){let{onClose:t,persistOnClose:o,render:r,buttonPopupStore:a}=e;const c=(0,n.useCallback)((()=>s(t,o,a)),[t,o,a]),d=(0,i().K8)((()=>r({close:c})),[r,c]);return(0,l.jsx)(l.Fragment,{children:d})}},818870:(e,t,o)=>{o.d(t,{Q:()=>g});o(296540);var n=()=>o(56366),i=()=>o(904789);const r=50,l=100;var a=()=>o(959013),c=()=>o(154017),s=()=>o(423938),d=()=>o(760217),u=()=>o(8980),p=()=>o(859428),w=()=>o(46986),v=o(474848);function g(e){let{environment:t,collectionContextStore:o,from:g,onAction:f}=e;const S=(0,w().x6)(),m=function(e){const t=(0,w().Xl)(),{ownedCollectionCount:o,viewCount:i}=(0,n().K8)((()=>({ownedCollectionCount:(null==e?void 0:e.getOwnedCollectionStores().length)??0,viewCount:(null==e?void 0:e.getCollectionViewIds().length)??0})),[e]);return t?o<r?i<l?{disabled:!1}:{disabled:!0,reason:"tooManyViews"}:{disabled:!0,reason:"tooManyDataSources"}:{disabled:!1}}((0,n().K8)((()=>o.collectionViewBlockStore()),[o]));if(S)return{key:"newDataSource",render:e=>(0,v.jsx)(p().A,{render:t=>(0,v.jsx)(d().A,{title:(0,v.jsx)(a().sA,{defaultMessage:"New data source",id:"collectionTabBar.newDataSource.title"}),disabled:m.disabled,disabledFeedback:m.disabled,icon:(0,v.jsx)(u().I,{icon:i().R}),...e,...t}),renderTooltip:()=>{if(m.disabled){if("tooManyViews"===m.reason)return(0,v.jsx)(a().sA,{defaultMessage:"You are at the maximum number of views for this database.",id:"collectionTabBar.newDataSource.tooltip.tooManyViews"});if("tooManyDataSources"===m.reason)return(0,v.jsx)(a().sA,{defaultMessage:"You are at the maximum number of data sources for this database.",id:"collectionTabBar.newDataSource.tooltip.tooManyDataSources"})}},disableTooltip:!m.disabled}),action:()=>{(0,s().n)({environment:t,collectionContextStore:o}),null==f||f(),(0,c().b)({environment:t,collectionContextStore:o,view_type:"table",from:g})}}}},904789:(e,t,o)=>{o.d(t,{R:()=>r});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.51 15.51",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M12 8.875c.345 0 .625.28.625.625v1.875H14.5a.625.625 0 1 1 0 1.25h-1.875V14.5a.625.625 0 1 1-1.25 0v-1.875H9.5a.625.625 0 1 1 0-1.25h1.875V9.5c0-.345.28-.625.625-.625"}),(0,n.jsx)("path",{d:"M4.5 2.375A2.125 2.125 0 0 0 2.375 4.5V12c0 1.174.951 2.125 2.125 2.125h1.625v1.625c0 1.174.951 2.125 2.125 2.125h7.5a2.125 2.125 0 0 0 2.125-2.125v-7.5a2.125 2.125 0 0 0-2.125-2.125h-1.625V4.5A2.125 2.125 0 0 0 12 2.375zm8.375 3.75H8.25A2.125 2.125 0 0 0 6.125 8.25v4.625H4.5A.875.875 0 0 1 3.625 12V4.5c0-.483.392-.875.875-.875H12c.483 0 .875.392.875.875zm-5.5 2.125c0-.483.392-.875.875-.875h7.5c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-7.5a.875.875 0 0 1-.875-.875z"})]})},r=(0,o(340498).wt)("squareOnSquarePlus",i)},914873:(e,t,o)=>{o.d(t,{N:()=>w,e:()=>p});o(16280),o(296540);var n=()=>o(56366),i=()=>o(955363),r=()=>o(465505),l=()=>o(959013),a=()=>o(760217),c=()=>o(8980),s=()=>o(691093),d=()=>o(990402),u=o(474848);function p(e){let{environment:t,collectionContextStore:o}=e;if(w(t,o))return{key:"openBuilderConfig",action:()=>{const e=o.collectionViewBlockStore();if(!e)throw new Error("Parent store is undefined");(0,s().showWorkflowEditor)({environment:t,parentStore:e})},render:e=>(0,u.jsx)(a().A,{title:(0,u.jsx)(l().sA,{defaultMessage:"Builder mode",id:"collectionViewSuggestedViews.openBuilderConfig.label"}),icon:(0,u.jsx)(c().I,{icon:r().P}),right:(0,u.jsx)(c().I,{icon:i().arrowDiagonalUpRightIcon,color:"secondary",size:18}),...e})}}function w(e,t){const o=(0,n().K8)((()=>{const e=t.collectionViewBlockStore();return!!e&&(0,d().m)(e)}),[t]),i=(0,n().O$)(t.isFullScreenStore);return o&&i&&!e.device.isMobile}}}]);