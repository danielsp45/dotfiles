"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[66249],{212245:(e,t,n)=>{n.r(t),n.d(t,{SidebarBottomActions:()=>T});var o=n(296540),r=()=>n(484714),a=()=>n(56366),i=()=>n(401497),s=()=>n(959013),c=()=>n(159588),l=()=>n(360088),d=()=>n(645873);const p={SidebarWorkspaceDiscoveryButton:new(d().O2)("SidebarWorkspaceDiscoveryButton",(async()=>n.e(69746).then(n.bind(n,904939))))},u=(0,d()._h)(p.SidebarWorkspaceDiscoveryButton,(e=>e.SidebarWorkspaceDiscoveryButton));var m=()=>n(962730),b=()=>n(765957),v=()=>n(324561),S=()=>n(998109),g=()=>n(27569),y=()=>n(187174),h=()=>n(755199),f=()=>n(440209),A=()=>n(680074),I=()=>n(640653),M=()=>n(574752),x=()=>n(718807);var B=()=>n(859428),k=()=>n(309534),P=()=>n(913507),_=()=>n(763336),j=()=>n(679915),w=n(474848);function T(){const e=(0,r().v3)(),t=(0,a().O$)(b().AppStoreMainEditorCurrentBlockStore),n=(0,a().O$)(b().AppStoreCurrentSpaceStore),d=(0,v().f_)({spaceId:null==n?void 0:n.id}),p=(0,i().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:1},sidebarItemButtonStyle:c().hG,sidebarItemHoveredStyle:{background:e.sidebarItemSelectedBackground},sidebarItemActiveStyle:{...c().hG,background:e.sidebarItemSelectedBackground,color:e.text.primary}})),[]),{isTablet:T}=(0,r().Y0)(),C=(0,l().p)(),U=function(e){let{environment:t}=e;const n=(0,a().K8)((()=>(0,I().s7)(t)),[t]),{isDesktop:i}=(0,r().Y0)(),s=(0,a().K8)((()=>x().Ay.state.isTrashEmpty),[]),c=(0,a().K8)((()=>(0,f().f1)({environment:t,experimentId:"adoption_hide_features_v2",variant:g().T.trash,isUserWorkspaceOwner:n,isDesktop:i})),[t,n,i]),l=(0,a().K8)((()=>{var e;const n=(0,A().R$)(t);return(null==n||null===(e=n.getSettings())||void 0===e?void 0:e.adoption_sidebar_trash)??!1}),[t]),[{value:d}]=(0,y().Yb)((async()=>!(!l&&c)||!(await(0,M().checkIsTrashEmpty)(t))),[t,l,c]);return(0,o.useEffect)((()=>{!c||l||s||h().hT(t)}),[c,l,s,t]),!c||!s||d||l}({environment:e}),D=(0,g().I)({environment:e,section:"templates"}),W=(0,g().I)({environment:e,section:"settings"}),z=(0,g().I)({environment:e,section:"workspace_discovery"});return(0,w.jsxs)("div",{style:p.container,children:[C&&(0,w.jsx)(j().A,{hasActivePlan:(0,v().UU)(d)}),W&&(0,w.jsx)(k().A,{buttonStyles:{hoveredStyle:p.sidebarItemHoveredStyle}}),!T&&D&&(0,w.jsx)(S().n,{step:"explore_templates",children:(0,w.jsx)(_().W,{styles:{sidebarItemButtonStyle:p.sidebarItemButtonStyle,buttonHoveredStyle:p.sidebarItemHoveredStyle,sidebarItemActiveStyle:p.sidebarItemActiveStyle}})}),z&&(0,w.jsx)(u,{}),U?t?T?(0,w.jsx)(P().A,{store:t,buttonStyles:{hoveredStyle:p.sidebarItemHoveredStyle},isMobile:!1}):(0,w.jsx)(B().A,{renderTooltip:()=>(0,w.jsx)(s().sA,{defaultMessage:"Restore deleted pages.",id:"sidebar.openTrashModalButton.tooltip"}),originGap:6,placement:m().W.Right,render:e=>(0,w.jsx)(P().A,{store:t,buttonStyles:{hoveredStyle:p.sidebarItemHoveredStyle},isMobile:!1,...e})}):(0,w.jsx)(B().A,{renderTooltip:()=>(0,w.jsx)(s().sA,{defaultMessage:"Unable to use trash from this view.",id:"sidebar.openTrashModalButton.tooltip.disabled"}),originGap:6,placement:m().W.Right,render:e=>(0,w.jsx)(P().B,{buttonStyles:{hoveredStyle:p.sidebarItemHoveredStyle},isMobile:!1,...e})}):null]})}},212727:(e,t,n)=>{n.r(t),n.d(t,{gearIcon:()=>a,iconDefinition:()=>r});n(296540);var o=n(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"2.19 2.19 15.58 15.6",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.29 10c0 1.5 1.22 2.71 2.71 2.71 1.5 0 2.71-1.21 2.71-2.71S11.5 7.29 10 7.29 7.29 8.5 7.29 10m1.25 0c0-.81.66-1.46 1.46-1.46.81 0 1.46.65 1.46 1.46s-.65 1.46-1.46 1.46-1.46-.65-1.46-1.46"}),(0,o.jsx)("path",{d:"M8.49 17.64q.75.15 1.53.15v-.01c.47 0 .94-.04 1.41-.13.26-.05.46-.25.5-.51l.26-1.53.15-.06 1.28.91c.21.14.49.14.71 0 .41-.28.8-.61 1.18-.98.33-.33.63-.7.9-1.09.15-.21.15-.5 0-.71l-.9-1.27.06-.15 1.55-.27c.26-.05.46-.25.51-.5a7.8 7.8 0 0 0 .02-2.94.62.62 0 0 0-.51-.5l-1.53-.26-.06-.15.91-1.28c.14-.21.14-.49 0-.71a7.9 7.9 0 0 0-2.07-2.08.62.62 0 0 0-.71 0l-1.27.9-.15-.06-.27-1.55a.64.64 0 0 0-.5-.51c-.5-.1-1-.15-1.53-.15-.47 0-.95.04-1.41.13-.26.05-.46.25-.5.51l-.26 1.53-.15.06-1.28-.91a.65.65 0 0 0-.71 0 7.9 7.9 0 0 0-2.08 2.07c-.15.21-.15.5 0 .71l.9 1.27-.06.15-1.55.27c-.26.05-.46.25-.51.5-.1.5-.15 1-.15 1.53 0 .47.04.95.13 1.41.05.26.25.46.51.5l1.53.26.06.15-.91 1.28c-.14.21-.15.49 0 .71.29.42.61.81.98 1.18.34.34.7.65 1.09.91.21.15.5.15.71 0l1.27-.9.15.06.27 1.55c.05.26.25.46.5.51m2.29-1.15c-.53.07-1.09.07-1.63 0l-.25-1.47a.62.62 0 0 0-.42-.49 6 6 0 0 1-.68-.28.63.63 0 0 0-.65.04l-1.2.85a6.8 6.8 0 0 1-1.14-1.16l.86-1.21c.13-.19.15-.43.05-.64-.11-.22-.21-.45-.28-.68a.62.62 0 0 0-.49-.43l-1.45-.25a6.7 6.7 0 0 1 0-1.63l1.47-.25c.23-.04.42-.2.49-.42.07-.23.17-.46.28-.68.11-.21.09-.46-.04-.65l-.85-1.2A6.8 6.8 0 0 1 6.01 4.8l1.21.86c.19.13.43.15.64.05.22-.11.45-.21.68-.28s.39-.26.43-.49l.25-1.45c.53-.07 1.09-.07 1.63 0l.25 1.47c.04.23.2.42.42.49.23.07.46.17.68.28.21.11.46.09.65-.04l1.2-.85A6.8 6.8 0 0 1 15.19 6l-.86 1.21c-.13.19-.15.43-.05.64.11.22.21.45.28.68s.26.39.49.43l1.45.25a6.7 6.7 0 0 1 0 1.63l-1.47.25c-.23.04-.42.2-.49.42-.07.23-.17.46-.28.68-.11.21-.09.46.04.65l.85 1.2a6.8 6.8 0 0 1-1.16 1.14l-1.21-.86a.64.64 0 0 0-.64-.05c-.22.11-.45.21-.68.28s-.39.26-.43.49z"})]})},a=(0,n(340498).wt)("gear",r)},240865:(e,t,n)=>{n.d(t,{V:()=>a});var o=()=>n(56366),r=()=>n(765957);function a(e){return(0,o().K8)((()=>{var t;return e?e.getMemberCountFromPublicSpaceData()??void 0:(null===(t=r().default.state.currentSpaceStore)||void 0===t?void 0:t.getMemberCountFromPublicSpaceData())??void 0}),[e])}},271084:(e,t,n)=>{n.d(t,{k:()=>r});n(581454);class o extends(()=>n(757695))().Store{getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}getSortedUserIds(){return Object.entries(this.state||{}).sort(((e,t)=>{let[n,o]=e,[r,a]=t;return a-o})).map((e=>{let[t,n]=e;return t}))}}const r=new o;(0,n(604341).exposeDebugValue)("UserSimilarityStore",r)},305837:(e,t,n)=>{n.d(t,{H:()=>r});n(296540);var o=n(474848);const r=(0,n(340498).wt)("settingsUpgradeFilled",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M10 19c4.935 0 9.009-4.073 9.009-9 0-4.926-4.082-9-9.018-9C5.065 1 1 5.074 1 10c0 4.927 4.074 9 9 9zm0-4.422c-.47 0-.818-.33-.818-.8v-4.23l.087-1.863-.81 1.01-1 1.053a.762.762 0 01-.558.235c-.435 0-.757-.314-.757-.74 0-.218.07-.392.218-.549l2.994-3.029c.2-.217.4-.313.644-.313.261 0 .461.104.662.313l2.976 3.03a.73.73 0 01.227.548c0 .426-.322.74-.758.74a.73.73 0 01-.557-.235l-.992-1.045-.818-1.027.087 1.871v4.23c0 .47-.348.801-.827.801z"})})},309534:(e,t,n)=>{n.d(t,{A:()=>s,O:()=>i});var o=n(296540),r=()=>n(959013),a=n(474848);const i=(0,r().YK)({settingsAndMembers:{id:"sidebarSettingsButton.settingsAndMembers",defaultMessage:"Settings & members"},settings:{id:"sidebarSettingsButton.settings",defaultMessage:"Settings"},tooltip:{id:"sidebarSettingsButton.tooltip",defaultMessage:"Manage your account and settings"}}),s=function(e){const{buttonStyles:t}=e,s=(0,r().tz)(),c=s.formatMessage(i.settings),l=(0,n(644914).ab)(),d=(0,o.useCallback)((()=>{n(209660).Ow({openedFrom:"sidebar",currentTab:"user_settings"})}),[]);return(0,a.jsx)(n(859428).A,{renderTooltip:()=>s.formatMessage(i.tooltip),originGap:6,textWrap:!0,placement:n(962730).W.Right,render:e=>(0,a.jsx)(n(704152).A,{...e,onClick:d,style:l.baseSidebarItem,hoveredStyle:null==t?void 0:t.hoveredStyle,children:(0,a.jsx)(n(490044).A,{left:(0,a.jsx)(n(8980).I,{icon:n(212727).gearIcon,color:"secondary",size:"lg"}),children:c})})})}},357927:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,templatesIcon:()=>r});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.08 2.62 15.84 14.75",svg:(0,n(474848).jsx)("path",{d:"M7.682 5.716V4.182c0-.858.7-1.557 1.557-1.557h5.823c.858 0 1.557.7 1.557 1.557v5.59a1.56 1.56 0 0 1-1.093 1.486l2.185 3.786c.589 1.038-.154 2.331-1.354 2.331H9.38c-1.138 0-1.895-1.18-1.421-2.201q-.513.113-1.057.114a4.81 4.81 0 0 1-4.818-4.818 4.812 4.812 0 0 1 5.6-4.754M9.24 3.875a.31.31 0 0 0-.307.307v5.6a.3.3 0 0 0 .298.296h1.66l.622-1.075a.6.6 0 0 1 .073-.103 1.56 1.56 0 0 1 2.638.1l.002.003.62 1.075h.217a.31.31 0 0 0 .307-.306v-5.59a.31.31 0 0 0-.307-.307zm-.01 7.453a1.55 1.55 0 0 1-1.547-1.547V6.99a3.562 3.562 0 0 0-4.35 3.481 3.56 3.56 0 0 0 3.569 3.568 3.54 3.54 0 0 0 2.09-.669l1.178-2.04zm3.914-1.7a.31.31 0 0 0-.54.002 1 1 0 0 1-.057.08L9.11 15.665l-.001.002a.306.306 0 0 0 .27.458h6.978a.31.31 0 0 0 .268-.463z"})},r=(0,n(340498).wt)("templates",o)},360088:(e,t,n)=>{n.d(t,{p:()=>u});var o=()=>n(484714),r=()=>n(56366),a=()=>n(762433),i=()=>n(600871),s=()=>n(155959),c=()=>n(324561),l=()=>n(176983),d=()=>n(240865),p=()=>n(58293);function u(){const e=(0,o().v3)(),t=(0,l().J)(),n=(0,d().V)(),u=(0,p().r)(),m=(0,c().f_)({spaceId:null==u?void 0:u.id});return(0,r().K8)((()=>!!(0,i().mM)({environment:e})&&(!(!m||!t||1!==n)&&((0,s().T)("supportsAiIAP")?(0,c().UU)(m)||!(0,a().Fq)(m):!(0,c().UU)(m)&&!(0,a().Fq)(m)))),[e,m,t,n])}},679915:(e,t,n)=>{n.d(t,{A:()=>c});n(296540);var o=()=>n(401497),r=()=>n(305837),a=()=>n(959013),i=()=>n(306622),s=n(474848);const c=function(e){let{hasActivePlan:t}=e;const o=(0,n(484714).v3)(),r=t?(0,s.jsx)(a().sA,{id:"upgradeMobileButton.manageButton.label",defaultMessage:"Manage Plan"}):(0,s.jsx)(a().sA,{id:"upgradeMobileButton.upgradeButton.label",defaultMessage:"Upgrade Plan"});return(0,s.jsx)(n(704152).A,{onClick:l(o),children:(0,s.jsx)(n(490044).A,{left:(0,s.jsx)(d,{}),disableMobileBorder:!0,children:r})})};function l(e){return()=>{const{mobileNative:t}=e;t&&t.openUpgradeModal({spaceId:i().LU(),from:"mobile_sidebar",showActivePlan:!0})}}function d(){const e=(0,o().DP)();return(0,r().H)({fill:e.icon.secondary,width:16})}},763336:(e,t,n)=>{n.d(t,{U:()=>v,W:()=>b});n(296540);var o=()=>n(484714),r=()=>n(56366),a=()=>n(357927),i=()=>n(959013),s=()=>n(981084),c=()=>n(962730),l=()=>n(296798),d=()=>n(8980),p=()=>n(859428),u=()=>n(490044),m=n(474848);function b(e){const{styles:t}=e,n=(0,o().v3)(),b=(0,i().tz)(),S=(0,r().K8)((()=>{const{RouterStore:e}=n;return e.state.route}),[n]),g=(0,s().U)("marketplace_sidebar_option_click");return(0,m.jsx)(p().A,{renderTooltip:()=>b.formatMessage(v.templatesMwnTooltip),originGap:6,placement:c().W.Right,render:e=>(0,m.jsx)(l().A,{style:t.sidebarItemButtonStyle,hoveredStyle:t.buttonHoveredStyle,onClick:g,...e,children:(0,m.jsx)(u().A,{left:(0,m.jsx)(d().I,{icon:a().templatesIcon,color:"secondary",size:"lg"}),isBottomItem:!0,style:"gallery"===S.name?t.sidebarItemActiveStyle:{},children:b.formatMessage(v.title)})})})}const v=(0,i().YK)({templatesMwnTooltip:{defaultMessage:"Find all the best templates and set-ups built by Notion’s community",id:"sidebar.openTemplatePickerButton.tooltip.mwn"},title:{defaultMessage:"Templates",id:"sidebar.openTemplatePickerButton"}})},806638:(e,t,n)=>{n.d(t,{P:()=>a});var o=()=>n(427704),r=()=>n(435009);function a(e){const{environment:t}=e;r().oo({environment:t,url:o().JZ.marketplace,redirect:!1})}},908928:(e,t,n)=>{n.d(t,{GO:()=>C,Ju:()=>T,KA:()=>w,L0:()=>z,L2:()=>O,dA:()=>U,gI:()=>j,iN:()=>R,oG:()=>W,sK:()=>D});n(898992),n(354520),n(803949);var o=()=>n(386164),r=()=>n(433847),a=()=>n(68263),i=()=>n(388821),s=()=>n(179034),c=()=>n(824862),l=()=>n(161479),d=()=>n(96689),p=()=>n(798880),u=()=>n(763824),m=()=>n(534177),b=()=>n(901389),v=()=>n(855801),S=()=>n(594794),g=()=>n(972435),y=()=>n(731320),h=()=>n(630116),f=()=>n(449506),A=()=>n(496414),I=()=>n(579627),M=()=>n(246826),x=()=>n(436572),B=()=>n(751156),k=()=>n(633457);const P=(0,n(959013).YK)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"}});function _(e,t){const{environment:n,spaceStore:o,spaceRole:r}=t,a=function(e){const{name:t,spaceStore:n,userId:o,icon:r,type:a,environment:i}=e,s=Date.now(),l={name:t,created_at:s,created_by_table:p().oo,created_by_id:o,alive:!0,icon:r,space_id:n.id,last_edited_at:s,last_edited_by_id:o,last_edited_by_table:p().oo};switch(a){case"guest":return{...l,type:"guest",capabilities:e.capabilities,parent_table:d().NX,parent_id:n.id,integration_id:void 0};case"scim":return{...l,id:(0,S().Z1)({environment:i,table:c().GP,spaceId:n.id}),type:"scim",parent_table:p().oo,parent_id:o};default:(0,m().HB)(a)}}(t),i=M().eC({environment:n,table:c().GP,value:a,inMemoryRecordCache:n.defaultRecordCache.inMemoryRecordCache,transaction:e});return I().dy({environment:n,spaceStore:o,permissionItems:[{type:"bot_permission",role:r,bot_id:i.id}],transaction:e}),{botStore:i}}function j(e){const{environment:t}=e,{serverCommitResult:n,performResult:{botStore:o}}=B().createAndCommit({userAction:"botActions.createSpaceBot",environment:t,canUndo:!0,perform:t=>_(t,e)});return{botStore:o,transactionPromise:n}}async function w(e){const{environment:t,botId:n,onSuccess:o}=e,r=await f().callApi({eventName:"deleteBot",environment:t,data:{botId:n}});"failed"===r.type?b().Qg(r):"success"===r.type&&o&&(await k().oX({environment:t}),o())}async function T(e){const{environment:t,table:n,id:r,type:a}=e,i=await f().callApi({eventName:"getBots",environment:t,data:{table:n,id:r,type:a},headers:(0,o().WS)({spaceId:n===d().NX?r:void 0})});return"failed"===i.type?(b().Qg(i),{botIds:[],recordMap:{}}):{botIds:i.data.botIds,recordMap:i.data.recordMap}}async function C(e){const{environment:t,currentSpaceStore:n,botIds:o}=e;if(!n)return;const r=await f().callApi({eventName:"getBotSharedPageIds",environment:t,data:{spaceId:n.id,botIds:o}});if("failed"!==r.type)return r.data;b().Qg(r)}async function U(e){const{environment:t,botId:n}=e,o=await f().callApi({eventName:"getBotToken",environment:t,data:{botId:n}});if("failed"!==o.type)return o.data.token;b().Qg(o)}function D(e){const{botValue:t,store:n,environment:o}=e,{id:a,parent_id:i,parent_table:s,capabilities:c}=t,l={type:"bot_permission",bot_id:a,parent_id:i,parent_table:s,role:(0,r().MD)(c)};B().createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:o,canUndo:!0,perform:e=>{I().zP({environment:o,store:n,permissionItems:[l],transaction:e})}})}function W(e){const{botId:t,store:n,environment:o}=e,r=n.getPermissionItems().filter((e=>!!(0,a().P3)(e)));for(const a of r)if(a.bot_id===t){const e={...a,role:"none"};B().createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:o,canUndo:!0,perform:t=>{I().zP({environment:o,store:n,permissionItems:[e],transaction:t})}})}}function z(e){const{currentSpaceStore:t,environment:n,pages:o,botStore:r,addPermission:a}=e;if(!t)return;const i=(0,y().Ws)({botStore:r,addPermission:a});o.forEach((e=>{const o=h().sk.createChildStore(t,{table:s().ev,id:e,spaceId:t.getSpaceId()});B().createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:n,canUndo:!0,perform:e=>{I().zP({environment:n,store:o,permissionItems:[i],transaction:e})}})}))}async function R(e){const{environment:t,spaceStore:n,botStore:o,pageIdAndOperations:r,concurrency:a=20}=e;0!==r.length&&await(0,u().lX)(r,a,(async e=>{const r=h().sk.createChildStore(n,{table:s().ev,id:e.pageId,spaceId:n.getSpaceId()}),a=(0,y().Ws)({botStore:o,addPermission:"add"===e.operationType}),{serverCommitResult:i}=B().createAndCommit({userAction:`botActions.updateBotPermissionsForPages.${e.operationType}`,environment:t,canUndo:!0,perform:e=>{I().zP({environment:t,store:r,permissionItems:[a],transaction:e})}});await i}))}async function O(e){const{environment:t,spaceStore:n,spaceViewStore:r,templatePageId:a,botValue:s,pages:d}=e;if(!n)return;const p=h().sk.createChildStore(n,{table:c().GP,id:s.id});if(a)return await async function(e){const{environment:t,spaceStore:n,spaceViewStore:r,templatePageId:a,botStore:s}=e;if(!n||!r)return;try{A().m({message:P.duplicatingTemplate});const e=await f().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:a,spaceId:(0,l().e)(void 0)},shallow:!1},headers:(0,o().WS)({recordId:a})});if("failed"===e.type)return;const c=i().RecordMapWithRole.create(e.data.subtreeRecordMap),{createAndDuplicatePageInSpace:d}=await(0,v().nd)(),{performResult:p}=B().createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,canUndo:!0,perform:e=>{const o=d({environment:t,recordMap:c,copyPageId:a,isPrivate:!0,spaceStore:n,spaceViewStore:r,transaction:e,allowCopyExternalObjectInstances:!1}),i=r.getPrivatePageIds();i.length>0&&M().zv({store:r,data:{private_pages:[o.id,...i]},transaction:e});const l=(0,y().Ws)({botStore:s,addPermission:!0});return I().zP({environment:t,store:o,permissionItems:[l],transaction:e}),o}});return p}catch(c){x().D6({label:g().A.formatMessage(P.duplicatingTemplateError)})}finally{A().V()}}({environment:t,templatePageId:a,botStore:p,spaceStore:n,spaceViewStore:r});z({environment:t,currentSpaceStore:n,botStore:p,pages:d,addPermission:!0})}},913507:(e,t,n)=>{n.d(t,{A:()=>M,B:()=>P});var o=n(296540),r=()=>n(484714),a=()=>n(56366),i=()=>n(236262),s=()=>n(959013),c=()=>n(797265),l=()=>n(751156),d=()=>n(679924),p=()=>n(553965),u=()=>n(362749),m=()=>n(644914),b=()=>n(496067),v=()=>n(718807),S=()=>n(765957),g=()=>n(704152),y=()=>n(406699),h=()=>n(8980),f=()=>n(199896),A=()=>n(490044),I=n(474848);const M=function(e){let{store:t,onClick:n,onMouseEnter:i,onMouseLeave:s,buttonStyles:c,isMobile:l}=e;const d=(0,r().v3)(),p=(0,o.useCallback)((e=>(0,I.jsx)(k,{store:t,onClick:n,onMouseEnter:i,onMouseLeave:s,buttonStyles:c,isMobile:l,buttonPopupEvents:e})),[t,n,i,s,c,l]),{device:u,mobileNative:m}=d,v=(0,a().K8)((()=>(null==m?void 0:m.supportsNativeHomeOnPhone())||!1),[m]);return(0,I.jsx)(y().Ay,{popupType:u.isMobile?y().z7.SlideUp:y().z7.Popup,hidesMobileNativeBottomBar:v,preventSlideUpTransition:v,buttonPopupStore:b().A,alignmentToOrigin:y().yP.Start,placementToOrigin:y().sx.Right,originGap:0,onClick:e=>B(e,d),isFullWidthOnMobile:!0,render:()=>(0,I.jsx)(x,{}),preventScaleTransition:!0,renderOrigin:p})};function x(){return(0,a().O$)(S().AppStoreCurrentSpaceStore)?(0,I.jsx)(u().V2,{}):null}function B(e,t){v().Ay.setState({...v().Ay.state,currentTab:"all_pages"}),function(e){(0,d().v)(e,"open_trash",(0,m().hX)({environment:e}))}(t)}function k(e){let{store:t,buttonPopupEvents:n,onClick:d,onMouseEnter:u,onMouseLeave:v,buttonStyles:S,isMobile:y}=e;const M=(0,r().v3)(),{onClick:x,...k}=(0,o.useMemo)((()=>(0,p().A)(n,{onClick:d,onMouseEnter:u,onMouseLeave:v})),[n,d,u,v]),P=(0,o.useMemo)((()=>t.clone()),[t]),_=(0,a().O$)(b().A),j=(0,m().ab)();return(0,I.jsx)(f().Ay,{store:P,canDropOnto:!0,onSelectableDrop:e=>function(e,t){const{droppedStores:n,duplicate:o}=e;o||l().createAndCommit({userAction:"SidebarTrashButton.handleDrop",environment:t,canUndo:!0,perform:e=>{c().ZL({environment:t,blocks:n,transaction:e})}})}(e,M),analyticsName:"sidebar_trash",shouldShowDropZone:!0,children:(0,I.jsx)(g().A,{...k,style:{...j.baseSidebarItem,..._.open&&j.currentSelectedSidebarItem},hoveredStyle:null==S?void 0:S.hoveredStyle,onClick:x||(e=>B(0,M)),children:(0,I.jsx)(A().A,{left:(0,I.jsx)(h().I,{icon:i().trashIcon,color:"secondary",size:"lg"}),disableMobileBorder:!0,isBottomItem:!0,children:(0,I.jsx)(s().sA,{defaultMessage:"Trash",id:"sidebarTrashButton.text"})})})})}function P(e){const{buttonStyles:t,isMobile:n,...o}=e,r=(0,m().ab)();return(0,I.jsx)(g().A,{...o,style:{...r.baseSidebarItem},hoveredStyle:null==t?void 0:t.hoveredStyle,children:(0,I.jsx)(A().A,{left:(0,I.jsx)(h().I,{icon:i().trashIcon,color:"secondary",size:"lg"}),disableMobileBorder:!0,isBottomItem:!0,children:(0,I.jsx)(s().sA,{defaultMessage:"Trash",id:"sidebarTrashButton.text"})})})}},981084:(e,t,n)=>{n.d(t,{U:()=>d});var o=n(296540),r=()=>n(484714),a=()=>n(427704),i=()=>n(435009),s=()=>n(2220),c=()=>n(652617),l=()=>n(806638);function d(e,t){const n=(0,r().v3)(),{isPhone:d}=(0,r().Y0)(),p=(0,o.useContext)(c().e);return(0,o.useCallback)((o=>{if((0,s().u)({environment:n,event:{eventName:e,eventProperties:{}}}),d)null==p||p(),i().oo({environment:n,url:"/nativetab/templates",redirect:!0});else{const e="click"===o.type&&(o.metaKey||o.ctrlKey);(null==t?void 0:t.forceOpenInNewTab)||e?i().oo({environment:n,url:a().JZ.marketplace,openInNew:"tab",makeTabActive:!e&&n.device.isDesktop}):(0,l().P)({environment:n})}}),[n,e,t,d,p])}}}]);