"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[29669],{8540:(e,t,i)=>{i.d(t,{X:()=>l});var n=()=>i(166386),a=()=>i(47170),s=()=>i(985315);function l(){const e=(0,a().O)(),t=(0,s().g)({spaceId:e});if(t)return(0,n().e8)(t,"coupon")}},71904:(e,t,i)=>{i.d(t,{y:()=>I});var n=i(296540),a=()=>i(107683),s=()=>i(49210),l=(i(898992),i(908872),()=>i(624119)),o=()=>i(56366),r=()=>i(401497),d=()=>i(292119),c=()=>i(177167),u=()=>i(959013),p=()=>i(901389),g=()=>i(84817),m=()=>i(802790),f=()=>i(7674),v=()=>i(460292),b=()=>i(554509),h=()=>i(972435),y=()=>i(963589),x=()=>i(765957),S=()=>i(112527),j=i(474848);const M=(0,u().YK)({createPaymentMethodFailed:{id:"spaceSubscriptionBilling.updatePaymentMethod.create.failed",defaultMessage:"We were unable to save your payment method. Please try again or try a different payment method."}});function A(e){const t=(0,y().X)("native_invoice_payment"),{currency:i,onAccept:a,unpaidInvoices:s}=e,r=(0,u().tz)(),d=S().useElementsOptions({type:"setup",currency:i}),c={defaultValues:{billingDetails:(0,o().K8)((()=>{const e=x().default.state.currentUserStore;return{email:null==e?void 0:e.getEmail(),name:null==e?void 0:e.getName()}}),[])}},m=n.useCallback((async(e,t)=>{const{error:i}=await e.submit();if(i)return;const{error:n,paymentMethod:s}=await t.createPaymentMethod({elements:e});n?p().f1(h().A.formatMessage(M.createPaymentMethodFailed)):s&&a(s)}),[a]),v=s.length>0,b=s.reduce(((e,t)=>e+t.total),0),A=(0,n.useMemo)((()=>S().getStripe()),[]);return(0,j.jsx)(l().Elements,{stripe:A,options:d,children:(0,j.jsx)(l().ElementsConsumer,{children:e=>{var i;let{elements:n,stripe:a}=e;return(0,j.jsx)(f().tf,{showDismissButton:!1,header:(0,j.jsx)(C,{isNativeInvoicePaymentEnabled:t,hasUnpaidInvoices:v}),footer:null,children:(0,j.jsxs)(g().Y1,{children:[t&&v?(0,j.jsx)(D,{}):null,(0,j.jsx)(l().PaymentElement,{options:c}),t&&v?(0,j.jsx)(B,{unpaidTotal:b,currencyCode:null===(i=s[0])||void 0===i?void 0:i.currencyCode,intl:r}):null,(0,j.jsx)(f().aO,{layout:"horizontal-right",primaryButtons:[{label:(0,j.jsx)(w,{isNativeInvoicePaymentEnabled:t,hasUnpaidInvoices:v}),onClick:async()=>{n&&a&&await m(n,a)}}],secondaryButtons:[{buttonType:"dismiss"}]})]})})}})})}function C(e){const{isNativeInvoicePaymentEnabled:t,hasUnpaidInvoices:i}=e;return t&&i?(0,j.jsx)(b().D,{styleName:"UITitle-Medium-20px/Semibold",colorName:"primary",children:(0,j.jsx)(u().sA,{id:"paymentMethodModalContent.unpaid.title",defaultMessage:"Update payment method"})}):(0,j.jsx)(b().D,{styleName:"Heading-17px/Medium",colorName:"primary",children:(0,j.jsx)(u().sA,{id:"paymentMethodModalContent.title",defaultMessage:"Change your payment method"})})}function D(){const e=(0,r().IS)((e=>({detailsHeader:{display:"flex",alignItems:"center",paddingBottom:"8px",justifyContent:"space-between"},detailsText:{color:e.text.secondary,textAlign:"left"}})),[]);return(0,j.jsxs)("div",{style:e.detailsHeader,children:[(0,j.jsx)(b().D,{styleName:"Caption-12px/Semibold",style:e.detailsText,children:(0,j.jsx)(u().sA,{id:"paymentMethodModalContent.paymentDetails.header",defaultMessage:"Payment details"})}),(0,j.jsx)(v().Q,{iconGroup:c().x,variantName:"small",colorName:"tertiary"})]})}function B(e){const{unpaidTotal:t,currencyCode:i,intl:n}=e,a=(0,r().IS)((e=>({amount:{textAlign:"left"},divider:{padding:"16px 0px"},totalFooter:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"6px"},totalText:{color:e.text.secondary,textAlign:"left"}})),[]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(m().A,{size:1,style:a.divider}),(0,j.jsxs)("div",{style:a.totalFooter,children:[(0,j.jsx)(b().D,{styleName:"Caption-12px/Semibold",style:a.totalText,children:(0,j.jsx)(u().sA,{id:"paymentMethodModalContent.invoiceTotal",defaultMessage:"Total unpaid invoices"})}),(0,j.jsx)(b().D,{styleName:"UITitle-Medium-20px/Semibold",colorName:"primary",style:a.amount,children:(0,j.jsx)(d().v,{cost:{amount:t,currencyCode:i},trailingZeroDisplay:"stripIfInteger",intl:n})})]})]})}function w(e){const{isNativeInvoicePaymentEnabled:t,hasUnpaidInvoices:i}=e;return t&&i?(0,j.jsx)(u().sA,{id:"paymentMethodModalContent.updateAndPay",defaultMessage:"Update & pay"}):(0,j.jsx)(u().sA,{id:"paymentMethodModalContent.update",defaultMessage:"Update"})}async function I(e){return await s().T.showAsyncModal((t=>(0,j.jsx)(a().s,{isOpen:t.isOpen,onDismiss:t.onDismiss,onClosed:t.onClosed,animateSizeTransition:!1,areaConstraint:{width:{type:"fixed",length:500},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,j.jsx)(A,{currency:e.currencyCode,onAccept:t.resolve,unpaidInvoices:e.unpaidInvoices})})))}},83489:(e,t,i)=>{i.d(t,{H:()=>n});const n=(0,i(340498).xh)("infoCircle",{default:{loader:()=>i.e(29288).then(i.bind(i,829288))},small:{loader:()=>i.e(81438).then(i.bind(i,781438))},mini:{loader:()=>i.e(16742).then(i.bind(i,16742))},large:{loader:()=>i.e(29750).then(i.bind(i,29750))}})},177167:(e,t,i)=>{i.d(t,{x:()=>n});const n=(0,i(340498).xh)("lockClosedFill",{default:{loader:()=>i.e(61466).then(i.bind(i,161466))},small:{loader:()=>i.e(6960).then(i.bind(i,106960))},mini:{loader:()=>i.e(26180).then(i.bind(i,26180))},large:{loader:()=>i.e(37636).then(i.bind(i,37636))}})},278597:(e,t,i)=>{i.d(t,{g:()=>w});i(581454);var n=i(296540),a=()=>i(662303),s=()=>i(484714),l=()=>i(401497),o=()=>i(869190),r=()=>i(959013),d=()=>i(755636),c=()=>i(8178),u=()=>i(780054),p=()=>i(963589),g=()=>i(729369),m=()=>i(930851);i(944114);const f=(0,i(340498).xh)("clock",{default:{loader:()=>i.e(27616).then(i.bind(i,927616))},small:{loader:()=>i.e(3862).then(i.bind(i,403862))},mini:{loader:()=>i.e(74206).then(i.bind(i,874206))},large:{loader:()=>i.e(77742).then(i.bind(i,377742))}});var v=()=>i(167355),b=()=>i(493823),h=()=>i(802790),y=()=>i(460292),x=()=>i(125565),S=()=>i(517492),j=i(474848);const M=function(e){const{environment:t,events:s,isEmpty:c,upcomingInvoiceData:p,upcomingInvoiceUrl:g}=e,m=(0,l().IS)((e=>({cell:{paddingRight:12,height:48},tableBox:{tableLayout:"fixed"},charge:{color:e.text.secondary},status:{color:e.text.secondary},tooltip:{width:"216px"}})),[]),f=n.useCallback((e=>{var i;t.device.isMobileNative?null===(i=t.mobileNative)||void 0===i||i.openExternalBrowser(e):d().f({environment:t,url:e})}),[t]),v=(0,j.jsx)("div",{style:m.tooltip,children:(0,j.jsx)(r().sA,{id:"spaceSubscriptionBilling.invoicesSection.invoiceStatus.tooltip",defaultMessage:"Your payment method was invalid for this past invoice. Please update your payment method via the Edit method button above."})}),b=[];if(p){const e=(0,j.jsx)(r().sA,{id:"spaceSubscriptionBillingV2.upcomingInvoice",defaultMessage:"Upcoming invoice"}),t=(0,j.jsx)(S().v,{cost:{amount:p.total,currencyCode:p.currencyCode},trailingZeroDisplay:"stripIfInteger"});b.push({key:"upcoming",columns:[(0,j.jsx)(C,{formattedText:e},"upcoming"),(0,j.jsx)(C,{formattedText:t,style:m.charge},"upcoming"),(0,j.jsx)(C,{formattedText:(0,j.jsx)(j.Fragment,{children:"-"}),style:m.status},"upcoming"),(0,j.jsx)(D,{handleViewInvoice:()=>f(`${u().A.domainBaseUrl}${g}`)},"upcoming")]})}s.map((e=>{const t=(0,o().W_)(e.timestamp,"medium",a().locale),n=(0,j.jsx)(B,{event:e}),s="paid"!==e.status&&"processing"!==e.paymentStatus&&e.attempted,l=(0,j.jsx)(S().v,{cost:{amount:e.total,currencyCode:e.currencyCode},trailingZeroDisplay:"stripIfInteger"});b.push({key:e.id,columns:[(0,j.jsx)(C,{formattedText:t,paymentFailed:s},e.id),(0,j.jsx)(C,{formattedText:l,style:m.charge,paymentFailed:s},e.id),(0,j.jsx)(i(859428).A,{textWrap:!0,renderTooltip:()=>v,disableTooltip:!s,originGap:6,placement:i(962730).W.Bottom,render:t=>(0,j.jsx)("div",{...t,children:(0,j.jsx)(C,{formattedText:n,style:m.status,paymentFailed:s},e.id)})},e.id),(0,j.jsx)(D,{handleViewInvoice:()=>f(`${u().A.domainBaseUrl}/invoice/${e.id}`)},e.id)]})}));const h=[{key:"date",header:(0,j.jsx)("div",{style:{fontSize:14},children:(0,j.jsx)(r().sA,{id:"invoicesSectionBillingTab.dateColumnLabel",defaultMessage:"Date"})}),style:{width:"54%",padding:"3px 5px"}},{key:"charge",header:(0,j.jsx)("div",{style:{fontSize:14},children:(0,j.jsx)(r().sA,{id:"invoicesSectionBillingTab.charge",defaultMessage:"Charge"})}),style:{width:"20%",padding:"3px 5px"}},{key:"status",header:(0,j.jsx)("div",{style:{fontSize:14},children:(0,j.jsx)(r().sA,{id:"invoicesSectionBillingTab.status",defaultMessage:"Status"})}),style:{width:"20%",padding:"3px 5px"}},{key:"view",header:(0,j.jsx)(j.Fragment,{}),style:{width:"6%",padding:"3px 5px"}}];return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(i(317182).A,{columns:h,rows:b,tableStyle:m.tableBox,cellStyle:m.cell}),c&&(0,j.jsx)(A,{})]})};function A(){const e=(0,l().IS)((e=>({message:{textAlign:"center",marginTop:12,marginBottom:12,color:e.text.tertiary}})),[]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(x().A,{style:e.message,children:(0,j.jsx)(r().sA,{id:"invoices.results.empty",defaultMessage:"You have no invoices in this workspace"})}),(0,j.jsx)(h().A,{size:1})]})}function C(e){const{formattedText:t,paymentFailed:i,style:n}=e,a=(0,l().IS)((e=>({row:{...n,padding:"3px 7px",...i&&{color:e.text.uiRedPrimary}}})),[n,i]);return(0,j.jsx)("div",{style:a.row,children:t})}function D(e){const{handleViewInvoice:t}=e,i=(0,l().IS)((()=>({view:{padding:"3px 7px"}})),[]);return(0,j.jsx)(b().p,{style:i.view,onClick:t,children:(0,j.jsx)(r().sA,{id:"spaceSubscriptionBilling.invoicesSection.invoiceView.view",defaultMessage:"View"})})}function B(e){let{event:t}=e;const i=(0,l().IS)((e=>({pending:{color:e.icon.yellowPrimary},icon:{marginRight:4},iconStatus:{display:"flex",alignItems:"center"}})),[]);return"paid"===t.status?t.total<0?(0,j.jsx)(r().sA,{id:"spaceSubscriptionBilling.invoicesSection.invoiceStatus.credited",defaultMessage:"Credited"}):(0,j.jsx)(r().sA,{id:"spaceSubscriptionBilling.invoicesSection.invoiceStatus.paid",defaultMessage:"Paid"}):"processing"===t.paymentStatus?(0,j.jsxs)("div",{style:{...i.iconStatus,...i.pending},children:[(0,j.jsx)("div",{style:i.icon,children:(0,j.jsx)(y().Q,{iconGroup:f,colorName:"yellowPrimary",variantName:"small"})}),(0,j.jsx)(r().sA,{id:"spaceSubscriptionBilling.invoicesSection.invoiceStatus.pending",defaultMessage:"Pending"})]}):t.attempted?(0,j.jsxs)("div",{style:i.iconStatus,children:[(0,j.jsx)("div",{style:i.icon,children:(0,j.jsx)(y().Q,{iconGroup:v().F,colorName:"uiRedPrimary",variantName:"small"})}),(0,j.jsx)(r().sA,{id:"spaceSubscriptionBilling.invoicesSection.invoiceStatus.failedPayment",defaultMessage:"Failed payment"})]}):(0,j.jsx)(r().sA,{id:"spaceSubscriptionBilling.invoicesSection.invoiceStatus.due",defaultMessage:"Due"})}function w(e){const t=(0,p().X)("native_invoice_payment"),{spaceStore:i,events:n,upcomingInvoiceData:f}=e,v=(0,s().v3)(),b=(0,l().IS)((e=>({emptyList:{color:e.text.secondary,fontSize:14},header:{marginBottom:4,...t&&{borderBottom:0}},block:{marginTop:40}})),[t]),h=i.id,y=f?`/invoice/upcoming?spaceId=${h}`:void 0,x=0===n.length&&!y;return(0,j.jsxs)("div",{style:b.block,children:[(0,j.jsx)(c().A,{large:!0,divider:"full",style:b.header,children:(0,j.jsx)(r().sA,{id:"spaceSubscriptionBillingV2.invoices",defaultMessage:"Invoices"})}),t?(0,j.jsx)(M,{environment:v,events:n,isEmpty:x,upcomingInvoiceData:f,upcomingInvoiceUrl:y}):(0,j.jsxs)(j.Fragment,{children:[x?(0,j.jsx)("div",{style:b.emptyList,children:(0,j.jsx)(r().sA,{id:"spaceSubscriptionBilling.invoicesSection.noInvoicesMessage",defaultMessage:"This workspace has no payments yet."})}):null,y?(0,j.jsx)(g().S,{mainLabel:(0,j.jsx)(r().sA,{id:"spaceSubscriptionBillingV2.upcomingInvoice",defaultMessage:"Upcoming invoice"}),button:{label:(0,j.jsx)(r().sA,{id:"spaceSubscriptionBillingV2.viewInvoice",defaultMessage:"View invoice"}),onClick:()=>{const e=`${u().A.domainBaseUrl}${y}`;var t;v.device.isMobileNative?null===(t=v.mobileNative)||void 0===t||t.openExternalBrowser(e):d().f({environment:v,url:e})}}}):null,n.map((e=>{const t=(0,o().W_)(e.timestamp,"long",a().locale);return(0,j.jsx)(g().S,{mainLabel:t,valueLabel:(0,j.jsx)(r().sA,{id:"spaceSubscriptionBillingV2.invoiceSummary",defaultMessage:"{invoiceStatus} · {formattedAmount}",values:{invoiceStatus:(0,j.jsx)(m().S,{invoice:e}),formattedAmount:(0,j.jsx)(S().v,{cost:{amount:e.total,currencyCode:e.currencyCode},trailingZeroDisplay:"stripIfInteger"})}}),button:{label:(0,j.jsx)(r().sA,{id:"spaceSubscriptionBillingV2.viewInvoice",defaultMessage:"View invoice"}),onClick:()=>{const t=`${u().A.domainBaseUrl}/invoice/${e.id}`;var i;v.device.isMobileNative?null===(i=v.mobileNative)||void 0===i||i.openExternalBrowser(t):d().f({environment:v,url:t})}}},e.id)}))]})]})}},302995:(e,t,i)=>{i.r(t),i.d(t,{creditCardIcon:()=>s,iconDefinition:()=>a});i(296540);var n=i(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.12 15.25 11.75",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M5.5 11.031a.5.5 0 0 0-.5.5v1.219a.5.5 0 0 0 .5.5h2.011a.5.5 0 0 0 .5-.5v-1.219a.5.5 0 0 0-.5-.5z"}),(0,n.jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zM4.5 5.375a.875.875 0 0 0-.875.875v.825h12.75V6.25a.875.875 0 0 0-.875-.875zm-.875 8.375c0 .483.392.875.875.875h11a.875.875 0 0 0 .875-.875V8.175H3.625z"})]})},s=(0,i(340498).wt)("creditCard",a)},399995:(e,t,i)=>{i.d(t,{U:()=>c});i(16280);var n=()=>i(215087),a=()=>i(496414),s=()=>i(224701),l=()=>i(418583),o=()=>i(807778),r=()=>i(112527),d=()=>i(71904);async function c(e,t,i,c,u){const p=await r().getStripe();if(!p)throw new Error("Stripe is not available.");const g=await(0,d().y)({currencyCode:i,unpaidInvoices:c});if(g){a().m({message:l().D.updatingPaymentMethod}),await s().zA({environment:e,stripe:p,spaceStore:t,paymentMethodId:g.id}),a().V();const r=c.length;if((0,o().Ug)()&&r>0)for(const[o,d]of c.entries()){const c=u.formatNumber(d.total/Math.pow(10,n().r[i].minorUnitDigits),{style:"currency",currency:d.currencyCode,currencyDisplay:"symbol"});a().m({message:l().D.payingInvoice,interpolatedValues:{index:o+1,length:r,amount:c}}),await s().xj({environment:e,spaceStore:t,invoiceId:d.id,paymentMethodId:g.id}),a().V()}}}},418583:(e,t,i)=>{i.d(t,{A:()=>ke,D:()=>we});i(944114),i(898992),i(354520),i(581454);var n=i(296540),a=()=>i(662303),s=()=>i(484714),l=()=>i(852507),o=()=>i(56366),r=()=>i(401497),d=()=>i(484392),c=()=>i(869190),u=()=>i(857639),p=()=>i(909306),g=()=>i(762433),m=()=>i(47273),f=()=>i(952539),v=()=>i(166386),b=()=>i(979340),h=()=>i(816758),y=()=>i(959013),x=()=>i(821062),S=()=>i(534177),j=()=>i(252105),M=()=>i(901389),A=()=>i(209660),C=()=>i(84817),D=()=>i(554509),B=()=>i(859428),w=()=>i(843878),I=()=>i(8178),V=()=>i(47170),P=()=>i(365002),T=()=>i(58293),k=()=>i(562800),_=()=>i(962730),O=()=>i(765957),L=()=>i(217429),E=()=>i(404141),F=()=>i(303096),N=()=>i(224701),W=()=>i(944609),U=()=>i(504235),R=()=>i(399995),z=()=>i(72256),H=()=>i(324561),Y=()=>i(27716),K=()=>i(807778),$=()=>i(30858),q=()=>i(10984),G=()=>i(960236),X=()=>i(8540),Z=()=>i(539412),Q=()=>i(803025),J=()=>i(334992),ee=()=>i(911964),te=()=>i(408095),ie=()=>i(805061),ne=()=>i(981046),ae=()=>i(749240),se=()=>i(753735),le=()=>i(278597),oe=()=>i(729369),re=()=>i(469776),de=()=>i(208993);const ce=(0,i(340498).xh)("infoCircle",{default:{loader:()=>i.e(7457).then(i.bind(i,525884))},small:{loader:()=>i.e(7457).then(i.bind(i,395546))},fill:{loader:()=>i.e(7457).then(i.bind(i,879526))},fillSmall:{loader:()=>i.e(7457).then(i.bind(i,361173))}},["info","circle","information","help","details"]);var ue=()=>i(179030),pe=i(474848);const ge="Learn more",me={immediate:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.may13PackagingChanges.scheduledChanges.immediateMigration",defaultMessage:"{message}",values:{message:"On August 13, your price and subscription will migrate to a new price and subscription."}}),on_renewal:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.may13PackagingChanges.scheduledChanges.migrationOnRenewal",defaultMessage:"{message}",values:{message:"Starting August 13, your price and subscription will migrate to a new price and subscription upon your next renewal."}})};function fe(e){const{legacyPriceData:t}=e;return(0,pe.jsx)(ue().l,{display:"inline",tint:"gray",iconGroup:ce,label:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.may13PackagingChanges.banner.label",defaultMessage:"The {subscriptionTier} plan is changing",values:{subscriptionTier:(0,d().A)(t.tierForBanner)}}),description:me[t.bannerType],actions:[{label:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.may13PackagingChanges.banner.learnMore.label",defaultMessage:"{message}",values:{message:ge}}),onClick:()=>{window.open("https://www.notion.com/blog/notion-ai-for-work","_blank")}}]})}var ve=()=>i(517492),be=()=>i(83489);function he(e){let{spaceId:t,billingData:i,scheduledChanges:n,periodEndDate:l}=e;const o=(0,y().tz)(),r=(0,s().v3)(),d=(0,c().eV)({value:l,preset:"medium",locale:a().locale}),u=o.formatList(n.filter(Boolean),{type:"conjunction",style:"narrow"});return(0,pe.jsx)(ue().l,{display:"inline",tint:"blue",iconGroup:be().H,label:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBilling.scheduledChanges.pendingChanges.title",defaultMessage:"Pending changes scheduled for {date}",values:{date:d}}),description:u,actions:[{label:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBilling.scheduledChanges.cancel.label",defaultMessage:"Cancel changes"}),onClick:()=>W().Yv({environment:r,billingData:i})}]})}var ye=()=>i(765411),xe=()=>i(343916),Se=()=>i(167355),je=()=>i(671812);function Me(e){const{environment:t,spaceStore:i,currencyCode:n,unpaidInvoices:a,intl:s}=e,l=(0,Z().x9)(),o=(0,Z().jc)();return a.length<=0?null:(0,pe.jsx)(ue().l,{display:"inline",tint:"red",iconGroup:Se().F,label:(0,pe.jsx)(D().D,{styleName:"UIRegular-14px/Regular",children:Ae(l)}),actions:[{label:Ce(l),iconGroup:xe().i,onClick:e=>{if(l){const t=(0,je().a)(o);t&&t(e)}else(0,R().U)(t,i,n??ne().A.selectedCurrencyCode,a,s)}}]})}function Ae(e){return e?(0,pe.jsx)(y().sA,{defaultMessage:"Access to Notion is limited because we couldn’t process your last payment",id:"spaceSubscriptionBilling.unpaidInvoiceBanner.uncollectibleTitle"}):(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBilling.unpaidInvoiceBanner.title",defaultMessage:"We were unable to process payment on one or more past invoices. Please update your payment method to retry on all unpaid invoices."})}function Ce(e){return e?(0,pe.jsx)(y().sA,{defaultMessage:"View unpaid invoice",id:"spaceSubscriptionBilling.unpaidInvoiceBanner.uncollectibleLabel"}):(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBilling.unpaidInvoiceBanner.button.label",defaultMessage:"Update payment method"})}var De=()=>i(450930);const Be={marginBottom:4},we=(0,y().YK)({offline:{id:"spaceSubscriptionBillingV2.offline.message",defaultMessage:"Please go online to manage billing."},updatingPaymentMethod:{id:"subscriptionSettings.updatingPaymentMethodMessage",defaultMessage:"Updating your payment method…"},addCountryForVat:{id:"spaceSubscriptionBillingV2.vatId.missingCountry",defaultMessage:"To update your VAT/GST number, please update your billing address."},ineligibleCountryForVat:{id:"spaceSubscriptionBillingV2.vatId.vatNotRequired",defaultMessage:"A VAT/GST number is not required for your tax jurisdiction."},payingInvoice:{id:"spaceSubscriptionBillingV2.payingInvoiceMessage",defaultMessage:"Charging invoice {index} / {length} for {amount}..."}}),Ie=(0,y().YK)({planChargeStartsOn:{defaultMessage:"{planCharge} per {interval} · Starts on {date}",id:"spaceSubscriptionBillingV2.priceAndRenewalDate.starts"},planChargeCancelsOn:{defaultMessage:"{planCharge} per {interval} · Cancels {date}",id:"spaceSubscriptionBillingV2.priceAndRenewalDate.cancels"},planChargeRenewsOn:{defaultMessage:"{planCharge} per {interval} · Renews {date}",id:"spaceSubscriptionBillingV2.priceAndRenewalDate.renews"},priceOnly:{defaultMessage:"{planCharge} per {interval}",id:"spaceSubscriptionBillingV2.priceAndRenewalDate.priceOnly"},month:{defaultMessage:"month",id:"spaceSubscriptionBillingV2.priceAndRenewalDate.monthInterval"},year:{defaultMessage:"year",id:"spaceSubscriptionBillingV2.priceAndRenewalDate.yearInterval"},renewalPriceChange:{defaultMessage:"*Renewal invoice at new price of {renewalPlanChargeDisplay} per {interval}",id:"spaceSubscriptionBillingV2.priceChange"}}),Ve={student:{percent_off:b().v0.educationPlusPlan,seat_count:b().v0.educationPlusPlan},personal:{percent_off:b().v0.personalFree,seat_count:b().v0.personalFree},plus:{percent_off:b().v0.plusWithOfferPercentage,seat_count:b().v0.plusWithOfferSeats},business:{percent_off:b().v0.businessWithOffer,seat_count:b().v0.businessWithOfferSeats},enterprise:{percent_off:b().v0.enterpriseWithOffer,seat_count:b().v0.enterpriseWithOfferSeats},enterprise_limited:{percent_off:b().v0.enterpriseLimitedWithOffer,seat_count:b().v0.enterpriseLimitedWithOfferSeats}};function Pe(e){let{product:t,intl:i,offer:n,offerEndDate:a}=e;if("free"===t)return null;if(n&&a&&"coupon"===n.type){const e=Ve[t];if("percent_off"===n.discount.type)return i.formatMessage(e.percent_off,{date:a.toLocaleString(),percentage:(0,v().vk)(n,"whole_number")});if("seat_count"===n.discount.type)return i.formatMessage(e.seat_count,{date:a.toLocaleString(),seats:n.discount.seatCount});n.discount}return(0,b().u2)({product:t,intl:i})}function Te(e){let{billedProduct:t,effectiveProduct:i,intl:n,salesStatus:a,packagingChangesEnabled:s,offer:l,offerEndDate:o,billingData:r}=e;const d=Pe({product:(0,q().kg)({subscriptionTier:t,currentSubscriptionTier:t,salesStatus:a,packagingChangesEnabled:s}),intl:n,offer:l,offerEndDate:o}),c=Pe({product:(0,q().kg)({subscriptionTier:i,currentSubscriptionTier:t,salesStatus:a,packagingChangesEnabled:s}),intl:n,offer:l,offerEndDate:o});return"free"===t&&"free"===i?n.formatMessage(b().v0.free):"free"===t&&"free"!==i&&(0,g().TB)(r)?n.formatMessage({defaultMessage:"{effectiveProductMessage} trial",id:"planNameMessage.freePlanWithTrial"},{effectiveProductMessage:c}):t!==i?n.formatMessage({defaultMessage:"{billedProductMessage} + {effectiveProductMessage} Trial",id:"planNameMessage.planWithTrial"},{billedProductMessage:d,effectiveProductMessage:c}):d}const ke=(0,y().j4)((function(e){let{spaceStore:t,customerData:n,upcomingInvoiceData:a,billingData:s,billingEvents:l}=e;const r=(0,y().tz)();return(0,o().O$)(i(227440).A).online&&s?(0,pe.jsx)(Je,{spaceStore:t,customerData:n,upcomingInvoiceData:a,billingData:s,billingEvents:l}):(0,pe.jsx)(w().Ay,{children:(0,pe.jsx)(i(125565).A,{isSmall:!0,style:{textAlign:"center"},children:r.formatMessage(we.offline)})})}));function _e(e){var t;let{billingData:i}=e;switch(null==i||null===(t=i.paymentMethod)||void 0===t?void 0:t.type){case"invoice":return(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.paymentMethod.value.achOrWireTransfer",defaultMessage:"ACH or Wire Transfer"});case"card":return(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.paymentMethodType.creditCard",defaultMessage:"Credit card"});case"link":return(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.paymentMethodType.link",defaultMessage:"Stripe Link"});case"sepa_debit":return(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.paymentMethodType.sepaDebit",defaultMessage:"SEPA Direct Debit"});case"kakao_pay":return(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.paymentMethodType.kakaoPay",defaultMessage:"Kakao Pay"});case void 0:return(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.paymentMethod.value.none",defaultMessage:"None"});default:return(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.paymentMethodType.otherPaymentOptionLabel",defaultMessage:"Other"})}}function Oe(e){let{billingData:t}=e;const i=null==t?void 0:t.paymentMethod;switch(null==i?void 0:i.type){case"invoice":return(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.paymentMethod.value.achOrWireTransfer",defaultMessage:"ACH or Wire Transfer"});case"card":return(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.paymentMethod.creditCard",defaultMessage:"{creditCardBrand} ending in {lastFourDigits}",values:{creditCardBrand:(0,d().A)(i.brand),lastFourDigits:i.last4}});case"sepa_debit":return(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.paymentMethod.sepaDebit",defaultMessage:"IBAN ending in {lastFourDigits}",values:{lastFourDigits:i.last4}});case void 0:return(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.paymentMethod.value.none",defaultMessage:"None"});default:return null}}function Le(e){let{billingData:t}=e;return"month"===(0,g().q8)(t)?(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.subscriptionSettingsSection.billingInterval.value.monthly",defaultMessage:"Monthly"}):(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.subscriptionSettingsSection.billingInterval.value.yearly",defaultMessage:"Yearly"})}function Ee(){const e=(0,r().IS)((e=>({button:{color:e.text.uiBluePrimary,background:e.tint.uiBlue,border:void 0},hovered:{background:e.tint.uiBlueHover},pressed:{background:e.tint.uiBluePressed}})),[]),t=(0,s().v3)(),i=(0,V().O)(),n=(0,G().lh)({spaceId:i}),a=(0,se().uq)(n),l=(0,g().eh)(n,"ai");return a?null:(0,pe.jsx)(oe().S,{mainLabel:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.additionalFeatures",defaultMessage:"Additional features"}),metadataLabel:l?(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBilling.upgradeAi",defaultMessage:"Notion AI responses"}):null,valueLabel:(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(y().sA,{defaultMessage:"Notion AI",id:"spaceSubscriptionUpgradeModal.orderSummary.ai.addOn"}),(0,pe.jsx)(De().B,{tooltipMessage:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBilling.ai.description.tooltip",defaultMessage:"Notion AI for Q&A, Autofill, Writer, and more"}),customContainerStyles:{marginTop:0}})]}),button:{label:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBilling.addAi",defaultMessage:"Add AI"}),customButtonStyles:e.button,customHoveredButtonStyles:e.hovered,customPressedButtonStyles:e.pressed,onClick:()=>{j().QP(t,{from:"billing_page",for_subscription_tier:(0,g().AI)(n),addOnFeature:"ai"}),(0,ee().showUpgradeModal)({environment:t,spaceStore:O().default.state.currentSpaceStore,billingData:n,product:"ai",from:"billing_page"})}}})}function Fe(e){const{addOn:t,billingData:i,spaceStore:n}=e,a=t.price.product;return"ai"===a?(0,pe.jsx)(We,{addOn:{...t,price:{...t.price,product:a}},billingData:i}):"sites_custom_hostnames"===a?(0,pe.jsx)(Ue,{addOn:{...t,price:{...t.price,product:a}},billingData:i,spaceStore:n}):void(0,S().HB)(a)}function Ne(e){var t,i;const{addOn:n,billingData:s}=e,l=(0,y().tz)(),o=null===(t=(0,T().r)())||void 0===t?void 0:t.getSpaceId(),r=(0,X().X)();if(!o)return null;const d=s.subscription,u=(0,g().AW)(s),p=(0,g().d$)(s),f=n.price.billingInterval,b=(0,$().yX)(r,p,f),h=(0,g().Mr)(n.price.product),x=Y().Ft(s,h),S=null==d||null===(i=d.currentPeriodEnd)||void 0===i?void 0:i.toMillis(),j=(0,g().i5)(s),M=n.price.unitAmount.amount,A=n.price.unitAmount.currencyCode,C=n.price.billingInterval,D=n.quantity,w=M*D,I=(0,pe.jsx)(ve().v,{cost:{amount:w,currencyCode:A},trailingZeroDisplay:"stripIfInteger"});if(I&&C){const e=He(C,l);if(x)return(0,pe.jsx)(y().sA,{...Ie.planChargeCancelsOn,values:{planCharge:I,interval:e,date:(0,c().eV)({value:x,preset:"medium",locale:a().locale})}});if(r&&b){const t=(0,pe.jsx)(ve().v,{cost:{amount:(0,v().oh)(r.offer,D,M,"decimal_number"),currencyCode:A},trailingZeroDisplay:"stripIfInteger"});return(0,pe.jsx)(Ye,{intl:l,planCharge:I,discountedPlanCharge:t,intervalMessage:e})}if(j&&"free"===u)return(0,pe.jsx)(y().sA,{...Ie.planChargeStartsOn,values:{planCharge:I,interval:e,date:(0,c().eV)({value:j,preset:"medium",locale:a().locale})}});if(S){if("sites_custom_hostnames"===n.price.product){var V;const t=(0,m().yp)(null===(V=s.subscription)||void 0===V?void 0:V.pending,"sites_custom_hostnames"),i=t?t.price.unitAmount.amount*t.quantity:void 0;if(i&&i!==w)return(0,pe.jsx)(B().A,{textWrap:!0,renderTooltip:()=>(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.sitesRenewalCost",defaultMessage:"Price will update to {cost} per {interval} starting on {date}",values:{cost:(0,pe.jsx)(ve().v,{cost:{amount:i,currencyCode:A},trailingZeroDisplay:"stripIfInteger"}),interval:e,date:(0,c().W_)(S,"medium",a().locale)}}),placement:_().W.Bottom,alignment:_().C.Center,render:t=>(0,pe.jsx)("div",{...t,children:(0,pe.jsx)(y().sA,{...Ie.planChargeRenewsOn,values:{planCharge:I,interval:e,date:(0,c().W_)(S,"medium",a().locale)}})})})}return(0,pe.jsx)(y().sA,{...Ie.planChargeRenewsOn,values:{planCharge:I,interval:e,date:(0,c().W_)(S,"medium",a().locale)}})}return(0,pe.jsx)(y().sA,{...Ie.priceOnly,values:{planCharge:I,interval:e}})}return null}function We(e){var t;const{billingData:i,addOn:a}=e,l=(0,s().v3)(),o=(0,y().tz)(),[r,d]=n.useState(!1),c=(0,X().X)(),u=(0,g().bO)(i),p=(0,P()._)(),m=u?o.formatMessage(F().Ks.paymentMethodUnverified):p?o.formatMessage(te().P$.salesAssistedDisabled):void 0,f=Y().Ft(i,a.price.product),h={label:f?(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.resubscribe",defaultMessage:"Resubscribe"}):(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.removeFromPlan",defaultMessage:"Remove from plan"}),onClick:async()=>f?(await W().Yv({environment:l,billingData:i}),j().$7(l,{type:"resubscription",plan_selected:"ai"}),null):(d(!0),j().$7(l,{type:"removal",plan_selected:"ai"}),null),tooltip:m,isDisabled:Boolean(m)},x=a.price.billingInterval,S=(0,g().d$)(i),M=(0,$().yX)(c,S,x),A=null==c?void 0:c.offer,C=M&&"coupon"===(null==A?void 0:A.type)&&"percent_off"===A.discount.type?o.formatMessage(b().v0.aiCoreWithOfferPercentage,{date:M.toLocaleString(),percentage:(0,v().vk)(A,"whole_number")}):M&&"coupon"===(null==A?void 0:A.type)&&"seat_count"===A.discount.type?o.formatMessage(b().v0.aiCoreWithOfferSeats,{date:M.toLocaleString(),seats:A.discount.seatCount}):(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.valueLabel.aiCore",defaultMessage:"Notion AI core"}),D=null==i||null===(t=i.subscription)||void 0===t||null===(t=t.currentPeriodEnd)||void 0===t?void 0:t.toMillis();return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(oe().S,{mainLabel:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.additionalFeatures",defaultMessage:"Additional features"}),metadataLabel:p?void 0:(0,pe.jsx)(Ne,{addOn:a,billingData:i}),valueLabel:C,button:h}),r?(0,pe.jsx)(re().am,{currentPeriodEnd:D,isOpen:r,onClose:()=>d(!1)}):null]})}function Ue(e){const{addOn:t,billingData:i,spaceStore:n}=e,a=(0,r().IS)((e=>({tooltipFirstLine:{whiteSpace:"nowrap",color:e.text.contrastPrimary},tooltipSecondLine:{whiteSpace:"nowrap",color:e.text.contrastSecondary}})),[]),s={label:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.manageDomainSitesAdmin",defaultMessage:"Manage Domain"}),onClick:()=>{A().Ow({currentTab:"sites"})},tooltip:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.button.SitesTooltip",defaultMessage:"<lineOne>Go to Sites tab to manage your custom domain</lineOne>{br}<lineTwo>Delete domain from sites tab to remove add-on</lineTwo>",values:{br:(0,pe.jsx)("br",{}),lineOne:e=>(0,pe.jsx)("span",{style:a.tooltipFirstLine,children:e}),lineTwo:e=>(0,pe.jsx)("span",{style:a.tooltipSecondLine,children:e})}})},l=(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.valueLabel.sitesCustomHostnames",defaultMessage:"Custom domain"}),(0,pe.jsx)(et,{spaceStore:n})]});return(0,pe.jsx)(oe().S,{mainLabel:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.additionalFeatures",defaultMessage:"Additional features"}),metadataLabel:(0,pe.jsx)(Ne,{addOn:t,billingData:i}),valueLabel:l,button:s})}function Re(e){const{billingData:t,spaceStore:i}=e,a=(0,o().K8)((()=>(0,p().ze)({billingData:t,experimentService:L().default,spaceId:i.id})),[t,i]),s=(0,g().$d)(t);return(0,pe.jsxs)(pe.Fragment,{children:[a?(0,pe.jsx)(Ee,{}):null,s.map((e=>(0,pe.jsx)(n.Fragment,{children:(0,pe.jsx)(Fe,{billingData:t,addOn:e,spaceStore:i})},e.price.product)))]})}async function ze(e,t,i){const n=await(0,U().showAddressModal)({defaultValue:t});n&&((0,x().A)(n,t)||await N().yU({environment:i,spaceStore:e,address:n}))}function He(e,t){switch(e){case"month":return t.formatMessage(Ie.month);case"year":return t.formatMessage(Ie.year);default:(0,S().HB)(e)}}function Ye(e){const{intl:t,planCharge:i,discountedPlanCharge:n,intervalMessage:a}=e;return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)("a",{style:{textDecorationLine:"line-through",marginRight:"4px"},children:i}),t.formatMessage(Ie.priceOnly,{planCharge:n,interval:a})]})}function Ke(e){var t,i;let{billingData:s}=e;const l=(0,y().tz)(),r=(0,Q().q)(),d="sales_assisted"===r,p=(0,o().K8)((()=>(0,K().Le)()),[]),[f,h]=n.useState(!1),x=(0,g().AI)(s),S=(0,g().d$)(s),j=(0,g().AW)(s);let M=(0,g().kQ)(s,"plan");(0,g().TB)(s)&&!(0,g().HY)(s)&&(M=(0,g().KH)(s,"plan"));const A=null===(t=M)||void 0===t?void 0:t.price.unitAmount.amount,C=(0,V().O)(),D=(0,g().Ry)(s)??"USD",B=Y().Ft(s,"plan"),w=(0,g().q8)(s),I=(0,X().X)();if(!C)return null;const P=(0,g().yB)({spaceId:C,logFunction:u().log.bind(u()),billingData:s}),T="stripe"===(null==s?void 0:s.provider),k=A&&T&&P?(0,pe.jsx)(ve().v,{cost:{amount:A*P,currencyCode:D},trailingZeroDisplay:"stripIfInteger"}):void 0,_=(0,$().yX)(I,S,w);let O=null,L=null;const F=null==s||null===(i=s.subscription)||void 0===i||null===(i=i.currentPeriodEnd)||void 0===i?void 0:i.toMillis();if(k&&w){const e=He(w,l),t=(0,g().i5)(s);if(B)O=l.formatMessage(Ie.planChargeCancelsOn,{planCharge:k,interval:e,date:(0,c().eV)({value:B,preset:"medium",locale:a().locale})});else if(I&&_&&A&&T&&P){const t=(0,pe.jsx)(ve().v,{cost:{amount:(0,v().oh)(I.offer,P,A,"decimal_number"),currencyCode:D},trailingZeroDisplay:"stripIfInteger"});O=(0,pe.jsx)(Ye,{intl:l,planCharge:k,discountedPlanCharge:t,intervalMessage:e})}else if("free"===j&&t)O=l.formatMessage(Ie.planChargeStartsOn,{planCharge:k,interval:e,date:(0,c().eV)({value:t,preset:"medium",locale:a().locale})});else if(F){var W;O=l.formatMessage(Ie.planChargeRenewsOn,{planCharge:k,interval:e,date:(0,c().W_)(F,"medium",a().locale)});const i=(0,m().yp)(null===(W=s.subscription)||void 0===W?void 0:W.pending,"plan"),n=i?i.price.unitAmount.amount*i.quantity:void 0;if(t&&!s.paymentMethod&&(O=l.formatMessage(Ie.planChargeCancelsOn,{planCharge:k,interval:e,date:(0,c().eV)({value:t,preset:"medium",locale:a().locale})})),n&&A&&P&&n!==A*P){const e=(0,pe.jsx)(ve().v,{cost:{amount:n,currencyCode:D},trailingZeroDisplay:"stripIfInteger"}),t=i?He(i.price.billingInterval,l):void 0;L=l.formatMessage(Ie.renewalPriceChange,{renewalPlanChargeDisplay:e,interval:t})}}else O=l.formatMessage(Ie.priceOnly,{planCharge:k,interval:e})}let U=null;return d?U=l.formatMessage(te().P$.salesAssistedDisabled):null!=s&&s.subscription&&(Y().HN(s)||Boolean(Y().Ft(s,"plan")))&&(U=(0,pe.jsx)(tt,{title:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.editPeriod.pendingPlanChangeTooltip",defaultMessage:"You have a plan update scheduled for {date}",values:{date:(0,c().eV)({value:s.subscription.currentPeriodEnd,preset:"medium",locale:a().locale})}}),description:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.editPeriod.pendingChangeTooltipDescription",defaultMessage:"Use the banner above to cancel changes"})})),(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(oe().S,{mainLabel:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.plan",defaultMessage:"Plan"}),metadataLabel:O,bylineLabel:L,valueLabel:"free"===x?l.formatMessage(b().v0.free):Te({billedProduct:j,effectiveProduct:x,intl:l,salesStatus:r,packagingChangesEnabled:p,offer:null==I?void 0:I.offer,offerEndDate:_,billingData:s}),button:{label:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.changePlan",defaultMessage:"Change plan"}),isDisabled:Boolean(U),tooltip:U,tooltipWidth:206,onClick:()=>h(!0)}}),f?(0,pe.jsx)(re().hv,{billingInterval:w??"month",billingData:s,currentPeriodEnd:F,salesStatus:r,isOpen:f,onClose:()=>h(!1),onClickManageGuests:()=>{E().A.setState({open:!0,openedFrom:"share_menu",currentTab:"members",defaultSubtab:void 0,highlightedSetting:void 0})},onRequestDowngrade:N().wX,onRequestUpgrade:ee().showUpgradeModal}):null]})}function $e(e){let{billingData:t,intl:i}=e;const l=(0,s().v3)(),o=(0,P().Y)(t,ae().subscriptionDataStoreInstance),r=(0,n.useCallback)((()=>function(e,t){const i="year"===((0,g().q8)(t)??"year")?"month":"year";(0,z().o)(e,{desiredInterval:i,from:"billing_page",analyticsArgs:{from:"billing_page"}})}(l,t)),[l,t]),d=(0,g().bO)(t);if(!Y().Yn(t))return null;let u;return d?u=i.formatMessage(F().Ks.paymentMethodUnverified):o?u=(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.editPeriod.salesAssistedTooltip",defaultMessage:"Please contact your Notion account manager to make changes to your plan"}):null!=t&&t.subscription&&(Y().Sk(t)||Boolean((0,g().D_)(t)))&&(u=(0,pe.jsx)(tt,{title:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.editPeriod.pendingChangeTooltip",defaultMessage:"You have a billing period update scheduled for {date}",values:{date:(0,c().eV)({value:t.subscription.currentPeriodEnd,preset:"medium",locale:a().locale})}}),description:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.editPeriod.pendingChangeTooltipDescription",defaultMessage:"Use the banner above to cancel changes"})})),(0,pe.jsx)(oe().S,{mainLabel:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.billingPeriod",defaultMessage:"Billing period"}),valueLabel:(0,pe.jsx)(Le,{billingData:t}),button:{label:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.editPeriod",defaultMessage:"Edit period"}),onClick:r,isDisabled:Boolean(u),tooltip:u,tooltipWidth:206}})}function qe(e){let{billingData:t,spaceStore:i}=e;const n=(0,o().K8)((()=>i.getMemberCountFromPublicSpaceData()),[i]),a=(0,H().Q7)(i.id,t,n??0);return(0,pe.jsx)(oe().S,{metadataLabel:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.paidSeats.numberOfSeats",defaultMessage:"{numberOfSeats, plural, one {# seat} other {# seats}}",values:{numberOfSeats:a}}),mainLabel:(0,pe.jsxs)(C().Y1,{align:"center-left",direction:"horizontal",gap:4,children:[(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.paidSeats",defaultMessage:"Paid seats"}),(0,pe.jsx)(de().W,{tooltipWidth:215,tooltipTitle:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.paidSeatsTooltip",defaultMessage:"The number of seats that your workspace is currently paying for."}),tooltipDescription:(0,pe.jsx)(y().sA,{id:"spaceSettings.people.peopleDashboard.clickToLearnMore",defaultMessage:"Click to learn more"}),buttonProps:{href:"https://www.notion.com/help/billing-and-payment-info"}})]}),button:{label:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.manageMembers",defaultMessage:"Manage members"}),onClick:()=>{A().Ow({currentTab:"members"})}}})}function Ge(e){let{billingData:t,spaceStore:i}=e;const n=(0,s().v3)();return(0,pe.jsx)(oe().S,{mainLabel:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.billingEmail",defaultMessage:"Billing email"}),valueLabel:(null==t?void 0:t.email)??"",button:{label:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.editEmail",defaultMessage:"Edit email"}),onClick:()=>async function(e,t,i){const n=await(0,U().showEmailModal)({defaultValue:null==t?void 0:t.email});n&&n!==(null==t?void 0:t.email)&&await N().nV({environment:i,spaceStore:e,billingEmail:n,from:"space_settings-billing_tab"})}(i,t,n)}})}function Xe(e){let{billingData:t,spaceStore:i,intl:n,unpaidInvoices:a}=e;const l=(0,s().v3)(),r=(0,o().K8)((()=>(0,g().Ry)(t)??ne().A.selectedCurrencyCode),[t]),d=(0,g().bO)(t);return(0,pe.jsx)(oe().S,{mainLabel:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.paymentMethod",defaultMessage:"Payment method"}),valueLabel:(0,pe.jsx)(_e,{billingData:t}),metadataLabel:(0,pe.jsx)(Oe,{billingData:t}),button:{label:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.editMethod",defaultMessage:"Edit method"}),onClick:()=>(0,R().U)(l,i,r,a,n),isDisabled:d,tooltip:d?n.formatMessage(F().Ks.paymentMethodUnverified):void 0}})}function Ze(e){let{address:t,spaceStore:i}=e;const n=(0,s().v3)();return(0,pe.jsx)(oe().S,{mainLabel:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.billedTo",defaultMessage:"Billed to"}),valueLabel:(0,pe.jsx)(ye().q,{layout:"condensed",address:t}),button:{label:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.editInformation",defaultMessage:"Edit information"}),onClick:()=>ze(i,t,n)}})}function Qe(e){var t;let{customerData:i,spaceStore:n,billingData:a}=e;const l=(0,s().v3)(),o=(0,y().tz)(),r=null==a||null===(t=a.address)||void 0===t?void 0:t.country,d=r?h().XH[r]:void 0;return(0,pe.jsx)(oe().S,{mainLabel:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.vatGst",defaultMessage:"VAT/GST number"}),valueLabel:(0,pe.jsx)("div",{children:i.vatId||"-"}),button:{label:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.editNumber",defaultMessage:"Edit number"}),onClick:()=>async function(e,t,i,n,a){var s;const l=null==i||null===(s=i.address)||void 0===s?void 0:s.country;if(!l)return void M().f1(a.formatMessage(we.addCountryForVat));if(!h().XH[l])return void M().f1(a.formatMessage(we.ineligibleCountryForVat));const o=await(0,U().showVatIdModal)({defaultValue:t.vatId});o&&o!==t.vatId&&await N().sC({environment:n,spaceStore:e,vatId:o})}(n,i,a,l,o),isDisabled:!d,tooltip:d?null:o.formatMessage(r?we.ineligibleCountryForVat:we.addCountryForVat)}})}function Je(e){let{billingData:t,customerData:i,spaceStore:n,upcomingInvoiceData:a,billingEvents:r}=e;const d=(0,s().v3)(),c=(0,y().tz)(),{isMobile:u,isPhone:p}=(0,s().Y0)(),m=(0,J().A)(n),v=(0,o().K8)((()=>(0,K().Ug)()),[]),b=(0,o().K8)((()=>ie().c.getData(d,{spaceId:n.id})),[d,n.id]),h=(0,o().K8)((()=>void 0!==(null==b?void 0:b.bannerType)),[b]),{scheduledChanges:x,periodEndDate:S}=(0,Y().su)(t),j=(0,o().K8)((()=>t&&x.length>0&&null!==S),[t,x,S]),M=(0,Z().x9)(),A=v||M,D=(0,f().bO)(t).map((e=>e.externalId)),B=r.filter((e=>D.includes(e.id))),V=(0,g().Ry)(t)??"USD",P=[];h&&null!=b&&b.bannerType&&P.push((0,pe.jsx)(fe,{legacyPriceData:b})),j&&S&&P.push((0,pe.jsx)(he,{spaceId:n.id,billingData:t,scheduledChanges:x,periodEndDate:S})),A&&P.push((0,pe.jsx)(Me,{environment:d,spaceStore:n,currencyCode:V,unpaidInvoices:B,intl:c}));const T=P.length>0,k=(0,o().K8)((()=>"billing"===E().A.state.currentTab&&"address"===E().A.state.defaultSubtab),[]);return(0,l().w)((()=>{k&&async function(){await ze(n,null==t?void 0:t.address,d)}()})),(0,pe.jsxs)(w().Ay,{contentPaddingLeftRight:p?0:(0,w().AL)(u),contentPaddingTopBottom:p?0:u?18:36,children:[p?null:(0,pe.jsx)(I().A,{large:!0,divider:T?"none":"full",style:Be,children:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.billing",defaultMessage:"Billing"})}),T?(0,pe.jsx)(C().Y1,{direction:"vertical",gap:16,padding:"16px 0px 12px 0px",children:P}):null,(0,pe.jsx)(Ke,{billingData:t}),(0,pe.jsx)(Re,{billingData:t,spaceStore:n}),(0,pe.jsx)($e,{billingData:t,intl:c}),m&&(0,pe.jsx)(qe,{billingData:t,spaceStore:n}),(0,pe.jsx)("div",{style:{height:40,flexShrink:0}}),(0,pe.jsx)(I().A,{large:!0,divider:"full",style:Be,children:(0,pe.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.paymentDetails",defaultMessage:"Payment details"})}),(0,pe.jsx)(Xe,{billingData:t,spaceStore:n,intl:c,unpaidInvoices:B}),(0,pe.jsx)(Ze,{spaceStore:n,address:null==t?void 0:t.address}),(0,pe.jsx)(Ge,{billingData:t,spaceStore:n}),(0,pe.jsx)(Qe,{customerData:i,billingData:t,spaceStore:n}),(0,pe.jsx)(le().g,{spaceStore:n,events:r,upcomingInvoiceData:a})]})}function et(e){const{spaceStore:t}=e,i=(0,o().K8)((()=>k().$o(t).filter((e=>"custom"===e.getDomainType())).map((e=>e.getDomainName()))),[t]);return(0,pe.jsx)(pe.Fragment,{children:i.map(((e,t)=>(0,pe.jsxs)("span",{children:[" · ",e]},t)))})}function tt(e){let{title:t,description:i}=e;return(0,pe.jsxs)(C().Y1,{gap:2,direction:"vertical",children:[(0,pe.jsx)(D().D,{styleName:"UISmall-12px/Medium",colorName:"contrastPrimary",children:t}),(0,pe.jsx)(D().D,{styleName:"UISmall-12px/Regular",colorName:"contrastSecondary",children:i})]})}},450930:(e,t,i)=>{i.d(t,{B:()=>r});i(296540);var n=()=>i(401497),a=()=>i(133033),s=()=>i(859428),l=()=>i(962730),o=i(474848);function r(e){const{tooltipMessage:t,customContainerStyles:i,tooltipWidth:r,overlayContainerZIndex:d}=e,c=function(e){return(0,n().IS)((t=>({tooltip:{width:e??"300px"},tooltipIcon:{height:14,width:14,fill:t.icon.tertiary,left:6},tooltipIconContainer:{position:"absolute",marginLeft:4,marginTop:2}})),[e])}(r);return(0,o.jsx)(s().A,{placement:l().W.Right,style:c.tooltip,render:e=>(0,o.jsx)("span",{...e,style:{...c.tooltipIconContainer,...i},children:(0,a().$)(c.tooltipIcon)}),renderTooltip:()=>t,textWrap:!0,overlayContainerZIndex:d})}},469776:(e,t,i)=>{i.d(t,{S4:()=>o,am:()=>l,hv:()=>s});var n=()=>i(645873);const a={DowngradeModal:new(n().O2)("DowngradeModal",(async()=>Promise.all([i.e(68137),i.e(50026),i.e(1172),i.e(10815)]).then(i.bind(i,572143)))),RemoveAddOnModal:new(n().O2)("RemoveAddOnModal",(async()=>Promise.all([i.e(68137),i.e(50026),i.e(51466)]).then(i.bind(i,3031)))),DeletePaidWorkspaceModal:new(n().O2)("DeletePaidWorkspaceModal",(async()=>Promise.all([i.e(68137),i.e(50026),i.e(98906)]).then(i.bind(i,876963))))},s=(0,n()._h)(a.DowngradeModal,(e=>e.DowngradeModal)),l=(0,n()._h)(a.RemoveAddOnModal,(e=>e.RemoveAddOnModal)),o=(0,n()._h)(a.DeletePaidWorkspaceModal,(e=>e.DeletePaidWorkspaceModal))},497215:(e,t,i)=>{i.d(t,{l:()=>o});i(296540);var n=()=>i(401497),a=()=>i(84817),s=()=>i(331542),l=i(474848);function o(e){const t=e.shouldShowSpinner,i=(0,n().IS)((()=>({hidden:{opacity:0,transition:"opacity 0.3s ease-in-out"},visible:{opacity:1,transition:"opacity 0.3s ease-in-out"}})),[]);return(0,l.jsx)(a().Y1,{width:"fill",height:"fill",padding:48,align:"center",style:t?i.visible:i.hidden,children:(0,l.jsx)(s().A,{legacySize:24})})}},504235:(e,t,i)=>{i.r(t),i.d(t,{BillingModalContent:()=>b,BillingSidebarButton:()=>_,canShowBilling:()=>k,showAddressModal:()=>H,showBilling:()=>T,showEmailModal:()=>$,showPaymentMethodModal:()=>q().y,showVatIdModal:()=>X});var n=i(296540),a=()=>i(484714),s=()=>i(56366),l=()=>i(762433),o=()=>i(534177),r=()=>i(58293),d=()=>i(814431),c=()=>i(762299),u=()=>i(418583),p=()=>i(324561),g=()=>i(134217),m=()=>i(86089),f=()=>i(749240),v=i(474848);function b(e){const{displayMode:t}=e;(0,m().o)();const i=(0,a().v3)(),n=(0,r().r)(),b=null==n?void 0:n.id,h=(0,p()._3)({spaceId:null==n?void 0:n.id}),y=(0,s().K8)((()=>b?d().L.getData(i,{spaceId:b})??[]:[]),[i,b]),x=(0,s().O$)(f().subscriptionDataStoreInstance),S=(0,s().K8)((()=>{if(n)return c().A.getData(i,{spaceId:n.id})}),[n,i]);if(!n||!x||!h)return null;const j=(0,l().Fq)(h)||(0,o().O9)(h.paymentMethod),M=(0,g().BA)(x);return j&&M?(0,v.jsx)("div",{style:{padding:"phone"===t?16:32},children:(0,v.jsx)(u().A,{spaceStore:n,upcomingInvoiceData:S,customerData:M,billingData:h,billingEvents:y})}):null}var h=()=>i(302995),y=()=>i(959013),x=()=>i(704152),S=()=>i(8980),j=()=>i(490044),M=()=>i(714300),A=()=>i(252105),C=()=>i(49210),D=()=>i(107683),B=()=>i(497215),w=()=>i(581495);const I=(0,i(645873)._h)(i(671263).Xm,(e=>e.BillingModalContent));function V(e){const{isOpen:t,onClosed:i,onDismiss:n}=e;return(0,v.jsx)(D().s,{isOpen:t,onClosed:i,onDismiss:n,areaConstraint:{width:{type:"min",length:1e3},height:{type:"unlimited",scroll:"allow"}},render:e=>{let{displayMode:t}=e;return(0,v.jsx)(w().Bg,{displayMode:t,title:(0,v.jsx)(y().sA,{defaultMessage:"Billing",id:"subscription.billing.title"}),children:(0,v.jsx)(I,{renderLoading:e=>(0,v.jsx)(B().l,{shouldShowSpinner:e}),displayMode:t})})}})}let P=!1;async function T(e){const{environment:t,from:i}=e;if(!P){P=!0;try{A().qv(t,{from:i}),await C().T.showAsyncModalComponent(V),A().cJ(t)}finally{P=!1}}}function k(e){const{spaceStore:t,billingData:i}=e;return!(!t||!t.canAdmin())&&(!!i&&(!(0,l().et)(i)&&(!!(0,o().O9)(i.paymentMethod)||!!(0,l().Fq)(i))))}function _(){const e=(0,a().v3)(),t=(0,r().r)(),i=function(e){const{spaceStore:t,billingData:i}=e;return(0,s().K8)((()=>k({spaceStore:t,billingData:i})),[t,i])}({spaceStore:t,billingData:(0,M().l)({spaceId:null==t?void 0:t.id})}),l=(0,n.useCallback)((()=>{T({environment:e,from:"mobile_sidebar"})}),[e]);return i?(0,v.jsx)(x().A,{onClick:l,children:(0,v.jsx)(j().A,{left:(0,v.jsx)(S().I,{icon:h().creditCardIcon,color:"secondary"}),disableMobileBorder:!0,children:(0,v.jsx)(y().sA,{id:"billingSidebarButton.title",defaultMessage:"Billing"})})}):null}var O=()=>i(624119),L=()=>i(251111),E=()=>i(84817),F=()=>i(7674),N=()=>i(554509),W=()=>i(876853),U=()=>i(112527),R=()=>i(332878);function z(e){const{defaultValue:t,onAccept:i}=e,[a,s]=(0,n.useState)(!1),[l,o]=(0,n.useState)(t??{name:"",businessName:"",addressLine1:"",addressLine2:"",zipCode:"",city:"",state:"",country:""}),r=(0,U().useElementsOptions)({type:"address"}),d=(0,n.useCallback)((()=>{l&&(0,L().Z)(l)&&(0,W().r)(l.name)?i(l):s(!0)}),[i,l]);return(0,v.jsx)(F().tf,{showDismissButton:!1,header:(0,v.jsx)(N().D,{styleName:"Heading-17px/Medium",colorName:"primary",children:(0,v.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.changeYourAddressModal.title",defaultMessage:"Change your address"})}),footer:(0,v.jsx)(F().aO,{layout:"horizontal-right",primaryButtons:[{label:(0,v.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.changeBillingAddressModal.updateButton.label",defaultMessage:"Update"}),onClick:d}],secondaryButtons:[{buttonType:"dismiss"}]}),children:(0,v.jsx)(O().Elements,{stripe:(0,U().getStripe)(),options:r,children:(0,v.jsxs)(E().Y1,{gap:7.5,padding:"0 2px",children:[(0,v.jsx)(R()._,{defaultValue:l,onChange:o}),a?(0,v.jsx)(N().D,{styleName:"Body-12px/Regular",colorName:"redPrimary",children:(0,v.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.address.invalidError",defaultMessage:"Your address is invalid. Please update your address so we can process your payment."})}):null]})})})}async function H(e){const{defaultValue:t}=e;return await C().T.showAsyncModal((e=>(0,v.jsx)(D().s,{isOpen:e.isOpen,onDismiss:e.onDismiss,onClosed:e.onClosed,animateSizeTransition:!1,areaConstraint:{width:{type:"fixed",length:500},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,v.jsx)(z,{defaultValue:t,onAccept:e.resolve})})))}var Y=()=>i(623580);function K(e){const{defaultValue:t,onAccept:i}=e,[a,s]=(0,n.useState)(t??""),l=(0,n.useCallback)((()=>i(a)),[i,a]);return(0,v.jsx)(F().tf,{showDismissButton:!1,header:(0,v.jsx)(N().D,{styleName:"Heading-17px/Medium",colorName:"primary",children:(0,v.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.changeBillingEmailModal.title",defaultMessage:"Change billing email"})}),footer:(0,v.jsx)(F().aO,{layout:"horizontal-right",primaryButtons:[{label:(0,v.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.changeBillingEmailModal.updateButton.label",defaultMessage:"Update"}),onClick:l}],secondaryButtons:[{buttonType:"dismiss"}]}),children:(0,v.jsx)(Y().A,{focus:!0,selectAll:!0,value:a,onChange:e=>s(e.target.value),onSubmit:l})})}async function $(e){const{defaultValue:t}=e;return await C().T.showAsyncModal((e=>(0,v.jsx)(D().s,{isOpen:e.isOpen,onDismiss:e.onDismiss,onClosed:e.onClosed,areaConstraint:{width:{type:"fixed",length:500}},render:()=>(0,v.jsx)(K,{defaultValue:t,onAccept:e.resolve})})))}var q=()=>i(71904);function G(e){const{defaultValue:t,onAccept:i}=e,[a,s]=(0,n.useState)(t??""),l=(0,n.useCallback)((()=>i(a)),[i,a]);return(0,v.jsx)(F().tf,{showDismissButton:!1,header:(0,v.jsx)(N().D,{styleName:"Heading-17px/Medium",colorName:"primary",children:(0,v.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.changeVATIDModal.title",defaultMessage:"Change VAT/GST number"})}),footer:(0,v.jsx)(F().aO,{layout:"horizontal-right",primaryButtons:[{label:(0,v.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.changeVATIDModal.updateButton.label",defaultMessage:"Update"}),onClick:l}],secondaryButtons:[{buttonType:"dismiss"}]}),children:(0,v.jsxs)(E().Y1,{width:"fill",gap:6,children:[(0,v.jsx)(Y().A,{focus:!0,selectAll:!0,value:a,onChange:e=>s(e.target.value),onSubmit:l}),(0,v.jsx)(N().D,{styleName:"Body-12px/Regular",colorName:"secondary",children:(0,v.jsx)(y().sA,{id:"spaceSubscriptionBillingV2.changeVATIDModal.subtitle",defaultMessage:"Please include your country code"})})]})})}async function X(e){const{defaultValue:t}=e;return await C().T.showAsyncModal((e=>(0,v.jsx)(D().s,{isOpen:e.isOpen,onDismiss:e.onDismiss,onClosed:e.onClosed,areaConstraint:{width:{type:"fixed",length:500}},render:()=>(0,v.jsx)(G,{defaultValue:t,onAccept:e.resolve})})))}},651390:(e,t,i)=>{i.d(t,{H:()=>s});var n=()=>i(484714),a=()=>i(56366);function s(e){const{billingInterval:t,priceStore:i,products:s}=e,l=(0,n().v3)();return(0,a().K8)((()=>{const e={};for(const n of s)e[n]=i.getPrice(l,(e=>e.product===n&&e.billingInterval===t));return e}),[t,l,i,s])}},674579:(e,t,i)=>{i.d(t,{Y:()=>a});var n=()=>i(401497);function a(){return(0,n().IS)((e=>({bulletList:{paddingInlineStart:0,marginBlock:"0px 0px",listStyleType:"none"},bulletItem:{display:"flex",minHeight:24,alignItems:"center"},bulletItemContent:{display:"flex",gap:4},bulletItemContentMultiLineExtra:{paddingTop:4,paddingBottom:4},bulletItemCheckmarkContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},bulletItemCheckmarkContainerMultiLineExtra:{alignItems:"flex-start",paddingTop:2,justifyContent:void 0},bulletItemCheckmark:{width:12,height:12,color:e.icon.secondary},coloredRow:{display:"flex",flexDirection:"row",gap:12,backgroundColor:e.surface.wash,borderRadius:2},column:{width:"100%",minWidth:150,paddingTop:10,paddingBottom:12},rowFeatureTitle:{display:"flex",alignItems:"center",gap:4,justifyContent:"flex-start"},featureDetailsStyle:{paddingTop:12},gridSectionTitle:{paddingLeft:12},gridSection:{display:"flex",flexDirection:"column",gap:42},row:{display:"flex",flexDirection:"row",gap:12},tooltip:{width:156},tooltipWithImageExtra:{paddingLeft:8,paddingRight:8,paddingTop:8,paddingBottom:6},lastRow:{borderBottom:`1px solid ${e.stroke.secondary}`},sidebar:{width:"100%",paddingTop:12,paddingBottom:12,maxWidth:118},titleSection:{paddingLeft:12}})),[])}},729369:(e,t,i)=>{i.d(t,{S:()=>c});i(296540);var n=()=>i(484714),a=()=>i(401497),s=()=>i(554509),l=()=>i(864943),o=()=>i(859428),r=()=>i(962730),d=i(474848);function c(e){const{mainLabel:t,valueLabel:i,metadataLabel:a,bylineLabel:s,button:l}=e,{isMobile:o}=(0,n().Y0)(),r=p();return(0,d.jsxs)("div",{style:r.row,children:[(0,d.jsxs)("div",{style:{...r.labelArea,gap:i?6:0},children:[(0,d.jsx)("div",{style:r.mainLabel,children:t}),(0,d.jsx)("div",{style:r.valueLabel,children:o?a:i})]}),a&&!o?(0,d.jsxs)("div",{style:r.metadataAreaContainer,children:[(0,d.jsx)("div",{style:r.metadataLabel,children:a}),s&&(0,d.jsx)("div",{style:r.bylineLabel,children:s})]}):null,l?(0,d.jsx)("div",{style:r.buttonArea,children:(0,d.jsx)(u,{button:l})}):null]})}function u(e){const{button:t}=e,{tooltip:i,onClick:n,tooltipWidth:a,customButtonStyles:c,customHoveredButtonStyles:u,customPressedButtonStyles:g,isDisabled:m}=t,f={size:"lg",style:{...p().button,...c},hoveredStyle:{...u},pressedStyle:{...g},children:(0,d.jsx)(s().D,{styleName:"UIRegular-14px/Medium",children:t.label})};return i?(0,d.jsx)(o().A,{style:{width:a??void 0},textWrap:!0,renderTooltip:()=>i,placement:r().W.Bottom,alignment:r().C.Center,render:e=>(0,d.jsx)(l().A,{...f,...e,disabled:m,disabledFeedback:!0,onClick:n})}):(0,d.jsx)(l().A,{...f,onClick:n})}function p(){return(0,a().IS)((e=>({row:{display:"flex",alignItems:"center",gap:40,padding:"11px 0",borderBottom:`1px solid ${e.regularDividerColor}`},labelArea:{flex:1,display:"flex",flexDirection:"column",gap:6},mainLabel:{fontWeight:400,fontSize:14,lineHeight:"17px"},valueLabel:{fontWeight:400,fontSize:12,lineHeight:"14px",color:e.text.secondary},metadataLabel:{fontSize:12,lineHeight:"14px",textAlign:"right",color:e.text.secondary},bylineLabel:{fontSize:10,lineHeight:"14px",textAlign:"right",color:e.text.secondary},metadataAreaContainer:{display:"flex",flexDirection:"column",gap:4},buttonArea:{},button:{minWidth:144,borderRadius:"6px"}})),[])}},755195:(e,t,i)=>{i.d(t,{H4:()=>n().H,_7:()=>a()._});var n=()=>i(651390),a=()=>i(931783)},876853:(e,t,i)=>{i.d(t,{r:()=>a});var n=()=>i(422900);n();function a(e){return(0,n().transliterate)(e).trim().length>1}},909306:(e,t,i)=>{i.d(t,{Mb:()=>s,ze:()=>l});var n=()=>i(715256),a=()=>i(762433);function s(e){let{billingData:t,experimentService:i,spaceId:s}=e;const l=(0,a().YF)(t),o=(0,a().N8)(null==t?void 0:t.subscription),r=i.checkGate({gateName:"packaging_changes_05_13_2025",actor:n().S3,customIDs:{spaceId:s}}),d=(0,a().eh)(t,"plus"),c=(0,a().eh)(t,"business"),u=(0,a().eh)(t,"enterprise"),p=(0,a().eh)(t,"ai"),g=(0,a().eh)(t,"student"),m=(0,a().eh)(t,"personal");return r?o?p&&(d||c||u)?{currentState:{featureSet:"advanced",reason:"ai_product"},upsell:void 0}:t&&(0,a().PB)(t)?{currentState:{featureSet:"advanced",reason:u?"enterprise":"business"},upsell:void 0}:{currentState:{featureSet:"none"},upsell:{product:"ai",featureSet:"advanced"}}:l?p&&m?{currentState:{featureSet:"advanced",reason:"personal_ai"},upsell:void 0}:m&&!p?{currentState:{featureSet:"none"},upsell:{product:"ai",featureSet:"advanced"}}:p&&!m?{currentState:{featureSet:"core",reason:"ai_product"},upsell:{product:"personal",featureSet:"advanced"}}:{currentState:{featureSet:"none"},upsell:{product:"ai",featureSet:"core"}}:g?p?{currentState:{featureSet:"core",reason:"ai_product"},upsell:{product:"business",featureSet:"advanced"}}:{currentState:{featureSet:"none"},upsell:{product:"ai",featureSet:"core"}}:c?p?{currentState:{featureSet:"advanced",reason:"ai_product"},upsell:void 0}:{currentState:{featureSet:"advanced",reason:"business"},upsell:void 0}:u?p?{currentState:{featureSet:"advanced",reason:"ai_product"},upsell:void 0}:{currentState:{featureSet:"advanced",reason:"enterprise"},upsell:void 0}:p?{currentState:{featureSet:"core",reason:"ai_product"},upsell:{product:"business",featureSet:"advanced"}}:{currentState:{featureSet:"none"},upsell:{product:"business",featureSet:"advanced"}}:p?{currentState:{featureSet:"core",reason:"ai_product"},upsell:void 0}:{currentState:{featureSet:"none"},upsell:{product:"ai",featureSet:"core"}}}function l(e){var t;let{billingData:i,experimentService:n,spaceId:a}=e;return"ai"===(null===(t=s({billingData:i,experimentService:n,spaceId:a}))||void 0===t||null===(t=t.upsell)||void 0===t?void 0:t.product)}},930851:(e,t,i)=>{i.d(t,{S:()=>o,Z:()=>l});i(296540);var n=()=>i(959013),a=()=>i(534177),s=i(474848);function l(e){switch(e.status){case"paid":return e.total<0?"credited":"paid";case"upcoming":return"upcoming";case"void":return"void";default:return"processing"===e.paymentStatus?"processing":e.attempted?"failed":"due"}}function o(e){const{invoice:t}=e,i=l(t);switch(i){case"paid":return(0,s.jsx)(n().sA,{id:"invoice.status.paid",defaultMessage:"Paid"});case"credited":return(0,s.jsx)(n().sA,{id:"invoice.status.credited",defaultMessage:"Credited"});case"upcoming":return(0,s.jsx)(n().sA,{id:"invoice.status.upcoming",defaultMessage:"Upcoming - not due yet"});case"processing":return(0,s.jsx)(n().sA,{id:"invoice.status.processing",defaultMessage:"Processing"});case"failed":return(0,s.jsx)(n().sA,{id:"invoice.status.failed",defaultMessage:"Failed"});case"due":return(0,s.jsx)(n().sA,{id:"invoice.status.due",defaultMessage:"Due"});case"void":return(0,s.jsx)(n().sA,{id:"invoice.status.void",defaultMessage:"Void"});default:return(0,a().HB)(i)}}},931783:(e,t,i)=>{i.d(t,{_:()=>l});var n=()=>i(484714),a=()=>i(56366),s=()=>i(252105);function l(e){const{asyncPrice:t}=e,i=(0,n().v3)();return(0,a().K8)((()=>{if(t&&t.isLoaded&&t.result)return s().m4(i,{externalId:t.result.externalId}),t.result.getMonthlyUnitCost().toMoneyValue()}),[t,i])}},944609:(e,t,i)=>{i.d(t,{Yv:()=>m,VA:()=>v,v4:()=>f});var n=()=>i(762433),a=()=>i(47273),s=()=>i(166386),l=()=>i(901389),o=()=>i(496414),r=()=>i(436572),d=()=>i(765957),c=()=>i(613240),u=()=>i(27716);const p=(0,i(959013).YK)({cancellingTrial:{defaultMessage:"Cancelling your trial.",id:"cancelTrial.error.message"},cancellationConfirmationMessage:{defaultMessage:"Are you sure you want to cancel your trial?",id:"cancelTrial.confirmation.message"},yes:{defaultMessage:"Yes, cancel my trial",id:"cancelTrial.yes.confirmation.message"}});var g=()=>i(224701);async function m(e){var t;const{environment:i,billingData:a}=e,s=d().default.state.currentSpaceStore;if(!s)return;if(null===(t=a.subscription)||void 0===t||!t.pending)return l().f1((0,u().e9)());if(!s)return l().f1((0,u().e9)());const o=(0,n().PP)(a);await g().nV({environment:i,from:"space_settings-billing_tab",spaceStore:s,desiredState:o}),r().D6({label:(0,u().MA)()})}function f(e){const{environment:t,currentState:i,desiredState:n}=e,l=d().default.state.currentSpaceStore;if(!l)return;const o=function(e,t,i,n,a){if(!e)return!1;if(!(0,s().Jf)("resurrection_offer",t,n))return!1;if(i&&i!==t||a&&n!==a)return!0;return!1}((0,s().hZ)(c().A.getData(t,{spaceId:null==l?void 0:l.id})),(0,a().Gf)(i),(0,a().Gf)(n),(0,a().yw)(i),(0,a().yw)(n));return o}async function v(e){const t=d().default.state.currentSpaceStore;t&&(o().m({message:p.cancellingTrial}),await g().nV({environment:e,spaceStore:t,from:"space_settings-plans_tab",desiredState:{items:[],trialEnd:void 0}}),o().V())}},952539:(e,t,i)=>{i.d(t,{bO:()=>u,qX:()=>p});i(898992),i(354520),i(581454);var n=()=>i(244641),a=()=>i(496603),s=()=>i(534177),l=()=>i(762433);const o=n().dw.fromObject({month:1}),r=n().dw.fromObject({month:1}),d=n().dw.fromObject({year:1});function c(e){const t=e.clock.now.minus({year:1});return e.invoices.filter((e=>e.createdAt>t)).filter((t=>{var i;return(null===(i=e.subscription)||void 0===i?void 0:i.externalId)===t.externalSubscriptionId})).filter((e=>"uncollectible"===e.status)).filter((e=>{var t;return"yes"!==(null===(t=e.overrides)||void 0===t?void 0:t.task_162626_one_time_exclusion)})).filter((e=>{var t;return"no"!==(null===(t=e.overrides)||void 0===t?void 0:t.should_consider_for_dunning)}))}function u(e){if(e.subscription&&(0,l().Qx)(e.subscription))return[];const t=e.clock.now.minus({year:1});return(e.invoices??[]).filter((e=>e.createdAt>t)).filter((t=>(t.dueDate??t.createdAt)<e.clock.now)).filter((e=>{var t,i;return"uncollectible"===e.status||"open"===e.status&&(null===(t=e.paymentIntent)||void 0===t?void 0:t.status)&&["requires_action","requires_capture","requires_confirmation","requires_payment_method"].includes(null===(i=e.paymentIntent)||void 0===i?void 0:i.status)})).filter((e=>{var t;return"no"!==(null===(t=e.overrides)||void 0===t?void 0:t.should_consider_for_dunning)}))}function p(e){if(!e.subscription)return;if((0,l().Qx)(e.subscription))return;const t=c(e);if(!t.length)return;const i=t.map((e=>(e.dueDate??e.createdAt).plus(o))),u=a().Ul(i,(e=>e.toMillis()))[0],p=(0,l().q8)(e);if(!p)return;const g=e.subscription.currentPeriodEnd;let m;switch(p){case"month":m=n().c9.min(u.plus(r),g.plus({month:1}));break;case"year":m=n().c9.min(u.plus(d),g);break;default:(0,s().HB)(p)}return m<e.clock.now?m:(0,l().Xu)(e,m)}}}]);