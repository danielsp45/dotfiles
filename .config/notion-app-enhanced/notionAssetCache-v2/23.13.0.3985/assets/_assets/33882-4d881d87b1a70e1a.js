"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[33882],{2609:(e,i,t)=>{t.d(i,{J2:()=>D,NF:()=>w,gA:()=>b,hr:()=>M,jl:()=>k,p6:()=>I,rQ:()=>C});t(898992),t(672577),t(581454),t(296540);var n=()=>t(56366),o=()=>t(401497),a=()=>t(803960),s=()=>t(959013),r=()=>t(722872),l=()=>t(115512),d=()=>t(700250),c=()=>t(493823),m=()=>t(843189),u=()=>t(760217),f=()=>t(406699),g=()=>t(331542),p=()=>t(928600),x=()=>t(939740),h=()=>t(554509),y=()=>t(204063),v=()=>t(73332),A=()=>t(89924),S=()=>t(475971),j=t(474848);const b=24,D=440,w=D+40;function C(e){const{icon:i,title:t,byline:n,bylineWidthOverride:a}=e,s=(0,o().IS)((()=>({container:{margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",gap:8},title:{textAlign:"center"},byline:{textAlign:"center"}})),[]);return(0,j.jsxs)("div",{style:s.container,children:[i,(0,j.jsx)(h().D,{styleName:"Heading-17px/Semibold",customStyles:s.title,children:t}),(0,j.jsx)(h().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",customStyles:a?{...s.byline,width:a}:s.byline,children:n})]})}function k(e){const{primaryText:i,primaryAction:t,primaryDisabled:n,secondaryText:a,secondaryAction:s,isLightRed:r,isDarkRed:l,isLoading:d}=e,u=!(r||l),f=(0,o().IS)((e=>({container:{margin:"0 auto",display:"flex",flexDirection:u?"row-reverse":"column",alignItems:"center",justifyContent:u?"flex-start":"flex-end",gap:8,padding:"0 20px",marginLeft:-20,width:"calc(100% + 40px)"},fullWidth:u?{}:{width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},cancelButton:{...S().W,height:32,color:e.text.secondary}})),[u]);return(0,j.jsxs)("div",{style:f.container,children:[r?(0,j.jsx)(m().E,{size:"lg",onClick:t,color:r?"uiRed":void 0,disabled:n,style:f.fullWidth,children:d?(0,j.jsx)(g().A,{}):i}):(0,j.jsx)(y().A,{size:"lg",onClick:t,disabled:n,style:f.fullWidth,isRed:l,children:d?(0,j.jsx)(g().A,{}):i}),(0,j.jsx)(c().p,{size:"lg",onClick:s,style:{...f.fullWidth,...f.cancelButton},children:a})]})}function M(e){const{selectedId:i,options:t,onChange:n}=e,l=(0,o().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:8},chevron:{width:12,marginLeft:3,marginRight:3,fill:e.icon.tertiary},selectedButton:{width:"100%",margin:0,paddingTop:4,paddingBottom:4,border:`1px solid ${e.outlineButtonBorder}`},icon:{alignSelf:"start",marginTop:0,fill:e.icon.secondary,height:18,width:18}})),[]);return(0,j.jsxs)("div",{style:l.container,children:[(0,j.jsx)(h().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,j.jsx)(s().sA,{id:"orgConsole.modal.dropdown.title",defaultMessage:"Select role"})}),(0,j.jsx)(f().Ay,{popupType:f().z7.Popup,renderOrigin:e=>{const n=t.find((e=>e.id===i));return n?(0,j.jsx)(u().A,{...e,title:n.title,caption:n.caption,icon:n.icon({fill:l.icon.fill}),desktopIconStyle:l.icon,disabled:!1,right:(0,a().arrowChevronSingleDownIcon)(l.chevron),shouldWrapCaption:!0,buttonStyle:l.selectedButton,focused:!1}):null},originGap:8,placementToOrigin:d().UV.Bottom,alignmentToOrigin:d().MY.Center,sameWidthAsOrigin:!0,render:e=>{const o=[{key:"options",render:e=>(0,j.jsx)(A().A,{...e,topBorder:0!==e.index}),items:t.map((t=>{const o=t.id===i;return{key:t.id,render:e=>(0,j.jsx)(u().A,{...e,title:t.title,caption:t.caption,icon:t.icon({fill:l.icon.fill}),desktopIconStyle:l.icon,isChecked:o,shouldWrapCaption:!0}),action:()=>{n(t.id),e.close()}}}))}];return(0,j.jsx)(p().A,{menuType:r().gu.Popup,children:(0,j.jsx)(x().Ay,{type:x().Oh.Vertical,initialFocus:void 0,sections:o})})}})]})}function I(e){const{items:i,selectedIds:t,disabledIds:a,onSelectHeader:s,onSelect:r,titleText:d,headerText:c,headerAction:m}=e,u=(0,o().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:8,marginBottom:4},selectorContainer:{border:`1px solid ${e.stroke.secondary}`,boxShadow:"0px 2px 4px 0px #0000000a",borderRadius:8},checkbox:{display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},headerText:{display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},right:{display:"flex",justifyContent:"flex-end",alignItems:"flex-end",flexDirection:"row"},workspace:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",gap:8},byline:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"},bylineWithoutCheckboxes:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center",height:28,width:28},textContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",gap:2},selectorHeader:{padding:"4px 12px",borderBottom:`1px solid ${e.stroke.secondary}`,display:"grid",gridTemplateColumns:"24px 1fr 1fr"},selectorHeaderWithAction:{padding:"4px 4px 4px 12px",borderBottom:`1px solid ${e.stroke.secondary}`,display:"grid",gridTemplateColumns:"24px 1fr 1fr"},selectorBody:{paddingInline:12,display:"flex",flexDirection:"column",alignItems:"center",justifyItems:"center",width:"100%",maxHeight:204,overflowX:"hidden",overflowY:"auto"},selectorBodyRow:{display:"grid",gridTemplateColumns:"24px minmax(auto, 50%) 1fr",width:"100%",paddingBlock:8,gap:8,borderTop:`1px solid ${e.stroke.secondary}`}})),[]),f=void 0!==t&&void 0!==a&&r&&s,g=void 0!==a?i.length-a.length:0,p=(0,n().K8)((()=>{if(void 0===t)return!1;let e=0;for(const n of i)t.includes(n.id)&&(e+=1);return 0!==e&&(e===g?0!==g:"partial")}),[i,t,g]);return(0,j.jsxs)("div",{style:u.container,children:[(0,j.jsx)(h().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:d}),(0,j.jsxs)("div",{style:u.selectorContainer,children:[(0,j.jsxs)("div",{style:{...m?u.selectorHeaderWithAction:u.selectorHeader,gridTemplateColumns:f?"24px 1fr 1fr":"1fr 1fr"},children:[f?(0,j.jsx)("div",{style:u.checkbox,children:(0,j.jsx)(v().T,{checked:p,size:14,onClick:s})}):null,(0,j.jsx)(h().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",customStyles:u.headerText,children:c}),(0,j.jsx)("div",{style:u.right,children:m})]}),(0,j.jsx)("div",{style:u.selectorBody,children:i.map(((e,i)=>{let{id:n,icon:o,name:s,caption:d,byline:c}=e;return(0,j.jsxs)("div",{style:{...u.selectorBodyRow,borderTopWidth:0===i?0:1,gridTemplateColumns:f?"24px minmax(auto, 50%) 1fr":"minmax(auto, 50%) 1fr"},children:[f?(0,j.jsx)("div",{style:u.checkbox,children:(0,j.jsx)(v().T,{checked:t.includes(n)||a.includes(n),size:14,onClick:()=>r(n),disabled:a.includes(n),style:{opacity:a.includes(n)?.3:1}})}):null,(0,j.jsxs)("div",{style:u.workspace,children:[(0,j.jsx)("div",{style:u.iconContainer,children:o}),(0,j.jsxs)("div",{style:u.textContainer,children:[(0,j.jsx)(h().D,{styleName:"UIRegular-14px/Medium",customStyles:{...(0,l().pA)(1),textOverflow:"ellipsis"},children:s}),d?(0,j.jsx)(h().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:{...(0,l().pA)(1),textOverflow:"ellipsis"},children:d}):null]})]}),(0,j.jsx)("div",{style:u.byline,children:c})]},n)}))})]})]})}},55293:(e,i,t)=>{t.d(i,{J:()=>o});t(296540);var n=t(474848);const o=(0,t(340498).wt)("exclamationMarkOctagon",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M7.908 16.441a2.7 2.7 0 0 1-.765-.095 1.8 1.8 0 0 1-.581-.28 3.3 3.3 0 0 1-.486-.438l-2.638-2.94a3 3 0 0 1-.363-.485 1.7 1.7 0 0 1-.184-.492 3.5 3.5 0 0 1-.048-.622V8.04q0-.362.048-.622.054-.26.184-.485.13-.226.362-.486l2.64-2.94a3 3 0 0 1 .485-.444q.26-.184.58-.28a2.7 2.7 0 0 1 .766-.095h4.184q.437 0 .759.095.328.096.58.28.26.178.493.445l2.604 2.94q.24.273.376.498.137.22.192.479.06.252.061.615v3.049q0 .362-.055.622a1.6 1.6 0 0 1-.177.492q-.13.225-.37.486l-2.631 2.939a3.7 3.7 0 0 1-.492.437 1.7 1.7 0 0 1-.581.28 2.7 2.7 0 0 1-.76.096zm.328-1.326h3.528q.32 0 .52-.055a.86.86 0 0 0 .355-.17 2.6 2.6 0 0 0 .341-.315l2.359-2.611q.206-.226.266-.417.069-.198.069-.574v-2.81q0-.383-.069-.574a1.2 1.2 0 0 0-.266-.417L12.98 4.56a2.6 2.6 0 0 0-.341-.315.9.9 0 0 0-.356-.178 2 2 0 0 0-.52-.054H8.237q-.322 0-.526.054a1 1 0 0 0-.362.178q-.15.116-.328.315L4.654 7.17q-.197.226-.266.418t-.069.574v2.81q0 .376.069.574.068.19.266.417l2.366 2.611q.177.198.328.315a.9.9 0 0 0 .362.17q.205.055.526.055Zm1.77-4.416q-.593 0-.614-.601l-.096-3.323a.61.61 0 0 1 .184-.492.7.7 0 0 1 .513-.191q.315 0 .52.198.204.192.191.485l-.11 3.323q-.012.6-.587.601Zm0 2.27a.84.84 0 0 1-.573-.212.71.71 0 0 1-.233-.54.69.69 0 0 1 .233-.533.82.82 0 0 1 .574-.22q.328 0 .56.213a.69.69 0 0 1 .24.54.69.69 0 0 1-.24.54.82.82 0 0 1-.56.212Z"})})},243581:(e,i,t)=>{t.d(i,{r:()=>o});t(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.48 3.92 13.04 12.85",svg:(0,t(474848).jsx)("path",{d:"M3.483 4.55c0-.345.28-.625.625-.625h3.5a.625.625 0 1 1 0 1.25H5.617L8.86 8.42A6 6 0 0 1 10 10.007a6 6 0 0 1 1.14-1.588l3.243-3.244h-1.99a.625.625 0 1 1 0-1.25h3.5c.344 0 .624.28.624.625v3.5a.625.625 0 0 1-1.25 0V6.06l-3.243 3.244a4.78 4.78 0 0 0-1.399 3.358v4.108h-1.25v-4.108a4.78 4.78 0 0 0-1.398-3.358L4.733 6.059V8.05a.625.625 0 1 1-1.25 0z"})},o=(0,t(340498).wt)("arrowBranch",n)},247123:(e,i,t)=>{t.d(i,{QU:()=>f,f2:()=>u,r6:()=>g});t(581454),t(296540);var n=()=>t(56366),o=()=>t(401497),a=()=>t(959013),s=()=>t(534177),r=()=>t(756279),l=()=>t(765957),d=()=>t(2143),c=()=>t(921194),m=t(474848);function u(e){const{openState:i}=e,{mainEditorCurrentBlockStore:t,currentSpaceStore:a}=(0,n().K8)((()=>{const{mainEditorCurrentBlockStore:e,currentSpaceStore:i}=l().default.state;return{mainEditorCurrentBlockStore:e,currentSpaceStore:i}}),[]),s=(0,o().IS)((e=>({scroller:{display:"flex",flexDirection:"column",maxHeight:290,border:`1px solid ${e.lightDividerColor}`,borderRadius:6,paddingTop:8,paddingLeft:12,paddingRight:12,paddingBottom:12,marginTop:15,marginBottom:5,marginLeft:-12,marginRight:-12},editContainer:{marginTop:2,marginBottom:2,color:e.text.primary}})),[]);if(!t||!a)return null;const u=Date.now();return(0,m.jsx)(d().H,{type:r().A.Y,style:s.scroller,children:i.permissionChanges.map(((e,i)=>{let[n,o]=e;const r={timestamp:u,space_id:a.id,type:"permission-changed",permission_data:{before:n,after:o}};return(0,m.jsx)("div",{style:s.editContainer,children:(0,m.jsx)(c().A,{rootStore:t,edit:r})},`${n.type}-${i}`)}))})}function f(e){return["remove","restrict"].includes(e.type)?(0,m.jsx)(a().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccessV2",defaultMessage:"Change and unlink"}):(0,m.jsx)(a().sA,{id:"restrictedPermissionConfirmationModal.actionButton.relink",defaultMessage:"Relink"})}function g(e){switch(e.type){case"remove":case"restrict":return(0,m.jsx)(a().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"});case"restore":case"restoreTeamPermissions":return(0,m.jsx)(a().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"});default:throw s().HB(e)}}},297780:(e,i,t)=>{t.d(i,{A:()=>l});var n=t.n(t(32485)),o=(t(296540),()=>t(484714)),a=()=>t(553965),s=()=>t(623580),r=t(474848);const l=function(e){let{readOnly:i,onClick:a,style:s,tokens:l,value:m,onRemoveLastToken:f,onChange:g,onSubmit:p,onBlur:x,overflowHorizontally:h,focus:y,type:v,placeholder:A,errorOutline:S,inputStyle:j,inputElementAttributes:b}=e;const D=(0,t(401497).DP)(),w=(0,o().v3)(),{device:C}=w;return(0,r.jsxs)("div",{className:i?void 0:n()({"notion-focusable-within":!0,"notion-focusable-within-error-outline":S}),onClick:a,style:C.isMobile?c(D,s):d(D,s),children:[h?(0,r.jsx)("div",{style:{display:"flex",flexShrink:0},children:l}):l,(0,r.jsx)(u,{tokens:l,value:m,onRemoveLastToken:f,onChange:g,onSubmit:p,onBlur:x,focus:y,readOnly:i,type:v,placeholder:A,inputStyle:j,inputElementAttributes:b})]})};function d(e,i){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",minHeight:32,boxShadow:e.inputBoxShadow,background:e.inputBackground,borderRadius:4,fontSize:14,cursor:"text",overflow:"hidden",padding:"7px 9px 0px",...i}}function c(e,i){return{...d(e,i),fontSize:14,padding:"7px 10px 0"}}const m={flexGrow:1,flexShrink:1,flexBasis:60,minWidth:60,width:"auto",lineHeight:"20px"};function u(e){let{tokens:i,value:t,onRemoveLastToken:n,onChange:l,onSubmit:d,onBlur:c,focus:u,readOnly:f,type:g,placeholder:p,inputStyle:x,inputElementAttributes:h}=e;const y=(0,o().v3)(),{device:v}=y,A=0===i.length;return(0,r.jsx)(s().A,{format:s().C.Transparent,...(0,a().A)({onKeyDown:e=>function(e,i,t){"Backspace"===e.key&&0===i.length&&t()}(e,t,n)},{onChange:l}),value:t,onSubmit:d,onBlur:c,focus:u,style:{...m,margin:v.isMobile?"0 8px 8px 0":"0 6px 6px 0"},readOnly:f,inputStyle:{height:18,...x},size:1,type:g,placeholder:A?p:"",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,inputElementAttributes:h})}},366208:(e,i,t)=>{t.d(i,{A$:()=>s,Ay:()=>l});t(296540);var n=()=>t(962730),o=()=>t(881690),a=t(474848);const s={Success:"success",Pending:"pending",Failure:"failure"};const r={display:"flex",justifyContent:"center",alignItems:"baseline"},l=function(e){let{status:i,value:l,renderTooltip:d,...c}=e;const m=(0,t(401497).DP)(),u={[s.Success]:m.statusTokenBackground.green,[s.Pending]:m.statusTokenBackground.yellow,[s.Failure]:m.statusTokenBackground.red},f={[s.Success]:m.statusTokenIndicator.green,[s.Pending]:m.statusTokenIndicator.yellow,[s.Failure]:m.statusTokenIndicator.red},g={[s.Success]:m.statusTokenText.green,[s.Pending]:m.statusTokenText.yellow,[s.Failure]:m.statusTokenText.red};return d?(0,a.jsx)(o().A,{...c,backgroundColor:u[i],color:g[i],value:(0,a.jsx)(t(859428).A,{placement:n().W.Bottom,alignment:n().C.Start,renderTooltip:d,render:e=>(0,a.jsxs)("div",{style:r,...e,children:[(0,a.jsx)("div",{style:{background:f[i],width:8,height:8,borderRadius:"100%",marginRight:4}}),l]})})}):(0,a.jsx)(o().A,{...c,backgroundColor:u[i],color:g[i],value:(0,a.jsxs)("div",{style:r,children:[(0,a.jsx)("div",{style:{background:f[i],width:8,height:8,borderRadius:"100%",marginRight:4}}),l]})})}},375243:(e,i,t)=>{t.d(i,{Jd:()=>I,d9:()=>T,Ay:()=>P,W0:()=>W,vv:()=>R,xF:()=>L,Rf:()=>V});t(944114),t(581454);var n=t(296540),o=()=>t(401497),a=()=>t(959013),s=()=>t(534177),r=()=>t(901389),l=()=>t(641300),d=()=>t(760217),c=()=>t(554509),m=()=>t(204063),u=()=>t(125565),f=()=>t(449506),g=()=>t(679924),p=()=>t(898486),x=()=>t(662303),h=()=>t(284371),y=t(474848);const v=(0,a().YK)({samlConfigSubtitle:{id:"verifyDomainModal.addNewDomain.samlConfig.subtitle",defaultMessage:"Users with a verified domain can log in {br}using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.addNewDomain.integration.subtitle",defaultMessage:"Link preview integrations must verify {br}domains before they are published."}});const A=function(e){let{handleAddNewDomain:i,loading:r,verificationType:l}=e;const[d,c]=(0,n.useState)(""),f=!Boolean(d),g=(0,n.useCallback)((e=>{c(e.target.value)}),[]),p=(0,o().IS)((()=>({title:{fontFamily:h().vc(x().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:h().vc(x().locale).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"},input:{marginTop:22,marginBottom:14},button:{width:"100%",opacity:f?.5:1}})),[f]);let A;switch(l){case"integration":A=v.integrationSubtitle;break;case"saml_config":A=v.samlConfigSubtitle;break;default:(0,s().HB)(l)}return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(u().A,{style:p.title,children:(0,y.jsx)(a().sA,{id:"verifyDomainModal.addNewDomain.title",defaultMessage:"Add new domain"})}),(0,y.jsx)(u().A,{style:p.subtitle,isMultiline:!0,children:(0,y.jsx)(a().sA,{...A,values:{br:(0,y.jsx)("br",{})}})}),(0,y.jsx)(t(623580).A,{value:d,style:p.input,placeholder:"notion.so",onChange:g}),(0,y.jsx)(m().A,{onClick:()=>i(d),style:p.button,size:"lg",disabled:f,children:r?(0,y.jsx)(t(331542).A,{}):(0,y.jsx)(a().sA,{id:"verifyDomainModal.addNewDomain.next",defaultMessage:"Next"})})]})};var S=()=>t(864943);const j=function(e){let{domain:i,isExpired:t,onClose:s}=e;const r=(0,o().IS)((e=>({title:{fontFamily:h().vc(x().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:h().vc(x().locale).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(u().A,{style:r.title,isMultiline:!0,children:(0,y.jsx)(a().sA,{id:"verifyDomainModal.invalidDomain.title",defaultMessage:"Unable to verify {domain}",values:{domain:i}})}),(0,y.jsx)(u().A,{style:r.subtitle,isMultiline:!0,children:t?(0,y.jsx)(a().sA,{id:"verifyDomainModal.invalidDomain.expired",defaultMessage:"The code for this domain's verification has expired."}):(0,y.jsx)(a().sA,{id:"verifyDomainModal.invalidDomain.invalid",defaultMessage:"You are unable to verify this domain because it has already been verified by another workspace."})}),(0,y.jsx)(S().A,{size:"lg",onClick:s,style:{width:"100%"},children:(0,y.jsx)(a().sA,{id:"verifyDomainModal.invalidDomain.okay",defaultMessage:"OK"})})]})},b=(0,a().YK)({samlConfigSubtitle:{id:"verifyDomainModal.verifiedDomain.samlConfig.subtitle",defaultMessage:"Users are able to use this email domain to{br}log in using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.verifiedDomain.integration.subtitle",defaultMessage:"This integration can unfurl URLs containing this domain."}});const D=function(e){let{domain:i,onClose:t,verificationType:r}=e;const l=(0,o().IS)((()=>({title:{fontFamily:h().vc(x().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:h().vc(x().locale).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);let d;switch(r){case"saml_config":d=b.samlConfigSubtitle;break;case"integration":d=b.integrationSubtitle;break;default:(0,s().HB)(r)}return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(u().A,{style:l.title,isMultiline:!0,children:(0,y.jsx)(a().sA,{id:"verifyDomainModal.verifiedDomain.title",defaultMessage:"Successfully verified {domain}",values:{domain:i}})}),(0,y.jsx)(u().A,{style:l.subtitle,isMultiline:!0,children:(0,y.jsx)(a().sA,{...d,values:{br:(0,y.jsx)("br",{})}})}),(0,y.jsx)(S().A,{size:"lg",onClick:t,style:{width:"100%"},children:(0,y.jsx)(a().sA,{id:"verifyDomainModal.verifiedDomain.okay",defaultMessage:"OK"})})]})};const w=function(e){const i=(0,t(484714).v3)(),l=(0,a().tz)(),d=(0,o().DP)(),[c,m]=(0,t(56366).$y)(e.store,t(543649).A),{verificationType:u,verificationTargetId:x,refreshDomains:h}=e,v=(0,n.useCallback)((()=>{m((e=>({...e,loading:!1,modalOpen:!1})))}),[m]),S=(0,n.useCallback)((async e=>{m((e=>({...e,loading:!0})));const n="integration"===u?{type:u,integrationId:x,domain:e}:{type:u,spaceId:x,domain:e},o=await f().callApi({eventName:"createDomainVerificationCode",environment:i,data:n});if("success"===o.type){h(),(0,g().v)(i,"domain_verification_domain_added",{type:u});const e=o.data.domainVerification,n=(0,t(486345).pl)(e);m((e=>({...e,domainVerification:n,loading:!1})))}else r().f1((0,p().Hu)(l,o)),m((e=>({...e,loading:!1})))}),[i,m,x,h,u,l]),b=(0,n.useCallback)((async e=>{m((e=>({...e,loading:!0})));const t=await f().callApi({eventName:"verifyDomain",environment:i,data:{verificationId:e.id}});if((0,g().v)(i,"domain_verification_verification_attempted",{type:u}),"success"===t.type){h(),(0,g().v)(i,"domain_verification_domain_verified",{type:u});const t={type:"verified",domain:e.domain};m((e=>({...e,domainVerification:t,loading:!1})))}else r().f1((0,p().Hu)(l,t)),m((e=>({...e,loading:!1})))}),[i,l,m,h,u]),w=(0,n.useCallback)((()=>{if(!c.domainVerification)return(0,y.jsx)(A,{handleAddNewDomain:S,loading:c.loading,verificationType:u});switch(c.domainVerification.type){case"invalid":return(0,y.jsx)(j,{domain:c.domainVerification.domain,isExpired:Date.now()>c.domainVerification.expiresAt,onClose:v});case"unverified":return(0,y.jsx)(t(437594).ZQ,{handleVerifyDomain:b,domainVerification:c.domainVerification,loading:c.loading});case"verified":return(0,y.jsx)(D,{domain:c.domainVerification.domain,onClose:v,verificationType:u});default:(0,s().HB)(c.domainVerification)}}),[c.domainVerification,c.loading,b,S,v,u]);return(0,y.jsx)(t(676007).a,{open:c.modalOpen,preventHideChildrenWhileOpening:!0,onDismiss:v,render:()=>(0,y.jsx)("div",{style:{background:d.popoverBackground,width:410,padding:24,borderRadius:4},children:w()})})};var C=()=>t(366208);const k=[{id:"domain",headerTitle:(0,y.jsx)(a().sA,{id:"domainVerificationTable.table.header.domain",defaultMessage:"Domain"}),renderCell:e=>(0,y.jsx)(u().A,{children:e.domain}),widthData:{width:100},sortable:!1},{id:"status",headerTitle:(0,y.jsx)(a().sA,{id:"domainVerificationTable.table.header.status",defaultMessage:"Status"}),renderCell:e=>(0,y.jsx)(T,{status:e.status}),widthData:{width:100},sortable:!1},{id:"actions",headerTitle:null,renderCell:e=>(0,y.jsx)(B,{onShowDetails:e.onShowDetails,onRemove:e.onRemove}),widthData:{width:20},sortable:!1}],M=(0,a().YK)({verifiedSAMLWarning:{defaultMessage:"Deleting this domain will prevent others with this email from logging in using SAML SSO.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.description"},verifiedIntegrationsWarning:{defaultMessage:"Deleting this domain will prevent integrations from unfurling urls that contain this domain.",id:"domainVerificationInput.myIntegrations.emailDomainsSection.removeDomain.description"},unverifiedDomainWarning:{defaultMessage:"Deleting this domain will restart its verification process. A new verification code will be generated for this domain in the next verification attempt.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.pending.description"}});function I(){return(0,y.jsx)(u().A,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:(0,y.jsx)(a().sA,{id:"securitySAMLSettings.emailDomainsSection.emptyTable",defaultMessage:"No domains configured."})})}function T(e){let{status:i}=e;const t=(0,o().IS)((e=>{const t={[C().A$.Success]:e.statusTokenBackground.green,[C().A$.Pending]:e.statusTokenBackground.yellow,[C().A$.Failure]:e.statusTokenBackground.red},n={[C().A$.Success]:e.statusTokenIndicator.green,[C().A$.Pending]:e.statusTokenIndicator.yellow,[C().A$.Failure]:e.statusTokenIndicator.red},o={[C().A$.Success]:e.statusTokenText.green,[C().A$.Pending]:e.statusTokenText.yellow,[C().A$.Failure]:e.statusTokenText.red};return{container:{background:t[i],color:o[i],display:"flex",justifyContent:"center",alignItems:"center",gap:6,borderRadius:18,height:20,paddingLeft:7,paddingRight:9},dot:{background:n[i],width:8,height:8,borderRadius:"100%"}}}),[i]);return(0,y.jsxs)("div",{style:t.container,children:[(0,y.jsx)("div",{style:t.dot}),(0,y.jsx)(c().D,{styleName:"UIRegular-14px/Medium",children:L(i)})]})}function B(e){let{onShowDetails:i,onRemove:n}=e;const o=V(),s=[];return i&&s.push({key:"details",action:()=>i(),render:e=>(0,y.jsx)(d().A,{...e,style:o.menuItem,focused:!1,icon:(0,t(738418).G)(o.menuIcon),title:(0,y.jsx)(a().sA,{defaultMessage:"View details",id:"securitySAMLSettings.emailDomainsSection.details"}),caption:(0,y.jsx)(a().sA,{defaultMessage:"See more information about the state of this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.detailsCaption"}),shouldWrapCaption:!0})}),n&&s.push({key:"remove",action:()=>n(),render:e=>(0,y.jsx)(d().A,{...e,style:o.menuItem,focused:!1,icon:(0,t(735384).I)(o.menuIcon),title:(0,y.jsx)(a().sA,{defaultMessage:"Remove domain",id:"securitySAMLSettings.emailDomainsSection.remove"}),caption:(0,y.jsx)(a().sA,{defaultMessage:"Delete this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.removeCaption"}),shouldWrapCaption:!0})}),0===s.length?null:(0,y.jsx)(t(75491).ED,{hideDropdownIcon:!0,title:(0,t(30626)._)(o.primaryIcon),items:s})}function V(){return(0,o().IS)((e=>({primaryIcon:{width:14,height:14,color:e.icon.secondary,fill:"currentColor"},menuItem:{width:250},menuIcon:{width:14,height:14,color:e.icon.primary,fill:"currentColor"}})),[])}function L(e){switch(e){case C().A$.Success:return(0,y.jsx)(a().sA,{defaultMessage:"Verified",id:"domainVerificationInput.emailDomainsSection.statusToken.verified"});case C().A$.Pending:return(0,y.jsx)(a().sA,{defaultMessage:"Pending",id:"domainVerificationInput.emailDomainsSection.statusToken.pending"});case C().A$.Failure:return(0,y.jsx)(a().sA,{defaultMessage:"Failed",id:"domainVerificationInput.emailDomainsSection.statusToken.failed"});default:(0,s().HB)(e)}}function R(e){return{domain:e,status:C().A$.Success,data:{type:"verified",domain:e}}}function W(e){return Date.now()>e.expiresAt||Boolean(e.invalidatedAt)?{domain:e.domain,status:C().A$.Failure,data:{type:"invalid",id:e.id,domain:e.domain,verificationCode:e.verificationCode,createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}:{domain:e.domain,status:C().A$.Pending,data:{type:"unverified",id:e.id,domain:e.domain,verificationCode:e.verificationCode,createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}}const P=function(e){const{disabled:i,domains:t,domainVerificationStore:d,verificationType:c,verificationTargetId:u,refreshDomains:f,onRemoveDomain:g,onClickAddDomain:p,renderOverrideAddDomainButton:x}=e,h=(0,o().IS)((e=>(0,l().rC)({columnRenderInfo:k,theme:e,containerMarginTop:0})),[]);function v(){i||(p&&p(),d.setState({domainVerification:void 0,loading:!1,modalOpen:!0}))}async function A(e,i){let t;if(i===C().A$.Failure)return void g(e);i===C().A$.Pending?t=M.unverifiedDomainWarning:i===C().A$.Success?t="saml_config"===c?M.verifiedSAMLWarning:M.verifiedIntegrationsWarning:(0,s().HB)(i);const{accept:n}=await r().Gh(function(e){return{mode:"wide",message:(0,y.jsx)(a().sA,{defaultMessage:"Delete this domain?",id:"domainVerificationInput.emailDomainsSection.removeDomain.message"}),description:(0,y.jsx)(a().sA,{...e}),acceptLabel:(0,y.jsx)(a().sA,{id:"domainVerificationInput.emailDomainsSection.removeDomain.accept",defaultMessage:"Delete domain"}),cancelLabel:(0,y.jsx)(a().sA,{id:"domainVerificationInput.emailDomainsSection.removeDomain.cancel",defaultMessage:"Cancel"})}}(t));n&&g(e)}const S=t.map((e=>{let{domain:t,status:n,data:o}=e;return{id:"verified"===o.type?t:o.id,isClickable:!1,domain:t,status:n,onShowDetails:i?void 0:()=>function(e){i||d.setState({domainVerification:e,loading:!1,modalOpen:!0})}(o),onRemove:i?void 0:()=>A(o,n)}}));return(0,y.jsxs)(n.Fragment,{children:[x?x(v):(0,y.jsx)(m().A,{size:"lg",disabled:i,onClick:v,style:{margin:"4px 0px 16px",width:"fit-content"},children:(0,y.jsx)(a().sA,{defaultMessage:"Add domain",id:"securitySAMLSettings.emailDomainsSection.addDomain"})}),(0,y.jsx)(l().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:k,rows:S,styles:h,renderNoRowsComponent:()=>(0,y.jsx)(I,{})}),(0,y.jsx)(w,{store:d,verificationTargetId:u,verificationType:c,refreshDomains:f})]})}},437594:(e,i,t)=>{t.d(i,{KS:()=>D,ZQ:()=>b,bi:()=>C,vr:()=>k});var n=t(296540),o=()=>t(662303),a=()=>t(484714),s=()=>t(401497),r=()=>t(925907),l=()=>t(959013),d=()=>t(284371),c=()=>t(720665),m=()=>t(884107),u=()=>t(907514),f=()=>t(493823),g=()=>t(364280),p=()=>t(285790),x=()=>t(903706),h=()=>t(331542),y=()=>t(864943),v=()=>t(859428),A=()=>t(125565),S=()=>t(101919),j=t(474848);function b(e){let{handleVerifyDomain:i,domainVerification:t,loading:a}=e;const r=(0,s().IS)((e=>({title:{fontFamily:d().vc(o().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:d().vc(o().locale).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"},list:{fontSize:14,lineHeight:"19px"}})),[]);return(0,j.jsxs)(n.Fragment,{children:[(0,j.jsx)(A().A,{style:r.title,children:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.title",defaultMessage:"Verify your domain"})}),(0,j.jsx)(A().A,{style:r.subtitle,children:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.subtitle",defaultMessage:"Follow these steps to finalize verification."})}),(0,j.jsxs)(g().VP,{marginTop:24,gap:24,children:[(0,j.jsxs)(g().VP,{gap:12,children:[(0,j.jsx)(C,{domainVerification:t}),(0,j.jsx)(D,{domainVerification:t})]}),(0,j.jsx)(k,{listStyles:r.list})]}),(0,j.jsx)(y().A,{size:"lg",style:{width:"100%"},onClick:()=>i(t),disabled:a,children:a?(0,j.jsx)(h().A,{}):(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.verify",defaultMessage:"Verify domain"})})]})}function D(e){let{domainVerification:i}=e;const t=(0,a().v3)();return(0,j.jsx)(w,{value:i.domain,handleCopyLink:async function(){const e=await m().R.clipboardActions.load();e.copyString({environment:t,stringValue:i.domain,copiedMessage:e.clipboardMessages.copiedLinkToClipboard})},label:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.domainLabel",defaultMessage:"Domain"})})}function w(e){let{value:i,handleCopyLink:t,disabled:n,label:a}=e;const c=(0,l().tz)().formatMessage(M.copy),m=(0,s().IS)((e=>({container:{display:"flex",background:e.surface.elevated,padding:2,boxShadow:e.shadowSM,borderRadius:6},buttonStyle:{height:20,width:20,boxShadow:"none"},iconStyle:{color:e.text.secondary,fill:e.text.secondary},input:{fontFamily:d().vc(o().locale).mono,textOverflow:"ellipsis"}})),[]);return(0,j.jsxs)(g().VP,{gap:0,children:[(0,j.jsx)(S().A,{children:a}),(0,j.jsx)(x().A,{value:i,readOnly:!0,inputStyle:m.input,right:(0,j.jsx)(v().A,{renderTooltip:()=>c,render:e=>(0,j.jsx)("div",{style:m.container,...e,children:(0,j.jsx)(p().A,{onClick:t,ariaLabel:c,hasBackground:!0,icon:r().n,showShadow:!0,iconStyle:m.iconStyle,style:m.buttonStyle})})})})]})}function C(e){let{domainVerification:i,containerStyles:t,regenerateCode:o}=e;const r=(0,a().v3)(),[p,x]=(0,n.useState)(!1),h=i.expiresAt-Date.now()<2*c().pT,y=i.expiresAt<Date.now(),v=(0,s().IS)((e=>({expiresSoonText:{color:"dark"===e.mode?e.palette.yellow[700]:e.palette.yellow[500]},expiredText:{color:"dark"===e.mode?e.palette.red[700]:e.palette.red[500]},blueButton:{fontWeight:d().Wy.medium,color:e.blueColor},blueButtonHover:{background:e.outlineBlueButtonHoveredBackground}})),[]);return(0,j.jsx)("div",{style:t,children:(0,j.jsxs)(g().VP,{gap:4,children:[(0,j.jsx)(w,{label:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeLabel",defaultMessage:"Verification code"}),value:`notion-domain-verification=${i.verificationCode}`,handleCopyLink:async function(){const e=await m().R.clipboardActions.load();e.copyString({environment:r,stringValue:`notion-domain-verification=${i.verificationCode}`,copiedMessage:e.clipboardMessages.copiedLinkToClipboard})},disabled:y}),(0,j.jsxs)(g().fI,{alignItems:"center",justifyContent:"space-between",children:[y?(0,j.jsx)(A().A,{style:v.expiredText,isSmall:!0,children:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeExpired",defaultMessage:"This verification code expired on {expirationDate}",values:{expirationDate:(0,u().DG)(i.expiresAt)}})}):(0,j.jsx)(A().A,{style:h?v.expiresSoonText:void 0,isSmall:!0,children:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeExpiresAt",defaultMessage:"This verification code expires on {timeLeft}",values:{timeLeft:(0,u().DG)(i.expiresAt)}})}),y&&o?(0,j.jsx)(f().p,{isGray:!0,size:"xs",style:v.blueButton,hoveredStyle:v.blueButtonHover,onClick:async()=>{x(!0),await o(i),x(!1)},disabled:p,children:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.regenerateButton",defaultMessage:"Regenerate"})}):void 0]})]})})}function k(e){let{listStyles:i}=e;const t=(0,s().IS)((()=>({list:{paddingInlineStart:22,margin:0},listItem:{fontFamily:d().vc(o().locale).sans,fontWeight:400,marginBottom:12}})),[]);return(0,j.jsxs)("ol",{style:{...t.list,...i},children:[(0,j.jsx)("li",{style:t.listItem,children:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.instructionsDNS",defaultMessage:"Go to the DNS settings for your domain host."})}),(0,j.jsx)("li",{style:t.listItem,children:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.instructionsTXT",defaultMessage:"Create a TXT record and paste the verification code."})}),(0,j.jsx)("li",{style:t.listItem,children:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.instructionsHangTight",defaultMessage:"This update usually takes a few minutes but may take up to 72 hours to complete."})}),(0,j.jsx)("li",{style:t.listItem,children:(0,j.jsx)(l().sA,{id:"verifyDomainModal.verifyExistingDomain.instructionsVerify",defaultMessage:'Click "Verify domain" to confirm once your DNS record is updated.'})})]})}const M=(0,l().YK)({copy:{defaultMessage:"Copy to Clipboard",id:"verifyDomainModal.verifyExistingDomain.copyButton.copyToClipboard"}})},475971:(e,i,t)=>{t.d(i,{M:()=>o,W:()=>n});const n={height:28,paddingLeft:8,paddingRight:8,paddingTop:4,paddingBottom:4,fontWeight:t(284371).Wy.medium},o={opacity:.4}},486345:(e,i,t)=>{t.d(i,{pl:()=>s,sy:()=>a});var n=()=>t(792071),o=()=>t(926397);function a(e){return"invalid"===e.type||"unverified"===e.type}function s(e){const i=n().Bj6.fromValue(o().Hx,e);return{type:i.verified_at?"verified":"unverified",id:i.id,domain:i.domain,verificationCode:i.verification_code,createdAt:i.created_at,expiresAt:i.expires_at,invalidatedAt:i.getInfo().invalidated_at}}},543649:(e,i,t)=>{t.d(i,{A:()=>o});class n extends(()=>t(757695))().Store{getInitialState(){return{modalOpen:!1,loading:!1,domainVerification:void 0}}}const o=n},976721:(e,i,t)=>{t.d(i,{Dw:()=>S,Hc:()=>A,o5:()=>v});t(16280),t(296540);var n=()=>t(857639),o=()=>t(243581),a=()=>t(340498),s=()=>t(273900),r=()=>t(161479),l=()=>t(959013),d=()=>t(496603),c=()=>t(701763),m=()=>t(901389),u=()=>t(579627),f=()=>t(751156),g=()=>t(125565),p=()=>t(247123),x=()=>t(406792),h=()=>t(630116),y=t(474848);async function v(e){let{newRole:i,...t}=e;const n=t.oldPermissionItem,o=(0,d().o8)(n);return o.role=i,await A({newPermissionItem:o,...t})}async function A(e){const{oldPermissionItem:i,newPermissionItem:t,wasInherited:o,environment:a,store:l,sudoModeStore:d,restrictingVisibility:m,fromPermissionWrapper:g,trustedDomainsLoggingData:p}=e;if(!(0,s().nK)(i,t))throw new Error("Permission type mismatch.");const y=!!d&&d.shouldSaveTransactionWithSudoMode(l),v=(0,s().$q)(i.role,t.role);if(o&&v!==t.role||m){return await S({environment:a,useSudoMode:y,store:l,permissionItem:t,fromPermissionWrapper:g,shouldInherit:!0,trustedDomainsLoggingData:p})}return l instanceof h().Bv&&!l.isTopLevel()&&i.role!==t.role&&v!==i.role&&c().MR(a),f().createAndCommit({userAction:"PermissionItem.handlePermissionItemChange",environment:a,canUndo:!0,useSudoMode:y,perform:i=>{const n=x().default.DO_NOT_USE_markLegacy("share_menu.update_page_permission_lag");u().wd({environment:a,store:l,permissionItems:[t],transaction:i,pagePermissionChangeLocation:e.location,metric:n,fromPermissionWrapper:g})}}),"trusted_domain_permission"===t.type&&n().log({level:"warning",from:"shareMenu.handlePermissionItemChange",type:"TrustedDomainPermissionChange",spaceId:(0,r().e)(l.pointer.spaceId),data:{miscDataToConvertToString:{message:"shareMenu.handlePermissionItemChange updating trusted domain permission",blockId:l.id,oldPermissionItem:i,newPermissionItem:t,trustedDomainsLoggingData:p}}}),!0}async function S(e){const{environment:i,useSudoMode:t,store:n,permissionItem:s,fromPermissionWrapper:r,shouldInherit:d,trustedDomainsLoggingData:c}=e,x="none"===(null==s?void 0:s.role)?{type:"remove",permissionItem:s}:{type:"restrict"};return!!("user_permission"===(null==s?void 0:s.type)&&(null==s?void 0:s.user_id)===i.currentUser.id||(await m().Gh({message:(0,p().r6)(x),description:(0,y.jsx)(g().A,{isSmall:!0,isMultiline:!0,children:(0,y.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.footer.whisperTextV2",defaultMessage:"Changing this will unlink this page from its parent, so it will no longer inherit share settings. Admins can still restore settings on unlinked pages."})}),acceptLabel:(0,p().QU)(x),icon:(0,o().r)({height:a().Ev.xl,width:a().Ev.xl})})).accept)&&(f().createAndCommit({userAction:"PermissionItem.onAccept",environment:i,canUndo:!0,useSudoMode:t,perform:e=>{u().wW({environment:i,store:n,permissionItem:s,shouldInherit:d,transaction:e,fromPermissionWrapper:r,trustedDomainsLoggingData:c})}}),!0)}}}]);