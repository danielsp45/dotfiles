"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[59111],{18530:(e,t,o)=>{o.d(t,{V:()=>n});var r=()=>o(762433),i=()=>o(640653);function n(e){const{spaceStore:t,billingData:o,isMmOrEnterprise:n}=e;if((0,r().N8)(null==o?void 0:o.subscription))return"sales_assisted";return t&&n&&!(0,i().hT)(t)?"sales_eligible":"self_serve"}},59442:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>r,paperPlaneFillIcon:()=>i});o(296540);const r={viewBox:"0 0 20 20",fittedViewBox:"2.07 2.9 15.08 15.08",svg:(0,o(474848).jsx)("path",{d:"m16.37 2.901-.053.019L2.474 8.277A.625.625 0 0 0 2.4 9.408l4.826 2.638zm-8.366 9.922 2.638 4.827a.625.625 0 0 0 1.13-.074L17.13 3.733l.019-.054z"})},i=(0,o(340498).wt)("paperPlaneFill",r)},115562:(e,t,o)=>{o.d(t,{W:()=>s});o(296540);var r=()=>o(819121),i=()=>o(401497),n=()=>o(955825),l=()=>o(677195),a=o(474848);function s(e){const{selectorSize:t="normal",...o}=e,{disabled:s,checked:d}=o,[c,u]=(0,r().A)(),p=function(e){const{checked:t,disabled:o,isFocusVisible:r,selectorSize:n}=e;return(0,i().IS)((e=>({root:{position:"absolute",display:"flex",width:"large"===n?15:11,height:"large"===n?15:11,margin:1.5,justifyContent:"center",alignItems:"center",flexShrink:0,borderRadius:"large"===n?2:1,transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${o?e.tint.regular:e.blueColor}`,background:o?e.tint.regular:e.blueColor}:{boxShadow:`0 0 0 1.5px ${o?e.icon.quaternary:e.stroke.input}`,background:e.surface.page},...r&&{boxShadow:e.buttonBlueFocusRing}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"large"===n?18:void 0,height:"large"===n?18:void 0,...o?{pointerEvents:"none"}:{cursor:"pointer"}},icon:{color:e.text.contrastPrimary,width:"large"===n?12:10,height:"large"===n?12:10,ariaHidden:!0}})),[n,t,o,r])}({checked:d,disabled:s,selectorSize:t,isFocusVisible:u});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{ref:c,type:"checkbox",style:p.input,...o}),(0,a.jsx)("span",{...(0,n().AH)(p.root,s?{}:{pseudoActive:p.active}),children:d&&(0,l().R)(p.icon)})]})}},129090:(e,t,o)=>{o.r(t),o.d(t,{default:()=>mt});var r=o(296540),i=(o(16280),()=>o(484714)),n=()=>o(852507),l=()=>o(56366),a=()=>o(401497),s=()=>o(713998),d=()=>o(340498),c=o(474848);const u={viewBox:"0 0 20 20",fittedViewBox:"1.96 2.26 15.06 15.5",directional:!0,svg:(0,c.jsx)("path",{d:"M16.837 5.797a.625.625 0 0 0 0-.884l-2.475-2.475a.625.625 0 0 0-.883.884l1.41 1.41h-2.917A4.63 4.63 0 0 0 8.7 6.089L6.404 8.386c-.63.63-1.485.986-2.377.99H2.595a.625.625 0 0 0 0 1.25h1.432a3.38 3.38 0 0 1 2.377.988L8.7 13.912a4.63 4.63 0 0 0 3.272 1.355h2.917l-1.41 1.411a.625.625 0 1 0 .883.884l2.475-2.475a.625.625 0 0 0 0-.884l-2.475-2.475a.625.625 0 1 0-.883.884l1.405 1.405h-2.912a3.38 3.38 0 0 1-2.388-.989L7.288 10.73a4.6 4.6 0 0 0-.95-.73c.344-.2.664-.444.95-.73l2.296-2.298a3.38 3.38 0 0 1 2.388-.99h2.912l-1.405 1.406a.625.625 0 1 0 .883.884z"})},p=(0,d().wt)("arrowsDivergeRight",u);var m=()=>o(475140),f=()=>o(919709),g=()=>o(959013),h=()=>o(725614),y=()=>o(751156),v=()=>o(755199),b=()=>o(234359),S=()=>o(704152),x=()=>o(285790),w=()=>o(805751),C=()=>o(623580),M=()=>o(505108),I=()=>o(859428),_=()=>o(458366),A=()=>o(47170),P=()=>o(176983),k=()=>o(299487),F=()=>o(937199),B=()=>o(962730),j=()=>o(991249),T=()=>o(807778),D=()=>o(329304),L=()=>o(84817),O=()=>o(554509),N=()=>o(553965),E=()=>o(465570),z=()=>o(208603),U=()=>o(964492),R=()=>o(153861),H=()=>o(58293),Q=()=>o(324561),V=()=>o(523036),q=()=>o(803025),K=()=>o(341233),$=()=>o(414236);function W(e){var t;const{upsell:o,source:n,tooltip:s,children:u}=e,p=(0,g().tz)(),{upgradeEligibility:m,handleClick:f}=function(e){let{upsell:t,source:o}=e;const n=(0,H().r)(),a=(0,i().v3)(),s=(0,q().q)(),d=(0,Q()._3)({spaceId:null==n?void 0:n.id}),c=(0,V().R)(o),u=(0,l().K8)((()=>{var e;return null===(e=a.currentUser)||void 0===e?void 0:e.id}),[a]),[p,m]=(0,$().h)({upsell:t}),f=(0,l().K8)((()=>(0,R().a)({environment:a,upsell:t,spaceStore:n,salesStatus:s,offer:c,requestState:p})),[n,a,t,s,c,p]),g=r.useCallback((async()=>{const e="product"===t.type?t.product:void 0,{getUpgradeSystemAction:r}=await K().H.upgradeSystemActions.load(),i=r(f);await i({setRequestState:m,userId:u,source:o,spaceStore:n,product:e,billingData:d,environment:a})}),[m,f,u,o,n,t,d,a]);return{upgradeEligibility:f,handleClick:g}}({upsell:o,source:n}),h=m.status,y=(0,U().e)(h),v=(0,R().T)({upsell:o,intl:p}),b=null!=s&&null!==(t=s.customTitleMessages)&&void 0!==t&&t[h]?p.formatMessage(s.customTitleMessages[h]):y.label.text({intl:p,productDisplayName:v}),S=(0,a().IS)((e=>({icon:{fill:e.icon[y.iconColor],width:d().Ev.xs,height:d().Ev.xs}})),[y.iconColor]);if(y.disabledTooltip){var x;const e=null!=s&&null!==(x=s.customTitleMessages)&&void 0!==x&&x[h]?p.formatMessage(s.customTitleMessages[h]):y.disabledTooltip({intl:p,productDisplayName:v});return(0,c.jsx)(E().T,{placement:null==s?void 0:s.placement,tooltipMessage:e,children:u({upgradeStatus:h,handleClick:f,isDisabled:!0})})}return s?(0,c.jsx)(I().A,{placement:s.placement??B().W.Bottom,style:{maxWidth:240,minWidth:160,padding:8},renderTooltip:()=>(0,c.jsxs)(L().Y1,{direction:"vertical",gap:8,children:[(0,c.jsxs)(L().Y1,{direction:"horizontal",gap:6,align:"top-left",children:[(0,z().sH)({icon:y.icon,style:S.icon,animationState:"initial"}),(0,c.jsx)(O().D,{styleName:"UISmall-12px/Medium",colorName:"contrastPrimary",children:b})]}),s.description?(0,c.jsx)(O().D,{styleName:"UISmall-12px/Regular",colorName:"contrastSecondary",children:s.description}):null,s.content??null]}),render:e=>r.cloneElement(u({upgradeStatus:h,handleClick:f,isDisabled:!1}),(0,N().A)(e,u({upgradeStatus:h,handleClick:f,isDisabled:!1}).props)),textWrap:!0}):u({upgradeStatus:h,handleClick:f,isDisabled:!1})}var G=()=>o(832857),Y=()=>o(171559),X=()=>o(591779),Z=()=>o(515918),J=()=>o(953006),ee=()=>o(972435),te=()=>o(131448),oe=()=>o(98205);const re=(0,g().YK)({tryConditionalLogicTooltip:{defaultMessage:"Try conditional logic",id:"ConditionalLogicIcon.tutorialTooltip.title"}});function ie(e){const t=(0,i().v3)(),o=(0,l().K8)((()=>te().default.isVisible(oe().wG)),[]),n=(0,X().ZC)(o),s=(0,r.useCallback)((()=>{n&&(v().p$({environment:t}),(0,k().a)(t,oe().wG))}),[t,n]),d=(0,a().IS)((e=>({badge:{color:"rgba(102, 179, 255, 1)",background:"rgba(35, 131, 226, 0.3)",whiteSpace:"nowrap",display:"inline"},tutorialTooltipContent:{whiteSpace:"nowrap",margin:0,color:e.text.contrastPrimary},tutorialTooltip:{padding:"0 2px 4px 8px",borderRadius:8,marginBottom:4}})),[]),{buttonRef:u}=e,p=(0,c.jsxs)("div",{style:d.tutorialTooltipContent,children:[ee().A.formatMessage(re.tryConditionalLogicTooltip),(0,c.jsx)("span",{children:(0,c.jsx)(Z().A,{style:d.badge})})]});return(0,c.jsx)(J().k,{origin:u,hideCloseButton:!0,style:d.tutorialTooltip,hideActions:!0,placementToOrigin:"top",alignmentToOrigin:B().C.Center,showPointer:!1,content:p,onCloseClick:s,shouldDismissUponOutsideClick:!0})}var ne=()=>o(348241);const le=r.forwardRef((function(e,t){var d;const{disabled:u,formQuestionStore:L,format:O,store:N,property:E,locked:z}=e,U=(0,g().tz)(),R=(0,i().v3)(),H=(0,i().Y0)(),Q=(0,F().v$)(),V=(0,A().O)(),{collectionContextStore:q}=(0,r.useContext)(b().L8),K=(0,ne().Q1)(),[$,X]=(0,o(554283).B)(),[Z,J]=(0,o(824146)._)(),[ee,te]=(0,r.useState)(!1),[re,le]=(0,r.useState)(""),[ae,se]=(0,r.useState)(!1);if(!L)throw new Error("FormTextProperty: formQuestionStore is required");const de=(0,l().K8)((()=>{var e;const t=null==L||null===(e=L.getPropertyTypeSpecificConfig("checkbox"))||void 0===e?void 0:e.label;return(0,f().q4_)(t)}),[L]),ce=(0,l().K8)((()=>(0,s().wu)(N.getPropertyValue(E))),[N,E]),ue=(0,l().K8)((()=>L.isRequired()),[L]);(0,n().l)((()=>{le(de)}));const pe=(0,l().K8)((()=>null==L?void 0:L.getParentStore()),[L]),{currentQuestionModuleAndArea:me,modulesByArea:fe}=(0,l().K8)((()=>{const e=null==pe?void 0:pe.getModules();if(!e||!L)return{undefined:void 0,normalizedModulesByArea:e};return{currentQuestionModuleAndArea:(0,m().Ib)({modulesByArea:e,find:e=>"formQuestion"===e.type&&e.formQuestionId===L.id}),modulesByArea:e}}),[L,pe]),ge=(0,D()._X)({name:"forms_conditional_logic",spaceId:V,userId:null===(d=R.currentUser)||void 0===d?void 0:d.id}),he=null==ge?void 0:ge.upsell,ye=(0,l().K8)((()=>(0,T().P4)()),[])&&"unavailable"===(null==ge?void 0:ge.type),ve=(0,P().J)(),be=(0,l().K8)((()=>{const e=(0,oe().Yx)({type:"checkbox",formQuestionId:null==me?void 0:me.module.formQuestionId,formAddConditionalLogicTooltipStore:null==K?void 0:K.formAddConditionalLogicTooltipStore});return e&&q&&o(686526).os({collectionSettingsStore:q.settingsStore}),e}),[null==me?void 0:me.module.formQuestionId,q,K]),Se=(0,r.useMemo)((()=>{const e=null==me?void 0:me.module;return(0,oe().DG)({mouseEntered:ae,currentQuestionModule:e,modulesByArea:fe,featureAvailable:"available"===(null==ge?void 0:ge.type),isDragging:!1,inputFocused:!1,showTutorialTooltip:be})}),[ae,me,fe,null==ge?void 0:ge.type,be]),xe=(0,r.useCallback)((()=>{se(!0)}),[]),we=(0,r.useCallback)((()=>{se(!1)}),[]);function Ce(){y().createAndCommit({userAction:"FormCheckboxProperty.handleUpdateLabel",environment:R,canUndo:!0,perform:e=>{if(!L)return;const t=L.getPropertyTypeSpecificConfig("checkbox");o(246826).zv({store:L.getConfigStore().getKeyStore("propertyTypeSpecificConfig").getKeyStore("checkbox"),data:{...t,label:(0,f().x9d)(re)},transaction:e})}})}const Me=(0,r.useCallback)((()=>{u||y().createAndCommit({userAction:"FormCheckboxProperty.handleToggleCheckbox",environment:R,canUndo:!0,perform:e=>{o(522986).qS({stores:[N],property:E,transaction:e})}})}),[u,R,E,N]),Ie=(0,r.useCallback)((()=>{E&&me&&pe&&(G().lF({environment:R,layoutStore:pe,currentQuestionModule:me.module,area:me.area,property:E,filterValue:{type:"checkbox",value:void 0},setModuleSelection:null==Q?void 0:Q.setModuleSelection,sessionId:(null==Q?void 0:Q.sessionId)??""}),v().p$({environment:R}),k().a(R,oe().wG))}),[E,R,me,pe,Q]),_e=(0,a().IS)((e=>{let t="transparent";return J?t=e.buttonPressedBackground:X&&(t=e.buttonHoveredBackground),{container:{borderRadius:6,wordBreak:"break-word",..."form_editor"===O?{width:"100%",paddingBottom:10,cursor:"grab",display:"flex",alignItems:"center"}:{width:H.isMobile?"100%":"calc(100% + 8px)",marginLeft:H.isMobile?void 0:-8,cursor:"pointer",background:H.isMobile?"light"===e.mode?e.palette.gray[30]:e.palette.gray[100]:t,padding:"6px 8px",height:""===re?34:void 0}},detailedSelector:{border:"none",padding:0},conditionalButtonBorder:{outlineStyle:"solid",outlineWidth:2,outlineColor:e.icon.uiBlueTertiary,borderRadius:4},selectorButton:{..."form_editor"===O&&{width:"100%",display:"flex",borderRadius:6,padding:"5px 10px",marginTop:8}},selectorButtonPressed:{background:"form_editor"===O?e.buttonPressedBackground:void 0},selectorButtonHovered:{background:"form_editor"===O?e.buttonHoveredBackground:void 0}}}),[H.isMobile,O,X,J,re]),Ae=(0,r.useRef)(null),Pe=(0,o(79043).A)(!0);return(0,_().NN)(O)?(0,c.jsx)("div",{onMouseMove:xe,onMouseLeave:we,ref:e=>{$(e),Z(e)},style:_e.container,onClick:()=>{o(24157).default.isEditingFormQuestion()&&h().clear({environment:R})},children:(0,c.jsxs)(S().A,{hoveredStyle:_e.selectorButtonHovered,pressedStyle:_e.selectorButtonPressed,style:_e.selectorButton,disallowTabbing:!0,children:[(0,c.jsx)(M().a,{name:`form-question-${null==L?void 0:L.id}`,required:ue,isDisabled:u,selectorSize:"large",style:_e.detailedSelector,isSelected:ce,label:"form_editor"===O?null:re,value:"checkbox",onChange:Me,"aria-describedby":`form-question-title-${null==L?void 0:L.id} form-description-${null==L?void 0:L.id}`}),"form_editor"===O?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(w().A,{debugName:"FormCheckboxProperty Input",capture:ee,allowMenuList:!0,allowEsc:!0,allowCopyPaste:!0,allowUndo:!0,children:(0,c.jsx)(C().A,{value:re,focus:ee,style:{width:"100%",..."form_editor"===O?{}:{pointerEvents:"none"}},format:C().C.Transparent,disabled:z,textarea:!0,autosize:!0,autosizeMinHeight:26,placeholder:"form_editor"===O&&""===re?U.formatMessage({id:"formCheckboxProperty.placeholderText",defaultMessage:"Checkbox label (optional)"}):"",inputStyle:{width:"100%",opacity:H.isMobile?1:void 0},onMouseDown:e=>e.stopPropagation(),onChange:e=>{le(e.target.value)},onClick:()=>{te(!0)},onBlur:Ce,onSubmit:Ce})}),Se&&(0,c.jsxs)(c.Fragment,{children:[ye&&he&&!be?(0,c.jsx)(W,{upsell:he,source:"forms_conditional_logic",tooltip:{customTitleMessages:{eligible_for_upgrade:{defaultMessage:"Upgrade to add conditional logic",id:"FormMultiSelectProperty.ConditionalLogicIcon.upgradeTooltip",description:"Tooltip for indicating the user needs to upgrade their plan to use conditional logic"},not_eligible:{defaultMessage:"Contact your workspace owner to upgrade to add conditional logic",id:"FormMultiSelectProperty.ConditionalLogicIcon.blockedTooltip",description:"Tooltip for indicating the user needs to ask their administrator to upgrade their plan to use conditional logic."}},placement:B().W.Top,content:(0,c.jsx)(Y().Fp,{})},children:e=>{let{handleClick:t}=e;return(0,c.jsx)("div",{...Pe,children:(0,c.jsx)(x().A,{ref:Ae,style:{width:24,height:24,flexGrow:0},onClick:t,icon:p,iconStyle:{width:16,height:16},ariaLabel:U.formatMessage({defaultMessage:"Add conditional logic",id:"FormCheckboxProperty.ConditionalLogicIcon.title"})})})}}):(0,c.jsx)(I().A,{placement:B().W.Top,textWrap:!0,renderTooltip:()=>(0,c.jsx)(Y().ML,{featureAvailability:ge,isAdmin:ve}),disableTooltip:be,render:e=>(0,c.jsx)("div",{...Pe,children:(0,c.jsx)(x().A,{ref:Ae,style:{width:24,height:24,flexGrow:0,...be&&_e.conditionalButtonBorder},onClick:()=>{if("unavailable"===(null==ge?void 0:ge.type)&&"product"===(null==he?void 0:he.type))j().K(R,{upsell:he,from:"forms_conditional_logic"});else if("available"===(null==ge?void 0:ge.type))return Ie()},icon:p,iconStyle:{width:16,height:16},ariaLabel:U.formatMessage({defaultMessage:"Add conditional logic",id:"FormCheckboxProperty.ConditionalLogicIcon.title"}),...e})})}),be&&(0,c.jsx)(ie,{buttonRef:Ae})]})]}):null]})}):null}));var ae=()=>o(56740),se=()=>o(614001),de=()=>o(414712),ce=()=>o(630960),ue=()=>o(417257);const pe=(0,r.forwardRef)((function(e,t){const n=(0,de().QK)(e),{property:s,store:d,formQuestionStore:u,disabled:p,format:m}=e;if(!u)throw new Error("FormDateProperty: formQuestionStore is required");const{propertySchema:f,baseStyles:h}=(0,r.useContext)(b().L8),y=(0,i().v3)(),v=(0,ue().H)(),S=(0,l().K8)((()=>{var e;return null===(e=v.getFormState())||void 0===e?void 0:e.collectionSchema}),[v]),x=f,w=(0,o(712796).nr)(d,null==x?void 0:x.type,s,y.currentUser.id),C=null==x?void 0:x.date_format,M=null==x?void 0:x.time_format,I=(0,a().IS)((e=>({buttonStyle:{...h.buttonStyle,borderRadius:6,marginTop:8,..."form_editor"===m?{cursor:"grab",color:e.text.quaternary,boxShadow:`0 0 0 1px ${e.stroke.secondary} inset`}:{cursor:"pointer",color:w?e.text.primary:e.text.tertiary}},hoveredStyle:h.buttonHoveredStyle??{},pressedStyle:h.buttonPressedStyle??{},chevronIcon:{width:20,fill:e.icon.tertiary,marginRight:-4,..."form_editor"===m?{fill:e.icon.quaternary}:{}}})),[h.buttonHoveredStyle,h.buttonPressedStyle,h.buttonStyle,m,w]),_=p?(0,c.jsx)(g().sA,{...ce().yh.editorPlaceholder}):(0,c.jsx)(g().sA,{...ce().yh.viewerEmptyPlaceholder});return(0,c.jsx)(se().P,{ref:t,editButtonClickProps:p?void 0:n,style:I.buttonStyle,hoveredStyle:I.hoveredStyle,pressedStyle:I.pressedStyle,formQuestionStore:u,collectionSchema:S,children:(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[w?(0,c.jsx)(o(388507).b,{dateValue:w,dateFormat:C,timeFormat:M,store:d,property:s}):_,(0,ae().U)(I.chevronIcon)]})})}));o(898992),o(823215),o(354520),o(581454);var me=()=>o(402014),fe=()=>o(308145);const ge=(0,d().wt)("collectionFormAudioFile",{viewBox:"0 0 24 24",svg:(0,c.jsx)("g",{children:(0,c.jsx)("path",{d:"M3.572 14.635a.827.827 0 01-.605-.254.877.877 0 01-.244-.615v-3.623c0-.235.081-.44.244-.616a.812.812 0 01.605-.263c.248 0 .456.088.625.263a.86.86 0 01.254.616v3.623a.86.86 0 01-.254.615.85.85 0 01-.625.254zm3.37 3.935a.838.838 0 01-.616-.254.855.855 0 01-.244-.615V6.207c0-.24.081-.446.244-.615a.823.823 0 01.615-.264c.248 0 .453.088.616.264a.84.84 0 01.254.615v11.494a.838.838 0 01-.254.615.817.817 0 01-.616.254zm3.359 3.79a.806.806 0 01-.606-.255.834.834 0 01-.244-.615V2.418a.87.87 0 01.244-.625.806.806 0 01.606-.254.85.85 0 01.625.254.85.85 0 01.254.625V21.49a.818.818 0 01-.254.616.85.85 0 01-.625.253zm3.369-5.06a.855.855 0 01-.615-.243.855.855 0 01-.245-.616V7.467c0-.241.082-.446.245-.615a.838.838 0 01.615-.254c.24 0 .446.084.615.254.17.169.254.374.254.615v8.974a.842.842 0 01-.254.616.855.855 0 01-.615.244zm3.37 2.91a.85.85 0 01-.87-.868V4.566c0-.24.081-.446.244-.615a.833.833 0 01.625-.264.79.79 0 01.605.264c.17.17.254.375.254.615v14.776c0 .24-.084.446-.253.615a.806.806 0 01-.606.254zm3.358-4.814a.818.818 0 01-.615-.253.843.843 0 01-.244-.606V9.371c0-.234.081-.436.244-.605a.803.803 0 01.615-.264c.241 0 .446.088.616.264.169.169.254.37.254.605v5.166a.827.827 0 01-.254.606.838.838 0 01-.616.253z"})})}),he=(0,d().wt)("collectionFormDefaultFile",{viewBox:"0 0 24 24",svg:(0,c.jsx)("g",{children:(0,c.jsx)("path",{d:"M6.795 22.525c-1.048 0-1.84-.27-2.373-.81-.534-.54-.8-1.338-.8-2.393V4.586c0-1.048.266-1.843.8-2.383.534-.547 1.325-.82 2.373-.82h4.707c.41 0 .768.03 1.074.088.306.052.59.153.85.302.26.144.527.355.8.635l5.118 5.205c.286.287.501.563.644.83.15.26.25.55.303.87.052.312.078.696.078 1.152v8.857c0 1.048-.267 1.843-.8 2.383-.534.547-1.325.82-2.374.82h-10.4zm.156-1.923H17.04c.475 0 .83-.12 1.064-.362.235-.24.352-.586.352-1.035V10.73h-5.264c-.696 0-1.217-.173-1.562-.518-.339-.345-.508-.866-.508-1.563V3.297h-4.16c-.475 0-.83.124-1.065.371-.234.247-.351.596-.351 1.045v14.492c0 .45.117.794.351 1.035.235.241.586.362 1.055.362zm6.426-11.563h4.814l-5.38-5.478v4.902c0 .202.042.348.127.44.09.09.237.136.439.136z"})})}),ye=(0,d().wt)("collectionFormImageFile",{viewBox:"0 0 24 24",svg:(0,c.jsx)("g",{children:(0,c.jsx)("path",{d:"M20.965 16.597c.033.803-.155 1.414-.565 1.835-.41.42-1.032.63-1.867.63H5.085c-.691 0-1.214-.196-1.568-.589-.355-.393-.543-.974-.565-1.743l3.13-2.806a1.77 1.77 0 01.514-.348 1.372 1.372 0 011.13.008c.193.078.375.194.547.349l1.536 1.386 3.743-3.354c.194-.166.393-.29.598-.373a1.707 1.707 0 011.295.008c.216.083.415.21.598.382l4.922 4.615zM8.597 12.165c-.366 0-.7-.089-1.005-.266a2.052 2.052 0 01-.722-.722 1.961 1.961 0 01-.266-1.005c0-.36.089-.691.266-.996.183-.304.423-.545.722-.722.305-.183.64-.274 1.005-.274.365 0 .697.091.996.274.299.177.537.418.714.722a1.9 1.9 0 01.274.996c0 .366-.092.7-.274 1.005a1.985 1.985 0 01-.714.722 1.919 1.919 0 01-.996.266zm-3.71 7.595c-.897 0-1.575-.227-2.034-.68-.46-.455-.69-1.124-.69-2.01V6.96c0-.885.23-1.555.69-2.009.459-.46 1.137-.689 2.033-.689h14.211c.902 0 1.583.23 2.042.69.46.453.69 1.123.69 2.008v10.11c0 .886-.23 1.555-.69 2.01-.46.453-1.14.68-2.042.68H4.887zm.099-1.627h14.02c.382 0 .675-.1.88-.299.204-.205.307-.506.307-.905V7.101c0-.398-.103-.697-.307-.896-.205-.205-.498-.308-.88-.308H4.986c-.388 0-.684.103-.888.308-.2.199-.3.498-.3.896v9.828c0 .399.1.7.3.905.204.2.5.299.888.299z"})})}),ve=(0,d().wt)("collectionFormPdfFile",{viewBox:"0 0 24 24",svg:(0,c.jsx)("g",{children:(0,c.jsx)("path",{d:"M7.762 10.777a.55.55 0 01-.39-.136.528.528 0 01-.147-.391c0-.091.022-.205.068-.342l1.338-3.73c.15-.443.426-.664.83-.664.423 0 .71.221.86.664l1.337 3.73c.04.143.059.257.059.342a.55.55 0 01-.137.39c-.091.092-.225.137-.4.137-.274 0-.456-.166-.547-.498l-.303-.85H8.602l-.284.85c-.084.332-.27.498-.556.498zM8.826 8.59h1.29L9.5 6.637h-.059L8.826 8.59zm4.57-1.387a.642.642 0 01-.459-.176.63.63 0 01-.175-.449c0-.176.058-.322.175-.44a.642.642 0 01.46-.175h2.744c.182 0 .332.058.449.176a.596.596 0 01.176.44.63.63 0 01-.176.448.608.608 0 01-.45.176h-2.744zm0 3.272a.642.642 0 01-.459-.176.63.63 0 01-.175-.45c0-.175.058-.322.175-.439a.642.642 0 01.46-.176h2.744c.182 0 .332.059.449.176a.596.596 0 01.176.44.63.63 0 01-.176.449.608.608 0 01-.45.176h-2.744zm-6.19 7.793v-4.58c0-.417.11-.73.331-.938.228-.215.544-.322.947-.322h7.041c.847 0 1.27.42 1.27 1.26v4.482h-.684l-1.865-2.149a.725.725 0 00-.303-.214 1.05 1.05 0 00-.351-.059c-.222 0-.436.091-.645.274l-1.933 1.709-.772-.704a.85.85 0 00-.576-.234.771.771 0 00-.547.234l-1.23 1.24h-.684zm3.114-2.247c.274 0 .511-.1.713-.302a.976.976 0 00.303-.713.934.934 0 00-.303-.713 1.029 1.029 0 00-.713-.303.922.922 0 00-.722.283 1.015 1.015 0 00-.293.733c0 .273.097.51.293.713a.987.987 0 00.722.303zm-6.699 3.301V4.586c0-1.048.267-1.843.8-2.383.535-.547 1.326-.82 2.374-.82h10.4c1.049 0 1.84.273 2.373.82.534.54.801 1.335.801 2.383v14.736c0 1.055-.267 1.852-.8 2.393-.534.54-1.325.81-2.374.81h-10.4c-1.048 0-1.84-.27-2.373-.81-.534-.54-.8-1.338-.8-2.393zm1.924-.117c0 .45.117.794.351 1.035.235.241.59.362 1.065.362h10.078c.475 0 .83-.12 1.064-.362.235-.24.352-.586.352-1.035V4.713c0-.456-.117-.804-.351-1.045-.235-.247-.59-.371-1.065-.371H6.961c-.475 0-.83.124-1.065.371-.234.24-.351.59-.351 1.045v14.492z"})})}),be=(0,d().wt)("collectionFormSheetFile",{viewBox:"0 0 24 24",svg:(0,c.jsx)("g",{children:(0,c.jsx)("path",{d:"M2.778 10.488v-1.56h18.51v1.56H2.779zm0 4.615v-1.56h18.51v1.56H2.779zm8.425 3.993V4.935h1.594v14.16h-1.594zm-6.317.664c-.896 0-1.574-.227-2.033-.68-.46-.455-.69-1.124-.69-2.01V6.96c0-.885.23-1.555.69-2.009.459-.46 1.137-.689 2.033-.689h14.211c.902 0 1.583.23 2.042.69.46.453.69 1.123.69 2.008v10.11c0 .886-.23 1.555-.69 2.01-.46.453-1.14.68-2.042.68H4.887zm.1-1.627h14.02c.382 0 .675-.1.88-.299.204-.205.307-.506.307-.905V7.101c0-.398-.103-.697-.307-.896-.205-.205-.498-.308-.88-.308H4.986c-.388 0-.684.103-.888.308-.2.199-.3.498-.3.896v9.828c0 .399.1.7.3.905.204.2.5.299.888.299z"})})}),Se=(0,d().wt)("collectionFormSlidesFile",{viewBox:"0 0 24 24",svg:(0,c.jsx)("g",{children:(0,c.jsx)("path",{d:"M5.949 21.403c-.897 0-1.575-.227-2.034-.68-.46-.454-.689-1.127-.689-2.017v-8.534c0-.89.23-1.563.689-2.017.46-.453 1.137-.68 2.034-.68h12.094c.896 0 1.574.23 2.034.689.464.453.697 1.123.697 2.008v8.534c0 .885-.233 1.555-.697 2.008-.46.46-1.138.69-2.034.69H5.949zm.1-1.627h11.894c.382 0 .675-.102.88-.307.21-.199.316-.5.316-.905v-8.25c0-.404-.105-.706-.316-.905-.204-.205-.498-.307-.88-.307H6.048c-.387 0-.683.102-.888.307-.2.199-.299.5-.299.904v8.251c0 .404.1.706.3.905.204.205.5.307.887.307zM5.051 6.122c.061-.393.197-.698.407-.913.216-.216.545-.324.988-.324h11.106c.443 0 .77.108.98.324.215.215.354.52.415.913H5.052zm1.694-2.4c.022-.37.14-.65.357-.838.22-.193.53-.29.93-.29h7.935c.398 0 .705.097.921.29.216.188.34.468.374.839H6.746z"})})}),xe=(0,d().wt)("collectionFormVideoFile",{viewBox:"0 0 24 24",svg:(0,c.jsx)("g",{children:(0,c.jsx)("path",{d:"M4.886 19.76c-.896 0-1.574-.227-2.033-.68-.46-.455-.69-1.124-.69-2.01V6.96c0-.885.23-1.555.69-2.009.459-.46 1.137-.689 2.033-.689h14.211c.902 0 1.583.23 2.042.69.46.453.69 1.123.69 2.008v10.11c0 .886-.23 1.555-.69 2.01-.46.453-1.14.68-2.042.68H4.887zm.1-1.627h14.02c.382 0 .675-.1.88-.299.204-.205.307-.506.307-.905V7.101c0-.398-.103-.697-.307-.896-.205-.205-.498-.308-.88-.308H4.986c-.388 0-.684.103-.888.308-.2.199-.3.498-.3.896v9.828c0 .399.1.7.3.905.204.2.5.299.888.299zm5.553-2.872a.759.759 0 01-.448.116.62.62 0 01-.365-.166c-.1-.1-.15-.23-.15-.39V9.2a.5.5 0 01.15-.382.59.59 0 01.373-.157.692.692 0 01.44.1l4.615 2.73a.566.566 0 01.266.324.64.64 0 010 .407.558.558 0 01-.266.323l-4.615 2.715z"})})});var we=()=>o(236262),Ce=()=>o(751735),Me=()=>o(381349),Ie=()=>o(496603),_e=()=>o(534177),Ae=()=>o(436572),Pe=()=>o(892632);const ke=(0,g().YK)({deleteFileButtonAriaLabel:{id:"FormFileProperty.deleteFileButtonAriaLabel",defaultMessage:"Delete file"},fileTypeNotSupported:{id:"FormFileProperty.fileTypeNotSupported",defaultMessage:"Sorry, this file type is not supported."}}),Fe=(0,r.forwardRef)((function(e,t){const{store:n,property:s}=e,d=(0,r.useRef)(null),u=(0,i().v3)(),p=(0,ue().H)(),{filePropertyIdToFormFiles:m,formBlockStore:f}=(0,l().K8)((()=>{const e=p.getFormState();return{filePropertyIdToFormFiles:null==e?void 0:e.filePropertyIdToFormFiles,formBlockStore:null==e?void 0:e.formBlockStore}}),[p]),h=(0,l().K8)((()=>{var e;return(null===(e=p.getFormState())||void 0===e?void 0:e.maxFileSizeMb)??fe().$5}),[p]),y=(0,a().IS)((e=>({formFileContainer:{marginTop:12,marginBotton:18}})),[]),v=(0,r.useCallback)((e=>{p.updateFilePropertyIdToFormFiles(s,(t=>[e,...t]))}),[p,s]),b=(0,r.useCallback)((e=>{p.updateFilePropertyIdToFormFiles(s,(t=>t.filter((t=>t.globalFileUploadStoreKey!==e))))}),[p,s]),S=(0,o(524461).FF)({blockStore:n,propertyId:s,environment:u,onSingleFileStartCallback:e=>{v(e)},onSingleFileErrorCallback:e=>{b(e),Ae().D6({label:(0,c.jsx)(g().sA,{id:"FormFileProperty.fileUpload.uploadFailed",defaultMessage:"File upload failed."})})},formMetadata:{spaceId:null==f?void 0:f.getSpaceId(),formId:null==f?void 0:f.id}}),x=e=>{const t=Pe().r0(e,h);if(!t.canUpload)switch(t.reason){case"fileSizeTooLarge":Ae().D6({label:(0,c.jsx)(g().sA,{id:"FormFileProperty.invalidFileUpload.fileSizeTooLargeErrorMessage",defaultMessage:"Sorry, this file is too large."})});break;case"fileSizeIsZero":Ae().D6({label:(0,c.jsx)(g().sA,{id:"FormFileProperty.invalidFileUpload.fileSizeIsZeroErrorMessage",defaultMessage:"Sorry, that file is invalid."})});break;case"fileExtensionNotAllowed":Ae().D6({label:(0,c.jsx)(g().sA,{...ke.fileTypeNotSupported})});break;default:(0,_e().ub)(t.reason)}return t.canUpload};return f?(0,c.jsx)(je,{...e,uploadButtonRef:d,uploadButtonOnClick:async()=>{const e=await Pe().dA({environment:u,supportsMobileNativeFileUpload:!1,multiple:!0});e.length&&(e=>{const t=((null==m?void 0:m[s])??[]).length;return!(e.numNewFiles+t>fe().Bz&&(Ae().D6({label:(0,c.jsx)(g().sA,{id:"FormFileProperty.fileUpload.maxFilesPerQuestionLimitReached",defaultMessage:"The maximum number of files for this question has been reached."})}),1))})({numNewFiles:e.length})&&e.every(x)&&S(e),d.current&&d.current.focus()},onDropFile:e=>{if("invalidFileDrop"===e.type)return Ae().D6({label:(0,c.jsx)(g().sA,{...ke.fileTypeNotSupported})}),null;x(e.file)&&S([e.file])},numAdditionalFilesDroppable:fe().Bz-((null==m?void 0:m[s])??[]).length,maxFileSizeMb:h,children:(0,c.jsx)("div",{style:y.formFileContainer,children:(null==m?void 0:m[s])&&(null==m?void 0:m[s].map(((e,t)=>{return(0,c.jsx)(Le,{formFile:e,deleteFile:(o=t,()=>{p.updateFilePropertyIdToFormFiles(s,(e=>{const t=e??[];if(o<0||o>=t.length)return t;const r=[...t];return r.splice(o,1),r}))})},t);var o})))})}):(0,c.jsx)(c.Fragment,{})})),Be=(0,r.forwardRef)((function(e,t){const{store:r}=e,n=(0,i().v3)(),a=n.currentUser.id,s=null==r?void 0:r.getSpaceId(),d=(0,D()._X)({name:"form_filesize",spaceId:s,userId:a,amount:"unknown"}),u=void 0===d||"unlimited"===d.limit.amount?fe().$5:d.limit.amount,p=(0,l().K8)((()=>!n.device.isMobileNative||(0,o(600871).mM)({environment:n})),[n]),m=(0,l().K8)((()=>(0,o(640653).s7)(n)&&p?null==d?void 0:d.upsell:void 0),[n,p,d]);return(0,c.jsx)(je,{...e,uploadButtonOnClick:()=>{throw new Error("FormFilePropertyEditor does not support uploading files.")},onDropFile:()=>{throw new Error("FormFilePropertyEditor does not support uploading files.")},numAdditionalFilesDroppable:0,maxFileSizeMb:u,upsell:m})})),je=(0,r.forwardRef)((function(e,t){const{property:r,disabled:n,uploadButtonOnClick:l,uploadButtonRef:s,onDropFile:d,numAdditionalFilesDroppable:u,maxFileSizeMb:p,upsell:m,format:f,store:h,formQuestionStore:y}=e,{isMobile:v}=(0,i().Y0)(),b=(0,i().v3)(),S=(0,a().IS)((e=>{const t=n?"transparent":"light"===e.mode?e.palette.gray[30]:e.palette.translucentGray[100];return{dropzone:{borderRadius:12,background:(0,Me().Qr)([Me().Ay.blueWithAlpha(.14),(0,Ce().X4)(e.contentBackground,.5)])},container:{display:"flex",flexDirection:v?"column":"row",marginTop:n?0:8,alignItems:"center",borderRadius:12,padding:v?"8px 8px 0px 8px":"8px",background:t},uploadButton:{borderRadius:6,borderColor:e.outlineButtonBorder,height:36,padding:12,fontSize:16,background:e.whiteButtonBackground,width:v?"100%":"auto",cursor:"form_editor"===f?"grab":"pointer"},uploadButtonHovered:{borderRadius:6,borderColor:"dark"===e.mode?(0,Ce().X4)(Me().CM.light.lightgray,.3):(0,Ce().X4)(Me().CM.light.darkgray,.3),height:36,padding:12,fontSize:16,backgroundColor:e.whiteButtonBackground},uploadButtonPressed:{backgroundColor:e.outlineButtonHoveredBackground},uploadButtonIcon:{width:16,height:16}}}),[v,n,f]);return(0,c.jsxs)(o(500507).V,{type:o(937182).cM,dropTargetKey:`formFileDropTarget-${r}-${n}`,onDropFile:d,dropzoneStyle:S.dropzone,supportMultipleFiles:!0,numFilesLimit:u,store:h,children:[(0,c.jsxs)("div",{style:S.container,children:[(0,c.jsx)(o(864943).A,{size:"lg",style:S.uploadButton,hoveredStyle:S.uploadButtonHovered,pressedStyle:S.uploadButtonPressed,iconLeading:o(147588).Y,iconStyle:S.uploadButtonIcon,disabled:n,disabledFeedback:!0,onClick:l,ref:s,"aria-describedby":`form-question-${null==y?void 0:y.id} form-description-${null==y?void 0:y.id} form-file-restrictions-${null==y?void 0:y.id}`,children:(0,c.jsx)(g().sA,{id:"FormFileProperty.uploadButton",defaultMessage:"Upload"})}),(0,c.jsx)(De,{formQuestionStore:y,maxFileSizeMb:p,isMobile:v,disabled:n}),(0,c.jsx)(Te,{upsell:m,environment:b})]}),e.children]})}));function Te(e){const{upsell:t,environment:r}=e,i=(0,a().IS)((e=>({upsellButton:{display:"flex",alignItems:"center",fontSize:14,fontWeight:o(284371).Wy.medium,color:e.blueColor,padding:"4px 8px",borderRadius:6,marginBottom:2,marginTop:-1},upsellIcon:{width:14,height:14,marginRight:4},upsellButtonText:{marginTop:-1}})),[]);return t?(0,c.jsx)(I().A,{delayThreshold:120,placement:B().W.Top,renderTooltip:()=>{if("product"===t.type)return(0,c.jsx)("div",{style:{maxWidth:500},children:(0,c.jsx)(g().sA,{id:"FormFileProperty.increaseLimit.tooltip",defaultMessage:"Upgrade to increase the file size limit to {fileSizeLimitMB} MB.",values:{fileSizeLimitMB:t.limit.amount}})})},disableTooltip:"none"===t.type,originGap:6,render:e=>(0,c.jsxs)(S().A,{...e,style:i.upsellButton,onMouseDown:e=>{(0,me().SQ)({event:e,context:me().y$.EditorMouseDown,callback:Ie().D_})},onClick:e=>{(0,j().K)(r,{from:"forms_increase_file_limit",upsell:t})},children:[(0,o(545274).m)(i.upsellIcon),(0,c.jsx)("div",{style:i.upsellButtonText,children:(0,c.jsx)(g().sA,{id:"FormFileProperty.increaseLimit",defaultMessage:"Increase limit"})})]})}):null}function De(e){const{formQuestionStore:t,maxFileSizeMb:r,isMobile:i,disabled:n}=e,l=(0,a().IS)((e=>({captionContainer:{width:"auto"},caption:{textAlign:"left",fontSize:14,color:e.text.secondary},captionMobileOverride:{textAlign:"center",fontSize:12},captionDisabledOverride:{opacity:.5}})),[]);return(0,c.jsx)("div",{style:l.captionContainer,id:`form-file-restrictions-${null==t?void 0:t.id}`,children:(0,c.jsx)(o(736767).A,{shouldWrapCaption:!0,caption:(0,c.jsx)(g().sA,{id:"FormFileProperty.fileRestrictions",defaultMessage:"Size limit: {fileSizeLimitMB} MB. File limit: {fileLimit}.",values:{fileSizeLimitMB:r,fileLimit:fe().Bz}}),captionStyle:{...l.caption,...i?l.captionMobileOverride:{},...n?l.captionDisabledOverride:{}}})})}function Le(e){const{formFile:t,deleteFile:r}=e,{fileName:i}=t,n=(0,g().tz)(),s=(0,l().K8)((()=>{var e;if(t.globalFileUploadStoreKey)return null===(e=o(518888).default.getKeyState(t.globalFileUploadStoreKey))||void 0===e?void 0:e.progressPercent}),[t.globalFileUploadStoreKey]),d=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",paddingLeft:8,paddingRight:8,paddingTop:4,paddingBottom:4,fontSize:16,borderRadius:10},filePreview:{height:40,width:40,borderRadius:6,fontSize:16,borderStyle:"solid",borderColor:"dark"===e.mode?e.palette.gray[400]:e.palette.gray[100],borderWidth:1,marginRight:12,display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0},fileIcon:{height:18,width:18,fill:e.icon.secondary},fileName:{marginRight:14,color:e.darkTextColor,whiteSpace:"nowrap",overflowX:"hidden",textOverflow:"ellipsis",minWidth:0},deleteFileButton:{marginLeft:"auto",height:24,width:24},deleteFileIcon:{height:20,width:20}})),[]),u=(0,o(522419).QC)(t.fileName),p=u?function(e){const t=fe().Z5[e.toUpperCase()];switch(t){case"image":return ye;case"video":return xe;case"audio":return ge;case"pdf":return ve;case"slides":return Se;case"sheet":return be;case"other":case"cad":return he;default:(0,_e().HB)(t)}}(u)(d.fileIcon):void 0;return(0,c.jsxs)("div",{style:d.container,children:[void 0!==s?(0,c.jsx)("div",{style:d.filePreview,children:(0,c.jsx)(o(331542).A,{legacySize:18})}):(0,c.jsx)("div",{style:d.filePreview,children:p}),(0,c.jsx)("div",{style:d.fileName,children:i}),(0,c.jsx)(x().A,{icon:we().trashIcon,onClick:r,style:d.deleteFileButton,iconStyle:d.deleteFileIcon,ariaLabel:n.formatMessage(ke.deleteFileButtonAriaLabel)})]})}o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(672577),o(737550);var Oe=()=>o(908006),Ne=()=>o(970013),Ee=()=>o(901952),ze=()=>o(596359),Ue=()=>o(319975),Re=()=>o(454155),He=()=>o(348501),Qe=()=>o(765957),Ve=()=>o(465741);function qe(e){let{formMode:t,message:o}=e;const r=(0,a().IS)((e=>{const o="form_editor"===t?e.text.quaternary:e.text.tertiary;return{container:{width:"100%",display:"inline-flex",justifyContent:"space-between",color:o},chevronIcon:{width:20,fill:o,marginRight:-4}}}),[t]);return(0,c.jsxs)("div",{style:r.container,children:[(0,c.jsx)(g().sA,{...o}),(0,c.jsx)("div",{children:(0,ae().U)(r.chevronIcon)})]})}const Ke=(0,r.forwardRef)((function(e,t){const o=(0,Re().Dd)(e,t),{property:n,propertySchema:d,format:u,baseStyles:p}=(0,r.useContext)(b().L8),{collectionStore:m,disabled:f,locked:g,store:h,formQuestionStore:y,formDataStore:v}=e,{isMobile:S}=(0,i().Y0)(),x=(0,l().K8)((()=>{var e;return"multi_select"===(null==d?void 0:d.type)?null==y||null===(e=y.getPropertyTypeSpecificConfig("multi_select"))||void 0===e?void 0:e.maxSelectionCount:void 0}),[y,d]),w=(0,Ve().Vm)({formQuestionStore:y,propertySchema:d}),C=(0,l().K8)((()=>d&&y?(0,Ve().KU)({formQuestionStore:y,propertySchema:d})??"list":"list"),[y,d]),M=(0,l().K8)((()=>d&&(0,Ne().lx)(d)?d.options??[]:[]),[d]),I=(0,l().K8)((()=>{var e;const t=null==v||null===(e=v.getFormState())||void 0===e?void 0:e.draftFormBlockStore;if(!n||!t)return new Set;const o=null==t?void 0:t.getPropertyValue(n),r=(0,s().J4)(o,M);return new Set(r.map((e=>e.id)))}),[v,M,n]),_=(0,l().K8)((()=>`form-question-${null==y?void 0:y.id}`),[y]),A=(0,l().K8)((()=>{var e;if(v)return null===(e=v.getFormState())||void 0===e?void 0:e.collectionSchema}),[v]),P=(0,r.useMemo)((()=>{switch(C){case"dropdown":return"none";case"list":return w?"radio":"checkbox";default:(0,_e().HB)(C)}}),[C,w]),k=(0,r.useCallback)(((t,o)=>"form_editor"===e.format?{cursor:"grab",boxShadow:`0 0 0 1px ${t.stroke.secondary} inset`}:{cursor:"pointer",paddingTop:o?0:8,paddingBottom:o?0:8}),[e.format]),F=(0,a().IS)((e=>({buttonStyle:{...p.buttonStyle,...(null==k?void 0:k(e,!0))||{}}})),[p.buttonStyle,k]),B=(0,r.useCallback)((()=>"form_editor"!==u?null:(0,c.jsxs)(c.Fragment,{children:["dropdown"===C&&(0,c.jsx)(se().P,{ref:t,editButtonClickProps:void 0,style:F.buttonStyle,children:(0,c.jsx)(qe,{formMode:u,message:ce().yh.editorDropdownPlaceholderSelect})}),(0,c.jsx)($e,{options:M,collectionStore:m,selectType:P,formQuestionStore:y})]})),[u,C,t,F.buttonStyle,M,m,P,y]),j=(0,r.useCallback)((()=>"form_viewer"!==u?null:"dropdown"===C?(0,c.jsx)(Re().zg,{...o,EmptyComponent:()=>(0,c.jsx)(qe,{formMode:u,message:ce().yh.viewerEmptyPlaceholderSelect}),formQuestionStore:e.formQuestionStore,collectionStore:e.collectionStore,collectionSchema:A,generateButtonStyles:k}):(0,c.jsx)("div",{style:{marginTop:8,marginLeft:S?void 0:-8,display:"flex",gap:S?4:0,flexDirection:"column"},children:M.map((e=>{let t=f;return x&&I.size>=x&&!w&&(I.has(e.id)||(t=!0)),(0,c.jsx)(Ge,{store:h,disabled:t,option:e,allOptions:M,questionName:_,selectType:P},e.id)}))})),[u,C,S,M,o,e.formQuestionStore,e.collectionStore,A,k,f,x,I,w,h,_,P]);return"form_editor"!==u||g?j():B()}));function $e(e){const t=(0,i().v3)(),[n,l]=(0,r.useState)(!1),[s,d]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1),{options:m,collectionStore:f,selectType:h,formQuestionStore:y}=e,{property:v}=(0,r.useContext)(b().L8),S=(0,a().IS)((e=>({addOptionButtonStyle:{color:e.text.tertiary,fill:e.text.tertiary},selectOptionList:{marginTop:m.length>0?4:0},newSelectOption:{marginTop:m.length>0?0:4}})),[m]),x=(0,r.useCallback)((()=>{p(!0)}),[]),w=(0,r.useCallback)((()=>{p(!1)}),[]),C=(0,r.useCallback)((e=>{const t=m.find((t=>t.value===e));return t?(0,c.jsx)(Ye,{type:"persisted",option:t,options:m,selectType:h,isDragging:u,collectionStore:f,setNewOptionInput:l,setDisableDragging:d,formQuestionStore:y},t.id):null}),[f,y,u,m,h]),M=(0,r.useCallback)((e=>{v&&ze().gc({newValues:e,property:v,schema:f.getSchema(),collectionStore:f,environment:t})}),[f,t,v]),I=(0,r.useCallback)((e=>{(0,me().SQ)({event:e,context:me().y$.EditorMouseDown,callback:Ie().D_})}),[]),_=(0,r.useCallback)((e=>(0,o(689094).W)({...e,width:18,marginLeft:1,marginRight:11,fill:S.addOptionButtonStyle.fill})),[S.addOptionButtonStyle.fill]),A=(0,r.useCallback)((()=>{l(!0)}),[]);return v?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o(439264).Ay,{direction:"vertical",style:S.selectOptionList,keys:null==m?void 0:m.map((e=>e.value)),disabled:s,onDragStart:x,onDragEnd:w,renderKey:C,onDrop:M}),n?(0,c.jsx)("div",{style:S.newSelectOption,children:(0,c.jsx)(Ye,{type:"temporary",collectionStore:f,options:m,selectType:h,isDragging:u,setNewOptionInput:l,setDisableDragging:d,formQuestionStore:y})}):null,(0,c.jsx)(o(493823).p,{onMouseDown:I,iconLeading:_,style:{color:S.addOptionButtonStyle.color,marginLeft:6,marginTop:4},onClick:A,children:(0,c.jsx)(g().sA,{id:"questionModule.formSelectMultiSelectProperty.addOption",defaultMessage:"Add option"})})]}):null}const We=6;function Ge(e){const{option:t,allOptions:o,store:n,disabled:d,selectType:u,questionName:p}=e,m=(0,i().v3)(),{isMobile:g}=(0,i().Y0)(),{format:h,property:v,propertySchema:x}=(0,r.useContext)(b().L8),w=(0,l().K8)((()=>{if(!v||!x||!(0,Ne().lx)(x))return!1;const e=n.getPropertyValue(v);let r=[];if("select"===x.type){const t=(0,s().fF)(e,o);r=t?[t]:[]}else r=(0,s().J4)(e,o);return r.some((e=>e.value===t.value))}),[n,t,o,x,v]),C=(0,a().IS)((e=>({selectorButton:{width:"calc(100% + 16px)",borderRadius:We},selectorButtonInner:{border:"none",padding:"4px 8px",borderRadius:We,...g?{backgroundColor:"light"===e.mode?e.palette.gray[30]:e.palette.gray[100]}:{}},selectorButtonPressed:{backgroundColor:e.buttonPressedBackground},selectorButtonHovered:{backgroundColor:e.buttonHoveredBackground},rowPadding:{padding:"form_editor"===h?"0px 0px 0px 16px":void 0}})),[h,g]),I=(0,r.useCallback)((()=>{v&&x&&(0,Ne().lx)(x)&&("multi_select"===x.type&&"checkbox"===u?y().createAndCommit({userAction:"FormSelectProperty.handleMultiSelectQuestionSelectOption",environment:m,canUndo:!0,perform:e=>{w?y().applyOperation({transaction:e,store:n.getPropertyStore(v),operation:{path:["properties",v],pointer:n.pointer,command:"removeSelectOption",args:{option:t.value}}}):y().applyOperation({transaction:e,store:n.getPropertyStore(v),operation:{path:["properties",v],pointer:n.pointer,command:"addSelectOptionAfter",args:{option:t.value}}})}}):y().createAndCommit({userAction:"FormSelectProperty.handleSelectQuestionSelectOption",environment:m,canUndo:!0,perform:e=>{t&&Ue().R9({environment:m,store:n.getPropertyStore(v),value:(0,f().x9d)(t.value),transaction:e})}}))}),[m,t,w,x,v,n,u]);return x&&(0,Ne().lx)(x)?(0,c.jsx)("div",{style:{display:"flex",alignItems:"center",wordBreak:"break-word"},children:(0,c.jsx)(L().Y1,{direction:"horizontal",padding:C.rowPadding.padding,children:(0,c.jsx)(S().A,{hoveredStyle:C.selectorButtonHovered,pressedStyle:C.selectorButtonPressed,style:C.selectorButton,disallowTabbing:!0,children:(0,c.jsx)(M().a,{style:C.selectorButtonInner,name:p,isDisabled:d,label:t.value,onChange:I,selectorSize:"large",isSelected:"form_viewer"===h&&w,value:"select_option",selectType:u,selectAlignYAxis:"center"})})})}):null}function Ye(e){var t;const o=(0,i().v3)(),s=(0,g().tz)(),{type:d,collectionStore:u,formQuestionStore:f,option:y,options:S,isDragging:_,setNewOptionInput:L,setDisableDragging:O,selectType:N}=e,[E,z]=r.useState((null==y?void 0:y.value)??""),[U,R]=(0,r.useState)(!1),[H,Q]=(0,r.useState)(!1),[V,q]=(0,r.useState)(!1),K=(0,F().v$)(),$=(0,A().O)(),X=(0,ne().Q1)(),{currentUserSettingsStore:Z}=(0,l().K8)((()=>Qe().default.state),[]);(0,n().l)((()=>{"temporary"===d&&(q(!0),Q(!0))}));const{property:J,propertySchema:te,collectionContextStore:re}=(0,r.useContext)(b().L8),{currentQuestionModuleAndArea:le,modulesByArea:ae}=(0,l().K8)((()=>{var e;const t=null==f||null===(e=f.getParentStore())||void 0===e?void 0:e.getModules();if(!t||!f)return{currentQuestionModuleAndArea:void 0,modulesByArea:void 0};return{currentQuestionModuleAndArea:(0,m().Ib)({modulesByArea:t,find:e=>"formQuestion"===e.type&&e.formQuestionId===f.id}),modulesByArea:t}}),[f]),se=(0,r.useMemo)((()=>{if(null==y||!y.value||!te)return!1;const e=null==le?void 0:le.module.conditionalGroups,t="select"===te.type?{property:J,filter:{operator:"enum_is",value:{type:"exact",value:y.value}}}:{property:J,filter:{operator:"enum_contains",value:{type:"exact",value:y.value}}},o=null==e?void 0:e.some((e=>Ie().n4(e.trigger,t)));return Boolean(o)}),[le,y,J,te]),de=(0,r.useCallback)((()=>{if(!J||!te||!(0,Ne().lx)(te))return;const e=E.trim();if(e){"alphabetical"===te.auto_sort_options||"reverse_alphabetical"===te.auto_sort_options?ze().Uk({modification:{type:"autoSortInsert",newValue:e},property:J,propertySchema:te,options:S,environment:o,collectionStore:u}):ze().Uk({modification:{type:"keyedObjectListAfter",newValue:e},property:J,propertySchema:te,options:S,environment:o,collectionStore:u}),L(!1);const t=null==Z?void 0:Z.getSettingsStore().getKeyStore("seen_forms_add_conditional_logic_tooltip").getValue(),r=null==le?void 0:le.module.formQuestionId;r&&!t&&(null==X||X.formAddConditionalLogicTooltipStore.setState({openTooltip:(0,oe().fY)({formQuestionId:r,optionValue:e})}),k().HH(o,oe().wG)),re&&(0,Ee().V)({environment:o,collectionContextStore:re,property:J,from:"form_editor",action:"select_add_option"})}else L(!1);q(!1)}),[J,L,re,te,S,o,E,u,null==le?void 0:le.module.formQuestionId,Z,X]),ce=(0,r.useCallback)((e=>{J&&y&&te&&(0,Ne().lx)(te)?(e?ze().r$({environment:o,option:y,property:J,propertySchema:te,collectionStore:u,deleteMessage:se?ee().A.formatMessage(Xe.deleteModalWithConditionalLogic):void 0}):ze().Uk({modification:{type:"keyedObjectListRemove",id:y.id},property:J,propertySchema:te,environment:o,collectionStore:u}),re&&(0,Ee().V)({environment:o,collectionContextStore:re,property:J,from:"form_editor",action:"select_delete_option"}),L&&L(!1),q(!1),Q(!1),O(!1),v().p$({environment:o}),k().a(o,oe().wG)):L&&L(!1)}),[J,L,re,se,te,y,Q,O,o,u]),ue=(0,r.useCallback)((()=>{if(!(J&&y&&te&&(0,Ne().lx)(te)))return;const e=E.trim();e?(e&&e!==(null==y?void 0:y.value)&&(ze().Uk({modification:{type:"keyedObjectListUpdate",option:y,newValue:e},property:J,propertySchema:te,options:S,environment:o,collectionStore:u}),re&&(0,Ee().V)({environment:o,collectionContextStore:re,property:J,from:"form_editor",action:"select_rename_option"})),q(!1),Q(!1),O(!1)):ce()}),[J,re,ce,te,o,Q,O,y,S,E,u]),pe=(0,r.useCallback)((()=>{if(!(J&&te&&(0,Ne().lx)(te)&&le&&y))return;const e=null==f?void 0:f.getParentStore();e&&(G().lF({environment:o,layoutStore:e,currentQuestionModule:le.module,area:le.area,property:J,filterValue:{type:te.type,value:y},setModuleSelection:null==K?void 0:K.setModuleSelection,sessionId:(null==K?void 0:K.sessionId)??""}),v().p$({environment:o}),k().a(o,oe().wG))}),[J,te,le,y,f,o,null==K?void 0:K.setModuleSelection,null==K?void 0:K.sessionId]),me=Ie().sg((()=>R(!0)),5),fe=me,ge=(0,r.useCallback)((()=>{R(!1),me.cancel()}),[me]),he=(0,r.useMemo)((()=>U&&!H),[U,H]),ye=(0,l().K8)((()=>(0,oe().Yx)({type:"multi_select",formQuestionId:null==le?void 0:le.module.formQuestionId,optionValue:null==y?void 0:y.value,formAddConditionalLogicTooltipStore:null==X?void 0:X.formAddConditionalLogicTooltipStore})),[y,null==le?void 0:le.module.formQuestionId,X]),ve=(0,P().J)(),be=(0,D()._X)({name:"forms_conditional_logic",spaceId:$,userId:null===(t=o.currentUser)||void 0===t?void 0:t.id}),Se=null==be?void 0:be.upsell,xe=(0,l().K8)((()=>(0,T().P4)()),[])&&"unavailable"===(null==be?void 0:be.type),Ce=(0,r.useMemo)((()=>(0,oe().DG)({mouseEntered:U,currentQuestionModule:null==le?void 0:le.module,modulesByArea:ae,featureAvailable:"available"===(null==be?void 0:be.type),isDragging:_,inputFocused:H,showTutorialTooltip:ye})),[U,null==le?void 0:le.module,ae,null==be?void 0:be.type,ye,_,H]),Me=(0,r.useMemo)((()=>(U||ye&&Ce)&&!H&&!_),[H,_,U,ye,Ce]),_e=(0,a().IS)((e=>{const t="none"===N?"4px":"16px";return{container:{display:"flex",alignItems:"center",width:"calc(100% + 16px)",marginLeft:-8,padding:"2px 4px",borderRadius:6,backgroundColor:U?e.buttonHoveredBackground:void 0,cursor:"grab"},dragHandle:{position:"absolute",zIndex:2,marginLeft:"-2px"},innerContainer:{display:"flex",alignItems:"center",padding:`0px 0px 0px ${t}`,width:"100%"},conditionalButtonBorder:{outlineStyle:"solid",outlineWidth:2,outlineColor:e.icon.uiBlueTertiary,borderRadius:4}}}),[U,N]),Pe=(0,r.useRef)(null);return J&&te&&(0,Ne().lx)(te)?(0,c.jsxs)("div",{style:_e.container,onMouseMove:fe,onMouseLeave:ge,children:[he&&(0,c.jsx)(He().A,{width:16,height:24,disallowTabbing:!0,disableDrag:H,tooltipPlacement:B().W.Left,hideClickMessage:!0,style:_e.dragHandle}),(0,c.jsxs)("div",{style:_e.innerContainer,children:[(0,c.jsx)(M().a,{style:{border:"none",padding:0,cursor:"grab",flexGrow:0},isDisabled:!0,label:null,isSelected:!1,selectorSize:"large",value:"select_option",selectType:N}),(0,c.jsx)(w().A,{debugName:"Form question option",capture:H,allowMenuList:!0,allowEsc:!0,allowCopyPaste:!0,allowUndo:!0,children:(0,c.jsx)(C().A,{value:E,style:{padding:"2px 0px",paddingRight:3,maxWidth:Me?"calc(100% - 50px)":"100%",flexGrow:1,overflowX:"hidden"},focus:H,format:C().C.Transparent,onMouseDown:e=>e.stopPropagation(),onFocus:()=>{O(!1),V||h().clear({environment:o})},onClick:()=>Q(!0),onChange:e=>{q(!1);const t=/,/g;t.test(e.target.value)&&Ae().D6({label:(0,c.jsx)(g().sA,{id:"questionModule.formSelectMultiSelectProperty.commaWarning",defaultMessage:"Commas are currently not supported."})});const o=e.target.value.replace(t,"").trim();z(o)},onKeyDown:e=>{"Backspace"===e.key&&""===E&&ce()},onBlur:"temporary"===d?de:ue,onSubmit:e=>{"temporary"===d?de():ue(),Oe().default.afterNextFlush((()=>{L(!0)}))}})}),Ce&&(0,c.jsxs)(c.Fragment,{children:[xe&&Se&&!ye?(0,c.jsx)(W,{upsell:Se,source:"forms_conditional_logic",tooltip:{customTitleMessages:{eligible_for_upgrade:{defaultMessage:"Upgrade to add conditional logic",id:"FormMultiSelectProperty.ConditionalLogicIcon.upgradeTooltip",description:"Tooltip for indicating the user needs to upgrade their plan to use conditional logic"},not_eligible:{defaultMessage:"Contact your workspace owner to upgrade to add conditional logic",id:"FormMultiSelectProperty.ConditionalLogicIcon.blockedTooltip",description:"Tooltip for indicating the user needs to ask their administrator to upgrade their plan to use conditional logic."}},placement:B().W.Top,content:(0,c.jsx)(Y().Fp,{})},children:e=>{let{handleClick:t}=e;return(0,c.jsx)(x().A,{ref:Pe,style:{width:24,height:24,flexGrow:0,marginRight:3},onClick:t,icon:p,iconStyle:{width:16,height:16},ariaLabel:s.formatMessage({defaultMessage:"Add conditional logic",id:"FormCheckboxProperty.ConditionalLogicIcon.title"})})}}):(0,c.jsx)(I().A,{placement:B().W.Top,textWrap:!0,renderTooltip:()=>(0,c.jsx)(Y().ML,{featureAvailability:be,isAdmin:ve}),disableTooltip:ye,render:e=>(0,c.jsx)(x().A,{ref:Pe,style:{width:24,height:24,flexGrow:0,marginRight:3,...ye&&_e.conditionalButtonBorder},onClick:()=>{if("unavailable"===(null==be?void 0:be.type)&&"product"===(null==Se?void 0:Se.type))j().K(o,{upsell:Se,from:"forms_conditional_logic"});else if("available"===(null==be?void 0:be.type))return pe()},icon:p,iconStyle:{width:16,height:16},ariaLabel:s.formatMessage({defaultMessage:"Add conditional logic",id:"FormMultiSelectProperty.ConditionalLogicIcon.title"}),...e})}),ye&&(0,c.jsx)(ie,{buttonRef:Pe})]}),Me&&(0,c.jsx)(x().A,{style:{width:24,height:24,flexGrow:0},iconStyle:{width:18,height:18},onClick:()=>ce(!0),icon:we().trashIcon,ariaLabel:s.formatMessage({defaultMessage:"Delete option",id:"BlockPropertyRouter.FormSelectProperty.TrashIcon.title"})})]})]}):null}const Xe=(0,g().YK)({deleteModalWithConditionalLogic:{id:"FormMultiSelectProperty.deleteModalWithConditionalLogic.prompt",defaultMessage:"Are you sure you want to delete this option? The conditional logic that depends on this option will also be removed."}});var Ze=()=>o(146445);const Je=(0,r.forwardRef)((function(e,t){const o=(0,Ze().Dd)(e,t),i=(0,ue().H)(),n=(0,r.useCallback)(((t,o)=>"form_editor"===e.format?{cursor:"grab",boxShadow:`0 0 0 1px ${t.stroke.secondary} inset`}:{cursor:"pointer",paddingTop:o?0:8,paddingBottom:o?0:8}),[e.format]),a=(0,l().K8)((()=>{var e;return null===(e=i.getFormState())||void 0===e?void 0:e.collectionSchema}),[i]);if(!(0,_().NN)(e.format))return null;const s=(0,c.jsx)(qe,{formMode:e.format,message:"form_editor"===e.format?ce().yh.editorPlaceholder:ce().yh.viewerEmptyPlaceholder});return(0,c.jsx)(Ze().de,{...o,EmptyComponent:()=>s,collectionStore:e.collectionStore,quickActionButtons:void 0,formQuestionStore:e.formQuestionStore,generateButtonStyles:n,collectionSchema:a})}));const et=(0,r.forwardRef)((function(e,t){const i=(0,de().QK)(e),{property:n,store:s,formQuestionStore:d,disabled:u,format:p}=e;if(!d)throw new Error("FormPlaceProperty: formQuestionStore is required");const{baseStyles:m}=(0,r.useContext)(b().L8),f=(0,ue().H)(),h=(0,l().K8)((()=>{var e;return null===(e=f.getFormState())||void 0===e?void 0:e.collectionSchema}),[f]),y=(0,l().K8)((()=>(0,o(96330).e)(s.getPropertyValue(n))),[s,n]),v=(0,a().IS)((e=>({buttonStyle:{...m.buttonStyle,borderRadius:6,marginTop:18,..."form_editor"===p?{cursor:"grab",color:e.text.quaternary,boxShadow:`0 0 0 1px ${e.stroke.secondary} inset`}:{cursor:"pointer",color:y?e.text.primary:e.text.tertiary}},hoveredStyle:m.buttonHoveredStyle??{},pressedStyle:m.buttonPressedStyle??{},chevronIcon:{width:20,fill:e.icon.tertiary,marginRight:-4,..."form_editor"===p?{fill:e.icon.quaternary}:{}}})),[m.buttonHoveredStyle,m.buttonPressedStyle,m.buttonStyle,p,y]),S=u?(0,c.jsx)(g().sA,{...ce().yh.editorPlaceholder}):(0,c.jsx)(g().sA,{...ce().yh.viewerEmptyPlaceholder}),x=(0,l().K8)((()=>s.getPropertyValue(n)),[s,n]);return(0,c.jsx)(se().P,{ref:t,editButtonClickProps:u?void 0:i,style:v.buttonStyle,hoveredStyle:v.hoveredStyle,pressedStyle:v.pressedStyle,formQuestionStore:d,collectionSchema:h,children:(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[y?(0,c.jsx)(o(175120).m,{textValue:x,parentStore:s}):S,(0,ae().U)(v.chevronIcon)]})})}));function tt(e,t){var n;const{format:s,property:d,store:u,formQuestionStore:p,disabled:m}=e,v=(0,g().tz)(),S=(0,a().DP)(),x=(0,i().v3)(),w=(0,ue().H)(),{propertySchema:M}=(0,r.useContext)(b().L8),I=(0,r.useRef)(!1),_=(0,l().K8)((()=>(0,f().q4_)(u.getPropertyValue(d))??""),[d,u]),[A,P]=(0,r.useState)(_),[k,F]=(0,r.useState)(!1),{baseStyles:B}=(0,r.useContext)(b().L8),j=(0,l().K8)((()=>{return!!M&&(("title"===M.type||"text"===M.type)&&(null==p||null===(e=p.getPropertyTypeSpecificConfig(M.type))||void 0===e?void 0:e.longAnswer));var e}),[p,M]),T=(0,l().K8)((()=>{const e=w.getFormState();return!!e&&Boolean(e.aliasStore)}),[w]),D=(0,l().K8)((()=>null==p?void 0:p.isRequired()),[p]),L=(0,r.useCallback)((e=>{let t=e.target.value;t.length>Ve().d0&&(t=t.slice(0,Ve().d0),e.target.value=t,Ae().D6({label:v.formatMessage(Ve().Gi.characterLimitReached)})),P(t),I.current&&y().createAndCommit({userAction:"FormTextProperty.handleTextQuestionEdit",environment:x,canUndo:!0,perform:e=>{Ue().R9({environment:x,store:u.getPropertyStore(d),value:(0,f().x9d)(t),transaction:e})}})}),[x,I,d,u,v]),O=(0,r.useCallback)((e=>{I.current=!0,F(!1),L(e),T&&h().clear({environment:x})}),[L,x,T]),N=`\n        .formTextInput::placeholder {\n            color: ${"form_editor"===s?S.text.quaternary:S.text.tertiary};\n            opacity: 1;\n        }\n    `;return(0,c.jsxs)("div",{style:{margin:-8,padding:8},children:[(0,c.jsx)("style",{children:N}),(0,c.jsx)(o(545805).A,{debugName:"FormPropertyWithTextInput",capture:k&&!m,onDelete:Ie().D_,onSpace:Ie().D_,onBackspace:Ie().D_,onLeft:Ie().D_,onRight:Ie().D_,onUp:Ie().D_,onDown:Ie().D_,onSelectAll:Ie().D_,onRedo:Ie().D_,onUndo:Ie().D_,onCut:Ie().D_,onCopy:Ie().D_,onPaste:Ie().D_,onKeypress:Ie().D_,onTab:Ie().D_,onEnter:Ie().D_,children:(0,c.jsx)(C().A,{"aria-labelledby":`form-question-title-${null==p?void 0:p.id}`,"aria-describedby":`form-description-${null==p?void 0:p.id}`,inputElementAttributes:{required:D},textareaElementAttributes:{required:D},value:A,format:C().C.Default,inputClassName:"formTextInput",textarea:j,autosize:j,autosizeMinHeight:j?86:void 0,onChange:L,onBlur:O,disabled:m,onFocus:()=>{T&&h().setSelection({store:u.getPropertyStore(d)}),F(!0)},placeholder:m?v.formatMessage(ce().yh.editorPlaceholder):v.formatMessage(ce().yh.viewerEmptyPlaceholder),style:{padding:0,fontSize:16,borderRadius:6,backgroundColor:Me().Ay.transparent,..."form_editor"===s?{marginTop:8,boxShadow:`0 0 0 1px ${S.stroke.secondary} inset`,cursor:"grab"}:{marginTop:12,boxShadow:null===(n=B.buttonStyle)||void 0===n?void 0:n.boxShadow,lineHeight:1.75}},inputStyle:{backgroundColor:Me().Ay.transparent,..."form_editor"===s?{padding:"9px 10px",pointerEvents:"none"}:{padding:"5px 10px"}}})})]})}const ot=(0,r.forwardRef)(tt);var rt=()=>o(65767),it=()=>o(27732),nt=()=>o(40106),lt=()=>o(112217);function at(e){const{relationItemPointers:t,store:o,relationValue:r,property:i,propertySchema:n,tokenFormat:l}=e;return(0,c.jsx)(c.Fragment,{children:t.map((e=>{let{pointer:t,pageStore:a}=e;return(0,c.jsx)(st,{relatedPagePointer:t,relatedPageStore:a,relationValue:r,store:o,tokenFormat:l,propertySchema:n,property:i},t.id)}))})}function st(e){const{relatedPagePointer:t,relatedPageStore:o,store:n,relationValue:l,property:s,propertySchema:d}=e,u=(0,i().v3)(),p=(0,g().tz)(),m=(0,a().IS)((()=>({tokenWrapper:{display:"flex",alignItems:"center",gap:4,padding:4,width:"100%",borderRadius:12}})),[]),f=(0,r.useCallback)(((e,t)=>{const o=e.filter((e=>e.id!==t.id));y().createAndCommit({userAction:"RelationBlockPropertyValue.handleRemoveRelationClick",environment:u,canUndo:!0,perform:e=>{it().Iq({store:n,propertyId:s,value:o,environment:u,relatedPageId:t.id,propertySchema:d,transaction:e,isUnthrottled:!1})}})}),[u,s,d,n]);return(0,c.jsxs)("div",{style:m.tokenWrapper,children:[(0,c.jsx)(nt().a,{recordPointer:t,parentStore:n,style:{background:"none"},noUnderline:!0,linkify:"whenReadOnly"},t.id),(0,c.jsx)(x().A,{ariaLabel:p.formatMessage({id:"FormRelationProperty.removeRelation",defaultMessage:"Remove relation"}),icon:rt().l,style:{width:20,height:20},iconStyle:{width:8,height:8},onClick:()=>f(l,o)})]},t.id)}const dt=(0,r.forwardRef)((function(e,t){const i=(0,lt().Dd)(e,t),{buttonStyle:n,editButtonClickProps:s,property:d,onContextMenu:u,store:p,quickActionButtons:m,formQuestionStore:f}=i,{disabled:h,format:y}=e,v=(0,ue().H)(),{propertySchema:S,baseStyles:x}=(0,r.useContext)(b().L8),w=S,C=(0,o(425497).Ug)(null==x?void 0:x.tokenFormat),M=(0,l().K8)((()=>{var e;return null===(e=v.getFormState())||void 0===e?void 0:e.collectionSchema}),[v]),I=(0,lt().jD)({store:p,propertySchema:w,property:d}),_=(0,lt().Tn)({store:p,propertySchema:w,relationValue:I}),A=0===_.length,P=(0,a().IS)((e=>({buttonStyle:{...x.buttonStyle,...n,..."form_editor"===y?{boxShadow:`0 0 0 1px ${e.stroke.secondary} inset`,cursor:"grab"}:{}},buttonPressedStyle:x.buttonPressedStyle??{},buttonHoveredStyle:x.buttonHoveredStyle??{},selectedMessageText:"form_editor"===y?{color:e.text.quaternary}:{color:A?e.text.tertiary:e.text.primary},chevronIcon:{width:20,fill:e.icon.tertiary,marginRight:-4,..."form_editor"===y?{fill:e.icon.quaternary}:{}}})),[x.buttonHoveredStyle,x.buttonPressedStyle,x.buttonStyle,n,y,A]),k=(0,r.useMemo)((()=>w&&I&&0!==_.length?(0,c.jsx)(at,{relationItemPointers:_,store:p,tokenFormat:C,relationValue:I,property:d,propertySchema:w}):null),[d,w,_,I,p,C]),F=(0,l().K8)((()=>"form_editor"===y?(0,c.jsx)(g().sA,{...ce().yh.editorPlaceholder}):A?(0,c.jsx)(g().sA,{...ce().yh.viewerEmptyPlaceholder}):(0,c.jsx)(g().sA,{id:"FormRelationProperty.nonEmptyMsg",defaultMessage:"{numSelected} selected",values:{numSelected:_.length}})),[y,A,_.length]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(se().P,{ref:t,editButtonClickProps:h?void 0:s,onContextMenu:u,style:P.buttonStyle,hoveredStyle:P.buttonHoveredStyle,pressedStyle:P.buttonPressedStyle,quickActionButtons:m,formQuestionStore:f,collectionSchema:M,children:(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%"},children:[(0,c.jsx)("div",{style:P.selectedMessageText,children:F}),(0,c.jsx)("div",{children:(0,ae().U)(P.chevronIcon)})]})}),k&&(0,c.jsx)("div",{style:{paddingTop:8},children:k})]})})),ct=(0,r.forwardRef)((function(e,t){throw new Error("Unsupported form property type")})),ut=r.forwardRef((function(e,t){const{property:o,format:r,propertyType:i,innerProps:n}=e;if(!i)return null;const l=pt[r][i];return null===l?null:(0,c.jsx)(l,{ref:t,...n,property:o,format:r})})),pt={form_editor:{text:ot,title:ot,select:Ke,multi_select:Ke,relation:dt,date:pe,person:Je,file:Be,number:ot,checkbox:le,email:ot,url:ot,phone_number:ot,place:et,created_by:ct,created_time:ct,formula:ct,last_edited_by:ct,last_edited_time:ct,last_visited_time:ct,location:ct,rollup:ct,status:ct,verification:ct,auto_increment_id:ct,button:ct},form_viewer:{text:ot,title:ot,select:Ke,multi_select:Ke,relation:dt,date:pe,person:Je,file:Fe,number:ot,checkbox:le,email:ot,url:ot,phone_number:ot,place:et,created_by:ct,created_time:ct,formula:ct,last_edited_by:ct,last_edited_time:ct,last_visited_time:ct,location:ct,rollup:ct,status:ct,verification:ct,auto_increment_id:ct,button:ct}},mt=ut},132174:(e,t,o)=>{o.d(t,{A:()=>l});var r=()=>o(713998),i=()=>o(919709);class n extends(()=>o(757695))().Store{getInitialState(){return{isLoaded:!1}}getFormState(){if(this.state.isLoaded)return this.state}getQuestionError(e){if(this.state.isLoaded)return this.state.formQuestionErrorMap.get(e)}updateFormState(e){this.state.isLoaded&&this.setState({...this.state,...e})}updateFilePropertyIdToFormFiles(e,t){var o;if(!this.state.isLoaded)return;const r=null===(o=this.getFormState())||void 0===o?void 0:o.filePropertyIdToFormFiles;this.updateFormState({filePropertyIdToFormFiles:{...r,[e]:t((null==r?void 0:r[e])??[])}})}updateFormErrorMap(e,t){if(!this.state.isLoaded)return;const n=this.state.collectionSchema;if(!n)return;const l=new Map;for(const u of e){var a,s,d;const e=u.id,p=null===(a=u.getConfig())||void 0===a?void 0:a.propertyId;if(!p)continue;const m=null===(s=this.state.draftFormBlockStore)||void 0===s?void 0:s.getProperties()[p],f=(0,r()._g)({schema:n,property:p});if(f){if(u.isRequired()&&null!==(d=this.state.questionIdsVisibleAtLastSubmissionAttempt)&&void 0!==d&&d.includes(e)){const t=this.state.filePropertyIdToFormFiles;if("file"===f.type){var c;if(((null===(c=t[p])||void 0===c?void 0:c.length)??0)<1){l.set(e,"required");continue}}else if("checkbox"===f.type){if(!0!==(0,r().wu)(m)){l.set(e,"required");continue}}else if((0,i().w9s)(m)){l.set(e,"required");continue}}if(!(0,i().w9s)(m)){const r=(0,i().q4_)(m);if("number"===f.type&&!(0,o(72135).kf)(r,t)){l.set(e,"invalid_number");continue}if("email"===f.type&&!(0,o(842599).DT)(r)){l.set(e,"invalid_email");continue}if("url"===f.type&&!(0,o(402137).w)(r)){l.set(e,"invalid_url");continue}if("phone_number"===f.type&&!(0,o(754199).e)(r)){l.set(e,"invalid_phone_number");continue}}}}this.updateFormState({formQuestionErrorMap:l})}}const l=n},132855:(e,t,o)=>{o.r(t),o.d(t,{arrowInCircleUpFillIcon:()=>i,iconDefinition:()=>r});o(296540);const r={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o(474848).jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 0 0-15.25 7.625 7.625 0 0 0 0 15.25m3.042-8.07a.625.625 0 0 1-.884 0L10.625 8.02v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 1 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"})},i=(0,o(340498).wt)("arrowInCircleUpFill",r)},153861:(e,t,o)=>{o.d(t,{T:()=>i,a:()=>n});var r=()=>o(979340);function i(e){let{upsell:t,intl:o}=e;return"product"===t.type?(0,r().u2)({product:t.product,intl:o}):void 0}function n(e){const{upsell:t,spaceStore:o,salesStatus:i,offer:n,requestState:l}=e;return"unrequested"===l?{status:"eligible_to_request"}:"pending"===l?{status:"request_pending"}:null!=o&&o.canAdmin()?"none"===t.type?{status:"not_eligible"}:"sales_assisted"===i?{status:"sales_assisted"}:(0,r().h0)(t.product)&&"sales_eligible"===i?{status:"sales_eligible"}:"preferred"===t.trialability&&"trial"===(null==n?void 0:n.type)&&n.subscriptionTier===t.product?{status:"eligible_for_trial"}:{status:"eligible_for_upgrade"}:{status:"not_eligible"}}},171559:(e,t,o)=>{o.d(t,{Fp:()=>s,ML:()=>a,Pe:()=>n});var r=()=>o(645873);const i=new(r().O2)("formEditorActionButtons",(()=>Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(75078),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(90978),o.e(77213),o.e(21194),o.e(39541),o.e(45620),o.e(58102),o.e(9066),o.e(51859),o.e(69095)]).then(o.bind(o,22039)))),n=(0,r().jQ)(i,(e=>e.default)),l=new(r().O2)("conditionalLogicTooltip",(()=>o.e(16130).then(o.bind(o,879022)))),a=(0,r()._h)(l,(e=>e.ConditionalLogicTooltip)),s=(0,r()._h)(l,(e=>e.ConditionalLogicUpsellTooltip))},201361:(e,t,o)=>{o.d(t,{P:()=>n});o(296540);var r=o(474848);const i={viewBox:"2.72 1.1 15.56 16.51",svg:e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M7.93132 1.82416C6.22047 1.48199 4.62427 2.79056 4.62427 4.5353C4.62427 5.09457 4.79032 5.61505 5.07582 6.05014H4.29912C3.42927 6.05014 2.72412 6.75529 2.72412 7.62514V9.52514C2.72412 10.1359 3.07175 10.6654 3.57994 10.9267H9.37427V6.05643H10.6243V10.9267H16.4183C16.9265 10.6654 17.2741 10.1359 17.2741 9.52514V7.62514C17.2741 6.75529 16.569 6.05014 15.6991 6.05014H14.9228C15.2082 5.61507 15.3743 5.09461 15.3743 4.53538C15.3743 2.78566 13.7613 1.48542 12.0554 1.82661C11.2118 1.99533 10.4924 2.47592 10.0119 3.13467C9.54306 2.48204 8.83618 2.00513 8.00124 1.83815L7.93132 1.82416ZM9.37427 5.03772V6.05013H7.3891C6.55248 6.05013 5.87427 5.37192 5.87427 4.5353C5.87427 3.57937 6.74882 2.86241 7.68618 3.04989L7.7561 3.06387C8.69699 3.25205 9.37427 4.07819 9.37427 5.03772ZM14.1243 4.53538C14.1243 5.36715 13.4539 6.04235 12.624 6.05014H10.6243V5.08677C10.6243 4.10164 11.3289 3.24667 12.3005 3.05234C13.2428 2.86389 14.1243 3.58444 14.1243 4.53538Z",style:{rotate:"animate"===e?"14deg":"0deg",transformOrigin:"75% center",transition:"rotate 0.548s linear(\n    \t\t\t\t0, 0.007, 0.028 1.8%, 0.113 3.9%, 0.613 12.1%, 0.817 16.2%, 0.894,\n   \t\t\t\t\t0.954 20.4%, 1, 1.031 25.1%, 1.043 26.4%, 1.051, 1.055, 1.056 31.2%,\n    \t\t\t\t1.049 34.9%, 1.012 46.3%, 0.999 54.2%, 0.997 61.9%, 1\n  \t\t\t\t)"}}),(0,r.jsx)("path",{d:"M10.6243 12.1768H16.4133V15.7002C16.4133 16.5701 15.7082 17.2752 14.8383 17.2752H10.6243V12.1768Z"}),(0,r.jsx)("path",{d:"M3.58521 12.1768H9.37427V17.2752H5.1602C4.29036 17.2752 3.58521 16.5701 3.58521 15.7002V12.1768Z"})]})},n=(0,o(882827).p)("presentFillAnimated",i)},208603:(e,t,o)=>{o.d(t,{i9:()=>a,lP:()=>s,sH:()=>l});var r=o(296540),i=()=>o(401497),n=()=>o(625634);function l(e){let{icon:t,style:o,animationState:r}=e;return"static"===t.type?t.iconFn(o,void 0,void 0,"all"):t.iconFn({style:o,animationState:r})}function a(e,t){return(0,i().IS)((o=>({icon:{fill:o.icon[e.iconColor],...t?{width:n().z[t],height:n().z[t]}:{}}})),[t,e]).icon}function s(){const[e,t]=r.useState("initial");return{animationState:e,animationTriggers:{onMouseEnter:()=>t("animate"),onMouseLeave:()=>t("initial")}}}},295870:(e,t,o)=>{o.d(t,{Jg:()=>s});o(898992),o(672577);var r=()=>o(232802),i=()=>o(762433),n=()=>o(979340),l=()=>o(807778),a=()=>o(920370);function s(e){var t;const{product:o,spaceId:s,userId:d,environment:c,billingData:u,spaceUserStore:p,spaceStore:m}=e;if(!o||!s||!d)return"not_eligible";if((0,i().eh)(u,o))return"product_already_available";const f=(0,r().rU)(o),g=function(e){const{billingData:t,environment:o,spaceUserStore:r,spaceStore:a}=e;if(!a||!r||!t)return!1;const s=(0,l().Gy)(o),d=a.getDisableMemberUpgradeRequests();if(!s)return!1;if(d)return!1;if(!(0,n().jR)((0,i().AI)(t)))return!1;if((0,i().et)(t))return!1;const c=Boolean(r.isMember()&&!r.isWorkspaceOwner());return c}({billingData:u,environment:c,spaceUserStore:p,spaceStore:m});if(!f||!g)return"not_eligible";const h=function(e){let{spaceId:t,environment:o}=e;if(!t)return;return a().L.getData(o,{spaceId:t})}({spaceId:s,environment:c});if(!h)return"not_eligible";const y=null===(t=h[o])||void 0===t?void 0:t.find((e=>e.created_by_id===d));return(null==y?void 0:y.request_status)||"unrequested"}},348241:(e,t,o)=>{o.d(t,{Q1:()=>l,cJ:()=>n,zi:()=>i});o(16280);var r=o(296540);const i=(0,r.createContext)(null);function n(){const e=(0,r.useContext)(i);if(!e)throw new Error("useFormLayoutEditorContext must be used inside FormLayoutEditorContext.Provider");return(0,r.useMemo)((()=>e),[e])}function l(){return(0,r.useContext)(i)}i.displayName="FormLayoutEditorContext"},402137:(e,t,o)=>{o.d(t,{w:()=>s});o(18107),o(967357),o(814603),o(147566),o(198721);const r="://",i="www.",n=/.+\..+\..+/,l=/\.{2,}/,a=/.+\..+/;function s(e){const t=e.trim();if(0===t.length)return!1;if(-1===t.indexOf(".")&&-1===t.indexOf("localhost"))return!1;if("."===t.at(t.length-1)||-1!==t.indexOf(" "))return!1;let o,s=`${-1===t.indexOf(r)?"http://":""}${t}`;try{o=new URL(s)}catch(c){const e=-1===s.indexOf(i),[t,n]=s.split(r);s=`${t}${r}${e?"www.":""}${n}`;try{o=new URL(s)}catch(c){return!1}}const d=o.hostname;return!l.test(d)&&(!(t.includes(i)&&"localhost"!==d&&!n.test(d))&&!("localhost"!==d&&!a.test(d)))}},414236:(e,t,o)=>{o.d(t,{h:()=>c});var r=o(296540),i=()=>o(484714),n=()=>o(56366),l=()=>o(58293),a=()=>o(646736),s=()=>o(324561),d=()=>o(295870);function c(e){const{upsell:t}=e,o=(0,i().v3)(),c=(0,l().r)(),u=(0,a().HI)(),p=null==c?void 0:c.id,m=(0,n().K8)((()=>{var e;return null===(e=o.currentUser)||void 0===e?void 0:e.id}),[o]),f=(0,s().f_)({spaceId:p}),g="product"===(null==t?void 0:t.type)?t.product:void 0,h=(0,n().K8)((()=>(0,d().Jg)({product:g,spaceId:p,userId:m,billingData:f,environment:o,spaceStore:c,spaceUserStore:u})),[g,p,m,f,o,c,u]),[y,v]=(0,r.useState)(h);return[y,v]}},417257:(e,t,o)=>{o.d(t,{H:()=>l,o:()=>n});var r=o(296540),i=()=>o(132174);const n=(0,r.createContext)(null);function l(){const e=(0,r.useContext)(n);return e||new(i().A)}n.displayName="FormBlockContext"},465570:(e,t,o)=>{o.d(t,{T:()=>d});var r=o(296540),i=()=>o(554509),n=()=>o(859428),l=()=>o(553965),a=()=>o(962730),s=o(474848);function d(e){let{tooltipMessage:t,children:o,placement:d=a().W.Bottom}=e;return Boolean(t)?(0,s.jsx)(n().A,{placement:d,style:{maxWidth:240,minWidth:160},renderTooltip:()=>(0,s.jsx)(i().D,{styleName:"UISmall-12px/Medium",colorName:"contrastPrimary",children:t}),render:e=>r.cloneElement(o,(0,l().A)(e,o.props)),textWrap:!0}):o}},505108:(e,t,o)=>{o.d(t,{a:()=>m});var r=o(296540),i=()=>o(401497),n=()=>o(534177),l=()=>o(284371),a=()=>o(84817),s=()=>o(819121),d=()=>o(955825),c=o(474848);function u(e){const{disabled:t,checked:o,selectorSize:r}=e,[n,l]=(0,s().A)(),a=function(e){const{checked:t,disabled:o,isFocusVisible:r,selectorSize:n}=e;return(0,i().IS)((e=>({root:{position:"absolute",display:"flex",width:15,height:15,padding:5,margin:1.5,justifyContent:"center",alignItems:"center",gap:8,flexShrink:0,borderRadius:"50%",transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${o?e.tint.regular:e.blueColor}`,background:o?e.tint.regular:e.blueColor}:{boxShadow:`0 0 0 1.5px ${o?e.icon.quaternary:e.stroke.input}`,background:e.surface.page},...r&&{boxShadow:e.buttonBlueFocusRing}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"small"===n?14:18,height:"small"===n?14:18,...o?{pointerEvents:"none"}:{cursor:"pointer"}}})),[t,o,r,n])}({checked:o,disabled:t,isFocusVisible:l,selectorSize:r});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",{ref:n,type:"radio",style:a.input,className:"radio-button",...e}),(0,c.jsx)("span",{...(0,d().AH)("custom-radio-button",a.root,t?{}:{pseudoActive:a.active})})]})}var p=()=>o(554509);const m=r.forwardRef((function(e,t){let{additionalContent:o,description:n,isDisabled:s,isSelected:d,label:u,name:p,onChange:m,width:h="fill",selectorSize:y="normal",selectAlignXAxis:v="left",selectAlignYAxis:b="center",selectType:S="checkbox",style:x,supportText:w,value:C,colorName:M,alignAdditionalContent:I,..._}=e;const A=(0,r.useId)(),P=function(e){const{isSelected:t,isDisabled:o,selectAlignYAxis:r,alignAdditionalContent:n}=e;return(0,i().IS)((e=>{const i=t&&!o?e.blueColor:e.selectorBorderUnselected;return{container:{display:"flex",alignItems:n??"center",gap:12,userSelect:"none",padding:"9px 16px 10px 10px",borderRadius:6,border:`1px solid ${i}`,...!o&&{cursor:"pointer"}},title:{fontWeight:l().Wy.medium,fontSize:14,userSelect:"none",lineHeight:18},additionalContentWrapper:{flexShrink:0},selectorWrapper:{display:"flex",..."top"===r?{marginTop:2}:{}},rightAlignSelectorWrapper:{display:"flex"}}}),[t,o,r,n])}({isSelected:d,isDisabled:s,selectAlignYAxis:b,alignAdditionalContent:I}),k=(0,c.jsxs)(a().Y1,{direction:"horizontal",align:"top"===b?"top-left":"center-left",gap:12,width:h,children:[(0,c.jsx)("div",{style:P.selectorWrapper,children:(0,c.jsx)(g,{id:A,selectType:S,name:p,value:C,onChange:m,isSelected:d,selectorSize:y,isDisabled:s,..._})}),(0,c.jsx)(f,{colorName:M,description:n,label:u,selectorSize:y,supportText:w,isDisabled:s})]}),F=(0,c.jsxs)(a().Y1,{direction:"horizontal",align:"top"===b?"top-center":"center",gap:12,children:[(0,c.jsx)(f,{colorName:M,description:n,label:u,selectorSize:y,supportText:w,isDisabled:s}),(0,c.jsx)("div",{style:{...P.selectorWrapper,...P.rightAlignSelectorWrapper},children:(0,c.jsx)(g,{id:A,selectType:S,name:p,value:C,onChange:m,selectorSize:y,isSelected:d,isDisabled:s,..._})})]}),B=o?(0,c.jsx)("div",{style:P.additionalContentWrapper,children:o}):null;return(0,c.jsx)("label",{ref:t,style:{...P.container,...x},htmlFor:A,children:"left"===v?(0,c.jsxs)(c.Fragment,{children:[k,B]}):(0,c.jsxs)(c.Fragment,{children:[B,F]})})}));function f(e){const{description:t,label:o,supportText:r,selectorSize:i,isDisabled:l,colorName:s}=e;let d;return"large"===i?d="Page-Content/Text-Block":"normal"===i||void 0===i?d="Body-13px/Medium":"small"===i?d="Body-12px/Regular":(0,n().HB)(i),(0,c.jsxs)(a().Y1,{gap:4,children:[(0,c.jsxs)(a().Y1,{gap:2,children:[(0,c.jsx)(p().D,{styleName:d,colorName:s||(l?"quaternary":"primary"),children:o}),t?(0,c.jsx)(p().D,{styleName:"Caption-12px/Regular",colorName:l?"quaternary":"secondary",children:t}):null]}),r?(0,c.jsx)(p().D,{styleName:"Caption-12px/Medium",colorName:"tertiary",children:r}):null]})}function g(e){const{selectType:t,selectorSize:r="normal",id:l,name:a,value:s,onChange:d,isSelected:p,isDisabled:m,...f}=e,g=(0,i().IS)((()=>({checkboxWrapper:{minWidth:18,display:"flex",justifyContent:"center"}})),[]);switch(t){case"radio":return(0,c.jsx)(u,{id:l,name:a,value:s,onChange:d,checked:p,disabled:m,selectorSize:r,...f});case"checkbox":return(0,c.jsx)("div",{style:g.checkboxWrapper,children:(0,c.jsx)(o(115562).W,{id:l,name:a,value:s,onChange:d,checked:p,disabled:m,selectorSize:r,...f})});case"none":return null;default:(0,n().HB)(t)}}},523036:(e,t,o)=>{o.d(t,{R:()=>d});var r=o(296540),i=()=>o(484714),n=()=>o(56366),l=()=>o(640653),a=()=>o(765957),s=()=>o(749356);function d(e){const t=(0,i().v3)(),[o,d]=(0,r.useState)(),{spaceId:c,spaceName:u}=(0,n().K8)((()=>{const e=a().default.state.currentSpaceStore;return e?{spaceId:e.getSpaceId(),spaceName:(0,l().GK)(t,e)}:{spaceId:void 0,spaceName:void 0}}),[t]);return(0,r.useEffect)((()=>{!async function(){if(c){const o=await(0,s().OC)(t,c,e);o&&(d(o),u&&(0,s().Zc)({environment:t,spaceName:u,offerCampaign:o.campaign}))}}()}),[t,c,u,e]),o}},524461:(e,t,o)=>{o.d(t,{FF:()=>u,Pe:()=>s,Ru:()=>c,pZ:()=>d});o(16280);var r=o(296540),i=()=>o(892632),n=()=>o(518888);function l(e,t){return`${e}-${t}`}function a(e,t,o){return`${l(e,t)}-${o}`}function s(e,t,o){const r=l(t,o);return e.startsWith(r)}function d(e,t){return e.startsWith(t)}function c(e){const{blockStore:t,propertyId:o,environment:r,saveUploadedFile:i}=e;return p({blockStore:t,propertyId:o,environment:r,saveUploadedFile:i})}function u(e){const{blockStore:t,propertyId:o,environment:r,onSingleFileStartCallback:i,onSingleFileErrorCallback:n,formMetadata:l}=e,{spaceId:a,formId:s}=l,d=p({blockStore:t,propertyId:o,environment:r,onSingleFileStartCallback:i,onSingleFileErrorCallback:n,formMetadata:{spaceId:a??"",formId:s??""}});return a&&s?d:e=>{throw new Error("spaceId and formId are not defined")}}function p(e){const{blockStore:t,propertyId:o,environment:l,onSingleFileStartCallback:s,onSingleFileErrorCallback:d,saveUploadedFile:c,formMetadata:u}=e;return(0,r.useCallback)((e=>{const r=(e,r,i)=>{const l=a(t.pointer.id,o,r);n().default.setKeyState(l,{progressPercent:0,file:e.file,name:e.name,size:e.size}),s&&i&&s({...i,globalFileUploadStoreKey:l})},p=(e,r)=>{let{progressPercent:i,progressText:l}=e;const s=a(t.pointer.id,o,r),d=n().default.getKeyState(s);if(!d)throw new Error("uploading file cannot be found in global file upload state");n().default.setKeyState(s,{...d,progressPercent:i,progressText:l})},m=(e,r)=>{const i=a(t.pointer.id,o,r),l=n().default.getKeyState(i);if(n().default.setKeyState(i,void 0),!l||null==l||!l.name)throw new Error("completed file upload cannot be found in global file upload state");c&&c({name:null==l?void 0:l.name,url:e},void 0)},f=(e,r)=>{const i=a(t.pointer.id,o,r);n().default.setKeyState(i,void 0),d&&d(i)},g=u?{environment:l,files:e,bucket:"temporary",formMetadata:u,onSingleFileStart:r,onSingleFileProgress:p,onSingleFileComplete:m,onSingleFileError:f}:{environment:l,files:e,bucket:"secure",record:t.pointer,isFileBlock:!1,onSingleFileStart:r,onSingleFileProgress:p,onSingleFileComplete:m,onSingleFileError:f};i().Zn(g)}),[c,t.pointer,l,o,u,s,d])}},545274:(e,t,o)=>{o.d(t,{m:()=>i});o(296540);var r=o(474848);const i=(0,o(340498).wt)("arrowUpCircled",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M7.993 15.126c.966 0 1.875-.185 2.728-.554a7.218 7.218 0 003.787-3.78 6.788 6.788 0 00.553-2.728c0-.966-.184-1.875-.553-2.727a7.136 7.136 0 00-1.531-2.25 7.219 7.219 0 00-2.256-1.53 6.805 6.805 0 00-2.735-.554c-.966 0-1.875.185-2.727.554a7.241 7.241 0 00-3.774 3.78 6.788 6.788 0 00-.553 2.727c0 .967.184 1.876.553 2.728.37.852.878 1.604 1.525 2.256a7.124 7.124 0 002.256 1.524 6.77 6.77 0 002.727.554zm0-1.395a5.598 5.598 0 01-4.013-1.654 5.735 5.735 0 01-1.21-1.804 5.567 5.567 0 01-.437-2.209c0-.783.146-1.517.438-2.2a5.715 5.715 0 011.21-1.812 5.6 5.6 0 011.797-1.217 5.599 5.599 0 012.208-.438c.789 0 1.525.146 2.208.438a5.66 5.66 0 013.029 3.028 5.55 5.55 0 01.437 2.201c0 .789-.146 1.525-.437 2.209a5.68 5.68 0 01-1.217 1.804 5.68 5.68 0 01-1.805 1.217 5.567 5.567 0 01-2.208.437zM8 11.51a.597.597 0 00.43-.164.584.584 0 00.172-.431V7.688L8.547 6.28l.622.78.759.793a.53.53 0 00.417.177c.16 0 .291-.052.396-.157a.518.518 0 00.164-.39.595.595 0 00-.164-.417L8.485 4.783A.664.664 0 008 4.558c-.173 0-.333.075-.479.225L5.26 7.066a.593.593 0 00-.157.417.538.538 0 00.554.547.557.557 0 00.416-.177l.766-.8.615-.766-.055 1.401v3.227c0 .173.057.317.171.43.114.11.258.165.431.165z"})})},596359:(e,t,o)=>{o.d(t,{Uk:()=>u,gc:()=>p,r$:()=>f});o(944114),o(898992),o(354520),o(672577),o(430670),o(581454);var r=()=>o(970013),i=()=>o(183558),n=()=>o(831566),l=()=>o(519839),a=()=>o(972435),s=()=>o(630116),d=()=>o(901389),c=()=>o(751156);function u(e){const{modification:t,property:o,propertySchema:l,options:u,groupIndex:p,environment:f,collectionStore:g,isCollectionsStatusMissingOptionsFixEnabled:h}=e;let y,v;if("keyedObjectListRemove"===t.type)y={pointer:g.pointer,command:"keyedObjectListRemove",path:["schema",o,"options"],args:{remove:{id:t.id}}},void 0!==p&&"status"===l.type&&(v={pointer:g.pointer,command:"listRemove",path:["schema",o,"groups",p,"optionIds"],args:{id:t.id}});else{if(u){if(u.find((e=>e.value.toLowerCase()===t.newValue.toLowerCase())))return void d().f1(a().A.formatMessage(m.optionAlreadyExists))}if("keyedObjectListUpdate"===t.type)y={pointer:g.pointer,command:"keyedObjectListUpdate",path:["schema",o,"options"],args:{value:{...t.option,value:t.newValue}}};else{const e=l.options||[];let n=(0,r().Zd)(e);if("status"===l.type&&void 0!==p){var b;const e=null===(b=l.groups)||void 0===b||null===(b=b[p])||void 0===b?void 0:b.color;e&&(n=e)}const a={id:(0,i().Ay)(),value:t.newValue,color:n};if("autoSortInsert"===t.type){if(!(0,r().lx)(l))return;y=(0,r().og)({collectionId:g.id,property:o,propertySchema:l,newOption:a,isAscending:"alphabetical"===l.auto_sort_options})}else"keyedObjectListBefore"===t.type?(y={pointer:g.pointer,command:"keyedObjectListBefore",path:["schema",o,"options"],args:{value:a,before:t.beforeOption}},void 0!==p&&"status"===l.type&&(v={pointer:g.pointer,command:"listBefore",path:["schema",o,"groups",p,"optionIds"],args:{id:a.id}})):"keyedObjectListAfter"===t.type&&(y={pointer:g.pointer,command:"keyedObjectListAfter",path:["schema",o,"options"],args:{value:a,after:t.afterOption}},void 0!==p&&"status"===l.type&&(v={pointer:g.pointer,command:"listBefore",path:["schema",o,"groups",p,"optionIds"],args:{id:a.id}}))}}(0,n().p)({environment:f,collectionStore:g,performTransaction:e=>{if(c().applyOperation({store:g,operation:y,transaction:e}),v&&c().applyOperation({store:(0,s().Oo)(g,v.pointer),operation:v,transaction:e}),"status"===l.type&&h){const t=l.options??[],r=(l.groups??[]).flatMap((e=>e.optionIds)),i=t.filter((e=>!r.includes(e.id)));for(const n of i)c().applyOperation({store:(0,s().Oo)(g,g.pointer),operation:{pointer:g.pointer,command:"listBefore",path:["schema",o,"groups",0,"optionIds"],args:{id:n.id}},transaction:e})}}})}function p(e){const{newValues:t,property:o,schema:i,collectionStore:a,environment:d,isCollectionsStatusMissingOptionsFixEnabled:u}=e,p=i[o];let m;if("status"===(null==p?void 0:p.type)){m=[[]];for(const e of t)e.startsWith("group-header-")?m.push([]):m[m.length-1].push(e);if(u){const e=((null==p?void 0:p.options)??[]).filter((e=>!t.includes(e.value)));m[0].push(...e.map((e=>e.value)))}}else m=t;const f=(0,l().os)({newOptions:m,collectionId:a.id,property:o,schema:i});if(f){if(p&&(0,r().lx)(p)){"manual"!==(p.auto_sort_options||"manual")&&f.push({pointer:a.pointer,command:"update",path:["schema",o],args:{auto_sort_options:"manual"}})}(0,n().p)({environment:d,collectionStore:a,performTransaction:e=>{for(const t of f)c().applyOperation({store:(0,s().Oo)(a,t.pointer),operation:t,transaction:e})}})}}const m=(0,o(959013).YK)({deleteModalPrompt:{id:"database.selectPropertyOptionEditMenu.deleteModal.prompt",defaultMessage:"Are you sure you want to delete this option?"},acceptButtonLabel:{id:"database.selectPropertyOptionEditMenu.deleteModal.confirmButton",defaultMessage:"Delete"},preventDefaultStatusOptionDelete:{defaultMessage:"Cannot delete default option.",id:"database.editProperty.errorDialog.forbidDeleteDefaultOption.message"},optionAlreadyExists:{defaultMessage:"Option already exists.",id:"database.optionExistsAlreadyError.message"}});function f(e){const{option:t,propertySchema:o,property:i,collectionStore:n,statusGroup:l,environment:s,deleteMessage:c}=e;"status"!==o.type||t.value!==o.defaultOption?d().ui({showCancel:!0,keepFocus:!1,message:c??a().A.formatMessage(m.deleteModalPrompt),items:[{label:a().A.formatMessage(m.acceptButtonLabel),color:"red",onAccept:()=>{if((0,r().lx)(o)||"status"===o.type)if("status"===o.type&&l){const e=(o.groups??[]).findIndex((e=>e.id===l.id));u({modification:{type:"keyedObjectListRemove",id:t.id},property:i,propertySchema:o,environment:s,collectionStore:n,groupIndex:e})}else u({modification:{type:"keyedObjectListRemove",id:t.id},property:i,propertySchema:o,environment:s,collectionStore:n})}}]}):d().f1(a().A.formatMessage(m.preventDefaultStatusOptionDelete))}},625634:(e,t,o)=>{o.d(t,{_:()=>i,z:()=>n});var r=()=>o(340498);const i={small:"md",default:"lg",large:"xl"},n={small:r().Ev.xs,default:r().Ev.sm,large:r().Ev.sm}},630960:(e,t,o)=>{o.d(t,{Jz:()=>s,in:()=>a,yh:()=>l});o(898992),o(354520),o(581454);var r=()=>o(56366),i=()=>o(31503),n=()=>o(534177);const l=(0,o(959013).YK)({unsupportedPublicQuestionType:{defaultMessage:"This question type cannot be used in public forms.",id:"useNewQuestionPropertyMenuItems.invalidPublicQuestionType"},relatedCollectionNotPublic:{defaultMessage:"Only relations to public databases are supported in public forms.",id:"formEditorQuestion.relatedCollectionNotPublic"},editorPlaceholder:{defaultMessage:"Respondent's answer",id:"formEditorQuestion.editorPlaceholder"},viewerEmptyPlaceholder:{defaultMessage:"Your answer",id:"formEditorQuestion.viewerEmptyPlaceholder"},viewerEmptyPlaceholderSelect:{defaultMessage:"Your selection",id:"formEditorQuestion.viewerEmptyPlaceholderSelect"},editorDropdownPlaceholderSelect:{defaultMessage:"Options below will appear in the dropdown",id:"formEditorQuestion.editorDropdownPlaceholder"}});function a(e){let{layoutStore:t,collectionStore:o}=e;const l=(0,r().K8)((()=>o?t.getNormalizedFormQuestionStoresForFormLayout({collectionSchema:o.getSchema()})??[]:[]),[t,o]),a=(0,r().K8)((()=>l.map((e=>{var t;return null===(t=e.getConfig())||void 0===t?void 0:t.propertyId})).filter(n().O9)),[l]);return(0,r().K8)((()=>{if(!o)return[];const e=o.getSchema();if(!t.getModel())return[];return(0,n().WP)(e).map((e=>{let[t,o]=e;if(o&&(0,i().Sg)(o)&&!a.includes(t))return t})).filter(n().O9)}),[o,t,a])}const s=[{key:"unlimited",title:"Unlimited",type:"button"},{key:"1",title:"1",type:"button"},{key:"2",title:"2",type:"button"},{key:"3",title:"3",type:"button"},{key:"4",title:"4",type:"button"},{key:"5",title:"5",type:"button"},{key:"10",title:"10",type:"button"}]},736767:(e,t,o)=>{o.d(t,{A:()=>l});var r=o(296540),i=o(474848);function n(e,t){return(0,i.jsx)(o(678553).Ay,{...e,ref:t,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}const l=(0,r.forwardRef)(n)},754199:(e,t,o)=>{function r(e){return/^(\+\d{1,2}[\s.-])?\(?\d{3}\)?[\s.-]\d{3}[\s.-]\d{4}$/.test(e)}function i(e){return/^[0-9 .()\-\+]{7,}$/.test(e)}o.d(t,{W:()=>r,e:()=>i})},802975:(e,t,o)=>{o.d(t,{B:()=>m});o(16280),o(898992),o(354520);var r=()=>o(792071),i=()=>o(37165),n=()=>o(235191),l=()=>o(686526),a=()=>o(751156),s=()=>o(2220),d=()=>o(640868),c=()=>o(630116),u=()=>o(465741),p=()=>o(98205);function m(e){let{environment:t,module:o,sessionId:r,layoutStore:i,collectionSettingsStore:n,isCollectionEmpty:a,collectionContextStore:s,area:d,transaction:c,updateParentModule:u}=e;const m=s.collectionStore();if(!m)throw new Error("Could not find collection store");const g=i.getModules().form_conditional_modules??{},h=(0,p().Yg)({currentModule:o,nestedModules:g,includePlaceholders:!0}).formQuestionDescendants.filter((e=>e.id!==o.id)),y=s.normalizedSchemaStore.state;for(const l of h)f({environment:t,module:l,sessionId:r,layoutStore:i,isCollectionEmpty:a,collectionContextStore:s,collectionStore:m,area:"form_conditional_modules",transaction:c,schema:y,updateParentModule:!1});f({environment:t,module:o,sessionId:r,layoutStore:i,isCollectionEmpty:a,collectionContextStore:s,collectionStore:m,area:d,transaction:c,schema:y,updateParentModule:u}),l().os({collectionSettingsStore:n})}function f(e){let t,{environment:o,module:l,sessionId:p,layoutStore:m,isCollectionEmpty:f,collectionContextStore:g,collectionStore:h,area:y,transaction:v,updateParentModule:b,schema:S}=e;if("formQuestion"===l.type){var x;if(t=c().c7.createChildStore(m,{table:i().lo,id:l.formQuestionId,spaceId:m.getSpaceId()??""}).getPropertyId(),!t)return;const e=null===(x=S[t])||void 0===x?void 0:x.type;f&&e&&"title"!==e&&n().BJ({environment:o,collectionStore:h,schema:S,property:t,transaction:v}),(0,s().u)({environment:o,event:{eventName:"delete_form_question",eventProperties:(0,u().YA)({collectionContextStore:g,propertyId:t,questionId:l.id,parentModuleId:b?l.parentModuleId:void 0,area:y,layoutStore:m})}})}b?(0,d().U)({environment:o,position:{area:y,moduleId:l.id},layoutStore:m,sessionId:p,transaction:v}):a().applyOperation({transaction:v,store:m,operation:r().N4X.deleteModuleInArea({pointer:m.pointer,area:y,moduleId:l.id})})}},803025:(e,t,o)=>{o.d(t,{q:()=>d});var r=()=>o(484714),i=()=>o(187174),n=()=>o(58293),l=()=>o(128265),a=()=>o(324561),s=()=>o(18530);function d(){const e=(0,n().r)(),t=(0,a().f_)({spaceId:null==e?void 0:e.id}),o=(0,r().v3)(),[{value:d}]=(0,i().Yb)((async()=>{const r=await(0,l().G)(o);return(0,s().V)({spaceStore:e,billingData:t,isMmOrEnterprise:r})}),[e,t,o]);return d??"self_serve"}},824146:(e,t,o)=>{o.d(t,{_:()=>i});var r=o(296540);function i(){const e=(0,r.useRef)(null),[t,o]=(0,r.useState)(!1),[i,n]=(0,r.useState)(!1),l=(0,r.useCallback)((()=>{const t=e.current;t&&n(t.matches(":active"))}),[]),a=(0,r.useCallback)((t=>{e.current=t,l(),o(!0)}),[l]);return(0,r.useEffect)((()=>{const o=e.current;if(o&&t)return o.addEventListener("mousedown",l),o.addEventListener("mouseup",l),()=>{o.removeEventListener("mousedown",l),o.removeEventListener("mouseup",l)}}),[l,t]),[a,i,e]}},831566:(e,t,o)=>{o.d(t,{p:()=>n});var r=()=>o(751156),i=()=>o(724456);function n(e){const{environment:t,collectionStore:o,performTransaction:n}=e;return r().createAndCommit({userAction:"collectionViewActions.createSchemaUpdateTransaction",environment:t,canUndo:!0,perform:e=>{const r=o.getSchema(),l=n(e),a=o.getSchema();return(0,i().H)({environment:t,collectionStore:o,oldSchema:r,newSchema:a,transaction:e}),l}}).performResult}},832857:(e,t,o)=>{o.d(t,{FG:()=>y,Is:()=>h,Ix:()=>v,jD:()=>b,lF:()=>g});o(944114),o(898992),o(354520),o(672577),o(581454);var r=()=>o(289915),i=()=>o(792071),n=()=>o(500993),l=()=>o(183558),a=()=>o(534177),s=()=>o(751156),d=()=>o(909470),c=()=>o(978846),u=()=>o(640868),p=()=>o(33218),m=()=>o(217429),f=()=>o(802975);function g(e){const{environment:t,layoutStore:o,currentQuestionModule:r,area:i,property:n,filterValue:a,setModuleSelection:d,sessionId:u}=e;s().createAndCommit({userAction:"FormSelectProperty.handleAddConditionalLogic",environment:t,canUndo:!0,perform:e=>{if(!o.getModel())return;const s=(0,l().Ay)(),m=(0,l().Ay)(),f=function(e){var t,o;switch(e.type){case"select":return{operator:"enum_is",value:{type:"exact",value:null===(t=e.value)||void 0===t?void 0:t.value}};case"multi_select":return{operator:"enum_contains",value:{type:"exact",value:null===(o=e.value)||void 0===o?void 0:o.value}};case"checkbox":return{operator:"checkbox_is",value:{type:"exact",value:e.value}}}}(a);(0,p().UQ)({environment:t,transaction:e,layoutStore:o,position:{area:i,moduleId:r.id},updatedModule:{...r,conditionalGroups:[...r.conditionalGroups??[],{id:s,trigger:{property:n,filter:f},children:[]}]}});const g={id:m,type:"placeholder",parentModuleId:r.id,parentConditionalGroupId:s};(0,c().UQ)({environment:t,transaction:e,layoutStore:o,position:{type:"absolute",area:"form_conditional_modules",parentConditionalGroupId:s,parentModuleId:r.id},module:g,sessionId:u,isPropertyCreation:!1}),d&&d({type:"existing_module",moduleId:m,isDragging:!1})}})}function h(e){var t;const{environment:o,layoutStore:r,module:i,conditionalGroupId:l,newValue:a}=e,d=(0,n().A)(i.id,r.getModules()),c={...i,conditionalGroups:null===(t=i.conditionalGroups)||void 0===t?void 0:t.map((e=>e.id===l?{...e,trigger:{...e.trigger,filter:a}}:e))};s().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.updateTriggerFilter",environment:o,canUndo:!0,perform:e=>{(0,p().UQ)({environment:o,transaction:e,layoutStore:r,position:{area:d.area,moduleId:i.id},updatedModule:c})}})}function y(e){const{environment:t,parentModule:o,groupId:r,layoutStore:n,collectionContextStore:l,isCollectionEmpty:a,sessionId:d}=e,c=n.getModules().form_conditional_modules??{};s().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.deleteConditionalGroup",environment:t,canUndo:!0,perform:e=>{var u,m;const g=null==n?void 0:n.getModel();if(!n||!g)return;const h=null===(u=o.conditionalGroups)||void 0===u?void 0:u.filter((e=>e.id!==r)),y=null===(m=o.conditionalGroups)||void 0===m?void 0:m.find((e=>e.id===r));if(void 0!==y){for(const o of y.children??[]){const r=c[o];r&&("placeholder"!==r.type?(0,f().B)({environment:t,module:r,sessionId:d,transaction:e,layoutStore:n,collectionContextStore:l,collectionSettingsStore:l.settingsStore,isCollectionEmpty:a,area:"form_conditional_modules",updateParentModule:!1}):s().applyOperation({transaction:e,store:n,operation:i().N4X.deleteModuleInArea({pointer:n.pointer,area:"form_conditional_modules",moduleId:o})}))}(0,p().UQ)({environment:t,transaction:e,layoutStore:n,position:{area:Object.keys(c).includes(o.id)?"form_conditional_modules":"form_layout_schema",moduleId:o.id},updatedModule:{...o,conditionalGroups:h}})}}})}function v(e){const{environment:t,layoutStore:o,formQuestionModule:r,sessionId:i}=e;s().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.deleteConditionalGroup",environment:t,canUndo:!0,perform:e=>{(0,u().U)({environment:t,transaction:e,layoutStore:o,position:{area:"form_conditional_modules",moduleId:r.id}}),(0,c().UQ)({environment:t,transaction:e,layoutStore:o,position:{area:"form_layout_schema",type:"area_relative",location:"end_moveable"},module:{...r,parentModuleId:void 0,parentConditionalGroupId:void 0},sessionId:i,isPropertyCreation:!1})}})}function b(e){const{questionModulesToVisit:t,draftSubmissionPageStore:o,collectionSchema:i,nestedQuestionModules:n,intl:l}=e,s=[],c=o.getModel();if(!c)return[];for(const p of t){s.push(p);const e=p.conditionalGroups;if(e)for(const t of e){var u;const e=t.trigger;if(!(0,r().ts)({filter:e.filter,property:e.property,propertyMapping:void 0,context:{schema:i,userId:void 0,userTimeZone:"",userStartOfWeek:0,relativeVariableResult:void 0,currentPageInRelatedCollection:void 0,intl:l,collectionFeatureGates:(0,d().i)()},depth:0})({block:c,getRecordModel:o.getRecordModel,propertyMapping:void 0,resultCache:new Map,regExpCache:new Map,formatDateCache:new Map,experimentService:m().default,formulasModule:void 0}))continue;const p=null===(u=t.children)||void 0===u?void 0:u.map((e=>{const t=n[e];if(t&&"formQuestion"===t.type)return t})).filter(a().O9);if(!p||0===p.length)continue;const f=b({questionModulesToVisit:p,draftSubmissionPageStore:o,collectionSchema:i,nestedQuestionModules:n,intl:l});s.push(...f)}}return s}},882827:(e,t,o)=>{o.d(t,{p:()=>l});o(296540);var r=()=>o(783982),i=()=>o(340498),n=o(474848);function l(e,t){const{viewBox:o,svg:l}=t,a=o??`0 0 ${i().Ev.default} ${i().Ev.default}`;return Object.assign((t=>{let{style:o,className:i,label:s,animationState:d}=t;const c=i?`${e} ${i}`:e;return(0,n.jsx)(r().A,{viewBox:a,className:c,style:o,label:s,children:l(d)})}),{__iconDefinition:{viewBox:a,svg:l("initial")}})}},920370:(e,t,o)=>{o.d(t,{L:()=>r});const r=new(o(391685).n)((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{const r=await Promise.resolve().then(o.bind(o,449506)),i=await r.callApi({eventName:"getAllUpgradeRequestsForSpace",environment:e,data:t}),n=[{key:(0,o(921997).VI)(t),version:-1}];return"success"===i.type?{value:i.data.requests,dependencies:i.data.dependencies??n}:void 0}))},937199:(e,t,o)=>{o.d(t,{LH:()=>n,Op:()=>i,bi:()=>s,sf:()=>a,v$:()=>l});o(16280);var r=o(296540);const i=(0,r.createContext)(null);function n(){const e=(0,r.useContext)(i);if(!e)throw new Error("usePageLayoutEditorContext must be used inside BaseLayoutEditorContext.Provider");return e}function l(){return(0,r.useContext)(i)}i.displayName="BaseLayoutEditorContext";const a=(0,r.createContext)(null);function s(){const e=(0,r.useContext)(a);if(!e)throw new Error("usePageLayoutEditorContext must be used inside PageLayoutEditorContextProvider");return e}a.displayName="PageLayoutEditorContext"},964492:(e,t,o)=>{o.d(t,{e:()=>c});var r=o(296540),i=()=>o(132855),n=()=>o(59442),l=o(474848);const a={viewBox:"2.37 2.37 15.25 15.26",svg:e=>{const t=(0,o(206267).JW)(),r="all 0.548s linear(\n    \t\t\t\t\t\t0, 0.006, 0.022 2%, 0.091 4.3%, 0.52 14%, 0.624, 0.71 19.3%, 0.784,\n    \t\t\t\t\t\t0.846 24.9%, 0.895 27.9%, 0.934, 0.961 34.4%, 0.98 37.9%, 0.993 42%,\n    \t\t\t\t\t\t1.001 46.8%, 1.004 55.3%, 1\n  \t\t\t\t\t\t)",i={transformOrigin:"bottom center",transition:r},n={translate:"0 -14px",scale:"70%",opacity:0},a={translate:"0 10px",scale:"70%",opacity:0,transformOrigin:"top center",transition:r},s={translate:"0 0",scale:"100%",opacity:1};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("defs",{children:(0,l.jsx)("clipPath",{id:t,children:(0,l.jsx)("rect",{x:"2.5",y:"2.5",width:"15",height:"15",rx:"7.5"})})}),(0,l.jsx)("rect",{x:"2.5",y:"2.5",width:"15",height:"15",rx:"7.5"}),(0,l.jsx)("g",{clipPath:`url(#${t})`,children:(0,l.jsx)("path",{style:{...i,..."animate"===e?n:{}},d:"M13.0419 9.55439C12.7978 9.79847 12.4021 9.79847 12.158 9.55439L10.625 8.02136L10.625 13.4874C10.625 13.8326 10.3452 14.1124 10 14.1124C9.65482 14.1124 9.375 13.8326 9.375 13.4874L9.375 8.02131L7.84192 9.5544C7.59784 9.79847 7.20211 9.79847 6.95804 9.5544C6.71396 9.31032 6.71396 8.91459 6.95803 8.67051L9.55803 6.07051C9.67524 5.9533 9.83421 5.88745 9.99997 5.88745C10.1657 5.88745 10.3247 5.9533 10.4419 6.07051L13.0419 8.67051C13.286 8.91459 13.286 9.31032 13.0419 9.55439Z",fill:"white"})}),(0,l.jsx)("g",{clipPath:`url(#${t})`,children:(0,l.jsx)("path",{style:{...a,..."animate"===e?s:{}},d:"M13.0419 9.55439C12.7978 9.79847 12.4021 9.79847 12.158 9.55439L10.625 8.02136L10.625 13.4874C10.625 13.8326 10.3452 14.1124 10 14.1124C9.65482 14.1124 9.375 13.8326 9.375 13.4874L9.375 8.02131L7.84192 9.5544C7.59784 9.79847 7.20211 9.79847 6.95804 9.5544C6.71396 9.31032 6.71396 8.91459 6.95803 8.67051L9.55803 6.07051C9.67524 5.9533 9.83421 5.88745 9.99997 5.88745C10.1657 5.88745 10.3247 5.9533 10.4419 6.07051L13.0419 8.67051C13.286 8.91459 13.286 9.31032 13.0419 9.55439Z",fill:"white"})})]})}},s=(0,o(882827).p)("arrowInCircleUpAnimated",a);const d={eligible_for_upgrade:{icon:{type:"animated",iconFn:s},iconColor:"uiBluePrimary",highlightColor:"uiBluePrimary",label:{button:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.outlineButton",defaultMessage:"Upgrade now"})},text:e=>{let{intl:t,productDisplayName:o,renderTextHighlight:r}=e;return t.formatMessage({id:"upgrade.text",defaultMessage:"<highlight>Upgrade</highlight> {hasProductDisplayName, select, true {to {productName}} other {for access}}"},{highlight:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return r?r(t):t},hasProductDisplayName:Boolean(o),productName:o})},icon:e=>{let{intl:t,productDisplayName:o}=e;return t.formatMessage({id:"upgrade.iconTooltip",defaultMessage:"Upgrade {hasProductDisplayName, select, true {to {productName}} other {}} for access"},{hasProductDisplayName:Boolean(o),productName:o})}}},eligible_for_trial:{icon:{type:"animated",iconFn:o(201361).P},iconColor:"orangePrimary",highlightColor:"orangeSecondary",label:{button:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.trial.button",defaultMessage:"Try for free"})},text:e=>{let{intl:t,renderTextHighlight:o}=e;return t.formatMessage({id:"upgrade.trial.text",defaultMessage:"<highlight>Try</highlight> for free"},{highlight:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o?o(t):t}})},icon:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.trial.iconTooltip",defaultMessage:"Try for free"})}}},sales_eligible:{icon:{type:"static",iconFn:n().paperPlaneFillIcon},iconColor:"secondary",highlightColor:"secondary",label:{button:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.sales.button",defaultMessage:"Contact sales"})},text:e=>{let{intl:t,renderTextHighlight:o}=e;return t.formatMessage({id:"upgrade.sales.text",defaultMessage:"<highlight>Contact sales</highlight> to learn more"},{highlight:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o?o(t):t}})},icon:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.sales.iconTooltip",defaultMessage:"Contact sales to learn more"})}}},sales_assisted:{icon:{type:"static",iconFn:n().paperPlaneFillIcon},iconColor:"secondary",highlightColor:"secondary",label:{button:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.sales.button",defaultMessage:"Contact sales"})},text:e=>{let{intl:t,renderTextHighlight:o}=e;return t.formatMessage({id:"upgrade.sales.text",defaultMessage:"<highlight>Contact sales</highlight> to learn more"},{highlight:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o?o(t):t}})},icon:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.sales.iconTooltip",defaultMessage:"Contact sales to learn more"})}}},eligible_to_request:{icon:{type:"animated",iconFn:s},iconColor:"uiBluePrimary",highlightColor:"uiBluePrimary",label:{button:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.request.button",defaultMessage:"Request"})},text:e=>{let{intl:t,productDisplayName:o,renderTextHighlight:r}=e;return t.formatMessage({id:"upgrade.request.text",defaultMessage:"<highlight>Request</highlight> {hasProductDisplayName, select, true {access to {productName}} other {access}}"},{highlight:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return r?r(t):t},hasProductDisplayName:Boolean(o),productName:o})},icon:e=>{let{intl:t,productDisplayName:o}=e;return t.formatMessage({id:"upgrade.request.iconTooltip",defaultMessage:"Request {hasProductDisplayName, select, true {access to {productName}} other {access}}"},{hasProductDisplayName:Boolean(o),productName:o})}}},not_eligible:{icon:{type:"static",iconFn:i().arrowInCircleUpFillIcon},iconColor:"grayPrimary",highlightColor:"grayPrimary",label:{button:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.outlineButton",defaultMessage:"Upgrade now"})},text:e=>{let{intl:t,productDisplayName:o,renderTextHighlight:r}=e;return t.formatMessage({id:"upgrade.text",defaultMessage:"<highlight>Upgrade</highlight> {hasProductDisplayName, select, true {to {productName}} other {for access}}"},{highlight:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return r?r(t):t},hasProductDisplayName:Boolean(o),productName:o})},icon:e=>{let{intl:t,productDisplayName:o}=e;return t.formatMessage({id:"upgrade.iconTooltip",defaultMessage:"Upgrade {hasProductDisplayName, select, true {to {productName}} other {}} for access"},{hasProductDisplayName:Boolean(o),productName:o})}},disabledTooltip:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.not.eligible.disabledTooltip",defaultMessage:"You're not eligible to upgrade"})}},request_pending:{icon:{type:"static",iconFn:i().arrowInCircleUpFillIcon},iconColor:"grayPrimary",highlightColor:"grayPrimary",label:{button:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.requestPending.button",defaultMessage:"Pending"})},text:e=>{let{intl:t,productDisplayName:o,renderTextHighlight:r}=e;return t.formatMessage({id:"upgrade.requestPending.text",defaultMessage:"<highlight>Requested</highlight>{space}{hasProductDisplayName, select, true {access to {productName}} other {access}}{space}is{space}<highlight>pending</highlight>"},{highlight:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return r?r(t):t},space:(0,l.jsx)(l.Fragment,{children:" "}),hasProductDisplayName:Boolean(o),productName:o})},icon:e=>{let{intl:t,productDisplayName:o}=e;return t.formatMessage({id:"upgrade.requestPending.iconTooltip",defaultMessage:"Requested {hasProductDisplayName, select, true {access to {productName}} other {access}} is pending"},{hasProductDisplayName:Boolean(o),productName:o})}},disabledTooltip:e=>{let{intl:t,productDisplayName:o}=e;return t.formatMessage({id:"upgrade.requestPending.disabledTooltip",defaultMessage:"Requested {hasProductDisplayName, select, true {access to {productName}} other {access}} is pending"},{hasProductDisplayName:Boolean(o),productName:o})}}};function c(e){return r.useMemo((()=>d[e]),[e])}},978846:(e,t,o)=>{o.d(t,{E:()=>y,UQ:()=>v});o(16280),o(18107),o(944114),o(967357);var r=()=>o(31503),i=()=>o(792071),n=()=>o(688728),l=()=>o(500993),a=()=>o(369186),s=()=>o(475140),d=()=>o(120997),c=()=>o(251822),u=()=>o(778781),p=()=>o(496603),m=()=>o(534177),f=()=>o(751156),g=()=>o(447934),h=()=>o(204521);function y(e){const{moduleId:t,layoutStore:o,sessionId:i,environment:l,position:a}=e,s=o.getModuleById(t);if(!s)throw new Error(`Cannot move module with id ${t} because a module with that id is not in the layout`);const d=(0,h().TR)({modulesByArea:o.getModules(),moduleId:t,newPosition:a});b({...e,module:s,userAction:"BuilderLayoutModules.moveModuleToPosition",afterUpsertTransaction:()=>{var e;const t=(0,r().Cg)({moduleId:s.id,modulesByArea:o.getModules()}).length;(0,h().Ib)({environment:l,sessionId:i,collectionId:null===(e=o.getCollectionModel())||void 0===e?void 0:e.id,layoutId:o.id,context:(0,n().We)(a.area),action:d,moduleType:s.type,area:a.area,depth:t})}})}function v(e){const{position:t,module:o,layoutStore:i,sessionId:l,environment:a}=e;if(i.getModuleById(o.id))throw new Error(`Cannot add module with id ${o.id} because a module with that id is already in the layout`);b({...e,userAction:"BuilderLayoutModules.addModuleAtPosition",performBeforeApplyUpsertOperations:e=>{const{transaction:r}=e;"page_main"!==t.area&&"page_details"!==t.area||(0,u().gx)(o)&&(0,g().HD)({environment:a,transaction:r,layoutStore:i,property:o.propertyId})},afterUpsertTransaction:()=>{var s;const d=(0,r().Cg)({moduleId:o.id,modulesByArea:i.getModules()}).length;(0,h().zb)({environment:a,module:o,sessionId:l,collectionId:null===(s=i.getCollectionModel())||void 0===s?void 0:s.id,layoutId:i.id,context:(0,n().We)(t.area),isPropertyCreation:e.isPropertyCreation,area:t.area,depth:d})}})}function b(e){const{environment:t,position:o,layoutStore:r,module:c,transaction:u,userAction:p,performBeforeApplyUpsertOperations:g,afterUpsertTransaction:h}=e,y=r.pointer,v=r.getModules(),b=r.getRawModules(),C=b&&(0,s().c7)(b,(e=>e.id===c.id))||(0,a().Lv)(c),M="page_main"===o.area||"page_details"===o.area?function(e){const{layoutPointer:t,modulesByArea:o,rawModulesByArea:r}=e,l=(0,s().EX)(o,(e=>"relationsGroup"===e.type));if("form_conditional_modules"===(null==l?void 0:l.position.area))return;const d=r&&(0,s().LC)(r,(e=>"relationsGroup"===e.type));if(!l)return;if(l&&d)return;const c=l.module;if(!c||"relationsGroup"!==c.type)throw new Error("relations group module location in normalized was incorrect, cannot backfill relations group module");return function(e){var t;const{module:o,modulesByArea:r,layoutPointer:l}=e,d=(0,s().JO)(r,(e=>e.id===o.id));if(!d)throw new Error("cannot upsert module at current position because module does not have a current position");if("form_conditional_modules"===d.area)throw new Error("[Forms Conditional Logic Not Implemented] form_conditional_modules area is not supported for adding and moving modules");const c="views_main_tab_modules"===d.area?null===(t=r.views_main_tab_modules)||void 0===t?void 0:t[d.viewId]:r[d.area];if(!c||0===c.length)throw new Error("cannot upsert module at current position in area because that area is empty");const u={module:(0,a().Lv)(o),pointer:l,..."views_main_tab_modules"===d.area?{area:n().Zm[d.area],viewId:d.viewId}:{area:n().Zm[d.area]}};if(0===d.index)return i().N4X.putModuleAfter({...u,afterId:void 0});const p=c.at(d.index+1);if(!p)return i().N4X.putModuleAfter({...u,afterId:void 0});return i().N4X.putModuleBefore({...u,beforeId:p.id})}({module:c,layoutPointer:t,modulesByArea:o})}({layoutPointer:y,modulesByArea:v,rawModulesByArea:b}):null;M&&f().createAndCommitOrAppend({environment:t,perform:e=>{f().applyOperation({transaction:e,store:r,operation:M})},canUndo:!0,transaction:u,userAction:`${p||"BuilderLayoutModules.upsert"}.preOpBackfill`});const I=[],_=function(e){const{layoutStore:t,module:o,upsertPosition:r}=e,l=t.getModules(),a=(0,s().JO)(l,(e=>o.id===e.id));if(!a)return;if("form_conditional_modules"===a.area)return i().N4X.deleteModuleInArea({pointer:t.pointer,area:a.area,moduleId:o.id});if("views_main_tab_modules"===a.area){const e="absolute"===r.type&&"views_main_tab_modules"===r.area?r.viewId:void 0,n=a.viewId;if(e===n)return;return i().N4X.deleteModuleInArea({pointer:t.pointer,area:a.area,moduleId:o.id,viewId:n})}if("page_main"===a.area||"page_details"===a.area||"form_layout_schema"===a.area||"person_profile_page_main"===a.area||"person_profile_page_details"===a.area){if(a.area===r.area)return;return i().N4X.deleteModuleInArea({pointer:t.pointer,area:n().Zm[a.area],moduleId:o.id})}(0,m().HB)(a.area)}({upsertPosition:o,module:c,layoutStore:r});_&&I.push(_);const A=function(e){const{upsertPosition:t,layoutPointer:o,modulesByArea:r,rawModuleToUpsert:a}=e;if("absolute"===t.type)return function(e){const{upsertPosition:t,rawModuleToUpsert:o,layoutPointer:r,modulesByArea:a}=e,c=(0,s().JO)(a,(e=>o.id===e.id)),{area:u}=t;if("form_conditional_modules"===u){const{parentConditionalGroupId:e,parentModuleId:n}=t;if(!(0,d().V)(o,"form_conditional_modules"))throw new Error("Can only add form question or placeholder modules to form_conditional_modules area.");const c=(0,s().Ib)({modulesByArea:a,find:e=>e.id===o.parentModuleId}),u=(0,l().A)(n,a);return i().N4X.upsertChildModule({pointer:r,module:o,previousParentModuleAndArea:c,newParentModule:{area:u.area,module:u.module,conditionalGroupId:e,index:t.index},modulesByArea:a})}const p=t.index;if(p<0)throw new Error(`Cannot upsert module with id ${o.id} to a negative position`);if("views_main_tab_modules"===u){const e=t.viewId;if(!a[u]||!a[u][e])throw new Error("Cannot upsert module into views_main_tab_modules area that does not have views");const l="views_main_tab_modules"===(null==c?void 0:c.area)&&(null==c?void 0:c.viewId)===e?c.index:void 0,s=S({modulesInArea:a[u][e],indexOfModuleToUpsertInArea:l,indexToUpsertTo:p});if(!s)return;return[i().N4X.putModuleBeforeOrAfter({pointer:r,area:n().Zm[u],viewId:e,module:o,direction:s.insertDirection,beforeOrAfterId:s.beforeOrAfterId})]}const m=a[u],f=(null==c?void 0:c.area)===u?c.index:void 0,g=S({modulesInArea:m,indexOfModuleToUpsertInArea:f,indexToUpsertTo:p});if(!g)return;return[i().N4X.putModuleBeforeOrAfter({pointer:r,area:n().Zm[u],module:o,direction:g.insertDirection,beforeOrAfterId:g.beforeOrAfterId})]}({upsertPosition:t,rawModuleToUpsert:a,layoutPointer:o,modulesByArea:r});if("module_relative"===t.type)return[x({upsertPosition:t,rawModuleToUpsert:a,layoutPointer:o,modulesByArea:r})];if("area_relative"===t.type)return[w({upsertPosition:t,rawModuleToUpsert:a,layoutPointer:o,modulesByArea:r})];(0,m().HB)(t)}({module:c,upsertPosition:o,modulesByArea:v,layoutPointer:y,rawModuleToUpsert:C});A&&I.push(...A);const P="placeholder"===c.type&&"form_layout_schema"===o.area?`form_layout_new_question_${c.id}`:void 0;f().createAndCommitOrAppend({environment:t,undoCheckpoint:P,canUndo:!0,perform:e=>{g&&g({transaction:e});for(const t of I)f().applyOperation({transaction:e,store:r,operation:t})},transaction:u,userAction:p||"BuilderLayoutModules.upsert"}),h&&h()}function S(e){const{modulesInArea:t,indexOfModuleToUpsertInArea:o,indexToUpsertTo:r}=e;if(0===r||0===t.length)return{insertDirection:"before",beforeOrAfterId:void 0};const i=t.at(r);return i?void 0===o?{insertDirection:"before",beforeOrAfterId:i.id}:o!==r?o<r?{insertDirection:"after",beforeOrAfterId:i.id}:{insertDirection:"before",beforeOrAfterId:i.id}:void 0:{insertDirection:"after",beforeOrAfterId:void 0}}function x(e){const{upsertPosition:t,rawModuleToUpsert:o,layoutPointer:r,modulesByArea:l}=e,{area:a,direction:d,relativeToModuleId:c}=t,u=n().Zm[a],p=(0,s().JO)(l,(e=>e.id===c));if(!p||p.area!==a)throw new Error(`Cannot find module with id: ${c} to add upsert relative to in ${a}`);if("views_main_tab_modules"===u){const e="views_main_tab_modules"===p.area?p.viewId:void 0;if(!e)throw new Error("Cannot upsert module into views_main_tab_modules area that does not have views");return i().N4X.putModuleBeforeOrAfter({pointer:r,area:"views_main_tab_modules",viewId:e,module:o,direction:"above"===d?"before":"after",beforeOrAfterId:c})}return i().N4X.putModuleBeforeOrAfter({pointer:r,area:u,module:o,direction:"above"===d?"before":"after",beforeOrAfterId:c})}function w(e){const{upsertPosition:t,rawModuleToUpsert:o,layoutPointer:r,modulesByArea:l}=e,{location:a}=t;if("views_main_tab_modules"===t.area){const e=t.viewId,d={pointer:r,area:n().Zm[t.area],viewId:e,module:o};if("start"===a||"end"===a)return i().N4X.putModuleBeforeOrAfter({...d,direction:"start"===a?"before":"after",beforeOrAfterId:void 0});if("end_moveable"===a){var s;const e=C({area:t.area,modulesInArea:(null===(s=l.views_main_tab_modules)||void 0===s?void 0:s[t.viewId])??[]});return i().N4X.putModuleBeforeOrAfter({...d,direction:e.insertDirection,beforeOrAfterId:e.beforeOrAfterId})}(0,m().HB)(a)}const d={pointer:r,area:n().Zm[t.area],module:o};if("start"===a||"end"===a)return i().N4X.putModuleBeforeOrAfter({...d,direction:"start"===a?"before":"after",beforeOrAfterId:void 0});if("end_moveable"===a){const e=l[t.area],o=C({area:t.area,modulesInArea:e});return i().N4X.putModuleBeforeOrAfter({...d,direction:o.insertDirection,beforeOrAfterId:o.beforeOrAfterId})}(0,m().HB)(a)}function C(e){const{area:t,modulesInArea:o}=e,{nonMoveableHeaderModules:r,moveableModules:i,nonMoveableFooterModules:n}=(0,c().jS)(t,o);if(i.length){const e=(0,p().HV)(i);if(!e)throw new Error("cannot find last moveable module to add below for end moveable");return{insertDirection:"after",beforeOrAfterId:e.id}}if(r.length){const e=(0,p().HV)(r);if(!e)throw new Error("cannot find last header module to add below for end moveable");return{insertDirection:"after",beforeOrAfterId:e.id}}if(n.length){const e=n.at(0);if(!e)throw new Error("cannot find last header module to add below for end moveable");return{insertDirection:"before",beforeOrAfterId:e.id}}return{insertDirection:"after",beforeOrAfterId:void 0}}}}]);