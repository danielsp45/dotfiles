"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[27711],{35394:(e,t,n)=>{n.d(t,{A:()=>a});class i extends(()=>n(757695))().Store{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super();const t={...this.getInitialState()};e.initialDateRange&&(t.temporaryDateRange=e.initialDateRange),e.shouldAlsoUpdateSearchStore&&(t.shouldAlsoUpdateSearchStore=e.shouldAlsoUpdateSearchStore),this.setState(t)}getInitialState(){return{isOpen:!1,focus:"starting",temporaryDateRange:{starting:void 0,ending:void 0},displayMonth:void 0,hovered:void 0,dateFilterType:"lastEditedTime",shouldAlsoUpdateSearchStore:!1}}getFocus(){return this.state.focus}clearTemporaryDateRange(){this.setState({...this.state,temporaryDateRange:{starting:void 0,ending:void 0}})}}const a=i},44935:(e,t,n)=>{n.d(t,{H:()=>m,i:()=>y});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454);var i=n(296540),a=n(440961),r=()=>n(507707),o=()=>n(624919),s=()=>n(56366),l=()=>n(496603),d=()=>n(745875),u=()=>n(397248),c=()=>n(545805),p=n(474848);const g=i.createContext(void 0);g.displayName="DynamicMenuContext";const v={Up:{x:0,y:-1},Down:{x:0,y:1},Left:{x:-1,y:0},Right:{x:1,y:0}},f=n(757695).Store.createValue(void 0);function y(e){const t=e.debug,n=(0,i.useRef)(void 0),a=(0,i.useRef)(new Set),o=(0,s().uB)(f),l=(0,i.useCallback)((()=>Array.from(a.current)),[]),d=(0,i.useCallback)((()=>l().map((e=>({entry:e,element:e.getDomElement()}))).filter((e=>{let{element:t}=e;return void 0!==t})).sort(((e,t)=>(0,r().A)(e.element,t.element))).map((e=>{let{entry:t}=e;return t}))),[l]),y=(0,i.useCallback)((e=>{a.current.add(e)}),[]),h=(0,i.useCallback)(((e,t)=>{e&&!a.current.has(e)||e!==o.state&&(e&&e.disabled||(o.setState(e),n.current=t))}),[o]),m=(0,i.useCallback)((e=>{const t=o.state,n=d(),i=t?n.indexOf(t):-1,a=e>0?n.length:-1;for(let r=i+e;e>0?r<a:r>a;r+=e){const e=n[r];if(e&&!e.disabled)return e}}),[o,d]),D=(0,i.useCallback)(((e,t)=>{const n=m(e);if(n)return null==t||t.preventDefault(),h(n,void 0),n}),[m,h]),S=(0,i.useCallback)(((e,i)=>{const a=o.state,r=n.current,s=l().filter((e=>!e.disabled));if(0===s.length)return;i&&i.preventDefault&&i.preventDefault();const d=a&&a.getRect();if(!d){const t=e.x*e.y>0?1:-1;return D(t,void 0)||D(1,void 0)}const c=s.map((e=>({entry:e,rect:e.getRect()}))).filter((e=>void 0!==e.rect&&e.entry!==a));let p;if(0===e.x&&void 0!==r&&r.left>d.left){const n=d.top-r.top,i=new(u().z8)(r.left,r.top+n,r.width,d.height);i.height=d.height,x("maxLeftRect",i,"orange",t),p=b(i,e,c,t),p&&x("found from maxLeft",p.rect,"yellow",t)}p||(p=b(d,e,c,t),p&&x("found from originRect",p.rect,"yellow",t));const g=0!==e.x||void 0===r;if(p){const e=p.rect;return h(p.entry,g?e:r),p.entry}g&&(n.current=d)}),[t,o,l,h,D]),M=(0,i.useCallback)((e=>{const t=o.state;if(a.current.delete(e),e===t){if(S({x:-1,y:-1},void 0))return;h(void 0,void 0)}}),[o,h,S]),A=(0,i.useCallback)((e=>{const t=o.state;t&&t.onAction(e,void 0)}),[o]),C=(0,i.useCallback)((()=>{var t;o.state?h(void 0,void 0):(t=e.onClose)&&t()}),[o,h,e.onClose]),R=(0,i.useCallback)((()=>{h(void 0,void 0)}),[h]),k=(0,i.useCallback)((e=>S(v.Up,e)),[S]),w=(0,i.useCallback)((e=>S(v.Right,e)),[S]),j=(0,i.useCallback)((e=>S(v.Down,e)),[S]),T=(0,i.useCallback)((e=>S(v.Left,e)),[S]),E=(0,i.useCallback)((e=>D(1,e)),[D]),I=(0,i.useCallback)((e=>D(-1,e)),[D]),P=(0,i.useMemo)((()=>({registerEntry:y,unregisterEntry:M,onFocusEvent:h,focusedEntryStore:o})),[y,M,h,o]);return(0,p.jsx)(c().A,{debugName:"DynamicMenu",capture:!e.disableKeyboard,onUp:k,onDown:j,onLeft:T,onRight:w,onEnter:A,onCommandEnter:A,onEsc:C,onTab:E,onUntab:I,children:(0,p.jsx)("div",{onMouseLeave:R,children:(0,p.jsx)(g.Provider,{value:P,children:e.children})})})}function h(e){const{action:t,render:n,dynamicMenuContext:r}=e,o=(0,i.useRef)(null);(0,i.useEffect)((()=>{const t=e.dynamicMenuContext,n=y.current;if(t)return t.registerEntry(n),()=>{t.unregisterEntry(n)}}),[]);const l=(0,i.useCallback)((e=>{r&&r.onFocusEvent(y.current,e)}),[r]),d=(0,i.useCallback)((e=>{t(e,r)}),[t,r]),u=(0,i.useCallback)((e=>{if(!e)return void(o.current=null);if(e instanceof Element)return void(o.current=e);const t=a.findDOMNode(e);t instanceof Element?o.current=t:o.current=null}),[]),c=(0,i.useCallback)((()=>o.current||void 0),[]),g=(0,i.useCallback)((()=>{if(o.current)return o.current.getBoundingClientRect()}),[]),v=Boolean(e.disabled),f=(0,i.useCallback)((e=>{t(e,r)}),[t,r]),y=(0,i.useRef)({getDomElement:c,getRect:g,disabled:v,onAction:f}),h=(0,s().K8)((()=>!!r&&r.focusedEntryStore.state===y.current),[r]);return(0,p.jsx)(p.Fragment,{children:n({onMouseEnter:l,onClick:d,ref:u,focused:h,disabled:v},e.dynamicMenuContext)})}function m(e){const t=(0,i.useContext)(g);return(0,p.jsx)(h,{...e,dynamicMenuContext:t})}function b(e,t,n,i){const a=(0,u().GL)(e),r=[a.top,a.left];let o=(0,u().fT)(e,-5);t.x>0&&(o=new(u().z8)(a.left,o.top,1/0,o.height)),t.x<0&&(o=new(u().z8)(0,o.top,a.right,o.height)),t.y>0&&(o=new(u().z8)(o.left,a.top,o.width,1/0)),t.y<0&&(o=new(u().z8)(o.left,0,o.width,a.bottom)),i&&x("search space",o,"magenta");const s=n.filter((e=>(0,u().HY)(o,e.rect))),c=l().Ul(s.map((e=>{const t=(0,u().GL)(e.rect);return{entry:e,distance:d().Io(r,[t.top,t.left])}})),(e=>e.distance))[0];if(c)return c.entry}function x(e,t){(arguments.length>3?arguments[3]:void 0)&&async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"magenta";await(0,o().Iz)(t,e,n)}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"magenta")}},117586:(e,t,n)=>{n.d(t,{Ay:()=>o,dz:()=>a,xQ:()=>i});let i=function(e){return e.StartDate="startDate",e.StartTime="startTime",e.EndDate="endDate",e.EndTime="endTime",e}({}),a=function(e){return e.InvalidDate="Invalid date",e.InvalidTime="Invalid time",e.InvalidRange="Invalid range",e}({});class r extends(()=>n(757695))().Store{getInitialState(){return{focus:i.StartDate,inputIsFocused:!1,inputTemporaryValue:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0},error:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0}}}}const o=r},141025:(e,t,n)=>{n.d(t,{Ah:()=>r,Ay:()=>s,yL:()=>a});var i=()=>n(117586);const a={[i().xQ.StartDate]:"starting",[i().xQ.StartTime]:"starting",[i().xQ.EndDate]:"ending",[i().xQ.EndTime]:"ending"},r={starting:i().xQ.StartDate,ending:i().xQ.EndDate};class o extends(()=>n(757695))().Store{getInitialState(){return{isOpen:!1,focus:i().xQ.StartDate,temporaryDateRange:{starting:void 0,ending:void 0},displayMonth:void 0,hovered:void 0,showTime:!1}}getFocus(){return this.state.focus}toggleShowTime(){this.setState({...this.state,showTime:!this.state.showTime})}clearTemporaryDateRange(){this.setState({...this.state,temporaryDateRange:{starting:void 0,ending:void 0}})}}const s=o},272630:(e,t,n)=>{n.d(t,{A:()=>a});n(296540);var i=n(474848);const a=function(e){let{title:t,disabled:a,innerStyle:r,placeholder:o,onClick:s,disableMargins:l,desktopStyle:d}=e;const u=(0,n(401497).DP)(),c=(0,n(484714).v3)(),{device:p}=c,g=Boolean(t);if(p.isMobile)return(0,i.jsx)(n(760217).A,{showExtensionArrow:!a,focused:!1,title:g?(0,i.jsx)("div",{style:{display:"flex",alignItems:"center",...r},children:t}):(0,i.jsx)("div",{style:{display:"flex",alignItems:"center",color:n(381349).Ay.uiGray,...r},children:o}),onClick:s});{const e="dark"===u.mode?u.text.tertiary:u.text.secondary;return(0,i.jsx)(n(44935).H,{action:()=>function(e){e&&e()}(s),disabled:a,render:s=>(0,i.jsxs)(n(864943).A,{...s,hovered:s.focused,size:"lg",backgroundColor:u.buttonBackground,style:{marginRight:8,maxWidth:180,padding:"0 8px",...s.disabled&&{opacity:.5},...l&&{marginRight:0,maxWidth:"100%",justifyContent:"space-between"},...d},children:[(0,i.jsx)("div",{style:{display:"flex",minWidth:0,color:g?u.text.primary:e,...r},children:g?t:o}),!a&&(0,n(668725).b)({width:10,marginLeft:6,fill:u.icon.tertiary})]})})}}},427711:(e,t,n)=>{n.d(t,{A:()=>j});n(898992),n(354520);var i=n(296540),a=()=>n(484714),r=()=>n(56366),o=()=>n(401497),s=()=>n(289915),l=()=>n(604995),d=()=>n(416504),u=()=>n(959013),c=()=>n(534177),p=()=>n(186445),g=()=>n(972435),v=()=>n(722872),f=()=>n(780865),y=()=>n(513488),h=()=>n(35394),m=()=>n(678553),b=()=>n(480095),x=()=>n(89924),D=()=>n(125565),S=()=>n(712677),M=()=>n(527399),A=()=>n(539320),C=()=>n(903400),R=n(474848);const k={pickerSectionMobile:{paddingTop:16,paddingBottom:8}},w=(0,u().YK)({startingMessage:{defaultMessage:"Starting",id:"search.dateRangeMenu.startingMessage"},endingMessage:{defaultMessage:"Ending",id:"search.dateRangeMenu.endingMessage"}});const j=function(e){let{disableMenuWrap:t,hideDateInputMenuItems:i,value:o,relativeRangePopupStore:s,onUpdateRelativeFilter:l,disabled:d,allowRelativeRangeFilter:c,onUpdate:p,onDismiss:g,title:v,store:f,maxDate:y,minDate:m}=e;const b=(0,a().v3)(),x=(0,u().tz)(),D=(0,r().uB)(f,h().A),{device:S}=b;return t?(0,R.jsxs)(R.Fragment,{children:[i?void 0:(0,R.jsx)(L,{value:o,relativeRangePopupStore:s,onUpdateRelativeFilter:l,disabled:d,allowRelativeRangeFilter:c,intl:x,onUpdate:p,onDismiss:g,store:D}),(0,R.jsx)(F,{value:o,onUpdate:p,store:D,maxDate:y,minDate:m})]}):(0,R.jsxs)(n(928600).A,{...O(b,v,o,x,p,D,g,s,l,d,c),children:[S.isMobile||i?void 0:(0,R.jsx)(L,{value:o,relativeRangePopupStore:s,onUpdateRelativeFilter:l,disabled:d,allowRelativeRangeFilter:c,intl:x,onUpdate:p,onDismiss:g,store:D}),(0,R.jsx)(F,{value:o,onUpdate:p,store:D,maxDate:y,minDate:m})]})};function T(e){return{type:"date",start_date:l().hp(Date.now(),l().Lm(),e).toFormat(l().tr)}}function E(e){return"custom"===e.value?function(e,t,n){const i=(0,s().k0)(e,t,n,(0,d().P)());switch(e){case"past":return{starting:l().lN(i),ending:l().Ec((0,d().P)())};case"future":return{starting:l().Ec((0,d().P)()),ending:l().lN(i)};default:(0,c().HB)(e)}}(e.direction,e.count,e.unit):"surrounding"===e.value?function(e){const{start:t,end:n}=(0,s().yM)(e,(0,d().P)(),p().XX.state);return{starting:l().lN(t),ending:l().lN(n)}}(e.unit):function(e){switch(e.value){case"this_week":return{starting:(t=(0,d().P)(),{type:"date",start_date:l().iB(Date.now(),l().Lm(),t).toFormat(l().tr)}),ending:T((0,d().P)())};case"the_past_month":return{starting:l().ZG((0,d().P)()),ending:l().Ec((0,d().P)())};case"the_past_week":return{starting:l().t0((0,d().P)()),ending:l().Ec((0,d().P)())};case"the_past_year":return{starting:l().Yz((0,d().P)()),ending:l().Ec((0,d().P)())};case"the_next_month":return{starting:l().Ec((0,d().P)()),ending:l().wc((0,d().P)())};case"the_next_week":return{starting:l().Ec((0,d().P)()),ending:l().En((0,d().P)())};case"the_next_year":return{starting:l().Ec((0,d().P)()),ending:l().le((0,d().P)())};default:(0,c().HB)(e)}var t}(e)}function I(e){let{events:t,onUpdateFilter:n,filter:i}=e;const r=(0,a().v3)();return(0,R.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:r.device.isMobile?"wrap":void 0,padding:"0px 12px"},children:(0,R.jsx)(C().i,{onUpdate:n,filter:i})})}function P(e,t,n){if("type"in n)return{value:{starting:void 0,ending:void 0}};if(t.error)return t;const i=t.value&&"date"!==t.value.type?l().fN(t.value):t.value;return function(e){if(e.starting&&e.ending){const t=l().C6.notionDateToLuxon(e.starting);return l().C6.notionDateToLuxon(e.ending)>=t?{value:e}:{error:y().$.INVALID_RANGE}}return{value:e}}({...n,[e]:i})}function F(e){let{value:t,onUpdate:n,store:i,maxDate:s,minDate:l}=e;const d=(0,o().DP)(),c=(0,a().v3)(),p=(0,r().uB)(i,h().A),{device:g}=c,v=function(e){return{pickerSectionMobile:{background:e.popoverBackground,boxShadow:`0 1px 0 ${e.regularDividerColor}`,marginBottom:1}}}(d),f={paddingLeft:8,paddingRight:8,paddingBottom:8,paddingTop:4,...g.isMobile&&k.pickerSectionMobile,...g.isMobile&&v.pickerSectionMobile},y=(0,r().K8)((()=>"type"in t?E(t):t),[t]);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(x().A,{disableMobilePadding:!0,disableMobileBorders:!0,children:(0,R.jsx)("div",{style:f,children:(0,R.jsx)(A().A,{value:y,store:p,onUpdate:n,validate:(e,n)=>P(e,n,t),readonly:"type"in t,maxDate:s,minDate:l})})}),"type"in t?(0,R.jsx)(x().A,{disableMobilePadding:!0,disableMobileBorders:!0,topBorder:!0,children:(0,R.jsx)(m().Ay,{title:(0,R.jsx)(D().A,{isSmall:!0,isSecondaryColor:!0,children:(0,R.jsx)(u().sA,{id:"collectionFilterMenu.dateRangeFilter.relativeDateRangeFilter.description",defaultMessage:"Filter will update with the current date"})})})}):void 0]})}function B(e,t){t.setState({...t.state,focus:e})}function U(e){let{events:t,value:n,disabled:o,allowRelativeRangeFilter:s,onUpdate:l,onDismiss:d,store:c}=e;const p=(0,a().v3)(),v=(0,u().tz)(),y=(0,i.useCallback)(((e,t)=>function(e,t,n){t&&t.error||n.setState({...n.state,focus:"ending"})}(0,t,c)),[c]),h=(0,r().K8)((()=>c.getFocus()),[c]),m=function(e,t){if("type"in e)return;return{earliestValidEnding:e.starting&&f().Yq(e.starting,t,"YYYY-MM-DD"),latestValidStarting:e.ending&&f().Yq(e.ending,t,"YYYY-MM-DD")}}(n,v),b="type"in n?{starting:void 0,ending:void 0}:n;return(0,R.jsxs)("div",{...t,style:{display:"flex",flexDirection:s&&!p.device.isMobile?"row":"column",alignItems:"center",gap:8,padding:"1px 12px 8px 12px",width:void p.device.isMobile},children:[(0,R.jsx)(S().A,{disabled:o,placeholder:p.device.isMobile?void 0:g().A.formatMessage(w.startingMessage),focused:"starting"===h,value:b.starting,validate:e=>function(e,t){const n=P("starting",e,t);return n.error?n:{value:n.value.starting}}(e,n),onUpdate:e=>function(e,t){e.error||t({value:{starting:e.value}})}(e,l),onFocus:()=>B("starting",c),onSubmit:y,inputElementAttributes:m?{max:m.latestValidStarting}:void 0,desktopDateFormat:s?"YYYY/MM/DD":void 0,style:{padding:0}}),(0,R.jsx)(S().A,{disabled:o,placeholder:p.device.isMobile?void 0:g().A.formatMessage(w.endingMessage),focused:"ending"===h,value:b.ending,validate:e=>function(e,t){const n=P("ending",e,t);return n.error?n:{value:n.value.ending}}(e,n),onUpdate:e=>function(e,t){e.error||t({value:{ending:e.value}})}(e,l),onFocus:()=>B("ending",c),onSubmit:(e,t)=>function(e,t,n){t&&t.error||n&&n(e)}(e,t,d),inputElementAttributes:m?{min:m.earliestValidEnding}:void 0,textWrapperStyle:s&&!p.device.isMobile?{marginLeft:2}:{},desktopDateFormat:s?"YYYY/MM/DD":void 0,style:{padding:0}})]})}function L(e){let{value:t,relativeRangePopupStore:n,onUpdateRelativeFilter:i,disabled:a,allowRelativeRangeFilter:r,intl:o,onUpdate:s,onDismiss:l,store:d}=e;if(n&&i){const e="type"in t?t:{type:"exact",value:void 0};return(0,R.jsx)(M().A,{type:"daterange",filterValue:e,onUpdate:i,renderOrigin:n=>"exact"===e.type?(0,R.jsx)(U,{value:t,disabled:a,allowRelativeRangeFilter:r,onUpdate:s,onDismiss:l,store:d,events:n}):"relative"!==e.type||"surrounding"!==e.value&&"custom"!==e.value?void 0:(0,R.jsx)(I,{events:n,onUpdateFilter:i,filter:e}),disabled:"exact"===e.type,buttonPopupStore:n})}return(0,R.jsx)(U,{value:t,disabled:a,allowRelativeRangeFilter:r,onUpdate:s,onDismiss:l,store:d})}function O(e,t,n,i,a,r,o,s,l,d,u){const{device:c}=e;if(c.isMobile){return{menuType:v().gu.Modal,title:t,right:(0,R.jsx)(b().DoneMenuText,{}),onClickRight:o,header:(0,R.jsx)(L,{value:n,relativeRangePopupStore:s,onUpdateRelativeFilter:l,disabled:d,allowRelativeRangeFilter:u,intl:i,onUpdate:a,onDismiss:o,store:r})}}return{menuType:v().gu.Popup,onClickOutside:o}}},513488:(e,t,n)=>{n.d(t,{$:()=>i,A:()=>r});const i={INVALID_DATE:"Invalid date",INVALID_RANGE:"Invalid range",NOT_SUPPORTED:"Not supported"};class a extends(()=>n(757695))().Store{getInitialState(){return{edited:!1,temporary:"",error:void 0}}}const r=a},527399:(e,t,n)=>{n.d(t,{A:()=>f});n(898992),n(354520),n(581454),n(296540);var i=()=>n(484714),a=()=>n(289915),r=()=>n(205098),o=()=>n(972435),s=()=>n(722872),l=()=>n(760217),d=()=>n(406699),u=()=>n(928600),c=()=>n(939740),p=()=>n(897119),g=()=>n(89924),v=n(474848);function f(e){const{filterValue:t,renderOrigin:n,buttonPopupStore:f}=e,y=(0,i().v3)(),h=e=>"relative"===e.filter.type&&"custom"===e.filter.value?o().A.formatMessage(r().IZ[e.filter.value]):"date"===e.type?(0,r().RR)(e.filter):(0,r().kz)(e.filter);return(0,v.jsx)(d().Ay,{popupType:y.device.isMobile?p().nl.SlideUp:p().nl.Popup,buttonPopupStore:f,render:()=>{let n;n=y.device.isMobile?{menuType:s().gu.ActionSheet}:{menuType:s().gu.Popup};const i="date"===e.type?(()=>{const e=a().ty;return[...e.filter((e=>"relative"===e.type)),...e.filter((e=>"exact"===e.type))]})().map((n=>({key:"relative"===n.type?n.value:n.type,render:e=>(0,v.jsx)(l().A,{...e,title:h({type:"date",filter:n}),isChecked:n.type===t.type&&(void 0===n.value||n.value===t.value)}),action:()=>{e.onUpdate(n),f.setState({open:!1})}}))):(()=>{const e=(0,a().mM)();return[...e.filter((e=>"relative"===e.type)),...e.filter((e=>"exact"===e.type))]})().map((n=>({key:(0,a().q5)(n),render:e=>(0,v.jsx)(l().A,{...e,title:h({type:"daterange",filter:n}),isChecked:n.type===t.type&&(void 0===n.value||n.value===t.value)}),action:()=>{e.onUpdate(n),f.setState({open:!1})}})));return(0,v.jsx)(u().A,{...n,children:(0,v.jsx)(c().Ay,{type:c().Oh.Vertical,sections:[{key:"filterOperators",render:e=>(0,v.jsx)(g().A,{disableMobilePadding:!0,...e}),items:i}],initialFocus:void 0})})},renderOrigin:n,style:{width:240},originGap:2,placementToOrigin:d().sx.Bottom,alignmentToOrigin:d().yP.Center,disabled:e.disabled})}},539320:(e,t,n)=>{n.d(t,{A:()=>p});n(944114);var i=n.n(n(32485)),a=n(296540),r=()=>n(56366),o=()=>n(604995),s=()=>n(381349),l=()=>n(284371),d=()=>n(186445),u=()=>n(141025),c=n(474848);const p=function(e){let{readonly:t,store:p,value:g,validate:v,onUpdate:f,disabled:y,dateTimeStore:h,minDate:m,maxDate:b}=e;const x=(0,n(401497).DP)(),D=(0,a.useRef)(),S=(0,r().K8)((()=>{if(p.state.displayMonth)return p.state.displayMonth.toJSDate();if("starting"===p.getFocus()){if(g.starting)return o().C6.notionDateToJsDate(g.starting);if(g.ending)return o().C6.notionDateToJsDate(g.ending)}if("ending"===p.getFocus()){if(g.ending)return o().C6.notionDateToJsDate(g.ending);if(g.starting)return o().C6.notionDateToJsDate(g.starting)}if(!D.current){const e=o().Ec((0,n(416504).P)());D.current=o().C6.notionDateToJsDate(e)}return D.current}),[D,p,g]),M=(0,r().K8)((()=>d().XX.state),[]),A=(0,r().K8)((()=>function(e){const{store:t,value:n,componentIsDisabled:i,minDate:a,maxDate:r}=e,s=function(e){const{store:t,value:n,componentIsDisabled:i,minDate:a,maxDate:r}=e;if(i)return[!0];const s=[];a&&s.push({before:a.toJSDate()});r&&s.push({after:r.toJSDate()});const l=e=>"ending"===t.getFocus()&&{before:e},d=e=>"starting"===t.getFocus()&&{after:e};if(n.starting){const e=o().C6.notionDateToJsDate(n.starting);s.push(l(e))}if(n.ending){const e=o().C6.notionDateToJsDate(n.ending);s.push(d(e))}return s}({value:n,store:t,componentIsDisabled:i,minDate:a,maxDate:r}),{hovered:l}=t.state;if(i)return{disabled:s};if(n.starting&&n.ending){const e=o().C6.notionDateToJsDate(n.starting),t=o().C6.notionDateToJsDate(n.ending);return{range:{from:e,to:t},start:e,end:t,disabled:s}}if(n.starting){const e=o().C6.notionDateToJsDate(n.starting);return{range:l&&{from:e,to:l},start:e,end:l,disabled:s,selected:[e,l]}}if(n.ending){const e=o().C6.notionDateToJsDate(n.ending);return{range:l&&{from:l,to:e},start:l,end:e,disabled:s,selected:[e,l]}}return{disabled:s}}({store:p,value:g,componentIsDisabled:y,minDate:m,maxDate:b})),[p,g,y,m,b]),C=(0,n(963589).X)("nds_datepicker_refresh"),R=(0,r().K8)((()=>function(e,t,n){const i=function(e){return{monthControl:{position:"absolute",top:0,right:0,display:"flex"},selectedRange:{backgroundColor:e?"transparent":s().Ay.blueWithAlpha(.15)},active:{backgroundColor:s().Ay.blue,color:s().Ay.white},inactive:{backgroundColor:s().Ay.blueWithAlpha(.43)},disabled:{pointerEvents:"none"},today:{fontWeight:l().Wy.regular}}}(n),a=function(e){return{disabled:{color:e.text.tertiary},today:{color:s().Ay.white}}}(t),r=e.getFocus(),o=i.selectedRange,d={...i.disabled,...a.disabled},u={...i.today,...a.today};return{range:o,start:"starting"===r?i.active:i.inactive,end:"ending"===r?i.active:i.inactive,disabled:d,today:u}}(p,x,C)),[p,x,C]);return(0,c.jsx)(n(541181).n,{className:i()("notion-calendar-picker",{"is-readonly":t}),defaultMonth:S,month:S,numberOfMonths:1,weekStartsOn:M,locale:n(662303).locale,showOutsideDays:!0,fixedWeeks:!0,onDayClick:e=>function(e,t,n,i,a,r,s,l){if(r||l)return;const d=t.getFocus(),c=o().C6.toPersistedDate(e.valueOf()),p=i(d,{value:c}),g=p.error?p:{value:{[d]:p.value[d]}};a(g),t.setState({...t.state,hovered:void 0}),s&&s.setState({...s.state,hovered:void 0});if(p.error)return;"starting"!==d||n.ending||(t.setState({...t.state,focus:"ending"}),s&&s.setState({...s.state,focus:u().Ah.ending}));const v="starting"===d?"ending":"starting";t.setState({...t.state,focus:v}),s&&s.setState({...s.state,focus:u().Ah[v]})}(e,p,g,v,f,y,h,t),onDayMouseEnter:e=>function(e,t,n,i,a,r){const s=t.getFocus(),l=o().C6.jsDateToLuxon(e);if(i||r)return;if("starting"===s&&n.ending&&!n.starting){o().C6.notionDateToLuxon(n.ending)>=l&&(t.setState({...t.state,hovered:e}),a&&a.setState({...a.state,hovered:e}))}else if("ending"===s&&n.starting&&!n.ending){o().C6.notionDateToLuxon(n.starting)<=l&&(t.setState({...t.state,hovered:e}),a&&a.setState({...a.state,hovered:e}))}}(e,p,g,y,h,t),onMonthSelected:e=>function(e,t,n){t.setState({...t.state,displayMonth:o().C6.jsDateToLuxon(e)}),n&&n.setState({...n.state,displayMonth:o().C6.jsDateToLuxon(e)})}(e,p,h),modifiers:A,modifiersStyles:R,disabled:!!t||void 0})}},541181:(e,t,n)=>{n.d(t,{n:()=>r});var i=()=>n(645873);const a=new(i().O2)("react-day-picker",(async()=>await Promise.all([n.e(95555),n.e(41986),n.e(68548)]).then(n.bind(n,762290)))),r=(0,i()._h)(a,(e=>e.default))},712677:(e,t,n)=>{n.d(t,{A:()=>b});var i=n(296540),a=()=>n(484714),r=()=>n(56366),o=()=>n(401497),s=()=>n(597777),l=()=>n(604995),d=()=>n(498140),u=()=>n(959013),c=()=>n(534177),p=()=>n(205098),g=()=>n(780865),v=()=>n(513488),f=()=>n(623580),y=()=>n(419357),h=n(474848);const m=(0,u().YK)({invalidDateError:{id:"dateInputError.invalidDateError.tooltip",defaultMessage:"Invalid date"},invalidDateRangeError:{id:"dateInputError.invalidDateRangeError.tooltip",defaultMessage:"Invalid range"},notSupportedDateRangeError:{id:"dateInputError.notSupportedDateRangeError.tooltip",defaultMessage:"The date is not supported"}});const b=function(e){const t=(0,u().tz)(),a=(0,r().uB)(void 0,v().A),{value:o}=e;(0,i.useEffect)((()=>{a.reset()}),[o,a]);const s=(0,i.useCallback)((()=>(0,h.jsx)(j,{dateInputMenuItemProps:e,store:a})),[e,a]),l=(0,r().K8)((()=>C(t,a)),[t,a]);return l?(0,h.jsx)(n(859428).A,{renderTooltip:()=>l,forceVisibleState:!0,placement:n(962730).W.Left,render:s,originGap:-8}):(0,h.jsx)(j,{dateInputMenuItemProps:e,store:a})};function x(e,t){const{device:n}=e;return n.isMobile?"YYYY-MM-DD":t??s().vz}function D(e,t){const{device:n}=e;return!!n.isMobile||!t}function S(e){return{inputDefault:{background:e.inputBackground,boxShadow:e.inputBoxShadow},inputFocused:{background:e.inputBackground,boxShadow:e.inputBlueFocusRing},inputError:{background:e.inputBackground,boxShadow:e.inputRedFocusRing},placeholder:{color:e.text.tertiary}}}function M(e,t){return{menuItem:{marginBottom:e.device.isMobile?1:0},inputWrapper:{borderRadius:6,height:28,paddingRight:D(e,t)?8:0,position:"relative"},inputEditRegion:{width:D(e,t)?"calc(100% - 14px)":"87%"},inputEditRegionMobile:{padding:"2px 6px",position:"relative"},placeholder:{position:"absolute",left:e.device.isIpad?26:12,top:e.device.isIpad?void 0:"50%",transform:"translateY(-50%)"}}}function A(e){let{inputType:t,placeholder:n,value:i,hideClearButton:r}=e;const s=(0,o().DP)(),l=M((0,a().v3)(),r),d=S(s);return"date"!==t||i?null:(0,h.jsx)("div",{style:{...l.placeholder,...d.placeholder},children:n})}function C(e,t){if(t.state.error)switch(t.state.error){case v().$.INVALID_DATE:return e.formatMessage(m.invalidDateError);case v().$.INVALID_RANGE:return e.formatMessage(m.invalidDateRangeError);case v().$.NOT_SUPPORTED:return e.formatMessage(m.notSupportedDateRangeError);default:(0,c().HB)(t.state.error)}}function R(e,t,n,i,a){const r=function(e,t,n,i){if(!n.state.edited)return;if(!n.state.temporary)return{value:void 0};const a=(0,d().yc)(n.state.temporary,e.device.isMobile?l().tr:x(e,i),t);return a?{value:{type:"date",start_date:a}}:{error:v().$.INVALID_DATE}}(e,t,n,a);if(r)return i?i(r):r}function k(e,t,n,i,a){const r=S(e),o=C(i,a);if(!t)return o?r.inputError:n?r.inputFocused:r.inputDefault}function w(e,t,n,i,a,r,o,s){const l=R(e,n,i,r,o);l?(t(l),l.error?i.setState({...i.state,edited:!1,error:l.error}):i.reset()):i.setState({...i.state,edited:!1}),s&&a&&a(s)}function j(e){let{dateInputMenuItemProps:t,store:n}=e;const{store:s,hideClearButton:d,focused:c,value:v,...m}=t,{onBlur:b,onClearButtonClick:S,onFocus:C,onSubmit:j,onUpdate:T,placeholder:E,validate:I,desktopDateFormat:P,inputStyle:F,inputOuterStyle:B,style:U,disabled:L}=t,O=(0,u().tz)(),_=(0,o().DP)(),Y=(0,a().v3)(),W=(0,i.useCallback)((e=>w(Y,T,O,n,b,I,P)),[Y,T,O,n,b,I,P]),N=(0,i.useCallback)((e=>function(e,t,n,i,a,r,o,s){const l=R(t,i,a,o,s);l&&(n(l),l.error?a.setState({...a.state,edited:!1,error:l.error}):a.reset()),r&&r(e,l)}(e,Y,T,O,n,j,I,P)),[Y,T,O,n,j,I,P]),z=(0,i.useCallback)((e=>function(e,t,n,i,a,r,o,s){const{device:l}=t;a.setState({...a.state,edited:!0,temporary:e.target.value||""}),l.isAndroid&&w(t,n,i,a,r,o,s)}(e,Y,T,O,n,b,I,P)),[Y,T,O,n,b,I,P]),V=(0,i.useCallback)((()=>function(e,t,n,i,a,r,o){a.setState({...a.state,edited:!0,temporary:"",error:void 0});const s=R(e,i,a,r,o);s&&n(s),a.setState({...a.state,edited:!1}),t&&t()}(Y,S,T,O,n,I,P)),[Y,S,T,O,n,I,P]),J=(0,i.useCallback)((e=>function(e,t,n){n.setState({...n.state,edited:!1}),t&&t(e)}(e,C,n)),[C,n]),{device:K}=Y,Q=K.isMobile&&"relative"!==(null==v?void 0:v.type)?"date":"text",G="date"===Q?f().C.Transparent:f().C.Default,q=K.isMobile?void 0:c,$=(0,r().K8)((()=>function(e,t,n,i,a){const{device:r}=e;if(t&&"relative"===t.type)return(0,p().RR)(t);const o=t&&"date"!==t.type?l().fN(t):t;return r.isMobile?o?g().Yq(o,n,x(e,a)):"":i.state.temporary||i.state.edited?i.state.temporary:o?g().Yq(o,n,x(e,a)):""}(Y,v,O,n,P)),[Y,v,O,n,P]),H=(0,r().K8)((()=>function(e,t,n,i,a,r,o,s,l,d){const{device:u}=e,c=M(e,d);return{style:{...c.menuItem,...a,marginRight:0},inputOuterStyle:{...k(t,r,o,s,l),...c.inputWrapper,...i},inputStyle:{...c.inputEditRegion,...u.isMobile&&c.inputEditRegionMobile,...n}}}(Y,_,F,B,U,L,c,O,n,d)),[Y,_,F,B,U,L,c,O,n,d]);return(0,h.jsx)(y().Ay,{...m,type:Q,format:G,left:K.isMobile&&(0,h.jsx)(A,{placeholder:E,value:v,hideClearButton:d,inputType:Q}),showClearButton:D(Y,d),focus:q,onFocus:J,onClearButtonClick:V,onChange:z,onSubmit:N,onBlur:W,value:$,disableInput:"relative"===(null==v?void 0:v.type),...H})}},903400:(e,t,n)=>{n.d(t,{i:()=>w});n(898992),n(354520),n(296540);var i=()=>n(484714),a=()=>n(56366),r=()=>n(401497),o=()=>n(668725),s=()=>n(959013),l=()=>n(720665),d=()=>n(205098),u=()=>n(972435),c=()=>n(722872),p=()=>n(963589),g=()=>n(463830),v=()=>n(960715),f=()=>n(760217),y=()=>n(406699),h=()=>n(285790),m=()=>n(419357),b=()=>n(928600),x=()=>n(939740),D=()=>n(864943),S=()=>n(897119),M=()=>n(89924),A=()=>n(125565),C=()=>n(272630),R=n(474848);function k(e){const{humanReadableLabel:t,placeholder:n,outlineButtonStyle:i,buttonWrapperStyle:a,renderAsQueryDropdown:s,events:l,isMobile:d,openMenuAriaLabel:u}=e,c=(0,r().IS)((e=>({iconStyle:{...!d&&{height:12,width:12},color:e.icon.secondary},textStyle:{marginLeft:6,color:e.text.primary}})),[d]);return s?(0,R.jsx)(C().A,{...l,placeholder:n,title:(0,R.jsx)(A().A,{isMobile:d,children:t}),disableMargins:!0}):(0,R.jsx)("div",{style:a,...l,children:(0,R.jsxs)(D().A,{size:d?"lg":void 0,style:i,children:[(0,R.jsx)("div",{style:c.textStyle,children:t}),(0,R.jsx)(h().A,{disableBackground:!0,icon:o().b,iconStyle:c.iconStyle,ariaLabel:u})]})})}function w(e){const{onUpdate:t,filter:n,renderAsQueryDropdown:o}=e,h=(0,i().Y0)(),D=(0,s().tz)(),A=(0,a().uB)(void 0,g().A),C=(0,a().uB)(void 0,g().A),w="count"in n,j=(0,p().X)("nds_datepicker_refresh"),T=(0,r().IS)((e=>({directionButtonStyle:{paddingLeft:4,paddingRight:4,width:"100%",justifyContent:"space-between",...h.isMobile&&{marginTop:12,width:"100%",paddingLeft:12,marginBottom:6}},unitButtonStyle:{paddingLeft:4,paddingRight:4,justifyContent:"space-between",width:"100%",...h.isMobile&&{paddingLeft:12,marginTop:6}},directionButtonWrapperStyle:{...h.isMobile&&{width:"100%"},flexGrow:1},unitButtonWrapperStyle:{...h.isMobile&&{width:"100%"},flexGrow:1},inputStyle:j?{padding:0}:{minWidth:35,height:16},inputOuterStyle:{minWidth:60,height:v().RO.md},container:{display:"flex",justifyContent:"start",alignItems:"center",flexDirection:h.isMobile?"column":"row",width:"100%",gap:j?4:8},textWrapper:{marginRight:6,marginLeft:o?16:6}})),[h.isMobile,o,j]);function E(e){return"this"===e?u().A.formatMessage(d().Cj[e]):u().A.formatMessage(d().zZ[e])}function I(e,t){return t&&t>1?u().A.formatMessage(d().o1[e]):u().A.formatMessage(d().EA[e])}const P=["day","week","month","year"].map((e=>({key:e,render:t=>(0,R.jsx)(f().A,{...t,title:I(e,w?n.count:void 0),isChecked:e===n.unit}),action:i=>{t({...n,unit:e}),A.setState({open:!1})}}))),F=["past","future","this"].map((e=>({key:e,render:t=>(0,R.jsx)(f().A,{...t,isChecked:"surrounding"===n.value?"this"===e:e===n.direction,title:E(e)}),action:i=>{"this"===e&&"custom"===n.value?t({type:"relative",value:"surrounding",unit:n.unit}):"this"!==e&&"surrounding"===n.value?t({type:"relative",value:"custom",count:1,direction:e,unit:n.unit}):"this"!==e&&"custom"===n.value&&t({...n,direction:e}),C.setState({open:!1})}})));return(0,R.jsxs)("div",{style:T.container,children:[(0,R.jsx)(y().Ay,{buttonPopupStore:C,popupType:h.isMobile?S().nl.SlideUp:S().nl.Popup,renderOrigin:e=>(0,R.jsx)(k,{events:e,placeholder:D.formatMessage(d().ql.direction),renderAsQueryDropdown:o,isMobile:h.isMobile,outlineButtonStyle:T.directionButtonStyle,buttonWrapperStyle:T.directionButtonWrapperStyle,humanReadableLabel:E("direction"in n?n.direction:"this"),openMenuAriaLabel:D.formatMessage(d().ql.iconButtonDirectionDropdown)}),render:()=>(0,R.jsx)(b().A,{menuType:h.isMobile?c().gu.ActionSheet:c().gu.Popup,children:(0,R.jsx)(x().Ay,{initialFocus:void 0,type:x().Oh.Vertical,sections:[{key:"directionOptions",render:e=>(0,R.jsx)(M().A,{disableMobilePadding:!0,...e}),items:F}]})})}),w&&(0,R.jsx)(m().Ay,{type:"number",style:T.inputStyle,textWrapperStyle:T.textWrapper,inputOuterStyle:T.inputOuterStyle,min:"1",value:n.count.toString(),onChange:e=>{const i=parseInt(e.target.value);!(0,l().Et)(i)||i<1||t({...n,count:i})}}),(0,R.jsx)(y().Ay,{buttonPopupStore:A,popupType:h.isMobile?S().nl.SlideUp:S().nl.Popup,renderOrigin:e=>(0,R.jsx)(k,{events:e,placeholder:D.formatMessage(d().ql.unit),renderAsQueryDropdown:o,isMobile:h.isMobile,outlineButtonStyle:T.unitButtonStyle,buttonWrapperStyle:T.unitButtonWrapperStyle,humanReadableLabel:I(n.unit,"count"in n?n.count:void 0),openMenuAriaLabel:D.formatMessage(d().ql.iconButtonUnitDropdown)}),render:()=>(0,R.jsx)(b().A,{menuType:h.isMobile?c().gu.ActionSheet:c().gu.Popup,children:(0,R.jsx)(x().Ay,{initialFocus:void 0,type:x().Oh.Vertical,sections:[{key:"unitOptions",render:e=>(0,R.jsx)(M().A,{disableMobilePadding:!0,...e}),items:P}]})})})]})}}}]);