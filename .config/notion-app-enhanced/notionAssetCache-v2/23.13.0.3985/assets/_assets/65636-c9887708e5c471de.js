"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[65636],{8741:(e,t,o)=>{o.r(t),o.d(t,{arrowDiagonalUpRightSmallIcon:()=>n,iconDefinition:()=>i});o(296540);const i={viewBox:"0 0 16 16",fittedViewBox:"3.65 3.66 8.68 8.68",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M5.603 3.663a.625.625 0 1 0 0 1.25h4.6l-6.37 6.371a.615.615 0 0 0 .013.87.616.616 0 0 0 .87.014l6.371-6.372v4.601a.625.625 0 1 0 1.25 0v-6.11a.625.625 0 0 0-.625-.624z"})},n=(0,o(340498).wt)("arrowDiagonalUpRightSmall",i)},126158:(e,t,o)=>{o.d(t,{m:()=>n});o(296540);var i=o(474848);const n=(0,o(340498).wt)("arrowDownSmall",{viewBox:"0 0 12 12",svg:(0,i.jsx)("path",{d:"M5.99756 0.850098C5.53564 0.850098 5.21875 1.17236 5.21875 1.65576V7.61768L5.27246 8.7832L4.19287 7.53711L2.98438 6.33398C2.84473 6.18896 2.66211 6.09229 2.42578 6.09229C2.00684 6.09229 1.68994 6.40381 1.68994 6.84424C1.68994 7.04834 1.77051 7.23633 1.93164 7.40283L5.42285 10.8994C5.56787 11.0498 5.78809 11.1357 5.99756 11.1357C6.2124 11.1357 6.42725 11.0498 6.57227 10.8994L10.0688 7.40283C10.23 7.23633 10.3105 7.04834 10.3105 6.84424C10.3105 6.40381 9.99365 6.09229 9.57471 6.09229C9.34375 6.09229 9.16113 6.18896 9.01611 6.33398L7.80762 7.53711L6.72803 8.7832L6.77637 7.61768V1.65576C6.77637 1.17236 6.46484 0.850098 5.99756 0.850098Z"})})},155382:(e,t,o)=>{o.d(t,{PA:()=>p,WM:()=>x,Zh:()=>h,ji:()=>v,vW:()=>m,yX:()=>f});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(581454);var i=()=>o(56366),n=()=>o(365646),r=()=>o(939689),l=()=>o(179034),a=()=>o(519831),s=()=>o(155792),c=()=>o(496603),d=()=>o(534177),u=()=>o(58293),g=()=>o(630116);function h(){return{verticalPadding:4,horizontalPadding:8}}function f(e){const t=[];for(const o of e){const e=x(o.toolType),i=p(o);if(e)for(const o of i)o.table===l().ev&&t.push({recordPointer:o,agentAction:e})}return t}function p(e){if(!e||!e.result)return[];const{result:t}=e;if("appId"in t&&"string"==typeof t.appId)return[{table:l().ev,id:t.appId}];if("pageId"in t&&"string"==typeof t.pageId)return[{table:l().ev,id:t.pageId}];if("collectionViewBlockId"in t&&"string"==typeof t.collectionViewBlockId)return[{table:l().ev,id:t.collectionViewBlockId}];if("pageIds"in t&&Array.isArray(t.pageIds))return t.pageIds.map((e=>({table:l().ev,id:e})));if("workflowBlockId"in t&&"string"==typeof t.workflowBlockId)return[{table:l().ev,id:t.workflowBlockId}];if("entities"in t){return function(e){const t=[];for(const o of e){const e=(0,r().dw)(o);e&&t.push(e)}return c().hS(t,(e=>`${e.table}-${e.id}`))}(t.entities)}return(0,n().gY)(e,"query-data-sources")&&e.result.collectionIds?e.result.collectionIds.map((e=>({id:e,table:a().Vl}))):[]}function x(e){switch(e){case"create-database":case"create-pages":case"create-agent":return"create";case"update-database":case"update-database-data-sources":case"update-database-views":case"update-database-triggers":case"update-page":case"update-user-integrations":case"toggle-user-integration-tools":case"update-agent":return"update";case"delete-pages":case"delete-agent":return"delete";case"search":case"view":case"view-database-files":case"query-data-sources":case"error":case"result":case"edit-json":case"spawn-agent":case"mcpServer.runTool":case"slack.addReactionToMessage":case"slack.createThreadInChannel":case"slack.createThreadInDirectMessage":case"slack.findUserByEmail":case"slack.getSlackUrlFromMessageId":case"slack.getThreadsInChannelSince":case"slack.getUser":case"slack.parseSlackMessageUrlToId":case"slack.queryChannels":case"slack.removeReactionFromMessage":case"slack.replyInThread":case"slack.updateMessage":case"pipedream.action":case"github.getPullRequest":case"github.getUser":case"github.listPullRequests":case"github.listOrganizationRepositories":case"github.parseGithubUrlToParts":case"notion.sendNotification":case"codegen.run":case"codegen.runStatus":case"calendar.getEvents":case"files.getFileContent":case"files.getFileName":case"files.getFileUrl":case"zendesk.addComment":case"zendesk.addTicket":case"zendesk.getComments":case"zendesk.getTicket":case"zendesk.updateTicket":return;default:(0,d().HB)(e)}}function m(e){return"create-database"===e||"create-pages"===e||"create-agent"===e||"update-page"===e||"update-database"===e||"delete-pages"===e||"spawn-agent"===e}function v(e){let{diffResultSteps:t,threadStore:o}=e;const n=(0,u().r)(),{threadOperationStores:r,threadOperationStoreToResultStepMap:l}=(0,i().K8)((()=>{const e=[],i=new Map;if(!n)return{threadOperationStores:e,threadOperationStoreToResultStepMap:i};for(const r of t){if(!r)continue;const t=g().XV.createChildStore(o,{table:s().mS,id:r.id,spaceId:n.id});for(const o of t.getThreadOperationStores())e.push(o),i.set(o,r)}return{threadOperationStores:e,threadOperationStoreToResultStepMap:i}}),[t,n,o]);return(0,i().K8)((()=>{const e=[],t=new Set;let o=!1;for(const i of r){const n=i.getKeyValue("userAction"),r=i.getKeyValue("invertedOperations")??[];if("undo"===n&&(o=!0),"reject"!==n){e.push(...r);const o=l.get(i);o&&t.add(o)}}return{operationsToUndo:e,hasUndoneOperations:o,stepsWithOperationsToUndo:t}}),[r,l])}},187391:(e,t,o)=>{o.d(t,{N:()=>c});o(296540);var i=()=>o(401497),n=()=>o(761940),r=()=>o(959013),l=()=>o(760217),a=()=>o(320260),s=o(474848);function c(e){const t=(0,i().IS)((e=>({icon:{width:20,height:20,color:e.icon.primary}})),[]);return(0,s.jsx)(l().A,{...e,title:(0,s.jsx)(r().sA,{...n().P.manageInCalendar}),icon:(0,s.jsx)(a().y,{style:t.icon})})}},239529:(e,t,o)=>{o.d(t,{S:()=>c,q:()=>s});o(898992),o(672577);var i=()=>o(436696),n=()=>o(435009),r=()=>o(728611),l=()=>o(492414),a=()=>o(519839);function s(e){const{environment:t,collectionContextStore:o,event:l,buttonPopupParent:s}=e,c=(0,a().t2)(o);if(!c)return null;const d=r().Vr(l);n().oo({environment:t,url:c,openInNew:d}),d||null==s||s.close(),(0,i().X)({environment:t,collectionContextStore:o,action:"click_source_view"})}function c(e){var t;let{environment:o,collectionStore:i,pageVisitSource:a,event:s}=e;const c=i.getParentBlockStore();if(!c)return;const d=null===(t=c.getCollectionViewStores())||void 0===t?void 0:t.find((e=>{var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.id)===i.id})),u=(0,l().J8)({store:c,fullyQualified:!1,pageVisitSource:a,collectionViewId:null==d?void 0:d.id});n().oo({environment:o,url:u,openInNew:r().Vr(s)})}},286367:(e,t,o)=>{o.d(t,{D:()=>M});o(898992),o(354520);var i=o(296540),n=()=>o(484714),r=()=>o(56366),l=()=>o(401497),a=()=>o(955363),s=()=>o(340498),c=()=>o(959013),d=()=>o(284371),u=()=>o(436696),g=()=>o(896628),h=()=>o(246826),f=()=>o(725614),p=()=>o(751156),x=o(474848);const m=function(e){const{store:t,titleStyle:i,actionButton:n,addViewButton:l}=e,a=(0,r().K8)((()=>t.getParentBlockStore()),[t]);return(0,x.jsx)("div",{children:(0,x.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,x.jsx)(o(599945).c,{step:"demo_collection",store:a,children:(0,x.jsx)(o(16006).A,{store:t,style:i})}),l,n]})})};var v=()=>o(760217),y=()=>o(939740),w=()=>o(8980),S=()=>o(897119),k=()=>o(187820),b=()=>o(89924),C=()=>o(722872),j=()=>o(963589),I=()=>o(46986);const A=(0,c().YK)({actionsButtonAriaLabel:{defaultMessage:"Collection actions",id:"database.source.actionsButtonAriaLabel"},editIconTitle:{defaultMessage:"Edit data source icon",id:"database.source.editIcon.title"}}),M=i.memo((function(e){const{isHovered:t,collectionContextStore:i,addViewButton:n,showHoverActionsStore:a,titleStyle:s,iconStyle:c,iconSize:u}=e,[g,h,f]=(0,r().K8)((()=>[i.collectionStore(),i.collectionViewBlockStore(),i.permissionScopesStore.state]),[i]),p=(0,r().K8)((()=>i.viewsModuleContextStore.isInLayoutBuilder()),[i]),v=(0,r().K8)((()=>{const e=i.collectionStore();if(!e)return!1;const t=e.getNameStore();return Boolean((0,o(792002).j_)(t))}),[i]),y=(0,r().K8)((()=>{var e;return Boolean((null==g||null===(e=g.getParentBlockStore())||void 0===e?void 0:e.id)===(null==h?void 0:h.id))}),[g,h]),w=(0,r().K8)((()=>Boolean(null==g?void 0:g.isSyncedCollection())),[g]),S=(0,o(106412).Zp)(),k=(y||v)&&f.canConfigureCollection&&!(null!=S&&S.disableEditingName)&&!w,b=(0,l().IS)((()=>({container:{width:"max-content",maxWidth:"100%",marginRight:4,display:"flex",alignItems:"center",...d().RC},titleStyle:{fontWeight:d().Wy.bold,fontSize:22,...v?{}:{display:"-webkit-box",lineClamp:1,WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden"},marginRight:4,...s}})),[v,s]);return g&&(null!=S&&S.disableAllPointerEvents||p)?(0,x.jsxs)("div",{style:b.container,children:[(0,x.jsx)(T,{collectionContextStore:i,disabled:!0,iconStyle:c,iconSize:u}),(0,x.jsx)(m,{store:g,titleStyle:b.titleStyle})]}):k?(0,x.jsx)(B,{isHovered:t,collectionContextStore:i,showHoverActionsStore:a,titleStyle:b.titleStyle,iconStyle:c,iconSize:u,addViewButton:n}):(0,x.jsx)(R,{isHovered:t,addViewButton:n,collectionContextStore:i,showHoverActionsStore:a,titleStyle:b.titleStyle,iconStyle:c,iconSize:u})})),R=i.memo((function(e){const{isHovered:t,collectionContextStore:a,showHoverActionsStore:s,titleStyle:c,iconStyle:g,iconSize:h,addViewButton:f}=e,p=(0,n().v3)(),{collectionStore:v,collectionViewBlockStore:y}=(0,r().K8)((()=>({collectionStore:a.collectionStore(),collectionViewBlockStore:a.collectionViewBlockStore()})),[a]),{isSystemCollection:w,href:S}=(0,r().K8)((()=>{const e=Boolean(null==v?void 0:v.isSystemCollection());return{isSystemCollection:e,href:e?void 0:(0,o(519839).t2)(a)}}),[a,v]),k=(0,j().X)("db_ux_chrome"),b=(0,l().IS)((()=>({container:{width:"max-content",maxWidth:"100%",marginRight:4,...d().RC},containerInner:{paddingLeft:4,paddingRight:4,display:"flex",alignItems:"center",borderRadius:6},containerHovered:{...k&&{background:"none"}}})),[k]),C=(0,i.useCallback)((()=>{(0,u().X)({environment:p,collectionContextStore:a,action:"click_collection_name_link_button"})}),[p,a]);return v&&y?(0,x.jsxs)(o(296798).A,{disabled:w,style:b.container,innerStyle:b.containerInner,hoveredStyle:b.containerHovered,href:S,onClick:C,children:[(0,x.jsx)(T,{collectionContextStore:a,disabled:!0,iconStyle:g,iconSize:h}),(0,x.jsx)(m,{addViewButton:t?f:void 0,actionButton:t?(0,x.jsx)(P,{showHoverActionsStore:s,collectionContextStore:a}):void 0,store:v,titleStyle:c})]}):null})),B=i.memo((function(e){const{isHovered:t,collectionContextStore:a,addViewButton:s,showHoverActionsStore:d,titleStyle:g,iconStyle:h,iconSize:p}=e,m=(0,n().v3)(),v=(0,c().tz)(),y=(0,I().x6)(),w=(0,r().K8)((()=>a.collectionStore()),[a]),S=(0,r().K8)((()=>a.collectionViewBlockStore()),[a]),k=(0,r().K8)((()=>null==w?void 0:w.getNameStore()),[w]),b=(0,r().K8)((()=>(0,o(697650).BN)({collectionStore:w,intl:v,isWorkflowsContainerWithCreationEnabled:y})),[w,v,y]),C=(0,j().X)("content_reskin_v2"),A=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",...C?{}:{marginLeft:4,marginRight:4}},titleIcons:{display:"flex",alignItems:"center",opacity:t?1:0},text:g,placeholder:{WebkitTextFillColor:e.pageTitlePlaceholderTextColor,cursor:"text"}})),[g,t,C]),M=(0,i.useMemo)((()=>(0,x.jsxs)("div",{style:A.titleIcons,children:[s,(0,x.jsx)(P,{showHoverActionsStore:d,collectionContextStore:a})]})),[s,a,d,A.titleIcons]),R=(0,i.useCallback)((()=>{o(778417).IU({environment:m})}),[m]),B=(0,i.useCallback)((()=>{const e=!Boolean(null==k?void 0:k.getValue());o(780054).A.isMobile&&k&&e&&f().selectAllText({environment:m,store:k,canSelectAllBlocks:!1}),(0,u().X)({environment:m,collectionContextStore:a,action:"click_collection_name_input"})}),[k,m,a]);return w&&S&&k?(0,x.jsxs)("div",{style:A.container,children:[(0,x.jsx)(T,{collectionContextStore:a,disabled:!1,iconStyle:h,iconSize:p}),(0,x.jsx)(o(524702).A,{store:k,style:A.text,disabled:!1,disableSlashCommands:!0,disableEmojiCommands:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableMobileActionBar:!1,disableComment:!0,placeholder:b,onEnter:R,onEsc:R,onClick:B,disableShiftEnter:!0,pasteBehavior:"inline",inPageFind:o(792540).Os.none,placeholderStyle:A.placeholder},k.id),M]}):null})),T=i.memo((function(e){const{disabled:t,collectionContextStore:s,iconStyle:c,iconSize:d=22}=e,u=(0,n().v3)(),{collectionStore:g,collectionViewBlockStore:f}=(0,r().K8)((()=>({collectionStore:s.collectionStore(),collectionViewBlockStore:s.collectionViewBlockStore()})),[s]),m=(0,r().K8)((()=>null==g?void 0:g.getIcon()),[g]),v=(0,r().K8)((()=>{var e;return Boolean((null==g||null===(e=g.getParentBlockStore())||void 0===e?void 0:e.id)===(null==f?void 0:f.id))}),[g,f]),y=(0,r().K8)((()=>null==f?void 0:f.getType()),[f]),S=(0,l().IS)((e=>({iconStyle:{width:d,height:d,marginRight:4,...c},container:{position:"relative",width:d+2,height:d+2,marginRight:4,display:"flex",alignItems:"center",justifyContent:"center"},arrowContainer:{width:20,marginRight:4},pageLinkIndicatorIcon:{position:"absolute",width:"50%",height:"50%",right:0,bottom:0,fill:"dark"===e.mode?e.text.primary:"#3E3C38",stroke:"dark"===e.mode?e.surface.wash:"white",strokeWidth:"dark"===e.mode?"1.85px":"1.5px"}})),[c,d]),b=(0,i.useCallback)((e=>{const t=g&&g.getIconStore();t&&p().createAndCommit({userAction:"CollectionViewBlockSource.handleRecordIconChange",environment:u,canUndo:!0,perform:o=>{h().KY({store:t,value:e,transaction:o})}})}),[g,u]);return g&&f?m||v?m?(0,x.jsxs)("div",{style:S.container,children:[t?(0,x.jsx)(k().B6,{disabled:!0,bucket:"secure",store:g,icon:m,iconRecordCategory:"collection",isEmptyPage:!1,style:S.iconStyle,size:d}):(0,x.jsx)(k().B6,{disabled:!1,bucket:"secure",store:g,icon:m,iconRecordCategory:"collection",isEmptyPage:!1,style:S.iconStyle,size:d,iconLoggingData:{recordTable:g.table,source:"inline_collection",block_type:y,collection_id:g.id},onChange:b}),!v&&(0,o(500066).G)(S.pageLinkIndicatorIcon)]}):null:(0,x.jsx)("div",{style:S.arrowContainer,children:(0,x.jsx)(w().I,{icon:a().arrowDiagonalUpRightIcon})}):null})),P=i.memo((function(e){const{showHoverActionsStore:t,collectionContextStore:a}=e,{isMobile:d}=(0,n().Y0)(),u=(0,c().tz)(),g=(0,r().O$)(t),h=(0,l().IS)((()=>({container:{display:"flex"},buttonPopup:{width:240},iconStyle:{width:s().Ev.sm,height:s().Ev.sm}})),[]),f=(0,i.useCallback)((e=>(0,x.jsx)(o(285790).A,{icon:o(126617).Y,iconStyle:h.iconStyle,ariaLabel:u.formatMessage(A.actionsButtonAriaLabel),...e})),[u,h.iconStyle]),p=(0,i.useCallback)((e=>(0,x.jsx)(_,{parent:e,collectionContextStore:a})),[a]);return(0,x.jsx)(o(145214).A,{visible:g,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},style:h.container,children:(0,x.jsx)(o(406699).Ay,{popupType:d?S().nl.SlideUp:S().nl.Popup,render:p,renderOrigin:f,style:h.buttonPopup,originGap:4})})})),_=i.memo((function(e){const{parent:t,collectionContextStore:l}=e,s=(0,n().v3)(),{isMobile:d}=(0,n().Y0)(),m=(0,c().tz)(),S=(0,j().X)("db_ux_chrome"),M=(0,I().Y4)(),{collectionStore:R,collectionViewStore:B}=(0,r().K8)((()=>({collectionStore:l.collectionStore(),collectionViewStore:l.collectionViewStore()})),[l]),T=(0,o(955450).K)({collectionContextStore:l}),P=(0,j().X)("notion_calendar_db_integration_non_time_views"),_=(0,o(637096).W)({collectionContextStore:l,entrypoint:"view_menu"}),L=(0,r().O$)(l.permissionScopesStore),F=(0,r().K8)((()=>null==R?void 0:R.isSyncedCollection()),[R]),E=(0,r().K8)((()=>{var e,t;const o=Boolean(null==R?void 0:R.isSystemCollection()),i=null===(e=l.collectionViewBlockStore())||void 0===e?void 0:e.id,n=null==R||null===(t=R.getParentBlockStore())||void 0===t?void 0:t.id,r=n&&i&&n===i;return(!(l.isFullScreenStore.state&&r)||!M)&&!o}),[l,R,M]),D=(0,r().K8)((()=>{var e;return(null===(e=l.collectionViewBlockStore())||void 0===e?void 0:e.hasMultipleOwnedOrLinkedCollections())??!1}),[l]),z=(0,r().uB)(void 0,o(663173).A),V=(0,i.useRef)(null),N=(0,i.useMemo)((()=>{const e=e=>{const t=null==R?void 0:R.getIconStore();t&&t.getValue()!==e&&(p().createAndCommit({userAction:"updateCollectionIcon",environment:s,canUndo:!0,perform:o=>{h().KY({store:t,value:e,transaction:o})}}),o(383594).I())},i=[...E?[{key:"view",render:e=>(0,x.jsx)(v().A,{...e,title:(0,x.jsx)(c().sA,{id:"database.source.viewDatabase.title",defaultMessage:"View database"}),icon:(0,x.jsx)(w().I,{icon:a().arrowDiagonalUpRightIcon})}),action:e=>{(0,o(239529).q)({environment:s,collectionContextStore:l,event:e.event,buttonPopupParent:t})}}]:[],...L.canConfigureCollection&&!F?[{key:"edit_name",render:e=>(0,x.jsx)(v().A,{...e,title:M&&D?(0,x.jsx)(c().sA,{id:"database.source.editDataSourceTitle.title",defaultMessage:"Edit data source title"}):(0,x.jsx)(c().sA,{id:"database.source.editTitle.title",defaultMessage:"Edit database title"}),icon:(0,x.jsx)(w().I,{icon:o(105819).pencilLineIcon})}),action:()=>{const e=null==R?void 0:R.getNameStore();e&&(f().selectAllText({environment:s,store:e,canSelectAllBlocks:!1}),t.close(),(0,u().X)({environment:s,collectionContextStore:l,action:"click_source_edit_title"}))}},...M?[{key:"edit_icon",render:e=>(0,x.jsx)(v().A,{...e,ref:e=>{V.current=e},title:(0,x.jsx)(c().sA,{...A.editIconTitle}),icon:(0,x.jsx)(w().I,{icon:o(424139).emojiFaceIcon})}),action:()=>{V.current&&R&&(0,k().sg)({node:V.current,currentTab:"emoji",fileUploadParams:{bucket:"secure",store:R},environment:s,intl:m,disabled:!1,fileUploadStore:z,onChange:e})}}]:[],...T&&P?[{key:"calendar",render:e=>(0,x.jsx)(o(187391).N,{...e}),action:()=>{_()}}]:[]]:[]];return i.filter((e=>null!==e))}),[E,L.canConfigureCollection,F,s,l,t,R,D,m,M,z,T,P,_]),W=(0,i.useMemo)((()=>({key:"show_title",render:e=>(0,x.jsx)(v().A,{...e,icon:(0,x.jsx)(w().I,{icon:o(566910).e}),title:M&&D?(0,x.jsx)(c().sA,{id:"database.source.hideDataSourceTitles.title",defaultMessage:"Hide data source titles"}):(0,x.jsx)(c().sA,{id:"database.source.hideTitle.title",defaultMessage:"Hide database title"})}),action:()=>{p().createAndCommit({userAction:"CollectionViewBlockSource.showTitleItem",environment:s,canUndo:!0,perform:e=>{if(!B)return;g().zA({stores:[B],update:{hide_linked_collection_name:!0},transaction:e});const t=l.collectionViewBlockStore();S&&t&&g().zA({stores:[t],update:{hide_inline_collection_name:!0},transaction:e})}}),t.close(),(0,u().X)({environment:s,collectionContextStore:l,action:"click_source_hide_title"})}})),[l,B,s,t,S,D,M]),H=(0,i.useMemo)((()=>[N.length>0?{key:"actions",render:e=>(0,x.jsx)(b().A,{...e}),items:N}:null,L.canConfigureBlock?{key:"show_title",render:e=>(0,x.jsx)(b().A,{...e,topBorder:!0}),items:[W]}:null].filter((e=>null!==e))),[N,W,L.canConfigureBlock]);return R?(0,x.jsx)(o(928600).A,{menuType:d?C().gu.ActionSheet:C().gu.Popup,children:(0,x.jsx)(y().Ay,{type:y().Oh.Vertical,onAccept:t.close,sections:H,initialFocus:void 0})}):null}))},299797:(e,t,o)=>{o.d(t,{A:()=>l});o(296540);var i=()=>o(340498),n=()=>o(554509),r=o(474848);const l=function(e){let{icon:t,title:l,description:a,cta:s,bodyWidth:c,iconSize:d=i().Ev.lg}=e;const u=(0,o(401497).IS)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",gap:12},icon:{width:d,height:d,color:e.icon.tertiary},body:{display:"flex",flexDirection:"column",textAlign:"center",maxWidth:c??300,gap:12},description:{textWrap:"balance",color:e.text.secondary}})),[c,d]);return(0,r.jsxs)("div",{style:u.container,children:[t(u.icon),(0,r.jsxs)("div",{style:u.body,children:[(0,r.jsx)(n().D,{colorName:"primary",styleName:"UIHeading-17px/Semibold",children:l}),(0,r.jsx)(n().D,{styleName:"UIRegular-14px/Regular",style:u.description,children:a})]}),s&&(0,r.jsx)("div",{children:s})]})}},344417:(e,t,o)=>{o.d(t,{u:()=>n});o(296540);const i={viewBox:"0 0 16 16",fittedViewBox:"1.97 1.97 12.46 12.46",svg:(0,o(474848).jsx)("path",{d:"M7.1 1.975a5.125 5.125 0 1 0 3.155 9.164l3.107 3.107a.625.625 0 1 0 .884-.884l-3.107-3.107A5.125 5.125 0 0 0 7.1 1.975M3.225 7.1a3.875 3.875 0 1 1 7.75 0 3.875 3.875 0 0 1-7.75 0"})},n=(0,o(340498).wt)("magnifyingGlassSmall",i)},412237:(e,t,o)=>{o.r(t),o.d(t,{aiFaceSmallIcon:()=>r,iconDefinition:()=>n});o(296540);var i=o(474848);const n={viewBox:"0 0 16 16",fittedViewBox:"2.89 1.43 11.63 12.81",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M7.204 1.93a3.47 3.47 0 0 0-4.097.39.625.625 0 1 0 .834.931 2.22 2.22 0 0 1 3.16.202.625.625 0 0 0 .944-.818 3.5 3.5 0 0 0-.84-.705m6.018.976A3.47 3.47 0 0 0 8.463 4.1l-5.077 8.476a.625.625 0 0 0 .437.938l4.41.715a.625.625 0 0 0 .2-1.234l-3.5-.568 4.602-7.685a2.22 2.22 0 0 1 3.822.02.625.625 0 1 0 1.08-.63 3.46 3.46 0 0 0-1.214-1.226m-7.83 2.105a1.094 1.094 0 1 0-.35 2.159 1.094 1.094 0 0 0 .35-2.159"}),(0,i.jsx)("path",{d:"M10.762 5.881a1.093 1.093 0 1 0-.35 2.159 1.093 1.093 0 0 0 .35-2.159"})]})},r=(0,o(340498).wt)("aiFaceSmall",n)},525884:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,infoCircleIcon:()=>r});o(296540);var i=o(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M8.65 8.25a.625.625 0 1 0 0 1.25h.725v3.25H8.65a.625.625 0 1 0 0 1.25h2.7a.625.625 0 1 0 0-1.25h-.725V8.875A.625.625 0 0 0 10 8.25zM10.7 6.3a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,i.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},r=(0,o(340498).wt)("infoCircle",n)},637096:(e,t,o)=>{o.d(t,{W:()=>d});var i=o(296540),n=()=>o(484714),r=()=>o(56366),l=()=>o(40970),a=()=>o(765957),s=()=>o(645200),c=()=>o(583238);function d(e){const{collectionContextStore:t,entrypoint:o}=e,d=(0,n().v3)(),u=(0,r().O$)(a().AppStoreCurrentSpaceStore),g=(0,r().K8)((()=>(0,c().mX)()),[]);return(0,i.useCallback)((()=>{const e=t.collectionViewStore(),i=t.collectionStore(),n=null==i?void 0:i.getParentBlockStore();e&&i&&n&&u&&(l().tC(d,{is_calendar_connected:g,collection_id:i.id,collection_view_id:e.id,collection_view_block_id:n.id,entrypoint:o}),s().Op({environment:d,collectionViewStore:e,spaceStore:u,from:"openInCalendarButton"}))}),[d,t,u,g,o])}},637433:(e,t,o)=>{o.d(t,{Y:()=>n});o(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o(474848).jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25m2.817 4.808a.625.625 0 0 1 0 .884L10.884 10l1.933 1.933a.625.625 0 1 1-.884.884L10 10.884l-1.933 1.933a.625.625 0 1 1-.884-.884L9.116 10 7.183 8.067a.625.625 0 1 1 .884-.884L10 9.116l1.933-1.933a.625.625 0 0 1 .884 0"})},n=(0,o(340498).wt)("xMarkCircleFill",i)},641300:(e,t,o)=>{o.d(t,{Gr:()=>I,WE:()=>R,rC:()=>M});o(898992),o(581454),o(908872);var i=o(296540),n=()=>o(402014),r=()=>o(401497),l=()=>o(158359),a=()=>o(126158),s=()=>o(380048),c=()=>o(742117),d=()=>o(525884),u=()=>o(959013),g=()=>o(534177),h=()=>o(284371),f=()=>o(553965),p=()=>o(115512),x=()=>o(962730),m=()=>o(704152),v=()=>o(493823),y=()=>o(958846),w=()=>o(554509),S=()=>o(73332),k=()=>o(859428),b=o(474848);const C=14,j=16,I=C+j,A=24;function M(e){let{columnRenderInfo:t,theme:o,containerMarginTop:i}=e;return{container:{marginTop:i??17,tableLayout:"fixed",borderCollapse:"collapse",width:"100%",minWidth:t.reduce(((e,t)=>e+F(t.widthData)+A),0)},tableHeaderRow:{},paddingRowCell:{height:8}}}function R(e){let{columnRenderInfo:t,sortState:o,onSortStateChanged:n,showRowBorders:l,hideHeaderRow:a,hideHeaderRowPadding:s,renderRowChild:c,rows:d,onRowClick:u,renderNoRowsComponent:g,styles:h,getStyleForRow:f,extendToFullScreen:p,multiselect:x,allowHorizontalScroll:m,setStickyHeaderColumn:v,maxHeight:w,setStickyHeaderRow:S,loadMoreMethod:k}=e;const C=m?v??!0:void 0,j=(0,r().IS)((e=>({horizontalScrollContainer:{position:"relative",width:null!=p&&p.extendTableToFullWidthOffsetPx?`calc(100% + ${null==p?void 0:p.extendTableToFullWidthOffsetPx}px)`:"100%",display:"grid",overflow:"auto"},scrollableContainer:{maxHeight:w,position:"relative",display:"grid",overflowX:"auto",width:"100%"},table:C?{...h.container,minWidth:"100%",width:void 0}:h.container})),[h.container,C,w,null==p?void 0:p.extendTableToFullWidthOffsetPx]),I=(0,r().IS)((e=>({thead:{position:"sticky",zIndex:1}})),[]),A=(0,i.useCallback)((e=>{var t;const i=e.id===(null==o||null===(t=o.column)||void 0===t?void 0:t.id)&&!(null!=o&&o.sortAscending);n&&n({sortAscending:i,column:e})}),[o,n]),M=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("table",{style:j.table,children:[!a&&(0,b.jsx)("thead",{style:S?I.thead:void 0,children:(0,b.jsxs)("tr",{children:[t.map(((e,t)=>(0,b.jsx)(B,{index:t,column:e,sortState:o,handleSortableColumnClick:A,shouldShowSortIcon:0!==d.length,multiselect:x,setStickyHeaderColumn:C,setStickyHeaderRow:S,style:e.headerStyle},`header_${e.id}`))),null!=p&&p.rightPaddingPx?(0,b.jsx)(N,{width:null==p?void 0:p.rightPaddingPx,style:t[t.length-1].rowStyle}):null]})}),!s&&(0,b.jsx)("tbody",{children:(0,b.jsxs)("tr",{children:[t.map((e=>(0,b.jsx)("td",{style:h.paddingRowCell},`padding_row_${e.id}`))),null!=p&&p.rightPaddingPx?(0,b.jsx)("td",{style:h.paddingRowCell}):null]})}),(0,b.jsx)("tbody",{children:d.map((e=>(0,b.jsx)(T,{columns:t,onRowClick:u,rowChild:null==c?void 0:c(e),showRowBorders:l,row:e,getStyleForRow:f,multiselect:x,setStickyHeaderColumn:C,rightPaddingPx:null==p?void 0:p.rightPaddingPx},`${e.id}_row`)))}),d.length>0&&k&&(!m||"scroll"!==(null==k?void 0:k.type))?(0,b.jsx)("tfoot",{children:(0,b.jsx)(V,{columnLength:t.length,loadMoreMethod:k,showRowBorders:l,rightPaddingPx:null==p?void 0:p.rightPaddingPx,style:t[t.length-1].rowStyle})}):null]}),0===d.length&&g()]});return m?(0,b.jsxs)("div",{style:j.horizontalScrollContainer,children:[(0,b.jsxs)("div",{style:j.scrollableContainer,children:[M,w&&"scroll"===(null==k?void 0:k.type)&&(0,b.jsx)(y().A,{loading:!1,loadMoreOffsetThreshold:100,onLoadMore:k.onLoadMore})]}),!w&&"scroll"===(null==k?void 0:k.type)&&(0,b.jsx)(y().A,{loading:!1,loadMoreOffsetThreshold:100,onLoadMore:k.onLoadMore})]}):(0,b.jsx)("div",{style:{maxHeight:w,overflowY:S&&w?"auto":void 0,overflowX:S&&w?"hidden":void 0},children:M})}function B(e){let{column:t,index:o,sortState:n,handleSortableColumnClick:l,shouldShowSortIcon:s,multiselect:c,setStickyHeaderColumn:g,setStickyHeaderRow:p,style:m}=e;const[y,w]=(0,i.useState)(!1),I=0===o,A=t.id===(null==n?void 0:n.column.id),M=(0,r().IS)((e=>({th:{boxShadow:`\n\t\t\t\t\tinset 0 1px 0 ${e.tableDividerColor},\n\t\t\t\t\tinset 0 -1px 0 ${e.tableDividerColor}\n\t\t\t\t`,...p&&{position:"sticky",top:0,zIndex:3,background:e.modalBackground},...E(t),...g&&I&&{position:"sticky",zIndex:4,left:0,background:e.modalBackground,boxShadow:`\n\t\t\t\t\t\t\tinset -1px 0px 0px ${e.tableDividerColor},\n\t\t\t\t\t\t\tinset 0 1px 0 ${e.tableDividerColor},\n\t\t\t\t\t\t\tinset 0 -1px 0 ${e.tableDividerColor}\n\t\t\t\t\t\t`},height:32,...m},innerDiv:{display:"flex",alignItems:"center",height:"100%",minWidth:F(t.widthData),maxWidth:t.widthData.maxWidth},text:{fontSize:h().J.UISmall.desktop,fontWeight:h().Wy.regular,color:e.text.secondary,...h().RC},sortButton:{padding:5,margin:-5},sortIcon:{color:e.text.secondary,width:12,height:12,marginLeft:4,fill:"currentColor"},multiselectCheckbox:{color:e.selectLightGray[300],marginRight:j,opacity:null!=c&&c.header.isDisabled?.5:1},tooltipContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},tooltipIcon:{marginLeft:4,color:y?e.icon.secondary:e.icon.tertiary,height:16,width:16},tooltip:{width:380}})),[t,c,g,p,m,I,y]),R=()=>{if(n&&s&&A)return(0,a().m)({...M.sortIcon,...n.sortAscending&&{transform:"rotate(180deg)"}})},B={onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1)},T=t.headerInfoTooltip?(0,b.jsxs)("div",{style:M.tooltipContainer,children:[(0,b.jsx)("div",{style:M.text,children:t.headerTitle}),(0,b.jsx)(k().A,{textWrap:!0,style:M.tooltip,delayThreshold:0,render:e=>(0,b.jsx)("div",{...(0,f().A)(e,B),children:(0,d().infoCircleIcon)(M.tooltipIcon)}),renderTooltip:()=>t.headerInfoTooltip})]}):(0,b.jsx)("div",{style:M.text,children:t.headerTitle}),P=t.sortable?(0,b.jsx)(k().A,{placement:x().W.Bottom,disableTooltip:!t.shouldShowSortTooltip,renderTooltip:()=>A?(0,b.jsx)(u().sA,{id:"baseTable.hoverSortedHeaderCell",defaultMessage:"Reverse sort order"}):(0,b.jsx)(u().sA,{id:"baseTable.hoverSortableHeaderCell",defaultMessage:"Sort by this column"}),render:e=>(0,b.jsxs)(v().p,{size:"xs",style:M.sortButton,onClick:()=>l(t),...e,children:[T,R()]})}):T,_=void 0!==c&&0===o?(0,b.jsx)(S().T,{style:M.multiselectCheckbox,disabled:c.header.isDisabled,onClick:()=>c.header.onClick(),checked:c.header.isSelected,size:C,tapArea:{size:30}}):null;return(0,b.jsx)("th",{style:M.th,children:(0,b.jsxs)("div",{style:M.innerDiv,children:[_,P]})})}function T(e){let{row:t,columns:o,onRowClick:n,rowChild:l,showRowBorders:a,getStyleForRow:s,setStickyHeaderColumn:c,multiselect:d,rightPaddingPx:u}=e;const[g,h]=(0,i.useState)(!1),f=t.isClickable,p=(0,i.useCallback)((()=>h(!0)),[]),x=(0,i.useCallback)((()=>h(!1)),[]),m=(0,i.useCallback)((e=>{f&&void 0!==n&&_(e,(()=>n(t)))}),[f,n,t]),v=(0,r().IS)((e=>({row:{height:1,...f&&{cursor:"pointer"},...a&&{borderBottom:`1px solid ${e.tableDividerColor}`},...s&&s(t)}})),[f,a,s,t]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("tr",{onMouseLeave:x,onMouseEnter:p,style:v.row,onClick:m,children:[o.map(((e,i)=>(0,b.jsx)(P,{isRowHovered:g,isRowClickable:f,columnIndex:i,numColumns:o.length,data:t,column:e,multiselect:d,setStickyHeaderColumn:c,cellStyle:e.rowStyle},`cell_${t.id}_${e.id}`))),u?(0,b.jsx)(W,{style:o[o.length-1].rowStyle}):null]}),l&&(0,b.jsx)("tr",{style:v.row,children:(0,b.jsx)("td",{colSpan:o.length,children:l})})]})}function P(e){let{data:t,column:o,columnIndex:i,numColumns:n,isRowHovered:l,isRowClickable:a,multiselect:s,setStickyHeaderColumn:c,cellStyle:d}=e;const u=0===i,g=i===n-1,f=(0,r().IS)((e=>({td:{...E(o),height:"inherit",...u&&{borderRadius:(0,p().Nb)({topLeft:4,bottomLeft:4})},...g&&{borderRadius:(0,p().Nb)({topRight:4,bottomRight:4})},...c&&u&&{position:"sticky",zIndex:2,left:0,background:e.modalBackground,boxShadow:`inset -1px 0px 0px ${e.tableDividerColor}`},...d,...l&&a&&{background:"light"===e.mode?"#f8f8f7":e.palette.gray[30]}},innerDiv:{minWidth:F(o.widthData),maxWidth:o.widthData.maxWidth,fontSize:h().J.UIRegular.desktop,color:e.text.primary,minHeight:42,maxHeight:52,display:"flex",alignItems:"center",height:"100%"},multiselectCheckbox:{color:e.selectLightGray[300],marginRight:16,opacity:null!=s&&s.row.getDisabledState(t)?.5:1}})),[o,u,g,l,a,s,t,c,d]),x=Boolean(o.hasClickableContents)||!!o.computeClickableContents&&o.computeClickableContents(t),m=s&&u?(0,b.jsx)(S().T,{style:f.multiselectCheckbox,checked:s.row.getSelectedState(t),onClick:e=>{e.stopPropagation(),s.row.onClick(t)},disabled:s.row.getDisabledState(t),size:14,tapArea:{size:30}}):null;return(0,b.jsx)("td",{style:f.td,children:(0,b.jsxs)("div",{style:f.innerDiv,onClick:x?_:void 0,children:[m,o.renderCell({...t,isRowHovered:l})]})})}function _(e,t){(0,n().SQ)({event:e,context:n().y$.Click,callback:t})}const L={paddingLeft:A/2,paddingRight:A/2};function F(e){return"minWidth"in e?e.minWidth:e.width}function E(e){let t;return t="width"in e.widthData?{width:e.widthData.width}:{width:`${e.widthData.widthPercent}%`,minWidth:e.widthData.minWidth},{...L,...t}}function D(e){let{columnLength:t,onLoadMore:o,showRowBorders:i,hasNextPage:n}=e;const a=(0,r().IS)((e=>({row:{...i&&{borderBottom:`1px solid ${e.tableDividerColor}`}},container:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:4},sticky:{position:"sticky",left:0,display:"flex",justifyContent:"flex-start",alignItems:"center",gap:4},button:{display:"flex",alignItems:"center",height:30,borderRadius:i?0:6,whiteSpace:"break-spaces",fontSize:14,paddingRight:8},icon:{width:14,height:14,marginLeft:4,marginRight:6,fill:e.icon.tertiary},text:{color:e.text.tertiary}})),[i]);return!1===n?null:(0,b.jsx)("tr",{style:a.row,children:(0,b.jsx)("td",{colSpan:t,children:(0,b.jsx)("div",{style:a.container,children:(0,b.jsx)("div",{style:a.sticky,children:(0,b.jsxs)(m().A,{style:a.button,onClick:o,children:[(0,l().P)(a.icon),(0,b.jsx)("div",{style:a.text,children:(0,b.jsx)(u().sA,{id:"baseTable.loadMoreButton",defaultMessage:"Load more"})})]})})})})})}function z(e){let{columnLength:t,onLoadNext:o,onLoadPrevious:i,currentPage:n,finalPage:l,hasNextPage:a,hasPrevPage:d,showRowBorders:g,rightPaddingPx:h,style:f}=e;const p=(0,r().IS)((e=>({row:{...g&&{borderBottom:`1px solid ${e.tableDividerColor}`}},container:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:4},sticky:{position:"sticky",left:0,display:"flex",justifyContent:"flex-start",alignItems:"center",gap:4},button:{display:"flex",justifyContent:"center",alignItems:"center",height:30,width:30,borderRadius:g?0:6,whiteSpace:"break-spaces",fontSize:14},icon:{width:14,height:14,marginLeft:4,marginRight:6,fill:e.icon.secondary}})),[g]);return(0,b.jsxs)("tr",{style:p.row,children:[(0,b.jsx)("td",{colSpan:Boolean(h)?t:t-1,children:(0,b.jsx)("div",{style:p.container,children:(0,b.jsxs)("div",{style:p.sticky,children:[(0,b.jsx)(m().A,{ariaLabel:d?"Previous page":"No previous pages",style:p.button,onClick:i,disabled:!d,disabledFeedback:!d,children:(0,s().I)(p.icon)}),(0,b.jsx)(m().A,{ariaLabel:a?"Next page":"No more pages",style:p.button,onClick:o,disabled:!a,disabledFeedback:!a,children:(0,c().V)(p.icon)}),(0,b.jsx)(w().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:l?(0,b.jsx)(u().sA,{id:"baseTable.pages.currentPageWithFinalPageCount",defaultMessage:"Page {currentPage} of {finalPage}",values:{currentPage:n,finalPage:l}}):(0,b.jsx)(u().sA,{id:"baseTable.pages.currentPage",defaultMessage:"Page {currentPage}",values:{currentPage:n}})})]})})}),h?(0,b.jsx)(W,{style:f}):null]})}function V(e){let{columnLength:t,loadMoreMethod:o,showRowBorders:i,rightPaddingPx:n,style:r}=e;switch(o.type){case"scroll":return(0,b.jsx)(y().A,{loading:!1,loadMoreOffsetThreshold:100,onLoadMore:o.onLoadMore});case"button":return(0,b.jsx)(D,{columnLength:t,onLoadMore:o.onLoadMore,showRowBorders:i,hasNextPage:o.hasNextPage});case"pages":return(0,b.jsx)(z,{columnLength:t,showRowBorders:i,onLoadNext:o.onLoadNext,onLoadPrevious:o.onLoadPrevious,currentPage:o.currentPage,finalPage:o.finalPage,hasNextPage:o.hasNextPage,hasPrevPage:o.hasPrevPage,rightPaddingPx:n,style:r});default:return(0,g().HB)(o)}}function N(e){const t=(0,r().IS)((t=>({container:{position:"relative"},extender:{width:e.width,height:1},inner:{background:t.modalBackground,position:"absolute",top:0,left:0,right:0,bottom:-1,...e.style}})),[e.width,e.style]);return(0,b.jsxs)("th",{style:t.container,children:[(0,b.jsx)("div",{style:t.extender}),(0,b.jsx)("div",{style:t.inner})]})}function W(e){const t=(0,r().IS)((t=>({container:{position:"relative"},inner:{background:t.modalBackground,position:"absolute",top:0,left:0,right:0,bottom:-1,...e.style}})),[e.style]);return(0,b.jsx)("td",{style:t.container,children:(0,b.jsx)("div",{style:t.inner})})}},647702:(e,t,o)=>{o.d(t,{K:()=>g,d:()=>u});o(581454);var i=()=>o(221844),n=()=>o(792071),r=()=>o(519831),l=()=>o(869558),a=()=>o(496603),s=()=>o(921855),c=()=>o(630116),d=()=>o(269643);function u(e){const{environment:t,collectionStore:o,freezeTitle:u}=e,g=t.currentUser.id;if(!g)return;const h=function(e){var t,o;const{collectionStore:i,userId:n,spaceId:l,idCreator:c,propertyFilters:u,combinatorFilter:g,freezeTitle:h=!0}=e,f=i.getSchema(),p=Object.keys(f),x=null===(t=i.getModel())||void 0===t?void 0:t.parent_id;if(!x)return;const m=(0,a().Ul)(p,((e,t)=>"title"===e?-1:t)).map((e=>({property:e,visible:!0})));return{id:(0,d().D)(c,l,i.id),version:1,parent_id:x,parent_table:"block",alive:!0,space_id:l,created_by_id:n,created_by_table:"notion_user",last_edited_by_id:n,last_edited_by_table:"notion_user",type:"table",name:(0,s().r4)(null===(o=i.getModel())||void 0===o?void 0:o.getName(),i),format:{table_properties:m,table_wrap:!0,table_frozen_column_index:h?0:void 0,collection_pointer:{table:r().Vl,id:i.id,spaceId:l},collection_view_source:{type:"collection",id:i.id,spaceId:l},hide_linked_collection_name:!0,property_filters:u},query2:{sort:[],aggregations:[],filter:g},page_sort:[]}}({collectionStore:o,userId:t.currentUser.id,spaceId:o.getSpaceId(),idCreator:t.idCreator,propertyFilters:undefined,combinatorFilter:undefined,freezeTitle:u});if(!h)return;const f={table:l().Gy,id:h.id,spaceId:o.getSpaceId()},p=new(i().A)({name:"temporaryCache",isTemporaryData:!0});p.addCacheFallback(t.defaultRecordCache.inMemoryRecordCache),p.setModelAndRole({pointer:f,userId:g},n().Bj6.fromCollectionView(h),"editor");return new(c().pS)(t,{table:l().Gy,id:f.id},{inMemoryRecordCache:p})}function g(e){let{collectionContextStore:t,permissionScopes:o}=e;return!("collectionTypedView"!==t.contextType||!o.canConfigureBlock)||o.canConfigureCollection}},697650:(e,t,o)=>{o.d(t,{BN:()=>s,Qo:()=>c,xf:()=>d});var i=()=>o(56366),n=()=>o(416504),r=()=>o(792071),l=()=>o(959013),a=()=>o(46986);function s(e){var t;let{collectionStore:o,intl:i,isWorkflowsContainerWithCreationEnabled:n}=e;return(null==o||null===(t=o.getModel())||void 0===t?void 0:t.getEmptyTitlePlaceholder({intl:i,isWorkflowsContainerWithCreationEnabled:n,getRecordModel:o.getRecordModel}))??i.formatMessage(r().WBy.messages.newDatabase)}function c(e){var t;const{collectionStore:o,intl:i,isWorkflowsContainerWithCreationEnabled:r}=e;return(null==o||null===(t=o.getModel())||void 0===t?void 0:t.getRenderTitleWithPlaceholder({intl:i,isWorkflowsContainerWithCreationEnabled:r,getRecordModel:o.getRecordModel,userTimeZone:(0,n().P)()}))??s(e)}function d(e){const t=(0,l().tz)(),o=(0,a().x6)();return(0,i().K8)((()=>c({collectionStore:e,intl:t,isWorkflowsContainerWithCreationEnabled:o})),[e,t,o])}},769607:(e,t,o)=>{o.r(t),o.d(t,{aiFaceFillIcon:()=>r,iconDefinition:()=>n});o(296540);var i=o(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"3.9 2.27 13.75 15.12",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M9.112 2.863a4.17 4.17 0 0 0-4.92.468.875.875 0 0 0 1.167 1.304 2.42 2.42 0 0 1 3.44.22.875.875 0 0 0 1.322-1.146 4.2 4.2 0 0 0-1.01-.846m1.248 2.563a4.167 4.167 0 0 1 7.173.037.875.875 0 1 1-1.511.883 2.417 2.417 0 0 0-4.16-.02l-5.21 8.697 3.828.62a.875.875 0 0 1-.28 1.728l-5.102-.827a.875.875 0 0 1-.61-1.313zM6.51 9.204a1.416 1.416 0 1 0 .452-2.795 1.416 1.416 0 0 0-.453 2.795"}),(0,i.jsx)("path",{d:"M12.72 10.21a1.416 1.416 0 1 0 .453-2.795 1.416 1.416 0 0 0-.453 2.795"})]})},r=(0,o(340498).wt)("aiFaceFill",n)},865636:(e,t,o)=>{o.r(t),o.d(t,{WorkflowAdvanced:()=>to});var i=o(296540),n=()=>o(484714),r=()=>o(56366),l=()=>o(401497),a=()=>o(84817),s=()=>o(414834),c=()=>o(564037),d=(o(898992),o(354520),()=>o(915671)),u=()=>o(959013),g=()=>o(534177),h=()=>o(410930),f=()=>o(939740),p=()=>o(2143),x=()=>o(756279),m=()=>o(970585),v=()=>o(912749),y=()=>o(769607),w=()=>o(8980),S=()=>o(89924);const k=(0,u().YK)({views:{id:"workflows.advanced.modal.views",defaultMessage:"Views"},data:{id:"workflows.advanced.modal.data",defaultMessage:"Data sources"},preview:{id:"workflows.advanced.modal.preview",defaultMessage:"Preview"},createOrConnect:{id:"workflows.advanced.modal.createOrConnect",defaultMessage:"Create or connect"},scheduledTasks:{id:"workflows.advanced.modal.scheduledTasks",defaultMessage:"Scheduled tasks"},connections:{id:"workflows.advanced.modal.connections",defaultMessage:"Integrations"},agent:{id:"workflows.advanced.modal.agent",defaultMessage:"Agent"},allActivity:{id:"workflows.advanced.modal.allActivity",defaultMessage:"All activity"},newView:{id:"workflows.advanced.modal.newView",defaultMessage:"New view"},debug:{id:"workflows.advanced.modal.debug",defaultMessage:"Debug"},configure:{id:"workflows.advanced.modal.configure",defaultMessage:"Configure"},copyFunctionContents:{id:"workflowFunction.copyFunctionContents",defaultMessage:"Copy function contents"},save:{id:"workflowFunction.save",defaultMessage:"Save"},edit:{id:"workflowFunction.edit",defaultMessage:"Edit function"},cancel:{id:"workflowFunction.cancel",defaultMessage:"Cancel"}});var b=()=>o(760217),C=()=>o(554509),j=()=>o(691093),I=o(474848);function A(e){const{environment:t,key:o,blockStore:i,currentNavigationState:n,targetNavigationState:r,title:l,icon:a,indentLevel:s=0}=e,d=(0,c().getIsWorkflowNavigationStateCurrent)({currentNavigationState:n,navigationState:r});return{key:o,render:e=>(0,I.jsx)(M,{...e,isCurrent:d,targetNavigationState:r,title:l,icon:a,indentLevel:s}),action:e=>{(0,j().showWorkflowEditor)({environment:t,parentStore:i,navigationState:r})}}}const M=i.forwardRef(((e,t)=>{const{isCurrent:i,targetNavigationState:n,title:r,icon:a,indentLevel:s,...c}=e,d=(0,l().IS)((e=>({currentButton:{background:e.sidebarItemSelectedBackground,borderRadius:6},button:{paddingLeft:o(805025).Qm+14*s,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}})),[s]);return(0,I.jsx)(b().A,{...c,ref:t,style:{...d.button,...i?d.currentButton:{}},title:(0,I.jsx)(C().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:r}),icon:a})}));M.displayName="WorkflowAdvancedButtonMenuItem";o(944114);var R=()=>o(274570),B=()=>o(340498);const T={viewBox:"0 0 20 20",fittedViewBox:"4.62 1.77 10.76 15.98",svg:(0,I.jsx)("path",{d:"M12.043 2.444a.625.625 0 0 0-1.13-.41l-6.17 8.55a.625.625 0 0 0 .507.99h3.098l-.401 5.5a.625.625 0 0 0 1.13.412l6.18-8.54a.625.625 0 0 0-.507-.991h-3.099z"})},P=(0,B().wt)("lightningFill",T);o(16280),o(672577),o(581454);var _=()=>o(145820),L=()=>o(342967),F=()=>o(630116),E=()=>o(614842);function D(e){if(!e)return[];const{modules:t=[]}=e;return t.filter((t=>function(e){const{workflow:t,module:o}=e;if("connections"!==E().d.getModuleConfigSection(o))return!1;if("config"===o.type){if(!t)return!1;const{modules:e}=t;if(!e)return!1;for(const o of e){const e=(0,L().v)(t,o.id);if(Object.keys(e).length>0)return!0}return!1}return!0}({workflow:e,module:t})))}function z(e){const{workflowStore:t,resultIds:o}=e;return o.map((e=>function(e){var t;const{workflowStore:o,runId:i}=e,n=function(e){const{workflowStore:t,runId:o}=e,i=t.getSpaceId();if(!i)throw new Error("No space id");return F().ty.createChildStore(t,{table:_().QR,id:o,spaceId:i})}({workflowStore:o,runId:i}),r=function(e){var t;const{runStore:o,workflowStore:i}=e,n=o.getTriggerId(),r=i.getData(),l=null==r||null===(t=r.triggers)||void 0===t?void 0:t.find((e=>e.id===n));return null==l?void 0:l.name}({runStore:n,workflowStore:o}),l=function(e){var t;const o=null===(t=e.getData())||void 0===t?void 0:t.workflow_version;return(0,g().O9)(o)?`v${o}`:void 0}(n),a=n.getStatus()??"pending",s=n.getFinishedAt();return{id:n.id,isClickable:!0,isLoading:!n.isReady(),runFinishedAt:s,runId:n.id,runName:r,runStatus:a,runTrigger:void 0,workflowVersion:l,threadId:null===(t=n.getData())||void 0===t?void 0:t.thread_id}}({workflowStore:t,runId:e})))}function V(e){const{blockStore:t,currentNavigationState:o,workflow:i,environment:n,intl:r}=e,l=function(e){return e?e.triggers??[]:[]}(i);if(0===l.length)return;const a=A({key:"all-activity",environment:n,blockStore:t,currentNavigationState:o,targetNavigationState:{type:"runs"},title:r.formatMessage(k.allActivity),icon:(0,I.jsx)(w().I,{size:"default",color:"secondary",icon:R().clockIcon})}),s=[];for(const c of l)s.push(A({key:`trigger-${c.id}`,environment:n,blockStore:t,currentNavigationState:o,targetNavigationState:{type:"trigger",id:c.id},title:c.name,icon:(0,I.jsx)(w().I,{size:"default",color:"secondary",icon:P})}));return{key:"automations",items:[a,...s],render:e=>(0,I.jsx)(S().A,{title:r.formatMessage(k.scheduledTasks),...e})}}const N=20;function W(e){const{module:t,size:o}=e,i=function(e){const{size:t=N}=e??{};return(0,l().IS)((e=>({icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:t,height:t,fill:e.icon.secondary,margin:0},yellow:{fill:e.icon.yellowPrimary},failedIcon:{width:16,height:16,fill:e.palette.red[400]}})),[t])}({size:o});return E().d.getIcon(t.type)(i.icon)}function H(e){const{blockStore:t,currentNavigationState:o,workflow:i,environment:n,intl:r}=e,l=D(i);if(0===l.length)return;return{key:"connections",items:l.map((e=>A({key:e.id,environment:n,blockStore:t,currentNavigationState:o,targetNavigationState:{type:"module",id:e.id},title:E().d.getName(e,r),icon:(0,I.jsx)(W,{blockStore:t,module:e})}))),render:e=>(0,I.jsx)(S().A,{title:r.formatMessage(k.connections),...e})}}var O=()=>o(617668),$=()=>o(686526),Y=()=>o(59400),K=()=>o(406699),U=()=>o(811979),X=()=>o(187820),G=()=>o(16006),Q=()=>o(780054),q=()=>o(175116),Z=()=>o(525432);function J(e){const{blockStore:t,previewCollectionContextStore:o,currentNavigationState:i,environment:n,intl:r}=e;return{key:"data",items:[...t.getOwnedAndLinkedCollectionStores().map((e=>A({key:e.id,environment:n,blockStore:t,currentNavigationState:i,targetNavigationState:{type:"database",id:e.id},title:(0,I.jsx)(G().A,{store:e,style:{fontFamily:"inherit",fontSize:"inherit",fontWeight:"inherit"}}),icon:(0,I.jsx)(X().B6,{icon:e.getIcon(),size:N,isEmptyPage:!1,disabled:!0,iconRecordCategory:"collection"})})))??[],{key:"create-or-connect",render:e=>(0,I.jsx)(U().A,{...e,popupType:K().z7.Popup,placementToOrigin:K().sx.Right,render:e=>(0,I.jsx)(q().RI,{value:o,children:(0,I.jsx)(Y().m$,{context:Z().Bd.ViewSettings,collectionContextStore:o,collectionSettingsStore:o.settingsStore,fullHeight:!1,handleAddItemClick:e.close})}),renderOrigin:t=>(0,I.jsx)(b().A,{...e,...t,title:(0,I.jsx)(C().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:r.formatMessage(k.createOrConnect)}),icon:(0,I.jsx)(w().I,{size:"default",color:"secondary",icon:O().plusIcon})})}),action:()=>{$().Ow({collectionContextStore:o,collectionSettingsStore:o.settingsStore}),$().R8({collectionSettingsStore:o.settingsStore,item:{type:"createViewSource",existingCollectionStore:void 0,createdCollectionRecordPointerMap:void 0}})}}],render:e=>(0,I.jsx)(S().A,{title:r.formatMessage(k.data),...e})}}var ee=()=>o(212727),te=()=>o(46986);function oe(e){const{blockStore:t,currentNavigationState:o,environment:i,intl:n}=e;if(!(0,te().Ke)())return;return{key:"debug",items:[A({key:"debug",environment:i,blockStore:t,currentNavigationState:o,targetNavigationState:{type:"debug"},title:n.formatMessage(k.debug),icon:(0,I.jsx)(w().I,{size:"default",color:"secondary",icon:ee().gearIcon})})],render:e=>(0,I.jsx)(S().A,{title:n.formatMessage(k.debug),...e})}}function ie(e){const{blockStore:t,previewCollectionContextStore:o}=e,s=(0,r().uB)(void 0,m().A),[b,C]=(0,i.useState)({size:300,speed:"animate"}),j=(0,n().v3)(),M=(0,u().tz)(),R=(0,l().DP)(),B=(0,c().useWorkflowNavigationState)(),T=(0,v()._)(t).workflowValue??d().ZB,P=(0,r().K8)((()=>{const e={environment:j,intl:M,theme:R,blockStore:t,previewCollectionContextStore:o,currentNavigationState:B,workflow:T},i=function(e){const{blockStore:t,currentNavigationState:o,environment:i,intl:n}=e;return{key:"agent",items:[A({key:"agent",environment:i,blockStore:t,currentNavigationState:o,targetNavigationState:{type:"agent"},title:n.formatMessage(k.agent),icon:(0,I.jsx)(w().I,{size:"default",color:"secondary",icon:y().aiFaceFillIcon})})],render:e=>(0,I.jsx)(S().A,{...e})}}(e);return[i,J(e),H(e),V(e),oe(e)].filter(g().O9)}),[j,M,R,t,o,B,T]);return(0,I.jsx)(h().z,{anchorToSide:"left",isOpen:!0,isResizable:!0,width:b,onWidthChange:C,children:(0,I.jsx)(a().Y1,{direction:"vertical",width:"fill",height:"fill",style:{minWidth:0},children:(0,I.jsx)(p().H,{type:x().A.Y,style:{padding:6},children:(0,I.jsx)(f().Ay,{type:f().Oh.Vertical,initialFocus:void 0,resetFocusOnMouseOut:!0,sections:P,store:s,disableKeyboard:!0})})})})}var ne=()=>o(324577),re=()=>o(179747),le=()=>o(847),ae=()=>o(725614),se=()=>o(975366),ce=()=>o(493823),de=()=>o(297872),ue=()=>o(623580);function ge(e){const{value:t,onSave:o,disabled:r,onChange:a}=e,[s,c]=(0,i.useState)(!1),[d,g]=(0,i.useState)(void 0),[h,f]=(0,i.useState)(!1),p=(0,n().v3)(),x=(0,l().IS)((e=>({container:{position:"relative",background:e.surface.page,borderRadius:12,border:`1px solid ${e.stroke.secondary}`},previewContainer:{padding:16,minHeight:120,cursor:r?"default":"pointer"},editorContainer:{minHeight:120},input:{whiteSpace:"pre-wrap",wordWrap:"break-word",fontFamily:"monospace",color:e.text.primary,margin:0,fontSize:14},controls:{position:"absolute",top:8,right:8,display:"flex",gap:8,zIndex:1},previewPlaceholder:{color:e.text.secondary,padding:16}})),[r]),m=(0,i.useCallback)((e=>{g(e.target.value),null==a||a(e.target.value)}),[a]),v=(0,i.useCallback)((()=>{if(void 0!==d)try{null==o||o(d),g(void 0),c(!1)}catch(e){console.error(e)}}),[o,d]),y=(0,i.useCallback)((()=>{g(void 0),c(!1)}),[]),w=(0,i.useCallback)((()=>{c(!0),g(t)}),[t]),S=(0,i.useCallback)((()=>{w()}),[w]),k=(0,i.useCallback)((()=>{f(!0),ae().clear({environment:p})}),[p]),b=(0,i.useCallback)((()=>{f(!1)}),[]),C=(0,i.useCallback)((e=>{"Enter"!==e.key&&" "!==e.key||S()}),[S]);return(0,I.jsx)(de().A,{capture:h,debugName:"SimpleWorkflowMarkdownEditor",render:()=>(0,I.jsxs)("div",{style:x.container,children:[(0,I.jsx)("div",{style:x.controls,children:s?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(ce().p,{onClick:y,children:(0,I.jsx)(u().sA,{defaultMessage:"Discard",id:"workflow.markdownEditor.discard"})}),(0,I.jsx)(ce().p,{onClick:v,children:(0,I.jsx)(u().sA,{defaultMessage:"Save",id:"workflow.markdownEditor.save"})})]}):(0,I.jsx)(ce().p,{onClick:w,children:(0,I.jsx)(u().sA,{defaultMessage:"Edit",id:"workflow.markdownEditor.edit"})})}),s?(0,I.jsx)("div",{style:x.editorContainer,children:(0,I.jsx)(ue().A,{value:void 0!==d?d:t,onChange:m,textarea:!0,style:x.input,autosize:!0,autosizeMinHeight:120,onFocus:k,onBlur:b})}):(0,I.jsx)("div",{style:x.previewContainer,onClick:S,onKeyDown:C,role:"button",tabIndex:0,children:t?(0,I.jsx)(se().hu,{markdown:t}):(0,I.jsx)("div",{style:x.previewPlaceholder,children:(0,I.jsx)(u().sA,{defaultMessage:"No instructions",id:"workflow.agent.noInstructions"})})})]})})}function he(e){const{icon:t,label:o,right:i,description:n}=e,r=(0,l().IS)((e=>({outer:{minHeight:76},divider:{borderBottom:`0.5px solid ${e.stroke.primary}`,width:"100%",height:0}})),[]);return(0,I.jsxs)(a().Y1,{direction:"vertical",padding:"0 0 0 24px",children:[(0,I.jsxs)(a().Y1,{direction:"horizontal",gap:"auto",align:"center",padding:`24px 24px ${n?"0":"24px"} 0px`,style:r.outer,children:[(0,I.jsxs)(a().Y1,{direction:"horizontal",align:"center-left",gap:12,children:[t,o?(0,I.jsx)(C().D,{styleName:"UITitle-Medium-20px/Semibold",children:o}):null]}),i?(0,I.jsx)(a().Y1,{direction:"horizontal",width:"hug",align:"center-right",gap:4,children:i}):null]}),n?(0,I.jsx)(a().Y1,{direction:"horizontal",padding:"0 0 24px 0",children:(0,I.jsx)(C().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:n})}):null,(0,I.jsx)("div",{style:r.divider})]})}function fe(e){const{workflow:t,blockStore:o}=e;return(0,I.jsxs)(a().Y1,{direction:"vertical",width:"fill",height:"fill",children:[(0,I.jsx)(he,{icon:(0,I.jsx)(w().I,{size:"default",color:"secondary",icon:P}),label:t.name??"Untitled Agent"}),(0,I.jsx)(a().Y1,{direction:"vertical",gap:16,padding:24,height:"fill",style:{overflowY:"auto"},children:(0,I.jsx)(pe,{workflow:t,blockStore:o})})]})}function pe(e){const{workflow:t,blockStore:o}=e,r=(0,n().v3)(),{workflowPointer:l,threadStore:s}=(0,v()._)(o),c=(0,i.useCallback)((e=>{if(!l)throw new Error("No workflow pointer");le().saveInstructions({environment:r,workflowPointer:l,threadStore:s,instructions:e,blockStore:o})}),[o,r,s,l]);return(0,I.jsxs)(a().Y1,{direction:"vertical",gap:8,width:"fill",children:[(0,I.jsx)("h3",{style:{margin:0},children:(0,I.jsx)(u().sA,{defaultMessage:"Instructions",id:"workflow.agent.instructions.title"})}),(0,I.jsx)(ge,{value:t.instructions||"",onSave:c})]})}var xe=()=>o(412237),me=()=>o(8741),ve=()=>o(519831),ye=()=>o(620689),we=()=>o(647702),Se=()=>o(286367),ke=()=>o(646447),be=()=>o(843189),Ce=()=>o(179030),je=()=>o(106412);function Ie(e){const{blockStore:t,databaseId:o}=e,s=(0,n().v3)(),c=(0,i.useMemo)((()=>F().md.createChildStore(t,{table:ve().Vl,id:o,spaceId:t.getSpaceId()})),[o,t]),[d,u]=(0,i.useState)(void 0),g=(0,l().IS)((e=>({scroller:{flex:1}})),[]),h=(0,r().K8)((()=>ye().u5(s)),[s]);return(0,I.jsx)(je().tx,{value:{isPreviewing:!0,disablePageLinks:!0,disableAllPointerEvents:!1,hideTableAggregationRow:!0,disableEditingName:!0,hideViewBlockSource:!0,location:"app_builder",enableHorizontalScroll:!1},children:(0,I.jsxs)(a().Y1,{direction:"vertical",width:"fill",height:"fill",style:{minWidth:0,minHeight:0},children:[(0,I.jsx)(Ae,{collectionContextStore:d,collectionStore:c}),c?(0,I.jsx)(p().H,{type:x().A.All,style:g.scroller,preventType:h,children:(0,I.jsx)(ke().dN,{store:t,overridePaddingLeft:24,overridePaddingRight:0,isFullScreen:!0,hideViewTabBar:!0,productUseCase:"preview_collection",disabled:!1,headerAllowedActions:["filter","sort","search","viewSettings","addItem"],headerActionsBehavior:"hidden",setCollectionContextStore:e=>{const o=(0,we().d)({environment:s,collectionStore:c,collectionViewBlockStore:t,freezeTitle:!1});e.setContext({type:"collectionSettings",collectionViewBlockStore:t,collectionStore:c,collectionViewStore:o}),u(e)}})}):(0,I.jsx)(a().Y1,{padding:24,children:(0,I.jsx)(Ce().l,{tint:"yellow",label:"Couldn't get collection store from database module",display:"inline"})})]})})}function Ae(e){const{collectionContextStore:t,collectionStore:o}=e,i=(0,r().r6)((()=>!1),[]),n=(0,r().K8)((()=>o.getIcon()),[o]);return(0,I.jsx)(he,{icon:(0,I.jsx)(X().B6,{icon:n,size:N,isEmptyPage:!1,disabled:!0,iconRecordCategory:"collection"}),label:t?(0,I.jsx)(Se().D,{collectionContextStore:t,showHoverActionsStore:i,addViewButton:void 0,isHovered:!1,titleStyle:{fontFamily:"inherit",fontSize:"inherit",fontWeight:"inherit",margin:0,padding:0}}):(0,I.jsx)(G().A,{store:o,style:{fontFamily:"inherit",fontSize:"inherit",fontWeight:"inherit"}}),right:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(be().E,{disabled:!0,iconLeading:me().arrowDiagonalUpRightSmallIcon,children:(0,I.jsx)(u().sA,{id:"workflows.database.open",defaultMessage:"Open"})}),(0,I.jsx)(be().E,{disabled:!0,iconLeading:xe().aiFaceSmallIcon,children:(0,I.jsx)(u().sA,{id:"workflows.database.chat",defaultMessage:"Chat"})})]})})}var Me=()=>o(574387);function Re(e){const{workflow:t,workflowStore:o,blockStore:i,module:n}=e;return(0,I.jsxs)(a().Y1,{padding:24,width:"fill",height:"fill",style:{overflowY:"auto"},children:[!1,(0,I.jsx)(Me().El,{moduleId:n.id,workflow:t,workflowStore:o,blockStore:i},n.id)]})}var Be=()=>o(395361),Te=()=>o(604995),Pe=()=>o(416504),_e=()=>o(187174),Le=()=>o(973647),Fe=()=>o(449506),Ee=()=>o(118078),De=()=>o(346923);function ze(e,t){const o=(0,i.useRef)(),n=(0,i.useRef)(null),[r,l]=(0,i.useState)(t),a=(0,i.useCallback)((()=>l((e=>null===e?t:null))),[t]);function s(){var e;null===(e=o.current)||void 0===e||e.call(o)}const c=(0,i.useCallback)((()=>{n.current&&clearInterval(n.current)}),[]),d=(0,i.useCallback)((()=>{c(),n.current=setInterval(s,t)}),[c,t]);return(0,i.useEffect)((()=>{o.current=e}),[e]),(0,i.useEffect)((()=>(n.current&&clearInterval(n.current),null!==r&&(n.current=setInterval(s,r)),c)),[r,c]),{toggle:a,clear:c,reset:d}}var Ve=()=>o(227440),Ne=()=>o(203066),We=()=>o(153321);const He={opacity:0,height:0},Oe={opacity:1,height:"auto"},$e=24,Ye=12;function Ke(e){const{children:t,isOpen:o,relativePaddingLeft:n=0,relativePaddingRight:r=0}=e,s=$e+n,c=$e+r,[d]=(0,i.useState)(o),u=(0,l().IS)((e=>({divider:{borderBottom:`1px solid ${e.stroke.secondary}`,marginLeft:$e}})),[]);return(0,I.jsx)(Ne().N,{children:o?(0,I.jsxs)(We().P.div,{initial:d?Oe:He,animate:Oe,exit:He,transition:{duration:.2},children:[(0,I.jsx)(a().Y1,{direction:"horizontal",gap:6,padding:`${Ye}px ${c}px ${Ye}px ${s}px`,children:t}),(0,I.jsx)("div",{style:u.divider})]}):null})}var Ue=()=>o(42583),Xe=()=>o(56394),Ge=()=>o(377586),Qe=()=>o(700250),qe=()=>o(928600),Ze=()=>o(427711),Je=()=>o(722872);function et(e){const{dateRange:t,onChange:o}=e,{isMobile:r}=(0,n().Y0)(),l=(0,i.useMemo)((()=>({disableMenuWrap:!0,hideDateInputMenuItems:!0,onUpdate:e=>{if(e.error)return o({starting:void 0,ending:void 0}),null;o({...t,...e.value})},title:(0,I.jsx)("div",{children:"Title"}),value:t})),[t,o]),a=(0,i.useCallback)((()=>{o({starting:void 0,ending:void 0})}),[o]);return(0,I.jsxs)(qe().A,{menuType:r?Je().gu.Modal:Je().gu.Popup,children:[(0,I.jsx)(S().A,{children:(0,I.jsx)(Ze().A,{...l})}),(0,I.jsx)(S().A,{topBorder:!0,children:(0,I.jsx)(b().A,{focused:!1,onClick:a,title:(0,I.jsx)(u().sA,{id:"workflowRuns.dateFilter.clear",defaultMessage:"Clear"})})})]})}function tt(e){const{dateRange:t,isActive:o,onChange:i}=e,{isMobile:r}=(0,n().Y0)(),a=(0,l().IS)((e=>({icon:{fill:o?e.icon.uiBluePrimary:e.icon.secondary,height:"auto",marginInlineEnd:6,width:16},pillInnerStyle:{borderColor:o?void 0:e.stroke.secondary}})),[o]);return(0,I.jsx)(K().Ay,{alignmentToOrigin:Qe().MY.Start,placementToOrigin:Qe().UV.Bottom,disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:4,popupType:r?Ge().n.BottomSheet:Ge().n.Popup,render:()=>(0,I.jsx)(et,{dateRange:t,onChange:i}),renderOrigin:e=>(0,I.jsx)(Xe().A,{...e,icon:(0,Ue().D)(a.icon),innerStyle:a.pillInnerStyle,on:o,title:"Date"}),trapFocus:!0})}var ot=()=>o(209969),it=()=>o(73332);function nt(e){let{selectedStatuses:t,onChange:o}=e;const{isMobile:r}=(0,n().Y0)(),a=(0,l().IS)((e=>({checkboxIcon:{fill:e.icon.primary}})),[]),s=(0,i.useCallback)((e=>{o(t.includes(e)?t.filter((t=>t!==e)):[...t,e])}),[o,t]),c=(0,i.useCallback)((()=>o([])),[o]),d=(0,i.useMemo)((()=>(0,g().uv)(rt).map((e=>({key:`status-${e}`,action:()=>s(e),render:o=>(0,I.jsx)(b().A,{...o,icon:(0,I.jsx)(it().T,{checked:t.includes(e),size:14,onClick:()=>s(e),style:a.checkboxIcon}),title:(0,I.jsx)(C().D,{children:rt[e].label})})})))),[t,a.checkboxIcon,s]);return(0,I.jsx)(qe().A,{menuType:r?Je().gu.Modal:Je().gu.Popup,children:(0,I.jsx)(f().Ay,{type:f().Oh.Vertical,initialFocus:0,sections:[{key:"statuses",items:d,render:e=>(0,I.jsx)(S().A,{...e})},{key:"clear",items:[{key:"clear",action:c,render:e=>(0,I.jsx)(b().A,{...e,onClick:c,title:(0,I.jsx)(u().sA,{id:"workflowRuns.statusFilter.clear",defaultMessage:"Clear selection"})})}],render:e=>(0,I.jsx)(S().A,{...e,topBorder:!0})}]})})}const rt={pending:{id:"pending",label:(0,I.jsx)(u().sA,{id:"workflowRuns.statusFilter.pending",defaultMessage:"Pending"})},running:{id:"running",label:(0,I.jsx)(u().sA,{id:"workflowRuns.statusFilter.running",defaultMessage:"Running"})},success:{id:"success",label:(0,I.jsx)(u().sA,{id:"workflowRuns.statusFilter.success",defaultMessage:"Success"})},failure:{id:"failure",label:(0,I.jsx)(u().sA,{id:"workflowRuns.statusFilter.failure",defaultMessage:"Failure"})}};function lt(e){let{onChange:t,selectedStatuses:o}=e;const{isMobile:i}=(0,n().Y0)(),r=Boolean(o.length),a=(0,l().IS)((e=>({icon:{fill:r?e.icon.uiBluePrimary:e.icon.secondary,height:"auto",marginInlineEnd:6,width:16},pillInnerStyle:{borderColor:r?void 0:e.stroke.secondary}})),[r]);return(0,I.jsx)(K().Ay,{alignmentToOrigin:Qe().MY.Start,placementToOrigin:Qe().UV.Bottom,disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:4,popupType:i?Ge().n.BottomSheet:Ge().n.Popup,render:()=>(0,I.jsx)(nt,{selectedStatuses:o,onChange:t}),renderOrigin:e=>(0,I.jsx)(Xe().A,{...e,icon:(0,ot().checkmarkCircleFillIcon)(a.icon),innerStyle:a.pillInnerStyle,on:r,title:"Status"}),trapFocus:!0})}function at(e){const{defaultFilterState:t,onChange:o}=e,[n,r]=(0,i.useReducer)(((e,t)=>{switch(t.type){case"setStatuses":return{...e,statuses:t.value};case"setDateRange":return{...e,dateRange:t.value};default:return e}}),t??{dateRange:{starting:void 0,ending:void 0},statuses:void 0});(0,i.useEffect)((()=>o(n)),[n,o]);const l=Boolean(n.dateRange.starting||n.dateRange.ending),a=(0,i.useCallback)((e=>{r({type:"setDateRange",value:e})}),[r]),s=(0,i.useCallback)((e=>{r({type:"setStatuses",value:e})}),[r]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(tt,{dateRange:n.dateRange,isActive:l,onChange:a}),(0,I.jsx)(lt,{selectedStatuses:n.statuses??[],onChange:s})]})}var st=()=>o(299797),ct=()=>o(864943);function dt(e){let{onRefreshClick:t}=e;const o=(0,l().IS)((e=>({container:{display:"flex",justifyContent:"center",alignItems:"flex-start",paddingBlockStart:96,height:"100%"}})),[]);return(0,I.jsx)("div",{style:o.container,children:(0,I.jsx)(st().A,{icon:R().clockIcon,title:(0,I.jsx)(u().sA,{defaultMessage:"No runs yet",id:"workflowRuns.noRunsYet"}),description:(0,I.jsx)(u().sA,{defaultMessage:"App runs will appear here",id:"workflowRuns.noRunsYetDescription"}),cta:(0,I.jsx)(ct().A,{size:"lg",onClick:t,children:(0,I.jsx)(u().sA,{defaultMessage:"Refresh",id:"workflowRuns.refreshButton"})})})})}var ut=()=>o(765974),gt=()=>o(676920);function ht(e){const t=(0,l().IS)((()=>({container:{display:"flex",justifyContent:"center",alignItems:"flex-start",paddingBlockStart:96,height:"100%"},errorContainer:{marginBlockStart:8}})),[]);return(0,I.jsx)("div",{style:t.container,children:(0,I.jsx)(st().A,{description:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(u().sA,{defaultMessage:"It looks like something went wrong. Please try refreshing the page.",id:"workflowRuns.errorLoadingRunsDescription"}),(0,I.jsx)(C().D,{styleName:"Micro-10px/Regular",style:t.errorContainer,children:(0,I.jsx)(gt().Y,{...e})})]}),icon:ut().exclamationMarkTriangleFillIcon,title:(0,I.jsx)(u().sA,{defaultMessage:"Error loading runs",id:"workflowRuns.errorLoadingRunsTitle"})})})}var ft=()=>o(331542);function pt(){const e=(0,l().IS)((()=>({container:{display:"flex",justifyContent:"center",alignItems:"flex-start",paddingBlockStart:96,height:"100%"}})),[]);return(0,I.jsx)("div",{style:e.container,children:(0,I.jsx)(st().A,{description:"",title:"",icon:()=>(0,I.jsx)(ft().A,{size:"lg"})})})}var xt=()=>o(637433),mt=()=>o(496603),vt=()=>o(641300),yt=()=>o(710149),wt=()=>o(566468),St=()=>o(125565),kt=()=>o(447587),bt=()=>o(244641);function Ct(e){const{timestamp:t}=e,[o,n]=(0,i.useState)(bt().c9.fromMillis(t).toRelative()),r=(0,i.useMemo)((()=>{const e=bt().c9.now(),o=bt().c9.fromMillis(t),i=e.diff(o);return i.as("seconds")<60?1e3:i.as("minutes")<60?6e4:i.as("hours")<24?36e5:864e5}),[t]),l=(0,i.useCallback)((()=>{n(bt().c9.fromMillis(t).toRelative())}),[t]);return(0,i.useEffect)((()=>{n(bt().c9.fromMillis(t).toRelative())}),[t]),ze(l,r),(0,I.jsx)("time",{dateTime:bt().c9.fromMillis(t).toISO(),children:o})}function jt(e){const{onRowClick:t,searchResponse:o,workflowStore:n}=e,a=function(){const e=(0,l().IS)((e=>({headerStyle:{boxShadow:`inset 0 -1px 0 ${e.tableDividerColor}`},headerTitle:{fontSize:14}})),[]);return(0,i.useMemo)((()=>[{id:"run",headerStyle:e.headerStyle,headerTitle:(0,I.jsx)("span",{style:e.headerTitle,children:(0,I.jsx)(u().sA,{defaultMessage:"Run",id:"workflowActivityTable.runColumn.header"})}),renderCell:e=>e.isLoading?(0,I.jsx)(wt().mf,{includeByline:!0,includeIcon:!0}):(0,I.jsx)(wt().s7,{byline:e.workflowVersion,containerStyles:{alignItems:"start"},icon:(0,I.jsx)(At,{status:e.runStatus}),iconMargin:10,title:e.runName}),sortable:!1,widthData:{minWidth:50,widthPercent:40}},{id:"completed",headerStyle:e.headerStyle,headerTitle:(0,I.jsx)("span",{style:e.headerTitle,children:(0,I.jsx)(u().sA,{defaultMessage:"Completed",id:"workflowActivityTable.completedColumn.header"})}),renderCell:e=>e.isLoading?(0,I.jsx)(Tt,{maxLines:1}):e.runFinishedAt?(0,I.jsx)(Bt,{colorName:"tertiary",children:(0,I.jsx)(Ct,{timestamp:e.runFinishedAt})}):null,sortable:!1,widthData:{minWidth:50,widthPercent:20}}]),[e.headerStyle,e.headerTitle])}(),s=(0,l().IS)((e=>(0,vt().rC)({columnRenderInfo:a,theme:e,containerMarginTop:0})),[a]),c=o.results,d=(0,r().K8)((()=>z({resultIds:c,workflowStore:n})),[c,n]);return(0,I.jsx)(vt().WE,{columnRenderInfo:a,hideHeaderRowPadding:!0,onRowClick:t,renderNoRowsComponent:It,rows:d,showRowBorders:!0,styles:s})}function It(){return(0,I.jsxs)("div",{style:{alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",minHeight:"40vh"},children:[(0,I.jsx)("div",{children:(0,I.jsx)(St().A,{isSecondaryColor:!0,style:{fontWeight:500},children:(0,I.jsx)(u().sA,{defaultMessage:"No results",id:"workflowActivityTable.emptyTable.noResults"})})}),(0,I.jsx)(St().A,{isSecondaryColor:!0,children:(0,I.jsx)(u().sA,{defaultMessage:"Try different filters. Logs may take some time to show up.",id:"workflowActivityTable.emptyTable.noResultsHelpText"})})]})}function At(e){const{status:t}=e,o=(0,l().IS)((e=>({failedIcon:{fill:e.icon.uiRedPrimary},passedIcon:{fill:e.icon.greenPrimary},statusIcon:{marginTop:2,width:18,height:18}})),[]),n=(0,i.useMemo)((()=>"success"===t?{...o.statusIcon,...o.passedIcon}:"failure"===t?{...o.statusIcon,...o.failedIcon}:o.statusIcon),[t,o]);return"success"===t?(0,ot().checkmarkCircleFillIcon)(n):"failure"===t?(0,xt().Y)(n):"pending"===t||"running"===t?(0,I.jsx)(ft().A,{size:"sm",style:n}):void(0,g().HB)(t)}function Mt(e){return(0,mt().Et)(e)&&e>0?e:Rt}const Rt=2;function Bt(e){let{children:t,colorName:o,maxLines:i}=e;const n=(0,l().IS)((()=>({container:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"flex-start",padding:"8px 0",width:"100%"}})),[]);return(0,I.jsx)("div",{style:n.container,children:(0,I.jsx)(kt().A,{maxLines:Mt(i),children:(0,I.jsx)(C().D,{colorName:o,styleName:"UIRegular-14px/Regular",children:t})})})}function Tt(e){let{maxLines:t}=e;const o=(0,l().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:8,justifyContent:"center",padding:"8px 0",width:"100%"},line:{borderRadius:4,height:14,width:"100%"},lastLine:{borderRadius:4,height:14,width:"80%"}})),[]);return(0,I.jsx)("div",{style:o.container,children:Array.from({length:Mt(t)}).map(((e,t,i)=>{const n=t===i.length-1;return(0,I.jsx)(yt().A,{style:n?o.lastLine:o.line},t)}))})}function Pt(e){const{handleRowClick:t,hasSearchTerm:o,refetchRuns:i,workflowRunsState:n,workflowStore:r}=e;if("idle"===n.status||"pending"===n.status)return(0,I.jsx)(pt,{});if("rejected"===n.status)return(0,I.jsx)(ht,{error:n.error});if("resolved"===n.status){if(Le().Q.isFail(n.value)){const e=n.value.error,t=e?`${e.name}${e.debugMessage?`: ${e.debugMessage}`:""}`:void 0;return(0,I.jsx)(ht,{message:t,errorId:null==e?void 0:e.errorId})}const e=n.value.value.runIds;return(0,g().O9)(e)&&(e.length>0||o)?(0,I.jsx)(a().Y1,{direction:"vertical",width:"fill",height:"fill",padding:"16px",style:{overflowY:"auto"},children:(0,I.jsx)(jt,{onRowClick:t,searchResponse:{results:e},workflowStore:r})}):(0,I.jsx)(dt,{onRefreshClick:i})}(0,g().HB)(n)}const _t={viewBox:"0 0 16 16",fittedViewBox:"2.57 0.97 10.86 13.25",svg:(0,I.jsx)("path",{d:"M8.715 1.077a.626.626 0 0 0-.863.868l.08.098L9.27 3.375H8A5.425 5.425 0 1 0 13.425 8.8a.625.625 0 0 0-1.25 0A4.175 4.175 0 1 1 8 4.625h1.27L7.942 5.96l-.08.097a.626.626 0 0 0 .966.784l2.395-2.406.077-.095a.624.624 0 0 0-.08-.788L8.813 1.157z"})},Lt=(0,B().wt)("arrowCircleSpinClockwiseSmall",_t);var Ft=()=>o(112412),Et=()=>o(285790),Dt=()=>o(344417),zt=()=>o(145214),Vt=()=>o(859428);function Nt(e){let{value:t,onChange:o,style:n}=e;const[r,a]=(0,i.useState)(!1),s=(0,l().IS)((e=>({iconButton:{width:17,height:void 0,fill:e.icon.secondary},input:{fontSize:14,lineHeight:1,paddingRight:4,color:e.text.primary,marginBottom:1},ignoreArea:{display:"flex",alignItems:"center",overflow:"hidden"}})),[]),c=(0,i.useCallback)((()=>{a((e=>!e))}),[]),d=(0,i.useCallback)((()=>{o(""),a(!1)}),[o]),g=(0,i.useCallback)((()=>{t||a(!1)}),[t]),h=(0,i.useCallback)((e=>{27===e.keyCode&&d()}),[d]),f=(0,i.useCallback)((e=>{o(e.target.value)}),[o]),p=(0,u().tz)().formatMessage({id:"workflowRuns.searchInput.tooltip",defaultMessage:"Search"});return(0,I.jsx)(Vt().A,{renderTooltip:()=>p,render:e=>(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Et().A,{...e,icon:Dt().u,iconStyle:s.iconButton,onClick:c,ariaLabel:p}),(0,I.jsx)(zt().A,{visible:r,animate:{width:150,opacity:1},initial:{width:0,opacity:0},exit:{width:0,opacity:0},children:(0,I.jsx)(de().A,{debugName:"SearchInput",capture:r,allowEsc:!0,render:e=>(0,I.jsx)("div",{...e,style:s.ignoreArea,children:(0,I.jsx)(ue().A,{style:{...s.input,...n},format:ue().C.Transparent,value:t,onChange:f,placeholder:"Search runs...",focusInitial:r,showClearButton:!0,onBlur:g,onCancel:d,onClearButtonClick:d,onKeyDown:h})})})})]})})}function Wt(e){const{hasFilterEnabled:t,onFilterClick:o,onRefreshClick:i,onSearchChange:n,searchTerm:r}=e,a=(0,u().tz)(),s=(0,l().IS)((e=>({icon:{fill:e.icon.secondary,height:void 0,width:17},filterIcon:{fill:t?e.icon.uiBluePrimary:e.icon.secondary,height:void 0,width:17}})),[t]);return(0,I.jsx)(he,{label:(0,I.jsx)(u().sA,{defaultMessage:"All activity",id:"workflowAdvanced.runs.header"}),icon:(0,I.jsx)(w().I,{size:"default",color:"secondary",icon:R().clockIcon}),right:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Et().A,{ariaLabel:a.formatMessage({defaultMessage:"Refresh",id:"workflowRuns.refreshButton"}),icon:Lt,iconStyle:s.icon,onClick:i}),(0,I.jsx)(Et().A,{ariaLabel:a.formatMessage({defaultMessage:"Filter",id:"workflowRuns.filterButton"}),icon:Ft().$,iconStyle:s.filterIcon,onClick:o}),(0,I.jsx)(Nt,{onChange:n,value:r??""})]})})}const Ht=3e4;function Ot(e){const{workflowStore:t,blockStore:o}=e,l=(0,n().v3)(),[s,c]=(0,i.useState)(!1),[d,g]=(0,r().K8)((()=>[t.id,t.getSpaceId()]),[t]),[h,f]=(0,i.useReducer)(((e,t)=>{switch(t.type){case"setSearchTerm":return{...e,searchTerm:t.value};case"setFilters":return{...e,dateRange:t.value.dateRange,statuses:t.value.statuses};default:return e}}),{dateRange:{starting:void 0,ending:void 0},searchTerm:"",statuses:void 0}),p=(0,De().l)(h),x=(0,i.useMemo)((()=>{var e;return Boolean(p.dateRange.starting||p.dateRange.ending||((null===(e=p.statuses)||void 0===e?void 0:e.length)??0)>0)}),[p]),m=(0,u().tz)(),v=(0,i.useMemo)((()=>{var e,t;if(!g)return;const o=null!==(e=p.dateRange.starting)&&void 0!==e&&e.start_date?(0,Te().HF)(p.dateRange.starting,(0,Pe().P)(),m.locale).startOf("day").toISO():void 0,i=null!==(t=p.dateRange.ending)&&void 0!==t&&t.start_date?(0,Te().HF)(p.dateRange.ending,(0,Pe().P)(),m.locale).endOf("day").toISO():void 0;return{containsSubstring:p.searchTerm,end:i,spaceId:g,start:o,statuses:p.statuses,workflowId:d}}),[g,p,m,d]),[y,w]=(0,_e().Yb)((async()=>{if(!Ve().A.state.online||!v)return Le().Q.success({runIds:void 0});const e=await Fe().callApi({eventName:"getWorkflowRuns",environment:l,data:v});return"failed"===e.type?Le().Q.fail(e.body):Le().Q.success({runIds:e.data.runIds})}),[v,l]);ze(w,Ht);const S=(0,i.useCallback)((e=>{f({type:"setSearchTerm",value:e})}),[]),k=(0,Be().Y)(S,250),b=(0,i.useCallback)((e=>{f({type:"setFilters",value:e})}),[]),C=(0,i.useCallback)((()=>{c((e=>!e))}),[]),j=(0,i.useCallback)((e=>{e.threadId&&(0,Ee().showChatSidebar)({environment:l,store:o,chatSidebarState:{threadId:e.threadId}})}),[l,o]);return(0,I.jsxs)(a().Y1,{direction:"vertical",width:"fill",height:"fill",children:[(0,I.jsx)(Wt,{hasFilterEnabled:x,onFilterClick:C,onRefreshClick:w,onSearchChange:k,searchTerm:h.searchTerm}),(0,I.jsx)(Ke,{isOpen:s,relativePaddingLeft:-6,children:(0,I.jsx)(at,{defaultFilterState:h,onChange:b})}),(0,I.jsx)(Pt,{handleRowClick:j,hasSearchTerm:Boolean(h.searchTerm),refetchRuns:w,workflowRunsState:y,workflowStore:t})]})}var $t=()=>o(981928),Yt=()=>o(284371),Kt=()=>o(946548),Ut=()=>o(115512),Xt=()=>o(919194);const Gt=(0,u().YK)({triggerEnabledLabel:{defaultMessage:"Active",id:"aiWorkflow.trigger.triggerEnabledLabel"},triggerEnabledHiddenAriaLabel:{defaultMessage:"Trigger is active.",id:"aiWorkflow.trigger.triggerEnabledHiddenAriaLabel"},triggerPausedHiddenAriaLabel:{defaultMessage:"Trigger is paused.",id:"aiWorkflow.trigger.triggerPausedHiddenAriaLabel"},triggerDisabledTooltip:{defaultMessage:"You do not have permission to resume this trigger.",id:"aiWorkflow.trigger.triggerDisabledTooltip"},triggerErrorsDisabledTooltip:{defaultMessage:"Fix any errors or remove failing steps to enable this trigger",id:"aiWorkflow.trigger.triggerErrorsDisabledTooltip"}});function Qt(e){var t;const{blockStore:o,triggerId:i}=e,n=(0,l().IS)((e=>({section:{display:"flex",flexDirection:"column",gap:8,width:"100%",marginBottom:28},header:{alignItems:"center",display:"flex",flexDirection:"row"},title:{color:e.text.tertiary,fontSize:12,lineHeight:1.3,fontWeight:Yt().Wy.medium}})),[]),{workflowValue:r}=(0,v()._)(o),a=null==r||null===(t=r.triggers)||void 0===t?void 0:t.find((e=>e.id===i));return a?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(qt,{blockStore:o,trigger:a,cantSaveDueToError:!1,disabled:!1}),(0,I.jsxs)("section",{style:n.section,children:[(0,I.jsx)("header",{style:n.header,children:(0,I.jsx)("div",{style:n.title,children:(0,I.jsx)(u().sA,{defaultMessage:"When",id:"aiWorkflow.trigger.when"})})}),(0,I.jsx)(Xt().V,{children:(0,I.jsx)(Xt().h,{blockStore:o,trigger:a})})]})]}):null}function qt(e){const{blockStore:t,trigger:o,cantSaveDueToError:r,disabled:a}=e,s=!1!==o.enabled,c=`toggle-${o.id}`,d=Q().A.isMobile,g=(0,n().v3)(),{workflowPointer:h,threadStore:f}=(0,v()._)(t),p=(0,i.useCallback)((()=>{if(!h)throw new Error("No workflow pointer");le().saveTrigger({trigger:{...o,enabled:!s},environment:g,threadStore:f,workflowPointer:h,blockStore:t})}),[o,s,g,f,h,t]),x=(0,l().IS)((e=>({labelWrap:{color:a?e.text.tertiary:e.text.secondary,flex:"1 1 auto",fontSize:d?Yt().J.UIRegular.mobile:Yt().J.UIRegular.desktop},sectionWrap:{alignItems:"start",display:"flex",flexDirection:"row",gap:6,marginBlockEnd:0,...d?{paddingBottom:0,paddingTop:0}:{paddingBottom:12,borderBottom:`1px solid ${e.stroke.secondary}`,marginBottom:16}},toggleWrap:{flex:"0 0 auto",paddingBlockStart:d?5:2}})),[a,d]),m=Gt.triggerEnabledLabel,y=s?Gt.triggerEnabledHiddenAriaLabel:Gt.triggerPausedHiddenAriaLabel;return(0,I.jsxs)("section",{style:x.sectionWrap,children:[(0,I.jsx)("div",{style:x.toggleWrap,children:(0,I.jsx)(Vt().A,{disableTooltip:!a||!s,renderTooltip:()=>r?(0,I.jsx)(u().sA,{...Gt.triggerErrorsDisabledTooltip}):(0,I.jsx)(u().sA,{...Gt.triggerDisabledTooltip}),render:e=>(0,I.jsx)("div",{...e,children:(0,I.jsx)(Kt().A,{disabled:a,inputId:c,on:s,onClick:p})})})}),(0,I.jsx)("div",{style:x.labelWrap,children:(0,I.jsxs)("label",{htmlFor:c,children:[(0,I.jsx)("span",{"aria-hidden":!0,children:(0,I.jsx)(u().sA,{...m})}),(0,I.jsx)("span",{style:Ut().Qg,children:(0,I.jsx)(u().sA,{...y})})]})})]})}function Zt(e){var t;const{blockStore:o,workflow:i,triggerId:n}=e,r=null===(t=i.triggers)||void 0===t?void 0:t.find((e=>e.id===n));return r?(0,I.jsxs)(a().Y1,{direction:"vertical",width:"fill",height:"fill",children:[(0,I.jsx)(he,{icon:(0,I.jsx)(w().I,{size:"default",color:"secondary",icon:P}),label:r.name}),(0,I.jsxs)(a().Y1,{direction:"vertical",gap:24,padding:24,height:"fill",style:{overflowY:"auto"},children:[(0,I.jsx)(Qt,{blockStore:o,triggerId:n}),(0,I.jsx)(re().r0,{children:(0,I.jsx)(Jt,{blockStore:o,trigger:r})})]})]}):null}function Jt(e){const{trigger:t,blockStore:o}=e,r=(0,n().v3)(),{workflowPointer:l,threadStore:a}=(0,v()._)(o),s=(0,i.useCallback)((e=>{const t=JSON.parse(e);if(!l)throw new Error("No workflow pointer");le().saveTrigger({environment:r,workflowPointer:l,threadStore:a,trigger:t,blockStore:o})}),[o,r,a,l]);return(0,I.jsx)($t().X,{value:(c=t,JSON.stringify(c,null,2)),onSave:s,language:"json"});var c}function eo(e){const{blockStore:t}=e,o=(0,c().useWorkflowNavigationState)(),i=(0,ne().Y)(t),n=(0,v()._)(t).workflowValue??d().ZB;if(null==o||!o.isOpen)return null;if("module"===o.type){var r;const e=null===(r=n.modules)||void 0===r?void 0:r.find((e=>e.id===o.id));return e?(0,I.jsx)(Re,{workflow:n,workflowStore:i,blockStore:t,module:e}):(0,I.jsx)("div",{children:"Module not found"})}if("database"===o.type)return(0,I.jsx)(Ie,{workflow:n,workflowStore:i,blockStore:t,databaseId:o.id});if("trigger"===o.type)return(0,I.jsx)(Zt,{triggerId:o.id,blockStore:t,workflow:n});if("agent"===o.type)return(0,I.jsx)(fe,{workflow:n,blockStore:t});if(i&&n){if("runs"===o.type)return(0,I.jsx)(Ot,{workflowStore:i,blockStore:t});if("debug"===o.type)return(0,I.jsx)(a().Y1,{width:"fill",height:"fill",style:{overflowY:"auto"},children:(0,I.jsx)(re().l$,{workflow:n,blockStore:t,workflowStore:i})})}return null}function to(e){const{blockStore:t}=e,o=function(e){const{blockStore:t}=e,o=(0,n().v3)();return(0,r().K8)((()=>{const e=new(s().A)(o);return e.setContext({type:"collectionView",collectionViewBlockStore:t,collectionViewStore:t.getCollectionViewStores()[0],collectionStore:void 0,pageVisitSourceOverride:void 0}),e}),[o,t])}({blockStore:t}),i=(0,c().useWorkflowNavigationState)(),d=(0,l().IS)((e=>({container:{borderTop:`0.5px solid ${e.stroke.primary}`,minWidth:0},mainPanel:{minWidth:0}})),[]);return i.isOpen?(0,I.jsxs)(a().Y1,{direction:"horizontal",width:"fill",height:"fill",style:d.container,children:[(0,I.jsx)(ie,{blockStore:t,previewCollectionContextStore:o}),(0,I.jsx)(a().Y1,{direction:"vertical",width:"fill",height:"fill",style:d.mainPanel,children:(0,I.jsx)(eo,{blockStore:t})})]}):null}},955450:(e,t,o)=>{o.d(t,{K:()=>c});var i=()=>o(484714),n=()=>o(56366),r=()=>o(106412),l=()=>o(963589),a=()=>o(765957),s=()=>o(583238);function c(e){const{collectionContextStore:t}=e,o=(0,i().v3)(),c=(0,r().Zp)(),d=(0,n().O$)(t.normalizedSchemaStore),u=(0,n().K8)((()=>t.collectionViewStore()),[t]),g=(0,n().K8)((()=>null==u?void 0:u.getType()),[u]),h=(0,l().X)("notion_calendar_db_integration_non_time_views"),f=(0,n().K8)((()=>(0,s().JF)({environment:o,spaceStore:a().default.state.currentSpaceStore,schema:d,collectionContextType:t.contextType,collectionViewType:g,enableForNonTimeBasedViews:h})),[o,d,t,g,h]);return Boolean(f)&&!(null!=c&&c.disablePageLinks)}},958846:(e,t,o)=>{o.d(t,{A:()=>n});o(296540);var i=o(474848);const n=function(e){let{loading:t,onLoadMore:n,loadMoreOffsetThreshold:r,resultSize:l,fetchSize:a}=e;return(0,i.jsx)(o(228927).A,{onChange:e=>function(e,t,o,i,n,r){if(t)return;const l=i||200;if(e>l)return;const a=void 0===n||void 0===r||n>=r;a&&o()}(e,t,n,r,l,a)})}},975366:(e,t,o)=>{o.d(t,{hu:()=>F,uH:()=>L});o(898992),o(354520),o(581454);var i=o(296540),n=()=>o(17022),r=()=>o(221844),l=()=>o(484714),a=()=>o(56366),s=()=>o(401497),c=()=>o(1295),d=()=>o(242138),u=()=>o(902006),g=()=>o(663760),h=()=>o(388821),f=()=>o(179034),p=()=>o(798880),x=()=>o(919709),m=()=>o(534177),v=()=>o(319975),y=()=>o(751156),w=()=>o(108184),S=()=>o(188158),k=()=>o(960432),b=()=>o(143016),C=()=>o(261237),j=()=>o(493733),I=()=>o(780054),A=()=>o(492414),M=()=>o(836251),R=()=>o(58293),B=()=>o(630116),T=()=>o(155382),P=()=>o(549131),_=o(474848);function L(e){let{step:t,threadStore:o,content:n,searchContext:r,aiChatFeatureController:l}=e;const[a,c]=(0,i.useState)(!1),{verticalPadding:d,horizontalPadding:u}=(0,T().Zh)(),g=(0,s().IS)((e=>({container:{position:"relative",margin:`0 -${u}px`,padding:`${d}px ${u}px`,borderRadius:8,backgroundColor:"transparent",transition:"background-color 0.1s ease",...a&&{backgroundColor:e.tint.regular}},feedbackActions:{pointerEvents:a?"auto":"none",opacity:a?1:0,backgroundColor:e.buttonGroupBackground,position:"absolute",top:-16,right:10,border:"none",boxShadow:`0 0 0 0.5px ${e.stroke.secondary}, 0px 1px 2px 0px rgba(0, 0, 0, 0.04)`,borderRadius:7,display:"flex",justifyContent:"center",padding:"2px"}})),[a,u,d]);return(0,_.jsxs)("div",{style:g.container,onMouseEnter:()=>{c(!0)},onMouseLeave:()=>{c(!1)},children:[(0,_.jsx)(F,{markdown:n,searchContext:r,aiChatFeatureController:l}),(0,_.jsx)("div",{style:g.feedbackActions,children:(0,_.jsx)("div",{style:{display:"flex",marginLeft:0},children:(0,_.jsx)(P().Ot,{step:t,threadStore:o,textContent:n})})})]})}function F(e){const t=(0,R().r)();return t?(0,_.jsx)(E,{...e,spaceStore:t}):null}function E(e){const{markdown:t,spaceStore:o,searchContext:s,aiChatFeatureController:R}=e,T=(0,l().v3)(),P=o.id,L=(0,a().K8)((()=>T.idCreator.getSpaceIdCreatorSync(P)),[T.idCreator,P]),F=(0,i.useMemo)((()=>{if(!t)return;const e=T.currentUser.id;if(!e)return;const o={table:p().oo,id:e},i=L.idInSavedSpace(f().ev),l=(0,g().h)(t),a=(0,c().i)({pageId:i,recordMap:h().RecordMap.create(),updates:[{action:"insert",blocks:l}],spaceId:P,useCrdt:!1,idCreator:L,actorPointer:o,uriContext:{baseUrl:I().A.domainBaseUrl,publicDomainName:I().A.publicDomainName},options:{citationFormat:"citation"}});return n().e.withListenerIgnored((()=>{const e=new(r().A)({name:"AIChatTranscript.NotionFlavoredMarkdownChatStep",isTemporaryData:!0}),t=y().createAndCommit({userAction:"AIChatTranscript.NotionFlavoredMarkdownChatStep.markdownToBlocks",environment:T,canUndo:!1,perform:t=>{const o=new(B().pm)({environment:T,pointer:{table:f().ev,id:i,spaceId:P},recordStoreOptions:{inMemoryRecordCache:e,userId:T.currentUser.id},path:["content"]});for(const e of a)y().applyOperation({store:(0,B().Oo)(o,e.pointer),operation:e,transaction:t});const n=(o.getValue()||[]).map((e=>B().Bv.createChildStore(o,{table:f().ev,id:e})));if(n)return(0,w().postProcessAICreatedStores)(T,n),function(e,t,o,i){for(const n of e){const e=n.getTitleStore(),r=null==e?void 0:e.getValue();if(!e||!r)continue;const l=(0,x().RQ)(r).map((e=>{const o=e[1];if(!o)return e;const r=(0,x().g2K)(o),l=null==r?void 0:r[1];let a;if("url"===(null==l?void 0:l.type)){const o=(0,M().wU)(l.href);if(o){const i=B().Bv.createChildStore(n,{id:o,table:f().ev,spaceId:n.getSpaceId()}),r=(0,x().Ey_)(e[0],[...(e[1]??[]).filter((e=>!(0,x().bZo)(e))),(0,x().X$)({type:"block",href:(0,A().Ef)({environment:t,updates:{store:i}}),blockId:o})]);return r}const r=null==i?void 0:i[l.href];if(!r)return e;const s=(0,d().f9)(r.id);s&&("slack"===s.type?a=(0,x().X$)({...s,type:"slack",href:l.href,threadHref:l.href}):"block"===s.type?a=(0,x().X$)({type:"block",href:l.href,blockId:s.blockId}):"google-drive"===s.type?a=(0,x().X$)({type:"google-drive",href:l.href,url:s.url,messageId:s.url}):"github"===s.type?a=(0,x().X$)({type:"github",href:l.href,url:s.url,messageId:s.url}):"jira"===s.type?a=(0,x().X$)({type:"jira",href:l.href,url:s.url,messageId:s.url}):"gmail"===s.type?a=(0,x().X$)({type:"gmail",href:l.href,url:s.url,messageId:s.url}):"linear"===s.type?a=(0,x().X$)({type:"linear",href:l.href,url:s.url,messageId:s.url}):"outlook"===s.type?a=(0,x().X$)({type:"outlook",href:l.href,url:s.url,messageId:s.url}):"helpdoc"===s.type?a=(0,x().X$)({type:"helpdoc",href:l.href,url:s.url}):"webpage"===s.type?a=(0,x().X$)({type:"webpage",href:l.href,url:s.url}):"sharepoint"===s.type?a=(0,x().X$)({type:"sharepoint",href:l.href,url:s.url,messageId:s.url}):"notion-mail"===s.type?a=(0,x().X$)({type:"notion-mail",href:l.href,url:s.url,messageId:s.url}):"microsoft-teams"===s.type?a=(0,x().X$)({type:"microsoft-teams",href:l.href,url:s.url,messageId:s.url,threadHref:l.href,threadTs:s.threadTs,channelId:s.channelId,messageType:s.messageType}):"google-calendar"===s.type?a=(0,x().X$)({type:"google-calendar",href:l.href,url:s.url,messageId:s.url}):"helpdoc-section"===s.type?a=(0,x().X$)({type:"helpdoc-section",href:l.href,url:s.url,parentPageHref:s.parentPageHref}):"citation_unsupported"===s.type||"database_query_results"===s.type?a=void 0:(0,m().HB)(s.type))}return a?(0,x().Ey_)(e[0],[...(e[1]??[]).filter((e=>!(0,x().bZo)(e))),a]):e}));v().R9({environment:t,store:e,value:l,transaction:o})}}(n,T,t,s),(0,w().wrapTemporaryBlocksInList)({environment:T,stores:n,inMemoryRecordCache:e,listId:i,transaction:t})}}).performResult;return e.addCacheFallback(T.defaultRecordCache.inMemoryRecordCache),t}))}),[t,T,L,P,s]),E=(0,i.useCallback)((e=>{const t=null==s?void 0:s[e];if(!t)return;const o=(0,d().f9)(t.id);if(o){if("slack"===o.type)return{...o,title:t.title,text:t.text,lastEdited:t.lastEdited};if("block"!==o.type)return"google-drive"===o.type?{...o,type:"google-drive",url:o.url,title:t.title,text:t.text,lastEdited:t.lastEdited,href:(0,u().V9)(o.href)}:"github"===o.type?{...o,type:"github",url:o.url,title:t.title,text:t.text,lastEdited:t.lastEdited,href:(0,u().V9)(o.href)}:"jira"===o.type?{...o,type:"jira",url:o.url,title:t.title,text:t.text,lastEdited:t.lastEdited,href:(0,u().V9)(o.href)}:"gmail"===o.type?{...o,type:"gmail",url:o.url,title:t.title,text:t.text,lastEdited:t.lastEdited,href:(0,u().V9)(o.href),threadHref:(0,u().V9)(o.href)}:"linear"===o.type?{...o,type:"linear",url:o.url,title:t.title,text:t.text,lastEdited:t.lastEdited,href:(0,u().V9)(o.href)}:"outlook"===o.type?{...o,type:"outlook",url:o.url,title:t.title,text:t.text,lastEdited:t.lastEdited,href:(0,u().V9)(o.href)}:"helpdoc"===o.type?{...o,type:"helpdoc",url:o.url,title:t.title,text:t.text,lastEdited:t.lastEdited,href:(0,u().h5)(o.href)}:"webpage"===o.type?{...o,type:"webpage",url:o.url,title:t.title,text:t.text,lastEdited:t.lastEdited,href:(0,u().RW)(o.href)}:"sharepoint"===o.type?{...o,type:"sharepoint",url:o.url,title:t.title,text:t.text,lastEdited:t.lastEdited,href:(0,u().V9)(o.href)}:"notion-mail"===o.type?{...o,type:"notion-mail",url:o.url,title:t.title,text:t.text,lastEdited:t.lastEdited,href:(0,u().V9)(o.href)}:"microsoft-teams"===o.type?{...o,type:"microsoft-teams",url:o.url,title:t.title,text:t.text,lastEdited:t.lastEdited,href:(0,u().V9)(o.href)}:"google-calendar"===o.type?{...o,type:"google-calendar",url:o.url,title:t.title,text:t.text,lastEdited:t.lastEdited,href:(0,u().V9)(o.href)}:"helpdoc-section"===o.type?{...o,type:"helpdoc-section",url:o.url,title:t.title,text:t.text,lastEdited:t.lastEdited,href:(0,u().w3)(o.href)}:void("database_query_results"!==o.type&&"citation_unsupported"!==o.type&&(0,m().HB)(o.type))}}),[s]),z=(0,i.useRef)(null),V=(0,a().uB)(void 0,b().D);return(0,S().c2)({containerRef:z,citationHoverStore:V,parentStore:o,evaluatorState:void 0}),F?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(C().c,{displayName:"AIChatTranscript.MarkdownChatStep",disabled:!0,ref:z,children:(0,_.jsx)(j().A,{store:F,disabled:!0,disableCommentMenu:!0,disableHoverMenu:!0,disableDrag:!0,overrideHeaderFontSizes:D})}),(0,_.jsx)(k().cE,{containerRef:z,hoverStore:V,parentStore:F,getPayloadDataForHref:E,useCompactWebPreview:!0,isSearchChat:(null==R?void 0:R.chonkyStyles)??!0})]}):null}const D={header:1.375,subHeader:1.25,subSubHeader:1.125}}}]);