"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[2411,5053,5834,9150,11126,28464,34208,34420,62342,67608,78984,82122,84358],{346:(e,t,o)=>{o.d(t,{MG:()=>m,T1:()=>g,a1:()=>_,dt:()=>b,kg:()=>f,lC:()=>S,n_:()=>v});var n=o(296540),a=()=>o(484714),r=()=>o(56366),i=()=>o(187174),s=()=>o(645873),l=()=>o(941463),d=()=>o(441199),c=()=>o(749687),p=()=>o(737230),u=()=>o(756114);const g=new(s().O2)("PerformanceToolbar",(()=>Promise.all([o.e(16471),o.e(92845),o.e(84468),o.e(48632),o.e(75078),o.e(95168),o.e(36908),o.e(21194),o.e(23930),o.e(61347),o.e(45624)]).then(o.bind(o,462407)))),m=(0,s()._h)(g,(e=>e.PerformanceToolbar)),b=(0,s()._h)(g,(e=>e.PerformanceToolbarSettings));function f(){const e=(0,a().v3)();return(0,r().K8)((()=>(0,u().D)(e,e.RouterStore.state)),[e])}function v(){const e=(0,a().v3)(),t=w("PerformanceToolbarStore"),o=w("isPerformanceToolbarVisible");return(0,r().K8)((()=>!(!t||!o)&&o(e,e.RouterStore.state,t.state)),[o,e,t])}function S(){const e=w("PerformanceToolbarStore");return(0,r().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function _(){const e=(0,a().v3)(),t=w("createPerformanceToolbarMouseListeners"),o=w("PerformanceToolbarStore"),{sidebarExpanded:i,sidebarWidth:s,secondarySidebarExpanded:u,secondarySidebarWidth:g,updateSidebarExpanded:m,updateSidebarWidth:b}=(0,r().K8)((()=>({sidebarExpanded:c().sidebarExpandedStore.state,sidebarWidth:c().sidebarWidthStore.state,secondarySidebarExpanded:d().default.isOpen(),secondarySidebarWidth:l().Ay.getWidth(),updateSidebarExpanded:p().Ay.state.expanded,updateSidebarWidth:p().Ay.state.width})),[]);return(0,n.useEffect)((()=>{if(o&&t)return t(e,(e=>o.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),i,s,u,g,m,b)}),[t,e,o,i,s,u,g,m,b])}function w(e){const t=f(),[{value:o}]=(0,i().Yb)((()=>t?g.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return o}},26388:(e,t,o)=>{o.r(t),o.d(t,{DO_NOT_USE_setUserPersonaRoleAndUseCases:()=>de,checkAndApplyTrial:()=>ce,clearAllOnboardingStates:()=>pe,createOrJoinSpace:()=>se,createSpaceAndSetSpaceId:()=>ne,createSpaceAsOwner:()=>ae,defaultOnboardingComplete:()=>ue,handleExitOnboarding:()=>me,handleOnboardingError:()=>Se,handleUserCanNotCreateSpace:()=>fe,joinSpaceAsGuestOrMember:()=>re,joinSpaceAsGuestOrMemberWithPerformanceTracking:()=>ie,onOnboardingCompletePublicAccess:()=>ge,prefillTeamWorkspaceName:()=>ve,redirectAfterContextualizedOnboardingComplete:()=>Z,setAndTrackContextualizedOnboardingComplete:()=>te,setMobileContextualizedOnboardingComplete:()=>ee,setProfileData:()=>oe,setUserAndSpaceSurveyData:()=>le});o(16280),o(898992),o(354520),o(581454),o(296540);var n=()=>o(584262),a=()=>o(857639),r=()=>o(416845),i=()=>o(763884),s=()=>o(243020),l=()=>o(179034),d=()=>o(677338),c=()=>o(959013),p=()=>o(496603),u=()=>o(534177),g=()=>o(382055),m=()=>o(796756),b=()=>o(148024),f=()=>o(449506),v=()=>o(901389),S=()=>o(874913),_=()=>o(433052),w=()=>o(496414),h=()=>o(246826),y=()=>o(857783),k=()=>o(435009),C=()=>o(537941),x=()=>o(426116),I=()=>o(751156),A=()=>o(840153),D=()=>o(755199),T=()=>o(943366),P=()=>o(440209),O=()=>o(898486),M=()=>o(974233),j=()=>o(972435),R=()=>o(640653),U=()=>o(719431),E=()=>o(1130),L=()=>o(616385),V=()=>o(144114),F=()=>o(607859),N=()=>o(12145),B=()=>o(406792),W=()=>o(869562),z=()=>o(765957),H=()=>o(217429),J=()=>o(630116),$=()=>o(162342),K=()=>o(151168),G=()=>o(846955),Y=()=>o(913454),q=()=>o(59424),X=()=>o(235921),Q=o(474848);async function Z(e){await(0,L().navigateWithRedirectData)(e),e.environment.device.isMobile&&ee({environment:e.environment,userStore:e.onboardingData.userStore}),te({environment:e.environment,onboardingState:e.onboardingState,userStore:e.onboardingData.userStore,spaceJoinOrCreate:e.spaceJoinOrCreate,permissionLevel:e.permissionLevel})}function ee(e){const{environment:t,userStore:o}=e;I().createAndCommit({userAction:"contextualizedOnboardingActions.contextualizedOnboardingActions",environment:t,canUndo:!0,perform:e=>{E().PF({userStore:o,transaction:e})}})}function te(e){const{environment:t,onboardingState:o,userStore:n,spaceJoinOrCreate:a,permissionLevel:r}=e;t.device.isElectron&&S().quickSearchRefresh(),I().createAndCommit({userAction:"contextualizedOnboardingActions.setAndTrackContextualizedOnboardingComplete",environment:t,canUndo:!0,perform:e=>{E().LC({userStore:n,transaction:e})}}),m().IA(t,{...(0,q().getContextualizedOnboardingAnalyticsData)({onboardingState:o,environment:t}),initial_workspace_type:a,permission_level:r}),b().Kc(t)}async function oe(e,t){const{onboardingData:o,profileName:n,profilePhoto:a,password:r,emailOptIn:i}=t;if(!o)return;const s=o.userStore;(0,T().M)(e,{email_optin_product_updates_and_releases:i,email_optin_newsletters_and_thought_leadership:i,email_optin_user_research_and_surveys:i,email_optin_sales_outreach:!0,email_optin_events_and_resources:i,email_optin_product_education_and_how_tos:i,email_optin_notion_for_startups:i}),I().createAndCommit({userAction:"onboardingHelpers.setProfileData",environment:e,canUndo:!0,perform:e=>{const t={...a&&{profile_photo:a}};t.name=n,h().zv({store:s,data:t,transaction:e})}});const l=await U().shouldCreatePassword(e)&&!function(){var e;const{currentUserSettingsStore:t}=z().default.state;return Boolean(t&&t.isReady()&&"email-password"===(null===(e=t.getSettings())||void 0===e?void 0:e.mobile_ads_signup_variant))}();r&&l&&await f().callApi({eventName:"setPassword",environment:e,data:{newPassword:r,sendEmail:!1}})}async function ne(e){var t;let{onboardingState:o,environment:n,createTemplates:a,showLoader:r=!0}=e;if(!o.onboardingData)return;const i=V().sg(o.onboardingData),s="on"===H().default.getEligibleGroup({experimentId:"adoption_diy_onboarding_template",disableExposureLogging:!0}),{spaceStore:l,spaceViewStore:d,inviteLinkCode:c,teamStoreId:p}=await ae({onboardingState:o,onboardingData:o.onboardingData,redirectData:i,planType:null===(t=o.planTypeAndSurveyInfo)||void 0===t?void 0:t.planType,environment:n,createTemplates:a??s,showLoader:r});X().A.setState({...X().A.state,spaceId:l.id,spaceViewId:d.id,inviteLinkCode:c,inviteLinkUrl:c?(0,R().X$)(n,l.id,c):void 0,teamStoreId:p})}async function ae(e){var t,o,n,a;const{onboardingState:r,onboardingData:i,redirectData:s,planType:l,environment:d,createTemplates:c,showLoader:p=!0}=e,{currentSpaceStore:u,currentSpaceViewStore:g}=z().default.state;if(u&&g&&u.id===r.spaceId)return{spaceStore:u,spaceViewStore:g,teamStoreId:r.teamStoreId};p&&w().m({message:L().messages.creatingWorkspace});const m=j().A.getIntl(),b=i.userStore.getFullName(m),f=B().default.DO_NOT_USE_markLegacy("onboarding.create_space"),v=r.spaceName||V().JR(b||"",m),{spaceViewStore:S,spaceStore:_,inviteLinkCode:h,redirectData:y,teamStoreId:k}=await L().createSpaceWithTemplates({environment:d,isNewUserOnboarding:Boolean(r.isFirstTimeOnboarding),onboardingData:i,userPersona:(null===(t=r.planTypeAndSurveyInfo)||void 0===t||null===(t=t.surveyResponses)||void 0===t?void 0:t.userPersona)||"unfilled",redirectData:s,spaceName:v,spaceIcon:r.spaceIcon||null,planSelection:l,isPrivate:"team"!==l,useCases:(null===(o=r.planTypeAndSurveyInfo)||void 0===o||null===(o=o.surveyResponses)||void 0===o?void 0:o.useCases)||[],categories:(null===(n=r.planTypeAndSurveyInfo)||void 0===n||null===(n=n.surveyResponses)||void 0===n?void 0:n.categories)||[],hasTrialId:!1,selectedWorkflowTemplates:(null==r?void 0:r.selectedWorkflowTemplateIds)||[],collaborativeIntent:null===(a=r.planTypeAndSurveyInfo)||void 0===a?void 0:a.collaborativeIntent,createTemplates:c,source:r.source});return B().default.DO_NOT_USE_measureLegacy(f,{environment:d,data:{flow:r.flowName,onboarding_complete_data:{stage:(0,q().getStageName)({flowName:r.flowName,stageIndex:r.currentStageIndex,environment:d}),redirect_data:s,is_new_user:!0,permission_level:"member",plan:l}}}),p&&w().V(),{spaceViewStore:S,spaceStore:_,inviteLinkCode:h,newRedirectData:y,teamStoreId:k}}async function re(e){const{onboardingData:t,redirectData:o,currentUserRootStore:n,currentUserSettingsStore:a,environment:r}=e;if("guest_redirect"===o.type){const{spaceViewStore:e}=await x().DT({environment:r,spaceId:o.spaceId,userRootStore:n,analyticsFrom:"onboarding",userSettingsStore:a,navigate:!1,redirectPageId:o.pageId,isOnboarding:!0});return{spaceViewStore:e}}{const{spaceViewStore:e}=await L().joinTeamSpaceWithTemplates({environment:r,onboardingData:t,redirectData:o,spaceId:X().A.state.spaceId,isNewUserOnboarding:Boolean(X().A.state.isFirstTimeOnboarding)});return{spaceViewStore:e}}}async function ie(e){const{onboardingState:t,onboardingData:o,redirectData:n,currentUserRootStore:a,currentUserSettingsStore:r,environment:i}=e;w().m({message:L().messages.joiningWorkspace});const s=B().default.DO_NOT_USE_markLegacy("onboarding.join_space"),{spaceViewStore:l}=await re({onboardingData:o,redirectData:n,currentUserRootStore:a,currentUserSettingsStore:r,environment:i});return B().default.DO_NOT_USE_measureLegacy(s,{environment:i,data:{flow:t.flowName,onboarding_complete_data:{stage:(0,q().getStageName)({flowName:t.flowName,stageIndex:t.currentStageIndex,environment:i}),redirect_data:n,is_new_user:!0,permission_level:V().S1(n)}}}),w().V(),{spaceViewStore:l}}async function se(e){const{spaceJoinOrCreate:t,onboardingState:o,onboardingData:n,currentUserRootStore:a,currentUserSettingsStore:r,planType:i,environment:s}=e,l=V().sg(n);if("create"===t){const e="on"===H().default.getEligibleGroup({experimentId:"adoption_diy_onboarding_template",disableExposureLogging:!0}),{spaceStore:t,spaceViewStore:a,newRedirectData:r,teamStoreId:d}=await ae({onboardingState:o,onboardingData:n,redirectData:l,planType:i,environment:s,createTemplates:!e});return{spaceStore:t,spaceViewStore:a,newRedirectData:r,teamStoreId:d}}if("join"===t){const{spaceViewStore:e}=await ie({onboardingState:o,onboardingData:n,redirectData:l,currentUserRootStore:a,currentUserSettingsStore:r,environment:s});return{spaceViewStore:e}}(0,u().HB)(t)}function le(e){var t,o,n;const{environment:a,onboardingState:r,planSelection:i,spaceStore:s,spaceViewStore:l}=e,d=null===(t=r.planTypeAndSurveyInfo)||void 0===t?void 0:t.surveyResponses,c=null!=d&&d.educationRole&&"other"!==(null==d?void 0:d.educationRole)?d.educationRole:void 0;V().BH({environment:a,state:{onboardingExperiments:void 0,userPersona:null==d?void 0:d.userPersona,userRole:null==d?void 0:d.userRole,categories:null==d?void 0:d.categories,userEducationRole:c,userEducationLevel:null==d?void 0:d.educationLevel,notionUseFrequency:null==d?void 0:d.notionUseFrequency,companySize:null==d?void 0:d.companySize,useCases:p().sb([...(null==d?void 0:d.useCases)??[],...(null===(o=r.selectedWorkflowTemplateIds)||void 0===o?void 0:o.map((e=>{const t=(0,Y().getCollectionTemplateFromId)(e);return null!=t&&t.category?Y().useCaseByCollectionTemplateCategory[null==t?void 0:t.category]:void 0})).filter((e=>void 0!==e)))??[]]),planSelection:i,collaborativeIntent:null===(n=r.planTypeAndSurveyInfo)||void 0===n?void 0:n.collaborativeIntent},spaceStore:s,spaceViewStore:l})}function de(e,t){var o,n,a,r;const{onboardingData:i}=t;if(!i)return;const s=null===(o=t.planTypeAndSurveyInfo)||void 0===o||null===(o=o.surveyResponses)||void 0===o?void 0:o.userPersona,l=null===(n=t.planTypeAndSurveyInfo)||void 0===n||null===(n=n.surveyResponses)||void 0===n?void 0:n.userRole,d=null===(a=t.planTypeAndSurveyInfo)||void 0===a||null===(a=a.surveyResponses)||void 0===a?void 0:a.useCases,c=null===(r=t.planTypeAndSurveyInfo)||void 0===r||null===(r=r.surveyResponses)||void 0===r?void 0:r.companySize;I().createAndCommit({userAction:"contextualizedOnboardingStateActions.DO_NOT_USE_setUserPersonaRoleAndUseCases",environment:e,canUndo:!0,perform:e=>{D().mJ({userSettingsStore:i.userSettingsStore,data:{persona:s,team_role:l,use_cases:d,company_size:c,persona_version:{version:"V4",timestamp:(new Date).getTime()}},transaction:e})}})}async function ce(e,t,o){if((0,K().Os)()&&e&&t){const n=await L().applyPerfmarkTrial(e.id,t,o);n.enableTrialInfoModal&&(0,$().fR)({openedFrom:"onboarding"}),n.enableTrialIneligibleToast&&N().A.setState({open:!0,isExistingUser:!1})}}function pe(e){const{currentUserRootStore:t}=z().default.state;t&&(i().K.set({userId:t.id,key:X().l,value:void 0}),X().A.reset(),F().default.setState({isOnboarding:!1,isLoading:!1,currentUserId:e.currentUser.id}),(0,d().fu)(),(0,d().$A)())}async function ue(e,t){var o;const{currentUserRootStore:n,currentUserSettingsStore:a}=z().default.state;if(!n)return;const r=X().A.state;if(!r.onboardingData)throw new Error("onboardingData should not be undefined!");const i=(0,q().getSpaceIntentOverride)(r)??(null===(o=r.planTypeAndSurveyInfo)||void 0===o?void 0:o.planType),{spaceStore:s,spaceViewStore:l,newRedirectData:d,teamStoreId:c}=await se({spaceJoinOrCreate:t,onboardingState:r,onboardingData:r.onboardingData,currentUserRootStore:n,currentUserSettingsStore:a,planType:i,environment:e}),p=V().sg(r.onboardingData);w().m({message:L().messages.navigatingToWorkspace}),"create"===t&&await ce(s,i,e),function(e){var t,o;let{environment:n,onboardingState:a,spaceStore:r,planType:i,teamStoreId:s}=e;const l=a.planTypeAndSurveyInfo,d=a.selectedWorkflowTemplateIds,c=Boolean((null==l||null===(t=l.surveyResponses)||void 0===t?void 0:t.useCases)&&(null==l||null===(o=l.surveyResponses)||void 0===o||null===(o=o.useCases)||void 0===o?void 0:o.length)>0),p=Boolean(d&&d.length>0),u=c||p;if("team"===i&&s&&u&&(0,q().isWorkflowTemplatesEnabledForOnboarding)(n))W().setExpand({environment:n,isExpanded:!0,from:"contextualized_onboarding_overlay",saveDetailsSidebarPreference:!1}),G().default.setState({type:"team_workflow_templates",step:"teamspaces",initialTeamStoreId:s});else if((0,P().Mq)({environment:n,experimentId:"adoption_hide_features_v2"})){const e=H().default.getEligibleGroup({experimentId:"adoption_hide_features_v2"});"hide_all_except_templates"===e?G().default.setState({type:"adoption_push_templates",step:"explore_templates"}):"hide_all_except_home"===e?G().default.setState({type:"adoption_push_home",step:"home"}):"hide_all_except_ai"===e?G().default.setState({type:"adoption_push_ai",step:"ai_assistant"}):"hide_all_except_invite"===e&&G().default.setState({type:"adoption_push_invite",step:"invite_members"})}}({environment:e,onboardingState:r,spaceStore:s,planType:i,teamStoreId:c});const u=d??p;await Z({environment:e,onboardingData:r.onboardingData,spaceId:l.getSpaceId(),spaceViewId:l.id,spaceJoinOrCreate:t,redirectData:u,onboardingFlow:r.flowName,onboardingState:r,permissionLevel:V().S1(u)}),w().V()}function ge(e,t,o){if(!e.onboardingData)throw new Error("onboardingData not found!");te({onboardingState:e,environment:o,userStore:e.onboardingData.userStore,spaceJoinOrCreate:void 0,permissionLevel:"public"}),y().uK({environment:o,store:new(J().Bv)(o,{table:l().ev,id:t.pageId}),pageVisitSource:n().y8.Onboarding})}async function me(e,t,o){if(e.isFirstTimeOnboarding){const{accept:o}=await v().Gh({message:(0,Q.jsxs)("div",{style:{display:"block"},children:[(0,Q.jsx)("div",{style:{fontWeight:600},children:(0,Q.jsx)(c().sA,{defaultMessage:"Cancel new account setup?",id:"contextualizedOnboardingActions.closeOnboardingDialog.newUser.title"})}),(0,Q.jsx)("div",{children:(0,Q.jsx)(c().sA,{defaultMessage:"You’ll be taken back to the Notion home page.",id:"contextualizedOnboardingActions.closeOnboardingDialog.newUser.subtitle"})})]}),acceptLabel:(0,Q.jsx)(c().sA,{defaultMessage:"Return to home page",id:"contextualizedOnboardingActions.closeOnboardingDialog.newUser.confirmCloseButton.label"}),cancelLabel:(0,Q.jsx)(c().sA,{defaultMessage:"Continue setup",id:"contextualizedOnboardingActions.closeOnboardingDialog.newUser.continueButton.label"})});if(!o)return;m().rG(t,(0,q().getContextualizedOnboardingAnalyticsData)({onboardingState:e,environment:t})),await U().actuallyLogoutAndDeleteMostLocalData({environment:t,logoutOrigin:s().d.ContextualizedOnboardingExit,userId:t.currentUser.id})}else if("partner_program_onboarding_flow"!==e.flowName||o){const{accept:o}=await v().Gh({message:(0,Q.jsx)(c().sA,{defaultMessage:"Cancel new workspace setup?",id:"onboardingActions.closeOnboardingDialog.existingUser.title"}),description:(0,Q.jsx)(c().sA,{defaultMessage:"You’ll be taken back to your previous workspace.",id:"onboardingActions.closeOnboardingDialog.existingUser.subtitle"}),acceptLabel:(0,Q.jsx)(c().sA,{defaultMessage:"Back to previous workspace",id:"onboardingActions.closeOnboardingDialog.existingUser.confirmCloseButton.label"}),cancelLabel:(0,Q.jsx)(c().sA,{defaultMessage:"Continue setup",id:"onboardingActions.closeOnboardingDialog.existingUser.continueButton.label"})});if(!o)return;m().rG(t,(0,q().getContextualizedOnboardingAnalyticsData)({onboardingState:e,environment:t})),await be(t)}else{const{accept:o}=await v().Gh({message:(0,Q.jsx)(c().sA,{defaultMessage:"Cancel offer redemption?",id:"contextualizedOnboardingActions.closeOnboardingDialog.existingUser.partnerProgram.title"}),description:(0,Q.jsx)(c().sA,{defaultMessage:"Your offer will not be applied",id:"contextualizedOnboardingActions.closeOnboardingDialog.existingUser.partnerProgram.subtitle"}),acceptLabel:(0,Q.jsx)(c().sA,{defaultMessage:"Back to previous workspace",id:"contextualizedOnboardingActions.closeOnboardingDialog.existingUser.confirmCloseButton.label"}),cancelLabel:(0,Q.jsx)(c().sA,{defaultMessage:"Continue redemption",id:"contextualizedOnboardingActions.closeOnboardingDialog.existingUser.partnerProgram.continueButton.label"})});if(!o)return;m().rG(t,(0,q().getContextualizedOnboardingAnalyticsData)({onboardingState:e,environment:t})),await be(t)}}async function be(e){const{mainEditorCurrentBlockStore:t}=z().default.state,o=null==t?void 0:t.getSpaceId(),n=o&&(0,R().km)(o);if(n){const t=n.getSpaceStore();e.device.isMobileNative&&a().log({level:"info",from:"onboardingActions",type:"SpaceSwitchingDebug",data:{message:"onboardingActions.handleCloseOnboarding set space",spaceId:null==t?void 0:t.id}}),z().default.setState({...z().default.state,currentSpaceStore:t,currentSpaceViewStore:n})}const{url:r,userId:i}=_().v4(e);let s=e;if(i&&i!==e.currentUser.id&&(s=await A().T({environment:e,newCurrentUserId:i})),r){var l;W().close();const e=()=>pe(s);k().oo({environment:s,url:r}),null!==(l=s.mobileNative)&&void 0!==l&&l.supportsNativeHomeOnPhone()?C().navigateToHomeTab(s,e):e()}}function fe(e,t){var o;g().FX(e,{can_user_create_space:!1,is_new_user:!0,has_joinable_spaces:!1,onboarding_stage:(0,q().getStageName)({flowName:t.flowName,stageIndex:t.currentStageIndex,environment:e})});const n=null===(o=t.onboardingData)||void 0===o?void 0:o.userStore.getEmail();throw X().A.setState({...t,isInvalidRedirect:!0}),new(r().Xgk)(n?j().A.formatMessage(L().messages.errorWorkspaceCreationPreventedWithEmail,{userEmailAddress:n}):j().A.formatMessage(L().messages.errorWorkspaceCreationPrevented),{newUser:!0})}function ve(e){const t=j().A.getIntl(),o=e.userStore.getFullName(t);X().A.update((e=>({...e,spaceName:V().mi(o||"",t)})))}async function Se(e,t){if(F().default.setState({...F().default.state,isLoading:!1}),a().log({level:"error",from:"onboardingActions",type:"handleOnboardingError",error:{message:`Found onboarding error: ${t.message}`,stack:String(t.stack)}}),w().V(),t instanceof M().C&&(0,r().OwV)(t.data.responseBody)&&"UnauthorizedError"===t.data.responseBody.name)return void m().bn(e,{...(0,q().getContextualizedOnboardingAnalyticsData)({onboardingState:X().A.state,environment:e}),errorMessage:t.message,debugMessage:"UnauthorizedError"});let o;if(t instanceof M().C){var n;const e=null==t||null===(n=t.data)||void 0===n||null===(n=n.responseBody)||void 0===n?void 0:n.clientData;e&&(o=(0,O().t4)(j().A.getIntl(),e))}m().bn(e,{...(0,q().getContextualizedOnboardingAnalyticsData)({onboardingState:X().A.state,environment:e}),errorMessage:t.message,debugMessage:o||"undefined"});const{accept:i}=await v().Gh({message:(0,Q.jsxs)("div",{children:[(0,Q.jsx)(c().sA,{defaultMessage:"Oops, something went wrong.",id:"onboardingActions.onboardingErrorDialog.message"}),(0,Q.jsx)("div",{children:o??t.message})]}),acceptLabel:(0,Q.jsx)(c().sA,{defaultMessage:"Start over",id:"onboardingActions.onboardingErrorDialog.startOverButton.label"}),cancelLabel:(0,Q.jsx)(c().sA,{defaultMessage:"Close",id:"onboardingActions.onboardingErrorDialog.closeButton.label"})});i&&(0,E().Vh)(e,t)}},29037:(e,t,o)=>{o.r(t),o.d(t,{checkmarkIcon:()=>a,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.92 3.91 12.17 12.18",svg:(0,o(474848).jsx)("path",{d:"M15.784 4.002a.625.625 0 0 1 .214.857L9.445 15.784a.625.625 0 0 1-1.01.085l-4.37-5.098a.625.625 0 0 1 .948-.814l3.806 4.44 6.109-10.181a.625.625 0 0 1 .857-.214"})},a=(0,o(340498).wt)("checkmark",n)},59400:(e,t,o)=>{o.d(t,{nR:()=>c,m$:()=>s,m4:()=>l,Dy:()=>d,FZ:()=>u});o(296540);var n=()=>o(645873),a=o(474848);function r(e){const{shouldShowSpinner:t,collectionSettingsProps:n}=e;return(0,a.jsx)(o(735695).Ay,{collectionSettingsStore:n.collectionSettingsStore,fullHeight:n.fullHeight,hideDesktopHeader:n.hideDesktopHeader,children:t&&(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",overflow:"hidden",paddingBottom:20},children:(0,a.jsx)(o(331542).A,{})})})}const i=new(n().O2)("collectionSettings",(()=>Promise.all([o.e(75134),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(75078),o.e(25497),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(30291),o.e(19930),o.e(58102),o.e(26483),o.e(6463),o.e(40925),o.e(282),o.e(61349),o.e(62573),o.e(1440),o.e(63996),o.e(66559),o.e(35986),o.e(92924),o.e(64819),o.e(97339),o.e(55717),o.e(63797),o.e(21367),o.e(22686),o.e(99108)]).then(o.bind(o,409198)))),s=(0,n()._h)(i,(e=>e.CollectionSettings),{renderLoading:(e,t)=>(0,a.jsx)(r,{shouldShowSpinner:e,collectionSettingsProps:t})}),l=(0,n()._h)(i,(e=>e.CollectionSettingsButtonOptions)),d=(0,n()._h)(i,(e=>e.CollectionSettingsPropertyTypeMenuItem)),c=(0,n()._h)(i,(e=>e.CollectionEditButtonAutomationOption)),p=new(n().O2)("TableHeaderPropertyCreationMenu",(()=>Promise.all([o.e(75134),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(75078),o.e(25497),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(61349),o.e(35986),o.e(43935)]).then(o.bind(o,908800)))),u=(0,n()._h)(p,(e=>e.TableHeaderPropertyCreationMenu))},59424:(e,t,o)=>{o.r(t),o.d(t,{estimateWillSkipTeamOnly:()=>_,getContextualizedOnboardingAnalyticsData:()=>p,getSpaceIntentOverride:()=>b,getStageName:()=>l,getStages:()=>d,isEducationFlowState:()=>c,isPublicAccessPageRedirect:()=>m,isWorkflowTemplatesEnabledForOnboarding:()=>v,shouldRedirectToJoinSpace:()=>u,shouldShowProgressIndicatorOnStage:()=>f,shouldShowWorkspaceInWorkspaceChooser:()=>g,shouldSkipStageTeamOnly:()=>S});o(16280);var n=()=>o(313127),a=()=>o(640653),r=()=>o(765957),i=()=>o(151168),s=()=>o(757156);function l(e){const{flowName:t,stageIndex:o,environment:n}=e;return d({flowName:t,environment:n})[o]}function d(e){let{flowName:t,environment:o}=e;const n=o.device.isMobile,a=s().onboardingFlowNameToFlowConfig[t];if(n){if(!a.isEnabledForMobile)throw new Error(`Mobile flow is not enabled for flow name: ${t}`);return a.getMobileStages(o)}if(!a.isEnabledForDesktop)throw new Error(`Desktop flow is not enabled for flow name: ${t}`);return a.getDesktopStages()}function c(e){var t,o;return"education_flow"===e.flowName&&void 0!==(null===(t=e.planTypeAndSurveyInfo)||void 0===t||null===(t=t.surveyResponses)||void 0===t?void 0:t.educationRole)&&void 0!==(null===(o=e.planTypeAndSurveyInfo)||void 0===o||null===(o=o.surveyResponses)||void 0===o?void 0:o.educationLevel)}function p(e){var t,o,n,s,d,c,p;let{onboardingState:u,spaceJoinOrCreate:g,environment:m}=e;const{currentSpaceStore:b}=r().default.state,f=(0,a().p3)(),v=(null===(t=u.planTypeAndSurveyInfo)||void 0===t||null===(t=t.surveyResponses)||void 0===t?void 0:t.userPersona)??f.function,S=(null===(o=u.planTypeAndSurveyInfo)||void 0===o||null===(o=o.surveyResponses)||void 0===o?void 0:o.userRole)??f.role,_=(null===(n=u.planTypeAndSurveyInfo)||void 0===n||null===(n=n.surveyResponses)||void 0===n?void 0:n.companySize)??f.companySize,w=(null===(s=u.planTypeAndSurveyInfo)||void 0===s?void 0:s.planType)??f.intent,h=(null===(d=u.planTypeAndSurveyInfo)||void 0===d||null===(d=d.surveyResponses)||void 0===d?void 0:d.useCases)??f.useCases,y=(null===(c=u.planTypeAndSurveyInfo)||void 0===c||null===(c=c.surveyResponses)||void 0===c?void 0:c.categories)??f.categories,k=(null===(p=u.planTypeAndSurveyInfo)||void 0===p?void 0:p.collaborativeIntent)??f.collaborativeIntent;return{flow_name:u.flowName,flow_id:u.flowId,stage:l({flowName:u.flowName,stageIndex:u.currentStageIndex,environment:m}),initial_workspace_type:g,is_new_onboarding:Boolean(u.isFirstTimeOnboarding),is_create_or_join:!0,stage_number:u.currentStageIndex,num_of_joinable_spaces:u.joinableSpaces.length,historical_stages:u.historicalStages,selectedPresets:void 0,user_persona:v,user_team_role:S,user_use_cases:h,user_categories:y,user_company_size:_,plan_selection:w,collaborative_intent:k,plan_type:null==b?void 0:b.getPlanType(),stage_duration_in_ms:void 0,onboarding_templates:void 0,trial_id:(0,i().vy)((0,i().E5)()),performance_marketing_term:u.performanceMarketingTerm,is_invalid_redirect:u.isInvalidRedirect,is_dark_mode:"dark"===m.ThemeStore.state.mode,selected_workflow_templates:u.selectedWorkflowTemplateIds}}function u(e){return"guest_redirect"===e.type||"redirect_page"===e.type||"redirect_space"===e.type}function g(e){return["CAN_JOIN","CAN_REQUEST"].includes(e.joinabilityStatus)}function m(e){return"public_access_page_redirect"===e.type}function b(e){if("form_response_onboarding"===e.flowName)return"string"==typeof(t=e.formSpaceIntent)&&n().ay.includes(t)?e.formSpaceIntent:"personal";var t}function f(e,t,o){const n=o.device.isMobile,{currentStageIndex:a}=e,r=d({flowName:e.flowName,environment:o}),i=r.indexOf(n?"mobile_onboarding_plan_type_choose":"onboarding_plan_type_choose");if(-1===i)return!1;if(t){const e=r.indexOf(n?"mobile_profile":"profile");return-1!==e&&a>=e}return a>=i}function v(e){return!e.device.isMobile}function S(e){var t;return"team"!==(null===(t=e.planTypeAndSurveyInfo)||void 0===t?void 0:t.planType)}function _(e,t,o){var n;const a=null===(n=e.planTypeAndSurveyInfo)||void 0===n?void 0:n.planType;switch(o){case"team":return Boolean(a&&"team"!==a);case"personal":case"school":return"team"!==a}}},63467:(e,t,o)=>{o.d(t,{y:()=>c});var n=()=>o(637997),a=()=>o(267419);const r={ko:()=>o.e(2268).then(o.bind(o,224434)),es:()=>o.e(95264).then(o.bind(o,196425)),de:()=>o.e(35390).then(o.bind(o,653703)),fr:()=>o.e(3272).then(o.bind(o,94677)),pt:()=>o.e(27315).then(o.bind(o,766869)),zh:()=>o.e(69945).then(o.bind(o,516814)),ja:()=>o.e(77757).then(o.bind(o,824432)),da:()=>o.e(9423).then(o.bind(o,440761)),fi:()=>o.e(59337).then(o.bind(o,462135)),nb:()=>o.e(2040).then(o.bind(o,937314)),nl:()=>o.e(51106).then(o.bind(o,530897)),sv:()=>o.e(53631).then(o.bind(o,895222)),id:()=>o.e(69945).then(o.bind(o,516814)),th:()=>o.e(69945).then(o.bind(o,516814)),vi:()=>o.e(69945).then(o.bind(o,516814))};let i=!1,s=!1;async function l(e){for(const[o,a]of Object.entries(e.emojiLocaleKeywords)){var t;n().fB[o]={...n().fB[o],keywords:[...a,...(null===(t=n().fB[o])||void 0===t?void 0:t.keywords)||[]]}}await a().A.waitUntilLoaded(),a().A.update((t=>{let{emojiByName:o,...n}=t;return{...n,emojiByName:{...o,...e.emojiByName}}}))}async function d(){if(i)return;const[e]=o(662303).locale.split("-");e in r&&(await l(await r[e]()),i=!0)}const c=(0,o(279900).A)((async()=>{await async function(){s||(await l(await o.e(51872).then(o.bind(o,443716))),s=!0)}(),await d()}))},69447:(e,t,o)=>{o.d(t,{Lq:()=>n,WK:()=>r,nh:()=>a});const n=40,a=48,r=60},73223:(e,t,o)=>{o.r(t),o.d(t,{dismissTutorial:()=>c,resetTutorials:()=>p,tutorialAdvanceToStep:()=>u,tutorialAdvanceToStepAfter:()=>g,tutorialGoToNextStep:()=>l,tutorialGoToPrevStep:()=>d});var n=()=>o(541235),a=()=>o(751156),r=()=>o(755199),i=()=>o(739135),s=()=>o(765957);function l(e,t){var o;const{currentUserSettingsStore:n}=s().default.state;if(!n)return;const a=null===(o=n.getSettings())||void 0===o?void 0:o.tutorials;m({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{r().mJ({userSettingsStore:n,transaction:e,data:{tutorials:{...a,[t]:(0,i().i9)(n,t)}}})},userId:n.id})}function d(e,t){var o;const{currentUserSettingsStore:n}=s().default.state;if(!n)return;const a=null===(o=n.getSettings())||void 0===o?void 0:o.tutorials;m({userAction:"TutorialActions.prevStep",environment:e,perform:e=>{r().mJ({userSettingsStore:n,transaction:e,data:{tutorials:{...a,[t]:(0,i().KD)(n,t)}}})},userId:n.id})}function c(e,t){var o;const{currentUserSettingsStore:a}=s().default.state;if(!a)return;const i=null===(o=a.getSettings())||void 0===o?void 0:o.tutorials;(null==i?void 0:i[t])!==n().YD&&m({userAction:"TutorialActions.dismissTutorial",environment:e,perform:e=>{r().mJ({userSettingsStore:a,transaction:e,data:{tutorials:{...i,[t]:n().YD}}})},userId:a.id})}function p(e){const{currentUserSettingsStore:t}=s().default.state;t&&m({userAction:"TutorialActions.resetTutorialsDebug",environment:e,perform:e=>{r().mJ({userSettingsStore:t,transaction:e,data:{tutorials:{}}})},userId:t.id})}function u(e,t,o){var a;const{currentUserSettingsStore:l}=s().default.state;if(!l||(0,i().x$)(l,t))return;const d=(0,i().gt)(l,t);n().c$[t].steps.findIndex((e=>e.id===d))>=n().c$[t].steps.findIndex((e=>e.id===o))||r().mJ({userSettingsStore:l,transaction:e,data:{tutorials:{...null===(a=l.getSettings())||void 0===a?void 0:a.tutorials,[t]:o}}})}function g(e,t,o){if((0,i().ll)(o))return;const n=(0,i().tb)(t,o);n&&u(e,t,n)}function m(e){return a().createAndCommit({...e,canUndo:!1})}},77279:(e,t,o)=>{o.r(t),o.d(t,{default:()=>a});class n extends(()=>o(757695))().Store{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const a=new n},97059:(e,t,o)=>{o.d(t,{W:()=>b,w:()=>m});o(944114);var n=()=>o(585515),a=()=>o(577449),r=()=>o(161479),i=()=>o(545285),s=()=>o(763824),l=()=>o(780054),d=()=>o(870618),c=()=>o(670631),p=()=>o(227440),u=()=>o(217429),g=()=>o(540758);async function m(e){const{environment:t}=e;return(await s().lX(Object.keys(c().A.state.offlinePages||{}),100,(e=>async function(e){const{environment:t,pageId:o}=e,s={page:{id:o,spaceId:(0,r().e)(void 0)},baseUrl:l().A.domainBaseUrl,publicDomainName:l().A.publicDomainName,shouldTraverseToggleBlocks:!0,limit:1/0,cursor:{stack:[]},verticalColumns:!1},c=[];return await n().T(s,a().h.sideEffect((e=>((0,i().u)(e)&&c.push(e.id),Promise.resolve())),a().h.fromMonomorphicFunctionUnsafe((async e=>{const o=await d().h7({environment:t,pointer:e,useInMemoryCacheOnly:!1,skipAccessWrites:!0});return null==o?void 0:o.model})))),c}({environment:t,pageId:e})))).flat()}function b(e,t){return!p().A.state.online&&(e.device.isElectron||e.device.isMobileNative)&&u().default.checkGate({gateName:"download_for_offline"})&&!(0,g().Bd)(t)}},105819:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,pencilLineIcon:()=>a});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.63 4.12 14.99 11.76",svg:(0,o(474848).jsx)("path",{d:"m13.987 5.682-.684.684-1.288-1.288.692-.691a.91.91 0 0 1 1.28 0c.35.35.35.93 0 1.28zm-9.433 9.433 7.914-7.914-1.289-1.289-7.92 7.908c-.122.122-.214.29-.274.457l-.336 1.082c-.06.229.153.442.366.366l1.082-.335q.252-.07.457-.275m12.446.76H5.61l1.25-1.25H17a.625.625 0 1 1 0 1.25"})},a=(0,o(340498).wt)("pencilLine",n)},115562:(e,t,o)=>{o.d(t,{W:()=>l});o(296540);var n=()=>o(819121),a=()=>o(401497),r=()=>o(955825),i=()=>o(677195),s=o(474848);function l(e){const{selectorSize:t="normal",...o}=e,{disabled:l,checked:d}=o,[c,p]=(0,n().A)(),u=function(e){const{checked:t,disabled:o,isFocusVisible:n,selectorSize:r}=e;return(0,a().IS)((e=>({root:{position:"absolute",display:"flex",width:"large"===r?15:11,height:"large"===r?15:11,margin:1.5,justifyContent:"center",alignItems:"center",flexShrink:0,borderRadius:"large"===r?2:1,transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${o?e.tint.regular:e.blueColor}`,background:o?e.tint.regular:e.blueColor}:{boxShadow:`0 0 0 1.5px ${o?e.icon.quaternary:e.stroke.input}`,background:e.surface.page},...n&&{boxShadow:e.buttonBlueFocusRing}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"large"===r?18:void 0,height:"large"===r?18:void 0,...o?{pointerEvents:"none"}:{cursor:"pointer"}},icon:{color:e.text.contrastPrimary,width:"large"===r?12:10,height:"large"===r?12:10,ariaHidden:!0}})),[r,t,o,n])}({checked:d,disabled:l,selectorSize:t,isFocusVisible:p});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{ref:c,type:"checkbox",style:u.input,...o}),(0,s.jsx)("span",{...(0,r().AH)(u.root,l?{}:{pseudoActive:u.active}),children:d&&(0,i().R)(u.icon)})]})}},132389:(e,t,o)=>{o.d(t,{A:()=>a});o(296540);var n=o(474848);function a(e){const t={display:"inline-block",minWidth:e.size,minHeight:e.size};return"x"===e.axis?t.minHeight=1:"y"===e.axis&&(t.minWidth=1),(0,n.jsx)("div",{style:t})}},132855:(e,t,o)=>{o.r(t),o.d(t,{arrowInCircleUpFillIcon:()=>a,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o(474848).jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 0 0-15.25 7.625 7.625 0 0 0 0 15.25m3.042-8.07a.625.625 0 0 1-.884 0L10.625 8.02v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 1 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"})},a=(0,o(340498).wt)("arrowInCircleUpFill",n)},149375:(e,t,o)=>{o.d(t,{v:()=>a});o(296540);var n=o(474848);const a=(0,o(340498).wt)("arrowLeftThick",{viewBox:"0 0 16 16",directional:!0,svg:(0,n.jsx)("path",{d:"M1.54004 8.05762C1.54004 8.2627 1.62891 8.46094 1.78613 8.61133L6.29102 13.1162C6.45508 13.2734 6.63965 13.3486 6.82422 13.3486C7.25488 13.3486 7.5625 13.041 7.5625 12.6309C7.5625 12.4189 7.48047 12.2344 7.34375 12.1045L5.8125 10.5527L3.78906 8.70703L5.38867 8.80273H13.7012C14.1455 8.80273 14.46 8.49512 14.46 8.05762C14.46 7.61328 14.1455 7.3125 13.7012 7.3125H5.38867L3.7959 7.4082L5.8125 5.5625L7.34375 4.01074C7.48047 3.87402 7.5625 3.68945 7.5625 3.47754C7.5625 3.06738 7.25488 2.7666 6.82422 2.7666C6.63965 2.7666 6.45508 2.83496 6.27734 3.00586L1.78613 7.50391C1.62891 7.64746 1.54004 7.85254 1.54004 8.05762Z"})})},162342:(e,t,o)=>{o.d(t,{W$:()=>s,fR:()=>r,iv:()=>i});var n=()=>o(228814),a=()=>o(846199);function r(e){a().A.setState({open:!0,...e})}function i(){a().A.setState({open:!1})}function s(e){n().A.setState({open:!0,...e})}},173019:(e,t,o)=>{o.d(t,{r:()=>a});o(296540);var n=o(474848);const a=(0,o(340498).wt)("pencil",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},175116:(e,t,o)=>{o.d(t,{ET:()=>l,Ks:()=>d,RI:()=>s,p2:()=>i});o(16280);var n=o(296540);const a="collectionContextStore",r=(0,o(446943).C)({displayName:a,legacyContextKey:a,modernContextDefaultValue:void 0}),i=r.context,s=r.Provider;function l(){const e=n.useContext(i);if(void 0===e)throw new Error(`No context provided: ${a}`);return e}function d(){return n.useContext(i)}},207207:(e,t,o)=>{o.d(t,{J:()=>a});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.62 2.62 15.26 15.26",svg:(0,o(474848).jsx)("path",{d:"M8.875 2.625a6.25 6.25 0 1 0 3.955 11.09l3.983 3.982a.625.625 0 1 0 .884-.884l-3.983-3.982a6.25 6.25 0 0 0-4.84-10.205m-5 6.25a5 5 0 1 1 10 0 5 5 0 0 1-10 0"})},a=(0,o(340498).wt)("magnifyingGlass",n)},228814:(e,t,o)=>{o.d(t,{A:()=>n});const n=o(757695).Store.createValue({open:!1},{name:"TrialEndModalStore"})},240865:(e,t,o)=>{o.d(t,{V:()=>r});var n=()=>o(56366),a=()=>o(765957);function r(e){return(0,n().K8)((()=>{var t;return e?e.getMemberCountFromPublicSpaceData()??void 0:(null===(t=a().default.state.currentSpaceStore)||void 0===t?void 0:t.getMemberCountFromPublicSpaceData())??void 0}),[e])}},255824:(e,t,o)=>{o.d(t,{a:()=>r});var n=()=>o(56366);const a=new(o(496506).ComputedStore)((()=>o(263711).g.state.isOpen),{debugName:"IsInPageViewModeStore"});function r(){return(0,n().O$)(a)}},256863:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=()=>o(56366),a=()=>o(824862),r=o(474848);const i=function(e){const{botValue:t,botStore:i,showActiveDot:s,style:l,size:d}=e,c=(0,o(959013).tz)(),p=(0,n().K8)((()=>{if(i){const e=i.getIcon();if(e)return{pointer:{table:a().GP,id:i.id,spaceId:i.getSpaceId()},icon:e}}else if(null!=t&&t.icon)return{pointer:{table:a().GP,id:t.id,spaceId:t.space_id},icon:t.icon}}),[i,t]),u=(0,n().K8)((()=>(null==i?void 0:i.getDisplayName(c))??(0,o(799288).Hg)(t)),[i,t,c]),{activeDotStyle:g}=(0,o(401497).IS)((e=>({activeDotStyle:{height:10,width:10,backgroundColor:e.palette.green[400],border:"2px solid white",borderRadius:"50%",position:"absolute",left:11,top:11}})),[]);return(0,r.jsxs)("div",{style:l,children:[(0,r.jsx)(o(187820).B6,{icon:p,title:u,size:d||18,disabled:!0,isEmptyPage:!1,useInvertedColors:!0}),s?(0,r.jsx)("div",{style:g}):void 0]})}},271084:(e,t,o)=>{o.d(t,{k:()=>a});o(581454);class n extends(()=>o(757695))().Store{getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}getSortedUserIds(){return Object.entries(this.state||{}).sort(((e,t)=>{let[o,n]=e,[a,r]=t;return r-n})).map((e=>{let[t,o]=e;return t}))}}const a=new n;(0,o(604341).exposeDebugValue)("UserSimilarityStore",a)},279900:(e,t,o)=>{function n(e){let t,o,n;return async function(){for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t?(n=r,o||(o=t.then((()=>(o=void 0,t=e(...n),t))),o)):(t=e(...r),t)}}o.d(t,{A:()=>n})},285518:(e,t,o)=>{o.d(t,{R:()=>a});o(898992),o(354520),o(581454);var n=()=>o(496603);function a(e){return e&&e.isReady()?n().sb(e.getSpaceViewStores().filter((e=>e.getJoined())).map((e=>e.getSpaceId()))).length:void 0}},320865:(e,t,o)=>{o.d(t,{A:()=>a});o(296540);var n=o(474848);const a=function(){return(0,n.jsx)(o(678553).Ay,{title:(0,n.jsx)(o(331542).A,{})})}},322920:(e,t,o)=>{o.r(t),o.d(t,{getContextualizedOnboardingFlowName:()=>i,getMobileTutorialStages:()=>s});var n=()=>o(820103),a=()=>o(47373),r=()=>o(757156);async function i(e,t){for(const o of n().uL){const n=r().onboardingFlowNameToFlowConfig[o],a=e.device.isMobile,{isEnabledForMobile:i,isEnabledForDesktop:s}=n;if((a&&i||!a&&s)&&await n.shouldShowFlowToUser(e,t))return o}return n().JT}function s(e){switch((0,a().DV)({environment:e})){case"v1":return["mobile_onboarding_home","mobile_onboarding_creation","mobile_onboarding_share","mobile_onboarding_multi_platform"];case"v2":return["mobile_onboarding_home","mobile_onboarding_creation","mobile_onboarding_share"];case"v3":return["mobile_onboarding_skill_mab","mobile_onboarding_skill_filing","mobile_onboarding_skill_swipe"];default:return["mobile_onboarding_editor","mobile_onboarding_sidebar","mobile_onboarding_desktop","mobile_onboarding_web_clipper","mobile_onboarding_app_download"]}}},380048:(e,t,o)=>{o.d(t,{I:()=>a});o(296540);var n=o(474848);const a=(0,o(340498).wt)("chevronLeft",{viewBox:"0 0 16 16",directional:!0,svg:(0,n.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},381138:(e,t,o)=>{o.d(t,{q:()=>a});o(296540);var n=o(474848);const a=(0,o(340498).wt)("search",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M.281 6.438c0-.875.164-1.696.492-2.461a6.484 6.484 0 011.375-2.032A6.237 6.237 0 016.64.078 6.2 6.2 0 019.11.57c.77.328 1.447.787 2.03 1.375a6.374 6.374 0 011.368 2.032c.333.765.5 1.586.5 2.46 0 .688-.107 1.342-.32 1.961a6.28 6.28 0 01-.868 1.696l3.563 3.578c.11.104.19.226.242.367.057.14.086.29.086.445 0 .22-.05.417-.149.594a1.122 1.122 0 01-1 .57c-.156 0-.307-.028-.453-.086a1.058 1.058 0 01-.382-.25l-3.586-3.585c-.5.333-1.047.596-1.641.789a6.089 6.089 0 01-1.86.28 6.237 6.237 0 01-2.468-.491 6.4 6.4 0 01-2.024-1.367A6.509 6.509 0 01.773 8.913a6.256 6.256 0 01-.492-2.476zm1.664 0c0 .65.12 1.26.36 1.828a4.775 4.775 0 001.015 1.5c.433.427.933.763 1.5 1.007a4.548 4.548 0 001.82.368c.652 0 1.261-.123 1.829-.368a4.747 4.747 0 002.508-2.507 4.567 4.567 0 00.367-1.829c0-.645-.123-1.252-.367-1.82a4.776 4.776 0 00-1.016-1.5A4.578 4.578 0 008.469 2.11a4.567 4.567 0 00-1.828-.367c-.646 0-1.253.123-1.82.367a4.667 4.667 0 00-1.5 1.008c-.433.432-.772.932-1.016 1.5a4.633 4.633 0 00-.36 1.82z"})})},382055:(e,t,o)=>{o.d(t,{$3:()=>p,AQ:()=>d,Ae:()=>l,BL:()=>c,FL:()=>s,FX:()=>a,Vp:()=>i,XL:()=>r,nY:()=>u});var n=()=>o(679924);function a(e,t){(0,n().v)(e,"workspace_creation_ability",t)}function r(e,t){(0,n().v)(e,"workspace_creation_setting_updated",t)}function i(e,t){(0,n().v)(e,"claimable_spaces_viewed",t)}function s(e,t){(0,n().v)(e,"space_transfer_requested",t)}function l(e,t){(0,n().v)(e,"space_transfer_completed",t)}function d(e,t){(0,n().v)(e,"space_claim_upgrade_requested",t)}function c(e,t){(0,n().v)(e,"space_claim_upgrade_completed",t)}function p(e,t){(0,n().v)(e,"space_claim_deletion_started",t)}function u(e,t){(0,n().v)(e,"space_claim_deletion_canceled",t)}},398217:(e,t,o)=>{o.d(t,{Jv:()=>f,Rl:()=>v,mA:()=>b});var n=o(296540),a=()=>o(484714),r=()=>o(56366),i=()=>o(401497),s=()=>o(970013),l=()=>o(743176),d=()=>o(780054),c=()=>o(68465),p=()=>o(159588),u=()=>o(963589),g=o(474848);const m=function(){return(0,g.jsx)(o(464708).A,{color:"purple",style:{marginLeft:6,padding:"1px 4px",display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1},content:(0,g.jsx)(o(959013).sA,{defaultMessage:"AI",id:"database.property.aiAutofillEnabledIndicator"})})};const b=n.memo((function(e){const{propertySchema:t,showIcon:n,showDragIcon:a,hideName:r,badge:s,style:l,iconStyle:c,iconSize:u,dragHandleStyle:m,className:b,labelSizeVariant:f}=e,S=d().A.isMobile?16:14,_=(0,i().IS)((e=>({container:{display:"flex",alignItems:"center",lineHeight:"120%",minWidth:0,fontSize:S,...l},iconWrapper:{display:"grid",justifyContent:"center",alignItems:"center",marginRight:r?void 0:"small"===f||a?4:d().A.isMobile?9:6,...c},dragHandle:{gridColumn:1,gridRow:1,opacity:a?1:0,transition:`opacity ${p().bM}`},itemIcon:{gridColumn:1,gridRow:1,opacity:a?0:1,transition:`opacity ${p().bM}`},dragIcon:{fill:e.icon.secondary}})),[S,r,c,f,a,l]);return(0,g.jsxs)("div",{className:b,style:_.container,children:[n&&(0,g.jsxs)("div",{style:_.iconWrapper,children:[(0,g.jsx)("div",{style:_.itemIcon,children:(0,g.jsx)(v,{propertySchema:t,iconSize:u,iconStyle:c})}),(0,g.jsx)("div",{style:_.dragHandle,children:(0,g.jsx)(o(57232).A,{style:m,iconSize:12,iconStyle:_.dragIcon})})]}),!r&&(0,g.jsx)("div",{style:{...o(284371).RC},children:t.name}),s]})}));function f(e){const{propertySchema:t}=e,o=(0,a().v3)();return(0,r().K8)((()=>(0,c().O0)(o)&&s().$M(t)&&s().om(t)),[o,t])?(0,g.jsx)(m,{}):null}function v(e){const{propertySchema:t,iconSize:o,iconStyle:n}=e,a=(0,i().DP)(),r=(0,u().X)("nds_default_property_noticon"),s=d().A.isMobile?18:16;return(0,g.jsx)(l().zB,{type:t.type,icon:t.icon,size:o||s,theme:a,style:n,isDefaultNoticonEnabled:r})}},406533:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>a,questionMarkCircleIcon:()=>r});o(296540);var n=o(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},r=(0,o(340498).wt)("questionMarkCircle",a)},413267:(e,t,o)=>{o.d(t,{b:()=>a});o(296540);var n=o(474848);const a=(0,o(340498).wt)("thinCheck",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M6.385 14.162c.362 0 .642-.15.84-.444L13.652 3.71c.144-.226.205-.417.205-.602 0-.485-.341-.82-.833-.82-.335 0-.54.123-.746.444l-5.926 9.4-3.042-3.903c-.205-.267-.417-.376-.718-.376-.492 0-.848.348-.848.827 0 .212.075.417.253.629l3.541 4.416c.24.3.492.437.848.437z"})})},454531:(e,t,o)=>{o.d(t,{W:()=>b});var n=()=>o(780054),a=()=>o(972435),r=()=>o(867772),i=()=>o(681810),s=()=>o(901389),l=()=>o(896628),d=()=>o(383594),c=()=>o(675925),p=()=>o(751156),u=()=>o(892632);const g=1500,m=(0,o(959013).YK)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},preparing:{defaultMessage:"Preparing...",id:"pageCover.status.preparing"},downloading:{defaultMessage:"Downloading...",id:"pageCover.status.downloading"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image link…",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function b(e){let{environment:t,intl:o,store:n,rect:a,from:r}=e;d().W(t,{originGap:3,originRect:a,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:o.formatMessage(m.pageCover),onDelete:()=>{!function(e){let{environment:t,store:o}=e;d().I(),p().createAndCommit({userAction:"PageCover.handleDelete",environment:t,canUndo:!0,perform:e=>{l().PT({store:o,transaction:e})}})}({environment:t,store:n})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:o,position:a}=e;(0,c().o)(t,{action:"edit_cover",block_type:"page",from:r},(e=>{v({environment:t,store:n,url:{originUrl:o},position:a}),e()}))}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:o.formatMessage(m.fileTypeCaption,{idealImageWidth:g}),onUpload:e=>{(0,c().o)(t,{action:"edit_cover",block_type:"page",from:r},(a=>{var r;d().I(),u().QM({environment:t,file:e[0],bucket:"secure",record:(null===(r=n.getCoverStore())||void 0===r?void 0:r.pointer)??n.pointer,isFileBlock:!1,reportRichUploadMetrics:!0,onStart:S,onProgress:_,onComplete:e=>{var o;o={environment:t,store:n,url:{originUrl:e}},f({...o,position:.5})},onError:()=>{s().f1(o.formatMessage(m.uploadFailed))}}),a()}))}},{type:"embed",title:o.formatMessage(m.embedTitle),inputPlaceholder:o.formatMessage(m.embedPlaceholder),caption:o.formatMessage(m.embedCaption),buttonText:o.formatMessage(m.embedSubmit),onChange:e=>{(0,c().o)(t,{action:"edit_cover",block_type:"page",from:r},(o=>{var a;a={environment:t,store:n,url:e},f({...a,position:.5}),d().I(),o()}))}},{type:"unsplash",onChange:e=>{let{url:o,position:a}=e;(0,c().o)(t,{action:"edit_cover",block_type:"page",from:r},(e=>{v({environment:t,store:n,url:{originUrl:o},position:a}),e()}))}}]})}async function f(e){const{environment:t,store:o,url:n,position:s}=e,{serverCommitResult:d}=p().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{l().fg({store:o,url:n,position:s||.5,transaction:e})}});await d,i().A.state.loadingMode===r().vS&&i().A.setState({loadingMode:r().Gi,dataURL:i().A.state.dataURL,uploadProgress:t.device.isMobileNative?void 0:100,progressText:a().A.formatMessage(m.downloading)})}function v(e){f(e),n().A.isMobile&&d().I()}function S(e){const{file:t,name:o,size:n}=e;if(d().I(),i().A.setState({loadingMode:r().Wc,file:t,name:o,size:n}),t.type.indexOf("image")>=0)if(t instanceof File){const e=new FileReader;e.onload=e=>{i().A.state.loadingMode===r().Wc&&i().A.setState({...i().A.state,loadingMode:r().vS,uploadProgress:0,dataURL:e.target.result})},e.readAsDataURL(t)}else i().A.state.loadingMode===r().Wc&&i().A.setState({...i().A.state,loadingMode:r().vS,dataURL:t.dataURL,progressText:a().A.formatMessage(m.preparing)});else i().A.state.loadingMode===r().Wc&&i().A.setState({...i().A.state,loadingMode:r().vS,progressText:a().A.formatMessage(m.preparing)})}function _(e){const{progressPercent:t,progressText:o}=e;i().A.state.loadingMode===r().vS&&i().A.setState({...i().A.state,uploadProgress:t,progressText:o})}},458366:(e,t,o)=>{o.d(t,{B2:()=>T,F1:()=>C,Kc:()=>y,NN:()=>D,UY:()=>h,br:()=>A,lA:()=>x,lh:()=>k,pi:()=>S,w_:()=>w,zP:()=>_});o(898992),o(737550);var n=()=>o(584262),a=()=>o(443239),r=()=>o(970013),i=()=>o(713998),s=()=>o(882262),l=()=>o(415566),d=()=>o(177256),c=()=>o(72135),p=()=>o(919709),u=()=>o(496603),g=()=>o(534177),m=()=>o(939768),b=()=>o(720665),f=()=>o(492414),v=()=>o(972435);function S(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function _(e){switch(e){case"table":return"table";case"board":return"board";case"list":return"list";case"gallery":return"gallery";case"feed":return"feed";case"relation":case"relation_section":return"relation_section";case"timeline":return"timeline";case"calendar":return"calendar";case"page":return"page_properties";case"compact_page":return"compact_page";case"mini":return"mini_peek";case"form_editor":case"form_viewer":case"property_module":return"property_module";default:(0,g().HB)(e)}}function w(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function h(e){const{store:t,property:o,propertySchema:a}=e,r=null==a?void 0:a.type;if("title"===r)return(0,f().Ay)({store:t,fullyQualified:!1,pageVisitSource:n().y8.LinkInPage});{const e=t.getPropertyValue(o);return i().UY(r,e)}}function y(e){let t=(0,p().k4p)(e);if(!t||""===t.trim()||t.trim().includes(" "))return{domain:void 0,restOfUrl:void 0};t=t.trim();let o=m().qg(t),n=o.host;if(o.protocol&&n||(o=m().qg(`http://${t}`),n=o.host),!n)return{domain:void 0,restOfUrl:void 0};n&&(n=n.replace(/^www./i,""));const a=t.toLowerCase().indexOf(n.toLowerCase());if(-1===a)return{domain:void 0,restOfUrl:void 0};n=t.slice(a,a+n.length);return{domain:n,restOfUrl:t.slice(a+n.length)}}function k(e){const{numberValue:t,numberFormat:o,numberShowAs:n}=e;if(!(u().yr(t)||b().pN(t)||"bar"!==(null==n?void 0:n.type)&&"ring"!==(null==n?void 0:n.type))){const e=v().A.getIntl();return"percent"===o?c().ZV(t,"percent",e):`${t} / ${n.maxValue}`}}function C(e){const{property:t,collectionStore:o}=e,n=o.isSyncedCollection();return Boolean(n)&&(0,a().u)(t)}function x(e,t){switch(e){case"side_peek":return{icon:d().A,tooltip:v().A.formatMessage(I.openInSidePeekTooltip),caption:t?"":v().A.formatMessage(I.openAsPageTitle)};case"center_peek":return{icon:l().q,tooltip:v().A.formatMessage(I.openInCenterPeekTooltip),caption:t?"":v().A.formatMessage(I.openAsPageTitle)};case"full_page":return{icon:s().m,tooltip:v().A.formatMessage(I.openAsPageTooltip),caption:t?"":v().A.formatMessage(I.openAsPageTitle)};default:(0,g().HB)(e)}}const I=(0,o(959013).YK)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function A(e){const{store:t,additionalStores:o,collectionContextStore:n}=e,a=t.getAssociatedCollectionStore();return!("collectionTypedView"!==(null==n?void 0:n.contextType)||!a)&&o.some((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==a.id}))}function D(e){return"form_editor"===e||"form_viewer"===e}function T(e){return Boolean(e&&!r().dA.includes(e.type))}},465364:(e,t,o)=>{o.d(t,{$N:()=>P,D5:()=>O,GB:()=>A,M9:()=>x,Pt:()=>T,eW:()=>D,jo:()=>j,v7:()=>I});o(944114),o(898992),o(803949),o(581454);var n=()=>o(244641),a=()=>o(787626),r=()=>o(713998),i=()=>o(597777),s=()=>o(604995),l=()=>o(416504),d=()=>o(519831),c=()=>o(496603),p=()=>o(534177),u=()=>o(299709),g=()=>o(317001),m=()=>o(520861),b=()=>o(878060),f=()=>o(44729),v=()=>o(246826),S=()=>o(319975),_=()=>o(519839),w=()=>o(695625),h=()=>o(397248),y=()=>o(217429),k=()=>o(630116),C=()=>o(747671);function x(e){const{environment:t,droppedStores:o,duplicate:r,calendarBy:c,transaction:p,collectionContextStore:b,duplicateActions:v}=e,S=n().c9.fromMillis(e.startOfDay);let w=!0;for(const n of o){const t=e.collectionStore?e.collectionStore:(0,_().Dj)({store:n,collectionContextStore:b});if(n.getParentTable()===d().Vl||!t){w=!1;break}f().X$({childStore:n,parentStore:t,transaction:p})||(w=!1)}const h=(0,m().T)({environment:t,droppedStores:o,duplicate:r,transaction:p,collectionStore:e.collectionStore,duplicateActions:v});for(const n of h){const o=e.collectionStore?e.collectionStore:(0,_().Dj)({store:n,collectionContextStore:b});if(!o)continue;const r=o.getMappedProperty(c),d=n.getPropertyStore(r),m=(0,a().b)(d.getValue())||s().Ec((0,l().P)()),f=s().kW(m,(0,l().P)()),v=S.toFormat(s().tr);let h;if("date"===f.type||"datetime"===f.type)h={...f,start_date:v};else{const e=s().AA(f,(0,l().P)());if(!e.end)return;const t={...f,start_date:v},o=s().AA(t,(0,l().P)()).start.diff(e.start,"days"),n=e.end.plus(o).toFormat(s().tr);h={...f,start_date:v,end_date:n}}const y=s().kW(h,i().$K(m)||(0,l().P)());(0,g().j)({environment:t,store:n,collectionStore:o,collectionContextStore:b,shouldCoerce:!0,groupsPointer:[],transaction:p,alreadyMovedToCollection:w}),O({environment:t,type:"dateValue",propertyId:r,store:n,transaction:p,dateValue:y}),(0,u().E)({environment:t,collectionContextStore:b,block_id:n.id,property:r,property_type:"date",from:"calendar"})}}function I(e){const{calendarStore:t,direction:o,targetStore:n}=e;t.setState({...t.state,isDragging:!0,targetStore:n,direction:o,temporaryValue:void 0})}function A(e){const{calendarStore:t,x:o,y:r,calendarBy:d}=e,p=t.state;if(p.isDragging){const e=(0,a().b)(p.targetStore.getPropertyStore(d).getValue());if(!e)return;const u=s().kW(e,(0,l().P)()),g=p.temporaryValue||e,m=s().kW(g,(0,l().P)()),b=[];p.dayStoreMap.forEach(((e,t)=>{b.push({store:e,timestamp:t})}));const f=b.find((e=>{let{store:t}=e;const n=w().T.getRectFromStore(t);return Boolean(n&&h().ux(n,o,r))}));let v;if(f){const e=n().c9.fromMillis(f.timestamp),t=e.endOf("day"),o=e.toFormat(s().tr);if(u){const a=s().AA(u,(0,l().P)());if(p.direction===C().Q.Left)if(n().IX.fromDateTimes(e,t).contains(a.start))v=u;else{let e;e="datetimerange"===u.type||"daterange"===u.type?{...u,start_date:o,end_date:u.end_date}:"datetime"===u.type?{type:"datetimerange",start_date:o,start_time:u.start_time,end_date:u.start_date,end_time:u.start_time,time_zone:u.time_zone,reminder:u.reminder}:{type:"daterange",start_date:o,end_date:u.start_date,reminder:u.reminder};const t=s().AA(e,(0,l().P)());v=!a.end&&t.start>a.start||a.end&&t.start>a.end?m:e}else if(a.end?n().IX.fromDateTimes(e,t).contains(a.end):n().IX.fromDateTimes(e,t).contains(a.start))v=u;else{let e;e="date"===u.type?{...u,type:"daterange",end_date:o}:"datetime"===u.type?{...u,type:"datetimerange",end_date:o,end_time:"00:00"}:{...u,end_date:o};const t=s().AA(e,(0,l().P)());v=t.end&&t.end<t.start?m:e}}}if(v&&!c().n4(m,v)){const e=s().kW(v,i().$K(g)||(0,l().P)());t.setState({...p,temporaryValue:e})}}}function D(e){const{environment:t,calendarStore:o,calendarBy:n,transaction:a}=e,r=o.state;r.isDragging&&r.temporaryValue&&(O({type:"dateValue",environment:t,dateValue:r.temporaryValue,propertyId:n,store:r.targetStore,transaction:a}),o.setState({...o.state,isDragging:!1}))}function T(e){const{calendarStore:t}=e,o=t.state;o.isDragging&&t.setState({...o,isDragging:!1})}function P(e){const{environment:t,store:o,collectionStore:a,collectionContextStore:i,startDayOfWeek:d,transaction:c}=e,p=i.dateRangeStartStore.state,u=(0,l().P)(),m=i.normalizedQueryStore.state;if(!m||!m.calendar_by)return;const b=(null==a?void 0:a.getMappedProperty(m.calendar_by))??m.calendar_by,f=s().hp(p,d,u),S=f.startOf("month"),_=f.endOf("month"),w=n().c9.now().startOf("day");let h;return h=n().IX.fromDateTimes(S,_).contains(w)?s().p6(w.valueOf(),u):s().p6(s().iB(p,d,u).valueOf(),u),v().zv({store:o.getPropertiesStore(),data:{[b]:r().m5(h)},transaction:c}),(0,g().j)({environment:t,store:o,collectionStore:a,collectionContextStore:i,shouldCoerce:!0,groupsPointer:[],transaction:c}),o}function O(e){const{environment:t,store:o,propertyId:n,transaction:a}=e;let i;"timestamp"===e.type?i=s().p6(e.timestampMs.valueOf(),(0,l().P)()):"dateValue"===e.type?i=e.dateValue:(0,p().HB)(e);const d=o.getPropertyValue(n);if(i&&function(e){const{propertyId:t,oldDateValue:o,newPersistedDate:n,store:a}=e;if(o||!n||void 0!==n.reminder)return!1;if(!y().default.checkGate({gateName:"adoption_reminder_collection_default"}))return!1;const r=M(t,a);if(void 0===r)return!1;return!0}({propertyId:n,oldDateValue:d,newPersistedDate:i,store:o})){const e=M(n,o);void 0!==e&&(i={...i,reminder:e})}const c=r().m5(i);v().zv({store:o.getPropertiesStore(),data:{[n]:c},transaction:a}),b().O({environment:t,store:o,dateProperty:{id:n,oldValue:d,newValue:c}})}function M(e,t){const o=t.getAssociatedCollectionStore();if(!o)return;const n=o.getSchema();if(!n)return;const a=n[e];return a&&"date"===a.type?a.default_reminder:void 0}function j(e){const{environment:t,collectionStore:o,calendarBy:n,store:a,insertStores:r,collectionContextStore:i,transaction:s}=e,l=a.getPropertyStore(n).getValue();for(const d of r)(0,g().j)({environment:t,store:d,collectionStore:o,collectionContextStore:i,shouldCoerce:!0,groupsPointer:[],transaction:s}),S().R9({environment:t,store:d.getPropertyStore(n),value:l,transaction:s});return r.map((e=>k().Bv.createChildStore(o,e.pointer)))}},477293:(e,t,o)=>{o.d(t,{r:()=>r});var n=()=>o(56366),a=()=>o(217429);function r(e){let{disableExposureLogging:t,disableEventTrailLogging:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n().K8)((()=>a().default.getEligibleGroup({experimentId:e,defaultGroup:"control",disableExposureLogging:t,disableEventTrailLogging:o})),[e,t,o])}},505108:(e,t,o)=>{o.d(t,{a:()=>g});var n=o(296540),a=()=>o(401497),r=()=>o(534177),i=()=>o(284371),s=()=>o(84817),l=()=>o(819121),d=()=>o(955825),c=o(474848);function p(e){const{disabled:t,checked:o,selectorSize:n}=e,[r,i]=(0,l().A)(),s=function(e){const{checked:t,disabled:o,isFocusVisible:n,selectorSize:r}=e;return(0,a().IS)((e=>({root:{position:"absolute",display:"flex",width:15,height:15,padding:5,margin:1.5,justifyContent:"center",alignItems:"center",gap:8,flexShrink:0,borderRadius:"50%",transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${o?e.tint.regular:e.blueColor}`,background:o?e.tint.regular:e.blueColor}:{boxShadow:`0 0 0 1.5px ${o?e.icon.quaternary:e.stroke.input}`,background:e.surface.page},...n&&{boxShadow:e.buttonBlueFocusRing}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"small"===r?14:18,height:"small"===r?14:18,...o?{pointerEvents:"none"}:{cursor:"pointer"}}})),[t,o,n,r])}({checked:o,disabled:t,isFocusVisible:i,selectorSize:n});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",{ref:r,type:"radio",style:s.input,className:"radio-button",...e}),(0,c.jsx)("span",{...(0,d().AH)("custom-radio-button",s.root,t?{}:{pseudoActive:s.active})})]})}var u=()=>o(554509);const g=n.forwardRef((function(e,t){let{additionalContent:o,description:r,isDisabled:l,isSelected:d,label:p,name:u,onChange:g,width:f="fill",selectorSize:v="normal",selectAlignXAxis:S="left",selectAlignYAxis:_="center",selectType:w="checkbox",style:h,supportText:y,value:k,colorName:C,alignAdditionalContent:x,...I}=e;const A=(0,n.useId)(),D=function(e){const{isSelected:t,isDisabled:o,selectAlignYAxis:n,alignAdditionalContent:r}=e;return(0,a().IS)((e=>{const a=t&&!o?e.blueColor:e.selectorBorderUnselected;return{container:{display:"flex",alignItems:r??"center",gap:12,userSelect:"none",padding:"9px 16px 10px 10px",borderRadius:6,border:`1px solid ${a}`,...!o&&{cursor:"pointer"}},title:{fontWeight:i().Wy.medium,fontSize:14,userSelect:"none",lineHeight:18},additionalContentWrapper:{flexShrink:0},selectorWrapper:{display:"flex",..."top"===n?{marginTop:2}:{}},rightAlignSelectorWrapper:{display:"flex"}}}),[t,o,n,r])}({isSelected:d,isDisabled:l,selectAlignYAxis:_,alignAdditionalContent:x}),T=(0,c.jsxs)(s().Y1,{direction:"horizontal",align:"top"===_?"top-left":"center-left",gap:12,width:f,children:[(0,c.jsx)("div",{style:D.selectorWrapper,children:(0,c.jsx)(b,{id:A,selectType:w,name:u,value:k,onChange:g,isSelected:d,selectorSize:v,isDisabled:l,...I})}),(0,c.jsx)(m,{colorName:C,description:r,label:p,selectorSize:v,supportText:y,isDisabled:l})]}),P=(0,c.jsxs)(s().Y1,{direction:"horizontal",align:"top"===_?"top-center":"center",gap:12,children:[(0,c.jsx)(m,{colorName:C,description:r,label:p,selectorSize:v,supportText:y,isDisabled:l}),(0,c.jsx)("div",{style:{...D.selectorWrapper,...D.rightAlignSelectorWrapper},children:(0,c.jsx)(b,{id:A,selectType:w,name:u,value:k,onChange:g,selectorSize:v,isSelected:d,isDisabled:l,...I})})]}),O=o?(0,c.jsx)("div",{style:D.additionalContentWrapper,children:o}):null;return(0,c.jsx)("label",{ref:t,style:{...D.container,...h},htmlFor:A,children:"left"===S?(0,c.jsxs)(c.Fragment,{children:[T,O]}):(0,c.jsxs)(c.Fragment,{children:[O,P]})})}));function m(e){const{description:t,label:o,supportText:n,selectorSize:a,isDisabled:i,colorName:l}=e;let d;return"large"===a?d="Page-Content/Text-Block":"normal"===a||void 0===a?d="Body-13px/Medium":"small"===a?d="Body-12px/Regular":(0,r().HB)(a),(0,c.jsxs)(s().Y1,{gap:4,children:[(0,c.jsxs)(s().Y1,{gap:2,children:[(0,c.jsx)(u().D,{styleName:d,colorName:l||(i?"quaternary":"primary"),children:o}),t?(0,c.jsx)(u().D,{styleName:"Caption-12px/Regular",colorName:i?"quaternary":"secondary",children:t}):null]}),n?(0,c.jsx)(u().D,{styleName:"Caption-12px/Medium",colorName:"tertiary",children:n}):null]})}function b(e){const{selectType:t,selectorSize:n="normal",id:i,name:s,value:l,onChange:d,isSelected:u,isDisabled:g,...m}=e,b=(0,a().IS)((()=>({checkboxWrapper:{minWidth:18,display:"flex",justifyContent:"center"}})),[]);switch(t){case"radio":return(0,c.jsx)(p,{id:i,name:s,value:l,onChange:d,checked:u,disabled:g,selectorSize:n,...m});case"checkbox":return(0,c.jsx)("div",{style:b.checkboxWrapper,children:(0,c.jsx)(o(115562).W,{id:i,name:s,value:l,onChange:d,checked:u,disabled:g,selectorSize:n,...m})});case"none":return null;default:(0,r().HB)(t)}}},520861:(e,t,o)=>{o.d(t,{T:()=>a});o(944114),o(898992),o(908872);var n=()=>o(415651);function a(e){const{environment:t,collectionStore:o,duplicate:a,droppedStores:r,transaction:i,duplicateActions:s}=e,{movedStores:l,reparentedStores:d}=r.reduce(((e,t)=>(a||t.getAssociatedCollectionId()!==(null==o?void 0:o.id)?e.reparentedStores.push(t):e.movedStores.push(t),e)),{movedStores:[],reparentedStores:[]});return[...l,...n().MS({environment:t,droppedStores:d,duplicate:a,transaction:i,resolveTemplateVariables:!1,duplicateActions:s})]}},525432:(e,t,o)=>{o.d(t,{Bd:()=>s,DN:()=>m,II:()=>_,R8:()=>S,U9:()=>v,VM:()=>f,ZF:()=>u,ZI:()=>c,bf:()=>d,jx:()=>p,wW:()=>b,xO:()=>l});o(16280),o(296540);var n=()=>o(651124),a=()=>o(959013),r=()=>o(712505),i=o(474848);let s=function(e){return e[e.ViewSettings=0]="ViewSettings",e[e.FilterBar=1]="FilterBar",e[e.TopbarFilterPopup=2]="TopbarFilterPopup",e[e.TopbarSortPopup=3]="TopbarSortPopup",e[e.TopbarFollowPopup=4]="TopbarFollowPopup",e[e.MobileSheet=5]="MobileSheet",e}({});const l=480,d=320;function c(e){const{timelineViewTab:t,collectionContextStore:o}=e,a=p({collectionContextStore:o}),r=u({collectionContextStore:o});return"timeline"===a?"timeline"===t?"timeline_properties":r?"timeline_table_properties":void 0:(0,n().u9)(p({collectionContextStore:o}))}function p(e){var t;const{collectionContextStore:o}=e,n=null===(t=o.collectionViewStore())||void 0===t?void 0:t.getType();if(!n)throw new Error("View type was not defined.");return n}function u(e){const{collectionContextStore:t}=e,o=t.normalizedFormatStore.state;return Boolean(o.timeline_show_table)}const g=600;function m(e,t,o){const n=o||0,a=e.settingsStore.state;if(a.open&&!0!==a.hideSettingsPopup)return b(e,t,n)}function b(e,t,o){const n=o||0,a=e.settingsStore.state,i=p({collectionContextStore:e});return a.open&&"form_editor"===i||t||r().default.isSidePeekOpen()||e.isInHomeWidgetStore.state||e.isInlineViewStore.state||n<=g?"popup":"sidebar"}function f(e){let{hasOnlyLinkedDataSources:t,isCollectionViewPageWithContent:o,locked:n}=e;return o?n?(0,i.jsx)(a().sA,{defaultMessage:"Unlock wiki",id:"action.unlockWikiName.name"}):(0,i.jsx)(a().sA,{defaultMessage:"Lock wiki",id:"action.lockWikiName.name"}):t?n?(0,i.jsx)(a().sA,{defaultMessage:"Unlock views",id:"database.viewSettings.mainTab.unlockViews.title"}):(0,i.jsx)(a().sA,{defaultMessage:"Lock views",id:"database.viewSettings.mainTab.lockViews.title"}):n?(0,i.jsx)(a().sA,{defaultMessage:"Unlock database",id:"database.viewSettings.mainTab.unlockDatabase.title"}):(0,i.jsx)(a().sA,{defaultMessage:"Lock database",id:"database.viewSettings.mainTab.lockDatabase.title"})}let v=function(e){return e[e.Source=0]="Source",e[e.Relation=1]="Relation",e}({});const S=6;function _(e){let{currentViewType:t,isPlaceholderExternalCollection:o,collectionContextStore:n,allowedActions:a,settingsHeaderSizeObserver:r}=e;return"page"!==t&&"form_editor"!==t&&(!o&&(!!n.shouldAllowNewItemCreation()&&(!(a&&!a.includes("addItem"))&&!(r&&r.rect.state.width>d))))}},541235:(e,t,o)=>{o.d(t,{YD:()=>r,c$:()=>n,q_:()=>a});const n={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]}},a="completed",r="dismissed"},544862:(e,t,o)=>{o.d(t,{A:()=>k});var n=o(296540),a=()=>o(484714),r=()=>o(56366),i=()=>o(959013),s=()=>o(896628),l=()=>o(454531),d=()=>o(751156),c=()=>o(478726),p=()=>o(227440),u=()=>o(867772),g=()=>o(681810),m=()=>o(608581),b=()=>o(145214),f=()=>o(704152),v=()=>o(807683),S=()=>o(401497),_=()=>o(534177),w=o(474848);function h(e){let{src:t,placeholderSrc:o,placeholderBehavior:a,imageStyle:r,containerStyle:i,onLoadComplete:s,testId:l}=e;const[d,c]=(0,n.useState)(!0);let p;switch(a){case"force-show-placeholder":p=!0;break;case"force-show-src":p=!1;break;case"show-placeholder-if-loading-src":p=!!o&&(d||void 0===t);break;default:(0,_().HB)(a)}const u=(0,S().IS)((()=>{const e={gridColumn:1,gridRow:1};return{container:{display:"grid",...i},srcWrapper:{...p&&{display:"none"},...e},placeholderWrapper:{pointerEvents:"none",...e}}}),[i,p]);(0,n.useEffect)((()=>{void 0!==t&&c(!0)}),[t]);const g=(0,n.useCallback)((e=>{c(!1),null==s||s()}),[s]);return(0,w.jsxs)("div",{style:u.container,children:[(0,w.jsx)(v().Ay,{src:t,onLoad:g,style:r,placeholderStyle:u.srcWrapper,placeholderLoadedStyle:u.srcWrapper,testId:l}),o&&(0,w.jsx)(v().Ay,{src:o,style:r,placeholderStyle:u.placeholderWrapper,placeholderLoadedStyle:u.placeholderWrapper})]})}var y=()=>o(453101);const k=function(e){let{store:t,disabled:i,paddingRight:l,paddingLeft:c,height:p,proxyWidth:m}=e;const b=(0,a().v3)(),f=(0,a().Y0)(),S=(0,r().uB)(void 0,o(454305).A),_=(0,r().K8)((()=>i||"suggest"===o(77246).Uv.getMode(t)||(0,o(600871).aD)(f)),[i,t,f]),y=(0,r().K8)((()=>t.getCover()),[t]),k=(0,r().O$)(g().A),[I,A]=(0,n.useState)(void 0);if(!y)return null;const D=k.loadingMode!==u().pF&&k.loadingMode!==u().Wc;return(0,w.jsx)(o(801678).A,{mouseStore:S,onFlushTemporaryPosition:e=>function(e,t,o){const{imagePosition:n,reset:a}=e;d().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:o,canUndo:!0,perform:e=>{s().yY({store:t,coverPosition:n,transaction:e}),a()}})}(e,t,b),renderControl:e=>{let{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:a,isVisible:r,isRepositioning:i}=e;return(0,w.jsx)(x,{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:a,isVisible:r,isRepositioning:i,lastProxiedUrl:I,store:t,disabled:_,paddingRight:l,paddingLeft:c,mouseStore:S})},source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:p,maxHeight:280,cursor:"default"},preventClickPropagation:!0,render:e=>(0,w.jsxs)(n.Fragment,{children:[(0,w.jsx)(o(360083).A,{url:y.cover,isAuthenticated:!0,permissionRecord:y.pointer,width:m,onFinishedLoadingProxyUrl:A,render:(t,o)=>{const n={width:"100%",height:p,maxHeight:280,objectFit:"cover",opacity:D?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},a={width:"100%",height:p,maxHeight:280};return(0,w.jsx)(h,{src:o,placeholderSrc:D?k.dataURL:void 0,placeholderBehavior:D?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:a,imageStyle:n,onLoadComplete:C,testId:"pageCover"})}}),D&&(0,w.jsxs)("div",{style:v().fd,children:[(0,w.jsx)(o(331542).A,{size:"md",style:{marginRight:4}}),(0,w.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:void 0!==k.uploadProgress?(0,w.jsx)(o(773382).A,{percentage:k.uploadProgress}):k.progressText?(0,w.jsx)("span",{children:k.progressText}):null})]})]})})};function C(){g().A.reset()}function x(e){let{isVisible:t,isRepositioning:o,handleCancelClick:s,handleRepositionClick:d,handleSavePositionClick:v,lastProxiedUrl:S,store:_,disabled:h,paddingRight:k,paddingLeft:C,mouseStore:x}=e;const I=(0,a().v3)(),A=(0,i().tz)(),D=(0,n.useCallback)((e=>function(e,t,o,n,a){a.reset();const r=e.target.getBoundingClientRect();l().W({environment:t,intl:o,store:n,rect:r,from:"page_header"})}(e,I,A,_,x)),[I,A,_,x]),T=(0,r().K8)((()=>g().A.state.loadingMode),[]),P=(0,r().K8)((()=>function(e){let t;return t=Boolean(e.isFullWidth())?"100%":c().x6,t}(_)),[_]),{device:O}=I,M=(0,r().O$)(p().e);if(h||T!==u().pF||!M)return null;const{isMobile:j}=O;return(0,w.jsx)(b().A,{animate:{width:P,opacity:t?1:0},style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,w.jsxs)(m().A,{isVisible:t,position:"bottom",style:{marginRight:k,marginLeft:C},children:[!o&&(0,w.jsx)(f().A,{style:{borderRight:j?"none":void 0,...y().k},onClick:D,children:(0,w.jsx)(i().sA,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!o&&!j&&(0,w.jsx)(f().A,{style:{...y().k,borderRight:"none"},onClick:e=>d(e,S),children:(0,w.jsx)(i().sA,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),o&&!j&&(0,w.jsx)(f().A,{style:y().k,onClick:v,children:(0,w.jsx)(i().sA,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),o&&!j&&(0,w.jsx)(f().A,{style:{...y().k,borderRight:"none"},onClick:s,children:(0,w.jsx)(i().sA,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})}},551619:(e,t,o)=>{o.d(t,{Hy:()=>O,NV:()=>T,O9:()=>j,Rg:()=>M,Sm:()=>U,dK:()=>E,f7:()=>R,l8:()=>L,n$:()=>V,no:()=>F,sx:()=>P});var n=()=>o(402014),a=()=>o(484714),r=()=>o(792485),i=()=>o(56366),s=()=>o(700500),l=()=>o(651124),d=()=>o(519831),c=()=>o(620689),p=()=>o(591197),u=()=>o(835066),g=()=>o(780054),m=()=>o(964345),b=()=>o(68465),f=()=>o(504836),v=()=>o(478726),S=()=>o(747100),_=()=>o(963589),w=()=>o(665579),h=()=>o(765957),y=()=>o(525569),k=()=>o(217429),C=()=>o(375447),x=()=>o(66496),I=()=>o(548821),A=()=>o(712505),D=()=>o(302022);function T(e){(0,n().SQ)({event:e,context:n().y$.EditorMouseDown,callback:()=>{}})}function P(e){(0,n().SQ)({event:e,context:n().y$.Click,callback:()=>{}})}function O(e){return(0,i().K8)((()=>Boolean(D().A.state.pageMap[e.id])||x().A.state.pages.has(e.id)),[e.id])}function M(e,t){const o=(0,a().v3)(),n=(0,r().S)(),s=O(e),l=(0,i().K8)((()=>{var o,n;return t===I().Rr.Frame?Boolean(null===(o=h().default.state.currentLoadingContainerStore)||void 0===o?void 0:o.state.ready):t===I().Rr.PeekView&&A().default.state.open?Boolean(null===(n=A().default.state.loadingContainerStore)||void 0===n?void 0:n.state.ready):t===I().Rr.CollectionPageView||t===I().Rr.CollectionPageViewFullScreen?e.isReady():void 0}),[t,e]),d=R(e);return(0,i().K8)((()=>{if(!l)return!1;const t=o.currentUser.isLoggedIn(),a=n&&n.publicEditModeStore.state;return Boolean(e&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=a&&a.hasPublicPermission)||"edit"===(null==a?void 0:a.permission))&&!s&&!d&&(!(0,b().ZE)(a)||"completionPopup"!==y().default.state.type))}),[o.currentUser,d,l,n,s,e])}function j(e,t){const o=(0,a().v3)(),n=(0,r().S)(),{isTablet:s}=(0,a().Y0)(),l=(0,_().X)("tablet_refresh_template_pills_gate");return(0,i().K8)((()=>{if(t===I().Rr.SitePreview)return!1;if(g().A.isMobile&&(!s||!l))return!1;if(!o.currentUser.isLoggedIn())return!1;const a=n&&n.publicEditModeStore.state;if(null!=a&&a.hasPublicPermission&&"edit"!==(null==a?void 0:a.permission))return!1;if(e.getContentLength()>1)return!1;if(!e.canEdit()||e.isNonEditableState())return!1;const r=e.getContentStores()[0];if(r&&!r.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const i=m().gZ.state,d=m().Di.state;if(i&&e.id===d)return!1;return!((0,v().L5)(t)?p().VY.state:p().u3.state)}),[o,n,e,t,s,l])}function R(e){return(0,i().K8)((()=>{if(e.isCollectionView()){const t=e.getCollectionStoreIfSingleSource();return!!t&&t.isSyncedCollection()}return e.isType(s().xd.externalObjectInstancePage)}),[e])}function U(e){return(0,i().K8)((()=>{if(!(0,f().vL)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===d().Vl){return!!t.getFormatStore().getKeyStore("external_collection_type").getValue()}return!1}),[e])}function E(e){return(0,i().K8)((()=>{if(!(0,f().pB)())return!1;var t;return!!e.isCollectionView()&&((null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("external_collection_type").getValue())??!1)}),[e])}function L(e){return(0,i().K8)((()=>{if(!k().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"}))return!1;var t;return!!e.isCollectionView()&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("static_import_collection_type").getValue())===l().IE.CsvImport}),[e])}function V(e){const t=(0,a().v3)(),{device:o,WindowSizeStore:n}=t,r=(0,i().K8)((()=>{const e=n.state.height,o=g().A.isMobile&&C().Ay.state.open?e:0;return c().C6(t)+o}),[t,n]);return(0,i().K8)((()=>"home-phone"===e?w().q3:o.isTablet?380:o.isIOS?Math.max(350,r):g().A.isMobile?400:"side-peek"===e||"center-peek"===e?S().ln:"home"===e?w().wH:"30vh"),[o,r,e])}function F(e){const t=(0,a().v3)(),o=(0,i().K8)((()=>(0,u().dC)(t,e)),[t,e]);return(0,i().K8)((()=>o&&!e.isFullWidth()?(0,u().Zy)(t,(0,S().cq)(e),(0,S().RX)(e)):0),[t,o,e])}},555267:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),a=()=>o(401497),r=()=>o(62856),i=()=>o(331542),s=o(474848);function l(e){let{loadingMessage:t}=e;const o=(0,a().DP)(),l=(0,r().A)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:l?(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(i().A,{}),t?(0,s.jsx)("div",{style:{marginLeft:8,color:o.text.secondary},children:t}):void 0]}):void 0})}},567121:(e,t,o)=>{o.d(t,{EG:()=>i,K5:()=>r,RH:()=>a,Yi:()=>s,ls:()=>n});const n=32,a=202,r=1e3,i="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",s="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},578194:(e,t,o)=>{o.d(t,{r:()=>n});const n=(0,o(583835).Dv)("importEvernote")},591197:(e,t,o)=>{o.d(t,{VY:()=>s,ZJ:()=>r,u3:()=>i});var n=()=>o(496506);class a extends(()=>o(757695))().Store{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const r=new a,i=new(n().ComputedStore)((()=>!1!==r.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),s=new(n().ComputedStore)((()=>!1!==r.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},608581:(e,t,o)=>{o.d(t,{A:()=>p});o(898992),o(354520),o(581454),o(941795);var n=o(296540),a=()=>o(401497),r=()=>o(955825),i=()=>o(284371),s=()=>o(780054),l=()=>o(963575),d=o(474848);function c(e){const{button:t,isLast:o}=e,s=(0,a().IS)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:i().Wy.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return n.cloneElement(t,{...(0,r().AH)(t.props.style,s.button,o&&s.buttonLast),hoveredStyle:(0,r().AH)(s.buttonHovered,o&&s.buttonLast).style,pressedStyle:s.buttonPressed})}const p=function(e){let{children:t,isVisible:p,position:u,style:g}=e;const m=(0,a().IS)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.shadowSM,display:"flex",whiteSpace:"nowrap",borderRadius:l().A.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:s().A.isMobile?"auto":"none",opacity:s().A.isMobile?1:0,fontFamily:i().vc(o(662303).locale).sans,position:"absolute",right:l().A.horizontal.small,bottom:l().A.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:l().A.vertical.small,bottom:void 0}})),[]),b=n.Children.toArray(t).filter(o(534177).O9),f=b.length;return(0,d.jsx)(o(145214).A,{animate:{opacity:p?1:0},...(0,r().AH)(m.container,g,p&&m.containerHover,"top"===u&&m.containerTop),children:b.map(((e,t)=>{const a=t===f-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===o(859428).A&&n.isValidElement(e))return n.cloneElement(e,{render:(t,o)=>{const n=e.props.render(t,o);return(0,d.jsx)(c,{isLast:a,button:n},e.key)}});if(e.type===o(704152).A&&n.isValidElement(e))return(0,d.jsx)(c,{isLast:a,button:e},e.key)}}))})}},612900:(e,t,o)=>{o.d(t,{u:()=>r});var n=()=>o(645873);const a=new(n().O2)("PulsingWrapper",(async()=>o.e(45248).then(o.bind(o,673962)))),r=(0,n().jQ)(a,(e=>e.PulsingWrapper),{renderLoading:(e,t)=>t.children})},616385:(e,t,o)=>{o.r(t),o.d(t,{applyPerfmarkTrial:()=>Pe,completeDesktopOnboardingForTeamPlan:()=>Oe,createSpaceWithTemplates:()=>Ce,getInitialState:()=>de,getRedirectDataUpdate:()=>Ae,getWorkflowTemplateForUseCase:()=>je,getWorkflowTemplatesForUseCases:()=>Me,joinTeamSpaceWithTemplates:()=>xe,messages:()=>le,navigateWithRedirectData:()=>he,redirectAfterOnboardingComplete:()=>we,timedTrialUpsellNextState:()=>ve,updateAndGetNextState:()=>ce,updateAndGetPreviousState:()=>pe});o(16280),o(898992),o(354520),o(581454);var n=()=>o(584262),a=()=>o(660237),r=()=>o(715256),i=()=>o(857639),s=()=>o(416845),l=()=>o(206267),d=()=>o(386164),c=()=>o(388821),p=()=>o(179034),u=()=>o(519831),g=()=>o(96689),m=()=>o(84520),b=()=>o(677338),f=()=>o(994310),v=()=>o(496603),S=()=>o(502800),_=()=>o(534177),w=()=>o(337240),h=()=>o(382055),y=()=>o(796756),k=()=>o(148024),C=()=>o(449506),x=()=>o(934839),I=()=>o(874913),A=()=>o(496414),D=()=>o(816074),T=()=>o(666144),P=()=>o(857783),O=()=>o(435009),M=()=>o(426116),j=()=>o(185544),R=()=>o(751156),U=()=>o(755199),E=()=>o(2220),L=()=>o(617254),V=()=>o(519839),F=()=>o(26388),N=()=>o(59424),B=()=>o(235921),W=()=>o(440209),z=()=>o(186445),H=()=>o(680074),J=()=>o(972435),$=()=>o(640653),K=()=>o(299487),G=()=>o(406792),Y=()=>o(765957),q=()=>o(150193),X=()=>o(630116),Q=()=>o(224701),Z=()=>o(162342),ee=()=>o(151168),te=()=>o(846955),oe=()=>o(759830),ne=()=>o(144114),ae=()=>o(607859),re=()=>o(12145),ie=()=>o(770769),se=()=>o(1130);const le=(0,o(959013).YK)({joiningWorkspace:{id:"onboardingStateActions.joiningWorkspace.loadingMessage",defaultMessage:"Joining team…"},creatingWorkspace:{id:"onboardingStateActions.creatingWorkspace.loadingMessage",defaultMessage:"Getting ready…"},creatingWorkflowTemplate:{id:"onboardingStateActions.creatingWorkflowTemplate.loadingMessage",defaultMessage:"Getting ready…"},navigatingToWorkspace:{id:"onboardingStateActions.navigatingToWorkspace.loadingMessage",defaultMessage:"Taking you to your workspace…"},errorNoAction:{id:"onboardingStateActions.errorMessage.noActionToPerform",defaultMessage:"No action to perform for {onboardingRedirectType}"},errorWorkspaceCreationPreventedWithEmail:{id:"onboardingStateActions.errorMessage.domainClaim.workspaceCreationPreventedWithEmail",defaultMessage:"You are signed in to {userEmailAddress} and do not have access to any workspaces. Please reach out to your IT department for access to Notion."},errorWorkspaceCreationPrevented:{id:"onboardingStateActions.errorMessage.domainClaim.workspaceCreationPrevented",defaultMessage:"You do not have access to any workspaces. Please reach out to your IT department for access to Notion."},errorWorkspaceDoesNotExist:{id:"onboardingStateActions.errorMessage.spaceDoesNotExist",defaultMessage:"Workspace does not exist."},errorWorkspaceDidNotLoad:{id:"onboardingStateActions.errorMessage.spaceDidNotLoad",defaultMessage:"Failed to load workspace."}});async function de(e){let{environment:t,startOnboardingArgs:o,onboardingData:n,redirectData:r}=e;const i=t.currentUser.id;if(void 0===i)throw new Error("Environment currentUserId not defined.");const{type:d,redirectUrl:c,disableRedirectUrl:p}=o,u=t.device.isMobile,{currentUserRootStore:g}=Y().default.state,m=0===(g&&g.isReady()?v().sb(g.getSpaceViewStores().filter((e=>e.getJoined())).map((e=>e.getSpaceId()))).length:0),b=(0,ee().Os)()?"perfmark":void 0,f={onboardingData:n,redirectData:r,isOnboarding:!0,isLoading:!1,flowId:l().JW(),currentUserId:i,isNewUser:m,stageNumber:0,spaceId:void 0,historicalStages:void 0,onboardingExperiments:{},stageStats:{startedTimeStampMs:Date.now()},trialId:b,performanceMarketingTerm:n.performanceMarketingTerm};if("new-user"===d){const e=n.joinableSpaceData.results.length>0;let o;o=u?c&&!p?"mobile_redirect":e?"mobile_joinable_spaces":"mobile_cold_start":c&&!p?"desktop_redirect":e?"desktop_joinable_spaces":"desktop_cold_start";const r={...f,flow:o,stage:"profile",uploadingProfilePhoto:!1,profilePhoto:null,prefilled:!1,passwordErrorData:null,emailOptIn:(0,a().eh)(n.countryCode).defaultOptIn},i=ne().TV({userStore:n.userStore});return i?ue({...r,...i},t):r}if("create-or-join"===d){const e=ne().md({onboardingData:n,isNewUserFlow:!1}),o=u?"mobile_join_or_create_space":"desktop_join_or_create_space";if(e.length>0)return{...f,flow:o,stage:"workspace_choose",joinableSpaces:e,prefilled:!1};if(n.canUserCreateSpace)return{...Te(f),...f,flow:o,stage:"workspace_plan_choose",prefilled:!1,spaceJoinOrCreate:"create",useCases:[],collaborativeIntent:void 0};{h().FX(t,{can_user_create_space:!1,is_new_user:!1,has_joinable_spaces:!1,onboarding_stage:void 0});const e=n.userStore.getEmail();throw ae().default.setState({...f,flow:o,stage:"error"}),new(s().Xgk)(e?J().A.formatMessage(le.errorWorkspaceCreationPreventedWithEmail,{userEmailAddress:e}):J().A.formatMessage(le.errorWorkspaceCreationPrevented),{newUser:!1})}}if("mobile-onboarding"===d)return{...f,flow:"mobile_existing_user",stage:"mobile_editor",spaceJoinOrCreate:"join"};_().HB(d)}async function ce(e,t){if(!e.isOnboarding)return{isOnboarding:!1,isLoading:!1,currentUserId:t.currentUser.id};const o={...e,stageNumber:e.stageNumber+1};switch(ne().zX(t),o.stage){case"profile":return ue(o,t);case"workspace_plan_choose":return me(o,t);case"workspace_collaborative_intent_choose":return function(e,t){return me({...e,stage:"workspace_plan_choose"},t,!0)}(o,t);case"workspace_choose":return async function(e,t){const{redirectData:o}=e;if("guest_redirect"===o.type)return De(e,o,"guest",t);if("create"===e.spaceJoinOrCreate)return{...Te(e),planSelection:void 0,...e,stage:"workspace_plan_choose",useCases:[],collaborativeIntent:void 0};{const o=G().default.DO_NOT_USE_markLegacy("onboarding.join_space"),{spaceStore:n,spaceViewStore:a,...r}=await ke(e,t);ne().BH({environment:t,state:{onboardingExperiments:e.onboardingExperiments,userPersona:"userPersona"in e?e.userPersona:void 0,userRole:"userRole"in e?e.userRole:void 0,companySize:void 0,useCases:void 0,planSelection:void 0,categories:void 0,userEducationRole:void 0,userEducationLevel:void 0,notionUseFrequency:void 0,collaborativeIntent:void 0},spaceStore:void 0,spaceViewStore:a});const{spaceId:i,spaceViewId:s,redirectData:l}=r,{flow:d}=e;switch(d){case"desktop_cold_start":case"desktop_join_or_create_space":case"desktop_redirect":case"desktop_joinable_spaces":return await we({environment:t,onboardingData:e.onboardingData,spaceId:i,spaceViewId:s,spaceJoinOrCreate:e.spaceJoinOrCreate,redirectData:l,onboardingFlow:d,onboardingState:e}),G().default.DO_NOT_USE_measureLegacy(o,{environment:t,data:{flow:e.flow,onboarding_complete_data:{stage:e.stage,redirect_data:l,is_new_user:ne().ze(e),permission_level:"guest_redirect"===l.type?"guest":"member"}}}),{isOnboarding:!1,isLoading:!1,currentUserId:t.currentUser.id};case"mobile_join_or_create_space":{const o={...e,...r};return Se(e.onboardingData,o,t)}case"mobile_cold_start":case"mobile_joinable_spaces":case"mobile_redirect":{const n={...e,...r};return G().default.DO_NOT_USE_measureLegacy(o,{environment:t,data:{flow:e.flow,onboarding_complete_data:{stage:e.stage,redirect_data:l,is_new_user:ne().ze(e),permission_level:"guest_redirect"===l.type?"guest":"member"}}}),_e({onboardingState:n,environment:t,flow:d})}default:return _().HB(d)}}}(o,t);case"persona_survey":return ge(o,t);case"workspace_create":return be(o,t);case"invite":return fe(o,t);case"timed_trial_upsell":return ve(o,t);case"template_optout":return function(e,t){return{isOnboarding:!1,isLoading:!1,currentUserId:t.currentUser.id}}(0,t);case"workspace_setup":return async function(e,t){const{flow:o}=e;switch(o){case"desktop_cold_start":case"desktop_join_or_create_space":case"desktop_joinable_spaces":case"desktop_redirect":return await we({environment:t,onboardingData:e.onboardingData,spaceId:e.spaceId,spaceViewId:e.spaceViewId,spaceJoinOrCreate:e.spaceJoinOrCreate,redirectData:e.redirectData,onboardingFlow:e.flow,onboardingState:e}),{isOnboarding:!1,isLoading:!1,currentUserId:t.currentUser.id};case"mobile_join_or_create_space":return Se(e.onboardingData,e,t);case"mobile_cold_start":case"mobile_joinable_spaces":case"mobile_redirect":return O().kc(t),_e({onboardingState:e,environment:t,flow:o});default:return _().HB(o)}}(o,t);case"mobile_editor":return function(e){return{...e,stage:"mobile_sidebar"}}(o);case"mobile_sidebar":return function(e,t){if(ne().FP(t))return{...e,stage:"mobile_app_download"};return{...e,stage:"mobile_desktop"}}(o,t);case"mobile_desktop":return function(e,t){return{...e,stage:"mobile_web_clipper"}}(o);case"mobile_web_clipper":return function(e,t){if("mobile_existing_user"===e.flow)return Ie(e,t);return Se(e.onboardingData,e,t)}(o,t);case"mobile_app_download":return async function(e,t){if("mobile_existing_user"===e.flow)return Ie(e,t);return Se(e.onboardingData,e,t)}(o,t);case"error":return function(e){return{isOnboarding:!1,isLoading:!1,currentUserId:e.currentUser.id}}(t);default:_().HB(o)}}function pe(e,t){if(!e.isOnboarding)throw new Error("Trying to go back on step which is not onboarding.");const o={...e,stageNumber:e.stageNumber-1};if(!ae().onboardingStagesWithBack.includes(e.stage))throw new Error(`Trying to go back in onboarding on step where back is not supported. Stage: ${e.stage}`);switch(o.stage){case"workspace_plan_choose":return function(e){const t=ne().ze(e),o=ne().md({onboardingData:e.onboardingData,isNewUserFlow:t});if(o.length>0)return{...e,joinableSpaces:o,stage:"workspace_choose"};if(t)throw new Error("Trying to go back to profile step from plan choose for new user!");throw new Error("Trying to go back on plan choose step for existing user with no joinable spaces!")}(o);case"workspace_collaborative_intent_choose":return function(e){return{...e,stage:"workspace_plan_choose",collaborativeIntent:void 0}}(o);case"persona_survey":return function(e){return{...e,stage:"workspace_collaborative_intent_choose"}}(o);case"workspace_create":return function(e){const t=ne().ze(e);if("school"===e.planSelection||"personal"===e.planSelection)return{...e,skip:!1,prefilled:e.prefilled,previousStage:"workspace_create",userPersona:e.userPersona,spaceName:e.spaceName,stage:"persona_survey"};return t&&"team"===e.planSelection?{...e,prefilled:e.prefilled,previousStage:"workspace_create",skip:!1,userPersona:e.userPersona,spaceName:e.spaceName,stage:"persona_survey"}:{...e,stage:"workspace_collaborative_intent_choose"}}(o);case"timed_trial_upsell":return function(e){const t=ne().qg(e.onboardingData);return{...e,flow:e.flow,stage:"invite",isChecked:!0,emails:[],spaceSetupCompleted:!0,joinableUserEmailDomain:t,spaceJoinOrCreate:"create",inviteLinkUrl:e.inviteLinkUrl,shouldTriggerPostInviteAnimations:!1,isBulkInvite:!1,planSelection:e.planSelection,collaborativeIntent:e.collaborativeIntent}}(o);case"mobile_editor":return function(e){const t=ne().qg(e.onboardingData);return{...e,flow:e.flow,stage:"invite",isChecked:!0,emails:[],spaceSetupCompleted:!0,joinableUserEmailDomain:t,spaceJoinOrCreate:"create",shouldTriggerPostInviteAnimations:!1,isBulkInvite:!1,teamStoreId:e.teamStoreId,inviteLinkUrl:e.inviteLinkUrl,spaceViewId:e.spaceViewId,planSelection:e.planSelection,collaborativeIntent:e.collaborativeIntent}}(o);case"mobile_sidebar":return function(e){return{...e,stage:"mobile_editor"}}(o);case"mobile_desktop":case"mobile_app_download":return function(e){return{...e,stage:"mobile_sidebar"}}(o);case"mobile_web_clipper":return function(e,t){return{...e,stage:"mobile_desktop"}}(o);case"workspace_choose":case"invite":case"template_optout":case"workspace_setup":case"profile":case"error":return null;default:_().HB(o)}}async function ue(e,t){await ne().cp(e,t);const{password:o,...a}=e,r=f().A.get(ne().Zz),{onboardingData:i,redirectData:l}=a,d=ne().md({onboardingData:i,isNewUserFlow:ne().up(a)});if("guest_redirect"===l.type)return De(a,l,"guest",t);if("redirect_page"===l.type||"redirect_space"===l.type)return De(a,l,"member",t);if("public_access_page_redirect"===l.type)return function(e,t,o){return ye({environment:o,permissionLevel:"public",onboardingState:e}),P().uK({environment:o,store:new(X().Bv)(o,{table:p().ev,id:t.pageId}),pageVisitSource:n().y8.Onboarding}),{isOnboarding:!1,isLoading:!1,currentUserId:o.currentUser.id}}(a,l,t);if(r){const e=await C().callApi({eventName:"getPublicSpaceForInvite",environment:t,data:{type:"invite-link",inviteLinkCode:r}});if("success"===e.type){const{data:o}=e,{result:n}=o;if(n)return De(a,{type:"team_invite_redirect",spaceId:n.id,inviteCode:r},"member",t);throw new Error(J().A.formatMessage(le.errorWorkspaceDoesNotExist))}throw new Error(J().A.formatMessage(le.errorWorkspaceDidNotLoad))}if(d.length>0)return{...a,joinableSpaces:d,stage:"workspace_choose"};if(i.canUserCreateSpace){if(ne().OU({state:a})){return{...a,spaceJoinOrCreate:"create",userPersona:void 0,useCases:[],stage:"workspace_plan_choose",planSelection:void 0,collaborativeIntent:void 0}}return{spaceName:void 0,...a,spaceJoinOrCreate:"create",userPersona:void 0,userRole:void 0,companySize:void 0,useCases:[],categories:[],stage:"persona_survey",skip:!1,previousStage:"profile",planSelection:void 0,collaborativeIntent:void 0}}{h().FX(t,{can_user_create_space:!1,is_new_user:!0,has_joinable_spaces:!1,onboarding_stage:a.stage});const o=i.userStore.getEmail();throw ae().default.setState({...e,stage:"error"}),new(s().Xgk)(o?J().A.formatMessage(le.errorWorkspaceCreationPreventedWithEmail,{userEmailAddress:o}):J().A.formatMessage(le.errorWorkspaceCreationPrevented),{newUser:!0})}}function ge(e,t){!e.skip&&e.isNewUser&&function(e,t){const{onboardingData:o,userPersona:n,userRole:a,useCases:r,companySize:i}=t;R().createAndCommit({userAction:"onboardingStateActions.setUserPersonaRoleAndUseCases",environment:e,canUndo:!0,perform:e=>{U().mJ({userSettingsStore:o.userSettingsStore,data:{persona:n,team_role:a,use_cases:r,company_size:i,persona_version:{version:"V4",timestamp:(new Date).getTime()}},transaction:e})}})}(t,e);const{onboardingData:o}=e,n=J().A.getIntl(),a={spaceIcon:null,uploadingSpaceIcon:!1,...Te(e),...e,spaceJoinOrCreate:"create",userPersona:e.userPersona,stage:"workspace_create"},r=o.userStore.getFullName(n);if("planSelection"in a&&["personal","school"].includes(a.planSelection||"")&&r){const e=o.userStore.getProfilePhoto();return be({...a,userPersona:a.userPersona||"unfilled",spaceName:ne().JR(r,n),spaceIcon:e||null},t)}return a}function me(e,t,o){const n="school"===e.planSelection||"personal"===e.planSelection,a=ne().OU({state:e}),r={userRole:void 0,companySize:void 0,spaceName:void 0,categories:[],...e,skip:!1,stage:"persona_survey",previousStage:"workspace_plan_choose"};if(!o)return{...r,collaborativeIntent:void 0,stage:"workspace_collaborative_intent_choose"};if(a||n)return"team"===e.planSelection||n?r:ge({...e,skip:!0,userPersona:void 0,userRole:void 0,companySize:void 0,useCases:[],categories:[],previousStage:"workspace_plan_choose",spaceName:void 0,stage:"persona_survey",collaborativeIntent:void 0},t);{if("team"===e.planSelection)return r;const o={userRole:void 0,companySize:void 0,...e,spaceJoinOrCreate:"create",useCases:[],categories:[],stage:"workspace_create",spaceIcon:null,uploadingSpaceIcon:!1},{onboardingData:n}=e,a=J().A.getIntl(),i=n.userStore.getFullName(a),s=n.userStore.getProfilePhoto();if("planSelection"in e&&["personal","school"].includes(e.planSelection||"")&&i){return be({...o,userPersona:e.userPersona||"unfilled",spaceName:ne().JR(i,a),spaceIcon:s||null,useCases:e.useCases},t)}return o}}async function be(e,t){const{flow:o,spaceJoinOrCreate:n,onboardingData:a}=e,r=G().default.DO_NOT_USE_markLegacy("onboarding.create_space"),{spaceStore:i,spaceViewStore:s,...l}=await ke(e,t);if(ne().BH({environment:t,state:{...e,userEducationRole:void 0,userEducationLevel:void 0,notionUseFrequency:void 0},spaceStore:i,spaceViewStore:s}),"team"===e.planSelection){const o=ne().qg(e.onboardingData),{spaceId:n,inviteLinkCode:a}=l;if(G().default.DO_NOT_USE_measureLegacy(r,{environment:t,data:{flow:e.flow,onboarding_complete_data:{stage:e.stage,redirect_data:e.redirectData,is_new_user:ne().ze(e),permission_level:"guest_redirect"===e.redirectData.type?"guest":"member",plan:e.planSelection}}}),e.collaborativeIntent&&"multiplayer"!==e.collaborativeIntent){return fe({...e,isChecked:!1,stage:"invite",isBulkInvite:!1,spaceSetupCompleted:!0,shouldTriggerPostInviteAnimations:!1,inviteLinkUrl:void 0,emails:[],spaceViewId:s.id,joinableUserEmailDomain:void 0,teamStoreId:void 0},t)}return{...e,...l,isChecked:!0,spaceId:n,emails:[],joinableUserEmailDomain:o,inviteLinkUrl:a&&(0,$().X$)(t,n,a),stage:"invite",isBulkInvite:!1,shouldTriggerPostInviteAnimations:!1,spaceSetupCompleted:!0}}switch(o){case"desktop_cold_start":case"desktop_join_or_create_space":case"desktop_joinable_spaces":case"desktop_redirect":const{spaceId:i,spaceViewId:d,redirectData:c}=l;if(e.collaborativeIntent&&"multiplayer"===e.collaborativeIntent){return{...e,isChecked:!1,stage:"invite",isBulkInvite:!1,spaceSetupCompleted:!0,shouldTriggerPostInviteAnimations:!1,inviteLinkUrl:void 0,emails:[],spaceViewId:s.id,joinableUserEmailDomain:void 0,teamStoreId:void 0}}return A().m({message:le.navigatingToWorkspace}),await we({environment:t,onboardingData:a,spaceId:i,spaceViewId:d,spaceJoinOrCreate:n,redirectData:c,onboardingFlow:o,onboardingState:e}),A().V(),G().default.DO_NOT_USE_measureLegacy(r,{environment:t,data:{flow:e.flow,onboarding_complete_data:{stage:e.stage,redirect_data:e.redirectData,is_new_user:ne().ze(e),permission_level:"guest_redirect"===e.redirectData.type?"guest":"member",plan:e.planSelection}}}),{...e,spaceId:i,spaceViewId:d,flow:o,stage:"template_optout"};case"mobile_join_or_create_space":return Se(e.onboardingData,{...e,...l},t,r);case"mobile_cold_start":case"mobile_joinable_spaces":case"mobile_redirect":return _e({onboardingState:{...e,...l},environment:t,flow:o});default:return _().HB(o)}}async function fe(e,t){const o=G().default.DO_NOT_USE_markLegacy("invite_next_state");await ne().TM(e,t);const{flow:n,isNewUser:a,trialId:r}=e;switch(n){case"desktop_cold_start":case"desktop_join_or_create_space":case"desktop_joinable_spaces":if("team"!==e.planSelection)return await we({environment:t,onboardingData:e.onboardingData,spaceId:e.spaceId,spaceViewId:e.spaceViewId,spaceJoinOrCreate:e.spaceJoinOrCreate,redirectData:e.redirectData,onboardingFlow:e.flow,onboardingState:e}),G().default.DO_NOT_USE_measureLegacy(o,{environment:t,data:{numInvitesSent:e.emails.length}}),{isOnboarding:!1,isLoading:!1,currentUserId:t.currentUser.id};return a&&"perfmark"===r?(await we({environment:t,onboardingData:e.onboardingData,spaceId:e.spaceId,spaceViewId:e.spaceViewId,spaceJoinOrCreate:e.spaceJoinOrCreate,redirectData:e.redirectData,onboardingFlow:e.flow,onboardingState:e}),G().default.DO_NOT_USE_measureLegacy(o,{environment:t,data:{numInvitesSent:e.emails.length}}),Oe(e,t)):{...e,stage:"timed_trial_upsell"};case"desktop_redirect":return await we({environment:t,onboardingData:e.onboardingData,spaceId:e.spaceId,spaceViewId:e.spaceViewId,spaceJoinOrCreate:e.spaceJoinOrCreate,redirectData:e.redirectData,onboardingFlow:e.flow,onboardingState:e}),G().default.DO_NOT_USE_measureLegacy(o,{environment:t,data:{numInvitesSent:e.emails.length}}),"team"===e.planSelection?Oe(e,t):{isOnboarding:!1,isLoading:!1,currentUserId:t.currentUser.id};case"mobile_join_or_create_space":const i=Se(e.onboardingData,e,t);return G().default.DO_NOT_USE_measureLegacy(o,{environment:t,data:{mobileOnboardingState:n}}),i;case"mobile_cold_start":case"mobile_joinable_spaces":case"mobile_redirect":const s=_e({onboardingState:e,environment:t,flow:n});return G().default.DO_NOT_USE_measureLegacy(o,{environment:t,data:{mobileOnboardingState:n}}),s;default:return _().HB(n)}}async function ve(e,t){return await we({environment:t,onboardingData:e.onboardingData,spaceId:e.spaceId,spaceViewId:e.spaceViewId,spaceJoinOrCreate:e.spaceJoinOrCreate,redirectData:e.redirectData,onboardingFlow:e.flow,onboardingState:e}),Oe(e,t)}async function Se(e,t,o,n){return await we({environment:o,onboardingData:e,spaceId:t.spaceId,spaceViewId:t.spaceViewId,spaceJoinOrCreate:t.spaceJoinOrCreate,redirectData:t.redirectData,onboardingFlow:t.flow,onboardingState:t}),n&&G().default.DO_NOT_USE_measureLegacy(n,{environment:o,data:{flow:t.flow,onboarding_complete_data:{stage:t.stage,redirect_data:t.redirectData,is_new_user:ne().ze(t),permission_level:"guest_redirect"===t.redirectData.type?"guest":"member"}}}),{isOnboarding:!1,isLoading:!1,currentUserId:o.currentUser.id}}function _e(e){const{onboardingState:t,environment:o,flow:n}=e;if("oauth_authorization_redirect"===t.redirectData.type){const{responseType:e,integrationId:n,redirectUri:a,state:r,owner:i,userId:s,spaceId:l}=t.redirectData;D().t({environment:o,responseType:e,integrationId:n,redirectUri:a,state:r,owner:i,userId:s,spaceId:l})}return{...t,flow:n,stage:"mobile_editor"}}async function we(e){const{environment:t,redirectData:o,spaceViewId:n,spaceId:a,onboardingData:r,spaceJoinOrCreate:i,onboardingFlow:s,onboardingState:l}=e;await he({environment:t,redirectData:o,spaceViewId:n,spaceId:a,onboardingData:r,spaceJoinOrCreate:i,onboardingFlow:s}),ye({environment:t,spaceJoinOrCreate:i,permissionLevel:"member",onboardingState:l})}async function he(e){const{environment:t,redirectData:o,spaceViewId:a,spaceId:r,onboardingData:i,spaceJoinOrCreate:s,onboardingFlow:l}=e;x().zA({bannerStore:q().A,id:"SubscriptionEditingBlocker"}),t.device.isMobile&&R().createAndCommit({userAction:"onboardingStateActions.navigateWithRedirectData",environment:t,canUndo:!0,perform:e=>{se().PF({userStore:i.userStore,transaction:e})}});const g=a?X().vH.createChildStore(i.userRootStore,{table:m().mu,id:a}):void 0,f=b().dw();if("fork_page"===o.type&&g)await M().tR({environment:t,spaceViewStore:g,redirectPageId:o.pageId,userSettingsStore:i.userSettingsStore,userRootStore:i.userRootStore,isNewlyCreatedSpace:"create"===s,pageVisitSource:n().y8.Onboarding,navigationType:"joiningOrCreatingSpace"});else if(f&&!i.onboardingCompleted)b().dC(),O().oo({environment:t,url:f,redirect:!0});else if("home"===o.type&&null!=g&&g.isDefined()){const e=await C().callApi({eventName:"getUserHomePages",environment:t,data:{spaceViewId:g.id,spaceId:g.getSpaceId()},headers:(0,d().WS)({cellId:void 0,recordId:g.id,spaceId:g.getSpaceId()})}),{recordMap:o,homePageId:a}="success"===e.type?{recordMap:c().RecordMapWithRole.create(e.data.recordMap),homePageId:e.data.homePageId}:{recordMap:void 0,homePageId:void 0},r=g.pointer;o&&T().PC({environment:t,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,pointer:r,model:o.getModel(r),role:o.getRole(r)||"none",updatePaths:[["settings","personal_home"]],debugSource:"onboardingStateActions.navigateWithRedirectData",force:!0}),await M().tR({environment:t,redirectPageId:a,spaceViewStore:g,userSettingsStore:i.userSettingsStore,userRootStore:i.userRootStore,isNewlyCreatedSpace:"create"===s,pageVisitSource:n().y8.Onboarding,navigationType:"joiningOrCreatingSpace"})}else if("redirect_page"===o.type&&o.spaceId===r&&g)await T().sy({environment:t,pointer:{table:p().ev,id:o.pageId},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,userId:t.currentUser.id}),await M().tR({environment:t,spaceViewStore:g,redirectPageId:o.pageId,userSettingsStore:i.userSettingsStore,userRootStore:i.userRootStore,isNewlyCreatedSpace:"create"===s,pageVisitSource:n().y8.Onboarding,navigationType:"joiningOrCreatingSpace"});else if("redirect_space"===o.type&&o.spaceId===r&&g)await M().tR({environment:t,spaceViewStore:g,userSettingsStore:i.userSettingsStore,userRootStore:i.userRootStore,isNewlyCreatedSpace:"create"===s,pageVisitSource:n().y8.Onboarding,navigationType:"joiningOrCreatingSpace"});else if("mobile_native_home"===o.type&&g)await M().tR({environment:t,spaceViewStore:g,redirectPageId:void 0,userSettingsStore:i.userSettingsStore,userRootStore:i.userRootStore,isNewlyCreatedSpace:"create"===s,pageVisitSource:n().y8.Onboarding,navigationType:"joiningOrCreatingSpace"});else if("getting_started_page"!==o.type&&"redirect_space"!==o.type&&"performance_marketing_template"!==o.type||!g)if("oauth_authorization_redirect"===o.type&&"mobile_cold_start"!==l&&"mobile_joinable_spaces"!==l&&"mobile_redirect"!==l){const{responseType:e,integrationId:n,redirectUri:a,state:r,owner:i,userId:s,spaceId:l}=o;D().t({environment:t,responseType:e,integrationId:n,redirectUri:a,state:r,owner:i,userId:s,spaceId:l})}else if(g)await M().tR({environment:t,spaceViewStore:g,userSettingsStore:i.userSettingsStore,userRootStore:i.userRootStore,isNewlyCreatedSpace:"create"===s,pageVisitSource:n().y8.Onboarding,navigationType:"joiningOrCreatingSpace"});else{if(!i.firstSpaceView)throw new Error(J().A.formatMessage(le.errorNoAction,{onboardingRedirectType:o.type}));await M().tR({environment:t,spaceViewStore:i.firstSpaceView,userSettingsStore:i.userSettingsStore,userRootStore:i.userRootStore,isNewlyCreatedSpace:"create"===s,pageVisitSource:n().y8.Onboarding,navigationType:"joiningOrCreatingSpace"})}else{let e;if("getting_started_page"===o.type&&o.collectionId){const n=X().md.createChildStore(g.getSpaceStore(),{table:u().Vl,id:o.collectionId});e=(await(0,V().VZ)({environment:t,collectionStore:n})).collectionViewBlockStore()}await M().tR({environment:t,spaceViewStore:g,redirectPageId:o.pageId,userSettingsStore:i.userSettingsStore,userRootStore:i.userRootStore,isNewlyCreatedSpace:"create"===s,pageVisitSource:n().y8.Onboarding,navigationType:"joiningOrCreatingSpace",navigateToStore:e})}}function ye(e){const{environment:t,onboardingState:o}=e;if(t.device.isElectron&&I().quickSearchRefresh(),!o.isOnboarding)return;const{onboardingData:{userStore:n}}=o;R().createAndCommit({userAction:"onboardingStateActions.setAndTrackOnboardingComplete",environment:t,canUndo:!0,perform:e=>{se().LC({userStore:n,transaction:e})}}),y().IA(t,{...ne().M6(o),initial_workspace_type:"public"!==e.permissionLevel?e.spaceJoinOrCreate:void 0,permission_level:e.permissionLevel}),k().Kc(t)}async function ke(e,t){if("join"===e.spaceJoinOrCreate){A().m({message:le.joiningWorkspace});const o=await xe({environment:t,onboardingData:e.onboardingData,redirectData:e.redirectData,spaceId:e.spaceId||"",isNewUserOnboarding:ne().ze(e)});return A().V(),o}{A().m({message:le.creatingWorkspace});const o=await Ce({environment:t,isNewUserOnboarding:ne().ze(e),onboardingData:e.onboardingData,userPersona:e.userPersona,redirectData:e.redirectData,spaceName:e.spaceName,spaceIcon:e.spaceIcon,planSelection:e.planSelection,isPrivate:"team"!==e.planSelection,useCases:e.useCases,categories:e.categories,hasTrialId:Boolean(e.trialId),selectedWorkflowTemplates:[]});if(e.isNewUser&&"perfmark"===e.trialId&&e.planSelection&&ne().ze(e)){const n=await Pe(o.spaceId,e.planSelection,t),{enableTrialInfoModal:a,enableTrialIneligibleToast:r}=n;a&&(0,Z().fR)({openedFrom:"onboarding"}),r&&re().A.setState({open:!0,isExistingUser:!1})}return A().V(),o}}async function Ce(e){const{environment:t,onboardingData:o,userPersona:n,redirectData:a,spaceName:i,planSelection:s,spaceIcon:l,isPrivate:d,useCases:c,categories:p,isNewUserOnboarding:u,selectedWorkflowTemplates:g,collaborativeIntent:m,source:b,createTemplates:f=!0}=e,v="team"===s?"team":"personal",S=G().default.DO_NOT_USE_markLegacy("create_space_with_templates"),{spaceStore:_,spaceViewStore:w,inviteLinkCode:h,teamStore:k}=await M().bz({environment:t,planType:v,planSelection:s,name:i,userRootStore:o.userRootStore,analyticsFrom:"onboarding",icon:l||void 0,userPersona:n,collaborativeIntent:m,source:b}),C=_.getCreatedById()===t.currentUser.id;let x;(0,W().f1)({environment:t,experimentId:"adoption_hide_features_v2",variant:[...r().Dx.adoption_hide_features_v2],isUserWorkspaceOwner:C,isDesktop:t.device.isDesktop})&&U().Mg({environment:t,experimentId:"adoption_hide_features_v2"}),ae().default.setState({...ae().default.state,spaceId:_.id}),await Q().$D({environment:t,spaceId:_.id,isNewlyCreatedSpace:!0}),(0,F().setUserAndSpaceSurveyData)({environment:t,onboardingState:B().A.state,planSelection:s,spaceStore:_,spaceViewStore:w}),(0,F().DO_NOT_USE_setUserPersonaRoleAndUseCases)(t,B().A.state);let I=[],A={};if(f&&ne().sr(v)&&!o.performanceMarketingTerm){let e=[],o=[],n=[];(0,N().isWorkflowTemplatesEnabledForOnboarding)(t)?(n=[...g??[],...Me(c)],e=c.includes("wikis")?[L().wikiAppTemplateUri]:[]):(e=(0,L().getAppTemplatePresetsForUseCases)(c),o=(0,ie().getPageTemplatesForUseCases)(c,J().A.getIntl())),A={appTemplates:e,pageTemplates:o,workflowTemplates:n}}else if(f){let e=[];e=o.performanceMarketingTerm?(0,ie().getPerformanceMarketingSearchTermTemplates)(o.performanceMarketingTerm,J().A.getIntl()):ie().getStarterTemplatesForSpace({environment:t,onboardingPlanType:s,categories:p,intl:J().A.getIntl()}),e&&(I=e.map((e=>e.rootId))),A={pageTemplates:e}}x=await ie().createTemplatePagesInSpace({environment:t,redirectData:a,spaceViewStore:w,userSettingsStore:o.userSettingsStore,userRootStore:o.userRootStore,isPrivate:d,templatesToCreateInSpace:A,planType:v,spaceJoinOrCreate:"create",teamStore:k,useCases:c,userPersona:n,isNewUserOnboarding:u,userContext:(0,oe().p)({spaceJoinOrCreate:"create",onboardingState:B().A.state})}),y().rn(t,{plan_selection:s,user_persona:n,initial_workspace_type:"create",space_id:_.id,onboarding_templates:I}),G().default.DO_NOT_USE_measureLegacy(S,{environment:t,data:{}});const D=Ae(a,x,t),T="pageId"in D?D.pageId:void 0;return B().A.setState({...B().A.state,onboardingData:{...o,redirectPageId:T}}),{redirectData:D,spaceId:_.id,spaceViewId:w.id,inviteLinkCode:h,spaceStore:_,spaceViewStore:w,teamStoreId:null==k?void 0:k.id}}async function xe(e){const{environment:t,onboardingData:o,spaceId:n,redirectData:a,isNewUserOnboarding:r}=e,i="team_invite_redirect"===a.type?a.inviteCode:void 0,{spaceViewStore:s}=await M().DT({environment:t,spaceId:n,userRootStore:o.userRootStore,analyticsFrom:"onboarding",userSettingsStore:o.userSettingsStore,inviteCode:i,isOnboarding:!0});Y().default.state.currentSpaceStore||Y().default.setState({...Y().default.state,currentSpaceStore:s.getSpaceStore()});const l=ie().getStarterTemplatesForSpace({environment:t,onboardingPlanType:"team",categories:[],isJoiner:!0,intl:J().A.getIntl()}),d=await ie().createTemplatePagesInSpace({environment:t,redirectData:a,spaceViewStore:s,isPrivate:!0,userSettingsStore:o.userSettingsStore,userRootStore:o.userRootStore,templatesToCreateInSpace:{pageTemplates:l},planType:"team",spaceJoinOrCreate:"join",useCases:[],userPersona:"unfilled",isNewUserOnboarding:r,userContext:(0,oe().p)({spaceJoinOrCreate:"join",onboardingState:B().A.state})});y().xs(t,{initial_workspace_type:"join",space_id:n,onboarding_templates:null==l?void 0:l.map((e=>e.rootId))});return{redirectData:Ae(a,d,t),spaceId:n,spaceViewId:s.id,inviteLinkCode:void 0,spaceStore:void 0,spaceViewStore:s,teamStoreId:void 0}}async function Ie(e,t){const o=await async function(e,t){const o="spaceId"in e.redirectData&&e.redirectData.spaceId,{onboardingData:n,redirectData:a}=e;if(o){const r=await xe({environment:t,onboardingData:n,redirectData:a,spaceId:o,isNewUserOnboarding:ne().ze(e)});return{...e,...r,spaceId:o}}if("fork_page"===a.type){const o=z().jU(n.userRootStore);if(o.length>0){const r=o[0].getSpaceId();if(r){const i=X().SL.createChildStore(n.userRootStore,{table:g().NX,id:r}),s=Ae(a,await j().sg({environment:t,userRootStore:n.userRootStore,isPrivate:!0,forkedPageId:a.pageId,spaceStore:i,spaceViewStore:o[0]}),t);return{...e,redirectData:s,spaceViewId:o[0].id,spaceId:r}}}}return e}(e,t);return Se(e.onboardingData,o,t)}function Ae(e,t,o){if(t){if("redirect_space"===e.type)return{type:e.type,pageId:t.id,spaceId:e.spaceId};if("getting_started_page"===e.type)return ne().zX(o)?{type:"mobile_native_home"}:{type:e.type,pageId:t.id};if("fork_page"===e.type)return{type:e.type,pageId:t.id};if("performance_marketing_template"===e.type)return{type:e.type,pageId:t.id}}return e}async function De(e,t,o,n){const{onboardingData:a}=e;(0,E().u)({environment:n,event:{eventName:"complete_onboarding_space_join",eventProperties:{permission_level:o,type:t.type}}});const r=G().default.DO_NOT_USE_markLegacy("onboarding.join_space");if("guest"===o){if(ye({environment:n,spaceJoinOrCreate:"join",permissionLevel:o,onboardingState:e}),"team_invite_redirect"===t.type)throw new Error("Cannot invite guests to workspace from invite links.");await M().DT({environment:n,spaceId:t.spaceId,userRootStore:a.userRootStore,analyticsFrom:"onboarding",userSettingsStore:a.userSettingsStore,navigate:!0,redirectPageId:t.pageId})}else{const o=await xe({environment:n,onboardingData:a,redirectData:t,spaceId:t.spaceId,isNewUserOnboarding:ne().ze(e)});await we({environment:n,onboardingData:a,spaceId:o.spaceId,spaceViewId:o.spaceViewId,spaceJoinOrCreate:"join",redirectData:o.redirectData,onboardingFlow:e.flow,onboardingState:e})}return G().default.DO_NOT_USE_measureLegacy(r,{environment:n,data:{flow:e.flow,onboarding_complete_data:{stage:e.stage,redirect_data:t,is_new_user:ne().ze(e),permission_level:o}}}),{isOnboarding:!1,isLoading:!1,currentUserId:n.currentUser.id}}function Te(e){let t;e.onboardingData.isEducationPlanEligible&&(t="student");const{function:o}=(0,$().p3)();return o&&(t=o),{userPersona:t}}async function Pe(e,t,o){let n=!1,a=!1;const r=await C().callApi({eventName:"checkAndApplyPerfmarkTrial",environment:o,data:{spaceId:e}});if("success"===r.type){const e="success"===r.data.status;(0,E().u)({environment:o,event:{eventName:"trial_apply_attempt",eventProperties:{trial_id:"perfmark",success:e,planType:t,..."error"===r.data.status&&{reason:r.data.reason}}}}),w().D$(o,{trial_id:"perfmark",success:e,planType:t,domainType:(0,H().FX)()}),"success"===r.data.status?n=!0:a=!0}else(0,E().u)({environment:o,event:{eventName:"trial_apply_attempt",eventProperties:{trial_id:"perfmark",success:!1,planType:t,reason:r.error.name}}}),w().D$(o,{trial_id:"perfmark",success:!1,planType:t}),i().log({level:"error",from:"onboardingActions",type:"applyPerfmarkTrialError",error:(0,S().convertErrorToLog)(r.error)});return(0,ee().Q8)(),{enableTrialInfoModal:n,enableTrialIneligibleToast:a}}function Oe(e,t,o,n){return"create"===e.spaceJoinOrCreate&&e.isNewUser&&!o&&te().default.setState({type:"team_creator",step:"welcome",initialTeamStoreId:e.teamStoreId}),"modal"===o&&(0,Z().fR)({openedFrom:"onboarding"}),"sidebar"===o&&(0,K().UW)(t,"onboarding_reverse_trial_sidebar"),n&&re().A.setState({open:!0,isExistingUser:!1}),{isOnboarding:!1,isLoading:!1,currentUserId:t.currentUser.id}}function Me(e){return e.map((e=>je(e))).filter((e=>void 0!==e))}function je(e){switch(e){case"docs":return"docsCollection";case"project":return"projectsCollection";case"notes":return"meetingNotesCollection";case"goals":return"goalsCollection";default:return}}},665579:(e,t,o)=>{o.d(t,{$L:()=>s,BZ:()=>c,EC:()=>m,EI:()=>w,E_:()=>I,Ed:()=>u,Fq:()=>v,Lu:()=>y,Mk:()=>g,O0:()=>x,UO:()=>A,V$:()=>C,VQ:()=>b,Xx:()=>h,Xy:()=>d,YS:()=>f,_g:()=>_,dd:()=>p,pW:()=>l,q3:()=>i,wH:()=>r});var n=()=>o(496603),a=()=>o(534177);const r=160,i=40,s=24,l=20,d=600,c=270,p=405,u=480,g=500,m=void 0,b=16,f=10,v=8,S=(o(69447).nh,{backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"}),_=4;function w(e){return{icon:e.icon.secondary,text:e.text.secondary}}function h(e){return{width:48,height:48,fill:e.icon.tertiary}}function y(e){let{theme:t,isPhone:o}=e;return o?t.personalHomeBackgroundPhone:t.surface.page}const k=1;function C(e){let{isPhone:t,theme:o}=e;return{zIndex:1,position:"relative",display:"flex",flexDirection:"column",borderRadius:12,background:o.home.tile.background,boxShadow:I({isPhone:t,theme:o}),...S}}function x(e){let{mode:t}=e;switch(t){case"dark":return 0;case"light":return k;default:return(0,a().ub)(t),0}}function I(e){let{isPhone:t,theme:o,borderOnly:a}=e;if("dark"===o.mode)return"unset";o.mode;const r=x({mode:o.mode});return(0,n().oE)([a||t?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${r}px rgba(0, 0, 0, 0.05)`]).join(", ")}function A(e){const{isPhone:t,theme:o,borderOnly:n}=e;return{unhoveredBoxShadow:I({isPhone:t,theme:o,borderOnly:n}),hoveredBoxShadow:"light"===o.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):o.homeShadow.card.hovered}}},677195:(e,t,o)=>{o.d(t,{R:()=>a});o(296540);var n=o(474848);const a=(0,o(340498).wt)("verificationCheck",{viewBox:"0 0 6 7",svg:(0,n.jsx)("path",{d:"M2.84245 6.11619C2.71116 6.30644 2.53392 6.40156 2.31072 6.40156C2.20131 6.40156 2.10066 6.37881 2.00875 6.33332C1.92123 6.28782 1.83589 6.21545 1.75274 6.11619L0.150985 4.25515C0.0503282 4.12694 0 3.99874 0 3.87053C0 3.73406 0.04814 3.61826 0.14442 3.52314C0.245077 3.42388 0.365427 3.37425 0.50547 3.37425C0.597374 3.37425 0.680525 3.39286 0.754923 3.43008C0.833698 3.46317 0.912473 3.52934 0.991247 3.6286L2.28446 5.21049L5.00875 1.07896C5.13129 0.892857 5.28446 0.799805 5.46827 0.799805C5.60394 0.799805 5.72648 0.841161 5.83589 0.923874C5.9453 1.00659 6 1.11618 6 1.25266C6 1.32297 5.98249 1.39327 5.94748 1.46358C5.91685 1.52975 5.88184 1.59178 5.84245 1.64968L2.84245 6.11619Z"})})},681810:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(867772).Ay)},701751:(e,t,o)=>{o.d(t,{p:()=>r});o(296540);var n=o(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.94 14.91 15.66",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 1 0 1.1 0z"}),(0,n.jsx)("path",{d:"M15.4 1.95a3.48 3.48 0 0 0-3.48 3.48v1.92H6.4a2.425 2.425 0 0 0-2.425 2.425v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.425 2.425 0 0 0 13.6 7.35h-.43V5.43a2.23 2.23 0 1 1 4.46 0v2.095a.625.625 0 1 0 1.25 0V5.43a3.48 3.48 0 0 0-3.48-3.48M5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},r=(0,o(340498).wt)("lockOpen",a)},735695:(e,t,o)=>{o.d(t,{Ay:()=>I,iZ:()=>k,vE:()=>y});var n=o(296540),a=()=>o(804773),r=()=>o(401497),i=()=>o(149375),s=()=>o(66913),l=()=>o(959013),d=()=>o(284371),c=()=>o(686526),p=()=>o(704152),u=()=>o(285790),g=()=>o(928600),m=()=>o(480095),b=()=>o(554509),f=()=>o(780054),v=()=>o(722872),S=()=>o(253579),_=()=>o(255824),w=o(474848);const h=(0,l().YK)({back:{defaultMessage:"Back",id:"collectionsSettingsMenu.back"}}),y=290,k=400;function C(e){let{children:t,title:o,desktopTitleType:n,settingsStackLength:a,handleClose:c,handleBackArrowClick:g,hideDesktopHeader:m,hasBackStack:f}=e;const v=(0,_().a)(),S=(0,l().tz)(),y=(0,r().IS)((e=>({hiddenDesktopHeaderDiv:{height:0},nonHiddenDesktopHeaderDiv:{display:"flex",alignItems:v?"top":"center",padding:v?"0px 14px 6px 14px":"14px 16px 6px 16px",height:v?void 0:42},arrowButton:{marginRight:8,marginLeft:-2,height:22},arrowIcon:{width:16,height:16},title:{flexGrow:1,fontWeight:v?d().Wy.medium:d().Wy.semibold,fontSize:v?16:14,lineHeight:v?"24px":void 0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},closeButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:18,height:18,flexShrink:0},closeButtonHover:{background:e.buttonPressedBackground},closeIcon:{width:14,fill:e.text.secondary}})),[v]),k=!v;return(0,w.jsxs)(w.Fragment,{children:[m?(0,w.jsx)("div",{style:y.hiddenDesktopHeaderDiv}):(0,w.jsxs)("div",{style:y.nonHiddenDesktopHeaderDiv,children:[(a>1||f)&&(0,w.jsx)(u().A,{icon:i().v,style:y.arrowButton,iconStyle:y.arrowIcon,onClick:g,ariaLabel:S.formatMessage(h.back)}),"sectionHeader"===n?(0,w.jsx)(b().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",customStyles:{flexGrow:1},children:o}):(0,w.jsx)("span",{style:y.title,children:o}),k&&(0,w.jsx)(p().A,{onClick:c,style:y.closeButton,hoveredStyle:y.closeButtonHover,children:(0,s().V)(y.closeIcon)})]}),t]})}function x(e,t){let{children:r,footer:i,header:s,unconstrainedWidth:l,desktopWidth:d,title:p,desktopTitleType:u,collectionSettingsStore:b,fullHeight:h,hideDesktopHeader:k,menuScrollerStyle:x,innerContentWrapperStyle:I,disableScroller:A,handleBackArrowClick:D,hasBackStack:T,handleClose:P}=e;const O=(0,o(175116).Ks)(),M=(0,v().Tf)(),j=(0,_().a)(),{currentTab:R,settingsStackLength:U,hideHeader:E}=(0,o(56366).K8)((()=>{const e=b.state;return{currentTab:(0,o(940371).S)(b),settingsStackLength:e.stack.length,hideHeader:e.hideSettingsHeader}}),[b]),L=(0,n.useCallback)((()=>{var e;D?D():c().yl({collectionSettingsStore:b,keepPreviousRef:"form_editor"===(null==O||null===(e=O.collectionViewStore())||void 0===e?void 0:e.getType())})}),[D,b,O]),V=(0,n.useCallback)((e=>{P?P(e):c().os({collectionSettingsStore:b})}),[P,b]),F=(0,n.useCallback)((e=>{(0,S().rW)(e.target)||(0,S().iX)(e.target)||(0,S().u2)(e.target)||o(263711).g.state.isOpen||V(e)}),[V]);if(!R)return null;let N;if(f().A.isMobile)N={disableScroller:A,menuType:v().gu.Modal,title:p,left:U>1?(0,w.jsx)(m().MobileModalBackButton,{}):void 0,onClickLeft:U>1?L:void 0,scrollerStyle:x,innerRef:t,right:M?void 0:(0,w.jsx)(m().DoneMenuText,{}),onClickRight:M?void 0:V};else{const e=l||d?void 0:j?280:y;N={disableScroller:A,menuType:v().gu.Popup,minWidth:j?280:y,width:d,maxHeight:h?"100%":"80vh",...e&&{maxWidth:e},onClickOutside:F,scrollerStyle:{flexGrow:0,...x},header:!E&&(0,w.jsx)(C,{settingsStackLength:U,handleClose:V,handleBackArrowClick:L,hasBackStack:T,hideDesktopHeader:k,title:p,desktopTitleType:u,children:s}),paddingTop:E?6:0,footer:i,innerRef:t}}const B=(0,w.jsxs)(w.Fragment,{children:[f().A.isMobile&&s,r,f().A.isMobile&&i]});return h?(0,w.jsx)(a().Y,{direction:"vertical",children:(0,w.jsx)(g().A,{...N,children:B})}):(0,w.jsx)(o(297872).A,{capture:!0,allowMobileAutoScroll:!0,allowEsc:!0,render:e=>(0,w.jsx)(a().Y,{direction:"vertical",children:(0,w.jsx)(g().A,{...N,...e,children:(0,w.jsx)("div",{style:I,children:B})})})})}const I=(0,n.forwardRef)(x)},735790:(e,t,o)=>{o.d(t,{M:()=>r});o(296540);var n=o(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.25 15.25 11.5",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M3 7.375h6.829a2.501 2.501 0 0 0 4.842 0H17a.625.625 0 1 0 0-1.25h-2.329a2.501 2.501 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25M12.25 5.5a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M7.75 15.75a2.5 2.5 0 0 0 2.421-1.875H17a.625.625 0 1 0 0-1.25h-6.829a2.5 2.5 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25h2.329A2.5 2.5 0 0 0 7.75 15.75m0-1.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})]})},r=(0,o(340498).wt)("sliders",a)},739135:(e,t,o)=>{o.d(t,{KD:()=>d,gt:()=>c,i9:()=>l,ll:()=>i,tb:()=>s,x$:()=>r});var n=()=>o(541235),a=()=>o(496603);function r(e,t){return i(c(e,t))}function i(e){return void 0!==e&&(e===n().q_||e===n().YD)}function s(e,t){if(i(t))return;const o=n().c$[e],a=o.steps.findIndex((e=>e.id===t));return-1===a?o.steps[0].id:a===o.steps.length-1?n().q_:o.steps[a+1].id}function l(e,t){const o=c(e,t);if(o&&!i(o))return s(t,o)}function d(e,t){const o=c(e,t);if(o)return function(e,t){const o=n().c$[e];var r;if(i(t))return null===(r=(0,a().HV)(o.steps))||void 0===r?void 0:r.id;const s=o.steps.findIndex((e=>e.id===t));return-1!==s&&0!==s?o.steps[s-1].id:void 0}(t,o)}function c(e,t){var o;if(!e)return;const a=((null===(o=e.getSettings())||void 0===o?void 0:o.tutorials)||{})[t];return void 0===a?n().c$[t].steps[0].id:a}},742117:(e,t,o)=>{o.d(t,{V:()=>a});o(296540);var n=o(474848);const a=(0,o(340498).wt)("chevronRight",{viewBox:"0 0 16 16",directional:!0,svg:(0,n.jsx)("path",{d:"M12.375 8.06445C12.375 7.83203 12.2861 7.63379 12.1084 7.45605L6.77637 2.24023C6.62598 2.08984 6.44141 2.01465 6.22266 2.01465C5.77832 2.01465 5.42285 2.35645 5.42285 2.80078C5.42285 3.01953 5.51172 3.21777 5.66211 3.375L10.4746 8.06445L5.66211 12.7539C5.51855 12.9043 5.42285 13.1025 5.42285 13.3213C5.42285 13.7725 5.77832 14.1143 6.22266 14.1143C6.44141 14.1143 6.62598 14.0391 6.77637 13.8887L12.1084 8.67285C12.293 8.49512 12.375 8.29688 12.375 8.06445Z"})})},747671:(e,t,o)=>{o.d(t,{Q:()=>n,a:()=>a});let n=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});class a extends(()=>o(757695))().Store{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}}},748539:(e,t,o)=>{o.d(t,{f:()=>n});const n=new(o(645873).O2)("pageCovers",(async()=>{const{pageCovers:e}=await o.e(40198).then(o.bind(o,519737));return e}))},756114:(e,t,o)=>{o.d(t,{D:()=>n});function n(e,t){t.route.name;return!1}},757156:(e,t,o)=>{o.r(t),o.d(t,{onboardingFlowNameToFlowConfig:()=>b});var n=o.n(o(794148)),a=()=>o(677338),r=()=>o(867899),i=()=>o(496414),s=()=>o(780054),l=()=>o(285518),d=()=>o(144114),c=()=>o(765957),p=()=>o(589994),u=()=>o(151168),g=()=>o(322920),m=()=>o(235921);const b={partner_program_onboarding_flow:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>["profile","offer_eligibility_workspace_choose","onboarding_plan_type_choose","onboarding_collaborative_intent_choose","onboarding_category_survey","team_onboarding_persona_survey","team_onboarding_use_cases","team_onboarding_workspace_create","partner_program_onboarding_checkout"],getMobileStages:e=>["mobile_partner_program_redeem_info","mobile_profile","mobile_onboarding_workspace_choose","mobile_onboarding_plan_type_choose","mobile_onboarding_collaborative_intent_choose","mobile_team_onboarding_function","mobile_team_onboarding_role","mobile_team_onboarding_company_size","mobile_onboarding_category_survey","mobile_team_onboarding_use_cases","mobile_team_onboarding_workspace_create","mobile_team_onboarding_invite",...(0,g().getMobileTutorialStages)(e)],onStartFlow:()=>{},onCompleteFlow:async(e,t,o)=>{if("partner_program_onboarding_flow"!==t.flowName||!t.onboardingData)return;if((0,a().fu)(),t.selectedEligibleWorkspaceId){var n,i;const{redirectAfterContextualizedOnboardingComplete:o}=await r().F.contextualizedOnboardingActions.load(),a=(0,d().sg)(t.onboardingData);return void(await o({environment:e,spaceViewId:null===(n=c().default.state.currentSpaceViewStore)||void 0===n?void 0:n.id,spaceId:null===(i=c().default.state.currentSpaceStore)||void 0===i?void 0:i.id,onboardingData:t.onboardingData,spaceJoinOrCreate:"join",redirectData:a,onboardingFlow:t.flowName,onboardingState:t,permissionLevel:(0,d().S1)(a)}))}const{defaultOnboardingComplete:s}=await r().F.contextualizedOnboardingActions.load();await s(e,o)},shouldShowFlowToUser:e=>void 0!==(0,a().OC)()},education_flow:{isEnabledForDesktop:!0,isEnabledForMobile:!1,getDesktopStages:()=>["profile","onboarding_workspace_choose","education_persona_survey","education_category_picker"],onStartFlow:()=>{},shouldShowFlowToUser:e=>!1},meeting_notes_flow:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>["profile","onboarding_workspace_choose","onboarding_plan_type_choose","onboarding_collaborative_intent_choose","team_onboarding_workspace_create","team_onboarding_timed_trial_checkout"],getMobileStages:e=>["mobile_profile","mobile_onboarding_workspace_choose","mobile_onboarding_plan_type_choose","mobile_onboarding_collaborative_intent_choose","mobile_team_onboarding_workspace_create"],onStartFlow:()=>{},shouldShowFlowToUser:(e,t)=>0===((0,l().R)(c().default.state.currentUserRootStore)??0)&&"meeting_notes"===(0,a().J0)()},form_response_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>["profile","onboarding_workspace_choose"],getMobileStages:()=>["mobile_profile","mobile_onboarding_workspace_choose"],onStartFlow:()=>{},onCompleteFlow:async(e,t,a)=>{n()("form_response_onboarding"===t.flowName);const{defaultOnboardingComplete:i}=await r().F.contextualizedOnboardingActions.load();await i(e,a),o(464510).V(t.formResponseId,t.secretKey,t.formSpaceId)},shouldShowFlowToUser:()=>0===(0,l().R)(c().default.state.currentUserRootStore)&&(0,o(326406).A)()},mail_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>[],getMobileStages:()=>[],onStartFlow:()=>{},onCompleteFlow:async(e,t,n)=>{const{setAndTrackContextualizedOnboardingComplete:l}=await r().F.contextualizedOnboardingActions.load(),{onboardingData:c,joinableSpaces:u}=t;if(!c)return;const{onboardingStateActions:g}=await o(935370).onboardingActionsDependency.load();if(i().m({message:g.messages.creatingWorkspace}),0===u.length&&c.canUserCreateSpace){const n=o(972435).A.getIntl(),a=c.userStore.getFullName(n),{spaceViewStore:r}=await o(426116).bz({environment:e,planType:"personal",planSelection:"personal",name:a?(0,d().JR)(a,n):(0,d().CD)(n),userRootStore:c.userRootStore,analyticsFrom:"onboarding",icon:void 0,userPersona:"unfilled"});o(72234).I$(e,r,!0),l({environment:e,onboardingState:t,userStore:c.userStore,spaceJoinOrCreate:"create",permissionLevel:"member"})}await p().transactionQueue.drain(),i().V();const m=(0,a().dw)();o(857639).log({data:{miscDataToConvertToString:{from:"getPostOnboardingRedirectURL",redirectUrl:m}},from:"contextualizedOnboardingflowDefinitions",level:"debug",type:"mail_onboarding:onCompleteFlow"});const b=null==m?void 0:m.startsWith(`${s().A.mail.domainBaseUrl}/`);Boolean(m&&b)?o(435009).oo({environment:e,url:`${m}?from=contextualizedOnboarding2#activeUserID=${e.currentUser.id}`}):await(0,o(838824).Z)({environment:e,from:"contextualizedOnboarding",targetSelf:!0})},shouldShowFlowToUser:()=>"mail"===(0,a().dY)()},calendar_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>["profile"],getMobileStages:()=>["mobile_profile"],onStartFlow:()=>{},onCompleteFlow:async(e,t,n)=>{await p().transactionQueue.drain(),await(0,o(645200).J7)({environment:e,url:`${s().A.domainBaseUrl}/calendarAuth/`,from:"contextualizedOnboarding",targetSelf:!0})},shouldShowFlowToUser:()=>0===(0,l().R)(c().default.state.currentUserRootStore)&&"calendar"===(0,a().dY)()},performance_marketing_term_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!1,getDesktopStages:()=>["profile","onboarding_workspace_choose","onboarding_plan_type_choose","onboarding_collaborative_intent_choose","team_onboarding_invite"],onStartFlow:()=>{},onCompleteFlow:async(e,t,o)=>{const{defaultOnboardingComplete:n}=await r().F.contextualizedOnboardingActions.load();await n(e,o)},shouldShowFlowToUser:e=>!e.device.isMobile&&("gantt"===(0,u().TQ)()||"crm"===(0,u().TQ)()||"projectManagement"===(0,u().TQ)())},mobile_tutorial_onboarding:{isEnabledForDesktop:!1,isEnabledForMobile:!0,getMobileStages:e=>(0,g().getMobileTutorialStages)(e),onStartFlow:()=>{},onCompleteFlow:async(e,t,o)=>{var n,a;const i=t.onboardingData;if(!i)return;const{redirectAfterContextualizedOnboardingComplete:s}=await r().F.contextualizedOnboardingActions.load(),l=(0,d().sg)(i);await s({environment:e,spaceViewId:null===(n=c().default.state.currentSpaceViewStore)||void 0===n?void 0:n.id,spaceId:null===(a=c().default.state.currentSpaceStore)||void 0===a?void 0:a.id,onboardingData:i,spaceJoinOrCreate:"join",redirectData:l,onboardingFlow:t.flowName,onboardingState:t,permissionLevel:(0,d().S1)(l)})},shouldShowFlowToUser:(e,t)=>Boolean(t)},mobile_promote_app_download:{isEnabledForDesktop:!1,isEnabledForMobile:!0,getMobileStages:e=>["mobile_onboarding_promote_app_download"],onStartFlow:()=>{},onCompleteFlow:()=>{},shouldShowFlowToUser:(e,t)=>0===(0,l().R)(c().default.state.currentUserRootStore)&&"required_to_download"===(0,o(47373).el)({environment:e})},default:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>{const e="on"===f({experimentId:"onboarding_split_team_survey",disableExposureLogging:!0})?["team_onboarding_function","team_onboarding_role","team_onboarding_company_size"]:["team_onboarding_persona_survey"],t="on"===f({experimentId:"adoption_diy_onboarding_template",disableExposureLogging:!0});return["profile","onboarding_workspace_choose","onboarding_plan_type_choose","onboarding_collaborative_intent_choose",t?"onboarding_use_case_picker":"onboarding_category_survey","desktop_onboarding_promote_app_download","onboarding_calendar_signup",...e,t?"team_onboarding_use_case_picker":"team_onboarding_use_cases","team_onboarding_workspace_create","team_onboarding_invite","team_onboarding_timed_trial_offer","team_onboarding_timed_trial_checkout","team_desktop_onboarding_promote_app_download"]},getMobileStages:e=>["mobile_onboarding_promote_app_download",...["mobile_profile","mobile_onboarding_workspace_choose","mobile_onboarding_plan_type_choose","mobile_onboarding_collaborative_intent_choose",..."on"===f({experimentId:"onboarding_split_team_survey",disableExposureLogging:!0})?["mobile_team_onboarding_function","mobile_team_onboarding_role","mobile_team_onboarding_company_size"]:["mobile_team_onboarding_persona_survey"],"mobile_onboarding_category_survey","mobile_team_onboarding_use_cases","mobile_team_onboarding_workspace_create","mobile_team_onboarding_invite"],...(0,g().getMobileTutorialStages)(e)],onStartFlow:()=>{},shouldShowFlowToUser:(e,t)=>(void 0===(0,l().R)(c().default.state.currentUserRootStore)&&(0,o(2220).u)({environment:e,event:{eventName:"onboarding_undefined_space_view_count",eventProperties:{}}}),!t)},undefined:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>[],getMobileStages:()=>[],onStartFlow:()=>{},onCompleteFlow:async()=>{},shouldShowFlowToUser:()=>!1}};function f(e){const{experimentId:t,disableExposureLogging:n}=e,a=m().A.state.onboardingExperiments;if(null!=a&&a[t])return a[t];const r=o(217429).default.getEligibleGroup({experimentId:t,defaultGroup:"control",disableExposureLogging:n});return m().A.setState({...m().A.state,onboardingExperiments:{...a,[t]:r}}),r}},801678:(e,t,o)=>{o.d(t,{A:()=>m});var n=o(296540),a=()=>o(662303),r=()=>o(56366),i=()=>o(959013),s=()=>o(381349),l=()=>o(496603),d=()=>o(284371),c=()=>o(720665),p=()=>o(145214),u=o(474848);const g={isRepositioning:!1};const m=function(e){const t=(0,n.useRef)(null),a=(0,o(484714).v3)(),[i,s]=(0,n.useState)(g),d=(0,n.useCallback)((()=>{s(g)}),[]),{renderControl:p,onFlushTemporaryPosition:m,style:f,source:v,store:S}=e,{isRepositioning:_,image:w,startDragRenderedPosition:h,startDragImageScreenHeight:y}=i,k=(0,r().K8)((()=>0===o(502438).default.state.stores.length),[]),[C,x]=(0,n.useState)(!1),I=(0,r().uB)(e.mouseStore,o(454305).A),A=(0,r().K8)((()=>I.state.mouseEntered),[I]),D=(0,o(401497).IS)((()=>({dragContainer:{width:"100%",cursor:_?"move":"inherit"},container:{position:"relative",width:"100%",zIndex:1}})),[_]),T=(0,r().K8)((()=>function(e,t,o){return(0,l().Et)(o)?o:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,l().Et)(e))return e}const o=.5;if(t.isCollectionView()){const e=t.getCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,c().pN)(t)?o:t}}const n=t.getFormat(),a=n.page_cover_position;if((0,l().Et)(a))return a;return o}(e,t)}(v,S,i.temporaryPosition)),[i.temporaryPosition,v,S]);(0,n.useEffect)((()=>{const e=e=>{const o=t.current;o&&!o.contains(e.target)&&_&&m({imagePosition:T,reset:()=>{I.reset(),d()}})};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)}),[T,_,I,m,d]),_&&!k&&d();const P=(0,n.useMemo)((()=>(0,l().nF)((e=>{I.setState({...I.state,mouseEntered:!0})}),100)),[I]),O=(0,n.useMemo)((()=>(0,l().sg)((e=>{I.setState({...I.state,mouseEntered:!1})}),100)),[I]),M=(0,n.useCallback)(((e,t)=>{o(778417).IU({environment:a});const n=new Image;n.onload=()=>{s((e=>({...e,isRepositioning:!0,image:n})))},t&&(n.src=t)}),[a]),j=(0,n.useCallback)((e=>{m({imagePosition:T,reset:()=>{d()}})}),[T,m,d]),R=(0,n.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,o(819121).p)(t)&&x(!0)}),[]),U=(0,n.useCallback)((()=>{x(!0)}),[]),E=(0,n.useCallback)((e=>{if(w&&_){const e=t.current;if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/w.width*w.height;s((e=>({...e,startDragImageScreenHeight:t,startDragRenderedPosition:T})))}}}),[w,T,_]),L=(0,n.useCallback)((e=>{if(_){const t=e.diffY/(y||0)+(h||0);s((e=>({...e,temporaryPosition:(0,l().LI)((0,o(40845).A)(t,0,1),4)})))}}),[_,y,h]),V=(0,n.useCallback)((()=>{s((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),F=(0,r().K8)((()=>p({handleRepositionClick:M,handleSavePositionClick:j,handleCancelClick:d,isVisible:A||C||_,isRepositioning:_})),[M,j,C,_,A,p,d]),N=(0,o(79043).A)(Boolean(e.preventClickPropagation));return(0,u.jsxs)("div",{ref:t,onFocus:R,onBlur:U,onMouseEnter:P,onMouseMove:P,onMouseLeave:O,...N,...(0,o(955825).AH)(D.container,f),children:[(0,u.jsx)(o(603820).A,{onDraggableDragStart:E,onDraggableDragMove:L,onDraggableDragEnd:V,onDraggableDragCancel:V,disabled:!_,render:t=>(0,u.jsx)("div",{style:D.dragContainer,...t,children:e.render({imagePosition:T,isRepositioning:_})})}),(0,u.jsx)(b,{small:e.small,isRepositioning:_}),F]})};function b(e){let{small:t,isRepositioning:o}=e;if(t)return null;const n={background:s().Ay.blackWithAlpha(.4),borderRadius:4,color:s().Ay.white,fontSize:12,fontFamily:d().vc(a().locale).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,u.jsx)(p().A,{visible:o,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:n,children:(0,u.jsx)(i().sA,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},843189:(e,t,o)=>{o.d(t,{E:()=>i});var n=o(296540),a=()=>o(960715),r=o(474848);const i=n.forwardRef(((e,t)=>{let{children:n,color:i,disabled:s,iconLeading:l,iconStyle:d,iconTrailing:c,isLoading:p,shape:u="default",size:g="md",style:m,...b}=e;const f=(0,o(963589).X)("nds_button_gap")||Boolean(c),v=(0,o(401497).IS)((e=>{const t=i?`${i}Primary`:"primary",r=i||"regular",c=i?`${i}Hover`:"primaryHover",b=i?`${i}Pressed`:"primaryPressed";return{button:{...(0,a().qq)({shape:u,size:g,hasIconOnly:Boolean(l)&&!n,isButtonGapEnabled:f}),justifyContent:"center",color:e.text[t],background:e.tint[r],opacity:s||p?.3:1,fontWeight:o(284371).Wy.medium,...m},hovered:{background:s?e.tint[r]:e.tint[c]},pressed:{background:s?e.tint[r]:e.tint[b]},icon:{...(0,a().D3)({size:g,hasIconOnly:!n,isButtonGapEnabled:f}),...d}}}),[n,i,s,l,d,f,p,u,g,m]);return(0,r.jsxs)(o(197190).A,{ref:t,style:v.button,hoveredStyle:v.hovered,pressedStyle:v.pressed,disabled:s||p,...b,children:[p?(0,r.jsx)(o(331542).A,{style:{marginRight:4}}):null,l?l(v.icon):null,n,c?c(v.icon):null]})}));i.displayName="TintButton"},846199:(e,t,o)=>{o.d(t,{A:()=>n});const n=o(757695).Store.createValue({open:!1},{name:"TrialInfoModalStore"})},867772:(e,t,o)=>{o.d(t,{Ay:()=>l,Gi:()=>r,Wc:()=>n,pF:()=>i,vS:()=>a});const n="loadingLocalImage",a="uploading",r="downloading",i="loaded";class s extends(()=>o(757695))().Store{getInitialState(){return{loadingMode:i}}}const l=s},882262:(e,t,o)=>{o.d(t,{m:()=>a});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.23 3.23 13.54 13.53",svg:(0,o(474848).jsx)("path",{d:"M4.485 8.86V5.369l4.073 4.073a.625.625 0 0 0 .884-.884L5.369 4.485h3.49a.625.625 0 1 0 0-1.25h-5a.625.625 0 0 0-.624.625v5a.625.625 0 0 0 1.25 0m10.146 6.655-4.07-4.07a.625.625 0 0 1 .884-.884l4.07 4.07V11.14a.625.625 0 1 1 1.25 0v5c0 .345-.28.625-.625.625h-5a.625.625 0 1 1 0-1.25z"})},a=(0,o(340498).wt)("arrowExpandDiagonal",n)},937199:(e,t,o)=>{o.d(t,{LH:()=>r,Op:()=>a,bi:()=>l,sf:()=>s,v$:()=>i});o(16280);var n=o(296540);const a=(0,n.createContext)(null);function r(){const e=(0,n.useContext)(a);if(!e)throw new Error("usePageLayoutEditorContext must be used inside BaseLayoutEditorContext.Provider");return e}function i(){return(0,n.useContext)(a)}a.displayName="BaseLayoutEditorContext";const s=(0,n.createContext)(null);function l(){const e=(0,n.useContext)(s);if(!e)throw new Error("usePageLayoutEditorContext must be used inside PageLayoutEditorContextProvider");return e}s.displayName="PageLayoutEditorContext"},990402:(e,t,o)=>{o.d(t,{m:()=>a});var n=()=>o(46986);function a(e){return("workflow"===e.getType()||e.isCollectionView()&&e.getWorkflowStore())&&e.canEdit()&&!e.isSystemBlock()&&(0,n().re)()}}}]);