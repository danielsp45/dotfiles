"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[16006],{541616:(e,t,i)=>{i.r(t),i.d(t,{VerifiedPagesSettings:()=>te});i(898992),i(354520),i(581454);var r=i(296540),n=()=>i(484714),s=()=>i(56366),a=()=>i(401497),o=()=>i(911259),l=()=>i(372160),d=()=>i(245241),c=()=>i(931075),g=()=>i(959013),p=()=>i(534177),u=()=>i(284371),f=()=>i(641300),x=()=>i(331542),h=()=>i(8980),S=()=>i(864943),y=()=>i(125565),m=()=>i(409066),v=()=>i(140828),j=()=>i(693176),w=()=>i(821879),A=()=>i(843878),b=()=>i(8178),I=()=>i(495427),C=()=>i(186445),M=()=>i(972435),P=()=>i(470928),O=()=>i(135599),k=()=>i(963589),R=()=>i(991249),T=()=>i(645109),H=()=>i(920769),_=()=>i(823541),z=(i(16280),i(672577),()=>i(662303)),B=()=>i(584262),U=()=>i(869190),V=()=>i(493823),D=()=>i(406699),E=()=>i(296798),L=()=>i(744766),N=()=>i(859428),K=()=>i(994006),W=()=>i(379421),F=()=>i(492414),$=()=>i(630116),Q=()=>i(404141),Y=i(474848);const G=10;function J(e){let{pageStore:t}=e;const i=(0,s().K8)((()=>(0,F().J8)({store:t,pageVisitSource:B().y8.VerifiedPagesSettings})),[t]),n=(0,r.useCallback)((e=>{e.metaKey||Q().A.setState({...Q().A.state,open:!1})}),[]),o=(0,a().IS)((()=>({container:{width:"100%"},linkBox:{width:"100%"},linkBoxHover:{marginLeft:-G,paddingLeft:G,width:`calc(100% + ${G}px)`}})),[]);return(0,Y.jsx)("div",{style:o.container,children:(0,Y.jsx)(E().A,{href:i,style:o.linkBox,hoveredStyle:o.linkBoxHover,onClick:n,children:(0,Y.jsx)(L().oc,{blockStore:t})})})}function q(e){let{pageStore:t,filteredOwnerIds:i}=e;const r=(0,a().IS)((()=>({ownerCell:{display:"flex",alignItems:"center"},owner:{width:"fit-content"}})),[]),{verificationOwners:n}=(0,s().K8)((()=>(0,P().h4)({blockStore:t})),[t]),o=n.map((e=>$().sk.createChildStore(t,e))).filter((e=>e instanceof $().LU));if(0===o.length)throw Error("Verified page has no verification owner");const l=o.find((e=>i.includes(e.id)))??o[0],d=o.filter((e=>e.id!==l.id));return(0,Y.jsxs)("div",{style:r.ownerCell,children:[(0,Y.jsx)(K().A,{userStore:l,avatarSize:20,style:r.owner},`${t.id}-owner`),d.length>0&&(0,Y.jsx)(X,{hiddenOwners:d})]})}function X(e){let{hiddenOwners:t}=e;const i=(0,a().IS)((e=>({hiddenOwnersCount:{marginLeft:4},hiddenOwner:{margin:"4px 0px",color:e.text.contrastPrimary},tooltip:{width:200},tooltipHeader:{color:e.text.contrastSecondary,marginBottom:6}})),[]);return(0,Y.jsx)(N().A,{allowHover:!0,originGap:7,style:i.tooltip,renderTooltip:e=>(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(y().A,{isSmall:!0,style:i.tooltipHeader,children:(0,Y.jsx)(g().sA,{id:"verifiedPagesSettings.hiddenOwners.tooltipHeader",defaultMessage:"Owners"})}),(0,Y.jsx)("div",{...e,children:t.map((e=>(0,Y.jsx)(K().A,{userStore:e,avatarSize:20,style:i.hiddenOwner},e.id)))})]}),render:e=>(0,Y.jsx)("div",{...e,style:i.hiddenOwnersCount,children:(0,Y.jsx)(y().A,{isSecondaryColor:!0,children:`+${t.length}`})})})}function Z(e){let{pageStore:t,verificationState:i}=e;const r=(0,n().Y0)();return(0,Y.jsx)(D().Ay,{renderOrigin:e=>(0,Y.jsx)(V().p,{size:"sm",isLightGray:"expired"===i.type,...e,children:ee({verificationState:i})}),render:e=>(0,Y.jsx)(W().C,{onClose:()=>e.close(),blockStore:t,entrypoint:"centralized_view"}),popupType:r.isMobile?D().z7.SlideUp:D().z7.Popup})}function ee(e){let{verificationState:t}=e;if("none"===t.type)throw new Error("Verified page has no verification state");return"expired"===t.type?(0,Y.jsx)(g().sA,{id:"verifiedPagesSettings.verificationStatus.expired",defaultMessage:"Expired"}):"verified"===t.type?t.isIndefinite?(0,Y.jsx)(g().sA,{id:"verifiedPagesSettings.verificationStatus.indefinite",defaultMessage:"Indefinitely"}):(0,U().jE)(t.dateTimeRange.end.toMillis(),z().locale,M().A.getIntl(),void 0,"medium"):void(0,p().HB)(t)}function te(e){let{spaceStore:t}=e;const i=(0,n().v3)(),[o,l]=(0,r.useState)(""),[u,f]=(0,r.useState)(i.currentUser.id?[i.currentUser.id]:[]),[x,h]=(0,r.useState)([]),[S,y]=(0,r.useState)([]),R=(0,k().X)("upgrade_system"),T={ancestors:S,inTeams:x,verificationOwners:u},H=(0,s().K8)((()=>{const e=t.getModel();return!(e&&(0,c().Xi)(e))}),[t]),_=(0,s().K8)((()=>C().Qr(i)),[i]),{results:z,isResultsLoading:B,fetchAdditionalServerResultsOnChange:U}=(0,O().W)({query:o,limit:20,type:d().Vz.BlocksInSpace,source:"verified_pages_settings",filters:T,options:{disable:!1}}),V=(0,s().K8)((()=>function(e){return e.map((e=>{const t=(0,P().i1)(e);if("none"===t.type)return;return{id:e.id,isClickable:!1,pageStore:e,verificationState:t}})).filter(p().O9)}(z.map((e=>e.store)))),[z]),D=(0,a().IS)((()=>({filterBar:{display:"flex",marginBottom:20}})),[]);return(0,Y.jsxs)(A().Ay,{children:[(0,Y.jsx)(b().A,{large:!0,divider:"full",children:(0,Y.jsx)(g().sA,{id:"verifiedPages.heading.title",defaultMessage:"Verified pages"})}),(0,Y.jsx)(I().nv,{mode:I().Ke.OnChange,query:o,setQueryFilter:l,placeholderText:M().A.formatMessage(I().Jj.titleOnlyPlaceholder),disabled:H}),!H&&_&&(0,Y.jsxs)("div",{style:D.filterBar,children:[(0,Y.jsx)(v().A,{mode:w().C.Pill,focused:!1,title:(0,Y.jsx)(g().sA,{id:"verifiedPagesSettings.searchFilter.owner",defaultMessage:"Owner"}),parentStore:_,userIds:u,onChange:f}),(0,Y.jsx)(m().E,{mode:w().C.Pill,focused:!1,title:(0,Y.jsx)(g().sA,{id:"verifiedPagesSettings.searchFilter.ancestor",defaultMessage:"In"}),parentStore:_,blockIds:S,onChange:y}),(0,Y.jsx)(j().S,{mode:w().C.Pill,focused:!1,title:(0,Y.jsx)(g().sA,{id:"verifiedPagesSettings.searchFilter.teamspace",defaultMessage:"Teamspace"}),parentStore:_,teamIds:x,onChange:h})]}),H?R?(0,Y.jsx)(ie,{}):(0,Y.jsx)(re,{}):(0,Y.jsx)(ne,{loading:B,verifiedPageRows:V??[],onLoadMore:U,filteredOwnerIds:u})]})}function ie(){return(0,Y.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,Y.jsx)(_().V,{icon:l().E,title:(0,Y.jsx)(g().sA,{defaultMessage:"Verify any page",id:"verificationpages.upgradeEmptyState.title"}),description:(0,Y.jsx)(g().sA,{id:"verifiedPageSettings.upgradeEmptyState.label",defaultMessage:"Get the Business plan to mark any page as verified"}),source:"verification_settings_centralized_view",upsell:{type:"product",product:"business",limit:{type:"none"},trialability:"preferred"}})})}function re(){const e=(0,n().v3)(),t=(0,H().O)(),i=(0,a().IS)((e=>({container:{display:"flex",marginTop:160,justifyContent:"center",alignItems:"center",flexDirection:"column",gap:16},text:{fontWeight:u().Wy.regular,textAlign:"center",fontSize:u().J.UIRegular.desktop,color:e.text.secondary}})),[]);return(0,Y.jsxs)("div",{style:i.container,children:[(0,Y.jsx)(h().I,{icon:l().E,size:36,color:"secondary"}),(0,Y.jsx)("span",{style:i.text,children:(0,Y.jsx)(g().sA,{id:"verifiedPageSettings.upgrade.label",defaultMessage:"Upgrade to business to see all verified pages."})}),t?(0,Y.jsx)(T().c,{openedFrom:"business_trial_verify_pages_upsell",styleOverrides:{paddingTop:6,paddingBottom:6}}):(0,Y.jsx)(S().A,{size:"lg",onClick:()=>{(0,R().K)(e,{from:"verification_settings_centralized_view",upsell:{type:"product",product:"business",limit:{type:"none"},trialability:"none"}})},iconLeading:o().arrowInCircleUpIcon,iconStyle:{height:20,width:20},children:(0,Y.jsx)(g().sA,{id:"verifiedPageSettings.upgrade.cta",defaultMessage:"Upgrade"})})]})}function ne(e){let{loading:t,verifiedPageRows:i,onLoadMore:n,filteredOwnerIds:s}=e;const o=function(e){const t=(0,a().IS)((e=>({pageStoreHeaderStyle:{boxShadow:`\n\t\t\t\t\tinset 0 1px 0 ${e.tableDividerColor},\n\t\t\t\t\tinset 0 -1px 0 ${e.tableDividerColor}\n\t\t\t\t`},pageStoreRowStyle:{boxShadow:void 0}})),[]);return(0,r.useMemo)((()=>({pageTitle:{id:"pageTitle",headerTitle:(0,Y.jsx)(g().sA,{id:"verifiedPagesSettings.tableHeader.pageName",defaultMessage:"Page name"}),renderCell:e=>(0,Y.jsx)(J,{pageStore:e.pageStore}),widthData:{width:100,maxWidth:400},sortable:!1,headerStyle:t.pageStoreHeaderStyle,rowStyle:t.pageStoreRowStyle},owner:{id:"owner",headerTitle:(0,Y.jsx)(g().sA,{id:"verifiedPagesSettings.tableHeader.owner",defaultMessage:"Owner"}),renderCell:t=>(0,Y.jsx)(q,{pageStore:t.pageStore,filteredOwnerIds:e}),widthData:{width:150,maxWidth:200},sortable:!1},verifiedUntil:{id:"verifiedUntil",headerTitle:(0,Y.jsx)(g().sA,{id:"verifiedPagesSettings.tableHeader.verifiedUntil",defaultMessage:"Verified until"}),renderCell:e=>(0,Y.jsx)(Z,{pageStore:e.pageStore,verificationState:e.verificationState}),widthData:{width:100,maxWidth:200},sortable:!1}})),[t,e])}(s),l=(0,p().uv)(o).map((e=>o[e])),d=(0,a().IS)((e=>(0,f().rC)({columnRenderInfo:l,theme:e,containerMarginTop:0})),[l]),c=(0,a().IS)((()=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(f().WE,{setStickyHeaderRow:!0,hideHeaderRowPadding:!0,showRowBorders:!0,allowHorizontalScroll:!0,maxHeight:500,columnRenderInfo:l,rows:i,loadMoreMethod:n?{type:"scroll",onLoadMore:n}:void 0,renderNoRowsComponent:()=>(0,Y.jsx)(y().A,{isSmall:!0,style:c.emptyQuery,children:!t&&0===i.length&&(0,Y.jsx)(g().sA,{id:"settings.verifiedPagesSettings.searchTable.empty",defaultMessage:"No verified pages to display."})}),styles:d}),t&&(0,Y.jsx)(x().A,{style:c.loadingSpinner})]})}},823541:(e,t,i)=>{i.d(t,{V:()=>l});i(296540);var r=()=>i(84817),n=()=>i(8980),s=()=>i(554509),a=()=>i(404520),o=i(474848);function l(e){const{icon:t,title:i,description:l,secondaryDescription:d,source:c,...g}=e;return(0,o.jsxs)(r().Y1,{align:"center",padding:"20px 0px",gap:6,width:340,children:[(0,o.jsx)(n().I,{icon:t,size:"xl",color:"tertiary"}),(0,o.jsxs)(r().Y1,{align:"center",gap:16,children:[(0,o.jsxs)(r().Y1,{align:"center",gap:2,children:[(0,o.jsx)(s().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:i}),(0,o.jsx)("span",{style:{textAlign:"center",textWrap:"balance"},children:(0,o.jsx)(s().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:l})}),d?(0,o.jsx)(s().D,{styleName:"UIRegular-14px/Regular",colorName:"tertiary",children:d}):null]}),(0,o.jsx)(a().R,{display:"button",width:"hug",source:c,...g})]})]})}}}]);