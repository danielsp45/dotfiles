"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[36908],{47218:(e,t,o)=>{o.r(t),o.d(t,{arrowExpandDiagonalBottomLeftToTopRightIcon:()=>n,iconDefinition:()=>r});o(296540);const r={viewBox:"0 0 20 20",fittedViewBox:"3.23 3.23 13.54 13.54",svg:(0,o(474848).jsx)("path",{d:"M11.14 4.485h3.491l-4.073 4.073a.625.625 0 0 0 .884.884l4.073-4.073v3.49a.625.625 0 1 0 1.25 0v-5a.625.625 0 0 0-.625-.624h-5a.625.625 0 1 0 0 1.25M4.485 14.631l4.07-4.07a.625.625 0 0 1 .884.884l-4.07 4.07h3.49a.625.625 0 1 1 0 1.25h-5a.625.625 0 0 1-.624-.625v-5a.625.625 0 1 1 1.25 0z"})},n=(0,o(340498).wt)("arrowExpandDiagonalBottomLeftToTopRight",r)},314660:(e,t,o)=>{o.d(t,{f:()=>n});var r=()=>o(246826);function n(e){const{collectionViewStore:t,update:o,transaction:n}=e;r().zv({store:t.getQueryStore(),data:o,transaction:n})}},315221:(e,t,o)=>{o.d(t,{D:()=>s});o(944114),o(581454);var r=()=>o(179034),n=()=>o(630116),i=()=>o(317001),a=()=>o(755673);function s(e){var t,o;const{environment:s,collectionContextStore:l,before:c,insertStores:m,store:d,groupsPointer:u,transaction:S}=e,p=l.collectionViewStore(),v=(null===(t=l.groupsStore.getGroupState(u))||void 0===t?void 0:t.resultsStore.state)||[],f=null===(o=l.groupsStore.getGroupState(u))||void 0===o?void 0:o.groupUiParentStore;if(!f)return[];const g=[];for(const a of m){const t=e.collectionStore??a.getAssociatedCollectionStore();t&&((0,i().j)({environment:s,store:a,collectionStore:t,collectionContextStore:l,groupsPointer:u,shouldCoerce:!0,transaction:S}),g.push(n().Bv.createChildStore(f,{table:r().ev,id:a.id})))}const y=v.indexOf(d),h=c?y:y+1,_=[...v.slice(0,h),...g,...v.slice(h)];return p&&(0,a().z)({resultIds:_.map((e=>e.id)),collectionViewStore:p,collectionContextStore:l,transaction:S}),l.groupsStore.setLimitIfGreater(u,_.length),g}},357643:(e,t,o)=>{function r(e){const{searchQuery:t,collectionContextStore:o}=e;o.collectionViewStore()&&(o.searchQueryStore.setState(t||""),o.groupsStore.resetAllLimits())}o.d(t,{S:()=>r})},424139:(e,t,o)=>{o.r(t),o.d(t,{emojiFaceIcon:()=>i,iconDefinition:()=>n});o(296540);var r=o(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M8.045 11.706a.625.625 0 0 0-1.036.698A3.6 3.6 0 0 0 10.005 14c1.245 0 2.35-.637 2.996-1.596a.625.625 0 0 0-1.036-.698 2.37 2.37 0 0 1-1.96 1.044 2.36 2.36 0 0 1-1.96-1.044m-.68-2.041c.49 0 .88-.46.88-1.02s-.39-1.02-.88-1.02-.88.46-.88 1.02.39 1.02.88 1.02m6.15-1.02c0 .56-.39 1.02-.88 1.02s-.88-.46-.88-1.02.39-1.02.88-1.02.88.46.88 1.02"}),(0,r.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},i=(0,o(340498).wt)("emojiFace",n)},536583:(e,t,o)=>{o.d(t,{d:()=>n});o(296540);const r={viewBox:"0 0 20 20",fittedViewBox:"2.88 2.32 14.24 15.36",svg:(0,o(474848).jsx)("path",{d:"M9.294 2.325h3.103c.484 0 .948.192 1.29.534l2.897 2.898c.343.342.535.806.535 1.29v5.903a1.825 1.825 0 0 1-1.825 1.825H12.53v1.075a1.825 1.825 0 0 1-1.825 1.825h-6A1.825 1.825 0 0 1 2.88 15.85v-8.8c0-1.008.817-1.825 1.825-1.825H7.47V4.15c0-1.008.817-1.825 1.825-1.825M9.1 5.76l2.897 2.897c.342.342.534.806.534 1.29v3.578h2.763a.575.575 0 0 0 .575-.575V7.3h-1.975a1.75 1.75 0 0 1-1.75-1.75V3.575h-2.85a.575.575 0 0 0-.575.575v1.318q.208.12.38.292m6.16.44-2.016-2.016V5.55c0 .359.29.65.65.65zm-10.554.275a.575.575 0 0 0-.575.575v8.8c0 .318.258.575.575.575h6a.575.575 0 0 0 .575-.575V10.2H9.306a1.75 1.75 0 0 1-1.75-1.75V6.475zm3.95.609V8.45c0 .359.291.65.65.65h1.366z"})},n=(0,o(340498).wt)("docOnDoc",r)},716728:(e,t,o)=>{o.d(t,{i:()=>n});var r=()=>o(899453);function n(e){const{environment:t,collectionContextStore:o,subitemPath:n,collectionStore:i,store:a,before:s,insertBlockStore:l,insertDirection:c,transaction:m}=e,d=o.currentSubitemFormatStoreForCollectionStore.state;if(!d)return;const u=i.getSchema()[d.property];if(!u||"relation"!==u.type)return;if("into"===c){var S;const e=n[n.length-1],o=e.value.store;return void r().j$({environment:t,sourceStore:o,destStore:l,position:s?{type:"before",before:null===(S=e.children[0])||void 0===S?void 0:S.value.store.id}:{type:"after"},propertyWithInverse:d,transaction:m})}const p=n[n.length-2];if(!p)return;const v=p.value.store;r().j$({environment:t,sourceStore:v,destStore:l,propertyWithInverse:d,position:s?{type:"before",before:a.id}:{type:"after",after:a.id},transaction:m})}},717989:(e,t,o)=>{o.d(t,{$N:()=>G,GB:()=>W,GZ:()=>X,L_:()=>N,MQ:()=>K,P7:()=>$,Pt:()=>Q,Tq:()=>Z,Xt:()=>E,bu:()=>q,cd:()=>J,dO:()=>ee,eW:()=>Y,k3:()=>U,n_:()=>F,sd:()=>H,v7:()=>O,vt:()=>j});o(944114),o(898992),o(672577),o(803949),o(581454),o(737550);var r=()=>o(244641),n=()=>o(908006),i=()=>o(584262),a=()=>o(66689),s=()=>o(636090),l=()=>o(604995),c=()=>o(416504),m=()=>o(763884),d=()=>o(496603),u=()=>o(534177),S=()=>o(299709),p=()=>o(612008),v=()=>o(315221),f=()=>o(843306),g=()=>o(878060),y=()=>o(686526),h=()=>o(896628),_=()=>o(246826),C=()=>o(899453),b=()=>o(857783),w=()=>o(281948),x=()=>o(778417),P=()=>o(319975),V=()=>o(725614),T=()=>o(751156),D=()=>o(357643),R=()=>o(519839),I=()=>o(476492),B=()=>o(227440),k=()=>o(630116),A=()=>o(502438),z=()=>o(611371),M=()=>o(690471),L=()=>o(839106);function F(e){const{collectionViewStore:t,collectionContextStore:o,timelineState:r,environment:n}=e,i=n.currentUser.id,a=(0,M().UA)(t.id),s=(0,M().yG)(t,n),l=o.permissionScopesStore.state,c=d().sg((()=>{if(r.destroyed)return;const e={zoomLevel:r.zoomLevelStore.state,centerTimestamp:(0,M().o$)(r)};m().K.set({userId:i,key:a,value:e})}),1e3),u=d().sg((()=>{if(r.destroyed||!B().A.state.online||!n.currentUser.isLoggedIn()||!l.canConfigureBlock)return;const e={zoomLevel:r.zoomLevelStore.state,centerTimestamp:(0,M().o$)(r)},o=t.getFormat().timeline_preference;d().n4(o,e)||T().createAndCommit({userAction:"collectionTimelineViewActions.setRemotePreference",environment:n,canUndo:!0,perform:o=>{h().zA({stores:[t],update:{timeline_preference:e},transaction:o})}})}),5e3);r.savePreference=()=>{c(),u()},U({timelineState:r,environment:n,...s})}function U(e){const{timelineState:t,zoomLevel:o,centerTimestamp:r,environment:i}=e;t.zoomLevelStore.setState(o);const a=i.WindowSizeStore.state.width+2*M().E6,s=(0,M().C1)(o,a),l=r-s/2,c=r+s/2;t.currentRangeStore.setState({startTimestamp:l,endTimestamp:c});const{savePreference:m}=t;n().default.afterNextFlush((()=>{q({timelineState:t,centerTimestamp:r}),m&&m()}))}function q(e){const{timelineState:t,centerTimestamp:o}=e,{horizontalScroller:r,outerSizeObserver:n}=t;if(!r)return;const i=t.zoomLevelStore.state,{startTimestamp:a,endTimestamp:s}=t.currentRangeStore.state,l=n.rect.state.width;if(l===(0,M().w0)(i,s-a))return;const c=(0,M().w0)(i,o-a)-l/2;r.scrollLeft=c,t.scrollLeftStore.setState(c)}function E(e){const{environment:t,store:o,query:r,date:n,schema:i,transaction:a}=e,{timeline_by:s}=r;if(!s)return;const l=o.getAssociatedCollectionStore(),c=(null==l?void 0:l.getMappedProperty(s))??s,m=r.timeline_by_end?(null==l?void 0:l.getMappedProperty(r.timeline_by_end))??r.timeline_by_end:void 0,d=(0,M().u9)({store:o,dateValue:n,query:r,schema:(null==l?void 0:l.getSchema())??i}),u=o.getPropertyValue(c),S=m?o.getPropertyValue(m):void 0;return _().zv({store:o.getPropertiesStore(),data:d,transaction:a}),g().O({environment:t,store:o,dateProperty:{id:c,newValue:(null==d?void 0:d[c])??[],oldValue:u},otherDateProperty:m?{id:m,newValue:(null==d?void 0:d[m])??[],oldValue:S}:void 0}),o}function G(e){var t;const{environment:o,timelineState:n,collectionStore:i,collectionContextStore:a,store:s,query:m,groupFormat:d,transaction:u}=e,S=n.zoomLevelStore.state,p=(0,M().o$)(n),{snapUnit:f,getDateRangePlaceholderDuration:g}=M().eM[S],{timeline_by:y}=m;if(!y)return;const h=null===(t=a.groupsStore.getGroupState(d))||void 0===t?void 0:t.resultsStore.state;if(!h)return;const _=r().c9.fromMillis(p),C=(0,M().DY)(_,f),b=(0,M().DY)(g(_),f),w=(0,M().oJ)({startValue:(0,l().Ec)((0,c().P)()),snapUnit:f,desiredStart:C,desiredEnd:b});return E({environment:o,store:s,query:m,schema:i.getSchema(),date:w,transaction:u}),(0,v().D)({environment:o,collectionStore:i,before:!0,store:h[0],insertStores:[s],collectionContextStore:a,groupsPointer:d?[d]:[],transaction:u}),s}function O(e){const{type:t,timelineState:o,store:r,startX:n,query:i,schema:a,intl:s,environment:l,formulasModule:c}=e,{horizontalScroller:m}=o,{startTimestamp:u}=o.currentRangeStore.state;if(!m)return;x().Lt({environment:l,store:r});const S=m.scrollLeft,{stores:p}=A().default.state,v=d().oE(p.map((e=>{const t=(0,M().GM)({store:e,query:i,schema:a,userId:l.currentUser.id,intl:s,formulasModule:c});if(t)return{startValue:t,store:e}})));o.dragStateStore.setState({type:t,startStore:r,stores:v.map((e=>{let{store:t}=e;return t})),startValues:v.map((e=>{let{startValue:t}=e;return t})),temporaryValues:v.map((e=>{let{startValue:t}=e;return t})),startX:n,startStartTimestamp:u,startScrollLeft:S})}function j(e){const{timelineState:t,store:o,startX:r,startY:n,schema:i,collectionContextStore:a,verticalScroller:s}=e,{horizontalScroller:l}=t,{startTimestamp:c}=t.currentRangeStore.state;if(!l||!s)return;const m=l.scrollLeft,d=s.scrollTop,u=(0,M().GW)(a,o,i);t.drawStateStore.setState({startStore:o,startDependencyRelationPointers:u,temporaryDependencyRelationPointers:[...u],startX:r,startY:n,startScrollLeft:m,startScrollTop:d,startStartTimestamp:c,xOffsetPx:0,yOffsetPx:0,tryToCompleteDrawnArrow:!1})}function W(e){const{timelineState:t,currentX:o}=e,{horizontalScroller:r}=t,n=t.zoomLevelStore.state,i=t.dragStateStore.state,{startTimestamp:a}=t.currentRangeStore.state;if(!i||!r)return;const{type:s,startStartTimestamp:c,startValues:m,startScrollLeft:S,startX:p,startStore:v,stores:f}=i,g=M().eM[n],{snapUnit:y}=g,h=r.scrollLeft-S+(o-p)+(0,M().w0)(n,a-c),_=(0,M().C1)(n,h),C=m[f.indexOf(v)];let b;if(s===M().MB.LeftResizer){const{start:e}=(0,M().yl)(C,y),t=e.plus(_);b=m.map((e=>{const o=(0,M().oJ)({startValue:e,snapUnit:y,desiredStart:t});return(0,l().u7)(o)}))}else if(s===M().MB.RightResizer){const{end:e}=(0,M().yl)(C,y),t=e.plus(_);b=m.map((e=>{const o=(0,M().oJ)({startValue:e,snapUnit:y,desiredEnd:t});return(0,l().rL)(o)}))}else s===M().MB.ItemDrag?b=m.map((e=>{const{start:t,end:o}=(0,M().yl)(e,y),r=t.plus(_),n=r.plus(o.valueOf()-t.valueOf());return(0,M().oJ)({startValue:e,snapUnit:y,desiredStart:r,desiredEnd:n})})):(0,u().HB)(s);d().n4(i.temporaryValues,b)||t.dragStateStore.setState({...i,temporaryValues:b})}function X(e){const{timelineState:t,currentX:o,currentY:r,verticalScroller:n}=e,i=t.drawStateStore.state,a=t.zoomLevelStore.state,{startTimestamp:s}=t.currentRangeStore.state,{horizontalScroller:l}=t;if(!i||!l||!n)return;const{startDependencyRelationPointers:c,startStore:m,startX:u,startY:S,startScrollLeft:p,startScrollTop:v,startStartTimestamp:f}=i,g=l.scrollLeft,y=n.scrollTop,h=g-p+(o-u)+(0,M().w0)(a,s-f),_=y-v+(r-S),C=t.hoveredItemStore.state;if(C&&C!==m&&!c.some((e=>e.id===C.id))){const e=[...c,{table:"block",id:C.id,spaceId:C.getSpaceId()}];d().n4(i.temporaryDependencyRelationPointers,e)||t.drawStateStore.setState({...i,temporaryDependencyRelationPointers:e,xOffsetPx:void 0,yOffsetPx:void 0})}else t.drawStateStore.setState({...i,temporaryDependencyRelationPointers:[...c],xOffsetPx:h,yOffsetPx:_})}function Y(e){const{environment:t,collectionContextStore:o,timelineState:r,query:n,schema:i,transaction:a}=e,s=r.dragStateStore.state,{timeline_by:l}=n;if(!s||!l)return;const{temporaryValues:c,stores:m}=s;c.forEach(((e,r)=>{const s=m[r];E({environment:t,store:s,query:n,schema:i,transaction:a,date:e}),(0,S().E)({environment:t,collectionContextStore:o,block_id:s.id,property:l,property_type:"date",from:"timeline"})})),r.dragStateStore.setState(void 0)}function H(e){var t;const{timelineState:o,environment:r,transaction:n,collectionContextStore:i,isFullScreen:a,isRootChild:s}=e,l=o.drawStateStore.state,c=o.dateRangePlaceholderStore.state;if(!l)return;const{startStore:m,startDependencyRelationPointers:d,temporaryDependencyRelationPointers:u}=l;if(!m)return void o.drawStateStore.setState(void 0);let p;if(c.active){const{date:e,store:t,parentStore:a,groupFormat:s,newTimelineItemProps:l,existingTimelineItemProps:d}=c;if(t&&d){const{query:o,schema:i}=d;E({environment:r,store:t,query:o,schema:i,date:e,transaction:n}),p={table:"block",id:t.id,spaceId:m.getSpaceId()}}else if(l){const{query:o,schema:c,isFullScreen:d,canEditTimelineItems:u,subitemPath:S}=l,v=ee({environment:r,date:e,store:t,parentStore:a,query:o,schema:c,isFullScreen:d,groupFormat:s,canEditTimelineItems:u,collectionContextStore:i,subitemPath:S,transaction:n,from:"timeline_complete_draw"});v&&(p={table:"block",id:v.id,spaceId:m.getSpaceId()})}o.dateRangePlaceholderStore.setState({active:!1})}else p=u.find((e=>!d.includes(e)));const v=(0,M().VC)(i);if(v){const{property:e}=v;p&&(C().j$({environment:r,propertyWithInverse:v,sourceStore:m,destStore:k().Bv.createChildStore(m,p),position:{type:"after"},transaction:n}),(0,S().E)({environment:r,collectionContextStore:i,block_id:m.id,property:e,property_type:"relation",from:"timeline",isFromBulkActionsToolbar:!1,isUnthrottled:!0})),o.drawStateStore.setState(void 0)}else y().R8({item:{type:"dependencies",from:"view_options"},collectionSettingsStore:i.settingsStore}),o.drawStateStore.setState({...l,tryToCompleteDrawnArrow:!0});const f=null===(t=p)||void 0===t?void 0:t.id;f&&(0,L().xY)(r,{...(0,I().sl)(i),...(0,L().ZR)({environment:r,collectionContextStore:i,timelineState:o,isFullScreen:a,isRootChild:s}),dependenciesPropertyID:null==v?void 0:v.property,blockedByStoreID:m.id,blockingStoreID:f})}function Q(e){const{timelineState:t,environment:o}=e;t.dragStateStore.state&&(t.dragStateStore.setState(void 0),x().IU({environment:o}))}function $(e){const{timelineState:t,environment:o}=e;t.drawStateStore.state&&(t.drawStateStore.setState(void 0),x().IU({environment:o}))}function K(e){const{stores:t,collectionViewStore:o,schema:r,transaction:n}=e,i=o.getType(),a=o.getQuery(r),s=[];a&&("calendar"===i?a.calendar_by&&s.push(a.calendar_by):"timeline"===i&&(a.timeline_by&&s.push(a.timeline_by),a.timeline_by_end&&s.push(a.timeline_by_end)));for(const l of t)for(const e of s)P().R9({environment:l.environment,store:l.getPropertyStore(e),value:void 0,transaction:n})}function J(e){const{dependency:t,collectionContextStore:o,environment:r,timelineState:n,isFullScreen:i,isRootChild:a}=e,s=(0,M().VC)(o),l=o.collectionStore();if(!s||!l)return;const{property:c}=s,{store:m,relationPointer:d}=t,u=m.getSchema()[c];u&&"relation"===u.type&&(T().createAndCommit({userAction:"CollectionTimelineDependenciesOverlay.handleRemoveRelation",environment:r,canUndo:!0,perform:e=>{C().c3({environment:r,propertyWithInverse:s,sourceStore:m,destStore:k().Bv.createChildStore(m,d),transaction:e}),(0,S().E)({environment:r,block_id:d.id,property:c,property_type:u.type,from:"timeline",collectionContextStore:o,isFromBulkActionsToolbar:!1,isUnthrottled:!0})}}),(0,L().m2)(r,{...(0,I().sl)(o),...(0,L().ZR)({environment:r,collectionContextStore:o,timelineState:n,isFullScreen:i,isRootChild:a}),dependenciesPropertyID:c,blockedByStoreID:m.id,blockingStoreID:d.id}))}function Z(e){const{collectionViewStore:t,newProperty:o,transaction:r}=e;h().zA({stores:[t],update:{timeline_arrows_by:{property:o}},transaction:r})}function N(e){var t;const{collectionContextStore:o,relationPropertyId:r,transaction:n}=e,i=o.collectionStore();if(!i)return;const l=r?i.getSchema()[r]:void 0,c="relation"===(null==l?void 0:l.type)&&l.property&&"relation"===(null===(t=i.getSchema()[l.property])||void 0===t?void 0:t.type)?l.property:void 0;h().zA({stores:[i],update:{collection_default_arrows_by:r,...i.getFormat().app_config_uri===s().dC?{app_uri_map:{...i.getFormat().app_uri_map?i.getFormat().app_uri_map:{},[a().yx.BlockingRelation]:r,[a().yx.BlockedRelation]:c}}:{}},transaction:n})}function ee(e){const{environment:t,transaction:o,date:r,parentStore:n,query:a,schema:s,isFullScreen:l,groupFormat:c,canEditTimelineItems:m,collectionContextStore:d,from:u}=e;if(!(0,z().EF)(t))return;const S=c?[c]:[],v=d.groupsStore.getGroupState(S);if(!v)return;if(n)return function(e){const{environment:t,transaction:o,date:r,store:n,parentStore:a,query:s,schema:l,groupFormat:c,canEditTimelineItems:m,collectionContextStore:d,subitemPath:u}=e;if(!n||!a)return;const S=c?[c]:[],p=(0,f().u)({environment:t,collectionContextStore:d,groupsPointer:S,store:n,before:!1,collectionStore:a,transaction:o,subitemPath:u,subitemInsertDirection:"into"});if(p){if(E({environment:t,store:p,query:s,schema:l,date:r,transaction:o}),t.device.isMobile)b().uK({environment:t,store:p,pageVisitSource:i().y8.Create});else if(p&&m){const e=p.getBlockTitleStore();V().setSelectionAtStart({store:e})}return p}}(e);d.searchQueryStore.state&&(0,D().S)({searchQuery:"",collectionContextStore:d,isFullScreen:l});const g=(0,p().Q)({environment:t,collectionContextStore:d,groupsPointer:S,shouldCoerce:!0,templateStore:d.defaultPageTemplateStore.state,transaction:o,from:{createBlock:u},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache});if(!g)return;const y=g.coercionSucceeded,h=g.newStore;if(E({environment:t,store:h,query:a,schema:s,date:r,transaction:o}),t.device.isMobile)b().uK({environment:t,store:h,pageVisitSource:i().y8.Create});else if(y&&m){const e=h.getBlockTitleStore();V().setSelectionAtEnd({store:e})}else w().VU({environment:t,store:h,peekMode:(0,R().hH)(d),resultsStore:null==v?void 0:v.resultsStore,collectionContextStore:d,pageVisitSource:i().y8.Create});return h}},839106:(e,t,o)=>{o.d(t,{AP:()=>l,VD:()=>m,ZR:()=>v,gp:()=>u,i6:()=>c,iH:()=>a,iT:()=>d,m2:()=>p,xY:()=>S,z2:()=>s});o(898992),o(354520);var r=()=>o(679924),n=()=>o(999202),i=()=>o(690471);function a(e,t){(0,n().W)(e,"timeline_view","timeline_view",5,t)}function s(e,t){(0,r().v)(e,"timeline_zoom_level_update",t)}function l(e,t){(0,r().v)(e,"timeline_today_click",t)}function c(e,t){(0,r().v)(e,"timeline_shift_time_click",t)}function m(e,t){(0,r().v)(e,"timeline_toggle_table_click",t)}function d(e,t){(0,r().v)(e,"timeline_item_scroll_arrow_click",t)}function u(e,t){(0,r().v)(e,"timeline_item_resize",t)}function S(e,t){(0,r().v)(e,"timeline_dependency_arrow_add",t)}function p(e,t){(0,r().v)(e,"timeline_dependency_arrow_delete",t)}function v(e){const{environment:t,collectionContextStore:o,timelineState:r,isFullScreen:n,isRootChild:a}=e,s=r.zoomLevelStore.state,l=o.normalizedFormatStore.state,c=(0,i().iw)({environment:t,format:l,isFullScreen:n,isRootChild:a}),m=c&&l.timeline_table_properties?l.timeline_table_properties.length:0,d=l.timeline_properties||[],u=d.filter((e=>"title"!==e.property));return{zoom_level:s,show_table:c,show_table_properties_count:m,show_timeline_title:d.length!==u.length,show_timeline_properties_count:u.length}}},843306:(e,t,o)=>{o.d(t,{u:()=>y});o(581454);var r=()=>o(584262),n=()=>o(700500),i=()=>o(179034),a=()=>o(519839),s=()=>o(476492),l=()=>o(630116),c=()=>o(970330),m=()=>o(557281),d=()=>o(246826),u=()=>o(281948),S=()=>o(778417),p=()=>o(317001),v=()=>o(716728),f=()=>o(976405),g=()=>o(755673);function y(e){const{environment:t,collectionContextStore:o,before:y,store:h,groupsPointer:_,collectionStore:C,transaction:b,subitemPath:w,subitemInsertDirection:x,from:P}=e,V=o.collectionViewStore();if(!V)return;const T=o.groupsStore.getGroupState(_),D=null==T?void 0:T.groupUiParentStore,R=(null==T?void 0:T.resultsStore.state)||[];if(!D)return;const I=d().Wv({environment:t,type:n().xd.page,inMemoryRecordCache:h.inMemoryRecordCache,transaction:b,spaceId:V.pointer.spaceId});if(P){const e="collectionTypedView"===o.contextType?I.getAssociatedCollectionId():void 0;c().v(t,{from:P,type:"page",new_page_id:I.id,creating_block_id:I.id,...s().sl(o,e)})}const B=(0,p().j)({environment:t,store:I,collectionStore:C,collectionContextStore:o,groupsPointer:_,shouldCoerce:!0,transaction:b}),k=o.defaultPageTemplateStore.state;k&&m().n5({title:"template",environment:t,store:I,templateStore:k,isKeyboard:!1,isCreateIn:!1,transaction:b,from:"collection_group_actions"});const A=l().Bv.createChildStore(D,{table:i().ev,id:I.id});w&&w.length>0&&(0,v().i)({environment:t,collectionContextStore:o,subitemPath:w,collectionStore:C,store:h,before:!1,insertBlockStore:A,insertDirection:x,transaction:b});const z=R.indexOf(h),M=y?z:z+1,L=[...R.slice(0,M),A,...R.slice(M)];if((0,g().z)({resultIds:L.map((e=>e.id)),collectionViewStore:V,collectionContextStore:o,transaction:b}),B){if(w){var F;const e="into"===x?h:null===(F=w[w.length-2])||void 0===F?void 0:F.value.store;return e?l().Bv.createChildStore(e,A.pointer):A}return S().Lt({environment:t,store:A}),(0,f().f)({environment:t,collectionContextStore:o}),A}u().VU({environment:t,store:A,peekMode:a().hH(o),resultsStore:null==T?void 0:T.resultsStore,collectionContextStore:o,pageVisitSource:r().y8.Create})}},878781:(e,t,o)=>{o.d(t,{D:()=>r});const r=(0,o(959013).YK)({removeSortingConfirmation:{id:"databaseActions.removeSortingConfirmationDialog.prompt",defaultMessage:"Would you like to remove sorting?"},removeSortingButton:{id:"databaseActions.removeSortingConfirmationDialog.removeSortingButton.label",defaultMessage:"Remove"},removeSortingCancel:{id:"databaseActions.removeSortingConfirmationDialog.cancelRemoveSortingButton.label",defaultMessage:"Don’t remove"},removeGroupSortingConfirmation:{id:"databaseActions.remoteGroupSortingConfirmationDialog.prompt",defaultMessage:"Would you like to remove {sortType} group sorting?"},removeGroupSortingButton:{id:"databaseActions.removeGroupSortingConfirmationDialog.removeButton.label",defaultMessage:"Remove"},removeGroupSortingCancel:{id:"databaseActions.removeGroupSortingConfirmationDialog.cancelButton.label",defaultMessage:"Don’t remove"}})},976405:(e,t,o)=>{o.d(t,{f:()=>m});var r=()=>o(314660),n=()=>o(873050),i=()=>o(852353),a=()=>o(972435),s=()=>o(901389),l=()=>o(751156),c=()=>o(878781);function m(e){const{environment:t,collectionContextStore:o}=e,m=o.collectionViewBlockStore(),d=o.collectionViewStore();if(!d||!m)return!1;const u=o.currentViewHasSort(),S=(0,n().gv)(o),p=u||S,v=d.getType(),f=o.permissionScopesStore.state;return!!(p&&v&&i().gP[v]&&f.canConfigureBlock)&&(s().ui({message:a().A.formatMessage(c().D.removeSortingConfirmation),items:[{label:a().A.formatMessage(c().D.removeSortingButton),color:"red",onAccept:()=>{l().createAndCommit({userAction:"collectionGroupActions.offerToRemoveSort",environment:t,canUndo:!0,perform:e=>{(0,r().f)({collectionViewStore:d,update:{sort:[]},transaction:e})}});const e=o.temporaryStateStore.state;o.temporaryStateStore.setState({...e,sorts:void 0})}},{label:a().A.formatMessage(c().D.removeSortingCancel),onAccept:()=>{}}],showCancel:!1,keepFocus:!0}),!0)}}}]);