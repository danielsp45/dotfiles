"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[97134],{178788:(e,t,o)=>{o.d(t,{A:()=>u});var i=o(296540),n=()=>o(56366),r=()=>o(401497),l=()=>o(919709),s=()=>o(116008),a=()=>o(921855),d=()=>o(735372),c=o(474848);const u=i.memo((function(e){const{parentStore:t,withComma:u,linkifyUrls:p,disableCommentHighlight:g,disableLinks:x,shouldTruncate:h,clampLines:f,textValue:m}=e,y=(0,o(484714).v3)(),v=(0,r().DP)(),b=(0,o(712030).Ol)();(0,i.useEffect)((()=>{void 0!==m&&y.KatexStore.loadIfNeeded((()=>m))}),[y.KatexStore,m]);const{collectionContextStore:S,property:k}=(0,i.useContext)(o(234359).L8),{collectionViewBlockId:I,collectionViewId:w}=(0,n().K8)((()=>{var e,t;return{collectionViewId:null==S||null===(e=S.collectionViewStore())||void 0===e?void 0:e.id,collectionViewBlockId:null==S||null===(t=S.collectionViewBlockStore())||void 0===t?void 0:t.id}}),[S]),A=(0,n().K8)((()=>y.KatexStore.getKatex()),[y.KatexStore]),C=(0,n().K8)((()=>{const e=d().qu.state,o=d().wb.state;return e&&k&&m?a().nu({textValue:m,blockId:t.id,textProps:{type:"page_property_value_match",collectionViewBlockId:I,collectionViewId:w,propertyId:k},find:e,currentFocusedResult:o}):m}),[k,m,t.id,I,w]),K=(0,n().K8)((()=>{if(s().A.getPropertyId()!==k||s().A.getBlockStore()!==t)return C;const e=s().A.getMultiSelection();return e?l().Mwp({textValue:C,selection:{startIndex:e.start.index,endIndex:e.end.index},annotation:[l().Ifu.TemporaryComment]}):m?l().Mwp({textValue:C,selection:{startIndex:0,endIndex:l().qAZ(m).length},annotation:[l().Ifu.TemporaryComment]}):C}),[t,k,m,C]),j=(0,n().K8)((()=>void 0===K?null:a().S5({environment:y,textValue:K&&{value:K,spaceId:(0,o(161479).e)(t.pointer.spaceId)},parentStore:t,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableCommentAnnotations:g??!1,disabled:!0,theme:v,disableLinks:x??!1,emojiType:b,katex:A,formulaValueTypes:[],stopLinkPropagation:!0,linkTargetBlank:!0})),[K,y,t,g,v,x,b,A]),P=(0,i.useMemo)((()=>{if(!p||void 0===m)return null;const e=(0,l().k4p)(m);return(0,o(735577).A)(e)?(0,o(713998).MO)(m):null}),[p,m]),T=(0,r().IS)((e=>({text:{...h&&!f?o(284371).RC:void 0,...h&&f?{...(0,o(115512).pA)(f),overflow:"hidden",textOverflow:"ellipsis"}:{}}})),[h,f]);return(0,c.jsxs)("span",{style:T.text,children:[P?(0,c.jsx)(o(187485).A,{href:P,style:{display:"inline",pointerEvents:"auto",...(0,o(458366).w_)(v)},external:!0,onClick:e=>e.stopPropagation(),children:j}):j,u?", ":null]})}))},362976:(e,t,o)=>{function i(e){const t=e.getSchema();if(t)for(const[i,n]of Object.entries(t)){var o;if(n&&"text"===n.type&&"summarize"===(null===(o=n.ai_inference)||void 0===o?void 0:o.type)){const t=e.getPropertyValue(i);if(t)return t}}}o.d(t,{E:()=>i})},932199:(e,t,o)=>{o.r(t),o.d(t,{PagePreview:()=>W});var i=o.n(o(32485)),n=(o(296540),()=>o(484714)),r=()=>o(792485),l=()=>o(56366),s=()=>o(401497),a=()=>o(584262),d=()=>o(984651),c=()=>o(919709),u=()=>o(191772),p=()=>o(959013),g=()=>o(284371),x=()=>o(246826),h=()=>o(751156),f=()=>o(492414),m=()=>o(108944),y=()=>o(731320),v=()=>o(115512),b=()=>o(891078),S=()=>o(963589),k=()=>o(540758),I=()=>o(962730),w=()=>o(765957),A=()=>o(227440),C=()=>o(735372),K=()=>o(712505),j=()=>o(630116),P=()=>o(296798),T=()=>o(187820),B=()=>o(128295),V=()=>o(16006),R=()=>o(859428),D=()=>o(21140),L=()=>o(544862),_=()=>o(362976),E=()=>o(178788),O=o(474848);const M=20;function z(e){const{store:t}=e,o=(0,s().IS)((e=>({summary:{fontSize:13,fontWeight:g().Wy.regular,lineHeight:"17px",...(0,v().pA)(3)}})),[]),i=(0,l().K8)((()=>_().E(t)),[t]);return i&&c().FAw(i)>=M?(0,O.jsx)("div",{children:(0,O.jsx)("div",{style:o.summary,children:(0,O.jsx)(E().A,{textValue:i,parentStore:t})})}):null}function W(e){const{store:t,onClick:o}=e,r=(0,s().DP)(),x=(0,p().tz)(),{WindowSizeStore:h}=(0,n().v3)(),y=(0,S().X)("enable_deleted_page_indicator"),I=(0,l().K8)((()=>t.getCover()),[t]),T=(0,l().K8)((()=>t.inMemoryRecordCache.isTemporaryData),[t]),R=(0,l().K8)((()=>{const e=m().ze(t);return y&&e}),[y,t]),_=(0,l().K8)((()=>{const e=C().qu.state;if(!e)return!1;return(0,c().q4_)(t.getTitleValue()).toLowerCase().includes(e.toLowerCase())}),[t]),E=(0,l().K8)((()=>{const e=C().wb.state;return!!e&&("block"===e.type&&e.id===t.id)}),[t.id]),M=(0,b().i0)(t)&&!T,W=(0,n().Y0)(),H=(0,s().IS)((e=>({blockBackground:{background:"light"===e.mode?void 0:e.cardBackground},title:{fontWeight:g().Wy.medium,fontSize:W.isMobile?g().J.UIRegular.mobile:g().J.UIRegular.desktop,lineHeight:1.3,...R&&{color:e.text.secondary},...(0,v().pA)(2)},cover:{display:"flex",alignItems:"flex-start",flexDirection:"column",borderRadius:"var(--radius-medium, 8px)",border:`1px solid ${e.darkDividerColor}`},coverContainer:{height:62,alignSelf:"stretch",borderTopLeftRadius:7,borderTopRightRadius:7,overflow:"hidden"},breadcrumb:{color:e.text.secondary,fontSize:11,marginBottom:-2,...g().RC},content:{display:"flex",padding:"0px 16px 12px 16px",flexDirection:"column",alignItems:"flex-start"}})),[R,W]),F=(0,l().K8)((()=>(0,f().J8)({store:t,fullyQualified:!1,pageVisitSource:a().y8.LinkInPage})),[t]),J=(0,l().K8)((()=>(0,f().J8)({store:e.store,openInSidePeek:!0,fullyQualified:!1,pageVisitSource:a().y8.PeekOpen})),[e.store]),N=(0,l().K8)((()=>K().default.isSidePeekOpen()),[]),U=(0,l().K8)((()=>h.state.width),[h]),{currentBlockStore:Q}=(0,l().K8)((()=>{const e=w().default.state.currentSpaceStore;if(!e)return{currentBlockStore:void 0};const o=j().Bv.createChildStore(e,{id:t.id,table:"block"});if(o.isNavigableBlock()){return{currentBlockStore:o.getNavigableBlockStore()}}return o.isDefined()?{currentStore:o}:{currentBlockStore:void 0}}),[t]),{content:Y}=(0,l().K8)((()=>{if(!Q)return{content:null};return{content:Q.isEmptyPage()?void 0:(0,O.jsx)(z,{store:Q})}}),[Q]),$=(0,l().K8)((()=>(0,B().a6)(t)),[t]),G=!(0,l().O$)(A().e),X=(0,l().K8)((()=>{const e=(0,k().Bd)(t.id);return G&&!e}),[G,t.id]);return(0,O.jsx)(P().A,{href:F,altHref:J,forceAltHref:N,external:!1,onClick:o,style:{borderRadius:8,...e.style,...H.blockBackground},disableForOffline:X,disabledFeedback:!0,children:(0,O.jsxs)("div",{style:H.cover,children:[I&&(0,O.jsx)("div",{style:H.coverContainer,children:(0,O.jsx)(L().A,{store:t,disabled:!0,paddingLeft:0,paddingRight:0,height:62,proxyWidth:U})}),(0,O.jsxs)("div",{style:{display:"flex",flexDirection:I||$?"column":"row",alignItems:I||$?void 0:"center",width:"100%",paddingTop:I?0:10},children:[(0,O.jsxs)("div",{style:{flexDirection:"row",paddingTop:4},children:[(0,O.jsx)(q,{store:e.store,disabled:!0,isAlias:e.isAlias,showDeletedPageIndicator:R,cover:!!I}),(0,O.jsx)(d().A,{theme:r,intl:x,isPageInTrash:M})]}),(0,O.jsxs)(D().wt,{gap:Y?4:0,style:H.content,children:[(0,O.jsxs)(D().wt,{gap:2,style:{width:"100%",...(0,v().pA)(2)},children:[(0,O.jsx)(B().Ay,{store:t,innerStyle:H.breadcrumb}),(0,O.jsx)("div",{style:{overflow:"auto",..._&&(0,u().G3)({theme:r,isSelectedMatch:E})},className:i()(E&&u().wT),children:(0,O.jsx)(V().A,{shouldWrap:!0,maxLines:2,store:t,style:H.title})})]}),Y]})]})]})})}function H(e){let{store:t,disabled:o}=e;const i=(0,r().S)(),s=(0,n().v3)(),{icon:a,role:d,isEmptyPage:c,type:u}=(0,l().K8)((()=>({icon:t.getIcon(),role:t.getRole(),isEmptyPage:t.isEmptyPage(),type:t.getType()})),[t]),g=(0,l().K8)((()=>(0,T().Te)(t)),[t]),f=(0,l().K8)((()=>function(e,t,o){const i=o&&o.publicEditModeStore.state;return!(0,y().QT)(i)&&e.canEdit()&&!t}(t,o,i)),[o,i,t]);return(0,O.jsx)(R().A,{renderTooltip:()=>(0,O.jsx)(p().sA,{defaultMessage:"Change icon",id:"page.changeIcon.tooltip"}),placement:I().W.Top,disableTooltip:o||!f,render:e=>o||!f?(0,O.jsx)(T().B6,{disabled:!0,icon:a,iconRecordCategory:g,isEmptyPage:c,role:d,size:28,style:{width:"100%",height:"100%"},...e,largeIcon:!0}):(0,O.jsx)(T().B6,{disabled:!1,bucket:"secure",store:t,icon:a,iconRecordCategory:g,role:d,isEmptyPage:c,size:28,style:{width:"100%",height:"100%"},iconLoggingData:{recordTable:t.table,source:"subpage",block_type:u},onChange:e=>function(e,t,o){const i=t.getIconStore();i&&h().createAndCommit({userAction:"Page.handleRecordIconChange",environment:o,canUndo:!0,perform:t=>{x().KY({store:i,value:e,transaction:t})}})}(e,t,s),...e,largeIcon:!0})})}function q(e){let{showDeletedPageIndicator:t,store:o,disabled:i,isAlias:r,cover:l}=e;const a=(0,s().DP)(),d=(0,n().v3)();if(t){const e=d.device.isSafari||d.device.isIOS;return(0,u()._e)({isSafariOrIOS:e,theme:a})}return(0,O.jsx)("div",{style:{position:"relative",width:24,height:24,marginRight:4,marginLeft:16,marginTop:l?-15:4,marginBottom:8},children:(0,O.jsx)(H,{store:o,disabled:i})})}}}]);