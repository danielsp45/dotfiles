"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[61227],{397005:(e,t,n)=>{n.r(t),n.d(t,{BeamActivity:()=>I});var i=n(296540),o=()=>n(484714),a=()=>n(56366),r=()=>n(401497),s=()=>n(883626),c=()=>n(556927),l=()=>n(558687),d=()=>n(435009),u=()=>n(751156),h=()=>n(755199),m=()=>n(460292),g=()=>n(765957),f=()=>n(807778),p=(n(581454),()=>n(84817)),x=()=>n(554509),b=n(474848);function v(e){const{leftIcon:t,title:n,message:o,actions:a,duration:s}=e,[c,l]=i.useState(!0),d=(0,r().IS)((e=>({container:{width:"auto",height:"auto",display:"inline-flex",position:"fixed",left:"50%",transform:"translateX(-50%)",top:16,zIndex:100,borderRadius:24,boxShadow:e.shadowXS,background:e.surface.elevated,alignItems:"center"},iconContainer:{display:"flex",alignItems:"center"},action:{display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:8,borderRadius:12,boxShadow:e.shadowXS,background:e.tint.regular,backdropFilter:"blur(16px)",cursor:"pointer"}})),[]);return i.useEffect((()=>{if(!s)return;const e=setTimeout((()=>{l(!1)}),s);return()=>clearTimeout(e)}),[s]),c?(0,b.jsxs)(p().Y1,{direction:"horizontal",padding:"4px 8px",gap:24,style:d.container,children:[(0,b.jsxs)(p().Y1,{gap:8,direction:"horizontal",children:[(0,b.jsx)("div",{style:d.iconContainer,children:t}),(0,b.jsxs)(p().Y1,{direction:"vertical",children:[(0,b.jsx)(x().D,{styleName:"UISmall-12px/Medium",colorName:"primary",children:n}),(0,b.jsx)(x().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:o})]})]}),a.map(((e,t)=>(0,b.jsx)("div",{onClick:e.action,style:d.action,role:"button",tabIndex:0,children:e.icon},`${t}_live_activity_action`)))]}):null}function I(){const e=(0,o().v3)(),t=(0,a().K8)((()=>(0,f().Bh)()),[]),[n,r]=i.useState(void 0);return i.useEffect((()=>{var n;const i=g().default.state.currentUserSettingsStore,o=null===(n=g().default.state.currentSpaceStore)||void 0===n?void 0:n.id;if(!i||!o||!t)return;const a=i.getSettings(),c=(null==a?void 0:a.beams)||[];if(0===c.length)return;const l=c[c.length-1],d=c.slice(0,-1);l&&(0,s().vI)(l)&&(r(l),u().createAndCommit({userAction:"BeamActivity.updateBeams",environment:e,cellTarget:{spaceWithId:o},perform:e=>{h().mJ({userSettingsStore:i,transaction:e,data:{beams:d}})},canUndo:!0,userId:i.id}))}),[e,t]),i.useEffect((()=>{if(!n)return;const e=setTimeout((()=>{r(void 0)}),s().nw);return()=>clearTimeout(e)}),[n]),n&&(0,s().vI)(n)?(0,b.jsx)(v,{leftIcon:(0,b.jsx)(j,{beam:n}),title:n.title,message:n.message,duration:s().nw,actions:[{action:()=>{n.blockLink&&d().oo({environment:e,url:n.blockLink})},icon:(0,b.jsx)(m().Q,{iconGroup:c().j,variantName:"small",colorName:"secondary"})}]}):null}function j(e){let{beam:t}=e;const n=(0,r().IS)((()=>({emojiContainer:{fontSize:20,lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24},imageIcon:{width:24,height:24,objectFit:"cover",borderRadius:4},notionIcon:{width:24,height:24}})),[]);return t.pageIcon?(0,b.jsx)("span",{style:n.emojiContainer,children:t.pageIcon}):t.iconLink?(0,b.jsx)("img",{src:t.iconLink,alt:"Beam icon",style:n.imageIcon}):(0,l().notionIcon)(n.notionIcon)}},556927:(e,t,n)=>{n.d(t,{j:()=>i});const i=(0,n(340498).xh)("arrowUpRight",{default:{loader:()=>n.e(43274).then(n.bind(n,443274))},small:{loader:()=>n.e(30720).then(n.bind(n,230720))},mini:{loader:()=>n.e(37972).then(n.bind(n,315591))},large:{loader:()=>n.e(49172).then(n.bind(n,749172))}})},883626:(e,t,n)=>{n.d(t,{Hs:()=>o,nw:()=>r,vI:()=>s});var i=()=>n(720665);const o=100,a=5*i().Xb,r=15*i().TD;function s(e){return!!e.sendDateMs&&Date.now()-e.sendDateMs<=a}}}]);