"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[6178],{538049:(e,t,n)=>{n.d(t,{DisconnectContactModal:()=>N});n(898992),n(672577);var o=n(296540),i=()=>n(484714),a=()=>n(56366),c=()=>n(401497),s=()=>n(617871),l=()=>n(857639),r=()=>n(187859),d=()=>n(703888),u=()=>n(824862),g=()=>n(959013),v=()=>n(381349),p=()=>n(493823),f=()=>n(331542),h=()=>n(676007),C=()=>n(460292),m=()=>n(204063),y=()=>n(125565),x=()=>n(765957),j=()=>n(53137),A=()=>n(258836),b=()=>n(908928),I=()=>n(2220);var M=()=>n(804800),S=()=>n(437487),k=n(474848);function w(e){let{title:t,caption:n,handleConfirmation:i,handleCancel:a,type:c}=e;const[s,l]=(0,o.useState)(!1),r=D();return(0,k.jsxs)("div",{style:r.modalContent,children:[(0,k.jsx)(y().A,{style:r.title,children:t}),(0,k.jsx)(y().A,{isMultiline:!0,isSecondaryColor:!0,style:r.caption,children:n}),(0,k.jsxs)("div",{style:r.buttonContainer,children:[(0,k.jsx)(m().A,{isRed:!0,size:"lg",onClick:async()=>await i(l),disabled:s,children:(0,k.jsxs)(y().A,{style:{color:v().Ay.white},children:["disconnect"===c&&!0===s&&(0,k.jsx)(f().A,{onDarkBackground:!0}),"disconnect"===c&&!1===s&&(0,k.jsx)(g().sA,{id:"disconnectModal.button.disconnect",defaultMessage:"Disconnect"})]})}),(0,k.jsx)(p().p,{size:"lg",isLightGray:!0,style:r.cancelButton,onClick:a,disabled:s,children:(0,k.jsx)(y().A,{children:(0,k.jsx)(g().sA,{id:"disconnectModal.button.cancel",defaultMessage:"Cancel"})})})]})]})}function N(e){let{open:t}=e;const n=D(),{type:o}=(0,a().K8)((()=>M().L.getState()),[]),c=(0,a().O$)(x().AppStoreCurrentSpaceStore),v=(0,g().tz)(),p=(0,i().v3)(),{slackBotId:f,googleBotId:m}=(0,a().K8)((()=>{var e,t;if(!c)return{slackBotId:void 0,googleBotId:void 0};const n=j().A.bots.state;return{slackBotId:null===(e=n.find((e=>{if(!e||!e.id)return!1;const t=A().v.createChildStore(c,{table:u().GP,id:e.id,spaceId:c.id});return t.getAlive()&&t.getIntegrationId()===s().zG})))||void 0===e?void 0:e.id,googleBotId:null===(t=n.find((e=>{if(!e||!e.id)return!1;const t=A().v.createChildStore(c,{table:u().GP,id:e.id,spaceId:c.id});return t.getAlive()&&t.getIntegrationId()===s().E8})))||void 0===t?void 0:t.id}}),[c]);if(!o)return null;const y=()=>{M().L.setState({open:!1,type:void 0})},N=async()=>{const e=o===S().NL.Slack?f:m;e&&await async function(e){let{botId:t,environment:n}=e;t&&await b().KA({environment:n,botId:t,onSuccess:()=>{(0,I().u)({environment:n,event:{eventName:"disconnect_contact_integration",eventProperties:{}}})}})}({botId:e,environment:p})},G=()=>{const e=B(o);return(0,k.jsxs)("div",{style:n.titleContainer,children:[(0,k.jsx)(C().Q,{style:n.icon,iconGroup:o===S().NL.Google?r().m:d().j,variantName:"default"}),(0,k.jsx)(g().sA,{id:"disconnectContactModal.title",defaultMessage:"Disconnect {serviceName}",values:{serviceName:e}})]})},L=()=>{const e=B(o);return(0,k.jsx)(g().sA,{id:"disconnectContactModal.caption",defaultMessage:"This will remove imported {serviceName} contacts",values:{serviceName:e}})};return(0,k.jsx)(h().a,{open:t,onClosed:y,onDismiss:y,transitionAppearance:"none",showCloseIcon:!0,innerStyle:n.innerModal,ariaLabel:v.formatMessage({id:"disconnectContactModal.title",defaultMessage:"Disconnect {serviceName}"},{serviceName:B(o)}),render:()=>(0,k.jsx)(w,{title:G(),caption:L(),type:"disconnect",handleCancel:y,handleConfirmation:async e=>{e(!0);try{await N()}catch(t){l().log({level:"error",from:"DisconnectContactModal",type:"onConfirm",data:{miscDataToConvertToString:{error:t}}})}finally{e(!1),y()}}})})}function B(e){switch(e){case S().NL.Slack:return"Slack";case S().NL.Google:return"Google";default:return e}}function D(){return(0,c().IS)((()=>({titleContainer:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",gap:8},icon:{width:32,height:32},disconnect:{color:v().Ay.red},innerModal:{borderRadius:10},modalContent:{padding:20,width:333},buttonContainer:{display:"flex",justifyContent:"center",gap:4,flexDirection:"column",marginTop:24},title:{marginBottom:8,fontWeight:600},caption:{textAlign:"center"},cancelButton:{justifyContent:"center"}})),[])}}}]);