"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[44763],{47582:(e,t,n)=>{n.d(t,{V:()=>A});n(898992),n(354520);var r=n(296540),s=()=>n(56366),i=()=>n(534177),a=()=>n(722872),o=()=>n(962730),d=()=>n(377586),l=()=>n(463830),c=()=>n(406699),m=()=>n(928600),u=()=>n(939740),p=()=>n(221844),h=()=>n(484714),g=()=>n(179034),S=()=>n(496603),b=()=>n(751156),f=()=>n(6731),v=()=>n(630116),C=()=>n(89924),y=()=>n(604484),M=()=>n(944850),x=n(474848);function T(e){let{blockStore:t,filterDeletedPermissions:n}=e;const{mockBlockStore:i}=function(e){let{blockStore:t,filterDeletedPermissions:n}=e;const i=(0,h().v3)(),a=(0,s().K8)((()=>(0,S().mg)(t.inMemoryRecordCache.data)),[t]),o=(0,r.useMemo)((()=>new(p().A)({name:"adminContentSearch.deletedFromTrashPermissionsView",data:a,isTemporaryData:!0})),[a]),d=(0,f().D)({unpersistedInMemoryRecordCache:o}),{mockBlockStore:l}=(0,s().K8)((()=>{const e=n?n(t):[],r=new(v().Bv)(i,{table:g().ev,id:t.id},{inMemoryRecordCache:o});return d.createAndCommit({userAction:"adminContentSearch.restoreDeletedFromTrashPermissionsOptimistically",perform:t=>{b().applyOperation({store:r,operation:{pointer:r,command:"set",path:["permissions"],args:e},transaction:t})}}),{inMemoryRecordCache:o,mockBlockStore:r}}),[i,t,o,d,n]);return{mockBlockStore:l}}({blockStore:t,filterDeletedPermissions:n}),o=(0,M().d)(i),d=(0,y().x)({permissionItems:o});return(0,x.jsx)(m().A,{menuType:a().gu.Popup,width:248,children:(0,x.jsx)(u().Ay,{type:u().Oh.Vertical,initialFocus:void 0,sections:[{key:"deletedFromTrashPermissions",render:e=>(0,x.jsx)(C().A,{...e}),items:d}]})})}var P=()=>n(824176),k=()=>n(451830);function A(e){let{blockStore:t,getValidDeletedPermissions:n,placementToOrigin:p,renderPopupOrigin:h,environment:g,includeNonRestoreActions:S,onRestoreOrDeletePage:b,from:f}=e;const v=(0,s().uB)(void 0,l().A),C=(0,k().o)(),[y,M]=(0,r.useState)(!1),A=(0,P().QV)({blockStore:t,getValidDeletedPermissions:n}),I=[(0,P().j9)({environment:g,pageStatus:"deleted_from_trash",popupStore:v,blockStore:t,from:f,handleOpenDeletedPermissionsMenu:()=>M(!0),includeNonRestoreActions:S,onRestoreOrDeletePage:b,...A}),(0,P().CT)({environment:g,from:f,pageStatus:"deleted_from_trash",popupStore:v,blockStore:t,includeNonRestoreActions:S,onRestoreOrDeletePage:b,...A})].filter(i().O9);return(0,x.jsx)(c().Ay,{popupType:d().n.Popup,alignmentToOrigin:o().C.Start,placementToOrigin:p,style:C.popupMenu,render:()=>y?(0,x.jsx)(T,{blockStore:t,filterDeletedPermissions:n}):(0,x.jsx)(m().A,{menuType:a().gu.Popup,width:248,children:(0,x.jsx)(u().Ay,{type:u().Oh.Vertical,initialFocus:void 0,sections:I})}),onClose:()=>{M(!1)},buttonPopupStore:v,renderOrigin:h})}},126553:(e,t,n)=>{n.d(t,{x:()=>s});n(296540);var r=n(474848);const s=(0,n(340498).wt)("settingsSecurity",{viewBox:"0 0 11 20",svg:(0,r.jsx)("path",{d:"M4.92129 19.3231C5.26719 19.627 5.74092 19.6649 6.07178 19.3383L8.38779 16.9913C8.71865 16.6571 8.70361 16.1558 8.38027 15.8292L7.2749 14.7127L8.92168 13.0569C9.2375 12.7379 9.22998 12.229 8.90664 11.8948L7.41026 10.3757C9.44805 9.35026 10.5985 7.64127 10.5985 5.62847C10.5985 2.78016 8.32012 0.486328 5.49277 0.486328C2.66543 0.486328 0.394531 2.77257 0.394531 5.62847C0.394531 7.67166 1.54502 9.50217 3.37979 10.3301V17.4622C3.37979 17.7357 3.4625 18.0471 3.69561 18.2446L4.92129 19.3231ZM5.49277 17.9863L4.68066 17.166V9.34266C2.95869 8.9629 1.73301 7.4438 1.73301 5.62847C1.73301 3.53972 3.40986 1.84592 5.49277 1.84592C7.57569 1.84592 9.24502 3.53212 9.24502 5.62847C9.24502 7.42101 8.01181 8.96289 6.13194 9.38824V11.0289L7.57569 12.4872L6.03418 14.0214V15.3887L7.04931 16.3989L5.49277 17.9863ZM5.49277 5.67405C6.23721 5.67405 6.83877 5.06641 6.83877 4.32205C6.83877 3.5777 6.23721 2.97005 5.49277 2.97005C4.74834 2.97005 4.1543 3.5701 4.1543 4.32205C4.1543 5.06641 4.75586 5.67405 5.49277 5.67405Z"})})},245981:(e,t,n)=>{n.d(t,{L:()=>s});var r=()=>n(2220);function s(e,t){(0,r().u)({environment:e,event:{eventName:"cdrr_page_delete_permanently",eventProperties:{page_id:t.pageId,from:t.from}}})}},425736:(e,t,n)=>{n.d(t,{s:()=>s});n(296540);var r=n(474848);const s=(0,n(340498).wt)("privateTeam",{viewBox:"0 0 28 28",svg:(0,r.jsx)("path",{d:"M20.6455 21.2744C20.9092 21.5469 21.3311 21.5645 21.6035 21.2744C21.8936 20.9844 21.8672 20.5889 21.6035 20.3164L6.9082 5.62988C6.64453 5.36621 6.21387 5.36621 5.94141 5.62988C5.68652 5.88477 5.68652 6.33301 5.94141 6.58789L20.6455 21.2744ZM13.8076 6.13086C12.2783 6.13086 10.8896 6.39453 9.59766 6.8252L10.7578 7.97656C11.7246 7.68652 12.7178 7.51953 13.8076 7.51953C19.5908 7.51953 24.2754 12.6172 24.2754 13.6631C24.2754 14.375 22.7373 16.291 20.3027 17.7852L21.3838 18.8662C24.1611 17.0645 25.8135 14.7002 25.8135 13.6631C25.8135 11.8613 20.9092 6.13086 13.8076 6.13086ZM13.8076 21.1953C15.4424 21.1953 16.9365 20.9053 18.2988 20.4395L17.1475 19.2881C16.1016 19.6133 14.9941 19.8066 13.8076 19.8066C8.01562 19.8066 3.33105 14.9023 3.33105 13.6631C3.33105 13.0479 4.95703 11 7.5498 9.44434L6.45996 8.35449C3.5332 10.165 1.79297 12.5996 1.79297 13.6631C1.79297 15.4561 6.79395 21.1953 13.8076 21.1953ZM18.3164 15.5879C18.5889 14.999 18.7383 14.3398 18.7383 13.6631C18.7383 10.9121 16.541 8.74121 13.8076 8.74121C13.1133 8.74121 12.4629 8.89062 11.874 9.14551L18.3164 15.5879ZM13.8076 18.585C14.5811 18.585 15.3105 18.3916 15.9609 18.0752L9.36914 11.4834C9.04395 12.1338 8.85938 12.8721 8.85938 13.6631C8.86816 16.3438 11.0566 18.585 13.8076 18.585Z"})})},451830:(e,t,n)=>{n.d(t,{o:()=>i});var r=()=>n(401497),s=()=>n(623275);function i(){return(0,r().IS)((e=>({changePermissionsIcon:{height:18,width:18,fill:"currentColor"},icon:{marginRight:3,height:15,width:15,fill:"currentColor"},destructiveMenuItemHover:{background:e.tint.uiRedHover},destructiveMenuItemPressed:{background:e.tint.uiRedPressed},openLinkIcon:{marginRight:3,height:15,width:15,fill:"currentColor",transform:"rotate(-45deg)"},popupMenu:{width:248},popupShareModal:{width:s().$D,borderRadius:s().Sg}})),[])}},454354:(e,t,n)=>{n.d(t,{A:()=>a});var r=()=>n(765957),s=()=>n(630116);class i extends(()=>n(757695))().Store{getInitialState(){return{changePermissionsEnabled:!1,privatePageStore:void 0,loading:!1,error:void 0}}shouldSaveTransactionWithSudoMode(e){const t=e===this.state.privatePageStore,n=this.doesUserAlreadyHaveEditorAccess(e.pointer);return t&&this.state.changePermissionsEnabled&&!n}shouldUserHaveAccessToPrivatePageBlock(){var e,t;const n=null===(e=r().default.state.currentSpaceStore)||void 0===e?void 0:e.canAdmin(),s="enterprise"===(null===(t=r().default.state.currentSpaceStore)||void 0===t?void 0:t.getSubscriptionTier());return this.state.privatePageStore&&n&&s}doesUserAlreadyHaveEditorAccess(e){const t=r().default.state.currentSpaceStore;if(!t)return!1;return(e.table===n(179034).ev?s().Bv.createChildStore(t,e):s().md.createChildStore(t,e)).canAdmin()}}const a=i},482707:(e,t,n)=>{n.d(t,{k:()=>i});var r=()=>n(645873);const s=new(r().O2)("shareMenuContainer",(async()=>await Promise.all([n.e(75134),n.e(9304),n.e(16471),n.e(58550),n.e(44711),n.e(53321),n.e(90825),n.e(96346),n.e(55373),n.e(37353),n.e(29151),n.e(78191),n.e(62475),n.e(3151),n.e(98629),n.e(49889),n.e(97727),n.e(22900),n.e(85128),n.e(95555),n.e(14659),n.e(92845),n.e(84468),n.e(5605),n.e(48486),n.e(95794),n.e(13677),n.e(56952),n.e(48632),n.e(74562),n.e(27711),n.e(4422),n.e(11341),n.e(46414),n.e(95168),n.e(28271),n.e(34877),n.e(36908),n.e(17254),n.e(84185),n.e(32421),n.e(15315),n.e(24587),n.e(78708),n.e(43777),n.e(74752),n.e(91194),n.e(81197),n.e(98659),n.e(20502),n.e(6266),n.e(8184),n.e(83884),n.e(65881),n.e(99809),n.e(93282),n.e(43678),n.e(15019),n.e(90978),n.e(3910),n.e(77213),n.e(6912),n.e(21194),n.e(30291),n.e(39541),n.e(12913),n.e(45620),n.e(54220),n.e(19930),n.e(81768),n.e(58102),n.e(52836),n.e(26483),n.e(19687),n.e(6463),n.e(68137),n.e(50569),n.e(40925),n.e(24975),n.e(282),n.e(87250),n.e(93847),n.e(79928),n.e(7203),n.e(61349),n.e(55197),n.e(94256),n.e(76690),n.e(29669),n.e(24930),n.e(62573),n.e(33882),n.e(44763),n.e(1440),n.e(5044),n.e(31782),n.e(93449),n.e(63996),n.e(895),n.e(66559),n.e(35986),n.e(45683),n.e(78862),n.e(38536),n.e(92924),n.e(64819),n.e(67378),n.e(40186),n.e(97339),n.e(55717),n.e(63797),n.e(56352),n.e(52811),n.e(28398),n.e(21367),n.e(65351),n.e(22686),n.e(4112),n.e(31889),n.e(36009),n.e(81973),n.e(2600),n.e(77663),n.e(97832),n.e(75681)]).then(n.bind(n,578030)))),i=(0,r()._h)(s,(e=>e.ShareMenuContainer))},604484:(e,t,n)=>{n.d(t,{o:()=>D,x:()=>L});n(944114),n(581454);var r=n(296540),s=()=>n(738418),i=()=>n(959013),a=()=>n(859428),o=()=>n(484714),d=()=>n(56366),l=()=>n(401497),c=()=>n(824862),m=()=>n(630116),u=()=>n(710149),p=()=>n(678553),h=()=>n(256863),g=n(474848);function S(e){let{botId:t}=e;const n=(0,i().tz)(),r=(0,o().v3)(),s=(0,d().K8)((()=>m().sk.createUniqueRootStore(r,{table:c().GP,id:t})),[t,r]),a=(0,d().K8)((()=>s.getDisplayName(n)),[s,n]),u=(0,d().K8)((()=>s.getParentStore()),[s]),S=(0,d().K8)((()=>{if(u){if(u instanceof m().LU)return u.getDisplayName(n);if(u instanceof m().SL)return u.getName()}}),[u,n]),f=(0,l().IS)((()=>({desktopIconStyle:{alignSelf:"center",width:24,fontSize:18}})),[]);return a?(0,g.jsx)(p().Ay,{desktopIconStyle:f.desktopIconStyle,icon:(0,g.jsx)(h().A,{botStore:s,size:24}),title:a,caption:(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.botMenuItem.createdBy",defaultMessage:"Created by {creatorName}",values:{creatorName:S}})}):(0,g.jsx)(b,{})}function b(){const e=(0,l().IS)((e=>({container:{userSelect:"none",minHeight:45,fontSize:14,padding:"4px 8px",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},textContainer:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",gap:6},icon:{flexGrow:0,flexShrink:0,width:24,height:24,borderRadius:"0.25em",marginRight:4,marginTop:1},title:{flexGrow:0,flexShrink:0,width:80,height:14,borderRadius:"0.25em",marginLeft:4},byline:{flexGrow:0,flexShrink:0,width:150,height:10,borderRadius:"0.25em",marginLeft:4}})),[]);return(0,g.jsxs)("div",{style:e.container,children:[(0,g.jsx)(u().A,{style:e.icon}),(0,g.jsxs)("div",{style:e.textContainer,children:[(0,g.jsx)(u().A,{emphasized:!1,style:e.title}),(0,g.jsx)(u().A,{emphasized:!1,style:e.byline})]})]})}var f=()=>n(234194),v=()=>n(765957),C=()=>n(187820);const y=(0,i().YK)({editor:{id:"adminContentSearchTab.sharedWith.permissions.editor",defaultMessage:"Full access"},readAndWrite:{id:"adminContentSearchTab.sharedWith.permissions.readAndWrite",defaultMessage:"Can edit"},commentOnly:{id:"adminContentSearchTab.sharedWith.permissions.commentOnly",defaultMessage:"Can comment"},reader:{id:"adminContentSearchTab.sharedWith.permissions.reader",defaultMessage:"Can view"},none:{id:"adminContentSearchTab.sharedWith.permissions.none",defaultMessage:"None"}});function M(e,t){switch(t){case"editor":return e.formatMessage(y.editor);case"read_and_write":return e.formatMessage(y.readAndWrite);case"comment_only":return e.formatMessage(y.commentOnly);case"reader":return e.formatMessage(y.reader);case"none":return e.formatMessage(y.none)}}function x(e){let{name:t,icon:n,role:r}=e;const s=(0,i().tz)(),a=(0,d().O$)(v().AppStoreCurrentSpaceStore),o=M(s,r),c=(0,l().IS)((e=>({defaultGroupIcon:{height:20,width:20,color:e.text.tertiary,fill:"currentColor"}})),[]);return(0,g.jsx)(p().Ay,{desktopIconStyle:{alignSelf:"center",width:24,fontSize:18},icon:(0,g.jsx)(C().B6,{disabled:!0,icon:n&&a?{pointer:a.pointer,icon:n}:void 0,size:20,isEmptyPage:!1,title:t,defaultIcon:(0,f().M)(c.defaultGroupIcon)}),title:t||(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.untitledPage",defaultMessage:"Untitled{maybeRoleString}",values:{maybeRoleString:o?` · ${o}`:""}}),caption:(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.group",defaultMessage:"Group{maybeRoleString}",values:{maybeRoleString:o?` · ${o}`:""}})})}var T=()=>n(68263),P=()=>n(898808);function k(e){let{permissionItem:t}=e;const n=(0,i().tz)(),r=(0,d().O$)(v().AppStoreCurrentSpaceStore),s=(0,d().K8)((()=>{var e;return null===(e=v().default.state.currentSpaceStore)||void 0===e?void 0:e.getName()}),[]),a=null==t?void 0:t.role,o=(0,T().PW)(a)?M(n,a):void 0;return(0,g.jsx)(p().Ay,{desktopIconStyle:{alignSelf:"center",width:24},icon:r?(0,g.jsx)(P().x,{disabled:!0,store:r,size:24}):void 0,title:s,caption:(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.spaceMembers",defaultMessage:"Members{maybeRoleString}",values:{maybeRoleString:o?` · ${o}`:""}})})}var A=()=>n(425736),I=()=>n(854150);function w(e){let{teamId:t,role:n,onlyOwners:r}=e;const s=(0,o().v3)(),a=(0,i().tz)(),l=(0,d().K8)((()=>new(m().h4)(s,{table:I().yK,id:t})),[s,t]),c=M(a,n),u=(0,d().K8)((()=>l.getName()),[l]),h=u||(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.unknownTeamName",defaultMessage:"Private teamspace"});return(0,g.jsx)(p().Ay,{desktopIconStyle:{alignSelf:"center",width:24},icon:u?(0,g.jsx)(P().x,{disabled:!0,store:l,size:24}):(0,A().s)(),title:h,caption:r?(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.teamOwners",defaultMessage:"Owners{maybeRoleString}",values:{maybeRoleString:c?` · ${c}`:""}}):(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.teamMembers",defaultMessage:"Members{maybeRoleString}",values:{maybeRoleString:c?` · ${c}`:""}})})}var j=()=>n(798880),_=()=>n(695608),R=()=>n(453697);function W(e){let{userId:t,role:n,isGuest:r}=e;const s=(0,i().tz)(),a=(0,o().v3)(),{userStore:l,userName:c}=(0,d().K8)((()=>{const e=new(m().LU)(a,{table:j().oo,id:t}),n=(0,_().c6)(s,e.getModel());return{userStore:e,userName:n}}),[a,t,s]),u=M(s,n);return(0,g.jsx)(p().Ay,{desktopIconStyle:{alignSelf:"center",width:24},icon:(0,g.jsx)(R().A,{userStore:l,size:24}),title:c,caption:r?(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.guest",defaultMessage:"Guest{maybeRoleString}",values:{maybeRoleString:u?` · ${u}`:""}}):(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.member",defaultMessage:"Member{maybeRoleString}",values:{maybeRoleString:u?` · ${u}`:""}})})}const B=(0,i().YK)({sharedWithWorkspaceMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithWorkspaceMembers",defaultMessage:"Workspace members"},sharedWithTeamOwners:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithTeamOwners",defaultMessage:"Teamspace owners"},sharedWithTeamMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithTeamMembers",defaultMessage:"Teamspace members"},sharedWithMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithMembers",defaultMessage:"{numMembers, plural, one {# member} other {# members}}"},sharedWithGroups:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithGroups",defaultMessage:"{numGroups, plural, one {# group} other {# groups}}"},sharedWithGuests:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithGuests",defaultMessage:"{numGuests, plural, one {# guest} other {# guests}}"},sharedWithBots:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithBots",defaultMessage:"{numBots, plural, one {# connection} other {# connections}}"},separator:{defaultMessage:", ",id:"adminContentSearchTab.pagesTable.sharedWithCell.separator"}});function O(e){let{blockStore:t}=e;const r=(0,n(944850).d)(t),o=function(e,t){const{mostPermissivePublicItem:n,spacePermission:r,groupPermissions:o,guestUserPermissions:d,memberUserPermissions:l,teamSharePermissions:c,teamOwnerSharePermissions:m,botPermissions:u}=e,p=r&&"none"!==r.permissionItem.role;if(n&&"none"!==n.permissionItem.role)return(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithWeb",defaultMessage:"Shared to web"});if(!p&&0===o.length&&0===d.length&&0===l.length&&0===c.length&&0===m.length&&0===u.length)return(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.orphanedPage",defaultMessage:"Nobody"}),(0,g.jsx)(a().A,{render:e=>(0,g.jsx)("div",{...e,children:(0,s().G)({marginLeft:4,height:14,width:14,opacity:.5})}),renderTooltip:()=>(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWithCell.orphanedPage.tooltip",defaultMessage:"No person, group, or teamspace has any access to this page."})})]});const h=[];p?h.push(t.formatMessage(B.sharedWithWorkspaceMembers)):(m.length>0&&0===c.length?h.push(t.formatMessage(B.sharedWithTeamOwners)):c.length>0&&h.push(t.formatMessage(B.sharedWithTeamMembers)),l.length>0&&h.push(t.formatMessage(B.sharedWithMembers,{numMembers:l.length})),o.length>0&&h.push(t.formatMessage(B.sharedWithGroups,{numGroups:o.length})));d.length>0&&h.push(t.formatMessage(B.sharedWithGuests,{numGuests:d.length}));u.length>0&&h.push(t.formatMessage(B.sharedWithBots,{numBots:u.length}));return h.join(t.formatMessage(B.separator))}(r,(0,i().tz)()),d=L({permissionItems:r});return(0,g.jsx)(n(75491).ED,{title:o,items:d,disabled:0===d.length})}function L(e){let{permissionItems:t}=e;return[...t.spacePermission?[{key:"space-permission",render:e=>{var n;return(0,g.jsx)(k,{...e,permissionItem:null===(n=t.spacePermission)||void 0===n?void 0:n.permissionItem})},action:()=>{}}]:[],...t.teamOwnerSharePermissions.map((e=>({key:`${e.team_id}-owners`,render:t=>(0,g.jsx)(w,{...t,onlyOwners:!0,teamId:e.team_id,role:e.role}),action:()=>{}}))),...t.teamSharePermissions.map((e=>({key:`${e.team_id}-members`,render:t=>(0,g.jsx)(w,{...t,teamId:e.team_id,role:e.role}),action:()=>{}}))),...t.groupPermissions.map((e=>({key:e.id,render:()=>(0,g.jsx)(x,{name:e.name,icon:e.icon,role:e.role}),action:()=>{}}))),...t.memberUserPermissions.map((e=>({key:e.user_id,render:t=>(0,g.jsx)(W,{...t,userId:e.user_id,role:e.role}),action:()=>{}}))),...t.guestUserPermissions.map((e=>({key:e.user_id,render:t=>(0,g.jsx)(W,{...t,isGuest:!0,userId:e.user_id,role:e.role}),action:()=>{}}))),...t.botPermissions.map((e=>({key:e.bot_id,render:t=>(0,g.jsx)(S,{...t,botId:e.bot_id}),action:()=>{}})))]}const D=r.memo(O)},623275:(e,t,n)=>{n.d(t,{$D:()=>l,CJ:()=>u,CY:()=>S,Sg:()=>d,iM:()=>f,kJ:()=>p,kx:()=>g,qj:()=>b,rL:()=>i,sH:()=>h,u6:()=>a,zr:()=>c});var r=()=>n(278238),s=()=>n(115512);const i=16,a=20,o=10,d=12,l=456,c=24,m=24,u=48;function p(e){let{theme:t,isMobile:n}=e;return{background:t.tint.regular,borderRadius:8,paddingTop:8,paddingBottom:8,paddingLeft:8,paddingRight:8,marginLeft:n?0:i,marginRight:n?0:i,marginTop:4,marginBottom:8}}function h(){return{...S(),width:"unset",height:u,paddingTop:6,paddingBottom:6}}function g(e){let{environment:t}=e;return(0,s().ny)(t,t.device.isMobile?"UISmall":"UIRegular")}function S(){return{borderRadius:o,transition:"background 150ms ease-out"}}function b(e){let{isMobile:t}=e;return t?12:10}function f(e){let{theme:t,colorOverride:n,size:s=m,useLargeBorderRadius:i,useLightBackgroundColor:a,icon:o}=e;return{background:n||(o&&(0,r().T8)(o)?(0,r().ez)({icon:o,mode:t.mode,useLightGrayColor:a}):a?t.lightDividerColor:t.regularDividerColor),width:s,height:s,borderRadius:i?6:"0.25em"}}},824176:(e,t,n)=>{n.d(t,{CT:()=>w,QV:()=>A,j9:()=>I});n(944114),n(581454),n(296540);var r=()=>n(56366),s=()=>n(401497),i=()=>n(584262),a=()=>n(857639),o=()=>n(452951),d=()=>n(657222),l=()=>n(126553),c=()=>n(735384),m=()=>n(112452),u=()=>n(959013),p=()=>n(534177),h=()=>n(245981),g=()=>n(884107),S=()=>n(755636),b=()=>n(345913),f=()=>n(492414),v=()=>n(108944),C=()=>n(962730),y=()=>n(765957),M=()=>n(760217),x=()=>n(89924),T=()=>n(859428),P=()=>n(451830),k=n(474848);function A(e){const{getValidDeletedPermissions:t,blockStore:n}=e;return(0,r().K8)((()=>{var e;const r=v().$l(v().g7(n));if(Boolean((null==r?void 0:r.id)!==n.id))return{ancestorBlockStore:r,canRestoreAncestor:!0,canRestoreOriginalAccess:!1};const s=t?t(n):[],i=Boolean(n.getParentSpaceStore()&&0===s.length);return{ancestorBlockStore:r,canRestoreAncestor:!1,canRestoreOriginalAccess:!Boolean(null===(e=n.getParentBlockStore())||void 0===e?void 0:e.pathHasDeletedPermission())&&!i}}),[n,t])}function I(e){const t=(0,P().o)(),{environment:n,pageStatus:r,popupStore:s,blockStore:a}=e;async function d(){const e=(0,f().Ay)({store:a,pageVisitSource:i().y8.CopyLink}),t=await g().R.clipboardActions.load();await t.copyString({environment:n,stringValue:e,copiedMessage:t.clipboardMessages.copiedLinkToClipboard}),s.setState({open:!1})}const c=[];switch(r){case"alive":case"in_trash":{const{handleOpenPermissionsMenu:n}=e;c.push(function(e){let{iconStyle:t,action:n}=e;return{key:"change-permissions",render:e=>(0,k.jsx)(M().A,{...e,icon:(0,l().x)(t),title:(0,k.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.changePermissions",defaultMessage:"Change permissions"})}),action:n}}({iconStyle:t.changePermissionsIcon,action:n}),R({iconStyle:t.icon,action:d}));break}case"deleted_from_trash":{const{ancestorBlockStore:r,canRestoreAncestor:a,canRestoreOriginalAccess:m,handleOpenDeletedPermissionsMenu:p,includeNonRestoreActions:h}=e;if(r&&a){const e=()=>{const e=(0,f().Ay)({store:r,pageVisitSource:i().y8.DeletedFromTrashPageActions});S().f({environment:n,url:e}),s.setState({open:!1})};c.push(function(e){let{iconStyle:t,action:n}=e;return{key:"go-to-parent-page",render:e=>(0,k.jsx)(M().A,{...e,icon:(0,o().Z)(t),title:(0,k.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.navigateToParent",defaultMessage:"Open parent in new tab"})}),action:n}}({iconStyle:t.openLinkIcon,action:e}))}m&&c.push(function(e){let{iconStyle:t,action:n}=e;return{key:"view-original-permissions",render:e=>(0,k.jsx)(M().A,{...e,icon:(0,l().x)(t),title:(0,k.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.viewOriginalPermissions",defaultMessage:"View original permissions"})}),action:n}}({iconStyle:t.changePermissionsIcon,action:p})),h&&c.push(R({iconStyle:t.icon,action:d}));break}default:(0,p().HB)(r)}if(0!==c.length)return{key:"actions",render:e=>(0,k.jsx)(x().A,{...e}),items:c}}function w(e){const{from:t,pageStatus:n,environment:s,blockStore:i,popupStore:o,onRestoreOrDeletePage:d}=e,l=(0,P().o)(),g=[],S=(0,r().K8)((()=>{var e;return(null===(e=y().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id)===i.id}),[i]);switch(n){case"alive":return;case"in_trash":{async function f(){await b().iN({environment:s,blockStore:i,spaceId:i.getSpaceId(),from:"adminContentSearch.restorePage",restoreWithoutNavigation:!0}),null==d||d(i.id),o.setState({open:!1})}function v(){const e=d?e=>{e.length>1&&a().log({level:"warning",from:"usePageCellActions",type:"multipleBlocksDeletedFromTrash",data:{blockIds:e.map((e=>e.id))}}),e.length>0&&d(e[0].id)}:void 0;b().Ne({environment:s,blocks:[i],from:"adminContentSearch",handleSuccess:e}),o.setState({open:!1})}g.push(_({iconStyle:l.icon,action:f,disable:!1}),function(e){let{iconStyle:t,action:n}=e;return{key:"delete-from-trash",render:e=>(0,k.jsx)(j,{...e,icon:(0,c().I)(t),title:(0,k.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.deleteFromTrash",defaultMessage:"Delete from Trash"})}),action:n}}({iconStyle:l.icon,action:v}));break}case"deleted_from_trash":{const{canRestoreAncestor:C,canRestoreOriginalAccess:T,includeNonRestoreActions:A}=e,I=C||!T,w=C?(0,k.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.restore.tooltip.restoreParent",defaultMessage:"Restore the parent page to restore the original permissions."}):T?void 0:(0,k.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.restore.tooltip.pageCannotBeRestored",defaultMessage:"This page cannot have its original permissions restored."});g.push(_({iconStyle:l.icon,action:async()=>{await b().tP({environment:s,blockStore:i,spaceId:i.getSpaceId(),from:`${t}.restoreRetainedPage`}),null==d||d(i.id),o.setState({open:!1})},disable:I,tooltip:w}),function(e){let{iconStyle:t,action:n}=e;return{key:"restore-to-private",render:e=>(0,k.jsx)(M().A,{...e,icon:(0,m()._)(t),shouldWrapCaption:!0,title:(0,k.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.restoreToPrivate",defaultMessage:"Restore to Private pages"})}),action:n}}({iconStyle:l.icon,action:async()=>{await b().Ys({environment:s,blockStore:i,spaceId:i.getSpaceId(),navigateToPage:S,from:`${t}.restoreRetainedPage`}),null==d||d(i.id),o.setState({open:!1})}})),A&&g.push(function(e){let{iconStyle:t,action:n}=e;return{key:"purge",render:e=>(0,k.jsx)(j,{...e,icon:(0,c().I)(t),title:(0,k.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.purge",defaultMessage:"Permanently delete"})}),action:n}}({iconStyle:l.icon,action:()=>{b().tz({environment:s,blockStore:i,handleSuccess:e=>{null==d||d(e),h().L(s,{pageId:i.id,from:"content_search"})}}),o.setState({open:!1})}}));break}default:(0,p().HB)(n)}return{key:"inactive-page-actions",render:e=>(0,k.jsx)(x().A,{...e,topBorder:!0}),items:g}}function j(e){const t=(0,s().IS)((e=>({destructiveMenuItemHover:{background:e.tint.uiRedHover},destructiveMenuItemPressed:{background:e.tint.uiRedPressed}})),[]);return(0,k.jsx)(M().A,{...e,isRedOnHover:!0,hoveredStyle:t.destructiveMenuItemHover,pressedStyle:t.destructiveMenuItemPressed})}function _(e){let{iconStyle:t,action:n,disable:r,tooltip:s}=e;const i=e=>(0,k.jsx)(M().A,{...e,disabled:r,disallowTabbing:r,disabledFeedback:!0,icon:(0,m()._)(t),shouldWrapCaption:!0,title:(0,k.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.restore",defaultMessage:"Restore to original location"})});return{key:"restore",render:e=>s?(0,k.jsx)(T().A,{textWrap:!0,renderTooltip:()=>s??null,placement:C().W.Right,render:t=>(0,k.jsx)("div",{...t,children:i(e)})}):i(e),action:n}}function R(e){let{iconStyle:t,action:n}=e;return{key:"copy-link",render:e=>(0,k.jsx)(M().A,{...e,icon:(0,d().w)(t),title:(0,k.jsx)(u().sA,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})}),action:n}}},904671:(e,t,n)=>{n.d(t,{$:()=>m,B:()=>c});var r=()=>n(221844),s=()=>n(223116),i=()=>n(179034),a=()=>n(217429),o=()=>n(630116),d=()=>n(329304),l=()=>n(449506);async function c(e){const{environment:t,sudoModeStore:n,pageBlockId:r,currentSpaceStore:i}=e,o=n.state.privatePageStore&&n.state.privatePageStore.id===r;if(t.device.isMobile||o||n.state.loading||n.state.error)return;await a().default.waitUntilStatsigReady();const c=(null==i?void 0:i.isReady())&&(null==i?void 0:i.canAdmin()),u=await function(e,t){return(0,d().Se)(e,{name:"sudo_mode",spaceId:t,userId:e.currentUser.id})}(t,null==i?void 0:i.id);if(!(r&&c&&i&&u))return;n.setState({...n.state,privatePageStore:void 0,loading:!0});const p=i.id,h=await l().callApi({eventName:"getPrivatePageInfo",environment:t,data:{id:r}});if("failed"===h.type)return void n.setState({...n.state,loading:!1,error:h.error});const g=h.data,S=m({environment:t,blockId:r,privateRecordCacheName:s().Rb,ancestorData:g,spaceId:p});n.setState({...n.state,privatePageStore:S,loading:!1,error:void 0})}function m(e){const{environment:t,privateRecordCacheName:n,ancestorData:s,spaceId:a,blockId:d}=e,l=new(r().A)({name:n});for(const r of s)switch(r.table){case"block":case"collection":case"team":l.setRecord({pointer:{spaceId:a,table:r.table,id:r.value.id},userId:t.currentUser.id},{role:"editor",value:r.value})}const c=new(o().Bv)(t,{table:i().ev,id:d},{inMemoryRecordCache:l});return c.inMemoryRecordCache.addCacheFallback(t.defaultRecordCache.inMemoryRecordCache),c}},944850:(e,t,n)=>{n.d(t,{d:()=>m});n(944114),n(898992),n(354520),n(672577),n(581454),n(908872);var r=()=>n(56366),s=()=>n(68263),i=()=>n(437607),a=()=>n(468006),o=()=>n(108944),d=()=>n(731320),l=()=>n(646736),c=()=>n(605402);function m(e){return(0,r().K8)((()=>{const t=(0,d().i0)(e),n=c().A.state.permissionGroupsAndMemberCounts.map((e=>e.group)),r=(0,o().Uo)(e),m=t.find((e=>{let{permissionItem:t}=e;return s().FP(t)})),u=t.find((e=>{let{permissionItem:t}=e;return s().Lg(t)})),p=r?t.find((e=>{let{permissionItem:t}=e;return(0,a().O1)(t,r.id)})):void 0,h=t.map((e=>{let{permissionItem:t}=e;return t})).filter(s().gl),g=t.map((e=>{let{permissionItem:t}=e;return t})).filter(s().nl),S=t.map((e=>{let{permissionItem:t}=e;return t})).filter(s().Ds).reduce(((e,t)=>{const r=t.group_id,s=t.role,a=n.find((e=>e.group_id===r));if(a){const t={group_id:a.group_id,id:(0,i().T1)({spacePermissionGroupId:a.group_id,spaceId:a.space_id}),name:a.name,space_id:a.space_id,icon:a.icon,version:a.getVersion(),role:s};e.push(t)}return e}),[]),[b,f]=t.map((e=>{let{permissionItem:t}=e;return t})).filter(s().B2).reduce(((t,n)=>{const r=(0,l().sE)(e.getSpaceStore(),n.user_id);return Boolean(r&&!r.isMember())?[t[0].concat(n),t[1]]:[t[0],t[1].concat(n)]}),[[],[]]);return{groupPermissions:S,mostPermissivePublicItem:m,spacePermission:u,teamPermission:p,teamSharePermissions:h,teamOwnerSharePermissions:g,guestUserPermissions:b,memberUserPermissions:f,botPermissions:t.map((e=>{let{permissionItem:t}=e;return t})).filter((e=>(0,s().P3)(e)))}}),[e])}},991221:(e,t,n)=>{n.d(t,{T:()=>m});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(672577),n(803949);var r=n(296540),s=()=>n(56366),i=(n(354520),()=>n(534177)),a=()=>n(142748);var o=()=>n(68263),d=()=>n(108944),l=()=>n(605402),c=()=>n(646736);function m(){const e=(0,s().K8)((()=>{const e=new Set;l().A.state.permissionGroupsAndMemberCounts.forEach((t=>{e.add(t.group.group_id)}));return t=>e.has(t)}),[]);return(0,r.useCallback)((t=>{var n;const r=null===(n=t.getPermissionItems().find(o().Ny))||void 0===n?void 0:n.previous_permissions;return r?function(e){var t;let{deletedPermissions:n,ancestorPath:r,userIsMember:s,permissionGroupExists:o}=e;const d=null===(t=(0,a().vv)(r))||void 0===t?void 0:t.id;return n.filter((e=>{const t=e.type;switch(t){case"trusted_domain_permission":case"public_permission":case"deleted_permission":case"bot_permission":return!1;case"exclusive_user_permission":case"user_permission":return s(e.user_id);case"explicit_team_guest_permission":case"explicit_team_owner_permission":case"explicit_team_permission":return e.team_id===d;case"group_permission":return o(e.group_id);case"team_owner_permission":case"team_permission":case"restricted_permission":case"collection_property_permission":case"space_permission":case"space_owner_permission":return!0;default:(0,i().HB)(t)}}))}({deletedPermissions:r,ancestorPath:(0,d().E)(t),userIsMember:e=>{var n;return Boolean(null===(n=(0,c().sE)(t.getSpaceStore(),e))||void 0===n?void 0:n.isMember())},permissionGroupExists:e}):[]}),[e])}}}]);