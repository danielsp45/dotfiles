"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[53147],{685926:(t,e,n)=>{n.r(e),n.d(e,{FeatureIntroPopup:()=>v,default:()=>S});n(581454);var i=n(296540),o=()=>n(56366),s=()=>n(401497),r=()=>n(591779),l=()=>n(66913),a=()=>n(358373),d=()=>n(959013),u=()=>n(512062),c=()=>n(284371),g=()=>n(552871),p=()=>n(962730),h=()=>n(377586),x=()=>n(765957),m=()=>n(493823),y=()=>n(285790),f=()=>n(594607),b=()=>n(897119),j=()=>n(204063),C=n(474848);const B=function(t){const{imageSrc:e,imageStyles:n,title:i,subtitle:o}=t,r=(0,s().IS)((t=>({content:{padding:"0 24px",height:90},title:{fontSize:c().J.UIRegular.desktop,fontWeight:c().Wy.semibold,marginBottom:5,marginTop:16},subtitle:{fontSize:c().J.UIRegular.desktop,color:t.text.secondary},image:{display:"flex",margin:"auto"},imageWrapper:{borderBottom:`1px solid ${t.lightDividerColor}`,display:"flex"}})),[]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{style:r.imageWrapper,children:(0,C.jsx)("img",{style:{...r.image,...n},src:e},e)}),(0,C.jsxs)("div",{style:r.content,children:[(0,C.jsx)("div",{style:r.title,children:i}),(0,C.jsx)("div",{style:r.subtitle,children:o})]})]})};const k=function(t){const e=(0,s().IS)((t=>({headerContainer:{display:"flex",marginTop:12,marginBottom:8,justifyContent:"center"},headerText:{fontWeight:c().Wy.medium},iconContainer:{display:"flex",justifyContent:"center"},icon:{width:24,height:24,fill:t.icon.secondary,marginTop:4},description:{fontSize:14,color:t.text.secondary,marginBottom:16,textAlign:"center"}})),[]);return(0,C.jsxs)(C.Fragment,{children:[t.icon&&(0,C.jsx)("div",{style:e.iconContainer,children:t.icon(t.iconStyle?t.iconStyle:e.icon)}),(0,C.jsx)("div",{style:e.headerContainer,children:(0,C.jsx)("div",{style:e.headerText,children:t.header})}),(0,C.jsx)("div",{style:e.description,children:t.description})]})};function v(t){const{initialPromo:e,steps:n,isUserEligible:v=!0,seenFeatureUserSetting:S,userSettingsStore:I,allowExternalMouseEvents:M,onDismiss:T,onTryFeatureClick:w,onPopupSeen:A,onLearnMore:F,ctaMessage:P,calloutId:W}=t,L=(0,d().tz)(),R=(0,s().IS)((t=>({popupContainer:{background:"light"===t.mode?t.contentBackground:t.surface.wash,borderRadius:8,width:320,padding:"20px 20px 16px",boxShadow:t.shadowMD},button:{display:"flex",alignItems:"center",justifyContent:"center"},dismissButton:{marginTop:10},closeButton:{position:"absolute",top:10,right:10,padding:0,borderRadius:"50%",height:24,width:24,background:t.buttonHoveredBackground},closeButtonHoveredStyle:{backgroundColor:t.buttonPressedBackground},closeButtonIcon:{width:14,height:14,fill:"light"===t.mode?u().M.light.gray[400]:u().M.dark.translucentGray[600]},backButton:{marginRight:8,fontWeight:c().Wy.medium},nextButton:{fontWeight:c().Wy.medium},inactiveDot:{fill:t.icon.tertiary},dot:{width:6,height:6,marginRight:8},footer:{marginLeft:24,marginRight:24,marginBottom:16,marginTop:8,alignItems:"center",height:28,display:"flex"}})),[]),D=(0,g().L)(),[E,z]=(0,i.useState)(0),U=(0,i.useCallback)((()=>{const t=null==I?void 0:I.getSettings();return!t||Boolean(!0===t[S])}),[S,I]),G=(0,o().K8)((()=>!U()&&v&&x().default.state.inAppCalloutStore.getCalloutVisibility(W).canShow||Boolean(t.forceShow)),[W,U,v,t.forceShow]),H=(0,i.useCallback)((()=>{z(E+1),null==F||F()}),[E,F]),O=(0,r().ZC)(G);(0,i.useEffect)((()=>{G&&!O&&(null==A||A())}),[G,A,O]);const J=(0,o().K8)((()=>{var t;return null===(t=x().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.id}),[]),K=(0,r().ZC)(J);return(0,i.useEffect)((()=>{G&&void 0!==K&&J!==K&&T()}),[G,J,K,T]),(0,C.jsx)(b().Ay,{popupType:h().n.Popup,open:G,origin:(0,C.jsx)("div",{style:{position:"absolute",bottom:D+52,right:0}}),placementToOrigin:p().W.Top,alignmentToOrigin:p().C.Center,originGap:15,disableMouseCapture:M,render:()=>{const t=0===E,i=t?(0,C.jsx)(k,{...e}):(0,C.jsx)(B,{...n[E-1]}),o=t?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(j().A,{style:R.button,onClick:H,size:"lg",children:P||(0,C.jsx)(d().sA,{id:"FeatureIntroPopup.learnMore.text",defaultMessage:"Learn more"})}),(0,C.jsx)(m().p,{onClick:T,isLightGray:!0,style:{...R.button,...R.dismissButton},children:(0,C.jsx)(d().sA,{id:"FeatureIntroPopup.dismissButton.text",defaultMessage:"Dismiss"})})]}):(0,C.jsxs)("div",{style:R.footer,children:[(0,C.jsx)("div",{style:{display:"flex"},children:[...Array(n.length)].map(((t,e)=>{let i=R.dot;return i=e===E-1?{...i}:{...i,...R.inactiveDot},e===n.length&&(i={...i,marginRight:0}),(0,a().v)(i)}))}),(0,C.jsxs)("div",{style:{...R.button,marginLeft:"auto"},children:[E>1&&(0,C.jsx)(m().p,{onClick:()=>z(E-1),style:R.backButton,isGray:!0,children:(0,C.jsx)(d().sA,{id:"FeatureIntroPopup.backButton",defaultMessage:"Back"})}),E<n.length&&(0,C.jsx)(m().p,{onClick:()=>z(E+1),style:R.nextButton,isBlue:!0,children:(0,C.jsx)(d().sA,{id:"FeatureIntroPopup.nextButton",defaultMessage:"Next"})}),E===n.length&&(0,C.jsx)(j().A,{onClick:w,children:(0,C.jsx)(d().sA,{id:"FeatureIntroPopup.tryItOut.button",defaultMessage:"Try it out"})})]})]});return(0,C.jsxs)(f().U,{calloutId:W,children:[i,(0,C.jsx)(y().A,{icon:l().V,style:R.closeButton,hoveredStyle:R.closeButtonHoveredStyle,iconStyle:R.closeButtonIcon,disableBackground:!0,onClick:T,ariaLabel:L.formatMessage({id:"FeatureIntroPopup.closeButton.ariaLabel",defaultMessage:"Close"})}),o]})},style:0===E?R.popupContainer:{...R.popupContainer,padding:void 0}})}const S=v}}]);