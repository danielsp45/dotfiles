"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[82120],{132389:(e,t,o)=>{o.d(t,{A:()=>n});o(296540);var r=o(474848);function n(e){const t={display:"inline-block",minWidth:e.size,minHeight:e.size};return"x"===e.axis?t.minHeight=1:"y"===e.axis&&(t.minWidth=1),(0,r.jsx)("div",{style:t})}},134589:(e,t,o)=>{o.d(t,{R:()=>s});o(296540);var r=o(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"3.37 1.43 13.25 15.44",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M9.325 10.466V2.063a.625.625 0 1 1 1.25 0v8.453l1.458-1.458a.625.625 0 1 1 .884.884l-2.5 2.5a.625.625 0 0 1-.884 0l-2.5-2.5a.625.625 0 1 1 .884-.884z"}),(0,r.jsx)("path",{d:"M11.825 6.375H14.5c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-9a.875.875 0 0 1-.875-.875v-7.5c0-.483.392-.875.875-.875h2.575v-1.25H5.5A2.125 2.125 0 0 0 3.375 7.25v7.5c0 1.174.951 2.125 2.125 2.125h9a2.125 2.125 0 0 0 2.125-2.125v-7.5A2.125 2.125 0 0 0 14.5 5.125h-2.675z"})]})},s=(0,o(340498).wt)("squareAndArrowDown",n)},150987:(e,t,o)=>{o.d(t,{A:()=>y});o(898992),o(354520),o(581454),o(737550);var r=o.n(o(844751)),n=o(296540),s=()=>o(970013),l=()=>o(713998),i=()=>o(959013),a=()=>o(496603),u=()=>o(722872),d=()=>o(939740),c=()=>o(89924),p=()=>o(250202),m=o(474848);const y=function(e){let{selectedProperty:t,onAccept:y,schema:h,onClose:g,allowProperty:x,isRelationProperty:f}=e;const v=(0,o(484714).v3)(),b=(0,i().tz)(),[j,A]=(0,n.useState)("");let S=Object.keys(h);const M=S.some(o(443239).u);S=a().Ul(S,(e=>{const t=(0,l()._g)({schema:h,property:e});return t?t.name:""}));const w=M?s().Ho:s().rn;if(S=a().FF(S,w),S.unshift(w),x&&(S=S.filter((e=>{const t=(0,l()._g)({schema:h,property:e});return t&&x(t)}))),j){let e=S.map((e=>{const t=(0,l()._g)({schema:h,property:e});return t&&t.name}));e=r().filter(j,e).map((e=>{let{original:t}=e;return t})),S=S.filter((t=>{const o=(0,l()._g)({schema:h,property:t});return o&&o.name&&e.includes(o.name)}))}const k=j||S.length>o(525432).R8,P=a().oE(S.map((e=>{const o=(0,l()._g)({schema:h,property:e});if(!o)return null;return{key:e,render:r=>(0,m.jsx)(p().G,{...r,propertySchema:o,format:p().e.Name,isChecked:e===t}),action:()=>y(e)}}))),C=[{key:0,render:e=>(0,m.jsx)(c().A,{...e}),items:P}],{device:_}=v,N=k?(0,m.jsx)(c().A,{isInput:!0,children:(0,m.jsx)(o(419357).Ay,{focus:!_.isMobile||void 0,focusAfterAnimation:!0,value:j,onChange:e=>A(e.target.value),placeholder:f?b.formatMessage({defaultMessage:"Search for a relation property…",id:"propertySelectMenu.searchForProperty.relation.placeholder"}):b.formatMessage({defaultMessage:"Search for a property…",id:"propertySelectMenu.searchForProperty.default.placeholder"})})}):null;let R;return R=_.isMobile?{menuType:u().gu.Modal,title:f?b.formatMessage({defaultMessage:"Relation property",id:"propertySelectMenu.mobileMenu.relationProperty.header"}):b.formatMessage({defaultMessage:"Property",id:"propertySelectMenu.mobileMenu.property.header"}),right:(0,m.jsx)(o(480095).CancelMenuText,{}),onClickRight:g,header:N}:{menuType:u().gu.Popup,width:280,maxHeight:480,header:N},(0,m.jsx)(o(928600).A,{...R,children:0===P.length?(0,m.jsx)(c().A,{children:(0,m.jsx)(o(64e3).A,{title:(0,m.jsx)(i().sA,{defaultMessage:"No results",id:"propertySelectMenu.search.noResults.title"})})}):(0,m.jsx)(d().Ay,{type:d().Oh.Vertical,sections:C,onAccept:g,initialFocus:j.length>0?0:void 0})})}},250202:(e,t,o)=>{o.d(t,{G:()=>i,e:()=>l});var r=o(296540),n=()=>o(401497),s=o(474848);let l=function(e){return e[e.Name=0]="Name",e}({});const i=r.forwardRef((function(e,t){const{propertySchema:r,format:i}=e,{name:a,type:u,icon:d}=r,c=(0,o(963589).X)("nds_default_property_noticon"),{isMobile:p}=(0,o(484714).Y0)(),m=(0,n().IS)((e=>({propertyIcon:{fill:e.icon.primary,marginLeft:6,marginRight:2}})),[]),y=(0,n().DP)(),h=i===l.Name?a:o(852353).dC[u];return(0,s.jsx)(o(760217).A,{title:h,icon:(0,s.jsx)(o(743176).zB,{icon:d,type:u,size:p?18:16,theme:y,style:m.propertyIcon,isDefaultNoticonEnabled:c}),...e})}))},274652:(e,t,o)=>{o.d(t,{o:()=>s});var r=o(296540),n=o(474848);const s=r.forwardRef((function(e,t){let{color:r="primary",...s}=e;const l=(0,o(401497).IS)((e=>{const t="blue"===r?o(381349).Ay.blue:"secondary"===r?e.text.secondary:e.text.primary;return{title:{color:t,fill:t},buttonMenuItem:{...s.style,...s.disabled?{cursor:"not-allowed"}:{}}}}),[s.disabled,r,s.style]);return(0,n.jsx)(o(760217).A,{ref:t,...s,title:(0,n.jsx)("div",{style:l.title,children:s.title}),icon:(0,n.jsx)(o(8980).I,{icon:o(617668).plusIcon,style:{fill:r}}),style:l.buttonMenuItem})}))},314660:(e,t,o)=>{o.d(t,{f:()=>n});var r=()=>o(246826);function n(e){const{collectionViewStore:t,update:o,transaction:n}=e;r().zv({store:t.getQueryStore(),data:o,transaction:n})}},320865:(e,t,o)=>{o.d(t,{A:()=>n});o(296540);var r=o(474848);const n=function(){return(0,r.jsx)(o(678553).Ay,{title:(0,r.jsx)(o(331542).A,{})})}},444823:(e,t,o)=>{o.r(t),o.d(t,{PersonPropertyModule:()=>G});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(581454);var r=o(296540),n=()=>o(402014),s=()=>o(484714),l=()=>o(56366),i=()=>o(401497),a=()=>o(764880),u=()=>o(187174),d=()=>o(212050),c=()=>o(437607),p=()=>o(798880),m=()=>o(919709),y=()=>o(959013),h=()=>o(496603),g=()=>o(534177),x=()=>o(284371),f=()=>o(720665),v=()=>o(458366),b=()=>o(722872),j=()=>o(963589),A=()=>o(554283),S=()=>o(106628),M=()=>o(962730),w=()=>o(653048),k=()=>o(422464),P=()=>o(859118),C=()=>o(234359),_=()=>o(704152),N=()=>o(760217),R=()=>o(406699),T=()=>o(285790),B=()=>o(419357),I=()=>o(331542),O=()=>o(928600),V=()=>o(939740),z=()=>o(64e3),W=()=>o(89924),L=()=>o(125565),U=()=>o(453697),F=()=>o(862139),H=()=>o(457688),D=o(474848);const E=20,G=r.memo((function(e){let{property:t,store:n,propertyValues:s,propertySchema:l,module:a,format:u}=e;const[d,c]=(0,o(997583).z)(),p=(0,o(255824).a)(),m={style:"large"};(0,o(778781).E2)(a)&&a.style&&(m.style=a.style);const h="large"===m.style?200:164,v=(0,r.useMemo)((()=>Math.floor((c+4)/(h+4))),[h,c]),b="person"===(null==l?void 0:l.type)&&((0,g().O9)(l.limit)&&0===s.length||(0,f().pN)(l.limit)),[j,A]=(0,r.useState)(!1),S=1===v?8:5,M=Math.max(1,S*v-(b?1:0)),w=(0,i().IS)((e=>({showAllFewerButton:{borderRadius:6,padding:"2px 8px",marginTop:4,display:"inline-flex",flexWrap:"nowrap",gap:4,color:e.text.secondary,fontWeight:x().Wy.medium,fontSize:14,alignItems:"center",justifyContent:"start"}})),[]),k=(0,D.jsx)(_().A,{onClick:()=>A(!j),style:w.showAllFewerButton,children:j?(0,D.jsx)(y().sA,{id:"PersonPropertySectionValues.showMoreButton.text",defaultMessage:"Show fewer"}):(0,D.jsx)(y().sA,{id:"PersonPropertySectionValues.showFewerButton.text",defaultMessage:"Show more"})}),P=s.length>0;return(0,D.jsxs)("div",{ref:d,children:[(0,D.jsx)(o(817942).WL,{minWidth:P?h:void 0,style:{gridGap:4,marginTop:P&&!p?4:0},children:(0,D.jsx)(K,{values:s,blockStore:n,propertyId:t,propertySchema:l,itemsShownPerRow:v,showAddButton:b,limit:j?void 0:M,setShowingAllValues:A,renderOptions:m,format:u})}),s.length>M&&k]})}));function K(e){let{values:t,blockStore:n,propertyId:i,propertySchema:u,itemsShownPerRow:d,showAddButton:p,limit:y,setShowingAllValues:x,renderOptions:v,format:b}=e;const j=(0,s().v3)(),A=(0,s().Y0)(),{collectionContextStore:S}=(0,r.useContext)(C().L8),w=(0,r.useCallback)((function(e){o(751156).createAndCommit({userAction:"PersonPropertyModule.updateValue",environment:j,canUndo:!0,perform:t=>{const r=o(713998).RV(e);o(319975).R9({environment:j,store:n.getPropertyStore(i),value:r,transaction:t})}});const t=n.getAssociatedCollectionStore();S&&u&&t&&(0,o(299709).E)({environment:j,collectionContextStore:S,block_id:n.id,property:i,property_type:null==u?void 0:u.type,from:"property_module",collection_id:t.id,isFromBulkActionsToolbar:!1,value_count:e.length})}),[n,S,j,i,u]),k=(0,r.useCallback)((function(e){w(t.filter((t=>{if((0,a().Pu)(e)){if((0,a().Pu)(t))return e.id!==t.id}else if((0,m().MMZ)(e)){if((0,m().MMZ)(t))return e!==t}else if((0,c().GL)(e)){if("object"==typeof t&&(0,c().GL)(t))return e.id!==t.id}else(0,g().HB)(e);return!0})))}),[w,t]),P=(0,r.useCallback)((function(e){w([...t,e])}),[w,t]),N=(0,r.useCallback)((function(e){w([e])}),[w]),[T,B]=(0,r.useState)(""),I=(0,r.useMemo)((()=>new(o(463830).A)),[]),O=t.length&&t.length<=d-1?(0,h().y1)(d-t.length-1).map((e=>(0,D.jsx)("div",{},e))):[],V=(0,l().K8)((()=>n.isTemplate()),[n]),z=(0,l().K8)((()=>n.canEdit()&&!n.isNonEditableState()),[n]);if((0,f().pN)(u))return null;if("created_by"===(null==u?void 0:u.type)||"last_edited_by"===(null==u?void 0:u.type))return(0,D.jsx)(Y,{personValues:t,disabled:!0,onRemove:h().lQ,renderOptions:v,propertySchema:u});const W=y?t.slice(0,y):t;return z?(0,D.jsxs)(D.Fragment,{children:[(0,g().O9)(u.limit)?(0,D.jsx)(R().Ay,{buttonPopupStore:I,alignmentToOrigin:M().C.Start,onClose:()=>{B("")},popupType:A.isMobile?R().z7.SlideUp:R().z7.Popup,renderOrigin:e=>(0,D.jsx)(_().A,{...e,children:(0,D.jsx)(Y,{personValues:t,onRemove:k,disabled:!z,renderOptions:v,propertySchema:u})}),render:()=>(0,D.jsx)(Q,{query:T,setQuery:B,current:t,onAdd:e=>{N(e),I.setState({open:!1})},inTemplate:V,limit:u.limit,format:b})}):(0,D.jsx)(Y,{personValues:W,onRemove:k,disabled:!z,renderOptions:v,propertySchema:u}),p?(0,D.jsx)(q,{renderOptions:v,isEmpty:!t.length,menu:(0,D.jsx)(Q,{query:T,setQuery:B,current:t,onAdd:P,inTemplate:V,limit:u.limit,format:b}),onClose:()=>{B(""),x(!1)},onClick:()=>{(0,g().O9)(y)&&x(!0)}}):null,O]}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Y,{personValues:W,disabled:!0,onRemove:h().lQ,renderOptions:v,propertySchema:u}),O]})}const q=r.memo((function(e){let{menu:t,onClick:n,onClose:l,renderOptions:a,isEmpty:u}=e;const d=(0,s().Y0)(),c=(0,i().IS)((e=>({button:{borderRadius:6,padding:"5px 0 5px 4px",display:"flex",flexWrap:"nowrap",gap:4,color:e.text.tertiary,fontSize:14,alignItems:"center"},buttonBorder:{padding:"large"===a.style?11:5,borderRadius:9999,border:`1px solid ${e.stroke.secondary}`},icon:{color:e.icon.tertiary}})),[a.style]),{baseStyles:p}=(0,r.useContext)(C().L8);return(0,D.jsx)(R().Ay,{alignmentToOrigin:M().C.Start,onClick:n,onClose:l,popupType:d.isMobile?R().z7.SlideUp:R().z7.Popup,renderOrigin:e=>(0,D.jsx)(_().A,{...e,style:u?p.emptyButtonStyle:c.button,testId:"person_property_module__add_button",children:u?(0,D.jsx)(P().ao,{}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{style:c.buttonBorder,children:(0,o(689094).W)({width:12,...c.icon})}),(0,D.jsx)(y().sA,{id:"personProperty.addPersonButtonText",defaultMessage:"Add person"})]})}),render:()=>t})}));function Q(e){let{query:t,setQuery:o,onAdd:n,current:i,inTemplate:d,limit:x,format:f}=e;const A=(0,s().Y0)(),M=(0,y().tz)(),P=(0,r.useMemo)((()=>new Set(i.map((e=>{if((0,a().Pu)(e))return e.id})).filter(g().O9))),[i]),C=function(e){let{query:t,limit:o}=e;const r=(0,s().v3)(),n=(0,y().tz)(),l=(0,j().X)("edge_cache_person_property"),[i]=(0,u().Yb)((async()=>{const e=await S().T.searchActions.load();return(await e.searchSpaceUsers({environment:r,query:t,membersOnly:!1,placeSelfFirst:""===t||e.isPersonalPronoun(t,n.locale),limit:o,shouldUseEdgeCacheRollout:l})).map((e=>(0,a().D3)({table:p().oo,value:e})))}),[r,t,n.locale,o,l]);return i}({query:t,limit:E+P.size}),_=function(e){let{query:t,limit:o}=e;const r=(0,y().tz)(),n=(0,j().X)("group_mentions_in_person_property_values"),[s]=(0,u().Yb)((async()=>n?(await S().T.searchActions.load()).searchSpaceGroups({query:t,intl:r,limit:o}):[]),[n,r,o,t]);return s}({query:t,limit:E+P.size}),R=(0,r.useCallback)((e=>e.filter((e=>!P.has(e.id)))),[P]),T=(0,D.jsx)(W().A,{isInput:!0,style:{padding:8},children:(0,D.jsx)(B().Ay,{customElementAttributes:{"data-testid":"person_property_module__search_input"},textWrapperStyle:{margin:0},inputOuterStyle:{margin:A.isMobile?"0 16px":void 0},focus:!A.isMobile||void 0,focusAfterAnimation:!0,value:t||"",onChange:e=>o(e.target.value),placeholder:M.formatMessage({id:"personPropertySectionValues.search.placeholder",defaultMessage:"Search for a person..."})})}),L=m().Wov.filter((e=>!i.includes(e))),U={key:"shortcuts",items:L.length>0?L.map((e=>({key:`relative_person_shortcut_${e}`,action:()=>{},render:t=>(0,D.jsx)(N().A,{...t,title:(0,D.jsx)(k().W,{templateVariableType:e}),inline:!0,onClick:()=>{n(e)}})}))):[{key:"no_template_variables",action:()=>{},render:e=>(0,D.jsx)(z().A,{...e,style:{margin:"2px 0px 2px 6px",fontSize:12},title:(0,D.jsx)(y().sA,{id:"database.personPropertyMenu.noShorcuts.message",defaultMessage:"No shortcuts"})})}],render:e=>(0,D.jsx)(W().A,{...e,title:"Shortcuts"})},G=(0,l().K8)((()=>{if(!(0,v().NN)(f))return(0,w().tF)(x)}),[f,x]),K=(0,l().K8)((()=>{if(!(0,v().NN)(f))return(0,w().Rf)(x)}),[f,x]),[q,Q]=(0,r.useMemo)((()=>{let e;const t=[],r=[];if("pending"===C.status||"idle"===C.status)t.push({key:"user_loading",action:()=>{},render:e=>(0,D.jsx)(z().A,{...e,title:(0,D.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,D.jsx)(I().A,{})})})});else if("resolved"===C.status){const r=R(C.value??[]);e=r.length>0?0:void 0,0===r.length?t.push({key:"no_results",action:()=>{},render:e=>(0,D.jsx)(z().A,{...e,title:(0,D.jsx)(y().sA,{id:"PersonPropertySectionValues.searchMenu.noResults",defaultMessage:"No results."})})}):t.push(...r.map((e=>({key:e.id,action:()=>{n(e.pointer),o("")},render:t=>(0,D.jsx)(H().A,{...t,actor:(0,a().A7)(e)})}))))}else"rejected"===C.status?t.push({key:"no_results",action:()=>{},render:e=>(0,D.jsx)(z().A,{...e,title:(0,D.jsx)(y().sA,{id:"PersonPropertySectionValues.searchMenu.somethingWentWrong",defaultMessage:"Something went wrong."})})}):(0,g().HB)(C);return"pending"===_.status||"idle"===_.status?r.push({key:"group_loading",action:()=>{},render:e=>(0,D.jsx)(z().A,{...e,title:(0,D.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,D.jsx)(I().A,{})})})}):"resolved"===_.status?_.value.length>0&&r.push(..._.value.map((e=>{const t=e.pointer,{spacePermissionGroupId:r,spaceId:s}=(0,c().HT)(t.id),l={id:r,spaceId:s,table:c().n};return{key:r,action:()=>{n(l),o("")},render:t=>(0,D.jsx)(F()._,{menuListItemProps:t,group:e})}}))):"rejected"===_.status?r.push({key:"no_results",action:()=>{},render:e=>(0,D.jsx)(z().A,{...e,title:(0,D.jsx)(y().sA,{id:"PersonPropertySectionValues.searchMenu.somethingWentWrong",defaultMessage:"Something went wrong."})})}):(0,g().HB)(_),[[{key:"userResults",items:t.slice(0,E),render:e=>(0,D.jsx)(W().A,{...e,title:G})},...r.length>0?[{key:"groupResults",items:r.slice(0,E),render:e=>(0,D.jsx)(W().A,{...e,title:K})}]:[]],e]}),[K,_,n,R,o,G,C]);return(0,D.jsx)(O().A,{menuType:A.isMobile?b().gu.ActionSheet:b().gu.Popup,header:T,width:275,maxHeight:400,minWidth:275,children:(0,D.jsx)(V().Ay,{type:V().Oh.Vertical,sections:(0,h().oE)([d?U:void 0,...q]),initialFocus:Q})})}const Y=r.memo((function(e){let{personValues:t,onRemove:o,disabled:s,renderOptions:l,propertySchema:i}=e;const u=(0,r.useCallback)((e=>{"person"===i.type&&i.limit||(0,n().SQ)({event:e,context:n().y$.Click,callback:h().lQ})}),[i]);return 0===t.length&&s?(0,D.jsx)("div",{style:{fontSize:14,paddingLeft:6},children:(0,D.jsx)(P().ao,{})}):(0,D.jsx)(D.Fragment,{children:t.map((e=>(0,a().Pu)(e)?(0,D.jsx)(Z,{actorOrGroupPointer:e,handleRemove:o,disabled:s,renderOptions:l,onClick:u},e.id):(0,m().MMZ)(e)?(0,D.jsx)($,{value:e,handleRemove:o,disabled:s},`template_variable_${e}`):(0,c().GL)(e)?(0,D.jsx)(Z,{actorOrGroupPointer:e,handleRemove:o,disabled:s,renderOptions:l,onClick:u},e.id):void(0,g().HB)(e)))})})),$=r.memo((function(e){let{value:t,handleRemove:r,disabled:n}=e;const s=(0,y().tz)(),[l,a]=(0,A().B)(),u=(0,i().IS)((e=>({actorName:{fontWeight:x().Wy.regular,color:e.blueColor,lineHeight:1.1},uiToken:{display:"flex",gap:10,alignItems:"center",background:a&&!n?e.outlineBlueButtonPressedBackground:e.outlineBlueButtonHoveredBackground,color:e.blueColor,justifyContent:"space-between",position:"relative",padding:"5px 28px 5px 5px",borderRadius:4},avatar:{borderRadius:6,display:"flex",flexWrap:"nowrap",gap:4,fontSize:14,alignItems:"center"},avatarBorder:{padding:8,borderRadius:9999,background:e.palette.uiBlue[a&&!n?100:200],color:e.palette.uiBlue[600]}})),[n,a]);return(0,D.jsxs)("div",{ref:l,style:u.uiToken,children:[(0,D.jsx)("div",{style:u.avatar,children:(0,D.jsx)("div",{style:u.avatarBorder,children:(0,o(91451).z)({width:14})})}),(0,D.jsx)("div",{style:{display:"flex",gap:4,flexGrow:1},children:(0,D.jsx)(L().A,{className:"notranslate",style:u.actorName,isMultiline:!0,children:(0,D.jsx)(y().sA,{id:"PropertyModulePersonTemplateVariableValue.templateVariables.text.me",defaultMessage:"Person who{br}duplicated page",values:{br:(0,D.jsx)("br",{})}})})}),a&&!n?(0,D.jsx)(T().A,{icon:d().u,ariaLabel:s.formatMessage({id:"PropertyModulePersonTemplateVariableValue.close",defaultMessage:"Close"}),style:{position:"absolute",right:4,top:"50%",transform:"translateY(-50%)",width:20,height:20},iconStyle:{width:11},onClick:()=>r(t)}):null]})})),Z=r.memo((function(e){let{actorOrGroupPointer:t,handleRemove:n,disabled:s,renderOptions:a,onClick:u}=e;const m=(0,y().tz)(),{store:h}=(0,r.useContext)(C().L8),g="large"===a.style?36:24,f="large"===a.style?10:4,v=(0,l().K8)((()=>{const e=null==h?void 0:h.getRecordModel;if(e){if((0,c().GL)(t)){return e((0,c().bj)({spacePermissionGroupId:t.id,spaceId:t.spaceId}))}return e(t)}}),[t,null==h?void 0:h.getRecordModel]),b=(0,l().K8)((()=>{if(t&&t.table===p().oo)return(0,o(384100).l5)({blockStore:h,actorPointer:t})}),[t,h]),j=(0,l().K8)((()=>(null==v?void 0:v.table)===c().n?null==v?void 0:v.getName():null==v?void 0:v.getDisplayName(m)),[v,m]),S=(0,l().O$)(o(765957).AppStoreCurrentSpaceStore),M=(0,o(741737).c)({spaceStore:S,viewedUserStore:b}),[w,k]=(0,A().B)(),P=(0,i().IS)((e=>({actorName:{fontWeight:x().Wy.medium},container:{display:"flex",gap:f,alignItems:"center",justifyContent:"space-between",position:"relative",padding:"5px 28px 5px 5px",borderRadius:4,background:k&&!s?e.buttonHoveredBackground:void 0}})),[f,s,k]),_=(0,l().K8)((()=>(null==v?void 0:v.table)===c().n?(0,D.jsx)(o(580648).o,{group:v,size:g}):null!=v&&v.isUser()?M?(0,D.jsx)(o(436525).D,{userStore:b,children:(0,D.jsx)(U().A,{userValue:v,size:g})}):(0,D.jsx)(U().A,{userValue:v,size:g}):null!=v&&v.isBot()?(0,D.jsx)(o(256863).A,{botValue:v,size:g}):null),[v,M,b,g]);return(0,D.jsxs)("div",{ref:w,onClick:u,style:P.container,children:[_,(0,D.jsx)("div",{style:{display:"flex",gap:4,flexGrow:1,...x().RC},children:(0,D.jsx)(L().A,{className:"notranslate",style:P.actorName,showTooltipWhenTruncated:!M,children:j})}),k&&!s?(0,D.jsx)(T().A,{icon:d().u,ariaLabel:m.formatMessage({id:"PropertyModulePersonValue.removeUser.ariaLabel",defaultMessage:"Remove {name}"},{name:j}),style:{position:"absolute",right:4,top:"50%",transform:"translateY(-50%)",width:20,height:20},iconStyle:{width:11},onClick:()=>n(t)}):null]})}))},457688:(e,t,o)=>{o.d(t,{A:()=>v,S:()=>x});var r=o(296540),n=()=>o(484714),s=()=>o(56366),l=()=>o(764880),i=()=>o(959013),a=()=>o(962730),u=()=>o(678553),d=()=>o(554509),c=()=>o(453697),p=o(474848);const m="UIRegular-14px/Regular",y="UIRegular-14px/Semibold",h="iOS/Callout-16px/Regular",g=r.forwardRef(((e,t)=>{const{actor:r,userTitle:i,defaultUserTitle:d="name_only",useEmailAsTooltip:m,tooltip:y,tooltipPlacement:h,hoveredStyle:g,disabledFeedback:v,customUserTitleStyles:b,iconSizeOverride:j}=e,A=(0,n().v3)(),S=(0,s().K8)((()=>r.asActor&&r.isUser()?r.email:void 0),[r]),M=m&&S?S:y,w=j||(A.device.isMobile?u().nd:u().pg),k="name_and_email"===d||"name_and_email_unless_right"===d&&!Boolean(e.right)?(0,p.jsx)(f,{actor:null==r?void 0:r.asActor,customStyles:b}):(0,p.jsx)(x,{customStyles:b,actor:null==r?void 0:r.asActor}),P=i??k;let C;return(0,l().H3)(r)?C=(0,p.jsx)(o(256863).A,{botValue:null==r?void 0:r.asActor,size:w}):(0,l().ps)(r)?C=(0,p.jsx)(c().A,{userValue:null==r?void 0:r.asActor,size:w}):(0,l().h2)(r)?C=(0,p.jsx)(c().A,{userValue:void 0,size:w}):(0,o(534177).HB)(r),(0,p.jsx)(o(859428).A,{placement:h??a().W.Bottom,alignment:a().C.Start,textWrap:!0,render:r=>(0,p.jsx)(o(760217).A,{...(0,o(553965).A)(r,e),icon:C,title:P,disabledFeedback:v,className:"notranslate",right:e.right,ref:t,hoveredStyle:g}),disableTooltip:!M,renderTooltip:()=>M})}));function x(e){const{actor:t,customStyles:o}=e,r=(0,n().v3)(),l=(0,i().tz)(),a=(0,s().K8)((()=>t&&t.id===r.currentUser.id),[r,t]),u=(0,s().K8)((()=>t&&t.getDisplayName(l)),[t,l]),c=r.device.isMobile?h:m;return a?(0,p.jsx)(i().sA,{id:"UserMenuItem.fullName.authorLabel",defaultMessage:"<author>{fullName}</author> <you>(You)</you>",values:{author:e=>(0,p.jsx)(d().D,{as:"span",styleName:c,customStyles:o,children:e}),fullName:u,you:e=>(0,p.jsx)(d().D,{as:"span",colorName:"secondary",styleName:c,customStyles:o,children:e})}}):u?(0,p.jsx)(d().D,{styleName:c,customStyles:o,children:u}):(0,p.jsx)(d().D,{styleName:c,customStyles:o,children:(0,p.jsx)(i().sA,{id:"UserMenuItem.fullName.unknownAuthorLabel",defaultMessage:"Unknown author"})})}function f(e){const t=(0,n().v3)(),{actor:o,customStyles:r}=e,l=(0,i().tz)(),a=(0,s().K8)((()=>o&&o.getDisplayName(l)),[o,l]),{email:u,showEmail:c}=(0,s().K8)((()=>{const e=o&&o.asActor&&o.isUser()?o.email:void 0;return{email:e,showEmail:a!==e}}),[o,a]),g=t.device.isMobile?"iOS/Callout-16px/Regular":y,x=t.device.isMobile?h:m;return a?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d().D,{as:"span",styleName:g,customStyles:r,children:a}),c&&(0,p.jsx)(d().D,{as:"span",styleName:x,customStyles:r,children:` ${u}`})]}):(0,p.jsx)(d().D,{styleName:y,customStyles:r,children:(0,p.jsx)(i().sA,{id:"UserMenuItem.fullName.unknownAuthorLabel",defaultMessage:"Unknown author"})})}g.displayName="UserMenuItem";const v=g},536583:(e,t,o)=>{o.d(t,{d:()=>n});o(296540);const r={viewBox:"0 0 20 20",fittedViewBox:"2.88 2.32 14.24 15.36",svg:(0,o(474848).jsx)("path",{d:"M9.294 2.325h3.103c.484 0 .948.192 1.29.534l2.897 2.898c.343.342.535.806.535 1.29v5.903a1.825 1.825 0 0 1-1.825 1.825H12.53v1.075a1.825 1.825 0 0 1-1.825 1.825h-6A1.825 1.825 0 0 1 2.88 15.85v-8.8c0-1.008.817-1.825 1.825-1.825H7.47V4.15c0-1.008.817-1.825 1.825-1.825M9.1 5.76l2.897 2.897c.342.342.534.806.534 1.29v3.578h2.763a.575.575 0 0 0 .575-.575V7.3h-1.975a1.75 1.75 0 0 1-1.75-1.75V3.575h-2.85a.575.575 0 0 0-.575.575v1.318q.208.12.38.292m6.16.44-2.016-2.016V5.55c0 .359.29.65.65.65zm-10.554.275a.575.575 0 0 0-.575.575v8.8c0 .318.258.575.575.575h6a.575.575 0 0 0 .575-.575V10.2H9.306a1.75 1.75 0 0 1-1.75-1.75V6.475zm3.95.609V8.45c0 .359.291.65.65.65h1.366z"})},n=(0,o(340498).wt)("docOnDoc",r)},612900:(e,t,o)=>{o.d(t,{u:()=>s});var r=()=>o(645873);const n=new(r().O2)("PulsingWrapper",(async()=>o.e(45248).then(o.bind(o,673962)))),s=(0,r().jQ)(n,(e=>e.PulsingWrapper),{renderLoading:(e,t)=>t.children})},817942:(e,t,o)=>{o.d(t,{A5:()=>p,MR:()=>f,Mx:()=>a,Pb:()=>h,WL:()=>x,hg:()=>u,kZ:()=>g,pv:()=>d,vV:()=>y});o(581454);var r=o.n(o(32485)),n=o(296540),s=()=>o(11048),l=()=>o(455994),i=o(474848);const a=n.forwardRef((function(e,t){const{children:n,type:a,gap:u,withBottomPadding:d,style:c,onMouseDown:p,onClick:m,onDoubleClick:y,onContextMenu:h,suppressMargin:g}=e,x=(0,o(551619).n$)(a),f=(0,o(56366).K8)((()=>l().A.getPanelState("peek").isOpen&&"static_sidebar"===l().A.getPanelState("peek").displayStyle),[]);return(0,i.jsx)(s().A,{name:"PageLayout",children:(0,i.jsx)("div",{className:r()("layout",{"layout-wide":"wide"===a,"layout-wide-right-margin-expanded":"wide-right-margin-expanded"===a,"layout-side-peek":"side-peek"===a,"layout-center-peek":"center-peek"===a&&!f,"layout-center-peek-with-layout-panel":"center-peek"===a&&f,"layout-home":"home"===a,"layout-home-phone":"home-phone"===a,"layout-home-redesign-desktop":"home-redesign-desktop"===a,"layout-form":"form"===a,"layout-form-viewer":"form-viewer"===a,"layout-form-viewer-embed":"form-viewer-embed"===a,"layout-phone":"phone"===a,"layout-tablet":"tablet"===a,"layout-template-preview":"template-preview"===a,"layout-chat":"chat"===a,"layout-layout-editor":"layout-editor"===a,"layout-layout-editor-wide":"layout-editor-wide"===a,"layout-layout-editor-narrow":"layout-editor-narrow"===a,"layout-marketplace":"marketplace"===a,"layout-marketplace-mobile":"marketplace-mobile"===a,"layout-team-home":"team-home"===a,"layout-team-home-mobile":"team-home-mobile"===a,"layout-create-post":"create-post"===a,"layout-fullscreen-ai":"fullscreen-ai"===a,"layout-narrowscreen-ai":"narrowscreen-ai"===a,"layout-presentation-mode":"presentation-mode"===a,"layout-person-profile":"person-profile"===a,"layout-suppress-margin":g}),style:{paddingBottom:d?x:void 0,gap:u,...c},ref:t,onMouseDown:p,onClick:m,onDoubleClick:y,onContextMenu:h,children:n})})})),u="layout-content",d="layout-full",c="layout-margin-right",p="hide-scrollbar",m="layout-column",y=n.forwardRef((function(e,t){return(0,i.jsx)(s().A,{name:"PageLayoutContent",children:(0,i.jsx)("div",{className:r()(u,e.className),style:e.style,ref:t,children:e.children})})}));function h(e){return(0,i.jsx)(s().A,{name:"PageLayoutFull",children:(0,i.jsx)("div",{className:d,style:e.style,children:e.children})})}function g(e){return(0,i.jsx)(s().A,{name:"PageLayoutMarginRight",children:(0,i.jsx)("div",{className:c,style:{...e.style,pointerEvents:"none"},children:e.children})})}function x(e){return(0,i.jsx)(s().A,{name:"PageLayoutColumn",children:(0,i.jsx)("div",{className:r()(m,e.className),style:{"--min-column-width":e.minWidth?`${e.minWidth}px`:"100%",...e.style},children:e.children})})}function f(e){return(0,i.jsx)(s().A,{name:"PageLayoutTwoColumn",children:(0,i.jsxs)(x,{minWidth:e.minWidth,className:e.className,style:e.style,children:[e.left,e.right]})})}},933117:(e,t,o)=>{o.d(t,{A:()=>m});o(944114),o(898992),o(803949),o(581454);var r=o(296540),n=()=>o(496603),s=()=>o(534177),l=()=>o(722872),i=()=>o(377586),a=()=>o(928600),u=()=>o(939740),d=()=>o(480095),c=()=>o(89924),p=o(474848);const m=function(e){let{renderOrigin:t,onClick:r,items:n,getKey:s,renderItem:i,selectedItem:a,onSelect:u,dontCloseParentOnSelect:d,menuTypeOverride:c,menuTitle:m,width:y,minWidth:x,disabled:f,originGap:v,buttonPopupStore:b,sameWidthAsOrigin:j}=e;const A=(0,o(56366).uB)(b,o(463830).A),S=c??(o(780054).A.isMobile?l().gu.Modal:l().gu.Popup);return(0,p.jsx)(o(406699).Ay,{popupType:g(S),bottomSheetInitialState:"half",renderOrigin:t,buttonPopupStore:A,placementToOrigin:o(700250).UV.Bottom,onClick:r,render:e=>(0,p.jsx)(h,{parent:e,items:n,getKey:s,renderItem:i,selectedItem:a,onSelect:u,dontCloseParentOnSelect:d,menuType:S,menuTitle:m,width:y,minWidth:x}),disabled:f,originGap:v,sameWidthAsOrigin:j})};function y(e,t,o,n,s,l,i,a){return{key:0,render:e=>(0,r.createElement)(c().A,{...e,key:t,topBorder:t>0}),items:e.map((e=>({key:n(e),render:t=>s({...t,value:e,key:n(e),selectedItem:l}),action:()=>{!function(e,t,o){t!==e&&o(e)}(e,l,i),a||o.close()}})))}}function h(e){let{parent:t,items:o,getKey:r,renderItem:i,selectedItem:c,onSelect:m,dontCloseParentOnSelect:h,menuType:g,menuTitle:x,width:f,minWidth:v}=e;const b=[];if(function(e){return e.length>0&&e[0]instanceof Array}(o))o.forEach(((e,o)=>{const n=y(e,o,t,r,i,c,m,h);b.push(n)}));else{const e=y(o,0,t,r,i,c,m,h);b.push(e)}const j=(0,p.jsx)(u().Ay,{type:u().Oh.Vertical,initialFocus:n().SL(n().Bq(o),(e=>n().n4(e,c))),sections:b});let A;switch(g){case l().gu.ActionSheet:A={menuType:l().gu.ActionSheet};break;case l().gu.Modal:A={menuType:l().gu.Modal,title:x,right:(0,p.jsx)(d().DoneMenuText,{}),onClickRight:t.close};break;case l().gu.Popup:A={menuType:l().gu.Popup,width:f||160,minWidth:v};break;default:(0,s().HB)(g)}return(0,p.jsx)(a().A,{...A,children:j})}function g(e){switch(e){case l().gu.ActionSheet:return i().n.SlideUp;case l().gu.Modal:return i().n.BottomSheet;case l().gu.Popup:return i().n.Popup}}},992510:(e,t,o)=>{o.d(t,{A:()=>l});o(296540);var r=()=>o(959013),n=()=>o(250202),s=o(474848);const l=function(e){const t=(0,o(484714).v3)(),{device:l}=t;if(l.isMobile)return e.propertySchema?(0,s.jsx)(n().G,{propertySchema:e.propertySchema,onClick:e.onClick,focused:!1,format:n().e.Name,showExtensionArrow:!e.disabled}):(0,s.jsx)(o(760217).A,{focused:!1,title:(0,s.jsx)(r().sA,{defaultMessage:"Property",id:"database.mobileFilterAndSortMenu.property.buttonMenuItem.label"})});{const t=e.propertySchema&&(0,s.jsx)(o(398217).mA,{propertySchema:e.propertySchema,showIcon:!0,style:{lineHeight:1.4}}),n=(0,s.jsx)(r().sA,{defaultMessage:"Property",id:"database.filterAndSortMenu.propertyButton.label"});return(0,s.jsx)(o(272630).A,{title:t,placeholder:n,onClick:e.onClick,disabled:e.disabled,disableMargins:e.disableMargins,desktopStyle:e.textWrapperStyle})}}}}]);