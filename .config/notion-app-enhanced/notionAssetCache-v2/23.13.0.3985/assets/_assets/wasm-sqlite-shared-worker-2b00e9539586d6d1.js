(()=>{var e,t,n={51601:(e,t,n)=>{"use strict";n(413611);const a=Symbol("Comlink.proxy"),i=Symbol("Comlink.endpoint"),r=Symbol("Comlink.releaseProxy"),s=Symbol("Comlink.finalizer"),o=Symbol("Comlink.thrown"),c=e=>"object"==typeof e&&null!==e||"function"==typeof e,l=new Map([["proxy",{canHandle:e=>c(e)&&e[a],serialize(e){const{port1:t,port2:n}=new MessageChannel;return u(e,t),[n,[n]]},deserialize:e=>(e.start(),d(e))}],["throw",{canHandle:e=>c(e)&&o in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function u(e,t=globalThis,n=["*"]){t.addEventListener("message",(function i(r){if(!r||!r.data)return;if(!function(e,t){for(const n of e){if(t===n||"*"===n)return!0;if(n instanceof RegExp&&n.test(t))return!0}return!1}(n,r.origin))return void console.warn(`Invalid origin '${r.origin}' for comlink proxy`);const{id:c,type:l,path:d}=Object.assign({path:[]},r.data),p=(r.data.argumentList||[]).map(S);let h;try{const t=d.slice(0,-1).reduce(((e,t)=>e[t]),e),n=d.reduce(((e,t)=>e[t]),e);switch(l){case"GET":h=n;break;case"SET":t[d.slice(-1)[0]]=S(r.data.value),h=!0;break;case"APPLY":h=n.apply(t,p);break;case"CONSTRUCT":h=function(e){return Object.assign(e,{[a]:!0})}(new n(...p));break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;u(e,n),h=function(e,t){return w.set(e,t),e}(t,[t])}break;case"RELEASE":h=void 0;break;default:return}}catch(m){h={value:m,[o]:0}}Promise.resolve(h).catch((e=>({value:e,[o]:0}))).then((n=>{const[a,r]=v(n);t.postMessage(Object.assign(Object.assign({},a),{id:c}),r),"RELEASE"===l&&(t.removeEventListener("message",i),f(t),s in e&&"function"==typeof e[s]&&e[s]())})).catch((e=>{const[n,a]=v({value:new TypeError("Unserializable return value"),[o]:0});t.postMessage(Object.assign(Object.assign({},n),{id:c}),a)}))})),t.start&&t.start()}function f(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function d(e,t){const n=new Map;return e.addEventListener("message",(function(e){const{data:t}=e;if(!t||!t.id)return;const a=n.get(t.id);if(a)try{a(t)}finally{n.delete(t.id)}})),b(e,n,[],t)}function p(e){if(e)throw new Error("Proxy has been released and is not useable")}function h(e){return q(e,new Map,{type:"RELEASE"}).then((()=>{f(e)}))}const m=new WeakMap,g="FinalizationRegistry"in globalThis&&new FinalizationRegistry((e=>{const t=(m.get(e)||0)-1;m.set(e,t),0===t&&h(e)}));function b(e,t,n=[],a=function(){}){let s=!1;const o=new Proxy(a,{get(a,i){if(p(s),i===r)return()=>{!function(e){g&&g.unregister(e)}(o),h(e),t.clear(),s=!0};if("then"===i){if(0===n.length)return{then:()=>o};const a=q(e,t,{type:"GET",path:n.map((e=>e.toString()))}).then(S);return a.then.bind(a)}return b(e,t,[...n,i])},set(a,i,r){p(s);const[o,c]=v(r);return q(e,t,{type:"SET",path:[...n,i].map((e=>e.toString())),value:o},c).then(S)},apply(a,r,o){p(s);const c=n[n.length-1];if(c===i)return q(e,t,{type:"ENDPOINT"}).then(S);if("bind"===c)return b(e,t,n.slice(0,-1));const[l,u]=y(o);return q(e,t,{type:"APPLY",path:n.map((e=>e.toString())),argumentList:l},u).then(S)},construct(a,i){p(s);const[r,o]=y(i);return q(e,t,{type:"CONSTRUCT",path:n.map((e=>e.toString())),argumentList:r},o).then(S)}});return function(e,t){const n=(m.get(t)||0)+1;m.set(t,n),g&&g.register(e,t,e)}(o,e),o}function y(e){const t=e.map(v);return[t.map((e=>e[0])),(n=t.map((e=>e[1])),Array.prototype.concat.apply([],n))];var n}const w=new WeakMap;function v(e){for(const[t,n]of l)if(n.canHandle(e)){const[a,i]=n.serialize(e);return[{type:"HANDLER",name:t,value:a},i]}return[{type:"RAW",value:e},w.get(e)||[]]}function S(e){switch(e.type){case"HANDLER":return l.get(e.name).deserialize(e.value);case"RAW":return e.value}}function q(e,t,n,a){return new Promise((i=>{const r=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.set(r,i),e.start&&e.start(),e.postMessage(Object.assign({id:r},n),a)}))}n(16280),n(944114),n(898992),n(354520),n(581454);var E=()=>n(651170),O=()=>n(430476),k=()=>n(68336),I=()=>n(496603),z=()=>n(534177);let x,R,T=!1,F=!1,C=0;function P(){T=!1,F=!1,R=void 0,x&&(clearTimeout(x),x=void 0)}async function j(e){if(T)return"in-progress";if(C>=3)return"ignored";C++,T=!0,x=setTimeout((()=>{P()}),6e4);try{try{R=await async function(e){const t=await(0,O().G2)({connection:e,statements:[k().F4`SELECT * FROM offline_page`.asRead(),k().F4`SELECT * FROM offline_action`.asRead()]});if("DataOk"!==t[0].type||"DataOk"!==t[1].type)throw new Error("Failed to backup offline_page or offline_action");return{offline_page:t[0].data,offline_action:t[1].data}}(e)}catch(t){}return await e.completelyRebuildSqliteDb(),"success"}catch(t){return P(),"error"}}async function L(e){if(R){if(!F){F=!0;try{await async function(e,t){const n=["last_downloaded_at","last_downloaded_version","download_status"],a=t.offline_page.map((e=>(0,z().Gv)(e)?(0,I().cJ)(e,n):void 0)).filter(z().O9),i=["id"],r=t.offline_action.map((e=>(0,z().Gv)(e)?(0,I().cJ)(e,i):void 0)).filter(z().O9),s=[];for(const o of a){const e=Object.keys(o),t=e.map((e=>{const t=o[e];return null==t?k().F4`${null}`:"number"==typeof t||"string"==typeof t?k().F4`${t}`:k().F4`${String(t)}`})),n=e.map((e=>k().F4.ident(e))),a=k().F4`INSERT OR IGNORE INTO offline_page (${k().F4.comma(n)}) VALUES (${k().F4.comma(t)})`;s.push(a.asWrite())}for(const o of r){const e=Object.keys(o),t=e.map((e=>{const t=o[e];return null==t?k().F4`${null}`:"number"==typeof t||"string"==typeof t?k().F4`${t}`:k().F4`${String(t)}`})),n=e.map((e=>k().F4.ident(e))),a=k().F4`INSERT OR IGNORE INTO offline_action (${k().F4.comma(n)}) VALUES (${k().F4.comma(t)})`;s.push(a.asWrite())}s.length>0&&await(0,O().G2)({connection:e,statements:s})}(e,R)}catch(t){}finally{P()}}}else T&&P()}let N={status:"not-initialized"};const D=new Map;let M=!1;async function _(e){const{tabId:t,tabConnection:n}=e;N={status:"initializing",id:t,connection:n,sqliteInitializePromise:n.initialize()};try{if(await N.sqliteInitializePromise,N.id!==t)return;N={status:"initialize-success",id:t,connection:n}}catch(a){throw N={status:"initialize-error",error:a},a}}async function B(e){const{connection:t}=e;try{await L(t)}catch(n){}}async function A(e){const{connection:t,batch:n,res:a}=e,i=function(e,t){const n=(0,O().Sy)({batch:e,result:t,lastSuccessfulSqlBatch:void 0});return n instanceof E().PW||n instanceof E().lh||n instanceof E().JV&&(11===n.debugInfo.sqliteCode||"SQLITE_CORRUPT"===n.debugInfo.sqliteCode)?n:void 0}(n,a);if(i)try{if("success"===await j(t))for(const[e,t]of D.entries())try{await t.handleBackupAndResetDatabaseComplete()}catch(i){}}catch(i){}}self.addEventListener("connect",(e=>{const t=e.ports[0];u(function(e){return{initializeNewTab:async function(t){const{tabId:n}=t;D.set(n,e),function(e,t){navigator.locks.request(function(e){return`notion-tab-${e}`}(e),t)}(n,(async()=>{if(e[r](),D.delete(n),"id"in N&&N.id===n){const[e,t]=[...D.entries()][D.size-1];await _({tabId:e,tabConnection:t})}})),"initialize-success"===N.status||("initializing"===N.status?await N.sqliteInitializePromise:"not-initialized"===N.status||"initialize-error"===N.status?await _({tabId:n,tabConnection:e}):(0,z().HB)(N))},execSqliteBatch:async function(e){let t;switch(N.status){case"not-initialized":case"initialize-error":return{type:"SharedWorkerFailedToDelegate"};case"initializing":try{await N.sqliteInitializePromise}catch(n){return{type:"SharedWorkerFailedToDelegate"}}return t=await N.connection.execSqliteBatch(e),M&&await A({connection:N.connection,batch:e,res:t}),t;case"initialize-success":return t=await N.connection.execSqliteBatch(e),M&&await A({connection:N.connection,batch:e,res:t}),t}},execSqliteBatchV2:async function(e){let t;switch(N.status){case"not-initialized":case"initialize-error":return{type:"SharedWorkerFailedToDelegate"};case"initializing":try{await N.sqliteInitializePromise}catch(n){return{type:"SharedWorkerFailedToDelegate"}}return t=await N.connection.execSqliteBatchV2(e),M&&await A({connection:N.connection,batch:e.batch,res:t}),t;case"initialize-success":return t=await N.connection.execSqliteBatchV2(e),M&&await A({connection:N.connection,batch:e.batch,res:t}),t}},completelyRebuildSqliteDb:async function(){switch(N.status){case"not-initialized":case"initialize-error":break;case"initializing":try{await N.sqliteInitializePromise}catch(e){}await N.connection.completelyRebuildSqliteDb();break;case"initialize-success":await N.connection.completelyRebuildSqliteDb()}},restoreBackup:async function(){switch(N.status){case"not-initialized":case"initialize-error":break;case"initializing":try{await N.sqliteInitializePromise}catch(e){}await B({connection:N.connection});break;case"initialize-success":await B({connection:N.connection})}},enableCorruptionRepair:()=>{M=!0},disableCorruptionRepair:()=>{M=!1}}}(d(t)),t)}))},319625:(e,t,n)=>{"use strict";n(16280)},413611:(e,t,n)=>{"use strict";var a=n(746518),i=n(444576),r=n(562106),s=n(743724),o=TypeError,c=Object.defineProperty,l=i.self!==i;try{if(s){var u=Object.getOwnPropertyDescriptor(i,"self");!l&&u&&u.get&&u.enumerable||r(i,"self",{get:function(){return i},set:function(e){if(this!==i)throw new o("Illegal invocation");c(i,"self",{value:e,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else a({global:!0,simple:!0,forced:l},{self:i})}catch(f){}},430476:(e,t,n)=>{"use strict";n.d(t,{G2:()=>f,Sy:()=>d,kx:()=>l,qU:()=>c});n(16280),n(898992),n(354520),n(581454),n(737550);var a=()=>n(532313),i=()=>n(534177),r=()=>n(720665),s=()=>n(651170),o=()=>n(732524);async function c(e){let{connection:t,sql:n,args:a,queryName:i}=e;const r={sql:n,args:a,getData:!0},[s]=await f({connection:t,statements:[r],queryName:i});return s.data}async function l(e){let{connection:t,sql:n,args:a,queryName:i}=e;const r={sql:n,args:a};await f({connection:t,statements:[r],queryName:i})}let u;async function f(e){let{connection:t,statements:n,webLockRequest:i,queryName:s}=e;return await a().L5({initialInput:void 0,fn:()=>(async()=>{const e={sql:"BEGIN",getData:!1},a={sql:"COMMIT",getData:!1},c={sql:"ROLLBACK",getData:!1},l=n.map((e=>({...e,sql:(0,r().hr)(e.sql)}))),f=[e,...l,a],h=(0,o().Xb)({queryName:s,body:f,onError:c}),m=h,g=i?await p(i,(()=>t.execSqliteBatch(m))):await t.execSqliteBatch(m),b=g.body.slice(1,-1),y=d({batch:h,result:g,lastSuccessfulSqlBatch:u});if(y||b.some(o().Ll))throw y;return u=l.map((e=>e.sql)),b})(),handleError:(e,t)=>"SqlitePreconditionFail"!==e.name||t?{status:"throw",error:e}:{status:"retry"},retryAttemptsMS:[10,100,1e3],retryAttemptRandomOffsetMS:50})}function d(e){const{batch:t,result:n,lastSuccessfulSqlBatch:a}=e,r=n.body.findIndex(o().Ll);if(r<0)return;const c=n.body[r],l={batch:t,result:n,errorSql:t.body[r].sql,errorArgs:t.body[r].args,errorIndex:r,sqliteCode:"sqliteCode"in c?c.sqliteCode:void 0};switch(c.type){case"Error":return c.message.includes("database disk image is malformed")?a?new(s().lh)({message:c.message,debugInfo:{...l,lastSuccessfulSqlBatch:a}}):new(s().PW)({message:c.message,debugInfo:l}):new(s().yY)({result:c,debugInfo:l});case"ErrorBefore":return new(s().pu)({message:"ErrorBefore before first Error",debugInfo:l});case"PreconditionFailed":return new(s().JV)({message:"The precondition SQL query did not pass, the batch execution was not attempted.",debugInfo:l});case"OutOfSpace":return new(s().w8)({message:"Sqlite has run out of space",debugInfo:l});case"SharedWorkerFailedToDelegate":return new(s().F)({message:"SharedWorker failed to delegate to a Worker",debugInfo:l});default:(0,i().HB)(c)}}async function p(e,t){var n;return"undefined"==typeof navigator||void 0===(null===(n=navigator.locks)||void 0===n?void 0:n.request)?t():await navigator.locks.request(e.tables,{mode:e.isWrite?"exclusive":"shared"},(()=>t()))}},496603:(e,t,n)=>{"use strict";n.d(t,{cJ:()=>a.a});n(254664),n(413139),n(984058),n(314792),n(253551),n(821013),n(978659),n(932629),n(688055),n(789647),n(183673),n(492078),n(137334),n(574154),n(738221),n(884684),n(360895),n(666245),n(897648),n(927537),n(976135),n(275288),n(414425),n(660680),n(619747),n(587612),n(907309),n(324713),n(820826),n(620681),n(94469),n(756170),n(547307),n(78325),n(835970),n(503176),n(539754),n(333215),n(44377),n(858156),n(494394),n(761448),n(400912),n(383488),n(959104),n(679859),n(763424),n(305287),n(780191),n(140866),n(553812),n(3656),n(183602),n(962193),n(302404),n(623546),n(892297),n(501882),n(611741),n(269843),n(305187),n(198023),n(223805),n(540346),n(411331),n(338440),n(185015),n(762216),n(620249),n(338970),n(395950),n(468090),n(179674),n(473916),n(394506),n(597551),n(355083),n(150104),n(355364),n(406924),n(631684),n(136533),n(263950);var a=n.n(n(590179));n(142194),n(858059),n(142877),n(982485),n(852037),n(306498),n(244383),n(971086),n(550583),n(258253),n(623181),n(14174),n(912493),n(36944),n(745620),n(33441),n(63560),n(736049),n(47091),n(737530),n(204124),n(333031),n(941298),n(473054),n(859043),n(190128),n(336119),n(531126),n(44384),n(834921),n(287779),n(730872),n(407350),n(6638),n(231521),n(582306),n(399374),n(269884),n(213222),n(619488),n(375494),n(280299),n(999786),n(763375),n(950014),n(509063),n(97200),n(273357),n(618330),n(555808),n(891648),n(466645),n(656625),n(715004),n(265611),n(747248),n(307082),n(180962)},532313:(e,t,n)=>{"use strict";n.d(t,{L5:()=>i});var a=()=>n(763824);async function i(e){const{fn:t,handleError:n,retryAttemptsMS:i,retryAttemptRandomOffsetMS:r}=e;let s,o=e.initialInput;for(let l=0;l<=i.length;l+=1)try{return await t(o,l)}catch(c){const e=l>=i.length,t=n(c,e,l,o);if("return"===t.status)return t.result;if("throw"===t.status){s=t.error;break}if(e){s=c;break}const u=i[l]+Math.random()*r;await a().wR(u),"retry"===t.status&&void 0!==t.input&&(o=t.input)}throw s}},532659:(e,t,n)=>{"use strict";n(944114),n(898992),n(354520),n(581454),n(727413)},534177:(e,t,n)=>{"use strict";n.d(t,{Gv:()=>s,HB:()=>r,O9:()=>a});n(16280),n(898992),n(737550);Object.keys,Object.entries;Object.assign;function a(e){return void 0!==e}class i extends Error{}function r(e,t){if(t)throw new i(t());let n="(unknown)";try{try{n=JSON.stringify(e)??"undefined"}catch(a){n=String(e);const t=a instanceof Error?a.message:void 0;t&&(n+=` (Not serializable: ${t})`)}}catch{}throw new i(`Expected value to never occur: ${n}`)}function s(e){return"object"==typeof e&&null!==e}Symbol("deprecated api name"),Symbol("abstracted api name"),Symbol("info message"),Symbol("warning message")},590179:(e,t,n)=>{var a=n(538816)((function(e,t){var a={};if(null==e)return a;var i=!1;t=n(634932)(t,(function(t){return t=n(831769)(t,e),i||(i=t.length>1),t})),n(921791)(e,n(483349)(e),a),i&&(a=n(509999)(a,7,n(653138)));for(var r=t.length;r--;)n(419931)(a,t[r]);return a}));e.exports=a},615234:(e,t,n)=>{"use strict";Number(1)},651170:(e,t,n)=>{"use strict";n.d(t,{F:()=>u,JV:()=>c,PW:()=>s,lh:()=>r,pu:()=>o,w8:()=>l,yY:()=>i});n(16280);class a extends Error{constructor(e){const{message:t,debugInfo:n}=e;super(t),this.debugInfo=void 0,this.debugInfo=n}}class i extends a{constructor(e){const{result:t,debugInfo:n}=e;super({message:t.message,debugInfo:n}),this.name=t.name}}class r extends a{constructor(){super(...arguments),this.name="SqliteDatabaseBecameCorruptDuringSession"}}class s extends a{constructor(){super(...arguments),this.name="SqliteDatabaseWasCorruptWhenSessionBegan"}}class o extends a{constructor(){super(...arguments),this.name="SqliteInvalidResult"}}class c extends a{constructor(){super(...arguments),this.name="SqlitePreconditionFail"}}class l extends a{constructor(){super(...arguments),this.name="SqliteOutOfSpace"}}class u extends a{constructor(){super(...arguments),this.name="SqliteSharedWorkerFailedToDelegate"}}},720665:(e,t,n)=>{"use strict";n.d(t,{hr:()=>a});n(16280),n(944114),n(269479),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(430670),n(581454),n(908872);Object.fromEntries;function a(e){return e.split("\n").map((e=>e.trim())).join("\n")}},763824:(e,t,n)=>{"use strict";n.d(t,{wR:()=>i});n(16280),n(944114),n(898992),n(354520),n(581454),n(759848);var a=()=>n(882362);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a().u;return new Promise((n=>{t.setTimeout((()=>{n()}),e)}))}},803949:(e,t,n)=>{"use strict";var a=n(746518),i=n(72652),r=n(479306),s=n(28551),o=n(301767);a({target:"Iterator",proto:!0,real:!0},{forEach:function(e){s(this),r(e);var t=o(this),n=0;i(t,(function(t){e(t,n++)}),{IS_RECORD:!0})}})},806080:(e,t,n)=>{"use strict";n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698)}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={id:e,loaded:!1,exports:{}};return n[e].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.m=n,i.x=()=>{var e=i.O(void 0,[6187,16449,53084,28403],(()=>i(51601)));return e=i.O(e)},e=[],i.O=(t,n,a,r)=>{if(!n){var s=1/0;for(u=0;u<e.length;u++){for(var[n,a,r]=e[u],o=!0,c=0;c<n.length;c++)(!1&r||s>=r)&&Object.keys(i.O).every((e=>i.O[e](n[c])))?n.splice(c--,1):(o=!1,r<s&&(s=r));if(o){e.splice(u--,1);var l=a();void 0!==l&&(t=l)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,a,r]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>6187===e?"6187-5c30b4d4633a7dce.js":16449===e?e+"-26e11a423ab7cda9.js":28403===e?e+"-3d3c0358ea3f2cc6.js":e+"-2141ffcd6bf01a87.js",i.miniCssF=e=>{},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i.p="/_assets/",(()=>{var e={33429:1};i.f.i=(t,n)=>{e[t]||importScripts(i.p+i.u(t))};var t=globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[],n=t.push.bind(t);t.push=t=>{var[a,r,s]=t;for(var o in r)i.o(r,o)&&(i.m[o]=r[o]);for(s&&s(i);a.length;)e[a.pop()]=1;n(t)}})(),t=i.x,i.x=()=>Promise.all([6187,16449,53084,28403].map(i.e,i)).then(t);i.x()})();