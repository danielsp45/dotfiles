"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[81973],{138873:(e,t,o)=>{o.d(t,{tx:()=>ee,ZR:()=>oe,Of:()=>te,Ay:()=>ie,uJ:()=>Q});o(898992),o(354520),o(581454),o(737550);var i=o(296540),n=()=>o(484714),r=()=>o(56366),s=()=>o(401497),a=()=>o(634201),l=()=>o(546703),d=()=>o(340498),c=o(474848);const u={viewBox:"0 0 16 16",fittedViewBox:"1.88 1.87 13.8 13.8",svg:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("path",{d:"M8 1.875a6.125 6.125 0 1 0 .918 12.182l.091-.014-.032-.087a4 4 0 0 1-.233-1.056l-.006-.08-.08.01q-.323.045-.658.045a4.875 4.875 0 1 1 4.83-4.216l-.01.079.08.006q.555.044 1.056.233l.087.032.014-.092q.068-.449.068-.917A6.125 6.125 0 0 0 8 1.875"}),(0,c.jsx)("path",{d:"M5.892 6.025c-.444 0-.779.413-.779.891s.335.891.78.891c.443 0 .778-.413.778-.891s-.335-.891-.779-.891m4.216 0c-.444 0-.779.413-.779.891s.335.891.779.891.779-.413.779-.891-.335-.891-.779-.891M6.499 9.323a.575.575 0 0 0-.954.642A2.96 2.96 0 0 0 9.008 11.1l.03-.011.013-.03a3.9 3.9 0 0 1 1.374-1.658l.066-.045-.048-.063a.576.576 0 0 0-.933.03 1.82 1.82 0 0 1-1.506.802A1.81 1.81 0 0 1 6.5 9.323m6.1.202a3.075 3.075 0 1 0 0 6.15 3.075 3.075 0 0 0 0-6.15m-.425 1.409a.425.425 0 1 1 .85 0v1.241h1.242a.425.425 0 1 1 0 .85h-1.242v1.242a.425.425 0 0 1-.85 0v-1.242h-1.242a.425.425 0 0 1 0-.85h1.242z"})]})},m=(0,d().wt)("emojiFacePlusSmall",u);var h=()=>o(483690),p=()=>o(959013),g=()=>o(381349),x=()=>o(534177),f=()=>o(284371),v=()=>o(112873),j=()=>o(383594),S=()=>o(751156),y=()=>o(145214),b=()=>o(704152),A=()=>o(285790),w=()=>o(859428),C=()=>o(56086),T=()=>o(508398),R=()=>o(87878),k=()=>o(963589),I=()=>o(486666),B=()=>o(962730),L=()=>o(630116),M=()=>o(249349),z=()=>o(528787),E=()=>o(406699),_=()=>o(928600),U=()=>o(678553),N=()=>o(987017),D=()=>o(780054),K=()=>o(712030),P=()=>o(722872),W=()=>o(683097),F=()=>o(811879);function O(e){let{reactionStores:t,initialIndex:o}=e;const[n,s]=i.useState(o),l=(0,p().tz)(),d=(0,K().Ol)(),u=(0,r().K8)((()=>t.map(((e,t)=>{const o=e.getIcon();if(!o)return;const i="raw"!==d||a().qg.isCustomEmojiString(o);return(0,c.jsx)("span",{style:i&&t!==n?{opacity:.5}:{},children:(0,c.jsx)(C().A,{size:14,char:o})},o)})).filter(x().O9)),[t,n,d]),m=(0,r().K8)((()=>t[n].getActorStores().map((e=>({id:e.id,store:e,name:e.getDisplayName(l)}))).filter(x().O9)),[t,n,l]);return(0,c.jsxs)(_().A,{menuType:P().gu.ActionSheet,children:[(0,c.jsx)(N().Ay,{tabStyle:{flex:1,justifyContent:"center",display:"flex",minWidth:60},tabs:u,selectedIndex:n,onChange:e=>s(e)}),m.map((e=>(0,c.jsx)(U().Ay,{title:e.name,dontShrinkIcon:!0,icon:(0,c.jsx)(F().E,{authorStore:e.store,avatarSize:20,avatarStyle:{width:20,height:20},placeholderStyle:{width:20,height:20}})},e.id)))]})}function $(e){const t=(0,n().Y0)(),o=(0,r().K8)((()=>L().Lk.getUserVisibleReactions(e.store)),[e.store]),s=(0,i.useRef)(null),a=(0,W().A)({onLongPress:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.setOpen(!0)}});if(!D().A.isMobile)return(0,c.jsx)(c.Fragment,{children:e.children});const l=o.findIndex((t=>!e.reactionStore||t===e.reactionStore))??0;return(0,c.jsx)(E().Ay,{bottomSheetBackgroundColor:"elevated",ref:s,renderOrigin:()=>(0,c.jsx)("div",{...a,onTouchStart:e=>{e.stopPropagation(),a.onTouchStart()},onTouchMove:e=>{e.stopPropagation(),a.onTouchMove(e)},onTouchEnd:e=>{e.stopPropagation(),a.onTouchEnd()},onTouchCancel:e=>{e.stopPropagation(),a.onTouchCancel()},children:e.children}),bottomSheetInitialState:"half",popupType:t.isTablet?E().z7.Popup:E().z7.BottomSheet,render:()=>(0,c.jsx)(O,{initialIndex:l,reactionStores:o})},e.store.id)}const H=(0,p().YK)({addReaction:{defaultMessage:"Add reaction",id:"ReactionBar.newReaction.ariaLabel"},resolveDiscussion:{defaultMessage:"Resolve",id:"ReactionBar.resolveDiscussion.ariaLabel"},emojiPickerTitle:{defaultMessage:"Reaction",id:"ReactionBar.emojiModalMenu.title"}});function V(){const{isMobile:e}=(0,n().Y0)(),t=(0,k().X)("simple_reaction_style");return(0,s().IS)((o=>{let i={reaction:{...te,display:"flex",padding:"1px 6px 1px 6px",justifyContent:"center",alignItems:"center",gap:"4px",border:`1px solid ${o.regularDividerColor}`,borderRadius:"100px",fontSize:14,fontVariantNumeric:"tabular-nums",background:o.whiteButtonBackground,...e?oe:{}},count:{color:o.text.secondary,fontSize:e?f().J.UISmall.mobile:f().J.UISmall.desktop},countReacted:{color:o.blueColor},reacted:{background:g().Ay.blueWithAlpha(.08),border:`1px solid ${o.filterPillBorder}`,fontWeight:500},reactedHover:{background:g().Ay.blueWithAlpha(.18)},emojiStyle:{paddingTop:1,color:"black",display:"flex",size:14},reactionIcon:{width:d().Ev.sm,height:d().Ev.sm,fill:o.icon.secondary,marginRight:1},dropShadow:{boxShadow:o.shadowSM}};return t&&(i={...i,reaction:{...i.reaction,padding:"2px 8px 2px 8px",border:"none",background:o.surface.wash},reacted:{...i.reacted,border:"none",background:g().Ay.blueWithAlpha(.1)},emojiStyle:{...i.emojiStyle,size:16},reactedHover:{...i.reactedHover,background:g().Ay.blueWithAlpha(.2)}}),i}),[e,t])}function q(e){const{store:t,disabled:o,onClick:i,size:s,dropShadow:a}=e,l=(0,r().K8)((()=>t.getActors()),[t]),d=(0,r().K8)((()=>t.getIcon()),[t]),u=V(),{currentUser:m}=(0,n().v3)();if(!l||!d)return null;if(0===l.length)return null;const h=l.some((e=>e.id===m.id)),p={...u.reaction,...h&&u.reacted,...a&&u.dropShadow},g={...u.count,...h&&u.countReacted};return(0,c.jsx)(w().A,{textWrap:!0,style:{maxWidth:250,width:"max-content"},placement:B().W.Bottom,delayThreshold:300,renderTooltip:()=>(0,c.jsx)(X,{store:t,icon:d}),render:e=>(0,c.jsxs)(b().A,{disabled:o,style:p,hoveredStyle:h?u.reactedHover:void 0,onClick:i,...e,children:[(0,c.jsx)("span",{style:u.emojiStyle,children:(0,c.jsx)(C().A,{size:s??u.emojiStyle.size,char:d})}),(0,c.jsx)("span",{style:g,children:l.length})]})})}function Y(e){const{parentStore:t,reactions:o,disabled:n,onReact:a}=e,[l,d]=(0,i.useState)(e.maxReactionsToShow),{reactionsToShow:u,remainingCount:m}=(0,r().K8)((()=>({reactionsToShow:o.slice(0,l),remainingCount:void 0!==l?o.length-l:0})),[l,o]),h=V(),g=(0,s().IS)((e=>({remaining:{...h.reaction,...h.count,color:e.text.secondary}})),[h.reaction,h.count]);return(0,c.jsxs)(c.Fragment,{children:[u.map((e=>(0,c.jsx)($,{reactionStore:e,store:t,children:(0,c.jsx)(q,{disabled:n,store:e,onClick:()=>{null==a||a(e)}})},e.id))),m>0?(0,c.jsx)("div",{role:"button",tabIndex:0,style:g.remaining,onClick:()=>d(void 0),children:(0,c.jsx)(p().sA,{defaultMessage:"+{count}",id:"ReactionBar.remaining",values:{count:m}})}):null]})}function X(e){let{store:t,icon:o}=e;const i=(0,p().tz)(),n=(0,r().K8)((()=>t.getActorStores()),[t]),s=(0,r().K8)((()=>n.map((e=>e.getDisplayName(i))).filter(x().O9)),[n,i]),l=a().qg.isCustomEmojiString(o),d=(0,r().K8)((()=>{if(l){const e=a().qg.fromCustomEmojiString(o).pointer;return(0,R().nA)({parentStore:void 0,pointer:e})}}),[o,l]),u=(0,r().K8)((()=>{if(null!=d&&d.isDefined())return null==d?void 0:d.getModel().getRenderTitle()}),[d]);return l?d?(0,c.jsx)(T().A,{type:"custom",customEmojiStore:d,text:(0,c.jsx)(G,{names:s,emojiNameOrIcon:(0,c.jsx)("span",{className:"notranslate",children:u}),isDeletedCustomEmoji:!1}),deletedText:(0,c.jsx)(G,{names:s,emojiNameOrIcon:(0,c.jsx)("span",{className:"notranslate",children:u}),isDeletedCustomEmoji:!0})}):null:(0,c.jsx)(T().A,{type:"unicode",emoji:o,text:(0,c.jsx)(G,{names:s,emojiNameOrIcon:(0,c.jsx)(C().A,{size:12,char:o}),isDeletedCustomEmoji:!1})})}function G(e){let{names:t,emojiNameOrIcon:o,isDeletedCustomEmoji:i}=e;const n=(0,s().IS)((e=>({text:{color:e.text.contrastSecondary}})),[]);return t.length>50?(0,c.jsx)(p().sA,{defaultMessage:"{additionalNames, plural, one {{names} and {additionalNames} other <medium>reacted with</medium> {icon}} other {{names} and {additionalNames} others <medium>reacted with</medium> {icon}}} {isDeletedCustomEmoji, select, true {<medium>(deleted)</medium>} other {}}",id:"ReactionBar.hoverTooltip.textAbbreviated",values:{additionalNames:t.length-50,names:t.slice(0,50).join(", "),medium:e=>(0,c.jsx)("span",{style:n.text,children:e}),icon:o,isDeletedCustomEmoji:i}}):(0,c.jsx)(p().sA,{defaultMessage:"{nameOrNames} <medium>reacted with</medium> {icon} {isDeletedCustomEmoji, select, true {<medium>(deleted)</medium>} other {}}",id:"ReactionBar.hoverTooltip.text",values:{numberOfNames:t.length,nameOrNames:t.join(", "),medium:e=>(0,c.jsx)("span",{style:n.text,children:e}),icon:o,isDeletedCustomEmoji:i}})}function J(e){const{store:t,discussionLocation:o,onEmojiSelection:r,style:a}=e,u=(0,n().v3)(),m=(0,i.useRef)(null),h=(0,n().Y0)(),g=(0,s().IS)((e=>({container:{padding:2,display:"flex",boxShadow:e.shadowSM,backgroundColor:e.buttonGroupBackground,borderRadius:h.isMobile?3:4,...a},addIcon:{width:d().Ev.default,height:d().Ev.default,fill:e.icon.secondary},iconButton:{height:24,width:24,flex:"0 0 auto"}})),[h.isMobile,a]),x=(0,p().tz)();return(0,c.jsx)("div",{style:g.container,children:(0,c.jsx)(A().A,{hasBackground:!0,ariaLabel:x.formatMessage(H.addReaction),showShadow:!1,icon:()=>(0,l().r)(g.addIcon),style:g.iconButton,ref:m,onClick:()=>Q(u,x,t,null==m?void 0:m.current,o,r)})})}function Z(e){let{store:t,discussionLocation:o,onEmojiSelection:r}=e;const s=(0,n().v3)(),a=(0,i.useRef)(null),l=V(),d=(0,p().tz)();return(0,c.jsx)(b().A,{style:{...l.reaction,minWidth:"2em"},ref:a,onClick:()=>Q(s,d,t,null==a?void 0:a.current,o,r),children:m(l.reactionIcon)})}function Q(e,t,o,i,n,r){if(!(i instanceof Element))return;const s=i.getBoundingClientRect();j().W(e,{originGap:4,originRect:s,popupWidth:I().jv,popupHeight:I().GF,isSmallWidth:!1,title:t.formatMessage(H.emojiPickerTitle),currentTab:"emoji",tabs:[{type:"emoji",title:(0,c.jsx)(p().sA,{defaultMessage:"Emoji",id:"recordIcon.emojiTab.title"}),hideRandomButton:!0,onChange:(t,i)=>{r&&r(),S().createAndCommit({environment:e,userAction:"Comment.toggleReactionFromMenu",canUndo:!0,perform:r=>{z().toggleReaction({environment:e,transaction:r,store:o,icon:t,discussionLocation:n}),i&&i.keepVisible||j().I()}})}}]})}function ee(e){const{parentStore:t,discussionLocation:o,onReact:a,focused:u,showAddReactionButton:m=!0,additionalItems:g}=e,[x,f]=(0,i.useState)(!1),j=(0,n().Y0)(),b=(0,k().X)("simple_reaction_style"),C=(0,s().IS)((e=>({reactionIcon:{height:d().Ev.default,width:d().Ev.default,fill:e.icon.secondary},resolveIcon:{height:16,width:16,fill:e.icon.secondary},container:{gap:"4px",marginTop:"post_top_level_discussion"===o||"page_discussion"===o?0:12,paddingBottom:0,display:"flex",flexWrap:"wrap",alignItems:"center",willChange:"transform",transition:"transform 200ms ease",transformOrigin:"center left",transform:u?"scale3d(1.05)":"scale(1)"},actionButton:{borderRadius:"50%",marginLeft:2},postReactionButton:{...te,width:40,padding:"0 10px 0 10px",borderRadius:13,borderWidth:1,borderColor:e.stroke.secondary,borderStyle:"solid",...j.isMobile?oe:{},...b?{border:"none",background:e.surface.wash}:{}}})),[u,o,j.isMobile,b]),T=e=>{S().createAndCommit({userAction:"Discussion.handleResolve",environment:R,canUndo:!0,perform:e=>{(0,M().j)({environment:R,discussionStore:t,transaction:e,discussionLocation:o})}}),v().UP(),null==e||e.stopPropagation()},R=(0,n().v3)(),I=(0,r().K8)((()=>!!R.currentUser.isLoggedIn()&&t.canComment()),[t,R.currentUser]),B=(0,r().K8)((()=>!!R.currentUser.isLoggedIn()&&(t.canEdit()&&"post_top_level_discussion"!==o)),[t,R.currentUser,o]),E=(0,i.useRef)(null),_=(0,p().tz)(),U=x||e.focused,N=(0,r().K8)((()=>L().Lk.getUserVisibleReactions(t)),[t]),D=()=>{Q(R,_,t,null==E?void 0:E.current,o,a)},K=(0,i.useCallback)((e=>{e.isDefined()&&(null==a||a(),("margin_comments"!==o||u)&&S().createAndCommit({environment:R,userAction:"Comment.toggleReaction",canUndo:!0,perform:i=>z().toggleReaction({environment:R,transaction:i,store:t,icon:e.getIcon(),discussionLocation:o})}))}),[R,t,o,u,a]);return(0,c.jsxs)("div",{onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),style:C.container,children:[(0,c.jsx)(Y,{parentStore:t,reactions:N,disabled:!I,onReact:K,maxReactionsToShow:j.isMobile?6:void 0}),m&&(0,c.jsxs)(y().A,{animate:{opacity:U?1:0},style:{display:"flex",alignItems:"center",marginLeft:2},children:[I&&(0,c.jsx)($,{store:t,children:(0,c.jsx)(w().A,{renderTooltip:()=>(0,c.jsx)(p().sA,{...H.addReaction}),render:t=>(0,c.jsx)(A().A,{style:"post_top_level_discussion"===e.discussionLocation?C.postReactionButton:C.actionButton,hasBackground:!1,showShadow:!1,ref:E,icon:()=>(0,l().r)(C.reactionIcon),onClick:D,...t,ariaLabel:_.formatMessage(H.addReaction)})})}),B&&(0,c.jsx)(w().A,{renderTooltip:()=>(0,c.jsx)(p().sA,{...H.resolveDiscussion}),render:e=>(0,c.jsx)(A().A,{style:{borderRadius:"50%",marginLeft:4},hasBackground:!1,showShadow:!1,icon:()=>(0,h().q)(C.resolveIcon),onClick:T,...e,ariaLabel:_.formatMessage(H.resolveDiscussion)})})]}),g]})}const te={height:25},oe={height:32,borderRadius:100,fontSize:13,padding:"1px 12px 1px 12px",minWidth:44,transform:"translateZ(0)"},ie=i.memo((function(e){const{parentStore:t,discussionLocation:i,onReactionToggle:s,newReactionStyle:a}=e,l=(0,n().v3)(),d=(0,r().K8)((()=>!!l.currentUser.isLoggedIn()&&t.canComment()),[t,l.currentUser]),u=(0,r().K8)((()=>L().Lk.getUserVisibleReactions(t)),[t]),m=(0,r().K8)((()=>{if(t.table===o(343666).SN){const e=t.getParentBlockStore();return Boolean(e&&e.pathIsDead())}if(t.table===o(197959).$Y){const e=t.getParentStore();return Boolean(e&&e.pathIsDead())}return!1}),[t]),h=d&&!m&&u.length>0,p=d&&!m&&0===u.length;return(0,c.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:[u.map((e=>(0,c.jsx)($,{reactionStore:e,store:t,children:(0,c.jsx)(q,{disabled:!d||m,store:e,onClick:()=>{if(e.isDefined()){const o=S().createAndCommit({environment:l,userAction:"Comment.toggleReaction",canUndo:!0,perform:o=>z().toggleReaction({environment:l,transaction:o,store:t,icon:e.getIcon(),discussionLocation:i})});void 0!==o.performResult&&s&&s(o.performResult)}}})},e.id))),h&&(0,c.jsx)($,{store:t,children:(0,c.jsx)(Z,{store:t,discussionLocation:i,onEmojiSelection:void 0!==s?()=>s("Added"):void 0})}),p&&(0,c.jsx)(J,{store:t,discussionLocation:i,onEmojiSelection:void 0!==s?()=>s("Added"):void 0,style:a})]})}))},436683:(e,t,o)=>{o.d(t,{Y:()=>F,e:()=>W});var i=o(296540),n=()=>o(484714),r=()=>o(56366),s=()=>o(401497),a=()=>o(584262),l=()=>o(563884),d=o(474848);const c=(0,o(340498).wt)("suggestionExtraSmall",{viewBox:"0 0 10 9",svg:(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{d:"M5.175 4.745l-.906.339c-.07.027-.14.012-.205-.045-.064-.057-.08-.127-.048-.212l.342-.899L7.492.798l.814.813-3.131 3.134zm3.4-3.397L7.76.53l.359-.352A.617.617 0 018.48.005a.364.364 0 01.33.105l.14.14c.1.105.145.226.134.365a.596.596 0 01-.168.366l-.341.366z"}),(0,d.jsx)("path",{d:"M4.91 1.962L5.969.906H2.704c-.354 0-.66.072-.92.216-.26.14-.46.341-.601.601-.142.26-.212.566-.212.92v2.754c0 .354.074.66.222.92.148.26.345.461.591.605.249.141.524.212.827.212h.25v.694c0 .214.056.382.167.506a.603.603 0 00.465.184.84.84 0 00.383-.092c.125-.06.27-.16.434-.301l1.138-.991h1.846c.353 0 .66-.07.92-.212.26-.144.46-.345.6-.605a1.89 1.89 0 00.213-.92V2.643c0-.114-.007-.223-.022-.327l-.433.443-.601.602V5.32c0 .253-.064.442-.192.567-.125.126-.314.188-.567.188h-1.85a.757.757 0 00-.307.051.962.962 0 00-.256.192L3.743 7.349v-.926c0-.125-.031-.214-.093-.267a.372.372 0 00-.256-.082h-.608c-.251 0-.44-.062-.568-.188-.125-.125-.188-.314-.188-.567V2.72c0-.253.063-.442.188-.567.128-.128.317-.192.568-.192H4.91z"})]})});var u=()=>o(120739),m=()=>o(179034),h=()=>o(854150),p=()=>o(959013),g=()=>o(284371),x=()=>o(464708),f=()=>o(187485),v=()=>o(296798),j=()=>o(824160),S=()=>o(187820),y=()=>o(16006),b=()=>o(125565),A=()=>o(659799),w=()=>o(492414),C=()=>o(907514),T=()=>o(963589),R=()=>o(436525),k=()=>o(12974),I=()=>o(741737),B=()=>o(279835),L=()=>o(915019),M=()=>o(765957),z=()=>o(630116),E=()=>o(898808),_=()=>o(848565),U=()=>o(811879);function N(e){let{shouldShowFullProfiles:t,personProfileUrl:o,displayName:i,styles:n}=e;return o&&t?(0,d.jsx)(f().A,{href:o,children:(0,d.jsx)("div",{style:n.author,children:i||(0,d.jsx)("span",{style:n.placeholder})})}):(0,d.jsx)("div",{style:n.author,children:i||(0,d.jsx)("span",{style:n.placeholder})})}function D(e){let{sourceStore:t,iconSize:o,styles:i}=e;const n=(0,r().K8)((()=>null==t?void 0:t.getSpaceId()),[t]),s=null==t?void 0:t.table,l=(0,r().K8)((()=>s===h().yK?null==t?void 0:t.getName():void 0),[t,s]),c=(0,r().K8)((()=>s===m().ev?null==t?void 0:t.getIcon():void 0),[t,s]),p=(0,r().K8)((()=>(0,S().Te)(t)),[t]),g=(0,r().K8)((()=>{if(s)return s===m().ev?(0,w().Ay)({store:t,pageVisitSource:a().y8.UnifiedFeedScroll}):(0,u().a)({teamId:t.id,spaceId:n})}),[t,s,n]);return t?s===h().yK?(0,d.jsx)(v().A,{style:i.linkBox,href:g,children:(0,d.jsxs)("div",{style:i.teamIconAndName,children:[(0,d.jsx)(E().x,{size:o,store:t,disabled:!1}),(0,d.jsx)("span",{style:i.teamName,children:l})]})}):(0,d.jsx)(L().A,{store:t,render:e=>(0,d.jsx)(v().A,{href:g,style:i.linkBox,...e,children:(0,d.jsxs)("div",{style:i.teamIconAndName,children:[(0,d.jsx)(S().B6,{disabled:!0,isEmptyPage:!1,icon:c,iconRecordCategory:p,size:o,emojiSize:o,disableShrinking:!0,largeIcon:!0}),(0,d.jsx)(y().A,{style:i.teamName,store:t,underline:!1})]})})}):null}function K(e){let{shouldShowUserHoverCards:t,authorStore:o,size:i,styles:n}=e;return(0,d.jsx)(U().E,{hasTooltip:!t,authorStore:o,avatarSize:i,avatarStyle:n.avatar,placeholderStyle:n.commentAuthorPlaceholder})}function P(e){let{createdTime:t,lastEditedTime:o,style:i}=e;const n=o&&o>t+5e3;return(0,d.jsx)(b().A,{isSmall:!0,isSecondaryColor:!0,isMultiline:!0,style:i,children:n?(0,d.jsx)($,{createdTime:t,lastEditedTime:o}):(0,d.jsx)(O,{createdTime:t})})}function W(e){let{lastEditedTime:t,createdTime:o,location:s,sourceStore:a,authorStore:l,isSuggested:c,commentStore:u}=e;const m=(0,p().tz)(),g=(0,n().v3)(),x=(0,i.useRef)(null),f=(0,r().O$)(M().AppStoreCurrentSpaceStore),v=l instanceof z().LU?l:void 0,j=(0,I().c)({spaceStore:f,viewedUserStore:v}),S=(0,B().$)({spaceStore:f,viewedUserStore:v}),y=(0,T().X)("public_api_custom_display_names_in_comments"),b=(0,r().K8)((()=>{if(u)return u.resolveAuthorDisplayName(y,m)}),[y,u,m]),A=H({location:s,avatarSize:35,authorFontSize:15,enableTeamNameUnderline:!1}),w=(0,r().K8)((()=>{const e=l.id;return(0,k().MN)({userId:e,currentSpaceStore:M().default.state.currentSpaceStore,environment:g})}),[l,g]),C=(0,r().K8)((()=>null==a?void 0:a.isTable(h().yK)),[a]);return o?(0,d.jsxs)("div",{style:{...A.mobileAuthorRow},children:[(0,d.jsx)("div",{style:{...A.user,...A.mobileUserAvatar},children:(0,d.jsx)(K,{shouldShowUserHoverCards:j,authorStore:l,size:35,styles:A})}),(0,d.jsxs)("div",{style:{...A.mobileUserAndTeamLink},children:[(0,d.jsx)("div",{style:A.userRow,children:(0,d.jsxs)("div",{ref:x,style:A.user,children:[(0,d.jsx)(N,{shouldShowFullProfiles:S,personProfileUrl:w,displayName:b,styles:A}),(0,d.jsx)(P,{createdTime:o,lastEditedTime:t,style:A.timestamp}),c?(0,d.jsx)(V,{}):null]})}),(0,d.jsx)("div",{style:{...A.user,...A.mobileTeamLink},children:C?(0,d.jsx)(D,{sourceStore:a,iconSize:15,styles:A}):null})]})]}):null}function F(e){let{lastEditedTime:t,createdTime:o,location:i,isResolved:s,isSuggestionComment:a,sourceStore:l,authorStore:u,isSuggested:m,commentStore:h}=e;const g=(0,p().tz)(),x=(0,n().v3)(),f=(0,r().O$)(M().AppStoreCurrentSpaceStore),v=u instanceof z().LU?u:void 0,S=(0,I().c)({spaceStore:f,viewedUserStore:v}),y=(0,B().$)({spaceStore:f,viewedUserStore:v}),b=(0,T().X)("public_api_custom_display_names_in_comments"),A=(0,r().K8)((()=>{if(h)return h.resolveAuthorDisplayName(b,g)}),[b,h,g]),w=(0,T().X)("ken_new_home_design")&&"post_creator"===i,C=w?32:_().eQ,L=H({location:i,avatarSize:C,authorFontSize:14,enableTeamNameUnderline:!1}),E=(0,r().K8)((()=>{const e=u.id;return(0,k().MN)({userId:e,currentSpaceStore:M().default.state.currentSpaceStore,environment:x})}),[u,x]),W=(0,r().K8)((()=>{if(u instanceof z().LU)return u}),[u]);return o?(0,d.jsxs)("div",{style:L.userRow,children:[(0,d.jsx)(R().D,{userStore:W,children:(0,d.jsxs)("div",{style:L.user,children:[a?(0,d.jsxs)("div",{style:{position:"relative"},children:[(0,d.jsx)(U().E,{authorStore:u,avatarSize:C,avatarStyle:L.avatar,placeholderStyle:L.commentAuthorPlaceholder}),(0,d.jsx)("div",{style:L.avatarSuggestionBadgeWrapper,children:(0,d.jsxs)("div",{style:L.avatarSuggestionBadge,children:[c({height:8.5}),(0,d.jsx)("div",{style:L.avatarSuggestionBadgeBacking})]})})]}):(0,d.jsx)(K,{shouldShowUserHoverCards:S,authorStore:u,size:C,styles:L}),w?(0,d.jsx)("div",{style:L.avatarBubbleTipWrapper,children:(0,d.jsx)("div",{style:L.avatarBubbleTip})}):(0,d.jsx)(N,{shouldShowFullProfiles:y,personProfileUrl:E,displayName:A,styles:L})]})}),l&&(0,d.jsxs)(d.Fragment,{children:[!w&&(0,d.jsx)("div",{style:L.in,children:(0,d.jsx)(p().sA,{id:"posts.post.inPreposition",defaultMessage:" in "})}),(0,d.jsx)(D,{sourceStore:l,iconSize:w?16:14,styles:L})]}),m&&(0,d.jsx)(V,{}),(0,d.jsx)(P,{createdTime:o,lastEditedTime:t,style:L.timestamp}),"comment_unfurl"===i&&s&&(0,d.jsx)("div",{style:{display:"inline-flex"},children:(0,d.jsx)(j().A,{children:(0,d.jsx)(p().sA,{id:"comment.unfurl.resolvedStatus",defaultMessage:"Resolved"})})})]}):null}function O(e){const{createdTime:t}=e;return(0,d.jsx)(A().A,{text:(0,C().nl)(t,{useUltraCompactFormat:!0}),tooltipText:(0,C().x$)(t),icon:l().k})}function $(e){const{createdTime:t,lastEditedTime:o}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(A().A,{text:(0,C().nl)(t,{useUltraCompactFormat:!0}),tooltipText:(0,d.jsx)(p().sA,{defaultMessage:"Created {absoluteCreatedTime}",id:"comment.createdAtTime.label",values:{absoluteCreatedTime:(0,C().x$)(t)}}),icon:l().k})," ",(0,d.jsx)(A().A,{text:(0,d.jsx)(p().sA,{defaultMessage:"(edited)",id:"comment.editedAtIndicator"}),tooltipText:(0,d.jsx)(p().sA,{defaultMessage:"Last edited {absoluteLastEditedTime}",id:"comment.editedAtTime.label",values:{absoluteLastEditedTime:(0,C().x$)(o)}}),icon:l().k})]})}function H(e){let{location:t,avatarSize:o,authorFontSize:i,enableTeamNameUnderline:n}=e;const r=(0,T().X)("ken_new_home_design")&&"post_creator"===t;return(0,s().IS)((e=>({avatar:{marginTop:0,marginRight:2,userSelect:"none",...r&&{position:"absolute",right:"100%",marginRight:16}},avatarBubbleTipWrapper:{position:"absolute",width:12,height:24,right:"100%",paddingLeft:8,overflow:"hidden"},avatarBubbleTip:{borderRadius:3,transform:"rotate(45deg)",background:e.surface.elevated,width:24,height:24,border:`1px solid ${e.regularDividerColor}`},avatarSuggestionBadgeWrapper:{position:"absolute",right:-2,bottom:-4},avatarSuggestionBadge:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:100,background:"light"===e.mode?"#fff":"#000",width:16,height:16,border:`1px solid ${e.palette.uiBlue[200]}`,fill:e.palette.uiBlue[600]},avatarSuggestionBadgeBacking:{position:"absolute",width:"100%",height:"100%",borderRadius:100,background:e.palette.uiBlue[100]},in:{color:e.text.secondary},timestamp:{whiteSpace:"normal",flexGrow:"updates_sidebar"===t||"comment_unfurl"===t?void 0:1,display:"inline",color:e.text.tertiary},userRow:{display:"flex",flexDirection:"row",alignItems:"center",userSelect:"none",fontSize:i,gap:6},user:{display:"flex",alignItems:"center",gap:6},placeholder:{height:8,width:81,borderRadius:6,background:e.lightDividerColor},commentAuthorPlaceholder:{marginRight:2,marginTop:"comment_unfurl"===t?14:2,height:o,width:o,borderRadius:20,flexShrink:0},teamIconAndName:{display:"flex",alignItems:"center",gap:8},linkBox:{borderRadius:6,padding:"4px 6px",marginInline:-4},author:{fontWeight:g().Wy.medium,whiteSpace:"normal",flexShrink:0},teamName:{lineHeight:1.3,...n?{borderBottom:`1px solid ${e.darkDividerColor}`}:{}},mobileAuthorRow:{display:"flex",flexDirection:"row"},mobileUserAvatar:{marginRight:10},mobileUserAndTeamLink:{display:"flex",flexDirection:"column",gap:0},mobileTeamLink:{marginTop:-4,fontSize:i}})),[o,t,n,i,r])}function V(){const e=(0,s().IS)((()=>({badge:{marginLeft:0}})),[]);return(0,d.jsx)(x().A,{style:e.badge,color:"blue",content:(0,d.jsx)(p().sA,{defaultMessage:"Suggested",id:"AuthorRow.suggested.badge"})})}},483690:(e,t,o)=>{o.d(t,{q:()=>n});o(296540);var i=o(474848);const n=(0,o(340498).wt)("resolve",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M6.6123 14.2646C7.07715 14.2646 7.43945 14.0869 7.68555 13.7109L14.0566 3.96973C14.2344 3.69629 14.3096 3.44336 14.3096 3.2041C14.3096 2.56152 13.8311 2.09668 13.1748 2.09668C12.7236 2.09668 12.4434 2.26074 12.1699 2.69141L6.57812 11.5098L3.74121 7.98926C3.48828 7.68848 3.21484 7.55176 2.83203 7.55176C2.16895 7.55176 1.69043 8.02344 1.69043 8.66602C1.69043 8.95312 1.7793 9.20605 2.02539 9.48633L5.55273 13.7588C5.84668 14.1074 6.1748 14.2646 6.6123 14.2646Z"})})},499512:(e,t,o)=>{o.d(t,{d:()=>l});o(296540);var i=()=>o(401497),n=()=>o(126158),r=()=>o(959013),s=()=>o(859428),a=o(474848);function l(e){const{enableIcon:t,onClick:o}=e,l=(0,i().IS)((e=>({moreCommentsWrapper:{position:"absolute",display:"flex",justifyContent:"center",alignItems:"flex-start",zIndex:1,left:0,right:0,height:30,background:`linear-gradient(to bottom, ${e.contentBackgroundTransparent} 0px, ${e.selectedMarginDiscussionBackground} 30px)`,marginTop:-28},tooltip:{...(0,s().n)(e,!1),cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",marginTop:-4,borderRadius:6,padding:"4px 10px 4px 8px"}})),[]),d=(0,i().DP)();return(0,a.jsx)("div",{style:l.moreCommentsWrapper,children:(0,a.jsxs)("div",{tabIndex:0,role:"button",style:l.tooltip,onClick:o,children:[t?(0,a.jsx)("div",{style:{marginRight:5},children:(0,n().m)({fill:d.text.contrastPrimary,height:12,width:12})}):null,(0,a.jsx)(r().sA,{defaultMessage:"See more",id:"discussion.moreMessageTooltip"})]})})}},781312:(e,t,o)=>{o.d(t,{y:()=>s});var i=o(296540),n=()=>o(56366),r=()=>o(472090);function s(){const[e,t]=(0,i.useState)(0),[o]=(0,i.useState)((()=>new(r().E))),s=(0,i.createRef)();return(0,i.useEffect)((()=>{if(s.current)return o.observe(s.current),()=>{o.destroy()}}),[s,o]),(0,n().K8)((()=>{e!==o.rect.state.height&&t(o.rect.state.height)}),[e,o.rect]),[s,e]}},915019:(e,t,o)=>{o.d(t,{A:()=>a});var i=o(296540),n=()=>o(962730),r=o(474848);function s(e){let{store:t,...s}=e;const a=(0,i.useCallback)((e=>(0,r.jsx)(o(791194).yf,{store:t,events:e})),[t]);return(0,r.jsx)(o(859428).A,{noStyle:!0,delayThreshold:400,placement:n().W.Bottom,alignment:n().C.Start,renderTooltip:a,...s})}const a=i.memo(s)}}]);