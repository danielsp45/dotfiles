"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[91194],{275239:(e,t,i)=>{i.d(t,{h:()=>s,l:()=>l});i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698);var n=i(296540),o=()=>i(406792);const r=new Set;function s(e,t){const i=(0,n.useMemo)((()=>o().default.DO_NOT_USE_markLegacy(e)),[e]),s=(0,n.useRef)(t);(0,n.useEffect)((()=>{s.current=t}),[t]);return(0,n.useCallback)((()=>{r.has(e)&&!t.allowMultipleFiresPerSession||(r.add(e),o().default.DO_NOT_USE_measureLegacy(i,s.current))}),[i,e,t.allowMultipleFiresPerSession])}const a=new Set;function l(e,t){const i=(0,n.useRef)(t);(0,n.useEffect)((()=>{i.current=t}),[t]);return(0,n.useCallback)((()=>{a.has(e)||(a.add(e),o().default.DO_NOT_USE_measureFromPageOriginLegacy(e,i.current))}),[e])}},279835:(e,t,i)=>{i.d(t,{$:()=>s});var n=()=>i(56366),o=()=>i(646736),r=()=>i(12974);function s(e){const{spaceStore:t,viewedUserStore:i,ignoreViewedUserStore:s=!1}=e,a=(0,o().eD)(t),l=(0,o().V_)({spaceStore:t,userStore:i});return(0,n().K8)((()=>(0,r().Wg)({spaceStore:t,actorRole:a,viewedRole:s?"member":l})),[t,a,l,s])}},362976:(e,t,i)=>{function n(e){const t=e.getSchema();if(t)for(const[n,o]of Object.entries(t)){var i;if(o&&"text"===o.type&&"summarize"===(null===(i=o.ai_inference)||void 0===i?void 0:i.type)){const t=e.getPropertyValue(n);if(t)return t}}}i.d(t,{E:()=>n})},464412:(e,t,i)=>{i.d(t,{X:()=>l});var n=()=>i(56366),o=()=>i(640653),r=()=>i(963589),s=()=>i(583238),a=()=>i(765957);function l(){const e=(0,n().K8)((()=>(0,s().mX)()),[]),t=(0,n().K8)((()=>a().default.state.currentSpaceStore&&(0,o().dT)({env:"production",spaceStore:a().default.state.currentSpaceStore})),[]),i=(0,r().X)("notion_calendar_launch_modal");return e||t||!i}},487808:(e,t,i)=>{i.r(t),i.d(t,{ExternalObjectInstanceBlockMenu:()=>A});i(944114),i(898992),i(672577);var n=i(296540),o=()=>i(484714),r=()=>i(56366),s=()=>i(617871),a=()=>i(519143),l=()=>i(3284),d=()=>i(824862),c=()=>i(959013),u=()=>i(534177),p=()=>i(795168),g=()=>i(953448),m=()=>i(751156),h=()=>i(633457),y=()=>i(722872),v=()=>i(227440),x=()=>i(53137),f=()=>i(575143),S=()=>i(928600),j=()=>i(939740),b=()=>i(89924),k=i(474848);function A(e){const{titleForReloadMenuOption:t,store:i,parentBlockStore:A,onAccept:w,onDismiss:I,extraSecondaryItemKey:C,token:B}=e,M=(0,o().v3)(),R=(0,g().J)(),T=(0,n.useCallback)((e=>{const t={blocks:[i],environment:M,publicEditMode:void 0,analyticsFrom:"external_object_instance_block_menu",lazyDependencies:R};return{key:e.key,render:(i,n)=>e.render(i,t,{onAccept:w,onFocus:n.onFocus}),action:i=>{let{event:n}=i;return e.action(t,n)}}}),[i,M,R,w]),_=(0,r().K8)((()=>{const e=i.getFormat().bot_id,t=x().A.getBotsAsRecordMap();if(e&&!0===x().A.state.loaded){const i=t.getValue({table:d().GP,id:e});if(i&&i.integration_id&&i.integration_id===s().ob)return!1}if(e&&!0===x().A.state.loaded){if(!x().A.externalAuthentications.state.find((t=>{let{id:i}=t;return e===i})))return!1}return!0}),[i]),D=[],z=!(0,r().O$)(v().e);_&&D.push({key:0,render:e=>(0,k.jsx)(b().A,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[{key:"reload external instance object",render:e=>(0,k.jsx)(f().A,{...e,title:t,svg:a().D,disabled:z,style:z?{opacity:.4}:void 0,tooltipText:z?(0,k.jsx)(c().sA,{id:"externalObjectInstanceBlockMenu.reload.offlineTooltip",defaultMessage:"Unavailable while offline"}):void 0}),action:()=>{i&&(i.isExternalObjectInstanceBlockStore()||i.isExternalObjectInstancePageBlockStore())&&h().lf({environment:M,from:"page_more_menu",store:i,spaceId:i.getSpaceId()})}}]});const O=(0,r().K8)((()=>{switch(C){case"preview_to_mention":return[T(p().oq)];case"mention_to_preview":if(!i.isExternalObjectInstanceBlockStore())return[];const e={key:"turn preview into block",render:e=>(0,k.jsx)(f().A,{...e,title:(0,k.jsx)(c().sA,{id:"hoverPreviewOverlay.action.turnPreviewIntoPreview",defaultMessage:"Turn into preview"}),svg:l().arrowSquarePathUpDownIcon}),action:()=>{A&&B&&m().createAndCommit({userAction:"HoverPreviewOverlay.transformExternalObjectInstanceMentionIntoBlock",environment:M,canUndo:!0,perform:e=>{h().FQ({block:i,parentStore:A,transaction:e,token:B}),e.postSubmitCallbacks.push((e=>{e||null==I||I()}))}})}};return[e];default:(0,u().HB)(C)}}),[C,T,i,A,B,M,I]);return D.push({key:1,render:e=>(0,k.jsx)(b().A,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[...O,T(p().tA)]}),(0,k.jsx)(S().A,{menuType:y().gu.Popup,children:(0,k.jsx)(j().Ay,{type:j().Oh.Vertical,initialFocus:void 0,onAccept:w,sections:D,style:{paddingTop:3,paddingBottom:3}})})}},495408:(e,t,i)=>{i.d(t,{p:()=>S});var n=i(296540),o=()=>i(401497),r=()=>i(30626),s=()=>i(173019),a=()=>i(959013),l=()=>i(381349),d=()=>i(522945),c=()=>i(962730),u=()=>i(397248),p=()=>i(630116),g=()=>i(704152),m=()=>i(406699),h=()=>i(285790),y=()=>i(453101),v=()=>i(839010),x=()=>i(904694),f=i(474848);function S(e){const{height:t,padding:i,padding_top:S,iframe_url:j,hoverData:b,store:k,token:A,href:w,onDismiss:I}=e,C=(0,a().YK)({editLink:{defaultMessage:"Edit link",id:"hoverPreviewOverlay.editLink"}}),B=(0,a().tz)(),M=(0,n.useRef)(null),R=(0,o().IS)((e=>({content:{width:340,height:"100%",aspectRatio:"auto",position:"relative"},container:{width:340,maxHeight:420,flexDirection:"column",alignItems:"flex-start"},buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.icon.tertiary,background:y().xA}})),[]),T=k&&k.recordStoreUIParentStore&&k.recordStoreUIParentStore instanceof p().Bv?k.recordStoreUIParentStore:k instanceof p().Bv?k:void 0;return(0,f.jsxs)("div",{style:R.container,children:[e.showEditButton?(0,f.jsx)(h().A,{onClick:e.handleEditClick,icon:s().r,color:"primary",ariaLabel:B.formatMessage(C.editLink),hasBackground:!0,style:{position:"absolute",top:8,right:8,zIndex:1}}):void 0,A&&T&&b?(0,f.jsx)("div",{style:{position:"absolute",top:8,right:8,zIndex:2},children:(0,f.jsx)(m().Ay,{popupType:m().z7.Popup,placementToOrigin:c().W.Right,alignmentToOrigin:c().C.Start,originGap:4,onClose:()=>{let e=!1;const t=M.current;t&&(e=(0,u().ux)(t.getBoundingClientRect(),d().$C.x,d().$C.y)),e||null==I||I()},renderOrigin:e=>(0,f.jsx)(g().A,{style:R.buttonStyle,...e,children:(0,r()._)({width:14,fill:l().Ay.white})}),render:e=>(0,f.jsx)(x().A,{parentBlockStore:T,store:k,token:A,href:w,hoverData:b,onAccept:()=>e.close()})})}):void 0,(0,f.jsx)(v().A,{source:j,style:R.content,preserveScale:!!(t&&t<1||i),background:!1,height:t&&t>0?t:void 0,aspectRatio:i?i/100:.75,paddingTop:S||void 0})]})}},508398:(e,t,i)=>{i.d(t,{A:()=>r});i(296540);var n=()=>i(125565),o=i(474848);const r=function(e){const{type:t,emoji:r,customEmojiStore:s,text:a,deletedText:l,subText:d}=e,c=(0,i(56366).K8)((()=>"custom"===t&&s.isDefined()&&s.getAlive()),[s,t]),u=(0,i(401497).IS)((e=>({container:{alignItems:"center"},label:{color:e.text.contrastPrimary,fontWeight:i(284371).Wy.medium,textAlign:"center",overflowWrap:"anywhere"},emojiContainer:{background:"white",borderRadius:4,padding:4,display:"flex",lineHeight:1,marginTop:2}})),[]);return(0,o.jsxs)(i(21140).wt,{gap:4,style:u.container,children:["custom"===t&&c?(0,o.jsx)("div",{style:u.emojiContainer,children:(0,o.jsx)(i(448664).A,{emojiStore:s,size:40})}):"unicode"===t?(0,o.jsx)("div",{style:u.emojiContainer,children:(0,o.jsx)(i(56086).A,{size:40,char:r})}):null,(0,o.jsx)(n().A,{isSmall:!0,isMultiline:!0,style:u.label,children:"unicode"===t||c?a:l}),d&&(0,o.jsx)(n().A,{isSmall:!0,isMultiline:!0,style:u.label,children:d})]})}},568317:(e,t,i)=>{i.d(t,{_:()=>r,p:()=>s});var n=()=>i(401497),o=()=>i(284371);function r(){return(0,n().IS)((e=>({listModule:{display:"flex",flexDirection:"column",gap:4},truncationButton:{display:"flex",gap:6,alignItems:"center",padding:4,marginLeft:-4,flexDirection:"row",flexGrow:0,alignSelf:"flex-start"},truncationIcon:{width:20,fill:e.icon.secondary},truncationLabel:{fontWeight:400},rowContainer:{display:"flex",gap:6,alignItems:"center",padding:4,marginLeft:-4,flexGrow:0,alignSelf:"flex-start"},rowLabel:{fontWeight:400},hoveredStyle:{borderRadius:"6px"}})),[])}function s(){return(0,n().IS)((e=>({card:{minWidth:280,padding:12},bio:{display:"inline-flex",alignItems:"center",gap:12,flexGrow:1,width:0,height:56},bioRight:{overflow:"hidden",width:"100%"},actionButton:{width:"100%",height:28,fontWeight:o().Wy.medium},profileTitle:{fontWeight:o().Wy.semibold},profileSubtitle:{...o().RC},loadingShimmer:{height:16,borderRadius:6,animation:"500ms ease-in fadein"}})),[])}},693689:(e,t,i)=>{i.d(t,{Y:()=>a,k:()=>l});var n=()=>i(411671),o=()=>i(630116),r=()=>i(108944),s=()=>i(731320);function a(e,t){const i=t.getRecordStoreUIRoot(),a=i instanceof o().Bv&&i.isPageBlock()&&i.isNonEditableState(),l=(0,r().Wo)(i)&&n().A.getMode(e,i),d=Boolean((0,s().QT)(l));return!t.canEdit()||d||a}function l(e,t){return!a(e,t)}},703778:(e,t,i)=>{i.d(t,{d:()=>r});i(296540);var n=i(474848);const o={viewBox:"0 0 16 16",fittedViewBox:"1.87 1.87 12.19 12.19",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M12.848 2.8a3.145 3.145 0 0 0-4.448 0L6.918 4.282a.625.625 0 0 0 .884.884l1.482-1.482c.74-.74 1.94-.74 2.68 0l.294.294c.74.74.74 1.94 0 2.68l-1.482 1.483a.625.625 0 1 0 .884.884l1.482-1.482a3.145 3.145 0 0 0 0-4.449z"}),(0,n.jsx)("path",{d:"M10.472 5.47a.625.625 0 0 0-.884 0L5.229 9.83a.625.625 0 1 0 .884.884l4.359-4.359a.625.625 0 0 0 0-.884"}),(0,n.jsx)("path",{d:"M5.167 6.917a.625.625 0 0 0-.884 0L2.8 8.4a3.146 3.146 0 0 0 0 4.448l.294.294a3.145 3.145 0 0 0 4.449 0l1.482-1.482a.625.625 0 0 0-.884-.884L6.66 12.258c-.74.74-1.94.74-2.68 0l-.295-.294c-.74-.74-.74-1.94 0-2.68L5.167 7.8a.625.625 0 0 0 0-.884"})]})},r=(0,i(340498).wt)("linkSmall",o)},755023:(e,t,i)=>{i.d(t,{x:()=>s});var n=()=>i(56366),o=()=>i(792071),r=()=>i(179034);function s(e){let{blockStore:t,closestNonAliveAncestorStore:i,intl:s}=e;return(0,n().K8)((()=>{var e;let n,a,l;const d=i&&i.table===r().ev&&i.getMovedToTrashTime();d?(n=!0,l=d,a=i.getMovedToTrashStore()):(l=t.getLastEditedTime(),a=t.getLastEditedByStore(),n=!1);return{trashAuthorStore:a,trashAuthorDisplayName:(null===(e=a)||void 0===e?void 0:e.getDisplayName(s))||s.formatMessage(o().Fvx.messages.anonymousPlaceholder),trashTimestamp:l,isMovedToTrashMetadata:n}}),[t,i,s])}},791194:(e,t,i)=>{i.d(t,{zP:()=>Lt,yf:()=>Vt,nJ:()=>wt,k4:()=>Kt,OP:()=>Wt,d0:()=>Yt});i(898992),i(354520),i(672577),i(581454),i(737550);var n=i(296540),o=()=>i(484714),r=()=>i(56366),s=()=>i(401497),a=()=>i(869190),l=()=>i(561565),d=()=>i(617871),c=()=>i(591779),u=()=>i(563884),p=()=>i(30626),g=()=>i(206267),m=()=>i(681873),h=()=>i(179034),y=()=>i(343666),v=()=>i(798880),x=()=>i(919709),f=()=>i(173979),S=()=>i(506391),j=()=>i(959013),b=()=>i(496603),k=()=>i(534177),A=()=>i(284371),w=()=>i(567141),I=()=>i(347469),C=()=>i(522945),B=()=>i(488923),M=()=>i(358006),R=()=>i(508398),T=()=>i(362976),_=()=>i(47373),D=()=>i(87878),z=()=>i(728611),O=()=>i(493208),P=()=>i(106352),E=()=>i(693689),U=()=>i(115512),L=()=>i(891078),W=()=>i(510473),H=()=>i(97059),F=()=>i(741737),K=()=>i(129522),N=()=>i(962730),Y=()=>i(377586),V=()=>i(397248),$=()=>i(765957),G=()=>i(227440),J=()=>i(230062),Z=()=>i(16990),q=()=>i(141465),X=()=>i(990261),Q=()=>i(630116),ee=()=>i(178788),te=()=>i(704152),ie=()=>i(406699),ne=()=>i(854672),oe=()=>i(807683),re=()=>i(897119),se=()=>i(187820),ae=()=>i(128295),le=()=>i(16006),de=()=>i(66858),ce=()=>i(487808),ue=()=>i(820635),pe=()=>i(21140),ge=()=>i(544862),me=()=>i(187174),he=()=>i(449506),ye=()=>i(495408),ve=()=>i(881254),xe=i(474848);function fe(e){const{token:t,store:i}=e.state,{linkMentionAnnotationData:r}=e,s=e.onDismiss,a=(0,o().v3)(),[l,d]=(0,n.useState)(!0),{iframe_url:c,height:u,padding:p,href:g,padding_top:m}=r,h=r.hasOwnProperty("description"),y=b().Im(r),[{value:v}]=(0,me().Yb)((async()=>{var e,t;if(c)return w().wZ(a,{type:"iframe"}),{result:"iframePresent"};if(h)return d(!1),y?w().wZ(a,{type:"default"}):w().wZ(a,{type:"custom"}),{result:"linkMentionContainsDescription"};d(!0);const i=await he().callApi({eventName:"getDataForLinkMention",environment:a,data:{url:g,spaceId:(null===(e=$().default.state.currentSpaceStore)||void 0===e?void 0:e.id)??(null===(t=$().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.getSpaceId()),source:"link_mention_hover"}});return"success"===i.type?"error"in i.data?(d(!1),{result:"apiFailed"}):(w().wZ(a,{type:"custom"}),d(!1),{result:"gotApiResponse",resultData:i.data}):"failed"===i.type?(d(!1),{result:"apiFailed"}):(d(!1),(0,k().HB)(i))}),[c,h,a,g,y]);let x;switch(null==v?void 0:v.result){case"linkMentionContainsDescription":x=r;break;case"gotApiResponse":x=v.resultData;break;case"apiFailed":case"iframePresent":case void 0:x=void 0;break;default:(0,k().HB)(v)}return x&&!c||!x&&!c?(0,xe.jsx)(ve().R,{hoverData:x,href:g,showEditButton:!1,store:i,token:t,onDismiss:s,loading:l}):c?(0,xe.jsx)(ye().p,{hoverData:r,iframe_url:c,showEditButton:!1,height:u,padding:p,store:i,token:t,onDismiss:s,href:g,padding_top:m}):(0,xe.jsx)(ve().R,{hoverData:x,href:g,showEditButton:!1,store:i,token:t,onDismiss:s,loading:l})}var Se=()=>i(908006),je=()=>i(584262),be=()=>i(921940),ke=()=>i(925907),Ae=()=>i(328347),we=()=>i(777447),Ie=()=>i(861017),Ce=()=>i(191772),Be=()=>i(884107),Me=()=>i(501666),Re=()=>i(319975),Te=()=>i(780054),_e=()=>i(712030),De=()=>i(267419),ze=()=>i(781286),Oe=()=>i(285790);function Pe(e){const{onDismiss:t,state:i}=e,{store:a}=i,l=(0,o().v3)(),d=(0,s().DP)(),[c,u]=(0,n.useState)(!0),p="token"===i.type?x().cQR(i.annotation):i.hyperlink,g=(0,we().lX)({url:p,baseUrl:Te().A.domainBaseUrl,publicDomainName:Te().A.publicDomainName}),m=(0,n.useCallback)((async()=>{switch(t(),i.type){case"token":Re().ek({token:i.token,store:i.store,readOnly:!1}),await Se().default.afterNextFlush(),Me().fi({type:"focusOnly",focus:!0});break;case"block":ze().hv({store:i.store});break;default:(0,k().HB)(i)}}),[t,i]),y=(0,n.useCallback)((async()=>{t(),await Se().default.afterNextFlush();const e=await Be().R.clipboardActions.load(),i=e.clipboardMessages.copiedLinkToClipboard;let n=p;const o=(0,Ie().parseRoute)({url:p,baseUrl:Te().A.domainBaseUrl,publicDomainName:Te().A.publicDomainName,isMobile:l.device.isMobile,protocol:Te().A.protocol,currentUrl:window.location.href});if("page"===o.name&&o.blockId){const e=Q().Bv.createChildStore(a,{table:h().ev,id:o.blockId});n=(0,be().A)({pageId:o.blockId,pageModel:e.getModel(),baseUrl:Te().A.domainBaseUrl,discussionId:o.discussionId,scrollToBlockId:o.scrollToBlockId,peekViewBlockId:o.peekViewBlockId,peekMode:o.peekMode,pageVisitSource:je().y8.CopyLink})}e.copyString({environment:l,stringValue:n,copiedMessage:i})}),[l,t,a,p]),v=(0,r().K8)((()=>(0,_().s8)()),[]),[{value:f}]=(0,me().Yb)((async()=>{var e,t;if(g||!v)return;u(!0);const i=await he().callApi({eventName:"getDataForLinkMention",environment:l,data:{url:p,spaceId:(null===(e=$().default.state.currentSpaceStore)||void 0===e?void 0:e.id)??(null===(t=$().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.getSpaceId()),source:"hyperlink_hover"}});if("success"===i.type)return"error"in i.data?void u(!1):(u(!1),i.data);if("failed"===i.type)throw void u(!1);return u(!1),(0,k().HB)(i)}),[l,p,g,v]),S=l.device.isSafari||l.device.isIOS,b=(0,s().IS)((e=>({wrapper:{fontSize:A().J.UISmall.desktop,color:e.text.secondary,fontWeight:A().Wy.regular,fill:e.icon.secondary,flexDirection:"column"},destination:{padding:"4px 0 4px 6px",alignItems:"center"},button:{display:"flex",flexDirection:"column",alignItems:"center",padding:"2px 6px",whiteSpace:"nowrap",marginRight:2,borderRadius:4,color:e.text.primary},destinationText:{paddingRight:6,maxWidth:250,...A().RC},icon:{height:"1em",width:"1em",marginRight:S?"0.4em":"0.5em",fill:e.icon.secondary},content:{width:340,height:"100%",aspectRatio:"auto"},title:{color:e.text.primary,fontWeight:A().Wy.semibold,whiteSpace:"normal",wordBreak:"break-word",fontSize:13,padding:"4px 0",maxWidth:300},author:{color:e.text.secondary,fontSize:A().J.UISmall.desktop},description:{wordBreak:"break-word",maxWidth:300,...A().RC,color:e.text.primary,fontSize:12,lineHeight:1.45,whiteSpace:"normal",flexDirection:"column"},text:{color:e.text.primary,fontSize:12,lineHeight:1.45},buttons:{fontWeight:A().Wy.medium}})),[S]),I=(0,j().tz)(),C=(0,j().YK)({copyLink:{defaultMessage:"Copy link",id:"hoverPreviewOverlay.copyLink"}}),B=(0,r().K8)((()=>{if(!g)return{pageIcon:(0,Ae().h)(b.icon),title:(0,xe.jsx)("div",{style:b.destinationText,children:p})};const e=Q().Bv.createChildStore(a,{table:h().ev,id:g});return{pageIcon:(0,Ce().h6)({pageModel:e.getModel(),pageRole:e.getRole(),baseUrl:Te().A.domainBaseUrl,getRecordModel:a.getRecordModel,emojiType:(0,_e().FN)(l),isSafariOrIOS:S,isClient:!0,showEmojiInline:l.device.isWindows,currentUserId:l.currentUser.id,theme:d,emojiData:De().A.state}),title:(0,xe.jsx)(le().A,{placeholder:`${window.location.protocol}//${window.location.host}${p}`,style:b.destinationText,store:e})}}),[l,a,g,b,d,S,p]),M=(0,r().K8)((()=>{if(!l.device.isMobile)return f?(f.hasOwnProperty("iframe")?w().Av(l,{type:"iframe"}):w().Av(l,{type:"custom"}),f):void 0}),[l,f]);if(v&&!g){if(M&&!M.iframe||!M)return(0,xe.jsx)(ve().R,{hoverData:M,href:p,handleEditClick:m,showEditButton:e.isHoveredTokenEditable,store:a,loading:c});if(M&&M.iframe)return(0,xe.jsx)(ye().p,{hoverData:M,iframe_url:M.iframe,height:M.height,padding:M.padding,padding_top:M.padding_top,handleEditClick:m,store:a,href:p,onDismiss:t,showEditButton:e.isHoveredTokenEditable})}return(0,xe.jsx)(pe().Ye,{style:b.wrapper,alignItems:"center",children:(0,xe.jsxs)(pe().Ye,{style:b.destination,alignItems:"center",children:[B.pageIcon,B.title,(0,xe.jsx)(Oe().A,{onClick:y,icon:ke().n,color:"primary",ariaLabel:I.formatMessage(C.copyLink)}),e.isHoveredTokenEditable?(0,xe.jsx)(te().A,{style:b.button,onClick:m,children:(0,xe.jsx)(j().sA,{defaultMessage:"Edit",id:"hoverPreviewOverlay.editButton.label"})}):void 0]})})}var Ee=()=>i(662303),Ue=()=>i(811879),Le=()=>i(755023),We=()=>i(859428);function He(e){const{store:t,closestNonAliveAncestorStore:i,originRect:n}=e,o=(0,j().tz)(),r=(0,s().IS)((e=>({tooltipStyle:{fontSize:14},mentionPageInTrashTime:{fontWeight:A().Wy.regular,color:e.text.secondary,fontSize:14},avatarStyle:{margin:"0 6px"},placeholderStyle:{marginRight:6}})),[]),{trashAuthorStore:l,trashAuthorDisplayName:d,trashTimestamp:c,isMovedToTrashMetadata:u}=(0,Le().x)({blockStore:t,closestNonAliveAncestorStore:i,intl:o}),p=(0,a().jE)(c,Ee().locale,o),g=l&&(0,xe.jsx)(Ue().E,{authorStore:l,avatarSize:18,avatarStyle:r.avatarStyle,placeholderStyle:{}});return(0,xe.jsx)(We().A,{forceVisibleState:!0,originRect:n,render:()=>{},renderTooltip:()=>(0,xe.jsxs)("div",{children:[(0,xe.jsxs)(pe().Ye,{alignItems:"center",children:[u?(0,xe.jsx)(j().sA,{defaultMessage:"Moved to Trash by",id:"hoverPreviewOverlay.pageInTrash.message.movedToTrashBy"}):(0,xe.jsx)(j().sA,{defaultMessage:"Last edited by",id:"hoverPreviewOverlay.pageInTrash.message.lastEditedBy"}),g||(0,xe.jsx)("div",{style:r.placeholderStyle}),d]}),(0,xe.jsx)("div",{style:r.mentionPageInTrashTime,children:p})]}),placement:N().W.Bottom,alignment:N().C.Start,style:r.tooltipStyle})}i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698);var Fe=()=>i(764781),Ke=()=>i(733816),Ne=()=>i(42583),Ye=()=>i(402390),Ve=()=>i(980208),$e=()=>i(296798),Ge=()=>i(710149),Je=()=>i(864943),Ze=()=>i(125565),qe=()=>i(453697),Xe=()=>i(37433),Qe=()=>i(249847),et=()=>i(963589),tt=()=>i(640653);var it=()=>i(554283),nt=()=>i(646736),ot=()=>i(299487),rt=()=>i(645200),st=()=>i(694498),at=()=>i(275239),lt=()=>i(464412),dt=()=>i(404141),ct=()=>i(12974),ut=()=>i(612740);var pt=()=>i(568317),gt=()=>i(279835);const mt=(0,j().YK)({personalPronoun:{id:"personHoverCard.personalPronoun",defaultMessage:"You"}});function ht(e){const{icon:t,tooltipText:i,stringValue:r,getCopiedMessage:a}=e,l=(0,o().v3)(),[d,c]=(0,it().B)(),u=(0,n.useCallback)((async()=>{const e=await Be().R.clipboardActions.load();e.copyString({environment:l,stringValue:r,copiedMessage:a(e)})}),[l,a,r]),p=(0,s().IS)((e=>({iconContainer:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",padding:4},icon:{width:16,height:16,fill:c?e.icon.primary:e.icon.tertiary,transition:"fill 0.15s ease"}})),[c]);return(0,xe.jsx)(We().A,{renderTooltip:()=>i,render:e=>(0,xe.jsx)("div",{...e,ref:d,style:p.iconContainer,onClick:u,role:"button","aria-label":i,tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),u())},children:t(p.icon)})})}function yt(e,t){return e?` (${t.formatMessage(mt.personalPronoun)})`:""}function vt(e){let{index:t}=e;return(0,xe.jsx)("span",{style:{whiteSpace:"pre"},children:(0,xe.jsx)(j().sA,{defaultMessage:", ",id:"personHoverCard.userInfo.groupSeparatorValue"})},t)}function xt(e){switch(e.membershipType){case"none":return(0,xe.jsx)(j().sA,{id:"personHoverCard.memberStatus.none",defaultMessage:"Deactivated"});case"page_guest":return(0,xe.jsx)(j().sA,{id:"personHoverCard.memberStatus.guest",defaultMessage:"Guest"});case"restricted_member":return(0,xe.jsx)(j().sA,{id:"personHoverCard.memberStatus.restricted_member",defaultMessage:"Restricted Member"});case"member":return(0,xe.jsx)(j().sA,{id:"personHoverCard.memberStatus.member",defaultMessage:"Member"});case"membership_admin":return(0,xe.jsx)(j().sA,{id:"personHoverCard.memberStatus.admin",defaultMessage:"Admin"});case"owner":return(0,xe.jsx)(j().sA,{id:"personHoverCard.memberStatus.owner",defaultMessage:"Workspace Owner"});default:(0,k().HB)(e.membershipType)}}function ft(e){const{permissionGroupNames:t,membershipType:i,isExtendedUserProfileLoading:n,areTeamsLoading:o,teamspaceNames:r,scimTitle:s}=e,a=(0,pt().p)();return n?(0,xe.jsx)(Ge().A,{style:a.loadingShimmer}):s?(0,xe.jsx)(Ze().A,{isSmall:!0,style:a.profileSubtitle,children:s}):t.length>0?(0,xe.jsx)(Ze().A,{isSmall:!0,style:a.profileSubtitle,children:(0,m().A)(t.slice(0,3),(e=>(0,xe.jsx)(vt,{index:e},e)))}):o?(0,xe.jsx)(Ge().A,{style:a.loadingShimmer}):r.length>0?(0,xe.jsx)(Ze().A,{isSmall:!0,style:a.profileSubtitle,children:(0,m().A)(r.slice(0,3),(e=>(0,xe.jsx)(vt,{index:e},e)))}):i?(0,xe.jsx)(Ze().A,{isSmall:!0,style:a.profileSubtitle,children:(0,xe.jsx)(xt,{membershipType:i})}):null}function St(e){const t=(0,j().tz)(),{isExtendedUserProfileLoading:i,timeZone:n}=e,o=(0,pt().p)();return i?(0,xe.jsx)(Ge().A,{style:o.loadingShimmer}):n?(0,xe.jsx)(Ze().A,{isSmall:!0,isSecondaryColor:!0,style:o.profileSubtitle,children:(0,xe.jsx)(j().sA,{id:"personHoverCard.userInfo.timeZone",defaultMessage:"{time} local time",values:{time:(new Date).toLocaleTimeString((0,Ye().H)(t),{timeZone:n,hour:"2-digit",minute:"2-digit",hour12:!0})}})}):null}const jt={timeZone:void 0,permissionGroups:[]};function bt(e){let{userStore:t}=e;const i=(0,j().tz)(),s=(0,o().v3)(),a=(0,at().h)("person_hover_card_loaded",{environment:s,allowMultipleFiresPerSession:!0}),l=(0,r().O$)($().AppStoreCurrentSpaceStore),d=(0,r().K8)((()=>{var e;if(l)return null===(e=(0,nt().dp)(l,t.id))||void 0===e?void 0:e.getMembershipType()}),[l,t]),c=(0,r().K8)((()=>t.id),[t]),u=(0,Qe().T)()===c,{value:p,isLoading:g}=function(e){let{userId:t}=e;const i=(0,o().v3)(),n=(0,r().O$)($().AppStoreCurrentSpaceStore),[{status:s,error:a,value:l}]=(0,me().Yb)((async()=>{if(!n)return;if((0,tt().IL)(n))return;const e=await he().callApi({eventName:"getExtendedUserProfile",environment:i,data:{userId:t,spaceId:n.id}});if("failed"===e.type)throw e.error;if(e){const t=e.data.permissionGroups??[];return{timeZone:e.data.timeZone,permissionGroups:t}}}),[i,t,n]);return void 0===n?{isLoading:!0,error:void 0,value:void 0}:{isLoading:"pending"===s||"idle"===s,error:a,value:l}}({userId:c}),{timeZone:m,permissionGroups:h}=p??jt,y=(0,r().K8)((()=>new Set(h.map((e=>e.id)))),[h]),v=function(e){return e.sort(((e,t)=>e.memberCount-t.memberCount)).map((e=>e.name))}(h),{teams:x,isLoading:f}=(0,Xe().S3)({fromCache:!0,includeArchived:!1,spaceStore:l}),S=(0,r().K8)((()=>{if(!x)return[];const e=x.filter((e=>e.isMemberOrGuest(c,y)));return(0,ct().PZ)(e).map((e=>e.getName())).filter((e=>void 0!==e))}),[x,c,y]),{name:b,email:k}=(0,r().K8)((()=>({name:t.getFullName(i),email:t.getEmail()})),[t,i]),A=(0,r().K8)((()=>t.isDefined()),[t]),w=(0,r().K8)((()=>(0,ct().MN)({userId:c,currentSpaceStore:l,environment:s})),[c,l,s]),I=(0,F().c)({spaceStore:l,viewedUserStore:t}),C=(0,gt().$)({spaceStore:l,viewedUserStore:t}),B=(0,lt().X)(),M=(0,et().X)("debug_user_info_quick_copy"),R=(0,n.useCallback)((()=>{k&&(B?(0,rt().YQ)({environment:s,email:k,from:"peopleHoverCard"}):(st().A.setState({signupCtaAttribution:"peopleHoverCard"}),ot().UW(s,"notion_calendar_launch_promo")))}),[B,s,k]),T=(0,n.useCallback)((e=>{e.metaKey||dt().A.setState({...dt().A.state,open:!1})}),[]);(0,n.useEffect)((()=>{A&&d&&!g&&!f&&a()}),[A,d,g,f,a]);const _=function(e){const{currentSpaceStore:t,environment:i,hoveredUserId:n,propertyId:o}=e;return(0,r().K8)((()=>{if(!t)return;const e=i.idCreator.getSpaceIdCreatorSync(t.id),r=(0,Ve().rf)({userId:n,spaceIdCreator:e});return Q().Bv.createChildStore(t,(0,ut().iL)({blockId:r,spaceId:t.id})).getProperties()[o]}),[t,i,n,o])}({currentSpaceStore:l,environment:s,hoveredUserId:c,propertyId:(0,Ve().No)("title")}),D=(0,pt().p)();if(!(k&&A&&I&&d&&(0,Ve().$R)(d)))return null;const z=b||k,O=(0,xe.jsx)(Ze().A,{style:D.profileTitle,children:z+yt(u,i)});return(0,xe.jsx)("div",{style:D.card,children:(0,xe.jsxs)(pe().wt,{gap:16,children:[(0,xe.jsx)(pe().Ye,{children:(0,xe.jsxs)("div",{style:D.bio,children:[w&&C?(0,xe.jsx)($e().A,{href:w,onClick:T,ignoreLocalHoverState:!0,children:(0,xe.jsx)(qe().A,{userStore:t,size:56})}):(0,xe.jsx)(qe().A,{userStore:t,size:56}),(0,xe.jsxs)(pe().wt,{gap:3,style:D.bioRight,children:[(0,xe.jsxs)(pe().Ye,{gap:4,alignItems:"center",children:[w&&C?(0,xe.jsx)($e().A,{href:w,onClick:T,ignoreLocalHoverState:!0,children:O}):O,M?(0,xe.jsxs)(pe().Ye,{alignItems:"center",children:[(0,xe.jsx)(ht,{icon:Ke().o,tooltipText:"Copy email address",stringValue:k,getCopiedMessage:e=>e.clipboardMessages.copiedEmailToClipboard}),(0,xe.jsx)(ht,{icon:Fe().V,tooltipText:"Copy user ID",stringValue:t.id,getCopiedMessage:e=>e.clipboardMessages.copiedUserIdToClipboard})]}):null]}),(0,xe.jsx)(ft,{isExtendedUserProfileLoading:g,scimTitle:_,permissionGroupNames:v,areTeamsLoading:f,teamspaceNames:S,membershipType:d}),(0,xe.jsx)(St,{isExtendedUserProfileLoading:g,timeZone:m})]})]})}),u?null:(0,xe.jsxs)(pe().Ye,{gap:12,children:[(0,xe.jsx)(Je().A,{size:"lg",style:D.actionButton,onClick:()=>{window.open(`mailto:${k}`,"_blank")},iconLeading:Ke().o,iconStyle:{width:16,height:16},children:(0,xe.jsx)(Ze().A,{children:(0,xe.jsx)(j().sA,{id:"personHoverCard.actionButtons.email",defaultMessage:"Email"})})}),(0,xe.jsx)(Je().A,{size:"lg",style:D.actionButton,onClick:R,iconLeading:Ne().D,iconStyle:{width:16,height:16},children:(0,xe.jsx)(j().sA,{id:"personHoverCard.actionButtons.schedule",defaultMessage:"Schedule"})})]})]})})}function kt(e){const t=(0,r().O$)($().AppStoreCurrentSpaceStore),i=(0,r().K8)((()=>{if(!t)return;if("user"===e.state.type)return e.state.store;const i=e.state.annotation;return Q().LU.createChildStore(t,{id:i[1],table:v().oo})}),[e.state,t]),n=(0,r().K8)((()=>!!i&&i.isDefined()),[i]);return i&&n&&t?(0,xe.jsx)(bt,{userStore:i}):null}const At=20;function wt(e){const t=(0,o().v3)(),i=(0,r().O$)(J().A,"HoverPreviewOverlay"),{state:s,pinPopup:a,unpinPopup:l,hasBeenHovering:d,isPinned:u,dismissPopup:p}=function(){const[e,t]=(0,n.useState)(!1),[i]=(0,r().$y)(q().A),o=(0,c().lW)(i,400,Object.is),[s,a]=(0,n.useState)(void 0),l=s||(e?void 0:o),d=(0,n.useCallback)((()=>a(l)),[l]),u=(0,n.useCallback)((()=>{a(void 0)}),[]),p=(0,n.useCallback)((()=>{u(),t(!0)}),[u]);return(0,n.useEffect)((()=>{t(!1)}),[o]),{state:l,pinPopup:d,unpinPopup:u,hasBeenHovering:i&&i===l,isPinned:Boolean(s),dismissPopup:p}}(),g=(0,r().O$)($().AppStoreCurrentSpaceStore),m=(0,F().c)({spaceStore:g,viewedUserStore:void 0,ignoreViewedUserStore:!0}),h=function(e){const t=(0,o().v3)();return(0,r().K8)((()=>!!e&&(0,E().k)(t,e.store)),[e,t])}(s),y=(0,n.useMemo)((()=>Boolean(s&&function(e,t){switch(e.type){case"token":return e.annotations.some(x().sh$)||t&&e.annotations.some(x().N53)||e.annotations.some(x().rie)||e.annotations.some(x().ik2)||e.annotations.some(x().n5B);case"block":return Boolean(e.hyperlink);case"user":return!0;case"tab":return!1;default:(0,k().HB)(e)}}(s,h))),[s,h]),v=(0,n.useMemo)((()=>s&&function(e){switch(e.type){case"token":return e.token.node.getBoundingClientRect();case"block":return K().K.getRect(e.store);case"user":case"tab":return e.domRect;default:(0,k().HB)(e)}}(s)),[s]),f=v&&0===v.width&&0===v.height&&0===v.left&&0===v.top,S=y?!f:Boolean(!i&&d&&!f),[,j]=(0,r().$y)(Z().A);(0,n.useEffect)((()=>(j({isPinned:u}),()=>j({isPinned:!1}))),[u,j]);const A=(0,n.useMemo)((()=>"token"===(null==s?void 0:s.type)&&(null==s?void 0:s.annotations.some(x().n5B))),[s]),w=!("token"!==(null==s?void 0:s.type)||null!=s&&s.annotations.some(x().N53)||null!=s&&s.annotations.some(x().jIt)||A),C=(0,n.useMemo)((()=>"token"===(null==s?void 0:s.type)&&(null==s?void 0:s.annotations.some(x().nNl))),[s]),B=(0,n.useMemo)((()=>(m&&("token"===(null==s?void 0:s.type)?null==s?void 0:s.annotations.some(x().rie):"user"===(null==s?void 0:s.type)))??!1),[m,s]),M=(0,n.useCallback)((()=>B?N().C.End:C?N().C.Center:N().C.Start),[B,C]),R=(0,n.useCallback)((()=>B||A?N().W.Top:N().W.Bottom),[B,A]),T=(0,r().O$)(t.RouterStore);return(0,n.useEffect)((()=>{p()}),[T,p]),(0,n.useEffect)((()=>{const e=b().nF((()=>{I().co(),p()}),200,{leading:!0});return z().P4(window,"scroll",e,!0),()=>z().Ol(window,"scroll",e,!0)}),[p]),(0,xe.jsx)(re().Ay,{disableMouseCapture:!0,preventCaptureEsc:!0,preventPointerEvents:S&&!y,preventScaleTransition:!0,preventOpacityTransition:!0,popupType:Y().n.Popup,open:S,originRect:v,originGap:6,alignmentToOrigin:M(),placementToOrigin:R(),useLightBoxShadow:w,render:()=>s&&(0,xe.jsx)("div",{onMouseEnter:a,onMouseLeave:l,children:(0,xe.jsx)(It,{state:s,isHoveredTokenEditable:h,onDismiss:l,originRect:v})}),...C?{borderRadius:6}:{}})}function It(e){const t=(0,r().O$)($().AppStoreCurrentSpaceStore),i=(0,o().Y0)(),n=(0,s().IS)((e=>({noMembersInGroupStyle:{fontSize:A().J.UISmall.desktop,color:e.text.secondary,padding:"4px 8px"}})),[]),a="token"===e.state.type?e.state.annotations:void 0,l=null==a?void 0:a.find(x().ik2),d=(0,r().K8)((()=>{if((0,_().YE)()&&l)return x().q1R(l)}),[l]),c=null==a?void 0:a.find(x().sh$),u=null==a?void 0:a.find(x().qsB),p=null==a?void 0:a.find(x().RaC),g=null==a?void 0:a.find(x().go0),m=a?x().MzR(a):void 0,h=null==a?void 0:a.find(x().jIt),f=null==a?void 0:a.find(x().rie),S=(0,r().K8)((()=>{if(f&&t)return Q().LU.createChildStore(t,{id:f[1],table:v().oo})}),[f,t]),b=(0,F().c)({spaceStore:t,viewedUserStore:S}),k=null==a?void 0:a.find(x().nNl),w=null==a?void 0:a.find(x().n5B),I=(0,r().K8)((()=>{if(!p)return;const e=x().FHi(p);if(!e)return;return t?(0,W().E)({groupId:null==e?void 0:e.groupId,spaceStore:t}).getModel():void 0}),[t,p]);if(null==a?void 0:a.some((e=>{if(x().JCc(e)){const t=x().FLg(e);return t&&"everyone"!==t.mentionType}return!1})))return null;if("user"===e.state.type&&!i.isMobile)return(0,xe.jsx)(kt,{...e,state:e.state,onDismiss:e.onDismiss});if("tab"===e.state.type){const t=e.state;return(0,xe.jsx)(Ft,{...e,state:t,onDismiss:e.onDismiss})}if("token"!==e.state.type)return null;if(c&&e.state.store.table!==y().SN)return(0,xe.jsx)(Pe,{...e,state:{...e.state,annotation:c}});if(u)return(0,xe.jsx)(Bt,{...e,state:{...e.state,annotation:u}});if(p){if(x().FHi(p)&&I)return(0,xe.jsx)(ue().Q,{group:I,limit:10,color:"white_background",trackHover:!0,noMembersMessage:(0,xe.jsx)(pe().Ye,{style:n.noMembersInGroupStyle,children:(0,xe.jsx)("div",{style:A().RC,children:(0,xe.jsx)(j().sA,{id:"groupPreview.noUsers",defaultMessage:"No users in this group"})})})})}else if(d&&!i.isMobile)return(0,xe.jsx)(fe,{state:e.state,isHoveredTokenEditable:e.isHoveredTokenEditable,linkMentionAnnotationData:d,onDismiss:e.onDismiss});return k?(0,xe.jsx)(Ct,{...e,state:{...e.state,annotation:k},currentSpaceStore:t}):g?(0,xe.jsx)(Mt,{...e,state:{...e.state,annotation:g}}):m&&!i.isMobile?(0,xe.jsx)(Lt,{...e,state:{...e.state,annotation:m},onDismiss:e.onDismiss}):h&&!i.isMobile?(0,xe.jsx)(Ft,{...e,state:{...e.state,annotation:h},onDismiss:e.onDismiss}):b&&f&&!i.isMobile?(0,xe.jsx)(kt,{...e,state:{...e.state,annotation:f},onDismiss:e.onDismiss}):w?(0,xe.jsx)(B().YY,{store:e.state.store,annotation:w,onDismiss:e.onDismiss}):null}function Ct(e){var t,i;const{store:n,annotation:o}=e.state,a=x().qS0(o),l=a&&Q().sk.createChildStore(n,a),d=(0,r().K8)((()=>{if(null!=l&&l.isDefined())return null==l?void 0:l.getModel().getRenderTitle()}),[l]),c=(0,r().K8)((()=>(0,D().wA)({spaceStore:e.currentSpaceStore})),[e.currentSpaceStore]),u=(0,s().IS)((e=>({container:{backgroundColor:e.tooltipBackground,padding:"4px 8px",maxWidth:250,width:"max-content"},text:{color:e.text.contrastSecondary}})),[]);return l?(0,xe.jsx)("div",{style:u.container,children:(0,xe.jsx)(R().A,{type:"custom",customEmojiStore:l,text:(0,xe.jsx)("span",{className:"notranslate",children:d}),deletedText:(0,xe.jsx)(j().sA,{defaultMessage:"{name} <medium>(deleted)</medium>",id:"HoverPreviewOverlay.customEmojiDeleted",values:{name:(0,xe.jsx)("span",{className:"notranslate",children:d}),medium:e=>(0,xe.jsx)("span",{style:u.text,children:e})}}),subText:null!==(t=e.currentSpaceStore)&&void 0!==t&&t.id&&a.spaceId!==(null===(i=e.currentSpaceStore)||void 0===i?void 0:i.id)&&c?(0,xe.jsx)("span",{style:u.text,children:(0,xe.jsx)(j().sA,{id:"HoverPreviewOverlay.customEmojiUpload",defaultMessage:"Right-click to add to your workspace"})}):void 0})}):null}function Bt(e){const{annotation:t}=e.state,i=x().K7D(t),n=(0,s().IS)((e=>({container:{fontSize:A().J.UISmall.desktop,color:e.text.secondary,padding:"4px 8px"},icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.icon.secondary}})),[]),o=(0,j().tz)(),r="relative"===i.date_format?"ll":"relative",l=(0,a().ZF)({value:i,date_format:r,time_format:"h:mm A",allowRelativeDates:!0,intl:o});return l===(0,a().ZF)({value:i,date_format:i.date_format,time_format:i.time_format,allowRelativeDates:!0,intl:o})?null:(0,xe.jsxs)(pe().Ye,{style:n.container,alignItems:"center",children:[(0,u().k)(n.icon),(0,xe.jsx)("div",{style:A().RC,children:l})]})}function Mt(e){const{annotation:t}=e.state,i=x().y0Y(t),n=(0,j().tz)(),o=(0,f().EC)(i.type,n),r=(0,s().IS)((e=>({container:{fontSize:A().J.UISmall.desktop,color:e.text.secondary,padding:"4px 8px"}})),[]);return(0,xe.jsx)(pe().Ye,{style:r.container,alignItems:"center",children:(0,xe.jsx)("div",{style:A().RC,children:o})})}function Rt(e){var t;const{renderConfig:i,store:n}=e,o=(0,s().IS)((e=>({title:{color:e.text.primary,fontWeight:A().Wy.semibold,whiteSpace:"initial",fontSize:13,padding:"4px 0",width:"100%"},header:{color:e.text.secondary,fontSize:A().J.UISmall.desktop},dictionaryKey:{color:e.text.tertiary,fontWeight:A().Wy.regular,fontSize:A().J.UISmall.desktop},dictionaryValue:{color:e.text.secondary,fontSize:A().J.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"}})),[]);return(0,xe.jsxs)(xe.Fragment,{children:[i.title?(0,xe.jsx)(pe().Ye,{children:(0,xe.jsx)(P().Ic,{...i.title,store:n,style:o.title})}):void 0,i.headerAttributes&&i.headerAttributes.length>0?(0,xe.jsx)(pe().Ye,{alignItems:"center",style:{...o.header,marginBottom:8},children:(0,m().A)(i.headerAttributes.map(((e,t)=>(0,xe.jsx)(P().Ic,{...e,store:n,style:{...o.header,...A().RC}},`attribute-${t}`)))||[],(e=>(0,xe.jsxs)("span",{children:[" ","·"," "]},`dot-${e}`)))}):void 0,i.dictionaryAttributes&&i.dictionaryAttributes.length>0?(0,xe.jsx)(pe().wt,{children:i.dictionaryAttributes.map(((e,t)=>{var r;let{key:s,value:a}=e;return(0,xe.jsxs)(pe().Ye,{style:{marginBottom:t!==((null===(r=i.dictionaryAttributes)||void 0===r?void 0:r.length)??0)-1?4:8},children:[(0,xe.jsx)("div",{style:{marginRight:8,width:"30%",display:"flex",alignItems:"center"},children:(0,xe.jsx)("span",{style:o.dictionaryKey,children:(0,xe.jsx)(j().sA,{...s.formatter,values:{value:a.attribute.name}})})}),(0,xe.jsxs)("div",{style:{width:"70%",display:"flex",alignItems:"center"},children:[a.icon&&(0,S().nN)(a.icon)?(0,xe.jsx)(ne().A,{type:"image_url",imageURL:a.icon.values[0],size:16,style:{marginRight:6}}):void 0,(0,xe.jsx)(P().Ic,{...a,store:n,style:o.dictionaryValue,avatarStyle:{marginRight:6}})]})]},t)}))}):void 0,i.bodyAttribute&&!(0,S().Q7)(i.bodyAttribute)?(0,xe.jsx)(pe().Ye,{style:((null===(t=i.dictionaryAttributes)||void 0===t?void 0:t.length)??0)>0?{marginTop:3}:{},children:(0,xe.jsx)(P().xq,{attribute:i.bodyAttribute,store:n})}):void 0,i.previewImageAttribute?(0,xe.jsx)("div",{style:{marginTop:i.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center"},children:(0,xe.jsx)("div",{children:(0,xe.jsx)(oe().Ay,{src:i.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}})})}):void 0]})}function Tt(e,t){if(!e)return null;const i=e.find((e=>e.key.formatter.id===t));return i?i.value:null}function _t(e,t){if(!e)return null;return e.filter((e=>e.attribute&&t.includes(e.attribute.id)))}function Dt(e,t){if(!e)return null;const i=e.find((e=>e.value.attribute.id===t));return i?i.value:null}function zt(e){var t;const{renderConfig:i,store:n,integration:o,haveInstanceAction:r,containerDivRef:a,token:l,parentBlockStore:d,onDismiss:c}=e,u=(0,s().IS)((e=>({title:{color:e.text.primary,fontWeight:A().Wy.medium,whiteSpace:"initial",fontSize:14,padding:"4px 0",width:"100%"},header:{color:e.text.secondary,fontSize:A().J.UISmall.desktop,paddingLeft:8,flexGrow:1,fontWeight:A().Wy.regular},dictionaryValue:{color:e.text.primary,fontSize:A().J.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.icon.tertiary},innerBox:{width:"fit-content",display:"flex",alignItems:"center",gap:4}})),[]),g=null===(t=Tt(i.dictionaryAttributes,"unfurling.github.pullRequest"))||void 0===t?void 0:t.attribute.values[0],m=Tt(i.dictionaryAttributes,"unfurling.generic.status"),h=Tt(i.dictionaryAttributes,"unfurling.generic.author"),y=function(e,t){if(!e)return null;return e.find((e=>e.formatter&&t.includes(e.formatter.id)))||null}(i.headerAttributes,["unfurling.github.githubPullMerged","unfurling.github.githubPullClosed","unfurling.github.githubPullOpened"]);return(0,xe.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:295},children:[(0,xe.jsxs)(pe().Ye,{alignItems:"center",style:{fontSize:12},children:[(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(ne().A,{type:"image_url",imageURL:o.icon,size:16,style:{marginRight:4}}),(0,xe.jsx)("div",{style:{fontWeight:A().Wy.medium},children:"GitHub"})]}),g?(0,xe.jsx)("div",{style:u.header,children:(0,xe.jsx)(j().sA,{id:"unfurling.github.pullRequestNo",defaultMessage:"PR {prNumber}",values:{prNumber:g}})}):void 0,r?void 0:(0,xe.jsx)("div",{style:{position:"relative"},children:(0,xe.jsx)(ie().Ay,{popupType:ie().z7.Popup,placementToOrigin:N().W.Right,alignmentToOrigin:N().C.Start,originGap:4,onClose:()=>{let e=!1;const t=a.current;t&&(e=(0,V().ux)(t.getBoundingClientRect(),C().$C.x,C().$C.y)),e||null==c||c()},renderOrigin:e=>(0,xe.jsx)(te().A,{style:u.buttonOrigin,...e,children:(0,p()._)({width:14})}),render:e=>(0,xe.jsx)(ce().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,xe.jsx)(j().sA,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:d,store:n,token:l,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]}),i.title?(0,xe.jsx)(pe().Ye,{children:(0,xe.jsx)(P().Ic,{...i.title,store:n,style:u.title})}):void 0,(0,xe.jsxs)(pe().Ye,{style:{gap:4,alignSelf:"stretch",alignItems:"center"},children:[m?(0,xe.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center"},children:[m.icon&&(0,S().nN)(m.icon)?(0,xe.jsx)(ne().A,{type:"image_url",imageURL:m.icon.values[0],size:14}):void 0,(0,xe.jsx)(P().Ic,{...m,store:n,style:u.dictionaryValue,avatarStyle:{marginRight:6}})]}):void 0,(0,xe.jsxs)("div",{style:{lineHeight:"16px",display:"flex",gap:4},children:[y?(0,xe.jsx)("div",{style:u.innerBox,children:(0,xe.jsx)(P().Ic,{attribute:y.attribute,store:n,style:u.dictionaryValue})}):void 0,h?(0,xe.jsxs)("div",{style:u.innerBox,children:[(0,xe.jsx)("div",{style:u.dictionaryValue,children:(0,xe.jsx)(j().sA,{id:"unfurling.generic.by",defaultMessage:"by"})}),h.icon&&(0,S().nN)(h.icon)?(0,xe.jsx)(ne().A,{type:"image_url",imageURL:h.icon.values[0],size:16,style:{marginLeft:4}}):void 0,(0,xe.jsx)(P().Ic,{...h,store:n,style:u.dictionaryValue})]}):void 0]})]})]})}function Ot(e){const{renderConfig:t,store:i,integration:n,haveInstanceAction:o,containerDivRef:r,token:a,parentBlockStore:l,onDismiss:d}=e,c=(0,s().IS)((e=>({dictionaryValue:{color:e.text.primary,fontSize:A().J.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.icon.tertiary},actionButton:{position:"absolute",top:10,right:10,zIndex:2}})),[]),u=Tt(t.dictionaryAttributes,"unfurling.generic.lastModifiedBy"),g=Tt(t.dictionaryAttributes,"unfurling.generic.lastModifiedAt");return(0,xe.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:295},children:[(0,xe.jsx)(pe().Ye,{alignItems:"center",style:{fontSize:12},children:(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(ne().A,{type:"image_url",imageURL:n.icon,size:16,style:{marginRight:4}}),(0,xe.jsx)("div",{style:{fontWeight:A().Wy.medium},children:"Figma"})]})}),(0,xe.jsxs)(pe().Ye,{style:{gap:4,alignSelf:"stretch",alignItems:"center"},children:[g?(0,xe.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,xe.jsx)("div",{style:c.dictionaryValue,children:(0,xe.jsx)(j().sA,{id:"unfurling.generic.editor",defaultMessage:"Edited"})}),(0,xe.jsx)(P().Ic,{...g,store:i,style:c.dictionaryValue})]}):void 0,u?(0,xe.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,xe.jsx)("div",{style:c.dictionaryValue,children:(0,xe.jsx)(j().sA,{id:"unfurling.generic.from",defaultMessage:"by"})}),u.icon&&(0,S().nN)(u.icon)?(0,xe.jsx)(ne().A,{type:"image_url",imageURL:u.icon.values[0],size:16,style:{marginLeft:4}}):void 0,(0,xe.jsx)(P().Ic,{...u,store:i,style:c.dictionaryValue})]}):void 0]}),t.previewImageAttribute?(0,xe.jsx)("div",{style:{marginTop:t.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center"},children:(0,xe.jsx)("div",{children:(0,xe.jsx)(oe().Ay,{src:t.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}})})}):void 0,o?void 0:(0,xe.jsx)("div",{style:c.actionButton,children:(0,xe.jsx)(ie().Ay,{popupType:ie().z7.Popup,placementToOrigin:N().W.Right,alignmentToOrigin:N().C.Start,originGap:4,onClose:()=>{let e=!1;const t=r.current;t&&(e=(0,V().ux)(t.getBoundingClientRect(),C().$C.x,C().$C.y)),e||null==d||d()},renderOrigin:e=>(0,xe.jsx)(te().A,{style:c.buttonOrigin,...e,children:(0,p()._)({width:14})}),render:e=>(0,xe.jsx)(ce().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,xe.jsx)(j().sA,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:l,store:i,token:a,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]})}function Pt(e){var t;const{renderConfig:i,store:n,integration:o,haveInstanceAction:r,containerDivRef:a,token:l,parentBlockStore:d,onDismiss:c}=e,u=(0,s().IS)((e=>({dictionaryValue:{color:e.text.primary,fontSize:A().J.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},channelValue:{color:e.text.secondary,fontSize:A().J.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.icon.tertiary},author:{paddingTop:8,alignSelf:"stretch",alignItems:"center"},actionButton:{position:"absolute",top:10,right:10,zIndex:2}})),[]),g=Tt(i.dictionaryAttributes,"unfurling.generic.author"),m=function(e,t){if(!e)return null;return e.find((e=>e.key.formatter.id===t))||null}(i.dictionaryAttributes,"unfurling.slack.slackReplyCount"),h=_t(i.headerAttributes,["title","name"]),y=_t(i.headerAttributes,["sent_at"]),v=b().hS(i.icons||[],(e=>`${e.type}:${e.values[0].toString()}`)),x=v.length>5?5:v.length;return(0,xe.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:295},children:[(0,xe.jsxs)(pe().Ye,{alignItems:"center",style:{fontSize:12},children:[(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(ne().A,{type:"image_url",imageURL:o.icon,size:16,style:{padding:2}}),(0,xe.jsx)("div",{style:{fontWeight:A().Wy.medium,marginRight:8},children:"Slack"})]}),h&&h.length>0?(0,xe.jsx)(P().Ic,{attribute:h[0].attribute,store:n,style:u.channelValue,avatarStyle:{marginRight:6}}):void 0]}),(0,xe.jsxs)(pe().Ye,{style:u.author,children:[g?(0,xe.jsx)("div",{style:{width:"fit-content",display:"flex",alignItems:"center"},children:(0,xe.jsx)(P().Ic,{...g,store:n,style:u.dictionaryValue})}):void 0,y?(0,xe.jsx)("div",{style:{marginLeft:8},children:(0,xe.jsx)(P().Ic,{...y[0],store:n,style:u.channelValue})}):void 0]}),(0,xe.jsxs)(pe().wt,{style:{gap:8},children:[i.bodyAttribute&&!(0,S().Q7)(i.bodyAttribute)?(0,xe.jsx)(pe().Ye,{style:((null===(t=i.dictionaryAttributes)||void 0===t?void 0:t.length)??0)>0?{marginTop:3}:{},children:(0,xe.jsx)(P().xq,{attribute:i.bodyAttribute,store:n})}):void 0,(0,xe.jsxs)(pe().Ye,{style:{alignSelf:"stretch",alignItems:"center"},children:[i.icons&&m?(0,xe.jsx)(Ut,{renderConfig:i}):void 0,m?(0,xe.jsx)(P().Ic,{formatter:m.key.formatter,attribute:m.value.attribute,store:n,style:{...u.channelValue,transform:`translateX(-${3*(x-1)}px)`},avatarStyle:{marginRight:6}}):void 0]})]}),r?void 0:(0,xe.jsx)("div",{style:u.actionButton,children:(0,xe.jsx)(ie().Ay,{popupType:ie().z7.Popup,placementToOrigin:N().W.Right,alignmentToOrigin:N().C.Start,originGap:4,onClose:()=>{let e=!1;const t=a.current;t&&(e=(0,V().ux)(t.getBoundingClientRect(),C().$C.x,C().$C.y)),e||null==c||c()},renderOrigin:e=>(0,xe.jsx)(te().A,{style:u.buttonOrigin,...e,children:(0,p()._)({width:14})}),render:e=>(0,xe.jsx)(ce().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,xe.jsx)(j().sA,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:d,store:n,token:l,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]})}function Et(e){const{renderConfig:t,store:i,integration:n,haveInstanceAction:o,containerDivRef:r,token:a,parentBlockStore:l,onDismiss:d,fileType:c}=e,u=(0,s().IS)((e=>({dictionaryValue:{color:e.text.primary,fontSize:A().J.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.icon.tertiary},actionButton:{position:"absolute",top:10,right:10,zIndex:2},imageBackground:{marginTop:t.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center",padding:"docs"===c?"14px 54px":"14px 34px",borderRadius:6,background:"doc"===c?"#4285F4":"sheet"===c?"#34A853":"#F8CB4A"}})),[c,t.dictionaryAttributes]),g=Dt(t.dictionaryAttributes,"username"),m=Dt(t.dictionaryAttributes,"updated_at"),h="doc"===c?"Google Docs":"sheet"===c?"Google Sheets":"Google Slides";return(0,xe.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:288},children:[(0,xe.jsx)(pe().Ye,{alignItems:"center",style:{fontSize:12},children:(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(ne().A,{type:"image_url",imageURL:n.icon,size:16,style:{marginRight:4}}),(0,xe.jsx)("div",{style:{fontWeight:A().Wy.medium},children:h})]})}),(0,xe.jsxs)(pe().Ye,{style:{gap:4,alignSelf:"stretch",alignItems:"center"},children:[m?(0,xe.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,xe.jsx)("div",{style:u.dictionaryValue,children:(0,xe.jsx)(j().sA,{id:"unfurling.generic.editor",defaultMessage:"Edited"})}),(0,xe.jsx)(P().Ic,{...m,store:i,style:u.dictionaryValue})]}):void 0,g?(0,xe.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,xe.jsx)("div",{style:u.dictionaryValue,children:(0,xe.jsx)(j().sA,{id:"unfurling.generic.from",defaultMessage:"by"})}),(0,xe.jsx)(P().Ic,{...g,store:i,style:u.dictionaryValue})]}):void 0]}),t.previewImageAttribute?(0,xe.jsx)("div",{style:u.imageBackground,children:(0,xe.jsx)("div",{children:(0,xe.jsx)(oe().Ay,{src:t.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}})})}):void 0,o?void 0:(0,xe.jsx)("div",{style:u.actionButton,children:(0,xe.jsx)(ie().Ay,{popupType:ie().z7.Popup,placementToOrigin:N().W.Right,alignmentToOrigin:N().C.Start,originGap:4,onClose:()=>{let e=!1;const t=r.current;t&&(e=(0,V().ux)(t.getBoundingClientRect(),C().$C.x,C().$C.y)),e||null==d||d()},renderOrigin:e=>(0,xe.jsx)(te().A,{style:u.buttonOrigin,...e,children:(0,p()._)({width:14})}),render:e=>(0,xe.jsx)(ce().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,xe.jsx)(j().sA,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:l,store:i,token:a,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]})}function Ut(e){let{renderConfig:t}=e;const i=b().hS(t.icons||[],(e=>`${e.type}:${e.values[0].toString()}`));return i.length>=2?(0,xe.jsx)(pe().Ye,{style:{height:16,gap:-5.333,justifyContent:"flex-end"},children:i.slice(0,5).map(((e,t)=>(0,xe.jsx)(P().Tr,{attribute:e,isSmall:!0,isUltraSmall:!0,style:{zIndex:10-t,transform:`translateX(${-5*t}px)`,position:"relative"}},t)))}):1===i.length?(0,xe.jsx)("div",{style:{paddingRight:4},children:(0,xe.jsx)(P().Tr,{attribute:i[0],isSmall:!0,isUltraSmall:!0})}):null}function Lt(e){const{state:{annotation:t,store:i,token:a},onDismiss:c}=e,u=x().T$c(t),g=(0,o().v3)(),m=(0,s().DP)(),y=(0,n.useRef)(null),[v,f]=(0,n.useState)(!1),S=(0,r().K8)((()=>{const t=Q().Bv.createChildStore(i,{table:h().ev,id:u,spaceId:i.pointer.spaceId}),n=t.canEdit(),o=(0,_().yO)(),r=(0,O().Su)({store:t,isInDarkMode:"dark"===m.mode,canEdit:n,currentUserId:g.currentUser.id,getRenderFn:e=>t=>{var i,n;return(null===(i=e.hover)||void 0===i?void 0:i.call(e,t))||(null===(n=l().u.hover)||void 0===n?void 0:n.call(l().u,t))},showAction:void 0});if(!r)return;if(!G().A.state.online)return;const{renderConfig:s,integration:v}=r,x=Boolean(r.action),S=e.isHoveredTokenEditable,b=i.recordStoreUIParentStore&&i.recordStoreUIParentStore instanceof Q().Bv?i.recordStoreUIParentStore:void 0,k=v.id===d().Hd&&"error"===(null==r?void 0:r.action)&&428===(null==r?void 0:r.status_code);if(f(k),o){if(v.id===d().bh||v.id===d().ZY)return(0,xe.jsx)(zt,{store:t,integration:v,renderConfig:s,haveInstanceAction:x,containerDivRef:y,token:a,parentBlockStore:b,onDismiss:c});if(v.id===d().e1)return(0,xe.jsx)(Ot,{store:t,integration:v,renderConfig:s,haveInstanceAction:x,containerDivRef:y,token:a,parentBlockStore:b,onDismiss:c});if(v.id===d().zG)return(0,xe.jsx)(Pt,{store:t,integration:v,renderConfig:s,haveInstanceAction:x,containerDivRef:y,token:a,parentBlockStore:b,onDismiss:c});if(v.id===d().Hd){const e=t.getFormat().uri;let i="drive";if(e&&(i=e.includes("spreadsheets")?"sheet":e.includes("document")?"doc":e.includes("presentation")?"slide":"drive"),"drive"!==i)return(0,xe.jsx)(Et,{store:t,integration:v,renderConfig:s,haveInstanceAction:x,containerDivRef:y,token:a,parentBlockStore:b,onDismiss:c,fileType:i})}}return(0,xe.jsxs)("div",{style:{display:"flex",flexDirection:"column"},ref:y,children:[k?void 0:(0,xe.jsxs)(pe().Ye,{alignItems:"center",style:{fontSize:12},children:[(0,xe.jsx)(ne().A,{type:"image_url",imageURL:v.icon,size:16,style:{margin:4}}),(0,xe.jsx)("div",{style:{flexGrow:1,fontWeight:A().Wy.medium},children:v.name}),a&&!x&&S?(0,xe.jsx)("div",{children:(0,xe.jsx)(ie().Ay,{popupType:ie().z7.Popup,placementToOrigin:N().W.Right,alignmentToOrigin:N().C.Start,originGap:4,onClose:()=>{let e=!1;const t=y.current;t&&(e=(0,V().ux)(t.getBoundingClientRect(),C().$C.x,C().$C.y)),e||null==c||c()},renderOrigin:e=>(0,xe.jsx)(te().A,{style:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:m.icon.tertiary},...e,children:(0,p()._)({width:14})}),render:e=>(0,xe.jsx)(ce().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,xe.jsx)(j().sA,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:b,store:t,token:a,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})}):void 0]}),x&&S?(0,xe.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"6px 0"},children:(0,xe.jsx)(de().A,{canEdit:n,store:t,isHoverPreview:!0,postActionCallback:c})}):(0,xe.jsx)(Rt,{renderConfig:s,store:t})]})}),[u,i,g,m,a,c,e.isHoveredTokenEditable,y]);return S?(0,xe.jsx)("div",{style:{padding:v?"0px 15px":"12px 16px",minWidth:260,maxWidth:450},children:S}):null}function Wt(){return(0,s().IS)((e=>({icon:{height:16,width:16,fill:e.icon.purplePrimary,marginRight:2},title:{fontSize:12,color:e.icon.purplePrimary},summary:{...(0,U().pA)(4),fontSize:12,lineHeight:1.35,color:e.text.secondary,marginBottom:12},contentCover:{color:e.text.primary,fontSize:11,lineHeight:1.5,marginBottom:0,width:"110%",transform:"translateX(-13px) translateY(-2px) scale(0.91)"},contentCoverEmpty:{height:16},imageCoverWrap:{marginBottom:16},contentCoverFade:{height:48,background:`linear-gradient(to bottom, transparent, ${e.surface.elevated} 100%)`},loadingShimmer:{marginBottom:0},rendererBlockStyle:{fontSize:9}})),[])}function Ht(e){const t=(0,o().v3)(),{store:i,startBlockId:s,size:a}=e,l=Wt(),d=(0,r().K8)((()=>T().E(i)),[i]),c=d&&x().FAw(d)>=At,u=(0,n.useMemo)((()=>g().JW()),[]),p=(0,r().K8)((()=>{var e;if("tall"===a)return 200;const t=i.getModel();return!t||!t.isCollectionView()||t.hasWikiBlockUri()||null!==(e=i.getAssociatedCollectionStore())&&void 0!==e&&e.isPageTreeCollection()?84:125}),[a,i]);return(0,n.useEffect)((()=>{const e=X().uk.getCurrentPageVisitId();return w().Z3(t,{hover_session_id:u,mentioned_page_id:i.pointer.id,hover_content_type:c?"ai_summary":"content_preview",page_visit_id:e}),()=>{w().Q_(t,{hover_session_id:u,hover_content_type:c?"ai_summary":"content_preview",mentioned_page_id:i.pointer.id,page_visit_id:e})}}),[t,u,c,i.pointer.id]),s||!c?(0,xe.jsx)(M().z,{variant:"default",store:i,coverFormat:{type:"page_content"},coverContentFadedOverlay:!0,coverContentFadedOverlayStyle:l.contentCoverFade,coverHeight:p,startBlockId:s,contentWrapStyle:l.contentCover,imageCoverWrapStyle:l.imageCoverWrap,emptyGalleryCoverStyle:l.contentCoverEmpty,loadingShimmerStyle:l.loadingShimmer,showLoadingShimmer:!0,showEmptyGalleryCover:!0,onLoadProxiedImage:()=>{},rendererBlockStyle:l.rendererBlockStyle,renderAdditionalBlocks:!0}):(0,xe.jsx)("div",{children:(0,xe.jsx)("div",{style:l.summary,children:(0,xe.jsx)(ee().A,{textValue:d,parentStore:i})})})}function Ft(e){const t=(0,o().v3)(),{store:i,contentBlockStart:n}=(0,r().K8)((()=>{const t=$().default.state.currentSpaceStore;if(!t)return{store:void 0,contentBlockStart:void 0};const i="token"===e.state.type?e.state.annotation[1]:e.state.store.pointer.id,n=Q().Bv.createChildStore(t,{id:i,table:"block"});if(!n.isNavigableBlock()){return{store:n.getNavigableBlockStore(),contentBlockStart:n}}return n.isDefined()?{store:n}:{store:void 0,contentBlockStart:void 0}}),[e.state]),s=(0,r().K8)((()=>!!i&&(0,H().W)(t,i.id)),[i,t]),a=(0,L().ME)(i);return s?null:i&&a&&e.originRect?(0,xe.jsx)(He,{store:i,closestNonAliveAncestorStore:a,originRect:e.originRect}):(0,xe.jsx)(Vt,{store:i,contentBlocks:n&&[n]})}const Kt=260,Nt=24;function Yt(){return(0,s().IS)((e=>({wrapper:{width:Kt},coverContainer:{height:36,zIndex:1},content:{padding:"0 16px"},breadcrumb:{color:e.text.tertiary,fontSize:11,marginBottom:-2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%"},pageTitle:{display:"inline",fontWeight:A().Wy.semibold,color:e.text.primary,fontSize:13,lineHeight:1.15},pageTitleIcon:{zIndex:2,position:"relative",marginLeft:16,marginTop:-15,marginBottom:8},pageTitleContainer:{...(0,U().pA)(2),verticalAlign:"top",lineHeight:1.15},description:{fontSize:A().J.UISmall.desktop,color:e.icon.primary,lineHeight:1.2},empty:{height:16},highlightedBlockWrapper:{display:"flex",marginBottom:8}})),[])}function Vt(e){const{store:t,contentBlocks:i,events:n,size:o="regular"}=e,s=Yt(),{icon:a,isEmptyPage:l,content:d}=(0,r().K8)((()=>{if(!t)return{icon:void 0,isEmptyPage:!1,content:null};const e=t.isEmptyPage(),n=e?(0,xe.jsx)("div",{style:{height:Nt}}):i?i.map(((e,i)=>(0,xe.jsx)("div",{style:s.highlightedBlockWrapper,children:(0,xe.jsx)(Ht,{store:t,startBlockId:null==e?void 0:e.id,size:o})},`${e.id}_${i}`))):(0,xe.jsx)(Ht,{store:t,size:o});return{icon:t.getIcon(),isEmptyPage:e,content:n}}),[t,i,s.highlightedBlockWrapper,o]),c=(0,r().K8)((()=>(0,se().Te)(t)),[t]);return t?(0,xe.jsxs)("div",{style:s.wrapper,...n,children:[(0,xe.jsx)("div",{style:s.coverContainer,children:(0,xe.jsx)(ge().A,{store:t,disabled:!0,paddingLeft:0,paddingRight:0,height:36,proxyWidth:260})}),(0,xe.jsx)(se().B6,{disabled:!0,icon:a,iconRecordCategory:c,isEmptyPage:l,isLarge:!0,disableShrinking:!0,size:26,emojiSize:26,largeIcon:!0,style:s.pageTitleIcon}),(0,xe.jsxs)(pe().wt,{gap:4,style:s.content,children:[(0,xe.jsxs)(pe().wt,{gap:2,children:[(0,xe.jsx)(ae().Ay,{store:t,style:s.breadcrumb}),(0,xe.jsx)("div",{style:s.pageTitleContainer,children:(0,xe.jsx)(le().A,{shouldWrap:!0,maxLines:2,store:t,style:s.pageTitle})})]}),d]})]}):null}},811879:(e,t,i)=>{i.d(t,{E:()=>g});i(296540);var n=()=>i(56366),o=()=>i(401497),r=()=>i(310442),s=()=>i(824862),a=()=>i(798880),l=()=>i(534177),d=()=>i(256863),c=()=>i(453697),u=()=>i(777092),p=i(474848);function g(e){let{authorStore:t,avatarSize:i,avatarStyle:g,hasTooltip:m=!0}=e;const h=(0,n().K8)((()=>(0,u().d5)(t)),[t]),y=(0,o().IS)((e=>({placeholder:{width:i,height:i,background:e.lightDividerColor,borderRadius:i/2,flexShrink:0,...g}})),[i,g]);return h.asActor?h.table===a().oo?(0,p.jsx)(c().A,{hasTooltip:m,userValue:h.asActor,style:g,size:i,avatarShouldShowShadow:!1}):h.table===s().GP?(0,p.jsx)(d().A,{botValue:h,size:i,style:g}):h.table===r().yj?(0,p.jsx)("div",{style:y.placeholder}):void(0,l().HB)(h):(0,p.jsx)("div",{style:y.placeholder})}},820635:(e,t,i)=>{i.d(t,{Q:()=>h});i(581454),i(296540);var n=()=>i(484714),o=()=>i(56366),r=()=>i(401497),s=()=>i(187174),a=()=>i(959013),l=()=>i(284371),d=()=>i(567141),c=()=>i(449506),u=()=>i(698449),p=()=>i(765957),g=()=>i(994006),m=i(474848);function h(e){const{group:t,limit:i,noMembersMessage:h,color:y,trackHover:v}=e,x=(0,r().IS)((e=>({container:{marginBottom:4,..."white_background"===y?{fontSize:l().J.UISmall.desktop,color:e.text.secondary,padding:"4px 8px"}:{}},userContainer:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4},user:{flexGrow:1},moreMessage:{marginLeft:2,marginTop:4,..."white_background"===y?{fontSize:l().J.UISmall.desktop,color:e.text.secondary}:{color:e.text.contrastSecondary}}})),[y]),f=(0,o().O$)(p().AppStoreCurrentSpaceStore),S=(0,n().v3)();(0,o().K8)((()=>{v&&d().ZX(S,{group_id:t.group_id})}),[v,t,S]);const[{value:j}]=(0,s().Yb)((async()=>{if(!f)return;const e=await c().callApi({eventName:"getSpacePermissionGroupMembers",environment:S,data:{groupIds:[t.group_id],spaceId:f.id}});if("success"===e.type){var n;const o=null===(n=e.data.groupUsersMap[t.group_id])||void 0===n?void 0:n.userIds;return(0,u().gA)({userIds:o,limit:i,spaceStore:f})}}),[f,S,t,i]);return 0===(null==j?void 0:j.limitedUserStores.length)?(0,m.jsx)(m.Fragment,{children:h}):(0,m.jsxs)("div",{style:x.container,children:[null==j?void 0:j.limitedUserStores.map((e=>(0,m.jsx)("div",{style:x.userContainer,children:(0,m.jsx)(g().A,{style:x.user,userStore:e,avatarSize:18})},e.id))),j&&j.countRemainingUsers>0&&(0,m.jsx)("div",{style:x.moreMessage,children:(0,m.jsx)(a().sA,{id:"blockPermissionsSettings.groupPermissionUsers.tooltip",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:j.countRemainingUsers}})})]})}},881254:(e,t,i)=>{i.d(t,{R:()=>_});var n=i(296540),o=()=>i(908006),r=()=>i(484714),s=()=>i(401497),a=()=>i(925907),l=()=>i(126617),d=()=>i(703778),c=()=>i(173019),u=()=>i(340498),p=()=>i(959013),g=()=>i(381349),m=()=>i(284371),h=()=>i(884107),y=()=>i(522945),v=()=>i(115512),x=()=>i(962730),f=()=>i(397248),S=()=>i(630116),j=()=>i(704152),b=()=>i(406699),k=()=>i(854672),A=()=>i(285790),w=()=>i(807683),I=()=>i(710149),C=()=>i(8980),B=()=>i(453101),M=()=>i(21140),R=()=>i(904694),T=i(474848);function _(e){const t=(0,r().v3)(),{hoverData:i,href:_,handleEditClick:D,showEditButton:z,loading:O,store:P,token:E,onDismiss:U}=e,L=(0,s().IS)((e=>({newWrapper:{width:280,flexDirection:"column",alignItems:"flex-start"},coverContainer:{width:280,height:120},contentNew:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"12px 16px",gap:12,width:280},titleAndDescription:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:0,gap:2,width:248},linkTitle:{...(0,v().pA)(2),fontStyle:"normal",fontWeight:m().Wy.semibold,fontSize:14,lineHeight:"143%",fontFeatureSettings:"'case' on",textOverflow:"ellipsis",color:e.text.primary},newDescription:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:0,...(0,v().pA)(3),textOverflow:"ellipsis",width:248},newText:{fontSize:12,fontWeight:400,whiteSpace:"normal",wordBreak:"break-word",color:e.text.primary},buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.icon.tertiary,background:i?B().xA:"dark"===e.mode?e.palette.gray[100]:e.buttonBackground,border:i?void 0:"1px solid var(--Stroke-Deemphasized, rgba(227, 226, 224, 0.50))"},iconBoxImageStyle:{margin:1}})),[i]),W=(0,p().tz)(),H=(0,n.useRef)(null),F=(0,p().YK)({copyLink:{defaultMessage:"Copy link",id:"hoverPreviewOverlay.copyLink"},editLink:{defaultMessage:"Edit link",id:"hoverPreviewOverlay.editLink"}}),K=(0,n.useCallback)((async()=>{await o().default.afterNextFlush();const e=await h().R.clipboardActions.load(),i=e.clipboardMessages.copiedLinkToClipboard,n=_;e.copyString({environment:t,stringValue:n,copiedMessage:i})}),[t,_]),N=P&&P.recordStoreUIParentStore&&P.recordStoreUIParentStore instanceof S().Bv?P.recordStoreUIParentStore:P instanceof S().Bv?P:void 0,Y=(null==i?void 0:i.thumbnail_url)??((null==i?void 0:i.images)&&i.images.length>0&&i.images[0].url);return(0,T.jsxs)(M().wt,{style:L.newWrapper,children:[z?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(A().A,{onClick:K,icon:a().n,color:"primary",ariaLabel:W.formatMessage(F.copyLink),hasBackground:!0,style:{position:"absolute",top:8,right:8}}),(0,T.jsx)(A().A,{onClick:D,icon:c().r,color:"primary",ariaLabel:W.formatMessage(F.editLink),hasBackground:!0,style:{position:"absolute",top:8,right:35}})]}):void 0,E&&N&&!z?(0,T.jsx)("div",{style:{position:"absolute",top:8,right:8,zIndex:1},children:(0,T.jsx)(b().Ay,{popupType:b().z7.Popup,placementToOrigin:x().W.Right,alignmentToOrigin:x().C.Start,originGap:4,onClose:()=>{let e=!1;const t=H.current;t&&(e=(0,f().ux)(t.getBoundingClientRect(),y().$C.x,y().$C.y)),e||null==U||U()},renderOrigin:e=>(0,T.jsx)(j().A,{style:L.buttonStyle,...e,children:(0,l().Y)({width:u().Ev.sm,fill:i?g().Ay.white:g().Ay.uiGray})}),render:e=>(0,T.jsx)(R().A,{parentBlockStore:N,store:P,token:E,href:_,hoverData:i,onAccept:()=>e.close()})})}):void 0,Y?(0,T.jsx)(M().Ye,{style:L.coverContainer,children:(0,T.jsx)(w().Ay,{src:Y,style:{width:"100%",height:"100%",left:0,top:"calc(50% - 280px/2)"}})}):void 0,(0,T.jsxs)(M().wt,{style:L.contentNew,children:[null!=i&&i.title||null!=i&&i.description?(0,T.jsxs)(M().wt,{style:L.titleAndDescription,children:[null!=i&&i.title?(0,T.jsx)(M().Ye,{gap:2,children:(0,T.jsx)("div",{style:L.linkTitle,children:null==i?void 0:i.title})}):void 0,null!=i&&i.description?(0,T.jsx)(M().Ye,{gap:2,children:(0,T.jsx)("div",{style:L.newDescription,children:(0,T.jsx)("div",{spellCheck:!1,style:L.newText,children:(0,T.jsx)("div",{children:null==i?void 0:i.description})})})}):void 0]}):void 0,O?(0,T.jsx)(I().A,{style:{width:200,height:16}}):(0,T.jsxs)(M().Ye,{alignItems:"left",style:{display:"flex",flexDirection:"row",alignItems:"center",padding:0,gap:4,width:205,height:16},children:[null!=i&&i.favicon_url?(0,T.jsx)(k().A,{type:"image_url",imageURL:null==i?void 0:i.favicon_url,size:16,style:L.iconBoxImageStyle}):null!=i&&i.icon_url?(0,T.jsx)(k().A,{type:"image_url",imageURL:null==i?void 0:i.icon_url,size:16,style:L.iconBoxImageStyle}):(0,T.jsx)(C().I,{icon:d().d,size:"sm",color:"secondary"}),(0,T.jsx)("div",{style:{flexGrow:0,fontWeight:m().Wy.medium,color:"#787774",fontSize:12,...m().RC},children:(null==i?void 0:i.provider_name)||(null==i?void 0:i.link_provider)||_})]})]})]})}},904694:(e,t,i)=>{i.d(t,{A:()=>f});i(944114),i(296540);var n=()=>i(484714),o=()=>i(700500),r=()=>i(519143),s=()=>i(742852),a=()=>i(919709),l=()=>i(959013),d=()=>i(443120),c=()=>i(884107),u=()=>i(246826),p=()=>i(751156),g=()=>i(722872),m=()=>i(575143),h=()=>i(928600),y=()=>i(939740),v=()=>i(89924),x=i(474848);function f(e){const{store:t,parentBlockStore:i,onAccept:f,token:S,href:j,hoverData:b}=e,k=(0,n().v3)(),A=[];return A.push({key:0,render:e=>(0,x.jsx)(v().A,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[{key:"copy link",render:e=>(0,x.jsx)(m().A,{...e,title:(0,x.jsx)(l().sA,{id:"linkMention.copyLink",defaultMessage:"Copy link"}),svg:s().w}),action:async()=>{if(!t)return;if(!S)return;const e=await c().R.clipboardActions.load(),i=e.clipboardMessages.copiedLinkToClipboard,n=j;e.copyString({environment:k,stringValue:n,copiedMessage:i})}}]}),A.push({key:1,render:e=>(0,x.jsx)(v().A,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[{key:"convert to bookmark",render:e=>(0,x.jsx)(m().A,{...e,title:(0,x.jsx)(l().sA,{id:"linkMention.convertToBookmark",defaultMessage:"Turn into preview"}),svg:r().D}),action:()=>{t&&S&&p().createAndCommit({userAction:"LinkMentionMenu.convertToBookmark",environment:k,canUndo:!0,perform:e=>{if(b){const n=u().Wv({environment:k,type:o().xd.bookmark,inMemoryRecordCache:t.inMemoryRecordCache,properties:{title:b&&b.title?a().x9d(b.title):a().x9d(j),link:a().x9d(j),description:b&&b.description?a().x9d(b.description):void 0},format:{bookmark_cover:b.thumbnail_url,bookmark_icon:b.favicon_url?b.favicon_url:b.icon_url},transaction:e,spaceId:t.pointer.spaceId});d().ed({environment:k,parentBlockStore:i,blockStore:n,token:S,transaction:e})}else{const n=u().Wv({environment:k,type:o().xd.bookmark,inMemoryRecordCache:t.inMemoryRecordCache,properties:{title:a().x9d(j),link:a().x9d(j)},transaction:e,spaceId:t.pointer.spaceId});d().ed({environment:k,parentBlockStore:i,blockStore:n,token:S,transaction:e})}}})}}]}),(0,x.jsx)(h().A,{menuType:g().gu.Popup,children:(0,x.jsx)(y().Ay,{type:y().Oh.Vertical,initialFocus:void 0,onAccept:f,sections:A,style:{paddingTop:3,paddingBottom:3}})})}}}]);