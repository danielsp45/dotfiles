"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[16345],{142650:(e,t,i)=>{i.r(t),i.d(t,{default:()=>R,messages:()=>V});var s=i(296540),a=()=>i(484714),n=()=>i(56366),l=()=>i(401497),o=()=>i(340498),d=i(474848);const r=(0,o().wt)("disabledGlobe",{viewBox:"0 0 27 27",svg:(0,d.jsx)("path",{d:"M13.487.885c1.77 0 3.437.338 5.002 1.015a13.216 13.216 0 0 1 4.139 2.806 13.216 13.216 0 0 1 2.806 4.139c.677 1.557 1.015 3.22 1.015 4.989 0 1.329-.199 2.607-.597 3.834a12.81 12.81 0 0 1-1.663 3.377l-2.348-2.336 2.018-.965c.288-.61.504-1.244.648-1.904a9.39 9.39 0 0 0 .216-2.006c0-1.075-.148-2.103-.445-3.085a15.528 15.528 0 0 1-2.78 1.816c-.973.499-1.98.892-3.021 1.18.177.474.35.935.52 1.384.178.44.351.855.52 1.244l-3.732-3.732.673-.039c-.27-.99-.453-1.976-.546-2.957a16.834 16.834 0 0 1-.025-2.92c.084-.974.254-1.939.508-2.895l-.127-.025A17.942 17.942 0 0 0 14.73 7.13a19.65 19.65 0 0 0-.863 3.605l-1.308-1.32c.23-1.185.555-2.336.978-3.453A21.505 21.505 0 0 1 15.1 2.726a16.891 16.891 0 0 0-.28-.026 1.558 1.558 0 0 0-.279-.025 19.794 19.794 0 0 0-3.936 4.799L9.514 6.369c.389-.66.82-1.299 1.295-1.917.474-.618.986-1.214 1.536-1.79-.88.093-1.727.288-2.54.584-.812.288-1.57.669-2.272 1.143L6.276 3.132a12.772 12.772 0 0 1 3.377-1.65 12.355 12.355 0 0 1 3.834-.597ZM23.694 9.25a11.144 11.144 0 0 0-2.31-3.339 11.096 11.096 0 0 0-3.352-2.31 14.048 14.048 0 0 0-.596 2.856 15.699 15.699 0 0 0 0 2.958c.093.982.27 1.942.533 2.882 1.05-.28 2.056-.673 3.021-1.18a14.658 14.658 0 0 0 2.704-1.867ZM13.5 26.783c-1.769 0-3.436-.338-5.002-1.015a13.258 13.258 0 0 1-4.126-2.806 13.257 13.257 0 0 1-2.806-4.126 12.466 12.466 0 0 1-1.015-5.002c0-1.329.199-2.603.596-3.821a13.258 13.258 0 0 1 1.65-3.39L4.03 7.867c-.55.872-.981 1.811-1.295 2.818a10.814 10.814 0 0 0-.457 3.149c0 .127.005.254.013.38l.025.369a19.857 19.857 0 0 0 4.063 2.653c.008-1.05.093-2.082.254-3.097.16-1.016.393-2.006.698-2.971l1.244 1.231c-.228.83-.402 1.685-.52 2.565-.11.88-.161 1.862-.153 2.945 1.6.627 3.255 1.037 4.964 1.232a19.7 19.7 0 0 1-.342-1.486c-.094-.49-.161-.99-.204-1.498l1.816 1.803a4.261 4.261 0 0 0 .203.965c.127.017.254.03.38.038.136 0 .272-.004.407-.013l1.765 1.765a11.57 11.57 0 0 1-.927.063c-.305.009-.614.013-.927.013.254.643.538 1.278.85 1.904.322.618.674 1.22 1.054 1.803a9.848 9.848 0 0 0 2.514-1.219l1.27 1.257a12.927 12.927 0 0 1-3.403 1.65 12.237 12.237 0 0 1-3.821.597ZM7.089 23a23.751 23.751 0 0 1-.432-2.006c-.11-.66-.186-1.337-.228-2.031a18.156 18.156 0 0 1-1.905-.952 22.422 22.422 0 0 1-1.802-1.155 10.839 10.839 0 0 0 1.663 3.465A11.602 11.602 0 0 0 7.089 23Zm8.29 1.892a21.73 21.73 0 0 1-1.13-2.032 19.554 19.554 0 0 1-.889-2.133 20.538 20.538 0 0 1-5.332-1.142c.076.787.203 1.566.381 2.336.186.762.406 1.494.66 2.196a11.21 11.21 0 0 0 2.133.686c.745.169 1.51.254 2.298.254.322 0 .639-.013.952-.038.313-.026.622-.068.927-.127Zm9.077 1.294L1.147 2.891a.932.932 0 0 1-.279-.686c0-.28.093-.512.28-.698a.953.953 0 0 1 .698-.292c.279 0 .512.097.698.292L25.84 24.79a.96.96 0 0 1 .28.686c0 .27-.094.503-.28.698a.926.926 0 0 1-.698.292.871.871 0 0 1-.686-.28Z"})});var c=()=>i(721479),u=()=>i(68263),h=()=>i(220719),p=()=>i(959013),b=()=>i(284371),g=()=>i(755636),f=()=>i(675925),m=()=>i(345913),y=()=>i(285790),v=()=>i(864943),S=()=>i(204063),x=()=>i(859428),M=()=>i(125565),w=()=>i(836251),A=()=>i(891078),C=()=>i(629027),P=()=>i(976721),j=()=>i(302127),I=()=>i(716979),B=()=>i(962730),_=()=>i(765957),k=()=>i(676870),T=()=>i(525700),F=()=>i(35658);const V=(0,p().YK)({disabledByTeamspaceHeadline:{defaultMessage:"Publishing is disabled in this teamspace",id:"publishSite.disabledByTeamspace.headline"},disabledByWorkspaceHeadline:{defaultMessage:"Publishing is disabled in this workspace",id:"publishSite.disabledByWorkspace.headline"},pageInTrashHeadline:{defaultMessage:"Pages in the trash can’t be published",id:"publishSite.pageInTrash.headline"},hasAIEditsHeadline:{defaultMessage:"Pages with pending Notion AI changes can’t be published",id:"publishSite.hasAIEdits.headline"},noFullAccessHeadline:{defaultMessage:"You need full access to publish",id:"publishSite.noFullAccess.headline"}});function R(e){const{store:t,mostPermissivePublicItem:i,sudoModeStore:o,location:c}=e,{permissionItem:h,from:g}=i,y=(0,a().v3)(),x=(0,n().K8)((()=>t.getSpaceStore()),[t]),w=(0,s.useCallback)((()=>{x&&I().KD(y,{spaceStore:x}).then((e=>{(0,k().kW)(y,{target_block_id:t.id,user_current_live_sites_count:e.length})}))}),[y,t,x]),B=(0,n().K8)((()=>t.canAdmin()),[t]),V=(0,C().P)({store:t}),R=(0,A().i0)(t),L=(0,A().ty)(t),W=!B||V.disabled||R||L,K=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:W?"center":"flex-start",paddingTop:W?6:12,paddingBottom:W?24:20,paddingLeft:20,paddingRight:20,gap:W?8:0,cursor:W?"not-allowed":"default",height:y.device.isMobile&&W?"100%":W?276:"auto"},titleContainer:{display:"flex",alignItems:"center",flexDirection:"column",gap:4},title:{fontWeight:b().Wy.semibold,fontSize:16,lineHeight:1.2,color:W?e.text.secondary:e.text.primary},caption:{display:"flex",alignItems:"center",marginLeft:26,marginRight:26,marginBottom:W?0:20,width:W?"85%":"auto",textAlign:"center"},button:{display:"flex",width:"100%",padding:16,borderRadius:6,zIndex:1},disabledIcon:{height:27,width:27,margin:5,fill:e.text.tertiary},overlay:{height:12,left:0,top:0,background:e.contentBackground,width:"100%",position:"absolute"},restoreFromTrashButton:{fontSize:12,fontWeight:b().Wy.medium,margin:"12px",padding:"0px 8px",height:28}})),[W,y.device.isMobile]),U=(0,s.useCallback)((()=>{var e;const i=!(null===(e=_().default.state.currentSpaceStore)||void 0===e?void 0:e.getDisableMoveToSpace())&&h.allow_duplicate;T().d8({environment:y,type:"site",store:t});const s=(0,j().y)({store:t,allowDuplicate:i}),a=(0,u().Yi)(g);(0,P().Hc)({oldPermissionItem:h,newPermissionItem:s,wasInherited:a!==t.id,environment:y,store:t,sudoModeStore:o,location:c}),w()}),[w,y,t,h,g,o,c]),Z=(0,s.useCallback)((()=>{const{currentSpaceStore:e}=_().default.state;if(!e)return;const i="disabled_publish_modal";(0,f().o)(y,{action:"restore_page",from:i,block_type:t.getType()},(s=>m().iN({environment:y,blockStore:t,spaceId:t.pointer.spaceId||e.id,from:i}).then(s)))}),[t,y]),E=(0,p().tz)();return(0,d.jsxs)("div",{style:K.container,children:[W?r(K.disabledIcon):null,(0,d.jsxs)("div",{style:K.titleContainer,children:[W?(0,d.jsx)(H,{store:t,intl:E}):(0,d.jsx)("div",{style:K.title,children:(0,d.jsx)(p().sA,{id:"publishSite.publishTab.title",defaultMessage:"Publish to web"})}),(0,d.jsx)(M().A,{isMultiline:!0,isSecondaryColor:!0,style:K.caption,children:(0,d.jsx)(D,{store:t})}),W&&R&&(0,d.jsx)(v().A,{size:"lg",onClick:Z,style:K.restoreFromTrashButton,children:"Restore"})]}),W?null:(0,d.jsx)(F().A,{store:t}),W?null:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(S().A,{style:K.button,disabled:W,onClick:U,children:(0,d.jsx)(p().sA,{id:"publishSite.publish.title",defaultMessage:"Publish"})}),y.device.isMobile&&(0,d.jsx)("div",{style:{position:"relative",width:"100%"},children:(0,d.jsx)("div",{style:K.overlay})})]})]})}function H(e){const{store:t,intl:i}=e,s=(0,l().IS)((()=>({disabledPublishingHeadline:{fontWeight:b().Wy.medium,textAlign:"center",width:"85%"}})),[]),a=e=>(0,d.jsx)("div",{style:s.disabledPublishingHeadline,children:(0,d.jsx)(M().A,{isSecondaryColor:!0,isMultiline:!0,children:e})}),o=(0,C().P)({store:t}),r=(0,A().i0)(t),c=(0,A().ty)(t),u=(0,n().K8)((()=>!t.canAdmin()),[t]);return(0,h().MX)(o.disabled||r||c||u,"Disabled headline not allowed for block's current state"),o.disabled&&"team"===o.disabledBy?a(i.formatMessage(V.disabledByTeamspaceHeadline)):o.disabled&&"space"===o.disabledBy?a(i.formatMessage(V.disabledByWorkspaceHeadline)):a(r?i.formatMessage(V.pageInTrashHeadline):c?i.formatMessage(V.hasAIEditsHeadline):i.formatMessage(V.noFullAccessHeadline))}function D(e){const{store:t}=e,i=(0,p().tz)(),s=(0,a().v3)(),r=(0,C().P)({store:t}),u=(0,A().i0)(t),h=(0,A().ty)(t),b=(0,n().K8)((()=>!t.canAdmin()),[t]),f=(0,l().IS)((e=>({helpIcon:{width:o().Ev.sm,height:o().Ev.sm,fill:e.icon.tertiary}})),[]);if(r.disabled&&"team"===r.disabledBy)return(0,d.jsx)(p().sA,{id:"publishSite.disabledByTeamspace.caption",defaultMessage:"Contact a teamspace owner to modify this setting"});if(r.disabled&&"space"===r.disabledBy)return(0,d.jsx)(p().sA,{id:"publishSite.disabledByWorkspace.caption",defaultMessage:"Contact a workspace owner to modify this setting"});if(u)return(0,d.jsx)(p().sA,{id:"publishSite.pageInTrash.caption",defaultMessage:"Restore this page to publish it to the web"});if(h)return(0,d.jsx)(p().sA,{id:"publishSite.hasAIEdits.caption",defaultMessage:"Accept or discard changes on this page to publish it to the web"});if(b)return(0,d.jsx)(p().sA,{id:"publishSite.noFullAccess.caption",defaultMessage:"Contact someone with full access to modify this setting"});const m=i.formatMessage({id:"publishSite.help.tooltip",defaultMessage:"Learn more about Notion sites"});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(p().sA,{id:"publishSite.hasFullAccess.caption",defaultMessage:"Create a website with Notion"}),(0,d.jsx)(x().A,{renderTooltip:()=>m,render:e=>(0,d.jsx)(y().A,{...e,style:{marginLeft:2,height:20,width:20},iconStyle:f.helpIcon,onClick:()=>{g().f({environment:s,url:(0,w().xS)("guides.autogeneratedDomains")})},icon:c().questionMarkCircleSmallIcon,ariaLabel:m}),placement:B().W.Bottom})]})}},302127:(e,t,i)=>{i.d(t,{y:()=>a});var s=()=>i(217429);function a(e){const{store:t,allowDuplicate:i}=e,a=t.getPublicPermission()??{type:"public_permission",role:"none"},{is_public_share_link:n}=a;return s().default.checkGate({gateName:"sharing_anyone_with_the_link"})&&n?{...a,is_site:!0,allow_duplicate:i}:{...a,role:"reader",is_site:!0,allow_duplicate:i}}},527580:(e,t,i)=>{i.d(t,{TK:()=>o,YC:()=>l,ui:()=>n});var s=()=>i(645873);const a={pageVerification:new(s().O2)("pageVerification",(()=>Promise.all([i.e(58550),i.e(11341),i.e(29252),i.e(94891)]).then(i.bind(i,80826)))),pageVerificationBadge:new(s().O2)("pageVerificationBadge",(()=>Promise.all([i.e(75134),i.e(58550),i.e(92845),i.e(84468),i.e(5605),i.e(48486),i.e(95794),i.e(13677),i.e(56952),i.e(25497),i.e(74562),i.e(27711),i.e(11341),i.e(30291),i.e(12913),i.e(6463),i.e(93449),i.e(29252),i.e(74357),i.e(41412)]).then(i.bind(i,161901)))),pageVerificationMenuRenderer:new(s().O2)("pageVerificationMenuRenderer",(()=>Promise.all([i.e(75134),i.e(58550),i.e(92845),i.e(84468),i.e(5605),i.e(48486),i.e(95794),i.e(13677),i.e(56952),i.e(25497),i.e(74562),i.e(27711),i.e(11341),i.e(30291),i.e(12913),i.e(6463),i.e(93449),i.e(29252),i.e(74357),i.e(26207)]).then(i.bind(i,196770))))},n=(0,s()._h)(a.pageVerification,(e=>e.PageAddVerificationButton)),l=(0,s()._h)(a.pageVerificationBadge,(e=>e.PageVerificationBadge)),o=(0,s()._h)(a.pageVerificationMenuRenderer,(e=>e.PageVerificationMenuRenderer))},558410:(e,t,i)=>{i.d(t,{A:()=>n});i(898992),i(354520);var s=()=>i(496603);class a extends(()=>i(757695))().Store{getInitialState(){return{sites:{},sortAscending:!0,sortColumn:void 0}}initializeSiteResultsForSpace(e,t){this.state.sites[e]=t,this.emit()}getSortedSitesForSpace(e,t){const{sortAscending:a,sortColumn:n}=this.state,l=this.state.sites[e];if(l)switch(n){case"page":return s().My(l,(e=>i(919709).q4_(e.store.getTitleValue()).toLowerCase()),a?"asc":"desc");case"published-by":return s().My(l,(e=>{const s=e.publishedMetadata.publishedBy,a=s?i(630116).sk.createChildStore(e.store,s):void 0;return null==a?void 0:a.getDisplayName(t).toLowerCase()}),a?"asc":"desc");case"published-date":return s().My(l,(e=>e.publishedMetadata.publishedTime),a?"asc":"desc");default:return l}}removeSiteFromSpace(e,t){const i=this.state.sites[e];i&&(this.state.sites[e]=i.filter((e=>e.store.id!==t)),this.emit())}resetSitesForSpace(e){this.state.sites[e]=void 0}}const n=new a},629027:(e,t,i)=>{i.d(t,{P:()=>n});var s=()=>i(56366),a=()=>i(928153);function n(e){let{store:t}=e;return(0,s().K8)((()=>(0,a().C)({store:t})),[t])}},716979:(e,t,i)=>{i.d(t,{EL:()=>w,KD:()=>x,Ss:()=>v,l2:()=>A,n0:()=>M,rw:()=>S});i(16280),i(944114),i(898992),i(354520),i(296540);var s=()=>i(388821),a=()=>i(179034),n=()=>i(959013),l=()=>i(763824),o=()=>i(449506),d=()=>i(901389),r=()=>i(106628),c=()=>i(321172),u=()=>i(437487),h=()=>i(227440),p=()=>i(630116),b=()=>i(250484),g=()=>i(67805),f=()=>i(558410),m=i(474848);const y=50;function v(e){f().A.resetSitesForSpace(e.id)}async function S(e,t){const{spaceStore:i,currentUserId:n,limit:d}=t;if(!i.id)return;const[r]=await Promise.all([o().callApi({eventName:"getPublishedPagesForUser",environment:e,data:{spaceId:i.id,limit:d||y,fetchPublishedMetadata:!0}}),(0,l().wR)(1500)]);if("failed"===r.type)throw new Error("Failed to fetch published pages.");if(r.data.recordMap){const e=[],t=s().RecordMapWithRole.create(r.data.recordMap),l=r.data.publishedEdits;for(const{model:s}of t)if(s&&s.table===a().ev){const t=p().Bv.createChildStore(i,{table:a().ev,id:s.id}),n=l[t.id],o=n&&n.authors?n.authors[0]:void 0,d={publishedTime:null==n?void 0:n.timestamp,publishedBy:o};e.push({store:t,publishedMetadata:d})}let o=e;return n&&(o=g().X(e,n)),f().A.initializeSiteResultsForSpace(i.id,o),o}}async function x(e,t){const{spaceStore:i}=t,s=e.currentUser.id,a=await S(e,{spaceStore:i,currentUserId:s});return a?a.filter((e=>{var t;return(null===(t=e.publishedMetadata.publishedBy)||void 0===t?void 0:t.id)===s})):[]}function M(e){c().Tk(e),u().Ay.setState({...u().Ay.state,display:u().pP.Publish,tab:u().QC.Publish})}async function w(e){return new Promise(((t,i)=>{d().ui({message:(0,m.jsx)("div",{style:{textAlign:"center"},children:(0,m.jsx)(n().sA,{id:"sites.confirmUnpublish.title",defaultMessage:"Unpublish this site?"})}),description:(0,m.jsx)("div",{style:{textAlign:"center"},children:(0,m.jsx)(n().sA,{id:"sites.confirmUnpublish.caption",defaultMessage:"{pageTitle} will no longer be live on the web.",values:{pageTitle:e}})}),keepFocus:!0,items:[{label:(0,m.jsx)(n().sA,{id:"sites.confirmUnpublish.confirm",defaultMessage:"Unpublish"}),color:"red",onAccept:()=>t(!0)}],showCancel:!0})}))}async function A(e,t){if(!h().A.state.online)return[];const i=await r().T.searchActions.load();return await i.searchPublicPages({environment:t,query:e,source:"public_home_page_menu",limit:b().ZK})}},835755:(e,t,i)=>{i.d(t,{p:()=>a});i(296540);var s=i(474848);const a=(0,i(340498).wt)("collectionDescriptionSmall",{viewBox:"0 0 14 14",svg:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 4.667C6.69049 4.667 6.39366 4.54405 6.17481 4.32519C5.95595 4.10634 5.833 3.80951 5.833 3.5C5.833 3.19049 5.95595 2.89366 6.17481 2.67481C6.39366 2.45595 6.69049 2.333 7 2.333C7.30951 2.333 7.60634 2.45595 7.82519 2.67481C8.04405 2.89366 8.167 3.19049 8.167 3.5C8.167 3.80951 8.04405 4.10634 7.82519 4.32519C7.60634 4.54405 7.30951 4.667 7 4.667V4.667ZM8 11C8 11.2652 7.89464 11.5196 7.70711 11.7071C7.51957 11.8946 7.26522 12 7 12C6.73478 12 6.48043 11.8946 6.29289 11.7071C6.10536 11.5196 6 11.2652 6 11V7C6 6.73478 6.10536 6.48043 6.29289 6.29289C6.48043 6.10536 6.73478 6 7 6C7.26522 6 7.51957 6.10536 7.70711 6.29289C7.89464 6.48043 8 6.73478 8 7V11ZM7 0C5.14348 0 3.36301 0.737498 2.05025 2.05025C0.737498 3.36301 0 5.14348 0 7C0 8.85652 0.737498 10.637 2.05025 11.9497C3.36301 13.2625 5.14348 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 5.14348 13.2625 3.36301 11.9497 2.05025C10.637 0.737498 8.85652 0 7 0V0Z"})})},928153:(e,t,i)=>{i.d(t,{C:()=>o});var s=()=>i(534177),a=()=>i(247450),n=()=>i(765957),l=()=>i(108944);function o(e){let{store:t}=e;const i=(0,a().h)({blockId:t.id,setting:"publicAccess"});if((0,s().O9)(i))return i;const o=n().default.state.currentSpaceStore,d=(0,l().Uo)(t);return d?{disabled:Boolean(d.getDisablePublicAccess()),disabledBy:"team"}:!d&&null!=o&&o.getDisablePublicAccess()?{disabled:!0,disabledBy:"space"}:{disabled:!1}}}}]);