(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[16471],{716471:function(t){function e(t){t=t||{};this.Timeout=t.timeout||1,this.EditCost=t.editCost||4}var n=-1;e.Diff,e.prototype.main=function(t,e,n,r){void 0===r&&(r=this.Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Timeout);var i=r;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];void 0===n&&(n=!0);var s=n,a=this.commonPrefix(t,e),h=t.substring(0,a);t=t.substring(a),e=e.substring(a),a=this.commonSuffix(t,e);var l=t.substring(t.length-a);t=t.substring(0,t.length-a),e=e.substring(0,e.length-a);var o=this.compute_(t,e,s,i);return h&&o.unshift([0,h]),l&&o.push([0,l]),this.cleanupMerge(o),o},e.prototype.compute_=function(t,e,r,i){var s;if(!t)return[[1,e]];if(!e)return[[n,t]];var a=t.length>e.length?t:e,h=t.length>e.length?e:t,l=a.indexOf(h);if(-1!=l)return s=[[1,a.substring(0,l)],[0,h],[1,a.substring(l+h.length)]],t.length>e.length&&(s[0][0]=s[2][0]=n),s;if(1==h.length)return[[n,t],[1,e]];var o=this.halfMatch_(t,e);if(o){var g=o[0],u=o[1],c=o[2],f=o[3],p=o[4],b=this.main(g,c,r,i),m=this.main(u,f,r,i);return b.concat([[0,p]],m)}return r&&t.length>100&&e.length>100?this.lineMode_(t,e,i):this.bisect_(t,e,i)},e.prototype.lineMode_=function(t,e,r){t=(u=this.linesToChars_(t,e)).chars1,e=u.chars2;var i=u.lineArray,s=this.main(t,e,!1,r);this.charsToLines_(s,i),this.cleanupSemantic(s),s.push([0,""]);for(var a=0,h=0,l=0,o="",g="";a<s.length;){switch(s[a][0]){case 1:l++,g+=s[a][1];break;case n:h++,o+=s[a][1];break;case 0:if(h>=1&&l>=1){s.splice(a-h-l,h+l),a=a-h-l;for(var u,c=(u=this.main(o,g,!1,r)).length-1;c>=0;c--)s.splice(a,0,u[c]);a+=u.length}l=0,h=0,o="",g=""}a++}return s.pop(),s},e.prototype.bisect_=function(t,e,r){for(var i=t.length,s=e.length,a=Math.ceil((i+s)/2),h=a,l=2*a,o=new Array(l),g=new Array(l),u=0;u<l;u++)o[u]=-1,g[u]=-1;o[h+1]=0,g[h+1]=0;for(var c=i-s,f=c%2!=0,p=0,b=0,m=0,v=0,_=0;_<a&&!((new Date).getTime()>r);_++){for(var x=-_+p;x<=_-b;x+=2){for(var d=h+x,y=(E=x==-_||x!=_&&o[d-1]<o[d+1]?o[d+1]:o[d-1]+1)-x;E<i&&y<s&&t.charAt(E)==e.charAt(y);)E++,y++;if(o[d]=E,E>i)b+=2;else if(y>s)p+=2;else if(f){if((k=h+c-x)>=0&&k<l&&-1!=g[k])if(E>=(w=i-g[k]))return this.bisectSplit_(t,e,E,y,r)}}for(var A=-_+m;A<=_-v;A+=2){for(var w,k=h+A,M=(w=A==-_||A!=_&&g[k-1]<g[k+1]?g[k+1]:g[k-1]+1)-A;w<i&&M<s&&t.charAt(i-w-1)==e.charAt(s-M-1);)w++,M++;if(g[k]=w,w>i)v+=2;else if(M>s)m+=2;else if(!f){if((d=h+c-A)>=0&&d<l&&-1!=o[d]){var E;y=h+(E=o[d])-d;if(E>=(w=i-w))return this.bisectSplit_(t,e,E,y,r)}}}}return[[n,t],[1,e]]},e.prototype.bisectSplit_=function(t,e,n,r,i){var s=t.substring(0,n),a=e.substring(0,r),h=t.substring(n),l=e.substring(r),o=this.main(s,a,!1,i),g=this.main(h,l,!1,i);return o.concat(g)},e.prototype.linesToChars_=function(t,e){var n=[],r={};function i(t){for(var e="",i=0,s=-1,a=n.length;s<t.length-1;){-1==(s=t.indexOf("\n",i))&&(s=t.length-1);var h=t.substring(i,s+1);i=s+1,(r.hasOwnProperty?r.hasOwnProperty(h):void 0!==r[h])?e+=String.fromCharCode(r[h]):(e+=String.fromCharCode(a),r[h]=a,n[a++]=h)}return e}return n[0]="",{chars1:i(t),chars2:i(e),lineArray:n}},e.prototype.charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n][1],i=[],s=0;s<r.length;s++)i[s]=e[r.charCodeAt(s)];t[n][1]=i.join("")}},e.prototype.commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,s=0;n<i;)t.substring(s,i)==e.substring(s,i)?s=n=i:r=i,i=Math.floor((r-n)/2+n);return i},e.prototype.commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,s=0;n<i;)t.substring(t.length-i,t.length-s)==e.substring(e.length-i,e.length-s)?s=n=i:r=i,i=Math.floor((r-n)/2+n);return i},e.prototype.commonOverlap_=function(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var i=Math.min(n,r);if(t==e)return i;for(var s=0,a=1;;){var h=t.substring(i-a),l=e.indexOf(h);if(-1==l)return s;a+=l,0!=l&&t.substring(i-a)!=e.substring(0,a)||(s=a,a++)}},e.prototype.halfMatch_=function(t,e){if(this.Timeout<=0)return null;var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;var i=this;function s(t,e,n){for(var r,s,a,h,l=t.substring(n,n+Math.floor(t.length/4)),o=-1,g="";-1!=(o=e.indexOf(l,o+1));){var u=i.commonPrefix(t.substring(n),e.substring(o)),c=i.commonSuffix(t.substring(0,n),e.substring(0,o));g.length<c+u&&(g=e.substring(o-c,o)+e.substring(o,o+u),r=t.substring(0,n-c),s=t.substring(n+u),a=e.substring(0,o-c),h=e.substring(o+u))}return 2*g.length>=t.length?[r,s,a,h,g]:null}var a,h,l,o,g,u=s(n,r,Math.ceil(n.length/4)),c=s(n,r,Math.ceil(n.length/2));return u||c?(a=c?u&&u[4].length>c[4].length?u:c:u,t.length>e.length?(h=a[0],l=a[1],o=a[2],g=a[3]):(o=a[0],g=a[1],h=a[2],l=a[3]),[h,l,o,g,a[4]]):null},e.prototype.cleanupSemantic=function(t){for(var e=!1,r=[],i=0,s=null,a=0,h=0,l=0,o=0,g=0;a<t.length;)0==t[a][0]?(r[i++]=a,h=o,l=g,o=0,g=0,s=t[a][1]):(1==t[a][0]?o+=t[a][1].length:g+=t[a][1].length,s&&s.length<=Math.max(h,l)&&s.length<=Math.max(o,g)&&(t.splice(r[i-1],0,[n,s]),t[r[i-1]+1][0]=1,i--,a=--i>0?r[i-1]:-1,h=0,l=0,o=0,g=0,s=null,e=!0)),a++;for(e&&this.cleanupMerge(t),this.cleanupSemanticLossless(t),a=1;a<t.length;){if(t[a-1][0]==n&&1==t[a][0]){var u=t[a-1][1],c=t[a][1],f=this.commonOverlap_(u,c),p=this.commonOverlap_(c,u);f>=p?(f>=u.length/2||f>=c.length/2)&&(t.splice(a,0,[0,c.substring(0,f)]),t[a-1][1]=u.substring(0,u.length-f),t[a+1][1]=c.substring(f),a++):(p>=u.length/2||p>=c.length/2)&&(t.splice(a,0,[0,u.substring(0,p)]),t[a-1][0]=1,t[a-1][1]=c.substring(0,c.length-p),t[a+1][0]=n,t[a+1][1]=u.substring(p),a++),a++}a++}},e.prototype.cleanupSemanticLossless=function(t){function n(t,n){if(!t||!n)return 6;var r=t.charAt(t.length-1),i=n.charAt(0),s=r.match(e.nonAlphaNumericRegex_),a=i.match(e.nonAlphaNumericRegex_),h=s&&r.match(e.whitespaceRegex_),l=a&&i.match(e.whitespaceRegex_),o=h&&r.match(e.linebreakRegex_),g=l&&i.match(e.linebreakRegex_),u=o&&t.match(e.blanklineEndRegex_),c=g&&n.match(e.blanklineStartRegex_);return u||c?5:o||g?4:s&&!h&&l?3:h||l?2:s||a?1:0}for(var r=1;r<t.length-1;){if(0==t[r-1][0]&&0==t[r+1][0]){var i=t[r-1][1],s=t[r][1],a=t[r+1][1],h=this.commonSuffix(i,s);if(h){var l=s.substring(s.length-h);i=i.substring(0,i.length-h),s=l+s.substring(0,s.length-h),a=l+a}for(var o=i,g=s,u=a,c=n(i,s)+n(s,a);s.charAt(0)===a.charAt(0);){i+=s.charAt(0),s=s.substring(1)+a.charAt(0),a=a.substring(1);var f=n(i,s)+n(s,a);f>=c&&(c=f,o=i,g=s,u=a)}t[r-1][1]!=o&&(o?t[r-1][1]=o:(t.splice(r-1,1),r--),t[r][1]=g,u?t[r+1][1]=u:(t.splice(r+1,1),r--))}r++}},e.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,e.whitespaceRegex_=/\s/,e.linebreakRegex_=/[\r\n]/,e.blanklineEndRegex_=/\n\r?\n$/,e.blanklineStartRegex_=/^\r?\n\r?\n/,e.prototype.cleanupEfficiency=function(t){for(var e=!1,r=[],i=0,s=null,a=0,h=!1,l=!1,o=!1,g=!1;a<t.length;)0==t[a][0]?(t[a][1].length<this.EditCost&&(o||g)?(r[i++]=a,h=o,l=g,s=t[a][1]):(i=0,s=null),o=g=!1):(t[a][0]==n?g=!0:o=!0,s&&(h&&l&&o&&g||s.length<this.EditCost/2&&h+l+o+g==3)&&(t.splice(r[i-1],0,[n,s]),t[r[i-1]+1][0]=1,i--,s=null,h&&l?(o=g=!0,i=0):(a=--i>0?r[i-1]:-1,o=g=!1),e=!0)),a++;e&&this.cleanupMerge(t)},e.prototype.cleanupMerge=function(t){t.push([0,""]);for(var e,r=0,i=0,s=0,a="",h="";r<t.length;)switch(t[r][0]){case 1:s++,h+=t[r][1],r++;break;case n:i++,a+=t[r][1],r++;break;case 0:i+s>1?(0!==i&&0!==s&&(0!==(e=this.commonPrefix(h,a))&&(r-i-s>0&&0==t[r-i-s-1][0]?t[r-i-s-1][1]+=h.substring(0,e):(t.splice(0,0,[0,h.substring(0,e)]),r++),h=h.substring(e),a=a.substring(e)),0!==(e=this.commonSuffix(h,a))&&(t[r][1]=h.substring(h.length-e)+t[r][1],h=h.substring(0,h.length-e),a=a.substring(0,a.length-e))),0===i?t.splice(r-s,i+s,[1,h]):0===s?t.splice(r-i,i+s,[n,a]):t.splice(r-i-s,i+s,[n,a],[1,h]),r=r-i-s+(i?1:0)+(s?1:0)+1):0!==r&&0==t[r-1][0]?(t[r-1][1]+=t[r][1],t.splice(r,1)):r++,s=0,i=0,a="",h=""}""===t[t.length-1][1]&&t.pop();var l=!1;for(r=1;r<t.length-1;)0==t[r-1][0]&&0==t[r+1][0]&&(t[r][1].substring(t[r][1].length-t[r-1][1].length)==t[r-1][1]?(t[r][1]=t[r-1][1]+t[r][1].substring(0,t[r][1].length-t[r-1][1].length),t[r+1][1]=t[r-1][1]+t[r+1][1],t.splice(r-1,1),l=!0):t[r][1].substring(0,t[r+1][1].length)==t[r+1][1]&&(t[r-1][1]+=t[r+1][1],t[r][1]=t[r][1].substring(t[r+1][1].length)+t[r+1][1],t.splice(r+1,1),l=!0)),r++;l&&this.cleanupMerge(t)},e.prototype.xIndex=function(t,e){var r,i=0,s=0,a=0,h=0;for(r=0;r<t.length&&(1!==t[r][0]&&(i+=t[r][1].length),t[r][0]!==n&&(s+=t[r][1].length),!(i>e));r++)a=i,h=s;return t.length!=r&&t[r][0]===n?h:h+(e-a)},e.prototype.prettyHtml=function(t){for(var e=[],r=/&/g,i=/</g,s=/>/g,a=/\n/g,h=0;h<t.length;h++){var l=t[h][0],o=t[h][1].replace(r,"&amp;").replace(i,"&lt;").replace(s,"&gt;").replace(a,"<br/>");switch(l){case 1:e[h]="<ins>"+o+"</ins>";break;case n:e[h]="<del>"+o+"</del>";break;case 0:e[h]="<span>"+o+"</span>"}}return e.join("")},e.prototype.text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},e.prototype.text2=function(t){for(var e=[],r=0;r<t.length;r++)t[r][0]!==n&&(e[r]=t[r][1]);return e.join("")},e.prototype.levenshtein=function(t){for(var e=0,r=0,i=0,s=0;s<t.length;s++){var a=t[s][0],h=t[s][1];switch(a){case 1:r+=h.length;break;case n:i+=h.length;break;case 0:e+=Math.max(r,i),r=0,i=0}}return e+=Math.max(r,i)},e.prototype.toDelta=function(t){for(var e=[],r=0;r<t.length;r++)switch(t[r][0]){case 1:e[r]="+"+encodeURI(t[r][1]);break;case n:e[r]="-"+t[r][1].length;break;case 0:e[r]="="+t[r][1].length}return e.join("\t").replace(/%20/g," ")},e.prototype.fromDelta=function(t,e){for(var r=[],i=0,s=0,a=e.split(/\t/g),h=0;h<a.length;h++){var l=a[h].substring(1);switch(a[h].charAt(0)){case"+":try{r[i++]=[1,decodeURI(l)]}catch(u){throw new Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var o=parseInt(l,10);if(isNaN(o)||o<0)throw new Error("Invalid number in diff_fromDelta: "+l);var g=t.substring(s,s+=o);"="==a[h].charAt(0)?r[i++]=[0,g]:r[i++]=[n,g];break;default:if(a[h])throw new Error("Invalid diff operation in diff_fromDelta: "+a[h])}}if(s!=t.length)throw new Error("Delta length ("+s+") does not equal source text length ("+t.length+").");return r},this.diff=e,this.DIFF_DELETE=n,this.DIFF_INSERT=1,this.DIFF_EQUAL=0,t.exports=e}}]);