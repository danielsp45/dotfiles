"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[13319],{6533:(e,t,o)=>{o.d(t,{A:()=>s});var r=o(296540),i=()=>o(56366),n=o(474848);const a=o(757695).Store.createClass(!1,{name:"OpenStore"});const s=function(e){let{items:t,visible:s}=e;const c=(0,o(401497).DP)(),d=(0,i().uB)(void 0,a),u=(0,i().O$)(d),h=(0,r.useCallback)((()=>function(e){e.setState(!0)}(d)),[d]);return u||t.length<=s?(0,n.jsx)("div",{children:t}):(0,n.jsxs)("div",{children:[t.slice(0,s),(0,n.jsx)(o(704152).A,{onClick:h,style:l(c),children:(0,n.jsx)(o(959013).sA,{defaultMessage:"View {moreCount} more",id:"activity.viewMoreButton.label",values:{moreCount:t.length-s}})})]})};function l(e){return{display:"flex",alignItems:"center",height:28,fontSize:12,color:e.text.tertiary,padding:0,paddingLeft:52,paddingRight:16}}},31902:(e,t,o)=>{o.d(t,{A:()=>n});o(296540);var r=()=>o(959013),i=o(474848);const n=function(e){let{collectionViewName:t,collectionViewType:n}=e;return t?(0,i.jsx)(o(288722).A,{children:t}):"page"===n?(0,i.jsx)(r().sA,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,i.jsx)(r().sA,{...o(403905).X[n]})}},81905:(e,t,o)=>{o.d(t,{A:()=>u,I:()=>h});o(296540);var r=()=>o(401497),i=()=>o(959013),n=()=>o(848259),a=()=>o(572080),s=()=>o(751156),l=()=>o(493823),c=()=>o(360137),d=o(474848);function u(e){var t;const{isMobile:o,environment:i,rootStore:n,activity:a,tabArgs:s}=e,{source:l}=s,u=Boolean(null===(t=s.notification)||void 0===t?void 0:t.visited),p=(0,r().IS)((()=>({container:{paddingLeft:(0,c().F9)({source:l,isMobile:o})-8,paddingTop:4}})),[o,l]);return u?(0,d.jsx)("div",{style:p.container,children:(0,d.jsx)(h,{tabArgs:s,environment:i,rootStore:n,activity:a})}):null}function h(e){const{tabArgs:t,environment:o,rootStore:u,activity:h}=e,{notification:p,tab:v}=t,g=(0,r().IS)((e=>({secondaryButton:(0,c().AG)(e)})),[]);return Boolean(null==p?void 0:p.visited)?(0,d.jsx)(l().p,{isGray:!0,size:"xs",onClick:()=>{p&&(s().createAndCommit({userAction:"Activity.handleUnarchive",environment:o,canUndo:!0,perform:e=>{a().JV({notificationId:p.id,visited:!1,rootStore:u,transaction:e})}}),n().sL({environment:o,activity:h,tab:v,notificationId:p.id,alreadyRead:p.read}))},style:g.secondaryButton,children:(0,d.jsx)(i().sA,{defaultMessage:"Unarchive",id:"activity.actions.unarchiveButton.label"})}):null}},191278:(e,t,o)=>{o.d(t,{A:()=>M,E:()=>O});o(898992),o(354520),o(581454),o(296540);var r=()=>o(484714),i=()=>o(56366),n=()=>o(584262),a=()=>o(700500),s=()=>o(427704),l=()=>o(179034),c=()=>o(343666),d=()=>o(107273),u=()=>o(959013),h=()=>o(630116),p=()=>o(296798),v=()=>o(921194),g=()=>o(6533),b=()=>o(12296),A=()=>o(770176),m=()=>o(81905),y=()=>o(360137),f=()=>o(423213),S=()=>o(77179),x=()=>o(479233),j=o(474848);function O(e){return(0,d().W9)(e).filter((e=>{const{block_value:t}="block-changed"===e.type?e.block_data.after:e.block_data;return t.parent_table!==c().SN}))}function M(e){const{activity:t,tabArgs:o,rootStore:n,isLast:a}=e,{notification:s,tab:c}=o,d=(0,r().v3)(),p=(0,i().K8)((()=>O(t.getEdits())),[t]),v=p[0],y=(0,i().K8)((()=>parseInt(t.end_time)),[t]),M=(0,i().K8)((()=>v&&h().Bv.createChildStore(n,{table:l().ev,id:v.navigable_block_id})),[v,n]),T=(0,i().K8)((()=>(0,A().Ln)({edits:p,rootStore:n})),[p,n]),K=(0,i().K8)((()=>(0,A().bD)(T)),[T]),_=(0,i().K8)((()=>M&&(0,A().DU)({recordId:M.id,recordType:"block",tab:c,rootStore:n,environment:d})),[M,c,n,d]);if(0===p.length||!M)return null;const R=(0,j.jsx)(f().A,{titledRecordStore:M,activity:t,tabArgs:o,getRecordModel:n.getRecordModel});return(0,j.jsxs)(S().Ay,{timestamp:y,header:(0,j.jsx)("span",{children:(0,j.jsx)(u().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited {pageTitle}} other {{authorOrAuthors} edited {pageTitle}}}",id:"activity.blockEdited.header",values:{numberOfAuthors:T.length,authorOrAuthors:K,pageTitle:R}})}),isLast:a,isPrivate:_,rootStore:n,navigableBlockId:M.id,icon:(0,j.jsx)(S().H8,{authors:T,size:24}),showSnapshotButton:(0,x().m)(o),...(0,b().em)({notification:s,activity:t,environment:d,tab:c}),children:[(0,j.jsx)(g().A,{visible:5,items:p.map(((e,r)=>(0,j.jsx)(k,{edit:e,index:r,activity:t,rootStore:n,tabArgs:o},r)))}),(0,j.jsx)(m().A,{tabArgs:o,activity:t,isMobile:d.device.isMobile,environment:d,rootStore:n})]})}function k(e){let{edit:t,index:o,activity:c,rootStore:d,tabArgs:u}=e;const h=(0,r().v3)(),{source:g}=u,A=(0,i().K8)((()=>{let e=d.getRecordModel({table:l().ev,id:t.block_id});return e&&e.type===a().xd.tableRow&&(e=d.getRecordModel({table:l().ev,id:e.parent_id})),e?e.getRenderUrl({getRecordModel:d.getRecordModel,pageVisitSource:n().y8.Activity}):s().JZ.root}),[t.block_id,d]),m=h.device.isMobile;return"block-deleted"===t.type?t.block_data.block_value.type===a().xd.page?(0,j.jsx)(p().A,{href:A,onClick:()=>(0,b().uY)({...u,environment:h,activity:c}),innerStyle:(0,y().aY)({source:g,isMobile:m}),children:(0,j.jsx)(v().A,{edit:t,rootStore:d})},o):(0,j.jsx)("div",{style:(0,y().aY)({source:g,isMobile:m}),children:(0,j.jsx)(v().A,{edit:t,rootStore:d})},o):(0,j.jsx)(p().A,{href:A,onClick:()=>(0,b().uY)({...u,environment:h,activity:c}),innerStyle:(0,y().aY)({source:g,isMobile:m}),children:(0,j.jsx)(v().A,{edit:t,rootStore:d})},o)}},360137:(e,t,o)=>{o.d(t,{AG:()=>c,Ei:()=>u,F9:()=>l,aY:()=>s,a_:()=>a,kI:()=>n,vF:()=>i,xC:()=>d});const r={userSelect:"text",WebkitUserSelect:"text"},i={padding:1,...r},n={display:"inline-flex",marginRight:2,verticalAlign:"text-top"},a={fontWeight:o(284371).Wy.semibold};function s(e){return{padding:0,paddingLeft:l(e),paddingRight:16,paddingBottom:3,...r}}function l(e){const{source:t,isMobile:o}=e;return"notifications_tab"===t?52+(o?3:2):52}function c(e){return{height:26,paddingLeft:8,paddingRight:8,color:e.text.secondary}}function d(e){return{display:"inline",whiteSpace:"normal",marginRight:e?3:0,wordBreak:"break-word",...a}}function u(e){return{boxShadow:e.shadow2XS,height:26,paddingLeft:8,paddingRight:8,fontWeight:500,color:e.text.primary}}},397682:(e,t,o)=>{o.d(t,{Aj:()=>I,mV:()=>N,s6:()=>w});o(898992),o(823215),o(354520),o(672577),o(803949),o(581454);var r=o(296540),i=()=>o(484714),n=()=>o(56366),a=()=>o(401497),s=()=>o(179034),l=()=>o(197959),c=()=>o(161479),d=()=>o(919709),u=()=>o(959013),h=()=>o(534177),p=()=>o(284371),v=()=>o(848259),g=()=>o(774733),b=()=>o(902731),A=()=>o(712030),m=()=>o(921855),y=()=>o(108944),f=()=>o(630116),S=()=>o(296798),x=()=>o(864943),j=()=>o(77179),O=()=>o(12296),M=()=>o(331132),k=()=>o(770176),T=()=>o(81905),K=()=>o(360137),_=o(474848);function R(e){return"comment-created"===e.type}function I(e){return e.length>0&&e.every(R)}function w(e,t,o){if(!o)return[];let r=e.filter((e=>{switch(e.type){case"comment-changed":return!1;case"comment-created":case"comment-deleted":case"suggestion-created":return!0;default:(0,h().HB)(e)}}));0===r.length&&0!==e.length&&"updates_sidebar"!==t&&(r=e);const i="suggestion"===(null==o?void 0:o.getType())&&(null==o?void 0:o.getCommentPointers()[0]),n=r[0];return n&&i&&n&&"comment-created"===n.type&&n.comment_id===i.id&&(r=r.slice(0)),r}function B(e){const{activity:t,rootStore:a,isLast:c,tabArgs:d}=e,{source:p,tab:v,notification:g}=d,A=(0,i().v3)(),m=(0,u().tz)(),x=(0,o(963589).X)("public_api_custom_display_names_in_comments"),M=(0,n().K8)((()=>{const e=a.getRecordStore(a,{table:l().$Y,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,a]),T=(0,n().K8)((()=>null==M?void 0:M.getType()),[M]),R=(0,n().K8)((()=>{const e=null==M?void 0:M.getModel();if(e)return(0,k().pN)(e)}),[M]),I=(0,n().K8)((()=>{const e=null==M?void 0:M.getParentPointer();if(e)return f().Bv.createChildStore(a,e)}),[M,a]),B=(0,n().K8)((()=>Boolean(I&&I.isDefined())),[I]),C=(0,n().K8)((()=>{const e=null==I?void 0:I.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,I]),D=f().Bv.createChildStore(a,{table:s().ev,id:C}),N=(0,n().K8)((()=>D.isDefined()),[D]),U=(0,n().K8)((()=>Boolean(I&&(0,y().yR)((0,y().g7)(I)))),[I]),E=(0,n().K8)((()=>{if(!U||!I)return;const e=I.getModel();return e?e.getRenderUrl({getRecordModel:a.getRecordModel,discussionId:t.discussion_id,pageVisitSource:o(584262).y8.Notification}):void 0}),[U,I,a,t]),z=(0,n().K8)((()=>w(t.getEdits(),p,M)),[t,M,p]),Y=z.length>0,F=(0,n().K8)((()=>{const e=new Map;return((null==M?void 0:M.getCommentStores())||[]).forEach((t=>{const o=t.getCreatedByPointer();if(o){const r=f().sk.createChildStore(a,o).getModel();if(r){const o=r.asActor,i=t.resolveAuthorDisplayName(x,m);i&&e.set(i,o)}}})),e}),[M,a,m,x]),H=(0,n().K8)((()=>{var e,t;const r=Array.from(F.keys()),i=null===(e=o(765957).default.state.currentUserStore)||void 0===e?void 0:e.id,n=i?null===(t=Array.from(F.entries()).find((e=>{let[t,o]=e;return o.id===i})))||void 0===t?void 0:t[0]:void 0;return(0,o(8633).j)(r,n)}),[F]),$=(0,o(496603).hS)(Array.from(F.values()),(e=>e.id)),W=Array.from(F.keys()),X=U,G=(0,r.useCallback)((e=>{if((0,O().uY)({...d,environment:A,activity:t,mightCloseTab:X}),!U&&I&&M){var o;const r=e.target;b().IX({environment:A,discussionStore:M,rect:r.getBoundingClientRect(),blockStore:I,discussionLocation:V({forReplyMenu:!0,source:d.source}),activityId:t.id,notificationId:null===(o=d.notification)||void 0===o?void 0:o.id})}}),[t,U,I,M,A,d,X]),J=(0,r.useCallback)((e=>{"Removed"===e?(0,O().jv)({...d,environment:A,activity:t,mightCloseTab:X}):"Added"===e?(0,O().P)({...d,environment:A,activity:t,mightCloseTab:X}):(0,h().HB)(e)}),[d,A,t,X]),Q=(0,_.jsx)(o(423213).A,{titledRecordStore:D,getRecordModel:a.getRecordModel,activity:t,tabArgs:d}),Z=(0,n().K8)((()=>(0,k().DU)({recordId:C,recordType:s().ev,tab:v,rootStore:a,environment:A})),[C,v,a,A]),q=A.device.isMobile,ee=(0,n().K8)((()=>V({source:p,forReplyMenu:!1})),[p]),te=(0,n().K8)((()=>parseInt(t.end_time)),[t]);return Y&&N&&B&&M?(0,_.jsxs)(j().Ay,{timestamp:te,header:"suggestion"===T?(0,_.jsx)("span",{children:(0,_.jsx)(u().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} suggested in {blockName}} other {{authorOrAuthors} suggested in {blockName}}}",values:{numberOfAuthors:W.length,authorOrAuthors:H,blockName:Q},id:"activity.commentActivity.header.suggestion"})}):(0,_.jsx)("span",{children:(0,_.jsx)(u().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented in {blockName}} other {{authorOrAuthors} commented in {blockName}}}",values:{numberOfAuthors:W.length,authorOrAuthors:H,blockName:Q},id:"activity.commentActivity.header"})}),isLast:c,isPrivate:Z,rootStore:a,navigableBlockId:C,icon:(0,_.jsx)(j().H8,{authors:$,size:24}),showSnapshotButton:!1,...(0,O().em)({notification:g,environment:A,tab:v,activity:t}),children:[M&&R&&(0,_.jsx)(L,{rootStore:a,discussionStore:M,onClick:G,source:p,url:E}),(0,_.jsx)(o(6533).A,{visible:5,items:z.map(((e,t,r)=>(0,_.jsx)(S().A,{onClick:G,href:E,innerStyle:(0,K().aY)({source:p,isMobile:q}),children:(0,_.jsx)(o(921194).A,{edit:e,rootStore:a,type:"comment-edit",discussionLocation:ee,onReactionToggle:J,hideAuthorName:!1})},t)))}),(0,_.jsx)(P,{activity:t,rootStore:a,tabArgs:d})]}):null}function L(e){const{rootStore:t,discussionStore:o,onClick:r,source:s,url:l}=e,c=(0,n().K8)((()=>o.getType()),[o]),d=(0,i().v3)().device.isMobile,u=(0,a().IS)((e=>({linkbox:{...(0,K().aY)({source:s,isMobile:d}),display:"flex",alignItems:"center",fontSize:14,paddingTop:2,paddingBottom:6,marginBottom:0}})),[d,s]);return(0,_.jsx)(S().A,{href:l,onClick:r,innerStyle:u.linkbox,children:"suggestion"===c?(0,_.jsx)(g().c4,{discussionStore:o,collapsed:!1}):(0,_.jsx)(C,{rootStore:t,discussionStore:o})})}function C(e){const t=(0,i().v3)(),o=(0,a().DP)(),{rootStore:r,discussionStore:s}=e,l=(0,n().K8)((()=>{const e=s.getModel();if(e)return(0,k().pN)(e)}),[s]),c=0===(0,d().j2Y)(l).length,u=(0,a().IS)((e=>({text:{...p().RC,...c&&{color:e.text.secondary}}})),[c]),h=(0,n().K8)((()=>(0,m().S5)({environment:t,textValue:l?{value:l,spaceId:r.id}:void 0,parentStore:r,disableHover:!0,disableStyleAnnotations:c,disableInsertedDeletedAnnotations:c,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disabled:!0,highlightDiscussionId:s.id,theme:o,emojiType:(0,A().FN)(t),katex:t.KatexStore.getKatex(),formulaValueTypes:[]})),[t,l,r,c,s.id,o]);return(0,_.jsxs)(_.Fragment,{children:[c&&(0,_.jsx)(M().A,{}),(0,_.jsx)("div",{style:u.text,children:h})]})}function P(e){const{activity:t,rootStore:o,tabArgs:d}=e,{source:h,notification:p,tab:g}=d,A=(0,n().K8)((()=>{const e=o.getRecordStore(o,{table:l().$Y,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,o]),m=(0,i().v3)(),y=m.device.isMobile,S=(0,n().K8)((()=>f().sk.createChildStore(o,{table:l().$Y,id:t.discussion_id,spaceId:(0,c().e)(o.pointer.spaceId)})),[t,o]),j=(0,n().K8)((()=>null==A?void 0:A.getParentId()),[A]),O=(0,r.useCallback)((e=>{if(!j)return;const r=f().Bv.createChildStore(o,{table:s().ev,id:j}),i=e.target,n=null==p?void 0:p.id;b().IX({environment:m,discussionStore:S,rect:i.getBoundingClientRect(),blockStore:r,discussionLocation:V({forReplyMenu:!0,source:h}),activityId:t.id,notificationId:n}),"notifications_tab"===h&&v().ZP({environment:m,notificationId:n,alreadyRead:Boolean(null==p?void 0:p.read),activity:t,tab:g})}),[t,S,m,p,j,o,h,g]),M=(0,a().IS)((e=>({container:{paddingLeft:(0,K().F9)({source:h,isMobile:y}),paddingTop:12,paddingBottom:4}})),[y,h]),k=Boolean(null==p?void 0:p.visited);return A?(0,_.jsxs)("div",{style:M.container,children:[(0,_.jsx)(x().A,{size:"lg",onClick:O,children:(0,_.jsx)(u().sA,{defaultMessage:"Reply",id:"activityUpdate.replyButton.label"})}),k&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(D,{}),(0,_.jsx)(T().I,{tabArgs:d,environment:m,rootStore:o,activity:t})]})]}):null}function D(){return(0,_.jsx)("div",{style:{width:5,display:"inline-block"}})}function V(e){const{forReplyMenu:t,source:o}=e;if("updates_sidebar"===o)return t?"reply_menu_updates_sidebar":"updates_sidebar";return`${t?"reply_menu_":"updates_menu_"}${v().jD()}`}const N=r.memo(B)},423213:(e,t,o)=>{o.d(t,{A:()=>g});var r=o(296540),i=()=>o(56366),n=()=>o(584262),a=()=>o(179034),s=()=>o(854150),l=()=>o(466872),c=()=>o(187820),d=()=>o(16006),u=()=>o(12296),h=()=>o(360137),p=o(474848);function v(e){const{titledRecordStore:t,getRecordModel:v,activity:g,tabArgs:b,permissionRole:A,shouldRenderEmpty:m}=e,y=(0,i().K8)((()=>t.getModel()),[t]),f=(0,o(484714).v3)(),S=(0,o(959013).tz)(),x=(0,i().K8)((()=>null==y?void 0:y.getRenderIcon({getRecordModel:v})),[y,v]),j=(0,o(401497).IS)((()=>({container:A?{...h().vF,display:"flex",alignItems:"center"}:h().vF,icon:h().kI,recordTitle:(0,h().xC)(void 0!==x),role:{marginLeft:4,padding:0},titleAndRole:{display:"flex",flexFlow:"row",padding:1}})),[x,A]),O=(0,r.useCallback)((()=>{const e=t.table;switch(e){case a().ev:case o(519831).Vl:case o(96689).NX:(0,u().Qo)({environment:f,activity:g,...b});break;case s().yK:(0,u().uY)({environment:f,activity:g,...b}),o(848237).L0({environment:f,teamStore:t,shouldScroll:!0}),l().A.setState({...l().A.state,open:!1});break;default:(0,o(534177).HB)(e)}}),[g,f,b,t]),M=(0,i().K8)((()=>y&&y.table!==s().yK?y.getRenderUrl({getRecordModel:v,pageVisitSource:n().y8.Notification}):m&&t.table===a().ev?(0,o(921940).A)({pageId:t.id,pageVisitSource:n().y8.LinkInPage}):void 0),[y,v,m,t.table,t.id]),k=(0,i().K8)((()=>(0,c().Te)(t)),[t]);if(!y&&!m)return null;const T=A?(0,p.jsxs)("div",{style:j.titleAndRole,children:[(0,p.jsx)(d().A,{store:t,style:j.recordTitle}),(0,p.jsx)(o(125565).A,{style:j.role,isSecondaryColor:!0,children:`(${S.formatMessage((0,o(433847).an)(A,a().ev)).toLocaleLowerCase()})`})]}):(0,p.jsx)(d().A,{store:t,style:j.recordTitle});return(0,p.jsxs)(o(296798).A,{href:M,onClick:O,external:!1,innerStyle:j.container,inline:!0,children:[(x||m)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c().B6,{disabled:!0,icon:x,iconRecordCategory:k,isEmptyPage:!1,size:18,style:j.icon}),(0,p.jsx)("span",{children:" "})]}),T]})}const g=r.memo(v)},479233:(e,t,o)=>{function r(e){return"pageUpdatesSidebar"===e.tab}o.d(t,{m:()=>r})},523526:(e,t,o)=>{o.r(t),o.d(t,{ActivityUpdate:()=>V});var r=o(296540),i=()=>o(484714),n=()=>o(56366),a=()=>o(813206),s=()=>o(857639),l=()=>o(197959),c=()=>o(630116),d=()=>o(770176),u=()=>o(584262),h=()=>o(519831),p=()=>o(959013),v=()=>o(296798),g=()=>o(921194),b=()=>o(12296),A=()=>o(81905),m=()=>o(360137),y=()=>o(423213),f=()=>o(77179),S=()=>o(479233),x=o(474848);function j(e){let{edit:t,url:o,tabArgs:r,rootStore:n}=e;const a=(0,i().v3)(),{source:s}=r,l=a.device.isMobile;return(0,x.jsx)(v().A,{href:o,innerStyle:(0,m().aY)({source:s,isMobile:l}),children:(0,x.jsx)(g().A,{edit:t,rootStore:n})})}var O=()=>o(107273);o(581454);var M=()=>o(401497),k=()=>o(743176);function T(e){let{edit:t,url:o,tabArgs:r,rootStore:n}=e;const a=(0,i().v3)();if("collection-property-changed"!==t.type)return null;const{source:s}=r,l=a.device.isMobile;return(0,x.jsx)(v().A,{href:o,innerStyle:(0,m().aY)({source:s,isMobile:l}),children:(0,x.jsx)(g().A,{edit:t,rootStore:n})})}function K(e){let{propertySchema:t}=e;const o=(0,M().DP)(),r=(0,M().IS)((()=>({icon:{width:12,height:12,display:"inline-block",verticalAlign:"middle",marginBottom:2,marginRight:4},container:{...m().a_,whiteSpace:"nowrap"}})),[]);return(0,x.jsxs)("span",{style:r.container,children:[(0,x.jsx)(k().zB,{icon:t.icon,type:t.type,size:12,style:r.icon,theme:o}),t.name]})}var _=()=>o(179034);function R(e){const{activity:t,tabArgs:o,rootStore:r,isLast:a}=e,{notification:s,tab:l}=o,u=(0,i().v3)(),h=(0,n().K8)((()=>parseInt(t.end_time)),[t]),v=(0,n().K8)((()=>t.getEdits()),[t]),g=v[0],m=(0,n().K8)((()=>c().Bv.createChildStore(r,{table:_().ev,id:t.collection_row_id})),[t,r]),j=(0,n().K8)((()=>m.getProperties()),[m]),O=(0,n().K8)((()=>(0,d().Ln)({edits:v,rootStore:r})),[v,r]),M=(0,n().K8)((()=>(0,d().bD)(O)),[O]),k=(0,n().K8)((()=>(0,d().DU)({recordId:m.id,recordType:"block",tab:l,rootStore:r,environment:u})),[m.id,u,r,l]);if(!v.length||!m||!j)return null;const T=(0,x.jsx)(y().A,{titledRecordStore:m,activity:t,tabArgs:o,getRecordModel:r.getRecordModel}),K="collection-row-created"===g.type?(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created {pageTitle}} other {{authorOrAuthors} created {pageTitle}}}",values:{numberOfAuthors:O.length,authorOrAuthors:M,pageTitle:T},id:"activity.collectionRowCreated.header"}):(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted {pageTitle}} other {{authorOrAuthors} deleted {pageTitle}}}",values:{numberOfAuthors:O.length,authorOrAuthors:M,pageTitle:T},id:"activity.collectionRowDeleted.header"});return(0,x.jsx)(f().Ay,{timestamp:h,header:(0,x.jsx)("span",{children:K}),isLast:a,isPrivate:k,rootStore:r,navigableBlockId:m.id,icon:(0,x.jsx)(f().H8,{authors:O,size:24}),showSnapshotButton:(0,S().m)(o),...(0,b().em)({notification:s,activity:t,environment:u,tab:l}),children:(0,x.jsx)(A().A,{tabArgs:o,activity:t,isMobile:u.device.isMobile,environment:u,rootStore:r})})}var I=()=>o(745266),w=()=>o(31902);function B(e){const{edit:t,authors:o,collectionViewTitle:r,collectionTitle:i}=e,a=(0,n().K8)((()=>(0,d().bD)(o)),[o]);return"collection-view-created"===t.type?(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created view {collectionViewTitle} in {collectionTitle}} other {{authorOrAuthors} created view {collectionViewTitle} in {collectionTitle}}}",values:{numberOfAuthors:o.length,authorOrAuthors:a,collectionTitle:i,collectionViewTitle:r},id:"activity.collectionViewCreated.header"}):"collection-view-deleted"===t.type?(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted view {collectionViewTitle} in {collectionTitle}} other {{authorOrAuthors} deleted view {collectionViewTitle} in {collectionTitle}}}",values:{numberOfAuthors:o.length,authorOrAuthors:a,collectionTitle:i,collectionViewTitle:r},id:"activity.collectionViewDeleted.header"}):(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited view {collectionViewTitle} in {collectionTitle}} other {{authorOrAuthors} edited view {collectionViewTitle} in {collectionTitle}}}",values:{numberOfAuthors:o.length,authorOrAuthors:a,collectionTitle:i,collectionViewTitle:r},id:"activity.collectionViewEdited.header"})}function L(e){let{collectionViewStore:t,rootStore:o,activity:r,tabArgs:a}=e;const s=(0,i().v3)(),{url:l,icon:c,type:d,name:h}=(0,n().K8)((()=>{var e;return{url:null===(e=t.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:o.getRecordModel,pageVisitSource:u().y8.Activity}),icon:t.getFormat().collection_view_icon,type:t.getType(),name:t.getName()}}),[t,o]);return d?(0,x.jsxs)(v().A,{href:l,onClick:()=>(0,b().Qo)({environment:s,activity:r,...a}),external:!1,innerStyle:{...m().vF,...m().a_},inline:!0,children:[(0,x.jsx)(I().h,{viewIcon:c,viewType:d,color:"light",style:{display:"inline-block",verticalAlign:"middle",marginRight:4,marginBottom:2},size:12}),(0,x.jsx)(w().A,{collectionViewName:h,collectionViewType:d})]}):null}function C(e){const{activity:t,rootStore:r,isLast:a,tabArgs:s}=e,l=(0,i().v3)(),{notification:c,tab:u}=s,h=(0,n().K8)((()=>t.getEdits()),[t]),v=h[0],g=(0,n().K8)((()=>(0,d().Ln)({edits:h,rootStore:r})),[h,r]),m=(0,n().K8)((()=>v&&r.getRecordStore(r,{table:_().ev,id:v.navigable_block_id,spaceId:v.space_id})),[v,r]),S=(0,n().K8)((()=>m&&(0,d().DU)({recordId:m.id,recordType:"block",tab:u,rootStore:r,environment:l})),[m,l,r,u]),j=(0,n().K8)((()=>(0,d().bD)(g)),[g]),O=(0,n().K8)((()=>t.type),[t]),M=(0,n().K8)((()=>t.end_time),[t]);if(!h.length||!v||!m)return null;const k=(0,x.jsx)(y().A,{titledRecordStore:m,activity:t,tabArgs:s,getRecordModel:r.getRecordModel});let T;return"page-deleted"===O?T=(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted {blockTitle}} other {{authorOrAuthors} deleted {blockTitle}}}",values:{numberOfAuthors:g.length,authorOrAuthors:j,blockTitle:k},id:"emailActivity.pageDeleted.header"}):"page-restored"===O?T=(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} restored {blockTitle}} other {{authorOrAuthors} restored {blockTitle}}}",values:{numberOfAuthors:g.length,authorOrAuthors:j,blockTitle:k},id:"emailActivity.pageRestored.header"}):"page-permanently-deleted"===O?T=(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} permanently deleted {blockTitle}} other {{authorOrAuthors} permanently deleted {blockTitle}}}",values:{numberOfAuthors:g.length,authorOrAuthors:j,blockTitle:k},id:"emailActivity.pagePermanentlyDeleted.header"}):(0,o(534177).HB)(O),(0,x.jsx)(f().Ay,{timestamp:parseInt(M),header:(0,x.jsx)("span",{children:T}),isPrivate:S,isLast:a,rootStore:r,navigableBlockId:m.id,icon:(0,x.jsx)(f().H8,{authors:g,size:24}),showSnapshotButton:!1,...(0,b().em)({notification:c,activity:t,environment:l,tab:u}),children:(0,x.jsx)(A().A,{tabArgs:s,activity:t,isMobile:l.device.isMobile,environment:l,rootStore:r})})}function P(e){const{activity:t,rootStore:o,isLast:r,tabArgs:a}=e,{notification:s,tab:l}=a,u=(0,i().v3)(),h=(0,n().K8)((()=>t.type),[t]),v=(0,n().K8)((()=>parseInt(t.end_time)),[t]),g=(0,n().K8)((()=>t.getEdits()),[t]),m=g[0],S=m&&m.navigable_block_id,j=(0,n().K8)((()=>S&&c().Bv.createChildStore(o,{table:_().ev,id:S})),[S,o]),O=(0,n().K8)((()=>(0,d().Ln)({edits:g,rootStore:o})),[g,o]),M=(0,n().K8)((()=>(0,d().bD)(O)),[O]),k=(0,n().K8)((()=>S&&(0,d().DU)({recordId:S,recordType:"block",tab:l,rootStore:o,environment:u})),[S,l,o,u]);if(!g.length||!m||!j)return null;const T=(0,x.jsx)(y().A,{titledRecordStore:j,activity:t,tabArgs:a,getRecordModel:o.getRecordModel}),K="page-locked"===h?(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} locked {blockTitle}} other {{authorOrAuthors} locked {blockTitle}}}",values:{numberOfAuthors:O.length,authorOrAuthors:M,blockTitle:T},id:"activity.pageLocked.header"}):(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} unlocked {blockTitle}} other {{authorOrAuthors} unlocked {blockTitle}}}",values:{numberOfAuthors:O.length,authorOrAuthors:M,blockTitle:T},id:"activity.pageUnlocked.header"});return(0,x.jsx)(f().Ay,{timestamp:v,header:(0,x.jsx)("span",{children:K}),isPrivate:k,isLast:r,rootStore:o,navigableBlockId:S,icon:(0,x.jsx)(f().H8,{authors:O,size:24}),showSnapshotButton:!1,...(0,b().em)({notification:s,activity:t,environment:u,tab:l}),children:(0,x.jsx)(A().A,{tabArgs:a,activity:t,isMobile:u.device.isMobile,environment:u,rootStore:o})})}o(944114),o(898992),o(354520),o(803949);function D(e){const{tabArgs:t,rootStore:o,activity:r,isLast:a}=e,{notification:s,tab:l}=t,u=(0,i().v3)(),h=(0,n().K8)((()=>parseInt(r.end_time)),[r]),v=(0,n().K8)((()=>r.getEdits()),[r]),g=v[0],A=(0,n().K8)((()=>c().Bv.createChildStore(o,{table:_().ev,id:r.top_level_block_id})),[r,o]),m=(0,n().K8)((()=>A.hasSpacePermission()),[A]),S=(0,n().K8)((()=>(0,d().Ln)({edits:v,rootStore:o})),[v,o]),j=(0,n().K8)((()=>(0,d().bD)(S)),[S]),O=(0,n().K8)((()=>(0,d().DU)({recordId:A.id,recordType:"block",tab:l,rootStore:o,environment:u})),[A,l,o,u]);if(!v.length||!A)return null;const M=(0,x.jsx)(y().A,{titledRecordStore:A,activity:r,tabArgs:t,getRecordModel:o.getRecordModel});let k;return k=m?"top-level-block-created"===g.type?(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created workspace page {pageTitle}} other {{authorOrAuthors} created workspace page {pageTitle}}}",values:{numberOfAuthors:S.length,authorOrAuthors:j,pageTitle:M},id:"activity.topLevelBlockWorkspaceCreated.header"}):(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted workspace page {pageTitle}} other {{authorOrAuthors} deleted workspace page {pageTitle}}}",values:{numberOfAuthors:S.length,authorOrAuthors:j,pageTitle:M},id:"activity.topLevelBlockWorkspaceDeleted.header"}):"top-level-block-created"===g.type?(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created private page {pageTitle}} other {{authorOrAuthors} created private page {pageTitle}}}",values:{numberOfAuthors:S.length,authorOrAuthors:j,pageTitle:M},id:"activity.topLevelBlockPrivateCreated.header"}):(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted private page {pageTitle}} other {{authorOrAuthors} deleted private page {pageTitle}}}",values:{numberOfAuthors:S.length,authorOrAuthors:j,pageTitle:M},id:"activity.topLevelBlockPrivateDeleted.header"}),(0,x.jsx)(f().Ay,{timestamp:h,header:(0,x.jsx)("span",{children:k}),isLast:a,isPrivate:O,rootStore:o,icon:(0,x.jsx)(f().H8,{authors:S,size:24}),showSnapshotButton:!1,...(0,b().em)({notification:s,activity:r,environment:u,tab:l})})}function V(e){const{activity:t,rootStore:o,tabArgs:u,isLast:h}=e,p=(0,i().v3)();(0,r.useEffect)((()=>{!function(e,t){if("commented"===e.type){const r=c().sk.createChildStore(t,{table:l().$Y,id:e.discussion_id,spaceId:e.space_id});if(r.isDefined()){const e=r.getCommentStores();for(const t of e){var o;null===(o=t.getCreatedByStore())||void 0===o||o.load()}}}}(t,o),p.KatexStore.loadIfNeeded((()=>function(e,t){const o=(0,d().U6)({activity:e,rootStore:t});if(!o)return;return o.context}(t,o)))}),[p.KatexStore,t,o]);const v=(0,n().K8)((()=>t.type),[t]);if(!a().zu(v))return s().log({level:"error",from:"ActivityUpdate",type:"unsupportedActivityType",data:{message:`Activity type ${v} is not supported for ActivityUpdate`}}),null;const g=N[v];return(0,x.jsx)(g,{activity:t,tabArgs:u,rootStore:o,isLast:h})}const N={"block-edited":o(191278).A,"collection-row-created":R,"collection-row-deleted":R,"top-level-block-created":D,"top-level-block-deleted":D,"permissions-edited":function(e){const{tabArgs:t,rootStore:r,activity:s,isLast:l}=e,{notification:u,tab:h,source:v}=t,S=(0,i().v3)(),j=(0,n().K8)((()=>parseInt(s.end_time)),[s]),M=(0,n().K8)((()=>(0,O().W9)(s.getEdits())),[s]),k=M[0],{autojoinEdits:T,inheritanceEdits:K,otherEdits:R}=a().J6(M),I=(0,n().K8)((()=>T.map((e=>{const t=(0,d().Ln)({edits:[e],rootStore:r});return{edit:e,authors:t,authorPhrase:(0,d().bD)(t)}}))),[T,r]),w=(0,n().K8)((()=>K.map((e=>{const t=(0,d().Ln)({edits:[e],rootStore:r});return{edit:e,authors:t,authorPhrase:(0,d().bD)(t)}}))),[K,r]),B=R.filter((e=>!e.inSudoMode)),L=R.filter((e=>e.inSudoMode)),C=(0,n().K8)((()=>(0,d().Ln)({edits:B,rootStore:r})),[B,r]),P=(0,n().K8)((()=>(0,d().bD)(C)),[C]),D=(0,n().K8)((()=>(0,d().Ln)({edits:L,rootStore:r})),[r,L]),V=(0,n().K8)((()=>(0,d().bD)(D)),[D]),{isPrivate:N,pageOrSpace:U}=(0,n().K8)((()=>{if(k&&k.navigable_block_id){const e=c().Bv.createChildStore(r,{table:_().ev,id:k.navigable_block_id});return e.isDefined()?{pageOrSpace:(0,x.jsx)(y().A,{titledRecordStore:e,activity:s,tabArgs:t,getRecordModel:r.getRecordModel}),isPrivate:(0,d().DU)({recordId:e.id,recordType:"block",tab:h,rootStore:r,environment:S})}:{pageOrSpace:void 0,isPrivate:!1}}{const e=k&&c().SL.createChildStore(r,{table:o(96689).NX,id:k.space_id});return e.isDefined()?{pageOrSpace:(0,x.jsx)(y().A,{titledRecordStore:e,activity:s,tabArgs:t,getRecordModel:r.getRecordModel}),isPrivate:!1}:{pageOrSpace:void 0,isPrivate:!1}}}),[s,k,S,r,h,t]);if(!U||0===M.length)return null;const E=[];I.forEach(((e,t)=>{let{edit:o,authors:i,authorPhrase:n}=e;E.push((0,x.jsx)(f().Ay,{timestamp:o.timestamp,header:(0,x.jsx)("span",{children:(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} joined {pageOrSpaceName}} other {{authorOrAuthors} joined {pageOrSpaceName}}}",values:{numberOfAuthors:i.length,authorOrAuthors:n,pageOrSpaceName:U},id:"activity.permissionsActivity.header"})}),isLast:l,isPrivate:N,rootStore:r,navigableBlockId:o.navigable_block_id,icon:(0,x.jsx)(f().H8,{authors:i,size:24}),showSnapshotButton:!1,...(0,b().em)({notification:u,activity:s,environment:S,tab:h})},`autojoin-${t}`))}));const z=S.device.isMobile;w.forEach(((e,o)=>{let i,{edit:n,authors:a,authorPhrase:c}=e;"permission-restriction-created"===n.type?i=(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} restricted access for {pageOrSpaceName}} other {{authorOrAuthors} restricted access for {pageOrSpaceName}}}{inSudoMode, select, true { using administrator privileges} other {}}",values:{numberOfAuthors:a.length,authorOrAuthors:c,pageOrSpaceName:U,inSudoMode:n.inSudoMode},id:"activity.restrictPermissionsForActivity.header"}):"permission-restriction-deleted"===n.type&&(i=(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} restored inherited access for {pageOrSpaceName}} other {{authorOrAuthors} restored inherited access for {pageOrSpaceName}}}{inSudoMode, select, true { using administrator privileges} other {}}",values:{numberOfAuthors:a.length,authorOrAuthors:c,pageOrSpaceName:U,inSudoMode:n.inSudoMode},id:"activity.restorePermissionsForActivity.header"})),E.push((0,x.jsxs)(f().Ay,{timestamp:j,header:(0,x.jsx)("span",{children:i}),isLast:l,isPrivate:N,rootStore:r,navigableBlockId:n.navigable_block_id,icon:(0,x.jsx)(f().H8,{authors:a,size:24}),showSnapshotButton:!1,...(0,b().em)({notification:u,activity:s,environment:S,tab:h}),children:[(0,x.jsx)("div",{style:(0,m().aY)({source:v,isMobile:z}),children:(0,x.jsx)(g().A,{edit:n,rootStore:r})}),(0,x.jsx)(A().A,{tabArgs:t,activity:s,isMobile:z,environment:S,rootStore:r})]},`inheritance-${o}`))}));const Y=(e,o,i,n)=>{e.length>0&&E.push((0,x.jsxs)(f().Ay,{timestamp:j,header:n,isLast:l,isPrivate:N,rootStore:r,navigableBlockId:k.navigable_block_id,icon:(0,x.jsx)(f().H8,{authors:o,size:24}),showSnapshotButton:!1,...(0,b().em)({notification:u,activity:s,environment:S,tab:h}),children:[e.map(((e,t,o)=>(0,x.jsx)("div",{style:(0,m().aY)({source:v,isMobile:z}),children:(0,x.jsx)(g().A,{edit:e,rootStore:r},t)},t))),(0,x.jsx)(A().A,{tabArgs:t,activity:s,isMobile:S.device.isMobile,environment:S,rootStore:r})]},i))};return B.length>0&&Y(B,C,"other",(0,x.jsx)("span",{children:(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated permission for {pageOrSpaceName}} other {{authorOrAuthors} updated permission for {pageOrSpaceName}}}",values:{numberOfAuthors:C.length,authorOrAuthors:P,pageOrSpaceName:U},id:"activity.updatedPermissionsForActivity.header"})})),L.length>0&&Y(L,D,"other-sudo",(0,x.jsx)("span",{children:(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated permission for {pageOrSpaceName}} other {{authorOrAuthors} updated permission for {pageOrSpaceName}}} using administrator privileges",values:{numberOfAuthors:D.length,authorOrAuthors:V,pageOrSpaceName:U},id:"activity.updatedPermissionsForActivityInSudoMode.header"})})),(0,x.jsx)(x.Fragment,{children:E})},commented:o(397682).mV,"collection-edited":function(e){const{activity:t,tabArgs:o,rootStore:r,isLast:s}=e,{notification:l,tab:c}=o,v=(0,i().v3)(),g=(0,n().K8)((()=>parseInt(t.end_time)),[t]),m=(0,n().K8)((()=>t.collection_id),[t]),O=(0,n().K8)((()=>t.navigable_block_id),[t]),M=(0,n().K8)((()=>t.getEdits()),[t]),k=M[0],T=(0,n().K8)((()=>r.getRecordStore(r,{table:h().Vl,id:m,spaceId:t.space_id})),[m,t,r]),K=(0,n().K8)((()=>{var e;return null===(e=T.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:r.getRecordModel,pageVisitSource:u().y8.Activity})}),[T,r.getRecordModel]),_=(0,n().K8)((()=>(0,d().Ln)({edits:M,rootStore:r})),[M,r]),R=(0,n().K8)((()=>(0,d().bD)(_)),[_]),I=(0,n().K8)((()=>(0,d().DU)({recordId:m,recordType:"collection",tab:c,rootStore:r,environment:v})),[m,c,r,v]);if(!(T&&M.length&&k&&K))return null;const w=(0,x.jsx)(y().A,{titledRecordStore:T,activity:t,tabArgs:o,getRecordModel:r.getRecordModel}),B="collection-created"===k.type?(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created {collectionTitle}} other {{authorOrAuthors} created {collectionTitle}}}",values:{numberOfAuthors:_.length,authorOrAuthors:R,collectionTitle:w},id:"activity.collectionCreated.header"}):(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited {collectionTitle}} other {{authorOrAuthors} edited {collectionTitle}}}",values:{numberOfAuthors:_.length,authorOrAuthors:R,collectionTitle:w},id:"activity.collectionEdited.header"});return(0,x.jsxs)(f().Ay,{timestamp:g,header:(0,x.jsx)("span",{children:B}),isLast:s,isPrivate:I,rootStore:r,navigableBlockId:O,icon:(0,x.jsx)(f().H8,{authors:_,size:24}),showSnapshotButton:(0,S().m)(o),...(0,b().em)({notification:l,activity:t,environment:v,tab:c}),children:[a().r$(k)&&(0,x.jsx)(j,{tabArgs:o,rootStore:r,edit:k,url:K}),(0,x.jsx)(A().A,{tabArgs:o,activity:t,isMobile:v.device.isMobile,environment:v,rootStore:r})]})},"collection-view-edited":function(e){const{activity:t,tabArgs:r,rootStore:a,isLast:s}=e,{notification:l,tab:c}=r,u=(0,i().v3)(),p=(0,n().K8)((()=>parseInt(t.end_time)),[t]),v=(0,n().K8)((()=>t.collection_id),[t]),g=(0,n().K8)((()=>t.navigable_block_id),[t]),m=(0,n().K8)((()=>(0,O().W9)(t.getEdits())),[t]),j=m[0],M=(0,n().K8)((()=>a.getRecordStore(a,{table:h().Vl,id:v,spaceId:t.space_id})),[t,v,a]),k=(0,n().K8)((()=>a.getRecordStore(a,{table:o(869558).Gy,id:t.collection_view_id,spaceId:t.space_id})),[t,a]),T=(0,n().K8)((()=>(0,d().Ln)({edits:m,rootStore:a})),[m,a]),K=(0,x.jsx)(L,{rootStore:a,collectionViewStore:k,activity:t,tabArgs:r}),_=(0,x.jsx)(y().A,{titledRecordStore:M,activity:t,tabArgs:r,getRecordModel:a.getRecordModel}),R=(0,n().K8)((()=>(0,d().DU)({recordId:v,recordType:"collection",tab:c,rootStore:a,environment:u})),[v,c,a,u]);return j&&M&&k?(0,x.jsx)(f().Ay,{timestamp:p,header:(0,x.jsx)("span",{children:(0,x.jsx)(B,{edit:j,authors:T,collectionTitle:_,collectionViewTitle:K})}),isLast:s,isPrivate:R,rootStore:a,navigableBlockId:g,icon:(0,x.jsx)(f().H8,{authors:T,size:24}),showSnapshotButton:(0,S().m)(r),...(0,b().em)({notification:l,activity:t,environment:u,tab:c}),children:(0,x.jsx)(A().A,{tabArgs:r,activity:t,isMobile:u.device.isMobile,environment:u,rootStore:a})}):null},"collection-property-edited":function(e){const{activity:t,tabArgs:r,rootStore:a,isLast:s}=e,{notification:l,tab:c}=r,v=(0,i().v3)(),g=(0,n().K8)((()=>parseInt(t.end_time)),[t]),m=(0,n().K8)((()=>t.collection_id),[t]),j=(0,n().K8)((()=>t.navigable_block_id),[t]),M=(0,n().K8)((()=>(0,O().W9)(t.getEdits())),[t]),k=M[0],_=(0,n().K8)((()=>a.getRecordStore(a,{table:h().Vl,id:m,spaceId:t.space_id})),[m,t.space_id,a]),R=(0,n().K8)((()=>{var e;return null===(e=_.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:a.getRecordModel,pageVisitSource:u().y8.Activity})}),[_,a]),I=(0,n().K8)((()=>(0,d().Ln)({edits:M,rootStore:a})),[M,a]),w=(0,n().K8)((()=>(0,d().bD)(I)),[I]),B=(0,n().K8)((()=>(0,d().DU)({recordId:m,recordType:"collection",tab:c,rootStore:a,environment:v})),[m,c,a,v]);if(!_||!k||!R)return null;const L="collection-property-changed"===k.type?k.collection_property_data.after:k.collection_property_data,C=(0,x.jsx)(y().A,{titledRecordStore:_,activity:t,tabArgs:r,getRecordModel:a.getRecordModel}),P=(0,x.jsx)(K,{propertySchema:L});let D;return D="collection-property-created"===k.type?(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} created property {collectionPropertyTitle} in {collectionTitle}} other {{authorOrAuthors} created property {collectionPropertyTitle} in {collectionTitle}}}",values:{numberOfAuthors:I.length,authorOrAuthors:w,collectionTitle:C,collectionPropertyTitle:P},id:"activity.collectionPropertyCreated.header"}):"collection-property-deleted"===k.type?(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} deleted property {collectionPropertyTitle} in {collectionTitle}} other {{authorOrAuthors} deleted property {collectionPropertyTitle} in {collectionTitle}}}",values:{numberOfAuthors:I.length,authorOrAuthors:w,collectionTitle:C,collectionPropertyTitle:P},id:"activity.collectionPropertyDeleted.header"}):(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited property {collectionPropertyTitle} in {collectionTitle}} other {{authorOrAuthors} edited property {collectionPropertyTitle} in {collectionTitle}}}",values:{numberOfAuthors:I.length,authorOrAuthors:w,collectionTitle:C,collectionPropertyTitle:P},id:"activity.collectionPropertyEdited.header"}),(0,x.jsxs)(f().Ay,{timestamp:g,header:(0,x.jsx)("span",{children:D}),isLast:s,isPrivate:B,rootStore:a,navigableBlockId:j,icon:(0,x.jsx)(f().H8,{authors:I,size:24}),showSnapshotButton:(0,S().m)(r),...(0,b().em)({notification:l,activity:t,environment:v,tab:c}),children:[(0,x.jsx)(o(6533).A,{visible:5,items:M.map((e=>(0,x.jsx)(T,{tabArgs:r,rootStore:a,edit:e,url:R},e.collection_property_id)))}),(0,x.jsx)(A().A,{tabArgs:r,activity:t,isMobile:v.device.isMobile,environment:v,rootStore:a})]})},"page-locked":P,"page-unlocked":P,"page-deleted":C,"page-restored":C,"page-permanently-deleted":C,"collection-page-layout-edited":function(e){const{activity:t,tabArgs:o,rootStore:r,isLast:a}=e,{notification:s,tab:l}=o,c=(0,i().v3)(),v=(0,n().K8)((()=>parseInt(t.end_time)),[t]),g=(0,n().K8)((()=>t.collection_id),[t]),A=(0,n().K8)((()=>(0,O().W9)(t.getEdits())),[t]),m=A[0],j=(0,n().K8)((()=>r.getRecordStore(r,{table:h().Vl,id:g,spaceId:t.space_id})),[g,t.space_id,r]),M=(0,n().K8)((()=>{var e;return null===(e=j.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:r.getRecordModel,pageVisitSource:u().y8.Activity})}),[j,r]),k=(0,n().K8)((()=>(0,d().Ln)({edits:A,rootStore:r})),[A,r]),T=(0,n().K8)((()=>(0,d().bD)(k)),[k]),K=(0,n().K8)((()=>(0,d().DU)({recordId:g,recordType:"collection",tab:l,rootStore:r,environment:c})),[g,l,r,c]);if(!j||!m||!M)return null;const _=(0,x.jsx)(y().A,{titledRecordStore:j,activity:t,tabArgs:o,getRecordModel:r.getRecordModel}),R=(0,x.jsx)(p().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} edited the layout of {collectionTitle}} other {{authorOrAuthors} edited the layout of {collectionTitle}}}",values:{numberOfAuthors:k.length,authorOrAuthors:T,collectionTitle:_},id:"activity.collectionPageLayoutEdited.header"});return(0,x.jsx)(f().Ay,{timestamp:v,header:(0,x.jsx)("span",{children:R}),isLast:a,isPrivate:K,rootStore:r,icon:(0,x.jsx)(f().H8,{authors:k,size:24}),showSnapshotButton:(0,S().m)(o),...(0,b().em)({notification:s,activity:t,environment:c,tab:l})})}}}}]);