"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[34877],{8870:(e,t,n)=>{n.d(t,{L:()=>o});class s extends(()=>n(757695))().Store{getInitialState(){return{currentScreen:"none",status:"not_started",isBackendConnected:!1,externalSourceName:void 0,sessionId:n(206267).JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isLoaded:!1,isNotionMailProhibited:!1}}}const o=new s;(0,n(604341).exposeDebugValue)("notionMailAIConnectorStore",o)},46657:(e,t,n)=>{n.d(t,{W:()=>o});class s extends(()=>n(757695))().Store{getInitialState(){return{currentScreen:"none",status:"not_started",sessionId:n(206267).JW(),analyticsFrom:"unknown",authUrl:void 0,ingestionProgress:void 0,isConnected:!1,isDisconnecting:!1,isLoaded:!1,externalSourceName:void 0}}}const o=new s},92383:(e,t,n)=>{n.d(t,{E:()=>i,F:()=>o});var s=()=>n(206267);function o(){return{currentScreen:"none",selection:{allSelected:!0,selectedDrives:[],excludedDrives:[],ingestNewDrives:!0},status:"not_started",sessionId:s().JW(),analyticsFrom:"unknown",authUrl:void 0,isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isSyncComplete:!1,isLoaded:!1,connectionDetails:void 0}}class a extends(()=>n(757695))().Store{getInitialState(){return o()}}const i=new a;(0,n(604341).exposeDebugValue)("sharepointAiConnectorStore",i)},99254:(e,t,n)=>{n.d(t,{L:()=>o,y:()=>i});var s=()=>n(206267);function o(){return{currentScreen:"none",analyticsFrom:"unknown",sessionId:s().JW(),jiraSiteId:"",jiraSiteUrl:"",jiraSyncState:"not_started",jiraSyncProgress:0,syncControl:{exclusionList:[],inclusionList:[],createdAt:Date.now(),updatedAt:Date.now()},missingUserAuth:!1,isDisconnecting:!1,isLoaded:!1,userConnected:!1}}class a extends(()=>n(757695))().Store{getInitialState(){return o()}isOldJiraConnected(){return"completed"===this.state.jiraSyncState}}const i=new a;(0,n(604341).exposeDebugValue)("jiraAIConnectionStore",i)},174636:(e,t,n)=>{n.d(t,{Q:()=>o,R:()=>i});var s=()=>n(206267);function o(){return{inProgress:!1,isPublicSync:!1,isPrivateSync:!1,selection:{allSelected:!0,selectedChannels:[],excludedChannels:[],joinFutureChannels:!0},isSyncCompleted:!1,currentScreen:"none",sessionId:s().JW(),analyticsFrom:"unknown",authUrl:void 0,canQuery:!0,connectedApps:void 0,noChannelsSelected:void 0,ingestionProgress:void 0,gridSetupUrl:void 0,isSlackGridAiConnectorEnabled:!1,isLoaded:!1,externalSourceName:void 0,forceShowAuthNotificationTriggeredAt:void 0}}class a extends(()=>n(757695))().Store{getInitialState(){return o()}}const i=new a;(0,n(604341).exposeDebugValue)("slackUniversalQnAConnectionStore",i)},229533:(e,t,n)=>{n.d(t,{$t:()=>D,F1:()=>C,HF:()=>b,LT:()=>_,UK:()=>P,_1:()=>y,al:()=>I,uD:()=>h,zM:()=>A});n(18107),n(944114),n(967357);var s=()=>n(902006),o=()=>n(534177),a=()=>n(634877),i=()=>n(174636),r=()=>n(291075),c=()=>n(771624),d=()=>n(46657),l=()=>n(963702),u=()=>n(8870),g=()=>n(92383),p=()=>n(430483),m=()=>n(217429),S=()=>n(756315),v=()=>n(99254),f=()=>n(479350);const y=["slack_select_channels","slack_re_auth","github_re_auth","jira_connection_pending","sharepoint_select_sites","jira_connect_user","jira_select_projects"];function h(e,t){const n=[];if("slack"===e){const{noChannelsSelected:e,ingestionProgress:s}=i().R.state;e&&void 0===s&&t&&n.push({type:"slack_select_channels"}),I(i().R.state)&&n.push({type:"slack_re_auth"})}else if("jira"===e){"pending_selection"===f().E.state.jiraSyncState&&n.push({type:"jira_select_projects"});const{jiraSyncState:e}=v().y.state;m().default.checkGate({gateName:"install_from_jira_marketplace"})&&"pending_connection"===e&&t&&n.push({type:"jira_connection_pending"});m().default.checkGate({gateName:"jira_user_auth_flow"})&&v().y.state.missingUserAuth&&n.push({type:"jira_connect_user"})}else if("sharepoint"===e){const{connectionDetails:e}=g().E.state;"pending_selection"===(null==e?void 0:e.status)&&t&&n.push({type:"sharepoint_select_sites"})}else"github"===e&&C(r().o.state)&&n.push({type:"github_re_auth"});return n}function A(e){return"slack"===e?!i().R.state.canQuery:"github"===e&&!r().o.state.isPersonalAuthComplete}function I(e){const{isSlackGridAiConnectorEnabled:t,isSyncCompleted:n,ingestionProgress:s,canQuery:o}=e;return!(t||!n||void 0!==s||o)}function C(e){const{githubOrg:t,isPersonalAuthComplete:n,isDisconnecting:s,forceShowAuthNotificationTriggeredAt:o}=e;return!(!o&&(null==t||!t.isSyncComplete||n||s))}function _(e){if("slack"===e){const{inProgress:e,ingestionProgress:t,isSlackGridAiConnectorEnabled:n}=i().R.state;return n?{isInProgress:!1}:e?{isInProgress:!0,ingestionProgress:t??0}:{isInProgress:!1}}if("google-drive"===e){const{ingestionProgress:e,isEditing:t}=S().d.state;return void 0!==e||t?{isInProgress:!0,ingestionProgress:e}:{isInProgress:!1}}if("github"===e){const{status:e}=r().o.state;return"in_progress"===e?{isInProgress:!0,ingestionProgress:void 0}:{isInProgress:!1}}if("jira"===e){if(p().zD.isJiraOldAiConnectorEnabled()){const{jiraSyncState:e,jiraSyncProgress:t}=v().y.state;if("in_progress"===e||"editing"===e)return{isInProgress:!0,ingestionProgress:t}}const{jiraSyncState:e,jiraSyncProgress:t}=f().E.state;return"in_progress"===e||"editing"===e||"pending_installation"===e?{isInProgress:!0,ingestionProgress:t}:{isInProgress:!1}}if("sharepoint"===e){const{connectionDetails:e}=g().E.state;return"in_progress"===(null==e?void 0:e.status)?{isInProgress:!0,ingestionProgress:null==e?void 0:e.progress}:{isInProgress:!1}}if("microsoft-teams"===e){const{connectionStatus:e,syncProgressPercentage:t}=l().F.state;return"in_progress"===e?{isInProgress:!0,ingestionProgress:t}:{isInProgress:!1}}if((0,s().Gb)(e))return{isInProgress:!1};if("linear"===e){const{status:e,ingestionProgress:t}=d().W.state;return"in_progress"===e?{isInProgress:!0,ingestionProgress:t}:{isInProgress:!1}}return(0,o().HB)(e)}function D(e){if("sharepoint"===e){const{connectionDetails:e}=g().E.state;return"disconnecting"===(null==e?void 0:e.status)}if("linear"===e){const{status:e}=d().W.state;return"disconnecting"===e}return"jira"===e&&p().zD.isJiraOldAiConnectorEnabled()?"disconnecting"===v().y.state.jiraSyncState:Boolean(a().NT[e].state.isDisconnecting)}function b(e){const t=function(e){return h(e,!0)}(e),n=t.at(0),s=P(e);if(n)return{type:"action_required",action:n.type,externalSourceName:s};const o=_(e);return o.isInProgress?{type:"in_progress",ingestionProgress:o.ingestionProgress,externalSourceName:s}:D(e)?{type:"disconnecting",externalSourceName:s}:{type:"connected",externalSourceName:s}}function P(e){if("jira"===e){const{jiraSiteUrl:e}=v().y.state,t=/^https:\/\/([a-zA-Z0-9-]+)\.atlassian\.net/,n=e.match(t);return(null==n?void 0:n[1])||e}if("google-drive"===e){const{externalSourceName:e}=S().d.state;return e}if("github"===e){const{externalSourceName:e}=r().o.state;if(e)return e;const{githubOrg:t}=r().o.state;return null==t?void 0:t.name}if("linear"===e){const{externalSourceName:e}=d().W.state;return e}if("sharepoint"===e){const{connectionDetails:e}=g().E.state;return null==e?void 0:e.externalSourceName}if("slack"===e){const{externalSourceName:e}=i().R.state;return e}if("gmail"===e){const{externalSourceName:e}=c().X.state;return e}if("notion-mail"===e){const{externalSourceName:e}=u().L.state;return e}if("microsoft-teams"===e){const{externalSourceName:e}=l().F.state;return e}}},235195:(e,t,n)=>{n.d(t,{A:()=>a});class s extends(()=>n(757695))().Store{getInitialState(){return{connectorTriggeringUpsell:void 0,upsellTriggeredAt:void 0,appsConnectionData:[]}}updateAppsConnectionData(e){this.setState({...this.state,appsConnectionData:e})}addConnectedApp(e){this.setState({...this.state,appsConnectionData:[...this.state.appsConnectionData,e]})}}const o=new s;(0,n(604341).exposeDebugValue)("aiConnectorsStore",o);const a=o},291075:(e,t,n)=>{n.d(t,{F:()=>o,o:()=>i});var s=()=>n(206267);function o(){return{currentScreen:"none",selection:{allSelected:!0,selectedRepos:[],excludedRepos:[],ingestNewRepos:!0},status:"not_started",sessionId:s().JW(),analyticsFrom:"unknown",authUrl:void 0,githubOrg:void 0,isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,forceShowAuthNotificationTriggeredAt:void 0,isLoaded:!1,externalSourceName:void 0}}class a extends(()=>n(757695))().Store{getInitialState(){return o()}}const i=new a;(0,n(604341).exposeDebugValue)("githubAIConnectorStore",i)},291657:(e,t,n)=>{n.d(t,{t:()=>o,y:()=>i});var s=()=>n(206267);function o(){return{currentScreen:"none",status:"not_started",sessionId:s().JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isLoaded:!1}}class a extends(()=>n(757695))().Store{getInitialState(){return o()}}const i=new a;(0,n(604341).exposeDebugValue)("outlookAIConnectorStore",i)},295118:(e,t,n)=>{n.d(t,{Wh:()=>f,ZC:()=>v,jx:()=>y});var s=()=>n(902006),o=()=>n(763824),a=()=>n(534177),i=()=>n(174636),r=()=>n(291075),c=()=>n(771624),d=()=>n(46657),l=()=>n(963702),u=()=>n(92383),g=()=>n(765957),p=()=>n(756315),m=()=>n(99254),S=()=>n(751156);const v=new(n(178624).R)({key:"use_mock_connector_status",namespace:n(419494).cd,important:!1,trackingType:"preference"});function f(e,t,n){const s=g().default.state.currentSpaceViewStore;s&&S().createAndCommit({userAction:"mockConnectorStatusActions.setDebuggingConnectorStatus",environment:e,canUndo:!1,perform:e=>{s&&S().applyOperation({store:s,operation:{pointer:s.pointer,path:["settings"],command:"update",args:{...s.getSettings(),dismissed_slack_personal_auth_prompt:!1,dismissed_github_personal_auth_prompt:!1}},transaction:e})}}),"slack"===t?(0,a().O)(A,n)&&i().R.setState(A[n]):"google-drive"===t?(0,a().O)(C,n)&&p().d.setState(C[n]):"github"===t?(0,a().O)(D,n)&&r().o.setState(D[n]):"jira"===t?(0,a().O)(P,n)&&m().y.setState(P[n]):"sharepoint"===t?(0,a().O)(j,n)&&u().E.setState(j[n]):"microsoft-teams"===t?(0,a().O)(k,n)&&l().F.setState(k[n]):"gmail"===t?(0,a().O)(T,n)&&c().X.setState(T[n]):"linear"===t?(0,a().O)(U,n)&&d().W.setState(U[n]):console.log("Connector not implemented",t)}async function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;for(const n of Object.values(s().fl))if((0,a().O)(E,n))for(const s of Object.keys(E[n]))console.log("Setting mock connector status for",n,s),f(e,n,s),await(0,o().wR)(t)}const h=(0,i().Q)(),A={not_connected:h,no_channels_selected:{...h,noChannelsSelected:!0},cant_query_connection:{...h,canQuery:!1,isSyncCompleted:!0},in_progress:{...h,inProgress:!0,isSyncCompleted:!1,ingestionProgress:50},disconnecting:{...h,isSyncCompleted:!0,inProgress:!1,connectedApps:["slack-admin"],isDisconnecting:!0},connected:{...h,isSyncCompleted:!0,inProgress:!1,connectedApps:["slack-admin"]}},I=(0,p().s)(),C={not_connected:{...I},in_progress:{...I,initialSyncState:"in_progress",syncProgress:"initial_file_sync_in_progress",syncCurrent:50,syncTotal:100,ingestionProgress:50},disconnecting:{...I,syncProgress:"completed",initialSyncState:"completed",isDisconnecting:!0},connected:{...I,syncProgress:"completed",initialSyncState:"completed"}},_=(0,r().F)(),D={not_started:_,not_authenticated:{..._,isConnected:!0,isPersonalAuthComplete:!1,githubOrg:{id:1,installationId:1,isSyncComplete:!0,lastSyncedAt:1,name:"Test Org"},externalSourceName:"Test Org"},in_progress:{..._,status:"in_progress",externalSourceName:"Test Org"},disconnecting:{..._,isPersonalAuthComplete:!0,isConnected:!0,isDisconnecting:!0,externalSourceName:"Test Org"},connected:{..._,isPersonalAuthComplete:!0,isConnected:!0,externalSourceName:"Test Org"}},b=(0,m().L)(),P={not_started:{...b},in_progress:{...b,jiraSyncState:"in_progress",jiraSyncProgress:50},disconnecting:{...b,jiraSyncState:"completed",isDisconnecting:!0},connected:{...b,jiraSyncState:"completed"},jira_connection_pending:{...b,jiraSyncState:"pending_connection",jiraSyncProgress:0}},w=(0,l().G)(),k={not_started:w,in_progress:{...w,connectionStatus:"in_progress",syncProgressPercentage:50},disconnecting:{...w,connectionStatus:"completed",isDisconnecting:!0},connected:{...w,connectionStatus:"completed"}},N=(0,u().F)(),j={not_started:N,in_progress:{...N,connectionDetails:{status:"in_progress",progress:50,externalSourceName:"Notion Labs"}},disconnecting:{...N,isConnected:!0,connectionDetails:{status:"disconnecting",progress:100,externalSourceName:"Notion Labs"},isDisconnecting:!0},connected:{...N,isConnected:!0,connectionDetails:{status:"completed",progress:100,externalSourceName:"Notion Labs"}},sharepoint_select_sites:{...N,connectionDetails:{status:"pending_selection",progress:0,externalSourceName:"Notion Labs"}}},x=(0,c().A)(),T={not_started:x,connected:{...x,isConnected:!0,status:"authenticated"}},M=(0,n(291657).t)(),F={not_started:M,connected:{...M,isConnected:!0,status:"authenticated"}},L=d().W.getInitialState(),U={not_started:{...L},in_progress:{...L,status:"in_progress",ingestionProgress:50},disconnecting:{...L,isConnected:!0,status:"disconnecting",ingestionProgress:100,isDisconnecting:!0},connected:{...L,isConnected:!0,status:"completed",ingestionProgress:100}},E={slack:A,"google-drive":C,github:D,jira:P,sharepoint:j,"microsoft-teams":k,gmail:T,outlook:F,linear:U}},323714:(e,t,n)=>{n.r(t),n.d(t,{connectSpaceToJiraSite:()=>Ne,disconnectConnector:()=>ke,disconnectConnectorPersonalAuth:()=>we,disconnectJiraUserConnection:()=>je,getAiConnectorOnboardingMomentInSettings:()=>Fe,getConnectorStatus:()=>xe,getGithubStatus:()=>ee,getJiraAIConnectionStatusAction:()=>ce,getJiraSyncControlAction:()=>de,getLinearConnectorStatus:()=>Pe,getListAIConnectorsPromise:()=>Te,getMicrosoftTeamsAIConnectorStatusAction:()=>ve,getMicrosoftTeamsSyncControlsAction:()=>fe,getMicrosoftTeamsTeamsAction:()=>ye,getSharepointConnectorDetails:()=>De,maybeMarkAiConnectorOnboardingSurveyMomentInSettings:()=>Le,maybeTrackSprigAiConnectorOnboardingSurvey:()=>Ee,navigateToAIConnectorOnboarding:()=>X,navigateToAIConnectorSettingsScreen:()=>H,navigateToGoogleDriveUniversalScreen:()=>z,navigateToJiraUniversalScreen:()=>V,navigateToLinearUniversalScreen:()=>be,navigateToMicrosoftTeamsUniversalScreen:()=>K,navigateToSharepointUniversalScreen:()=>_e,navigateToSlackUniversalQnAOnboarding:()=>B,openAuthNeededModal:()=>me,openConnectorInProgressModal:()=>pe,resetAiConnectorStatus:()=>$,resetAllAiConnectors:()=>q,setAiConnectorOnboardingSurveyMomentInSettings:()=>Ue,setAssistantOnboardingPhase:()=>G,setLastExposedToQnaAtToCurrentTimestamp:()=>Q,setLastUsedAIWriterAtToCurrentTimestamp:()=>R,setMicrosoftTeamsSyncControlsAction:()=>he,setQnaOnboardingPhase:()=>J,startJiraBulkIngestionAction:()=>le,startJiraEditFlow:()=>ue,startMicrosoftTeamsBulkIngestionAction:()=>Ae,updateGithubAIConnectorStatus:()=>te,updateGmailAIConnectorStatus:()=>ne,updateGoogleCalendarAIConnectorStatus:()=>se,updateGoogleDriveQnAConnectionState:()=>ge,updateJiraAIConnectionStatus:()=>ie,updateJiraAIV2ConnectionStatus:()=>re,updateLinearAIConnectorStatus:()=>ae,updateMicrosoftTeamsAIConnectorStatusAction:()=>Se,updateNotionMailAIConnectorStatus:()=>oe,updateOutlookAIConnectorStatus:()=>Ie,updateSharepointAiConnectorStatus:()=>Ce,updateSlackConnectionStatus:()=>Y,updateSlackQnAConnectionState:()=>Z});n(16280),n(18107),n(944114),n(967357),n(898992),n(354520),n(672577),n(803949),n(581454),n(737550);var s=()=>n(244641),o=()=>n(902006),a=()=>n(206267),i=()=>n(386164),r=()=>n(116225),c=()=>n(534177),d=()=>n(449506),l=()=>n(874913),u=()=>n(436572),g=()=>n(751156),p=()=>n(755199),m=()=>n(2220),S=()=>n(650829),v=()=>n(604018),f=()=>n(235195),y=()=>n(174636),h=()=>n(972435),A=()=>n(694926);class I extends(()=>n(757695))().Store{getInitialState(){return{listAIConnectorsPromise:void 0,spaceId:void 0}}}const C=new I;(0,n(604341).exposeDebugValue)("aiConnectorsStore",C);var _=()=>n(291075),D=()=>n(771624),b=()=>n(575922),P=()=>n(46657),w=()=>n(963702),k=()=>n(8870),N=()=>n(291657),j=()=>n(92383),x=()=>n(765957),T=()=>n(453202),M=()=>n(430483),F=()=>n(217429),L=()=>n(756315),U=()=>n(99254),E=()=>n(479350),O=()=>n(987267),W=()=>n(634877);function J(e,t){const{phase:n,transactionUserAction:s,userSettingsStore:o}=t;g().createAndCommit({environment:e,userAction:s,canUndo:!0,perform:e=>{p().mJ({userSettingsStore:o,transaction:e,data:{ai_qna_intro_onboarding_phase:n}})}})}function G(e,t){const{phase:n,transactionUserAction:s,userSettingsStore:o}=t;g().createAndCommit({environment:e,userAction:s,canUndo:!0,perform:e=>{p().mJ({userSettingsStore:o,transaction:e,data:{ai_assistant_onboarding_phase:n,ai_assistant_onboarding_phase_last_set_at:Date.now()}})}})}function Q(e,t){const{userSettingsStore:n}=t;g().createAndCommit({environment:e,userAction:"aiQnaActions.setLastExposedToQnaAtToCurrentTimestamp",canUndo:!0,perform:e=>{p().mJ({userSettingsStore:n,transaction:e,data:{last_exposed_to_ai_qna_at:Date.now()}})}})}function R(e,t){const{userSettingsStore:n}=t;g().createAndCommit({environment:e,userAction:"aiQnaActions.setLastUsedAIWriterAtToCurrentTimestamp",canUndo:!0,perform:e=>{p().mJ({userSettingsStore:n,transaction:e,data:{last_used_ai_writer_at:Date.now()}})}})}function B(e){const{analyticsFrom:t}=e,n=e.sessionId??a().JW();y().R.setState({...y().R.state,currentScreen:"introduction",analyticsFrom:t,sessionId:n})}function z(e){const{screenToShow:t,analyticsFrom:n}=e,s=e.sessionId??a().JW();L().d.setState({...L().d.state,analyticsFrom:n,sessionId:s,currentScreen:t})}function V(e){const{analyticsFrom:t,screenToShow:n}=e,s=e.sessionId??a().JW();U().y.setState({...U().y.state,analyticsFrom:t,currentScreen:n,sessionId:s})}function K(e){const{currentScreen:t,analyticsFrom:n,sessionId:s}=e;w().F.setState({...w().F.state,currentScreen:t,analyticsFrom:n??w().F.state.analyticsFrom,sessionId:s??w().F.state.sessionId})}function H(e){const{connector:t,...n}=e;if("jira"===t&&M().zD.isJiraOldAiConnectorEnabled()&&U().y.isOldJiraConnected())return void U().y.setState({...U().y.state,...n,currentScreen:"settings"});const s=W().NT[t];s.setState({...s.state,...n,currentScreen:"settings"})}function X(e){const{connector:t,...n}=e;if("google-drive"===t){"not_started"===L().d.state.initialSyncState&&z({...n,screenToShow:"introduction"})}else if("microsoft-teams"===t){if(["not_started","pending_selection"].includes(w().F.state.connectionStatus))return void K({...n,currentScreen:"not_started"===w().F.state.connectionStatus?"introduction":"connection_complete_screen"})}else{const e=W().NT[t];e.setState({...e.state,...n,currentScreen:"introduction"})}}function $(e){"jira"===e&&M().zD.isJiraOldAiConnectorEnabled()&&U().y.isOldJiraConnected()?U().y.reset():W().NT[e].reset()}function q(){o().fl.forEach((e=>{$(e)}))}async function Y(e){const{environment:t,spaceId:n}=e,s=await xe({environment:t,spaceId:n,connector:"slack"});if("failed"===s)return{status:"failed"};if(s){var o,a,i;const e=s.details.connectionDetails,t=[];null!==(o=s.details.userConnectionDetails)&&void 0!==o&&o.isEnabledForPrivateSync&&t.push("slack"),null!=e&&e.external_source_name&&t.push("slack-admin"),y().R.setState({...y().R.state,canQuery:(null===(a=s.details.userConnectionDetails)||void 0===a?void 0:a.isAvailableForUser)??!0,isPrivateSync:(null===(i=s.details.userConnectionDetails)||void 0===i?void 0:i.isEnabledForPrivateSync)??!1,ingestionProgress:(null==e?void 0:e.progress)>=100||"completed"===(null==e?void 0:e.status)?void 0:(null==e?void 0:e.progress)??0,isPublicSync:(null==e?void 0:e.isPublicSync)??!1,externalSourceName:(null==e?void 0:e.external_source_name)??"",inProgress:"in_progress"===(null==e?void 0:e.status),isSyncCompleted:"completed"===(null==e?void 0:e.status),isEditing:"editing"===(null==e?void 0:e.status),isDisconnecting:"disconnecting"===(null==e?void 0:e.status),connectedApps:t,isSlackGridAiConnectorEnabled:(null==e?void 0:e.isGridAiConnectorEnabled)??!1,isLoaded:!0})}else y().R.setState({...y().R.state,isDisconnecting:!1,isSyncCompleted:!1,inProgress:!1,ingestionProgress:void 0,isPublicSync:!1,externalSourceName:"",connectedApps:[],isLoaded:!0});return{status:"success"}}async function Z(e){const{environment:t,spaceId:n}=e;let s=!1;if(F().default.checkGate({gateName:"ai_connector_unification"}))return Y({environment:t,spaceId:n});const o=await d().callApi({eventName:"getSlackBulkIngestionStatus",environment:t,data:{spaceId:n},headers:(0,i().WS)({spaceId:n})});var a;"success"===o.type?y().R.setState({...y().R.state,...o.data,ingestionProgress:o.data.isPublicSync?o.data.ingestionProgress||1:void 0,externalSourceName:null===(a=o.data)||void 0===a||null===(a=a.connectionDetails)||void 0===a?void 0:a.externalSourceName}):s=!0;const r=await d().callApi({eventName:"canUserQuerySlack",environment:t,data:{spaceId:n}});"success"===r.type?y().R.setState({...y().R.state,canQuery:r.data.canQuery}):s=!0;const c=await d().callApi({eventName:"getConnectedAppsForUniversalQna",environment:t,data:{spaceId:n},headers:(0,i().WS)({spaceId:n})});return"success"===c.type?(y().R.setState({...y().R.state,connectedApps:c.data.connectedApps,isLoaded:!0}),f().A.updateAppsConnectionData(c.data.appsData??[])):s=!0,{status:s?"failed":"success"}}function ee(e){var t;return null!==(t=e.githubOrg)&&void 0!==t&&t.isSyncComplete?"completed":e.isConnected?"in_progress":"not_started"}async function te(e){const{environment:t,spaceId:n}=e,s=await d().callApi({eventName:"getGithubAIConnectorStatus",environment:t,data:{spaceId:n}});return"success"!==s.type?{status:"failed"}:(_().o.setState({..._().o.state,status:ee(s.data),isConnected:s.data.isConnected,githubOrg:s.data.githubOrg,isPersonalAuthComplete:s.data.isPersonalAuthComplete,isDisconnecting:s.data.isDisconnecting,isLoaded:!0,externalSourceName:s.data.externalSourceName}),{status:"success"})}async function ne(e){const{environment:t,spaceId:n}=e,s=await d().callApi({eventName:"getConnectedAppsForUniversalQna",environment:t,data:{spaceId:n},headers:(0,i().WS)({spaceId:n})});if("success"!==s.type)return{status:"failed"};const o=s.data.connectedApps.includes("gmail-individual")||s.data.connectedApps.includes("gmail-workspace"),a=s.data.appsData.find((e=>"gmail-workspace"===e.connectionType)),r="gmail-workspace"===(null==a?void 0:a.connectionType)?a.connectorEmail:void 0,c=r?r.split("@").at(1):void 0;return D().X.setState({...D().X.state,status:o?"authenticated":"not_started",isConnected:o,externalSourceName:c,isPersonalAuthComplete:o,isLoaded:!0}),{status:"success"}}async function se(e){const{environment:t,spaceId:n}=e,s=await d().callApi({eventName:"getConnectedAppsForUniversalQna",environment:t,data:{spaceId:n},headers:(0,i().WS)({spaceId:n})});if("success"!==s.type)return{status:"failed"};const o=s.data.connectedApps.includes("google-calendar-individual")||s.data.connectedApps.includes("google-calendar-workspace");return b().W.setState({...b().W.state,status:o?"authenticated":"not_started",isConnected:o,isPersonalAuthComplete:o,isLoaded:!0}),{status:"success"}}async function oe(e){var t;const{environment:n,spaceId:s}=e,o=await(0,A().$)({environment:n}),a=await d().callApi({eventName:"getConnectedAppsForUniversalQna",environment:n,data:{spaceId:s},headers:(0,i().WS)({spaceId:s})});if("success"!==a.type)return{status:"failed"};const r=a.data.connectedApps.includes("notion-mail"),c=a.data.appsData.some((e=>"notion-mail"===e.connectionType)),l=null===(t=a.data.appsData.find((e=>"notion-mail"===e.connectionType)))||void 0===t?void 0:t.connectorEmail;return k().L.setState({...k().L.state,status:r?"authenticated":"not_started",isBackendConnected:c,isConnected:r,isPersonalAuthComplete:r,isNotionMailProhibited:o,externalSourceName:l,isLoaded:!0}),{status:"success"}}async function ae(e){const{environment:t,spaceId:n}=e,s=await xe({environment:t,spaceId:n,connector:"linear"});if(!s||"failed"===s)return P().W.setState({...P().W.state,isConnected:!1,isLoaded:!0}),{status:"success"};const o=null==s?void 0:s.details.connectionDetails;return P().W.setState({...P().W.state,isConnected:"completed"===(null==o?void 0:o.status)||"disconnecting"===(null==o?void 0:o.status),isLoaded:!0,ingestionProgress:null==o?void 0:o.progress,status:null==o?void 0:o.status,externalSourceName:o.external_source_name}),{status:"success"}}async function ie(e){return ce(e).then((e=>e?{status:"success"}:{status:"failed"}))}async function re(e){const{environment:t,spaceId:n}=e;if(M().zD.isJiraOldAiConnectorEnabled())return await ie(e);if(!M().zD.isJiraForgeEnabled())return{status:"success"};const s=await xe({environment:t,spaceId:n,connector:"jira"});if("failed"===s)return{status:"failed"};if(!s)return E().E.setState({...E().E.state,jiraSyncState:"not_started",isLoaded:!0}),{status:"success"};const o=null==s?void 0:s.details.connectionDetails;return E().E.setState({...E().E.state,jiraSyncState:null==o?void 0:o.status,jiraSyncProgress:null==o?void 0:o.progress,isLoaded:!0,jiraSiteUrl:(null==o?void 0:o.external_source_name)||"",isDisconnecting:"disconnecting"===(null==o?void 0:o.status)}),{status:"success"}}async function ce(e){const{environment:t,spaceId:n}=e,s=await d().callApi({eventName:"getJiraAIConnectionStatus",environment:t,data:{spaceId:n},headers:(0,i().WS)({spaceId:n})});if("success"===s.type)return U().y.setState({...U().y.state,jiraSiteId:s.data.jiraSiteId??"",jiraSyncState:s.data.connectionState.status,jiraSyncProgress:s.data.connectionState.percentageComplete,jiraSiteUrl:s.data.jiraSiteUrl??"",isDisconnecting:"disconnecting"===s.data.connectionState.status,isLoaded:!0,missingUserAuth:"missing"===s.data.userAuth,userConnected:"connected"===s.data.userAuth}),s.data}async function de(e){const{environment:t,spaceId:n,jiraSiteId:s}=e,o=await d().callApi({eventName:"getSyncControlsForJiraConnector",environment:t,data:{spaceId:n,jiraSiteId:s}});if("success"===o.type)return U().y.setState({...U().y.state,syncControl:o.data.syncControl}),o}async function le(e){const{environment:t,spaceId:n,jiraSiteId:s,sessionId:o,exclusionList:a,inclusionList:i}=e,r=await d().callApi({eventName:"startJiraBulkIngestion",environment:t,data:{spaceId:n,jiraSiteId:s,sessionId:o,exclusionList:a,inclusionList:i}});if("success"===r.type)return u().D6({label:h().A.getIntl().formatMessage({defaultMessage:"Jira sync started. This can take up to 36 hours.",id:"jira.sync.started"}),position:"bottom"}),U().y.setState({...U().y.state,jiraSyncState:"in_progress",jiraSyncProgress:1}),r;u().D6({label:h().A.getIntl().formatMessage({defaultMessage:"Something went wrong. Please try again.",id:"jira.sync.failed"}),position:"bottom"})}async function ue(e){const{environment:t,spaceId:n,jiraSiteId:s,exclusionList:o,inclusionList:a}=e,i=await d().callApi({eventName:"startJiraEditBulkIngestion",environment:t,data:{spaceId:n,jiraSiteId:s,inclusionList:a,exclusionList:o}});if("success"===i.type)return i.data.patchSuccess?(U().y.setState({...U().y.state,jiraSyncState:"editing",jiraSyncProgress:100}),u().D6({label:h().A.getIntl().formatMessage({defaultMessage:"Project sync list updated, sync started in background.",id:"jira.edit.success"}),position:"bottom"})):u().D6({label:h().A.getIntl().formatMessage({defaultMessage:"No changes were detected.",id:"jira.edit.noChanges"}),position:"bottom"}),i;u().D6({label:h().A.getIntl().formatMessage({defaultMessage:"Something went wrong. Please try again.",id:"jira.edit.failed"}),position:"bottom"})}async function ge(e){var t;const{environment:n,spaceId:s,showSnackbarOnError:o}=e,a=await d().callApi({eventName:"getGoogleDriveSyncProgress",environment:n,data:{spaceId:s},headers:(0,i().WS)({spaceId:s})});return"success"!==a.type?o?a.status>=400&&a.status<500?((0,W().Rl)(),{status:"failed"}):((0,W().NK)(),{status:"failed"}):{status:"failed"}:(L().d.setState({...L().d.state,initialSyncState:(0,v().HB)(a.data.status),isDisconnecting:"disconnecting"===a.data.status,isEditing:"editing"===a.data.status,syncProgress:a.data.status,syncCurrent:a.data.current,syncTotal:a.data.total,ingestionProgress:a.data.ingestionProgress,isLoaded:!0,externalSourceName:null===(t=a.data.connectionDetails)||void 0===t?void 0:t.domainName}),{status:"success"})}function pe(e){const{environment:t,connector:n,from:s}=e;T().O.setState({...T().O.state,open:!0,modal:"progress",connector:n}),S().assistantDependency.load().then((e=>{let{assistantAnalyticsActions:o}=e;o.trackConnectorInProgressModalOpened({environment:t,connector:n,from:s})}))}function me(e){const{environment:t,connector:n,from:s}=e;T().O.setState({...T().O.state,open:!0,modal:"auth_needed",connector:n}),S().assistantDependency.load().then((e=>{let{assistantAnalyticsActions:o}=e;o.trackConnectorAuthNeededModalOpened({environment:t,connector:n,from:s})}))}async function Se(e){return ve(e).then((e=>e?{status:"success"}:{status:"failed"}))}async function ve(e){const{environment:t,spaceId:n,sessionId:s=w().F.state.sessionId}=e,o=await d().callApi({eventName:"getMicrosoftTeamsAIConnectorStatus",environment:t,data:{spaceId:n,sessionId:s},headers:(0,i().WS)({spaceId:n})});if("success"!==o.type)return;const a=o.data;if("error"===a.status)return w().F.setState({...w().F.state,error:a}),w().F.getState();const{microsoftTenantId:r,connectionDetails:c}=a;return w().F.setState({...w().F.state,microsoftTenantId:r,connectionStatus:(null==c?void 0:c.status)??"not_started",syncProgressPercentage:(null==c?void 0:c.progress)??0,isLoaded:!0,isDisconnecting:"disconnecting"===(null==c?void 0:c.status),error:void 0,externalSourceName:null==c?void 0:c.external_source_name}),w().F.getState()}async function fe(e){const{environment:t,spaceId:n}=e,s=await d().callApi({eventName:"getMicrosoftTeamsSyncControls",environment:t,data:{spaceId:n},headers:(0,i().WS)({spaceId:n})});if("success"===s.type)return s.data}async function ye(e){const{environment:t,spaceId:n,cursor:s}=e,o=await d().callApi({eventName:"getMicrosoftTeamsTeams",environment:t,data:{spaceId:n,cursor:s}});if("success"===o.type)return o.data}async function he(e){const{environment:t,spaceId:n,syncControls:s}=e,o=await d().callApi({eventName:"setMicrosoftTeamsSyncControls",environment:t,data:{spaceId:n,syncControls:s},headers:(0,i().WS)({spaceId:n})});if("success"===o.type)return o.data}async function Ae(e){const{environment:t,spaceId:n,sessionId:s}=e,o=await d().callApi({eventName:"startMicrosoftTeamsBulkIngestion",environment:t,data:{spaceId:n,sessionId:s}});if("success"===o.type)return u().D6({label:h().A.getIntl().formatMessage({defaultMessage:"Microsoft Teams sync started. This can take up to 36 hours.",id:"microsoftTeams.sync.started"}),position:"bottom"}),await ve({environment:t,spaceId:n}),o;u().D6({label:h().A.getIntl().formatMessage({defaultMessage:"Something went wrong. Please try again.",id:"microsoftTeams.sync.failed"}),position:"bottom"})}async function Ie(e){const{environment:t,spaceId:n}=e,s=await xe({environment:t,spaceId:n,connector:"outlook"});if(!s||"failed"===s)return N().y.setState({...N().y.state,status:"not_started",isPersonalAuthComplete:!1,isConnected:!1,isLoaded:!0}),{status:"success"};const o=s.details.connectionDetails;return N().y.setState({...N().y.state,status:"completed"===o.status?"authenticated":"not_started",isConnected:"completed"===o.status,isLoaded:!0,isPersonalAuthComplete:!0}),{status:"success"}}async function Ce(e){const{environment:t,spaceId:n}=e,s=await xe({environment:t,spaceId:n,connector:"sharepoint"});if(!s||"failed"===s)return j().E.setState({...j().E.state,isConnected:!1,isLoaded:!0,connectionDetails:void 0}),{status:"success"};const o=null==s?void 0:s.details.connectionDetails;return j().E.setState({...j().E.state,isConnected:void 0!==s,isLoaded:!0,connectionDetails:{status:null==o?void 0:o.status,progress:null==o?void 0:o.progress,externalSourceName:null==o?void 0:o.external_source_name}}),{status:"success"}}function _e(e){const{currentScreen:t}=e;j().E.setState({...j().E.state,currentScreen:t})}async function De(e){const{environment:t,spaceId:n}=e,s=await xe({environment:t,spaceId:n,connector:"sharepoint"});if(!s||"failed"===s)return{status:"not_started",externalSourceName:void 0};const o=s.details.connectionDetails;return{status:o.status,externalSourceName:o.external_source_name}}function be(e){const{currentScreen:t}=e;P().W.setState({...P().W.state,currentScreen:t})}async function Pe(e){const{environment:t,spaceId:n}=e,s=await xe({environment:t,spaceId:n,connector:"linear"});if(!s||"failed"===s)return"not_started";return s.details.connectionDetails.status}async function we(e){const{environment:t,currentSpaceViewStore:n,connector:s}=e;if("slack"===s)throw new Error("Slack connector personal auth disconnect not implemented");if("github"===s){const e=n.getSpaceId();if(!e)return;(0,m().u)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"user_auth_disconnect",integration_type:"github",setup_session_id:_().o.state.sessionId,from:_().o.state.analyticsFrom}}});const s=await d().callApi({eventName:"disconnectGithub",environment:t,data:{spaceId:e,disconnectUserAuth:!0}});g().createAndCommit({userAction:"githubAIConnector.onboarding.dismissPersonalAuthPrompt",environment:t,canUndo:!0,perform:e=>{n&&g().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings"],command:"update",args:{...n.getSettings(),dismissed_github_personal_auth_prompt:!0}},transaction:e})}}),_().o.setState({..._().o.state,isPersonalAuthComplete:!1}),"success"===s.type&&s.data.redirectUrl&&(t.device.isElectron?l().openExternalUrl(s.data.redirectUrl):window.open(s.data.redirectUrl,"_blank"))}else(0,c().HB)(s)}async function ke(e){const{connector:t,spaceId:n,environment:s,disconnectReason:a,showToast:i}=e;let r,l,g;"google-drive"===t?(r=await d().callApi({eventName:"disconnectGoogleDriveAIIngestion",environment:s,data:{spaceId:n,disconnectReason:a}}),l=o()._u,g=["google-drive"]):"github"===t?(r=await d().callApi({eventName:"disconnectGithub",environment:s,data:{spaceId:n}}),l=o().Fl,g=["github"]):"gmail"===t?(r=await d().callApi({eventName:"disconnectAiConnector",environment:s,data:{spaceId:n,connector:"gmail"}}),r={type:"success"},l=o().KI,g=["gmail-workspace"]):"google-calendar"===t?(r=await d().callApi({eventName:"disconnectAiConnector",environment:s,data:{spaceId:n,connector:"google-calendar"}}),r={type:"success"},l=o().Mf,g=["google-calendar-workspace"]):"jira"===t?(r=M().zD.isJiraOldAiConnectorEnabled()?await d().callApi({eventName:"disconnectJiraConnector",environment:s,data:{spaceId:n,jiraSiteId:U().y.state.jiraSiteId}}):{type:"success"},l=o().S,g=["jira"]):"sharepoint"===t?(r=await d().callApi({eventName:"disconnectAiConnector",environment:s,data:{spaceId:n,connector:"sharepoint"}}),l=o().fK,g=[]):"microsoft-teams"===t?(r=await d().callApi({eventName:"disconnectMicrosoftTeams",environment:s,data:{spaceId:n,microsoftTenantId:w().F.state.microsoftTenantId??""}}),l=o().lF,g=["microsoft-teams"]):"slack"===t?(r=await d().callApi({eventName:"disconnectSlackIngestion",environment:s,data:{spaceId:n,disconnectForWorkspace:!1}}),l=o().e5,g=["slack-admin"]):"linear"===t?(r=await d().callApi({eventName:"disconnectAiConnector",environment:s,data:{spaceId:n,connector:"linear"}}),l=o().$B,g=["linear"]):"outlook"===t?(r=await d().callApi({eventName:"disconnectAiConnector",environment:s,data:{spaceId:n,connector:"outlook"}}),l=o().n1,g=["outlook"]):"notion-mail"===t?(r=await d().callApi({eventName:"disconnectAiConnector",environment:s,data:{spaceId:n,connector:"notion-mail"}}),l=o().Ds,g=["notion-mail"]):(0,c().HB)(t);const p=W().NT[t];p.setState({...p.state,isDisconnecting:!0});const m=f().A.state.appsConnectionData.filter((e=>e.id!==l));f().A.setState({...f().A.state,appsConnectionData:[...m,...g.map((e=>{var t,n;return{connectionStatus:"disconnecting",connectionLastEditedTimestamp:Date.now(),connectionType:e,connectorEmail:(null===(t=x().default.state.currentUserStore)||void 0===t?void 0:t.getEmail())||"",id:l,connectorNotionId:null===(n=x().default.state.currentUserStore)||void 0===n||null===(n=n.getModel())||void 0===n?void 0:n.id}}))]});const S=O().w0[t];if(i){const t=e.hoursOverride??"3",n={position:"bottom",style:{width:"500px",display:"flex",justifyContent:"space-between"}};"success"===r.type?u().D6({label:h().A.getIntl().formatMessage({defaultMessage:"{displayName} disconnected. This can take up to {hours} hours.",id:"aiConnector.confirmation.disconnected"},{displayName:S,hours:t}),...n}):u().D6({label:h().A.getIntl().formatMessage({defaultMessage:"Failed to disconnect {displayName}. Please try again later.",id:"aiConnector.confirmation.disconnectError"},{displayName:S}),...n})}return r}async function Ne(e){const{environment:t,spaceId:n}=e,{currentSpaceViewStore:s}=x().default.getState();if(void 0===s)return!1;const o=await d().callApi({eventName:"connectJiraSiteToSpace",environment:t,data:{spaceId:n,siteId:U().y.state.jiraSiteId}});return!("success"!==o.type||!o.data.connectionSuccess)&&(U().y.setState({...U().y.state,currentScreen:"connection_complete_screen",jiraSiteId:o.data.siteData.siteId,jiraSiteUrl:o.data.siteData.siteUrl,jiraSyncState:"pending_selection"}),g().createAndCommit({userAction:"jiraAIConnector.onboarding.dismissPersonalAuthPrompt",environment:t,canUndo:!0,perform:e=>{g().applyOperation({store:s,operation:{pointer:s.pointer,path:["settings"],command:"update",args:{...s.getSettings(),dismissed_jira_installation_pending_prompt:null}},transaction:e})}}),!0)}async function je(e){const{environment:t,spaceId:n}=e,s=await d().callApi({eventName:"disconnectJiraUserConnection",environment:t,data:{spaceId:n}});return"success"===s.type&&!0===s.data.disconnected&&(U().y.setState({...U().y.state,userConnected:!1,missingUserAuth:!0}),!0)}async function xe(e){const{environment:t,spaceId:n,connector:s}=e,o=await Te({environment:t,spaceId:n});if("success"!==o.type)return"failed";if("connectedConnectors"in o.data){return o.data.connectedConnectors.find((e=>e.id===s))}}async function Te(e){const{environment:t,spaceId:n}=e;if(C.state.listAIConnectorsPromise&&C.state.spaceId===n)return C.state.listAIConnectorsPromise;const s=d().callApi({eventName:"listAIConnectors",environment:t,data:{spaceId:n}}).then((e=>(setTimeout((()=>{C.setState({listAIConnectorsPromise:void 0,spaceId:n})}),100),e))).catch((e=>e));return C.setState({listAIConnectorsPromise:s,spaceId:n}),s}const Me={started:"ai_connector_onboarding_started_at",finished:"ai_connector_onboarding_completed_at",survey_triggered:"ai_connector_onboarding_survey_triggered_at"};function Fe(e){var t;const{connector:n,moment:s}=e,{currentSpaceViewStore:o}=x().default.getState();if(!o)return;const a=Me[s];return null===(t=o.getSettings())||void 0===t||null===(t=t[a])||void 0===t?void 0:t[n]}function Le(e){const{environment:t,connector:n,moment:s}=e,{currentSpaceViewStore:o}=x().default.getState();o&&void 0===Fe({connector:n,moment:s})&&Ue({environment:t,currentSpaceViewStore:o,connector:n,moment:s,timestamp:Date.now()})}function Ue(e){const{environment:t,currentSpaceViewStore:n,connector:s,moment:o,timestamp:a}=e,i=Me[o];g().createAndCommit({environment:t,userAction:`aiConnector.onboarding.${o}`,canUndo:!0,perform:e=>{var t;g().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings"],command:"update",args:{...n.getSettings(),[i]:{...null===(t=n.getSettings())||void 0===t?void 0:t[i],[s]:a}}},transaction:e})}})}function Ee(e){const{environment:t,connector:n,connectedApps:o}=e,a=Fe({connector:n,moment:"started"}),i=Fe({connector:n,moment:"finished"});if(!a||i)return;if(a>s().c9.now().minus({days:5}).toMillis())return;if(o.includes(n))return;Fe({connector:n,moment:"survey_triggered"})||(r().u4({name:`${n}_ai_connector_dropoff_survey`}),Le({environment:t,connector:n,moment:"survey_triggered"}))}},453202:(e,t,n)=>{n.d(t,{O:()=>o});class s extends(()=>n(757695))().Store{getInitialState(){return{open:!1}}}const o=new s;(0,n(604341).exposeDebugValue)("AssistantConnectorProgressModalStore",o)},479350:(e,t,n)=>{n.d(t,{E:()=>o});class s extends(()=>n(757695))().Store{getInitialState(){return{currentScreen:"none",analyticsFrom:"unknown",sessionId:n(206267).JW(),jiraSiteUrl:"",jiraSyncState:"not_started",jiraSyncProgress:0,syncControl:{excludedProjects:[],includedProjects:[],includeFutureProjects:!0,allProjects:!1},isDisconnecting:!1,isLoaded:!1}}isJiraForgeConnectionDone(){return"not_started"!==this.state.jiraSyncState}}const o=new s;(0,n(604341).exposeDebugValue)("jiraAIConnectionV2Store",o)},575922:(e,t,n)=>{n.d(t,{W:()=>o});class s extends(()=>n(757695))().Store{getInitialState(){return{currentScreen:"none",status:"not_started",sessionId:n(206267).JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isLoaded:!1}}}const o=new s;(0,n(604341).exposeDebugValue)("googleCalendarAIConnectorStore",o)},604018:(e,t,n)=>{n.d(t,{A7:()=>j,HB:()=>D,Nr:()=>P,XY:()=>b,bp:()=>x,kB:()=>w,uM:()=>N,wd:()=>k});n(898992),n(354520);var s=()=>n(484714),o=()=>n(56366),a=()=>n(902006),i=()=>n(534177),r=()=>n(634877),c=()=>n(229533),d=()=>n(291075),l=()=>n(771624),u=()=>n(575922),g=()=>n(46657),p=()=>n(963702),m=()=>n(8870),S=()=>n(291657),v=()=>n(92383),f=()=>n(765957),y=()=>n(430483),h=()=>n(756315),A=()=>n(99254),I=()=>n(479350),C=()=>n(329304),_=()=>n(174636);function D(e){return"completed"===e?"completed":"not_started"===e||"pending_selection"===e?"not_started":"in_progress"}function b(e){if("google-drive"===e)return h().d.state.initialSyncState;if("jira"===e){const e=I().E.state.jiraSyncState;return"not_started"===e||"pending_connection"===e?"not_started":"in_progress"===e||"pending_selection"===e?"in_progress":"completed"}if("github"===e)return"authenticated"===d().o.state.status?"in_progress":d().o.state.status;if("gmail"===e)return"authenticated"===l().X.state.status?"completed":"not_started";if("google-calendar"===e)return"authenticated"===u().W.state.status?"completed":"not_started";if("notion-mail"===e)return"authenticated"===m().L.state.status?"completed":m().L.state.isBackendConnected?"in_progress":"not_started";if("outlook"===e)return"authenticated"===S().y.state.status?"completed":"not_started";if("microsoft-teams"===e){const e=p().F.state.connectionStatus;return"not_started"===e?"not_started":"in_progress"===e||"pending_selection"===e?"in_progress":"completed"}if("slack"===e)return _().R.state.noChannelsSelected?"not_started":_().R.state.isSyncCompleted?"completed":"in_progress";var t;if("sharepoint"===e)switch(null===(t=v().E.state.connectionDetails)||void 0===t?void 0:t.status){case"completed":return"completed";case"in_progress":return"in_progress";default:return"not_started"}if("linear"===e)switch(g().W.state.status){case"completed":return"completed";case"in_progress":return"in_progress";default:return"not_started"}return(0,i().HB)(e)}function P(){return w().filter((e=>{if("slack"===e){return!(_().R.state.connectedApps||[]).includes("slack-admin")}return"google-drive"===e?"none"===h().d.state.initialSyncState||"not_started"===h().d.state.initialSyncState:"github"===e?"not_started"===d().o.state.status:"jira"===e?"not_started"===I().E.state.jiraSyncState:"sharepoint"===e?!v().E.state.connectionDetails:"gmail"===e?"not_started"===l().X.state.status:"google-calendar"===e?"not_started"===u().W.state.status:"notion-mail"===e?"not_started"===m().L.state.status:"outlook"===e?"not_started"===S().y.state.status:"microsoft-teams"===e?"not_started"===p().F.state.connectionStatus:"linear"===e?"not_started"===g().W.state.status:(0,i().HB)(e)}))}function w(){return a().fl.filter((e=>y().zD.canUseAiConnectorSearchScope(e)))}function k(){let{includeConnectorsWithAuthNeeded:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a().fl.filter((t=>"slack"===t?y().zD.isConnectedToSlackUniversalQnA(_().R.state)||e&&(0,c().al)(_().R.state):"google-drive"===t?y().zD.isConnectedToGoogleDriveUniversalQnA(_().R.state):"github"===t?y().zD.isConnectedToGithubUniversalQnA(d().o.state)||e&&(0,c().F1)(d().o.state):"jira"===t?y().zD.isConnectedToJiraUniversalQnA(A().y.state,I().E.state):"gmail"===t?y().zD.isConnectedToGmailUniversalQnA(l().X.state):"google-calendar"===t?y().zD.isConnectedToGoogleCalendarUniversalQnA(u().W.state):"notion-mail"===t?y().zD.isConnectedToNotionMailUniversalQnA(m().L.state):"outlook"===t?y().zD.isConnectedToOutlookUniversalQnA(S().y.state):"sharepoint"===t?y().zD.isConnectedIsSharepointAiConnector(v().E.state):"microsoft-teams"===t?y().zD.isConnectedToMicrosoftTeamsUniversalQnA(p().F.state):"linear"===t?y().zD.isConnectedToLinearUniversalQnA(g().W.state):(0,i().HB)(t)))}function N(){return k().filter((e=>(0,c().LT)(e).isInProgress))}function j(e){return"jira"===e&&y().zD.isJiraOldAiConnectorEnabled()&&A().y.isOldJiraConnected()?A().y.state.isLoaded:r().NT[e].state.isLoaded}function x(){const e=(0,s().v3)(),t=(0,o().O$)(f().AppStoreCurrentSpaceStore),n=(0,C().P9)({name:"ai_connectors",spaceId:null==t?void 0:t.id,userId:e.currentUser.id})??!1;return(0,o().K8)((()=>{var e;return!(!t||!n)&&!Boolean(null===(e=t.getSettings())||void 0===e?void 0:e.embedding_index_is_live)}),[t,n])}},634877:(e,t,n)=>{n.d(t,{NK:()=>P,NT:()=>I,Rl:()=>b,Vn:()=>A,hP:()=>C,nB:()=>D,ts:()=>_});n(898992),n(354520),n(581454),n(737550);var s=n(296540),o=()=>n(484714),a=()=>n(56366),i=()=>n(187174),r=()=>n(959013),c=()=>n(763824),d=()=>n(534177),l=()=>n(449506),u=()=>n(295118),g=()=>n(436572),p=()=>n(604018),m=()=>n(704152),S=()=>n(47170),v=()=>n(217429),f=()=>n(323714),y=n(474848);const h={slack:f().updateSlackQnAConnectionState,"google-drive":f().updateGoogleDriveQnAConnectionState,jira:f().updateJiraAIV2ConnectionStatus,github:f().updateGithubAIConnectorStatus,sharepoint:f().updateSharepointAiConnectorStatus,"microsoft-teams":f().updateMicrosoftTeamsAIConnectorStatusAction,gmail:f().updateGmailAIConnectorStatus,linear:f().updateLinearAIConnectorStatus,outlook:f().updateOutlookAIConnectorStatus,"notion-mail":f().updateNotionMailAIConnectorStatus,"google-calendar":f().updateGoogleCalendarAIConnectorStatus};function A(e){return async t=>u().ZC.state?{status:"success"}:h[e](t)}const I={slack:n(174636).R,"google-drive":n(756315).d,jira:n(479350).E,github:n(291075).o,sharepoint:n(92383).E,"microsoft-teams":n(963702).F,gmail:n(771624).X,linear:n(46657).W,outlook:n(291657).y,"notion-mail":n(8870).L,"google-calendar":n(575922).W};function C(e){return(0,a().K8)((()=>v().default.getConfigKey("ingestion",e)),[e])}function _(e,t){const n=(0,o().v3)(),r=(0,S().O)(),l=(0,a().K8)(p().kB,[]),u=(0,s.useRef)(!1),g=(0,a().K8)((()=>l.filter((e=>!(0,p().A7)(e)||t)).filter((t=>!(0,d().O9)(e)||e.includes(t)))),[l,e,t]);(0,i().Yb)((async()=>{if(!r||u.current||0===g.length)return;const e=g.map((e=>A(e)));u.current=!0,await(0,c().lX)(e,10,(e=>e({environment:n,spaceId:r}))),u.current=!1}),[n,r,g]);return{isLoading:(0,a().K8)((()=>g.some((e=>!(0,p().A7)(e)))),[g])}}function D(e){const{connector:t,authorizationType:n,existingAuthorizationUrl:a}=e,r=(0,o().v3)(),c=(0,S().O)(),[d,u]=(0,s.useState)(a);return(0,i().Yb)((async()=>{if(!c||d)return;const e=await l().callApi({eventName:"getAIConnectorAuthorizationUrl",environment:r,data:{connector:t,authorizationType:n,spaceId:c,sessionId:I[t].state.sessionId,client:r.device.isElectron?"desktop":"web"}});if("success"!==e.type)return;const s=e.data.authorizationUrl;u(s)}),[r,c,t,n,d]),d}function b(){g().D6({label:(0,y.jsx)(r().sA,{id:"universalSearch.googleDriveIngestion.googleDriveButton.accessDeniedSnackbar",defaultMessage:"You do not have access to Google Drive Universal QnA."}),position:"bottom",style:{width:"600px",display:"flex",justifyContent:"space-between"},right:(0,y.jsx)(m().A,{onClick:g().N2,children:(0,y.jsx)(r().sA,{id:"universalSearch.googleDriveIngestion.googleDriveButton.closeErrorSnackbar",defaultMessage:"Close"})})})}function P(){g().D6({label:(0,y.jsx)(r().sA,{id:"universalSearch.googleDriveIngestion.googleDriveButton.showTryAgainSnackbar",defaultMessage:"There was problem processing your request. Please try again."}),position:"bottom",style:{width:"600px",display:"flex",justifyContent:"space-between"},right:(0,y.jsx)(m().A,{onClick:g().N2,children:(0,y.jsx)(r().sA,{id:"universalSearch.googleDriveIngestion.googleDriveButton.closeErrorSnackbar",defaultMessage:"Close"})})})}},694926:(e,t,n)=>{n.d(t,{$:()=>o});var s=()=>n(449506);async function o(e){const{environment:t}=e,n=await s().callApi({eventName:"getEmailDomainSettings",environment:t,data:{}});return"failed"===n.type||Boolean(n.data.settings.disable_notion_mail)}},771624:(e,t,n)=>{n.d(t,{A:()=>o,X:()=>i});var s=()=>n(206267);function o(){return{currentScreen:"none",status:"not_started",externalSourceName:void 0,sessionId:s().JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,connectionConflictSpaceId:void 0,isLoaded:!1}}class a extends(()=>n(757695))().Store{getInitialState(){return o()}}const i=new a;(0,n(604341).exposeDebugValue)("gmailAIConnectorStore",i)},963702:(e,t,n)=>{n.d(t,{F:()=>i,G:()=>o});var s=()=>n(206267);function o(){return{currentScreen:"none",connectionStatus:"not_started",sessionId:s().JW(),analyticsFrom:"unknown",microsoftTenantId:void 0,syncProgressPercentage:0,isLoaded:!1,isDisconnecting:!1,error:void 0,externalSourceName:void 0}}class a extends(()=>n(757695))().Store{getInitialState(){return o()}}const i=new a},987267:(e,t,n)=>{n.d(t,{Bm:()=>p,EH:()=>u,G6:()=>l,I6:()=>i,tp:()=>c,uV:()=>d,w0:()=>a});var s=()=>n(902006),o=()=>n(959013);const a={slack:"Slack",github:"GitHub","google-drive":"Google Drive","google-calendar":"Google Calendar",jira:"Jira","microsoft-teams":"Microsoft Teams",sharepoint:"SharePoint",gmail:"Gmail",linear:"Linear",outlook:"Outlook","notion-mail":"Notion Mail"};function i(e){if((0,s().Dy)(e))return"Google Workspace";if("slack"===e)return"Slack Workspace";return`${l(e)} Settings`}const r={gmail:"notion-mail"};function c(e){return r[e]??void 0}function d(e){return"notion-mail"===e?"gmail":e}function l(e){return(0,s().aE)(e)?"Microsoft":(0,s().Dy)(e)?"Google Workspace":a[e]}(0,o().YK)({sharePointAndOneDrive:{id:"universalQna.connector.sharepointAndOneDriveVariantName",defaultMessage:"SharePoint and OneDrive"},generalConnector:{id:"universalQna.connector.generalConnectorName",defaultMessage:"{connector}"}});const u=(0,o().YK)({github:{id:"assistantScopedSearchMenu.githubItem.tooltip",defaultMessage:"Find in GitHub Repos, Issues, and Pull Requests you have access to"},"google-drive":{id:"assistantScopedSearchMenu.gdriveItem.tooltip",defaultMessage:"Find in Google Docs, Sheets, and Slides you have access to"},jira:{id:"assistantScopedSearchMenu.jiraItem.tooltip",defaultMessage:"Find in Jira issues you have access to"},"microsoft-teams":{id:"assistantScopedSearchMenu.microsoftTeamsItem.tooltip",defaultMessage:"Find in Microsoft Teams chats you have access to"},sharepoint:{id:"assistantScopedSearchMenu.sharepointItem.tooltip",defaultMessage:"Find in SharePoint sites you have access to"},linear:{id:"assistantScopedSearchMenu.linearItem.tooltip",defaultMessage:"Find in Linear issues you have access to"},gmail:{id:"assistantScopedSearchMenu.gmailItem.tooltip",defaultMessage:"Find in your emails"},"notion-mail":{id:"assistantScopedSearchMenu.notionMailItem.tooltip",defaultMessage:"Find in your Notion Mail emails"},slack:{id:"assistantScopedSearchMenu.slackItem.tooltip",defaultMessage:"Find in Slack chats you have access to"},outlook:{id:"assistantScopedSearchMenu.outlookItem.tooltip",defaultMessage:"Find in your emails"},"google-calendar":{id:"assistantScopedSearchMenu.googleCalendarItem.tooltip",defaultMessage:"Find in your Google Calendar events"}}),g={slack:!0,github:!0,"google-drive":!0};function p(e){return g[e]??!1}}}]);