"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[97339],{9151:(e,t,o)=>{o.d(t,{m:()=>u,p:()=>s});o(18107),o(967357),o(898992),o(581454),o(908872);var n=()=>o(921598),r=()=>o(452706),i=()=>o(519839),a=()=>o(217429),l=()=>o(10594);function s(e){const{groupBy:t,schema:o,format:i,groupsFormatKey:s,limit:u,subGroupArgs:d}=e,p=o[t.property];if(!p||!(0,n().Eg)(p))return;const g=i[s]||[],m=(0,l().w9)(t,i);if(a().default.checkGate({gateName:"collection_group_reducer_visible"})){const t=d&&i[d.groupsFormatKey]||[];return{type:"groups",version:"v2",returnHiddenGroups:e.returnHiddenGroups,returnPinnedGroups:e.returnPinnedGroups,groupBy:m,groupSortPreference:g,limit:Math.min(u,r().O3),subGroup:d?{groupBy:d.groupBy,groupSortPreference:t,limit:d.limit}:void 0,aggregation:e.aggregation?c({groupAggregation:e.aggregation,subGroupAggregation:null==d?void 0:d.subGroupAggregation}):void 0,blockResults:e.blockResults}}const y=g.reduce(((e,t)=>(0,n().tx)(t)?e+1:e),0);return{type:"groups",version:void 0,groupBy:m,groupSortPreference:g.map((e=>e.value)),limit:u+y}}function c(e){if(e.groupAggregation||e.subGroupAggregation)return e.groupAggregation&&e.subGroupAggregation?{type:"independent",groupAggregation:e.groupAggregation,subGroupAggregation:e.subGroupAggregation}:e.groupAggregation&&!e.subGroupAggregation?{type:"independent",groupAggregation:e.groupAggregation}:!e.groupAggregation&&e.subGroupAggregation?{type:"independent",subGroupAggregation:e.subGroupAggregation}:void 0}function u(e){const{isMobile:t,collectionContextStore:o,groupBy:r,subGroupBy:a}=e,l=o.groupsStore,s=(0,i().CG)(o,t),c=l.getAllGroupStates(),u=a?"intersection":"independent",d=o.getViewType(),p=o.normalizedFormatStore.state,g="board"===d?null==p?void 0:p.board_cover:"gallery"===d?null==p?void 0:p.gallery_cover:void 0,m={type:u,defaultLimit:s,loadContentCover:Boolean(g&&"page_content"===g.type),groupOverrides:{}};for(const i of c){const e=i.currentLimit.state;if(e===s)continue;const t=i.groupsPointer;if("independent"!==u||1!==t.length){if("intersection"===u&&2===t.length&&a){const o=t.at(1),i=t.at(0);if(!o||o.value.type!==r.type)continue;if(!i||i.value.type!==a.type)continue;const l=(0,n().AC)(o.value),s=(0,n().AC)(i.value);m.groupOverrides[(0,n().A)([s,l])]={limit:e}}}else{const o=t.at(0);if(!o||o.value.type!==r.type)continue;const i=(0,n().AC)(o.value);m.groupOverrides[i]={limit:e}}}return m}},23815:(e,t,o)=>{o.d(t,{$6:()=>s,Vu:()=>l,zX:()=>a});var n=()=>o(66689),r=()=>o(799829),i=()=>o(685889);const a=(0,o(959013).YK)({sprintUncategorizedGroup:{defaultMessage:"Backlog (No {name})",id:"database.sprintDatabaseView.uncategorizedGroupLabel"}});function l(e){const{collectionStore:t,property:o,propertySchema:r,parentStore:a}=e;let l=!1;if(null!=t&&t.isDefined()){const e=t.getPropertyMapping();l=(null==e?void 0:e[n().yx.TaskToSprintRelation])===o}return(0,i().LQ)(r,a)===n().av||l}function s(e){return(0,r().wy)({appUri:e.getFormatStore().getKeyStore("app_config_uri").getValue(),collectionSchema:e.getSchema()})}},68207:(e,t,o)=>{o.d(t,{S:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"4.67 2.67 10.66 15.64",svg:(0,o(474848).jsx)("path",{d:"M6.328 3c0-.18.145-.325.325-.325h6.694c.18 0 .325.146.325.325v.474c0 .948-.404 1.85-1.112 2.481l-.402.36.19 1.944.039.013a4.325 4.325 0 0 1 2.938 4.097V13c0 .18-.145.325-.325.325h-4.17v3.38a1.1 1.1 0 0 1-.1.46l-.44.956-.063.087a.35.35 0 0 1-.564-.103l-.432-.94a1.1 1.1 0 0 1-.1-.46v-3.38H5A.325.325 0 0 1 4.675 13v-.63a4.325 4.325 0 0 1 2.938-4.098l.039-.013.19-1.945-.402-.359a3.33 3.33 0 0 1-1.112-2.481z"})},r=(0,o(340498).wt)("pinFill",n)},104636:(e,t,o)=>{o.d(t,{Is:()=>d,LS:()=>m,NH:()=>y,QA:()=>g,_b:()=>p});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(244641),r=(o(296540),()=>o(390527)),i=()=>o(604995),a=()=>o(959013),l=()=>o(488887),s=()=>o(534177),c=()=>o(108944),u=o(474848);function d(e){const t=c().g7(e)??[],o=[];for(const n of t){if(!("block"===n.table&&!0===n.isTemplate()&&n.getFormat().automation_id&&n.id!==e.id))continue;const t=n.getAutomationStore();if(t){if(!t.isReady())return{automationStoresReady:!1};void 0!==t.getRecurrence()&&t.isDefined()&&o.push(t.getModel())}}return{automationStoresReady:!0,...(0,r().templateAncestorsViolateRecurrenceNesting)(o)}}function p(e){switch(e){case"day":return(0,u.jsx)(a().sA,{defaultMessage:"Repeat daily",id:"database.templatePickerItem.recurrenceFrequency.daily"});case"week":return(0,u.jsx)(a().sA,{defaultMessage:"Repeat weekly",id:"database.templatePickerItem.recurrenceFrequency.weekly"});case"month":return(0,u.jsx)(a().sA,{defaultMessage:"Repeat monthly",id:"database.templatePickerItem.recurrenceFrequency.monthly"});case"year":return(0,u.jsx)(a().sA,{defaultMessage:"Repeat yearly",id:"database.templatePickerItem.recurrenceFrequency.yearly"});default:(0,s().HB)(e)}}function g(){return{start_date:n().c9.local().plus({days:1}).set({hour:0,minute:0,second:0,millisecond:0}).toMillis(),timezone:(0,i().dB)(),hour:0,minute:0,frequency:"day",interval:1}}function m(e){const{recurrence:t,intl:o,leadingPhrase:n}=e;return(0,r().rruleFromRecurrence)({..."month"===t.frequency?{...t,monthly_restriction:void 0}:t,weekdays:void 0,hour:0,minute:0,end_condition:void 0}).toText((e=>{switch(e){case"every":if(void 0===n)return"";if("every"===n)return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.every",defaultMessage:"every"});if("repeat every"===n)return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.repeatEvery",defaultMessage:"repeat every"});(0,s().HB)(n);break;case"day":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.day",defaultMessage:"day"});case"days":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.days",defaultMessage:"days"});case"week":{const e=(null==t?void 0:t.weekdays)||[];return 5===e.length&&(0,l()._)(new Set(e),new Set(["MO","TU","WE","TH","FR"]))?o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.weekday",defaultMessage:"weekday"}):o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.week",defaultMessage:"week"})}case"weeks":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.weeks",defaultMessage:"weeks"});case"month":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.month",defaultMessage:"month"});case"months":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.months",defaultMessage:"months"});case"year":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.year",defaultMessage:"year"});case"years":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.years",defaultMessage:"years"});default:return e.toString()}})).trim()}function y(e){const t=e.getRecurrence();return Boolean(e.isTriggerType("recurrence")&&t&&"disabled_recurrence_ended"===e.getStatus())}},132855:(e,t,o)=>{o.r(t),o.d(t,{arrowInCircleUpFillIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o(474848).jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 0 0-15.25 7.625 7.625 0 0 0 0 15.25m3.042-8.07a.625.625 0 0 1-.884 0L10.625 8.02v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 1 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"})},r=(0,o(340498).wt)("arrowInCircleUpFill",n)},195071:(e,t,o)=>{o.d(t,{A:()=>b});o(944114),o(898992),o(803949),o(581454),o(296540);var n=()=>o(67657),r=()=>o(568063),i=()=>o(959013),a=()=>o(496603),l=()=>o(478184),s=()=>o(722372),c=()=>o(722872),u=()=>o(553965),d=()=>o(962730),p=()=>o(509060),g=()=>o(760217),m=()=>o(928600),y=()=>o(939740),f=()=>o(480095),v=()=>o(89924),h=()=>o(859428),S=()=>o(662971),x=o(474848);const C=(0,i().YK)({noneText:{defaultMessage:"None",id:"database.propertyAggregationMenu.noneText"},systemShowValuesText:{defaultMessage:"Show values",id:"database.rollupProperty.aggregate.showValues"},tableAggregationTooltip:{defaultMessage:"Table aggregation",id:"database.propertyAggregationMenu.tableAggregationTooltip"}});const b=(0,i().j4)((function(e){let{onClose:t,property:i,schema:a,currentAggregation:l,source:u,noneText:d,intl:p,onChange:h}=e;const b=(0,o(484714).v3)(),{device:A}=b;let M;M=A.isMobile?{menuType:c().gu.Modal,title:p.formatMessage(C.tableAggregationTooltip),right:(0,x.jsx)(f().DoneMenuText,{}),onClickRight:t}:{menuType:c().gu.Popup,width:200};const[T,_]=function(e){let{property:t,schema:o,source:i,intl:a,onChange:l,environment:u,currentAggregation:d,noneText:p}=e;const h=[];let b=0,A=0;const{device:M}=u,T=null==d?void 0:d.aggregator,_=e=>{let{aggregationType:t,enforceMaxAggregationLimit:o}=e;return l({aggregationType:t,enforceMaxAggregationLimit:o})};if((0,r().cl)(t)){const e=[];e.push({key:"none",render:e=>(0,x.jsx)(g().A,{...e,isChecked:!d,title:a.formatMessage(C.systemShowValuesText)}),action:()=>l({aggregationType:void 0})}),e.push(w("count"===T,"count",_,!0));return[e,"count"===T?1:0]}const I=function(e){let{property:t,schema:o,currentAggregationType:r,onChangeWithLimit:i,environment:a,currentAggregation:l}=e;const s={},c=o[t];if(!c)return{};for(const u of n().VD)s[u]=w(u===r,u,i);if((0,n().wG)(c))for(const u of n().CG)s[u]=w(u===r,u,i);if((0,n().OC)(c))for(const u of n().Sn)s[u]=w(u===r,u,i);if((0,n().fo)(c))for(const u of n().zE)s[u]=w(u===r,u,i);if((0,n().s_)(c))for(const u of n().QO)s[u]=w(u===r,u,i);if((0,n().q0)(c))for(const u of n().nJ)s[u]=k(t,u,l,o,i,a);if((0,n().pe)(c))for(const u of n().A3)s[u]=w(u===r,u,i);return s}({property:t,schema:o,currentAggregationType:T,onChangeWithLimit:_,environment:u,currentAggregation:d});h.push({key:"none",render:e=>(0,x.jsx)(g().A,{...e,isChecked:!d,title:p||a.formatMessage(C.noneText)}),action:()=>l({aggregationType:void 0})});let B="tableAggregation"===i?1:2;return Object.entries(n().Kn).forEach((e=>{let[t,o]=e;const r=[];for(const l of o)if(I[l]){if("show_unique"===l)switch(i){case"tableAggregation":continue;case"rollupPropertyMenu":h.splice(1,0,I[l]),(null==d?void 0:d.aggregator)===l&&(b=1);continue}r.push(I[l]),(d&&(0,n().ET)(null==d?void 0:d.aggregator)&&d.aggregator.operator===l||(null==d?void 0:d.aggregator)===l)&&(b=B,A=r.length-1)}const a=[];if("count_aggregations"===t&&"tableAggregation"===i&&a.push({key:"limitToggleSection",render:e=>(0,x.jsx)(v().A,{...e}),items:[j(d,_)]}),a.push({key:"aggregations",render:e=>(0,x.jsx)(v().A,{topBorder:!0,...e}),items:r}),r.length>0){B++;const e=s().jA[t],o={key:e,render:(t,o)=>(0,x.jsx)(S().A,{...t,disableDefaultClick:!0,onFocus:o.onFocus,renderOrigin:(t,o)=>(0,x.jsx)(g().A,{...t,ref:o,title:e}),renderExtension:(t,n)=>{let r;return r=M.isMobile?{menuType:c().gu.Modal,title:e,right:(0,x.jsx)(f().DoneMenuText,{}),onClickRight:n.close,...t}:{menuType:c().gu.Popup,width:250,...t},(0,x.jsx)(m().A,{...r,children:(0,x.jsx)(y().Ay,{type:y().Oh.Vertical,initialFocus:A,sections:a,onAccept:(e,t,r)=>{"aggregationLimitToggle"!==e.key&&(n.close(),o.onAccept&&o.onAccept(e,t,r))}})})}}),action:()=>null};h.push(o)}})),[h,b]}({property:i,schema:a,source:u,intl:p,onChange:h,environment:b,currentAggregation:l,noneText:d});return(0,x.jsx)(m().A,{...M,children:(0,x.jsx)(y().Ay,{type:y().Oh.Vertical,initialFocus:_??0,sections:[{key:0,render:e=>(0,x.jsx)(v().A,{...e}),items:T}],onAccept:t})})}));function A(e){let{isSelected:t,aggregationType:o,label:n,props:r}=e;const i=s().cx[o];return(0,x.jsx)(h().A,{placement:d().W.Right,delayThreshold:0,render:e=>(0,x.jsx)(g().A,{title:n,isChecked:t,...(0,u().A)(e,r)}),renderTooltip:()=>(0,x.jsxs)("div",{style:{width:140,whiteSpace:"normal"},children:[i&&(0,x.jsx)("img",{src:(0,l().L)(i),style:{borderRadius:4,width:140,marginTop:4}}),s().fp[o]]})},r.key)}function w(e,t,o,n){const r=s().zY[t],i=s().cx[t];return{key:r,render:o=>(0,x.jsx)(h().A,{placement:d().W.Right,delayThreshold:0,render:t=>(0,x.jsx)(g().A,{title:r,isChecked:e,...(0,u().A)(t,o)}),disableTooltip:n,renderTooltip:()=>(0,x.jsxs)("div",{style:{width:140,whiteSpace:"normal"},children:[i&&(0,x.jsx)("img",{src:(0,l().L)(i),style:{borderRadius:4,width:140,marginTop:4}}),s().fp[t]]})},o.key),action:()=>{o({aggregationType:t})}}}function k(e,t,o,r,i,l){const{device:u}=l,d=s().zY[t],p=a().oE(function(e,t,o,r,i){const a=r[t];if(!a||"status"!==a.type)return;const l=a.groups;return l?l.map((t=>{const r=(e&&(0,n().ET)(e.aggregator)&&e.aggregator.operator===o&&e.aggregator.groupName===t.name)??!1;return{key:`${o}${t.name}`,render:e=>(0,x.jsx)(A,{isSelected:r,aggregationType:o,label:t.name,props:e}),action:()=>{i({aggregationType:{operator:o,groupName:t.name}})}}})):void 0}(o,e,t,r,i));let h=0;if(o&&(0,n().ET)(null==o?void 0:o.aggregator)&&o.aggregator.operator===t){const e=o.aggregator.groupName,n=p.findIndex((o=>o.key===`${t}${e}`));-1!==n&&(h=n)}return{key:t,render:(e,t)=>(0,x.jsx)(S().A,{...e,onFocus:t.onFocus,renderOrigin:e=>(0,x.jsx)(g().A,{...e,title:d}),renderExtension:(e,o)=>{let n;return n=u.isMobile?{menuType:c().gu.Modal,title:d,right:(0,x.jsx)(f().DoneMenuText,{}),onClickRight:o.close,...e}:{menuType:c().gu.Popup,width:200,...e},(0,x.jsx)(m().A,{...n,children:(0,x.jsx)(y().Ay,{type:y().Oh.Vertical,initialFocus:h,sections:[{key:"groups",render:e=>(0,x.jsx)(v().A,{...e}),items:p}],onAccept:t.onAccept})})}}),action:()=>null}}function j(e,t){const{enforceMaxAggregationLimit:o,disabled:n}=e?(0,s().NT)(e):{enforceMaxAggregationLimit:!1,disabled:!1};return{key:"aggregationLimitToggle",render:e=>(0,x.jsx)(p().A,{on:o,disabled:n,menuListItemProps:e}),action:()=>{t(e?{aggregationType:e.aggregator,enforceMaxAggregationLimit:!o}:{aggregationType:"count",enforceMaxAggregationLimit:!0})}}}},230979:(e,t,o)=>{o.d(t,{N:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"4.37 2.37 11.26 15.94",svg:(0,o(474848).jsx)("path",{d:"M6.653 2.375A.625.625 0 0 0 6.028 3v.474A3.62 3.62 0 0 0 7.24 6.179l.289.258-.157 1.603a4.625 4.625 0 0 0-2.997 4.33V13c0 .345.28.625.625.625h4.13v3.08c0 .158.035.317.1.46l.433.94a.35.35 0 0 0 .565.103l.063-.087.44-.956c.065-.142.1-.3.1-.46v-3.08H15c.345 0 .625-.28.625-.625v-.63a4.625 4.625 0 0 0-2.997-4.33l-.157-1.603.289-.258a3.63 3.63 0 0 0 1.212-2.705V3a.625.625 0 0 0-.625-.625zm1.42 2.871c-.468-.417-.75-1-.79-1.621h5.434a2.38 2.38 0 0 1-.79 1.621l-.525.47a.63.63 0 0 0-.206.527l.227 2.318a.63.63 0 0 0 .422.531l.237.08a3.375 3.375 0 0 1 2.293 3.197v.006h-8.75v-.006c0-1.447.922-2.733 2.293-3.197l.237-.08a.63.63 0 0 0 .422-.531l.227-2.318a.63.63 0 0 0-.206-.528z"})},r=(0,o(340498).wt)("pin",n)},240865:(e,t,o)=>{o.d(t,{V:()=>i});var n=()=>o(56366),r=()=>o(765957);function i(e){return(0,n().K8)((()=>{var t;return e?e.getMemberCountFromPublicSpaceData()??void 0:(null===(t=r().default.state.currentSpaceStore)||void 0===t?void 0:t.getMemberCountFromPublicSpaceData())??void 0}),[e])}},259464:(e,t,o)=>{o.d(t,{A:()=>a});o(296540);var n=()=>o(690471);o(944114),o(898992),o(908872);var r=o(474848);const i=16;function a(e){const{startPoint:t,endPoint:o,style:i,showArrowHead:a,useRightAngles:c,cornerRadiusOverride:u,handleMouseMove:d,handleMouseLeave:p}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s,{startPoint:t,startCurvePoint:c?void 0:{x:t.x+n().g_,y:t.y},endPoint:a?{x:o.x-1.5,y:o.y}:o,endCurvePoint:c?void 0:{x:o.x-n().g_,y:o.y},cornerRadiusOverride:u,style:i,handleMouseMove:d,handleMouseLeave:p,children:e.children}),a&&(0,r.jsx)(l,{endPoint:o,style:i})]})}function l(e){const{endPoint:t,style:o}=e;return(0,r.jsx)("polyline",{points:`${t.x-5},${t.y-6} ${t.x},${t.y} ${t.x-5},${t.y+6}`,style:o,fill:"transparent"})}function s(e){const{startPoint:t,startCurvePoint:o,endPoint:n,endCurvePoint:a,style:l,cornerRadiusOverride:s,handleMouseMove:c,handleMouseLeave:u}=e;let d="";d=o&&a?`M ${t.x} ${t.y} L ${o.x} ${o.y} L ${a.x} ${a.y} L ${n.x} ${n.y}`:`M ${t.x} ${t.y} L ${t.x} ${n.y} L ${n.x} ${n.y}`;const p=function(e,t){function o(e,t,o){const r=t.x-e.x,i=t.y-e.y,a=Math.sqrt(r*r+i*i);return n(e,t,Math.min(1,o/a))}function n(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function r(e,t){e.length>2&&(e[e.length-2]=t.x.toString(),e[e.length-1]=t.y.toString())}function i(e){return{x:parseFloat(e[e.length-2]),y:parseFloat(e[e.length-1])}}const a=e.split(/[,\s]/).reduce(((e,t)=>{const o=t.match("([a-zA-Z])(.+)");return o?(e.push(o[1]),e.push(o[2])):e.push(t),e}),[]).reduce((function(e,t){return!isNaN(parseFloat(t))&&e.length?e[e.length-1].push(t):e.push([t]),e}),[]);let l=[];if(a.length>1){const e=i(a[0]);let s=null;"Z"===a[a.length-1][0]&&a[0].length>2&&(s=["L",e.x.toString(),e.y.toString()],a[a.length-1]=s),l.push(a[0]);for(let c=1;c<a.length;c++){const e=l[l.length-1],u=a[c],d=u===s?a[1]:a[c+1];if(d&&e&&e.length>2&&"L"===u[0]&&d.length>2&&"L"===d[0]){const a=i(e),s=i(u),c=i(d),p=o(s,a,t),g=o(s,c,t);r(u,p),l.push(u);const m=n(p,s,.5),y=n(s,g,.5),f=["C",m.x.toString(),m.y.toString(),y.x.toString(),y.y.toString(),g.x.toString(),g.y.toString()];l.push(f)}else l.push(u)}if(s){const e=i(l[l.length-1]);l.push(["Z"]),r(l[0],e)}}else l=a;return l.reduce((function(e,t){return`${e}${t.join(" ")} `}),"")}(d,s||i);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:p,style:l,fill:"transparent"}),(c||u)&&(0,r.jsxs)("g",{onMouseMove:c,onMouseLeave:u,children:[(0,r.jsx)("path",{d:p,style:{strokeOpacity:0,strokeWidth:16,pointerEvents:"stroke",cursor:"default"},fill:"transparent"}),e.children]})]})}},265793:(e,t,o)=>{o.d(t,{b:()=>f,w:()=>v});var n=()=>o(484714),r=()=>o(56366),i=()=>o(888325),a=()=>o(187174),l=()=>o(96689),s=()=>o(541801),c=()=>o(449506),u=()=>o(645873),d=()=>o(765957),p=()=>o(414834),g=()=>o(961581),m=()=>o(299177);const y=!1;function f(e){var t;const o=null===(t=(0,u().fJ)(s().xl).value)||void 0===t?void 0:t.loadWorkflowTemplateInstances;(0,r().K8)((()=>{if(!o)return;const t=e instanceof p().A?e.collectionStore():e;t&&o(t)}),[o,e])}function v(){const e=(0,n().v3)(),t=(0,r().K8)((()=>{var e;if(function(){const e=g().A.state.initialRenderCompleted;y&&!e&&console.log("Initial page render is not yet completed, delaying refresh of workflow template instances.");return e}())return null===(e=d().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);(0,a().Yb)((async()=>{if(!t)return;(m().A.debug||y)&&console.log("Refreshing workflow template instance map for space",t);const o={table:l().NX,id:t,spaceId:t},n=await c().callApi({eventName:"getWorkflowTemplateInstances",environment:e,data:{spaceId:o.spaceId,scopeTable:o.table,scopeId:o.id,enableInstanceRobustness:!0}});if("success"===n.type){const e=(0,i()._)(o);m().A.setState({...m().A.state,[e]:n.data.instanceMap[e]})}}),[e,t])}},274375:(e,t,o)=>{o.d(t,{Q:()=>r});o(898992),o(354520),o(672577);var n=()=>o(970013);function r(e,t){const o={property:n().rn,visible:!0,width:276},r={property:t,visible:!0},i=[o,r],a=e.getCollectionViewStores().find((e=>"table"===e.getType())),l=null==a?void 0:a.getFormatStore().getKeyStore("table_properties").getValue();if(!a||!l||0===l.length)return i;const s=l.find((e=>e.property===n().rn))??o;return[s,l.find((e=>e.property===t))??r,...l.filter((e=>e.property!==n().rn&&e.property!==t))]}},287531:(e,t,o)=>{o.d(t,{A:()=>a});var n=o(296540),r=o(474848);function i(e){const{pageName:t,targetCollectionStore:n,...i}=e,a=(0,o(484714).Y0)(),l=(0,o(56366).K8)((()=>n.getIcon()),[n]),s=(0,o(401497).IS)((e=>({medium:{color:e.text.secondary},dbName:{display:"flex",alignItems:"center",marginLeft:4},title:{marginLeft:o(246219).g1*(a.isRetina?.5:1)},icon:{width:16,fill:e.icon.secondary}})),[a.isRetina]),c=(0,r.jsxs)("div",{style:s.dbName,children:[(0,r.jsx)(o(187820).B6,{disabled:!0,icon:l,iconRecordCategory:"collection",isEmptyPage:!1,size:a.isMobile?24:20}),(0,r.jsx)(o(16006).A,{store:n,style:s.title})]});return(0,r.jsx)(o(760217).A,{title:(0,r.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,r.jsx)(o(959013).sA,{id:"database.searchRelation.createNewPageFooter",defaultMessage:"<medium>New</medium> {pageName} <medium> in</medium> {databaseNameWithIcon}",values:{medium:e=>(0,r.jsx)("span",{style:s.medium,children:e}),pageName:(0,r.jsx)("span",{style:{marginLeft:4,marginRight:4},children:t}),databaseNameWithIcon:c}})}),icon:(0,o(689094).W)(s.icon),...i})}const a=n.memo(i)},287940:(e,t,o)=>{o.d(t,{A:()=>V});var n=o(296540),r=()=>o(955450),i=()=>o(484714),a=()=>o(56366),l=()=>o(401497),s=()=>o(543906),c=()=>o(761940),u=()=>o(955363),d=()=>o(959013),p=()=>o(284371),g=()=>o(497222),m=()=>o(8980),y=()=>o(864943),f=()=>o(299487),v=()=>o(131448),h=()=>o(53137),S=()=>o(712505),x=()=>o(404141),C=()=>o(583238),b=()=>o(637096),A=()=>o(320260),w=()=>o(704152),k=()=>o(953006),j=o(474848);const M=(0,d().YK)({defaultTitle:{id:"openInNotionCalendarOnboardingTooltip.header",defaultMessage:"Get Notion Calendar"},defaultContent:{id:"openInNotionCalendarOnboardingTooltip.content",defaultMessage:"View any Notion database with calendar and timeline views with your Google Calendar events"},connectCalendarTitle:{id:"openInNotionCalendarOnboardingTooltip.connectCalendarTitle",defaultMessage:"Connect Calendar"},successTitle:{id:"openInNotionCalendarOnboardingTooltip.success.header",defaultMessage:"Successfully connected"},successContent:{id:"openInNotionCalendarOnboardingTooltip.success.content",defaultMessage:"You can now view any database with calendar and timeline views in Notion Calendar"}});function T(e){let{variant:t,origin:o,onCloseClick:n,onConnectCalendarClick:r}=e;const i=(0,l().IS)((e=>({tooltip:{width:233},content:{opacity:1},contentInner:{display:"flex",flexDirection:"column",gap:14},contentMessage:{opacity:.8,color:e.text.contrastPrimary},footer:{display:"flex",alignItems:"center",gap:12},primaryButton:{display:"flex",alignItems:"center",height:24,padding:"0 12px",marginLeft:"auto",borderRadius:4,background:"#FFF",color:"#1D1B16",fontSize:12,fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},primaryButtonHover:{background:"rgba(255,255,255,0.9)"},primaryButtonPressed:{background:"rgba(255,255,255,0.8)"}})),[]);return(0,j.jsx)(k().k,{origin:o,placementToOrigin:"bottom",header:(0,j.jsx)(d().sA,{..."success"===t?M.successTitle:M.defaultTitle}),content:(0,j.jsxs)("div",{style:i.contentInner,children:[(0,j.jsx)("div",{style:i.contentMessage,children:(0,j.jsx)(d().sA,{..."success"===t?M.successContent:M.defaultContent})}),"default"===t&&(0,j.jsx)("div",{style:i.footer,children:(0,j.jsx)(w().A,{style:i.primaryButton,hoveredStyle:i.primaryButtonHover,pressedStyle:i.primaryButtonPressed,onClick:r,children:(0,j.jsx)(d().sA,{...M.connectCalendarTitle})})})]}),contentStyle:i.content,onCloseClick:n,shouldDismissUponOutsideClick:!1,enableMouseCapture:!1,pointerPosition:"33%",style:{...i.tooltip}})}function _(e){let{collectionContextStore:t,entrypoint:o}=e;const n=(0,i().v3)(),r=(0,a().K8)((()=>(0,C().mX)()),[]),l=(0,a().K8)((()=>v().default.isVisible("open_in_calendar_tooltip")),[]),c=(0,a().K8)((()=>{const e=x().A.state.open||t.settingsStore.state.open,o=t.isFullScreenStore.state,n=S().default.state.open;return o&&!e&&!n&&h().A.state.loaded}),[t]);(0,s().A)((()=>{f().HH(n,"open_in_calendar_tooltip")}),c);const u=(0,b().W)({collectionContextStore:t,entrypoint:o});switch(o){case"calendar_view":case"timeline_view":return(0,j.jsx)(I,{showTooltip:l,hasConnectedCalendar:r,openNotionCalendar:u});case"view_settings":return(0,j.jsx)(B,{openNotionCalendar:u})}}function I(e){const{showTooltip:t,hasConnectedCalendar:o,openNotionCalendar:r}=e,a=(0,i().v3)(),s=(0,n.useRef)(null),[u,g]=(0,n.useState)(!1),m=(0,l().IS)((e=>({button:{marginRight:8,paddingRight:12,fontSize:14,fontWeight:p().Wy.medium,height:26},calendarIcon:{height:18,width:18},calendarIconSvg:{fill:e.text.primary}})),[]),v=(0,n.useCallback)((()=>{f().a(a,"open_in_calendar_tooltip")}),[a]),h=(0,n.useCallback)((()=>{g(!0),r()}),[r]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(y().A,{size:"lg",ref:s,style:m.button,iconStyle:m.calendarIconSvg,iconLeading:e=>(0,j.jsx)(A().y,{style:{...e,...m.calendarIcon}}),onClick:r,children:(0,j.jsx)(d().sA,{...c().P.manageInCalendar})}),t&&(0,j.jsx)(T,{variant:u||o?"success":"default",origin:s,onCloseClick:v,onConnectCalendarClick:h})]})}function B(e){const{openNotionCalendar:t}=e,o=(0,l().IS)((()=>({calendarIcon:{height:18,width:18}})),[]);return(0,j.jsx)(g().A,{showChevron:!1,icon:e=>(0,j.jsx)(A().y,{style:{...e,...o.calendarIcon}}),onClick:()=>t(),right:(0,j.jsx)(m().I,{icon:u().arrowDiagonalUpRightIcon,color:"tertiary",size:18}),title:(0,j.jsx)(d().sA,{...c().P.manageInCalendar})})}function V(e){return(0,r().K)({collectionContextStore:e.collectionContextStore})?(0,j.jsx)(_,{...e}):null}},330557:(e,t,o)=>{o.d(t,{p:()=>K});o(898992),o(581454),o(737550);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),l=()=>o(764880),s=()=>o(921598),c=()=>o(970013),u=()=>o(356596),d=()=>o(799829),p=()=>o(179034),g=()=>o(959013),m=()=>o(496603),y=()=>o(534177),f=()=>o(284371),v=()=>o(901389),h=()=>o(175116),S=()=>o(594794),x=()=>o(722872),C=()=>o(106628),b=()=>o(361330),A=()=>o(970585),w=()=>o(630116),k=()=>o(251126),j=()=>o(297872),M=()=>o(623580),T=()=>o(419357),_=()=>o(928600),I=()=>o(939740),B=()=>o(64e3),V=()=>o(204063),P=()=>o(958378),F=()=>o(89924),G=()=>o(287531),R=()=>o(457688),L=o(474848);function K(e){const{onChange:t,currentGroups:o,groupBy:a,groupFormat:l,onClose:c,schema:u,parentStore:d}=e,[p,m]=(0,n.useState)(""),y=(0,i().uB)(void 0,A().A),f=(0,r().Y0)(),v=(0,n.useCallback)((()=>{D({onChange:t,currentGroups:o,groupBy:a,groupFormat:l,inputValue:p,onClose:c})}),[o,a,l,p,t,c]);let h;return(0,n.useEffect)((()=>{var e;l&&("select"===l.value.type||"multi_select"===l.value.type)&&l.value.value?m(l.value.value):l&&(0,s().kO)(l.value)&&"exact"===(null===(e=l.value.value)||void 0===e?void 0:e.type)&&m(l.value.value.value)}),[l]),h=f.isMobile?{menuType:x().gu.Modal,title:l?(0,L.jsx)(g().sA,{defaultMessage:"Rename group",id:"codeBlock.databaseEditGroupMenu.renameGroupTitle"}):(0,L.jsx)(g().sA,{defaultMessage:"Add a group",id:"codeBlock.databaseEditGroupMenu.addGroupTitle"}),left:(0,L.jsx)(g().sA,{defaultMessage:"Cancel",id:"codeBlock.databaseEditGroupMenu.cancelButton.label"}),right:(0,L.jsx)(g().sA,{defaultMessage:"Done",id:"codeBlock.databaseEditGroupMenu.doneButton.label"}),onClickRight:v,onClickLeft:c}:{menuType:x().gu.Popup,width:O(a)?300:240,maxHeight:"50vh"},(0,L.jsx)(j().A,{capture:!0,render:e=>(0,L.jsx)(_().A,{...h,...e,children:(0,L.jsx)(q,{groupBy:a,schema:u,onChange:t,currentGroups:o,groupFormat:l,onClose:c,parentStore:d,inputValue:p,setInputValue:m,menuListStore:y})})})}function z(){return(0,L.jsx)(g().sA,{defaultMessage:"Group already exists.",id:"database.groupExistsAlreadyError.message"})}function O(e){return"select"===e.type||"multi_select"===e.type||(0,s().Vs)(e.type)}function E(e){let{currentGroups:t,onChange:o,groupFormat:a,onClose:c,inputValue:u,menuListStore:d}=e;const p=(0,r().v3)(),y=(0,g().tz)(),f=(0,i().uB)(d,A().A),[h,S]=(0,n.useState)(u);return(0,L.jsx)(k().A,{request:h,performRequest:e=>async function(e,t){return(await C().T.searchActions.load()).searchSpaceUsers({environment:t,query:e,membersOnly:!1,limit:20,shouldUseEdgeCacheRollout:!0})}(e,p),debounce:b().tu,render:(e,n,r)=>{n||(n=[]);const i=m().oE(n.map((e=>({key:e.id,render:t=>(0,L.jsx)(R().A,{actor:(0,l().A7)(e),...t}),action:()=>{const n={type:"person",value:{table:"notion_user",id:e.id}};return a&&m().n4(n,a.value)?(null==c||c(),null):t.some((e=>(0,s().OF)(n,e.value)))?(v().f1((0,L.jsx)(z,{})),null):void o({newGroupValue:n})}}))));let u;return u=r&&n&&0===i.length?(0,L.jsx)(F().A,{children:(0,L.jsx)(B().A,{title:(0,L.jsx)(g().sA,{defaultMessage:"No results",id:"database.noPersonSearchResults.message"})})}):(0,L.jsx)(I().Ay,{type:I().Oh.Vertical,initialFocus:0,sections:[{key:0,render:e=>(0,L.jsx)(F().A,{...e}),items:i}],store:f}),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(F().A,{children:(0,L.jsx)(T().Ay,{value:h,focus:!0,placeholder:y.formatMessage({defaultMessage:"Search for a person…",id:"database.searchPerson.placeholder"}),onChange:e=>{S(e.target.value),f.setState({...f.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}})}),u]})}})}function N(e,t,o,n,r,i){const a=o[n.property];if(!a||"relation"!==a.type)return null;const l=c().Nv(a);if(!l)return null;const s=w().md.createChildStore(t,l);return s.isDefined()&&i.length>0?{key:"new-page",render:e=>(0,L.jsx)(G().A,{targetCollectionStore:s,pageName:i,...e}),action:()=>{const t=(0,S().Z1)({environment:e,table:p().ev,spaceId:s.getSpaceId()}),o={table:p().ev,id:t,spaceId:s.getSpaceId()};r({newGroupValue:{type:"relation",value:o},newPage:{id:o.id,spaceId:o.spaceId,name:i}})}}:null}function D(e){let{onChange:t,currentGroups:o,groupBy:n,groupFormat:r,inputValue:i,onClose:a}=e;const l=i.trim().replace(/,/g,"");let c;"select"===n.type||"multi_select"===n.type?c={type:n.type,value:l}:(0,s().Vh)(n)&&(c={type:n.type,value:{type:"exact",value:l}}),c&&l?r&&m().n4(c,r.value)?null==a||a():o.some((e=>c&&(0,s().OF)(c,e.value)))?v().f1((0,L.jsx)(z,{})):t({newGroupValue:c}):null==a||a()}function H(e,t,o,n,r,i,a,l,c){const u=null==c?void 0:c.relativeVariableStore.state,p=u&&u[t.id],g=(e,o)=>{const r=w().md.createChildStore(n,t);if(!r.isDefined())return;const i=r.getFormat().app_config_uri;return i&&o?e.formatMessage(d().n$[i][o].messageDescriptor):void 0};return e.map((e=>{const t=w().Bv.createChildStore(n,e);if(t.isTemplate())return;const c=p?(0,d().cE)(t.id,p):void 0;return{key:t.id,render:e=>(0,L.jsx)(P().A,{store:t,titlePrefix:g(r,c),...e}),action:()=>{let t={type:"relation",value:e};c&&(t={type:"relation",value:{type:"relative",value:{type:"builtin",variable:c}}}),a&&m().n4(t,a.value)?null==l||l():o.some((e=>(0,s().OF)(t,e.value)))?v().f1((0,L.jsx)(z,{})):i({newGroupValue:t})}}}))}function U(e){let{onChange:t,currentGroups:o,groupBy:i,groupFormat:l,onClose:s,inputValue:c,setInputValue:d,menuListStore:p}=e;const m=(0,g().tz)(),y=(0,a().DP)(),v=(0,n.useCallback)((()=>D({onChange:t,currentGroups:o,groupBy:i,groupFormat:l,inputValue:c,onClose:s})),[t,o,i,l,c,s]),h=(0,n.useCallback)((e=>function(e,t,o,n,r,i,a){13===e.keyCode?D({onChange:t,currentGroups:o,groupBy:n,groupFormat:r,inputValue:i,onClose:a}):27===e.keyCode&&(null==a||a())}(e,t,o,i,l,c,s)),[t,o,i,l,c,s]),S=(0,n.useCallback)((e=>function(e,t,o){t(e.target.value),o.setState({...o.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}(e,d,p)),[p,d]),x=(0,r().WS)(),C=l?m.formatMessage({id:"database.collectionEditGroupMenu.renameGroupLabel.placeholder",defaultMessage:"Rename group"}):m.formatMessage({id:"database.collectionEditGroupMenu.newGroupLabel.placeholder",defaultMessage:"New group"});return x?(0,L.jsx)(F().A,{children:(0,L.jsx)(T().Ay,{value:c,focus:!0,selectAll:!0,showClearButton:!1,focusInitial:!0,placeholder:C,onChange:S,onKeyDown:h})}):(0,L.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:6,width:"100%",background:y.inputBackground},children:[(0,L.jsx)(M().A,{value:c,focus:!0,selectAll:!0,focusInitial:!0,placeholder:C,onChange:S,onKeyDown:h,format:M().C.Transparent,style:{fontSize:f().J.UIRegular.desktop}}),(0,L.jsxs)(V().A,{onClick:v,children:[(0,L.jsx)(g().sA,{defaultMessage:"Done",id:"database.collectionEditGroupMenu.submitButton.label"}),(0,u().K)({height:14,width:14,fill:"currentColor",marginLeft:6,marginTop:2})]})]})}function W(e){let{parentStore:t,schema:o,groupBy:a,currentGroups:l,onChange:s,groupFormat:u,onClose:d,inputValue:g,setInputValue:m,menuListStore:y}=e;const f=(0,r().v3)(),v=(0,n.useMemo)((()=>{const e=o[a.property];return!(!e||"relation"!==e.type)&&c().Nv(e)}),[a.property,o]);return(0,i().K8)((()=>{if(!v)return!1;return w().md.createChildStore(t,v).isDefined()}),[v,t])&&v?(0,L.jsx)(k().A,{request:g,performRequest:e=>async function(e,t,o,n,r){const i=o[t.property];if(!i||!(0,c().nC)(i))return;const a=c().Nv(i);if(!a)return;const l=w().md.createChildStore(n,a);if(await l.load(),!l.isDefined())return;const s=l.getSpaceId(),u=await C().T.searchActions.load();return(await u.searchPagesInCollection({environment:r,query:e,collectionId:a.id,spaceId:s,excludeTemplates:!0,source:"collection_group_value",limit:20,includePublicPagesWithoutExplicitAccess:!0,boostRecentlyViewedPages:!1})).results.map((e=>({table:p().ev,id:e,spaceId:s})))}(e,a,o,t,f),debounce:b().tu,render:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return(0,L.jsx)($,{ready:r,results:n,parentStore:t,schema:o,groupBy:a,currentGroups:l,onChange:s,groupFormat:u,onClose:d,inputValue:g,setInputValue:m,menuListStore:y,collectionPointer:v,environment:f})}}):null}function $(e){let{parentStore:t,schema:o,groupBy:r,currentGroups:a,onChange:l,groupFormat:s,onClose:c,inputValue:u,setInputValue:d,menuListStore:p,results:y,ready:f,collectionPointer:v,environment:S}=e;const x=(0,g().tz)(),C=(0,n.useContext)(h().p2),b=(0,i().K8)((()=>m().oE([...H(y,v,a,t,x,l,s,c,C),N(S,t,o,r,l,u)])),[S,C,v,a,r,s,u,x,l,c,t,y,o]);let A;return A=f&&y&&0===b.length?(0,L.jsx)(F().A,{children:(0,L.jsx)(B().A,{title:(0,L.jsx)(g().sA,{defaultMessage:"No results",id:"database.noRelationSearchResults.message"})})}):(0,L.jsx)(I().Ay,{type:I().Oh.Vertical,initialFocus:0,sections:[{key:0,render:e=>(0,L.jsx)(F().A,{...e}),items:b}],store:p}),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(F().A,{children:(0,L.jsx)(T().Ay,{value:u,focus:!0,placeholder:x.formatMessage({defaultMessage:"Type to search...",id:"database.searchRelation.placeholder"}),onChange:e=>{d(e.target.value),p.setState({...p.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}})}),A]})}function q(e){let{groupBy:t,schema:o,onChange:n,currentGroups:r,groupFormat:i,onClose:a,parentStore:l,inputValue:c,setInputValue:u,menuListStore:d}=e;return o[t.property]?"select"===t.type||"multi_select"===t.type?(0,L.jsx)(U,{onChange:n,currentGroups:r,groupBy:t,groupFormat:i,onClose:a,inputValue:c,setInputValue:u,menuListStore:d}):"person"===t.type?(0,L.jsx)(E,{currentGroups:r,onChange:n,groupFormat:i,onClose:a,inputValue:c,menuListStore:d}):"relation"===t.type?(0,L.jsx)(W,{parentStore:l,schema:o,groupBy:t,currentGroups:r,onChange:n,groupFormat:i,onClose:a,inputValue:c,setInputValue:u,menuListStore:d}):(0,s().Vs)(t.type)?(0,L.jsx)(U,{onChange:n,currentGroups:r,groupBy:t,groupFormat:i,onClose:a,inputValue:c,setInputValue:u,menuListStore:d}):"number"===t.type||"status"===t.type||"date"===t.type||"formula"===t.type||"checkbox"===t.type||"created_time"===t.type||"last_edited_time"===t.type||"created_by"===t.type||"last_edited_by"===t.type||"last_visited_time"===t.type||"location"===t.type?null:void(0,y().HB)(t.type):null}},344417:(e,t,o)=>{o.d(t,{u:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.97 1.97 12.46 12.46",svg:(0,o(474848).jsx)("path",{d:"M7.1 1.975a5.125 5.125 0 1 0 3.155 9.164l3.107 3.107a.625.625 0 1 0 .884-.884l-3.107-3.107A5.125 5.125 0 0 0 7.1 1.975M3.225 7.1a3.875 3.875 0 1 1 7.75 0 3.875 3.875 0 0 1-7.75 0"})},r=(0,o(340498).wt)("magnifyingGlassSmall",n)},359454:(e,t,o)=>{o.d(t,{P:()=>a});var n=()=>o(725614),r=()=>o(765957),i=()=>o(630116);function a(e){const{environment:t,collectionContextStore:o}=e;let a=o.collectionStore();const l=o.collectionViewBlockStore();if(!a||!l)return;const{mainEditorCurrentBlockStore:s}=r().default.state;s&&o.isFullScreenStore.state&&(a=i().md.createChildStore(s,a.pointer)),n().selectAllText({environment:t,store:a.getNameStore(),canSelectAllBlocks:!1})}},370873:(e,t,o)=>{o.d(t,{p:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("myTasksLarge",{viewBox:"0 0 48 48",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M21.693 39.17a9.05 9.05 0 0 1-.73 1.238H39.52c1.65 0 2.892-.413 3.727-1.238.835-.824 1.253-2.05 1.253-3.68V19.203c0-1.628-.418-2.855-1.253-3.68-.835-.824-2.078-1.236-3.727-1.236H16.253c-1.66 0-2.908.412-3.744 1.237-.824.814-1.237 2.04-1.237 3.68v5.28c.212-.02.423-.036.635-.047a6.387 6.387 0 0 1 1.269 0c.222.01.438.027.65.048v-5.14c0-.824.211-1.448.634-1.87.423-.424 1.031-.635 1.824-.635h23.188c.783 0 1.39.212 1.824.634.434.423.65 1.047.65 1.872v16.003c0 .825-.216 1.449-.65 1.872-.433.423-1.041.634-1.824.634H22.248a8.47 8.47 0 0 1-.555 1.316ZM15.364 10.082c-.38.381-.629.93-.745 1.65h26.55c-.127-.72-.38-1.269-.761-1.65-.37-.39-.952-.586-1.745-.586H17.125c-.793 0-1.38.195-1.76.586ZM18.52 5.816c-.38.338-.591.846-.634 1.523h20.016c-.053-.677-.275-1.185-.666-1.523-.38-.349-.936-.523-1.665-.523H20.2c-.729 0-1.29.174-1.68.523Z"}),(0,n.jsx)("path",{d:"M9.448 42.073a7.71 7.71 0 0 0 3.11.634c1.088 0 2.12-.211 3.092-.634a8.253 8.253 0 0 0 2.57-1.745 8.123 8.123 0 0 0 1.76-2.57 7.712 7.712 0 0 0 .634-3.108 7.75 7.75 0 0 0-.634-3.124 8.032 8.032 0 0 0-1.729-2.57 8.03 8.03 0 0 0-2.57-1.728 7.75 7.75 0 0 0-3.124-.635 7.71 7.71 0 0 0-3.109.635 7.907 7.907 0 0 0-2.569 1.744 8.253 8.253 0 0 0-1.745 2.57A7.639 7.639 0 0 0 4.5 34.65c0 1.11.211 2.152.634 3.125a8.254 8.254 0 0 0 1.745 2.57 8.03 8.03 0 0 0 2.57 1.728Zm3.807-2.649c-.17.18-.402.27-.698.27-.296 0-.534-.09-.714-.27-.169-.18-.253-.412-.253-.698v-3.108H8.48c-.286 0-.518-.09-.698-.27-.18-.17-.27-.402-.27-.698 0-.296.09-.528.27-.698.18-.18.412-.27.698-.27h3.109v-3.108c0-.285.084-.518.253-.698.18-.18.418-.27.714-.27s.529.09.698.27c.18.18.27.413.27.698v3.109h3.108c.286 0 .518.09.698.27.18.169.27.401.27.697 0 .296-.09.529-.27.698-.18.18-.412.27-.698.27h-3.108v3.108c0 .286-.09.519-.27.698ZM27.229 32.326c.292.341.664.512 1.116.512.514 0 .903-.198 1.166-.592l5.693-8.58c.095-.14.164-.277.21-.413a1.3 1.3 0 0 0 .068-.401c0-.354-.124-.646-.37-.876a1.246 1.246 0 0 0-.901-.352c-.247 0-.456.05-.63.149-.168.094-.328.259-.48.493l-4.78 7.506-2.394-2.868c-.259-.3-.584-.45-.974-.45-.366 0-.668.117-.907.351a1.186 1.186 0 0 0-.357.883c0 .16.024.312.073.456.054.14.15.286.29.438l3.177 3.744Z"})]})})},396671:(e,t,o)=>{o.d(t,{d:()=>l});o(944114),o(898992),o(354520),o(672577),o(803949),o(581454);var n=()=>o(56366),r=()=>o(921598),i=()=>o(10594),a=()=>o(963589);function l(e){let{collectionContextStore:t,reducerResult:o,groupBy:l,subGroupBy:s,groupsLimit:c,groupsFormatKey:u,renderGroupsFromAggregationArgs:d,removeUncategorized:p}=e;const g=(0,a().X)("collection_group_reducer_visible");return(0,n().Fy)((()=>{var e;const n=t.normalizedFormatStore.state,a=t.normalizedSchemaStore.state,m=t.collectionViewBlockStore();if(g&&"v2"===(null==o?void 0:o.version)){const e=[],t=[];if(l){var y,f;o.results.forEach((n=>{var i;const a=null===(i=o.pinnedResults)||void 0===i?void 0:i.groupResults.find((e=>(0,r().AC)(e.value)===(0,r().AC)(n.value)));n.visible?e.push({property:l.property,value:n.value,pinned:!!a||void 0}):t.push({property:l.property,value:n.value,hidden:!0,pinned:!!a||void 0})}));const n=(null===(y=o.pinnedResults)||void 0===y?void 0:y.groupResults.map((e=>({property:l.property,value:e.value,pinned:!0,hidden:!e.visible}))))??[];return{version:"v2",currentGroups:[...e,...t],visibleGroups:e,hiddenGroups:t,pinnedGroups:{groups:n,aggregations:(null===(f=o.pinnedResults)||void 0===f?void 0:f.aggregationResults)??{}},hasMore:o.hasMore}}var v;return s?(null===(v=o.subGroupResults)||void 0===v||v.forEach((o=>{o.visible?e.push({property:s.property,value:o.value}):t.push({property:s.property,value:o.value,hidden:!0})})),{version:"v2",currentGroups:[...e,...t],visibleGroups:e,hiddenGroups:t,pinnedGroups:{groups:[],aggregations:{}},hasMore:Boolean(o.hasMoreSubGroups)}):{version:"v2",currentGroups:[],visibleGroups:[],hiddenGroups:[],pinnedGroups:{groups:[],aggregations:{}},hasMore:!1}}if(!l||!m||"v2"===(null==o?void 0:o.version))return{version:"v1",currentGroups:[],visibleGroups:[],hiddenGroups:[],total:0};const h=(0,r().oH)({schema:a,groupBy:l}),S="chart_subgroups"===u&&null!=o&&o.subGroupResults?o.subGroupResults:null==o?void 0:o.results,x=(0,i().ck)({groupBy:l,schema:a,formatGroups:n[u]||[],schemaGroups:h,reducerResults:S,getRecordModel:m.getRecordModel,getRecordRole:m.getRecordRole,relativeVariableResult:t.relativeVariableStore.state,viewAppConfigUri:null===(e=t.collectionViewStore())||void 0===e?void 0:e.getFormat().app_config_uri,allowedCollectionStores:t.collectionStoresStore.state,renderGroupsFromAggregationArgs:d,removeUncategorized:p}),C=x.filter((e=>!(0,r().tx)(e))).slice(0,c),b=x.filter((e=>(0,r().tx)(e))),A=o?o.total:0;return{version:"v1",currentGroups:[...C,...b],visibleGroups:C,hiddenGroups:b,total:A}}),[t,g,o,l,u,d,p,c,s])}},399275:(e,t,o)=>{o.d(t,{d:()=>r});o(898992),o(354520);class n extends(()=>o(757695))().Store{getInitialState(){return{flowId:void 0,type:"connected_properties_setup",collectionsProperties:{}}}createNewFlowId(){const e=(0,o(206267).JW)();return this.setState({...this.state,flowId:e}),e}getFlowId(){return this.state.flowId?this.state.flowId:this.createNewFlowId()}addCollectionProperties(e,t){const o=this.state.collectionsProperties[e],n=o?{...o,...t}:t;this.setState({...this.state,collectionsProperties:{...this.state.collectionsProperties,[e]:n}})}removeCollectionProperties(e,t){const o=this.state.collectionsProperties[e];if(!o)return;const n=Object.fromEntries(Object.entries(o).filter((e=>{let[o]=e;return!t.has(o)})));if(0===Object.keys(n).length){const{[e]:t,...o}=this.state.collectionsProperties;this.setState({...this.state,collectionsProperties:o})}else this.setState({...this.state,collectionsProperties:{...this.state.collectionsProperties,[e]:n}})}}const r=new n;(0,o(604341).exposeDebugValue)("ConnectedPropertiesSyncStore",r)},424599:(e,t,o)=>{o.d(t,{M:()=>d});o(581454);var n=()=>o(594013),r=()=>o(901610),i=()=>o(686526),a=()=>o(246826),l=()=>o(751156),s=()=>o(519839),c=()=>o(493260),u=()=>o(46986);async function d(e){var t;const{environment:o,collectionStore:d,collectionContextStore:p,collectionSettingsStore:g,shouldSkipViewSelection:m}=e,y=p.collectionViewBlockStore(),f=p.collectionViewStore(),v=d.getParentBlockStore();if(!y||!v||!f)return;const h=null===(t=d.getModel())||void 0===t?void 0:t.getNormalizedSchema();if("chart"===f.getType()&&h){const e=f.getFormat(),t=e.chart_config;if(!t)return;const i="placeholder"===t.type?t.placeHolderType:t.type;let s;return(0,r().I)(i)?s=(0,n().EZ)({collectionSchema:h,axisChartType:i}):"donut"===i&&(s=(0,n().ZS)({collectionSchema:h})),l().createAndCommit({userAction:"slashMenu.create.chartViewExistingSource",environment:o,canUndo:!0,perform:t=>{a().zv({store:f.getFormatStore(),transaction:t,data:{...e,hide_linked_collection_name:!0,subitem_display_mode:"flattened",chart_config:s||null}})}}),void g.setState({open:!0,stack:[{type:"main"}]})}if(m)i().a2({collectionSettingsStore:g,item:{type:"main"}});else{await Promise.all([...v.getCollectionViewStores().map((e=>e.load())),...y.getCollectionViewStores().map((e=>e.load()))]);const e=(0,s().Mf)({collectionStore:d,sourceCollectionViewBlockStore:v,currentCollectionViewBlockStore:y,currentCollectionViewStore:f,constraints:(0,c().v)(f.id)});(0,u().vV)()?i().R8({collectionSettingsStore:g,item:{type:"createView"}}):e.length>0?i().a2({collectionSettingsStore:g,item:{type:"duplicateExistingView"}}):i().a2({collectionSettingsStore:g,item:{type:"createView"}})}}},472765:(e,t,o)=>{o.d(t,{m:()=>d});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(686526),l=()=>o(557281),s=()=>o(175116),c=()=>o(406699),u=o(474848);const d=n.memo((function(e){const{store:t,popupType:a,dismissTooltip:l,renderOrigin:d,placementToOrigin:g}=e,m=(0,r().v3)(),y=(0,s().ET)(),f=(0,i().uB)(void 0,o(463830).A),v=(0,n.useCallback)((()=>{(0,o(436696).X)({environment:m,collectionContextStore:y,action:"click_topbar_templates_dropdown"}),l&&l()}),[y,m,l]);return(0,u.jsx)(c().Ay,{popupType:a,placementToOrigin:g,alignmentToOrigin:c().yP.Start,render:()=>(0,u.jsx)(p,{store:t,templateButtonPopupStore:f}),originGap:4,onClick:v,renderOrigin:d,buttonPopupStore:f})}));function p(e){const{store:t,templateButtonPopupStore:c}=e,d=(0,r().v3)(),p=(0,s().ET)(),g=(0,i().K8)((()=>p.collectionStore()),[p]),m=(0,i().K8)((()=>p.settingsStore),[p]),y=(0,i().O$)(o(227440).e),f=(0,i().O$)(p.permissionScopesStore),v=(0,i().K8)((()=>t.isNonEditableState()),[t]),h=(0,o(401497).IS)((e=>({offlineMessage:{fontSize:14,color:e.text.secondary,width:280,padding:8}})),[]),S=(0,n.useCallback)((e=>{l().Ur({userAction:"CollectionViewBlock.handleTemplateEmptyPageClick",collectionViewBlockStore:t,collectionContextStore:p,environment:d,shouldCoerce:!1,from:{createBlock:"cvb_template_empty_page"},templateStore:void 0,useCrdt:!0}),c.reset(),a().os({collectionSettingsStore:m})}),[p,d,t,c,m]),x=(0,n.useCallback)((e=>{l().Ur({environment:d,collectionContextStore:p,collectionViewBlockStore:t,templateStore:e.templateStore,useCrdt:e.useCrdt,isKeyboard:e.isKeyboard,from:{createBlock:"cvb_template",initCollection:"collection_view_block"},shouldCoerce:!0}),c.reset(),a().os({collectionSettingsStore:m})}),[d,p,t,c,m]),C=(0,n.useCallback)((()=>{c.reset()}),[c]);return g?y?(0,u.jsx)(o(975318).D,{isOverlay:!0,collectionStore:g,canConfigureCollection:f.canConfigureCollection,onEmptyPageClick:S,onEmptyEnter:S,onTemplateClick:x,onCancelClick:C,locked:v}):(0,u.jsx)("div",{style:h.offlineMessage,children:(0,u.jsx)(o(959013).sA,{defaultMessage:"Please go online to use a template.",id:"collectionViewBlock.actionBar.offlineTemplatePicker.message"})}):null}},488887:(e,t,o)=>{function n(e,t){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}o.d(t,{_:()=>n})},509060:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=()=>o(959013),r=o(474848);const i=function(e){let{on:t,menuListItemProps:i,disabled:a}=e;return(0,r.jsx)(o(859428).A,{disableTooltip:!a,renderTooltip:()=>(0,r.jsx)(n().sA,{defaultMessage:"Only available for Count",id:"AggregationLimitToggle.disabled.tooltip"}),render:e=>(0,r.jsx)(o(574036).A,{...(0,o(553965).A)(i,e),on:!a&&t,disabled:a,style:{alignItems:"flex-start",paddingTop:8,paddingBottom:8},title:(0,r.jsx)(n().sA,{defaultMessage:"Show large counts as 99+",id:"BoardAggregations.aggregationLimitToggle.title"}),captionStyle:{marginTop:6},shouldWrapCaption:!0,caption:(0,r.jsx)(n().sA,{defaultMessage:"This improves performance for large databases.",id:"BoardAggregations.aggregationLimitToggle.description"})})})}},532564:(e,t,o)=>{o.d(t,{V:()=>l,Z:()=>a});o(16280);var n=o(296540),r=o(474848);const i=n.createContext(void 0);function a(e){return(0,r.jsx)(i.Provider,{value:e.value,children:e.children})}function l(){const e=n.useContext(i);if(!e)throw new Error("useChartStore must be used within a ChartContextProvider");return e}i.displayName="ChartContext"},534239:(e,t,o)=>{o.d(t,{Zr:()=>f,e8:()=>S});o(296540);var n=()=>o(484714),r=()=>o(56366),i=()=>o(401497),a=()=>o(970013),l=()=>o(617871),s=()=>o(187174),c=()=>o(532940),u=()=>o(331542),d=()=>o(8980),p=()=>o(963589),g=()=>o(399275),m=()=>o(543665),y=o(474848);function f(e){let{propertyId:t,propertySchema:o,collectionContextStore:n}=e;const i=(0,r().K8)((()=>{var e;if("relation"!==o.type&&"rollup"!==o.type)return!1;const r=null===(e=n.collectionStore())||void 0===e?void 0:e.id;if(!r)return!1;const i=g().d.state.collectionsProperties[r];return!!i&&"Loading"===i[t]}),[n,t,o.type]),a=(0,p().X)("connected_relation_persisted_sync_state");return"relation"!==o.type&&"rollup"!==o.type?null:a?(0,y.jsx)(h,{collectionContextStore:n,propertyId:t,propertySchema:o}):i?(0,y.jsx)(v,{}):null}function v(){const e=(0,i().DP)();return(0,y.jsx)("span",{style:{marginLeft:6,fontSize:11,padding:"1px 4px",borderRadius:4,display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1,color:"light"===e.mode?e.palette.blue[500]:e.palette.blue[600]},children:(0,y.jsx)(u().A,{legacySize:14})})}function h(e){const{propertySchema:t}=e,o=(0,r().K8)((()=>{if(t&&(0,a().UU)(t)&&t.connectedRelation.integration_id===l().mn)return t.collection_pointer}),[t]),{format:n,loading:s}=S(o,{debugName:"ConnectedRelationSyncStateBadge"}),p=(0,r().K8)((()=>{var e;return n?{hasError:Boolean(n.error),isSyncing:Boolean(null===(e=n.sync_state)||void 0===e?void 0:e.syncing)}:null}),[n]),g=(0,i().IS)((e=>({container:{marginLeft:6,fontSize:11,padding:"1px 4px",borderRadius:4,display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1,color:"light"===e.mode?e.palette.blue[500]:e.palette.blue[600]},icon:{padding:2}})),[]);return p?p.hasError?(0,y.jsx)("span",{style:g.container,children:(0,y.jsx)(d().I,{icon:c().exclamationMarkTriangleIcon,color:"uiYellowPrimary",style:g.icon})}):p.isSyncing?(0,y.jsx)("span",{style:g.container,children:(0,y.jsx)(u().A,{size:"md"})}):null:null}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=(0,n().v3)(),[{status:i,value:a,error:l}]=(0,s().Yb)((async()=>{if(!e)return null;const t=new(m().m)(o,e);return await t.load(),t}),[o,e],{debugName:t.debugName||"useExternalCollectionFormat"});return{format:(0,r().K8)((()=>(null==a?void 0:a.getFormat())??null),[a]),loading:"pending"===i,error:l}}},569397:(e,t,o)=>{o.d(t,{C:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.12 3.05 11.76 9.9",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M9.372 3.238a.625.625 0 1 0-.884.884l3.253 3.253H2.75a.625.625 0 0 0 0 1.25h8.991l-3.253 3.253a.625.625 0 0 0 .884.884l4.32-4.32a.625.625 0 0 0 0-.884z"})},r=(0,o(340498).wt)("arrowStraightRightSmall",n)},589531:(e,t,o)=>{o.d(t,{D:()=>n});const n=(0,o(959013).YK)({inputPlaceholder:{defaultMessage:"Filter by…",id:"database.viewSettings.createFilterTab.inputPlaceholder"},propertyInputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.mobileSheet.propertyInputPlaceholder"},sortTitle:{defaultMessage:"Sort",id:"database.viewSettings.mainTab.sortButton.title"},advancedFilterTitle:{defaultMessage:"Advanced filter",id:"database.viewSettings.createFilterTab.advancedFilterTitle"},addAdvancedFilterTitle:{defaultMessage:"Add advanced filter",id:"database.viewSettings.createFilterTab.addAdvancedFilter.title"},advancedFilterRulesCount:{defaultMessage:"{ruleCount, plural, one {{ruleCount} rule} other {{ruleCount} rules}}",id:"database.viewSettings.createFilterTab.advancedFilterRulesCount.title"},filterButtonTitle:{defaultMessage:"Filter",id:"database.viewSettings.mainTab.filterButton.title"},numberOfFiltersTitle:{defaultMessage:"{numberOfFilters, plural, one {{numberOfFilters} filter} other {{numberOfFilters} filters}}",id:"database.viewSettings.mainTab.filterButton.filters.title"},noFiltersTitle:{defaultMessage:"No filters",id:"database.viewSettings.mainTab.filterButton.noFilters.title"},openFullscreenButton:{defaultMessage:"Open as full page",id:"database.collectionViewBlock.openFullscreenButton.label"}})},607517:(e,t,o)=>{o.d(t,{V:()=>m,r:()=>g});o(898992),o(354520),o(672577),o(581454);var n=()=>o(921598),r=()=>o(496603),i=()=>o(10594),a=()=>o(972435),l=()=>o(436696),s=()=>o(901389),c=()=>o(751156),u=()=>o(786452),d=()=>o(878781),p=()=>o(916260);function g(e){const{environment:t,collectionContextStore:o,isHidden:g,groupByKey:m,groupsFormatKey:y,currentGroups:f,newGroupIds:v}=e,h=(0,n().H2)(o.normalizedFormatStore.state,m,y),S=h?(0,n().Kq)(h):void 0,x=f.filter((e=>v.indexOf((0,n().Ix)(e))<0)),C=f.filter((e=>v.indexOf((0,n().Ix)(e))>=0)),b=r().Ul(C,(e=>{const t=v.indexOf((0,n().Ix)(e));return t>=0?t:1/0})),A=g?[...x,...b]:[...b,...x];c().createAndCommit({userAction:`collectionGroupActions.handleGroupReorder#${y}`,environment:t,canUndo:!0,perform:e=>{(0,u().y)({sortType:"manual",environment:t,collectionContextStore:o,groupByKey:m,groupsFormatKey:y,transaction:e}),(0,p().o)({collectionContextStore:o,newGroups:A,groupsFormatKey:y,transaction:e})}});const w="board_columns"===y?g?"board_reorder_hidden_groups":"board_reorder_groups":g?"reorder_hidden_groups":"reorder_groups";(0,l().X)({environment:t,collectionContextStore:o,action:w}),h&&S&&function(e){const{environment:t,collectionContextStore:o,groupByKey:n,groupsFormatKey:r,previousGroupBy:l,previousSortType:p}=e;"manual"!==p&&s().ui({message:a().A.formatMessage(d().D.removeGroupSortingConfirmation,{sortType:a().A.formatMessage((0,i().rA)(l,p))}),items:[{label:a().A.formatMessage(d().D.removeGroupSortingButton),color:"red",onAccept:()=>{}},{label:a().A.formatMessage(d().D.removeGroupSortingCancel),onAccept:()=>{c().createAndCommit({userAction:"collectionGroupActions.offerToRemoveGroupSort",environment:t,canUndo:!0,perform:e=>{(0,u().y)({environment:t,collectionContextStore:o,transaction:e,groupByKey:n,groupsFormatKey:r,sortType:p})}})}}],showCancel:!1,keepFocus:!0})}({environment:t,collectionContextStore:o,groupByKey:m,groupsFormatKey:y,previousGroupBy:h,previousSortType:S.type})}function m(e){var t;const{environment:o,collectionContextStore:i,groupByKey:a,groupsFormatKey:s,currentGroups:d,newGroupIds:g,containsAllGroups:m}=e;let y=(null===(t=i.collectionViewStore())||void 0===t?void 0:t.getFormatStore().getKeyStore(s).getValue())??[];y=y.map((e=>{const t={...e};return delete t.emptyHidden,t}));let f=d||y;m||(f=0===y.length?d:y);let v=r().Ul(f,(e=>{const t=g.indexOf((0,n().Ix)(e));return t>=0?t:1/0}));v=v.map((e=>y.find((t=>(0,n().Mn)(e,t)))??e));const[h,S]=r().jB(v,(e=>!e.hidden)),x=[...h,...S];c().createAndCommit({userAction:`collectionGroupActions.handleGroupReorder#${s}`,environment:o,canUndo:!0,perform:e=>{(0,u().y)({sortType:"manual",environment:o,collectionContextStore:i,groupByKey:a,groupsFormatKey:s,transaction:e}),(0,p().o)({collectionContextStore:i,newGroups:x,groupsFormatKey:s,transaction:e})}});let C="reorder_groups";"board_columns"===s?C="board_reorder_groups":"chart_subgroups"===s&&(C="chart_reorder_groups"),(0,l().X)({environment:o,collectionContextStore:i,action:C})}},610101:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().Store{getInitialState(){return!1}}const r=new n},611520:(e,t,o)=>{o.d(t,{G2:()=>i,uo:()=>l});var n=()=>o(645873);const r={CollectionSettingsConnectedRelationUpsell:new(n().O2)("CollectionSettingsConnectedRelationUpsell",(async()=>await o.e(73090).then(o.bind(o,474434))))},i=(0,n()._h)(r.CollectionSettingsConnectedRelationUpsell,(e=>e.CollectionSettingsConnectedRelationUpsell)),a={CollectionSettingsConnectedRelationUpsellMaybe:new(n().O2)("CollectionSettingsConnectedRelationUpsellMaybe",(async()=>await o.e(73090).then(o.bind(o,474434))))},l=(0,n()._h)(a.CollectionSettingsConnectedRelationUpsellMaybe,(e=>e.CollectionSettingsConnectedRelationUpsellMaybe))},632537:(e,t,o)=>{o.d(t,{d:()=>Y});o(898992),o(672577);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),l=()=>o(764880),s=()=>o(584262),c=()=>o(921598),u=()=>o(970013),d=()=>o(713998),p=()=>o(784892),g=()=>o(729650),m=()=>o(340498),y=()=>o(72135),f=()=>o(799829),v=()=>o(437607),h=()=>o(959013),S=()=>o(534177),x=()=>o(284371),C=()=>o(686526),b=()=>o(374562),A=()=>o(519839),w=()=>o(186445),k=()=>o(10594),j=()=>o(522827),M=()=>o(23815),T=()=>o(492414),_=()=>o(963589),I=()=>o(741737),B=()=>o(765957),V=()=>o(630116),P=()=>o(330557),F=()=>o(831194),G=()=>o(704152),R=()=>o(406699),L=()=>o(296798),K=()=>o(187820),z=()=>o(16006),O=()=>o(73332),E=()=>o(859428),N=()=>o(448693),D=()=>o(27356),H=()=>o(566081),U=()=>o(399762),W=o(474848);const $=Object.freeze({overflow:"hidden",padding:3,borderRadius:6,fontWeight:x().Wy.medium}),q=Object.freeze({overflow:"hidden",padding:3,marginRight:3,borderRadius:6,fontWeight:x().Wy.medium}),Y=n.memo((function(e){const{schema:t,groupFormat:n,collectionContextStore:r,isHiddenGroup:a,style:l,uncategorizedIconStyle:s,currentGroups:c,groupBy:d,onChange:p,onClose:g,disabled:m,source:y}=e,f=(0,i().uB)(void 0,o(463830).A),v=(0,i().K8)((()=>{const e=r.groupsStore.getGroupState(n);return null==e?void 0:e.groupUiParentStore}),[r,n]),h=(0,i().K8)((()=>{const e=t[n.property];if(e&&(0,u().nC)(e)&&v)return(0,o(685889).LQ)(e,v)}),[t,n,v]),S=t[n.property];if(!S)return null;const x=n.value;if(void 0===x.value)return(0,W.jsx)(ae,{groupFormat:n,schema:t,isHiddenGroup:a,collectionContextStore:r,style:l,uncategorizedIconStyle:s,parentStore:v});if("formula"===x.type){if("formula"!==x.type)return null;const e=x.value;return e?(0,W.jsx)(Z,{schema:t,currentGroups:c,groupBy:d,groupFormat:n,onChange:p,onClose:g,disabled:m,style:l,isHiddenGroup:a,collectionContextStore:r,buttonPopupStore:f,parentStore:v,relatedCollectionAppConfigUri:h,groupValue:e,propertySchema:S,source:y}):null}return(0,W.jsx)(Z,{schema:t,currentGroups:c,groupBy:d,groupFormat:n,onChange:p,onClose:g,disabled:m,style:l,isHiddenGroup:a,collectionContextStore:r,buttonPopupStore:f,parentStore:v,relatedCollectionAppConfigUri:h,groupValue:x,propertySchema:S,source:y})}));function Z(e){const{groupValue:t,propertySchema:o,schema:n,currentGroups:r,groupBy:i,groupFormat:a,onChange:l,onClose:s,disabled:u,style:d,isHiddenGroup:p,collectionContextStore:g,buttonPopupStore:m,parentStore:y,relatedCollectionAppConfigUri:f}=e;return"select"===t.type||"multi_select"===t.type?(0,W.jsx)(pe,{schema:n,currentGroups:r,groupBy:i,groupFormat:a,onChange:l,onClose:s,disabled:u,style:d,buttonPopupStore:m,parentStore:y}):"status"===t.type?(0,W.jsx)(ee,{groupFormat:a,schema:n}):(0,c().r4)(t.type)?(0,W.jsx)(ge,{schema:n,currentGroups:r,groupBy:i,groupFormat:a,onChange:l,onClose:s,disabled:u,style:d,isHiddenGroup:p,buttonPopupStore:m,parentStore:y,groupValue:t}):"relation"===t.type?(0,W.jsx)(se,{schema:n,groupFormat:a,collectionContextStore:g,style:d,parentStore:y,relatedCollectionAppConfigUri:f,groupValue:t}):"location"===t.type?(0,W.jsx)(le,{style:d,collectionContextStore:g,parentStore:y,groupValue:t}):(0,c()._o)(t.type)?(0,W.jsx)(re,{style:d,groupValue:t}):(0,c().Vs)(t.type)?(0,W.jsx)(me,{schema:n,currentGroups:r,groupBy:i,groupFormat:a,onChange:l,onClose:s,disabled:u,style:d,buttonPopupStore:m,parentStore:y,groupValue:t}):"number"===t.type?(0,W.jsx)(ie,{style:d,groupValue:t,propertySchema:"number"===o.type?o:void 0}):"checkbox"===t.type?(0,W.jsx)(ne,{style:d,propertySchema:o,groupValue:t}):void(0,S().HB)(t.type)}function Q(e){const{isHiddenGroup:t}=e,o=(0,n.useCallback)((()=>(0,W.jsx)(h().sA,{id:"database.boardView.uncategorizedColumnTooltip",defaultMessage:"Any items with an empty <b>{name}</b> property will go here. This group cannot be removed.",values:{name:null,b:e=>(0,W.jsx)("span",{style:{fontWeight:x().Wy.semibold},children:e})}})),[]),r=(0,n.useCallback)((t=>(0,W.jsx)(X,{...e,tooltipEvents:t})),[e]),i=(0,a().IS)((()=>({container:{width:240}})),[]);return t?(0,W.jsx)(X,{...e,tooltipEvents:void 0}):(0,W.jsx)(E().A,{renderTooltip:o,render:r,style:i.container,textWrap:!0})}function X(e){const{style:t,uncategorizedIconStyle:o,tooltipEvents:n,formattedLabelMessage:r}=e,i=(0,_().X)("db_ux_chrome"),l=(0,a().IS)((()=>({container:{display:"flex",alignItems:"center",lineHeight:1.2,paddingRight:4,whiteSpace:"nowrap",overflow:"hidden",fontWeight:x().Wy.medium,paddingLeft:0,...t},icon:{width:m().Ev.xs,marginLeft:6,marginRight:6,...o},text:{marginLeft:4,...x().RC}})),[t,o]);return(0,W.jsxs)("div",{style:l.container,...n,children:[i?null:(0,g().M)(l.icon),(0,W.jsx)("span",{style:l.text,children:r})]})}function J(e){const{value:t}=e;return"other"===t.type?(0,W.jsx)(h().sA,{defaultMessage:"Other",id:"database.collectionGroupValue.textGroup.otherValue"}):"alphabet_prefix"===t.type||"exact"===t.type?(0,W.jsx)(W.Fragment,{children:t.value}):void(0,S().HB)(t)}function ee(e){const{groupFormat:t,schema:o}=e,n=(0,a().IS)((()=>({name:{fontWeight:500},status:{fontWeight:500,lineHeight:"normal",overflow:"hidden",paddingRight:6}})),[]),r=o[t.property];if(!r||"status"!==r.type)return null;const i=t.value;if(i.type!==r.type)return null;const{value:l}=i;if(!l)return null;const s=r.options??[],c=r.groups??[];if("by_group"===l.type){const e=c.find((e=>e.name===l.group));return e?(0,W.jsx)(F().RS,{group:e,style:n.name,showIcon:!0,showColor:!0}):null}if("by_option"===l.type){const e=(0,d().jy)(s,l.option),t=e&&c.find((t=>{var o;return null===(o=t.optionIds)||void 0===o?void 0:o.includes(e.id)}));return e?(0,W.jsx)("span",{style:n.status,children:(0,W.jsx)(U().q,{format:p().NY.Medium,isSingle:!0,value:e.value,color:e.color,showRemoveButton:!1,groupColor:null==t?void 0:t.color})}):null}(0,S().HB)(l)}function te(e){const{value:t}=e,o=(0,h().tz)();return(0,W.jsx)(W.Fragment,{children:(0,k().nc)({intl:o,value:t})})}function oe(e){const{value:t,format:o}=e,n=(0,h().tz)();return(0,W.jsx)(W.Fragment,{children:(0,k()._T)({intl:n,value:t,format:o})})}function ne(e){const{groupValue:t,propertySchema:o,style:n}=e,r=(0,a().IS)((()=>({container:{...x().RC,fontWeight:x().Wy.medium,marginRight:3,display:"flex",alignItems:"center",...n},checkboxStyle:{display:"inline-flex",marginRight:6}})),[n]);return"checkbox"!==t.type?null:(0,W.jsxs)("div",{style:r.container,children:[(0,W.jsx)(O().T,{checked:t.value,size:14,disabled:!0,style:r.checkboxStyle}),(0,W.jsx)("span",{children:null==o?void 0:o.name})]})}function re(e){const{groupValue:t,style:o}=e,n=(0,a().IS)((()=>({container:{...q,...x().RC,...o}})),[o]);return t.value&&(0,c().DH)(t)?(0,W.jsx)("div",{style:n.container,children:(0,W.jsx)(te,{value:t.value})}):null}function ie(e){let{groupValue:t,propertySchema:o,style:n}=e;const r=(0,a().IS)((()=>({container:{...q,...n}})),[n]);if("number"!==t.type||!t.value)return null;const i=(null==o?void 0:o.number_format)||y().C4;return(0,W.jsx)("div",{style:r.container,children:(0,W.jsx)(oe,{value:t.value,format:i})})}function ae(e){const{groupFormat:t,schema:o,isHiddenGroup:n,collectionContextStore:r,style:a,uncategorizedIconStyle:l,parentStore:s}=e,c=o[t.property],d=(0,i().K8)((()=>r.collectionStore()),[r]),p=(0,i().K8)((()=>!!(null!=d&&d.isDefined()&&c&&(0,u().nC)(c)&&s)&&(0,M().Vu)({collectionStore:d,property:t.property,propertySchema:c,parentStore:s})),[d,t,c,s]);return c?p?(0,W.jsx)(Q,{style:a,uncategorizedIconStyle:l,isHiddenGroup:n,formattedLabelMessage:(0,W.jsx)(h().sA,{...M().zX.sprintUncategorizedGroup,values:{name:c.name}})}):(0,W.jsx)(Q,{style:a,uncategorizedIconStyle:l,isHiddenGroup:n,formattedLabelMessage:(0,W.jsx)(h().sA,{...k().K0.emptyGroupLabel,values:{name:c.name}})}):null}function le(e){const{style:t,collectionContextStore:o,groupValue:r,parentStore:l}=e,c=(0,i().K8)((()=>{var e;return null===(e=o.collectionViewBlockStore())||void 0===e?void 0:e.id}),[o]),u=(0,n.useMemo)((()=>l&&"location"===r.type&&r.value?V().md.createChildStore(l,r.value):void 0),[l,r.type,r.value]),d=(0,i().K8)((()=>null==u?void 0:u.getParentBlockStore()),[u]),p=(0,i().K8)((()=>c&&(0,w().sj)(c)?o.isInHomeWidgetStore.state?s().y8.PersonalHomeTileTasks:s().y8.PersonalHomePageTasks:s().y8.LocationProperty),[c,o]),g=(0,i().K8)((()=>d?(0,T().Ay)({store:d,fullyQualified:!1,pageVisitSource:p}):void 0),[d,p]),m=(0,i().K8)((()=>null==u?void 0:u.getIcon()),[u]),y=(0,a().IS)((()=>({container:{...t,display:"flex"},icon:{marginTop:2,marginRight:6},title:{fontWeight:x().Wy.medium}})),[t]);return"location"===r.type&&r.value&&l&&u?(0,W.jsxs)(L().A,{href:g,style:y.container,ignoreLocalHoverState:!0,children:[(0,W.jsx)(K().B6,{disabled:!0,icon:m,iconRecordCategory:"collection",size:20,isEmptyPage:!1,style:y.icon}),(0,W.jsx)(z().A,{store:u,underline:!0,style:y.title})]}):null}function se(e){const{groupValue:t,schema:o,groupFormat:r,collectionContextStore:a,style:l,parentStore:s,relatedCollectionAppConfigUri:d}=e,p=o[r.property],g=(0,n.useMemo)((()=>p&&"relation"===p.type?u().Nv(p):void 0),[p]),m=(0,n.useMemo)((()=>s&&g?V().md.createChildStore(s,g):void 0),[s,g]),y=(0,i().K8)((()=>null==m?void 0:m.isDefined()),[m]);return s&&"relation"===t.type&&p&&"relation"===p.type&&g&&m&&t.value?(0,c().zx)(t.value)?d&&y?(0,W.jsx)(ce,{relatedCollectionAppUri:d,groupValueInner:t.value,collectionContextStore:a,collectionPointer:g,targetCollectionStore:m,parentStore:s,style:l}):null:(0,c().WO)(t.value)?(0,W.jsx)(ue,{parentStore:s,groupValueInner:t.value,collectionContextStore:a}):null:null}function ce(e){var t;const{relatedCollectionAppUri:o,groupValueInner:l,collectionContextStore:c,collectionPointer:u,targetCollectionStore:d,parentStore:p,style:g}=e,m=(0,h().tz)(),y=(0,r().v3)(),v=l.value.variable,w=(0,i().K8)((()=>d.isDefined()),[d]),k=(0,i().K8)((()=>(0,j().ax)(c,v,u,d)),[c,v,u,d]),M=(0,i().O$)(B().AppStoreMainEditorCurrentBlockStore),_=(0,i().K8)((()=>k?(0,T().Ay)({store:k,pageVisitSource:s().y8.LinkInPage}):void 0),[k]),I=(0,i().K8)((()=>k?A().wy({environment:y,store:k,mainEditorCurrentBlockStore:M,collectionContextStore:c})??(0,T().Ay)({store:k,pageVisitSource:s().y8.LinkInPage}):void 0),[y,k,M,c]);let V;"current"===v?V=m.formatMessage(b().DZ.tasksCurrentSprintV2ViewNamePrefix):"next"===v?V=m.formatMessage(b().DZ.tasksNextSprintV2ViewNamePrefix):"last"===v?V=m.formatMessage(b().DZ.tasksLastSprintV2ViewNamePrefix):(0,S().HB)(v);const P=null===(t=f().n$[o])||void 0===t?void 0:t[v],F=(0,a().IS)((()=>({noPageStoreContainer:{fontWeight:x().Wy.medium},pageStoreContainer:{display:"flex",alignItems:"center"},text:{fontWeight:x().Wy.medium,marginBottom:.25},linkContainer:{...g,marginLeft:1}})),[g]),G=(0,n.useCallback)((e=>{if(_&&(e.ctrlKey||e.metaKey))return e.preventDefault(),void window.open(_,"_blank");C().os({collectionSettingsStore:c.settingsStore})}),[c.settingsStore,_]);if(w){if(!k)return(0,W.jsx)("div",{style:F.noPageStoreContainer,children:(0,W.jsx)(h().sA,{...null==P?void 0:P.messageDescriptor})});if(k)return(0,W.jsxs)("div",{style:F.pageStoreContainer,children:[(0,W.jsxs)("div",{style:F.text,children:[V,":"]}),(0,W.jsx)(L().A,{style:F.linkContainer,innerStyle:q,href:I,onClick:G,children:(0,W.jsx)(H().A,{format:N().Ay.Format.Medium,blockId:k.id,isSingle:!0,shouldShrink:!0,parentStore:p})})]})}return(0,W.jsx)("div",{style:F.text,children:(0,W.jsx)(h().sA,{...null==P?void 0:P.messageDescriptor})})}function ue(e){const{parentStore:t,groupValueInner:o,collectionContextStore:a,style:l}=e,c=(0,r().v3)(),u=V().Bv.createChildStore(t,o),d=(0,i().O$)(B().AppStoreMainEditorCurrentBlockStore),p=(0,i().K8)((()=>A().wy({environment:c,store:u,mainEditorCurrentBlockStore:d,collectionContextStore:a})??(0,T().Ay)({store:u,pageVisitSource:s().y8.LinkInPage})),[c,u,d,a]),g=(0,i().K8)((()=>(0,T().Ay)({store:u,pageVisitSource:s().y8.LinkInPage})),[u]),m=(0,n.useCallback)((e=>{if(e.ctrlKey||e.metaKey)return e.preventDefault(),void window.open(g,"_blank");C().os({collectionSettingsStore:a.settingsStore})}),[a.settingsStore,g]);return(0,W.jsx)(L().A,{style:l,innerStyle:q,href:p,onClick:m,children:(0,W.jsx)(H().A,{format:N().Ay.Format.Medium,blockId:o.id,isSingle:!0,shouldShrink:!0,parentStore:t})})}function de(e){const{schema:t,currentGroups:o,groupBy:r,groupFormat:i,onChange:a,onClose:l,buttonPopupStore:s,parentStore:c}=e,u=(0,n.useCallback)((e=>{s.reset(),null==a||a(e)}),[s,a]),d=(0,n.useCallback)((()=>{s.reset(),null==l||l()}),[s,l]);return c?(0,W.jsx)(P().p,{groupFormat:i,groupBy:r,currentGroups:o,schema:t,onChange:u,onClose:d,parentStore:c}):null}function pe(e){const{schema:t,currentGroups:o,groupBy:i,groupFormat:l,onChange:s,onClose:c,disabled:g,style:m,buttonPopupStore:y,parentStore:f}=e,{isMobile:v}=(0,r().Y0)(),h=(0,a().IS)((()=>({container:{...q,...m}})),[m]),S=(0,n.useCallback)((e=>{var o;const n=t[l.property];if(!n||!u().lx(n))return null;const r=l.value;if(null===(o=n.options)||void 0===o||!o.length||void 0===r.value||r.type!==n.type)return null;const i=(0,d().jy)(n.options,r.value);return i?(0,W.jsx)(G().A,{style:h.container,disabled:g,...e,children:(0,W.jsx)(U().O,{format:p().NY.Medium,isSingle:!0,value:i.value,color:i.color,showRemoveButton:!1})}):null}),[g,l.property,l.value,t,h.container]),x=(0,n.useCallback)((()=>(0,W.jsx)(de,{schema:t,currentGroups:o,groupBy:i,groupFormat:l,onChange:s,onClose:c,buttonPopupStore:y,parentStore:f})),[t,o,i,l,s,c,y,f]);return(0,W.jsx)(R().Ay,{render:x,renderOrigin:S,disabled:g,buttonPopupStore:y,popupType:v?R().z7.SlideUp:R().z7.Popup,originGap:4})}function ge(e){const{groupValue:t,schema:o,currentGroups:s,groupBy:u,groupFormat:d,onChange:p,onClose:g,disabled:m,style:y,isHiddenGroup:f,buttonPopupStore:h,parentStore:S}=e,{isMobile:x}=(0,r().Y0)(),C=(0,i().O$)(B().AppStoreCurrentSpaceStore),b=(0,I().c)({spaceStore:C,viewedUserStore:void 0,ignoreViewedUserStore:!0}),A=(0,i().K8)((()=>{if(t.value&&(0,c().GG)(t)&&S)return"space_permission_group"===t.value.table?{type:"space_permission_group",value:(0,v().bj)({spacePermissionGroupId:t.value.id,spaceId:t.value.spaceId})}:{type:"actor",value:(0,l().xC)({pointer:t.value,getRecordValue:S.getRecordValue})}}),[t,S]),w=(0,a().IS)((()=>({container:{...q,...y}})),[y]),k=(0,n.useCallback)((e=>A&&S?"space_permission_group"===A.type?(0,W.jsx)(D().UISpacePermissionGroupToken,{parentStore:S,groupPointer:A.value,format:N().Ay.Format.Medium,showRemoveButton:!1,isSingle:!0,disableAvatarTooltip:f,shouldShrink:!0},A.value.id):A.value.asActor?(0,W.jsx)(G().A,{style:w.container,disabled:m,...e,children:(0,W.jsx)(N().Ay,{format:N().Ay.Format.Medium,actor:A.value,showRemoveButton:!1,isSingle:!0,disableAvatarTooltip:f,shouldShrink:!0,hasPersonHoverCard:b})}):null:null),[A,S,m,f,w.container,b]),j=(0,n.useCallback)((()=>(0,W.jsx)(de,{schema:o,currentGroups:s,groupBy:u,groupFormat:d,onChange:p,onClose:g,buttonPopupStore:h,parentStore:S})),[o,s,u,d,p,g,h,S]);return(0,c().GG)(t)&&t.value&&S&&A&&("actor"!==A.type||A.value.asActor)?(0,W.jsx)(R().Ay,{renderOrigin:k,render:j,disabled:m,buttonPopupStore:h,popupType:x?R().z7.SlideUp:R().z7.Popup,originGap:4}):null}function me(e){const{groupValue:t,schema:o,currentGroups:i,groupBy:l,groupFormat:s,onChange:u,onClose:d,disabled:p,style:g,buttonPopupStore:m,parentStore:y}=e,{isMobile:f}=(0,r().Y0)(),v=(0,a().IS)((()=>({container:{...$,...x().RC,...g}})),[g]),h=(0,n.useCallback)((e=>(0,c().kO)(t)&&void 0!==t.value?(0,W.jsx)(G().A,{style:v.container,disabled:p,...e,children:(0,W.jsx)(J,{value:t.value})}):null),[p,t,v.container]),S=(0,n.useCallback)((()=>(0,W.jsx)(de,{schema:o,currentGroups:i,groupBy:l,groupFormat:s,onChange:u,onClose:d,buttonPopupStore:m,parentStore:y})),[o,i,l,s,u,d,m,y]);return(0,c().kO)(t)&&void 0!==t.value?"exact"===t.value.type?(0,W.jsx)(R().Ay,{renderOrigin:h,render:S,disabled:p,buttonPopupStore:m,popupType:f?R().z7.SlideUp:R().z7.Popup,originGap:4}):(0,W.jsx)("div",{style:$,children:(0,W.jsx)(J,{value:t.value})}):null}},636740:(e,t,o)=>{function n(e){const{dateRangeStart:t,dateRangeEnd:o,collectionContextStore:n}=e;n.dateRangeStartStore.setState(t),n.dateRangeEndStore.setState(o)}o.d(t,{r:()=>n})},701311:(e,t,o)=>{o.d(t,{Q:()=>p,d:()=>g});o(898992),o(354520);var n=()=>o(592269),r=()=>o(289915),i=()=>o(921598),a=()=>o(416504),l=()=>o(2220),s=()=>o(274375),c=()=>o(681445),u=()=>o(476492),d=()=>o(765957);function p(e){return`${i().RO}_${e}`}function g(e){var t,o,i;const{collectionContextStore:p,environment:g,groupFormat:m,groupBy:y,temporaryViewState:f,title:v}=e,h=p.collectionViewBlockStore();if(!h)return;const S=p.normalizedSchemaStore.state,x=p.normalizedFormatStore.state,C=p.normalizedQueryStore.state,b=(null===(t=d().default.state.currentUserSettingsStore)||void 0===t?void 0:t.getSettingsStore().getKeyStore("time_zone").getValue())||(0,a().P)(),A=(0,n().K8)({schema:S,groupBy:y,group:m,propertyMapping:void 0,timeZone:b});if(!A)return;const w=y.property,k=(0,s().Q)(h,w),j=(null===(o=f.combinatorFilter)||void 0===o?void 0:o.value)??(null==C?void 0:C.filter),M={type:"table",parent_id:h.pointer.id,parent_table:h.pointer.table,alive:!0,space_id:h.getSpaceId(),format:{is_unlisted:!0,collection_pointer:x.collection_pointer,table_properties:k,property_filters:(null==f||null===(i=f.propertyFilters)||void 0===i?void 0:i.value)??(null==x?void 0:x.property_filters)},query2:{...C,filter:j?(0,r().GV)([j,A]):(0,r().GV)([A])}},T=(0,u().sl)(p);(0,l().u)({environment:g,event:{eventName:"collection_chart_drilldown_click",eventProperties:{...T,drilldown_type:"grouped",from:"board_pinned_group"}}}),c().S.openCollectionDrilldownView({collectionViewValue:M,collectionViewBlockStore:h,viewsModuleContext:p.viewsModuleContextStore.state,title:v})}},760077:(e,t,o)=>{o.d(t,{U:()=>a});var n=()=>o(246826),r=()=>o(751156),i=()=>o(407031);function a(e){const{viewToDuplicateStore:t,collectionContextStore:o,collectionViewStore:a,environment:l,temporaryStore:s}=e,c=o.collectionStore(),u=t.getType();if(!u||!c)return;const d=t.getName(),p=t.getPageSort(),g=t.getFormat(),m=t.getKeyStore("query2").getValue();r().createAndCommit({userAction:"CollectionSettingsDuplicateExistingView.duplicateViewSettings",environment:l,canUndo:!0,perform:e=>{n().zv({store:s??a,data:{name:d,type:u,page_sort:p,format:{...g,collection_pointer:c.pointer},query2:m},transaction:e})}}),(0,i().S)({collectionContextStore:o})}},786452:(e,t,o)=>{o.d(t,{y:()=>a});var n=()=>o(921598),r=()=>o(436696),i=()=>o(896628);function a(e){const{environment:t,collectionContextStore:o,transaction:a,groupByKey:l,groupsFormatKey:s,sortType:c}=e;if("chart_config"===l)return;const u=(0,n().H2)(o.normalizedFormatStore.state,l,s),d=o.collectionViewStore();if(!u||!d)return;if((0,n().Nf)(u).includes(c)){if("formula"===u.type){const e={...u,groupBy:{...u.groupBy,sort:{type:c}}};i().zA({stores:[d],update:{[l]:e},transaction:a})}else i().zA({stores:[d],update:{[l]:{...u,sort:{type:c}}},transaction:a});(0,r().X)({environment:t,collectionContextStore:o,action:"update_group_sort"})}}},871151:(e,t,o)=>{o.d(t,{p:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.37 2.95 13.26 14.11",svg:(0,o(474848).jsx)("path",{d:"M3.925 2.95a.55.55 0 1 0 0 1.1h12.15a.55.55 0 1 0 0-1.1zm0 7.767a.55.55 0 0 0 0 1.1h12.15a.55.55 0 1 0 0-1.1zm-.55-4.234a1 1 0 0 1 1-1h1.8a1 1 0 0 1 1 1v1.8a1 1 0 0 1-1 1h-1.8a1 1 0 0 1-1-1zm1.1.1v1.6h1.6v-1.6zm4.625-1.1a1 1 0 0 0-1 1v1.8a1 1 0 0 0 1 1h1.8a1 1 0 0 0 1-1v-1.8a1 1 0 0 0-1-1zm.1 2.7v-1.6h1.6v1.6zm3.625-1.7a1 1 0 0 1 1-1h1.8a1 1 0 0 1 1 1v1.8a1 1 0 0 1-1 1h-1.8a1 1 0 0 1-1-1zm1.1.1v1.6h1.6v-1.6zm-9.55 6.667a1 1 0 0 0-1 1v1.8a1 1 0 0 0 1 1h1.8a1 1 0 0 0 1-1v-1.8a1 1 0 0 0-1-1zm.1 2.7v-1.6h1.6v1.6zm3.625-1.7a1 1 0 0 1 1-1h1.8a1 1 0 0 1 1 1v1.8a1 1 0 0 1-1 1H9.1a1 1 0 0 1-1-1zm1.1.1v1.6h1.6v-1.6zm4.625-1.1a1 1 0 0 0-1 1v1.8a1 1 0 0 0 1 1h1.8a1 1 0 0 0 1-1v-1.8a1 1 0 0 0-1-1zm.1 2.7v-1.6h1.6v1.6z"})},r=(0,o(340498).wt)("squareGridBelowLines",n)},893952:(e,t,o)=>{o.d(t,{A:()=>l});o(296540);var n=()=>o(484714),r=()=>o(401497),i=()=>o(381349),a=o(474848);const l=function(e){const{color:t}=e;return(0,a.jsx)(o(760217).A,{...e,icon:(0,a.jsx)(s,{color:t}),title:(0,o(27178).mN)(t)})};function s(e){let{color:t}=e;const o=(0,r().DP)(),l=(0,n().v3)(),s=(0,i().LD)(o,t);return(0,a.jsx)("div",{style:{width:l.device.isMobile?24:18,height:l.device.isMobile?24:18,background:s.menuBackgroundColor,color:s.textColor,boxShadow:o.innerBorderBoxShadow,borderRadius:4}})}},916260:(e,t,o)=>{o.d(t,{o:()=>r});var n=()=>o(896628);function r(e){const{collectionContextStore:t,newGroups:o,groupsFormatKey:r,transaction:i}=e,a=t.collectionViewStore();a&&n().zA({stores:[a],update:{[r]:o},transaction:i})}},939466:(e,t,o)=>{o.d(t,{m:()=>s});o(898992),o(354520),o(581454);var n=()=>o(921598),r=()=>o(534177),i=()=>o(436696),a=()=>o(751156),l=()=>o(916260);function s(e){var t;const{environment:o,collectionContextStore:s,currentGroups:c,groupsFormatKey:u,groupFormat:d,action:p}=e,g="toggle_group_pin"===p&&"board_columns"!==u,m=(null===(t=s.collectionViewStore())||void 0===t?void 0:t.getFormatStore().getKeyStore(u).getValue())??[],y=new Map;for(const r of m)y.set((0,n().Ix)(r),r);const f=new Map;for(const r of c)f.set((0,n().Ix)(r),r);const v=c.filter((e=>!y.has((0,n().Ix)(e)))),h=v.length>0?[...m,...v]:m;if(!s.permissionScopesStore.state.canConfigureBlock||g)return h;const S=y.get((0,n().Ix)(d))??f.get((0,n().Ix)(d))??(0,n().QF)(d.property,d.value),x=h.map((e=>(0,n().Mn)(e,S)?"toggle_group_pin"===p?{...S,pinned:!S.pinned||void 0}:"toggle_group_visibility"===p?{...S,hidden:!S.hidden}:((0,r().ub)(p),S):e));return a().createAndCommit({userAction:"CollectionSettingsViewGroup.handleToggleGroupFormat",environment:o,canUndo:!0,perform:e=>{(0,l().o)({collectionContextStore:s,newGroups:x,groupsFormatKey:u,transaction:e})}}),(0,i().X)({environment:o,collectionContextStore:s,action:"toggle_group_pin"}),x}},975318:(e,t,o)=>{o.d(t,{D:()=>A});o(898992),o(823215),o(354520),o(581454);var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),l=()=>o(584262),s=()=>o(959013),c=()=>o(160568),u=()=>o(557281),d=()=>o(751156),p=()=>o(284371),g=o(474848);const m=n.memo((function(e){const{prefix:t,collectionName:o}=e,n=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",fontWeight:p().Wy.medium,color:e.text.secondary,paddingLeft:8,paddingRight:8},databaseTitle:{...p().RC}})),[]);return(0,g.jsxs)("div",{style:n.container,children:[t,(0,g.jsxs)("span",{style:n.databaseTitle,children:[" ",o]})]})}));var y=()=>o(492414),f=()=>o(722872);const v=n.memo((function(e){const t=(0,r().v3)(),i=(0,s().tz)(),l=(0,a().IS)((e=>({link:{borderRadius:6,height:24,width:24,display:"flex"},button:{height:24,width:24,fill:e.icon.tertiary},icon:{width:20,height:20}})),[]),c=(0,n.useCallback)((()=>{o(148024).FH(t,{from:e.helpButtonContext})}),[t,e.helpButtonContext]);return(0,g.jsx)(o(187485).A,{href:e.href,external:!0,style:l.link,onClick:c,children:(0,g.jsx)(o(285790).A,{icon:o(406533).questionMarkCircleIcon,style:l.button,iconStyle:l.icon,ariaLabel:i.formatMessage({id:"helpButton.ariaLabel",defaultMessage:"Help"})})})}));var h=()=>o(763996),S=()=>o(419357),x=()=>o(939740),C=()=>o(89924);const b=(0,s().YK)({filterPlaceholder:{id:"collectionPicker.searchBarFilter.text",defaultMessage:"Filter…"}}),A=n.memo((function(e){const{collectionStore:t,isOverlay:l,onEmptyEnter:c,onEmptyPageClick:u,onCancelClick:d,canConfigureCollection:p,locked:m,onTemplateClick:y}=e,v=(0,r().Y0)(),[h,S]=(0,n.useState)(""),x=(0,i().uB)(void 0,o(970585).A),b=(0,i().K8)((()=>t.getTemplatePageStores().filter((e=>e.getAlive()))),[t]),A=(0,i().K8)((()=>b.every((e=>e.isReady()))),[b]),M=(0,i().K8)((()=>l&&null!=h&&h.length?(0,o(778078).Ay)(h,b,(e=>String(e.getProperties().title)??"")):b),[b,h,l]),T=(0,a().IS)((e=>({container:{fontSize:14,padding:v.isMobile?"12px 16px":"0 12px 4px 12px",color:e.text.tertiary,wordBreak:"keep-all",...v.isMobile&&{background:e.contentBackground,boxShadow:`0 1px 0 ${e.regularDividerColor}`,marginBottom:1}}})),[v.isMobile]);if(!A)return null;if(l){const e=b.length>6,n=v.isMobile?{menuType:f().gu.Modal,title:(0,g.jsx)(s().sA,{defaultMessage:"Database templates",id:"database.mobileTemplatesMenu.title"}),left:(0,g.jsx)(o(480095).CancelMenuText,{}),onClickLeft:d}:{menuType:f().gu.Popup,width:360};return(0,g.jsxs)(o(928600).A,{...n,header:(0,g.jsx)(w,{collectionStore:t}),children:[0===b.length&&(0,g.jsx)(C().A,{children:(0,g.jsx)("div",{style:T.container,children:(0,g.jsx)(s().sA,{defaultMessage:"Create a reusable page template for this database.",id:"database.emptyTemplatesList.info"})})}),e?(0,g.jsx)(k,{templateInputValue:h,setTemplateInputValue:S}):null,(0,g.jsx)(j,{collectionStore:t,onEmptyEnter:c,onEmptyPageClick:u,onCancelClick:d,canConfigureCollection:p,isOverlay:l,locked:m,onTemplateClick:y,menuListStore:x,templateInputValue:h,filteredTemplatePageStores:M,draggable:!(e&&h)})]})}return(0,g.jsx)(j,{collectionStore:t,onEmptyEnter:c,onEmptyPageClick:u,onCancelClick:d,canConfigureCollection:p,isOverlay:l,locked:m,onTemplateClick:y,menuListStore:x,templateInputValue:h,filteredTemplatePageStores:M,draggable:!0})})),w=n.memo((function(e){const{collectionStore:t}=e,{isMobile:n}=(0,r().Y0)(),l=(0,s().tz)(),c=(0,o(46986).x6)(),u=(0,i().K8)((()=>(0,o(697650).Qo)({collectionStore:t,intl:l,isWorkflowsContainerWithCreationEnabled:c})),[t,l,c]),d=(0,a().IS)((()=>({container:{marginTop:6}})),[]);return n?null:(0,g.jsx)(o(678553).Ay,{style:d.container,title:(0,g.jsx)(m,{prefix:(0,g.jsx)(s().sA,{id:"database.templatesList.templatesFor",defaultMessage:"Templates for"}),collectionName:u}),right:(0,g.jsx)(v,{helpButtonContext:"collection_templates_menu",href:(0,o(836251).xS)("guides.databaseTemplates")})})})),k=n.memo((function(e){const{templateInputValue:t,setTemplateInputValue:i}=e,{isMobile:l,isAndroid:c}=(0,r().Y0)(),u=(0,s().tz)(),d=(0,n.useCallback)((e=>i(e.currentTarget.value)),[i]),p=(0,a().IS)((()=>({container:{margin:l?0:"10px 0"},input:{...c&&{borderBottom:"none"}}})),[c,l]);return(0,g.jsx)("div",{style:p.container,children:(0,g.jsx)(S().Ay,{value:t,focusInitial:!l||void 0,placeholder:u.formatMessage(b.filterPlaceholder),showClearButton:!0,inputLeft:(0,g.jsx)(S().Zf,{icon:o(207207).J}),onChange:d,style:p.input})})})),j=n.memo((function(e){const{filteredTemplatePageStores:t,draggable:a,collectionStore:s,onEmptyEnter:p,onEmptyPageClick:m,onCancelClick:f,canConfigureCollection:v,isOverlay:S,locked:b,onTemplateClick:A,menuListStore:w,templateInputValue:k}=e,j=(0,r().v3)(),{isMobile:T}=(0,r().Y0)(),_=(0,n.useContext)(o(175116).p2),I=(0,n.useContext)(o(484792).n),B=(0,i().K8)((()=>(0,o(611371).EF)(j)),[j]),V=(0,n.useCallback)((e=>{w.unsetFocus(),d().createAndCommit({userAction:"CollectionTemplatePicker.handleCollectionTemplatesReorder",environment:j,canUndo:!0,perform:t=>u().lU({collectionStore:s,newTemplateIds:e,transaction:t})})}),[j,s,w]),P=(0,n.useCallback)((()=>{var e;B&&(p(),c().ki(j,{template_type:"empty_page",from:"collections_template_picker",is_keyboard:!0,collection_id:s.id,collection_view_id:null==_||null===(e=_.collectionViewStore())||void 0===e?void 0:e.id}))}),[j,s,p,_,B]),F=(0,n.useCallback)((e=>{B&&(m(e.event),c().ki(j,{template_type:"empty_page",from:"collections_template_picker",is_keyboard:"keydown"===e.event.type,..._&&(0,o(476492).sl)(_)}))}),[B,_,j,m]),G=(0,n.useCallback)((()=>{var e;if(!B)return;const{performResult:t}=d().createAndCommit({userAction:"CollectionTemplatePicker.newPage",environment:j,canUndo:!0,perform:e=>u().bI({environment:j,collectionStore:s,transaction:e,title:k})});if(t){const{mainEditorCurrentBlockStore:e}=o(765957).default.state,n=e?(0,y().Ay)({store:e,peekViewBlockId:t.id,fullyQualified:!1,pageVisitSource:l().y8.Create}):(0,y().Ay)({store:t,fullyQualified:!1,pageVisitSource:l().y8.Create});I?I(n):o(435009).oo({environment:j,url:n})}c().er(j,{collection_id:s.id,collection_view_id:null==_||null===(e=_.collectionViewStore())||void 0===e?void 0:e.id}),null==f||f()}),[B,j,s,_,k,f,I]),R=(0,n.useMemo)((()=>({key:"create-template",render:e=>(0,g.jsx)(M,{isOverlay:S,locked:b,menuListItemProps:e}),action:G})),[G,S,b]),L=(0,i().K8)((()=>null==_?void 0:_.defaultPageTemplateStore.state),[_]),K=(0,i().K8)((()=>({key:"empty",render:e=>0===t.length||""!==k?null:(0,g.jsx)(h().K,{collectionStore:s,canConfigureCollection:v,isOverlay:S,templateStore:void 0,isMobile:T,locked:b||!v,draggable:!0,isDefault:void 0===(null==L?void 0:L.id),onCancelClick:f,...e}),action:F})),[v,s,null==L?void 0:L.id,T,F,S,b,f,k,t.length]),z=(0,n.useCallback)((e=>{const t=e.getAutomationStore(),r=null!=t&&t.isActive()?t.getRecurrence():void 0,i=t&&!t.canEdit(),l="disabled_duplication"===(null==t?void 0:t.getStatus())||"disabled_inactive_space"===(null==t?void 0:t.getStatus()),c={key:e.id,render:t=>(0,n.createElement)(h().K,{...t,key:e.id,isOverlay:S,collectionStore:s,canConfigureCollection:v,templateStore:e,isMobile:T,locked:b,onCancelClick:f,draggable:a,isDefault:(null==L?void 0:L.id)===e.id,recurrence:r,recurrenceDisabled:l,recurrenceButtonDisabled:i}),action:t=>{B&&A({templateStore:e,isKeyboard:"keydown"===t.event.type,useCrdt:(0,o(518736).D8)(s.getSpaceStore())})}};return c}),[v,B,s,null==L?void 0:L.id,a,T,S,b,f,A]),O=(0,i().K8)((()=>{const e=t.map((e=>e.id)),n=[0!==t.length?{key:"templates",render:t=>{if(0===t.children.length)return null;const n=t.children.slice(0,t.children.length-1),r=t.children[t.children.length-1];return(0,g.jsx)(C().A,{...t,disableDesktopPadding:!S,disableMobileBorders:!0,children:(0,g.jsxs)(g.Fragment,{children:[T||b||!v?n.map(((e,t)=>n[t])):(0,g.jsx)(o(439264).Ay,{direction:"vertical",keys:e,disabled:!a,renderKey:t=>n[e.indexOf(t)],onDrop:V}),r]})})},items:[...t.map(z),K]}:null,v?{key:"create-template",render:e=>(0,g.jsx)(C().A,{topBorder:S,disableDesktopPadding:!S,disableMobileBorders:!0,...e}),items:[R]}:null];return n.filter((e=>null!==e))}),[t,z,K,v,R,S,T,b,a,V]);return(0,g.jsx)(x().Ay,{type:x().Oh.Vertical,store:w,sections:O,onEmptyEnter:P,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,resetFocusOnMouseOut:!0})})),M=n.forwardRef((function(e,t){const{menuListItemProps:n,isOverlay:r,locked:i}=e,a=(0,g.jsx)(s().sA,{defaultMessage:"New template",id:"database.templateView.newTemplateButton"});return r?(0,g.jsx)(o(274652).o,{title:a,color:"secondary",...n}):(0,g.jsx)(o(286611).J,{title:a,icon:(0,o(617668).plusIcon)(),type:"new_template",format:r?"collection-overlay":"page-menu-item",locked:i,...n})}))},989992:(e,t,o)=>{o.d(t,{p:()=>r});var n=()=>o(679924);function r(e,t){(0,n().v)(e,"open_collection_as_page",t)}}}]);