"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[2411,5834,9150,15529,15961,34208,84358],{346:(e,t,n)=>{n.d(t,{MG:()=>m,T1:()=>g,a1:()=>b,dt:()=>f,kg:()=>h,lC:()=>v,n_:()=>y});var o=n(296540),i=()=>n(484714),r=()=>n(56366),a=()=>n(187174),s=()=>n(645873),l=()=>n(941463),d=()=>n(441199),c=()=>n(749687),u=()=>n(737230),p=()=>n(756114);const g=new(s().O2)("PerformanceToolbar",(()=>Promise.all([n.e(16471),n.e(92845),n.e(84468),n.e(48632),n.e(75078),n.e(95168),n.e(36908),n.e(21194),n.e(23930),n.e(61347),n.e(45624)]).then(n.bind(n,462407)))),m=(0,s()._h)(g,(e=>e.PerformanceToolbar)),f=(0,s()._h)(g,(e=>e.PerformanceToolbarSettings));function h(){const e=(0,i().v3)();return(0,r().K8)((()=>(0,p().D)(e,e.RouterStore.state)),[e])}function y(){const e=(0,i().v3)(),t=x("PerformanceToolbarStore"),n=x("isPerformanceToolbarVisible");return(0,r().K8)((()=>!(!t||!n)&&n(e,e.RouterStore.state,t.state)),[n,e,t])}function v(){const e=x("PerformanceToolbarStore");return(0,r().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function b(){const e=(0,i().v3)(),t=x("createPerformanceToolbarMouseListeners"),n=x("PerformanceToolbarStore"),{sidebarExpanded:a,sidebarWidth:s,secondarySidebarExpanded:p,secondarySidebarWidth:g,updateSidebarExpanded:m,updateSidebarWidth:f}=(0,r().K8)((()=>({sidebarExpanded:c().sidebarExpandedStore.state,sidebarWidth:c().sidebarWidthStore.state,secondarySidebarExpanded:d().default.isOpen(),secondarySidebarWidth:l().Ay.getWidth(),updateSidebarExpanded:u().Ay.state.expanded,updateSidebarWidth:u().Ay.state.width})),[]);return(0,o.useEffect)((()=>{if(n&&t)return t(e,(e=>n.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),a,s,p,g,m,f)}),[t,e,n,a,s,p,g,m,f])}function x(e){const t=h(),[{value:n}]=(0,a().Yb)((()=>t?g.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return n}},24184:(e,t,n)=>{n.d(t,{e:()=>o});const o=(0,n(340498).xh)("arrowCounterClockwise",{default:{loader:()=>n.e(79311).then(n.bind(n,579311))},small:{loader:()=>n.e(49121).then(n.bind(n,449121))},mini:{loader:()=>n.e(48591).then(n.bind(n,248591))},large:{loader:()=>n.e(95490).then(n.bind(n,873109))}})},29037:(e,t,n)=>{n.r(t),n.d(t,{checkmarkIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.92 3.91 12.17 12.18",svg:(0,n(474848).jsx)("path",{d:"M15.784 4.002a.625.625 0 0 1 .214.857L9.445 15.784a.625.625 0 0 1-1.01.085l-4.37-5.098a.625.625 0 0 1 .948-.814l3.806 4.44 6.109-10.181a.625.625 0 0 1 .857-.214"})},i=(0,n(340498).wt)("checkmark",o)},56565:(e,t,n)=>{n.r(t),n.d(t,{WorkflowTemplatesOnboardingModalWithErrorBoundary:()=>Pn});var o=n(296540),i=()=>n(484714),r=()=>n(56366),a=()=>n(534177),s=()=>n(2220),l=()=>n(646447),d=()=>n(84817),c=()=>n(107683),u=()=>n(112995),p=()=>n(691298),g=()=>n(217429),m=()=>n(466934),f=()=>n(458097),h=(n(898992),n(354520),n(581454),()=>n(203066)),y=()=>n(153321),v=()=>n(401497),b=()=>n(663077),x=()=>n(919709),S=()=>n(959013),w=n(474848);function k(){const e=(0,v().IS)((()=>({badge:{marginLeft:6,display:"inline"}})),[]);return(0,w.jsx)(n(464708).A,{style:e.badge,content:(0,w.jsx)(S().sA,{defaultMessage:"AI",id:"database.property.aiAutofillEnabledIndicator"})})}var j=()=>n(710149),C=()=>n(664565),M=()=>n(58293),P=()=>n(102777),A=()=>n(110165),T=()=>n(725614),I=()=>n(285790),_=()=>n(545805),B=()=>n(524702),L=()=>n(38337),G=()=>n(847743),D=()=>n(301421),R=(n(16280),n(672577),n.n(n(794148))),W=()=>n(449506),N=()=>n(687681),E=()=>n(436572),z=()=>n(623580),F=()=>n(7674),V=()=>n(342461);const O=(0,S().YK)({sendFeedbackButton:{id:"setupGenerator.sendFeedbackButton",defaultMessage:"Send feedback"},feedbackPlaceholder:{id:"setupGenerator.feedbackPlaceholder",defaultMessage:"Share your feedback"},submitSuccess:{id:"setupGenerator.submitSuccess",defaultMessage:"Your feedback has been submitted, thanks!"}});function H(e){const{onSubmit:t}=e,n=(0,S().tz)(),[i,r]=(0,o.useState)(""),a=(0,o.useCallback)((()=>{t(i),E().D6({label:n.formatMessage(O.submitSuccess)})}),[i,n,t]);return(0,w.jsx)(F().tf,{header:(0,w.jsx)(F().YA,{iconAndTitle:(0,w.jsx)("div",{style:{padding:"0 24px"},children:(0,w.jsx)(F().ZQ,{iconGroup:N().u,title:(0,w.jsx)(S().sA,{id:"setupGenerator.feedbackModal.title",defaultMessage:"How can we improve this result?"})})}),description:(0,w.jsx)(S().sA,{id:"setupGenerator.feedbacModal.description",defaultMessage:"Your feedback helps Notion AI improve. The messages from your chat, the search results, and your feedback will be sent to Notion to help improve Notion AI."})}),footer:(0,w.jsx)(F().aO,{layout:"vertical",primaryButtons:[{label:n.formatMessage(O.sendFeedbackButton),onClick:a,isDisabled:0===i.length}]}),children:(0,w.jsx)(d().Y1,{padding:2,children:(0,w.jsx)(z().A,{placeholder:n.formatMessage(O.feedbackPlaceholder),textarea:!0,focusInitial:!0,value:i,onChange:e=>r(e.target.value)})})})}function K(e){const{traceId:t,spaceId:n,transcript:a}=e??{},[l,d]=(0,o.useState)(void 0),u=(0,r().O$)(f().A),p=(0,i().v3)(),g=a.find((e=>"config"===e.type));if(!g)throw new Error("No config step found");return[l,(0,o.useCallback)((async e=>{if(d(e),void 0!==e&&(R()(u.open,"Trying to submit feedback while modal is not open"),(0,s().u)({environment:p,event:{eventName:"workflow_template_onboarding_feedback",eventProperties:{feedback_type:e,...(0,m().gM)(u)}}})),n&&(W().callApi({eventName:"saveInferenceTranscriptFeedback",environment:p,data:{spaceId:n,type:g.value.type,traceId:t,feedbackType:e,userComment:void 0}}),"thumbs_down"===e)){const e=await async function(){return await(0,V().showAsyncModal)((e=>(0,w.jsx)(c().s,{isOpen:e.isOpen,onDismiss:e.onDismiss,onClosed:e.onClosed,areaConstraint:{width:{type:"fixed",length:400}},render:()=>(0,w.jsx)(H,{onSubmit:e.resolve})})))}();e&&W().callApi({eventName:"saveInferenceTranscriptFeedback",environment:p,data:{spaceId:n,type:g.value.type,traceId:t,feedbackType:"thumbs_down",userComment:e}})}}),[p,n,t,g,u])]}var Y=()=>n(24184),U=()=>n(340498);const $=(0,U().xh)("handThumbsDown",{default:{loader:()=>n.e(65728).then(n.bind(n,765728))},small:{loader:()=>n.e(66230).then(n.bind(n,243849))},mini:{loader:()=>n.e(34526).then(n.bind(n,534526))},large:{loader:()=>n.e(28366).then(n.bind(n,528366))}}),q=(0,U().xh)("handThumbsDownFill",{default:{loader:()=>n.e(56051).then(n.bind(n,756051))},small:{loader:()=>n.e(64477).then(n.bind(n,864477))},mini:{loader:()=>n.e(3723).then(n.bind(n,503723))},large:{loader:()=>n.e(78113).then(n.bind(n,978113))}}),Q=(0,U().xh)("handThumbsUp",{default:{loader:()=>n.e(68563).then(n.bind(n,168563))},small:{loader:()=>n.e(48861).then(n.bind(n,548861))},mini:{loader:()=>n.e(60747).then(n.bind(n,860747))},large:{loader:()=>n.e(19617).then(n.bind(n,619617))}}),X=(0,U().xh)("handThumbsUpFill",{default:{loader:()=>n.e(68748).then(n.bind(n,668748))},small:{loader:()=>n.e(13450).then(n.bind(n,113450))},mini:{loader:()=>n.e(58034).then(n.bind(n,658034))},large:{loader:()=>n.e(32594).then(n.bind(n,332594))}});var J=()=>n(460292),Z=()=>n(859428),ee=()=>n(962730);const te=(0,S().YK)({negativeFeedbackTooltip:{defaultMessage:"Share negative feedback with Notion",id:"setupGenerator.negativeFeedbackTooltip"},positiveFeedbackTooltip:{defaultMessage:"Share positive feedback with Notion",id:"setupGenerator.positiveFeedbackTooltip"},retry:{defaultMessage:"Revert",id:"setupGenerator.retry"}});function ne(e){const{value:t,onChange:n,canRetry:o,onClickRetry:i,variantName:r}=e,a=(0,S().tz)();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(oe,{type:"thumbs_up",isSelected:"thumbs_up"===t,variantName:r,iconGroup:"thumbs_up"===t?X:Q,onClick:n}),(0,w.jsx)(oe,{type:"thumbs_down",isSelected:"thumbs_down"===t,variantName:r,iconGroup:"thumbs_down"===t?q:$,onClick:n}),o?(0,w.jsx)(Z().A,{renderTooltip:()=>(0,w.jsx)("div",{children:(0,w.jsx)(S().sA,{...te.retry})}),placement:ee().W.Bottom,render:e=>(0,w.jsx)(I().A,{onClick:i,icon:()=>(0,w.jsx)(J().Q,{iconGroup:Y().e,variantName:r,colorName:"secondary"}),ariaLabel:a.formatMessage(te.retry),...e})}):null]})}function oe(e){const{type:t,onClick:n,isSelected:i,iconGroup:r,variantName:s}=e,l=(0,S().tz)(),d=(0,o.useCallback)((()=>{n(i?void 0:t)}),[n,i,t]),c=(0,o.useMemo)((()=>l.formatMessage(function(e){switch(e){case"thumbs_up":return te.positiveFeedbackTooltip;case"thumbs_down":return te.negativeFeedbackTooltip;default:(0,a().HB)(e)}}(t))),[l,t]);return(0,w.jsx)(Z().A,{renderTooltip:()=>(0,w.jsx)("div",{children:c}),placement:ee().W.Bottom,render:e=>(0,w.jsx)(I().A,{onClick:d,icon:()=>(0,w.jsx)(J().Q,{iconGroup:r,variantName:s,colorName:i?"uiBluePrimary":"secondary"}),ariaLabel:c,...e})})}const ie={type:"none"};function re(e){const{onSubmit:t,value:n,onChange:r,canPressEnter:a,canRetry:s,feedbackArgs:l,onClickRetry:d,onFocus:c,onBlur:u,onClickStop:p,isBusy:g,hideChatFeedback:m}=e,f=(0,i().v3)(),h=(0,S().tz)(),y=function(){const e=20,t=24;return(0,v().IS)((n=>{const o={boxShadow:n.inputBoxShadow,backgroundColor:n.surface.elevated,borderRadius:16,padding:"8px 8px 8px 12px",gap:"4px 8px",display:"flex",flexShrink:0,overflow:"hidden",height:"100%"};return{oneLineInput:{...o,flexDirection:"row",alignItems:"center",borderRadius:50},multiLineInput:{...o,display:"grid",gridTemplate:"1fr auto"},textWrapper:{paddingRight:4,flexGrow:1,display:"flex",fontSize:14,minWidth:0,overflow:"auto"},textContainer:{maxWidth:"100%",width:"100%",flexGrow:1,minWidth:0,height:"100%"},buttonWrapper:{minHeight:22,display:"flex",justifyContent:"flex-end",alignItems:"center",flexShrink:0,marginLeft:"auto"},icon:{height:e,width:e},stopIcon:{height:e,width:e,fill:n.icon.primary},button:{pointerEvents:"auto",height:Math.max(e,t),width:Math.max(e,t),borderRadius:"100%"}}}),[])}(),{store:b,setValue:k}=(0,G().AI)({initialValue:n,onChange:r});(0,o.useEffect)((()=>{const e=b.getValue();n!==e&&k(n)}),[n,k,b]);const j=(0,x().q4_)(n).length,C=!(0,x().w9s)(n),[M,R]=K(l),W=(0,o.useCallback)((()=>{T().clear({environment:f}),null==u||u()}),[f,u]),N=(0,o.useMemo)((()=>h.formatMessage({id:"setupGenerator.followUp.placeholder",defaultMessage:"Add or make changes..."})),[h]),E=(0,o.useCallback)((e=>{if(e.target===e.currentTarget){const t=D().n.findEditableWithStore(b);t&&t.handleClick(e)}}),[b]),z=j>=35;return(0,w.jsx)(_().A,{debugName:"AiFollowUpInput",capture:!0,children:(0,w.jsxs)("div",{className:L().CCX,style:z?y.multiLineInput:y.oneLineInput,onClick:E,children:[(0,w.jsx)("div",{style:y.textWrapper,children:(0,w.jsx)(B().A,{inPageFind:ie,style:y.textContainer,store:b,disabled:g,disableMentions:!0,placeholder:N,disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:!0,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableSuggestEdit:!0,disableUpDownArrows:!0,disableEnter:!C||!a||g,onEnter:t,pasteBehavior:"inline",onFocus:c,onBlur:W})}),(0,w.jsxs)("div",{style:y.buttonWrapper,children:[C||g||m?null:(0,w.jsx)(ne,{value:M,onChange:R,onClickRetry:d,canRetry:s,variantName:"small"}),C&&!g?(0,w.jsx)(I().A,{icon:P().b,onClick:t,color:C?"uiBluePrimary":"secondary",disabled:!C,ariaLabel:h.formatMessage({id:"aiFollowUpInput.submit",defaultMessage:"Submit"}),style:y.button,iconStyle:y.icon}):null,g?(0,w.jsx)(I().A,{icon:A().L,onClick:p,iconStyle:y.stopIcon,ariaLabel:h.formatMessage({id:"aiFollowUpInput.stop",defaultMessage:"Stop"}),style:y.button}):null]})]})})}var ae=()=>n(895432);const se=(0,S().YK)({default:{id:"setupGenerator.loading.default",defaultMessage:"Designing database"},addingProperty:{id:"setupGenerator.loading.addingProperty",defaultMessage:"Adding {propertyName}"},addingView:{id:"setupGenerator.loading.addingView",defaultMessage:"Adding {viewName}"},addingPages:{id:"setupGenerator.loading.addingPages",defaultMessage:"Adding pages"}});function le(e){const{statusLabel:t}=e,n=(0,S().tz)();let o;switch(null==t?void 0:t.type){case"default":o=n.formatMessage(se.default);break;case"addingProperty":o=n.formatMessage(se.addingProperty,{propertyName:t.propertyName});break;case"addingView":o=n.formatMessage(se.addingView,{viewName:t.viewName});break;case"addingPages":o=n.formatMessage(se.addingPages);break;default:return null}return(0,w.jsx)(ae().N,{styleName:"UITitle-22px/Semibold",text:o,animate:!0})}var de=()=>n(265665),ce=()=>n(972435);const ue=(0,S().YK)({featureTemplateRequired:{id:"featureTemplateRequired",defaultMessage:"This is required"}});function pe(e){let{template:t,isRequired:n,...o}=e;const i=n?ce().A.formatMessage(ue.featureTemplateRequired):void 0;return(0,w.jsx)(Z().A,{...o,disableTooltip:void 0===i,renderTooltip:()=>i})}var ge=()=>n(913454),me=()=>n(317053),fe=()=>n(493823);function he(e){let{children:t,isSelected:n,disabled:o,onClick:i,tooltipEvents:r,style:a}=e;const s=(0,v().IS)((e=>({button:{fontSize:14,paddingLeft:12,paddingRight:12,borderRadius:24,color:e.text.primary,boxShadow:`0 0 0 1px ${e.stroke.primary}`,...n&&{boxShadow:`0 0 0 1.5px ${e.stroke.uiBluePrimary}`,background:e.buttonBackground},...a},buttonHovered:{...n?{boxShadow:`0 0 0 1.5px ${e.stroke.uiBluePrimary}`,background:e.outlineBlueButtonHoveredBackground}:{boxShadow:`0 0 0 1px ${e.stroke.input}`,background:e.buttonHoveredBackground}}})),[n,a]);return(0,w.jsx)(fe().p,{...r,style:s.button,disabled:o,disabledFeedback:!0,onClick:i,hoveredStyle:s.buttonHovered,children:t})}var ye=()=>n(712341);function ve(e){const t=(0,i().v3)(),{isPhone:n}=(0,i().Y0)(),a=(0,r().O$)(f().A),l=(0,M().r)(),c=null==l?void 0:l.id,{hideChatFeedback:u}=e.overrides??{},p=(0,v().IS)((()=>({grid:{flex:"1 0 0",display:"grid",gridTemplateRows:"1fr auto",position:"relative",maxHeight:"100%",overflowY:"auto"},features:{},feedbackInput:{display:"flex",flexDirection:"column",minHeight:30,maxHeight:120,flexShrink:0,paddingTop:n?4:void 0}})),[n]),g=(0,r().K8)((()=>{if(a.open)return a.setupGenerator}),[a]),h=(0,o.useCallback)((e=>{!(0,x().w9s)(e)?(0,me().setFollowUpInputFocused)(!0):(0,me().setFollowUpInputFocused)(!1),null==g||g.setPrompt(e)}),[g]),y=(0,r().K8)((()=>{var e;return null==g||null===(e=g.store)||void 0===e||null===(e=e.state)||void 0===e?void 0:e.feedbackArgs}),[g]),b=(0,r().K8)((()=>{if(a.open)return g&&y&&a.collectionTemplate&&a.collectionTemplate.isAiGenerated}),[y,a,g]),S=(0,r().K8)((()=>(null==g?void 0:g.store.state.isBusy)??!1),[g]),k=(0,r().K8)((()=>{var e;return S?null==g||null===(e=g.store.state)||void 0===e?void 0:e.progress:void 0}),[g,S]),j=(0,o.useCallback)((()=>{(0,me().retryAiSetup)(n)}),[n]),C=(0,o.useCallback)((()=>{a.open&&((0,s().u)({environment:t,event:{eventName:"workflow_template_onboarding_follow_up",eventProperties:{...(0,m().gM)(a)}}}),null==g||g.submitPrompt({from:"follow-up"}))}),[t,a,g]),P=(0,r().K8)((()=>null==g?void 0:g.store.state.prompt),[g]),A=(0,o.useCallback)((()=>{null==g||g.stopGenerating()}),[g]),{canFollowUp:T,canRetry:I}=(0,r().K8)((()=>g?g.store.derivedUiStore.getState():{canFollowUp:!0,canRetry:!1}),[g]);return a.open&&c&&a.collectionTemplate?(0,w.jsxs)(d().Y1,{direction:"vertical",height:"fill",gap:10,children:[(0,w.jsx)(be,{setupGeneratorProgress:k}),(0,w.jsx)("div",{style:p.grid,children:(0,w.jsx)(Me,{contentStyle:{padding:"5px 2px"},children:(0,w.jsx)("div",{style:p.features,children:(0,w.jsx)(xe,{featureTemplateSelections:a.userCustomizations.featureTemplateSelections,isSetupGeneratorBusy:S,...(0,m().OX)(a)})})})}),b&&y?(0,w.jsx)("div",{style:p.feedbackInput,children:T?(0,w.jsx)(re,{canPressEnter:!0,canRetry:I,onClickRetry:j,onSubmit:C,onClickStop:A,value:P,onChange:h,feedbackArgs:y,isBusy:S,hideChatFeedback:u}):null}):null]}):null}function be(e){const{setupGeneratorProgress:t}=e;return t?(0,w.jsx)(le,{statusLabel:t.statusLabel}):(0,w.jsx)(ye().aZ,{caption:(0,w.jsx)(S().sA,{id:"workflowTemplatesOnboardingModal.selectFeatures",defaultMessage:"Select features to turn on or off"})})}function xe(e){let{featureTemplateSelections:t,isSetupGeneratorBusy:n,...i}=e;const{collectionTemplate:a}=i,s=(0,r().K8)((()=>(0,b().A6)(a,ge().globalWorkflowTemplates)),[a]),l=(0,o.useMemo)((()=>(0,m().UA)({collectionViewTemplates:s,featureTemplateSelections:t})),[s,t]);return(0,w.jsx)(Se,{featureTemplateSelections:l,templateOnboardingState:i,isLoading:n})}function Se(e){const t=(0,i().v3)(),{isLoading:n,featureTemplateSelections:o,templateOnboardingState:r}=e,a=(0,v().IS)((()=>({pillsSection:{display:"flex",flexWrap:"wrap",gap:12,isolation:"isolate"}})),[]),s=(0,C().j)(1e3);return(0,w.jsx)("div",{style:a.pillsSection,children:(0,w.jsx)(h().N,{mode:"popLayout",children:o.map(((e,i)=>(0,w.jsx)(we,{index:i,featureTemplateSelectionsToShow:o,featureSelection:e,isRequired:!1,isLoading:n,shouldAnimate:s,toggleFeatureTemplateSelection:e=>(0,me().toggleFeatureSelectionInPreview)({template:e,environment:t}),...r},i)))})})}const we=(0,o.forwardRef)((function(e,t){const{featureTemplateSelectionsToShow:n,featureSelection:o,isRequired:r,isLoading:a,toggleFeatureTemplateSelection:l,index:d,shouldAnimate:c,...u}=e,p=(0,i().v3)(),g=o.template;return(0,w.jsx)(pe,{template:g,alignment:ee().C.Start,isRequired:r,render:e=>(0,w.jsx)(Ce,{ref:t,template:g,index:d,isSelected:o.selected,tooltipEvents:e,disabled:r,isLoading:a,shouldAnimate:c,onClick:()=>{(0,s().u)({environment:p,event:{eventName:"workflow_template_onboarding_feature_select",eventProperties:{selecting:o.selected?"deselecting":"selecting",feature_template_id:g.templateId,feature_template_type:g.type,previously_selected_feature_template_ids:n.filter((e=>e.selected)).map((e=>e.template.templateId)),step:"features",...(0,m().gM)(u)}}}),l(g)}})})})),ke={type:"spring",damping:25,stiffness:250},je={...ke,delay:.1},Ce=(0,o.forwardRef)((function(e,t){const{template:o,isSelected:i,isLoading:r,disabled:a,onClick:s,tooltipEvents:l,index:d,shouldAnimate:c}=e,u=(0,v().IS)((e=>({icon:{marginRight:6,fill:i?e.text.uiBluePrimary:e.icon.secondary},overflowTooltip:{maxWidth:250},selectButton:{maxWidth:"100%"},wrapper:{background:e.surface.wash,borderRadius:24,position:"relative",maxWidth:"100%",willChange:"transform",zIndex:void 0!==d?100-d:void 0},shimmerArea:{pointerEvents:"none"},shimmer:{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:24,boxShadow:`0 0 0 1px ${e.stroke.secondary}`}})),[i,d]);return(0,w.jsxs)(y().P.div,{ref:t,style:u.wrapper,layout:!0,transition:ke,initial:!!c&&{x:-50,opacity:.5},animate:{x:0,opacity:1},exit:{scale:.5,opacity:0},children:[(0,w.jsx)(y().P.div,{initial:!!c&&{opacity:0},animate:{opacity:r?0:1},transition:je,children:(0,w.jsxs)(he,{tooltipEvents:l,disabled:a,isSelected:i,onClick:s,style:u.selectButton,children:[(0,w.jsx)(n(621767).z,{iconStyle:u.icon,template:o}),(0,w.jsx)(de().j,{tooltipStyle:u.overflowTooltip,placement:ee().W.Right,children:(0,ge().getWorkflowTemplateName)(o)}),"ai_inference"in o.value&&(0,w.jsx)(k,{})]})}),(0,w.jsx)(y().P.div,{initial:!1,animate:{opacity:r?1:0},transition:je,style:r?{}:u.shimmerArea,children:(0,w.jsx)(j().A,{style:u.shimmer})})]})}));function Me(e){let{children:t,fadeHeight:n=30,contentStyle:i={}}=e;const r=(0,o.useRef)(null),[a,s]=(0,o.useState)(!1),[l,d]=(0,o.useState)(!1),c=(0,v().IS)((e=>({content:{height:"100%",overflowY:"auto",...i},fadeTop:{position:"absolute",top:0,left:0,right:0,height:n,background:`linear-gradient(to bottom, ${e.surface.wash}, transparent)`,pointerEvents:"none",opacity:a?1:0,willChange:"opacity",transition:"opacity 0.3s"},fadeBottom:{position:"absolute",bottom:0,left:0,right:0,height:n,background:`linear-gradient(to top, ${e.surface.wash}, transparent)`,pointerEvents:"none",opacity:l?1:0,willChange:"opacity",transition:"opacity 0.3s"}})),[i,n,a,l]),u=(0,o.useCallback)((()=>{if(!r.current)return;const{scrollTop:e,scrollHeight:t,clientHeight:n}=r.current;s(e>0),d(e<t-n-1)}),[r]);return(0,o.useEffect)((()=>{const e=r.current;if(e)return e.addEventListener("scroll",u),window.addEventListener("resize",u),u(),()=>{e.removeEventListener("scroll",u),window.removeEventListener("resize",u)}}),[u,r]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{ref:r,style:c.content,children:t}),(0,w.jsx)("div",{style:c.fadeTop}),(0,w.jsx)("div",{style:c.fadeBottom})]})}n(18107),n(967357),n(737550);var Pe=()=>n(833744),Ae=()=>n(852507),Te=()=>n(148307),Ie=()=>n(632625),_e=()=>n(715256),Be=()=>n(126818);const Le=(0,U().xh)("circle",{default:{loader:()=>n.e(56780).then(n.bind(n,256780))},small:{loader:()=>n.e(63882).then(n.bind(n,163882))},mini:{loader:()=>n.e(21042).then(n.bind(n,621042))},large:{loader:()=>n.e(55570).then(n.bind(n,555570))}});var Ge=()=>n(212050),De=()=>n(525884),Re=()=>n(284371),We=()=>n(319117),Ne=()=>n(995062),Ee=()=>n(704152),ze=()=>n(760217),Fe=()=>n(364280),Ve=()=>n(135221),Oe=()=>n(939740),He=()=>n(554509),Ke=()=>n(89924),Ye=()=>n(235921),Ue=()=>n(581495),$e=()=>n(640653),qe=()=>n(154152),Qe=()=>n(496603),Xe=()=>n(321843);const Je=o.forwardRef((function(e,t){const{placeholder:n,value:i,onChange:r,onSubmit:a,canPressEnter:s,disabled:l}=e,d=(0,S().tz)(),c=function(){const e=20,t=24;return(0,v().IS)((n=>({input:{display:"flex",maxWidth:"100%",flexFlow:"column",boxShadow:n.inputBoxShadow,backgroundColor:n.surface.elevated,borderRadius:16,overflow:"inherit",padding:12,gap:"4px 0"},buttonWrapper:{position:"absolute",right:8,bottom:8},stopIcon:{fill:n.icon.primary},icon:{height:e,width:e},button:{pointerEvents:"auto",height:Math.max(e,t),width:Math.max(e,t),borderRadius:"100%"}})),[])}(),u=(0,o.useContext)(Ue().eh),p=!(0,x().w9s)(i),g=null==i?void 0:i.map((e=>(0,x().N8A)(e))).join("");return(0,w.jsx)("div",{style:{position:"relative"},children:(0,w.jsxs)(_().A,{debugName:"AiPromptInput",capture:!0,onEsc:u,priority:1,onUp:Qe().D_,onDown:Qe().D_,children:[(0,w.jsx)(z().A,{disabled:l,ref:t,textarea:!0,textareaSubmitOnEnter:!0,autosize:!0,autosizeMinHeight:75,autosizeMaxHeight:240,style:c.input,onChange:e=>{r((0,x().x9d)(e.target.value))},onSubmit:()=>{p&&s&&a()},value:g,placeholder:d.formatMessage(n)}),(0,w.jsx)("div",{style:c.buttonWrapper,children:(0,w.jsx)(Z().A,{disableTooltip:!l,renderTooltip:e=>(0,w.jsx)("div",{...e,children:(0,w.jsx)(S().sA,{...Xe().$.cannotSubmitMessage})}),render:e=>(0,w.jsx)(I().A,{...e,icon:P().b,onClick:()=>{},color:p?"uiBluePrimary":"secondary",disabled:!p||l,ariaLabel:d.formatMessage({id:"aiPromptInput.submit",defaultMessage:"Submit"}),onMouseDown:e=>{e.preventDefault(),a()},style:c.button,iconStyle:c.icon})})})]})})}));var Ze=()=>n(765957),et=()=>n(3486);const tt=(0,S().YK)({workPromptPlaceholder:{id:"setupGenerator.workPromptPlaceholder",defaultMessage:"Make a customer feedback tracker with priority levels, status, and assignee..."},personalSchoolPromptPlaceholder:{id:"setupGenerator.personalSchoolPromptPlaceholder",defaultMessage:"Make a subscription tracker with cost, subscription type, and renewal date... "}});function nt(e,t){if("new_user_onboarding"===e)switch(t){case"personal":case"school":return tt.personalSchoolPromptPlaceholder;default:return tt.workPromptPlaceholder}return tt.workPromptPlaceholder}const ot={duration:0},it={duration:.7,ease:"anticipate"},rt={type:"spring",stiffness:150,damping:20,delay:1};function at(e){const t=(0,o.useContext)(Ue().eh),n=(0,r().K8)((()=>f().A.state),[]),i=(0,r().K8)((()=>(0,ge().getIsSetupGeneratorEnabled)()),[]);return(0,r().K8)((()=>n.open?n.setupGenerator:void 0),[n])&&i?n.open?(0,w.jsx)(lt,{overrides:e.overrides}):null:(0,w.jsx)(ht,{onClickClose:t})}function st(e){const t=(0,r().K8)((()=>(0,ge().getIsSetupGeneratorEnabled)()),[]),n=(0,o.useContext)(Ue().eh),i=(0,r().K8)((()=>f().A.state),[]),a=(0,r().K8)((()=>i.open?i.setupGenerator:void 0),[i]),s=(0,r().K8)((()=>{var e;return(null==a||null===(e=a.store.state)||void 0===e?void 0:e.progress)??{databases:{},statusLabel:{type:"default"},steps:[]}}),[a]),l=Object.values(s.databases).at(0),d=(null==l?void 0:l.databaseName)??"",c=(null==l?void 0:l.iconName)??"pencil";return a&&t?i.open?(0,w.jsx)(ut,{collectionName:d,collectionIcon:`/icons/${c}_gray.svg`,progress:s,overrides:e.overrides}):null:(0,w.jsx)(ht,{onClickClose:n})}function lt(e){const t=(0,S().tz)(),n=(0,i().v3)(),{hideCornerButton:a=!1,...s}=e.overrides??{},{isPhone:l}=(0,i().Y0)(),c=(0,r().K8)((()=>f().A.state),[]),u=(0,r().K8)((()=>{if(c.open)return c.setupGenerator}),[c]),p=(0,r().K8)((()=>null==u?void 0:u.store.state.prompt),[u]),g=(0,o.useCallback)((async()=>{u&&c.open&&await(0,qe().z)({setupGenerator:u,environment:n,parentStore:c.parentStore,isPhone:l})}),[u,n,c,l]),m=(0,r().K8)((()=>{var e;return null===(e=Ze().default.state.currentUserStore)||void 0===e?void 0:e.getDisplayName(t)}),[t]);return c.open&&u?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(We().F,{configType:"setup-generator"}),(0,w.jsxs)("div",{style:{position:"relative",height:"100%"},children:[a?null:(0,w.jsx)(ye().Dr,{modalState:c}),(0,w.jsx)(d().Y1,{width:"fill",height:"fill",align:"top-center",padding:l?"96px 32px 32px":"32px",style:l?{minHeight:"100vh"}:void 0,children:(0,w.jsx)(dt,{currentUserName:m,prompt:p,onChange:u.setPrompt,onSubmit:g,overrides:s})})]})]}):null}function dt(e){const{currentUserName:t,prompt:n,onChange:a,onSubmit:s,overrides:l}=e,{isPhone:c}=(0,i().Y0)(),u=(0,r().O$)(Ze().AppStoreCurrentSpaceStore),p=(0,r().K8)((()=>{var e;return null===(e=Ze().default.state.currentUserStore)||void 0===e?void 0:e.getModel()}),[]),[g,m]=(0,o.useState)({type:"pills"}),h=(0,v().IS)((e=>({text:{textAlign:"center",textWrap:"balance"},subtitle:{color:e.text.tertiary,textWrap:void 0,marginTop:-6}})),[]),b=(0,r().K8)((()=>f().A.state),[]),k=(0,r().K8)((()=>{if(b.open)return b.setupGenerator}),[b]),j=(0,r().K8)((()=>{var e;return null===(e=Ye().A.state.planTypeAndSurveyInfo)||void 0===e?void 0:e.planType}),[]),C=(0,o.useCallback)((e=>{var t;a(e),(0,x().w9s)(e)?m({type:"pills"}):("pills"!==g.type||(0,x().w9s)(e))&&("subprompts"!==g.type||!e||(0,x().w9s)(e)||(t=e,g.selectedPill.subprompts.some((e=>xt(t,e)))))||m({type:"pills"})}),[a,g]),M=(0,o.useRef)(null);(0,Ae().w)((()=>{var e;null==k||k.trackSessionStarted(),null===(e=M.current)||void 0===e||e.focus()})),(0,Pe().L)({active:!0,closeHandler:()=>{m({type:"pills"})},ref:M,excludedSelectors:["[role='button']"]});const P=(0,o.useCallback)((e=>{var t;let{pill:n,prompt:o}=e;null===(t=M.current)||void 0===t||t.focus(),m({type:"subprompts",selectedPill:n}),a(o)}),[a]),A=(0,o.useMemo)((()=>(0,w.jsxs)("div",{style:{position:"relative"},children:[(0,w.jsx)(yt,{onClick:P,hidden:"pills"!==g.type}),"subprompts"===g.type?(0,w.jsx)(bt,{userPrompt:n,subprompts:g.selectedPill.subprompts,onSelection:e=>{a(e),s()}}):null]})),[P,a,s,n,g]),T=(0,r().K8)((()=>!!u&&Xe().R.isInferenceTranscriptConfigTypeDown({configType:"setup-generator",spaceId:u.id,actor:p??_e().S3})),[u,p]);return b.open?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(d().Y1,{height:"fill",align:c?"top-center":"center",gap:32,children:[(0,w.jsxs)(d().Y1,{gap:12,align:"top-center",width:c?350:"new_user_onboarding"===b.origin?500:400,style:h.text,children:[(0,w.jsx)(y().P.div,{layoutId:"assistant-face",transition:ot,layout:"position",children:(0,w.jsx)(Ne().AssistantAnimatedFaceInner,{sizeVariant:"large",highLevelState:"idle",includeBoxShadow:!0})}),(0,w.jsx)(He().D,{styleName:"UITitle-22px/Semibold",children:"land_on_app_from_new_user_onboarding"===b.origin?(0,w.jsx)(S().sA,{id:"setupGenerator.greetingForNewSpaces",defaultMessage:"Hey there! Welcome to Notion. What do you want to build today?"}):"new_user_onboarding"===b.origin?(0,w.jsx)(S().sA,{id:"setupGenerator.greetingWithinOnboardingNewUser",defaultMessage:"What can Notion build for you?"}):(0,w.jsx)(S().sA,{id:"setupGenerator.greeting",defaultMessage:"What do you want to build today?",values:{currentUserName:t}})}),"new_user_onboarding"===b.origin&&(0,w.jsx)(He().D,{styleName:"UITitle-22px/Semibold",style:h.subtitle,children:(0,w.jsx)(S().sA,{id:"setupGenerator.greetingWithinOnboardingNewUser.subtitle",defaultMessage:"Describe your idea or start with a template"})})]}),(0,w.jsxs)(d().Y1,{direction:"vertical",gap:4,width:c?350:450,children:[(0,w.jsx)(Je,{disabled:T,ref:M,placeholder:nt(b.origin,j),value:n,onChange:C,onSubmit:s,canPressEnter:!0}),T?null:(0,w.jsx)("div",{children:A})]})]}),null!=l&&l.hideLearnMore?null:(0,w.jsx)(ct,{})]}):null}function ct(){const e=(0,S().tz)(),{isPhone:t}=(0,i().Y0)(),n=(0,v().IS)((e=>({button:{position:"absolute",top:t?56:20,right:20,zIndex:1,height:26,paddingLeft:5,paddingRight:5},icon:{width:t?20:18,height:t?20:18,fill:e.icon.secondary}})),[t]);return(0,w.jsx)(Z().A,{placement:ee().W.Left,renderTooltip:()=>(0,w.jsx)("span",{children:e.formatMessage(mt.help)}),render:t=>(0,w.jsx)(I().A,{...t,ariaLabel:e.formatMessage(mt.help),icon:De().infoCircleIcon,style:n.button,iconStyle:n.icon,href:"https://www.notion.com/help/autofill#create-a-database-with-notion-ai",external:!0})})}function ut(e){const{collectionName:t,collectionIcon:n,progress:o}=e,{hideCornerButton:a=!1}=e.overrides??{},s=(0,r().K8)((()=>f().A.state),[]),l=null==o?void 0:o.statusLabel,{isPhone:c}=(0,i().Y0)(),u=(0,v().IS)((e=>({container:{borderRadius:12,border:`1px solid ${e.stroke.secondary}`,backgroundColor:"dark"===e.mode?e.popoverWaxPaperBackground:void 0,backgroundImage:`url(${Te().A.images.workflowTemplates.bgDotsPng})`,backgroundRepeat:"repeat",backgroundSize:"70px 70px",backgroundPosition:"0% 0%",backgroundBlendMode:"multiply",position:"absolute",userSelect:"none",inset:0,zIndex:10},header:{opacity:.6,paddingBottom:20,borderBottom:`1px solid ${e.stroke.primary}`},columns:{display:"grid",gridTemplateColumns:"3fr 2fr 2fr",gap:45},shimmer:{width:"50%",height:9,borderRadius:5},shimmerWide:{width:"100%",height:9,borderRadius:5}})),[]),p=(0,v().DP)();return s.open?(0,w.jsxs)(w.Fragment,{children:[a||"ai_chat"===s.origin?null:(0,w.jsx)(ye().Dr,{modalState:s}),(0,w.jsx)(ye().Cx,{sidebar:(0,w.jsxs)(d().Y1,{direction:"vertical",gap:c?18:36,children:[(0,w.jsxs)(d().Y1,{direction:"vertical",gap:c?18:12,children:[(0,w.jsx)(y().P.div,{layoutId:"assistant-face",layout:"position",transition:it,children:(0,w.jsx)(Ne().AssistantAnimatedFaceInner,{sizeVariant:"large",highLevelState:"writing",includeBoxShadow:!0})}),(0,w.jsx)(y().P.div,{initial:{opacity:0},animate:{opacity:1},transition:it,children:(0,w.jsx)(le,{statusLabel:l})})]}),(0,w.jsx)(y().P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:rt,children:(0,w.jsx)(gt,{steps:(null==o?void 0:o.steps)??[]})})]}),preview:(0,w.jsx)(y().P.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:rt,style:{width:"100%",height:"100%",position:"relative"},children:(0,w.jsxs)(d().Y1,{direction:"vertical",height:"fill",width:"fill",padding:"36px 38px",style:u.container,gap:30,children:[(0,w.jsxs)(d().Y1,{direction:"horizontal",align:"center-left",gap:12,height:50,style:u.header,children:[(0,w.jsx)(Ie().p,{icon:n,size:20,theme:p}),(0,w.jsx)(He().D,{styleName:"UITitle-22px/Semibold",children:t})]}),(0,w.jsx)("div",{style:u.columns,children:Array.from({length:3}).map(((e,t)=>(0,w.jsxs)(d().Y1,{direction:"vertical",gap:25,children:[(0,w.jsx)(j().A,{style:u.shimmer}),Array.from({length:5}).map(((e,t)=>(0,w.jsx)(j().A,{style:u.shimmerWide},t)))]},t)))})]})})})]}):null}function pt(e){const{status:t}=e,n=(0,v().IS)((()=>({loadingDotsContainer:{width:24,height:24,gap:3},loadingDot:{width:5,height:5}})),[]);switch(t){case"idle":return(0,w.jsx)(J().Q,{iconGroup:Le,variantName:"large",colorName:"tertiary"});case"in_progress":return(0,w.jsx)(Ve().A,{isTriColored:!0,styleParentContainer:n.loadingDotsContainer,style:n.loadingDot});case"completed":return(0,w.jsx)(J().Q,{iconGroup:Be().g,variantName:"large",colorName:"tertiary"});default:(0,a().HB)(t)}}function gt(e){const{steps:t}=e,n=(0,v().IS)((e=>({separator:{width:1,height:12,background:e.stroke.primary}})),[]);return(0,w.jsx)(d().Y1,{direction:"vertical",gap:2,children:t.map(((e,i)=>{const r=i===t.length-1;return(0,w.jsxs)(o.Fragment,{children:[(0,w.jsx)(ft,{step:e}),r?void 0:(0,w.jsx)(d().Y1,{width:24,align:"center",children:(0,w.jsx)("div",{style:n.separator})})]},i)}))})}const mt=(0,S().YK)({creatingDatabase:{id:"setupGenerator.progress.createDatabase",defaultMessage:"Creating database"},addingProperties:{id:"setupGenerator.progress.addProperties",defaultMessage:"Adding properties"},addingViews:{id:"setupGenerator.progress.addViews",defaultMessage:"Adding views"},addingPages:{id:"setupGenerator.progress.addPages",defaultMessage:"Adding pages"},help:{id:"setupGenerator.promptInput.learnMore",defaultMessage:"Learn more in help center"}});function ft(e){const{step:t}=e,n=(0,S().tz)();let o;switch(t.type){case"createDatabases":o=n.formatMessage(mt.creatingDatabase);break;case"addProperties":o=n.formatMessage(mt.addingProperties);break;case"addViews":o=n.formatMessage(mt.addingViews);break;case"addPages":o=n.formatMessage(mt.addingPages);break;default:return null}return(0,w.jsxs)(d().Y1,{direction:"horizontal",align:"center-left",gap:6,children:[(0,w.jsx)(pt,{status:t.status}),(0,w.jsx)(He().D,{styleName:"UIRegular-14px/Medium",colorName:"in_progress"===t.status?"primary":"tertiary",children:o})]})}function ht(e){const{onClickClose:t}=e;return(0,w.jsxs)(w.Fragment,{children:[t?(0,w.jsx)(ye().n9,{iconFn:Ge().u,onClick:t}):null,(0,w.jsx)(d().Y1,{height:"fill",width:"fill",align:"center",children:(0,w.jsx)(He().D,{styleName:"UIRegular-14px/Regular",children:(0,w.jsx)(S().sA,{id:"setupGenerator.notAvailable",defaultMessage:"This feature is not available."})})})]})}function yt(e){let{onClick:t,hidden:n}=e;const o=(0,r().K8)((()=>"team"===(0,$e().p3)().intent?Mt:Bt),[]),i=(0,v().IS)((()=>({container:{marginTop:12,display:"flex",flexWrap:"wrap",justifyContent:"center",gap:8,...n?{visibility:"hidden"}:{}}})),[n]);return(0,w.jsx)("div",{style:i.container,children:o.map((e=>{const n=ce().A.formatMessage(e.title);return(0,w.jsx)(vt,{iconString:e.icon,title:n,onClick:()=>t({pill:e,prompt:(0,x().x9d)(n)})},e.key)}))})}function vt(e){let{onClick:t,iconString:n,title:o}=e;const i=(0,v().DP)(),r=(0,v().IS)((e=>({icon:{fill:(0,et().d)(n,e).icon.primary,marginRight:2},pill:{display:"flex",alignItems:"center",padding:"6px 14px 6px 10px",width:"fit-content",borderRadius:100,fontSize:14,fontWeight:Re().Wy.medium,background:e.assistantTintedActionButtonBackground},pillHover:{background:e.tint.regular,cursor:"pointer"}})),[n]),a=(0,w.jsx)(Ie().p,{icon:n,size:16,style:r.icon,theme:i});return(0,w.jsx)(Ee().A,{onClick:t,style:r.pill,hoveredStyle:r.pillHover,children:(0,w.jsxs)(Fe().fI,{gap:4,alignItems:"center",children:[a,o]})})}function bt(e){let{userPrompt:t,subprompts:n,onSelection:o}=e;const i=(0,v().IS)((e=>{const t={padding:8};return{container:{fontSize:14,position:"absolute",top:0,width:"100%"},subpromptItem:{...t,boxShadow:`-1px 10px 0px -9px ${e.stroke.secondary}`},subpromptItemLast:{...t},gray:{color:e.text.tertiary}}}),[]);return(0,w.jsx)("div",{style:i.container,children:(0,w.jsx)(Oe().Ay,{type:Oe().Oh.Vertical,initialFocus:0,sections:[{key:"subprompts",render:e=>(0,w.jsx)(Ke().A,{...e,style:{gap:0}}),items:n.filter((e=>!t||xt(t,e))).map((e=>({key:e.id,action:()=>{const t=ce().A.formatMessage(e,{gray:e=>e});o((0,x().x9d)(t))},render:t=>(0,w.jsx)(ze().A,{...t,style:t.focused||t.isBeforeFocused?i.subpromptItemLast:i.subpromptItem,role:"button",title:(0,w.jsx)(S().sA,{...e,values:{gray:e=>(0,w.jsx)("span",{style:i.gray,children:e})}})})})))}]})})}function xt(e,t){const n=e.map((e=>(0,x().N8A)(e))).join("").trim();return ce().A.formatMessage(t,{gray:e=>e}).toUpperCase().includes(n.toUpperCase())}const St=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.makeAPlan",defaultMessage:"Make a plan"},option1:{id:"setupGenerator.suggestionPill.makeAPlan.option1",defaultMessage:"<gray>Make a plan</gray> for a product roadmap"},option2:{id:"setupGenerator.suggestionPill.makeAPlan.option2",defaultMessage:"<gray>Make a plan</gray> for a marketing campaign"},option3:{id:"setupGenerator.suggestionPill.makeAPlan.option3",defaultMessage:"<gray>Make a plan</gray> for an upcoming event"},option4:{id:"setupGenerator.suggestionPill.makeAPlan.option4",defaultMessage:"<gray>Make a plan</gray> for hiring new team members"}}),wt=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.manageTasks",defaultMessage:"Manage tasks"},option1:{id:"setupGenerator.suggestionPill.manageTasks.option1",defaultMessage:"<gray>Manage tasks</gray> for a website redesign"},option2:{id:"setupGenerator.suggestionPill.manageTasks.option2",defaultMessage:"<gray>Manage tasks</gray> for engineering sprints"},option3:{id:"setupGenerator.suggestionPill.manageTasks.option3",defaultMessage:"<gray>Manage tasks</gray> for content production"},option4:{id:"setupGenerator.suggestionPill.manageTasks.option4",defaultMessage:"<gray>Manage tasks</gray> for a product launch"}}),kt=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.collectFeedback",defaultMessage:"Collect feedback"},option1:{id:"setupGenerator.suggestionPill.collectFeedback.option1",defaultMessage:"<gray>Collect feedback</gray> on customer satisfaction"},option2:{id:"setupGenerator.suggestionPill.collectFeedback.option2",defaultMessage:"<gray>Collect feedback</gray> on feature requests"},option3:{id:"setupGenerator.suggestionPill.collectFeedback.option3",defaultMessage:"<gray>Collect feedback</gray> on service quality"},option4:{id:"setupGenerator.suggestionPill.collectFeedback.option4",defaultMessage:"<gray>Collect feedback</gray> on a new product launch"}}),jt=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.trackPipeline",defaultMessage:"Track pipeline"},option1:{id:"setupGenerator.suggestionPill.trackPipeline.option1",defaultMessage:"<gray>Track pipeline</gray> for sales leads"},option2:{id:"setupGenerator.suggestionPill.trackPipeline.option2",defaultMessage:"<gray>Track pipeline</gray> for hiring candidates"},option3:{id:"setupGenerator.suggestionPill.trackPipeline.option3",defaultMessage:"<gray>Track pipeline</gray> for content production"},option4:{id:"setupGenerator.suggestionPill.trackPipeline.option4",defaultMessage:"<gray>Track pipeline</gray> for partnership deals"}}),Ct=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.runCampaign",defaultMessage:"Run campaign"},option1:{id:"setupGenerator.suggestionPill.runCampaign.option1",defaultMessage:"<gray>Run campaign</gray> for a product launch"},option2:{id:"setupGenerator.suggestionPill.runCampaign.option2",defaultMessage:"<gray>Run campaign</gray> for an email marketing push"},option3:{id:"setupGenerator.suggestionPill.runCampaign.option3",defaultMessage:"<gray>Run campaign</gray> for an event promotion"},option4:{id:"setupGenerator.suggestionPill.runCampaign.option4",defaultMessage:"<gray>Run campaign</gray> for a fundraising effort"}}),Mt=[{key:"make-a-plan",title:St.primary,icon:"/icons/calendar_green.svg",subprompts:[St.option1,St.option2,St.option3,St.option4]},{key:"manage-tasks",title:wt.primary,icon:"/icons/checkmark-square_blue.svg",subprompts:[wt.option1,wt.option2,wt.option3,wt.option4]},{key:"collect-feedback",title:kt.primary,icon:"/icons/inbox_orange.svg",subprompts:[kt.option1,kt.option2,kt.option3,kt.option4]},{key:"track-pipeline",title:jt.primary,icon:"/icons/chart_purple.svg",subprompts:[jt.option1,jt.option2,jt.option3,jt.option4]},{key:"run-campaign",title:Ct.primary,icon:"/icons/megaphone_yellow.svg",subprompts:[Ct.option1,Ct.option2,Ct.option3,Ct.option4]}],Pt=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.journalEntries",defaultMessage:"Journal entries"},option1:{id:"setupGenerator.suggestionPill.journalEntries.option1",defaultMessage:"<gray>Journal entries</gray> about daily reflections"},option2:{id:"setupGenerator.suggestionPill.journalEntries.option2",defaultMessage:"<gray>Journal entries</gray> about gratitude practices"},option3:{id:"setupGenerator.suggestionPill.journalEntries.option3",defaultMessage:"<gray>Journal entries</gray> about personal growth"},option4:{id:"setupGenerator.suggestionPill.journalEntries.option4",defaultMessage:"<gray>Journal entries</gray> about travel experiences"}}),At=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.manageLists",defaultMessage:"Manage lists"},option1:{id:"setupGenerator.suggestionPill.manageLists.option1",defaultMessage:"<gray>Manage lists</gray> for grocery shopping"},option2:{id:"setupGenerator.suggestionPill.manageLists.option2",defaultMessage:"<gray>Manage lists</gray> of books to read"},option3:{id:"setupGenerator.suggestionPill.manageLists.option3",defaultMessage:"<gray>Manage lists</gray> of gift ideas"},option4:{id:"setupGenerator.suggestionPill.manageLists.option4",defaultMessage:"<gray>Manage lists</gray> of travel destinations"}}),Tt=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.trackHabits",defaultMessage:"Track habits"},option1:{id:"setupGenerator.suggestionPill.trackHabits.option1",defaultMessage:"<gray>Track habits</gray> for daily workouts"},option2:{id:"setupGenerator.suggestionPill.trackHabits.option2",defaultMessage:"<gray>Track habits</gray> for reading more books"},option3:{id:"setupGenerator.suggestionPill.trackHabits.option3",defaultMessage:"<gray>Track habits</gray> for learning a new skill"},option4:{id:"setupGenerator.suggestionPill.trackHabits.option4",defaultMessage:"<gray>Track habits</gray> for improving sleep quality"}}),It=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.setGoals",defaultMessage:"Set goals"},option1:{id:"setupGenerator.suggestionPill.setGoals.option1",defaultMessage:"<gray>Set goals</gray> for financial savings"},option2:{id:"setupGenerator.suggestionPill.setGoals.option2",defaultMessage:"<gray>Set goals</gray> for fitness milestones"},option3:{id:"setupGenerator.suggestionPill.setGoals.option3",defaultMessage:"<gray>Set goals</gray> for personal learning"},option4:{id:"setupGenerator.suggestionPill.setGoals.option4",defaultMessage:"<gray>Set goals</gray> for work-life balance"}}),_t=(0,S().YK)({primary:{id:"setupGenerator.suggestionPill.saveMemories",defaultMessage:"Save memories"},option1:{id:"setupGenerator.suggestionPill.saveMemories.option1",defaultMessage:"<gray>Save memories</gray> from vacations and trips"},option2:{id:"setupGenerator.suggestionPill.saveMemories.option2",defaultMessage:"<gray>Save memories</gray> from family gatherings"},option3:{id:"setupGenerator.suggestionPill.saveMemories.option3",defaultMessage:"<gray>Save memories</gray> from major life milestones"},option4:{id:"setupGenerator.suggestionPill.saveMemories.option4",defaultMessage:"<gray>Save memories</gray> from concerts and events"}}),Bt=[{key:"journal-entries",title:Pt.primary,icon:"/icons/book_blue.svg",subprompts:[Pt.option1,Pt.option2,Pt.option3,Pt.option4]},{key:"manage-lists",title:At.primary,icon:"/icons/checklist_green.svg",subprompts:[At.option1,At.option2,At.option3,At.option4]},{key:"track-habits",title:Tt.primary,icon:"/icons/trophy_yellow.svg",subprompts:[Tt.option1,Tt.option2,Tt.option3,Tt.option4]},{key:"set-goals",title:It.primary,icon:"/icons/target_orange.svg",subprompts:[It.option1,It.option2,It.option3,It.option4]},{key:"save-memories",title:_t.primary,icon:"/icons/camera_purple.svg",subprompts:[_t.option1,_t.option2,_t.option3,_t.option4]}];var Lt=()=>n(584262);function Gt(e){return"land_on_app_from_new_user_onboarding"===e||"new_user_onboarding"===e}var Dt=()=>n(591779),Rt=()=>n(529324),Wt=()=>n(179034),Nt=()=>n(116225),Et=()=>n(872539),zt=()=>n(857783),Ft=()=>n(297872),Vt=()=>n(279047),Ot=()=>n(2143),Ht=()=>n(828634),Kt=()=>n(211716),Yt=()=>n(981084),Ut=()=>n(756279),$t=()=>n(630116),qt=()=>n(17090),Qt=()=>n(46986),Xt=()=>n(253141),Jt=()=>n(897119),Zt=()=>n(678553),en=()=>n(37433),tn=()=>n(449552),nn=()=>n(187820),on=()=>n(16006),rn=()=>n(898808);const an=18,sn=16;function ln(e){let{store:t,style:n,textStyle:o}=e;const i=(0,v().IS)((e=>({iconAndTitle:{display:"flex",alignItems:"center",gap:4,overflow:"hidden",...n},lockIcon:{width:sn,height:sn,margin:(an-sn)/2,fill:e.icon.primary},text:{flexShrink:1,overflow:"hidden",...o}})),[n,o]),s=(0,r().K8)((()=>{if(t instanceof $t().SL)return(0,tn().g)(i.lockIcon);const e=null==t?void 0:t.getIcon();return t instanceof $t().Bv?(0,w.jsx)(nn().B6,{icon:e,disabled:!0,isEmptyPage:!1,size:an,iconRecordCategory:(0,nn().Te)(t)}):t instanceof $t().h4?(0,w.jsx)(rn().x,{store:t,disabled:!0,size:an}):void(0,a().HB)(t)}),[t,i.lockIcon]);return(0,w.jsxs)("div",{style:i.iconAndTitle,children:[s,(0,w.jsx)(He().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",customStyles:i.text,children:t instanceof $t().SL?(0,w.jsx)(S().sA,{id:"workflowTemplatesOnboardingModalLocationPicker.privateLocationName",defaultMessage:"Private"}):(0,w.jsx)(on().A,{store:t})})]})}function dn(e){let{currentParentStore:t,onSelect:i,onDismiss:s}=e;const l=(0,S().tz)(),[d,c]=(0,o.useState)(""),u=(0,o.useMemo)((()=>{const e=new(n(757695).Store)("scrolledToTop");return e.setState(!0),e}),[]),p=(0,n(249847).T)(),g=(0,r().O$)(Ze().AppStoreCurrentSpaceStore),m=(0,en().D5)(),{teams:f}=(0,en().Sm)({userId:p,spaceStore:g}),h=(0,r().K8)((()=>{if(!Ze().default.state.currentSpaceViewStore||!g||!p)return[];const e=n(634157).A.getJoinedTeamStores({userId:p,spaceStore:g}),o=(m?f.map((e=>{let{store:t}=e;return t})):e).filter((e=>e.canAddOrRemoveTopLevelPages())),i=(0,$e().IL)(g)?o:[g,...o],r=i.findIndex((e=>e.id===t.id&&e.table===t.table));if(-1===r)return i;const a=i[r];return[a,...i.filter((e=>e!==a))]}),[t.id,t.table,f,m,g,p]),y=(0,r().K8)((()=>0===d.length?h:(0,n(778078).Ay)(d,h,(e=>e instanceof $t().SL?l.formatMessage({id:"workflowTemplatesOnboardingModalLocationPickerMenu.private",defaultMessage:"Private"}):e instanceof $t().h4?e.getName()??"":void(0,a().HB)(e)))),[d,h,l]),b=(0,o.useCallback)((e=>{u.setState(0===e.currentTarget.scrollTop)}),[u]),x=(0,o.useCallback)((e=>{const t=y.find((t=>t.id===e.key));t&&i(t)}),[y,i]),k=(0,v().IS)((e=>({input:{marginTop:6},inputInner:{fontSize:12},menuItemTextWrapper:{display:"flex",alignItems:"center",minHeight:28,marginLeft:10,marginRight:12},locationTitle:{gap:10},overfilteredLabel:{fill:e.text.secondary,paddingBottom:12}})),[]),j=(0,o.useMemo)((()=>[y.length>0?pn({filteredLocations:y,currentParentStore:t,onSelect:i,locationTitleStyle:k.locationTitle,menuItemTextWrapperStyle:k.menuItemTextWrapper}):un({intl:l,overfilteredLabelStyle:k.overfilteredLabel})]),[y,t,i,k.locationTitle,k.menuItemTextWrapper,k.overfilteredLabel,l]);return(0,w.jsx)(n(928600).A,{menuType:n(722872).gu.Popup,header:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(n(419357).Ay,{style:k.input,inputStyle:k.inputInner,itemMarginLeft:8,itemMarginRight:8,focusInitial:!0,value:d,onChange:e=>c(e.target.value),placeholder:l.formatMessage({id:"workflowTemplatesOnboardingModalLocationPickerMenu.searchInputPlaceholder",defaultMessage:"Add to..."})}),(0,w.jsx)(cn,{isScrolledToTopStore:u})]}),onClickOutside:s,maxHeight:210,width:252,onScroll:b,children:(0,w.jsx)(Oe().Ay,{type:Oe().Oh.Vertical,initialFocus:0,onAccept:x,sections:j})})}function cn(e){let{isScrolledToTopStore:t}=e;const n=(0,r().O$)(t),o=(0,v().IS)((e=>({divider:{height:1,overflow:"visible",boxShadow:`inset 0 0 0 1px ${e.lightDividerColor}`,opacity:n?0:1,transition:"opacity 0.1s ease-in-out"}})),[n]);return(0,w.jsx)("div",{style:o.divider})}function un(e){let{intl:t,overfilteredLabelStyle:n}=e;return{key:"empty",items:[{key:"noMatchingLocationsItem",render:e=>(0,w.jsx)(Zt().Ay,{...e,title:t.formatMessage({id:"workflowTemplatesOnboardingModalLocationPickerMenu.noLocations",defaultMessage:"No matching teamspaces found"}),style:n}),action:()=>{}}],render:e=>(0,w.jsx)(Ke().A,{...e,disableDesktopPadding:!0})}}function pn(e){let{filteredLocations:t,currentParentStore:n,onSelect:o,locationTitleStyle:i,menuItemTextWrapperStyle:r}=e;return{key:"section",items:t.map((e=>({key:e.id,render:t=>(0,w.jsx)(ze().A,{...t,textWrapperStyle:r,isChecked:e.id===n.id&&e.table===n.table,title:(0,w.jsx)(ln,{store:e,style:i})}),action:()=>o(e)}))),render:e=>(0,w.jsx)(Ke().A,{...e,disableDesktopPadding:!1})}}const gn=o.memo(dn);function mn(e){let{currentSelectedStore:t,onSelect:i}=e;const[r,a]=(0,o.useState)(!1),s=(0,o.useCallback)((e=>{i(e),a(!1)}),[i]),l=(0,o.useCallback)((()=>a(!1)),[]),d=(0,o.useCallback)((()=>a(!0)),[]),c=(0,v().IS)((e=>({originContainer:{display:"flex",alignItems:"center",gap:2,maxWidth:300},originText:{fontWeight:Re().Wy.medium},addToLabel:{flexShrink:0},button:{width:"max-content",display:"flex",alignItems:"center",gap:4,padding:4,height:24,flexShrink:1,overflow:"hidden"},icon:{width:12,height:12,fill:e.text.tertiary}})),[]);return t?(0,w.jsxs)("div",{style:c.originContainer,children:[(0,w.jsx)(He().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",customStyles:c.addToLabel,children:(0,w.jsx)(S().sA,{id:"workflowTemplatesOnboardingModalLocationPicker.addTo",defaultMessage:"Add to"})}),(0,w.jsx)(Jt().Ay,{open:r,popupType:Jt().nl.Popup,placementToOrigin:ee().W.Bottom,alignmentToOrigin:ee().C.Start,onDismiss:l,origin:(0,w.jsxs)(fe().p,{style:c.button,onClick:d,children:[(0,w.jsx)(ln,{store:t,textStyle:c.originText}),(0,n(668725).b)(c.icon)]}),render:()=>(0,w.jsx)(gn,{currentParentStore:t,onSelect:s,onDismiss:l}),trapFocus:!0})]}):null}const fn=o.memo(mn);var hn=()=>n(793863),yn=()=>n(813321);function vn(e){let{parentStore:t,searchQuery:n,handleSearchQueryChange:a,handleTopbarSizeChange:s,scrollerStore:l}=e;const c=(0,S().tz)(),{isPhone:u}=(0,i().Y0)(),p=(0,r().K8)((()=>"on"===g().default.getEligibleGroup({experimentId:"mobile_ai_setup_gen",defaultGroup:"control"})),[]),m=t.table===Wt().ev?void 0:t,h=(0,o.useCallback)((e=>{f().A.update((t=>{if(!1===t.open)throw new Error("Component should not render");return{...t,parentStore:e}}))}),[]),y=(0,o.useContext)(Ue().eh),b=(0,v().IS)((e=>({topbar:{position:"absolute",top:0,zIndex:2,padding:"16px 24px",width:"100%",display:"grid",gap:24,gridTemplateColumns:`minmax(${m?123:0}px, 1fr) minmax(0, 296px) minmax(0, 1fr)`},topbarMobile:{position:"absolute",top:50,zIndex:2,padding:"16px 16px 12px 19px",width:"100%",display:"flex",flexDirection:"column",gap:14},topbarHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},closeButton:{width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.palette.translucentGray[75],flexShrink:0},closeButtonHovered:{background:e.palette.translucentGray[200]},closeIcon:{width:10,color:e.icon.secondary,stroke:e.icon.secondary,strokeWidth:.5},mobileCloseIcon:{background:e.tint.regular,borderRadius:17,width:34,height:34},locationPickerWrapper:{overflow:"hidden"},input:{width:"100%",padding:"8px 12px",background:e.glass.wash,borderRadius:10},mobileInput:{boxShadow:"dark"===e.mode?e.inputBoxShadow:"0px 0px 0px 1px rgba(0, 0, 0, 0.05), 0px 8px 20px 0px rgba(0, 0, 0, 0.04), 0px 0px 1px 0px rgba(232, 232, 232, 0.8) inset",width:"100%",background:"dark"===e.mode?e.palette.translucentGray[100]:e.contentBackground,height:"46px",padding:"12px 12px",borderRadius:"100px",display:"flex",outline:"none",alignItems:"center",border:"none"},mobileSearchIcon:{margin:"5px 0 0 5px"},mobileInputInner:{color:e.palette.gray[900],width:"100%",justifyContent:"flex-end",padding:"10px 10px 10px 0px",height:"46px",borderRadius:"100px",display:"flex",alignItems:"center",outline:"none",boxShadow:"none",border:"none"},mobileClearButton:{margin:"0 5px 0 0"},divider:{position:"absolute",bottom:0,width:"100%",overflow:u&&p?"hidden":void 0}})),[m,u,p]),x=(0,r().K8)((()=>{const e=f().A.state;return!!e.open&&(Gt(e.origin)&&e.setupGenerator)}),[]);return(0,w.jsx)(Ht().EE,{onSizeChange:s,children:u&&p?(0,w.jsxs)("div",{style:b.topbarMobile,children:[(0,w.jsxs)("div",{style:b.topbarHeader,children:[m&&(0,w.jsx)("div",{style:b.locationPickerWrapper,children:(0,w.jsx)(fn,{currentSelectedStore:m,onSelect:h})}),(0,w.jsx)(I().A,{icon:e=>(0,Ge().u)({width:20,height:20}),style:b.mobileCloseIcon,color:"primary",onClick:y,ariaLabel:c.formatMessage({defaultMessage:"Close",id:"mobileDiscoverModal.closeButton.label"})})]}),(0,w.jsx)(z().A,{focusInitial:!1,value:n,onChange:a,style:b.mobileInput,placeholder:c.formatMessage({id:"workflowTemplatesOnboardingModal.searchPlaceholder",defaultMessage:"Search"}),format:z().C.Large,inputStyle:b.mobileInputInner,inputElementAttributes:{enterKeyHint:"search"},left:(0,w.jsx)("div",{style:b.mobileSearchIcon,children:(0,w.jsx)(J().Q,{iconGroup:Rt().C,variantName:"large",colorName:"secondary",overrideSize:e=>26})}),forceShowClearButton:0!==n.length,clearButtonStyle:b.mobileClearButton}),(0,w.jsx)("div",{style:b.divider,children:(0,w.jsx)(Vt().A,{type:"top",scrollerStore:l})})]}):(0,w.jsxs)("div",{style:b.topbar,children:[(0,w.jsxs)(d().Y1,{direction:"horizontal",gap:16,align:"center-left",children:[(0,w.jsx)(Ee().A,{style:b.closeButton,hoveredStyle:b.closeButtonHovered,onClick:y,children:(0,Ge().u)(b.closeIcon)}),m&&(0,w.jsx)("div",{style:b.locationPickerWrapper,children:(0,w.jsx)(fn,{currentSelectedStore:m,onSelect:h})})]}),x?null:(0,w.jsx)(Ft().N,{capture:!0,debugName:"TemplateSelectionStep",allowMenuList:n.length>0,wrapperTag:"div",children:(0,w.jsx)(z().A,{focusInitial:!0,value:n,onChange:a,style:b.input,placeholder:c.formatMessage({id:"workflowTemplatesOnboardingModal.searchPlaceholder",defaultMessage:"Search"})})}),(0,w.jsx)("div",{style:b.divider,children:(0,w.jsx)(Vt().A,{type:"top",scrollerStore:l})})]})})}let bn=0;function xn(e){let{modalState:t}=e;const n=(0,i().v3)(),a=(0,S().tz)(),{isPhone:l}=(0,i().Y0)(),c=(0,r().K8)((()=>"on"===g().default.getEligibleGroup({experimentId:"mobile_ai_setup_gen",defaultGroup:"control"})),[]),[u,p]=(0,o.useState)(bn),h=(0,r().uB)(void 0,qt().A),y=(0,o.useCallback)((e=>{const t=l&&c?167:e.height;bn=t,p(t)}),[l,c]),b=t.collectionTemplatesSearchQuery??"";!function(e){let{environment:t,searchQuery:n}=e;const i=(0,Dt().lW)(n,500,((e,t)=>e===t)),a=(0,r().K8)((()=>f().A.state.open?(0,hn().oA)():[]),[]);(0,o.useEffect)((()=>{const{state:e}=f().A;if(!e.open)return;if(e.flowId!==Sn.flowId&&(Sn={query:"",flowId:e.flowId}),Sn.query===i)return;const n=Sn.query.length??0,o=i.length>0,r=n>0;(0,s().u)({environment:t,event:{eventName:"template_picker_search_changed",eventProperties:{...(0,m().gM)(e),type:o?r?"search_edited":"search_started":"search_ended",shown_templates_for_search:o?(0,hn().Mq)(i,a).map((e=>e.templateId)):void 0}}}),Sn={query:i,flowId:e.flowId}}),[t,i,a])}({environment:n,searchQuery:b});const k=(0,v().IS)((e=>{const n=`\n\t\t\tlinear-gradient(\n\t\t\t\tto bottom,\n\t\t\t\ttransparent ${u+1}px,\n\t\t\t\twhite ${u+1.1}px\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\tto left,\n\t\t\t\tblack 16px,\n\t\t\t\ttransparent 17px\n\t\t\t)`;return{container:{maskImage:n,WebkitMaskImage:n,maskSize:"100% 100%",WebkitMaskSize:"100% 100%",maskPosition:"0 0",WebkitMaskPosition:"0 0",maskRepeat:"no-repeat",WebkitMaskRepeat:"no-repeat",display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"new_user_onboarding"===t.origin?12:u},content:{maxWidth:"calc(100% - 32px)",paddingBottom:16}}}),[t.origin,u]),j=(0,o.useCallback)((e=>{f().A.setState({...t,collectionTemplatesSearchQuery:e.target.value})}),[t]),C=(0,o.useCallback)((async e=>{const{title:o}=e??{},i=function(e){let{environment:t,parentStore:n,title:o}=e;const{currentSpaceStore:i,currentSpaceViewStore:r}=Ze().default.state;if(i&&r){if(n instanceof $t().h4)return Et().A5({environment:t,from:"team_workflow_templates_onboarding_modal",spaceStore:i,spaceViewStore:r,teamStore:n,andNavigate:!0,appendOrPrepend:"append",title:o});if(n instanceof $t().SL){const e="private",n="workflow_templates_onboarding_modal";return Nt().u4({name:"page_created",args:{type:e,from:n}}),Et().SE({environment:t,spaceStore:i,spaceViewStore:r,type:e,outlinerItemFrom:n,title:o})}}}({environment:n,parentStore:t.parentStore,title:o});if(!i)return;const r=await i;r&&(f().A.close({type:"accepted_new_page",newPageTitle:o,blockId:r.id}),(0,s().u)({environment:n,event:{eventName:"template_picker_empty_item_selected",eventProperties:{...(0,m().gM)(t),type:"page",created_block_id:r.id,created_block_type:r.getType()}}}))}),[n,t]),M=(0,Qt().Y4)(),P=(0,o.useCallback)((e=>{var o;t.open&&(!t.existingCollectionInfo||M?t.parentStore&&(0,Xt().my)({environment:n,parentStore:t.parentStore,collectionViewBlockStore:null===(o=t.existingCollectionInfo)||void 0===o?void 0:o.collectionViewBlockStore,title:null==e?void 0:e.title,onFinish:o=>{(0,s().u)({environment:n,event:{eventName:"template_picker_empty_item_selected",eventProperties:{...(0,m().gM)(t),type:"database",created_block_id:o.id,created_block_type:o.getType()}}}),zt().uK({environment:n,store:o,visitType:Kt().ig.Link,pageVisitSource:Lt().y8.Create,redirect:!0}),f().A.close({type:"accepted_empty_collection",newCollectionTitle:null==e?void 0:e.title,blockId:o.id})}}):f().A.close({type:"accepted_empty_collection",newCollectionTitle:null==e?void 0:e.title,blockId:t.existingCollectionInfo.collectionViewBlockStore.id}))}),[n,t,M]),A=(0,o.useCallback)(((e,t)=>{(0,me().handleSelectTemplateFromOnboardingModal)({environment:n,template:e,analyticsArgs:t})}),[n]),T=(0,Yt().U)("marketplace_workflow_templates_onboarding_modal",{forceOpenInNewTab:!0}),I=(0,o.useMemo)((()=>({onSelectTemplate:A,onAddEmptyPage:C,onAddEmptyDatabase:P,onMarketplaceClick:T})),[A,C,P,T]),_=(0,r().K8)((()=>{if(t.open)return t.setupGenerator}),[t]),B=(0,r().K8)((()=>null==_?void 0:_.store.state.prompt),[_]),L="collection_settings_create_view_source"!==(G=t.origin)&&"collection_settings_create_view_source_inline"!==G&&"collection_settings_add_new_database"!==G&&"collection_settings_add_new_database_inline"!==G&&"new_page_pills"!==G&&"mobile_new_page_pills"!==G;var G;const D=Gt(t.origin)&&_,R=(0,r().K8)((()=>{var e;return null===(e=Ze().default.state.currentUserStore)||void 0===e?void 0:e.getDisplayName(a)}),[a]),W=(0,o.useCallback)((async()=>{_&&await(0,qe().z)({setupGenerator:_,environment:n,parentStore:t.parentStore,isPhone:l})}),[_,n,t.parentStore,l]);return(0,o.useEffect)((()=>{"new_user_onboarding"===t.origin&&(null==_||_.setPrompt(void 0),t.parentStore&&"new_user_template_onboarding"!==t.version&&f().A.setState({...t,version:"new_user_template_onboarding"}))}),[t,t.origin,_]),t.parentStore?(0,w.jsxs)(w.Fragment,{children:["new_user_onboarding"!==t.origin&&(0,w.jsx)(vn,{parentStore:t.parentStore,searchQuery:b,scrollerStore:h,handleSearchQueryChange:j,handleTopbarSizeChange:y}),(0,w.jsx)(Ot().H,{type:Ut().A.Y,store:h,style:k.container,children:(0,w.jsxs)(d().Y1,{width:620,style:k.content,children:[D?(0,w.jsx)(dt,{currentUserName:R,prompt:B,onChange:null==_?void 0:_.setPrompt,onSubmit:W,overrides:{hideSuggestionPills:!0,hideLearnMore:!0}}):null,0===b.length?(0,w.jsx)(yn().oI,{parentStore:t.parentStore,showEmptyPageButton:L,onPromptSubmit:e=>{null==_||_.setPrompt((0,x().x9d)(e)),W()},...I}):(0,w.jsx)(hn().H,{query:b,showEmptyPageButton:L,...I})]})})]}):null}let Sn={query:"",flowId:void 0};n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var wn=()=>n(852353);function kn(){var e;const t=(0,r().O$)(f().A),n=(0,i().v3)(),{isPhone:a}=(0,i().Y0)(),s=(0,r().K8)((()=>t.open&&t.collectionTemplate?(0,m().OX)(t):null),[t]),l=(0,o.useCallback)((e=>{f().A.updatePreviewFocusViewTemplateId(e)}),[]),c=(0,v().IS)((e=>({grid:{position:"relative",flex:"1 0 0",maxHeight:a?"72%":"100%",overflowY:"auto"}})),[a]);return s&&t.open?(0,w.jsxs)(d().Y1,{direction:"vertical",height:"fill",gap:10,children:[(0,w.jsx)(ye().aZ,{caption:(0,w.jsx)(S().sA,{id:"workflowTemplatesOnboardingModal.selectViews",defaultMessage:"Select how you prefer to see your {collectionName}",values:{collectionName:null===(e=t.collectionTemplate)||void 0===e?void 0:e.value.targetCollection.name}})}),(0,w.jsx)("div",{style:c.grid,children:(0,w.jsx)(Me,{contentStyle:{padding:"5px 2px"},children:(0,w.jsx)(jn,{toggleViewSelection:e=>{(0,me().toggleFeatureSelectionInPreview)({template:e,environment:n})},updatePreviewFocusViewTemplateId:l,...s})})})]}):null}function jn(e){let{toggleViewSelection:t,updatePreviewFocusViewTemplateId:n,...o}=e;const a=(0,i().v3)(),{collectionTemplate:l,userCustomizations:d}=o,c=(0,v().DP)(),u=(0,r().K8)((()=>ge().globalWorkflowTemplates.allOfType({templateIds:l.value.templateItems.map((e=>e.pointer)),type:"collection_view"})),[l]),p=(0,r().K8)((()=>{const e=d.featureTemplateSelections.filter((e=>"collection_view"===e.template.type&&e.selected));return e.length>0?e[0].template.templateId:void 0}),[d]),g=(0,r().K8)((()=>1===d.featureTemplateSelections.filter((e=>e.selected&&"collection_view"===e.template.type)).length),[d]),f=(0,v().IS)((e=>({views:{display:"flex",flexDirection:"column",gap:12,padding:2},button:{display:"flex",width:"100%",flexDirection:"row",alignItems:"center",gap:8,justifyContent:"left",height:52,borderRadius:14,cursor:"pointer",fontSize:14,padding:16,lineHeight:"20px",color:e.text.primary,fontWeight:Re().Wy.medium},baseIconStyle:{flexShrink:0,height:20,width:20},overflowTooltip:{maxWidth:250}})),[]);return p?(0,w.jsx)("div",{style:f.views,children:u.map(((e,i)=>{const r=d.featureTemplateSelections.find((t=>t.template.templateId===e.templateId)),{name:l,type:p,format:h}=e.value,y=Boolean(null==r?void 0:r.selected),v="required"===(null==r?void 0:r.optionality)||g&&y,b=null==h?void 0:h.collection_view_icon;return(0,w.jsxs)(he,{isSelected:y,style:f.button,onClick:()=>{var i;if(v)return;const r=!y,l=new Set(d.featureTemplateSelections.filter((e=>e.selected)).map((e=>e.template.templateId)));(0,s().u)({environment:a,event:{eventName:"workflow_template_onboarding_feature_select",eventProperties:{selecting:r?"selecting":"deselecting",previously_selected_feature_template_ids:[...l],feature_template_id:e.templateId,feature_template_type:e.type,step:"viewsSelection",...(0,m().gM)(o)}}}),t(e);const c=(null===(i=o.previewCollectionInfo)||void 0===i?void 0:i.focusViewTemplateId)===e.templateId;if(r)n(e.templateId);else if(c){var p;const t=null===(p=u.find((t=>l.has(t.templateId)&&t.templateId!==e.templateId)))||void 0===p?void 0:p.templateId;n(t)}},children:[b?(0,w.jsx)(Ie().p,{theme:c,icon:b,style:{...f.baseIconStyle,...y&&{fill:c.text.uiBluePrimary}},size:f.baseIconStyle.width}):wn().ZU[p]({...f.baseIconStyle,...y&&{fill:c.text.uiBluePrimary}}),(0,w.jsx)(de().j,{tooltipStyle:f.overflowTooltip,placement:ee().W.Right,children:l})]},i)}))}):null}function Cn(){const e=(0,r().O$)(f().A),t=(0,i().v3)(),n=(0,r().K8)((()=>"on"===g().default.getEligibleGroup({experimentId:"mobile_ai_setup_gen",defaultGroup:"control"})),[]);(0,p().A)({shouldPreserveTextSelection:e.open,shouldPreserveBlockSelection:!1,shouldRestoreSelection:!0}),(0,o.useEffect)((()=>{e.open&&l().H6.CollectionViewBlock.load()}),[e.open]);const a=(0,o.useCallback)((()=>{if(!e.open)return;const n=e.setupGenerator;n&&n.trackSessionEnded({reason:"dismissed"}),(0,s().u)({environment:t,event:{eventName:"workflow_template_onboarding_dismissed",eventProperties:{...(0,m().gM)(e),step:(0,m().hq)(e),dismissed_by:"click_outside"}}})}),[e,t]),u=(0,r().K8)((()=>e.open?(0,m().hq)(e):void 0),[e]),h=(0,o.useCallback)((()=>{f().A.close({type:"canceled"})}),[]),y=(0,o.useMemo)((()=>({width:{type:"fixed",length:1e3},height:{type:"fixed",length:650}})),[]);return u&&e.open?(0,w.jsx)(c().s,{isOpen:!0,areaConstraint:e=>{let{displayMode:t}=e;return"phone"===t&&n?{height:{type:"fill"},width:{type:"fill"}}:y},onDismiss:a,onClosed:h,backgroundAppearance:"wash",allowMenuList:!0,keyboardAreaPriority:1,render:e=>{let{sizeRange:t}=e;return(0,w.jsx)(d().Y1,{style:t,children:(0,w.jsx)(An,{currentModalStep:u})})}}):null}function Mn(e){let{children:t}=e;return(0,w.jsx)(u().K,{fallback:()=>null,from:"WorkflowTemplatesOnboardingModal",children:t})}function Pn(){return(0,w.jsx)(Mn,{children:(0,w.jsx)(Cn,{})})}function An(e){let{currentModalStep:t,overrides:n}=e;const o=(0,r().K8)((()=>f().A.state),[]);if(!o.open)return null;switch(t){case"templateSelection":return(0,w.jsx)(xn,{modalState:o});case"setupGeneratorInput":return(0,w.jsx)(at,{overrides:n});case"setupGeneratorBuilding":return(0,w.jsx)(st,{overrides:n});case"features":return(0,w.jsx)(ye().If,{overrides:n,featuresStep:!0,children:(0,w.jsx)(ve,{overrides:n})});case"viewsSelection":return(0,w.jsx)(ye().If,{overrides:n,children:(0,w.jsx)(kn,{})});default:(0,a().HB)(t)}}},59400:(e,t,n)=>{n.d(t,{nR:()=>c,m$:()=>s,m4:()=>l,Dy:()=>d,FZ:()=>p});n(296540);var o=()=>n(645873),i=n(474848);function r(e){const{shouldShowSpinner:t,collectionSettingsProps:o}=e;return(0,i.jsx)(n(735695).Ay,{collectionSettingsStore:o.collectionSettingsStore,fullHeight:o.fullHeight,hideDesktopHeader:o.hideDesktopHeader,children:t&&(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",overflow:"hidden",paddingBottom:20},children:(0,i.jsx)(n(331542).A,{})})})}const a=new(o().O2)("collectionSettings",(()=>Promise.all([n.e(75134),n.e(16471),n.e(58550),n.e(44711),n.e(53321),n.e(90825),n.e(96346),n.e(55373),n.e(37353),n.e(29151),n.e(78191),n.e(62475),n.e(3151),n.e(98629),n.e(92845),n.e(84468),n.e(5605),n.e(48486),n.e(95794),n.e(13677),n.e(56952),n.e(48632),n.e(75078),n.e(25497),n.e(74562),n.e(27711),n.e(4422),n.e(11341),n.e(46414),n.e(95168),n.e(28271),n.e(34877),n.e(36908),n.e(17254),n.e(84185),n.e(32421),n.e(15315),n.e(24587),n.e(78708),n.e(43777),n.e(74752),n.e(91194),n.e(81197),n.e(98659),n.e(20502),n.e(6266),n.e(8184),n.e(83884),n.e(65881),n.e(99809),n.e(93282),n.e(43678),n.e(15019),n.e(90978),n.e(3910),n.e(77213),n.e(6912),n.e(30291),n.e(19930),n.e(58102),n.e(26483),n.e(6463),n.e(40925),n.e(282),n.e(61349),n.e(62573),n.e(1440),n.e(63996),n.e(66559),n.e(35986),n.e(92924),n.e(64819),n.e(97339),n.e(55717),n.e(63797),n.e(21367),n.e(22686),n.e(99108)]).then(n.bind(n,409198)))),s=(0,o()._h)(a,(e=>e.CollectionSettings),{renderLoading:(e,t)=>(0,i.jsx)(r,{shouldShowSpinner:e,collectionSettingsProps:t})}),l=(0,o()._h)(a,(e=>e.CollectionSettingsButtonOptions)),d=(0,o()._h)(a,(e=>e.CollectionSettingsPropertyTypeMenuItem)),c=(0,o()._h)(a,(e=>e.CollectionEditButtonAutomationOption)),u=new(o().O2)("TableHeaderPropertyCreationMenu",(()=>Promise.all([n.e(75134),n.e(16471),n.e(58550),n.e(44711),n.e(53321),n.e(90825),n.e(96346),n.e(55373),n.e(37353),n.e(29151),n.e(78191),n.e(92845),n.e(84468),n.e(5605),n.e(48486),n.e(95794),n.e(13677),n.e(56952),n.e(48632),n.e(75078),n.e(25497),n.e(74562),n.e(27711),n.e(4422),n.e(11341),n.e(46414),n.e(95168),n.e(28271),n.e(34877),n.e(36908),n.e(17254),n.e(84185),n.e(32421),n.e(15315),n.e(24587),n.e(78708),n.e(43777),n.e(74752),n.e(91194),n.e(81197),n.e(98659),n.e(20502),n.e(6266),n.e(8184),n.e(83884),n.e(65881),n.e(99809),n.e(93282),n.e(43678),n.e(15019),n.e(90978),n.e(3910),n.e(77213),n.e(61349),n.e(35986),n.e(43935)]).then(n.bind(n,908800)))),p=(0,o()._h)(u,(e=>e.TableHeaderPropertyCreationMenu))},63467:(e,t,n)=>{n.d(t,{y:()=>c});var o=()=>n(637997),i=()=>n(267419);const r={ko:()=>n.e(2268).then(n.bind(n,224434)),es:()=>n.e(95264).then(n.bind(n,196425)),de:()=>n.e(35390).then(n.bind(n,653703)),fr:()=>n.e(3272).then(n.bind(n,94677)),pt:()=>n.e(27315).then(n.bind(n,766869)),zh:()=>n.e(69945).then(n.bind(n,516814)),ja:()=>n.e(77757).then(n.bind(n,824432)),da:()=>n.e(9423).then(n.bind(n,440761)),fi:()=>n.e(59337).then(n.bind(n,462135)),nb:()=>n.e(2040).then(n.bind(n,937314)),nl:()=>n.e(51106).then(n.bind(n,530897)),sv:()=>n.e(53631).then(n.bind(n,895222)),id:()=>n.e(69945).then(n.bind(n,516814)),th:()=>n.e(69945).then(n.bind(n,516814)),vi:()=>n.e(69945).then(n.bind(n,516814))};let a=!1,s=!1;async function l(e){for(const[n,i]of Object.entries(e.emojiLocaleKeywords)){var t;o().fB[n]={...o().fB[n],keywords:[...i,...(null===(t=o().fB[n])||void 0===t?void 0:t.keywords)||[]]}}await i().A.waitUntilLoaded(),i().A.update((t=>{let{emojiByName:n,...o}=t;return{...o,emojiByName:{...n,...e.emojiByName}}}))}async function d(){if(a)return;const[e]=n(662303).locale.split("-");e in r&&(await l(await r[e]()),a=!0)}const c=(0,n(279900).A)((async()=>{await async function(){s||(await l(await n.e(51872).then(n.bind(n,443716))),s=!0)}(),await d()}))},73223:(e,t,n)=>{n.r(t),n.d(t,{dismissTutorial:()=>c,resetTutorials:()=>u,tutorialAdvanceToStep:()=>p,tutorialAdvanceToStepAfter:()=>g,tutorialGoToNextStep:()=>l,tutorialGoToPrevStep:()=>d});var o=()=>n(541235),i=()=>n(751156),r=()=>n(755199),a=()=>n(739135),s=()=>n(765957);function l(e,t){var n;const{currentUserSettingsStore:o}=s().default.state;if(!o)return;const i=null===(n=o.getSettings())||void 0===n?void 0:n.tutorials;m({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{r().mJ({userSettingsStore:o,transaction:e,data:{tutorials:{...i,[t]:(0,a().i9)(o,t)}}})},userId:o.id})}function d(e,t){var n;const{currentUserSettingsStore:o}=s().default.state;if(!o)return;const i=null===(n=o.getSettings())||void 0===n?void 0:n.tutorials;m({userAction:"TutorialActions.prevStep",environment:e,perform:e=>{r().mJ({userSettingsStore:o,transaction:e,data:{tutorials:{...i,[t]:(0,a().KD)(o,t)}}})},userId:o.id})}function c(e,t){var n;const{currentUserSettingsStore:i}=s().default.state;if(!i)return;const a=null===(n=i.getSettings())||void 0===n?void 0:n.tutorials;(null==a?void 0:a[t])!==o().YD&&m({userAction:"TutorialActions.dismissTutorial",environment:e,perform:e=>{r().mJ({userSettingsStore:i,transaction:e,data:{tutorials:{...a,[t]:o().YD}}})},userId:i.id})}function u(e){const{currentUserSettingsStore:t}=s().default.state;t&&m({userAction:"TutorialActions.resetTutorialsDebug",environment:e,perform:e=>{r().mJ({userSettingsStore:t,transaction:e,data:{tutorials:{}}})},userId:t.id})}function p(e,t,n){var i;const{currentUserSettingsStore:l}=s().default.state;if(!l||(0,a().x$)(l,t))return;const d=(0,a().gt)(l,t);o().c$[t].steps.findIndex((e=>e.id===d))>=o().c$[t].steps.findIndex((e=>e.id===n))||r().mJ({userSettingsStore:l,transaction:e,data:{tutorials:{...null===(i=l.getSettings())||void 0===i?void 0:i.tutorials,[t]:n}}})}function g(e,t,n){if((0,a().ll)(n))return;const o=(0,a().tb)(t,n);o&&p(e,t,o)}function m(e){return i().createAndCommit({...e,canUndo:!1})}},77279:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const i=new o},97059:(e,t,n)=>{n.d(t,{W:()=>f,w:()=>m});n(944114);var o=()=>n(585515),i=()=>n(577449),r=()=>n(161479),a=()=>n(545285),s=()=>n(763824),l=()=>n(780054),d=()=>n(870618),c=()=>n(670631),u=()=>n(227440),p=()=>n(217429),g=()=>n(540758);async function m(e){const{environment:t}=e;return(await s().lX(Object.keys(c().A.state.offlinePages||{}),100,(e=>async function(e){const{environment:t,pageId:n}=e,s={page:{id:n,spaceId:(0,r().e)(void 0)},baseUrl:l().A.domainBaseUrl,publicDomainName:l().A.publicDomainName,shouldTraverseToggleBlocks:!0,limit:1/0,cursor:{stack:[]},verticalColumns:!1},c=[];return await o().T(s,i().h.sideEffect((e=>((0,a().u)(e)&&c.push(e.id),Promise.resolve())),i().h.fromMonomorphicFunctionUnsafe((async e=>{const n=await d().h7({environment:t,pointer:e,useInMemoryCacheOnly:!1,skipAccessWrites:!0});return null==n?void 0:n.model})))),c}({environment:t,pageId:e})))).flat()}function f(e,t){return!u().A.state.online&&(e.device.isElectron||e.device.isMobileNative)&&p().default.checkGate({gateName:"download_for_offline"})&&!(0,g().Bd)(t)}},105819:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,pencilLineIcon:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.63 4.12 14.99 11.76",svg:(0,n(474848).jsx)("path",{d:"m13.987 5.682-.684.684-1.288-1.288.692-.691a.91.91 0 0 1 1.28 0c.35.35.35.93 0 1.28zm-9.433 9.433 7.914-7.914-1.289-1.289-7.92 7.908c-.122.122-.214.29-.274.457l-.336 1.082c-.06.229.153.442.366.366l1.082-.335q.252-.07.457-.275m12.446.76H5.61l1.25-1.25H17a.625.625 0 1 1 0 1.25"})},i=(0,n(340498).wt)("pencilLine",o)},115562:(e,t,n)=>{n.d(t,{W:()=>l});n(296540);var o=()=>n(819121),i=()=>n(401497),r=()=>n(955825),a=()=>n(677195),s=n(474848);function l(e){const{selectorSize:t="normal",...n}=e,{disabled:l,checked:d}=n,[c,u]=(0,o().A)(),p=function(e){const{checked:t,disabled:n,isFocusVisible:o,selectorSize:r}=e;return(0,i().IS)((e=>({root:{position:"absolute",display:"flex",width:"large"===r?15:11,height:"large"===r?15:11,margin:1.5,justifyContent:"center",alignItems:"center",flexShrink:0,borderRadius:"large"===r?2:1,transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${n?e.tint.regular:e.blueColor}`,background:n?e.tint.regular:e.blueColor}:{boxShadow:`0 0 0 1.5px ${n?e.icon.quaternary:e.stroke.input}`,background:e.surface.page},...o&&{boxShadow:e.buttonBlueFocusRing}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"large"===r?18:void 0,height:"large"===r?18:void 0,...n?{pointerEvents:"none"}:{cursor:"pointer"}},icon:{color:e.text.contrastPrimary,width:"large"===r?12:10,height:"large"===r?12:10,ariaHidden:!0}})),[r,t,n,o])}({checked:d,disabled:l,selectorSize:t,isFocusVisible:u});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{ref:c,type:"checkbox",style:p.input,...n}),(0,s.jsx)("span",{...(0,r().AH)(p.root,l?{}:{pseudoActive:p.active}),children:d&&(0,a().R)(p.icon)})]})}},132389:(e,t,n)=>{n.d(t,{A:()=>i});n(296540);var o=n(474848);function i(e){const t={display:"inline-block",minWidth:e.size,minHeight:e.size};return"x"===e.axis?t.minHeight=1:"y"===e.axis&&(t.minWidth=1),(0,o.jsx)("div",{style:t})}},132855:(e,t,n)=>{n.r(t),n.d(t,{arrowInCircleUpFillIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,n(474848).jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 0 0-15.25 7.625 7.625 0 0 0 0 15.25m3.042-8.07a.625.625 0 0 1-.884 0L10.625 8.02v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 1 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"})},i=(0,n(340498).wt)("arrowInCircleUpFill",o)},173019:(e,t,n)=>{n.d(t,{r:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("pencil",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},200277:(e,t,n)=>{n.d(t,{$:()=>p,N:()=>c});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(430670),n(581454);var o=()=>n(536095),i=()=>n(663077),r=()=>n(496603),a=()=>n(534177),s=()=>n(299545),l=()=>n(913454),d=()=>n(204067);function c(e,t){const n=(0,d().Xg)(e,t),o=new Set(function(e){const t=e.getParentBlockStore();if(null==t||!t.isDefined())return[];return(null==t?void 0:t.getCollectionViewStores().map((e=>e.getName())).filter(a().O9))??[]}(t));return function(e){const t=new Set(e.map((e=>e.templateId))),n=[];for(const o of e)n.push(...u(o).filter((e=>!t.has(e))).map((e=>l().globalWorkflowTemplates.fromId(e))).filter(i().bz).filter((e=>!(0,i().Sz)(e))));return n}(n).filter((e=>"collection_view"!==e.type||!o.has(e.value.name??"")))}function u(e){return"compound"===e.type||"collection"===e.type?e.value.templateItems.filter((e=>"optionalDefaultOn"===e.optionality||"optionalDefaultOff"===e.optionality)).map((e=>e.pointer)):[]}function p(e){let{persona:t,parentStore:n}=e;const i=t?(0,o().Qf)({persona:t}):[],a=l().globalWorkflowTemplates.allOfType({templateIds:i??[],type:"collection"}),d=r().hS(function(e){let{collectionTemplates:t,parentStore:n}=e;if(!n)return t;if((0,s().Yu)(n))return t;const o=(0,s().$R)(n)?n.getTeamPageStores():n.getContentStores(),i=new Set((0,r().oE)(o.flatMap((e=>e.getOwnedAndLinkedCollectionStores().map((e=>e.getWorkflowTemplateId()))??[])))),a=[],l=[];for(const r of t)i.has(r.templateId)?a.push(r):l.push(r);return[...l,...a]}({collectionTemplates:[...a,...l().globalWorkflowTemplates.allOfType({templateIds:(0,o().dj)(),type:"collection"})],parentStore:n}),(e=>e.templateId));return d}},207207:(e,t,n)=>{n.d(t,{J:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.62 2.62 15.26 15.26",svg:(0,n(474848).jsx)("path",{d:"M8.875 2.625a6.25 6.25 0 1 0 3.955 11.09l3.983 3.982a.625.625 0 1 0 .884-.884l-3.983-3.982a6.25 6.25 0 0 0-4.84-10.205m-5 6.25a5 5 0 1 1 10 0 5 5 0 0 1-10 0"})},i=(0,n(340498).wt)("magnifyingGlass",o)},240865:(e,t,n)=>{n.d(t,{V:()=>r});var o=()=>n(56366),i=()=>n(765957);function r(e){return(0,o().K8)((()=>{var t;return e?e.getMemberCountFromPublicSpaceData()??void 0:(null===(t=i().default.state.currentSpaceStore)||void 0===t?void 0:t.getMemberCountFromPublicSpaceData())??void 0}),[e])}},271084:(e,t,n)=>{n.d(t,{k:()=>i});n(581454);class o extends(()=>n(757695))().Store{getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}getSortedUserIds(){return Object.entries(this.state||{}).sort(((e,t)=>{let[n,o]=e,[i,r]=t;return r-o})).map((e=>{let[t,n]=e;return t}))}}const i=new o;(0,n(604341).exposeDebugValue)("UserSimilarityStore",i)},279047:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(296540),i=()=>n(56366),r=()=>n(401497),a=()=>n(141333),s=n(474848);const l=4;function d(e){let{scrollerStore:t,type:n,dividerColor:d,errorMargin:c=l}=e;const u=(0,i().K8)((()=>t.state.elementRef),[t]),p=(0,a().Xg)(u),g=(0,a().CR)(u),m=(0,a().sj)(u),f=(0,a().yE)(u),h=(0,a().o7)(u),y=(0,a().HJ)(u),v=(0,o.useMemo)((()=>{if(!t)return!1;switch(n){case"top":return Math.round(f)>c;case"bottom":return Math.abs(Math.round(f)-(g-h))>c;case"left":return Math.round(m)>c;case"right":return Math.abs(Math.round(m)-(p-y))>c}}),[t,n,c,p,g,m,f,h,y]),b="left"===n||"right"===n,x=(0,r().IS)((e=>({divider:{flexShrink:0,boxShadow:v?b?`1px 0 0 ${d??e.regularDividerColor}`:`0 1px 0 ${d??e.regularDividerColor}`:"0 0 0 transparent",transition:"box-shadow 300ms",...b?{width:1,height:"100%",marginLeft:-1}:{height:1,width:"100%",marginTop:-1},zIndex:99}})),[b,v,d]);return(0,s.jsx)("div",{style:x.divider})}},279900:(e,t,n)=>{function o(e){let t,n,o;return async function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t?(o=r,n||(n=t.then((()=>(n=void 0,t=e(...o),t))),n)):(t=e(...r),t)}}n.d(t,{A:()=>o})},320865:(e,t,n)=>{n.d(t,{A:()=>i});n(296540);var o=n(474848);const i=function(){return(0,o.jsx)(n(678553).Ay,{title:(0,o.jsx)(n(331542).A,{})})}},380048:(e,t,n)=>{n.d(t,{I:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("chevronLeft",{viewBox:"0 0 16 16",directional:!0,svg:(0,o.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},381138:(e,t,n)=>{n.d(t,{q:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("search",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M.281 6.438c0-.875.164-1.696.492-2.461a6.484 6.484 0 011.375-2.032A6.237 6.237 0 016.64.078 6.2 6.2 0 019.11.57c.77.328 1.447.787 2.03 1.375a6.374 6.374 0 011.368 2.032c.333.765.5 1.586.5 2.46 0 .688-.107 1.342-.32 1.961a6.28 6.28 0 01-.868 1.696l3.563 3.578c.11.104.19.226.242.367.057.14.086.29.086.445 0 .22-.05.417-.149.594a1.122 1.122 0 01-1 .57c-.156 0-.307-.028-.453-.086a1.058 1.058 0 01-.382-.25l-3.586-3.585c-.5.333-1.047.596-1.641.789a6.089 6.089 0 01-1.86.28 6.237 6.237 0 01-2.468-.491 6.4 6.4 0 01-2.024-1.367A6.509 6.509 0 01.773 8.913a6.256 6.256 0 01-.492-2.476zm1.664 0c0 .65.12 1.26.36 1.828a4.775 4.775 0 001.015 1.5c.433.427.933.763 1.5 1.007a4.548 4.548 0 001.82.368c.652 0 1.261-.123 1.829-.368a4.747 4.747 0 002.508-2.507 4.567 4.567 0 00.367-1.829c0-.645-.123-1.252-.367-1.82a4.776 4.776 0 00-1.016-1.5A4.578 4.578 0 008.469 2.11a4.567 4.567 0 00-1.828-.367c-.646 0-1.253.123-1.82.367a4.667 4.667 0 00-1.5 1.008c-.433.432-.772.932-1.016 1.5a4.633 4.633 0 00-.36 1.82z"})})},399762:(e,t,n)=>{n.d(t,{O:()=>d,q:()=>c});n(296540);var o=()=>n(401497),i=()=>n(381349),r=()=>n(284371),a=()=>n(288722),s=()=>n(881690),l=n(474848);function d(e){const{value:t,color:n,format:d,showEllipsis:c,onClickRemove:u,showRemoveButton:p,isSingle:g,shouldShrink:m,hideTooltip:f,description:h,tooltipPlacement:y,...v}=e,b=(0,o().DP)(),x=(0,o().IS)((e=>({token:{...c&&r().RC}})),[c]),{textColor:S,backgroundColor:w}=(0,i().LD)(b,n);return t?(0,l.jsx)(s().A,{format:d,value:(0,l.jsx)(a().A,{children:t}),description:h,onClickRemove:u,showRemoveButton:p,isSingle:g,color:S,backgroundColor:w,shouldShrink:m,tooltipPlacement:y,showTooltip:f?"never":"overflow",style:x.token,...v}):null}function c(e){const{value:t,color:n,format:d,showEllipsis:c,onClickRemove:u,showRemoveButton:p,isSingle:g,shouldShrink:m,groupColor:f,tooltipPlacement:h,description:y,hideTooltip:v,...b}=e,x=(0,o().DP)(),S=(0,o().IS)((()=>({token:{...c&&r().RC}})),[c]);if(!t)return null;const{textColor:w,backgroundColor:k}=(0,i().LD)(x,n??f??"gray");let j;return j=n||(f||"gray"),(0,l.jsx)(s().A,{format:d,value:(0,l.jsx)(a().A,{children:t}),description:y,onClickRemove:u,showRemoveButton:p,isSingle:g,color:w,backgroundColor:k,shouldShrink:m,showTooltip:v?"never":"overflow",style:S.token,isRound:!0,showColoredDot:j,tooltipPlacement:h,...b})}},406533:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>i,questionMarkCircleIcon:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,o.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},r=(0,n(340498).wt)("questionMarkCircle",i)},458366:(e,t,n)=>{n.d(t,{B2:()=>T,F1:()=>j,Kc:()=>w,NN:()=>A,UY:()=>S,br:()=>P,lA:()=>C,lh:()=>k,pi:()=>v,w_:()=>x,zP:()=>b});n(898992),n(737550);var o=()=>n(584262),i=()=>n(443239),r=()=>n(970013),a=()=>n(713998),s=()=>n(882262),l=()=>n(415566),d=()=>n(177256),c=()=>n(72135),u=()=>n(919709),p=()=>n(496603),g=()=>n(534177),m=()=>n(939768),f=()=>n(720665),h=()=>n(492414),y=()=>n(972435);function v(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function b(e){switch(e){case"table":return"table";case"board":return"board";case"list":return"list";case"gallery":return"gallery";case"feed":return"feed";case"relation":case"relation_section":return"relation_section";case"timeline":return"timeline";case"calendar":return"calendar";case"page":return"page_properties";case"compact_page":return"compact_page";case"mini":return"mini_peek";case"form_editor":case"form_viewer":case"property_module":return"property_module";default:(0,g().HB)(e)}}function x(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function S(e){const{store:t,property:n,propertySchema:i}=e,r=null==i?void 0:i.type;if("title"===r)return(0,h().Ay)({store:t,fullyQualified:!1,pageVisitSource:o().y8.LinkInPage});{const e=t.getPropertyValue(n);return a().UY(r,e)}}function w(e){let t=(0,u().k4p)(e);if(!t||""===t.trim()||t.trim().includes(" "))return{domain:void 0,restOfUrl:void 0};t=t.trim();let n=m().qg(t),o=n.host;if(n.protocol&&o||(n=m().qg(`http://${t}`),o=n.host),!o)return{domain:void 0,restOfUrl:void 0};o&&(o=o.replace(/^www./i,""));const i=t.toLowerCase().indexOf(o.toLowerCase());if(-1===i)return{domain:void 0,restOfUrl:void 0};o=t.slice(i,i+o.length);return{domain:o,restOfUrl:t.slice(i+o.length)}}function k(e){const{numberValue:t,numberFormat:n,numberShowAs:o}=e;if(!(p().yr(t)||f().pN(t)||"bar"!==(null==o?void 0:o.type)&&"ring"!==(null==o?void 0:o.type))){const e=y().A.getIntl();return"percent"===n?c().ZV(t,"percent",e):`${t} / ${o.maxValue}`}}function j(e){const{property:t,collectionStore:n}=e,o=n.isSyncedCollection();return Boolean(o)&&(0,i().u)(t)}function C(e,t){switch(e){case"side_peek":return{icon:d().A,tooltip:y().A.formatMessage(M.openInSidePeekTooltip),caption:t?"":y().A.formatMessage(M.openAsPageTitle)};case"center_peek":return{icon:l().q,tooltip:y().A.formatMessage(M.openInCenterPeekTooltip),caption:t?"":y().A.formatMessage(M.openAsPageTitle)};case"full_page":return{icon:s().m,tooltip:y().A.formatMessage(M.openAsPageTooltip),caption:t?"":y().A.formatMessage(M.openAsPageTitle)};default:(0,g().HB)(e)}}const M=(0,n(959013).YK)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function P(e){const{store:t,additionalStores:n,collectionContextStore:o}=e,i=t.getAssociatedCollectionStore();return!("collectionTypedView"!==(null==o?void 0:o.contextType)||!i)&&n.some((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==i.id}))}function A(e){return"form_editor"===e||"form_viewer"===e}function T(e){return Boolean(e&&!r().dA.includes(e.type))}},465364:(e,t,n)=>{n.d(t,{$N:()=>I,D5:()=>_,GB:()=>P,M9:()=>C,Pt:()=>T,eW:()=>A,jo:()=>L,v7:()=>M});n(944114),n(898992),n(803949),n(581454);var o=()=>n(244641),i=()=>n(787626),r=()=>n(713998),a=()=>n(597777),s=()=>n(604995),l=()=>n(416504),d=()=>n(519831),c=()=>n(496603),u=()=>n(534177),p=()=>n(299709),g=()=>n(317001),m=()=>n(520861),f=()=>n(878060),h=()=>n(44729),y=()=>n(246826),v=()=>n(319975),b=()=>n(519839),x=()=>n(695625),S=()=>n(397248),w=()=>n(217429),k=()=>n(630116),j=()=>n(747671);function C(e){const{environment:t,droppedStores:n,duplicate:r,calendarBy:c,transaction:u,collectionContextStore:f,duplicateActions:y}=e,v=o().c9.fromMillis(e.startOfDay);let x=!0;for(const o of n){const t=e.collectionStore?e.collectionStore:(0,b().Dj)({store:o,collectionContextStore:f});if(o.getParentTable()===d().Vl||!t){x=!1;break}h().X$({childStore:o,parentStore:t,transaction:u})||(x=!1)}const S=(0,m().T)({environment:t,droppedStores:n,duplicate:r,transaction:u,collectionStore:e.collectionStore,duplicateActions:y});for(const o of S){const n=e.collectionStore?e.collectionStore:(0,b().Dj)({store:o,collectionContextStore:f});if(!n)continue;const r=n.getMappedProperty(c),d=o.getPropertyStore(r),m=(0,i().b)(d.getValue())||s().Ec((0,l().P)()),h=s().kW(m,(0,l().P)()),y=v.toFormat(s().tr);let S;if("date"===h.type||"datetime"===h.type)S={...h,start_date:y};else{const e=s().AA(h,(0,l().P)());if(!e.end)return;const t={...h,start_date:y},n=s().AA(t,(0,l().P)()).start.diff(e.start,"days"),o=e.end.plus(n).toFormat(s().tr);S={...h,start_date:y,end_date:o}}const w=s().kW(S,a().$K(m)||(0,l().P)());(0,g().j)({environment:t,store:o,collectionStore:n,collectionContextStore:f,shouldCoerce:!0,groupsPointer:[],transaction:u,alreadyMovedToCollection:x}),_({environment:t,type:"dateValue",propertyId:r,store:o,transaction:u,dateValue:w}),(0,p().E)({environment:t,collectionContextStore:f,block_id:o.id,property:r,property_type:"date",from:"calendar"})}}function M(e){const{calendarStore:t,direction:n,targetStore:o}=e;t.setState({...t.state,isDragging:!0,targetStore:o,direction:n,temporaryValue:void 0})}function P(e){const{calendarStore:t,x:n,y:r,calendarBy:d}=e,u=t.state;if(u.isDragging){const e=(0,i().b)(u.targetStore.getPropertyStore(d).getValue());if(!e)return;const p=s().kW(e,(0,l().P)()),g=u.temporaryValue||e,m=s().kW(g,(0,l().P)()),f=[];u.dayStoreMap.forEach(((e,t)=>{f.push({store:e,timestamp:t})}));const h=f.find((e=>{let{store:t}=e;const o=x().T.getRectFromStore(t);return Boolean(o&&S().ux(o,n,r))}));let y;if(h){const e=o().c9.fromMillis(h.timestamp),t=e.endOf("day"),n=e.toFormat(s().tr);if(p){const i=s().AA(p,(0,l().P)());if(u.direction===j().Q.Left)if(o().IX.fromDateTimes(e,t).contains(i.start))y=p;else{let e;e="datetimerange"===p.type||"daterange"===p.type?{...p,start_date:n,end_date:p.end_date}:"datetime"===p.type?{type:"datetimerange",start_date:n,start_time:p.start_time,end_date:p.start_date,end_time:p.start_time,time_zone:p.time_zone,reminder:p.reminder}:{type:"daterange",start_date:n,end_date:p.start_date,reminder:p.reminder};const t=s().AA(e,(0,l().P)());y=!i.end&&t.start>i.start||i.end&&t.start>i.end?m:e}else if(i.end?o().IX.fromDateTimes(e,t).contains(i.end):o().IX.fromDateTimes(e,t).contains(i.start))y=p;else{let e;e="date"===p.type?{...p,type:"daterange",end_date:n}:"datetime"===p.type?{...p,type:"datetimerange",end_date:n,end_time:"00:00"}:{...p,end_date:n};const t=s().AA(e,(0,l().P)());y=t.end&&t.end<t.start?m:e}}}if(y&&!c().n4(m,y)){const e=s().kW(y,a().$K(g)||(0,l().P)());t.setState({...u,temporaryValue:e})}}}function A(e){const{environment:t,calendarStore:n,calendarBy:o,transaction:i}=e,r=n.state;r.isDragging&&r.temporaryValue&&(_({type:"dateValue",environment:t,dateValue:r.temporaryValue,propertyId:o,store:r.targetStore,transaction:i}),n.setState({...n.state,isDragging:!1}))}function T(e){const{calendarStore:t}=e,n=t.state;n.isDragging&&t.setState({...n,isDragging:!1})}function I(e){const{environment:t,store:n,collectionStore:i,collectionContextStore:a,startDayOfWeek:d,transaction:c}=e,u=a.dateRangeStartStore.state,p=(0,l().P)(),m=a.normalizedQueryStore.state;if(!m||!m.calendar_by)return;const f=(null==i?void 0:i.getMappedProperty(m.calendar_by))??m.calendar_by,h=s().hp(u,d,p),v=h.startOf("month"),b=h.endOf("month"),x=o().c9.now().startOf("day");let S;return S=o().IX.fromDateTimes(v,b).contains(x)?s().p6(x.valueOf(),p):s().p6(s().iB(u,d,p).valueOf(),p),y().zv({store:n.getPropertiesStore(),data:{[f]:r().m5(S)},transaction:c}),(0,g().j)({environment:t,store:n,collectionStore:i,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:c}),n}function _(e){const{environment:t,store:n,propertyId:o,transaction:i}=e;let a;"timestamp"===e.type?a=s().p6(e.timestampMs.valueOf(),(0,l().P)()):"dateValue"===e.type?a=e.dateValue:(0,u().HB)(e);const d=n.getPropertyValue(o);if(a&&function(e){const{propertyId:t,oldDateValue:n,newPersistedDate:o,store:i}=e;if(n||!o||void 0!==o.reminder)return!1;if(!w().default.checkGate({gateName:"adoption_reminder_collection_default"}))return!1;const r=B(t,i);if(void 0===r)return!1;return!0}({propertyId:o,oldDateValue:d,newPersistedDate:a,store:n})){const e=B(o,n);void 0!==e&&(a={...a,reminder:e})}const c=r().m5(a);y().zv({store:n.getPropertiesStore(),data:{[o]:c},transaction:i}),f().O({environment:t,store:n,dateProperty:{id:o,oldValue:d,newValue:c}})}function B(e,t){const n=t.getAssociatedCollectionStore();if(!n)return;const o=n.getSchema();if(!o)return;const i=o[e];return i&&"date"===i.type?i.default_reminder:void 0}function L(e){const{environment:t,collectionStore:n,calendarBy:o,store:i,insertStores:r,collectionContextStore:a,transaction:s}=e,l=i.getPropertyStore(o).getValue();for(const d of r)(0,g().j)({environment:t,store:d,collectionStore:n,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:s}),v().R9({environment:t,store:d.getPropertyStore(o),value:l,transaction:s});return r.map((e=>k().Bv.createChildStore(n,e.pointer)))}},477293:(e,t,n)=>{n.d(t,{r:()=>r});var o=()=>n(56366),i=()=>n(217429);function r(e){let{disableExposureLogging:t,disableEventTrailLogging:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o().K8)((()=>i().default.getEligibleGroup({experimentId:e,defaultGroup:"control",disableExposureLogging:t,disableEventTrailLogging:n})),[e,t,n])}},505108:(e,t,n)=>{n.d(t,{a:()=>g});var o=n(296540),i=()=>n(401497),r=()=>n(534177),a=()=>n(284371),s=()=>n(84817),l=()=>n(819121),d=()=>n(955825),c=n(474848);function u(e){const{disabled:t,checked:n,selectorSize:o}=e,[r,a]=(0,l().A)(),s=function(e){const{checked:t,disabled:n,isFocusVisible:o,selectorSize:r}=e;return(0,i().IS)((e=>({root:{position:"absolute",display:"flex",width:15,height:15,padding:5,margin:1.5,justifyContent:"center",alignItems:"center",gap:8,flexShrink:0,borderRadius:"50%",transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${n?e.tint.regular:e.blueColor}`,background:n?e.tint.regular:e.blueColor}:{boxShadow:`0 0 0 1.5px ${n?e.icon.quaternary:e.stroke.input}`,background:e.surface.page},...o&&{boxShadow:e.buttonBlueFocusRing}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"small"===r?14:18,height:"small"===r?14:18,...n?{pointerEvents:"none"}:{cursor:"pointer"}}})),[t,n,o,r])}({checked:n,disabled:t,isFocusVisible:a,selectorSize:o});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",{ref:r,type:"radio",style:s.input,className:"radio-button",...e}),(0,c.jsx)("span",{...(0,d().AH)("custom-radio-button",s.root,t?{}:{pseudoActive:s.active})})]})}var p=()=>n(554509);const g=o.forwardRef((function(e,t){let{additionalContent:n,description:r,isDisabled:l,isSelected:d,label:u,name:p,onChange:g,width:h="fill",selectorSize:y="normal",selectAlignXAxis:v="left",selectAlignYAxis:b="center",selectType:x="checkbox",style:S,supportText:w,value:k,colorName:j,alignAdditionalContent:C,...M}=e;const P=(0,o.useId)(),A=function(e){const{isSelected:t,isDisabled:n,selectAlignYAxis:o,alignAdditionalContent:r}=e;return(0,i().IS)((e=>{const i=t&&!n?e.blueColor:e.selectorBorderUnselected;return{container:{display:"flex",alignItems:r??"center",gap:12,userSelect:"none",padding:"9px 16px 10px 10px",borderRadius:6,border:`1px solid ${i}`,...!n&&{cursor:"pointer"}},title:{fontWeight:a().Wy.medium,fontSize:14,userSelect:"none",lineHeight:18},additionalContentWrapper:{flexShrink:0},selectorWrapper:{display:"flex",..."top"===o?{marginTop:2}:{}},rightAlignSelectorWrapper:{display:"flex"}}}),[t,n,o,r])}({isSelected:d,isDisabled:l,selectAlignYAxis:b,alignAdditionalContent:C}),T=(0,c.jsxs)(s().Y1,{direction:"horizontal",align:"top"===b?"top-left":"center-left",gap:12,width:h,children:[(0,c.jsx)("div",{style:A.selectorWrapper,children:(0,c.jsx)(f,{id:P,selectType:x,name:p,value:k,onChange:g,isSelected:d,selectorSize:y,isDisabled:l,...M})}),(0,c.jsx)(m,{colorName:j,description:r,label:u,selectorSize:y,supportText:w,isDisabled:l})]}),I=(0,c.jsxs)(s().Y1,{direction:"horizontal",align:"top"===b?"top-center":"center",gap:12,children:[(0,c.jsx)(m,{colorName:j,description:r,label:u,selectorSize:y,supportText:w,isDisabled:l}),(0,c.jsx)("div",{style:{...A.selectorWrapper,...A.rightAlignSelectorWrapper},children:(0,c.jsx)(f,{id:P,selectType:x,name:p,value:k,onChange:g,selectorSize:y,isSelected:d,isDisabled:l,...M})})]}),_=n?(0,c.jsx)("div",{style:A.additionalContentWrapper,children:n}):null;return(0,c.jsx)("label",{ref:t,style:{...A.container,...S},htmlFor:P,children:"left"===v?(0,c.jsxs)(c.Fragment,{children:[T,_]}):(0,c.jsxs)(c.Fragment,{children:[_,I]})})}));function m(e){const{description:t,label:n,supportText:o,selectorSize:i,isDisabled:a,colorName:l}=e;let d;return"large"===i?d="Page-Content/Text-Block":"normal"===i||void 0===i?d="Body-13px/Medium":"small"===i?d="Body-12px/Regular":(0,r().HB)(i),(0,c.jsxs)(s().Y1,{gap:4,children:[(0,c.jsxs)(s().Y1,{gap:2,children:[(0,c.jsx)(p().D,{styleName:d,colorName:l||(a?"quaternary":"primary"),children:n}),t?(0,c.jsx)(p().D,{styleName:"Caption-12px/Regular",colorName:a?"quaternary":"secondary",children:t}):null]}),o?(0,c.jsx)(p().D,{styleName:"Caption-12px/Medium",colorName:"tertiary",children:o}):null]})}function f(e){const{selectType:t,selectorSize:o="normal",id:a,name:s,value:l,onChange:d,isSelected:p,isDisabled:g,...m}=e,f=(0,i().IS)((()=>({checkboxWrapper:{minWidth:18,display:"flex",justifyContent:"center"}})),[]);switch(t){case"radio":return(0,c.jsx)(u,{id:a,name:s,value:l,onChange:d,checked:p,disabled:g,selectorSize:o,...m});case"checkbox":return(0,c.jsx)("div",{style:f.checkboxWrapper,children:(0,c.jsx)(n(115562).W,{id:a,name:s,value:l,onChange:d,checked:p,disabled:g,selectorSize:o,...m})});case"none":return null;default:(0,r().HB)(t)}}},520861:(e,t,n)=>{n.d(t,{T:()=>i});n(944114),n(898992),n(908872);var o=()=>n(415651);function i(e){const{environment:t,collectionStore:n,duplicate:i,droppedStores:r,transaction:a,duplicateActions:s}=e,{movedStores:l,reparentedStores:d}=r.reduce(((e,t)=>(i||t.getAssociatedCollectionId()!==(null==n?void 0:n.id)?e.reparentedStores.push(t):e.movedStores.push(t),e)),{movedStores:[],reparentedStores:[]});return[...l,...o().MS({environment:t,droppedStores:d,duplicate:i,transaction:a,resolveTemplateVariables:!1,duplicateActions:s})]}},525884:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>i,infoCircleIcon:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M8.65 8.25a.625.625 0 1 0 0 1.25h.725v3.25H8.65a.625.625 0 1 0 0 1.25h2.7a.625.625 0 1 0 0-1.25h-.725V8.875A.625.625 0 0 0 10 8.25zM10.7 6.3a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,o.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},r=(0,n(340498).wt)("infoCircle",i)},529324:(e,t,n)=>{n.d(t,{C:()=>o});const o=(0,n(340498).xh)("magnifyingGlass",{default:{loader:()=>n.e(1827).then(n.bind(n,901827))},small:{loader:()=>n.e(41805).then(n.bind(n,741805))},mini:{loader:()=>n.e(20283).then(n.bind(n,420283))},large:{loader:()=>n.e(61969).then(n.bind(n,861969))}})},541235:(e,t,n)=>{n.d(t,{YD:()=>r,c$:()=>o,q_:()=>i});const o={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]}},i="completed",r="dismissed"},555267:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(296540),i=()=>n(401497),r=()=>n(62856),a=()=>n(331542),s=n(474848);function l(e){let{loadingMessage:t}=e;const n=(0,i().DP)(),l=(0,r().A)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:l?(0,s.jsxs)(o.Fragment,{children:[(0,s.jsx)(a().A,{}),t?(0,s.jsx)("div",{style:{marginLeft:8,color:n.text.secondary},children:t}):void 0]}):void 0})}},567121:(e,t,n)=>{n.d(t,{EG:()=>a,K5:()=>r,RH:()=>i,Yi:()=>s,ls:()=>o});const o=32,i=202,r=1e3,a="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",s="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},569397:(e,t,n)=>{n.d(t,{C:()=>i});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"2.12 3.05 11.76 9.9",directional:!0,svg:(0,n(474848).jsx)("path",{d:"M9.372 3.238a.625.625 0 1 0-.884.884l3.253 3.253H2.75a.625.625 0 0 0 0 1.25h8.991l-3.253 3.253a.625.625 0 0 0 .884.884l4.32-4.32a.625.625 0 0 0 0-.884z"})},i=(0,n(340498).wt)("arrowStraightRightSmall",o)},578194:(e,t,n)=>{n.d(t,{r:()=>o});const o=(0,n(583835).Dv)("importEvernote")},612900:(e,t,n)=>{n.d(t,{u:()=>r});var o=()=>n(645873);const i=new(o().O2)("PulsingWrapper",(async()=>n.e(45248).then(n.bind(n,673962)))),r=(0,o().jQ)(i,(e=>e.PulsingWrapper),{renderLoading:(e,t)=>t.children})},677195:(e,t,n)=>{n.d(t,{R:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("verificationCheck",{viewBox:"0 0 6 7",svg:(0,o.jsx)("path",{d:"M2.84245 6.11619C2.71116 6.30644 2.53392 6.40156 2.31072 6.40156C2.20131 6.40156 2.10066 6.37881 2.00875 6.33332C1.92123 6.28782 1.83589 6.21545 1.75274 6.11619L0.150985 4.25515C0.0503282 4.12694 0 3.99874 0 3.87053C0 3.73406 0.04814 3.61826 0.14442 3.52314C0.245077 3.42388 0.365427 3.37425 0.50547 3.37425C0.597374 3.37425 0.680525 3.39286 0.754923 3.43008C0.833698 3.46317 0.912473 3.52934 0.991247 3.6286L2.28446 5.21049L5.00875 1.07896C5.13129 0.892857 5.28446 0.799805 5.46827 0.799805C5.60394 0.799805 5.72648 0.841161 5.83589 0.923874C5.9453 1.00659 6 1.11618 6 1.25266C6 1.32297 5.98249 1.39327 5.94748 1.46358C5.91685 1.52975 5.88184 1.59178 5.84245 1.64968L2.84245 6.11619Z"})})},687681:(e,t,n)=>{n.d(t,{u:()=>o});const o=(0,n(340498).xh)("pencilLine",{default:{loader:()=>n.e(92668).then(n.bind(n,105819))},small:{loader:()=>n.e(92668).then(n.bind(n,523389))},fill:{loader:()=>n.e(92668).then(n.bind(n,71287))},fillSmall:{loader:()=>n.e(92668).then(n.bind(n,396654))}},["compose","edit","write","create"])},701751:(e,t,n)=>{n.d(t,{p:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.94 14.91 15.66",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 1 0 1.1 0z"}),(0,o.jsx)("path",{d:"M15.4 1.95a3.48 3.48 0 0 0-3.48 3.48v1.92H6.4a2.425 2.425 0 0 0-2.425 2.425v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.425 2.425 0 0 0 13.6 7.35h-.43V5.43a2.23 2.23 0 1 1 4.46 0v2.095a.625.625 0 1 0 1.25 0V5.43a3.48 3.48 0 0 0-3.48-3.48M5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},r=(0,n(340498).wt)("lockOpen",i)},735790:(e,t,n)=>{n.d(t,{M:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.25 15.25 11.5",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M3 7.375h6.829a2.501 2.501 0 0 0 4.842 0H17a.625.625 0 1 0 0-1.25h-2.329a2.501 2.501 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25M12.25 5.5a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5"}),(0,o.jsx)("path",{fillRule:"evenodd",d:"M7.75 15.75a2.5 2.5 0 0 0 2.421-1.875H17a.625.625 0 1 0 0-1.25h-6.829a2.5 2.5 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25h2.329A2.5 2.5 0 0 0 7.75 15.75m0-1.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})]})},r=(0,n(340498).wt)("sliders",i)},739135:(e,t,n)=>{n.d(t,{KD:()=>d,gt:()=>c,i9:()=>l,ll:()=>a,tb:()=>s,x$:()=>r});var o=()=>n(541235),i=()=>n(496603);function r(e,t){return a(c(e,t))}function a(e){return void 0!==e&&(e===o().q_||e===o().YD)}function s(e,t){if(a(t))return;const n=o().c$[e],i=n.steps.findIndex((e=>e.id===t));return-1===i?n.steps[0].id:i===n.steps.length-1?o().q_:n.steps[i+1].id}function l(e,t){const n=c(e,t);if(n&&!a(n))return s(t,n)}function d(e,t){const n=c(e,t);if(n)return function(e,t){const n=o().c$[e];var r;if(a(t))return null===(r=(0,i().HV)(n.steps))||void 0===r?void 0:r.id;const s=n.steps.findIndex((e=>e.id===t));return-1!==s&&0!==s?n.steps[s-1].id:void 0}(t,n)}function c(e,t){var n;if(!e)return;const i=((null===(n=e.getSettings())||void 0===n?void 0:n.tutorials)||{})[t];return void 0===i?o().c$[t].steps[0].id:i}},742117:(e,t,n)=>{n.d(t,{V:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("chevronRight",{viewBox:"0 0 16 16",directional:!0,svg:(0,o.jsx)("path",{d:"M12.375 8.06445C12.375 7.83203 12.2861 7.63379 12.1084 7.45605L6.77637 2.24023C6.62598 2.08984 6.44141 2.01465 6.22266 2.01465C5.77832 2.01465 5.42285 2.35645 5.42285 2.80078C5.42285 3.01953 5.51172 3.21777 5.66211 3.375L10.4746 8.06445L5.66211 12.7539C5.51855 12.9043 5.42285 13.1025 5.42285 13.3213C5.42285 13.7725 5.77832 14.1143 6.22266 14.1143C6.44141 14.1143 6.62598 14.0391 6.77637 13.8887L12.1084 8.67285C12.293 8.49512 12.375 8.29688 12.375 8.06445Z"})})},747671:(e,t,n)=>{n.d(t,{Q:()=>o,a:()=>i});let o=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});class i extends(()=>n(757695))().Store{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}}},748539:(e,t,n)=>{n.d(t,{f:()=>o});const o=new(n(645873).O2)("pageCovers",(async()=>{const{pageCovers:e}=await n.e(40198).then(n.bind(n,519737));return e}))},756114:(e,t,n)=>{n.d(t,{D:()=>o});function o(e,t){t.route.name;return!1}},835607:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,peopleIcon:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"0.85 2.79 18.76 14.42",svg:(0,n(474848).jsx)("path",{d:"M11.794 3.936c.57-.71 1.414-1.141 2.456-1.141s1.886.43 2.456 1.14c.558.696.823 1.618.823 2.582s-.265 1.885-.823 2.58c-.57.71-1.414 1.141-2.456 1.141s-1.886-.43-2.456-1.14c-.558-.696-.823-1.618-.823-2.581 0-.964.265-1.886.823-2.581m.975.782c-.341.426-.548 1.052-.548 1.799s.207 1.373.548 1.798c.33.41.813.673 1.481.673s1.152-.262 1.481-.673c.342-.425.548-1.051.548-1.798s-.206-1.373-.548-1.799c-.33-.41-.813-.673-1.48-.673-.669 0-1.152.263-1.482.673M5.75 3.625c-.956 0-1.734.396-2.259 1.05-.513.64-.755 1.484-.755 2.362s.242 1.723.755 2.362c.525.654 1.303 1.05 2.26 1.05s1.733-.396 2.258-1.05c.513-.64.755-1.484.755-2.362s-.242-1.723-.755-2.362c-.525-.654-1.302-1.05-2.259-1.05M3.986 7.037c0-.661.184-1.21.48-1.58.285-.354.702-.582 1.284-.582s1 .228 1.284.582c.297.37.48.919.48 1.58s-.183 1.21-.48 1.58c-.284.354-.701.582-1.284.582-.582 0-1-.228-1.284-.583-.296-.37-.48-.918-.48-1.579m-.948 8.918h4.69c.114.467.337.894.634 1.25H3.038c-.68 0-1.327-.286-1.742-.764-.432-.498-.606-1.209-.265-1.92.823-1.72 2.636-2.896 4.72-2.896 1.128 0 2.178.346 3.034.936a6.6 6.6 0 0 0-.681 1.05 4.1 4.1 0 0 0-2.354-.736c-1.611 0-2.98.908-3.592 2.186-.1.21-.063.393.082.56.161.186.456.334.798.334M14.25 11.21c-2.334 0-4.354 1.36-5.202 3.323-.309.715-.125 1.419.309 1.912.418.476 1.064.76 1.743.76h6.3c.68 0 1.325-.284 1.744-.76.433-.493.617-1.197.308-1.912-.848-1.963-2.868-3.324-5.202-3.324m-4.054 3.818c.645-1.494 2.207-2.569 4.054-2.569s3.409 1.075 4.055 2.57a.52.52 0 0 1-.1.59c-.166.19-.462.336-.805.336h-6.3c-.342 0-.638-.146-.805-.336a.52.52 0 0 1-.1-.59"})},i=(0,n(340498).wt)("people",o)},843189:(e,t,n)=>{n.d(t,{E:()=>a});var o=n(296540),i=()=>n(960715),r=n(474848);const a=o.forwardRef(((e,t)=>{let{children:o,color:a,disabled:s,iconLeading:l,iconStyle:d,iconTrailing:c,isLoading:u,shape:p="default",size:g="md",style:m,...f}=e;const h=(0,n(963589).X)("nds_button_gap")||Boolean(c),y=(0,n(401497).IS)((e=>{const t=a?`${a}Primary`:"primary",r=a||"regular",c=a?`${a}Hover`:"primaryHover",f=a?`${a}Pressed`:"primaryPressed";return{button:{...(0,i().qq)({shape:p,size:g,hasIconOnly:Boolean(l)&&!o,isButtonGapEnabled:h}),justifyContent:"center",color:e.text[t],background:e.tint[r],opacity:s||u?.3:1,fontWeight:n(284371).Wy.medium,...m},hovered:{background:s?e.tint[r]:e.tint[c]},pressed:{background:s?e.tint[r]:e.tint[f]},icon:{...(0,i().D3)({size:g,hasIconOnly:!o,isButtonGapEnabled:h}),...d}}}),[o,a,s,l,d,h,u,p,g,m]);return(0,r.jsxs)(n(197190).A,{ref:t,style:y.button,hoveredStyle:y.hovered,pressedStyle:y.pressed,disabled:s||u,...f,children:[u?(0,r.jsx)(n(331542).A,{style:{marginRight:4}}):null,l?l(y.icon):null,o,c?c(y.icon):null]})}));a.displayName="TintButton"},882262:(e,t,n)=>{n.d(t,{m:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.23 3.23 13.54 13.53",svg:(0,n(474848).jsx)("path",{d:"M4.485 8.86V5.369l4.073 4.073a.625.625 0 0 0 .884-.884L5.369 4.485h3.49a.625.625 0 1 0 0-1.25h-5a.625.625 0 0 0-.624.625v5a.625.625 0 0 0 1.25 0m10.146 6.655-4.07-4.07a.625.625 0 0 1 .884-.884l4.07 4.07V11.14a.625.625 0 1 1 1.25 0v5c0 .345-.28.625-.625.625h-5a.625.625 0 1 1 0-1.25z"})},i=(0,n(340498).wt)("arrowExpandDiagonal",o)},937199:(e,t,n)=>{n.d(t,{LH:()=>r,Op:()=>i,bi:()=>l,sf:()=>s,v$:()=>a});n(16280);var o=n(296540);const i=(0,o.createContext)(null);function r(){const e=(0,o.useContext)(i);if(!e)throw new Error("usePageLayoutEditorContext must be used inside BaseLayoutEditorContext.Provider");return e}function a(){return(0,o.useContext)(i)}i.displayName="BaseLayoutEditorContext";const s=(0,o.createContext)(null);function l(){const e=(0,o.useContext)(s);if(!e)throw new Error("usePageLayoutEditorContext must be used inside PageLayoutEditorContextProvider");return e}s.displayName="PageLayoutEditorContext"},990402:(e,t,n)=>{n.d(t,{m:()=>i});var o=()=>n(46986);function i(e){return("workflow"===e.getType()||e.isCollectionView()&&e.getWorkflowStore())&&e.canEdit()&&!e.isSystemBlock()&&(0,o().re)()}},995062:(e,t,n)=>{n.r(t),n.d(t,{AssistantAnimatedFace:()=>P,AssistantAnimatedFaceInner:()=>A});n(18107),n(967357);var o=()=>n(303848),i=()=>n(244641),r=n(296540),a=()=>n(624919),s=()=>n(56366),l=()=>n(401497),d=()=>n(604341),c=()=>n(592328),u=()=>n(336811),p=()=>n(999752),g=()=>n(763824),m=()=>n(534177),f=()=>n(631611),h=()=>n(295169),y=()=>n(337567),v=()=>n(865241),b=()=>n(998109),x=()=>n(846955),S=()=>n(278589),w=()=>n(783793);const k=n.p+"bc69e69669ca365b.riv",j=["Base_Idle","Idle A","Idle B","Idle C"];var C=n(474848);o().RuntimeLoader.setWasmUrl(n(390654));const M=!1;function P(e){const{sizeVariant:t,includeBoxShadow:n,onMouseEnter:o}=e,i=function(){const e=(0,f().jw)().isWriter,t=(0,s().K8)((()=>{const t=e?(0,y().K1)():h().default.getActiveSession();if(!t)return"idle";const n=t.evaluator.getTranscript().at(-1);if(n&&"observation"===n.type&&"error"===n.observationType)return"error";const o=t.isStreaming();if(!o)return"idle";const i=t.getCombinedSteps().at(-1),r="assistantSearch"===(null==i?void 0:i.type)||"assistantShowSearchResults"===(null==i?void 0:i.type),a="assistantLoading"===(null==i?void 0:i.type)||"human"===(null==i?void 0:i.type);return"groupedEditCard"===(null==i?void 0:i.type)?"writing":r?"searching":a?"thinking":o?"writing":"idle"}),[e]);return(0,r.useEffect)((()=>{M&&T("HighLevelState","Pink",t)}),[t]),t}();return(0,C.jsx)(b().n,{step:"ai_assistant",isFullWidth:!1,highlightStyle:{borderRadius:"100%"},children:(0,C.jsx)(A,{sizeVariant:t,includeBoxShadow:n,highLevelState:i,onMouseEnter:o})})}function A(e){const{sizeVariant:t,highLevelState:n,includeBoxShadow:i,onMouseEnter:f}=e,[h,y]=(0,r.useState)(!1),b=(0,r.useCallback)((()=>{y(!0)}),[]),{onStateChange:P,waitUntilState:A,animationState:I}=function(){const e=(0,r.useRef)("Idle B"),t=(0,r.useMemo)((()=>new(c().A)),[]),n=(0,r.useCallback)((n=>{if(Array.isArray(n.data)&&1===n.data.length){const o=n.data[0];M&&T("State change","DarkGreen",o),e.current=o,t.emit(o)}}),[t]),o=(0,r.useCallback)((()=>new Promise((e=>{const n=o=>{t.removeListener(n),e(o)};t.addListener(n)}))),[t]),i=(0,r.useCallback)((async t=>{(await g().nQ(2e3,(async()=>{for(;!t(e.current);)await o()})())).timeout&&(0,a().NK)("Timed out while waiting for an assistant face state change.")}),[o]);return{animationState:e,waitUntilState:i,onStateChange:n}}(),{rive:_,RiveComponent:B}=(0,o().useRive)({src:k,stateMachines:["Main"],autoplay:!0,onAdvance:b,onStateChange:P});!function(e){const t=(0,s().K8)((()=>v().A.state.isVisible),[]),n=(0,r.useCallback)((()=>{null==e||e.startRendering()}),[e]),o=(0,r.useCallback)((()=>{null==e||e.stopRendering()}),[e]);(0,r.useEffect)((()=>{t?n():o()}),[t,o,n])}(_);const L=function(e){const t=(0,r.useMemo)((()=>{const t=null==e?void 0:e.stateMachineInputs("Main"),n=new Map;if(!t)return n;for(const e of t)n.set(e.name,e);return n}),[e]);(0,r.useEffect)((()=>{(0,d().exposeDebugValue)("AssistantAnimatedFaceTriggers",t)}),[t]);const n=(0,u().T)(),o=(0,r.useCallback)((e=>{var o;n.current&&(M&&T("Firing trigger","MediumBlue",e),null===(o=t.get(e))||void 0===o||o.fire())}),[n,t]);return o}(_),G=(0,r.useMemo)((()=>new(p().O)(1)),[]);(0,r.useEffect)((()=>{G.enqueue((async()=>{"writing"===n?L("WritingInTrigger"):"idle"===n?(await async function(){"Writing_In"===I.current&&await A((e=>"Writing_Loop"===e)),"Writing_Loop"===I.current&&(L("WritingOutTrigger"),await A((e=>(0,m().Xk)(j,e)))),"Thinking_In"!==I.current&&"Thinking_Loop"!==I.current||(L("ThinkingOutTrigger"),await A((e=>(0,m().Xk)(j,e)))),"Searching_In"===I.current&&await A((e=>"Searching_Loop"===e)),"Searching_Loop"===I.current&&(L("SearchingOutTrigger"),await A((e=>(0,m().Xk)(j,e))))}(),L("IdleTrigger")):"searching"===n?L("SearchingInTrigger"):"thinking"===n?L("ThinkingInTrigger"):"error"===n?L("ErrorTrigger"):(0,m().HB)(n)}))}),[n,L,A,G,I]);const D=(0,l().IS)((e=>{const n=(0,S().N)(t);return{wrap:{width:n,height:n,...i&&{boxShadow:e.shadowXS,borderRadius:"100%"},position:"relative"},faceImg:{position:"absolute",height:n,width:n},staticFace:{position:"absolute",left:0,top:0}}}),[t,i]);return(0,C.jsxs)("div",{style:D.wrap,onMouseEnter:e=>{e.stopPropagation(),null==f||f(e),setTimeout((()=>x().default.dismissTourTutorial()),400)},children:[(0,C.jsx)(B,{style:D.faceImg,onMouseEnter:()=>{Math.random()<.1&&L("GreetingTrigger")}}),h?void 0:(0,C.jsx)(w().o,{variant:t,wrapWithPadding:!0,style:D.staticFace,shadowVariant:i?"strong":"none"})]})}function T(e,t){const n=i().c9.local().toFormat("HH:mm:ss.SSS");for(var o=arguments.length,r=new Array(o>2?o-2:0),a=2;a<o;a++)r[a-2]=arguments[a];console.log(`%c[${n}] %c${e}:`,"color: Grey;",`color: ${t}; font-weight: bold;`,...r)}}}]);