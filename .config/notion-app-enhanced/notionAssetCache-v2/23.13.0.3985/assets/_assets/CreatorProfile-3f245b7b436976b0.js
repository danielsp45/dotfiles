"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[2411,4876,5834,25700,34208,40200],{369:(e,t,a)=>{a.d(t,{R:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("eyeHide",{viewBox:"0 0 16 12",svg:(0,i.jsx)("path",{d:"M12.2754 10.9346L3.08545 1.76074C2.91895 1.59424 2.91895 1.3042 3.08545 1.1377C3.25732 0.96582 3.53662 0.971191 3.7085 1.1377L12.8931 10.3169C13.0649 10.4888 13.0703 10.752 12.8931 10.9346C12.7212 11.1172 12.4473 11.1064 12.2754 10.9346ZM8 1.44922C12.4526 1.44922 15.4067 5.02637 15.4067 6.13281C15.4067 6.76123 14.4346 8.20605 12.7588 9.31787L11.8618 8.41553C13.167 7.58301 13.978 6.54102 13.978 6.13281C13.978 5.50977 11.3516 2.62012 8 2.62012C7.43066 2.62012 6.9043 2.70068 6.39404 2.84033L5.42188 1.86816C6.21143 1.61035 7.06006 1.44922 8 1.44922ZM8 10.811C3.60645 10.811 0.587891 7.22852 0.587891 6.13281C0.587891 5.48828 1.6084 4.0166 3.33789 2.89404L4.25635 3.8125C2.87598 4.67725 2.0166 5.77832 2.0166 6.13281C2.0166 6.87402 4.64307 9.64014 8 9.64014C8.6123 9.64014 9.18701 9.54883 9.73486 9.39307L10.707 10.3652C9.88525 10.6445 8.98291 10.811 8 10.811ZM10.6211 7.06201L7.06543 3.50635C7.35547 3.38818 7.66699 3.32373 8 3.32373C9.55762 3.32373 10.8145 4.56445 10.8145 6.12744C10.8145 6.45508 10.7446 6.77734 10.6211 7.06201ZM8 8.93652C6.43164 8.93652 5.18555 7.6582 5.18018 6.13281C5.18018 5.75146 5.26074 5.39697 5.41113 5.08008L9.04199 8.70557C8.7251 8.85059 8.37598 8.93652 8 8.93652Z"})})},20051:(e,t,a)=>{a.d(t,{Bl:()=>l,IH:()=>u,Lh:()=>w,Mh:()=>x,RY:()=>h,VP:()=>S,_A:()=>m,n$:()=>y});var i=()=>a(534177),r=()=>a(130382),n=()=>a(416845),o=()=>a(266442);const s=15;function l(e){if(!o().Vu.includes(e))throw new(n().rTV)("Rating must be an integer between 1 and 5.",{type:"marketplace_listing_review_invalid_rating"});return!0}const d=3,c=100;function u(e){const t=e.trim();if(t.length<d)throw new(n().rTV)("Title too short",{type:"marketplace_listing_review_title_too_short"});if(t.length>c)throw new(n().rTV)("Title too long",{type:"marketplace_listing_review_title_too_long"})}const p=50,g=1500;function m(e){const t=e.trim();if(t.length<p)throw new(n().rTV)("Description too short",{type:"marketplace_listing_review_description_too_short"});if(t.length>g)throw new(n().rTV)("Title too long",{type:"marketplace_listing_review_description_too_long"})}const f=40;function h(e){const t=e.trim();if(0===t.length)throw new(n().rTV)("Name is required",{type:"marketplace_listing_review_name_too_short"});if(t.length>f)throw new(n().rTV)("Name too long",{type:"marketplace_listing_review_name_too_long"})}const b=5,v=1500;function y(e){const t=e.trim();if(t.length<b)throw new(n().rTV)("Creator response too short",{type:"marketplace_listing_review_creator_response_too_short"});if(t.length>v)throw new(n().rTV)("Creator response too long",{type:"marketplace_listing_review_creator_response_too_long"})}function x(e){return void 0!==e.getTitle()&&void 0!==e.getSerializedContent()}function S(e){return(0,r().YH)(e)<s}function w(e){switch(e){case"mostRecent":return{columnName:"updated_time",direction:"descending"};case"highestRating":return{columnName:"rating",direction:"descending"};case"lowestRating":return{columnName:"rating",direction:"ascending"};default:(0,i().HB)(e)}}},24184:(e,t,a)=>{a.d(t,{e:()=>i});const i=(0,a(340498).xh)("arrowCounterClockwise",{default:{loader:()=>a.e(79311).then(a.bind(a,579311))},small:{loader:()=>a.e(49121).then(a.bind(a,449121))},mini:{loader:()=>a.e(48591).then(a.bind(a,248591))},large:{loader:()=>a.e(95490).then(a.bind(a,873109))}})},60200:(e,t,a)=>{a.d(t,{R:()=>o});a(296540);var i=()=>a(401497),r=()=>a(710149),n=a(474848);function o(e){const{width:t,height:a,borderRadius:o,marginBottom:s}=e,l=function(e){const{width:t,height:a,borderRadius:r,marginBottom:n}=e;return(0,i().IS)((()=>({loadingText:{width:t??120,height:a??14,borderRadius:r??2,marginBottom:n??0}})),[t,a,r,n])}({width:t,height:a,borderRadius:o,marginBottom:s});return(0,n.jsx)(r().A,{style:l.loadingText})}},72563:(e,t,a)=>{a.r(t),a.d(t,{iconDefinition:()=>i,priceTagFillIcon:()=>r});a(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.19 2.19 15.61 15.61",svg:(0,a(474848).jsx)("path",{d:"M13.166 2.216a2.05 2.05 0 0 1 1.74.58l2.298 2.299c.456.456.671 1.1.58 1.74l-.383 2.68a2.05 2.05 0 0 1-.58 1.16l-6.529 6.53c-.8.8-2.098.8-2.899 0l-4.597-4.598c-.8-.8-.8-2.099 0-2.9L9.324 3.18a2.05 2.05 0 0 1 1.16-.58zm-.828 5.446a1.188 1.188 0 1 0 1.68-1.68 1.188 1.188 0 0 0-1.68 1.68"})},r=(0,a(340498).wt)("priceTagFill",i)},73223:(e,t,a)=>{a.r(t),a.d(t,{dismissTutorial:()=>c,resetTutorials:()=>u,tutorialAdvanceToStep:()=>p,tutorialAdvanceToStepAfter:()=>g,tutorialGoToNextStep:()=>l,tutorialGoToPrevStep:()=>d});var i=()=>a(541235),r=()=>a(751156),n=()=>a(755199),o=()=>a(739135),s=()=>a(765957);function l(e,t){var a;const{currentUserSettingsStore:i}=s().default.state;if(!i)return;const r=null===(a=i.getSettings())||void 0===a?void 0:a.tutorials;m({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{n().mJ({userSettingsStore:i,transaction:e,data:{tutorials:{...r,[t]:(0,o().i9)(i,t)}}})},userId:i.id})}function d(e,t){var a;const{currentUserSettingsStore:i}=s().default.state;if(!i)return;const r=null===(a=i.getSettings())||void 0===a?void 0:a.tutorials;m({userAction:"TutorialActions.prevStep",environment:e,perform:e=>{n().mJ({userSettingsStore:i,transaction:e,data:{tutorials:{...r,[t]:(0,o().KD)(i,t)}}})},userId:i.id})}function c(e,t){var a;const{currentUserSettingsStore:r}=s().default.state;if(!r)return;const o=null===(a=r.getSettings())||void 0===a?void 0:a.tutorials;(null==o?void 0:o[t])!==i().YD&&m({userAction:"TutorialActions.dismissTutorial",environment:e,perform:e=>{n().mJ({userSettingsStore:r,transaction:e,data:{tutorials:{...o,[t]:i().YD}}})},userId:r.id})}function u(e){const{currentUserSettingsStore:t}=s().default.state;t&&m({userAction:"TutorialActions.resetTutorialsDebug",environment:e,perform:e=>{n().mJ({userSettingsStore:t,transaction:e,data:{tutorials:{}}})},userId:t.id})}function p(e,t,a){var r;const{currentUserSettingsStore:l}=s().default.state;if(!l||(0,o().x$)(l,t))return;const d=(0,o().gt)(l,t);i().c$[t].steps.findIndex((e=>e.id===d))>=i().c$[t].steps.findIndex((e=>e.id===a))||n().mJ({userSettingsStore:l,transaction:e,data:{tutorials:{...null===(r=l.getSettings())||void 0===r?void 0:r.tutorials,[t]:a}}})}function g(e,t,a){if((0,o().ll)(a))return;const i=(0,o().tb)(t,a);i&&p(e,t,i)}function m(e){return r().createAndCommit({...e,canUndo:!1})}},75491:(e,t,a)=>{a.d(t,{ED:()=>b,Kb:()=>y});a(296540);var i=()=>a(56366),r=()=>a(401497),n=()=>a(668725),o=()=>a(722872),s=()=>a(463830),l=()=>a(406699),d=()=>a(928600),c=()=>a(939740),u=()=>a(897119),p=()=>a(89924),g=()=>a(125565),m=()=>a(493823),f=()=>a(566468),h=a(474848);function b(e){let{title:t,items:a,disabled:n,hideDropdownIcon:g,itemMaxWidth:m,itemMinWidth:f,...b}=e;const y=(0,i().uB)(void 0,s().A),x=(0,r().IS)((()=>({container:{minWidth:180}})),[]),S={key:"workspace-users-menu",render:e=>(0,h.jsx)(p().A,{...e}),items:a};return(0,h.jsx)(l().Ay,{popupType:u().nl.Popup,style:x.container,buttonPopupStore:y,disabled:n,renderOrigin:e=>(0,h.jsx)(v,{title:t,hideDropdownIcon:g,disabled:n,styles:b.styles,...e}),render:()=>(0,h.jsx)(d().A,{menuType:o().gu.Popup,maxWidth:m??250,minWidth:f,children:(0,h.jsx)(c().Ay,{type:c().Oh.Vertical,initialFocus:0,sections:[S],onAccept:()=>{y.setState({open:!1})}})})})}function v(e){let{title:t,hideDropdownIcon:a,disabled:i,...o}=e;const s=(0,r().IS)((e=>({container:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",maxWidth:"100%",...o.styles},chevron:{width:10,height:10,marginLeft:4,color:e.icon.tertiary}})),[o.styles]);return(0,h.jsxs)(m().p,{style:s.container,disabled:i,...o,children:[(0,h.jsx)(g().A,{showTooltipWhenTruncated:!0,children:t}),a||i?null:(0,n().b)(s.chevron)]})}function y(){const e=(0,r().IS)((()=>({title:{width:"50%"}})),[]);return(0,h.jsx)(f().mf,{titleStyles:e.title})}},77279:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});class i extends(()=>a(757695))().Store{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const r=new i},83489:(e,t,a)=>{a.d(t,{H:()=>i});const i=(0,a(340498).xh)("infoCircle",{default:{loader:()=>a.e(29288).then(a.bind(a,829288))},small:{loader:()=>a.e(81438).then(a.bind(a,781438))},mini:{loader:()=>a.e(16742).then(a.bind(a,16742))},large:{loader:()=>a.e(29750).then(a.bind(a,29750))}})},101919:(e,t,a)=>{a.d(t,{A:()=>r});a(296540);var i=a(474848);const r=function(e){const{hasMarginTop:t}=e,r=(0,a(401497).IS)((e=>{const a={display:"block",marginBottom:4,fontSize:12,color:e.text.secondary};return t&&(a.marginTop=14),{style:a}}),[t]),{forId:n,children:o,style:s}=e;return(0,i.jsx)("label",{style:{...r.style,...s},htmlFor:n,children:o})}},171789:(e,t,a)=>{a.d(t,{A:()=>s});a(898992),a(354520),a(581454);var i=a(296540),r=()=>a(874913),n=a(474848);function o(){const[e,t]=(0,i.useReducer)(((e,t)=>{switch(t.type){case"push":return[...e.map((e=>({...e,isAnimatingOut:!0}))),{item:t.item,isAnimatingOut:!1}];case"delete":return e.filter((e=>e.item.key!==t.key));case"clear":return e.map((e=>({...e,isAnimatingOut:!0})));default:return e}}),[]);return(0,i.useEffect)((()=>(null===r()||void 0===r()||r().snackbarReady(!0),()=>{null===r()||void 0===r()||r().snackbarReady(!1)})),[]),(0,i.useEffect)((()=>{const e=new(a(496506).ComputedStore)((()=>a(666429).Ay.state.currentItem),{debugName:"currentItemStore"});let i=null;function r(){const a=e.state;a&&i!==a.key?(t({type:"push",item:a}),i=a.key):a||t({type:"clear"})}return e.addListener(r),()=>{e.removeListener(r)}}),[]),(0,n.jsx)(a(177158).A,{open:e.length>0,zIndex:201,children:e.map((e=>(0,i.createElement)(l,{...e,key:e.item.key,dispatch:t})))})}const s=i.memo(o),l=i.memo((function(e){let{dispatch:t,isAnimatingOut:r,item:o}=e;const s=(0,a(401497).DP)(),l=(0,a(552871).L)(),d=(0,i.useCallback)((()=>{t({type:"delete",key:o.key})}),[t,o.key]),c=(0,i.useRef)(r);(0,i.useEffect)((()=>{if(!c.current&&r){const e=setTimeout(d,270);return()=>{d(),clearTimeout(e)}}c.current=r}),[r,d]);const u=o.position??"bottom",p="top"===u?{top:24}:{bottom:l};return(0,n.jsx)("div",{style:{...p,position:"fixed",left:0,width:"100%",display:"flex",zIndex:1e6,padding:4,pointerEvents:"none"},children:(0,n.jsxs)("div",{"aria-live":"polite",style:{background:s.tooltipBackground,color:s.text.contrastPrimary,borderRadius:8,padding:"11px 16px",boxShadow:s.shadowLG,margin:"0 auto",fontSize:14,display:"flex",alignItems:"center",pointerEvents:"auto",...o.style,animationName:`snackbar-slide-in-${u}`,animationDuration:"270ms",animationTimingFunction:"ease",transitionProperty:"transform, opacity",transitionDuration:"270ms",transitionTimingFunction:"ease",transform:r?"scale(0.95)":"scale(1)",opacity:r?0:1},onTransitionEnd:r?d:void 0,children:[o.label,o.helpUrl&&(0,n.jsx)(a(296798).A,{href:o.helpUrl,external:!0,style:{marginLeft:8,width:16,height:16,color:s.text.contrastPrimary},children:(0,a(133033).$)({fill:s.text.contrastSecondary})}),(0,n.jsx)("div",{style:{marginLeft:4,marginRight:-4},children:o.right})]})})}))},175882:(e,t,a)=>{a.r(t),a.d(t,{exclamationMarkTriangleSmallIcon:()=>n,iconDefinition:()=>r});a(296540);var i=a(474848);const r={viewBox:"0 0 16 16",fittedViewBox:"1.49 1.87 13.01 11.75",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M7.9 5.281a.625.625 0 0 0-.625.625v2.5a.625.625 0 0 0 1.25 0v-2.5a.625.625 0 0 0-.625-.625m0 4.7a.725.725 0 1 0 0 1.45.725.725 0 0 0 0-1.45"}),(0,i.jsx)("path",{d:"M9.58 2.788c-.702-1.217-2.458-1.217-3.16 0l-4.677 8.1c-.702 1.216.176 2.737 1.58 2.737h9.354c1.405 0 2.283-1.52 1.58-2.738zm-2.078.625a.575.575 0 0 1 .996 0l4.677 8.1a.575.575 0 0 1-.498.862H3.324a.575.575 0 0 1-.498-.863z"})]})},n=(0,a(340498).wt)("exclamationMarkTriangleSmall",r)},183607:(e,t,a)=>{a.d(t,{X:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("arrowsDiverging",{viewBox:"0 0 12 12",svg:(0,i.jsx)("path",{d:"M6 11.2891C6.42188 11.2891 6.63281 11.0469 6.63281 10.5625V7.3457C6.63281 7.00586 6.71875 6.64062 6.89062 6.25C7.06641 5.85938 7.29492 5.47266 7.57617 5.08984C7.86133 4.70703 8.16992 4.35547 8.50195 4.03516C8.83789 3.71484 9.16406 3.45312 9.48047 3.25L9.95508 2.94531C10.1621 2.81641 10.2656 2.63281 10.2656 2.39453C10.2656 2.21875 10.2109 2.07227 10.1016 1.95508C9.99219 1.83789 9.8418 1.7793 9.65039 1.7793C9.4668 1.7793 9.29102 1.83398 9.12305 1.94336L8.81836 2.14844C8.51367 2.34766 8.20898 2.58984 7.9043 2.875C7.59961 3.15625 7.31641 3.45508 7.05469 3.77148C6.79297 4.08398 6.56836 4.39258 6.38086 4.69727C6.19727 4.99805 6.07227 5.26953 6.00586 5.51172H5.98828C5.91797 5.26953 5.79102 4.99805 5.60742 4.69727C5.42383 4.39258 5.19922 4.08398 4.93359 3.77148C4.67188 3.45508 4.38867 3.15625 4.08398 2.875C3.7832 2.58984 3.48047 2.34766 3.17578 2.14844L2.87109 1.94336C2.69922 1.83398 2.52344 1.7793 2.34375 1.7793C2.14844 1.7793 1.99609 1.83984 1.88672 1.96094C1.78125 2.08203 1.72852 2.22461 1.72852 2.38867C1.72852 2.62695 1.83203 2.8125 2.03906 2.94531L2.51367 3.25C2.83008 3.45312 3.1543 3.71484 3.48633 4.03516C3.81836 4.35547 4.12695 4.70703 4.41211 5.08984C4.69727 5.47266 4.92773 5.85938 5.10352 6.25C5.2793 6.64062 5.36719 7.00586 5.36719 7.3457V10.5625C5.36719 11.0469 5.57812 11.2891 6 11.2891ZM1.81641 3.9707L3.71484 1.52734C3.85547 1.33984 3.88281 1.17578 3.79688 1.03516C3.71484 0.890625 3.55469 0.814453 3.31641 0.806641L0.808594 0.712891C0.613281 0.705078 0.466797 0.763672 0.369141 0.888672C0.271484 1.00977 0.251953 1.16406 0.310547 1.35156L1.02539 3.75391C1.0918 3.98438 1.20312 4.125 1.35938 4.17578C1.51953 4.22656 1.67188 4.1582 1.81641 3.9707ZM10.0898 3.95898C10.2266 4.1543 10.375 4.23047 10.5352 4.1875C10.6992 4.14062 10.8164 4.00391 10.8867 3.77734L11.6777 1.39258C11.7402 1.20508 11.7246 1.04883 11.6309 0.923828C11.541 0.798828 11.3984 0.736328 11.2031 0.736328L8.68945 0.753906C8.45117 0.753906 8.28711 0.824219 8.19727 0.964844C8.10742 1.10156 8.13086 1.26562 8.26758 1.45703L10.0898 3.95898Z"})})},236190:(e,t,a)=>{a.d(t,{c:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("minus",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.037 8.844h9.92a.705.705 0 00.368-.103.825.825 0 00.28-.28.73.73 0 000-.773.752.752 0 00-.28-.28.705.705 0 00-.369-.102H3.037a.705.705 0 00-.369.102.824.824 0 00-.28.28.73.73 0 000 .772.914.914 0 00.28.281.705.705 0 00.37.103z"})})},239820:(e,t,a)=>{a.d(t,{E:()=>i});const i=(0,a(340498).xh)("plusCircleFill",{default:{loader:()=>a.e(57667).then(a.bind(a,357667))},small:{loader:()=>a.e(99149).then(a.bind(a,99149))},mini:{loader:()=>a.e(59419).then(a.bind(a,59419))},large:{loader:()=>a.e(68849).then(a.bind(a,668849))}})},252051:(e,t,a)=>{a.d(t,{AI:()=>u,PB:()=>m,XC:()=>c,Yp:()=>r,Zz:()=>n,eq:()=>p,ev:()=>b,iq:()=>d,j2:()=>f,jQ:()=>g,jV:()=>i,kC:()=>h,o0:()=>o,p0:()=>s});const i=(0,a(959013).YK)({chart:{defaultMessage:"chart",id:"chartExport.chart"},exportChart:{defaultMessage:"Save chart as...",id:"chartExport.exportChart"},exportChartPreview:{defaultMessage:"Preview",id:"chartExport.exportChartPreview"},exportChartBackground:{defaultMessage:"Background",id:"chartExport.exportChartBackground"},copyPng:{defaultMessage:"Copy as PNG",id:"chartExport.copyAsPng"},downloadPng:{defaultMessage:"Download PNG",id:"chartExport.downloadPng"},downloadSvg:{defaultMessage:"Download SVG",id:"chartExport.downloadSVG"},madeWithNotion:{defaultMessage:"Made with Notion",id:"chartExport.madeWithNotion"}}),r=200,n=2,o=800,s=500,l=240,d=120,c=96,u=64,p=2*d,g=2*c,m=2*u;function f(e){let t={width:o,height:s};return"none"===e&&(t={width:o+p,height:s+g}),{chart:t,plotOptions:{pie:{size:l}}}}const h=20,b=8},253093:(e,t,a)=>{a.d(t,{j:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("newSidebarSettings",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M10 13C8.35003 13 7.00003 11.65 7.00003 10C7.00003 8.35 8.35003 7 10 7C11.65 7 13 8.35 13 10C13 11.65 11.65 13 10 13ZM10 8.5C9.17003 8.5 8.50003 9.17 8.50003 10C8.50003 10.83 9.17003 11.5 10 11.5C10.83 11.5 11.5 10.83 11.5 10C11.5 9.17 10.83 8.5 10 8.5ZM10.02 18.45C9.45003 18.45 8.90003 18.4 8.36003 18.29C8.08003 18.23 7.85003 18.01 7.80003 17.72L7.51003 16.06C7.51003 16.06 7.42003 16.02 7.37003 16L6.01003 16.96C5.77003 17.13 5.45003 17.13 5.21003 16.96C4.78003 16.67 4.39003 16.34 4.03003 15.98C3.63003 15.57 3.27003 15.15 2.97003 14.69C2.81003 14.45 2.81003 14.13 2.97003 13.9L3.94003 12.52C3.94003 12.52 3.90003 12.43 3.88003 12.38L2.24003 12.1C1.95003 12.05 1.72003 11.83 1.67003 11.54C1.58003 11.04 1.53003 10.52 1.53003 10.01C1.53003 9.44 1.58003 8.89 1.69003 8.35C1.75003 8.07 1.97003 7.84 2.26003 7.79L3.92003 7.5C3.92003 7.5 3.96003 7.41 3.98003 7.36L3.02003 6C2.85003 5.76 2.85003 5.44 3.02003 5.2C3.31003 4.78 3.64003 4.38 4.00003 4.02C4.40003 3.62 4.83003 3.27 5.28003 2.96C5.52003 2.8 5.84003 2.8 6.07003 2.96L7.45003 3.93C7.45003 3.93 7.54003 3.89 7.59003 3.87L7.87003 2.23C7.92003 1.94 8.14003 1.71 8.43003 1.66C8.93003 1.57 9.45003 1.52 9.96003 1.52C10.53 1.52 11.08 1.57 11.62 1.68C11.91 1.74 12.13 1.96 12.17 2.25L12.46 3.91C12.46 3.91 12.55 3.95 12.6 3.97L13.96 3.01C14.2 2.84 14.52 2.84 14.76 3.01C15.18 3.3 15.58 3.63 15.94 3.99C16.35 4.4 16.7 4.82 17 5.27C17.16 5.51 17.16 5.83 17 6.06L16.03 7.44C16.03 7.44 16.07 7.53 16.09 7.58L17.73 7.86C18.02 7.91 18.24 8.13 18.3 8.42C18.39 8.92 18.44 9.44 18.44 9.95C18.44 10.52 18.39 11.07 18.28 11.61C18.22 11.89 18 12.12 17.71 12.16L16.05 12.45C16.05 12.45 16.01 12.54 15.99 12.59L16.95 13.95C17.12 14.19 17.12 14.51 16.95 14.75C16.66 15.17 16.33 15.57 15.97 15.93C15.57 16.34 15.14 16.69 14.69 16.99C14.45 17.15 14.13 17.15 13.9 16.99L12.52 16.02C12.52 16.02 12.43 16.06 12.38 16.08L12.1 17.72C12.05 18.01 11.83 18.23 11.54 18.29C11.04 18.38 10.52 18.43 10.01 18.43L10.02 18.45ZM9.10003 16.99C9.68003 17.06 10.26 17.06 10.82 16.99L11.09 15.44C11.13 15.18 11.32 14.97 11.57 14.89C11.82 14.81 12.07 14.71 12.3 14.59C12.53 14.47 12.8 14.5 13.02 14.64L14.32 15.56C14.56 15.38 14.78 15.18 14.99 14.97C15.19 14.77 15.37 14.57 15.54 14.36L14.64 13.08C14.49 12.87 14.47 12.58 14.59 12.35C14.7 12.13 14.8 11.89 14.89 11.62C14.97 11.37 15.18 11.19 15.43 11.15L17 10.88C17.04 10.58 17.06 10.28 17.06 9.99C17.06 9.71 17.04 9.44 17.01 9.17L15.46 8.9C15.2 8.86 14.99 8.67 14.91 8.42C14.83 8.17 14.73 7.92 14.61 7.69C14.49 7.46 14.52 7.18 14.66 6.97L15.58 5.67C15.4 5.44 15.2 5.21 14.99 5C14.79 4.8 14.59 4.62 14.37 4.45L13.09 5.35C12.88 5.5 12.6 5.52 12.37 5.4C12.15 5.29 11.91 5.19 11.64 5.1C11.4 5.02 11.22 4.81 11.17 4.56L10.9 2.99C10.33 2.92 9.74003 2.92 9.18003 2.99L8.91003 4.54C8.87003 4.8 8.68003 5.01 8.43003 5.09C8.18003 5.17 7.93003 5.27 7.70003 5.39C7.47003 5.51 7.19003 5.49 6.98003 5.34L5.68003 4.42C5.44003 4.6 5.22003 4.8 5.01003 5.01C4.81003 5.21 4.63003 5.41 4.46003 5.62L5.36003 6.9C5.51003 7.11 5.53003 7.39 5.41003 7.62C5.30003 7.84 5.20003 8.08 5.11003 8.35C5.03003 8.59 4.82003 8.77 4.57003 8.82L3.00003 9.09C2.96003 9.39 2.94003 9.69 2.94003 9.98C2.94003 10.26 2.96003 10.53 2.99003 10.8L4.54003 11.07C4.80003 11.11 5.01003 11.3 5.09003 11.55C5.17003 11.8 5.27003 12.05 5.39003 12.28C5.50003 12.51 5.48003 12.79 5.34003 13L4.42003 14.3C4.60003 14.54 4.80003 14.76 5.01003 14.97C5.21003 15.17 5.41003 15.35 5.62003 15.52L6.90003 14.62C7.11003 14.47 7.39003 14.45 7.63003 14.57C7.85003 14.68 8.09003 14.78 8.36003 14.87C8.61003 14.95 8.79003 15.16 8.83003 15.41L9.10003 16.98V16.99Z"})})},274609:(e,t,a)=>{a.d(t,{L:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("historyBack",{viewBox:"0 0 14 14",directional:!0,svg:(0,i.jsx)("polygon",{points:"2.85893 7.74676 8.05608 12.9439 7 14 0.528042 7.52804 0 7 0.528042 6.47196 7 0 8.05608 1.05608 2.85893 6.25324 14 6.25324 14 7.74676"})})},282339:(e,t,a)=>{a.d(t,{QW:()=>f,dG:()=>g,ic:()=>m,lc:()=>p,xG:()=>h,ye:()=>u});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698);var i=()=>a(67657),r=()=>a(708685),n=()=>a(921598),o=()=>a(713998),s=()=>a(594013),l=()=>a(100594),d=()=>a(901610);const c=new Set(["groupBy_property_not_configured","groupBy_property_deleted","groupBy_property_not_groupable","groupBy_formula_not_groupable","aggregation_property_not_configured","aggregation_invalid","aggregation_deleted","stackBy_property_not_groupable","stackBy_formula_not_groupable","stackBy_property_deleted","name_property_not_configured","name_property_deleted","name_property_invalid","property_value_property_not_configured","property_value_property_deleted","property_value_property_invalid"]);function u(e){let{chartConfig:t,collectionSchema:a}=e;if(!t||"placeholder"===t.type)return"chart_config_not_found";if(void 0===t.dataConfig)return"data_model_invalid";if("groups_reducer"===t.dataConfig.type){const e=t.dataConfig.groupBy;if(!e)return"groupBy_property_not_configured";const s=(0,o()._g)({schema:a,property:e.property});if(!s)return"groupBy_property_deleted";const u=(0,n().Eg)(s);if("formula"===s.type&&!u)return"groupBy_formula_not_groupable";if(!u)return"groupBy_property_not_groupable";const p=t.dataConfig.aggregationConfig;if(!p)return"aggregation_property_not_configured";if("count"!==p.aggregation.aggregator){const e=p.aggregation.property,t=(0,o()._g)({schema:a,property:e});if(!t)return"aggregation_deleted";if((0,i().FM)(p.aggregation)&&t&&!(0,l().JW)(t))return"aggregation_invalid";if("formula"===(null==t?void 0:t.type)&&"unique"===p.aggregation.aggregator){const e=(0,r().getFormulaPropertySchemaResultType)(t);if(!(0,l().UK)(e))return"aggregation_invalid"}}if((0,d().m)(t)){var c;const e=null===(c=t.dataConfig.aggregationConfig.stackOptions)||void 0===c?void 0:c.groupBy.property;if(e){const t=(0,o()._g)({schema:a,property:e});if(!t)return"stackBy_property_deleted";const i=(0,n().Eg)(t);if("formula"===t.type&&!i)return"stackBy_formula_not_groupable";if(!i)return"stackBy_property_not_groupable"}}}else{if("results_reducer"!==t.dataConfig.type)return"data_model_invalid";{const e=t.dataConfig.nameProperty;if(!e)return"name_property_not_configured";const i=(0,o()._g)({schema:a,property:e});if(!i)return"name_property_deleted";if(!(0,s().tH)(i))return"name_property_invalid";const r=t.dataConfig.valueProperty;if(!r)return"property_value_property_not_configured";const n=(0,o()._g)({schema:a,property:r});if(!n)return"property_value_property_deleted";if(!(0,s().Iw)(n))return"property_value_property_invalid"}}}function p(e){return"groupBy_property_not_configured"===e||"groupBy_property_deleted"===e||"groupBy_property_not_groupable"===e||"groupBy_formula_not_groupable"===e||"name_property_not_configured"===e||"name_property_deleted"===e||"name_property_invalid"===e}function g(e){return"aggregation_property_not_configured"===e||"aggregation_deleted"===e||"aggregation_invalid"===e||"property_value_property_not_configured"===e||"property_value_property_deleted"===e||"property_value_property_invalid"===e}function m(e){return"stackBy_property_deleted"===e||"stackBy_property_not_groupable"===e||"stackBy_formula_not_groupable"===e||"stackBy_property_no_values"===e}function f(e){return c.has(e)}function h(e){return"stackBy_property_no_values"===e}},284622:(e,t,a)=>{a.d(t,{G:()=>i});const i=(0,a(340498).xh)("xmarkCircle",{default:{loader:()=>a.e(15830).then(a.bind(a,593449))},small:{loader:()=>a.e(57507).then(a.bind(a,657507))},mini:{loader:()=>a.e(26357).then(a.bind(a,26357))},large:{loader:()=>a.e(16939).then(a.bind(a,116939))}})},292119:(e,t,a)=>{a.d(t,{v:()=>o});a(16280),a(296540);var i=()=>a(215087),r=()=>a(643819),n=a(474848);function o(e){return(0,n.jsx)(n.Fragment,{children:s(e)})}function s(e){const{cost:t,intl:a}=e,n=e.trailingZeroDisplay??"auto",o=e.currencySign??"accounting",s=r().W.fromValue(t),l=i().r[s.currencyCode];if(!l)throw new Error(`Unsupported currency code: ${s.currencyCode}`);let d=a.formatNumber(s.amount/Math.pow(10,l.minorUnitDigits),{style:"currency",currency:s.currencyCode,currencyDisplay:"symbol",currencySign:o});return"stripIfInteger"===n&&(d=d.replace(new RegExp(`[.,]0{${l.minorUnitDigits}}(\\s+.*)?$`),"$1")),d}},299797:(e,t,a)=>{a.d(t,{A:()=>o});a(296540);var i=()=>a(340498),r=()=>a(554509),n=a(474848);const o=function(e){let{icon:t,title:o,description:s,cta:l,bodyWidth:d,iconSize:c=i().Ev.lg}=e;const u=(0,a(401497).IS)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",gap:12},icon:{width:c,height:c,color:e.icon.tertiary},body:{display:"flex",flexDirection:"column",textAlign:"center",maxWidth:d??300,gap:12},description:{textWrap:"balance",color:e.text.secondary}})),[d,c]);return(0,n.jsxs)("div",{style:u.container,children:[t(u.icon),(0,n.jsxs)("div",{style:u.body,children:[(0,n.jsx)(r().D,{colorName:"primary",styleName:"UIHeading-17px/Semibold",children:o}),(0,n.jsx)(r().D,{styleName:"UIRegular-14px/Regular",style:u.description,children:s})]}),l&&(0,n.jsx)("div",{children:l})]})}},300451:(e,t,a)=>{a.d(t,{A:()=>r});class i extends(()=>a(757695))().Store{getInitialState(){return{settingOpen:"initial",permissionItem:void 0,from:void 0,sudoModeStore:void 0,location:"",faviconUrl:null,previewImageUrl:null,hideBreadcrumbs:!1,hideSearch:!1,hideWatermark:!1,enableDuplicateAsTemplate:!1,hideShare:!1,customHeaderBlockIds:[],googleAnalyticsId:void 0,theme:void 0,enableQna:!1}}}const r=new i},320865:(e,t,a)=>{a.d(t,{A:()=>r});a(296540);var i=a(474848);const r=function(){return(0,i.jsx)(a(678553).Ay,{title:(0,i.jsx)(a(331542).A,{})})}},345404:(e,t,a)=>{a.d(t,{kE:()=>R});var i=()=>a(638681),r=()=>a(377315),n=()=>a(343747);const o=i().object({required:{r:i().lte(i().gte(i().integer(),0),255),g:i().lte(i().gte(i().integer(),0),255),b:i().lte(i().gte(i().integer(),0),255)},optional:{}}),s=i().object({required:{value:i().union([i().string(),i().nonEmpty(i().array(i().string()))])},optional:{section:i().literals(n().RB.avatar,n().RB.identifier,n().RB.primary,n().RB.secondary,n().RB.body)}}),l=r().CA.object({required:{url:r().CA.string()},optional:{}}),d=r().CA.object({required:{content:r().CA.string()},optional:{link:r().CA.nullable(l)}}),c=r().CA.union([r().CA.object({required:{text:d},optional:{type:r().CA.literal("text")}})]),u=r().CA.object({required:{value:r().CA.array(c)},optional:{section:r().CA.literals(n().RB.body,n().RB.title)}}),p=i().object({required:{value:i().union([i().string(),i().nonEmpty(i().array(i().string()))])},optional:{language:i().string(),section:i().literals(n().RB.body)}}),g=i().object({required:{value:i().union([i().boolean(),i().nonEmpty(i().array(i().boolean()))])},optional:{}}),m=i().object({required:{value:i().union([i().number(),i().nonEmpty(i().array(i().number()))])},optional:{}}),f=i().object({required:{value:i().union([i().string(),i().nonEmpty(i().array(i().string()))])},optional:{color:o,section:i().literals(n().RB.primary)}}),h=i().object({required:{value:i().union([i().string(),i().tuple([i().string()])])},optional:{color:o,section:i().literal(n().RB.title)}}),b=i().object({required:{value:i().union([o,i().nonEmpty(i().array(o))])},optional:{section:i().literals(n().RB.entity,n().RB.background)}}),v=i().object({required:{value:i().union([i().dateString(),i().nonEmpty(i().array(i().dateString()))])},optional:{section:i().literals(n().RB.primary,n().RB.secondary)}}),y=i().object({required:{value:i().union([i().dateString(),i().nonEmpty(i().array(i().dateString()))])},optional:{section:i().literals(n().RB.primary,n().RB.secondary)}}),x=i().object({required:{value:i().tuple([i().dateString(),i().dateString()])},optional:{section:i().literals(n().RB.primary,n().RB.secondary)}}),S=i().object({required:{value:i().union([i().dateString(),i().tuple([i().dateString()])])},optional:{section:i().literals(n().RB.primary,n().RB.secondary)}}),w=i().object({required:{value:i().union([i().dateString(),i().tuple([i().dateString()])])},optional:{section:i().literals(n().RB.primary,n().RB.secondary)}}),C=i().union([i().object({required:{plain_text:s},optional:{type:i().literal("plain_text")}}),i().object({required:{rich_text:u},optional:{type:i().literal("rich_text")}}),i().object({required:{boolean:g},optional:{type:i().literal("boolean")}}),i().object({required:{number:m},optional:{type:i().literal("number")}}),i().object({required:{enum:f},optional:{type:i().literal("enum")}}),i().object({required:{title:h},optional:{type:i().literal("title")}}),i().object({required:{color:b},optional:{type:i().literal("color")}}),i().object({required:{date:v},optional:{type:i().literal("date")}}),i().object({required:{datetime:y},optional:{type:i().literal("datetime")}}),i().object({required:{datetimerange:x},optional:{type:i().literal("datetimerange")}}),i().object({required:{created_datetime:S},optional:{type:i().literal("created_datetime")}}),i().object({required:{last_edited_datetime:w},optional:{type:i().literal("last_edited_datetime")}}),i().object({required:{code:p},optional:{type:i().literal("code")}})]),j=i().object({required:{},optional:{section:i().literal(n().RB.embed)}}),M=i().object({required:{},optional:{section:i().literal(n().RB.embed)}}),_=i().object({required:{},optional:{section:i().literal(n().RB.embed)}}),A=i().object({required:{},optional:{section:i().literal("embed")}}),I=i().object({required:{},optional:{format:i().nullable(i().literals("icon")),section:i().literals(n().RB.avatar,n().RB.entity,n().RB.embed)}}),k=i().intersection([i().object({required:{src_url:i().union([i().string(),i().nonEmpty(i().array(i().string()))])},optional:{default_height:i().number(),default_width:i().number()}}),i().union([i().object({required:{html:j},optional:{type:i().literal("html")}}),i().object({required:{pdf:M},optional:{type:i().literal("pdf")}}),i().object({required:{audio:_},optional:{type:i().literal("audio")}}),i().object({required:{video:A},optional:{type:i().literal("video")}}),i().object({required:{image:I},optional:{type:i().literal("image")}})])]),T=i().union([i().string(),i().nonEmpty(i().array(i().string()))]),P=i().object({required:{uri:T},optional:{type:i().literal("mention"),mention:i().object({required:{},optional:{section:i().literal(n().RB.primary)}}),extension:i().isNull()}}),L=i().object({required:{uri:T},optional:{type:i().literal("extension"),extension:i().nonEmpty(i().array(i().object({required:{id:i().string()},optional:{section:i().literals(n().RB.avatar,n().RB.embed,n().RB.primary,n().RB.secondary)}}))),mention:i().isNull()}}),D=i().union([P,L]),E=i().object({required:{uri:T},optional:{}}),B=i().intersection([i().object({required:{id:i().string(),name:i().string()},optional:{}}),i().union([i().object({required:{inline:C},optional:{type:i().literal("inline")}}),i().object({required:{embed:k},optional:{type:i().literal("embed")}}),i().object({required:{relation:D},optional:{type:i().literal("relation")}}),i().object({required:{people:E},optional:{type:i().literal("people")}})])]),R=i().array(B)},380048:(e,t,a)=>{a.d(t,{I:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("chevronLeft",{viewBox:"0 0 16 16",directional:!0,svg:(0,i.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},432540:(e,t,a)=>{a.d(t,{I:()=>i});const i=(0,a(340498).xh)("chevronDown",{default:{loader:()=>a.e(2611).then(a.bind(a,902611))},small:{loader:()=>a.e(3581).then(a.bind(a,503581))},mini:{loader:()=>a.e(32715).then(a.bind(a,532715))},large:{loader:()=>a.e(17217).then(a.bind(a,617217))}})},434945:(e,t,a)=>{a.d(t,{DZ:()=>y,F3:()=>_,PF:()=>S,Ud:()=>L,_H:()=>E,a_:()=>C,dg:()=>P,pv:()=>w,px:()=>A,ut:()=>I,v:()=>j});a(944114),a(898992),a(354520),a(430670),a(803949),a(581454),a(737550),a(296540);var i=()=>a(842599),r=()=>a(179034),n=()=>a(96689),o=()=>a(506391),s=()=>a(496603),l=()=>a(534177),d=()=>a(939768),c=()=>a(630116),u=()=>a(725951),p=()=>a(685200),g=()=>a(739095),m=()=>a(939482),f=()=>a(492414),h=()=>a(972435),b=()=>a(836251),v=a(474848);const y=(0,a(959013).YK)({missingValuesError:{id:"developerIntegrationForm.error.missingFieldRequired",defaultMessage:"{ fieldName } is required."},invalidInputError:{id:"developerIntegrationForm.error.invalidInput",defaultMessage:"{ fieldName } is invalid."},transactionGenericError:{id:"developerIntegrationAction.error.failedTransaction",defaultMessage:"Something went wrong, please try again"},basicSectionTitle:{id:"developerIntegrationForm.sectionHeader.basic",defaultMessage:"Basic information"},secretSectionTitle:{id:"developerIntegrationForm.sectionHeader.secrets",defaultMessage:"Secrets"},capabilitiesSectionTitle:{id:"developerIntegrationForm.sectionHeader.capabilities",defaultMessage:"Capabilities"},oauthSectionTitle:{id:"developerIntegrationForm.sectionHeader.oauthAndUri",defaultMessage:"OAuth Domain & URIs"},organizationSectionTitle:{id:"developerIntegrationForm.sectionHeader.organization",defaultMessage:"Organization Information"},externalOauthSectionTitle:{id:"developerIntegrationForm.sectionHeader.external_oauth_setup",defaultMessage:"External Authorization Setup"},unfurlingSectionTitle:{id:"developerIntegrationForm.sectionHeader.unfurlingDomains",defaultMessage:"Unfurling Domain & Patterns"},basicPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.basic",defaultMessage:"Basic information"},secretPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.secrets",defaultMessage:"Secrets"},capabilitiesPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.capabilities",defaultMessage:"Capabilities"},distributionPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.distribution",defaultMessage:"Distribution"},linkPreviewPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.unfurling",defaultMessage:"Link Preview"},distributionSwitcherLabel:{id:"developerIntegrationFormDistributionView.switcher.label",defaultMessage:"Do you want to make this integration public?"},unfurlingSwitcherLabel:{id:"developerIntegrationFormUnfurlingView.switcher.label",defaultMessage:"Do you want to enable link preview for this integration?"},integrationTypeLabel:{id:"developerIntegrationFormBasicView.integrationType.label",defaultMessage:"Type"},integrationTypeSubtitle:{id:"developerIntegrationFormBasicView.integrationType.subtitle",defaultMessage:"Internal integrations are installed to a specific workspace. You can make this integration public later"},nameLabel:{id:"developerIntegrationFormBasicView.name.label",defaultMessage:"Name"},nameSubtitle:{id:"developerIntegrationFormBasicView.name.subtitle",defaultMessage:"Name to identify your integration to users"},typeLabel:{id:"developerIntegrationFormBasicView.type.label",defaultMessage:"Type"},typeSubtitle:{id:"developerIntegrationFormBasicView.type.subtitle",defaultMessage:"Type of integration"},iconLabel:{id:"developerIntegrationFormBasicView.icon.label",defaultMessage:"Logo"},iconSubtitle:{id:"developerIntegrationFormBasicView.icon.subtitle",defaultMessage:"512px x 512px in PNG format is recommended"},spaceLabel:{id:"developerIntegrationFormBasicView.space.label",defaultMessage:"Associated workspace"},spaceSubtitle:{id:"developerIntegrationFormBasicView.space.subtitle",defaultMessage:"Select a workspace to install the integration to. Workspace owners will be able to manage the integration as well. You can upgrade the integration to use OAuth later"},tokenLabel:{id:"developerIntegrationFormSecretView.secret.label",defaultMessage:"Internal Integration Secret"},authorizationUrlLabel:{id:"developerIntegrationFormSecretView.integrationAuthUrl.label",defaultMessage:"Authorization URL"},clientIdLabel:{id:"developerIntegrationFormSecretView.clientId.label",defaultMessage:"OAuth client ID"},clientSecretLabel:{id:"developerIntegrationFormSecretView.clientSecret.label",defaultMessage:"OAuth client secret"},capabilitiesLabel:{id:"developerIntegrationFormCapabilitiesView.capabilities.label",defaultMessage:"Capabilities"},redirectUrisLabel:{id:"developerIntegrationFormDistributionView.redirect_uris.label",defaultMessage:"Redirect URIs"},redirectUrisSubtitle:{id:"developerIntegrationFormDistributionView.redirect_uri.subtitle",defaultMessage:"In the Notion OAuth flow, users will be redirected to this path after they have authenticated with Notion. The path will be appended with the authorization code for access and must have a protocol. It can’t contain URL fragments, relative paths or wildcards, and can’t be a public IP address. It must also be included in the token request"},websiteUrlLabel:{id:"developerIntegrationFormDistributionView.website_url.label",defaultMessage:"Website or homepage"},websiteUrlSubtitle:{id:"developerIntegrationFormDistributionView.website_url.subtitle",defaultMessage:"Used to link to your integration’s website or homepage in your integration page and authentication screens"},taglineLabel:{id:"developerIntegrationFormDistributionView.tagline.label",defaultMessage:"Tagline"},taglineSubtitle:{id:"developerIntegrationFormDistributionView.tagline.subtitle",defaultMessage:"A short description of what the integration does"},privacyPolicyUrlLabel:{id:"developerIntegrationFormDistributionView.privacy_policy_url.label",defaultMessage:"Privacy policy"},privacyPolicyUrlSubtitle:{id:"developerIntegrationFormDistributionView.privacy_policy_url.subtitle",defaultMessage:"Used to link to your integration’s privacy policy in your integration page and authentication screens"},termOfUseLabel:{id:"developerIntegrationFormDistributionView.term_of_use.label",defaultMessage:"Terms of use"},termOfUseSubtitle:{id:"developerIntegrationFormDistributionView.term_of_use.subtitle",defaultMessage:"Used to link to your integration’s terms of use in your integration page and authentication screens"},emailLabel:{id:"developerIntegrationFormDistributionView.email.label",defaultMessage:"Support email"},emailSubtitle:{id:"developerIntegrationFormDistributionView.email.subtitle",defaultMessage:"Used to link to your integration’s support email in your integration page and authentication screens"},developerNameLabel:{id:"developerIntegrationFormDistributionView.developer_name.label",defaultMessage:"Company name"},developerNameSubtitle:{id:"developerIntegrationFormDistributionView.developer_name.subtitle",defaultMessage:"The name of your company or organization. You may use your own name if this does not apply"},templateLabel:{id:"developerIntegrationFormDistributionView.template.label",defaultMessage:"Notion URL for optional template"},templateSubtitle:{id:"developerIntegrationFormDistributionView.template.subtitle",defaultMessage:"Use this field if you'd like to offer a user a Notion page to duplicate into their workspace during OAuth. URL must be to a public Notion page"},unfurlUrlLabel:{id:"developerIntegrationFormUnfurlingView.unfurlUrl.label",defaultMessage:"Unfurl Callback URL"},unfurlUrlCaption:{id:"developerIntegrationFormUnfurlingView.unfurlUrl.caption",defaultMessage:"Called with a POST request when an unfurl action occurs and with a DELETE request when unfurl url preview(s) or mention(s) is deleted"},domainLabel:{id:"developerIntegrationFormUnfurlingView.domain.label",defaultMessage:"Unfurl Url Domain"},urlMatchingAndPlaceholderLabel:{id:"developerIntegrationFormUnfurlingView.urlmatching.label",defaultMessage:"URL matching and placeholder"},urlMatchingAndPlaceholderCaption:{id:"developerIntegrationFormUnfurlingView.urlmatching.caption",defaultMessage:"When users paste a URL that matches this pattern on your verified domain, they'll have the option to unfurl it as a preview. Any sample URLs are validated against provided patterns"},externalOauthAuthorizeUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthAuthorizeUrl.label",defaultMessage:"OAuth Authorize URL"},externalOauthAuthorizeUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthAuthorizeUrl.caption",defaultMessage:"Used by Notion to initiate user authorization with the integration"},externalOauthTokenUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthTokenUrl.label",defaultMessage:"OAuth Token URL"},externalOauthTokenUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthTokenUrl.caption",defaultMessage:"Called by Notion to retrieve an access token for the unfurl callback URL"},externalOauthScopesLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthScopes.label",defaultMessage:"OAuth Scopes"},externalOauthScopesCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthScopes.caption",defaultMessage:"Optional scopes string"},externalDeletionUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalDeletionUrl.label",defaultMessage:"Deleted Token Callback URL "},externalDeletionUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalDeletionUrl.caption",defaultMessage:"Called by Notion when a user removes your integration"},externalClientIdLabel:{id:"developerIntegrationFormUnfurlingView.externalClientId.label",defaultMessage:"OAuth Client ID"},externalClientSecretLabel:{id:"developerIntegrationFormUnfurlingView.externalClientSecret.label",defaultMessage:"OAuth Client Secret"},termsOfUseUrlLabel:{id:"developerIntegrationFormDistributionView.term_of_use_url.label",defaultMessage:"Terms of use"},termsOfUseUrlSubtitle:{id:"developerIntegrationFormDistributionView.term_of_use_url.subtitle",defaultMessage:"Used to link to your integration’s terms of use in your integration page and authentication screens"}});function x(e){return`${s().xQ(e)}Label`}h().A.formatMessage(y.basicPageTitle),h().A.formatMessage(y.secretPageTitle),h().A.formatMessage(y.capabilitiesPageTitle),h().A.formatMessage(y.distributionPageTitle),h().A.formatMessage(y.organizationSectionTitle),h().A.formatMessage(y.oauthSectionTitle),h().A.formatMessage(y.linkPreviewPageTitle),h().A.formatMessage(y.externalOauthSectionTitle),h().A.formatMessage(y.unfurlingSectionTitle);function S(e,t){const a=["basic","secrets","capabilities","distribution"];switch(e){case"create-bot":return["basic"];case"update-bot":case"create-guest-integration":return a;case"update-compliance-integration":return["basic","secrets","distribution","compliance"];default:return t&&a.push("linkPreview"),a}}const w={type:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},name:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},icon:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},space:{supportedBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},capabilities:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},token:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},authorization_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},redirect_uris:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},template_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},developer_name:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},website_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},tagline:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},privacy_policy_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},terms_of_use_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},email:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},unfurl_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},domain:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1}},url_matching_and_placeholder:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1}},external_oauth_authorize_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_oauth_token_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_oauth_scopes:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},external_client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_deletion_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}}};function C(e){const{formData:t,setFormData:a,formStateType:i,currentFieldNames:r,formFieldValidationSchema:n}=e,o=function(e){const{formData:t,formStateType:a,currentFieldNames:i,formFieldValidationSchema:r=w}=e;return i.filter((e=>{const i=t[e].value;return r[e].requiredBy[a]&&!i}))}({formData:t,formStateType:i,currentFieldNames:r,formFieldValidationSchema:n});return o.forEach((e=>{const t=x(e);a({field:e,error:h().A.formatMessage(y.missingValuesError,{fieldName:h().A.formatMessage(y[t])})})})),o}function j(e){const{formData:t,formStateType:a,templateStore:i,setFormData:r,currentFieldNames:n}=e,o=function(e){const{formData:t,formStateType:a,templateStore:i,currentFieldNames:r,formFieldValidationSchema:n=w}=e,o=[];return r.forEach((e=>{const r=t[e].value,s=n[e].supportedBy[a],l=g().Yj[e];if(s&&r&&l){const a=l({value:r,formData:t,templateStore:i});var d;a.validated||o.push({fieldName:e,errorMessages:null===(d=a.errorMessages)||void 0===d?void 0:d.map((e=>{let{descriptor:t,values:a}=e;return{descriptor:t,values:a??{}}}))})}})),o}({formData:t,formStateType:a,templateStore:i,currentFieldNames:n});return o.forEach((e=>{var t;r({field:e.fieldName,error:e.errorMessages?e.errorMessages.map(((e,t)=>{let{descriptor:a,values:i}=e;return(0,v.jsx)("div",{children:h().A.formatMessage(a,i)},`validation-error-${t}`)})):h().A.formatMessage(y.invalidInputError,{fieldName:null==y||null===(t=y[x(e.fieldName)])||void 0===t?void 0:t.defaultMessage})})})),o}function M(e){if(!e)return;const t={};return(0,l().WP)(e).forEach((e=>{let[a,i]=e;i&&(t[a]=!0)})),t}function _(e){return{token:e.token.value,client_id:e.client_id.value,client_secret:e.client_secret.value,authorization_url:e.authorization_url.value,name:e.name.value,icon:e.icon.value,space:e.space.value,redirect_uris:(e.redirect_uris.value||[]).map((e=>g().AT(e))),website_url:g().AT(e.website_url.value),tagline:e.tagline.value,privacy_policy_url:g().AT(e.privacy_policy_url.value),terms_of_use_url:g().AT(e.terms_of_use_url.value),template_page_id:(0,b().wU)(e.template_url.value??"")??null,email:i().qh(e.email.value),capabilities:M(e.capabilities.value),developer_name:e.developer_name.value,unfurl_url:e.unfurl_url.value,domain:e.domain.value,url_matching_and_placeholder:e.url_matching_and_placeholder.value,external_oauth_authorize_url:g().AT(e.external_oauth_authorize_url.value),external_oauth_token_url:g().AT(e.external_oauth_token_url.value),external_client_id:e.external_client_id.value,external_client_secret:e.external_client_secret.value,external_oauth_scopes:e.external_oauth_scopes.value,external_deletion_url:g().AT(e.external_deletion_url.value)}}function A(e){const{formData:t,formStateType:a,currentFieldNames:i,formFieldValidationSchema:r=w}=e;return i.some((e=>r[e].supportedBy[a]&&t[e].error))}const I={read_content:!1,update_content:!1,insert_content:!1,read_user_without_email:!1,read_user_with_email:!1,read_comment:!1,insert_comment:!1,link_preview:!1,synced_database:!1,workspace_content_transfer:!1};function k(e){const t={...I};return e&&(0,l().WP)(e).forEach((e=>{let[a,i]=e;i&&(0,l().O)(t,a)&&(t[a]=!0)})),t}const T={value:void 0,error:void 0},P={type:T,name:T,icon:T,space:T,capabilities:T,token:T,authorization_url:T,client_secret:T,client_id:T,tagline:T,email:T,website_url:T,privacy_policy_url:T,terms_of_use_url:T,template_url:T,redirect_uris:T,developer_name:T,external_oauth_authorize_url:T,external_oauth_token_url:T,external_client_id:T,external_client_secret:T,external_oauth_scopes:T,external_deletion_url:T,unfurl_url:T,domain:T,url_matching_and_placeholder:T};function L(e,t){return"error"in t?{...e,[t.field]:{...e[t.field],error:t.error}}:{...e,[t.field]:{...e[t.field],...t.value&&{error:void 0},value:t.value}}}async function D(e){const{pageId:t,store:a}=e;if(!a||!t)return;const i=c().Bv.createChildStore(a,{table:r().ev,id:t});return await i.load(),(0,f().Ay)({store:i,preferPublicLink:!0,pageVisitSource:void 0})}async function E(e){const{userRootStore:t,formStoreState:a,environment:i,initialUrlMatchingAndPlaceholder:r=[m().dZ]}=e;if("create-bot"===a.type){return{token:void 0,client_id:void 0,client_secret:void 0,authorization_url:void 0,space:(t?t.getAdminSpaceStores():[])[0],developer_name:void 0,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,template_url:void 0,redirect_uris:void 0,capabilities:{read_content:!0,insert_content:!0,update_content:!0,read_comment:!1,insert_comment:!1,read_user_with_email:!1,read_user_without_email:!1,link_preview:!1,synced_database:!1,workspace_content_transfer:!1},unfurl_url:void 0,domain:void 0,url_matching_and_placeholder:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-bot"===a.type||"create-guest-integration"===a.type){var s;const e=null===(s=a.startingRecord)||void 0===s?void 0:s.value,i=t&&e&&c().SL.createChildStore(t,{id:e.space_id,table:n().NX});return{token:a.startingRecord,client_id:void 0,client_secret:void 0,authorization_url:void 0,name:null==e?void 0:e.name,icon:null==e?void 0:e.icon,space:i,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,template_url:void 0,redirect_uris:void 0,capabilities:k(null==e?void 0:e.capabilities),developer_name:void 0,unfurl_url:void 0,domain:void 0,url_matching_and_placeholder:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-guest-integration"===a.type){const e=a.startingRecord.value;return{token:void 0,client_id:a.startingRecord,client_secret:a.startingRecord,authorization_url:(0,d().P0)({baseUrl:(0,u().sZ)("production"),clientId:a.startingRecord.value.id,redirectUri:a.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await D({pageId:e.info.template_page_id,store:t,environment:i}),redirect_uris:e.redirect_uris,capabilities:k(e.capabilities),developer_name:e.info.developer_name,unfurl_url:void 0,domain:void 0,url_matching_and_placeholder:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("create-third-party-external-integration"===a.type){const e=a.startingRecord.value;return{token:void 0,client_id:a.startingRecord,client_secret:a.startingRecord,authorization_url:(0,d().P0)({baseUrl:(0,u().sZ)("production"),clientId:a.startingRecord.value.id,redirectUri:a.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await D({pageId:e.info.template_page_id,store:t,environment:i}),redirect_uris:void 0,capabilities:k(e.capabilities),developer_name:e.info.developer_name,unfurl_url:void 0,domain:{developmentDomain:m().es,verifiedDomains:[],domainVerifications:[]},url_matching_and_placeholder:r,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-third-party-external-integration"===a.type){var g,f;const e=a.startingRecord.value,r=null===(g=a.startingAuthRecord)||void 0===g?void 0:g.value,n=a.domainVerifications,s=e.info.original_url_patterns||[],c={developmentDomain:(null===(f=e.info.development_url_domains)||void 0===f?void 0:f[0])||"",verifiedDomains:e.info.original_url_domains||[],domainVerifications:n},m=s.map((t=>{var a;if(!0!==(null===(a=t.additional_types)||void 0===a?void 0:a.collection))return{name:(0,p().g)({patternName:t.name,integrationId:e.id}),regex:t.regex,attributes:((null==t?void 0:t.attributes)??[]).map(o().mW),sampleUrls:(null==t?void 0:t.sample_urls)??[]}})).filter(l().O9);return{token:void 0,client_id:a.startingRecord,client_secret:a.startingRecord,authorization_url:(0,d().P0)({baseUrl:(0,u().sZ)("production"),clientId:a.startingRecord.value.id,redirectUri:a.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await D({pageId:e.info.template_page_id,store:t,environment:i}),redirect_uris:e.redirect_uris,capabilities:k(e.capabilities),developer_name:e.info.developer_name,domain:c,url_matching_and_placeholder:m,unfurl_url:e.info.unfurl_url,external_oauth_authorize_url:null==r?void 0:r.oauth_authorize_url,external_oauth_token_url:null==r?void 0:r.oauth_token_url,external_client_id:null==r?void 0:r.client_id,external_client_secret:null==r?void 0:r.client_secret,external_oauth_scopes:null==r?void 0:r.scopes,external_deletion_url:null==r?void 0:r.deletion_url}}if("update-first-party-external-integration"===a.type){var h;const e=a.startingRecord.value,t=e.info.original_url_patterns||[],i={developmentDomain:(null===(h=e.info.development_url_domains)||void 0===h?void 0:h[0])||"",verifiedDomains:e.info.original_url_domains??[],domainVerifications:[]},r=t.map((t=>{var a;if(!0!==(null===(a=t.additional_types)||void 0===a?void 0:a.collection))return{name:(0,p().g)({patternName:t.name,integrationId:e.id}),regex:t.regex,attributes:((null==t?void 0:t.attributes)??[]).map(o().mW),sampleUrls:(null==t?void 0:t.sample_urls)??[]}})).filter(l().O9);return{token:void 0,client_id:a.startingRecord,client_secret:a.startingRecord,authorization_url:void 0,name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:void 0,redirect_uris:e.redirect_uris,capabilities:k(e.capabilities),developer_name:e.info.developer_name,domain:i,url_matching_and_placeholder:r,unfurl_url:e.info.unfurl_url,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-compliance-integration"===a.type){var b;const e=a.startingRecord.value,r=null===(b=a.startingAuthRecord)||void 0===b?void 0:b.value;return{token:void 0,client_id:a.startingRecord,client_secret:a.startingRecord,authorization_url:(0,d().P0)({baseUrl:(0,u().sZ)("production"),clientId:a.startingRecord.value.id,redirectUri:a.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await D({pageId:e.info.template_page_id,store:t,environment:i}),redirect_uris:e.redirect_uris,capabilities:k(e.capabilities),developer_name:e.info.developer_name,domain:void 0,url_matching_and_placeholder:void 0,unfurl_url:void 0,external_oauth_authorize_url:null==r?void 0:r.oauth_authorize_url,external_oauth_token_url:null==r?void 0:r.oauth_token_url,external_client_id:null==r?void 0:r.client_id,external_client_secret:null==r?void 0:r.client_secret,external_oauth_scopes:null==r?void 0:r.scopes,external_deletion_url:null==r?void 0:r.deletion_url}}(0,l().HB)(a)}},435212:(e,t,a)=>{a.d(t,{Kz:()=>n,Sc:()=>o,as:()=>r});var i=()=>a(2220);function r(e,t){(0,i().u)({environment:e,event:{eventName:"open_customize_site",eventProperties:t}})}function n(e,t){(0,i().u)({environment:e,event:{eventName:"update_site_customization_settings",eventProperties:t}})}function o(e){(0,i().u)({environment:e,event:{eventName:"close_customize_site",eventProperties:{}}})}},447887:(e,t,a)=>{a.d(t,{A:()=>_});a(296540);var i=()=>a(484714),r=()=>a(987264),n=()=>a(959013),o=()=>a(981485),s=()=>a(38337),l=()=>a(662303),d=()=>a(148307),c=()=>a(576250),u=()=>a(274609),p=()=>a(427704),g=()=>a(381349),m=()=>a(284371),f=()=>a(756279),h=()=>a(704152),b=()=>a(493823),v=()=>a(187485),y=()=>a(2143),x=()=>a(309684),S=()=>a(603745),w=()=>a(313786),C=a(474848);function j(e){const{className:t,title:a,subtitle:i,onNavigateBack:r,navigateBackMessage:l,children:g,icon:m,sideContent:j,innerContainerStyles:_}=e,A=(0,n().tz)();return(0,C.jsx)(w().A,{title:A.formatMessage({id:"developerIntegrationsLayout.document.title",defaultMessage:"My integrations | Notion Developers"}),children:(0,C.jsxs)(y().H,{className:t,style:M.scroller,type:f().A.Y,children:[(0,C.jsx)(S().A,{}),(0,C.jsxs)("div",{className:s().f1O,style:M.topBar,children:[(0,C.jsx)("div",{children:(0,C.jsx)(v().A,{href:p().JZ.developerPortal,external:!0,children:(0,C.jsx)("img",{src:d().A.images.integrations.notionDevsLogoGaSvg})})}),(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,C.jsx)(v().A,{style:{display:"flex",marginLeft:-6},href:p().JZ.developerPortal,external:!0,children:(0,C.jsx)(b().p,{iconLeading:c().y,size:"sm",children:"View documentation"})}),(0,C.jsx)(x().Ay,{onChange:e=>{o().cL(e)}})]})]}),(0,C.jsxs)("div",{style:{...M.innerContainer,..._},children:[(0,C.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:80,marginBottom:80},children:[(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"66%",justifyContent:"center"},children:[(0,C.jsx)(h().A,{style:{...M.button,...!r&&{display:"none"}},onClick:r,children:(0,C.jsxs)("div",{style:{...M.buttonContent,fontSize:20},children:[(0,u().L)(M.arrowIcon),(0,C.jsx)("div",{style:{marginLeft:12},children:l||(0,C.jsx)(n().sA,{id:"developerIntegrationsLayout.backButton.label",defaultMessage:"My integrations"})})]})}),(0,C.jsx)("div",{style:M.header,children:a}),(0,C.jsx)("div",{style:M.subtitle,children:i})]}),(0,C.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"center",flex:1},children:m})]}),j?(0,C.jsxs)("div",{style:M.gridContainer,children:[(0,C.jsx)("div",{style:M.leftColumn,children:j}),(0,C.jsx)("div",{style:M.rightColumn,children:g})]}):g]}),(0,C.jsxs)("footer",{style:M.footerContainer,children:[(0,C.jsxs)("section",{style:M.footerColophon,children:[(0,C.jsx)("h1",{style:M.footerLogo,children:(0,C.jsx)("img",{src:d().A.images.integrations.notionFooterLogoSvg})}),(0,C.jsx)("h6",{style:M.footerCopy,children:"The all-in-one workspace for your notes, tasks, wikis, and databases."}),(0,C.jsx)("h6",{style:M.footerCopy,children:`©${(new Date).getFullYear()} Notion Labs, Inc.`}),(0,C.jsx)(v().A,{external:!0,href:p().JZ.termsAndPrivacy,style:M.footerLink,children:"Terms & Privacy"})]}),(0,C.jsxs)("nav",{style:{...M.footerNav,gridColumnStart:7},children:[(0,C.jsx)("h5",{style:M.footerSectionHeader,children:"Developers"}),(0,C.jsx)(v().A,{external:!0,href:"https://developers.notion.com/docs",style:M.footerLink,children:"Guides"}),(0,C.jsx)(v().A,{external:!0,href:"https://developers.notion.com/reference",style:M.footerLink,children:"API Reference"}),(0,C.jsx)(v().A,{external:!0,href:p().JZ.creatorProfileIntegrations,style:M.footerLink,children:"My integrations"}),(0,C.jsx)(v().A,{external:!0,href:"https://developers.notion.com/page/frequently-asked-questions",style:M.footerLink,children:"FAQs"}),(0,C.jsx)(v().A,{external:!0,href:p().JZ.developerTerms,style:M.footerLink,children:"Developer terms"})]}),(0,C.jsxs)("nav",{style:M.footerNav,children:[(0,C.jsx)("h5",{style:M.footerSectionHeader,children:"Notion"}),(0,C.jsx)(v().A,{external:!0,href:p().JZ.product,style:M.footerLink,children:"Product"}),(0,C.jsx)(v().A,{external:!0,href:p().JZ.teams,style:M.footerLink,children:"Teams"}),(0,C.jsx)(v().A,{external:!0,href:p().JZ.enterprise,style:M.footerLink,children:"Enterprise"}),(0,C.jsx)(v().A,{external:!0,href:p().JZ.blog,style:M.footerLink,children:"Blog"}),(0,C.jsx)(v().A,{external:!0,href:p().JZ.careers,style:M.footerLink,children:"Careers"})]}),(0,C.jsxs)("nav",{style:M.footerNav,children:[(0,C.jsx)("h5",{style:M.footerSectionHeader,children:"Social"}),(0,C.jsx)(v().A,{external:!0,href:"https://notionup.typeform.com/to/dSurQQp2Q",style:M.footerLink,children:"Developer newsletter"}),(0,C.jsx)(v().A,{external:!0,href:"http://twitter.com/notionapi",style:M.footerLink,children:"Twitter"})]})]})]})})}const M={footerLink:{color:g().Ay.frontTextMedium,cursor:"pointer",textDecoration:"none",display:"block",marginBottom:4},footerColophon:{gridColumn:"auto/span 3"},footerNav:{gridColumn:"auto/span 2",marginBottom:16},footerLogo:{margin:"0 auto 20px",fontSize:0,display:"block"},footerSectionHeader:{fontFamily:m().vc(l().locale).mono,fontWeight:m().Wy.medium,margin:"0 auto 8px",marginBottom:"1.1em",fontSize:15},footerCopy:{fontSize:15,fontWeight:m().Wy.regular,lineHeight:"1.5em",color:g().Ay.frontTextMedium,margin:"0 auto 8px",marginBottom:"1.1em"},footerContainer:{padding:"70px 30px",alignItems:"flex-start",justifyItems:"flex-start",flex:"1 0 auto",zIndex:999,width:"100%",maxWidth:1160,boxSizing:"border-box",margin:"0 auto",borderTop:`1px solid ${g().Ay.dividerColor}`,display:"grid",gridTemplateColumns:"repeat(12,1fr)",columnGap:16,gap:16},scroller:{height:"100vh",background:g().Ay.frontCreamBackground,padding:"0px 10px"},innerContainer:{margin:"auto",width:914},topBar:{maxWidth:1100,height:60,margin:"0 auto",display:"flex",alignItems:"center",marginTop:13,marginBottom:10,justifyContent:"space-between"},header:{fontWeight:m().Wy.bold,fontFamily:m().vc(l().locale).sans,fontSize:50,color:g().Ay.frontText,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},subtitle:{fontWeight:m().Wy.regular,fontSize:24,color:g().Ay.frontTextMedium,letterSpacing:"0.015em"},button:{display:"inline-flex",color:g().Ay.frontTextMedium,borderRadius:4,padding:6,fontSize:15,width:"fit-content"},buttonContent:{display:"flex",alignItems:"center"},arrowIcon:{width:20,height:20},gridContainer:{display:"grid",gridTemplateColumns:"180px auto",paddingBottom:120,gap:60},leftColumn:{gridColumnStart:1,gridColumnEnd:2},rightColumn:{gridColumnStart:2,gridColumnEnd:3}};function _(){const e=(0,i().v3)();return(0,C.jsx)(j,{className:s().UMc,title:(0,C.jsx)(n().sA,{id:"developerIntegrationNotFound.title.label",defaultMessage:"Not Found"}),subtitle:(0,C.jsx)(n().sA,{id:"developerIntegrationNotFound.subtitle.label",defaultMessage:"This integration doesn’t exist."}),onNavigateBack:()=>o().cL(e),icon:(0,r().s)({width:98,height:98}),sideContent:null,children:null})}},450486:(e,t,a)=>{a.r(t),a.d(t,{moveToTeamImpl:()=>l});var i=()=>a(496603),r=()=>a(534177),n=()=>a(44729),o=()=>a(955930),s=()=>a(375078);function l(e){let{transaction:t,currentSpaceViewStore:a,teamStore:l,targets:d,location:c,environment:u}=e;const p=a.getTeamsStores(),g=l.getTeamPagesStore();s().maybeTurnCollectionViewIntoCollectionViewPage({environment:u,blocks:d,transaction:t});for(const s of d){const e=i().I6(p,(e=>{const t=e.getTeamPagesStore().getValue();if(t)return t.includes(s.id)}));(null==e?void 0:e.id)!==l.id&&("append"===c.type?n().NI({parentStore:g,childStore:s,after:c.after,transaction:t}):"prepend"===c.type?n().Ti({parentStore:g,childStore:s,before:c.before,transaction:t}):(0,r().HB)(c),e&&o().Ex({teamStore:e,store:s,transaction:t}))}return l}},465039:(e,t,a)=>{a.d(t,{KF:()=>d,LS:()=>l});a(16280);var i=a(296540),r=()=>a(401497),n=()=>a(981305),o=a(474848);const s=(0,i.createContext)({screenWidthType:"desktop",isMobileWidth:!1,isLowResolutionTabletWidth:!1,isDesktopWidth:!1,isTabletWidth:!1});function l(){const e=(0,i.useContext)(s);if(!e)throw new Error("ScreenWidthContext not found. Please make sure this is used within a ScreenWidthContext.Provider.");return e}function d(e){const{children:t,mobileUpperBound:a=550,lowResolutionTabletUpperBound:l=720,tabletUpperBound:d=1024,throttle:c=0}=e,u=(0,i.useRef)(null),p=(0,r().IS)((()=>({sizeObserverContainer:{width:"100%",height:0,position:"absolute"}})),[]),[g,m]=(0,i.useState)("desktop"),f=(0,i.useCallback)((e=>{e.state.width<=a?m("mobile"):e.state.width>a&&e.state.width<=l?m("lowResolutionTablet"):e.state.width>l&&e.state.width<=d?m("tablet"):m("desktop")}),[a,l,d]);(0,n().B)(u,f,c);const h="mobile"===g,b="desktop"===g,v="tablet"===g,y="lowResolutionTablet"===g,x=i.useMemo((()=>({screenWidthType:g,isMobileWidth:h,isLowResolutionTabletWidth:y,isDesktopWidth:b,isTabletWidth:v})),[g,h,y,b,v]);return(0,o.jsxs)(s.Provider,{value:x,children:[(0,o.jsx)("div",{ref:u,style:p.sizeObserverContainer}),t]})}s.displayName="ScreenWidthContext"},465364:(e,t,a)=>{a.d(t,{$N:()=>T,D5:()=>P,GB:()=>A,M9:()=>M,Pt:()=>k,eW:()=>I,jo:()=>D,v7:()=>_});a(944114),a(898992),a(803949),a(581454);var i=()=>a(244641),r=()=>a(787626),n=()=>a(713998),o=()=>a(597777),s=()=>a(604995),l=()=>a(416504),d=()=>a(519831),c=()=>a(496603),u=()=>a(534177),p=()=>a(299709),g=()=>a(317001),m=()=>a(520861),f=()=>a(878060),h=()=>a(44729),b=()=>a(246826),v=()=>a(319975),y=()=>a(519839),x=()=>a(695625),S=()=>a(397248),w=()=>a(217429),C=()=>a(630116),j=()=>a(747671);function M(e){const{environment:t,droppedStores:a,duplicate:n,calendarBy:c,transaction:u,collectionContextStore:f,duplicateActions:b}=e,v=i().c9.fromMillis(e.startOfDay);let x=!0;for(const i of a){const t=e.collectionStore?e.collectionStore:(0,y().Dj)({store:i,collectionContextStore:f});if(i.getParentTable()===d().Vl||!t){x=!1;break}h().X$({childStore:i,parentStore:t,transaction:u})||(x=!1)}const S=(0,m().T)({environment:t,droppedStores:a,duplicate:n,transaction:u,collectionStore:e.collectionStore,duplicateActions:b});for(const i of S){const a=e.collectionStore?e.collectionStore:(0,y().Dj)({store:i,collectionContextStore:f});if(!a)continue;const n=a.getMappedProperty(c),d=i.getPropertyStore(n),m=(0,r().b)(d.getValue())||s().Ec((0,l().P)()),h=s().kW(m,(0,l().P)()),b=v.toFormat(s().tr);let S;if("date"===h.type||"datetime"===h.type)S={...h,start_date:b};else{const e=s().AA(h,(0,l().P)());if(!e.end)return;const t={...h,start_date:b},a=s().AA(t,(0,l().P)()).start.diff(e.start,"days"),i=e.end.plus(a).toFormat(s().tr);S={...h,start_date:b,end_date:i}}const w=s().kW(S,o().$K(m)||(0,l().P)());(0,g().j)({environment:t,store:i,collectionStore:a,collectionContextStore:f,shouldCoerce:!0,groupsPointer:[],transaction:u,alreadyMovedToCollection:x}),P({environment:t,type:"dateValue",propertyId:n,store:i,transaction:u,dateValue:w}),(0,p().E)({environment:t,collectionContextStore:f,block_id:i.id,property:n,property_type:"date",from:"calendar"})}}function _(e){const{calendarStore:t,direction:a,targetStore:i}=e;t.setState({...t.state,isDragging:!0,targetStore:i,direction:a,temporaryValue:void 0})}function A(e){const{calendarStore:t,x:a,y:n,calendarBy:d}=e,u=t.state;if(u.isDragging){const e=(0,r().b)(u.targetStore.getPropertyStore(d).getValue());if(!e)return;const p=s().kW(e,(0,l().P)()),g=u.temporaryValue||e,m=s().kW(g,(0,l().P)()),f=[];u.dayStoreMap.forEach(((e,t)=>{f.push({store:e,timestamp:t})}));const h=f.find((e=>{let{store:t}=e;const i=x().T.getRectFromStore(t);return Boolean(i&&S().ux(i,a,n))}));let b;if(h){const e=i().c9.fromMillis(h.timestamp),t=e.endOf("day"),a=e.toFormat(s().tr);if(p){const r=s().AA(p,(0,l().P)());if(u.direction===j().Q.Left)if(i().IX.fromDateTimes(e,t).contains(r.start))b=p;else{let e;e="datetimerange"===p.type||"daterange"===p.type?{...p,start_date:a,end_date:p.end_date}:"datetime"===p.type?{type:"datetimerange",start_date:a,start_time:p.start_time,end_date:p.start_date,end_time:p.start_time,time_zone:p.time_zone,reminder:p.reminder}:{type:"daterange",start_date:a,end_date:p.start_date,reminder:p.reminder};const t=s().AA(e,(0,l().P)());b=!r.end&&t.start>r.start||r.end&&t.start>r.end?m:e}else if(r.end?i().IX.fromDateTimes(e,t).contains(r.end):i().IX.fromDateTimes(e,t).contains(r.start))b=p;else{let e;e="date"===p.type?{...p,type:"daterange",end_date:a}:"datetime"===p.type?{...p,type:"datetimerange",end_date:a,end_time:"00:00"}:{...p,end_date:a};const t=s().AA(e,(0,l().P)());b=t.end&&t.end<t.start?m:e}}}if(b&&!c().n4(m,b)){const e=s().kW(b,o().$K(g)||(0,l().P)());t.setState({...u,temporaryValue:e})}}}function I(e){const{environment:t,calendarStore:a,calendarBy:i,transaction:r}=e,n=a.state;n.isDragging&&n.temporaryValue&&(P({type:"dateValue",environment:t,dateValue:n.temporaryValue,propertyId:i,store:n.targetStore,transaction:r}),a.setState({...a.state,isDragging:!1}))}function k(e){const{calendarStore:t}=e,a=t.state;a.isDragging&&t.setState({...a,isDragging:!1})}function T(e){const{environment:t,store:a,collectionStore:r,collectionContextStore:o,startDayOfWeek:d,transaction:c}=e,u=o.dateRangeStartStore.state,p=(0,l().P)(),m=o.normalizedQueryStore.state;if(!m||!m.calendar_by)return;const f=(null==r?void 0:r.getMappedProperty(m.calendar_by))??m.calendar_by,h=s().hp(u,d,p),v=h.startOf("month"),y=h.endOf("month"),x=i().c9.now().startOf("day");let S;return S=i().IX.fromDateTimes(v,y).contains(x)?s().p6(x.valueOf(),p):s().p6(s().iB(u,d,p).valueOf(),p),b().zv({store:a.getPropertiesStore(),data:{[f]:n().m5(S)},transaction:c}),(0,g().j)({environment:t,store:a,collectionStore:r,collectionContextStore:o,shouldCoerce:!0,groupsPointer:[],transaction:c}),a}function P(e){const{environment:t,store:a,propertyId:i,transaction:r}=e;let o;"timestamp"===e.type?o=s().p6(e.timestampMs.valueOf(),(0,l().P)()):"dateValue"===e.type?o=e.dateValue:(0,u().HB)(e);const d=a.getPropertyValue(i);if(o&&function(e){const{propertyId:t,oldDateValue:a,newPersistedDate:i,store:r}=e;if(a||!i||void 0!==i.reminder)return!1;if(!w().default.checkGate({gateName:"adoption_reminder_collection_default"}))return!1;const n=L(t,r);if(void 0===n)return!1;return!0}({propertyId:i,oldDateValue:d,newPersistedDate:o,store:a})){const e=L(i,a);void 0!==e&&(o={...o,reminder:e})}const c=n().m5(o);b().zv({store:a.getPropertiesStore(),data:{[i]:c},transaction:r}),f().O({environment:t,store:a,dateProperty:{id:i,oldValue:d,newValue:c}})}function L(e,t){const a=t.getAssociatedCollectionStore();if(!a)return;const i=a.getSchema();if(!i)return;const r=i[e];return r&&"date"===r.type?r.default_reminder:void 0}function D(e){const{environment:t,collectionStore:a,calendarBy:i,store:r,insertStores:n,collectionContextStore:o,transaction:s}=e,l=r.getPropertyStore(i).getValue();for(const d of n)(0,g().j)({environment:t,store:d,collectionStore:a,collectionContextStore:o,shouldCoerce:!0,groupsPointer:[],transaction:s}),v().R9({environment:t,store:d.getPropertyStore(i),value:l,transaction:s});return n.map((e=>C().Bv.createChildStore(a,e.pointer)))}},505776:(e,t,a)=>{a.d(t,{A:()=>r});class i extends(()=>a(757695))().Store{constructor(){super(...arguments),this.updatePreviewState=e=>{this.update((t=>({...t,previewCanvasState:e(t.previewCanvasState)})))}}getInitialState(){return{chart:void 0,responsiveChartOptions:void 0,previewCanvasState:void 0,exportBackgroundColor:"gradient"}}}const r=i},515916:(e,t,a)=>{a.d(t,{A:()=>r});class i extends(()=>a(757695))().Store{getInitialState(){return{open:!1}}}const r=new i},520861:(e,t,a)=>{a.d(t,{T:()=>r});a(944114),a(898992),a(908872);var i=()=>a(415651);function r(e){const{environment:t,collectionStore:a,duplicate:r,droppedStores:n,transaction:o,duplicateActions:s}=e,{movedStores:l,reparentedStores:d}=n.reduce(((e,t)=>(r||t.getAssociatedCollectionId()!==(null==a?void 0:a.id)?e.reparentedStores.push(t):e.movedStores.push(t),e)),{movedStores:[],reparentedStores:[]});return[...l,...i().MS({environment:t,droppedStores:d,duplicate:r,transaction:o,resolveTemplateVariables:!1,duplicateActions:s})]}},525700:(e,t,a)=>{a.d(t,{Bp:()=>E,DD:()=>z,E9:()=>X,H6:()=>T,HE:()=>P,HY:()=>B,JI:()=>K,Nf:()=>G,P8:()=>Q,V_:()=>Z,XL:()=>V,Xz:()=>H,aD:()=>L,aN:()=>q,d7:()=>W,d8:()=>A,j4:()=>$,n0:()=>Y,pu:()=>U,sd:()=>O,uH:()=>R,uY:()=>J,wl:()=>D,yF:()=>N,zV:()=>k});a(16280),a(944114),a(898992),a(354520),a(581454),a(296540);var i=()=>a(68263),r=()=>a(161479),n=()=>a(101628),o=()=>a(245241),s=()=>a(959013),l=()=>a(496603),d=()=>a(498212),c=()=>a(449506),u=()=>a(496414),p=()=>a(246826),g=()=>a(755636),m=()=>a(436572),f=()=>a(751156),h=()=>a(780054),b=()=>a(594794),v=()=>a(976721),y=()=>a(562800),x=()=>a(40226),S=()=>a(380682),w=()=>a(300451),C=()=>a(676870),j=()=>a(435212),M=a(474848);const _=(0,s().YK)({savingSiteSettings:{id:"siteSettingsActions.publishingSiteSettings.loadingMessage",defaultMessage:"Saving site settings…"}});function A(e){const{environment:t,store:a,type:i,header:o,domainId:s}=e,l=a.getSiteStore();if(l)return l.id;let d=s;var c;d||(d=null===(c=y().Nq(a.getSpaceStore()))||void 0===c?void 0:c.id);const u=(0,b().JH)({environment:t,table:n().Eu,spaceId:(0,r().e)(a.getSpaceId())});f().createAndCommit({userAction:"publishSite.create",environment:t,canUndo:!0,perform:e=>{const r=p().vt({environment:t,table:u.table,args:{id:u.id,type:i,spaceId:u.spaceId,blockId:a.id,domainId:d,currentUserId:t.currentUser.id,header:o??{}},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:e});return p().zv({store:a.getFormatStore(),data:{site_id:r.id},transaction:e}),r.id}})}function I(e){const{environment:t,siteRootBlockStore:a,domainId:i}=e;let r=a.getSiteStore();if(r||(A({environment:t,type:"site",store:a,domainId:i}),r=a.getSiteStore()),r)return r}function k(e){const{environment:t,domainId:a,resetWatermark:i}=e,r=I(e);r&&r.isDefined()&&(f().createAndCommit({userAction:"publishSite.updatePublicDomain",environment:t,canUndo:!0,perform:e=>{r.getDomainId()!==a&&f().applyOperation({transaction:e,store:r,operation:r.getModel().ops.updatePublicDomainId({domainId:a,currentUserId:t.currentUser.id})})}}),f().createAndCommit({userAction:"publishSite.resetWatermark",environment:t,canUndo:!0,perform:e=>{if(i){const a=r.getHeader();f().applyOperation({transaction:e,store:r,operation:r.getModel().ops.updateHeader({header:{...a,hideWatermark:!1},currentUserId:t.currentUser.id})})}}}),m().D6({label:(0,M.jsx)(s().sA,{id:"publishSiteSettings.publicDomain.confirmation",defaultMessage:"Successfully updated domain for all pages within this site"})}))}function T(e){const{environment:t,siteRootBlockStore:a,isSearchEngineIndexingEnabled:i}=e,n=I(e);if(!n)return;"form"!==n.getType()&&f().createAndCommit({userAction:"publishSite.updateSeoEnabled",environment:t,canUndo:!0,perform:e=>{n&&n.isDefined()&&i!==n.isSearchEngineIndexingEnabled()&&(f().applyOperation({transaction:e,store:n,operation:n.getModel().ops.updateIsSearchEngineIndexingEnabled({isSearchEngineIndexingEnabled:i,currentUserId:t.currentUser.id})}),i&&e.postSubmitCallbacks.push((async e=>{e||await c().callApi({eventName:"enqueueScanContentTask",environment:t,data:{pagePointer:{id:a.id,table:"block",spaceId:(0,r().e)(a.pointer.spaceId)}}})})))}})}function P(e){const{environment:t,store:a,seoTitle:i,seoDescription:r}=e;f().createAndCommit({userAction:"publishSite.create",environment:t,canUndo:!0,perform:e=>{const n=a.getFormat().seo_title,o=a.getFormat().seo_description;n===i&&o===r||(p().zv({store:a.getFormatStore(),data:{seo_title:i,seo_description:r},transaction:e}),(0,C().NZ)(t,{target_block_id:a.id,new_title:i??null,new_description:r??null}),m().D6({label:(0,M.jsx)(s().sA,{id:"siteSettingsEditor.publishSeoChanges.confirmation",defaultMessage:"Successfully updated the SEO settings"})}))}})}function L(e){w().A.setState({...w().A.state,settingOpen:e})}function D(){w().A.setState({...w().A.state,settingOpen:"initial"})}function E(e){S().A.setState({...S().A.state,siteSettingContentType:e})}function B(e){var t,a,i;const{siteRootBlockStore:r,permissionItem:n,from:o,sudoModeStore:s}=e,l=r.getSiteStore(),d=null==l?void 0:l.getHeader(),c=(null==d||null===(t=d.customItems)||void 0===t?void 0:t.map((e=>e.blockId)))||[];w().A.setState({settingOpen:"initial",permissionItem:n,from:o,sudoModeStore:s,faviconUrl:(null==l?void 0:l.getFaviconUrl())||null,previewImageUrl:(null==l?void 0:l.getPreviewImageUrl())||null,hideBreadcrumbs:null==d?void 0:d.hideBreadcrumbs,hideSearch:null==d?void 0:d.hideSearch,hideShare:null==d?void 0:d.hideShare,hideWatermark:null==d?void 0:d.hideWatermark,enableDuplicateAsTemplate:n.allow_duplicate,customHeaderBlockIds:c,googleAnalyticsId:null==l?void 0:l.getGoogleAnalyticsId(),theme:null==l||null===(a=l.getSettings())||void 0===a?void 0:a.theme,enableQna:null==l||null===(i=l.getSettings())||void 0===i?void 0:i.enableQna})}async function R(e){var t;const{environment:a,store:r,siteRootBlockStore:n}=e,o=I({environment:a,siteRootBlockStore:n}),l=null==o?void 0:o.getType();if(!o||"form"===l)return;const p=w().A.getState(),g={},h=function(e,t){var a,i,r,n,o,s,l,d;const c=F(e.customHeaderBlockIds,null===(a=t.getHeader())||void 0===a?void 0:a.customItems);return e.faviconUrl!==(t.getFaviconUrl()||null)||e.previewImageUrl!==(t.getPreviewImageUrl()||null)||c||e.hideBreadcrumbs!==(null===(i=t.getHeader())||void 0===i?void 0:i.hideBreadcrumbs)||e.hideSearch!==(null===(r=t.getHeader())||void 0===r?void 0:r.hideSearch)||e.hideShare!==(null===(n=t.getHeader())||void 0===n?void 0:n.hideShare)||e.hideWatermark!==(null===(o=t.getHeader())||void 0===o?void 0:o.hideWatermark)||e.googleAnalyticsId!==t.getGoogleAnalyticsId()||e.theme!==(null===(s=t.getSettings())||void 0===s?void 0:s.theme)||e.enableQna!==(null===(l=t.getSettings())||void 0===l?void 0:l.enableQna)||(null===(d=e.permissionItem)||void 0===d?void 0:d.allow_duplicate)!==e.enableDuplicateAsTemplate&&e.permissionItem&&e.from}(p,o);if(!h)return;let b;if(u().m({message:_.savingSiteSettings}),p.enableQna)try{b=await async function(e){var t,a,i,r;const{environment:n,siteStore:o}=e,s=null===(t=o.getSettings())||void 0===t?void 0:t.siteUserId;if(s)return s;if(!((null===(a=o.getDomainStore())||void 0===a?void 0:a.getDomainName())??(null===(i=y().Nq(o.getSpaceStore()))||void 0===i?void 0:i.domain_name)))throw new Error("no domain on site");const l=y().Ix({spaceStore:o.getSpaceStore(),domainId:null===(r=o.getDomainStore())||void 0===r?void 0:r.id}).split(":")[0],u=`${(0,d().S2)(o.id)}@${l}`,p=await c().callApi({eventName:"createEmailUser",environment:n,data:{email:u}});if("failed"===p.type)throw new Error("failed to create qna user");return p.data.userId}({environment:a,siteStore:o})}catch{return u().V(),void m().D6({label:(0,M.jsx)(s().sA,{id:"siteSettingsEditor.publishChanges.failure",defaultMessage:"Something went wrong, please try again later"})})}const{serverCommitResult:x}=f().createAndCommit({userAction:"publishSite.updateSiteSettingsInEditor",environment:a,canUndo:!0,perform:e=>{if(o&&o.isDefined()){var t,i;(o.getFaviconUrl()||null)!==p.faviconUrl&&(f().applyOperation({transaction:e,store:o,operation:o.getModel().ops.updateFaviconUrl({faviconUrl:p.faviconUrl,currentUserId:a.currentUser.id})}),g.favicon=p.faviconUrl);(o.getPreviewImageUrl()||null)!==p.previewImageUrl&&(f().applyOperation({transaction:e,store:o,operation:o.getModel().ops.updatePreviewImageUrl({previewImageUrl:p.previewImageUrl,currentUserId:a.currentUser.id})}),g.preview_image=p.previewImageUrl);const r=o.getHeader();let n=r;const s=F(p.customHeaderBlockIds,null==r?void 0:r.customItems);s&&(n={...n,customItems:s},g.custom_headers=s.map((e=>e.blockId))),(null==r?void 0:r.hideBreadcrumbs)!==p.hideBreadcrumbs&&(n={...n,hideBreadcrumbs:p.hideBreadcrumbs},g.hide_breadcrumbs=p.hideBreadcrumbs),(null==r?void 0:r.hideSearch)!==p.hideSearch&&(n={...n,hideSearch:p.hideSearch},g.hide_search=p.hideSearch),(null==r?void 0:r.hideShare)!==p.hideShare&&(n={...n,hideShare:p.hideShare},g.hide_share=p.hideShare),(null==r?void 0:r.hideWatermark)!==p.hideWatermark&&(n={...n,hideWatermark:p.hideWatermark},g.hide_watermark=p.hideWatermark),n&&r!==n&&f().applyOperation({transaction:e,store:o,operation:o.getModel().ops.updateHeader({header:n,currentUserId:a.currentUser.id})});o.getGoogleAnalyticsId()!==p.googleAnalyticsId&&(f().applyOperation({transaction:e,store:o,operation:o.getModel().ops.updateGoogleAnalyticsId({googleAnalyticsId:p.googleAnalyticsId,currentUserId:a.currentUser.id})}),g.google_analytics_id=p.googleAnalyticsId);(null===(t=o.getSettings())||void 0===t?void 0:t.theme)!==p.theme&&(f().applyOperation({transaction:e,store:o,operation:o.getModel().ops.updateTheme({theme:p.theme,currentUserId:a.currentUser.id})}),g.theme=p.theme);(null===(i=o.getSettings())||void 0===i?void 0:i.enableQna)!==p.enableQna&&(p.enableQna?b&&f().applyOperation({transaction:e,store:o,operation:{pointer:o.pointer,command:"update",path:["settings"],args:{enableQna:p.enableQna,siteUserId:b}}}):f().applyOperation({transaction:e,store:o,operation:{pointer:o.pointer,command:"update",path:["settings"],args:{enableQna:p.enableQna}}}))}}});try{await x}catch{return u().V(),void m().D6({label:(0,M.jsx)(s().sA,{id:"siteSettingsEditor.publishChanges.failure",defaultMessage:"Something went wrong, please try again later"})})}if((null===(t=p.permissionItem)||void 0===t?void 0:t.allow_duplicate)!==p.enableDuplicateAsTemplate&&p.permissionItem&&p.from){const e=(0,i().Yi)(p.from);if(!(await(0,v().Hc)({oldPermissionItem:p.permissionItem,newPermissionItem:{...p.permissionItem,allow_duplicate:p.enableDuplicateAsTemplate},wasInherited:e!==r.id,environment:a,store:r,sudoModeStore:p.sudoModeStore,location:"published_site_settings"})))return u().V(),void m().D6({label:(0,M.jsx)(s().sA,{id:"siteSettingsEditor.publishChanges.failure",defaultMessage:"Something went wrong, please try again later"})});g.enable_duplicate_as_template=p.enableDuplicateAsTemplate}u().V(),(0,j().Kz)(a,{settings_changed:g}),m().D6({label:(0,M.jsx)(s().sA,{id:"siteSettingsEditor.publishChanges.confirmation",defaultMessage:"Changes published"})})}function F(e,t){const a=e.map((e=>({type:"block",blockId:e})));if((t||0!==a.length)&&(!t||!(0,l().n4)(a,t)))return a}function U(e){w().A.setState({...w().A.state,faviconUrl:e})}function N(e){w().A.setState({...w().A.state,previewImageUrl:e})}function z(e){w().A.setState({...w().A.state,hideBreadcrumbs:e})}function V(e){w().A.setState({...w().A.state,hideSearch:e})}function H(e){w().A.setState({...w().A.state,hideWatermark:e})}function O(e){w().A.setState({...w().A.state,hideShare:e})}function W(e){w().A.setState({...w().A.state,enableDuplicateAsTemplate:e})}function q(e){const t=w().A.state.customHeaderBlockIds.concat([e]);w().A.setState({...w().A.state,customHeaderBlockIds:t})}function K(e){const t=w().A.state.customHeaderBlockIds.filter((t=>t!==e));w().A.setState({...w().A.state,customHeaderBlockIds:t})}function G(e){w().A.setState({...w().A.state,googleAnalyticsId:e})}function Z(e){w().A.setState({...w().A.state,theme:e})}async function $(e){const{environment:t,spaceStore:a,query:i,siteRootBlockId:r}=e;if(!a)return;const n=await c().callApi({eventName:"searchPagesInSite",environment:t,data:{query:i,spaceId:a.id,filters:o().N2({isDeletedOnly:!1,navigableBlockContentOnly:!0,excludeTemplates:!0,editedBy:[],ancestors:[r],inTeams:[]}),sort:{field:"relevance"},limit:10}});return"failed"!==n.type?n.data:void 0}async function Y(e){const{environment:t,blockStore:a,slug:i}=e,r=await c().callApi({eventName:"updatePublicPageSlug",environment:t,data:{spaceId:a.getSpaceId(),blockId:a.id,slug:i,clientVersion:h().A.version}});if("success"!==r.type)return{error:r};m().D6({label:(0,M.jsx)(s().sA,{id:"customSlugInput.updateSuccess.toast",defaultMessage:"Successfully updated URL for this page"})})}function Q(e){w().A.setState({...w().A.state,enableQna:e})}function J(e){const{environment:t,store:a,pageVisitSource:i}=e,r=x().R({store:a,pageVisitSource:i});g().f({environment:t,url:r})}function X(e){const{environment:t,siteStore:a,embedSettings:i}=e;f().createAndCommit({userAction:"embedSite.updateEmbedSettings",environment:t,canUndo:!0,perform:e=>{p().zv({store:a.getSettingsStore(),data:{embedSettings:i},transaction:e})}})}},529324:(e,t,a)=>{a.d(t,{C:()=>i});const i=(0,a(340498).xh)("magnifyingGlass",{default:{loader:()=>a.e(1827).then(a.bind(a,901827))},small:{loader:()=>a.e(41805).then(a.bind(a,741805))},mini:{loader:()=>a.e(20283).then(a.bind(a,420283))},large:{loader:()=>a.e(61969).then(a.bind(a,861969))}})},532564:(e,t,a)=>{a.d(t,{V:()=>s,Z:()=>o});a(16280);var i=a(296540),r=a(474848);const n=i.createContext(void 0);function o(e){return(0,r.jsx)(n.Provider,{value:e.value,children:e.children})}function s(){const e=i.useContext(n);if(!e)throw new Error("useChartStore must be used within a ChartContextProvider");return e}n.displayName="ChartContext"},541235:(e,t,a)=>{a.d(t,{YD:()=>n,c$:()=>i,q_:()=>r});const i={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]}},r="completed",n="dismissed"},573351:(e,t,a)=>{a.d(t,{A:()=>n});var i=a(296540),r=a(474848);const n=function(e){let{firstDayOfWeek:t,value:n,selectValue:o=!0,onChange:s,onFocus:l,onBlur:d,disabledDays:c,className:u}=e;const p=(0,i.useMemo)((()=>new Date(n)),[n]),[g,m]=(0,i.useState)(p),f=(0,i.useRef)(n);(0,i.useLayoutEffect)((()=>{f.current!==n&&(m(new Date(n)),f.current=n)}),[n]);const h=(0,i.useCallback)(((e,t,a)=>{s(e.getTime())}),[s]);return(0,r.jsx)("div",{style:{paddingRight:8,paddingBottom:8,paddingLeft:8,paddingTop:4},children:(0,r.jsx)(a(541181).n,{locale:a(662303).locale,className:u??"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:o?{value:p}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:h,onMonthSelected:m,disabled:c,month:g,onDayBlur:d,onDayFocus:l})})}},592589:(e,t,a)=>{a.d(t,{B:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("chartMixed",{viewBox:"0 0 64 64",svg:(0,i.jsx)("path",{d:"m60,48v6H4v-6h6v-14h12v14h4v-8h12v8h4v-22h12v22h6ZM16,28c1.84,0,3.49-.83,4.59-2.14l5.41,2.03s0,.07,0,.11c0,3.31,2.69,6,6,6s6-2.69,6-6c0-.78-.15-1.53-.43-2.22l7.49-6.55c.87.49,1.87.77,2.94.77,3.31,0,6-2.69,6-6s-2.69-6-6-6-6,2.69-6,6c0,.78.15,1.53.43,2.22l-7.49,6.55c-.87-.49-1.87-.77-2.94-.77-1.84,0-3.49.83-4.59,2.14l-5.41-2.03s0-.07,0-.11c0-3.31-2.69-6-6-6s-6,2.69-6,6,2.69,6,6,6Z"})})},603745:(e,t,a)=>{a.d(t,{A:()=>m});var i=a(296540),r=()=>a(56366),n=()=>a(959013),o=()=>a(381349),s=()=>a(638013),l=()=>a(284371),d=()=>a(515916),c=()=>a(704152),u=()=>a(623580),p=()=>a(676007),g=a(474848);function m(){const e=(0,r().O$)(d().A);return(0,g.jsx)(p().a,{open:e.open,overlayZIndex:9999999,onDismiss:()=>{d().A.reset()},preventHideChildrenWhileOpening:!0,innerStyle:{overflow:"hidden",borderRadius:6,padding:"24px 32px",width:336,fontSize:16,boxShadow:s().m,background:o().Ay.white},render:()=>(0,g.jsx)(f,{...e})})}function f(e){const[t,a]=i.useState(""),[r,s]=i.useState(!1);if(!e.open)return null;const{title:p,message:m,onConfirm:f}=e,v=a=>{const{deleteIntegrationIfConfirmationInputMatch:i}=a;e.isDestructive&&e.deleteMatchText!==t?s(!0):i&&(f(),d().A.reset())};return(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,g.jsx)("div",{style:{fontSize:16,fontWeight:l().Wy.semibold},children:p}),(0,g.jsx)("div",{style:{fontSize:14,color:o().Ay.frontTextMedium,margin:"8px 0 16px"},children:m}),e.isDestructive?(0,g.jsxs)("div",{style:{marginBottom:12},children:[(0,g.jsx)(u().A,{autoFocus:!0,placeholder:e.deleteMatchText,value:t,onChange:t=>{const i=t.target.value;r&&e.deleteMatchText===i&&s(!1),a(i)},onSubmit:()=>v({deleteIntegrationIfConfirmationInputMatch:!1})}),r?(0,g.jsx)("div",{style:{marginTop:4,color:o().Ay.frontRed,fontSize:12},children:e.deleteMatchError}):void 0]}):void 0,(0,g.jsxs)("div",{style:{display:"flex"},children:[(0,g.jsx)(c().A,{onClick:()=>{d().A.reset()},style:{...b.button,border:`1px solid ${o().Ay.uiLightBorder}`,marginRight:8,fontSize:15},children:(0,g.jsx)(n().sA,{id:"developerIntegration.confirmationModal.cancelLabel",defaultMessage:"Cancel"})}),(0,g.jsx)(h,{onSubmit:()=>v({deleteIntegrationIfConfirmationInputMatch:!0}),isWarning:e.isDestructive||e.isWarning,confirmationMessage:e.confirmationMessage})]})]})}function h(e){const{onSubmit:t,confirmationMessage:a,isWarning:i}=e;return(0,g.jsx)(c().A,{onClick:t,style:{...b.button,background:i?o().Ay.frontRedButtonBackground:o().Ay.blue,color:o().Ay.white,fontSize:15},hoveredStyle:{backgroundColor:i?o().Ay.frontRedButtonBackgroundHovered:o().Ay.frontBlueButtonHoveredBackground},pressedStyle:{backgroundColor:i?o().Ay.frontRedButtonBackgroundPressed:o().Ay.frontBlueButtonPressedBackground},children:a})}const b={button:{padding:6,borderRadius:6,flex:1,textAlign:"center"}}},620586:(e,t,a)=>{a.d(t,{BV:()=>c,HH:()=>g,LF:()=>d,NF:()=>v,Pi:()=>u,Q1:()=>f,nH:()=>b,tm:()=>m,wW:()=>p});var i=()=>a(100594),r=()=>a(970013),n=()=>a(751735),o=()=>a(381349),s=()=>a(534177),l=()=>a(10594);function d(e){return void 0!==e&&"auto"!==e&&"colorful"!==e}function c(e,t){if("auto"!==e){if("colorful"===e)return o().OK.colorful.slice(0,6);if(u(e)){const a="gray"===e?"dark"===t.mode?"white":"black":e;return o().OK[a]}(0,s().HB)(e)}}function u(e){return i().VY.includes(e)}function p(e,t,a){const i=function(e,t,a){if("auto"===e)return;let i;if(i="gray"===e?"dark"===a.mode?"white":"black":e,t&&u(e)){const e=o().OK[i];return[e[0],e[3]]}return o().OK[i]}(e,t,a);if(i)return u(e)&&t?{colorAxis:{minColor:i[1],maxColor:i[0],showInLegend:!1},colors:i}:{colorAxis:void 0,colors:i}}function g(e){var t,a;let{collectionContextStore:i,groupValue:n,index:s,groupBy:d,theme:c,environment:u}=e;const g=i.normalizedSchemaStore.state,m=i.normalizedFormatStore.state;if("placeholder"===(null===(t=m.chart_config)||void 0===t?void 0:t.type)||void 0===n.value)return"light"===c.mode?o().OK.translucentGray[0]:o().OK.translucentGray[1];const f=g[d.property],h=f&&((0,r().lx)(f)||(0,r().DD)(f)),b=(null===(a=m.chart_config)||void 0===a||null===(a=a.chartFormat)||void 0===a?void 0:a.colorTheme)||"auto";if("auto"===b&&h){const e=(0,l().$e)({environment:u,groupFormat:{property:d.property,value:n},schema:g,format:m,theme:c,ignoreDisableColorColumns:!0});if(e)return e.chartColor}const v=p("auto"===b?"colorful":b,!1,c),y=(null==v?void 0:v.colors)||o().OK.colorful;return y[s%y.length]}function m(e,t){return t?{linearGradient:{x1:0,x2:0,y1:0,y2:1},stops:[[0,"rgba(0, 0, 0, 0)"],[1,"rgba(0, 0, 0, 0)"]]}:{linearGradient:{x1:0,x2:0,y1:0,y2:1},stops:[[0,(0,n().X4)(e,.1)],[1,(0,n().X4)(e,0)]]}}const f=["gradient","blue","red","yellow","grey","none"],h=(0,a(959013).YK)({gradient:{defaultMessage:"Gradient",id:"chart.export.background.gradient"},blue:{defaultMessage:"Blue",id:"chart.export.background.blue"},red:{defaultMessage:"Red",id:"chart.export.background.red"},yellow:{defaultMessage:"Yellow",id:"chart.export.background.yellow"},grey:{defaultMessage:"Grey",id:"chart.export.background.grey"},none:{defaultMessage:"None",id:"chart.export.background.none"}});function b(e){return h[e]}function v(e,t,a){const i="light"===e.mode?a?100:50:a?600:500;switch(t){case"blue":return e.palette.blue[i];case"red":return e.palette.red[i];case"yellow":return e.palette.yellow[i];case"grey":return e.palette.gray[i];case"none":const r=a?e.buttonHoveredBackground:e.popoverBackground;return`linear-gradient(to top right, ${r} calc(50% - 1px), ${e.regularDividerColor}, ${r} calc(50% + 1px) )`;case"gradient":return`${a?`linear-gradient(${e.buttonHoveredBackground}, ${e.buttonHoveredBackground}), `:""}${"dark"===e.mode?"linear-gradient(123deg, #3C3F41 40.15%, #4A2F27 89.33%)":"linear-gradient(123deg, #FEF5E9 40.15%, #FEE9E9 89.33%)"}`;default:(0,s().HB)(t)}}},637433:(e,t,a)=>{a.d(t,{Y:()=>r});a(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,a(474848).jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25m2.817 4.808a.625.625 0 0 1 0 .884L10.884 10l1.933 1.933a.625.625 0 1 1-.884.884L10 10.884l-1.933 1.933a.625.625 0 1 1-.884-.884L9.116 10 7.183 8.067a.625.625 0 1 1 .884-.884L10 9.116l1.933-1.933a.625.625 0 0 1 .884 0"})},r=(0,a(340498).wt)("xMarkCircleFill",i)},656881:(e,t,a)=>{a.d(t,{b:()=>r,y:()=>n});var i=()=>a(972435);const r=(0,a(959013).YK)({noData:{defaultMessage:"No data",id:"chartError.noData"},badYAxisRange:{defaultMessage:"No data due to axis range",id:"chartError.badYAxisRange"},unconfiguredProperty:{id:"chartError.unconfiguredProperty",defaultMessage:"Property is not configured. Please make another selection."},unsupportedProperty:{id:"chartError.unsupportedProperty",defaultMessage:"This property type is not supported. Please select another property"},unsupportedFormula:{id:"chartError.unsupportedFormula",defaultMessage:"This formula is not supported. Please select another property or adjust your formula."},deletedProperty:{id:"chartError.deletedProperty",defaultMessage:"This property has been deleted. Please select another property."},invalidAggregation:{id:"chartError.invalidAggregation",defaultMessage:"Previously selected property is no longer valid with the current aggregation. Please make another selection."},invalidPropertyValueChart:{id:"chartError.invalidPropertyValueChart",defaultMessage:"Selected property is no longer valid with the previous configured chart. Please make another selection."},noValues:{id:"chartError.noValues",defaultMessage:"This property has no values. Please add some values or select another property."}});function n(e){switch(e){case"groupBy_property_not_configured":case"aggregation_property_not_configured":case"name_property_not_configured":case"property_value_property_not_configured":return i().A.formatMessage(r.unconfiguredProperty);case"groupBy_property_not_groupable":case"stackBy_property_not_groupable":return i().A.formatMessage(r.unsupportedProperty);case"groupBy_formula_not_groupable":case"stackBy_formula_not_groupable":return i().A.formatMessage(r.unsupportedFormula);case"groupBy_property_deleted":case"stackBy_property_deleted":case"aggregation_deleted":case"name_property_deleted":case"property_value_property_deleted":return i().A.formatMessage(r.deletedProperty);case"aggregation_invalid":return i().A.formatMessage(r.invalidAggregation);case"stackBy_property_no_values":return i().A.formatMessage(r.noValues);case"name_property_invalid":case"property_value_property_invalid":return i().A.formatMessage(r.invalidPropertyValueChart);default:return}}},676870:(e,t,a)=>{a.d(t,{EN:()=>r,Ex:()=>n,NZ:()=>o,T6:()=>l,i_:()=>s,kW:()=>d});var i=()=>a(2220);function r(e,t){(0,i().u)({environment:e,event:{eventName:"open_publish_modal",eventProperties:t}})}function n(e,t){(0,i().u)({environment:e,event:{eventName:"change_domain",eventProperties:t}})}function o(e,t){(0,i().u)({environment:e,event:{eventName:"update_seo_settings",eventProperties:t}})}function s(e,t){(0,i().u)({environment:e,event:{eventName:"site_set_link_expiration",eventProperties:t}})}function l(e,t){(0,i().u)({environment:e,event:{eventName:"page_unpublish",eventProperties:t}})}function d(e,t){(0,i().u)({environment:e,event:{eventName:"page_publish",eventProperties:t}})}},685200:(e,t,a)=>{a.d(t,{O:()=>o,g:()=>n});var i=()=>a(617871);const r="entity_item";function n(e){const{patternName:t,integrationId:a}=e;if((0,i().CX)({integrationId:a,env:"production"}))return t;{const e=t.indexOf("_");return e<0?r:t.slice(e+1)}}function o(e){const{patternName:t,integrationId:a}=e;return(0,i().CX)({integrationId:a,env:"production"})?t:`${a}_${t}`}},716428:(e,t,a)=>{a.r(t),a.d(t,{CreatorProfile:()=>Jm});var i=a(296540),r=()=>a(484714),n=()=>a(56366),o=()=>a(401497),s=()=>a(148307),l=()=>a(187174),d=()=>a(959013),c=()=>a(381349),u=()=>a(2143),p=()=>a(313786),g=()=>a(171789),m=()=>a(465039),f=()=>a(532688),h=()=>a(756279),b=()=>a(765957),v=(a(16280),a(898992),a(354520),()=>a(402390)),y=()=>a(679927),x=()=>a(449506),S=()=>a(901389),w=()=>a(495262),C=()=>a(436572),j=()=>a(679924),M=()=>a(212050),_=()=>a(493823),A=a(474848);function I(e){const{children:t}=e,a=(0,o().IS)((()=>({wrapperContainer:{fontSize:15}})),[]);return(0,A.jsx)("span",{style:a.wrapperContainer,children:t})}function k(e){const{children:t}=e,a=(0,o().IS)((()=>({actionWrapperContainer:{display:"flex",alignItems:"center",gap:2,marginLeft:20}})),[]);return(0,A.jsx)("div",{style:a.actionWrapperContainer,children:t})}function T(e){const t=(0,o().IS)((()=>({actionButton:{color:"rgba(153, 153, 153, 1)",fontWeight:500,height:void 0,marginLeft:0,fontSize:15,padding:"3px 8px"},actionButtonHovered:{background:"rgba(255, 255, 255, 0.125)",borderRadius:"4px",color:"rgba(230, 230, 230, 1)"},actionButtonPressed:{background:"rgba(255, 255, 255, 0.125)",borderRadius:"4px",color:"rgba(191, 191, 191, 1)"}})),[]),{buttonLabel:a,onClick:i,onClose:r}=e;return(0,A.jsxs)(k,{children:[(0,A.jsx)(_().p,{onClick:i,style:t.actionButton,hoveredStyle:t.actionButtonHovered,pressedStyle:t.actionButtonPressed,children:a}),(0,A.jsx)(P,{onClose:r})]})}function P(e){const{onClose:t}=e,a=(0,o().IS)((e=>({closeIconContainer:{padding:4,color:"rgba(153, 153, 153, 1)"},closeIconContainerHovered:{background:"rgba(255, 255, 255, 0.125)",borderRadius:"4px",color:"rgba(230, 230, 230, 1)"},closeIconContainerPressed:{background:"rgba(255, 255, 255, 0.125)",borderRadius:"4px",color:"rgba(191, 191, 191, 1)"},closeIcon:{width:20,height:20}})),[]);return(0,A.jsx)(_().p,{onClick:()=>{C().N2(),null==t||t()},style:a.closeIconContainer,hoveredStyle:a.closeIconContainerHovered,pressedStyle:a.closeIconContainerPressed,children:(0,M().u)(a.closeIcon)})}var L=()=>a(284371);function D(){return(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pin.error.tooManyPinnedTemplates",defaultMessage:"No more than {maxPinnedTemplateCount} can be pinned.",values:{maxPinnedTemplateCount:y().v8}})})}function E(e){const{templateName:t}=e,a=U();return(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pin.success",defaultMessage:"<bold>{templateName}</bold> has been pinned.",values:{templateName:t||"Template",bold:e=>(0,A.jsx)("span",{style:t?a.templateNameBold:{},children:e})}})})}function B(e){const{templateName:t}=e,a=U();return(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.unpin.success",defaultMessage:"<bold>{templateName}</bold> has been unpinned.",values:{bold:e=>(0,A.jsx)("span",{style:t?a.templateNameBold:{},children:e}),templateName:t||"Template"}})})}function R(e){const{templateName:t}=e,a=U();return(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pin.error",defaultMessage:"Failed to pin <bold>{templateName}</bold>.",values:{bold:e=>(0,A.jsx)("span",{style:t?a.templateNameBold:{},children:e}),templateName:t||"template"}})})}function F(e){const{templateName:t}=e,a=U();return(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.unpin.error",defaultMessage:"Failed to unpin <bold>{templateName}</bold>.",values:{bold:e=>(0,A.jsx)("span",{style:t?a.templateNameBold:{},children:e}),templateName:t||"template"}})})}function U(){return(0,o().IS)((()=>({templateNameBold:{fontWeight:L().Wy.semibold}})),[])}a(944114),a(737550);var N=()=>a(228271),z=()=>a(209199),V=()=>a(534177),H=()=>a(434945),O=()=>a(972435);const W=(0,d().YK)({publicIntegrationLabel:{id:"creatorProfile.integrationSubmission.publicIntegrationLabel",defaultMessage:"Public"},internalIntegrationLabel:{id:"creatorProfile.integrationSubmission.internalIntegrationLabel",defaultMessage:"Internal"},integrationTypeLabel:{id:"creatorProfile.integrationSubmission.integrationType.label",defaultMessage:"Type"},integrationLogoLabel:{id:"creatorProfile.integrationSubmission.integrationLogo.label",defaultMessage:"Logo"},spaceLabel:{id:"creatorProfile.integrationSubmission.space.label",defaultMessage:"Associated workspace"},spaceSubtitle:{id:"creatorProfile.integrationSubmission.space.subtitle",defaultMessage:"Select a workspace to install the integration to. Workspace owners will be able to manage the integration as well. You can upgrade the integration to use OAuth later"},websiteUrlTypeLabel:{id:"creatorProfile.integrationSubmission.websiteUrlType.label",defaultMessage:"Website"},privacyPolicyTypeLabel:{id:"creatorProfile.integrationSubmission.privacyPolicyType.label",defaultMessage:"Privacy Policy URL"},privacyPolicyTypeSubtitle:{id:"creatorProfile.integrationSubmission.privacyPolicyType.subtitle",defaultMessage:"Used to link to your integration’s privacy policy in your integration page and authentication screens"},developerNameLabel:{id:"creatorProfile.integrationSubmission.developerName.label",defaultMessage:"Company name"},termsOfUseTypeLabel:{id:"creatorProfile.integrationSubmission.termsOfUseType.label",defaultMessage:"Terms of Use URL"},termsOfUseTypeSubtitle:{id:"creatorProfile.integrationSubmission.termsOfUseType.subtitle",defaultMessage:"Used to link to your integration’s terms of use in your integration page and authentication screens"},emailLabel:{id:"creatorProfile.integrationSubmission.email.label",defaultMessage:"Email"},emailSubtitle:{id:"creatorProfile.integrationSubmission.email.subtitle",defaultMessage:"Enter the email address of the integration's developer"},oauthSectionHeader:{id:"creatorProfile.integrationSubmission.oauthSectionHeader",defaultMessage:"OAuth domains & URIs"},redirectUrisTypeLabel:{id:"creatorProfile.integrationSubmission.redirectUrisType.label",defaultMessage:"Redirect URIs"},redirectUrisTypeSubtitle:{id:"creatorProfile.integrationSubmission.redirectUrisType.subtitle",defaultMessage:"In the Notion OAuth flow, users will be redirected to this path after they have authenticated with Notion. The path will be appended with the authorization code for access and must have a protocol. It can’t contain URL fragments, relative paths or wildcards, and can’t be a public IP address. It must also be included in the token request."},taglineTypeLabel:{id:"creatorProfile.integrationSubmission.taglineType.label",defaultMessage:"Tagline"},templateUrlTypeLabel:{id:"creatorProfile.integrationSubmission.templateUrlType.label",defaultMessage:"Notion URL for optional template"},templateUrlTypeSubtitle:{id:"creatorProfile.integrationSubmission.templateUrlType.subtitle",defaultMessage:"Use this field if you'd like to offer a user a Notion page to duplicate into their workspace during OAuth. URL must be to a public Notion page."},tokenTypeLabel:{id:"creatorProfile.integrationSubmission.tokenType.label",defaultMessage:"Internal Integration Secret"},capabilitiesTypeHeader:{id:"creatorProfile.integrationSubmission.capabilitiesType.header",defaultMessage:"Capabilities"},unfurlUrlLabel:{id:"creatorProfile.integrationSubmission.unfurlUrl.label",defaultMessage:"Unfurl Callback URL"},unfurlUrlCaption:{id:"creatorProfile.integrationSubmission.unfurlUrl.caption",defaultMessage:"Called with a POST request when an unfurl action occurs and with a DELETE request when unfurl url preview(s) or mention(s) is deleted"},unfurlUrlSectionHeader:{id:"creatorProfile.integrationSubmission.unfurlUrl.header",defaultMessage:"Unfurling domain & patterns"},domainLabel:{id:"creatorProfile.integrationSubmission.domain.label",defaultMessage:"Unfurl Url Domain"},urlMatchingAndPlaceholderLabel:{id:"creatorProfile.integrationSubmission.urlmatching.label",defaultMessage:"URL matching and placeholder"},urlMatchingAndPlaceholderCaption:{id:"creatorProfile.integrationSubmission.urlmatching.caption",defaultMessage:"When users paste a URL that matches this pattern on your verified domain, they'll have the option to unfurl it as a preview. Any sample URLs are validated against provided patterns"},externalOauthAuthorizeUrlLabel:{id:"creatorProfile.integrationSubmission.externalOauthAuthorizeUrl.label",defaultMessage:"OAuth Authorize URL"},externalOauthAuthorizeUrlCaption:{id:"creatorProfile.integrationSubmission.externalOauthAuthorizeUrl.caption",defaultMessage:"Used by Notion to initiate user authorization with the integration"},externalOauthTokenUrlLabel:{id:"creatorProfile.integrationSubmission.externalOauthTokenUrl.label",defaultMessage:"OAuth Token URL"},externalOauthTokenUrlCaption:{id:"creatorProfile.integrationSubmission.externalOauthTokenUrl.caption",defaultMessage:"Called by Notion to retrieve an access token for the unfurl callback URL"},externalOauthScopesLabel:{id:"creatorProfile.integrationSubmission.externalOauthScopes.label",defaultMessage:"OAuth Scopes"},externalOauthScopesCaption:{id:"creatorProfile.integrationSubmission.externalOauthScopes.caption",defaultMessage:"Optional scopes string"},externalDeletionUrlLabel:{id:"creatorProfile.integrationSubmission.externalDeletionUrl.label",defaultMessage:"Deleted Token Callback URL "},externalDeletionUrlCaption:{id:"creatorProfile.integrationSubmission.externalDeletionUrl.caption",defaultMessage:"Called by Notion when a user removes your integration"},externalClientIdLabel:{id:"creatorProfile.integrationSubmission.externalClientId.label",defaultMessage:"OAuth Client ID"},externalClientSecretLabel:{id:"creatorProfile.integrationSubmission.externalClientSecret.label",defaultMessage:"OAuth Client Secret"},externalOauthSectionTitle:{id:"creatorProfile.integrationSubmission.externalOauthSectionTitle",defaultMessage:"External authorization setup"},externalOauthSectionSubtitle:{id:"creatorProfile.integrationSubmission.externalOauthSectionSubtitle",defaultMessage:"See Notion 2.0 documentation for information on OAuth 2.0"},unfurlingSectionTitle:{id:"creatorProfile.integrationSubmission.unfurlingSectionTitle",defaultMessage:"Unfurling domain & patterns"},unfurlingSwitcherLabel:{id:"creatorProfile.integrationSubmission.unfurlingSwitcherLabel",defaultMessage:"Enable link preview"},authorizationUrlLabel:{id:"creatorProfile.integrationSubmission.authorizationUrlLabel",defaultMessage:"Authorization URL"},disallowedWordError:{id:"creatorProfile.integrationSubmission.errorMessages.disallowedWordError",defaultMessage:'{field} cannot contain the word "{word}"'}}),q=(0,d().YK)({nameIsTakenError:{id:"creatorProfile.integrationPublishRequest.errorMessages.nameIsTakenError",defaultMessage:"This integration name has already been used. Please try another one."},previewImages:{id:"creatorProfile.integrationPublishRequest.previewImages.label",defaultMessage:"Preview images"},description:{id:"creatorProfile.integrationPublishRequest.description.label",defaultMessage:"Description"},descriptionPlaceholder:{id:"creatorProfile.integrationPublishRequest.description.placeholder",defaultMessage:"Explain how your integration works"},howToUse:{id:"creatorProfile.integrationPublishRequest.howToUse.label",defaultMessage:"How to use"},howToUsePlaceholder:{id:"creatorProfile.integrationPublishRequest.howToUse.placeholder",defaultMessage:"1. In clear numbered steps, describe how to use your integration"},addToNotion:{id:"creatorProfile.integrationPublishRequest.addToNotion.label",defaultMessage:"Installation URL"},slug:{id:"creatorProfile.integrationPublishRequest.slug.label",defaultMessage:"Slug"},slugPlaceholder:{id:"creatorProfile.integrationPublishRequest.slug.placeholder",defaultMessage:"Optional custom slug"},categoryLabel:{id:"creatorProfile.integrationPublishRequest.category.label",defaultMessage:"Category"},featureLabel:{id:"creatorProfile.integrationPublishRequest.feature.label",defaultMessage:"Feature"},requiredFieldError:{id:"creatorProfile.integrationPublishRequest.errorMessages.requiredFieldError",defaultMessage:"{name} is required"},submitError:{id:"creatorProfile.integrationPublishRequest.errorMessages.submitError",defaultMessage:"There was an error submitting the integration for publishing"},previewImagesRequiredError:{id:"creatorProfile.integrationPublishRequest.errorMessages.previewImagesError",defaultMessage:"At least one preview image is required"},maxCategoriesError:{id:"creatorProfile.integrationPublishRequest.errorMessages.maxCategoriesError",defaultMessage:"You can only select up to 3 categories"},nameContainsIntegrationError:{id:"creatorProfile.integrationPublishRequest.errorMessages.nameContainsIntegrationError",defaultMessage:"Integration name must not contain the word 'Integration'"},invalidUrlError:{id:"creatorProfile.integrationPublishRequest.errorMessages.invalidUrlError",defaultMessage:"Invalid URL"},maxFeaturesError:{id:"creatorProfile.integrationPublishRequest.errorMessages.maxFeaturesError",defaultMessage:"You can only select up to 3 features"},howToUseTooLongError:{id:"creatorProfile.integrationPublishRequest.errorMessages.howToUseTooLongError",defaultMessage:"How to use is too long"},descriptionTooLongError:{id:"creatorProfile.integrationPublishRequest.errorMessages.descriptionTooLongError",defaultMessage:"Description is too long"},notCreator:{id:"creatorProfile.integrationPublishRequest.errorMessages.notCreator",defaultMessage:"You are not the creator of this integration. Only the creator can publish this integration"},featuresMismatchError:{id:"creatorProfile.integrationPublishRequest.errorMessages.featuresMismatchError",defaultMessage:'The selected features: "{features}" do not match integration capabilities'},integrationError:{id:"creatorProfile.integrationPublishRequest.errorMessages.integrationError",defaultMessage:"There is an error in the integration Configuration and/or Basic information."}}),K=(0,d().YK)({slugIsEmptyError:{id:"creatorProfile.integrationPublishRequest.errorMessages.slugIsEmptyError",defaultMessage:"Slug cannot be empty"},slugTooLongError:{id:"creatorProfile.integrationPublishRequest.errorMessages.slugTooLongError",defaultMessage:"Slug is too long"},slugCharactersError:{id:"creatorProfile.integrationPublishRequest.errorMessages.slugCharactersError",defaultMessage:"Slug can only contain lowercase letters, numbers, and hyphens"},slugHyphenError:{id:"creatorProfile.integrationPublishRequest.errorMessages.slugHyphenError",defaultMessage:"Slug cannot contain consecutive hyphens."},slugIsTakenError:{id:"creatorProfile.integrationPublishRequest.errorMessages.slugIsTakenError",defaultMessage:"This integration slug has already been used. Please try another one."}});function G(e){if(!e)return;const t=JSON.parse(e);return"document"===t.nodeType&&"text"===t.content[0].content[0].nodeType?t.content[0].content[0].value:void 0}function Z(e){try{const t=e.get("locale");return t&&z().Yr.some((e=>e===t))?t:void 0}catch(t){return}}function $(e){const[t,a,i,r,n,o]=(null==e?void 0:e.split("/"))||[],s=function(e){if("draft"===e)return"draft";if("published"===e)return"published";if("new"===e)return"new";throw new Error("Bad form type provided")}(n);return"new"===s?{type:s,id:void 0,contentfulId:o}:"draft"===s||"published"===s?{type:s,id:o}:void(0,V().HB)(s)}function Y(e){const{setFormData:t,formData:a,formFields:i,formStateType:r,templateStore:n,actorEmail:o}=e,s=(0,H().a_)({formData:a,setFormData:t,formStateType:r,currentFieldNames:i,formFieldValidationSchema:re}),l=(0,H().v)({formData:a,setFormData:t,formStateType:r,templateStore:n,currentFieldNames:i,formFieldValidationSchema:re}),d=function(e){const{name:t,actorEmail:a,setFormData:i,companyName:r}=e;let n=!0;if((0,N().Fn)(a))return n;for(const o of y().I5)t&&t.toLowerCase().includes(o)&&(i({field:"name",error:O().A.formatMessage(W.disallowedWordError,{field:"Name",word:o})}),n=!1),r&&r.toLowerCase().includes(o)&&(i({field:"developer_name",error:O().A.formatMessage(W.disallowedWordError,{field:"Company Name",word:o})}),n=!1);return n}({name:a.name.value,actorEmail:o,companyName:a.developer_name.value,setFormData:t});return l.length>0||(null==s?void 0:s.length)>0||!d||(0,H().px)({formData:a,formStateType:r,currentFieldNames:i,formFieldValidationSchema:re})}function Q(e,t){return"approved"===e?"published":"pending"===e&&null!=t&&t.id?"published_in_review":"rejected"===e&&null!=t&&t.id?"published_rejected":"rejected"===e?"rejected":"in_review"}const J=["icon","external_oauth_authorize_url","external_oauth_token_url","external_client_id","external_client_secret","external_oauth_scopes","external_deletion_url"],X=["unfurl_url","domain","url_matching_and_placeholder"],ee=["update-third-party-external-integration","update-first-party-external-integration"],te=["update-third-party-external-integration","update-compliance-integration","update-first-party-external-integration","create-third-party-external-integration","create-compliance-integration"],ae=["update-third-party-external-integration","update-first-party-external-integration","create-third-party-external-integration","create-first-party-external-integration"],ie=["create-bot","update-bot","create-guest-integration","create-third-party-external-integration","update-compliance-integration"],re={type:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},name:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},icon:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},space:{supportedBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},capabilities:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},token:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},authorization_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},redirect_uris:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},template_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},developer_name:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},website_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},tagline:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},privacy_policy_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},terms_of_use_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},email:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},unfurl_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},domain:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1}},url_matching_and_placeholder:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1}},external_oauth_authorize_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_oauth_token_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_oauth_scopes:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},external_client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_deletion_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}}};function ne(e,t){return t&&void 0!==e&&"published"!==e?`published_${e}`:e}var oe=()=>a(559845);const se=20;function le(e){const{creatorId:t,orderBy:a,paid:i}=e;return`${t}::${a}::${i}`}async function de(e){var t;const{environment:a,locale:i,creatorId:r,includeLocalizedTemplates:n}=e,{page:o,orderBy:s="recent",paid:l="all"}=oe().A.state.publishedTemplateSearchArgs,d=le({creatorId:r,orderBy:s,paid:l}),c=oe().A.state.publishedTemplatesSearch;if(null!=c&&null!==(t=c[d])&&void 0!==t&&null!==(t=t.templates)&&void 0!==t&&t[o-1])return!0;const u=await x().callApi({eventName:"getCreatorTemplates",environment:a,data:{offset:se*(o-1),limit:se,locale:(0,v().H)(i),orderBy:s,filterBy:{paid:"all"===l?void 0:l},includeLocalizedTemplates:n}});if("success"===u.type){const e=u.data.templateIds,t=u.data.templateGroupsByContentfulId,a=u.data.count||0;if(c[d]){const i=c[d];return oe().A.setState({...oe().A.state,publishedTemplatesSearch:{...oe().A.state.publishedTemplatesSearch,[d]:{count:a,templates:[...i.templates,e],templateGroupsByContentfulId:{...i.templateGroupsByContentfulId,...t||{}}}}}),!0}return oe().A.setState({...oe().A.state,publishedTemplatesSearch:{...c,[d]:{count:a,templates:[e],templateGroupsByContentfulId:t||{}}}}),!0}return!1}async function ce(e){const{templateId:t,environment:a,type:i,templateName:r,isUndo:n,creatorId:o}=e;try{const e=oe().A.state.pinnedTemplates,s="pin"===i?[...e,t]:e.filter((e=>e!==t));if(s.length>y().v8)return C().D6({label:(0,A.jsx)(D,{})}),!1;if("success"===(await x().callApi({eventName:"updatePinnedTemplates",environment:a,data:{templateIds:s}})).type){oe().A.setState({...oe().A.state,pinnedTemplates:s});const e="pin"===i?"creator_profile_template_pin":"creator_profile_template_unpin";return(0,j().v)(a,e),n||C().D6({label:"pin"===i?(0,A.jsx)(E,{templateName:r}):(0,A.jsx)(B,{templateName:r}),right:(0,A.jsx)(T,{buttonLabel:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pin.unpin.undo",defaultMessage:"Undo"}),onClick:async()=>{w().tN({environment:a,preventSelectText:!0}),C().N2();await ce({environment:a,templateId:t,templateName:r,creatorId:o,isUndo:!0,type:"pin"===i?"unpin":"pin"})&&C().D6({label:"pin"===i?(0,A.jsx)(B,{templateName:r}):(0,A.jsx)(E,{templateName:r}),right:(0,A.jsx)(k,{children:(0,A.jsx)(P,{})})})}})}),!0}throw new Error}catch(s){return C().D6({label:"pin"===i?(0,A.jsx)(R,{templateName:r}):(0,A.jsx)(F,{templateName:r}),right:(0,A.jsx)(T,{buttonLabel:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pin.unpin.error.retry",defaultMessage:"Retry"}),onClick:async()=>{C().N2(),await ce({environment:a,templateId:t,templateName:r,creatorId:o,isUndo:n,type:i})}})}),!1}}async function ue(e){const{environment:t,id:a}=e,i=await x().callApi({eventName:"deleteTemplateDraft",environment:t,data:{templateDraftId:a}});return"success"===i.type?((0,j().v)(t,"creator_profile_template_delete_draft"),oe().A.setState({...oe().A.state,draftTemplates:{}}),!0):(S().Qg(i),!1)}async function pe(e){const{environment:t,id:a}=e,i=await x().callApi({eventName:"deleteTemplate",environment:t,data:{templateId:a}});return"success"===i.type?((0,j().v)(t,"creator_profile_template_delete"),!0):(S().Qg(i),!1)}async function ge(e,t){if(!t.startsWith("/profile/templates/form/"))return!0;const{type:a,id:i}=$(t);if("new"===a)return!0;const r=await x().callApi({eventName:"validateActorOwnsTemplate",environment:e,data:{type:a,id:i}});return"success"===r.type&&r.data.actorOwnsTemplate}var me=()=>a(417927),fe=()=>a(628199),he=()=>a(769206),be=(a(672577),a(581454),()=>a(432540)),ve=()=>a(704152),ye=()=>a(406699),xe=()=>a(928600),Se=()=>a(678553),we=()=>a(460292),Ce=()=>a(132389),je=()=>a(722872),Me=()=>a(757695);class _e extends Me().Store{getInitialState(){return{profileFormType:null}}}const Ae=new _e;var Ie=()=>a(204063);function ke(e){const{showCreatorProfileForm:t,header:a,description:i,subdescription:r}=e,n=(0,o().IS)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"space-between",gap:24,flexWrap:"wrap"},topContainer:{display:"flex",flexDirection:"column",gap:4},sidebarHeader:{fontSize:18,fontWeight:L().Wy.semibold,color:e.text.primary},sidebarDescription:{fontSize:14,color:e.text.tertiary,fontWeight:L().Wy.regular},createButtonColor:{background:e.white}})),[]);return(0,A.jsxs)("div",{style:n.container,children:[(0,A.jsxs)("div",{style:n.topContainer,children:[a,i,r]}),(0,A.jsx)("div",{children:(0,A.jsx)(Ie().A,{color:"black",size:"xl",onClick:t,children:(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.template.button.createProfile",defaultMessage:"Create a Profile"})})})]})}const Te=ke;var Pe=()=>a(987017);function Le(e){let{tabs:t,style:a,defaultSelectedIndex:r=0}=e;const n=(0,o().IS)((()=>({menuItem:{paddingLeft:0,marginTop:"20px",marginBottom:"48px"},selectedTabTitleStyle:{fontWeight:L().Wy.semibold}})),[]),[s,l]=(0,i.useState)(r);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Pe().Ay,{tabs:t.map((e=>e.title)),selectedIndex:s,onChange:e=>{var a,i;l(e),null===(a=(i=t[e]).onChange)||void 0===a||a.call(i)},style:{...n.menuItem,...a},selectedTabTitleStyle:n.selectedTabTitleStyle}),t[s].content]})}var De=()=>a(62554),Ee=(a(814603),a(147566),a(198721),()=>a(861017)),Be=()=>a(435009),Re=()=>a(780054),Fe=()=>a(340498);const Ue=(0,Fe().wt)("bookOpen",{viewBox:"0 0 20 20",svg:(0,A.jsx)("path",{d:"M9.375 6.25v10.625H7.812l-.59-1.184C6.984 15.219 6.634 15 6.103 15H1.875V3.75h5c1.544 0 2.5.956 2.5 2.5zm3.75-2.5c-1.544 0-2.5.956-2.5 2.5v10.625h1.563l.59-1.184c.238-.472.588-.691 1.119-.691h4.228V3.75h-5z"})});var Ne=()=>a(770634);function ze(e){const{children:t}=e,a=(0,o().IS)((()=>({creatorProfileNavTabWrapperContainer:{display:"flex",gap:"6px",alignItems:"center",fontSize:"15px"}})),[]);return(0,A.jsx)("span",{style:a.creatorProfileNavTabWrapperContainer,children:t})}const Ve=["creatorProfile","creatorProfileTemplates","creatorProfileIntegrations","creatorProfileAnalytics","creatorProfileCoupons","creatorProfileLearn"],He={creatorProfile:{index:Ve.indexOf("creatorProfile"),route:"/profile",tabLabel:(0,A.jsxs)(ze,{children:[(0,a(385527).h)({height:16,width:16}),(0,A.jsx)(d().sA,{defaultMessage:"Profile",id:"creatorProfile.tabs.header.profile"})]},"profile")},creatorProfileTemplates:{index:Ve.indexOf("creatorProfileTemplates"),route:"/profile/templates",tabLabel:(0,A.jsxs)(ze,{children:[(0,a(214683).T)({height:16,width:16}),(0,A.jsx)(d().sA,{defaultMessage:"Templates",id:"creatorProfile.tabs.header.templates"})]},"templates")},creatorProfileIntegrations:{index:Ve.indexOf("creatorProfileIntegrations"),route:"/profile/integrations",tabLabel:(0,A.jsxs)(ze,{children:[(0,a(243642).G)({height:16,width:16}),(0,A.jsx)(d().sA,{defaultMessage:"Integrations",id:"creatorProfile.tabs.header.integrations"})]},"integrations")},creatorProfileAnalytics:{index:Ve.indexOf("creatorProfileAnalytics"),route:"/profile/analytics",tabLabel:(0,A.jsxs)(ze,{children:[(0,a(592589).B)({height:16,width:16}),(0,A.jsx)(d().sA,{defaultMessage:"Analytics",id:"creatorProfile.tabs.header.analytics"})]},"analytics")},creatorProfileLearn:{index:Ve.indexOf("creatorProfileLearn"),route:"https://www.notion.com/help/notion-academy/course/templates-and-marketplace",tabLabel:(0,A.jsxs)(ze,{children:[Ue({height:16,width:16}),(0,A.jsx)(d().sA,{defaultMessage:"Learn",id:"creatorProfile.tabs.header.learn"})]},"learn")},creatorProfileCoupons:{index:Ve.indexOf("creatorProfileCoupons"),route:"/profile/coupons",tabLabel:(0,A.jsxs)(ze,{children:[(0,Ne().C)({height:16,width:16}),(0,A.jsx)(d().sA,{defaultMessage:"Coupons",id:"creatorProfile.tabs.header.coupons"})]},"coupons")}},Oe=["/profile","/profile/templates","/profile/templates/faq","/profile/templates/form/new","/profile/templates/form/new/","/profile/templates/form/published/","/profile/templates/form/draft/","/profile/integrations","/profile/integrations/form/new-integration","/profile/integrations/public/","/profile/integrations/internal/","/profile/analytics","/profile/coupons","/profile/coupons/new-coupon","/profile/coupons/edit/"];function We(e,t){return`/profile/templates/form/${e}/${t}`}const qe={hideTabBorder:!0,tabBorderStyle:{borderWidth:0},style:{flexDirection:"column",boxShadow:"none"}};function Ke(e){const{handleChange:t,activeIndex:a,isVertical:r}=e,n=(0,o().IS)((()=>({navTab:{fontWeight:L().Wy.medium,color:c().Ay.frontTextLight,paddingBottom:0,paddingTop:"4px"},tabTitle:{color:"inherit"},selectedTab:{color:c().Ay.frontText}})),[]),s=(0,i.useMemo)((()=>Ve.map((e=>He[e].tabLabel))),[]);return(0,A.jsx)(Pe().Ay,{tabs:s,selectedIndex:a,onChange:e=>{const i=Ve[e],r=He[i];"creatorProfileLearn"!==i?(a!==e&&"creatorProfile"===i&&Ae.reset(),t(r.route)):window.open(r.route,"_blank","noopener,noreferrer")},tabTitleStyle:n.tabTitle,tabStyle:n.navTab,selectedTabStyle:n.selectedTab,...r?qe:{}})}const Ge=(0,i.createContext)({onBeforeViewChange:{current:null},name:void 0,setView:()=>{},searchParams:new URLSearchParams});function Ze(){const e=i.useContext(Ge);if(void 0===e)throw new Error("useCreatorProfileNavContext must be used within CreatorProfileNav");return e}function $e(e){const{children:t}=e,a=(0,r().v3)(),i=window.location.search,o=new URLSearchParams(i);(0,n().O$)(a.RouterStore);const s=window.location.pathname.endsWith("/")?window.location.pathname.slice(0,window.location.pathname.length-1):window.location.pathname,l=(0,Ee().parseRoute)({url:window.location.href,isMobile:a.device.isMobile,baseUrl:Re().A.domainBaseUrl,publicDomainName:Re().A.publicDomainName,protocol:Re().A.protocol,currentUrl:window.location.href}).name;return(0,V().O)(He,l)&&function(e){for(const t of Oe){if(e===t)return!0;if(e.includes("/profile/templates/form/published/")||e.includes("/profile/templates/form/new/")||e.includes("/profile/templates/form/draft/")||e.includes("/profile/integrations/public/")||e.includes("/profile/integrations/internal/")||e.includes("/profile/coupons/new-coupon")||e.includes("/profile/coupons/edit/"))return!0}return!1}(s)?(0,A.jsx)(Ye,{name:l,path:s,searchParams:o,children:t}):null}function Ye(e){const{name:t,children:a,path:n,searchParams:s}=e,{isMobileWidth:l,isLowResolutionTabletWidth:d}=(0,m().LS)(),c=(0,o().IS)((()=>({navContainerLarge:{display:"flex",justifyContent:"space-between"},navMenuLarge:{width:"160px",marginRight:"24px",marginLeft:"24px"},pageLargeLayout:{width:"66vw",margin:"0 auto"},navContainerSmall:{display:"flex",flexDirection:"column",marginBottom:"32px"},navMenuSmall:{width:"100%"},pageSmallLayout:{margin:"0 24px"},navMenuLargeFixedContainer:{position:"fixed",top:"106px"}})),[]),u=(0,r().v3)(),p=(0,i.useRef)(null),g=(0,i.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!0;if(p.current&&!t)try{await p.current()}catch(i){if(!(i instanceof Error&&"abandon_route"===i.message))throw i;a=!1}a&&Be().oo({environment:u,url:e})}),[u]),f=He[t].index,h=l||d;return(0,A.jsx)(Ge.Provider,{value:{name:n,onBeforeViewChange:p,setView:g,searchParams:s},children:(0,A.jsxs)("section",{style:h?c.navContainerSmall:c.navContainerLarge,children:[(0,A.jsx)("section",{style:h?c.navContainerSmall:c.navMenuLarge,children:h?(0,A.jsx)(Ke,{activeIndex:f,handleChange:g,isVertical:!h}):(0,A.jsx)("div",{style:c.navMenuLargeFixedContainer,children:(0,A.jsx)(Ke,{activeIndex:f,handleChange:g,isVertical:!h})})}),(0,A.jsx)("section",{style:h?c.pageSmallLayout:c.pageLargeLayout,children:a})]})})}Ge.displayName="CreatorProfileNavContext";var Qe=()=>a(72563),Je=()=>a(8980),Xe=()=>a(864943),et=()=>a(674020),tt=()=>a(750559),at=()=>a(583835);const it=(0,at().Dv)("exportMarketplacePurchases");var rt=()=>a(2220);var nt=()=>a(357625),ot=()=>a(812182),st=()=>a(898486);async function lt(e){let{environment:t,intl:a,includeTaxAmounts:i}=e;const r=(0,nt().UT)(t,it,{statuses:["succeeded","refunded"],includeTaxAmounts:i},{spaceIds:[]});!function(e,t){(0,rt().u)({environment:e,event:{eventName:"marketplace_purchase_export",eventProperties:t}})}(t,{});const n=await r.next();if(n.value.error){const e=(0,st().A)(a,n.value.error);ot().HK({id:"marketplace_purchase_export_toast",title:a.formatMessage({id:"creatorProfile.templates.purchaseExport.error.toast.title",defaultMessage:"Something went wrong"}),message:e,presentationType:"transient",icon:tt().f})}else ot().HK({id:"marketplace_purchase_export_toast",title:a.formatMessage({id:"creatorProfile.templates.purchaseExport.started.toast.title",defaultMessage:"Your CSV export is currently being generated"}),message:a.formatMessage({id:"creatorProfile.templates.purchaseExport.started.toast.message",defaultMessage:"Once it is ready, an email will be sent to you with the download link."}),presentationType:"transient",icon:et().y})}function dt(e){const{title:t,subtitle:a,pill:i,left:r,right:n}=e,s=function(){const{isMobileWidth:e}=(0,m().LS)();return(0,o().IS)((t=>({cardContainer:{display:"flex",flexDirection:e?"column":"row",alignItems:e?"start":"center",borderRadius:8,border:`1px solid ${t.outlineButtonBorder}`,padding:16,paddingLeft:20,width:"100%",gap:e?18:0},leftContainer:{marginRight:16},centerContainer:{display:"flex",flexDirection:"column",gap:e?12:0,width:"100%"},rightContainer:{display:"flex",justifyContent:"flex-end",marginLeft:e?0:16,width:e?"100%":void 0},titleContainer:{display:"flex",alignItems:e?"start":"center",justifyContent:"flex-start",flexDirection:e?"column-reverse":"row",gap:9},title:{fontWeight:L().Wy.medium,fontSize:16,lineHeight:"24px"},subtitle:{fontSize:14,color:t.text.secondary,lineHeight:"24px"}})),[e])}();return(0,A.jsxs)("div",{style:s.cardContainer,children:[r?(0,A.jsx)("div",{style:s.leftContainer,children:r}):null,(0,A.jsxs)("div",{style:s.centerContainer,children:[(0,A.jsxs)("div",{style:s.titleContainer,children:[(0,A.jsx)("div",{style:s.title,children:t}),(0,A.jsx)("div",{children:i})]}),(0,A.jsx)("div",{style:s.subtitle,children:a})]}),n?(0,A.jsx)("div",{style:s.rightContainer,children:n}):null]})}function ct(){const e=(0,r().v3)(),t=function(){const{isMobileWidth:e}=(0,m().LS)();return(0,o().IS)((t=>({container:{display:"flex",flexDirection:e?"column":"row",justifyContent:"space-between",alignItems:e?"start":"center",borderWidth:1,borderStyle:"solid",borderColor:t.stroke.primary,borderRadius:8,paddingLeft:20,paddingRight:20,paddingTop:17.5,paddingBottom:17.5,gap:18,marginTop:52,marginBottom:52},leftContainer:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",gap:18},madeASaleContainer:{display:"flex",flexDirection:"column",gap:4},madeASaleTitle:{fontSize:16,lineHeight:"24px"},madeASaleDescription:{color:t.text.secondary,lineHeight:"19px",fontSize:13.5},purchaseExportButtonContainer:{width:e?"100%":"auto",display:"flex",flexDirection:"row",justifyContent:"end",alignItems:"center"},purchaseExportButton:{display:"flex",gap:6}})),[e])}(),a=(0,d().tz)(),[n,s]=(0,i.useState)(!1);(0,i.useEffect)((()=>{x().callApi({eventName:"getMarketplaceAcquisitionsCountByCreator",environment:e,data:{statuses:["succeeded","refunded"]}}).then((e=>{s(Boolean("success"===(null==e?void 0:e.type)&&e.data.success&&e.data.acquisitionCount>0))}))}),[e]);const l=(0,i.useCallback)((async t=>{await lt({environment:e,intl:a,includeTaxAmounts:null==t?void 0:t.includeTaxAmounts})}),[e,a]);return n?(0,A.jsx)(dt,{title:a.formatMessage(ut.title),subtitle:a.formatMessage(ut.subtitle),left:(0,A.jsx)(Je().I,{icon:Qe().priceTagFillIcon,size:"lg"}),right:(0,A.jsx)(Xe().A,{size:"lg",style:t.purchaseExportButton,onClick:()=>l({includeTaxAmounts:!0}),children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.purchaseExportButton",defaultMessage:"Download CSV"})})}):null}const ut=(0,d().YK)({title:{id:"creatorProfile.purchaseExport.title",defaultMessage:"You’ve made a sale!"},subtitle:{id:"creatorProfile.purchaseExport.subtitle",defaultMessage:"Download a CSV of all of your sales from the Notion Marketplace"}});var pt=()=>a(710144),gt=()=>a(72135),mt=()=>a(246732),ft=()=>a(264503),ht=()=>a(532564),bt=()=>a(505776),vt=()=>a(760217),yt=()=>a(554509),xt=()=>a(933117);const St=["web","app"],wt=["1d","7d","28d","total"],Ct=["all","paid","free"];function jt(){const{isFeatureEnabled:e}=(0,pt().O)("marketplace_analytics_filters"),[t,a]=(0,i.useState)({dateRange:"7d",sources:["web","app"],paid:["paid","free"],templateListingId:void 0});(0,i.useEffect)((()=>{e&&a((e=>({...e,dateRange:"28d"})))}),[e]);return{filtersConfig:t,onDateRangeChange:e=>{a({...t,dateRange:e})},onSourceChange:e=>{const{sources:i}=t;if(i.includes(e)&&i.length<=1)return;const r=[...i];r.includes(e)?r.splice(r.indexOf(e),1):r.push(e),a({...t,sources:r})},onPaidChange:e=>{a("all"!==e?{...t,paid:[e]}:{...t,paid:["paid","free"]})},onTemplateListingIdChange:e=>{t.templateListingId!==e?a({...t,templateListingId:e}):a({...t,templateListingId:void 0})}}}function Mt(e){const{onDateRangeChange:t,dateRange:a}=e,i=(0,o().IS)((()=>({filtersButton:{display:"flex",alignItems:"center",gap:5}})),[]),r={onSelect:e=>{t(e)},items:wt,renderOrigin:e=>(0,A.jsxs)(_().p,{...e,style:i.filtersButton,children:[(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Semibold",colorName:"primary",children:_t[a]}),(0,A.jsx)(we().Q,{iconGroup:be().I,variantName:"mini",colorName:"secondary"})]}),getKey:e=>e,renderItem:e=>(0,A.jsx)(vt().A,{...e,title:_t[e.value]}),selectedItem:a};return(0,A.jsx)(xt().A,{...r})}const _t={"1d":(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.dateRange.filter.1day.label",defaultMessage:"1 day ago"}),"7d":(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.dateRange.filter.7days.label",defaultMessage:"Last 7 days"}),"28d":(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.dateRange.filter.28days.label",defaultMessage:"Last 28 days"}),total:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.dateRange.filter.total.label",defaultMessage:"All-time"})};function At(e){const{onPaidChange:t,paid:a}=e,i=2===a.length?"all":a[0],r=(0,o().IS)((()=>({filtersButton:{display:"flex",alignItems:"center",gap:5}})),[]),n={onSelect:e=>{t(e)},items:Ct,renderOrigin:e=>(0,A.jsxs)(_().p,{...e,style:r.filtersButton,children:[(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Semibold",colorName:"primary",children:It[i]}),(0,A.jsx)(we().Q,{iconGroup:be().I,variantName:"mini",colorName:"secondary"})]}),getKey:e=>e,renderItem:e=>(0,A.jsx)(vt().A,{...e,title:It[e.value]}),selectedItem:i};return(0,A.jsx)(xt().A,{...n})}const It={all:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.paid.filter.freeAndAll.label",defaultMessage:"Free + Paid"}),free:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.paid.filter.paid.label",defaultMessage:"Free"}),paid:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.paid.filter.free.label",defaultMessage:"Paid"})};var kt=()=>a(758318);function Tt(e){const{onSourceChange:t,sources:a}=e,i=(0,o().IS)((()=>({filtersButton:{display:"flex",alignItems:"center",gap:5},dropdownMenuItemTextContainer:{display:"flex",flexDirection:"column",gap:1},dropdownMenuItemContainer:{minHeight:40,padding:"8px 0px",display:"flex",alignItems:"center",justifyContent:"space-between"}})),[]);if(0===a.length)return null;const r=a.includes("web")&&a.includes("app"),n=a[0],s=Pt[n],l={onSelect:e=>{t(e)},items:St,renderOrigin:e=>(0,A.jsxs)(_().p,{...e,style:i.filtersButton,children:[(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Semibold",colorName:"primary",children:r?(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.sourceFilter.both.buttonLabel",defaultMessage:"Logged-in + Logged-out"}):s.buttonLabel}),(0,A.jsx)(we().Q,{iconGroup:be().I,variantName:"mini",colorName:"secondary"})]}),getKey:e=>e,renderItem:e=>{const t=Pt[e.value];return(0,A.jsx)(vt().A,{...e,title:(0,A.jsxs)("div",{style:i.dropdownMenuItemContainer,children:[(0,A.jsxs)("div",{style:i.dropdownMenuItemTextContainer,children:[(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:t.dropdownTitle}),(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:t.dropdownSubtitle})]}),a.includes(e.value)&&(0,A.jsx)(we().Q,{iconGroup:kt().a,variantName:"mini",colorName:"primary"})]})})},selectedItem:r?void 0:n,width:"100%",minWidth:305};return(0,A.jsx)(xt().A,{...l})}const Pt={app:{buttonLabel:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.sourceFilter.item.app.buttonLabel",defaultMessage:"Logged-in"}),dropdownTitle:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.sourceFilter.item.app.dropdownTitle",defaultMessage:"Logged-in"}),dropdownSubtitle:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.sourceFilter.item.app.dropdownSubtitle",defaultMessage:"Visits from inside the Notion product (notion.so/marketplace)"})},web:{buttonLabel:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.sourceFilter.item.web.buttonLabel",defaultMessage:"Logged-out"}),dropdownTitle:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.sourceFilter.item.web.dropdownTitle",defaultMessage:"Logged-out"}),dropdownSubtitle:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.sourceFilter.item.web.dropdownSubtitle",defaultMessage:"Visits from web traffic (notion.com/marketplace)"})}};var Lt=()=>a(292119),Dt=()=>a(959577),Et=()=>a(837530),Bt=()=>a(630116);function Rt(e){const{selectedTemplateListingId:t,onTemplateChange:a}=e,o=(0,r().v3)(),s=Ut(),c=(0,d().tz)(),[u]=(0,l().Yb)((async()=>{const e=await x().callApi({eventName:"getCreatorTemplates",environment:o,data:{locale:(0,v().H)(c),limit:500,includeLocalizedTemplates:!0}});return"success"===e.type?e.data.templateIds:[]}),[o,c]),p=(0,i.useMemo)((()=>(null==u?void 0:u.value)??[]),[u.value]),g=(0,n().K8)((()=>p.map((e=>{const t=new(Bt().$x)(o,{table:Dt().XX,id:e});if(t.isDefined()&&t.isReady())return{id:t.id,name:t.getName(),price:t.getPrice(),imageUrl:t.getAttributes().image.url,listingId:t.getListingId()}})).filter(V().O9)),[o,p]),m=g.find((e=>e.listingId===t&&void 0!==t)),f={onSelect:e=>{e.listingId&&a(e.listingId)},items:g,renderOrigin:e=>(0,A.jsxs)(_().p,{...e,style:s.filtersButton,children:[(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Semibold",colorName:"primary",children:m?m.name:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.templateFilter.allTemplates.buttonLabel",defaultMessage:"All templates"})}),(0,A.jsx)(we().Q,{iconGroup:be().I,variantName:"mini",colorName:"secondary"})]}),getKey:e=>e.id,renderItem:e=>(0,A.jsx)(Ft,{template:e.value,menuProps:e,selectedTemplate:m}),selectedItem:void 0,width:"100%",minWidth:482};return(0,A.jsx)(xt().A,{...f})}function Ft(e){const{template:t,menuProps:a,selectedTemplate:i}=e,r=Ut(),n=(0,d().tz)();return(0,A.jsx)(vt().A,{...a,title:(0,A.jsxs)("div",{style:r.templateDropdownMenuItemContainer,children:[(0,A.jsxs)("div",{style:r.templateDropdownMetadataContainer,children:[(0,A.jsx)(Et().$g,{src:t.imageUrl,imageHeight:50,imageWidth:80,imageBorderRadius:4,isDisabled:!0,imageContainerStyle:r.templatePreviewImageContainer}),(0,A.jsxs)("div",{style:r.templateDropdownTextContainer,children:[(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Medium",colorName:"primary",children:t.name}),(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:0!==t.price&&void 0!==t.price?(0,A.jsx)(Lt().v,{cost:{amount:100*t.price,currencyCode:"USD"},intl:n,trailingZeroDisplay:"stripIfInteger"}):(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.templateDropdownItem.price.free",defaultMessage:"Free"})})]})]}),i&&i.id===t.id&&(0,A.jsx)(we().Q,{iconGroup:kt().a,variantName:"mini",colorName:"primary"})]})})}function Ut(){return(0,o().IS)((()=>({filtersButton:{display:"flex",alignItems:"center",gap:5},templateDropdownTextContainer:{display:"flex",flexDirection:"column",gap:1},templateDropdownMetadataContainer:{display:"flex",alignItems:"center",gap:16},templateDropdownMenuItemContainer:{minHeight:40,padding:"8px 0px",display:"flex",alignItems:"center",justifyContent:"space-between"},templatePreviewImageContainer:{border:"1px solid rgba(0, 0, 0, 0.04)",borderRadius:4,boxShadow:"0 4px 18px rgb(0 0 0 / 4%), 0 2.025px 7.84688px rgb(0 0 0 / 2.7%), 0 0.8px 2.925px rgb(0 0 0 / 2%), 0 0.175px 1.04062px rgb(0 0 0 / 1.3%)"}})),[])}function Nt(e){const{onDateRangeChange:t,onSourceChange:a,filtersConfig:i,shouldShowPaidFilter:r,shouldShowTemplateFilter:n,onTemplateChange:s,onPaidChange:l}=e,c=(0,o().IS)((()=>({filtersContainer:{display:"flex",alignItems:"center",gap:18,marginLeft:-6},filters:{fontSize:15,lineHeight:"22px",margin:0,fontWeight:L().Wy.semibold}})),[]),{isFeatureEnabled:u}=(0,pt().O)("marketplace_analytics_filters");return u?(0,A.jsxs)("div",{style:c.filtersContainer,children:[(0,A.jsx)(Mt,{dateRange:i.dateRange,onDateRangeChange:t}),(0,A.jsx)(Tt,{sources:i.sources,onSourceChange:a}),r&&l&&(0,A.jsx)(At,{paid:i.paid,onPaidChange:l}),n&&s&&(0,A.jsx)(Rt,{selectedTemplateListingId:i.templateListingId,onTemplateChange:s})]}):(0,A.jsx)("div",{style:c.filters,children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.template.subHeader",defaultMessage:"Last 7 days"})})}function zt(e){return e.success}function Vt(e){const{templateMetrics:t,filtersConfig:a,type:i}=e,{dateRange:r,sources:n}=a,o=t,s="views"===i?"views":"downloads";let l="";l=n.includes("web")&&n.includes("app")?"app_web":n.includes("web")?"web":"app";const d=`${s}_${l}_${r}`;if(d in o){return o[d]}return 0}a(908872);var Ht=()=>a(496603);function Ot(){const e=(0,d().tz)(),t=(0,o().IS)((e=>({defaultContainer:{border:`1px solid ${e.palette.gray[100]}`,borderRadius:"8px",backgroundColor:e.cardContentBackground,maxHeight:"375px",maxWidth:"300px",width:"max-content",overflow:"hidden",pointerEvents:"auto",boxShadow:"0px 2px 4px rgb(0, 0, 0, 0.1)"},scrollContainer:{overflow:"auto",padding:"15px 15px 10px 15px",maxHeight:"375px"},row:{fontSize:"12px",lineHeight:"18px",textAlign:"left",display:"flex",justifyContent:"space-between",gap:"16px"},square:{height:"7px",width:"7px",minWidth:"7px",borderRadius:"1px",borderWidth:"0px",marginRight:"6px",marginTop:"6px",verticalAlign:"top",display:"inline-block"},rowLeft:{display:"inline-block",color:e.text.secondary,overflowX:"hidden",whiteSpace:"normal"},rowLeftContainer:{display:"inline-flex"},rowRight:{color:e.chartRowRightColor}})),[]),a=(0,i.useCallback)((e=>Object.keys(e).reduce(((t,a)=>`${t}${(0,Ht().kW)(a)}:${e[a]};`),"")),[]),{rowStyle:r,squareStyle:n,rowLeftStyles:s,rowLeftContainerStyle:l,rowRightStyles:c,outsideContainerStyle:u,scrollContainerStyle:p}=(0,i.useMemo)((()=>({outsideContainerStyle:a(t.defaultContainer),scrollContainerStyle:a(t.scrollContainer),rowStyle:a(t.row),rowLeftContainerStyle:a(t.rowLeftContainer),squareStyle:a(t.square),rowLeftStyles:a(t.rowLeft),rowRightStyles:a(t.rowRight)})),[t,a]),g=(0,i.useMemo)((()=>({useHTML:!0,shadow:!1,borderWidth:0,backgroundColor:void 0,outside:!1,stickOnContact:!0,hideDelay:100})),[]);return(0,i.useMemo)((()=>({...g,shared:!0,formatter:function(){const t=this.points??[];return`\n\t\t\t\t<div style="${u}">\n\t\t\t\t<div style="${p}">\n\t\t\t\t\t${t.map((t=>{const a=t.color??t.series.color,i=t.series.name,o=(0,gt().ZV)(t.y??void 0,"compact",e),d=""===i?e.formatMessage(Wt.empty):i;return`\n\t\t\t\t\t\t\t<div style="${r}">\n\t\t\t\t\t\t\t\t<div style="${l}">\n\t\t\t\t\t\t\t\t\t<div style="${n} background-color: ${a};"></div> \n\t\t\t\t\t\t\t\t\t\t<div style="${s}">\n\t\t\t\t\t\t\t\t\t\t\t${d}\n\t\t\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span style="${c}">\n\t\t\t\t\t\t\t\t\t${o}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`})).join("")}\n\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`}})),[g,u,p,e,r,n,s,c,l])}const Wt=(0,d().YK)({empty:{defaultMessage:"Empty",id:"creatorProfile.chart.tooltip.empty"}});function qt(e){const t=(0,o().IS)((()=>({lastUpdated:{fontSize:12,textAlign:"right",color:"rgba(17, 17, 17, 0.5)"}})),[]),{value:a}=e,{isMobileWidth:i}=(0,m().LS)();return i||!a?null:(0,A.jsx)("div",{style:t.lastUpdated,children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.lastUpdated",defaultMessage:"Last updated {date} (UTC)",values:{date:(0,A.jsx)(d().XU,{value:a,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})}})})}function Kt(){var e,t;const a=(0,r().v3)(),i=(0,d().tz)(),s=jt(),c=(0,n().K8)((()=>{const{currentUserStore:e}=b().default.state;return null==e?void 0:e.id}),[]),[{status:u,value:p}]=(0,l().Yb)((async()=>{if(!c)return{timeseriesData:[],lastUpdated:void 0};const e=await x().callApi({eventName:"getMarketplaceMetrics",environment:a,data:{metrics:["views"],sources:s.filtersConfig.sources,dateRange:s.filtersConfig.dateRange,by:"date"}});if("success"===e.type&&zt(e.data)){const t=e.data;return{webTimeseriesData:t.metrics.map((e=>({x:new Date(e.ds).getTime(),y:e.views_web_1d,name:i.formatMessage(Gt.loggedOut)}))),appTimeseriesData:t.metrics.map((e=>({x:new Date(e.ds).getTime(),y:e.views_app_1d,name:i.formatMessage(Gt.loggedIn)}))),lastUpdated:e.data.lastUpdated}}return{webTimeseriesData:[],appTimeseriesData:[],lastUpdated:void 0}}),[c,a,i,s.filtersConfig]),g=(0,n().uB)(void 0,bt().A),m=(0,o().IS)((()=>({header:{fontSize:24,lineHeight:"30px",fontWeight:L().Wy.semibold,marginBottom:4},subheader:{display:"flex",justifyContent:"space-between"},container:{marginTop:72}})),[]),f=Ot();return(0,A.jsxs)("div",{style:m.container,children:[(0,A.jsx)("div",{style:m.header,children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.templateViews.header",defaultMessage:"Template views"})}),(0,A.jsxs)("div",{style:m.subheader,children:[(0,A.jsx)(Nt,{filtersConfig:s.filtersConfig,onDateRangeChange:s.onDateRangeChange,onSourceChange:s.onSourceChange}),(0,A.jsx)(qt,{value:null==p?void 0:p.lastUpdated})]}),(0,A.jsx)(ht().Z,{value:g,children:(0,A.jsx)(mt().AxisChart,{tooltipOptions:f,onLoadEventHandler:()=>{},seriesData:[{name:i.formatMessage(Gt.loggedIn),type:"area",fillColor:"rgba(0, 0, 0, 0)",color:"rgba(165, 121, 217, 1)",data:(null==p?void 0:p.webTimeseriesData)??[]},{name:i.formatMessage(Gt.loggedOut),type:"area",fillColor:"rgba(0, 0, 0, 0)",color:"rgba(234, 139, 66, 1)",data:(null==p?void 0:p.appTimeseriesData)??[]}],xAxisType:"datetime",showHorizontalGridLines:!0,xAxisTitle:i.formatMessage(Gt.date),yAxisTitle:i.formatMessage(Gt.views),yLabelFormatter:e=>(0,gt().ZV)(e,e>9999?"compact":"number",i),timezone:"UTC",xLabelFormatter:e=>new Date(e).toLocaleDateString(i.locale,{month:"numeric",day:"numeric",timeZone:"UTC"}),axisType:"line",dataLabelsEnabled:!1,loadingProps:{isInitialLoading:"pending"===u,isThrottledLoading:"pending"===u,initialLoadingSvg:()=>(0,A.jsx)(ft().z,{chartType:"line",showCopy:!1})},hasData:"resolved"===u&&(((null==p||null===(e=p.webTimeseriesData)||void 0===e?void 0:e.length)??0)>0||((null==p||null===(t=p.appTimeseriesData)||void 0===t?void 0:t.length)??0)>0)})})]})}const Gt=(0,d().YK)({loggedOut:{id:"creatorProfile.analytics.profileViews.loggedOut",defaultMessage:"Logged-out"},loggedIn:{id:"creatorProfile.analytics.profileViews.app",defaultMessage:"Logged-in"},date:{id:"creatorProfile.analytics.profileViews.dateInfoLabel",defaultMessage:"Date"},views:{id:"creatorProfile.analytics.profileViews.views",defaultMessage:"Views"}});var Zt=()=>a(187485),$t=()=>a(317182),Yt=()=>a(60200);function Qt(e){const{header:t,sortBy:a,limit:o,shouldShowPaidFilter:s=!0}=e,c=(0,r().v3)(),p=jt(),g=(0,n().K8)((()=>{const{currentUserStore:e}=b().default.state;return null==e?void 0:e.id}),[]),[{status:m,value:f}]=(0,l().Yb)((async()=>{if(!g)return{timeseriesData:[],lastUpdated:void 0};const e=await x().callApi({eventName:"getMarketplaceMetrics",environment:c,data:{by:"template",metrics:["views","downloads"],sources:p.filtersConfig.sources,dateRange:p.filtersConfig.dateRange,templateFilterBy:{paid:p.filtersConfig.paid.includes("paid")&&p.filtersConfig.paid.includes("free")?void 0:p.filtersConfig.paid[0]}}});if("success"===e.type&&zt(e.data)){const t=e.data.templatesMap;return{templateMetrics:t?Object.values(t):[],lastUpdated:e.data.lastUpdated}}return{tableData:[],lastUpdated:void 0}}),[g,c,p.filtersConfig]),v=Xt({isLoading:"pending"===m}),S=(0,i.useMemo)((()=>[...Array(10)].map(((e,t)=>({key:`loading-row-${t}`,columns:[(0,A.jsx)(Yt().R,{width:224,height:14},`loadingProduct-${t}-1`),(0,A.jsx)(Yt().R,{width:119,height:14},`loadingCreatedBy-${t}-2`),(0,A.jsx)(Yt().R,{width:119,height:14},`loadingPrice-${t}-3`)]})))),[]),w=function(e){const{templateMetrics:t,sortBy:a,limit:i,filtersConfig:r}=e;let n=[...t];a&&n.sort(((e,t)=>{const i=Vt({templateMetrics:e.metrics||y().xH,filtersConfig:r,type:a});return Vt({templateMetrics:t.metrics||y().xH,filtersConfig:r,type:a})-i}));void 0!==i&&i>0&&(n=n.slice(0,i));return n}({templateMetrics:(null==f?void 0:f.templateMetrics)??[],sortBy:a,filtersConfig:p.filtersConfig,limit:o}),C=(0,i.useMemo)((()=>w.map(((e,t)=>{if(!e)return;const a=(null==e?void 0:e.metrics)||y().xH,i=Vt({templateMetrics:a,filtersConfig:p.filtersConfig,type:"views"}),r=Vt({templateMetrics:a,filtersConfig:p.filtersConfig,type:"downloads"});return{key:`template-${t}`,columns:[(0,A.jsx)(Jt,{name:e.name,image:e.image,slug:e.slug},`template-row-name-${t}`),(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Regular",children:(0,A.jsx)(d().Gr,{maximumFractionDigits:2,...i>9999?{notation:"compact"}:{},value:i})},`template-row-views-${t}`),(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Regular",children:(0,A.jsx)(d().Gr,{maximumFractionDigits:2,...r>9999?{notation:"compact"}:{},value:r})},`template-row-downloads-${t}`)]}})).filter(V().O9)),[w,p.filtersConfig]),j=[{key:"name",header:(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.templateAnalytics.name",defaultMessage:"Name"})}),style:{width:"47%",minWidth:300}},{key:"views",header:(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.templateAnalytics.views",defaultMessage:"Views"})}),style:{width:"20%",minWidth:200}},{key:"downloads",header:(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.templateAnalytics.downloads",defaultMessage:"Downloads"})}),style:{width:"20%",minWidth:200}}];return(0,A.jsxs)("div",{style:v.container,children:[t,(0,A.jsxs)("div",{style:v.subheader,children:[(0,A.jsx)(Nt,{filtersConfig:p.filtersConfig,onDateRangeChange:p.onDateRangeChange,onSourceChange:p.onSourceChange,shouldShowPaidFilter:s,onPaidChange:p.onPaidChange}),(0,A.jsx)(qt,{value:null==f?void 0:f.lastUpdated})]}),(0,A.jsx)(u().H,{type:h().A.X,style:{overflow:"unset"},children:(0,A.jsx)($t().A,{columns:j,rows:"pending"===m?S:C??[],rowStyle:v.row,hideTopBorderForHeader:!0})})]})}function Jt(e){const{name:t,image:a,slug:i}=e,r=Xt({isLoading:!1});return(0,A.jsxs)("div",{style:r.templatePreview,children:[(0,A.jsx)(Et().$g,{src:(null==a?void 0:a.url)||"",imageHeight:50,imageWidth:80,imageBorderRadius:6,isDisabled:!0,imageContainerStyle:r.templatePreviewImageContainer}),(0,A.jsx)(Zt().A,{href:`/marketplace/templates/${i}`,children:(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:t})})]})}function Xt(e){const{isLoading:t}=e;return(0,o().IS)((()=>({tableContainer:{width:"100%",height:t?"100%":void 0,display:"flex",flexDirection:"column",position:"relative",gap:16},row:{height:58},filters:{fontSize:15,lineHeight:"22px",margin:0,fontWeight:L().Wy.semibold,marginBottom:24},subheader:{display:"flex",justifyContent:"space-between"},container:{marginTop:72},templatePreview:{display:"flex",alignItems:"center",gap:16},templatePreviewImageContainer:{border:"1px solid rgba(0, 0, 0, 0.04)",borderRadius:4,boxShadow:"0 4px 18px rgb(0 0 0 / 4%), 0 2.025px 7.84688px rgb(0 0 0 / 2.7%), 0 0.8px 2.925px rgb(0 0 0 / 2%), 0 0.175px 1.04062px rgb(0 0 0 / 1.3%)"}})),[t])}const ea=(0,Fe().xh)("eye",{default:{loader:()=>a.e(80789).then(a.bind(a,680789))},small:{loader:()=>a.e(81239).then(a.bind(a,481239))},mini:{loader:()=>a.e(99145).then(a.bind(a,99145))},large:{loader:()=>a.e(25647).then(a.bind(a,525647))}}),ta=(0,Fe().xh)("templateDownloads",{default:{loader:()=>a.e(56591).then(a.bind(a,556591))},small:{loader:()=>a.e(30753).then(a.bind(a,430753))},mini:{loader:()=>a.e(1615).then(a.bind(a,1615))},large:{loader:()=>a.e(47797).then(a.bind(a,947797))}}),aa=(0,Fe().wt)("productDownloads",{viewBox:"0 0 55 41",svg:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("path",{d:"M2.7168 6.78613H42.498V9.40234H2.7168V6.78613ZM6.55762 34.6924C4.61556 34.6924 3.15592 34.21 2.17871 33.2451C1.21387 32.2926 0.731445 30.8639 0.731445 28.959V6.28516C0.731445 4.36784 1.21387 2.93294 2.17871 1.98047C3.15592 1.01562 4.61556 0.533203 6.55762 0.533203H38.6572C40.6117 0.533203 42.0713 1.01562 43.0361 1.98047C44.001 2.94531 44.4834 4.38021 44.4834 6.28516V28.959C44.4834 30.8639 44.001 32.2926 43.0361 33.2451C42.0713 34.21 40.6117 34.6924 38.6572 34.6924H6.55762ZM6.59473 31.7051H38.6201C39.5355 31.7051 40.2406 31.4639 40.7354 30.9814C41.2425 30.4867 41.4961 29.7568 41.4961 28.792V6.45215C41.4961 5.4873 41.2425 4.75749 40.7354 4.2627C40.2406 3.7679 39.5355 3.52051 38.6201 3.52051H6.59473C5.66699 3.52051 4.95573 3.7679 4.46094 4.2627C3.96615 4.75749 3.71875 5.4873 3.71875 6.45215V28.792C3.71875 29.7568 3.96615 30.4867 4.46094 30.9814C4.95573 31.4639 5.66699 31.7051 6.59473 31.7051Z",fill:"#E7B533"}),(0,A.jsxs)("mask",{id:"path-2-outside-1_446_28461",maskUnits:"userSpaceOnUse",x:"31.5142",y:"19",width:"23",height:"24",fill:"black",children:[(0,A.jsx)("rect",{fill:"white",x:"31.5142",y:"19",width:"23",height:"24"}),(0,A.jsx)("path",{d:"M43.1626 38.6094C42.0324 38.6094 40.9699 38.3932 39.9751 37.9609C38.9803 37.5339 38.1027 36.9401 37.3423 36.1797C36.5819 35.4245 35.9855 34.5495 35.5532 33.5547C35.1261 32.5599 34.9126 31.4948 34.9126 30.3594C34.9126 29.2292 35.1261 28.1667 35.5532 27.1719C35.9855 26.1771 36.5793 25.2995 37.3345 24.5391C38.0949 23.7786 38.9725 23.1849 39.9673 22.7578C40.9673 22.3255 42.0324 22.1094 43.1626 22.1094C44.2928 22.1094 45.3553 22.3255 46.3501 22.7578C47.3501 23.1849 48.2277 23.7786 48.9829 24.5391C49.7433 25.2995 50.3397 26.1771 50.772 27.1719C51.2043 28.1667 51.4204 29.2292 51.4204 30.3594C51.4204 31.4948 51.2043 32.5599 50.772 33.5547C50.3397 34.5495 49.7433 35.4245 48.9829 36.1797C48.2277 36.9401 47.3527 37.5339 46.3579 37.9609C45.3631 38.3932 44.298 38.6094 43.1626 38.6094ZM43.1782 26.0781C42.9126 26.0781 42.6886 26.1615 42.5063 26.3281C42.3293 26.4948 42.2407 26.7057 42.2407 26.9609V30.4297L42.3345 32.0469L41.7407 31.2422L40.9126 30.3203C40.7616 30.1432 40.561 30.0547 40.311 30.0547C40.0715 30.0547 39.8761 30.1302 39.7251 30.2812C39.5741 30.4271 39.4985 30.612 39.4985 30.8359C39.4985 31.0755 39.5819 31.2839 39.7485 31.4609L42.4204 34.2344C42.6287 34.4688 42.8813 34.5859 43.1782 34.5859C43.4751 34.5859 43.7303 34.4688 43.9438 34.2344L46.6079 31.4609C46.7746 31.2786 46.8579 31.0703 46.8579 30.8359C46.8579 30.612 46.7824 30.4271 46.6313 30.2812C46.4803 30.1302 46.285 30.0547 46.0454 30.0547C45.7902 30.0547 45.5897 30.1432 45.4438 30.3203L44.6235 31.2188L44.022 32.0547L44.1157 30.4297V26.9609C44.1157 26.7057 44.0246 26.4948 43.8423 26.3281C43.6652 26.1615 43.4438 26.0781 43.1782 26.0781Z"})]}),(0,A.jsx)("path",{d:"M43.1626 38.6094C42.0324 38.6094 40.9699 38.3932 39.9751 37.9609C38.9803 37.5339 38.1027 36.9401 37.3423 36.1797C36.5819 35.4245 35.9855 34.5495 35.5532 33.5547C35.1261 32.5599 34.9126 31.4948 34.9126 30.3594C34.9126 29.2292 35.1261 28.1667 35.5532 27.1719C35.9855 26.1771 36.5793 25.2995 37.3345 24.5391C38.0949 23.7786 38.9725 23.1849 39.9673 22.7578C40.9673 22.3255 42.0324 22.1094 43.1626 22.1094C44.2928 22.1094 45.3553 22.3255 46.3501 22.7578C47.3501 23.1849 48.2277 23.7786 48.9829 24.5391C49.7433 25.2995 50.3397 26.1771 50.772 27.1719C51.2043 28.1667 51.4204 29.2292 51.4204 30.3594C51.4204 31.4948 51.2043 32.5599 50.772 33.5547C50.3397 34.5495 49.7433 35.4245 48.9829 36.1797C48.2277 36.9401 47.3527 37.5339 46.3579 37.9609C45.3631 38.3932 44.298 38.6094 43.1626 38.6094ZM43.1782 26.0781C42.9126 26.0781 42.6886 26.1615 42.5063 26.3281C42.3293 26.4948 42.2407 26.7057 42.2407 26.9609V30.4297L42.3345 32.0469L41.7407 31.2422L40.9126 30.3203C40.7616 30.1432 40.561 30.0547 40.311 30.0547C40.0715 30.0547 39.8761 30.1302 39.7251 30.2812C39.5741 30.4271 39.4985 30.612 39.4985 30.8359C39.4985 31.0755 39.5819 31.2839 39.7485 31.4609L42.4204 34.2344C42.6287 34.4688 42.8813 34.5859 43.1782 34.5859C43.4751 34.5859 43.7303 34.4688 43.9438 34.2344L46.6079 31.4609C46.7746 31.2786 46.8579 31.0703 46.8579 30.8359C46.8579 30.612 46.7824 30.4271 46.6313 30.2812C46.4803 30.1302 46.285 30.0547 46.0454 30.0547C45.7902 30.0547 45.5897 30.1432 45.4438 30.3203L44.6235 31.2188L44.022 32.0547L44.1157 30.4297V26.9609C44.1157 26.7057 44.0246 26.4948 43.8423 26.3281C43.6652 26.1615 43.4438 26.0781 43.1782 26.0781Z",fill:"#E7B533"}),(0,A.jsx)("path",{d:"M39.9751 37.9609L41.1708 35.2095L41.1586 35.2043L39.9751 37.9609ZM37.3423 36.1797L39.4636 34.0584L39.4563 34.0511L37.3423 36.1797ZM35.5532 33.5547L32.7965 34.7382L32.8018 34.7503L35.5532 33.5547ZM35.5532 27.1719L32.8018 25.9762L32.7965 25.9884L35.5532 27.1719ZM37.3345 24.5391L35.2131 22.4177L35.2059 22.425L37.3345 24.5391ZM39.9673 22.7578L41.1508 25.5145L41.1577 25.5115L39.9673 22.7578ZM46.3501 22.7578L45.1544 25.5093L45.1631 25.513L45.1718 25.5167L46.3501 22.7578ZM48.9829 24.5391L46.8543 26.6531L46.8616 26.6604L48.9829 24.5391ZM48.9829 36.1797L46.8689 34.0511L46.8616 34.0584L46.8543 34.0657L48.9829 36.1797ZM46.3579 37.9609L45.1744 35.2042L45.1623 35.2095L46.3579 37.9609ZM42.5063 26.3281L40.482 24.114L40.466 24.1287L40.4503 24.1435L42.5063 26.3281ZM42.2407 30.4297H39.2407V30.5166L39.2458 30.6033L42.2407 30.4297ZM42.3345 32.0469L39.9205 33.8281L45.9136 41.9504L45.3294 31.8733L42.3345 32.0469ZM41.7407 31.2422L44.1547 29.461L44.069 29.3448L43.9725 29.2374L41.7407 31.2422ZM40.9126 30.3203L38.6301 32.2672L38.6551 32.2965L38.6808 32.3251L40.9126 30.3203ZM39.7251 30.2812L41.8089 32.4395L41.8278 32.4212L41.8464 32.4026L39.7251 30.2812ZM39.7485 31.4609L37.5639 33.517L37.5759 33.5298L37.588 33.5423L39.7485 31.4609ZM42.4204 34.2344L44.6626 32.2413L44.6227 32.1963L44.5809 32.153L42.4204 34.2344ZM43.9438 34.2344L41.7803 32.1561L41.7529 32.1847L41.7263 32.2139L43.9438 34.2344ZM46.6079 31.4609L48.7715 33.5392L48.7971 33.5125L48.822 33.4852L46.6079 31.4609ZM46.6313 30.2812L44.51 32.4026L44.5286 32.4212L44.5476 32.4395L46.6313 30.2812ZM45.4438 30.3203L47.6593 32.3431L47.7109 32.2866L47.7596 32.2274L45.4438 30.3203ZM44.6235 31.2188L42.4081 29.1959L42.2904 29.3248L42.1885 29.4664L44.6235 31.2188ZM44.022 32.0547L41.027 31.8819L40.4329 42.1781L46.457 33.807L44.022 32.0547ZM44.1157 30.4297L47.1107 30.6025L47.1157 30.5162V30.4297H44.1157ZM43.8423 26.3281L41.7862 28.5127L41.802 28.5276L41.818 28.5422L43.8423 26.3281ZM43.1626 35.6094C42.4261 35.6094 41.7724 35.4709 41.1707 35.2095L38.7794 40.7124C40.1674 41.3155 41.6387 41.6094 43.1626 41.6094V35.6094ZM41.1586 35.2043C40.5115 34.9264 39.9528 34.5475 39.4636 34.0584L35.221 38.301C36.2526 39.3327 37.4491 40.1413 38.7916 40.7176L41.1586 35.2043ZM39.4563 34.0511C38.9689 33.567 38.5874 33.0096 38.3047 32.359L32.8018 34.7503C33.3837 36.0894 34.1949 37.282 35.2283 38.3083L39.4563 34.0511ZM38.3099 32.3712C38.0512 31.7685 37.9126 31.1081 37.9126 30.3594H31.9126C31.9126 31.8815 32.2011 33.3513 32.7965 34.7382L38.3099 32.3712ZM37.9126 30.3594C37.9126 29.6178 38.0504 28.9598 38.3099 28.3554L32.7965 25.9884C32.2019 27.3735 31.9126 28.8405 31.9126 30.3594H37.9126ZM38.3047 28.3675C38.5901 27.7107 38.974 27.1455 39.4631 26.6531L35.2059 22.425C34.1845 23.4534 33.3809 24.6435 32.8018 25.9762L38.3047 28.3675ZM39.4558 26.6604C39.9449 26.1712 40.5037 25.7923 41.1508 25.5145L38.7838 20.0011C37.4413 20.5775 36.2448 21.3861 35.2132 22.4177L39.4558 26.6604ZM41.1577 25.5115C41.7677 25.2478 42.4262 25.1094 43.1626 25.1094V19.1094C41.6386 19.1094 40.1668 19.4032 38.7769 20.0041L41.1577 25.5115ZM43.1626 25.1094C43.8991 25.1094 44.5528 25.2478 45.1544 25.5093L47.5457 20.0064C46.1578 19.4032 44.6865 19.1094 43.1626 19.1094V25.1094ZM45.1718 25.5167C45.8218 25.7943 46.3754 26.1709 46.8543 26.6531L51.1115 22.425C50.08 21.3864 48.8784 20.5755 47.5284 19.9989L45.1718 25.5167ZM46.8616 26.6604C47.3534 27.1522 47.737 27.7151 48.0205 28.3675L53.5234 25.9762C52.9424 24.6391 52.1333 23.4468 51.1042 22.4177L46.8616 26.6604ZM48.0205 28.3675C48.282 28.9692 48.4204 29.6229 48.4204 30.3594H54.4204C54.4204 28.8354 54.1265 27.3642 53.5234 25.9762L48.0205 28.3675ZM48.4204 30.3594C48.4204 31.1031 48.2812 31.7591 48.0205 32.359L53.5234 34.7503C54.1273 33.3606 54.4204 31.8865 54.4204 30.3594H48.4204ZM48.0205 32.359C47.7378 33.0096 47.3563 33.567 46.8689 34.0511L51.0969 38.3083C52.1303 37.282 52.9415 36.0894 53.5234 34.7503L48.0205 32.359ZM46.8543 34.0657C46.3728 34.5505 45.8196 34.9273 45.1744 35.2043L47.5414 40.7176C48.8858 40.1404 50.0826 39.3298 51.1115 38.2937L46.8543 34.0657ZM45.1623 35.2095C44.5624 35.4702 43.9063 35.6094 43.1626 35.6094V41.6094C44.6898 41.6094 46.1639 41.3163 47.5536 40.7124L45.1623 35.2095ZM43.1782 23.0781C42.225 23.0781 41.2611 23.4017 40.482 24.114L44.5307 28.5422C44.347 28.7102 44.1189 28.8549 43.8572 28.9523C43.5992 29.0483 43.3629 29.0781 43.1782 29.0781V23.0781ZM40.4503 24.1435C39.6381 24.9079 39.2407 25.9245 39.2407 26.9609H45.2407C45.2407 27.186 45.2003 27.47 45.0733 27.7724C44.945 28.0781 44.76 28.3268 44.5624 28.5127L40.4503 24.1435ZM39.2407 26.9609V30.4297H45.2407V26.9609H39.2407ZM39.2458 30.6033L39.3395 32.2205L45.3294 31.8733L45.2357 30.2561L39.2458 30.6033ZM44.7485 30.2657L44.1547 29.461L39.3267 33.0234L39.9205 33.8281L44.7485 30.2657ZM43.9725 29.2374L43.1444 28.3155L38.6808 32.3251L39.509 33.247L43.9725 29.2374ZM43.1951 28.3735C42.4278 27.4739 41.3654 27.0547 40.311 27.0547V33.0547C40.0772 33.0547 39.7687 33.0119 39.4371 32.8655C39.0998 32.7165 38.8285 32.4998 38.6301 32.2672L43.1951 28.3735ZM40.311 27.0547C39.3815 27.0547 38.388 27.3757 37.6038 28.1599L41.8464 32.4026C41.6325 32.6165 41.3669 32.7934 41.0668 32.9094C40.7733 33.0229 40.5085 33.0547 40.311 33.0547V27.0547ZM37.6413 28.123C36.8626 28.8749 36.4985 29.8586 36.4985 30.8359H42.4985C42.4985 31.0659 42.4586 31.3548 42.3324 31.6637C42.2046 31.9766 42.0175 32.2381 41.8089 32.4395L37.6413 28.123ZM36.4985 30.8359C36.4985 31.8524 36.8823 32.7927 37.5639 33.517L41.9331 29.4048C42.0856 29.5668 42.2373 29.7848 42.3465 30.0577C42.4559 30.3314 42.4985 30.6002 42.4985 30.8359H36.4985ZM37.588 33.5423L40.2599 36.3158L44.5809 32.153L41.909 29.3795L37.588 33.5423ZM40.1782 36.2275C40.9195 37.0615 41.9713 37.5859 43.1782 37.5859V31.5859C43.4365 31.5859 43.7335 31.6397 44.0286 31.7766C44.3197 31.9117 44.528 32.0899 44.6626 32.2413L40.1782 36.2275ZM43.1782 37.5859C44.3817 37.5859 45.4229 37.0654 46.1614 36.2548L41.7263 32.2139C41.8558 32.0717 42.0576 31.9016 42.3404 31.7717C42.6278 31.6398 42.9197 31.5859 43.1782 31.5859V37.5859ZM46.1074 36.3126L48.7715 33.5392L44.4444 29.3827L41.7803 32.1561L46.1074 36.3126ZM48.822 33.4852C49.4644 32.7827 49.8579 31.8627 49.8579 30.8359H43.8579C43.8579 30.5887 43.9036 30.3197 44.01 30.0538C44.1153 29.7905 44.258 29.5852 44.3938 29.4366L48.822 33.4852ZM49.8579 30.8359C49.8579 29.8586 49.4938 28.8749 48.7151 28.123L44.5476 32.4395C44.339 32.2381 44.1518 31.9766 44.024 31.6637C43.8979 31.3548 43.8579 31.0659 43.8579 30.8359H49.8579ZM48.7527 28.1599C47.9684 27.3757 46.9749 27.0547 46.0454 27.0547V33.0547C45.8479 33.0547 45.5831 33.0229 45.2896 32.9094C44.9895 32.7934 44.7239 32.6165 44.51 32.4026L48.7527 28.1599ZM46.0454 27.0547C45.0078 27.0547 43.9125 27.4606 43.1281 28.4132L47.7596 32.2274C47.5492 32.483 47.2635 32.7118 46.9154 32.8655C46.5763 33.0152 46.2672 33.0547 46.0454 33.0547V27.0547ZM43.2284 28.2975L42.4081 29.1959L46.839 33.2416L47.6593 32.3431L43.2284 28.2975ZM42.1885 29.4664L41.5869 30.3024L46.457 33.807L47.0586 32.9711L42.1885 29.4664ZM47.017 32.2275L47.1107 30.6025L41.1207 30.2569L41.027 31.8819L47.017 32.2275ZM47.1157 30.4297V26.9609H41.1157V30.4297H47.1157ZM47.1157 26.9609C47.1157 25.8952 46.6936 24.8701 45.8666 24.114L41.818 28.5422C41.6201 28.3613 41.4283 28.1134 41.2935 27.8013C41.1596 27.4915 41.1157 27.1972 41.1157 26.9609H47.1157ZM45.8984 24.1435C45.1112 23.4027 44.1311 23.0781 43.1782 23.0781V29.0781C42.9941 29.0781 42.7526 29.0485 42.4865 28.9483C42.2157 28.8463 41.978 28.6932 41.7862 28.5127L45.8984 24.1435Z",fill:"white",mask:"url(#path-2-outside-1_446_28461)"})]})}),ia=(0,Fe().wt)("productViews",{viewBox:"0 0 55 41",svg:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("path",{d:"M2.7168 6.78613H42.498V9.40234H2.7168V6.78613ZM6.55762 34.6924C4.61556 34.6924 3.15592 34.21 2.17871 33.2451C1.21387 32.2926 0.731445 30.8639 0.731445 28.959V6.28516C0.731445 4.36784 1.21387 2.93294 2.17871 1.98047C3.15592 1.01562 4.61556 0.533203 6.55762 0.533203H38.6572C40.6117 0.533203 42.0713 1.01562 43.0361 1.98047C44.001 2.94531 44.4834 4.38021 44.4834 6.28516V28.959C44.4834 30.8639 44.001 32.2926 43.0361 33.2451C42.0713 34.21 40.6117 34.6924 38.6572 34.6924H6.55762ZM6.59473 31.7051H38.6201C39.5355 31.7051 40.2406 31.4639 40.7354 30.9814C41.2425 30.4867 41.4961 29.7568 41.4961 28.792V6.45215C41.4961 5.4873 41.2425 4.75749 40.7354 4.2627C40.2406 3.7679 39.5355 3.52051 38.6201 3.52051H6.59473C5.66699 3.52051 4.95573 3.7679 4.46094 4.2627C3.96615 4.75749 3.71875 5.4873 3.71875 6.45215V28.792C3.71875 29.7568 3.96615 30.4867 4.46094 30.9814C4.95573 31.4639 5.66699 31.7051 6.59473 31.7051Z",fill:"#2E98EA"}),(0,A.jsx)("circle",{cx:"43.5",cy:"30.5",r:"1.5",fill:"white"}),(0,A.jsxs)("mask",{id:"path-3-outside-1_446_28461",maskUnits:"userSpaceOnUse",x:"28",y:"20",width:"29",height:"21",fill:"black",children:[(0,A.jsx)("rect",{fill:"white",x:"28",y:"20",width:"29",height:"21"}),(0,A.jsx)("path",{d:"M42.4297 37.1562C41.3672 37.1562 40.3646 37.026 39.4219 36.7656C38.4844 36.5104 37.6198 36.1719 36.8281 35.75C36.0365 35.3281 35.3255 34.8646 34.6953 34.3594C34.0703 33.849 33.5365 33.3385 33.0938 32.8281C32.6562 32.3177 32.3229 31.8464 32.0938 31.4141C31.8646 30.9818 31.75 30.6328 31.75 30.3672C31.75 30.1068 31.8646 29.7604 32.0938 29.3281C32.3229 28.8958 32.6562 28.4245 33.0938 27.9141C33.5365 27.4036 34.0703 26.8958 34.6953 26.3906C35.3255 25.8802 36.0365 25.4141 36.8281 24.9922C37.6198 24.5703 38.4844 24.2318 39.4219 23.9766C40.3646 23.7214 41.3672 23.5938 42.4297 23.5938C43.5078 23.5938 44.5182 23.7214 45.4609 23.9766C46.4089 24.2318 47.2786 24.5703 48.0703 24.9922C48.8672 25.4141 49.5755 25.8802 50.1953 26.3906C50.8203 26.8958 51.349 27.4036 51.7812 27.9141C52.2188 28.4245 52.5521 28.8958 52.7812 29.3281C53.0104 29.7604 53.125 30.1068 53.125 30.3672C53.125 30.6328 53.0104 30.9818 52.7812 31.4141C52.5521 31.8464 52.2188 32.3177 51.7812 32.8281C51.349 33.3385 50.8229 33.849 50.2031 34.3594C49.5833 34.8646 48.875 35.3281 48.0781 35.75C47.2865 36.1719 46.4167 36.5104 45.4688 36.7656C44.5208 37.026 43.5078 37.1562 42.4297 37.1562ZM42.4375 34.5C43.0104 34.5 43.5469 34.3932 44.0469 34.1797C44.5521 33.9609 44.9948 33.6615 45.375 33.2812C45.7552 32.8958 46.0521 32.4557 46.2656 31.9609C46.4844 31.4661 46.5938 30.9375 46.5938 30.375C46.5938 29.7969 46.4844 29.2604 46.2656 28.7656C46.0521 28.2656 45.7552 27.8255 45.375 27.4453C44.9948 27.0651 44.5521 26.7708 44.0469 26.5625C43.5469 26.349 43.0104 26.2422 42.4375 26.2422C41.8646 26.2422 41.3255 26.349 40.8203 26.5625C40.3203 26.7708 39.8776 27.0651 39.4922 27.4453C39.112 27.8203 38.8151 28.2578 38.6016 28.7578C38.388 29.2578 38.2812 29.7969 38.2812 30.375C38.2812 30.9375 38.388 31.4661 38.6016 31.9609C38.8203 32.4557 39.1198 32.8958 39.5 33.2812C39.8802 33.6615 40.3203 33.9609 40.8203 34.1797C41.3255 34.3932 41.8646 34.5 42.4375 34.5ZM42.4297 32C41.9818 32 41.599 31.8411 41.2812 31.5234C40.9635 31.2057 40.8047 30.8255 40.8047 30.3828C40.8047 29.9349 40.9635 29.5521 41.2812 29.2344C41.599 28.9115 41.9818 28.75 42.4297 28.75C42.8828 28.75 43.2682 28.9115 43.5859 29.2344C43.9089 29.5521 44.0703 29.9349 44.0703 30.3828C44.0703 30.8255 43.9089 31.2057 43.5859 31.5234C43.2682 31.8411 42.8828 32 42.4297 32Z"})]}),(0,A.jsx)("path",{d:"M42.4297 37.1562C41.3672 37.1562 40.3646 37.026 39.4219 36.7656C38.4844 36.5104 37.6198 36.1719 36.8281 35.75C36.0365 35.3281 35.3255 34.8646 34.6953 34.3594C34.0703 33.849 33.5365 33.3385 33.0938 32.8281C32.6562 32.3177 32.3229 31.8464 32.0938 31.4141C31.8646 30.9818 31.75 30.6328 31.75 30.3672C31.75 30.1068 31.8646 29.7604 32.0938 29.3281C32.3229 28.8958 32.6562 28.4245 33.0938 27.9141C33.5365 27.4036 34.0703 26.8958 34.6953 26.3906C35.3255 25.8802 36.0365 25.4141 36.8281 24.9922C37.6198 24.5703 38.4844 24.2318 39.4219 23.9766C40.3646 23.7214 41.3672 23.5938 42.4297 23.5938C43.5078 23.5938 44.5182 23.7214 45.4609 23.9766C46.4089 24.2318 47.2786 24.5703 48.0703 24.9922C48.8672 25.4141 49.5755 25.8802 50.1953 26.3906C50.8203 26.8958 51.349 27.4036 51.7812 27.9141C52.2188 28.4245 52.5521 28.8958 52.7812 29.3281C53.0104 29.7604 53.125 30.1068 53.125 30.3672C53.125 30.6328 53.0104 30.9818 52.7812 31.4141C52.5521 31.8464 52.2188 32.3177 51.7812 32.8281C51.349 33.3385 50.8229 33.849 50.2031 34.3594C49.5833 34.8646 48.875 35.3281 48.0781 35.75C47.2865 36.1719 46.4167 36.5104 45.4688 36.7656C44.5208 37.026 43.5078 37.1562 42.4297 37.1562ZM42.4375 34.5C43.0104 34.5 43.5469 34.3932 44.0469 34.1797C44.5521 33.9609 44.9948 33.6615 45.375 33.2812C45.7552 32.8958 46.0521 32.4557 46.2656 31.9609C46.4844 31.4661 46.5938 30.9375 46.5938 30.375C46.5938 29.7969 46.4844 29.2604 46.2656 28.7656C46.0521 28.2656 45.7552 27.8255 45.375 27.4453C44.9948 27.0651 44.5521 26.7708 44.0469 26.5625C43.5469 26.349 43.0104 26.2422 42.4375 26.2422C41.8646 26.2422 41.3255 26.349 40.8203 26.5625C40.3203 26.7708 39.8776 27.0651 39.4922 27.4453C39.112 27.8203 38.8151 28.2578 38.6016 28.7578C38.388 29.2578 38.2812 29.7969 38.2812 30.375C38.2812 30.9375 38.388 31.4661 38.6016 31.9609C38.8203 32.4557 39.1198 32.8958 39.5 33.2812C39.8802 33.6615 40.3203 33.9609 40.8203 34.1797C41.3255 34.3932 41.8646 34.5 42.4375 34.5ZM42.4297 32C41.9818 32 41.599 31.8411 41.2812 31.5234C40.9635 31.2057 40.8047 30.8255 40.8047 30.3828C40.8047 29.9349 40.9635 29.5521 41.2812 29.2344C41.599 28.9115 41.9818 28.75 42.4297 28.75C42.8828 28.75 43.2682 28.9115 43.5859 29.2344C43.9089 29.5521 44.0703 29.9349 44.0703 30.3828C44.0703 30.8255 43.9089 31.2057 43.5859 31.5234C43.2682 31.8411 42.8828 32 42.4297 32Z",fill:"#2E98EA"}),(0,A.jsx)("path",{d:"M39.4219 36.7656L40.2207 33.8739L40.2099 33.871L39.4219 36.7656ZM34.6953 34.3594L32.7977 36.683L32.8083 36.6916L32.8189 36.7001L34.6953 34.3594ZM33.0938 32.8281L30.816 34.7805L30.8217 34.7872L30.8274 34.7938L33.0938 32.8281ZM33.0938 27.9141L30.8274 25.9484L30.8217 25.955L30.816 25.9617L33.0938 27.9141ZM34.6953 26.3906L36.5812 28.7237L36.5835 28.7219L34.6953 26.3906ZM39.4219 23.9766L38.6379 21.0808L38.6339 21.0819L39.4219 23.9766ZM45.4609 23.9766L44.677 26.8723L44.681 26.8734L45.4609 23.9766ZM48.0703 24.9922L46.6594 27.6397L46.6666 27.6436L48.0703 24.9922ZM50.1953 26.3906L48.2882 28.7064L48.2988 28.7151L48.3094 28.7237L50.1953 26.3906ZM51.7812 27.9141L49.492 29.8529L49.4977 29.8597L49.5035 29.8664L51.7812 27.9141ZM51.7812 32.8281L49.5035 30.8758L49.4977 30.8825L49.492 30.8893L51.7812 32.8281ZM50.2031 34.3594L52.0986 36.6847L52.1044 36.68L52.1102 36.6752L50.2031 34.3594ZM48.0781 35.75L46.6745 33.0986L46.6673 33.1025L48.0781 35.75ZM45.4688 36.7656L44.6888 33.8688L44.6814 33.8708L44.674 33.8728L45.4688 36.7656ZM44.0469 34.1797L45.2252 36.9386L45.232 36.9357L45.2389 36.9327L44.0469 34.1797ZM45.375 33.2812L47.4963 35.4026L47.5035 35.3954L47.5107 35.3881L45.375 33.2812ZM46.2656 31.9609L43.5218 30.7479L43.5165 30.76L43.5112 30.7722L46.2656 31.9609ZM46.2656 28.7656L43.5067 29.9439L43.5141 29.9613L43.5218 29.9787L46.2656 28.7656ZM44.0469 26.5625L42.8686 29.3214L42.8858 29.3288L42.9032 29.3359L44.0469 26.5625ZM40.8203 26.5625L41.9742 29.3317L41.9812 29.3288L41.9883 29.3258L40.8203 26.5625ZM39.4922 27.4453L41.5988 29.5812L41.599 29.581L39.4922 27.4453ZM38.6016 31.9609L35.8471 33.1497L35.8524 33.1619L35.8578 33.174L38.6016 31.9609ZM39.5 33.2812L37.3643 35.3881L37.3715 35.3954L37.3787 35.4026L39.5 33.2812ZM40.8203 34.1797L39.6179 36.9282L39.635 36.9357L39.6523 36.943L40.8203 34.1797ZM41.2812 29.2344L43.4026 31.3557L43.4112 31.3471L43.4197 31.3384L41.2812 29.2344ZM43.5859 29.2344L41.4474 31.3384L41.4645 31.3558L41.4819 31.3729L43.5859 29.2344ZM43.5859 31.5234L41.4819 29.3849L41.4732 29.3935L41.4646 29.4021L43.5859 31.5234ZM42.4297 34.1562C41.614 34.1562 40.8818 34.0566 40.2207 33.8739L38.6231 39.6573C39.8473 39.9955 41.1204 40.1562 42.4297 40.1562V34.1562ZM40.2099 33.871C39.4708 33.6698 38.8173 33.4106 38.239 33.1025L35.4173 38.3975C36.4223 38.9331 37.4979 39.3511 38.6339 39.6603L40.2099 33.871ZM38.239 33.1025C37.5939 32.7587 37.0417 32.3954 36.5718 32.0187L32.8189 36.7001C33.6093 37.3338 34.479 37.8976 35.4173 38.3975L38.239 33.1025ZM36.5929 32.0358C36.0761 31.6137 35.6712 31.2212 35.3601 30.8625L30.8274 34.7938C31.4017 35.4559 32.0645 36.0842 32.7977 36.683L36.5929 32.0358ZM35.3715 30.8758C35.0287 30.4758 34.8394 30.1883 34.7443 30.0089L29.4432 32.8192C29.8064 33.5044 30.2838 34.1596 30.816 34.7805L35.3715 30.8758ZM34.7443 30.0089C34.685 29.8971 34.6762 29.8619 34.6862 29.8922C34.6921 29.9101 34.7068 29.958 34.7207 30.0322C34.7344 30.1058 34.75 30.2202 34.75 30.3672H28.75C28.75 31.3807 29.1474 32.2612 29.4432 32.8192L34.7443 30.0089ZM34.75 30.3672C34.75 30.5194 34.7335 30.6375 34.7194 30.7124C34.7051 30.7881 34.69 30.8367 34.6841 30.8544C34.6743 30.8841 34.6837 30.8476 34.7443 30.7333L29.4432 27.923C29.153 28.4704 28.75 29.3524 28.75 30.3672H34.75ZM34.7443 30.7333C34.8394 30.5539 35.0287 30.2664 35.3715 29.8664L30.816 25.9617C30.2838 26.5826 29.8064 27.2378 29.4432 27.923L34.7443 30.7333ZM35.3601 29.8797C35.6678 29.525 36.0687 29.1381 36.5812 28.7237L32.8094 24.0575C32.072 24.6536 31.4052 25.2823 30.8274 25.9484L35.3601 29.8797ZM36.5835 28.7219C37.0503 28.3438 37.5986 27.981 38.239 27.6397L35.4173 22.3446C34.4743 22.8471 33.6007 23.4166 32.8072 24.0593L36.5835 28.7219ZM38.239 27.6397C38.8173 27.3315 39.4708 27.0724 40.2099 26.8712L38.6339 21.0819C37.4979 21.3911 36.4223 21.8091 35.4173 22.3446L38.239 27.6397ZM40.2058 26.8723C40.8716 26.6921 41.6089 26.5938 42.4297 26.5938V20.5938C41.1255 20.5938 39.8576 20.7506 38.6379 21.0808L40.2058 26.8723ZM42.4297 26.5938C43.2702 26.5938 44.0148 26.6931 44.677 26.8723L46.2449 21.0808C45.0217 20.7497 43.7454 20.5938 42.4297 20.5938V26.5938ZM44.681 26.8734C45.4302 27.0751 46.0858 27.334 46.6595 27.6397L49.4812 22.3446C48.4715 21.8066 47.3875 21.3884 46.2409 21.0797L44.681 26.8734ZM46.6666 27.6436C47.3063 27.9822 47.8422 28.3391 48.2882 28.7064L52.1024 24.0748C51.3089 23.4213 50.4281 22.8459 49.474 22.3408L46.6666 27.6436ZM48.3094 28.7237C48.8161 29.1333 49.2029 29.5116 49.492 29.8529L54.0705 25.9752C53.495 25.2957 52.8245 24.6584 52.0812 24.0575L48.3094 28.7237ZM49.5035 29.8664C49.8463 30.2664 50.0356 30.5539 50.1307 30.7333L55.4318 27.923C55.0686 27.2378 54.5912 26.5826 54.059 25.9617L49.5035 29.8664ZM50.1307 30.7333C50.1913 30.8476 50.2007 30.8841 50.1909 30.8544C50.185 30.8367 50.1699 30.7881 50.1556 30.7124C50.1415 30.6375 50.125 30.5194 50.125 30.3672H56.125C56.125 29.3524 55.722 28.4704 55.4318 27.923L50.1307 30.7333ZM50.125 30.3672C50.125 30.2202 50.1406 30.1058 50.1543 30.0322C50.1682 29.958 50.1829 29.9101 50.1888 29.8922C50.1988 29.8619 50.19 29.8971 50.1307 30.0089L55.4318 32.8192C55.7276 32.2612 56.125 31.3807 56.125 30.3672H50.125ZM50.1307 30.0089C50.0356 30.1883 49.8463 30.4758 49.5035 30.8758L54.059 34.7805C54.5912 34.1596 55.0686 33.5044 55.4318 32.8192L50.1307 30.0089ZM49.492 30.8893C49.1958 31.2389 48.8039 31.6253 48.296 32.0436L52.1102 36.6752C52.8419 36.0726 53.5021 35.4381 54.0705 34.767L49.492 30.8893ZM48.3077 32.034C47.8586 32.4001 47.3188 32.7575 46.6745 33.0986L49.4818 38.4014C50.4312 37.8987 51.3081 37.3291 52.0986 36.6847L48.3077 32.034ZM46.6673 33.1025C46.0936 33.4082 45.4381 33.6671 44.6888 33.8688L46.2487 39.6625C47.3953 39.3538 48.4793 38.9356 49.489 38.3975L46.6673 33.1025ZM44.674 33.8728C44.0087 34.0556 43.265 34.1562 42.4297 34.1562V40.1562C43.7506 40.1562 45.033 39.9965 46.2635 39.6584L44.674 33.8728ZM42.4375 37.5C43.3933 37.5 44.3329 37.3197 45.2252 36.9386L42.8686 31.4208C42.7609 31.4668 42.6276 31.5 42.4375 31.5V37.5ZM45.2389 36.9327C46.0824 36.5675 46.8425 36.0564 47.4963 35.4026L43.2537 31.1599C43.1471 31.2665 43.0217 31.3544 42.8548 31.4267L45.2389 36.9327ZM47.5107 35.3881C48.1511 34.7389 48.6583 33.9879 49.0201 33.1497L43.5112 30.7722C43.4459 30.9236 43.3593 31.0527 43.2393 31.1744L47.5107 35.3881ZM49.0094 33.174C49.4039 32.2819 49.5938 31.3383 49.5938 30.375H43.5938C43.5938 30.5367 43.5649 30.6504 43.5218 30.7479L49.0094 33.174ZM49.5938 30.375C49.5938 29.4082 49.4085 28.4552 49.0094 27.5526L43.5218 29.9787C43.5602 30.0656 43.5938 30.1855 43.5938 30.375H49.5938ZM49.0245 27.5873C48.6623 26.7392 48.1504 25.978 47.4963 25.324L43.2537 29.5666C43.36 29.673 43.4418 29.792 43.5067 29.9439L49.0245 27.5873ZM47.4963 25.324C46.8318 24.6594 46.0553 24.1457 45.1906 23.7891L42.9032 29.3359C43.0488 29.396 43.1578 29.4708 43.2537 29.5666L47.4963 25.324ZM45.2252 23.8036C44.3329 23.4225 43.3933 23.2422 42.4375 23.2422V29.2422C42.6276 29.2422 42.7609 29.2754 42.8686 29.3214L45.2252 23.8036ZM42.4375 23.2422C41.4816 23.2422 40.5435 23.4225 39.6523 23.7992L41.9883 29.3258C42.1075 29.2754 42.2476 29.2422 42.4375 29.2422V23.2422ZM39.6665 23.7933C38.8113 24.1496 38.045 24.6589 37.3853 25.3096L41.599 29.581C41.7102 29.4713 41.8293 29.3921 41.9742 29.3317L39.6665 23.7933ZM37.3855 25.3094C36.7227 25.9632 36.2065 26.7276 35.8426 27.5795L41.3605 29.9361C41.4237 29.788 41.5013 29.6774 41.5988 29.5812L37.3855 25.3094ZM35.8426 27.5795C35.4601 28.4752 35.2812 29.4179 35.2812 30.375H41.2812C41.2812 30.1758 41.3159 30.0404 41.3605 29.9361L35.8426 27.5795ZM35.2812 30.375C35.2812 31.3281 35.4645 32.2631 35.8471 33.1497L41.356 30.7722C41.3115 30.6692 41.2812 30.5469 41.2812 30.375H35.2812ZM35.8578 33.174C36.2235 34.0013 36.7291 34.7442 37.3643 35.3881L41.6357 31.1744C41.5105 31.0474 41.4171 30.9101 41.3454 30.7479L35.8578 33.174ZM37.3787 35.4026C38.0274 36.0513 38.7804 36.5618 39.6179 36.9282L42.0228 31.4312C41.8602 31.3601 41.733 31.2716 41.6213 31.1599L37.3787 35.4026ZM39.6523 36.943C40.5435 37.3197 41.4816 37.5 42.4375 37.5V31.5C42.2476 31.5 42.1075 31.4668 41.9883 31.4164L39.6523 36.943ZM42.4297 29C42.5682 29 42.7548 29.0263 42.9565 29.11C43.1579 29.1935 43.3069 29.3064 43.4026 29.4021L39.1599 33.6448C40.0383 34.5231 41.1833 35 42.4297 35V29ZM43.4026 29.4021C43.495 29.4945 43.6076 29.6415 43.6919 29.8435C43.7767 30.0463 43.8047 30.237 43.8047 30.3828H37.8047C37.8047 31.6344 38.289 32.7739 39.1599 33.6448L43.4026 29.4021ZM43.8047 30.3828C43.8047 30.5213 43.7784 30.708 43.6947 30.9096C43.6111 31.111 43.4983 31.26 43.4026 31.3557L39.1599 27.1131C38.2816 27.9914 37.8047 29.1365 37.8047 30.3828H43.8047ZM43.4197 31.3384C43.3263 31.4333 43.1774 31.5489 42.9725 31.6353C42.7669 31.722 42.5746 31.75 42.4297 31.75V25.75C41.1674 25.75 40.0172 26.2416 39.1428 27.1304L43.4197 31.3384ZM42.4297 31.75C42.2921 31.75 42.1038 31.7237 41.8994 31.6381C41.695 31.5525 41.5441 31.4367 41.4474 31.3384L45.7244 27.1304C44.8426 26.2341 43.6867 25.75 42.4297 25.75V31.75ZM41.4819 31.3729C41.387 31.2795 41.2715 31.1305 41.185 30.9256C41.0983 30.72 41.0703 30.5277 41.0703 30.3828H47.0703C47.0703 29.1206 46.5787 27.9703 45.6899 27.0959L41.4819 31.3729ZM41.0703 30.3828C41.0703 30.2305 41.1001 30.0342 41.1879 29.8274C41.2751 29.622 41.3903 29.4751 41.4819 29.3849L45.6899 33.6619C46.5711 32.795 47.0703 31.6504 47.0703 30.3828H41.0703ZM41.4646 29.4021C41.5636 29.3031 41.7145 29.19 41.9154 29.1072C42.1158 29.0246 42.2984 29 42.4297 29V35C43.6709 35 44.8216 34.5304 45.7073 33.6448L41.4646 29.4021Z",fill:"white",mask:"url(#path-3-outside-1_446_28461)"})]})});var ra=()=>a(710149);const na={views:null,downloads:null};function oa(e){const t=(0,r().v3)(),a=jt(),i=(0,n().K8)((()=>{const{currentUserStore:e}=b().default.state;return null==e?void 0:e.id}),[]),[{value:s,status:c}]=(0,l().Yb)((async()=>{if(!i)return{metrics:na,lastUpdated:void 0};const e=await x().callApi({eventName:"getMarketplaceMetricSummary",environment:t,data:{metrics:["views","downloads"],sources:a.filtersConfig.sources,dateRange:a.filtersConfig.dateRange}});return"success"===e.type&&e.data.success?e.data:{metrics:na,lastUpdated:void 0}}),[i,t,a.filtersConfig]),u="resolved"===c?s.metrics:na,p=(0,d().tz)(),g=e.product,{isMobileWidth:f}=(0,m().LS)(),h=function(e){return(0,o().IS)((t=>({shimmer:{height:"100%",width:"100%"},container:{display:"flex",gap:24,...e?{flexDirection:"column"}:{}},metricTitle:{fontSize:16,fontWeight:L().Wy.medium},header:{fontSize:24,lineHeight:"30px",fontWeight:L().Wy.semibold,marginBottom:4},subheader:{display:"flex",justifyContent:"space-between"},metricContainer:{border:"1px solid rgba(17, 17, 17, 0.1)",borderRadius:6,display:"flex",alignItems:"center",...e?{height:78,width:"100%",justifyContent:"space-between",paddingLeft:20,paddingRight:20}:{height:180,width:304,justifyContent:"center",flexDirection:"column"},gap:8},viewValue:{color:"rgba(46, 152, 234, 1)",fontSize:e?32:42,fontWeight:L().Wy.semibold},metricValue:{display:"flex",alignItems:"center",gap:6},viewIcon:{color:"rgba(46, 152, 234, 0.5)"},downloadValue:{color:"rgba(231, 181, 51, 1)",fontSize:e?32:42,fontWeight:L().Wy.semibold},downloadIcon:{color:"rgba(231, 181, 51, 0.5)"}})),[e])}(f);return(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{style:h.header,children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.template.header",defaultMessage:"Top line Metrics"})}),(0,A.jsxs)("div",{style:h.subheader,children:[(0,A.jsx)(Nt,{filtersConfig:a.filtersConfig,onDateRangeChange:a.onDateRangeChange,onSourceChange:a.onSourceChange}),(0,A.jsx)(qt,{value:null==s?void 0:s.lastUpdated})]}),(0,A.jsx)(Ce().A,{size:16}),(0,A.jsxs)("div",{style:h.container,children:[(0,A.jsx)("div",{style:h.metricContainer,children:"pending"===c?(0,A.jsx)(ra().A,{style:h.shimmer}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:h.metricTitle,children:g?p.formatMessage(sa[g].views):(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.topLineMetrics.views",defaultMessage:"All product views"})}),null!=u&&u.views?(0,A.jsxs)("div",{style:h.metricValue,children:[(0,A.jsx)("div",{style:h.viewIcon,children:(0,A.jsx)(we().Q,{iconGroup:ea,variantName:"large"})}),(0,A.jsx)("div",{style:h.viewValue,children:(0,A.jsx)(d().Gr,{value:u.views,maximumFractionDigits:2,...u.views>9999?{notation:"compact"}:{}})})]}):(0,A.jsx)("div",{children:ia({width:54,height:40})})]})}),(0,A.jsx)("div",{style:h.metricContainer,children:"pending"===c?(0,A.jsx)(ra().A,{style:h.shimmer}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:h.metricTitle,children:g?p.formatMessage(sa[g].downloads):(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.topLineMetrics.downloads",defaultMessage:"All product downloads"})}),null!=u&&u.downloads?(0,A.jsxs)("div",{style:h.metricValue,children:[(0,A.jsx)("div",{style:h.downloadIcon,children:(0,A.jsx)(we().Q,{iconGroup:ta,variantName:"large"})}),(0,A.jsx)("div",{style:h.downloadValue,children:(0,A.jsx)(d().Gr,{value:u.downloads,maximumFractionDigits:2,...u.downloads>9999?{notation:"compact"}:{}})})]}):(0,A.jsx)("div",{children:aa({width:54,height:40})})]})})]})]})}const sa={template:(0,d().YK)({views:{id:"creatorProfile.analytics.topLineMetrics.templates.views",defaultMessage:"All template views"},downloads:{id:"creatorProfile.analytics.topLineMetrics.templates.downloads",defaultMessage:"All template downloads"}})};function la(){const e=(0,o().IS)((()=>({header:{fontSize:24,lineHeight:"30px",fontWeight:L().Wy.semibold,marginBottom:4}})),[]),{isFeatureEnabled:t}=(0,pt().O)("marketplace_analytics_templates_chart");return(0,A.jsxs)("div",{children:[(0,A.jsx)(oa,{}),(0,A.jsx)(Kt,{}),t&&(0,A.jsx)(Qt,{header:(0,A.jsx)("div",{style:e.header,children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.templateAnalytics.topTemplates.header",defaultMessage:"Top 5 templates"})}),sortBy:"downloads",limit:5,shouldShowPaidFilter:!1})]})}function da(){var e,t;const a=(0,r().v3)(),i=(0,d().tz)(),s=jt(),c=(0,n().K8)((()=>{const{currentUserStore:e}=b().default.state;return null==e?void 0:e.id}),[]),[{status:u,value:p}]=(0,l().Yb)((async()=>{if(!c)return{timeseriesData:[],lastUpdated:void 0};const e=await x().callApi({eventName:"getMarketplaceMetrics",environment:a,data:{metrics:["downloads"],sources:s.filtersConfig.sources,dateRange:s.filtersConfig.dateRange,by:s.filtersConfig.templateListingId?"templateDate":"date",templateListingId:s.filtersConfig.templateListingId}});if("success"===e.type&&zt(e.data)){const t=e.data;return{webTimeseriesData:t.metrics.map((e=>({x:new Date(e.ds).getTime(),y:e.downloads_web_1d,name:i.formatMessage(ca.loggedOut)}))),appTimeseriesData:t.metrics.map((e=>({x:new Date(e.ds).getTime(),y:e.downloads_app_1d,name:i.formatMessage(ca.loggedIn)}))),lastUpdated:e.data.lastUpdated}}return{webTimeseriesData:[],appTimeseriesData:[],lastUpdated:void 0}}),[c,a,i,s.filtersConfig]),g=(0,n().uB)(void 0,bt().A),m=(0,o().IS)((e=>({header:{fontSize:24,lineHeight:"30px",fontWeight:L().Wy.semibold,marginBottom:4},filters:{fontSize:15,lineHeight:"22px",margin:0,fontWeight:L().Wy.semibold},subheader:{display:"flex",justifyContent:"space-between"},container:{marginTop:72}})),[]),f=Ot();return(0,A.jsxs)("div",{style:m.container,children:[(0,A.jsx)("div",{style:m.header,children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.templateDownloads.header",defaultMessage:"Template downloads"})}),(0,A.jsxs)("div",{style:m.subheader,children:[(0,A.jsx)(Nt,{filtersConfig:s.filtersConfig,onDateRangeChange:s.onDateRangeChange,onSourceChange:s.onSourceChange,shouldShowTemplateFilter:!0,onTemplateChange:s.onTemplateListingIdChange}),(0,A.jsx)(qt,{value:null==p?void 0:p.lastUpdated})]}),(0,A.jsx)(ht().Z,{value:g,children:(0,A.jsx)(mt().AxisChart,{tooltipOptions:f,onLoadEventHandler:()=>{},seriesData:[{name:i.formatMessage(ca.loggedOut),type:"area",fillColor:"rgba(0, 0, 0, 0)",color:"rgba(165, 121, 217, 1)",data:(null==p?void 0:p.webTimeseriesData)??[]},{name:i.formatMessage(ca.loggedIn),type:"area",fillColor:"rgba(0, 0, 0, 0)",color:"rgba(234, 139, 66, 1)",data:(null==p?void 0:p.appTimeseriesData)??[]}],xAxisType:"datetime",showHorizontalGridLines:!0,xAxisTitle:i.formatMessage(ca.date),yAxisTitle:i.formatMessage(ca.downloads),yLabelFormatter:e=>(0,gt().ZV)(e,e>9999?"compact":"number",i),timezone:"UTC",xLabelFormatter:e=>new Date(e).toLocaleDateString(i.locale,{month:"numeric",day:"numeric",timeZone:"UTC"}),axisType:"line",dataLabelsEnabled:!1,loadingProps:{isInitialLoading:"pending"===u,isThrottledLoading:"pending"===u,initialLoadingSvg:()=>(0,A.jsx)(ft().z,{chartType:"line",showCopy:!1})},hasData:"resolved"===u&&(((null==p||null===(e=p.webTimeseriesData)||void 0===e?void 0:e.length)??0)>0||((null==p||null===(t=p.appTimeseriesData)||void 0===t?void 0:t.length)??0)>0)})})]})}const ca=(0,d().YK)({loggedOut:{id:"creatorProfile.analytics.templateDownloads.loggedOout",defaultMessage:"Logged-out"},loggedIn:{id:"creatorProfile.analytics.templateDownloads.loggedIn",defaultMessage:"Logged-in"},date:{id:"creatorProfile.analytics.templateDownloads.dateInfoLabel",defaultMessage:"Date"},downloads:{id:"creatorProfile.analytics.templateDownloads.downloads",defaultMessage:"Downloads"}});function ua(){const e=(0,o().IS)((()=>({header:{fontSize:24,lineHeight:"30px",fontWeight:L().Wy.semibold,marginBottom:4}})),[]),{isFeatureEnabled:t}=(0,pt().O)("marketplace_analytics_templates_chart");return(0,A.jsxs)("div",{children:[(0,A.jsx)(oa,{product:"template"}),t&&(0,A.jsx)(da,{}),(0,A.jsx)(Qt,{header:(0,A.jsx)("div",{style:e.header,children:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.templateAnalytics.allTemplates.header",defaultMessage:"All Templates"})})})]})}function pa(e){const{creatorId:t}=e,{setView:a}=Ze(),r=(0,o().IS)((e=>({creatorProfileTemplatesEmptyStateHeader:{fontSize:24,color:e.text.primary,fontWeight:L().Wy.semibold},creatorProfileTemplatesEmptyStateDescription:{fontSize:15,color:e.text.secondary}})),[]),{isMobileWidth:n}=(0,m().LS)(),[s,l]=(0,i.useState)("overview");return(0,A.jsxs)("div",{children:[(0,A.jsx)(De().y,{size:"large",header:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.pageHeader",defaultMessage:"Analytics"}),subHeader:(0,A.jsx)(d().sA,{id:"creatorProfile.analytics.pageHeaderSubtitle",defaultMessage:"Insights to help you track, analyze, and optimize your content."})}),null==t?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Ce().A,{size:24}),(0,A.jsx)(Te,{showCreatorProfileForm:()=>{Ae.setState({profileFormType:"create"}),a("/profile")},header:(0,A.jsx)("div",{style:r.creatorProfileTemplatesEmptyStateHeader,children:(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.analytics.header",defaultMessage:"Create a Creator Profile"})}),description:(0,A.jsx)("div",{style:r.creatorProfileTemplatesEmptyStateDescription,children:(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.analytics.description",defaultMessage:"A Creator Profile is required to submit, manage, and analyze Notion templates."})})})]}):n?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(ct,{}),(0,A.jsx)(ma,{selectedSection:s,onSectionChange:e=>l(e)})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(ct,{}),(0,A.jsx)(ga,{selectedSection:s,onSectionChange:e=>l(e)})]})]})}function ga(e){const t=(0,d().tz)(),{selectedSection:a,onSectionChange:i}=e;return(0,A.jsx)(Le,{style:{marginBottom:40},tabs:[{title:t.formatMessage(fa.overview),content:(0,A.jsx)(la,{}),onChange:()=>{i("overview")}},{title:t.formatMessage(fa.templates),content:(0,A.jsx)(ua,{}),onChange:()=>{i("templates")}}],defaultSelectedIndex:"overview"===a?0:1})}function ma(e){const{selectedSection:t,onSectionChange:a}=e,n=(0,r().v3)(),[s,l]=(0,i.useState)(!1),c=(0,d().tz)(),u=(0,i.useMemo)((()=>function(e){return[{value:"overview",label:e.formatMessage(fa.overviewLabel)},{value:"templates",label:e.formatMessage(fa.templateLabel)}]}(c)),[c]),p=(0,o().IS)((e=>({dropdownButton:{width:"100%",border:"1px solid rgba(0, 0, 0, 0.08)",padding:"8px 16px",borderRadius:4,marginBottom:40,display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:15,fontWeight:455}})),[]);return(0,A.jsxs)("div",{children:[(0,A.jsx)(ye().Ay,{open:s,onClick:()=>{l(!0)},renderOrigin:e=>{var a;let{onClick:i}=e;return(0,A.jsxs)(ve().A,{style:p.dropdownButton,role:"select",onClick:i,children:[null===(a=u.find((e=>e.value===t)))||void 0===a?void 0:a.label,(0,A.jsx)(we().Q,{colorName:"tertiary",iconGroup:be().I,variantName:"small"})]})},popupType:n.device.isMobile?ye().z7.SlideUp:ye().z7.Popup,render:()=>(0,A.jsx)(xe().A,{menuType:je().gu.ActionSheet,children:u.map((e=>(0,A.jsx)(Se().Ay,{title:e.label,onClick:()=>{l(!1),a(e.value)}},e.value)))})}),"overview"===t&&(0,A.jsx)(la,{}),"templates"===t&&(0,A.jsx)(ua,{})]})}const fa=(0,d().YK)({overview:{id:"creatorProfile.analytics.tabs.analytics.overview",defaultMessage:"Overview"},templates:{id:"creatorProfile.analytics.tabs.analytics.templates",defaultMessage:"Templates"},overviewLabel:{id:"creatorProfile.analytics.dropdown.overview",defaultMessage:"Overview"},templateLabel:{id:"creatorProfile.analytics.dropdown.templates",defaultMessage:"Templates"}});var ha=()=>a(719147),ba=()=>a(21140),va=()=>a(836251);function ya(){const e=(0,fe().x)();return"completed"===(null==e?void 0:e.stripe_connect_onboarding_phase)}var xa=()=>a(983125),Sa=()=>a(197190);function wa(e){const{displayName:t,hideProfile:a}=e,{name:i=""}=Ze(),r=function(e){const t=e.split("/"),a=[];for(const i of t)if(i in Ma){const e=Ma[i];a.push(e)}return a}(i),n=function(e){const t=e.split("/");for(const a of t)try{if("number"==typeof parseInt(a,10))return a}catch{}}(i),o=ja();return a&&r.shift(),(0,A.jsx)("ul",{style:o.crumbContainer,children:r.map(((e,a)=>(0,A.jsx)(Ca,{isLast:a===r.length-1,value:e.value(n),display:e.display(t)},e.value(n))))})}function Ca(e){const{isLast:t,value:a,display:i}=e,{setView:r}=Ze(),n=ja();return t?(0,A.jsx)("li",{style:n.activeCrumb,children:i},a):(0,A.jsxs)("li",{style:n.crumb,children:[(0,A.jsx)(Sa().A,{onClick:()=>a?r(a):null,style:n.crumbButton,hoveredStyle:n.crumbButton,children:i}),(0,xa().d)({height:16,width:16,color:"rgba(17, 17, 17, 0.5)"})]},a)}function ja(){return(0,o().IS)((e=>({activeCrumb:{fontWeight:L().Wy.semibold,color:e.text.primary},crumb:{display:"flex",gap:"4px",alignItems:"center",fontWeight:L().Wy.semibold,color:"rgba(17, 17, 17, 0.5)"},crumbButton:{borderRadius:"4px",padding:"2px 8px"},crumbContainer:{listStyle:"none",display:"flex",gap:"12px",alignItems:"center",margin:0,padding:"0 0 12px 0"}})),[])}const Ma={"new-coupon":{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"New Coupon",id:"creatorProfile.breadcrumb.createCoupon"}),value:()=>"/profile/coupons/new-coupon"},edit:{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"Edit Coupon",id:"creatorProfile.breadcrumb.editCoupon"}),value:e=>`/profile/coupons/edit/${e}`},coupons:{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"Coupons",id:"creatorProfile.breadcrumb.coupons"}),value:()=>"/profile/coupons"},profile:{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"Profile",id:"creatorProfile.breadcrumb.profile"}),value:()=>"/profile"},templates:{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"Templates",id:"creatorProfile.breadcrumb.templates"}),value:()=>"/profile/templates"},faq:{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"Template Creator FAQ",id:"creatorProfile.breadcrumb.faq"}),value:()=>"/profile/templates/faq"},new:{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"New Template",id:"creatorProfile.breadcrumb.newTemplate"}),value:()=>"/profile/templates/form/new"},draft:{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"Edit Template",id:"creatorProfile.breadcrumb.editTemplate"}),value:e=>`/profile/templates/form/draft/${e}`},published:{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"Edit Template",id:"creatorProfile.breadcrumb.editTemplate"}),value:e=>`/profile/templates/form/published/${e}`},integrations:{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"Integrations",id:"creatorProfile.breadcrumb.viewIntegrations"}),value:()=>"/profile/integrations"},"new-integration":{display:()=>(0,A.jsx)(d().sA,{defaultMessage:"New Integration",id:"creatorProfile.breadcrumb.newIntegrationForm"}),value:()=>"/profile/integrations/form/new-integration"},public:{display:e=>e,value:e=>`/profile/integrations/public/${e}`},internal:{display:e=>e,value:e=>`/profile/integrations/internal/${e}`}};var _a=()=>a(953418);function Aa(e){const{route:t,children:a,exact:o,shouldRenderCallback:s}=e,{name:l}=Ze(),d=(null==l?void 0:l.split("/"))||[],c=t.split("/"),u=function(e,t){const{name:a}=Ze(),[o,s]=(0,i.useState)(null),l=(0,r().v3)(),d=Boolean(t);i.useEffect((()=>{async function e(e){if(!a)return!1;const t=await e(l,a);s(t)}t&&e(t)}),[t,a,e,l]);const c=(0,n().K8)((()=>!(d&&!o)||(!1===o?(Be().oo({environment:l,url:"/not-found",redirect:!0}),!1):null!==o&&void 0)),[o,l,d]);return c}(t,s);if(!u)return null;if(o&&l!==t)return null;for(const i of c)if(!d.includes(i))return null;return(0,A.jsx)(Ia,{children:a})}function Ia(e){return function(){const e=(0,r().v3)();i.useEffect((()=>{const t=document.getElementsByClassName("notion-scroller").item(0);t&&_a().VG({element:t,environment:e,options:{top:0,behavior:"smooth"}})}),[e])}(),(0,A.jsx)(A.Fragment,{children:e.children})}function ka(){const e=(0,o().IS)((e=>({creatorProfileCouponsEmptyStateHeader:{fontSize:24,color:e.text.primary,fontWeight:L().Wy.semibold},creatorProfileCouponsEmptyStateDescription:{fontSize:15,color:e.text.secondary}})),[]),{setView:t}=Ze();return(0,A.jsx)(Te,{showCreatorProfileForm:()=>{Ae.setState({profileFormType:"create"}),t("/profile")},header:(0,A.jsx)("div",{style:e.creatorProfileCouponsEmptyStateHeader,children:(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.coupons.header",defaultMessage:"Create a Creator Profile"})}),description:(0,A.jsx)("div",{style:e.creatorProfileCouponsEmptyStateDescription,children:(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.coupons.description",defaultMessage:"A Creator Profile is required to manage your coupons."})})})}var Ta=()=>a(388821),Pa=()=>a(374982);class La extends Me().Store{getInitialState(){return{activeCoupons:[],inactiveCoupons:[]}}}const Da=new La;async function Ea(e){let{environment:t}=e;const a=await x().callApi({eventName:"getCreatorCoupons",environment:t,data:{}});if("success"===a.type){const e=Ta().RecordMapWithRole.create(a.data.recordMap).getModelsByTable(Pa().QO),t=e.filter((e=>e.active)).sort(((e,t)=>e.created_time-t.created_time)),i=e.filter((e=>!e.active)).sort(((e,t)=>e.created_time-t.created_time));Da.setState({activeCoupons:t.map((e=>e.id)),inactiveCoupons:i.map((e=>e.id))})}}async function Ba(e){let{environment:t,couponId:a}=e;"success"===(await x().callApi({eventName:"deleteMarketplaceCoupon",environment:t,data:{couponId:a}})).type&&await Ea({environment:t})}async function Ra(e){let{environment:t,couponId:a,active:i}=e;const r=new(Bt().tT)(t,{table:Pa().QO,id:a});if(!r.canRead())return;const n=r.getModel();if(!n)return;const o=n.getStartTime()??0,s=n.getEndTime()??0;"success"===(await x().callApi({eventName:"createOrUpdateMarketplaceCoupon",environment:t,data:{id:a,active:i,discountType:n.getDiscount().type,discountValue:n.getDiscount().value,usageLimit:n.getCouponUsage().limit,applyToAll:n.getApplyToAll(),eligibleListingIds:n.getEligibleListingIds(),startDate:o,endDate:s}})).type&&await Ea({environment:t})}const Fa=(0,Fe().wt)("shop",{viewBox:"0 0 18 18",svg:(0,A.jsx)("path",{d:"M18 3V4.875C18 6.73875 16.4888 8.25 14.625 8.25C13.4513 8.25 12.4163 7.65 11.8125 6.73875C11.2087 7.65 10.1737 8.25 9 8.25C7.82625 8.25 6.79125 7.65 6.1875 6.73875C5.58375 7.65 4.54875 8.25 3.375 8.25C1.51125 8.25 0 6.73875 0 4.875V3L1.5 0H16.5L18 3ZM14.25 13.5H3.75V9.75H1.5V18H16.5V9.75H14.25V13.5Z"})}),Ua=(0,Fe().wt)("stripeLogo",{viewBox:"0 0 400 400",svg:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("rect",{width:"400",height:"400",rx:"62",fill:"#635bff"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#fff",d:"M184.4 155.5c0-9.4 7.7-13.1 20.5-13.1 18.4 0 41.6 5.6 60 15.5v-56.8C244.8 93.1 225 90 205 90c-49.1 0-81.7 25.6-81.7 68.4 0 66.7 91.9 56.1 91.9 84.9 0 11.1-9.7 14.7-23.2 14.7-20.1 0-45.7-8.2-66-19.3v57.5c22.5 9.7 45.2 13.8 66 13.8 50.3 0 84.9-24.9 84.9-68.2-.4-72-92.5-59.2-92.5-86.3z"})]})});var Na=()=>a(859428),za=()=>a(963589),Va=()=>a(231656);class Ha extends Me().Store{getInitialState(){return{isOpen:!1,isSubmitting:!1,formData:{otherNotionProducts:void 0,currentlySellTemplates:void 0,targetAudience:void 0,templateEarnings:void 0,communitiesAndCerts:void 0,otherCertifications:void 0,otherInfo:void 0,termsConditions:"false",businessLocation:void 0,"templateLinksValue-1":"","templateLinksValue-2":void 0,"templateLinksValue-3":void 0,"templateLinksValue-4":void 0,"templateLinksValue-5":void 0,"otherLinksValue-1":"","otherLinksValue-2":void 0,"otherLinksValue-3":void 0,"otherLinksValue-4":void 0,"otherLinksValue-5":void 0},errorMessages:{otherNotionProducts:void 0,currentlySellTemplates:void 0,targetAudience:void 0,templateEarnings:void 0,communitiesAndCerts:void 0,otherCertifications:void 0,otherInfo:void 0,termsConditions:void 0,businessLocation:void 0,"templateLinksValue-1":void 0,"templateLinksValue-2":void 0,"templateLinksValue-3":void 0,"templateLinksValue-4":void 0,"templateLinksValue-5":void 0,"otherLinksValue-1":void 0,"otherLinksValue-2":void 0,"otherLinksValue-3":void 0,"otherLinksValue-4":void 0,"otherLinksValue-5":void 0}}}}const Oa=new Ha,Wa=["currentlySellTemplates","otherNotionProducts","businessLocation"];function qa(e,t){Oa.setState({...Oa.state,formData:{...Oa.state.formData,[e]:t}})}function Ka(e,t){Oa.setState({...Oa.state,errorMessages:{...Oa.state.errorMessages,[e]:t}})}function Ga(e){Oa.setState({...Oa.state,errorMessages:{...Oa.state.errorMessages,[e]:void 0}})}function Za(e,t){const a=[];for(const i of["-1","-2","-3","-4","-5"]){const r=`${t}Value${i}`;void 0!==e[r]&&""!==e[r]&&a.push(e[r])}return a}async function $a(e){const{environment:t,intl:a}=e,i=Oa.state.formData,r=function(e,t){let a=!0;const i=e.formatMessage(Ya.fieldRequired);for(const r of Wa)void 0!==t[r]&&""!==t[r]||(Ka(r,i),a=!1);return"yes"===t.currentlySellTemplates?(void 0!==t["templateLinksValue-1"]&&""!==t["templateLinksValue-1"]||(Ka("templateLinksValue-1",i),a=!1),void 0!==t.templateEarnings&&""!==t.templateEarnings||(Ka("templateEarnings",i),a=!1)):"no"===t.currentlySellTemplates&&(void 0!==t.targetAudience&&""!==t.targetAudience||(Ka("targetAudience",i),a=!1)),void 0!==t["otherLinksValue-1"]&&""!==t["otherLinksValue-1"]||(Ka("otherLinksValue-1",i),a=!1),"true"!==t.termsConditions&&(Ka("termsConditions",e.formatMessage(Ya.termsConditionsRequired)),a=!1),a}(a,i);if(r){const e=Va().A.state.creatorId;if(!e)throw new Error("Template creator ID is missing");Oa.setState({...Oa.state,isSubmitting:!0}),await x().callApi({environment:t,eventName:"marketplaceSellerRequestAccess",data:{templateCreatorId:e,formData:{currentlySellTemplates:"yes"===i.currentlySellTemplates,existingTemplateLinks:Za(i,"templateLinks"),targetAudience:i.targetAudience,communitiesAndCerts:i.communitiesAndCerts,otherCertifications:i.otherCertifications,socialLinks:Za(i,"otherLinks"),otherInfo:i.otherInfo,templateEarnings:i.templateEarnings,sellOtherProducts:i.otherNotionProducts,businessLocation:i.businessLocation}}}),Oa.reset()}}const Ya=(0,d().YK)({fieldRequired:{id:"creatorProfile.seller.requestForm.fieldRequired",defaultMessage:"This field is required."},termsConditionsRequired:{id:"creatorProfile.seller.requestForm.termsConditionsRequired",defaultMessage:"You must agree to the terms and conditions."}});var Qa=()=>a(464708);function Ja(e){const{message:t,badgeContainerStyle:a,badgeTitleStyle:i}=e,r=(0,o().IS)((e=>({badgeContainer:{borderRadius:"20px",padding:"1px 8px",marginLeft:0,alignSelf:"inherit"},badgeTitle:{fontSize:"12px",fontWeight:L().Wy.semibold,textWrap:"nowrap"}})),[]),n={...r.badgeContainer,...a},s={...r.badgeTitle,...i};return(0,A.jsx)(Qa().A,{style:n,content:(0,A.jsx)("span",{style:s,children:t})})}var Xa=()=>a(556927),ei=()=>a(107683);class ti extends Me().Store{getInitialState(){return{name:"",handle:"",contactEmail:"",creatorDescription:"",links:Ht().Hn(5,Ht().dY("")),image:"",coverImage:"",webhookUrl:"",webhookUrlTested:!1,imageErrorMessage:void 0,nameErrorMessage:void 0,handleErrorMessage:void 0,contactEmailErrorMessage:void 0,creatorDescriptionErrorMessage:void 0,coverImageErrorMessage:void 0,webhookUrlErrorMessage:void 0,linksErrorMessage:Ht().Hn(5,Ht().dY(void 0)),contactEmailToggleError:!1,initialValues:{name:"",handle:"",contactEmail:"",creatorDescription:"",links:Ht().Hn(5,Ht().dY("")),image:"",coverImage:"",webhookUrl:"",webhookUrlTested:!1}}}}const ai=new ti,ii=(0,Fe().wt)("thoughtAlertCloud",{viewBox:"0 0 20 20",svg:(0,A.jsx)("path",{d:"M5.3125 16.0938C5.3125 16.8719 4.68438 17.5 3.90625 17.5C3.12812 17.5 2.5 16.8719 2.5 16.0938C2.5 15.3156 3.12812 14.6875 3.90625 14.6875C4.68438 14.6875 5.3125 15.3156 5.3125 16.0938ZM18.125 11.25C18.125 13.6656 16.1656 15.625 13.75 15.625C13.4375 15.625 13.1344 15.5906 12.8406 15.5281C12.0437 16.3562 10.9281 16.875 9.6875 16.875C7.70312 16.875 6.03125 15.5531 5.49375 13.7437C3.48438 13.675 1.875 12.0281 1.875 10C1.875 8.48125 2.77813 7.17812 4.07812 6.5875C4.22813 3.95937 6.4 1.875 9.0625 1.875C10.4469 1.875 11.6969 2.4375 12.6031 3.34375C12.9594 3.20312 13.3438 3.125 13.75 3.125C15.475 3.125 16.875 4.525 16.875 6.25C16.875 6.82188 16.7188 7.35313 16.4531 7.8125C17.4688 8.6125 18.125 9.85313 18.125 11.25ZM11.25 12.1875H8.75V14.0625H11.25V12.1875ZM11.25 4.6875H8.75V8.4375L9.375 10.9375H10.625L11.25 8.4375V4.6875Z"})});function ri(e){let{primaryOnClick:t,secondaryOnClick:a}=e;const i=(0,d().tz)(),r=(0,o().IS)((e=>({title:{marginBottom:24},icon:{height:28,width:28,fill:"#FFBA33",marginBottom:21},font:{font:"inter",fontSize:16},modalContainer:{padding:"24px 28px",width:400},bullet:{marginBottom:12,paddingLeft:0},list:{marginBottom:22,paddingLeft:22},primaryCta:{justifyContent:"center",width:"100%",height:38,marginBottom:12,color:e.white,background:e.primaryBlack},primaryCtaHovered:{background:e.grayButtonBackground},secondaryCta:{justifyContent:"center",width:"100%",height:38,backgroundColor:e.white,border:`1px solid ${e.grayButtonBackground}`}})),[]);return(0,A.jsxs)("div",{style:r.modalContainer,children:[(0,A.jsx)("span",{children:ii(r.icon)}),(0,A.jsx)(yt().D,{styleName:"Title-24px/Bold",style:r.title,children:i.formatMessage(ni.importantNote)}),(0,A.jsxs)("ul",{style:r.list,children:[(0,A.jsx)("li",{style:r.bullet,children:(0,A.jsx)(yt().D,{customStyles:r.font,children:i.formatMessage(ni.firstBullet)})}),(0,A.jsx)("li",{style:r.bullet,children:(0,A.jsx)(yt().D,{customStyles:r.font,children:i.formatMessage(ni.secondBullet)})}),(0,A.jsx)("li",{style:r.bullet,children:(0,A.jsx)(yt().D,{customStyles:r.font,children:i.formatMessage(ni.thirdBullet)})})]}),(0,A.jsx)(_().p,{style:r.primaryCta,hoveredStyle:r.primaryCtaHovered,onClick:t,children:(0,A.jsx)(yt().D,{styleName:"Heading-17px/Medium",children:i.formatMessage(ni.primaryCta)})}),(0,A.jsx)(_().p,{style:r.secondaryCta,onClick:a,children:(0,A.jsx)(yt().D,{styleName:"Heading-17px/Medium",children:i.formatMessage(ni.secondaryCta)})})]})}const ni=(0,d().YK)({importantNote:{id:"creatorProfile.sellerImportantNoteModal.importantNote",defaultMessage:"Important note"},firstBullet:{id:"creatorProfile.sellerImportantNoteModal.firstBullet",defaultMessage:"Once you onboard to payments, all existing paid templates will automatically start accepting Notion payments."},secondBullet:{id:"creatorProfile.sellerImportantNoteModal.secondBullet",defaultMessage:"In addition, any links to your template (the notion.site URL) will automatically re-direct to your listing in Marketplace."},thirdBullet:{id:"creatorProfile.sellerImportantNoteModal.thirdBullet",defaultMessage:"You can modify any individual listing to accept payments from a third-party platform in your template settings."},primaryCta:{id:"creatorProfile.sellerImportantNoteModal.primaryCta",defaultMessage:"Continue onboarding"},secondaryCta:{id:"creatorProfile.sellerImportantNoteModal.secondaryCta",defaultMessage:"Learn more"}});function oi(e){const t=(0,r().v3)(),a=(0,d().tz)(),o=(0,fe().x)(),{onboardingStatus:s,setOnboardingStatus:l}=e,[c,u]=(0,i.useState)(!1),p=i.useCallback((async()=>{if(c)return;u(!0);const e=await x().callApi({eventName:"initiateCreatorStripeOnboarding",environment:t,data:{}});"success"===e.type?(l("started"),window.location.reload(),window.open(e.data.onboardingLink,"_blank","noreferrer")):S().f1((0,st().Hu)(a,e)),u(!1)}),[t,l,a,c]),g=(0,n().K8)((()=>ai.state.contactEmail),[]),m=i.useCallback((async()=>{if(c)return;u(!0);const e=await x().callApi({eventName:"retrieveCreatorStripeDashboardLink",environment:t,data:{}});"success"===e.type?window.open(e.data.dashboardLink,"_blank"):S().f1((0,st().Hu)(a,e)),u(!1)}),[t,a,c]),[f,h]=i.useState(!1);return"enabled"===s?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(si,{onClick:()=>{var e;o&&(g&&null!==(e=o.attributes)&&void 0!==e&&e.contactEmail?h(!0):ai.setState({...ai.state,contactEmailToggleError:!0,contactEmailErrorMessage:a.formatMessage(li.contactEmailRequiredForOnboardingErrorMessage)}))},children:(0,A.jsx)(d().sA,{id:"creatorProfileSeller.button.getStarted",defaultMessage:"Get started"})}),(0,A.jsx)(ei().s,{isOpen:f,onClosed:()=>h(!1),render:()=>(0,A.jsx)(ri,{primaryOnClick:p,secondaryOnClick:()=>{h(!1),window.open(va().xS("guides.marketplaceSelling"),"_blank","noreferrer")}}),showCloseIcon:!0})]}):"started"===s?(0,A.jsx)(si,{onClick:p,children:(0,A.jsx)(d().sA,{id:"creatorProfileSeller.button.completeOnboarding",defaultMessage:"Complete onboarding"})}):"completed"===s?(0,A.jsx)(si,{onClick:m,children:(0,A.jsx)(d().sA,{id:"creatorProfileSeller.button.sellerDashboard",defaultMessage:"Stripe seller dashboard"})}):null}function si(e){const{children:t,...a}=e,i=(0,o().IS)((e=>({externalIcon:{paddingLeft:4}})),[]);return(0,A.jsxs)(_().p,{isBlue:!0,...a,ignoreLocalHoverState:void 0,children:[t,(0,A.jsx)("div",{style:i.externalIcon,children:(0,A.jsx)(we().Q,{iconGroup:Xa().j,variantName:"small"})})]})}const li=(0,d().YK)({contactEmailRequiredForOnboardingErrorMessage:{id:"creatorProfileSellerAreaButtons.contactEmailRequiredForOnboardingErrorMessage",defaultMessage:"Stripe requires that you add an email address. Please add and 'Save' to continue."}}),di="https://notion.notion.site/11fefdeead0581efa85cccef11c2fdda?pvs=105";function ci(e){const{onboardingStatus:t,setOnboardingStatus:a}=e,i=(0,d().tz)(),r=pi();switch(t){case"disabled":return(0,A.jsx)(gi,{});case"enabled":return(0,A.jsx)(dt,{title:i.formatMessage(ui.calloutTitleEnabled),subtitle:i.formatMessage(ui.calloutSubtitleEnabled),left:Ua({height:24,width:24}),right:(0,A.jsx)(oi,{onboardingStatus:t,setOnboardingStatus:a})});case"started":return(0,A.jsx)(dt,{title:i.formatMessage(ui.calloutTitleStarted),subtitle:i.formatMessage(ui.calloutSubtitleStarted),pill:(0,A.jsx)(Ja,{message:(0,A.jsx)(d().sA,{id:"creatorProfileSellerCallout.badge.inProgress",defaultMessage:"In Progress"}),badgeContainerStyle:r.inProgressBadgeContainer,badgeTitleStyle:r.inProgressBadgeTitle}),left:Ua({height:24,width:24}),right:(0,A.jsx)(oi,{onboardingStatus:t,setOnboardingStatus:a})});case"completed":return(0,A.jsx)(dt,{title:i.formatMessage(ui.calloutTitleCompleted),subtitle:i.formatMessage(ui.calloutSubtitleCompleted),pill:(0,A.jsx)(Ja,{message:(0,A.jsx)(d().sA,{id:"creatorProfileSellerCallout.badge.complete",defaultMessage:"Complete"}),badgeContainerStyle:r.completedBadgeContainer,badgeTitleStyle:r.completedBadgeTitle}),left:Ua({height:24,width:24}),right:(0,A.jsx)(oi,{onboardingStatus:t,setOnboardingStatus:a})})}}const ui=(0,d().YK)({calloutTitleDisabled:{id:"creatorProfileSellerCallout.title.stageDisabled",defaultMessage:"Get access to Stripe Merchant"},calloutSubtitleDisabled:{id:"creatorProfileSellerCallout.subtitle.stageDisabled",defaultMessage:"Complete a short survey to get started with payments in Notion"},calloutTitleEnabled:{id:"creatorProfileSellerCallout.title.stageEnabled",defaultMessage:"Complete onboarding with Stripe"},calloutSubtitleEnabled:{id:"creatorProfileSellerCallout.subtitle.stageEnabled",defaultMessage:"Get all of your paid templates processed on Notion"},calloutTitleStarted:{id:"creatorProfileSellerCallout.title.stageStarted",defaultMessage:"Pick up where you left off"},calloutSubtitleStarted:{id:"creatorProfileSellerCallout.subtitle.stageStarted",defaultMessage:"After completing all the steps, it should take up to 20 minutes to get verified"},calloutTitleCompleted:{id:"creatorProfileSellerCallout.title.stageCompleted",defaultMessage:"You’ve been successfully onboarded"},calloutSubtitleCompleted:{id:"creatorProfileSellerCallout.subtitle.stageCompleted",defaultMessage:"All of your information has been verified. Go forth and sell!"},apply:{id:"creatorProfileSellerCallout.button.apply",defaultMessage:"Apply"},approved:{id:"creatorProfileSellerCallout.button.approved",defaultMessage:"Approved"},pending:{id:"creatorProfileSellerCallout.button.pending",defaultMessage:"In Review"}});function pi(){return(0,o().IS)((e=>({button:{fontWeight:L().Wy.semibold},inProgressBadgeContainer:{backgroundColor:e.palette.orange[100]},inProgressBadgeTitle:{color:e.palette.orange[500]},completedBadgeContainer:{backgroundColor:e.palette.green[100]},completedBadgeTitle:{color:e.palette.green[500]}})),[])}function gi(){return(0,za().X)("marketplace_seller_new_onboarding")?(0,A.jsx)(fi,{}):(0,A.jsx)(mi,{})}function mi(){const e=(0,d().tz)(),t=pi();return(0,A.jsx)(dt,{title:e.formatMessage(ui.calloutTitleDisabled),subtitle:e.formatMessage(ui.calloutSubtitleDisabled),left:Fa({height:16,width:16}),right:(0,A.jsx)("div",{style:t.button,children:(0,A.jsx)(Xe().A,{size:"lg",onClick:()=>{window.open(di)},children:(0,A.jsx)(d().sA,{id:"creatorProfileSellerCallout.button.fillOutSurvey",defaultMessage:"Fill out survey"})})})})}function fi(){const e=(0,d().tz)(),t=pi(),a=(0,i.useCallback)((()=>{Oa.setState({...Oa.state,isOpen:!0})}),[]),r=(0,n().K8)((()=>null!==Va().A.state.creatorId),[]),o=(0,fe().x)(),s=null==o?void 0:o.seller_onboarding_status;let l;return l=r?"pending"===s?(0,A.jsx)(Na().A,{renderTooltip:()=>(0,A.jsx)(d().sA,{id:"creatorProfileSellerCallout.button.fillOutSurvey.tooltip2",defaultMessage:"Your application is being reviewed"}),render:e=>(0,A.jsx)(Xe().A,{size:"lg",disabled:!0,disabledFeedback:!0,onClick:a,...e,children:(0,A.jsx)(d().sA,{...ui.pending})})}):"approved"===s?(0,A.jsx)(Xe().A,{size:"lg",onClick:a,disabled:!0,disabledFeedback:!0,children:(0,A.jsx)(d().sA,{...ui.approved})}):(0,A.jsx)(Xe().A,{size:"lg",onClick:a,children:(0,A.jsx)(d().sA,{...ui.apply})}):(0,A.jsx)(Na().A,{renderTooltip:()=>(0,A.jsx)(d().sA,{id:"creatorProfileSellerCallout.button.fillOutSurvey.tooltip",defaultMessage:"Creator profile needs to be completed"}),render:e=>(0,A.jsx)(Xe().A,{size:"lg",disabled:!0,disabledFeedback:!0,onClick:a,...e,children:(0,A.jsx)(d().sA,{...ui.apply})})}),(0,A.jsx)(dt,{title:e.formatMessage(ui.calloutTitleDisabled),subtitle:e.formatMessage(ui.calloutSubtitleDisabled),left:Fa({height:16,width:16}),right:(0,A.jsx)("div",{style:t.button,children:l})})}function hi(){const e=(0,o().IS)((e=>({icon:{height:32,width:32,color:e.palette.gray[200]},container:{width:"100%",border:"2px dashed",borderColor:e.palette.gray[100],borderRadius:8,display:"grid",placeItems:"center",height:"100%",minHeight:297},header:{display:"flex",flexDirection:"column",alignItems:"center",color:e.palette.gray[500],gap:"12px"}})),[]),t=(0,fe().x)();return(0,A.jsx)("div",{style:e.container,children:(0,A.jsxs)("div",{style:e.header,children:[(0,Ne().C)(e.icon),bi(null==t?void 0:t.stripe_connect_onboarding_phase)]})})}function bi(e){if(!e)return null;switch(e){case"completed":return(0,A.jsx)(d().sA,{id:"creatorProfile.coupons.emptyState.headerCanCreate",defaultMessage:"You haven't created any coupons yet."});case"disabled":return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(d().sA,{id:"creatorProfile.coupons.emptyState.headerCannotCreate",defaultMessage:"You must be a Stripe-verified creator to add coupons."}),(0,A.jsx)(Ie().A,{onClick:()=>{window.open(di)},children:(0,A.jsx)(d().sA,{id:"creatorProfile.coupons.emptyStateApplyButton",defaultMessage:"Apply"})})]});case"enabled":case"started":return(0,A.jsx)(d().sA,{id:"creatorProfile.coupons.emptyState.headerStatusPending",defaultMessage:"Your Stripe verification status is still pending, you can add coupons upon completion."});default:return(0,V().HB)(e)}}var vi=()=>a(603250);const yi=30,xi="DELETED__",Si=1e6,wi=5e3;function Ci(e){return new Date(parseInt(e.toString())).toISOString().split("T")[0]}var ji=()=>a(24184),Mi=()=>a(568625),_i=()=>a(369),Ai=()=>a(253093),Ii=()=>a(735384),ki=()=>a(285790),Ti=()=>a(939740),Pi=()=>a(89924),Li=()=>a(42425);const Di=(0,d().YK)({edit:{id:"creatorProfile.coupons.actions.edit",defaultMessage:"Edit"},deactivate:{id:"creatorProfile.coupons.actions.deactivate",defaultMessage:"Deactivate"},delete:{id:"creatorProfile.coupons.actions.delete",defaultMessage:"Delete coupon"},relist:{id:"creatorProfile.coupons.actions.relist",defaultMessage:"Make coupon active"},couponActionsAriaLabel:{id:"creatorProfile.coupons.actions.ariaLabel",defaultMessage:"Coupons actions"}});function Ei(e){const{type:t,couponId:a}=e,i=(0,r().v3)(),n=(0,d().tz)(),s=(0,o().IS)((e=>({buttonIcon:{width:20,height:20},deleteButton:{color:e.icon.uiRedPrimary}})),[]),l="active"===t?[{key:"edit",render:e=>(0,A.jsx)(vt().A,{...e,icon:(0,Ai().j)(s.buttonIcon),title:n.formatMessage(Di.edit)}),action:()=>{(0,rt().u)({environment:i,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"edit",source:"creator_coupons_active",coupon_id:a}}}),Be().oo({environment:i,url:`/profile/coupons/edit/${a}`})}},{key:"deactivate",render:e=>(0,A.jsx)(vt().A,{...e,icon:(0,_i().R)(s.buttonIcon),title:n.formatMessage(Di.deactivate)}),action:async()=>{await async function(e){let{environment:t,couponId:a}=e;await Ra({environment:t,couponId:a,active:!1})}({environment:i,couponId:a}),(0,rt().u)({environment:i,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"deactivate",source:"creator_coupons_active",coupon_id:a}}})}},{key:"delete",render:e=>(0,A.jsx)(vt().A,{...e,icon:(0,Ii().I)(s.buttonIcon),title:n.formatMessage(Di.delete),buttonStyle:s.deleteButton}),action:async()=>{await Ba({environment:i,couponId:a}),(0,rt().u)({environment:i,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"delete",source:"creator_coupons_active",coupon_id:a}}})}}]:[{key:"edit",render:e=>(0,A.jsx)(vt().A,{...e,icon:(0,Ai().j)(s.buttonIcon),title:n.formatMessage(Di.edit)}),action:()=>{(0,rt().u)({environment:i,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"edit",source:"creator_coupons_inactive",coupon_id:a}}}),Be().oo({environment:i,url:`/profile/coupons/edit/${a}`})}},{key:"relist",render:e=>(0,A.jsx)(vt().A,{...e,icon:(0,A.jsx)(we().Q,{iconGroup:ji().e,variantName:"default"}),title:n.formatMessage(Di.relist)}),action:async()=>{(0,rt().u)({environment:i,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"activate",source:"creator_coupons_inactive",coupon_id:a}}}),await async function(e){let{environment:t,couponId:a}=e;await Ra({environment:t,couponId:a,active:!0})}({environment:i,couponId:a})}},{key:"delete",render:e=>(0,A.jsx)(vt().A,{...e,icon:(0,Ii().I)(s.buttonIcon),title:n.formatMessage(Di.delete),buttonStyle:s.deleteButton}),action:async()=>{(0,rt().u)({environment:i,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"delete",source:"creator_coupons_inactive",coupon_id:a}}}),await Ba({environment:i,couponId:a})}}];return(0,A.jsx)(xe().A,{menuType:je().gu.Popup,width:200,children:(0,A.jsx)(Ti().Ay,{initialFocus:void 0,type:Ti().Oh.Vertical,sections:[{key:"actions",render:e=>(0,A.jsx)(Pi().A,{...e}),items:l}]})})}function Bi(e){const{type:t,couponId:a}=e,i=(0,o().IS)((()=>({buttonIcon:{width:14,height:14}})),[]),r=(0,d().tz)();return(0,A.jsx)(ye().Ay,{alignmentToOrigin:Li().C1.End,renderOrigin:e=>(0,A.jsx)(ki().A,{...e,ariaLabel:r.formatMessage(Di.couponActionsAriaLabel),icon:Mi().L,iconStyle:i.buttonIcon}),popupType:ye().z7.Popup,render:()=>(0,A.jsx)(Ei,{type:t,couponId:a})})}var Ri=()=>a(179034),Fi=()=>a(666450),Ui=()=>a(187820);function Ni(e){const t=(0,r().v3)();return(0,n().K8)((()=>{if(!e)return[];return e.map((e=>new(Bt().$1)(t,{table:Fi().UL,id:e}))).filter((e=>e.getCheckoutEnabled())).map((e=>e.getProductId())).filter((e=>(0,V().O9)(e))).map((e=>new(Bt().$x)(t,{table:Dt().XX,id:e}))).filter((e=>{var t;return(0,V().O9)(e)&&(null===(t=e.getAttributes())||void 0===t?void 0:t.checkout_enabled)})).map((e=>e.getListingId())).filter((e=>(0,V().O9)(e)))}),[t,e])}const zi=4,Vi=(0,d().YK)({showMore:{defaultMessage:"View {count} more",id:"creatorProfile.couponsTable.templatesDropdown.showMore"}});function Hi(e){const{eligibleListingIds:t}=e,a=(0,r().v3)(),o=(0,d().tz)(),[s,l]=(0,i.useState)(t.length<=zi),c=(0,n().K8)((()=>{const e=[];for(const i of t){const t=new(Bt().$1)(a,{table:Fi().UL,id:i});if(!t.isReady())continue;const r=t.getProductId();if(void 0===r||!t.getCheckoutEnabled())continue;const n=new(Bt().$x)(a,{table:Dt().XX,id:r});if(!n.isReady())continue;const o=n.getBlockId();if(void 0===o)continue;const s=new(Bt().Bv)(a,{table:Ri().ev,id:o});if(!s.isReady())continue;const l=s.getIcon();e.push({templateName:n.getName(),icon:l})}return e}),[t,a]),u=(0,i.useMemo)((()=>{const e=(s?c:c.slice(0,zi)).map(((e,t)=>({key:`template-${t}`,render:t=>(0,A.jsx)(vt().A,{focused:!1,...t,icon:e.icon?(0,A.jsx)(Ui().B6,{icon:e.icon,isEmptyPage:!1,size:16,disabled:!0}):void 0,title:e.templateName,disabled:!0}),action:()=>{},disabled:!0})));return s||e.push({key:"show-more",render:e=>(0,A.jsx)(vt().A,{focused:!1,...e,title:o.formatMessage(Vi.showMore,{count:c.length-zi})}),action:()=>l(!0),disabled:!1}),e}),[c,s,o]);return(0,A.jsx)(xe().A,{menuType:je().gu.Popup,width:264,children:(0,A.jsx)(Ti().Ay,{type:Ti().Oh.Vertical,initialFocus:void 0,sections:[{key:"templates",items:u,render:e=>(0,A.jsx)(Pi().A,{...e})}]})})}function Oi(e){const{applyToAll:t,eligibleListingIds:a}=e,i=Ni(a).length;return(0,A.jsx)(ye().Ay,{alignmentToOrigin:Li().C1.End,renderOrigin:e=>(0,A.jsx)(_().p,{disabled:t,...e,children:t?(0,A.jsx)(d().sA,{id:"creatorProfile.couponsTable.templatesDropdown.allTemplates",defaultMessage:"All templates"}):(0,A.jsx)(d().sA,{id:"creatorProfile.couponsTable.templatesDropdown.templates",defaultMessage:"{count, plural, one {1 template} other {{count} templates}}",values:{count:i}})}),popupType:ye().z7.Popup,render:()=>(0,A.jsx)(Hi,{eligibleListingIds:a}),disabled:0===i})}const Wi=[{key:"code",header:(0,A.jsx)(d().sA,{id:"creatorProfile.couponsTable.column.code",defaultMessage:"Code"}),style:{width:"15%"}},{key:"value",header:(0,A.jsx)(d().sA,{id:"creatorProfile.couponsTable.column.value",defaultMessage:"Value"}),style:{width:"15%"}},{key:"startDate",header:(0,A.jsx)(d().sA,{id:"creatorProfile.couponsTable.column.startDate",defaultMessage:"Start date (UTC)"}),style:{width:"15%"}},{key:"endDate",header:(0,A.jsx)(d().sA,{id:"creatorProfile.couponsTable.column.endDate",defaultMessage:"End date (UTC)"}),style:{width:"15%"}},{key:"usage",header:(0,A.jsx)(d().sA,{id:"creatorProfile.couponsTable.column.usage",defaultMessage:"Uses"}),style:{width:"15%"}},{key:"templates",header:(0,A.jsx)(d().sA,{id:"creatorProfile.couponsTable.column.templates",defaultMessage:"Templates"}),style:{width:"15%"}},{key:"edit",header:(0,A.jsx)("div",{}),style:{width:"10%"}}],qi=(0,d().YK)({unlimited:{id:"creatorProfile.couponsTable.unlimited",defaultMessage:"Unlimited"},unspecified:{id:"creatorProfile.couponsTable.unspecified",defaultMessage:"Unspecified"},percentageDiscount:{id:"creatorProfile.couponsTable.percentageDiscount",defaultMessage:"{value}% off"},fixedDiscount:{id:"creatorProfile.couponsTable.fixedDiscount",defaultMessage:"${value} off"},active:{id:"creatorProfile.couponsTable.active",defaultMessage:"Active"},inactive:{id:"creatorProfile.couponsTable.inactive",defaultMessage:"Inactive"}});function Ki(e,t,a){const i=t.code,r="percentage"===t.getDiscount().type?e.formatMessage(qi.percentageDiscount,{value:t.getDiscount().value}):e.formatMessage(qi.fixedDiscount,{value:t.getDiscount().value/100}),n=t.getStartTime()?Ci(t.getStartTime()):e.formatMessage(qi.unspecified),o=t.getEndTime()?Ci(t.getEndTime()):e.formatMessage(qi.unspecified),s=t.getCouponUsage().number_of_uses,l=t.getCouponUsage().limit===Number.MAX_VALUE?e.formatMessage(qi.unlimited):t.getCouponUsage().limit;return[(0,A.jsx)("div",{style:{wordBreak:"break-word"},children:i},"code"),(0,A.jsx)("div",{children:r},"value"),(0,A.jsx)("div",{children:n},"startDate"),(0,A.jsx)("div",{children:o},"endDate"),(0,A.jsx)("div",{children:`${s} / ${l}`},"usage"),(0,A.jsx)(Oi,{applyToAll:t.apply_to_all,eligibleListingIds:t.getEligibleListingIds()},`templates-${t.id}`),(0,A.jsx)(Bi,{type:a,couponId:t.id},`action-${t.id}`)]}function Gi(e){const{type:t}=e,a=(0,d().tz)(),i=(0,o().IS)((()=>({title:{fontSize:24,fontWeight:L().Wy.semibold},container:{overflowX:"auto"},table:{minWidth:640}})),[]),s=(0,r().v3)(),l=(0,n().K8)((()=>("active"===t?Da.state.activeCoupons:Da.state.inactiveCoupons).map((e=>{const i=new(Bt().tT)(s,{table:Pa().QO,id:e}).getModel();if(i)return{key:i.id,columns:Ki(a,i,t)}})).filter(V().O9)),[s,a,t]),c="active"===t?a.formatMessage(qi.active):a.formatMessage(qi.inactive);return(0,A.jsxs)("div",{style:i.container,children:[(0,A.jsx)("div",{style:i.title,children:c}),(0,A.jsx)(Ce().A,{size:24}),(0,A.jsx)($t().A,{columns:Wi,rows:l,tableStyle:i.table})]})}function Zi(){const e=(0,r().v3)(),[t]=(0,l().Yb)((async()=>{await Ea({environment:e})}),[e]),{activeCoupons:a,inactiveCoupons:i}=(0,n().O$)(Da);return"resolved"===t.status&&0===a.length&&0===i.length?(0,A.jsx)(hi,{}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Gi,{type:"active"}),(0,A.jsx)(Ce().A,{size:24}),(0,A.jsx)(Gi,{type:"inactive"})]})}var $i=()=>a(244641),Yi=()=>a(284622),Qi=()=>a(725614),Ji=()=>a(331542),Xi=()=>a(573351),er=()=>a(195821),tr=()=>a(963575),ar=()=>a(416845);const ir=["codeError","discountValueError","discountTypeError","startDateError","endDateError","usageLimitError","eligibleListingIdsError"];class rr extends Me().Store{getInitialState(){return{id:void 0,code:"",discount:{type:"percentage",value:0},coupon_usage:{limit:Number.MAX_VALUE,number_of_uses:0},active:!0,startDate:"",endDate:"",apply_to_all:!1,eligible_listing_ids:[],codeError:void 0,discountValueError:void 0,discountTypeError:void 0,startDateError:void 0,endDateError:void 0,usageLimitError:void 0,eligibleListingIdsError:void 0,initialValues:{id:void 0,code:"",discount:{type:"percentage",value:0},active:!1,startDate:"",endDate:"",coupon_usage:{limit:Number.MAX_VALUE,number_of_uses:0},apply_to_all:!1,eligible_listing_ids:[]}}}}const nr=new rr;class or extends Me().Store{getInitialState(){return{templateIds:[]}}}const sr=new or;async function lr(e,t){const a=await x().callApi({eventName:"checkMarketplaceCouponExists",environment:e,data:{code:t}});"success"===a.type&&a.data.codeExists&&nr.setState({...nr.state,codeError:O().A.formatMessage(jr.couponCodeTakenError)})}async function dr(e){const{initialValues:t,...a}=nr.state;nr.state.id||(gr(a.code),await lr(e,a.code)),mr(a.discount),a.endDate&&hr(a.endDate),a.startDate&&fr(a.startDate),br(a.coupon_usage.limit),function(e,t){if(t)return;pr({value:e,validationFunction:Cr,fieldName:"eligibleListingIdsError"})}(a.eligible_listing_ids,a.apply_to_all);for(const o of ir)if(nr.state[o])return!1;const i={discountType:a.discount.type,discountValue:a.discount.value,active:a.active,applyToAll:a.apply_to_all,startDate:a.startDate,endDate:a.endDate,usageLimit:a.coupon_usage.limit,eligibleListingIds:a.eligible_listing_ids??[]},r=a.id?{id:a.id,...i}:{code:a.code,...i},n=await x().callApi({eventName:"createOrUpdateMarketplaceCoupon",environment:e,data:{...r}});return!(!n||(0,ar().OwV)(n)||"failed"===n.type)&&n.data.success}function cr(e){nr.setState({...nr.state,[e]:void 0})}const ur=200;function pr(e){const{value:t,validationFunction:a,fieldName:i}=e;try{a(t)}catch(r){if((0,ar().V4j)(r)){const e=(0,st().DX)(O().A.getIntl(),r.body);e&&nr.setState({...nr.state,[i]:e})}}}function gr(e){pr({value:e,validationFunction:wr,fieldName:"codeError"})}function mr(e){pr({value:e,validationFunction:Sr,fieldName:"discountValueError"})}function fr(e){pr({value:e,validationFunction:xr,fieldName:"startDateError"})}function hr(e){pr({value:e,validationFunction:xr,fieldName:"endDateError"})}function br(e){pr({value:e,validationFunction:vr,fieldName:"usageLimitError"})}function vr(e){if(!function(e,t){const a=Number.isInteger(e)&&e>0,i=e<=Si||e===Number.MAX_VALUE;return a&&i&&e>=t}(e,nr.state.coupon_usage.number_of_uses)){if(e<nr.state.coupon_usage.number_of_uses)throw new(ar().rTV)("Coupon has already been used more times than this limit",{type:"marketplace_coupon_submission_invalid_usage_limit_already_surpassed"});throw new(ar().rTV)("Invalid usage limit",{type:"marketplace_coupon_submission_invalid_usage_limit"})}}function yr(e){const t=$i().c9.now().toUTC().startOf("day").toMillis();return $i().c9.fromFormat(e,"yyyy-MM-dd",{zone:"utc"}).startOf("day").toMillis()<t}function xr(e){if(""!==e){if(isNaN(Date.parse(e)))throw new(ar().rTV)("Date is misformed",{type:"marketplace_coupon_submission_invalid_date"});if(yr(e))throw new(ar().rTV)("Date cannot be in the past",{type:"marketplace_coupon_submission_invalid_date_in_past"});if(nr.state.startDate&&nr.state.endDate&&$i().c9.fromFormat(nr.state.endDate,"yyyy-MM-dd",{zone:"utc"}).endOf("day").toMillis()<$i().c9.fromFormat(nr.state.startDate,"yyyy-MM-dd",{zone:"utc"}).startOf("day").toMillis())throw new(ar().rTV)("End date cannot be before start date",{type:"marketplace_coupon_submission_start_date_end_date_out_of_order"})}}function Sr(e){if(!function(e){const{type:t,value:a}=e;if(isNaN(a)||!(a>=1))return!1;if("percentage"===t){const e=a<=99,t=Math.floor(a)===a;return e&&t}return"fixed"===t}(e))throw new(ar().rTV)("Invalid discount",{type:"marketplace_coupon_submission_invalid_discount"})}function wr(e){if(!function(e){const t=!(0,vi().e)(e)&&!e.startsWith(xi)&&""!==e&&function(e){return/^[A-Z0-9]+$/.test(e)}(e),a=e.length<=yi;return t&&a}(e))throw new(ar().rTV)("Coupon code invalid",{type:"marketplace_coupon_submission_invalid_code"})}function Cr(e){if(!e||0===e.length)throw new(ar().rTV)("No eligible listing ids provided",{type:"marketplace_coupon_submission_invalid_eligible_listing_ids"})}const jr=(0,d().YK)({couponCodeTakenError:{id:"couponFormActions.codeAlreadyUsedError",defaultMessage:"Invalid code, code already in use by another coupon"}});var Mr=()=>a(647556);var _r=()=>a(787446),Ar=()=>a(591779);const Ir=(0,Fe().wt)("exclamationMarkTriangle",{viewBox:"0 0 16 16",svg:(0,A.jsx)("path",{d:"M2.94141 14.1181C2.54493 14.1181 2.20085 14.0315 1.90918 13.8584C1.61752 13.6852 1.39193 13.4528 1.23243 13.1611C1.07748 12.8694 1 12.5459 1 12.1904C1 11.844 1.09115 11.5136 1.27344 11.1992L6.56446 1.97754C6.74219 1.65397 6.98145 1.41016 7.28223 1.2461C7.58301 1.08203 7.89747 1 8.22559 1C8.55369 1 8.86589 1.08203 9.16209 1.2461C9.45829 1.4056 9.69989 1.64942 9.88669 1.97754L15.1777 11.1992C15.2689 11.3541 15.3373 11.5159 15.3828 11.6845C15.4284 11.8531 15.4512 12.0218 15.4512 12.1904C15.4512 12.5459 15.3714 12.8694 15.2119 13.1611C15.0524 13.4528 14.8268 13.6852 14.5352 13.8584C14.2481 14.0315 13.9063 14.1181 13.5098 14.1181H2.94141ZM3.06446 12.8261H13.3867C13.6009 12.8261 13.7695 12.7556 13.8926 12.6143C14.0156 12.473 14.0772 12.3089 14.0772 12.122C14.0772 11.9899 14.0453 11.8624 13.9815 11.7393L8.81349 2.68848C8.74509 2.57455 8.65849 2.49252 8.55369 2.44239C8.44889 2.3877 8.33949 2.36035 8.22559 2.36035C8.11166 2.36035 8 2.3877 7.89063 2.44239C7.78581 2.49252 7.7015 2.57455 7.6377 2.68848L2.46289 11.7255C2.43099 11.7893 2.40821 11.8577 2.39454 11.9306C2.38086 11.999 2.37403 12.0628 2.37403 12.122C2.37403 12.3089 2.43555 12.473 2.5586 12.6143C2.68164 12.7556 2.85026 12.8261 3.06446 12.8261ZM8.23239 9.38765C7.83594 9.38765 7.63086 9.18715 7.61719 8.78615L7.52149 5.46387C7.51237 5.26335 7.5739 5.09929 7.70606 4.97168C7.83822 4.84408 8.00912 4.78028 8.21875 4.78028C8.42839 4.78028 8.60159 4.84636 8.73829 4.97852C8.87499 5.10612 8.93879 5.26791 8.92969 5.46387L8.82029 8.78615C8.81119 9.18715 8.61519 9.38765 8.23239 9.38765ZM8.23239 11.6572C8.00912 11.6572 7.81771 11.5865 7.65821 11.4453C7.50326 11.2994 7.42579 11.1194 7.42579 10.9052C7.42579 10.691 7.50326 10.5133 7.65821 10.372C7.81771 10.2262 8.00912 10.1533 8.23239 10.1533C8.45119 10.1533 8.63799 10.2239 8.79299 10.3652C8.95249 10.5065 9.03219 10.6865 9.03219 10.9052C9.03219 11.124 8.95249 11.304 8.79299 11.4453C8.63349 11.5865 8.44659 11.6572 8.23239 11.6572Z"})}),kr=(0,i.forwardRef)((function(e,t){const a=(0,i.useRef)(null),[r,n]=(0,i.useState)(!1),s=(0,o().IS)((e=>({iconStyles:{height:"14px",width:"14px",fill:e.palette.red[500]},creatorProfileSubmissionErrorBannerContainer:{color:e.palette.red[500],fontSize:"13.5px",marginTop:"20px",scrollMarginTop:"300px",maxWidth:"960px",minHeight:"40px",borderRadius:"8px",padding:"10px 24px 10px 24px",display:"flex",alignItems:"center",flexWrap:"wrap",gap:"10px",backgroundColor:e.palette.red[100]},creatorProfileSubmissionErrorBannerHidden:{scrollMarginTop:"300px"}})),[]),{count:l}=e,c=(0,Ar().ZC)(l);let u=null;return(0,i.useEffect)((()=>{void 0!==c&&l<c&&n(!1)}),[l,c]),0!==l&&r&&(u=(0,A.jsxs)(A.Fragment,{children:[Ir(s.iconStyles),(0,A.jsx)(d().sA,{defaultMessage:"{count, plural, one {There is {count} error below} other {There are {count} errors below}}",id:"creatorProfile.form.CreatorProfileSubmissionErrorBanner",values:{count:l}})]})),(0,i.useImperativeHandle)(t,(()=>({scrollIntoView(e){var t,i;n(!0),null==a||null===(t=a.current)||void 0===t||null===(i=t.scrollIntoView)||void 0===i||i.call(t,e)}})),[]),(0,A.jsx)("div",{ref:a,style:l>0&&r?s.creatorProfileSubmissionErrorBannerContainer:s.creatorProfileSubmissionErrorBannerHidden,children:u})}));var Tr=()=>a(949961),Pr=()=>a(540123);function Lr(e){const[t,a]=i.useState(!1),{name:r,isActive:n,disabled:s,onClick:l,style:d}=e,c=(0,o().IS)((()=>({toggleInner:{background:"#ffffff",width:"14px",height:"14px",borderRadius:"14px",position:"relative",left:"0",transition:"left 150ms"},toggleInnerActive:{transition:"left 150ms",left:"12px"},toggleActive:{background:"#2383e2"},toggle:{display:"block",width:"30px",height:"18px",background:"rgba(0, 0, 0, 0.2)",borderRadius:"30px",border:"0",padding:"2px"},toggleFocus:{outline:"rgba(35, 131, 226, 0.57) solid 2px"},disabled:{opacity:.5}})),[]),u={...c.toggle,...n?c.toggleActive:{},...t?c.toggleFocus:{},...s?c.disabled:{},...d};return(0,A.jsx)("button",{style:u,type:"button",onClick:l,name:r,id:r,"aria-pressed":n?"true":"false","aria-label":r,"aria-describedby":r,disabled:s,onFocus:()=>a(!0),onBlur:()=>a(!1),children:(0,A.jsx)("div",{style:n?{...c.toggleInner,...c.toggleInnerActive}:c.toggleInner})})}const Dr=Lr;a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698);var Er=()=>a(529324),Br=()=>a(623580),Rr=()=>a(758375),Fr=()=>a(183607),Ur=()=>a(113474);function Nr(e){const t=(0,r().v3)();return(0,n().K8)((()=>{const a=new(Bt().$x)(t,{table:"template",id:e});return{image:a.getTemplateImage(),name:a.getName(),price:a.getPrice(),numberDuplicates:a.getNumberOfDuplicates(),slug:a.getSlug(),templateDraftId:a.getTemplateDraftId(),contentfulId:a.getContentfulId()}}),[t,e])}function zr(e){const{children:t,href:a}=e;return(0,A.jsx)(_r().u,{variant:"light",href:a,children:t||(0,A.jsx)(d().sA,{id:"creatorProfile.templates.button.editTemplate",defaultMessage:"Edit Template"})})}const Vr=(0,Fe().wt)("clockFilled",{viewBox:"0 0 64 64",svg:(0,A.jsx)("g",{children:(0,A.jsx)("path",{d:"M32 8C18.75 8 8 18.75 8 32s10.75 24 24 24 24-10.75 24-24S45.25 8 32 8zm14 28H29V16h6v14h11v6z"})})});var Hr=()=>a(841224),Or=()=>a(693954),Wr=()=>a(950705);const qr=(0,i.createContext)({displaySection:"published"});function Kr(e){let{localizedTemplateDraftData:t,displaySection:a}=e;const i=en(),r=function(e){const t=e.reduce(((e,t)=>{const a="in_review"===t.status||"rejected"===t.status?t.status:"published",i=e.find((e=>e.status===a));return i?i.data.push(t):e.push({status:a,data:[t]}),e}),[]),a=["published","in_review","rejected"];return t.sort(((e,t)=>a.indexOf(e.status)-a.indexOf(t.status)))}(t);return(0,A.jsx)(qr.Provider,{value:{displaySection:a},children:(0,A.jsxs)("div",{style:i.localizedTemplateContainer,children:[(0,Hr().Q)({...i.icon,...i.languageIcon}),(0,A.jsx)(Gr,{groups:r})]})})}function Gr(e){let{groups:t}=e;const a=en();return(0,A.jsx)("div",{style:a.languageDisplayItem,children:t.map(((e,i)=>{let{status:r,data:n}=e;return(0,A.jsxs)("div",{style:a.languageDisplayItem,children:[(0,A.jsx)($r,{status:r,locales:n}),i<t.length-1&&(0,A.jsx)("span",{style:a.languageDisplaySeparator,children:" · "})]},r)}))})}function Zr(e,t){return"in_review"===e?(0,A.jsx)(d().sA,{id:"creatorProfile.templates.draftTemplates.languagesInReviewCount",defaultMessage:"{count, plural, one {1 in review} other {{count} in review}}",values:{count:t}}):"rejected"===e?(0,A.jsx)(d().sA,{id:"creatorProfile.templates.draftTemplates.languagesRejectedCount",defaultMessage:"{count, plural, one {1 rejected} other {{count} rejected}}",values:{count:t}}):(0,A.jsx)(d().sA,{id:"creatorProfile.templates.draftTemplates.languagesCount",defaultMessage:"{count, plural, one {1 language} other {{count} languages}}",values:{count:t}})}function $r(e){let{status:t,locales:a}=e;const r=(0,d().tz)(),n=en(),{displaySection:o}=function(){const e=(0,i.useContext)(qr);if(!e)throw new Error("useLocalizedTemplatesDisplay must be used within a LocalizedTemplatesDisplayContext.Provider");return e}();let s=null;return 0===a.length?null:(s=a.length<=2?(0,A.jsx)("div",{style:n.languageDisplayItem,children:a.map(((e,i)=>{if(!e.locale||!e.id)return null;const s=e.id,l=We(o,s);return(0,A.jsx)("div",{style:n.languageDisplayItemWithGap,children:(0,A.jsxs)("div",{style:n.languageDisplayItem,children:[(0,A.jsx)(Jr,{status:t,hideIcon:i>0,text:(0,Wr().V)(r)[e.locale].languageNameInCurrentLanguage,href:l}),i<a.length-1&&(0,A.jsx)("span",{style:n.languageDisplaySeparator,children:" · "})]})},e.id)}))}):(0,A.jsx)(Xr,{localizedTemplateDraftData:a,status:t,tooltipText:Zr(t,a.length)}),(0,A.jsx)("div",{children:s}))}qr.displayName="LocalizedTemplatesDisplayContext";const Yr={in_review:Vr,draft:a(173019).r,rejected:Or().Q,published:null};function Qr(e){let{status:t,styles:a}=e;if(!t||!Yr[t])return null;const i=Yr[t];return(0,A.jsx)("span",{children:i("rejected"===t?{...a.icon,...a.rejectedIcon}:a.icon)})}function Jr(e){let{href:t,text:a,status:r,hideIcon:n}=e;const[s,l]=(0,i.useState)(!1),d=function(e,t){return(0,o().IS)((a=>{const i=tn(a,e);return{localizedTemplateLink:{color:t?i.hovered:i.base,fontSize:12,fontWeight:L().Wy.medium,display:"flex",alignItems:"center"},icon:{height:16,width:16,fill:t?i.hovered:i.base,marginRight:2},rejectedIcon:{height:12,width:12}}}),[e,t])}(r,s),{setView:c}=Ze(),u=(0,i.useCallback)((e=>{t&&(e.preventDefault(),e.stopPropagation(),e.ctrlKey||e.metaKey?window.open(t,"_blank"):c(t))}),[t,c]),p=(0,i.useCallback)((e=>{t&&1===e.button&&(e.preventDefault(),window.open(t,"_blank"))}),[t]);return(0,A.jsxs)("div",{style:d.localizedTemplateLink,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:u,onAuxClick:p,children:[!n&&r&&(0,A.jsx)(Qr,{status:r,styles:d}),a]})}function Xr(e){let{localizedTemplateDraftData:t,status:a,tooltipText:i}=e;const r=en(),n=(0,d().tz)();return(0,A.jsx)("div",{children:(0,A.jsx)(Na().A,{renderTooltip:()=>(0,A.jsx)("div",{style:r.tooltipContent,children:t.map((e=>e.locale&&(0,A.jsx)(yt().D,{styleName:"Body-12px/Regular",colorName:"contrastPrimary",children:(0,Wr().V)(n)[e.locale].languageNameInCurrentLanguage},e.id)))}),render:e=>(0,A.jsx)("div",{...e,children:(0,A.jsx)(Jr,{text:i,status:a})})})})}function en(){return(0,o().IS)((e=>({localizedTemplateContainer:{display:"flex",alignItems:"flex-start"},languageIcon:{marginTop:2},languageDisplaySeparator:{paddingLeft:4,paddingRight:4,display:"flex",alignItems:"center",color:c().Ay.frontTextLight,height:18},localizedTemplateLink:{color:c().Ay.frontTextLight,fontSize:12,fontWeight:L().Wy.medium},languageDisplayItemWithGap:{display:"flex",alignItems:"center",gap:4},languageDisplayItem:{display:"flex",alignItems:"center",flexWrap:"wrap"},hoveredTextStyle:{color:c().Ay.frontTextDark},tooltipContent:{display:"flex",flexDirection:"column",gap:4},icon:{height:16,width:16,fill:c().Ay.frontTextLight,marginRight:6}})),[])}function tn(e,t){return"in_review"===t?{base:e.creatorProfile.inReviewText,hovered:e.creatorProfile.inReviewHoveredText}:"rejected"===t?{base:e.palette.red[500],hovered:e.palette.red[700]}:"draft"===t?{base:e.palette.blue[500],hovered:e.palette.blue[700]}:{base:c().Ay.frontTextLight,hovered:c().Ay.frontTextDark}}const an=Kr;a(941795);const rn=(0,Fe().wt)("lockedKeyhole",{viewBox:"0 0 64 64",svg:(0,A.jsx)("path",{d:"m44,26v-6c0-7.4-4.6-12-12-12s-12,4.6-12,12v6h-8v30h40v-30h-8Zm-18-6c0-4.09,1.91-6,6-6s6,1.91,6,6v6h-12v-6Zm11,28v2h-10v-2l2.51-6.69c-1.49-.86-2.51-2.46-2.51-4.31,0-2.76,2.24-5,5-5s5,2.24,5,5c0,1.85-1.02,3.45-2.51,4.31l2.51,6.69Z"})});var nn=()=>a(807683),on=()=>a(479490);function sn(e){const[t,a]=(0,i.useState)(!1),r=(0,on().A)("(hover: none)");return(0,i.useEffect)((()=>{e.current&&(e.current.onmouseenter=()=>{a(!0)},e.current.onmouseleave=()=>{a(!1)})}),[e]),{isHovered:t,isTouchDevice:r}}const ln=(0,i.createContext)(void 0);function dn(){const e=(0,i.useContext)(ln);if(!e)throw new Error("TemplateCardContext not found. Please make sure this is used within a TemplateCard.");return e}ln.displayName="TemplateCardContext";const cn=["in_review","rejected","published","published_draft","published_rejected","published_in_review"],un={published:(0,A.jsx)(d().sA,{id:"creatorProfile.draftTemplates.status.published",defaultMessage:"Published"}),rejected:(0,A.jsx)(d().sA,{id:"creatorProfile.draftTemplates.status.rejected",defaultMessage:"Rejected"}),in_review:(0,A.jsx)(d().sA,{id:"creatorProfile.draftTemplates.status.inReview",defaultMessage:"Awaiting Approval"}),published_draft:(0,A.jsx)(d().sA,{id:"creatorProfile.draftTemplates.status.publishedDraft",defaultMessage:"Unpublished Changes"}),published_rejected:(0,A.jsx)(d().sA,{id:"creatorProfile.draftTemplates.status.publishedRejected",defaultMessage:"Changes Rejected"}),published_in_review:(0,A.jsx)(d().sA,{id:"creatorProfile.draftTemplates.status.publishedInReview",defaultMessage:"Changes Awaiting Approval"}),draft:null};function pn(e){const t=(0,o().IS)((e=>({rejectedBadgeContainer:{backgroundColor:e.palette.red[100]},inReviewBadgeContainer:{backgroundColor:"rgba(230, 230, 230, 1)"},inReviewBadgeNewContainer:{backgroundColor:e.creatorProfile.inReviewBackground},inReviewBadgeTitle:{color:"rgba(102, 102, 102, 1)"},inReviewBadgeNewTitle:{color:e.creatorProfile.inReviewText},rejectedBadgeTitle:{color:e.palette.red[500]},publishedBadgeContainer:{backgroundColor:e.palette.green[100]},publishedBadgeTitle:{color:e.palette.green[500]},publishedDraftBadgeContainer:{backgroundColor:e.palette.blue[100]},publishedDraftBadgeTitle:{color:e.palette.blue[500]}})),[]),{templateStatus:a}=e,{isFeatureEnabled:i}=(0,pt().O)("self_serve_localization_frontend");if(void 0===a||!cn.includes(a))return null;const r={..."published"===a?t.publishedBadgeContainer:{},..."published_draft"===a?t.publishedDraftBadgeContainer:{},..."in_review"===a||"published_in_review"===a?i?t.inReviewBadgeNewContainer:t.inReviewBadgeContainer:{},..."rejected"===a||"published_rejected"===a?t.rejectedBadgeContainer:{}},n={..."published_draft"===a?t.publishedDraftBadgeTitle:{},..."published"===a?t.publishedBadgeTitle:{},..."in_review"===a||"published_in_review"===a?i?t.inReviewBadgeNewTitle:t.inReviewBadgeTitle:{},..."rejected"===a||"published_rejected"===a?t.rejectedBadgeTitle:{}},s=un[a];return(0,A.jsx)(Ja,{message:s,badgeContainerStyle:r,badgeTitleStyle:n})}function gn(e){const{children:t,topRightCardOverlay:a,bottomRightCardOverlay:r,onClick:n,href:s,actions:l,shouldShowHoverBackground:d=!0,selected:c=!1}=e,u=(0,o().IS)((e=>({templateCardContainer:{width:"100%",display:"flex",alignItems:"center",gap:"24px",borderRadius:"8px",padding:"16px 24px",cursor:"pointer"},templateCardMobileContainer:{display:"flex",flexDirection:"column",gap:"12px",borderRadius:"8px",cursor:"pointer"},templateCardContainerHovered:{background:"rgba(0, 0, 0, 0.03)"},templateCardContainerPressed:{background:"rgba(0, 0, 0, 0.03)"},templateCardContainerNoHovered:{background:"none"},templateCardContainerNoPressed:{background:"none"},templateCardContainerSelected:{boxShadow:e.shadowSM}})),[]),p=(0,i.useRef)(null),{isHovered:g,isTouchDevice:f}=sn(p),h=(0,on().A)("(max-width: 1190px)")&&Boolean(l),{isMobileWidth:b}=(0,m().LS)(),v={...b?u.templateCardMobileContainer:u.templateCardContainer,...g&&d?u.templateCardContainerHovered:u.templateCardContainerNoHovered,...c?u.templateCardContainerSelected:{}};return(0,A.jsx)(ln.Provider,{value:{isHovered:g,isTouchDevice:f,shouldShowActionsBelowContent:h},children:(0,A.jsxs)("div",{ref:p,style:{position:"relative"},children:[(0,A.jsxs)(ve().A,{style:v,hoveredStyle:d?u.templateCardContainerHovered:u.templateCardContainerNoHovered,pressedStyle:d?u.templateCardContainerPressed:u.templateCardContainerNoPressed,onClick:n,href:s,children:[a?(0,A.jsx)("div",{children:a}):null,r?(0,A.jsx)("div",{children:r}):null,t]}),l]})})}function mn(e){const{imageSrc:t,node:a,topLeftOverlay:i,topRightOverlay:r,onClick:n,type:s="template",style:l}=e,{isMobileWidth:d}=(0,m().LS)(),c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rectangle";return(0,o().IS)((()=>({thumbnail:{position:"relative",borderRadius:"6px",aspectRatio:"16/10",boxShadow:"0px 3px 9px rgb(0 0 0 / 3%)",border:"1px solid rgba(0, 0, 0, 0.08)",flexShrink:0},thumbnailMobile:{height:"210px"},templateCardImage:{...hn[e],objectFit:"cover",borderRadius:"6px"},templateCardImageMobile:{width:"100%",height:"210px",objectFit:"cover",borderRadius:"6px"}})),[e])}("integration"===s?"square":"rectangle"),u=d?c.templateCardImageMobile:c.templateCardImage;return(0,A.jsx)(fn,{onClick:n,children:(0,A.jsxs)("div",{style:{...c.thumbnail,...d?c.thumbnailMobile:{},...l},children:["string"==typeof t?(0,A.jsx)(nn().Ay,{src:t.startsWith("http")?t:`https:${t}`,style:u,placeholderLoadedStyle:u,loading:"lazy"}):(0,A.jsx)("div",{style:u,children:a}),i||null,r||null]})})}function fn(e){const{onClick:t,children:a}=e,{isMobileWidth:i}=(0,m().LS)(),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rectangle";return(0,o().IS)((()=>({templateCardImageWrapper:hn[e],templateCardImageMobileWrapper:{width:"100%",height:"210px"},templateCardImageHover:{background:"transparent"}})),[e])}();return t?(0,A.jsx)(ve().A,{onClick:t,style:i?r.templateCardImageMobileWrapper:r.templateCardImageWrapper,hoveredStyle:r.templateCardImageHover,children:a}):(0,A.jsx)(A.Fragment,{children:a})}const hn={square:{width:80,height:80},rectangle:{width:160,height:100}};function bn(e){const{title:t,subtitle:a,children:i}=e,{isTouchDevice:r,shouldShowActionsBelowContent:n}=dn(),s=(0,o().IS)((()=>({templateCardTitleAndSubtitleContainer:{display:"flex",flexDirection:"column",gap:"2px"},templateCardContentSmallContainer:{display:"flex",flexDirection:"column",gap:"8px"},templateCardContentBigContainer:{display:"flex",alignSelf:"center",justifyContent:"space-between",flexGrow:3},templateCardTitle:{fontWeight:L().Wy.semibold,fontSize:15,lineHeight:"22px"},templateCardContentActionStub:{height:"34px",width:"100%"}})),[]),{isMobileWidth:l}=(0,m().LS)(),d=r||n;return(0,A.jsxs)("div",{style:d?s.templateCardContentSmallContainer:s.templateCardContentBigContainer,children:[(0,A.jsxs)("div",{style:s.templateCardTitleAndSubtitleContainer,children:["string"==typeof t?(0,A.jsx)("span",{style:s.templateCardTitle,children:t}):(0,A.jsx)(A.Fragment,{children:t}),a||null]}),i,n&&!l?(0,A.jsx)("div",{style:s.templateCardContentActionStub}):null]})}function vn(e){const{children:t,imageType:a="rectangle",extraLeftSpacing:r=0,forceShow:n=!1}=e,{isHovered:s,isTouchDevice:l,shouldShowActionsBelowContent:d}=dn(),{isMobileWidth:c}=(0,m().LS)(),u=s&&!l,p=function(e){const{imageType:t,extraLeftSpacing:a}=e,i=hn[t].width;return(0,o().IS)((()=>({templateCardActionsContainer:{position:"absolute",display:"flex",gap:"8px 4px",alignItems:"center",flexWrap:"wrap"},templateCardActionsContainerRight:{right:"24px",top:"50%",transform:"translateY(-50%)"},templateCardActionsContainerBelow:{bottom:"4px",left:i+25+a}})),[i,a])}({imageType:a,extraLeftSpacing:r});if((!u&&!d&&!l||c)&&!n)return null;const g=i.Children.toArray(t),f={...p.templateCardActionsContainer,...d?p.templateCardActionsContainerBelow:p.templateCardActionsContainerRight};return(0,A.jsx)("div",{style:f,children:l||d?g.reverse():g})}function yn(e){const t=(0,o().IS)((()=>({templateTitleContainer:{display:"flex",alignItems:"center",gap:"6px"},templateNarrowWidthTitleContainer:{display:"flex",flexDirection:"column",alignSelf:"self-start",gap:"2px"},templateTitle:{fontWeight:L().Wy.semibold,fontSize:15,lineHeight:"22px"}})),[]),a=(0,on().A)("(max-width: 816px)"),{templateName:i,templateStatus:r}=e;return a?(0,A.jsxs)("div",{style:t.templateNarrowWidthTitleContainer,children:[(0,A.jsx)(pn,{templateStatus:r}),(0,A.jsx)("span",{style:t.templateTitle,children:i})]}):(0,A.jsxs)("div",{style:t.templateTitleContainer,children:[(0,A.jsx)("span",{style:t.templateTitle,children:i}),(0,A.jsx)(pn,{templateStatus:r})]})}function xn(e){const{templateStatus:t}=e,a=(0,o().IS)((e=>({imageOverlayContainer:{position:"absolute",top:-6,right:-7},lockedIconContainer:{height:"20px",width:"20px",borderRadius:"50%",backgroundColor:"rgba(128, 128, 128, 1)",display:"flex",alignItems:"center",justifyContent:"center"},lockedIcon:{width:"14px",height:"14px",fill:e.white}})),[]);return"in_review"===t||"published_in_review"===t?(0,A.jsx)("div",{style:a.imageOverlayContainer,children:(0,A.jsx)("div",{style:a.lockedIconContainer,children:(0,A.jsx)("span",{children:rn(a.lockedIcon)})})}):null}function Sn(e){const{children:t,style:a}=e,{isMobileWidth:i}=(0,m().LS)(),r=(0,o().IS)((()=>({templateCardGrid:{display:"flex",flexDirection:"column",gap:"28px"},templateCardGridMobile:{display:"flex",flexDirection:"column",gap:"40px"}})),[]);return(0,A.jsx)("div",{style:{...i?r.templateCardGridMobile:r.templateCardGrid,...a},children:t})}function wn(){const e=(0,o().IS)((()=>({ellipseContainer:{width:"2px",height:"2px",borderRadius:"50%",background:"rgba(128, 128, 128, 1)"}})),[]);return(0,A.jsx)("div",{style:e.ellipseContainer})}function Cn(e){var t,a;const{creatorId:s}=e,c=(0,o().IS)((e=>({publishedTemplatesSubHeader:{display:"flex",marginLeft:"-12px",marginTop:"-4px",color:"black"},publishedTemplateLoadMore:{display:"flex",justifyContent:"center",marginTop:"24px"},templateCardGridContainer:{minHeight:"300px"},noPublishedTemplatesText:{color:e.text.primary}})),[]),u=(0,r().v3)(),p=(0,d().tz)(),g=(0,i.useRef)("idle"),{isStatsigReady:m,isFeatureEnabled:f}=(0,pt().O)("self_serve_localization_frontend"),{name:h}=Ze(),b=(0,n().K8)((()=>{const e=oe().A.state,{orderBy:t,page:a,paid:i="all"}=e.publishedTemplateSearchArgs;return{publishedTemplatesSearch:e.publishedTemplatesSearch,orderBy:t,page:a,paid:i}}),[]),{publishedTemplatesSearch:v,orderBy:y,page:x,paid:S}=b,[w,C]=(0,i.useState)(le({creatorId:s,orderBy:y,paid:S})),[{status:j}]=(0,l().Yb)((async()=>m&&h?de({environment:u,locale:p,creatorId:s,orderBy:y,paid:S,page:x,includeLocalizedTemplates:f}):Promise.resolve({})),[u,p,s,y,S,x,m,f,h]),M=(0,i.useCallback)((async(e,t)=>{await ce({environment:u,templateId:e,templateName:t,creatorId:s,type:"pin"})}),[s,u]);(0,i.useEffect)((()=>{"resolved"===j&&"pending"===g.current&&C(`${s}::${y}::${S}`),g.current=j}),[j,y,S,s]);const _=v[w],I=(null==_||null===(t=_.templates)||void 0===t?void 0:t.reduce(((e,t)=>t.length+e),0))||0;return 0===I&&"recent"===y&&"all"===S?null:(0,A.jsxs)("section",{children:[(0,A.jsx)(De().y,{size:"medium",header:(0,A.jsx)(d().sA,{defaultMessage:"Published",id:"creatorProfile.templates.published"}),subHeader:(0,A.jsx)("div",{style:c.publishedTemplatesSubHeader,children:(0,A.jsxs)("div",{style:{display:"flex"},children:[(0,A.jsx)(xt().A,{items:In,getKey:e=>e.value,onSelect:e=>{oe().A.setState({...oe().A.state,publishedTemplateSearchArgs:{...oe().A.state.publishedTemplateSearchArgs,paid:e.val,page:1}})},selectedItem:In.find((e=>e.val===S)),renderItem:e=>(0,A.jsx)(vt().A,{...e,title:e.key}),renderOrigin:e=>{var t;return(0,A.jsx)(Ur()._,{focused:!1,title:void 0===S?In[0].value:null===(t=In.find((e=>e.val===S)))||void 0===t?void 0:t.value,...e})}}),(0,A.jsx)(xt().A,{items:kn,getKey:e=>e.value,onSelect:e=>{oe().A.setState({...oe().A.state,publishedTemplateSearchArgs:{...oe().A.state.publishedTemplateSearchArgs,orderBy:e.val,page:1}})},selectedItem:kn.find((e=>e.val===y)),renderItem:e=>(0,A.jsx)(vt().A,{...e,title:e.key}),renderOrigin:e=>{var t;return(0,A.jsx)(Ur()._,{focused:!1,title:null===(t=kn.find((e=>e.val===y)))||void 0===t?void 0:t.value,...e})}})]})})}),m?0===I?(0,A.jsx)("div",{style:c.templateCardGridContainer,children:(0,A.jsx)("span",{style:c.noPublishedTemplatesText,children:(0,A.jsx)(d().sA,{id:"creatorPlatform.publishedTemplates.noTemplates.label",defaultMessage:"No published templates found."})})}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Sn,{style:c.templateCardGridContainer,children:(null==_||null===(a=_.templates)||void 0===a?void 0:a[0].length)>0?(0,A.jsx)(A.Fragment,{children:_.templates.map((e=>e.map((e=>{const t=null==_?void 0:_.templateGroupsByContentfulId;return(0,A.jsx)(jn,{templateId:e,pinTemplate:M,localizedTemplateGroups:t},`publishedTemplateCard--${e}`)}))))}):null}),["idle","resolved"].includes(j)&&(null==_?void 0:_.count)>I?(0,A.jsx)("div",{style:c.publishedTemplateLoadMore,children:(0,A.jsx)(_r().u,{variant:"light",onClick:()=>{oe().A.setState({...oe().A.state,publishedTemplateSearchArgs:{...oe().A.state.publishedTemplateSearchArgs,page:oe().A.state.publishedTemplateSearchArgs.page+1}})},children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.publishedTemplates.button.loadMore",defaultMessage:"Load More"})})}):null]}):(0,A.jsx)("div",{children:(0,A.jsx)(Ji().A,{})})]})}function jn(e){var t,a;const{templateId:i,pinTemplate:o}=e,{isFeatureEnabled:s}=(0,pt().O)("self_serve_localization_frontend"),l=(0,r().v3)(),c=Nr(i),u=c.contentfulId,p=function(e){const t=(0,r().v3)(),{isFeatureEnabled:a}=(0,pt().O)("self_serve_localization_frontend");return(0,n().K8)((()=>e&&a?e.map((e=>{const a=new(Bt().$x)(t,{table:"template",id:e}),i=a.getTemplateDraftId();let r;if(i){const e=new(Bt().x1)(t,{table:"template_draft",id:i});if(e.isReady()&&e.isDefined()){const t=e.getStatus();"published"!==t&&(r=t)}}return{name:a.getName(),locale:a.getLocale(),id:e,...r?{status:r}:{}}})):[]),[t,e,a])}(u?null===(t=e.localizedTemplateGroups)||void 0===t?void 0:t[u]:[]),g=c.templateDraftId,{setView:m}=Ze(),f=(0,n().K8)((()=>{if(!g)return;const e=new(Bt().x1)(l,{table:"template_draft",id:g});return e.isReady()&&e.isDefined()?e.getStatus():void 0}),[l,g]),h="published"!==f&&void 0!==f?`published_${f}`:f,b=We("published",i);return(0,A.jsxs)(gn,{href:s?void 0:b,onClick:s?()=>m(b):void 0,actions:(0,A.jsxs)(vn,{children:[(0,A.jsx)(_n,{pinTemplate:o,templateId:i,templateName:c.name||""},`pinPublishedTemplate-${i}`),"in_review"===f?(0,A.jsx)(zr,{href:`/profile/templates/form/published/${i}`,children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.button.viewTemplate",defaultMessage:"View Submission"})}):(0,A.jsx)(zr,{href:`/profile/templates/form/published/${i}`})]}),children:[(0,A.jsx)(mn,{imageSrc:null==c||null===(a=c.image)||void 0===a?void 0:a.url,node:null,topRightOverlay:(0,A.jsx)(xn,{templateStatus:h})}),(0,A.jsx)(bn,{title:(0,A.jsx)(yn,{templateName:c.name||"",templateStatus:s||"published"===h?void 0:h}),subtitle:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Mn,{price:c.price,duplicationCount:c.numberDuplicates}),s&&p.length>0&&(0,A.jsx)(Kr,{localizedTemplateDraftData:p,displaySection:"published"})]})})]})}function Mn(e){const t=(0,o().IS)((()=>({publishedTemplatesSubHeader:{display:"flex",marginLeft:"-12px",marginTop:"-4px",color:"black"},priceText:{color:c().Ay.black,fontWeight:L().Wy.medium},publishedTemplateLoadMore:{display:"flex",justifyContent:"center",marginTop:"24px"},publishedTemplateCardContentContainer:{display:"flex",alignItems:"center",gap:"5px",color:c().Ay.frontTextLight,fontSize:"12px",minHeight:"12px"},publishedTemplateCardDuplicates:{display:"flex",alignItems:"center",gap:"2px",fontSize:"12px"}})),[]),{price:a,duplicationCount:i}=e,r=(0,d().tz)(),n=i&&i>0,s=void 0!==a;return n||s?(0,A.jsxs)("div",{style:t.publishedTemplateCardContentContainer,children:[s&&(0,A.jsx)("span",{style:t.priceText,children:(0,A.jsx)(Lt().v,{cost:{currencyCode:"USD",amount:100*a},trailingZeroDisplay:"auto",intl:r})}),n&&s&&(0,A.jsx)(wn,{}),(0,A.jsx)("span",{style:t.publishedTemplateCardDuplicates,children:n?(0,A.jsxs)(A.Fragment,{children:[(0,Fr().X)({height:12,width:12}),gt().ZV(e.duplicationCount,"compact",r)]}):null})]}):null}function _n(e){const{pinTemplate:t,templateId:a,templateName:i}=e;return(0,A.jsx)(_().p,{isLightGray:!0,onClick:()=>t(a,i),children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.publishedTemplates.button.pin",defaultMessage:"Pin"})},`pin-button-${a}`)}const An=(0,d().YK)({selectPriceFilterAll:{id:"creatorProfile.filter.all",defaultMessage:"Free & Paid"},selectPriceFilterPaid:{defaultMessage:"Paid",id:"creatorProfile.filter.paid"},selectPriceFilterFree:{defaultMessage:"Free",id:"creatorProfile.filter.free"},selectSortValueRecent:{defaultMessage:"Most Recent",id:"creatorProfile.sort.recent"},selectSortValueDuplication:{defaultMessage:"Duplications",id:"creatorProfile.sort.duplication"}}),In=[{value:An.selectPriceFilterAll.defaultMessage,val:"all"},{value:An.selectPriceFilterPaid.defaultMessage,val:"paid"},{value:An.selectPriceFilterFree.defaultMessage,val:"free"}],kn=[{value:An.selectSortValueRecent.defaultMessage,val:"recent"},{value:An.selectSortValueDuplication.defaultMessage,val:"duplications"}],Tn=(0,d().YK)({eligibleTemplateCount:{id:"creatorProfile.couponForm.templates.eligibleTemplateCount",defaultMessage:"{count, plural, one {{count} eligible template} other {{count} eligible templates}}"},selectedTemplateCount:{id:"creatorProfile.couponForm.templates.selectedTemplateCount",defaultMessage:"{count, plural, one {{count} selected} other {{count} selected}}"},searchPlaceholder:{id:"creatorProfile.couponForm.templates.searchPlaceholder",defaultMessage:"Search templates"},selectTemplate:{id:"creatorProfile.couponForm.templates.selectTemplate",defaultMessage:"Select"},unselectTemplate:{id:"creatorProfile.couponForm.templates.unselectTemplate",defaultMessage:"Unselect"}});function Pn(){const e=(0,d().tz)(),t=(0,r().v3)(),a=(0,o().IS)((e=>({templatePickerSection:{display:"flex",flexDirection:"column",gap:6},container:{display:"flex",flexDirection:"column",gap:12,borderWidth:1,borderStyle:"solid",borderRadius:12,borderColor:e.stroke.primary},errorContainer:{display:"flex",flexDirection:"column",gap:12,borderWidth:1,borderStyle:"solid",borderRadius:12,borderColor:e.stroke.uiRedPrimary},header:{display:"flex",justifyContent:"space-between",borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.stroke.primary,padding:"16px 24px"},headerTitle:{alignSelf:"center",fontWeight:500,fontSize:14},searchInput:{lineHeight:"40px",fontSize:16,width:300,borderRadius:10},templatesContainer:{display:"flex",flexDirection:"column",gap:12,padding:"8px 24px 16px 24px",maxHeight:772,overflowY:"auto"},errorMessage:{color:e.errorText,fontSize:12,fontWeight:400,lineHeight:"16px"}})),[]),[{status:s}]=(0,l().Yb)((async()=>await async function(e){const{environment:t,intl:a}=e,i=(0,v().H)(a),r=await x().callApi({eventName:"getCreatorTemplates",environment:t,data:{locale:i,limit:ur,offset:0,orderBy:"recent",filterBy:{checkoutEnabled:!0},includeLocalizedTemplates:!0}});if("success"===r.type){const e=Object.values(r.data.templateGroupsByContentfulId??{}).flat();sr.setState({templateIds:e})}}({environment:t,intl:e})),[t,e]),c=(0,n().K8)((()=>sr.state.templateIds),[]),u=(0,n().K8)((()=>nr.state.eligible_listing_ids??[]),[]),p=(0,n().K8)((()=>nr.state.eligibleListingIdsError),[]),{templateStores:g,listingStores:m}=(0,n().K8)((()=>{const e=c.map((e=>new(Rr().s)(t,{table:Dt().XX,id:e}))),a=e.map((e=>{const a=e.getListingId();return a?new(Bt().$1)(t,{table:Fi().UL,id:a}):null}));return{templateStores:e,listingStores:a}}),[t,c]),[f,h]=(0,i.useState)(""),[b,y]=(0,i.useState)(g);(0,i.useEffect)((()=>{if(!f)return void y(g);const e=g.filter((e=>{var t;return null===(t=e.getName())||void 0===t?void 0:t.toLowerCase().includes(f.toLowerCase())}));y(e)}),[g,f]);const S=(0,n().K8)((()=>b.map((t=>{var a;const i=m.find((e=>(null==e?void 0:e.id)===t.getListingId()));if(!i)return null;const r=i.id,n=(i.getPrice()??0)/100,o=i.getInstallationCount(),s=o&&o>0?o:void 0,l=u.includes(r);return(0,A.jsxs)(gn,{selected:l,actions:(0,A.jsx)(vn,{forceShow:l,children:(0,A.jsx)(_r().u,{variant:l?"neutral":"light",onClick:()=>{if(l)nr.setState({...nr.state,eligible_listing_ids:[...u.filter((e=>e!==r))]});else{const e=Array.from(new Set([...u,r]));nr.setState({...nr.state,eligible_listing_ids:e})}},children:l?e.formatMessage(Tn.unselectTemplate):e.formatMessage(Tn.selectTemplate)})}),children:[(0,A.jsx)(mn,{type:"template",imageSrc:null===(a=t.getAttributes())||void 0===a||null===(a=a.image)||void 0===a?void 0:a.url,node:void 0}),(0,A.jsx)(bn,{title:t.getName(),subtitle:(0,A.jsx)(Mn,{price:n,duplicationCount:s})})]},t.id)}))),[b,m,e,u]),w=Ni(u);return(0,i.useEffect)((()=>{w.length>0&&nr.setState({...nr.state,eligibleListingIdsError:void 0,eligible_listing_ids:w})}),[w]),"pending"===s?(0,A.jsx)(Ji().A,{}):(0,A.jsxs)("div",{style:a.templatePickerSection,children:[(0,A.jsxs)("div",{style:p?a.errorContainer:a.container,children:[(0,A.jsxs)("div",{style:a.header,children:[(0,A.jsx)("div",{style:a.headerTitle,children:w.length>0?e.formatMessage(Tn.selectedTemplateCount,{count:w.length}):e.formatMessage(Tn.eligibleTemplateCount,{count:b.length})}),(0,A.jsx)(Br().A,{left:(0,A.jsx)(we().Q,{iconGroup:Er().C,variantName:"default",colorName:"secondary"}),style:a.searchInput,placeholder:e.formatMessage(Tn.searchPlaceholder),value:f,onChange:e=>h(e.target.value)})]}),(0,A.jsx)("div",{style:a.templatesContainer,children:S})]}),p&&(0,A.jsx)("div",{style:a.errorMessage,children:p})]})}let Ln=function(e){return e[e.Default=0]="Default",e}({});function Dn(){const e=Fn(),t=(0,d().tz)(),[a,o]=(0,i.useState)(!1),s=$i().c9.now().toUTC().startOf("day"),l=s.toMillis(),c=s.toFormat("yyyy-MM-dd"),u=(0,r().v3)(),p=(0,r().Y0)(),g=i.useRef(null),{setView:m,name:f}=Ze(),h=ya();(0,i.useEffect)((()=>{h||m("/profile/coupons")}),[h,m]);const b=null!=f&&f.startsWith("/profile/coupons/edit/")?f.split("/profile/coupons/edit/")[1]:void 0;!function(e){const t=(0,r().v3)();(0,n().K8)((()=>{if(!e){const e=nr.getInitialState();return void nr.setState({...e,initialValues:{...e}})}const a=new(Mr().t)(t,{table:Pa().QO,id:e});if(!a.canRead())return;const i=a.getModel();if(!i)return;const r=i.start_time?$i().c9.fromMillis(parseInt(i.start_time.toString()),{zone:"utc"}).toFormat("yyyy-MM-dd"):"",n=i.end_time?$i().c9.fromMillis(parseInt(i.end_time.toString()),{zone:"utc"}).toFormat("yyyy-MM-dd"):"",o=nr.getInitialState(),s={id:i.id,code:i.code,discount:{value:i.getDiscount().value,type:i.getDiscount().type},coupon_usage:{limit:i.getCouponUsage().limit,number_of_uses:i.getCouponUsage().number_of_uses},active:i.active,startDate:r,endDate:n,apply_to_all:i.apply_to_all,eligible_listing_ids:i.getEligibleListingIds()};nr.setState({...o,...s,initialValues:{...s}})}),[t,e])}(b);const v=Boolean(b),{code:y,codeError:x,discountValueError:S,active:w,startDate:C,startDateError:j,endDate:M,endDateError:_,coupon_usage:I,usageLimitError:k,apply_to_all:T,eligibleListingIdsError:P}=(0,n().K8)((()=>nr.state),[]),L=Intl.DateTimeFormat().resolvedOptions().timeZone,D=Boolean(C&&yr(C)),E=[x,S,j,_,k,P].filter((e=>Boolean(e))).length;(0,i.useEffect)((()=>{const e=e=>{Qi().blurActiveElement()};return document.addEventListener("wheel",e),()=>{document.removeEventListener("wheel",e)}}),[]);const B=C?$i().c9.fromFormat(C,"yyyy-MM-dd").startOf("day").toMillis():void 0,R=M?$i().c9.fromFormat(M,"yyyy-MM-dd").endOf("day").toMillis():void 0;return(0,A.jsxs)("div",{children:[(0,A.jsx)(De().y,{size:"large",header:v?(0,A.jsx)(d().sA,{defaultMessage:"Edit coupon",id:"creatorProfile.coupons.form.editTitle"}):(0,A.jsx)(d().sA,{defaultMessage:"Create a coupon",id:"creatorProfile.coupons.form.createTitle"}),subHeader:v?(0,A.jsx)(d().sA,{defaultMessage:"Edits will immediately take effect",id:"creatorProfile.coupons.form.editSubtitle"}):(0,A.jsx)(d().sA,{defaultMessage:"New coupons will be available for use immediately.",id:"creatorProfile.coupons.form.createSubtitle"})}),(0,A.jsx)(kr,{count:E,ref:g}),(0,A.jsxs)("div",{style:e.container,children:[(0,A.jsxs)("div",{style:e.basicDetails,children:[(0,A.jsx)(yt().D,{styleName:"UITitle-22px/Semibold",children:(0,A.jsx)(d().sA,{defaultMessage:"Basic details",id:"creatorProfile.coupons.form.couponBody"})}),(0,A.jsx)("div",{children:(0,A.jsx)(Pr().o,{htmlLabel:"couponCode",label:(0,A.jsx)(d().sA,{defaultMessage:"Coupon code",id:"creatorProfile.coupons.form.couponCode"}),required:!0,placeholder:t.formatMessage(Rn.couponPlaceholder),type:"text",format:Ln.Default,style:v?e.textInputEditing:e.textInput,error:x,errorMessageStyle:e.errorMessage,value:y,disabled:v,onChange:e=>{nr.setState({...nr.state,code:e.target.value.toLocaleUpperCase()})},onFocus:()=>cr("codeError"),onBlur:async e=>{gr(e.target.value),await lr(u,e.target.value)},maxlength:yi,children:!x&&(0,A.jsxs)("div",{style:e.codeHelperText,children:[v?t.formatMessage(Rn.codeHelperTextEdit):t.formatMessage(Rn.codeHelperText),(0,A.jsx)(Tr().c,{maxLength:yi,inputLength:y.length})]})})}),(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{style:e.discountSection,children:[(0,A.jsx)(En,{}),(0,A.jsx)("div",{style:S?e.discountPickerError:e.discountPicker,children:(0,A.jsx)(Bn,{})})]}),!S&&(0,A.jsx)("div",{style:e.helperText,children:t.formatMessage(Rn.discountHelperText)})]}),(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{style:e.activeToggle,children:[(0,A.jsx)(Dr,{isActive:w,onClick:()=>{nr.setState({...nr.state,active:!w})}}),(0,A.jsx)(d().sA,{defaultMessage:"Active",id:"creatorProfile.coupons.form.activeToggle"})]}),(0,A.jsx)("div",{style:e.helperText,children:t.formatMessage(Rn.activeToggleText)})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(ye().Ay,{popupType:p.isMobile?ye().z7.SlideUp:ye().z7.Popup,render:t=>(0,A.jsx)("div",{style:e.datePickerContainer,children:(0,A.jsx)(Xi().A,{value:B||l,firstDayOfWeek:0,onChange:e=>{var a;const i=$i().c9.fromMillis(e);nr.setState({...nr.state,startDate:null===(a=i.toISO())||void 0===a?void 0:a.split("T")[0]}),t.close()},onBlur:e=>{var t,a;const i=$i().c9.fromJSDate(e,{zone:L});nr.setState({...nr.state,startDate:null===(t=i.toISO())||void 0===t?void 0:t.split("T")[0]}),fr(null===(a=i.toISO())||void 0===a?void 0:a.split("T")[0])},onFocus:()=>{cr("startDateError")},disabledDays:{before:$i().c9.fromFormat(c,"yyyy-MM-dd").toJSDate(),...R?{after:new Date(R)}:{}}})}),placementToOrigin:ye().sx.Top,renderOrigin:a=>(0,A.jsx)(er().A,{htmlLabel:"startDate",errorMessage:j,errorMessageStyle:e.errorMessage,name:(0,A.jsx)(d().sA,{defaultMessage:"Start date (UTC)",id:"creatorProfile.coupons.form.startDate"}),children:(0,A.jsxs)("div",{style:e.dateButtonLabel,children:[(0,A.jsx)(ve().A,{...a,style:!C||v&&D?{...e.dateButton,...e.datePlaceholder}:e.dateButton,disabled:v&&D,children:C||"YYYY-MM-DD"}),(!v||!D)&&(0,A.jsx)(ve().A,{onClick:()=>{nr.setState({...nr.state,startDate:""})},ariaLabel:t.formatMessage(Rn.clearStartDate),children:(0,A.jsx)(we().Q,{iconGroup:Yi().G,variantName:"small",colorName:"tertiary"})})]})})}),!j&&(0,A.jsx)("div",{style:e.helperText,children:v&&D?t.formatMessage(Rn.startDateEditText):t.formatMessage(Rn.startDateHelperText)})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(ye().Ay,{popupType:p.isMobile?ye().z7.SlideUp:ye().z7.Popup,render:t=>(0,A.jsx)("div",{style:e.datePickerContainer,children:(0,A.jsx)(Xi().A,{value:R||l,firstDayOfWeek:0,onChange:e=>{var a;const i=$i().c9.fromMillis(e,{zone:L});nr.setState({...nr.state,endDate:null===(a=i.toISO())||void 0===a?void 0:a.split("T")[0]}),t.close()},onBlur:e=>{var t;hr(null===(t=$i().c9.fromJSDate(e,{zone:L}).toISO())||void 0===t?void 0:t.split("T")[0])},onFocus:()=>{cr("endDateError")},disabledDays:{before:new Date(B&&B>l?B:l)}})}),placementToOrigin:ye().sx.Top,renderOrigin:a=>(0,A.jsx)(er().A,{htmlLabel:"endDate",errorMessage:_,errorMessageStyle:e.errorMessage,name:(0,A.jsx)(d().sA,{defaultMessage:"End date (UTC)",id:"creatorProfile.coupons.form.endDate"}),children:(0,A.jsxs)("div",{style:e.dateButtonLabel,children:[(0,A.jsx)(ve().A,{...a,style:M?e.dateButton:{...e.dateButton,...e.datePlaceholder},children:M||"YYYY-MM-DD"}),(0,A.jsx)(ve().A,{onClick:()=>{nr.setState({...nr.state,endDate:""})},ariaLabel:t.formatMessage(Rn.clearEndDate),children:(0,A.jsx)(we().Q,{iconGroup:Yi().G,variantName:"small",colorName:"tertiary"})})]})})}),!_&&(0,A.jsx)("div",{style:e.helperText,children:t.formatMessage(Rn.endDateHelperText)})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(Pr().o,{htmlLabel:"usageLimit",label:(0,A.jsx)(d().sA,{defaultMessage:"Usage limit",id:"creatorProfile.coupons.form.usageLimit"}),placeholder:t.formatMessage(Rn.usageLimitPlaceholder),type:"number",format:Ln.Default,style:e.textInput,value:I.limit===Number.MAX_VALUE?"":I.limit.toString(),error:k,onChange:e=>{const a=Number(e.target.value);a>Si?nr.setState({...nr.state,usageLimitError:t.formatMessage(Rn.usageLimitTooHigh)}):(cr("usageLimitError"),nr.setState({...nr.state,coupon_usage:{...nr.state.coupon_usage,limit:""===e.target.value?Number.MAX_VALUE:a}}))},onFocus:e=>{parseInt(e.target.value)>Si||cr("usageLimitError")},onBlur:e=>{br(nr.state.coupon_usage.limit)},inputElementAttributes:{min:0,step:1,max:1e6}}),!k&&(0,A.jsx)("div",{style:e.helperText,children:t.formatMessage(Rn.usageLimitHelperText)})]})]}),(0,A.jsxs)("div",{style:e.eligibleProducts,children:[(0,A.jsx)("div",{style:e.eligibleProductsTitle,children:(0,A.jsx)(yt().D,{styleName:"UITitle-22px/Semibold",children:(0,A.jsx)(d().sA,{defaultMessage:"Eligible products",id:"creatorProfile.coupons.form.eligibleProducts"})})}),(0,A.jsxs)("div",{style:e.activeToggle,children:[(0,A.jsx)(Dr,{isActive:T,onClick:()=>{nr.setState({...nr.state,apply_to_all:!T,eligible_listing_ids:[],eligibleListingIdsError:void 0})}}),(0,A.jsx)(d().sA,{defaultMessage:"Apply to all products",id:"creatorProfile.coupons.form.applyToAllToggle"})]}),T?null:(0,A.jsx)(Pn,{})]})]}),(0,A.jsxs)("div",{style:e.submitSection,children:[(0,A.jsx)(_r().u,{variant:"light",onClick:()=>{(0,rt().u)({environment:u,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"cancel",source:v?"edit_form":"new_coupon_form"}}}),m("/profile/coupons")},children:(0,A.jsx)(d().sA,{id:"creatorProfileForm.cancel.button",defaultMessage:"Cancel"})}),(0,A.jsx)(_r().u,{variant:"dark",onClick:async()=>{o(!0);try{const e=await dr(u);!0===e?(nr.reset(),m("/profile/coupons",!0)):_a().Rt({element:null==g?void 0:g.current,environment:u,options:{behavior:"smooth"}}),(0,rt().u)({environment:u,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"save",source:v?"edit_form":"new_coupon_form",coupon_id:v?b:void 0,result:!0===e?"success":"error"}}})}catch(e){}finally{o(!1)}},children:a?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(d().sA,{id:"creatorProfileForm.editCoupon.button.saving",defaultMessage:"Saving"}),(0,A.jsx)(Ji().A,{style:e.spinner})]}):(0,A.jsx)(d().sA,{id:"creatorProfileForm.editCoupon.button.save",defaultMessage:"Save"})})]})]})}function En(){const e=(0,d().tz)(),t=Fn(),[a,r]=i.useState(""),{discount:o,discountValueError:s}=(0,n().K8)((()=>nr.state),[]);return(0,i.useEffect)((()=>{r(0===o.value?"":(o.value/100).toFixed(2))}),[o.value]),(0,A.jsxs)("div",{style:t.discountValue,children:["fixed"===o.type&&(0,A.jsx)(Pr().o,{htmlLabel:"discountValue",label:(0,A.jsx)(d().sA,{defaultMessage:"Discount",id:"creatorProfile.coupons.form.discountValue"}),required:!0,type:"number",error:s,placeholder:e.formatMessage({defaultMessage:"Amount",id:"creatorProfile.couponSubmission.fixedDiscountPlaceholder"}),format:Ln.Default,style:t.discountTextInput,value:a,onChange:t=>{Number(t.target.value)>wi?nr.setState({...nr.state,discountValueError:e.formatMessage(Rn.discountTooHigh)}):cr("discountValueError"),r(t.target.value)},onFocus:e=>{Number(a)>wi||cr("discountValueError")},onBlur:e=>{nr.setState({...nr.state,discount:{...o,value:100*Number(a)}}),mr(nr.state.discount)}}),"percentage"===o.type&&(0,A.jsx)(Pr().o,{htmlLabel:"discountValue",label:(0,A.jsx)(d().sA,{defaultMessage:"Discount",id:"creatorProfile.coupons.form.discountValue"}),required:!0,error:s,placeholder:e.formatMessage({defaultMessage:"Percentage",id:"creatorProfile.couponSubmission.percentageDiscountPlaceholder"}),format:Ln.Default,style:t.discountTextInput,value:0===o.value?"":o.value.toString(),onChange:e=>{nr.setState({...nr.state,discount:{...o,value:""===e.target.value?0:parseInt(e.target.value)}})},onFocus:e=>{cr("discountValueError")},onBlur:e=>{mr(o)},type:"number"})]})}function Bn(){const e=Fn(),t={percentage:(0,A.jsx)(d().sA,{id:"creatorProfile.couponForm.percentOffDiscount",defaultMessage:"% off"}),fixed:(0,A.jsx)(d().sA,{id:"creatorProfile.couponForm.fixedDiscount",defaultMessage:"Fixed discount ($)"})},a=(0,n().K8)((()=>nr.state.discount.type),[]),i={items:["fixed","percentage"],getKey:e=>e,selectedItem:a,width:"100%",minWidth:"100%",onSelect:e=>{nr.setState({...nr.state,discountValueError:void 0,discount:{type:e,value:0}})},renderItem:e=>(0,A.jsx)(vt().A,{...e,title:t[e.value]}),renderOrigin:i=>(0,A.jsxs)(Xe().A,{size:"lg",...i,buttonStyle:e.discountPickerButton,children:[(0,A.jsx)("span",{children:t[a]}),(0,A.jsx)(we().Q,{colorName:"secondary",iconGroup:be().I,variantName:"small"})]}),sameWidthAsOrigin:!0};return(0,A.jsx)("div",{children:(0,A.jsx)(xt().A,{...i})})}const Rn=(0,d().YK)({clearStartDate:{id:"creatorProfile.coupons.form.clearStartDate",defaultMessage:"Clear start date"},clearEndDate:{id:"creatorProfile.coupons.form.clearEndDate",defaultMessage:"Clear end date"},discountHelperText:{id:"creatorProfile.coupons.form.discountHelperText",defaultMessage:"If the discount makes the template price less than $0.99, it will be rounded up to $0.99."},codeHelperText:{id:"creatorProfile.coupons.form.codeHelperText",defaultMessage:"Coupon code must only use numbers and letters."},codeHelperTextEdit:{id:"creatorProfile.coupons.form.codeHelperTextEdit",defaultMessage:"Coupon code cannot be edited after it has been created."},couponPlaceholder:{id:"creatorProfileForm.creatorDetail.form.couponPlaceholder",defaultMessage:"Enter coupon code"},activeToggleText:{id:"creatorProfile.coupons.form.activeToggleText",defaultMessage:"If you don't activate the coupon now, you can activate it later."},startDateHelperText:{id:"creatorProfile.coupons.form.startDateHelperText",defaultMessage:"Start date for when coupon is valid. If empty, coupon will start immediately."},startDateEditText:{id:"creatorProfile.coupons.form.startDateEditText",defaultMessage:"Cannot edit start date of coupon that has already passed."},endDateHelperText:{id:"creatorProfile.coupons.form.endDateHelperText",defaultMessage:"End date for when coupon is valid. If empty, coupon will not expire."},usageLimitPlaceholder:{id:"creatorProfile.coupons.form.usageLimitPlaceholder",defaultMessage:"Number of uses"},usageLimitHelperText:{id:"creatorProfile.coupons.form.usageLimitHelperText",defaultMessage:"Number of times coupon can be used. If empty, coupon can be used unlimited times."},usageLimitTooHigh:{id:"creatorProfile.coupons.form.usageLimitTooHighError",defaultMessage:"Usage limit is too high."},discountTooHigh:{id:"creatorProfile.coupons.form.discountTooHigh",defaultMessage:"Fixed discount is too large."}});function Fn(){return(0,o().IS)((e=>({datePickerContainer:{padding:"18px 14px 14px"},container:{display:"flex",flexDirection:"column",gap:"60px"},title:{marginBottom:"10px"},basicDetails:{gap:"32px",paddingTop:"12px",display:"flex",flexDirection:"column"},helperText:{fontSize:12,marginTop:"6px",color:e.text.tertiary},codeHelperText:{fontSize:12,marginTop:"6px",color:e.text.tertiary,display:"flex",flexDirection:"row",justifyContent:"space-between"},sectionSubtitle:{fontSize:14,color:e.text.tertiary},textInput:{background:"transparent",fontSize:14,borderRadius:tr().A.borderRadius,padding:"9px"},textInputEditing:{background:"transparent",fontSize:14,borderRadius:tr().A.borderRadius,padding:"9px",color:e.text.tertiary},discountTextInput:{background:"transparent",fontSize:14,borderRadius:tr().A.borderRadius,padding:"9px"},discountMenuItem:{width:"100%"},activeToggle:{display:"flex",alignItems:"center",gap:"8px",width:"fit-content"},eligibleProductsTitle:{display:"flex",flexDirection:"column",gap:"4px"},eligibleProducts:{display:"flex",flexDirection:"column",gap:"24px"},submitSection:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",gap:12,marginTop:40,background:"white",padding:"10px 0 20px 0"},discountSection:{display:"flex",flexDirection:"row",gap:"8px",alignItems:"flex-end"},discountValue:{width:"50%"},discountPicker:{width:"50%",marginTop:"22px"},discountPickerError:{width:"50%",marginTop:"22px",marginBottom:"24px"},discountPickerButton:{display:"flex",flexDirection:"row",justifyContent:"space-between",border:`1px solid ${e.outlineButtonBorder}`,padding:"9px",height:"38px"},errorMessage:{marginTop:"6px"},spinner:{marginLeft:"4px"},dateButton:{display:"flex",alignItems:"center",flexGrow:1,fontSize:15,lineHeight:"26px",borderRadius:6,paddingTop:4,paddingBottom:4,paddingLeft:10,paddingRight:10,boxShadow:e.inputBoxShadow},datePlaceholder:{color:e.text.tertiary},dateButtonLabel:{display:"flex",alignItems:"center",gap:"4px"}})),[])}function Un(e){const{creatorId:t}=e,{setView:a,name:n}=Ze(),o=(0,r().v3)(),s=null!=t,l=ya();return(0,i.useEffect)((()=>{l||"/profile/coupons"===n||a("/profile/coupons")}),[l,a,n]),(0,A.jsxs)("div",{children:[(0,A.jsxs)(Aa,{route:"/profile/coupons",exact:!0,children:[(0,A.jsxs)(ba().Ye,{justifyContent:"space-between",children:[(0,A.jsx)(De().y,{size:"large",header:(0,A.jsx)(d().sA,{id:"creatorProfile.coupons.pageHeader",defaultMessage:"Coupons"}),subHeader:(0,A.jsx)(d().sA,{id:"creatorProfile.coupons.pageHeaderSubtitle",defaultMessage:"Manage all of your coupons. Learn more about coupons <couponLink>here</couponLink>.",values:{couponLink:e=>(0,A.jsx)(ha().A,{external:!0,href:(0,va().xS)("guides.marketplaceSelling"),children:e})}})}),s&&l&&(0,A.jsx)(Ie().A,{onClick:()=>{(0,rt().u)({environment:o,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"create",source:"creator_coupons"}}}),a("/profile/coupons/new-coupon")},children:(0,A.jsx)(d().sA,{id:"creatorProfile.coupons.createCouponButton",defaultMessage:"Create Coupon"})})]}),(0,A.jsx)(Ce().A,{size:24}),s?(0,A.jsx)(Zi,{}):(0,A.jsx)(ka,{})]}),l&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(Aa,{route:"/profile/coupons/new-coupon",children:[(0,A.jsx)(wa,{}),(0,A.jsx)(Dn,{})]}),(0,A.jsxs)(Aa,{route:"/profile/coupons/edit",children:[(0,A.jsx)(wa,{}),(0,A.jsx)(Dn,{})]})]})]})}var Nn=()=>a(979958),zn=()=>a(603745),Vn=()=>a(388693),Hn=()=>a(824862),On=()=>a(332393);class Wn extends Me().Store{getInitialState(){return{type:"create-bot",startingRecord:void 0,recordTypeOnSubmission:"internal",status:"unpublished"}}updateRecordTypeOnSwitch(e){if("update-bot"===this.state.type){if("public"!==e)return;this.setState({type:"create-guest-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,status:"unpublished"})}else if("create-guest-integration"===this.state.type){if("internal"!==e||!this.state.startingRecord)return;this.setState({type:"update-bot",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,status:"unpublished"})}else if("update-guest-integration"===this.state.type){if("unfurling"!==e)return;this.setState({type:"create-third-party-external-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,startingAuthRecord:void 0,status:"unpublished"})}else if("create-third-party-external-integration"===this.state.type){if("public"!==e)return;this.setState({type:"update-guest-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,status:"unpublished"})}else"create-bot"===this.state.type||"update-third-party-external-integration"===this.state.type||"update-first-party-external-integration"===this.state.type||"update-compliance-integration"===this.state.type||(0,V().HB)(this.state)}updateCreationFormType(e){"create-guest-integration"===e&&this.setState({type:"create-guest-integration",startingRecord:void 0,recordTypeOnSubmission:"public",status:"unpublished"}),"create-bot"===e&&this.setState({type:"create-bot",startingRecord:void 0,recordTypeOnSubmission:"internal",status:"unpublished"})}initializeNewForm(e,t,i){if(e.table===Hn().GP)this.setState({type:"update-bot",startingRecord:e,recordTypeOnSubmission:"internal",status:"unpublished"});else if(e.table===On().Li)if((0,a(20498).NV)(e.value.id))((0,Vn().sP)(e.value)||(0,Vn().cx)(e.value))&&this.setState({type:"update-compliance-integration",startingRecord:{table:On().Li,value:e.value},startingAuthRecord:t,recordTypeOnSubmission:"compliance",status:e.value.status});else if((0,Vn().v_)(e.value)||(0,Vn().mt)(e.value))if((0,a(617871).CX)({integrationId:e.value.id,env:"production"}))this.setState({type:"update-first-party-external-integration",startingRecord:{table:e.table,value:e.value},recordTypeOnSubmission:"unfurling",status:e.value.status});else{if(!t)return;const r=i.map((e=>({type:e.verified_at?"verified":"unverified",id:e.id,domain:e.domain,verificationCode:e.verification_code,createdAt:e.created_at,expiresAt:e.expires_at,alive:e.alive})));this.setState({type:"update-third-party-external-integration",startingRecord:{table:e.table,value:e.value},startingAuthRecord:t,recordTypeOnSubmission:"unfurling",status:e.value.status,domainVerifications:r,domainVerificationStore:"update-third-party-external-integration"===this.state.type?this.state.domainVerificationStore:new(a(543649).A)})}else"guest"===e.value.type&&this.setState({type:"update-guest-integration",startingRecord:{table:e.table,value:e.value},recordTypeOnSubmission:"public",status:e.value.status});else(0,V().HB)(e)}}const qn=Wn;var Kn=()=>a(555267),Gn=()=>a(447887),Zn=()=>a(725252),$n=()=>a(799288),Yn=()=>a(926397),Qn=()=>a(840911),Jn=()=>a(96689),Xn=()=>a(559926),eo=()=>a(572088),to=()=>a(640653);class ao extends Me().Store{getInitialState(){return{description:"",how_to_use:"",features:[],categories:[],slug:"",preview_images:[],add_to_notion_url:"",listing_status:null,errors:{description:"",how_to_use:"",add_to_notion_url:"",slug:"",preview_images:"",features:"",categories:"",_general:""}}}setErrors(e){this.setState({...this.state,errors:{...this.state.errors,...e}})}setValues(e){this.setState({...this.state,...e})}}const io=new ao;const ro=function(){const e=(0,o().IS)((()=>({icon:{display:"flex",alignItems:"flex-end",justifyContent:"center",flex:1},innerContainer:{display:"flex",justifyContent:"space-between",marginTop:80,marginBottom:80},contentContainer:{display:"flex",flexDirection:"column",width:"66%",justifyContent:"center"},header:{fontWeight:L().Wy.bold,fontSize:50,color:c().Ay.frontText,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},subtitle:{fontWeight:L().Wy.regular,fontSize:24,color:c().Ay.frontTextMedium,letterSpacing:"0.015em"},button:{display:"inline-flex",color:c().Ay.frontTextMedium,borderRadius:4,padding:6,fontSize:15,width:"fit-content"},buttonContent:{display:"flex",alignItems:"center"},arrowIcon:{width:20,height:20}})),[]);return(0,A.jsxs)("div",{style:e.innerContainer,children:[(0,A.jsxs)("div",{style:e.contentContainer,children:[(0,A.jsx)("div",{style:e.header,children:(0,A.jsx)(d().sA,{id:"creatorProfile.integration.notFound.title.label",defaultMessage:"Not Found"})}),(0,A.jsx)("div",{style:e.subtitle,children:(0,A.jsx)(d().sA,{id:"creatorProfile.integration.notFound.subtitle.label",defaultMessage:"This integration doesn't exist."})})]}),(0,A.jsx)("div",{style:e.icon,children:(0,a(987264).s)({width:98,height:98})})]})};var no=()=>a(427704);Object.entries({"8btEqLBipIhzrURDtMiMp":"Security & compliance",LrLnDt6KMdjAjuzJx3Mue:"Sales","6Nnak0fGdhHnYOqbbRmGbP":"Identity","4jaNdw5xVtuE1Kb7WH8VDW":"Marketing","4917v9HZijGubR4nmfJdhV":"Finance","2YuNhKaZMbW7vxlqx8DNef":"Customer experience","29jYzS08IK5xXF2k5R40gP":"Forms","6b0oRAGgoFg76mFv6lMK1m":"File management","1gyl4Y79DvZ0TM3D5FyYX5":"Engineering","2xVe1cxdZe794uAIyw6Kl9":"Design","6b0K7wADJ37fQorrlSQsaq":"Automations","6HgHpfWS9cNQn9EXZkndTW":"Productivity","3Tmdhi67ZGO3xHaaooyCgj":"Collaboration","5qR7nmskJp1EvKEsGwPGjf":"Communication","4Cbg47uBGFaVqIoP4yW39W":"Analytics"}).reduce(((e,t)=>{let[a,i]=t;return{...e,[i]:a}}),{});const oo=(0,d().YK)({generalQuality:{defaultMessage:"This integration does not meet our quality standards. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.generalQuality"},selfPromotion:{defaultMessage:"This integration is self-promotional. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.selfPromotion"},offensiveContent:{defaultMessage:"This integration contains offensive content. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.offensiveContent"},offensiveContentImages:{defaultMessage:"This integration contains offensive images. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.offensiveContentPhoto"},logoIsNotUnique:{defaultMessage:"This integration's logo is not unique. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.logoIsNotUnique"},impersonatingBrand:{defaultMessage:"This integration is impersonating a brand. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.impersonatingBrand"},supportEmailDomain:{defaultMessage:"This integration's support email domain does not match the integration domain. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.supportEmailDomain"},oauthFlowError:{defaultMessage:"This integration's OAuth flow is incorrect. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.oauthFlowError"},privateAPI:{defaultMessage:"This integration is using private APIs. We only accept integrations using public Notion APIs. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.privateAPI"},notSupportedType:{defaultMessage:"This integration is not supported. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.notSupportedType"},custom:{defaultMessage:"This integration has been rejected.",id:"creatorProfile.integration.status.rejected.custom"},notSupportedLanguage:{defaultMessage:"We currently only support integrations in English. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.notSupportedLanguage"}});var so=()=>a(755636),lo=()=>a(193657);function co(e){const t=(0,r().v3)();return(0,n().K8)((()=>{if(!e)return{};const a=new(Bt().CX)(t,{table:On().Li,id:e}),i=new(Bt().UR)(t,{table:lo().bh,id:(0,Vn().Ry)({integrationId:e,locale:"en-US"})});return{listingStatus:a.getListingStatus(),slug:i.getSlug(),integrationListingModel:i.getModel()}}),[t,e])}function uo(e){const{integrationId:t}=e,a=(0,r().v3)(),i=go(),{listingStatus:n,integrationListingModel:o,slug:s}=co(t);if(!n)return null;const l=Q(n||null,o),c="published"===l||"published_in_review"===l||"published_rejected"===l;return(0,A.jsxs)("div",{style:i.messageContainerOuter,children:[(0,A.jsxs)("div",{style:i.messageContainer,children:[(0,A.jsxs)("div",{style:i.messageInfo,children:[(0,A.jsx)(pn,{templateStatus:l}),(0,A.jsx)("span",{style:i.messageText,children:(0,A.jsx)(po,{integrationStatus:l,isPublished:c,integrationId:t,slug:s})})]}),c?(0,A.jsx)(_r().u,{variant:"neutral",onClick:()=>so().f({environment:a,url:`${Re().A.domainBaseUrl}${no().JZ.integrations}/${s}`}),children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublishForm.status.published.cta",defaultMessage:"View live integration"})}):null]}),("approved"===n||"pending"===n)&&(0,A.jsx)(yt().D,{styleName:"Body-13px/Regular",children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublishForm.disabledAfterPublish",defaultMessage:"You are no longer be able to update the configuration of this integration. To update, you will need to create a new integration."})})]})}function po(e){const{integrationStatus:t,integrationId:a}=e;return(0,A.jsxs)(A.Fragment,{children:["in_review"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublishForm.status.inReview.message",defaultMessage:"Integrations under review are not editable. Review time is 5-10 business days."}):null,"published_in_review"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublishForm.status.approvedAndinReview.message",defaultMessage:"Integration is live on the gallery. Changes are under review."}):null,"published"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublishForm.status.published.message",defaultMessage:"Integration is live on the gallery."}):null,"rejected"===t||"published_rejected"===t?(0,A.jsx)(mo,{integrationId:a}):null,"published_draft"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublishForm.status.publishedDraft.Message",defaultMessage:"Integration has unpublished changes"}):null]})}function go(){const{isDesktopWidth:e}=(0,m().LS)();return(0,o().IS)((t=>({rejectMessage:{gap:"4px",display:"flex"},messageInfo:{display:"flex",gap:"10px",alignItems:"center"},messageContainerOuter:{display:"flex",flexDirection:"column",gap:"10px",backgroundColor:"rgba(0, 0, 0, 0.03)",padding:"10px 24px 10px 24px",maxWidth:"960px",minHeight:"60px",marginBottom:32},messageContainer:{justifyContent:"space-between",borderRadius:"8px",display:"flex",alignItems:"center",flexWrap:e?"nowrap":"wrap",gap:"10px",marginTop:"10px"},messageText:{color:t.text.primary,fontSize:"13.5px",flexShrink:e?10:"inherit"}})),[e])}function mo(e){const{integrationId:t}=e,a=go(),i=(0,r().v3)(),{rejectReason:o,customRejectReason:s}=(0,n().K8)((()=>{if(void 0===t)return{};const e=new(Bt().CX)(i,{table:On().Li,id:t});if("internal"===e.getType())throw new Error("Integration type should not be internal");const a=e.getInfo();return{rejectReason:null==a?void 0:a.reject_reason,customRejectReason:null==a?void 0:a.custom_reject_reason}}),[i,t]),l=o?(0,Ht().Jt)(oo,o):void 0;return"custom"===o&&s?(0,A.jsxs)("div",{style:a.rejectMessage,children:[(0,A.jsx)(d().sA,{...oo.custom}),s]}):l?(0,A.jsx)(d().sA,{...l}):(0,A.jsx)(d().sA,{...oo.generalQuality})}var fo=()=>a(857639),ho=()=>a(532940),bo=()=>a(502800),vo=()=>a(908928),yo=()=>a(981485),xo=()=>a(84817),So=()=>a(378765),wo=()=>a(179030);function Co(){const e=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]);return async t=>{let a;if(t.template_url.value){const i=(0,va().wU)(t.template_url.value);e&&i&&(a=Bt().Bv.createChildStore(e,{table:Ri().ev,id:i}),await a.load())}return a}}function jo(e){const{botOrIntegrationPointer:t}=e,a=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]);return(0,n().K8)((()=>{if(t.table===Hn().GP){if(!a)return;const e=Bt().vK.createChildStore(a,t);return null==e?void 0:e.getIntegrationPointer()}if(t.table===On().Li)return t;(0,V().HB)(t)}),[t,a])}class Mo extends Me().Store{getInitialState(){return{botSharedPages:{}}}setBotSharedPages(e,t){this.setState({...this.state,botSharedPages:{...this.state.botSharedPages,[e]:t}})}getBotSharedPages(e){return this.state.botSharedPages[e]??[]}clearBotSharedPages(e){const{[e]:t,...a}=this.state.botSharedPages;this.setState({...this.state,botSharedPages:a})}clearAllBotSharedPages(){this.setState({...this.state,botSharedPages:{}})}}const _o=new Mo;var Ao=()=>a(664713),Io=()=>a(37433),ko=()=>a(999830),To=()=>a(263928),Po=()=>a(920495),Lo=()=>a(617668),Do=()=>a(299797),Eo=()=>a(723786),Bo=()=>a(593781);function Ro(e){let{setModalIsOpen:t,modalIsOpen:a,spaceId:r,botStore:n,spaceStore:s,refetchBotSharedPages:l,sharedPageBlockIds:c,currentSpaceViewStore:u}=e;const p=(0,o().IS)((e=>({selectPages:{marginTop:20},container:{border:`1px solid ${e.regularDividerColor}`,borderRadius:8,padding:"75px 0"}})),[]),[g]=(0,i.useState)(Me().Store.createValue({})),{teamPagesByTeam:m,allTeams:f,allSharedPages:h,allPrivatePages:b,allWorkspacePages:v}=(0,Eo().g)({pageIdsSharedWithUser:c,currentSpaceViewStore:u,spaceStore:s}),y=0===h.length&&0===b.length&&0===Object.keys(m).length&&(0===v.length||f.length>0);return(0,A.jsx)("div",{style:p.container,children:(0,A.jsxs)(ba().wt,{gap:4,children:[(0,A.jsx)(Do().A,{icon:Po().pageIcon,iconSize:27,bodyWidth:400,title:(0,A.jsx)(d().sA,{defaultMessage:"No page access",id:"creatorProfile.integrations.emptyPageAccessPermissions.title"}),description:y?(0,A.jsx)(d().sA,{defaultMessage:"Create pages first to share them with this integration",id:"creatorProfile.integrations.emptyPageAccessPermissions.noPages.description"}):(0,A.jsx)(d().sA,{defaultMessage:"Select pages where this integration will have access",id:"creatorProfile.integrations.emptyPageAccessPermissions.description"})}),!y&&(0,A.jsxs)(ba().Ye,{justifyContent:"center",children:[(0,A.jsx)(Xe().A,{size:"lg",iconLeading:Lo().plusIcon,style:p.selectPages,onClick:()=>t(!0),children:(0,A.jsx)(d().sA,{defaultMessage:"Select pages",id:"creatorProfile.integrations.emptyPageAccessPermissions.selectPages.label"})}),(0,A.jsx)(Bo().r,{isOpen:a,onClose:()=>t(!1),pageIdsAlreadySharedWithBot:[],teamPagesByTeam:m,allTeams:f,pagesSharedWithUser:h,privatePages:b,workspacePages:v,spaceId:r,botStore:n,spaceStore:s,refetchBotSharedPages:l,selectedBlockIdsStore:g,pagePickerLocation:"creator_profile_access_tab"})]})]})})}a(823215);var Fo=()=>a(416504),Uo=()=>a(207207),No=()=>a(406533),zo=()=>a(778078),Vo=()=>a(568721),Ho=()=>a(108944),Oo=()=>a(94935),Wo=()=>a(962730),qo=()=>a(664460),Ko=()=>a(222334),Go=()=>a(639355);function Zo(e){let{teamspaceStore:t,expanded:a,onExpandToggle:i}=e;const r=(0,o().IS)((e=>({row:{display:"flex",alignItems:"center",cursor:"pointer",paddingTop:2,paddingBottom:2},rowHovered:{backgroundColor:e.state.hover}})),[]);return(0,A.jsxs)(ve().A,{onClick:i,style:r.row,hoveredStyle:r.rowHovered,children:[(0,A.jsx)(Go().I,{teamStore:t}),(0,A.jsx)("div",{style:{marginLeft:"auto",display:"flex"},children:(0,A.jsx)(Je().I,{icon:Ko().arrowChevronSingleRightIcon,size:"xs",style:{transform:a?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.1s ease-in-out"}})})]})}var $o=()=>a(247601);const Yo=(0,d().YK)({pagesHaveAccess:{id:"pageAccess.readOnly.pagesHaveAccess",defaultMessage:"Page and database access"},integrationEnabledDescription:{id:"pageAccess.readOnly.integrationEnabledDescription",defaultMessage:"This integration is enabled for the following pages and databases"},editAccessButton:{id:"pageAccess.readOnly.editAccessButton",defaultMessage:"Edit access"},searchPlaceholder:{id:"pageAccess.readOnly.searchPlaceholder",defaultMessage:"Search pages or teamspaces"},noTeamspaceResults:{id:"pageAccess.readOnly.noTeamspaceResults",defaultMessage:"No teamspaces or pages found"},noSharedResults:{id:"pageAccess.readOnly.noSharedResults",defaultMessage:"No shared pages found"},noPrivateResults:{id:"pageAccess.readOnly.noPrivateResults",defaultMessage:"No private pages found"},integrationTrashEditDisabledDescription:{id:"pageAccess.readOnly.integrationTrashEditDisabledDescription",defaultMessage:"Integration access cannot be edited when all selectable pages are in the trash."},expandAll:{id:"pageAccess.readOnly.expandAll",defaultMessage:"Expand all"},collapseAll:{id:"pageAccess.readOnly.collapseAll",defaultMessage:"Collapse all"},tooltip:{id:"pageAccess.readOnly.tooltip",defaultMessage:"Only pages you can access will appear here"}}),Qo={...a(404200).V,...Yo};function Jo(e){let{pageIdsAlreadySharedWithBot:t,spaceId:a,setIsModalOpen:s,isModalOpen:l,botStore:c,spaceStore:u,refetchBotSharedPages:p,currentSpaceViewStore:g,sharedPageBlockIds:m}=e;const f=(0,o().IS)((e=>({container:{border:`1px solid ${e.stroke.secondary}`,borderRadius:12,padding:20,height:"60vh",overflowY:"auto"},pageIconStyle:{fill:e.icon.secondary},sectionHeading:{color:e.palette.gray[500],fontWeight:L().Wy.regular},breadcrumb:{color:e.text.secondary},subSectionHeading:{padding:"0 8px",color:e.palette.gray[500],fontWeight:L().Wy.regular},teamspaceRow:{paddingLeft:8,display:"flex",flexDirection:"column",gap:8},separator:{borderTop:`1px solid ${e.regularDividerColor}`,width:"100%"},searchIcon:{width:Fe().Ev.sm,height:Fe().Ev.sm},noSearchResults:{padding:"0 8px",color:e.text.tertiary}})),[]),h=(0,d().tz)(),b=(0,r().v3)(),[v]=(0,i.useState)(Me().Store.createValue({})),[y,x]=i.useState(new Set),S=i.useCallback((e=>{x((t=>{const a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a}))}),[]);(0,i.useEffect)((()=>{const e={};for(const a of t)e[a]=!0;v.setState(e)}),[t,v]);const{teamPagesByTeam:w,allTeams:C,allSharedPages:j,allPrivatePages:M,allWorkspacePages:I}=(0,Eo().g)({pageIdsSharedWithUser:m,currentSpaceViewStore:g,spaceStore:u}),k=i.useMemo((()=>new Set(t)),[t]),{topLevelShareableSharedPageIds:T,topLevelShareablePrivatePageIds:P,topLevelShareableWorkspacePageIds:D,selectedNonTopLevelSharedPageIds:E,selectedNonTopLevelPrivatePageIds:B,selectedNonTopLevelWorkspacePageIds:R,teamspaceManualSet:F}=(0,$o().a)({pagesSharedWithUser:j,privatePages:M,teamPagesByTeam:w,selectedPageIds:k,spaceStore:u,workspacePages:I}),U=i.useMemo((()=>E.map((e=>new(Bt().Bv)(b,{table:Ri().ev,id:e,spaceId:a})))),[E,b,a]),N=i.useMemo((()=>B.map((e=>new(Bt().Bv)(b,{table:Ri().ev,id:e,spaceId:a})))),[B,b,a]),z=i.useMemo((()=>Array.from(F).map((e=>new(Bt().Bv)(b,{table:Ri().ev,id:e,spaceId:a})))),[F,b,a]),V=i.useMemo((()=>R.map((e=>new(Bt().Bv)(b,{table:Ri().ev,id:e,spaceId:a})))),[R,b,a]),H=i.useMemo((()=>t.map((e=>new(Bt().Bv)(b,{table:Ri().ev,id:e,spaceId:a})))),[t,b,a]),O=i.useMemo((()=>{const e=new Map;for(const t of H)e.set(t.id,t);return e}),[H]),W=(0,n().K8)((()=>[...C].sort(Oo().r)),[C]),[q,K,G]=function(){const e=(0,i.useRef)(null),t=(0,i.useRef)(null),[a,r]=(0,i.useState)(),n=()=>{const a=e.current,i=t.current;if(!a)return;const n=a.getBoundingClientRect().width;let o=n;i&&(o=n-i.getBoundingClientRect().width-24),o<300&&(o=300),r(o)};return(0,i.useLayoutEffect)((()=>{if(n(),!window.ResizeObserver)return;const a=new ResizeObserver((()=>{n()}));return e.current&&a.observe(e.current),t.current&&a.observe(t.current),()=>{a.disconnect()}}),[]),[e,t,a]}(),[Z,$]=i.useState(!1);i.useEffect((()=>{l&&$(!1)}),[l]);const[Y,Q]=(0,i.useState)(""),J=(0,Ar().lW)(Y.trim(),100,((e,t)=>e===t));i.useEffect((()=>{0!==J.length&&x((e=>{const t=new Set(e);for(const a of W)t.add(a.id);return t}))}),[J,W]);const X=i.useRef(new Map),ee=i.useCallback((e=>{let t=X.current.get(e.id);return void 0===t&&(t=e.getRenderTitle({intl:h,userTimeZone:(0,Fo().P)()})||"",X.current.set(e.id,t)),t}),[h]),te=(0,n().K8)((()=>{const e=(e,t)=>ee(e).localeCompare(ee(t)),a=(t,a)=>{var i,r;const n=(null===(i=(0,Ho().Uo)(t))||void 0===i?void 0:i.getName())||"",o=(null===(r=(0,Ho().Uo)(a))||void 0===r?void 0:r.getName())||"";return n!==o?n.localeCompare(o):e(t,a)},i=J,r=i.length>0,n=e=>r?(0,zo().Ay)(i,e,(e=>ee(e))):e,o=n(z),s=n(U),l=n(N),c=n(V),u=[],p=[];let g=null;W.length>1&&(g=y.size<W.length?(0,A.jsx)(_().p,{isBlue:!0,onClick:e=>{e.stopPropagation(),x(new Set(W.map((e=>e.id))))},children:(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Medium",children:(0,A.jsx)(d().sA,{...Qo.expandAll})})}):(0,A.jsx)(_().p,{isBlue:!0,onClick:e=>{e.stopPropagation(),x(new Set([]))},children:(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Medium",children:(0,A.jsx)(d().sA,{...Qo.collapseAll})})}));for(const d of W){const a=new Set(w[d.id]??[]),o=[];for(const e of t){const t=O.get(e);t&&a.has(e)&&o.push(t)}const s=n(o),l=r&&(0,zo().Ay)(i,[d],(e=>e.getName()||"")).length>0?o:s;if(l.length>0){const t=(0,A.jsxs)("div",{style:f.teamspaceRow,children:[(0,A.jsx)(Zo,{teamspaceStore:d,expanded:y.has(d.id),onExpandToggle:()=>S(d.id)}),y.has(d.id)&&(0,A.jsx)(xo().Y1,{direction:"vertical",gap:6,style:{marginLeft:24},children:l.sort(e).map((e=>(0,A.jsx)(qo().y,{blockStore:e,styles:f,maxWidth:G,shouldWrap:!0,maxLength:130},e.id)))})]},`row-${d.id}`);p.push(t)}}const m=p.length>0||o.length>0,h=z.length>0||W.some((e=>(w[e.id]??[]).some((e=>k.has(e)))));if(m||r&&h){const e=[];o.length>0&&(e.push((0,A.jsx)(yt().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",style:f.subSectionHeading,children:(0,A.jsx)(d().sA,{...Qo.manuallySelectedPagesHeader})},"manual-header")),e.push((0,A.jsx)(xo().Y1,{direction:"vertical",gap:16,padding:"0 8px",children:o.sort(a).map((e=>(0,A.jsx)(qo().y,{blockStore:e,styles:f,maxWidth:G,shouldWrap:!0,maxLength:130},e.id)))},"manual-pages")),p.length>0&&e.push((0,A.jsx)("div",{style:f.separator},"teamspace-divider"))),p.length>0&&(e.push((0,A.jsxs)(xo().Y1,{direction:"horizontal",width:"fill",gap:"auto",align:"center",children:[(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",style:f.subSectionHeading,children:(0,A.jsx)(d().sA,{...Qo.teamspacesHeaderSubheader})}),g]},"teamspace-top-level-header")),e.push(...p)),0===e.length&&e.push((0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Medium",style:f.noSearchResults,children:(0,A.jsx)(d().sA,{...Qo.noTeamspaceResults})},"no-teamspace-results")),u.push({key:"teamspaces-section",title:(0,A.jsx)(xo().Y1,{direction:"horizontal",align:"center",gap:"auto",children:(0,A.jsxs)(yt().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",style:f.sectionHeading,children:[(0,A.jsx)(d().sA,{...Qo.teamspacesHeader}),` (${p.length})`]})}),...r?{}:{collapsible:!0},content:(0,A.jsx)(xo().Y1,{direction:"vertical",gap:8,children:e}),sectionContentStyleOverride:{padding:6}})}function b(t){let a,{categoryName:i,topLevelIds:o,allPageStores:p}=t,g=p.filter((e=>o.has(e.id)&&k.has(e.id)));switch(g=n(g),i){case"shared":a=s;break;case"private":a=l;break;case"workspace":a=c}const m=p.filter((e=>o.has(e.id)&&k.has(e.id))).length>0,h=("shared"===i?s:"private"===i?l:c).length,b=g.length>0||a.length>0;if(!(b||r&&(m||h>0)))return;const v="shared"===i?Qo.sharedPagesHeader:"private"===i?Qo.privatePagesHeader:Qo.workspacePagesHeader,y=g.length+a.length;u.push({key:i,title:(0,A.jsxs)(yt().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",style:f.sectionHeading,children:[(0,A.jsx)(d().sA,{...v}),` (${y})`]}),...r?{}:{collapsible:!0},content:(0,A.jsxs)(xo().Y1,{direction:"vertical",gap:8,children:[!b&&(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Medium",style:f.noSearchResults,children:(0,A.jsx)(d().sA,{..."shared"===i?Qo.noSharedResults:Qo.noPrivateResults})},`no-${i}-results`),a.length>0&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",style:f.subSectionHeading,children:(0,A.jsx)(d().sA,{...Qo.manuallySelectedPagesHeader})}),(0,A.jsx)(xo().Y1,{direction:"vertical",gap:16,padding:"0 8px",children:a.sort(e).map((e=>(0,A.jsx)(qo().y,{blockStore:e,styles:f,maxWidth:G,shouldWrap:!0,maxLength:130},e.id)))})]}),a.length>0&&g.length>0&&(0,A.jsx)("div",{style:f.separator},`divider-${i}`),g.length>0&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",style:f.subSectionHeading,children:(0,A.jsx)(d().sA,{...Qo.topLevelPagesHeader})}),(0,A.jsx)(xo().Y1,{direction:"vertical",gap:16,padding:"0 8px",children:g.sort(e).map((e=>(0,A.jsx)(qo().y,{blockStore:e,styles:f,maxWidth:G,shouldWrap:!0,maxLength:130},e.id)))})]})]}),sectionContentStyleOverride:{padding:6}})}return b({categoryName:"workspace",topLevelIds:D,allPageStores:I}),b({categoryName:"shared",topLevelIds:T,allPageStores:j}),b({categoryName:"private",topLevelIds:P,allPageStores:M}),u}),[J,z,U,N,V,W,D,I,T,j,P,M,ee,w,t,O,f,y,S,G,k]),ae=(0,n().K8)((()=>[...z,...U,...N,...H,...W].every((e=>!(e.table!==Ri().ev||!e.isLoadedNonCopyIndicator())||e.isReady()))),[z,U,N,H,W]),ie=(0,n().K8)((()=>0!==H.length&&H.every((e=>e.isReady()&&e.pathIsDead()))),[H]),re=(0,i.useMemo)((()=>ie&&0===Object.values(w).flat().length&&0===j.length&&0===M.length),[ie,w,j.length,M.length]);return(0,A.jsx)(So().A,{loaded:ae,showSpinnerTimeout:0,children:(0,A.jsx)("div",{style:f.container,children:(0,A.jsxs)(xo().Y1,{ref:q,direction:"vertical",gap:24,children:[(0,A.jsxs)(xo().Y1,{direction:"horizontal",gap:24,children:[(0,A.jsxs)(xo().Y1,{children:[(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Medium",children:(0,A.jsx)(d().sA,{...Qo.pagesHaveAccess})}),(0,A.jsxs)(xo().Y1,{direction:"horizontal",gap:2,align:"center-left",children:[(0,A.jsx)(yt().D,{styleName:"UIMedium-13px/Regular",colorName:"secondary",children:(0,A.jsx)(d().sA,{...Qo.integrationEnabledDescription})}),(0,A.jsx)(Na().A,{textWrap:!0,renderTooltip:()=>(0,A.jsx)("div",{style:{width:200},children:h.formatMessage(Qo.tooltip)}),render:e=>(0,A.jsx)("div",{...e,children:(0,A.jsx)(ki().A,{ariaLabel:h.formatMessage({id:"creatorProfile.integrations.pageAccessReadOnly.tooltip",defaultMessage:"Only pages you can access will appear here"}),icon:No().questionMarkCircleIcon,size:"sm",disableBackground:!0,style:{marginTop:2}})}),placement:Wo().W.Right})]})]}),(0,A.jsx)(Na().A,{disableTooltip:!re,placement:Wo().W.Top,renderTooltip:()=>(0,A.jsx)(xo().Y1,{direction:"vertical",gap:8,children:(0,A.jsx)(d().sA,{...Qo.integrationTrashEditDisabledDescription})}),render:e=>(0,A.jsx)(_().p,{ref:K,isBlue:!0,isLoading:Z,disabled:re||Z,disabledFeedback:!0,onClick:()=>{$(!0),setTimeout((()=>s(!0)),0)},...e,children:(0,A.jsx)("div",{style:{display:"flex",justifyContent:"end",width:"100%"},children:(0,A.jsx)(d().sA,{...Qo.editAccessButton})})})})]}),(0,A.jsx)(Br().A,{value:Y,onChange:e=>Q(e.target.value),placeholder:h.formatMessage(Qo.searchPlaceholder),showClearButton:!0,left:(0,Uo().J)(f.searchIcon),ignoreKeyboardMode:!0,style:{height:32}}),(0,A.jsx)(Vo().b,{sections:te,expandAllWhenSectionsChange:J.length>0}),(0,A.jsx)(Bo().r,{isOpen:l,onClose:()=>s(!1),pageIdsAlreadySharedWithBot:t,teamPagesByTeam:w,privatePages:M,workspacePages:I,pagesSharedWithUser:j,spaceId:a,allTeams:W,botStore:c,spaceStore:u,refetchBotSharedPages:p,selectedBlockIdsStore:v,pagePickerLocation:"creator_profile_access_tab"})]})})})}function Xo(e){var t,a,o;let{botPointer:s,spaceId:d}=e;const c=(0,r().v3)(),[u,p]=i.useState(!1),g=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]),m=(0,n().K8)((()=>{if(g)return Bt().vK.createChildStore(g,s)}),[s,g]),f=(0,n().K8)((()=>{var e;return null==g||null===(e=g.getSpaceViewStores())||void 0===e?void 0:e.find((e=>e.getSpaceId()===d))}),[g,d]),h=(0,n().K8)((()=>null==f?void 0:f.getSpaceStore()),[f]),[v]=(0,l().Yb)((async()=>await Ao().y(c,{spaceId:d})),[c,d]),[y,x]=(0,l().Yb)((async()=>h?await vo().GO({environment:c,currentSpaceStore:h,botIds:[s.id]}):{bots:{}}),[c,h,s.id]);i.useEffect((()=>{var e;if(null!==(e=y.value)&&void 0!==e&&e.bots){var t;const e=(null===(t=y.value.bots[s.id])||void 0===t?void 0:t.pageIds)??[];_o.setBotSharedPages(s.id,e)}}),[y.value,s.id]);const S=i.useCallback((async()=>{const e=await x();if(null!=e&&e.bots){var t;const a=(null===(t=e.bots[s.id])||void 0===t?void 0:t.pageIds)??[];_o.setBotSharedPages(s.id,a)}return e}),[x,s.id]),[w]=(0,l().Yb)((async()=>{if(null!=h&&h.id&&g)return(0,Io().Qn)()?void 0:await To().J({environment:c,spaceId:h.id,userId:g.id})}),[g,c,null==h?void 0:h.id]);(0,i.useEffect)((()=>{null!=h&&h.id&&g&&(0,Io().Qn)()&&ko().q.fetchUnfetchedTeams({userId:g.id,spaceId:h.id,teamTypes:new Set(["Joined"]),environment:c,callGetTeamsV2ApiFn:Io().FK})}),[g,c,h]);const C=(0,l().fQ)([v,y,w]);if(!h||!m||!f)return(0,A.jsx)(So().A,{loaded:!1,showSpinnerTimeout:500});const j="pending"===C.status||"idle"===C.status,M=(null===(t=C.value)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.pages)??[],_=(null===(o=((null===(a=C.value)||void 0===a||null===(a=a[1])||void 0===a?void 0:a.bots)??{})[s.id])||void 0===o?void 0:o.pageIds)??[];return(0,A.jsx)(So().A,{loaded:!j,showSpinnerTimeout:500,children:_.length>0?(0,A.jsx)(Jo,{pageIdsAlreadySharedWithBot:_,sharedPageBlockIds:M,spaceId:d,isModalOpen:u,setIsModalOpen:p,botStore:m,spaceStore:h,refetchBotSharedPages:S,currentSpaceViewStore:f}):(0,A.jsx)(Ro,{setModalIsOpen:p,modalIsOpen:u,spaceId:d,botStore:m,spaceStore:h,refetchBotSharedPages:S,sharedPageBlockIds:M,currentSpaceViewStore:f})})}a(18107),a(967357);function es(e){var t;return{responseType:"error",data:{field:(null===(t=e.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type)??"base",message:e.body&&"debugMessage"in e.body&&e.body.debugMessage?e.body.debugMessage:void 0}}}async function ts(e){const{environment:t,...a}=e,i=await x().callApi({eventName:"updateWebhookSubscription",environment:t,data:a});return"failed"===i.type?es(i):{responseType:"success",data:i.data}}var as=()=>a(776217);function is(e){const t=(0,r().v3)(),{integrationPointer:a}=e,[{status:i,error:n,value:o},s]=(0,l().Yb)((async()=>{if(!a)return[];const{recordMap:e,integrationWebhookSubscriptionIds:i,subscriptionDeliveryStates:r}=await async function(e){const{environment:t,integrationId:a}=e,i=await x().callApi({eventName:"listWebhookSubscriptions",environment:t,data:{integrationId:a}});if("failed"===i.type)throw i.error;return i.data}({environment:t,integrationId:a.id});return Ta().RecordMap.create(e).getModels(i.map((e=>({id:e,table:as().bn})))).filter(V().O9).map((e=>({id:e.pointer.id,integration_id:e.getIntegrationId(),status:e.getStatus(),url:e.getUrl(),event_types:e.getEventTypes(),paused_reason:e.getPausedReason(),delivery_state:r?r[e.pointer.id]:void 0})))}),[t,a]);return{result:o,status:i,error:n,refetch:s}}var rs=()=>a(46124),ns=()=>a(689094);var os=()=>a(73332),ss=()=>a(125565),ls=()=>a(2609),ds=()=>a(606273),cs=()=>a(217429),us=()=>a(970585);function ps(e){let{event:t}=e;const a=(0,o().IS)((e=>({tooltip:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:250},eventType:{color:c().Tj.uiGray}})),[]);return(0,A.jsxs)("div",{style:a.tooltip,children:[(0,A.jsx)("div",{style:a.eventType,children:t.type}),(0,A.jsx)("div",{children:t.description})]})}var gs=()=>a(175882);const ms=(0,d().YK)({commentCapabilityWarning:{id:"webhookSubscriptionModal.commentCapabilityWarning",defaultMessage:"Enable read comment capabilities to receive these events"},databaseCapabilityWarning:{id:"webhookSubscriptionModal.databaseCapabilityWarning",defaultMessage:"Enable read content capabilities to receive these events"},pageCapabilityWarning:{id:"webhookSubscriptionModal.pageCapabilityWarning",defaultMessage:"Enable read content capabilities to receive these events"}});function fs(e){let{categoryType:t,botCapabilities:a}=e;const i=(0,d().tz)(),r=(0,o().IS)((e=>({tooltipText:{width:250},warningIcon:{fill:e.icon.uiYellowPrimary,width:Fe().Ev.sm,height:Fe().Ev.sm}})),[]);let n;return n="comment"!==t||null!=a&&a.read_comment?"page"!==t||null!=a&&a.read_content?"database"!==t||null!=a&&a.read_content?null:i.formatMessage(ms.databaseCapabilityWarning):i.formatMessage(ms.pageCapabilityWarning):i.formatMessage(ms.commentCapabilityWarning),n?(0,A.jsx)(Na().A,{textWrap:!0,renderTooltip:()=>(0,A.jsx)("div",{style:r.tooltipText,children:n}),render:e=>(0,A.jsx)(ki().A,{...e,ariaLabel:n,icon:gs().exclamationMarkTriangleSmallIcon,iconStyle:r.warningIcon,disableBackground:!0})}):null}const hs=(0,d().YK)({pageCategoryLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.page",defaultMessage:"Page"},pageContentUpdatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageContentUpdated",defaultMessage:"Page content updated"},pageContentUpdatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageContentUpdated",defaultMessage:"A page’s content is changed, such as adding or removing a block on the page. Consecutive events of this type within a short time window are aggregated."},pageCreatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageCreated",defaultMessage:"Page created"},pageCreatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageCreated",defaultMessage:"A new page is created. Updates to the page within a short time window are aggregated."},pageDeletedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageDeleted",defaultMessage:"Page deleted"},pageDeletedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageDeleted",defaultMessage:"A page is moved to the trash. Events of this type are aggregated by canceling out any subsequent page.undeleted events within a short time frame."},pageLockedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageLocked",defaultMessage:"Page locked"},pageLockedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageLocked",defaultMessage:"A page is locked from editing."},pageMovedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageMoved",defaultMessage:"Page moved"},pageMovedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageMoved",defaultMessage:"A page is moved to a different location. Consecutive events of this type within a short time window are aggregated."},pagePropertiesUpdatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pagePropertiesUpdated",defaultMessage:"Page properties updated"},pagePropertiesUpdatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pagePropertiesUpdated",defaultMessage:"A page’s properties are updated. Consecutive events of this type within a short time window are aggregated."},pageUndeletedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageUndeleted",defaultMessage:"Page undeleted"},pageUndeletedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageUndeleted",defaultMessage:"A page is restored from the trash. Events of this type are aggregated by canceling out any subsequent page.deleted events within a short time frame."},pageUnlockedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageUnlocked",defaultMessage:"Page unlocked"},pageUnlockedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageUnlocked",defaultMessage:"A page is unlocked for editing."},databaseCategoryLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.database",defaultMessage:"Database"},databaseContentUpdatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseContentUpdated",defaultMessage:"Database content updated"},databaseContentUpdatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseContentUpdated",defaultMessage:"A database’s contents are updated, such as adding or removing a child page. Consecutive events of this type within a short time window are aggregated."},databaseCreatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseCreated",defaultMessage:"Database created"},databaseCreatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseCreated",defaultMessage:"A new database is created. Updates to the database within a short time window are aggregated."},databaseDeletedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseDeleted",defaultMessage:"Database deleted"},databaseDeletedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseDeleted",defaultMessage:"A database is moved to the trash. Events of this type are aggregated by canceling out any subsequent database.undeleted events within a short time frame."},databaseMovedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseMoved",defaultMessage:"Database moved"},databaseMovedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseMoved",defaultMessage:"A database is moved to a different location. Consecutive events of this type within a short time window are aggregated."},databaseSchemaUpdatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseSchemaUpdated",defaultMessage:"Database schema updated"},databaseSchemaUpdatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseSchemaUpdated",defaultMessage:"A database’s schema is updated, such as adding or removing a property or changing the type of an existing property. Consecutive events of this type within a short time window are aggregated."},databaseUndeletedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseUndeleted",defaultMessage:"Database undeleted"},databaseUndeletedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseUndeleted",defaultMessage:"A database is restored from the trash. Events of this type are aggregated by canceling out any subsequent database.deleted events within a short time frame."},commentCategoryLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.comment",defaultMessage:"Comment"},commentCreatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.commentCreated",defaultMessage:"Comment created"},commentCreatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.commentCreated",defaultMessage:"A new discussion or suggestion comment is added."},commentDeletedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.commentDeleted",defaultMessage:"Comment deleted"},commentDeletedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.commentDeleted",defaultMessage:"A comment is deleted."},commentUpdatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.commentUpdated",defaultMessage:"Comment updated"},commentUpdatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.commentUpdated",defaultMessage:"A comment is updated."},fileUploadCategoryLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.fileUpload",defaultMessage:"File upload"},fileUploadCreatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.fileUploadCreated",defaultMessage:"File upload created"},fileUploadCreatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.fileUploadCreated",defaultMessage:"A new file upload is created."},fileUploadExpiredEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.fileUploadExpired",defaultMessage:"File upload expired"},fileUploadExpiredEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.fileUploadExpired",defaultMessage:"A file upload has expired before being uploaded and attached."},fileUploadUploadFailedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.fileUploadUploadFailed",defaultMessage:"File upload failed"},fileUploadUploadFailedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.fileUploadUploadFailed",defaultMessage:"An external file failed to be imported to a Notion file upload."},fileUploadUploadedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.fileUploadUploaded",defaultMessage:"File upload completed"},fileUploadUploadedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.fileUploadUploaded",defaultMessage:"A file upload is successfully completed."}}),bs=[{type:"page",label:(0,A.jsx)(d().sA,{...hs.pageCategoryLabel}),eventTypes:[{type:"page.content_updated",name:(0,A.jsx)(d().sA,{...hs.pageContentUpdatedEventType}),description:(0,A.jsx)(d().sA,{...hs.pageContentUpdatedEventDescription}),ariaLabel:O().A.formatMessage(hs.pageContentUpdatedEventDescription)},{type:"page.created",name:(0,A.jsx)(d().sA,{...hs.pageCreatedEventType}),description:(0,A.jsx)(d().sA,{...hs.pageCreatedEventDescription}),ariaLabel:O().A.formatMessage(hs.pageCreatedEventDescription)},{type:"page.deleted",name:(0,A.jsx)(d().sA,{...hs.pageDeletedEventType}),description:(0,A.jsx)(d().sA,{...hs.pageDeletedEventDescription}),ariaLabel:O().A.formatMessage(hs.pageDeletedEventDescription)},{type:"page.locked",name:(0,A.jsx)(d().sA,{...hs.pageLockedEventType}),description:(0,A.jsx)(d().sA,{...hs.pageLockedEventDescription}),ariaLabel:O().A.formatMessage(hs.pageLockedEventDescription)},{type:"page.moved",name:(0,A.jsx)(d().sA,{...hs.pageMovedEventType}),description:(0,A.jsx)(d().sA,{...hs.pageMovedEventDescription}),ariaLabel:O().A.formatMessage(hs.pageMovedEventDescription)},{type:"page.properties_updated",name:(0,A.jsx)(d().sA,{...hs.pagePropertiesUpdatedEventType}),description:(0,A.jsx)(d().sA,{...hs.pagePropertiesUpdatedEventDescription}),ariaLabel:O().A.formatMessage(hs.pagePropertiesUpdatedEventDescription)},{type:"page.undeleted",name:(0,A.jsx)(d().sA,{...hs.pageUndeletedEventType}),description:(0,A.jsx)(d().sA,{...hs.pageUndeletedEventDescription}),ariaLabel:O().A.formatMessage(hs.pageUndeletedEventDescription)},{type:"page.unlocked",name:(0,A.jsx)(d().sA,{...hs.pageUnlockedEventType}),description:(0,A.jsx)(d().sA,{...hs.pageUnlockedEventDescription}),ariaLabel:O().A.formatMessage(hs.pageUnlockedEventDescription)}]},{type:"database",label:(0,A.jsx)(d().sA,{...hs.databaseCategoryLabel}),eventTypes:[{type:"database.content_updated",name:(0,A.jsx)(d().sA,{...hs.databaseContentUpdatedEventType}),description:(0,A.jsx)(d().sA,{...hs.databaseContentUpdatedEventDescription}),ariaLabel:O().A.formatMessage(hs.databaseContentUpdatedEventDescription)},{type:"database.created",name:(0,A.jsx)(d().sA,{...hs.databaseCreatedEventType}),description:(0,A.jsx)(d().sA,{...hs.databaseCreatedEventDescription}),ariaLabel:O().A.formatMessage(hs.databaseCreatedEventDescription)},{type:"database.deleted",name:(0,A.jsx)(d().sA,{...hs.databaseDeletedEventType}),description:(0,A.jsx)(d().sA,{...hs.databaseDeletedEventDescription}),ariaLabel:O().A.formatMessage(hs.databaseDeletedEventDescription)},{type:"database.moved",name:(0,A.jsx)(d().sA,{...hs.databaseMovedEventType}),description:(0,A.jsx)(d().sA,{...hs.databaseMovedEventDescription}),ariaLabel:O().A.formatMessage(hs.databaseMovedEventDescription)},{type:"database.schema_updated",name:(0,A.jsx)(d().sA,{...hs.databaseSchemaUpdatedEventType}),description:(0,A.jsx)(d().sA,{...hs.databaseSchemaUpdatedEventDescription}),ariaLabel:O().A.formatMessage(hs.databaseSchemaUpdatedEventDescription)},{type:"database.undeleted",name:(0,A.jsx)(d().sA,{...hs.databaseUndeletedEventType}),description:(0,A.jsx)(d().sA,{...hs.databaseUndeletedEventDescription}),ariaLabel:O().A.formatMessage(hs.databaseUndeletedEventDescription)}]},{type:"comment",label:(0,A.jsx)(d().sA,{...hs.commentCategoryLabel}),eventTypes:[{type:"comment.created",name:(0,A.jsx)(d().sA,{...hs.commentCreatedEventType}),description:(0,A.jsx)(d().sA,{...hs.commentCreatedEventDescription}),ariaLabel:O().A.formatMessage(hs.commentCreatedEventDescription)},{type:"comment.deleted",name:(0,A.jsx)(d().sA,{...hs.commentDeletedEventType}),description:(0,A.jsx)(d().sA,{...hs.commentDeletedEventDescription}),ariaLabel:O().A.formatMessage(hs.commentDeletedEventDescription)},{type:"comment.updated",name:(0,A.jsx)(d().sA,{...hs.commentUpdatedEventType}),description:(0,A.jsx)(d().sA,{...hs.commentUpdatedEventDescription}),ariaLabel:O().A.formatMessage(hs.commentUpdatedEventDescription)}]},{type:"file_upload",label:(0,A.jsx)(d().sA,{...hs.fileUploadCategoryLabel}),eventTypes:[{type:"file_upload.created",name:(0,A.jsx)(d().sA,{...hs.fileUploadCreatedEventType}),description:(0,A.jsx)(d().sA,{...hs.fileUploadCreatedEventDescription}),ariaLabel:O().A.formatMessage(hs.fileUploadCreatedEventDescription)},{type:"file_upload.completed",name:(0,A.jsx)(d().sA,{...hs.fileUploadUploadedEventType}),description:(0,A.jsx)(d().sA,{...hs.fileUploadUploadedEventDescription}),ariaLabel:O().A.formatMessage(hs.fileUploadUploadedEventDescription)},{type:"file_upload.expired",name:(0,A.jsx)(d().sA,{...hs.fileUploadExpiredEventType}),description:(0,A.jsx)(d().sA,{...hs.fileUploadExpiredEventDescription}),ariaLabel:O().A.formatMessage(hs.fileUploadExpiredEventDescription)},{type:"file_upload.upload_failed",name:(0,A.jsx)(d().sA,{...hs.fileUploadUploadFailedEventType}),description:(0,A.jsx)(d().sA,{...hs.fileUploadUploadFailedEventDescription}),ariaLabel:O().A.formatMessage(hs.fileUploadUploadFailedEventDescription)}]}],vs=(0,d().YK)({allSelectedEventsCount:{id:"webhookSubscriptionModal.numTotalEventsSelected",defaultMessage:"Events ({totalEventsSelected})"},allSelectedCategoryCount:{id:"webhookSubscriptionModal.allCategoryEventsSelected",defaultMessage:"{totalNum} events"},webhookUrl:{id:"webhookSubscriptionModal.webhookURL",defaultMessage:"Webhook URL"},webhookUrlPlaceholder:{id:"webhookSubscriptionModal.webhookUrlPlaceholder",defaultMessage:"Enter the URL where you want to receive events"},selectedEventTypes:{id:"webhookSubscriptionModal.selectEvents",defaultMessage:"Select the events to listen to"},createButton:{id:"webhookSubscriptionModal.create",defaultMessage:"Create subscription"},editButton:{id:"webhookSubscriptionModal.edit",defaultMessage:"Update subscription"},noChangesToSave:{id:"webhookSubscriptionModal.noChangesToSave",defaultMessage:"Your selections already match the current settings"},cancelButton:{id:"webhookSubscriptionModal.cancel",defaultMessage:"Cancel"},genericError:{id:"webhookSubscriptionModal.genericErrorMessage",defaultMessage:"Something went wrong, please retry again"},createHeader:{defaultMessage:"Create subscription",id:"webhookSubscriptionModal.createModalTitle"},editHeader:{defaultMessage:"Edit subscription",id:"webhookSubscriptionModal.editModalTitle"},createByline:{defaultMessage:"Set up your webhook endpoint to receive live events from Notion",id:"webhookSubscriptionModal.modalByline"},editUrlDisabled:{defaultMessage:"If you want to change this, you must delete this webhook and create another",id:"webhookSubscriptionModal.editUrlDisabled"},webhookUrlExplanation:{defaultMessage:"Enter a public, SSL-enabled URL where you will receive events",id:"webhookSubscriptionModal.webhookUrlExplanation"}});function ys(e){var t;let{integrationId:a,onRefetchSubscription:s,setIsOpen:l,webhookSubscription:c,botCapabilities:u}=e;const p=null!==c;function g(e){const{eventCategory:t,totalNumEventsForCategory:a,numSelectedForCategory:r}=e,n=t.type,o=()=>{_((e=>({...e,[n]:!e[n]})))},s=()=>{0!==S[n].length?w((e=>({...e,[n]:[]}))):w((e=>({...e,[n]:b[n]})))};return{key:n,action:o,render:e=>{const l=r===a||r>0&&"partial";return(0,i.createElement)(vt().A,{textWrapperStyle:B.textWrapperStyle,title:(0,A.jsxs)("div",{style:B.title,children:[(0,A.jsx)(os().T,{checked:l,size:14,onClick:s,style:B.checkbox}),(0,A.jsx)(ss().A,{style:B.categoryText,children:t.label})]}),right:(0,A.jsxs)(xo().Y1,{direction:"horizontal",gap:"auto",align:"center",children:[(0,A.jsx)(fs,{categoryType:n,botCapabilities:u}),(0,A.jsx)(ss().A,{isSecondaryColor:!0,style:B.categorySubHeader,children:(0,A.jsx)(d().sA,{...vs.allSelectedCategoryCount,values:{totalNum:a}})}),(0,A.jsx)(ds().f,{style:B.toggleButton,open:M[n],onClick:o,isSidebar:!1,fill:!1,icon:"chevron"})]}),...e,key:n})}}}const m=(0,n().uB)(void 0,us().A),f=(0,d().tz)(),h=(0,n().K8)((()=>bs.filter((e=>!e.hidden&&(!e.showIfGate||cs().default.checkGate({gateName:e.showIfGate}))))),[]),b=i.useMemo((()=>h.reduce(((e,t)=>({...e,[t.type]:t.eventTypes.map((e=>{let{type:t}=e;return t}))})),{})),[h]),v=i.useMemo((()=>h.reduce(((e,t)=>e+t.eventTypes.length),0)),[h]),y=i.useMemo((()=>p?h.reduce(((e,t)=>({...e,[t.type]:t.eventTypes.map((e=>{let{type:t}=e;return t})).filter((e=>{var t;return null==c||null===(t=c.event_types)||void 0===t?void 0:t[e]}))})),{}):h.reduce(((e,t)=>({...e,[t.type]:t.eventTypes.map((e=>{let{type:t}=e;return t}))})),{})),[c,p,h]),[S,w]=i.useState(y),[C,j]=i.useState(p?c.url:""),[M,_]=i.useState(Object.keys(b).reduce(((e,t)=>(e[t]=!1,e)),{})),[I,k]=i.useState(""),[T,P]=i.useState(""),[D,E]=i.useState(!1),B=function(e){let{hasEventTypesError:t}=e;return(0,o().IS)((e=>({textWrapperStyle:{margin:0},textInput:{height:32,fontSize:15},disabledTextInput:{height:32,fontSize:15,color:e.text.tertiary},webhookUrlSection:{marginTop:24,marginBottom:24},container:{paddingBottom:8},toggleButton:{marginLeft:2,marginRight:2},title:{margin:0,display:"flex",alignItems:"center",paddingLeft:12},categoryText:{marginLeft:8,fontWeight:L().Wy.medium},categorySubHeader:{marginLeft:6,width:60},icon:{height:32,width:32,fill:e.icon.secondary},eventTypesError:{color:e.text.uiRedPrimary,marginTop:6},eventTypesContainer:{maxHeight:280,borderRadius:8,border:`1px solid ${t?e.stroke.uiRedSecondary:e.stroke.secondary}`},eventTypesWrapper:{height:290},eventTypesSection:{overflowY:"scroll",maxHeight:220},actionButton:{marginTop:15,width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},eventName:{display:"flex",alignItems:"center"},questionMarkCircleIcon:{width:Fe().Ev.sm,height:Fe().Ev.sm},eventTypesHeader:{display:"flex",height:40,padding:16,borderBottom:`1px solid ${e.regularDividerColor}`,gap:10,alignItems:"center"},categoryToggle:{display:"flex",alignItems:"center",justifyContent:"flex-start"},checkbox:{marginLeft:0},eventNameItem:{paddingLeft:28}})),[t])}({hasEventTypesError:T.length>0}),R=(0,r().v3)(),F=p&&"pending"!==c.status,U=!(0,Ht().n4)(C.trim(),(null==c||null===(t=c.url)||void 0===t?void 0:t.trim())||""),N=!(0,Ht().n4)(S,y),z=U||N;async function H(){if(p&&!C)return void k("Webhook URL cannot be blank");k(""),P(""),E(!0);const e=Object.values(S).flat().reduce(((e,t)=>({...e,[t]:!0})),{});let t;if(t=p?await ts({environment:R,subscriptionId:c.id,eventTypes:e,...F?{}:{url:C}}):await async function(e){const{environment:t,...a}=e,i=await x().callApi({eventName:"createWebhookSubscription",environment:t,data:a});return"failed"===i.type?es(i):{responseType:"success",data:i.data}}({environment:R,integrationId:a,url:C,eventTypes:e}),E(!1),"error"===t.responseType){const e=t.data.message??f.formatMessage(vs.genericError);"url"===t.data.field?k(e):"eventTypes"===t.data.field&&P(e)}else"success"===t.responseType?(l(!1),s()):(0,V().HB)(t)}const O=[];let W=0;for(const i of h){if(i.hidden)continue;const e=i.type,t=[];let a=0;for(const{type:r,name:n,description:o,ariaLabel:s}of i.eventTypes)t.push({key:r,action:()=>{const t=S[e].filter((e=>e!==r));S[e].includes(r)||t.push(r),w((a=>({...a,[e]:t})))},render:t=>(0,A.jsx)(vt().A,{...t,icon:(0,A.jsx)(os().T,{checked:S[e].includes(r),size:14,onClick:()=>{const t=S[e].filter((e=>e!==r));S[e].includes(r)||t.push(r),w((a=>({...a,[e]:t})))}}),focused:!1,title:(0,A.jsx)(Na().A,{textWrap:!0,renderTooltip:()=>(0,A.jsx)(ps,{event:{type:r,description:o}}),render:e=>(0,A.jsxs)("div",{...e,style:B.eventName,children:[n,(0,A.jsx)(ki().A,{ariaLabel:s,icon:No().questionMarkCircleIcon,iconStyle:B.questionMarkCircleIcon,disableBackground:!0})]})}),className:"notranslate",style:B.eventNameItem})}),S[e].includes(r)&&(a++,W+=1);O.push(g({eventCategory:i,shouldShowCount:!0,totalNumEventsForCategory:t.length,numSelectedForCategory:a})),M[e]&&O.push(...t)}const q={key:"results",items:O,render:e=>(0,A.jsx)(Pi().A,{...e,title:null,loading:!1})},K=p?vs.editButton:vs.createButton,G=0!==W&&(W===v||"partial");return(0,A.jsxs)(xo().Y1,{padding:24,children:[(0,A.jsx)(ls().rQ,{icon:(0,rs().L)(B.icon),title:p?f.formatMessage(vs.editHeader):f.formatMessage(vs.createHeader),byline:f.formatMessage(vs.createByline)}),(0,A.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await H()},children:[(0,A.jsx)("div",{style:B.webhookUrlSection,children:(0,A.jsxs)(xo().Y1,{gap:6,children:[(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,A.jsx)(d().sA,{...vs.webhookUrl})}),(0,A.jsx)(Br().A,{ignoreKeyboardMode:!0,errorOutline:I.length>0,value:C,style:F?B.disabledTextInput:B.textInput,onChange:e=>j(e.target.value),disabled:F,placeholder:f.formatMessage(vs.webhookUrlPlaceholder)}),I.length>0?(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Regular",colorName:"uiRedPrimary",children:I}):(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:F?(0,A.jsx)(d().sA,{...vs.editUrlDisabled}):(0,A.jsx)(d().sA,{...vs.webhookUrlExplanation})})]})}),(0,A.jsxs)(xo().Y1,{gap:6,children:[(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,A.jsx)(d().sA,{...vs.selectedEventTypes})}),(0,A.jsxs)("div",{style:B.eventTypesWrapper,children:[(0,A.jsxs)("div",{style:B.eventTypesContainer,children:[(0,A.jsxs)("div",{style:B.eventTypesHeader,children:[(0,A.jsx)(os().T,{checked:G,size:14,onClick:function(){w(0===W?h.reduce(((e,t)=>({...e,[t.type]:b[t.type]})),{}):h.reduce(((e,t)=>({...e,[t.type]:[]})),{}))},style:B.checkbox}),(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,A.jsx)(d().sA,{...vs.allSelectedEventsCount,values:{totalEventsSelected:W}})})]}),(0,A.jsx)("div",{style:B.eventTypesSection,children:(0,A.jsx)(Ti().Ay,{type:Ti().Oh.Vertical,store:m,initialFocus:0,sections:[q]})})]}),(0,A.jsx)("div",{children:T.length>0&&(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Regular",style:B.eventTypesError,children:T})})]})]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(Na().A,{placement:Wo().W.Top,alignment:Wo().C.Center,disableTooltip:z||!p,renderTooltip:()=>(0,A.jsx)(d().sA,{...vs.noChangesToSave}),textWrap:!0,render:e=>(0,A.jsx)(Ie().A,{size:"lg",...e,onClick:async()=>await H(),style:B.actionButton,disabled:D||!z,children:(0,A.jsx)(d().sA,{...K})})}),(0,A.jsx)(Xe().A,{size:"lg",style:B.actionButton,onClick:()=>{l(!1)},disabled:D,children:(0,A.jsx)(d().sA,{...vs.cancelButton})})]})]})}function xs(e){let{onRefetchSubscription:t,isOpen:a,setIsOpen:i,integrationId:r,webhookSubscription:n,botCapabilities:o}=e;return a?(0,A.jsx)(ei().s,{areaConstraint:{width:{type:"min",length:600},height:{type:"min",length:600}},isOpen:a,onClosed:()=>i(!1),render:()=>(0,A.jsx)(ys,{integrationId:r,onRefetchSubscription:t,setIsOpen:i,webhookSubscription:n,botCapabilities:o})}):null}function Ss(e){let{integrationId:t,onRefetchSubscription:a,modalIsOpen:i,setModalIsOpen:r,botCapabilities:n}=e;const s=(0,o().IS)((e=>({createWebhookButton:{marginTop:20},learnMoreLink:{display:"inline",color:e.blueColor},container:{border:`1px solid ${e.regularDividerColor}`,borderRadius:8,padding:"75px 0"}})),[]);return(0,A.jsx)("div",{style:s.container,children:(0,A.jsxs)(ba().wt,{gap:4,children:[(0,A.jsx)(Do().A,{icon:rs().L,bodyWidth:400,title:(0,A.jsx)(d().sA,{defaultMessage:"No webhook subscription",id:"creatorProfile.integrations.emptyWebhookSubscriptionView.title"}),description:(0,A.jsx)(d().sA,{defaultMessage:"Get real-time updates and automate workflows when important changes happen. <learnMoreLink>Learn more</learnMoreLink>",id:"creatorProfile.integrations.emptyWebhookSubscriptionView.description",values:{learnMoreLink:e=>(0,A.jsx)(Zt().A,{href:"https://developers.notion.com/reference/webhooks",style:s.learnMoreLink,children:e})}})}),(0,A.jsxs)(ba().Ye,{justifyContent:"center",children:[(0,A.jsx)(Xe().A,{size:"lg",iconLeading:ns().W,style:s.createWebhookButton,onClick:()=>r(!0),children:(0,A.jsx)(d().sA,{defaultMessage:"Create a subscription",id:"creatorProfile.integrations.emptyWebhookSubscriptionView.createWebhookButton.label"})}),(0,A.jsx)(xs,{isOpen:i,setIsOpen:r,integrationId:t,onRefetchSubscription:a,webhookSubscription:null,botCapabilities:n})]})]})})}var ws=()=>a(671089),Cs=()=>a(55293),js=()=>a(765974);const Ms={viewBox:"0 0 20 20",fittedViewBox:"3.75 3.75 12.5 12.5",svg:(0,A.jsx)("path",{d:"M4.75 3.75a1 1 0 0 0-1 1v10.5a1 1 0 0 0 1 1H7.5a1 1 0 0 0 1-1V4.75a1 1 0 0 0-1-1zm7.75 0a1 1 0 0 0-1 1v10.5a1 1 0 0 0 1 1h2.75a1 1 0 0 0 1-1V4.75a1 1 0 0 0-1-1z"})},_s=(0,Fe().wt)("mediaPauseFill",Ms);var As=()=>a(802790),Is=()=>a(690197),ks=()=>a(869190),Ts=()=>a(249117);const Ps=(0,d().YK)({title:{id:"creatorProfile.integrations.webhookSubscriptionEventsModal.title",defaultMessage:"View failed events"},subtitle:{id:"creatorProfile.integrations.webhookSubscriptionEventsModal.subtitle",defaultMessage:"View details about failed deliveries to your webhook URL for debugging purposes."},numSuccessesLabel:{id:"creatorProfile.integrations.webhookSubscriptionEventsModal.numSuccessesLabel",defaultMessage:"Number of successes"},numFailuresLabel:{id:"creatorProfile.integrations.webhookSubscriptionEventsModal.numFailuresLabel",defaultMessage:"Number of failures"},lastFailureTimestampMsLabel:{id:"creatorProfile.integrations.webhookSubscriptionEventsModal.lastFailureTimestampMsLabel",defaultMessage:"Most recent failure"}});function Ls(e){const{deliveryState:t,isOpen:a,onDismiss:r}=e,n=(0,o().IS)((e=>({container:{padding:16,backgroundColor:e.surface.wash,marginLeft:8,marginRight:8},headerIcon:{width:32,height:32},title:{textAlign:"center",fontSize:16,fontWeight:L().Wy.semibold,lineHeight:"22px",marginBottom:8,marginTop:8},subtitle:{textAlign:"center",fontSize:14,lineHeight:"20px",marginBottom:16,color:e.text.secondary,fontWeight:L().Wy.regular},propertyRow:{display:"inherit"}})),[]),s=(0,d().tz)(),l=(0,v().H)(s),c=(0,Fo().P)(),u=[{key:"num_failures",label:(0,A.jsx)(d().sA,{...Ps.numFailuresLabel}),value:String(t.numFailures)},...t.numSuccesses?[{key:"num_successes",label:(0,A.jsx)(d().sA,{...Ps.numSuccessesLabel}),value:String(t.numSuccesses)}]:[],...t.lastFailureTimestampMs?[{key:"last_failure_timestamp_ms",label:(0,A.jsx)(d().sA,{...Ps.lastFailureTimestampMsLabel}),value:(p=t.lastFailureTimestampMs,(0,ks().W_)(p,"medium_with_seconds",l,c))}]:[]];var p;return(0,A.jsx)(ei().s,{areaConstraint:{width:{type:"min",length:500},height:{type:"min",length:150}},isOpen:a,onDismiss:r,render:()=>(0,A.jsxs)(xo().Y1,{style:n.container,direction:"vertical",children:[(0,A.jsx)(ba().Ye,{justifyContent:"center",children:(0,rs().L)(n.headerIcon)}),(0,A.jsx)(ba().Ye,{justifyContent:"center",style:n.title,children:(0,A.jsx)(d().sA,{...Ps.title})}),(0,A.jsx)(ba().Ye,{justifyContent:"center",style:n.subtitle,children:(0,A.jsx)(d().sA,{...Ps.subtitle})}),(0,A.jsx)(Ts().xA,{gap:8,children:u.map(((e,t)=>(0,A.jsxs)(i.Fragment,{children:[(0,A.jsx)(Ts().LX,{row:t+1,col:1,children:(0,A.jsx)("span",{children:(0,A.jsx)(ss().A,{isSecondaryColor:!0,children:e.label})})}),(0,A.jsx)(Ts().LX,{row:t+1,col:2,children:(0,A.jsx)("span",{children:(0,A.jsx)(ss().A,{children:e.value})})})]},e.key)))})]})})}var Ds=()=>a(637433);const Es=(0,d().YK)({enabledEventCount:{defaultMessage:"{numEnabledEvents}/{numTotalEvents} events",id:"creatorProfile.integrations.webhookSubscriptionDetail.enabledEventCount"}});function Bs(e){const t=(0,d().tz)(),{enabledEventTypes:a,botCapabilities:i}=e,r=(0,o().IS)((e=>({eventRow:{alignItems:"center",height:24},eventName:{lineHeight:"18px",paddingLeft:6,fontWeight:L().Wy.medium,fontSize:12},eventCountContainer:{width:76,textAlign:"right",height:24},eventCountLabel:{lineHeight:"24px",color:e.text.secondary},checkbox:{background:e.icon.uiBluePrimary,fill:e.white},disabledEventType:{width:14,marginLeft:-2},disabledEventTypeIcon:{fill:e.icon.graySecondary,width:Fe().Ev.sm,height:Fe().Ev.sm},questionMarkCircleIcon:{width:Fe().Ev.sm,height:Fe().Ev.sm},iconButton:{alignSelf:"center"}})),[]),s=(0,n().K8)((()=>function(e){return bs.map((t=>{const a=t.eventTypes.map((t=>({type:t.type,name:t.name,description:t.description,isEnabled:!e||Boolean(e[t.type])}))),i=a.filter((e=>{let{isEnabled:t}=e;return t})).length;return{type:t.type,title:t.label,numEnabledEvents:i,numTotalEvents:a.length,eventInfo:a,hidden:t.hidden||t.showIfGate&&!cs().default.checkGate({gateName:t.showIfGate})}}))}(a)),[a]),l=e=>{let{category:t,botCapabilities:a}=e;const{numEnabledEvents:i,numTotalEvents:n}=t;return(0,A.jsxs)(xo().Y1,{direction:"horizontal",align:"center",gap:8,children:[(0,A.jsx)(fs,{categoryType:t.type,botCapabilities:a}),(0,A.jsx)("div",{style:r.eventCountContainer,children:(0,A.jsx)(ss().A,{style:r.eventCountLabel,children:(0,A.jsx)(d().sA,{...Es.enabledEventCount,values:{numEnabledEvents:i,numTotalEvents:n}})})})]})},c=e=>{let{event:a}=e;return(0,A.jsxs)(ba().Ye,{style:r.eventRow,children:[a.isEnabled?(0,A.jsx)(os().T,{size:12,round:!0,thinOutline:!0,checked:!0,disabled:!0,style:r.checkbox}):(0,A.jsx)("div",{style:r.disabledEventType,children:(0,Ds().Y)(r.disabledEventTypeIcon)}),(0,A.jsx)(ss().A,{isSecondaryColor:!a.isEnabled,style:r.eventName,children:a.name}),(0,A.jsx)(Na().A,{textWrap:!0,renderTooltip:()=>(0,A.jsx)(ps,{event:a}),render:e=>(0,A.jsx)("div",{...e,children:(0,A.jsx)(ki().A,{ariaLabel:t.formatMessage({id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTooltip",defaultMessage:"Event type: {eventType}"},{eventType:a.type}),icon:No().questionMarkCircleIcon,iconStyle:r.questionMarkCircleIcon,size:"sm",disableBackground:!0,style:r.iconButton})})})]})},u=e=>{let{category:t}=e;const a=t.eventInfo.map(((e,t)=>{const a=Math.floor(t/3)+1,i=t%3+1;return(0,A.jsx)(Ts().LX,{row:a,col:i,children:c({event:e})},e.type)}));for(let i=a.length+1;i<=3;i++)a.push((0,A.jsx)(Ts().LX,{row:1,col:i,children:(0,A.jsx)(ss().A,{})},`empty-${i}`));return(0,A.jsx)(Ts().xA,{gap:8,children:a})},p=s.map((e=>(e=>{let{category:t,botCapabilities:a}=e;return{key:t.type,title:t.title,secondaryLabel:l({category:t,botCapabilities:a}),content:u({category:t}),hidden:t.hidden}})({category:e,botCapabilities:i})));return(0,A.jsx)(Vo().b,{sections:p})}var Rs=()=>a(662303);const Fs=(0,d().YK)({verifySubscription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.verifySubscription",defaultMessage:"Verify subscription"},instruction1:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.instruction1",defaultMessage:"We sent a verification token to your webhook URL."},instruction2:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.instruction2",defaultMessage:"Enter it below to activate your subscription."},urlLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.urlLabel",defaultMessage:"Webhook URL"},resendToken:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.resendToken",defaultMessage:"Resend token"},verificationTokenLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.verificationTokenLabel",defaultMessage:"Verification token"},verificationMessage:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.verificationMessage",defaultMessage:"{message}"},verifyButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.verifyButton",defaultMessage:"Verify subscription"},cancelButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.cancelButton",defaultMessage:"Cancel"},verificationFailure:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.verificationFailure",defaultMessage:"Invalid verification token."},resendTokenFailure:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.resendTokenFailure",defaultMessage:"Failed to send verification token with status {httpCode}"},resendTokenSuccess:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.resendTokenSuccess",defaultMessage:"Verification token was successfully sent to the URL"}});function Us(e){const{webhookSubscription:t,onClosed:a,onRefetchSubscription:n}=e,[s,l]=i.useState(""),[c,u]=i.useState(""),[p,g]=i.useState({status:"",message:""}),m=(0,o().IS)(zs,[]),f=(0,r().v3)(),h=(0,d().tz)(),b=(0,i.useCallback)((async e=>{let{id:t,verificationToken:i}=e;u("");try{const e=await async function(e){const{environment:t,...a}=e,i=await x().callApi({eventName:"verifyWebhookSubscription",environment:t,data:a});if("failed"===i.type)throw i.error;return i.data}({environment:f,id:t,verificationToken:i});e&&(a(),n())}catch(r){return u(h.formatMessage(Fs.verificationFailure))}}),[f,n,h,a]),v=(0,i.useCallback)((async e=>{g({status:"",message:""});const t=await async function(e){const{environment:t,...a}=e,i=await x().callApi({eventName:"sendWebhookVerificationToken",environment:t,data:a});if("failed"===i.type)throw i.error;return i.data}({environment:f,id:e});"failure"===t.status?g({status:"failure",message:h.formatMessage(Fs.resendTokenFailure,{httpCode:t.httpCode})}):g({status:"success",message:h.formatMessage(Fs.resendTokenSuccess)})}),[f,h]);return(0,A.jsxs)(xo().Y1,{padding:"24px 20px",children:[(0,A.jsxs)("div",{style:m.modalHeader,children:[(0,A.jsx)("div",{style:m.iconContainer,children:(0,rs().L)(m.icon)}),(0,A.jsx)(yt().D,{styleName:"Heading-17px/Semibold",customStyles:{marginBottom:10},children:(0,A.jsx)(d().sA,{...Fs.verifySubscription})}),(0,A.jsxs)(yt().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:[(0,A.jsx)(d().sA,{...Fs.instruction1}),(0,A.jsx)("br",{}),(0,A.jsx)(d().sA,{...Fs.instruction2})]})]}),(0,A.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await b({id:t.id,verificationToken:s})},style:m.topSpacing,children:[(0,A.jsxs)(xo().Y1,{gap:6,children:[(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,A.jsx)(d().sA,{...Fs.urlLabel})}),(0,A.jsx)(Br().A,{value:t.url,disabled:!0,right:(0,A.jsx)(ba().Ye,{children:(0,A.jsx)(ve().A,{onClick:async()=>{await v(t.id)},style:m.resendButton,children:(0,A.jsx)("div",{style:m.resendText,children:(0,A.jsx)(d().sA,{...Fs.resendToken})})})})})]}),["success","failure"].includes(p.status)&&(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Regular",style:"failure"===p.status?m.errorLabel:m.successLabel,children:p.message}),(0,A.jsx)("div",{style:m.topSpacing,children:(0,A.jsxs)(xo().Y1,{gap:6,children:[(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,A.jsx)(d().sA,{...Fs.verificationTokenLabel})}),(0,A.jsx)(Br().A,{type:"text",value:s,placeholder:"secret_********",onChange:e=>l(e.target.value)})]})}),c.length>0&&(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",style:m.errorLabel,children:(0,A.jsx)(d().sA,{...Fs.verificationMessage,values:{message:c}})}),(0,A.jsx)("div",{style:m.topSpacing,children:(0,A.jsx)(Ie().A,{size:"lg",style:m.modalButton,onClick:async()=>{await b({id:t.id,verificationToken:s})},children:(0,A.jsx)(d().sA,{...Fs.verifyButtonLabel})},"btn-verify")}),(0,A.jsx)("div",{children:(0,A.jsx)(Xe().A,{size:"lg",style:m.modalButton,onClick:a,children:(0,A.jsx)(d().sA,{...Fs.cancelButtonLabel})})})]})]})}function Ns(e){const{webhookSubscription:t,isOpen:a,setIsOpen:i,onRefetchSubscription:r}=e;if(!a)return null;const n=()=>{i(!1)};return(0,A.jsx)(ei().s,{areaConstraint:{width:{type:"min",length:600},height:{type:"min",length:300}},isOpen:a,onClosed:n,render:()=>(0,A.jsx)(Us,{webhookSubscription:t,onClosed:n,onRefetchSubscription:r})})}function zs(e){return{icon:{height:32,width:32,fill:e.icon.secondary},iconContainer:{width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:8},resendButton:{display:"inline-flex",alignItems:"center",fontFamily:L().vc(Rs().locale).sans,borderRadius:6,padding:"0 6px",height:24,color:c().Ay.blue},resendText:{whiteSpace:"nowrap",overflow:"hidden",width:"100%",textAlign:"right"},modalHeader:{textAlign:"center"},modalButton:{marginTop:10,width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},topSpacing:{marginTop:20},successLabel:{marginTop:6,color:"green"},errorLabel:{marginTop:6,color:e.text.uiYellowPrimary}}}const Vs=(0,d().YK)({confirmDeleteModalTitle:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmDelete.message",defaultMessage:"Are you sure you want to delete this subscription?"},confirmDeleteModalDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmDelete.description",defaultMessage:"Your webhook URL will no longer receive events and the subscription will be deleted. You’ll need to create a new one to receive events again."},confirmDeleteModalAcceptButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmDelete.acceptButtonLabel",defaultMessage:"Delete subscription"},confirmResumeModalTitle:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmResume.message",defaultMessage:"Are you sure you want to resume this subscription?"},confirmResumeModalDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmResume.description",defaultMessage:"Your webhook URL will start receiving Notion events and should be ready to return a successful HTTP response."},confirmResumeModalAcceptButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmResume.acceptButtonLabel",defaultMessage:"Resume"},confirmPauseModalTitle:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmPause.message",defaultMessage:"Are you sure you want to pause this subscription?"},confirmPauseModalDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmPause.description",defaultMessage:"Events will not be sent to your webhook URL until you resume the subscription."},confirmPauseModalAcceptButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmPause.acceptButtonLabel",defaultMessage:"Pause subscription"},urlLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.urlLabel",defaultMessage:"Webhook URL"},urlDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.urlDescription",defaultMessage:"This is where your webhook events are sent."},enabledEventsLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.enabledEventsLabel",defaultMessage:"Subscribed events"},enabledEventsDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.enabledEventsDescription",defaultMessage:"These webhooks events will be sent to your webhook URL"},deleteButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.buttonLabels.delete",defaultMessage:"Delete"},editButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.buttonLabels.edit",defaultMessage:"Edit subscription"},verifyButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.buttonLabels.verify",defaultMessage:"Verify"},pauseButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.buttonLabels.pause",defaultMessage:"Pause"},resumeButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.buttonLabels.resume",defaultMessage:"Resume"},learnMoreButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.learnMoreFooterText",defaultMessage:"Learn more about webhooks"},activeWebhookStatusLabel:{defaultMessage:"This subscription is currently active",id:"creatorProfile.integrations.webhookSubscriptionDetail.activeWebhookStatusLabel"},verifyCalloutHeader:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verifyCalloutHeader",defaultMessage:"You must verify your endpoint to receive webhook events"},verifyCalloutBody:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verifyCalloutBody",defaultMessage:"To start receiving events, you need to verify your endpoint. This ensures a secure connection between Notion and your application."},pausedCalloutHeader:{id:"creatorProfile.integrations.webhookSubscriptionDetail.pausedCalloutHeader",defaultMessage:"Webhook subscription is currently paused"},pausedCalloutBody:{id:"creatorProfile.integrations.webhookSubscriptionDetail.pausedCalloutBody",defaultMessage:"Your webhook subscription is currently paused due to high error rate. Please fix the problem and resume to enable event delivery."},pausedByUserStatusLabel:{defaultMessage:"This subscription is currently paused",id:"creatorProfile.integrations.webhookSubscriptionDetail.pausedByuserWebhookStatusLabel"},openDeliveryStateButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.openDeliveryStateButtonLabel",defaultMessage:"View failed events"}});function Hs(e){return"pending"===e?Vs.verifyCalloutHeader:"paused"===e?Vs.pausedCalloutHeader:void 0}function Os(e){return"pending"===e?Vs.verifyCalloutBody:"paused"===e?Vs.pausedCalloutBody:void 0}function Ws(e){const{webhookSubscription:t,onUpdateSubscriptionStatus:a,onRefetchSubscription:r,modalIsOpen:n,setModalIsOpen:s,botCapabilities:l}=e,{status:u}=t,p=(0,o().IS)((e=>({activeText:{fontSize:14,lineHeight:"18px",color:e.text.uiBluePrimary,paddingLeft:6},pausedText:{fontSize:14,lineHeight:"18px",color:e.text.tertiary},pausedByUserIcon:{width:Fe().Ev.sm,height:Fe().Ev.sm,marginRight:6,fill:e.icon.uiYellowPrimary},mainButtonArea:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:8},secondaryButtonArea:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:8},mediumBoldButton:{fontWeight:L().Wy.medium,height:32},frame:{border:`1px solid ${e.regularDividerColor}`,borderRadius:6},frameBody:{padding:24},frameFooter:{padding:"20px 24px",justifyContent:"space-between",display:"flex",alignItems:"center"},footerButton:{height:32},urlInput:{color:e.text.tertiary},sectionTitle:{fontWeight:L().Wy.semibold,paddingBottom:4},sectionSubtitle:{paddingBottom:12,alignItems:"center"},sectionBody:{paddingBottom:8},divider:{paddingTop:16,paddingBottom:16},learnMoreButton:{display:"inline-flex",fontWeight:L().Wy.medium,marginLeft:0},learnMoreInnerButton:{height:28,paddingLeft:8,paddingRight:8},warningIcon:{width:Fe().Ev.sm,height:Fe().Ev.sm,color:e.statusTokenText.yellow,marginRight:6,marginTop:2},pauseIcon:{width:Fe().Ev.sm,height:Fe().Ev.sm,marginRight:6},belowFrameArea:{marginLeft:2,marginTop:8},calloutContainer:{marginTop:12,padding:15,borderRadius:10,backgroundColor:e.palette.yellow[50]},calloutHeader:{fontWeight:L().Wy.bold,marginBlockStart:"0.5em",marginBlockEnd:"0.5em"},calloutIcon:{width:18,height:18,color:e.statusTokenText.yellow,marginRight:6},calloutBody:{paddingLeft:25,color:e.text.tertiary,marginBlockStart:"0.2em",marginBlockEnd:"0.2em",maxWidth:640,fontSize:14,marginTop:0},deleteConfirmationModalIcon:{height:Fe().Ev.xl,width:Fe().Ev.xl,fill:e.icon.redPrimary},pauseConfirmationModalIcon:{height:Fe().Ev.xl,width:Fe().Ev.xl,fill:e.icon.graySecondary},resumeConfirmationModalIcon:{height:Fe().Ev.xl,width:Fe().Ev.xl,fill:e.icon.graySecondary},fullWidth:{width:"100%"},openDeliveryStateButton:{color:e.text.uiBluePrimary}})),[]),[g,m]=i.useState(!1),f="paused"===u&&"user_deactivation"!==t.paused_reason,h="paused"===u&&"user_deactivation"===t.paused_reason,[b,v]=i.useState(!1);const y=[{key:"url",title:(0,A.jsx)(d().sA,{...Vs.urlLabel}),subtitle:(0,A.jsx)(d().sA,{...Vs.urlDescription}),main:(0,A.jsx)(Br().A,{value:t.url,disabled:!0,style:p.urlInput,format:Br().C.Large}),footer:(0,A.jsxs)(ba().Ye,{justifyContent:"space-between",alignItems:"center",style:p.fullWidth,children:[(0,A.jsx)(ba().Ye,{alignItems:"center",children:"active"===u?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(os().T,{size:12,round:!0,thinOutline:!0,checked:!0,disabled:!0}),(0,A.jsx)("div",{style:p.activeText,children:(0,A.jsx)(d().sA,{...Vs.activeWebhookStatusLabel})})]}):h?(0,A.jsxs)(A.Fragment,{children:[(0,js().exclamationMarkTriangleFillIcon)(p.pausedByUserIcon),(0,A.jsx)("div",{style:p.pausedText,children:(0,A.jsx)(d().sA,{...Vs.pausedByUserStatusLabel})})]}):void 0}),t.delivery_state&&(0,A.jsxs)(ba().Ye,{alignItems:"center",children:[(0,A.jsx)(_().p,{isGray:!0,size:"xs",style:p.openDeliveryStateButton,onClick:()=>v(!0),children:(0,A.jsx)(d().sA,{...Vs.openDeliveryStateButtonLabel})}),(0,A.jsx)(Ls,{isOpen:b,onDismiss:()=>v(!1),deliveryState:t.delivery_state})]})]})},{key:"events",title:(0,A.jsx)(d().sA,{...Vs.enabledEventsLabel}),subtitle:(0,A.jsx)(d().sA,{...Vs.enabledEventsDescription}),main:(0,A.jsx)(Bs,{botCapabilities:l,enabledEventTypes:t.event_types})}],x=y.map(((e,t)=>(0,A.jsxs)("div",{children:[(0,A.jsx)(ba().Ye,{style:p.sectionTitle,children:(0,A.jsx)(ss().A,{children:e.title})}),(0,A.jsx)(ba().Ye,{style:p.sectionSubtitle,children:(0,A.jsx)(ss().A,{isSecondaryColor:!0,children:e.subtitle})}),(0,A.jsx)("div",{style:p.sectionBody,children:e.main}),e.footer&&(0,A.jsx)(ba().Ye,{style:p.sectionSubtitle,children:e.footer}),t<y.length-1&&(0,A.jsx)(Ce().A,{axis:"y",size:8})]},e.key))),w=[(0,A.jsx)(_().p,{isRed:!0,onClick:async()=>await async function(e){const{accept:t}=await S().Gh({message:(0,A.jsx)(d().sA,{...Vs.confirmDeleteModalTitle}),description:(0,A.jsx)(d().sA,{...Vs.confirmDeleteModalDescription}),acceptLabel:(0,A.jsx)(d().sA,{...Vs.confirmDeleteModalAcceptButtonLabel}),icon:(0,Cs().J)(p.deleteConfirmationModalIcon),mode:"wide"});t&&a({id:e,status:"archived"})}(t.id),style:p.mediumBoldButton,children:(0,A.jsx)(d().sA,{...Vs.deleteButtonLabel})},"btn-delete"),(0,A.jsx)(Ie().A,{style:p.footerButton,onClick:()=>s(!0),children:(0,A.jsx)(d().sA,{...Vs.editButtonLabel})},"btn-edit")];let C=null;"pending"===u?C=(0,A.jsxs)("span",{children:[(0,A.jsxs)(Xe().A,{size:"lg",onClick:()=>m(!0),style:p.mediumBoldButton,children:[(0,ho().exclamationMarkTriangleIcon)(p.warningIcon),(0,A.jsx)(d().sA,{...Vs.verifyButtonLabel})]}),(0,A.jsx)(Ns,{isOpen:g,setIsOpen:m,webhookSubscription:t,onRefetchSubscription:r})]},"btn-verify"):"active"===u?C=(0,A.jsx)("span",{children:(0,A.jsxs)(Xe().A,{size:"lg",onClick:async()=>await async function(e){const{accept:t}=await S().Gh({message:(0,A.jsx)(d().sA,{...Vs.confirmPauseModalTitle}),description:(0,A.jsx)(d().sA,{...Vs.confirmPauseModalDescription}),acceptLabel:(0,A.jsx)(d().sA,{...Vs.confirmPauseModalAcceptButtonLabel}),acceptColor:"blue",icon:_s(p.pauseConfirmationModalIcon),mode:"wide"});t&&a({id:e,status:"paused"})}(t.id),style:p.mediumBoldButton,children:[_s(p.pauseIcon),(0,A.jsx)(d().sA,{...Vs.pauseButtonLabel})]})},"btn-pause"):"paused"===u&&(C=(0,A.jsxs)(Xe().A,{size:"lg",onClick:async()=>await async function(e){const{accept:t}=await S().Gh({message:(0,A.jsx)(d().sA,{...Vs.confirmResumeModalTitle}),description:(0,A.jsx)(d().sA,{...Vs.confirmResumeModalDescription}),acceptLabel:(0,A.jsx)(d().sA,{...Vs.confirmResumeModalAcceptButtonLabel}),acceptColor:"blue",icon:(0,ws().checkmarkCircleIcon)(p.resumeConfirmationModalIcon),mode:"wide"});t&&a({id:e,status:"active"})}(t.id),style:p.mediumBoldButton,children:[(0,ho().exclamationMarkTriangleIcon)(p.warningIcon),(0,A.jsx)(d().sA,{...Vs.resumeButtonLabel})]},"btn-resume"));const j=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{children:(0,A.jsx)("span",{style:p.secondaryButtonArea,children:C})}),(0,A.jsx)("div",{children:(0,A.jsx)("span",{style:p.mainButtonArea,children:w})})]}),M=(0,A.jsx)(Is().A,{title:(0,A.jsx)(d().sA,{...Vs.learnMoreButtonLabel}),href:"https://developers.notion.com/reference/webhooks",style:p.learnMoreButton,analyticsFrom:"webhook_subscription_detail",buttonStyle:p.learnMoreInnerButton}),I=("pending"===u||f)&&(0,A.jsxs)("div",{style:p.calloutContainer,children:[(0,A.jsxs)(ba().Ye,{style:p.sectionTitle,children:[(0,ho().exclamationMarkTriangleIcon)(p.calloutIcon),(0,A.jsx)(ss().A,{isMultiline:!0,children:(0,A.jsx)(d().sA,{...Hs(u)})})]}),(0,A.jsx)("div",{style:p.calloutBody,children:(0,A.jsx)(d().sA,{...Os(u)})})]});return(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{style:p.frame,children:[(0,A.jsxs)("div",{style:p.frameBody,children:[x,I]}),(0,A.jsx)(As().A,{size:1,dividerColor:c().Ay.dividerColor}),(0,A.jsx)("div",{style:p.frameFooter,children:j})]}),(0,A.jsx)(xs,{isOpen:n,setIsOpen:s,webhookSubscription:t,onRefetchSubscription:r,integrationId:t.integration_id,botCapabilities:l}),(0,A.jsx)("div",{style:p.belowFrameArea,children:M})]})}function qs(e){const{botOrIntegrationPointer:t}=e,a=jo({botOrIntegrationPointer:t}),o=function(e){let{integrationId:t}=e;const a=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]);return(0,n().K8)((()=>{if(!a||!t)return{};const e={id:t,table:On().Li};return Bt().CX.createChildStore(a,e).getCapabilities()}),[t,a])}({integrationId:null==a?void 0:a.id}),[s,l]=(0,i.useState)([]),{status:d,result:c,refetch:u}=is({integrationPointer:a});(0,i.useEffect)((()=>{c&&l(c)}),[c]);const[p,g]=i.useState(!1),m=(0,r().v3)(),f=(0,i.useCallback)((async e=>{const{id:t,status:a}=e;await ts({environment:m,subscriptionId:t,status:a}),u()}),[m,u]),h=s.at(0);let v=null;return h?v=(0,A.jsx)(Ws,{webhookSubscription:h,onUpdateSubscriptionStatus:f,onRefetchSubscription:u,modalIsOpen:p,setModalIsOpen:g,botCapabilities:o}):a&&(v=(0,A.jsx)(Ss,{integrationId:a.id,onRefetchSubscription:u,modalIsOpen:p,setModalIsOpen:g,botCapabilities:o})),(0,A.jsx)(So().A,{loaded:"resolved"===d||"rejected"===d,legacySpinnerSize:20,showSpinnerTimeout:500,children:v})}var Ks=()=>a(728112);async function Gs(e){var t;const{integrationFields:a,integrationListingContentfulId:i,userId:r,errors:n,setErrors:o,values:s,environment:l,actorEmail:d,isInstallationUrlOptional:c}=e;let u=!1;const p=function(e){var t,a,i,r;const{values:n}=e,o=[];return n.description||o.push("description"),n.how_to_use||o.push("how_to_use"),null!=n&&null!==(t=n.categories)&&void 0!==t&&t.length||o.push("categories"),null!=n&&null!==(a=n.features)&&void 0!==a&&a.length||o.push("features"),null!=n&&null!==(i=n.preview_images)&&void 0!==i&&i.length&&(null==n||null===(r=n.preview_images)||void 0===r?void 0:r.length)<1&&o.push("preview_images"),null!=n&&n.add_to_notion_url||e.isInstallationUrlOptional||o.push("add_to_notion_url"),o}({values:s,isInstallationUrlOptional:c});if(p.length>0){let e=n;for(const t of p)e={...e,[t]:O().A.formatMessage(q.requiredFieldError,{name:(0,Ht().ZH)(t.replaceAll("_"," "))})};o(e),u=!0}(null==a?void 0:a.created_by_id)!==r&&o({_general:O().A.formatMessage(q.notCreator)});const g=await async function(e){var t,a;const{name:i,values:r,setErrors:n,environment:o,integrationFields:s,integrationListingContentfulId:l,actorEmail:d}=e;let c=!0;null!=r&&null!==(t=r.categories)&&void 0!==t&&t.length&&r.categories.length>3&&(n({categories:O().A.formatMessage(q.maxCategoriesError)}),c=!1);null!=r&&null!==(a=r.features)&&void 0!==a&&a.length&&r.features.length>3&&(n({features:O().A.formatMessage(q.maxFeaturesError)}),c=!1);if(r.features){var u,p;const e=[];!r.features.includes("linkPreview")||null!=s&&null!==(u=s.capabilities)&&void 0!==u&&u.link_preview||e.push("Link Preview"),!r.features.includes("syncedDatabase")||null!=s&&null!==(p=s.capabilities)&&void 0!==p&&p.synced_database||e.push("Synced Database"),e.length>0&&(n({features:O().A.formatMessage(q.featuresMismatchError,{features:e.join(", ")})}),c=!1)}const g=await async function(e){const{setErrors:t,name:a,environment:i,integrationId:r,actorEmail:n}=e;let o=!0;if(!a)return t({_general:O().A.formatMessage(q.requiredFieldError,{name:"Name"})}),!1;const s=(0,N().Fn)(n);if(!s)for(const d of[...y().I5,"integration"])if(a&&a.toLowerCase().includes(d))return t({_general:O().A.formatMessage(W.disallowedWordError,{word:d,field:"Name"})}),!1;const l=await x().callApi({eventName:"validateIntegrationName",environment:i,data:{name:a,actorEmail:n,integrationId:r,locale:z().q}});"success"!==l.type&&(t({_general:O().A.formatMessage(q.nameIsTakenError)}),o=!1);return o}({name:i??"",actorEmail:d??"",setErrors:n,environment:o,integrationId:(null==s?void 0:s.id)??""});g||(c=!1);(!r.preview_images||r.preview_images.length<1)&&(n({preview_images:O().A.formatMessage(q.previewImagesRequiredError)}),c=!1);if(r.slug){const e=await async function(e){const{setErrors:t,environment:a,slug:i,contentfulId:r,integrationId:n}=e,o=function(e){return 0===e.length?O().A.formatMessage(K.slugIsEmptyError):e.length>y().od?O().A.formatMessage(K.slugTooLongError):/^[a-z0-9-]+$/.test(e)?e.startsWith("-")||e.endsWith("-")||e.includes("--")?O().A.formatMessage(K.slugHyphenError):void 0:O().A.formatMessage(K.slugCharactersError)}(i);if(o)return t({slug:o}),!1;const s=await x().callApi({eventName:"validateTemplateDraftSlug",environment:a,data:{slug:i,integrationId:n,contentfulId:r,locale:"en-US"}});if("success"!==s.type)return t({slug:O().A.formatMessage(K.slugIsTakenError)}),!1;return!0}({environment:o,slug:r.slug,contentfulId:l,integrationId:null==s?void 0:s.id,setErrors:n});e||(c=!1)}r.how_to_use&&(0,Ks().j)(r.how_to_use)>y().ID&&(n({how_to_use:O().A.formatMessage(q.howToUseTooLongError)}),c=!1);r.description&&(0,Ks().j)(r.description)>y().ID&&(n({description:O().A.formatMessage(q.descriptionTooLongError)}),c=!1);if(r.add_to_notion_url){new RegExp(/^(https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/g).test(r.add_to_notion_url)||(n({add_to_notion_url:O().A.formatMessage(q.invalidUrlError)}),c=!1)}return c}({values:s,setErrors:o,integrationFields:a,environment:l,integrationListingContentfulId:i,name:s.name,actorEmail:d});if(!g)return;if(u)return;const m=await x().callApi({eventName:"submitIntegrationPublishRequest",environment:l,data:{id:(null==a?void 0:a.id)??"",category_contentful_ids:s.categories??[],logo:(null==a?void 0:a.icon)??"",description:s.description??"",how_to_use:s.how_to_use??"",preview_images:(null===(t=s.preview_images)||void 0===t?void 0:t.filter((e=>Boolean(e))))??[],features:s.features??[],add_to_notion_url:s.add_to_notion_url??"",slug:s.slug,name:s.name,icon:s.icon}});"success"===m.type&&m.data.success?he().A.setState({isOpen:!0,type:"IntegrationPublishRequestSuccess",onAccept:()=>{Be().oo({url:no().JZ.creatorProfileIntegrations,environment:l})},onDismiss:()=>{Be().oo({url:no().JZ.creatorProfileIntegrations,environment:l})}}):S().f1(O().A.formatMessage(q.submitError))}const Zs=(0,d().YK)({securityAndCompliance:{id:"creatorProfile.integrationPublish.category.security",defaultMessage:"Security & compliance"},sales:{id:"creatorProfile.integrationPublish.category.sales",defaultMessage:"Sales"},identity:{id:"creatorProfile.integrationPublish.category.identity",defaultMessage:"Identity"},marketing:{id:"creatorProfile.integrationPublish.category.marketing",defaultMessage:"Marketing"},finance:{id:"creatorProfile.integrationPublish.category.finance",defaultMessage:"Finance"},customerExperience:{id:"creatorProfile.integrationPublish.category.customerExperience",defaultMessage:"Customer experience"},forms:{id:"creatorProfile.integrationPublish.category.forms",defaultMessage:"Forms"},fileManagement:{id:"creatorProfile.integrationPublish.category.fileManagement",defaultMessage:"File management"},engineering:{id:"creatorProfile.integrationPublish.category.engineering",defaultMessage:"Engineering"},design:{id:"creatorProfile.integrationPublish.category.design",defaultMessage:"Design"},automations:{id:"creatorProfile.integrationPublish.category.automations",defaultMessage:"Automations"},productivity:{id:"creatorProfile.integrationPublish.category.productivity",defaultMessage:"Productivity"},collaboration:{id:"creatorProfile.integrationPublish.category.collaboration",defaultMessage:"Collaboration"},communication:{id:"creatorProfile.integrationPublish.category.communication",defaultMessage:"Communication"},analytics:{id:"creatorProfile.integrationPublish.category.analytics",defaultMessage:"Analytics"}}),$s=(0,d().YK)({workspacesEvents:{id:"creatorProfile.integrationPublish.feature.workspacesEvents",defaultMessage:"Workspace Events"},contentRedaction:{id:"creatorProfile.integrationPublish.feature.contentRedaction",defaultMessage:"Content Redaction"},permissionsRedaction:{id:"creatorProfile.integrationPublish.feature.permissionsRedaction",defaultMessage:"Permissions Redaction"},workflowAutomation:{id:"creatorProfile.integrationPublish.feature.workflowAutomation",defaultMessage:"Workflow Automation"},linkPreview:{id:"creatorProfile.integrationPublish.feature.linkPreview",defaultMessage:"Link Preview"},syncedDatabase:{id:"creatorProfile.integrationPublish.feature.syncedDatabase",defaultMessage:"Synced Database"},importer:{id:"creatorProfile.integrationPublish.feature.importer",defaultMessage:"Importer"},connectedProperty:{id:"creatorProfile.integrationPublish.feature.connectedProperty",defaultMessage:"Connected property"}}),Ys={workspaceEvents:O().A.formatMessage($s.workspacesEvents),contentRedaction:O().A.formatMessage($s.contentRedaction),connectedProperty:O().A.formatMessage($s.connectedProperty),permissionsRedaction:O().A.formatMessage($s.permissionsRedaction),workflowAutomation:O().A.formatMessage($s.workflowAutomation),linkPreview:O().A.formatMessage($s.linkPreview),syncedDatabase:O().A.formatMessage($s.syncedDatabase),importer:O().A.formatMessage($s.importer)},Qs={"8btEqLBipIhzrURDtMiMp":O().A.formatMessage(Zs.securityAndCompliance),LrLnDt6KMdjAjuzJx3Mue:O().A.formatMessage(Zs.sales),"6Nnak0fGdhHnYOqbbRmGbP":O().A.formatMessage(Zs.identity),"4jaNdw5xVtuE1Kb7WH8VDW":O().A.formatMessage(Zs.marketing),"4917v9HZijGubR4nmfJdhV":O().A.formatMessage(Zs.finance),"2YuNhKaZMbW7vxlqx8DNef":O().A.formatMessage(Zs.customerExperience),"29jYzS08IK5xXF2k5R40gP":O().A.formatMessage(Zs.forms),"6b0oRAGgoFg76mFv6lMK1m":O().A.formatMessage(Zs.fileManagement),"1gyl4Y79DvZ0TM3D5FyYX5":O().A.formatMessage(Zs.engineering),"2xVe1cxdZe794uAIyw6Kl9":O().A.formatMessage(Zs.design),"6b0K7wADJ37fQorrlSQsaq":O().A.formatMessage(Zs.automations),"6HgHpfWS9cNQn9EXZkndTW":O().A.formatMessage(Zs.productivity),"3Tmdhi67ZGO3xHaaooyCgj":O().A.formatMessage(Zs.collaboration),"5qR7nmskJp1EvKEsGwPGjf":O().A.formatMessage(Zs.communication),"4Cbg47uBGFaVqIoP4yW39W":O().A.formatMessage(Zs.analytics)};var Js=()=>a(784892),Xs=()=>a(897119),el=()=>a(881690),tl=()=>a(856952),al=()=>a(377586);function il(){return(0,o().IS)((()=>({noCursorAllowed:{cursor:"not-allowed"},inputDisabled:{cursor:"not-allowed",backgroundColor:"rgba(0, 0, 0, 0.03)",color:"rgba(128, 128, 128, 1)"}})),[])}function rl(e){const{disabled:t,selectedIds:a=[],setSelectedIds:r,candidates:n,title:s}=e,l=(0,o().IS)((e=>({textInput:{borderRadius:tr().A.borderRadius,background:"none"},icon:{fill:e.text.tertiary,height:"16px",width:"16px"},token:{marginLeft:"6px",color:e.text.primary}})),[]),c=il(),[u,p]=(0,i.useState)(""),[g,m]=(0,i.useState)(!1),f=(0,i.useMemo)((()=>[{key:"default-features-list",render:e=>(0,A.jsx)(Pi().A,{...e,title:(0,A.jsx)(d().sA,{id:"integrationSubmission.featurePicker.title",defaultMessage:"{title}",values:{title:s}}),loading:!1}),items:(void 0!==n?Object.entries(n).map((e=>{let[t,a]=e;return{id:t,name:a}})):[]).filter((e=>!(null!=a&&a.includes(e.id)))).map((e=>({key:e.id,render:t=>(0,A.jsx)(vt().A,{...t,title:e.name}),action:()=>{p(""),null!=a&&a.includes(e.id)||r([...a,e.id])}})))}]),[n,a,r,s]);return(0,A.jsx)(Xs().Ay,{popupType:al().n.Popup,placementToOrigin:Wo().W.Bottom,sameWidthAsOrigin:!0,open:g,onDismiss:()=>{p(""),m(!1)},origin:(0,A.jsx)(tl().Ay,{disabled:t,style:{...l.textInput,...t?c.inputDisabled:{}},focus:g,focusInitial:!1,focusAfterAnimation:!0,format:tl().le.Share,inputDivStyle:{alignItems:"center"},value:u,onChange:e=>{p(e.target.value)},onClick:()=>{m(!0)},onRemoveLastToken:()=>{r([])},placeholder:"",type:"integration-features",tokens:null==a?void 0:a.map((e=>(0,A.jsx)(el().A,{showRemoveButton:!t,isSingle:!1,style:{...l.token,...t?c.noCursorAllowed:{}},onClickRemove:t=>{t.stopPropagation(),r(a.filter((t=>t!==e)))},disabled:t,value:(0,A.jsx)("div",{style:{display:"flex"},children:n[e]}),format:Js().NY.Small},e))),onEmptySubmit:Ht().D_,showBorder:!0}),render:()=>(0,A.jsx)(xe().A,{menuType:je().gu.Popup,tokenInputHeader:!0,disableHeaderBorder:!0,maxHeight:"25dvh",children:(0,A.jsx)(Ti().Ay,{type:Ti().Oh.Vertical,initialFocus:0,sections:f})})})}function nl(e){const{handleReset:t,handleSave:a,isFormDirty:i=!0,isLoading:r,disabled:n,hideTermsOfService:s=!1,submitCTA:l=(0,A.jsx)(d().sA,{id:"creatorProfile.integrationSubmission.save",defaultMessage:"Save"})}=e,u=function(e){return(0,o().IS)((()=>({container:{marginTop:"12px",display:"flex",width:"100%",justifyContent:e?"flex-end":"space-between",alignItems:"center"},formActions:{display:"flex",gap:12,justifyContent:"flex-end"},terms:{fontSize:12,color:c().Ay.frontTextLight}})),[e])}(s);return(0,A.jsxs)("div",{style:u.container,children:[!s&&(0,A.jsx)("div",{style:u.terms,children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationSubmission.developerTermsOnSubmit",defaultMessage:"By submitting, you agree to Notion's <developerTermsLink>Developer Terms</developerTermsLink>.",values:{developerTermsLink:e=>(0,A.jsx)(ha().A,{href:no().JZ.developerTerms,children:e})}})}),(0,A.jsxs)("div",{style:u.formActions,children:[(0,A.jsx)(_r().u,{disabled:n,variant:"light",onClick:t,children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationSubmission.cancel",defaultMessage:"Cancel"})}),(0,A.jsx)(_r().u,{disabled:n||!i,variant:"dark",onClick:a,isLoading:r,children:l})]})]})}const ol=(0,Fe().wt)("creatorProfileUpload",{viewBox:"0 0 18 18",svg:(0,A.jsx)("g",{children:(0,A.jsx)("path",{d:"M18.125 9.375c0 1.928-1.197 3.125-3.125 3.125h-1.25v-1.875H15c.887 0 1.25-.363 1.25-1.25s-.363-1.25-1.25-1.25h-1.25V6.25c0-2.044-1.081-3.125-3.125-3.125S7.5 4.206 7.5 6.25v.625H5.625c-1.278 0-1.875.597-1.875 1.875s.597 1.875 1.875 1.875h.625V12.5h-.625c-2.313 0-3.75-1.438-3.75-3.75C1.875 6.437 3.313 5 5.625 5c.04 0 .078.003.119.006C6.2 2.662 7.98 1.25 10.625 1.25c3.084 0 5 1.916 5 5v.047c1.56.234 2.503 1.369 2.503 3.078h-.003zM5.937 13.988l1.325 1.325 1.8-1.8v5.237h1.876v-5.238l1.8 1.8 1.325-1.324L10 9.925l-4.063 4.063z"})})});var sl=()=>a(920773),ll=()=>a(429145);function dl(e){const{value:t,setValue:a,setError:i,showRemove:n=!0,dimensionsCopy:s="512 x 512",containerStyle:l={height:100,width:100},vertical:c}=e,u=(0,r().v3)(),p=function(e){return(0,o().IS)((t=>({uploadButton:{height:100,width:100,display:"flex",flexDirection:"column",justifyContent:"center",background:e?`url(${e}) no-repeat center bottom/cover`:t.palette.gray[30]},uploadContent:{textAlign:"center"},dimensionsText:{color:t.text.tertiary},icon:{width:18,height:18},image:{width:100,height:100,objectFit:"cover",borderRadius:4},container:{display:"flex",alignItems:"flex-start",gap:16},verticalContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:16},imagePlaceholderLoaded:{width:"fit-content"},buttonContainer:{display:"flex",flexDirection:"column",justifyContent:"center",gap:4}})),[e])}(t),{isUploading:g,uploadFile:m}=(0,ll().lN)({onError:e=>{i(e.message)},onSuccess:e=>{a(e)},environment:u}),f=c?p.verticalContainer:p.container;return t?(0,A.jsxs)("div",{style:f,children:[(0,A.jsx)(nn().Ay,{placeholderLoadedStyle:p.imagePlaceholderLoaded,src:t,style:{...p.image,...l}}),(0,A.jsxs)("div",{style:p.buttonContainer,children:[(0,A.jsx)(_r().u,{isLoading:g,variant:"light",onClick:m,children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationSubmission.imageUpload.upload",defaultMessage:"Upload image"})}),n&&(0,A.jsx)(_r().u,{variant:"neutral",onClick:()=>{a(void 0)},children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationSubmission.imageUpload.remove",defaultMessage:"Remove"})})]})]}):(0,A.jsx)(sl().p,{style:{...p.uploadButton,...l},iconStyle:p.icon,iconLeading:ol,onClick:m,children:g?(0,A.jsx)(Ji().A,{style:{marginLeft:4}}):(0,A.jsxs)("div",{style:p.uploadContent,children:[(0,A.jsx)(d().sA,{id:"creatorProfile.integrationSubmission.imageUpload.label",defaultMessage:"Upload"}),(0,A.jsx)("br",{}),(0,A.jsx)("div",{style:p.dimensionsText,children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationSubmission.imageUpload.dimensions",defaultMessage:"{dimensionsCopy}",values:{dimensionsCopy:s}})})]})})}function cl(e){const{values:t,setValue:a,setError:i,error:r,disabled:n}=e,s=(0,o().IS)((e=>({error:{color:e.errorText,fontSize:12,marginTop:2},image:{width:200,height:100},container:{display:"flex",gap:8},outer:{overflowX:"scroll"},helperText:{fontSize:12,fontWeight:L().Wy.regular,color:e.palette.gray[400],marginBottom:4},linkText:{cursor:"pointer",color:e.palette.gray[400]},disabled:{pointerEvents:"none",opacity:.7}})),[]),l={...s.container,...n?{...s.disabled}:{}};return(0,A.jsxs)("div",{style:s.outer,children:[(0,A.jsx)("div",{style:s.helperText,children:(0,A.jsx)(d().sA,{defaultMessage:"Recommended: Use our Figma template for high quality preview images. {figmaLink}.",id:"creatorProfile.integrationPublishRequest.previewImageUpload.helperText",values:{figmaLink:(0,A.jsx)("a",{style:s.linkText,href:"https://www.figma.com/design/9eNjv5T6ZNg4eQVcWWpszX/Integration-Gallery-Preview-Image-Templates?node-id=0-1&t=pUEQmZOJ5aHhKMpC-1",target:"_blank",children:(0,A.jsx)(d().sA,{defaultMessage:"Figma template",id:"creatorProfile.integrationPublishRequest.previewImageUpload.figmaTemplate"})})}})}),(0,A.jsxs)("div",{style:l,children:[(0,A.jsx)(dl,{value:t[0],dimensionsCopy:"1080 x 920",containerStyle:s.image,setError:i,setValue:e=>a(0,e),vertical:!0}),(0,A.jsx)(dl,{value:t[1],dimensionsCopy:"1080 x 920",containerStyle:s.image,setError:i,setValue:e=>a(1,e),vertical:!0}),(0,A.jsx)(dl,{value:t[2],dimensionsCopy:"1080 x 920",containerStyle:s.image,setError:i,setValue:e=>a(2,e),vertical:!0}),(0,A.jsx)(dl,{value:t[3],dimensionsCopy:"1080 x 920",containerStyle:s.image,setError:i,setValue:e=>a(3,e),vertical:!0})]}),r&&(0,A.jsx)("div",{style:s.error,children:r})]})}function ul(e){const{integrationPointer:t,values:a,setValues:o}=e,s=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]),{actorEmail:l,actorId:c}=(0,n().K8)((()=>{var e;const t=null===(e=b().default.state.currentUserStore)||void 0===e?void 0:e.getModel();return{actorEmail:null==t?void 0:t.email,actorId:null==t?void 0:t.id}}),[]),[u,p]=i.useState(!1),g=(0,n().K8)((()=>{if(t&&s){const e=s.getRecordModel(t);return{name:null==e?void 0:e.getName(),id:null==e?void 0:e.id,created_by_id:null==e?void 0:e.getCreatedById(),icon:null==e?void 0:e.getInfo().icon,listing_status:null==e?void 0:e.getListingStatus(),capabilities:null==e?void 0:e.getCapabilities()}}}),[t,s]),m=(0,n().K8)((()=>io.getState().errors),[]),f=(0,r().v3)(),h=e=>{io.setErrors(e)},v=async()=>{p(!0),await Gs({integrationFields:g,environment:f,errors:m,setErrors:h,values:{...a,name:null==g?void 0:g.name,icon:null==g?void 0:g.icon},actorEmail:l,userId:null==s?void 0:s.userId,isInstallationUrlOptional:S}),p(!1)},y=(0,n().K8)((()=>cs().default.getConfigKey("integration_tech_partners","tech_partner_ids")),[]),x=gl(),S=!!c&&(null==y?void 0:y.includes(c));return(0,A.jsxs)("form",{onSubmit:v,children:[(0,A.jsxs)("div",{style:x.header,children:[(0,A.jsx)(nn().Ay,{placeholderLoadedStyle:x.imagePlaceholderLoaded,src:null==g?void 0:g.icon,style:x.image}),(0,A.jsx)(yt().D,{style:x.name,styleName:"UITitle-30px/Semibold",children:null==g?void 0:g.name})]}),(0,A.jsx)(pl,{errors:m,values:a,setValues:e=>o({...a,...e}),isSubmitting:u,setErrors:h,isInstallationUrlOptional:S}),(0,A.jsx)(yt().D,{style:x.warningText,styleName:"Body-14px/Regular",children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublishRequest.disabledAfterPublish",defaultMessage:"Once your integration is submitted and approved for publishing on the Integration Gallery, you will no longer be able to update the configuration of this integration. To update the configuration, you will need to create a new integration."})}),(0,A.jsx)("div",{style:x.formActions,children:(0,A.jsx)(nl,{handleSave:v,handleReset:()=>{Be().oo({url:no().JZ.creatorProfileIntegrations,environment:f})},isLoading:u,submitCTA:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublishRequest.submit",defaultMessage:"Submit"})})})]})}function pl(e){const{errors:t,values:a,setValues:i,isSubmitting:r=!1,disabled:n=!1,setErrors:o,isInstallationUrlOptional:s=!1}=e,l=(0,d().tz)(),c=gl();return(0,A.jsxs)("div",{style:c.container,children:[(0,A.jsx)(er().A,{name:l.formatMessage(q.featureLabel),htmlLabel:"features",hideLabel:!1,errorMessage:t.features,required:!0,labelStyle:c.label,children:(0,A.jsx)(rl,{selectedIds:a.features,setSelectedIds:e=>i({features:e}),title:l.formatMessage(q.featureLabel),disabled:r||n,candidates:Ys})}),(0,A.jsx)(er().A,{name:l.formatMessage(q.categoryLabel),htmlLabel:"categories",hideLabel:!1,errorMessage:t.categories,required:!0,labelStyle:c.label,children:(0,A.jsx)(rl,{selectedIds:a.categories,setSelectedIds:e=>i({categories:e}),title:l.formatMessage(q.categoryLabel),disabled:r||n,candidates:Qs})}),(0,A.jsx)(Pr().o,{htmlLabel:"description",value:a.description,placeholder:l.formatMessage(q.descriptionPlaceholder),type:"text",style:c.textInput,onChange:e=>i({description:e.target.value}),onFocus:()=>{null!=t&&t.description&&o({description:""})},textareaElementAttributes:{rows:6},labelStyle:c.label,required:!0,textarea:!0,disabled:r||n,format:Br().C.Default,label:l.formatMessage(q.description),error:t.description}),(0,A.jsx)(Pr().o,{htmlLabel:"how to use",value:a.how_to_use,placeholder:l.formatMessage(q.howToUsePlaceholder),required:!0,type:"text",style:c.textInput,onChange:e=>i({how_to_use:e.target.value}),onFocus:()=>{null!=t&&t.how_to_use&&o({how_to_use:""})},textareaElementAttributes:{rows:6},labelStyle:c.label,textarea:!0,disabled:r||n,format:Br().C.Default,label:l.formatMessage(q.howToUse),error:t.how_to_use}),(0,A.jsx)(Pr().o,{required:!s,htmlLabel:"add to notion",value:a.add_to_notion_url,placeholder:"https://www.acme.com/integration/notion-dlp",type:"text",style:c.textInput,onChange:e=>i({add_to_notion_url:e.target.value}),onFocus:()=>{null!=t&&t.add_to_notion_url&&o({add_to_notion_url:""})},labelStyle:c.label,disabled:r||n,format:Br().C.Default,label:l.formatMessage(q.addToNotion),error:t.add_to_notion_url}),(0,A.jsx)(Pr().o,{htmlLabel:"slug",value:a.slug,placeholder:l.formatMessage(q.slugPlaceholder),type:"text",style:c.textInput,onChange:e=>i({slug:e.target.value}),onFocus:()=>{null!=t&&t.slug&&o({slug:""})},labelStyle:c.label,disabled:r||n,format:Br().C.Default,label:l.formatMessage(q.slug),error:t.slug}),(0,A.jsx)(er().A,{name:l.formatMessage(q.previewImages),htmlLabel:"preview_images",hideLabel:!1,required:!0,labelStyle:c.label,children:(0,A.jsx)(cl,{setValue:(e,r)=>{t.preview_images&&o({preview_images:""});const n=a.preview_images??[];n.splice(e,1,r),i({preview_images:n.filter(V().Vq)})},setError:e=>o({preview_images:e}),error:t.preview_images,values:a.preview_images??[],disabled:r||n})}),t._general&&(0,A.jsx)(yt().D,{style:c.error,styleName:"Body-14px/Regular",children:t._general})]})}function gl(){return(0,o().IS)((e=>({error:{color:e.palette.red[500],marginBottom:8},imagePlaceholderLoaded:{width:"fit-content"},header:{marginBottom:32},formActions:{marginTop:32},warningText:{marginTop:32,color:e.palette.gray[400]},textInput:{background:"transparent",fontSize:14,borderRadius:4,padding:"9px"},label:{fontSize:13},disabledInput:{color:e.palette.gray[400],background:e.palette.gray[30],cursor:"not-allowed"},container:{gap:32,display:"flex",flexDirection:"column"},image:{width:100,height:100},name:{marginTop:16}})),[])}var ml=()=>a(715862);function fl(e){const{value:t}=e,[a,r]=i.useState(!1),n=()=>r(!1);return(0,A.jsx)(Xs().Ay,{popupType:al().n.Popup,alignmentToOrigin:Wo().C.Start,placementToOrigin:Wo().W.Bottom,originGap:2,sameWidthAsOrigin:!0,open:a,onDismiss:n,render:()=>(0,A.jsx)(bl,{...e,value:t,onClose:n}),origin:(0,A.jsx)(hl,{...e,value:t,onClick:()=>r(!0)})})}function hl(e){const{onClick:t,value:a,renderMenuItem:i}=e,r=(0,o().IS)((e=>({dropdown:{background:e.whiteButtonBackground,border:`1px solid ${e.outlineButtonBorder}`,borderRadius:6,height:32},expandIcon:{height:12,width:12,fill:e.icon.tertiary}})),[]);return(0,A.jsx)(A.Fragment,{children:i({item:a,focused:!1,onClick:t,style:r.dropdown,right:(0,ml().e)(r.expandIcon)})})}function bl(e){const{keyName:t,items:a,value:i,setValue:r,renderMenuItem:n,onClose:o}=e;let s=0;const l=a.map(((e,t)=>(e.id===(null==i?void 0:i.id)&&(s=t),{key:e.id,action:()=>{r(e),o()},render:t=>n({...t,item:e})})));return(0,A.jsx)(xe().A,{menuType:je().gu.Popup,children:(0,A.jsx)(Ti().Ay,{type:Ti().Oh.Vertical,initialFocus:s,sections:[{key:`form-input-section-${t}`,items:l,render:e=>(0,A.jsx)(Pi().A,{...e})}]})})}function vl(e){const{label:t,subtitle:a,caption:i,error:r,children:n,field:s,formStateType:l,formFieldValidationSchema:d=H().pv}=e,u=d[s].requiredBy[l],p=(0,o().IS)((()=>({wrapper:{display:"flex"},label:{fontSize:13.5,fontWeight:L().Wy.regular,color:c().Ay.black},required:{color:c().Ay.red,marginLeft:2},subtitle:{fontSize:12,color:c().Ay.frontTextLight},caption:{fontSize:12,color:c().Ay.frontTextLight},error:{marginTop:4,fontSize:15,color:c().Ay.frontRed},field:{display:"grid",gridTemplateColumns:"1fr",gap:6,marginBottom:16}})),[]);return(0,A.jsxs)("div",{style:p.field,children:[(0,A.jsxs)("header",{style:p.wrapper,children:[(0,A.jsx)("div",{style:p.label,children:t}),u?(0,A.jsx)("div",{style:p.required,children:"*"}):void 0]}),i?(0,A.jsx)("div",{style:p.caption,children:i}):void 0,n,a?(0,A.jsx)("div",{style:p.subtitle,children:a}):void 0,r?(0,A.jsx)("div",{style:p.error,children:r}):void 0]})}var yl=()=>a(486345),xl=()=>a(884107),Sl=()=>a(124749),wl=()=>a(739095),Cl=()=>a(515916),jl=()=>a(297780);function Ml(e){const{currentValue:t,setNewValue:a,typeaheadTitle:r,style:n}=e,o=t||[],[s,l]=i.useState(""),d=()=>l("");return(0,A.jsx)(Xs().Ay,{popupType:al().n.Popup,sameWidthAsOrigin:!0,open:s.length>0,onDismiss:d,origin:(0,A.jsx)(jl().A,{style:{background:c().Ay.white,minHeight:32,fontSize:15},placeholder:"",value:s,onChange:e=>l(e.target.value),tokens:o.map(((e,t)=>(0,A.jsx)(el().A,{format:Js().NY.Medium,showRemoveButton:!0,isSingle:!1,shouldWrap:!0,value:e,style:n,onClickRemove:()=>{a(o.filter((t=>t!==e)))}},`${e}-${t}`))),onRemoveLastToken:()=>{o.length>0&&a(o.slice(0,o.length-1))}}),render:()=>{const e=s.trim(),t=(0,Vn().kG)(Re().A.domainBaseUrl,e).map((e=>({key:e,render:t=>(0,A.jsx)(vt().A,{...t,title:e}),action:()=>{d(),a([...o,e])}})));return(0,A.jsx)(xe().A,{menuType:je().gu.Popup,children:(0,A.jsx)(Ti().Ay,{type:Ti().Oh.Vertical,initialFocus:0,sections:[{key:"valid-url-suggestion",items:t,render:e=>(0,A.jsx)(Pi().A,{...e,title:r})}]})})}})}function _l(e){const{currentRule:t,onUpdate:a,shouldShowDelete:r,onDelete:n,onError:s}=e,{name:l,regex:u,attributes:p,sampleUrls:g}=t,[m,f]=i.useState(JSON.stringify(p,null,2)),h=(0,o().IS)((()=>({container:{marginBottom:24,display:"flex",flexDirection:"column",gap:12},label:{fontSize:13.5,fontWeight:L().Wy.regular,color:c().Ay.frontTextMedium}})),[]);return(0,A.jsxs)("div",{style:h.container,children:[(0,A.jsxs)("label",{children:[(0,A.jsx)("div",{style:h.label,children:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.regexRule.name.label",defaultMessage:"Rule Name"})}),(0,A.jsx)(Br().A,{inputClassName:l,style:{background:c().Ay.white,height:32,fontSize:15},value:l,onChange:e=>{a({...t,name:e.target.value})},right:r&&(0,A.jsx)(Al,{onDelete:n})})]}),(0,A.jsxs)("label",{children:[(0,A.jsx)("div",{style:h.label,children:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.sampleUrls.label",defaultMessage:"Sample URLs"})}),(0,A.jsx)(Ml,{currentValue:g,setNewValue:e=>{a({...t,sampleUrls:e})},style:{color:c().Ay.black},setErrorValue:e=>s(e),typeaheadTitle:(0,A.jsx)(d().sA,{id:"developerIntegrationsForm.urlsInput.typePrompt",defaultMessage:"Type or paste a url…"})})]}),(0,A.jsxs)("label",{children:[(0,A.jsx)("div",{style:h.label,children:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.regexRule.pattern.label",defaultMessage:"Pattern"})}),(0,A.jsx)(Br().A,{style:{background:c().Ay.white,fontSize:15},autosize:!0,textarea:!0,value:u,onChange:e=>{a({...t,regex:e.target.value})}})]}),(0,A.jsxs)("label",{children:[(0,A.jsx)("div",{style:h.label,children:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.regexRule.attributes.label",defaultMessage:"Attributes"})}),(0,A.jsx)(Br().A,{format:Br().C.ExtraLarge,style:{backgroundColor:c().Ay.white},inputStyle:{fontSize:14,lineHeight:"18px",height:200,fontFamily:L().Tf.mono,padding:4},textarea:!0,value:m,onChange:e=>{const i=e.target.value;f(i);const r=(0,wl().VU)(i);void 0===r?s((0,A.jsx)(d().sA,{id:"developerIntegrationForm.jsonEditor.error",defaultMessage:"{value} attributes has invalid JSON.",values:{value:l}})):a({...t,attributes:r})}})]})]})}function Al(e){let{onDelete:t}=e;return(0,A.jsx)(ve().A,{style:{padding:4,borderRadius:3},onClick:()=>{Cl().A.setState({open:!0,isDestructive:!1,isWarning:!0,title:(0,A.jsx)(d().sA,{id:"developerIntegrationFormRegexRule.deletionModal.title",defaultMessage:"Are you sure you want to delete this regex pattern rule?"}),message:(0,A.jsx)(d().sA,{id:"developerIntegrationFormRegexRule.deletionModal.message",defaultMessage:"Changes will not be saved until you submit the form."}),confirmationMessage:(0,A.jsx)(d().sA,{id:"developerIntegrationFormRegexRule.deletionModal.confirm",defaultMessage:"Delete"}),onConfirm:()=>{t()}})},children:(0,Ii().I)({width:15,height:15})})}function Il(e,t){const{spaceStore:i,...o}=e,s=(0,r().v3)(),l=(0,n().K8)((()=>i&&(0,to().c2)(s,i)),[s,i]),d=(0,n().K8)((()=>i&&(0,to().GK)(s,i)),[s,i]);return(0,A.jsx)(vt().A,{...o,ref:t,title:i&&(0,A.jsx)(a(16006).A,{store:i}),icon:i&&(0,A.jsx)(Ui().B6,{disabled:!0,icon:l,iconRecordCategory:"workspace",title:d,isEmptyPage:!1,size:19})})}const kl=i.forwardRef(Il);function Tl(e){const{secret:t,secretName:a,onCopy:i,actionButtons:r}=e;return(0,A.jsx)(Br().A,{type:t?"text":"password",disabled:!0,style:{fontFamily:L().vc(Rs().locale).mono,color:c().Ay.frontTextMedium},inputStyle:t?{cursor:"text"}:void 0,value:t||" ".repeat(40),right:(0,A.jsxs)("div",{style:{display:"flex"},children:[(0,A.jsx)("div",{style:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1}}),t?(0,A.jsx)(Pl,{onCopy:i,secret:t,secretName:a}):r]})})}function Pl(e){const{secretName:t,secret:a,onCopy:n}=e,o=(0,r().v3)(),[s,l]=i.useState(!1),u=i.useCallback((async()=>{const e=await xl().R.clipboardActions.load();e.copyString({environment:o,stringValue:a,copiedMessage:e.clipboardMessages.copiedToClipboard}),n()}),[o,n,a]),p=s?(0,A.jsx)(d().sA,{defaultMessage:"{secretName} copied",id:"formSecretShow.secretCopied.tooltip",values:{secretName:t}}):(0,A.jsx)(d().sA,{defaultMessage:"Copy {secretName}",id:"formSecretShow.copySecret.tooltip",values:{secretName:t}});return(0,A.jsx)(Na().A,{placement:Wo().W.Top,renderTooltip:()=>p,render:e=>(0,A.jsx)(ve().A,{onClick:e=>{e.preventDefault(),l(!0),setTimeout((()=>{l(!1)}),1500),u()},...e,style:{...Ll.button,color:s?c().Ay.mediumTextColor:c().Ay.blue},children:s?(0,A.jsx)(d().sA,{id:"formSecretShow.copied.label",defaultMessage:"Copied"}):(0,A.jsx)(d().sA,{id:"formSecretShow.copySecret.label",defaultMessage:"Copy"})})})}const Ll={button:{display:"inline-flex",alignItems:"center",fontFamily:L().vc(Rs().locale).sans,borderRadius:4,padding:"0 6px",height:24,color:c().Ay.blue}};function Dl(e){const{onError:t,bot:a}=e,n=(0,r().v3)(),o=(0,d().tz)(),s=a.id,[l,c]=i.useState(),u=i.useCallback((async()=>{const e=await x().callApi({eventName:"getBotToken",environment:n,data:{botId:s}});"success"===e.type?(Xn().aS(n,{table:Hn().GP}),c(e.data.token)):t((0,st().Hu)(o,e)??"Error fetching bot token.")}),[n,s,t,o]),p=i.useCallback((async()=>{const e=await x().callApi({eventName:"revokeBotToken",environment:n,data:{botId:s}});return"success"===e.type?{success:!0}:(t((0,st().Hu)(o,e)??"Error revoking bot token."),{success:!1})}),[n,s,t,o]);return(0,A.jsx)(Tl,{secret:l,secretName:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.botToken.secretName",defaultMessage:"token"}),onCopy:()=>{Xn().Er(n,{table:Hn().GP,from:"developer-integrations-view"})},actionButtons:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(ve().A,{onClick:()=>{!function(e){const{onConfirm:t}=e;Cl().A.setState({isDestructive:!1,isWarning:!1,open:!0,onConfirm:t,title:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.title",defaultMessage:"Refresh token?"}),message:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.message",defaultMessage:"Refreshing will revoke the existing token and generate a new one. Make sure you’re storing the token securely."}),confirmationMessage:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.confirm",defaultMessage:"Continue"})})}({onConfirm:async()=>{(await p()).success&&await u()}})},style:El.button,children:(0,A.jsx)("pre",{children:(0,A.jsx)(d().sA,{id:"developerIntegrationShowBotToken.refreshSecret.label",defaultMessage:"Refresh"})})}),(0,A.jsx)(ve().A,{onClick:()=>{u()},style:El.button,children:(0,A.jsx)("pre",{children:(0,A.jsx)(d().sA,{id:"developerIntegrationShowBotToken.showSecret.label",defaultMessage:"Show"})})})]})})}const El={button:{display:"inline-flex",alignItems:"center",fontFamily:L().vc(Rs().locale).sans,borderRadius:6,padding:"0 6px",height:24,color:c().Ay.blue}};function Bl(e){const{onError:t,integration:a}=e,n=(0,r().v3)(),o=(0,d().tz)(),[s,l]=i.useState(),c=a.id,u=a.info.has_viewed_secret,p=(0,Sl().$)(),g=p?(0,Bt().Oo)(p,{id:c,table:On().Li}):void 0,m=i.useCallback((async()=>{if(!g)return;const e=await x().callApi({eventName:"getIntegrationSecret",environment:n,data:{integrationId:c}});"success"===e.type?(yo().UM({environment:n,integrationStore:g}),Xn().aS(n,{table:On().Li}),l(e.data.secret)):t((0,st().Hu)(o,e)??"Error fetching client secret.")}),[n,g,c,t,o]);return(0,A.jsx)(Tl,{secret:s,secretName:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.integrationSecret.secretName",defaultMessage:"secret"}),onCopy:()=>{Xn().Er(n,{table:On().Li,from:"developer-integrations-view"})},actionButtons:(0,A.jsx)(Rl,{onClick:()=>{!function(e){const{hasSecretBeenViewed:t,onConfirm:a}=e,i=t?(0,A.jsx)(d().sA,{id:"developerIntegrationForm.clientSecret.confirmationModal.refreshTitle",defaultMessage:"Refresh OAuth client secret?"}):(0,A.jsx)(d().sA,{id:"developerIntegrationForm.clientSecret.confirmationModal.showTitle",defaultMessage:"Show OAuth client secret?"}),r=t?(0,A.jsx)(d().sA,{id:"developerIntegrationForm.clientSecret.confirmationModal.alreadyViewedMessage",defaultMessage:"You’ve already viewed the client secret. Viewing again will revoke and generate a new one. Make sure you’re storing the secret securely."}):(0,A.jsx)(d().sA,{id:"developerIntegrationForm.clientSecret.confirmationModal.displayOnceMessage",defaultMessage:"This client secret will only be displayed once and cannot be viewed again. Make sure you’re storing the secret securely."});Cl().A.setState({isDestructive:!1,isWarning:!1,open:!0,onConfirm:a,title:i,message:r,confirmationMessage:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.clientSecret.confirmationModal.confirm",defaultMessage:"Continue"})})}({hasSecretBeenViewed:u,onConfirm:()=>{m()}})},hasSecretBeenViewed:u})})}function Rl(e){const{onClick:t,hasSecretBeenViewed:a}=e;return(0,A.jsx)(ve().A,{onClick:t,style:Fl.button,children:a?(0,A.jsx)(d().sA,{id:"formSecretShow.refreshSecret.label",defaultMessage:"Refresh"}):(0,A.jsx)(d().sA,{id:"formSecretShow.showSecret.label",defaultMessage:"Show"})})}const Fl={button:{display:"inline-flex",alignItems:"center",fontFamily:L().vc(Rs().locale).sans,borderRadius:6,padding:"0 6px",height:24,color:c().Ay.blue}};var Ul=()=>a(484595),Nl=()=>a(366208);const zl=(0,d().YK)({read_comment_title:{id:"developerIntegrationForm.capabilities.read_comment.title",defaultMessage:"Read comments"},read_comment_caption:{id:"developerIntegrationForm.capabilities.read_comment.caption",defaultMessage:"Read comments on blocks and pages."},insert_comment_title:{id:"developerIntegrationForm.capabilities.insert_comment.title",defaultMessage:"Insert comments"},insert_comment_caption:{id:"developerIntegrationForm.capabilities.insert_comment.caption",defaultMessage:"Create comments on blocks and pages."},comment_capabilities_title:{id:"developerIntegrationForm.capabilities.comment_capabilities.title",defaultMessage:"Comment Capabilities"},content_capabilities_title:{id:"developerIntegrationForm.capabilities.content_capabilities.headerTitle",defaultMessage:"Content Capabilities"},user_capabilities_title:{id:"developerIntegrationForm.capabilities.user_capabilities.headerTitle",defaultMessage:"User Capabilities"},read_content_title:{id:"developerIntegrationForm.capabilities.read_content.title",defaultMessage:"Read content"},read_content_caption:{id:"developerIntegrationForm.capabilities.read_content.caption",defaultMessage:"Request to read content."},update_content_title:{id:"developerIntegrationForm.capabilities.update_content.title",defaultMessage:"Update content"},update_content_caption:{id:"developerIntegrationForm.capabilities.update_content.caption",defaultMessage:"Request to update existing content."},insert_content_title:{id:"developerIntegrationForm.capabilities.insert_content.title",defaultMessage:"Insert content"},insert_content_caption:{id:"developerIntegrationForm.capabilities.insert_content.caption",defaultMessage:"Request to create new content."},no_user_capabilities_title:{id:"developerIntegrationForm.capabilities.no_user_capabilities.title",defaultMessage:"No user information"},no_user_capabilities_caption:{id:"developerIntegrationForm.capabilities.no_user_capabilities.caption",defaultMessage:"Do not request any user information access."},read_user_without_email_title:{id:"developerIntegrationForm.capabilities.read_user_without_email.title",defaultMessage:"Read user information without email addresses"},read_user_without_email_caption:{id:"developerIntegrationForm.capabilities.read_user_without_email.caption",defaultMessage:"Request access to user information, not including email addresses."},read_user_with_email_title:{id:"developerIntegrationForm.capabilities.read_user_with_email.title",defaultMessage:"Read user information including email addresses"},read_user_with_email_caption:{id:"developerIntegrationForm.capabilities.read_user_with_email.caption",defaultMessage:"Request access to user information, including email addresses."},workspace_capabilities_title:{id:"developerIntegrationForm.capabilities.workspace_capabilities.title",defaultMessage:"Workspace Capabilities"},workspace_content_transfer_title:{id:"developerIntegrationForm.capabilities.workspace_content_transfer.title",defaultMessage:"Transfer content"},workspace_content_transfer_caption:{id:"developerIntegrationForm.capabilities.workspace_content_transfer.caption",defaultMessage:"Transfer content between workspace users"}});function Vl(e,t,a){return{key:e,action:()=>null,render:r=>{const n=i=>{i.preventDefault(),a({...t,[e]:!t[e]})};return(0,i.createElement)(vt().A,{...r,title:O().A.formatMessage(zl[`${e}_title`]),caption:O().A.formatMessage(zl[`${e}_caption`]),icon:(0,A.jsx)(os().T,{checked:Boolean(t[e]),size:16,onClick:n}),key:e,onClick:n})}}}function Hl(){return(0,o().IS)((()=>({basicTextInput:{background:c().Ay.white,height:32,fontSize:15},domainInputTitle:{marginTop:15,fontSize:15,fontWeight:L().Wy.regular,color:c().Ay.frontTextMedium},plainButton:{display:"flex",alignItems:"center"},icon:{width:15,height:15}})),[])}function Ol(e){return(0,o().IS)((()=>({authInput:{color:c().Ay.frontTextMedium,fontFamily:L().vc(Rs().locale).mono},authInputRight:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1},authButton:{display:"inline-flex",alignItems:"center",borderRadius:4,padding:"0 6px",height:24,color:e?c().Ay.frontTextMedium:c().Ay.blue,fontFamily:L().vc(Rs().locale).sans}})),[e])}function Wl(e){const{formData:t,setFormData:a,formStoreState:i,formFieldDetail:r,field:s,disabled:l}=e,d=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]),c=(0,n().K8)((()=>d?d.getAdminSpaceStores():[]),[d]),{type:u}=i,{label:p,subtitle:g,caption:m,sectionHeader:f,sectionSubheader:h}=r[s]??{},v=(0,o().IS)((()=>({header:{marginTop:24},sectionHeader:{fontSize:24,fontWeight:L().Wy.semibold},sectionSubheader:{fontSize:15},disabled:{pointerEvents:"none",opacity:.7}})),[]),y=ql[s];return y?(0,A.jsxs)(A.Fragment,{children:[f&&(0,A.jsxs)("div",{style:v.header,children:[(0,A.jsx)("div",{style:v.sectionHeader,children:f}),(0,A.jsx)("div",{style:v.sectionSubheader,children:h})]}),(0,A.jsx)("div",{style:l?v.disabled:void 0,children:(0,A.jsx)(vl,{label:p,subtitle:g,caption:m,error:t[s].error,field:s,formStateType:u,formFieldValidationSchema:re,children:(0,A.jsx)(y,{autoFocus:!1,spaces:c,currentValue:t[s].value,setErrorValue:e=>{a({field:s,error:e})},setNewValue:e=>{a({value:e,field:s})},formStoreState:i})},s)})]}):null}const ql={type:function(e){const{currentValue:t="create-bot",setNewValue:a}=e,i=e=>"create-bot"===e||"create-guest-integration"===e||"update-bot"===e,r=(0,o().IS)((()=>({caption:{fontSize:12,color:c().Ay.frontTextLight}})),[]);if(!i(t))return(0,A.jsx)(fl,{keyName:"type",value:{id:t,title:"Public"},setValue:e=>{i(e.id)&&a(e.id)},items:Gl,renderMenuItem:e=>{var t;return(0,A.jsx)(vt().A,{...e,title:null==e||null===(t=e.item)||void 0===t?void 0:t.title,disabled:!0})}});const n=t.includes("bot")?"create-bot":"create-guest-integration";return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(fl,{keyName:"type",value:{id:n,title:Kl[n]},setValue:e=>{i(e.id)&&a(e.id)},items:Gl,renderMenuItem:e=>{var t;return(0,A.jsx)(vt().A,{...e,title:null==e||null===(t=e.item)||void 0===t?void 0:t.title})}}),(0,A.jsx)("div",{style:r.caption,children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationSubmission.typeCaption",defaultMessage:"You can change the type of your integration at any time. Please note that switching to a public integration may require additional fields."})})]})},space:function(e){const{spaces:t,currentValue:a,setNewValue:r,setErrorValue:n,disabled:o}=e,[s,l]=i.useState(!1);return(0,i.useEffect)((()=>{s||0!==t.length||(l(!0),n((0,A.jsx)(d().sA,{id:"developerIntegrationsForm.spacePicker.missingSpacesError",defaultMessage:"You are not an owner of any workspaces. Please <linktonotion>create a new one</linktonotion> or ask your workspace owner to update your access.",values:{linktonotion:e=>(0,A.jsx)(ha().A,{href:(0,va().xS)("guides.joinOrCreateWorkspace"),children:e})}}))),s&&t.length>0&&(l(!1),n(void 0))}),[t,n,s]),(0,A.jsx)(fl,{keyName:"space",items:t,value:a,setValue:r,renderMenuItem:e=>(0,A.jsx)(kl,{...e,spaceStore:e.item,disabled:o})})},icon:function(e){const{currentValue:t,setNewValue:a,setErrorValue:i,formStoreState:r}=e,n=r.type;return(0,A.jsx)(dl,{value:t,setError:i,setValue:a,showRemove:n.includes("bot")})},name:null,token:function(e){const t=(0,r().v3)(),{currentValue:a,setErrorValue:i}=e,o=(0,Sl().$)(),s=(0,n().K8)((()=>{if(!o||!a)return;if(a.value.parent_table!==Jn().NX)return;const e=Bt().SL.createChildStore(o,{id:a.value.parent_id,table:a.value.parent_table});return(0,to().GK)(t,e)}),[o,a,t]);return a?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Dl,{bot:a.value,onError:i}),s?(0,A.jsx)("div",{style:{fontSize:12,color:c().Ay.frontTextLight},children:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.botToken.subtitle",defaultMessage:"Only works with the <bold>{spaceName}</bold> workspace. To change workspace, <developertermslink>create another integration</developertermslink>.",values:{spaceName:s,bold:e=>(0,A.jsx)("b",{children:e}),developertermslink:e=>(0,A.jsx)(ha().A,{href:no().JZ.creatorProfileIntegrations,children:e})}})}):void 0]}):null},client_id:function(e){const{currentValue:t}=e,a=(0,r().v3)(),[n,o]=i.useState(!1),s=Ol(n);if(!t)return null;const l=n?(0,A.jsx)(d().sA,{defaultMessage:"ID copied",id:"developerIntegrationsForm.clientIdCopied.tooltip"}):(0,A.jsx)(d().sA,{defaultMessage:"Copy client ID",id:"developerIntegrationsForm.copyClientId.tooltip"});return(0,A.jsx)(Br().A,{type:"text",disabled:!0,style:s.authInput,value:t.value.id,right:(0,A.jsxs)("div",{style:{display:"flex"},children:[(0,A.jsx)("div",{style:s.authInputRight}),(0,A.jsx)(Na().A,{placement:Wo().W.Top,renderTooltip:()=>l,render:e=>(0,A.jsx)(ve().A,{onClick:async e=>{e.preventDefault(),o(!0),setTimeout((()=>{o(!1)}),1500);const i=await xl().R.clipboardActions.load();i.copyString({environment:a,stringValue:t.value.id,copiedMessage:i.clipboardMessages.copiedLinkToClipboard})},...e,style:s.authButton,children:n?(0,A.jsx)(d().sA,{id:"developerIntegrationsForm.copiedId.label",defaultMessage:"Copied"}):(0,A.jsx)(d().sA,{id:"developerIntegrationsForm.copyId.label",defaultMessage:"Copy"})})})]})})},client_secret:function(e){const{currentValue:t,setErrorValue:a}=e;return t&&"internal"!==t.value.type?(0,A.jsx)(Bl,{integration:t.value,onError:a}):null},authorization_url:function(e){const{currentValue:t}=e,a=(0,r().v3)(),[n,o]=i.useState(!1),s=Ol(n);if(!t)return null;const l=n?(0,A.jsx)(d().sA,{defaultMessage:"URL copied",id:"developerIntegrationsForm.authUrlCopied.tooltip"}):(0,A.jsx)(d().sA,{defaultMessage:"Copy authorization URL",id:"developerIntegrationsForm.authUrlCopy.tooltip"});return(0,A.jsx)(Br().A,{type:"text",disabled:!0,style:s.authInput,value:t,right:(0,A.jsxs)("div",{style:{display:"flex"},children:[(0,A.jsx)("div",{style:s.authInputRight}),(0,A.jsx)(Na().A,{placement:Wo().W.Top,renderTooltip:()=>l,render:e=>(0,A.jsx)(ve().A,{onClick:async e=>{e.preventDefault(),o(!0),setTimeout((()=>{o(!1)}),1500);const i=await xl().R.clipboardActions.load();i.copyString({environment:a,stringValue:t,copiedMessage:i.clipboardMessages.copiedLinkToClipboard})},...e,style:s.authButton,children:n?(0,A.jsx)(d().sA,{id:"developerIntegrationsForm.copiedAuthUrl.label",defaultMessage:"Copied"}):(0,A.jsx)(d().sA,{id:"developerIntegrationsForm.copyAuthUrl.label",defaultMessage:"Copy"})})})]})})},capabilities:function(e){const{setNewValue:t,currentValue:r,formStoreState:o}=e,s={...H().ut,...r},l=(0,Sl().$)(),d=o.startingRecord,c=(0,n().K8)((()=>{if(!l||!d||d.table!==Hn().GP)return!1;const e=d.value;if(e.parent_table!==Jn().NX||"guest"!==e.type)return!1;const t=Bt().SL.createChildStore(l,{id:e.parent_id,table:e.parent_table});return t&&(0,a(979340).OX)(t.getSubscriptionTier())}),[d,l]),u={no_user_capabilities:!1===s.read_user_without_email&&!1===s.read_user_with_email,read_user_without_email:!0===s.read_user_without_email&&!1===s.read_user_with_email,read_user_with_email:!0===s.read_user_with_email};return(0,A.jsx)(Ti().Ay,{type:Ti().Oh.Vertical,initialFocus:void 0,sections:Ht().oE([{key:"content_capabilities",items:["read_content","update_content","insert_content"].map((e=>Vl(e,s,t))),render:e=>(0,A.jsx)(Pi().A,{...e,title:O().A.formatMessage(zl.content_capabilities_title)})},{key:"comment_capabilities",items:["read_comment","insert_comment"].map((e=>Vl(e,s,t))),render:e=>(0,A.jsx)(Pi().A,{...e,title:O().A.formatMessage(zl.comment_capabilities_title)})},c&&{key:"workspace_capabilities",items:["workspace_content_transfer"].map((e=>Vl(e,s,t))),render:e=>(0,A.jsx)(Pi().A,{...e,title:O().A.formatMessage(zl.workspace_capabilities_title)})},{key:"user_capabilities",items:["no_user_capabilities","read_user_without_email","read_user_with_email"].map((e=>function(e,t,a,r){return{key:e,action:()=>null,render:n=>(0,i.createElement)(vt().A,{...n,title:O().A.formatMessage(zl[`${e}_title`]),caption:O().A.formatMessage(zl[`${e}_caption`]),icon:(0,A.jsx)(Ul().A,{isSelected:t}),key:e,onClick:t=>{t.preventDefault(),r({...a,read_user_without_email:"no_user_capabilities"!==e,read_user_with_email:"read_user_with_email"===e})}})}}(e,u[e],s,t))),render:e=>(0,A.jsx)(Pi().A,{...e,title:O().A.formatMessage(zl.user_capabilities_title)})}])})},template_url:Zl,redirect_uris:function(e){return(0,A.jsx)(Ml,{...e,style:{color:c().Ay.frontTextMedium},typeaheadTitle:(0,A.jsx)(d().sA,{id:"developerIntegrationsForm.redirectUri.typePrompt",defaultMessage:"Type a redirect uri…"})})},tagline:Zl,privacy_policy_url:Zl,terms_of_use_url:Zl,email:Zl,developer_name:Zl,website_url:Zl,unfurl_url:Zl,domain:function(e){const{currentValue:t,autoFocus:i,setNewValue:n,formStoreState:o,setErrorValue:s}=e,l=(0,r().v3)(),c=(0,d().tz)(),u=Hl();if("update-third-party-external-integration"!==o.type&&"update-first-party-external-integration"!==o.type)return null;const{developmentDomain:p,verifiedDomains:g,domainVerifications:m}=t||{developmentDomain:"",verifiedDomains:[],domainVerifications:[]},f=g.map((e=>({domain:e,status:Nl().A$.Success,data:{type:"verified",domain:e}}))),h=Date.now(),b=m.filter(yl().sy).sort(((e,t)=>e.createdAt-t.createdAt)).map((e=>({domain:e.domain,status:h>e.expiresAt?Nl().A$.Failure:Nl().A$.Pending,data:{...e,type:h>e.expiresAt?"invalid":"unverified"}}))),v=o.startingRecord.value.id;async function y(){const e=await x().callApi({eventName:"getIntegrationDomainVerifications",environment:l,data:{integrationId:v}});if("success"===e.type){const t=Ta().RecordMapWithRole.create(e.data.recordMap),i=a(813690).xb.fromRecordMapWithRole(t),r=e.data.verificationIds.map((e=>i({table:Yn().Hx,id:e}))).filter(V().O9).map(yl().pl).filter((e=>"verified"!==e.type));n({developmentDomain:p,verifiedDomains:g,domainVerifications:r})}}return"update-third-party-external-integration"===o.type?(0,A.jsx)(a(375243).Ay,{domains:[...f,...b],domainVerificationStore:o.domainVerificationStore,verificationType:"integration",verificationTargetId:v,refreshDomains:y,onRemoveDomain:async function(e){if("verified"!==e.type){const t=await x().callApi({eventName:"deleteDomainVerificationCode",environment:l,data:{id:e.id}});"failed"===t.type&&s(t.error.message),await y()}else yo().dK({environment:l,integrationId:v,allVerifiedDomains:g,domainToRemove:e.domain})}}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:u.domainInputTitle,children:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.domain.developmentDomain.label",defaultMessage:"Development domain"})}),(0,A.jsx)(Br().A,{autoFocus:i,style:u.basicTextInput,value:p,onChange:e=>n({verifiedDomains:g,domainVerifications:m,developmentDomain:e.target.value})}),(0,A.jsx)("div",{style:u.domainInputTitle,children:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.domain.verifiedDomains.label",defaultMessage:"Verified domain(s)"})}),(0,A.jsx)(jl().A,{placeholder:c.formatMessage({id:"domainVerificationInput.domainInput.placeholder",defaultMessage:"No domains configured"}),value:"",onChange:Ht().lQ,onRemoveLastToken:Ht().lQ,readOnly:!0,tokens:f.map((e=>{let{domain:t,status:a}=e;return(0,A.jsx)(Nl().Ay,{status:a,showRemoveButton:!1,isSingle:!1,format:Js().NY.Medium,value:t},t)}))})]})},url_matching_and_placeholder:function(e){const{currentValue:t,setNewValue:i,setErrorValue:r}=e,n=Hl();return(0,A.jsxs)(A.Fragment,{children:[null==t?void 0:t.map(((e,a)=>(0,A.jsx)(_l,{currentRule:e,shouldShowDelete:0!==a,onUpdate:e=>{i([...t.slice(0,a),e,...t.slice(a+1)])},onDelete:()=>{0!==a&&i([...t.slice(0,a),...t.slice(a+1)])},onError:r},`regex-rule-${a}`))),(0,A.jsxs)(_().p,{style:n.plainButton,isBlue:!0,onClick:e=>{e.preventDefault(),i([...t??[],a(939482).dZ])},children:[(0,ns().W)(n.icon),(0,A.jsx)(d().sA,{id:"developerIntegrationsForm.regexPatternRulesInput.addMore.label",defaultMessage:"Add another rule"})]})]})},external_oauth_authorize_url:Zl,external_oauth_token_url:Zl,external_client_id:Zl,external_client_secret:function(e){const{autoFocus:t,currentValue:a,setNewValue:i}=e,r=$l();return(0,A.jsx)(Br().A,{type:"password",autoFocus:t,style:r.basicTextInput,value:a,onChange:e=>i(e.target.value)})},external_oauth_scopes:Zl,external_deletion_url:Zl},Kl={"create-bot":O().A.formatMessage(W.internalIntegrationLabel),"create-guest-integration":O().A.formatMessage(W.publicIntegrationLabel)},Gl=[{id:"create-bot",title:"Internal"},{id:"create-guest-integration",title:"Public"}];function Zl(e){const{autoFocus:t,currentValue:a,setNewValue:i}=e,r=$l();return(0,A.jsx)(Br().A,{autoFocus:t,style:r.basicTextInput,value:a,onChange:e=>i(e.target.value)})}function $l(){return(0,o().IS)((e=>({basicTextInput:{background:e.white,height:32,fontSize:15}})),[])}var Yl=()=>a(946548);function Ql(e){const{label:t,subtitle:a,onClick:i,isDisabled:r,isActive:n,labelStyles:s={},subtitleStyles:l={}}=e,d=(0,o().IS)((e=>({label:{fontSize:15,color:e.text.tertiary,display:"flex",justifyContent:"space-between"},subtitle:{fontSize:15,color:e.text.tertiary,paddingTop:15}})),[]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{style:{...d.label,...s},children:[t,(0,A.jsx)(Yl().A,{onClick:i,on:n,disabled:r})]}),(0,A.jsx)("div",{style:{...d.subtitle,...l},children:a})]})}function Jl(e){const{integrationFormStore:t,formData:a,setFormData:r,formFieldDetail:s,disabled:l}=e,c=(0,n().K8)((()=>t.getState().type),[t]),u=(0,n().K8)((()=>{var e;return null===(e=t.getState().startingRecord)||void 0===e?void 0:e.value.id}),[t]),p=ee.includes(c)||l,g=te.includes(c),[m,f]=(0,i.useState)(g),h=(b=u,{key:"unfurling",title:O().A.formatMessage(W.unfurlingSectionTitle),subtitle:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.sectionCaption.unfurling",defaultMessage:"Visit the <previewlab>Link Preview Lab</previewlab> to plan out unfurling previews and responses.",values:{previewlab:e=>{if(!b)return"";const t=yo().zA({table:On().Li,id:b});return(0,A.jsx)(ha().A,{external:!1,href:t,children:e})}}}),fields:X});var b;const v="create-third-party-external-integration"===c?[ed]:[ed,h],y=(0,n().K8)((()=>t.getState()),[t]),x=v.map((e=>({...e,fields:e.fields.filter((e=>{const{supportedBy:t}=re[e];return t[c]}))}))),S=(0,o().IS)((()=>({sectionHeader:{fontSize:24,fontWeight:L().Wy.semibold,marginBottom:24},switcherSubtitle:{paddingTop:8,fontSize:12},switcher:{justifyContent:"flex-end",alignItems:"center",flexDirection:"row-reverse",gap:8}})),[]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:S.sectionHeader,children:(0,A.jsx)(d().sA,{defaultMessage:"Link Preview",id:"creatorProfile.manageIntegration.linkPreview.title"})}),(0,A.jsx)(Ql,{onClick:()=>{const e=m?"public":"unfurling";f(!m),t.updateRecordTypeOnSwitch(e),r({field:"icon",error:void 0})},label:O().A.formatMessage(W.unfurlingSwitcherLabel),subtitle:(0,A.jsx)(d().sA,{id:"creatorProfile.manageIntegration.linkPreview.switcher.subtitle",defaultMessage:"Unfurl external data inside Notion. Requires additional fields to configure the matching URL pattern and interface."}),isActive:m,isDisabled:p,labelStyles:S.switcher,subtitleStyles:S.switcherSubtitle}),m&&(0,A.jsx)(A.Fragment,{children:x.map((e=>(0,A.jsx)(i.Fragment,{children:e.fields.map((e=>(0,A.jsx)(Wl,{formData:a,setFormData:r,formStoreState:y,formFieldDetail:Xl("unfurl_url",h.subtitle,s),field:e,disabled:l},e)))},e.key)))})]})}function Xl(e,t,a){return{...a,[e]:{...null==a?void 0:a[e],sectionSubheader:t}}}const ed={key:"external_oauth",title:O().A.formatMessage(W.externalOauthSectionTitle),fields:J};var td=()=>a(147294);const ad={tabName:"configuration",tabTitle:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationManagement.tabs.configuration",defaultMessage:"Configuration"},"creatorProfile.integrationManagement.tabs.configuration")},id={tabName:"basicInformation",tabTitle:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationManagement.tabs.basicInformation",defaultMessage:"Basic information"},"creatorProfile.integrationManagement.tabs.basicInformation")},rd={tabName:"pageAccess",tabTitle:(0,A.jsxs)(xo().Y1,{direction:"horizontal",align:"center",children:[(0,A.jsx)(d().sA,{id:"creatorProfile.integrationManagement.tabs.access",defaultMessage:"Access"},"creatorProfile.integrationManagement.tabs.access"),(0,A.jsx)(td().Ee,{newBadgeKey:"public_api_clearer_integration_access",didUserEngage:!1,keyType:"feature_gate"})]})},nd={tabName:"listing",tabTitle:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationManagement.tabs.listing",defaultMessage:"Listing information"},"creatorProfile.integrationManagement.tabs.listing")},od={tabName:"webhooks",tabTitle:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationManagement.tabs.webhooks",defaultMessage:"Webhooks"},"creatorProfile.integrationManagement.tabs.webhooks")};function sd(e){const{tabIndex:t,setTabIndex:a,tabs:i}=e;return(0,A.jsx)(Pe().Ay,{tabs:i.map((e=>{let{tabTitle:t}=e;return t})),selectedIndex:t,onChange:e=>a(e)})}const ld=function(){return(0,A.jsx)(d().sA,{id:"developerIntegrationForm.domainVerification.caption",defaultMessage:"Development and verified domains for URLs to unfurl with this integration. Domains must be verified before publishing to users. See the <textlink>Notion documentation</textlink> for more verification process.",values:{textlink:e=>(0,A.jsx)(ha().A,{href:"https://developers.notion.com/docs/building-a-link-preview#domain-verification",external:!0,children:e})}})};function dd(e){switch(e){case"create-bot":return{formFields:["name","space","type","icon"],fieldDetails:{type:{label:O().A.formatMessage(W.integrationTypeLabel)},space:{label:O().A.formatMessage(W.spaceLabel),subtitle:O().A.formatMessage(W.spaceSubtitle)},icon:{label:O().A.formatMessage(W.integrationLogoLabel)}}};case"create-guest-integration":return{formFields:["name","space",...ud.formFields,"icon","redirect_uris","template_url"],fieldDetails:{space:{label:O().A.formatMessage(W.spaceLabel),subtitle:O().A.formatMessage(W.spaceSubtitle)},icon:{label:O().A.formatMessage(W.integrationLogoLabel)},...ud.fieldDetails}};default:return{formFields:[],fieldDetails:{}}}}const cd={unfurl_url:{sectionHeader:O().A.formatMessage(W.unfurlUrlSectionHeader),label:O().A.formatMessage(W.unfurlUrlLabel),caption:O().A.formatMessage(W.unfurlUrlCaption)},domain:{label:O().A.formatMessage(W.domainLabel),caption:(0,A.jsx)(ld,{})},url_matching_and_placeholder:{label:O().A.formatMessage(W.urlMatchingAndPlaceholderLabel),caption:O().A.formatMessage(W.urlMatchingAndPlaceholderCaption)},external_oauth_authorize_url:{label:O().A.formatMessage(W.externalOauthAuthorizeUrlLabel),caption:O().A.formatMessage(W.externalOauthAuthorizeUrlCaption),sectionHeader:O().A.formatMessage(W.externalOauthSectionTitle),sectionSubheader:(0,A.jsx)(d().sA,{id:"creatorProfile.manageIntegration.linkPreview.sectionSubtitle.external_oauth",defaultMessage:"See <textlink>Notion documentation</textlink> for information on <authlink>OAuth 2.0.</authlink>",values:{textlink:e=>(0,A.jsx)(ha().A,{href:"https://developers.notion.com/docs/build-a-link-preview-integration",external:!0,children:e}),authlink:e=>(0,A.jsx)(ha().A,{href:"https://datatracker.ietf.org/doc/html/rfc6749",external:!0,children:e})}})},external_oauth_token_url:{label:O().A.formatMessage(W.externalOauthTokenUrlLabel),caption:O().A.formatMessage(W.externalOauthTokenUrlCaption)},external_oauth_scopes:{label:O().A.formatMessage(W.externalOauthScopesLabel),caption:O().A.formatMessage(W.externalOauthScopesCaption)},external_client_id:{label:O().A.formatMessage(W.externalClientIdLabel)},external_client_secret:{label:O().A.formatMessage(W.externalClientSecretLabel)},external_deletion_url:{label:O().A.formatMessage(W.externalDeletionUrlLabel),caption:O().A.formatMessage(W.externalDeletionUrlCaption)}},ud={formFields:["name","type","developer_name","website_url","tagline","privacy_policy_url","terms_of_use_url","email"],fieldDetails:{type:{label:O().A.formatMessage(W.integrationTypeLabel)},developer_name:{label:O().A.formatMessage(W.developerNameLabel)},website_url:{label:O().A.formatMessage(W.websiteUrlTypeLabel)},privacy_policy_url:{label:O().A.formatMessage(W.privacyPolicyTypeLabel),subtitle:O().A.formatMessage(W.privacyPolicyTypeSubtitle)},terms_of_use_url:{label:O().A.formatMessage(W.termsOfUseTypeLabel),subtitle:O().A.formatMessage(W.termsOfUseTypeSubtitle)},tagline:{label:O().A.formatMessage(W.taglineTypeLabel)},email:{label:O().A.formatMessage(W.emailLabel),subtitle:O().A.formatMessage(W.emailSubtitle)},redirect_uris:{label:O().A.formatMessage(W.redirectUrisTypeLabel),subtitle:O().A.formatMessage(W.redirectUrisTypeSubtitle),sectionHeader:O().A.formatMessage(W.oauthSectionHeader)},template_url:{label:O().A.formatMessage(W.templateUrlTypeLabel),subtitle:O().A.formatMessage(W.templateUrlTypeSubtitle)}}},pd={formFields:["publish"],fieldDetails:{}};function gd(e){const{formData:t,setFormData:a}=e,i=(0,d().tz)(),r=function(){const{isMobileWidth:e}=(0,m().LS)();return(0,o().IS)((()=>({titleInput:{fontSize:e?30:36,lineHeight:e?"34px":"40px",fontWeight:L().Wy.semibold},errorMessage:{fontSize:15},label:{fontSize:13.5,fontWeight:L().Wy.regular,color:c().Ay.black}})),[e])}();return(0,A.jsx)(Pr().o,{labelStyle:r.label,htmlLabel:"integrationName",label:(0,A.jsx)(d().sA,{defaultMessage:"Integration Name",id:"creatorProfile.integrationSubmission.integrationName"}),errorMessageStyle:r.errorMessage,error:t.name.error,placeholder:i.formatMessage({defaultMessage:"Add integration name",id:"creatorProfile.integrationSubmission.namePlaceholder"}),inputStyle:r.titleInput,value:t.name.value,onChange:e=>{a({value:e.target.value,field:"name"})},type:"text",focusInitial:!1,onFocus:()=>{a({field:"name",error:""})}})}function md(e){var t;const a=(0,o().IS)((e=>({errorMessage:{fontSize:15},label:{height:1},icon:{marginBottom:24},bannerIcon:{height:Fe().Ev.lg,width:Fe().Ev.lg,color:e.icon.uiYellowPrimary},banner:{marginBottom:24}})),[]),s=(0,d().tz)(),{integrationFormStore:c,setIsConvertingToPublic:u,botOrIntegrationPointer:p,spaceStore:g}=e,[m,f]=i.useState(0),[h,v]=i.useState(!1),y=(0,r().v3)(),w=p.table===Hn().GP,j=(0,n().K8)((()=>_o.getState().botSharedPages??{}),[]),M=j[p.id]??[],[_,I]=i.useState(!1);(0,i.useEffect)((()=>{if(w&&g&&!j[p.id]){(async()=>{const e=await vo().GO({environment:y,currentSpaceStore:g,botIds:[p.id]});if(null!=e&&e.bots){var t;const a=(null===(t=e.bots[p.id])||void 0===t?void 0:t.pageIds)??[];_o.setBotSharedPages(p.id,a)}I(!0)})()}else j[p.id]?I(!0):w||I(!0)}),[y,g,p.id,w,j]);const k=(0,n().K8)((()=>io.getState()),[]),T=(0,n().K8)((()=>c.getState()),[c]),P=(0,n().K8)((()=>b().default.getState().currentUserRootStore),[]),L=(0,n().K8)((()=>{var e;return null===(e=b().default.getState().currentUserStore)||void 0===e||null===(e=e.getModel())||void 0===e?void 0:e.email}),[]),D=(0,n().K8)((()=>{if(p&&P){const e=P.getRecordModel({table:lo().bh,id:(0,Vn().Ry)({integrationId:p.id,locale:"en-US"})});return Boolean(e)}return!1}),[p,P]),{isPageAccessEnabled:E,isLoading:B}=function(e){let{botOrIntegrationPointer:t,isInternalIntegration:a}=e;const i=jo({botOrIntegrationPointer:t}),n=(0,r().v3)(),[{value:o,status:s}]=(0,l().Yb)((async()=>{if(!i)return!1;if(!a)return!1;const e=await x().callApi({eventName:"checkIntegrationPageAccessEnabled",environment:n,data:{integrationId:i.id}});if("failed"===e.type)return!1;const{data:{integrationPageAccessEnabled:t}}=e;return t}),[i,n,a]);return{isPageAccessEnabled:Boolean(o),isLoading:"pending"===s||"idle"===s}}({botOrIntegrationPointer:p,isInternalIntegration:w}),R=T.type,F=k.listing_status,U=null==g?void 0:g.id,N=E&&void 0!==U,z=(0,i.useMemo)((()=>[ad,...N?[rd]:[],id,...F?[nd]:[],od]),[F,N]),q=z[m].tabName,K="pending"===k.listing_status||"configuration"===q&&D,[G,Z]=i.useReducer(H().Ud,H().dg),$=Co(),Q=(0,n().K8)((()=>{if(p&&P){const e=P.getRecordModel({table:lo().bh,id:(0,Vn().Ry)({integrationId:p.id,locale:"en-US"})});return null==e?void 0:e.getContentfulId()}}),[p,P]),ee=(0,n().K8)((()=>{if(p&&P&&p.table===On().Li){const e=P.getRecordModel(p);return{name:null==e?void 0:e.getName(),id:null==e?void 0:e.id,icon:null==e?void 0:e.getInfo().icon,listing_status:null==e?void 0:e.getListingStatus(),created_by_id:null==e?void 0:e.getCreatedById(),capabilities:null==e?void 0:e.getCapabilities()}}}),[p,P]),te=e=>{io.setErrors(e)},re=async()=>{if(v(!0),"listing"===q)await Gs({integrationFields:ee,environment:y,errors:k.errors,setErrors:te,values:{...k,name:G.name.value,icon:G.icon.value},userId:null==P?void 0:P.userId,integrationListingContentfulId:Q,actorEmail:L}),v(!1);else{const t=ne.filter((e=>"link_preview"!==e));"configuration"===q&&(ae.includes(R)&&t.push(...J),ie.includes(R)||t.push(...X));const a=await $(G);if(Y({formData:G,formStateType:R,setFormData:Z,formFields:t,templateStore:a,actorEmail:L}))return void v(!1);try{if(!yo().E9({environment:y,formState:T,formData:(0,H().F3)(G)}))throw new Error("Record pointer is undefined");C().D6({label:s.formatMessage({id:"creatorProfile.integrationUpdate.successMessage",defaultMessage:"Integration updated successfully"})})}catch(e){S().f1(s.formatMessage({id:"creatorProfile.integrationUpdate.errorMessages.submitError",defaultMessage:"There was an error updating the integration"})),fo().log({level:"error",from:"CreatorProfileIntegrationUpdate",type:"updateError",error:(0,bo().convertErrorToLog)(e)})}finally{v(!1)}}},{formFields:ne,fieldDetails:oe}=null===(t=function(e){switch(e){case"update-bot":return{configuration:{formFields:["name","token","capabilities"],fieldDetails:{token:{label:O().A.formatMessage(W.tokenTypeLabel)},capabilities:{label:"",sectionHeader:O().A.formatMessage(W.capabilitiesTypeHeader),sectionSubheader:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.capabilities.caption",defaultMessage:"These requested capabilities will be displayed to users when they authorize your integration. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,A.jsx)(ha().A,{href:"https://developers.notion.com/docs/authorization",children:e})}})}}},basicInformation:{formFields:["name","type"],fieldDetails:{type:{label:O().A.formatMessage(W.integrationTypeLabel)},space:{label:O().A.formatMessage(W.spaceLabel),subtitle:O().A.formatMessage(W.spaceSubtitle)}}},listing:{formFields:[],fieldDetails:{}},pageAccess:{formFields:[],fieldDetails:{}},webhooks:{formFields:[],fieldDetails:{}}};case"update-compliance-integration":return{configuration:{formFields:["name","client_id","client_secret","authorization_url","icon","external_oauth_authorize_url","external_oauth_token_url","external_client_id","external_client_secret","external_oauth_scopes","external_deletion_url"],fieldDetails:{token:{label:O().A.formatMessage(W.tokenTypeLabel)},capabilities:{label:"",sectionHeader:O().A.formatMessage(W.capabilitiesTypeHeader),sectionSubheader:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.capabilities.caption",defaultMessage:"These requested capabilities will be displayed to users when they authorize your integration. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,A.jsx)(ha().A,{href:"https://developers.notion.com/docs/authorization",children:e})}})},client_id:{label:O().A.formatMessage(W.externalClientIdLabel)},client_secret:{label:O().A.formatMessage(W.externalClientSecretLabel)},icon:{label:O().A.formatMessage(W.integrationLogoLabel)},authorization_url:{label:O().A.formatMessage(W.authorizationUrlLabel)},...cd}},basicInformation:{formFields:[...ud.formFields,"redirect_uris","template_url"],fieldDetails:ud.fieldDetails},listing:pd,pageAccess:{formFields:[],fieldDetails:{}},webhooks:{formFields:[],fieldDetails:{}}};default:return{configuration:{formFields:["name","client_id","client_secret","authorization_url","capabilities","link_preview"],fieldDetails:{token:{label:O().A.formatMessage(W.tokenTypeLabel)},capabilities:{label:"",sectionHeader:O().A.formatMessage(W.capabilitiesTypeHeader),sectionSubheader:(0,A.jsx)(d().sA,{id:"developerIntegrationForm.capabilities.caption",defaultMessage:"These requested capabilities will be displayed to users when they authorize your integration. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,A.jsx)(ha().A,{href:"https://developers.notion.com/docs/authorization",children:e})}})},client_id:{label:O().A.formatMessage(W.externalClientIdLabel)},client_secret:{label:O().A.formatMessage(W.externalClientSecretLabel)},authorization_url:{label:O().A.formatMessage(W.authorizationUrlLabel)},...cd}},basicInformation:{formFields:[...ud.formFields,"redirect_uris","template_url"],fieldDetails:ud.fieldDetails},listing:pd,pageAccess:{formFields:[],fieldDetails:{}},webhooks:{formFields:[],fieldDetails:{}}}}}(R))||void 0===t?void 0:t[q],[se,le]=(0,i.useState)({});(0,i.useEffect)((()=>{if(!P)return;(async()=>{const e=await(0,H()._H)({formStoreState:T,userRootStore:P,environment:y,initialUrlMatchingAndPlaceholder:[]});le(e);for(const t of(0,V().uv)(e))Z({field:t,value:e[t]})})()}),[P,y,T]),(0,i.useEffect)((()=>{Z({field:"type",value:R})}),[R]);let de=!0;"configuration"!==q&&"basicInformation"!==q||(de=(0,V().uv)(G).some((e=>"type"!==e&&!(0,Ht().n4)(G[e].value,se[e]))));const ce="webhooks"===q||"pageAccess"===q;(0,i.useEffect)((()=>{"create-guest-integration"===G.type.value&&he().A.setState({isOpen:!0,type:"IntegrationInternalToPublicConfirmation",onAccept:()=>{c.updateRecordTypeOnSwitch("public"),u(!0)},onDismiss:()=>{c.updateRecordTypeOnSwitch("internal"),u(!1),Z({field:"type",value:"update-bot"})}})}),[y,G.type.value,c,u]);const ue="configuration"===q,pe=B||"configuration"===q&&N&&!_;return(0,A.jsx)(So().A,{loaded:!pe,showSpinnerTimeout:500,children:(0,A.jsxs)("form",{onSubmit:re,children:[ue?(0,A.jsx)("div",{style:a.icon,children:(0,A.jsx)(Wl,{field:"icon",setFormData:Z,formData:G,formStoreState:T,formFieldDetail:{...oe,icon:{...oe.icon,label:O().A.formatMessage(W.integrationLogoLabel)}}})}):void 0,ue?(0,A.jsx)(gd,{formData:G,setFormData:Z}):void 0,(0,A.jsx)(Ce().A,{size:24}),(0,A.jsx)(sd,{tabIndex:m,setTabIndex:f,tabs:z}),(0,A.jsx)(Ce().A,{size:24}),"webhooks"===q?(0,A.jsx)(qs,{botOrIntegrationPointer:p}):"pageAccess"===q&&N&&w?(0,A.jsx)(Xo,{botPointer:p,spaceId:U}):(0,A.jsxs)(A.Fragment,{children:["configuration"===q&&N&&_&&0===M.length?(0,A.jsx)("div",{style:a.banner,children:(0,A.jsx)(wo().l,{label:(0,A.jsx)(xo().Y1,{direction:"horizontal",width:"hug",children:(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Medium",colorName:"primary",children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrations.pageHeaderWebhooksBannerTitle",defaultMessage:"Your integration doesn’t have access to any pages yet"})})}),display:"inline",staticIcon:()=>(0,ho().exclamationMarkTriangleIcon)(a.bannerIcon),description:(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrations.pageHeaderWebhooksBannerDescription",defaultMessage:"To start using your integration, add pages and databases from the {accessTabLink}",values:{accessTabLink:(0,A.jsx)(ha().A,{onClick:()=>{(0,rt().u)({environment:y,event:{eventName:"creator_profile_click_access_tab_from_configuration_tab_banner",eventProperties:{}}});const e=z.findIndex((e=>"pageAccess"===e.tabName));-1!==e&&f(e)},disableUnderline:!1,disableHover:!1,hoverColor:"blue",children:"Access tab"})}})}),tint:"yellow"})}):null,ne.map((e=>function(e){const{field:t,integrationFormStore:a,formData:i,setFormData:r,fieldDetails:n,formStoreState:o,disabled:s,integrationPointer:l,listingValues:d,listingErrors:c}=e;if("link_preview"===t)return(0,A.jsx)(Jl,{integrationFormStore:a,formData:i,setFormData:r,formFieldDetail:n,disabled:s},t);if("publish"===t){const e=e=>{io.setValues(e)},t=e=>{io.setErrors(e)};return(null==l?void 0:l.table)===On().Li?(0,A.jsx)(pl,{setValues:e,values:d,errors:c,setErrors:t,disabled:s}):null}const u="client_id"===t||"client_secret"===t||"authorization_url"===t;return(0,A.jsx)(Wl,{formData:i,setFormData:r,formStoreState:o,field:t,formFieldDetail:n,disabled:!u&&s},t)}({field:e,integrationFormStore:c,formData:G,setFormData:Z,fieldDetails:oe,formStoreState:T,listingData:k,disabled:K,integrationPointer:p,listingErrors:k.errors,listingValues:{description:k.description,how_to_use:k.how_to_use,features:k.features,categories:k.categories,slug:k.slug,preview_images:k.preview_images,add_to_notion_url:k.add_to_notion_url}})))]}),!ce&&(0,A.jsx)(nl,{handleSave:re,handleReset:async()=>{const e=await(0,H()._H)({formStoreState:T,userRootStore:P,environment:y});for(const t of(0,V().uv)(e))Z({field:t,value:e[t]})},isFormDirty:de,isLoading:h,disabled:K||!de,hideTermsOfService:!0,submitCTA:"listing"===q?(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublishRequest.save",defaultMessage:"Submit to Gallery"}):void 0})]})})}function fd(e){const t=(0,d().tz)(),{integrationFormStore:a,setIsConvertingToPublic:o}=e,s="create-guest-integration",l=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]),c=(0,n().K8)((()=>a.getState()),[a]),u=(0,n().K8)((()=>{var e;return null===(e=b().default.state.currentUserStore)||void 0===e||null===(e=e.getModel())||void 0===e?void 0:e.email}),[]),p=(0,r().v3)(),[g,m]=i.useReducer(H().Ud,H().dg),{formFields:f,fieldDetails:h}=dd(s),v=(0,V().WP)(g).filter((e=>{let[t,a]=e;return f.includes(t)&&"type"!==t})).some((e=>{let[t,a]=e;return Boolean(a.value)})),y=Co(),x=async()=>{const e=await y(g);if(Y({formData:g,formStateType:s,setFormData:m,formFields:f,templateStore:e,actorEmail:u}))return;if("create-guest-integration"!==c.type)return void S().f1(t.formatMessage({id:"creatorProfile.integrationSubmission.errorMessages.submitError",defaultMessage:"There was an error creating the integration"}));const a=yo().E9({environment:p,formState:c,formData:(0,H().F3)(g)});if(!a)return void S().f1(t.formatMessage({id:"creatorProfile.integrationSubmission.errorMessages.submitError",defaultMessage:"There was an error creating the integration"}));const i=()=>{const e={[Hn().GP]:"internal",[On().Li]:"public"}[a.table];Be().oo({environment:p,url:`${no().JZ.creatorProfileIntegrations}/${e}/${a.id}`})};he().A.setState({isOpen:!0,type:"IntegrationConversionSuccess",onDismiss:i,onAccept:i})};(0,i.useEffect)((()=>{if(!l)return;(async()=>{const e=await(0,H()._H)({formStoreState:a.getState(),userRootStore:l,environment:p});for(const t of(0,V().uv)(e))m({field:t,value:e[t]});m({field:"type",value:s})})()}),[l,p,a]);return(0,A.jsxs)("form",{onSubmit:x,children:[f.map(((e,t)=>(0,A.jsx)(Wl,{formData:g,setFormData:m,formStoreState:c,field:e,formFieldDetail:h,disabled:"type"===e},e+t))),(0,A.jsx)(nl,{handleSave:x,handleReset:()=>{a.updateRecordTypeOnSwitch("internal"),o(!1)},isFormDirty:v})]})}function hd(e){var t;const a=(0,r().v3)(),{botOrIntegrationPointer:o}=e,[s,d]=i.useState(!1),{loadedFormState:c,integrationFormStore:u,spaceName:p,spaceStore:g}=function(e){const{botOrIntegrationPointer:t,existingFormStore:a}=e,o=(0,r().v3)(),s=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]),d=(0,n().uB)(a,qn),c=(0,n().K8)((()=>d.getState().type),[d]),u=(0,n().K8)((()=>d.getState().startingRecord),[d]),p=(0,n().K8)((()=>d.getState().status),[d]),g=(0,n().K8)((()=>{const e=(0,eo().o8)();return(0,H().PF)(c,e)}),[c]),[m,f]=(0,i.useState)("secrets"),h="published"===p&&"secrets"!==m,v=(0,n().K8)((()=>{if(t&&s){const e=t.table,a=s.getRecordValue(t);if(a){const i=e===On().Li&&((0,$n().Hx)(a.capabilities)||(0,$n().EK)(a.capabilities))&&s.getRecordValue({table:Qn().Ps,id:t.id});return{botOrIntegrationRecord:{value:a,table:t.table},maybeExternalAuthRecord:i?{table:Qn().Ps,value:i}:void 0}}}}),[s,t]),[{value:y}]=(0,l().Yb)((async()=>{if(!s||!v||v.botOrIntegrationRecord.table!==On().Li)return[];const e=v.botOrIntegrationRecord.value.id,t=await x().callApi({eventName:"getIntegrationDomainVerifications",environment:o,data:{integrationId:e}});if("success"===t.type)return t.data.verificationIds.map((e=>s.getRecordValue({table:Yn().Hx,id:e}))).filter(V().O9);if("failed"===t.type)throw t.error;return(0,V().HB)(t)}),[o,v,s]);(0,i.useEffect)((()=>{if(!v)return;const{botOrIntegrationRecord:e,maybeExternalAuthRecord:t}=v;d.initializeNewForm(e,t,y||[]),Xn().X2(o,{table:e.table})}),[d,o,v,y]);const{spaceName:S,spaceStore:w}=(0,n().K8)((()=>{if(!s||!v)return{spaceName:void 0,spaceStore:void 0};const{botOrIntegrationRecord:e}=v;if(e.value.parent_table!==Jn().NX)return{spaceName:void 0,spaceStore:void 0};const t=Bt().SL.createChildStore(s,{id:e.value.parent_id,table:e.value.parent_table});return{spaceName:(0,to().GK)(o,t),spaceStore:t}}),[v,s,o]);return{loadedFormState:(0,Zn().L)({value:u}),selectedPage:m,integrationFormStore:d,setSelectedPage:f,showPublishedIntegrationWarning:h,supportedPages:g,spaceName:S,spaceStore:w}}(e),m=c.value;if((0,i.useEffect)((()=>{if(m&&m.table===On().Li){var e;const t=m.value.info.gallery_listing_info,a=m.value.info.installation_url||m.value.info.installation_info_url;io.setState({description:G(null==t?void 0:t.description),how_to_use:G(null==t?void 0:t.how_to_use),features:null==t?void 0:t.features,categories:null==t?void 0:t.tags,add_to_notion_url:a,slug:null==t?void 0:t.slug,preview_images:null==t||null===(e=t.preview_images)||void 0===e?void 0:e.map((e=>e.url)),errors:{},listing_status:m.value.listing_status})}else io.setState(io.getInitialState())}),[m]),"pending"===c.status)return(0,A.jsx)(Kn().A,{});if("rejected"===c.status||!o)return(0,A.jsx)(ro,{});const f=a.currentUser.id;return(null==m?void 0:m.table)===On().Li&&(null==m||null===(t=m.value)||void 0===t?void 0:t.parent_id)!==f?(0,A.jsx)(Gn().A,{}):s?(0,A.jsx)(fd,{integrationFormStore:u,setIsConvertingToPublic:d}):(0,A.jsxs)("main",{children:[(0,A.jsx)(uo,{integrationId:o.id}),(0,A.jsx)(md,{integrationFormStore:u,spaceName:p,botOrIntegrationPointer:o,setIsConvertingToPublic:d,spaceStore:g})]})}var bd=()=>a(597777);const vd=new(a(178624).R)({key:"integrationPageAccessBannerPreferenceStore",namespace:a(419494).Bq,important:!0,trackingType:"preference"});function yd(){const e=(0,o().IS)((e=>({readFaq:{cursor:"pointer",color:e.text.primary,fontWeight:L().Wy.semibold},linkStyles:{color:e.text.primary,textDecoration:"none"}})),[]);return(0,A.jsx)("span",{style:e.readFaq,children:(0,A.jsx)("a",{style:e.linkStyles,href:"https://developers.notion.com",children:(0,A.jsx)(d().sA,{defaultMessage:"Learn more here.",id:"creatorProfile.integrations.listLink"})})})}function xd(){const e=(0,o().IS)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"space-between",gap:24,flexWrap:"wrap"},faq:{display:"flex",color:e.text.tertiary,gap:8},bannerIcon:{height:Fe().Ev.lg,width:Fe().Ev.lg,color:"dark"===e.mode?e.text.primary:e.text.secondary},banner:{marginBottom:"28px"},bannerDescription:{width:"65%"},newIntegrationLink:{fontWeight:L().Wy.semibold}})),[]),{showBanner:t,markBannerAsDismissed:a}=function(){const e=(0,za().X)("public_api_clearer_integration_access"),t=(0,n().K8)((()=>{var e;const t=null===(e=vd.getState())||void 0===e?void 0:e.dismissedExpiresAt,a=Date.now();return Boolean(t&&t>a)}),[]),[a,r]=i.useState(e&&!t);return(0,i.useEffect)((()=>{t&&r(!1)}),[t]),{markBannerAsDismissed:()=>{vd.setState({dismissedExpiresAt:(0,bd().g7)(90)})},showBanner:a}}();return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:e.container,children:(0,A.jsx)(De().y,{size:"large",header:(0,A.jsx)(d().sA,{id:"creatorProfile.integrations.pageHeader",defaultMessage:"Integrations"}),subHeader:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(d().sA,{id:"creatorProfile.integrations.pageHeaderSubtitle",defaultMessage:"Create, review, and edit development information and credentials."}),(0,A.jsxs)("div",{style:e.faq,children:[(0,A.jsx)(d().sA,{defaultMessage:"Integrations use the API to access Notion’s pages, databases, and users.",id:"creatorProfile.templates.listSubheader"}),(0,A.jsx)(yd,{})]})]})})}),t&&(0,A.jsx)("div",{style:e.banner,children:(0,A.jsx)(wo().l,{label:(0,A.jsxs)(xo().Y1,{direction:"horizontal",width:"hug",children:[(0,A.jsx)(d().sA,{id:"creatorProfile.integrations.headerPageAccessBannerTitle",defaultMessage:"Set integration page access in one place"}),(0,A.jsx)(td().Ee,{newBadgeKey:"public_api_clearer_integration_access",didUserEngage:!1,keyType:"feature_gate"})]}),display:"inline",staticIcon:()=>(0,Po().pageIcon)(e.bannerIcon),description:(0,A.jsx)("div",{style:e.bannerDescription,children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrations.headerPageAccessBannerDescription",defaultMessage:"You can now bulk manage the pages and databases your internal integration can access. To manage, select an internal integration and navigate to the Access tab."})}),tint:"gray",onDismiss:()=>{a()}})})]})}var Sd=()=>a(239820),wd=()=>a(720665),Cd=()=>a(495249);var jd=()=>a(798880);function Md(e){const{record:t,hasCreatorProfile:a}=e,i=(0,o().IS)((e=>({iconText:{fontSize:28},icon:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",borderRadius:"6px"},subtitleType:{fontSize:12,fontWeight:L().Wy.semibold},subtitleCreatedBy:{fontSize:12,color:e.text.tertiary},subtitle:{display:"flex",alignItems:"center"}})),[]),s=(0,r().v3)(),l=(0,Sl().$)(),c=(0,n().K8)((()=>t.name??""),[t]),u=(0,n().K8)((()=>t.table===On().Li?t.getInfo().icon:t.icon),[t]),p=(0,n().K8)((()=>t.table===On().Li&&("external"===t.getType()||"guest"===t.getType())),[t]),g=function(e){const t=(0,d().tz)(),a=(0,Sl().$)(),i=(0,n().K8)((()=>{if(!a)return;if(e.created_by_id===a.id)return(0,A.jsx)(d().sA,{id:"developerIntegrationCard.createdByTagline.creatorIsUser",defaultMessage:"Created by you"});const i=Bt().LU.createChildStore(a,{table:jd().oo,id:e.created_by_id}),r=i.getModel();return i.isReady()&&r?(0,A.jsx)(d().sA,{id:"developerIntegrationCard.createdByTagline.placeholder",defaultMessage:"Created by {userFullDisplayName}",values:{userFullDisplayName:r.getFullName(t)}}):void 0}),[a,e,t]);return i}(t),m=co(t.id);if(!l)return null;const f=(0,Bt().Oo)(l,{id:t.id,table:t.table}),h=function(e){const t=e.table===On().Li;return`${no().JZ.creatorProfileIntegrations}/${t?"public":"internal"}/${e.id}`}(t.pointer);return(0,A.jsxs)(gn,{actions:(0,A.jsxs)(vn,{imageType:"square",extraLeftSpacing:25,children:[(0,A.jsx)(_r().u,{variant:"neutral",onClick:()=>{he().A.setState({isOpen:!0,type:"DeleteIntegrationConfirmation",modalButtonType:"destructive",onAccept:()=>function(e){const{recordStore:t,environment:a}=e;Xn().uj(a,{table:t.table}),yo().ZY({environment:a,recordStore:t}).then((()=>{C().D6({label:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationDeletion.snackbar.success",defaultMessage:"Integration deleted"})})})).catch((()=>{C().D6({label:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationDeletion.snackbar.fail",defaultMessage:"Error deleting integration. Please try again"})})}))}({recordStore:f,environment:s})})},children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationDeletion.hover.deleteButton",defaultMessage:"Delete"})}),(0,A.jsx)(_r().u,{variant:"light",href:h,children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationDeletion.hover.editButton",defaultMessage:"Edit Settings"})}),p&&!m.listingStatus&&(0,A.jsx)(_r().u,{variant:"dark",onClick:()=>{a?Be().oo({url:`${no().JZ.creatorProfileIntegrations}/public/${t.id}/publish`,environment:s}):he().A.setState({isOpen:!0,type:"CreatorProfileRequired",onAccept:()=>Be().oo({url:no().JZ.creatorProfile,environment:s})})},children:(0,A.jsx)(d().sA,{id:"creatorProfile.integrationPublish.hover.submitButton",defaultMessage:"Submit to Gallery"})})]}),href:h,children:[(0,A.jsx)(mn,{type:"integration",imageSrc:u,node:u?null:(0,A.jsx)("div",{style:i.icon,children:(0,A.jsx)("span",{style:i.iconText,children:c[0]})})}),(0,A.jsx)(bn,{title:(0,A.jsx)(yn,{templateName:c,templateStatus:m.listingStatus?Q(m.listingStatus,m.integrationListingModel):void 0}),subtitle:(0,A.jsxs)("div",{style:i.subtitle,children:[(0,A.jsx)("div",{style:i.subtitleType,children:p?(0,A.jsx)(d().sA,{id:"creatorProfile.integrations.subtitlePublic",defaultMessage:"Public Integration"}):(0,A.jsx)(d().sA,{id:"creatorProfile.integrations.subtitleInternal",defaultMessage:"Internal Integration"})})," ","·"," ",(0,A.jsx)("div",{style:i.subtitleCreatedBy,children:(0,A.jsx)("div",{style:i.subtitleCreatedBy,children:g})})]})})]})}function _d(e){const{setFilter:t,filter:a}=e,i=(0,o().IS)((e=>({filterButton:{fontSize:15,height:28,marginBottom:16,width:"fit-content"},selectedFilterButton:{color:c().Ay.frontText,fontWeight:L().Wy.medium}})),[]),n=(0,r().v3)(),s={onSelect:e=>{t(e),Xn().hO(n,{type:e})},items:[...Cd().Tl],renderOrigin:e=>(0,A.jsxs)(_().p,{...e,children:[Ad[a],(0,A.jsx)(we().Q,{iconGroup:be().I,variantName:"mini"})]}),getKey:e=>e,renderItem:e=>(0,A.jsx)(vt().A,{...e,title:Ad[e.value]}),selectedItem:a};return(0,A.jsx)("div",{style:i.filterButton,children:(0,A.jsx)(xt().A,{...s})})}const Ad={all:(0,A.jsx)(d().sA,{id:"creatorProfile.integrations.allFilter.label",defaultMessage:"View all"}),internal:(0,A.jsx)(d().sA,{id:"creatorProfile.integrations.internalFilter.label",defaultMessage:"Internal"}),public:(0,A.jsx)(d().sA,{id:"creatorProfile.integrations.publicFilter.label",defaultMessage:"Public"})};function Id(e){let{children:t}=e;const a=(0,o().IS)((()=>({integrationCardGrid:{display:"flex",flexDirection:"column",gap:"28px"},integrationCardGridMobile:{display:"flex",flexDirection:"column",gap:"40px"}})),[]),{isMobileWidth:i}=(0,m().LS)();return(0,A.jsx)("div",{style:{...i?a.integrationCardGridMobile:a.integrationCardGrid},children:t})}function kd(){const e=(0,r().v3)(),t=(0,o().IS)((e=>({newIntegrationTitle:{color:e.text.secondary},icon:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",background:e.palette.gray[30],borderRadius:"6px"}})),[]),[a,s]=i.useState([]),[c,u]=i.useState([]),p=Boolean((0,fe().x)()),g=(0,Sl().$)(),m=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]),f=(0,n().K8)((()=>m?m.getAdminSpaceStores():[]),[m]),[h,v]=i.useState("all");i.useEffect((()=>{s([]),u([])}),[e.currentUser.id]),i.useEffect((()=>{Xn().KD(e)}),[e]);const[{value:y,status:S}]=(0,l().Yb)((async()=>{const t=f.map((e=>e.id)),a=await x().callApi({eventName:"getDeveloperBotsAndIntegrations",environment:e,data:{ownedSpaceIds:t}});if("success"===a.type)return a.data;if("failed"===a.type)throw fo().log({level:"error",from:"creatorProfile",type:"IntegrationLoadError",data:{message:`Cannot load user integrations and bots ${a.error}`}}),a.error;return(0,V().HB)(a)}),[e,f]),w=null==y?void 0:y.integrationIds;i.useEffect((()=>{w&&s((e=>(0,wd().sb)([...e,...w])))}),[w]);const C=null==y?void 0:y.botIds;i.useEffect((()=>{C&&u((e=>(0,wd().sb)([...e,...C])))}),[C]);const j=(0,n().K8)((()=>{if(g){return(0,Cd().ud)({ids:a,table:On().Li,userStore:g}).filter((e=>e.alive))}return[]}),[g,a]),M=(0,n().K8)((()=>{if(g){return(0,Cd().ud)({ids:c,table:Hn().GP,userStore:g}).filter((e=>e.alive))}return[]}),[g,c]),_=(0,n().K8)((()=>(0,Cd().Dz)([...j,...M])),[j,M]),I=(0,n().K8)((()=>({all:_,internal:M,public:j}[h])),[h,_,M,j]);return"pending"===S?(0,A.jsx)(Kn().A,{}):(0,A.jsxs)("section",{children:[_.length>0&&(0,A.jsx)(_d,{filter:h,setFilter:v}),(0,A.jsxs)(Id,{children:[(0,A.jsxs)(gn,{href:"/profile/integrations/form/new-integration",onClick:()=>Xn().$u(e),children:[(0,A.jsx)(mn,{type:"integration",node:(0,A.jsx)("div",{style:t.icon,children:(0,A.jsx)(we().Q,{overrideSize:e=>2.25*e,variantName:"default",colorName:"secondary",iconGroup:Sd().E})})}),(0,A.jsx)(bn,{title:(0,A.jsx)("div",{style:t.newIntegrationTitle,children:(0,A.jsx)(d().sA,{defaultMessage:"New integration",id:"creatorProfile.integrations.newIntegration"})})})]}),I.map((e=>(0,A.jsx)(Md,{hasCreatorProfile:p,record:e},e.id)))]})]})}var Td=()=>a(645873);const Pd=new(Td().O2)("integrations",(async()=>{const[{default:e}]=await Promise.all([a.e(45758).then(a.bind(a,146828))]);return{DeveloperIntegrationLab:e}})),Ld=(0,Td()._h)(Pd,(e=>e.DeveloperIntegrationLab));function Dd(e){const{botOrIntegrationPointer:t}=e,a=(0,n().K8)((()=>{const{description:e,slug:t,how_to_use:a,preview_images:i,add_to_notion_url:r,features:n,categories:o}=io.getInitialState();return{description:e,slug:t,how_to_use:a,preview_images:i,add_to_notion_url:r,features:n,categories:o}}),[]),[r,o]=i.useState(a);return(0,A.jsx)(ul,{integrationPointer:t,values:r,setValues:o})}function Ed(e){const{botOrIntegrationPointer:t,isPublish:a,isLab:i,integrationFormStore:r}=e;return a?(null==t?void 0:t.table)===On().Li&&t?(0,A.jsx)(Dd,{botOrIntegrationPointer:t}):null:i?(null==t?void 0:t.table)===On().Li&&t?(0,A.jsx)(Ld,{integrationPointer:t}):null:(0,A.jsx)(hd,{botOrIntegrationPointer:t,integrationsFormStore:r})}function Bd(e){const t=(0,d().tz)(),{integrationFormStore:a}=e,[o,s]=i.useState("create-bot"),l=(0,n().K8)((()=>a.getState()),[a]),c=(0,r().v3)(),u=(0,Sl().$)(),p=(0,n().K8)((()=>{var e;return null==u||null===(e=u.getModel())||void 0===e?void 0:e.email}),[u]),[g,m]=i.useReducer(H().Ud,H().dg),[{formFields:f,fieldDetails:h},b]=i.useState((()=>dd(o))),v=Object.entries(g).filter((e=>{let[t,a]=e;return f.includes(t)&&"type"!==t})).some((e=>{let[t,a]=e;return Boolean(a.value)})),y=Co(),x=async()=>{const e=await y(g);if(Y({formData:g,formStateType:o,setFormData:m,formFields:f,templateStore:e,actorEmail:p}))return;if("create-bot"!==l.type&&"create-guest-integration"!==l.type)return void S().f1(t.formatMessage({id:"creatorProfile.integrationSubmission.errorMessages.submitError",defaultMessage:"There was an error creating the integration"}));const a=yo().GA({environment:c,formState:l,formData:(0,H().F3)(g)});if(!a)return void S().f1(t.formatMessage({id:"creatorProfile.integrationSubmission.errorMessages.submitError",defaultMessage:"There was an error creating the integration"}));const i=()=>{const e={[Hn().GP]:"internal",[On().Li]:"public"};Be().oo({environment:c,url:`${no().JZ.creatorProfileIntegrations}/${e[a.table]}/${a.id}`})};he().A.setState({isOpen:!0,type:"IntegrationSuccessCreation",onAccept:i,onDismiss:i})};return(0,i.useEffect)((()=>{m({value:"create-bot",field:"type"})}),[]),(0,i.useEffect)((()=>{const e=g.type.value;e&&(s(e),b(dd(e)),a.updateCreationFormType(e))}),[a,g.type.value]),(0,A.jsxs)("form",{onSubmit:x,children:[(0,A.jsx)(gd,{formData:g,setFormData:m}),(0,A.jsx)(Ce().A,{size:32}),f.map(((e,t)=>(0,A.jsx)(Wl,{formData:g,setFormData:m,formStoreState:l,field:e,formFieldDetail:h},e+t))),(0,A.jsx)(nl,{handleSave:x,handleReset:()=>{a.reset(),Be().oo({environment:c,url:no().GJ.creatorProfileIntegrations})},isFormDirty:v})]})}function Rd(e){const{botOrIntegrationPointer:t,isPublish:a,isLab:i}=e,r=(0,n().uB)(void 0,qn),o=(0,n().K8)((()=>b().default.state.currentUserRootStore),[]),s=(0,n().K8)((()=>{if(t&&o){const e=o.getRecordModel(t);return null==e?void 0:e.getName()}}),[o,t]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(Aa,{route:"/profile/integrations",exact:!0,children:[(0,A.jsx)(xd,{}),(0,A.jsx)(kd,{})]}),(0,A.jsxs)(Aa,{route:"/profile/integrations/form/new-integration",exact:!0,children:[(0,A.jsx)(wa,{hideProfile:!0}),(0,A.jsx)(Bd,{integrationFormStore:r})]}),(0,A.jsxs)(Aa,{route:"/profile/integrations/public/",children:[(0,A.jsx)(wa,{hideProfile:!0,displayName:s}),(0,A.jsx)(Ed,{botOrIntegrationPointer:t,isPublish:a,isLab:i,integrationFormStore:r})]}),(0,A.jsxs)(Aa,{route:"/profile/integrations/internal/",children:[(0,A.jsx)(wa,{hideProfile:!0,displayName:s}),(0,A.jsx)(hd,{botOrIntegrationPointer:t,integrationsFormStore:r})]}),(0,A.jsx)(zn().A,{})]})}const Fd={CreatorProfileModal:new(Td().O2)("CreatorProfileModal",(async()=>await a.e(22931).then(a.bind(a,752819))))},Ud=(0,Td()._h)(Fd.CreatorProfileModal,(e=>e.default));var Nd=()=>a(471987),zd=()=>a(192249),Vd=()=>a(829764),Hd=()=>a(430287);var Od=()=>a(83489),Wd=()=>a(638681);Wd().object({required:{webhookUrl:Wd().string()},optional:{}});const qd=(0,at().Dv)("testMarketplaceWebhook");var Kd=()=>a(751156),Gd=()=>a(87726),Zd=()=>a(735577),$d=()=>a(547568);const Yd=["llc","llp","inc.","inc","corp","corp.","corporation","holdings","global",".com","international"].map((e=>e.toLowerCase()));const Qd=new Set(["3M","amark","A-Mark Precious Metals","ABM Industries","ADP","AECOM","AES","AGCO","AGL Resources","AIG","AK Steel Holding","ARRIS Group","AT&T","AbbVie","Abbott Laboratories","Activision Blizzard","Activision","Blizzard","Adobe","Adobe Systems","Advance Auto Parts","Advanced Micro Devices","AMD","Aetna","Aflac","Agilent Technologies","Air Products & Chemicals","Airgas","Alaska Air Group","Albertsons Cos.","Alcoa","Alleghany","Allergan","Alliance Data Systems","Allstate","Ally Financial","Alphabet","Altria Group","AmTrust Financial Services","Amazon","Ameren","American Airlines Group","American Axle & Manufacturing","American Electric Power","American Express","American Family Insurance Group","American Financial Group","American Tower","Ameriprise Financial","AmerisourceBergen","Amgen","Amphenol","Anadarko Petroleum","Andeavor","Anixter International","Anthem","Apache","Apple","Apple","Applied Materials","Aramark","Archer Daniels Midland","Arconic","Arrow Electronics","Arthur J. Gallagher","Asbury Automotive Group","Ascena Retail Group","Ashland","Assurant","Auto-Owners Insurance","AutoNation","AutoZone","Autoliv","Automatic Data Processing","Avery Dennison","Avis Budget Group","Avnet","Avon Products","BB&T Corp.","Baker Hughes","Ball","Bank of America Corp.","Bank of New York Mellon Corp.","Bank of New York Mellon","Barnes & Noble","Baxalta","Baxter International","Becton Dickinson","Bed Bath & Beyond","Berkshire Hathaway","Berry Global Group","Best Buy","Big Lots","Biogen","BlackRock","Blackstone Group","Boeing","Booking Holdings","Booz Allen Hamilton Holding","Booz Allen Hamilton","BorgWarner","Boston Scientific","Bristol-Myers Squibb","BT","British Telecom","Cox","Broadcom","Buckeye Partners","Builders FirstSource","Burlington Stores","C.H. Robinson Worldwide","CBRE Group","CBS","CDW","CH2M Hill","CHS","CMS Energy","CST Brands","CSX","CVS Health","Cablevision Systems","Caesars Entertainment","CalAtlantic Group","Calpine","Calumet Specialty Products Partners","Cameron International","Campbell Soup","Capital One Financial","CarMax","Cardinal Health","Casey’s General Stores","Caterpillar","Celanese","Celgene","Centene","CenterPoint Energy","CenturyLink","Charles Schwab","Charter Communications","Chemours","Cheniere Energy","Chesapeake Energy","Chevron","Chubb","Cigna","Cincinnati Financial","Cintas","Cisco Systems","Citigroup","Citizens Financial Group","Clorox","Coca-Cola Enterprises","Coca-Cola European Partners","Coca-Cola","Cognizant","Cognizant Technology Solutions","Colgate-Palmolive","Comcast","Commercial Metals","Community Health Systems","Computer Sciences","Con-way","ConAgra Foods","Conagra Brands","Conduent","ConocoPhillips","Consolidated Edison","Constellation Brands","Core-Mark Holding","Corning","Costco","Coty","Crown Holdings","Cummins","D.R. Horton","DCP Midstream","DISH Network","DTE Energy","DXC Technology","DaVita HealthCare Partners","DaVita","Dana Holding","Dana","Danaher","Darden Restaurants","Dean Foods","Deere","Delek US Holdings","Dell Technologies","Delta Air Lines","Devon Energy","Dick’s Sporting Goods","Dillard’s","DirecTV","Discover Financial Services","Discovery Communications","Discovery","Disney","Dollar General","Dollar Tree","Dominion Energy","Dominion Resources","Domtar","Dover","Dow Chemical","DowDuPont","Dr Pepper Snapple Group","DuPont","Duke Energy","EMC","EMCOR Group","EOG Resources","Eastman Chemical","Ecolab","Edison International","Eli Lilly","Emerson Electric","Energy Future Holdings","Energy Transfer Equity","Entergy","Enterprise Products Partners","Envision Healthcare Holdings","Envision Healthcare","Erie Insurance Group","Essendant","Estee Lauder","Eversource Energy","Exelon","Expedia Group","Expedia","Expeditors International of Washington","Expeditors Intl. of Washington","Express Scripts Holding","Exxon Mobil","FMC Technologies","Facebook","Family Dollar Stores","Fannie Mae","Farmers Insurance Exchange","FedEx","Fidelity National Financial","Fidelity National Information Services","Fifth Third Bancorp","First American Financial","First Data","FirstEnergy","Fiserv","Fluor","Foot Locker","Ford Motor","Fortive","Franklin Resources","Freddie Mac","Freeport-McMoRan","Frontier Communications","GameStop","Gap","General Cable","General Dynamics","General Electric","General Mills","General Motors","Genesis Healthcare","Genuine Parts","Genworth Financial","Gilead Sciences","Global Partners","Goldman Sachs Group","Goodyear Tire & Rubber","Graybar Electric","Group 1 Automotive","Guardian Life Ins. Co. of America","H.J. Heinz","HCA Healthcare","HCA Holdings","HD Supply Holdings","HP","HRG Group","Halliburton","Hanesbrands","Harley-Davidson","Harman International Industries","Harris","Hartford Financial Services Group","Hartford Financial Services","Health Net","Henry Schein","Hershey","Hertz Global Holdings","Hess","Hewlett Packard Enterprise","Hilton Worldwide Holdings","HollyFrontier","Home Depot","Honeywell International","Hormel Foods","Host Hotels & Resorts","Humana","Huntington Ingalls Industries","Huntsman","IBM","INTL FCStone","IQVIA Holdings","Icahn Enterprises","Illinois Tool Works","Ingram Micro","Ingredion","Insight Enterprises","Integrys Energy Group","Intel","Intercontinental Exchange","International Paper","Interpublic Group","J.B. Hunt Transport Services","J.C. Penney","J.M. Smucker","J.P. Morgan Chase","JP Morgan Chase","JPMorgan Chase","Jabil Circuit","Jabil","Jacobs Engineering Group","Jarden","Jefferies Financial Group","JetBlue Airways","Johnson & Johnson","J and J","Johnson Controls","Jones Financial","Jones Lang LaSalle","KBR","KKR","Kellogg","Kelly Services","KeyCorp","Kimberly-Clark","Kinder Morgan","Kindred Healthcare","Kohl’s","Kraft Foods Group","Kraft Heinz","Kroger","L Brands","L-3 Communications","L3 Technologies","LKQ","Laboratory Corp. of America","Lam Research","Land O’Lakes","Lansing Trade Group","Las Vegas Sands","Lear","Leidos Holdings","Lennar","Leucadia National","Level 3 Communications","Liberty Interactive","Liberty Media","Liberty Mutual Insurance Group","LifePoint Health","Lincoln National","Lithia Motors","Live Nation Entertainment","Lockheed Martin","Loews","Lowe’s","M&T Bank Corp.","MGM Resorts International","MRC Global","Macy’s","Magellan Health","ManpowerGroup","Marathon Oil","Marathon Petroleum","Markel","Marriott International","Marsh & McLennan","MasTec","Masco","Massachusetts Mutual Life Insurance","MasterCard","Mastercard","Mattel","McDonald’s","McGraw Hill Financial","McKesson","MeadWestvaco","Merck","MetLife","Michaels Cos.","Micron Technology","Microsoft","Microsoft Office","Microsoft Office 365","Mohawk Industries","Molina Healthcare","Molson Coors Brewing","Mondelez International","Monsanto","Morgan Stanley","Mosaic","Motorola Solutions","Murphy Oil","Murphy USA","Mutual of Omaha Insurance","NCR","NGL Energy Partners","NRG Energy","NVR","National Oilwell Varco","Nationwide","Navient","Navistar International","NetApp","Netflix","New York Life Insurance","Newell Brands","Newmont Mining","News Corp.","NextEra Energy","NiSource","Nike","Nordstrom","Norfolk Southern","Northern Trust","Northrop Grumman","Northwestern Mutual","Nucor","Nvidia","ON Semiconductor","Occidental Petroleum","Office Depot","Old Republic International","Olin","Omnicare","Omnicom Group","Oneok","Oracle","Oshkosh","Owens & Minor","Owens Corning","Owens-Illinois","O’Reilly Automotive","PBF Energy","PG&E Corp.","PNC Financial Services Group","PNC Financial Services","PPG Industries","PPL","PVH","Paccar","Pacific Life","Packaging Corp. of America","Pantry","Parker-Hannifin","Patterson","PayPal Holdings","Peabody Energy","Penske Automotive Group","pepsi","PepsiCo","Performance Food Group","PetSmart","Peter Kiewit Sons’","Pfizer","Philip Morris International","Phillips 66","Phillips","Pixar","Pioneer Natural Resources","Plains GP Holdings","Polaris Industries","Praxair","Precision Castparts","Priceline Group","Principal Financial Group","Principal Financial","Procter & Gamble","Progressive","Prudential Financial","Public Service Enterprise Group","Publix Super Markets","PulteGroup","Qualcomm","Quanta Services","Quest Diagnostics","Quintiles IMS Holdings","Quintiles Transnational Holdings","Qurate Retail","R.R. Donnelley & Sons","Ralph Lauren","Raymond James Financial","Raytheon","Realogy Holdings","Regeneron Pharmaceuticals","Regions Financial","Reinsurance Group of America","Reliance Steel & Aluminum","Republic Services","Reynolds American","Rite Aid","Robert Half International","Rockwell Automation","Rockwell Collins","Ross Stores","Ryder System","S&P Global","Safeway","SanDisk","Sanmina","Seaboard","Sealed Air","Sears Holdings","Securian Financial Group","Sempra Energy","Sherwin-Williams","Simon Property Group","Sonic Automotive","Southern","Southwest Airlines","SpartanNash","Spectra Energy","Spectrum Brands Holdings","Spirit AeroSystems Holdings","St. Jude Medical","Stanley Black & Decker","Staples","Starbucks","Starwood Hotels & Resorts","State Farm Insurance Cos.","State Street Corp.","Steel Dynamics","Stryker","SunTrust Banks","Supervalu","Symantec","Synchrony Financial","Synnex","Sysco","TEGNA","TIAA","TIAA-CREF","TJX","TRW Automotive Holdings","Targa Resources","Target","Tech Data","Telephone & Data Systems","Tenet Healthcare","Tenneco","Terex","Tesla","Tesoro","Texas Instruments","Textron","Thermo Fisher Scientific","Thor Industries","Thrivent Financial for Lutherans","Time Warner Cable","Time Warner","Toll Brothers","Toys R Us","Tractor Supply","TravelCenters of America","Travelers Cos.","TreeHouse Foods","Trinity Industries","Twenty-First Century Fox","Tyson Foods","U.S. Bancorp","UGI","UPS","US Foods Holding","US Foods","USAA","Ulta","Ulta Beauty","Union Pacific","United","United Continental Holdings","United Natural Foods","United Rentals","United States Steel","United Technologies","UnitedHealth Group","Univar","Universal Health Services","Unum Group","VF","Valero Energy","Veritiv","Verizon Communications","Verizon","Viacom","Visa","Visteon","Vistra Energy","Voya Financial","W.R. Berkley","W.W. Grainger","WEC Energy Group","WESCO International","Walgreens Boots Alliance","Walgreens","Walmart","Walt Disney","Waste Management","WellCare Health Plans","Wells Fargo","WestRock","Western & Southern Financial Group","Western & Southern Financial","Western Digital","Western Refining","Western Union","Westlake Chemical","Weyerhaeuser","Whirlpool","Whole Foods Market","Williams","Windstream Holdings","World Fuel Services","Wyndham Destinations","Wyndham Worldwide","Wynn Resorts","XPO Logistics","Xcel Energy","Xerox","Yahoo","Yum Brands","Yum China Holdings","Zimmer Biomet Holdings","eBay","iHeartMedia","salesforce.com","atlassian","www","google","facebook","youtube","baidu","yahoo","amazon","wikipedia","qq","twitter","slashdot","google","taobao","live","sina","yahoo","linkedin","weibo","ebay","google","yandex","bing","vk","hao123","google","instagram","t","msn","amazon","tmall","google","pinterest","ask","reddit","wordpress","mail","google","blogspot","paypal","onclickads","google","tumblr","apple","google","aliexpress","sohu","microsoft","imgur","xvideos","google","imdb","google","netflix","gmw","amazon","fc2","360","alibaba","go","stackoverflow","ok","google","google","amazon","google","tianya","amazon","craigslist","pornhub","rakuten","naver","blogger","diply","google","xhamster","flipkart","espn","soso","outbrain","nicovideo","google","cnn","xinhuanet","dropbox","google","googleusercontent","github","bongacams","ebay","kat","bbc","google","google","pixnet","tradeadexchange","popads","googleadservices","ebay","dailymotion","sogou","adnetworkperformance","adobe","directrev","nytimes","jd","wikia","adcash","livedoor","booking","163","bbc","alipay","coccoc","dailymail","indiatimes","china","dmm","china","chase","xnxx","buzzfeed","google","huffingtonpost","youku","google","google","terraclicks","uol","amazon","snapdeal","office","google","microsoftonline","walmart","ameblo","amazon","daum","amazonaws","blogspot","slideshare","etsy","twitch","google","whatsapp","bankofamerica","yelp","globo","theguardian","tudou","flickr","aol","stackexchange","chinadaily","cnet","weather","indeed","ettoday","amazon","reimageplus","quora","redtube","soundcloud","tmall","google","forbes","douban","loading-delivery2","naver","blogspot","cntv","cnzz","google","wellsfargo","google","target","youporn","adf","zillow","vice","google","leboncoin","kakaku","ikea","gmail","bestbuy","vimeo","avito","godaddy","spaceshipads","goo","salesforce","about","tripadvisor","allegro","livejournal","nih","tubecup","adplxmd","foxnews","deviantart","wordpress","doublepimp","google","washingtonpost","theladbible","w3schools","themeforest","feedly","wikihow","wordpress","office365","taboola","9gag","mozilla","akamai","akamaihd","zol","hclips","mediafire","businessinsider","google","onet","comcast","gfycat","softonic","google","pixiv","google","zhihu","americanexpress","amazon","mystart","nfl","wix","steamcommunity","archive","usps","ups","google","wikimedia","bilibili","homedepot","google","secureserver","doorblog","force","telegraph","skype","detik","shutterstock","google","ebay-kleinanzeigen","ebaykleinanzeigen","weebly","popcash","google","addthis","steampowered","web","bitauto","blogspot","google","github","rambler","avg","ndtv","hulu","gamer","xywy","huanqiu","nametests","51","orange","tlbb8","sourceforge","hdfcbank","livejasmin","espncricinfo","answers","hp","gmx","youm7","mailchimp","mercadolivre","speedtest","xfinity","ebay","webmd","ifeng","google","groupon","blogfa","wordreference","uptodown","xuite","tumblr","hootsuite","usatoday","google","capitalone","stumbleupon","goodreads","wp","people","bet365","google","t-online","paytm","fedex","fbcdn","icicibank","blog","google","thesaurus","bloomberg","mashable","caijing","bild","extratorrent","warmportrait","dmm","pandora","putlocker","amazon","spiegel","seznam","google","spotify","wsj","dell","ign","jabong","udn","2ch","macys","chaturbate","kaskus","att","engadget","accuweather","gameforge","varzesh3","tmall","life","smzdm","badoo","google","mama","samsung","adidas","tmall","rutracker","1688","chaoshi","1905","gsmarena","google","youth","onlinesbi","styletv","abs-cbnnews","mega","twimg","liveadexchanger","livedoor","upornia","zendesk","trello","mlb","rediff","tistory","39","reference","google","google","google","milliyet","reuters","icloud","verizonwireless","haosou","liputan6","kohls","kickstarter","kouclo","sahibinden","shopclues","enet","ebay","mydomainadvisor","iqiyi","sberbank","impress","eksisozluk","bleacherreport","slickdeals","yaolan","tube8","evernote","trackingclick","babytree","baike","lady8844","infusionsoft","hurriyet","ask","google","liveinternet","flirchi","newegg","ijreview","torrentz","vid","likes","kinopoisk","thefreedictionary","youradexchange","pinimg","oracle","ppomppu","google","gap","4shared","rt","google","yandex","scribd","ebay","quikr","photobucket","ltn","taleo","repubblica","ce","libero","onedio","list-manage","listmanage","uploaded","slack","blogspot","blogimg","livedoor","meetup","cbssports","retailmenot","goal","goodgamestudios","cnnic","eastday","citi","lifehacker","51yes","exoclick","buzzfil","olx","hm","neobux","ameba","cloudfront","teepr","pconline","google","kinogo","gizmodo","elpais","savefrom","rbc","disqus","fiverr","theverge","ewt","marca","xda-developers","xda","xdadevelopers","developers","lowes","free","google","allrecipes","xe","battle","torrentz","kompas","surveymonkey","aparat","souq","ilividnewtab","mobile","nordstrom","stockstar","nyaa","time","asos","intuit","youboy","nbcnews","naukri","4dsply","epweike","streamcloud","techcrunch","medium","tabelog","independent","chip","zippyshare","lenovo","expedia","wunderground","java","corriere","gmarket","subscene","webssearches","plarium","hotels","autohome","playstation","irctc","glassdoor","eyny","ancestry","gamefaqs","sabq","qunar","myway","google","cnbeta","urdupoint","17ok","albawabhnews","youtube-mp3","youtubemp3","blackboard","airbnb","google","hatena","azlyrics","mercadolibre","nifty","ero-advertising","eroadvertising","kijiji","doubleclick","justdial","6pm","mercadolibre","shopify","olx","instructables","bestadbid","realtor","chinaz","costco","nike","people","npr","timeanddate","gmanetwork","issuu","digikala","lenta","kayak","jimdo","subito","beeg","codecanyon","box","rottentomatoes","kooora","vcommission","seesaa","verizon","siteadvisor","discovercard","blogspot","elmundo","xunlei","11st","tmz","douyutv","donga","google","taringa","haber7","youdao","okcupid","bukalapak","clien","thepiratebay","microsoftstore","gazeta","bhaskar","all2lnk","mirror","hupu","sh","k618","instructure","so-net","sonet","ebay","zomato","squarespace","urbandictionary","focus","google","zulily","wired","overstock","wetransfer","itmedia","southwest","latimes","fidelity","b5m","list","csdn","nba","change","sakura","gearbest","drudgereport","freepik","moneycontrol","eonline","livescore","google","asana","vnexpress","airtel","duckduckgo","agoda","japanpost","yandex","r10","cookpad","yodobashi","rdsa2012","mixi","unblocked","woot","ytimg","php","pof","makemytrip","udemy","wayfair","domaintools","statcounter","hespress","trulia","slate","asus","billdesk","sears","aweber","musicboxnewtab","wow","foodnetwork","pch","yts","ca","constantcontact","bomb01","yandex","blogspot","researchgate","mihanblog","interia","goo","ensonhaber","superuser","lefigaro","workercn","gigazine","cnbc","eventbrite","swagbucks","suning","blog","staticwebdom","rednet","yallakora","lazada","bookmyshow","popsugar","pcmag","staples","ero-video","erovideo","chron","twoo","admtpmp127","houzz","youjizz","topfansgames","abril","tokopedia","abcnews","upwork","state","ria","asahi","wonderlandads","bitly","food","onlylady","tinyurl","lemonde","ci123","nikkei","hatenablog","hostgator","academia","megapopads","custhelp","redirectvoluum","zoho","alicdn","cdiscount","thewatchseries","bhphotovideo","howtogeek","mercadolibre","norton","appledaily","momoshop","cbc","biglobe","315che","semrush","shareasale","tnaflix","zappos","zara","egou","chinaso","gismeteo","sciencedirect","nypost","byinmind","patch","fanli","nydailynews","littlethings","voc","histats","faithtap","jcpenney","coursera","wp","topf1le","intoday","cbsnews","rightmove","zing","babycenter","auction","wikiwiki","backpage","weblio","messenger","xbox","oeeee","marketwatch","windows","fanduel","clixsense","gemius","aa","58","commentcamarche","nikkeibp","olx","bodybuilding","jrj","mynet","nhk","lequipe","gawker","usaa","exblog","clipconverter","mi","videodownloadconverter","investing","mayoclinic","jumia","rapidgator","behance","delta-homes","deltahomes","dropbooks","e-hentai","ehentai","ticketmaster","to8to","vetogate","leagueoflegends","mit","gamespot","reverso","techradar","sbnation","liveleak","europa","mobile01","ibm","zeroredirect1","himado","farsnews","wiktionary","vk","myfitnesspal","nhl","alexa","kdnet","21cn","123cha","google","altervista","cbs","tmall","milanuncios","askmebazaar","gutefrage","gov","atlassian","primewire","saramin","theatlantic","sozcu","giphy","yoka","adp","okezone","olx","mystartsearch","junbi-tracker","junbitracker","junbi","acfun","informer","delta","dianping","androidcentral","webex","cam4","t-mobile","tmobile","cracked","usbank","stamplive","ted","google","drtuber","gyazo","investopedia","adschemist","drom","anitube","cityadspix","thesportbible","agar","zone-telechargement","telechargement","zone","zonetelechargement","united","hubspot","4chan","emol","netteller","jin115","infoseek","ehow","uniqlo","geocities","disq","mega","leadzupc","atwiki","sfgate","cpasbien","novinky","filehippo","dreamstime","cisco","getpocket","facenama","feclik","iflscience","priceline","blogspot","wav","thekitchn","gazzetta","thedailybeast","trklnks","pureadexchange","digitaltrends","sapo","tomshardware","quizlet","android","rev2pub","mackeeper","nbcsports","123rf","ruten","friv","yomiuri","indianexpress","gamepedia","prpops","intel","deezer","deviantart","bluehost","qvc","tutorialspoint","allocine","offpageads","eastmoney","india","india-mmm","indiammm","roblox","fishki","adme","genius","ew","vodlocker","seasonvar","tsite","ebates","audible","rakuten","almasryalyoum","welt","google","google","thehindu","yadi","nasa","mapquest","idnes","news","tagged","dafont","4pda","ebay","banggood","etao","chexun","sex","google","haberturk","yandex","digg","carview","cqnews","prezi","match","ampclicks","as","ultimate-guitar","ultimateguitar","ccm","topix","admtpmp124","usmagazine","monster","lapatilla","admtpmp123","fandango","indianrail","coupons","189","2chblog","sky","yaplakal","yellowpages","wiley","rarbg","whitepages","mysmartprice","entrepreneur","google","id","istockphoto","ea","walgreens","toysrus","mynavi","noaa","sankei","cnblogs","immobilienscout24","mackolik","pagesjaunes","weather","kotaku","google","basecamp","clarin","quanjing","folha","lolesports","otto","nairaland","lun","fanpage","bt","forever21","vine","marriott","pchome","padsdel","thisav","stg","staging","msgstore","dev","development","prod","production","login","signin","signup","status","www","not-found","support","contact","account","app","api","partner","partners","company","developer","design","art","marketing","conference","business","integrations","privacy","security","events","reviews","review","overview","integration","integrations","downloads","webinar","features","feature","news","contact","legal","privacy","gallery","blog","update","updates","champions","guides","help","releases","sites","marketplace","marketplaces","oauth2","faces"].flatMap((function(e){const t=e.replace("'","").toLowerCase();let a=[t];t.includes("&")&&(a=[t.replace("&","and"),t.replace("&","")]),t.includes("and")&&a.push(t.replace("and","")),t.includes(".com")&&a.push(t.replace(".com","dotcom"));for(const i of Yd)for(const e of a)e.endsWith(i)&&a.push(e.slice(0,e.length-i.length));return a.map((e=>e.replace(/[^a-z0-9]/g,"")))})));function Jd(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return $d().$.has(e)||Qd.has(e)||(0,Ee().bn)(e)||!t&&e.includes("notion")}a(803949);var Xd=()=>a(842599);function ec(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)throw new(ar().rTV)("Missing name",{type:"template_creator_missing_name"});if(e.length>y().aC)throw new(ar().rTV)("Name too long",{type:"template_creator_name_too_long"});ac(e,t)}function tc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)throw new(ar().rTV)("Missing handle",{type:"template_creator_missing_handle"});if(e.length>y().aC)throw new(ar().rTV)("Handle too long",{type:"template_creator_handle_too_long"});if(!/^[a-z0-9_-]+$/.test(e))throw new(ar().rTV)("Invalid handle",{type:"template_creator_invalid_handle"});ac(e,t)}function ac(e,t){if(Jd(e.toLowerCase(),!0))throw new(ar().rTV)("Name is not allowed",{type:"template_creator_name_reserved"});if(!t.includes(e)&&(0,vi().e)(e))throw new(ar().rTV)("Name is not allowed",{type:"template_creator_name_not_allowed"})}function ic(e){if(!e)throw new(ar().rTV)("Missing description",{type:"template_creator_missing_description"});if(e.length>y().oc)throw new(ar().rTV)("Description too long",{type:"template_creator_description_too_long"})}function rc(e){if(void 0!==e&&0===e.trim().length)throw new(ar().rTV)("Missing email",{type:"template_creator_missing_email"});if(e&&!(0,Xd().DT)((0,Xd().qh)(e)))throw new(ar().rTV)("Invalid email",{type:"template_creator_invalid_email"})}function nc(e){if(e){if(e.length>y().cp)throw new(ar().rTV)("Invalid link",{type:"template_creator_link_too_long"});if(!new RegExp(/^(https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/g).test(e))throw new(ar().rTV)("Invalid link",{type:"template_creator_invalid_link"})}}function oc(e){if(e&&!e.startsWith("https://s3.us-west-2.amazonaws.com/public.notion-static.com")&&!e.startsWith("https://s3-us-west-2.amazonaws.com/public.notion-static.com"))throw new(ar().rTV)("Url is not notion secured URL",{type:"template_creator_invalid_image_url"})}function sc(e){const{creator:t,usernameAllowlist:a,nameAllowlist:i}=e;ec(t.name,i),tc(t.handle,a),ic(t.creatorDescription),rc(t.contactEmail),t.links.forEach((e=>nc(e))),oc(t.image),oc(t.coverImage)}var lc=()=>a(390575);function dc(e){cc({value:e,validationFunction:e=>{if(""!==e&&!(0,Zd().A)(e))throw new(ar().rTV)("Webhook URL invalid",{type:"template_creator_webhook_url_invalid"})},fieldName:"webhookUrlErrorMessage"})}function cc(e){const{value:t,validationFunction:a,fieldName:i}=e;try{a(t)}catch(r){if((0,ar().V4j)(r)){const t=(0,st().DX)(O().A.getIntl(),r.body);t&&uc("linksErrorMessage"===i?{fieldName:i,errorMessage:t,linkIndex:e.linkIndex}:{fieldName:i,errorMessage:t})}}}function uc(e){const{fieldName:t,errorMessage:a}=e;if("linksErrorMessage"===t){const i=ai.getState().linksErrorMessage;i[e.linkIndex]=a,ai.setState({...ai.getState(),[t]:[...i]})}else ai.setState({...ai.getState(),[t]:a})}function pc(e){const{errorFieldName:t}=e;if("linksErrorMessage"===t){const a=ai.getState().linksErrorMessage;a[e.linkIndex]=void 0,ai.setState({...ai.getState(),[t]:a})}else ai.setState({...ai.getState(),[t]:void 0})}function gc(e){let t=[];if(e.length<5){const a=5-e.length;t=[...Array(a)].map((()=>""))}return[...e,...t]}function mc(e){return e.preventDefault(),e.returnValue=""}function fc(){return(0,A.jsx)(d().sA,{defaultMessage:"Save",id:"creatorProfile.confirmNavigation.confirm"})}function hc(){return(0,A.jsx)(d().sA,{defaultMessage:"Discard and Exit",id:"creatorProfile.confirmNavigation.reject"})}function bc(){return(0,A.jsx)(d().sA,{defaultMessage:"Continue",id:"creatorProfile.confirmNavigation.confirm.continue"})}function vc(){return(0,A.jsx)(d().sA,{defaultMessage:"Keep Editing",id:"creatorProfile.confirmNavigation.reject.edit"})}function yc(e){const{isActive:t,onAccept:a,onReject:r,onFinal:n,acceptLabel:s,rejectLabel:l}=e,{onBeforeViewChange:u}=Ze(),p=(0,o().IS)((()=>({header:{fontSize:"24px",lineHeight:"30px",fontWeight:L().Wy.bold,display:"flex",gap:"16px",flexDirection:"column"},description:{color:c().Ay.black}})),[]),g=(0,i.useMemo)((()=>({message:(0,A.jsxs)("div",{style:p.header,children:[(0,Or().Q)({height:"28px",width:"28px",color:"rgba(234, 79, 68, 1)"}),(0,A.jsx)(d().sA,{defaultMessage:"Unsaved changes",id:"creatorProfile.confirmNavigation.header"})]}),description:(0,A.jsx)("div",{style:p.description,children:(0,A.jsx)(d().sA,{defaultMessage:"Your changes will be discarded if you exit this page without saving.",id:"creatorProfile.confirmNavigation.description"})}),acceptLabel:s,cancelLabel:l})),[p.description,p.header,s,l]),m=(0,i.useCallback)((()=>async function(e){const{isActive:t,onAccept:a,onReject:i,onFinal:r,userActionArgs:n}=e;t&&((await S().Gh(n)).accept?await a():await i(),await r())}({isActive:t,onAccept:async()=>{await a()},onReject:async()=>{r&&await r()},onFinal:async()=>{n&&await n(),u.current=null},userActionArgs:g})),[t,a,u,n,r,g]);(0,i.useEffect)((()=>(t?(u.current=m,window.addEventListener("beforeunload",mc)):(u.current=null,window.removeEventListener("beforeunload",mc)),()=>{u.current=null,window.removeEventListener("beforeunload",mc)})),[t,u,m])}var xc=()=>a(382479);function Sc(e){return(0,n().K8)((()=>{const t=e.state,a=t.initialValues,i=(0,V().uv)(a).reduce(((e,a)=>({...e,[a]:t[a]})),{});return!(0,Ht().n4)(i,a)}),[e])}function wc(e){const{onboardingStatus:t,setOnboardingStatus:a}=e,i=(0,o().IS)((e=>({sectionTitle:{fontSize:24,fontWeight:L().Wy.semibold},sectionSubtitle:{fontSize:15,fontWeight:455},red_circle:{color:"#D30000"},light_green_circle:{color:"#1Fd655"},dark_green_circle:{color:"#0B6E4F"},yellow_circle:{color:"#FFF200"},black_circle:{color:"#000000"},delayText:{fontSize:12,color:e.text.tertiary,width:"max-content"},container:{display:"flex",flexDirection:"column",gap:4,alignSelf:"flex-start",width:"max-content"},inlineLink:{color:e.text.primary,fontWeight:L().Wy.bold},caption:{fontSize:12,color:"rgba(17, 17, 17, 0.5)"},inlineEmailLink:{color:"rgba(17, 17, 17, 0.5)",fontWeight:L().Wy.semibold}})),[]),r=(0,d().tz)();return(0,A.jsxs)(xo().Y1,{gap:16,padding:"0 0 24px 0",width:"hug",children:[(0,A.jsxs)(xo().Y1,{gap:2,children:[(0,A.jsx)("div",{style:i.sectionTitle,children:r.formatMessage(Cc.sellWithNotionTitle)}),(0,A.jsx)("div",{style:i.sectionSubtitle,children:r.formatMessage(Cc.sellWithNotionSubtitle,{link:e=>(0,A.jsx)(ha().A,{href:no().JZ.sellerOnboardingLearnMore,external:!0,style:i.inlineLink,disableUnderline:!0,children:e})})})]}),(0,A.jsxs)(xo().Y1,{gap:10,direction:"vertical",align:"center-left",width:"hug",children:[(0,A.jsx)(ci,{onboardingStatus:t,setOnboardingStatus:a}),(0,A.jsx)("div",{style:i.caption,children:r.formatMessage(Cc.sellWithNotionCaption,{link:e=>(0,A.jsx)(ha().A,{href:`mailto:${y().hj}`,external:!0,style:i.inlineEmailLink,disableUnderline:!0,children:e})})})]})]})}const Cc=(0,d().YK)({sellWithNotionTitle:{id:"creatorProfileForm.seller.onboarding.title",defaultMessage:"Sell with Notion"},sellWithNotionSubtitle:{id:"creatorProfileForm.seller.onboarding.commissionDisclaimer",defaultMessage:"Process payments via Notion with a low commission rate. <link>Learn more</link>"},sellWithNotionCaption:{id:"creatorProfileForm.seller.onboarding.caption",defaultMessage:"Notion has partnered with Stripe to provide a seamless payment experience for creators. If you run into any issues, please contact <link>templates@makenotion.com</link>."}});function jc(){return(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.form.deleteSuccess",defaultMessage:"Template deleted successfully"})})}function Mc(){return(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.draft.form.discardSuccess",defaultMessage:"Template draft discarded successfully"})})}function _c(){return(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{id:"creatorProfile.form.save.success",defaultMessage:"Profile updated successfully"})})}function Ac(){return(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{id:"creatorProfileActions.createCreatorProfileSuccess",defaultMessage:"Profile created successfully. You can now upload templates and submit them to the Marketplace."})})}var Ic=()=>a(360083);const kc=(0,d().YK)({uploadAvatar:{id:"creatorProfileForm.avatarUploadButton.label",defaultMessage:"Upload profile picture"}}),Tc=function(e){const{disabled:t}=e,s=(0,r().v3)(),l=(0,o().IS)((e=>({uploader:{display:"flex",gap:15,alignItems:"center",justifyContent:"left"},uploadedImageContainer:{width:"56px",height:"56px"},uploadedImage:{width:"56px",height:"56px",objectFit:"cover",borderRadius:"50%",background:"rgba(0, 0, 0, 0.08)"},buttonsContainer:{display:"flex",alignItems:"center",gap:8},removeButton:{fontSize:13.5,color:e.text.tertiary},loadingSpinner:{marginLeft:4},avatarEmptyStateContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:"56px",width:"56px",borderRadius:"50%",background:"rgba(0, 0, 0, 0.08)"},avatarEmptyState:{height:"40px",width:"40px",fill:"white"}})),[]),c=(0,n().K8)((()=>ai.state.image),[]),u=(0,i.useCallback)((e=>ai.setState({...ai.state,image:e})),[]),p=(0,i.useCallback)((e=>{ai.setState({...ai.state,image:c||""}),S().f1(e.message),"upload"===e.type&&fo().log({level:"error",from:"TemplateCreatorSubmissionFormIconUpload",type:"uploadError",error:(0,bo().convertErrorToLog)(e)})}),[c]),{uploadFile:g,isUploading:m}=(0,ll().lN)({onSuccess:u,onError:p,environment:s}),f=(0,i.useCallback)((()=>{ai.setState({...ai.state,image:""})}),[]);return(0,A.jsxs)("div",{style:l.uploader,children:[c?(0,A.jsx)(Ic().A,{url:c,isAuthenticated:!1,stripGoogleIconQuery:!0,width:56,render:(e,t)=>(0,A.jsx)("div",{style:l.uploadedImageContainer,children:(0,A.jsx)(nn().Ay,{src:t,style:l.uploadedImage})})}):(0,A.jsx)("div",{style:l.avatarEmptyStateContainer,children:(0,a(91451).z)(l.avatarEmptyState)}),(0,A.jsxs)("div",{style:l.buttonsContainer,children:[(0,A.jsxs)(_r().u,{disabled:m||t,onClick:g,variant:"light",children:[(0,A.jsx)(d().sA,{...kc.uploadAvatar}),m&&(0,A.jsx)(Ji().A,{style:l.loadingSpinner})]}),c?(0,A.jsx)(_r().u,{disabled:m||t,variant:"neutral",style:l.removeButton,onClick:f,children:(0,A.jsx)(d().sA,{id:"templateCreator.removeButton.label",defaultMessage:"Remove"})}):null]})]})};function Pc(e){const{actionType:t,handleUpload:a,handleRemove:i,isUploading:r,isDisabled:n}=e,o=Lc();return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(_r().u,{disabled:n,onClick:a,variant:"light",children:["change"===t?(0,A.jsx)(d().sA,{...Dc.changeCoverImage}):(0,A.jsx)(d().sA,{...Dc.uploadCoverImage}),r&&(0,A.jsx)(Ji().A,{style:o.loadingSpinner})]}),"change"===t?(0,A.jsx)(_r().u,{disabled:n,variant:"light",onClick:i,children:(0,A.jsx)(d().sA,{id:"templateCreator.removeButton.label",defaultMessage:"Remove"})}):null]})}function Lc(){return(0,o().IS)((e=>({uploader:{display:"flex",gap:15,alignItems:"center",marginBottom:"8px"},uploadedImage:{width:"100%",height:"100%",objectFit:"cover"},loadingSpinner:{marginLeft:4},uploadActionContainer:{right:8,bottom:8,position:"absolute",gap:8,display:"flex"},imagePreviewContainer:{width:"100%",height:"auto",aspectRatio:4,position:"relative",background:"rgba(0, 0, 0, 0.08)",display:"flex",justifyContent:"center",borderRadius:"6px",overflow:"hidden"},uploadEmptyState:{textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"2px"},uploadEmptyStateIcon:{height:18,width:18,fill:"rgba(102, 102, 102, 1)",paddingBottom:"2px"},uploadEmptyStateTitle:{fontSize:"13.5px",weight:554,lineHeight:"19px",color:"rgba(102, 102, 102, 1)"},uploadEmptyStateSubtitle:{fontSize:"12px",weight:459,lineHeight:"17px",color:"rgba(17, 17, 17, 0.5)"}})),[])}const Dc=(0,d().YK)({uploadCoverImage:{id:"creatorProfileForm.coverPhotoUploadButton.label",defaultMessage:"Upload cover image"},changeCoverImage:{id:"creatorProfileForm.coverPhotoUploadButton.label.change",defaultMessage:"Change cover image"}}),Ec=function(e){const{disabled:t}=e,a=(0,n().K8)((()=>ai.state.coverImage),[]),o=(0,i.useCallback)((e=>{ai.setState({...ai.state,coverImage:e})}),[]),s=(0,i.useCallback)((e=>{ai.setState({...ai.state,coverImage:""}),S().f1(e.message),"upload"===e.type&&fo().log({level:"error",from:"TemplateCreatorSubmissionFormCoverPhotoUpload",type:"uploadError",error:(0,bo().convertErrorToLog)(e.error)})}),[]),l=(0,r().v3)(),c=Lc(),{uploadFile:u,isUploading:p}=(0,ll().lN)({onSuccess:o,onError:s,environment:l}),g=(0,i.useCallback)((()=>{ai.setState({...ai.state,coverImage:""})}),[]);return(0,A.jsx)("div",{style:c.uploader,children:a?(0,A.jsx)(Ic().A,{url:a,isAuthenticated:!1,stripGoogleIconQuery:!0,width:650,render:(e,a)=>(0,A.jsxs)("div",{style:c.imagePreviewContainer,children:[(0,A.jsx)(nn().Ay,{src:a,style:c.uploadedImage}),(0,A.jsx)("div",{style:c.uploadActionContainer,children:(0,A.jsx)(Pc,{handleUpload:u,handleRemove:g,isUploading:p,isDisabled:p||Boolean(t),actionType:"change"})})]})}):(0,A.jsxs)("div",{style:c.imagePreviewContainer,children:[(0,A.jsxs)("div",{style:c.uploadEmptyState,children:[(0,A.jsx)("div",{children:ol(c.uploadEmptyStateIcon)}),(0,A.jsx)("div",{style:c.uploadEmptyStateTitle,children:(0,A.jsx)(d().sA,{defaultMessage:"Upload Header Image",id:"creatorProfile.coverImage.uploadEmptyState"})}),(0,A.jsx)("div",{style:c.uploadEmptyStateSubtitle,children:(0,A.jsx)(d().sA,{defaultMessage:"1920 × 480 • Max 2MB",id:"creatorProfile.coverImage.uploadEmptyStateInfo"})})]}),(0,A.jsx)("div",{style:c.uploadActionContainer,children:(0,A.jsx)(Pc,{actionType:"upload",handleUpload:u,isUploading:p,isDisabled:p||Boolean(t)})})]})})},Bc=150;function Rc(e){var t;const{type:a,templateCreatorProfile:o,marketplaceSellerProfile:s}=e,l=(0,d().tz)(),c=(0,r().v3)(),u=Hc(),p=Vc(),{setView:g}=Ze(),m=(0,i.useRef)(null),f=(0,i.useRef)(null),h=(0,fe().x)(),[b,v]=(0,i.useState)(!1),[y,w]=(0,i.useState)(!1),[j,M]=(0,i.useState)(!1),[_,I]=(0,i.useState)(""),[k,T]=(0,i.useState)(1),[P,L]=(0,i.useState)((null==h?void 0:h.stripe_connect_onboarding_phase)??"disabled"),D=ya(),{name:E,handle:B,contactEmail:R,creatorDescription:F,nameErrorMessage:U,handleErrorMessage:N,contactEmailErrorMessage:z,creatorDescriptionErrorMessage:H,linksErrorMessage:W,contactEmailToggleError:q,webhookUrl:K,webhookUrlErrorMessage:G}=(0,n().K8)((()=>{const{name:e,handle:t,contactEmail:a,creatorDescription:i,nameErrorMessage:r,handleErrorMessage:n,contactEmailErrorMessage:o,creatorDescriptionErrorMessage:s,linksErrorMessage:l,contactEmailToggleError:d,webhookUrl:c,webhookUrlErrorMessage:u}=ai.state;return{name:e,handle:t,contactEmail:a,creatorDescription:i,nameErrorMessage:r,handleErrorMessage:n,contactEmailErrorMessage:o,creatorDescriptionErrorMessage:s,linksErrorMessage:l,contactEmailToggleError:d,webhookUrl:c,webhookUrlErrorMessage:u}}),[]),Z=(0,Sl().$)(),$=(0,n().K8)((()=>null==Z?void 0:Z.getEmail()),[Z]),Y=(0,xc().X)();(0,i.useEffect)((()=>{var e,t;o&&(!function(e,t){var a,i,r,n,o;if(null===e)return;const s=(null===(a=e.attributes)||void 0===a?void 0:a.links)||[...Array(5)].map((()=>"")),l={name:e.name||"",handle:e.username||"",contactEmail:(null===(i=e.attributes)||void 0===i?void 0:i.contactEmail)||"",creatorDescription:(null===(r=e.attributes)||void 0===r?void 0:r.description)||"",image:(null===(n=e.attributes)||void 0===n||null===(n=n.image)||void 0===n?void 0:n.url)||"",links:gc(s.filter((e=>Boolean(e)))),coverImage:(null===(o=e.attributes)||void 0===o||null===(o=o.cover_image)||void 0===o?void 0:o.url)||"",webhookUrl:t||"",webhookUrlTested:!1};ai.setState({...ai.getInitialState(),...l,initialValues:{...l}})}(o,null==s||null===(e=s.webhook_config)||void 0===e?void 0:e.all),M(Boolean(null===(t=o.attributes)||void 0===t?void 0:t.contactEmail)),I(o.username||""),v(!0))}),[o,s]),(0,i.useEffect)((()=>{!j&&b&&ai.setState({...ai.state,contactEmail:""})}),[j,b]),(0,i.useEffect)((()=>{q&&(M(!0),_a().Rt({element:f.current,environment:c,options:{behavior:"smooth",block:"center"}}))}),[q,c]);const Q=[U,N,z,H,G,...W.filter((e=>Boolean(e)))].filter((e=>Boolean(e))).length,J=Sc(ai);yc({isActive:J,onAccept:()=>Promise.resolve(),onReject:()=>{throw new Error("abandon_route")},acceptLabel:(0,A.jsx)(bc,{}),rejectLabel:(0,A.jsx)(vc,{})});const X=(0,i.useMemo)((()=>({...p.textInput,...y?p.disabledInput:{}})),[p.textInput,p.disabledInput,y]);if(null===a)return null;const ee=y||!J;return(0,A.jsxs)("div",{children:[(0,A.jsx)(De().y,{size:"large",header:(0,A.jsx)(d().sA,{id:"creatorProfileForm.title",defaultMessage:"Creator Profile"}),subHeader:(0,A.jsxs)("div",{style:u.subheaderContainer,children:[(0,A.jsx)(d().sA,{id:"creatorProfileForm.subTitle",defaultMessage:"Information here is separate from your Notion account profile. Items with asterisk * are required."}),o&&(0,A.jsx)(A.Fragment,{children:o&&Y?(0,A.jsx)(Zt().A,{href:(0,Gd().kc)(o.username),external:!0,children:(0,A.jsx)("span",{style:u.viewProfileText,children:(0,A.jsx)(d().sA,{id:"creatorProfileForm.viewProfile.label",defaultMessage:"View Profile↗"})})}):(0,A.jsx)("span",{style:u.noPublishedTemplatesText,children:(0,A.jsx)(d().sA,{id:"creatorProfileForm.noPublishedTemplates.label",defaultMessage:"Your creator profile will be available at {url} after you have at least one published template.",values:{url:(0,Gd().kc)(o.username)}})})})]})}),(0,A.jsx)(kr,{count:Q,ref:m}),(0,A.jsxs)("div",{style:u.basicInformation,children:[(0,A.jsx)(Ec,{disabled:y}),(0,A.jsx)("div",{style:u.avatarUploadContainer,children:(0,A.jsx)(Tc,{disabled:y})}),(0,A.jsxs)("div",{style:u.creatorProfileContainer,children:[$&&(0,A.jsx)(Pr().o,{htmlLabel:"currentEmail",label:l.formatMessage(Oc.notionAccount),value:$,type:"text",style:{...p.textInput,...p.disabledInput},disabled:!0,format:Br().C.Default}),(0,A.jsx)(Pr().o,{htmlLabel:"creatorDisplayName",value:E,format:Br().C.Default,placeholder:l.formatMessage(Oc.displayNamePlaceholderWithIntegration),type:"text",style:X,onFocus:()=>pc({errorFieldName:"nameErrorMessage"}),onChange:e=>{ai.setState({...ai.state,name:e.target.value})},onBlur:e=>{!function(t){cc({value:t,validationFunction:e=>{ec(e,cs().default.getConfigKey("creator_profile_allowlist","names"))},fieldName:"nameErrorMessage"});try{if(ai.state.initialValues.name!==t&&Jd(t.toLowerCase(),!1))throw new(ar().rTV)("Name is not allowed",{type:"template_creator_name_reserved"})}catch(e){if((0,ar().V4j)(e)){const a=(0,st().DX)(O().A.getIntl(),e.body);a&&uc({fieldName:"nameErrorMessage",errorMessage:a})}}}(e.target.value)},disabled:y,label:l.formatMessage(Oc.displayName),error:U,children:(0,A.jsx)("div",{style:p.helperText,children:l.formatMessage(Oc.displayNameHelperText)})}),(0,A.jsx)(Pr().o,{htmlLabel:"handle",value:`@${B}`,placeholder:"@",type:"text",style:X,onFocus:()=>pc({errorFieldName:"handleErrorMessage"}),onChange:e=>ai.setState({...ai.state,handle:e.target.value.replace("@","")}),onBlur:async e=>{const t=e.target.value.replace("@","");""!==_&&t===_||await async function(t){const{environment:a,handle:i}=t;cc({value:i,validationFunction:e=>{tc(e,cs().default.getConfigKey("creator_profile_allowlist","usernames"))},fieldName:"handleErrorMessage"});try{if(i!==ai.state.initialValues.handle&&Jd(i.toLowerCase(),!1))throw new(ar().rTV)("Name is not allowed",{type:"template_creator_name_reserved"})}catch(e){if((0,ar().V4j)(e)){const a=(0,st().DX)(O().A.getIntl(),e.body);a&&uc({fieldName:"handleErrorMessage",errorMessage:a})}}if(!ai.getState().handleErrorMessage){const e=await x().callApi({eventName:"validateTemplateCreatorHandle",environment:a,data:{handle:i}});"success"!==e.type&&uc({fieldName:"handleErrorMessage",errorMessage:(0,st().Hu)(O().A.getIntl(),e)})}}({environment:c,handle:t})},disabled:y,format:Br().C.Default,label:l.formatMessage(Oc.handle),error:N}),(0,A.jsxs)("div",{style:u.emailContainer,ref:f,children:[(0,A.jsx)(Uc,{checked:j,onChange:()=>{M(!j),ai.setState({...ai.state,contactEmailErrorMessage:void 0})},disabled:y,disallowTogglingOff:(0,V().O9)(null==o||null===(t=o.attributes)||void 0===t?void 0:t.contactEmail)&&("started"===P||"completed"===P)}),j&&(0,A.jsx)(Pr().o,{htmlLabel:"contactEmail",label:l.formatMessage(Oc.email),error:z,format:Br().C.Default,value:R,type:"email",style:X,onFocus:()=>{ai.setState({...ai.state,contactEmailToggleError:!1,contactEmailErrorMessage:void 0})},onChange:e=>ai.setState({...ai.state,contactEmail:e.target.value}),onBlur:e=>{cc({value:e.target.value,validationFunction:rc,fieldName:"contactEmailErrorMessage"})},disabled:y,children:(0,A.jsx)("div",{style:p.helperText,children:l.formatMessage(Oc.emailHelperText)})})]}),(0,A.jsx)(Pr().o,{htmlLabel:"description",format:Br().C.Default,label:l.formatMessage(Oc.creatorDescription),error:H,maxlength:280,value:F,type:"text",textarea:!0,style:X,onFocus:()=>pc({errorFieldName:"creatorDescriptionErrorMessage"}),onChange:e=>{ai.setState({...ai.state,creatorDescription:e.target.value})},onBlur:e=>{cc({value:e.target.value,validationFunction:ic,fieldName:"creatorDescriptionErrorMessage"})},disabled:y,showCharacterCounter:!0}),D&&(0,A.jsx)("div",{style:u.webhookInput,children:(0,A.jsx)(Pr().o,{htmlLabel:"webhookUrl",format:Br().C.Default,label:(0,A.jsx)(Nc,{}),error:G,maxlength:Bc,value:K,type:"text",style:X,onFocus:()=>pc({errorFieldName:"webhookUrlErrorMessage"}),onChange:e=>{ai.setState({...ai.state,webhookUrl:e.target.value,webhookUrlTested:!1})},onBlur:e=>{dc(e.target.value)},disabled:y,showCharacterCounter:void 0===G,right:(0,A.jsx)(zc,{})})})]})]}),(0,A.jsxs)("div",{style:u.remainingSections,children:[(0,A.jsx)(Fc,{intl:l,disabled:y,numberOfVisibleLinks:k,setNumberOfVisibleLinks:T}),(0,A.jsx)(wc,{onboardingStatus:P,setOnboardingStatus:L})]}),(0,A.jsx)("div",{style:u.submitSection,children:(0,A.jsx)(_r().u,{variant:"dark",disabled:ee,onClick:async()=>{w(!0);const{initialValues:e,...t}=ai.state;if(Q>0)_a().Rt({element:m.current,environment:c,options:{behavior:"smooth"}});else if(await async function(e){var t,a;const{environment:i,creator:r,onSuccess:n}=e,o={name:r.name.trim(),handle:r.handle.trim(),creatorDescription:null===(t=r.creatorDescription)||void 0===t?void 0:t.trim(),links:r.links.map((e=>Ht().s8(e.trim(),"/"))).filter((e=>e.length>0)),contactEmail:null===(a=r.contactEmail)||void 0===a?void 0:a.trim(),image:r.image,coverImage:r.coverImage};try{sc({creator:o,usernameAllowlist:cs().default.getConfigKey("creator_profile_allowlist","usernames"),nameAllowlist:cs().default.getConfigKey("creator_profile_allowlist","names")})}catch(d){if((0,ar().V4j)(d)){const e=(0,st().DX)(O().A.getIntl(),d.body);if(e)return void S().f1(e)}}const s={...o,name:(0,lc().ZC)("production",o.name),handle:(0,lc().ZC)("production",o.handle)},l=await x().callApi({eventName:"submitTemplateCreator",environment:i,data:s});"success"!==l.type?S().Qg(l):l.data.success?(Va().A.setState({creatorId:l.data.creatorId}),null==n||n()):S().rG({message:"Failed to create or edit creator profile"})}({environment:c,creator:{...t,...!j&&{contactEmail:void 0}},onSuccess:()=>{!function(){const{name:e,handle:t,contactEmail:a,creatorDescription:i,links:r,image:n,coverImage:o,webhookUrl:s,webhookUrlTested:l}=ai.state,d=gc(r.filter((e=>Boolean(e)))),c={name:e,handle:t,contactEmail:a,creatorDescription:i,links:d,image:n,coverImage:o,webhookUrl:s,webhookUrlTested:l};ai.setState({...ai.state,links:d,initialValues:{...c}})}(),T(1),"create"!==a?C().D6({label:(0,A.jsx)(_c,{})}):(C().D6({label:(0,A.jsx)(Ac,{})}),g("/profile/templates",!0))}}),null!=s&&s.id&&D){const e=new(Bt().sV)(c,{table:Nd().XX,id:s.id});Kd().createAndCommit({userAction:"creatorProfile.updateWebhookUrl",environment:c,canUndo:!0,perform:t=>{Kd().applyOperation({store:e,operation:{pointer:e.pointer,path:["webhook_config"],command:"update",args:{all:K}},transaction:t})}})}w(!1)},children:y?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(d().sA,{id:"creatorProfileForm.save.button.saving",defaultMessage:"Saving"}),(0,A.jsx)(Ji().A,{style:{marginLeft:4}})]}):(0,A.jsx)(d().sA,{id:"creatorProfileForm.save.button",defaultMessage:"Save"})})})]})}function Fc(e){const{intl:t,disabled:a,numberOfVisibleLinks:i,setNumberOfVisibleLinks:r}=e,o=Vc(),s=Hc(),{links:l,linksErrorMessage:d}=(0,n().K8)((()=>{const{links:e,linksErrorMessage:t}=ai.state;return{links:e,linksErrorMessage:t}}),[]),c=function(e){const t=[...e];for(;t.length>0&&""===t[t.length-1];)t.pop();return t}(l);let u=c;return i>c.length?u=[...c,...Ht().Hn(i-c.length,Ht().dY(""))]:r(c.length),(0,A.jsxs)("div",{style:s.linksInputContainer,children:[(0,A.jsxs)("div",{style:s.linksTitleSection,children:[(0,A.jsx)("div",{style:s.sectionTitle,children:t.formatMessage(Oc.links)}),(0,A.jsx)("div",{style:s.linksSubTitle,children:t.formatMessage(Oc.linksHelperText)})]}),u.map(((e,i)=>(0,A.jsx)(Pr().o,{htmlLabel:`link-${i}`,format:Br().C.Default,label:t.formatMessage(Oc.link,{number:i+1}),error:d[i],value:e,placeholder:"https://",type:"url",style:{...o.textInput,...a?o.disabledInput:{}},onFocus:()=>pc({errorFieldName:"linksErrorMessage",linkIndex:i}),onChange:e=>{ai.setState({...ai.state,links:l.map(((t,a)=>a===i?e.target.value:t))})},onBlur:e=>function(e,t){cc({value:e,validationFunction:nc,fieldName:"linksErrorMessage",linkIndex:t})}(e.target.value,i),disabled:a},`link-${i}`))),(0,A.jsx)("div",{style:s.linksAddButton,children:(0,A.jsx)(Xe().A,{size:"lg",onClick:()=>{i>=5||(i>=c.length?r(i+1):r(c.length+1))},disabled:u.length>=5,children:t.formatMessage(Oc.addLinkButtonLabel)})})]})}function Uc(e){const{checked:t,onChange:a,disabled:i,disallowTogglingOff:r}=e,n=Vc();return(0,A.jsx)(er().A,{name:(0,A.jsx)(d().sA,{defaultMessage:"Let people email me",id:"creatorProfileForm.allowPeopleToEmailMe"}),htmlLabel:"emailToggle",children:(0,A.jsx)(Na().A,{placement:Wo().W.Right,renderTooltip:()=>(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Regular",colorName:"contrastPrimary",children:(0,A.jsx)(d().sA,{id:"creatorProfileForm.email.tooltip",defaultMessage:"You must maintain a public email address as a Stripe verified seller"})}),render:e=>(0,A.jsx)("div",{...e,style:n.contactEmailToggle,children:(0,A.jsx)(Lr,{isActive:t,onClick:a,disabled:i||r})}),disableTooltip:!r})})}function Nc(){const e=(0,d().tz)(),t=Hc();return(0,A.jsxs)("div",{style:t.webhookUrlLabel,children:[e.formatMessage(Oc.webhookUrl),(0,A.jsx)(Na().A,{placement:Wo().W.Bottom,allowHover:!0,delayThreshold:400,closeDelay:2e3,renderTooltip:()=>(0,A.jsxs)("div",{style:t.webhookUrlTooltip,children:[(0,A.jsx)(d().sA,{id:"creatorProfileForm.webhookUrl.tooltip",defaultMessage:"Register to receive Marketplace notifications."}),(0,A.jsx)(ha().A,{href:no().JZ.marketplaceWebhookLearnMore,external:!0,disableUnderline:!0,children:(0,A.jsx)(d().sA,{id:"creatorProfileForm.webhookUrl.tooltip.learnMore",defaultMessage:"Learn more →"})})]}),render:e=>(0,A.jsx)("div",{...e,children:(0,A.jsx)(we().Q,{iconGroup:Od().H,variantName:"small",colorName:"tertiary"})})})]})}function zc(){const e=Hc(),[t,a]=(0,i.useState)(!1),o=(0,r().v3)(),[s,l]=(0,i.useState)(0),{webhookUrl:c,webhookUrlTested:u,webhookUrlErrorMessage:p}=(0,n().O$)(ai),g=(0,d().tz)();return(0,A.jsx)(ve().A,{style:e.webhookTestButton,onClick:async()=>{if(dc(c),(0,V().O9)(p))return;const e=Date.now();if(e-s<wd().Xb)ai.setState({...ai.state,webhookUrlErrorMessage:g.formatMessage(Oc.webhookTestButtonRateLimit)});else{l(e),a(!0);try{for await(const e of(0,nt().UT)(o,qd,{webhookUrl:c},{spaceIds:[]})){if(e.error){ai.setState({...ai.state,webhookUrlErrorMessage:g.formatMessage(Oc.webhookTestButtonError)});break}if(e.value.error&&e.value.statusCode){ai.setState({...ai.state,webhookUrlErrorMessage:`${g.formatMessage(Oc.webhookTestButtonInputError)} ${e.value.statusCode} (${e.value.error})`});break}ai.setState({...ai.state,webhookUrlTested:!0})}}finally{a(!1)}}},disabled:t||u,hoveredStyle:e.webhookTestButtonHovered,children:t?(0,A.jsxs)("div",{style:e.webhookTestInProgressButton,children:[(0,A.jsx)(Ji().A,{}),(0,A.jsx)(d().sA,{id:"creatorProfile.testWebhookUrlInProgressButton",defaultMessage:"Testing"})]}):u?(0,A.jsxs)("div",{style:e.webhookTestValidatedButton,children:[(0,A.jsx)(we().Q,{iconGroup:kt().a,variantName:"mini",colorName:"bluePrimary"}),(0,A.jsx)(d().sA,{id:"creatorProfile.WebhookUrlValidatedButton",defaultMessage:"Validated"})]}):(0,A.jsx)(d().sA,{id:"creatorProfile.testWebhookUrlButton",defaultMessage:"Test"})})}function Vc(){return(0,o().IS)((e=>({textInput:{background:"transparent",fontSize:14,borderRadius:tr().A.borderRadius,padding:"9px"},disabledInput:{color:e.palette.gray[400],background:e.palette.gray[30],cursor:"not-allowed"},textContainer:{padding:"1px"},helperText:{fontSize:12,color:e.text.tertiary},contactEmailToggle:{width:"fit-content"},inlineLink:{color:e.text.primary,fontWeight:L().Wy.bold}})),[])}function Hc(){return(0,o().IS)((e=>({webhookUrlLabel:{display:"flex",flexDirection:"row",alignItems:"center",gap:4},webhookInput:{display:"flex",flexDirection:"row"},subheaderContainer:{display:"flex",flexDirection:"column"},webhookUrlTooltip:{display:"flex",flexDirection:"row",alignItems:"center",gap:4},webhookTestButton:{color:e.blueColor,paddingLeft:"7px",paddingRight:"7px",borderRadius:"4px"},webhookTestInProgressButton:{color:e.text.secondary,display:"flex",flexDirection:"row",gap:"8px",alignItems:"center"},webhookTestValidatedButton:{display:"flex",flexDirection:"row",gap:"8px",alignItems:"center"},webhookTestButtonHovered:{background:e.palette.uiBlue[200]},viewProfileText:{color:e.palette.blue[500],fontSize:"13px"},noPublishedTemplatesText:{color:"rgba(17, 17, 17, 0.5)",fontSize:"13px"},sectionTitle:{fontSize:24,fontWeight:L().Wy.semibold},basicInformation:{marginTop:54,display:"flex",flexDirection:"column",marginBottom:72},creatorProfileContainer:{display:"flex",flexDirection:"column",gap:32},avatarUploadContainer:{marginTop:32,marginBottom:24},emailContainer:{display:"flex",flexDirection:"column",gap:"8px"},submitSection:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",gap:12,marginTop:40,background:"white",padding:"10px 0 20px 0"},linksInputContainer:{display:"flex",flexDirection:"column",width:"100%",gap:24,marginBottom:24},linksTitleSection:{display:"flex",flexDirection:"column",gap:2},linksSubTitle:{fontSize:15},creatorDescriptionContainer:{display:"flex",flexDirection:"column",gap:4},linksAddButton:{width:"fit-content"},remainingSections:{display:"flex",flexDirection:"column",gap:72}})),[])}const Oc=(0,d().YK)({webhookTestButtonInputError:{id:"creatorProfileForm.webhookTestButtonInputError",defaultMessage:"Webhook URL destination returned an error:"},webhookTestButtonError:{id:"creatorProfileForm.webhookTestButtonError",defaultMessage:"Something went wrong"},webhookTestButtonRateLimit:{id:"creatorProfileForm.webhookTestButtonRateLimit",defaultMessage:"Please wait at least one minute before testing your webhook again."},webhookUrl:{id:"creatorProfileForm.creatorDetail.form.webhookUrl",defaultMessage:"Webhook URL"},notionAccount:{id:"creatorProfileForm.creatorDetail.form.notionAccount",defaultMessage:"Notion account"},displayName:{id:"creatorProfileForm.creatorDetail.form.name",defaultMessage:"Display name *"},displayNamePlaceholderWithIntegration:{id:"creatorProfileForm.creatorDetail.form.namePlaceholderWithIntegration",defaultMessage:"This is the name that will be associated on your templates and integrations."},displayNameHelperText:{id:"creatorProfileForm.creatorDetail.form.nameHelperText",defaultMessage:"Can be different from your Notion account name. This can be the name of your company or organization."},handle:{id:"creatorProfileForm.creatorDetail.form.handle",defaultMessage:"Creator handle *"},email:{id:"creatorProfileForm.creatorDetail.form.email",defaultMessage:"Email"},emailHelperText:{id:"creatorProfileForm.creatorDetail.form.emailHelperText",defaultMessage:"Can be different from your Notion email. Will be publicly displayed."},creatorDescription:{id:"creatorProfileForm.creatorDetail.form.creatorDescription",defaultMessage:"A short description of yourself *"},links:{id:"creatorProfileForm.creatorDetail.form.links",defaultMessage:"Contact"},linksHelperText:{id:"creatorProfileForm.creatorDetail.form.linksHelperText",defaultMessage:"Display up to 5 links on your Profile."},link:{id:"creatorProfileForm.creatorDetail.form.link",defaultMessage:"Link {number}"},addLinkButtonLabel:{id:"creatorProfileForm.creatorDetail.form.addLinkButtonLabel",defaultMessage:"Add a Link"}});function Wc(){const e=(0,fe().x)(),t=function(){const{creatorId:e}=(0,n().O$)(Va().A),t=(0,r().v3)();return(0,n().K8)((()=>{if(!e)return null;const a=(0,Vd().f)({table:Nd().XX,parentTable:zd().Hi,parentId:e}),i=new(Hd().s)(t,{table:Nd().XX,id:a});if(!(0,V().O9)(i))return null;const r=i.id,n=i.getWebhookConfig();return r?{id:r,webhook_config:n}:null}),[e,t])}(),{profileFormType:a}=(0,n().K8)((()=>Ae.state),[]);(0,i.useEffect)((()=>{e&&Ae.setState({profileFormType:"edit"})}),[e]);const s=(0,o().IS)((e=>({creatorInfoContainer:{position:"relative",flex:"400px",gap:"12px"},creatorInfoPrimaryHeader:{fontWeight:L().Wy.medium,fontSize:30,color:c().Ay.uiBlack},profileHandle:{color:c().Ay.frontTextMedium,fontSize:13.5},creatorInfoDescription:{fontSize:15,maxWidth:"600px"},creatorInfoCount:{color:c().Ay.frontTextMedium,fill:c().Ay.frontTextMedium,display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"6px",fontSize:13.5}})),[]);return e||null!==a?(0,A.jsx)("section",{style:s.creatorInfoContainer,children:(0,A.jsx)(Rc,{type:a,templateCreatorProfile:e,marketplaceSellerProfile:t})}):(0,A.jsx)(qc,{showCreatorProfileForm:()=>Ae.setState({profileFormType:"create"})})}function qc(e){const{showCreatorProfileForm:t}=e,a=(0,o().IS)((e=>({creatorInfoEmptyStateHeader:{fontSize:36,color:e.text.primary,fontWeight:L().Wy.semibold},creatorInfoEmptyStateDescription:{fontSize:16,color:e.text.primary},creatorInfoEmptyStateSubdescription:{fontSize:13.5,color:e.text.secondary}})),[]);return(0,A.jsx)(ke,{showCreatorProfileForm:t,header:(0,A.jsx)("div",{style:a.creatorInfoEmptyStateHeader,children:(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.creatorProfile.header",defaultMessage:"Creator Profile"})}),description:(0,A.jsx)("div",{style:a.creatorInfoEmptyStateDescription,children:(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.creatorProfile.description",defaultMessage:"Create a Creator Profile to submit and manage Notion templates."})}),subdescription:(0,A.jsx)("div",{style:a.creatorInfoEmptyStateSubdescription,children:(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.creatorProfile.subdescription",defaultMessage:"Your Creator Profile is separate from your Notion user account."})})})}var Kc=()=>a(660237),Gc=()=>a(803960);function Zc(e){const{items:t,label:a,width:r,required:n,displayValue:o,disabled:s,errorMessage:l,value:d,onSelect:c,onClick:u}=e,p=(0,i.useCallback)((e=>o?o(e):e),[o]),g=(0,i.useCallback)((e=>{null==c||c(e)}),[c]),m=(0,i.useCallback)((e=>(0,A.jsx)(vt().A,{...e,title:p(e.value)})),[p]),f=(0,i.useCallback)((e=>(0,A.jsxs)(Xe().A,{...e,style:{width:r??"100%"},children:[(0,A.jsx)("span",{style:{width:"100%"},children:(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Regular",children:d?p(d):""})}),(0,A.jsx)(Je().I,{size:"xs",icon:Gc().arrowChevronSingleDownIcon,color:"lightGraySecondary",weight:"bold"})]})),[p,d,r]);return(0,A.jsxs)(xo().Y1,{direction:"vertical",gap:8,children:[(0,A.jsxs)(xo().Y1,{gap:2,direction:"horizontal",children:[(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Regular",children:a}),n&&(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Regular",colorName:"uiRedPrimary",children:"*"})]}),(0,A.jsx)(xt().A,{getKey:e=>e,selectedItem:d,disabled:s,onSelect:g,items:t,width:"fit-content",renderItem:m,renderOrigin:f,onClick:u}),l&&(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Regular",colorName:"uiRedPrimary",children:l})]})}function $c(e){const{valueName:t,items:a,label:r,width:o,required:s,displayValue:l}=e,{formData:d,errorMessages:c,isSubmitting:u}=(0,n().O$)(Oa),p=d[t],g=c[t],m=(0,i.useCallback)((e=>{qa(t,e)}),[t]),f=(0,i.useCallback)((()=>{Ga(t)}),[t]);return(0,A.jsx)(Zc,{items:a,label:r,width:o,required:s,value:p,onSelect:m,disabled:u,errorMessage:g,displayValue:l,onClick:f})}function Yc(){const e=(0,d().tz)(),t=new Map((0,Kc()._D)(e).map((e=>[e.countryCode,e.name])));return(0,A.jsx)($c,{valueName:"businessLocation",items:Array.from(t.keys()),label:e.formatMessage({id:"creatorProfile.seller.requestForm.businessLocationLabel",defaultMessage:"Where is your business located?"}),displayValue:e=>t.get(e)??"",required:!0})}function Qc(e){const{valueName:t,label:a,placeholder:i,required:r}=e,{formData:o,errorMessages:s,isSubmitting:l}=(0,n().O$)(Oa),d=o[t],c=s[t];return(0,A.jsx)(Pr().o,{htmlLabel:t,value:d,error:c,format:Br().C.Default,placeholder:i,type:"text",required:r,onFocus:()=>Ga(t),onChange:e=>{qa(t,e.target.value)},onBlur:e=>{e.target.value},disabled:l,label:a})}function Jc(e){const{valueName:t,label:a,placeholder:i,required:r}=e,{formData:o,errorMessages:s,isSubmitting:l}=(0,n().O$)(Oa),d=o[t],c=s[t];return(0,A.jsx)(Pr().o,{htmlLabel:t,value:d,error:c,format:Br().C.Default,placeholder:i,type:"text",textarea:!0,maxlength:280,required:r,onFocus:()=>Ga(t),onChange:e=>{qa(t,e.target.value)},onBlur:e=>{e.target.value},disabled:l,label:a})}const Xc=(0,d().YK)({none:{id:"creatorProfile.seller.requestForm.certifications.none",defaultMessage:"None"},ambassador:{id:"creatorProfile.seller.requestForm.certifications.ambassador",defaultMessage:"Notion Ambassador"},campusLeader:{id:"creatorProfile.seller.requestForm.certifications.campusLeader",defaultMessage:"Notion Campus Leader"},champion:{id:"creatorProfile.seller.requestForm.certifications.champion",defaultMessage:"Notion Champion"},consultant:{id:"creatorProfile.seller.requestForm.certifications.consultant",defaultMessage:"Notion Certified Consultant"},other:{id:"creatorProfile.seller.requestForm.certifications.other",defaultMessage:"Other"}});function eu(){const e=(0,d().tz)(),{formData:t}=(0,n().O$)(Oa),a=t.communitiesAndCerts;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)($c,{valueName:"communitiesAndCerts",items:Object.keys(Xc),label:e.formatMessage({id:"creatorProfile.seller.requestForm.certificationsLabel",defaultMessage:"Are you a part of any Notion communities or have certifications?"}),displayValue:t=>e.formatMessage(Xc[t])}),"other"===a?(0,A.jsx)(Qc,{valueName:"otherCertifications",label:e.formatMessage({id:"creatorProfile.seller.requestForm.otherCertificationsLabel",defaultMessage:"Other"})}):void 0]})}function tu(e){const{sectionName:t,header:a,required:r}=e,o=(0,d().tz)(),{formData:s}=(0,n().O$)(Oa),l=(0,i.useMemo)((()=>[`${t}Value-1`,`${t}Value-2`,`${t}Value-3`,`${t}Value-4`,`${t}Value-5`]),[t]),c=(0,i.useCallback)((()=>{for(const e of l)if(void 0===s[e]){qa(e,"");break}}),[s,l]),u=[l[0]];for(let i=1;i<l.length&&void 0!==s[l[i]];i++)u.push(l[i]);return(0,A.jsxs)(xo().Y1,{gap:8,align:"top-left",direction:"vertical",children:[(0,A.jsxs)(xo().Y1,{gap:2,direction:"horizontal",children:[(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Regular",children:a}),r&&(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Regular",colorName:"uiRedPrimary",children:"*"})]}),u.map(((e,t)=>(0,A.jsx)(au,{valueName:e,index:t},t))),(0,A.jsx)(Xe().A,{size:"lg",onClick:c,disabled:u.length>=5,children:o.formatMessage(iu.addLinkButtonLabel)})]})}function au(e){const{valueName:t,index:a}=e,i=(0,d().tz)(),{formData:r,errorMessages:o,isSubmitting:s}=(0,n().O$)(Oa),l=r[t],c=o[t];return(0,A.jsx)(Pr().o,{htmlLabel:`link-${a}`,format:Br().C.Default,label:i.formatMessage(iu.link,{number:a+1}),error:c,value:l,placeholder:"https://",type:"url",onFocus:()=>{Ga(t)},onChange:e=>{qa(t,e.target.value)},onBlur:e=>{e.target.value},disabled:s})}const iu=(0,d().YK)({addLinkButtonLabel:{id:"creatorProfile.seller.requestForm.addLinkButtonLabel",defaultMessage:"Add link"},link:{id:"creatorProfile.seller.requestForm.linkLabel",defaultMessage:"Link {number}"}}),ru=(0,d().YK)({yes:{id:"creatorProfile.seller.requestForm.currentlySellTemplates.yes",defaultMessage:"Yes"},no:{id:"creatorProfile.seller.requestForm.currentlySellTemplates.no",defaultMessage:"No"}});function nu(){const e=(0,d().tz)(),{formData:t}=(0,n().O$)(Oa),a=t.currentlySellTemplates;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)($c,{valueName:"currentlySellTemplates",items:Object.keys(ru),label:e.formatMessage({id:"creatorProfile.seller.requestForm.currentlySellTemplatesLabel",defaultMessage:"Do you currently sell templates?"}),required:!0,displayValue:t=>e.formatMessage(ru[t])}),"yes"===a?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(tu,{sectionName:"templateLinks",header:e.formatMessage({id:"creatorProfile.seller.requestForm.templateLinksHeader",defaultMessage:"Please share links to your listings (on marketplaces or your own site)."}),required:!0}),(0,A.jsx)(Qc,{valueName:"templateEarnings",label:e.formatMessage({id:"creatorProfile.seller.requestForm.templateEarningsLabel",defaultMessage:"How much have you earned in template sales in the last year?"}),required:!0})]}):"no"===a?(0,A.jsx)(Qc,{valueName:"targetAudience",label:e.formatMessage({id:"creatorProfile.seller.requestForm.targetAudienceLabel",defaultMessage:"What type of templates do you plan to sell? Who are they for?"}),required:!0}):void 0]})}function ou(){const e=(0,d().tz)();return(0,A.jsx)(Jc,{valueName:"otherInfo",label:e.formatMessage({id:"creatorProfile.seller.requestForm.otherInfoLabel",defaultMessage:"Is there anything else you would like us to know?"})})}const su=(0,d().YK)({no:{id:"creatorProfile.seller.requestForm.otherNotionProducts.no",defaultMessage:"I don’t sell any other Notion-related products"},consulting:{id:"creatorProfile.seller.requestForm.otherNotionProducts.consulting",defaultMessage:"Consulting services"},courses:{id:"creatorProfile.seller.requestForm.otherNotionProducts.courses",defaultMessage:"Courses"},content:{id:"creatorProfile.seller.requestForm.otherNotionProducts.content",defaultMessage:"Content (e.g. blog, newsletter)"},integrations:{id:"creatorProfile.seller.requestForm.otherNotionProducts.integrations",defaultMessage:"Integrations"},widgets:{id:"creatorProfile.seller.requestForm.otherNotionProducts.widgets",defaultMessage:"Widgets"},community:{id:"creatorProfile.seller.requestForm.otherNotionProducts.community",defaultMessage:"Access to a community"}});function lu(){const e=(0,d().tz)();return(0,A.jsx)($c,{valueName:"otherNotionProducts",items:Object.keys(su),label:e.formatMessage({id:"creatorProfile.seller.requestForm.otherNotionProductsLabel",defaultMessage:"Do you sell or create any other products or services related to Notion?"}),required:!0,displayValue:t=>e.formatMessage(su[t])})}function du(){const e=(0,d().tz)();return(0,A.jsx)(tu,{sectionName:"otherLinks",header:e.formatMessage({id:"creatorProfile.seller.requestForm.otherLinksHeader",defaultMessage:"Share up to 5 links that showcase your brand - website, social media, or other relevant pages."}),required:!0})}function cu(){const{formData:e,errorMessages:t}=(0,n().O$)(Oa),a=e.termsConditions,i=t.termsConditions,r=(0,o().IS)((()=>({link:{textDecoration:"underline",display:"inline"},checkbox:{marginTop:4}})),[]);return(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Regular",children:(0,A.jsxs)(xo().Y1,{direction:"horizontal",gap:8,children:[(0,A.jsx)(os().T,{style:r.checkbox,size:14,checked:"true"===a,onClick:()=>{qa("termsConditions","true"===a?"false":"true")}}),(0,A.jsxs)("div",{children:[(0,A.jsx)(d().sA,{id:"creatorProfile.seller.requestForm.termsConditions",defaultMessage:"Please agree to our terms and conditions. By checking this box, you agree to <link>Paid Template Creator Terms</link> as applicable to my participation in the Paid Template Program.",values:{link:e=>(0,A.jsx)(Zt().A,{href:"https://notion.notion.site/Notion-Marketplace-Terms-of-Use-ec93f618c12d4f08b75b9132a7e55b33",style:r.link,children:e})}}),i?(0,A.jsx)(yt().D,{styleName:"UISmall-12px/Regular",colorName:"uiRedPrimary",children:i}):null]})]})})}function uu(){const{isOpen:e}=(0,n().O$)(Oa),t=(0,i.useCallback)((()=>{Oa.setState({...Oa.state,isOpen:!1})}),[]);return(0,A.jsx)(ei().s,{isOpen:e,onDismiss:t,areaConstraint:{width:{type:"fixed",length:720}},render:()=>(0,A.jsx)(pu,{})})}function pu(){return(0,A.jsxs)(xo().Y1,{padding:"32px",gap:32,style:{overflowY:"auto"},children:[(0,A.jsx)(xo().Y1,{align:"center",children:(0,A.jsx)(yt().D,{styleName:"UITitle-22px/Semibold",children:(0,A.jsx)(d().sA,{id:"creatorProfile.seller.requestForm.title",defaultMessage:"Apply to sell with Notion"})})}),(0,A.jsxs)(xo().Y1,{direction:"vertical",gap:24,children:[(0,A.jsx)(gu,{}),(0,A.jsxs)(xo().Y1,{direction:"vertical",gap:16,children:[(0,A.jsx)(nu,{}),(0,A.jsx)(lu,{}),(0,A.jsx)(eu,{}),(0,A.jsx)(Yc,{}),(0,A.jsx)(du,{}),(0,A.jsx)(ou,{}),(0,A.jsx)(cu,{}),(0,A.jsx)(mu,{})]})]}),(0,A.jsx)(fu,{})]})}function gu(){const e=(0,o().IS)((e=>({link:{textDecoration:"underline",display:"inline"}})),[]);return(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Regular",children:(0,A.jsxs)(xo().Y1,{direction:"vertical",gap:8,children:[(0,A.jsx)("div",{children:(0,A.jsx)(d().sA,{id:"creatorProfile.seller.requestForm.description1",defaultMessage:"Become a verified creator and start selling templates directly through Notion. Once approved, you’ll be able to connect Stripe and accept payments in the Notion Template Marketplace."})}),(0,A.jsx)("div",{children:(0,A.jsx)(d().sA,{id:"creatorProfile.seller.requestForm.description2",defaultMessage:"To get started, complete this form to begin the verification process. Learn more about selling with Notion <link>here</link>. We’ll review both this form and your creator profile as part of the approval process.",values:{link:t=>(0,A.jsx)(Zt().A,{href:"https://www.notion.com/help/selling-on-marketplace#get-verified-for-payments-with-notion",external:!0,style:e.link,children:t})}})})]})})}function mu(){const e=(0,o().IS)((e=>({link:{textDecoration:"underline",display:"inline"}})),[]);return(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Regular",children:(0,A.jsx)(d().sA,{id:"creatorProfile.seller.requestForm.description3",defaultMessage:"Have questions? Reach out to {email}.",values:{email:(0,A.jsx)(Zt().A,{href:"mailto:templates@notion.com",style:e.link,children:"templates@notion.com"})}})})}function fu(){const e=(0,r().v3)(),t=(0,d().tz)(),{isSubmitting:a}=(0,n().O$)(Oa),o=(0,i.useCallback)((()=>{$a({environment:e,intl:t})}),[e,t]);return(0,A.jsxs)(xo().Y1,{align:"end",direction:"horizontal",gap:"auto",children:[(0,A.jsx)("div",{}),(0,A.jsx)(_r().u,{variant:"dark",onClick:o,isLoading:a,children:(0,A.jsx)(d().sA,{id:"creatorProfile.seller.requestForm.submitButton",defaultMessage:"Submit"})})]})}const hu={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,A.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M5.406 5.58v.987a1 1 0 0 0 .293.707l2.78 2.78a.5.5 0 0 1 0 .708l-.315.316a1 1 0 0 0-.293.707v.834a1 1 0 0 0 .293.707l.376.377a1 1 0 0 1 .293.707v.302a.888.888 0 0 0 1.608.52l2.037-2.811a1 1 0 0 0 .19-.587v-1.421a1 1 0 0 0-.273-.688l-.466-.492a1 1 0 0 0-.726-.312H9.71a.585.585 0 1 1 .239-1.118l.313.14a.807.807 0 0 0 1.138-.736v-.664a1 1 0 0 1 .412-.81l1.568-1.14a6.375 6.375 0 1 1-7.973.986"})},bu=(0,Fe().wt)("globeAmericas",hu);function vu(){const e=(0,o().IS)((e=>({readFaq:{cursor:"pointer",color:e.text.primary,fontWeight:L().Wy.semibold}})),[]),{setView:t}=Ze();return(0,A.jsx)("span",{style:e.readFaq,onClick:()=>t("/profile/templates/faq"),children:(0,A.jsx)("a",{children:(0,A.jsx)(d().sA,{defaultMessage:"Read FAQ",id:"creatorProfile.templates.draftSubtitleLink"})})})}var yu=()=>a(130382);const xu=(0,Fe().wt)("circlePlus",{viewBox:"0 0 22 22",svg:(0,A.jsx)("path",{d:"M11 22C17.0326 22 22 17.0326 22 11C22 4.97795 17.0221 0 10.9895 0C4.9674 0 0 4.97795 0 11C0 17.0326 4.9674 22 11 22ZM5.83221 11.0105C5.83221 10.3461 6.30681 9.87152 6.96069 9.87152H9.88207V6.95014C9.88207 6.30681 10.3461 5.83221 10.9895 5.83221C11.6539 5.83221 12.1285 6.30681 12.1285 6.95014V9.87152H15.0499C15.6932 9.87152 16.1678 10.3461 16.1678 11.0105C16.1678 11.6539 15.6932 12.1179 15.0499 12.1179H12.1285V15.0499C12.1285 15.6932 11.6539 16.1572 10.9895 16.1572C10.3461 16.1572 9.88207 15.6932 9.88207 15.0499V12.1179H6.96069C6.30681 12.1179 5.83221 11.6539 5.83221 11.0105Z"})});var Su=()=>a(827570);function wu(e){const t=(0,o().IS)((()=>({loadMoreContainer:{display:"flex",justifyContent:"center",marginTop:"24px"}})),[]),[a,s]=(0,i.useState)(1),c=(0,r().v3)(),{isStatsigReady:u,isFeatureEnabled:p}=(0,pt().O)("self_serve_localization_frontend"),{isFeatureEnabled:g}=(0,pt().O)("template_creator_blocklist"),{name:m}=Ze(),f=(0,n().K8)((()=>{var e,t;const a=null===(e=b().default.state.currentUserSettingsStore)||void 0===e?void 0:e.id,i=oe().A.state;if(!a)return[];return(null===(t=i.draftTemplates[a])||void 0===t?void 0:t.templates)||[]}),[]),h=(0,n().K8)((()=>{var e,t;const a=null===(e=b().default.state.currentUserSettingsStore)||void 0===e?void 0:e.id;if(!a)return{};return null===(t=oe().A.state.draftTemplates[a])||void 0===t?void 0:t.templateDraftsByContentfulId}),[]),v=(0,n().K8)((()=>{var e,t;const a=null===(e=b().default.state.currentUserSettingsStore)||void 0===e?void 0:e.id;if(!a)return{};return null===(t=oe().A.state.draftTemplates[a])||void 0===t?void 0:t.contentfulIdToDefaultLocaleTemplateId}),[]),{totalUserDraftTemplatesCount:y,currentFetchedTemplateCount:S}=(0,n().K8)((()=>{var e;const t=null===(e=b().default.state.currentUserSettingsStore)||void 0===e?void 0:e.id;if(void 0===t)return{totalUserDraftTemplatesCount:0,currentFetchedTemplateCount:0};const a=oe().A.state.draftTemplates[t],i=(null==a?void 0:a.count)||0,r=(null==a?void 0:a.templates)||[];return{totalUserDraftTemplatesCount:i,currentFetchedTemplateCount:null==r?void 0:r.reduce(((e,t)=>e+t.length),0)}}),[]),w=y>S;return(0,l().Yb)((async()=>u&&m?async function(e){var t;const{environment:a,page:i,groupByContentfulId:r}=e,n=a.currentUser.id,o=oe().A.state.draftTemplates;if(!n||null!=o&&null!==(t=o[n])&&void 0!==t&&t.templates[i-1])return;const s=await x().callApi({eventName:"getTemplateDrafts",environment:a,data:{offset:se*(i-1),limit:se,includeCount:!0,groupByContentfulId:r}});if("success"===s.type){const e=s.data.templateDraftIds,t=s.data.templateDraftsByContentfulId,a=s.data.contentfulIdToDefaultLocaleTemplateId;if(0===e.length)return;const r={...oe().A.state,draftTemplates:{...o,[n]:{count:s.data.count||0,templates:[...o[n]?o[n].templates.slice(0,i):[],e,...o[n]?o[n].templates.slice(i):[]],templateDraftsByContentfulId:{...o[n]?o[n].templateDraftsByContentfulId:{},...t},contentfulIdToDefaultLocaleTemplateId:{...o[n]?o[n].contentfulIdToDefaultLocaleTemplateId:{},...a}}}};oe().A.setState(r)}}({environment:c,page:a,groupByContentfulId:p}):async()=>Promise.resolve({})),[c,a,u,p,m]),(0,A.jsxs)("section",{children:[(0,A.jsx)(De().y,{header:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.draftHeader",defaultMessage:"Drafts"}),subHeader:g?(0,A.jsx)(d().sA,{id:"creatorProfile.templates.draftSubtitle.banned",defaultMessage:"You are currently ineligible to create new templates."}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(d().sA,{defaultMessage:"Start a template and submit for approval.",id:"creatorProfile.templates.draftSubtitle"})," ",(0,A.jsx)(vu,{})]}),size:"medium"}),u?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(Sn,{children:[g?null:(0,A.jsxs)(gn,{href:"/profile/templates/form/new",shouldShowHoverBackground:!1,children:[(0,A.jsx)(mn,{node:(0,A.jsx)(_u,{})}),(0,A.jsx)(bn,{title:(0,A.jsx)(Cu,{})})]}),c.currentUser.id?f.map((e=>e.map((e=>(0,A.jsx)(ju,{templateId:e,templateDraftGroupsByContentfulId:h,contentfulIdToDefaultLocaleTemplateId:v},e))))):null]}),w?(0,A.jsx)("div",{style:t.loadMoreContainer,children:(0,A.jsx)(_r().u,{variant:"light",onClick:()=>s((e=>e+1)),children:(0,A.jsx)(d().sA,{id:"creatorProfile.draftTemplate.loadMore",defaultMessage:"Load more"})})}):null]}):(0,A.jsx)("div",{children:(0,A.jsx)(Ji().A,{})})]})}function Cu(){const{isHovered:e,isTouchDevice:t}=dn(),a=(0,o().IS)((()=>({draftTemplatesSubtitle:{color:c().Ay.frontTextLight},draftTemplatesSubtitleHovered:{color:c().Ay.black,fontWeight:L().Wy.medium}})),[]);return(0,A.jsx)("span",{style:e&&!t?a.draftTemplatesSubtitleHovered:a.draftTemplatesSubtitle,children:(0,A.jsx)(d().sA,{defaultMessage:"Start a New Template",id:"creatorProfile.templates.newTemplateCTA"})})}function ju(e){var t;const{templateId:a,templateDraftGroupsByContentfulId:i,contentfulIdToDefaultLocaleTemplateId:o}=e,s=(0,r().v3)(),{isFeatureEnabled:l}=(0,pt().O)("self_serve_localization_frontend"),{setView:c}=Ze(),u=(0,n().K8)((()=>{const e=new(Bt().x1)(s,{table:"template_draft",id:a});return{name:e.getName(),status:e.getStatus(),image:e.getCoverImage(),lastUpdatedAt:e.getLastUpdatedAt(),price:e.getPrice(),slug:e.getSlug(),isPublished:(e.getPublishedVersion()||0)>0,contentfulId:e.getContentfulId()}}),[s,a]),p=u.contentfulId,g=function(e){const t=(0,r().v3)(),{isFeatureEnabled:a}=(0,pt().O)("self_serve_localization_frontend");return(0,n().K8)((()=>e&&a?e.map((e=>{const a=new(Bt().x1)(t,{table:Su()._F,id:e});return{name:a.getName(),locale:a.getLocale(),id:e,status:a.getStatus()}})):[]),[t,e,a])}(p?null==i?void 0:i[p]:[]),m=function(e){const t=(0,r().v3)();return(0,n().K8)((()=>e?new(Bt().$x)(t,{table:"template",id:e}).getName():""),[t,e])}(p&&l?null==o?void 0:o[p]:void 0);if(u.isPublished)return null;const f=We("draft",a);return(0,A.jsxs)(gn,{href:l?void 0:f,onClick:l?()=>c(f):void 0,actions:(0,A.jsx)(vn,{children:"in_review"===u.status?(0,A.jsx)(zr,{href:`/profile/templates/form/draft/${a}`,children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.button.viewTemplateDraft",defaultMessage:"View Submission"})}):(0,A.jsx)(zr,{href:`/profile/templates/form/draft/${a}`})}),children:[(0,A.jsx)(mn,{imageSrc:null==u||null===(t=u.image)||void 0===t?void 0:t.url,node:null,topRightOverlay:(0,A.jsx)(xn,{templateStatus:u.status})}),(0,A.jsx)(bn,{title:(0,A.jsx)(yn,{templateName:l&&m?m:u.name||"",templateStatus:l?void 0:u.status}),subtitle:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Mu,{templatePrice:u.price,templateLastUpdatedAt:u.lastUpdatedAt,templateStatus:u.status}),l&&g.length>0&&(0,A.jsx)(an,{localizedTemplateDraftData:g,displaySection:"draft"})]})})]})}function Mu(e){const t=(0,d().tz)(),{templatePrice:a,templateLastUpdatedAt:i,templateStatus:r}=e,n=(0,o().IS)((()=>({draftTemplateSubtitleContainer:{display:"flex",alignItems:"center",gap:"5px",fontSize:"12px"},priceText:{fontWeight:L().Wy.medium,color:"rgba(0, 0, 0, 1)"},lastEditedText:{fontWeight:L().Wy.medium,color:"rgba(128, 128, 128, 1)"}})),[]);return(0,A.jsxs)("div",{style:n.draftTemplateSubtitleContainer,children:[void 0!==a&&(0,A.jsx)("span",{style:n.priceText,children:(0,A.jsx)(Lt().v,{cost:{currencyCode:"USD",amount:100*a},trailingZeroDisplay:"auto",intl:t})}),void 0!==a&&void 0!==i&&(0,A.jsx)(wn,{}),void 0!==i&&(0,A.jsx)("span",{style:n.lastEditedText,children:"rejected"===r?(0,A.jsx)(d().sA,{id:"creatorProfile.template.draft.lastRejected.label",defaultMessage:"Rejected {messageOfTimestampMs} ago",values:{messageOfTimestampMs:(0,yu().lH)(Date.now()-i,t)}}):(0,A.jsx)(d().sA,{id:"creatorProfile.template.draft.lastEdited.label",defaultMessage:"Last edited {messageOfTimestampMs} ago",values:{messageOfTimestampMs:(0,yu().lH)(Date.now()-i,t)}})}),(0,A.jsx)("span",{style:n.lastEditedText})]})}function _u(){const{isHovered:e,isTouchDevice:t}=dn(),a=(0,o().IS)((()=>({createTemplateCTA:{backgroundColor:"#F6F5F4",height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",color:c().Ay.frontTextLight},circlePlusIcon:{height:"30px",width:"30px"},circlePlusIconHovered:{color:"rgba(102, 102, 102, 1)"}})),[]),i={...a.circlePlusIcon,...e&&!t?a.circlePlusIconHovered:{}};return(0,A.jsx)("div",{style:a.createTemplateCTA,children:xu(i)})}var Au=()=>a(788941);function Iu(e){const{creatorId:t}=e,a=(0,r().v3)(),o=(0,d().tz)(),s=(0,fe().x)();(0,l().Yb)((async()=>{await async function(e){var t;const{locale:a,templateCreatorProfile:i,environment:r}=e,n=(null==i||null===(t=i.attributes)||void 0===t?void 0:t.pinned_templates)??[],o=await x().callApi({eventName:"getCreatorTemplates",environment:r,data:{locale:(0,v().H)(a),limit:y().v8,filterBy:{contentfulIds:n}}});if("success"===o.type){const e=o.data.templateIds;return oe().A.setState({...oe().A.state,pinnedTemplates:e}),!0}return!1}({locale:o,templateCreatorProfile:s,environment:a})}),[o,s,a]);const c=(0,n().K8)((()=>oe().A.state.pinnedTemplates),[]),u=(0,i.useCallback)((async(e,i)=>{await ce({environment:a,templateId:e,templateName:i,creatorId:t,type:"unpin"})}),[t,a]);return 0===c.length?null:(0,A.jsxs)("section",{children:[(0,A.jsx)(De().y,{size:"medium",header:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pinnedTemplatesHeader",defaultMessage:"{pinnedTemplatesCount} Pinned",values:{pinnedTemplatesCount:c.length}}),subHeader:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pinnedTemplatesSubheader",defaultMessage:"Pinned templates stay at the top of your profile, and appear in the order you pinned them."})}),(0,A.jsx)(Sn,{children:c.map((e=>(0,A.jsx)(ku,{templateId:e,unpinTemplate:u},`pinnedTemplateCard-${e}`)))})]})}function ku(e){var t;const{templateId:a,unpinTemplate:i}=e,r=Nr(a),n=(0,o().IS)((e=>({imageOverlayContainer:{position:"absolute",top:-6,left:-7},pinnedIconContainer:{height:20,width:20,borderRadius:"50%",backgroundColor:e.palette.orange[400],display:"flex",alignItems:"center",justifyContent:"center"},pinIcon:{width:7,height:11.38,color:e.white}})),[]);return(0,A.jsxs)(gn,{href:`/profile/templates/form/published/${a}`,actions:(0,A.jsxs)(vn,{children:[(0,A.jsx)(Tu,{unpinTemplate:i,templateId:a,templateName:r.name||""},`unpinPinnedTemplate-${a}`),(0,A.jsx)(zr,{href:`/profile/templates/form/published/${a}`})]}),children:[(0,A.jsx)(mn,{imageSrc:null==r||null===(t=r.image)||void 0===t?void 0:t.url,node:null,topLeftOverlay:(0,A.jsx)("div",{style:n.imageOverlayContainer,children:(0,A.jsx)("div",{style:n.pinnedIconContainer,children:(0,A.jsx)("span",{children:(0,Au().b)(n.pinIcon)})})})}),(0,A.jsx)(bn,{title:r.name,subtitle:(0,A.jsx)(Mn,{price:r.price,duplicationCount:r.numberDuplicates})})]})}function Tu(e){const{unpinTemplate:t,templateId:a,templateName:i}=e;return(0,A.jsx)(_().p,{isLightGray:!0,onClick:()=>t(a,i),children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pinnedTemplates.button.unpin",defaultMessage:"Unpin"})},`unpin-button-${a}`)}var Pu=()=>a(509630),Lu=()=>a(655649),Du=()=>a(20051);const Eu=(0,Fe().xh)("arrowTurnUpLeft",{default:{loader:()=>a.e(84360).then(a.bind(a,384360))},small:{loader:()=>a.e(33438).then(a.bind(a,933438))},mini:{loader:()=>a.e(83750).then(a.bind(a,683750))},large:{loader:()=>a.e(81750).then(a.bind(a,181750))}});var Bu=()=>a(266442),Ru=()=>a(174723),Fu=()=>a(85370);const Uu={isOpen:!1,reviewId:void 0,currentCreatorResponse:void 0};class Nu extends Me().Store{getInitialState(){return{...Uu}}openModal(e,t){this.setState({...Uu,isOpen:!0,reviewId:e,currentCreatorResponse:t})}closeModal(){this.setState(Uu)}}const zu=new Nu;function Vu(e){let{reviewId:t,templateId:a,creatorAvatar:i}=e;const s=(0,r().v3)(),l=(0,o().IS)((()=>({templateCardImage:{alignSelf:"flex-start"}})),[]),{isCreatorResponseButtonVisible:d,creatorResponse:c}=(0,n().K8)((()=>{var e;const a=new(Bt().Js)(s,{table:Bu().UN,id:t});return{isCreatorResponseButtonVisible:a.isDefined()&&(0,Du().Mh)(a.getModel()),creatorResponse:null===(e=a.getSerializedCreatorResponse())||void 0===e?void 0:e.raw_value}}),[s,t]),{slug:u,imageUrl:p}=(0,n().K8)((()=>{var e;const t=new(Bt().$x)(s,{table:"template",id:a});return{slug:t.getSlug(),imageUrl:null===(e=t.getTemplateImage())||void 0===e?void 0:e.url}}),[s,a]),g=(0,Ru().Px)(u);return(0,A.jsxs)(gn,{href:g,actions:d&&(0,A.jsx)(Ou,{reviewId:t,creatorResponse:c}),children:[(0,A.jsx)(mn,{imageSrc:p,node:null,style:l.templateCardImage}),(0,A.jsx)(Fu().x,{reviewId:t,creatorAvatar:i,appearance:"narrow",isCreatorResponseTitleVisible:!0})]})}function Hu(){const e=(0,o().IS)((()=>({container:{width:"100%",display:"flex",alignItems:"center",gap:"24px",borderRadius:"8px"},image:{width:"160px",height:"100px",borderRadius:"6px"}})),[]);return(0,A.jsxs)("div",{style:e.container,children:[(0,A.jsx)(ra().A,{style:e.image}),(0,A.jsx)(Fu().Q,{})]})}function Ou(e){let{reviewId:t,creatorResponse:a}=e;const i=(0,o().IS)((e=>({buttonGroup:{display:"flex",gap:"2px",borderRadius:"6px",padding:"2px",background:e.surface.elevated,boxShadow:`0px 0px 0px 1px ${e.stroke.secondary}, rgba(227, 226, 224, 0.50), 0px 2px 4px 0px rgba(0, 0, 0, 0.04)`}})),[]),r=(0,d().tz)(),n=Boolean(a)?r.formatMessage(Wu.editLabel):r.formatMessage(Wu.replyLabel);return(0,A.jsx)(vn,{children:(0,A.jsx)("div",{style:i.buttonGroup,children:(0,A.jsx)(Na().A,{renderTooltip:e=>(0,A.jsx)("span",{...e,children:n}),render:e=>(0,A.jsx)(ki().A,{...e,icon:e=>(0,A.jsx)(we().Q,{iconGroup:Eu,variantName:"default",colorName:"secondary",style:e}),onClick:()=>zu.openModal(t,a),ariaLabel:n})})})})}const Wu=(0,d().YK)({replyLabel:{id:"creatorProfile.templates.review.creatorResponse.replyLabel",defaultMessage:"Reply"},editLabel:{id:"creatorProfile.templates.review.creatorResponse.editLabel",defaultMessage:"Edit your reply"}});function qu(){const{isOpen:e,reviewId:t,currentCreatorResponse:a}=(0,n().O$)(zu),r=(0,i.useCallback)((()=>{zu.closeModal()}),[]);return(0,A.jsx)(ei().s,{isOpen:e,onDismiss:r,render:()=>{if(e)return(0,A.jsx)(Ku,{reviewId:t,currentCreatorResponse:a})},showCloseIcon:!0})}function Ku(e){let{reviewId:t,currentCreatorResponse:a}=e;const n=(0,r().v3)(),s=(0,o().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:"20px",padding:"24px 28px",minWidth:"300px",width:"50vw",maxWidth:"650px"},header:{display:"flex",flexDirection:"column",gap:"8px"},reviewContainer:{borderRadius:"6px",border:"1px solid rgba(0, 0, 0, 0.04)",background:"rgba(246, 245, 244, 0.50)",padding:"20px"},input:{background:e.white},responseContainer:{display:"flex",flexDirection:"column",gap:"6px"},cancelButton:{height:"36px",fontWeight:500},footer:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"12px"}})),[]),c=(0,d().tz)(),[u,p]=(0,i.useState)(a||""),[g,m]=(0,i.useState)(""),[f,h]=(0,l().V$)((async()=>{try{(0,Du().n$)(u),await x().callApi({eventName:"updateCreatorMarketplaceListingReview",environment:n,data:{reviewId:t,creatorResponse:u}}),zu.closeModal()}catch(e){if((0,ar().V4j)(e)){const t=(0,st().DX)(c,e.body);return void(t&&m(t))}m(c.formatMessage({id:"creatorProfile.templateReviewResponseModal.error",defaultMessage:"Something went wrong. Please try again."}))}}),[c,n,t,u]),b=(0,i.useCallback)((()=>{zu.closeModal()}),[]),v=(0,i.useCallback)((e=>{p(e.target.value),m("")}),[]);return(0,A.jsxs)("form",{method:"dialog",style:s.container,children:[(0,A.jsxs)("div",{style:s.header,children:[(0,A.jsx)(yt().D,{styleName:"Title-24px/Bold",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateReviewResponseModal.title",defaultMessage:"Reply to review"})}),(0,A.jsx)(yt().D,{styleName:"Body-14px/Regular",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateReviewResponseModal.description",defaultMessage:"Write a short response to the feedback you've received on your template."})})]}),(0,A.jsx)("div",{style:s.reviewContainer,children:(0,A.jsx)(Fu().x,{reviewId:t,appearance:"narrow",isCreatorResponseVisible:!1})}),(0,A.jsxs)("div",{style:s.responseContainer,children:[(0,A.jsx)(yt().D,{styleName:"Caption-12px/Regular",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateReviewResponseModal.responseHeading",defaultMessage:"Creator response"})}),(0,A.jsx)(Br().A,{textarea:!0,autosize:!0,ignoreKeyboardMode:!0,textareaSubmitOnEnter:!1,showClearButton:!1,autosizeMinHeight:140,value:u,onChange:v,placeholder:c.formatMessage({id:"creatorProfile.templateReviewResponseModal.responsePlaceholder",defaultMessage:"Hey there..."}),style:s.input}),g&&(0,A.jsx)(yt().D,{styleName:"Caption-12px/Regular",colorName:"redTertiary",children:g})]}),(0,A.jsxs)("div",{style:s.footer,children:[(0,A.jsx)(Xe().A,{size:"lg",onClick:b,style:s.cancelButton,children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateReviewResponseModal.cancelButton",defaultMessage:"Cancel"})}),(0,A.jsx)(Ie().A,{color:"black",size:"xl",onClick:h,isLoading:"pending"===f.status,disabled:Boolean(g),children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateReviewResponseModal.submitButton",defaultMessage:"Submit reply"})})]})]})}const Gu=10;function Zu(){const e=(0,o().IS)((()=>({sortSelect:{width:"fit-content",marginBottom:"20px"},reviewsList:{display:"flex",flexDirection:"column",gap:"24px"},loadMore:{marginTop:"48px",marginLeft:"-8px"}})),[]),{ids:t,isEmpty:a,isLoadingMore:s,isFirstPageLoading:l,showLoadMoreButton:c,handleLoadMoreClick:u,sort:p,handleSortChange:g}=(0,Pu().c)({getReviews:$u,limit:Gu}),m=function(){const e=(0,r().v3)();return(0,n().K8)((()=>{var t,a,i;const{creatorId:r}=Va().A.state;let n;return r&&(n=new(Lu().k)(e,{table:zd().Hi,id:r})),{email:null===(t=n)||void 0===t||null===(t=t.getAttributes())||void 0===t?void 0:t.contactEmail,name:null===(a=n)||void 0===a?void 0:a.getName(),avatarUrl:(null===(i=n)||void 0===i||null===(i=i.getAttributes())||void 0===i||null===(i=i.image)||void 0===i?void 0:i.url)??""}}),[e])}();return a?null:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:e.sortSelect,children:(0,A.jsx)(xt().A,{items:Qu,getKey:e=>e.value,onSelect:e=>g(e.val),selectedItem:Qu.find((e=>e.val===p)),renderItem:e=>(0,A.jsx)(vt().A,{...e,title:e.key}),renderOrigin:e=>{var t;return(0,A.jsx)(Ur()._,{focused:!1,title:null===(t=Qu.find((e=>e.val===p)))||void 0===t?void 0:t.value,...e})}})}),(0,A.jsx)(Sn,{children:t.map((e=>(0,A.jsx)(i.Fragment,{children:l||!("productId"in e)?(0,A.jsx)(Hu,{}):(0,A.jsx)(Vu,{reviewId:e.reviewId,templateId:e.productId,creatorAvatar:m})},e.reviewId)))}),c?(0,A.jsx)(_().p,{onClick:u,isGray:!0,style:e.loadMore,isLoading:s,children:(0,A.jsx)(d().sA,{id:"creatorProfile.reviewList.viewAll",defaultMessage:"Load more"})}):null,(0,A.jsx)(qu,{})]})}async function $u(e){return await async function(e){let{environment:t,productTable:a,sort:i,offset:r,limit:n}=e;const o=await x().callApi({eventName:"getCreatorMarketplaceListingReviews",environment:t,data:{productTable:a,sort:(0,Du().Lh)(i??"mostRecent"),limit:n,offset:r}});let s=[];return"success"===o.type&&o.data.success&&(s=o.data.ids),{ids:s}}({...e,productTable:Dt().XX,limit:Gu})}const Yu=(0,d().YK)({mostRecent:{id:"creatorProfile.reviewList.mostRecent",defaultMessage:"Most recent"},highestRating:{id:"creatorProfile.reviewList.highestRating",defaultMessage:"High to low ratings"},lowestRating:{id:"creatorProfile.reviewList.lowestRating",defaultMessage:"Low to high ratings"}}),Qu=[{value:O().A.formatMessage(Yu.mostRecent),val:"mostRecent"},{value:O().A.formatMessage(Yu.highestRating),val:"highestRating"},{value:O().A.formatMessage(Yu.lowestRating),val:"lowestRating"}];var Ju=()=>a(236190);const Xu=(0,d().YK)({question1:{id:"templateSubmission.templateCreatorFaq.question1",defaultMessage:"How are templates reviewed?"},answer1:{id:"templateSubmission.templateCreatorFaq.answer1",defaultMessage:"The Notion team regularly reviews template submissions to maintain the quality of our gallery. You can learn more about the review process and qualifications for publication on the <term>Marketplace Guidelines and Terms</term> page."},question2:{id:"templateSubmission.templateCreatorFaq.question2",defaultMessage:"I’ve submitted my template. Now what?"},answer2:{id:"templateSubmission.templateCreatorFaq.answer2",defaultMessage:"We’ll review your template and send you an email if the template or the revision is accepted and published or rejected. This process can take 1-2 weeks."},question3:{id:"templateSubmission.templateCreatorFaq.question3",defaultMessage:"How many templates can a Notion user submit?"},answer3:{id:"templateSubmission.templateCreatorFaq.answer3",defaultMessage:"You can submit as many templates as you’d like."},question4:{id:"templateSubmission.templateCreatorFaq.question4",defaultMessage:"How do I change my creator profile information?"},answer4:{id:"templateSubmission.templateCreatorFaq.answer4",defaultMessage:"You can make changes to your creator profile, including the name, handle, image, links, and more at <submitProfile>https://www.notion.so/profile.</submitProfile>"},question5:{id:"templateSubmission.templateCreatorFaq.question5",defaultMessage:"Can I make updates to my template after submission?"},answer5:{id:"templateSubmission.templateCreatorFaq.answer5",defaultMessage:"You can make changes to your template itself any time after it’s been published in the gallery. To make changes to like the title, price, or description, simply edit the template in your creator profile and submit for review."},question6:{id:"templateSubmission.templateCreatorFaq.question6",defaultMessage:"Do I get to keep all the proceeds from a paid template?"},answer6:{id:"templateSubmission.templateCreatorFaq.answer6",defaultMessage:"Currently, Notion’s template gallery only supports payment through third-party sites. Revenue splits are subject to the individual terms and conditions described by those websites."},question7:{id:"templateSubmission.templateCreatorFaq.question7",defaultMessage:"I have questions about submitting templates or templates I’ve already submitted. Who can I contact?"},answer7:{id:"templateSubmission.templateCreatorFaq.answer7",defaultMessage:"For any and all things related to templates, simply email <supportEmail>templates@makenotion.com</supportEmail> and we’ll be happy to assist you!"},question8:{id:"templateSubmission.templateCreatorFaq.question8",defaultMessage:"What makes a good template?"},answer8:{id:"templateSubmission.templateCreatorFaq.answer8",defaultMessage:"<p>If you have a specific template or workflow you’d like to share with the community, we highly encourage you to create and submit a template!</p><p>Before you set off building and sharing, there are some important considerations for creating a template:</p><p>Good templates are useful. Templates are tools; tools solve a clear problem or need for someone. There’s both a clear audience for your template and a clear problem to be solved, and your template solves that problem.</p><p>Good templates are differentiated. Notion is more flexible than typical word document. Differentiated templates combine one or more of Notion’s core product types (docs, projects, and wikis), or are very clearly visually different than a basic word document.</p><p>Good templates are scalable. If your template is intended for team use, it should be able to work with more than just one person. There are a few key points to check to ensure scalability: If it’s intended for collaboration, what might this look like if you added 10 people? 50? 100? If you added content from the last two months, what would it look like? If you already have lots of stuff in your Notion, does it easily fit in?</p><p>Good templates have the basics. They’re inoffensive, use correct spelling, and are thoughtfully structured.</p>"},question9:{id:"templateSubmission.templateCreatorFaq.question9",defaultMessage:"Can I use my templates to get people to sign up to Notion and earn a commission?"},answer9:{id:"templateSubmission.templateCreatorFaq.answer9",defaultMessage:"Yes! You can do that by <affiliateLink>becoming a Notion Affiliate partner</affiliateLink>. Affiliates earn 50% commission for every new sign-up that upgrades to our Plus, Business, or AI plans, for 12 months. You can direct your affiliate links to anywhere on the Notion website, including your own templates."}});function ep(e){let{faq:t}=e;const[a,r]=(0,i.useState)(!1),n=(0,o().IS)((e=>({faq:{borderBottom:`1px solid ${e.lightDividerColor}`},question:{margin:0,cursor:"pointer",display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between"},questionText:{padding:"1em 20px 1em 0",fontWeight:L().Wy.semibold},answer:{paddingBottom:"1em"}})),[]);return(0,A.jsxs)("section",{style:n.faq,children:[(0,A.jsxs)("header",{style:n.question,role:"button","aria-pressed":a?"true":"false",onClick:()=>r((e=>!e)),children:[(0,A.jsx)("div",{style:n.questionText,children:t.question}),a?(0,Ju().c)({width:14,height:14}):(0,ns().W)({width:14,height:14})]}),a&&(0,A.jsx)("div",{style:n.answer,children:t.answer})]})}const tp=function(){const e=(0,d().tz)(),t=[{question:e.formatMessage(Xu.question1),answer:e.formatMessage(Xu.answer1,{term:e=>(0,A.jsx)(ha().A,{href:"https://www.notion.so/Template-Gallery-Guidelines-and-Terms-ec93f618c12d4f08b75b9132a7e55b33",external:!0,children:e})})},{question:e.formatMessage(Xu.question2),answer:e.formatMessage(Xu.answer2)},{question:e.formatMessage(Xu.question3),answer:e.formatMessage(Xu.answer3)},{question:e.formatMessage(Xu.question4),answer:e.formatMessage(Xu.answer4,{submitProfile:e=>(0,A.jsx)(ha().A,{href:"https://www.notion.so/profile",children:e})})},{question:e.formatMessage(Xu.question5),answer:e.formatMessage(Xu.answer5,{supportEmail:e=>(0,A.jsx)(ha().A,{href:"mailto:templates@makenotion.com",children:e})})},{question:e.formatMessage(Xu.question6),answer:e.formatMessage(Xu.answer6)},{question:e.formatMessage(Xu.question9),answer:e.formatMessage(Xu.answer9,{affiliateLink:e=>(0,A.jsx)(ha().A,{href:"https://www.notion.com/affiliates",children:e})})},{question:e.formatMessage(Xu.question7),answer:e.formatMessage(Xu.answer7,{supportEmail:e=>(0,A.jsx)(ha().A,{href:"mailto:templates@makenotion.com",children:e})})},{question:e.formatMessage(Xu.question8),answer:e.formatMessage(Xu.answer8,{p:e=>(0,A.jsx)("p",{children:e})})}],a=(0,o().IS)((e=>({faqWrap:{borderTop:`1px solid ${e.lightDividerColor}`}})),[]);return(0,A.jsx)("article",{style:a.faqWrap,children:t.length>0&&t.map(((e,t)=>(0,A.jsx)(ep,{faq:e},`faq-${t}`)))})};function ap(){const e=(0,o().IS)((()=>({templateFAQContainer:{display:"flex",flexDirection:"column",gap:36}})),[]);return(0,A.jsxs)("div",{style:e.templateFAQContainer,children:[(0,A.jsx)(De().y,{size:"large",header:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.faq",defaultMessage:"Template Creator FAQ"}),subHeader:null}),(0,A.jsx)(tp,{})]})}var ip=()=>a(29037),rp=()=>a(12193),np=()=>a(480095),op=()=>a(298907);const sp={contentfulId:void 0,locales:[],isInitialized:!1};class lp extends Me().Store{getInitialState(){return{...sp}}setContentfulId(e){this.setState({...this.state,contentfulId:e})}getLocales(){return this.state.locales}setLocales(e){this.setState({...this.state,locales:[...e]})}setIsInitialized(e){this.setState({...this.state,isInitialized:e})}updateState(e){this.setState({...this.state,...e})}resetState(){this.setState(sp)}getDefaultLocaleTemplate(){var e;const{locales:t}=this.state;if(t&&0!==t.length)return null==t||null===(e=t.find((e=>{var t;return null==e||null===(t=e.template)||void 0===t?void 0:t.is_default_locale})))||void 0===e?void 0:e.template}getDefaultLocaleTemplateDraft(){var e;const{locales:t}=this.state;if(t&&0!==t.length)return null==t||null===(e=t.find((e=>{var t;return null==e||null===(t=e.template)||void 0===t?void 0:t.is_default_locale})))||void 0===e?void 0:e.templateDraft}removeLocale(e){this.setState({...this.state,locales:[...this.state.locales.filter((t=>t.locale!==e))]})}}const dp=new lp,cp={isOpen:!1,showAddTranslationModal:!1,addTranslationScope:"listing"};class up extends Me().Store{getInitialState(){return{...cp}}openModal(){this.setState({...cp,isOpen:!0})}closeModal(){this.setState({...cp,isOpen:!1})}updateState(e){this.setState({...this.state,...e})}}const pp=new up;function gp(){const e=fp(),t=(0,d().tz)(),a=(0,r().Y0)(),{setView:o}=Ze(),s=(0,n().K8)((()=>dp.state.contentfulId),[]),l=(0,n().K8)((()=>(0,Wr().V)(t)),[t]),c=(0,n().K8)((()=>op().A.state.locale),[]),u=function(){const{name:e}=Ze(),t=(0,n().K8)((()=>{const t=op().A.state.isDefaultLocale,{type:a}=$(e);return t&&["new","draft"].includes(a)}),[e]),a=(0,n().K8)((()=>{const e=(0,z().p5)(op().A.state.locale);return e&&{locale:e,template:void 0,templateDraft:void 0}}),[]),i=(0,n().K8)((()=>dp.getLocales()),[]);return t&&a?[a]:i}();if(!c||!u||0===u.length)return null;const p={originGap:6,popupType:a.isMobile?ye().z7.BottomSheet:ye().z7.Popup,renderOrigin:t=>{var a;return(0,A.jsxs)(Xe().A,{...t,size:"lg",style:{...e.selectInputButton},children:[(0,A.jsxs)("div",{style:e.selectInputText,children:[(0,A.jsx)(Je().I,{icon:rp().globeIcon}),null===(a=l[c])||void 0===a?void 0:a.languageNameInCurrentLanguage]}),(0,A.jsx)(Je().I,{icon:Gc().arrowChevronSingleDownIcon,color:"lightGraySecondary"})]})},render:e=>{const t=[{key:"template-locales",render:e=>(0,i.createElement)(Pi().A,{...e,key:0}),items:u.map((t=>({key:t.locale,render:e=>{const a=l[t.locale];return(0,A.jsx)(vt().A,{...e,title:null==a?void 0:a.languageNameInCurrentLanguage,badge:(0,A.jsx)(mp,{localizedTemplate:t}),right:t.locale===c&&(0,A.jsx)(Je().I,{icon:ip().checkmarkIcon})})},action:()=>{t.locale!==c&&((e=>{var t,a;let i;var r;if(null!==(t=e.template)&&void 0!==t&&t.id)i=`/profile/templates/form/published/${null===(r=e.template)||void 0===r?void 0:r.id}`;else if(null!==(a=e.templateDraft)&&void 0!==a&&a.id){var n;i=`/profile/templates/form/draft/${null===(n=e.templateDraft)||void 0===n?void 0:n.id}`}else s&&(i=`/profile/templates/form/new/${s}?locale=${e.locale}`);i&&o(i)})(t),e.close())}})))}];let r;return s&&t.push({key:"manage-languages",render:e=>(0,i.createElement)(Pi().A,{...e,key:1,topBorder:!0}),items:[{key:"manage-languages",render:e=>(0,A.jsx)(vt().A,{...e,title:(0,A.jsx)(d().sA,{defaultMessage:"Manage languages",id:"creatorProfile.templateLocaleSwitcher.manageLanguages"})}),action:()=>{s&&(dp.setContentfulId(s),pp.openModal()),e.close()}}]}),r=a.isMobile?{menuType:je().gu.Modal,right:(0,A.jsx)(np().DoneMenuText,{}),onClickRight:e.close}:{menuType:je().gu.Popup},(0,A.jsx)(xe().A,{...r,children:(0,A.jsx)(Ti().Ay,{type:Ti().Oh.Vertical,initialFocus:Ht().SL(u,(e=>Ht().n4(e.locale,c))),sections:t})})}};return(0,A.jsx)(ye().Ay,{...p})}function mp(e){var t;const{localizedTemplate:a}=e,i=fp(),r=null==a||null===(t=a.templateDraft)||void 0===t?void 0:t.status;return!!r&&["in_review","draft","rejected"].includes(r)?(0,A.jsx)("div",{style:i.statusIndicatorContainer,children:(0,A.jsx)("span",{style:{...i.baseIndicator,..."in_review"===r?i.inReviewIndicator:{},..."rejected"===r?i.rejectedIndicator:{},..."draft"===r?i.draftIndicator:{}}})}):null}function fp(){return(0,o().IS)((e=>({selectInputButton:{border:"none",boxShadow:e.inputBoxShadow,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"8px 14px",minWidth:180},selectInputText:{display:"flex",flexDirection:"row",alignItems:"center",gap:6},statusIndicatorContainer:{display:"flex",alignItems:"center",justifyContent:"center",marginLeft:6},baseIndicator:{width:4,height:4,borderRadius:"50%",marginRight:4},inReviewIndicator:{background:e.creatorProfile.inReviewText},rejectedIndicator:{background:e.palette.red[500]},draftIndicator:{background:e.palette.gray[200]}})),[])}var hp=()=>a(3544),bp=()=>a(763824);const vp=(0,at().Dv)("generateTemplateScreenshot");async function yp(e){const{url:t,environment:a}=e,i=cs().default.checkGate({gateName:"disable_template_screenshot_generation",disableExposureLogging:!0}),r=bp().yX();if(i)return r.reject({success:!1,error:"Template screenshot generation is disabled"}),r.promise;const n=Date.now(),o=(0,nt().UT)(a,vp,{url:t},{spaceIds:[]});let s;for await(const l of o)s=l;if(s)if(s.error){const e=(0,st().A)(O().A.getIntl(),s.error);r.reject(e)}else r.resolve(s);else r.reject(void 0);return(0,j().v)(a,"generate_template_screenshot_client",{time:Date.now()-n}),r.promise}const xp={isOpen:!1,isTranslating:!1,shouldTranslate:!0,hasTranslated:!1};class Sp extends Me().Store{getInitialState(){return{...xp}}openModal(){this.setState({...xp,isOpen:!0})}closeModal(){this.setState({...xp,isOpen:!1})}updateState(e){this.setState({...this.state,...e})}setIsTranslating(e){this.setState({...this.state,isTranslating:e})}setShouldTranslate(e){this.setState({...this.state,shouldTranslate:e})}setHasTranslated(e){this.setState({...this.state,hasTranslated:e})}}const wp=new Sp,Cp=(0,d().YK)({submitTemplateMissingImage:{id:"templateSubmitActions.submitTemplateMissingImage",defaultMessage:"Please generate an image for your template by re-entering the template URL"},saveTemplateDraftSuccess:{id:"templateSubmitActions.saveTemplateDraftSuccess",defaultMessage:"Template saved."},submitTemplateSuccess:{id:"templateSubmitActions.submitSuccess",defaultMessage:"Template submitted! We will review it shortly."},submitTemplateMissingUrl:{id:"templateSubmitActions.submitTemplateMissingUrl",defaultMessage:"Please enter a valid url for your template."},submitTemplateInvalidUuid:{id:"templateSubmitActions.submitTemplateInvalidUuid",defaultMessage:"The link does not seem to be a valid Notion template."},submitTemplateMissingName:{id:"templateSubmitActions.submitTemplateMissingName",defaultMessage:"Please enter a name for your template"},submitTemplateMissingVerifiedInstantDelivery:{id:"templateSubmitActions.submitTemplateMissingVerifiedInstantDelivery",defaultMessage:"Please confirm that the template will be delivered instantly upon purchase."},submitTemplateLongDescriptionContainsHtml:{id:"templateSubmitActions.submitTemplateLongDescriptionContainsHtml",defaultMessage:"Long description contains HTML"}});function jp(){const e=op().A.state,{initialValues:t,...a}=e;return{url:a.url,name:a.name,locale:a.locale,shortDescription:a.shortDescription,longDescription:a.longDescription,categories:a.categories.map((e=>e.id)),image:a.image,mobileImage:a.mobileImage,emoji:a.emoji,purchaseUrl:a.purchaseUrl,price:a.price,icon:a.icon,templateDraftId:a.templateDraftId,slug:a.slug,screenshots:a.screenshots,mobileScreenshots:a.mobileScreenshots,videos:a.videos,restrictRedistribution:a.restrictRedistribution,checkoutEnabled:a.checkoutEnabled,emailRequirement:a.emailRequirement,verifiedInstantDelivery:a.verifiedInstantDelivery,isDefaultLocale:e.isDefaultLocale,...a.isFree?{price:void 0,purchaseUrl:void 0,checkoutEnabled:void 0}:{},...a.contentfulId?{contentfulId:a.contentfulId}:{},marketplaceAcquisitionEmail:a.isFree||a.checkoutEnabled?a.marketplaceAcquisitionEmail:void 0,isAutoTranslated:a.isAutoTranslated}}async function Mp(e){const{environment:t,action:a,currentView:i,templateContentfulId:r,hasTemplateBeenReviewed:n}=e;let o;const s=jp(),l=!s.contentfulId;if(!(await Ip({environment:t,url:s.url,templateDraftId:s.templateDraftId,shouldValidateBlockIdUsedByOtherTemplate:l})))return!1;if("save_draft"===a){if(!_p(s))return!1;{const e={...s,status:"draft",name:(0,lc().ZC)("production",s.name??"Untitled")};o=await x().callApi({eventName:"submitTemplateDraft",environment:t,data:e})}}else if("publish"===a){const e=await async function(e,t,a,i){var r;let n=!0;const o=op().A.state.initialValues;_p(t)?void 0===t.locale&&(n=!1):n=!1;null!=t&&null!==(r=t.image)&&void 0!==r&&r.url||op().A.setState({...op().A.state,imageError:O().A.formatMessage(Cp.submitTemplateMissingImage)});if(!t.name||!o.name||o.name!==t.name){var s;kp((0,N().pK)(null===(s=b().default.state.currentUserStore)||void 0===s?void 0:s.getModel()),t.name)}Dp(t.shortDescription),l=t.longDescription,Ap({value:l||"",validationFunction:hp().Jf,fieldName:"longDescriptionError"});var l;const d=op().A.state.isDefaultLocale;!a&&d&&Ep(t.categories||[]);t.slug&&o.slug&&o.slug===t.slug||await Bp({environment:e,slug:t.slug||"",contentfulId:i});t.checkoutEnabled&&Pp(t.price);if("number"==typeof t.price){var c;if(Tp(t.price??0),t.checkoutEnabled)null!==(c=t.purchaseUrl)&&void 0!==c&&c.length&&t.purchaseUrl.length>0&&Lp(t.purchaseUrl);else Lp(t.purchaseUrl??""),t.purchaseUrl&&Op(t.purchaseUrl)&&!t.verifiedInstantDelivery&&op().A.setState({...op().A.state,purchaseUrlError:O().A.formatMessage(Cp.submitTemplateMissingVerifiedInstantDelivery)})}for(const u of op().J)void 0!==op().A.state[u]&&(n=!1);return function(e){return!!n}}(t,s,n,r);if(!e(s))return!1;{const e={...s,status:"in_review",name:(0,lc().ZC)("production",s.name??"Untitled")};o=await x().callApi({eventName:"submitTemplateDraft",environment:t,data:e})}}else(0,V().HB)(a);const{type:d}=$(i),c="published"!==d;return"success"===o.type?("save_draft"===a?((0,rt().u)({environment:t,event:{eventName:"creator_profile_template_save_draft",eventProperties:{}}}),S().rG({message:O().A.formatMessage(Cp.saveTemplateDraftSuccess)}),cs().default.logEvent("creator_profile_template_save_draft")):"publish"===a&&((0,rt().u)({environment:t,event:{eventName:"creator_profile_template_request_review",eventProperties:{is_new_submission:c}}}),cs().default.logEvent("creator_profile_template_request_review",void 0,{is_new_submission:c}),S().rG({message:O().A.formatMessage(Cp.submitTemplateSuccess)})),op().A.reset(),!0):(S().Qg(o),!1)}function _p(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.url?op().A.state.uuid||op().A.state.urlError?e.name?!(e.longDescription&&!(0,hp().Wd)(e.longDescription))||(t&&op().A.setState({...op().A.state,longDescriptionError:O().A.formatMessage(Cp.submitTemplateLongDescriptionContainsHtml)}),!1):(t&&op().A.setState({...op().A.state,nameError:O().A.formatMessage(Cp.submitTemplateMissingName)}),!1):(t&&op().A.setState({...op().A.state,urlError:O().A.formatMessage(Cp.submitTemplateInvalidUuid)}),!1):(t&&op().A.setState({...op().A.state,urlError:O().A.formatMessage(Cp.submitTemplateMissingUrl)}),!1)}function Ap(e){const{value:t,validationFunction:a,fieldName:i}=e;try{a(t)}catch(r){if((0,ar().V4j)(r)){const e=(0,st().DX)(O().A.getIntl(),r.body);e&&op().A.setState({...op().A.state,[i]:e})}}}async function Ip(e){const{environment:t,url:a,templateDraftId:i,shouldValidateBlockIdUsedByOtherTemplate:r,shouldValidateBlockIdForLocalization:n}=e;if(op().A.setState({...op().A.state,url:a}),!a)return op().A.setState({...op().A.state,urlError:O().A.formatMessage(Cp.submitTemplateMissingUrl)}),!1;const o=await x().callApi({eventName:"validateTemplate",environment:t,data:{url:a,templateDraftId:i,shouldValidateBlockIdUsedByOtherTemplate:r,contentfulId:op().A.state.contentfulId,shouldValidateBlockIdForLocalization:n}});if("success"!==o.type)return op().A.setState({...op().A.state,urlError:(0,st().Hu)(O().A.getIntl(),o)}),!1;op().A.setState({...op().A.state,urlError:void 0});const{blockId:s}=o.data;return op().A.setState({...op().A.state,url:a,uuid:s}),!0}function kp(e,t){Ap({value:{name:t||"",isExemptFromDisallowedWords:e,env:"production"},validationFunction:hp().mx,fieldName:"nameError"})}function Tp(e){Ap({value:e,validationFunction:hp().YD,fieldName:"priceError"})}function Pp(e){Ap({value:e||0,validationFunction:hp().WR,fieldName:"priceError"})}function Lp(e){Ap({value:{purchaseUrl:e,publicDomainName:Re().A.publicDomainName},validationFunction:hp().Fr,fieldName:"purchaseUrlError"})}function Dp(e){Ap({value:e||"",validationFunction:hp().$V,fieldName:"shortDescriptionError"})}function Ep(e){Ap({value:e,validationFunction:hp().Tv,fieldName:"categoriesError"}),e.length<=y().Cw&&e.length>0&&op().A.setState({...op().A.state,categoriesError:void 0})}async function Bp(e){const{environment:t,slug:a,contentfulId:i}=e;op().A.setState({...op().A.state,slug:a});const r=await x().callApi({eventName:"validateTemplateDraftSlug",environment:t,data:{slug:a,templateDraftId:op().A.state.templateDraftId,contentfulId:i}});"success"===r.type?op().A.setState({...op().A.state,slugError:void 0}):op().A.setState({...op().A.state,slugError:(0,st().Hu)(O().A.getIntl(),r)})}function Rp(e){op().A.setState({...op().A.state,[e]:void 0})}function Fp(){op().A.reset()}function Up(e,t){var a,i,r,n,o;const s=op().A.getInitialState(),l={contentfulId:(null==t?void 0:t.contentfulId)||e.getContentfulId(),templateDraftId:e.id,name:e.getName()||"",url:e.getTemplatePublicUrl()||"",price:e.getPrice(),slug:e.getSlug(),isFree:void 0===e.getPrice()&&void 0===e.getPurchaseUrl(),longDescription:e.getLongDescription()||"",shortDescription:e.getDescription()||"",uuid:e.getBlockId(),categories:[],locale:e.getLocale(),purchaseUrl:e.getPurchaseUrl(),image:(null===(a=e.getAttributes())||void 0===a?void 0:a.image)||{url:"",width:0,height:0},mobileImage:(null===(i=e.getAttributes())||void 0===i?void 0:i.mobile_image)||{url:"",width:0,height:0},mobileScreenshots:e.getMobileScreenshots(),screenshots:e.getScreenshots(),videos:e.getVideos(),status:e.getStatus()||"draft",restrictRedistribution:e.getRestrictRedistribution()||void 0,checkoutEnabled:e.getCheckoutEnabled()||void 0,emailRequirement:e.getEmailRequirement()||void 0,isDefaultLocale:(null==t?void 0:t.isDefaultLocale)??!1,verifiedInstantDelivery:(null===(r=e.getDraftAttributes())||void 0===r?void 0:r.verified_instant_delivery)??!1,marketplaceAcquisitionEmail:(null===(n=e.getAttributes())||void 0===n||null===(n=n.custom_emails)||void 0===n?void 0:n.marketplace_acquisition)??"",isAutoTranslated:(null===(o=e.getAttributes())||void 0===o?void 0:o.is_auto_translated)??!1};op().A.setState({...s,...l,initialValues:{...l}})}async function Np(e,t){const a=op().A.state,{isGeneratingImage:i,url:r}=a;op().A.setState({...op().A.state,isGeneratingImage:!0});const n=t??r;if(i)return!1;const o=await yp({url:n,environment:e}).catch((()=>{C().D6({label:(0,A.jsx)(I,{children:(0,A.jsx)(d().sA,{defaultMessage:"Error generating screenshot",id:"creatorProfile.snackbar.error.screenshot"})})})}));return o&&"value"in o&&op().A.setState({...a,mobileImage:o.value.mobile,image:o.value.desktop}),op().A.setState({...op().A.state,isGeneratingImage:!1}),!0}function zp(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const a=dp.getDefaultLocaleTemplate(),i=dp.getDefaultLocaleTemplateDraft();if(!a||t)return;const{attributes:r,price:n,slug:o}=a;return{slug:o,price:n,purchaseUrl:null==r?void 0:r.purchase_url,restrictRedistribution:null==r?void 0:r.restrict_redistribution,emailRequirement:null==r?void 0:r.email_requirement,checkoutEnabled:null==r?void 0:r.checkout_enabled,url:null!=r&&r.public_site_url?r.public_site_url:"",isFree:(void 0===n||0===n)&&void 0===(null==r?void 0:r.purchase_url),...(null==r?void 0:r.image)&&{image:r.image},...(null==r?void 0:r.mobile_image)&&{mobileImage:r.mobile_image},...(null==r?void 0:r.screenshots)&&{screenshots:r.screenshots},...(null==r?void 0:r.mobile_screenshots)&&{mobileScreenshots:r.mobile_screenshots},verifiedInstantDelivery:(null==i||null===(e=i.draft_attributes)||void 0===e?void 0:e.verified_instant_delivery)??!0}}async function Vp(e){const{environment:t,data:a}=e,i=await x().callApi({eventName:"translateTemplateListingData",environment:t,data:a}),r=zp(),n=op().A.state,o=n.initialValues;if("success"!==i.type)return S().Qg(i),!1;{const{name:e,shortDescription:t,longDescription:a}=i.data;op().A.setState({...n,...e&&{name:e},...t&&{shortDescription:t},...a&&{longDescription:a},...r||{},url:"",initialValues:{...o},isAutoTranslated:!0})}return wp.updateState({isTranslating:!1,isOpen:!1,shouldTranslate:!0,hasTranslated:!0}),!0}const Hp=["gumroad.com","etsy.com","lemonsqueezy.com","payhip.com","ko-fi.com"];function Op(e){try{const t=new URL(e);return!Hp.find((e=>t.hostname.endsWith(e)))}catch(t){return!0}}var Wp=()=>a(939768);function qp(e,t){const a=!e.some((e=>e.locale===t));return i=t,z().Yr.some((e=>e===i))&&a;var i}function Kp(e,t,a){const{isFeatureEnabled:n}=(0,pt().O)("self_serve_localization_frontend"),o=(0,r().v3)(),s=(0,i.useCallback)((async()=>{if(!n||!e&&!t)return{localizedTemplates:[],localizedTemplateDrafts:[]};const a=e?{contentfulId:e,slug:void 0}:{contentfulId:void 0,slug:t??""},{localizedTemplates:i,localizedTemplateDrafts:r}=await async function(e){let{environment:t,args:a}=e;const i=await x().callApi({eventName:"getLocalizedTemplatesByIdOrSlug",environment:t,data:a});if("success"===i.type&&i.data.success){const{localizedTemplates:e,localizedTemplateDrafts:t}=i.data;return{localizedTemplates:e,localizedTemplateDrafts:t??[]}}return{localizedTemplates:[],localizedTemplateDrafts:[]}}({environment:o,args:a});return{localizedTemplates:i,localizedTemplateDrafts:r}}),[o,e,t,n]),[{value:d={localizedTemplates:[],localizedTemplateDrafts:[]}}]=(0,l().Yb)((async()=>n?s():{localizedTemplates:[],localizedTemplateDrafts:[]}),[s,n]);(0,i.useEffect)((()=>{var i,r,o;if(!n||!d.localizedTemplates||0===d.localizedTemplates.length&&0===d.localizedTemplateDrafts.length||!e&&!t)return;const s=(null===(i=d.localizedTemplates)||void 0===i?void 0:i.reduce(((e,t)=>{const a=(0,z().p5)(t.locale);return a&&e.push({locale:a,template:t}),e}),[]))||[];null===(r=d.localizedTemplateDrafts)||void 0===r||r.forEach((e=>{const t=s.find((t=>t.locale===e.locale)),a=(0,z().p5)(e.locale);if(a)if(t){var i;const t=s.find((t=>t.locale===e.locale));t&&"published"!==(null==t||null===(i=t.templateDraft)||void 0===i?void 0:i.status)&&(t.templateDraft=e)}else s.push({locale:a,templateDraft:e})}));const l=(0,z().p5)(a);if(l){if(1===s.length){if(!s.find((e=>{var t;return null===(t=e.template)||void 0===t?void 0:t.is_default_locale})))return void dp.setLocales([{locale:l}])}qp(s,l)&&s.push({locale:l})}s.length>0&&(dp.setLocales(s),dp.setIsInitialized(!0));const c=s.find((e=>{var t;return null===(t=e.template)||void 0===t?void 0:t.is_default_locale}));null!=c&&null!==(o=c.template)&&void 0!==o&&o.contentful_id&&dp.setContentfulId(c.template.contentful_id)}),[d,a,n,e,t])}function Gp(e){const t=(0,r().v3)();return(0,n().K8)((()=>{if(!e)return!1;const a=new(Bt().x1)(t,{table:"template_draft",id:e}),i=a.getStatus(),r=a.getPublishedVersion(),n=a.getRejectReason();return"in_review"===i||void 0!==r&&r>0||void 0!==n}),[e,t])}var Zp=()=>a(30175);function $p(e){const{type:t,id:a,contentfulId:o,locale:s}=e,l=(0,r().v3)(),c=(0,d().tz)(),u=s??(0,v().H)(c),p=(0,v().H)(c),g=(0,n().K8)((()=>Zp().A.getState()),[]),m=(0,n().K8)((()=>{var e;return null===(e=b().default.state.currentUserSettingsStore)||void 0===e?void 0:e.getSettings()}),[]),f=(0,i.useRef)(void 0),h=(0,i.useRef)(!1),y=(0,i.useRef)(void 0),x=(0,i.useRef)(void 0);(0,i.useEffect)((()=>{"new"!==t&&(f.current=void 0),x.current=a}),[t,a]),(0,n().K8)((()=>{if("new"===t){if(u===f.current)return;const e=e=>z().Yr.some((t=>t===e)),t=s??(null!=m&&m.preferred_locale&&e(null==m?void 0:m.preferred_locale)?null==m?void 0:m.preferred_locale:z().q);!function(e){let{locale:t,contentfulId:a,values:i}=e;const r=op().A.getInitialState(),n=!a,o=n?{}:zp(n)||{};t&&op().A.setState({...r,...a&&{contentfulId:a},locale:t,isDefaultLocale:n,...i,...o,initialValues:{...r.initialValues,locale:t,isDefaultLocale:n,...i}})}({locale:t,contentfulId:o,values:g}),f.current=t}}),[t,null==m?void 0:m.preferred_locale,o,s,u,g]);const S=(0,n().K8)((()=>{if("new"===t){if(!o)return;const e=dp.getDefaultLocaleTemplate();if(!e)return;const t=new(Bt().$x)(l,{table:"template",id:e.id}).getTemplateDraftId();if(!t)return;return new(Bt().x1)(l,{table:"template_draft",id:t}).getTags()}if(void 0!==a){if("published"===t){const e=new(Bt().$x)(l,{table:"template",id:a}),t=e.getTemplateDraftId();if(!t)return;const i=new(Bt().x1)(l,{table:"template_draft",id:t});return Up(i,{contentfulId:e.getContentfulId(),isDefaultLocale:e.isDefaultLocale()}),y.current=a,i.getTags()}if("draft"===t){const e=new(Bt().x1)(l,{table:"template_draft",id:a});return Up(e),e.getTags()}(0,V().HB)(t)}}),[t,a,l,o]);(0,n().K8)((()=>{if(!S)return[];const e=[];for(const t of S){const a=(0,Vd().D)({table:"template_tag",locale:p,contentful_id:t}),i=new(Bt().Qk)(l,{table:"template_tag",id:a});e.push({id:i.getContentfulId()||"",name:i.getName()||""})}const i=e.filter((e=>Boolean(e.name))),r="new"===t&&o||"draft"===t||"published"===t,n=!h.current||f.current||y.current===a||"draft"===t&&x.current!==a;r&&i.length>0&&i.length===S.length&&n&&(!function(e){const t=op().A.state,a={...t.initialValues,categories:e};op().A.setState({...t,categories:e,initialValues:a})}(i),h.current=!0)}),[S,l,t,o,f,y,a,p])}function Yp(){const[e,t]=(0,i.useState)(!0),a=(0,n().K8)((()=>dp.state.locales),[]),r=(0,n().K8)((()=>dp.state.isInitialized),[]),o=(0,n().K8)((()=>dp.getDefaultLocaleTemplate()),[]),s=(0,n().K8)((()=>op().A.state.locale),[]);return(0,i.useEffect)((()=>{if(!r)return;const e=o?o.locale===s:1===a.length;op().A.setIsDefaultLocale(e),t(e)}),[o,s,a,r]),e}function Qp(e){const t=(0,r().v3)();return(0,n().K8)((()=>{if(void 0===e)return;return new(Bt().x1)(t,{table:"template_draft",id:e}).getStatus()}),[t,e])}function Jp(e){let{isFormDisabled:t,marketplaceAcquisitionEmailError:a,marketplaceAcquisitionEmail:r,submissionFormStyles:n,disabledInputStyles:s}=e;const{isStatsigReady:l,isFeatureEnabled:c}=(0,pt().O)("template_custom_email_snippet"),u=(0,i.useMemo)((()=>(0,hp().LZ)(r)??""),[r]),{isMobileWidth:p}=(0,m().LS)(),g=(f=p,(0,o().IS)((e=>({errorMessage:{fontSize:12,color:e.errorText},emailInputContainer:{display:"flex",gap:"12px",flexDirection:f?"column":"row"},emailPreview:{width:"100%",display:"flex",flexDirection:"column"},emailPreviewContent:{boxShadow:e.inputBoxShadow,borderRadius:"4px",padding:"8px 14px",height:216,backgroundColor:e.surface.wash},emailPreviewText:{fontSize:12,paddingBottom:4,color:"rgba(55, 53, 47, 0.8)"},emailPreviewHelp:{fontSize:12,color:"rgba(17, 17, 17, 0.5)"},emailPreviewHelpContainer:{alignSelf:"flex-end"}})),[f]));var f;return l&&c?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{style:g.emailInputContainer,children:[(0,A.jsx)(Pr().o,{htmlLabel:"templateEmailSnippet",label:(0,A.jsx)(d().sA,{defaultMessage:"Custom Markdown email snippet",id:"creatorProfile.templateSubmission.marketplaceAcquisitionEmail"}),maxlength:1e3,textarea:!0,textareaElementAttributes:{rows:10},showCharacterCounter:!0,format:Br().C.Default,style:{...n.inputStyle,...t?s.inputDisabled:{},fontFamily:"monospace"},inputStyle:t?s.noCursorAllowed:n.fullDescription,onChange:e=>{const t=op().A.state;op().A.setState({...t,marketplaceAcquisitionEmail:e.target.value})},onFocus:e=>Rp("marketplaceAcquisitionEmailError"),onBlur:e=>{Ap({value:e.target.value,validationFunction:hp().$A,fieldName:"marketplaceAcquisitionEmailError"})},value:r,disabled:t}),(0,A.jsxs)("div",{style:g.emailPreview,children:[(0,A.jsx)("div",{style:g.emailPreviewText,children:(0,A.jsx)(d().sA,{defaultMessage:"Preview",id:"creatorProfile.templateSubmission.emailPreview"})}),(0,A.jsx)("div",{style:g.emailPreviewContent,children:(0,A.jsx)("div",{dangerouslySetInnerHTML:{__html:`\n\t\t\t\t\t\t\t\t\t <div>\n\t\t\t\t\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t\t\t\t\tbody {\n\t\t\t\t\t\t\t\t\t\t\t\t:first-child {\n\t\t\t\t\t\t\t\t\t\t\t\t\tmargin-block-start: 0;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t.email-preview-content {\n\t\t\t\t\t\t\t\t\t\t\t\t\tmax-height: 200px;\n\t\t\t\t\t\t\t\t\t\t\t\t\toverflow: scroll;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</style>\n\t\t\t\t\t\t\t\t\t\t<div class="email-preview-content">\n\t\t\t\t\t\t\t\t\t\t\t${u}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t`}})}),(0,A.jsx)("div",{style:g.emailPreviewHelpContainer,children:(0,A.jsx)(_().p,{onClick:()=>{he().A.setState({isOpen:!0,type:"MarkdownGuide",onAccept:()=>{},attributes:{source:"email_snippet"}})},style:g.emailPreviewHelp,children:(0,A.jsx)(d().sA,{defaultMessage:"Get help",id:"creatorProfile.templateSubmission.emailPreviewHelp"})})})]})]}),a&&(0,A.jsx)("div",{role:"alert",style:g.errorMessage,children:a})]}):(0,A.jsx)(A.Fragment,{})}var Xp=()=>a(96248),eg=()=>a(383529),tg=()=>a(649940),ag=()=>a(476256),ig=()=>a(873735);function rg(e){let{longDescriptionError:t,isFormDisabled:a,longDescription:r}=e;const n=(0,o().IS)((()=>({editorWrapper:{border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",backgroundColor:"white",minHeight:"200px",fontSize:"14px",marginBottom:"-6px"},emailPreviewHelp:{fontSize:12,color:"rgba(17, 17, 17, 0.5)"},emailPreviewHelpContainer:{alignSelf:"flex-end"}})),[]),s=(0,i.useRef)(null);return(0,i.useEffect)((()=>{s.current&&s.current.setMarkdown(r||"")}),[r]),(0,A.jsxs)(er().O,{htmlLabel:"templateLongDescription",name:(0,A.jsx)(d().sA,{defaultMessage:"Full description",id:"creatorProfile.templateSubmission.fullDescription"}),errorMessage:t,children:[(0,A.jsx)("div",{style:n.editorWrapper,children:(0,A.jsx)(Xp().R,{ref:s,markdown:r||"",onChange:e=>{const t=op().A.state;op().A.setState({...t,longDescription:e})},contentEditableClassName:"mdx-editor",readOnly:a,plugins:[(0,eg().xO)(),(0,tg().Zq)(),(0,ag().O)(),(0,ig().r)()],className:"mdx-editor-input"})}),(0,A.jsx)("div",{style:n.emailPreviewHelpContainer,children:(0,A.jsx)(_().p,{onClick:()=>{he().A.setState({isOpen:!0,type:"MarkdownGuide",onAccept:()=>{},attributes:{source:"long_description"}})},style:n.emailPreviewHelp,children:(0,A.jsx)(d().sA,{defaultMessage:"Get help",id:"creatorProfile.templateSubmission.emailPreviewHelp"})})})]})}function ng(e){const{disabled:t}=e,a=(0,o().IS)((e=>({selectInputButton:{border:"none",boxShadow:e.inputBoxShadow,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"18px 14px",width:"100%"},selectText:{height:"20px",fontSize:14,lineHeight:"20px"},selectChevron:{width:16,height:16,fill:e.text.tertiary},accessLockingPickerSubtitle:{display:"inline-flex",gap:"4px",flexWrap:"wrap"},buttonStyles:{borderRadius:"4px",padding:"0px 4px"}})),[]),i=il(),r=(0,d().tz)(),{selectedSellWith:s,isPaid:l}=(0,n().K8)((()=>({selectedSellWith:op().A.state.checkoutEnabled?"notion":"other",isPaid:!op().A.state.isFree})),[]),c=(0,n().K8)((()=>({open:{label:r.formatMessage({id:"creatorProfile.templateSubmissionForm.openRedistribution",defaultMessage:"Open"}),caption:r.formatMessage({id:"creatorProfile.templateSubmissionForm.allowRedistribution",defaultMessage:"Allow users to redistribute blocks in my template"})},restricted:{label:r.formatMessage({id:"creatorProfile.templateSubmissionForm.restrictedRedistribution",defaultMessage:"Restricted"}),caption:r.formatMessage({id:"creatorProfile.templateSubmissionForm.disallowRedistribution",defaultMessage:"Prevent users from redistributing blocks in my template"})}})),[r]),{selectedAccessLocking:u}=(0,n().K8)((()=>({selectedAccessLocking:op().A.state.restrictRedistribution?"restricted":"open"})),[]),p={items:["open","restricted"],getKey:e=>e,selectedItem:u,onSelect:e=>{const t=op().A.state;op().A.setState({...t,restrictRedistribution:"restricted"===e})},originGap:6,width:"100%",minWidth:"100%",renderItem:e=>{const t=c[e.value];return(0,A.jsx)(vt().A,{...e,title:null==t?void 0:t.label,caption:null==t?void 0:t.caption})},renderOrigin:e=>{var r;return(0,A.jsxs)(Xe().A,{size:"lg",...e,style:{...a.selectInputButton,...t?i.inputDisabled:{}},disabled:t,children:[(0,A.jsx)("span",{style:a.selectText,children:null===(r=c[u])||void 0===r?void 0:r.label}),(0,A.jsx)(Je().I,{icon:Gc().arrowChevronSingleDownIcon,color:"lightGraySecondary",weight:"bold"})]})},disabled:t,sameWidthAsOrigin:!0};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Na().A,{disableTooltip:!("other"===s&&l),renderTooltip:()=>(0,A.jsx)(d().sA,{defaultMessage:"Access locking can not be set to restricted on templates sold via 3rd party platforms",id:"creatorProfile.templateSubmissionForm.accessLockingTooltip"}),placement:Wo().W.Bottom,render:e=>(0,A.jsx)("div",{...e,children:(0,A.jsx)(xt().A,{...p})})}),(0,A.jsx)("div",{style:a.accessLockingPickerSubtitle,children:(0,A.jsx)(yt().D,{colorName:"secondary",styleName:"Caption-12px/Regular",customStyles:a.accessLockingPickerSubtitle,children:(0,A.jsx)(d().sA,{id:"templateSubmission.accessLocking.label",defaultMessage:"Prevent people from duplicating templates across workspaces, or re-selling purchased templates in Marketplace. {link}",values:{link:(0,A.jsx)(ve().A,{href:va().xS("guides.marketplaceSelling"),style:a.buttonStyles,external:!0,children:(0,A.jsx)(yt().D,{colorName:"primary",styleName:"Caption-12px/Regular",children:(0,A.jsx)(d().sA,{id:"templateSubmission.accessLocking.learnMore",defaultMessage:"Learn more"})})})}})})})]})}var og=()=>a(732770);function sg(e){const{disabled:t}=e,a=(0,r().v3)(),s=(0,d().tz)(),c=(0,o().IS)((e=>({textInput:{background:"none",minHeight:32,display:"flex",alignItems:"center",paddingLeft:6,paddingRight:6},token:{marginLeft:"6px",color:e.text.primary}})),[]),u=il(),p=z().Yr.some((e=>e===Rs().locale))?Rs().locale:z().q,[g,m]=(0,i.useState)(""),[f,h]=(0,i.useState)(""),[b,v]=(0,i.useState)(!1),S=(0,n().K8)((()=>op().A.state.categories),[]),w=(0,n().K8)((()=>op().A.state.templateDraftId),[]),C=(0,n().K8)((()=>op().A.state.isDefaultLocale),[]),j=Gp(w),M=(0,n().K8)((()=>new Set(S.map((e=>e.id)))),[S]);(0,i.useEffect)((()=>{M.size>0&&!j&&C&&Ep(Array.from(M))}),[M,j,C]);const[{value:I,status:k}]=(0,l().Yb)((async()=>{var e;const t=await x().callApi({eventName:"getTemplateSearchResults",environment:a,data:{query:g,locale:p,limit:""!==g?10:100,type:"category",includeRootCategory:!0}});if("success"!==t.type||!t.data.success)return[];const i=null===(e=t.data.templatesCategories)||void 0===e||null===(e=e.items)||void 0===e?void 0:e.filter((e=>!y().zZ.has(e.contentful_id))).map((e=>{var t,a;return{id:e.contentful_id,name:e.name,icon:null==e?void 0:e.icon,rootCategory:{name:null===(t=e.rootCategory)||void 0===t?void 0:t.name,icon:null===(a=e.rootCategory)||void 0===a?void 0:a.icon}}}));if(og().A.setKeyboardMode(!1),""===g){const e=Ht().$z(i,(e=>e.rootCategory.name)),t=Object.values(e),a=Math.max(...t.map((e=>e.length))),r=[];for(let i=0;i<a;i++)t.forEach((e=>{i<e.length&&r.push(e[i])}));return Ht().k4(r.slice(0,60))}return i}),[a,g,p],{debounce:500}),T=(0,i.useMemo)((()=>[{key:"default-teams-list",render:e=>(0,A.jsx)(Pi().A,{...e,title:(0,A.jsx)(d().sA,{id:"templateSubmission.categoryPicker.title",defaultMessage:"Categories"}),loading:!1}),items:("resolved"===k?void 0!==I?I:[]:[]).filter((e=>!M.has(e.id))).map((e=>({key:e.id,render:t=>{var a;return(0,A.jsx)(vt().A,{...t,title:e.name,right:(0,A.jsx)(_().p,{disabled:!0,iconLeading:t=>(0,A.jsx)(lg,{icon:e.icon,style:t,rootCategory:e.rootCategory}),children:null===(a=e.rootCategory)||void 0===a?void 0:a.name}),rightStyle:{paddingTop:2,paddingBottom:2}})},action:()=>{h(""),M.has(e.id)||op().A.setState({...op().A.state,categories:[...S,e]})}})))}]),[I,S,M,k]),P=(0,n().r6)((()=>op().A.state.categories.length),[]);return(0,A.jsx)(Xs().Ay,{popupType:al().n.Popup,placementToOrigin:Wo().W.Bottom,sameWidthAsOrigin:!0,open:b,onDismiss:()=>{m(""),h(""),v(!1)},forceRemeasureStore:P,origin:(0,A.jsx)(tl().Ay,{disabled:t,style:{...c.textInput,...t?u.inputDisabled:{}},focus:b,focusInitial:!1,focusAfterAnimation:!0,format:tl().le.Share,inputDivStyle:{alignItems:"center"},value:f,onChange:e=>{m(e.target.value),h(e.target.value)},onClick:()=>{v(!0)},onRemoveLastToken:()=>{op().A.setState({...op().A.state,categories:op().A.state.categories.slice(0,-1)})},type:"template-categories",tokens:S.map((e=>(0,A.jsx)(el().A,{showRemoveButton:!t,isSingle:!1,style:{...c.token,...t?u.noCursorAllowed:{}},onClickRemove:t=>{t.stopPropagation(),op().A.setState({...op().A.state,categories:S.filter((t=>t.id!==e.id))})},disabled:t,value:(0,A.jsx)("div",{style:{display:"flex"},children:e.name}),format:Js().NY.Small},e.id))),placeholder:t?"":s.formatMessage({id:"templateSubmission.categoryPicker.placeholder",defaultMessage:"Type to search..."}),onEmptySubmit:Ht().D_,showBorder:!0,right:(0,A.jsx)(Je().I,{icon:Uo().J,color:"lightGraySecondary",weight:"bold"})}),render:()=>(0,A.jsx)(xe().A,{menuType:je().gu.Popup,tokenInputHeader:!0,disableHeaderBorder:!0,maxHeight:"25dvh",children:(0,A.jsx)(Ti().Ay,{type:Ti().Oh.Vertical,initialFocus:0,sections:T})}),trapFocus:!1})}const lg=i.memo((function(e){var t,i;const{rootCategory:r,style:n,icon:o}=e,s=(null==r||null===(t=r.icon)||void 0===t?void 0:t.name)||(null==o?void 0:o.name)||"square",l=(null==r||null===(i=r.icon)||void 0===i?void 0:i.color)||(null==o?void 0:o.color)||"lightgray",d="teal"===l?"green":l;return(0,A.jsx)(a(854672).A,{type:"notion_icon",icon:`/icons/${s}_${d}.svg`,size:16,style:n})}),((e,t)=>{var a,i,r,n;return(null==e||null===(a=e.rootCategory.icon)||void 0===a?void 0:a.name)===(null==t||null===(i=t.rootCategory.icon)||void 0===i?void 0:i.name)&&(null==e||null===(r=e.rootCategory.icon)||void 0===r?void 0:r.color)===(null==t||null===(n=t.rootCategory.icon)||void 0===n?void 0:n.color)}));function dg(e){let{disabled:t}=e;const a=(0,o().IS)((e=>({selectInputButton:{border:"none",boxShadow:e.inputBoxShadow,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"18px 14px",width:"100%"},selectText:{height:"20px",fontSize:14,lineHeight:"20px"},selectChevron:{width:16,height:16,fill:e.text.tertiary},buttonStyles:{borderRadius:"4px",padding:"0px 4px"}})),[]),r=il(),s=function(){const e=(0,d().tz)();return(0,i.useMemo)((()=>({none:{label:e.formatMessage({id:"creatorProfile.templateSubmissionForm.emailRequirement.none",defaultMessage:"None"}),caption:e.formatMessage({id:"creatorProfile.templateSubmissionForm.emailRequirement.noneCaption",defaultMessage:"Users do not need to share their email address with me to download my template"})},optional:{label:e.formatMessage({id:"creatorProfile.templateSubmissionForm.emailRequirement.optional",defaultMessage:"Optional"}),caption:e.formatMessage({id:"creatorProfile.templateSubmissionForm.emailRequirement.optionalCaption",defaultMessage:"Let users opt-in to sharing their email address with me to download my template"})},required:{label:e.formatMessage({id:"creatorProfile.templateSubmissionForm.emailRequirement.required",defaultMessage:"Required"}),caption:e.formatMessage({id:"creatorProfile.templateSubmissionForm.emailRequirement.requiredCaption",defaultMessage:"Users must share their email address with me to download my template"})}})),[e])}(),l=(0,n().K8)((()=>op().A.state.emailRequirement||"none"),[]);return(0,A.jsx)(xt().A,{items:[...Dt().fJ],getKey:e=>e,selectedItem:l,onSelect:e=>{op().A.setState({...op().A.state,emailRequirement:e})},originGap:6,width:"100%",minWidth:"100%",renderItem:e=>{const t=s[e.value];return(0,A.jsx)(vt().A,{...e,title:t.label,caption:t.caption})},renderOrigin:e=>(0,A.jsxs)(Xe().A,{...e,size:"lg",style:{...a.selectInputButton,...t?r.inputDisabled:{}},disabled:t,children:[(0,A.jsx)("span",{style:a.selectText,children:s[l].label}),(0,A.jsx)(Je().I,{icon:Gc().arrowChevronSingleDownIcon,color:"lightGraySecondary",weight:"bold"})]}),disabled:t,sameWidthAsOrigin:!0})}function cg(e){const{currentLocale:t}=e,a=(0,d().tz)(),s=(0,r().v3)(),l=(0,o().IS)((e=>({outerContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,maxWidth:960},barContainer:{display:"flex",padding:4,gap:4,background:e.palette.translucentGray[75],borderRadius:4,maxWidth:960,flex:1,flexWrap:"nowrap",overflowX:"auto",scrollbarWidth:"none",whiteSpace:"nowrap"},buttonBaseStyle:{padding:"5.5px 24px",flex:"1 1 auto"},buttonUnselected:{display:"flex",justifyContent:"center",alignItems:"center",color:e.palette.translucentGray[700],borderRadius:4,textAlign:"center"},buttonSelected:{color:e.palette.translucentGray[700],background:e.white,borderRadius:4},languageButton:{padding:6,border:"1px solid rgba(0, 0, 0, 0.06)",borderRadius:6,boxShadow:"0px 0.7px 1.46px 0px rgba(0, 0, 0, 0.01)"},languageContainer:{display:"flex",alignItems:"center",gap:4},languageIcon:{width:14,height:14},baseIndicator:{width:4,height:4,borderRadius:"50%",marginRight:4},inReviewIndicator:{background:e.creatorProfile.inReviewText},rejectedIndicator:{background:e.palette.red[500]},draftIndicator:{background:e.palette.gray[200]}})),[]),c=i.useRef(null),{setView:u,name:p}=Ze(),{type:g}=$(p),m=(0,n().K8)((()=>op().A.state.isDefaultLocale),[])?["new","draft"].includes(g):void 0,f=(0,n().K8)((()=>op().A.state.locale),[]),h=(0,z().p5)(f),b=h&&{locale:h,template:void 0,templateDraft:void 0},v=(0,n().K8)((()=>dp.getLocales()),[]),y=m&&b?[b]:v,x=(0,n().K8)((()=>dp.state.contentfulId),[]);i.useEffect((()=>{_a().Rt({element:c.current,environment:s,options:{behavior:"smooth",inline:"center",block:"nearest"}})}),[t,s]);const{isStatsigReady:S,isFeatureEnabled:w}=(0,pt().O)("self_serve_localization_frontend");if(!S||!t||!v)return null;if(0===y.length||S&&!w)return null;const C=()=>{x&&(dp.setContentfulId(x),pp.openModal())};return S&&(0,A.jsxs)("div",{style:l.outerContainer,children:[(0,A.jsxs)("div",{style:l.barContainer,children:[y.map((e=>{var i;const r=e.locale===t,n={...l.buttonBaseStyle,...l.buttonUnselected,...r?l.buttonSelected:{}},o=null==e||null===(i=e.templateDraft)||void 0===i?void 0:i.status,s=!!o&&["in_review","draft","rejected"].includes(o);return(0,A.jsxs)(ve().A,{style:n,hoveredStyle:n,pressedStyle:n,ref:r?c:null,onClick:()=>(e=>{var t,a,i,r;const n=null!==(t=e.template)&&void 0!==t&&t.id?`/profile/templates/form/published/${null===(a=e.template)||void 0===a?void 0:a.id}`:null!==(i=e.templateDraft)&&void 0!==i&&i.id?`/profile/templates/form/draft/${null===(r=e.templateDraft)||void 0===r?void 0:r.id}`:x?`/profile/templates/form/new/${x}?locale=${e.locale}`:void 0;n&&u(n)})(e),children:[s&&(0,A.jsx)("span",{style:{...l.baseIndicator,..."in_review"===o?l.inReviewIndicator:{},..."rejected"===o?l.rejectedIndicator:{},..."draft"===o?l.draftIndicator:{}}}),(0,A.jsx)(yt().D,{styleName:"Body-13px/Semibold",children:(0,Wr().V)(a)[e.locale].languageNameInCurrentLanguage})]},e.locale)})),x&&1===v.length&&(0,A.jsx)(ve().A,{style:{...l.buttonBaseStyle,...l.buttonUnselected},hoveredStyle:l.buttonUnselected,pressedStyle:l.buttonUnselected,onClick:C,children:(0,A.jsxs)("div",{style:l.languageContainer,children:[(0,Hr().Q)(l.languageIcon),(0,A.jsx)(yt().D,{styleName:"Body-13px/Semibold",children:(0,A.jsx)(d().sA,{id:"TemplateFormLocaleBar.addLanguageCta",defaultMessage:"Add Language"})})]})})]}),x&&v.length>1&&(0,A.jsx)(ve().A,{onClick:C,style:l.languageButton,children:(0,Hr().Q)(l.languageIcon)})]})}function ug(e){const{disabled:t}=e,a=(0,o().IS)((e=>({selectInputButton:{border:"none",boxShadow:e.inputBoxShadow,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"18px 14px",width:"100%"},selectText:{height:"20px",fontSize:14,lineHeight:"20px"},selectChevron:{width:16,height:16,fill:e.text.tertiary},SellWithPickerSubtitle:{display:"inline-flex",gap:"4px",flexWrap:"wrap"},buttonStyles:{borderRadius:"4px",padding:"0px 4px"}})),[]),i=il(),r=(0,d().tz)(),s=(0,n().K8)((()=>({notion:{label:r.formatMessage({id:"creatorProfile.templateSubmissionForm.sellWithNotionTitle",defaultMessage:"Notion"}),caption:r.formatMessage({id:"creatorProfile.templateSubmissionForm.sellWithNotionDescription",defaultMessage:"Sell with Notion"})},other:{label:r.formatMessage({id:"creatorProfile.templateSubmissionForm.sellWithOtherTitle",defaultMessage:"Other"}),caption:r.formatMessage({id:"creatorProfile.templateSubmissionForm.sellWithOtherDescription",defaultMessage:"Sell via a 3rd party platform"})}})),[r]),{selectedSellWith:l}=(0,n().K8)((()=>({selectedSellWith:op().A.state.checkoutEnabled?"notion":"other"})),[]),c={items:["notion","other"],getKey:e=>e,selectedItem:l,onSelect:e=>{const t=op().A.state;let{restrictRedistribution:a,emailRequirement:i}=t;"other"===e&&(a=!1,i="none"),op().A.setState({...t,checkoutEnabled:"notion"===e,restrictRedistribution:a,emailRequirement:i})},originGap:6,width:"100%",minWidth:"100%",renderItem:e=>{const t=s[e.value];return(0,A.jsx)(vt().A,{...e,title:null==t?void 0:t.label,caption:null==t?void 0:t.caption})},renderOrigin:e=>{var r;return(0,A.jsxs)(Xe().A,{size:"lg",...e,style:{...a.selectInputButton,...t?i.inputDisabled:{}},disabled:t,children:[(0,A.jsx)("span",{style:a.selectText,children:null===(r=s[l])||void 0===r?void 0:r.label}),(0,A.jsx)(Je().I,{icon:Gc().arrowChevronSingleDownIcon,color:"lightGraySecondary",weight:"bold"})]})},disabled:t};return(0,A.jsx)(xt().A,{...c})}function pg(e){const{isMobileWidth:t}=(0,m().LS)(),{disabled:a}=e,{price:r,purchaseUrl:s,isFree:l,checkoutEnabled:c,purchaseUrlError:u,priceError:p,verifiedInstantDelivery:g}=(0,n().K8)((()=>op().A.state),[]),f=(0,o().IS)((e=>({priceFields:{transition:"height 100ms",display:"flex",flexDirection:"column",gap:"16px"},priceFieldsValues:{display:"flex",gap:"16px"},priceFieldsValuesMobile:{display:"flex",flexDirection:"column",gap:"12px"},priceFieldsCost:{width:"auto",flexBasis:"20%",flex:1},priceFieldsCostMobile:{width:"100%"},priceFieldsSellWith:{flexBasis:"160px",width:"auto"},priceFieldsSellWithMobile:{width:"100%"},priceFieldsUrl:{width:"auto",flex:2},priceFieldsUrlMobile:{width:"100%"},inputStyle:{background:"none",padding:"8px 14px"},subtext:{fontSize:12,color:e.text.tertiary},inlineLink:{color:e.text.primary,fontWeight:L().Wy.semibold}})),[]),h=il(),b=function(){const e=ya();if(!e)return"required_seller_not_onboarded";return"optional"}(),[v,y]=(0,i.useState)(!1);(0,i.useEffect)((()=>{y(!!s&&Op(s))}),[s]),(0,i.useEffect)((()=>{void 0!==r&&(c?Pp(r):Tp(r))}),[c,r]);const x=ya();return(0,A.jsxs)("section",{style:f.priceFields,children:[(0,A.jsx)(er().O,{htmlLabel:"paidTemplate",name:(0,A.jsx)(d().sA,{defaultMessage:"Paid template",id:"creatorProfile.templateSubmission.paidToggleLabel"}),children:(0,A.jsx)(Lr,{isActive:!l,onClick:()=>{const e=!l,t=void 0===c?!e:c;op().A.setState({...op().A.state,isFree:e,...x?{checkoutEnabled:t}:{},...e?{priceError:void 0,purchaseUrlError:void 0}:{}})},disabled:a})}),l?null:(0,A.jsxs)("section",{style:t?f.priceFieldsValuesMobile:f.priceFieldsValues,children:["optional"===b&&(0,A.jsx)(er().O,{htmlLabel:"templateSellWith",style:t?f.priceFieldsSellWithMobile:f.priceFieldsSellWith,name:(0,A.jsx)(d().sA,{defaultMessage:"Sell with",id:"creatorProfile.templateSubmission.sellWithPickerLabel"}),children:(0,A.jsx)(ug,{disabled:a})}),(0,A.jsx)(er().O,{errorMessage:p,htmlLabel:"templatePrice",style:t?f.priceFieldsCostMobile:f.priceFieldsCost,name:(0,A.jsx)(d().sA,{defaultMessage:"Price (USD)",id:"creatorProfile.templateSubmission.priceLabel"}),children:(0,A.jsx)(Br().A,{value:null==r?void 0:r.toFixed(2),type:"number",id:"templatePrice",onBlur:e=>{const t=e.target.value?Math.floor(Math.abs(100*parseFloat(e.target.value)))/100:void 0,a=op().A.state;op().A.setState({...a,price:t})},onFocus:e=>Rp("priceError"),min:"0.00",step:"0.01",placeholder:"0.00",style:{...f.inputStyle,...a?h.inputDisabled:{}},inputStyle:a?h.noCursorAllowed:{},disabled:a})}),("optional"!==b||!c)&&(0,A.jsxs)(er().O,{errorMessage:u,style:t?f.priceFieldsUrlMobile:f.priceFieldsUrl,name:(0,A.jsx)(d().sA,{defaultMessage:"Purchase URL",id:"creatorProfile.templateSubmission.purchaseUrlLabel"}),children:[(0,A.jsx)(Br().A,{value:null==s?void 0:s.trim(),type:"url",onChange:e=>{const t=op().A.state;op().A.setState({...t,purchaseUrl:e.target.value})},onFocus:e=>Rp("purchaseUrlError"),onBlur:e=>{c?Rp("purchaseUrlError"):(Lp(e.target.value),y(Op(e.target.value)))},placeholder:"https://",style:{...f.inputStyle,...a?h.inputDisabled:{}},inputStyle:a?h.noCursorAllowed:{},disabled:a}),v&&(0,A.jsxs)("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,A.jsx)(os().T,{size:14,checked:g??!1,onClick:()=>{op().A.setState({...op().A.state,verifiedInstantDelivery:!g}),Rp("purchaseUrlError")},disabled:a}),(0,A.jsx)(yt().D,{styleName:"Caption-12px/Regular",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateSubmission.verifyInstantDelivery",defaultMessage:"I confirm that the template will be delivered instantly upon purchase via this link."})})]}),(0,A.jsx)("div",{style:f.subtext,children:"required_seller_not_onboarded"===b?(0,A.jsx)(d().sA,{id:"creatorProfile.templateSubmission.purchaseUrlSubtext.sellerNotOnboarded",defaultMessage:"You are not a Stripe verified creator. To sell directly with Notion get started <link>here</link>.",values:{link:e=>(0,A.jsx)(ha().A,{href:no().JZ.creatorProfile,external:!0,style:f.inlineLink,disableUnderline:!0,children:e})}}):null})]})]})]})}var gg=()=>a(213962),mg=()=>a(299545),fg=()=>a(259122),hg=()=>a(167360),bg=()=>a(201609);function vg(e){const{desktopImage:t,mobileImage:a}=e;fg().Ay.setState({...fg().Ay.state,...t?{desktopImage:t}:{},...a?{mobileImage:a}:{}}),hg().Ay.setState({...hg().Ay.state,video:void 0})}function yg(e){const t=op().A.state.mobileScreenshots,a=op().A.state.screenshots;if(t&&a){const i=1===t.length?[]:[...t.slice(0,e),...t.slice(e+1)],r=1===a.length?[]:[...a.slice(0,e),...a.slice(e+1)];op().A.setState({...op().A.state,screenshots:r,mobileScreenshots:i})}}function xg(){fg().Ay.setState({...fg().Ay.state,desktopImage:fg().BR})}function Sg(){fg().Ay.setState({...fg().Ay.state,mobileImage:fg().H8})}var wg=()=>a(840303);var Cg=()=>a(380048),jg=()=>a(742117),Mg=()=>a(839010);const _g=i.createContext({activeItem:{name:"",itemNode:(0,A.jsx)("div",{}),mainNode:(0,A.jsx)("div",{})}});function Ag(){const e=(0,i.useContext)(_g);if(!e)throw new Error("Must be used within an TemplateImageCarousel");return e}function Ig(e){const{items:t,shouldNotShowCarousel:a}=e,r=(0,d().tz)(),n=(0,i.useRef)(null),o=(0,i.useRef)(null),s=(0,i.useRef)(null),l=Pg(),[c,u]=(0,i.useState)(0),{canScrollLeft:p,canScrollRight:g,onScroll:m}=function(e){const{rootRef:t,scrollLeftRef:a,scrollRightRef:r}=e,[n,o]=(0,i.useState)(!1),[s,l]=(0,i.useState)(!1),d="function"==typeof IntersectionObserver,c=e=>{const[t]=e;o(!t.isIntersecting)},u=e=>{const[t]=e;l(!t.isIntersecting)},p=(0,i.useCallback)((e=>{const{current:a}=t;if(a){const t=Math.abs(.3*a.clientWidth),i="left"===e?-1:1;a.scrollTo({left:a.scrollLeft+t*i,behavior:"smooth"})}}),[t]);return(0,i.useEffect)((()=>{if(d&&a.current&&r.current&&t.current){const e=new IntersectionObserver(c,{threshold:[1],root:t.current}),i=new IntersectionObserver(u,{threshold:[1],root:t.current});return e.observe(a.current),i.observe(r.current),()=>{o(!1),l(!1),e.disconnect(),i.disconnect()}}return()=>{}}),[a,r,d,t]),{canScrollLeft:n,canScrollRight:s,onScroll:p}}({rootRef:n,scrollLeftRef:o,scrollRightRef:s}),f=(0,i.useCallback)((e=>{var a;const i=t[e];null===(a=i.onItemClick)||void 0===a||a.call(i),null!==i.mainNode&&u(e)}),[t]),h=t.length;(0,i.useEffect)((()=>{if(c===h-1){const e=Math.max(0,c-1);f(e)}}),[h,f,c]);const b=t[c];return(0,A.jsx)(_g.Provider,{value:{activeItem:b},children:(0,A.jsxs)("div",{style:l.imageCarousel,children:[(0,A.jsx)(Tg,{}),!a&&(0,A.jsxs)("div",{style:l.imageCarouselRowContainer,children:[(0,A.jsxs)("section",{style:l.imageCarouselRow,ref:n,id:"templateImageCarouselRow",children:[(0,A.jsx)("div",{style:l.carouselScrollStub,ref:o}),t.map(((e,t)=>(0,A.jsx)(kg,{name:e.name,onClick:f,index:t,itemNode:e.itemNode,overlay:e.overlay},e.name))),(0,A.jsx)("div",{style:l.carouselScrollStub,ref:s})]}),p&&(0,A.jsx)("button",{style:{...l.arrow,...l.arrowLeft},onClick:()=>m("left"),"aria-label":r.formatMessage({id:"creatorProfile.templateSubmission.imageCarousel.leftButton",defaultMessage:"View previous images"}),type:"button",children:(0,Cg().I)(l.chevronIcon)}),g&&(0,A.jsx)("button",{style:{...l.arrow,...l.arrowRight},onClick:()=>m("right"),"aria-label":r.formatMessage({id:"creatorProfile.templateSubmission.imageCarousel.rightButton",defaultMessage:"View next images"}),type:"button",children:(0,jg().V)(l.chevronIcon)})]})]})})}function kg(e){const{onClick:t,name:a,index:i,itemNode:r,overlay:n}=e,{activeItem:s}=Ag(),l=function(e){return(0,o().IS)((()=>({imageCarouselItem:{padding:"16px 10px",background:e?"rgba(246, 245, 244, 1)":""},imageCarouselItemContainer:{height:"auto",minWidth:"160px",position:"relative",flexShrink:0,borderRadius:"8px",overflow:"hidden"}})),[e])}(s.name===a);return(0,A.jsxs)("div",{style:l.imageCarouselItemContainer,children:[(0,A.jsx)(Sa().A,{style:l.imageCarouselItem,onClick:()=>t(i),children:r}),n]})}function Tg(){const{activeItem:e}=Ag(),t=Pg();return(0,A.jsx)("div",{style:t.imageCarouselMain,children:null==e?void 0:e.mainNode})}function Pg(){return(0,o().IS)((()=>({imageCarousel:{display:"flex",gap:"32px",flexDirection:"column"},carouselScrollStub:{width:"1px"},imageCarouselRow:{position:"relative",display:"flex",alignItems:"center",marginLeft:"-10px",overflowX:"scroll",gap:"4px"},imageCarouselRowContainer:{position:"relative",overflow:"hidden"},imageCarouselMain:{width:"100%",background:"transparent",position:"relative"},arrow:{zIndex:2,width:"34px",height:"34px",borderRadius:"50%",display:"flex",backgroundColor:"rgba(26, 26, 26, 1)",justifyContent:"center",alignItems:"center",border:"1px solid rgba(26, 26, 26, 1)",position:"absolute",top:"40%",boxShadow:"\n\t\t\t\t\t0px 0.17499999701976776px 1.040624976158142px 0px rgba(0, 0, 0, 0.013),\n\t\t\t\t\t0px 0.800000011920929px 2.924999952316284px 0px rgba(0, 0, 0, 0.02),\n\t\t\t\t\t0px 2.0250000953674316px 7.846875190734863px 0px rgba(0, 0, 0, 0.027),\n\t\t\t\t\t0px 4px 18px 0px rgba(0, 0, 0, 0.04)\n\t\t\t\t"},arrowLeft:{left:"5px"},arrowRight:{right:"5px"},chevronIcon:{height:"20px",width:"20px",color:c().Tj.white}})),[])}function Lg(e){const{data:t}=e,a=(0,o().IS)((()=>({videoContainer:{width:"100%",height:"100%",overflow:"hidden",background:"rgba(0, 0, 0, 1)",position:"relative",borderRadius:"6px",aspectRatio:"16/7.4",boxShadow:"0px 0.6666666865348816px 3.502314805984497px 0px rgba(0, 0, 0, 0.0096),\n\t\t\t\t\t0px 2.933333396911621px 7.251852035522461px 0px rgba(0, 0, 0, 0.0157),\n\t\t\t\t\t0px 7.199999809265137px 14.462499618530273px 0px rgba(0, 0, 0, 0.02),\n\t\t\t\t\t0px 13.866666793823242px 28.348148345947266px 0px rgba(0, 0, 0, 0.0243),\n\t\t\t\t\t0px 23.33333396911621px 52.122684478759766px 0px rgba(0, 0, 0, 0.0304),\n\t\t\t\t\t0px 36px 89px 0px rgba(0, 0, 0, 0.04)"}})),[]);return(0,A.jsx)("div",{style:a.videoContainer,children:(0,A.jsx)(Mg().A,{source:t.iFrameSrcUrl,background:!1,isFullWidth:!0,isFullHeight:!0})})}function Dg(e){const{data:t}=e,a=Rg();return(0,A.jsx)("div",{style:a.itemContainer,children:(0,A.jsx)("div",{style:a.desktopImageContainer,children:(0,A.jsx)(nn().Ay,{src:t.thumbnailImage.url||"",style:a.desktopImage})})})}function Eg(e){var t,a;const i=(0,o().IS)((()=>({imageContainer:{display:"flex",width:"100%",height:"100%",justifyContent:"space-between",alignItems:"center",gap:"25px"},desktopImageContainerLoading:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"},desktopImageContainer:{width:"80%",aspectRatio:"16/10",overflow:"hidden",boxShadow:"0px 0.6666666865348816px 3.502314805984497px 0px rgba(0, 0, 0, 0.0096),\n\t\t\t\t\t0px 2.933333396911621px 7.251852035522461px 0px rgba(0, 0, 0, 0.0157),\n\t\t\t\t\t0px 7.199999809265137px 14.462499618530273px 0px rgba(0, 0, 0, 0.02),\n\t\t\t\t\t0px 13.866666793823242px 28.348148345947266px 0px rgba(0, 0, 0, 0.0243),\n\t\t\t\t\t0px 23.33333396911621px 52.122684478759766px 0px rgba(0, 0, 0, 0.0304),\n\t\t\t\t\t0px 36px 89px 0px rgba(0, 0, 0, 0.04)",borderRadius:"6px"},mobileImageContainer:{width:"25%",overflow:"hidden",aspectRatio:"0.5",boxShadow:"0px 0.6666666865348816px 3.502314805984497px 0px rgba(0, 0, 0, 0.0096),\n\t\t\t\t\t0px 2.933333396911621px 7.251852035522461px 0px rgba(0, 0, 0, 0.0157),\n\t\t\t\t\t0px 7.199999809265137px 14.462499618530273px 0px rgba(0, 0, 0, 0.02),\n\t\t\t\t\t0px 13.866666793823242px 28.348148345947266px 0px rgba(0, 0, 0, 0.0243),\n\t\t\t\t\t0px 23.33333396911621px 52.122684478759766px 0px rgba(0, 0, 0, 0.0304),\n\t\t\t\t\t0px 36px 89px 0px rgba(0, 0, 0, 0.04)",borderRadius:"6px"},desktopImage:{width:"100%",height:"100%",objectFit:"cover",transition:"-webkit-filter 180ms"},mobileImage:{width:"100%",height:"100%",objectFit:"cover",transition:"-webkit-filter 180ms"},hoveredImage:{filter:"brightness(0.8)"}})),[]),{data:r,isHovered:n,isGeneratingImage:s}=e;return(0,A.jsxs)("div",{style:i.imageContainer,children:[(0,A.jsx)("div",{style:i.desktopImageContainer,children:s?(0,A.jsx)("div",{style:i.desktopImageContainerLoading,children:(0,A.jsx)(Ji().A,{})}):(0,A.jsx)(nn().Ay,{src:(null===(t=r.desktop)||void 0===t?void 0:t.url)||"",style:{...i.desktopImage,...n?i.hoveredImage:{}}})}),(0,A.jsx)("div",{style:i.mobileImageContainer,children:s?(0,A.jsx)("div",{style:i.desktopImageContainerLoading,children:(0,A.jsx)(Ji().A,{})}):(0,A.jsx)(nn().Ay,{style:{...i.mobileImage,...n?i.hoveredImage:{}},src:(null===(a=r.mobile)||void 0===a?void 0:a.url)||""})})]})}function Bg(e){var t,a;const{data:i}=e,r=Rg();return(0,A.jsxs)("div",{style:r.itemContainer,children:[(0,A.jsx)("div",{style:r.desktopImageContainer,children:(0,A.jsx)(nn().Ay,{style:r.desktopImage,src:(null===(t=i.desktop)||void 0===t?void 0:t.url)||""})}),(0,A.jsx)("div",{style:r.mobileImageContainer,children:(0,A.jsx)(nn().Ay,{style:r.mobileImage,src:(null===(a=i.mobile)||void 0===a?void 0:a.url)||""})})]})}function Rg(){return(0,o().IS)((()=>({itemContainer:{display:"flex",width:"100%",height:"100%",justifyContent:"space-between",gap:"12px",alignItems:"center",padding:"12px",position:"relative"},desktopImageContainer:{width:"160px",aspectRatio:"16/10",overflow:"hidden",borderRadius:"6px",boxShadow:"\n\t\t\t\t0px 0.17499999701976776px 1.040624976158142px 0px rgba(0, 0, 0, 0.013),\n\t\t\t\t0px 0.800000011920929px 2.924999952316284px 0px rgba(0, 0, 0, 0.02),\n\t\t\t\t0px 2.0250000953674316px 7.846875190734863px 0px rgba(0, 0, 0, 0.027),\n\t\t\t\t0px 4px 18px 0px rgba(0, 0, 0, 0.04)\n\t\t\t\t"},mobileImageContainer:{width:"51px",height:"100px",overflow:"hidden",borderRadius:"6px",boxShadow:"\n\t\t\t\t0px 0.17499999701976776px 1.040624976158142px 0px rgba(0, 0, 0, 0.013),\n\t\t\t\t0px 0.800000011920929px 2.924999952316284px 0px rgba(0, 0, 0, 0.02),\n\t\t\t\t0px 2.0250000953674316px 7.846875190734863px 0px rgba(0, 0, 0, 0.027),\n\t\t\t\t0px 4px 18px 0px rgba(0, 0, 0, 0.04)\n\t\t\t\t"},desktopImage:{width:"100%",height:"100%",objectFit:"cover"},mobileImage:{width:"100%",height:"100%",objectFit:"cover"}})),[])}function Fg(){return(0,o().IS)((e=>({imageUploadTabViewContainer:{display:"flex",flexDirection:"column",gap:"10px"},imagesContainer:{display:"flex",gap:"20px",alignItems:"center",maxHeight:"184px"},imageContainer:{display:"flex",flexDirection:"column",gap:"10px",width:"100%",height:"100%"},desktopImageContainer:{width:"80%",aspectRatio:"16/10",flexShrink:"initial"},mobileImageContainer:{width:"25%",aspectRatio:"0.5",flexShrink:"initial"},uploadedImageContainer:{width:"100%",height:"100%",position:"relative"},uploadedImage:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"6px"},toggleAndInputContainer:{display:"flex",flexDirection:"column",gap:"10px"},errorMessage:{fontSize:"12px",color:e.palette.red[500],width:"303px"}})),[])}function Ug(e){const{children:t}=e,a=(0,o().IS)((()=>({customErrorText:{fontSize:"12px",color:"rgba(17, 17, 17, 0.5)"}})),[]);return(0,A.jsx)("span",{style:a.customErrorText,children:t})}function Ng(e){const{isActive:t,onClick:a,disabled:i}=e,r=(0,o().IS)((()=>({toggleContainer:{display:"flex",alignItems:"center",gap:"10px"},uploadCustomImagesText:{fontSize:"12px",color:"rgba(51, 51, 51, 1)"}})),[]);return(0,A.jsxs)("div",{style:r.toggleContainer,children:[(0,A.jsx)(Lr,{isActive:t,onClick:a,disabled:i}),(0,A.jsx)("span",{style:r.uploadCustomImagesText,children:(0,A.jsx)(d().sA,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.templateLink.toggle.label",defaultMessage:"Upload my own images"})})]})}function zg(){return(0,o().IS)((()=>({titleText:{fontSize:"13.5px",color:"rgba(102, 102, 102, 1)",fontWeight:L().Wy.medium},subTitleText:{fontSize:"12px",color:"rgba(17, 17, 17, 0.5)"},uploadCustomImageContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",gap:"4px"},uploadIcon:{width:"16px",height:"16px",color:"rgba(102, 102, 102, 1)"},titleContainer:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"}})),[])}function Vg(e){const{isCustomImageUpload:t,isDisabled:a}=e,i=zg(),r=(0,o().IS)((()=>({desktopImageTemplateLinkPlaceholderText:{textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",padding:"12px"}})),[]);return a?null:t?(0,A.jsxs)("div",{style:i.uploadCustomImageContainer,children:[(0,A.jsxs)("div",{style:i.titleContainer,children:[(0,A.jsx)("span",{children:ol(i.uploadIcon)}),(0,A.jsx)("span",{style:i.titleText,children:(0,A.jsx)(d().sA,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.customImage.desktop.title",defaultMessage:"Desktop"})})]}),(0,A.jsx)("span",{style:i.subTitleText,children:(0,A.jsx)(d().sA,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.customImage.desktop.subtitle",defaultMessage:"2048 × 1280 · Required"})})]}):(0,A.jsx)("span",{style:r.desktopImageTemplateLinkPlaceholderText,children:(0,A.jsx)(d().sA,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.templateLink.placeholder",defaultMessage:"Enter template link to generate image"})})}function Hg(e){const{style:t,onClick:a,isUploading:r,disabled:n,imageUrl:s,emptyState:l,imageOverlay:d,isStatic:c}=e,u=(0,o().IS)((()=>({imageUploadContainer:{display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(246, 245, 244, 1)",borderRadius:"6px",border:"1px solid rgba(0, 0, 0, 0.04)",height:"100%",padding:0},buttonHovered:{background:"rgba(0, 0, 0, 0.04)"},buttonHoveredWithImage:{background:"rgba(0, 0, 0, 0.2)"},hoveredDiv:{cursor:"pointer"}})),[]),p=(0,i.useRef)(null),{isHovered:g,isTouchDevice:m}=sn(p),f=!c&&(g||m),h=g&&!c&&!n;return void 0===a||c?(0,A.jsx)("div",{style:{...u.imageUploadContainer,...h?u.hoveredDiv:{},...t},ref:p,children:(0,A.jsx)(Og,{imageUrl:s,imageOverlay:f?d:void 0,isUploading:r,emptyState:l,isStatic:c})}):(0,A.jsx)(_().p,{onClick:a,disabled:n,style:{...u.imageUploadContainer,...h?u.hoveredDiv:{},...t},ref:p,children:(0,A.jsx)(Og,{imageUrl:s,imageOverlay:f?d:void 0,isUploading:r,emptyState:l})})}function Og(e){const{isUploading:t,imageUrl:a,emptyState:r,imageOverlay:n,isStatic:s}=e,l=Fg(),d=(0,o().IS)((()=>({imageHovered:{filter:"brightness(0.8)"}})),[]),c=(0,i.useRef)(null),{isHovered:u,isTouchDevice:p}=sn(c);return t?(0,A.jsx)(Ji().A,{}):a?(0,A.jsxs)("div",{style:l.uploadedImageContainer,ref:c,children:[n,(0,A.jsx)(nn().Ay,{src:a,style:{...l.uploadedImage,...!u||p||s?{}:d.imageHovered}})]}):(0,A.jsx)(A.Fragment,{children:r})}function Wg(e){const{onClick:t}=e,a=(0,o().IS)((()=>({button:{top:-8,right:-4,position:"absolute",borderRadius:"12px",height:"24px",padding:"0px",zIndex:2},icon:{height:24,width:24,fill:"white"}})),[]);return(0,A.jsx)(_r().u,{testId:"remove-image-preview-button",variant:"dark",style:a.button,onClick:t,children:(0,gg().s)(a.icon)})}function qg(e){const{isCustomImageUpload:t,isDisabled:a}=e,i=zg();return a?null:t?(0,A.jsxs)("div",{style:i.uploadCustomImageContainer,children:[(0,A.jsxs)("div",{style:i.titleContainer,children:[(0,A.jsx)("span",{children:ol(i.uploadIcon)}),(0,A.jsx)("span",{style:i.titleText,children:(0,A.jsx)(d().sA,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.customImage.mobile.title",defaultMessage:"Mobile"})})]}),(0,A.jsx)("span",{style:i.subTitleText,children:(0,A.jsx)(d().sA,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.customImage.mobile.subtitle",defaultMessage:"750 × 1500"})}),(0,A.jsx)("span",{style:i.subTitleText,children:(0,A.jsx)(d().sA,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.customImage.mobile.required",defaultMessage:"Required"})})]}):null}function Kg(e){const{desktopImage:t,mobileImage:a,errorMessage:o}=(0,n().K8)((()=>fg().Ay.state),[]),{screenshots:s}=(0,n().K8)((()=>op().A.state),[]),{onToggle:l,type:c}=e,[u,p]=(0,i.useState)(null),g=(0,r().v3)(),m=Fg(),f=(0,i.useCallback)((e=>{null!==u&&vg("desktop"===u?{desktopImage:{url:e,width:fg().c4,height:fg().$z}}:{mobileImage:{url:e,width:fg()._3,height:fg().jj}})}),[u]),h=(0,i.useCallback)((e=>{"upload"===e.type&&fo().log({level:"error",from:"TemplateSubmissionFormImageUpload",type:"uploadError",error:(0,bo().convertErrorToLog)(e.error)}),fg().Ay.setState({...fg().Ay.state,errorMessage:e.message})}),[]),b=(0,i.useCallback)((()=>{fg().Ay.setState({...fg().Ay.state,errorMessage:void 0,isUploading:!0})}),[]),v=(0,i.useCallback)((()=>{p(null),fg().Ay.setState({...fg().Ay.state,errorMessage:void 0,isUploading:!1})}),[]),{uploadFile:x,isUploading:S}=(0,ll().lN)({onStart:b,onSuccess:f,onError:h,onComplete:v,environment:g});(0,i.useEffect)((()=>{null!==u&&x()}),[u]);const w=S&&"desktop"===u,C=S&&"mobile"===u,j=s&&s.length===y().x_&&"new"===c,M=S||j,_=w||j,I=C||j;return(0,A.jsxs)("div",{style:m.imageUploadTabViewContainer,children:[(0,A.jsxs)("div",{style:m.imagesContainer,children:[(0,A.jsx)(Hg,{style:m.desktopImageContainer,isUploading:w,onClick:()=>{"desktop"!==u?p("desktop"):x()},disabled:M,imageUrl:t.url,emptyState:(0,A.jsx)(Vg,{isCustomImageUpload:!0,isDisabled:_}),imageOverlay:(0,A.jsx)(Wg,{onClick:()=>xg()})}),(0,A.jsx)(Hg,{style:m.mobileImageContainer,isUploading:C,onClick:()=>{"mobile"!==u?p("mobile"):x()},disabled:M,imageUrl:a.url,emptyState:(0,A.jsx)(qg,{isCustomImageUpload:!0,isDisabled:I}),imageOverlay:(0,A.jsx)(Wg,{onClick:()=>Sg()})})]}),(0,A.jsxs)("div",{style:m.toggleAndInputContainer,children:[(0,A.jsx)(Ng,{isActive:!0,onClick:l}),j&&(0,A.jsx)(Ug,{children:(0,A.jsx)(d().sA,{id:"creatorPlatform.template.imageUpload.status.maxLimit",defaultMessage:"You can only upload a maximum of {maxNumImages} images.",values:{maxNumImages:y().x_}})}),void 0!==o&&(0,A.jsx)("span",{style:m.errorMessage,children:o})]})]})}_g.displayName="TemplateImageCarouselContext";var Gg=()=>a(982615);function Zg(e){const t=(0,d().tz)(),{generationFn:a,validationFn:r}=e,[n,o]=(0,i.useState)("idle"),[s,l]=(0,i.useState)(null);return{status:n,errorMessage:s,onScreenshotGeneration:async()=>{try{l(null),o("parsing"),await r(),o("uploading"),await a(),o("success")}catch(e){o("error"),e instanceof Error?l(e.message):l(t.formatMessage({id:"templates.screenshotGeneration.generic.error",defaultMessage:"Unable to generate screenshot. Please try again."}))}}}}function $g(e){const{inputProps:t,buttonProps:a}=e,i=(0,o().IS)((()=>({linkContainer:{display:"flex",alignItems:"center",gap:"20px"}})),[]);return(0,A.jsxs)("div",{style:i.linkContainer,children:[(0,A.jsx)(Br().A,{...t}),(0,A.jsx)(_r().u,{...a,children:(0,A.jsx)(d().sA,{defaultMessage:"Generate",id:"creatorProfile.templateImageUploader.dialog.link.generate"})})]})}function Yg(e){const{status:t,left:a,children:i}=e,r=(0,o().IS)((e=>({statusContainer:{display:"flex",alignItems:"center",gap:"2px"},statusText:{fontSize:"12px"},parsingText:{color:"rgba(17, 17, 17, 0.5)"},generatingText:{color:"rgba(39, 145, 141, 1)"},successText:{color:"rgba(42, 157, 153, 1)"},errorText:{color:e.palette.red[500]}})),[]),n={...r.statusText,..."parsing"===t?r.parsingText:{},..."uploading"===t?r.generatingText:{},..."success"===t?r.successText:{},..."error"===t?r.errorText:{}};return(0,A.jsxs)("div",{style:{...r.statusContainer,...n},children:[a,i]})}function Qg(e){const{onToggle:t,type:a}=e,s=(0,r().v3)(),l=(0,o().IS)((e=>({templateLinkContainer:{display:"flex",flexDirection:"column",gap:"4px"},templateLinkInput:{backgroundColor:e.white,height:"36px",width:"303px"},checkmarkIcon:{width:"14px",height:"14px"},uploadStatusMessageContainer:{width:"303px"}})),[]),c=il(),u=Fg(),{desktopImage:p,mobileImage:g,errorMessage:m}=(0,n().K8)((()=>fg().Ay.state),[]),{screenshots:f}=(0,n().K8)((()=>op().A.state),[]),{status:h,onScreenshotGeneration:b,errorMessage:v}=Zg({validationFn:async()=>{try{const e=await async function(e){const t=op().A.state,{environment:a,url:i}=e;if(!i){const e=new(ar().rTV)("Missing template URL.",{type:"template_missing_url"});return{success:!1,error:(0,st().DX)(O().A.getIntl(),e.body)}}const r=(0,Ee().parseRoute)({url:i.trim(),baseUrl:Re().A.domainBaseUrl,isMobile:a.device.isMobile,publicDomainName:Re().A.publicDomainName,protocol:Re().A.protocol,currentUrl:window.location.href});if(!r||"page"!==r.name||!r.blockId){const e=new(ar().rTV)(`Invalid template URL ${i}`,{type:"template_not_exists"});return{success:!1,error:(0,st().DX)(O().A.getIntl(),e.body)}}if(!r.requestedOnPublicDomain){const e=new(ar().rTV)(`Template ${i} is not on public domain`,{type:"template_not_on_public_domain"});return{success:!1,error:(0,st().DX)(O().A.getIntl(),e.body)}}if("page"===r.name){const e=new(Bt().Bv)(a,{table:Ri().ev,id:r.blockId});await(0,mg().hS)(e);const i=(0,Ho().fU)(e);let n=!1;for(const a of i)if(a.id===t.uuid){n=!0;break}if(!n){const e=new(ar().rTV)("This link doesn’t seem to belong to the same template. Please try again.",{type:"template_not_child_of_parent"});return{success:!1,error:(0,st().DX)(O().A.getIntl(),e.body)}}}return{success:!0}}({environment:s,url:x});if(!e.success)throw new Error(e.error)}catch(e){throw e}},generationFn:async()=>{const e=Xg(a,x);try{await async function(e){const{url:t,environment:a}=e,i=await yp({url:t,environment:a}).catch((e=>{throw e}));return i&&"value"in i&&vg({desktopImage:i.value.desktop,mobileImage:i.value.mobile}),!0}({environment:s,url:e})}catch(t){throw t}}}),[x,S]=(0,i.useState)(""),w=f&&f.length===y().x_&&"new"===a,C="uploading"===h||"parsing"===h||w,j=(0,i.useCallback)((()=>{const e=Xg(a,x);S(e);try{fg().Ay.setState({...fg().Ay.state,isUploading:!0}),b()}catch(t){}finally{fg().Ay.setState({...fg().Ay.state,isUploading:!1})}}),[b,x,a]);return(0,A.jsxs)("div",{style:u.imageUploadTabViewContainer,children:[(0,A.jsxs)("div",{style:u.imagesContainer,children:[(0,A.jsx)(Hg,{isStatic:"cover"===a,style:u.desktopImageContainer,isUploading:"uploading"===h,imageUrl:p.url,emptyState:(0,A.jsx)(Vg,{isCustomImageUpload:!1,isDisabled:C}),imageOverlay:(0,A.jsx)(Wg,{onClick:()=>xg()}),disabled:C}),(0,A.jsx)(Hg,{isStatic:"cover"===a,style:u.mobileImageContainer,isUploading:"uploading"===h,imageUrl:g.url,emptyState:(0,A.jsx)(qg,{isCustomImageUpload:!1,isDisabled:C}),imageOverlay:(0,A.jsx)(Wg,{onClick:()=>Sg()}),disabled:C})]}),(0,A.jsxs)("div",{style:u.toggleAndInputContainer,children:["cover"!==a?(0,A.jsx)(Ng,{isActive:!1,onClick:t,disabled:C}):null,(0,A.jsxs)("div",{style:l.templateLinkContainer,children:[(0,A.jsx)($g,{inputProps:{format:Br().C.Default,placeholder:"https://",value:x,style:{...l.templateLinkInput,...C?c.inputDisabled:{}},inputStyle:{...C?c.noCursorAllowed:{}},onChange:e=>S(e.target.value),type:"url",disabled:C},buttonProps:{onClick:j,variant:"light",disabled:!x.startsWith("https://")||C}}),(0,A.jsxs)("div",{style:l.uploadStatusMessageContainer,children:[w&&(0,A.jsx)(Ug,{children:(0,A.jsx)(d().sA,{id:"creatorPlatform.template.imageUpload.status.maxLimit",defaultMessage:"You can only upload a maximum of {maxNumImages} images.",values:{maxNumImages:y().x_}})}),"idle"!==h&&(0,A.jsx)(Yg,{status:h,left:"success"===h?(0,A.jsx)("span",{children:(0,Gg().$)(l.checkmarkIcon)}):void 0,children:(0,A.jsx)(Jg,{status:h,errorMessage:v})}),Boolean(m)?(0,A.jsx)("span",{style:u.errorMessage,children:m}):null]})]})]})]})}function Jg(e){const{status:t,errorMessage:a}=e;return"parsing"===t?(0,A.jsx)(d().sA,{id:"creatorPlatform.template.imageUpload.templateLink.status.parsing",defaultMessage:"Parsing link..."}):"uploading"===t?(0,A.jsx)(d().sA,{id:"creatorPlatform.template.imageUpload.templateLink.status.generating",defaultMessage:"Generating Preview..."}):"success"===t?(0,A.jsx)(d().sA,{id:"creatorPlatform.template.imageUpload.templateLink.status.success",defaultMessage:"Preview saved."}):"error"===t?(0,A.jsx)(A.Fragment,{children:a}):void(0,V().HB)(t)}function Xg(e,t){if("cover"===e){const e=new URL(t);return`${e.origin}${e.pathname}`}return t}function em(e){const{type:t}=e,[a,r]=(0,i.useState)(!1),n=i.useCallback((()=>{r((e=>!e))}),[]);return a&&"cover"!==t?(0,A.jsx)(Kg,{onToggle:n,type:t}):(0,A.jsx)(Qg,{onToggle:n,type:t})}function tm(){const e=(0,n().K8)((()=>hg().Ay.state.video),[]),t=(0,n().K8)((()=>op().A.state.videos||[]),[]),a=(0,d().tz)(),s=(0,r().v3)(),[l,c]=(0,i.useState)(""),[u,p]=(0,i.useState)((()=>(null==e?void 0:e.url)||"")),g=il(),m=(0,o().IS)((e=>({videoTabContainer:{display:"flex",flexDirection:"column",gap:"10px"},iframeContainer:{width:"400px",height:"224px",position:"relative",background:"rgba(0, 0, 0, 1)"},videoLinkInputContainer:{display:"flex",flexDirection:"column",gap:"4px"},videoLinkInput:{background:"none",height:"36px",width:"303px",padding:"8px 14px"},statusMessageContainer:{width:"303px"}})),[]),{status:f,onScreenshotGeneration:h,errorMessage:b}=Zg({validationFn:async()=>{},generationFn:async()=>{const e=await(0,bg().l9)({environment:s,url:u});if(!e.success)throw new Error(e.error);(0,bg().B4)({video:e.templateVideo})}});(0,i.useEffect)((()=>{e?(async()=>{if(e){const t=await(0,bg().W)({environment:s,video:e});c(t.iFrameSrcUrl)}})():(c(""),p(""))}),[e,s]);const v="parsing"===f||"error"===f,y=0!==t.length&&!e;return(0,A.jsxs)("div",{style:m.videoTabContainer,children:[l&&(0,A.jsx)("div",{style:m.iframeContainer,children:(0,A.jsx)(Mg().A,{source:l,background:!1,style:m.iframeContainer,isFullHeight:!0,isFullWidth:!0})}),(0,A.jsxs)("div",{style:m.videoLinkInputContainer,children:[(0,A.jsx)($g,{inputProps:{format:Br().C.Default,placeholder:a.formatMessage({id:"creatorPlatform.templates.imageUpload.video.link.placeholder",defaultMessage:"Enter YouTube or Vimeo link..."}),value:u,onChange:e=>p(e.target.value),type:"url",disabled:y,style:{...m.videoLinkInput,...y?g.inputDisabled:{}},inputStyle:y?g.noCursorAllowed:{}},buttonProps:{onClick:h,variant:"light",disabled:0===u.length||y}}),(0,A.jsxs)("div",{style:m.statusMessageContainer,children:[y&&(0,A.jsx)(Ug,{children:(0,A.jsx)(d().sA,{id:"creatorPlatform.template.videoUpload.status.maxLimit",defaultMessage:"Only one preview video is supported at this time."})}),v&&(0,A.jsx)(Yg,{status:f,children:(0,A.jsx)(am,{status:f,errorMessage:b})})]})]})]})}function am(e){const{status:t,errorMessage:a}=e;return"parsing"===t?(0,A.jsx)(d().sA,{id:"creatorPlatform.template.imageUpload.templateLink.status.parsing",defaultMessage:"Parsing link..."}):"error"===t?(0,A.jsx)(A.Fragment,{children:a}):void(0,V().HB)(t)}function im(e){const{selectedIndex:t,onTabChange:a,type:i}=e,r=(0,o().IS)((e=>({tab:{color:"rgba(17, 17, 17, 0.5)"},selectedTab:{color:e.text.primary}})),[]),n=Object.keys(nm).filter((e=>"cover"!==i||"image"===e)).map((e=>{if((0,V().O)(nm,e))return nm[e].tabLabel}));return(0,A.jsx)(Pe().Ay,{tabs:n,selectedIndex:t,onChange:e=>{a(e)},tabStyle:r.tab,selectedTabStyle:r.selectedTab})}const rm=["image","video"],nm={image:{index:rm.indexOf("image"),tabLabel:(0,A.jsx)("span",{children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.tabs.image",defaultMessage:"Image"})},"templateImageUploadTab-image")},video:{index:rm.indexOf("video"),tabLabel:(0,A.jsx)("span",{children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.tabs.video",defaultMessage:"Video"})},"templateImageUploadTab-video")}};function om(e){const t=(0,r().v3)(),{type:a}=e,[s,l]=(0,i.useState)("video"===a?1:0),c=(0,o().IS)((e=>({imageDialogContainer:{display:"flex",flexDirection:"column"},tabMenuDialogContainer:{position:"relative",marginBottom:"20px"},removeButton:{position:"absolute",top:8,right:0,fontSize:"13.5px",color:e.palette.red[500],zIndex:2},actionContainer:{display:"flex",justifyContent:"flex-end",paddingRight:"0",marginTop:"24px",marginBottom:"-10px",gap:"12px"}})),[]),u=(0,d().tz)(),{desktopImage:p,mobileImage:g}=(0,n().K8)((()=>fg().Ay.state),[]),{video:m}=(0,n().K8)((()=>hg().Ay.state),[]),f=i.useCallback((()=>{const e=function(e){const{intl:t}=e,{desktopImage:a,mobileImage:i}=fg().Ay.state;return i.url&&!a.url?(fg().Ay.setState({...fg().Ay.state,errorMessage:t.formatMessage({id:"creatorPlatform.template.imageUpload.desktopImage.required.error",defaultMessage:"Desktop image is required."})}),!1):!(a.url&&!i.url&&(fg().Ay.setState({...fg().Ay.state,errorMessage:t.formatMessage({id:"creatorPlatform.template.imageUpload.mobileImage.required.error",defaultMessage:"Mobile image is required."})}),1))}({intl:u});e&&(!function(e,t){var a,i;const{desktopImage:r,mobileImage:n,index:o}=fg().Ay.state,s=[...op().A.state.screenshots||[]],l=[...op().A.state.mobileScreenshots||[]];if((void 0!==o||r.url||n.url)&&(void 0===o||r.url!==(null===(a=s[o])||void 0===a?void 0:a.url)||n.url!==(null===(i=l[o])||void 0===i?void 0:i.url)))if(void 0===o||r.url||n.url){if("cover"===e)return(0,j().v)(t,"creator_profile_template_update_cover"),void(r.url&&n.url&&op().A.setState({...op().A.state,image:r,mobileImage:n}));void 0===o?(s.push(r),l.push(n)):(s[o]=r,l[o]=n),(0,j().v)(t,"creator_profile_template_add_image_preview"),op().A.setState({...op().A.state,screenshots:s,mobileScreenshots:l})}else yg(o)}(a,t),(0,bg().YQ)(t),S().zw())}),[u,a,t]),h=i.useCallback((e=>{l(e)}),[]),b=0===s&&(Boolean(null==p?void 0:p.url)||Boolean(null==g?void 0:g.url)),v="cover"!==a&&(b||1===s&&m);return(0,A.jsxs)("div",{style:c.imageDialogContainer,children:[(0,A.jsxs)("div",{style:c.tabMenuDialogContainer,children:[(0,A.jsx)(im,{selectedIndex:s,onTabChange:h,type:a}),v&&(0,A.jsx)(_().p,{onClick:()=>{fg().Ay.setState({...fg().Ay.state,desktopImage:fg().BR,mobileImage:fg().H8}),(0,bg().gg)()},style:c.removeButton,children:(0,A.jsx)(d().sA,{id:"creatorPlatform.templates.imageUpload.remove",defaultMessage:"Remove"})})]}),(0,A.jsx)("div",{children:0===s?(0,A.jsx)(em,{type:a}):1===s?(0,A.jsx)(tm,{}):null}),(0,A.jsxs)("div",{style:c.actionContainer,children:[(0,A.jsx)(_r().u,{variant:"neutral",onClick:()=>S().zw(),children:(0,A.jsx)(d().sA,{defaultMessage:"Cancel",id:"creatorPlatform.templates.imageUpload.cancel"})}),(0,A.jsx)(_r().u,{variant:"dark",onClick:f,children:(0,A.jsx)(d().sA,{defaultMessage:"Save",id:"creatorPlatform.templates.imageUpload.save"})})]})]})}function sm(e){const{type:t}=e,a=(0,o().IS)((e=>({imageUploaderHeaderContainer:{display:"flex",flexDirection:"column",gap:"4px"},imageUploaderHeader:{fontSize:"24px",fontWeight:L().Wy.bold,color:e.text.primary},imageUploaderSubheader:{fontSize:"15px",color:e.text.primary},closeIconButtonContainer:{position:"absolute",top:"12px",right:"12px"},closeIconButton:{padding:"4px"},closeIconDisabled:{cursor:"not-allowed"},closeIconButtonHovered:{background:"rgba(0, 0, 0, 0.04)",borderRadius:"4px"},closeIcon:{width:"20px",height:"20px"}})),[]),{isUploading:r}=(0,n().K8)((()=>fg().Ay.state),[]),s=(0,i.useCallback)((()=>{S().zw()}),[]);return(0,A.jsxs)("div",{style:a.imageUploaderHeaderContainer,children:[(0,A.jsx)("div",{style:a.closeIconButtonContainer,children:(0,A.jsx)(_().p,{style:{...a.closeIconButton,...r?a.closeIconDisabled:{}},hoveredStyle:a.closeIconButtonHovered,onClick:s,disabled:r,children:(0,A.jsx)("span",{children:(0,M().u)(a.closeIcon)})})}),(0,A.jsx)("span",{style:a.imageUploaderHeader,children:(0,A.jsx)(lm,{type:t})}),(0,A.jsx)("span",{style:a.imageUploaderSubheader,children:(0,A.jsx)(dm,{type:t})})]})}function lm(e){const{type:t}=e;return"image"===t||"new"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.header.images",defaultMessage:"Add Preview"}):"cover"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.header.cover",defaultMessage:"Template Cover"}):"video"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.header.video",defaultMessage:"Add Video Preview"}):void(0,V().HB)(t)}function dm(e){const{type:t}=e;return"new"===t||"video"===t||"image"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.subheader",defaultMessage:"Link to another location in your template, upload your own images, or link to a video."}):"cover"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.subheader.cover",defaultMessage:"Cover is your template’s default preview image. It is automatically generated from its link, or can be set to another location in your template."}):void(0,V().HB)(t)}const cm=[{itemNode:(0,A.jsx)("div",{}),mainNode:(0,A.jsx)(gm,{}),name:"loading"}];function um(e){const{type:t,index:a}=e,i=(0,o().IS)((()=>({button:{position:"absolute",top:"4px",right:"4px",borderRadius:"12px",height:"24px",padding:"0px"},icon:{height:24,width:24,fill:"white"}})),[]),n=(0,r().v3)();return(0,A.jsx)(_r().u,{variant:"dark",style:i.button,onClick:()=>function(e){const{index:t,type:a,environment:i}=e;"image"===a?((0,j().v)(i,"creator_profile_template_remove_image_preview"),yg(t)):"video"===a&&((0,j().v)(i,"creator_profile_template_remove_video_preview"),(0,bg().Mx)(t))}({type:t,index:a,environment:n}),children:(0,gg().s)(i.icon)})}function pm(){const e=il(),t=(0,o().IS)((e=>({addPreviewThumbnailContainer:{display:"flex",height:"110px",alignItems:"center",flexDirection:"column",justifyContent:"center",gap:"4px",borderRadius:"6px",border:"1px solid rgba(0, 0, 0, 0.04)",backgroundColor:"rgba(246, 245, 244, 1)",cursor:"pointer"},addPreviewIcon:{width:"18px",height:"18px"},addPreviewText:{fontSize:"13.5px",color:"rgba(102, 102, 102, 1)"},imageUploaderDialog:{width:"456px"},mainImageEditContainer:{opacity:0,position:"absolute",bottom:"12px",right:"12px",transition:"opacity 180ms",display:"flex",gap:"14px"},hoveredMainImageEditContainer:{opacity:1},errorMessage:{fontSize:12,color:e.errorText}})),[]),a=(0,r().v3)(),{screenshots:i,coverImage:s,hasImages:l,videos:c,imageError:u,status:p,isGeneratingImage:g}=(0,n().K8)((()=>{const{mobileImage:e,image:t,mobileScreenshots:a,screenshots:i,imageError:r,videos:n,status:o,isGeneratingImage:s}=op().A.state,l={mobile:e,desktop:t},d=null==i?void 0:i.map(((e,t)=>({mobile:null==a?void 0:a[t],desktop:e})));return{coverImage:l,hasImages:Boolean(t&&t.url),screenshots:d,videos:n,status:o,isGeneratingImage:s,imageError:r}}),[]),m=(0,wg().K)({videos:c}),f="in_review"===p||g,h=e=>{!function(e){"image"===e.type||"cover"===e.type?fg().Ay.setState({...fg().Ay.state,desktopImage:e.desktopImage,mobileImage:e.mobileImage,index:e.index}):"video"===e.type?hg().Ay.setState({video:e.video,index:e.index}):"new"===e.type&&(fg().Ay.reset(),hg().Ay.reset())}(e),S().ui({items:[],message:(0,A.jsx)(sm,{type:e.type}),description:(0,A.jsx)(om,{type:e.type}),showCancel:!1,keepFocus:!0,mode:"wide",innerStyle:t.imageUploaderDialog,disableBackgroundDismiss:!0,onDismiss:()=>{fg().Ay.reset(),hg().Ay.reset()}})},b=[{itemNode:(0,A.jsx)(Bg,{data:s}),mainNode:(0,A.jsx)(mm,{children:e=>{let{isHovered:i,isTouchDevice:r}=e;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Eg,{data:s,isHovered:i&&!f,isGeneratingImage:g}),void 0===s.desktop||f?null:(0,A.jsxs)("div",{style:{...t.mainImageEditContainer,...i||r?t.hoveredMainImageEditContainer:{}},children:[(0,A.jsx)(_r().u,{variant:"light",onClick:()=>Np(a),children:(0,A.jsx)(d().sA,{defaultMessage:"Regenerate",id:"creatorProfile.imageUploader.main.regenCover"})}),(0,A.jsx)(_r().u,{variant:"light",onClick:()=>h({desktopImage:s.desktop||fg().BR,mobileImage:s.mobile||fg().H8,index:0,type:"cover"}),children:(0,A.jsx)(d().sA,{defaultMessage:"Edit Cover",id:"creatorProfile.imageUploader.main.editCover"})})]})]})}}),name:"cover-image"},...m.map(((e,a)=>({itemNode:(0,A.jsx)(mm,{children:t=>{let{isHovered:i,isTouchDevice:r}=t;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Dg,{data:e}),!i&&!r||f?null:(0,A.jsx)(um,{index:a,type:"video"})]})}}),mainNode:(0,A.jsx)(mm,{children:i=>{let{isHovered:r,isTouchDevice:n}=i;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Lg,{data:e}),!f&&(0,A.jsx)(_r().u,{style:{...t.mainImageEditContainer,...r||n?t.hoveredMainImageEditContainer:{}},variant:"light",onClick:()=>h({type:"video",index:a,video:c[a]}),children:(0,A.jsx)(d().sA,{defaultMessage:"Edit Video",id:"creatorProfile.imageUploader.main.editVideo"})})]})}}),name:`video-${a}`}))),...i?i.map(((e,a)=>{var i;return{itemNode:(0,A.jsx)(mm,{children:t=>{let{isHovered:i,isTouchDevice:r}=t;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Bg,{data:e}),!i&&!r||f?null:(0,A.jsx)(um,{index:a,type:"image"})]})}}),mainNode:(0,A.jsx)(mm,{children:i=>{let{isHovered:r,isTouchDevice:n}=i;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Eg,{data:e,isHovered:r&&!f}),!f&&(0,A.jsx)(_r().u,{variant:"light",onClick:()=>h({desktopImage:e.desktop,mobileImage:e.mobile||fg().H8,index:a,type:"image"}),style:{...t.mainImageEditContainer,...r||n?t.hoveredMainImageEditContainer:{}},children:(0,A.jsx)(d().sA,{defaultMessage:"Edit Preview",id:"creatorProfile.imageUploader.main.editPreview"})})]})}}),name:`${`${null==e||null===(i=e.desktop)||void 0===i?void 0:i.url}-${a}`||`image-${a}`} `}})):[],{itemNode:(0,A.jsxs)("div",{style:{...t.addPreviewThumbnailContainer,...f?e.noCursorAllowed:{}},children:[(0,A.jsx)("span",{children:xu(t.addPreviewIcon)}),(0,A.jsx)("span",{style:t.addPreviewText,children:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.addPreview",defaultMessage:"Add Preview"})})]}),mainNode:null,onItemClick:()=>{f||((0,j().v)(a,"creator_profile_click_template_add_preview"),h({type:"new"}))},name:"add-preview"}];return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Ig,{items:l?b:cm,shouldNotShowCarousel:!l}),u?(0,A.jsx)("div",{style:t.errorMessage,children:u}):null]})}function gm(){const e=(0,o().IS)((()=>({loadingContainer:{boxShadow:"\n\t\t\t\t0px 0.6666666865348816px 3.502314805984497px 0px rgba(0, 0, 0, 0.0096),\n\t\t\t\t0px 2.933333396911621px 7.251852035522461px 0px rgba(0, 0, 0, 0.0157),\n\t\t\t\t0px 7.199999809265137px 14.462499618530273px 0px rgba(0, 0, 0, 0.02),\n \t\t\t\t0px 13.866666793823242px 28.348148345947266px 0px rgba(0, 0, 0, 0.0243),\n\t\t\t\t0px 23.33333396911621px 52.122684478759766px 0px rgba(0, 0, 0, 0.0304),\n\t\t\t\t0px 36px 89px 0px rgba(0, 0, 0, 0.04)\n\t\t\t\t",backgroundColor:"rgba(246, 245, 244, 1)",aspectRatio:2.15,width:"100%",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px"},loadingContainerCopy:{color:"rgba(191, 191, 191, 1)",fontSize:"24px",lineHeight:"30px",padding:"24px",fontWeight:L().Wy.semibold,textAlign:"center"}})),[]),t=(0,n().K8)((()=>{const{isGeneratingImage:e}=op().A.state;return e}),[])?(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.generatingPreview",defaultMessage:"Generating image..."}):(0,A.jsx)(d().sA,{id:"creatorProfile.templates.imageUpload.generatePreview",defaultMessage:"Enter template link to generate cover image"});return(0,A.jsx)("div",{style:e.loadingContainer,children:(0,A.jsx)("span",{style:e.loadingContainerCopy,children:t})})}function mm(e){const{children:t}=e,a=(0,o().IS)((()=>({mainItemContainer:{width:"100%",height:"100%",position:"relative"}})),[]),r=i.useRef(null),{isHovered:n,isTouchDevice:s}=sn(r);return(0,A.jsx)("div",{style:a.mainItemContainer,ref:r,children:t?t({isHovered:!s&&n,isTouchDevice:s}):null})}function fm(e){const{disabled:t}=e,a=(0,o().IS)((e=>({selectInputButton:{border:"none",boxShadow:e.inputBoxShadow,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"12px 14px"},selectText:{height:"20px",fontSize:14,lineHeight:"20px"},selectChevron:{width:16,height:16,fill:e.text.tertiary}})),[]),i=il(),r=(0,d().tz)(),s=(0,n().K8)((()=>(0,Wr().V)(r)),[r]),{selectedLocale:l}=(0,n().K8)((()=>({selectedLocale:op().A.state.locale??z().q})),[]),c={items:[...z().Yr],getKey:e=>e,selectedItem:l,onSelect:e=>{const t=op().A.state;op().A.setState({...t,locale:e})},originGap:6,width:200,renderItem:e=>{const t=s[e.value];return(0,A.jsx)(vt().A,{...e,title:null==t?void 0:t.languageNameInThatLanguage,caption:null==t?void 0:t.languageNameInCurrentLanguage})},renderOrigin:e=>{var r;return(0,A.jsxs)(Xe().A,{size:"lg",...e,style:{...a.selectInputButton,...t?i.inputDisabled:{}},disabled:t,children:[(0,A.jsx)("span",{style:a.selectText,children:null===(r=s[l])||void 0===r?void 0:r.languageNameInThatLanguage}),(0,A.jsx)(Je().I,{icon:Gc().arrowChevronSingleDownIcon,color:"lightGraySecondary",weight:"bold"})]})},disabled:t};return(0,A.jsx)(xt().A,{...c})}var hm=()=>a(324254),bm=()=>a(644161),vm=()=>a(801611),ym=()=>a(13898),xm=()=>a(755535),Sm=()=>a(148832),wm=()=>a(329304),Cm=()=>a(879765);function jm(e){const{title:t,subtitle:a,icon:i,children:r,showBackButton:n,onClickBackButton:s}=e,l=function(e){let{width:t=400}=e;return(0,o().IS)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",width:`${t}px`,padding:"20px"},header:{display:"flex",flexDirection:"column",alignItems:"flex-start",textAlign:"left",gap:8,marginTop:20,marginBottom:24},alignLeftContainer:{display:"flex",flexDirection:"column",justifyContent:"flex-start",width:"100%"},backButton:{display:"flex",flexDirection:"row",alignItems:"center",gap:4,color:e.text.tertiary},transparentBackground:{background:"transparent"}})),[t])}({});return(0,A.jsxs)("div",{style:l.container,children:[(0,A.jsx)("div",{style:l.alignLeftContainer,children:n?(0,A.jsxs)(ve().A,{onClick:s,hoveredStyle:l.transparentBackground,pressedStyle:l.transparentBackground,style:l.backButton,children:[(0,A.jsx)(Je().I,{icon:Cm().$,color:"lightGraySecondary"}),(0,A.jsx)(yt().D,{styleName:"UIRegular-14px/Regular",children:(0,A.jsx)(d().sA,{defaultMessage:"Back",id:"creatorProfile.templateLanguagePickerModal.backCta"})})]}):void 0}),i?(0,A.jsx)("div",{style:l.alignLeftContainer,children:i}):void 0,(0,A.jsx)("div",{style:l.alignLeftContainer,children:(0,A.jsxs)("div",{style:l.header,children:[(0,A.jsx)(yt().D,{styleName:"Title-24px/Bold",children:t}),a?(0,A.jsx)(yt().D,{styleName:"Body-14px/Regular",children:a}):void 0]})}),r?(0,A.jsx)("div",{style:l.alignLeftContainer,children:r}):void 0]})}function Mm(e){const{submittingState:t,isDirty:a,handleSubmit:o}=e,{setView:s,name:l}=Ze(),{type:d,id:c}=$(l),{isMobileWidth:u}=(0,m().LS)(),p=_m(),g=(0,r().v3)(),f=(0,n().K8)((()=>op().A.state.templateDraftId),[]),h=Yp(),b=(0,n().K8)((()=>op().A.state.locale),[]),v=Qp(f),{isFeatureEnabled:y}=(0,pt().O)("self_serve_localization_frontend"),{isFeatureEnabled:w}=(0,pt().O)("template_listing_translate"),j=(0,n().K8)((()=>dp.getDefaultLocaleTemplate()),[]),M=y?"published"===d&&h:"published"===d,_=function(e,t,a,i){return!(!e||!t)&&!(a||"in_review"===i||"draft"===i&&a)}(y,w,h,v),I="rejected"===v||"draft"===v||a,k=(0,n().K8)((()=>wp.state.isTranslating),[]),T=ne(v,"published"===d),P=i.useCallback((()=>{oe().A.reset(),s("/profile/templates",!0),Fp()}),[s]),L=i.useCallback((async()=>{if((await S().Gh(y?Im:Am)).accept&&c){let e=!1;e=y?await async function(e){const{environment:t,templateId:a,locale:i}=e;return"success"===(await x().callApi({eventName:"deleteLocalizedTemplates",environment:t,data:{templateId:a,locale:i}})).type}({environment:g,templateId:c,locale:b}):await pe({environment:g,id:c}),e&&(P(),C().D6({label:(0,A.jsx)(jc,{})}))}}),[c,g,P,b,y]),D=i.useCallback((async()=>{const e="draft"===v||"rejected"===v;if((await S().Gh(km)).accept)if(e&&f){await ue({environment:g,id:f})&&(P(),C().D6({label:(0,A.jsx)(Mc,{})}))}else P(),C().D6({label:(0,A.jsx)(Mc,{})})}),[g,P,v,f]),E=i.useCallback((async()=>{b&&null!=j&&j.id&&(wp.openModal(),await Vp({environment:g,data:{templateId:j.id,targetLocale:b}}))}),[g,b,null==j?void 0:j.id]);return(0,A.jsx)("section",{children:(0,A.jsxs)("div",{style:u?p.formActionsMobile:p.formActions,children:[(0,A.jsx)(Tm,{onDeleteTemplate:L,onDeleteTemplateDraft:D,isDeleteDisabled:!1!==t,isDiscardDisabled:!1!==t,shouldRenderDelete:M,shouldRenderDiscard:I,isPublished:"published"===d,shouldRenderRegenerateTranslation:_,onRegenerateTranslation:E,isRegenerateTranslationDisabled:k}),(0,A.jsx)(Pm,{onSaveTemplateDraft:()=>o("save_draft"),onSubmitTemplateDraft:()=>o("publish"),isSaveDisabled:!a||!1!==t,isSubmitDisabled:"published"===d&&"published_draft"!==T&&!a||!1!==t,isSaveLoading:"save_draft"===t,isSubmitLoading:"publish"===t})]})})}function _m(){return(0,o().IS)((()=>({formActions:{display:"flex",justifyContent:"space-between",alignItems:"center"},formActionsMobile:{display:"flex",flexDirection:"column-reverse",alignItems:"center",gap:"24px"},deleteAndDiscardContainer:{display:"flex",gap:"12px"},deleteAndDiscardMobileContainer:{display:"flex",alignItems:"center",gap:"20px"},saveAndSubmitContainer:{display:"flex",gap:"12px"},saveAndSubmitMobileContainer:{display:"flex",flexDirection:"column",width:"100%",gap:"12px"}})),[])}const Am={message:(0,A.jsx)("div",{style:{fontSize:"24px",fontWeight:L().Wy.bold,lineHeight:"30px"},children:(0,A.jsx)(d().sA,{defaultMessage:"Are you sure?",id:"creatorProfile.deleteTemplate.header"})}),description:(0,A.jsx)("div",{style:{color:c().Ay.black},children:(0,A.jsx)(d().sA,{defaultMessage:"You can’t recover this template once it has been deleted.",id:"creatorProfile.deleteTemplate.description"})}),acceptLabel:(0,A.jsx)(d().sA,{defaultMessage:"Yes, delete",id:"creatorProfile.deleteTemplate.confirm"}),cancelLabel:(0,A.jsx)(d().sA,{defaultMessage:"Cancel",id:"creatorProfile.deleteTemplate.reject"})},Im={message:(0,A.jsx)("div",{style:{fontSize:"24px",fontWeight:L().Wy.bold,lineHeight:"30px"},children:(0,A.jsx)(d().sA,{defaultMessage:"Are you sure?",id:"creatorProfile.deleteLocalizedTemplates.header"})}),description:(0,A.jsx)("div",{style:{color:c().Ay.black},children:(0,A.jsx)(d().sA,{defaultMessage:"Deleting this template will remove all localized versions and cannot be undone. You can’t recover these templates once they have been deleted.",id:"creatorProfile.deleteLocalizedTemplates.description"})}),acceptLabel:(0,A.jsx)(d().sA,{defaultMessage:"Yes, delete",id:"creatorProfile.deleteTemplate.confirm"}),cancelLabel:(0,A.jsx)(d().sA,{defaultMessage:"Cancel",id:"creatorProfile.deleteTemplate.reject"})},km={message:(0,A.jsx)("div",{style:{fontSize:"24px",fontWeight:L().Wy.bold,lineHeight:"30px"},children:(0,A.jsx)(d().sA,{defaultMessage:"Are you sure?",id:"creatorProfile.discardTemplateDraft.header"})}),description:(0,A.jsx)("div",{style:{color:c().Ay.black},children:(0,A.jsx)(d().sA,{defaultMessage:"You can’t recover this template draft once it has been discarded.",id:"creatorProfile.discardTemplateDraft.description"})}),acceptLabel:(0,A.jsx)(d().sA,{defaultMessage:"Yes, discard",id:"creatorProfile.discardTemplateDraft.confirm"}),cancelLabel:(0,A.jsx)(d().sA,{defaultMessage:"Cancel",id:"creatorProfile.discardTemplateDraft.reject"})};function Tm(e){const{onDeleteTemplate:t,onDeleteTemplateDraft:a,isDeleteDisabled:i,isDiscardDisabled:r,shouldRenderDelete:o,shouldRenderDiscard:s,isPublished:l,shouldRenderRegenerateTranslation:c,isRegenerateTranslationDisabled:u,onRegenerateTranslation:p}=e,g=_m(),{isMobileWidth:f}=(0,m().LS)(),h=(0,n().K8)((()=>wp.state.hasTranslated),[]);return(0,A.jsxs)("div",{style:f?g.deleteAndDiscardMobileContainer:g.deleteAndDiscardContainer,children:[o&&(0,A.jsx)(_r().u,{variant:"warning",onClick:t,disabled:i,children:(0,A.jsx)(d().sA,{defaultMessage:"Delete template",id:"creatorProfile.templateForm.deleteTemplate"})},"deleteTemplateButton"),c&&(0,A.jsx)(_r().u,{variant:"neutral",onClick:p,disabled:u,children:h?(0,A.jsx)(d().sA,{defaultMessage:"Re-generate translation",id:"creatorProfile.templateForm.regenerateTranslation"}):(0,A.jsx)(d().sA,{defaultMessage:"Generate translation",id:"creatorProfile.templateForm.generateTranslation"})},"regenerateTranslationButton"),s&&(0,A.jsx)(_r().u,{variant:"neutral",onClick:a,disabled:r,children:l?(0,A.jsx)(d().sA,{defaultMessage:"Discard changes",id:"creatorProfile.templateForm.discardChanges"}):(0,A.jsx)(d().sA,{defaultMessage:"Discard draft",id:"creatorProfile.templateForm.discardDraft"})},"discardTemplateDraftButton")]})}function Pm(e){const{onSaveTemplateDraft:t,onSubmitTemplateDraft:a,isSaveDisabled:i,isSubmitDisabled:r,isSaveLoading:n,isSubmitLoading:o}=e,s=_m(),{isMobileWidth:l}=(0,m().LS)();return(0,A.jsxs)("div",{style:l?s.saveAndSubmitMobileContainer:s.saveAndSubmitContainer,children:[(0,A.jsx)(_r().u,{variant:"light",onClick:t,isLoading:n,disabled:i,children:(0,A.jsx)(d().sA,{defaultMessage:"Save",id:"creatorProfile.templateForm.saveDraft"})},"saveTemplateDraftButton"),(0,A.jsx)(_r().u,{variant:"dark",onClick:a,isLoading:o,disabled:r,children:(0,A.jsx)(d().sA,{defaultMessage:"Submit for review",id:"creatorProfile.templateForm.submit"})},"submitTemplateDraftForReviewButton")]})}function Lm(){var e;const t=(0,r().v3)(),a=(0,d().tz)(),s=function(e){let{width:t=400}=e;return(0,o().IS)((e=>({iconStyle:{width:"28px",height:"28px",fill:e.blueColor},alignLeftContainer:{display:"flex",justifyContent:"flex-start",width:"100%"},languageDisplayList:{marginTop:8,display:"flex",flexDirection:"column",width:"100%"},languageSelect:{width:"100%"},innerButtonStyle:{padding:"8px 16px",height:34,width:"100%",display:"flex",justifyContent:"space-between"},selectedText:{color:e.text.primary},saveButton:{marginTop:20,width:"100%",textAlign:"center",display:"flex",justifyContent:"center"},removeCta:{color:e.redBadgeBackground},checkboxContainer:{display:"flex",gap:4,justifyContent:"center",alignItems:"center",marginTop:12,marginBottom:12},addTranslationButton:{width:"100%",padding:"8px 16px",borderRadius:"4px",height:36},translationDetailsList:{marginTop:8,display:"flex",flexDirection:"column",width:"100%"},pointerCursor:{cursor:"pointer"}})),[])}({}),c=null===(e=t.currentUser)||void 0===e?void 0:e.id,[u,p]=(0,i.useState)(void 0),{locales:g,contentfulId:m}=(0,n().O$)(dp),{defaultLocale:f,defaultLocaleBlockId:h}=(0,n().K8)((()=>{const e=dp.getDefaultLocaleTemplate();return e?{defaultLocale:e.locale,defaultLocaleBlockId:e.block_id}:{defaultLocale:void 0,defaultLocaleBlock:void 0}}),[]),[{value:b}]=(0,l().Yb)((async()=>{if(!h)return;const e=new(Sm().B)(t,{table:Ri().ev,id:h},{userId:c});await e.load();const a=e.getSpaceStore();return{pageStore:e,spaceStore:a}}),[c,h,t]),v=null==b?void 0:b.pageStore,y=null==b?void 0:b.spaceStore,x=(0,wm().P9)({name:"ai_usage",spaceId:null==y?void 0:y.id,userId:c,amount:1}),{isOpen:S,showAddTranslationModal:w,addTranslationLocale:j,addTranslationScope:M}=(0,n().O$)(pp),{shouldTranslate:I}=(0,n().O$)(wp),k=(0,i.useCallback)((()=>{wp.setShouldTranslate(!I)}),[I]),T=(0,i.useCallback)((()=>{pp.updateState({showAddTranslationModal:!0})}),[]),P=(0,i.useCallback)((()=>{pp.updateState({showAddTranslationModal:!1})}),[]),L=(0,za().X)("creator_profile_template_locale_dropdown"),D=(0,i.useCallback)((async(e,a)=>{if(e&&m){if(a&&"none"!==a?"listing"!==a&&"listing-and-content"!==a||wp.setShouldTranslate(!0):wp.setShouldTranslate(!1),a&&"listing"!==a&&"none"!==a){if("listing-and-content"===a){if(!x)return;try{if(!f||!v||!y)throw new Error("Missing locale or block");const a=(0,bm().gi)(e),i=(0,bm().gi)(f);if(!a||!i)throw new Error("Invalid target or source language");dp.setLocales([...g,{locale:e}]),Be().oo({url:`/profile/templates/form/new/${m}?locale=${e}`,environment:t}),pp.closeModal(),await vm().a({pageStore:v,targetLanguage:a,sourceLanguage:i,environment:t,spaceStore:y,openInNewTab:!0,from:"creator_profile_template_language_picker_modal"})}catch(i){fo().log({level:"error",from:"TemplateLanguagePickerModal",type:"onSaveLanguage",error:(0,bo().convertErrorToLog)(i)}),C().D6({label:(0,A.jsx)(d().sA,{id:"creatorProfile.templateLanguagePickerModal.translationError",defaultMessage:"Unable to translate template content."})})}}}else dp.setLocales([...g,{locale:e}]),Be().oo({url:`/profile/templates/form/new/${m}?locale=${e}`,environment:t});pp.closeModal()}else pp.closeModal()}),[m,g,t,x,f,v,y]),E=z().Yr.filter((e=>!g.some((t=>t.locale===e)))),B=(0,i.useCallback)((()=>{pp.closeModal()}),[]),R=w?()=>(0,A.jsxs)(jm,{title:(0,A.jsx)(d().sA,{id:"creatorProfile.templateLanguagePickerModal.addTranslation.title",defaultMessage:"Add a translation"}),showBackButton:!0,onClickBackButton:P,children:[(0,A.jsx)(yt().D,{styleName:"Body-12px/Regular",color:"secondary",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateLanguagePickerModal.addTranslation.details",defaultMessage:"Details"})}),(0,A.jsxs)("div",{style:s.translationDetailsList,children:[(0,A.jsx)(Em,{title:(0,A.jsx)(d().sA,{defaultMessage:"Language",id:"creatorProfile.templateLanguagePickerModal.addTranslation.language"}),right:(0,A.jsx)(Bm,{allowedLocales:E})}),(0,A.jsx)(Em,{title:(0,A.jsx)(d().sA,{defaultMessage:"AI Translation",id:"creatorProfile.templateLanguagePickerModal.addTranslation.scope"}),right:(0,A.jsx)(Rm,{})})]}),(0,A.jsx)(Ie().A,{color:"black",size:"xl",style:s.saveButton,disabled:!j||!M||"listing-and-content"===M&&!x,onClick:async()=>{await D(j,M)},children:(0,A.jsx)(d().sA,{defaultMessage:"Create version",id:"creatorProfile.templateLanguagePickerModal.addTranslation.createVersionCta"})})]}):L?()=>(0,A.jsxs)(jm,{title:(0,A.jsx)(d().sA,{id:"creatorProfile.templateLanguagePickerModal.titleV2",defaultMessage:"Language versions"}),subtitle:(0,A.jsx)(d().sA,{id:"creatorProfile.templateLanguagePickerModal.description",defaultMessage:"Form fields are separate in each language version of your template."}),icon:(0,Hr().Q)(s.iconStyle),children:[(0,A.jsx)(yt().D,{styleName:"Body-12px/Regular",color:"secondary",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateLanguagePickerModal.numLanguages",defaultMessage:"{num, number} languages",values:{num:g.length}})}),(0,A.jsx)("div",{style:s.languageDisplayList,children:g.map((e=>(0,A.jsx)(Dm,{localizedTemplate:e},e.locale)))}),E.length>0?(0,A.jsx)(_().p,{size:"lg",style:s.addTranslationButton,iconLeading:Lo().plusIcon,onClick:T,children:(0,A.jsx)(d().sA,{defaultMessage:"Add a translation",id:"creatorProfile.templateLanguagePickerModal.addTranslationCta"})}):void 0]}):()=>(0,A.jsxs)(jm,{title:(0,A.jsx)(d().sA,{id:"creatorProfile.templateLanguagePickerModal.title",defaultMessage:"Language versions"}),subtitle:(0,A.jsx)(d().sA,{id:"creatorProfile.templateLanguagePickerModal.description",defaultMessage:"Form fields are separate in each language version of your template."}),icon:(0,Hr().Q)(s.iconStyle),children:[(0,A.jsx)(yt().D,{styleName:"Body-12px/Regular",color:"secondary",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateLanguagePickerModal.numLanguages",defaultMessage:"{num, number} languages",values:{num:g.length}})}),(0,A.jsx)("div",{style:s.languageDisplayList,children:g.map((e=>(0,A.jsx)(Dm,{localizedTemplate:e},e.locale)))}),E.length>0&&(0,A.jsx)(xm().A,{style:s.languageSelect,innerButtonStyle:s.innerButtonStyle,renderMenuSections:e=>[{key:"addNewLanguage",render:e=>(0,A.jsx)(Pi().A,{...e}),items:E.map((t=>({key:t,action:()=>{p(t),e.close()},render:e=>(0,A.jsx)(vt().A,{...e,title:(0,A.jsx)(yt().D,{styleName:"Body-13px/Regular",children:(0,Wr().V)(a)[t].languageNameInCurrentLanguage})})})))}],selectedTitle:(0,A.jsx)(yt().D,{styleName:"Body-14px/Regular",style:s.selectedText,children:u?(0,Wr().V)(a)[u].languageNameInCurrentLanguage:"Add a language"})}),(0,A.jsx)(Ie().A,{color:"black",size:"xl",onClick:async()=>{await D(u)},style:s.saveButton,disabled:!u,children:(0,A.jsx)(d().sA,{defaultMessage:"Save",id:"creatorProfile.templateLanguagePickerModal.saveCta"})}),(0,A.jsxs)("div",{style:s.checkboxContainer,children:[(0,A.jsx)(os().T,{checked:I,onClick:k,size:14}),(0,A.jsx)("div",{onClick:k,children:(0,A.jsx)(ss().A,{style:s.pointerCursor,isSmall:!0,children:(0,A.jsx)(d().sA,{defaultMessage:"Let Notion translate template listing",id:"creatorProfile.templateLanguagePickerModal.translateTemplateListing"})})})]})]});return(0,A.jsx)(ei().s,{isOpen:S,onDismiss:B,showCloseIcon:!0,render:R,animateSizeTransition:!1})}function Dm(e){var t,a,n,o;let{localizedTemplate:s}=e;const l=(0,r().v3)(),[c,u]=(0,i.useState)(!1),p=Fm(),g=(0,d().tz)(),{setView:m}=Ze(),f=(null===(t=s.template)||void 0===t?void 0:t.template_draft_id)||(null===(a=s.templateDraft)||void 0===a?void 0:a.id),h=Qp(f),b=null===(n=s.template)||void 0===n?void 0:n.is_default_locale,v=function(e){var t,a,i;let{localizedTemplate:r,templateDraftStatus:n}=e;return!0!==(null==r||null===(t=r.template)||void 0===t?void 0:t.is_default_locale)&&"in_review"!==(null==r||null===(a=r.templateDraft)||void 0===a?void 0:a.status)&&"published"!==(null==r||null===(i=r.templateDraft)||void 0===i?void 0:i.status)&&!(null!=r&&r.template)}({localizedTemplate:s,templateDraftStatus:h}),y=function(e){var t,a;let{localizedTemplate:i,templateDraftStatus:r,shouldRenderDiscard:n}=e;return!n&&!0!==(null==i||null===(t=i.template)||void 0===t?void 0:t.is_default_locale)&&"in_review"!==(null==i||null===(a=i.templateDraft)||void 0===a?void 0:a.status)&&Boolean(null==i?void 0:i.template)&&"published"===r}({localizedTemplate:s,templateDraftStatus:h,shouldRenderDiscard:v}),x=null===(o=s.template)||void 0===o?void 0:o.id,w=i.useCallback((()=>{pp.closeModal(),m("/profile/templates",!0)}),[m]),j=i.useCallback((async()=>{if((await S().Gh(Am)).accept&&x){await pe({environment:l,id:x})&&(w(),C().D6({label:(0,A.jsx)(jc,{})}))}}),[x,l,w]),M=i.useCallback((async()=>{const e="draft"===h||"rejected"===h;if((await S().Gh(km)).accept)if(e&&f){await ue({environment:l,id:f})&&(w(),C().D6({label:(0,A.jsx)(Mc,{})}))}else w(),C().D6({label:(0,A.jsx)(Mc,{})})}),[f,h,l,w]);return(0,A.jsxs)("div",{style:{...p.languageItem,...c&&p.hoveredLanguageItem},onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[(0,A.jsx)(yt().D,{styleName:"Body-14px/Regular",children:(0,Wr().V)(g)[s.locale].languageNameInCurrentLanguage}),b&&(0,A.jsx)(yt().D,{styleName:"Body-12px/Regular",color:"tertiary",style:p.primaryLocale,children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateLanguagePickerModal.primaryLocale",defaultMessage:"Primary"})}),c&&y&&(0,A.jsx)(Sa().A,{style:p.removeCta,onClick:()=>j(),hoveredStyle:p.transparentBackground,pressedStyle:p.transparentBackground,children:(0,A.jsx)(yt().D,{styleName:"Body-12px/Medium",color:"red",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateLanguagePickerModal.removeCta",defaultMessage:"Remove"})})}),c&&v&&(0,A.jsx)(Sa().A,{style:p.removeCta,onClick:()=>M(),hoveredStyle:p.transparentBackground,pressedStyle:p.transparentBackground,children:(0,A.jsx)(yt().D,{styleName:"Body-12px/Medium",color:"red",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateLanguagePickerModal.discardCta",defaultMessage:"Discard"})})})]})}function Em(e){const{title:t,right:a}=e,r=Fm(),[n,o]=(0,i.useState)(!1);return(0,A.jsxs)("div",{style:{...r.languageItem,...n&&r.hoveredLanguageItem},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[(0,A.jsx)(yt().D,{styleName:"Body-14px/Regular",children:t}),a]})}function Bm(e){const{allowedLocales:t}=e,a=(0,r().Y0)(),o=Fm(),s=(0,d().tz)(),{addTranslationLocale:l}=(0,n().O$)(pp),c={originGap:6,popupType:a.isMobile?ye().z7.BottomSheet:ye().z7.Popup,alignmentToOrigin:ye().yP.End,renderOrigin:e=>(0,A.jsxs)(Sa().A,{...e,style:o.dropdownButton,hoveredStyle:o.transparentBackground,pressedStyle:o.transparentBackground,children:[l?(0,Wr().V)(s)[l].languageNameInCurrentLanguage:(0,A.jsx)(d().sA,{defaultMessage:"Choose",id:"creatorProfile.templateLanguagePickerModal.choose"}),(0,A.jsx)(Je().I,{icon:hm().arrowChevronSingleDownSmallIcon,color:"lightGraySecondary",size:"sm"})]}),render:e=>{const r=[{key:"template-translation-locale",render:e=>(0,i.createElement)(Pi().A,{...e,key:0}),items:t.map((t=>({key:t,action:()=>{pp.updateState({addTranslationLocale:t}),e.close()},render:e=>(0,A.jsx)(vt().A,{...e,title:(0,A.jsx)(yt().D,{styleName:"Body-13px/Regular",children:(0,Wr().V)(s)[t].languageNameInCurrentLanguage}),right:l===t?(0,A.jsx)(Je().I,{icon:ip().checkmarkIcon}):void 0})})))}];let n;return n=a.isMobile?{menuType:je().gu.Modal,right:(0,A.jsx)(np().DoneMenuText,{}),onClickRight:e.close}:{menuType:je().gu.Popup},(0,A.jsx)(xe().A,{...n,children:(0,A.jsx)(Ti().Ay,{type:Ti().Oh.Vertical,initialFocus:0,sections:r})})}};return(0,A.jsx)(ye().Ay,{...c})}function Rm(){const e=(0,r().Y0)(),t=(0,d().tz)(),a=Fm(),{addTranslationScope:o}=(0,n().O$)(pp),s=[{label:t.formatMessage({id:"creatorProfile.templateLanguagePickerModal.listingOnly",defaultMessage:"Template listing only"}),value:"listing"},{label:t.formatMessage({id:"creatorProfile.templateLanguagePickerModal.listingAndContent",defaultMessage:"Template content and listing"}),value:"listing-and-content"},{label:t.formatMessage({id:"creatorProfile.templateLanguagePickerModal.none",defaultMessage:"Do not automatically translate"}),value:"none"}],l={originGap:6,popupType:e.isMobile?ye().z7.BottomSheet:ye().z7.Popup,alignmentToOrigin:ye().yP.End,renderOrigin:e=>{var t;return(0,A.jsxs)(Sa().A,{...e,style:a.dropdownButton,hoveredStyle:a.transparentBackground,pressedStyle:a.transparentBackground,children:[null===(t=s.find((e=>e.value===o)))||void 0===t?void 0:t.label,(0,A.jsx)(Je().I,{icon:hm().arrowChevronSingleDownSmallIcon,color:"lightGraySecondary",size:"sm"})]})},render:t=>{const a=[{key:"template-translation-scope",render:e=>(0,i.createElement)(Pi().A,{...e,key:0}),items:s.map((e=>({key:e.value,render:t=>(0,A.jsx)(vt().A,{...t,title:(0,A.jsxs)(ba().Ye,{children:[e.label,"listing-and-content"===e.value?(0,A.jsx)(ym().A,{}):void 0]}),right:o===e.value?(0,A.jsx)(Je().I,{icon:ip().checkmarkIcon}):void 0}),action:()=>{pp.updateState({addTranslationScope:e.value}),t.close()}})))}];let r;return r=e.isMobile?{menuType:je().gu.Modal,right:(0,A.jsx)(np().DoneMenuText,{}),onClickRight:t.close}:{menuType:je().gu.Popup},(0,A.jsx)(xe().A,{...r,children:(0,A.jsx)(Ti().Ay,{type:Ti().Oh.Vertical,initialFocus:0,sections:a})})}};return(0,A.jsx)(ye().Ay,{...l})}function Fm(){return(0,o().IS)((e=>({languageItem:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"4px",padding:"8px 16px",borderRadius:"4px"},hoveredLanguageItem:{background:e.state.hover},removeCta:{color:e.redBadgeBackground},primaryLocale:{opacity:.5},dropdownButton:{display:"flex",flexDirection:"row",alignItems:"center",fontSize:14,gap:4,color:e.text.tertiary},transparentBackground:{background:"transparent"}})),[])}const Um=["in_review","rejected","published","published_rejected","published_in_review","published_draft"];function Nm(e){const{templateStatus:t,templateDraftId:a,isPublished:i,templateId:s}=e,l=function(){const{isDesktopWidth:e}=(0,m().LS)();return(0,o().IS)((t=>({messageContainer:{maxWidth:"960px",minHeight:"60px",borderRadius:"8px",padding:"10px 24px 10px 24px",display:"flex",alignItems:"center",flexWrap:e?"nowrap":"wrap",gap:"10px",backgroundColor:"rgba(0, 0, 0, 0.03)",marginTop:"10px"},messageText:{color:t.text.primary,fontSize:"13.5px",flexShrink:e?10:"inherit"}})),[e])}(),c=(0,r().v3)(),{slug:u}=(0,n().K8)((()=>{if(i&&s){return{slug:new(Bt().$x)(c,{table:"template",id:s}).getSlug()}}if(!a)return{};return{slug:new(Bt().x1)(c,{table:"template_draft",id:a}).getSlug()}}),[c,a,i,s]),p=(0,Ru().Px)(u),g=ne(t,i);return void 0===g||void 0===t?null:Um.includes(g)?(0,A.jsxs)("div",{style:l.messageContainer,children:[(0,A.jsx)(pn,{templateStatus:g}),(0,A.jsx)("span",{style:l.messageText,children:(0,A.jsx)(zm,{templateStatus:g,templateDraftId:a,isPublished:i,templateId:s,slug:u})}),i?(0,A.jsx)(_r().u,{variant:"neutral",onClick:()=>so().f({environment:c,url:p}),children:(0,A.jsx)(d().sA,{id:"creatorProfile.submissionForm.status.published.cta",defaultMessage:"View live template"})}):null]}):null}function zm(e){const{templateStatus:t,templateDraftId:a,slug:i}=e,r=(0,Ru().Px)(i);return(0,A.jsxs)(A.Fragment,{children:["in_review"===t||"published_in_review"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.submissionForm.status.inReview.message",defaultMessage:"Templates under review are not editable. Review time is 1-3 business days."}):null,"published"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.submissionForm.status.published.message",defaultMessage:"Template is live at {url}",values:{url:r}}):null,"rejected"===t||"published_rejected"===t?(0,A.jsx)(Om,{templateId:a}):null,"published_draft"===t?(0,A.jsx)(d().sA,{id:"creatorProfile.submissionForm.status.publishedDraft.Message",defaultMessage:"Template has unpublished changes"}):null]})}const Vm=(0,d().YK)({bad_purchase_url:{id:"creatorProfile.submissionForm.status.rejected.badPurchaseUrl.message",defaultMessage:"We are unable to access the purchase link provided: {purchaseUrl}."},bad_public_url:{id:"creatorProfile.submissionForm.status.rejected.badPublicUrl.message",defaultMessage:"We are unable to access the Notion link provided: {publicSiteUrl}. Please make sure your template is public via the <b>Publish</b> tab in the <b>Share</b> menu."},duplication_not_enabled:{id:"creatorProfile.submissionForm.status.rejected.duplicationNotEnabled.message",defaultMessage:"Duplication wasn’t turned on. Make sure you turn on duplications via the <b>Published</b> tab in the <b>Share</b> menu."},bad_images:{id:"creatorProfile.submissionForm.status.rejected.badImages.message",defaultMessage:"The images or videos attached do not meet our standards."},title_notion_mention:{id:"creatorProfile.submissionForm.status.rejected.titleNotionMention.message",defaultMessage:"Please remove 'Notion' from your title and re-submit."},title_notion_template_mention:{id:"creatorProfile.submissionForm.status.rejected.titleNotionTemplateMention.message",defaultMessage:"Please remove 'Notion' and 'Template' from your title and re-submit."},title_template_mention:{id:"creatorProfile.submissionForm.status.rejected.titleTemplateMention.message",defaultMessage:"Please remove 'Template' from your title and re-submit."},language_mismatch:{id:"creatorProfile.submissionForm.status.rejected.languageMismatch.message",defaultMessage:"The content of your submission does not match the language selected. Please update the content or change to the correct language."},content_template:{id:"creatorProfile.submissionForm.status.rejected.contentTemplate.message",defaultMessage:"Your submission resembles a content product more than a template that other users can replicate and adjust for their own use-case. Whilst Notion can be used to publish and share such interesting and useful content, the Marketplace is not currently suitable for hosting them."},content_over_size_limit:{id:"templateReviewEmail.status.rejected.contentOverSizeLimit.message",defaultMessage:"Your template was rejected because it contains too many blocks ({numBlocks, number} blocks). We cap the size of templates at {maxNumBlocks, number} blocks to prevent duplication issues. You can edit the template to reduce its size and submit again for approval."},unsupported_language:{id:"creatorProfile.submissionForm.status.rejected.unsupportedLanguage.message",defaultMessage:"We currently support seven languages and are unable to list any template that is not in those. We are working on adding more!"},general_quality:{id:"creatorProfile.submissionForm.status.rejected.general.message",defaultMessage:"The template does not meet our quality criteria. You can edit and submit again."},restricted_content:{id:"creatorProfile.submissionForm.status.rejected.restrictedContent.message",defaultMessage:"The template contains content that is not allowed to be redistributed. Remove the content and re-submit."},payment_link_mismatch:{id:"templateReviewEmail.status.rejected.paymentLinkMismatch.message",defaultMessage:"The purchase link you provided doesn’t match the template you submitted! Please update the link and re-submit."},currency_mismatch:{id:"templateReviewEmail.status.rejected.currencyMismatch.message",defaultMessage:"The price of the template should be in USD. Please convert the currency of your template and re-submit."},unsupported_payment_method:{id:"templateReviewEmail.status.rejected.unsupportedPaymentMethod.message",defaultMessage:"We do not support the payment link you’ve submitted. The payment link must be for purchasing a specific product with a visible template title that delivers automatically upon purchase. Please update the purchase link and resubmit."},dark_mode_screenshot:{id:"templateReviewEmail.status.rejected.darkModeScreenshot.message",defaultMessage:"While your template looks great, we don’t accept dark mode screenshots for the first thumbnail. Please generate a new screenshot in light mode and resubmit."},private_subpage:{id:"templateReviewEmail.status.rejected.privateSubpage.message",defaultMessage:"Some of your template’s subpages are private and not accessible to users. Please edit your template to make all content accessible and able to be duplicated, then resubmit."}}),Hm={bad_purchase_url:e=>{let{purchaseUrl:t}=e;return t?(0,A.jsx)(d().sA,{...Vm.bad_purchase_url,values:{purchaseUrl:t}}):(0,A.jsx)(d().sA,{...Vm.general_quality})},bad_public_url:e=>{let{publicSiteUrl:t}=e;return t?(0,A.jsx)(d().sA,{...Vm.bad_public_url,values:{publicSiteUrl:t,b:e=>(0,A.jsx)("b",{children:e})}}):(0,A.jsx)(d().sA,{...Vm.general_quality})},duplication_not_enabled:()=>(0,A.jsx)(d().sA,{...Vm.duplication_not_enabled,values:{b:e=>(0,A.jsx)("b",{children:e})}}),bad_images:()=>(0,A.jsx)(d().sA,{...Vm.bad_images,values:{a:e=>(0,A.jsx)("a",{href:"https://www.notion.com/help/how-to-submit-a-template",children:e})}}),title_notion_mention:()=>(0,A.jsx)(d().sA,{...Vm.title_notion_mention}),title_notion_template_mention:()=>(0,A.jsx)(d().sA,{...Vm.title_notion_template_mention}),title_template_mention:()=>(0,A.jsx)(d().sA,{...Vm.title_template_mention}),language_mismatch:()=>(0,A.jsx)(d().sA,{...Vm.language_mismatch}),unsupported_language:()=>(0,A.jsx)(d().sA,{...Vm.unsupported_language}),content_template:()=>(0,A.jsx)(d().sA,{...Vm.content_template}),content_over_size_limit:e=>{let{numBlocks:t,maxNumBlocks:a}=e;return(0,A.jsx)(d().sA,{...Vm.content_over_size_limit,values:{numBlocks:t,maxNumBlocks:a}})},custom:e=>{let{customRejectReason:t}=e;return t?(0,A.jsx)(A.Fragment,{children:t}):(0,A.jsx)(d().sA,{...Vm.general_quality})},general_quality:()=>(0,A.jsx)(d().sA,{...Vm.general_quality}),restricted_content:()=>(0,A.jsx)(d().sA,{...Vm.restricted_content}),payment_link_mismatch:()=>(0,A.jsx)(d().sA,{...Vm.payment_link_mismatch}),currency_mismatch:()=>(0,A.jsx)(d().sA,{...Vm.currency_mismatch}),unsupported_payment_method:()=>(0,A.jsx)(d().sA,{...Vm.unsupported_payment_method}),dark_mode_screenshot:()=>(0,A.jsx)(d().sA,{...Vm.dark_mode_screenshot}),private_subpage:()=>(0,A.jsx)(d().sA,{...Vm.private_subpage})};function Om(e){const{templateId:t}=e,a=(0,r().v3)(),{numBlocks:i,rejectReason:o,customRejectReason:s,purchaseUrl:l,publicSiteUrl:c}=(0,n().K8)((()=>{var e;if(void 0===t)return{};const i=new(Bt().x1)(a,{table:Su()._F,id:t});return{numBlocks:null===(e=i.getDraftAttributes())||void 0===e?void 0:e.num_blocks,rejectReason:i.getRejectReason(),customRejectReason:i.getCustomRejectReason(),purchaseUrl:i.getPurchaseUrl(),publicSiteUrl:i.getTemplatePublicUrl()}}),[a,t]),u=(0,n().K8)((()=>cs().default.getConfigKey("template_limits","maxNumBlocks")),[]);if(void 0!==o){const e=(0,Hm[o])({purchaseUrl:l,publicSiteUrl:c,customRejectReason:s,numBlocks:i,maxNumBlocks:u});return(0,A.jsx)(A.Fragment,{children:e})}return(0,A.jsx)(d().sA,{...Vm.general_quality})}function Wm(){const e=function(e){let{width:t=400}=e;return(0,o().IS)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",width:`${t}px`,padding:20},iconStyle:{width:28,height:28,fill:e.blueColor},header:{display:"flex",flexDirection:"column",alignItems:"flex-start",textAlign:"left",gap:8,fontWeight:L().Wy.semibold,fontSize:16,marginTop:20,marginBottom:24,width:"100%"},alignLeftContainer:{display:"flex",justifyContent:"flex-start",width:"100%"},skipButton:{marginTop:20,width:"100%",textAlign:"center",display:"flex",justifyContent:"center"}})),[t])}({}),{isOpen:t}=(0,n().O$)(wp);return(0,A.jsx)(ei().s,{isOpen:t,render:()=>(0,A.jsxs)("div",{style:e.container,children:[(0,A.jsx)("div",{style:e.alignLeftContainer,children:(0,Hr().Q)(e.iconStyle)}),(0,A.jsx)("div",{style:e.header,children:(0,A.jsx)(yt().D,{styleName:"Title-24px/Bold",children:(0,A.jsx)(d().sA,{id:"creatorProfile.templateTranslationModal.title",defaultMessage:"Translating..."})})})]}),animateSizeTransition:!1,allowDismissByEscape:!1})}function qm(){const{isMobileWidth:e}=(0,m().LS)(),t=(0,d().tz)(),a=(0,r().v3)(),[s,l]=i.useState(!1),c=function(){const{isMobileWidth:e}=(0,m().LS)();return(0,o().IS)((()=>({formContainer:{display:"flex",flexDirection:"column",gap:"32px",maxWidth:"960px"},titleInput:{fontSize:e?30:36,lineHeight:e?"34px":"40px",fontWeight:L().Wy.semibold},noCursorAllowed:{cursor:"not-allowed"},inputStyle:{background:"none",padding:"8px 14px"},inputDisabled:{cursor:"not-allowed",backgroundColor:"rgba(0, 0, 0, 0.03)",color:"rgba(128, 128, 128, 1)"},formRow:{display:"flex",gap:"12px"},formRowMobile:{flexDirection:"column"},languageInput:{width:"33%"},languageInputMobile:{width:"100%"},fullDescription:{resize:"vertical"},urlSlugLeftContainer:{marginLeft:"-13px",padding:"9px 0px 9px 9px",marginRight:"-6px",fontSize:e?12:"inherit",borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.03)",color:"rgba(128, 128, 128, 1)",textWrap:"nowrap"}})),[e])}(),u=il(),p=i.useRef(null),{isFeatureEnabled:g}=(0,pt().O)("creator_profile_template_locale_dropdown"),{name:f,setView:h,searchParams:v}=Ze(),{type:y,id:S,contentfulId:w}=$(f),C=Z(v);$p({type:y,id:S,contentfulId:w,locale:"new"===y?C:void 0});const j=Sc(op().A),M=(0,n().K8)((()=>_p(jp(),!1)),[]),_=async e=>{l(e);try{!0===await Mp({action:e,environment:a,templateContentfulId:Q??void 0,hasTemplateBeenReviewed:re,currentView:f})?(oe().A.reset(),Fp(),h("/profile/templates",!0)):_a().Rt({element:null==p?void 0:p.current,environment:a,options:{behavior:"smooth"}})}catch(t){}finally{l(!1)}};yc({isActive:j,onAccept:()=>_("save_draft"),onReject:M?void 0:()=>{throw new Error("abandon_route")},acceptLabel:M?(0,A.jsx)(fc,{}):(0,A.jsx)(bc,{}),rejectLabel:M?(0,A.jsx)(hc,{}):(0,A.jsx)(vc,{})});const{url:I,name:k,shortDescription:T,longDescription:P,slug:D,isFree:E,checkoutEnabled:B,urlError:R,imageError:F,nameError:U,categoriesError:z,shortDescriptionError:V,longDescriptionError:H,accessLockingError:O,slugError:W,isGeneratingImage:q,templateDraftId:K,initialValues:G,locale:Y,contentfulId:Q,purchaseUrlError:J,marketplaceAcquisitionEmail:X,marketplaceAcquisitionEmailError:ee}=(0,n().K8)((()=>op().A.state),[]);Kp(Q,D,Y),function(){const e=(0,r().v3)(),{isFeatureEnabled:t}=(0,pt().O)("self_serve_localization_frontend"),{isFeatureEnabled:a}=(0,pt().O)("template_listing_translate"),{name:o,searchParams:s}=Ze(),{type:l,contentfulId:d}=$(o),c=Z(s),u=(0,n().K8)((()=>dp.getDefaultLocaleTemplate()),[]),p=(0,n().K8)((()=>wp.state.isTranslating),[]),g=(0,n().K8)((()=>wp.state.shouldTranslate),[]),m=(0,n().K8)((()=>pp.state.isOpen),[]),{templateDraftId:f,locale:h}=(0,n().K8)((()=>op().A.state),[]);(0,i.useEffect)((()=>{wp.setHasTranslated(!1)}),[f]),(0,i.useEffect)((()=>{wp.setHasTranslated(!1)}),[h]),(0,i.useEffect)((()=>{t&&a&&"new"===l&&d&&c&&c!==(null==u?void 0:u.locale)&&null!=u&&u.id&&!p&&g&&!m&&(wp.openModal(),Vp({environment:e,data:{templateId:null==u?void 0:u.id,targetLocale:c}}).catch((()=>{})))}),[t,a,l,d,c,u,e,p,g,m])}();const{publishedVersion:te,templateContentfulId:ae}=(0,n().K8)((()=>{if(void 0===K)return{publishedVersion:0,templateContentfulId:void 0};const e=new(Bt().x1)(a,{table:"template_draft",id:K});return{publishedVersion:e.getPublishedVersion()||0,templateContentfulId:e.getContentfulId()}}),[a,K]),ie=Qp(K),re=Gp(K),ne=ya(),se="in_review"===ie||!1!==s||q,le=!E&&!B,de=[R,U,z,V,H,W,F,J].filter((e=>Boolean(e))).length,ce=(0,n().K8)((()=>pp.state.isOpen),[]),ue=(0,n().K8)((()=>wp.state.isOpen),[]),pe=!Yp(),ge=pe&&("published"===ie||"draft"===ie||void 0===ie),me=(0,n().K8)((()=>{var e;const t=null===(e=b().default.state.currentUserStore)||void 0===e?void 0:e.getEmail();return Boolean(null==t?void 0:t.match(/.*@makenotion\.com$/))}),[]),fe=E||B||me;return(0,i.useEffect)((()=>()=>{dp.resetState()}),[]),(0,A.jsxs)("main",{children:[!g&&(0,A.jsx)(cg,{currentLocale:Y}),(0,A.jsx)(Nm,{templateStatus:ie,templateDraftId:K,isPublished:"published"===y,templateId:S}),(0,A.jsx)(kr,{count:de,ref:p}),(0,A.jsxs)("div",{style:c.formContainer,children:[(0,A.jsx)(Pr().o,{htmlLabel:"templateName",label:(0,A.jsx)(d().sA,{defaultMessage:"Template Name",id:"creatorProfile.templateSubmission.templateName"}),shouldHideLabel:!0,error:U,placeholder:t.formatMessage({defaultMessage:"Add template title",id:"creatorProfile.templateSubmission.titlePlaceholder"}),inputStyle:{...c.titleInput,...se?u.noCursorAllowed:{}},value:k,onChange:e=>{op().A.setState({...op().A.state,name:e.target.value})},type:"text",onFocus:()=>Rp("nameError"),onBlur:async e=>{const t=e.target.value.trim();if(!t||!G.name||G.name!==t){var i;kp((0,N().pK)(null===(i=b().default.state.currentUserStore)||void 0===i?void 0:i.getModel()),t)}if(t.length>0&&(!D||0===D.length)){const e=await async function(e){var t;const{environment:a,name:i}=e,r=(0,hp().lp)(i),n=await x().callApi({eventName:"validateTemplateDraftSlug",environment:a,data:{slug:r}});if("success"===n.type)return r;if("template_slug_already_exists"!==(null===(t=n.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return"";for(let o=0;o<3;o++){const e=(0,hp().lp)(i,!0);if("success"===(await x().callApi({eventName:"validateTemplateDraftSlug",environment:a,data:{slug:e}})).type)return e}return""}({environment:a,name:t});e&&op().A.setState({...op().A.state,slug:e,slugError:void 0})}},focusInitial:"new"===y,disabled:se||q}),(0,A.jsx)(Pr().o,{htmlLabel:"templateLink",label:(0,A.jsx)(d().sA,{defaultMessage:"Template link",id:"creatorProfile.templateSubmission.linkLabel"}),error:R,format:Br().C.Default,style:{...c.inputStyle,...se?u.inputDisabled:{}},inputStyle:se?u.noCursorAllowed:{},placeholder:"https://",value:I,type:"url",onFocus:e=>{Rp("urlError"),Rp("imageError")},onBlur:async e=>{var t,i;const r=await Ip({environment:a,url:(null===(t=e.target.value)||void 0===t?void 0:t.trim())||"",templateDraftId:K,shouldValidateBlockIdUsedByOtherTemplate:!pe,shouldValidateBlockIdForLocalization:pe});if(null!==(i=e.target.value)&&void 0!==i&&i.trim()&&r){const t=function(e){const t=Wp().bk(e.trim());return t?(t.search="",t.hash="",t.toString()):""}(e.target.value);op().A.setState({...op().A.state,url:t}),await async function(e,t){const a=op().A.state,{uuid:i,image:r,mobileImage:n,isGeneratingImage:o}=a;return!(!Boolean(i)||o)&&(!((!a.initialValues.uuid||a.uuid===a.initialValues.uuid)&&(Boolean(null==r?void 0:r.url)||Boolean(null==n?void 0:n.url)))&&await Np(e,t))}(a,t)}},disabled:se}),(0,A.jsx)(pm,{}),(0,A.jsxs)("div",{style:{...c.formRow,...e?c.formRowMobile:{}},children:[(0,A.jsx)(er().O,{htmlLabel:"templateCategories",name:(0,A.jsx)(d().sA,{defaultMessage:"Template categories",id:"creatorProfile.templateSubmission.categorySelectLabel"}),errorMessage:z,children:(0,A.jsx)(sg,{disabled:ge||se||re})}),!ge&&(0,A.jsx)("div",{style:e?c.languageInputMobile:c.languageInput,children:(0,A.jsx)(er().O,{htmlLabel:"templateLanguage",name:(0,A.jsx)(d().sA,{defaultMessage:"Language",id:"creatorProfile.templateSubmission.languageSelectLabel"}),children:(0,A.jsx)(fm,{disabled:se||te>0})})})]}),(0,A.jsx)(Pr().o,{htmlLabel:"templateUrlSlug",label:(0,A.jsx)(d().sA,{defaultMessage:"Template URL slug",id:"creatorProfile.templateSubmission.slugLabel"}),error:W,format:Br().C.Default,style:{...c.inputStyle,...ge||se?u.inputDisabled:{}},inputStyle:se?u.noCursorAllowed:{},value:D,onChange:e=>{op().A.setState({...op().A.state,slug:e.target.value})},disabled:ge||se,onFocus:()=>Rp("slugError"),onBlur:async e=>{var t;const i=(null===(t=e.target.value)||void 0===t?void 0:t.trim())||"";i&&G.slug&&G.slug===i||await Bp({environment:a,slug:i,contentfulId:ae})},left:(0,A.jsx)("span",{style:c.urlSlugLeftContainer,children:`${(0,Ru().Px)()}/`})}),(0,A.jsx)(pg,{disabled:se||ge}),(0,A.jsx)(er().O,{htmlLabel:"accessLocking",name:(0,A.jsx)(d().sA,{defaultMessage:"Access locking",id:"creatorProfile.templateSubmission.accessLockingLabel"}),errorMessage:O,children:(0,A.jsx)(ng,{disabled:ge||se||le||!ne})}),(0,A.jsx)(Pr().o,{htmlLabel:"templateShortDescription",label:(0,A.jsx)(d().sA,{defaultMessage:"Brief description",id:"creatorProfile.templateSubmission.shortDescription"}),error:V,maxlength:280,textarea:!0,format:Br().C.Default,style:{...c.inputStyle,...se?u.inputDisabled:{}},inputStyle:se?u.noCursorAllowed:{},onChange:e=>{const t=op().A.state;op().A.setState({...t,shortDescription:e.target.value})},onFocus:e=>Rp("shortDescriptionError"),onBlur:e=>Dp(e.target.value),value:T,disabled:se,showCharacterCounter:!0}),(0,A.jsx)(rg,{longDescriptionError:H,isFormDisabled:se,longDescription:P}),ne?(0,A.jsx)(er().O,{htmlLabel:"templateEmailRequirement",name:(0,A.jsx)(d().sA,{defaultMessage:"Email requirement",id:"creatorProfile.templateSubmission.emailRequirementLabel"}),children:(0,A.jsx)(dg,{disabled:se||le||ge})}):null,fe&&(0,A.jsx)(Jp,{submissionFormStyles:c,disabledInputStyles:u,marketplaceAcquisitionEmail:X,isFormDisabled:se,marketplaceAcquisitionEmailError:ee}),"in_review"!==ie&&(0,A.jsx)(Mm,{submittingState:s,isDirty:j,handleSubmit:_}),ce&&(0,A.jsx)(Lm,{}),ue&&(0,A.jsx)(Wm,{})]})]})}function Km(e){const{creatorId:t}=e,a=$m(),i=(0,za().X)("creator_profile_template_locale_dropdown"),r=(0,za().X)("creator_profile_template_translation_banner");return(0,A.jsxs)("div",{children:[(0,A.jsxs)(Aa,{route:"/profile/templates",exact:!0,children:[(0,A.jsx)(De().y,{size:"large",header:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pageHeader",defaultMessage:"Templates"}),subHeader:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.pageHeaderSubtitle",defaultMessage:"Update template information, pin templates, and more."})}),i&&r?(0,A.jsx)(wo().l,{label:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.banner",defaultMessage:"Offer your template in more languages"}),description:(0,A.jsx)(d().sA,{id:"creatorProfile.templates.bannerDescription",defaultMessage:"Now in beta: use AI to translate your template and listing content. Review and edit before publishing to reach a wider, global audience."}),display:"inline",tint:"blue",staticIcon:bu}):null,null==t?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Ce().A,{size:24}),(0,A.jsx)(Gm,{})]}):(0,A.jsx)(Ym,{creatorId:t})]}),(0,A.jsxs)(Aa,{route:"/profile/templates/form",shouldRenderCallback:ge,children:[(0,A.jsxs)("div",{style:a.templateSubmissionTopBar,children:[(0,A.jsx)(wa,{}),i?(0,A.jsx)(gp,{}):null]}),(0,A.jsx)(qm,{})]}),(0,A.jsxs)(Aa,{route:"/profile/templates/faq",children:[(0,A.jsx)(wa,{}),(0,A.jsx)(ap,{})]})]})}function Gm(){const e=(0,o().IS)((e=>({creatorProfileTemplatesEmptyStateHeader:{fontSize:24,color:e.text.primary,fontWeight:L().Wy.semibold},creatorProfileTemplatesEmptyStateDescription:{fontSize:15,color:e.text.secondary}})),[]),{setView:t}=Ze();return(0,A.jsx)(ke,{showCreatorProfileForm:()=>{Ae.setState({profileFormType:"create"}),t("/profile")},header:(0,A.jsx)("div",{style:e.creatorProfileTemplatesEmptyStateHeader,children:(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.templates.header",defaultMessage:"Create a Creator Profile"})}),description:(0,A.jsxs)("div",{style:e.creatorProfileTemplatesEmptyStateDescription,children:[(0,A.jsx)(d().sA,{id:"creatorProfileEmptyState.templates.description",defaultMessage:"A Creator Profile is required to submit and manage Notion templates."})," ",(0,A.jsx)(vu,{})]})})}function Zm(e){const{creatorId:t}=e,a=$m();return(0,A.jsxs)("section",{style:a.creatorProfileMainSection,children:[(0,A.jsx)(wu,{creatorId:t}),(0,A.jsx)(Iu,{creatorId:t}),(0,A.jsx)(Cn,{creatorId:t})]})}function $m(){const e=(0,r().Y0)().isMobile;return(0,o().IS)((t=>({creatorProfileMainSection:{display:"flex",gap:"72px",flexDirection:"column"},templateSubmissionTopBar:{display:"flex",flexDirection:e?"column":"row",justifyContent:"space-between",maxWidth:"960px"}})),[e])}function Ym(e){let{creatorId:t}=e;const a=(0,d().tz)();return(0,A.jsx)(Le,{tabs:[{title:a.formatMessage(Qm.templateListings),content:(0,A.jsx)(Zm,{creatorId:t})},{title:a.formatMessage(Qm.ratingsAndReviews),content:(0,A.jsx)(Zu,{})}]})}const Qm=(0,d().YK)({templateListings:{id:"creatorProfile.templates.tabs.listings",defaultMessage:"Template listings"},ratingsAndReviews:{id:"creatorProfile.templates.tabs.ratingsAndReviews",defaultMessage:"Ratings & reviews"}});function Jm(e){const t=(0,n().K8)((()=>{var e;return null===(e=b().default.state.currentUserSettingsStore)||void 0===e?void 0:e.userId}),[]),a=(0,n().K8)((()=>b().default.state.renderPhase),[]),v=(0,r().v3)(),y=(0,d().tz)(),[{status:x}]=(0,l().Yb)((async()=>{if(t)return(0,me().t)({environment:v,userId:t})}),[v,t]),S=(0,fe().x)(),w=(0,o().IS)((()=>({scroller:{height:"100dvh",paddingBottom:"120px",backgroundColor:c().Ay.white},center:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}})),[]);(0,i.useEffect)((()=>{const e=document.querySelector('link[rel="shortcut icon"]');e&&e.setAttribute("href",s().A.images.templates.faviconIco)}),[]);const[{status:C}]=(0,l().Yb)((async()=>{if(S&&S.contentful_id)return de({environment:v,locale:y,creatorId:S.contentful_id,orderBy:"recent",paid:"all",page:1})}),[]),j="pending"!==x,M=(0,n().K8)((()=>he().A.getState().isOpen),[]);return(0,A.jsxs)(p().A,{title:y.formatMessage({id:"creatorProfile.document.title",defaultMessage:"My Creator Profile | Notion"}),children:[(0,A.jsx)(g().A,{}),(0,A.jsx)(u().H,{style:w.scroller,type:h().A.Y,children:(0,A.jsxs)(m().KF,{children:[(0,A.jsx)(Nn().v,{}),(0,A.jsx)($e,{children:j&&"pending"!==C&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Aa,{route:"/profile",exact:!0,children:(0,A.jsx)(Wc,{})}),(0,A.jsx)(Aa,{route:"/profile/templates",children:(0,A.jsx)(Km,{creatorId:null==S?void 0:S.contentful_id})}),(0,A.jsx)(Aa,{route:"/profile/integrations",children:(0,A.jsx)(Rd,{isPublish:e.publish,isLab:e.lab,botOrIntegrationPointer:e.botOrIntegrationPointer})}),(0,A.jsx)(Aa,{route:"/profile/analytics",children:(0,A.jsx)(pa,{creatorId:null==S?void 0:S.contentful_id})}),(0,A.jsx)(Aa,{route:"/profile/coupons",children:(0,A.jsx)(Un,{creatorId:null==S?void 0:S.contentful_id})})]})})]})}),M&&(0,A.jsx)(Ud,{}),(0,A.jsx)(uu,{}),"rendered"!==a||v.device.isMobile?null:(0,A.jsx)(f().RK,{})]})}},735790:(e,t,a)=>{a.d(t,{M:()=>n});a(296540);var i=a(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.25 15.25 11.5",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M3 7.375h6.829a2.501 2.501 0 0 0 4.842 0H17a.625.625 0 1 0 0-1.25h-2.329a2.501 2.501 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25M12.25 5.5a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5"}),(0,i.jsx)("path",{fillRule:"evenodd",d:"M7.75 15.75a2.5 2.5 0 0 0 2.421-1.875H17a.625.625 0 1 0 0-1.25h-6.829a2.5 2.5 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25h2.329A2.5 2.5 0 0 0 7.75 15.75m0-1.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})]})},n=(0,a(340498).wt)("sliders",r)},739095:(e,t,a)=>{a.d(t,{AT:()=>b,VU:()=>p,Yj:()=>x});a(944114),a(898992),a(823215),a(354520),a(581454),a(737550);var i=()=>a(842599),r=()=>a(513416),n=()=>a(345404),o=()=>a(506391),s=()=>a(534177),l=()=>a(939768),d=()=>a(720665),c=()=>a(671593);const u=(0,a(959013).YK)({capabilityErrorMessage:{id:"developerIntegrationsCreate.error.capabilities.invalidContent2",defaultMessage:"At least one capability must be requested."},regexPatternErrorMessage:{id:"developerIntegrationFormValidator.urlMatchingAndPlaceholder.regex.error",defaultMessage:"{value} regex pattern is invalid."},regexAttributesErrorMessage:{id:"developerIntegrationFormValidator.urlMatchingAndPlaceholder.attributes.error",defaultMessage:"{value} attributes JSON does not match request schema."},sampleUrlMissingDomain:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlMissingDomain.error",defaultMessage:'URL "{value}" is missing a domain.'},sampleUrlDoesNotMatchProvidedDomain:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlDoesNotMatchProvidedDomain.error",defaultMessage:'URL "{value}" does not match a provided domain.'},sampleUrlDoesNotMatchProvidedRegexes:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlDoesNotMatchProvidedRegexes.error",defaultMessage:'URL "{value}" does not match a provided regex pattern.'},templateUrlIsNotNotionPage:{id:"developerIntegrationFormValidator.templateUrl.templateUrlIsNotNotionPage.error",defaultMessage:"URL must direct to a public Notion template."},templateUrlCannotBeDuplicated:{id:"developerIntegrationFormValidator.templateUrl.templateUrlCannotBeDuplicated.error",defaultMessage:"Linked template must be public."}});function p(e){let t;try{t=JSON.parse(e)}catch(a){t=void 0}return t}function g(e){const{value:t}=e,a=l().q7(t);if(!a)return{validated:!1};return l().qg(a).hostname?{validated:!0}:{validated:!1}}function m(e){try{return new RegExp(e),{validated:!0}}catch{return{validated:!1}}}function f(e){if((0,c().tf)(n().kE,e))return{validated:!1};for(const t of e){const e=(0,o().q8)(t);if(!(0,r().PX)(e))return{validated:!1}}return{validated:!0}}function h(e){const{domains:t,regex:a,urls:i}=e;if(0===i.length)return[];const r=[];for(const n of i){const e=(0,o().fu)({url:n,domains:t,regex:new RegExp(a)});"invalid_url"===e.type?r.push({descriptor:u.sampleUrlMissingDomain,value:n}):"url_does_not_match_domain"===e.type?r.push({descriptor:u.sampleUrlDoesNotMatchProvidedDomain,value:n}):"url_does_not_match_regex"===e.type?r.push({descriptor:u.sampleUrlDoesNotMatchProvidedRegexes,value:n}):"success"===e.type||(0,s().HB)(e)}return r}function b(e){const t=l().q7(e);if(!t||!e)return;const a=t[t.length-1],i=e[e.length-1];return"/"===a&&"/"!==i?t.slice(0,t.length-1):t}const v={insert_comment:!0,insert_content:!0,read_comment:!0,read_content:!0,update_content:!0,link_preview:!0,synced_database:!0,workspace_content_transfer:!0,read_user_with_email:!1,read_user_without_email:!1},y=(0,s().uv)(v).filter((e=>v[e]));const x={email:function(e){const{value:t}=e,a=i().qh(t);return a?{validated:i().DT(a).valueOf()}:{validated:!1}},redirect_uris:function(e){const{value:t}=e;return{validated:t.every((e=>(0,a(388693).rf)(a(780054).A.domainBaseUrl,e)))}},website_url:g,privacy_policy_url:g,terms_of_use_url:g,template_url:function(e){const{value:t,templateStore:i}=e;return l().q7(t)?(0,a(836251).wU)(t)?i&&(0,a(731320).qw)(i)?{validated:!0}:{validated:!1,errorMessages:[{descriptor:u.templateUrlCannotBeDuplicated}]}:{validated:!1,errorMessages:[{descriptor:u.templateUrlIsNotNotionPage}]}:{validated:!1}},capabilities:function(e){const{value:t}=e;return y.some((e=>t[e]))?{validated:!0}:{validated:!1,errorMessages:[{descriptor:u.capabilityErrorMessage}]}},unfurl_url:g,url_matching_and_placeholder:function(e){const{value:t,formData:a}=e,i=[];for(const o of t){if(m(o.regex).validated){var r;const e=h({domains:(n=null===(r=a.domain)||void 0===r?void 0:r.value,n?(0,d().sb)([...n.developmentDomain&&[n.developmentDomain],...n.domainVerifications.map((e=>{let{domain:t}=e;return t})),...n.verifiedDomains]):[]),regex:o.regex,urls:o.sampleUrls});i.push(...e)}else i.push({descriptor:u.regexPatternErrorMessage,value:o.name});f(o.attributes).validated||i.push({descriptor:u.regexAttributesErrorMessage,value:o.name})}var n;return i.length>0?{validated:!1,errorMessages:i.map((e=>{let{descriptor:t,value:a}=e;return{descriptor:t,values:{value:a}}}))}:{validated:!0}},external_oauth_authorize_url:g,external_oauth_token_url:g,external_deletion_url:g}},739135:(e,t,a)=>{a.d(t,{KD:()=>d,gt:()=>c,i9:()=>l,ll:()=>o,tb:()=>s,x$:()=>n});var i=()=>a(541235),r=()=>a(496603);function n(e,t){return o(c(e,t))}function o(e){return void 0!==e&&(e===i().q_||e===i().YD)}function s(e,t){if(o(t))return;const a=i().c$[e],r=a.steps.findIndex((e=>e.id===t));return-1===r?a.steps[0].id:r===a.steps.length-1?i().q_:a.steps[r+1].id}function l(e,t){const a=c(e,t);if(a&&!o(a))return s(t,a)}function d(e,t){const a=c(e,t);if(a)return function(e,t){const a=i().c$[e];var n;if(o(t))return null===(n=(0,r().HV)(a.steps))||void 0===n?void 0:n.id;const s=a.steps.findIndex((e=>e.id===t));return-1!==s&&0!==s?a.steps[s-1].id:void 0}(t,a)}function c(e,t){var a;if(!e)return;const r=((null===(a=e.getSettings())||void 0===a?void 0:a.tutorials)||{})[t];return void 0===r?i().c$[t].steps[0].id:r}},742117:(e,t,a)=>{a.d(t,{V:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("chevronRight",{viewBox:"0 0 16 16",directional:!0,svg:(0,i.jsx)("path",{d:"M12.375 8.06445C12.375 7.83203 12.2861 7.63379 12.1084 7.45605L6.77637 2.24023C6.62598 2.08984 6.44141 2.01465 6.22266 2.01465C5.77832 2.01465 5.42285 2.35645 5.42285 2.80078C5.42285 3.01953 5.51172 3.21777 5.66211 3.375L10.4746 8.06445L5.66211 12.7539C5.51855 12.9043 5.42285 13.1025 5.42285 13.3213C5.42285 13.7725 5.77832 14.1143 6.22266 14.1143C6.44141 14.1143 6.62598 14.0391 6.77637 13.8887L12.1084 8.67285C12.293 8.49512 12.375 8.29688 12.375 8.06445Z"})})},747671:(e,t,a)=>{a.d(t,{Q:()=>i,a:()=>r});let i=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});class r extends(()=>a(757695))().Store{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}}},769206:(e,t,a)=>{a.d(t,{A:()=>r});class i extends(()=>a(757695))().Store{getInitialState(){return{isOpen:!1}}}const r=new i},770634:(e,t,a)=>{a.d(t,{C:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("ticket",{viewBox:"0 0 64 64",svg:(0,i.jsx)("path",{d:"m44,40h-24v-16h24v16Zm8-8c0,3.7,2.3,6,6,6v12H6v-12c3.7,0,6-2.3,6-6s-2.3-6-6-6v-12h52v12c-3.7,0-6,2.3-6,6Zm-4-12H16v24h32v-24Z"})})},788941:(e,t,a)=>{a.d(t,{b:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("pinFilled",{viewBox:"0 0 13 19",svg:(0,i.jsx)("path",{d:"M.102 11.773c0 .665.445 1.102 1.148 1.102h4.227v3.648c0 1.196.5 2.188.695 2.188.187 0 .687-.992.687-2.188v-3.648h4.227c.703 0 1.148-.438 1.148-1.102 0-1.648-1.32-3.39-3.515-4.187L8.46 4c1.14-.648 2.078-1.383 2.484-1.906.203-.266.305-.531.305-.766 0-.476-.367-.828-.914-.828H2.008c-.555 0-.914.352-.914.828 0 .234.093.5.297.766.406.523 1.343 1.258 2.484 1.906l-.258 3.586C1.422 8.383.102 10.125.102 11.773z"})})},801611:(e,t,a)=>{a.d(t,{a:()=>P});a(16280),a(898992),a(672577);var i=()=>a(584262),r=()=>a(857639),n=()=>a(126818),o=()=>a(313784),s=()=>a(644161),l=()=>a(68263),d=()=>a(44729),c=()=>a(857783),u=()=>a(185544),p=()=>a(2220),g=()=>a(568131),m=()=>a(34542),f=()=>a(972435),h=()=>a(396301),b=()=>a(731320),v=()=>a(640653),y=()=>a(450486),x=()=>a(976721),S=()=>a(928074),w=()=>a(525700),C=()=>a(765957),j=()=>a(217429),M=()=>a(406859),_=()=>a(436572),A=()=>a(812182),I=()=>a(751156);const k="template_translation_toast",T="Template size too large";async function P(e){const{environment:t,pageStore:a,targetLanguage:P,sourceLanguage:E,spaceStore:B,openInNewTab:R,from:F}=e,{currentSpaceStore:U,currentUserRootStore:N}=C().default.state,z=B||U,V=B?null==N?void 0:N.getSpaceViewStores().find((e=>e.getSpaceId()===B.id)):C().default.state.currentSpaceViewStore;if(!j().default.checkGate({gateName:"translate_template_top_bar"}))throw new Error("Translate template is not enabled");if(!P||!E||null==z||!z.id)return;const H=f().A.getIntl(),O=await(0,m().oC)(t,a.id),W=null==O?void 0:O.name,q=performance.now();!function(e){const{intl:t,toastProps:a={},isMobile:i=!1}=e;if(i)return void _().D6({label:t.formatMessage({id:"inApp.template.translation.started.toast.mobile.message",defaultMessage:"Template is being translated. We will let you know when it's ready to use."}),position:"bottom",style:{maxWidth:"calc(100% - 40px)",justifyContent:"center",textAlign:"center"}});A().HK({id:k,title:t.formatMessage({id:"inApp.template.translation.started.toast.title",defaultMessage:"Template is being translated"}),message:t.formatMessage({id:"inApp.template.translation.started.toast.message",defaultMessage:"We will let you know when it's ready to access"}),presentationType:"transient",icon:o().S,...a})}({intl:H});const K=M().M.getStateForBlock(a.id),G=await new Promise((e=>{I().createAndCommit({userAction:"translateTemplateActions.translateTemplateBlock",environment:t,canUndo:!0,perform:o=>{const l=a.getParentStore();if(!l)throw new Error("Cannot duplicate with no parent store found");const m=(e=>{const{environment:t,pageStore:a}=e,i=a.getParentStore();return!!i&&("block"===(null==i?void 0:i.table)||"team"===(null==i?void 0:i.table)||"space"===(null==i?void 0:i.table)||"collection"===(null==i?void 0:i.table))&&!("collection"===i.table&&!i.canEditCollection())&&!("team"===i.table&&!(0,h().dp)({teamStore:i,environment:t}))&&(0,b().MI)({environment:t,blockStore:a})})({environment:t,pageStore:a}),f=!(0,v().IL)(z),x=o.getUserActionForAnalyticsPurposesOnly();r().log({level:"info",from:"translateTemplateActions",type:"translateTemplateBlockStart",data:{miscDataToConvertToString:{pageStoreId:a.id,spaceId:a.getSpaceId(),parentStoreId:a.getParentId(),targetLanguage:P,sourceLanguage:E}}}),M().M.setStateForBlock(a.id,{...K,mode:"translate",status:"loading",sourceLanguage:E,targetLanguage:P});const{blockStores:S,onComplete:w}=g().duplicateBlock({environment:t,stores:[a],transaction:o,targetSpaceId:null==z?void 0:z.id,preferDuplicateLocation:"server",options:{addCopyName:!1,allowRedundancy:!1,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!a.isInsideTemplate(),shouldTranslate:!0,targetLanguage:P,sourceLanguage:E}}),C=S[0];let j="parent";if(m)switch(l.table){case"team":if(!V)throw new Error("Missing space view store for duplication");(0,y().moveToTeamImpl)({transaction:o,currentSpaceViewStore:V,teamStore:l,targets:[C],environment:t,location:{type:"append",after:a.id},action:"move",value:{type:"team",id:l.id,spaceId:z.id}});break;case"block":d().NI({parentStore:l,childStore:C,transaction:o,after:a.id});break;case"space":if(!V)throw new Error("Missing space view store for duplication");u().yM({environment:t,spaceStore:z,spaceViewStore:V,pageStore:C,isPrivate:!0,location:{type:"append",after:a.id},transaction:o});break;case"collection":d().X$({childStore:C,parentStore:l,transaction:o});break;default:throw new Error("Invalid parent store table for duplication")}else{if(!f)throw new Error("Cannot duplicate to destination");if(!V)throw new Error("Missing space view store for duplication");j="private_pages",u().yM({environment:t,spaceStore:z,spaceViewStore:V,pageStore:C,isPrivate:!0,location:{type:"append",after:a.id},transaction:o})}return(0,p().u)({environment:t,event:{eventName:"translate_template_block",eventProperties:{duplicate_to:j,page_id:a.id,source_language:E,target_language:P,triggered_from:F,template_id:null==O?void 0:O.id}}}),w.then((o=>{var l,d;"error"===o.status?(L({intl:H,templateName:W,blockLimitError:null===(l=o.error)||void 0===l?void 0:l.message.includes(T)}),M().M.clearStateForBlock(a.id),r().log({level:"error",from:"translateTemplateActions",type:"translateTemplateBlockError",data:{miscDataToConvertToString:{pageStoreId:a.id,spaceId:a.getSpaceId(),parentStoreId:a.getParentId(),targetLanguage:P,sourceLanguage:E,errorMessage:null===(d=o.error)||void 0===d?void 0:d.message}}}),e({success:!1,userAction:x})):(!function(e){const{sourceLanguage:t,targetLanguage:a,intl:r,environment:o,blockStores:l,toastProps:d={},isMobile:u=!1,templateName:p,openInNewTab:g=!1}=e,m=r.formatMessage((0,s().Bj)(t)),f=r.formatMessage((0,s().Bj)(a));if(u)return _().N2(),void _().AC({blockToOpenStore:l[0],onOpenBlock:()=>{c().uK({environment:o,store:l[0],pageVisitSource:i().y8.Duplicate})},item:{label:r.formatMessage({id:"inApp.template.translation.finished.toast.mobile.message",defaultMessage:"Template is ready"}),position:"bottom",style:{maxWidth:"calc(100% - 40px)",justifyContent:"center",textAlign:"center"}}});A().HK({id:k,title:r.formatMessage({id:"inApp.template.translation.finished.toast.title",defaultMessage:"Template is ready"}),message:m&&f&&p?r.formatMessage({id:"inApp.template.translation.finished.toast.templateName.message",defaultMessage:"''{templateName}'' has been translated from {sourceLanguage} to {targetLanguage}. View your template to continue editing."},{sourceLanguage:m,targetLanguage:f,templateName:p}):r.formatMessage({id:"inApp.template.translation.finished.toast.message",defaultMessage:"Template has been added to your workspace"}),presentationType:"persistent",iconGroup:n().g,iconGroupColorName:"greenPrimary",iconGroupVariant:"default",actions:{primary:{title:r.formatMessage({id:"inApp.template.translation.finished.toast.seeTemplate.button",defaultMessage:"See template"}),onAction:()=>{c().uK({environment:o,store:l[0],pageVisitSource:i().y8.Duplicate,openInNew:g?"tab":void 0}),A().UW(k)}}},...d})}({environment:t,blockStores:S,sourceLanguage:E,targetLanguage:P,intl:H,templateName:W,openInNewTab:R}),M().M.clearStateForBlock(a.id),r().log({level:"info",from:"translateTemplateActions",type:"translateTemplateBlockSuccess",data:{miscDataToConvertToString:{pageStoreId:a.id,spaceId:a.getSpaceId(),parentStoreId:a.getParentId(),targetLanguage:P,sourceLanguage:E}}}),e({success:!0,duplicateStore:C,userAction:x}))})).catch((t=>{L({intl:H,templateName:W}),M().M.clearStateForBlock(a.id),r().log({level:"error",from:"translateTemplateActions",type:"translateTemplateBlockError",data:{miscDataToConvertToString:{pageStoreId:a.id,spaceId:a.getSpaceId(),parentStoreId:a.getParentId(),targetLanguage:P,sourceLanguage:E,error:t}}}),e({success:!1,userAction:x})})),{duplicateStore:C,onComplete:w}}})}));if(G.success&&G.duplicateStore){var Z;D({environment:t,success:!0,time:performance.now()-q,user_action:G.userAction,page_block_id:G.duplicateStore.id,source_language:E,target_language:P});const e=S().dR({store:G.duplicateStore,environment:t}).mostPermissivePublicItem,{permissionItem:a,from:i}=e,r=(0,l().Yi)(i),n=!(null===(Z=C().default.state.currentSpaceStore)||void 0===Z?void 0:Z.getDisableMoveToSpace())&&a.allow_duplicate;w().d8({environment:t,type:"site",store:G.duplicateStore}),await(0,x().Hc)({oldPermissionItem:a,newPermissionItem:{...a,role:"reader",allow_duplicate:n},wasInherited:r!==G.duplicateStore.id,environment:t,store:G.duplicateStore,sudoModeStore:void 0})}else!1===G.success&&D({environment:t,success:!1,time:performance.now()-q,user_action:G.userAction})}function L(e){const{intl:t,toastProps:a={},isMobile:i=!1,templateName:r,blockLimitError:n}=e;i?_().D6({label:t.formatMessage({id:"inApp.template.translation.error.toast.mobile.message",defaultMessage:"Template translation failed. Please try again."}),position:"bottom",style:{maxWidth:"calc(100% - 40px)",justifyContent:"center",textAlign:"center"}}):A().HK({id:k,title:t.formatMessage({id:"inApp.template.translation.error.toast.title",defaultMessage:"Template translation failed"}),message:r?n?t.formatMessage({id:"inApp.template.translation.blockLimitError.toast.templateName.message",defaultMessage:"Unable to translate ''{templateName}'' – template size exceeds limit"},{templateName:r}):t.formatMessage({id:"inApp.template.translation.error.toast.templateName.message",defaultMessage:"Unable to translate ''{templateName}''. Please try again."},{templateName:r}):t.formatMessage({id:"inApp.template.translation.error.toast.message",defaultMessage:"Please try again."}),presentationType:"transient",icon:o().S,...a})}function D(e){(0,p().u)({environment:e.environment,event:{eventName:"translate_template_duration",eventProperties:{time:e.time,success:e.success,user_action:e.user_action,total_blocks:e.total_blocks,page_block_id:e.page_block_id,source_language:e.source_language,target_language:e.target_language}}})}},837530:(e,t,a)=>{a.d(t,{$g:()=>c,GF:()=>d,lR:()=>u});a(296540);var i=()=>a(401497),r=()=>a(704152),n=()=>a(807683),o=()=>a(554509),s=()=>a(554283),l=a(474848);function d(e){const{children:t,onClick:a,width:n,height:o,shouldHideBorders:d=!1,href:c,orientation:u="vertical",style:p,isDisabled:g=!1,hoveredStyle:m,pressedStyle:f}=e,[h,b]=(0,s().B)(),v=function(e){const{width:t,height:a,orientation:r,isHovered:n,isDisabled:o}=e;return(0,i().IS)((e=>({marketplaceCardWrapper:{position:"relative",width:"100%",display:"flex"},marketplaceCardContainer:{position:"relative",borderRadius:"12px",transition:"background 20ms ease-in 0s",display:"flex",flexDirection:"vertical"===r?"column":"row",cursor:"pointer",overflow:"hidden",width:t??252,height:a??"auto",..."dark"===e.mode&&{background:"rgba(255, 255, 255, 0.05)"},flex:1},marketplaceCardContainerHovered:{background:"dark"===e.mode?"rgba(255, 255, 255, 0.05)":"none"},marketplaceCardContainerPressed:{background:"dark"===e.mode?"rgba(255, 255, 255, 0.05)":"none"},boxShadow:{position:"absolute",pointerEvents:"none",borderRadius:12,inset:0,zIndex:1,..."dark"===e.mode?{boxShadow:n&&!o?"rgba(255, 255, 255, 0.05) 0px 0px 0px 1px inset":"unset"}:{boxShadow:n&&!o?"0px 12px 32px 0px rgba(0, 0, 0, 0.03), 0px 0px 0px 1px rgba(0, 0, 0, 0.08)":"0px 12px 32px 0px rgba(0, 0, 0, 0.02), 0px 0px 0px 1px rgba(0, 0, 0, 0.05)"}}})),[r,t,a,n,o])}({width:n,height:o,orientation:u,isHovered:b,isDisabled:g});return(0,l.jsxs)("div",{ref:h,style:v.marketplaceCardWrapper,children:[(0,l.jsx)(r().A,{style:{...v.marketplaceCardContainer,...p},hoveredStyle:{...v.marketplaceCardContainerHovered,...m},pressedStyle:{...v.marketplaceCardContainerPressed,...f},onClick:a,href:c,disabled:g,children:t}),!d&&(0,l.jsx)("div",{style:v.boxShadow})]})}function c(e){const{imageHeight:t,imageWidth:a,src:r,overlay:o,alt:d,shouldShowBorders:c=!1,imageContainerStyle:u={},imageStyle:p={},isDisabled:g=!1,imageBorderRadius:m=12,href:f}=e,[h,b]=(0,s().B)(),v=function(e){const{isHovered:t,imageHeight:a,src:r,href:n,borderRadius:o,isDisabled:s,imageWidth:l}=e;return(0,i().IS)((e=>({marketplaceCardImageContainer:{position:"relative",borderRadius:o,transition:"background 20ms ease-in 0s",cursor:n&&"pointer"},marketplaceCardImageOverlay:{position:"absolute",top:30,left:16},marketplaceCardImage:{borderRadius:o,objectPosition:"inherit",...void 0!==a?{height:a}:{height:"auto"},...void 0!==l?{width:l}:{width:"inherit"},...!r&&{background:e.surface.wash},..."dark"===e.mode&&{border:"1px solid",borderColor:e.marketplaceEditorial.border.white,...t&&{borderColor:e.marketplaceEditorial.border.hover.white}}},marketplaceCardImageBoxContainer:{objectPosition:"inherit"},boxShadow:{position:"absolute",pointerEvents:"none",borderRadius:o,inset:0,zIndex:1,..."dark"===e.mode?{boxShadow:t&&!s?"rgba(255, 255, 255, 0.05) 0px 0px 0px 1px inset":"unset"}:{boxShadow:t&&!s?"0px 12px 32px 0px rgba(0, 0, 0, 0.03), 0px 0px 0px 1px rgba(0, 0, 0, 0.08)":"0px 12px 32px 0px rgba(0, 0, 0, 0.02), 0px 0px 0px 1px rgba(0, 0, 0, 0.05)"}}})),[n,t,a,r,o,s,l])}({isHovered:b,imageHeight:t,imageWidth:a,src:r,isDisabled:g,href:f,borderRadius:m}),y=(0,l.jsxs)("div",{style:{...v.marketplaceCardImageContainer,...u},ref:h,children:[r?(0,l.jsx)(n().Ay,{src:r,style:{...v.marketplaceCardImage,...p},placeholderLoadedStyle:v.marketplaceCardImageBoxContainer,loading:"lazy",alt:d}):(0,l.jsx)("div",{style:{...v.marketplaceCardImage,...p}}),o&&(0,l.jsx)("div",{style:v.marketplaceCardImageOverlay,children:o}),c&&(0,l.jsx)("div",{style:v.boxShadow})]});return f?(0,l.jsx)("a",{href:f,children:y}):y}function u(e){const{title:t,subtitle:a,children:r,style:n}=e,s=(0,i().IS)((()=>({marketplaceCardContentContainer:{position:"relative",padding:"12px 16px 16px 16px"},marketplaceCardTitleContainer:{display:"flex",flexDirection:"column",gap:"2px",height:"100%"}})),[]);return(0,l.jsxs)("div",{style:{...s.marketplaceCardContentContainer,...n},children:[(0,l.jsxs)("div",{style:s.marketplaceCardTitleContainer,children:["string"==typeof t?(0,l.jsx)(o().D,{styleName:"Body-14px/Regular",colorName:"primary",children:t}):(0,l.jsx)(l.Fragment,{children:t}),a?"string"==typeof a?(0,l.jsx)(o().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:a}):a:null]}),r]})}},841224:(e,t,a)=>{a.d(t,{Q:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("language",{viewBox:"0 0 64 64",svg:(0,i.jsx)("path",{d:"m20,19.24l2.16,5.76h-4.32l2.16-5.76Zm5.95,4.62c2.49-3.27,6.07-5.64,10.5-6.87-2.61-5.68-8.42-8.99-16.45-8.99C8.89,8,2,14.32,2,24.5c0,5.19,1.8,9.37,5.03,12.22l-5.03,5.03,1.5,2.25c4.06,0,7.8-1.36,10.81-3.63,1.74.41,3.64.63,5.69.63.82,0,1.61-.05,2.39-.11-.25-1.39-.39-2.85-.39-4.39,0-2.73.43-5.23,1.22-7.5h-6.88l-1.12,3h-4.22l6-16h6l2.95,7.86Zm18.05,13.46c.99-.9,1.84-1.99,2.4-3.32h-4.79c.56,1.33,1.41,2.42,2.4,3.32Zm12.97,11.4l5.03,5.03-1.5,2.25c-4.06,0-7.8-1.36-10.81-3.63-1.74.41-3.64.63-5.69.63-11.11,0-18-6.32-18-16.5s6.89-16.5,18-16.5,18,6.32,18,16.5c0,5.19-1.8,9.37-5.03,12.22Zm-3.97-18.72h-7v-3h-4v3h-7v4h2.49c.58,1.97,1.68,3.86,3.22,5.52-2.76,1.36-5.38,1.74-5.38,1.74l1.4,3.75c2.78-.5,5.21-1.48,7.26-2.78,2.05,1.3,4.49,2.29,7.26,2.78l1.4-3.75s-2.62-.38-5.38-1.74c1.55-1.66,2.64-3.55,3.22-5.52h2.49v-4Z"})})},879765:(e,t,a)=>{a.d(t,{$:()=>r});a(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"6.12 3.97 6.66 12.06",directional:!0,svg:(0,a(474848).jsx)("path",{d:"M6.308 9.558a.625.625 0 0 0 0 .884l5.4 5.4a.625.625 0 1 0 .884-.884L7.634 10l4.958-4.958a.625.625 0 1 0-.884-.884z"})},r=(0,a(340498).wt)("arrowChevronSingleLeft",i)},889350:(e,t,a)=>{a.d(t,{Z:()=>o});a(296540);var i=()=>a(401497),r=()=>a(710149),n=a(474848);function o(e){const{size:t=22,radius:a=100}=e,o=function(e){const{size:t,radius:a}=e;return(0,i().IS)((()=>({loadingAvatar:{width:t,height:t,borderRadius:a}})),[t,a])}({size:t,radius:a});return(0,n.jsx)(r().A,{style:o.loadingAvatar})}},920188:(e,t,a)=>{a.d(t,{Ay:()=>c,P6:()=>d,l1:()=>l});a(296540);var i=()=>a(401497),r=()=>a(284371),n=()=>a(704152),o=()=>a(864943),s=a(474848);const l=16;function d(e){const t=(0,i().IS)((()=>({button:{display:"inline",padding:"1px 2px",borderRadius:3,textDecoration:"underline"}})),[]);return(0,s.jsx)(n().A,{style:t.button,onClick:e.onClick,children:e.children})}const c=function(e){const{title:t,description:n,icon:d,style:c,titleStyle:u,buttonText:p,buttonOnClick:g,buttonIcon:m,secondaryButtonText:f,secondaryButtonOnClick:h}=e,b=(0,a(62856).A)(!0,300,0),v=(0,i().IS)((e=>({wrapper:{minHeight:250,height:1,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",padding:l,...c},title:{fontSize:17,fontWeight:r().Wy.medium,color:e.text.tertiary,textAlign:"center",marginBottom:-2,...u},description:{margin:"0 auto",fontSize:14,color:e.text.tertiary},button:{marginTop:12,fontSize:14,fontWeight:r().Wy.medium,color:e.text.primary}})),[c,u]);return b?(0,s.jsxs)("div",{style:v.wrapper,children:[d,(0,s.jsx)("div",{style:v.title,children:t}),n?(0,s.jsx)("div",{style:v.description,children:n}):void 0,p?(0,s.jsx)(o().A,{size:"lg",onClick:g,style:v.button,iconLeading:m,children:p}):void 0,f?(0,s.jsx)(o().A,{size:"lg",onClick:h,style:v.button,children:f}):void 0]}):null}},939482:(e,t,a)=>{a.d(t,{AC:()=>M,AW:()=>I,B3:()=>y,Ie:()=>v,O2:()=>b,aZ:()=>k,dZ:()=>j,es:()=>S,j9:()=>x,ky:()=>C,uL:()=>w});a(944114),a(898992),a(354520),a(430670),a(581454);var i=()=>a(221844),r=()=>a(700500),n=()=>a(807427),o=()=>a(513416),s=()=>a(206267),l=()=>a(792071),d=()=>a(179034),c=()=>a(798880),u=()=>a(919709),p=()=>a(506391),g=()=>a(534177),m=()=>a(720665),f=()=>a(630116),h=()=>a(594794);function b(e){return(0,m().sb)(e.flatMap((e=>{if("relation"===e.type)return e.relation.uri})).filter(g().O9))}function v(e){const{environment:t,integration:a,rootUrl:g,rootAttributes:m,relatedUrisToAttributes:b}=e,v=s().Dt(),y=t.currentUser.id,x=new(i().A)({name:"developerIntegrationLabHelpers.getBlockStores"}),S=[],w={};for(const[i,r]of Object.entries(b)){const e=s().JW();S.push({id:e,uri:i,attributes:r}),w[i]=e}const C=[{id:"rootInstanceId",original_url:g,attributes:m,related_external_object_uris_to_instance_ids:w},...S].map((e=>{const t=[];for(const a of e.attributes){const e=(0,p().q8)(a);(0,o().PX)(e)&&t.push(e)}return{...e,attributes:t}}));if("success"!==(0,p().$B)({url:g,integrations:[a],currentSpaceId:v}).type)return{error:"Sample URL does not match provided integration regex."};const j=(0,h().JH)({table:d().ev,environment:t,spaceId:v});let M;for(const i of C){const e={table:d().ev,id:i.id,spaceId:v},a={...i,domain:"test"},n={id:i.id,type:r().xd.externalObjectInstance,version:0,created_at:0,created_by_table:c().oo,created_by_id:(0,h().Z1)({table:c().oo,spaceId:v,environment:t}),last_edited_time:0,last_edited_by_table:c().oo,last_edited_by_id:(0,h().Z1)({table:c().oo,spaceId:v,environment:t}),parent_table:d().ev,parent_id:(0,h().Z1)({table:d().ev,spaceId:v,environment:t}),space_id:v,alive:!0,domain:"",format:a};if(x.setRecord({pointer:e,userId:y},{role:"editor",value:n}),i===C[0]){const t={...n,format:{...a,attributes:void 0}};x.setRecord({pointer:j,userId:y},{role:"editor",value:t}),M=e}}if(!M)return{error:"Root external object was not defined."};const _=new(f().Bv)(t,j,{inMemoryRecordCache:x}),A=new(f().Bv)(t,M,{inMemoryRecordCache:x}),I=(0,h().JH)({table:d().ev,environment:t,spaceId:v}),k=new(f().Bv)(t,I,{inMemoryRecordCache:x}),{model:T}=l().zgg.create({id:I.id,type:"text",space_id:v,parentPointer:{id:(0,h().Z1)({table:d().ev,spaceId:v,environment:t}),table:d().ev,spaceId:v},properties:{title:[(0,u().wmz)((0,u().bMp)(j.id))]},createdBy:{table:c().oo,id:(0,h().Z1)({table:c().oo,spaceId:v,environment:t})}},{useCrdt:n().I()}),P=T.__IM_SORRY__getValue();x.setRecord({pointer:I,userId:y},{role:"editor",value:P});const L=(0,h().JH)({table:d().ev,environment:t,spaceId:v}),D=new(f().Bv)(t,L,{inMemoryRecordCache:x}),{model:E}=l().zgg.create({id:L.id,type:"text",space_id:v,parentPointer:{id:(0,h().Z1)({table:d().ev,spaceId:v,environment:t}),table:d().ev,spaceId:v},properties:{title:[(0,u().wmz)((0,u().bMp)(C[0].id))]},createdBy:{table:c().oo,id:(0,h().Z1)({table:c().oo,spaceId:v,environment:t})}},{useCrdt:n().I()}),B=E.__IM_SORRY__getValue();return x.setRecord({pointer:L,userId:y},{role:"editor",value:B}),{emptyInstanceBlockStore:_,previewBlockStore:A,emptyInlineBlockStore:k,inlineBlockStore:D}}const y=s().Dt(),x="https://acme.com/items/23487",S="acme.com",w="^(?<site>https\\:\\/\\/acme\\.com)\\/items\\/(?<itemNo>\\d+)$",C=[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Acme Item #$<itemNo>",section:"title"}}},{id:"itemId",name:"Item Id",type:"inline",inline:{plain_text:{value:"#$<itemNo>",section:"identifier"}}},{id:"site",name:"Site",type:"inline",inline:{plain_text:{value:"$<site>",section:"secondary"}}}],j={name:"item",regex:w,attributes:C,sampleUrls:[x]},M=[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Feature Request: Link Previews",section:"title"}}},{id:"state",name:"State",type:"relation",relation:{uri:"acme:item_state/open",mention:{section:"primary"}}},{id:"itemId",name:"Item Id",type:"inline",inline:{plain_text:{value:"#23487",section:"identifier"}}},{id:"itemIcon",name:"Item Icon",type:"inline",inline:{color:{value:{r:247,g:247,b:42},section:"entity"}}},{id:"user",name:"User",type:"relation",relation:{uri:"https://acme.com/fig-ment",extension:[{id:"title",section:"secondary"},{id:"avatar_url",section:"avatar"}]}},{id:"description",name:"Description",type:"inline",inline:{plain_text:{value:"Would love to be able to preview some Acme resources in Notion!\n Maybe an open item?",section:"body"}}},{id:"updated_at",name:"Updated At",type:"inline",inline:{datetime:{value:"2022-01-11T19:53:18.829Z",section:"secondary"}}},{id:"label",name:"Label",type:"inline",inline:{enum:{value:"🔨 Ready to Build",color:{r:100,g:100,b:100},section:"primary"}}}],_={uri:"https://acme.com/fig-ment",attributes:[{id:"title",name:"User Name",type:"inline",inline:{title:{value:"fig"}}},{id:"avatar_url",name:"Avatar URL",type:"embed",embed:{src_url:"https://avatars.githubusercontent.com/u/93556354?s=88&u=4967f0be0900684b6963a953ca7fe0ff2268746f&v=4",image:{}}}]},A={uri:"acme:item_state/open",attributes:[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Open",section:"title"}}},{id:"icon",name:"Icon",type:"embed",embed:{src_url:"/images/external_integrations/acme-icon.png",image:{section:"avatar"}}},{id:"color",name:"Color",type:"inline",inline:{color:{value:{r:235,g:64,b:52},section:"background"}}}]};function I(){const e=[_,A],t=b(M),a={};for(const i of t){const t=e.find((e=>e.uri===i));t&&(a[i]=t.attributes)}return a}function k(e){const{domain:t,regex:a,currentIntegration:i}=e,r={...i.info,original_url_domains:[t],original_url_patterns:[{name:"acme-issue",regex:a,attributes:e.attributes.map((e=>{const t=(0,p().q8)(e);if((0,o().PX)(t))return t})).filter(g().O9)}]};return{...i,info:r}}},950705:(e,t,a)=>{function i(e){return{"en-US":{languageNameInThatLanguage:"English (US)",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"English (US)",id:"languagePicker.captions.englishUS"})},"de-DE":{languageNameInThatLanguage:"Deutsch",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"German",id:"languagePicker.captions.germanDE"})},"ko-KR":{languageNameInThatLanguage:"한국어",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"Korean",id:"languagePicker.captions.koreanKo"})},"zh-CN":{languageNameInThatLanguage:"简体中文",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"Simplified Chinese",id:"languagePicker.captions.chineseS"})},"zh-TW":{languageNameInThatLanguage:"繁體中文",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"Traditional Chinese",id:"languagePicker.captions.chineseT"})},"ja-JP":{languageNameInThatLanguage:"日本語",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"Japanese",id:"languagePicker.captions.japaneseJa"})},"es-ES":{languageNameInThatLanguage:"Español (España)",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"Spanish (Spain)",id:"languagePicker.captions.spanishEs"})},"es-LA":{languageNameInThatLanguage:"Español (Latinoamérica)",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"Spanish (Latin America)",id:"languagePicker.captions.spanishLatam"})},"pt-BR":{languageNameInThatLanguage:"Português (Brasil)",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"Portuguese (Brazil)",id:"languagePicker.captions.portugueseBr"})},"fr-FR":{languageNameInThatLanguage:"Français (France)",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"French (France)",id:"languagePicker.captions.frenchFr"})},"da-DK":{languageNameInThatLanguage:"Dansk",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"Danish",id:"languagePicker.captions.danishDk"})},"fi-FI":{languageNameInThatLanguage:"Suomi",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"Finnish",id:"languagePicker.captions.finnishFi"})},"nb-NO":{languageNameInThatLanguage:"Norsk",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"Norwegian",id:"languagePicker.captions.norwegianNo"})},"nl-NL":{languageNameInThatLanguage:"Nederlands",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"Dutch",id:"languagePicker.captions.dutchNl"})},"sv-SE":{languageNameInThatLanguage:"Svenska",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"Swedish",id:"languagePicker.captions.swedishSe"})},"en-GB":{languageNameInThatLanguage:"English (GB)",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"English (GB)",id:"languagePicker.captions.englishGB"})},"th-TH":{languageNameInThatLanguage:"ภาษาไทย",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"Thai",id:"languagePicker.captions.thaiTh"})},"id-ID":{languageNameInThatLanguage:"Bahasa Indonesia",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"Indonesian",id:"languagePicker.captions.indonesianId"})},"vi-VN":{languageNameInThatLanguage:"Tiếng Việt",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"Vietnamese",id:"languagePicker.captions.vietnameseVn"})},pseudo:{languageNameInThatLanguage:"🤡Pseudolocale🤡",languageNameInCurrentLanguage:e.formatMessage({defaultMessage:"Pseudolocale",id:"languagePicker.captions.pseudolocale"})}}}function r(e){return{en:{name:e.formatMessage({defaultMessage:"English",id:"languagePicker.name.english"}),abbreviation:e.formatMessage({defaultMessage:"EN",id:"languagePicker.abbreviation.english"})},de:{name:e.formatMessage({defaultMessage:"German",id:"languagePicker.name.german"}),abbreviation:e.formatMessage({defaultMessage:"DE",id:"languagePicker.abbreviation.german"})},ko:{name:e.formatMessage({defaultMessage:"Korean",id:"languagePicker.name.korean"}),abbreviation:e.formatMessage({defaultMessage:"KO",id:"languagePicker.abbreviation.korean"})},zh:{name:e.formatMessage({defaultMessage:"Chinese",id:"languagePicker.name.chinese"}),abbreviation:e.formatMessage({defaultMessage:"ZH",id:"languagePicker.abbreviation.chinese"})},ja:{name:e.formatMessage({defaultMessage:"Japanese",id:"languagePicker.name.japanese"}),abbreviation:e.formatMessage({defaultMessage:"JA",id:"languagePicker.abbreviation.japanese"})},es:{name:e.formatMessage({defaultMessage:"Spanish",id:"languagePicker.name.spanish"}),abbreviation:e.formatMessage({defaultMessage:"ES",id:"languagePicker.abbreviation.spanish"})},pt:{name:e.formatMessage({defaultMessage:"Portuguese",id:"languagePicker.name.portuguese"}),abbreviation:e.formatMessage({defaultMessage:"PT",id:"languagePicker.abbreviation.portuguese"})},fr:{name:e.formatMessage({defaultMessage:"French",id:"languagePicker.name.french"}),abbreviation:e.formatMessage({defaultMessage:"FR",id:"languagePicker.abbreviation.french"})},da:{name:e.formatMessage({defaultMessage:"Danish",id:"languagePicker.name.danish"}),abbreviation:e.formatMessage({defaultMessage:"DA",id:"languagePicker.abbreviation.danish"})},fi:{name:e.formatMessage({defaultMessage:"Finnish",id:"languagePicker.name.finnish"}),abbreviation:e.formatMessage({defaultMessage:"FI",id:"languagePicker.abbreviation.finnish"})},nb:{name:e.formatMessage({defaultMessage:"Norwegian",id:"languagePicker.name.norwegian"}),abbreviation:e.formatMessage({defaultMessage:"NB",id:"languagePicker.abbreviation.norwegian"})},nl:{name:e.formatMessage({defaultMessage:"Dutch",id:"languagePicker.name.dutch"}),abbreviation:e.formatMessage({defaultMessage:"NL",id:"languagePicker.abbreviation.dutch"})},sv:{name:e.formatMessage({defaultMessage:"Swedish",id:"languagePicker.name.swedish"}),abbreviation:e.formatMessage({defaultMessage:"SV",id:"languagePicker.abbreviation.swedish"})},th:{name:e.formatMessage({defaultMessage:"Thai",id:"languagePicker.name.thai"}),abbreviation:e.formatMessage({defaultMessage:"TH",id:"languagePicker.abbreviation.thai"})},vi:{name:e.formatMessage({defaultMessage:"Vietnamese",id:"languagePicker.name.vietnamese"}),abbreviation:e.formatMessage({defaultMessage:"VI",id:"languagePicker.abbreviation.vietnamese"})},id:{name:e.formatMessage({defaultMessage:"Indonesian",id:"languagePicker.name.indonesian"}),abbreviation:e.formatMessage({defaultMessage:"ID",id:"languagePicker.abbreviation.indonesian"})}}}a.d(t,{V:()=>i,W:()=>r})},951447:(e,t,a)=>{a.d(t,{j:()=>r});var i=a(296540);function r(e){const[t,a]=(0,i.useState)(!1),r="function"==typeof IntersectionObserver;return(0,i.useEffect)((()=>{if(r&&e.current){const t=new IntersectionObserver((e=>{const t=e[0];a(t.intersectionRatio<1)}),{threshold:[1]});return t.observe(e.current),()=>{a(!1),t.disconnect()}}return()=>{}}),[r,e]),t}},981305:(e,t,a)=>{a.d(t,{B:()=>n});a(16280);var i=a(296540),r=()=>a(472090);function n(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,i.useEffect)((()=>{const i=new(r().E)({throttleMs:a});if(!e.current)throw new Error("ref.current is null");return i.observe(e.current),i.rect.addListener(t),()=>{i.destroy()}}),[t])}},981485:(e,t,a)=>{a.d(t,{ZY:()=>P,GA:()=>O,zA:()=>z,cL:()=>U,dK:()=>F,UM:()=>T,E9:()=>L});a(944114),a(898992),a(354520),a(581454);var i=()=>a(799288),r=()=>a(857639),n=()=>a(513416),o=()=>a(427704),s=()=>a(824862),l=()=>a(840911),d=()=>a(332393),c=()=>a(798880),u=()=>a(20498),p=()=>a(506391),g=()=>a(502800),m=()=>a(498212),f=()=>a(534177),h=()=>a(671593),b=()=>a(559926),v=()=>a(908928),y=()=>a(901389),x=()=>a(96689),S=()=>a(449506),w=()=>a(246826);var C=()=>a(434945),j=()=>a(685200),M=()=>a(972435),_=()=>a(765957),A=()=>a(630116),I=()=>a(435009),k=()=>a(751156);function T(e){const{environment:t,integrationStore:a}=e;k().createAndCommit({userAction:"developerIntegrationActions.setIntegrationSecretView",environment:t,canUndo:!0,perform:e=>{!function(e){const{integrationStore:t,transaction:a}=e,i=(0,A().G_)(t,t.pointer,"info");w().zv({store:i,data:{has_viewed_secret:!0},transaction:a})}({integrationStore:a,transaction:e})}})}async function P(e){const{environment:t,recordStore:a}=e;function i(){b().gp(t,{table:a.table})}a.table===s().GP?await v().KA({environment:t,botId:a.id,onSuccess:i}):a.table===d().Li?await async function(e){const{environment:t,integrationId:a,onSuccess:i}=e,r=await S().callApi({eventName:"deleteIntegration",environment:t,data:{integrationId:a}});"failed"===r.type?y().Qg(r):"success"===r.type&&i&&i()}({environment:t,integrationId:a.id,onSuccess:i}):(0,f().HB)(a.table)}function L(e){const{environment:t,formState:a,formData:i}=e;if("create-bot"===a.type)return D({environment:t,formData:i});if("update-bot"===a.type)return function(e){const{environment:t,botPointer:a,formData:i}=e,{currentUserRootStore:r}=_().default.state;if(!r)return;const n=(0,A().Oo)(r,a),o="developerIntegrationActions.updateBot";k().createAndCommit({userAction:o,environment:t,canUndo:!0,perform:e=>{w().zv({store:n,data:{name:i.name,icon:i.icon??null,parent_id:i.space.id,last_edited_by_id:r.id,last_edited_by_table:c().oo,last_edited_at:Date.now(),capabilities:i.capabilities},transaction:e}),e.postSubmitCallbacks=[t=>{t&&H(t,o,e.spaceId)}]}}),b().u2(t,{table:s().GP});const l=n.getKeyStore("integration_id").getValue();if(l){const e=(0,A().Oo)(r,{id:l,table:d().Li}),a={name:i.name,capabilities:i.capabilities},n=(0,A().G_)(e,e.pointer,"info"),o="developerIntegrationActions.updateIntegration";k().createAndCommit({userAction:o,environment:t,canUndo:!0,perform:t=>{w().zv({store:e,data:a,transaction:t}),w().zv({store:n,data:{icon:i.icon??""},transaction:t}),t.postSubmitCallbacks=[e=>{e&&H(e,o,t.spaceId)}]}})}else B({environment:t,botPointer:a,formData:i});return a}({environment:t,botPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table,spaceId:a.startingRecord.value.space_id},formData:i});if("create-guest-integration"===a.type){if(!a.startingRecord)return;const e=a.startingRecord.value.integration_id;return e?R({environment:t,integrationPointer:{id:e,table:d().Li},formData:i,botPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table,spaceId:a.startingRecord.value.space_id}}):E({environment:t,botPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table,spaceId:a.startingRecord.value.space_id},formData:i})}return"update-guest-integration"===a.type?R({environment:t,integrationPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table},formData:i}):"create-third-party-external-integration"===a.type?function(e){const{environment:t,formData:a,integrationPointer:i}=e,{currentUserRootStore:r}=_().default.state,n=i.id;if(!r)return;const o=V(a);if(!o)return;const s=o.oauth_authorize_url;R({environment:t,integrationPointer:i,formData:a,hasLinkPreviewCapabilities:!0,redirect_uris:[s]});const u="developerIntegrationActions.createThirdPartyExternalIntegration";return k().createAndCommit({userAction:u,environment:t,canUndo:!0,perform:e=>{!function(e,t,a){const{integrationId:i,userRootStore:r,config:{oauth_authorize_url:n,oauth_token_url:o,client_id:s,client_secret:d,scopes:u,deletion_url:p}}=a,g={id:i,oauth_authorize_url:n,oauth_token_url:o,client_id:s,client_secret:d,scopes:u,parent_id:r.id,parent_table:c().oo,deletion_url:p};w().eC({environment:e,table:l().Ps,value:g,transaction:t,inMemoryRecordCache:r.inMemoryRecordCache})}(t,e,{integrationId:n,userRootStore:r,config:o}),e.postSubmitCallbacks=[t=>{t&&H(t,u,e.spaceId)}]}}),N(t,i),b().BW(t,{table:d().Li}),i}({environment:t,integrationPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table},formData:i}):"update-third-party-external-integration"===a.type?function(e){const{environment:t,integrationPointer:a,formData:i}=e,{currentUserRootStore:r}=_().default.state;if(!r)return;const n=V(i);if(!n)return;const o=(0,A().Oo)(r,{table:l().Ps,id:a.id}),s={oauth_authorize_url:n.oauth_authorize_url,oauth_token_url:n.oauth_token_url,client_id:n.client_id,client_secret:n.client_secret,scopes:n.scopes||null,deletion_url:n.deletion_url||null},d=n.oauth_authorize_url;R({environment:t,integrationPointer:a,formData:i,hasLinkPreviewCapabilities:!0,redirect_uris:[d]});const c="developerIntegrationActions.updateThirdPartyExternalIntegration";return k().createAndCommit({userAction:c,environment:t,canUndo:!0,perform:e=>{w().zv({store:o,data:s,transaction:e}),e.postSubmitCallbacks=[t=>{t&&H(t,c,e.spaceId)}]}}),a}({environment:t,integrationPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table},formData:i}):"update-first-party-external-integration"===a.type?R({environment:t,integrationPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table},formData:i,hasLinkPreviewCapabilities:!0}):"update-compliance-integration"===a.type?function(e){const{environment:t,integrationPointer:a,formData:i}=e,{currentUserRootStore:r}=_().default.state;if(!r)return;const n=V(i),o=null==n?void 0:n.oauth_authorize_url;if(R({environment:t,integrationPointer:a,formData:i,...o?{redirect_uris:[o]}:void 0}),n){const e=(0,A().Oo)(r,{table:l().Ps,id:a.id}),i={oauth_authorize_url:n.oauth_authorize_url,oauth_token_url:n.oauth_token_url,client_id:n.client_id,client_secret:n.client_secret,scopes:n.scopes||null,deletion_url:n.deletion_url||null},o="developerIntegrationActions.updateComplianceIntegration";k().createAndCommit({userAction:o,environment:t,canUndo:!0,perform:t=>{w().zv({store:e,data:i,transaction:t}),t.postSubmitCallbacks=[e=>{e&&H(e,o,t.spaceId)}]}})}return a}({environment:t,integrationPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table},formData:i}):(0,f().HB)(a)}function D(e){const{environment:t,formData:a}=e,{currentUserRootStore:i}=_().default.state;if(!i)return;const{botStore:r}=v().gI({environment:t,name:a.name,icon:a.icon,userId:i.id,spaceStore:a.space,spaceRole:"none",type:"guest",capabilities:a.capabilities||{read_content:!0,insert_content:!0,update_content:!0,read_user_without_email:!0,read_user_with_email:!0}});return N(t,{id:r.id,table:s().GP,spaceId:a.space.id}),b().BW(t,{table:s().GP}),{id:r.id,table:s().GP,spaceId:a.space.id}}function E(e){const{environment:t,botPointer:a,formData:r}=e,{currentUserRootStore:n}=_().default.state;if(!n)return;const o=(0,A().Oo)(n,a),s=o.getValue(),l=s&&(0,i().hu)(s)?s.capabilities:{read_content:!0,insert_content:!0,update_content:!0,read_user_without_email:!0,read_user_with_email:!0},u={name:r.name,tagline:r.tagline,icon:r.icon,email:r.email,website_url:r.website_url,privacy_policy_url:r.privacy_policy_url,terms_of_use_url:r.terms_of_use_url,template_page_id:r.template_page_id,redirect_uris:r.redirect_uris,capabilities:l,userRootStore:n,developer_name:r.developer_name},p="developerIntegrationActions.integrationId",{performResult:g}=k().createAndCommit({userAction:p,environment:t,canUndo:!0,perform:e=>{const a=function(e,t,a){const{name:i,tagline:r,icon:n,email:o,website_url:s,privacy_policy_url:l,terms_of_use_url:u,template_page_id:p,redirect_uris:g,capabilities:m,userRootStore:f,developer_name:h}=a,b=Date.now(),v=f.id,y={name:i,parent_table:c().oo,parent_id:v,created_at:b,created_by_id:v,created_by_table:c().oo,updated_at:b,updated_by_id:v,updated_by_table:c().oo,redirect_uris:g,type:"guest",status:"unpublished",info:{tagline:r,icon:n,email:o,website_url:s,privacy_policy_url:l,terms_of_use_url:u,template_page_id:p,developer_name:h},capabilities:m,alive:!0};return w().eC({environment:e,table:d().Li,value:y,transaction:t,inMemoryRecordCache:f.inMemoryRecordCache})}(t,e,u),i=a.id;return w().zv({store:o,data:{integration_id:i,parent_table:c().oo,parent_id:n.id},transaction:e}),e.postSubmitCallbacks=[t=>{t&&H(t,p,e.spaceId)}],i}}),m={id:g,table:d().Li};return N(t,m),b().BW(t,{table:d().Li,template_id:r.template_page_id}),m}function B(e){const{environment:t,botPointer:a,formData:r}=e,{currentUserRootStore:n}=_().default.state;if(!n||!a.spaceId)return;const o=(0,A().Oo)(n,a),s=o.getValue(),l=s&&(0,i().hu)(s)?s.capabilities:{read_content:!0,insert_content:!0,update_content:!0,read_user_without_email:!0,read_user_with_email:!0},u={name:r.name,icon:r.icon,capabilities:l,userRootStore:n,spaceId:a.spaceId},p="developerIntegrationActions.integrationId";return k().createAndCommit({userAction:p,environment:t,canUndo:!0,perform:e=>{const a=function(e,t,a){const{name:i,icon:r,spaceId:n,capabilities:o,userRootStore:s}=a,l=Date.now(),u=s.id,p={name:i,parent_table:x().NX,parent_id:n,created_at:l,created_by_id:u,created_by_table:c().oo,updated_at:l,updated_by_id:u,updated_by_table:c().oo,redirect_uris:[""],type:"internal",status:"unpublished",info:{icon:r??""},capabilities:o,alive:!0};return w().eC({environment:e,table:d().Li,value:p,transaction:t,inMemoryRecordCache:s.inMemoryRecordCache})}(t,e,u),i=a.id;return w().zv({store:o,data:{integration_id:i},transaction:e}),e.postSubmitCallbacks=[t=>{t&&H(t,p,e.spaceId)}],i}}),N(t,a),a}function R(e){const{environment:t,integrationPointer:a,formData:i,hasLinkPreviewCapabilities:r,redirect_uris:o,botPointer:s}=e,{currentUserRootStore:l}=_().default.state;if(!l)return;const g=void 0!==s,m=(0,A().Oo)(l,a),h=m.getValue(),v=a.id,y=h&&(0,d().SF)(h)||null==h?void 0:h.info.template_page_id,x=(0,u().Hr)(v),S=x?x.allowedBotCapabilities:r?{...i.capabilities,link_preview:!0}:i.capabilities,C=r?"external":"guest";let M;M=!h||(0,d().SF)(h)?l.id:h.parent_id;const I={name:i.name,redirect_uris:o??i.redirect_uris,capabilities:S,type:C,parent_table:c().oo,parent_id:M},T=(0,A().G_)(m,m.pointer,"info"),P=function(e){const{hasLinkPreviewCapabilities:t,integrationId:a,formData:i,currentIntegrationInfo:r}=e;if(t)return function(e){var t,a,i;const{integrationId:r,formData:o,currentIntegrationInfo:s}=e,l=(null==s||null===(t=s.original_url_patterns)||void 0===t?void 0:t.filter((e=>{var t;return!0===(null===(t=e.additional_types)||void 0===t?void 0:t.collection)})))??[],d=(null===(a=o.url_matching_and_placeholder)||void 0===a||null===(a=a.map((e=>{const t=[];for(const a of e.attributes){const e=(0,p().q8)(a);if(!(0,n().PX)(e))return;t.push(e)}return{name:(0,j().O)({patternName:e.name,integrationId:r}),regex:e.regex,attributes:t,sample_urls:e.sampleUrls}})))||void 0===a?void 0:a.filter(f().O9))??[],c=null===(i=o.domain)||void 0===i||null===(i=i.domainVerifications)||void 0===i||null===(i=i.filter((e=>"unverified"===e.type)))||void 0===i?void 0:i.map((e=>e.domain));return{template_page_id:o.template_page_id,tagline:o.tagline,icon:o.icon,email:o.email,website_url:o.website_url,privacy_policy_url:o.privacy_policy_url,terms_of_use_url:o.terms_of_use_url,developer_name:o.developer_name,unfurl_url:o.unfurl_url,development_url_domains:c,original_url_patterns:[...d,...l],dark_icon:(null==s?void 0:s.dark_icon)??o.icon,accent_color:(null==s?void 0:s.accent_color)??{r:36,g:41,b:47},accent_icon:(null==s?void 0:s.accent_icon)??o.icon}}({integrationId:a,formData:i,currentIntegrationInfo:r});return{tagline:i.tagline,icon:i.icon,email:i.email,website_url:i.website_url,privacy_policy_url:i.privacy_policy_url,terms_of_use_url:i.terms_of_use_url,template_page_id:i.template_page_id,developer_name:i.developer_name}}({hasLinkPreviewCapabilities:r,integrationId:v,formData:i,currentIntegrationInfo:T.getValue()}),L="developerIntegrationActions.updateIntegration";k().createAndCommit({userAction:L,environment:t,canUndo:!0,perform:e=>{if(w().zv({store:m,data:I,transaction:e}),w().zv({store:T,data:P,transaction:e}),g&&s){const t=(0,A().Oo)(l,s);w().zv({store:t,data:{integration_id:v,parent_table:c().oo,parent_id:l.id},transaction:e})}e.postSubmitCallbacks=[t=>{t&&H(t,L,e.spaceId)}]}});const D=i.template_page_id??void 0,E=y!==D;return b().u2(t,{table:d().Li,...E&&{template_id_before:y},...E&&{template_id_after:D}}),a}function F(e){const{environment:t,integrationId:a,allVerifiedDomains:i,domainToRemove:r}=e,{currentUserRootStore:n}=_().default.state;if(!n)return;const o=(0,A().Oo)(n,{table:d().Li,id:a}),s=(0,A().G_)(o,o.pointer,"info"),l="developerIntegrationActions.removeVerifiedDomain";k().createAndCommit({userAction:l,environment:t,canUndo:!0,perform:e=>{w().zv({store:s,data:{original_url_domains:i.filter((e=>e!==r))},transaction:e}),e.postSubmitCallbacks=[t=>{t&&H(t,l,e.spaceId)}]}}),b().u2(t,{table:d().Li})}function U(e){I().oo({environment:e,url:o().JZ.creatorProfileIntegrations})}function N(e,t){if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2]))return;const a={[s().GP]:"internal",[d().Li]:"public"}[t.table],i=(0,m().Xw)(t.id);I().oo({environment:e,url:`${o().JZ.creatorProfileIntegrations}/${a}/${i}`})}function z(e){return`${o().JZ.creatorProfileIntegrations}/public/${e.id}/lab`}function V(e){const t={oauth_authorize_url:e.external_oauth_authorize_url,oauth_token_url:e.external_oauth_token_url,client_id:e.external_client_id,client_secret:e.external_client_secret,scopes:e.external_oauth_scopes,deletion_url:e.external_deletion_url};return(0,h().tf)(l().WW,t)?void 0:t}function H(e,t,a){y().f1(M().A.formatMessage(C().DZ.transactionGenericError)),r().log({level:"error",from:"developerIntegrationActions",type:"createAndCommit",error:(0,g().convertErrorToLog)(e),data:{userAction:t,spaceId:a}})}function O(e){const{environment:t,formState:a,formData:i}=e;if("create-bot"===a.type){const e=D({environment:t,formData:i});if(!e)return;return B({environment:t,botPointer:{id:e.id,table:e.table,spaceId:e.spaceId},formData:i})}if("create-guest-integration"===a.type){const e=D({environment:t,formData:i});if(!e)return;return E({environment:t,botPointer:{id:e.id,table:e.table,spaceId:e.spaceId},formData:i})}return(0,f().HB)(a)}},983125:(e,t,a)=>{a.d(t,{d:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("chevronRightRoundedThin",{viewBox:"0 0 24 24",directional:!0,svg:(0,i.jsx)("path",{d:"M17.0078 11.8594C17.0078 11.724 16.9818 11.599 16.9297 11.4844C16.8776 11.3698 16.7995 11.2604 16.6953 11.1562L10.6094 5.20312C10.4375 5.03125 10.224 4.94531 9.96875 4.94531C9.80208 4.94531 9.64844 4.98698 9.50781 5.07031C9.36719 5.14844 9.25521 5.25521 9.17188 5.39062C9.09375 5.52604 9.05469 5.67969 9.05469 5.85156C9.05469 6.09635 9.14844 6.3151 9.33594 6.50781L14.8203 11.8594L9.33594 17.2109C9.14844 17.4036 9.05469 17.625 9.05469 17.875C9.05469 18.0417 9.09375 18.1927 9.17188 18.3281C9.25521 18.4688 9.36719 18.5781 9.50781 18.6562C9.64844 18.7396 9.80208 18.7812 9.96875 18.7812C10.224 18.7812 10.4375 18.6927 10.6094 18.5156L16.6953 12.5625C16.7995 12.4583 16.8776 12.349 16.9297 12.2344C16.9818 12.1198 17.0078 11.9948 17.0078 11.8594Z"})})},995166:(e,t,a)=>{a.d(t,{M:()=>r});a(296540);var i=a(474848);const r=(0,a(340498).wt)("starFilled",{viewBox:"0 0 24 24",svg:(0,i.jsx)("path",{d:"M4.603 22.837c.375.277.826.2 1.4-.22l6.002-4.411 6.003 4.41c.561.42 1.024.498 1.387.221.375-.276.463-.73.232-1.403l-2.346-7.075 6.047-4.366c.572-.41.77-.83.627-1.271-.143-.432-.55-.653-1.255-.653l-7.424.045-2.269-7.108C12.787.32 12.457 0 12.005 0c-.463 0-.782.32-1.002 1.006l-2.27 7.108-7.423-.045c-.716 0-1.123.221-1.266.653-.144.442.066.862.638 1.27l6.036 4.367-2.335 7.075c-.231.674-.143 1.127.22 1.403z"})})}}]);