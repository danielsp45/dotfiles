"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[288],{70437:(e,t,o)=>{o.d(t,{l:()=>n});const n=["filter","sort","automations","search","noDate","viewSettings"]},73300:(e,t,o)=>{o.d(t,{Qt:()=>c,ah:()=>u});var n=o(296540),s=()=>o(401497),i=()=>o(710149),r=()=>o(157856),a=()=>o(336588),l=()=>o(338518),d=o(474848);function c(e){const{containerRef:t,layout:o}=(0,l().g)(),n=(0,s().IS)((()=>({container:{display:"flex",flexDirection:"column",width:"100%",gap:"minimal"===o?0:24,...e.containerStyle}})),[o,e.containerStyle]);return(0,d.jsx)("div",{ref:t,style:n.container,children:(0,d.jsxs)(r().yo,{layout:o,children:[e.hasComposer?(0,d.jsx)(p,{}):void 0,(0,d.jsx)(m,{}),(0,d.jsx)(h,{})]})})}function u(){const e=(0,s().IS)((()=>({teamHomeTitle:{display:"flex",gap:12,alignItems:"center",paddingBottom:24},teamIcon:{width:40,height:40,borderRadius:6},teamName:{width:120,height:28,borderRadius:6}})),[]);return(0,d.jsxs)("div",{style:e.teamHomeTitle,children:[(0,d.jsx)(i().A,{style:e.teamIcon}),(0,d.jsx)(i().A,{style:e.teamName})]})}function p(){const e=g();return(0,d.jsxs)("div",{style:e.composerContainer,children:[(0,d.jsx)(i().A,{style:e.postComposerTitle}),(0,d.jsx)("div",{style:e.postButtonContainer,children:(0,d.jsx)(i().A,{style:e.postButton})})]})}function m(){const e=g(),{shimmer1:t,shimmer2:o,shimmer3:n}=f();return(0,d.jsxs)("div",{style:e.postContainer,children:[(0,d.jsx)(i().A,{style:e.postTitle}),(0,d.jsxs)("div",{style:e.postContentContainer,children:[(0,d.jsx)(i().A,{style:t}),(0,d.jsx)(i().A,{style:o}),(0,d.jsx)(i().A,{style:n})]}),(0,d.jsxs)("div",{style:e.postComments,children:[(0,d.jsxs)("div",{style:e.postComment,children:[(0,d.jsx)(i().A,{style:{width:20,height:20,borderRadius:10}}),(0,d.jsx)(i().A,{style:{width:160,height:20,borderRadius:6}})]}),(0,d.jsxs)("div",{style:e.postComment,children:[(0,d.jsx)(i().A,{style:{width:20,height:20,borderRadius:10}}),(0,d.jsx)(i().A,{style:{width:80,height:20,borderRadius:6}})]})]})]})}function h(){const e=g(),{shimmer1:t,shimmer2:o,shimmer3:n}=f();return(0,d.jsxs)("div",{style:e.postContainer,children:[(0,d.jsx)(i().A,{style:e.postTitle}),(0,d.jsxs)("div",{style:e.postContentContainer,children:[(0,d.jsx)(i().A,{style:t}),(0,d.jsx)(i().A,{style:o}),(0,d.jsx)(i().A,{style:n})]}),(0,d.jsxs)("div",{style:e.postReactions,children:[(0,d.jsx)(i().A,{style:e.postReaction}),(0,d.jsx)(i().A,{style:e.postReaction}),(0,d.jsx)(i().A,{style:e.postReaction})]})]})}function g(){const{layout:e}=(0,n.useContext)(r().U9)??{layout:"card"};return(0,s().IS)((t=>{const{unhoveredBoxShadow:o}=(0,a().vy)({layout:e,theme:t}),n="minimal"===e?{borderBottomColor:t.regularDividerColor,borderBottomWidth:1,borderBottomStyle:"solid",backgroundColor:t.surface.page}:{};return{container:{display:"flex",flexDirection:"column",alignItems:"center"},composerContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",borderRadius:12,boxShadow:o,padding:20,backgroundColor:t.surface.page,marginBottom:"minimal"===e?16:0,marginTop:48},postContainer:{display:"flex",flexDirection:"column",gap:36,borderRadius:"minimal"===e?0:12,boxShadow:"card"===e?o:void 0,padding:20,backgroundColor:t.surface.page,...n},feedContainer:{display:"flex",flexDirection:"column",gap:24},postTitle:{width:80,height:20,borderRadius:10},postComposerTitle:{width:200,height:20,borderRadius:10},postContentContainer:{display:"flex",flexDirection:"column",gap:12},postButtonContainer:{display:"flex",justifyContent:"flex-end"},postButton:{width:80,height:20,borderRadius:10},postComments:{display:"flex",flexDirection:"column",gap:12},postComment:{display:"flex",gap:8},postReactions:{display:"flex",gap:8},postReaction:{width:40,height:20,borderRadius:10}}}),[e])}function f(){return(0,s().IS)((()=>({shimmer1:{width:"100%",height:20,borderRadius:10},shimmer2:{width:"90%",height:20,borderRadius:10},shimmer3:{width:"80%",height:20,borderRadius:10}})),[])}},73822:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,plusFillIcon:()=>s});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.37 3.37 13.25 13.25",svg:(0,o(474848).jsx)("path",{d:"M10 3.375c.483 0 .875.392.875.875v4.875h4.875a.875.875 0 0 1 0 1.75h-4.875v4.875a.875.875 0 0 1-1.75 0v-4.875H4.25a.875.875 0 0 1 0-1.75h4.875V4.25c0-.483.392-.875.875-.875"})},s=(0,o(340498).wt)("plusFill",n)},101930:(e,t,o)=>{o.d(t,{A:()=>r,x:()=>a});var n=()=>o(56366),s=()=>o(584262),i=()=>o(492414);function r(e){return(0,n().K8)((()=>(0,i().Ay)({store:e,peekViewBlockId:e.id,pageVisitSource:s().y8.CopyLink})),[e])}function a(e){return function(e){const{blockStore:t,pageVisitSource:o}=e;return(0,n().K8)((()=>(0,i().Ay)({store:t,openInCenterPeek:!0,peekViewBlockId:t.id,pageVisitSource:o})),[t,o])}({blockStore:e,pageVisitSource:s().y8.PeekOpen})}},124749:(e,t,o)=>{o.d(t,{$:()=>i});var n=()=>o(56366);const s=new(o(496506).ComputedStore)((()=>o(765957).default.state.currentUserStore),{debugName:"AppStoreCurrentUserStore"});function i(){return(0,n().O$)(s)}},132855:(e,t,o)=>{o.r(t),o.d(t,{arrowInCircleUpFillIcon:()=>s,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o(474848).jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 0 0-15.25 7.625 7.625 0 0 0 0 15.25m3.042-8.07a.625.625 0 0 1-.884 0L10.625 8.02v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 1 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"})},s=(0,o(340498).wt)("arrowInCircleUpFill",n)},135968:(e,t,o)=>{o.d(t,{d_:()=>F,pM:()=>z});o(898992),o(823215);var n=o(296540),s=o(440961),i=()=>o(484714),r=()=>o(56366),a=()=>o(401497),l=()=>o(584262),d=()=>o(73822),c=()=>o(919709),u=()=>o(959013),p=()=>o(496603),m=()=>o(534177),h=()=>o(284371),g=()=>o(435009),f=()=>o(436572),S=()=>o(662453),x=()=>o(145214),y=()=>o(704152),v=()=>o(285790),C=()=>o(545805),w=()=>o(864943),b=()=>o(204063),j=()=>o(2143),I=()=>o(299772),T=()=>o(13679),A=()=>o(157856),M=()=>o(789550),k=()=>o(68465),B=()=>o(756279),R=()=>o(285288),P=()=>o(848237),V=()=>o(623241);const D=(0,u().YK)({postsCollectionViewPageTitle:{id:"posts.collectionViewPage.title",defaultMessage:"Updates"},postsCollectionTitle:{id:"posts.collection.title",defaultMessage:"Updates"},postHeadingName:{id:"posts.collection.headingName",defaultMessage:"Subject"},deleteDraftTooltip:{id:"posts.deleteDraftTooltip",defaultMessage:"Delete draft"},fullScreenTooltip:{id:"posts.fullScreenTooltip",defaultMessage:"Full screen"}});var N=()=>o(659915),U=()=>o(336588),K=()=>o(747444),L=o(474848);const F="mobile-home-feed-portal";function z(e){const{teamStore:t,postStore:o,isEditing:r,composerStyle:a,onSubmit:l,onFullScreenClick:d,createDraft:c,discardDraft:u,setComposerStyle:p,collectionContextStore:h,showEmptyComposerInUnifiedFeed:g}=e,f=(0,i().v3)(),[S,x]=(0,n.useState)(o);(0,n.useEffect)((()=>{(null==o?void 0:o.id)!==(null==S?void 0:S.id)&&x(o)}),[o,null==S?void 0:S.id]);const y=W(S),v=(0,n.useCallback)((e=>{r?K().A.reset():(null==p||p("preview"),(e.deleteNonEmptyDraft||y)&&(x(void 0),u()))}),[r,p,y,u,x]),C=document.getElementById(F);if(C&&f.device.isMobile)return(0,s.createPortal)((0,L.jsx)(J,{teamStore:t,postStore:S,createDraft:c}),C);switch(a){case"preview":return(0,L.jsx)(H,{teamStore:t,postStore:S,setComposerStyle:p,createDraft:c,showEmptyComposerInUnifiedFeed:g});case"inline":return S?(0,L.jsx)(_,{postStore:S,setComposerStyle:p,onSubmit:l,onDismiss:v,onFullScreenClick:d,collectionContextStore:h}):null;default:(0,m().HB)(a)}}function O(e){const{teamStore:t,postStore:s,setComposerStyle:d,createDraft:c,showEmptyComposerInUnifiedFeed:p}=e,m=(0,i().v3)(),h=(0,i().Y0)(),f=(0,o(963589).X)("ken_new_home_design"),[S,x]=(0,n.useState)(!1),y=(0,r().O$)(o(765957).AppStoreCurrentSpaceStore),v=(0,o(124749).$)(),C=W(s),{canJoinTeam:j,postingRestricted:I}=(0,V().i)({teamStore:t}),T=(0,n.useCallback)((()=>x(!0)),[]),M=(0,n.useCallback)((()=>x(!1)),[]),k=(0,n.useCallback)((()=>{if(!(j||I||p))if(h.isMobile){var e;const t=s??c(),o=null==t||null===(e=t.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:t.getRecordModel,pageVisitSource:l().y8.TeamHomePage});o&&g().oo({environment:m,url:o})}else s||c(),null==d||d("inline")}),[c,h.isMobile,m,s,d,j,I,p]),B=(0,r().K8)((()=>(0,o(37433).sx)({environment:m,spaceStore:y})),[y,m]),R=(0,n.useCallback)((()=>{B&&(0,P().vn)("post_composer")}),[B]),D=(0,n.useCallback)((async()=>{y&&t&&await P().e2({environment:m,teamStore:t,currentSpaceStore:y,from:"team_home",andNavigateToTeamHome:!1})}),[y,m,t]),N=(0,n.useCallback)((()=>{t&&P().F2({environment:m,teamId:t.id,tab:o(632709).p.Members,from:"team_home"})}),[m,t]),{layout:K}=(0,n.useContext)(A().U9)??{layout:"card"},F=(0,a().IS)((e=>{const{unhoveredBoxShadow:t,hoveredBoxShadow:o}=(0,U().vy)({layout:K,theme:e}),n="dark"===e.mode;return{container:{cursor:j||I?"default":"pointer",display:"flex",flexDirection:"row",alignItems:"center",gap:6,paddingTop:12,paddingBottom:12,paddingLeft:f?24:16,paddingRight:12,borderRadius:12,boxShadow:S?o:t,background:n?e.surface.wash:e.surface.page},secondaryIcon:{fill:e.icon.secondary},secondaryButton:{color:e.text.secondary}}}),[K,S,j,I,f]),z=(0,n.useMemo)((()=>p&&B?(0,L.jsx)(w().A,{iconStyle:F.secondaryIcon,style:F.secondaryButton,size:"lg",onClick:R,children:(0,L.jsx)(u().sA,{id:"posts.postComposer.createNewTeamspace",defaultMessage:"Create new teamspace"})}):p&&!B?null:j&&!I?(0,L.jsx)(w().A,{iconStyle:F.secondaryIcon,style:F.secondaryButton,size:"lg",onClick:D,children:(0,L.jsx)(u().sA,{id:"posts.postComposer.joinTeam",defaultMessage:"Join"})}):I?(0,L.jsx)(w().A,{iconStyle:F.secondaryIcon,style:F.secondaryButton,size:"lg",onClick:N,children:(0,L.jsx)(u().sA,{id:"posts.postComposer.viewTeamPermissions",defaultMessage:"View permissions"})}):(0,L.jsx)(b().A,{size:"lg",children:C?(0,L.jsx)(u().sA,{id:"posts.postButton.label",defaultMessage:"Post"}):(0,L.jsx)(u().sA,{id:"posts.postButton.resume",defaultMessage:"Resume post"})})),[B,j,R,D,N,C,p,I,F.secondaryButton,F.secondaryIcon]);return(0,L.jsxs)("div",{tabIndex:0,role:"button",style:F.container,onMouseEnter:T,onMouseLeave:M,onClick:k,children:[f?void 0:(0,L.jsx)(o(453697).A,{userStore:v,size:24,avatarShouldShowShadow:!1}),(0,L.jsx)($,{postStore:s,mustJoinTeam:j,showPermissionRestrictedComposer:Boolean(I),showEmptyComposerInUnifiedFeed:p}),z]})}const H=n.memo(O);function E(e){const{postStore:t,onSubmit:s,onDismiss:i,collectionContextStore:r}=e,[l,d]=(0,n.useState)(!1),c=W(t),p=(0,n.useCallback)((()=>d(!0)),[]),m=(0,n.useCallback)((()=>d(!1)),[]),h=(0,o(101930).x)(t),g=(0,u().tz)(),{layout:f}=(0,n.useContext)(A().U9)??{layout:"card"},S=(0,a().IS)((e=>{const{unhoveredBoxShadow:t,hoveredBoxShadow:o}=(0,U().vy)({layout:f,theme:e}),n="dark"===e.mode,s=24,i=24,r=16,a=16,d=28,u=16,p=2,m=2*d+p,h={height:d,width:d,marginTop:-4};return{container:{display:"flex",flexDirection:"column",gap:16,padding:`${i}px ${a}px ${r}px ${s}px`,borderRadius:12,boxShadow:l?o:t,background:n?e.surface.wash:e.surface.page,zIndex:1,cursor:"text",position:"relative"},scroller:{margin:`-${i}px -${a}px -${r}px -${s}px`,pointerEvents:"none",padding:(0,U().OD)({layout:f})},fullScreenIconButton:{position:"absolute",right:c?a:a+d+p,...h},closeIconButton:{position:"absolute",right:a,...h},title:{marginRight:m,pointerEvents:"auto"},footer:{display:"flex",gap:8,justifyContent:"flex-end",alignItems:"center",zIndex:2},fullScreenIcon:{height:u-2,width:u-2},closeIcon:{height:u,width:u}}}),[f,l,c]);return t?(0,L.jsxs)("div",{style:S.container,onMouseEnter:p,onMouseLeave:m,children:[(0,L.jsx)(v().A,{style:S.fullScreenIconButton,ariaLabel:g.formatMessage(D.fullScreenTooltip),icon:o(623516).m,iconStyle:S.fullScreenIcon,href:h,onClick:e.onFullScreenClick}),c?void 0:(0,L.jsx)(o(859428).A,{renderTooltip:()=>g.formatMessage(D.deleteDraftTooltip),render:e=>(0,L.jsx)(v().A,{style:S.closeIconButton,ariaLabel:g.formatMessage(D.deleteDraftTooltip),icon:o(212050).u,iconStyle:S.closeIcon,onClick:()=>i({deleteNonEmptyDraft:!0}),...e})}),(0,L.jsx)(Y,{postStore:t,pageViewBlockContext:o(548821).Rr.DraftPostInInlineComposer,showSelectableHoverMenuOverlay:!1,scrollerStyle:S.scroller,titleStyle:S.title,children:(0,L.jsxs)("div",{style:S.footer,children:[r?(0,L.jsx)(o(478146).eO,{postStore:t}):void 0,(0,L.jsx)(b().A,{onClick:s,disabled:c,size:"lg",children:(0,L.jsx)(u().sA,{id:"posts.postButton.label",defaultMessage:"Post"})})]})})]}):null}const _=n.memo(E);function W(e){return(0,r().K8)((()=>!e||!!e.isEmptyTitle()&&e.getContentStores().every((e=>(0,N().o)(e)))),[e])}function $(e){const{postStore:t,mustJoinTeam:o,showPermissionRestrictedComposer:n,showEmptyComposerInUnifiedFeed:s}=e,l=(0,i().Y0)(),d=(0,a().IS)((e=>({text:{fontSize:14,color:e.text.tertiary,flexGrow:1,flexShrink:1,...h().RC}})),[]),p=W(t),m=(0,r().K8)((()=>{if(s)return(0,L.jsx)(u().sA,{id:"posts.postComposer.emptyPlaceholder",defaultMessage:"You don’t have permission to post in teamspaces you’re following"});if(o&&!n)return(0,L.jsx)(u().sA,{id:"posts.postComposer.joinTeamPlaceholder",defaultMessage:"Join to share your own updates"});if(n)return(0,L.jsx)(u().sA,{id:"posts.postComposer.permissionRestrictedPlaceholder",defaultMessage:"Only teamspace owners can post in this team"});if(p)return l.isMobile?(0,L.jsx)(u().sA,{id:"posts.createPostButton.placeholder",defaultMessage:"Share an update..."}):(0,L.jsx)(u().sA,{id:"posts.createPostButton.placeholderFull",defaultMessage:"Share an update, @mention your team..."});let e=c().q4_((null==t?void 0:t.getTitleValue())??[]);const i=(null==t?void 0:t.getContentStores())??[];for(const t of i){const o=c().q4_(t.getTitleValue());if(o.length>0&&(e+=` ${o}`),e.length>300)break}return e}),[p,t,l.isMobile,o,n,s]);return(0,L.jsx)("div",{style:d.text,children:m})}function Y(e){const{postStore:t,pageViewBlockContext:o,showSelectableHoverMenuOverlay:n,children:s,scrollerStyle:i,titleStyle:a}=e,l=(0,u().tz)(),d=(0,r().K8)((()=>(0,k().ZE)(void 0)),[]);return(0,L.jsxs)(C().A,{debugName:"PostContentInput",capture:!0,onCommandEnter:p().D_,children:[(0,L.jsx)(T().A,{store:t,isDefaultContainer:!0,isRootContainer:!0,render:e=>{let{selectableEvents:s,selectableHoverMenuOverlay:r}=e;return(0,L.jsxs)(j().H,{type:B().A.Y,style:i,store:R().A,...s,children:[n?r:void 0,(0,L.jsx)(I().Ay,{context:o,store:t,paddingBottom:20,titleStyle:a,disabled:!1,disableTopControls:!0,titlePlaceholder:l.formatMessage(D.postHeadingName)}),d?(0,L.jsx)(S().H7,{scrollerStore:R().A}):void 0]})}}),s]})}function J(e){const t=(0,u().tz)(),{teamStore:o,postStore:s,createDraft:c}=e,{verticalScroller:p}=(0,n.useContext)(M().R)??{},m=(0,i().v3)(),S=(0,r().K8)((()=>({top:m.WindowSizeStore.getSafePaddingBottomPx(0),bottom:m.WindowSizeStore.getSafePaddingBottomPx(0)})),[m.WindowSizeStore]),{postingRestricted:v}=(0,V().i)({teamStore:o}),C=(0,n.useCallback)((()=>{var e,o;if(null===(e=m.mobileNative)||void 0===e||e.buzz(),v)return void f().D6({label:t.formatMessage({defaultMessage:"You do not have permission to post",id:"PostComposer.restricted.snackbar.title"}),position:"bottom",style:{maxWidth:"calc(100% - 40px)",justifyContent:"center",textAlign:"center"}});const n=s??c(),i=null==n||null===(o=n.getModel())||void 0===o?void 0:o.getRenderUrl({getRecordModel:n.getRecordModel,pageVisitSource:l().y8.TeamHomePage});i&&g().oo({environment:m,url:i})}),[m,t,c,s,v]),w=(0,r().K8)((()=>{var e;return((null==p||null===(e=p.getStore().state.elementRef.current)||void 0===e?void 0:e.scrollTop)??0)>100}),[p]),b=(0,a().IS)((e=>{const t=S.bottom+70;return{container:{display:"inline-flex",alignItems:"center",height:48,paddingLeft:14,paddingRight:14,borderRadius:30,background:e.surface.wash,color:v?e.text.tertiary:e.text.primary,boxShadow:e.shadowMD,zIndex:10,justifyContent:"center",overflow:"hidden",position:"absolute",bottom:t,right:25},icon:{height:20,width:20},text:{fontSize:17,marginLeft:8,fontWeight:h().Wy.medium,whiteSpace:"nowrap"}}}),[S.bottom,v]);return(0,L.jsxs)(x().A,{tag:y().A,onClick:C,style:b.container,ariaLabel:t.formatMessage({id:"newPostButton.ariaLabel",defaultMessage:"New Post"}),animate:{width:w?48:136},children:[(0,d().plusFillIcon)(b.icon),w?void 0:(0,L.jsx)("div",{style:b.text,children:(0,L.jsx)(u().sA,{id:"newPostButton.caption",defaultMessage:"New post"})})]})}},152077:(e,t,o)=>{o.d(t,{Vs:()=>d,WA:()=>l,YU:()=>c,bO:()=>r,lU:()=>a});var n=o(296540),s=o(474848);const i=n.createContext(void 0);function r(e){return(0,s.jsx)(i.Provider,{value:e.surface,children:e.children})}function a(){return n.useContext(i)}function l(){const e=a();return"TeamHome"===e||"PersonalHome"===e}function d(){return void 0===a()}function c(){return d()?12:0}i.displayName="PostFeedSurfaceContext"},168500:(e,t,o)=>{o.d(t,{u:()=>s});var n=()=>o(961581);const s=new class{constructor(){this.pendingNavigation=void 0}initMeasurement(e){var t;let{homeType:s}=e;const i=n().A.state.initialRenderCompleted?"navigation":"initial",r="navigation"===i?null===(t=o(606932).A.popTimings())||void 0===t?void 0:t.navigationStart:(0,o(410690).getPageOriginTime)();"initial"===i&&n().A.update((e=>({...e,initialRenderCompleted:!0}))),r?this.pendingNavigation={loadType:i,homeType:s,measurementStartTime:r}:this.reset()}onResults(e){let{environment:t}=e;if(!this.pendingNavigation)return;const{measurementStartTime:n,homeType:s,loadType:i}=this.pendingNavigation;this.pendingNavigation=void 0,o(406792).default.measureAfterNextFlush({metricName:"feed_render",startTime:n},{environment:t,getData:()=>({home_type:s,load_type:i})})}reset(){this.pendingNavigation=void 0}}},240865:(e,t,o)=>{o.d(t,{V:()=>i});var n=()=>o(56366),s=()=>o(765957);function i(e){return(0,n().K8)((()=>{var t;return e?e.getMemberCountFromPublicSpaceData()??void 0:(null===(t=s().default.state.currentSpaceStore)||void 0===t?void 0:t.getMemberCountFromPublicSpaceData())??void 0}),[e])}},312316:(e,t,o)=>{o.d(t,{z:()=>p});var n=()=>o(519831),s=()=>o(869558),i=()=>o(854150),r=()=>o(449506),a=()=>o(44729),l=()=>o(751156),d=()=>o(108014),c=()=>o(765957),u=()=>o(630116);async function p(e){const{environment:t,selectedStore:o,currentSpaceViewStore:p,collectionContextStore:m,postStore:h}=e;if(!m)return;const g=m.collectionViewStore(),f=m.collectionViewBlockStore();if(!g||!f||!p)return;const S=o.table===i().yK?o.id:void 0,x=c().default.state.currentSpaceStore;if(!x)return;const y=u().sk.createUniqueRootStore(t,{table:"block",id:o.id,spaceId:x.id}),v=null==y?void 0:y.getCollectionStore(),C={id:o.id,table:n().Vl,spaceId:x.id},w=u().md.createChildStore(y,C);v||(S&&await r().callApi({eventName:"createCollectionViewBlockForPosts",environment:t,data:{teamId:S,spaceId:x.id}}),(0,d().d)({environment:t,collectionViewStore:g,collectionViewBlockStore:f,collectionStore:w,collectionContextStore:m,isFullScreen:!1,isRootChild:!1,isInPeekRenderer:!1,viewsModuleContext:void 0})),l().createAndCommit({environment:t,userAction:"PersonalHomeFeedTab.setCollectionViewSourceTeamId",canUndo:!0,perform:e=>{h&&a().X$({childStore:h,parentStore:v??w,transaction:e}),l().applyOperation({store:g,operation:{pointer:{id:g.id,table:s().Gy},path:["format","collection_view_source","teamId"],command:"set",args:S},transaction:e})}})}},338518:(e,t,o)=>{o.d(t,{g:()=>l});var n=()=>o(484714),s=()=>o(56366),i=()=>o(152077),r=()=>o(997583),a=()=>o(712505);function l(){const e=(0,n().Y0)(),t=(0,i().Vs)(),o=(0,s().K8)((()=>a().default.isSidePeekOpen()),[]),[l,d]=(0,r().z)();return{containerRef:l,layout:d<600&&!(t&&o)||e.isPhone?"minimal":"card"}}},478146:(e,t,o)=>{o.d(t,{eO:()=>I});o(944114),o(898992),o(672577),o(581454);var n=o(296540),s=()=>o(484714),i=()=>o(56366),r=()=>o(401497),a=()=>o(668725),l=()=>o(863330),d=()=>o(959013),c=()=>o(284371),u=()=>o(704152),p=()=>o(760217),m=()=>o(8980),h=()=>o(933117),g=()=>o(299772),f=()=>o(115512),S=()=>o(37433),x=()=>o(765957),y=()=>o(848237),v=()=>o(898808),C=()=>o(312316),w=()=>o(952412),b=o(474848);const j=4;function I(e){let{postStore:t}=e;const o=(0,s().v3)(),a=(0,r().IS)((e=>({createTeamButton:{color:e.text.secondary}})),[]),{currentSpaceViewStore:c,currentSpaceStore:u}=(0,i().K8)((()=>{const{currentSpaceViewStore:e,currentSpaceStore:t}=x().default.state;return{currentSpaceViewStore:e,currentSpaceStore:t}}),[]),g=(0,i().K8)((()=>(0,S().sx)({environment:o,spaceStore:u})),[u,o]),{selectedTeamStore:f,subscribedUserTeamStores:j,collectionContextStore:I,menuItems:A,selectedMenuItem:M}=(0,i().K8)((()=>{const{selectedTeamStore:e,subscribedUserTeamStores:t,collectionContextStore:o}=w().u.state,n=(t??[]).map((e=>({type:"store",store:e})));g&&n.push({type:"create-team-call-to-action"});const s=n.find((t=>"store"===t.type&&t.store.id===(null==e?void 0:e.id)));return{selectedTeamStore:e,subscribedUserTeamStores:t,collectionContextStore:o,menuItems:n,selectedMenuItem:s}}),[g]),k=(0,n.useCallback)((async e=>{"create-team-call-to-action"===e.type?(0,y().vn)("post_composer"):await(0,C().z)({environment:o,currentSpaceViewStore:c,selectedStore:e.store,collectionContextStore:I,postStore:t})}),[o,I,c,t]);return c&&u&&f&&j&&I?(0,b.jsx)(h().A,{items:A,getKey:e=>"store"===e.type?e.store.id:"create-team-call-to-action",selectedItem:M,onSelect:k,renderItem:e=>{const t=e.value;return"store"===t.type?(0,b.jsx)(p().A,{...e,title:t.store.getName(),icon:(0,b.jsx)(v().x,{store:t.store,size:16,disabled:!0})}):(0,b.jsx)(p().A,{...e,style:a.createTeamButton,title:(0,b.jsx)(d().sA,{id:"posts.teamTargetSelector.createTeamspace",defaultMessage:"New teamspace"}),icon:(0,b.jsx)(m().I,{icon:l().plusSmallIcon,size:"sm",color:"secondary"})})},renderOrigin:e=>(0,b.jsx)(T,{...e,selectedStore:f}),width:300}):null}function T(e){const t=(0,s().v3)(),{selectedStore:o,...n}=e,i=(0,r().IS)((e=>({dropdownButton:{padding:"6px 8px",color:e.text.secondary,fontSize:(0,f().ny)(t,"UISmall"),display:"inline-flex",justifyContent:"end",alignItems:"center",borderRadius:j},dropdownIcon:{width:10,marginLeft:4,fill:e.icon.tertiary},dropdownText:{display:"inline-flex",alignItems:"center",fontWeight:c().Wy.medium,overflow:"hidden"}})),[t]);return(0,b.jsxs)(u().A,{style:i.dropdownButton,...n,children:[(0,b.jsx)("div",{style:i.dropdownText,children:(0,b.jsx)(A,{selectedStore:o})}),(0,a().b)(i.dropdownIcon)]})}function A(e){let{selectedStore:t}=e;const o=(0,s().v3)(),n=(0,i().K8)((()=>null==t?void 0:t.getName()),[t]),a=(0,i().K8)((()=>(0,g().rK)(o)),[o]),l=(0,r().IS)((()=>({icon:{marginLeft:a?0:4,marginRight:4},teamName:{...c().RC}})),[a]),u=(0,b.jsx)(v().x,{store:t,size:16,disabled:!0,style:l.icon});return n?(0,b.jsxs)(b.Fragment,{children:[a?void 0:(0,b.jsx)(d().sA,{id:"postsComposer.teamDropdownTitle.in",defaultMessage:"In "}),(0,b.jsx)(d().sA,{id:"postsComposer.teamDropdownTitle.teamInfo",defaultMessage:"{teamIcon} {teamName}",values:{teamIcon:u,teamName:(0,b.jsx)("div",{style:l.teamName,children:n})}})]}):(0,b.jsx)(d().sA,{id:"postsComposer.teamDropdownTitle.withoutTeamName",defaultMessage:"In your teamspace"})}},623241:(e,t,o)=>{o.d(t,{i:()=>r});var n=()=>o(484714),s=()=>o(56366),i=()=>o(486130);function r(e){const{teamStore:t}=e,o=(0,n().v3)(),r=(0,s().K8)((()=>i()._.getSpacePermissionGroupIds({userId:o.currentUser.id,spaceId:null==t?void 0:t.getSpaceId()})),[o,t]),a=(0,s().K8)((()=>{if(t&&o.currentUser.id)return t.getTeamRoleForUser(o.currentUser.id,r)}),[t,o.currentUser.id,r]),l=(0,s().K8)((()=>!!t&&"open"===t.getTeamAccessLevel()),[t]),d="none"===a||!a,c=!d;return{isTeamMember:c,canViewPosts:c||l,canJoinTeam:d&&l,postingRestricted:(0,s().K8)((()=>{if(t)return!t.teamPermissionAllowsMembersToPost()&&!t.allowsUserToPost()}),[t])}}},623516:(e,t,o)=>{o.d(t,{m:()=>s});o(296540);var n=o(474848);const s=(0,o(340498).wt)("expandFullPage",{viewBox:"0 0 14 14",directional:!0,svg:(0,n.jsx)("path",{d:"M1.16211 6.20312C0.947917 6.20312 0.770182 6.13249 0.628906 5.99121C0.48763 5.84538 0.416992 5.66764 0.416992 5.45801V1.71191C0.416992 1.32454 0.524089 1.02376 0.738281 0.80957C0.957031 0.59082 1.26237 0.481445 1.6543 0.481445H5.44141C5.66016 0.481445 5.83789 0.552083 5.97461 0.693359C6.11589 0.834635 6.18652 1.01237 6.18652 1.22656C6.18652 1.44531 6.11589 1.62533 5.97461 1.7666C5.83333 1.90332 5.6556 1.97168 5.44141 1.97168H4.91504L2.76172 1.82812L4.43652 3.4209L6.41895 5.38965C6.4873 5.46257 6.53971 5.54688 6.57617 5.64258C6.61719 5.73372 6.6377 5.83171 6.6377 5.93652C6.6377 6.16439 6.5625 6.34896 6.41211 6.49023C6.26628 6.63151 6.07715 6.70215 5.84473 6.70215C5.63965 6.70215 5.46647 6.63151 5.3252 6.49023L3.35645 4.50098L1.76367 2.82617L1.90723 4.97266V5.45801C1.90723 5.6722 1.83659 5.84993 1.69531 5.99121C1.55859 6.13249 1.38086 6.20312 1.16211 6.20312ZM8.55176 13.6543C8.33757 13.6543 8.15755 13.5837 8.01172 13.4424C7.87044 13.3011 7.7998 13.1234 7.7998 12.9092C7.7998 12.695 7.87044 12.5173 8.01172 12.376C8.15755 12.2347 8.33757 12.1641 8.55176 12.1641H9.07812L11.2383 12.3076L9.5498 10.7148L7.58105 8.74609C7.50358 8.67318 7.44434 8.59115 7.40332 8.5C7.36686 8.4043 7.34863 8.30404 7.34863 8.19922C7.34863 7.97135 7.42383 7.78678 7.57422 7.64551C7.72461 7.50423 7.91374 7.43359 8.1416 7.43359C8.35579 7.43359 8.53125 7.50423 8.66797 7.64551L10.6299 9.62793L12.2295 11.3096L12.0859 9.16309V8.67773C12.0859 8.46354 12.1566 8.28581 12.2979 8.14453C12.4391 8.00326 12.6146 7.93262 12.8242 7.93262C13.0384 7.93262 13.2161 8.00326 13.3574 8.14453C13.5033 8.28581 13.5762 8.46354 13.5762 8.67773V12.417C13.5762 12.8089 13.4668 13.112 13.248 13.3262C13.0339 13.5449 12.7308 13.6543 12.3389 13.6543H8.55176Z"})})},659915:(e,t,o)=>{o.d(t,{o:()=>s,s:()=>i});o(898992),o(430670);var n=()=>o(919709);function s(e){return!e.isTransclusionType()&&!e.isCollectionView()&&!e.hasContent()&&e.isEmptyTitle()}function i(e){const t=(0,n().tyK)(e.getTitleValue()),o=e.getContentStores().flatMap((e=>(0,n().tyK)(e.getTitleValue())));return t.length>0||o&&o.length>0}},747444:(e,t,o)=>{o.d(t,{A:()=>s});class n extends(()=>o(757695))().Store{getInitialState(){return{isOpen:!1,blockStore:void 0}}}const s=new n},863330:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,plusSmallIcon:()=>s});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.74 2.74 10.52 10.52",svg:(0,o(474848).jsx)("path",{d:"M8 2.74a.66.66 0 0 1 .66.66v3.94h3.94a.66.66 0 0 1 0 1.32H8.66v3.94a.66.66 0 0 1-1.32 0V8.66H3.4a.66.66 0 0 1 0-1.32h3.94V3.4A.66.66 0 0 1 8 2.74"})},s=(0,o(340498).wt)("plusSmall",n)},933117:(e,t,o)=>{o.d(t,{A:()=>m});o(944114),o(898992),o(803949),o(581454);var n=o(296540),s=()=>o(496603),i=()=>o(534177),r=()=>o(722872),a=()=>o(377586),l=()=>o(928600),d=()=>o(939740),c=()=>o(480095),u=()=>o(89924),p=o(474848);const m=function(e){let{renderOrigin:t,onClick:n,items:s,getKey:i,renderItem:a,selectedItem:l,onSelect:d,dontCloseParentOnSelect:c,menuTypeOverride:u,menuTitle:m,width:h,minWidth:S,disabled:x,originGap:y,buttonPopupStore:v,sameWidthAsOrigin:C}=e;const w=(0,o(56366).uB)(v,o(463830).A),b=u??(o(780054).A.isMobile?r().gu.Modal:r().gu.Popup);return(0,p.jsx)(o(406699).Ay,{popupType:f(b),bottomSheetInitialState:"half",renderOrigin:t,buttonPopupStore:w,placementToOrigin:o(700250).UV.Bottom,onClick:n,render:e=>(0,p.jsx)(g,{parent:e,items:s,getKey:i,renderItem:a,selectedItem:l,onSelect:d,dontCloseParentOnSelect:c,menuType:b,menuTitle:m,width:h,minWidth:S}),disabled:x,originGap:y,sameWidthAsOrigin:C})};function h(e,t,o,s,i,r,a,l){return{key:0,render:e=>(0,n.createElement)(u().A,{...e,key:t,topBorder:t>0}),items:e.map((e=>({key:s(e),render:t=>i({...t,value:e,key:s(e),selectedItem:r}),action:()=>{!function(e,t,o){t!==e&&o(e)}(e,r,a),l||o.close()}})))}}function g(e){let{parent:t,items:o,getKey:n,renderItem:a,selectedItem:u,onSelect:m,dontCloseParentOnSelect:g,menuType:f,menuTitle:S,width:x,minWidth:y}=e;const v=[];if(function(e){return e.length>0&&e[0]instanceof Array}(o))o.forEach(((e,o)=>{const s=h(e,o,t,n,a,u,m,g);v.push(s)}));else{const e=h(o,0,t,n,a,u,m,g);v.push(e)}const C=(0,p.jsx)(d().Ay,{type:d().Oh.Vertical,initialFocus:s().SL(s().Bq(o),(e=>s().n4(e,u))),sections:v});let w;switch(f){case r().gu.ActionSheet:w={menuType:r().gu.ActionSheet};break;case r().gu.Modal:w={menuType:r().gu.Modal,title:S,right:(0,p.jsx)(c().DoneMenuText,{}),onClickRight:t.close};break;case r().gu.Popup:w={menuType:r().gu.Popup,width:x||160,minWidth:y};break;default:(0,i().HB)(f)}return(0,p.jsx)(l().A,{...w,children:C})}function f(e){switch(e){case r().gu.ActionSheet:return a().n.SlideUp;case r().gu.Modal:return a().n.BottomSheet;case r().gu.Popup:return a().n.Popup}}}}]);