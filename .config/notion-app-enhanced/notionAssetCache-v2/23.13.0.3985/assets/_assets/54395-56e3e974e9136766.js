"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[54395],{103674:(e,t,o)=>{o.d(t,{A:()=>n});class i extends(()=>o(757695))().Store{getInitialState(){return{permissionsInviteStore:new(o(986229).A),contextualInviteStore:new(o(159026).Ay)}}get stage(){return this.state.contextualInviteStore.state.inviteStage}}const n=i},105819:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>i,pencilLineIcon:()=>n});o(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.63 4.12 14.99 11.76",svg:(0,o(474848).jsx)("path",{d:"m13.987 5.682-.684.684-1.288-1.288.692-.691a.91.91 0 0 1 1.28 0c.35.35.35.93 0 1.28zm-9.433 9.433 7.914-7.914-1.289-1.289-7.92 7.908c-.122.122-.214.29-.274.457l-.336 1.082c-.06.229.153.442.366.366l1.082-.335q.252-.07.457-.275m12.446.76H5.61l1.25-1.25H17a.625.625 0 1 1 0 1.25"})},n=(0,o(340498).wt)("pencilLine",i)},136805:(e,t,o)=>{o.r(t),o.d(t,{TopbarShareButton:()=>E,messages:()=>M});var i=o(296540),n=()=>o(484714),r=()=>o(56366),s=()=>o(401497),a=()=>o(328347),l=()=>o(864896),c=()=>o(959013),d=()=>o(381349),u=()=>o(904671),p=()=>o(780054),g=()=>o(38337),m=()=>o(553965),h=()=>o(963589),f=()=>o(321172),v=()=>o(623275),b=()=>o(437487),S=()=>o(326589),x=()=>o(962730),y=()=>o(227440),w=()=>o(493823),C=()=>o(406699),j=()=>o(35392),P=()=>o(859428),k=()=>o(21140),I=()=>o(978578),T=()=>o(863059),B=o(474848);const M=(0,c().YK)({share:{defaultMessage:"Share",id:"topbar.share"}});function A(e){let{store:t,buttonPopupStore:a}=e;const l=(0,n().v3)(),{isMobile:c,isTablet:d}=(0,r().K8)((()=>({isMobile:l.device.isMobile,isTablet:l.device.isTablet})),[l]),p=(0,r().uB)(void 0,o(103674).A),g=(0,r().uB)(void 0,o(529183).Ay),m=(0,r().uB)(void 0,o(454354).A),h=(0,r().K8)((()=>function(e,t){if(t.shouldUserHaveAccessToPrivatePageBlock()&&t.state.changePermissionsEnabled&&t.state.privatePageStore&&t.state.privatePageStore.id===e.id)return t.state.privatePageStore;return e}(t,m)),[t,m]),x=(0,r().K8)((()=>t.canAdmin()),[t]),y=(0,r().K8)((()=>!c&&function(e,t){const{permissionsInviteStore:o}=e.state;return o.state.inviteTargets.length>0||t.state.inviteTargets.length>0}(p,g)),[g,c,p]),{sudoModeStoreId:w}=(0,r().K8)((()=>{var e;return{sudoModeStoreId:null===(e=m.state.privatePageStore)||void 0===e?void 0:e.id}}),[m]),j=(0,r().O$)(o(765957).AppStoreCurrentSpaceStore);(0,i.useEffect)((()=>{!function(e){var t;let{environment:o,store:i,sudoModeStore:n,canAdmin:r,currentSpaceStore:s}=e;null!==(t=n.state.privatePageStore)&&void 0!==t&&t.id&&n.state.privatePageStore.id!==i.id&&n.reset();r||u().B({environment:o,sudoModeStore:n,pageBlockId:i.id,currentSpaceStore:s})}({environment:l,sudoModeStore:m,store:t,canAdmin:x,currentSpaceStore:j})}),[x,l,t,m,w,j]),(0,i.useEffect)((()=>{b().Ay.setState({...b().Ay.state,isInitialized:!0})}));const P=(0,i.useCallback)((()=>{a.reset()}),[a]),k=(0,i.useCallback)((()=>{L({buttonPopupStore:a,universalMemberInviteStore:p,inviteTargetsStore:g}),o(778417).IU({environment:l}),f().Tk(l),(0,S().g)()||o(224701).x(l)}),[a,p,g,l]),I=(0,r().K8)((()=>{const e=t.getPublicPermission();if(!e||!(0,o(68263).W8)(e))return!1;const i=t.getSpaceStore();return!!i&&i.getSettings().hide_sites_banner}),[t]),T=(0,i.useCallback)((e=>(0,B.jsx)(_,{buttonPopupEvents:e,handleClick:k,shouldShowGlobeIcon:I})),[k,I]),M=(0,i.useCallback)((async()=>{if(g.state.inviteTargets.length>0){return void(await f().T({environment:l,inviteTargetsStore:g})&&(f().XP(l),L({buttonPopupStore:a,universalMemberInviteStore:p,inviteTargetsStore:g})))}const{permissionsInviteStore:e}=p.state;"invitee"===e.state.inputFocus&&e.setState({...e.state,inputFocus:"none"});await(0,o(743260).iQ)({environment:l,permissionsInviteStoreState:e.state,from:"share_menu"})||(f().XP(l),L({buttonPopupStore:a,universalMemberInviteStore:p,inviteTargetsStore:g}))}),[a,l,g,p]),A=(0,s().IS)((e=>({buttonPopup:{...c?{width:"100%"}:d?{width:460}:{width:v().$D,overflow:"hidden",borderRadius:v().Sg,boxShadow:e.shadowMD,..."dark"===e.mode&&{border:`1px solid ${e.largePopupBorder}`}}}})),[c,d]);return(0,B.jsx)(C().Ay,{popupType:c?C().z7.SlideUp:C().z7.Popup,forceInitialInbound:!0,buttonPopupStore:a,renderOrigin:T,originGap:c?void 0:8,style:A.buttonPopup,onClick:k,render:()=>(0,B.jsx)(o(482707).k,{buttonPopupStore:a,sudoModeStore:m,store:h,inviteTargetsStore:g,universalMemberInviteStore:p,onUpgradeButtonClick:P,location:c?"topbar_mobile":"topbar_share_button",onClose:M}),persistOnClose:y,onDismiss:M,onClose:M})}function _(e){let{buttonPopupEvents:t,handleClick:o,shouldShowGlobeIcon:a}=e;const{isMobile:l}=(0,n().Y0)(),d=!(0,r().O$)(y().e),u=(0,r().K8)((()=>(0,S().g)()),[]),p=(0,s().IS)((e=>({shortcut:{color:e.text.contrastSecondary}})),[]),g=(0,i.useCallback)((()=>d?(0,B.jsx)(c().sA,{defaultMessage:"Unavailable while offline",id:"topbar.shareButton.offlineTooltip"}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{children:u?(0,B.jsx)(c().sA,{defaultMessage:"Share",id:"topbar.shareButton.tooltipAWTL"}):(0,B.jsx)(c().sA,{defaultMessage:"Share or publish to the web",id:"topbar.shareButton.tooltip"})}),(0,B.jsx)(j().A,{style:p.shortcut,name:"openShareMenu"})]})),[d,u,p.shortcut]);return(0,B.jsx)(P().A,{disableTooltip:l,renderTooltip:g,placement:x().W.Bottom,delayThreshold:400,render:e=>(0,B.jsx)(D,{events:(0,m().A)(e,t),handleClick:o,disabled:d,shouldShowGlobeIcon:a})})}function D(e){let{events:t,handleClick:o,disabled:i,shouldShowGlobeIcon:n}=e;const r=p().A.isMobile,u=(0,c().tz)(),m=(0,h().X)("allow_disable_sites_banner"),f=(0,s().IS)((e=>{const t=(0,I().aD)(e),o=(0,T().Hh)(e);return{mobileIconStyle:t.iconStyle,globeIconStyle:{...o.icon,fill:d().Tj.blue,paddingRight:4},shareButton:{...r?t.iconContainer:{marginRight:o.iconButton.marginRight,marginLeft:6}}}}),[r]);const v=r?(0,l().Y)(f.mobileIconStyle):(0,B.jsxs)(k().Ye,{alignItems:"center",children:[n&&m?(0,a().h)(f.globeIconStyle):void 0,(0,B.jsx)(c().sA,{defaultMessage:"Share",id:"topbar.shareButton.title"})]});return(0,B.jsx)(w().p,{id:void 0,className:g().voG,...t,style:f.shareButton,"aria-label":u.formatMessage(M.share),disabled:i,disabledFeedback:i,children:v})}function L(e){let{buttonPopupStore:t,universalMemberInviteStore:o,inviteTargetsStore:i}=e;t.reset(),o.reset(),i.reset()}const E=i.memo(A)},189158:(e,t,o)=>{o.d(t,{f:()=>s});var i=()=>o(2220),n=()=>o(108944),r=()=>o(457717);function s(e,t){const o=n().fU(t);(0,i().u)({environment:e,event:{eventName:"topbar_breadcrumb_menu_click",eventProperties:{has_parent_pages:o.length>1}}}),r().F.setState({open:!0})}},194820:(e,t,o)=>{o.r(t),o.d(t,{MobileTopbar:()=>pt,RightButtonsComponent:()=>mt,getShouldShowCancelQuickAdd:()=>vt,getShouldShowFilingInHeader:()=>bt,handleCancelQuickAdd:()=>Pt,handleFilingClick:()=>kt,handleQuickAddDone:()=>jt,handleTopbarClick:()=>wt,handleUpdatesClick:()=>Ct,isDefaultPrivateLocation:()=>ft,isEmptyPageAndTitle:()=>ht,isTabletWithNativeHome:()=>xt,messages:()=>dt,shouldRenderBackButton:()=>St,shouldShowSidebarButton:()=>yt});o(944114),o(898992),o(737550);var i=o(296540),n=()=>o(484714),r=()=>o(56366),s=()=>o(401497),a=()=>o(110750),l=()=>o(584262),c=()=>o(49621),d=()=>o(864896),u=()=>o(427704),p=()=>o(179034),g=()=>o(959013),m=()=>o(534177),h=()=>o(328523),f=()=>o(848259),v=()=>o(741496),b=()=>o(750660),S=()=>o(857783),x=()=>o(435009),y=()=>o(537941),w=()=>o(778417),C=()=>o(751156),j=()=>o(345913),P=()=>o(679924),k=()=>o(205127),I=()=>o(462113),T=()=>o(774733),B=()=>o(369767),M=()=>o(116008),A=()=>o(112995),_=()=>o(138156),D=()=>o(186445),L=()=>o(38337),E=()=>o(79043),K=()=>o(731320),W=()=>o(836251),R=()=>o(470928),z=()=>o(645873),N=()=>o(963589),V=()=>o(34144),F=()=>o(696746),O=(o(803949),o(581454),()=>o(436572)),H=()=>o(760217),U=()=>o(928600),Z=()=>o(939740),Y=()=>o(897119),$=()=>o(89924),G=()=>o(722872),Q=()=>o(691298),q=()=>o(962730),X=()=>o(377586),J=()=>o(765957),ee=()=>o(898808),te=()=>o(312316),oe=()=>o(952412),ie=o(474848);function ne(e){let{menuProps:t,menuItems:o}=e;return(0,ie.jsx)(U().A,{...t,children:(0,ie.jsx)(Z().Ay,{type:Z().Oh.Vertical,initialFocus:0,sections:[{key:"teamspaces",render:e=>(0,ie.jsx)($().A,{...e}),items:o,showNoResultMessage:!0}]})})}function re(e){let{postStore:t}=e;const o=(0,g().tz)(),s=(0,n().v3)(),{currentSpaceViewStore:a,currentSpaceStore:l}=(0,r().K8)((()=>{const{currentSpaceViewStore:e,currentSpaceStore:t}=J().default.state;return{currentSpaceViewStore:e,currentSpaceStore:t}}),[]),{selectedTeamStore:c,subscribedUserTeamStores:d,collectionContextStore:u}=(0,r().K8)((()=>oe().u.state),[]),p=(0,r().K8)((()=>oe().u.state.teamTargetMobilePopupOpen),[]);(0,Q().A)({shouldPreserveTextSelection:p??!1,shouldPreserveBlockSelection:!1,shouldRestoreSelection:!0});const m=(0,i.useCallback)((async e=>{const i=e.getName();await(0,te().z)({environment:s,currentSpaceViewStore:a,selectedStore:e,collectionContextStore:u,postStore:t}),oe().u.setState({...oe().u.state,selectedTeamStore:e}),oe().u.closeTeamTargetMobilePopup(),O().D6({label:o.formatMessage({id:"teamTargetSelector.moved.toast.mobile.message",defaultMessage:"Moved to {teamspaceName}"},{teamspaceName:i}),position:"bottom"})}),[s,u,a,t,o]),h=(0,r().K8)((()=>{if(!l)return{};const e={};return e[l.id]=null==l?void 0:l.getName(),null==d||d.forEach((t=>{e[t.id]=t.getName()})),e}),[l,d]);if(!(a&&l&&c&&d&&u))return null;const f=d.map((e=>({key:e.id,render:t=>(0,ie.jsx)(H().A,{...t,title:h[e.id],icon:(0,ie.jsx)(ee().x,{store:e,size:16,disabled:!0}),isChecked:e.id===(null==c?void 0:c.id)}),action:async()=>{await m(e)}}))),v={menuType:G().gu.Modal,title:(0,ie.jsx)(g().sA,{defaultMessage:"Select teamspace",id:"teamTargetSelector.title"})};return(0,ie.jsx)(Y().Ay,{popupType:X().n.BottomSheet,open:p??!1,onDismiss:()=>{oe().u.closeTeamTargetMobilePopup()},placementToOrigin:q().W.Bottom,alignmentToOrigin:q().C.Start,originGap:0,preventScaleTransition:!0,render:()=>(0,ie.jsx)(ne,{menuProps:v,menuItems:f}),preventBlockRenderQueueOnEnter:!0,trapFocus:!0})}var se=()=>o(321172),ae=()=>o(326589),le=()=>o(155959),ce=()=>o(217429),de=()=>o(446027),ue=()=>o(188669),pe=()=>o(630116),ge=()=>o(699527),me=()=>o(285790),he=()=>o(179030),fe=()=>o(16006),ve=()=>o(132389),be=()=>o(21140),Se=()=>o(99600),xe=()=>o(527580),ye=()=>o(628182),we=()=>o(944924),Ce=()=>o(642557),je=()=>o(284371),Pe=()=>o(2220),ke=()=>o(704152),Ie=()=>o(187820),Te=()=>o(593168),Be=()=>o(206954),Me=()=>o(985194),Ae=()=>o(978578),_e=()=>o(641136);function De(e){let{store:t}=e;const o=(0,n().v3)(),a=(0,r().O$)(J().AppStoreCurrentSpaceStore),l=(0,r().K8)((()=>{const e=(0,Ae().MS)(o);return{...e,paddingLeft:e.paddingLeft+16,paddingRight:e.paddingRight+16}}),[o]);(0,_e().L)();const c=(0,i.useCallback)((()=>{const e=ht(t)?"cancel":"done";(0,Pe().u)({environment:o,event:{eventName:"page_creation_topbar_click",eventProperties:{action:e}}}),ce().default.logEvent("page_creation_topbar_click",void 0,{action:e}),"cancel"===e?Pt(o,{isFromTopbar:!0}):jt(void 0,o)}),[o,t]),d=(0,i.useRef)(null),[u,p]=(0,i.useState)(0),g=(0,s().IS)((e=>({container:{...(0,Ae().uZ)(e,ye().uF,!1),pointerEvents:"auto",gap:7},iconContainer:(0,Ae().aD)(e).redesignedCircleIconContainer,leftButtonContainer:{width:u,display:"flex",justifyContent:"flex-start",flexShrink:0},filingButtonContainer:{flex:1,minWidth:0,display:"flex",justifyContent:"center",alignItems:"center"},rightButtonsContainer:{display:"flex",alignItems:"center",gap:12,flexShrink:0}})),[u]);return(0,i.useLayoutEffect)((()=>{function e(){var e;p((null===(e=d.current)||void 0===e?void 0:e.offsetWidth)??0)}return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,ie.jsxs)("div",{style:{...g.container,...l},children:[(0,ie.jsx)("div",{style:g.leftButtonContainer,children:(0,ie.jsx)(A().K,{from:"TopbarMobile.BackButton",fallback:e=>{let{error:t,errorId:o}=e;return(0,ie.jsx)(_().W,{error:t,errorId:o,iconSize:26})},children:(0,ie.jsx)(Te().jH,{defaultMobileButtonStyle:g.iconContainer,onClick:c})})}),(0,ie.jsx)("div",{style:g.filingButtonContainer,children:(0,ie.jsx)(Le,{store:t})}),(0,ie.jsx)("div",{ref:d,style:g.rightButtonsContainer,children:(0,ie.jsx)(A().K,{from:"TopbarMobile.Right",fallback:e=>{let{error:t,errorId:o}=e;return(0,ie.jsx)(_().W,{error:t,errorId:o,iconSize:26})},children:(0,ie.jsx)(Me().RB,{store:t,spaceStore:a,isInvalidPage:!1,isNewPage:!0,iconContainerStyle:g.iconContainer})})})]})}function Le(e){const{store:t}=e,o=(0,n().v3)(),{parentStore:r,isParentPrivateSection:a,isParentEmptyPage:l,parentIcon:c,spaceName:d,canDisplayParentTitle:u}=(0,Be().im)(t),p=(0,s().IS)((e=>({filingButton:{display:"inline-flex",padding:"6px 8px",alignItems:"center",gap:4,borderRadius:100,backgroundColor:e.surface.wash,border:"none",cursor:"pointer",maxWidth:"100%",minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flexShrink:1},lockIcon:{width:16,color:e.icon.secondary},chevronIcon:{width:16,height:16,color:e.icon.secondary},titleContainer:{display:"flex",flexDirection:"row",alignItems:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",minWidth:0,maxWidth:"100%",flexShrink:1,gap:4,fontWeight:je().Wy.medium}})),[]),m=(0,i.useCallback)((()=>{kt(t,o)}),[t,o]);return u&&r?(0,ie.jsxs)(ke().A,{style:p.filingButton,onClick:m,children:[a?(0,ie.jsxs)("div",{style:p.titleContainer,children:[(0,Ce().O)(p.lockIcon),(0,ie.jsx)(g().sA,{defaultMessage:"Private",id:"topbarMobile.filingPrivateSectionButton.label"})]}):(0,ie.jsxs)("div",{style:p.titleContainer,children:[(0,ie.jsx)(Ie().B6,{disabled:!0,icon:c,iconRecordCategory:"workspace",isEmptyPage:l,title:d,size:20}),(0,ie.jsx)("div",{style:{minWidth:0,flex:1,overflow:"hidden",textOverflow:"ellipsis"},children:(0,ie.jsx)(fe().A,{store:r})})]}),(0,we().arrowChevronSingleRightFillIcon)(p.chevronIcon)]}):null}var Ee=()=>o(411813),Ke=()=>o(710793),We=()=>o(426116),Re=()=>o(311337),ze=()=>o(578872),Ne=()=>o(795179),Ve=()=>o(746084),Fe=()=>o(100042),Oe=()=>o(839003);function He(e){let{store:t,shouldShowAddTo:o}=e;const a=(0,s().DP)(),c=(0,n().v3)(),d=(0,n().Y0)(),u=Boolean(c.currentUser.isLoggedIn()||c.publicDomainUserId),p=(0,r().K8)((()=>!(0,Re().y)(c)&&c.currentUser.isLoggedIn()),[c]),m=d.isTablet,h=(0,r().K8)((()=>({...(0,Ae().uZ)(a,ye().s1,o),...(0,Ae().MS)(c)})),[a,o,c]),f=(0,r().K8)((()=>(0,Ae().uO)(p,m)),[m,p]),v=(0,r().K8)((()=>!ze().yr(t)&&"on"===ce().default.getEligibleGroup({experimentId:"public_site_topbar_mobile_share_button",defaultGroup:"control"})),[t]);return(0,ie.jsxs)("div",{onClick:()=>Ue(c),tabIndex:0,onKeyDown:e=>"Enter"===e.key&&Ue(c),role:"row",style:h,className:L().byw,children:[p?(0,ie.jsxs)(i.Fragment,{children:[(0,ie.jsx)(ke().A,{style:{display:"flex",alignItems:"center",height:"100%",paddingLeft:14,paddingRight:14,fontWeight:je().Wy.medium,color:a.text.primary,whiteSpace:"nowrap"},onClick:()=>function(e){const{currentUserRootStore:t,currentUserSettingsStore:o}=J().default.state;t&&o&&We().t9({environment:e,userRootStore:t,userSettingsStore:o,pageVisitSource:l().y8.SwitchSpace})}(c),children:(0,ie.jsx)(g().sA,{defaultMessage:"Back",id:"topbarMobile.backButton.label"})}),(0,ie.jsx)("div",{style:{height:18,width:1,flexShrink:0,marginRight:6,background:a.darkDividerColor}})]}):void 0,(0,ie.jsx)(k().oK,{store:t,style:f,maxAncestorCount:1,showCurrentPageControls:!1,ancestorMaxWidth:100,currentPageMaxWidth:220,isMobile:!0}),(0,ie.jsxs)(be().Ye,{alignItems:"center",children:[v?(0,ie.jsx)(Fe().L,{store:t,buttonPopupStore:Ne().A}):void 0,u?void 0:(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(Oe().S,{store:t}),(0,ie.jsx)(ve().A,{size:8})]}),(0,ie.jsx)(Ve().A,{store:t,buttonPopupStore:Ne().A,useEllipsisIcon:!u})]})]})}function Ue(e){w().IU({environment:e})}var Ze=()=>o(908006),Ye=()=>o(281419),$e=()=>o(340498),Ge=()=>o(725614),Qe=()=>o(869562),qe=()=>o(644914),Xe=()=>o(749687),Je=()=>o(574012),et=()=>o(24157),tt=()=>o(533788),ot=()=>o(126126);function it(e){const t=(0,s().DP)(),o=(0,n().v3)(),{shouldShowAddTo:i,store:a,spaceStore:l,spaceViewStore:c,isInvalidPage:d,pageVisitStore:u,presenceStore:p,hideActionButtons:g,isSidebarExpanded:m,pageMetadata:h}=e,f=(0,r().K8)((()=>St({shouldShowAddTo:i,environment:o})),[i,o]),v=(0,r().K8)((()=>{var e;return null===(e=o.mobileNative)||void 0===e?void 0:e.supportsNativeHomeOnPhone()}),[o.mobileNative]),{isDraftPage:b,isPersonalHome:S,isTeamHome:x,isPosts:y,isMyTasks:w,isFormBlock:C,teamStore:j,canEdit:P,canEditCollection:T,shouldShowCancelQuickAdd:B}=h;const M=(0,r().K8)((()=>({...(0,Ae().uZ)(t,ye().s1,i||Boolean(b)),...(0,Ae().MS)(o)})),[t,i,o,b]),D=(0,r().K8)((()=>yt(o)),[o]),E=(0,r().K8)((()=>bt(i,o)),[o,i]),K=!i&&!d&&!C,W=(0,r().K8)((()=>(0,R().Es)({blockStore:a})),[a]),z=(0,s().IS)((()=>({tabletSidebarButton:{height:$e().lD.lg,width:$e().lD.lg,marginLeft:19,marginRight:14,marginTop:20,marginBottom:21,stroke:t.icon.primary,strokeWidth:.02},leftButtons:{minWidth:0,flexShrink:1,overflow:"hidden",height:"100%"},rightButtons:{minWidth:0,flexShrink:0,flexGrow:0,height:"100%"}})),[t.icon.primary]),N=(0,r().K8)((()=>function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{mobileNative:o}=e;return{flexGrow:0,marginLeft:null!=o&&o.supportsNativeHomeOnPhone()?t?0:20:2,overflow:"auto",WebkitOverflowScrolling:"touch",marginRight:16,height:"100%"}}(o,!0)),[o]);return y?null:(0,ie.jsx)("div",{onClick:()=>wt(o),role:"row",tabIndex:0,onKeyDown:e=>"Enter"===e.key&&wt(o),style:M,className:L().byw,children:b&&a?(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(Be().vf,{store:a}),(0,ie.jsx)(re,{postStore:a})]}):(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsxs)(be().Ye,{alignItems:"center",justifyContent:"flex-start",style:z.leftButtons,children:[D&&!m?(0,ie.jsx)(nt,{defaultMobileButtonStyle:z.tabletSidebarButton}):void 0,(0,ie.jsxs)(A().K,{from:"TopbarMobile.Left",fallback:e=>{let{error:t,errorId:o}=e;return(0,ie.jsx)(_().W,{error:t,errorId:o,iconSize:26})},children:[f?(0,ie.jsx)(Te().Ay,{supportsNativeHomeTabPhone:v}):void 0,K&&a?(0,ie.jsx)(k().oK,{store:a,style:N,maxAncestorCount:2,showCurrentPageControls:!1,ancestorMaxWidth:160,currentPageMaxWidth:240,isMobile:!0}):void 0,K&&W&&a?(0,ie.jsx)(xe().YC,{blockStore:a}):void 0,E&&a?(0,ie.jsx)(Be().j,{store:a}):void 0]})]}),(0,ie.jsx)(be().Ye,{alignItems:"center",justifyContent:"flex-end",style:z.rightButtons,children:(0,ie.jsxs)(A().K,{from:"TopbarMobile.Right",fallback:e=>{let{error:t,errorId:o}=e;return(0,ie.jsx)(_().W,{error:t,errorId:o,iconSize:26})},children:[C&&a?(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(fe().A,{store:a,removeIfEmpty:!0,style:{fontSize:14,paddingLeft:6,overflow:"hidden",textOverflow:"ellipsis"}}),(0,ie.jsx)(ve().A,{size:8})]}):void 0,T&&a?(0,ie.jsx)(Se().A,{store:a},a.id):void 0,(0,ie.jsx)(tt().A,{}),function(){if(!g)return C?a?(0,ie.jsx)(I().A,{formBlockStore:a,inPeekMode:!1}):void 0:S&&a?(0,ie.jsx)(V().J,{store:a,isInvalidPage:Boolean(d)}):x&&j?(0,ie.jsx)(ge().c,{teamStore:j,permissionsInviteStore:void 0}):(0,ie.jsxs)(ie.Fragment,{children:[P&&a&&u&&p?(0,ie.jsx)(ot().Ay,{rootStore:a,pageVisitStore:u,presenceStore:p}):void 0,B?(0,ie.jsx)(Be().Iz,{}):w&&a?(0,ie.jsx)(Be().GK,{store:a,spaceViewStore:c,isInvalidPage:d}):a?(0,ie.jsx)(mt,{store:a,spaceStore:l,spaceViewStore:c,isInvalidPage:d,shouldShowAddTo:i}):null]})}()]})})]})})}function nt(e){let{defaultMobileButtonStyle:t}=e;const o=(0,n().v3)(),i={...t,fill:(0,s().IS)((e=>({iconStyle:(0,Ae().aD)(e).iconStyle})),[]).iconStyle.fill};return(0,ie.jsx)(ke().A,{style:i,onClick:()=>{var e;if(xt(o))null===(e=o.mobileNative)||void 0===e||e.toggleNativeHome();else if((0,qe().tv)(o))Qe().setExpand({environment:o,isExpanded:!Xe().sidebarExpandedStore.state,from:"topbar_mobile",saveDetailsSidebarPreference:!0});else{var t;const{NativeMobileActionBarStore:e}=o,i=e?null===(t=e.state.menu)||void 0===t?void 0:t.type:void 0;"editing"===et().default.state.mode||void 0!==i?(Ge().clear({environment:o}),null==e||e.clear(!1),Je().A.onHide((()=>{Ze().default.afterNextFlush((()=>Qe().open({fromElectron:!1})))}))):Qe().open({fromElectron:!1})}h().gS(o)},children:(0,Ye().b)()})}var rt=()=>o(813402),st=()=>o(487146),at=()=>o(281401),lt=()=>o(136805),ct=()=>o(568394);const dt=(0,g().YK)({comments:{id:"topbarMobile.commentsButton.label",defaultMessage:"Comments"}});function ut(e,t){(0,P().v)(e,"page_creation_topbar_click",t),ce().default.logEvent("page_creation_topbar_click",void 0,{action:t.action})}function pt(e){const t=(0,n().v3)(),{store:o,shouldShowAddTo:a,routerState:l,spaceStore:c}=e,d=(0,r().O$)(Ee().b),{device:u}=t,p=function(e){const{store:t,spaceStore:o,routerState:i,shouldShowAddTo:n,environment:s}=e;return(0,r().K8)((()=>{const e=t&&(0,m().O9)((0,K().qb)(s,t)),r=e&&!(0,ae().g)();return t?{isDraftPage:t.isDraft(),isRestricted:t.isRestricted(),canEdit:t.canEdit(),canEditCollection:t.canEditCollection(),shouldShowCancelQuickAdd:vt(n,t),isMyTasks:(0,D().sj)(t.id),isPersonalHome:(0,F().lU)(t),isTeamHome:!1,isFormBlock:t.isFormBlock(),teamStore:void 0,isPosts:!1,isViewingPublicPage:e,isViewingNonPublicShareLinkPublicPage:r}:{isDraftPage:!1,isRestricted:!1,canEdit:!1,canEditCollection:!1,isPersonalHome:!1,isTeamHome:"team"===i.route.name,isPosts:"posts"===i.route.name,isMeet:"meet"===i.route.name,isMyTasks:!1,isFormBlock:!1,shouldShowCancelQuickAdd:!1,teamStore:"team"===i.route.name&&o?pe().sk.createChildStore(o,{table:"team",id:i.route.teamId,spaceId:o.id}):void 0,isViewingPublicPage:e,isViewingNonPublicShareLinkPublicPage:r}}),[t,o,i,n,s])}({store:o,spaceStore:c,routerState:l,shouldShowAddTo:a,environment:t}),g=(0,N().X)("read_public_share_links_from_space_view"),h=(0,r().K8)((()=>(0,at().pF)({device:u,route:l.route})),[u,l.route]);(0,i.useEffect)((()=>{const e=function(e){const{pageMetadata:t,isViewingPublicPage:o,isNewPage:i,route:n,device:r,showRedesignedTopbar:s}=e;if(o)return{topbar:Ke().O.browserPublicPage};if(r.isTablet)return{topbar:Ke().O.tablet};if(r.isPhone&&r.isMobileBrowser)return{topbar:Ke().O.browserPhone};if(t.isFormBlock)return{topbar:Ke().O.legacyPhone};if(s&&"page"===n.name&&!i&&r.isPhone&&r.isMobileNative)return{topbar:Ke().O.redesignedExistingPage};if(s&&"page"===n.name&&i&&r.isPhone&&r.isMobileNative)return{topbar:Ke().O.redesignedNewPage};return{topbar:Ke().O.legacyPhone}}({pageMetadata:p,isViewingPublicPage:g?p.isViewingNonPublicShareLinkPublicPage:p.isViewingPublicPage,isNewPage:a,device:u,route:l.route,showRedesignedTopbar:h});Ee().b.setState(e)}),[u,l.route,p,h,a,g]);const f=(0,r().K8)((()=>{if(!o)return!1;const e=o.isLockedForAllUsers()&&o.canEdit();return(!p.isViewingPublicPage||o.canEditCollection())&&u.isPhone&&e}),[o,p.isViewingPublicPage,u]),v=(0,s().IS)((e=>({legacy:{width:"100%",maxWidth:"100vw",zIndex:Me().i3,pointerEvents:"auto"},redesign:{width:"100%",maxWidth:"100vw",zIndex:Me().i3}})),[]);let b;const S=(0,E().A)(!0);switch(d.topbar){case Ke().O.browserPublicPage:b=o&&(0,ie.jsx)(He,{store:o,shouldShowAddTo:a});break;case Ke().O.tablet:b=(0,ie.jsx)(it,{...e,pageMetadata:p});break;case Ke().O.browserPhone:case Ke().O.legacyPhone:b=(0,ie.jsx)(gt,{...e,pageMetadata:p});break;case Ke().O.redesignedExistingPage:return(0,ie.jsx)("header",{...S,style:v.redesign,children:o?(0,ie.jsx)(Me().L5,{store:o,routerState:l,isInvalidPage:e.isInvalidPage,showPermissionsBanner:f}):void 0});case Ke().O.redesignedNewPage:b=o&&(0,ie.jsx)(De,{store:o});break;default:b=null}return(0,ie.jsxs)("header",{...S,style:v.legacy,className:L().byw,children:[b,f&&o?(0,ie.jsx)(he().l,{label:(0,ie.jsx)("div",{children:(0,ie.jsx)(Se().A,{store:o},o.id)}),tint:"gray",display:"full-width"}):void 0]})}function gt(e){const t=(0,n().v3)(),{shouldShowAddTo:o,store:i,spaceStore:a,spaceViewStore:l,isInvalidPage:c,hideActionButtons:d,pageMetadata:u}=e,p=(0,r().K8)((()=>St({shouldShowAddTo:o,environment:t})),[o,t]),g=(0,r().K8)((()=>{var e;return null===(e=t.mobileNative)||void 0===e?void 0:e.supportsNativeHomeOnPhone()}),[t.mobileNative]),{isDraftPage:m,isPersonalHome:h,isTeamHome:f,isPosts:v,isMyTasks:b,isFormBlock:S,teamStore:x,shouldShowCancelQuickAdd:y}=u;const w=o||m,C=(0,s().IS)((e=>({container:(0,Ae().uZ)(e,void 0,!w),leftButtons:{minWidth:0,flexShrink:1,overflow:"hidden",height:"100%"},rightButtons:{minWidth:0,flexShrink:0,flexGrow:0,height:"100%"}})),[w]),{WindowSizeStore:j}=t,P=(0,r().K8)((()=>{const e=(0,Ae().MS)(t);return w?{...e,paddingLeft:j.getSafePaddingLeftPx(7)}:e}),[t,j,w]),T=(0,r().K8)((()=>yt(t)),[t]),B=(0,r().K8)((()=>bt(o,t)),[t,o]),M=!o&&!c&&!S,D=(0,r().K8)((()=>(0,R().Es)({blockStore:i})),[i]),L=(0,r().K8)((()=>(0,Ae().uO)(p)),[p]);return v?null:(0,ie.jsx)("div",{onClick:()=>wt(t),role:"row",tabIndex:0,onKeyDown:e=>"Enter"===e.key&&wt(t),style:{...C.container,...P},children:m&&i?(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(Be().vf,{store:i}),(0,ie.jsx)(re,{postStore:i})]}):(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsxs)(be().Ye,{alignItems:"center",justifyContent:"flex-start",style:C.leftButtons,children:[T?(0,ie.jsx)(Be()._y,{}):void 0,(0,ie.jsxs)(A().K,{from:"TopbarMobile.Left",fallback:e=>{let{error:t,errorId:o}=e;return(0,ie.jsx)(_().W,{error:t,errorId:o,iconSize:26})},children:[p&&g?(0,ie.jsx)(Te().Ay,{supportsNativeHomeTabPhone:g}):void 0,M&&i?(0,ie.jsx)(k().oK,{store:i,style:L,maxAncestorCount:1,showCurrentPageControls:!1,ancestorMaxWidth:160,currentPageMaxWidth:240,isMobile:!0}):void 0,M&&D&&i?(0,ie.jsx)(xe().YC,{blockStore:i}):void 0,B&&i?(0,ie.jsx)(Be().j,{store:i}):void 0]})]}),(0,ie.jsx)(be().Ye,{alignItems:"center",justifyContent:"flex-end",style:C.rightButtons,children:(0,ie.jsxs)(A().K,{from:"TopbarMobile.Right",fallback:e=>{let{error:t,errorId:o}=e;return(0,ie.jsx)(_().W,{error:t,errorId:o,iconSize:26})},children:[S&&i?(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(fe().A,{store:i,removeIfEmpty:!0,style:{fontSize:14,paddingLeft:6,overflow:"hidden",textOverflow:"ellipsis"}}),(0,ie.jsx)(ve().A,{size:8})]}):void 0,(0,ie.jsx)(tt().A,{}),function(){if(!d)return S?i?(0,ie.jsx)(I().A,{formBlockStore:i,inPeekMode:!1}):void 0:h&&i?(0,ie.jsx)(V().J,{store:i,isInvalidPage:Boolean(c)}):f&&x?(0,ie.jsx)(ge().c,{teamStore:x,permissionsInviteStore:void 0}):y?(0,ie.jsx)(Be().Iz,{}):b&&i?(0,ie.jsx)(Be().GK,{store:i,spaceViewStore:l,isInvalidPage:c}):i?(0,ie.jsx)(mt,{store:i,spaceStore:a,spaceViewStore:l,isInvalidPage:c,shouldShowAddTo:o}):null}()]})})]})})}function mt(e){let{store:t,spaceStore:o,spaceViewStore:a,isInvalidPage:l,shouldShowAddTo:u}=e;const p=(0,g().tz)(),m=(0,n().v3)(),{isTablet:h}=(0,n().Y0)(),f=(0,s().IS)((e=>({iconStyle:(0,Ae().aD)(e).iconStyle,iconContainer:(0,Ae().aD)(e).iconContainer})),[]),{value:v}=(0,z().fJ)(T().commentsDependency),b=(0,r().K8)((()=>{if(!v)return!1;const{discussionViewActions:e,discussionHelpers:{getAndSortCommentStoresByTime:o}}=v;return(0,B().getDiscussions)(t).some((t=>!t.getResolved()&&o(t).some((o=>e.isCommentUnread({discussionStore:t,commentStore:o})))))}),[v,t]),S=(0,r().K8)((()=>!!v&&(0,B().getDiscussions)(t).length>0),[v,t]),x=(0,r().K8)((()=>Boolean(o&&!o.canEdit())),[o]),y=(0,r().K8)((()=>t.canEdit()),[t]),w=(0,r().K8)((()=>t.isFormBlock()),[t]),C=(0,r().K8)((()=>t.isPersonProfile()),[t]),j=(0,rt().shouldShowTopbarShareMenu)({isSpaceGuest:x,canEditPage:y,isPersonalHomePage:!1,isFormBlock:w,isTranslated:!1}),P=(0,r().K8)((()=>(0,rt().shouldShowTopbarUpdatesMenu)({canEditPage:y,device:m.device,isPersonalHomePage:!1,isFormBlock:!1,isTranslated:!1})),[y,m.device]),k=(0,r().K8)((()=>M().A.state.open),[]),I=(0,r().K8)((()=>!u&&(!t.isCollectionView()||t.isCollectionViewPageWithContent())&&!w&&!C),[w,u,t,C]),A=!w,_=b||k,D=(0,i.useCallback)((()=>{(0,se().Tk)(m)}),[m]);return l?null:(0,ie.jsxs)(i.Fragment,{children:[h?(0,ie.jsx)("div",{style:{width:16}}):void 0,j?(0,ie.jsx)(me().A,{icon:d().Y,iconStyle:f.iconStyle,ariaLabel:p.formatMessage(lt().messages.share),style:f.iconContainer,onClick:D}):void 0,I?(0,ie.jsx)(Be().m,{shouldShowCommentsIndicator:_,hasDiscussions:S,renderOrigin:(e,t)=>(0,ie.jsxs)("div",{style:{position:"relative"},children:[(0,ie.jsx)(me().A,{icon:c().h,iconStyle:f.iconStyle,ariaLabel:p.formatMessage(dt.comments),style:f.iconContainer,...e}),t?(0,ie.jsx)("div",{style:{position:"absolute",top:0,right:10},children:(0,ie.jsx)(Be().nS,{})}):void 0]})}):void 0,h?(0,ie.jsx)(st().TopbarFavoriteButton,{store:t,spaceViewStore:a,isTablet:h}):void 0,P?(0,ie.jsx)(ct().aU,{onClick:()=>Ct(m)}):void 0,A?(0,ie.jsx)(Be().gW,{store:t}):void 0,u?(0,ie.jsx)(Be().AG,{}):void 0,(0,ie.jsx)("div",{style:{width:4}})]})}function ht(e){return e.isEmptyTitle()&&e.isEmptyPage()}function ft(e){const t=e.getParentStore(),{currentSpaceStore:o}=J().default.state;return t instanceof pe().SL&&o&&t.id===o.id}function vt(e,t){return e&&ht(t)}function bt(e,t){return e&&t.device.isMobileNative&&!t.device.isTablet}function St(e){const{shouldShowAddTo:t,environment:o}=e,{TabbedRouterStore:i}=o;if(t)return!1;const n=(0,W().UL)(o)||"native"===(0,a().Xz)(i.state).type;return!(0,W().Al)(o)||n}function xt(e){return(0,le().T)("supportsNativeHome")&&e.device.isTablet}function yt(e){return xt(e)||!(0,le().T)("supportsNativeHome")}function wt(e){w().IU({environment:e})}function Ct(e){de().A.setState({open:!0}),f().nW(e)}function jt(e,t){const o=J().default.state.mainEditorCurrentBlockStore,i=ue().Ay.state.lastPageId;if(o){var n;const e=null===(n=t.mobileNative)||void 0===n?void 0:n.supportsNativeHomeOnPhone();e?y().navigateToHomeTab(t):i?S().uK({environment:t,store:pe().Bv.createChildStore(o,{table:p().ev,id:i}),showMoveTo:!1,saveParent:!1,redirect:e,pageVisitSource:l().y8.BackForward}):x().oo({environment:t,url:u().JZ.root,redirect:!0}),ut(t,{action:"done"})}}function Pt(e,t){const o=J().default.state.mainEditorCurrentBlockStore,i=ue().Ay.state.lastPageId;if(o){var n;const r=null===(n=e.mobileNative)||void 0===n?void 0:n.supportsNativeHomeOnPhone();r?y().navigateToHomeTab(e):i?S().uK({environment:e,store:pe().Bv.createChildStore(o,{table:p().ev,id:i}),showMoveTo:!1,saveParent:!1,redirect:r,pageVisitSource:l().y8.BackForward}):x().oo({environment:e,url:u().JZ.root,redirect:!0}),t.isFromTopbar&&ut(e,{action:"cancel"}),C().createAndCommit({userAction:"TopbarMobile.handleCancelQuickAdd",environment:e,canUndo:!0,perform:t=>{j().oD({environment:e,blocks:[o],transaction:t}),t.postSubmitCallbacks.push((t=>{t||(0,v().N)(e,{analyticsName:"delete",from:"mobile_topbar",block_id:o.id,block_type:"page"})}))}})}}async function kt(e,t){await b().LP({environment:t,blocks:[e],moveToContext:"quick_add",onAccept:e=>function(e){h().l7(e)}(t),isAddTo:!0,isDefaultPrivateLocation:ft(e)})}},206954:(e,t,o)=>{o.d(t,{df:()=>oe,Iz:()=>ue,m:()=>se,vf:()=>ge,j:()=>de,_y:()=>ie,nS:()=>re,GK:()=>le,Y9:()=>ne,AG:()=>pe,gW:()=>ae,im:()=>ce});var i=o(296540),n=()=>o(908006),r=()=>o(484714),s=()=>o(56366),a=()=>o(401497),l=o(474848);const c={viewBox:"0 0 16 16",fittedViewBox:"1.2 1.2 13.59 13.59",svg:(0,l.jsx)("path",{d:"M7.643 1.341a.55.55 0 0 1 .714 0l1.775 1.513 2.324.185a.55.55 0 0 1 .505.505l.185 2.324 1.513 1.775a.55.55 0 0 1 0 .714l-1.513 1.775-.185 2.324a.55.55 0 0 1-.505.505l-2.324.185-1.775 1.513a.55.55 0 0 1-.714 0l-1.775-1.513-2.324-.185a.55.55 0 0 1-.505-.505l-.185-2.324L1.34 8.357a.55.55 0 0 1 0-.714l1.513-1.775.185-2.324a.55.55 0 0 1 .505-.505l2.324-.185zm2.644 5.144a.55.55 0 1 0-.943-.566L7.371 9.208 6.29 7.947a.55.55 0 1 0-.835.716l1.577 1.84a.55.55 0 0 0 .89-.075z"})},d=(0,o(340498).wt)("badgeCheckFillSmall",c);var u=()=>o(212050),p=()=>o(589407),g=()=>o(124858),m=()=>o(440854),h=()=>o(338862),f=()=>o(864896),v=()=>o(179034),b=()=>o(959013),S=()=>o(381349),x=()=>o(284371),y=()=>o(328523),w=()=>o(435009),C=()=>o(725614),j=()=>o(2220),P=()=>o(189158),k=()=>o(776894),I=()=>o(108944),T=()=>o(71304),B=()=>o(640653),M=()=>o(470928),A=()=>o(891078),_=()=>o(577009),D=()=>o(204263),L=()=>o(321172),E=()=>o(869562),K=()=>o(644914),W=()=>o(883497),R=()=>o(749687),z=()=>o(463830),N=()=>o(574012),V=()=>o(630116),F=()=>o(24157),O=()=>o(704152),H=()=>o(285790),U=()=>o(8980),Z=()=>o(187820),Y=()=>o(16006),$=()=>o(171347),G=()=>o(194820),Q=()=>o(593168),q=()=>o(978578),X=()=>o(487146),J=()=>o(705630),ee=()=>o(136805),te=()=>o(551780);function oe(e){let{supportsNativeHomeTabPhone:t,defaultMobileButtonStyle:o}=e;return(0,l.jsx)(Q().b,{supportsNativeHomeTabPhone:t,defaultMobileButtonStyle:o})}function ie(){const e=(0,r().v3)(),t=(0,s().K8)((()=>(0,K().tv)(e)&&R().sidebarExpandedStore.state),[e]);return(0,l.jsxs)(O().A,{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,height:"100%",width:36,marginLeft:4},onClick:()=>{var t;if((0,G().isTabletWithNativeHome)(e))null===(t=e.mobileNative)||void 0===t||t.toggleNativeHome();else if((0,K().tv)(e))E().setExpand({environment:e,isExpanded:!R().sidebarExpandedStore.state,from:"topbar_mobile",saveDetailsSidebarPreference:!0});else{var o;const{NativeMobileActionBarStore:t}=e,i=t?null===(o=t.state.menu)||void 0===o?void 0:o.type:void 0;"editing"===F().default.state.mode||void 0!==i?(C().clear({environment:e}),null==t||t.clear(!1),N().A.onHide((()=>{n().default.afterNextFlush((()=>E().open({fromElectron:!1})))}))):E().open({fromElectron:!1})}y().gS(e)},children:[(0,m().a)({width:18,height:18}),t?(0,l.jsx)($().A,{color:$().g.Red,style:{position:"absolute",top:9,right:1},count:0}):(0,l.jsx)(_().Wt,{type:e.device.isMobileBrowser?"allSpaces":"otherSpaces",color:$().g.Red,style:{position:"absolute",top:9,right:1}})]})}function ne(e){let{store:t,isLocked:o}=e;const n=(0,r().v3)(),c=(0,a().IS)((e=>({buttonStyle:{minWidth:0,flex:1,width:"100%",overflow:"hidden"},container:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",minWidth:0,flex:1,pointerEvents:"inherit",width:"100%",overflow:"hidden",marginTop:6,marginBottom:6,height:"100%"},badge:{width:16,height:16},breadcrumbAndBadgeWrapper:{display:"flex",flexDirection:"row",alignItems:"center",maxLines:1,minWidth:0,width:"100%",gap:6,justifyContent:"flex-start"},breadcrumb:{alignItems:"center",flex:"0 1 auto",color:e.text.primary,fontSize:"17px",fontStyle:"normal",fontWeight:x().Wy.medium,lineHeight:"24px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxLines:1,minWidth:0,maxWidth:"100%"},subtitle:{color:e.text.secondary,textAlign:"start",fontSize:"13px",fontStyle:"normal",fontWeight:500,lineHeight:"16px",flex:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxLines:1,minWidth:0,width:"100%"}})),[]),u=(0,s().K8)((()=>{const e=I().fU(t);if(e.length<=1)return null;const o=e[1];return o instanceof V().h4?o:I().Nq(t,1)}),[t]),p=(0,s().K8)((()=>t.isTopLevelPrivatePage()),[t]),g=(0,s().K8)((()=>(0,M().Es)({blockStore:t})),[t]),m=(0,i.useCallback)((()=>{(0,P().f)(n,t)}),[n,t]);return(0,l.jsx)(O().A,{style:c.buttonStyle,onClick:m,children:(0,l.jsxs)("div",{style:c.container,children:[(0,l.jsxs)("div",{style:c.breadcrumbAndBadgeWrapper,children:[(0,l.jsx)(Y().A,{store:t,style:c.breadcrumb}),g?(0,l.jsx)(U().I,{style:c.badge,icon:d,color:"uiBluePrimary",size:"sm"}):void 0,!g&&o?(0,l.jsx)(U().I,{style:c.badge,icon:h().N,color:"tertiary",size:"sm"}):void 0]}),p?(0,l.jsx)("div",{style:c.subtitle,children:(0,l.jsx)(b().sA,{...k().Dh.privateDestinationName})}):u?(0,l.jsx)(Y().A,{store:u,style:c.subtitle}):null]})})}function re(){const{dot:e}=(0,a().IS)((e=>({dot:{height:11,width:11,border:`2px solid ${e.whiteButtonBackground}`,borderRadius:12,background:S().Ay.red,pointerEvents:"none"}})),[]);return(0,l.jsx)("div",{style:e})}function se(e){let{renderOrigin:t,hasDiscussions:o,shouldShowCommentsIndicator:n}=e;const s=(0,r().v3)();return t({onClick:(0,i.useCallback)((()=>{W().A.setState({open:!0}),(0,j().u)({environment:s,event:{eventName:"topbar_comments_menu_click",eventProperties:{has_discussions:o,has_unread_indicator:n}}})}),[s,o,n])},n)}function ae(e){let{store:t,renderOrigin:o,buttonPopupStore:i}=e;const n=(0,s().uB)(i,z().A);return(0,l.jsx)(J().TopbarMoreButton,{store:t,buttonPopupStore:n,renderOrigin:o})}function le(e){let{store:t,spaceViewStore:o,isInvalidPage:i}=e;const n=(0,A().i0)(t);return i||!o?null:(0,l.jsxs)(l.Fragment,{children:[n?void 0:(0,l.jsx)(X().TopbarFavoriteButton,{store:t,spaceViewStore:o}),(0,l.jsx)(D().A,{})]})}function ce(e){const t=(0,r().v3)(),o=(0,s().K8)((()=>e.getParentStore()),[e]),i=(0,s().K8)((()=>(0,G().isDefaultPrivateLocation)(e)),[e]),n=(0,s().K8)((()=>(null==o?void 0:o.table)===v().ev&&o.isEmptyPage()),[o]),a=(0,s().K8)((()=>!o||!(0,T().D_)(o)||o instanceof V().pS?void 0:o.getIcon()),[o]),l=(0,s().K8)((()=>o instanceof V().SL?(0,B().GK)(t,o):void 0),[t,o]),c=o&&(0,T().D_)(o);return{parentStore:c?o:void 0,isParentPrivateSection:i,isParentEmptyPage:n,parentIcon:a,spaceName:l,canDisplayParentTitle:c}}function de(e){let{store:t}=e;const o=(0,r().v3)(),{parentStore:i,isParentPrivateSection:n,isParentEmptyPage:s,parentIcon:c,spaceName:d,canDisplayParentTitle:u}=ce(t),p=(0,a().IS)((e=>({folderIcon:{width:16,color:e.icon.primary},folderIconContainer:{height:32,width:32,backgroundColor:e.tint.regular,display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:4},filingButton:{display:"flex",alignItems:"center",paddingLeft:20,paddingRight:12,fontSize:x().J.UIRegular.mobile,fontWeight:x().Wy.medium,lineHeight:x().K_.UIRegular.mobile,whiteSpace:"nowrap",minWidth:0,color:e.text.primary}})),[]);return u&&t?n?(0,l.jsxs)(O().A,{style:p.filingButton,onClick:()=>(0,G().handleFilingClick)(t,o),children:[(0,l.jsx)("div",{style:{marginRight:8,...p.folderIconContainer},children:(0,g().E)(p.folderIcon)}),(0,l.jsx)(b().sA,{defaultMessage:"Private",id:"topbarMobile.filingPrivateSectionButton.label"})]}):(0,l.jsxs)(O().A,{style:p.filingButton,onClick:()=>(0,G().handleFilingClick)(t,o),children:[(0,l.jsx)(Z().B6,{disabled:!0,icon:c,iconRecordCategory:"workspace",isEmptyPage:s,title:d,size:24,style:{marginRight:8}}),i?(0,l.jsx)(Y().A,{store:i}):void 0]}):null}function ue(){const e=(0,r().v3)(),t=(0,b().tz)(),o=(0,a().IS)((e=>({iconButton:{background:e.tint.regular,marginRight:20,borderRadius:16,width:32,height:32}})),[]);return(0,l.jsx)(H().A,{icon:e=>(0,u().u)({width:20,height:20}),style:o.iconButton,color:"primary",onClick:t=>(0,G().handleCancelQuickAdd)(e,{isFromTopbar:!0}),ariaLabel:t.formatMessage({defaultMessage:"Close",id:"topbarMobile.closeButton.label"})})}function pe(){const e=(0,r().v3)(),t=(0,a().IS)((e=>({doneButton:{display:"flex",alignItems:"center",height:32,paddingLeft:12,paddingRight:12,marginLeft:2,marginRight:16,fontWeight:x().Wy.medium,color:e.text.primary,background:e.tint.regular,borderRadius:16}})),[]);return(0,l.jsx)(O().A,{style:t.doneButton,onClick:t=>(0,G().handleQuickAddDone)(t,e),children:(0,l.jsx)(b().sA,{defaultMessage:"Done",id:"topbarMobile.doneQuickAddButton.label"})})}function ge(e){const{store:t}=e,o=(0,r().v3)(),n=(0,b().tz)(),s=(0,i.useCallback)((()=>{t&&w().aX(o)}),[o,t]),c=(0,a().IS)((e=>({iconButton:{marginLeft:16,background:e.tint.regular,borderRadius:16,width:32,height:32},rightButtons:{display:"flex",alignItems:"center"},icon:(0,q().aD)(e).iconStyle,iconContainer:(0,q().aD)(e).iconContainer})),[]),d=(0,i.useCallback)((()=>{(0,L().Tk)(o)}),[o]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(H().A,{icon:()=>(0,u().u)({width:20,height:20}),style:c.iconButton,onClick:s,ariaLabel:n.formatMessage({defaultMessage:"Close",id:"topbarMobile.closeButton.label"})}),(0,l.jsxs)("div",{style:c.rightButtons,children:[(0,l.jsx)(H().A,{icon:f().Y,iconStyle:c.icon,ariaLabel:n.formatMessage(ee().messages.share),style:c.iconContainer,onClick:d}),(0,l.jsx)(ae,{store:t,renderOrigin:e=>(0,l.jsx)("div",{children:(0,l.jsx)(H().A,{icon:p().L,ariaLabel:n.formatMessage(J().messages.actions),iconStyle:c.icon,style:c.iconContainer,...e})})}),(0,l.jsx)(te().F4,{store:t})]})]})}},281419:(e,t,o)=>{o.d(t,{b:()=>n});o(296540);var i=o(474848);const n=(0,o(340498).wt)("sidebarLeft",{viewBox:"0 0 18 14",directional:!0,svg:(0,i.jsx)("path",{d:"M3.1416 13.4561C2.40332 13.4561 1.84505 13.2669 1.4668 12.8887C1.08854 12.515 0.899414 11.9635 0.899414 11.2344V2.91504C0.899414 2.18132 1.08854 1.6276 1.4668 1.25391C1.84505 0.880208 2.40332 0.693359 3.1416 0.693359H14.8447C15.5876 0.693359 16.1481 0.880208 16.5264 1.25391C16.9046 1.6276 17.0938 2.18132 17.0938 2.91504V11.2344C17.0938 11.9635 16.9046 12.515 16.5264 12.8887C16.1481 13.2669 15.5876 13.4561 14.8447 13.4561H3.1416ZM3.22363 12.1094H14.7695C15.084 12.1094 15.3255 12.0273 15.4941 11.8633C15.6628 11.6992 15.7471 11.4508 15.7471 11.1182V3.02441C15.7471 2.69629 15.6628 2.4502 15.4941 2.28613C15.3255 2.12207 15.084 2.04004 14.7695 2.04004H3.22363C2.90462 2.04004 2.66081 2.12207 2.49219 2.28613C2.32812 2.4502 2.24609 2.69629 2.24609 3.02441V11.1182C2.24609 11.4508 2.32812 11.6992 2.49219 11.8633C2.66081 12.0273 2.90462 12.1094 3.22363 12.1094ZM6.33398 12.3281V1.80762H7.6123V12.3281H6.33398ZM4.99414 4.54199H3.59277C3.47428 4.54199 3.36947 4.49642 3.27832 4.40527C3.19173 4.31413 3.14844 4.21387 3.14844 4.10449C3.14844 3.986 3.19173 3.88346 3.27832 3.79688C3.36947 3.71029 3.47428 3.66699 3.59277 3.66699H4.99414C5.11719 3.66699 5.22201 3.71029 5.30859 3.79688C5.39974 3.88346 5.44531 3.986 5.44531 4.10449C5.44531 4.21387 5.39974 4.31413 5.30859 4.40527C5.22201 4.49642 5.11719 4.54199 4.99414 4.54199ZM4.99414 6.37402H3.59277C3.47428 6.37402 3.36947 6.33073 3.27832 6.24414C3.19173 6.15299 3.14844 6.04818 3.14844 5.92969C3.14844 5.81576 3.19173 5.71549 3.27832 5.62891C3.36947 5.54232 3.47428 5.49902 3.59277 5.49902H4.99414C5.11719 5.49902 5.22201 5.54232 5.30859 5.62891C5.39974 5.71549 5.44531 5.81576 5.44531 5.92969C5.44531 6.04818 5.39974 6.15299 5.30859 6.24414C5.22201 6.33073 5.11719 6.37402 4.99414 6.37402ZM4.99414 8.19922H3.59277C3.47428 8.19922 3.36947 8.15592 3.27832 8.06934C3.19173 7.98275 3.14844 7.88249 3.14844 7.76855C3.14844 7.65007 3.19173 7.54753 3.27832 7.46094C3.36947 7.37435 3.47428 7.33105 3.59277 7.33105H4.99414C5.11719 7.33105 5.22201 7.37435 5.30859 7.46094C5.39974 7.54753 5.44531 7.65007 5.44531 7.76855C5.44531 7.88249 5.39974 7.98275 5.30859 8.06934C5.22201 8.15592 5.11719 8.19922 4.99414 8.19922Z"})})},312316:(e,t,o)=>{o.d(t,{z:()=>p});var i=()=>o(519831),n=()=>o(869558),r=()=>o(854150),s=()=>o(449506),a=()=>o(44729),l=()=>o(751156),c=()=>o(108014),d=()=>o(765957),u=()=>o(630116);async function p(e){const{environment:t,selectedStore:o,currentSpaceViewStore:p,collectionContextStore:g,postStore:m}=e;if(!g)return;const h=g.collectionViewStore(),f=g.collectionViewBlockStore();if(!h||!f||!p)return;const v=o.table===r().yK?o.id:void 0,b=d().default.state.currentSpaceStore;if(!b)return;const S=u().sk.createUniqueRootStore(t,{table:"block",id:o.id,spaceId:b.id}),x=null==S?void 0:S.getCollectionStore(),y={id:o.id,table:i().Vl,spaceId:b.id},w=u().md.createChildStore(S,y);x||(v&&await s().callApi({eventName:"createCollectionViewBlockForPosts",environment:t,data:{teamId:v,spaceId:b.id}}),(0,c().d)({environment:t,collectionViewStore:h,collectionViewBlockStore:f,collectionStore:w,collectionContextStore:g,isFullScreen:!1,isRootChild:!1,isInPeekRenderer:!1,viewsModuleContext:void 0})),l().createAndCommit({environment:t,userAction:"PersonalHomeFeedTab.setCollectionViewSourceTeamId",canUndo:!0,perform:e=>{m&&a().X$({childStore:m,parentStore:x??w,transaction:e}),l().applyOperation({store:h,operation:{pointer:{id:h.id,table:n().Gy},path:["format","collection_view_source","teamId"],command:"set",args:v},transaction:e})}})}},338862:(e,t,o)=>{o.d(t,{N:()=>n});o(296540);const i={viewBox:"0 0 16 16",fittedViewBox:"3.24 1.67 9.51 12.3",svg:(0,o(474848).jsx)("path",{d:"M4.825 4.85a3.175 3.175 0 1 1 6.35 0v1.061a1.95 1.95 0 0 1 1.575 1.914v4.2a1.95 1.95 0 0 1-1.95 1.95H5.2a1.95 1.95 0 0 1-1.95-1.95v-4.2c0-.949.677-1.74 1.575-1.914zm1.1 1.025h4.15V4.85a2.075 2.075 0 0 0-4.15 0zm2.525 4.299a1.05 1.05 0 1 0-.9 0v.976a.45.45 0 0 0 .9 0z"})},n=(0,o(340498).wt)("lockFillSmall",i)},369767:(e,t,o)=>{o.r(t),o.d(t,{DiscussionFormat:()=>M,DiscussionLocationToAvatarSize:()=>G,anyDiscussionCommentsLoading:()=>U,commentComparator:()=>W,discussionLocationToDiscussionFormat:()=>Z,formatFileSize:()=>Q,getAndSortCommentStoresByTime:()=>R,getDiscussions:()=>E,getDiscussionsForSidebar:()=>K,getFirstComment:()=>z,getIcon:()=>B,getLatestRelevantComment:()=>A,getSetOfUsersInDiscussions:()=>Y,hasCommentChanged:()=>H,inputIsEmpty:()=>O,isCommentAllEmojis:()=>$,lineClampForCommentCount:()=>L,sortDiscussionStoresByLatestComment:()=>F});o(898992),o(354520),o(581454),o(737550);var i=()=>o(764880),n=(o(296540),()=>o(340498)),r=o(474848);const s={viewBox:"0 0 20 20",fittedViewBox:"1.79 1.87 16.47 15.5",svg:(0,r.jsx)("path",{d:"M9.66 1.977a.63.63 0 0 1 .785.08l2.647 2.647.08.097a.626.626 0 0 1-.866.867l-.098-.08-1.579-1.58v6.95l6.018 3.475-.577-2.155a.626.626 0 0 1 1.207-.324l.97 3.615.019.121a.625.625 0 0 1-.462.645l-3.614.967a.625.625 0 0 1-.325-1.207l2.158-.579-6.015-3.472-5.97 3.55 2.165.55.118.043a.626.626 0 0 1-.301 1.188l-.125-.02-3.627-.922a.625.625 0 0 1-.451-.76l.921-3.626a.625.625 0 0 1 1.212.308L3.4 14.52l5.98-3.554V4.008L7.8 5.588l-.099.08a.626.626 0 0 1-.786-.964l2.647-2.647z"})},a=(0,n().wt)("arrow3D",s);var l=()=>o(300985),c=()=>o(575157);const d={viewBox:"0 0 20 20",fittedViewBox:"4.12 2.37 11.75 15.25",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M9.134 5.001c-.236-.667-1.18-.667-1.415 0L6.28 9.084a.5.5 0 1 0 .943.332l.276-.784h1.857l.276.784a.5.5 0 0 0 .944-.332zm-.708 1.001.576 1.63h-1.15zM10.75 5a.5.5 0 0 0 0 1h2.5a.5.5 0 0 0 0-1zm.313 3a.5.5 0 0 1 .5-.5h1.687a.5.5 0 0 1 0 1h-1.687a.5.5 0 0 1-.5-.5M6.75 10.708a.5.5 0 0 0-.5.5v3.715a.5.5 0 0 0 .845.362l1.101-1.05a.25.25 0 0 1 .347.003l.675.657a.5.5 0 0 0 .734-.038l1.189-1.435a.25.25 0 0 1 .375-.01l1.368 1.467a.5.5 0 0 0 .866-.341v-3.33a.5.5 0 0 0-.5-.5zm2.554 2.435a.696.696 0 1 1 0-1.393.696.696 0 0 1 0 1.393"}),(0,r.jsx)("path",{d:"M6.25 2.375A2.125 2.125 0 0 0 4.125 4.5v11c0 1.174.951 2.125 2.125 2.125h7.5a2.125 2.125 0 0 0 2.125-2.125v-11a2.125 2.125 0 0 0-2.125-2.125zM5.375 4.5c0-.483.392-.875.875-.875h7.5c.483 0 .875.392.875.875v11a.875.875 0 0 1-.875.875h-7.5a.875.875 0 0 1-.875-.875z"})]})},u=(0,n().wt)("docRichText",d);var p=()=>o(177148),g=()=>o(11356),m=()=>o(435644),h=()=>o(421559),f=()=>o(973231),v=()=>o(578717),b=()=>o(916813),S=()=>o(630417),x=()=>o(811563),y=()=>o(919709),w=()=>o(496603),C=()=>o(534177),j=()=>o(939768),P=()=>o(299545),k=()=>o(842677);const I=()=>o(43371),T={doc:c().D,docx:c().D,pages:c().D,md:c().D,txt:c().D,rtf:c().D,xls:h().T,xlsx:h().T,csv:h().T,tsv:h().T,ods:h().T,pdf:u,pptx:g().G,ppt:g().G,zip:v().p,br:v().p,bz2:v().p,gz:v().p,"7z":v().p,dmg:v().p,pkg:v().p,jar:v().p,rar:v().p,tar:v().p,xar:v().p,stl:a,obj:a,fbx:a,amf:a,iges:a,mp3:f().$,m4a:f().$,wav:f().$,aac:f().$,ogg:f().$,flac:f().$,alac:f().$,wma:f().$,exe:o(465505).P,otf:m().a,ttf:m().a,woff:m().a,eof:m().a,py:l().Z,java:l().Z,js:l().Z,ts:l().Z,tsx:l().Z,c:l().Z,h:l().Z,cpp:l().Z,go:l().Z,rs:l().Z,css:l().Z,php:l().Z,swift:l().Z,kt:l().Z,lua:l().Z,m:l().Z,bash_profile:l().Z,bashrc:l().Z,zshrc:l().Z,vimrc:l().Z,vim:l().Z};function B(e){const t=function(e){if(!e)return"";const{pathname:t}=j().qg(e);if(!t)return"";const o=t.split(".");return o[o.length-1]}(e).toLowerCase();return T[t]??p().Y}let M=function(e){return e[e.Menu=0]="Menu",e[e.Page=1]="Page",e[e.Sidebar=2]="Sidebar",e[e.Margin=3]="Margin",e[e.Unfurl=4]="Unfurl",e}({});function A(e){let{recordStore:t,currentUserId:o,timestamp:i}=e;return V({recordStore:t,currentUserId:o,timestamp:i})||z(t)}const _=6,D=3;function L(e){return e>1?D:_}function E(e){return e?P().Bw(e,{recursivelyLoadAllDiscussions:!0,includeLoadingDiscussions:!0}):[]}function K(e){let{blockStore:t,currentUserId:o,ignoreAfterTime:i}=e;if(!t)return[];return P().Bw(t,{recursivelyLoadAllDiscussions:!0,includeLoadingDiscussions:!0,includePropertyDiscussions:!0}).sort(((e,t)=>{const n=A({recordStore:e,currentUserId:o,timestamp:i}),r=A({recordStore:t,currentUserId:o,timestamp:i});return null!=n&&n.isDefined()?null!=r&&r.isDefined()?-(n.getCreatedTime()-r.getCreatedTime()):1:-1}))}function W(e,t){return e&&e.isDefined()?t&&t.isDefined()?e.getCreatedTime()-t.getCreatedTime():1:-1}function R(e){return P().wc(e).sort(((e,t)=>W(e,t)))}function z(e){return R(e)[0]}function N(e){return V({recordStore:e,currentUserId:void 0})}function V(e){let{recordStore:t,currentUserId:o,timestamp:i}=e;const n=P().wc(t).filter((e=>i?e.isDefined()&&e.getCreatedTime()<i:e.isDefined())).sort(((e,t)=>W(e,t)));return n[n.length-1]}function F(e){return e.sort(((e,t)=>W(N(e),N(t))))}function O(e){const t=e.state.textStore.getValue(),o=(e.state.files??[]).length>0,i=t&&t.length>0;return!o&&!i}function H(e,t){const o=e.state.textStore.getValue(),i=e.state.files;if(!t)return o&&0!==o.length||i&&i.length>0;const n=P().gp(t).getValue();return!w().n4(n,o)||function(e,t){const o=e.state.files,i=P().dd(t);if(i.length!==o.length)return!0;return i.some(((e,t)=>e.id!==o[t].id))}(e,t)}function U(e){if(e.some((e=>!e.isReady())))return!0;return!!e.map((e=>P().wc(e))).flat().some((e=>!e.isReady()||!e.getCreatedTime()))}function Z(e){switch(e){case"block_menu":case"ai_reject_all_suggestions":case"reply_menu_mentions_comments":case"reply_menu_all_updates":case"reply_menu_archive":case"reply_menu_updates_sidebar":case"updates_menu_mentions_comments":case"updates_menu_all_updates":case"updates_menu_archive":return M.Menu;case"page_discussion":case"post_top_level_discussion":return M.Page;case"updates_sidebar":return M.Sidebar;case"margin_comments":return M.Margin;case"comment_unfurl":return M.Unfurl;default:(0,C().HB)(e)}}function Y(e){return w().hS(w().qI(e,(e=>P().wc(e).map((e=>({store:e,pointer:e.getCreatedByPointer()}))))),(e=>{var t;return null===(t=e.pointer)||void 0===t?void 0:t.id})).filter((e=>(0,C().O9)(e.pointer))).map((e=>{let{store:t,pointer:o}=e;return k().RecordStores.createChildStore(t,o)})).map((e=>e.getModel())).filter(C().O9).map((e=>e instanceof x().F?(0,i().A7)(e):e instanceof S().Hj?(0,i().qt)(e):e instanceof b().T?(0,i().Mq)(e):void(0,C().HB)(e))).filter(C().O9)}function $(e){for(const o of e){if(!o.length)return!1;if(!o[1]||!o[1].some(y().nNl)){var t;const e=o[0].trim(),i=I()();if((null===(t=e.match(i))||void 0===t?void 0:t.join(""))!==e)return!1}}return!0}const G={updates_menu_all_updates:28,updates_menu_mentions_comments:28,updates_menu_archive:28,block_menu:20,reply_menu_all_updates:20,reply_menu_mentions_comments:20,reply_menu_archive:20,reply_menu_updates_sidebar:20,page_discussion:20,post_top_level_discussion:20,updates_sidebar:23,margin_comments:20,comment_unfurl:32,ai_reject_all_suggestions:28};function Q(e){return((null==e?void 0:e.match(/[0-9.]+|[a-z]+/gi))??[]).join(" ")}},446027:(e,t,o)=>{o.d(t,{A:()=>i});const i=new(o(463830).A)},448360:(e,t,o)=>{o.d(t,{W:()=>i});const i=o(757695).Store.createValue(!1,{name:"AiPageTranslationCalloutStore"})},457717:(e,t,o)=>{o.d(t,{F:()=>i});const i=new(o(463830).A)},593168:(e,t,o)=>{o.d(t,{jH:()=>v,b:()=>b,Ay:()=>x});o(296540);var i=()=>o(484714),n=()=>o(56366),r=()=>o(401497),s=()=>o(879765),a=()=>o(526278),l=()=>o(940563),c=o(474848);const d=(0,o(340498).wt)("mobileTopbarChevronRight",{viewBox:"0 0 26 26",directional:!0,svg:(0,c.jsxs)("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,c.jsx)("path",{d:"M17.6504 13.0001L9.85039 20.8001",strokeWidth:"1.5",strokeLinecap:"round"}),(0,c.jsx)("path",{d:"M17.6504 13.0001L9.85039 5.20012",strokeWidth:"1.5",strokeLinecap:"round"})]})});var u=()=>o(959013),p=()=>o(435009),g=()=>o(836251),m=()=>o(704152),h=()=>o(978578);const f=(0,u().YK)({back:{defaultMessage:"Back",id:"mobile.topbar.back"},forward:{defaultMessage:"Forward",id:"mobile.topbar.forward"}});function v(e){let{defaultMobileButtonStyle:t,onClick:o,isDisabled:n}=e;const{isTablet:l}=(0,i().Y0)(),d=(0,r().DP)(),p=(0,h().aD)(d),g=(0,u().tz)();let v,b;return l?(v=(0,a().w)({width:24,height:24}),b={...t,fill:p.iconStyle.fill}):(v=(0,s().$)({width:24,height:24,strokeWidth:.2}),b={...t}),(0,c.jsx)(m().A,{onClick:o,className:"notion-history-back-button",disabled:n,disabledFeedback:!0,style:b,ariaLabel:g.formatMessage(f.back),children:v})}function b(e){let{supportsNativeHomeTabPhone:t,defaultMobileButtonStyle:o}=e;const r=(0,i().v3)(),s=(0,n().K8)((()=>!t&&!g().UL(r)),[t,r]);return(0,c.jsx)(v,{defaultMobileButtonStyle:o,onClick:()=>function(e,t){const{mobileNative:o}=e;g().Al(e)||!t||g().UL(e)?p().aX(e):null==o||o.showNativeHomeTab()}(r,t),isDisabled:s})}function S(e){let{defaultMobileButtonStyle:t}=e;const o=(0,i().v3)(),r=(0,n().K8)((()=>!g().MN(o)),[o]),{isTablet:s}=(0,i().Y0)(),a=(0,u().tz)();let h;return h=s?(0,l().P)({width:24,height:24}):d({width:24,height:24}),(0,c.jsx)(m().A,{onClick:()=>{p().sY()},className:"notion-history-forward-button",disabled:r,disabledFeedback:!0,style:t,ariaLabel:a.formatMessage(f.forward),children:h})}const x=function(e){let{supportsNativeHomeTabPhone:t}=e;const{isTablet:n}=(0,i().Y0)(),s=(0,r().IS)((e=>({container:t?{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",paddingLeft:4,paddingRight:t||n?0:4}:{display:"flex",flexShrink:0,height:"100%",paddingLeft:4,paddingRight:t||n?0:4},defaultMobileButtonStyle:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:32,stroke:e.icon.primary},tabletRefreshButtonStyle:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:35,stroke:e.icon.primary,strokeWidth:.2}})),[t,n]);return(0,c.jsx)(o(109488).A,{capture:!0,render:e=>(0,c.jsxs)("div",{style:s.container,...e,children:[(0,c.jsx)(b,{supportsNativeHomeTabPhone:t,defaultMobileButtonStyle:n?s.tabletRefreshButtonStyle:s.defaultMobileButtonStyle}),t?void 0:(0,c.jsx)(S,{defaultMobileButtonStyle:n?s.tabletRefreshButtonStyle:s.defaultMobileButtonStyle})]})})}},641136:(e,t,o)=>{o.d(t,{L:()=>c});var i=o(296540),n=()=>o(56366),r=()=>o(129852),s=()=>o(436572),a=()=>o(620149),l=o(474848);function c(){const e=(0,n().K8)((()=>a().A.state.transactionQueueError),[]);(0,i.useEffect)((()=>{e?s().D6({label:(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,r().exclamationMarkCircleIcon)({width:20,height:20}),(0,l.jsx)("span",{children:"Failed to save"})]}),position:"bottom",style:{width:"100%",maxWidth:"calc(100% - 32px)"},durationMs:"keep"}):s().N2()}),[e])}},705630:(e,t,o)=>{o.r(t),o.d(t,{TopbarMoreButton:()=>B,messages:()=>M});var i=o(296540),n=()=>o(484714),r=()=>o(56366),s=()=>o(401497),a=()=>o(589407),l=()=>o(340498),c=()=>o(959013),d=()=>o(741496),u=()=>o(679924);var p=()=>o(778417),g=()=>o(645873);const m=new(g().O2)("topbarMoreMenu",(async()=>await Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,628302)))),h=(0,g()._h)(m,(e=>e.TopbarMoreMenu));var f=()=>o(494043),v=()=>o(448360),b=()=>o(765957),S=()=>o(816013),x=()=>o(318890),y=()=>o(594607),w=()=>o(953006),C=o(474848);function j(e){const{originRef:t}=e,o=(0,s().IS)((e=>({aiTranslateIcon:{height:18,width:18,fill:e.text.uiBluePrimary}})),[]);return(0,C.jsx)(y().U,{calloutId:"ai_page_translation",children:(0,C.jsx)(w().k,{origin:t,placementToOrigin:"bottom",header:(0,C.jsxs)("div",{style:{display:"flex",fontSize:14,gap:12,paddingLeft:4,paddingRight:4},children:[(0,x().K)(o.aiTranslateIcon),(0,C.jsx)(c().sA,{id:"aiPageTranslationTooltip.header",defaultMessage:"You can always find translation in the top right menu"})]}),showPointer:!1,pointerOffset:6,content:null,onCloseClick:()=>{v().W.reset()},style:{width:300},onPrimaryButtonClick:()=>{v().W.reset()},nextButtonContent:(0,C.jsx)(c().sA,{id:"aiPageTranslationTooltip.dismiss",defaultMessage:"Got it"})})})}var P=()=>o(406699),k=()=>o(612900),I=()=>o(782473);function T(e){let{originRef:t}=e;return(0,C.jsx)(y().U,{calloutId:"wiki_promo",children:(0,C.jsx)(w().k,{origin:t,placementToOrigin:"bottom",header:"Upgrade your existing wikis",content:"Look for the Turn into wiki action here",onCloseClick:()=>{S().r.reset()},pointerPosition:"98%",pointerLength:24,pointerOffset:-3,style:{width:I().Sw}})})}function B(e){let{buttonPopupStore:t,store:o,isLastButton:a,renderOrigin:l}=e;const c=(0,n().v3)(),{device:g}=c,[m,x]=(0,i.useState)(void 0),y=(0,i.useRef)(null),w=(0,i.useCallback)((()=>{S().r.reset(),v().W.reset(),p().IU({environment:c});const e=y.current;e&&x(e.getBoundingClientRect()),function(e){(0,u().v)(e,"open_more_menu")}(c)}),[y,c]),I=(0,r().K8)((()=>S().r.state.showConvertTooltip),[]),B=(0,r().O$)(v().W),M=(0,s().IS)((e=>({mobilePopupStyle:{borderRadius:12,backgroundColor:e.surface.wash}})),[]),A=(0,C.jsxs)(C.Fragment,{children:[I?(0,C.jsx)(T,{originRef:y}):B?(0,C.jsx)(j,{originRef:y}):null,(0,C.jsx)(P().Ay,{popupType:g.isMobile?P().z7.BottomSheet:P().z7.Popup,buttonPopupStore:t,renderOrigin:l||(e=>(0,C.jsx)(D,{ref:y,buttonPopupEvents:e,isLastButton:a})),onClick:w,render:()=>(0,C.jsx)(h,{blockStore:o,onClickOriginRect:m,handleAccept:e=>function(e,t,o){const{mainEditorCurrentBlockStore:i}=b().default.state;if(i){const t=i.getType();var n;if(t)(0,d().N)(o,{analyticsName:e.analyticsName,action_type:e.analyticsActionType,from:"topbar_more_menu",block_id:i.id,block_type:t,is_toggleable:(0,f().Yt)(t,i.getFormat()),collection_id:null===(n=i.getCollectionViewSourceCollectionStore())||void 0===n?void 0:n.id,parent_collection_id:i.getParentCollectionIdUpToTwoLevels(),form_id:i.getFirstFormIdInCollectionViewBlock()})}e.closeParentMenu&&_(t)}(e,t,c),handleDismiss:()=>_(t)}),originGap:g.isElectronWindows?12:8,forceInitialInbound:!0,style:g.isMobile?M.mobilePopupStyle:{width:256,maxHeight:"80vh"}})]}),L=(0,r().K8)((()=>b().default.state.inAppCalloutStore.getCalloutVisibility("ai_page_translation").canShow),[]);return B&&L?(0,C.jsx)(k().u,{shape:"square",borderRadius:6,children:A}):A}const M=(0,c().YK)({actions:{defaultMessage:"Actions",id:"topbar.actions"}});function A(e,t,i){const{device:n}=e;if(!n.isMobile){const{iconButton:{width:e,height:i}}=(0,o(863059).Hh)(t);return{display:"flex",alignItems:"center",justifyContent:"center",width:e,height:i,borderRadius:6}}const r=(0,o(978578).aD)(t).iconContainer;return i?{...r,marginLeft:n.isTablet?-6:void 0,marginRight:0}:{...r,marginLeft:n.isTablet?-6:void 0,marginRight:n.isTablet?-6:r.marginRight}}function _(e){e.setState({...e.state,open:!1})}const D=i.forwardRef((function(e,t){let{buttonPopupEvents:i,isLastButton:r}=e;const d=(0,s().DP)(),u=(0,n().v3)(),{device:p}=u,g=(0,c().tz)();return(0,C.jsx)(o(859428).A,{renderTooltip:()=>u.currentUser.isLoggedIn()?(0,C.jsx)(c().sA,{defaultMessage:"Style, export, and more…",id:"topbarMoreButton.tooltip"}):(0,C.jsx)(c().sA,{defaultMessage:"More…",id:"topbarMoreButton.loggedOut.tooltip"}),placement:o(962730).W.Bottom,originGap:p.isElectronWindows?10:void 0,delayThreshold:400,render:e=>(0,C.jsx)(o(704152).A,{ref:t,style:A(u,d,r),className:o(38337).ug9,ariaLabel:g.formatMessage(M.actions),...(0,o(553965).A)(i,e),children:p.isMobile?(0,a().L)({height:l().lD.lg,width:l().lD.lg,fill:d.icon.primary}):(0,a().L)({width:l().Ev.lg,height:l().Ev.lg,fill:d.icon.primary})})})}))},710793:(e,t,o)=>{o.d(t,{O:()=>i});const i={browserPhone:{type:"mobile_browser_phone",supportedPlatforms:["browser"],supportedDeviceTypes:["phone"],position:"relative"},browserPublicPage:{type:"mobile_browser_public_page",supportedPlatforms:["browser"],supportedDeviceTypes:["phone","tablet"],position:"relative"},tablet:{type:"mobile_tablet",supportedPlatforms:["react-native","browser"],supportedDeviceTypes:["tablet"],position:"relative"},legacyPhone:{type:"legacy_mobile_native_phone",supportedPlatforms:["react-native"],supportedDeviceTypes:["phone"],position:"relative"},redesignedExistingPage:{type:"redesigned_mobile_native_phone_existing_page",supportedPlatforms:["react-native"],supportedDeviceTypes:["phone"],position:"absolute"},redesignedNewPage:{type:"redesigned_mobile_native_phone_new_page",supportedPlatforms:["react-native"],supportedDeviceTypes:["phone"],position:"relative"}}},782473:(e,t,o)=>{o.d(t,{Nu:()=>s,Sw:()=>i,gO:()=>n,j$:()=>r});const i=220,n=24,r=-7,s=-3},816013:(e,t,o)=>{o.d(t,{r:()=>i});const i=o(757695).Store.createValue({showConvertTooltip:!1,forceShow:!1},{name:"WikiPromoStore"})},879765:(e,t,o)=>{o.d(t,{$:()=>n});o(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"6.12 3.97 6.66 12.06",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M6.308 9.558a.625.625 0 0 0 0 .884l5.4 5.4a.625.625 0 1 0 .884-.884L7.634 10l4.958-4.958a.625.625 0 1 0-.884-.884z"})},n=(0,o(340498).wt)("arrowChevronSingleLeft",i)},973231:(e,t,o)=>{o.d(t,{$:()=>n});o(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.62 2.52 14.76 14.95",svg:(0,o(474848).jsx)("path",{d:"M8.65 2.525c.345 0 .625.28.625.625v13.7a.625.625 0 1 1-1.25 0V3.15c0-.345.28-.625.625-.625M6.575 5.45a.625.625 0 1 0-1.25 0v9.1a.625.625 0 1 0 1.25 0zm-2.7 3.2a.625.625 0 0 0-1.25 0v2.7a.625.625 0 1 0 1.25 0zm10.8-2.7a.625.625 0 1 0-1.25 0v8.1a.625.625 0 0 0 1.25 0zm2.075 2.075c.345 0 .625.28.625.625v2.7a.625.625 0 1 1-1.25 0v-2.7c0-.345.28-.625.625-.625m-4.775-.775a.625.625 0 1 0-1.25 0v5.5a.625.625 0 1 0 1.25 0z"})},n=(0,o(340498).wt)("waveform",i)},985194:(e,t,o)=>{o.d(t,{L5:()=>$,MobileNativePhoneTopPageControls:()=>Q,RB:()=>X,i3:()=>H});o(898992),o(354520),o(737550);var i=o(296540),n=()=>o(484714),r=()=>o(56366),s=()=>o(401497),a=()=>o(110750),l=()=>o(628182),c=()=>o(49621),d=()=>o(589407),u=()=>o(864896),p=()=>o(959013),g=()=>o(534177),m=()=>o(774733),h=()=>o(369767),f=()=>o(116008),v=()=>o(885962),b=()=>o(112995),S=()=>o(138156),x=()=>o(38337),y=()=>o(79043),w=()=>o(986260),C=()=>o(141333),j=()=>o(645873),P=()=>o(301421),k=()=>o(321172),I=()=>o(765957),T=()=>o(150193),B=()=>o(195613),M=()=>o(285790),A=()=>o(2143),_=()=>o(21140),D=()=>o(194820),L=()=>o(206954),E=()=>o(411813),K=()=>o(978578),W=()=>o(710793),R=()=>o(813402),z=()=>o(705630),N=()=>o(136805),V=()=>o(641136),F=o(474848);const O=A().Z+3,H=A().Z+2,U=A().Z+3,Z=200,Y={gone:{type:"gone",pointerEvents:"none",visibility:"hidden",containerVisibility:"hidden"},safeAreaPaddingOnly:{type:"safe_area_padding_only",pointerEvents:"none",visibility:"hidden",containerVisibility:"visible"},breadcrumb:{type:"breadcrumb",pointerEvents:"auto",visibility:"visible",containerVisibility:"visible"}};function $(e){const t=(0,n().v3)(),{store:o,routerState:c}=e,[d,u]=(0,i.useState)(Y.gone),[p,m]=(0,i.useState)(!1),[h,f]=(0,i.useState)(0),v=(0,i.useRef)(Y.gone),b=(0,i.useRef)(!1);(0,i.useEffect)((()=>{v.current=d}),[d]);const[S,y]=(0,i.useState)({scrollDelta:0,pageTitleVisibility:void 0}),j=(0,r().O$)(t.TabbedRouterStore),k=(0,r().K8)((()=>(0,a().Xz)(j)),[j]),I=(0,r().K8)((()=>o&&o.isDefined()),[o]),T=(0,r().K8)((()=>B().A.state.elementRef??{current:void 0}),[]),M=(0,C().yE)(T),A=i.useRef(0);(0,V().L)(),(0,i.useEffect)((()=>{m(!1),y({scrollDelta:0,pageTitleVisibility:void 0}),A.current=0,u(Y.gone)}),[k]),(0,i.useEffect)((()=>{const e=()=>{m(!0),document.removeEventListener("touchstart",e)};return"web"!==k.type||p||document.addEventListener("touchstart",e),()=>{document.removeEventListener("touchstart",e)}}),[k.type,p]);const _=(0,r().K8)((()=>t.WindowSizeStore.state.paddingTop),[t]),D=(0,r().K8)((()=>(0,w().rV)(t,o,void 0).shouldShow),[t,o]);(0,i.useEffect)((()=>{if(!I||void 0===M)return;const e=function(e,t){const o=e.getTitleStore();if(!o)return;const i=P().n.findEditableWithStore(o),n=null==i?void 0:i.getNode();if(!n)return;const r=n.getBoundingClientRect();return{isVisible:r.bottom>=t||r.top>=t,isTopVisible:r.top>t}}(o,_);if(p&&(0,g().O9)(e)){const t=A?M-A.current:0;A.current=M,y({scrollDelta:t,pageTitleVisibility:e})}else A.current=0,y({scrollDelta:0,pageTitleVisibility:e})}),[k,M,I,o,_,A,p]),(0,i.useEffect)((()=>{const{scrollDelta:e,pageTitleVisibility:t}=S;if(void 0!==t)if(p)if(0!==M){if(D)return b.current="breadcrumb"===v.current.type,void(e<0&&t.isVisible?u(Y.gone):(f(-l().uF),u(Y.safeAreaPaddingOnly)));b.current&&(f(0),u(Y.breadcrumb),b.current=!1),e<0&&Math.abs(e)>=5&&!t.isVisible?(f(0),u(Y.breadcrumb)):e<0&&t.isVisible?(f(0),u(Y.gone)):e>0&&e>=5&&(f(-l().uF),t.isTopVisible?u(Y.gone):u(Y.safeAreaPaddingOnly))}else u(Y.gone);else u(t.isVisible?Y.gone:Y.breadcrumb)}),[I,S,D,M,p]);const L=(0,s().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",width:"100%",minHeight:l().uF,maxWidth:"100%",WebkitUserSelect:"none",cursor:"pointer",overflow:"visible",position:"relative",pointerEvents:d.pointerEvents,opacity:"visible"===d.containerVisibility?1:0,transition:`opacity ${Z}ms ease-in-out`},slideContainer:{width:"100%",position:"relative",backgroundColor:e.surface.page,visibility:"visible",transform:`translateY(${h}px)`,transition:`transform ${Z}ms ease-in-out`,display:"flex",flexDirection:"row",overflow:"visible",alignItems:"center",zIndex:H,height:l().uF,borderBottom:`0.5px solid ${e.stroke.primary}`}})),[d,h]);return I?(0,F.jsxs)("div",{style:L.container,className:x().byw,children:[(0,F.jsx)(G,{environment:t}),(0,F.jsx)("div",{style:L.slideContainer,children:(0,F.jsx)(q,{store:o,isInvalidPage:e.isInvalidPage,spaceStore:e.spaceStore,routerState:c,showPermissionsBanner:e.showPermissionsBanner})})]}):null}function G(e){const{environment:t}=e,o=(0,r().K8)((()=>t.WindowSizeStore.state.paddingTop),[t.WindowSizeStore]),i=(0,s().IS)((e=>({container:{position:"relative",left:0,top:0,backgroundColor:e.surface.page,pointerEvents:"none",width:"100%",zIndex:O}})),[]);return(0,F.jsx)("div",{style:i.container,children:(0,F.jsx)("div",{style:{height:o}})})}function Q(e){const{store:t,isInvalidPage:o}=e,i=(0,n().v3)(),a=(0,r().O$)(I().AppStoreCurrentSpaceStore),c=(0,r().O$)(T().A),d=(0,r().O$)(E().b),u=c.banners,p=(0,r().K8)((()=>Boolean(t.getCover())&&0===u.length),[t,u.length]),g=(0,s().IS)((e=>({container:{position:p?"absolute":"relative",backgroundColor:p?"transparent":e.surface.page,display:"flex",flexDirection:"column",width:"100%",maxWidth:"100%",zIndex:U,pointerEvents:"auto"},topbarStyle:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",maxWidth:"100%",height:l().uF,WebkitUserSelect:"none",cursor:"pointer",pointerEvents:"auto",boxSizing:"border-box"},iconContainer:p?(0,K().aD)(e).redesignedCoverPhotoIconContainer:(0,K().aD)(e).redesignedCircleIconContainer})),[p]),m=(0,r().K8)((()=>({top:i.WindowSizeStore.state.paddingTop,left:i.WindowSizeStore.getSafePaddingLeftPx(16),right:i.WindowSizeStore.getSafePaddingRightPx(16)})),[i.WindowSizeStore]),h=(0,y().A)(!0);return(0,r().K8)((()=>(null==d?void 0:d.topbar)===W().O.redesignedExistingPage),[d])?(0,F.jsxs)("div",{...h,className:x().KDD,style:{...g.container,paddingTop:m.top,pointerEvents:"auto"},children:[(0,F.jsxs)("div",{style:{...g.topbarStyle,paddingLeft:m.left,paddingRight:m.right},children:[(0,F.jsx)(b().K,{from:"TopbarMobile.Left",fallback:e=>{let{error:t,errorId:o}=e;return(0,F.jsx)(S().W,{error:t,errorId:o,iconSize:26})},children:(0,F.jsx)("div",{children:(0,F.jsx)(L().df,{supportsNativeHomeTabPhone:!0,defaultMobileButtonStyle:g.iconContainer})})}),(0,F.jsx)(b().K,{from:"TopbarMobile.Right",fallback:e=>{let{error:t,errorId:o}=e;return(0,F.jsx)(S().W,{error:t,errorId:o,iconSize:26})},children:(0,F.jsx)(X,{store:t,spaceStore:a,isInvalidPage:o,isNewPage:!1,iconContainerStyle:g.iconContainer})})]}),u.length>0?(0,F.jsx)(v().x,{banners:u,isMobile:!0}):void 0]}):null}function q(e){const{store:t,isInvalidPage:o,spaceStore:i,showPermissionsBanner:n}=e,r=(0,s().IS)((e=>({containerStyle:{width:"100%",height:"100%",display:"flex",flexDirection:"column",maxWidth:"100%",backgroundColor:e.surface.page,overflow:"visible"},topbarStyle:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",maxWidth:"100%",paddingLeft:16,paddingRight:16,height:l().uF,backgroundColor:e.surface.page,borderBottom:`0.5px solid ${e.stroke.primary}`,WebkitUserSelect:"none",cursor:"pointer",boxSizing:"border-box",overflow:"visible",position:"relative",zIndex:H},iconContainerStyle:(0,K().aD)(e).redesignedCircleIconContainer})),[]);return(0,F.jsx)("div",{style:r.containerStyle,children:(0,F.jsx)("div",{style:r.topbarStyle,children:(0,F.jsxs)(_().Ye,{alignItems:"center",justifyContent:"space-between",style:{minWidth:0,width:"100%"},children:[(0,F.jsx)(b().K,{from:"TopbarMobile.BackButton",fallback:e=>{let{error:t,errorId:o}=e;return(0,F.jsx)(S().W,{error:t,errorId:o,iconSize:26})},children:(0,F.jsx)(L().df,{supportsNativeHomeTabPhone:!0,defaultMobileButtonStyle:r.iconContainerStyle})}),e.store?(0,F.jsx)(_().Ye,{alignItems:"center",justifyContent:"center",style:{minWidth:0,maxWidth:"100%",flex:1,width:"100%",overflow:"hidden",marginLeft:4,marginRight:8},children:(0,F.jsx)(L().Y9,{store:e.store,isLocked:n})}):void 0,(0,F.jsx)(_().Ye,{alignItems:"center",justifyContent:"flex-end",style:{minWidth:0,flexShrink:0},children:(0,F.jsx)(b().K,{from:"TopbarMobile.Right",fallback:e=>{let{error:t,errorId:o}=e;return(0,F.jsx)(S().W,{error:t,errorId:o,iconSize:26})},children:t?(0,F.jsx)(X,{store:t,spaceStore:i,isInvalidPage:o,isNewPage:!1,iconContainerStyle:r.iconContainerStyle}):void 0})})]})})})}function X(e){let{store:t,spaceStore:o,isInvalidPage:a,isNewPage:l,iconContainerStyle:g}=e;const v=(0,p().tz)(),{value:b}=(0,j().fJ)(m().commentsDependency),S=(0,r().K8)((()=>{if(!b)return!1;const{discussionViewActions:e,discussionHelpers:{getAndSortCommentStoresByTime:o}}=b;return(0,h().getDiscussions)(t).some((t=>!t.getResolved()&&o(t).some((o=>e.isCommentUnread({discussionStore:t,commentStore:o})))))}),[b,t]),x=(0,r().K8)((()=>!!b&&(0,h().getDiscussions)(t).some((e=>!e.getResolved()))),[b,t]),y=(0,r().K8)((()=>Boolean(o&&!o.canEdit())),[o]),w=(0,r().K8)((()=>t.canEdit()),[t]),C=(0,r().K8)((()=>t.isFormBlock()),[t]),P=(0,R().shouldShowTopbarShareMenu)({canEditPage:w,isSpaceGuest:y,isFormBlock:C,isPersonalHomePage:!1,isTranslated:!1}),I=(0,r().K8)((()=>f().A.state.open),[]),T=(0,r().K8)((()=>!l&&(!t.isCollectionView()||t.isCollectionViewPageWithContent())&&!C&&x),[C,l,t,x]),B=!C,A=S||I,E=i.useMemo((()=>[P,T,B].filter(Boolean).length),[P,T,B]),W=(0,s().IS)((e=>({iconStyle:(0,K().aD)(e).redesignedIconStyle,rowContainer:{flexShrink:0,width:E*K().bu+8*(E-1)}})),[E]),V=(0,n().v3)(),O=(0,i.useCallback)((()=>{(0,k().Tk)(V)}),[V]);return a?null:(0,F.jsxs)(_().Ye,{alignItems:"center",gap:8,style:W.rowContainer,children:[P?(0,F.jsx)(M().A,{icon:u().Y,iconStyle:W.iconStyle,ariaLabel:v.formatMessage(N().messages.share),color:"primary",style:g,onClick:O}):void 0,T?(0,F.jsx)(L().m,{hasDiscussions:x,shouldShowCommentsIndicator:A,renderOrigin:(e,t)=>(0,F.jsxs)("div",{style:{position:"relative"},children:[(0,F.jsx)(M().A,{icon:c().h,iconStyle:W.iconStyle,ariaLabel:v.formatMessage(D().messages.comments),color:"primary",style:g,...e}),t?(0,F.jsx)("div",{style:{position:"absolute",top:5,right:5},children:(0,F.jsx)(L().nS,{})}):void 0]})}):void 0,B?(0,F.jsx)(L().gW,{store:t,renderOrigin:e=>(0,F.jsx)("div",{children:(0,F.jsx)(M().A,{icon:d().L,iconStyle:W.iconStyle,ariaLabel:v.formatMessage(z().messages.actions),color:"primary",style:g,...e})})}):void 0]})}}}]);