"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[40136],{59400:(e,t,o)=>{o.d(t,{nR:()=>u,m$:()=>s,m4:()=>l,Dy:()=>c,FZ:()=>p});o(296540);var r=()=>o(645873),n=o(474848);function i(e){const{shouldShowSpinner:t,collectionSettingsProps:r}=e;return(0,n.jsx)(o(735695).Ay,{collectionSettingsStore:r.collectionSettingsStore,fullHeight:r.fullHeight,hideDesktopHeader:r.hideDesktopHeader,children:t&&(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",overflow:"hidden",paddingBottom:20},children:(0,n.jsx)(o(331542).A,{})})})}const a=new(r().O2)("collectionSettings",(()=>Promise.all([o.e(75134),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(75078),o.e(25497),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(30291),o.e(19930),o.e(58102),o.e(26483),o.e(6463),o.e(40925),o.e(282),o.e(61349),o.e(62573),o.e(1440),o.e(63996),o.e(66559),o.e(35986),o.e(92924),o.e(64819),o.e(97339),o.e(55717),o.e(63797),o.e(21367),o.e(22686),o.e(99108)]).then(o.bind(o,409198)))),s=(0,r()._h)(a,(e=>e.CollectionSettings),{renderLoading:(e,t)=>(0,n.jsx)(i,{shouldShowSpinner:e,collectionSettingsProps:t})}),l=(0,r()._h)(a,(e=>e.CollectionSettingsButtonOptions)),c=(0,r()._h)(a,(e=>e.CollectionSettingsPropertyTypeMenuItem)),u=(0,r()._h)(a,(e=>e.CollectionEditButtonAutomationOption)),d=new(r().O2)("TableHeaderPropertyCreationMenu",(()=>Promise.all([o.e(75134),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(75078),o.e(25497),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(61349),o.e(35986),o.e(43935)]).then(o.bind(o,908800)))),p=(0,r()._h)(d,(e=>e.TableHeaderPropertyCreationMenu))},75544:(e,t,o)=>{o.d(t,{A:()=>m});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520);var r=o(296540),n=()=>o(908006),i=()=>o(56366),a=()=>o(564787),s=()=>o(921598),l=()=>o(737658),c=()=>o(336811),u=()=>o(496603),d=()=>o(183558),p=()=>o(346923);function f(e){const{reducerId:t,instanceId:o,reducer:r,collectionContextStore:n,groupsPointer:i}=e,a=n.reducersStore.state,l=a[t];let c,d;if(i&&i.length>0&&(c=(0,s().Hm)(i)),r){if(d={instanceIds:u().sb([...(null==l?void 0:l.instanceIds)||[],o]),reducer:r},c){n.reducerDependencies.has(c)||n.reducerDependencies.set(c,new Set);const e=n.reducerDependencies.get(c);null==e||e.add(t)}}else{if(c){const e=n.reducerDependencies.get(c);e&&(e.delete(t),0===e.size&&n.reducerDependencies.delete(c))}const e=u().FF((null==l?void 0:l.instanceIds)||[],o);d=l&&e.length>0?{instanceIds:e,reducer:l.reducer}:void 0}u().n4(l,d)||n.reducersStore.setState({...a,[t]:d})}function m(e){const{id:t,reducer:o,collectionContextStore:m,groupsPointer:g,debounceWait:S}=e,v=(0,p().l)(g),y=(0,p().l)(o),h=(0,i().K8)((()=>m.collectionViewStore()),[m]),C=(0,i().K8)((()=>m.normalizedFormatStore.state.collection_pointer),[m.normalizedFormatStore]),b=(0,i().K8)((()=>{var e;return null==h||null===(e=h.getFormatStore())||void 0===e?void 0:e.getKeyStore("collection_view_source").getValue()}),[h]),M=(0,r.useRef)(!1),R=(0,c().O)(),[w,x]=(0,r.useReducer)(((e,t)=>u().n4(e,t)?e:t),void 0),k=(0,r.useCallback)((()=>{const e=m.localResultStore.state,o=m.remoteResultStore.state,r=e&&"reducer"===e.type?e.reducerResults[t]:void 0,n=o&&"reducer"===o.type?o.reducerResults[t]:void 0;return function(e){const{reducerId:t,localReducerResult:o,remoteReducerResult:r,collectionContextStore:n,reducer:i}=e,c=n.reducersStore.state,d=n.remoteResultStore.state,p=n.isClientModeEnabledStore.state;if(p)return o;const f=n.isCreatingNewChartCollectionStore.state,m=n.wasCreatedThisSessionStore.state;if("aggregation"===i.type){if(f&&m){return Boolean(r&&"aggregation"===r.type&&"number"===r.aggregationResult.type&&0!==r.aggregationResult.value)&&n.isCreatingNewChartCollectionStore.setState(!1),o}if(r)return r;const e=Boolean(d&&"reducer"===d.type&&u().I6(d.reducerResults,((e,t)=>{const o=c[t];return!!o&&Boolean("results"===o.reducer.type&&!o.reducer.searchQuery&&"results"===e.type&&e.hasMore&&u().n4(i.filter,o.reducer.filter))})));return e?o:r}if("groups"===i.type){if(f&&m){return Boolean(r&&"groups"===r.type&&("v2"===r.version?r.hasMore:0!==r.total))&&n.isCreatingNewChartCollectionStore.setState(!1),o}if("v2"===i.version){if(o&&"groups"!==o.type||o&&"groups"===o.type&&"v2"!==o.version)return;if(r&&"groups"!==r.type||r&&"groups"===r.type&&"v2"!==r.version)return;const e=function(e){var t;const{reducerId:o,reducer:r,collectionContextStore:n,wasCreatedThisSession:i,localReducerResult:c,remoteReducerResult:u}=e;if(!r.blockResults&&!o.includes(s().RO))return u;let d,p;r.aggregation&&(u?d=u.aggregationResults:c&&(d=c.aggregationResults));if(r.blockResults){var f;const e=Boolean(u&&u.blockResults),t=null===(f=n.collectionViewStore())||void 0===f?void 0:f.getCollectionSource(),o=(0,l().TR)(t)||(0,l().hJ)(t);if((e||i)&&!o&&c&&c.blockResults){const e=c.blockResults,t=(null==u?void 0:u.blockResults)??{},o=new Set([...Object.keys(e),...Object.keys(t)]),r={};for(const n of o){const o=e[n],i=t[n];let a=[];o?a=o.blockIds:i&&(a=i.blockIds);let s=!1;i?s=i.hasMore:o&&(s=o.hasMore),r[n]={blockIds:a,hasMore:s}}p=r}p||(p=n.forceLocalQueryCollection?null==u?void 0:u.blockResults:null==c?void 0:c.blockResults)}let m;c&&c.pinnedResults&&(m=c.pinnedResults);u&&u.pinnedResults&&(m={groupResults:u.pinnedResults.groupResults,...m,aggregationResults:u.pinnedResults.aggregationResults});const g=u?u.hasMore:Boolean(null==c?void 0:c.hasMore),S=u?u.hasMoreSubGroups:null==c?void 0:c.hasMoreSubGroups;let v=(null==c?void 0:c.results)??(null==u?void 0:u.results)??[],y=(null==c?void 0:c.subGroupResults)??(null==u?void 0:u.subGroupResults);const h=r.groupBy;u&&("relation"===h.type||"formula"===h.type&&"relation"===h.groupBy.type)&&(v=u.results);u&&function(e){var t,o,r,n;const i=null===(t=e.collectionViewStore())||void 0===t?void 0:t.getType();if(i&&!["timeline","table","list"].includes(i))return!1;const s=(0,a().S)(null===(o=e.collectionStore())||void 0===o?void 0:o.getFormat(),null===(r=e.collectionViewStore())||void 0===r?void 0:r.getFormat(),e.normalizedSchemaStore.state,(null===(n=e.collectionStore())||void 0===n?void 0:n.id)??"");return"show"===s}(n)&&(v=u.results);const C=null===(t=r.subGroup)||void 0===t?void 0:t.groupBy;u&&("relation"===(null==C?void 0:C.type)||"formula"===(null==C?void 0:C.type)&&"relation"===C.groupBy.type)&&(y=u.subGroupResults);n.forceLocalQueryCollection&&(v=(null==u?void 0:u.results)??(null==c?void 0:c.results)??[],y=(null==u?void 0:u.subGroupResults)??(null==c?void 0:c.subGroupResults));return{type:"groups",version:"v2",results:v,subGroupResults:y,pinnedResults:m,hasMore:g,hasMoreSubGroups:S,blockResults:p,aggregationResults:d}}({reducerId:t,collectionContextStore:n,reducer:i,wasCreatedThisSession:m,localReducerResult:o,remoteReducerResult:r});return e}return r||o}if("results"===i.type){var g;const e=n.wasCreatedThisSessionStore.state,i=Boolean(d&&"reducer"===d.type&&d.reducerResults[t]),a=null===(g=n.collectionViewStore())||void 0===g?void 0:g.getCollectionSource(),s=(0,l().TR)(a)||(0,l().hJ)(a);if((i||e)&&!s&&o&&"results"===o.type){return{...o,hasMore:r&&"results"===r.type?r.hasMore:o.hasMore}}return r}}({reducerId:t,collectionContextStore:m,reducer:y,localReducerResult:r,remoteReducerResult:n})}),[m,y,t]),_=(0,r.useCallback)((()=>{M.current=!1,R.current||x(k())}),[k,R]),P=(0,r.useCallback)((()=>{M.current||(M.current=!0,n().default.afterNextFlush(_))}),[_]),[O]=(0,r.useState)((()=>(0,d().Ay)()));return(0,r.useEffect)((()=>{const e=S?(0,u().sg)(P,S,{leading:!0}):P;return m.remoteResultStore.addListener(P),m.localResultStore.addListener(e),()=>{m.remoteResultStore.removeListener(P),m.localResultStore.removeListener(e)}}),[m,P,S]),(0,r.useEffect)((()=>(f({reducerId:t,instanceId:O,reducer:y,collectionContextStore:m,groupsPointer:v}),()=>{f({reducerId:t,instanceId:O,reducer:void 0,collectionContextStore:m,groupsPointer:v})})),[m,h,C,b,v,y,t,O]),(0,r.useEffect)((()=>{P()}),[]),(0,r.useEffect)((()=>(m.timingTracker.mountCollectionReducerRequest(t,y.type),()=>{m.timingTracker.unmountCollectionReducerRequest(t)})),[m,t,y]),w}},101981:(e,t,o)=>{o.d(t,{A:()=>s});var r=o(296540),n=()=>o(56366),i=o(474848);function a(e){const{resultStore:t,render:a,...s}=e,l=(0,o(75544).A)(s),c=(0,n().uB)(t,o(757695).Store.createClass(void 0));(0,r.useEffect)((()=>{c.setState(l);const t=e.reducer;"groups"===t.type&&"v2"===t.version&&"groups"===(null==l?void 0:l.type)&&"v2"===l.version&&e.collectionContextStore.groupsStore.setGroupBlockResults(t,l)}),[e.collectionContextStore.groupsStore,e.reducer,l,c]);const u=(0,n().K8)((()=>a?a(c):null),[a,c]);return(0,i.jsx)(i.Fragment,{children:u})}const s=r.memo(a)},274652:(e,t,o)=>{o.d(t,{o:()=>i});var r=o(296540),n=o(474848);const i=r.forwardRef((function(e,t){let{color:r="primary",...i}=e;const a=(0,o(401497).IS)((e=>{const t="blue"===r?o(381349).Ay.blue:"secondary"===r?e.text.secondary:e.text.primary;return{title:{color:t,fill:t},buttonMenuItem:{...i.style,...i.disabled?{cursor:"not-allowed"}:{}}}}),[i.disabled,r,i.style]);return(0,n.jsx)(o(760217).A,{ref:t,...i,title:(0,n.jsx)("div",{style:a.title,children:i.title}),icon:(0,n.jsx)(o(8980).I,{icon:o(617668).plusIcon,style:{fill:r}}),style:a.buttonMenuItem})}))},319357:(e,t,o)=>{o.d(t,{O:()=>c});var r=o(296540),n=()=>o(484714),i=()=>o(430923),a=()=>o(406699),s=()=>o(962730),l=o(474848);function c(e){const{collectionContextStore:t,groupFormat:o,renderLinkButton:c,onAddOrLink:u,...d}=e,p=(0,n().Y0)(),f=(0,r.useCallback)((e=>(0,l.jsx)(i().l7,{collectionContextStore:t,groupFormat:o,onClose:()=>e.close(),onAddOrLink:u})),[t,o,u]);return(0,l.jsx)(a().Ay,{popupType:p.isMobile?a().z7.BottomSheet:a().z7.Popup,alignmentToOrigin:s().C.Start,disableFlippingPlacement:!0,...d,renderOrigin:c,render:f})}},320865:(e,t,o)=>{o.d(t,{A:()=>n});o(296540);var r=o(474848);const n=function(){return(0,r.jsx)(o(678553).Ay,{title:(0,r.jsx)(o(331542).A,{})})}},338931:(e,t,o)=>{o.d(t,{Gj:()=>l,RN:()=>f,_X:()=>m,vZ:()=>c,xy:()=>S});o(944114),o(898992),o(823215),o(354520),o(672577);var r=()=>o(244641),n=()=>o(861017),i=()=>o(179034),a=()=>o(780054),s=()=>o(148832);function l(e){const t=r().c9.fromMillis(e.startUnixTimestampMS),o=e.endUnixTimestampMS?r().c9.fromMillis(e.endUnixTimestampMS):void 0,n=r().c9.fromMillis(e.startOfWeekUnixTimestampMS),i=r().c9.fromMillis(e.endOfWeekUnixTimestampMS),a=t.startOf("day"),s=r().c9.max(n,a),l=Math.ceil(s.diff(n,"days").get("days"));let c=1;if(o){const e=o.endOf("day"),t=r().c9.min(i,e);c=Math.ceil(t.diff(s,"days").get("days"))}return{start:t,end:o,startOfWeek:n,endOfWeek:i,startColumn:l,columnCount:c}}function c(e){const t=(e.attendees||[]).filter((e=>!e.self&&!e.resource));return e.hasParticipants&&t.length>0&&t.every((e=>"declined"===e.responseStatus))}const u={upcomingMinsThreshold:10,startingMinsThreshold:5,startedMinsThreshold:15},d={upcomingMinsThreshold:10,startingMinsThreshold:5,startedMinsThreshold:5};function p(e){const{events:t,thresholds:o=u,filters:n}=e,i=t.filter((e=>{var t;if(!e.conferencing)return!1;return!function(e){if("declined"===e)return!0;return!1}((null===(t=e.attendees)||void 0===t?void 0:t.find((e=>e.self)))?e.responseStatus??"accepted":"accepted")&&!e.isAllDay}));if(0===i.length)return[];const{upcomingMinsThreshold:a,startingMinsThreshold:s,startedMinsThreshold:l}=o,c=[],d=[],p=[],f=[],m=[];for(const u of i){if(u.isAllDay)continue;const e=g(u),t=r().c9.now(),o=e.start.diff(t,"minutes").minutes;if(o>=0&&o<=a)c.push(u);else if(o<0){const r=-o;r>0&&r<=s?p.push(u):r>s&&r<=l?f.push(u):e.contains(t)&&d.push(u)}else m.push(u)}d.sort(((e,t)=>{const o=r().c9.fromISO(e.start.dateTime,{zone:e.start.timeZone});return r().c9.fromISO(t.start.dateTime,{zone:t.start.timeZone}).diff(o).toMillis()}));return[...c,...p,...f,...null!=n&&n.excludeInProgressEvents?[]:d,...null!=n&&n.excludeUpcomingLaterEvents?[]:m]}function f(e){return p({events:e,thresholds:u,filters:void 0})[0]}function m(e){return p({events:e,thresholds:d,filters:{excludeUpcomingLaterEvents:!0}})[0]}function g(e){const t=r().c9.fromISO(e.start.dateTime,{zone:e.start.timeZone}),o=r().c9.fromISO(e.end.dateTime,{zone:e.end.timeZone});return r().IX.fromDateTimes(t,o)}function S(e){const{environment:t,currentSpaceStore:o}=e;let r=e.fileUrl;if(!o)return;const l=(0,n().parseRoute)({url:r,isMobile:t.device.isMobile,baseUrl:a().A.domainBaseUrl,publicDomainName:a().A.publicDomainName,protocol:a().A.protocol,currentUrl:window.location.href}),c="page"===l.name?l.blockId:void 0;if(!c)return;const u=s().B.createChildStore(o,{table:i().ev,id:c});return u.load(),u}},380048:(e,t,o)=>{o.d(t,{I:()=>n});o(296540);var r=o(474848);const n=(0,o(340498).wt)("chevronLeft",{viewBox:"0 0 16 16",directional:!0,svg:(0,r.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},430923:(e,t,o)=>{o.d(t,{DV:()=>l,W5:()=>a,l7:()=>s,y7:()=>i});var r=()=>o(645873);const n={CollectionNewViewsPopupComponent:new(r().O2)("CollectionNewViewsPopupComponent",(async()=>await Promise.all([o.e(75134),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(75078),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(90978),o.e(77213),o.e(61349),o.e(62620)]).then(o.bind(o,93709)))),CollectionViewSelect:new(r().O2)("CollectionViewSelect",(async()=>await Promise.all([o.e(35684),o.e(35756)]).then(o.bind(o,445689)))),CollectionLinkExistingModal:new(r().O2)("CollectionLinkExistingModal",(async()=>await Promise.all([o.e(75134),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(75078),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(90978),o.e(77213),o.e(5287)]).then(o.bind(o,901226)))),ModalOverlayCollectionView:new(r().O2)("ModalOverlayCollectionView",(async()=>await Promise.all([o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95541),o.e(93568),o.e(32413)]).then(o.bind(o,700868))))},i=(0,r()._h)(n.CollectionNewViewsPopupComponent,(e=>e.CollectionNewViewsPopupComponent)),a=(0,r()._h)(n.CollectionViewSelect,(e=>e.CollectionViewSelect)),s=(0,r()._h)(n.CollectionLinkExistingModal,(e=>e.CollectionLinkExistingModal)),l=(0,r()._h)(n.ModalOverlayCollectionView,(e=>e.ModalOverlayCollectionView))},458366:(e,t,o)=>{o.d(t,{B2:()=>O,F1:()=>w,Kc:()=>M,NN:()=>P,UY:()=>b,br:()=>_,lA:()=>x,lh:()=>R,pi:()=>y,w_:()=>C,zP:()=>h});o(898992),o(737550);var r=()=>o(584262),n=()=>o(443239),i=()=>o(970013),a=()=>o(713998),s=()=>o(882262),l=()=>o(415566),c=()=>o(177256),u=()=>o(72135),d=()=>o(919709),p=()=>o(496603),f=()=>o(534177),m=()=>o(939768),g=()=>o(720665),S=()=>o(492414),v=()=>o(972435);function y(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function h(e){switch(e){case"table":return"table";case"board":return"board";case"list":return"list";case"gallery":return"gallery";case"feed":return"feed";case"relation":case"relation_section":return"relation_section";case"timeline":return"timeline";case"calendar":return"calendar";case"page":return"page_properties";case"compact_page":return"compact_page";case"mini":return"mini_peek";case"form_editor":case"form_viewer":case"property_module":return"property_module";default:(0,f().HB)(e)}}function C(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function b(e){const{store:t,property:o,propertySchema:n}=e,i=null==n?void 0:n.type;if("title"===i)return(0,S().Ay)({store:t,fullyQualified:!1,pageVisitSource:r().y8.LinkInPage});{const e=t.getPropertyValue(o);return a().UY(i,e)}}function M(e){let t=(0,d().k4p)(e);if(!t||""===t.trim()||t.trim().includes(" "))return{domain:void 0,restOfUrl:void 0};t=t.trim();let o=m().qg(t),r=o.host;if(o.protocol&&r||(o=m().qg(`http://${t}`),r=o.host),!r)return{domain:void 0,restOfUrl:void 0};r&&(r=r.replace(/^www./i,""));const n=t.toLowerCase().indexOf(r.toLowerCase());if(-1===n)return{domain:void 0,restOfUrl:void 0};r=t.slice(n,n+r.length);return{domain:r,restOfUrl:t.slice(n+r.length)}}function R(e){const{numberValue:t,numberFormat:o,numberShowAs:r}=e;if(!(p().yr(t)||g().pN(t)||"bar"!==(null==r?void 0:r.type)&&"ring"!==(null==r?void 0:r.type))){const e=v().A.getIntl();return"percent"===o?u().ZV(t,"percent",e):`${t} / ${r.maxValue}`}}function w(e){const{property:t,collectionStore:o}=e,r=o.isSyncedCollection();return Boolean(r)&&(0,n().u)(t)}function x(e,t){switch(e){case"side_peek":return{icon:c().A,tooltip:v().A.formatMessage(k.openInSidePeekTooltip),caption:t?"":v().A.formatMessage(k.openAsPageTitle)};case"center_peek":return{icon:l().q,tooltip:v().A.formatMessage(k.openInCenterPeekTooltip),caption:t?"":v().A.formatMessage(k.openAsPageTitle)};case"full_page":return{icon:s().m,tooltip:v().A.formatMessage(k.openAsPageTooltip),caption:t?"":v().A.formatMessage(k.openAsPageTitle)};default:(0,f().HB)(e)}}const k=(0,o(959013).YK)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function _(e){const{store:t,additionalStores:o,collectionContextStore:r}=e,n=t.getAssociatedCollectionStore();return!("collectionTypedView"!==(null==r?void 0:r.contextType)||!n)&&o.some((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==n.id}))}function P(e){return"form_editor"===e||"form_viewer"===e}function O(e){return Boolean(e&&!i().dA.includes(e.type))}},465364:(e,t,o)=>{o.d(t,{$N:()=>T,D5:()=>A,GB:()=>_,M9:()=>x,Pt:()=>O,eW:()=>P,jo:()=>V,v7:()=>k});o(944114),o(898992),o(803949),o(581454);var r=()=>o(244641),n=()=>o(787626),i=()=>o(713998),a=()=>o(597777),s=()=>o(604995),l=()=>o(416504),c=()=>o(519831),u=()=>o(496603),d=()=>o(534177),p=()=>o(299709),f=()=>o(317001),m=()=>o(520861),g=()=>o(878060),S=()=>o(44729),v=()=>o(246826),y=()=>o(319975),h=()=>o(519839),C=()=>o(695625),b=()=>o(397248),M=()=>o(217429),R=()=>o(630116),w=()=>o(747671);function x(e){const{environment:t,droppedStores:o,duplicate:i,calendarBy:u,transaction:d,collectionContextStore:g,duplicateActions:v}=e,y=r().c9.fromMillis(e.startOfDay);let C=!0;for(const r of o){const t=e.collectionStore?e.collectionStore:(0,h().Dj)({store:r,collectionContextStore:g});if(r.getParentTable()===c().Vl||!t){C=!1;break}S().X$({childStore:r,parentStore:t,transaction:d})||(C=!1)}const b=(0,m().T)({environment:t,droppedStores:o,duplicate:i,transaction:d,collectionStore:e.collectionStore,duplicateActions:v});for(const r of b){const o=e.collectionStore?e.collectionStore:(0,h().Dj)({store:r,collectionContextStore:g});if(!o)continue;const i=o.getMappedProperty(u),c=r.getPropertyStore(i),m=(0,n().b)(c.getValue())||s().Ec((0,l().P)()),S=s().kW(m,(0,l().P)()),v=y.toFormat(s().tr);let b;if("date"===S.type||"datetime"===S.type)b={...S,start_date:v};else{const e=s().AA(S,(0,l().P)());if(!e.end)return;const t={...S,start_date:v},o=s().AA(t,(0,l().P)()).start.diff(e.start,"days"),r=e.end.plus(o).toFormat(s().tr);b={...S,start_date:v,end_date:r}}const M=s().kW(b,a().$K(m)||(0,l().P)());(0,f().j)({environment:t,store:r,collectionStore:o,collectionContextStore:g,shouldCoerce:!0,groupsPointer:[],transaction:d,alreadyMovedToCollection:C}),A({environment:t,type:"dateValue",propertyId:i,store:r,transaction:d,dateValue:M}),(0,p().E)({environment:t,collectionContextStore:g,block_id:r.id,property:i,property_type:"date",from:"calendar"})}}function k(e){const{calendarStore:t,direction:o,targetStore:r}=e;t.setState({...t.state,isDragging:!0,targetStore:r,direction:o,temporaryValue:void 0})}function _(e){const{calendarStore:t,x:o,y:i,calendarBy:c}=e,d=t.state;if(d.isDragging){const e=(0,n().b)(d.targetStore.getPropertyStore(c).getValue());if(!e)return;const p=s().kW(e,(0,l().P)()),f=d.temporaryValue||e,m=s().kW(f,(0,l().P)()),g=[];d.dayStoreMap.forEach(((e,t)=>{g.push({store:e,timestamp:t})}));const S=g.find((e=>{let{store:t}=e;const r=C().T.getRectFromStore(t);return Boolean(r&&b().ux(r,o,i))}));let v;if(S){const e=r().c9.fromMillis(S.timestamp),t=e.endOf("day"),o=e.toFormat(s().tr);if(p){const n=s().AA(p,(0,l().P)());if(d.direction===w().Q.Left)if(r().IX.fromDateTimes(e,t).contains(n.start))v=p;else{let e;e="datetimerange"===p.type||"daterange"===p.type?{...p,start_date:o,end_date:p.end_date}:"datetime"===p.type?{type:"datetimerange",start_date:o,start_time:p.start_time,end_date:p.start_date,end_time:p.start_time,time_zone:p.time_zone,reminder:p.reminder}:{type:"daterange",start_date:o,end_date:p.start_date,reminder:p.reminder};const t=s().AA(e,(0,l().P)());v=!n.end&&t.start>n.start||n.end&&t.start>n.end?m:e}else if(n.end?r().IX.fromDateTimes(e,t).contains(n.end):r().IX.fromDateTimes(e,t).contains(n.start))v=p;else{let e;e="date"===p.type?{...p,type:"daterange",end_date:o}:"datetime"===p.type?{...p,type:"datetimerange",end_date:o,end_time:"00:00"}:{...p,end_date:o};const t=s().AA(e,(0,l().P)());v=t.end&&t.end<t.start?m:e}}}if(v&&!u().n4(m,v)){const e=s().kW(v,a().$K(f)||(0,l().P)());t.setState({...d,temporaryValue:e})}}}function P(e){const{environment:t,calendarStore:o,calendarBy:r,transaction:n}=e,i=o.state;i.isDragging&&i.temporaryValue&&(A({type:"dateValue",environment:t,dateValue:i.temporaryValue,propertyId:r,store:i.targetStore,transaction:n}),o.setState({...o.state,isDragging:!1}))}function O(e){const{calendarStore:t}=e,o=t.state;o.isDragging&&t.setState({...o,isDragging:!1})}function T(e){const{environment:t,store:o,collectionStore:n,collectionContextStore:a,startDayOfWeek:c,transaction:u}=e,d=a.dateRangeStartStore.state,p=(0,l().P)(),m=a.normalizedQueryStore.state;if(!m||!m.calendar_by)return;const g=(null==n?void 0:n.getMappedProperty(m.calendar_by))??m.calendar_by,S=s().hp(d,c,p),y=S.startOf("month"),h=S.endOf("month"),C=r().c9.now().startOf("day");let b;return b=r().IX.fromDateTimes(y,h).contains(C)?s().p6(C.valueOf(),p):s().p6(s().iB(d,c,p).valueOf(),p),v().zv({store:o.getPropertiesStore(),data:{[g]:i().m5(b)},transaction:u}),(0,f().j)({environment:t,store:o,collectionStore:n,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:u}),o}function A(e){const{environment:t,store:o,propertyId:r,transaction:n}=e;let a;"timestamp"===e.type?a=s().p6(e.timestampMs.valueOf(),(0,l().P)()):"dateValue"===e.type?a=e.dateValue:(0,d().HB)(e);const c=o.getPropertyValue(r);if(a&&function(e){const{propertyId:t,oldDateValue:o,newPersistedDate:r,store:n}=e;if(o||!r||void 0!==r.reminder)return!1;if(!M().default.checkGate({gateName:"adoption_reminder_collection_default"}))return!1;const i=I(t,n);if(void 0===i)return!1;return!0}({propertyId:r,oldDateValue:c,newPersistedDate:a,store:o})){const e=I(r,o);void 0!==e&&(a={...a,reminder:e})}const u=i().m5(a);v().zv({store:o.getPropertiesStore(),data:{[r]:u},transaction:n}),g().O({environment:t,store:o,dateProperty:{id:r,oldValue:c,newValue:u}})}function I(e,t){const o=t.getAssociatedCollectionStore();if(!o)return;const r=o.getSchema();if(!r)return;const n=r[e];return n&&"date"===n.type?n.default_reminder:void 0}function V(e){const{environment:t,collectionStore:o,calendarBy:r,store:n,insertStores:i,collectionContextStore:a,transaction:s}=e,l=n.getPropertyStore(r).getValue();for(const c of i)(0,f().j)({environment:t,store:c,collectionStore:o,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:s}),y().R9({environment:t,store:c.getPropertyStore(r),value:l,transaction:s});return i.map((e=>R().Bv.createChildStore(o,e.pointer)))}},520861:(e,t,o)=>{o.d(t,{T:()=>n});o(944114),o(898992),o(908872);var r=()=>o(415651);function n(e){const{environment:t,collectionStore:o,duplicate:n,droppedStores:i,transaction:a,duplicateActions:s}=e,{movedStores:l,reparentedStores:c}=i.reduce(((e,t)=>(n||t.getAssociatedCollectionId()!==(null==o?void 0:o.id)?e.reparentedStores.push(t):e.movedStores.push(t),e)),{movedStores:[],reparentedStores:[]});return[...l,...r().MS({environment:t,droppedStores:c,duplicate:n,transaction:a,resolveTemplateVariables:!1,duplicateActions:s})]}},742117:(e,t,o)=>{o.d(t,{V:()=>n});o(296540);var r=o(474848);const n=(0,o(340498).wt)("chevronRight",{viewBox:"0 0 16 16",directional:!0,svg:(0,r.jsx)("path",{d:"M12.375 8.06445C12.375 7.83203 12.2861 7.63379 12.1084 7.45605L6.77637 2.24023C6.62598 2.08984 6.44141 2.01465 6.22266 2.01465C5.77832 2.01465 5.42285 2.35645 5.42285 2.80078C5.42285 3.01953 5.51172 3.21777 5.66211 3.375L10.4746 8.06445L5.66211 12.7539C5.51855 12.9043 5.42285 13.1025 5.42285 13.3213C5.42285 13.7725 5.77832 14.1143 6.22266 14.1143C6.44141 14.1143 6.62598 14.0391 6.77637 13.8887L12.1084 8.67285C12.293 8.49512 12.375 8.29688 12.375 8.06445Z"})})},747671:(e,t,o)=>{o.d(t,{Q:()=>r,a:()=>n});let r=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});class n extends(()=>o(757695))().Store{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}}},833880:(e,t,o)=>{o.d(t,{S4:()=>h,Sn:()=>S,j2:()=>g,kc:()=>m,oq:()=>y});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949),o(581454);var r=()=>o(244641),n=()=>o(410486),i=()=>o(597777),a=()=>o(604995),s=()=>o(416504),l=()=>o(792071),c=()=>o(496603),u=()=>o(186445),d=()=>o(338931),p=()=>o(909470),f=()=>o(217429);(0,o(959013).YK)({week:{defaultMessage:"Week",id:"calendar.viewRanges.week"},month:{defaultMessage:"Month",id:"calendar.viewRanges.month"}});function m(e){return!1===e.isDragging}function g(e){const{collectionContextStore:t}=e,o=t.collectionViewStore();if(!o)return;const r=t.normalizedSchemaStore.state,n=o.getQuery(r);if(!n||!n.calendar_by)return;const i=t.dateRangeStartStore.state,l=t.dateRangeEndStore.state,c=(0,a().p6)(i,(0,s().P)()),u=(0,a().p6)(l,(0,s().P)());return v({calendarBy:n.calendar_by,dateRangeStartDate:c,dateRangeEndDate:u})}function S(e){const{collectionContextStore:t,startOfDay:o}=e,n=t.collectionViewStore();if(!n)return;const i=t.normalizedSchemaStore.state,l=n.getQuery(i);if(!l||!l.calendar_by)return;const c=r().c9.fromMillis(o).endOf("day").valueOf(),u=(0,a().p6)(o,(0,s().P)()),d=(0,a().p6)(c,(0,s().P)());return v({calendarBy:l.calendar_by,dateRangeStartDate:u,dateRangeEndDate:d})}function v(e){const{dateRangeStartDate:t,dateRangeEndDate:o,calendarBy:r}=e;return{type:"results",filter:{operator:"and",filters:[{property:r,filter:{operator:"date_is_on_or_after",use_end:!0,value:{type:"exact",value:t}}},{property:r,filter:{operator:"date_is_on_or_before",value:{type:"exact",value:o}}}]},limit:5e3}}function y(e){var t;const{collectionContextStore:o,results:r,getRecordValue:n,intl:l,formulasModule:p}=e,f=o.collectionViewStore(),m=o.normalizedQueryStore.state,g=o.normalizedSchemaStore.state,S=m?m.calendar_by:void 0,v=o.dateRangeStartStore.state,y=o.dateRangeEndStore.state,b=(null===(t=o.collectionViewStore())||void 0===t?void 0:t.getFormat().calendar_show_weekends)??!0,M=u().XX.state,R=(0,s().P)(),w=o.getCurrentUserId();if(!(f&&m&&S&&g))return;const x=new Map,k=new Map,_=new Map,P=c().oE(r.map((e=>h({blockStore:e,calendarBy:S,schema:g,getRecordValue:n,userId:w,intl:l,resultCache:x,regExpCache:k,formatDateCache:_,formulasModule:p})))),O={};r.forEach(((e,t)=>{O[e.id]=t}));0===(m.sort||[]).length&&P.sort(((e,t)=>{const o=e.start.valueOf(),r=t.start.valueOf();if(o===r){return O[e.id]-O[t.id]}return o-r}));const T=b?(0,a().iB)(v,M,R):(0,a().J0)(v,M,R),A=b?(0,a().hp)(y,M,R):(0,a().EK)(y,M,R);let I=T;const V=[];do{const e=b?(0,a().hp)(I.valueOf(),M,R):(0,a().EK)(I.valueOf(),M,R),t={},o=P.filter((t=>(0,i().m6)(I.valueOf(),e.valueOf(),t.start.valueOf(),t.end?t.end.valueOf():void 0))).map((o=>{const{id:r,start:n,end:i,includeTime:a,timeZone:s}=o,{startColumn:l,columnCount:c}=(0,d().Gj)({startUnixTimestampMS:n.valueOf(),endUnixTimestampMS:i?i.valueOf():void 0,startOfWeekUnixTimestampMS:I.valueOf(),endOfWeekUnixTimestampMS:e.valueOf()}),u=C(l,c,t);return{id:r,start:n.valueOf(),end:i?i.valueOf():void 0,row:u,includeTime:a,timeZone:s}}));V.push({start:I.valueOf(),end:e.valueOf(),items:o}),I=b?(0,a().iB)(I.plus({week:1}).plus({hour:25}).valueOf(),M,R):(0,a().J0)(I.plus({week:1}).plus({hour:25}).valueOf(),M,R)}while(I<A);return V}function h(e){const{blockStore:t,calendarBy:o,schema:r,getRecordValue:i,intl:c,userId:u,resultCache:d,regExpCache:m,formatDateCache:g,formulasModule:S}=e,v=t.getAssociatedCollectionStore(),y=t.getModel();if(!y)return;const h=(0,n().d2)({property:o,schema:r,block:y,getRecordModel:l().b4_.fromGetRecordValueFn(i),propertyMapping:null==v?void 0:v.getPropertyMapping(),collectionRequestContext:{userId:u,userTimeZone:(0,s().P)(),depth:0,intl:c,visitedProperties:new Set,resultCache:d,regExpCache:m,formatDateCache:g,experimentService:f().default,collectionFeatureGates:(0,p().i)()},formulasModule:S}).next().value;if("date"!==(null==h?void 0:h.type))return;const C=h.value;if(!C)return;const b=(0,a().AA)(C,(0,s().P)());if(!b)return;return{id:y.id,start:b.start,end:b.end,includeTime:"datetime"===C.type||"datetimerange"===C.type,timeZone:"datetime"===C.type||"datetimerange"===C.type?C.time_zone:void 0}}function C(e,t,o){let r=0;for(;;){let n=!1;for(let i=0;i<t;i++)b(o,e+i,r)&&(n=!0);if(!n)break;r++}for(let n=0;n<t;n++)M(o,e+n,r);return r}function b(e,t,o){return Boolean(e[o]&&e[o][t])}function M(e,t,o){e[o]||(e[o]={}),e[o][t]=!0}},860118:(e,t,o)=>{o.d(t,{T:()=>n});var r=()=>o(713998);function n(e){const{block:t,property:o,schema:n,getRecordModel:i,userId:a,userTimeZone:s,intl:l,experimentService:c,collectionFeatureGates:u,formulasModule:d}=e;if(!t)return!1;if("title"===o)return!1;const p=n[o];return!(!p||"checkbox"!==p.type)||(!(!p||"button"!==p.type)||(!(!p||"status"!==p.type)||!r().r8({property:o,schema:n,block:t,getRecordModel:i,userId:a,userTimeZone:s,intl:l,experimentService:c,collectionFeatureGates:u,formulasModule:d})))}},882262:(e,t,o)=>{o.d(t,{m:()=>n});o(296540);const r={viewBox:"0 0 20 20",fittedViewBox:"3.23 3.23 13.54 13.53",svg:(0,o(474848).jsx)("path",{d:"M4.485 8.86V5.369l4.073 4.073a.625.625 0 0 0 .884-.884L5.369 4.485h3.49a.625.625 0 1 0 0-1.25h-5a.625.625 0 0 0-.624.625v5a.625.625 0 0 0 1.25 0m10.146 6.655-4.07-4.07a.625.625 0 0 1 .884-.884l4.07 4.07V11.14a.625.625 0 1 1 1.25 0v5c0 .345-.28.625-.625.625h-5a.625.625 0 1 1 0-1.25z"})},n=(0,o(340498).wt)("arrowExpandDiagonal",r)}}]);