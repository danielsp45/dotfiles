"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[66073],{619418:(e,t,a)=>{a.d(t,{Y:()=>d});a(581454),a(296540);var i=()=>a(484714),l=()=>a(401497),r=()=>a(534177),n=()=>a(493823),s=()=>a(554509),o=()=>a(864943),c=()=>a(204063),u=a(474848);function d(e){let{icon:t,title:a,subTitle:r,body:n,actions:o,width:c,style:d}=e;const m=(0,i().Y0)(),x=function(e){let{width:t=406,style:a={}}=e;return(0,l().IS)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",width:t,padding:"20px",gap:"24px",...a},header:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"8px"},headerPadding:{paddingTop:"16px"},actions:{display:"flex",flexDirection:"column",gap:"6px",width:"100%"}})),[t,a])}({width:c,style:d});return(0,u.jsxs)("div",{style:x.container,children:[(0,u.jsxs)(s().D,{styleName:m.isMobile?"UITitle-26px/Bold":"Heading-17px/Medium",style:{...x.header,...!t&&x.headerPadding},children:[t,a,r?(0,u.jsx)(s().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:r}):null]}),n,(0,u.jsx)("div",{style:x.actions,children:null==o?void 0:o.map(((e,t)=>(0,u.jsx)(p,{...e},`marketplace-modal-action-${t}`)))})]})}function p(e){const t=(0,i().Y0)(),a=function(){const e=(0,i().Y0)();return(0,l().IS)((t=>({mobileButton:e.isMobile?{height:48,borderRadius:12}:{},plainButton:{justifyContent:"center"},actionError:{textAlign:"center"}})),[e.isMobile])}();return(0,u.jsxs)(u.Fragment,{children:[(()=>{switch(e.type){case"primary":return(0,u.jsx)(c().A,{size:"lg",onClick:e.onClick,disabled:e.isDisabled,isLoading:e.isLoading,color:t.isMobile?"black":"uiBlue",style:a.mobileButton,children:(0,u.jsx)(s().D,{styleName:t.isMobile?"Heading-17px/Medium":"UIRegular-14px/Medium",children:e.text})});case"outline":return(0,u.jsx)(o().A,{size:"lg",onClick:e.onClick,style:a.mobileButton,children:(0,u.jsx)(s().D,{styleName:t.isMobile?"Heading-17px/Medium":"UIRegular-14px/Medium",children:e.text})});case"plain":return(0,u.jsx)(n().p,{size:"lg",onClick:e.onClick,isBlue:e.isBlue,isGray:!e.isBlue,style:{...a.plainButton,...a.mobileButton},children:(0,u.jsx)(s().D,{styleName:t.isMobile?"Heading-17px/Regular":"UIRegular-14px/Regular",children:e.text})});default:(0,r().HB)(e)}})(),e.error&&(0,u.jsx)(s().D,{styleName:"UIRegular-14px/Regular",colorName:"redTertiary",customStyles:a.actionError,children:e.error})]})}},767651:(e,t,a)=>{a.r(t),a.d(t,{MarketplaceEmailCaptureModal:()=>M});var i=a(296540),l=()=>a(484714),r=()=>a(56366),n=()=>a(401497),s=()=>a(959013),o=()=>a(534177),c=()=>a(2220),u=()=>a(623580),d=()=>a(554509),p=()=>a(897119),m=()=>a(107683),x=()=>a(73332),b=()=>a(453697),h=()=>a(377586),y=()=>a(765957),g=()=>a(396990),k=()=>a(619418),f=a(474848);function M(){const e=(0,l().Y0)(),{isOpen:t,emailRequirement:a}=(0,r().O$)(g().A),{trackOpen:n,trackCancel:s}=v();(0,i.useEffect)((()=>{t&&n()}),[t,n]);const c=()=>{if(t)switch(a){case"optional":return(0,f.jsx)(C,{});case"required":return(0,f.jsx)(A,{});default:(0,o().HB)(a)}return null},u=()=>{s({from:"modal_close"}),g().A.cancel()};return e.isMobile?(0,f.jsx)(p().Ay,{open:t,popupType:h().n.BottomSheet,render:c,onDismiss:u,trapFocus:!0}):(0,f.jsx)(m().s,{isOpen:t,onDismiss:u,showCloseIcon:!0,render:c})}function j(e){var t;let{title:a,subTitle:o,primaryAction:c,secondaryAction:p}=e;const m=(0,s().tz)(),h=(0,l().Y0)(),M=function(){const e=(0,l().Y0)();return(0,n().IS)((t=>({modalContent:{padding:"28px"},body:{display:"flex",flexDirection:"column",gap:"12px"},input:{cursor:"not-allowed",color:t.text.tertiary,height:e.isMobile?"32px":"auto",fontSize:e.isMobile?"17px":"14px"},checkboxLabel:{display:"flex",gap:"8px"},checkbox:{marginTop:"2px"}})),[e.isMobile])}(),[j,C]=(0,i.useState)(!1),[A,S]=(0,i.useState)(""),{trackSubmit:B}=v(),w=(0,r().K8)((()=>{var e;return(null===(e=y().default.state.currentUserStore)||void 0===e?void 0:e.getEmail())||""}),[]),{isOpen:D,creator:I}=(0,r().O$)(g().A);return D?(0,f.jsx)(k().Y,{icon:(0,f.jsx)(b().A,{size:h.isMobile?48:36,avatar:{avatarUrl:(null==I||null===(t=I.attributes)||void 0===t||null===(t=t.image)||void 0===t?void 0:t.url)||"",name:(null==I?void 0:I.name)||""}}),title:a,subTitle:o,body:(0,f.jsxs)("div",{style:M.body,children:[(0,f.jsx)(u().A,{disabled:!0,value:w,inputStyle:M.input}),(0,f.jsxs)("label",{style:M.checkboxLabel,children:[(0,f.jsx)(x().T,{size:14,checked:j,onClick:()=>{S(""),C(!j)},style:M.checkbox,"aria-required":!0,"aria-invalid":Boolean(A)}),(0,f.jsx)(d().D,{as:"span",styleName:"UIRegular-14px/Regular",children:(0,f.jsx)(s().sA,{id:"marketplace.emailCaptureModal.optional.checkboxLabel",defaultMessage:"Allow the creator to add me to their mailing list for updates, promotions, and helpful tips"})})]})]}),actions:[{...c,onClick:()=>{j?(B(),g().A.submit()):S(m.formatMessage({id:"marketplace.emailCaptureModal.required.error",defaultMessage:"Please check the field above to share your email"}))},error:A},p],width:h.isMobile?"100%":446,style:M.modalContent}):null}function C(){const{trackSkip:e}=v();return(0,f.jsx)(j,{title:(0,f.jsx)(s().sA,{id:"marketplace.emailCaptureModal.optional.title",defaultMessage:"Share your email with the creator"}),primaryAction:{type:"outline",text:(0,f.jsx)(s().sA,{id:"marketplace.emailCaptureModal.optional.submit",defaultMessage:"Submit"})},secondaryAction:{type:"plain",isBlue:!0,text:(0,f.jsx)(s().sA,{id:"marketplace.emailCaptureModal.optional.skip",defaultMessage:"Skip, just get template"}),onClick:()=>{e(),g().A.skip()}}})}function A(){const{trackCancel:e}=v(),t=(0,r().K8)((()=>g().A.state.creator),[]);return(0,f.jsx)(j,{title:(0,f.jsx)(s().sA,{id:"marketplace.emailCaptureModal.required.title",defaultMessage:"Please share your email address"}),subTitle:(0,f.jsx)(s().sA,{id:"marketplace.emailCaptureModal.required.subTitle",defaultMessage:"{creatorName} has required that you share an email address before downloading their template",values:{creatorName:null==t?void 0:t.name}}),primaryAction:{type:"primary",text:(0,f.jsx)(s().sA,{id:"marketplace.emailCaptureModal.required.submit",defaultMessage:"Submit and get template"})},secondaryAction:{type:"plain",text:(0,f.jsx)(s().sA,{id:"marketplace.emailCaptureModal.required.skip",defaultMessage:"Cancel"}),onClick:()=>{e({from:"cancel"}),g().A.cancel()}}})}function v(){const e=(0,l().v3)(),{templateId:t,emailRequirement:a}=(0,r().O$)(g().A),n=(0,i.useMemo)((()=>({template_id:t,is_optional:"optional"===a,is_free:!0})),[t,a]),s=(0,i.useCallback)((t=>{(0,c().u)({environment:e,event:{eventName:"marketplace_capture_email",eventProperties:{...n,...t}}})}),[e,n]);return{trackOpen:(0,i.useCallback)((()=>{s({action:"open"})}),[s]),trackSubmit:(0,i.useCallback)((()=>{s({action:"submit"})}),[s]),trackSkip:(0,i.useCallback)((()=>{s({action:"skip"})}),[s]),trackCancel:(0,i.useCallback)((e=>{let{from:t}=e;s({action:"cancel",from:t})}),[s])}}}}]);