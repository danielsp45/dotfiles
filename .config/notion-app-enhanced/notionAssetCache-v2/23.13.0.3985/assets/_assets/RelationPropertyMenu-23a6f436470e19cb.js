"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[2411,5834,29945,34208,67608,77651],{346:(e,t,o)=>{o.d(t,{MG:()=>m,T1:()=>g,a1:()=>x,dt:()=>h,kg:()=>f,lC:()=>v,n_:()=>y});var n=o(296540),i=()=>o(484714),r=()=>o(56366),a=()=>o(187174),s=()=>o(645873),l=()=>o(941463),c=()=>o(441199),d=()=>o(749687),u=()=>o(737230),p=()=>o(756114);const g=new(s().O2)("PerformanceToolbar",(()=>Promise.all([o.e(16471),o.e(92845),o.e(84468),o.e(48632),o.e(75078),o.e(95168),o.e(36908),o.e(21194),o.e(23930),o.e(61347),o.e(45624)]).then(o.bind(o,462407)))),m=(0,s()._h)(g,(e=>e.PerformanceToolbar)),h=(0,s()._h)(g,(e=>e.PerformanceToolbarSettings));function f(){const e=(0,i().v3)();return(0,r().K8)((()=>(0,p().D)(e,e.RouterStore.state)),[e])}function y(){const e=(0,i().v3)(),t=S("PerformanceToolbarStore"),o=S("isPerformanceToolbarVisible");return(0,r().K8)((()=>!(!t||!o)&&o(e,e.RouterStore.state,t.state)),[o,e,t])}function v(){const e=S("PerformanceToolbarStore");return(0,r().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function x(){const e=(0,i().v3)(),t=S("createPerformanceToolbarMouseListeners"),o=S("PerformanceToolbarStore"),{sidebarExpanded:a,sidebarWidth:s,secondarySidebarExpanded:p,secondarySidebarWidth:g,updateSidebarExpanded:m,updateSidebarWidth:h}=(0,r().K8)((()=>({sidebarExpanded:d().sidebarExpandedStore.state,sidebarWidth:d().sidebarWidthStore.state,secondarySidebarExpanded:c().default.isOpen(),secondarySidebarWidth:l().Ay.getWidth(),updateSidebarExpanded:u().Ay.state.expanded,updateSidebarWidth:u().Ay.state.width})),[]);return(0,n.useEffect)((()=>{if(o&&t)return t(e,(e=>o.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),a,s,p,g,m,h)}),[t,e,o,a,s,p,g,m,h])}function S(e){const t=f(),[{value:o}]=(0,a().Yb)((()=>t?g.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return o}},14959:(e,t,o)=>{o.d(t,{u:()=>i});var n=()=>o(751735);function i(e,t){const{r:o,g:i,b:r}=(null==e?void 0:e.info.accent_color)||{r:0,g:0,b:0},a=`rgba(${o},${i},${r},${"dark"===t?.6:1})`;return{background:a,hoveredBackground:(0,n().e$)(a,.4),pressedBackground:(0,n().e$)(a,.9)}}},29037:(e,t,o)=>{o.r(t),o.d(t,{checkmarkIcon:()=>i,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.92 3.91 12.17 12.18",svg:(0,o(474848).jsx)("path",{d:"M15.784 4.002a.625.625 0 0 1 .214.857L9.445 15.784a.625.625 0 0 1-1.01.085l-4.37-5.098a.625.625 0 0 1 .948-.814l3.806 4.44 6.109-10.181a.625.625 0 0 1 .857-.214"})},i=(0,o(340498).wt)("checkmark",n)},50651:(e,t,o)=>{o.d(t,{default:()=>A});o(898992),o(354520),o(672577),o(581454);var n=o(296540),i=()=>o(484714),r=()=>o(56366),a=()=>o(401497),s=()=>o(743176),l=()=>o(851979),c=()=>o(987555),d=()=>o(959013),u=()=>o(496603),p=()=>o(284371),g=()=>o(679924);var m=()=>o(27732),h=()=>o(896628),f=()=>o(751156),y=()=>o(722872),v=()=>o(685889),x=()=>o(962730),S=()=>o(736767),b=()=>o(760217),C=()=>o(439264),P=()=>o(285790),k=()=>o(928600),M=()=>o(939740),j=()=>o(89924),w=o(474848);const A=function(e){let{collectionStore:t,targetCollectionStore:s,property:l,disabled:c,rowType:u}=e;const p=(0,a().DP)(),m=(0,i().v3)(),h=(0,r().uB)(void 0,o(970585).A),{format:f}=(0,n.useContext)(o(655424).t),y=(0,r().K8)((()=>{const e=v().B7({collectionStore:t,property:l}),o=Object.keys(s.getSchema()).map((t=>e.find((e=>e.property===t))??{property:t,visible:!1})),n=e.map((e=>e.property)),i=e=>{const t=n.indexOf(e);return-1!==t?t:1/0};return o.sort(((e,t)=>i(e.property)-i(t.property))),o}),[t,s,l]),S=(0,n.useCallback)((e=>(0,w.jsx)(B,{parent:e,collectionStore:t,property:l,disabled:c,targetCollectionStore:s,menuListStore:h,allRelatedTargetProperties:y})),[t,l,c,s,h,y]),b=(0,a().IS)((e=>({tooltipBody:{color:e.text.secondary},tooltipContainer:{display:"flex",flexDirection:"column"}})),[]);return(0,i().WS)()&&"section"!==u||"form_editor"===f||"form_viewer"===f?null:(0,w.jsx)(o(859428).A,{renderTooltip:()=>(0,w.jsxs)("div",{style:b.tooltipContainer,children:[(0,w.jsx)("div",{children:(0,w.jsx)(d().sA,{id:"database.RelationCustomizeLayoutMenu.tooltip.button.message",defaultMessage:"Customize shown properties"})}),c&&(0,w.jsx)("div",{style:b.tooltipBody,children:(0,w.jsx)(d().sA,{id:"database.RelationCustomizeLayoutMenu.tooltip.button.message.no_access",defaultMessage:"You do not have permission to edit"})})]}),placement:"section"===u?x().W.Top:x().W.Right,render:e=>(0,w.jsx)(o(406699).Ay,{popupType:o(897119).nl.Popup,alignmentToOrigin:x().C.Start,...e,renderOrigin:t=>(0,w.jsx)(P().A,{icon:o(30626)._,iconStyle:{width:16,color:p.icon.secondary,fill:p.icon.secondary},disabled:c,...t,...e}),onClick:()=>{!function(e,t){(0,g().v)(e,"relation_customize_displayed_properties",t)}(m,{from:"section"===u?"relation_section":"configure_relation_modal"})},originGap:16,render:S})})};function R(e){const{props:t,children:o}=e;return(0,w.jsx)(j().A,{...t,noTextOverflow:!0,title:(0,w.jsx)(d().sA,{defaultMessage:"Hidden in relation",id:"database.relationMenu.hiddenInRelationTitle"}),desktopTitleStyle:{height:19},children:o,disableDesktopPadding:!0})}function I(e,t,o,n,i,r,a){const{properties:d,visibility:g}=e;return u().oE(d.map((e=>function(e,t,o,n,i,r,a){const{propertyFormat:d,visibility:u}=e,g=!u,h=i.getSchema();if(!h)return;const f=h[d.property];return f?{key:d.property,render:e=>(0,w.jsx)(b().A,{...e,showDragHandle:!a,title:(0,w.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,w.jsx)(s().zB,{icon:f.icon,type:f.type,size:16,theme:o,style:{fill:o.icon.primary}}),(0,w.jsx)("span",{style:{marginLeft:8,...p().RC},children:f.name})]}),right:(0,w.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,w.jsx)(P().A,{icon:g?c().T:l().h,iconStyle:{width:16,height:16},color:g?"secondary":"primary",onClick:()=>{m().xI({propertyFormat:d,visibility:u,collectionStore:n,property:r,environment:t})},disabled:a||"title"===d.property})})}),action:()=>{}}:void 0}({propertyFormat:e,visibility:g},t,o,n,i,r,a))))}function _(e){const t=(0,i().v3)(),{collectionStore:o,property:n,menuListStore:r,disabled:a,visibleProperties:s,hiddenProperties:l,children:c}=e,d=u().oE([...s.map((e=>e.property)),s.length>0&&l.length>0&&{key:"group-header-hidden-property",draggable:!1},...l.map((e=>e.property))]);return(0,w.jsx)(C().Ay,{direction:"vertical",keys:d,renderKey:(e,t)=>c[t],onDrop:e=>{!function(e,t,o,n,i){const{newPropertyKeys:r}=e,a=v().B7({collectionStore:o,property:n}),s=r.indexOf("group-header-hidden-property"),l=u().oE(r.filter((e=>!e.startsWith("group-header-"))).map(((e,t)=>{const o=a.find((t=>t.property===e));return o?s>0?"title"===e&&t>=s?o:{...o,visible:Boolean(t<s)}:o:{property:e,visible:!(s>0)||Boolean(t<s)}}))),c=a.filter((e=>!r.includes(e.property))),d={...v().TA(o)};d[n]||(d[n]={}),d[n].related_properties=[...l,...c],f().createAndCommit({userAction:"RelationPropertyCustomizeLayoutMenu.handlePropertyReorder",environment:t,canUndo:!0,perform:e=>{h().zA({stores:[o],update:{collection_relation_options:d},transaction:e})}}),i.reset()}({newPropertyKeys:e},t,o,n,r)},disabled:a})}function B(e){let{parent:t,collectionStore:o,property:n,disabled:s,targetCollectionStore:l,menuListStore:c,allRelatedTargetProperties:p}=e;const g=(0,a().DP)(),m=(0,i().v3)(),h=p.filter((e=>e.visible)),f=p.filter((e=>!e.visible)),v=(0,r().K8)((()=>I({properties:h,visibility:!0},m,g,o,l,n,s)),[h,m,g,o,l,n,s]),x=(0,r().K8)((()=>I({properties:f,visibility:!1},m,g,o,l,n,s)),[f,m,g,o,l,n,s]);return p?(0,w.jsxs)(k().A,{menuType:y().gu.Popup,maxWidth:240,maxHeight:500,children:[0===p.length&&(0,w.jsx)(j().A,{children:(0,w.jsx)(S().A,{caption:(0,w.jsx)(d().sA,{defaultMessage:"No properties",id:"database.relationMenu.noProperties"})})}),p.length>0&&(0,w.jsx)(M().Ay,{type:M().Oh.Vertical,store:c,initialFocus:void 0,sections:u().oE([h.length>0&&{key:"visible_and_hidden_properties",render:e=>(0,w.jsx)(j().A,{...e,noTextOverflow:!0,title:(0,w.jsx)(d().sA,{defaultMessage:"Shown in relation",id:"database.relationMenu.shownInRelationTitle"}),desktopTitleStyle:{height:18},children:(0,w.jsx)(_,{collectionStore:o,property:n,disabled:s,menuListStore:c,visibleProperties:h,hiddenProperties:f,children:e.children})}),items:u().oE([...v,f.length>0&&{key:"group-header-hidden-property",render:e=>(0,w.jsx)(R,{props:e,children:(0,w.jsx)(w.Fragment,{})}),action:()=>{}},...x])},0===h.length&&f.length>0&&{key:"hidden_properties",render:e=>(0,w.jsx)(R,{props:e,children:(0,w.jsx)(_,{collectionStore:o,property:n,disabled:s,menuListStore:c,visibleProperties:h,hiddenProperties:f,children:e.children})}),items:x}])})]}):null}},59442:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,paperPlaneFillIcon:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.07 2.9 15.08 15.08",svg:(0,o(474848).jsx)("path",{d:"m16.37 2.901-.053.019L2.474 8.277A.625.625 0 0 0 2.4 9.408l4.826 2.638zm-8.366 9.922 2.638 4.827a.625.625 0 0 0 1.13-.074L17.13 3.733l.019-.054z"})},i=(0,o(340498).wt)("paperPlaneFill",n)},63467:(e,t,o)=>{o.d(t,{y:()=>d});var n=()=>o(637997),i=()=>o(267419);const r={ko:()=>o.e(2268).then(o.bind(o,224434)),es:()=>o.e(95264).then(o.bind(o,196425)),de:()=>o.e(35390).then(o.bind(o,653703)),fr:()=>o.e(3272).then(o.bind(o,94677)),pt:()=>o.e(27315).then(o.bind(o,766869)),zh:()=>o.e(69945).then(o.bind(o,516814)),ja:()=>o.e(77757).then(o.bind(o,824432)),da:()=>o.e(9423).then(o.bind(o,440761)),fi:()=>o.e(59337).then(o.bind(o,462135)),nb:()=>o.e(2040).then(o.bind(o,937314)),nl:()=>o.e(51106).then(o.bind(o,530897)),sv:()=>o.e(53631).then(o.bind(o,895222)),id:()=>o.e(69945).then(o.bind(o,516814)),th:()=>o.e(69945).then(o.bind(o,516814)),vi:()=>o.e(69945).then(o.bind(o,516814))};let a=!1,s=!1;async function l(e){for(const[o,i]of Object.entries(e.emojiLocaleKeywords)){var t;n().fB[o]={...n().fB[o],keywords:[...i,...(null===(t=n().fB[o])||void 0===t?void 0:t.keywords)||[]]}}await i().A.waitUntilLoaded(),i().A.update((t=>{let{emojiByName:o,...n}=t;return{...n,emojiByName:{...o,...e.emojiByName}}}))}async function c(){if(a)return;const[e]=o(662303).locale.split("-");e in r&&(await l(await r[e]()),a=!0)}const d=(0,o(279900).A)((async()=>{await async function(){s||(await l(await o.e(51872).then(o.bind(o,443716))),s=!0)}(),await c()}))},64901:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=o(474848);const i=function(e){const t=(0,o(484714).v3)(),i=(0,o(401497).DP)();return(0,n.jsx)(o(187485).A,{style:{display:"flex",alignSelf:"stretch",width:36,...e.isRight?{marginRight:-8}:{marginLeft:-8}},external:!0,href:e.href,onClick:()=>o(148024).FH(t,{from:e.analyticsFrom}),children:(0,n.jsx)(o(704152).A,{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,o(133033).$)({width:18,marginTop:1,fill:i.icon.tertiary})})})}},73223:(e,t,o)=>{o.r(t),o.d(t,{dismissTutorial:()=>d,resetTutorials:()=>u,tutorialAdvanceToStep:()=>p,tutorialAdvanceToStepAfter:()=>g,tutorialGoToNextStep:()=>l,tutorialGoToPrevStep:()=>c});var n=()=>o(541235),i=()=>o(751156),r=()=>o(755199),a=()=>o(739135),s=()=>o(765957);function l(e,t){var o;const{currentUserSettingsStore:n}=s().default.state;if(!n)return;const i=null===(o=n.getSettings())||void 0===o?void 0:o.tutorials;m({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{r().mJ({userSettingsStore:n,transaction:e,data:{tutorials:{...i,[t]:(0,a().i9)(n,t)}}})},userId:n.id})}function c(e,t){var o;const{currentUserSettingsStore:n}=s().default.state;if(!n)return;const i=null===(o=n.getSettings())||void 0===o?void 0:o.tutorials;m({userAction:"TutorialActions.prevStep",environment:e,perform:e=>{r().mJ({userSettingsStore:n,transaction:e,data:{tutorials:{...i,[t]:(0,a().KD)(n,t)}}})},userId:n.id})}function d(e,t){var o;const{currentUserSettingsStore:i}=s().default.state;if(!i)return;const a=null===(o=i.getSettings())||void 0===o?void 0:o.tutorials;(null==a?void 0:a[t])!==n().YD&&m({userAction:"TutorialActions.dismissTutorial",environment:e,perform:e=>{r().mJ({userSettingsStore:i,transaction:e,data:{tutorials:{...a,[t]:n().YD}}})},userId:i.id})}function u(e){const{currentUserSettingsStore:t}=s().default.state;t&&m({userAction:"TutorialActions.resetTutorialsDebug",environment:e,perform:e=>{r().mJ({userSettingsStore:t,transaction:e,data:{tutorials:{}}})},userId:t.id})}function p(e,t,o){var i;const{currentUserSettingsStore:l}=s().default.state;if(!l||(0,a().x$)(l,t))return;const c=(0,a().gt)(l,t);n().c$[t].steps.findIndex((e=>e.id===c))>=n().c$[t].steps.findIndex((e=>e.id===o))||r().mJ({userSettingsStore:l,transaction:e,data:{tutorials:{...null===(i=l.getSettings())||void 0===i?void 0:i.tutorials,[t]:o}}})}function g(e,t,o){if((0,a().ll)(o))return;const n=(0,a().tb)(t,o);n&&p(e,t,n)}function m(e){return i().createAndCommit({...e,canUndo:!1})}},77279:(e,t,o)=>{o.r(t),o.d(t,{default:()=>i});class n extends(()=>o(757695))().Store{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const i=new n},86499:(e,t,o)=>{o.d(t,{q:()=>r});var n=()=>o(645873);const i=new(n().O2)("RelationMenuRow",(async()=>{const{RelationMenuRow:e}=await o.e(18766).then(o.bind(o,243443));return{RelationMenuRow:e}})),r=(0,n()._h)(i,(e=>e.RelationMenuRow))},87043:(e,t,o)=>{o.d(t,{Ev:()=>B,Bj:()=>D,Ay:()=>W});var n=o(296540),i=()=>o(484714),r=()=>o(56366),a=()=>o(401497),s=()=>o(584262),l=()=>o(302107),c=()=>o(142748),d=()=>o(273900),u=()=>o(68263),p=()=>o(179034),g=()=>o(519831),m=()=>o(854150),h=()=>o(959013),f=()=>o(381349),y=()=>o(534177),v=()=>o(761652),x=()=>o(296798),S=()=>o(125565),b=()=>o(912913),C=()=>o(492414),P=()=>o(299545),k=()=>o(976721),M=()=>o(632709),j=()=>o(630116),w=()=>o(848237),A=()=>o(265665),R=()=>o(623275),I=o(474848);const _=function(e){const{store:t,isDisabled:o,isCurrentUserPermission:n}=e;return o?n?(0,I.jsx)(h().sA,{defaultMessage:"Your access is based on {inlineIconAndName}",id:"blockPermissionsSettings.restrictedPermissionsCurrentUser.tooltip",values:{inlineIconAndName:(0,I.jsx)(v().A,{store:t,useInvertedColors:!0})}}):(0,I.jsx)(h().sA,{defaultMessage:"This access is based on {inlineIconAndName}",id:"blockPermissionsSettings.restrictedPermissions.tooltip",values:{inlineIconAndName:(0,I.jsx)(v().A,{store:t,useInvertedColors:!0})}}):n?(0,I.jsx)(h().sA,{defaultMessage:"Your access is based on {inlineIconAndName}. Changing your access will restrict permissions of this page.",id:"blockPermissionsSettings.restrictedPermissionsCurrentUser.canEdit.tooltip",values:{inlineIconAndName:(0,I.jsx)(v().A,{store:t,useInvertedColors:!0,maxLength:26})}}):(0,I.jsx)(h().sA,{defaultMessage:"This access is based on {inlineIconAndName}. Changing this access will restrict permissions of this page.",id:"blockPermissionsSettings.restrictedPermissions.canEdit.tooltip",values:{inlineIconAndName:(0,I.jsx)(v().A,{store:t,useInvertedColors:!0,maxLength:26})}})},B=32,D=40,T=(0,h().YK)({fromLinkBox:{defaultMessage:"From {linkBoxWithPageTitle}",id:"pagePermissionItem.fromInheritedRecordPermissions.setting"}});function L(e){const{from:t,store:s,onClick:l,permissionItem:c,ignoreLocalHoverState:d,nonInheritedTooltip:u,inheritedTooltip:h,shouldDisable:f,isCollapsible:v,openRoleSelectMenuOnRender:x}=e,S=(0,i().v3)(),b=(0,r().uB)(void 0,o(463830).A),C=(0,r().K8)((()=>{const e=t.table;return e===p().ev?j().Bv.createChildStore(s,{table:p().ev,id:t.blockId}):e===m().yK?j().h4.createChildStore(s,{table:m().yK,id:t.teamId}):e===g().Vl?j().md.createChildStore(s,{table:g().Vl,id:t.collectionId}):void(0,y().HB)(e)}),[t,s]),[P,k]=(0,n.useState)(!1),M=(0,n.useCallback)((()=>{b.setState({...b.state,open:!0}),k(!0)}),[b]),w=(0,n.useCallback)((()=>{k(!1)}),[]);(0,n.useEffect)((()=>{x&&!b.state.open&&requestAnimationFrame((()=>{M()}))}),[x,M,b]);const A=P,B=(0,r().K8)((()=>f||(0,o(484578).dK)({permissionItem:c,store:s})),[f,c,s]),D=(0,r().K8)((()=>C.id!==s.id),[C,s]),T=(0,n.useCallback)((e=>{l?l(e):B||b.setState({...b.state,open:!0})}),[b,l,B]),L=(0,r().K8)((()=>{const e=S.currentUser.id;return"user_permission"===c.type&&c.user_id===e}),[S,c]),E=(0,r().K8)((()=>A?null:D?h||(0,I.jsx)(_,{store:C,isDisabled:B,isCurrentUserPermission:L}):u),[D,u,h,C,B,L,A]),N=(0,a().IS)((t=>({button:{...(0,R().CY)(),...e.menuListItemProps?{width:"unset"}:{}},pressedButton:{background:t.buttonPressedBackgroundLight},tooltip:{maxWidth:240}})),[e.menuListItemProps]);return(0,I.jsx)(o(859428).A,{delayThreshold:0,renderTooltip:()=>E,textWrap:!0,disableTooltip:!Boolean(E)||A,forceRenderTooltipPopupComponent:Boolean(E),style:N.tooltip,render:t=>{const n=(0,o(553965).A)(t,{onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave});return e.menuListItemProps?(0,I.jsx)(o(760217).A,{...e.menuListItemProps,onClick:T,disabled:B,ignoreLocalHoverState:d,pressed:!1,buttonStyle:N.button,textWrapperStyle:{marginLeft:0,marginRight:0},style:{padding:0},title:(0,I.jsx)(F,{...e,isDisabled:B,fromStore:C,buttonPopupStore:b,isInherited:D,onOpenMenu:M,onClose:w}),...n}):(0,I.jsx)(o(704152).A,{disabled:B&&!v,ignoreLocalHoverState:d,style:N.button,pressedStyle:N.pressedButton,onClick:T,...n,children:(0,I.jsx)(F,{...e,isDisabled:B,fromStore:C,buttonPopupStore:b,isInherited:D,onOpenMenu:M,onClose:w})})},placement:o(962730).W.Left})}function F(e){const{permissionItem:t,fromStore:o,isCompact:s,iconStyle:l,icon:c,title:d,tag:u,subtitle:p,showInherited:g,isInherited:m,permissionRoleSelect:h,hideRoleSelectButton:f,renderTitleWithoutUILabelWrapper:v,onClose:x,style:b}=e,C=(0,i().v3)(),P=C.device.isMobile,k=(0,r().K8)((()=>function(e){return"user_permission"===e.type}(t)),[t]),{paddingLeft:M,paddingRight:w}=(0,r().K8)((()=>({paddingLeft:C.WindowSizeStore.getSafePaddingLeftCSS(P?0:8),paddingRight:C.WindowSizeStore.getSafePaddingRightCSS(P?0:8)})),[C.WindowSizeStore,P]),_=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",minHeight:s?44:void 0,height:P?void 0:R().CJ,paddingTop:P?12:8,paddingBottom:P?12:8,paddingLeft:M,paddingRight:w,...b},icon:{flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",width:P?40:32,height:P?40:32,marginRight:(0,R().qj)({isMobile:P}),...l},title:{marginRight:"auto",minWidth:0},labelWrapper:{display:"flex",flexDirection:"row"},label:{fontWeight:400},tag:{marginLeft:4},roleSelect:{display:"flex",alignItems:"center",flexShrink:0,marginLeft:8}})),[s,M,w,P,l,b]),B=(0,n.useMemo)((()=>f?null:function(e){return"display_only_overview_permission"===e.type||"display_only_hidden_permission"===e.type||"display_only_inherited_permission"===e.type||"display_only_group_member_permission"===e.type}(t)?h:e.store instanceof j().Bv?(0,I.jsx)(E,{...e,onClose:x,permissionItem:t}):e.store instanceof j().md?(0,I.jsx)(N,{...e,store:e.store,onClose:x,permissionItem:t}):void(0,y().HB)(e.store)),[f,t,e,h,x]);return(0,I.jsxs)("div",{className:"notranslate",style:_.container,children:[(0,I.jsx)("div",{style:_.icon,children:c}),(0,I.jsxs)("div",{style:_.title,children:[(0,I.jsxs)("div",{style:_.labelWrapper,children:[v?d:(0,I.jsx)(S().A,{style:k?void 0:_.label,children:(0,I.jsx)(A().j,{children:d})}),u&&(0,I.jsx)("div",{style:_.tag,children:u})]}),p&&(0,I.jsx)(S().A,{style:e.subtitleStyle,isSmall:!0,children:p}),g&&m&&(0,I.jsx)(V,{store:o})]}),B?(0,I.jsx)("div",{style:_.roleSelect,children:B}):null]})}function E(e){const{isInherited:t,permissionItem:o,store:s,from:l,isDisabled:g,sudoModeStore:m,location:h,fromPermissionWrapper:f,onUpgradeButtonClick:y,onChange:v,onClose:x,onOpenMenu:S,upgradeButtonName:C,buttonPopupStore:P,isRemovableOverride:M,onChangeSuccess:w}=e,A=(0,i().v3)(),_=(0,r().K8)((()=>{var e;const t=s.getModel(),n=null===(e=s.getParentStore())||void 0===e?void 0:e.getModel();return(0,d().tp)({record:t,parent:n,from:l,permissionItem:o})?(0,d().SK)({ancestors:c().Yn(s.pointer,s.getRecordModel),from:l}):o.role}),[l,o,s]),B=(0,r().K8)((()=>s instanceof j().Bv?s.getType():void 0),[s]),D=(0,r().K8)((()=>{const e=A.currentUser.id;return u().B2(o)&&o.user_id===e}),[A,o]),T=(0,n.useCallback)((async e=>{let n=!1;const i={...o};i.role=_,n=v?await v(e):await(0,k().o5)({oldPermissionItem:i,newRole:e,wasInherited:t,environment:A,store:s,sudoModeStore:m,location:h,fromPermissionWrapper:f}),n&&(null==w||w(e))}),[o,_,t,A,s,m,h,f,v,w]),L=(0,a().IS)((e=>({button:{color:e.text.secondary,fontSize:(0,R().kx)({environment:A})}})),[A]);return(0,I.jsx)(b().Ay,{role:_,table:p().ev,blockType:B,type:o.type,disabled:g,isUserPermission:D,onChange:T,onClick:S,onClose:x,onUpgradeButtonClick:y,upgradeButtonName:C,buttonPopupStore:P,buttonStyle:L.button,showPermissionOverrideWarning:t&&!e.selectFooter,isRemovableOverride:M,footer:e.selectFooter,roleItemOverrides:e.roleItemOverrides,from:"shareMenu",header:e.selectHeader})}function N(e){const{isInherited:t,permissionItem:o,store:s,from:p,isDisabled:m,sudoModeStore:h,location:f,fromPermissionWrapper:y,onUpgradeButtonClick:v,onChange:x,onClose:S,onOpenMenu:C,upgradeButtonName:P,buttonPopupStore:M,isRemovableOverride:j,onChangeSuccess:w}=e,A=(0,i().v3)(),_=(0,r().K8)((()=>{var e;const t=s.getModel(),n=null===(e=s.getParentStore())||void 0===e?void 0:e.getModel();return(0,d().tp)({record:t,parent:n,from:p,permissionItem:o})?(0,d().SK)({ancestors:c().Yn(s.pointer,s.getRecordModel),from:p}):o.role}),[p,o,s]),B=(0,r().K8)((()=>{const e=A.currentUser.id;return u().B2(o)&&o.user_id===e}),[A,o]),D=(0,n.useCallback)((async e=>{let n=!1;const i={...o};i.role=_,n=x?await x(e):await(0,k().o5)({oldPermissionItem:i,newRole:e,wasInherited:t,environment:A,store:s,sudoModeStore:h,location:f,fromPermissionWrapper:y}),n&&(null==w||w(e))}),[o,_,t,A,s,h,f,y,x,w]),T=(0,r().K8)((()=>{if("collection_property_permission"!==o.type)return;const e=s.getSchema();return(0,l().sq)({collectionSchema:e,permissionItem:o})?void 0:[{role:"none"}]}),[o,s]),L=(0,a().IS)((e=>({button:{color:e.text.secondary,fontSize:(0,R().kx)({environment:A})}})),[A]);return(0,I.jsx)(b().Ay,{role:_,table:g().Vl,blockType:void 0,type:o.type,disabled:m,isUserPermission:B,onChange:D,onClick:C,onClose:S,onUpgradeButtonClick:v,upgradeButtonName:P,buttonPopupStore:M,buttonStyle:L.button,showPermissionOverrideWarning:t&&!e.selectFooter,isRemovableOverride:j,footer:e.selectFooter,roleItemOverrides:e.roleItemOverrides,from:"shareMenu",header:e.selectHeader,availableRoleItems:T})}function V(e){const{store:t}=e,o=(0,i().v3)(),l=(0,h().tz)(),c=(0,r().K8)((()=>{if(t.table===p().ev)return(0,C().Ay)({store:t,fullyQualified:!1,pageVisitSource:s().y8.LinkInPage})}),[t]),d=(0,r().K8)((()=>(0,P().$R)(t)),[t]),u=(0,n.useCallback)((()=>{w().F2({environment:o,teamId:t.id,tab:M().p.Members,from:"permission_item"})}),[t.id,o]),g=(0,a().IS)((e=>({label:{lineHeight:1.4},linkBox:{display:"inline-flex",alignItems:"center",borderBottom:`0.5px solid ${f().Ay.mediumTextColor}`}})),[]);return(0,I.jsx)(S().A,{isSmall:!0,style:g.label,children:l.formatMessage(T.fromLinkBox,{linkBoxWithPageTitle:(0,I.jsx)(x().A,{inline:!0,href:c,onClick:d?u:void 0,innerStyle:g.linkBox,children:(0,I.jsx)(v().A,{store:t,useInvertedColors:!1})})})})}const W=n.memo(L)},97059:(e,t,o)=>{o.d(t,{W:()=>h,w:()=>m});o(944114);var n=()=>o(585515),i=()=>o(577449),r=()=>o(161479),a=()=>o(545285),s=()=>o(763824),l=()=>o(780054),c=()=>o(870618),d=()=>o(670631),u=()=>o(227440),p=()=>o(217429),g=()=>o(540758);async function m(e){const{environment:t}=e;return(await s().lX(Object.keys(d().A.state.offlinePages||{}),100,(e=>async function(e){const{environment:t,pageId:o}=e,s={page:{id:o,spaceId:(0,r().e)(void 0)},baseUrl:l().A.domainBaseUrl,publicDomainName:l().A.publicDomainName,shouldTraverseToggleBlocks:!0,limit:1/0,cursor:{stack:[]},verticalColumns:!1},d=[];return await n().T(s,i().h.sideEffect((e=>((0,a().u)(e)&&d.push(e.id),Promise.resolve())),i().h.fromMonomorphicFunctionUnsafe((async e=>{const o=await c().h7({environment:t,pointer:e,useInMemoryCacheOnly:!1,skipAccessWrites:!0});return null==o?void 0:o.model})))),d}({environment:t,pageId:e})))).flat()}function h(e,t){return!u().A.state.online&&(e.device.isElectron||e.device.isMobileNative)&&p().default.checkGate({gateName:"download_for_offline"})&&!(0,g().Bd)(t)}},99756:(e,t,o)=>{o.d(t,{A:()=>c});var n=o(296540),i=()=>o(401497),r=()=>o(87043),a=o(474848);function s(e){let{type:t,isMobile:n,containerStyle:s,iconSize:c,...d}=e;const u=c??20,p=(0,i().IS)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"center",...(0,o(623275).iM)({theme:e,size:c??(n?r().Bj:r().Ev),useLargeBorderRadius:!0,useLightBackgroundColor:!0}),..."circle"===t&&{borderRadius:"100%"},...s}})),[s,n,t,c]);return(0,a.jsx)("div",{style:p.container,children:"function"===d.iconType?(0,a.jsx)(l,{iconFn:d.iconFn,iconStyle:d.iconStyle,innerIconSize:u}):"emoji"===d.iconType?(0,a.jsx)(o(56086).A,{char:d.emoji,size:u}):"recordIcon"===d.iconType?(0,a.jsx)(o(187820).B6,{icon:d.icon,disabled:!0,isEmptyPage:!1,size:u,defaultIcon:(0,o(658985).$)()}):d.element})}function l(e){let{iconFn:t,iconStyle:o,innerIconSize:n}=e;return t((0,i().IS)((e=>({icon:{width:n,height:n,fill:e.icon.secondary,...o}})),[o,n]).icon)}const c=n.memo(s)},105239:(e,t,o)=>{o.d(t,{N:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.37 1.37 13.26 16.26",svg:(0,o(474848).jsx)("path",{d:"M9.191 1.478a.624.624 0 0 1 .864.867l-.08.099-1.942 1.932H10A6.625 6.625 0 1 1 3.375 11a.625.625 0 1 1 1.25 0A5.375 5.375 0 1 0 10 5.626H8.037L9.962 7.56l.08.098a.626.626 0 0 1-.966.783L6.083 5.434l-.077-.096a.626.626 0 0 1 .08-.788l3.007-2.993z"})},i=(0,o(340498).wt)("arrowCircleSpinCounterClockwise",n)},105819:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,pencilLineIcon:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.63 4.12 14.99 11.76",svg:(0,o(474848).jsx)("path",{d:"m13.987 5.682-.684.684-1.288-1.288.692-.691a.91.91 0 0 1 1.28 0c.35.35.35.93 0 1.28zm-9.433 9.433 7.914-7.914-1.289-1.289-7.92 7.908c-.122.122-.214.29-.274.457l-.336 1.082c-.06.229.153.442.366.366l1.082-.335q.252-.07.457-.275m12.446.76H5.61l1.25-1.25H17a.625.625 0 1 1 0 1.25"})},i=(0,o(340498).wt)("pencilLine",n)},115562:(e,t,o)=>{o.d(t,{W:()=>l});o(296540);var n=()=>o(819121),i=()=>o(401497),r=()=>o(955825),a=()=>o(677195),s=o(474848);function l(e){const{selectorSize:t="normal",...o}=e,{disabled:l,checked:c}=o,[d,u]=(0,n().A)(),p=function(e){const{checked:t,disabled:o,isFocusVisible:n,selectorSize:r}=e;return(0,i().IS)((e=>({root:{position:"absolute",display:"flex",width:"large"===r?15:11,height:"large"===r?15:11,margin:1.5,justifyContent:"center",alignItems:"center",flexShrink:0,borderRadius:"large"===r?2:1,transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${o?e.tint.regular:e.blueColor}`,background:o?e.tint.regular:e.blueColor}:{boxShadow:`0 0 0 1.5px ${o?e.icon.quaternary:e.stroke.input}`,background:e.surface.page},...n&&{boxShadow:e.buttonBlueFocusRing}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"large"===r?18:void 0,height:"large"===r?18:void 0,...o?{pointerEvents:"none"}:{cursor:"pointer"}},icon:{color:e.text.contrastPrimary,width:"large"===r?12:10,height:"large"===r?12:10,ariaHidden:!0}})),[r,t,o,n])}({checked:c,disabled:l,selectorSize:t,isFocusVisible:u});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{ref:d,type:"checkbox",style:p.input,...o}),(0,s.jsx)("span",{...(0,r().AH)(p.root,l?{}:{pseudoActive:p.active}),children:c&&(0,a().R)(p.icon)})]})}},132389:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=o(474848);function i(e){const t={display:"inline-block",minWidth:e.size,minHeight:e.size};return"x"===e.axis?t.minHeight=1:"y"===e.axis&&(t.minWidth=1),(0,n.jsx)("div",{style:t})}},132855:(e,t,o)=>{o.r(t),o.d(t,{arrowInCircleUpFillIcon:()=>i,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o(474848).jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 0 0-15.25 7.625 7.625 0 0 0 0 15.25m3.042-8.07a.625.625 0 0 1-.884 0L10.625 8.02v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 1 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"})},i=(0,o(340498).wt)("arrowInCircleUpFill",n)},153861:(e,t,o)=>{o.d(t,{T:()=>i,a:()=>r});var n=()=>o(979340);function i(e){let{upsell:t,intl:o}=e;return"product"===t.type?(0,n().u2)({product:t.product,intl:o}):void 0}function r(e){const{upsell:t,spaceStore:o,salesStatus:i,offer:r,requestState:a}=e;return"unrequested"===a?{status:"eligible_to_request"}:"pending"===a?{status:"request_pending"}:null!=o&&o.canAdmin()?"none"===t.type?{status:"not_eligible"}:"sales_assisted"===i?{status:"sales_assisted"}:(0,n().h0)(t.product)&&"sales_eligible"===i?{status:"sales_eligible"}:"preferred"===t.trialability&&"trial"===(null==r?void 0:r.type)&&r.subscriptionTier===t.product?{status:"eligible_for_trial"}:{status:"eligible_for_upgrade"}:{status:"not_eligible"}}},159026:(e,t,o)=>{o.d(t,{Ay:()=>a,NJ:()=>n,d5:()=>i});o(898992),o(354520),o(581454),o(737550);let n=function(e){return e.unselected="unselected",e.workspace_member="workspace_member",e.request_workspace_member="request_workspace_member",e.page_guest="page_guest",e.closed="closed",e}({}),i=function(e){return e[e.closed=0]="closed",e[e.share_page=1]="share_page",e[e.share_workspace=2]="share_workspace",e[e.request_workspace=3]="request_workspace",e}({});class r extends(()=>o(757695))().Store{getInitialState(){return{inviteStage:i.closed,selection:n.workspace_member,order:[n.workspace_member,n.page_guest],invitedUsers:[],invitedEmailToUserIdMap:{},flowId:o(206267).JW()}}startWorkspaceInvite(){this.setState({...this.state,inviteStage:i.share_workspace,order:[n.workspace_member,n.page_guest],selection:n.workspace_member})}startRequestMembership(){this.setState({...this.state,inviteStage:i.request_workspace,order:[n.request_workspace_member,n.page_guest],selection:n.request_workspace_member})}hasGuests(){return this.state.invitedUsers.some((e=>e.isGuest))}getGuestEmails(){return this.state.invitedUsers.filter((e=>e.isGuest)).map((e=>e.email))}}const a=r},173019:(e,t,o)=>{o.d(t,{r:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("pencil",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},173783:(e,t,o)=>{o.d(t,{A:()=>a});o(296540);var n=()=>o(401497),i=()=>o(658985),r=o(474848);function a(e){const t=function(e){const{size:t,style:o}=e;return(0,n().IS)((e=>({icon:{width:.6*t,height:.6*t,fill:e.text.secondary},iconContainer:{width:t,height:t,borderRadius:"100%",background:e.regularDividerColor,display:"flex",alignItems:"center",justifyContent:"center",...o}})),[t,o])}(e),o=(0,i().$)(t.icon);return(0,r.jsx)("div",{style:t.iconContainer,children:o})}},201361:(e,t,o)=>{o.d(t,{P:()=>r});o(296540);var n=o(474848);const i={viewBox:"2.72 1.1 15.56 16.51",svg:e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.93132 1.82416C6.22047 1.48199 4.62427 2.79056 4.62427 4.5353C4.62427 5.09457 4.79032 5.61505 5.07582 6.05014H4.29912C3.42927 6.05014 2.72412 6.75529 2.72412 7.62514V9.52514C2.72412 10.1359 3.07175 10.6654 3.57994 10.9267H9.37427V6.05643H10.6243V10.9267H16.4183C16.9265 10.6654 17.2741 10.1359 17.2741 9.52514V7.62514C17.2741 6.75529 16.569 6.05014 15.6991 6.05014H14.9228C15.2082 5.61507 15.3743 5.09461 15.3743 4.53538C15.3743 2.78566 13.7613 1.48542 12.0554 1.82661C11.2118 1.99533 10.4924 2.47592 10.0119 3.13467C9.54306 2.48204 8.83618 2.00513 8.00124 1.83815L7.93132 1.82416ZM9.37427 5.03772V6.05013H7.3891C6.55248 6.05013 5.87427 5.37192 5.87427 4.5353C5.87427 3.57937 6.74882 2.86241 7.68618 3.04989L7.7561 3.06387C8.69699 3.25205 9.37427 4.07819 9.37427 5.03772ZM14.1243 4.53538C14.1243 5.36715 13.4539 6.04235 12.624 6.05014H10.6243V5.08677C10.6243 4.10164 11.3289 3.24667 12.3005 3.05234C13.2428 2.86389 14.1243 3.58444 14.1243 4.53538Z",style:{rotate:"animate"===e?"14deg":"0deg",transformOrigin:"75% center",transition:"rotate 0.548s linear(\n    \t\t\t\t0, 0.007, 0.028 1.8%, 0.113 3.9%, 0.613 12.1%, 0.817 16.2%, 0.894,\n   \t\t\t\t\t0.954 20.4%, 1, 1.031 25.1%, 1.043 26.4%, 1.051, 1.055, 1.056 31.2%,\n    \t\t\t\t1.049 34.9%, 1.012 46.3%, 0.999 54.2%, 0.997 61.9%, 1\n  \t\t\t\t)"}}),(0,n.jsx)("path",{d:"M10.6243 12.1768H16.4133V15.7002C16.4133 16.5701 15.7082 17.2752 14.8383 17.2752H10.6243V12.1768Z"}),(0,n.jsx)("path",{d:"M3.58521 12.1768H9.37427V17.2752H5.1602C4.29036 17.2752 3.58521 16.5701 3.58521 15.7002V12.1768Z"})]})},r=(0,o(882827).p)("presentFillAnimated",i)},207207:(e,t,o)=>{o.d(t,{J:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.62 2.62 15.26 15.26",svg:(0,o(474848).jsx)("path",{d:"M8.875 2.625a6.25 6.25 0 1 0 3.955 11.09l3.983 3.982a.625.625 0 1 0 .884-.884l-3.983-3.982a6.25 6.25 0 0 0-4.84-10.205m-5 6.25a5 5 0 1 1 10 0 5 5 0 0 1-10 0"})},i=(0,o(340498).wt)("magnifyingGlass",n)},208603:(e,t,o)=>{o.d(t,{i9:()=>s,lP:()=>l,sH:()=>a});var n=o(296540),i=()=>o(401497),r=()=>o(625634);function a(e){let{icon:t,style:o,animationState:n}=e;return"static"===t.type?t.iconFn(o,void 0,void 0,"all"):t.iconFn({style:o,animationState:n})}function s(e,t){return(0,i().IS)((o=>({icon:{fill:o.icon[e.iconColor],...t?{width:r().z[t],height:r().z[t]}:{}}})),[t,e]).icon}function l(){const[e,t]=n.useState("initial");return{animationState:e,animationTriggers:{onMouseEnter:()=>t("animate"),onMouseLeave:()=>t("initial")}}}},243581:(e,t,o)=>{o.d(t,{r:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.48 3.92 13.04 12.85",svg:(0,o(474848).jsx)("path",{d:"M3.483 4.55c0-.345.28-.625.625-.625h3.5a.625.625 0 1 1 0 1.25H5.617L8.86 8.42A6 6 0 0 1 10 10.007a6 6 0 0 1 1.14-1.588l3.243-3.244h-1.99a.625.625 0 1 1 0-1.25h3.5c.344 0 .624.28.624.625v3.5a.625.625 0 0 1-1.25 0V6.06l-3.243 3.244a4.78 4.78 0 0 0-1.399 3.358v4.108h-1.25v-4.108a4.78 4.78 0 0 0-1.398-3.358L4.733 6.059V8.05a.625.625 0 1 1-1.25 0z"})},i=(0,o(340498).wt)("arrowBranch",n)},247123:(e,t,o)=>{o.d(t,{QU:()=>g,f2:()=>p,r6:()=>m});o(581454),o(296540);var n=()=>o(56366),i=()=>o(401497),r=()=>o(959013),a=()=>o(534177),s=()=>o(756279),l=()=>o(765957),c=()=>o(2143),d=()=>o(921194),u=o(474848);function p(e){const{openState:t}=e,{mainEditorCurrentBlockStore:o,currentSpaceStore:r}=(0,n().K8)((()=>{const{mainEditorCurrentBlockStore:e,currentSpaceStore:t}=l().default.state;return{mainEditorCurrentBlockStore:e,currentSpaceStore:t}}),[]),a=(0,i().IS)((e=>({scroller:{display:"flex",flexDirection:"column",maxHeight:290,border:`1px solid ${e.lightDividerColor}`,borderRadius:6,paddingTop:8,paddingLeft:12,paddingRight:12,paddingBottom:12,marginTop:15,marginBottom:5,marginLeft:-12,marginRight:-12},editContainer:{marginTop:2,marginBottom:2,color:e.text.primary}})),[]);if(!o||!r)return null;const p=Date.now();return(0,u.jsx)(c().H,{type:s().A.Y,style:a.scroller,children:t.permissionChanges.map(((e,t)=>{let[n,i]=e;const s={timestamp:p,space_id:r.id,type:"permission-changed",permission_data:{before:n,after:i}};return(0,u.jsx)("div",{style:a.editContainer,children:(0,u.jsx)(d().A,{rootStore:o,edit:s})},`${n.type}-${t}`)}))})}function g(e){return["remove","restrict"].includes(e.type)?(0,u.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccessV2",defaultMessage:"Change and unlink"}):(0,u.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.relink",defaultMessage:"Relink"})}function m(e){switch(e.type){case"remove":case"restrict":return(0,u.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"});case"restore":case"restoreTeamPermissions":return(0,u.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"});default:throw a().HB(e)}}},254868:(e,t,o)=>{o.d(t,{default:()=>Ko});o(944114),o(898992),o(354520),o(672577),o(803949),o(581454);var n=o(296540),i=()=>o(484714),r=()=>o(56366),a=()=>o(401497),s=()=>o(584262),l=()=>o(66689),c=()=>o(31503),d=()=>o(970013),u=()=>o(713998),p=()=>o(329199),g=()=>o(921940),m=()=>o(617871),h=()=>o(416504),f=()=>o(187174),y=()=>o(689094),v=()=>o(179034),x=()=>o(96689),S=()=>o(245241),b=()=>o(959013),C=()=>o(496603),P=()=>o(299709),k=()=>o(970330),M=()=>o(679924);function j(e,t){(0,M().v)(e,"relation_add_block",t)}function w(e,t){(0,M().v)(e,"relation_database_click",t)}var A=()=>o(727395),R=()=>o(846156),I=()=>o(449506),_=()=>o(884107),B=()=>o(901389),D=()=>o(870578),T=()=>o(435009),L=()=>o(319975),F=()=>o(751156),E=()=>o(633457),N=()=>o(2220),V=()=>o(444091),W=()=>o(655424),U=()=>o(760217),z=()=>o(297872),H=()=>o(419357),O=()=>o(928600),K=()=>o(64e3),q=()=>o(480095),G=()=>o(897119),$=()=>o(187820),Y=()=>o(16006),Q=()=>o(89924),Z=()=>o(64901),X=()=>o(287531),J=o(474848);function ee(e){const{targetCollectionStore:t,title:o,onClick:s,focused:l,isSection:c,index:d,parentBlockStore:u}=e,p=(0,r().K8)((()=>t.canEdit()),[t]),g=(0,r().K8)((()=>t.isSyncedCollection()),[t]),m=(0,r().K8)((()=>u.canEdit()),[u]),h=(0,i().Y0)(),f=(0,a().IS)((e=>({wrapper:{borderTop:`1px solid ${e.lightDividerColor}`,paddingTop:4,paddingBottom:4},row:{fontSize:h.isMobile?16:14,minHeight:h.isMobile?44:32}})),[h]),{format:y}=(0,n.useContext)(W().t);if("form_editor"===y||"form_viewer"===y)return null;if(!p||!m)return null;const v=(0,J.jsx)(X().A,{targetCollectionStore:t,pageName:o,onClick:()=>s(d),style:f.row,focused:l});return g?(0,J.jsx)(J.Fragment,{}):c?(0,J.jsx)(Q().A,{style:f.wrapper,disableMobilePadding:!0,children:v}):v}var te=()=>o(175116),oe=()=>o(458366),ne=()=>o(572088),ie=()=>o(476492),re=()=>o(594794),ae=()=>o(972435),se=()=>o(722872),le=()=>o(685889),ce=()=>o(836251),de=()=>o(780865),ue=()=>o(817126),pe=()=>o(806401),ge=()=>o(135599),me=()=>o(963589),he=()=>o(838364),fe=()=>o(406792),ye=()=>o(361330),ve=()=>o(562800),xe=()=>o(765957),Se=()=>o(217429),be=()=>o(53137),Ce=()=>o(630116),Pe=()=>o(329304),ke=o.n(o(169749)),Me=()=>o(638681);const je=Me().array(Me().tuple([Me().string(),Me().boolean()]));const we=new class{constructor(e){this.localStorageStore=void 0,this.localStorageStore=new(o(419494).Ay)({namespace:e,important:!1,trackingType:"necessary"})}getEntryFromLocalStorage(e){let t;try{t=this.localStorageStore.get(e)}catch{}if(t&&null===je.validator(t))return t;this.localStorageStore.remove(e)}get(e){let{key:t}=e;const o=this.getEntryFromLocalStorage(t);if(o)return o.map((e=>{let[t,o]=e;return t}))}getLruCacheFromLocalStorage(e){const t=new(ke())({max:10}),o=this.getEntryFromLocalStorage(e)??[];for(const[n,i]of Array.from(o).reverse())t.set(n,!0);return t}set(e){let{key:t,pageId:o}=e;try{const e=this.getLruCacheFromLocalStorage(t);e.set(o,!0);const n=e.dump().map((e=>{let{k:t,v:o}=e;return[t,o]}));this.localStorageStore.set(t,n)}catch{}}}("recentlySelectedRelationPagesCache");function Ae(e){let{targetCollectionId:t,pageId:o}=e;we.set({key:t,pageId:o})}const Re=(0,b().YK)({syncedCollectionInputPlaceholder:{defaultMessage:"Link a page",id:"relationPropertyMenuInput.syncedCollection.searchPlaceholder"},connectedRelationInputPlaceholder:{defaultMessage:"Paste a URL",id:"relationPropertyMenuInput.connectedRelation.searchPlaceholder"},connectedRelationGoogleDriveInputPlaceholder:{defaultMessage:"Select a file from your Google Drive",id:"relationPropertyMenuInput.connectedRelationGoogleDrive.searchPlaceholder"},connectedRelationFigmaInputPlaceholder:{defaultMessage:"Paste in https://figma.com/...",id:"relationPropertyMenuInput.connectedRelationFigma.searchPlaceholder"},connectedRelationGithubInputPlaceholder:{defaultMessage:"Paste in https://github.com/...",id:"relationPropertyMenuInput.connectedRelationGithub.searchPlaceholder"},connectedRelationSalesforceInputPlaceholder:{defaultMessage:"Search or Paste a Salesforce URL",id:"relationPropertyMenuInput.connectedRelationSalesforce.searchPlaceholder"}}),Ie=(0,b().YK)({inputPlaceholderEditable:{defaultMessage:"Link or create a page…",id:"relationPropertyMenuInput.placeholder.defaultEditable"},formInputPlaceholderEditable:{defaultMessage:"Search…",id:"relationPropertyMenuInput.placeholder.form"},inputPlaceholderUneditable:{defaultMessage:"Search linked pages…",id:"relationPropertyMenuInput.placeholder.defaultUneditable"}}),_e=(0,b().YK)({inputPlaceholder:{defaultMessage:"Search {propertyName}...",id:"relationPropertyMenuInput.placeholder.sharing"}}),Be=(0,b().YK)({inputPlaceholder:{defaultMessage:"Search...",id:"relationPropertyMenuInput.placeholder.sprint"}});function De(e){let{intl:t,connectedRelationFlags:o,overlayMode:n,disabled:i,format:r}=e;const a=function(e){const{isSyncedCollectionRelation:t,isGithubPrRelation:o,isGoogleDriveRelation:n,isFigmaRelation:i,isConnectedRelation:r,isSalesforceRelation:a}=e;if(t)return Re.syncedCollectionInputPlaceholder;if(o)return Re.connectedRelationGithubInputPlaceholder;if(n)return Re.connectedRelationGoogleDriveInputPlaceholder;if(i)return Re.connectedRelationFigmaInputPlaceholder;if(a)return Re.connectedRelationSalesforceInputPlaceholder;if(r)return Re.connectedRelationInputPlaceholder}(o);return a?t.formatMessage(a):"view"===(null==n?void 0:n.type)||i?t.formatMessage(Ie.inputPlaceholderUneditable):r&&(0,oe().NN)(r)?t.formatMessage(Ie.formInputPlaceholderEditable):t.formatMessage(Ie.inputPlaceholderEditable)}function Te(e,t){return e.formatMessage(_e.inputPlaceholder,t)}o(16280),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var Le=()=>o(857639),Fe=()=>o(502800),Ee=()=>o(106628),Ne=()=>o(122724);async function Ve(e){let{environment:t,query:o,targetCollectionStore:n,blockPointers:i,pageIdsToBoost:r,searchSessionId:a}=e;try{const e=await Ee().T.searchActions.load(),{results:s}=await e.searchPagesInCollection({environment:t,query:o.query,collectionId:n.id,limit:o.limit,spaceId:n.getSpaceId(),excludeTemplates:!0,source:"relation_menu",includePublicPagesWithoutExplicitAccess:!0,boostRecentlyViewedPages:!0,ignoresHighlight:!0,localSearchAnalytics:{searchSessionId:a}});return Ue({results:r&&!Boolean(o.query)?C().sb(r.concat(s)):s,targetCollectionStore:n,blockPointers:i})}catch(s){return Le().log({level:"error",from:"relationPropertySearchRequest",type:"performDefaultSearchRequest",error:(0,Fe().convertErrorToLog)(s)}),[]}}async function We(e){const{environment:t,query:o,targetCollectionStore:n,blockPointers:i}=e;try{const e=await async function(e){const{environment:t,sprintCollectionStore:o,searchQuery:n}=e,i=o.getPropertyMapping(),r=null==i?void 0:i[l().Hx.StatusV2],a=null==i?void 0:i[l().Hx.Dates];if(!r||!a)throw new Error("Sprints database does not have the required properties");const s="results",c={userTimeZone:(0,h().P)(),searchQuery:n,sort:[{property:r,direction:"ascending"},{property:a,direction:"ascending"}],reducers:{[s]:{type:"results",limit:100}}},d=o.getParentBlockStore();if(!d)return[];await d.load();const u=d.getCollectionViewStores()[0];if(!u)return[];const p=o.getSpaceId(),g=await I().callApi({eventName:"queryCollection",environment:t,data:{source:{type:"collection",id:o.id,spaceId:p},collectionView:{id:u.id,spaceId:p},loader:c},tracking:{src:"relation_property_menu"}});if("success"!==g.type)return[];const m=g.data.result.reducerResults[s];if("results"!==m.type)return[];return m.blockIds}({environment:t,sprintCollectionStore:n,searchQuery:o.query});return Ue({results:e,targetCollectionStore:n,blockPointers:i})}catch(r){Le().log({level:"error",from:"relationPropertySearchRequest",type:"performSprintSearchRequest",error:(0,Fe().convertErrorToLog)(r)});return await Ve(e)}}function Ue(e){let{results:t,targetCollectionStore:o,blockPointers:n}=e;const i=new Set(n.map((e=>e.id))),r=[];return t.forEach((e=>{const t={spaceId:o.getSpaceId(),id:e,table:v().ev},n=Ce().Bv.createChildStore(o,t);if(i.has(e)){const t={key:e,type:Ne().M7.SelectedPage,store:n};r.push(t)}else{const t={key:e,type:Ne().M7.SearchPage,store:n};r.push(t)}})),r}const ze=(0,n.createContext)(void 0);function He(e){const{children:t,relationPropertyMenuStore:o,property:i,targetCollectionStore:r,propertySchema:a,targetParentUrl:s,connectedRelationFlags:l}=e,c=(0,n.useMemo)((()=>({relationPropertyMenuStore:o,property:i,targetCollectionStore:r,propertySchema:a,targetParentUrl:s,connectedRelationFlags:l})),[o,i,r,a,s,l]);return(0,J.jsx)(ze.Provider,{value:c,children:t})}ze.displayName="RelationPropertyMenuContext";var Oe=()=>o(768627),Ke=()=>o(284371),qe=()=>o(522986),Ge=()=>o(623580),$e=()=>o(296798);function Ye(e){const{showTargetDatabase:t,inputPlaceholder:o,addPage:s}=e,{analyticsFrom:l,blockPropertyValueOverlayStore:c,blockStore:d,insertChar:u}=(0,n.useContext)(W().t),p=(0,n.useContext)(ze),g=(0,i().v3)(),m=(0,i().Y0)(),{searchQuery:h,searchPopupOpen:f}=(0,r().K8)((()=>(null==p?void 0:p.relationPropertyMenuStore.state)??{searchQuery:u??"",searchPopupOpen:!1}),[null==p?void 0:p.relationPropertyMenuStore,u]),y=(0,r().K8)((()=>null==p?void 0:p.targetCollectionStore.getIcon()),[null==p?void 0:p.targetCollectionStore]),v=(0,a().IS)((e=>({regular:{color:e.text.secondary,whiteSpace:"nowrap",marginLeft:4},headerWrap:{display:"flex",width:"100%",position:"relative",zIndex:2,padding:"6px 10px",fontSize:14,background:e.inputBackground,boxShadow:`\n\t\t\t\t\t0 1px 0 ${e.darkDividerColor}\n\t\t\t\t`},recordTitle:{fontWeight:Ke().Wy.semibold,fontSize:14,marginLeft:Ne().g1*(m.isRetina?.5:1)},input:{flexGrow:1},targetDatabase:{display:"flex",marginLeft:10,alignItems:"center"},linkBoxOuterStyle:{marginLeft:Ne().g1},linkBoxInnerStyle:{display:"flex"}})),[m.isRetina]);if(!d||!c||!p)return null;const{relationPropertyMenuStore:x,targetCollectionStore:S,targetParentUrl:C}=p;return(0,J.jsxs)("div",{style:v.headerWrap,children:[(0,J.jsx)(Ge().A,{style:v.input,value:h,placeholder:o,forceShowClearButton:Boolean(h||f),focus:!0,onChange:e=>{const t=e.target.value;x.setState({...x.state,searchQuery:t,searchPopupOpen:!!t,searchLimit:Oe().A.limitIncrement})},onClearButtonClick:()=>{x.setState(x.getInitialState())},onClick:()=>{x.setState({...x.state,searchQuery:h,searchPopupOpen:!0,searchLimit:Oe().A.limitIncrement})},onKeyDown:e=>{"Escape"===e.key&&x.setState(x.getInitialState())},format:Ge().C.Transparent,onSubmit:()=>{if(!s)return;const e=S.getFormat().integration_id,t=be().A.integrations.state.find((t=>t.id===e)),o=S.getFormat().pattern_name;if(!t||!o)return;(0,le().WK)({integration:t,patternName:o,url:h})&&s()}}),t?(0,J.jsx)("div",{style:v.targetDatabase,children:(0,J.jsx)(b().sA,{id:"database.relationProperty.newRelation.targetDatabase",defaultMessage:"<regular>In</regular> {databaseWithIcon}",values:{regular:e=>(0,J.jsx)("span",{style:v.regular,children:e}),databaseWithIcon:(0,J.jsxs)($e().A,{href:C,style:v.linkBoxOuterStyle,innerStyle:v.linkBoxInnerStyle,onClick:()=>{l&&w(g,{from:l}),qe().VN({environment:g,blockPropertyValueOverlayStore:c})},children:[(0,J.jsx)($().B6,{disabled:!0,icon:y,iconRecordCategory:"collection",isEmptyPage:!1,size:Ne().$w}),(0,J.jsx)(Y().A,{store:S,underline:!0,style:v.recordTitle,maxLength:25})]})}})}):void 0]})}var Qe=()=>o(591779),Ze=()=>o(176072),Xe=()=>o(439264),Je=()=>o(364280),et=()=>o(710149),tt=()=>o(331542),ot=()=>o(678553),nt=()=>o(939740),it=()=>o(204063),rt=()=>o(2143),at=()=>o(228927),st=()=>o(662971),lt=()=>o(729650),ct=()=>o(780054);function dt(e){const{targetCollectionStore:t,onClick:o,focused:i,isSection:s,index:l,onMouseEnter:c,blockPropertyValueOverlayStore:d}=e,u=(0,r().K8)((()=>t.canEdit()),[t]),p=(0,r().K8)((()=>t.isSyncedCollection()),[t]),g=(0,a().IS)((e=>({medium:{fontWeight:Ke().Wy.medium},wrapper:{borderTop:`1px solid ${e.lightDividerColor}`},icon:{width:14,fill:"#A6A299",marginRight:-2,marginLeft:0},row:{fontSize:ct().A.isMobile?16:14,minHeight:ct().A.isMobile?44:32}})),[]),m=(0,J.jsx)(U().A,{focused:i,onMouseEnter:c,icon:(0,lt().M)(g.icon),style:g.row,onClick:(0,n.useCallback)((()=>{o(l),d.setState({isOpen:!1})}),[l,o,d]),title:(0,J.jsx)(b().sA,{id:"database.searchRelation.MoveToBacklogFooter",defaultMessage:"<medium>Move to backlog</medium>",values:{medium:e=>(0,J.jsx)("span",{style:g.medium,children:e})}})}),h=s?(0,J.jsx)(Q().A,{style:g.wrapper,disableDesktopPadding:!0,disableMobilePadding:!0,children:m}):m;return u?p?null:h:null}var ut=()=>o(50651),pt=()=>o(86499),gt=()=>o(728611),mt=()=>o(571468),ht=()=>o(453597),ft=()=>o(598697),yt=()=>o(928074),vt=()=>o(756279),xt=()=>o(726360),St=()=>o(402014),bt=()=>o(464699),Ct=()=>o(462853),Pt=()=>o(381349),kt=()=>o(510683),Mt=()=>o(611520),jt=()=>o(807683),wt=()=>o(267419),At=()=>o(47170),Rt=()=>o(254526);var It=()=>o(444768),_t=(o(430670),o(737550),()=>o(244641)),Bt=()=>o(869190),Dt=()=>o(604995),Tt=()=>o(498140),Lt=()=>o(513416),Ft=()=>o(206267),Et=()=>o(792071),Nt=()=>o(191772),Vt=()=>o(506391),Wt=()=>o(720665),Ut=()=>o(859428),zt=()=>o(106352),Ht=()=>o(553965),Ot=()=>o(962730);function Kt(e,t,o){const n=new(Ce().Bv)(e,{table:v().ev,id:Ft().JW(),spaceId:Ft().JW()});return{blockStore:n,blockValue:{id:n.id,type:"external_object_instance",alive:!0,format:{bot_id:"",external_object_id:"",uri:t,attributes:o},version:0,space_id:"",parent_id:"",parent_table:"block"}}}function qt(e){const{environment:t,results:o,searchTerm:n,intl:i,theme:r,externalIntegrations:a,searchQueryStatus:s,emojiData:l,addPage:c,showBriefLoader:d=!1}=e,u=C().Im(n)?o:o.filter((e=>e.attributes.some((e=>"inline"===e.type&&e.values.length>0&&e.values[0].toString().toLowerCase().includes((null==n?void 0:n.toLowerCase())??""))))),p=C().Im(n)?"Suggested Results":"Search Results",g=u.flatMap((e=>{const{blockStore:o,blockValue:n}=Kt(t,e.uri,e.attributes);return{key:`external-search-result-${e.uri}`,render:e=>(0,J.jsx)(U().A,{...e,title:(0,Nt().gA)({blockModel:Et().Bj6.fromBlock(n),intl:i,index:0,style:{},disableHover:!0,disableLinks:!0,isAndroid:!1,classNames:[],theme:r,baseUrl:ct().A.domainBaseUrl,emojiType:"raw",currentUserId:t.currentUser.id,getRecordModel:o.getRecordModel,externalIntegrations:a,emojiData:l})}),action:t=>{(0,St().SQ)({event:t.event,context:St().y$.ButtonMouseDown,callback:()=>{c(e.uri)}})}}})),m={key:"external-search-results-loading",render:e=>(0,J.jsx)(ot().Ay,{...e,title:(0,J.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,J.jsx)($t,{style:{width:"50%"}}),(0,J.jsx)($t,{style:{width:"25%"}}),(0,J.jsx)($t,{style:{width:"37.5%"}}),(0,J.jsx)($t,{style:{width:"50%"}})]})}),action:()=>{}};return{key:"external-search-results",items:"pending"===s||d?[m]:g.length>0?g:[m],render:e=>(0,J.jsx)(Q().A,{...e,disableMobilePadding:!0,title:p})}}function Gt(e){const{integration:t,results:o,...n}=e,i=o.map((e=>{const t=e.attributes.flatMap((e=>{const t=(0,Vt().q8)(e);return(0,Lt().PX)(t)?[t]:(console.error(t),[])})),o=(0,Wt().MU)(t.flatMap((e=>[[e.id,e]])));return{uri:e.uri,attributes:t,attributesById:o}}));return t&&(0,m().a1)(t.id)?function(e){const{environment:t,intl:o,theme:n,externalIntegrations:i,emojiData:r}=e,a=e.results.flatMap((e=>{const t=e.attributesById.start;if(t&&(0,Vt().RD)(t)){const n=(0,Dt().AA)(t.values[0],(0,h().P)(),o.locale);return[{...e,dateTime:n.start}]}return[]})),s=C().$z(a,(e=>e.dateTime.toFormat(Dt().tr))),l=C().Ul(Object.keys(s),(e=>_t().c9.fromFormat(e,Dt().tr).valueOf())).flatMap((a=>{const l=s[a],c=C().Ul(l,(e=>e.dateTime.valueOf())),d=(0,Tt().Z$)(a);if(!d)return[];let u;(C().n4(d,(0,Dt().Ec)((0,h().P)()))||C().n4(d,(0,Dt().uf)((0,h().P)())))&&(u="relative");const p=(0,Bt().ZF)({value:d,intl:o,allowRelativeDates:Boolean(u),date_format:u}),g={key:`external-search-results-${p}`,items:c.flatMap((a=>{let s=null,l=null;const c=a.attributesById.title,d=a.attributesById.start,u=a.attributesById.end;return d&&u&&(0,Vt().RD)(d)&&(0,Vt().RD)(u)&&(s=(0,J.jsx)("div",{children:(0,J.jsxs)("span",{children:[(0,J.jsx)(zt().gY,{style:{color:void 0,display:"inline"},attribute:d,dateStyle:"exact_time"})," - ",(0,J.jsx)(zt().gY,{attribute:u,dateStyle:"exact_time",style:{color:void 0,display:"inline"}})]})}),l=(0,J.jsxs)("div",{children:[(0,J.jsx)("span",{children:(0,J.jsx)(zt().Ic,{style:{color:void 0,display:"inline"},store:Kt(t,a.uri,a.attributes).blockStore,attribute:c})}),s]})),function(e){let{environment:t,intl:o,theme:n,externalIntegrations:i,emojiData:r,entry:a,addPage:s,caption:l,tooltip:c}=e;const{blockStore:d,blockValue:u}=Kt(t,a.uri,a.attributes);return c?{key:`external-search-result-${a.uri}`,render:e=>(0,J.jsx)(Ut().A,{renderTooltip:()=>c,placement:Ot().W.Left,textWrap:!0,render:a=>(0,J.jsx)(U().A,{...(0,Ht().A)(a||{},e),title:(0,Nt().gA)({blockModel:Et().Bj6.fromBlock(u),intl:o,index:0,style:{},disableHover:!0,disableLinks:!0,isAndroid:!1,classNames:[],theme:n,baseUrl:ct().A.domainBaseUrl,emojiType:"raw",currentUserId:t.currentUser.id,getRecordModel:d.getRecordModel,externalIntegrations:i,emojiData:r}),caption:l})}),action:e=>{(0,St().SQ)({event:e.event,context:St().y$.ButtonMouseDown,callback:()=>{s(a.uri)}})}}:{key:`external-search-result-${a.uri}`,render:e=>(0,J.jsx)(U().A,{...e,title:(0,Nt().gA)({blockModel:Et().Bj6.fromBlock(u),intl:o,index:0,style:{},disableHover:!0,disableLinks:!0,isAndroid:!1,classNames:[],theme:n,baseUrl:ct().A.domainBaseUrl,emojiType:"raw",currentUserId:t.currentUser.id,getRecordModel:d.getRecordModel,externalIntegrations:i,emojiData:r}),caption:l}),action:e=>{(0,St().SQ)({event:e.event,context:St().y$.ButtonMouseDown,callback:()=>{s(a.uri)}})}}}({environment:t,intl:o,theme:n,externalIntegrations:i,emojiData:r,entry:a,addPage:e.addPage,caption:s,tooltip:l})})),render:e=>(0,J.jsx)(Q().A,{...e,disableMobilePadding:!0,title:p})};return g}));return l}({...n,results:i}):0===i.length&&"resolved"===n.searchQueryStatus?[]:[qt({...n,results:i})]}function $t(e){let{style:t}=e;return(0,J.jsxs)(Je().fI,{gap:8,alignItems:"center",children:[(0,J.jsx)(et().A,{style:{width:14,height:14,borderRadius:6}}),(0,J.jsx)(et().A,{style:{height:15,borderRadius:6,...t}})]})}function Yt(){const e=(0,i().v3)(),t=function(){const e=(0,i().Y0)().isMobile;return(0,a().IS)((t=>({figmaResults:{display:"flex",flexDirection:"column",alignItems:"flex-start",fontSize:e?16:12,padding:16,paddingBottom:4},figmaResultsCopyWrapper:{marginTop:0,color:t.text.tertiary}})),[e])}();return e.device.isMobile?null:(0,J.jsx)("div",{style:t.figmaResults,children:(0,J.jsx)("p",{style:t.figmaResultsCopyWrapper,children:(0,J.jsx)(b().sA,{defaultMessage:"To link, paste the Figma File URL above",id:"connectedRelationPropertyMenuResults.figmaRelationUserEducationPasteUrl.description"})})})}var Qt=()=>o(716016),Zt=()=>o(925907),Xt=()=>o(133033),Jt=()=>o(843141),eo=()=>o(908447),to=()=>o(84448),oo=()=>o(235191),no=()=>o(755636),io=()=>o(895876),ro=()=>o(283860),ao=()=>o(704152),so=()=>o(802790),lo=()=>o(132389);const co=(0,b().YK)({githubCopyIdAria:{defaultMessage:"Copy the ID value.",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.copyIdAria"},githubAddIdAria:{defaultMessage:"Add a unique id property to the database.",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.addIdAria"},githubLearnMoreAria:{defaultMessage:"Learn more about the GitHub Pull Requests feature.",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.learnMoreAria"}});function uo(e){const{pageBlockStore:t,blockPropertyValueOverlayStore:o}=e,n=(0,i().v3)(),a=(0,b().tz)(),s=po(),l=(0,te().ET)(),c=(0,r().K8)((()=>l.collectionStore()),[l]),d=(0,r().K8)((()=>l.databaseType),[l]),p=(0,r().K8)((()=>{var e;return c&&(null===(e=c.getRecordKeyStore())||void 0===e?void 0:e.getRecordKey())}),[c]),{uniqueIdPropertyId:g,uniqueIdValue:h}=(0,r().K8)((()=>{const e=t.getSchema(),o=(0,Qt().yP)(e);if(1!==o.length)return{uniqueIdPropertyId:void 0,uniqueIdValue:void 0};const n=t.getPropertyValue(o[0]);return{uniqueIdPropertyId:o[0],uniqueIdValue:(0,u().On)(n)}}),[t]),f=(0,r().K8)((()=>(0,Qt().H4)(p,h)),[p,h]),v=(0,r().K8)((()=>!Boolean(p)||!Boolean(h)),[p,h]);return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)("div",{style:s.githubResults,children:[(0,J.jsx)(go,{}),(0,J.jsx)("p",{style:s.githubResultsCopyWrapper,children:v?(0,J.jsx)(b().sA,{defaultMessage:"Create a prefixed ID property to paste in the GitHub PR title.",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.badIdError"}):(0,J.jsx)(b().sA,{defaultMessage:"Copy the {singleItemName} ID and paste it into the title of your PR in GitHub.",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducationLinkPastingOn.description",values:{singleItemName:(0,io().$O)(d)}})}),(0,J.jsx)(ro().A,{width:"100%",uniqueIdPrefix:p,uniqueIdValue:h})]}),(0,J.jsxs)("div",{style:s.githubResultsButtonsWrapper,children:[(0,J.jsxs)(ao().A,{style:s.githubResultsLearnMore,ariaLabel:a.formatMessage(co.githubLearnMoreAria),onClick:e=>{e.preventDefault(),no().f({environment:n,url:(0,ce().xS)("guides.githubRelation"),targetSelf:!1})},children:[(0,Xt().$)({width:n.device.isMobile?16:12}),(0,J.jsx)(lo().A,{size:4}),(0,J.jsx)(b().sA,{defaultMessage:"Learn more",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.learnMore"})]}),v?(0,J.jsxs)(ao().A,{style:s.githubResultsCTAButton,ariaLabel:a.formatMessage(co.githubAddIdAria),onClick:async e=>{e.preventDefault(),c&&(await to().c({environment:n,collectionStore:c}),F().createAndCommit({userAction:"CollectionSettingsAutoIncrementIdPropertyCreateNewIdProperty",environment:n,canUndo:!0,perform:e=>{oo().IL({environment:n,collectionStore:c,collectionViewArgs:void 0,propertyType:"auto_increment_id",transaction:e})}}),(0,eo().Z)({environment:n,collectionContextStore:l,from:"github_relation_menu",property_type:"auto_increment_id",integration_id:m().ob}))},children:[(0,y().W)({width:n.device.isMobile?16:12}),(0,J.jsx)(lo().A,{size:4}),(0,J.jsx)(b().sA,{defaultMessage:"Add ID property",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.addId"})]}):(0,J.jsxs)(ao().A,{style:s.githubResultsCTAButton,ariaLabel:a.formatMessage(co.githubCopyIdAria),onClick:async e=>{e.preventDefault();const i=await _().R.clipboardActions.load();await i.copyString({stringValue:f,environment:n,copiedMessage:i.clipboardMessages.copiedPropertyToClipboard}),g&&(0,Jt().E)(n,l,{block_id:t.id,property:g,property_type:"auto_increment_id",github_relation_menu:!0}),o.setState({isOpen:!1})},children:[(0,Zt().n)({width:n.device.isMobile?16:12}),(0,J.jsx)(lo().A,{size:4}),(0,J.jsx)(b().sA,{defaultMessage:"Copy {singleItemName} ID",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.copyId",values:{singleItemName:(0,io().$O)(d)}})]})]})]})}function po(){const e=(0,i().Y0)().isMobile;return(0,a().IS)((t=>({githubResults:{display:"flex",flexDirection:"column",alignItems:"flex-start",fontSize:e?16:12,padding:16,paddingBottom:4},githubResultsCopyWrapper:{marginTop:0,color:t.text.tertiary},githubResultsErrorWrapper:{marginTop:0,color:Pt().Ay.red},githubResultsButtonsWrapper:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",fontSize:e?16:12,padding:"10px"},githubResultsLearnMore:{display:"flex",flexDirection:"row",alignItems:"center",padding:4,borderRadius:5,color:t.text.tertiary},githubResultsCTAButton:{display:"flex",flexDirection:"row",alignItems:"center",padding:4,borderRadius:5,color:t.blueColor},githubLinkPastingSeparator:{border:t.tableDividerColor,width:"100%"},githubLinkPastingContainer:{width:"100%",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",margin:"8px 0px"},githubLinkPastingSeparatorText:{position:"absolute",backgroundColor:t.popoverBackground,color:t.text.tertiary,padding:"0px 8px"}})),[e])}function go(){const e=po();return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("p",{style:e.githubResultsCopyWrapper,children:(0,J.jsx)(b().sA,{defaultMessage:"To link, paste the GitHub PR URL above",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducationPasteUrl.description"})}),(0,J.jsxs)("div",{style:e.githubLinkPastingContainer,children:[(0,J.jsx)(so().A,{size:1,style:e.githubLinkPastingSeparator}),(0,J.jsx)("div",{style:e.githubLinkPastingSeparatorText,children:"or"})]}),(0,J.jsx)(lo().A,{size:8})]})}var mo=()=>o(619400);function ho(e){const t=(0,i().v3)(),o=function(){const e=(0,i().Y0)().isMobile;return(0,a().IS)((t=>({googleDriveResults:{display:"flex",flexDirection:"column",alignItems:"flex-start",fontSize:e?16:12,padding:16,paddingBottom:4,paddingTop:4},googleDriveResultsCopyWrapper:{marginTop:0,color:t.text.tertiary,marginBottom:0},googleDriveResultsLearnMore:{display:"flex",flexDirection:"row",alignItems:"center",padding:4,borderRadius:5},googleDriveResultsAccount:{fontSize:12,margin:0},googleDriveLinkPastingSeparator:{border:t.tableDividerColor,width:"100%"},googleDriveLinkPastingContainer:{width:"100%",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",margin:"8px 0px"},googleDriveLinkPastingSeparatorText:{position:"absolute",backgroundColor:t.cardContentBackground,color:t.text.tertiary,padding:"0px 8px"}})),[e])}(),n=(0,me().X)("gdrive_scope_migration_gate"),s=(0,r().K8)((()=>be().A.externalAuthentications.state.filter((e=>{let{integration_id:t}=e;return t===m().Hd}))),[]);return t.device.isMobile?null:(0,J.jsxs)("div",{style:o.googleDriveResults,children:[n?void 0:(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("p",{style:o.googleDriveResultsCopyWrapper,children:(0,J.jsx)(b().sA,{defaultMessage:"To link, paste the Google Drive File URL above",id:"connectedRelationPropertyMenuResults.googleDriveRelationUserEducationPasteUrl.description"})}),(0,J.jsxs)("div",{style:o.googleDriveLinkPastingContainer,children:[(0,J.jsx)(so().A,{size:1,style:o.googleDriveLinkPastingSeparator}),(0,J.jsx)("div",{style:o.googleDriveLinkPastingSeparatorText,children:"or"})]}),(0,J.jsx)(lo().A,{size:2})]}),(0,J.jsx)("p",{style:o.googleDriveResultsCopyWrapper,children:(0,J.jsx)(b().sA,{defaultMessage:"Select an account below to browse files on your Google Drive",id:"connectedRelationPropertyMenuResults.googleDriveRelationUserEducationSourcePicker.description"})}),(0,J.jsx)(lo().A,{size:2}),s.map(((n,i)=>(0,J.jsx)(ao().A,{style:o.googleDriveResultsLearnMore,onClick:async o=>{o.preventDefault(),await(async(o,n)=>{const i=await E().Nl({environment:t,externalAuthenticationValue:n}),r=be().A.integrations.state.find((e=>e.id===n.integration_id));if(!r)return;const{id:a,name:s,info:l}=r,{icon:c,dark_icon:d,accent_color:u,accent_icon:p}=l,g="dark"===t.ThemeStore.state.mode&&d?d:c;g&&u&&p&&i&&"failed"!==i.type&&await(0,mo().openGoogleDriveFilePicker)({environment:t,accessToken:i.data.access_token,callback:(t,i)=>{e.onFileSelect(o,i,n.id)},integration:{id:a,name:s,icon:g,accentColor:u,accentIcon:p},from:"connected_relation_property_value"})})(o,n)},children:(0,J.jsx)("p",{style:o.googleDriveResultsAccount,children:(0,J.jsx)(b().sA,{defaultMessage:"{account}",id:"connectedRelationPropertyMenuResults.googleDriveRelation.googleDriveAccount.description",values:{account:n.account_name}})})},i)))]})}function fo(e){const t=(0,i().v3)(),o=function(){const e=(0,i().Y0)().isMobile;return(0,a().IS)((t=>({salesforceResults:{display:"flex",flexDirection:"column",alignItems:"flex-start",fontSize:e?16:12,padding:16,paddingBottom:4,paddingTop:4},salesforceResultsCopyWrapper:{marginTop:0,color:t.text.tertiary,marginBottom:0},salesforceResultsLearnMore:{display:"flex",flexDirection:"row",alignItems:"center",padding:4,borderRadius:5}})),[e])}();return t.device.isMobile?null:(0,J.jsx)("div",{style:o.salesforceResults,children:(0,J.jsx)("p",{style:o.salesforceResultsCopyWrapper,children:(0,J.jsx)(b().sA,{defaultMessage:"Paste Salesforce {objectName} URL above",id:"connectedRelationPropertyMenuResults.salesforceRelationUserEducationPasteUrl.description",values:{objectName:e.objectName||"Record"}})})})}function yo(e){let{patternName:t}=e;const o=(0,i().v3)(),n=function(){const e=(0,i().Y0)().isMobile;return(0,a().IS)((t=>({slackResults:{display:"flex",flexDirection:"column",alignItems:"flex-start",fontSize:e?16:12,padding:16,paddingBottom:4},slackResultsCopyWrapper:{marginTop:0,color:t.text.tertiary}})),[e])}();return o.device.isMobile?null:(0,J.jsx)("div",{style:n.slackResults,children:(0,J.jsx)("p",{style:n.slackResultsCopyWrapper,children:"slack_channel"===t?(0,J.jsx)(b().sA,{defaultMessage:"To link, paste the Slack channel URL above",id:"connectedRelationPropertyMenuResults.slackChannelRelationUserEducationPasteUrl.description"}):(0,J.jsx)(b().sA,{defaultMessage:"To link, paste the Slack URL above",id:"connectedRelationPropertyMenuResults.slackRelationUserEducationPasteUrl.description"})})})}function vo(e){const{sections:t,targetCollectionStore:o,search:s,property:l,propertySchema:c,pageRecordStore:d,blockPropertyValueOverlayStore:p}=e,g=(0,a().IS)((e=>({settingsMenu:{display:"flex",flexGrow:1,flexDirection:"column",padding:"8px 16px 16px 8px"},settingsMenuSearchBox:{background:e.contentBackground,marginBottom:10},addPageButton:{width:"100%",display:"flex",justifyContent:"center"},suggestionBox:{display:"flex",alignItems:"center",fontSize:12,color:Pt().Ay.white,background:Pt().Ay.blue,borderRadius:6,padding:10,boxShadow:e.shadowMD,alignSelf:"center",maxWidth:"80%"},errorMessage:{alignSelf:"center",padding:10,fontSize:14,color:e.errorText},addingPage:{width:"100%",padding:10,display:"flex",justifyContent:"flex-start",fontSize:14,color:e.text.secondary},enterText:{color:e.text.tertiary}})),[]),h=u().di(c),y=u().H6(c),v=u().KF(c),x=u().V5(c),S=u().uv(c),C=(0,u().Dz)(c),P=(0,r().K8)((()=>{if(!o)return;const e=o.getFormat().integration_id;return be().A.integrations.state.find((t=>t.id===e))}),[o]),k=(0,r().K8)((()=>P?(0,ne().jw)(P.id):[]),[P]),M=(0,i().v3)(),j=(0,b().tz)(),w=(0,a().DP)(),A=(0,r().K8)((()=>{const e=be().A.state;return e.loaded?e.integrations:[]}),[]),R=(0,r().K8)((()=>{var e;return Boolean(null===(e=xe().default.state.currentSpaceStore)||void 0===e?void 0:e.canAdmin())}),[]),_=(0,r().K8)((()=>{var e;return!(!(null===(e=xe().default.state.currentSpaceStore)||void 0===e?void 0:e.canEdit())||!(0,ne().fY)(M))}),[M]),B=(0,r().K8)((()=>!!P&&(P.id===m().mn&&(0,Rt().Ow)())),[P]),D=(0,r().K8)((()=>{const e=be().A.state;if(e.loaded&&P)return function(e){const{integration:t,externalAuthentications:o,requiresDoubleAuth:n}=e;if(n){const e=(0,m().eL)(t.id);return o.find((t=>t.integration_id===e))}return o.find((e=>e.integration_id===t.id))}({integration:P,externalAuthentications:e.externalAuthentications,requiresDoubleAuth:B})}),[P,B]),T=(0,r().K8)((()=>o.getFormat().pattern_name),[o]),[{value:L,status:F}]=(0,f().Yb)((async()=>{if(!D||!P||!(0,m().EY)(P.id))return;const e=D.parent_id;return I().callApi({eventName:"listExternalObjects",environment:M,data:{bot_id:e,pattern_name:T,query:s,collection_id:o.id}})}),[M,D,P,s,T,o],{debounce:2e3}),E=(0,me().X)("gdrive_scope_migration_gate"),N=(0,r().K8)((()=>{if(P&&s)return(0,le().WK)({integration:P,patternName:T,url:s})}),[T,P,s]),V=(0,r().K8)((()=>d.getPropertyStore(l)),[d,l]),W=(0,r().K8)((()=>null==o?void 0:o.getIcon()),[o]),z=(0,At().O)(),H=(0,wt()._)(),[O,K]=(0,n.useState)(!1),q=(0,n.useRef)(s);(0,n.useEffect)((()=>{if(q.current!==s){K(!0);const e=setTimeout((()=>{K(!1)}),300);return q.current=s,()=>clearTimeout(e)}}),[s]);const G={key:"githubPrRelationUserEducation",render:e=>void 0!==d&&(0,J.jsx)(uo,{pageBlockStore:d,blockPropertyValueOverlayStore:p}),items:[]},$={key:"googleDriveRelation",render:t=>(0,J.jsx)(ho,{onFileSelect:(t,o,n)=>{(0,St().SQ)({context:St().y$.ButtonMouseDown,callback:()=>{e.addPage(o,n)},event:t})}}),items:[]},Y={key:"figmaRelation",render:e=>(0,J.jsx)(Yt,{}),items:[]},Z={key:"salesforceRelation",render:e=>(0,J.jsx)(fo,{objectName:T}),items:[]},X={key:"slackRelation",render:e=>(0,J.jsx)(yo,{patternName:T}),items:[]},ee=(0,n.useMemo)((()=>{if(!P||!T||!(0,m().EY)(P.id))return[];const t="success"===(null==L?void 0:L.type)&&"data"in L.data?L.data.data:[];return Gt({environment:M,externalIntegrations:A,emojiData:H,searchTerm:s,searchQueryStatus:F,intl:j,theme:w,selectedExternalAuthentication:D,results:t,integration:P,patternName:T,addPage:e.addPage,showBriefLoader:O})}),[P,T,L,M,A,H,s,F,j,w,D,e.addPage,O]),te=(0,n.useMemo)((()=>{if("failed"===(null==L?void 0:L.type))return"Something went wrong"}),[L]);if(!V||!P)return(0,J.jsx)(nt().Ay,{type:nt().Oh.Vertical,style:{padding:"4px 0px"},initialFocus:0,sections:t});const oe="success"===(null==L?void 0:L.type)&&"error"in L.data&&401===L.data.error.status,ie=function(e){let{integration:t,selectedExternalAuthentication:o,botsForIntegration:n,requiresDoubleAuth:i}=e;if(i){const e=(0,m().eL)(t.id);return(null==o?void 0:o.integration_id)===e}if((0,m().mj)(t.id))return n.length>0;if(o)return!0;return!1}({integration:P,selectedExternalAuthentication:D,botsForIntegration:k,requiresDoubleAuth:B}),re=[];if(C&&re.push({key:"upsell",render:e=>(0,J.jsx)(xo,{integrationId:C}),items:[]}),!ie||oe){const e=function(e){const{collectionIcon:t,integration:o,environment:n,spaceId:i,isAdmin:r,userAllowedToAuth:a,externalIntegrations:s,requiresDoubleAuth:l,needsReauthentication:c}=e,d=o.id===m().ob,u=()=>{if(i){if(l){const e=s.find((e=>e.id===(0,m().eL)(o.id)));if(!e)return;kt().Jq({environment:n,integration:e,spaceId:i,from:"connected_relation_property_menu"})}else kt().Jq({environment:n,integration:o,spaceId:i,from:"connected_relation_property_menu"});It().A.reset()}},p=!d&&o.id!==m().io;if(p){if(e.environment.device.isMobile)return{key:"askUseBrowserOrDesktopForAuth",render:e=>(0,J.jsx)(Q().A,{...e,disableMobilePadding:!0,title:(0,J.jsx)("div",{style:{whiteSpace:"normal",paddingTop:8},children:(0,J.jsx)(b().sA,{defaultMessage:"Please authorize this integration in the browser or a desktop app.",id:"connectedRelationProperty.mobile.guide.title"})})}),items:[]};if(!a)return{key:"askGuestToGetMemberAccess",render:e=>(0,J.jsx)(Q().A,{...e,disableMobilePadding:!0,title:(0,J.jsx)("div",{style:{whiteSpace:"normal",paddingTop:8},children:(0,J.jsx)(b().sA,{defaultMessage:"To use {integration} integration, request the workspace admin to add you as a member",id:"connectedRelationProperty.guest.auth.guide",values:{integration:o.name}})})}),items:[]}}const g=!d||r&&a?{key:"authenticateButton",render:e=>(0,J.jsx)(U().A,{...e,title:c?(0,J.jsx)(b().sA,{defaultMessage:"Re-authenticate to {integration}",id:"connectedRelationPropertyMenuResults.reauthenticateButton.title",values:{integration:o.name}}):(0,J.jsx)(b().sA,{defaultMessage:"Connect to {integration}",id:"connectedRelationPropertyMenuResults.authenticateButton.title",values:{integration:o.name}}),icon:(0,J.jsx)(jt().Ay,{src:null==t?void 0:t.icon,style:{width:14}})}),action:()=>u()}:{key:"askAdminToAuthenticateButton",render:e=>(0,J.jsx)(U().A,{...e,title:(0,J.jsx)("div",{style:{whiteSpace:"normal"},children:(0,J.jsx)(b().sA,{defaultMessage:"Ask your workspace admin to configure the GitHub (Workspace) connection.",id:"connectedRelationPropertyMenuResults.askAdminToAuthenticateButton.title"})}),icon:(0,J.jsx)(jt().Ay,{src:null==t?void 0:t.icon,style:{width:14}}),hoveredStyle:{cursor:"default",background:void 0},pressedStyle:{background:void 0}}),action:()=>{}};return{key:"authenticateIntegration",render:e=>(0,J.jsx)(Q().A,{...e,disableMobilePadding:!0,title:(0,J.jsx)(b().sA,{defaultMessage:"Connect to {integration}",id:"connectedRelationPropertyMenuResults.authenticateHeader.title",values:{integration:o.name}})}),items:[g]}}({requiresDoubleAuth:B,environment:M,integration:P,externalIntegrations:A,collectionIcon:W,spaceId:z,isAdmin:R,userAllowedToAuth:_,needsReauthentication:oe});return(0,J.jsx)(nt().Ay,{type:nt().Oh.Vertical,style:{padding:"4px 0px"},initialFocus:0,sections:[...t,e,...re]})}function ae(){let e=(0,J.jsx)(b().sA,{id:"connectedRelationPropertyMenuResults.addPageButton.label",defaultMessage:"Link page"});return(null==P?void 0:P.id)===m().Hd||(null==P?void 0:P.id)===m().e1?e=(0,J.jsx)(b().sA,{id:"connectedRelationPropertyMenuResults.addFileButton.label",defaultMessage:"Link file"}):(null==P?void 0:P.id)===m().k0?e=(0,J.jsx)(b().sA,{id:"connectedRelationPropertyMenuResults.addTicketButton.label",defaultMessage:"Link ticket"}):(null==P?void 0:P.id)===m().ob?e=(0,J.jsx)(b().sA,{id:"connectedRelationPropertyMenuResults.addPRButton.label",defaultMessage:"Link PR"}):(null==P?void 0:P.id)===m().mn?e=(0,J.jsx)(b().sA,{id:"connectedRelationPropertyMenuResults.addRecordButton.label",defaultMessage:"Link Record"}):(null==P?void 0:P.id)===m().zG&&"slack_channel"===T?e=(0,J.jsx)(b().sA,{id:"connectedRelationPropertyMenuResults.addChannelButton.label",defaultMessage:"Link channel"}):(null==P?void 0:P.id)===m().zG&&(e=(0,J.jsx)(b().sA,{id:"connectedRelationPropertyMenuResults.addMessageButton.label",defaultMessage:"Link message"})),e}const se={key:"thirdPartySearchResults",render:e=>(0,J.jsx)(Q().A,{...e,disableMobilePadding:!0}),items:[{key:"addPage",render:e=>(0,J.jsx)(U().A,{...e,title:ae(),icon:(0,bt().b)({width:14}),right:(0,J.jsx)(b().sA,{id:"connectedRelationPropertyMenuResults.linkPageButton.enter",defaultMessage:"Enter"}),rightStyle:g.enterText}),action:t=>{(0,St().SQ)({event:t,context:St().y$.ButtonMouseDown,callback:()=>{e.addPage()}})}}]},ce={key:"noResultsFoundInThirdParty",render:e=>(0,J.jsx)(Q().A,{...e,disableMobilePadding:!0,title:(0,J.jsx)(b().sA,{defaultMessage:"No results found in {integration}.",id:"connectedRelationPropertyMenuResults.notMatched.help",values:{integration:P.name}})}),items:[]},de={key:"error",render:e=>(0,J.jsx)(Q().A,{...e,disableMobilePadding:!0,title:te}),items:[]},ue={key:"loadingSpinner",render:t=>(0,J.jsx)(Q().A,{...t,disableMobilePadding:!0,title:(0,J.jsxs)("div",{style:{...g.addingPage,justifyContent:e.addingPage?"center":"flex-start"},children:[(0,J.jsx)(tt().A,{}),(0,J.jsx)("span",{style:{marginLeft:10},children:(0,J.jsx)(b().sA,{id:"connectedRelationPropertyMenuResults.fetchingData",defaultMessage:"Fetching data..."})})]})}),items:[]},pe=[];return e.addingPage?pe.push(ue):y&&E?pe.push($):N?pe.push(se):te?pe.push(de):ee.length>0?pe.push(...ee):y?pe.push($):v?pe.push(Y):x?pe.push(Z):S?pe.push(X):h&&0===t.length?pe.push(G):h&&t.length>0||pe.push(ce),pe.push(...re),(0,J.jsx)(nt().Ay,{type:nt().Oh.Vertical,style:{padding:"4px 0px"},initialFocus:0,sections:[...t,...pe]})}function xo(e){const{integrationId:t}=e,o=(0,Ct().l)(t);return o?(0,J.jsx)(Mt().G2,{featureName:o,source:"collection_connected_property"}):null}function So(){return(0,J.jsx)("div",{style:{height:"100%",padding:Ne().iw,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,J.jsx)(tt().A,{style:{margin:"0 auto"}})})}function bo(e){const{collectionStore:t,targetCollectionStore:o,schema:n,property:i,showRight:a,disabled:s,style:l}=e,c=(0,r().K8)((()=>o.isSyncedCollection()),[o]),u=(0,r().K8)((()=>{const e=n[i];return Boolean(e&&d().UU(e))}),[n,i]);return(0,J.jsx)(Q().A,{...e,noTextOverflow:!0,right:a&&!c&&!u&&t&&(0,J.jsx)(ut().default,{collectionStore:t,targetCollectionStore:o,property:i,disabled:s}),style:{paddingTop:0,paddingBottom:4,...l},desktopTitleStyle:{height:19,alignItems:"center",marginTop:6,marginBottom:6,paddingLeft:12,paddingRight:9}})}const Co=function(e){const t=(0,r().uB)(void 0,o(970585).A),i=(0,r().uB)(void 0,o(170253).A),a=(0,Qe().ZC)(e.searchQuery);return(0,n.useEffect)((()=>{!e.searchQuery||(0,C().n4)(a,e.searchQuery)||ct().A.isMobile||t.setState({...t.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}),[t,a,e.searchQuery]),ct().A.isMobile?(0,J.jsx)(Lo,{relationPropertyMenuResultProps:e,menuListStore:t,draggableListStore:i}):(0,J.jsx)(Bo,{relationPropertyMenuResultProps:e,menuListStore:t,draggableListStore:i})};function Po(e,t){const o=t[e];return Boolean(o&&"relation"===o.type&&1===o.limit)}function ko(e){const{result:t,pointer:o,environment:n,relationPropertyMenuResultProps:i,canDragRow:r,isSharingEnabled:a,limitReached:s,propertyLimit:l}=e,{disabled:c,parentStore:d,collectionStore:u,collectionId:p,schema:g,targetCollectionStore:m,onAccept:h,property:f,propertySchema:y,blockPropertyValueOverlayStore:v,onClickActionButton:x,disableClickToNavigateToPage:S}=i,b=Ce().Bv.createChildStore(d,o);if((0,mt().X)(b))return;return{key:b.id,render:(e,i)=>{let{ref:h,...C}=e;const P=(0,J.jsx)(pt().q,{...C,canDrag:r,limitReached:s,collectionStore:u,collectionId:p,schema:g,targetCollectionStore:m,relatedPageStore:b,disabled:c,isSelected:t.type===Ne().M7.SelectedPage,pageStore:d,property:f,propertySchema:y,rowType:"popup",onActionButtonClick:()=>x(t),blockPropertyValueOverlayStore:v,propertyLimit:l,onOpenPageButtonClick:()=>{D().k({relationPointers:[o],relatedPageStore:b,environment:n,from:"relation_property"})},disableClickToNavigateToPage:S});return a?(0,J.jsx)(Mo,{originElement:P,pageStore:b,result:t,focused:C.focused,isSelected:t.type===Ne().M7.SelectedPage,onFocus:i.onFocus,onClickActionButton:x}):P},action:e=>{a&&t.type!==Ne().M7.SelectedPage||h(t,gt().Vr(e.event))}}}function Mo(e){let{originElement:t,pageStore:o,result:s,focused:l,onFocus:c,isSelected:d,onClickActionButton:u}=e;const p=(0,i().v3)(),g=(0,i().Y0)(),m=(0,xt().H)(),h=(0,r().K8)((()=>yt().dR({store:o,environment:p,trustedDomainsStore:m})),[o,p,m]),[f,y]=(0,n.useState)(!1),v=(0,a().IS)((e=>({unselectedHeader:{paddingRight:10,paddingLeft:10,paddingTop:6,paddingBottom:6,borderRadius:6,color:e.text.uiYellowPrimary,backgroundColor:e.tint.uiYellow,fontSize:14,fontWeight:400},selectedHeader:{paddingRight:8,paddingLeft:8,paddingTop:4,color:e.text.secondary,fill:e.icon.secondary,fontSize:14,fontWeight:400},pageTitleWrapper:{display:"inline",padding:2},icon:{display:"inline-block",marginRight:4,width:12,height:12},title:{display:"inline",overflow:"hidden",wordBreak:"break-word",textWrap:"balance",fontWeight:500},popupContainer:{padding:16,display:"flex",flexDirection:"column",height:"100%"},permissionsListContainer:{flex:1,overflow:"auto"},generalAccessPermissionListContainer:{borderTop:`0.5px solid ${e.darkDividerColor}`,paddingTop:8},confirmButton:{width:"100%"}})),[]);return g.isPhone?(0,J.jsxs)("div",{onClick:e=>{d||y(!0)},children:[t,(0,J.jsx)(G().Ay,{popupType:G().nl.SlideUp,enableOutsideClickDismiss:!0,onDismiss:()=>y(!1),open:f,style:{borderTopLeftRadius:24,borderTopRightRadius:24,maxHeight:"66%"},originRect:new DOMRect(0,0,0,0),render:()=>(0,J.jsxs)("div",{style:v.popupContainer,children:[(0,J.jsx)(ht().jV,{children:d?(0,J.jsx)("div",{style:v.selectedHeader,children:(0,J.jsx)(b().sA,{id:"relationPropertyMenu.sharingEnabled.permissionsList.selectedHeader",defaultMessage:"This task is currently shared with everyone who has access to {title}",values:{title:(0,J.jsxs)("div",{style:v.pageTitleWrapper,children:[(0,J.jsx)($().B6,{icon:o.getIcon(),iconRecordCategory:(0,$().Te)(o),isEmptyPage:!1,size:12,disabled:!0,style:v.icon}),(0,J.jsx)(Y().A,{store:o,style:v.title})]})}})}):(0,J.jsx)("div",{style:v.unselectedHeader,children:(0,J.jsx)(b().sA,{id:"relationPropertyMenu.sharingEnabled.permissionsList.unselectedHeader",defaultMessage:"By selecting this project, only the people below will have access to this task:"})})}),(0,J.jsx)("div",{style:v.permissionsListContainer,children:(0,J.jsx)(ft().default,{store:o,showFooter:!1,showPermissionInheritanceBanner:!1,calculatedPermissions:{...h,showRestrictedPermissionBanner:!1,showSitePublicPermission:!1,showPublicShareLinkPermission:!1,showTeamPermission:!0,showSpacePermission:!0},buttonPopupStore:void 0,permissionItemArgs:{location:"relation_menu",shouldDisable:!0}})}),(0,J.jsx)("div",{style:v.generalAccessPermissionListContainer,children:(0,J.jsx)(ft().GeneralAccessPermissionSection,{store:o,calculatedPermissions:h,permissionItemArgs:{location:"relation_menu",shouldDisable:!0}})}),(0,J.jsx)(it().A,{size:"lg",style:v.confirmButton,onClick:()=>u(s),children:(0,J.jsx)(b().sA,{id:"relationPropertyMenu.sharingEnabled.confirmButton",defaultMessage:"Confirm"})})]})})]}):(0,J.jsx)(st().A,{focused:l,onFocus:c,disableDefaultClick:!0,renderOrigin:(e,o)=>(0,J.jsx)(ot().Ay,{...e,ref:o,title:t,textWrapperStyle:{margin:0},showExtensionArrow:!1}),renderExtension:e=>(0,J.jsxs)("div",{...e,children:[(0,J.jsx)(ht().jV,{children:d?(0,J.jsx)("div",{style:v.selectedHeader,children:(0,J.jsx)(b().sA,{id:"relationPropertyMenu.sharingEnabled.permissionsList.selectedHeader",defaultMessage:"This task is currently shared with everyone who has access to {title}",values:{title:(0,J.jsxs)("div",{style:v.pageTitleWrapper,children:[(0,J.jsx)($().B6,{icon:o.getIcon(),iconRecordCategory:(0,$().Te)(o),isEmptyPage:!1,size:12,disabled:!0,style:v.icon}),(0,J.jsx)(Y().A,{store:o,style:v.title})]})}})}):(0,J.jsx)("div",{style:v.unselectedHeader,children:(0,J.jsx)(b().sA,{id:"relationPropertyMenu.sharingEnabled.permissionsList.unselectedHeader",defaultMessage:"By selecting this project, only the people below will have access to this task:"})})}),(0,J.jsx)(ft().default,{store:o,showFooter:!1,showPermissionInheritanceBanner:!1,calculatedPermissions:{...h,showRestrictedPermissionBanner:!1,showSitePublicPermission:!1,showPublicShareLinkPermission:!1,showTeamPermission:!0,showSpacePermission:!0},buttonPopupStore:void 0,permissionItemArgs:{location:"relation_menu",shouldDisable:!0}})]})})}function jo(e){const{canDrag:t,property:o,schema:n,totalRelatedPages:i}=e;return t&&!Po(o,n)&&i>1}function wo(e){const{numRelatedPages:t,integrationId:o,limit:n}=e;return 0!==t||o?n&&1===n?(0,J.jsx)(b().sA,{id:"database.relationProperty.relatedPages.limit.subHeader",defaultMessage:"Selected"}):o===m().Hd||o===m().e1?(0,J.jsx)(b().sA,{id:"database.relationProperty.relatedGoogleDriveOrFigmaFiles.subHeader",defaultMessage:"{count, plural, one {{count} linked file} other {{count} linked files}}",values:{count:t}}):o===m().ob?(0,J.jsx)(b().sA,{id:"database.relationProperty.relatedGithubPages.subHeader",defaultMessage:"{count, plural, one {{count} linked PR} other {{count} linked PRs}}",values:{count:t}}):o===m().mn?(0,J.jsx)(b().sA,{id:"database.relationProperty.relatedSalesforcePages.subHeader",defaultMessage:"{count, plural, one {{count} linked record} other {{count} linked records}}",values:{count:t}}):(0,J.jsx)(b().sA,{id:"database.relationProperty.relatedPages.subHeader",defaultMessage:"{count} selected",values:{count:t}}):(0,J.jsx)(b().sA,{id:"database.relationProperty.relatedPages.emptyList.subHeader",defaultMessage:"Select a page"})}function Ao(e){const{loading:t,numRelatedPages:o,numUnrelatedPages:n,limit:i}=e;if(!t||0!==o||0!==n)return 0===n?(0,J.jsx)(b().sA,{id:"database.relationProperty.noResults.subHeader",defaultMessage:"No results"}):0===o?void 0:i&&1===i?(0,J.jsx)(b().sA,{id:"database.relationProperty.changeSelection.subHeader",defaultMessage:"Change selection"}):(0,J.jsx)(b().sA,{id:"database.relationProperty.selectMore.subHeader",defaultMessage:"Select more"})}const Ro=(0,b().YK)({selected:{id:"database.relationProperty.sharing.selected.subHeader",defaultMessage:"Selected"},unselected:{id:"database.relationProperty.sharing.unselected.subHeader",defaultMessage:"Possible choices"}});function Io(e){const{targetCollectionStore:t,collectionStore:o,schema:n,property:i,canConfigureCollection:r,numRelatedPages:a,handleClearProperty:s,overlayMode:l,index:c,blockPropertyValueOverlayStore:d}=e;return{key:"backlog",render:e=>(0,J.jsx)(bo,{...e,collectionStore:o,schema:n,targetCollectionStore:t,property:i,showRight:0===a||"add"===(null==l?void 0:l.type),disabled:!r,style:{paddingBottom:0,paddingTop:0}}),items:[{key:"sprints_backlog",render:e=>(0,J.jsx)(dt,{focused:e.focused,onMouseEnter:e.onMouseEnter,targetCollectionStore:t,onClick:s,isSection:!1,index:c,blockPropertyValueOverlayStore:d}),action:()=>{s&&s()}}]}}function _o(e){let{relationPropertyMenuResultProps:t,menuListStore:o,draggableListStore:a}=e;const{results:s,onDrag:d,parentStore:u,collectionStore:p,targetCollectionStore:g,property:m,canDrag:h,canConfigureCollection:f,loading:y,onCreatePage:v,overlayMode:x,disabled:S,schema:C,searchQuery:P,index:k,handleClearProperty:M,blockPropertyValueOverlayStore:j,relationPropertyMenuStore:w,addPage:A,addingPage:R}=t,I=(0,i().v3)(),_=(0,n.useCallback)(((e,t)=>function(e,t,o,n){n&&n(e),Ze().pl({store:o,focus:{section:0,indexLocal:t.endPosition,indexGlobal:t.endPosition,footerFocused:!1}})}(e,t,o,d)),[o,d]),B=(0,b().tz)(),D=C[m],T=Boolean("relation"===(null==D?void 0:D.type)&&D.connectedRelation),L=(0,pe().D)(D),F=(0,r().K8)((()=>function(e,t,o){const n=e.getDatabaseType()===l().av;return t?{getCanDragRow:()=>!1,getRelatedSectionHeaderTitle:()=>o.formatMessage(Ro.selected),getUnrelatedSectionHeaderTitle:()=>o.formatMessage(Ro.unselected),getFooterSection:()=>{}}:n?{getCanDragRow:()=>!1,getRelatedSectionHeaderTitle:()=>{},getUnrelatedSectionHeaderTitle:()=>{},getFooterSection:Io}:{getCanDragRow:jo,getRelatedSectionHeaderTitle:wo,getUnrelatedSectionHeaderTitle:Ao,getFooterSection:()=>{}}}(g,L,B)),[L,g,B]),E=(0,r().K8)((()=>{var e;if(j.state.isOpen)return(0,c().hm)(D,null===(e=j.state.formQuestionStore)||void 0===e?void 0:e.getModel())}),[D,j]),[N,V]=(0,r().K8)((()=>{const e=[],o=[],n=s.filter((e=>e.type===Ne().M7.SelectedPage)).length;for(const i of s)if(i.type===Ne().M7.SearchPage){const e=i.store,r=Boolean(E&&n>=E);if(!e.isTemplate()){const n=ko({environment:I,isSharingEnabled:L,result:i,pointer:e.pointer,relationPropertyMenuResultProps:t,canDragRow:!1,limitReached:r,propertyLimit:E});n&&o.push(n)}}else if(i.type===Ne().M7.SelectedPage){const o=F.getCanDragRow({canDrag:h,property:m,schema:C,totalRelatedPages:n}),r=ko({environment:I,result:i,pointer:i.store.pointer,relationPropertyMenuResultProps:t,canDragRow:o,isSharingEnabled:L});r&&e.push(r)}return[e,o]}),[s,I,t,F,h,m,C,L,E]),W=(0,r().K8)((()=>g.getFormat().integration_id),[g]),U=F.getRelatedSectionHeaderTitle({numRelatedPages:N.length,integrationId:W,limit:E}),z=[],H=N.map((e=>e.key.toString())),O=!W&&V.length>0;(N.length>0||O)&&z.push({key:"results",render:e=>(0,J.jsx)(bo,{...e,title:U,collectionStore:p,schema:C,targetCollectionStore:g,property:m,showRight:"add"!==(null==x?void 0:x.type),disabled:!f,style:{paddingBottom:void 0===U?0:4},children:h&&!Po(m,C)&&H.length>1?(0,J.jsx)(Xe().Ay,{direction:"vertical",keys:H,renderKey:t=>e.children[H.indexOf(t)],onDrop:_,store:a}):e.children}),items:N});if(!T&&(0===V.length&&0===N.length||V.length>0)){const e=F.getUnrelatedSectionHeaderTitle({loading:y,numRelatedPages:N.length,numUnrelatedPages:V.length,limit:E}),t=!y&&0===V.length&&!ct().A.isMobile&&!T&&Boolean(null==P?void 0:P.trim());let o;t&&V.push({key:"empty",render:e=>(0,J.jsx)(ee,{targetCollectionStore:g,parentBlockStore:u,title:P||"",focused:e.focused,onClick:v,isSection:!1,index:k}),action:()=>{v&&v()}}),(t||void 0===e)&&(o={paddingBottom:0});const n={key:"unrelated",render:t=>(0,J.jsx)(bo,{...t,title:e,collectionStore:p,schema:C,targetCollectionStore:g,property:m,showRight:0===N.length||"add"===(null==x?void 0:x.type),disabled:!f,style:o}),items:V};"add"===(null==x?void 0:x.type)?z.unshift(n):z.push(n)}if(!ct().A.isMobile&&N.length>0&&!S){const e=F.getFooterSection({targetCollectionStore:g,collectionStore:p,schema:C,property:m,canConfigureCollection:f,numRelatedPages:N.length,handleClearProperty:M,overlayMode:x,index:k,blockPropertyValueOverlayStore:j});e&&z.push(e)}return T?(0,J.jsx)(vo,{blockPropertyValueOverlayStore:j,targetCollectionStore:g,sections:z,propertySchema:D,property:m,pageRecordStore:u,search:P,relationPropertyMenuStore:w,addPage:A,addingPage:R}):(0,J.jsx)(nt().Ay,{type:nt().Oh.Vertical,store:o,style:ct().A.isMobile?void 0:{padding:"8px 0px"},initialFocus:ct().A.isMobile?void 0:0,sections:z,resetInitialFocusOnSectionChangeAlways:!0})}function Bo(e){let{relationPropertyMenuResultProps:t,menuListStore:o,draggableListStore:n}=e;const{results:i,loading:r,onScrollOffsetChange:a}=t,s=0===i.length;return(0,J.jsxs)(rt().H,{style:{width:"100%",maxHeight:300,position:"relative",...s&&{marginTop:0}},type:vt().A.Y,children:[s&&r?(0,J.jsx)(Do,{}):void 0,(0,J.jsx)(_o,{relationPropertyMenuResultProps:t,menuListStore:o,draggableListStore:n}),a?(0,J.jsx)(at().A,{onChange:a}):void 0,r?(0,J.jsx)(To,{}):null]})}function Do(){const e=(0,a().IS)((e=>({sectionName:{height:12,borderRadius:4,width:"20%",marginTop:15,marginLeft:13,marginBottom:6}})),[]);return(0,J.jsx)(et().A,{style:e.sectionName})}const To=(0,n.memo)((function(e){const{count:t=10}=e,o=(0,a().IS)((e=>({wrapper:{marginRight:8,marginLeft:12},icon:{height:16,width:16,borderRadius:4},pageName:{height:15,borderRadius:4,marginLeft:-1}})),[]),n=Array.from({length:t},(()=>!0));return(0,J.jsx)("div",{style:o.wrapper,children:(0,J.jsx)(Je().VP,{gap:12,children:n.map(((e,t)=>(0,J.jsx)("div",{children:(0,J.jsxs)(Je().fI,{gap:8,alignItems:"center",children:[(0,J.jsx)(et().A,{style:o.icon}),(0,J.jsx)(et().A,{style:{...o.pageName,width:C().XM(["30%","40%","43%","45%","48%","50%","54%","55%","60%"])}})]})},`relation-result-shimmer-${t}`)))})})}));function Lo(e){let{relationPropertyMenuResultProps:t,menuListStore:o,draggableListStore:i}=e;const{results:r,loading:a,resultsType:s,schema:l,property:c,blockPropertyValueOverlayStore:d,targetCollectionStore:u,parentStore:p,searchQuery:g,relationPropertyMenuStore:m,addPage:h,addingPage:f}=t,y=0===r.length,v=l[c];return Boolean("relation"===(null==v?void 0:v.type)&&v.connectedRelation)&&y?(0,J.jsx)("div",{style:{marginTop:20},children:(0,J.jsx)(vo,{blockPropertyValueOverlayStore:d,targetCollectionStore:u,sections:[],propertySchema:v,property:c,pageRecordStore:p,search:g,relationPropertyMenuStore:m,addPage:h,addingPage:f})}):(0,J.jsxs)(n.Fragment,{children:[y&&!a&&"existing"===s?void 0:(0,J.jsx)(_o,{relationPropertyMenuResultProps:t,menuListStore:o,draggableListStore:i}),a?(0,J.jsx)(So,{}):void 0]})}const Fo=(0,o(340498).wt)("questionMarkFilled",{viewBox:"0 0 14 14",svg:(0,J.jsx)("path",{d:"M7 14C6.04379 14 5.14248 13.817 4.29608 13.451C3.45425 13.085 2.71078 12.5794 2.06569 11.9343C1.42059 11.2892 0.915033 10.5458 0.54902 9.70392C0.183007 8.85752 0 7.95621 0 7C0 6.04379 0.183007 5.14477 0.54902 4.30294C0.915033 3.45654 1.4183 2.71078 2.05882 2.06569C2.70392 1.42059 3.44739 0.915033 4.28922 0.54902C5.13562 0.183007 6.03693 0 6.99314 0C7.94935 0 8.85065 0.183007 9.69706 0.54902C10.5435 0.915033 11.2892 1.42059 11.9343 2.06569C12.5794 2.71078 13.085 3.45654 13.451 4.30294C13.817 5.14477 14 6.04379 14 7C14 7.95621 13.817 8.85752 13.451 9.70392C13.085 10.5458 12.5794 11.2892 11.9343 11.9343C11.2892 12.5794 10.5435 13.085 9.69706 13.451C8.85523 13.817 7.95621 14 7 14ZM6.86275 8.46863C7.04118 8.46863 7.18072 8.42059 7.28137 8.32451C7.38203 8.22386 7.43235 8.10261 7.43235 7.96078C7.43235 7.94706 7.43235 7.93333 7.43235 7.91961C7.43235 7.90131 7.43235 7.88758 7.43235 7.87843C7.43235 7.67712 7.49183 7.50556 7.61078 7.36373C7.72974 7.21732 7.91275 7.06405 8.1598 6.90392C8.50294 6.67974 8.78431 6.44412 9.00392 6.19706C9.22811 5.95 9.3402 5.61373 9.3402 5.18824C9.3402 4.79477 9.23497 4.46536 9.02451 4.2C8.81405 3.93007 8.53726 3.72647 8.19412 3.58922C7.85556 3.45196 7.48497 3.38333 7.08235 3.38333C6.46928 3.38333 5.97059 3.50458 5.58627 3.74706C5.20654 3.98954 4.96634 4.27549 4.86569 4.6049C4.84739 4.6598 4.83137 4.71699 4.81765 4.77647C4.8085 4.83595 4.80392 4.89543 4.80392 4.9549C4.80392 5.11046 4.85654 5.2317 4.96176 5.31863C5.06699 5.40098 5.17909 5.44216 5.29804 5.44216C5.41699 5.44216 5.51765 5.41699 5.6 5.36667C5.68235 5.31177 5.75556 5.24314 5.81961 5.16078L5.94314 4.98922C6.03007 4.85196 6.12843 4.73529 6.23824 4.63922C6.34804 4.54314 6.46928 4.46993 6.60196 4.41961C6.73464 4.36928 6.87876 4.34412 7.03431 4.34412C7.35458 4.34412 7.61078 4.42647 7.80294 4.59118C7.99967 4.75588 8.09804 4.9732 8.09804 5.24314C8.09804 5.48562 8.02255 5.68464 7.87157 5.8402C7.72059 5.99118 7.48954 6.17418 7.17843 6.38922C6.9268 6.56765 6.71634 6.76209 6.54706 6.97255C6.37778 7.18301 6.29314 7.46438 6.29314 7.81667C6.29314 7.83039 6.29314 7.84641 6.29314 7.86471C6.29314 7.87843 6.29314 7.89216 6.29314 7.90588C6.29314 8.28105 6.48301 8.46863 6.86275 8.46863ZM6.84216 10.5755C7.04804 10.5755 7.22647 10.5046 7.37745 10.3627C7.53301 10.2209 7.61078 10.0471 7.61078 9.84118C7.61078 9.63529 7.53529 9.46144 7.38431 9.31961C7.23333 9.1732 7.05261 9.1 6.84216 9.1C6.63627 9.1 6.45784 9.1732 6.30686 9.31961C6.15588 9.46601 6.08039 9.63987 6.08039 9.84118C6.08039 10.0471 6.15588 10.2209 6.30686 10.3627C6.46242 10.5046 6.64085 10.5755 6.84216 10.5755Z"})});var Eo=()=>o(365683),No=()=>o(919709),Vo=()=>o(755199),Wo=()=>o(285790),Uo=()=>o(676007),zo=()=>o(887480),Ho=()=>o(73332);function Oo(e){let{onConfirm:t,onClosed:o,currentBlockTitle:s,blockWithExistingRelationTitle:l,canAccessBlockWithExistingRelation:c}=e;const d=s?No().k4p(s):void 0,u=c&&l?No().k4p(l):void 0,p=(0,i().v3)(),g=(0,r().K8)((()=>{const{currentUserSettingsStore:e}=xe().default.state;return e}),[]),[m,h]=n.useState(!1),f=(0,Qe().wb)(m,100,((e,t)=>e===t));n.useEffect((()=>{if(!g)return;const e=f?Date.now():null;F().createAndCommit({environment:p,userAction:"twoWayWithLimitAddRelationConfirmationDialog.setDismissModalForever",canUndo:!0,perform:t=>{Vo().mJ({userSettingsStore:g,transaction:t,data:{relation_limit_confirmation_dialog_dismissed_at:e}})}})}),[f,g,p]);const y=(0,n.useCallback)((()=>{t(),o()}),[t,o]),v=(0,a().IS)((e=>({checkBoxContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:4,flexGrow:0,alignSelf:"center",marginTop:24,color:e.text.secondary,fontSize:14,lineHeight:"20px"},questionMarkButton:{display:"inline-block",width:14,height:14,marginLeft:4,paddingTop:2},questionMarkIcon:{fill:e.icon.secondary}})),[]),x=(0,b().tz)();return(0,J.jsx)(Uo().a,{open:!0,render:()=>(0,J.jsx)(J.Fragment,{children:(0,J.jsx)(zo().Ay,{width:300,title:(0,J.jsx)(b().sA,{defaultMessage:"Are you sure you want to link this page to {currentBlockTitleText}",id:"twoWayLimitAddRelationConfirmationDialog.title",values:{currentBlockTitleText:d}}),subtitle:(0,J.jsxs)(J.Fragment,{children:[c&&u?(0,J.jsx)(b().sA,{defaultMessage:"This will unlink it from {blockWithExistingRelationTitleText}.",id:"twoWayLimitAddRelationConfirmationDialog.subtitle",values:{blockWithExistingRelationTitleText:u}}):(0,J.jsx)(b().sA,{defaultMessage:"This will unlink it from another page in this database.",id:"twoWayLimitAddRelationConfirmationDialog.subtitleWithNoAccessToOtherPage"}),(0,J.jsx)(Ut().A,{renderTooltip:()=>(0,J.jsx)(b().sA,{defaultMessage:"Pages from this database can only be linked to one record.",id:"twoWayLimitAddRelationConfirmationDialog.tooltip.noAccess"}),render:e=>(0,J.jsx)(Wo().A,{...e,style:v.questionMarkButton,ariaLabel:x.formatMessage({defaultMessage:"Pages from this database can only be linked to one record.",id:"twoWayLimitAddRelationConfirmationDialog.subtitle.questionMark.ariaLabel"}),icon:Fo,iconStyle:v.questionMarkIcon})})]}),confirmText:(0,J.jsx)(b().sA,{defaultMessage:"Continue",id:"twoWayLimitAddRelationConfirmationDialog.primaryButton.text"}),onConfirm:y,onDismiss:o,radioOptions:[],icon:Eo().H,footer:(0,J.jsxs)("div",{style:v.checkBoxContainer,children:[(0,J.jsx)(Ho().T,{checked:m,onClick:()=>h(!m),size:14,id:"twoWayLimitAddRelationConfirmationDialog.doNotShowAgain"}),(0,J.jsx)("label",{htmlFor:"twoWayLimitAddRelationConfirmationDialog.doNotShowAgain",children:(0,J.jsx)(b().sA,{defaultMessage:"Don’t ask again",id:"twoWayLimitAddRelationConfirmationDialog.dontAskAgain.checkbox.label"})})]})})})})}function Ko(){const{blockStore:e,schema:t,property:o,format:a}=(0,n.useContext)(W().t),s=(0,i().v3)(),c=(0,n.useMemo)((()=>new(Oe().A)),[]),p=(0,r().K8)((()=>function(e){const{environment:t,blockStore:o,schema:n,property:i}=e;if(!o)return;const r=n[i];if("relation"!==(null==r?void 0:r.type))return;const a=d().Nv(r);if(!a)return;const s=Ce().md.createChildStore(o,a);if(!s)return;const l=s.getParentId();if(!l)return;const c=Ce().Bv.createChildStore(s,{table:v().ev,id:l});if(!c)return;const p=c.getCollectionViewStores().find((e=>{var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.id)===s.id})),m=c.isDefined()?ve().E2(t,c):void 0,h=(0,g().A)({pageId:c.id,pageModel:c.getModel(),baseUrl:m,collectionViewId:null==p?void 0:p.id,pageVisitSource:void 0});return{property:i,propertySchema:r,targetCollectionStore:s,targetParentUrl:h,connectedRelationFlags:{isSyncedCollectionRelation:s.isSyncedCollection(),isGithubPrRelation:u().di(r),isGoogleDriveRelation:u().H6(r),isFigmaRelation:u().KF(r),isZendeskRelation:u().up(r),isSalesforceRelation:u().V5(r),isSlackRelation:u().uv(r),isConnectedRelation:d().UU(r)}}}({environment:s,blockStore:e,schema:t,property:o})),[s,e,t,o]),m=(0,pe().D)(t[o]),h=(0,r().K8)((()=>null==p?void 0:p.targetCollectionStore.getDatabaseType()),[null==p?void 0:p.targetCollectionStore]),f=m?"sharing":h===l().av?"sprint":"default";return p?(0,J.jsx)(He,{relationPropertyMenuStore:c,property:p.property,propertySchema:p.propertySchema,targetCollectionStore:p.targetCollectionStore,targetParentUrl:p.targetParentUrl,connectedRelationFlags:p.connectedRelationFlags,children:(0,J.jsx)(z().A,{capture:!0,allowMenuList:!0,allowEsc:!0,allowUndo:!0,allowTabUntab:!0,render:()=>(0,J.jsx)(qo,{type:f})})}):(0,J.jsx)(Q().A,{children:(0,oe().NN)(a)?(0,J.jsx)(K().A,{title:(0,J.jsx)(b().sA,{defaultMessage:"You may not have access to the related database. Contact the form creator.",id:"database.relationPropertyMenu.formViewer.noAccess.message"})}):(0,J.jsx)(K().A,{title:(0,J.jsx)(b().sA,{defaultMessage:"You may not have access to the related database.",id:"database.relationPropertyMenu.noAccess.message"})})})}function qo(e){let{type:t}=e;const{blockStore:o,blockPropertyValueOverlayStore:a,collectionId:s,overlayMode:l,isDisabled:c,schema:d,property:u,insertChar:p,format:g,onChange:m,analyticsFrom:h}=(0,n.useContext)(W().t),y=(0,n.useContext)(ze),v=(0,i().v3)(),P=(0,i().Y0)(),k=(0,b().tz)(),M=(0,me().X)("db_ux_mobile"),w=(0,r().K8)((()=>null==y?void 0:y.relationPropertyMenuStore),[null==y?void 0:y.relationPropertyMenuStore]),A=Jo(),{relationSearchLimit:R,relationSearchQuery:I}=(0,r().K8)((()=>({relationSearchQuery:null==w?void 0:w.state.searchQuery,relationSearchLimit:null==w?void 0:w.state.searchLimit})),[w]);(0,n.useEffect)((()=>{w&&(0!==A.length||M&&P.isMobile||w.setState({searchPopupOpen:P.isMobile,searchQuery:p??"",searchLimit:Oe().A.limitIncrement,addingPage:!1}))}),[]);const _=Boolean(I&&I.length>0&&"sprint"!==t&&"sharing"!==t),B=(0,r().K8)((()=>(0,de().Er)(v).hasPublicAccessPermission),[v]),D=(0,r().K8)((()=>{const e=null==y?void 0:y.targetCollectionStore.getSpaceId();if(o&&e)return Ce().SL.createChildStore(o,{table:x().NX,id:e})}),[o,null==y?void 0:y.targetCollectionStore]),{results:T,isResultsLoading:L,fetchAdditionalServerResultsOnChange:F,searchSessionId:E,searchSessionFlowNumber:U}=(0,ge().W)({query:I??"",limit:R??20,type:S().Vz.BlocksInCollection,collectionId:(null==y?void 0:y.targetCollectionStore.id)??"",source:"relation_menu",filters:{includePublicPagesWithoutExplicitAccess:"form_viewer"===g},options:{disable:!_||!Boolean(null==y?void 0:y.targetCollectionStore.id),overrideSpaceStore:B?D:void 0}}),z="sprint"===t?We:Ve,{searchResults:H,searchSessionFlowNumber:O,isSearchLoading:K}=function(e){const{forceDisable:t,getSearchResults:o,searchSessionId:a}=e,{blockPointers:s,isDisabled:l}=(0,n.useContext)(W().t),c=(0,i().v3)(),d=(0,n.useContext)(ze),u=(0,n.useRef)(void 0),p=(0,te().Ks)(),g=(0,n.useRef)(0),{searchQuery:m,searchLimit:h}=(0,r().K8)((()=>({searchQuery:(null==d?void 0:d.relationPropertyMenuStore.state.searchQuery)??"",searchLimit:(null==d?void 0:d.relationPropertyMenuStore.state.searchLimit)??0})),[null==d?void 0:d.relationPropertyMenuStore]),[{status:y,value:v}]=(0,f().Yb)((async()=>{const e=u.current===m;if(u.current=m,l||t)return[];if(null==d||!d.propertySchema||null==d||!d.targetCollectionStore)return[];if(null!=d&&d.connectedRelationFlags.isConnectedRelation)return[];const n=function(e){let{targetCollectionId:t}=e;return we.get({key:t})}({targetCollectionId:d.targetCollectionStore.id})??[];if(!p)return await o({environment:c,query:{query:m,limit:h},targetCollectionStore:d.targetCollectionStore,propertySchema:d.propertySchema,blockPointers:s,pageIdsToBoost:n,searchSessionId:a});e||t||(g.current+=1);const i=p.relationResultsCacheStore.getState(),r=i.get(d.property)??{},f=r[m];if(!f||Date.now()-f.timestamp>Oe().A.resultsCacheTTL||f.results.length<h){const e=await o({environment:c,query:{query:m,limit:h},targetCollectionStore:null==d?void 0:d.targetCollectionStore,propertySchema:null==d?void 0:d.propertySchema,blockPointers:s,pageIdsToBoost:n,searchSessionId:a}),t=e.slice(0,h);return i.set(d.property,{...r,[m]:{timestamp:Date.now(),results:t}}),p.relationResultsCacheStore.emit(),e}const y=Ue({results:n,targetCollectionStore:d.targetCollectionStore,blockPointers:s});return C().Mp(y.concat(f.results),((e,t)=>e.key===t.key))}),[l,t,null==d?void 0:d.propertySchema,null==d?void 0:d.targetCollectionStore,null==d?void 0:d.connectedRelationFlags.isConnectedRelation,null==d?void 0:d.property,p,o,c,m,h,s,a],{debounce:ye().tu}),x=(0,r().K8)((()=>"pending"===y&&!Boolean(t)),[y,t]),S=(0,r().K8)((()=>{if(v)return v.filter((e=>{if(e.type===Ne().M7.NewPage)return!0;const{store:t}=e;return!0===t.getAlive()&&"none"!==t.getRole()}))}),[v]);return{searchResults:S,searchSessionFlowNumber:g.current,isSearchLoading:x}}({getSearchResults:z,forceDisable:_,searchSessionId:E}),q=(0,n.useRef)(A.length);(0,n.useEffect)((()=>{q.current=A.length}),[A]);const G=(0,n.useRef)(0);G.current=O+U;const $=(0,n.useRef)(E);(0,n.useEffect)((()=>{$.current=E,G.current=U}),[v,E,U]),(0,n.useEffect)((()=>((0,N().u)({environment:v,event:{eventName:"collections_relation_property_menu_open",eventProperties:{search_session_id:$.current,collection_id:s,target_collection_id:null==y?void 0:y.targetCollectionStore.id,relation_values_count:q.current,from:h}}}),()=>{(0,N().u)({environment:v,event:{eventName:"collections_relation_property_menu_close",eventProperties:{search_session_id:$.current,search_session_flow_number:G.current,relation_values_count:q.current}}})})),[v,h,s,null==y?void 0:y.targetCollectionStore.id]);const Y=(0,r().K8)((()=>T.map((e=>({type:Ne().M7.SearchPage,store:e.store,key:e.id})))),[T]),Q=(0,r().K8)((()=>(0,ce().w6)(v)),[v]),Z=I&&I.length>0&&"default"===t?Y:H,X=(0,n.useRef)(!0),ee=(0,n.useRef)(void 0);(0,n.useEffect)((()=>{if(Boolean(null==I?void 0:I.length))return;const e=K;!e||ee.current?!e&&ee.current&&Z&&(fe().default.measure(ee.current,{environment:v,data:{search_session_id:E,...X.current&&{search_session_flow_number:1}}}),X.current=!1,ee.current=void 0):ee.current=fe().default.mark("collection_relation_search_initial_results_loaded")}),[Z,v,E,null==I?void 0:I.length,K]);const ne=null==y?void 0:y.connectedRelationFlags.isConnectedRelation,re=!(((0,oe().NN)(g)&&Q||ne)??!1)&&"default"===t,[ae,se]=n.useState(null),le=(0,te().Ks)(),pe=(0,n.useMemo)((()=>{if(!ae)return null;const{blockWithExistingRelationTitle:e,currentBlockTitle:t,canAccessBlockWithExistingRelation:o}=ae;return(0,J.jsx)(Oo,{onConfirm:()=>{m(ae.update),h&&j(v,{from:h,...(0,ie().sl)(le),target_collection_id:null==y?void 0:y.targetCollectionStore.id}),1===(null==y?void 0:y.propertySchema.limit)&&(null==a||a.setState({isOpen:!1}))},onClosed:()=>{se(null)},currentBlockTitle:t,blockWithExistingRelationTitle:e,canAccessBlockWithExistingRelation:o})}),[h,a,ae,le,v,null==y?void 0:y.propertySchema.limit,null==y?void 0:y.targetCollectionStore.id,m]);if(!(y&&w&&d&&o&&a))return null;const he={searchSessionId:E,shouldShowShimmers:L||K,onScrollSearchHookFn:F,searchSessionFlowNumber:G.current},ve=(0,J.jsx)(Xo,{blockStore:o,searchResults:Z,isDefaultSearchLoading:K,searchHookData:{...he,...(v.device.isMobile||ne)&&{shouldShowShimmers:!1}},showChangeConfirmationDialog:se});if(P.isMobile){const e=(0,J.jsx)(Go,{blockStore:o,children:ve});return(0,oe().NN)(g)||M?e:(0,J.jsxs)(Yo,{showChangeConfirmationDialog:se,children:[e,pe]})}const xe=(0,ue().kg)(y.propertySchema);let Se;switch(t){case"sharing":Se=Te(k,{propertyName:y.propertySchema.name});break;case"sprint":Se=function(e){return e.formatMessage(Be.inputPlaceholder)}(k);break;default:Se=De({intl:k,connectedRelationFlags:y.connectedRelationFlags,overlayMode:l,disabled:c,format:g})}const be=(0,J.jsx)(Ye,{inputPlaceholder:Se,showTargetDatabase:re,addPage:()=>en({environment:v,menuStore:w,blockPropertyValueOverlayStore:a,blockStore:o,schema:d,property:u,targetCollectionStore:y.targetCollectionStore})});return(0,J.jsxs)(Qo,{header:xe?(0,J.jsx)(V().A,{featureName:xe,children:be}):be,footer:(0,J.jsx)(Zo,{hasSearchResults:Boolean(null==Z?void 0:Z.length)}),children:[ve,pe]})}function Go(e){const{blockStore:t,children:o}=e,i=(0,me().X)("db_ux_mobile"),{format:r,onDismiss:a}=(0,n.useContext)(W().t),s=(0,n.useContext)(ze);return(0,J.jsx)(O().A,{menuType:se().gu.Modal,title:(0,J.jsx)(b().sA,{defaultMessage:"Relation",id:"relationPropertyMenu.mobileRelationMenu.title"}),left:(0,J.jsx)(Z().A,{href:(0,ce().xS)("guides.relations"),analyticsFrom:"relation_menu"}),header:(0,J.jsx)($o,{blockStore:t}),...!i&&{right:(0,J.jsx)(q().DoneMenuText,{}),onClickRight:()=>(0,oe().NN)(r)?a():null==s?void 0:s.relationPropertyMenuStore.reset()},includeFixedHeaderSpacing:i,scrollerStyle:i?{paddingBottom:he().Hc}:void 0,children:o})}function $o(e){const{blockStore:t}=e,o=(0,b().tz)(),s=(0,i().v3)(),l=(0,i().Y0)(),c=(0,n.useContext)(ze),d=(0,pe().D)(),u=(0,me().X)("db_ux_mobile"),{overlayMode:p,isDisabled:g,format:m,onChange:h,blockPointers:f,insertChar:y}=(0,n.useContext)(W().t),v=(0,r().K8)((()=>(null==c?void 0:c.relationPropertyMenuStore.state.searchQuery)??y??""),[null==c?void 0:c.relationPropertyMenuStore,y]),x=(0,a().IS)((e=>({inputMenu:{...l.isAndroid&&{borderBottom:"none"}}})),[l.isAndroid]),S=(0,te().Ks)();if(!c)return null;const{relationPropertyMenuStore:C,targetCollectionStore:P,connectedRelationFlags:k,propertySchema:M}=c;let j;return j=d?Te(o,{propertyName:M.name}):De({connectedRelationFlags:k,overlayMode:p,disabled:g,format:m,intl:o}),(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(Q().A,{disableMobilePadding:!u,children:(0,J.jsx)(H().Ay,{value:v,disabled:g,onChange:e=>{const t=e.target.value;C.setState({...C.state,searchQuery:t,searchLimit:Oe().A.limitIncrement})},placeholder:j,showClearButton:!0,focusInitial:!0,style:x.inputMenu})}),!v||g||k.isConnectedRelation?void 0:(0,J.jsx)(Q().A,{children:(0,J.jsx)(ee,{targetCollectionStore:P,title:v,parentBlockStore:t,onClick:e=>tn({environment:s,collectionContextStore:S,relationPropertyMenuStore:C,blockPointers:f,onChange:h,index:e,propertySchema:M,targetCollectionStore:P}),focused:!1,isSection:!0})})]})}function Yo(e){const{children:t,showChangeConfirmationDialog:o}=e,{collectionStore:s,property:l,schema:c,blockStore:d,blockPropertyValueOverlayStore:u,isDisabled:p,canConfigureCollection:g,blockPointers:h,analyticsFrom:f,overlayMode:v,onChange:x,onDismiss:S,format:C}=(0,n.useContext)(W().t),P=(0,n.useContext)(ze),k=(0,i().v3)(),M=(0,te().Ks)(),j=Jo(),A=(0,a().IS)((e=>({input:{color:e.text.secondary},menuTitle:{display:"flex"},databaseIcon:{display:"flex",marginLeft:2*Ne().g1},databaseTitle:{marginLeft:Ne().g1},addPageButton:{display:"flex",alignItems:"center"},plusIcon:{marginRight:8,width:16,height:16}})),[]),R=(0,r().K8)((()=>null==P?void 0:P.targetCollectionStore.getIcon()),[null==P?void 0:P.targetCollectionStore]),I=(0,r().K8)((()=>{const e=Boolean(be().A.bots.state.find((e=>e.integration_id===m().ob))),t=Boolean(be().A.bots.state.find((e=>e.integration_id===m().Hd))),o=Boolean(be().A.bots.state.find((e=>e.integration_id===m().e1)));return(null==P?void 0:P.connectedRelationFlags.isGithubPrRelation)&&!e||(null==P?void 0:P.connectedRelationFlags.isGoogleDriveRelation)&&!t||(null==P?void 0:P.connectedRelationFlags.isFigmaRelation)&&!o}),[null==P?void 0:P.connectedRelationFlags.isGithubPrRelation,null==P?void 0:P.connectedRelationFlags.isGoogleDriveRelation,null==P?void 0:P.connectedRelationFlags.isFigmaRelation]),_=(0,r().K8)((()=>Boolean(null==P?void 0:P.relationPropertyMenuStore.state.addingPage)),[null==P?void 0:P.relationPropertyMenuStore]),B=(0,r().K8)((()=>Boolean(null==P?void 0:P.relationPropertyMenuStore.state.searchPopupOpen)),[null==P?void 0:P.relationPropertyMenuStore]),D=(0,pe().D)(c[l]);if(!(s&&d&&u&&P))return null;const{relationPropertyMenuStore:L,propertySchema:F,targetCollectionStore:E,targetParentUrl:N,connectedRelationFlags:{isConnectedRelation:V}}=P,z=(0,J.jsx)("div",{style:A.menuTitle,children:(0,J.jsx)(b().sA,{id:"database.relationProperty.newRelation.targetDatabase",defaultMessage:"<regular>In</regular> {databaseWithIcon}",values:{regular:e=>e,databaseWithIcon:(0,J.jsxs)("div",{style:A.databaseIcon,children:[(0,J.jsx)($().B6,{disabled:!0,icon:R,iconRecordCategory:"collection",isEmptyPage:!1,size:Ne().$w}),(0,J.jsx)(Y().A,{store:E,underline:!0,style:A.databaseTitle,maxLength:25})]})}})});return(0,J.jsxs)(O().A,{menuType:se().gu.Modal,title:F.name,right:(0,J.jsx)(b().sA,{defaultMessage:"Done",id:"relationPropertyMenu.mobileMenuDone.button"}),onClickRight:S,children:[V?void 0:(0,J.jsx)(Q().A,{disableMobilePadding:!0,children:(0,J.jsx)(U().A,{focused:!1,title:z,showExtensionArrow:!1,onClick:()=>function(e){const{environment:t,targetParentUrl:o,analyticsFrom:n}=e;T().oo({environment:t,url:o}),n&&w(t,{from:n})}({environment:k,targetParentUrl:N,analyticsFrom:f})})}),I?void 0:(0,J.jsx)(Q().A,{topBorder:!0,disableMobilePadding:!1,children:(0,J.jsx)(G().Ay,{popupType:G().nl.SlideUp,open:B,origin:(0,J.jsx)(U().A,{focused:!1,title:(0,J.jsxs)("span",{style:A.addPageButton,children:[(0,y().W)(A.plusIcon),D?(0,J.jsx)(b().sA,{defaultMessage:"Select {name}",id:"relationPropertyMenu.add.button",values:{name:F.name}}):(0,J.jsx)(b().sA,{defaultMessage:"Add a page",id:"relationPropertyMenu.addAPage.button"})]}),onClick:()=>{var e;(e=L).setState({...e.state,searchPopupOpen:!0,searchLimit:Oe().A.limitIncrement})},style:A.input}),render:()=>t,trapFocus:!1})}),(0,J.jsx)(Co,{collectionStore:s,collectionId:s.id,targetCollectionStore:E,results:j,resultsType:"existing",property:l,schema:c,propertySchema:F,parentStore:d,disabled:p,canConfigureCollection:g,loading:!1,canDrag:!1,blockPropertyValueOverlayStore:u,onAccept:(e,t)=>function(e){const{environment:t,analyticsFrom:o,result:n,openInNew:i}=e;n.type===Ne().M7.SelectedPage&&nn({environment:t,analyticsFrom:o,result:n,openInNew:i})}({environment:k,analyticsFrom:f,result:e,openInNew:t}),onClickActionButton:e=>on({environment:k,collectionContextStore:M,blockPropertyValueOverlayStore:u,result:e,blockPointers:h,onChange:x,analyticsFrom:f,overlayMode:v,propertySchema:F,targetCollectionStore:E,showChangeConfirmationDialog:o}),onCreatePage:e=>tn({environment:k,collectionContextStore:M,relationPropertyMenuStore:L,blockPointers:h,onChange:x,index:e,propertySchema:F,targetCollectionStore:E}),handleClearProperty:()=>x({newValues:[],oldValues:h}),relationPropertyMenuStore:L,addPage:(e,t)=>en({environment:k,menuStore:L,blockPropertyValueOverlayStore:u,blockStore:d,schema:c,property:l,targetCollectionStore:E,uri:e,overrideBotId:t}),addingPage:_,format:C})]})}function Qo(e){const{children:t,header:o,footer:i}=e,s=(0,n.useContext)(ze),l=(0,r().K8)((()=>{var e;const t=Boolean(be().A.bots.state.find((e=>e.integration_id===m().ob))),o=(null==s?void 0:s.connectedRelationFlags.isGoogleDriveRelation)||(null==s?void 0:s.connectedRelationFlags.isFigmaRelation)||(null==s?void 0:s.connectedRelationFlags.isZendeskRelation)||(null==s?void 0:s.connectedRelationFlags.isSalesforceRelation)||(null==s?void 0:s.connectedRelationFlags.isSlackRelation),n=null===(e=xe().default.state.currentSpaceStore)||void 0===e?void 0:e.canEdit();return(null==s?void 0:s.connectedRelationFlags.isGithubPrRelation)&&!t||o&&!n}),[null==s?void 0:s.connectedRelationFlags.isGithubPrRelation,null==s?void 0:s.connectedRelationFlags.isGoogleDriveRelation,null==s?void 0:s.connectedRelationFlags.isFigmaRelation,null==s?void 0:s.connectedRelationFlags.isZendeskRelation,null==s?void 0:s.connectedRelationFlags.isSalesforceRelation,null==s?void 0:s.connectedRelationFlags.isSlackRelation]),c=(0,a().IS)((e=>({menuContent:{overflow:"hidden",maxHeight:"70vh"}})),[]);return(0,J.jsx)(O().A,{menuType:se().gu.Popup,header:!l&&o,footer:i,children:(0,J.jsx)("div",{style:c.menuContent,children:t})})}function Zo(e){const{hasSearchResults:t}=e,o=(0,n.useContext)(ze),{blockPointers:a,onChange:s,overlayMode:l,isDisabled:c,insertChar:d,blockStore:u}=(0,n.useContext)(W().t),p=(0,i().v3)(),g=(0,te().Ks)(),m=(0,r().K8)((()=>(null==o?void 0:o.relationPropertyMenuStore.state.searchQuery)??d??""),[null==o?void 0:o.relationPropertyMenuStore,d]),h=Boolean(null==m?void 0:m.trim());if(!o)return null;const{relationPropertyMenuStore:f,propertySchema:y,targetCollectionStore:v}=o;return y.connectedRelation?null:!c&&v&&u&&h&&t?(0,J.jsx)(ee,{targetCollectionStore:v,title:m,parentBlockStore:u,onClick:e=>tn({environment:p,collectionContextStore:g,relationPropertyMenuStore:f,blockPointers:a,onChange:s,index:e,propertySchema:y,targetCollectionStore:v}),focused:!1,isSection:!0,index:"add"===(null==l?void 0:l.type)?null==l?void 0:l.index:void 0}):null}function Xo(e){const{blockStore:t,searchResults:o,isDefaultSearchLoading:a,searchHookData:{shouldShowShimmers:s,onScrollSearchHookFn:l,searchSessionId:c,searchSessionFlowNumber:d},showChangeConfirmationDialog:u}=e,{blockPointers:g,collectionStore:m,collectionId:f,property:y,schema:x,blockPropertyValueOverlayStore:S,isDisabled:b,canConfigureCollection:C,analyticsFrom:P,overlayMode:k,onChange:M,format:w,insertChar:A}=(0,n.useContext)(W().t),I=(0,n.useContext)(ze),_=(0,i().v3)(),B=(0,te().Ks)(),T=Jo(),{searchQuery:L,addingPage:F}=(0,r().K8)((()=>(null==I?void 0:I.relationPropertyMenuStore.state)??{searchQuery:A??"",addingPage:!1}),[null==I?void 0:I.relationPropertyMenuStore,A]),E=(0,r().K8)((()=>L?T.filter((e=>{const t=e.store,o=t.getModel();if(o)return(0,p().Pt)({block:o,query:L,getRecordModel:t.getRecordModel,userTimeZone:(0,h().P)(),schema:x,intl:ae().A.getIntl(),onlyPropertyIds:["title"]})})):T),[x,L,T]),V=(0,r().K8)((()=>!o&&0===E.length||s),[E.length,s,o]),U=(0,r().K8)((()=>t.getSpaceId()),[t]),z=n.useRef(void 0);n.useEffect((()=>{V&&""!==L&&(z.current=fe().default.mark("rum.relation_search_query"))}),[V,L]),n.useEffect((()=>{!V&&""!==L&&z.current&&(fe().default.measure(z.current,{environment:_,data:{search_session_id:c}}),z.current=void 0)}),[V,_,c,L]);const H=(0,n.useRef)(0);if(!S||!I)return null;const{relationPropertyMenuStore:O,propertySchema:K,targetCollectionStore:q}=I,G=[...E];o&&o.forEach((e=>{if((e.type===Ne().M7.SelectedPage||e.type===Ne().M7.SearchPage)&&E.find((t=>(t.type===Ne().M7.SelectedPage||t.type===Ne().M7.SearchPage)&&t.store.id===e.store.id)))return;const t=K.limit?g.slice(0,1):g,o=e.type!==Ne().M7.NewPage?t.map((e=>e.id)).includes(e.store.id):void 0;o&&!L&&"add"===(null==k?void 0:k.type)||(e.type===Ne().M7.SearchPage&&o?G.push({...e,type:Ne().M7.SelectedPage}):e.type!==Ne().M7.SelectedPage||o?G.push(e):G.push({...e,type:Ne().M7.SearchPage}))}));const $=G.filter((e=>e.type===Ne().M7.SearchPage)),Y=e=>{if(e.type===Ne().M7.SearchPage){const t=$.indexOf(e);if(-1===t)return;const o=1/(t+1);H.current+=1;const n={index:t,session_added_order:H.current,search_session_id:c,query_length:L.length,reciprocal_rank:o,search_session_flow_number:d};(0,N().u)({environment:_,event:{eventName:"collections_relation_search_item_click",eventProperties:n}}),Se().default.logEvent("collections_relation_search_mrr",o,n)}};return(0,J.jsx)(Co,{collectionStore:m,collectionId:f,targetCollectionStore:q,results:G,resultsType:0===G.length&&0===T.length?"existing":"search",property:y,schema:x,propertySchema:K,parentStore:t,disabled:b,canConfigureCollection:C,loading:V,canDrag:!b&&0===L.length&&!(0,oe().NN)(w),disableClickToNavigateToPage:(0,oe().NN)(w),blockPropertyValueOverlayStore:S,onAccept:(e,t)=>{!function(e){const{environment:t,collectionId:o,collectionContextStore:n,blockPointers:i,result:r,analyticsFrom:a,isDisabled:s,onChange:l,overlayMode:c,openInNew:d,propertySchema:u,targetCollectionStore:p,blockPropertyValueOverlayStore:g,showChangeConfirmationDialog:m}=e;if(s)return;if(!p||!u)return;const{mainEditorCurrentBlockStore:h}=xe().default.state;if(!h)return;if(r.type===Ne().M7.SearchPage){const e=r.store,s={newValues:u.limit?[r.store.pointer]:"add"===(null==c?void 0:c.type)?[...i.slice(0,c.index),e.pointer,...i.slice(c.index)]:[...i,e.pointer],oldValues:i};D().N({environment:t,store:g,update:s,collectionStore:null==n?void 0:n.collectionStore(),propertySchema:u}).then((e=>{var i,r;e?m(e):(l(s),a&&j(t,{from:a,collection_id:o,collection_view_id:null==n||null===(i=n.collectionViewStore())||void 0===i?void 0:i.id,collection_view_block_id:null==n||null===(r=n.collectionViewBlockStore())||void 0===r?void 0:r.id,target_collection_id:null==p?void 0:p.id}))})).catch((e=>{console.error(e)}))}else r.type===Ne().M7.SelectedPage&&nn({environment:t,analyticsFrom:a,result:r,openInNew:d})}({environment:_,collectionId:f,collectionContextStore:B,blockPointers:g,result:e,analyticsFrom:P,isDisabled:b,onChange:M,overlayMode:k,openInNew:t,propertySchema:K,targetCollectionStore:q,showChangeConfirmationDialog:u,blockPropertyValueOverlayStore:S}),e.type===Ne().M7.SearchPage&&Ae({targetCollectionId:q.id,pageId:e.store.id}),Y(e)},onClickActionButton:e=>{on({environment:_,collectionContextStore:B,blockPropertyValueOverlayStore:S,result:e,blockPointers:g,onChange:M,analyticsFrom:P,overlayMode:k,propertySchema:K,targetCollectionStore:q,showChangeConfirmationDialog:u}),e.type===Ne().M7.SearchPage&&Ae({targetCollectionId:q.id,pageId:e.store.id}),Y(e)},onScrollOffsetChange:e=>function(e){const{offsetFromBottom:t,store:o,isLoading:n,searchResults:i,onScrollSearchHookFn:r}=e,a=o.state.searchLimit+Oe().A.limitIncrement;if(t<Oe().A.incrementScrollOffset&&!n&&((null==i?void 0:i.length)??0)>=o.state.searchLimit){if(r)return void r(Oe().A.limitIncrement);o.setState({...o.state,searchLimit:a})}}({offsetFromBottom:e,store:O,isLoading:a,searchResults:o,onScrollSearchHookFn:l}),onDrag:e=>function(e){const{newPageIds:t,blockPointers:o,spaceId:n,onChange:i,analyticsFrom:r,environment:a}=e;i({newValues:t.map((e=>({id:e,spaceId:n,table:v().ev}))),oldValues:o}),r&&(0,R().F)(a,{from:r})}({environment:_,newPageIds:e,blockPointers:g,spaceId:U,onChange:M,analyticsFrom:P}),onCreatePage:e=>tn({environment:_,collectionContextStore:B,relationPropertyMenuStore:O,blockPointers:g,onChange:M,index:e,propertySchema:K,targetCollectionStore:q}),handleClearProperty:()=>M({newValues:[],oldValues:g}),searchQuery:L,overlayMode:k,relationPropertyMenuStore:O,addPage:(e,o)=>en({environment:_,menuStore:O,blockPropertyValueOverlayStore:S,blockStore:t,schema:x,property:y,uri:e,targetCollectionStore:q,overrideBotId:o}),addingPage:F,format:w})}function Jo(){const e=(0,n.useContext)(ze),{blockStore:t,blockPointers:o,overlayMode:i}=(0,n.useContext)(W().t),a=(0,r().K8)((()=>(null==e?void 0:e.relationPropertyMenuStore.state.searchQuery)??""),[null==e?void 0:e.relationPropertyMenuStore]);return(0,r().K8)((()=>t&&null!=e&&e.propertySchema&&null!=e&&e.targetCollectionStore&&(a||"add"!==(null==i?void 0:i.type))?u().bG({relationValue:o,propertySchema:null==e?void 0:e.propertySchema,getRecordModel:t.getRecordModel,includeNoAccess:!0}).map((e=>{const o=Ce().Bv.createChildStore(t,e);return{key:e.id,type:Ne().M7.SelectedPage,store:o}})):[]),[t,o,i,a,null==e?void 0:e.propertySchema,null==e?void 0:e.targetCollectionStore])}async function en(e){const{environment:t,menuStore:o,blockPropertyValueOverlayStore:n,blockStore:i,schema:r,property:a,uri:s,overrideBotId:l,targetCollectionStore:c}=e;if(!c)return;const d=await _().R.clipboardActions.load(),p=c.getFormat().integration_id,g=be().A.externalAuthentications.state.filter((e=>e.integration_id===p))[0],h=c.getFormat().pattern_name,f=be().A.integrations.state.find((e=>e.id===p)),y=i instanceof Ce().Bv?i:void 0,x=i instanceof Ce().Bv?i.getPropertyStore(a):void 0;o.setState({...o.state,addingPage:!0});try{var S;if(!f||!y||!x)return;const e=u().n(x.getValue()),i=s||o.state.searchQuery||"";if(!(0,le().WK)({integration:f,patternName:h,url:i}))return void B().ui({items:[{label:(0,J.jsx)(b().sA,{id:"connectedRelationPropertyMenuResults.unsupportedUrlErrorDialog.copyDebuggingInformation",defaultMessage:"Copy debugging information"}),color:"blue",onAccept:()=>{d.copyString({environment:t,stringValue:JSON.stringify({botId:null==g?void 0:g.parent_id,url:i},null,2),copiedMessage:d.clipboardMessages.copiedToClipboard})}},{label:(0,J.jsx)(b().sA,{id:"connectedRelationPropertyMenuResults.unsupportedUrlErrorDialog.closeButton",defaultMessage:"Close"}),onAccept:()=>{}}],showCancel:!1,keepFocus:!1,message:(0,J.jsx)(b().sA,{id:"connectedRelationPropertyMenuResults.unsupportedUrlErrorDialog.title",defaultMessage:"This source is currently not supported. Please try a different source."})});const p=r[a],C=u().di(p),j=C?x.id:void 0,w=u().H6(p),A=u().KF(p),R=u().up(p),_=u().sP(p),D=u().V5(p),T=u().uv(p),N=_&&Se().default.checkGate({gateName:"cron_connected_relation"}),V=R&&Se().default.checkGate({gateName:"zendesk_ai_enabled"}),W=D&&Se().default.checkGate({gateName:"salesforce_connected_relation"}),U=T&&Se().default.checkGate({gateName:"slack_connected_relation"}),z=(0,ne().jw)(f.id),H=(null==f?void 0:f.id)===m().ob?null===(S=z[0])||void 0===S?void 0:S.id:null==g?void 0:g.parent_id;let O=C||w||R||N||A||W||U?z.map((e=>e.id)):[H];w&&l&&(O=[l]);const K=await E().pP({environment:t,url:i,botIds:O,userDefinedExternalCollectionStore:c,relatedPageId:j});if(!K)return;const q=K.getSpaceId(),G=await(0,Pe().Se)(t,{name:"ai_usage",spaceId:q,userId:t.currentUser.id,amount:"unknown"});V&&G&&(I().callApi({eventName:"getZendeskTicketConversation",environment:t,data:{ticketUrl:i,spaceId:q,botId:O[0],pageId:x.id}}),(0,M().v)(t,"zendesk_unfurl_ai")),F().createAndCommit({userAction:"connectedRelationPropertyMenuResults.createRelationPage",environment:t,canUndo:!0,perform:o=>{const i={id:K.id,table:v().ev,spaceId:K.getSpaceId()},r=null!=p&&p.limit?[i]:[...e,i],s=u().Ap(r);L().R9({environment:t,store:x,value:s,transaction:o}),n&&n.state.isOpen&&n.state.collectionContextStore&&((0,P().E)({environment:t,collectionContextStore:n.state.collectionContextStore,block_id:y.id,property:a,property_type:"relation",from:"relation_section",isFromBulkActionsToolbar:!1,integration_id:f.id,action:"add",value_count:r.length}),k().v(t,{...(0,ie().sl)(n.state.collectionContextStore),from:"relation_menu",type:"page",integration_id:f.id,creating_block_id:y.id}))}}),o.reset()}finally{o.setState({...o.state,addingPage:!1})}}function tn(e){const{environment:t,collectionContextStore:o,relationPropertyMenuStore:n,blockPointers:i,onChange:r,index:a,propertySchema:s,targetCollectionStore:l}=e,c=null==l?void 0:l.getSpaceId(),d=null==s?void 0:s.limit,u=(0,re().zP)({environment:t,table:v().ev,spaceId:c}),p=u.id,g=d?[u]:a?[...i.slice(0,a),u,...i.slice(a)]:[...i,u];r({newPage:{id:p,spaceId:c,name:n.state.searchQuery},newValues:g,oldValues:i}),k().v(t,{...(0,ie().sl)(o),from:"relation_menu",type:"page",target_collection_id:null==l?void 0:l.id,new_page_id:p,creating_block_id:p})}function on(e){var t;const{environment:o,collectionContextStore:n,blockPropertyValueOverlayStore:i,result:r,blockPointers:a,onChange:s,analyticsFrom:l,overlayMode:d,propertySchema:u,targetCollectionStore:p,showChangeConfirmationDialog:g}=e,{mainEditorCurrentBlockStore:m}=xe().default.state;if(!m||!i.state.isOpen)return;const h=e=>{s(e),l&&j(o,{from:l,...(0,ie().sl)(n),target_collection_id:null==p?void 0:p.id}),v&&(null==i||i.setState({isOpen:!1}))},f=null==u?void 0:u.limit,y=(0,oe().NN)(i.state.format),v=y?(0,c().hm)(u,null===(t=i.state.formQuestionStore)||void 0===t?void 0:t.getModel()):f;if(r.type===Ne().M7.SearchPage){let e;if(1===v)e={newValues:[r.store.pointer],oldValues:a};else if(void 0===v||v&&a.length+1<=v){const t="add"===(null==d?void 0:d.type)?[...a.slice(0,d.index),r.store.pointer,...a.slice(d.index)]:[...a,r.store.pointer];e={newValues:t,oldValues:a}}e&&(y?h(e):D().N({environment:o,store:i,update:e,collectionStore:null==n?void 0:n.collectionStore(),propertySchema:u}).then((t=>{t?g(t):h(e)})).catch((e=>{console.error(e)})))}else if(r.type===Ne().M7.SelectedPage){const e=a.filter((e=>e.id!==r.store.id));h({newValues:e,oldValues:a})}}function nn(e){const{environment:t,result:o,openInNew:n,analyticsFrom:i}=e,{mainEditorCurrentBlockStore:r}=xe().default.state;if(!r)return;let a;const l=o.store;if(n){const e=l.isDefined()?ve().E2(t,l):void 0;a=(0,g().A)({pageId:l.id,pageModel:l.getModel(),baseUrl:e,pageVisitSource:s().y8.LinkInPage})}else{const e=r.isDefined()?ve().E2(t,r):void 0;a=(0,g().A)({pageId:r.id,pageModel:r.getModel(),baseUrl:e,peekViewBlockId:l.id,pageVisitSource:s().y8.LinkInPage})}T().oo({environment:t,url:a,openInNew:n}),i&&(0,A()._)(t,{from:i,meta_click:Boolean(n)})}},271084:(e,t,o)=>{o.d(t,{k:()=>i});o(581454);class n extends(()=>o(757695))().Store{getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}getSortedUserIds(){return Object.entries(this.state||{}).sort(((e,t)=>{let[o,n]=e,[i,r]=t;return r-n})).map((e=>{let[t,o]=e;return t}))}}const i=new n;(0,o(604341).exposeDebugValue)("UserSimilarityStore",i)},279900:(e,t,o)=>{function n(e){let t,o,n;return async function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t?(n=r,o||(o=t.then((()=>(o=void 0,t=e(...n),t))),o)):(t=e(...r),t)}}o.d(t,{A:()=>n})},283860:(e,t,o)=>{o.d(t,{A:()=>d});o(296540);var n=()=>o(484714),i=()=>o(401497),r=()=>o(148307),a=()=>o(959013),s=()=>o(284371),l=()=>o(132389),c=o(474848);function d(e){const t=(0,a().tz)(),o=function(e){const{isMobile:t}=(0,n().Y0)(),o=t?18:14,r=1,a=6,l=20;return(0,i().IS)((t=>({githubContainer:{display:"flex",alignSelf:"center",flexDirection:"column",width:e||"90%",padding:l,border:`${r}px solid ${t.tableDividerColor}`,borderRadius:a,borderBottomRightRadius:6,cursor:"default"},githubPrTitleRow:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:`calc(100% + ${l}px)`,overflow:"hidden"},githubPrTitle:{display:"inline-flex",fontSize:o,fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",background:t.whiteButtonBackground,padding:"2px 4px",borderTopLeftRadius:5,borderBottomLeftRadius:5,borderLeft:`2px solid ${t.blueColor}`,borderTop:`2px solid ${t.blueColor}`,borderBottom:`2px solid ${t.blueColor}`,width:"100%"},githubTask:{background:"light"===t.mode?t.palette.blue[50]:t.palette.blue[400]},githubPrInfoRow:{display:"inline-flex"},githubPrInfoPill:{display:"flex",flexDirection:"row",alignItems:"center",width:"fit-content",padding:"4px 10px",borderRadius:"2em",background:"#238636",flexShrink:0,...s().RC},githubPrInfoOpenText:{color:"white",fontSize:o-2,fontWeight:500},githubPrInfoMergeInto:{display:"inline-flex",alignItems:"center",fontSize:o-2,color:t.text.tertiary,...s().RC},githubPrInfoMain:{padding:"0px 4px",fontFamily:s().Tf.githubMono,background:t.cardPressedBackground,borderRadius:a,color:t.text.primary,verticalAlign:"text-bottom",...s().RC}})),[o,e])}(e.width),d=(0,c.jsx)("div",{id:"github-preview-github-pr-title-row",style:o.githubPrTitleRow,children:(0,c.jsxs)("div",{id:"github-preview-github-pr-title-wrapper",style:o.githubPrTitle,children:[(0,c.jsx)(l().A,{size:2}),"[",(0,c.jsxs)("div",{id:"github-preview-github-pr-task",style:o.githubTask,children:[e.uniqueIdPrefix||t.formatMessage(u.idPrefix),e.uniqueIdValue?`-${e.uniqueIdValue}`:"-1"]}),"]",(0,c.jsx)(l().A,{size:2}),t.formatMessage(u.prTitle)]})}),p=(0,c.jsxs)("div",{id:"github-preview-github-pr-info-row",style:o.githubPrInfoRow,children:[(0,c.jsxs)("div",{id:"github-preview-github-open-pr-pill",style:o.githubPrInfoPill,children:[(0,c.jsx)("img",{src:r().A.images.externalIntegrations.githubPullOpenIconWhitePng,style:{width:16,height:16}}),(0,c.jsx)(l().A,{size:2}),(0,c.jsx)("div",{style:o.githubPrInfoOpenText,children:t.formatMessage(u.open)})]}),(0,c.jsx)(l().A,{size:8}),(0,c.jsx)("div",{id:"github-preview-github-merge-into-main",style:o.githubPrInfoMergeInto,children:(0,c.jsxs)("span",{style:o.githubPrInfoMergeInto,children:[t.formatMessage(u.mergeInto),(0,c.jsx)(l().A,{size:4}),(0,c.jsx)("span",{style:o.githubPrInfoMain,children:t.formatMessage(u.main)})]})})]});return(0,c.jsxs)("div",{id:"github-preview-github-container",style:o.githubContainer,children:[d,(0,c.jsx)(l().A,{size:12}),p]})}const u=(0,a().YK)({idPrefix:{defaultMessage:"TASK",id:"database.viewSettings.githubConfigTab.preview.idPrefix"},prTitle:{defaultMessage:"GitHub PR Title",id:"database.viewSettings.githubConfigTab.preview.prTitle"},open:{defaultMessage:"Open",id:"database.viewSettings.githubConfigTab.preview.open"},mergeInto:{defaultMessage:"Merge into",id:"database.viewSettings.githubConfigTab.preview.mergeInto"},main:{defaultMessage:"main",id:"database.viewSettings.githubConfigTab.preview.main"}})},287531:(e,t,o)=>{o.d(t,{A:()=>a});var n=o(296540),i=o(474848);function r(e){const{pageName:t,targetCollectionStore:n,...r}=e,a=(0,o(484714).Y0)(),s=(0,o(56366).K8)((()=>n.getIcon()),[n]),l=(0,o(401497).IS)((e=>({medium:{color:e.text.secondary},dbName:{display:"flex",alignItems:"center",marginLeft:4},title:{marginLeft:o(246219).g1*(a.isRetina?.5:1)},icon:{width:16,fill:e.icon.secondary}})),[a.isRetina]),c=(0,i.jsxs)("div",{style:l.dbName,children:[(0,i.jsx)(o(187820).B6,{disabled:!0,icon:s,iconRecordCategory:"collection",isEmptyPage:!1,size:a.isMobile?24:20}),(0,i.jsx)(o(16006).A,{store:n,style:l.title})]});return(0,i.jsx)(o(760217).A,{title:(0,i.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,i.jsx)(o(959013).sA,{id:"database.searchRelation.createNewPageFooter",defaultMessage:"<medium>New</medium> {pageName} <medium> in</medium> {databaseNameWithIcon}",values:{medium:e=>(0,i.jsx)("span",{style:l.medium,children:e}),pageName:(0,i.jsx)("span",{style:{marginLeft:4,marginRight:4},children:t}),databaseNameWithIcon:c}})}),icon:(0,o(689094).W)(l.icon),...r})}const a=n.memo(r)},295870:(e,t,o)=>{o.d(t,{Jg:()=>l});o(898992),o(672577);var n=()=>o(232802),i=()=>o(762433),r=()=>o(979340),a=()=>o(807778),s=()=>o(920370);function l(e){var t;const{product:o,spaceId:l,userId:c,environment:d,billingData:u,spaceUserStore:p,spaceStore:g}=e;if(!o||!l||!c)return"not_eligible";if((0,i().eh)(u,o))return"product_already_available";const m=(0,n().rU)(o),h=function(e){const{billingData:t,environment:o,spaceUserStore:n,spaceStore:s}=e;if(!s||!n||!t)return!1;const l=(0,a().Gy)(o),c=s.getDisableMemberUpgradeRequests();if(!l)return!1;if(c)return!1;if(!(0,r().jR)((0,i().AI)(t)))return!1;if((0,i().et)(t))return!1;const d=Boolean(n.isMember()&&!n.isWorkspaceOwner());return d}({billingData:u,environment:d,spaceUserStore:p,spaceStore:g});if(!m||!h)return"not_eligible";const f=function(e){let{spaceId:t,environment:o}=e;if(!t)return;return s().L.getData(o,{spaceId:t})}({spaceId:l,environment:d});if(!f)return"not_eligible";const y=null===(t=f[o])||void 0===t?void 0:t.find((e=>e.created_by_id===c));return(null==y?void 0:y.request_status)||"unrequested"}},320865:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=o(474848);const i=function(){return(0,n.jsx)(o(678553).Ay,{title:(0,n.jsx)(o(331542).A,{})})}},367049:(e,t,o)=>{o.d(t,{X:()=>r});var n=()=>o(56366),i=()=>o(765957);function r(){return(0,n().K8)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:t}=i().default.state;if(!e||!t)return!1;const o=e.getMemberCountFromPublicSpaceData(),n=t.getWorkspacePages()??[];return 1===o&&0===n.length&&"personal"===e.getPlanType()}),[])}},380048:(e,t,o)=>{o.d(t,{I:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("chevronLeft",{viewBox:"0 0 16 16",directional:!0,svg:(0,n.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},381138:(e,t,o)=>{o.d(t,{q:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("search",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M.281 6.438c0-.875.164-1.696.492-2.461a6.484 6.484 0 011.375-2.032A6.237 6.237 0 016.64.078 6.2 6.2 0 019.11.57c.77.328 1.447.787 2.03 1.375a6.374 6.374 0 011.368 2.032c.333.765.5 1.586.5 2.46 0 .688-.107 1.342-.32 1.961a6.28 6.28 0 01-.868 1.696l3.563 3.578c.11.104.19.226.242.367.057.14.086.29.086.445 0 .22-.05.417-.149.594a1.122 1.122 0 01-1 .57c-.156 0-.307-.028-.453-.086a1.058 1.058 0 01-.382-.25l-3.586-3.585c-.5.333-1.047.596-1.641.789a6.089 6.089 0 01-1.86.28 6.237 6.237 0 01-2.468-.491 6.4 6.4 0 01-2.024-1.367A6.509 6.509 0 01.773 8.913a6.256 6.256 0 01-.492-2.476zm1.664 0c0 .65.12 1.26.36 1.828a4.775 4.775 0 001.015 1.5c.433.427.933.763 1.5 1.007a4.548 4.548 0 001.82.368c.652 0 1.261-.123 1.829-.368a4.747 4.747 0 002.508-2.507 4.567 4.567 0 00.367-1.829c0-.645-.123-1.252-.367-1.82a4.776 4.776 0 00-1.016-1.5A4.578 4.578 0 008.469 2.11a4.567 4.567 0 00-1.828-.367c-.646 0-1.253.123-1.82.367a4.667 4.667 0 00-1.5 1.008c-.433.432-.772.932-1.016 1.5a4.633 4.633 0 00-.36 1.82z"})})},400835:(e,t,o)=>{o.d(t,{D:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("personBadgeQuestionMark",{viewBox:"0 0 15 14",svg:(0,n.jsx)("path",{d:"M12.4551 5.41699C12.8037 5.41699 13.0088 5.19824 13.0088 4.93164V4.84961C13.0088 4.45996 13.2344 4.2207 13.7061 3.90625C14.3691 3.46875 14.8408 3.07227 14.8408 2.25195C14.8408 1.11719 13.8291 0.501953 12.667 0.501953C11.498 0.501953 10.7256 1.0625 10.5342 1.69141C10.5 1.80078 10.4795 1.91016 10.4795 2.02637C10.4795 2.33398 10.7188 2.49805 10.9443 2.49805C11.1836 2.49805 11.3271 2.38867 11.4502 2.22461L11.5732 2.06055C11.8125 1.66406 12.1748 1.43164 12.626 1.43164C13.248 1.43164 13.6514 1.78711 13.6514 2.30664C13.6514 2.77148 13.3643 2.99707 12.7695 3.41406C12.2773 3.75586 11.915 4.11816 11.915 4.78809V4.87695C11.915 5.23242 12.1064 5.41699 12.4551 5.41699ZM5.79004 6.99609C7.25293 6.99609 8.52441 5.68359 8.52441 3.97461C8.52441 2.28613 7.25293 1.03516 5.79004 1.03516C4.32715 1.03516 3.05566 2.31348 3.05566 3.98828C3.05566 5.68359 4.32031 6.99609 5.79004 6.99609ZM12.4414 7.4541C12.8379 7.4541 13.1797 7.13965 13.1797 6.74316C13.1797 6.34668 12.8447 6.03223 12.4414 6.03223C12.0381 6.03223 11.7031 6.35352 11.7031 6.74316C11.7031 7.13281 12.0449 7.4541 12.4414 7.4541ZM1.20312 13.3262H10.3701C11.1016 13.3262 11.5391 12.9844 11.5391 12.417C11.5391 10.6533 9.33105 8.21973 5.7832 8.21973C2.24219 8.21973 0.0341797 10.6533 0.0341797 12.417C0.0341797 12.9844 0.47168 13.3262 1.20312 13.3262Z"})})},404520:(e,t,o)=>{o.d(t,{R:()=>R});var n=o(296540),i=()=>o(484714),r=()=>o(56366),a=()=>o(959013),s=()=>o(58293),l=()=>o(324561),c=()=>o(523036),d=()=>o(803025),u=()=>o(341233),p=()=>o(340498),g=()=>o(493823),m=()=>o(208603),h=()=>o(964492),f=()=>o(554509),y=o(474848);function v(e){let{colorName:t,size:o,children:n}=e;const i="small"===o?"UISmall-12px/Semibold":"UIRegular-14px/Semibold";return(0,y.jsx)(f().D,{customStyles:{display:"contents"},colorName:t,styleName:i,children:n})}var x=()=>o(465570);function S(e){var t;const{upgradeStatus:o,handleClick:n,productDisplayName:i,customMessages:r,showPlanName:s}=e,l=(0,a().tz)(),c=(0,h().e)(o),d=null!=r&&r[o]?l.formatMessage(r[o]):c.label.icon({intl:l,productDisplayName:i}),u=(0,m().i9)(c),f=s?e.iconAlignment??"left":"left",{animationState:S,animationTriggers:b}=(0,m().lP)();return(0,y.jsx)(x().T,{tooltipMessage:(null===(t=c.disabledTooltip)||void 0===t?void 0:t.call(c,{intl:l}))??d,children:(0,y.jsx)(g().p,{...b,disabled:Boolean(c.disabledTooltip),size:"xs",iconLeading:"left"===f?e=>(0,m().sH)({icon:c.icon,style:{...e,marginRight:s?4:0},animationState:S}):void 0,iconTrailing:"right"===f?e=>(0,m().sH)({icon:c.icon,style:{...e,marginLeft:2},animationState:S}):void 0,iconStyle:{...u,width:p().Ev.xs,height:p().Ev.xs},onClick:n,children:s&&i?(0,y.jsx)("span",{style:{padding:1},children:(0,y.jsx)(v,{colorName:c.highlightColor,size:"small",children:i})}):null})})}var b=()=>o(864943),C=()=>o(625634);function P(e){var t;const{upgradeStatus:o,handleClick:n,size:i="default",width:r="fill",productDisplayName:s}=e,l=(0,a().tz)(),c=(0,h().e)(o),d=c.label.button({intl:l}),u=Boolean(c.disabledTooltip),p=(0,m().i9)(c,i),{animationState:g,animationTriggers:f}=(0,m().lP)();return(0,y.jsx)(x().T,{tooltipMessage:u?null===(t=c.disabledTooltip)||void 0===t?void 0:t.call(c,{intl:l,productDisplayName:s}):void 0,children:(0,y.jsx)(b().A,{...f,disabled:u,size:C()._[i],iconLeading:e=>(0,m().sH)({icon:c.icon,style:e,animationState:g}),iconStyle:p,style:{width:"fill"===r?"100%":void 0},onClick:n,children:d})})}var k=()=>o(204063);function M(e){var t;const{upgradeStatus:o,handleClick:n,productDisplayName:i}=e,r=(0,a().tz)(),s=(0,h().e)(o),l=s.label.button({intl:r}),c=Boolean(s.disabledTooltip);return(0,y.jsx)(x().T,{tooltipMessage:c?null===(t=s.disabledTooltip)||void 0===t?void 0:t.call(s,{intl:r,productDisplayName:i}):void 0,children:(0,y.jsx)(k().A,{disabled:c,size:C()._.default,onClick:n,children:l})})}function j(e){const{upgradeStatus:t,handleClick:o,customMessages:n,productDisplayName:i,size:r="default"}=e,s=(0,a().tz)(),l="small"===r?"secondary":"primary",c=e.textColor??l,d=(0,h().e)(t),u=(0,m().i9)(d,r),p=null!=n&&n[t]?s.formatMessage(n[t],{highlight:e=>(0,y.jsx)(v,{colorName:d.highlightColor,size:r,children:e})}):d.label.text({intl:s,productDisplayName:i,renderTextHighlight:e=>(0,y.jsx)(v,{colorName:d.highlightColor,size:r,children:e})}),x=Boolean(d.disabledTooltip),{animationState:S,animationTriggers:b}=(0,m().lP)();return(0,y.jsx)(g().p,{disabled:x,...b,size:"small"===r?"xs":"md",iconLeading:e=>(0,m().sH)({icon:d.icon,style:{...e,marginRight:"small"===r?6:8},animationState:S}),iconStyle:u,onClick:o,children:(0,y.jsx)(f().D,{colorName:c,children:p})})}var w=()=>o(153861),A=()=>o(414236);function R(e){let{source:t,upsell:o,featureName:p,...g}=e;const m=(0,a().tz)(),h=(0,s().r)(),f=(0,i().v3)(),v=(0,d().q)(),x=(0,l()._3)({spaceId:null==h?void 0:h.id}),b=(0,c().R)(t),C=(0,r().K8)((()=>{var e;return null===(e=f.currentUser)||void 0===e?void 0:e.id}),[f]),[k,R]=(0,A().h)({upsell:o}),I=(0,r().K8)((()=>(0,w().a)({environment:f,upsell:o,spaceStore:h,salesStatus:v,offer:b,requestState:k})),[h,f,o,v,b,k]),_=n.useCallback((async()=>{const e="product"===o.type?o.product:void 0,{getUpgradeSystemAction:n}=await u().H.upgradeSystemActions.load(),i=n(I);await i({source:t,spaceStore:h,product:e,billingData:x,environment:f,setRequestState:R,userId:C})}),[I,C,t,h,o,x,f,R]),B=(0,w().T)({upsell:o,intl:m});if(!I)return null;switch(g.display){case"button":return(0,y.jsx)(P,{upgradeStatus:I.status,handleClick:_,productDisplayName:B,...g});case"icon":return(0,y.jsx)(S,{upgradeStatus:I.status,handleClick:_,productDisplayName:B,...g});case"text":return(0,y.jsx)(j,{upgradeStatus:I.status,handleClick:_,productDisplayName:B,...g});case"primary":return(0,y.jsx)(M,{upgradeStatus:I.status,handleClick:_,productDisplayName:B,...g})}}},406533:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>i,questionMarkCircleIcon:()=>r});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},r=(0,o(340498).wt)("questionMarkCircle",i)},413267:(e,t,o)=>{o.d(t,{b:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("thinCheck",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M6.385 14.162c.362 0 .642-.15.84-.444L13.652 3.71c.144-.226.205-.417.205-.602 0-.485-.341-.82-.833-.82-.335 0-.54.123-.746.444l-5.926 9.4-3.042-3.903c-.205-.267-.417-.376-.718-.376-.492 0-.848.348-.848.827 0 .212.075.417.253.629l3.541 4.416c.24.3.492.437.848.437z"})})},414236:(e,t,o)=>{o.d(t,{h:()=>d});var n=o(296540),i=()=>o(484714),r=()=>o(56366),a=()=>o(58293),s=()=>o(646736),l=()=>o(324561),c=()=>o(295870);function d(e){const{upsell:t}=e,o=(0,i().v3)(),d=(0,a().r)(),u=(0,s().HI)(),p=null==d?void 0:d.id,g=(0,r().K8)((()=>{var e;return null===(e=o.currentUser)||void 0===e?void 0:e.id}),[o]),m=(0,l().f_)({spaceId:p}),h="product"===(null==t?void 0:t.type)?t.product:void 0,f=(0,r().K8)((()=>(0,c().Jg)({product:h,spaceId:p,userId:g,billingData:m,environment:o,spaceStore:d,spaceUserStore:u})),[h,p,g,m,o,d,u]),[y,v]=(0,n.useState)(f);return[y,v]}},425736:(e,t,o)=>{o.d(t,{s:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("privateTeam",{viewBox:"0 0 28 28",svg:(0,n.jsx)("path",{d:"M20.6455 21.2744C20.9092 21.5469 21.3311 21.5645 21.6035 21.2744C21.8936 20.9844 21.8672 20.5889 21.6035 20.3164L6.9082 5.62988C6.64453 5.36621 6.21387 5.36621 5.94141 5.62988C5.68652 5.88477 5.68652 6.33301 5.94141 6.58789L20.6455 21.2744ZM13.8076 6.13086C12.2783 6.13086 10.8896 6.39453 9.59766 6.8252L10.7578 7.97656C11.7246 7.68652 12.7178 7.51953 13.8076 7.51953C19.5908 7.51953 24.2754 12.6172 24.2754 13.6631C24.2754 14.375 22.7373 16.291 20.3027 17.7852L21.3838 18.8662C24.1611 17.0645 25.8135 14.7002 25.8135 13.6631C25.8135 11.8613 20.9092 6.13086 13.8076 6.13086ZM13.8076 21.1953C15.4424 21.1953 16.9365 20.9053 18.2988 20.4395L17.1475 19.2881C16.1016 19.6133 14.9941 19.8066 13.8076 19.8066C8.01562 19.8066 3.33105 14.9023 3.33105 13.6631C3.33105 13.0479 4.95703 11 7.5498 9.44434L6.45996 8.35449C3.5332 10.165 1.79297 12.5996 1.79297 13.6631C1.79297 15.4561 6.79395 21.1953 13.8076 21.1953ZM18.3164 15.5879C18.5889 14.999 18.7383 14.3398 18.7383 13.6631C18.7383 10.9121 16.541 8.74121 13.8076 8.74121C13.1133 8.74121 12.4629 8.89062 11.874 9.14551L18.3164 15.5879ZM13.8076 18.585C14.5811 18.585 15.3105 18.3916 15.9609 18.0752L9.36914 11.4834C9.04395 12.1338 8.85938 12.8721 8.85938 13.6631C8.86816 16.3438 11.0566 18.585 13.8076 18.585Z"})})},444091:(e,t,o)=>{o.d(t,{A:()=>te,a:()=>ee});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(581454);var n=o(296540),i=()=>o(484714),r=()=>o(56366),a=()=>o(401497),s=()=>o(187174),l=()=>o(513416),c=()=>o(738418),d=()=>o(381138),u=()=>o(84262),p=()=>o(462853),g=()=>o(959013),m=()=>o(381349),h=()=>o(778078),f=()=>o(534177),y=()=>o(939768),v=()=>o(559926),x=()=>o(449506),S=()=>o(884107),b=()=>o(686526),C=()=>o(901389),P=()=>o(633457),k=()=>o(56394),M=()=>o(760217),j=()=>o(419357),w=()=>o(331542),A=()=>o(939740),R=()=>o(204063),I=()=>o(2143),_=()=>o(89924),B=()=>o(859428),D=()=>o(572088),T=()=>o(476492),L=()=>o(972435),F=()=>o(553965),E=()=>o(817126),N=()=>o(962730),V=()=>o(756279),W=()=>o(765957),U=()=>o(53137),z=()=>o(284371),H=()=>o(125565),O=o(474848);function K(e){const{onClick:t,integration:o,accountName:n}=e,i=(0,a().IS)((e=>({accountSelection:{padding:"8px",borderTop:`1px solid ${e.regularDividerColor}`,cursor:"pointer"},accountSelectionLabel:{fontWeight:z().Wy.medium,paddingLeft:4,paddingTop:4}})),[]);return(0,O.jsx)("div",{style:i.accountSelection,children:(0,O.jsxs)("div",{onClick:t,children:[(0,O.jsx)(H().A,{isSecondaryColor:!0,isSmall:!0,style:i.accountSelectionLabel,children:(0,O.jsx)(g().sA,{id:"collectionSettingsCreateExternalViewPicker.currentAccountSection.label",defaultMessage:"Connected to {integration}",values:{integration:o.name}})}),(0,O.jsx)(B().A,{renderTooltip:()=>(0,O.jsx)("span",{children:n}),placement:N().W.Left,textWrap:!0,render:t=>(0,O.jsx)(M().A,{showExtensionArrow:!0,focused:!1,...(0,F().A)(t||{},e),title:n,icon:(0,O.jsx)("img",{style:{width:18},src:o.info.icon})})})]})})}var q=()=>o(14959),G=()=>o(510683),$=()=>o(493823),Y=()=>o(187820),Q=()=>o(47170),Z=()=>o(444768),X=()=>o(735695);function J(e){const{collectionContextStore:t,integration:o}=e,n=(0,a().DP)(),s=(0,r().K8)((()=>t.collectionStore()),[t]),l=(0,r().K8)((()=>null==s?void 0:s.getIcon()),[s]),c=(0,i().v3)(),d=(0,Q().O)(),u=(0,a().IS)((e=>({settingsMenu:{display:"flex",flexGrow:1,flexDirection:"column",padding:"8px 16px 16px 8px"},authenticationBody:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:"0px 16px 16px 16px",textAlign:"center"},settingsMenuSubHeading:{display:"inline",fontSize:14,margin:"4px 20px 20px 20px",color:e.text.secondary,textAlign:"center"},settingsMenuAuthenticationButton:{fontSize:14,height:32,color:e.text.contrastPrimary}})),[]),{background:p,hoveredBackground:m,pressedBackground:h}=(0,q().u)(o,n.mode);return(0,O.jsx)(X().Ay,{...e,title:(0,O.jsx)(g().sA,{defaultMessage:"Connect to {integration}",id:"collectionSettingsCreateExternalViewPicker.authenticateHeader.title",values:{integration:o.name}}),children:(0,O.jsx)("div",{style:u.settingsMenu,children:(0,O.jsxs)("div",{style:u.authenticationBody,children:[(0,O.jsx)(Y().B6,{disabled:!0,bucket:"secure",store:s,icon:l,iconRecordCategory:"collection",size:40,isEmptyPage:!1,style:{marginBottom:6}}),(0,O.jsx)("div",{style:u.settingsMenuSubHeading,children:(0,O.jsx)(g().sA,{defaultMessage:"Link your {integration} account for richer content previews and seamless imports.",id:"collectionSettingsCreateExternalViewPicker.authenticateBody.title",values:{integration:o.name}})}),(0,O.jsx)($().p,{onClick:()=>{d&&(G().Jq({environment:c,integration:o,spaceId:d,from:"placeholder_root_external_collection_view_block"}),Z().A.reset())},style:{background:p,...u.settingsMenuAuthenticationButton},hoveredStyle:{background:m},pressedStyle:{background:h},children:(0,O.jsx)(g().sA,{defaultMessage:"Connect to {integration}",id:"collectionSettingsCreateExternalViewPicker.authenticateButton.title",values:{integration:o.name}})})]})})})}function ee(e){const{collectionSettingsStore:t,collectionContextStore:o,externalAuthentication:n}=e,i=(0,r().K8)((()=>o.collectionStore()),[o]),a=(0,r().K8)((()=>{if(!i)return;const e=i.getFormat().integration_id;return U().A.integrations.state.find((t=>t.id===e))}),[i]),s=(0,r().K8)((()=>!!a&&(0,D().jw)(a.id).length>0),[a]),l=(0,r().K8)((()=>{var e;return null===(e=W().default.state.currentSpaceStore)||void 0===e?void 0:e.canEdit()}),[]);if(!a)return null;if(!i)return null;if(!l)return null;const c=s?(0,O.jsx)(ie,{...e,collectionContextStore:o,collectionSettingsStore:t,integration:a,externalAuthentication:n}):(0,O.jsx)(J,{...e,collectionContextStore:o,collectionSettingsStore:t,integration:a}),d=(0,p().l)(null==a?void 0:a.id);return d?(0,O.jsx)(te,{featureName:d,children:c}):c}function te(e){const{children:t,featureName:o}=e,n=(0,E().G9)({featureName:o});return(0,u().e2)(n)?t:null}function oe(e){var t;return null===(t=e.integration.info)||void 0===t||null===(t=t.original_url_patterns)||void 0===t?void 0:t.filter((e=>{var t;return null===(t=e.additional_types)||void 0===t?void 0:t.collection})).find((t=>{let{regex:o}=t;return new RegExp(o).test(e.url)}))}const ne=(0,g().YK)({all:{id:"collectionSettingsCreateExternalViewPicker.filters.all",defaultMessage:"All"},issues:{id:"collectionSettingsCreateExternalViewPicker.filters.issues",defaultMessage:"Issues"},pull_requests:{id:"collectionSettingsCreateExternalViewPicker.filters.pullRequests",defaultMessage:"Pull Requests"},board:{id:"collectionSettingsCreateExternalViewPicker.filters.boards",defaultMessage:"Boards"},project:{id:"collectionSettingsCreateExternalViewPicker.filters.projects",defaultMessage:"Projects"},Releases:{id:"collectionSettingsCreateExternalViewPicker.filters.releases",defaultMessage:"Releases"},"Pull Request":{id:"collectionSettingsCreateExternalViewPicker.filters.PullRequests",defaultMessage:"Pull Requests"},Issues:{id:"collectionSettingsCreateExternalViewPicker.filters.Issues",defaultMessage:"Issues"}});function ie(e){const{integration:t,collectionContextStore:o,collectionSettingsStore:u,externalAuthentication:p}=e,[E,W]=(0,n.useState)(""),z=(0,r().K8)((()=>{const e=U().A.state;return e.loaded?e.externalAuthentications.filter((e=>e.integration_id===t.id)):[]}),[t]),H=(0,r().K8)((()=>p||(z.length?z[0]:null)),[z,p]),[q,G]=(0,n.useState)(!1),[$,Y]=(0,n.useState)(null),Q=(0,a().IS)((e=>({settingsMenu:{display:"flex",flexGrow:1,flexDirection:"column",padding:"8px"},settingsMenuSearchBox:{background:e.contentBackground,marginBottom:10},syncSourceButton:{width:"100%",display:"flex",justifyContent:"center"},noResults:{width:"100%",paddingBottom:10,display:"flex",justifyContent:"center",fontSize:14,color:e.text.secondary},suggestionBox:{display:"flex",alignItems:"center",fontSize:12,color:m().Ay.white,background:m().Ay.blue,borderRadius:6,padding:10,boxShadow:e.shadowMD,alignSelf:"center",maxWidth:"80%"},errorMessage:{alignSelf:"center",padding:10,fontSize:14,color:e.errorText},syncingData:{width:"100%",paddingBottom:10,display:"flex",justifyContent:"center",fontSize:14,color:e.text.secondary},filterContainer:{position:"relative",flexGrow:0,overflow:"hidden"},filterContainerScroller:{display:"flex",alignItems:"center",padding:"8px 12px"}})),[]),Z=(0,r().K8)((()=>o.collectionStore()),[o]),ee=(0,r().K8)((()=>o.collectionViewBlockStore()),[o]),te=(0,i().v3)(),[{value:ie,status:re}]=(0,s().Yb)((async()=>{if(!H)return;const e=H.parent_id;return x().callApi({eventName:"listExternalCollections",environment:te,data:{bot_id:e}})}),[te,H]),ae="success"===(null==ie?void 0:ie.type)&&"data"in ie.data?ie.data.data:[],se="success"===(null==ie?void 0:ie.type)&&"error"in ie.data?ie.data.error:null,le=ae.filter((e=>!$||e.type===$)),ce=le.length?(0,h().Ay)(E,le,(e=>e.title)):[],de=Array.from(new Set(ae.map((e=>e.type)))),ue=oe({integration:t,url:E}),pe=async e=>{if(G(!0),!Z||!ee)return;const n=e||E,i=oe({integration:t,url:n});if(!i)return G(!1),void C().ui({items:[{label:(0,O.jsx)(g().sA,{id:"collectionSettingsCreateExternalViewPicker.unsupportedUrlErrorDialog.copyDebuggingInformation",defaultMessage:"Copy debugging information"}),color:"blue",onAccept:async()=>{const e=await S().R.clipboardActions.load();e.copyString({environment:te,stringValue:JSON.stringify({botId:null==H?void 0:H.parent_id,url:n},null,2),copiedMessage:e.clipboardMessages.copiedToClipboard})}},{label:(0,O.jsx)(g().sA,{id:"collectionSettingsCreateExternalViewPicker.unsupportedUrlErrorDialog.closeButton",defaultMessage:"Close"}),onAccept:()=>{}}],showCancel:!1,keepFocus:!1,message:(0,O.jsx)(g().sA,{id:"collectionSettingsCreateExternalViewPicker.unsupportedUrlErrorDialog.title",defaultMessage:"This source is currently not supported. Please try a different source."})});const r=(0,D().jw)(t.id);await P().jW({environment:te,url:n,botIds:r.map((e=>e.id)),externalCollectionStore:Z,externalCollectionViewBlockStore:ee,integrationId:t.id});const{host:a}=(0,y().qg)(n);v().lR(te,{...(0,T().sl)(o),integrationId:t.id,type:"collection",entity:i.name,domain:a||"",from:"external_picker_settings"}),b().R8({collectionSettingsStore:u,item:{type:"shareSyncedView",integrationName:t.name,integrationIcon:t.info.icon}}),G(!1)};if(!Z||!ee)return null;const ge=de.length>1?(0,O.jsx)("div",{style:Q.filterContainer,children:(0,O.jsxs)(I().H,{type:V().A.X,style:Q.filterContainerScroller,children:[(0,O.jsx)(k().A,{title:(0,O.jsx)("span",{children:L().A.formatMessage(ne.all)}),on:!(0,f().Pe)($),hideChevron:!0,onClick:()=>{Y(null)}},"all"),de.map((e=>(0,O.jsx)(k().A,{title:(0,O.jsx)("span",{children:L().A.formatMessage(ne[e])}),on:$===e,hideChevron:!0,onClick:()=>{Y((t=>t===e?null:e))}},e)))]})}):null,me=ue?(0,O.jsx)("div",{style:Q.syncSourceButton,children:(0,O.jsx)(R().A,{size:"lg",onClick:()=>{pe()},disabled:!1,children:(0,O.jsx)(g().sA,{id:"collectionSettingsCreateExternalViewPicker.syncSourceButton.label",defaultMessage:"Sync Source"})})}):null,he=ue||ae.length&&ce.length?null:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{style:Q.noResults,children:(0,O.jsx)(g().sA,{id:"collectionSettingsCreateExternalViewPicker.noResults.text",defaultMessage:"No results"})}),(0,O.jsxs)("div",{style:Q.suggestionBox,children:[(0,c().G)({marginRight:8,width:14,height:14}),(0,O.jsx)(g().sA,{defaultMessage:"Try different search or paste any {integration} URL",id:"collectionSettingsCreateExternalViewPicker.noResults.help",values:{integration:t.name}})]})]}),fe=ae.length&&ce.length?(0,O.jsx)(A().Ay,{type:A().Oh.Vertical,initialFocus:0,sections:[{key:"collections",items:ce.map((e=>{const t={key:e.url,render:t=>(0,O.jsx)(B().A,{renderTooltip:()=>(0,O.jsx)("span",{children:e.title}),placement:N().W.Left,textWrap:!0,render:o=>(0,O.jsx)(M().A,{...(0,F().A)(o||{},t),title:e.title,icon:(0,O.jsx)("img",{style:{width:18},src:e.icon}),caption:e.parent.title})}),action:t=>{"stopPropagation"in t.event&&t.event.stopPropagation(),pe(e.url)}};return t})),render:e=>(0,O.jsx)(_().A,{...e,disableMobilePadding:!0})}]}):null,ye="pending"===re||"idle"===re||q;if(!H||se&&(se.status===l().nG.UNAUTHORIZED||se.status===l().nG.FORBIDDEN))return(0,O.jsx)(J,{collectionContextStore:o,collectionSettingsStore:u,integration:t});const ve="rejected"===re||"failed"===(null==ie?void 0:ie.type)||se,xe=(0,O.jsx)(K,{onClick:()=>{b().a2({collectionSettingsStore:u,item:{type:"selectAccountForExternalSource",integration:t,onAccountSelect:e=>{b().a2({collectionSettingsStore:u,item:{type:"createSyncedViewSource",externalAuthentication:e}})}}})},integration:t,accountName:H.account_name});return(0,O.jsx)(X().Ay,{...e,footer:me||q?null:xe,title:(0,O.jsx)(g().sA,{defaultMessage:"Select from {integration}",id:"collectionSettingsCreateExternalViewPicker.title",values:{integration:t.name}}),header:!ye&&"resolved"===re&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(j().Ay,{inputLeft:(0,O.jsx)(j().Zf,{icon:d().q}),onSubmit:()=>{ue&&pe()},style:Q.settingsMenuSearchBox,focusInitial:!0,value:E,onChange:e=>{W(e.target.value)},placeholder:"Search source or paste a link..."}),ue?null:ge]}),children:(0,O.jsxs)("div",{style:Q.settingsMenu,children:[ve&&(0,O.jsx)("div",{style:Q.errorMessage,children:(0,O.jsx)(g().sA,{id:"collectionSettingsCreateExternalViewPicker.error.unknown",defaultMessage:"Something went wrong.",values:{integration:t.name}})}),ye&&(q?(0,O.jsxs)("div",{style:Q.syncingData,children:[(0,O.jsx)("span",{children:(0,O.jsx)(g().sA,{id:"collectionSettingsCreateExternalViewPicker.settingUpSync",defaultMessage:"Setting up sync..."})}),(0,O.jsx)(w().A,{style:{alignSelf:"center"}})]}):(0,O.jsxs)("div",{style:Q.syncingData,children:[(0,O.jsx)("span",{children:(0,O.jsx)(g().sA,{id:"collectionSettingsCreateExternalViewPicker.loadingData",defaultMessage:"Loading available sources..."})}),(0,O.jsx)(w().A,{style:{alignSelf:"center"}})]})),!ye&&"resolved"===re&&(0,O.jsxs)(O.Fragment,{children:[me,he,fe]})]})})}},454531:(e,t,o)=>{o.d(t,{W:()=>h});var n=()=>o(780054),i=()=>o(972435),r=()=>o(867772),a=()=>o(681810),s=()=>o(901389),l=()=>o(896628),c=()=>o(383594),d=()=>o(675925),u=()=>o(751156),p=()=>o(892632);const g=1500,m=(0,o(959013).YK)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},preparing:{defaultMessage:"Preparing...",id:"pageCover.status.preparing"},downloading:{defaultMessage:"Downloading...",id:"pageCover.status.downloading"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image link…",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function h(e){let{environment:t,intl:o,store:n,rect:i,from:r}=e;c().W(t,{originGap:3,originRect:i,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:o.formatMessage(m.pageCover),onDelete:()=>{!function(e){let{environment:t,store:o}=e;c().I(),u().createAndCommit({userAction:"PageCover.handleDelete",environment:t,canUndo:!0,perform:e=>{l().PT({store:o,transaction:e})}})}({environment:t,store:n})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:o,position:i}=e;(0,d().o)(t,{action:"edit_cover",block_type:"page",from:r},(e=>{y({environment:t,store:n,url:{originUrl:o},position:i}),e()}))}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:o.formatMessage(m.fileTypeCaption,{idealImageWidth:g}),onUpload:e=>{(0,d().o)(t,{action:"edit_cover",block_type:"page",from:r},(i=>{var r;c().I(),p().QM({environment:t,file:e[0],bucket:"secure",record:(null===(r=n.getCoverStore())||void 0===r?void 0:r.pointer)??n.pointer,isFileBlock:!1,reportRichUploadMetrics:!0,onStart:v,onProgress:x,onComplete:e=>{var o;o={environment:t,store:n,url:{originUrl:e}},f({...o,position:.5})},onError:()=>{s().f1(o.formatMessage(m.uploadFailed))}}),i()}))}},{type:"embed",title:o.formatMessage(m.embedTitle),inputPlaceholder:o.formatMessage(m.embedPlaceholder),caption:o.formatMessage(m.embedCaption),buttonText:o.formatMessage(m.embedSubmit),onChange:e=>{(0,d().o)(t,{action:"edit_cover",block_type:"page",from:r},(o=>{var i;i={environment:t,store:n,url:e},f({...i,position:.5}),c().I(),o()}))}},{type:"unsplash",onChange:e=>{let{url:o,position:i}=e;(0,d().o)(t,{action:"edit_cover",block_type:"page",from:r},(e=>{y({environment:t,store:n,url:{originUrl:o},position:i}),e()}))}}]})}async function f(e){const{environment:t,store:o,url:n,position:s}=e,{serverCommitResult:c}=u().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{l().fg({store:o,url:n,position:s||.5,transaction:e})}});await c,a().A.state.loadingMode===r().vS&&a().A.setState({loadingMode:r().Gi,dataURL:a().A.state.dataURL,uploadProgress:t.device.isMobileNative?void 0:100,progressText:i().A.formatMessage(m.downloading)})}function y(e){f(e),n().A.isMobile&&c().I()}function v(e){const{file:t,name:o,size:n}=e;if(c().I(),a().A.setState({loadingMode:r().Wc,file:t,name:o,size:n}),t.type.indexOf("image")>=0)if(t instanceof File){const e=new FileReader;e.onload=e=>{a().A.state.loadingMode===r().Wc&&a().A.setState({...a().A.state,loadingMode:r().vS,uploadProgress:0,dataURL:e.target.result})},e.readAsDataURL(t)}else a().A.state.loadingMode===r().Wc&&a().A.setState({...a().A.state,loadingMode:r().vS,dataURL:t.dataURL,progressText:i().A.formatMessage(m.preparing)});else a().A.state.loadingMode===r().Wc&&a().A.setState({...a().A.state,loadingMode:r().vS,progressText:i().A.formatMessage(m.preparing)})}function x(e){const{progressPercent:t,progressText:o}=e;a().A.state.loadingMode===r().vS&&a().A.setState({...a().A.state,uploadProgress:t,progressText:o})}},465364:(e,t,o)=>{o.d(t,{$N:()=>I,D5:()=>_,GB:()=>w,M9:()=>M,Pt:()=>R,eW:()=>A,jo:()=>D,v7:()=>j});o(944114),o(898992),o(803949),o(581454);var n=()=>o(244641),i=()=>o(787626),r=()=>o(713998),a=()=>o(597777),s=()=>o(604995),l=()=>o(416504),c=()=>o(519831),d=()=>o(496603),u=()=>o(534177),p=()=>o(299709),g=()=>o(317001),m=()=>o(520861),h=()=>o(878060),f=()=>o(44729),y=()=>o(246826),v=()=>o(319975),x=()=>o(519839),S=()=>o(695625),b=()=>o(397248),C=()=>o(217429),P=()=>o(630116),k=()=>o(747671);function M(e){const{environment:t,droppedStores:o,duplicate:r,calendarBy:d,transaction:u,collectionContextStore:h,duplicateActions:y}=e,v=n().c9.fromMillis(e.startOfDay);let S=!0;for(const n of o){const t=e.collectionStore?e.collectionStore:(0,x().Dj)({store:n,collectionContextStore:h});if(n.getParentTable()===c().Vl||!t){S=!1;break}f().X$({childStore:n,parentStore:t,transaction:u})||(S=!1)}const b=(0,m().T)({environment:t,droppedStores:o,duplicate:r,transaction:u,collectionStore:e.collectionStore,duplicateActions:y});for(const n of b){const o=e.collectionStore?e.collectionStore:(0,x().Dj)({store:n,collectionContextStore:h});if(!o)continue;const r=o.getMappedProperty(d),c=n.getPropertyStore(r),m=(0,i().b)(c.getValue())||s().Ec((0,l().P)()),f=s().kW(m,(0,l().P)()),y=v.toFormat(s().tr);let b;if("date"===f.type||"datetime"===f.type)b={...f,start_date:y};else{const e=s().AA(f,(0,l().P)());if(!e.end)return;const t={...f,start_date:y},o=s().AA(t,(0,l().P)()).start.diff(e.start,"days"),n=e.end.plus(o).toFormat(s().tr);b={...f,start_date:y,end_date:n}}const C=s().kW(b,a().$K(m)||(0,l().P)());(0,g().j)({environment:t,store:n,collectionStore:o,collectionContextStore:h,shouldCoerce:!0,groupsPointer:[],transaction:u,alreadyMovedToCollection:S}),_({environment:t,type:"dateValue",propertyId:r,store:n,transaction:u,dateValue:C}),(0,p().E)({environment:t,collectionContextStore:h,block_id:n.id,property:r,property_type:"date",from:"calendar"})}}function j(e){const{calendarStore:t,direction:o,targetStore:n}=e;t.setState({...t.state,isDragging:!0,targetStore:n,direction:o,temporaryValue:void 0})}function w(e){const{calendarStore:t,x:o,y:r,calendarBy:c}=e,u=t.state;if(u.isDragging){const e=(0,i().b)(u.targetStore.getPropertyStore(c).getValue());if(!e)return;const p=s().kW(e,(0,l().P)()),g=u.temporaryValue||e,m=s().kW(g,(0,l().P)()),h=[];u.dayStoreMap.forEach(((e,t)=>{h.push({store:e,timestamp:t})}));const f=h.find((e=>{let{store:t}=e;const n=S().T.getRectFromStore(t);return Boolean(n&&b().ux(n,o,r))}));let y;if(f){const e=n().c9.fromMillis(f.timestamp),t=e.endOf("day"),o=e.toFormat(s().tr);if(p){const i=s().AA(p,(0,l().P)());if(u.direction===k().Q.Left)if(n().IX.fromDateTimes(e,t).contains(i.start))y=p;else{let e;e="datetimerange"===p.type||"daterange"===p.type?{...p,start_date:o,end_date:p.end_date}:"datetime"===p.type?{type:"datetimerange",start_date:o,start_time:p.start_time,end_date:p.start_date,end_time:p.start_time,time_zone:p.time_zone,reminder:p.reminder}:{type:"daterange",start_date:o,end_date:p.start_date,reminder:p.reminder};const t=s().AA(e,(0,l().P)());y=!i.end&&t.start>i.start||i.end&&t.start>i.end?m:e}else if(i.end?n().IX.fromDateTimes(e,t).contains(i.end):n().IX.fromDateTimes(e,t).contains(i.start))y=p;else{let e;e="date"===p.type?{...p,type:"daterange",end_date:o}:"datetime"===p.type?{...p,type:"datetimerange",end_date:o,end_time:"00:00"}:{...p,end_date:o};const t=s().AA(e,(0,l().P)());y=t.end&&t.end<t.start?m:e}}}if(y&&!d().n4(m,y)){const e=s().kW(y,a().$K(g)||(0,l().P)());t.setState({...u,temporaryValue:e})}}}function A(e){const{environment:t,calendarStore:o,calendarBy:n,transaction:i}=e,r=o.state;r.isDragging&&r.temporaryValue&&(_({type:"dateValue",environment:t,dateValue:r.temporaryValue,propertyId:n,store:r.targetStore,transaction:i}),o.setState({...o.state,isDragging:!1}))}function R(e){const{calendarStore:t}=e,o=t.state;o.isDragging&&t.setState({...o,isDragging:!1})}function I(e){const{environment:t,store:o,collectionStore:i,collectionContextStore:a,startDayOfWeek:c,transaction:d}=e,u=a.dateRangeStartStore.state,p=(0,l().P)(),m=a.normalizedQueryStore.state;if(!m||!m.calendar_by)return;const h=(null==i?void 0:i.getMappedProperty(m.calendar_by))??m.calendar_by,f=s().hp(u,c,p),v=f.startOf("month"),x=f.endOf("month"),S=n().c9.now().startOf("day");let b;return b=n().IX.fromDateTimes(v,x).contains(S)?s().p6(S.valueOf(),p):s().p6(s().iB(u,c,p).valueOf(),p),y().zv({store:o.getPropertiesStore(),data:{[h]:r().m5(b)},transaction:d}),(0,g().j)({environment:t,store:o,collectionStore:i,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:d}),o}function _(e){const{environment:t,store:o,propertyId:n,transaction:i}=e;let a;"timestamp"===e.type?a=s().p6(e.timestampMs.valueOf(),(0,l().P)()):"dateValue"===e.type?a=e.dateValue:(0,u().HB)(e);const c=o.getPropertyValue(n);if(a&&function(e){const{propertyId:t,oldDateValue:o,newPersistedDate:n,store:i}=e;if(o||!n||void 0!==n.reminder)return!1;if(!C().default.checkGate({gateName:"adoption_reminder_collection_default"}))return!1;const r=B(t,i);if(void 0===r)return!1;return!0}({propertyId:n,oldDateValue:c,newPersistedDate:a,store:o})){const e=B(n,o);void 0!==e&&(a={...a,reminder:e})}const d=r().m5(a);y().zv({store:o.getPropertiesStore(),data:{[n]:d},transaction:i}),h().O({environment:t,store:o,dateProperty:{id:n,oldValue:c,newValue:d}})}function B(e,t){const o=t.getAssociatedCollectionStore();if(!o)return;const n=o.getSchema();if(!n)return;const i=n[e];return i&&"date"===i.type?i.default_reminder:void 0}function D(e){const{environment:t,collectionStore:o,calendarBy:n,store:i,insertStores:r,collectionContextStore:a,transaction:s}=e,l=i.getPropertyStore(n).getValue();for(const c of r)(0,g().j)({environment:t,store:c,collectionStore:o,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:s}),v().R9({environment:t,store:c.getPropertyStore(n),value:l,transaction:s});return r.map((e=>P().Bv.createChildStore(o,e.pointer)))}},465570:(e,t,o)=>{o.d(t,{T:()=>c});var n=o(296540),i=()=>o(554509),r=()=>o(859428),a=()=>o(553965),s=()=>o(962730),l=o(474848);function c(e){let{tooltipMessage:t,children:o,placement:c=s().W.Bottom}=e;return Boolean(t)?(0,l.jsx)(r().A,{placement:c,style:{maxWidth:240,minWidth:160},renderTooltip:()=>(0,l.jsx)(i().D,{styleName:"UISmall-12px/Medium",colorName:"contrastPrimary",children:t}),render:e=>n.cloneElement(o,(0,a().A)(e,o.props)),textWrap:!0}):o}},471095:(e,t,o)=>{o.d(t,{i:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.95 12.05 15.66",svg:(0,o(474848).jsx)("path",{d:"M6 5.95a4 4 0 1 1 8 0v1.433a2.426 2.426 0 0 1 2.025 2.392v5.4A2.425 2.425 0 0 1 13.6 17.6H6.4a2.425 2.425 0 0 1-2.425-2.425v-5.4c0-1.203.876-2.201 2.025-2.392zm6.75 1.4v-1.4a2.75 2.75 0 1 0-5.5 0v1.4zm-2.2 5.458a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"})},i=(0,o(340498).wt)("lockFill",n)},477293:(e,t,o)=>{o.d(t,{r:()=>r});var n=()=>o(56366),i=()=>o(217429);function r(e){let{disableExposureLogging:t,disableEventTrailLogging:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n().K8)((()=>i().default.getEligibleGroup({experimentId:e,defaultGroup:"control",disableExposureLogging:t,disableEventTrailLogging:o})),[e,t,o])}},484578:(e,t,o)=>{o.d(t,{QX:()=>l,dK:()=>s});var n=()=>o(68263),i=()=>o(534177),r=()=>o(337567),a=()=>o(630116);function s(e){let{permissionItem:t,store:o}=e;return"display_only_inherited_permission"!==t.type&&(o instanceof a().md?"collection_property_permission"===t.type?o.pathIsDead()||!o.canAdmin():o.pathIsDead():o instanceof a().Bv?o.pathIsDead()||!function(e){return"display_only_overview_permission"===e.type}(t)&&!o.canAdmin()||(0,r().dL)(o):void(0,i().HB)(o))}function l(e){const t=e&&"from"in e?e.permissionItem:e;if(!t||!(0,n().Tt)(t.role))return"private";return(0,n().Ni)(t)&&"none"!==t.role?"unlisted":"open"}},505108:(e,t,o)=>{o.d(t,{a:()=>g});var n=o(296540),i=()=>o(401497),r=()=>o(534177),a=()=>o(284371),s=()=>o(84817),l=()=>o(819121),c=()=>o(955825),d=o(474848);function u(e){const{disabled:t,checked:o,selectorSize:n}=e,[r,a]=(0,l().A)(),s=function(e){const{checked:t,disabled:o,isFocusVisible:n,selectorSize:r}=e;return(0,i().IS)((e=>({root:{position:"absolute",display:"flex",width:15,height:15,padding:5,margin:1.5,justifyContent:"center",alignItems:"center",gap:8,flexShrink:0,borderRadius:"50%",transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${o?e.tint.regular:e.blueColor}`,background:o?e.tint.regular:e.blueColor}:{boxShadow:`0 0 0 1.5px ${o?e.icon.quaternary:e.stroke.input}`,background:e.surface.page},...n&&{boxShadow:e.buttonBlueFocusRing}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"small"===r?14:18,height:"small"===r?14:18,...o?{pointerEvents:"none"}:{cursor:"pointer"}}})),[t,o,n,r])}({checked:o,disabled:t,isFocusVisible:a,selectorSize:n});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("input",{ref:r,type:"radio",style:s.input,className:"radio-button",...e}),(0,d.jsx)("span",{...(0,c().AH)("custom-radio-button",s.root,t?{}:{pseudoActive:s.active})})]})}var p=()=>o(554509);const g=n.forwardRef((function(e,t){let{additionalContent:o,description:r,isDisabled:l,isSelected:c,label:u,name:p,onChange:g,width:f="fill",selectorSize:y="normal",selectAlignXAxis:v="left",selectAlignYAxis:x="center",selectType:S="checkbox",style:b,supportText:C,value:P,colorName:k,alignAdditionalContent:M,...j}=e;const w=(0,n.useId)(),A=function(e){const{isSelected:t,isDisabled:o,selectAlignYAxis:n,alignAdditionalContent:r}=e;return(0,i().IS)((e=>{const i=t&&!o?e.blueColor:e.selectorBorderUnselected;return{container:{display:"flex",alignItems:r??"center",gap:12,userSelect:"none",padding:"9px 16px 10px 10px",borderRadius:6,border:`1px solid ${i}`,...!o&&{cursor:"pointer"}},title:{fontWeight:a().Wy.medium,fontSize:14,userSelect:"none",lineHeight:18},additionalContentWrapper:{flexShrink:0},selectorWrapper:{display:"flex",..."top"===n?{marginTop:2}:{}},rightAlignSelectorWrapper:{display:"flex"}}}),[t,o,n,r])}({isSelected:c,isDisabled:l,selectAlignYAxis:x,alignAdditionalContent:M}),R=(0,d.jsxs)(s().Y1,{direction:"horizontal",align:"top"===x?"top-left":"center-left",gap:12,width:f,children:[(0,d.jsx)("div",{style:A.selectorWrapper,children:(0,d.jsx)(h,{id:w,selectType:S,name:p,value:P,onChange:g,isSelected:c,selectorSize:y,isDisabled:l,...j})}),(0,d.jsx)(m,{colorName:k,description:r,label:u,selectorSize:y,supportText:C,isDisabled:l})]}),I=(0,d.jsxs)(s().Y1,{direction:"horizontal",align:"top"===x?"top-center":"center",gap:12,children:[(0,d.jsx)(m,{colorName:k,description:r,label:u,selectorSize:y,supportText:C,isDisabled:l}),(0,d.jsx)("div",{style:{...A.selectorWrapper,...A.rightAlignSelectorWrapper},children:(0,d.jsx)(h,{id:w,selectType:S,name:p,value:P,onChange:g,selectorSize:y,isSelected:c,isDisabled:l,...j})})]}),_=o?(0,d.jsx)("div",{style:A.additionalContentWrapper,children:o}):null;return(0,d.jsx)("label",{ref:t,style:{...A.container,...b},htmlFor:w,children:"left"===v?(0,d.jsxs)(d.Fragment,{children:[R,_]}):(0,d.jsxs)(d.Fragment,{children:[_,I]})})}));function m(e){const{description:t,label:o,supportText:n,selectorSize:i,isDisabled:a,colorName:l}=e;let c;return"large"===i?c="Page-Content/Text-Block":"normal"===i||void 0===i?c="Body-13px/Medium":"small"===i?c="Body-12px/Regular":(0,r().HB)(i),(0,d.jsxs)(s().Y1,{gap:4,children:[(0,d.jsxs)(s().Y1,{gap:2,children:[(0,d.jsx)(p().D,{styleName:c,colorName:l||(a?"quaternary":"primary"),children:o}),t?(0,d.jsx)(p().D,{styleName:"Caption-12px/Regular",colorName:a?"quaternary":"secondary",children:t}):null]}),n?(0,d.jsx)(p().D,{styleName:"Caption-12px/Medium",colorName:"tertiary",children:n}):null]})}function h(e){const{selectType:t,selectorSize:n="normal",id:a,name:s,value:l,onChange:c,isSelected:p,isDisabled:g,...m}=e,h=(0,i().IS)((()=>({checkboxWrapper:{minWidth:18,display:"flex",justifyContent:"center"}})),[]);switch(t){case"radio":return(0,d.jsx)(u,{id:a,name:s,value:l,onChange:c,checked:p,disabled:g,selectorSize:n,...m});case"checkbox":return(0,d.jsx)("div",{style:h.checkboxWrapper,children:(0,d.jsx)(o(115562).W,{id:a,name:s,value:l,onChange:c,checked:p,disabled:g,selectorSize:n,...m})});case"none":return null;default:(0,r().HB)(t)}}},511303:(e,t,o)=>{o.d(t,{$:()=>d,N:()=>c});var n=o(296540),i=()=>o(221844),r=()=>o(484714),a=()=>o(388821),s=()=>o(765957),l=o(474848);const c=(0,n.createContext)({organizationOwnerRecordCache:void 0,updateCacheWithRecordMap:e=>{}});function d(e){let{children:t}=e;const o=(0,r().v3)(),[i,d]=(0,n.useState)(void 0);(0,n.useEffect)((()=>{const e=u(o);d(e)}),[o]);const p=(0,n.useCallback)((e=>{var t;const n=null===(t=s().default.state.currentUserStore)||void 0===t?void 0:t.id;if(!n||!e.data.organizationOwnerRecordMap)return;if(!e.data.organizationOwnerRecordMap)return;const i=a().RecordMap.create(e.data.organizationOwnerRecordMap);d((e=>{if(!e)return u(o);for(const{pointer:t,model:o}of i)e.setModelAndRole({pointer:t,userId:n},o,"editor");return u(o,e.data)}))}),[o]);return i?(0,l.jsx)(c.Provider,{value:{organizationOwnerRecordCache:i,updateCacheWithRecordMap:p},children:t}):null}function u(e,t){const o=new(i().A)({name:"organizationSettingsConsoleCache",data:t});return o.addCacheFallback(e.defaultRecordCache.inMemoryRecordCache),o}c.displayName="OrganizationCacheContext"},520861:(e,t,o)=>{o.d(t,{T:()=>i});o(944114),o(898992),o(908872);var n=()=>o(415651);function i(e){const{environment:t,collectionStore:o,duplicate:i,droppedStores:r,transaction:a,duplicateActions:s}=e,{movedStores:l,reparentedStores:c}=r.reduce(((e,t)=>(i||t.getAssociatedCollectionId()!==(null==o?void 0:o.id)?e.reparentedStores.push(t):e.movedStores.push(t),e)),{movedStores:[],reparentedStores:[]});return[...l,...n().MS({environment:t,droppedStores:c,duplicate:i,transaction:a,resolveTemplateVariables:!1,duplicateActions:s})]}},523036:(e,t,o)=>{o.d(t,{R:()=>c});var n=o(296540),i=()=>o(484714),r=()=>o(56366),a=()=>o(640653),s=()=>o(765957),l=()=>o(749356);function c(e){const t=(0,i().v3)(),[o,c]=(0,n.useState)(),{spaceId:d,spaceName:u}=(0,r().K8)((()=>{const e=s().default.state.currentSpaceStore;return e?{spaceId:e.getSpaceId(),spaceName:(0,a().GK)(t,e)}:{spaceId:void 0,spaceName:void 0}}),[t]);return(0,n.useEffect)((()=>{!async function(){if(d){const o=await(0,l().OC)(t,d,e);o&&(c(o),u&&(0,l().Zc)({environment:t,spaceName:u,offerCampaign:o.campaign}))}}()}),[t,d,u,e]),o}},541235:(e,t,o)=>{o.d(t,{YD:()=>r,c$:()=>n,q_:()=>i});const n={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]}},i="completed",r="dismissed"},544862:(e,t,o)=>{o.d(t,{A:()=>P});var n=o(296540),i=()=>o(484714),r=()=>o(56366),a=()=>o(959013),s=()=>o(896628),l=()=>o(454531),c=()=>o(751156),d=()=>o(478726),u=()=>o(227440),p=()=>o(867772),g=()=>o(681810),m=()=>o(608581),h=()=>o(145214),f=()=>o(704152),y=()=>o(807683),v=()=>o(401497),x=()=>o(534177),S=o(474848);function b(e){let{src:t,placeholderSrc:o,placeholderBehavior:i,imageStyle:r,containerStyle:a,onLoadComplete:s,testId:l}=e;const[c,d]=(0,n.useState)(!0);let u;switch(i){case"force-show-placeholder":u=!0;break;case"force-show-src":u=!1;break;case"show-placeholder-if-loading-src":u=!!o&&(c||void 0===t);break;default:(0,x().HB)(i)}const p=(0,v().IS)((()=>{const e={gridColumn:1,gridRow:1};return{container:{display:"grid",...a},srcWrapper:{...u&&{display:"none"},...e},placeholderWrapper:{pointerEvents:"none",...e}}}),[a,u]);(0,n.useEffect)((()=>{void 0!==t&&d(!0)}),[t]);const g=(0,n.useCallback)((e=>{d(!1),null==s||s()}),[s]);return(0,S.jsxs)("div",{style:p.container,children:[(0,S.jsx)(y().Ay,{src:t,onLoad:g,style:r,placeholderStyle:p.srcWrapper,placeholderLoadedStyle:p.srcWrapper,testId:l}),o&&(0,S.jsx)(y().Ay,{src:o,style:r,placeholderStyle:p.placeholderWrapper,placeholderLoadedStyle:p.placeholderWrapper})]})}var C=()=>o(453101);const P=function(e){let{store:t,disabled:a,paddingRight:l,paddingLeft:d,height:u,proxyWidth:m}=e;const h=(0,i().v3)(),f=(0,i().Y0)(),v=(0,r().uB)(void 0,o(454305).A),x=(0,r().K8)((()=>a||"suggest"===o(77246).Uv.getMode(t)||(0,o(600871).aD)(f)),[a,t,f]),C=(0,r().K8)((()=>t.getCover()),[t]),P=(0,r().O$)(g().A),[j,w]=(0,n.useState)(void 0);if(!C)return null;const A=P.loadingMode!==p().pF&&P.loadingMode!==p().Wc;return(0,S.jsx)(o(801678).A,{mouseStore:v,onFlushTemporaryPosition:e=>function(e,t,o){const{imagePosition:n,reset:i}=e;c().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:o,canUndo:!0,perform:e=>{s().yY({store:t,coverPosition:n,transaction:e}),i()}})}(e,t,h),renderControl:e=>{let{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:i,isVisible:r,isRepositioning:a}=e;return(0,S.jsx)(M,{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:i,isVisible:r,isRepositioning:a,lastProxiedUrl:j,store:t,disabled:x,paddingRight:l,paddingLeft:d,mouseStore:v})},source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:u,maxHeight:280,cursor:"default"},preventClickPropagation:!0,render:e=>(0,S.jsxs)(n.Fragment,{children:[(0,S.jsx)(o(360083).A,{url:C.cover,isAuthenticated:!0,permissionRecord:C.pointer,width:m,onFinishedLoadingProxyUrl:w,render:(t,o)=>{const n={width:"100%",height:u,maxHeight:280,objectFit:"cover",opacity:A?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},i={width:"100%",height:u,maxHeight:280};return(0,S.jsx)(b,{src:o,placeholderSrc:A?P.dataURL:void 0,placeholderBehavior:A?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:i,imageStyle:n,onLoadComplete:k,testId:"pageCover"})}}),A&&(0,S.jsxs)("div",{style:y().fd,children:[(0,S.jsx)(o(331542).A,{size:"md",style:{marginRight:4}}),(0,S.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:void 0!==P.uploadProgress?(0,S.jsx)(o(773382).A,{percentage:P.uploadProgress}):P.progressText?(0,S.jsx)("span",{children:P.progressText}):null})]})]})})};function k(){g().A.reset()}function M(e){let{isVisible:t,isRepositioning:o,handleCancelClick:s,handleRepositionClick:c,handleSavePositionClick:y,lastProxiedUrl:v,store:x,disabled:b,paddingRight:P,paddingLeft:k,mouseStore:M}=e;const j=(0,i().v3)(),w=(0,a().tz)(),A=(0,n.useCallback)((e=>function(e,t,o,n,i){i.reset();const r=e.target.getBoundingClientRect();l().W({environment:t,intl:o,store:n,rect:r,from:"page_header"})}(e,j,w,x,M)),[j,w,x,M]),R=(0,r().K8)((()=>g().A.state.loadingMode),[]),I=(0,r().K8)((()=>function(e){let t;return t=Boolean(e.isFullWidth())?"100%":d().x6,t}(x)),[x]),{device:_}=j,B=(0,r().O$)(u().e);if(b||R!==p().pF||!B)return null;const{isMobile:D}=_;return(0,S.jsx)(h().A,{animate:{width:I,opacity:t?1:0},style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,S.jsxs)(m().A,{isVisible:t,position:"bottom",style:{marginRight:P,marginLeft:k},children:[!o&&(0,S.jsx)(f().A,{style:{borderRight:D?"none":void 0,...C().k},onClick:A,children:(0,S.jsx)(a().sA,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!o&&!D&&(0,S.jsx)(f().A,{style:{...C().k,borderRight:"none"},onClick:e=>c(e,v),children:(0,S.jsx)(a().sA,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),o&&!D&&(0,S.jsx)(f().A,{style:C().k,onClick:y,children:(0,S.jsx)(a().sA,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),o&&!D&&(0,S.jsx)(f().A,{style:{...C().k,borderRight:"none"},onClick:s,children:(0,S.jsx)(a().sA,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})}},555267:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),i=()=>o(401497),r=()=>o(62856),a=()=>o(331542),s=o(474848);function l(e){let{loadingMessage:t}=e;const o=(0,i().DP)(),l=(0,r().A)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:l?(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(a().A,{}),t?(0,s.jsx)("div",{style:{marginLeft:8,color:o.text.secondary},children:t}):void 0]}):void 0})}},567121:(e,t,o)=>{o.d(t,{EG:()=>a,K5:()=>r,RH:()=>i,Yi:()=>s,ls:()=>n});const n=32,i=202,r=1e3,a="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",s="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},571468:(e,t,o)=>{o.d(t,{W:()=>r,X:()=>i});var n=()=>o(56366);function i(e){return e.isReady()&&!e.isDefined()&&"none"!==e.getRole()}function r(e){return(0,n().K8)((()=>i(e)),[e])}},573351:(e,t,o)=>{o.d(t,{A:()=>r});var n=o(296540),i=o(474848);const r=function(e){let{firstDayOfWeek:t,value:r,selectValue:a=!0,onChange:s,onFocus:l,onBlur:c,disabledDays:d,className:u}=e;const p=(0,n.useMemo)((()=>new Date(r)),[r]),[g,m]=(0,n.useState)(p),h=(0,n.useRef)(r);(0,n.useLayoutEffect)((()=>{h.current!==r&&(m(new Date(r)),h.current=r)}),[r]);const f=(0,n.useCallback)(((e,t,o)=>{s(e.getTime())}),[s]);return(0,i.jsx)("div",{style:{paddingRight:8,paddingBottom:8,paddingLeft:8,paddingTop:4},children:(0,i.jsx)(o(541181).n,{locale:o(662303).locale,className:u??"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:a?{value:p}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:f,onMonthSelected:m,disabled:d,month:g,onDayBlur:c,onDayFocus:l})})}},578194:(e,t,o)=>{o.d(t,{r:()=>n});const n=(0,o(583835).Dv)("importEvernote")},608581:(e,t,o)=>{o.d(t,{A:()=>u});o(898992),o(354520),o(581454),o(941795);var n=o(296540),i=()=>o(401497),r=()=>o(955825),a=()=>o(284371),s=()=>o(780054),l=()=>o(963575),c=o(474848);function d(e){const{button:t,isLast:o}=e,s=(0,i().IS)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:a().Wy.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return n.cloneElement(t,{...(0,r().AH)(t.props.style,s.button,o&&s.buttonLast),hoveredStyle:(0,r().AH)(s.buttonHovered,o&&s.buttonLast).style,pressedStyle:s.buttonPressed})}const u=function(e){let{children:t,isVisible:u,position:p,style:g}=e;const m=(0,i().IS)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.shadowSM,display:"flex",whiteSpace:"nowrap",borderRadius:l().A.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:s().A.isMobile?"auto":"none",opacity:s().A.isMobile?1:0,fontFamily:a().vc(o(662303).locale).sans,position:"absolute",right:l().A.horizontal.small,bottom:l().A.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:l().A.vertical.small,bottom:void 0}})),[]),h=n.Children.toArray(t).filter(o(534177).O9),f=h.length;return(0,c.jsx)(o(145214).A,{animate:{opacity:u?1:0},...(0,r().AH)(m.container,g,u&&m.containerHover,"top"===p&&m.containerTop),children:h.map(((e,t)=>{const i=t===f-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===o(859428).A&&n.isValidElement(e))return n.cloneElement(e,{render:(t,o)=>{const n=e.props.render(t,o);return(0,c.jsx)(d,{isLast:i,button:n},e.key)}});if(e.type===o(704152).A&&n.isValidElement(e))return(0,c.jsx)(d,{isLast:i,button:e},e.key)}}))})}},611520:(e,t,o)=>{o.d(t,{G2:()=>r,uo:()=>s});var n=()=>o(645873);const i={CollectionSettingsConnectedRelationUpsell:new(n().O2)("CollectionSettingsConnectedRelationUpsell",(async()=>await o.e(73090).then(o.bind(o,474434))))},r=(0,n()._h)(i.CollectionSettingsConnectedRelationUpsell,(e=>e.CollectionSettingsConnectedRelationUpsell)),a={CollectionSettingsConnectedRelationUpsellMaybe:new(n().O2)("CollectionSettingsConnectedRelationUpsellMaybe",(async()=>await o.e(73090).then(o.bind(o,474434))))},s=(0,n()._h)(a.CollectionSettingsConnectedRelationUpsellMaybe,(e=>e.CollectionSettingsConnectedRelationUpsellMaybe))},612900:(e,t,o)=>{o.d(t,{u:()=>r});var n=()=>o(645873);const i=new(n().O2)("PulsingWrapper",(async()=>o.e(45248).then(o.bind(o,673962)))),r=(0,n().jQ)(i,(e=>e.PulsingWrapper),{renderLoading:(e,t)=>t.children})},623275:(e,t,o)=>{o.d(t,{$D:()=>c,CJ:()=>p,CY:()=>f,Sg:()=>l,iM:()=>v,kJ:()=>g,kx:()=>h,qj:()=>y,rL:()=>r,sH:()=>m,u6:()=>a,zr:()=>d});var n=()=>o(278238),i=()=>o(115512);const r=16,a=20,s=10,l=12,c=456,d=24,u=24,p=48;function g(e){let{theme:t,isMobile:o}=e;return{background:t.tint.regular,borderRadius:8,paddingTop:8,paddingBottom:8,paddingLeft:8,paddingRight:8,marginLeft:o?0:r,marginRight:o?0:r,marginTop:4,marginBottom:8}}function m(){return{...f(),width:"unset",height:p,paddingTop:6,paddingBottom:6}}function h(e){let{environment:t}=e;return(0,i().ny)(t,t.device.isMobile?"UISmall":"UIRegular")}function f(){return{borderRadius:s,transition:"background 150ms ease-out"}}function y(e){let{isMobile:t}=e;return t?12:10}function v(e){let{theme:t,colorOverride:o,size:i=u,useLargeBorderRadius:r,useLightBackgroundColor:a,icon:s}=e;return{background:o||(s&&(0,n().T8)(s)?(0,n().ez)({icon:s,mode:t.mode,useLightGrayColor:a}):a?t.lightDividerColor:t.regularDividerColor),width:i,height:i,borderRadius:r?6:"0.25em"}}},625634:(e,t,o)=>{o.d(t,{_:()=>i,z:()=>r});var n=()=>o(340498);const i={small:"md",default:"lg",large:"xl"},r={small:n().Ev.xs,default:n().Ev.sm,large:n().Ev.sm}},655424:(e,t,o)=>{o.d(t,{O:()=>a,t:()=>r});var n=o(296540),i=o(474848);const r=(0,n.createContext)({blockPointers:[],collectionStore:void 0,collectionId:"",property:"",schema:{},analyticsFrom:void 0,isDisabled:!0,canConfigureCollection:!1,onChange:()=>{},onDismiss:()=>{},blockStore:void 0,blockPropertyValueOverlayStore:void 0,overlayMode:void 0,insertChar:void 0,format:"table"});function a(e){const{children:t,blockPointers:o,collectionStore:a,collectionId:s,property:l,schema:c,analyticsFrom:d,isDisabled:u,canConfigureCollection:p,blockStore:g,blockPropertyValueOverlayStore:m,overlayMode:h,insertChar:f,onChange:y,onDismiss:v,format:x}=e,S=(0,n.useMemo)((()=>({blockPointers:o,collectionStore:a,collectionId:s,property:l,schema:c,analyticsFrom:d,isDisabled:u,canConfigureCollection:p,blockStore:g,blockPropertyValueOverlayStore:m,overlayMode:h,insertChar:f,onChange:y,onDismiss:v,format:x})),[o,a,s,l,c,d,u,p,g,m,h,f,y,v,x]);return(0,i.jsx)(r.Provider,{value:S,children:t})}r.displayName="BlockPropertyValueOverlayContext"},658985:(e,t,o)=>{o.d(t,{$:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("membersFilled",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M20.31 14.731c2.22 0 4.097-1.967 4.097-4.513 0-2.485-1.887-4.391-4.098-4.391-2.2 0-4.097 1.937-4.087 4.411 0 2.526 1.866 4.493 4.087 4.493zm-11.725.233c1.937 0 3.57-1.724 3.57-3.935 0-2.17-1.653-3.823-3.57-3.823-1.917 0-3.57 1.683-3.56 3.844 0 2.19 1.633 3.914 3.56 3.914zm-5.588 9.21h7.606c-1.085-1.552.082-4.615 2.374-6.42-1.116-.72-2.566-1.248-4.392-1.248-4.533 0-7.464 3.337-7.464 6.085 0 1.004.507 1.582 1.876 1.582zm10.994-.01h12.637c1.673 0 2.251-.508 2.251-1.44 0-2.607-3.316-6.198-8.57-6.198-5.263 0-8.57 3.59-8.57 6.197 0 .933.578 1.44 2.252 1.44z"})})},677195:(e,t,o)=>{o.d(t,{R:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("verificationCheck",{viewBox:"0 0 6 7",svg:(0,n.jsx)("path",{d:"M2.84245 6.11619C2.71116 6.30644 2.53392 6.40156 2.31072 6.40156C2.20131 6.40156 2.10066 6.37881 2.00875 6.33332C1.92123 6.28782 1.83589 6.21545 1.75274 6.11619L0.150985 4.25515C0.0503282 4.12694 0 3.99874 0 3.87053C0 3.73406 0.04814 3.61826 0.14442 3.52314C0.245077 3.42388 0.365427 3.37425 0.50547 3.37425C0.597374 3.37425 0.680525 3.39286 0.754923 3.43008C0.833698 3.46317 0.912473 3.52934 0.991247 3.6286L2.28446 5.21049L5.00875 1.07896C5.13129 0.892857 5.28446 0.799805 5.46827 0.799805C5.60394 0.799805 5.72648 0.841161 5.83589 0.923874C5.9453 1.00659 6 1.11618 6 1.25266C6 1.32297 5.98249 1.39327 5.94748 1.46358C5.91685 1.52975 5.88184 1.59178 5.84245 1.64968L2.84245 6.11619Z"})})},681810:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(867772).Ay)},701751:(e,t,o)=>{o.d(t,{p:()=>r});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.94 14.91 15.66",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 1 0 1.1 0z"}),(0,n.jsx)("path",{d:"M15.4 1.95a3.48 3.48 0 0 0-3.48 3.48v1.92H6.4a2.425 2.425 0 0 0-2.425 2.425v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.425 2.425 0 0 0 13.6 7.35h-.43V5.43a2.23 2.23 0 1 1 4.46 0v2.095a.625.625 0 1 0 1.25 0V5.43a3.48 3.48 0 0 0-3.48-3.48M5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},r=(0,o(340498).wt)("lockOpen",i)},727395:(e,t,o)=>{o.d(t,{_:()=>i});var n=()=>o(679924);function i(e,t){(0,n().v)(e,"relation_navigate_block",t)}},729650:(e,t,o)=>{o.d(t,{M:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("collectionInbox",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M11.0918,0 C11.5383,0 11.9307,0.295898 12.0533,0.725586 L13.9615,7.40332 C13.9871,7.49316 14,7.58594 14,7.67871 L14,13 C14,13.5527 13.5522,14 13,14 L1,14 C0.447754,14 0,13.5527 0,13 L0,7.67871 C0,7.58594 0.0129395,7.49316 0.0384521,7.40332 L1.94666,0.725586 C2.06934,0.295898 2.46167,0 2.9082,0 L11.0918,0 Z M4.27271,1.5 C3.83728,1.5 3.45178,1.78223 3.31982,2.19727 L1.91455,6.61328 C1.70947,7.25879 2.1908,7.91699 2.86755,7.91699 L4.70837,7.91699 C4.70837,8.93652 5.16663,10.168 7,10.168 C8.83337,10.168 9.29163,8.93652 9.29163,7.91699 L11.1478,7.89355 C11.8201,7.88477 12.2927,7.22852 12.0876,6.58887 L10.681,2.19531 C10.5485,1.78125 10.1635,1.5 9.72864,1.5 L4.27271,1.5 Z"})})},735790:(e,t,o)=>{o.d(t,{M:()=>r});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.25 15.25 11.5",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M3 7.375h6.829a2.501 2.501 0 0 0 4.842 0H17a.625.625 0 1 0 0-1.25h-2.329a2.501 2.501 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25M12.25 5.5a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M7.75 15.75a2.5 2.5 0 0 0 2.421-1.875H17a.625.625 0 1 0 0-1.25h-6.829a2.5 2.5 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25h2.329A2.5 2.5 0 0 0 7.75 15.75m0-1.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})]})},r=(0,o(340498).wt)("sliders",i)},739135:(e,t,o)=>{o.d(t,{KD:()=>c,gt:()=>d,i9:()=>l,ll:()=>a,tb:()=>s,x$:()=>r});var n=()=>o(541235),i=()=>o(496603);function r(e,t){return a(d(e,t))}function a(e){return void 0!==e&&(e===n().q_||e===n().YD)}function s(e,t){if(a(t))return;const o=n().c$[e],i=o.steps.findIndex((e=>e.id===t));return-1===i?o.steps[0].id:i===o.steps.length-1?n().q_:o.steps[i+1].id}function l(e,t){const o=d(e,t);if(o&&!a(o))return s(t,o)}function c(e,t){const o=d(e,t);if(o)return function(e,t){const o=n().c$[e];var r;if(a(t))return null===(r=(0,i().HV)(o.steps))||void 0===r?void 0:r.id;const s=o.steps.findIndex((e=>e.id===t));return-1!==s&&0!==s?o.steps[s-1].id:void 0}(t,o)}function d(e,t){var o;if(!e)return;const i=((null===(o=e.getSettings())||void 0===o?void 0:o.tutorials)||{})[t];return void 0===i?n().c$[t].steps[0].id:i}},742117:(e,t,o)=>{o.d(t,{V:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("chevronRight",{viewBox:"0 0 16 16",directional:!0,svg:(0,n.jsx)("path",{d:"M12.375 8.06445C12.375 7.83203 12.2861 7.63379 12.1084 7.45605L6.77637 2.24023C6.62598 2.08984 6.44141 2.01465 6.22266 2.01465C5.77832 2.01465 5.42285 2.35645 5.42285 2.80078C5.42285 3.01953 5.51172 3.21777 5.66211 3.375L10.4746 8.06445L5.66211 12.7539C5.51855 12.9043 5.42285 13.1025 5.42285 13.3213C5.42285 13.7725 5.77832 14.1143 6.22266 14.1143C6.44141 14.1143 6.62598 14.0391 6.77637 13.8887L12.1084 8.67285C12.293 8.49512 12.375 8.29688 12.375 8.06445Z"})})},747671:(e,t,o)=>{o.d(t,{Q:()=>n,a:()=>i});let n=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});class i extends(()=>o(757695))().Store{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}}},748539:(e,t,o)=>{o.d(t,{f:()=>n});const n=new(o(645873).O2)("pageCovers",(async()=>{const{pageCovers:e}=await o.e(40198).then(o.bind(o,519737));return e}))},756114:(e,t,o)=>{o.d(t,{D:()=>n});function n(e,t){t.route.name;return!1}},768627:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().Store{getInitialState(){return{searchQuery:"",searchLimit:n.limitIncrement,searchPopupOpen:!1,addingPage:!1}}}n.limitIncrement=20,n.resultsCacheTTL=2*o(720665).Xb,n.incrementScrollOffset=200;const i=n},801678:(e,t,o)=>{o.d(t,{A:()=>m});var n=o(296540),i=()=>o(662303),r=()=>o(56366),a=()=>o(959013),s=()=>o(381349),l=()=>o(496603),c=()=>o(284371),d=()=>o(720665),u=()=>o(145214),p=o(474848);const g={isRepositioning:!1};const m=function(e){const t=(0,n.useRef)(null),i=(0,o(484714).v3)(),[a,s]=(0,n.useState)(g),c=(0,n.useCallback)((()=>{s(g)}),[]),{renderControl:u,onFlushTemporaryPosition:m,style:f,source:y,store:v}=e,{isRepositioning:x,image:S,startDragRenderedPosition:b,startDragImageScreenHeight:C}=a,P=(0,r().K8)((()=>0===o(502438).default.state.stores.length),[]),[k,M]=(0,n.useState)(!1),j=(0,r().uB)(e.mouseStore,o(454305).A),w=(0,r().K8)((()=>j.state.mouseEntered),[j]),A=(0,o(401497).IS)((()=>({dragContainer:{width:"100%",cursor:x?"move":"inherit"},container:{position:"relative",width:"100%",zIndex:1}})),[x]),R=(0,r().K8)((()=>function(e,t,o){return(0,l().Et)(o)?o:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,l().Et)(e))return e}const o=.5;if(t.isCollectionView()){const e=t.getCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,d().pN)(t)?o:t}}const n=t.getFormat(),i=n.page_cover_position;if((0,l().Et)(i))return i;return o}(e,t)}(y,v,a.temporaryPosition)),[a.temporaryPosition,y,v]);(0,n.useEffect)((()=>{const e=e=>{const o=t.current;o&&!o.contains(e.target)&&x&&m({imagePosition:R,reset:()=>{j.reset(),c()}})};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)}),[R,x,j,m,c]),x&&!P&&c();const I=(0,n.useMemo)((()=>(0,l().nF)((e=>{j.setState({...j.state,mouseEntered:!0})}),100)),[j]),_=(0,n.useMemo)((()=>(0,l().sg)((e=>{j.setState({...j.state,mouseEntered:!1})}),100)),[j]),B=(0,n.useCallback)(((e,t)=>{o(778417).IU({environment:i});const n=new Image;n.onload=()=>{s((e=>({...e,isRepositioning:!0,image:n})))},t&&(n.src=t)}),[i]),D=(0,n.useCallback)((e=>{m({imagePosition:R,reset:()=>{c()}})}),[R,m,c]),T=(0,n.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,o(819121).p)(t)&&M(!0)}),[]),L=(0,n.useCallback)((()=>{M(!0)}),[]),F=(0,n.useCallback)((e=>{if(S&&x){const e=t.current;if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/S.width*S.height;s((e=>({...e,startDragImageScreenHeight:t,startDragRenderedPosition:R})))}}}),[S,R,x]),E=(0,n.useCallback)((e=>{if(x){const t=e.diffY/(C||0)+(b||0);s((e=>({...e,temporaryPosition:(0,l().LI)((0,o(40845).A)(t,0,1),4)})))}}),[x,C,b]),N=(0,n.useCallback)((()=>{s((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),V=(0,r().K8)((()=>u({handleRepositionClick:B,handleSavePositionClick:D,handleCancelClick:c,isVisible:w||k||x,isRepositioning:x})),[B,D,k,x,w,u,c]),W=(0,o(79043).A)(Boolean(e.preventClickPropagation));return(0,p.jsxs)("div",{ref:t,onFocus:T,onBlur:L,onMouseEnter:I,onMouseMove:I,onMouseLeave:_,...W,...(0,o(955825).AH)(A.container,f),children:[(0,p.jsx)(o(603820).A,{onDraggableDragStart:F,onDraggableDragMove:E,onDraggableDragEnd:N,onDraggableDragCancel:N,disabled:!x,render:t=>(0,p.jsx)("div",{style:A.dragContainer,...t,children:e.render({imagePosition:R,isRepositioning:x})})}),(0,p.jsx)(h,{small:e.small,isRepositioning:x}),V]})};function h(e){let{small:t,isRepositioning:o}=e;if(t)return null;const n={background:s().Ay.blackWithAlpha(.4),borderRadius:4,color:s().Ay.white,fontSize:12,fontFamily:c().vc(i().locale).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,p.jsx)(u().A,{visible:o,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:n,children:(0,p.jsx)(a().sA,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},843141:(e,t,o)=>{o.d(t,{E:()=>a});var n=()=>o(534177),i=()=>o(679924),r=()=>o(476492);function a(e,t,o){var a,s,l;let c="page_properties";const d=(0,r().sl)(t);switch(d.view_type){case void 0:case"page":case"table":c="table";break;case"list":c="list";break;case"gallery":c="gallery";break;case"board":c="board";break;case"calendar":c="calendar";break;case"timeline":c="timeline";break;case"chart":case"form_editor":case"feed":case"map":case"chat":case"custom":break;default:(0,n().HB)(d.view_type)}const u={...o,collection_id:null==t||null===(a=t.collectionStore())||void 0===a?void 0:a.id,collection_view_id:null==t||null===(s=t.collectionViewStore())||void 0===s?void 0:s.id,collection_view_block_id:null==t||null===(l=t.collectionViewBlockStore())||void 0===l?void 0:l.id,from:c};(0,i().v)(e,"copy_property",u)}},843189:(e,t,o)=>{o.d(t,{E:()=>a});var n=o(296540),i=()=>o(960715),r=o(474848);const a=n.forwardRef(((e,t)=>{let{children:n,color:a,disabled:s,iconLeading:l,iconStyle:c,iconTrailing:d,isLoading:u,shape:p="default",size:g="md",style:m,...h}=e;const f=(0,o(963589).X)("nds_button_gap")||Boolean(d),y=(0,o(401497).IS)((e=>{const t=a?`${a}Primary`:"primary",r=a||"regular",d=a?`${a}Hover`:"primaryHover",h=a?`${a}Pressed`:"primaryPressed";return{button:{...(0,i().qq)({shape:p,size:g,hasIconOnly:Boolean(l)&&!n,isButtonGapEnabled:f}),justifyContent:"center",color:e.text[t],background:e.tint[r],opacity:s||u?.3:1,fontWeight:o(284371).Wy.medium,...m},hovered:{background:s?e.tint[r]:e.tint[d]},pressed:{background:s?e.tint[r]:e.tint[h]},icon:{...(0,i().D3)({size:g,hasIconOnly:!n,isButtonGapEnabled:f}),...c}}}),[n,a,s,l,c,f,u,p,g,m]);return(0,r.jsxs)(o(197190).A,{ref:t,style:y.button,hoveredStyle:y.hovered,pressedStyle:y.pressed,disabled:s||u,...h,children:[u?(0,r.jsx)(o(331542).A,{style:{marginRight:4}}):null,l?l(y.icon):null,n,d?d(y.icon):null]})}));a.displayName="TintButton"},846156:(e,t,o)=>{o.d(t,{F:()=>i});var n=()=>o(679924);function i(e,t){(0,n().v)(e,"relation_reorder",t)}},853306:(e,t,o)=>{o.d(t,{A:()=>C});o(581454);var n=o(296540),i=()=>o(662303),r=()=>o(56366),a=()=>o(401497),s=()=>o(66913),l=()=>o(284371),c=()=>o(115512),d=()=>o(141333),u=()=>o(265665),p=()=>o(484595),g=()=>o(704152),m=()=>o(864943),h=()=>o(204063),f=()=>o(125565),y=o(474848);const v=20;function x(e){var t;let{icon:s,iconStyle:u,title:p,subtitle:g,confirmText:x,confirmTextStyle:C="blue",confirmTextPerRadioOption:P,cancelText:k,hideCancelButton:M=!1,radioOptions:j,defaultSelectedRadioOption:w,onDismiss:A,onSelectRadio:R,onConfirm:I,width:_,footer:B}=e;const D=(0,o(484714).v3)(),[T,L]=(0,n.useState)(w??(null===(t=j[0])||void 0===t?void 0:t.key)),F=(0,r().uB)(void 0,o(17090).A),E=(0,r().K8)((()=>null==F?void 0:F.state.elementRef),[F]),N=(0,d().CR)(E),V=(0,d().yE)(E),W=(0,d().o7)(E),U=V>0,z=Math.ceil(V+W)<Math.floor(N),H=(0,n.useCallback)((e=>{e!==T&&(L(e),null==R||R(e))}),[R,T]),O=(0,n.useCallback)((()=>{I(T)}),[I,T]),K=(0,a().IS)((e=>{const t={marginLeft:-20,marginRight:-20,height:1,borderTop:`1px solid ${e.regularDividerColor}`,transition:"opacity 200ms"};return{container:{display:"flex",position:"relative",flexDirection:"column",justifyContent:"center",overflow:"hidden",width:`min(${_??400}px, calc(100vw - 40px))`,maxHeight:"80vh",padding:v,borderRadius:6,alignItems:"stretch"},icon:{width:36,height:36,fill:e.icon.secondary,marginBottom:6,...u},iconContainer:{width:"100%",display:"flex",justifyContent:"center"},title:{fontFamily:l().vc(i().locale).sans,fontSize:17,lineHeight:"22px",fontWeight:l().Wy.medium,textAlign:"center",marginBottom:14},subtitle:{fontFamily:l().vc(i().locale).sans,fontSize:(0,c().ny)(D,"UIRegular"),lineHeight:(0,c().ks)(D,"UIRegular"),fontWeight:l().Wy.regular,marginTop:6,marginBottom:6,textAlign:"center"},radioContainer:{display:"flex",flexDirection:"column",gap:8},topDivider:{...t,opacity:U?1:0},bottomDivider:{...t,opacity:z?1:0},scroller:{marginLeft:-20,marginRight:-20,paddingLeft:v,paddingRight:v},actionButtonsContainer:{display:"flex",flexDirection:"column",marginTop:20},cancelButton:{marginTop:8,justifyContent:"center"},dismissButton:{position:"absolute",top:10,right:10,zIndex:1}}}),[D,u,z,U,_]),q=(null==P?void 0:P[T])??x;return(0,y.jsxs)("div",{style:K.container,children:[(0,y.jsx)("div",{style:K.dismissButton,children:(0,y.jsx)(S,{onClick:A})}),s&&(0,y.jsx)("div",{style:K.iconContainer,children:s(K.icon)}),(0,y.jsx)(f().A,{isMultiline:!0,style:K.title,children:p}),g&&(0,y.jsx)(f().A,{isSmall:!0,style:K.subtitle,isMultiline:!0,children:g}),j.length>0&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{style:K.topDivider}),(0,y.jsx)(o(2143).H,{type:o(756279).A.Y,style:K.scroller,store:F,children:(0,y.jsx)("div",{style:K.radioContainer,children:j.map((e=>(0,y.jsx)(b,{radioItem:e,isSelected:e.key===T,onSelectRadio:H,left:e.left},e.key)))})}),(0,y.jsx)("div",{style:K.bottomDivider})]}),(0,y.jsxs)("div",{style:K.actionButtonsContainer,children:["blue"===C?(0,y.jsx)(h().A,{size:"lg",onClick:O,children:q}):"red"===C?(0,y.jsx)(h().A,{size:"lg",onClick:O,isRed:!0,children:q}):(0,y.jsx)(m().A,{size:"lg",onClick:O,children:q}),!M&&(0,y.jsx)(m().A,{size:"lg",onClick:A,style:K.cancelButton,children:k??(0,y.jsx)(o(959013).sA,{id:"radioModal.cancel",defaultMessage:"Cancel"})})]}),B]})}function S(e){let{onClick:t}=e;const o=(0,a().IS)((e=>({button:{display:"flex",justifyContent:"center",alignItems:"center",width:24,height:24,borderRadius:"100%",background:e.lightGrayButtonBackground},buttonHovered:{background:e.lightGrayButtonHoveredBackground},buttonPressed:{background:e.lightGrayButtonPressedBackground},closeIcon:{width:16,height:16,fill:e.icon.secondary}})),[]);return(0,y.jsx)(g().A,{style:o.button,hoveredStyle:o.buttonHovered,pressedStyle:o.buttonPressed,onClick:t,children:(0,s().V)(o.closeIcon)})}function b(e){let{radioItem:t,isSelected:o,onSelectRadio:n,left:i}=e;const r=(0,a().IS)((e=>({button:{display:"flex",justifyContent:"space-between",gap:10,height:"auto",minHeight:70,borderRadius:8,paddingTop:12,paddingBottom:12,paddingLeft:14,paddingRight:14-p().p,border:void 0,boxShadow:o?`inset 0 0 0 1px ${e.icon.uiBluePrimary}`:`inset 0 0 0 1px ${e.stroke.primary}`},buttonText:{display:"flex",flexDirection:"column",gap:2,...l().RC},optionTitle:{fontWeight:l().Wy.medium},optionSubtitle:{whiteSpace:"break-spaces"},left:{display:"flex",alignItems:"center",justifyContent:"center"}})),[o]);return(0,y.jsxs)(m().A,{size:"lg",onClick:()=>n(t.key),style:r.button,children:[i&&(0,y.jsx)("div",{style:r.left,children:i}),(0,y.jsxs)("div",{style:r.buttonText,children:[(0,y.jsx)(f().A,{style:r.optionTitle,children:(0,y.jsx)(u().j,{children:t.title})}),t.subtitle&&(0,y.jsx)(f().A,{isSmall:!0,isMultiline:!0,style:r.optionSubtitle,children:t.subtitle})]}),(0,y.jsx)(p().A,{isSelected:o})]})}const C=n.memo(x)},867772:(e,t,o)=>{o.d(t,{Ay:()=>l,Gi:()=>r,Wc:()=>n,pF:()=>a,vS:()=>i});const n="loadingLocalImage",i="uploading",r="downloading",a="loaded";class s extends(()=>o(757695))().Store{getInitialState(){return{loadingMode:a}}}const l=s},870578:(e,t,o)=>{o.d(t,{N:()=>h,k:()=>m});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577);var n=()=>o(584262),i=()=>o(970013),r=()=>o(713998),a=()=>o(921940),s=()=>o(562800),l=()=>o(765957),c=()=>o(217429),d=()=>o(712505),u=()=>o(630116),p=()=>o(727395),g=()=>o(435009);function m(e){let{relationPointers:t,relatedPageStore:o,environment:i,from:r,peekMode:c,openInNew:m}=e;const{mainEditorCurrentBlockStore:h}=l().default.state;if(!h)return;const f=t.find((e=>e.id===o.id));if(!f)return;let y;if(m){const e=u().Bv.createChildStore(h,f),t=e.getModel(),o=s().E2(i,e);y=(0,a().A)({pageId:f.id,pageModel:t,baseUrl:o,pageVisitSource:n().y8.MentionInPage})}else{const e=h.getModel(),t=s().E2(i,h);y=(0,a().A)({pageId:h.id,pageModel:e,baseUrl:t,peekViewBlockId:f.id,peekMode:(0,d().getUrlParamFromPeekMode)("full_page"===c?void 0:c??d().default.state.mode),pageVisitSource:n().y8.MentionInPage}),(0,p()._)(i,{from:r,meta_click:Boolean(m)})}g().oo({environment:i,url:y,openInNew:m})}async function h(e){var t,o;const{update:n,environment:a,store:s,collectionStore:d,propertySchema:p}=e,g=s.state.isOpen?s.state:null,m=new Set(n.oldValues),h=n.newValues.filter((e=>!m.has(e)));if(!c().default.checkGate({gateName:"relation_two_way_limit_of_1_add_relation_confirmation_dialog"}))return!1;const f=l().default.state.currentUserSettingsStore;if(Boolean(null==f?void 0:f.getSettingsStore().getKeyStore("relation_limit_confirmation_dialog_dismissed_at").getValue()))return!1;if(1!==h.length||!g)return!1;const y=g.property,v=(null===(t=g.collectionContextStore)||void 0===t?void 0:t.collectionViewStore())||(null==d||null===(o=d.getParentBlockStore())||void 0===o?void 0:o.getCollectionViewStores()[0]);if(!d||!v||!p)return!1;const x=await async function(e){const{collectionStore:t,property:o,environment:n,targetCollectionStore:r}=e,a=t.getSchema()[o];if(!a||"relation"!==a.type)return!1;const s=i().Nv(a),l=a.property;if(!s||!l)return!1;const c=r??new(u().md)(n,s);await c.load();const d=c.getSchema();if(!(0,i().rd)({propertySchema:a,property:o,sourceCollectionId:t.id,targetCollectionSchema:d}))return!1;const p=d[l];return!(!p||"relation"!==p.type)&&Boolean(p.limit)}({collectionStore:d,property:y,environment:a});if(!x)return!1;const S=await async function(e){const{collectionStore:t,relationPointer:o,environment:n,property:i}=e,a=new(u().Bv)(n,o);await a.load();const s=t.getSchema()[i];if(!s||"relation"!==s.type)return;const l=s.property;if(!l)return;const c=a.getPropertyValue(l);if(!c)return;const[d]=r().n(c);return d}({collectionStore:d,relationPointer:h[0],property:y,environment:a});if(!S)return!1;const b=new(u().Bv)(a,S);await b.load();return{blockWithExistingRelationTitle:b.getPropertyValue("title"),currentBlockTitle:g.store.getPropertyValue("title"),update:n,canAccessBlockWithExistingRelation:b.canRead()}}},882827:(e,t,o)=>{o.d(t,{p:()=>a});o(296540);var n=()=>o(783982),i=()=>o(340498),r=o(474848);function a(e,t){const{viewBox:o,svg:a}=t,s=o??`0 0 ${i().Ev.default} ${i().Ev.default}`;return Object.assign((t=>{let{style:o,className:i,label:l,animationState:c}=t;const d=i?`${e} ${i}`:e;return(0,r.jsx)(n().A,{viewBox:s,className:d,style:o,label:l,children:a(c)})}),{__iconDefinition:{viewBox:s,svg:a("initial")}})}},887480:(e,t,o)=>{o.d(t,{Ay:()=>i().A,yQ:()=>a});var n=()=>o(645873),i=()=>o(853306);const r=new(n().O2)("radioModalRenderer",(()=>o.e(35818).then(o.bind(o,415995)))),a=(0,n()._h)(r,(e=>e.default))},922189:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>i,personCircleFillIcon:()=>r});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10 5.125c-.95 0-1.723.393-2.245 1.044-.51.635-.75 1.474-.75 2.346s.24 1.71.75 2.346c.522.65 1.295 1.044 2.245 1.044s1.723-.394 2.245-1.044c.51-.635.75-1.474.75-2.346s-.24-1.711-.75-2.346c-.522-.65-1.294-1.044-2.245-1.044"}),(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 0 0-4.087 11.268C6.702 13.495 8.246 12.56 10 12.56s3.298.934 4.087 2.332A6.375 6.375 0 0 0 10 3.626"})]})},r=(0,o(340498).wt)("personCircleFill",i)},964492:(e,t,o)=>{o.d(t,{e:()=>d});var n=o(296540),i=()=>o(132855),r=()=>o(59442),a=o(474848);const s={viewBox:"2.37 2.37 15.25 15.26",svg:e=>{const t=(0,o(206267).JW)(),n="all 0.548s linear(\n    \t\t\t\t\t\t0, 0.006, 0.022 2%, 0.091 4.3%, 0.52 14%, 0.624, 0.71 19.3%, 0.784,\n    \t\t\t\t\t\t0.846 24.9%, 0.895 27.9%, 0.934, 0.961 34.4%, 0.98 37.9%, 0.993 42%,\n    \t\t\t\t\t\t1.001 46.8%, 1.004 55.3%, 1\n  \t\t\t\t\t\t)",i={transformOrigin:"bottom center",transition:n},r={translate:"0 -14px",scale:"70%",opacity:0},s={translate:"0 10px",scale:"70%",opacity:0,transformOrigin:"top center",transition:n},l={translate:"0 0",scale:"100%",opacity:1};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:t,children:(0,a.jsx)("rect",{x:"2.5",y:"2.5",width:"15",height:"15",rx:"7.5"})})}),(0,a.jsx)("rect",{x:"2.5",y:"2.5",width:"15",height:"15",rx:"7.5"}),(0,a.jsx)("g",{clipPath:`url(#${t})`,children:(0,a.jsx)("path",{style:{...i,..."animate"===e?r:{}},d:"M13.0419 9.55439C12.7978 9.79847 12.4021 9.79847 12.158 9.55439L10.625 8.02136L10.625 13.4874C10.625 13.8326 10.3452 14.1124 10 14.1124C9.65482 14.1124 9.375 13.8326 9.375 13.4874L9.375 8.02131L7.84192 9.5544C7.59784 9.79847 7.20211 9.79847 6.95804 9.5544C6.71396 9.31032 6.71396 8.91459 6.95803 8.67051L9.55803 6.07051C9.67524 5.9533 9.83421 5.88745 9.99997 5.88745C10.1657 5.88745 10.3247 5.9533 10.4419 6.07051L13.0419 8.67051C13.286 8.91459 13.286 9.31032 13.0419 9.55439Z",fill:"white"})}),(0,a.jsx)("g",{clipPath:`url(#${t})`,children:(0,a.jsx)("path",{style:{...s,..."animate"===e?l:{}},d:"M13.0419 9.55439C12.7978 9.79847 12.4021 9.79847 12.158 9.55439L10.625 8.02136L10.625 13.4874C10.625 13.8326 10.3452 14.1124 10 14.1124C9.65482 14.1124 9.375 13.8326 9.375 13.4874L9.375 8.02131L7.84192 9.5544C7.59784 9.79847 7.20211 9.79847 6.95804 9.5544C6.71396 9.31032 6.71396 8.91459 6.95803 8.67051L9.55803 6.07051C9.67524 5.9533 9.83421 5.88745 9.99997 5.88745C10.1657 5.88745 10.3247 5.9533 10.4419 6.07051L13.0419 8.67051C13.286 8.91459 13.286 9.31032 13.0419 9.55439Z",fill:"white"})})]})}},l=(0,o(882827).p)("arrowInCircleUpAnimated",s);const c={eligible_for_upgrade:{icon:{type:"animated",iconFn:l},iconColor:"uiBluePrimary",highlightColor:"uiBluePrimary",label:{button:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.outlineButton",defaultMessage:"Upgrade now"})},text:e=>{let{intl:t,productDisplayName:o,renderTextHighlight:n}=e;return t.formatMessage({id:"upgrade.text",defaultMessage:"<highlight>Upgrade</highlight> {hasProductDisplayName, select, true {to {productName}} other {for access}}"},{highlight:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return n?n(t):t},hasProductDisplayName:Boolean(o),productName:o})},icon:e=>{let{intl:t,productDisplayName:o}=e;return t.formatMessage({id:"upgrade.iconTooltip",defaultMessage:"Upgrade {hasProductDisplayName, select, true {to {productName}} other {}} for access"},{hasProductDisplayName:Boolean(o),productName:o})}}},eligible_for_trial:{icon:{type:"animated",iconFn:o(201361).P},iconColor:"orangePrimary",highlightColor:"orangeSecondary",label:{button:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.trial.button",defaultMessage:"Try for free"})},text:e=>{let{intl:t,renderTextHighlight:o}=e;return t.formatMessage({id:"upgrade.trial.text",defaultMessage:"<highlight>Try</highlight> for free"},{highlight:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o?o(t):t}})},icon:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.trial.iconTooltip",defaultMessage:"Try for free"})}}},sales_eligible:{icon:{type:"static",iconFn:r().paperPlaneFillIcon},iconColor:"secondary",highlightColor:"secondary",label:{button:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.sales.button",defaultMessage:"Contact sales"})},text:e=>{let{intl:t,renderTextHighlight:o}=e;return t.formatMessage({id:"upgrade.sales.text",defaultMessage:"<highlight>Contact sales</highlight> to learn more"},{highlight:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o?o(t):t}})},icon:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.sales.iconTooltip",defaultMessage:"Contact sales to learn more"})}}},sales_assisted:{icon:{type:"static",iconFn:r().paperPlaneFillIcon},iconColor:"secondary",highlightColor:"secondary",label:{button:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.sales.button",defaultMessage:"Contact sales"})},text:e=>{let{intl:t,renderTextHighlight:o}=e;return t.formatMessage({id:"upgrade.sales.text",defaultMessage:"<highlight>Contact sales</highlight> to learn more"},{highlight:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o?o(t):t}})},icon:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.sales.iconTooltip",defaultMessage:"Contact sales to learn more"})}}},eligible_to_request:{icon:{type:"animated",iconFn:l},iconColor:"uiBluePrimary",highlightColor:"uiBluePrimary",label:{button:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.request.button",defaultMessage:"Request"})},text:e=>{let{intl:t,productDisplayName:o,renderTextHighlight:n}=e;return t.formatMessage({id:"upgrade.request.text",defaultMessage:"<highlight>Request</highlight> {hasProductDisplayName, select, true {access to {productName}} other {access}}"},{highlight:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return n?n(t):t},hasProductDisplayName:Boolean(o),productName:o})},icon:e=>{let{intl:t,productDisplayName:o}=e;return t.formatMessage({id:"upgrade.request.iconTooltip",defaultMessage:"Request {hasProductDisplayName, select, true {access to {productName}} other {access}}"},{hasProductDisplayName:Boolean(o),productName:o})}}},not_eligible:{icon:{type:"static",iconFn:i().arrowInCircleUpFillIcon},iconColor:"grayPrimary",highlightColor:"grayPrimary",label:{button:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.outlineButton",defaultMessage:"Upgrade now"})},text:e=>{let{intl:t,productDisplayName:o,renderTextHighlight:n}=e;return t.formatMessage({id:"upgrade.text",defaultMessage:"<highlight>Upgrade</highlight> {hasProductDisplayName, select, true {to {productName}} other {for access}}"},{highlight:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return n?n(t):t},hasProductDisplayName:Boolean(o),productName:o})},icon:e=>{let{intl:t,productDisplayName:o}=e;return t.formatMessage({id:"upgrade.iconTooltip",defaultMessage:"Upgrade {hasProductDisplayName, select, true {to {productName}} other {}} for access"},{hasProductDisplayName:Boolean(o),productName:o})}},disabledTooltip:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.not.eligible.disabledTooltip",defaultMessage:"You're not eligible to upgrade"})}},request_pending:{icon:{type:"static",iconFn:i().arrowInCircleUpFillIcon},iconColor:"grayPrimary",highlightColor:"grayPrimary",label:{button:e=>{let{intl:t}=e;return t.formatMessage({id:"upgrade.requestPending.button",defaultMessage:"Pending"})},text:e=>{let{intl:t,productDisplayName:o,renderTextHighlight:n}=e;return t.formatMessage({id:"upgrade.requestPending.text",defaultMessage:"<highlight>Requested</highlight>{space}{hasProductDisplayName, select, true {access to {productName}} other {access}}{space}is{space}<highlight>pending</highlight>"},{highlight:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return n?n(t):t},space:(0,a.jsx)(a.Fragment,{children:" "}),hasProductDisplayName:Boolean(o),productName:o})},icon:e=>{let{intl:t,productDisplayName:o}=e;return t.formatMessage({id:"upgrade.requestPending.iconTooltip",defaultMessage:"Requested {hasProductDisplayName, select, true {access to {productName}} other {access}} is pending"},{hasProductDisplayName:Boolean(o),productName:o})}},disabledTooltip:e=>{let{intl:t,productDisplayName:o}=e;return t.formatMessage({id:"upgrade.requestPending.disabledTooltip",defaultMessage:"Requested {hasProductDisplayName, select, true {access to {productName}} other {access}} is pending"},{hasProductDisplayName:Boolean(o),productName:o})}}};function d(e){return n.useMemo((()=>c[e]),[e])}},965597:(e,t,o)=>{o.d(t,{Hb:()=>i,Hm:()=>a,ko:()=>r});o(898992),o(354520),o(581454);var n=()=>o(979340);function i(e){let{space:t,trustedDomains:o,enableTrustedDomainPermissionRedesign:i}=e;return t&&r(t)?i?(0,n().OX)(t.subscription_tier)?(o||[]).filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())):t.getEmailDomains():(o||[]).filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())):[]}function r(e){return Boolean(e&&(0,n().jR)(e.subscription_tier))}function a(e){return!(!e||!r(e))&&(!(0,n().OX)(e.subscription_tier)||(e.getSettings().domain_link_sharing_enabled??!0))}},976721:(e,t,o)=>{o.d(t,{Dw:()=>b,Hc:()=>S,o5:()=>x});o(16280),o(296540);var n=()=>o(857639),i=()=>o(243581),r=()=>o(340498),a=()=>o(273900),s=()=>o(161479),l=()=>o(959013),c=()=>o(496603),d=()=>o(701763),u=()=>o(901389),p=()=>o(579627),g=()=>o(751156),m=()=>o(125565),h=()=>o(247123),f=()=>o(406792),y=()=>o(630116),v=o(474848);async function x(e){let{newRole:t,...o}=e;const n=o.oldPermissionItem,i=(0,c().o8)(n);return i.role=t,await S({newPermissionItem:i,...o})}async function S(e){const{oldPermissionItem:t,newPermissionItem:o,wasInherited:i,environment:r,store:l,sudoModeStore:c,restrictingVisibility:u,fromPermissionWrapper:m,trustedDomainsLoggingData:h}=e;if(!(0,a().nK)(t,o))throw new Error("Permission type mismatch.");const v=!!c&&c.shouldSaveTransactionWithSudoMode(l),x=(0,a().$q)(t.role,o.role);if(i&&x!==o.role||u){return await b({environment:r,useSudoMode:v,store:l,permissionItem:o,fromPermissionWrapper:m,shouldInherit:!0,trustedDomainsLoggingData:h})}return l instanceof y().Bv&&!l.isTopLevel()&&t.role!==o.role&&x!==t.role&&d().MR(r),g().createAndCommit({userAction:"PermissionItem.handlePermissionItemChange",environment:r,canUndo:!0,useSudoMode:v,perform:t=>{const n=f().default.DO_NOT_USE_markLegacy("share_menu.update_page_permission_lag");p().wd({environment:r,store:l,permissionItems:[o],transaction:t,pagePermissionChangeLocation:e.location,metric:n,fromPermissionWrapper:m})}}),"trusted_domain_permission"===o.type&&n().log({level:"warning",from:"shareMenu.handlePermissionItemChange",type:"TrustedDomainPermissionChange",spaceId:(0,s().e)(l.pointer.spaceId),data:{miscDataToConvertToString:{message:"shareMenu.handlePermissionItemChange updating trusted domain permission",blockId:l.id,oldPermissionItem:t,newPermissionItem:o,trustedDomainsLoggingData:h}}}),!0}async function b(e){const{environment:t,useSudoMode:o,store:n,permissionItem:a,fromPermissionWrapper:s,shouldInherit:c,trustedDomainsLoggingData:d}=e,f="none"===(null==a?void 0:a.role)?{type:"remove",permissionItem:a}:{type:"restrict"};return!!("user_permission"===(null==a?void 0:a.type)&&(null==a?void 0:a.user_id)===t.currentUser.id||(await u().Gh({message:(0,h().r6)(f),description:(0,v.jsx)(m().A,{isSmall:!0,isMultiline:!0,children:(0,v.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.footer.whisperTextV2",defaultMessage:"Changing this will unlink this page from its parent, so it will no longer inherit share settings. Admins can still restore settings on unlinked pages."})}),acceptLabel:(0,h().QU)(f),icon:(0,i().r)({height:r().Ev.xl,width:r().Ev.xl})})).accept)&&(g().createAndCommit({userAction:"PermissionItem.onAccept",environment:t,canUndo:!0,useSudoMode:o,perform:e=>{p().wW({environment:t,store:n,permissionItem:a,shouldInherit:c,transaction:e,fromPermissionWrapper:s,trustedDomainsLoggingData:d})}}),!0)}},990402:(e,t,o)=>{o.d(t,{m:()=>i});var n=()=>o(46986);function i(e){return("workflow"===e.getType()||e.isCollectionView()&&e.getWorkflowStore())&&e.canEdit()&&!e.isSystemBlock()&&(0,n().re)()}}}]);