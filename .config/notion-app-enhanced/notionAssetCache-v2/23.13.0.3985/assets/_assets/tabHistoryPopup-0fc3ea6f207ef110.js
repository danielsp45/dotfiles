"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[94146],{580032:(e,t,n)=>{n.r(t),n.d(t,{TabHistoryPopup:()=>P});n(898992),n(354520),n(581454);var i=n(296540),o=()=>n(484714),r=()=>n(56366),s=()=>n(175947),a=()=>n(534177),c=()=>n(897119),l=()=>n(644914),d=()=>n(962730),p=()=>n(377586),u=()=>n(948914),g=()=>n(492553),y=()=>n(38864),m=()=>n(135985),h=()=>n(836251);var b=()=>n(401497),x=()=>n(248265),f=()=>n(805751),j=()=>n(928600),v=()=>n(939740),I=()=>n(89924),k=()=>n(728611),R=()=>n(722872),A=()=>n(187820),C=n(474848);const E=i.forwardRef((function(e,t){let{store:i,...o}=e;const s=(0,r().K8)((()=>i.getIcon()),[i]),{isEmptyPage:a,canRead:c,iconRecordCategory:l}=(0,r().K8)((()=>({isEmptyPage:i.isEmptyPage(),canRead:i.canRead(),iconRecordCategory:(0,A().Te)(i)})),[i]),d=(0,b().IS)((e=>({icon:{fill:e.sidebarSecondaryColor}})),[]);return(0,C.jsx)(n(760217).A,{...o,ref:t,disabled:!c,title:(0,C.jsx)(n(16006).A,{store:i}),icon:(0,C.jsx)(A().B6,{disabled:!0,icon:s,iconRecordCategory:l,isEmptyPage:a,size:20,pageIconStyle:d.icon,largeIcon:!0,disableAnimation:!0}),ignoreLocalHoverState:!1})}));function T(e){let{entries:t}=e;const n=(0,o().v3)(),r=(0,i.useCallback)((()=>{y().I.update((e=>({...e,open:!1})))}),[]),s=(0,i.useCallback)(((e,t)=>{const i=(0,k().Vr)(e);x().xD(n,t,i),r()}),[r,n]),a=(0,i.useMemo)((()=>[{key:"tab-history-section",items:t.map((e=>{let{store:t,historyId:n}=e;return{key:n,action:e=>{s(e.event,n)},render:e=>(0,C.jsx)(E,{...e,store:t})}})),render:e=>(0,C.jsx)(I().A,{...e})}]),[t,s]),c=(0,b().IS)((()=>({modal:{minWidth:230,maxHeight:"70vh"}})),[]);return(0,C.jsx)("div",{style:c.modal,children:(0,C.jsx)(f().A,{debugName:"TabHistoryMenu",capture:!0,allowEsc:!0,children:(0,C.jsx)(j().A,{menuType:R().gu.Popup,children:(0,C.jsx)(v().Ay,{type:v().Oh.Vertical,initialFocus:void 0,sections:a})})})})}function P(){const e=(0,o().v3)(),[t,n]=(0,i.useState)(),{open:b,direction:x}=(0,r().K8)((()=>y().I.getState()),[]),f=(0,r().K8)((()=>b?g().H.getHistoryEntries(x).map((e=>{const t=function(e){const t=(0,h().wU)(e);if(t)return(0,m().AK)(t)}(e.url);if(t)return{store:t,historyId:e.historyId}})).filter(a().O9):[]),[x,b]),j=(0,r().O$)(u().b),v=(0,r().K8)((()=>(0,l().km)(e)),[e]);return(0,i.useEffect)((()=>{n(new DOMRect(v,j?0:(0,s().ek)(e.device.isElectronMac)+10,0,0))}),[v,j,e.device.isElectronMac]),f.length?(0,C.jsx)(c().Ay,{popupType:p().n.Popup,render:()=>(0,C.jsx)(T,{entries:f}),open:b,originRect:t,placementToOrigin:d().W.Right,alignmentToOrigin:d().C.Start,originGap:10,onDismiss:()=>{y().I.update((e=>({...e,open:!1})))},trapFocus:!0,disableFlippingPlacement:!0}):null}}}]);