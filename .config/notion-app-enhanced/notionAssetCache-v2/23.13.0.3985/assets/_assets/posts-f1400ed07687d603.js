"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[3476,43396],{29037:(e,t,o)=>{o.r(t),o.d(t,{checkmarkIcon:()=>i,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.92 3.91 12.17 12.18",svg:(0,o(474848).jsx)("path",{d:"M15.784 4.002a.625.625 0 0 1 .214.857L9.445 15.784a.625.625 0 0 1-1.01.085l-4.37-5.098a.625.625 0 0 1 .948-.814l3.806 4.44 6.109-10.181a.625.625 0 0 1 .857-.214"})},i=(0,o(340498).wt)("checkmark",n)},57145:(e,t,o)=>{var n=o(746518),i=o(179504),r=o(479306),s=o(225397),a=o(435370),l=o(344124),d=o(206469),c=Array,u=i(l("Array","sort"));n({target:"Array",proto:!0},{toSorted:function(e){void 0!==e&&r(e);var t=s(this),o=a(c,t);return u(o,e)}}),d("toSorted")},70423:(e,t,o)=>{o.d(t,{L:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("bellDisabled",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7 15.2285C6.48047 15.2285 6.02246 15.11 5.62598 14.873C5.23405 14.6406 4.92188 14.333 4.68945 13.9502C4.46159 13.5719 4.33854 13.1618 4.32031 12.7197H1.51074C1.15072 12.7197 0.868164 12.6331 0.663086 12.46C0.462565 12.2822 0.362305 12.0475 0.362305 11.7559C0.362305 11.5143 0.426107 11.2842 0.553711 11.0654C0.681315 10.8421 0.843099 10.6279 1.03906 10.4229C1.23958 10.2178 1.44466 10.015 1.6543 9.81445C1.8138 9.65951 1.93685 9.45671 2.02344 9.20605C2.11003 8.9554 2.17611 8.67969 2.22168 8.37891C2.26725 8.07812 2.30371 7.77051 2.33105 7.45605C2.34017 7.08691 2.36296 6.73828 2.39941 6.41016C2.44043 6.08203 2.49512 5.77669 2.56348 5.49414L3.73926 6.66992C3.71647 6.8431 3.69596 7.02539 3.67773 7.2168C3.66406 7.4082 3.65495 7.60872 3.65039 7.81836C3.63216 8.12826 3.60482 8.41536 3.56836 8.67969C3.5319 8.94401 3.48405 9.18555 3.4248 9.4043C3.36556 9.62305 3.29264 9.81901 3.20605 9.99219C3.12402 10.1654 3.02604 10.3158 2.91211 10.4434C2.80273 10.571 2.68652 10.6963 2.56348 10.8193C2.44499 10.9378 2.33561 11.0472 2.23535 11.1475C2.13965 11.2477 2.06217 11.3275 2.00293 11.3867V11.4688H8.54492L10.0078 12.9385H9.64551C9.59538 13.3532 9.45182 13.7337 9.21484 14.0801C8.98242 14.4264 8.6748 14.7044 8.29199 14.9141C7.91374 15.1237 7.48307 15.2285 7 15.2285ZM7 14.1348C7.38737 14.1348 7.70866 14.0072 7.96387 13.752C8.21908 13.4967 8.35807 13.1527 8.38086 12.7197H5.6123C5.63965 13.1527 5.78092 13.4967 6.03613 13.752C6.29134 14.0072 6.61263 14.1348 7 14.1348ZM4.01953 2.99902C4.15625 2.89421 4.30208 2.7985 4.45703 2.71191C4.61654 2.62533 4.78516 2.55241 4.96289 2.49316C5.09049 2.04199 5.33431 1.66374 5.69434 1.3584C6.05436 1.05306 6.48958 0.900391 7 0.900391C7.50586 0.900391 7.9388 1.05306 8.29883 1.3584C8.65885 1.66374 8.90495 2.04199 9.03711 2.49316C9.9349 2.81673 10.5889 3.41146 10.999 4.27734C11.4137 5.14323 11.6416 6.2666 11.6826 7.64746C11.7008 7.9209 11.7282 8.17383 11.7646 8.40625C11.8011 8.63411 11.849 8.84603 11.9082 9.04199C11.972 9.2334 12.0518 9.41113 12.1475 9.5752C12.2477 9.73926 12.3685 9.89648 12.5098 10.0469C12.7786 10.3021 13.0293 10.5664 13.2617 10.8398C13.4941 11.1133 13.6104 11.4027 13.6104 11.708C13.6104 11.9587 13.5329 12.166 13.3779 12.3301L10.6641 9.55469C10.5911 9.39518 10.5342 9.22884 10.4932 9.05566C10.4567 8.87793 10.4271 8.68424 10.4043 8.47461C10.3815 8.26497 10.361 8.03027 10.3428 7.77051C10.3245 6.80892 10.222 6.04557 10.0352 5.48047C9.84831 4.91081 9.60449 4.4847 9.30371 4.20215C9.00293 3.9196 8.66569 3.72819 8.29199 3.62793C8.20996 3.6097 8.14616 3.5778 8.10059 3.53223C8.05501 3.4821 8.02767 3.41146 8.01855 3.32031C8.00033 2.97396 7.90007 2.69368 7.71777 2.47949C7.54004 2.2653 7.30078 2.1582 7 2.1582C6.69922 2.1582 6.45768 2.2653 6.27539 2.47949C6.0931 2.69368 5.99284 2.97396 5.97461 3.32031C5.97005 3.41146 5.94271 3.4821 5.89258 3.53223C5.84701 3.5778 5.78548 3.6097 5.70801 3.62793C5.57585 3.66439 5.44824 3.70996 5.3252 3.76465C5.20671 3.81934 5.09277 3.88542 4.9834 3.96289L4.01953 2.99902ZM0.615234 2.35645C0.514974 2.25163 0.464844 2.12402 0.464844 1.97363C0.464844 1.81868 0.514974 1.6888 0.615234 1.58398C0.724609 1.47917 0.854492 1.42676 1.00488 1.42676C1.15983 1.42676 1.28971 1.47917 1.39453 1.58398L13.8086 13.9912C13.9134 14.096 13.9658 14.2236 13.9658 14.374C13.9658 14.5244 13.9134 14.6543 13.8086 14.7637C13.7038 14.8685 13.5739 14.9209 13.4189 14.9209C13.2686 14.9209 13.141 14.8685 13.0361 14.7637L0.615234 2.35645Z"})})},75544:(e,t,o)=>{o.d(t,{A:()=>g});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520);var n=o(296540),i=()=>o(908006),r=()=>o(56366),s=()=>o(564787),a=()=>o(921598),l=()=>o(737658),d=()=>o(336811),c=()=>o(496603),u=()=>o(183558),p=()=>o(346923);function m(e){const{reducerId:t,instanceId:o,reducer:n,collectionContextStore:i,groupsPointer:r}=e,s=i.reducersStore.state,l=s[t];let d,u;if(r&&r.length>0&&(d=(0,a().Hm)(r)),n){if(u={instanceIds:c().sb([...(null==l?void 0:l.instanceIds)||[],o]),reducer:n},d){i.reducerDependencies.has(d)||i.reducerDependencies.set(d,new Set);const e=i.reducerDependencies.get(d);null==e||e.add(t)}}else{if(d){const e=i.reducerDependencies.get(d);e&&(e.delete(t),0===e.size&&i.reducerDependencies.delete(d))}const e=c().FF((null==l?void 0:l.instanceIds)||[],o);u=l&&e.length>0?{instanceIds:e,reducer:l.reducer}:void 0}c().n4(l,u)||i.reducersStore.setState({...s,[t]:u})}function g(e){const{id:t,reducer:o,collectionContextStore:g,groupsPointer:f,debounceWait:h}=e,v=(0,p().l)(f),y=(0,p().l)(o),S=(0,r().K8)((()=>g.collectionViewStore()),[g]),x=(0,r().K8)((()=>g.normalizedFormatStore.state.collection_pointer),[g.normalizedFormatStore]),b=(0,r().K8)((()=>{var e;return null==S||null===(e=S.getFormatStore())||void 0===e?void 0:e.getKeyStore("collection_view_source").getValue()}),[S]),C=(0,n.useRef)(!1),k=(0,d().O)(),[w,I]=(0,n.useReducer)(((e,t)=>c().n4(e,t)?e:t),void 0),j=(0,n.useCallback)((()=>{const e=g.localResultStore.state,o=g.remoteResultStore.state,n=e&&"reducer"===e.type?e.reducerResults[t]:void 0,i=o&&"reducer"===o.type?o.reducerResults[t]:void 0;return function(e){const{reducerId:t,localReducerResult:o,remoteReducerResult:n,collectionContextStore:i,reducer:r}=e,d=i.reducersStore.state,u=i.remoteResultStore.state,p=i.isClientModeEnabledStore.state;if(p)return o;const m=i.isCreatingNewChartCollectionStore.state,g=i.wasCreatedThisSessionStore.state;if("aggregation"===r.type){if(m&&g){return Boolean(n&&"aggregation"===n.type&&"number"===n.aggregationResult.type&&0!==n.aggregationResult.value)&&i.isCreatingNewChartCollectionStore.setState(!1),o}if(n)return n;const e=Boolean(u&&"reducer"===u.type&&c().I6(u.reducerResults,((e,t)=>{const o=d[t];return!!o&&Boolean("results"===o.reducer.type&&!o.reducer.searchQuery&&"results"===e.type&&e.hasMore&&c().n4(r.filter,o.reducer.filter))})));return e?o:n}if("groups"===r.type){if(m&&g){return Boolean(n&&"groups"===n.type&&("v2"===n.version?n.hasMore:0!==n.total))&&i.isCreatingNewChartCollectionStore.setState(!1),o}if("v2"===r.version){if(o&&"groups"!==o.type||o&&"groups"===o.type&&"v2"!==o.version)return;if(n&&"groups"!==n.type||n&&"groups"===n.type&&"v2"!==n.version)return;const e=function(e){var t;const{reducerId:o,reducer:n,collectionContextStore:i,wasCreatedThisSession:r,localReducerResult:d,remoteReducerResult:c}=e;if(!n.blockResults&&!o.includes(a().RO))return c;let u,p;n.aggregation&&(c?u=c.aggregationResults:d&&(u=d.aggregationResults));if(n.blockResults){var m;const e=Boolean(c&&c.blockResults),t=null===(m=i.collectionViewStore())||void 0===m?void 0:m.getCollectionSource(),o=(0,l().TR)(t)||(0,l().hJ)(t);if((e||r)&&!o&&d&&d.blockResults){const e=d.blockResults,t=(null==c?void 0:c.blockResults)??{},o=new Set([...Object.keys(e),...Object.keys(t)]),n={};for(const i of o){const o=e[i],r=t[i];let s=[];o?s=o.blockIds:r&&(s=r.blockIds);let a=!1;r?a=r.hasMore:o&&(a=o.hasMore),n[i]={blockIds:s,hasMore:a}}p=n}p||(p=i.forceLocalQueryCollection?null==c?void 0:c.blockResults:null==d?void 0:d.blockResults)}let g;d&&d.pinnedResults&&(g=d.pinnedResults);c&&c.pinnedResults&&(g={groupResults:c.pinnedResults.groupResults,...g,aggregationResults:c.pinnedResults.aggregationResults});const f=c?c.hasMore:Boolean(null==d?void 0:d.hasMore),h=c?c.hasMoreSubGroups:null==d?void 0:d.hasMoreSubGroups;let v=(null==d?void 0:d.results)??(null==c?void 0:c.results)??[],y=(null==d?void 0:d.subGroupResults)??(null==c?void 0:c.subGroupResults);const S=n.groupBy;c&&("relation"===S.type||"formula"===S.type&&"relation"===S.groupBy.type)&&(v=c.results);c&&function(e){var t,o,n,i;const r=null===(t=e.collectionViewStore())||void 0===t?void 0:t.getType();if(r&&!["timeline","table","list"].includes(r))return!1;const a=(0,s().S)(null===(o=e.collectionStore())||void 0===o?void 0:o.getFormat(),null===(n=e.collectionViewStore())||void 0===n?void 0:n.getFormat(),e.normalizedSchemaStore.state,(null===(i=e.collectionStore())||void 0===i?void 0:i.id)??"");return"show"===a}(i)&&(v=c.results);const x=null===(t=n.subGroup)||void 0===t?void 0:t.groupBy;c&&("relation"===(null==x?void 0:x.type)||"formula"===(null==x?void 0:x.type)&&"relation"===x.groupBy.type)&&(y=c.subGroupResults);i.forceLocalQueryCollection&&(v=(null==c?void 0:c.results)??(null==d?void 0:d.results)??[],y=(null==c?void 0:c.subGroupResults)??(null==d?void 0:d.subGroupResults));return{type:"groups",version:"v2",results:v,subGroupResults:y,pinnedResults:g,hasMore:f,hasMoreSubGroups:h,blockResults:p,aggregationResults:u}}({reducerId:t,collectionContextStore:i,reducer:r,wasCreatedThisSession:g,localReducerResult:o,remoteReducerResult:n});return e}return n||o}if("results"===r.type){var f;const e=i.wasCreatedThisSessionStore.state,r=Boolean(u&&"reducer"===u.type&&u.reducerResults[t]),s=null===(f=i.collectionViewStore())||void 0===f?void 0:f.getCollectionSource(),a=(0,l().TR)(s)||(0,l().hJ)(s);if((r||e)&&!a&&o&&"results"===o.type){return{...o,hasMore:n&&"results"===n.type?n.hasMore:o.hasMore}}return n}}({reducerId:t,collectionContextStore:g,reducer:y,localReducerResult:n,remoteReducerResult:i})}),[g,y,t]),M=(0,n.useCallback)((()=>{C.current=!1,k.current||I(j())}),[j,k]),P=(0,n.useCallback)((()=>{C.current||(C.current=!0,i().default.afterNextFlush(M))}),[M]),[A]=(0,n.useState)((()=>(0,u().Ay)()));return(0,n.useEffect)((()=>{const e=h?(0,c().sg)(P,h,{leading:!0}):P;return g.remoteResultStore.addListener(P),g.localResultStore.addListener(e),()=>{g.remoteResultStore.removeListener(P),g.localResultStore.removeListener(e)}}),[g,P,h]),(0,n.useEffect)((()=>(m({reducerId:t,instanceId:A,reducer:y,collectionContextStore:g,groupsPointer:v}),()=>{m({reducerId:t,instanceId:A,reducer:void 0,collectionContextStore:g,groupsPointer:v})})),[g,S,x,b,v,y,t,A]),(0,n.useEffect)((()=>{P()}),[]),(0,n.useEffect)((()=>(g.timingTracker.mountCollectionReducerRequest(t,y.type),()=>{g.timingTracker.unmountCollectionReducerRequest(t)})),[g,t,y]),w}},105819:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,pencilLineIcon:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.63 4.12 14.99 11.76",svg:(0,o(474848).jsx)("path",{d:"m13.987 5.682-.684.684-1.288-1.288.692-.691a.91.91 0 0 1 1.28 0c.35.35.35.93 0 1.28zm-9.433 9.433 7.914-7.914-1.289-1.289-7.92 7.908c-.122.122-.214.29-.274.457l-.336 1.082c-.06.229.153.442.366.366l1.082-.335q.252-.07.457-.275m12.446.76H5.61l1.25-1.25H17a.625.625 0 1 1 0 1.25"})},i=(0,o(340498).wt)("pencilLine",n)},114641:(e,t,o)=>{o.d(t,{H:()=>i});var n=()=>o(679924);function i(e){const{collectionContextStore:t,environment:o,incrementLimitArgs:i}=e;t.groupsStore.incrementLimit(e.incrementLimitArgs),t.loadingDetailsStore.setState({type:"load_more_blocks",group:i.groupsPointer}),(0,n().v)(o,"collection_load_more_blocks")}},124311:(e,t,o)=>{o.d(t,{K:()=>i});var n=()=>o(679924);function i(e){(0,n().v)(e,"inline_collection_load_more_click")}},126158:(e,t,o)=>{o.d(t,{m:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("arrowDownSmall",{viewBox:"0 0 12 12",svg:(0,n.jsx)("path",{d:"M5.99756 0.850098C5.53564 0.850098 5.21875 1.17236 5.21875 1.65576V7.61768L5.27246 8.7832L4.19287 7.53711L2.98438 6.33398C2.84473 6.18896 2.66211 6.09229 2.42578 6.09229C2.00684 6.09229 1.68994 6.40381 1.68994 6.84424C1.68994 7.04834 1.77051 7.23633 1.93164 7.40283L5.42285 10.8994C5.56787 11.0498 5.78809 11.1357 5.99756 11.1357C6.2124 11.1357 6.42725 11.0498 6.57227 10.8994L10.0688 7.40283C10.23 7.23633 10.3105 7.04834 10.3105 6.84424C10.3105 6.40381 9.99365 6.09229 9.57471 6.09229C9.34375 6.09229 9.16113 6.18896 9.01611 6.33398L7.80762 7.53711L6.72803 8.7832L6.77637 7.61768V1.65576C6.77637 1.17236 6.46484 0.850098 5.99756 0.850098Z"})})},143650:(e,t,o)=>{o.d(t,{e:()=>a});var n=o(296540),i=()=>o(484714),r=()=>o(751156),s=()=>o(765957);function a(){const[e,t]=(0,n.useState)(!0),o=(0,i().v3)();(0,n.useEffect)((()=>{if(e){const{currentSpaceViewStore:e}=s().default.state;if(!e)return;r().createAndCommit({userAction:"PostsHomePanel.updateLastOpened",environment:o,canUndo:!0,perform:t=>{r().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_aggregated_feed"],command:"set",args:Date.now()},transaction:t})}})}}),[e,o])}},157071:(e,t,o)=>{o.d(t,{PH:()=>S,Un:()=>b,V_:()=>C,hn:()=>j,lY:()=>w,v7:()=>I,zU:()=>k});var n=()=>o(584262),i=()=>o(970330),r=()=>o(522986),s=()=>o(612008),a=()=>o(857783),l=()=>o(281948),d=()=>o(778417),c=()=>o(725614),u=()=>o(714574),p=()=>o(573451),m=()=>o(357643),g=()=>o(519839),f=()=>o(862292),h=()=>o(476492),v=()=>o(996494),y=()=>o(372267);function S(e){(0,u().P)({store:e})}function x(e,t,o,n,i){if("title"===e){r().VN({environment:i,blockPropertyValueOverlayStore:o});const e=t.getBlockTitleStore();d().hc({environment:i,store:t}),(0,p().C)({store:t}),c().setSelectionAtEnd({store:e})}else e?(r().VN({environment:i,blockPropertyValueOverlayStore:o}),r().ho({environment:i,blockPropertyValueOverlayStore:o,store:t,property:e,format:"list",collectionContextStore:n})):r().VN({environment:i,blockPropertyValueOverlayStore:o});S(t)}async function b(e,t,o,n,i,r,s){const a=await f().T.formulas.load();x((0,y().cO)(e,t,o,n,i,s,a),o,t,r,e)}async function C(e,t,o,n,i,r,s){const a=await f().T.formulas.load();x((0,y().o6)(e,t,o,n,i,s,a),o,t,r,e)}function k(e,t){S(e),t()}function w(e,t,o){r().VN({environment:e,blockPropertyValueOverlayStore:t}),d().Lt({environment:e,store:o}),S(o)}function I(e){const{environment:t,newStore:o,previousStore:n}=e;d().hc({environment:t,store:o}),(0,p().C)({store:o}),v().A.setState({store:o,editMode:"new",previousStore:n})}function j(e){var t;const{transaction:o,environment:r,results:d,collectionContextStore:c,isFullScreen:u,groupsPointer:p,insertAtIndex:f,editInPeek:v,from:y}=e;c.searchQueryStore.state&&(0,m().S)({searchQuery:"",collectionContextStore:c,isFullScreen:u});const S=null===(t=c.groupsStore.getGroupState(p))||void 0===t?void 0:t.resultsStore;if(!S)return;let x;f>0&&(x=d[f]);const b=(0,s().Q)({environment:r,collectionContextStore:c,groupsPointer:p,insertAtIndex:f,shouldCoerce:!0,templateStore:c.defaultPageTemplateStore.state,transaction:o,from:{createBlock:y},inMemoryRecordCache:r.defaultRecordCache.inMemoryRecordCache});if(!b)return;const C=b.coercionSucceeded,k=b.newStore;return r.device.isMobile?a().uK({environment:r,store:k,pageVisitSource:n().y8.Create}):C&&!v?I({environment:r,newStore:k,previousStore:x}):l().VU({environment:r,store:k,peekMode:(0,g().hH)(c),resultsStore:S,collectionContextStore:c,pageVisitSource:n().y8.Create}),i().v(r,{from:y,type:"page",new_page_id:k.id,creating_block_id:k.id,...(0,h().sl)(c)}),k}},184966:(e,t,o)=>{o.d(t,{H2:()=>b,Nm:()=>w,TM:()=>x,tt:()=>C});o(944114),o(809678),o(898992),o(581454),o(737550);var n=()=>o(134025),i=()=>o(142748),r=()=>o(433847),s=()=>o(68263),a=()=>o(798880),l=()=>o(116225),d=()=>o(896628),c=()=>o(722101),u=()=>o(44729),p=()=>o(246826),m=()=>o(751156),g=()=>o(2220),f=()=>o(186445),h=()=>o(765957),v=()=>o(630116),y=()=>o(659915),S=()=>o(747444);function x(e){const{environment:t,collectionStore:o,publishingEnabled:n,transaction:i}=e;m().createAndCommitOrAppend({environment:t,perform:e=>{d().zA({stores:[o],update:{publishing_enabled:n},transaction:e})},userAction:"Posts.setPublishingEnabled",canUndo:!0,transaction:i})}function b(e){const{environment:t,collectionStore:o,followingEnabled:n,transaction:i}=e;m().createAndCommitOrAppend({environment:t,perform:e=>{d().zA({stores:[o],update:{following_enabled:n},transaction:e})},userAction:"Posts.setFollowingEnabled",canUndo:!0,transaction:i})}function C(e){const{environment:t,draftPostStore:o,onSubmitPost:s,from:c}=e,p=t.currentUser.id;o&&p&&(o.isPublishedDraft()||(!function(e){const{environment:t,postStore:o}=e;m().createAndCommit({environment:t,perform:e=>(o.getContentStores().toReversed().some((t=>{if(!(0,y().o)(t))return!0;u().zz({childStore:t,parentStore:o,transaction:e})})),o),userAction:"PostChannel.trimPostDraft",canUndo:!1})}({environment:t,postStore:o}),function(e){const{environment:t,draftPostStore:o,userId:s}=e;if(!o.isDefined()||o.isPublishedDraft())return;const l=(0,i().Yn)(o.getParentPointer(),o.getRecordModel),c=(0,r().wD)(l).map((e=>({...e,role:k(e.role,"comment_only")})));c.push({type:"restricted_permission"}),c.push({type:"user_permission",user_id:s,role:"editor"}),m().createAndCommit({environment:t,perform:e=>(m().applyOperation({store:o,operation:n().op.update({pointer:o.pointer,path:[],args:{alive:!0,created_by_id:s,created_by_table:a().oo,created_time:Date.now(),last_edited_time:Date.now()}}),transaction:e}),m().applyOperation({store:o,operation:n().op.set({pointer:o.pointer,path:["permissions"],args:c}),transaction:e}),d().zA({stores:[o],update:{draft_status:"published"},transaction:e}),o),userAction:"PostChannel.publishDraft",canUndo:!1}).performResult}({environment:t,draftPostStore:o,userId:p}),null==s||s(),S().A.setState({isOpen:!1}),(0,g().u)({environment:t,event:{eventName:"post_created",eventProperties:{block_id:o.id,parent_collection_id:o.getParentId(),from:c}}}),l().u4({name:"post_created"})))}function k(e,t){if(!e)return e;const o="string"==typeof e&&e in s().TE?s().TE[e]:void 0;if(!o)return e;return o>s().TE[t]?t:e}function w(e){var t,o;const{environment:n,collectionStore:i}=e,r=null===(t=(0,f()._m)(n))||void 0===t?void 0:t.id,s=null===(o=h().default.state.currentSpaceStore)||void 0===o?void 0:o.id;if(!r||!s||!i)return;return m().createAndCommit({environment:n,perform:e=>{null!=i&&i.isPublishingEnabled()||x({environment:n,collectionStore:i,publishingEnabled:!0,transaction:e});const t=p().Wv({environment:n,transaction:e,type:"page",inMemoryRecordCache:n.defaultRecordCache.inMemoryRecordCache});u().X$({childStore:t,parentStore:i,transaction:e});const o=p().Wv({environment:n,transaction:e,type:"text",inMemoryRecordCache:n.defaultRecordCache.inMemoryRecordCache}),r=v().Bv.createChildStore(t,o.pointer);return p().zv({store:r,transaction:e,data:{alive:!0,parent_id:t.id,parent_table:t.table}}),c().BC({parentStore:t.getContentStore(),appendStore:r,transaction:e}),t},userAction:"PostChannel.createEmptyPostStore",canUndo:!1}).performResult}},207207:(e,t,o)=>{o.d(t,{J:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.62 2.62 15.26 15.26",svg:(0,o(474848).jsx)("path",{d:"M8.875 2.625a6.25 6.25 0 1 0 3.955 11.09l3.983 3.982a.625.625 0 1 0 .884-.884l-3.983-3.982a6.25 6.25 0 0 0-4.84-10.205m-5 6.25a5 5 0 1 1 10 0 5 5 0 0 1-10 0"})},i=(0,o(340498).wt)("magnifyingGlass",n)},265665:(e,t,o)=>{o.d(t,{j:()=>c});var n=o(296540),i=()=>o(484714),r=()=>o(401497),s=()=>o(284371),a=()=>o(859428);var l=()=>o(962730),d=o(474848);function c(e){let{children:t,style:o,tooltipStyle:c,placement:u=l().W.Bottom}=e;const{isSafari:p}=(0,i().Y0)(),m=(0,n.useRef)(null),g=function(e){const[t,o]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const{current:t}=e;if(!t)return void o(!1);const n="ResizeObserver"in window?new ResizeObserver((e=>{let[t]=e;o(t.target.scrollWidth>t.target.clientWidth)})):void 0;return null==n||n.observe(t),()=>null==n?void 0:n.unobserve(t)}),[]),t}(m),f=(0,r().IS)((()=>({overflowText:{...s().RC,...o}})),[o]);return(0,d.jsx)(a().A,{delayThreshold:500,placement:u,textWrap:!0,style:c,forceVisibleState:!(p||!g)&&void 0,renderTooltip:()=>g?t:void 0,render:e=>(0,d.jsx)("div",{ref:m,style:f.overflowText,...e,children:t})})}},316369:(e,t,o)=>{o.d(t,{w:()=>k});o(581454),o(296540);var n=()=>o(484714),i=()=>o(56366),r=()=>o(651124),s=()=>o(30626),a=()=>o(959013),l=()=>o(496603),d=()=>o(436696),c=()=>o(896628),u=()=>o(751156),p=()=>o(722872),m=()=>o(760217),g=()=>o(406699),f=()=>o(285790),h=()=>o(928600),v=()=>o(939740),y=()=>o(897119),S=()=>o(89924),x=o(474848);const b=(0,a().j4)((function(e){const{limit:t}=e;return(0,x.jsx)(a().sA,{defaultMessage:"{limit} pages",values:{limit:t.limit},id:"database.FirstLoadLimitSelectOption.limitPagesTitle"})})),C=(0,a().YK)({firstLoadLimitActionButtonAriaLabel:{defaultMessage:"Load limit settings menu",id:"database.firstLoadLimitActionButton.ariaLabel"}});function k(e){let{format:t,collectionContextStore:o}=e;const r=(0,n().v3)(),{device:l}=r,p=(0,a().tz)(),m=(0,i().K8)((()=>{var e;return(null===(e=o.collectionViewStore())||void 0===e?void 0:e.getType())??"unknown"}),[o]);return l.isMobile?null:(0,x.jsx)(g().Ay,{popupType:y().nl.Popup,renderOrigin:e=>(0,x.jsx)(f().A,{icon:s()._,style:{marginLeft:4,marginRight:4},ariaLabel:p.formatMessage(C.firstLoadLimitActionButtonAriaLabel),...e}),alignmentToOrigin:g().yP.End,placementToOrigin:g().sx.Bottom,originGap:8,render:e=>(0,x.jsx)(I,{currentLimit:w({format:t,viewType:m}),onAccept:e=>function(e,t,o){const n=t.collectionViewStore();if(!n)return;if(!n.getType())return;u().createAndCommit({userAction:"FirstLoadLimitActionButton.handleFirstLoadLimitAccept",environment:o,canUndo:!0,perform:t=>{c().zA({stores:[n],update:{inline_collection_first_load_limit:e},transaction:t})}}),t.groupsStore.resetAllLimits(),(0,d().X)({environment:o,collectionContextStore:t,action:"set_first_load_limit"})}(e,o,r),onClose:e.close,showTitle:!0})})}function w(e){const{format:t,viewType:o}=e;return(0,r().i3)({limit:t.inline_collection_first_load_limit,isGrouped:Boolean(t.collection_group_by),viewType:o})}function I(e){const t=(0,n().v3)(),{device:o}=t,{currentLimit:i,onAccept:s,onClose:d,showTitle:c}=e,u=(0,l().oE)(r().X9.map(((e,t)=>{const o={key:t,render:t=>(0,x.jsx)(m().A,{...t,disabled:!1,title:(0,x.jsx)(b,{limit:e}),isChecked:(0,l().n4)(i,e)}),action:()=>s(e)};return o}))),g=[{key:0,render:e=>(0,x.jsx)(S().A,{enableActionSheetTitle:!0,title:c&&(0,x.jsx)(a().sA,{defaultMessage:"Show on first load",id:"database.firstLoadLimitSelectMenu.firstLoadLimitSetting"}),...e}),items:u}];let f;return f=o.isMobile?{menuType:p().gu.ActionSheet}:{menuType:p().gu.Popup,width:200},(0,x.jsx)(h().A,{...f,children:(0,x.jsx)(v().Ay,{type:v().Oh.Vertical,sections:g,onAccept:d,initialFocus:void 0})})}},344124:(e,t,o)=>{var n=o(444576);e.exports=function(e,t){var o=n[e],i=o&&o.prototype;return i&&i[t]}},359941:(e,t,o)=>{o.d(t,{V:()=>s});var n=()=>o(56366),i=()=>o(646736),r=()=>o(12974);function s(e){const{spaceStore:t}=e,o=(0,i().eD)(t);return(0,n().K8)((()=>(0,r().MU)({spaceStore:t,actorRole:o})),[t,o])}},372267:(e,t,o)=>{o.d(t,{NK:()=>h,cO:()=>x,nq:()=>g,o6:()=>S,uM:()=>v});o(898992),o(354520),o(672577);var n=()=>o(584262),i=()=>o(713998),r=()=>o(416504),s=()=>o(496603),a=()=>o(519839),l=()=>o(458366),d=()=>o(909470),c=()=>o(492414),u=()=>o(972435),p=()=>o(765957),m=()=>o(217429);function g(e){return{display:"flex",flexGrow:1,textDecoration:"none",overflow:"hidden",borderRadius:6,..."single"===e?{height:30}:{minHeight:30}}}function f(e,t){return(0,l().B2)(t[e])}function h(e){const{environment:t,store:o,collectionContextStore:n}=e,{mainEditorCurrentBlockStore:i}=p().default.state;return a().wy({environment:t,store:o,mainEditorCurrentBlockStore:i,collectionContextStore:n,fullyQualified:!1})}function v(e){return(0,c().Ay)({store:e,fullyQualified:!1,pageVisitSource:n().y8.LinkInPage})}function y(e,t,o,n,s,a){return t.isDefined()?n.filter((n=>{const l="title"!==n&&s;return!i().r8({property:n,schema:o,block:t.getModel(),getRecordModel:t.getRecordModel,userId:e.currentUser.id,userTimeZone:(0,r().P)(),intl:u().A.getIntl(),experimentService:m().default,collectionFeatureGates:(0,d().i)(),formulasModule:a})||l})):[]}function S(e,t,o,n,i,r,a){const l=t.state,d=l.isOpen?l.property:"title",c=y(e,o,n,i,r,a),u=c.findIndex((e=>e===d)),p=s().Uk(c,((e,t)=>t<u&&f(e,n)));return p||(r?"title":function(e,t){return s().Uk(e,(e=>f(e,t)))}(c,n))}function x(e,t,o,n,i,r,s){const a=t.state,l=a.isOpen?a.property:"title",d=y(e,o,n,i,r,s),c=d.findIndex((e=>e===l)),u=d.find(((e,t)=>t>c&&f(e,n)));return u||(r?"title":function(e,t){return e.find((e=>f(e,t)))}(d,n))}},381138:(e,t,o)=>{o.d(t,{q:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("search",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M.281 6.438c0-.875.164-1.696.492-2.461a6.484 6.484 0 011.375-2.032A6.237 6.237 0 016.64.078 6.2 6.2 0 019.11.57c.77.328 1.447.787 2.03 1.375a6.374 6.374 0 011.368 2.032c.333.765.5 1.586.5 2.46 0 .688-.107 1.342-.32 1.961a6.28 6.28 0 01-.868 1.696l3.563 3.578c.11.104.19.226.242.367.057.14.086.29.086.445 0 .22-.05.417-.149.594a1.122 1.122 0 01-1 .57c-.156 0-.307-.028-.453-.086a1.058 1.058 0 01-.382-.25l-3.586-3.585c-.5.333-1.047.596-1.641.789a6.089 6.089 0 01-1.86.28 6.237 6.237 0 01-2.468-.491 6.4 6.4 0 01-2.024-1.367A6.509 6.509 0 01.773 8.913a6.256 6.256 0 01-.492-2.476zm1.664 0c0 .65.12 1.26.36 1.828a4.775 4.775 0 001.015 1.5c.433.427.933.763 1.5 1.007a4.548 4.548 0 001.82.368c.652 0 1.261-.123 1.829-.368a4.747 4.747 0 002.508-2.507 4.567 4.567 0 00.367-1.829c0-.645-.123-1.252-.367-1.82a4.776 4.776 0 00-1.016-1.5A4.578 4.578 0 008.469 2.11a4.567 4.567 0 00-1.828-.367c-.646 0-1.253.123-1.82.367a4.667 4.667 0 00-1.5 1.008c-.433.432-.772.932-1.016 1.5a4.633 4.633 0 00-.36 1.82z"})})},403315:(e,t,o)=>{o.d(t,{a:()=>n});const n=(0,o(340498).xh)("checkmark",{default:{loader:()=>o.e(96772).then(o.bind(o,29037))},small:{loader:()=>o.e(96772).then(o.bind(o,349679))},fill:{loader:()=>o.e(96772).then(o.bind(o,94701))},fillSmall:{loader:()=>o.e(96772).then(o.bind(o,73956))}},["check","tick","confirm","approve","success"])},403733:(e,t,o)=>{o.d(t,{g:()=>i});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"3.05 2.12 9.9 11.76",svg:(0,o(474848).jsx)("path",{d:"M8 2.125a.61.61 0 0 0-.625.599v9.017L4.122 8.488a.625.625 0 1 0-.884.884l4.32 4.32c.244.244.64.244.884 0l4.32-4.32a.625.625 0 0 0-.884-.884l-3.253 3.253V2.724A.61.61 0 0 0 8 2.125"})},i=(0,o(340498).wt)("arrowStraightDownSmall",n)},406533:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>i,questionMarkCircleIcon:()=>r});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},r=(0,o(340498).wt)("questionMarkCircle",i)},471095:(e,t,o)=>{o.d(t,{i:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.95 12.05 15.66",svg:(0,o(474848).jsx)("path",{d:"M6 5.95a4 4 0 1 1 8 0v1.433a2.426 2.426 0 0 1 2.025 2.392v5.4A2.425 2.425 0 0 1 13.6 17.6H6.4a2.425 2.425 0 0 1-2.425-2.425v-5.4c0-1.203.876-2.201 2.025-2.392zm6.75 1.4v-1.4a2.75 2.75 0 1 0-5.5 0v1.4zm-2.2 5.458a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"})},i=(0,o(340498).wt)("lockFill",n)},484595:(e,t,o)=>{o.d(t,{A:()=>a,p:()=>r});var n=o(296540),i=o(474848);const r=8;function s(e,t){let{isSelected:n}=e;const{radioButtonStyle:s,dotStyle:a}=(0,o(401497).IS)((e=>({radioButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,borderRadius:16,marginRight:r,background:n?e.blueColor:e.whiteButtonBackground,border:n?"none":`1px solid ${e.radioButtonBorder}`,transition:"background 100ms ease-out"},dotStyle:{width:6,height:6,borderRadius:6,background:e.text.contrastPrimary,transition:"opacity 100ms ease-out",opacity:n?1:0}})),[n]);return(0,i.jsx)("div",{ref:t,style:s,children:(0,i.jsx)("div",{style:a})})}const a=n.forwardRef(s)},522500:(e,t,o)=>{o.d(t,{q:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("megaphone",{viewBox:"0 0 64 64",svg:(0,n.jsx)("path",{d:"m54,10v40h-4l-20-10h-4l4,16h-10l-4-16c-4.94,0-8-3.06-8-8v-4c0-4.94,3.06-8,8-8h14l20-10h4Z"})})},568008:(e,t,o)=>{o.d(t,{EF:()=>a,OY:()=>l,qM:()=>d});o(581454);var n=()=>o(498212),i=()=>o(751156),r=()=>o(755199),s=()=>o(765957);function a(e){var t;const o=(null===(t=e.getSettings())||void 0===t?void 0:t.custom_topics)||{};return Object.entries(o).map((e=>{let[t,o]=e;return{id:t,...o}}))}function l(e){var t;const{environment:o,name:a,creator:l,description:d,icon:c}=e,u=s().default.state.currentUserSettingsStore;if(!u)return;const p=Date.now(),m=(0,n().lZ)(),g=(null===(t=u.getSettings())||void 0===t?void 0:t.custom_topics)||{};i().createAndCommit({userAction:"userTopicsActions.createTopic",environment:o,canUndo:!0,cellTarget:"main",perform:e=>{r().mJ({userSettingsStore:u,data:{custom_topics:{...g,[m]:{name:a,createdAt:p,updatedAt:p,creator:l,...d?{description:d}:{},...c?{icon:c}:{}}}},transaction:e})}})}function d(e){var t;const{environment:o,topicId:n}=e,a=s().default.state.currentUserSettingsStore;if(!a)return;const l=(null===(t=a.getSettings())||void 0===t?void 0:t.custom_topics)||{};if(!l[n])return;const d={...l};delete d[n],i().createAndCommit({userAction:"userTopicsActions.removeTopic",environment:o,canUndo:!0,cellTarget:"main",perform:e=>{r().mJ({userSettingsStore:a,data:{custom_topics:d},transaction:e})}})}},573451:(e,t,o)=>{o.d(t,{C:()=>i});var n=()=>o(945895);function i(e){const{store:t,transient:o}=e;n().A.setState({isActive:!0,store:t,transient:Boolean(o)})}},602248:(e,t,o)=>{o.d(t,{J:()=>ie,default:()=>re});var n=o(296540),i=()=>o(484714),r=()=>o(56366),s=()=>o(401497),a=()=>o(284371),l=()=>o(696746),d=()=>o(765957),c=(o(898992),o(354520),o(581454),()=>o(959013)),u=()=>o(874913),p=()=>o(108944),m=()=>o(71304),g=()=>o(37433),f=()=>o(963589),h=()=>o(630116),v=()=>o(704152),y=()=>o(493823),S=()=>o(406699),x=()=>o(928600),b=()=>o(939740),C=()=>o(722872),k=()=>o(771442),w=()=>o(864040),I=o(474848);const j=function(e){const{isMobile:t,stores:n}=e,r=(0,i().v3)(),s={display:"flex",alignItems:"center",flexShrink:0};return(0,I.jsx)(S().Ay,{popupType:t?S().z7.SlideUp:S().z7.Popup,renderOrigin:e=>t?(0,I.jsxs)(v().A,{style:{...s},...e,children:[(0,I.jsx)(k().f,{}),(0,I.jsx)("div",{style:{marginLeft:8,marginRight:8},children:"..."}),(0,I.jsx)(k().f,{})]}):(0,I.jsxs)("div",{style:s,children:[(0,I.jsx)(y().p,{size:"sm",...e,children:"..."}),(0,I.jsx)(k().f,{})]}),render:e=>{let i;return i=t?{menuType:C().gu.Modal,title:(0,I.jsx)(c().sA,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),right:(0,I.jsx)(o(480095).DoneMenuText,{}),onClickRight:e.close}:{menuType:C().gu.Popup,width:240},(0,I.jsx)(x().A,{...i,children:(0,I.jsx)(b().Ay,{type:b().Oh.Vertical,onAccept:e.close,initialFocus:void 0,sections:(0,w().A)(r,n)})})}})};var M=()=>o(906719),P=()=>o(565049);function A(e){const{ancestorMaxWidth:t,showDivider:o,store:n,disabled:i}=e;return n instanceof h().h4?(0,I.jsx)(P().A,{store:n,showDivider:o,maxWidth:t,disabled:i}):(0,I.jsx)(M().A,{store:n,showDivider:o,maxWidth:t,disabled:i})}function T(e){const{ancestorMaxWidth:t,isMobile:o,homeStore:s,store:a,maxAncestorCount:d,disabled:v}=e,y=(0,i().v3)(),S=(0,c().tz)(),x=(0,f().X)("team_feed_as_any_other_db"),[b,C]=(0,r().K8)((()=>{const e=p().fU(a,x);e.reverse();return[a.isNavigableBlock()?e.slice(0,-1):[...e],e]}),[a,x],{useDeepEqual:!0}),k=(0,r().K8)((()=>b.map((e=>(0,m().Qe)(e,S,y,!0)||(0,m().gG)(e,S)||""))),[y,S,b]);(0,n.useEffect)((()=>(u().setTabBreadcrumbs(k),()=>{u().setTabBreadcrumbs(void 0)})),[k]);const w=(0,r().K8)((()=>(0,l().Nh)(a.id)),[a]),T=(0,r().K8)((()=>(0,g().zI)()>0),[]);if(w&&void 0!==s)return(0,I.jsx)(A,{ancestorMaxWidth:t,showDivider:b.length>0,store:s,disabled:v},s.id);if(b.length>d){const[e,n,i]=[b[0],b.slice(1,b.length-d+1),b.slice(b.length-d+1)];if(T)return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(A,{ancestorMaxWidth:t,showDivider:!o,store:e,disabled:v},e.id),(0,I.jsx)(j,{isMobile:o,stores:o?C:n},"pages-popup"),i.map((e=>e instanceof h().h4?(0,I.jsx)(P().A,{store:e,showDivider:!0,maxWidth:t,disabled:v},e.id):(0,I.jsx)(M().A,{store:e,showDivider:!0,maxWidth:t,disabled:v},e.id)))]});{const e=b.filter((e=>e instanceof h().Bv)),n=b.filter((e=>e instanceof h().Bv));return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(M().A,{store:e[0],showDivider:!o,maxWidth:t,disabled:v},e[0].id),(0,I.jsx)(j,{isMobile:o,stores:o?n:e.slice(1,e.length-d+1)},"pages-popup"),e.slice(e.length-d+1).map((e=>(0,I.jsx)(M().A,{store:e,showDivider:!0,maxWidth:t,disabled:v},e.id)))]})}}return(0,I.jsx)(I.Fragment,{children:b.map((e=>(0,I.jsx)(A,{ancestorMaxWidth:t,showDivider:!0,store:e,disabled:v},`${e.table}-${e.id}`)))})}var R=()=>o(679924);var _=()=>o(898286),B=()=>o(2220),L=()=>o(187820),D=()=>o(478726),U=()=>o(836251),K=()=>o(347199),F=()=>o(953418),E=()=>o(217429),W=()=>o(712505);const O=function(e){const{ancestorMaxWidth:t,ignoreMaxLength:n,showDivider:i,store:r,marginLeft:a}=e,l=(0,s().IS)((()=>({wrapper:{display:"flex",alignItems:"center",flexShrink:1,marginLeft:a,minWidth:0,maxWidth:n?void 0:"100%"}})),[n,a]);return(0,I.jsxs)("div",{style:l.wrapper,children:[(0,I.jsx)(o(20039).A,{store:r,maxWidth:t,ignoreMaxLength:n}),i&&(0,I.jsx)(k().f,{})]})};function V(e){const{environment:t,isMobile:o,currentPageRef:n,store:i,disabled:s}=e;return(0,r().K8)((()=>{const e=i.canEdit(),r=i.isNonEditableState(),a=i.getCollectionStore(),d=null==a?void 0:a.isSyncedCollection(),c=i.isExternalObjectInstancePageBlockStore(),u=(0,D().fc)(i);return s||(0,l().Nh)(i.id)||i.isPersonProfile()||o||(0,U().w6)(t)||W().default.isCenterPeekOpen()||!n||!e||r||c||d||u}),[t,o,n,i,s])}function H(e){const{environment:t,currentPageRef:o,store:i}=e;return(0,n.useCallback)((()=>{const e=W().default.isCenterPeekOpen()?K().A.PeekViewScroller:K().A.PageScroller;if(e){const o=e.getNode();if(o&&!F().Np(o))return F().VG({element:o,environment:t,options:{top:0,behavior:"smooth"}}),void function(e){(0,R().v)(e,"click_breadcrumb_current_page_scroll_to_top")}(t)}const n=o.current;if(!n)return;if(!(n instanceof Element))return;const r=n.getBoundingClientRect();_().U({blockStore:i,originRect:r}),function(e){(0,R().v)(e,"open_breadcrumb_current_page_menu")}(t)}),[t,o,i])}function z(e,t){const{currentPageMaxWidth:n,isMobile:s,currentPageRef:a,store:l}=e,d=(0,i().v3)(),c=V({environment:d,isMobile:s,currentPageRef:a,store:l,disabled:e.disabled}),u=(0,r().K8)((()=>l.isEmptyPage()),[l]),p=(0,r().K8)((()=>(0,L().Te)(l)),[l]),m=(0,r().K8)((()=>l.getIcon()),[l]),g=s?24:20,f=H({environment:d,currentPageRef:a,store:l});return(0,I.jsxs)(y().p,{shouldShrink:!0,onClick:f,size:"sm",ref:t,disabled:c,children:[Boolean(m)&&(0,I.jsx)(L().B6,{disabled:!0,icon:m,iconRecordCategory:p,isEmptyPage:u,size:g,style:{marginRight:6},largeIcon:!0}),(0,I.jsx)(o(16006).A,{store:l,style:{maxWidth:n},enableHover:!0})]})}const N=(0,n.forwardRef)(z);function G(e){const{ancestorMaxWidth:t,isMobile:o,currentPageRef:n,store:s,marginLeft:a}=e,d=(0,i().v3)(),{mobileNative:c}=d,u=(0,r().K8)((()=>(0,l().lU)(s)),[s]),m=V({environment:d,isMobile:o,currentPageRef:n,store:s,disabled:e.disabled}),g=H({environment:d,currentPageRef:n,store:s}),f=(0,r().K8)((()=>{const e=p().fU(s);return 0===(s.isNavigableBlock()?e.slice(1):[...e]).length}),[s]);return u?null:o?(0,I.jsx)(y().p,{disabled:m,shouldShrink:!0,onClick:g,size:"sm",style:null!=c&&c.supportsNativeHomeOnPhone()?{paddingLeft:0}:void 0,children:(0,I.jsx)(O,{store:s,showDivider:!1,ignoreMaxLength:f,ancestorMaxWidth:t,marginLeft:a})}):(0,I.jsx)(y().p,{disabled:m,shouldShrink:!0,onClick:g,size:"sm",style:{fontSize:"inherit"},children:(0,I.jsx)(O,{store:s,showDivider:!1,ancestorMaxWidth:t,marginLeft:a})})}function Y(e){const{store:t,ancestorMaxWidth:o,marginLeft:n}=e,i={display:"flex",alignItems:"center",flexShrink:0};return(0,I.jsx)($,{store:t,renderOrigin:e=>(0,I.jsx)(v().A,{style:{...i,maxWidth:"100%"},...e,children:(0,I.jsx)(O,{store:t,showDivider:!1,ignoreMaxLength:!0,ancestorMaxWidth:o,marginLeft:n})})})}function $(e){const{store:t,renderOrigin:o}=e,s=(0,i().v3)(),a=(0,r().K8)((()=>{const e=p().fU(t);return e.reverse(),e}),[t]),l=(0,n.useCallback)((()=>{(0,B().u)({environment:s,event:{eventName:"topbar_breadcrumb_menu_click",eventProperties:{has_parent_pages:a.length>1}}})}),[s,a]),d=(0,n.useCallback)((e=>{s.device.isMobileNative&&((0,B().u)({environment:s,event:{eventName:"topbar_breadcrumb_page_click",eventProperties:{page_id:e.id}}}),E().default.logEvent("topbar_breadcrumb_page_click",void 0,{page_id:e.id}))}),[s]);return(0,I.jsx)(S().Ay,{popupType:S().z7.BottomSheet,bottomSheetInitialState:"half",onClick:l,renderOrigin:o,render:e=>(0,I.jsx)(x().A,{menuType:C().gu.Modal,title:(0,I.jsx)(c().sA,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),children:(0,I.jsx)(b().Ay,{type:b().Oh.Vertical,onAccept:e.close,initialFocus:void 0,sections:(0,w().A)(s,a,d)})})},"pages-popup")}o(823215),o(737550);var q=o(440961),J=()=>o(626466),Q=()=>o(471095),X=()=>o(68263),Z=()=>o(95313),ee=()=>o(750660),te=()=>o(859428),oe=()=>o(962730);function ne(e){const{store:t}=e,o=(0,i().v3)(),a=(0,r().K8)((()=>{const{currentSpaceViewStore:e}=d().default.state,n=(null==e?void 0:e.getPrivatePages(o))??[];return null==n?void 0:n.some((e=>e.id===t.id))}),[o,t]),l=(0,r().K8)((()=>{const e=o.currentUser.id;return t.getPermissionItems().every((t=>(0,X().B2)(t)&&e===t.user_id))}),[o,t]),u=(0,s().DP)(),p=(0,n.useRef)(null),m=(0,n.useCallback)((()=>{if(!p)return;const e=q.findDOMNode(p.current);if(!(e&&e instanceof Element))return;const n=e.getBoundingClientRect(),i=new DOMRect(n.x,n.y,n.width,n.height+5);Z().D3(o),ee().ho({environment:o,blocks:[t],originRect:i,moveToContext:"topbar_breadcrumb"})}),[o,p,t]);return a&&l?(0,I.jsx)(te().A,{placement:oe().W.Right,renderTooltip:e=>(0,I.jsxs)("div",{children:[(0,I.jsx)("div",{children:(0,I.jsx)(c().sA,{defaultMessage:"Only you have access",id:"breadcrumb.moveTo.hasPermission.title"})}),(0,I.jsx)("div",{style:{color:u.text.contrastSecondary},children:(0,I.jsx)(c().sA,{defaultMessage:"Click to move",id:"breadcrumb.moveTo.hasPermission.subtitle"})})]}),render:e=>(0,I.jsxs)(y().p,{size:"sm",disabled:!1,onClick:m,ref:p,...e,children:[(0,Q().i)({width:16,fill:u.icon.tertiary}),(0,I.jsx)("span",{style:{color:u.text.tertiary,marginLeft:4,marginRight:5},children:(0,I.jsx)(c().sA,{defaultMessage:"Private",id:"breadcrumb.moveTo.privatePages"})}),(0,J().arrowChevronSingleDownFillIcon)({width:11,fill:u.icon.tertiary})]})}):null}const ie=6;const re=function(e){const{ancestorMaxWidth:t,maxAncestorCount:c,currentPageMaxWidth:u,isMobile:p,showCurrentPageControls:m,store:g,style:f}=e,h=(0,n.useRef)(null),v=(0,i().v3)(),y=(0,s().IS)((()=>({container:{display:"flex",alignItems:"center",lineHeight:1.2,fontSize:p?a().J.UIRegular.mobile:a().J.UIRegular.desktop,...f},enforceMaxLength:{maxWidth:"100%"}})),[p,f]),S=(0,r().K8)((()=>{var e;return Boolean(null===(e=g.getTitleStore())||void 0===e?void 0:e.isReady())}),[g]),x=(0,r().K8)((()=>{const{currentSpaceViewStore:e}=d().default.state;let t;return e&&e.isReady()&&(t=(0,l().x$)(e)),t}),[]),b=(0,r().K8)((()=>g.isPersonProfile()),[g]),C=(0,r().K8)((()=>!(0,l().lU)(g)&&!b&&m&&g.isReady()),[m,g,b]),k=(0,r().O$)(d().AppStoreCurrentSpaceStore),w=(0,o(359941).V)({spaceStore:k}),j=!b||w,M=(0,r().K8)((()=>{var e;return v.device.isPhone||(null===(e=v.mobileNative)||void 0===e?void 0:e.supportsNativeHomeOnPhone())}),[v]);if((0,r().K8)((()=>{var e;if(Boolean(v.currentUser.isLoggedIn()||v.publicDomainUserId))return!1;const t=o(578872).GN(g),n=v.RouterStore.state.route;return!(!(0,o(861017).bh)(n)||(null==t?void 0:t.id)!==g.id)||(null==t||null===(e=t.getSiteStore())||void 0===e||null===(e=e.getHeader())||void 0===e?void 0:e.hideBreadcrumbs)}),[v,g]))return null;if(!S)return null;const P=Boolean(e.disabled);return M?(0,I.jsx)("div",{style:{...y.container,...y.enforceMaxLength},className:"notranslate",children:(0,I.jsx)(Y,{store:g,ancestorMaxWidth:t,marginLeft:ie,disabled:P})}):(0,I.jsxs)("div",{style:y.container,className:"notranslate shadow-cursor-breadcrumb",children:[j&&(0,I.jsx)(T,{ancestorMaxWidth:t,maxAncestorCount:c,isMobile:p,homeStore:x,store:g,disabled:P}),C?(0,I.jsx)(N,{currentPageMaxWidth:u,isMobile:p,currentPageRef:h,ref:h,store:g,marginLeft:ie,disabled:P}):(0,I.jsx)(G,{ancestorMaxWidth:t,isMobile:p,currentPageRef:h,store:g,marginLeft:ie,disabled:P}),(0,I.jsx)(ne,{store:g})]})}},626466:(e,t,o)=>{o.r(t),o.d(t,{arrowChevronSingleDownFillIcon:()=>i,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.72 6.72 12.56 7.16",svg:(0,o(474848).jsx)("path",{d:"M9.381 13.619a.875.875 0 0 0 1.238 0l5.4-5.4A.875.875 0 1 0 14.78 6.98L10 11.763 5.219 6.98A.875.875 0 1 0 3.98 8.22z"})},i=(0,o(340498).wt)("arrowChevronSingleDownFill",n)},645099:(e,t,o)=>{o.d(t,{LA:()=>k,jJ:()=>w});o(296540);var n=()=>o(484714),i=()=>o(56366),r=()=>o(401497),s=()=>o(584262),a=()=>o(403733),l=()=>o(340498),d=()=>o(959013),c=()=>o(124311),u=()=>o(114641),p=()=>o(857783),m=()=>o(778417),g=()=>o(152077),f=()=>o(186445),h=()=>o(325383),v=()=>o(728611),y=()=>o(704152),S=()=>o(331542),x=()=>o(316369),b=o(474848);const C=30,k=33;function w(e){const{style:t,iconStyle:o,store:k,format:w,collectionContextStore:I,groupsPointer:j,incrementLimitsInRelatedGroups:M,isFullScreen:P}=e,A=(0,n().v3)(),T=(0,i().K8)((()=>I.groupsStore.getGroupState(j)),[I,j]),R=(0,i().K8)((()=>(0,h().Kk)({collectionContextStore:I,groupsPointer:j})),[I,j]),_=(0,i().O$)(I.isInHomeWidgetStore),B=(0,g().lU)(),L="PersonalHome"===B||"TeamHome"===B,D=(0,r().IS)((e=>({homeContainer:{display:"flex",alignItems:"center",justifyContent:"center"},button:{display:"flex",alignItems:"center",justifyContent:"center",height:C,borderRadius:6,whiteSpace:"break-spaces",fontSize:14,..._?{textAlign:"center",width:"fit-content",marginLeft:12,marginBottom:0,padding:4}:{},...t},loadingContainer:{marginTop:1,marginLeft:8,marginRight:8},icon:{width:l().Ev.sm,height:l().Ev.sm,marginRight:6,fill:e.icon.tertiary,...o},text:{color:e.text.tertiary,width:"100%",fontSize:_?14:void 0},hoveredStyle:{...R?{background:e.whiteButtonBackground}:{background:e.tableRowHoveredBackground}}})),[_,t,R,o]),U=(0,i().K8)((()=>k.canEdit()),[k]);return T?_||L?(0,b.jsx)("div",{style:D.homeContainer,children:(0,b.jsx)(y().A,{onClick:e=>function(e,t,o){const n=e.metaKey||e.ctrlKey?"tab":void 0,i=(0,f().sj)(o.id)?s().y8.PersonalHomeTileTasks:s().y8.PersonalHomeTileCustomDb;p().uK({environment:t,store:o,pageVisitSource:i,openInNew:n})}(e,A,k),onMouseDown:v().tr,style:D.button,children:(0,b.jsx)("div",{style:D.text,children:(0,b.jsx)(d().sA,{id:"database.viewAllButtonTitle",defaultMessage:"View all"})})})}):(0,b.jsxs)(y().A,{onClick:e=>function(e,t,o,n,i,r){const s=o.groupsStore.getGroupState(n);if(!s)return;const a=s.reducerResultStore.state;(0,v().kV)(e),m().IU({environment:t}),a&&(0,u().H)({collectionContextStore:o,environment:t,incrementLimitArgs:{isFullScreen:r,currentResultCount:a.blockIds.length,groupsPointer:s.groupsPointer,incrementLimitsInRelatedGroups:i}});(0,c().K)(t)}(e,A,I,j,M,P),onMouseDown:v().tr,disabled:R,hoveredStyle:D.hoveredStyle,style:D.button,children:[(0,a().g)(D.icon),(0,b.jsx)("div",{style:D.text,children:(0,b.jsx)(d().sA,{id:"database.loadMoreButtonTitle",defaultMessage:"Load more"})}),R?(0,b.jsx)("div",{style:D.loadingContainer,children:(0,b.jsx)(S().A,{size:"sm"})}):U&&(0,b.jsx)(x().w,{collectionContextStore:I,format:w})]}):null}},661945:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().Store{getInitialState(){return{isOpen:!1}}}const i=new n},668577:(e,t,o)=>{o.d(t,{Z:()=>n,o:()=>r});const n=100;class i extends(()=>o(757695))().Store{getInitialState(){return{stores:{}}}getStore(e){if(e)return this.state.stores[e]||(this.state.stores[e]=new(o(178624).R)({key:`emojiFrecency:${e}`,namespace:o(419494).Bq,important:!0,trackingType:"necessary"})),this.state.stores[e]}getEmojiFrecencyMap(){var e;const t=this.getStore(null===(e=o(765957).default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId());if(!t)return{};return t.state??{}}}const r=new i},714574:(e,t,o)=>{o.d(t,{P:()=>i});var n=()=>o(996494);function i(e){const{store:t}=e;"new"===n().A.state.editMode&&n().A.state.store.id===t.id&&n().A.reset()}},732800:(e,t,o)=>{o.d(t,{A:()=>a});var n=o(296540),i=()=>o(959013),r=o(474848);function s(e){const t=(0,o(56366).K8)((()=>{const t=e.postStore?(0,o(108944).Uo)(e.postStore):void 0;return t?null==t?void 0:t.getRawMembership().length:0}),[e.postStore]);return(0,r.jsx)(o(676007).a,{open:e.isOpen,onDismiss:e.onDismiss,render:()=>(0,r.jsx)(o(887480).Ay,{icon:o(522500).q,title:(0,r.jsx)(i().sA,{id:"posts.confirmMentionEveryoneModal.title",defaultMessage:"Notify {sizeOfTeam} people?",values:{sizeOfTeam:t}}),subtitle:(0,r.jsx)(i().sA,{id:"posts.confirmMentionEveryoneModal.subtitle",defaultMessage:"Using @everyone notifies everyone in the teamspace. Are you sure you want to send this?"}),confirmText:(0,r.jsx)(i().sA,{id:"posts.confirmMentionEveryoneModal.confirmText",defaultMessage:"Send"}),cancelText:(0,r.jsx)(i().sA,{id:"posts.confirmMentionEveryoneModal.cancelText",defaultMessage:"Edit message"}),confirmTextStyle:"red",radioOptions:[],onDismiss:e.onDismiss,onConfirm:e.onConfirm})})}const a=n.memo(s)},777045:(e,t,o)=>{o.d(t,{w:()=>a});o(296540);var n=()=>o(56366),i=()=>o(128914),r=()=>o(959013),s=o(474848);function a(e){const{collectionContextStore:t}=e,o=(0,r().tz)(),a=(0,n().K8)((()=>{var e;return t.databaseType?(0,i().Mw)(o,t.databaseType):(0,i()._o)(o,null===(e=t.collectionStore())||void 0===e?void 0:e.getModel())}),[t,o]);return(0,s.jsx)(s.Fragment,{children:a})}},809678:(e,t,o)=>{var n=o(746518),i=o(437628),r=o(225397),s=o(206469),a=Array;n({target:"Array",proto:!0},{toReversed:function(){return i(r(this),a)}}),s("toReversed")},824160:(e,t,o)=>{o.d(t,{A:()=>l});o(296540);var n=()=>o(484714),i=()=>o(401497),r=()=>o(780054),s=()=>o(704152),a=o(474848);function l(e){const t=(0,n().Y0)(),o=(0,i().IS)((e=>({sharedStyle:{display:"flex",alignItems:"center",borderRadius:4},innerStyle:{padding:"2px 6px",borderRadius:4,color:e.text.secondary,background:e.defaultBadgeBackground,fontSize:r().A.isMobile?11:9,lineHeight:t.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",whiteSpace:"nowrap"}})),[t.isAndroid]);return r().A.isMobile?(0,a.jsx)(s().A,{style:{...o.sharedStyle,...e.mobileStyle},disabled:void 0===e.onClick,children:(0,a.jsx)("div",{style:{...o.innerStyle,...e.innerStyle},children:e.children})}):(0,a.jsx)(s().A,{style:{...o.sharedStyle,...e.desktopStyle},disabled:void 0===e.onClick,...e,children:(0,a.jsx)("div",{style:{...o.innerStyle,...e.innerStyle},children:e.children})})}},853306:(e,t,o)=>{o.d(t,{A:()=>C});o(581454);var n=o(296540),i=()=>o(662303),r=()=>o(56366),s=()=>o(401497),a=()=>o(66913),l=()=>o(284371),d=()=>o(115512),c=()=>o(141333),u=()=>o(265665),p=()=>o(484595),m=()=>o(704152),g=()=>o(864943),f=()=>o(204063),h=()=>o(125565),v=o(474848);const y=20;function S(e){var t;let{icon:a,iconStyle:u,title:p,subtitle:m,confirmText:S,confirmTextStyle:C="blue",confirmTextPerRadioOption:k,cancelText:w,hideCancelButton:I=!1,radioOptions:j,defaultSelectedRadioOption:M,onDismiss:P,onSelectRadio:A,onConfirm:T,width:R,footer:_}=e;const B=(0,o(484714).v3)(),[L,D]=(0,n.useState)(M??(null===(t=j[0])||void 0===t?void 0:t.key)),U=(0,r().uB)(void 0,o(17090).A),K=(0,r().K8)((()=>null==U?void 0:U.state.elementRef),[U]),F=(0,c().CR)(K),E=(0,c().yE)(K),W=(0,c().o7)(K),O=E>0,V=Math.ceil(E+W)<Math.floor(F),H=(0,n.useCallback)((e=>{e!==L&&(D(e),null==A||A(e))}),[A,L]),z=(0,n.useCallback)((()=>{T(L)}),[T,L]),N=(0,s().IS)((e=>{const t={marginLeft:-20,marginRight:-20,height:1,borderTop:`1px solid ${e.regularDividerColor}`,transition:"opacity 200ms"};return{container:{display:"flex",position:"relative",flexDirection:"column",justifyContent:"center",overflow:"hidden",width:`min(${R??400}px, calc(100vw - 40px))`,maxHeight:"80vh",padding:y,borderRadius:6,alignItems:"stretch"},icon:{width:36,height:36,fill:e.icon.secondary,marginBottom:6,...u},iconContainer:{width:"100%",display:"flex",justifyContent:"center"},title:{fontFamily:l().vc(i().locale).sans,fontSize:17,lineHeight:"22px",fontWeight:l().Wy.medium,textAlign:"center",marginBottom:14},subtitle:{fontFamily:l().vc(i().locale).sans,fontSize:(0,d().ny)(B,"UIRegular"),lineHeight:(0,d().ks)(B,"UIRegular"),fontWeight:l().Wy.regular,marginTop:6,marginBottom:6,textAlign:"center"},radioContainer:{display:"flex",flexDirection:"column",gap:8},topDivider:{...t,opacity:O?1:0},bottomDivider:{...t,opacity:V?1:0},scroller:{marginLeft:-20,marginRight:-20,paddingLeft:y,paddingRight:y},actionButtonsContainer:{display:"flex",flexDirection:"column",marginTop:20},cancelButton:{marginTop:8,justifyContent:"center"},dismissButton:{position:"absolute",top:10,right:10,zIndex:1}}}),[B,u,V,O,R]),G=(null==k?void 0:k[L])??S;return(0,v.jsxs)("div",{style:N.container,children:[(0,v.jsx)("div",{style:N.dismissButton,children:(0,v.jsx)(x,{onClick:P})}),a&&(0,v.jsx)("div",{style:N.iconContainer,children:a(N.icon)}),(0,v.jsx)(h().A,{isMultiline:!0,style:N.title,children:p}),m&&(0,v.jsx)(h().A,{isSmall:!0,style:N.subtitle,isMultiline:!0,children:m}),j.length>0&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{style:N.topDivider}),(0,v.jsx)(o(2143).H,{type:o(756279).A.Y,style:N.scroller,store:U,children:(0,v.jsx)("div",{style:N.radioContainer,children:j.map((e=>(0,v.jsx)(b,{radioItem:e,isSelected:e.key===L,onSelectRadio:H,left:e.left},e.key)))})}),(0,v.jsx)("div",{style:N.bottomDivider})]}),(0,v.jsxs)("div",{style:N.actionButtonsContainer,children:["blue"===C?(0,v.jsx)(f().A,{size:"lg",onClick:z,children:G}):"red"===C?(0,v.jsx)(f().A,{size:"lg",onClick:z,isRed:!0,children:G}):(0,v.jsx)(g().A,{size:"lg",onClick:z,children:G}),!I&&(0,v.jsx)(g().A,{size:"lg",onClick:P,style:N.cancelButton,children:w??(0,v.jsx)(o(959013).sA,{id:"radioModal.cancel",defaultMessage:"Cancel"})})]}),_]})}function x(e){let{onClick:t}=e;const o=(0,s().IS)((e=>({button:{display:"flex",justifyContent:"center",alignItems:"center",width:24,height:24,borderRadius:"100%",background:e.lightGrayButtonBackground},buttonHovered:{background:e.lightGrayButtonHoveredBackground},buttonPressed:{background:e.lightGrayButtonPressedBackground},closeIcon:{width:16,height:16,fill:e.icon.secondary}})),[]);return(0,v.jsx)(m().A,{style:o.button,hoveredStyle:o.buttonHovered,pressedStyle:o.buttonPressed,onClick:t,children:(0,a().V)(o.closeIcon)})}function b(e){let{radioItem:t,isSelected:o,onSelectRadio:n,left:i}=e;const r=(0,s().IS)((e=>({button:{display:"flex",justifyContent:"space-between",gap:10,height:"auto",minHeight:70,borderRadius:8,paddingTop:12,paddingBottom:12,paddingLeft:14,paddingRight:14-p().p,border:void 0,boxShadow:o?`inset 0 0 0 1px ${e.icon.uiBluePrimary}`:`inset 0 0 0 1px ${e.stroke.primary}`},buttonText:{display:"flex",flexDirection:"column",gap:2,...l().RC},optionTitle:{fontWeight:l().Wy.medium},optionSubtitle:{whiteSpace:"break-spaces"},left:{display:"flex",alignItems:"center",justifyContent:"center"}})),[o]);return(0,v.jsxs)(g().A,{size:"lg",onClick:()=>n(t.key),style:r.button,children:[i&&(0,v.jsx)("div",{style:r.left,children:i}),(0,v.jsxs)("div",{style:r.buttonText,children:[(0,v.jsx)(h().A,{style:r.optionTitle,children:(0,v.jsx)(u().j,{children:t.title})}),t.subtitle&&(0,v.jsx)(h().A,{isSmall:!0,isMultiline:!0,style:r.optionSubtitle,children:t.subtitle})]}),(0,v.jsx)(p().A,{isSelected:o})]})}const C=n.memo(S)},864040:(e,t,o)=>{o.d(t,{A:()=>i});o(581454),o(296540);var n=o(474848);const i=function(e,t,i){return[{key:"results",render:e=>(0,n.jsx)(o(89924).A,{...e}),items:t.map(((t,r)=>({key:t.id,render:e=>(0,n.jsx)(o(958378).A,{...e,isSubpage:0!==r,store:t,hidePath:!0}),action:n=>{let{event:r}=n;const s=o(728611).Vr(r);t instanceof o(630116).Bv&&(i&&i(t),o(857783).uK({environment:e,store:t,openInNew:s,visitType:o(211716).ig.Link,pageVisitSource:o(584262).y8.Breadcrumb}))}})))}]}},887480:(e,t,o)=>{o.d(t,{Ay:()=>i().A,yQ:()=>s});var n=()=>o(645873),i=()=>o(853306);const r=new(n().O2)("radioModalRenderer",(()=>o.e(35818).then(o.bind(o,415995)))),s=(0,n()._h)(r,(e=>e.default))},963120:(e,t,o)=>{o.r(t),o.d(t,{MobileUnifiedFeed:()=>lo,PostChannelCollectionView:()=>Zt,PostPresence:()=>Fo});o(944114),o(898992),o(354520),o(672577),o(581454),o(908872);var n=o(296540),i=()=>o(17022),r=()=>o(484714),s=()=>o(56366),a=()=>o(401497),l=()=>o(187174),d=()=>o(68263),c=()=>o(854150),u=()=>o(116225),p=()=>o(534177),m=()=>o(449506),g=()=>o(661920),f=()=>o(751156),h=()=>o(157071),v=()=>o(357643),y=()=>o(519839),S=()=>o(75544),x=()=>o(645099),b=()=>o(152077),C=()=>o(157856),k=()=>o(186445),w=()=>o(963589),I=()=>o(299272),j=()=>o(765957),M=()=>o(630116),P=()=>o(486130),A=()=>o(611371),T=()=>o(184966),R=()=>o(312316),_=()=>o(338518),B=()=>o(269113),L=()=>o(952412),D=()=>o(73300),U=()=>o(584262),K=()=>o(636090),F=()=>o(47218),E=()=>o(617668),W=()=>o(959013),O=()=>o(284371),V=()=>o(222299),H=()=>o(246826),z=()=>o(54362),N=()=>o(205127),G=()=>o(602248),Y=()=>o(777045),$=()=>o(704152),q=()=>o(285790),J=()=>o(297872),Q=()=>o(928600),X=()=>o(897119),Z=()=>o(299772),ee=()=>o(978578),te=()=>o(728611),oe=()=>o(722872),ne=()=>o(377586),ie=()=>o(548821),re=()=>o(712505),se=()=>o(623241),ae=()=>o(659915),le=()=>o(118884);var de=()=>o(661945);class ce extends(()=>o(757695))().Store{getInitialState(){return{type:"closed"}}open(e){this.setState({type:"open",storeId:e})}close(){this.setState({type:"closed"})}}const ue=new ce;var pe=()=>o(732800),me=()=>o(135968),ge=()=>o(690825),fe=()=>o(403315),he=()=>o(559653),ve=()=>o(99895),ye=()=>o(763824),Se=()=>o(732430),xe=()=>o(460292),be=()=>o(789550),Ce=()=>o(645873),ke=()=>o(865688),we=()=>o(336588);o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);class Ie{constructor(e){this.totalYielded=0,this.postIdx=0,this.suggestedContentIdx=0,this.reachedLastUnreadPost=!1,this.allPostIds=void 0,this.renderCaughtUpPostId=void 0,this.suggestedPostContent=void 0,this.posts=void 0,this.welcomePostBlockStore=void 0,this.posts=e.posts,this.allPostIds=new Set(this.posts.map((e=>e.id))),this.suggestedPostContent=e.suggestedPostContent,this.renderCaughtUpPostId=e.renderCaughtUpPostId,this.welcomePostBlockStore=e.welcomePostBlockStore}*feedItems(){for(;this.hasUnreadsRemaining();)for(const e of this.nextPost()){if(e&&e.blockStore.id===this.renderCaughtUpPostId){yield*this.caughtUpPost();break}yield e}for(;this.hasMoreItems();){const e=this.latestSuggestedContentTimestamp(),t=this.latestCurrentPostTimestamp();if(!e&&!t)break;e?t?e>t?yield*this.nextSuggestedContent():yield*this.nextPost():yield*this.nextSuggestedContent():yield*this.nextPost()}this.welcomePostBlockStore&&(yield{type:"welcome",blockStore:this.welcomePostBlockStore})}*caughtUpPost(){yield{type:"caught_up",index:this.totalYielded},this.reachedLastUnreadPost=!0,this.totalYielded++}*nextPost(){const e=this.postIdx<this.posts.length?this.posts[this.postIdx]:void 0;e&&(yield{type:"user-created",blockStore:e,index:this.totalYielded},this.postIdx++,this.totalYielded++)}*nextSuggestedContent(){for(;this.suggestedContentIdx<this.suggestedPostContent.length;){const e=this.suggestedPostContent[this.suggestedContentIdx];if(this.suggestedContentIdx++,e&&!this.allPostIds.has(e.blockStore.id)){if("new"===e.type){yield{type:"suggested",blockStore:e.blockStore,index:this.totalYielded},this.totalYielded++;break}if("edited"===e.type){yield{type:"suggested_activity",blockStore:e.blockStore,activityStores:e.activityStores,index:this.totalYielded},this.totalYielded++;break}(0,p().HB)(e)}}}latestCurrentPostTimestamp(){const e=this.posts[this.postIdx];if(e)return e.getCreatedTime()}latestSuggestedContentTimestamp(){for(;this.suggestedContentIdx<this.suggestedPostContent.length;){const e=this.suggestedPostContent[this.suggestedContentIdx];if("new"===e.type)return e.blockStore.getCreatedTime();if("edited"===e.type){const t=e.activityStores[0];if(!t){this.suggestedContentIdx++;continue}return parseInt(t.getEndTime()??"0")}(0,p().HB)(e)}}hasUnreadsRemaining(){return Boolean(this.renderCaughtUpPostId)&&!this.reachedLastUnreadPost}hasMorePosts(){return this.postIdx<this.posts.length}hasMoreSuggestedContent(){return this.suggestedContentIdx<this.suggestedPostContent.length}hasMoreItems(){return this.hasMorePosts()||this.hasMoreSuggestedContent()}}var je=()=>o(331542),Me=()=>o(675700),Pe=()=>o(921855),Ae=()=>o(47170),Te=()=>o(1845),Re=()=>o(73239),_e=o(474848);function Be(e){const{blockStore:t,activityStores:o}=e,i=(0,W().tz)(),r=(0,s().K8)((()=>t.getTitleValue()),[t]),l=(0,s().O$)(j().AppStoreCurrentSpaceStore),d=(0,a().IS)((e=>({container:{padding:16,borderRadius:8,backgroundColor:e.surface.wash},title:{fontWeight:O().Wy.medium,marginBottom:8},list:{marginTop:8,marginLeft:16},listItem:{fontSize:O().J.UIRegular.desktop,marginBottom:4,listStyleType:"disc"},details:{color:e.text.secondary,fontSize:12,marginTop:9,marginBottom:10},detailsToggle:{color:e.text.secondary,marginRight:3}})),[]),[c,u]=(0,n.useState)(!1),m=(0,n.useCallback)((()=>{u(!c)}),[c]),g=(0,s().K8)((()=>o.map((e=>e.getModel())).filter(p().O9)),[o]),f=(0,Re().v)({activityModels:g,intl:i,spaceStore:l});if(void 0===f||0===f.length||!l)return null;const h=(0,Pe().r4)(r,l);return(0,_e.jsxs)("div",{style:d.container,children:[(0,_e.jsxs)("div",{style:d.title,children:["Updates for: ",h]}),(0,_e.jsx)(Le,{blockStoreId:t.id,editValues:f,currentPageTitle:r.toString()}),(0,_e.jsxs)("div",{style:{marginLeft:15},children:[(0,_e.jsx)("details",{style:d.details,open:!1,children:g.map((e=>(0,_e.jsx)(Me().h,{activity:e,rootStore:l,tabArgs:{source:"home_tile",tab:"homeTile"},isLast:!1},e.id)))}),(0,_e.jsxs)("details",{style:d.details,children:[(0,_e.jsx)("summary",{children:(0,_e.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[(0,_e.jsx)("span",{style:d.detailsToggle,onClick:m,role:"button",tabIndex:0,children:c?"☟":"☞"}),(0,_e.jsx)("span",{children:"Data"})]})}),(0,_e.jsx)("ul",{style:d.list,children:f.map(((e,t)=>(0,_e.jsx)("li",{style:d.listItem,children:JSON.stringify(e)},t)))})]})]})]})}function Le(e){const{blockStoreId:t,editValues:o,currentPageTitle:n}=e,i=(0,Ae().O)(),s=(0,r().v3)(),l=(0,a().IS)((e=>({text:{margin:5,marginLeft:2}})),[]),d=(0,Te().p)({environment:s,spaceId:i,blockStoreId:t,editValues:o,currentPageTitle:n});return void 0===d||""===d?(0,_e.jsxs)("div",{style:l.text,children:[(0,_e.jsx)(je().A,{style:{display:"inline-block",marginRight:"10px"}}),(0,_e.jsx)("span",{children:"Loading summary... "}),(0,_e.jsx)("br",{})]}):(0,_e.jsx)("div",{style:l.text,children:d})}var De=()=>o(799954),Ue=()=>o(44729),Ke=()=>o(2220),Fe=()=>o(436683),Ee=()=>o(239391),We=()=>o(406699),Oe=()=>o(175116),Ve=()=>o(492414),He=()=>o(781312),ze=()=>o(575301),Ne=()=>o(407054),Ge=()=>o(168500),Ye=()=>o(104077),$e=()=>o(70423),qe=()=>o(30626),Je=()=>o(742852),Qe=()=>o(105819),Xe=()=>o(350124),Ze=()=>o(236262),et=()=>o(741496),tt=()=>o(901265),ot=()=>o(884107),nt=()=>o(457190),it=()=>o(435009),rt=()=>o(778417),st=()=>o(345913),at=()=>o(441467),lt=()=>o(517288),dt=()=>o(528787),ct=()=>o(116008),ut=()=>o(760217),pt=()=>o(939740),mt=()=>o(8980),gt=()=>o(89924),ft=()=>o(859428),ht=()=>o(125565),vt=()=>o(56086),yt=()=>o(668577),St=()=>o(862292),xt=()=>o(299545),bt=()=>o(518773),Ct=()=>o(101930);const kt=(0,W().YK)({addReaction:{id:"postActions.react.tooltip",defaultMessage:"React"},moreActions:{id:"postActions.more.tooltip",defaultMessage:"More actions"}}),wt=["👍","🎉","❤️"],It=16;function jt(e){const{show:t,blockStore:o}=e,n=(0,r().v3)(),{value:i}=(0,Ce().fJ)(St().T.formulas),l=(0,W().tz)(),d=(0,w().X)("suggested_reactions"),c=(0,w().X)("block_reactions"),u=(0,Oe().ET)(),p=(0,s().K8)((()=>{const e=yt().o.getEmojiFrecencyMap(),t=Object.keys(e).sort(((t,o)=>e[o].f-e[t].f)).slice(0,3);return[...t,...wt.slice(t.length)]}),[]),m=(0,a().IS)((e=>({container:{position:"absolute",zIndex:1,right:16,opacity:t?1:0,transition:"opacity 100ms ease-out",display:"flex",padding:"2px",boxShadow:"0px 2px 12px 0px rgba(29, 27, 22, 0.06)",borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary,borderRadius:6,backgroundColor:e.buttonGroupBackground,gap:1},reactIcon:{width:21,height:21,fill:e.icon.secondary}})),[t]);return(0,_e.jsxs)("div",{style:m.container,children:[c?(0,_e.jsxs)(_e.Fragment,{children:[d?p.map((e=>(0,_e.jsx)("div",{children:(0,_e.jsx)(q().A,{ariaLabel:l.formatMessage(kt.addReaction),hasBackground:!1,showShadow:!1,icon:()=>(0,_e.jsx)(vt().A,{char:e,size:It}),onClick:()=>(e=>{const t=(0,xt().O3)(o,{recursivelyLoadAllDiscussions:!1,includePropertyDiscussions:!1,excludeSelf:!1}).find((e=>e.getReactions().length>0));t?f().createAndCommit({environment:n,userAction:"Comment.toggleReactionFromMenu",canUndo:!0,perform:o=>{dt().toggleReaction({environment:n,transaction:o,store:t,icon:e,discussionLocation:"post_top_level_discussion"})}}):(ct().A.setState({open:!0,type:"block",content:"reaction",blockStore:o,blockId:o.id,emoji:e,rect:new DOMRect}),at().i5({environment:n,skipOpeningDiscussion:!0,formulasModule:i}))})(e)})},e))):void 0,(0,_e.jsx)(ft().A,{renderTooltip:()=>(0,_e.jsx)(W().sA,{...kt.addReaction}),render:e=>(0,_e.jsx)(q().A,{ariaLabel:l.formatMessage(kt.addReaction),hasBackground:!1,showShadow:!1,icon:()=>(0,Xe().s)(m.reactIcon),onClick:e=>{(0,lt().O)({environment:n,blockStore:o,rect:e.currentTarget.getBoundingClientRect(),skipOpeningDiscussionOnSubmit:!0,formulasModule:i})},...e})})]}):void 0,(0,_e.jsx)(ft().A,{renderTooltip:()=>(0,_e.jsx)(W().sA,{...kt.moreActions}),render:e=>(0,_e.jsx)(q().A,{...e,hasBackground:!1,showShadow:!1,icon:qe()._,ariaLabel:l.formatMessage(kt.moreActions),onClick:e=>{rt().Lt({environment:n,store:o}),tt().it({environment:n,stores:[o],left:e.clientX,top:e.clientY,showInput:!0,actionSectionGroupKey:"block_in_collection",analyticsFrom:"block_more_menu",optionalAnalyticsProperties:{collectionContextStore:u}})}})})]})}function Mt(e){const{blockStore:t,closeMenu:o,feedType:n}=e,i=(0,r().v3)(),l=(0,r().Y0)(),{value:d}=(0,Ce().fJ)(St().T.formulas),c=(0,Ct().x)(t),u=(0,Ct().A)(t),m=(0,s().K8)((()=>{var e;return"all"===(null===(e=t.getFollowStore())||void 0===e||null===(e=e.getFollowSettings())||void 0===e?void 0:e.comments)}),[t]),g=(0,s().K8)((()=>[...l.isPhone&&t.canComment()?["addReaction"]:[],"copyLink","toggleNotifications",...t.canEdit()?["edit","delete"]:[]]),[t,l.isPhone]),h=(0,a().IS)((()=>({icon:{height:16,width:16}})),[]),v=(0,ze().T4)(),y=g.map(((e,r)=>{const s=r===g.length-1&&l.isMobile;switch(e){case"addReaction":return{key:e,render:e=>(0,_e.jsx)(ut().A,{...e,icon:(0,Xe().s)(h.icon),style:{...v.buttonMenuItem,...s&&v.transparentButtonMenuItemBorder},pressedStyle:v.buttonMenuItemPressed,titleStyle:v.title,title:(0,_e.jsx)(W().sA,{id:"postActions.addReaction.button",defaultMessage:"React"}),onClick:e=>{(0,lt().O)({environment:i,blockStore:t,rect:e.currentTarget.getBoundingClientRect(),skipOpeningDiscussionOnSubmit:!0,formulasModule:d}),o()}}),action:()=>{}};case"copyLink":return{key:e,render:e=>(0,_e.jsx)(ut().A,{...e,icon:(0,_e.jsx)(mt().I,{icon:Je().w}),style:{...v.buttonMenuItem,...s&&v.transparentButtonMenuItemBorder},pressedStyle:v.buttonMenuItemPressed,titleStyle:v.title,title:(0,_e.jsx)(W().sA,{id:"postActions.copyLink.button",defaultMessage:"Copy link"})}),action:async()=>{const e=await ot().R.clipboardActions.load();u&&e.copyString({environment:i,stringValue:u,copiedMessage:e.clipboardMessages.copiedLinkToClipboard})}};case"toggleNotifications":return{key:e,render:e=>m?(0,_e.jsx)(ut().A,{...e,icon:(0,$e().L)(h.icon),style:{...v.buttonMenuItem,...s&&v.transparentButtonMenuItemBorder},pressedStyle:v.buttonMenuItemPressed,titleStyle:v.title,title:(0,_e.jsx)(W().sA,{id:"postActions.disableNotifications.button",defaultMessage:"Turn off reply notifications"})}):(0,_e.jsx)(ut().A,{...e,icon:(0,_e.jsx)(mt().I,{icon:Ye().r}),style:{...v.buttonMenuItem,...s&&v.transparentButtonMenuItemBorder},pressedStyle:v.buttonMenuItemPressed,titleStyle:v.title,title:(0,_e.jsx)(W().sA,{id:"postActions.enableNotifications.button",defaultMessage:"Get notifications for replies"})}),action:()=>{const e=t.getModel(),{currentUserStore:o}=j().default.state;if(!e||!o)return;const{following:n,followSettings:r}=(0,bt().A)(m?"none":"comments");nt().v({environment:i,followSettings:r,following:n,navigableBlockId:t.id,userId:o.id,spaceId:t.getSpaceId(),key:"comments",selectedKey:"comments",from:"more_menu"})}};case"edit":return{key:e,render:e=>(0,_e.jsx)(ut().A,{...e,icon:(0,_e.jsx)(mt().I,{icon:Qe().pencilLineIcon}),style:{...v.buttonMenuItem,...s&&v.transparentButtonMenuItemBorder},pressedStyle:v.buttonMenuItemPressed,titleStyle:v.title,title:(0,_e.jsx)(W().sA,{id:"postActions.edit.button",defaultMessage:"Edit"})}),action:()=>c&&it().oo({environment:i,url:c})};case"delete":return{key:e,render:e=>(0,_e.jsx)(ut().A,{...e,icon:(0,_e.jsx)(mt().I,{icon:Ze().trashIcon}),isRedOnHover:!0,style:{...v.buttonMenuItem,...s&&v.transparentButtonMenuItemBorder},pressedStyle:v.buttonMenuItemPressed,titleStyle:v.title,title:(0,_e.jsx)(W().sA,{id:"postActions.delete.button",defaultMessage:"Delete"})}),action:()=>{f().createAndCommit({userAction:"PostActions.delete",environment:i,canUndo:!0,perform:e=>{st().oD({environment:i,blocks:[t],transaction:e}),e.postSubmitCallbacks.push((e=>{e||(0,et().N)(i,{analyticsName:"delete",from:"block_more_menu",block_id:t.id,block_type:t.getType(),collection_id:t.getParentId()})}))}}),(0,Ke().u)({environment:i,event:{eventName:"post_deleted",eventProperties:{block_id:t.id,from:n}}})}}}})).filter(p().O9);return(0,_e.jsx)(Q().A,{menuType:oe().gu.Popup,height:l.isMobile?"50vh":void 0,minWidth:250,maxWidth:l.isMobile?"100vw":void 0,scrollerStyle:v.menuScroller,header:l.isMobile&&(0,_e.jsx)(ht().A,{style:v.header,children:(0,_e.jsx)(W().sA,{id:"postActions.moreActions",defaultMessage:"More actions"})}),children:(0,_e.jsx)(pt().Ay,{type:pt().Oh.Vertical,initialFocus:void 0,onAccept:o,sections:[{key:0,render:e=>(0,_e.jsx)(gt().A,{...e,style:v.sectionMenuItem}),items:y}]})})}const Pt={caughtUp:200,minimal:350,card:700,nested:700};function At(e,t){const{store:i,blockPropertyValueOverlayStore:l,inUnifiedFeed:d,isSuggested:c,index:u,onShowMoreClicked:m,disableInteraction:g,genericFeedDisplaySettings:f,pageLoadingContainerStore:h}=e,v=(0,n.useMemo)((()=>M().sk.createUniqueRootStore(i.environment,i.pointer,i)),[i]),S=(0,r().v3)(),x=(0,r().Y0)(),k=(0,w().X)("ken_new_home_design"),{layout:I}=(0,n.useContext)(C().U9)??{layout:"card"},P="minimal"===I?150:500,[A,T]=(0,n.useState)(!1),[R,_]=(0,n.useState)(!1),[B,L]=(0,n.useState)(!1),D=(0,n.useRef)(null),K=(0,n.useRef)(null),F=(0,n.useRef)(null),E=(0,o(683097).A)({onLongPress:()=>{var e;return null===(e=F.current)||void 0===e?void 0:e.setOpen(!0)}}),{titleStore:W,postIcon:V,postContentStore:H,createdByActorStore:z,timestampState:N}=(0,s().K8)((()=>({titleStore:v.getTitleStore(),postIcon:v.getIcon(),postContentStore:v.getContentStore(),createdByActorStore:v.getCreatedByStore(),timestampState:{lastEditedTime:v.getLastEditedTime(),createdTime:v.getCreatedTime()}})),[v]),G=(0,s().O$)(j().AppStoreMainEditorCurrentBlockStore),Y=(0,b().lU)(),$=(0,Oe().ET)(),q=(0,s().K8)((()=>{if(!x.isPhone&&!g){if("PersonalHome"===Y){if(!G)return;return(0,Ve().Ay)({store:G,peekViewBlockId:v.id,peekMode:"c",fullyQualified:!1,pageVisitSource:U().y8.UnifiedFeed})}if("TeamHome"===Y)return(0,Ve().Ay)({store:v,fullyQualified:!1,pageVisitSource:U().y8.TeamFeed});if(void 0===Y){const e=null!=f&&f.collection_peek_mode?(0,re().getUrlParamFromPeekMode)((0,re().getPeekModeFromCollectionPeekModeFormat)(f.collection_peek_mode)):void 0;return e&&G?(0,Ve().Ay)({store:G,peekViewBlockId:v.id,peekMode:e,fullyQualified:!1,pageVisitSource:U().y8.GenericFeed}):(0,Ve().Ay)({store:v,fullyQualified:!1,pageVisitSource:U().y8.GenericFeed})}(0,p().HB)(Y)}}),[x.isPhone,g,Y,G,v,f]),J=(0,s().K8)((()=>!v.isEmptyTitle()),[v]),Q=(0,s().K8)((()=>(0,o(108944).Uo)(v)),[v]),{pageVisitStore:X,presenceStore:Z}=(0,o(25680).S)({store:v,environment:S,postContext:ie().Rr.PostInFeed}),{initialRequestCompleted:ee,ready:te}=(0,o(851240).A)({store:h,pageStore:v,pageVisitStore:X,disableSideEffects:!0}),oe=(0,o(792485).S)(),ne=(0,n.useMemo)((()=>{if(oe)return{...oe,pageStore:v,presenceStore:Z,pageVisitStore:X}}),[v,Z,X,oe]);(0,n.useEffect)((()=>{$&&te&&0===u&&$.onItemMount(i)}),[$,i,u,te]);const se=(0,n.useCallback)((()=>{const e=S.currentUser.id;if(!te||!e)return;const t=(0,he().$5)({parent_id:v.id,user_id:e});g||o(466721).FZ(S,{blockStore:v,fromPageRefresh:!1,pageVisitStore:X,timestamp:Date.now(),type:"passive"}),o(530216).yP(S,{query:"",page_id:v.id,is_peek:!1,peek_mode:void 0,page_visit_source_override:d?U().y8.UnifiedFeedScroll:U().y8.TeamFeedScroll,rank:u,type:"page",page_visit_id:t,previous_page_visit_id:void 0,debug_page_visit_source:"post_set_page_visited"})}),[S,X,te,v,d,u,g]);(0,n.useEffect)((()=>{Ge().u.onResults({environment:S})}),[S]),(0,n.useEffect)((()=>{if(!D.current)return;const e=new IntersectionObserver((e=>{let[t]=e;t.isIntersecting&&se()}),{threshold:1});return e.observe(D.current),()=>e.disconnect()}),[D,se]);const ae=(0,n.useCallback)((()=>L(!0)),[]),le=(0,n.useCallback)((()=>L(!1)),[]),de=(0,n.useCallback)((e=>{const t=(null==e?void 0:e.height)??0;_(t>=P&&!A)}),[A,P]),ce=(0,n.useCallback)((()=>{x.isPhone?ue.open(v.id):(T(!0),se()),null==m||m(),(0,Ke().u)({environment:S,event:{eventName:"post_see_more_clicked",eventProperties:{block_id:v.id,rank:u,from:d?"unified_feed":"team_feed"}}})}),[T,se,S,v,u,d,m,x.isPhone]),pe=(0,n.useCallback)((()=>{!g&&x.isPhone&&ue.open(v.id)}),[g,v,x.isPhone]),me=(0,ze().T4)(),ge=(0,s().K8)((()=>(0,o(577814).A)({environment:S,store:v,pageViewBlockStore:void 0})),[S,v]),fe=(0,n.useMemo)((()=>Pt[I]),[I]),ve=(0,b().Vs)(),ye=(0,s().K8)((()=>re().default.isSidePeekOpen()),[]),Se="minimal"===I?20:26,xe=(0,s().K8)((()=>"minimal"!==I&&y().NM(v)),[I,v]),be=(0,s().K8)((()=>Ne().A.state.isActive&&Ne().A.state.stores.includes(v)),[v]),Ce=!1!==(null==f?void 0:f.show_page_icon)&&V,ke=!1!==(null==f?void 0:f.show_author_byline),Ie=(0,a().IS)((e=>{const{unhoveredBoxShadow:t,hoveredBoxShadow:o}=(0,we().vy)({layout:I,theme:e}),n="dark"===e.mode,i="minimal"===I?1.3:1,r=Se*i;return{container:{minWidth:ve&&ye?250:void 0,position:"relative",padding:(0,we().OD)({layout:I}),..."card"===I&&{boxShadow:B?o:t,borderRadius:12,background:n?e.surface.wash:e.surface.page},..."minimal"===I&&{borderBottomColor:e.regularDividerColor,borderBottomWidth:1,borderBottomStyle:"solid",background:e.surface.page},...ee?{}:{height:fe}},haloStyle:{...y().wh(e,xe),borderRadius:12},titleRow:{marginBottom:5,padding:`0 ${De().Md}px`},titleRowLink:{...g&&{cursor:"default"}},titleIconContainer:{display:"inline-block",verticalAlign:"top",height:r,marginRight:4},postSubject:{fontSize:Se,display:"inline",fontWeight:O().Wy.semibold,lineHeight:100*i+"%"},authorRow:{marginTop:2,marginBottom:2,paddingBottom:4},postContent:{fontSize:14,overflowY:"hidden",maxHeight:A?void 0:P,position:"relative",...x.isPhone&&{pointerEvents:"none"}},commentContainer:{display:"flex",gap:6,alignItems:"center",paddingTop:12},postIsReadCheckpoint:{position:"absolute",bottom:0,right:0,width:"100%"},mobileGradient:{position:"absolute",zIndex:1,left:0,right:0,height:30,background:`linear-gradient(to bottom, ${e.contentBackgroundTransparent} 0px, ${e.contentBackground} 30px)`,marginTop:-28},contentContainer:{paddingLeft:ke?30:0,paddingRight:"card"===I&&ke?30:0,...k&&{paddingLeft:8,paddingRight:"card"===I?8:0},..."minimal"===I&&{paddingLeft:ke?45:0},..."minimal"===I&&!d&&{marginTop:-12}},contentWrapper:{position:"relative"},pageDiscussionsWrapper:{width:"100%"}}}),[ve,ye,x,I,B,ee,fe,g,A,P,k,d,Se,ke,xe]),je=(0,s().K8)((()=>{var e;if(d)return v.isTeamPost()?Q:null===(e=v.getAssociatedCollectionStore())||void 0===e?void 0:e.getParentBlockStore()}),[v,d,Q]);(0,n.useEffect)((()=>{const e=$.collectionViewBlockStore();e&&v.uiLocation.setParent(e.uiLocation)}),[$,v]);const Me=(0,n.useCallback)((e=>{const{transaction:t}=e;Ue().by({childStore:v,transaction:t})}),[v]),Pe=(0,n.useCallback)((()=>{const e=W&&(0,_e.jsx)(o(524702).A,{style:Ie.postSubject,store:W,disabled:!0,disableEquationInteraction:!0,disableComment:!0,inPageFind:o(792540).Os.none,disableStyleAnnotations:!0},v.id),t="minimal"===I?{tabIndex:0,onClick:ce,style:Ie.contentWrapper}:{style:Ie.contentWrapper};return z?(0,_e.jsx)("div",{ref:K,children:(0,_e.jsx)(o(199896).Ay,{analyticsName:"feed",haloStyle:Ie.haloStyle,isLastItem:!1,shouldForceRenderSelectionHalo:xe,shouldShowCommentMenu:!1,shouldShowDropZone:!1,shouldShowHalo:!0,shouldShowHoverMenu:!1,showBlockMenuInput:!0,onRemove:Me,store:v,touchDragOnly:!1,children:(0,_e.jsx)(We().Ay,{ref:F,style:me.popup,popupType:"minimal"===I?We().z7.SlideUp:We().z7.Popup,bottomSheetInitialState:"half",stopClickPropagation:!0,render:e=>(0,_e.jsx)(Mt,{blockStore:v,closeMenu:e.close,feedType:d?"unified_feed":"team_feed"}),renderOrigin:()=>(0,_e.jsxs)("div",{style:Ie.container,onMouseEnter:ae,onMouseLeave:le,...E,children:["card"!==I||g?void 0:(0,_e.jsx)(jt,{show:B||be,blockStore:v}),ke?(0,_e.jsx)("div",{style:Ie.authorRow,children:"minimal"===I?(0,_e.jsx)(Fe().e,{lastEditedTime:N.lastEditedTime,createdTime:N.createdTime,location:"mobile_post_creator",sourceStore:je,authorStore:z,isSuggested:c}):(0,_e.jsx)(Fe().Y,{lastEditedTime:N.lastEditedTime,createdTime:N.createdTime,location:"post_creator",sourceStore:je,authorStore:z,isSuggested:c})}):null,(0,_e.jsxs)("div",{style:Ie.contentContainer,children:[(0,_e.jsx)(o(187485).A,{href:q,disabled:g,style:Ie.titleRowLink,children:(0,_e.jsxs)("div",{style:Ie.titleRow,role:"button",tabIndex:-1,onClick:pe,children:[Ce?(0,_e.jsx)("div",{style:Ie.titleIconContainer,children:(0,_e.jsx)(o(187820).B6,{icon:V,isEmptyPage:!1,size:26,largeIcon:!0,disabled:!0})}):void 0,J&&W?e:void 0]})}),(0,_e.jsx)(Tt,{store:v,blockPropertyValueOverlayStore:l}),(0,_e.jsx)(o(828634).EE,{onSizeChange:de,children:(0,_e.jsxs)("div",{...t,children:[(0,_e.jsx)("div",{style:Ie.postContent,children:(0,_e.jsx)(o(852302).l,{children:(0,_e.jsx)(o(27654).c.Provider,{value:!0,children:(0,_e.jsx)(o(452446).q,{value:ne,children:(0,_e.jsx)(o(493733).A,{store:H,forceIsInsideMarginCollapseContainer:!0,disabled:!0,disableHoverMenu:!0,disableCommentMenu:!0,disableSuggestEdit:!0,disableFormattingAnnotations:!0,disableRichTextActions:!0})})})})}),R&&!A?"minimal"===I?(0,_e.jsx)("div",{style:Ie.mobileGradient}):(0,_e.jsx)(o(499512).d,{enableIcon:!0,onClick:ce}):void 0,(0,_e.jsx)("div",{ref:D,style:Ie.postIsReadCheckpoint})]})}),g?void 0:(0,_e.jsx)("div",{style:Ie.commentContainer,children:(0,_e.jsx)(o(257502).d,{store:v,pageViewBlockContext:ie().Rr.PostInFeed,pageDiscussionsRenderState:ge,wrapper:e=>(0,_e.jsx)("div",{style:Ie.pageDiscussionsWrapper,children:e}),collapsed:!0,discussionLocation:"post_top_level_discussion",pageVisitStore:X,presenceStore:Z})})]})]})})})}):null}),[be,l,me.popup,R,z,g,ce,Me,J,d,A,B,c,I,E,de,ae,le,pe,ge,q,X,H,V,Z,Ce,ke,xe,je,v,Ie,N.createdTime,N.lastEditedTime,W,ne]);return(0,o(891078).NW)(v,t,(0,n.useMemo)((()=>({renderedType:"post",getNode:()=>null==K?void 0:K.current,getBlockStore:()=>v})),[K,v]),Pe())}function Tt(e){const{store:t,blockPropertyValueOverlayStore:o}=e,[i,r]=(0,He().y)(),l=(0,n.useMemo)((()=>r>0),[r]),d=(0,a().IS)((e=>({propertiesContainer:{display:"flex",flexDirection:"row",gap:6,marginLeft:-4,flexWrap:"wrap",overflow:"hidden",marginBottom:l?12:void 0,padding:`0 ${De().Md}px`}})),[l]),c=(0,Oe().ET)(),{collectionStore:u,collectionViewStore:p}=(0,s().K8)((()=>({collectionStore:c.collectionStore(),collectionViewStore:c.collectionViewStore()})),[c]),m=(0,s().K8)((()=>(c.normalizedFormatStore.state.feed_properties??[]).filter((e=>e.visible)).map((e=>e.property))),[c]);return u&&m.length>0?(0,_e.jsx)("div",{ref:i,style:d.propertiesContainer,children:m.map((e=>(0,_e.jsx)(Ee().q,{store:t,property:e,disabled:!1,locked:!1,format:"feed",tableWrap:!1,blockPropertyValueOverlayStore:o,collectionStore:u,collectionViewStore:p,showIfEmpty:!1},e)))}):null}const Rt=n.forwardRef(At);o(430670),o(803949);var _t=()=>o(798880),Bt=()=>o(919709),Lt=()=>o(246125);function Dt(e){return"__SEGMENTED__"===e.messageKey}function Ut(e){let{cacheName:t,messages:o,contentLines:i}=e;const s=(0,r().v3)(),a=(0,Lt().l)(t,{overrideDefaultRecordCache:!1,isTemporaryData:!0});a.addCacheFallback(s.defaultRecordCache.inMemoryRecordCache);const l=(0,W().tz)(),d=(0,Ae().O)(),c=(0,n.useMemo)((()=>({table:_t().oo,id:_t().EP.id})),[]),u=(0,n.useMemo)((()=>{if(!c||!d)return;const{performResult:e}=f().createAndCommit({userAction:"BaseWelcomePost.createWelcomePost",environment:s,canUndo:!0,skipUpdatingEditedMetadata:!0,perform:e=>{const t=H().Wv({environment:s,type:"text",properties:{title:[Bt().Ey_(l.formatMessage(o.welcomeTitle))]},inMemoryRecordCache:a,transaction:e,spaceId:d,createdTime:Date.now()-288e5,createdByTable:c.table,createdById:c.id,lastEditedTime:Date.now()-288e5,lastEditedByTable:c.table,lastEditedById:c.id});return i.forEach((n=>{const i=H().Wv({environment:s,type:"bulleted_list"===n.type?"bulleted_list":"header"===n.type?"header":"sub_header"===n.type?"sub_header":"text",properties:{title:Dt(n)?n.segments.flatMap((e=>function(e,t,o,n){var i;if(e.pageMention)return[Bt().Ey_(e.pageMention.id,[["p",e.pageMention.id]])];const r=n.formatMessage(t[e.messageKey]),s=[];return null!==(i=e.formatting)&&void 0!==i&&i.bold&&s.push(["b"]),e.link&&s.push(["a",e.link]),[Bt().Ey_(r,s)]}(e,o,0,l))):[Bt().Ey_(l.formatMessage(o[n.messageKey]))]},inMemoryRecordCache:a,transaction:e,spaceId:d,createdTime:Date.now()-288e5,createdByTable:c.table,createdById:c.id,lastEditedTime:Date.now()-288e5,lastEditedByTable:c.table,lastEditedById:c.id});Ue().NI({parentStore:t.getContentStore(),childStore:M().Bv.createChildStore(t.getContentStore(),i.pointer),transaction:e})})),t}});return new(M().Bv)(s,e.pointer,{inMemoryRecordCache:a})}),[s,o,i,c,a,l,d]);if(u)return u}const Kt=(0,W().YK)({welcomeTitle:{id:"TeamHomeWelcomePage.welcomeTitle",defaultMessage:"👋 Welcome to your teamspace"},intro:{id:"TeamHomeWelcomePage.intro",defaultMessage:"Your central hub to share announcements, manage members, and find key docs in your team."},aboutSpaceHeader:{id:"TeamHomeWelcomePage.aboutSpaceHeader",defaultMessage:"About the space"},feedItem:{id:"TeamHomeWelcomePage.feedItem",defaultMessage:"Feed — Read and share project updates, team announcements, and more"},aboutItem:{id:"TeamHomeWelcomePage.aboutItem",defaultMessage:"About — Learn what the teamspace is for and how it should be used"},membersItem:{id:"TeamHomeWelcomePage.membersItem",defaultMessage:"Members — See who is a part of this teamspace today"},docsItem:{id:"TeamHomeWelcomePage.docsItem",defaultMessage:"Docs — Access your team’s documents"},moreHeader:{id:"TeamHomeWelcomePage.moreHeader",defaultMessage:"Looking for more?"},moreInfoPrefix:{id:"TeamHomeWelcomePage.moreInfoPrefix",defaultMessage:"Check out this “Intro to Teamspaces” guide "},moreInfoLink:{id:"TeamHomeWelcomePage.moreInfoLink",defaultMessage:"here"},moreInfoSuffix:{id:"TeamHomeWelcomePage.moreInfoSuffix",defaultMessage:"."}}),Ft=[{type:"text",messageKey:"intro"},{type:"sub_header",messageKey:"aboutSpaceHeader"},{type:"bulleted_list",messageKey:"feedItem"},{type:"bulleted_list",messageKey:"aboutItem"},{type:"bulleted_list",messageKey:"membersItem"},{type:"bulleted_list",messageKey:"docsItem"},{type:"sub_header",messageKey:"moreHeader"},{type:"text",messageKey:"__SEGMENTED__",segments:[{messageKey:"moreInfoPrefix"},{messageKey:"moreInfoLink",link:"https://www.notion.com/help/intro-to-teamspaces"},{messageKey:"moreInfoSuffix"}]}];const Et=(0,W().YK)({welcomeTitle:{id:"UnifiedFeedWelcomePage.welcomeTitle",defaultMessage:"👋 Welcome to Notion"},tipsHeader:{id:"UnifiedFeedWelcomePage.tipsHeader",defaultMessage:"Tips for starting"},inviteTeamPrefix:{id:"UnifiedFeedWelcomePage.inviteTeamPrefix",defaultMessage:"Invite teammates by clicking on the "},inviteTeamBold1:{id:"UnifiedFeedWelcomePage.inviteTeamBold1",defaultMessage:"name of your workspace"},inviteTeamMiddle:{id:"UnifiedFeedWelcomePage.inviteTeamMiddle",defaultMessage:" in the upper left, and going to "},inviteTeamBold2:{id:"UnifiedFeedWelcomePage.inviteTeamBold2",defaultMessage:"Members"},importDocsPrefix:{id:"UnifiedFeedWelcomePage.importDocsPrefix",defaultMessage:"Import any existing documents by clicking on the name of your workspace, going to "},importDocsBold1:{id:"UnifiedFeedWelcomePage.importDocsBold1",defaultMessage:"Settings"},importDocsMiddle:{id:"UnifiedFeedWelcomePage.importDocsMiddle",defaultMessage:", then "},importDocsBold2:{id:"UnifiedFeedWelcomePage.importDocsBold2",defaultMessage:"Import"},templatesPrefix:{id:"UnifiedFeedWelcomePage.templatesPrefix",defaultMessage:"Explore our template gallery by clicking "},templatesBold:{id:"UnifiedFeedWelcomePage.templatesBold",defaultMessage:"Templates"},templatesSuffix:{id:"UnifiedFeedWelcomePage.templatesSuffix",defaultMessage:" in the sidebar and start writing whatever you like!"},moreInfoPrefix:{id:"UnifiedFeedWelcomePage.moreInfoPrefix",defaultMessage:"👉 Want more tips or ideas? Check out our guides "},moreInfoLink:{id:"UnifiedFeedWelcomePage.moreInfoLink",defaultMessage:"here"},moreInfoMiddle:{id:"UnifiedFeedWelcomePage.moreInfoMiddle",defaultMessage:" or "},moreInfoBold:{id:"UnifiedFeedWelcomePage.moreInfoBold",defaultMessage:"ask AI"},moreInfoSuffix:{id:"UnifiedFeedWelcomePage.moreInfoSuffix",defaultMessage:" in Search or clicking on the face in the bottom right!"}}),Wt=[{type:"sub_header",messageKey:"tipsHeader"},{type:"bulleted_list",messageKey:"__SEGMENTED__",segments:[{messageKey:"inviteTeamPrefix"},{messageKey:"inviteTeamBold1",formatting:{bold:!0}},{messageKey:"inviteTeamMiddle"},{messageKey:"inviteTeamBold2",formatting:{bold:!0}}]},{type:"bulleted_list",messageKey:"__SEGMENTED__",segments:[{messageKey:"importDocsPrefix"},{messageKey:"importDocsBold1",formatting:{bold:!0}},{messageKey:"importDocsMiddle"},{messageKey:"importDocsBold2",formatting:{bold:!0}}]},{type:"bulleted_list",messageKey:"__SEGMENTED__",segments:[{messageKey:"templatesPrefix"},{messageKey:"templatesBold",formatting:{bold:!0}},{messageKey:"templatesSuffix"}]},{type:"text",messageKey:"__SEGMENTED__",segments:[{messageKey:"moreInfoPrefix"},{messageKey:"moreInfoLink",link:"https://www.notion.com/help/guides"},{messageKey:"moreInfoMiddle"},{messageKey:"moreInfoBold",formatting:{bold:!0}},{messageKey:"moreInfoSuffix"}]}];function Ot(){const e=(0,b().lU)();if(void 0!==e)return"PersonalHome"===e?Ut({cacheName:"UnifiedFeedWelcomePost.cache",messages:Et,contentLines:Wt}):"TeamHome"===e?Ut({cacheName:"TeamHomeWelcomePost.cache",messages:Kt,contentLines:Ft}):void(0,p().HB)(e)}function Vt(e){var t;const{posts:o,suggestedPostContent:l,blockPropertyValueOverlayStore:d,inUnifiedFeed:c,renderCaughtUpAction:u,hasMore:p,genericFeedDisplaySettings:m}=e,[g,f]=(0,n.useState)(void 0),h=(0,r().v3)().currentUser.id,v=(0,n.createRef)(),[y]=(0,n.useState)(new(ve().G)((()=>new(ke().A)))),S=Ot(),x=(0,b().lU)(),k=function(e){const{posts:t,suggestedPostContent:o,renderCaughtUpPostId:r,welcomePostBlockStore:s}=e;return(0,n.useMemo)((()=>{const e=new Ie({posts:t,suggestedPostContent:o,renderCaughtUpPostId:r,welcomePostBlockStore:s});return i().e.withListenerIgnored((()=>[...e.feedItems()]))}),[t,o,r,s])}({posts:o,suggestedPostContent:l,renderCaughtUpPostId:g,welcomePostBlockStore:p?void 0:S}),I=(0,n.useContext)(be().R),j=(0,s().K8)((()=>{var e;return null==I||null===(e=I.verticalScroller)||void 0===e?void 0:e.getStore().state.element}),[I]),P=(0,n.useCallback)((()=>(null==j?void 0:j.deref())??null),[j]),[A,T]=(0,n.useState)(0);(0,n.useLayoutEffect)((()=>{function e(){var e,t;T(Math.floor(((null===(e=v.current)||void 0===e?void 0:e.getBoundingClientRect().top)??0)+((null===(t=P())||void 0===t?void 0:t.scrollTop)??0)))}e();const t=requestAnimationFrame(e),o=new ResizeObserver((t=>{t[0]&&e()})),n=P();return n&&o.observe(n),()=>{o.disconnect(),cancelAnimationFrame(t)}}),[v,P]);function R(e){const t=k[e];return"welcome"===t.type?"welcome":"caught_up"===t.type?"caught_up":"topic_recommendations"===t.type?"topic_recommendations":"suggested_activity"===t.type?t.activityStores[0].id:t.blockStore.id}const{layout:_}=(0,n.useContext)(C().U9)??{layout:"card"};const B=(0,ge().Te)({count:k.length,getItemKey:R,getScrollElement:P,estimateSize:function(e){return"caught_up"===k[e].type?Pt.caughtUp:Pt[_]},overscan:2,gap:(0,we().iq)({layout:_}),scrollMargin:A,initialOffset:null===(t=P())||void 0===t?void 0:t.scrollTop}),L=(0,w().X)("enable_feed_view_scroll_interruption_fix");(0,n.useEffect)((()=>{L&&(B.shouldAdjustScrollPositionOnItemSizeChange=(e,t,o)=>{var n;const{end:i}=e,r=i+t<((null===(n=P())||void 0===n?void 0:n.scrollTop)??0);return(!r||!o.isScrolling||"backward"!==o.scrollDirection)&&r})}),[L,P,B]);const D=(0,n.useCallback)((()=>{const e=B.shouldAdjustScrollPositionOnItemSizeChange;B.shouldAdjustScrollPositionOnItemSizeChange=()=>(B.shouldAdjustScrollPositionOnItemSizeChange=e,!1)}),[B]);(0,n.useEffect)((()=>{if(!h||g)return;if(void 0===x)return;(async()=>{const e=await(0,ye().lX)(o,10,(async e=>{const t=e.getCreatedById()===h,o=e.pointer.spaceId;if(t||!o)return{id:e.id,read:!0};const n=(0,he().$5)({parent_id:e.id,user_id:h}),i=(0,M().Oo)(e,{table:he().F9,id:n,spaceId:o});await i.load();const r=i.getKeyStore("visited_at").getValue();return{id:e.id,read:Boolean(r)}})),t=null==e?void 0:e.findIndex((e=>e.read)),n=t>0?e[t]:null;f(null==n?void 0:n.id)})()}),[g,o,h,x]);const U=B.getTotalSize(),K=(0,a().IS)((e=>({container:{height:U,position:"relative"},item:{position:"absolute",top:0,left:0,width:"100%"}})),[U]),F=(0,w().X)("topic_subscriptions_posts_in_feed"),E=F&&"PersonalHome"===x,{value:W}=(0,Ce().fJ)(Se().D2,{disabled:!F}),O=(0,w().X)("activity_digest_posts")&&"PersonalHome"===x,{value:V}=(0,Ce().fJ)(Se().AN,{disabled:!O});return(0,_e.jsxs)(_e.Fragment,{children:[E&&W?(0,_e.jsx)(W.TopicRecommendationsPost,{}):void 0,O&&V?(0,_e.jsx)(V.ActivityDigestPostContainer,{inUnifiedFeed:c}):void 0,(0,_e.jsx)("div",{ref:v,style:K.container,children:B.getVirtualItems().map((e=>{const t=R(e.index);return(0,_e.jsx)("div",{"data-index":e.index,ref:B.measureElement,style:{...K.item,transform:`translateY(${e.start-B.options.scrollMargin}px)`},children:(0,_e.jsx)(Ht,{item:k[e.index],inUnifiedFeed:c,renderCaughtUpAction:u,onShowMoreClicked:D,blockPropertyValueOverlayStore:d,genericFeedDisplaySettings:m,pageLoadingContainerStore:y.get(t),topicRecommendationsPostModule:W})},t)}))})]})}function Ht(e){const{item:t,blockPropertyValueOverlayStore:o,renderCaughtUpAction:n,onShowMoreClicked:i,genericFeedDisplaySettings:r,inUnifiedFeed:s,pageLoadingContainerStore:a,topicRecommendationsPostModule:l}=e;return"topic_recommendations"===t.type?l?(0,_e.jsx)(l.TopicRecommendationsPost,{}):null:"user-created"===t.type?(0,_e.jsx)(Rt,{store:t.blockStore,blockPropertyValueOverlayStore:o,index:t.index,inUnifiedFeed:s,onShowMoreClicked:i,genericFeedDisplaySettings:r,pageLoadingContainerStore:a}):"welcome"===t.type?(0,_e.jsx)(Rt,{store:t.blockStore,blockPropertyValueOverlayStore:o,disableInteraction:!0,index:-1,inUnifiedFeed:s,genericFeedDisplaySettings:r,pageLoadingContainerStore:a}):"suggested"===t.type?(0,_e.jsx)(Rt,{store:t.blockStore,blockPropertyValueOverlayStore:o,index:t.index,inUnifiedFeed:!0,genericFeedDisplaySettings:r,isSuggested:!0,pageLoadingContainerStore:a}):"suggested_activity"===t.type?(0,_e.jsx)(Be,{blockStore:t.blockStore,activityStores:t.activityStores,index:t.index}):"caught_up"===t.type?(0,_e.jsx)(zt,{renderCaughtUpAction:n}):void(0,p().HB)(t)}function zt(e){const{renderCaughtUpAction:t}=e,o=(0,a().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:12,paddingTop:24,paddingBottom:24,alignItems:"center"},textWrapper:{display:"flex",flexDirection:"column",gap:2,alignItems:"center"},primaryText:{fontSize:O().J.UIRegular.desktop,fontWeight:O().Wy.medium,color:e.text.secondary}})),[]);return(0,_e.jsxs)("div",{style:o.container,children:[(0,_e.jsx)(xe().Q,{iconGroup:fe().a,variantName:"fill",colorName:"tertiary"}),(0,_e.jsxs)("div",{style:o.textWrapper,children:[(0,_e.jsx)("div",{style:o.primaryText,children:(0,_e.jsx)(W().sA,{defaultMessage:"You’re all caught up",id:"posts.discoverCTA.caughtUp"})}),t]})]})}var Nt=()=>o(568008);function Gt(){const e=(0,r().v3)(),[t,o]=(0,n.useState)(""),[i,l]=(0,n.useState)(!1),[d,c]=(0,n.useState)(null),u=(0,n.useRef)(null),p=(0,s().K8)((()=>j().default.state.currentUserSettingsStore),[]),m=(0,s().K8)((()=>p?Nt().EF(p):[]),[p],{useDeepEqual:!0}),g=(0,a().IS)((e=>{const t="dark"===e.mode;return{container:{display:"flex",flexDirection:"column",marginBottom:12},label:{marginBottom:6,fontSize:12,fontWeight:500,color:e.text.primary},inputContainer:{display:"flex",flexFlow:"row wrap",minHeight:36,padding:6,border:`1px solid ${i?e.stroke.primary:e.regularDividerColor}`,borderRadius:12,backgroundColor:t?e.surface.wash:e.surface.page,cursor:"text",alignItems:"center"},pill:{display:"inline-flex",alignItems:"center",padding:"2px 8px",backgroundColor:t?e.fill.blueTertiary:e.surface.wash,borderRadius:3,fontSize:14,color:e.text.primary,pointerEvents:"auto",margin:"2px"},pillText:{marginRight:6},pillRemoveButton:{cursor:"pointer",color:e.text.secondary,fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",width:16,height:16,borderRadius:"50%",background:"transparent",border:"none",padding:0,margin:0},pillRemoveButtonHovered:{background:"dark"===e.mode?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)"},input:{flex:"1 0 100px",minWidth:80,maxWidth:"100%",height:28,border:"none",outline:"none",background:"transparent",fontSize:14,padding:"0 4px",margin:2,color:e.text.primary}}}),[i]),f=(0,n.useCallback)((()=>{var e;null===(e=u.current)||void 0===e||e.focus()}),[]),h=(0,n.useCallback)((e=>{o(e.target.value)}),[]),v=(0,n.useCallback)((()=>{l(!0)}),[]),y=(0,n.useCallback)((()=>{l(!1)}),[]),S=(0,n.useCallback)((t=>{Nt().OY({environment:e,name:t,creator:"human"})}),[e]),x=(0,n.useCallback)((e=>{"Enter"===e.key&&t.trim()&&(e.preventDefault(),S(t.trim()),o(""))}),[t,S]),b=(0,n.useCallback)((t=>{Nt().qM({environment:e,topicId:t})}),[e]),C=(0,n.useCallback)((()=>{f()}),[f]),k=(0,n.useCallback)((e=>{"Enter"!==e.key&&" "!==e.key||f()}),[f]);return(0,_e.jsxs)("div",{style:g.container,children:[(0,_e.jsx)("div",{style:g.label,children:(0,_e.jsx)(W().sA,{defaultMessage:"Topics you’re following",id:"topic.subscriptions.label"})}),(0,_e.jsxs)("div",{style:g.inputContainer,onClick:C,role:"textbox",tabIndex:0,onKeyDown:k,"aria-label":"Topic subscription input container",children:[m.map((e=>(0,_e.jsxs)("div",{style:g.pill,children:[(0,_e.jsx)("span",{style:g.pillText,children:e.name}),(0,_e.jsx)("button",{style:{...g.pillRemoveButton,...d===e.id?g.pillRemoveButtonHovered:{}},onClick:t=>{t.stopPropagation(),b(e.id)},onMouseEnter:()=>c(e.id),onMouseLeave:()=>c(null),"aria-label":`Remove topic: ${e.name}`,type:"button",children:"×"})]},e.id))),(0,_e.jsx)("input",{style:g.input,ref:u,value:t,onChange:h,onKeyDown:x,onFocus:v,onBlur:y,placeholder:0===m.length?"Type to add topics...":"","aria-label":"Add a topic"})]})]})}const Yt={left:14,right:16},$t=(0,W().YK)({openPostInFullScreen:{defaultMessage:"Open post in full screen",id:"posts.openPostInFullScreen"},discoverPosts:{defaultMessage:"Discover posts across the workspace",id:"posts.discoverCTA.discoverText"}});function qt(e){const{posts:t,suggestedPostContent:o,draftPostStore:i,createDraft:l,handleAddItemClick:d,composerStyle:c,setComposerStyle:p,inUnifiedFeed:m,canWritePosts:g,teamStore:h,collectionContextStore:v,blockPropertyValueOverlayStore:S,subscribedUserTeamStores:x,hasMore:C,paddingLeft:k,paddingRight:I}=e,j=(0,r().v3)(),{isMobile:M,isTablet:P}=(0,r().Y0)(),{WindowSizeStore:A}=j,R=(0,w().X)("topic_subscriptions_posts_in_feed"),_=(0,W().tz)(),{canJoinTeam:B,postingRestricted:L}=(0,se().i)({teamStore:h}),D=(0,s().K8)((()=>de().A.state.isOpen),[]),E=function(){const[e,t]=(0,n.useState)(void 0),o=(0,s().K8)((()=>e&&!e.pathIsDead()),[e]),[i,r]=(0,n.useState)(!1),a=(0,n.useCallback)((()=>{r(!0)}),[]),l=(0,n.useCallback)((e=>{t(e),r(!1)}),[]),d=(0,n.useRef)(!1);return(0,n.useEffect)((()=>{d.current=Boolean(o&&!i)}),[o,i]),(0,le().X)((()=>{d.current&&u().u4({name:"abandon_draft_post"})})),{handleCreatedDraft:l,handleComposerFullScreenClick:a,handleComposerDraftDiscarded:(0,n.useCallback)((()=>{u().u4({name:"abandon_draft_post"})}),[])}}(),O=(0,n.useCallback)((()=>{const e=l();return E.handleCreatedDraft(e),e}),[l,E]),Y=(0,n.useCallback)((()=>{T().tt({environment:j,draftPostStore:i,from:m?"unified_feed":"team_home"}),null==p||p("preview")}),[i,j,p,m]),$=(0,n.useCallback)((()=>{i&&(0,ae().s)(i)?de().A.setState({isOpen:!0}):Y()}),[i,Y]),te=(0,n.useCallback)((()=>{i&&(f().createAndCommit({environment:j,perform:e=>{H().zv({store:i,data:{alive:!1,permissions:[]},transaction:e})},userAction:"PostChannel.discardDraft",canUndo:!1}),E.handleComposerDraftDiscarded())}),[i,j,E]),ce=(0,b().Vs)(),ge=(0,s().K8)((()=>re().default.isSidePeekOpen()),[]),fe=ce&&ge,he=(0,a().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:16,paddingTop:2,marginLeft:fe?void 0:"auto",marginRight:fe?void 0:"auto",paddingLeft:fe?(k??0)+25:0,paddingRight:fe?I:void 0,maxWidth:ce?752:void 0},header:{display:"flex",height:44,alignItems:"center",justifyContent:"space-between",paddingRight:Yt.right,paddingLeft:Yt.left-G().J}})),[ce,fe,k,I]),ve=(0,b().lU)(),ye="PersonalHome"===ve&&(!x||0===x.length),Se="TeamHome"===ve&&(g||B||L),xe=(0,s().K8)((()=>m&&(null==v?void 0:v.databaseType)===K().SC),[v,m]),be=(0,s().K8)((()=>{var e;return null==v||null===(e=v.collectionStore())||void 0===e?void 0:e.isPublishingEnabled()}),[v]),Ce=void 0===ve&&be,ke="PersonalHome"===ve?U().y8.PersonalHomePage:"TeamHome"===ve?U().y8.TeamHomePage:U().y8.GenericFeed,we=xe||Se||Ce,Ie=(0,s().K8)((()=>"open"===ue.state.type),[]),je=(0,s().K8)((()=>(0,z().gj)(j,A.state.height)),[j,A]),Me=(0,s().K8)((()=>{var e;if("open"!==ue.state.type)return;const n=ue.state.storeId;return t.find((e=>e.id===n))??(null===(e=o.find((e=>e.blockStore.id===n)))||void 0===e?void 0:e.blockStore)}),[t,o]),Pe=(0,s().K8)((()=>{var e;const t=null==v?void 0:v.collectionViewStore(),o=null==v?void 0:v.getViewType();if(!t||!o||!v)return;const n=(0,y().hH)(v);return{show_page_icon:null==v?void 0:v.shouldShowPageIcon(),collection_peek_mode:n,show_author_byline:(null==v||null===(e=v.collectionViewStore())||void 0===e||null===(e=e.getFormatStore())||void 0===e?void 0:e.getKeyValue("feed_show_author_byline"))??!0}}),[v]),Ae=(0,ee().uO)(!1,P);return(0,_e.jsxs)("div",{style:he.container,children:[we?(0,_e.jsx)(me().pM,{collectionContextStore:"PersonalHome"===ve?v:void 0,showEmptyComposerInUnifiedFeed:ye,teamStore:h,postStore:i,isEditing:!1,onSubmit:$,createDraft:O,onFullScreenClick:E.handleComposerFullScreenClick,discardDraft:te,composerStyle:c,setComposerStyle:p}):void 0,R&&"PersonalHome"===ve?(0,_e.jsx)(Gt,{}):void 0,(0,_e.jsx)(Vt,{posts:t,suggestedPostContent:o,blockPropertyValueOverlayStore:S,inUnifiedFeed:m,renderCaughtUpAction:(0,_e.jsx)(Jt,{}),sizesKey:`${m?"unified":null==h?void 0:h.id}`,hasMore:C,genericFeedDisplaySettings:Pe}),g&&!we?(0,_e.jsx)(Qt,{handleAddItemClick:d,collectionContextStore:v}):void 0,M&&Me?(0,_e.jsx)(X().Ay,{popupType:ne().n.BottomSheet,open:Ie,onDismiss:()=>ue.close(),bottomSheetInitialState:"full",bottomSheetBackgroundColor:"contentBackground",trapFocus:!0,render:()=>(0,_e.jsx)(Q().A,{header:(0,_e.jsxs)("div",{style:he.header,children:[(0,_e.jsx)(N().oK,{style:Ae,store:Me,ancestorMaxWidth:160,currentPageMaxWidth:240,maxAncestorCount:1,showCurrentPageControls:!1,isMobile:!0}),(0,_e.jsx)(q().A,{ariaLabel:_.formatMessage($t.openPostInFullScreen),icon:()=>(0,F().arrowExpandDiagonalBottomLeftToTopRightIcon)(),onClick:()=>{V().Yf({blocks:[Me],environment:j,pageVisitSource:ke})}})]}),menuType:oe().gu.Modal,hideMobileTopbar:!0,whiteBackground:!0,children:(0,_e.jsx)(J().A,{capture:!0,allowMobileAutoScroll:!0,render:()=>(0,_e.jsx)(Z().Ay,{store:Me,context:ie().Rr.Frame,paddingBottom:je,disabled:!1})})})}):void 0,(0,_e.jsx)(pe().A,{postStore:i,isOpen:D,onDismiss:()=>de().A.setState({isOpen:!1}),onConfirm:()=>{de().A.setState({isOpen:!1}),Y()}})]})}function Jt(){const e=(0,a().IS)((e=>({secondaryText:{fontSize:O().J.UIRegular.desktop,fontWeight:O().Wy.regular,color:e.text.secondary},container:{display:"flex",flexDirection:"column",gap:12,alignItems:"center"}})),[]);return(0,_e.jsx)("div",{style:e.container,children:(0,_e.jsx)("div",{style:e.secondaryText,children:(0,_e.jsx)(W().sA,{...$t.discoverPosts})})})}function Qt(e){const{collectionContextStore:t,handleAddItemClick:o}=e,{layout:i}=(0,n.useContext)(C().U9)??{layout:"card"},r=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:10,fontSize:O().J.UIRegular.desktop,boxShadow:"dark"===e.mode?`${e.darkDividerColor} 0px 0px 0px 1px`:`${e.regularDividerColor} 0px 0px 0px 1px`,padding:"minimal"===i?"12px 14px 12px 14px":"9px 14px 8px",color:e.text.tertiary,minHeight:20,height:"100%"},icon:{width:14,height:14,marginRight:6,fill:e.icon.tertiary}})),[i]);return t?(0,_e.jsxs)($().A,{onClick:o,onMouseDown:te().tr,style:r.container,children:[(0,E().plusIcon)(r.icon),(0,_e.jsx)(Y().w,{collectionContextStore:t})]}):null}const Xt=[];function Zt(e){var t;const{collectionViewStore:o,collectionContextStore:U,blockPropertyValueOverlayStore:K,paddingLeft:F,paddingRight:E,paddingBottom:W,disabled:O}=e,[V,H]=(0,n.useState)("preview"),[z,N]=(0,n.useState)([]),G=(0,r().v3)(),Y=(0,s().K8)((()=>{var e;return null===(e=(0,k()._m)(G))||void 0===e?void 0:e.id}),[G]),{currentSpaceViewStore:$,currentSpaceStore:q}=(0,s().K8)((()=>({currentSpaceViewStore:j().default.state.currentSpaceViewStore,currentSpaceStore:j().default.state.currentSpaceStore})),[]),J=(0,s().K8)((()=>o.getCollectionStore()),[o]),Q=(0,s().K8)((()=>U.collectionViewBlockStore()),[U]),X=(0,s().K8)((()=>null==Q?void 0:Q.getParentStore()),[Q]),Z=(0,s().K8)((()=>U.groupsStore.getGroupState(Xt)),[U]),ee=(0,s().K8)((()=>{var e;return(null==Z||null===(e=Z.currentLimit)||void 0===e?void 0:e.state)??10}),[null==Z?void 0:Z.currentLimit]),te="PersonalHome"===(0,b().lU)(),oe=(0,w().X)("system_generated_posts"),{layout:ne,containerRef:ie}=(0,_().g)();(0,n.useEffect)((()=>(I().a.register(ie),()=>{I().a.unregister(ie)})),[ie]),(0,l().Yb)((async()=>{if(!q||!te||!oe)return;const e=await m().callApi({eventName:"getServerGeneratedPostContent",environment:G,data:{spaceId:q.id}});if("failed"===e.type)throw e.error;if("success"===e.type){const{activityTimeline:t}=e.data,o=i().e.withListenerIgnored((()=>t.map((e=>"created"===e.type?{type:"new",blockStore:M().sk.createChildStore(q,{table:"block",id:e.pageId,spaceId:q.id})}:"edited"===e.type?{type:"edited",blockStore:M().sk.createChildStore(q,{table:"block",id:e.pageId,spaceId:q.id}),activityStores:e.activityIds.map((e=>M().sk.createChildStore(q,{table:"activity",id:e,spaceId:q.id})))}:void(0,p().HB)(e)))));N(o)}}),[q,G,te,oe]);const re={type:"results",filter:{operator:"and",filters:[]},limit:ee},se=(0,S().A)({id:"default_posts_collection_key",reducer:re,collectionContextStore:U,groupsPointer:Xt}),[ae,le]=(0,n.useState)(!1);(0,n.useEffect)((()=>{null==Z||Z.reducerResultStore.setState(se),se&&le(!0)}),[se,null==Z?void 0:Z.reducerResultStore]),(0,n.useEffect)((()=>{u().u4({name:"open_feed",args:{feed_type:te?"unified":"team"}})}),[te]);const de=(0,b().lU)(),{draftPosts:ce,allPosts:ue}=(0,s().K8)((()=>null!=Z&&Z.resultsStore.state&&ae?Z.resultsStore.state.reduce(((e,t)=>{void 0!==de&&t.uiLocation.removeParent();const o=t.getModel();return"draft"===(null==o?void 0:o.getDraftStatus())?e.draftPosts.push(t):e.allPosts.push(t),e}),{draftPosts:[],allPosts:[]}):{draftPosts:void 0,allPosts:void 0}),[null==Z?void 0:Z.resultsStore,ae,de]),pe=(0,s().K8)((()=>Boolean(y().XQ({collectionContextStore:U,reducerResult:se,isFullScreen:!1}))),[U,se]),me=(0,s().K8)((()=>Q?(0,_e.jsx)(x().jJ,{groupsPointer:Xt,store:Q,collectionContextStore:U,format:o.getFormat(),isFullScreen:U.isFullScreenStore.state,incrementLimitsInRelatedGroups:!1}):void 0),[Q,U,o]),ge=(0,s().K8)((()=>{if("TeamHome"!==de||!J)return;const e=J.id,t=j().default.state.currentSpaceStore;return t&&e?M().sk.createChildStore(t,{table:"team",id:e,spaceId:t.id}):void 0}),[J,de]),fe=(0,s().K8)((()=>Boolean(Y)&&!O&&(d().p2((null==J?void 0:J.getRole())??"none")??!1)),[Y,J,O]),he=(0,s().O$)(U.isLoadedStore),[{value:ve}]=(0,l().Yb)((async()=>{if(!q)return{unsubscribedTeamIds:void 0};const e=await m().callApi({eventName:"getSubscribedAndUnsubscribedTeams",environment:G,data:{spaceId:q.id}});if("failed"===e.type)throw e.error;return"success"===e.type?{unsubscribedTeamIds:e.data.unsubscribedTeamIds}:e}),[q,G]),{unsubscribedTeamIds:ye}=ve??{unsubscribedTeamIds:void 0},Se=(0,n.useMemo)((()=>i().e.withListenerIgnored((()=>null==$?void 0:$.getTeamsStores()))),[$]),xe=(0,s().K8)((()=>{if(Se&&ye)return null==Se?void 0:Se.filter((e=>!(null!=ye&&ye.includes(e.id))&&e.allowsUserToPost()))}),[Se,ye]),be=(0,s().K8)((()=>{const e=o.getCollectionSource();if("typed"===(null==e?void 0:e.type))return e.teamId}),[o]),Ce=(0,s().K8)((()=>{if(be&&q)return M().h4.createChildStore(q,{table:c().yK,id:be,spaceId:q.id})}),[be,q]),ke=(0,s().K8)((()=>{if(!Ce||!Y)return!1;return Ce.isMemberOrGuest(Y,P()._.getSpacePermissionGroupIds({userId:Y,spaceId:Ce.getSpaceId()}))}),[Ce,Y]),we=(0,s().K8)((()=>!!Ce&&Ce.allowsUserToPost()),[Ce]);(0,l().Yb)((async()=>{if(xe&&be&&ye&&(ye.includes(be)||!ke||!we)){const e=xe[0];e&&await(0,R().z)({environment:G,collectionContextStore:U,currentSpaceViewStore:$,selectedStore:e,postStore:void 0}),g().YH(),H("preview")}}),[ye,be,G,U,$,xe,ke,we]);const Ie=(0,s().K8)((()=>{const e=o.getCollectionSource();if("typed"===(null==e?void 0:e.type)){var t;return(null==e?void 0:e.teamId)??(null==xe||null===(t=xe[0])||void 0===t?void 0:t.id)}}),[o,xe]),je=null==xe?void 0:xe.find((e=>e.id===Ie));(0,n.useEffect)((()=>{je&&xe&&U&&he&&L().u.setState({selectedTeamStore:je,subscribedUserTeamStores:xe,collectionContextStore:U,isPostsCollectionLoaded:he,setComposerStyle:H,teamTargetMobilePopupOpen:L().u.state.teamTargetMobilePopupOpen})}),[je,xe,U,he]),(0,n.useEffect)((()=>()=>{"PersonalHome"===de&&B().z.clearAllSummaries()}),[de]);const Me=(0,s().K8)((()=>{if(ce){if(te){return ce.find((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)===(null==je?void 0:je.id)}))}return ce[0]}}),[ce,je,te]),Pe=(0,s().K8)((()=>{if(!q||!je)return;const e=M().sk.createUniqueRootStore(G,{table:"block",id:je.id,spaceId:q.id});return e.isCollectionView()?e:void 0}),[G,q,je]),Ae=(0,s().K8)((()=>null==Pe?void 0:Pe.getCollectionStore()),[Pe]),Te=(0,b().YU)(),Re=(0,n.useCallback)((()=>{const e=te?Ae:J;if((fe||te)&&e)return(0,T().Nm)({environment:G,collectionStore:e,selectedTeamCollectionStore:Ae})}),[G,J,fe,Ae,te]),Be=(0,n.useCallback)((()=>{if(!(0,A().EF)(G))return void(0,A().QY)(G);if(!Z)return;const e=U.isFullScreenStore.state;U.searchQueryStore.state&&(0,v().S)({searchQuery:"",collectionContextStore:U,isFullScreen:e}),f().createAndCommit({userAction:"PostChannelCollectionView.handleAddItemClick",environment:G,canUndo:!0,perform:t=>{h().hn({transaction:t,environment:G,results:Z.resultsStore.state,collectionContextStore:U,isFullScreen:e,groupsPointer:Z.groupsPointer,insertAtIndex:Z.resultsStore.state.length,editInPeek:!0,from:"feed_view_add_item_bottom"})}})}),[G,Z,U]),Le=(0,a().IS)((()=>({padding:{paddingLeft:F,paddingRight:E,paddingTop:Te,paddingBottom:W},loadMore:{paddingTop:24,paddingBottom:24}})),[F,E,Te,W]);return void 0===ue?(0,_e.jsx)(D().Qt,{containerStyle:Le.padding,hasComposer:Boolean(de)}):he&&X?(null===(t=U.databaseItemsVisibleTracker)||void 0===t||t.handleItemsRenderStart(),(0,_e.jsxs)("div",{ref:ie,style:Le.padding,children:[(0,_e.jsx)(C().yo,{layout:ne,children:(0,_e.jsx)(qt,{collectionContextStore:U,blockPropertyValueOverlayStore:K,posts:ue,suggestedPostContent:z,draftPostStore:Me,composerStyle:V,setComposerStyle:H,createDraft:Re,handleAddItemClick:Be,inUnifiedFeed:te,canWritePosts:fe,teamStore:ge,subscribedUserTeamStores:xe,hasMore:pe})}),pe?(0,_e.jsx)("div",{style:Le.loadMore,children:me}):void 0]})):null}var eo=()=>o(646447),to=()=>o(2143),oo=()=>o(347199),no=()=>o(817942),io=()=>o(696746),ro=()=>o(756279),so=()=>o(70437),ao=()=>o(143650);function lo(){const e=(0,r().v3)(),[t,o]=(0,n.useState)(void 0),i=(0,s().K8)((()=>{const e=null==t?void 0:t.isLoadedStore.state;return Boolean(e)}),[t]);(0,n.useEffect)((()=>{var t;null===(t=e.mobileNative)||void 0===t||t.markTransitionReady({environment:e,type:"posts"})})),(0,n.useEffect)((()=>{Ge().u.initMeasurement({homeType:"personal"})}),[]);const l=(0,s().K8)((()=>({top:e.WindowSizeStore.getSafePaddingBottomPx(0),bottom:e.WindowSizeStore.getSafePaddingBottomPx(0)})),[e.WindowSizeStore]),d=(0,a().IS)((e=>{const t=l.bottom+70;return{pageLayout:{order:3,display:"flex",flexDirection:"column",width:"100%",backgroundColor:e.contentBackground},scroller:{marginBottom:l.bottom,width:"100%",paddingBottom:t+44},layoutContent:{flex:1,paddingTop:44,paddingLeft:16,paddingRight:16,height:"100%"},header:{fontSize:36,fontFamily:O().Tf.sans,fontWeight:O().Wy.bold,marginBottom:8},container:{width:"100%",height:"100%",display:"flex"}}}),[l.bottom]);(0,ao().e)();const c=(0,n.useCallback)((e=>{oo().A.PageScroller=e}),[]),u=(0,s().K8)((()=>{const e=(0,io().XH)("posts");if(null!=e&&e.isCollectionView())return e}),[]);return u?(0,_e.jsx)("div",{id:me().d_,className:"home-content",style:d.container,children:(0,_e.jsx)(to().H,{type:ro().A.Y,ref:c,style:d.scroller,children:(0,_e.jsx)(no().Mx,{type:"home-phone",style:d.pageLayout,children:(0,_e.jsx)(b().bO,{surface:"PersonalHome",children:(0,_e.jsxs)(no().vV,{style:d.layoutContent,children:[(0,_e.jsx)("div",{style:d.header,children:(0,_e.jsx)(W().sA,{id:"posts.mobile.header",defaultMessage:"Feed"})}),(0,_e.jsx)(eo().dN,{setCollectionContextStore:o,store:u,disabled:!1,isFullScreen:!1,productUseCase:"mobile_feed",overrideViewType:"feed",isFirstItem:!0,isLastItem:!0,hideViewTabBar:!1,overridePaddingLeft:0,overridePaddingRight:0,headerAllowedActions:so().l}),i?void 0:(0,_e.jsx)(D().Qt,{hasComposer:!1})]})})})})}):null}o(809678),o(57145),o(823215);var co=()=>o(662303),uo=()=>o(869190),po=()=>o(641007);const mo=(0,o(340498).xh)("eye",{default:{loader:()=>o.e(64632).then(o.bind(o,89849))},small:{loader:()=>o.e(64632).then(o.bind(o,670371))},fill:{loader:()=>o.e(64632).then(o.bind(o,187881))},fillSmall:{loader:()=>o.e(64632).then(o.bind(o,514608))}},["eye","vision","see","look","observe"]);var go=()=>o(381349),fo=()=>o(496603),ho=()=>o(620689),vo=()=>o(102172),yo=()=>o(138873),So=()=>o(994006),xo=()=>o(453697),bo=()=>o(549500),Co=()=>o(673657),ko=()=>o(745766),wo=()=>o(680026),Io=()=>o(227440),jo=()=>o(948914);const Mo=5,Po=25,Ao=20,To=2;function Ro(e,t){return M().LU.createChildStore(t,{table:_t().oo,id:e})}function _o(e){return{color:e.text.contrastSecondary,fontSize:12}}function Bo(e){let{userData:t,isPresent:o,rootStore:n,isShowingInPostFeed:i}=e;const l=(0,a().DP)(),d=(0,r().v3)(),c=(0,W().tz)(),u=d.currentUser.id,p=(0,s().K8)((()=>Ro(t.userId,n)),[t,n]),m=(0,s().K8)((()=>p.isDefined()),[p]),g=(0,s().K8)((()=>p.getFullName(c)),[c,p]),f=(0,s().K8)((()=>p.getEmail()),[p]);if(!m)return null;let h;return o?u!==p.id&&(h=t.blockId&&!i?(0,_e.jsx)(W().sA,{defaultMessage:"Viewing now. Click to see where they are.",id:"post.presenceIndicator.viewingNowWithLocation.tooltip"}):(0,_e.jsx)(W().sA,{defaultMessage:"Viewing now",id:"post.presenceIndicator.viewingNow.tooltip"})):t.activityTimestampNearestMinuteMs&&(h=(0,_e.jsx)(W().sA,{defaultMessage:"Last viewed {timeFromNow}",id:"post.presenceIndicator.lastViewedTime.tooltip",values:{timeFromNow:(0,uo().v9)(Math.min(t.activityTimestampNearestMinuteMs,Date.now()),co().locale)}})),(0,_e.jsxs)("div",{children:[(0,_e.jsx)("div",{className:"notranslate",children:g}),(0,_e.jsx)("div",{style:{fontWeight:400},children:f}),h?(0,_e.jsx)("div",{style:{color:l.text.contrastSecondary,minWidth:150,paddingTop:2,paddingBottom:2,lineHeight:1.3},children:h}):void 0]})}function Lo(e){let{userData:t,index:o,rootStore:n}=e;const i=(0,a().DP)(),l=(0,r().v3)(),d=(0,wo().dp)(l,t),c=(0,s().K8)((()=>Ro(t.userId,n)),[t,n]);if(!(0,s().K8)((()=>c.isDefined()),[c]))return null;let u;!d&&t.activityTimestampNearestMinuteMs&&(u=(0,uo().v9)(t.activityTimestampNearestMinuteMs,co().locale));const p=(0,_e.jsxs)("div",{style:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4},children:[(0,_e.jsx)(So().A,{userStore:c,avatarSize:18,style:{flexGrow:1}}),(0,_e.jsx)("div",{style:{marginLeft:"auto",paddingLeft:12,textAlign:"right",flexShrink:1,color:i.text.contrastSecondary},children:u})]});if(d&&t.blockId){const e=t.blockId;return(0,_e.jsx)($().A,{onClick:()=>ho().BL([e],!0,l),style:{display:"flex",alignItems:"center"},children:p})}return(0,_e.jsx)("div",{style:{display:"flex",alignItems:"center"},children:p})}function Do(e){let{hiddenUsers:t,hiddenUsersCount:o,hasMore:n,rootStore:i,events:s}=e;const l=(0,a().IS)((e=>({viewingNow:_o(e),lastViewedBy:_o(e)})),[]),d=(0,r().v3)(),[c,u]=fo().jB(t,(e=>(0,wo().dp)(d,e))),p=u.slice(0,Po-c.length),m=o-(c.length+p.length);return(0,_e.jsxs)("div",{...s,children:[c.length>0?(0,_e.jsxs)("div",{style:{marginBottom:4},children:[(0,_e.jsx)(ht().A,{style:l.viewingNow,children:(0,_e.jsx)(W().sA,{defaultMessage:"Viewing now",id:"post.presenceIndicator.hiddenUsers.viewingNow.tooltip"})}),c.map(((e,t)=>(0,_e.jsx)(Lo,{userData:e,index:t,rootStore:i},t)))]}):void 0,p.length>0?(0,_e.jsxs)("div",{style:{marginBottom:4},children:[(0,_e.jsx)(ht().A,{style:l.lastViewedBy,children:(0,_e.jsx)(W().sA,{defaultMessage:"Last viewed by",id:"post.presenceIndicator.hiddenUsers.lastViewedBy.tooltip"})}),p.map(((e,t)=>(0,_e.jsx)(Lo,{userData:e,index:t,rootStore:i},t)))]}):void 0,(0,_e.jsx)(Uo,{remainingHiddenUsersCount:m,hasMore:n})]})}function Uo(e){let{hasMore:t,remainingHiddenUsersCount:o}=e;const n=(0,a().IS)((e=>({message:{marginLeft:2,marginTop:2,color:e.text.contrastSecondary}})),[]);return o>0?(0,_e.jsx)("div",{style:n.message,children:t?(0,_e.jsx)(W().sA,{defaultMessage:"{remainingVisitorsCount}+ more…",id:"topbarPresence.presenceIndicator.hiddenUsers.evenMoreUsersNotViewing.tooltip",values:{remainingVisitorsCount:o}}):(0,_e.jsx)(W().sA,{defaultMessage:"{remainingVisitorsCount} more…",id:"topbarPresence.presenceIndicator.hiddenUsers.moreUsersNotViewing.tooltip",values:{remainingVisitorsCount:o}})}):null}function Ko(e){const{userData:t,rootStore:o,isShowingInPostFeed:i=!1}=e,l=(0,r().v3)(),{userId:d}=t,c=(0,wo().dp)(l,t),{userStore:u,showAvatar:p}=(0,s().K8)((()=>{if((0,_t().MF)(d))return{userStore:po().px,showAvatar:!0};const e=Ro(d,o);return{userStore:e,showAvatar:(e.isDefined()||(0,_t().MF)(e.id))&&!e.getIsSuspended()}}),[d,o]),m=function(e,t){return(0,a().IS)((o=>{const n={width:Ao,height:Ao,borderRadius:Ao},i=e(o);return{button:{transition:"all 0.2s ease",transform:"scale(1)"},buttonHovered:{transform:"scale(1.15)",background:"none"},buttonPressed:{transform:"scale(0.9)",background:"none"},uiUserAvatarStyles:{...n},avatarInnerOutline:{...n,outlineStyle:"solid",outlineColor:o.UIUserAvatarInnerOutline,outlineWidth:.5,outlineOffset:-.5},avatarBorder:t?{...n,outlineStyle:"solid",outlineColor:i,outlineWidth:1.5,outlineOffset:-.5}:n,avatarOuterOutline:{...n,outlineStyle:"solid",outlineColor:t?o.UIUserAvatarOuterOutline:o.UIUserAvatarIdleOutline,outlineWidth:.5,outlineOffset:t?1:0,marginRight:-6,position:"relative"},initialColor:{color:t?i:o.icon.secondary}}}),[e,t])}((0,n.useCallback)((e=>d===l.currentUser.id?e.UIUserAvatarSelfBorder:(0,go().Nq)(d,e)),[l.currentUser.id,d]),c);return p?(0,_e.jsx)(ft().A,{disableTooltip:i,textWrap:!0,renderTooltip:()=>(0,_e.jsx)(Bo,{rootStore:o,userData:t,isPresent:c,isShowingInPostFeed:i}),render:e=>{const o=(0,_e.jsx)("div",{style:m.avatarOuterOutline,children:(0,_e.jsx)("div",{style:m.avatarBorder,children:(0,_e.jsx)(xo().A,{iconStyle:m.avatarInnerOutline,userStore:u,style:m.uiUserAvatarStyles,size:Ao,avatarShouldShowShadow:!1,initialOverrideStyle:m.initialColor})})});if(c&&t.blockId){const n=t.blockId;return(0,_e.jsx)($().A,{...e,onClick:()=>ho().BL([n],!0,l),style:m.button,hoveredStyle:m.buttonHovered,pressedStyle:m.buttonPressed,children:o})}return(0,_e.jsx)("div",{...e,children:o})}}):null}function Fo(e){const{rootStore:t,pageVisitStore:o,presenceStore:n,maxUsers:i=Mo,isShowingInPostFeed:l,enableFacepile:d=!0}=e,c=(0,r().v3)(),u=(0,r().Y0)(),p=c.currentUser.id,{isEveryUserStoreReady:m,visibleUsers:g,hiddenUsers:f,totalCount:h,hasMore:v}=(0,s().K8)((()=>{const e=c.currentUser.id;if(!e)return{visibleUsers:[],hiddenUsers:[],totalCount:0,hasMore:!1,isEveryUserStoreReady:!1};const r=(0,wo().PZ)({pageVisitStore:o,presenceStore:n});t.isNavigableBlock()&&(0,vo().BP)(t,c,c.device)&&r.push({userId:po().px.id,present:!0});const s=r.toSorted(((e,t)=>{const o=e.activityTimestampNearestMinuteMs??Number.MAX_SAFE_INTEGER,n=t.activityTimestampNearestMinuteMs??Number.MAX_SAFE_INTEGER;return o!==n?n-o:e.present&&!t.present?-1:!e.present&&t.present?1:0})),a=s.map((e=>e.userId)).map((e=>Ro(e,t))),l=s.findIndex((t=>t.userId===e)),d=s.splice(l,1);s.push(...d);const u=Math.min(s.length-1,i);return{visibleUsers:s.slice(0,u),hiddenUsers:s.slice(u),totalCount:(null==o?void 0:o.state.totalCount)??r.length,hasMore:Boolean(null==o?void 0:o.state.hasMore),isEveryUserStoreReady:a.every((e=>e.isReady()||(0,_t().MF)(e.id)))}}),[o,n,c,t,i],{useDeepEqual:!0}),y=(0,s().O$)(jo().b),S=(0,Co().useIsDictatingToPage)(t),x=!(0,s().O$)(Io().e),b=(0,a().IS)((e=>({presenceContainer:{...(0,ko().g)({noDrag:c.device.isElectron&&!y}),display:"flex",gap:d?12:4,alignItems:"center",position:"relative",...yo().Of,width:"fit-content",padding:To,borderRadius:18,transform:"translateZ(0)",...u.isMobile?{...yo().ZR,padding:"1px 4px"}:{}},totalCount:{color:e.text.secondary,fontSize:13,marginRight:8},avatarsContainer:{display:"flex",flexDirection:"row-reverse",alignItems:"center"},eyeIcon:{color:e.text.secondary}})),[c.device.isElectron,y,d,u.isMobile]);if(!p||!m||x)return null;return 0===g.length&&1===f.length?S?(0,_e.jsx)("div",{style:b.presenceContainer,children:(0,_e.jsx)(bo().hq,{enableClickToScroll:!0,rootStore:t})}):null:d?(0,_e.jsx)(ft().A,{disableTooltip:0===f.length,allowHover:!0,originGap:7,renderTooltip:e=>(0,_e.jsx)(Do,{hiddenUsers:f,hiddenUsersCount:(h??0)-g.length,hasMore:v,rootStore:t,events:e}),render:e=>(0,_e.jsxs)($().A,{style:b.presenceContainer,children:[(0,_e.jsxs)("div",{style:b.avatarsContainer,children:[g.toReversed().map((e=>(0,_e.jsx)(Ko,{userData:e,rootStore:t},e.userId))),l?void 0:(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)(Ko,{rootStore:t,userData:{userId:p,present:!0}}),(0,_e.jsx)(bo().hq,{enableClickToScroll:!0,rootStore:t})]})]}),(0,_e.jsx)("div",{style:b.totalCount,...e,children:h})]})}):(0,_e.jsxs)("div",{style:b.presenceContainer,children:[(0,_e.jsx)(xe().Q,{style:b.eyeIcon,iconGroup:mo,variantName:"small"}),(0,_e.jsx)("span",{style:b.totalCount,children:h})]})}},978578:(e,t,o)=>{o.d(t,{MS:()=>a,aD:()=>s,bu:()=>r,uO:()=>i,uZ:()=>l});var n=()=>o(628182);function i(){return{flex:1,marginLeft:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?0:8,overflow:"hidden",marginRight:arguments.length>1&&void 0!==arguments[1]&&arguments[1]?16:8,whiteSpace:"nowrap",height:"100%",minWidth:0,maxWidth:"100%",textOverflow:"ellipsis"}}const r=36;function s(e){return{iconStyle:{height:26,width:26,fill:e.icon.primary},iconContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",marginRight:14,color:e.icon.secondary,width:26},redesignedIconStyle:{height:24,width:24,fill:e.icon.primary},redesignedCircleIconContainer:{background:e.surface.page,color:e.icon.primary,display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:18,width:r,height:r},redesignedCoverPhotoIconContainer:{background:e.surface.page,color:e.icon.primary,display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:18,width:r,height:r,boxShadow:"0px 2px 4px -1px rgba(0, 0, 0, 0.06), 0px 14px 28px -6px rgba(0, 0, 0, 0.10)"}}}function a(e){const{WindowSizeStore:t}=e;return{marginTop:t.state.paddingTop,paddingLeft:t.getSafePaddingLeftPx(0),paddingRight:t.getSafePaddingRightPx(0)}}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n().s1,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=1/(window.devicePixelRatio||1);return{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",maxWidth:"100%",height:t,boxShadow:o?`0 ${i}px 0 ${e.regularDividerColor}`:"none",background:e.contentBackground,transition:"box-shadow 300ms",WebkitUserSelect:"none",cursor:"pointer"}}},987017:(e,t,o)=>{o.d(t,{Ay:()=>d,Jy:()=>l,vU:()=>a});o(581454);var n=o(296540),i=()=>o(722872),r=o(474848);function s(e){let{tabs:t,selectedIndex:s,onChange:d,separatorIndexes:c,right:u,style:p,rightStyle:m,tabStyle:g,tabTitleStyle:f,selectedTabTitleStyle:h,tabBorderStyle:v,selectedTabStyle:y,readOnly:S,hideTabBorder:x,idPrefix:b,hideTabIndexes:C}=e;const k=(0,n.useContext)(i().xu),{device:w,WindowSizeStore:I}=(0,o(484714).v3)(),{safePaddingLeft:j,safePaddingRight:M}=(0,o(56366).K8)((()=>({safePaddingLeft:I.getSafePaddingLeftCSS(16),safePaddingRight:I.getSafePaddingRightCSS(16)})),[I]),P=(0,o(401497).IS)((e=>{const t={paddingTop:6,paddingBottom:6,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.text.secondary,...g},o=`inset 0 -1px 0 ${e.regularDividerColor}`,n=k.menuType===i().gu.Popup,r={fontSize:16,paddingTop:2,paddingLeft:n?16:j,paddingRight:n?16:M,zIndex:2,height:44,background:e.popoverBackground};return{container:{overflowY:"visible",overflowX:"auto",display:"flex",width:"100%",position:"relative",boxShadow:x?void 0:o,...w.isMobile?r:{fontSize:14,paddingLeft:8,paddingRight:8,zIndex:1},...p},separator:{display:"inline-flex",alignItems:"center",margin:"0 4px",paddingBottom:4,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.regularDividerColor},tab:t,selectedTab:{...t,position:"relative",color:e.text.primary,...y},border:{borderBottom:`2px solid ${e.text.primary}`,position:"absolute",bottom:0,left:8,right:8,...v},rightContainer:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"flex-end",color:e.text.secondary,...m}}}),[k.menuType,w.isMobile,m,j,M,y,p,v,g,x]);return(0,r.jsxs)("div",{className:"hide-scrollbar",style:P.container,role:"tablist",children:[t.map(((e,t)=>{if(null!=C&&C.includes(t))return null;const i=t===s;return(0,r.jsxs)(n.Fragment,{children:[(0,r.jsxs)("div",{style:i?P.selectedTab:P.tab,children:[(0,r.jsx)(o(493823).p,{role:"tab",style:{...f,...i?h:{}},onClick:()=>d(t),disabled:S,isLightGray:!Boolean(i),"aria-selected":i,id:a(b,t),"aria-controls":l(b,t),children:e}),i&&(0,r.jsx)("div",{style:P.border})]},`tabButton-${t}`),c&&c.includes(t)&&(0,r.jsx)("div",{style:P.separator,className:"notranslate",children:"|"},`${t}-separator`)]},t)})),u&&(0,r.jsx)("div",{style:P.rightContainer,children:u})]})}function a(e,t){if(e)return`${e}-tab-${t}`}function l(e,t){if(e)return`${e}-tabpanel-${t}`}const d=n.memo(s)},996494:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().Store{getInitialState(){return{editMode:void 0,store:void 0}}cloneState(){return o(496603).o8(this.state)}}const i=new n}}]);