"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[2411,5834,28958,34208],{73223:(e,t,n)=>{n.r(t),n.d(t,{dismissTutorial:()=>d,resetTutorials:()=>u,tutorialAdvanceToStep:()=>p,tutorialAdvanceToStepAfter:()=>g,tutorialGoToNextStep:()=>l,tutorialGoToPrevStep:()=>c});var o=()=>n(541235),i=()=>n(751156),r=()=>n(755199),a=()=>n(739135),s=()=>n(765957);function l(e,t){var n;const{currentUserSettingsStore:o}=s().default.state;if(!o)return;const i=null===(n=o.getSettings())||void 0===n?void 0:n.tutorials;f({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{r().mJ({userSettingsStore:o,transaction:e,data:{tutorials:{...i,[t]:(0,a().i9)(o,t)}}})},userId:o.id})}function c(e,t){var n;const{currentUserSettingsStore:o}=s().default.state;if(!o)return;const i=null===(n=o.getSettings())||void 0===n?void 0:n.tutorials;f({userAction:"TutorialActions.prevStep",environment:e,perform:e=>{r().mJ({userSettingsStore:o,transaction:e,data:{tutorials:{...i,[t]:(0,a().KD)(o,t)}}})},userId:o.id})}function d(e,t){var n;const{currentUserSettingsStore:i}=s().default.state;if(!i)return;const a=null===(n=i.getSettings())||void 0===n?void 0:n.tutorials;(null==a?void 0:a[t])!==o().YD&&f({userAction:"TutorialActions.dismissTutorial",environment:e,perform:e=>{r().mJ({userSettingsStore:i,transaction:e,data:{tutorials:{...a,[t]:o().YD}}})},userId:i.id})}function u(e){const{currentUserSettingsStore:t}=s().default.state;t&&f({userAction:"TutorialActions.resetTutorialsDebug",environment:e,perform:e=>{r().mJ({userSettingsStore:t,transaction:e,data:{tutorials:{}}})},userId:t.id})}function p(e,t,n){var i;const{currentUserSettingsStore:l}=s().default.state;if(!l||(0,a().x$)(l,t))return;const c=(0,a().gt)(l,t);o().c$[t].steps.findIndex((e=>e.id===c))>=o().c$[t].steps.findIndex((e=>e.id===n))||r().mJ({userSettingsStore:l,transaction:e,data:{tutorials:{...null===(i=l.getSettings())||void 0===i?void 0:i.tutorials,[t]:n}}})}function g(e,t,n){if((0,a().ll)(n))return;const o=(0,a().tb)(t,n);o&&p(e,t,o)}function f(e){return i().createAndCommit({...e,canUndo:!1})}},77279:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const i=new o},320865:(e,t,n)=>{n.d(t,{A:()=>i});n(296540);var o=n(474848);const i=function(){return(0,o.jsx)(n(678553).Ay,{title:(0,o.jsx)(n(331542).A,{})})}},380048:(e,t,n)=>{n.d(t,{I:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("chevronLeft",{viewBox:"0 0 16 16",directional:!0,svg:(0,o.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},452148:(e,t,n)=>{n.r(t),n.d(t,{InPageFind:()=>ne});n(898992),n(672577),n(430670);var o=n(296540),i=()=>n(833744),r=()=>n(395361),a=()=>n(484714),s=()=>n(56366),l=()=>n(401497),c=()=>n(591779),d=()=>n(158359),u=n(474848);const p=(0,n(340498).wt)("arrowSquarePath",{viewBox:"0 0 30 22",directional:!0,svg:(0,u.jsx)("path",{d:"M0.773438 8.39062C0.578125 8.19531 0.484375 7.96875 0.492188 7.71094C0.5 7.45312 0.605469 7.22656 0.808594 7.03125L4.75781 3.09375C5.14062 2.71875 5.53516 2.53125 5.94141 2.53125C6.35547 2.53125 6.75391 2.71875 7.13672 3.09375L11.0859 7.03125C11.2891 7.22656 11.3906 7.45312 11.3906 7.71094C11.3984 7.96875 11.3047 8.19531 11.1094 8.39062C10.9062 8.59375 10.6797 8.69141 10.4297 8.68359C10.1797 8.66797 9.95312 8.5625 9.75 8.36719L8.625 7.25391L6.87891 5.39062V18.1172C6.87891 18.7266 7.03516 19.1875 7.34766 19.5C7.66797 19.8047 8.12109 19.957 8.70703 19.957H18.2109C18.5469 19.957 18.8047 20.0391 18.9844 20.2031C19.1641 20.3672 19.2539 20.6016 19.2539 20.9062C19.2617 21.2031 19.1719 21.4336 18.9844 21.5977C18.8047 21.7617 18.5469 21.8438 18.2109 21.8438H8.67188C7.45312 21.8438 6.53516 21.5391 5.91797 20.9297C5.30078 20.3281 4.99219 19.4219 4.99219 18.2109V5.41406L3.25781 7.25391L2.13281 8.36719C1.9375 8.5625 1.71094 8.66797 1.45312 8.68359C1.20312 8.69141 0.976562 8.59375 0.773438 8.39062ZM10.7461 1.20703C10.7383 0.910156 10.8281 0.679688 11.0156 0.515625C11.2031 0.351562 11.4609 0.269531 11.7891 0.269531H21.3281C22.5547 0.269531 23.4727 0.574219 24.082 1.18359C24.6992 1.78516 25.0078 2.69141 25.0078 3.90234V16.6992L26.7422 14.8477L27.8672 13.7461C28.0703 13.5508 28.2969 13.4492 28.5469 13.4414C28.7969 13.4258 29.0234 13.5156 29.2266 13.7109C29.4219 13.9141 29.5156 14.1445 29.5078 14.4023C29.5 14.6523 29.3945 14.8789 29.1914 15.082L25.2539 19.0078C24.8711 19.3906 24.4727 19.582 24.0586 19.582C23.6445 19.582 23.2461 19.3906 22.8633 19.0078L18.9141 15.082C18.7109 14.8789 18.6055 14.6523 18.5977 14.4023C18.5977 14.1445 18.6953 13.9141 18.8906 13.7109C19.0938 13.5156 19.3203 13.4258 19.5703 13.4414C19.8203 13.4492 20.0469 13.5508 20.25 13.7461L21.375 14.8477L23.1211 16.7227V3.99609C23.1211 3.38672 22.9648 2.92969 22.6523 2.625C22.3398 2.3125 21.8906 2.15625 21.3047 2.15625H11.7891C11.4609 2.15625 11.207 2.07422 11.0273 1.91016C10.8477 1.74609 10.7539 1.51172 10.7461 1.20703Z"})});var g=()=>n(498474),f=()=>n(212050),v=()=>n(356596),m=()=>n(919709),S=()=>n(175947),h=()=>n(959013),y=()=>n(496603),x=()=>n(284371),C=()=>n(112873),I=()=>n(476380),w=()=>n(555102),P=()=>n(650829),b=()=>n(164992),k=()=>n(118078),M=()=>n(614415),A=()=>n(186445),D=()=>n(38337),_=()=>n(792540),j=()=>n(375555),V=()=>n(231722),T=()=>n(645873),R=()=>n(644914),B=()=>n(962730),F=()=>n(430483),L=()=>n(295169),E=()=>n(77246),K=()=>n(735372),O=()=>n(712505),z=()=>n(847),H=()=>n(46986),Q=()=>n(145214),$=()=>n(920773),N=()=>n(364280),W=()=>n(285790),G=()=>n(805751),U=()=>n(623580),Y=()=>n(545805),X=()=>n(35392),J=()=>n(204063),Z=()=>n(859428),q=()=>n(765957),ee=()=>n(502438);const te=(0,h().YK)({inputPlaceHolder:{id:"inPageFind.find.inputPlaceholder",defaultMessage:"Find, replace, ask..."},replaceInputPlaceHolder:{id:"inPageFind.replace.inputPlaceHolder",defaultMessage:"Replace with..."},close:{id:"inPageFind.close",defaultMessage:"Close"},previousMatch:{id:"inPageFind.navigation.previousMatch",defaultMessage:"Previous match"},nextMatch:{id:"inPageFind.navigation.nextMatch",defaultMessage:"Next match"},toggleReplace:{id:"inPageFind.navigation.replaceToggle",defaultMessage:"Replace"},replaceAll:{id:"inPageFind.matches.replaceAll",defaultMessage:"Replace all"},replace:{id:"inPageFind.matches.individualReplace",defaultMessage:"Replace"},noMatches:{id:"inPageFind.noMatches",defaultMessage:"Not found"},askAi:{id:"inPageFind.askAi",defaultMessage:"Ask AI"},ofSpacer:{id:"inPageFind.ofSpacer",defaultMessage:"of"},lockedPage:{id:"inPageFind.lockedPage",defaultMessage:"Page is locked"}});function ne(){const{activePageDetails:e,secondaryPageDetails:t}=function(){const{mainPageDetails:e,peekPageDetails:t}=(0,s().K8)((()=>{const e=q().default.state.mainEditorCurrentBlockStore,t=O().default.peekTargetStore.state;return{mainPageDetails:e?{store:e,view:"main"}:void 0,peekPageDetails:t?{store:t,view:O().default.state.mode}:void 0}}),[],{useDeepEqual:!0}),n=(0,s().K8)((()=>{var e;return Boolean(null===(e=ee().default.getCurrentDefaultContainer())||void 0===e?void 0:e.isPeekRenderer())}),[]);return{activePageDetails:n?t:e,secondaryPageDetails:n?e:t}}();return e?(0,u.jsx)(oe,{activePageDetails:e,secondaryPageDetails:t}):null}function oe(e){const{activePageDetails:t,secondaryPageDetails:n}=e,[d,p]=(0,o.useState)(-1),[g,v]=(0,o.useState)(""),x=(0,o.useRef)(void 0),M=(0,o.useRef)(null),B=(0,o.useRef)(null),$=(0,a().v3)(),N=(0,h().tz)(),{focused:W,findQuery:X,showReplaceInput:J,open:Z,textSelectionOnOpen:q}=(0,s().O$)(K().Ay),ee=(0,c().ZC)(X),ne=(0,c().ZC)(q),oe=(0,c().ZC)(d),ce=X===ee,de=(0,s().K8)((()=>t.store.id),[t.store.id]),ue=(0,c().ZC)(de),pe=(0,o.useRef)();(0,o.useEffect)((()=>{ue===de||n||(I().VN({clearQuery:!0}),x.current=void 0)}),[de,ue,n]),(0,i().L)({active:Z,closeHandler:()=>{I().VN({clearQuery:!1})},ref:M,ignoreKeydown:!0,excludedSelectors:[`.${D().OO1}`,`.${D().rgg}`]});const ge=(0,s().K8)((()=>{if(!Z)return!1;x.current=void 0;const e=null==q?void 0:q.multiSelection,t=!(0,V().OH)(e,null==ne?void 0:ne.multiSelection),n=!!e&&((0,V().KP)(e)&&e.start.index!==e.end.index);return t&&n}),[Z,null==ne?void 0:ne.multiSelection,null==q?void 0:q.multiSelection]),fe=(0,s().K8)((()=>O().default.state.open),[]),ve=(0,o.useCallback)((async e=>{var o;const i=null===(o=[t,n].find((t=>(null==t?void 0:t.view)===(null==e?void 0:e.view))))||void 0===o?void 0:o.store;if(!e||!i)return void K().wb.setState(void 0);const r=I().c2(i,e),a="comment"===pe.current&&(!e||"comment"!==e.type),s=r&&r.state.forceShowProperties&&("page_property_name"===pe.current||"page_property_value"===pe.current)&&(!e||"page_property_name"!==e.type&&"page_property_value"!==e.type);if(a?C().xl():s&&r.reset(),"block"===e.type)K().wb.setState({type:"block",id:e.blockStore.id,selection:e.selection});else if("page_property_name"===e.type){const t=e.propertyId;K().wb.setState({type:"page_property_name",propertyId:t})}else"page_property_value"===e.type?K().wb.setState({type:"page_property_value",id:e.blockStore.id,inlineCollectionId:e.inlineCollectionId,inlineCollectionViewId:e.inlineCollectionViewId,propertyId:e.propertyId,selection:e.selection}):"comment"===e.type?K().wb.setState({type:"comment",id:e.commentId,selection:e.selection}):"simple_table_cell"===e.type&&K().wb.setState({type:"simple_table_cell",id:e.blockStore.id,propertyId:e.propertyId,selection:e.selection});pe.current=e.type,ce&&d===oe||await I().V9({environment:$,match:e,pageStore:i,pagePropertiesStore:r})}),[t,n,ce,d,oe,$]),me=(0,s().K8)((()=>{if(!Z||0===X.length)return[];return y().oE([t,n]).flatMap((e=>(0,_().OM)({pageDetails:e,find:X,intl:N})))}),[Z,X,t,n,N]),Se=(0,s().K8)((()=>me.length),[me.length]);(0,o.useEffect)((()=>{if(ge){const e=me.findIndex((e=>{const t=null==q?void 0:q.multiSelection;if("block"!==e.type||!t||e.blockStore.id!==t.start.store.id)return!1;const{startIndex:n,endIndex:o}=e.selection;return n===t.start.index&&o===t.end.index}));p(Math.max(e,0))}else d>=me.length&&!ce&&p(0);const e=me[d];ve(e)}),[d,me,ce,ge,null==q?void 0:q.multiSelection,ve]);const he=(0,s().K8)((()=>-1!==d?me[d]:void 0),[d,me]),ye=function(e){let{activePageDetails:t,find:n}=e;const i=(0,s().K8)((()=>F().zD.isInPageFindQnaOptionEnabledForUser()),[]),{value:r}=(0,T().fJ)(P().assistantDependency),l=(0,a().v3)(),c=(0,o.useCallback)((async e=>{if(!r)return;const o=await r.assistantActions.resetAndInitializeAssistantSession({environment:l,makeActiveSession:!0});if(!o)return;const i=L().default.getSessionContext(o.sessionId);i&&(i.assistantConfigurationStore.setSearchScope({pageId:t.store.id,type:"page"}),I().VN({clearQuery:!1}),r.assistantMenuStore.setState({open:!0,currentView:"chat",from:"find_and_replace",isAssistantInputEmpty:r.assistantMenuStore.state.isAssistantInputEmpty}),e&&e.length>0&&await r.handleSubmitNewQuestion({currentClientSkillWithSettings:void 0,newValue:(0,m().x9d)(n),environment:l,shouldForceStartNewSession:!1,source:"in_page_find",assistantSurfaceType:"corner"}))}),[r,l,t.store.id,n]);return i?c:void 0}({activePageDetails:t,find:X}),xe=function(){const e=(0,a().v3)(),t=(0,H().i7)(),n=(0,s().O$)(w().bX),i=(0,o.useCallback)((t=>{if(!n||!n.blockStore)return;if(!t||0===t.length)return;I().VN({clearQuery:!1});const o=(0,w().Kf)({environment:e,spaceStore:n.spaceStore,userStore:n.userStore,value:(0,m().x9d)(t)}),i=(0,w().Xd)({environment:e,inferenceContext:n,addSteps:[o],surface:"find_and_replace",config:{type:"workflow"}}),r=(0,z().addTranscriptToNewThreadAndRun)({environment:e,spaceStore:n.spaceStore,transcript:i});(0,k().showChatSidebar)({environment:e,store:n.blockStore,chatSidebarState:{isOpen:!0,threadId:r.id}})}),[e,n]);return t?i:void 0}(),Ce=xe??ye,Ie=Boolean(Ce),we=(0,r().Y)((e=>{K().Ay.update((t=>({...t,findQuery:e})))}),300),Pe=(0,o.useCallback)((async e=>{var o;const{location:i}=e;if(0===Se)return;if(1===Se){var r;const e=null===(r=[t,n].find((e=>(null==e?void 0:e.view)===me[0].view)))||void 0===r?void 0:r.store;if(!e)return;const o=I().c2(e,me[0]);return void(await I().V9({environment:$,match:me[0],pagePropertiesStore:o,pageStore:e}))}const a=d+("next"===i?1:-1),s=a>=0&&a<Se?a:"next"===i?0:Se-1,l=me[s];p(s);const c=null===(o=[t,n].find((e=>(null==e?void 0:e.view)===l.view)))||void 0===o?void 0:o.store;if(!c)return;const u=I().c2(c,l);u&&await I().V9({environment:$,match:l,pagePropertiesStore:u,pageStore:c})}),[me,Se,d,t,n,$]),be=(0,s().K8)((()=>Z?{main:E().Uv.getMode(t.store),side_peek:n?E().Uv.getMode(n.store):void 0}:{main:void 0,side_peek:void 0}),[t,Z,n]),ke=(0,s().K8)((()=>t.store.isLocked()&&(!n||n.store.isLocked())),[t.store,n]),Me=(0,s().K8)((()=>$.device.isElectron),[$.device.isElectron]),Ae=(0,s().K8)((()=>A().$o.state?0:(0,S().ek)($.device.isElectronMac)),[$.device.isElectronMac]),De=(0,s().K8)((()=>(0,R().zo)($,fe)),[$,fe]),_e=(0,o.useCallback)((()=>{const e=he&&("block"===he.type||"simple_table_cell"===he.type)&&he.blockStore.getTitleStore(),t=e?he.blockStore.getTitleStore():void 0,n=e&&t?{start:{store:t,index:he.selection.startIndex},end:{store:t,index:he.selection.endIndex}}:void 0;I().VN({clearQuery:!1,overridePreviousTextSelection:n})}),[he]),je=(0,o.useCallback)((e=>{e.preventDefault&&e.preventDefault();const t=B.current;t&&(0,j().G)($,t)}),[$,B]),Ve=(0,l().IS)((e=>({findInputContainer:{display:"flex",alignItems:"center",gap:10,padding:"0px 10px"},container:{boxShadow:e.shadowMD,position:"absolute",top:0,right:b().d,zIndex:1e3,backgroundColor:"light"===e.mode?e.palette.gray[0]:e.palette.gray[200],borderRadius:12,width:280,outline:`3px solid ${"light"===e.mode?e.palette.uiBlue[200]:e.palette.uiBlue[400]}`},inputContainer:{boxShadow:"none",border:"none",outline:"none",flexGrow:1},findInput:{paddingTop:10,paddingBottom:10},input:{fontSize:14}})),[]);return(0,u.jsxs)(Q().A,{visible:Z,initial:{opacity:0,translateY:0,translateX:-De},animate:{opacity:1,translateY:Ae+b().d,translateX:-De},config:{duration:150},exit:{translateY:Ae,opacity:0,translateX:-De},style:Ve.container,ref:M,children:[(0,u.jsx)("div",{style:Ve.findInputContainer,children:(0,u.jsx)(G().A,{debugName:"FindAndReplace",capture:!0,allowSearch:!0,allowOpenLinkMenu:!0,children:(0,u.jsxs)(Y().A,{debugName:"FindAndReplace",capture:!0,onShiftEnter:()=>Pe({location:"previous"}),onUp:()=>Pe({location:"previous"}),onDown:()=>Pe({location:"next"}),onGroup:e=>{e.preventDefault&&e.preventDefault(),Pe({location:"next"})},onUngroup:e=>{e.preventDefault&&e.preventDefault(),Pe({location:"previous"})},onEsc:()=>_e(),onCommandJ:()=>null==Ce?void 0:Ce(),onCommandEnter:()=>null==Ce?void 0:Ce(X),onSearch:e=>je(e),onToggleInPageFindReplace:()=>{!Me||ke||0===X.length&&!J||X.length>0&&0===Se&&!J||I().zV()},children:[(0,u.jsx)(U().A,{value:x.current??X,onChange:e=>{const t=e.target.value;if(x.current=t.length>0?t:void 0,we.cancel(),x.current&&x.current.length>0)return we(x.current),void p(0);K().Ay.update((e=>({...e,findQuery:""}))),K().wb.setState(void 0)},format:U().C.Transparent,placeholder:N.formatMessage(te.inputPlaceHolder),selectAll:!0,focus:W,onFocus:()=>I().T5(),focusInitial:!0,onSubmit:()=>Pe({location:"next"}),inputStyle:{...Ve.input,...Ve.findInput},style:Ve.inputContainer,ref:B},"find-input-element"),0===Se?(0,u.jsx)(re,{hasQuery:X.length>0,isQnaEnabled:Ie,onClick:()=>null==Ce?void 0:Ce(X),isShowingReplaceInput:J}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(le,{currentSelectionIndex:d,numberOfMatches:Se}),(0,u.jsx)(ae,{jumpToBlockFn:Pe,numberOfMatches:Se,isShowingReplaceInput:J,onReplaceIconClick:()=>{ke||I().zV()},hasFindQuery:X.length>0,isPageLocked:ke})]}),(0,u.jsx)(se,{onClick:()=>I().VN({clearQuery:!1}),icon:f().u,shortcut:"esc",caption:te.close,active:!1})]})})}),(0,u.jsx)(ie,{currentSelectedMatchIndex:d,findInput:X,replaceInput:g,setReplaceInput:v,highlightMatches:me,shouldShow:J,editorViewEditorModeMap:be,pageDetails:{activePageDetails:t,secondaryPageDetails:n}})]})}function ie(e){const{findInput:t,replaceInput:n,setReplaceInput:o,highlightMatches:i,currentSelectedMatchIndex:r,shouldShow:c,editorViewEditorModeMap:d,pageDetails:{activePageDetails:p,secondaryPageDetails:g}}=e,f=(0,h().tz)(),m=(0,a().v3)(),S=t===n,y=(0,s().K8)((()=>-1!==r?i[r]:void 0),[r,i]),C=(0,s().K8)((()=>{if(0===t.length||S||!y)return!1;const e=y.view===p.view?p.store:(null==g?void 0:g.store)??void 0;return(0,_().M5)({environment:m,match:y,pageStore:e})}),[p.store,p.view,y,m,t.length,S,g]),w=(0,l().IS)((e=>({divider:{height:1,backgroundColor:e.lightDividerColor},replaceButton:{fontSize:13,display:"flex",borderRadius:8,height:void 0,paddingTop:7,paddingBottom:7},replaceAll:{fontWeight:x().Wy.regular,color:e.text.secondary},replaceInputContainer:{display:"flex",padding:10,flexDirection:"column",alignItems:"flex-end",gap:3},inputContainer:{boxShadow:"none",border:"none",outline:"none",flexGrow:1},input:{fontSize:14}})),[]),{value:P}=(0,T().fJ)(M().fM);if(!P)return null;const{AnimatePresence:b,motion:k}=P;return(0,u.jsx)(b,{children:c&&(0,u.jsxs)(k.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},style:{overflowY:"hidden"},transition:{duration:.1},children:[(0,u.jsx)("div",{style:w.divider}),(0,u.jsxs)("div",{style:w.replaceInputContainer,children:[(0,u.jsx)(U().A,{value:n,onChange:e=>{o(e.target.value)},format:U().C.Transparent,placeholder:f.formatMessage(te.replaceInputPlaceHolder),inputStyle:w.input,style:w.inputContainer,focusInitial:!0,onSubmit:()=>{C&&y&&I().HC({matches:[y],environment:m,replace:n,find:t,intl:f,editorViewEditorModeMap:d,pageDetails:e.pageDetails})}},"replace-input-element"),(0,u.jsxs)(N().fI,{gap:4,children:[(0,u.jsx)($().p,{onClick:()=>I().HC({matches:i,environment:m,replace:n,find:t,intl:f,editorViewEditorModeMap:d,pageDetails:e.pageDetails}),style:{...w.replaceButton,...w.replaceAll},disabled:0===t.length||S,isLightGray:0===t.length||S,children:f.formatMessage(te.replaceAll)}),(0,u.jsx)(J().A,{onClick:()=>{y&&I().HC({matches:[y],environment:m,replace:n,find:t,intl:f,editorViewEditorModeMap:d,pageDetails:e.pageDetails})},style:{...w.replaceButton,cursor:C?"pointer":"not-allowed"},disabled:!C,children:(0,u.jsxs)(N().fI,{gap:4,alignItems:"center",children:[f.formatMessage(te.replace),(0,u.jsx)("span",{children:(0,v().K)({height:14,width:14})})]})})]})]})]})})}function re(e){const{hasQuery:t,isQnaEnabled:n,onClick:o,isShowingReplaceInput:i}=e,r=(0,h().tz)(),a=(0,l().IS)((e=>({container:{fontSize:13,display:"flex",borderRadius:8,height:void 0,paddingTop:7,paddingBottom:7},notFound:{whiteSpace:"nowrap",fontSize:12,color:e.text.tertiary}})),[]);return t?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{style:a.notFound,children:r.formatMessage(te.noMatches)}),n&&!i?(0,u.jsx)(Z().A,{placement:B().W.Bottom,originGap:18,renderTooltip:()=>(0,u.jsx)(X().A,{name:"commandEnter"}),allowHover:!1,render:e=>(0,u.jsx)(J().A,{style:a.container,...e,onClick:o,children:r.formatMessage(te.askAi)})}):null]}):null}function ae(e){const{jumpToBlockFn:t,isShowingReplaceInput:n,onReplaceIconClick:o,isPageLocked:i}=e,r=(0,a().Y0)(),l=(0,s().K8)((()=>r.isElectron),[r.isElectron]);return(0,u.jsxs)(N().fI,{alignItems:"center",gap:2,children:[(0,u.jsx)(se,{active:!1,caption:te.previousMatch,icon:g().q,onClick:()=>t({location:"previous"}),shortcut:"shiftEnter"}),(0,u.jsx)(se,{active:!1,caption:te.nextMatch,icon:d().P,onClick:()=>t({location:"next"}),shortcut:"enter"}),(0,u.jsx)(se,{active:n,icon:p,onClick:o,caption:i?te.lockedPage:te.toggleReplace,shortcut:l?"toggleInPageFindReplace":void 0,overrideIconStyle:{width:14,height:14,strokeWidth:.6},disable:i})]})}function se(e){const{onClick:t,caption:n,icon:o,active:i,shortcut:r,overrideIconStyle:a,disable:s}=e,c=(0,h().tz)(),d=(0,l().IS)((e=>({icon:{width:12,height:12,color:i?e.palette.uiBlue[600]:e.icon.secondary,strokeWidth:.4,stroke:"currentcolor",...a},iconWrapper:{padding:3,width:void 0,height:void 0,cursor:s?"not-allowed":"pointer"},description:{color:e.text.contrastSecondary},hoveredBackground:{background:i?e.palette.uiBlue[100]:e.buttonHoveredBackground},active:{}})),[i,s,a]);return(0,u.jsx)(Z().A,{placement:B().W.Bottom,originGap:18,renderTooltip:e=>(0,u.jsxs)("div",{...e,children:[(0,u.jsx)("div",{children:c.formatMessage(n)}),!s&&r?(0,u.jsx)("div",{style:d.description,children:(0,u.jsx)(X().A,{name:r})}):null]}),allowHover:!1,render:e=>(0,u.jsx)(W().A,{...e,icon:e=>o({...d.icon,...d.active}),ariaLabel:c.formatMessage(n),hoveredStyle:d.hoveredBackground,onClick:()=>t(),style:d.iconWrapper,disabled:s})})}function le(e){const{numberOfMatches:t,currentSelectionIndex:n}=e,o=(0,h().tz)(),i=(0,l().IS)((e=>({container:{fontSize:".8rem",color:e.text.tertiary,userSelect:"none",cursor:"default"}})),[]);return 0===t?null:(0,u.jsx)("div",{style:i.container,children:(0,u.jsxs)(N().fI,{gap:4,alignItems:"center",children:[(0,u.jsx)("span",{children:n+1}),o.formatMessage(te.ofSpacer),(0,u.jsx)("span",{children:t})]})})}},465364:(e,t,n)=>{n.d(t,{$N:()=>_,D5:()=>j,GB:()=>M,M9:()=>b,Pt:()=>D,eW:()=>A,jo:()=>T,v7:()=>k});n(944114),n(898992),n(803949),n(581454);var o=()=>n(244641),i=()=>n(787626),r=()=>n(713998),a=()=>n(597777),s=()=>n(604995),l=()=>n(416504),c=()=>n(519831),d=()=>n(496603),u=()=>n(534177),p=()=>n(299709),g=()=>n(317001),f=()=>n(520861),v=()=>n(878060),m=()=>n(44729),S=()=>n(246826),h=()=>n(319975),y=()=>n(519839),x=()=>n(695625),C=()=>n(397248),I=()=>n(217429),w=()=>n(630116),P=()=>n(747671);function b(e){const{environment:t,droppedStores:n,duplicate:r,calendarBy:d,transaction:u,collectionContextStore:v,duplicateActions:S}=e,h=o().c9.fromMillis(e.startOfDay);let x=!0;for(const o of n){const t=e.collectionStore?e.collectionStore:(0,y().Dj)({store:o,collectionContextStore:v});if(o.getParentTable()===c().Vl||!t){x=!1;break}m().X$({childStore:o,parentStore:t,transaction:u})||(x=!1)}const C=(0,f().T)({environment:t,droppedStores:n,duplicate:r,transaction:u,collectionStore:e.collectionStore,duplicateActions:S});for(const o of C){const n=e.collectionStore?e.collectionStore:(0,y().Dj)({store:o,collectionContextStore:v});if(!n)continue;const r=n.getMappedProperty(d),c=o.getPropertyStore(r),f=(0,i().b)(c.getValue())||s().Ec((0,l().P)()),m=s().kW(f,(0,l().P)()),S=h.toFormat(s().tr);let C;if("date"===m.type||"datetime"===m.type)C={...m,start_date:S};else{const e=s().AA(m,(0,l().P)());if(!e.end)return;const t={...m,start_date:S},n=s().AA(t,(0,l().P)()).start.diff(e.start,"days"),o=e.end.plus(n).toFormat(s().tr);C={...m,start_date:S,end_date:o}}const I=s().kW(C,a().$K(f)||(0,l().P)());(0,g().j)({environment:t,store:o,collectionStore:n,collectionContextStore:v,shouldCoerce:!0,groupsPointer:[],transaction:u,alreadyMovedToCollection:x}),j({environment:t,type:"dateValue",propertyId:r,store:o,transaction:u,dateValue:I}),(0,p().E)({environment:t,collectionContextStore:v,block_id:o.id,property:r,property_type:"date",from:"calendar"})}}function k(e){const{calendarStore:t,direction:n,targetStore:o}=e;t.setState({...t.state,isDragging:!0,targetStore:o,direction:n,temporaryValue:void 0})}function M(e){const{calendarStore:t,x:n,y:r,calendarBy:c}=e,u=t.state;if(u.isDragging){const e=(0,i().b)(u.targetStore.getPropertyStore(c).getValue());if(!e)return;const p=s().kW(e,(0,l().P)()),g=u.temporaryValue||e,f=s().kW(g,(0,l().P)()),v=[];u.dayStoreMap.forEach(((e,t)=>{v.push({store:e,timestamp:t})}));const m=v.find((e=>{let{store:t}=e;const o=x().T.getRectFromStore(t);return Boolean(o&&C().ux(o,n,r))}));let S;if(m){const e=o().c9.fromMillis(m.timestamp),t=e.endOf("day"),n=e.toFormat(s().tr);if(p){const i=s().AA(p,(0,l().P)());if(u.direction===P().Q.Left)if(o().IX.fromDateTimes(e,t).contains(i.start))S=p;else{let e;e="datetimerange"===p.type||"daterange"===p.type?{...p,start_date:n,end_date:p.end_date}:"datetime"===p.type?{type:"datetimerange",start_date:n,start_time:p.start_time,end_date:p.start_date,end_time:p.start_time,time_zone:p.time_zone,reminder:p.reminder}:{type:"daterange",start_date:n,end_date:p.start_date,reminder:p.reminder};const t=s().AA(e,(0,l().P)());S=!i.end&&t.start>i.start||i.end&&t.start>i.end?f:e}else if(i.end?o().IX.fromDateTimes(e,t).contains(i.end):o().IX.fromDateTimes(e,t).contains(i.start))S=p;else{let e;e="date"===p.type?{...p,type:"daterange",end_date:n}:"datetime"===p.type?{...p,type:"datetimerange",end_date:n,end_time:"00:00"}:{...p,end_date:n};const t=s().AA(e,(0,l().P)());S=t.end&&t.end<t.start?f:e}}}if(S&&!d().n4(f,S)){const e=s().kW(S,a().$K(g)||(0,l().P)());t.setState({...u,temporaryValue:e})}}}function A(e){const{environment:t,calendarStore:n,calendarBy:o,transaction:i}=e,r=n.state;r.isDragging&&r.temporaryValue&&(j({type:"dateValue",environment:t,dateValue:r.temporaryValue,propertyId:o,store:r.targetStore,transaction:i}),n.setState({...n.state,isDragging:!1}))}function D(e){const{calendarStore:t}=e,n=t.state;n.isDragging&&t.setState({...n,isDragging:!1})}function _(e){const{environment:t,store:n,collectionStore:i,collectionContextStore:a,startDayOfWeek:c,transaction:d}=e,u=a.dateRangeStartStore.state,p=(0,l().P)(),f=a.normalizedQueryStore.state;if(!f||!f.calendar_by)return;const v=(null==i?void 0:i.getMappedProperty(f.calendar_by))??f.calendar_by,m=s().hp(u,c,p),h=m.startOf("month"),y=m.endOf("month"),x=o().c9.now().startOf("day");let C;return C=o().IX.fromDateTimes(h,y).contains(x)?s().p6(x.valueOf(),p):s().p6(s().iB(u,c,p).valueOf(),p),S().zv({store:n.getPropertiesStore(),data:{[v]:r().m5(C)},transaction:d}),(0,g().j)({environment:t,store:n,collectionStore:i,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:d}),n}function j(e){const{environment:t,store:n,propertyId:o,transaction:i}=e;let a;"timestamp"===e.type?a=s().p6(e.timestampMs.valueOf(),(0,l().P)()):"dateValue"===e.type?a=e.dateValue:(0,u().HB)(e);const c=n.getPropertyValue(o);if(a&&function(e){const{propertyId:t,oldDateValue:n,newPersistedDate:o,store:i}=e;if(n||!o||void 0!==o.reminder)return!1;if(!I().default.checkGate({gateName:"adoption_reminder_collection_default"}))return!1;const r=V(t,i);if(void 0===r)return!1;return!0}({propertyId:o,oldDateValue:c,newPersistedDate:a,store:n})){const e=V(o,n);void 0!==e&&(a={...a,reminder:e})}const d=r().m5(a);S().zv({store:n.getPropertiesStore(),data:{[o]:d},transaction:i}),v().O({environment:t,store:n,dateProperty:{id:o,oldValue:c,newValue:d}})}function V(e,t){const n=t.getAssociatedCollectionStore();if(!n)return;const o=n.getSchema();if(!o)return;const i=o[e];return i&&"date"===i.type?i.default_reminder:void 0}function T(e){const{environment:t,collectionStore:n,calendarBy:o,store:i,insertStores:r,collectionContextStore:a,transaction:s}=e,l=i.getPropertyStore(o).getValue();for(const c of r)(0,g().j)({environment:t,store:c,collectionStore:n,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:s}),h().R9({environment:t,store:c.getPropertyStore(o),value:l,transaction:s});return r.map((e=>w().Bv.createChildStore(n,e.pointer)))}},520861:(e,t,n)=>{n.d(t,{T:()=>i});n(944114),n(898992),n(908872);var o=()=>n(415651);function i(e){const{environment:t,collectionStore:n,duplicate:i,droppedStores:r,transaction:a,duplicateActions:s}=e,{movedStores:l,reparentedStores:c}=r.reduce(((e,t)=>(i||t.getAssociatedCollectionId()!==(null==n?void 0:n.id)?e.reparentedStores.push(t):e.movedStores.push(t),e)),{movedStores:[],reparentedStores:[]});return[...l,...o().MS({environment:t,droppedStores:c,duplicate:i,transaction:a,resolveTemplateVariables:!1,duplicateActions:s})]}},541235:(e,t,n)=>{n.d(t,{YD:()=>r,c$:()=>o,q_:()=>i});const o={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]}},i="completed",r="dismissed"},735790:(e,t,n)=>{n.d(t,{M:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.25 15.25 11.5",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M3 7.375h6.829a2.501 2.501 0 0 0 4.842 0H17a.625.625 0 1 0 0-1.25h-2.329a2.501 2.501 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25M12.25 5.5a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5"}),(0,o.jsx)("path",{fillRule:"evenodd",d:"M7.75 15.75a2.5 2.5 0 0 0 2.421-1.875H17a.625.625 0 1 0 0-1.25h-6.829a2.5 2.5 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25h2.329A2.5 2.5 0 0 0 7.75 15.75m0-1.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})]})},r=(0,n(340498).wt)("sliders",i)},739135:(e,t,n)=>{n.d(t,{KD:()=>c,gt:()=>d,i9:()=>l,ll:()=>a,tb:()=>s,x$:()=>r});var o=()=>n(541235),i=()=>n(496603);function r(e,t){return a(d(e,t))}function a(e){return void 0!==e&&(e===o().q_||e===o().YD)}function s(e,t){if(a(t))return;const n=o().c$[e],i=n.steps.findIndex((e=>e.id===t));return-1===i?n.steps[0].id:i===n.steps.length-1?o().q_:n.steps[i+1].id}function l(e,t){const n=d(e,t);if(n&&!a(n))return s(t,n)}function c(e,t){const n=d(e,t);if(n)return function(e,t){const n=o().c$[e];var r;if(a(t))return null===(r=(0,i().HV)(n.steps))||void 0===r?void 0:r.id;const s=n.steps.findIndex((e=>e.id===t));return-1!==s&&0!==s?n.steps[s-1].id:void 0}(t,n)}function d(e,t){var n;if(!e)return;const i=((null===(n=e.getSettings())||void 0===n?void 0:n.tutorials)||{})[t];return void 0===i?o().c$[t].steps[0].id:i}},742117:(e,t,n)=>{n.d(t,{V:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("chevronRight",{viewBox:"0 0 16 16",directional:!0,svg:(0,o.jsx)("path",{d:"M12.375 8.06445C12.375 7.83203 12.2861 7.63379 12.1084 7.45605L6.77637 2.24023C6.62598 2.08984 6.44141 2.01465 6.22266 2.01465C5.77832 2.01465 5.42285 2.35645 5.42285 2.80078C5.42285 3.01953 5.51172 3.21777 5.66211 3.375L10.4746 8.06445L5.66211 12.7539C5.51855 12.9043 5.42285 13.1025 5.42285 13.3213C5.42285 13.7725 5.77832 14.1143 6.22266 14.1143C6.44141 14.1143 6.62598 14.0391 6.77637 13.8887L12.1084 8.67285C12.293 8.49512 12.375 8.29688 12.375 8.06445Z"})})},747671:(e,t,n)=>{n.d(t,{Q:()=>o,a:()=>i});let o=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});class i extends(()=>n(757695))().Store{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}}}}]);