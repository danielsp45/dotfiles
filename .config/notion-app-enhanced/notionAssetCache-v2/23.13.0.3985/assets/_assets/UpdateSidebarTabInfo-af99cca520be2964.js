"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[21377],{9768:(e,t,o)=>{o.d(t,{Br:()=>k,Jh:()=>C,Lb:()=>S,YE:()=>b,cu:()=>A});o(16280),o(898992),o(672577);var n=o.n(o(32485)),i=o(296540),r=()=>o(484714),l=()=>o(56366),a=()=>o(778781),s=()=>o(534177),d=()=>o(623186),c=()=>o(780054),u=()=>o(600871),p=()=>o(478726),m=()=>o(963589),g=()=>o(548821),v=()=>o(517223),f=()=>o(823082),y=()=>o(241181),h=()=>o(817942),_=o(474848);const S=12,b=12,w=10,x=10,B=8;function P(e){let{collectionSchema:t,module:o}=e;return!(!t||"normalizedTitleWithIcon"!==o.type)&&(0,v().LD)({collectionSchema:t,module:o}).length>0}function C(e){let{layoutModule:t,area:o,context:r,collectionSchema:u,collectionStore:v,showDetailsPanelToggleButtonBelowTitle:C,modules:k,postContext:A}=e;const M=k.findIndex((e=>e.id===t.id)),I=null!=k&&k.length&&-1!==M?k[M+1]:void 0,T=(0,y().p)({collectionStore:v,layoutModule:I}),L=(0,d().aN)(v),V=(0,l().K8)((()=>Boolean(null==v?void 0:v.isPageTreeCollection())),[v]),D=(0,m().X)("content_reskin_v2"),[K,E]=(0,i.useMemo)((()=>{const e=P({collectionSchema:u,module:t});let n=!1;const i={};if("page_details"===o||"person_profile_page_details"===o)i.marginBottom=w,i.paddingBottom=x;else if("page_main"===o||"person_profile_page_main"===o)i.marginBottom=b,i.paddingBottom=S;else if("views_main_tab_modules"===o)i.marginBottom=b,i.paddingBottom=S;else{if("form_layout_schema"===o||"form_conditional_modules"===o)throw new Error("Not implemented for forms");(0,s().HB)(o)}const l="editor"===(null==I?void 0:I.type);(0,p().Mi)(A)?"editor"===t.type&&A!==g().Rr.DraftPostInFullPageComposer?n=!0:"normalizedTitleWithIcon"===t.type&&(i.marginBottom=void 0,i.paddingBottom=B):l&&(n=!0,"normalizedTitleWithIcon"!==t.type||e||(n=!1,i.marginBottom=void 0,i.paddingBottom=void 0),"views_main_tab_modules"===o&&(n=!1,i.marginBottom=void 0,i.paddingBottom=void 0)),T&&i.marginBottom&&(i.marginBottom=Math.max(i.marginBottom-4,0)),"page_main"!==o&&"page_details"!==o&&"views_main_tab_modules"!==o||(D||"discussions"===t.type?i.marginLeft=0:"normalizedTitleWithIcon"===t.type?i.marginLeft=-4:(0,a().gx)(t)||"properties"===t.type||"relationsGroup"===t.type?i.marginLeft=-6:"editor"===t.type&&(i.marginLeft=-2));const d="views"===(null==I?void 0:I.type)||"editor"===(null==I?void 0:I.type);return"page_main"!==o&&"page_details"!==o||!i.paddingBottom||d||("property_text"===t.type||"property_relation"===t.type&&L?i.paddingBottom=Math.max(i.paddingBottom-4,0):"properties"===t.type&&(V&&!c().A.isMobile||(i.paddingBottom=Math.max(i.paddingBottom-4,0))),"viewsMain"===(null==I?void 0:I.type)&&(i.paddingBottom=Math.max(i.paddingBottom-12,0))),"normalizedTitleWithIcon"===t.type&&(e?c().A.isMobile&&"properties"===(null==I?void 0:I.type)&&!T&&(i.paddingBottom=void 0,i.marginBottom=4):(C?"discussions"===(null==I?void 0:I.type)&&(i.marginBottom=void 0):"properties"===(null==I?void 0:I.type)?(i.paddingBottom=void 0,i.marginBottom=8):"discussions"===(null==I?void 0:I.type)&&(i.paddingBottom=S),c().A.isMobile&&"discussions"===(null==I?void 0:I.type)&&(i.marginBottom=void 0))),"bottomControls"===t.type&&(i.paddingBottom=void 0,i.marginBottom=void 0),"discussions"===t.type&&l&&(i.paddingBottom=void 0),"inlinePageSections"!==(null==I?void 0:I.type)&&"expandedBacklinks"!==(null==I?void 0:I.type)&&"bottomControls"!==(null==I?void 0:I.type)||(i.marginBottom=8),"editor"!==t.type||(0,p().Mi)(A)||r===g().Rr.Presentation||(i.marginTop=8),("views"===t.type||"editor"===t.type&&!(0,p().Mi)(A))&&(i.paddingBottom=void 0,i.marginBottom=void 0),"viewsMain"===t.type&&(i.paddingBottom=void 0),r===g().Rr.DraftPostInInlineComposer&&(i.marginBottom=4,i.paddingBottom=0),[n,i]}),[u,t,o,null==I?void 0:I.type,T,V,r,L,C,A,D]);return(0,i.useMemo)((()=>function(e){return(0,_.jsx)(h().vV,{className:n()({"layout-content-with-divider":K}),style:E,testId:(0,f().H)(t),children:e})}),[t,K,E])}function k(e){let{layoutModule:t,area:o,collectionSchema:n,collectionStore:i,showDetailsPanelToggleButtonBelowTitle:a,pageMainModules:s}=e;const d=(0,r().Y0)(),p=(0,l().K8)((()=>{if(!i)return!1;return!!s.find((e=>"normalizedTitleWithIcon"===e.type))&&a}),[i,s,a]),m=(0,u().D1)(d);if(!i)return!1;if("properties"!==t.type&&"discussions"!==t.type&&"relationsGroup"!==t.type)return!1;if("page_main"!==o)return!0;const g=s.findIndex((e=>e.id===t.id));if(0===g||s.length<=1)return!1;if("discussions"===t.type&&m)return!1;const v=s[g-1];if("normalizedTitleWithIcon"!==(null==v?void 0:v.type))return!0;if("relationsGroup"===t.type&&p)return!0;if("properties"===t.type&&p&&!c().A.isMobile)return!0;const f=P({collectionSchema:n,module:v});return("properties"!==t.type||!c().A.isMobile||!f)&&f}function A(e){let{collectionStore:t,modulesByArea:o}=e;return!((t.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0})||[]).length>0)&&0===(0,v().Ul)({collectionStore:t,modulesByArea:o}).length}},59400:(e,t,o)=>{o.d(t,{nR:()=>c,m$:()=>a,m4:()=>s,Dy:()=>d,FZ:()=>p});o(296540);var n=()=>o(645873),i=o(474848);function r(e){const{shouldShowSpinner:t,collectionSettingsProps:n}=e;return(0,i.jsx)(o(735695).Ay,{collectionSettingsStore:n.collectionSettingsStore,fullHeight:n.fullHeight,hideDesktopHeader:n.hideDesktopHeader,children:t&&(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",overflow:"hidden",paddingBottom:20},children:(0,i.jsx)(o(331542).A,{})})})}const l=new(n().O2)("collectionSettings",(()=>Promise.all([o.e(75134),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(75078),o.e(25497),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(30291),o.e(19930),o.e(58102),o.e(26483),o.e(6463),o.e(40925),o.e(282),o.e(61349),o.e(62573),o.e(1440),o.e(63996),o.e(66559),o.e(35986),o.e(92924),o.e(64819),o.e(97339),o.e(55717),o.e(63797),o.e(21367),o.e(22686),o.e(99108)]).then(o.bind(o,409198)))),a=(0,n()._h)(l,(e=>e.CollectionSettings),{renderLoading:(e,t)=>(0,i.jsx)(r,{shouldShowSpinner:e,collectionSettingsProps:t})}),s=(0,n()._h)(l,(e=>e.CollectionSettingsButtonOptions)),d=(0,n()._h)(l,(e=>e.CollectionSettingsPropertyTypeMenuItem)),c=(0,n()._h)(l,(e=>e.CollectionEditButtonAutomationOption)),u=new(n().O2)("TableHeaderPropertyCreationMenu",(()=>Promise.all([o.e(75134),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(75078),o.e(25497),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(61349),o.e(35986),o.e(43935)]).then(o.bind(o,908800)))),p=(0,n()._h)(u,(e=>e.TableHeaderPropertyCreationMenu))},152713:(e,t,o)=>{o.d(t,{f:()=>i});var n=()=>o(56366);function i(e){return{modules:(0,n().K8)((()=>{if(!e)return;const t=e.getAssociatedCollectionStore(),o=null==t?void 0:t.getLayoutStore();return null==o?void 0:o.getModules().page_details}),[e])}}},458366:(e,t,o)=>{o.d(t,{B2:()=>M,F1:()=>B,Kc:()=>w,NN:()=>A,UY:()=>b,br:()=>k,lA:()=>P,lh:()=>x,pi:()=>h,w_:()=>S,zP:()=>_});o(898992),o(737550);var n=()=>o(584262),i=()=>o(443239),r=()=>o(970013),l=()=>o(713998),a=()=>o(882262),s=()=>o(415566),d=()=>o(177256),c=()=>o(72135),u=()=>o(919709),p=()=>o(496603),m=()=>o(534177),g=()=>o(939768),v=()=>o(720665),f=()=>o(492414),y=()=>o(972435);function h(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function _(e){switch(e){case"table":return"table";case"board":return"board";case"list":return"list";case"gallery":return"gallery";case"feed":return"feed";case"relation":case"relation_section":return"relation_section";case"timeline":return"timeline";case"calendar":return"calendar";case"page":return"page_properties";case"compact_page":return"compact_page";case"mini":return"mini_peek";case"form_editor":case"form_viewer":case"property_module":return"property_module";default:(0,m().HB)(e)}}function S(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function b(e){const{store:t,property:o,propertySchema:i}=e,r=null==i?void 0:i.type;if("title"===r)return(0,f().Ay)({store:t,fullyQualified:!1,pageVisitSource:n().y8.LinkInPage});{const e=t.getPropertyValue(o);return l().UY(r,e)}}function w(e){let t=(0,u().k4p)(e);if(!t||""===t.trim()||t.trim().includes(" "))return{domain:void 0,restOfUrl:void 0};t=t.trim();let o=g().qg(t),n=o.host;if(o.protocol&&n||(o=g().qg(`http://${t}`),n=o.host),!n)return{domain:void 0,restOfUrl:void 0};n&&(n=n.replace(/^www./i,""));const i=t.toLowerCase().indexOf(n.toLowerCase());if(-1===i)return{domain:void 0,restOfUrl:void 0};n=t.slice(i,i+n.length);return{domain:n,restOfUrl:t.slice(i+n.length)}}function x(e){const{numberValue:t,numberFormat:o,numberShowAs:n}=e;if(!(p().yr(t)||v().pN(t)||"bar"!==(null==n?void 0:n.type)&&"ring"!==(null==n?void 0:n.type))){const e=y().A.getIntl();return"percent"===o?c().ZV(t,"percent",e):`${t} / ${n.maxValue}`}}function B(e){const{property:t,collectionStore:o}=e,n=o.isSyncedCollection();return Boolean(n)&&(0,i().u)(t)}function P(e,t){switch(e){case"side_peek":return{icon:d().A,tooltip:y().A.formatMessage(C.openInSidePeekTooltip),caption:t?"":y().A.formatMessage(C.openAsPageTitle)};case"center_peek":return{icon:s().q,tooltip:y().A.formatMessage(C.openInCenterPeekTooltip),caption:t?"":y().A.formatMessage(C.openAsPageTitle)};case"full_page":return{icon:a().m,tooltip:y().A.formatMessage(C.openAsPageTooltip),caption:t?"":y().A.formatMessage(C.openAsPageTitle)};default:(0,m().HB)(e)}}const C=(0,o(959013).YK)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function k(e){const{store:t,additionalStores:o,collectionContextStore:n}=e,i=t.getAssociatedCollectionStore();return!("collectionTypedView"!==(null==n?void 0:n.contextType)||!i)&&o.some((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==i.id}))}function A(e){return"form_editor"===e||"form_viewer"===e}function M(e){return Boolean(e&&!r().dA.includes(e.type))}},483832:(e,t,o)=>{o.d(t,{v:()=>P});var n=o(296540),i=()=>o(484714),r=()=>o(56366),l=()=>o(778781),a=()=>o(33791),s=()=>o(774733),d=()=>o(239391),c=()=>o(155004),u=()=>o(21140),p=()=>o(68350),m=()=>o(199896),g=()=>o(891078),v=()=>o(402838),f=()=>o(205682),y=()=>o(171018),h=()=>o(548821),_=()=>o(77238),S=()=>o(795963),b=()=>o(255824),w=()=>o(671891),x=()=>o(517223),B=o(474848);function P(e){const{store:t,context:o,propertyId:P,disabled:C,wrapper:k,pageModule:A,stackPropertyLabelAndValue:M}=e,I=(0,g().bx)(t,C),T=(0,r().K8)((()=>t.getAssociatedCollectionStore()),[t]),L=(0,r().K8)((()=>null==T?void 0:T.getParentStore()),[T]),V=(0,r().K8)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};const e=t.getAssociatedCollectionStore();return e?{type:"visible",store:t,collectionStore:e,propertyId:P}:{type:"hidden"}}),[P,t]),D=(0,r().K8)((()=>null==T?void 0:T.getSchema()),[T]),K=(0,r().K8)((()=>null==T?void 0:T.getFormat()),[T]),E=(0,r().K8)((()=>{var e;return null===(e=V.collectionStore)||void 0===e?void 0:e.getSchema()[P]}),[V.collectionStore,P]),j=(0,r().K8)((()=>t.isNonEditableState()),[t]),O=(0,n.useMemo)((()=>new(y().YB)),[]),H=n.useRef(null),R=(0,r().K8)((()=>!(!T||!L||"block"!==L.table)&&(0,a().v)({collectionStore:T,collectionViewBlockStore:L,checkNavigableAncestorLocked:!1})),[T,L]),F=o===h().Rr.PeekView,z=(0,l().gx)(A)?A:void 0,{isPropertyInPageDetails:N}=(0,x()._1)({store:t,propertyId:P}),{isMobile:W}=(0,i().v3)().device,$=(0,v().s)(H,50),G=(0,w().l)(t),Y=(0,r().K8)((()=>{var e;return"hide"===(null==G||null===(e=G.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[G]),U=(0,b().a)();if(!E)return null;if("hidden"===V.type)return null;if(!T||!D||!K)return null;const q=!U&&"relation"!==E.type,Q=!U,J=(0,S().Ge)({isMobile:W,stackPropertyLabelAndValue:M,isPropertyInPageDetails:N}),Z=(0,B.jsx)(s().L_,{store:t,propertyId:P,style:N||W?{flexShrink:0}:{position:"absolute",left:null!=$&&$.width?$.width+4:void 0,top:0}}),X=(0,B.jsxs)(B.Fragment,{children:[q&&(0,B.jsxs)(u().Ye,{alignItems:"center",justifyContent:N?void 0:"space-between",style:J?{width:J,flexShrink:0}:void 0,children:[(0,B.jsx)(p().I,{schema:D,format:K,hideIcon:Y,hideDragHandle:!0,property:P,blockStore:t,collectionStore:T,pagePropertiesStore:O,disabled:C,locked:j,canConfigureCollection:R,isInPeekRenderer:F,styleVariants:{width:(0,S().aG)({stackPropertyLabelAndValue:M}),height:M?{variant:"small"}:{variant:"medium"},size:"small",fontWeight:"medium"},layoutModule:z,hideDuplicatePropertyOption:!0}),Q?Z:null]}),(0,B.jsx)(m().Ay,{store:t,analyticsName:"page_property",children:(0,B.jsx)(d().q,{store:t,property:P,disabled:!I,locked:j,format:"property_module",tableWrap:!0,blockPropertyValueOverlayStore:F?_().A:f().A,collectionStore:V.collectionStore,isInPeekRenderer:F,propertyModule:z},P)})]});return k((0,B.jsx)(c().s,{allowSelectionWithin:!0,style:{position:"relative",width:"100%"},children:M?(0,B.jsx)(u().wt,{ref:H,children:X}):(0,B.jsx)(u().Ye,{ref:H,style:{alignItems:"flex-start"},children:X})}))}},577814:(e,t,o)=>{o.d(t,{A:()=>l});o(898992),o(354520);var n=()=>o(449195),i=()=>o(478726),r=()=>o(299545);function l(e){var t;const{store:o,pageViewBlockStore:l,environment:a}=e,s=r().O3(o,{recursivelyLoadAllDiscussions:!1}).sort(((e,t)=>t.getReactions().length-e.getReactions().length)),d=s.length>0,c=0===s.length,u=0===s.filter((e=>e.getComments().length>0)).length,p="PageDetailsStore"in a&&a.PageDetailsStore.getToggleState({environment:a,type:"discussion",id:o.id}),m={type:"hidden"},g=o.getAssociatedCollectionStore()??o,v="section_hide"===(0,n().z5)(null===(t=g.getFormat())||void 0===t?void 0:t.page_section_visibility);if(!(null==l?void 0:l.state.forceDiscussionOpen)&&(!o.isInsideCollection()||!c)&&(c||d&&(!1===p||void 0===p&&v)))return m;if(v)return m;const f=o.pathIsDead(),y=a.currentUser.isLoggedIn();if(c&&f)return m;const h=y&&o.canComment()&&u&&!(0,i().sV)(o)&&(!(0,i().fc)(o)||(0,i().Cg)(o));return!h&&c?m:{type:"visible",showDiscussionInput:h,unresolvedDiscussionStores:s}}},722143:(e,t,o)=>{o.r(t),o.d(t,{UpdateSidebarTabInfo:()=>V});var n=o(296540),i=()=>o(484714),r=()=>o(56366),l=()=>o(13679),a=()=>o(175116),s=()=>o(414834),d=()=>o(152713),c=(o(581454),()=>o(908006)),u=()=>o(401497),p=()=>o(721908),m=()=>o(120997),g=()=>o(778781),v=()=>o(534177),f=()=>o(112873),y=()=>o(476380),h=()=>o(300857),_=()=>o(2143),S=()=>o(38337),b=()=>o(756279),w=()=>o(735372),x=()=>o(864994),B=()=>o(933951),P=()=>o(455994),C=()=>o(918487),k=()=>o(793282),A=()=>o(483832),M=()=>o(9768),I=o(474848);function T(e){const{modules:t,store:o,context:l,disabled:a,shownAs:s,collectionStore:d}=e,m=n.useRef(null),g=(0,i().v3)(),x=(0,r().K8)((()=>{if(!w().qu.state)return null;const e=w().wb.state;return"page_property_value"===(null==e?void 0:e.type)||"page_property_name"===(null==e?void 0:e.type)?e:null}),[]),B=(0,r().K8)((()=>null==d?void 0:d.getSchema()),[d]);n.useEffect((()=>{c().default.afterNextFlush().then((()=>{m.current&&y().Hc(m.current,g)}))}),[x,g]);const C=(0,r().K8)((()=>"page"===g.RouterStore.state.route.name?g.RouterStore.state.route.discussionId:void 0),[g.RouterStore]),k=(0,r().K8)((()=>P().A.state.propertyIdDiscussionToOpenOnPanelOpen),[]);n.useEffect((()=>{k&&C&&(P().A.update((e=>({...e,propertyIdDiscussionToOpenOnPanelOpen:void 0}))),c().default.afterNextFlush().then((()=>{(0,h().b)({discussionId:C,blockId:o.id,environment:g,animate:!1})&&f().B4({analyticsFrom:"notification",blockStore:o,environment:g,recursivelyLoadAllDiscussions:!1,shouldFocusDiscussion:!0,property_id:k,discussionIds:[C]})})))}),[g,C,k,o]);const A=(0,u().IS)((e=>{let t={};return"popup"===s?t={height:"70vh",maxHeight:"70vh",background:e.popoverBackground,borderRadius:4,boxShadow:e.shadowMD}:"sidebar"===s?t={background:e.contentBackground}:"static_sidebar"===s?t={background:e.peekModalBackground}:(0,v().HB)(s),{container:{position:"relative",minHeight:0,display:"flex",flexDirection:"column",pointerEvents:"auto",height:"100%"},scroller:{position:"relative",display:"flex",flexDirection:"column",pointerEvents:"auto",overflow:"auto",padding:"16px 16px 16px 20px",minHeight:"100%",...t}}}),[s]),M="static_sidebar"===s?"peek":"mainPage",T=(0,p().d)((e=>{const t=e.target;t instanceof Element&&t.closest(`.${S().e6W}`)?P().A.setIsMouseHoveringPanel({panelLocation:M,isMouseHoveringPanel:!0}):P().A.setIsMouseHoveringPanel({panelLocation:M,isMouseHoveringPanel:!1})}),100);return n.useEffect((()=>{if("peek"===M)return window.addEventListener("mousemove",T),()=>window.removeEventListener("mousemove",T)}),[T,M]),(0,I.jsx)("div",{className:S().e6W,style:A.container,ref:m,children:(0,I.jsx)(_().H,{type:b().A.Y,style:A.scroller,children:t.map((e=>(0,I.jsx)(L,{module:e,store:o,context:l,disabled:a,collectionStore:d,collectionSchema:B},e.id)))})})}function L(e){let{module:t,store:o,context:l,disabled:a,collectionStore:s,collectionSchema:d}=e;const c=(0,i().v3)(),{isMobile:u}=(0,i().Y0)(),p=(0,r().K8)((()=>!!s&&(0,C().v)({collectionStore:s,module:t,isMobile:u})),[s,u,t]),f="page_details",y=(0,B().sS)({pageStore:o,pageViewBlockStore:void 0,collectionStore:s,collectionSchema:d})[f],h=(0,M().Jh)({layoutModule:t,area:f,collectionSchema:d,collectionStore:s,showDetailsPanelToggleButtonBelowTitle:p,modules:y}),_=(0,r().K8)((()=>{if("properties"!==t.type)return!0;return!(0,x().g)({environment:c,layoutArea:"page_details",moduleType:t.type,pageViewBlockContext:l})}),[c,t.type,l]);return(0,m().p)(t,"page_details")?(0,g().gx)(t)?(0,I.jsx)(A().v,{context:l,disabled:a,propertyId:t.propertyId,store:o,pageModule:t,wrapper:h,stackPropertyLabelAndValue:_},`${t.id}-${o.id}`):(0,g().i_)(t)?(0,I.jsx)(n.Fragment,{children:(0,I.jsx)(k().h,{context:l,disabled:a,store:o,wrapper:h,layoutModule:t,customization:{neverShowPropertiesElsewhereInLayout:!0,stackPropertyLabelAndValue:_,disableContainerPadding:!0,disableLastRowBottomPadding:_},showDefaultTitle:!0})},`${t.id}-${o.id}`):"deleted_property"===t.type?null:void(0,v().HB)(t):(console.warn("Invalid module type in sidebar:",t.type),null)}function V(e){const{modules:t,store:o,context:c,disabled:u,shownAs:p}=e,m=(0,i().v3)(),{modules:g}=(0,d().f)(o),v=t??g,f=(0,n.useMemo)((()=>new(s().A)(m)),[m]),y=(0,r().K8)((()=>o.getAssociatedCollectionStore()),[o]),h=(0,r().K8)((()=>null==y?void 0:y.getParentStore()),[y]);if((0,n.useEffect)((()=>{y&&h&&"block"===h.table&&h.isCollectionView()&&f.setContext({type:"collectionPage",collectionViewBlockStore:h,collectionStore:y})}),[f,y,h,v]),!v||!f.collectionStore)return null;return(0,I.jsx)(l().A,{store:o,droppable:!0,render:()=>(0,I.jsx)(a().RI,{value:f,children:(0,I.jsx)(T,{modules:v,context:c,disabled:u,store:o,shownAs:p,collectionStore:y})})},o.id)}},823082:(e,t,o)=>{o.d(t,{H:()=>r});var n=()=>o(778781),i=()=>o(534177);function r(e){const t=e.type;return"properties"===t?"module__properties_"+("pinned"===e.variant?"minimal":"expanded"):"normalizedTitleWithIcon"===t||"titleWithIcon"===t?"module__title_with_icon":"cover"===t?"cover__module":"views"===t?"module__views":"editor"===t?"module__editor":"formTitle"===t?"module__formTitle":"viewsMain"===t?"module__views_main":"transcript"===t?"module__transcript":"formSubmit"===t?"module__form_submit":"discussions"===t?"module__discussion":"placeholder"===t?"module__placeholder":"formQuestion"===t?"module__formQuestion":"bottomControls"===t?"module__bottomControls":"relationsGroup"===t?"module__relationsGroup":"deleted_property"===t?"module__deleted_property":"expandedBacklinks"===t?"module__expandedBacklinks":"inlinePageSections"===t?"module__inlinePageSections":"property"===t?`module__property_${e.id}`:"collectionView"===t?"module__collectionView":"collectionViewV2"===t?"module__collectionViewV2":(0,n().CA)(t)?`module__property_${e.id}`:void(0,i().HB)(t)}},882262:(e,t,o)=>{o.d(t,{m:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.23 3.23 13.54 13.53",svg:(0,o(474848).jsx)("path",{d:"M4.485 8.86V5.369l4.073 4.073a.625.625 0 0 0 .884-.884L5.369 4.485h3.49a.625.625 0 1 0 0-1.25h-5a.625.625 0 0 0-.624.625v5a.625.625 0 0 0 1.25 0m10.146 6.655-4.07-4.07a.625.625 0 0 1 .884-.884l4.07 4.07V11.14a.625.625 0 1 1 1.25 0v5c0 .345-.28.625-.625.625h-5a.625.625 0 1 1 0-1.25z"})},i=(0,o(340498).wt)("arrowExpandDiagonal",n)},918487:(e,t,o)=>{o.d(t,{v:()=>i});o(898992),o(354520),o(672577),o(737550);var n=()=>o(517223);function i(e){const{collectionStore:t,module:o,isMobile:i}=e;if("normalizedTitleWithIcon"!==o.type)return!1;const r=t.getSchema(),l=!!r&&(0,n().LD)({collectionSchema:r,module:o}).length>0,a=(0,n().pm)({collectionStore:t}).count>0;return!(!i||!a)||!l&&a}},933951:(e,t,o)=>{o.d(t,{Qf:()=>h,sS:()=>f,ub:()=>y});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577),o(737550);var n=o(296540),i=()=>o(484714),r=()=>o(56366),l=()=>o(455348),a=()=>o(691678),s=()=>o(235692),d=()=>o(778781),c=()=>o(33791),u=()=>o(577814),p=()=>o(478726),m=()=>o(240865),g=()=>o(548821),v=()=>o(9768);function f(e){const{pageStore:t,pageViewBlockStore:o,postContext:l,collectionStore:s,collectionSchema:p}=e,{collectionStore:m,collectionFormat:g,collectionSchema:f,canConfigureCollection:h}=(0,r().K8)((()=>{const e=s||(null==t?void 0:t.getAssociatedCollectionStore()),o=p||(null==e?void 0:e.getSchema()),n=null==e?void 0:e.getFormat(),i=e&&(0,c().v)({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1});return{collectionStore:e,collectionSchema:o,collectionFormat:n,canConfigureCollection:i}}),[t,s,p]),_=(0,i().v3)(),S=(0,r().K8)((()=>(0,u().A)({environment:_,store:t,pageViewBlockStore:o})),[_,t,o]),b=y({collectionFormat:g,collectionSchema:f,layoutStore:(0,r().K8)((()=>null==m?void 0:m.getLayoutStore()),[m]),postContext:l,pageStoreId:null==t?void 0:t.id,pageStore:t}),w=(0,r().K8)((()=>{const e=b.page_main.some((e=>(0,d().i_)(e)))||b.page_details.some((e=>(0,d().i_)(e)));return!(!m||!e)&&(0,v().cu)({modulesByArea:b,collectionStore:m})}),[b,m]),x=(0,n.useMemo)((()=>{const e=new Set;return(!Boolean(m)||!h&&w)&&e.add("properties"),"hidden"===(null==S?void 0:S.type)&&e.add("discussions"),e}),[h,m,null==S?void 0:S.type,w]);return(0,n.useMemo)((()=>0===x.size?b:(0,a().KO)(b,(e=>!x.has(e.type)))),[b,x])}function y(e){const{layoutStore:t,collectionSchema:o,collectionFormat:i,postContext:a,pageStoreId:d,pageStore:c}=e,u=(0,n.useRef)(d),v=(0,n.useRef)(null),f=(0,r().K8)((()=>null==c?void 0:c.getSpaceStore()),[c]),y=(0,m().V)(f)??0;return(0,r().K8)((()=>{var e;if(a===g().Rr.DraftPostInInlineComposer)return s().wC;if(null!=c&&c.isPersonProfile())return _({personProfileStore:c,spaceMemberCount:y});if((0,p().Mi)(a)){const e=(0,l().aG)(o,"created_time"),t=(0,l().aG)(o,"created_by"),n=[];t&&n.push(t),e&&n.push(e);return{...s()._u,page_main:[{...s()._u.page_main[0],propertyIds:n},...s()._u.page_main.slice(1)]}}let n=null==t?void 0:t.getModules();const r=d&&n&&d===u.current&&0===n.page_main.length&&(null===(e=v.current)||void 0===e?void 0:e.page_main.find((e=>"editor"===e.type)));return n&&!r||(n=(0,s().xN)({collectionSchema:o,collectionFormat:i})),u.current=d,v.current=n,n}),[a,c,t,d,y,o,i],{useDeepEqual:!0})}function h(e){const{personProfileStore:t}=e,o=(0,r().K8)((()=>t.getSpaceStore()),[t]),n=(0,m().V)(o)??0;return(0,r().K8)((()=>_({personProfileStore:t,spaceMemberCount:n})),[t,n])}function _(e){const{personProfileStore:t,spaceMemberCount:o}=e,n=t.getAssociatedCollectionStore();if(!n)return(0,s().E1)({spaceMemberCount:o});const i=n.getLayoutStore();if(!i)return(0,s().E1)({spaceMemberCount:o});const r=i.getModules();return!r||0===r.person_profile_page_main.length&&0===r.person_profile_page_details.length?(0,s().E1)({spaceMemberCount:o}):r}},937199:(e,t,o)=>{o.d(t,{LH:()=>r,Op:()=>i,bi:()=>s,sf:()=>a,v$:()=>l});o(16280);var n=o(296540);const i=(0,n.createContext)(null);function r(){const e=(0,n.useContext)(i);if(!e)throw new Error("usePageLayoutEditorContext must be used inside BaseLayoutEditorContext.Provider");return e}function l(){return(0,n.useContext)(i)}i.displayName="BaseLayoutEditorContext";const a=(0,n.createContext)(null);function s(){const e=(0,n.useContext)(a);if(!e)throw new Error("usePageLayoutEditorContext must be used inside PageLayoutEditorContextProvider");return e}a.displayName="PageLayoutEditorContext"}}]);