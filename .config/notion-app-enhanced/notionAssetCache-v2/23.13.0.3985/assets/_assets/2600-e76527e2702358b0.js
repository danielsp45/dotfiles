"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[2600],{8802:(e,t,o)=>{o.d(t,{d:()=>d});o(296540);var n=()=>o(484714),r=()=>o(56366),i=()=>o(764880),l=()=>o(53528),a=()=>o(959013),s=()=>o(125565),c=o(474848);function d(e){const{getRecordModel:t,actorPointer:o,lastVerifiedDate:d}=e,u=(0,n().Y0)(),p=(0,a().tz)(),m=(0,r().K8)((()=>(0,i().lR)(p,(0,i().xC)({pointer:o,getRecordModel:t}))),[t,p,o]);return(0,c.jsxs)("div",{style:{padding:"8px 14px"},children:[(0,c.jsx)(s().A,{isSmall:!0,isSecondaryColor:!0,isMobile:u.isMobile,isMultiline:!0,style:{marginBottom:4},children:(0,c.jsx)(a().sA,{defaultMessage:"Last verified by {user}",id:"VerificationMetadata.lastVerified",values:{user:m}})}),(0,c.jsx)(s().A,{isSmall:!0,isSecondaryColor:!0,isMobile:u.isMobile,children:(0,l().OH)({dateTime:d,intl:p})})]})}},51493:(e,t,o)=>{o.d(t,{q:()=>i,y:()=>l});var n=()=>o(534177),r=()=>o(2220);function i(e){const{environment:t,blockStore:o,update:i}=e,l=function(e){switch(e){case"add":return"page_verification_enabled";case"update":return"page_verification_edited";case"remove":return"page_verification_disabled";default:(0,n().HB)(e)}}(i.metadata.action),a=o.id,s=o.getAssociatedCollectionId(),c=o.getSpaceId(),d=i.metadata.entrypoint;let u=s?"db":"non_db";if(s){const e=o.getAssociatedCollectionStore();null!=e&&e.isPageTreeCollection()&&(u="wiki")}"page_verification_enabled"===l&&(0,r().u)({environment:t,event:{eventName:l,eventProperties:{entrypoint:d,page_type:u,page_id:a,collection_id:s,space_id:c,expiration:i.metadata.expiration??void 0,expiration_date:i.metadata.expiration_date??void 0}}}),"page_verification_edited"===l&&(0,r().u)({environment:t,event:{eventName:l,eventProperties:{entrypoint:d,page_type:u,page_id:a,collection_id:s,space_id:c,expiration:i.metadata.expiration??void 0,expiration_date:i.metadata.expiration_date??void 0}}}),"page_verification_disabled"===l&&(0,r().u)({environment:t,event:{eventName:l,eventProperties:{entrypoint:d,page_type:u,page_id:a,collection_id:s,space_id:c}}})}function l(e){const{environment:t,blockStore:o,entrypoint:n,action:i}=e,l=o.id,a=o.getAssociatedCollectionId(),s=o.getSpaceId();let c=a?"db":"non_db";if(a){const e=o.getAssociatedCollectionStore();null!=e&&e.isPageTreeCollection()&&(c="wiki")}(0,r().u)({environment:t,event:{eventName:"page_verification_owner_edited",eventProperties:{entrypoint:n,page_type:c,action:i,page_id:l,collection_id:a,space_id:s}}})}},75858:(e,t,o)=>{o.d(t,{Li:()=>I,iD:()=>w,yA:()=>F,V6:()=>x,_n:()=>A,Yk:()=>T,rD:()=>j,w_:()=>V,xX:()=>M,wh:()=>z,dr:()=>N,Gx:()=>U,q4:()=>E,MX:()=>L,fs:()=>D,VT:()=>k,fA:()=>P,LX:()=>B,l:()=>R,L:()=>_,kb:()=>C,Sh:()=>O,cm:()=>S});var n=o(296540),r=()=>o(484714),i=()=>o(56366),l=()=>o(959013),a=()=>o(2220),s=()=>o(928600),c=()=>o(939740),d=()=>o(897119),u=()=>o(722872),p=()=>o(108944),m=()=>o(217429),f=()=>o(457717),y=()=>o(864040),h=o(474848);function g(e){const{store:t}=e,o=(0,r().Y0)(),l=(0,i().O$)(f().F),a=(0,n.useCallback)((()=>{f().F.setState({open:!1})}),[]);return o.isMobile?(0,h.jsx)(d().Ay,{popupType:d().nl.BottomSheet,bottomSheetInitialState:"half",trapFocus:!0,open:l.open,render:()=>(0,h.jsx)(v,{store:t,onClose:a}),onDismiss:a}):null}function v(e){const{store:t,onClose:o}=e,n=(0,r().v3)(),d=(0,i().K8)((()=>{const e=p().fU(t);return e.reverse(),e}),[t]),f={menuType:u().gu.Modal,title:(0,h.jsx)(l().sA,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"})};return(0,h.jsx)(s().A,{...f,children:(0,h.jsx)(c().Ay,{type:c().Oh.Vertical,onAccept:o,initialFocus:void 0,sections:(0,y().A)(n,d,(e=>{(0,a().u)({environment:n,event:{eventName:"topbar_breadcrumb_page_click",eventProperties:{page_id:e.id}}}),m().default.logEvent("topbar_breadcrumb_page_click",void 0,{page_id:e.id})}))})})}var b=()=>o(645873);const S=new(b().O2)("menus",(async()=>{const[{default:e},{TopbarPageAnalyticsOptOutMenu:t},{default:n},{default:r},{default:i},{default:l},{default:a},{default:s},{default:c},{default:d},{default:u},{SidebarTeamModal:p},{SidebarCreateTeamModal:m},{CreateTeamFromPageConfirmModal:f},{CollectionTypedDatabaseMigrationModal:y},{default:h},{default:v},{default:b},{MobilePageBacklinksMenuRenderer:S},{MobileShareMenuRenderer:x},{MobilePageUpdatesMenuRenderer:C},{MobileCommentsModalRenderer:k}]=await Promise.all([Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,74355)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,687110)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,467935)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,742784)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,381495)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,952305)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,70463)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,946576)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,996594)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,554778)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,339806)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,353289)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,83842)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,135546)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,438988)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,275193)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,756710)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,877263)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,220172)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,417242)),Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,274072)),Promise.all([o.e(75134),o.e(49889),o.e(97727),o.e(48632),o.e(21194),o.e(79928),o.e(52811),o.e(4412),o.e(75840),o.e(18331)]).then(o.bind(o,503307))]);return{CustomizePageMenuRenderer:e,TopbarPageAnalyticsOptOutMenu:t,ImportModal:n,ExportModal:r,PageTemplateModal:i,GoogleAuthPromptModal:l,StudentNotEligibleModal:a,CookieModal:s,ForkPagePopup:c,DatePropertyMenu:d,ReportPageModal:u,SidebarCreateTeamModal:m,SidebarTeamModal:p,CreateTeamFromPageConfirmModal:f,CollectionTypedDatabaseMigrationModal:y,OpenInDesktopAppPopup:h,BlockMenu:v,ImportIntoNewPageModal:b,MobilePageBacklinksMenuRenderer:S,MobileShareMenuRenderer:x,MobilePageUpdatesMenuRenderer:C,MobileCommentsModalRenderer:k,MobileBreadcrumbMenuRenderer:g}})),x=(0,b()._h)(S,(e=>e.CustomizePageMenuRenderer)),C=(0,b()._h)(S,(e=>e.TopbarPageAnalyticsOptOutMenu)),k=(0,b()._h)(S,(e=>e.PageTemplateModal)),M=(0,b()._h)(S,(e=>e.ImportModal)),A=(0,b()._h)(S,(e=>e.ExportModal)),P=(0,b()._h)(S,(e=>e.ReportPageModal)),j=(0,b()._h)(S,(e=>e.GoogleAuthPromptModal)),_=(0,b()._h)(S,(e=>e.StudentNotEligibleModal)),w=(0,b()._h)(S,(e=>e.CookieModal)),I=(0,b()._h)(S,(e=>e.BlockMenu)),T=(0,b()._h)(S,(e=>e.ForkPagePopup)),O=(0,b()._h)(S,(e=>e.CollectionTypedDatabaseMigrationModal)),B=(0,b()._h)(S,(e=>e.SidebarCreateTeamModal)),R=(0,b()._h)(S,(e=>e.SidebarTeamModal)),F=(0,b()._h)(S,(e=>e.CreateTeamFromPageConfirmModal)),D=(0,b()._h)(S,(e=>e.OpenInDesktopAppPopup)),V=(0,b()._h)(S,(e=>e.ImportIntoNewPageModal)),U=(0,b()._h)(S,(e=>e.MobilePageBacklinksMenuRenderer)),L=(0,b()._h)(S,(e=>e.MobileShareMenuRenderer)),E=(0,b()._h)(S,(e=>e.MobilePageUpdatesMenuRenderer)),N=(0,b()._h)(S,(e=>e.MobileCommentsModalRenderer)),z=(0,b()._h)(S,(e=>e.MobileBreadcrumbMenuRenderer))},206837:(e,t,o)=>{o.d(t,{o:()=>p});o(296540);var n=()=>o(484714),r=()=>o(401497),i=()=>o(149375),l=()=>o(959013),a=()=>o(284371),s=()=>o(115512),c=()=>o(398208),d=()=>o(285790),u=o(474848);function p(e){const{label:t,onClickBackButton:o,onClose:p,width:m,showBottomBorder:f}=e,y=(0,n().v3)(),h=(0,l().tz)(),g=(0,r().IS)((e=>({container:{display:"flex",alignItems:"center",gap:4,height:40,width:m??320,paddingLeft:8,paddingRight:8,borderBottom:f?`1px solid ${e.regularDividerColor}`:void 0},backButton:{width:24,height:24},closeButton:{position:"absolute",right:0,marginRight:8,borderRadius:"100%"},menuTitle:{flexGrow:1,fontWeight:a().Wy.semibold,fontSize:(0,s().ny)(y,"UIRegular")}})),[y,f,m]);return(0,u.jsxs)("div",{style:g.container,children:[(0,u.jsx)(d().A,{icon:i().v,ariaLabel:h.formatMessage({id:"verificationMenuHeader.backButton.ariaLabel",defaultMessage:"Back"}),onClick:()=>o(),style:g.backButton}),(0,u.jsx)("div",{style:g.menuTitle,children:t}),(0,u.jsx)(c().A,{onClose:()=>p(),style:g.closeButton})]})}},213799:(e,t,o)=>{o.d(t,{A:()=>j});o(581454);var n=o(296540),r=()=>o(17022),i=()=>o(484714),l=()=>o(56366),a=()=>o(401497),s=()=>o(919709),c=()=>o(959013),d=()=>o(381349),u=()=>o(284371),p=()=>o(21869),m=()=>o(906590),f=()=>o(482287),y=()=>o(722872),h=()=>o(77272),g=()=>o(24157),v=()=>o(491073),b=()=>o(406699),S=()=>o(928600),x=()=>o(939740),C=()=>o(480095),k=()=>o(89924),M=o(474848);const A=n.Fragment;function P(e){let{parent:t,shouldShowUpdatedColorPicker:o,textSelectionColor:s,backgroundSelectionColor:u}=e;const g=(0,i().v3)(),{isMobile:b}=g.device,[A,P]=(0,n.useState)((()=>r().e.withListenerIgnored((()=>h().A.state.recentlyUsedColors)))),j=(0,n.useCallback)((e=>{m().Q(e,!o),f().po({environment:g,annotation:["h",h().A.getMostRecentlyUsedColor()]}),(0,p().s)(g,{action:"h",color:h().A.getMostRecentlyUsedColor()})}),[g,o]),_=(0,n.useCallback)(((e,t,n,r)=>({key:t||e,action:()=>{j(e),b&&n.close()},render:n=>(0,M.jsx)(v().Ay,{...n,color:e,overrideDisplayName:t,selected:r,shouldShowUpdatedColorPicker:o})})),[j,o,b]);let w;w=b?{menuType:y().gu.Modal,title:(0,M.jsx)(c().sA,{defaultMessage:"Text color",id:"highlightSelectionButton.mobileTextColor.label"}),right:(0,M.jsx)(C().CancelMenuText,{}),onClickRight:()=>{t.close()}}:o?{menuType:y().gu.Popup,width:190}:{menuType:y().gu.Popup,width:220};const I=A.map((e=>_(e,void 0,t,!1))),T=(0,l().K8)((()=>h().A.getMostRecentlyUsedColor()),[]),O=d().N.map((e=>_(e,void 0,t,s||u?e===s:"default"===e))),B=d().AQ.map((e=>_(e,void 0,t,e===u))),R=(0,a().IS)((e=>({blockColorMenuItemContainer:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:4,paddingTop:0,paddingBottom:0,paddingLeft:8,paddingRight:8},sectionMenuItemOverride:{display:"block"}})),[]);return(0,M.jsx)(S().A,{...w,children:(0,M.jsx)(x().Ay,{type:x().Oh.Vertical,sections:[{key:0,items:o?I:[{key:0,action:()=>{j(T),b&&t.close()},render:e=>(0,M.jsx)(v().Ay,{...e,color:T,shortcuts:["toggleHighlight"]})}],render:e=>(0,M.jsx)(k().A,{...e,title:(0,M.jsx)(c().sA,{defaultMessage:"Recently used",id:"highlightSelectionButton.lastUsedSection.label"}),desktopStyle:R.sectionMenuItemOverride,children:o?(0,M.jsx)("div",{style:R.blockColorMenuItemContainer,children:e.children}):e.children})},{key:1,items:O,render:e=>(0,M.jsx)(k().A,{...e,title:(0,M.jsx)(c().sA,{defaultMessage:"Text color",id:"highlightSelectionButton.colorSection.label"}),desktopStyle:R.sectionMenuItemOverride,children:o?(0,M.jsx)("div",{style:R.blockColorMenuItemContainer,children:e.children}):e.children})},{key:2,items:B,render:e=>(0,M.jsx)(k().A,{...e,title:(0,M.jsx)(c().sA,{defaultMessage:"Background color",id:"highlightSelectionButton.backgroundSection.label"}),desktopStyle:R.sectionMenuItemOverride,children:o?(0,M.jsx)("div",{style:{...R.blockColorMenuItemContainer,paddingBottom:8},children:e.children}):e.children})}],initialFocus:void 0})})}const j=function(e){const{disabled:t,style:r,blockStore:m}=e,f=(0,i().v3)(),y=(0,a().DP)(),h=(0,n.useCallback)((e=>{(0,p().s)(f,{action:"h"})}),[f]),S=(0,n.useCallback)((()=>{g().default.emit()}),[]),x=(0,o(963589).X)("updated_color_picker")&&!f.device.isMobile,{textSelectionColor:C,backgroundSelectionColor:k}=(0,l().K8)((()=>{if("editing"!==g().default.state.mode)return{textSelectionColor:void 0,backgroundSelectionColor:void 0};const e=(0,o(792002).x7)(["hf","hb"],g().default.state.multiSelection,g().default.state.forceExtendAnnotations),t=e.hf,n=e.hb;let r="default",i="default_background";if(t&&s().YuY(t))r=s().uIc(t);else if(m){const{block_color:e}=m.getFormat();e&&(0,o(534177).Xk)(d().N,e)&&(r=e)}return n&&s().YuY(n)&&(i=s().uIc(n)),{textSelectionColor:r,backgroundSelectionColor:i}}),[m]),j=(0,a().IS)((e=>{const t=(0,d().D$)(C??"default",e),o=(0,d().D$)(k??"default_background",e),n="default"!==C||void 0===o.background?t:o,r=(0,v().Nc)(k??"default_background",!1,e);return{colorIcon:{display:"inline-flex",alignItems:"center",justifyContent:"center",height:18,textAlign:"center",fontSize:15,borderRadius:2,...!f.device.isMobile&&{width:18,fontWeight:u().Wy.medium,marginBottom:2},...o,...t},colorIconCircle:x?{display:"inline-flex",alignItems:"center",justifyContent:"center",width:24,height:24,textAlign:"center",padding:8,margin:0,fontSize:16,borderRadius:6,fontWeight:u().Wy.medium,color:t.color,background:o.background,boxShadow:(0,v().Yr)(r,!1)}:{width:16,height:16,borderRadius:8,background:n.color??n.fill??n.background}}}),[C,k,f.device.isMobile,x]);return(0,M.jsx)(b().Ay,{popupType:f.device.isMobile?b().z7.SlideUp:b().z7.Popup,originGap:4,onClose:S,onClick:h,renderOrigin:e=>(0,M.jsx)(o(859428).A,{renderTooltip:()=>(0,M.jsxs)(A,{children:[(0,M.jsx)("div",{children:(0,M.jsx)(c().sA,{defaultMessage:"Text color",id:"highlightSelectionButton.textColor.tooltip"})}),(0,M.jsx)("div",{children:(0,M.jsx)(o(35392).A,{style:{color:y.text.contrastSecondary},name:"toggleHighlight"})})]}),render:n=>(0,M.jsxs)(o(704152).A,{style:{display:"flex",alignItems:"center",paddingLeft:7,paddingRight:6,whiteSpace:"nowrap",borderRadius:6,...r},disabled:t,disabledFeedback:t,...(0,o(553965).A)(e,n),children:[f.device.isMobile?(0,M.jsx)("div",{style:j.colorIcon,children:(0,M.jsx)(c().sA,{defaultMessage:"Color",id:"highlightSelectionButton.mobileColorIcon.label"})}):(0,M.jsx)("div",{style:j.colorIconCircle,children:x?"A":""}),(0,o(668725).b)({width:10,marginLeft:4,fill:"dark"===y.mode?d().Ay.white:y.icon.tertiary})]})}),render:e=>(0,M.jsx)(P,{parent:e,shouldShowUpdatedColorPicker:x,textSelectionColor:C,backgroundSelectionColor:k})})}},229793:(e,t,o)=>{o.d(t,{Vt:()=>l,wC:()=>i});var n=()=>o(645873);const r={CollectionMapView:new(n().O2)("CollectionMapView",(async()=>await Promise.all([o.e(53066),o.e(87421),o.e(92845),o.e(84468),o.e(75078),o.e(95168),o.e(36908),o.e(91194),o.e(67608),o.e(51680)]).then(o.bind(o,270058)))),MapTile:new(n().O2)("MapTile",(async()=>await Promise.all([o.e(87421),o.e(80983)]).then(o.bind(o,123133))))},i=(0,n()._h)(r.CollectionMapView,(e=>e.CollectionMapView)),l=(0,n()._h)(r.MapTile,(e=>e.MapTile))},232636:(e,t,o)=>{o.d(t,{Mj:()=>h,WQ:()=>g});var n=()=>o(584262),r=()=>o(96330),i=()=>o(919709),l=()=>o(970330),a=()=>o(612008),s=()=>o(857783),c=()=>o(281948),d=()=>o(319975),u=()=>o(751156),p=()=>o(357643),m=()=>o(519839),f=()=>o(476492),y=()=>o(611371);function h(e){const{environment:t,place:o,collectionContextStore:r,query:i,schema:d,isFullScreen:h,store:v}=e,b="map_add_item";u().createAndCommit({userAction:"CollectionMapView.handleClick",environment:t,canUndo:!0,perform:e=>{const u=function(e){const{environment:t,transaction:o,place:r,query:i,isFullScreen:l,groupFormat:d,collectionContextStore:u,from:f}=e;if(!(0,y().EF)(t))return;const h=d?[d]:[],v=u.groupsStore.getGroupState(h);if(!v)return;u.searchQueryStore.state&&(0,p().S)({searchQuery:"",collectionContextStore:u,isFullScreen:l});const b=(0,a().Q)({environment:t,collectionContextStore:u,groupsPointer:h,shouldCoerce:!0,templateStore:u.defaultPageTemplateStore.state,transaction:o,from:{createBlock:f},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache});if(!b)return;const S=b.newStore,x=i.map_by;if(!x)return;g({environment:t,store:S,property:x,place:r,transaction:o}),t.device.isMobile?s().uK({environment:t,store:S,pageVisitSource:n().y8.Create}):c().VU({environment:t,store:S,peekMode:(0,m().hH)(u),resultsStore:null==v?void 0:v.resultsStore,collectionContextStore:u,pageVisitSource:n().y8.Create});return S}({environment:t,transaction:e,store:v,query:i,schema:d,place:o,isFullScreen:h,groupFormat:void 0,collectionContextStore:r,from:b});l().v(t,{from:b,type:"page",new_page_id:null==u?void 0:u.id,creating_block_id:null==u?void 0:u.id,...(0,f().sl)(r)})}})}function g(e){const{environment:t,store:o,place:n,transaction:l,property:a}=e,s=o.getAssociatedCollectionStore(),c=(null==s?void 0:s.getMappedProperty(a))??a,u=o.getPropertyStore(c),p=o.getTitleStore(),m=(null==n?void 0:n.name)??(null==n?void 0:n.address),f=null==p?void 0:p.getValue(),y=(0,r().e)(u.getValue()),h=(null==y?void 0:y.name)??(null==y?void 0:y.address),g=!f&&m||(0,i().AGB)(f,[[String(h)]]);return p&&g&&d().R9({environment:t,store:p,value:m?[[m]]:void 0,transaction:l}),d().R9({environment:t,store:u,value:(0,r().t)(n),transaction:l}),o}},236228:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),r=()=>o(56366),i=o(474848);const l=function(e){const{disabled:t,type:l,tooltipLabel:a,children:s,style:c,onClick:d}=e,u=(0,o(484714).v3)(),p=(0,n.useCallback)((e=>{l!==o(919709).Ifu.TemporarySuggestionUnderline&&(o(482287).po({environment:u,annotation:[l]}),d&&d(),(0,o(21869).s)(u,{action:l}))}),[u,l,d]),m=(0,r().K8)((()=>t||"editing"!==o(24157).default.state.mode),[t]),f=(0,r().K8)((()=>Boolean((0,o(792002).B1)(l))),[l]),y=(0,o(401497).IS)((e=>({button:{display:"flex",alignItems:"center",fill:f?e.icon.uiBluePrimary:e.icon.primary,borderRadius:6,height:28,width:28,padding:6,...c}})),[f,c]);return(0,i.jsx)(o(859428).A,{renderTooltip:()=>a,render:e=>(0,i.jsx)(o(704152).A,{style:y.button,disabled:m,disabledFeedback:m,onClick:p,...e,children:s})})}},297813:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,xMarkFillIcon:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.87 3.87 12.26 12.26",svg:(0,o(474848).jsx)("path",{d:"M15.869 5.369A.875.875 0 0 0 14.63 4.13L10 8.763 5.369 4.13A.875.875 0 1 0 4.13 5.37L8.763 10 4.13 14.631a.875.875 0 1 0 1.24 1.239L10 11.237l4.631 4.632a.875.875 0 1 0 1.238-1.238L11.237 10z"})},r=(0,o(340498).wt)("xMarkFill",n)},398208:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),r=o(474848);function i(e){let{onClose:t,style:n}=e;const i=(0,o(959013).tz)(),{isMobile:l}=(0,o(484714).Y0)(),a=(0,o(401497).IS)((()=>({closeButton:{borderRadius:"100%",width:l?28:22,height:l?28:22,...n},closeButtonIconStyle:l?{width:18,height:18}:{}})),[l,n]);return(0,r.jsx)(o(285790).A,{iconStyle:a.closeButtonIconStyle,style:a.closeButton,hovered:!0,icon:o(66913).V,onClick:t,ariaLabel:i.formatMessage({id:"circleCloseButton.ariaLabel",defaultMessage:"Close"})})}const l=n.memo(i)},617837:(e,t,o)=>{o.d(t,{j:()=>y});var n=o(296540),r=()=>o(484714),i=()=>o(56366),l=()=>o(401497),a=()=>o(959013),s=()=>o(534177),c=()=>o(272200),d=()=>o(273190),u=()=>o(227440),p=()=>o(966106),m=()=>o(285790),f=o(474848);function y(e){const{traceId:t,feedbackState:o,setFeedbackState:c,feedbackType:y,iconHeight:g}=e,v=(0,l().IS)((e=>({wrapper:{...g?{height:g}:{}},iconButton:{...g?{height:g}:{}}})),[g]),{thumbsUpType:b,thumbsDownType:S}=(0,n.useMemo)((()=>{switch(y){case"ai_block":return{thumbsDownType:"ai_block_thumbs_down",thumbsUpType:"ai_block_thumbs_up"};case"autofill":return{thumbsDownType:"ai_autofill_thumbs_down",thumbsUpType:"ai_autofill_thumbs_up"};default:(0,s().HB)(y)}}),[y]),x=(0,a().tz)(),C=(0,r().v3)(),k=!(0,i().O$)(u().e),M=(0,n.useCallback)((()=>{p().A.setState({...p().A.state,open:!0,type:S,traceId:t,thumbsUpOrDown:"down"}),c({type:"thumbsdown",userContent:"",shareWithNotion:!0}),h({environment:C,inferenceId:t,feedbackType:"thumbsdown",userContent:"",shareWithNotion:!0})}),[C,c,S,t]),A=(0,n.useCallback)((()=>{p().A.setState({...p().A.state,open:!0,type:b,traceId:t,thumbsUpOrDown:"up"}),c({type:"thumbsup",userContent:"",shareWithNotion:!0}),h({environment:C,inferenceId:t,feedbackType:"thumbsup",userContent:"",shareWithNotion:!0})}),[C,c,b,t]);return(0,f.jsxs)("div",{onClick:e=>{e.stopPropagation(),e.preventDefault()},style:v.wrapper,children:[(0,f.jsx)(m().A,{onClick:A,icon:(0,d().gZ)("thumbsup","thumbsup"===(null==o?void 0:o.type)),ariaLabel:x.formatMessage({id:"AiFeatureFeedbackButtons.thumbsUp",defaultMessage:"Helpful"}),disabled:k,style:v.iconButton}),(0,f.jsx)(m().A,{icon:(0,d().gZ)("thumbsdown","thumbsdown"===(null==o?void 0:o.type)),onClick:M,ariaLabel:x.formatMessage({id:"AiFeatureFeedbackButtons.thumbsDown",defaultMessage:"Not helpful"}),disabled:k,style:v.iconButton})]})}function h(e){const{environment:t,inferenceId:o,feedbackType:n,userContent:r,shareWithNotion:i}=e;c().trackAIAction(t,{type:"property_autofill",inference_id:o,feedback_type:n,timestamp:(new Date).toUTCString(),user_comment:r,share_with_notion:i})}},634224:(e,t,o)=>{o.d(t,{Hp:()=>a,Yg:()=>f,Zz:()=>m,qi:()=>p,qs:()=>u,vM:()=>y,w1:()=>s});var n=()=>o(284371),r=()=>o(236030),i=()=>o(897119),l=()=>o(828180);const a={title:i().nl.Popup,text:i().nl.Popup,number:i().nl.Popup,url:i().nl.Popup,phone_number:i().nl.Popup,email:i().nl.Popup,relation:i().nl.SlideUp,rollup:i().nl.SlideUp,select:i().nl.SlideUp,multi_select:i().nl.SlideUp,status:i().nl.SlideUp,person:i().nl.SlideUp,date:i().nl.SlideUp,file:i().nl.SlideUp,formula:i().nl.SlideUp,checkbox:i().nl.SlideUp,created_by:i().nl.SlideUp,created_time:i().nl.SlideUp,last_edited_by:i().nl.SlideUp,last_edited_time:i().nl.SlideUp,last_visited_time:i().nl.SlideUp,button:i().nl.SlideUp,auto_increment_id:i().nl.Popup,location:i().nl.Popup,verification:i().nl.SlideUp,place:i().nl.SlideUp},s={title:i().nl.Popup,text:i().nl.Popup,number:i().nl.Popup,url:i().nl.Popup,phone_number:i().nl.Popup,email:i().nl.Popup,relation:i().nl.BottomSheet,rollup:i().nl.SlideUp,select:i().nl.BottomSheet,multi_select:i().nl.BottomSheet,status:i().nl.BottomSheet,person:i().nl.BottomSheet,date:i().nl.BottomSheet,file:i().nl.SlideUp,formula:i().nl.SlideUp,checkbox:i().nl.SlideUp,created_by:i().nl.SlideUp,created_time:i().nl.SlideUp,last_edited_by:i().nl.SlideUp,last_edited_time:i().nl.SlideUp,last_visited_time:i().nl.SlideUp,button:i().nl.SlideUp,auto_increment_id:i().nl.Popup,location:i().nl.Popup,verification:i().nl.SlideUp,place:i().nl.BottomSheet},c=Object.freeze({paddingLeft:9,paddingRight:9,paddingTop:(r().tt-20)/2,paddingBottom:(r().tt-20)/2,minHeight:r().tt+1+1,display:"flex",height:"100%",flexDirection:"column",justifyContent:"space-between",flexGrow:1}),d=Object.freeze({...c,paddingTop:(r().Um-20)/2,paddingBottom:(r().Um-20)/2,minHeight:r().Um+1+1}),u=Object.freeze({...c,fontSize:l().Mi}),p=Object.freeze({...c,fontSize:l().KI,fontWeight:n().Wy.medium}),m=Object.freeze({...d,fontSize:l().Mi}),f=Object.freeze({...d,fontSize:l().hN}),y=Object.freeze({...d,fontSize:l().KI,fontWeight:n().Wy.medium})},655424:(e,t,o)=>{o.d(t,{O:()=>l,t:()=>i});var n=o(296540),r=o(474848);const i=(0,n.createContext)({blockPointers:[],collectionStore:void 0,collectionId:"",property:"",schema:{},analyticsFrom:void 0,isDisabled:!0,canConfigureCollection:!1,onChange:()=>{},onDismiss:()=>{},blockStore:void 0,blockPropertyValueOverlayStore:void 0,overlayMode:void 0,insertChar:void 0,format:"table"});function l(e){const{children:t,blockPointers:o,collectionStore:l,collectionId:a,property:s,schema:c,analyticsFrom:d,isDisabled:u,canConfigureCollection:p,blockStore:m,blockPropertyValueOverlayStore:f,overlayMode:y,insertChar:h,onChange:g,onDismiss:v,format:b}=e,S=(0,n.useMemo)((()=>({blockPointers:o,collectionStore:l,collectionId:a,property:s,schema:c,analyticsFrom:d,isDisabled:u,canConfigureCollection:p,blockStore:m,blockPropertyValueOverlayStore:f,overlayMode:y,insertChar:h,onChange:g,onDismiss:v,format:b})),[o,l,a,s,c,d,u,p,m,f,y,h,g,v,b]);return(0,r.jsx)(i.Provider,{value:S,children:t})}i.displayName="BlockPropertyValueOverlayContext"},673964:(e,t,o)=>{o.d(t,{j:()=>i});var n=()=>o(953418),r=()=>o(129522);function i(e){const{collectionContextStore:t,environment:o,fit:i}=e,l=t.collectionViewBlockStore();if(l){const e=r().K.findCollectionViewBlockFromStore(l);if(e){var a;const t=null===(a=e.getNode())||void 0===a?void 0:a.firstChild;t instanceof HTMLElement&&(0,n().$v)({blockAlignment:"start",element:t,environment:o,behavior:"instant",additionalPadding:{top:"filtersBar"===i?64:128},verticalVisibilityRequirement:"topVisible",horizontalVisibilityRequirement:"none"})}}}},720263:(e,t,o)=>{o.d(t,{A:()=>b});var n=o(296540),r=()=>o(484714),i=()=>o(401497),l=()=>o(965998),a=()=>o(959013),s=()=>o(21869),c=()=>o(441467),d=()=>o(862292),u=()=>o(980914),p=()=>o(205682),m=()=>o(77238),f=()=>o(24157),y=()=>o(704152),h=()=>o(35392),g=()=>o(859428),v=o(474848);function b(e){const t=(0,r().v3)(),{isMobile:o}=(0,r().Y0)(),b=(0,i().IS)((e=>({keyboardShorcut:{color:e.text.contrastSecondary}})),[]),S=async()=>{let o;const n=f().default.state;if("empty"!==n.mode){o=u().wg();const r=await d().T.formulas.load();c().hN({environment:t,blockStore:e.blockStore,multiSelection:n.multiSelection,property_id:p().A.state.isOpen?p().A.state.property:m().A.state.isOpen?m().A.state.property:void 0,formulasModule:r})}(0,s().s)(t,{action:"comment",from:o?"simple_table_cell":void 0})};return(0,v.jsx)(g().A,{renderTooltip:()=>(0,v.jsxs)(n.Fragment,{children:[(0,v.jsx)("div",{children:(0,v.jsx)(a().sA,{defaultMessage:"Comment",id:"inlineCommentButton.tooltip"})}),(0,v.jsx)("div",{children:(0,v.jsx)(h().A,{style:b.keyboardShorcut,name:"comment"})})]}),render:t=>(0,v.jsxs)(y().A,{style:{display:"flex",alignItems:"center",padding:e.iconOnly?6:"0 10px",whiteSpace:"nowrap",...e.style},disabled:e.disabled,disabledFeedback:e.disabled,onClick:S,ariaLabel:e.ariaLabel,...t,children:[(0,l().M)({width:o?18:16,height:o?18:16,marginTop:o?0:1,marginRight:e.iconOnly?0:4}),!o&&!e.iconOnly&&(0,v.jsx)(a().sA,{defaultMessage:"Comment",id:"inlineCommentButton.commentLabel"})]})})}},736173:(e,t,o)=>{o.d(t,{Lu:()=>c,VW:()=>s,Yr:()=>d,i8:()=>u});o(16280),o(581454);var n=()=>o(857639),r=()=>o(496603),i=()=>o(502800);const l=new(o(754869).aH)({apiKey:o(780054).A.google.mapsApiKey,version:"weekly"});let a;async function s(e){const t={input:e,sessionToken:a},o=await async function(){const e=await l.importLibrary("places");return a||(a=new e.AutocompleteSessionToken),e}(),{suggestions:n}=await o.AutocompleteSuggestion.fetchAutocompleteSuggestions(t);return n}async function c(){let e;try{e=await new Promise(((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):t(new Error("Geolocation is not supported by this browser"))}))}catch(t){n().log({level:"error",from:"LocationService",type:"getCurrentPosition",error:(0,i().convertErrorToLog)(t)})}return e?{lat:e.coords.latitude,lon:e.coords.longitude}:void 0}async function d(e,t){var o,r;const a=new((await async function(){return await l.importLibrary("geocoding")}()).Geocoder);let s;try{var c;s=null===(c=(await a.geocode({location:{lat:e,lng:t}})).results)||void 0===c?void 0:c[0]}catch(d){n().log({level:"error",from:"LocationService",type:"geocodeCoordinate",error:(0,i().convertErrorToLog)(d)})}return{lat:e,lon:t,address:null===(o=s)||void 0===o?void 0:o.formatted_address,googlePlaceId:null===(r=s)||void 0===r?void 0:r.place_id}}function u(e){return`https://www.google.com/maps/search/?api=1&query=${r().oE([e.name,e.address]).map((e=>encodeURIComponent(e))).join(",")}`}},777849:(e,t,o)=>{o.d(t,{A:()=>y});var n=o(296540),r=()=>o(56366),i=()=>o(401497),l=()=>o(919709),a=()=>o(959013),s=()=>o(448619),c=()=>o(792002),d=()=>o(569777),u=()=>o(24157),p=()=>o(35392),m=o(474848);const f={display:"flex",alignItems:"center",borderRadius:6,padding:6,width:28,height:28};const y=function(e){let{style:t,children:n,disabled:a,onClick:p}=e;const y=(0,i().DP)(),v=(0,o(484714).v3)(),b=(0,r().K8)((()=>h(y)),[y]),S=(0,r().K8)((()=>function(e){if(e)return!0;if("editing"!==u().default.state.mode&&!d().A.isOpen())return!0;const t={[l().Ifu.User]:l().Ifu.User,[l().Ifu.Page]:l().Ifu.Page,[l().Ifu.CustomEmoji]:l().Ifu.CustomEmoji,[l().Ifu.Comment]:l().Ifu.Comment,[l().Ifu.Bot]:l().Ifu.Bot,[l().Ifu.Date]:l().Ifu.Date,[l().Ifu.ExternalObjectInstance]:l().Ifu.ExternalObjectInstance,[l().Ifu.TemporaryPage]:l().Ifu.TemporaryPage,[l().Ifu.TemplateVariable]:l().Ifu.TemplateVariable,[l().Ifu.FormulaPageProperty]:l().Ifu.FormulaPageProperty,[l().Ifu.FormulaContextValue]:l().Ifu.FormulaContextValue,[l().Ifu.Group]:l().Ifu.Group,[l().Ifu.Team]:l().Ifu.Team,[l().Ifu.Citation]:l().Ifu.Citation,[l().Ifu.LinkMention]:l().Ifu.LinkMention,[l().Ifu.AssistantInstructionsCollection]:l().Ifu.AssistantInstructionsCollection,[l().Ifu.Place]:l().Ifu.Place,[l().Ifu.SlackSpecialMention]:l().Ifu.SlackSpecialMention,[l().Ifu.TemporarySearchFilter]:l().Ifu.TemporarySearchFilter,[l().Ifu.TitleOnly]:l().Ifu.TitleOnly};for(const o of Object.values(t))if((0,c().y_)(o))return!0;return!1}(a)),[a]);return(0,m.jsx)(o(859428).A,{renderTooltip:()=>(0,m.jsx)(g,{}),render:e=>(0,m.jsx)(o(704152).A,{style:{...f,...b.equationButton,...t},disabled:S,disabledFeedback:S,onClick:e=>function(e,t,o){s().Wx({environment:t,analyticsFrom:"rich_text_menu"}),o&&o(e)}(e,v,p),...e,children:n})})};function h(e){return{equationButton:{fill:(0,c().B1)(l().Ifu.Equation)?e.blueColor:e.icon.primary},keyboardShortcut:{color:e.text.contrastSecondary}}}function g(){const e=(0,i().DP)(),t=(0,r().K8)((()=>h(e)),[e]);return(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)("div",{children:(0,m.jsx)(a().sA,{id:"richTextMenu.equationButton.tooltip",defaultMessage:"Mark as equation"})}),(0,m.jsx)("div",{children:(0,m.jsx)(p().A,{style:t.keyboardShortcut,name:"openEquationMenu"})})]})}},780243:(e,t,o)=>{o.d(t,{A:()=>v});var n=o(296540),r=()=>o(484714),i=()=>o(56366),l=()=>o(401497),a=()=>o(919709),s=()=>o(959013),c=()=>o(21869),d=()=>o(501666),u=()=>o(792002),p=()=>o(711319),m=()=>o(24157),f=()=>o(704152),y=()=>o(35392),h=()=>o(859428),g=o(474848);function v(e){const t=(0,l().DP)(),o=(0,r().v3)(),v=(0,i().K8)((()=>(0,u().B1)(a().Ifu.Link)),[]),b=(0,i().K8)((()=>function(e){if(e)return!0;if("editing"!==m().default.state.mode&&!p().A.state.open)return!0;if((0,u().y_)(a().Ifu.User)||(0,u().y_)(a().Ifu.Bot)||(0,u().y_)(a().Ifu.Date)||(0,u().y_)(a().Ifu.Page)||(0,u().y_)(a().Ifu.Group))return!0;return!1}(e.disabled)),[e.disabled]);return(0,g.jsx)(h().A,{renderTooltip:()=>(0,g.jsxs)(n.Fragment,{children:[(0,g.jsx)("div",{children:(0,g.jsx)(s().sA,{defaultMessage:"Add link",id:"selectionLinkButton.addLink.tooltip"})}),(0,g.jsx)("div",{children:(0,g.jsx)(y().A,{style:{color:t.text.contrastSecondary},name:"openLinkMenuOrOpenSearch"})})]}),render:n=>(0,g.jsx)(f().A,{style:{display:"flex",alignItems:"center",borderRadius:6,paddingLeft:7,paddingRight:6,...v&&{color:t.blueColor},whiteSpace:"nowrap",...e.style},disabled:b,disabledFeedback:b,...n,onClick:()=>function(e){d().fi({type:"focusOnly",focus:!0}),(0,c().s)(e,{action:a().Ifu.Link})}(o),children:e.children})})}},817722:(e,t,o)=>{o.d(t,{C4:()=>Co,IB:()=>No,_H:()=>Zo});o(18107),o(944114),o(967357),o(898992),o(354520),o(672577),o(581454);var n=o(296540),r=()=>o(908006),i=()=>o(484714),l=()=>o(792485),a=()=>o(56366),s=()=>o(401497),c=()=>o(66689),d=()=>o(700500),u=()=>o(443239),p=()=>o(31503),m=()=>o(970013),f=()=>o(713998),y=()=>o(452540),h=()=>o(597777),g=()=>o(448801),v=()=>o(806411),b=()=>o(179034),S=()=>o(519831),x=()=>o(919709),C=()=>o(931075),k=()=>o(959013),M=()=>o(496603),A=()=>o(534177),P=()=>o(284371),j=()=>o(720665),_=()=>o(299709),w=()=>o(559926),I=()=>o(193722),T=()=>o(522986),O=()=>o(557281),B=()=>o(44729),R=()=>o(246826),F=()=>o(899453),D=()=>o(319975),V=()=>o(751156),U=()=>o(312540),L=()=>o(465364),E=()=>o(724456),N=()=>o(797535),z=()=>o(312296),K=()=>o(33791),W=()=>o(116008),H=()=>o(780054),Y=()=>o(175116),$=()=>o(458366),Q=()=>o(476492),q=()=>o(68465),X=()=>o(792540),G=()=>o(693689),Z=()=>o(504836),J=()=>o(249847),ee=()=>o(645873),te=()=>o(963589),oe=()=>o(97059),ne=()=>o(406792),re=()=>o(246219),ie=()=>o(962730),le=()=>o(289190),ae=()=>o(227440),se=()=>o(630116),ce=()=>o(502438),de=()=>o(807778),ue=()=>o(329304),pe=()=>o(493823),me=()=>o(364280),fe=()=>o(545805),ye=()=>o(135221),he=()=>o(897119),ge=()=>o(125565),ve=()=>o(522419),be=()=>o(901389),Se=()=>o(383594),xe=()=>o(892632),Ce=()=>o(972435),ke=()=>o(722872),Me=()=>o(663173),Ae=()=>o(274652),Pe=()=>o(439264),je=()=>o(805751),_e=()=>o(928600),we=()=>o(480095),Ie=()=>o(89924),Te=()=>o(304740),Oe=()=>o(641007),Be=()=>o(147588),Re=()=>o(437219),Fe=()=>o(235116),De=()=>o(35622),Ve=()=>o(465741);class Ue extends(()=>o(757695))().Store{getInitialState(){return{open:!1}}}const Le=Ue;var Ee=()=>o(911706),Ne=()=>o(760217),ze=()=>o(406699),Ke=()=>o(623580),We=()=>o(939740),He=()=>o(360083),Ye=o(474848);function $e(e){const{disabled:t,store:o,name:r,url:l,onChange:c,onDelete:d}=e,u=Te().rS({url:e.url}),p=(0,n.useRef)(null),m=(0,i().v3)(),{device:f}=m,y=(0,a().uB)(void 0,Le),h=(0,a().O$)(y),g=(0,n.useCallback)((e=>{if(!h.open)return;y.setState({...h,inputValue:e});const t=ve().SB({title:e,source:l});c({url:l,name:t})}),[y,h,c,l]),v=(0,n.useCallback)((()=>{y.setState({open:!0,inputValue:r})}),[y,r]),b=(0,n.useCallback)((()=>{y.setState({open:!1})}),[y]),S=(0,n.useCallback)((()=>{d(l)}),[d,l]),x=(0,n.useCallback)((()=>{const e=()=>{Re().uR(m,{url:l,from:"FilePropertyMenuItem"}),Fe().KE(m,{url:l,download:!0,downloadName:r,permissionRecord:o.pointer})};o.getCreatedById()===Oe().xY.id?(0,Ve().TW)({propertyType:"file",onConfirm:e}):e()}),[m,r,l,o]),C=(0,n.useCallback)((()=>{Fe().OG(m,{url:l,type:"file",from:"view_original",downloadName:r,permissionRecord:o.pointer})}),[m,r,o.pointer,l]),k=(0,n.useCallback)((()=>{if(!p.current)return;const e=p.current.getBoundingClientRect(),t=e.width/e.height;De().o9({environment:m,renderFullScreenNode:()=>(0,Ye.jsx)(He().A,{url:l,isAuthenticated:!0,permissionRecord:o.pointer,width:window.innerWidth,render:(e,t)=>(0,Ye.jsx)("img",{src:t,style:{position:"relative",maxHeight:"100%",maxWidth:"100%",margin:0,alignSelf:"center",width:"100%"}})}),fullScreenNodeRect:e,contentAspectRatio:t,blockStore:o,imageUrl:l})}),[m,o,l]),M=(0,n.useCallback)((()=>{if(h.open)return(0,Ye.jsx)(Xe,{url:e.url,inputValue:h.inputValue,isOpen:h.open,handleFileRename:g,handleCloseRenamePopover:b})}),[h,b,g,e.url]),A=(0,s().IS)((()=>({imageInner:{display:"block",maxWidth:"100%",maxHeight:180,cursor:"zoom-in"},imageInnerWrapper:{flex:"auto",overflow:"hidden"}})),[]),P=(0,Ye.jsx)(Qe,{fileIsImage:u,fileUrl:l,disabled:t,handleOpenFullscreenPreviewOfFile:k,handleDownloadFile:x,handleViewOriginalFile:C,handleOpenRenamePopover:v,handleDeleteFile:S});return u?(()=>{const o=(0,Ye.jsx)(He().A,{url:l,isAuthenticated:!0,permissionRecord:e.store.pointer,width:300,render:(e,t)=>(0,Ye.jsx)("div",{style:A.imageInnerWrapper,children:(0,Ye.jsx)("img",{src:t,style:A.imageInner,onClick:k,ref:p})})}),n={paddingTop:f.isMobile?12:8,paddingBottom:f.isMobile?12:8,alignItems:"flex-start"};return(0,Ye.jsx)(Ne().A,{focused:!1,showDragHandle:!t&&!f.isMobile,style:n,title:o,right:P,dontShrinkRight:!0})})():(()=>{const t=(0,Ye.jsx)(Ne().A,{focused:!1,showDragHandle:!e.disabled&&!f.isMobile,onClick:C,title:r,icon:(0,Ye.jsx)("div",{style:{width:f.isMobile?16:14},children:(0,Be().Y)()}),right:P,dontShrinkRight:!0});return(0,Ye.jsx)(he().Ay,{open:h.open,popupType:f.isMobile?ze().z7.SlideUp:ze().z7.Popup,origin:t,render:M,onDismiss:b})})()}function Qe(e){const{disabled:t,fileIsImage:o,fileUrl:r,handleOpenFullscreenPreviewOfFile:l,handleDownloadFile:a,handleViewOriginalFile:s,handleOpenRenamePopover:c,handleDeleteFile:d}=e,u=(0,i().v3)(),{isMobile:p}=u.device,m=(0,n.useCallback)((e=>(0,Ye.jsx)(Ee().A,{isMobile:p,...e})),[p]),f=(0,n.useCallback)((e=>(0,Ye.jsx)(qe,{fileIsImage:o,fileUrl:r,disabled:t,parent:e,handleOpenFullscreenPreviewOfFile:l,handleDownloadFile:a,handleViewOriginalFile:s,handleOpenRenamePopover:c,handleDeleteFile:d})),[o,r,t,l,a,s,c,d]);return(0,Ye.jsx)(ze().Ay,{popupType:p?ze().z7.SlideUp:ze().z7.Popup,renderOrigin:m,render:f})}function qe(e){const{parent:t,disabled:o,fileUrl:r,fileIsImage:l,handleOpenFullscreenPreviewOfFile:a,handleDownloadFile:s,handleViewOriginalFile:c,handleOpenRenamePopover:d,handleDeleteFile:u}=e,p=(0,i().v3)(),{isMobile:m,isNative:f}=p.device,y=(0,n.useMemo)((()=>{const e=[];l&&e.push({key:"fullscreen",render:e=>(0,Ye.jsx)(Ne().A,{...e,title:(0,Ye.jsx)(k().sA,{defaultMessage:"Full screen",id:"database.actionMenu.fileProperty.fullscreen.title"})}),action:a});return(ve()._J(r)||f)&&e.push({key:"download",render:e=>(0,Ye.jsx)(Ne().A,{...e,title:(0,Ye.jsx)(k().sA,{defaultMessage:"Download",id:"database.actionMenu.fileProperty.download.title"})}),action:s}),e.push({key:"original",render:e=>(0,Ye.jsx)(Ne().A,{...e,title:(0,Ye.jsx)(k().sA,{defaultMessage:"View original",id:"database.actionMenu.fileProperty.viewOriginal.title"})}),action:()=>c()}),o||l||e.push({key:"rename",render:e=>(0,Ye.jsx)(Ne().A,{...e,title:(0,Ye.jsx)(k().sA,{defaultMessage:"Rename",id:"database.actionMenu.fileProperty.rename.title"})}),action:d}),o||e.push({key:"delete",render:e=>(0,Ye.jsx)(Ne().A,{...e,title:(0,Ye.jsx)(k().sA,{defaultMessage:"Delete",id:"database.actionMenu.fileProperty.delete.title"})}),action:u}),e}),[o,l,r,u,a,d,c,s,f]),h=(0,n.useMemo)((()=>[{key:"section",render:e=>(0,Ye.jsx)(Ie().A,{...e}),items:y}]),[y]),g=m?{menuType:ke().gu.ActionSheet}:{menuType:ke().gu.Popup,width:200};return(0,Ye.jsx)(_e().A,{...g,children:(0,Ye.jsx)(We().Ay,{type:We().Oh.Vertical,initialFocus:0,onAccept:t.close,sections:h})})}function Xe(e){const{url:t,handleFileRename:o,handleCloseRenamePopover:r,isOpen:l,inputValue:a}=e,c=(0,i().v3)(),{device:d}=c,u=(0,n.useCallback)((e=>{const t=e.target.value;o(t)}),[o]),p=(0,s().IS)((e=>({renameInputWrapper:{display:"flex",alignItems:"center",color:e.text.primary,fontSize:"13px",padding:"4px 8px"},renameInput:{display:"flex",alignItems:"center",flexGrow:1,fontSize:14,lineHeight:"20px",paddingTop:4,paddingBottom:4,paddingLeft:10,paddingRight:10,width:"100%",borderRadius:4,boxShadow:e.inputBoxShadow,background:e.inputBackground,cursor:"text",position:"relative"}})),[]),m=d.isMobile?{menuType:ke().gu.ActionSheet}:{menuType:ke().gu.Popup,width:380};return l?(0,Ye.jsx)(_e().A,{...m,children:(0,Ye.jsx)("div",{style:p.renameInputWrapper,children:(0,Ye.jsx)(Ke().A,{style:p.renameInput,value:a,placeholder:ve().Jt(t),onChange:u,onSubmit:r,focusInitial:!0,selectAll:!0})})}):null}const Ge=function(e){return(0,Ye.jsx)(o(678553).Ay,{title:(0,Ye.jsxs)("div",{style:{display:"flex"},children:[(0,Ye.jsx)(o(331542).A,{style:{marginTop:1,marginRight:6}}),e.progressPercent?(0,Ye.jsx)(o(773382).A,{percentage:e.progressPercent}):e.progressText?(0,Ye.jsx)("span",{children:e.progressText}):null]})})};function Ze(e){const{store:t,uploadFiles:o,value:r,disabled:l,onChange:s,onDismiss:c}=e,d=Je(r),u=(0,i().v3)(),p=(0,n.useRef)(),m=(0,n.useRef)(null),f=(0,a().uB)(void 0,Me().A),{isLoading:y,progressPercent:h,progressText:g}=(0,a().O$)(f),v=(0,n.useCallback)((e=>{f.setState({isLoading:!0,progressPercent:0}),p.current=e}),[f]),b=(0,n.useCallback)((e=>{const{progressPercent:t,progressText:o}=e;f.setState({...f.state,progressPercent:t,progressText:o})}),[f]),S=(0,n.useCallback)((e=>{if(!p.current)return;const t=p.current.map(((t,o)=>{const n=e[o];return{name:t.name||n,url:n}}));s({value:[...t,...r]}),f.reset()}),[f,s,r]),x=(0,n.useCallback)((()=>{f.reset(),be().f1((0,Ye.jsx)(k().sA,{id:"filePropertyMenu.uploadFileFailedError.message",defaultMessage:"Upload failed."}))}),[f]),C=(0,n.useCallback)((e=>{Se().I(),f.setState({isLoading:!0,progressPercent:0}),p.current=[e]}),[f]),M=(0,n.useCallback)((e=>{if(!p.current)return;const t=p.current[0];if(!t)return;const o={name:t.name||e,url:e};s({value:[...r,o]}),f.reset(),Se().I()}),[f,s,r]),A=(0,n.useCallback)((e=>{const{originUrl:t,pastedSecureFile:o}=e,n={name:t,url:o?(0,ve().xm)(o):t};s({value:[...r,n],pastedSecureFile:o}),f.reset(),Se().I()}),[f,s,r]),P=(0,n.useCallback)((()=>{const e=m.current;if(!(e&&e instanceof Element))return;const o=Ce().A.getIntl();Se().W(u,{originRect:e.getBoundingClientRect(),originGap:3,isSmallWidth:!0,showArrow:!0,title:o.formatMessage({id:"filePropertyMenu.header",defaultMessage:"File"}),currentTab:"file",tabs:[{type:"file",fileUpload:!0,imageUpload:!1,videoUpload:!1,onUpload:e=>{xe().QM({environment:u,file:e[0],bucket:"secure",record:t.pointer,isFileBlock:!1,reportRichUploadMetrics:!0,onStart:C,onProgress:b,onComplete:M,onError:x})}},{type:"embed",onChange:A}]})}),[u,A,M,C,x,b,t.pointer]),j=(0,n.useCallback)((()=>{P()}),[P]),_=()=>{Se().I()};(0,n.useEffect)((()=>((()=>{const{device:e}=u;o?xe().Zn({environment:u,files:o,bucket:"secure",record:t.pointer,isFileBlock:!1,onBatchStart:v,onBatchProgress:b,onBatchComplete:S,onBatchError:x}):Je(r)&&!e.isMobile&&P()})(),_)),[]);const w=u.device.isMobile?{menuType:ke().gu.Modal,title:(0,Ye.jsx)(k().sA,{defaultMessage:"File property",id:"database.fileProperty.mobileMenu.title"}),right:(0,Ye.jsx)(we().DoneMenuText,{}),onClickRight:c}:{menuType:ke().gu.Popup};return(0,Ye.jsx)(je().A,{debugName:"FilePropertyMenu",capture:!0,allowUndo:!0,allowEsc:!0,allowTabUntab:!0,children:(0,Ye.jsxs)(_e().A,{...w,children:[(0,Ye.jsx)(nt,{value:r,disabled:l,store:t,onChange:s}),(0,Ye.jsxs)(Ie().A,{topBorder:!d&&!l,desktopStyle:{...d&&{paddingTop:3,paddingBottom:3}},children:[y?(0,Ye.jsx)(Ge,{progressPercent:h,progressText:g}):void 0,y||l?void 0:(0,Ye.jsx)(Ae().o,{focused:!1,color:"secondary",onClick:j,title:(0,Ye.jsx)(k().sA,{id:"database.fileProperty.focusedLabel",defaultMessage:"Add a file or image"}),ref:m})]})]})})}function Je(e){return 0===e.length}function et(e,t,o){o({value:t.map((t=>t.url===e.url?{name:e.name,url:e.url}:t))})}function tt(e,t,o){o({value:t.filter((t=>t.url!==e))})}function ot(e){let{url:t,value:o,disabled:n,store:r,onChange:l}=e;const a=(0,i().v3)(),{device:s}=a,c=o.find((e=>e.url===t));if(c){const e=c.url,t=c.name;return s.isMobile?(0,Ye.jsx)(Ie().A,{children:(0,Ye.jsx)($e,{store:r,name:t,url:e,onDelete:e=>tt(e,o,l),onChange:e=>et(e,o,l),disabled:n})}):(0,Ye.jsx)($e,{store:r,name:t,url:e,onDelete:e=>tt(e,o,l),onChange:e=>et(e,o,l),disabled:n})}return null}function nt(e){let{value:t,disabled:o,store:r,onChange:l}=e;const a=(0,i().v3)(),{device:s}=a,c=M().oE(t.map((e=>e.url)));return 0===c.length?null:s.isMobile||o?(0,Ye.jsx)(n.Fragment,{children:c.map((e=>(0,Ye.jsx)(ot,{url:e,value:t,disabled:o,store:r,onChange:l},e)))}):(0,Ye.jsx)(Ie().A,{children:(0,Ye.jsx)(Pe().Ay,{direction:"vertical",keys:c,renderKey:e=>(0,Ye.jsx)(ot,{url:e,value:t,disabled:o,store:r,onChange:l}),onDrop:e=>function(e,t,o){t({value:M().Ul(o,(t=>{const o=t.url;return o?e.indexOf(o):1/0}))})}(e,l,t)})})}var rt=()=>o(51493),it=(o(737550),o.n(o(844751))),lt=()=>o(784892),at=()=>o(206267),st=()=>o(183558),ct=()=>o(519839),dt=()=>o(857437),ut=()=>o(838364),pt=()=>o(970585),mt=()=>o(828180),ft=()=>o(64e3),yt=()=>o(673730),ht=()=>o(553965),gt=()=>o(859428),vt=()=>o(399762);const bt=n.forwardRef((function(e,t){var o;const{locked:n,option:r,actionMenuOpen:i,property:l,collectionId:a,analyticsFrom:c,onChange:d,onCloseActionMenu:u,focused:p,propertySchema:m,onOpenActionMenu:f,tokenFormat:y}=e,h=(0,s().DP)();return(0,Ye.jsx)(fe().A,{debugName:"SelectPropertyMenuItem",capture:i,onEnter:M().D_,children:(0,Ye.jsx)(gt().A,{renderTooltip:e=>(0,Ye.jsxs)("div",{...e,style:yt().Q$,children:[(0,Ye.jsx)("div",{children:r.value}),(0,Ye.jsx)("div",{style:{color:h.text.contrastSecondary},children:r.description})]}),placement:ie().W.Left,disableTooltip:!(null!==(o=r.description)&&void 0!==o&&o.length),render:o=>(0,Ye.jsx)(Ne().A,{...(0,ht().A)(o,e),ref:t,title:(0,Ye.jsx)(vt().O,{format:y,value:r.value,color:r.color,hideTooltip:!0,showRemoveButton:!1,isSingle:!0,showEllipsis:!0}),desktopTitleStyle:{marginRight:6},isTokenTitle:!0,right:!n&&(0,Ye.jsx)(St,{property:l,collectionId:a,analyticsFrom:c,onChange:d,onCloseActionMenu:u,actionMenuOpen:i,focused:p,option:r,propertySchema:m,onOpenActionMenu:f})})})})}));function St(e){let{property:t,collectionId:n,analyticsFrom:r,onChange:l,onCloseActionMenu:a,actionMenuOpen:s,focused:c,option:d,propertySchema:u,onOpenActionMenu:p}=e;const m=(0,i().v3)(),{device:f}=m;return(0,Ye.jsx)(o(814777).h,{open:s,origin:(0,Ye.jsx)(Ee().A,{onClick:()=>p(d.value),isMobile:f.isMobile,style:{opacity:c||f.isMobile?1:0}}),option:d,propertySchema:u,property:t,collectionId:n,analyticsFrom:r,onChange:l,onClose:a})}var xt=()=>o(856952);function Ct(e){const{allowMultiple:t,analyticsFrom:o,autofillExplanation:r,bulkAutofillButton:l,canConfigureCollection:s,collectionId:c,disabled:d,insertChar:u,onAccept:f,onChange:y,onDismiss:h,property:g,schema:v,value:b,additionalStores:x,format:C,formQuestionStore:k}=e,M=(0,i().v3)(),{isMobile:P,isMobileNative:j}=(0,i().Y0)(),_=(0,te().X)("db_ux_mobile"),w=(0,n.useRef)(void 0),T=(0,Y().Ks)(),O=(0,a().uB)(void 0,pt().A),[B,R]=(0,dt().$)(),[F,D]=(0,n.useState)(""),[V,U]=(0,n.useState)(void 0);(0,n.useEffect)((()=>{It(v,g,w),u&&D(u)}),[u,g,v]);const L=(0,n.useCallback)((e=>function(e){const{change:t,allowMultiple:o,analyticsFrom:n,collectionContextStore:r,collectionId:i,createSelectColorRef:l,environment:a,onChange:s,property:c,schema:d,setInputValue:u}=e;u("");const p=d[c];if(!p)return;if(!m().lx(p))return;const f=p.options||[];let y;if("removeToken"===t.type)y={type:"selectPropertyMenuUpdateRemoveOption",removeOption:t.removedToken};else if("addTokens"===t.type){let e;o?(e=t.newTokens,y={type:"selectPropertyMenuUpdateAddOptions",addOptions:e}):(e=t.newTokens.length>0?[t.newTokens[t.newTokens.length-1]]:[],y={type:"selectPropertyMenuUpdateReplaceOptions",options:e});const s=e.find((e=>!f.find((t=>t.value.toLowerCase()===e.toLowerCase()))));if(s){const e={id:(0,at().JW)(),value:s,color:l.current};let t;t="alphabetical"===p.auto_sort_options||"reverse_alphabetical"===p.auto_sort_options?[(0,ct().og)({collectionId:i,property:c,propertySchema:p,newOption:e,isAscending:"alphabetical"===p.auto_sort_options})]:[{pointer:{table:S().Vl,id:i},command:"keyedObjectListAfter",path:["schema",c,"options"],args:{value:e}}],y.schemaOperations=t,It(d,c,l),r&&(0,I().L)(a,{...(0,Q().sl)(r),property_type:p.type,action:"select_add_option",from:n})}}else(0,A().HB)(t);s(y)}({allowMultiple:t,analyticsFrom:o,collectionContextStore:T,collectionId:c,createSelectColorRef:w,environment:M,onChange:y,property:g,schema:v,setInputValue:D,...e})),[t,o,T,c,M,y,g,v]),E=(0,n.useCallback)((e=>{U(e)}),[]),N=(0,a().K8)((()=>{if(!(0,$().NN)(C)||!k)return!1;const e=(0,p().hm)(v[g],k.getModel());return void 0!==e&&b.length>=e}),[k,C,g,v,b]),z=v[g];if(!z)return null;if(!m().lx(z))return null;const K=void 0!==k?(z.options||[]).map((e=>({...e,color:"default"}))):z.options||[],W=P||k?lt().NY.Large:lt().NY.Medium,H=function(e,t,o){const n=t.map((e=>e.value));let r;if(e){r=it().filter(e,n).map((e=>e.original));!t.find((t=>t.value.toLowerCase()===e.toLowerCase()))&&e.trim().length>0&&o&&r.push(e.trim().replace(/,/g,""))}else r=n;return r}(F,K,s),q=0===H.length,X=(0,Ye.jsx)(kt,{inputComboboxProps:B,openPropertyActionMenu:V,disabled:d,value:b,inputValue:F,handleOnTokenInputChange:L,setInputValue:D,options:K,propertySchema:z,autofillExplanation:r,tokenFormat:W});let G;return G=P?{menuType:ke().gu.Modal,title:z.name,...!_&&{right:(0,Ye.jsx)(we().DoneMenuText,{}),onClickRight:h},header:X,footer:l,includeFixedHeaderSpacing:_,scrollerStyle:_?{paddingBottom:ut().Hc}:void 0}:{menuType:ke().gu.Popup,header:X,tokenInputHeader:!0,footer:l},d?(0,Ye.jsx)(_e().A,{...G}):(0,Ye.jsx)(_e().A,{...G,children:q?(0,Ye.jsx)(Ie().A,{title:s?(0,Ye.jsx)(Pt,{}):(0,Ye.jsx)(Mt,{}),children:j&&(0,Ye.jsx)(ft().A,{title:(0,Ye.jsx)(Mt,{})})}):(0,Ye.jsx)(We().Ay,{type:We().Oh.Vertical,initialFocus:F.length>0?0:void 0,sections:[{key:1,render:e=>(0,Ye.jsx)(_t,{collectionId:c,property:g,schema:v,onChange:y,canConfigureCollection:s,menuListStore:O,args:e,tokens:H}),items:Tt({analyticsFrom:o,canConfigureCollection:s,collectionId:c,createSelectColorRef:w,handleOnTokenInputChange:L,handleSetOpenPropertyActionMenu:E,onChange:y,openPropertyActionMenu:V,options:K,property:g,schema:v,tokens:H,value:b,additionalStores:x,isLimitReached:N,allowMultiple:t,tokenFormat:W})}],onAccept:(e,t,o)=>{f(o)},store:O,comboboxProps:R})})}function kt(e){let{inputComboboxProps:t,openPropertyActionMenu:o,disabled:r,value:l,inputValue:a,handleOnTokenInputChange:c,setInputValue:d,options:u,propertySchema:p,autofillExplanation:m,tokenFormat:y}=e;const{isMobile:h,isAndroid:g,isPhone:v}=(0,i().Y0)(),b=(0,k().tz)(),S=(0,te().X)("db_ux_chrome"),x=(0,te().X)("db_ux_mobile"),C=(0,n.useCallback)((e=>M().oE(l.map((t=>{const o=(0,f().jy)(e,t);if(o)return(0,Ye.jsx)(vt().O,{value:o.value,color:o.color,showRemoveButton:!r,isSingle:!0,format:y,shouldShrink:!0,onClickRemove:()=>{c({change:{type:"removeToken",removedToken:t}})},showEllipsis:!0},o.id)})))),[r,c,l,y]),A=C(u),P=p.select_ai_inference,j=(0,s().IS)((()=>{const e=(0,mt()._Q)({isPhone:v});return{tokenWrapStyle:S?{padding:e.table.token,gap:6}:{padding:"3px 5px",gap:6}}}),[S,v]),_=(0,n.useCallback)((()=>{l.length>0&&c({change:{type:"removeToken",removedToken:l[l.length-1]}})}),[c,l]);return(0,Ye.jsxs)(Ie().A,{disableDesktopPadding:!0,children:[(0,Ye.jsx)(xt().Ay,{focus:h?void 0:!o,focusAfterAnimation:!0,format:xt().le.Select,tokens:A,tokenWrapStyle:j.tokenWrapStyle,placeholder:null!=P&&P.auto_update_on_edit?b.formatMessage({id:"database.selectPropertyEditMenu.searchPlaceholder.aiAutoUpdate",defaultMessage:"Empty"}):b.formatMessage({id:"database.selectPropertyEditMenu.searchPlaceholder",defaultMessage:"Search for an option..."}),onRemoveLastToken:_,value:a,disabled:r,hideInput:!1,onChange:e=>d(e.target.value),dontShowBorderBottom:g||h&&x,...t,suppressFocusRing:!0}),m]})}function Mt(){return(0,Ye.jsx)(k().sA,{id:"database.selectPropertyEditMenu.noResults",defaultMessage:"No options found"})}function At(){return(0,Ye.jsx)(k().sA,{id:"database.selectPropertyEditMenu.selectOnlyPrompt",defaultMessage:"Select an option"})}function Pt(){return(0,Ye.jsx)(k().sA,{id:"database.selectPropertyEditMenu.selectOrCreatePrompt",defaultMessage:"Select an option or create one"})}function jt(e){let{props:t,newOption:o,token:n}=e;const{isMobile:r}=(0,i().Y0)();return(0,Ye.jsx)(Ne().A,{...t,title:(0,Ye.jsxs)("div",{style:{display:"flex",minWidth:0},children:[(0,Ye.jsx)("div",{style:{marginRight:6,lineHeight:1.3},children:(0,Ye.jsx)(k().sA,{id:"database.selectPropertyEditMenu.createLabel",defaultMessage:"Create"})}),(0,Ye.jsx)(vt().O,{value:o.value,color:o.color,showRemoveButton:!1,isSingle:!0,format:r?lt().NY.Large:lt().NY.Medium,showEllipsis:!0})]}),isTokenTitle:!0})}function _t(e){let{args:t,tokens:o,collectionId:r,property:i,schema:l,onChange:a,canConfigureCollection:s,menuListStore:c}=e;const d=(0,n.useCallback)((e=>function(e,t,o,n,r,i){const l=(0,ct().os)({newOptions:e,collectionId:t,property:o,schema:n});if(l){const e=n[o];e&&m().lx(e)&&"manual"!==(e.auto_sort_options||"manual")&&l.push({pointer:{table:S().Vl,id:t},command:"update",path:["schema",o],args:{auto_sort_options:"manual"}}),r({type:"selectPropertyMenuUpdateSchema",schemaOperations:l})}i.reset()}(e,r,i,l,a,c)),[r,i,l,a,c]);return s?(0,Ye.jsx)(Ie().A,{...t,title:(0,Ye.jsx)(Pt,{}),children:(0,Ye.jsx)(Pe().Ay,{direction:"vertical",keys:o,renderKey:e=>t.children[o.indexOf(e)],onDrop:d})}):(0,Ye.jsx)(Ie().A,{...t,title:(0,Ye.jsx)(At,{}),children:t.children})}function wt(e){let{analyticsFrom:t,canConfigureCollection:o,collectionId:r,handleSetOpenPropertyActionMenu:l,onChange:a,openPropertyActionMenu:s,option:c,property:d,props:u,schema:p,value:f,tokenFormat:y}=e;const h=(0,i().Y0)(),g=(0,n.useMemo)((()=>c.value===s),[s,c.value]),v=p[d];return v&&m().lx(v)?(0,Ye.jsx)(bt,{...u,option:c,showDragHandle:o&&!h.isMobile,locked:!o,property:d,analyticsFrom:t,collectionId:r,onChange:e=>function(e,t,o,n,r){const i=o[t];if(!i)return;if(!m().lx(i))return;const l=i.options||[],a=[...l];let s;const c=n.filter((e=>{const t=l.find((t=>t.value===e));return!t||a.some((e=>e.id===t.id))}));s=M().n4(c,n)?{type:"selectPropertyMenuUpdateSchema",schemaOperations:e}:{type:"selectPropertyMenuUpdateReplaceOptions",options:c,schemaOperations:e};r(s)}(e,d,p,f,a),actionMenuOpen:g,propertySchema:v,onCloseActionMenu:l,onOpenActionMenu:l,tokenFormat:y}):null}function It(e,t,o){const n=e[t];if(!n)return;if(!m().lx(n))return;const r=n.options||[],i=(0,m().Zd)(r);o.current=i}function Tt(e){const{analyticsFrom:t,canConfigureCollection:o,collectionId:n,createSelectColorRef:r,handleOnTokenInputChange:i,handleSetOpenPropertyActionMenu:l,onChange:a,openPropertyActionMenu:s,options:c,property:d,schema:u,tokens:p,value:m,additionalStores:f,isLimitReached:y,allowMultiple:h,tokenFormat:g}=e;return p.map((e=>{let p=c.find((t=>t.value===e));p||(p=c.find((t=>t.value.toLowerCase()===e.toLowerCase())));return{key:e,render:i=>{if(p)return(0,Ye.jsx)(wt,{analyticsFrom:t,canConfigureCollection:o,collectionId:n,handleSetOpenPropertyActionMenu:l,onChange:a,openPropertyActionMenu:s,option:p,property:d,props:i,schema:u,value:m,tokenFormat:g});{const t={id:(0,st().Ay)(),value:e,color:r.current};return(0,Ye.jsx)(jt,{props:i,newOption:t,token:e})}},action:()=>{if(h&&y)return;!(f&&f.length>0)&&m.find((t=>t.toLowerCase()===e.toLowerCase()))||i({change:{type:"addTokens",newTokens:[e]}})}}}))}var Ot=()=>o(636090),Bt=()=>o(416504),Rt=()=>o(187174),Ft=()=>o(799829),Dt=()=>o(449506),Vt=()=>o(735790),Ut=()=>o(686526),Lt=()=>o(673964),Et=()=>o(831194),Nt=()=>o(8980);function zt(e){var t;const{propertySchema:o,blockPropertyValueOverlayStore:r,onChange:l}=e,c=(0,i().v3)(),{isMobile:d,isPhone:u,isAndroid:p}=(0,i().Y0)(),[m,y]=(0,n.useState)(e.initialValue??""),[h,g]=(0,n.useState)(""),v=(0,k().tz)(),b=(0,te().X)("db_ux_mobile"),S=(0,te().X)("db_ux_chrome"),x=(0,a().K8)((()=>{const e=r.state;if(e.isOpen)return e.collectionContextStore}),[r]),C=(0,a().K8)((()=>(null==x?void 0:x.permissionScopesStore.state.canConfigureCollection)&&"collectionPage"!==(null==x?void 0:x.contextType)),[x]),P=(0,a().K8)((()=>{const e=r.state;return!!e.isOpen&&(0,$().br)({store:e.store,additionalStores:e.additionalStores,collectionContextStore:e.collectionContextStore})}),[r]),j=P?[]:o.options??[],_=(0,f().jy)(j,m),w=o.groups??[],I=_&&w.find((e=>{var t;return null===(t=e.optionIds)||void 0===t?void 0:t.includes(_.id)})),[T,O]=(0,dt().$)(),B=_?[(0,Ye.jsx)(vt().q,{value:_.value,color:_.color,groupColor:null==I?void 0:I.color,isSingle:!0,format:d?lt().NY.Large:lt().NY.Medium,onClickRemove:()=>{y(""),l(void 0,void 0)},showRemoveButton:void 0===o.defaultOption,shouldShrink:!0,showEllipsis:!0,tooltipPlacement:ie().W.Left,hideTooltip:Boolean(null===(t=_.description)||void 0===t?void 0:t.length)},"status")]:[],R=(0,s().IS)((e=>{const t=(0,mt()._Q)({isPhone:u});return{tokenWrapStyle:S?{padding:t.table.token,gap:6}:{padding:"3px 5px",gap:6},description:{color:e.text.contrastSecondary}}}),[S,u]),F=P?null:(0,Ye.jsx)(xt().Ay,{focus:!d||void 0,focusAfterAnimation:!0,format:xt().le.Select,tokens:B,tokenWrapStyle:R.tokenWrapStyle,placeholder:v.formatMessage({id:"database.selectPropertyEditMenu.searchStatusPlaceholder",defaultMessage:"Search for an option"}),onRemoveLastToken:M().lQ,value:h,disabled:e.disabled,hideInput:e.disabled,onChange:e=>{g(e.target.value)},dontShowBorderBottom:p,...T,suppressFocusRing:!0}),D=d?{menuType:ke().gu.Modal,title:o.name,...!b&&{right:(0,Ye.jsx)(we().DoneMenuText,{}),onClickRight:e.onDismiss,header:F},scrollerStyle:b?{paddingBottom:ut().Hc}:void 0}:{menuType:ke().gu.Popup,header:F,tokenInputHeader:!0};if(e.disabled)return(0,Ye.jsx)(_e().A,{...D});let V=j;if(""!==h){const e=it().filter(h,j.map((e=>e.value))).map((e=>e.original));V=j.filter((t=>e.includes(t.value)))}const U=w.map((e=>{const t=V.filter((t=>{var o;return null===(o=e.optionIds)||void 0===o?void 0:o.includes(t.id)}));if(0!==t.length)return{group:e,groupOptions:t}})).filter(A().O9),L=U.length>1,E=P?[{items:w.map((t=>({key:t.name,render:e=>(0,Ye.jsx)(Ne().A,{...e,disabledFeedback:!0,focused:e.focused,title:(0,Ye.jsx)(Et().RS,{style:{fontWeight:500,marginTop:2},group:t,showIcon:!0,showColor:!0})}),action:()=>{e.onChange(void 0,t.name)}}))),key:"all-groups",render:e=>(0,Ye.jsx)(Ie().A,{...e})}]:U.map(((t,o)=>{let{group:n,groupOptions:r}=t;return{items:r.map((t=>{const o=e.shouldDisableOption?e.shouldDisableOption(t.id):{disabled:!1};return{key:t.value,render:e=>{var r;return(0,Ye.jsx)(gt().A,{disableTooltip:o.disabled&&!(null!==(r=t.description)&&void 0!==r&&r.length),placement:ie().W.Left,renderTooltip:e=>o.disabled?o.disableReasonMessage:(0,Ye.jsxs)("div",{...e,style:yt().Q$,children:[(0,Ye.jsx)("div",{children:t.value}),(0,Ye.jsx)("div",{style:R.description,children:t.description})]}),render:r=>{var i;return(0,Ye.jsx)(Ne().A,{...(0,ht().A)(r,e),disabled:o.disabled,disabledFeedback:!0,focused:e.focused,title:(0,Ye.jsx)(vt().q,{...r,value:t.value,color:t.color,hideTooltip:Boolean(null===(i=t.description)||void 0===i?void 0:i.length),tooltipPlacement:ie().W.Left,groupColor:n.color,showRemoveButton:!1,isSingle:!0,format:d?lt().NY.Large:lt().NY.Medium}),isTokenTitle:!0})}})},action:()=>{e.onChange(t.value,void 0)}}})),key:`group-${o}`,render:e=>(0,Ye.jsx)(Ie().A,{...e,topBorder:e.index>0,title:L?(0,Ye.jsx)(Et().RS,{group:n,showColor:!1,style:{fontSize:12}}):null})}})),N=x&&C?{items:[{key:"edit property",render:e=>(0,Ye.jsx)(Ne().A,{...e,title:(0,Ye.jsx)(k().sA,{defaultMessage:"Edit property",id:"database.tableHeaderCell.editProperty"}),icon:(0,Ye.jsx)(Nt().I,{icon:Vt().M})}),action:()=>{const t=x.settingsStore;x.collectionStore()&&(e.onDismiss(),(0,Lt().j)({environment:c,collectionContextStore:x,fit:"settings"}),Ut().Ow({collectionContextStore:x,collectionSettingsStore:t}),Ut().a2({collectionSettingsStore:t,item:{type:"property",formatKey:x.getPropertyFormatKey(),property:e.property}}))}}],key:"edit-property",render:e=>(0,Ye.jsx)(Ie().A,{...e,topBorder:e.index>0})}:void 0;return(0,Ye.jsx)(_e().A,{...D,children:(0,Ye.jsx)(We().Ay,{type:We().Oh.Vertical,initialFocus:h.length>0?0:void 0,sections:M().oE([...E,N]),onAccept:(t,o,n)=>{e.onAccept(n)},comboboxProps:O})})}const Kt=(0,k().YK)({cannotSetSprintToCurrentTooltip:{id:"SprintStatusPropertyMenu.cannotSetSprintToCurrentTooltip",defaultMessage:"Current sprint already exists"},cannotSetSprintToNextTooltip:{id:"SprintStatusPropertyMenu.cannotSetSprintToNextTooltip",defaultMessage:"Next sprint already exists"},cannotSetSprintToLastTooltip:{id:"SprintStatusPropertyMenu.cannotSetSprintToLastTooltip",defaultMessage:"Last sprint already exists"}});function Wt(e){const{blockPropertyValueOverlayStore:t}=e,o=(0,i().v3)(),r=(0,Y().ET)(),l=(0,a().O$)(r.normalizedSchemaStore),s=function(e){let{sprintCollectionStore:t,environment:o,normalizedBlockSchema:n}=e;const[{value:r,status:i}]=(0,Rt().Yb)((async()=>{var e;if(!t)return;const r=t.getSchema(),i=t.getFormat().app_config_uri;if(!i||i!==Ot().av)return;const l=(0,Ft().qk)(r,i).includes("last"),a=Ft().n$[i],s=a.current.reducer.get(n),d=a.next.reducer.get(n),u=a.last.reducer.get(n);if(!s||!d)return;const p={userId:o.currentUser.id,userTimeZone:(0,Bt().P)(),searchQuery:void 0,reducers:{[c().Xk]:s,[c().tO]:d,...l&&u?{[c().el]:u}:{}},currentPageInRelatedCollection:void 0},m=null===(e=t.getParentBlockStore())||void 0===e?void 0:e.getCollectionViewStores()[0],f=t.getSpaceId();if(!m)return;const y=await Dt().callApi({eventName:"queryCollection",environment:o,data:{source:{type:"collection",id:t.id,spaceId:f},collectionView:{id:m.id,spaceId:f},loader:p},tracking:{src:"sprint_status_overlay_check"}});if("success"!==y.type)return;const h=y.data.result.reducerResults[c().Xk],g=y.data.result.reducerResults[c().tO];if("results"!==h.type||"results"!==g.type)return;const v=h.blockIds.length>0,b=g.blockIds.length>0;if(!l)return{hasCurrentSprint:v,hasNextSprint:b,hasLastSprint:!1};const S=y.data.result.reducerResults[c().el];if("results"!==S.type)return;return{hasCurrentSprint:v,hasNextSprint:b,hasLastSprint:S.blockIds.length>0}}),[o,n,t]);if("resolved"!==i||!r)return;return r}({sprintCollectionStore:(0,a().K8)((()=>{const e=t.state;if(e.isOpen)return e.store.getAssociatedCollectionStore()}),[t]),environment:o,normalizedBlockSchema:l}),d=(0,k().tz)(),u=(0,n.useCallback)((e=>void 0===s&&[c().tO,c().Xk,c().el].includes(e)?{disabled:!0}:e===c().tO&&null!=s&&s.hasNextSprint?{disabled:!0,disableReasonMessage:d.formatMessage(Kt.cannotSetSprintToNextTooltip)}:e===c().Xk&&null!=s&&s.hasCurrentSprint?{disabled:!0,disableReasonMessage:d.formatMessage(Kt.cannotSetSprintToCurrentTooltip)}:e===c().el&&null!=s&&s.hasLastSprint?{disabled:!0,disableReasonMessage:d.formatMessage(Kt.cannotSetSprintToLastTooltip)}:{disabled:!1}),[s,d]);return(0,Ye.jsx)(zt,{...e,shouldDisableOption:u})}var Ht=()=>o(524702),Yt=()=>o(72135),$t=()=>o(634224);const Qt=n.memo((function(e){const{disabled:t,value:r,insertChar:l,format:c,onChange:d,isTable:u,size:p}=e,[m,f]=(0,n.useState)(""),y=(0,k().tz)(),h=(0,te().X)("db_ux_chrome"),g=(0,n.useCallback)((e=>{let t=(0,o(668766).q)(e,y);return"percent"===c&&void 0!==t&&(t/=100),t}),[y,c]),v=(0,n.useRef)(!1);(0,n.useEffect)((()=>{v.current||(f(Yt().ZV(r,c,y)||""),v.current=!0)}),[c,y,r]);const b=(0,o(600871).GN)();(0,n.useEffect)((()=>{if(!b)return;const e=Yt().$J(m,y);e&&r===-1*e&&f(r>0?m.replace("-",""):`-${m}`)}),[b,c,y,r,m]),(0,n.useEffect)((()=>{l&&(f(l),d(g(l)))}),[l,d,g]);const S=(0,n.useCallback)((e=>{const t=e.target.value;f(t),d(g(t))}),[d,g]),x=(0,s().IS)((()=>{const e=H().A.isMobile?h?"large"===p?$t().vM:$t().Yg:"large"===p?$t().vM:$t().Zz:"large"===p?$t().qi:$t().qs;return{input:{textAlign:u?"right":"left"},inputContainer:{...e,display:"block"}}}),[u,p,h]),C=(0,i().Y0)(),A=(0,a().K8)((()=>C.isIOS&&!C.isIpad?b?"decimal":void 0:"decimal"),[C,b]);return(0,Ye.jsx)(fe().A,{debugName:"NumberPropertyValue",capture:!t,onDelete:M().D_,onSpace:M().D_,onBackspace:M().D_,onLeft:M().D_,onRight:M().D_,onUp:M().D_,onDown:M().D_,onSelectAll:M().D_,onRedo:M().D_,onUndo:M().D_,onCut:M().D_,onCopy:M().D_,onPaste:M().D_,onKeypress:M().D_,children:(0,Ye.jsx)(Ke().A,{style:x.inputContainer,value:m,format:Ke().C.Transparent,onChange:S,inputStyle:x.input,focus:!t,disabled:t,inputMode:A})})})),qt=n.memo((function(e){const{disabled:t,inputType:o,onChange:r,value:i}=e,l=(0,s().IS)((()=>({input:{...H().A.isMobile?$t().Zz:$t().qs,display:"block"}})),[]),a=(0,n.useCallback)((e=>{r(e.target.value)}),[r]);return(0,Ye.jsx)(fe().A,{debugName:"URLPropertyValue",capture:!t,onBackspace:M().D_,onCopy:M().D_,onCut:M().D_,onDelete:M().D_,onDown:M().D_,onKeypress:M().D_,onLeft:M().D_,onPaste:M().D_,onRedo:M().D_,onRight:M().D_,onSelectAll:M().D_,onSpace:M().D_,onUndo:M().D_,onUp:M().D_,children:(0,Ye.jsx)(Ke().A,{disabled:t,focus:!t,format:Ke().C.Transparent,onChange:a,style:l.input,type:o,value:i})})}));var Xt=()=>o(414712),Gt=()=>o(857639),Zt=()=>o(617837),Jt=()=>o(155004);function eo(e,t){const[o,r]=(0,n.useState)();return{feedbackState:o,setFeedbackState:r,inferenceId:(0,a().K8)((()=>{var t;return null===(t=e.store)||void 0===t||null===(t=t.getFormat())||void 0===t||null===(t=t.ai_property_inference_map)||void 0===t||null===(t=t[e.property])||void 0===t?void 0:t.inference_id}),[e])}}function to(e){let{autofillBlockPropertyValueFeedbackButtonsState:t}=e;return t.inferenceId?(0,Ye.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,Ye.jsx)(Zt().j,{traceId:t.inferenceId,feedbackState:t.feedbackState,setFeedbackState:t.setFeedbackState,feedbackType:"autofill"})}):(function(e){const{autofillBlockPropertyValueFeedbackButtonsState:t}=e;Gt().log({from:"AutofillUpdateButtonFailedToFetchFeedbackIndicators",level:"error",type:"Autofill",data:{miscDataToConvertToString:{...t}}})}({autofillBlockPropertyValueFeedbackButtonsState:t}),null)}function oo(e){let{overlayState:t,theme:o,propertySchema:n}=e;const r=(0,a().K8)((()=>le().m.isWriting()),[]),l=(0,i().v3)(),s=eo(t),c=!(0,a().O$)(ae().e);return l.device.isMobile||c||r?null:(0,Ye.jsx)(Jt().s,{allowSelectionWithin:!1,children:(0,Ye.jsxs)("div",{style:{position:"absolute",top:-36,right:0,borderRadius:6,fontSize:14,lineHeight:1.2,display:"flex",whiteSpace:"nowrap",background:o.popoverBackground,boxShadow:o.shadowMD,zIndex:-1,padding:2},children:[(0,Ye.jsx)(no,{overlayState:t,propertySchema:n}),(0,Ye.jsx)(to,{autofillBlockPropertyValueFeedbackButtonsState:s})]})})}function no(e){let{overlayState:t,propertySchema:o}=e;const n=(0,i().v3)(),r=(0,s().IS)((e=>({buttonStyle:{display:"flex",height:28,borderRadius:4},iconStyle:{height:16,width:16,fill:e.aiPurpleColor},updateTextStyle:{fontWeight:500,color:e.aiPurpleColor}})),[]);return(0,Ye.jsx)(pe().p,{style:r.buttonStyle,onClick:()=>{o&&U().autofillPropertyForBlocks({environment:n,stores:[t.store],property:t.property,propertySchema:o,userEventForAnalytics:"generate_from_overlay_button",collectionContextStore:t.collectionContextStore,from:$().zP(t.format)})},children:(0,Ye.jsxs)(me().fI,{gap:4,children:[(0,v().x)(r.iconStyle),(0,Ye.jsx)("span",{style:r.updateTextStyle,children:(0,Ye.jsx)(k().sA,{defaultMessage:"Update",id:"database.propertyValues.reGenerateAiAutofill"})})]})})}function ro(e){let{overlayState:t,propertySchema:o,showSeparator:n}=e;const r=eo(t),i=(0,s().IS)((e=>({dot:{color:e.text.tertiary}})),[]);return(0,Ye.jsxs)(Ye.Fragment,{children:[n?(0,Ye.jsx)("div",{style:i.dot,children:""}):null,(0,Ye.jsx)(to,{autofillBlockPropertyValueFeedbackButtonsState:r})]})}function io(e){let{overlayState:t,propertySchema:o,style:n}=e;const r=(0,i().v3)(),l=(0,s().IS)((e=>({linkStyle:{color:e.aiPurpleColor,fontSize:12,...n}})),[n]);return(0,Ye.jsx)("div",{style:l.linkStyle,onClick:()=>{o&&U().autofillPropertyForBlocks({environment:r,stores:[t.store],property:t.property,propertySchema:o,userEventForAnalytics:"generate_from_overlay_button",collectionContextStore:t.collectionContextStore,from:$().zP(t.format)})},children:(0,Ye.jsx)(k().sA,{defaultMessage:"Update",id:"database.propertyValues.reGenerateAiAutofill"})})}function lo(e){const{store:t,additionalStores:o,collectionContextStore:n,collectionSchema:r}=e;return n&&(0,$().br)({store:t,additionalStores:o,collectionContextStore:n})?n.normalizedSchemaStore.state:r||t.getSchema()||{}}function ao(e){if(!(0,$().br)({store:e.store,additionalStores:e.additionalStores,collectionContextStore:e.collectionContextStore}))return e.store.getAssociatedCollectionStore()}function so(e){const t=ao(e),o=t?t.getMappedProperty(e.property):e.property;return lo(e)[o]}function co(e){let{overlayState:t,pageContext:o}=e;const{store:n}=t,r=so(t);return r&&(0,q().ge)(null==o?void 0:o.publicEditModeStore.state,n)&&m().$M(r)&&m().om(r)&&!t.collectionsBulkActionsToolbarStore}const uo=(0,o(340498).xh)("pointer",{default:{loader:()=>o.e(20684).then(o.bind(o,711621))},small:{loader:()=>o.e(20684).then(o.bind(o,548551))},fill:{loader:()=>o.e(20684).then(o.bind(o,482645))},fillSmall:{loader:()=>o.e(20684).then(o.bind(o,83756))}},["location","gps","cursor","arrow","map"]);var po=()=>o(297813),mo=()=>o(932779),fo=()=>o(736173),yo=()=>o(285790),ho=()=>o(460292),go=()=>o(229793);function vo(e){let{propertyName:t,placeValue:o,onChange:r,onClose:l}=e;const a=(0,i().Y0)(),[s,c]=(0,n.useState)(""),[{value:d=[]}]=(0,Rt().Yb)((async()=>{if(!s)return[];const e=(await(0,fo().VW)(s)).map((e=>e.placePrediction));return M().oE(e)}),[s]),u=(0,n.useCallback)((async e=>{if("current-location"===e){const e=await(0,fo().Lu)(),t=e&&await(0,fo().Yr)(e.lat,e.lon);return void(t&&(r({value:t}),c("")))}const t=e.toPlace();await t.fetchFields({fields:["displayName","formattedAddress","location","googleMapsURI"]}),t.location&&(c(""),r({value:{lat:t.location.lat(),lon:t.location.lng(),name:t.displayName??void 0,address:t.formattedAddress??void 0,googlePlaceId:t.id??void 0}}))}),[r]),p=(0,n.useCallback)((()=>{r({value:void 0})}),[r]),m={menuType:ke().gu.Popup,...a.isMobile&&{title:t,menuType:ke().gu.Modal,right:(0,Ye.jsx)(we().DoneMenuText,{}),onClickRight:l},...!a.isMobile&&{tokenInputHeader:!0,maxHeight:333}};return(0,Ye.jsx)(_e().A,{...m,header:(0,Ye.jsx)(bo,{placeValue:o,onClearLocationClick:p,setQuery:c,query:s}),disableHeaderBorder:!d.length,children:o?(0,Ye.jsx)(go().Vt,{place:o}):(0,Ye.jsx)(xo,{results:d,onSuggestionClick:u})})}function bo(e){const t=(0,i().Y0)(),o=(0,k().tz)(),{placeValue:n,onClearLocationClick:r,setQuery:l,query:a}=e;return(0,Ye.jsx)(xt().Ay,{focus:!t.isMobile||void 0,focusAfterAnimation:!0,hideInput:Boolean(n),format:xt().le.Place,disabled:Boolean(n),tokens:n?[(0,Ye.jsx)(So,{placeValue:n,onClearLocationClick:r},"placeValue")]:[],tokenWrapStyle:{padding:"4px 6px",gap:4},placeholder:o.formatMessage({id:"placePropertyValueOverlay.search.placeholder",defaultMessage:"Search for a location..."}),value:a,onChange:e=>l(e.target.value),dontShowBorderBottom:t.isAndroid,onRemoveLastToken:r})}function So(e){let{placeValue:t,onClearLocationClick:o}=e;const n=(0,k().tz)(),r=(0,s().IS)((e=>({header:{display:"flex",alignItems:"center",fontSize:mt().Mi},closeIconButton:{width:20,height:20,borderRadius:100,marginRight:2,marginLeft:2}})),[]);return(0,Ye.jsxs)("div",{style:r.header,children:[(0,Ye.jsx)("div",{children:(0,mo().H)({placeAnnotation:(0,x().ZW1)(t),index:0})}),(0,Ye.jsx)(yo().A,{style:r.closeIconButton,icon:po().xMarkFillIcon,onClick:o,ariaLabel:n.formatMessage({id:"placePropertyValueOverlay.clear",defaultMessage:"Clear location field"})})]})}function xo(e){const{results:t,onSuggestionClick:o}=e,r=(0,k().tz)(),i=(0,n.useCallback)((()=>{o("current-location")}),[o]),l=t.map((e=>({key:e.placeId,action:()=>o(e),render:t=>{var o,n;return(0,Ye.jsx)(Ne().A,{...t,title:null===(o=e.mainText)||void 0===o?void 0:o.text,caption:null===(n=e.secondaryText)||void 0===n?void 0:n.text})}})));return l.unshift({key:"current-location",action:i,render:e=>(0,Ye.jsx)(Ne().A,{...e,title:r.formatMessage({id:"placePropertyValueOverlay.currentLocation",defaultMessage:"Current Location"}),icon:(0,Ye.jsx)(ho().Q,{iconGroup:uo,variantName:"small"})})}),(0,Ye.jsx)(We().Ay,{type:We().Oh.Vertical,initialFocus:0,sections:[{items:l,key:"results",render:e=>(0,Ye.jsx)(Ie().A,{...e})}]})}const Co=n.memo((function(e){const t=(0,i().v3)(),r=(0,te().X)("db_ux_mobile"),{store:s}=e,c=(0,l().S)();(0,o(852507).l)((()=>{Ko({isFirstRender:!0},s,t)})),o(17022).e.withListenerIgnored((()=>{Ko({isFirstRender:!1},s,t)}));const d=(0,n.useRef)(void 0),u=(0,a().O$)(s),{originRect:p,mobileStyle:y,style:h,placementToOrigin:g}=(0,a().K8)((()=>{let e,n,r;const i=ie().W.Bottom;if(u.isOpen){const i="page"===u.format,s=so(u),d=s?s.type:void 0,p=u.store.canEdit();let y=u.rect.top,h=u.rect.left,g=u.rect.width,v=u.rect.height;if(i?(h-=1,g+=1):(y-=1,h-=1,g+=1,v+=2),("number"===d||f().DY(d))&&H().A.isMobile){const e=o(574012).A.mobileNativeBottomPadding(t)+24;r={overflowY:"auto",WebkitOverflowScrolling:"touch",width:Math.max(240,g),maxHeight:`calc(100vh - ${e}px)`}}if("number"===d)n={width:Math.max(240,g)};else if("date"===d)y+=v-1,n={};else if("relation"===d){const e=re().Qd;n={width:Math.max(e,g),minHeight:p?65:void 0,overflow:"hidden"}}else if("person"===d)n={width:Math.max(240,g)};else if("formula"===d)y+=v-1,n={borderRadius:12};else if("select"===d||"multi_select"===d)n={width:Math.max(300,g),overflow:"visible"};else if("rollup"===d)y+=v-1,n={};else if("file"===d)n={minWidth:Math.max(240,g)};else if("verification"===d)n={width:M().qE(g,265,270)};else{const e=24+(co({overlayState:u,pageContext:c})?28:0);n={width:Math.max(240,g),minHeight:Math.min(v,window.innerHeight-e),maxHeight:window.innerHeight-e,overflow:"visible",display:"flex",flexDirection:"column"},"status"===d&&$().br({store:u.store,additionalStores:u.additionalStores,collectionContextStore:u.collectionContextStore})&&(y+=v-1)}const b=u.collectionContextStore;if(b){var l,a;const e=b.subitemTreeStore.state,t=(0,o(708830).Qe)(e.children,(e=>e.value.store===u.store)),r=null==t?void 0:t.length,i=null===(l=b.normalizedFormatStore.state)||void 0===l||null===(l=l.table_properties)||void 0===l?void 0:l.filter((e=>e.visible)),s=i&&(null===(a=i[0])||void 0===a?void 0:a.property)===u.property;r&&s&&(n={...n,...d&&m().YW(d)&&{width:Math.max(90,g)}})}e=new DOMRect(h,y,g,0)}return{originRect:e,style:n,mobileStyle:r,placementToOrigin:i}}),[u,t,c]),v=(0,a().K8)((()=>{const e=function(e){const{store:t,isDBUXMobileEnabled:o}=e;if(H().A.isMobile){const e=t.state;if(!e.isOpen)return he().nl.SlideUp;const n=so(e);return n?o?$t().w1[n.type]:$t().Hp[n.type]:he().nl.SlideUp}return he().nl.Popup}({store:s,isDBUXMobileEnabled:r}),n=!H().A.isMobile||e===he().nl.Popup,i={borderRadius:6,bottomSheetInitialState:"half",key:zo(s),popupType:e,open:u.isOpen,originRect:p,style:H().A.isMobile?y:h,alignmentToOrigin:ie().C.Start,placementToOrigin:g,preventScaleTransition:n,preventOpacityTransition:n,render:()=>function(e){const{overlayState:t,store:o,environment:n}=e;if(!t.isOpen)return null;return(0,Ye.jsx)(fe().A,{debugName:"BlockPropertyValueOverlay",capture:!0,onTab:e=>Qo(e,o,n),onUntab:e=>qo(e,o,n),onEnter:()=>Xo(o,n),onDelete:M().D_,onBackspace:M().D_,children:(0,Ye.jsxs)(Y().RI,{value:t.collectionContextStore,children:[(0,Ye.jsx)(ko,{overlayState:t}),(0,Ye.jsx)("div",{style:{display:"flex",flexDirection:"column",overflowY:"auto",flexGrow:1,height:"100%"},children:(0,Ye.jsx)(Mo,{overlayState:t,store:o})})]})},`${t.store.id}${t.property}`)}({overlayState:u,store:s,environment:t}),onDismiss:()=>function(e,t){o(112873).xl(),T().vF({environment:t,blockPropertyValueOverlayStore:e})}(s,t)};return d.current=i,i}),[r,t,y,p,u,g,s,h]);return u.isOpen||!d.current?(0,Ye.jsx)(he().Ay,{...v}):(0,Ye.jsx)(he().Ay,{...d.current,open:!1})}));function ko(e){let{overlayState:t}=e;const o=(0,l().S)(),n=(0,s().DP)(),r=(0,a().K8)((()=>co({overlayState:t,pageContext:o})),[t,o]),i=(0,a().K8)((()=>r?so(t):void 0),[r,t]);return r?(0,Ye.jsx)(oo,{theme:n,propertySchema:i,overlayState:t}):null}function Mo(e){let{overlayState:t,store:o}=e;const n=(0,a().K8)((()=>so(t)),[t]);if(!n)return null;const r=Ao[n.type];return r?(0,Ye.jsx)(r,{store:o,overlayState:t,propertySchema:n,propertyType:n.type}):null}const Ao={title:function(e){let{overlayState:t,propertyType:o,store:r}=e;const l=(0,i().v3)(),{clonedStore:s}=t,c=(0,te().X)("db_ux_chrome"),d=(0,n.useCallback)((()=>Xo(r,l)),[r,l]),u=(0,n.useCallback)((()=>$o(r,l)),[r,l]),p=(0,n.useCallback)((e=>Qo(e,r,l)),[r,l]),m=(0,n.useCallback)((e=>qo(e,r,l)),[r,l]),f=(0,n.useCallback)((()=>en(t,o,l,r)),[t,o,l,r]),y=(0,a().K8)((()=>s.getTitleStore()||s.getPropertyStore(t.property)),[s,t.property]),h=(0,a().K8)((()=>Ho(t,l)),[t,l]),g=(0,n.useMemo)((()=>c&&H().A.isMobile?_o:H().A.isMobile?jo:Po),[c]);return(0,Ye.jsx)("div",{style:g,children:(0,Ye.jsx)(Ht().A,{store:y,disableSlashCommands:!0,onEnter:d,onEsc:u,onTab:p,onUntab:m,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableShiftEnter:!0,onChange:f,disabled:h,pasteBehavior:"inline",inPageFind:X().Os.none})})},text:function(e){var t;let{overlayState:o,propertySchema:r,propertyType:l,store:s}=e;const c=(0,i().v3)(),d=(0,k().tz)(),{clonedStore:u}=o,p=(0,te().X)("db_ux_chrome"),m="text"===(null==r?void 0:r.type)&&(null===(t=r.ai_inference)||void 0===t?void 0:t.auto_update_on_edit);let f;m&&(f=d.formatMessage({id:"BlockPropertyValueOverlay.textProperty.placeholder",defaultMessage:"Empty"}));const y=(0,a().K8)((()=>s.state.isOpen&&W().A.getPropertyId()===s.state.property&&W().A.getBlockStore()===s.state.store),[s]),h=(0,n.useCallback)((()=>Xo(s,c)),[s,c]),g=(0,n.useCallback)((()=>$o(s,c)),[s,c]),v=(0,n.useCallback)((e=>Qo(e,s,c)),[s,c]),b=(0,n.useCallback)((e=>qo(e,s,c)),[s,c]),S=(0,n.useCallback)((()=>en(o,l,c,s)),[o,l,c,s]),x=(0,a().K8)((()=>u.getPropertyStore(o.property)),[u,o.property]),C=(0,a().K8)((()=>Ho(o,c)),[o,c]),M=(0,n.useMemo)((()=>p&&H().A.isMobile?$t().Yg:H().A.isMobile?$t().Zz:$t().qs),[p]);return(0,Ye.jsxs)(Ye.Fragment,{children:[(0,Ye.jsxs)("div",{style:M,children:[(0,Ye.jsx)(Ht().A,{store:x,disableSlashCommands:!0,onEnter:h,onEsc:g,onTab:v,onUntab:b,disableSelectAllBlocks:!0,disableSelectionDrag:!0,onChange:S,disabled:C,disableStyleAnnotations:m,pasteBehavior:"inline",placeholder:f,inPageFind:X().Os.none,hasTemporaryDiscussionOnProperty:y}),(0,Ye.jsx)(wo,{overlayState:o,propertySchema:r})]}),(0,Ye.jsx)(Io,{overlayState:o,propertySchema:r})]})},relation:function(e){let{overlayState:t,store:r}=e;const l=(0,i().v3)(),s=Oo(t),c=(0,a().K8)((()=>f().n(Uo(t))),[t]),u=Bo(t),p=Fo(t),h=(0,a().K8)((()=>t.store.getParentId()),[t]),v=Do(t),C=(0,n.useCallback)((()=>Yo(r,l)),[r,l]),k=(0,n.useCallback)((e=>async function(e,t,o){const n=o.state;if(!n.isOpen)return;const r=so(n);if(!r||"relation"!==r.type)return;const i="relation"===r.type&&m().zO(r),l=i&&new(se().md)(t,{table:S().Vl,id:i});l&&await l.load();V().createAndCommit({userAction:"BlockPropertyValueOverlay.handleRelationPropertyMenuUpdate",environment:t,canUndo:!0,perform:r=>{if(e.newPage&&i&&l){const o=x().x9d(e.newPage.name),i=l.getRootPagePointer()??l.pointer,a=R().Wv({environment:t,id:e.newPage.id,type:d().xd.page,properties:{title:o},spaceId:e.newPage.spaceId,inMemoryRecordCache:n.store.inMemoryRecordCache,transaction:r});if(i.table===b().ev){const e=new(se().Bv)(t,i);B().NI({parentStore:e,childStore:a,transaction:r})}else i.table===S().Vl?B().X$({parentStore:l,childStore:a,transaction:r}):(0,A().HB)(i);const s=l.getDefaultTemplatePageStore();s&&O().n5({title:{text:o},environment:t,store:se().Bv.createChildStore(l,a.pointer),templateStore:s,isKeyboard:!1,isCreateIn:!1,transaction:r,from:"relation_property_menu_update"})}const a=e.newValues,s=e.oldValues,c=(0,g().i)(s.map(y().jV),a.map(y().jV)),u=M().oE(Array.from(c.removeOps).map((e=>{if(!a.find((t=>(0,y().jV)(t)===e)))return s.find((t=>(0,y().jV)(t)===e))}))),p=[];for(const e in c.beforeOps){const t=a.find((t=>(0,y().jV)(t)===e));if(!t)continue;const o=c.beforeOps[e];if(!o){p.push({relationToAdd:t});continue}const n=a.find((e=>(0,y().jV)(e)===o));p.push({relationToAdd:t,before:n})}for(const e of Eo(n)){for(const o of u)F().zB({environment:t,store:e,propertyId:n.property,id:o.id,transaction:r});for(const o of p)o.before?F().K6({environment:t,store:e,propertyId:n.property,id:o.relationToAdd.id,position:{type:"before",before:o.before.id},transaction:r}):F().K6({environment:t,store:e,propertyId:n.property,id:o.relationToAdd.id,position:{type:"after"},transaction:r})}Zo(n,t,o)}})}(e,l,r)),[l,r]);if(h)return(0,Ye.jsx)(o(655424).O,{blockPointers:c,property:t.property,collectionStore:u,collectionId:h,schema:s,isDisabled:v,canConfigureCollection:p,onChange:k,analyticsFrom:Lo(t),onDismiss:C,blockStore:t.store,blockPropertyValueOverlayStore:r,overlayMode:t.mode,insertChar:t.insertChar,format:t.format,children:(0,Ye.jsx)(re().PF,{})});return null},rollup:function(e){let{overlayState:t,store:r}=e;const l=(0,i().v3)(),s=(0,a().K8)((()=>lo(t)),[t]),c=To(t),d=(0,a().K8)((()=>{const e=ao(t),o=null==e?void 0:e.getParentBlockStore();return Ho(t,l)||!(0,K().v)({collectionStore:e,collectionViewBlockStore:o,checkNavigableAncestorLocked:!1})||c}),[t,l,c]),u=(0,n.useCallback)((()=>Yo(r,l)),[r,l]),p=(0,n.useCallback)((e=>function(e,t,o){const n=t.state;if(!n.isOpen)return;V().createAndCommit({userAction:"BlockPropertyValueOverlay.handleRollupPropertyMenuUpdate",environment:o,canUndo:!0,perform:r=>{!function(e,t,o,n){const r=o.state;if(!r.isOpen)return;if(r.isOpen){const o=ao(r);o&&(0,z().F)({environment:n,collectionStore:o,update:e,transaction:t})}}({[n.property]:e.propertySchema},r,t,o)}})}(e,r,l)),[r,l]);return(0,Ye.jsx)(o(798174).R,{context:"bpvOverlay",property:t.property,schema:s,disabled:d,onChange:p,parentStore:t.store,analyticsFrom:Lo(t),onDismiss:u})},select:function(e){let{overlayState:t,store:o}=e;const r=(0,i().v3)(),l=Oo(t),s=Bo(t),c=function(e){return(0,a().K8)((()=>so(e)),[e])}(t),d=Ro(t),u=Do(t),p=Fo(t),m=(0,n.useCallback)((e=>Go(e,o,r)),[o,r]),y=(0,n.useCallback)((()=>Yo(o,r)),[o,r]),h=(0,n.useCallback)((e=>Jo(e,r,o)),[r,o]);if(!s||!c||"select"!==c.type)return null;const g=f().L3(d,c.options||[]);return(0,Ye.jsx)(Ct,{allowMultiple:!1,value:g?[g]:[],property:t.property,collectionId:s.id,schema:l,disabled:u,canConfigureCollection:p,onChange:h,analyticsFrom:Lo(t),insertChar:t.insertChar,onAccept:m,onDismiss:y,blockStore:t.store,additionalStores:t.additionalStores,autofillExplanation:(0,Ye.jsx)(wo,{overlayState:t,propertySchema:c}),bulkAutofillButton:(0,Ye.jsx)(Io,{overlayState:t,propertySchema:c}),format:t.format,formQuestionStore:t.formQuestionStore})},multi_select:function(e){let{overlayState:t,store:o,propertySchema:r}=e;const l=(0,i().v3)(),s=Oo(t),c=Bo(t),d=Ro(t),u=Do(t),m=Fo(t),y=(0,a().K8)((()=>{if(!t.formQuestionStore)return!1;const e=t.formQuestionStore.getModel();return!!e&&(0,p().Fi)({formQuestionModel:e,propertySchema:r})}),[t.formQuestionStore,r]),h=(0,n.useCallback)((e=>Jo(e,l,o)),[l,o]),g=(0,n.useCallback)((e=>Go(e,o,l,y)),[o,l,y]),v=(0,n.useCallback)((()=>Yo(o,l)),[o,l]);if(!c||!r||"multi_select"!==r.type)return null;const b=f().o2(d,r.options||[]);return(0,Ye.jsx)(Ct,{allowMultiple:!y,value:b,property:t.property,collectionId:c.id,schema:s,disabled:u,canConfigureCollection:m,onChange:h,analyticsFrom:Lo(t),insertChar:t.insertChar,onAccept:g,onDismiss:v,blockStore:t.store,additionalStores:t.additionalStores,autofillExplanation:(0,Ye.jsx)(wo,{overlayState:t,propertySchema:r}),bulkAutofillButton:(0,Ye.jsx)(Io,{overlayState:t,propertySchema:r}),format:t.format,formQuestionStore:t.formQuestionStore})},status:function(e){let{overlayState:t,propertySchema:o,store:r}=e;const l=(0,i().v3)(),a=Ro(t),s=Do(t),d=(0,n.useMemo)((()=>{if(!o||"status"!==o.type)return;return{initialValue:f().RZ(a,o),property:t.property,propertySchema:o,disabled:s,onDismiss:()=>Yo(r,l),onChange:(e,t)=>{e?Jo({type:"selectPropertyMenuUpdateReplaceOptions",options:[e]},l,r):t?function(e,t,o){const n=o.state;if(!n.isOpen)return;V().createAndCommit({userAction:"BlockPropertyValueOverlay.handleStatusGroupPropertyMenuUpdate",environment:t,canUndo:!0,perform:r=>{if(e.groupType){for(const o of Eo(n)){var i;const l=o.getAssociatedCollectionStore();if(!l)continue;const a=l.getSchema(),s=l.getMappedProperty(n.property),c=a[s];if("status"!==(null==c?void 0:c.type))continue;const d=(c.groups??[]).find((t=>{var o;return t.name.toLowerCase()===(null===(o=e.groupType)||void 0===o?void 0:o.toLowerCase())})),u=null==d||null===(i=d.optionIds)||void 0===i?void 0:i.at(0);if(!u)continue;const p=(c.options??[]).find((e=>e.id===u));if(!p)continue;const m=o.getPropertyStore(s);D().R9({environment:t,store:m,value:[[p.value]],transaction:r})}Zo(n,t,o)}}})}({groupType:t},l,r):o.defaultOption?Jo({type:"selectPropertyMenuUpdateReplaceOptions",options:[o.defaultOption]},l,r):Jo({type:"selectPropertyMenuUpdateReplaceOptions",options:[]},l,r)},onAccept:e=>Go(e,r,l),blockPropertyValueOverlayStore:r}}),[o,a,s,t,r,l]);if(!o||"status"!==o.type||!d)return null;return t.property===c().Hx.StatusV2?(0,Ye.jsx)(Wt,{...d}):(0,Ye.jsx)(zt,{...d})},person:function(e){let{overlayState:t,propertySchema:r,store:l}=e;const s=(0,i().v3)(),c=Oo(t),d=Ro(t),u=(0,a().K8)((()=>{var e;return null===(e=t.collectionContextStore)||void 0===e?void 0:e.collectionStore()}),[t.collectionContextStore]),p=(0,a().K8)((()=>t.store.isTemplate()),[t]),m=Do(t),y=(0,n.useCallback)((()=>Yo(l,s)),[l,s]),h=(0,n.useCallback)((e=>function(e,t,o){const n=o.state;if(!n.isOpen)return;V().createAndCommit({userAction:"BlockPropertyValueOverlay.handlePersonPropertyMenuUpdate",environment:t,canUndo:!0,perform:r=>{if(j().pN(e.schema)||Wo(e.schema,r,o,t),"personPropertyMenuUpdateAddPerson"===e.type){for(const t of No(n))for(const o of e.newValues)V().applyOperation({transaction:r,store:t,operation:{path:t.path,pointer:t.pointer,command:"addPersonAfter",args:{pointer:o}}});Zo(n,t,o),n.property!==C()._e.Owner&&"notion://wiki/owner_property"!==n.property||(0,rt().y)({environment:t,blockStore:n.store,entrypoint:"property_menu",action:"add"})}else if("personPropertyMenuUpdateRemovePerson"===e.type){for(const t of No(n))V().applyOperation({transaction:r,store:t,operation:{path:t.path,pointer:t.pointer,command:"removePerson",args:{pointer:e.removedValue}}});Zo(n,t,o),n.property!==C()._e.Owner&&"notion://wiki/owner_property"!==n.property||(0,rt().y)({environment:t,blockStore:n.store,entrypoint:"property_menu",action:"remove"})}else if("personPropertyMenuUpdateReplacePerson"===e.type){const i=f().RV([e.newValue]);for(const e of No(n))D().R9({environment:t,store:e,value:i,transaction:r});Zo(n,t,o),n.property!==C()._e.Owner&&"notion://wiki/owner_property"!==n.property||(0,rt().y)({environment:t,blockStore:n.store,entrypoint:"property_menu",action:"replace"})}else(0,A().HB)(e)}})}(e,s,l)),[s,l]),g=(0,a().K8)((()=>t.store.getCreatedByPointer()),[t]);if(!r||"person"!==r.type)return null;const v=f().as({value:d,isTemplatePage:p,propertySchema:r,blockCreatorPointer:p||$().NN(t.format)?void 0:g}),b=(0,A().O9)(r.default)&&!d&&1===v.length;return(0,Ye.jsx)(o(232376).Ay,{value:v,format:t.format,valueIsUnpersistedDefaultValue:b,propertySchema:r,schema:c,disabled:m,onChange:h,insertChar:t.insertChar,onDismiss:y,parentStore:t.store,isTemplatePage:p,formQuestionStore:t.formQuestionStore,collectionStore:u})},number:function(e){let{overlayState:t,store:o,propertySchema:r}=e;const l=(0,i().v3)(),a=Ro(t),s=Do(t),c=(0,n.useCallback)((e=>function(e,t,o){const n=o.state;if(!n.isOpen)return;(0,Xt().YX)(e,t,No(n)),Zo(n,t,o)}(e,l,o)),[l,o]);if(!r||"number"!==r.type)return null;const d="table"===t.format,u=f().Me(a),p="large"===(null==t?void 0:t.sizing)?"large":"default";return(0,Ye.jsx)(Qt,{size:p,value:u,isTable:d,format:r.number_format||"number",disabled:s,insertChar:t.insertChar,onChange:c})},date:function(e){let{overlayState:t,store:r,propertySchema:l}=e;const s=(0,i().v3)(),c=Ro(t),d=Do(t),u=Fo(t),p=(0,n.useCallback)((e=>function(e,t,o){const n=o.state;if(!n.isOpen)return;V().createAndCommit({userAction:"BlockPropertyValueOverlay.handleDatePropertyValueChange",environment:t,canUndo:!0,perform:r=>{for(const i of Eo(n))!e||h().kC(e)?(L().D5({environment:t,store:i,type:"dateValue",dateValue:e,propertyId:n.property,transaction:r}),e||Yo(o,t)):(R().zv({store:i.getPropertiesStore(),transaction:r,data:{[n.property]:[x().wmz(x().Ii$({type:e}))]}}),Yo(o,t)),Zo(n,t,o)}})}(e,s,r)),[s,r]),m=(0,n.useCallback)((e=>function(e,t,o){const n=t.state;if(!n.isOpen)return;const r=so(n);if(!r||"date"!==r.type)return;const i=lo(n),l={...r,date_format:e},a={...i,[n.property]:l};if(V().createAndCommit({userAction:"BlockPropertyValueOverlay.handleDatePropertyDateFormatChange",environment:o,canUndo:!0,perform:e=>{Wo(a,e,t,o)}}),l){var s;Lo(n),(0,I().L)(o,{property_type:l.type,action:"date_change_format",from:Lo(n),collection_id:null===(s=ao(n))||void 0===s?void 0:s.id})}}(e,r,s)),[s,r]),f=(0,n.useCallback)((e=>function(e,t,o){const n=t.state;if(!n.isOpen)return;const r=so(n);if(!r||"date"!==r.type)return;const i=lo(n),l={...r,time_format:e},a={...i,[n.property]:l};if(V().createAndCommit({userAction:"BlockPropertyValueOverlay.handleDatePropertyTimeFormatChange",environment:o,canUndo:!0,perform:e=>{Wo(a,e,t,o)}}),l){var s;Lo(n),(0,I().L)(o,{property_type:l.type,action:"date_change_format",from:Lo(n),collection_id:null===(s=ao(n))||void 0===s?void 0:s.id})}}(e,r,s)),[s,r]),y=(0,n.useCallback)((()=>Yo(r,s)),[r,s]),g=(0,a().K8)((()=>t.store.isTemplate()),[t]);if(!l||"date"!==l.type)return null;const v=(0,o(787626).b)(c),b=l.default_reminder,S=["form_editor","form_viewer"].includes(t.format);return(0,Ye.jsx)(ee().u2,{dependency:o(75858).cm,children:e=>{let{DatePropertyMenu:n}=e;return(0,Ye.jsx)(n,{firstDayOfWeek:o(186445).XX.state,value:v,format:t.format,onChangeValue:p,dateFormat:l.date_format,onChangeDateFormat:m,timeFormat:l.time_format,defaultReminder:b,disabled:d,canConfigureCollection:u,onChangeTimeFormat:f,onDismiss:y,shouldShowReminder:!S,shouldShowControls:!S,isTemplatePage:g,formQuestionStore:t.formQuestionStore})}})},file:function(e){let{overlayState:t,store:o}=e;const r=(0,i().v3)(),l=Oo(t),a=Ro(t),s=Do(t),c=f().pJ(a),d=(0,n.useCallback)((()=>Yo(o,r)),[o,r]),u=(0,n.useCallback)((e=>V().createAndCommit({userAction:"BlockPropertyValueOverlay.renderFile",environment:r,canUndo:!0,perform:n=>{if(j().pN(e.schema)||Wo(e.schema,n,o,r),!j().pN(e.value)){const i=f().eQ(e.value);for(const e of No(t))D().R9({environment:r,store:e,value:i,transaction:n});Zo(t,r,o)}e.pastedSecureFile&&R().Bn({store:t.store,source:e.pastedSecureFile.copiedSource,fileIds:[e.pastedSecureFile.fileId],transaction:n})}})),[r,o,t]);return(0,Ye.jsx)(Ze,{store:t.store,value:c,property:t.property,schema:l,onDismiss:d,uploadFiles:t.uploadFiles,disabled:s,onChange:u})},url:Vo,phone_number:Vo,email:Vo,formula:function(e){let{overlayState:t,propertySchema:r,store:l}=e;const s=(0,i().v3)(),c=To(t),d=Do(t),u=Fo(t),p=Bo(t),m=(0,a().K8)((()=>t.store.getModel()),[t.store]),f=(0,n.useCallback)((()=>Yo(l,s)),[l,s]),y=(0,n.useCallback)((e=>function(e,t){const{newValue:o,newType:n,propertySchema:r,property:i,collectionStore:l}=e,a=o?{...r,formula2:{code:o,result_type:n},version:"v2"}:{...r,formula2:void 0,version:"v2"};V().createAndCommit({userAction:"CollectionFormulaOptions.handleFormulaChange",environment:t,canUndo:!0,perform:e=>{(0,z().F)({environment:t,collectionStore:l,update:{[i]:a},transaction:e})}})}(e,s)),[s]),h=d||!u||c;if(m&&p&&r&&"formula"===r.type)return(0,Ye.jsx)(ee().u2,{dependency:o(862292).T.formulas,children:e=>(0,Ye.jsx)(o(490696).C,{handleClose:f,property:t.property,getRecordModel:t.store.getRecordModel,propertySchema:r,collectionStore:p,handleSave:y,formulas:e,disabled:h,blockStore:t.store,analyticsFrom:Lo(t)})});return null},verification:function(e){let{overlayState:t,propertySchema:r,store:l}=e;const a=(0,i().v3)(),s=Ro(t),c=(0,n.useCallback)((e=>{V().createAndCommit({userAction:"BlockPropertyValueOverlay.verification",environment:a,canUndo:!0,perform:o=>{const n=f().j2(e.value);for(const e of No(t))D().R9({environment:a,store:e,value:n,transaction:o});Zo(t,a,l)}}),(0,rt().q)({environment:a,blockStore:t.store,update:e})}),[a,t,l]),d=(0,n.useCallback)((()=>Yo(l,a)),[l,a]),u=(0,C().U1)(s);if("verification"!==(null==r?void 0:r.type))return null;return(0,Ye.jsx)(o(908671).y,{propertyName:r.name,onChange:c,verificationValue:u,getRecordModel:t.store.getRecordModel,blockId:t.store.id,onClose:d,showTitle:!0,showCurrentStatusHeader:!0,showRemoveVerificationButton:!0,showVerificationFooter:!0,showCustomHeader:!1,entrypoint:"db_property_menu"})},place:function(e){let{overlayState:t,propertySchema:r,propertyType:l,store:a}=e;const s=(0,i().v3)(),c=Ro(t),d=(0,n.useCallback)((e=>{const{store:n,property:r}=t;V().createAndCommit({userAction:"BlockPropertyValueOverlay.handlePlaceChange",environment:s,canUndo:!0,perform:t=>{(0,o(232636).WQ)({environment:s,store:n,property:r,place:e.value,transaction:t})}})}),[s,t]),u=(0,n.useCallback)((()=>{Yo(a,s)}),[a,s]);if("place"!==(null==r?void 0:r.type))return null;const p=(0,o(96330).e)(c);return(0,Ye.jsx)(vo,{placeValue:p,propertyName:r.name,onChange:d,onClose:u})},checkbox:void 0,created_by:void 0,created_time:void 0,last_edited_by:void 0,last_edited_time:void 0,last_visited_time:void 0,button:void 0,auto_increment_id:void 0,location:void 0},Po={...$t().qs,fontWeight:P().Wy.medium},jo={...$t().Zz,fontWeight:P().Wy.medium},_o={...$t().Yg,fontWeight:P().Wy.medium};function wo(e){let{overlayState:t,propertySchema:o}=e;const n=(0,i().v3)(),r=(0,l().S)(),c=(0,a().K8)((()=>(0,q().O0)(n)),[n]),d=(0,a().K8)((()=>le().m.isWriting()),[]),u=!(0,a().O$)(ae().e),p=o&&m().$M(o)?(0,m().om)(o):void 0,f=(0,a().K8)((()=>(0,q().ge)(null==r?void 0:r.publicEditModeStore.state,t.store)),[r,t]),y=(0,s().IS)((e=>({aiWritingLabel:{fontSize:12,color:e.aiPurpleColor,display:"flex",alignItems:"inline",fontWeight:500,padding:"8px 12px"},editContainer:{display:"flex",alignItems:"center",padding:"8px 12px"},dot:{color:e.text.tertiary},autoUpdatingLinkContainer:{paddingLeft:2,display:"flex",alignItems:"center"},autoUpdatingMobileLink:{paddingLeft:2,paddingRight:2},editMobileLink:{marginTop:6,marginBottom:2}})),[]);return c?u?null:d?(0,Ye.jsxs)(ge().A,{isSecondaryColor:!0,style:y.aiWritingLabel,isSmall:!0,isMultiline:!0,children:[(0,Ye.jsx)(k().sA,{defaultMessage:"AI is writing",id:"BlockPropertyValueOverlay.AIActionText.overlay"}),(0,Ye.jsx)("div",{style:{marginLeft:4},children:(0,Ye.jsx)(ye().A,{})})]}):null!=p&&p.auto_update_on_edit?(0,Ye.jsxs)("div",{style:y.editContainer,children:[(0,Ye.jsx)(ge().A,{isSecondaryColor:!0,style:{fontSize:12},isSmall:!0,isMultiline:!0,children:(0,Ye.jsx)(k().sA,{defaultMessage:"Auto-updated by AI",id:"BlockPropertyValueOverlay.helpText.overlay"})}),H().A.isMobile&&f&&(0,Ye.jsxs)("div",{style:y.autoUpdatingLinkContainer,children:[(0,Ye.jsx)("div",{style:y.dot,children:""}),(0,Ye.jsx)(io,{overlayState:t,propertySchema:o,style:y.autoUpdatingMobileLink}),(0,Ye.jsx)(ro,{overlayState:t,propertySchema:o,showSeparator:!0})]})]}):H().A.isMobile&&p&&f?(0,Ye.jsx)(io,{overlayState:t,propertySchema:o,style:y.editMobileLink}):null:null}function Io(e){let{overlayState:t,propertySchema:o}=e;const{store:r}=t,c=null==o?void 0:o.name,d=(0,i().v3)(),u=(0,l().S)(),p=(0,a().K8)((()=>(0,q().ge)(null==u?void 0:u.publicEditModeStore.state,r)),[u,r]),f=!(0,a().O$)(ae().e),y=(0,a().K8)((()=>{var e;return Math.max((null===(e=t.collectionsBulkActionsToolbarStore)||void 0===e?void 0:e.getNumberOfTextStoresBeingEdited())??0,ce().default.state.stores.length)}),[t]),h=(0,s().IS)((e=>({button:{width:"100%",height:"auto",borderTop:`1px solid ${e.regularDividerColor}`},magicWandIcon:{width:18,fill:e.aiPurpleColor},titleContainer:{fontSize:14,whiteSpace:"normal"},descriptionContainer:{fontSize:12,color:e.text.secondary,whiteSpace:"normal",lineHeight:"1.4em"}})),[]),g=(0,a().K8)((()=>r.getSpaceId()),[r]),b=(0,J().T)(),S=(0,ue()._X)({name:"collection_property_autofill",spaceId:g,userId:b,amount:y}),x=(0,n.useCallback)((()=>{S&&((0,ue().e2)(S)?function(e,t,o){const{collectionsBulkActionsToolbarStore:n}=e;if(!n)return;if((0,ue().e2)(t)){let t=n.state.textStoresBeingEdited;if(0===t.length&&(t=ce().default.state.stores),!(0,A().EI)(t))return;const r=so(e);if(!r)return;U().autofillPropertyForBlocks({environment:o,stores:t,property:e.property,propertySchema:r,userEventForAnalytics:"generate_from_overlay_button",isBulkAction:!0,from:$().zP(e.format),collectionContextStore:e.collectionContextStore})}else U().triggerAiAutofillUpsell({environment:o,from:"ai_autofill_bulk_fill",upsell:t.upsell})}(t,S,d):U().triggerAiAutofillUpsell({environment:d,from:"ai_autofill_bulk_fill",upsell:S.upsell}))}),[t,S,d]),C=(0,a().K8)((()=>(0,de().Le)()),[]);if(o&&p&&m().$M(o)&&(0,m().om)(o)){if(y<=1||f||!S)return null;const e=S.limit.amount;return(0,Ye.jsx)(pe().p,{style:h.button,onClick:()=>x(),children:(0,Ye.jsxs)(me().fI,{gap:8,padding:"8px 0px",alignItems:"start",children:[(0,v().x)(h.magicWandIcon),(0,Ye.jsxs)(me().VP,{gap:4,children:[(0,Ye.jsx)("div",{style:h.titleContainer,children:c?(0,Ye.jsx)(k().sA,{defaultMessage:"Update {propertyName} with AI",id:"BlockPropertyValueOverlay.bulkAiAutofillButton.titleWithPropertyName",values:{propertyName:c}}):(0,Ye.jsx)(k().sA,{defaultMessage:"Update with AI",id:"BlockPropertyValueOverlay.bulkAiAutofillButton.title"})}),(0,Ye.jsx)("div",{style:h.descriptionContainer,children:(0,ue().e2)(S)?(0,Ye.jsx)(k().sA,{defaultMessage:"{numPages, select, 1 {Update {numPages} page} other {Update {numPages} pages}}",id:"BlockPropertyValueOverlay.bulkAiAutofillButton.countAndDescription",values:{numPages:y}}):0===e?C?(0,Ye.jsx)(k().sA,{defaultMessage:"Upgrade Notion AI to update properties with AI",id:"BlockPropertyValueOverlay.bulkAiAutofillButton.largeBulkFillUpsellMessage.zeroPagesV2"}):(0,Ye.jsx)(k().sA,{defaultMessage:"Get the AI add-on to update properties with AI",id:"BlockPropertyValueOverlay.bulkAiAutofillButton.largeBulkFillUpsellMessage.zeroPages"}):C?(0,Ye.jsx)(k().sA,{defaultMessage:"Upgrade Notion AI to update more than {maxItems} pages at once",id:"BlockPropertyValueOverlay.bulkAiAutofillButton.largeBulkFillUpsellMessageV2",values:{maxItems:S.limit.amount}}):(0,Ye.jsx)(k().sA,{defaultMessage:"Get the AI add-on to update more than {maxItems} pages at once",id:"BlockPropertyValueOverlay.bulkAiAutofillButton.largeBulkFillUpsellMessage",values:{maxItems:S.limit.amount}})})]})]})})}return null}function To(e){return(0,a().K8)((()=>{var t;if(!e.isOpen)return!1;const o=null===(t=e.collectionContextStore)||void 0===t?void 0:t.collectionStore();if(!o)return!1;const n=e.property;return Boolean(o.getDatabaseType()&&o.isTypedProperty(n))}),[e])}function Oo(e){return(0,a().K8)((()=>lo(e)),[e])}function Bo(e){return(0,a().K8)((()=>ao(e)),[e])}function Ro(e){return(0,a().K8)((()=>Uo(e)),[e])}function Fo(e){return(0,a().K8)((()=>{if("form_viewer"===e.format)return!1;const t=ao(e),o=null==t?void 0:t.getParentBlockStore();return(0,K().v)({collectionStore:t,collectionViewBlockStore:o,checkNavigableAncestorLocked:!1})}),[e])}function Do(e){const t=(0,i().v3)();return(0,a().K8)((()=>Ho(e,t)),[e,t])}function Vo(e){let{overlayState:t,propertyType:o,store:r}=e;const l=Ro(t),a=x().k4p(l),s=Do(t),c=(0,i().v3)(),d=(0,n.useCallback)((e=>function(e,t,o){const n=o.state;if(!n.isOpen)return;const r=f().jw(e);V().createAndCommit({userAction:"BlockPropertyValueOverlay.handleURLValueChange",environment:t,canUndo:!0,perform:e=>{for(const o of No(n))D().R9({environment:t,store:o,value:r,transaction:e})}}),Zo(n,t,o),w().oF(t,{pastedText:e,source:"url_property"})}(e,c,r)),[c,r]),u=(0,n.useCallback)((()=>Yo(r,c)),[r,c]);let p="url";return"phone_number"===o?p="tel":"email"===o&&(p="email"),(0,Ye.jsx)(qt,{value:a,inputType:p,disabled:s,onChange:d,onDismiss:u})}function Uo(e){return e.store.getPropertyValue(e.property)}function Lo(e){return $().zP(e.format)}function Eo(e){return[e.store,...e.additionalStores]}function No(e){return Eo(e).map((t=>{const o=t.getAssociatedCollectionStore(),n=o?o.getMappedProperty(e.property):e.property;return t.getPropertyStore(n)}))}function zo(e){const t=e.state;if(!t.isOpen)return"ignore";const o=so(t);return o?o.type:"ignore"}function Ko(e,t,o){let{isFirstRender:n}=e;const r=t.state;if(!r.isOpen||!r.collectionContextStore)return;const i=ne().default.DO_NOT_USE_markLegacy("collections.block_property_value_overlay_render");ne().default.DO_NOT_USE_measureAfterNextFlushLegacy(i,{environment:o,getData:()=>{var e;return{...Q().kz(r.collectionContextStore),is_first_render:n,property_type:null===(e=so(r))||void 0===e?void 0:e.type,from:$().zP(r.format)}}})}function Wo(e,t,o,n){const r=o.state;if(r.isOpen&&r.isOpen){const o=ao(r);o&&(0,N().I)({environment:n,collectionStore:o,update:{schema:e},transaction:t})}}function Ho(e,t){if((0,oe().W)(t,e.store.id))return!0;const o=so(e),n=o&&m().$M(o)&&(0,m().om)(o);if(n&&n.auto_update_on_edit&&(0,q().O0)(t))return!0;const r=ao(e);return!(null==r||!r.isExternallyImportedAndSyncedCollection()||!(0,Z().pB)()||(0,Z().CS)()&&"read_write"===(null==o?void 0:o.synced_permissions))||(e.readOnly||(0,G().Y)(t,e.store)||(0,u().u)(e.property))}function Yo(e,t){T().VN({environment:t,blockPropertyValueOverlayStore:e})}function $o(e,t){T().tY({environment:t,blockPropertyValueOverlayStore:e})}function Qo(e,t,o){e.preventDefault(),T().XQ({environment:o,blockPropertyValueOverlayStore:t})}function qo(e,t,o){e.preventDefault(),T().gu({environment:o,blockPropertyValueOverlayStore:t})}function Xo(e,t){T().iF({environment:t,blockPropertyValueOverlayStore:e})}function Go(e,t,o,n){const i=t.state;if(!i.isOpen)return;const l=so(i);l&&("select"===l.type||"status"===l.type||"multi_select"===l.type&&n)&&r().default.afterNextFlush((()=>{e?T().iF({environment:o,blockPropertyValueOverlayStore:t}):T().tY({environment:o,blockPropertyValueOverlayStore:t})}))}function Zo(e,t,o){const n=e.store.getType(),r=e.store.getAssociatedCollectionId(),i=so(e),{collectionContextStore:l}=e;if(n&&i&&l){const n=Lo(e);(0,_().E)({environment:t,collectionContextStore:l,block_id:e.store.id,property:e.property,property_type:i.type,from:n,collection_id:r,isFromBulkActionsToolbar:$().pi(o),value_count:f().o6(e.store.getModel(),e.property,i)})}}function Jo(e,t,o){const n=o.state;n.isOpen&&V().createAndCommit({userAction:"BlockPropertyValueOverlay.handleSelectPropertyMenuUpdate",environment:t,canUndo:!0,perform:r=>{if(j().pN(e.schemaOperations)||function(e,t,o,n){const r=o.state;if(r.isOpen&&r.isOpen){const o=ao(r);if(o){const r=o.getSchema();for(const n of e)V().applyOperation({store:(0,se().Oo)(o,n.pointer),operation:n,transaction:t});const i=o.getSchema();(0,E().H)({environment:n,collectionStore:o,oldSchema:r,newSchema:i,transaction:t})}}}(e.schemaOperations,r,o,t),"selectPropertyMenuUpdateReplaceOptions"===e.type){const i=f().rK(e.options);for(const e of No(n))D().R9({environment:t,store:e,value:i,transaction:r});Zo(n,t,o)}else if("selectPropertyMenuUpdateAddOptions"===e.type){for(const t of No(n))for(const o of e.addOptions)V().applyOperation({transaction:r,store:t,operation:{path:t.path,pointer:t.pointer,command:"addSelectOptionAfter",args:{option:o}}});Zo(n,t,o)}else if("selectPropertyMenuUpdateRemoveOption"===e.type){for(const t of No(n))V().applyOperation({transaction:r,store:t,operation:{path:t.path,pointer:t.pointer,command:"removeSelectOption",args:{option:e.removeOption}}});Zo(n,t,o)}else"selectPropertyMenuUpdateSchema"===e.type||(0,A().HB)(e)}})}function en(e,t,o,n){!function(e,t,o){const n=ne().default.DO_NOT_USE_markLegacy("collections.property_overlay_typing_lag");ne().default.DO_NOT_USE_measureAfterNextFlushLegacy(n,{environment:o,getData:()=>({...Q().kz(e.collectionContextStore),property_type:t,from:$().zP(e.format)})})}(e,t,o);const{store:r,property:i,additionalStores:l}=e,a=r.getPropertyStore(i).getValue();V().createAndCommit({userAction:"BlockPropertyValueOverlay.handleTextChange",environment:o,canUndo:!0,perform:e=>{for(const t of l)D().R9({environment:o,store:t.getPropertyStore(i),value:a,transaction:e})}}),Zo(e,o,n)}},864040:(e,t,o)=>{o.d(t,{A:()=>r});o(581454),o(296540);var n=o(474848);const r=function(e,t,r){return[{key:"results",render:e=>(0,n.jsx)(o(89924).A,{...e}),items:t.map(((t,i)=>({key:t.id,render:e=>(0,n.jsx)(o(958378).A,{...e,isSubpage:0!==i,store:t,hidePath:!0}),action:n=>{let{event:i}=n;const l=o(728611).Vr(i);t instanceof o(630116).Bv&&(r&&r(t),o(857783).uK({environment:e,store:t,openInNew:l,visitType:o(211716).ig.Link,pageVisitSource:o(584262).y8.Breadcrumb}))}})))}]}},880298:(e,t,o)=>{o.d(t,{r:()=>f});var n=o(296540),r=()=>o(401497),i=()=>o(372160),l=()=>o(677195),a=()=>o(53528),s=()=>o(931075),c=()=>o(959013),d=()=>o(534177),u=()=>o(284371),p=()=>o(828180),m=o(474848);function f(e){const{verificationValue:t,fontSize:o=p().Mi}=e,f=(0,c().tz)(),y=(0,n.useMemo)((()=>s().B2(t)),[t]),h=y.type,g=(0,r().IS)((e=>({icon:{width:"expired"===h?8:14,height:"expired"===h?9:14,fill:"verified"===h?e.blueColor:e.icon.secondary},caption:{fontVariantNumeric:"normal",fontWeight:u().Wy.regular,color:e.text.primary,textTransform:"none",letterSpacing:0,marginLeft:6,marginRight:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:o,lineHeight:p().$g},expiredIconContainer:{width:14,height:14,borderRadius:6,border:"1px dashed",borderColor:e.icon.secondary,display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0}})),[h,o]);if("none"===h)return null;let v=null,b=null;const S=g.caption;switch(h){case"verified":v=(0,i().E)({...g.icon}),b=y.isIndefinite?(0,m.jsx)(c().sA,{defaultMessage:"Verified",id:"VerificationPropertyButton.verifiedIndefinitely"}):(0,m.jsx)(c().sA,{defaultMessage:"Until {date}",id:"VerificationPropertyButton.verifiedUntil",values:{date:a().OH({dateTime:y.dateTimeRange.end,intl:f})}});break;case"expired":v=(0,m.jsx)("div",{style:g.expiredIconContainer,children:(0,l().R)({...g.icon})}),b=(0,m.jsx)(c().sA,{defaultMessage:"Expired {timeFromMoment}",id:"VerificationPropertyButton.expired.text",values:{timeFromMoment:s().F7(y.dateTimeRange.end.setLocale(f.locale))}});break;default:(0,d().HB)(h)}return(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[v,(0,m.jsx)("div",{style:S,children:b})]})}},908671:(e,t,o)=>{o.d(t,{y:()=>z});var n=o(296540),r=()=>o(484714),i=()=>o(401497),l=()=>o(604995),a=()=>o(416504),s=()=>o(798880),c=()=>o(931075),d=()=>o(959013),u=()=>o(284371),p=()=>o(679924),m=()=>o(722872),f=()=>o(217429),y=()=>o(928600),h=()=>o(480095),g=()=>o(206837),v=()=>o(212050),b=()=>o(760217),S=()=>o(89924),x=o(474848);function C(e){const{onClick:t}=e,o=(0,r().v3)().device.isMobile,n=(0,i().IS)((e=>({buttonStyle:{color:e.text.uiRedPrimary,fontSize:o?u().J.UIRegular.mobile:u().J.UIRegular.desktop}})),[o]);return(0,x.jsx)(S().A,{topBorder:!0,children:(0,x.jsx)(b().A,{focused:!1,icon:(0,v().u)({width:14,marginLeft:0}),title:(0,x.jsx)(d().sA,{defaultMessage:"Remove verification",id:"VerificationPropertyOverlayMenu.removeVerificationButton"}),onClick:t,style:n.buttonStyle})})}var k=()=>o(244641),M=()=>o(56366),A=()=>o(186445),P=()=>o(972435),j=()=>o(712677),_=()=>o(573351);const w=(0,d().YK)({placeholder:{id:"VerificationExpiryMenu.pickSpecificDate.placeholder",defaultMessage:"Pick a date"}});function I(e){const{onChange:t,clearCustomDatePicker:o,verificationState:a,addExtraTopPadding:s}=e,c=(0,n.useRef)(e.today),d=(0,n.useRef)(e.today.plus({days:1})),[u,p]=(0,n.useState)(!1),m=(0,M().O$)(A().XX),f="verified"!==a.type||a.isIndefinite?void 0:a.dateTimeRange.end,y=(0,r().Y0)().isMobile,h=(0,i().IS)((e=>({containerStyle:{paddingTop:s?12:4,paddingBottom:12},mobileContainerStyle:{paddingBottom:10},calendar:y?{padding:"16px 14px 16px",borderBottom:`1px solid ${e.regularDividerColor}`,background:e.popoverBackground,marginTop:27,boxShadow:`0 -1px 0 ${e.regularDividerColor}`}:{},input:y?{padding:"16px 0",marginTop:0}:{}})),[s,y]);return(0,x.jsxs)(S().A,{mobileStyle:h.mobileContainerStyle,style:h.containerStyle,disableMobilePadding:!0,children:[(0,x.jsx)(j().A,{placeholder:P().A.formatMessage(w.placeholder),focused:u,value:"verified"!==e.verificationState.type||e.verificationState.isIndefinite?void 0:l().lN(e.verificationState.dateTimeRange.end),onUpdate:e=>{if(e.error)return;const n=e.value&&l().Dz(e.value);n?t({range:{start:c.current,end:n.start}}):o()},onFocus:()=>p(!0),onBlur:()=>p(!1),onClearButtonClick:o,hideClearButton:!0,style:h.input}),(0,x.jsx)("div",{style:h.calendar,children:(0,x.jsx)(_().A,{firstDayOfWeek:m,value:(null==f?void 0:f.toMillis())||d.current.toMillis(),selectValue:Boolean(f),onChange:e=>{t({range:{start:c.current,end:k().c9.fromMillis(e)},option:"custom"})},disabledDays:{before:new Date(d.current.toMillis())},className:"notion-date-property-menu"})})]})}o(581454);var T=()=>o(599987),O=()=>o(563884);const B=(0,o(340498).wt)("infinity",{viewBox:"0 0 40 19",svg:(0,x.jsx)("path",{d:"M0.297852 9.42383C0.297852 11.2695 0.65918 12.876 1.38184 14.2432C2.11426 15.6104 3.13477 16.6748 4.44336 17.4365C5.75195 18.1885 7.26562 18.5645 8.98438 18.5645C10.3613 18.5645 11.6504 18.2715 12.8516 17.6855C14.0625 17.0898 15.2881 16.1963 16.5283 15.0049L20 11.6504L23.4717 15.0049C24.7119 16.1963 25.9375 17.0898 27.1484 17.6855C28.3594 18.2715 29.6484 18.5645 31.0156 18.5645C32.7344 18.5645 34.248 18.1885 35.5566 17.4365C36.8652 16.6748 37.8809 15.6104 38.6035 14.2432C39.3359 12.876 39.7021 11.2695 39.7021 9.42383C39.7021 7.57812 39.3359 5.97168 38.6035 4.60449C37.8809 3.2373 36.8652 2.17773 35.5566 1.42578C34.248 0.664062 32.7344 0.283203 31.0156 0.283203C29.6484 0.283203 28.3594 0.581055 27.1484 1.17676C25.9375 1.7627 24.7119 2.65137 23.4717 3.84277L20 7.19727L16.5283 3.84277C15.2881 2.65137 14.0625 1.7627 12.8516 1.17676C11.6504 0.581055 10.3613 0.283203 8.98438 0.283203C7.26562 0.283203 5.75195 0.664062 4.44336 1.42578C3.13477 2.17773 2.11426 3.2373 1.38184 4.60449C0.65918 5.97168 0.297852 7.57812 0.297852 9.42383ZM3.5791 9.42383C3.5791 8.23242 3.80371 7.19727 4.25293 6.31836C4.71191 5.43945 5.34668 4.76074 6.15723 4.28223C6.96777 3.80371 7.91016 3.56445 8.98438 3.56445C9.88281 3.56445 10.752 3.78418 11.5918 4.22363C12.4316 4.66309 13.3154 5.3125 14.2432 6.17188L17.7002 9.42383L14.2285 12.6758C13.3105 13.5352 12.4316 14.1846 11.5918 14.624C10.752 15.0635 9.88281 15.2832 8.98438 15.2832C7.91016 15.2832 6.96777 15.0439 6.15723 14.5654C5.34668 14.0869 4.71191 13.4082 4.25293 12.5293C3.80371 11.6406 3.5791 10.6055 3.5791 9.42383ZM22.2998 9.42383L25.7568 6.17188C26.6846 5.3125 27.5684 4.66309 28.4082 4.22363C29.248 3.78418 30.1172 3.56445 31.0156 3.56445C32.0898 3.56445 33.0322 3.80371 33.8428 4.28223C34.6533 4.76074 35.2832 5.43945 35.7324 6.31836C36.1914 7.19727 36.4209 8.23242 36.4209 9.42383C36.4209 10.6055 36.1914 11.6406 35.7324 12.5293C35.2832 13.4082 34.6533 14.0869 33.8428 14.5654C33.0322 15.0439 32.0898 15.2832 31.0156 15.2832C30.1172 15.2832 29.248 15.0635 28.4082 14.624C27.5684 14.1846 26.6895 13.5352 25.7715 12.6758L22.2998 9.42383Z"})});var R=()=>o(53528),F=()=>o(991249),D=()=>o(645109),V=()=>o(118849),U=()=>o(704152);function L(e){const{verificationState:t,onChange:o,onCustomDateClick:l,showTitle:a,showUpsell:s,isEligibleForBusinessTrial:p}=e,m=(0,r().v3)(),f=(0,d().tz)(),y=m.device.isMobile,h=(0,n.useRef)(e.today),g=(0,i().IS)((e=>({title:{fontSize:y?u().J.UIRegular.mobile:u().J.UIRegular.desktop,color:e.text.primary},disabledTitle:{color:e.text.secondary},disabledCaption:{color:e.text.tertiary},clockIconStyle:{width:14,marginLeft:0,marginTop:2},upsellContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 12px",gap:8,border:`1px solid ${e.regularDividerColor}`,borderRadius:6,margin:"8px 8px 4px",height:36},upsellText:{fontSize:14,color:e.text.primary,fontWeight:u().Wy.medium,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",flex:1},disabledButton:{color:e.text.tertiary}})),[y]),v="expired"===t.type||"none"===t.type?(0,x.jsx)(d().sA,{defaultMessage:"Verify page",id:"VerificationExpiryPicker.verify.header"}):(0,x.jsx)(d().sA,{defaultMessage:"Reverify page",id:"VerificationExpiryPicker.reverify.header"}),C="verified"===t.type&&t.isIndefinite,k="verified"===t.type&&!t.isIndefinite&&t.dateTimeRange.end,M=Boolean(s),A="verification_upsell_item_page_entrypoint",P=(0,n.useCallback)((()=>{(0,F().K)(m,{from:A,upsell:{type:"product",product:"business",limit:{type:"none"},trialability:"none"}})}),[m,A]);return(0,x.jsxs)("div",{children:[!p&&s&&(0,x.jsxs)(U().A,{style:g.upsellContainer,onClick:P,children:[(0,x.jsx)("div",{style:g.upsellText,children:(0,x.jsx)(d().sA,{defaultMessage:"Upgrade to unlock",id:"VerificationExpiryPicker.upsellExperience"})}),(0,x.jsx)(V().A,{subscriptionTier:"business",analyticsName:A})]}),p&&(0,x.jsx)(D().c,{openedFrom:"business_trial_verify_pages_upsell",styleOverrides:{margin:"12px 12px 0px 12px"}}),(0,x.jsxs)(S().A,{title:a&&v,children:[c().yj.map((e=>{const t=k&&c().gj({start:h.current,end:k})===e;return(0,x.jsx)(b().A,{buttonStyle:M?g.disabledButton:void 0,disabled:M,focused:!1,icon:(0,T().P)(g.clockIconStyle),inline:!1,title:(0,x.jsx)("span",{style:M?g.disabledTitle:g.title,children:(0,x.jsx)(d().sA,{defaultMessage:"For {numDays} days",id:"VerificationExpiryMenu.preset.title",values:{numDays:e}})}),caption:f.formatMessage({defaultMessage:"Until {date}",id:"VerificationExpiryMenu.preset.subtitle"},{date:R().OH({dateTime:c().RD(e,h.current).end,intl:f,shortenDateAndRange:!0})}),captionStyle:M?g.disabledCaption:void 0,isChecked:Boolean(t),onClick:()=>{return t=e,void o({range:{start:h.current,end:h.current.plus({days:t})},option:`${t}d`});var t}},e)})),(0,x.jsx)(b().A,{buttonStyle:M?g.disabledButton:void 0,disabled:M,focused:!1,icon:B({width:14,marginLeft:0,marginTop:1}),inline:!1,title:(0,x.jsx)("span",{style:M?g.disabledTitle:g.title,children:(0,x.jsx)(d().sA,{defaultMessage:"Indefinitely",id:"VerificationExpiryPicker.option.indefinitely"})}),onClick:()=>o({option:"indefinite"}),isChecked:C},"indefinite"),(0,x.jsx)(b().A,{buttonStyle:M?g.disabledButton:void 0,disabled:M,focused:!1,icon:(0,O().k)({width:14,marginLeft:0}),title:(0,x.jsx)("span",{style:M?g.disabledTitle:g.title,children:(0,x.jsx)(d().sA,{defaultMessage:"Pick a date",id:"VerificationExpiryPicker.option.customDate"})}),onClick:l},"custom")]})]})}var E=()=>o(8802),N=()=>o(880298);function z(e){const{verificationValue:t,getRecordModel:o,onChange:p,blockId:f,propertyName:v,onClose:b,showTitle:S,showRemoveVerificationButton:k,showVerificationFooter:M,showCurrentStatusHeader:A,showCustomHeader:P,customHeader:j,showUpsell:_,entrypoint:w,isEligibleForBusinessTrial:T}=e,O=(0,r().v3)(),B=(0,r().Y0)(),R=(0,d().tz)(),[F,D]=(0,n.useState)(!1),V=(0,n.useMemo)((()=>c().B2(t)),[t]),U="verified"===V.type,z=(0,n.useRef)(l().ah((0,a().P)())),W=(0,n.useRef)(l().ah((0,a().P)()).plus({days:1})),H=e=>{var t;const{range:o,option:n}=e,r=null===(t=O.currentUser)||void 0===t?void 0:t.id;if(!r)return;if(null!=o&&o.end&&o.end.toMillis()<W.current.toMillis())return;const i={table:s().oo,id:r},a=o?l().C6.toPersistedDateTimeRange(o):l().C6.toPersistedDateTime(z.current.toMillis()),c="none"===V.type?"add":"update";K(O,{action:c,verification_page_id:f,verification_expiry:o?o.end.toMillis():void 0}),p({value:[i,a],metadata:{action:c,entrypoint:w,expiration:n,expiration_date:o?o.end.toMillis():void 0}})},Y=(0,i().IS)((e=>({footerStyle:{borderTop:`1px solid ${e.regularDividerColor}`},headerStyle:{padding:B.isMobile?10:7,paddingLeft:B.isMobile?20:7,background:B.isMobile?e.popoverBackground:e.tokenInputMenuItemBackground,display:"flex",alignItems:"center",borderBottom:`1px solid ${e.regularDividerColor}`}})),[B.isMobile]);let $={menuType:m().gu.Popup,footer:M&&"none"!==V.type&&!F&&(0,x.jsx)("div",{style:Y.footerStyle,children:(0,x.jsx)(E().d,{lastVerifiedDate:U&&V.isIndefinite?V.startDateTime:V.dateTimeRange.start,getRecordModel:o,actorPointer:V.actorPointer})})};B.isMobile&&($={...$,title:v,menuType:m().gu.Modal,right:(0,x.jsx)(h().DoneMenuText,{}),onClickRight:F?()=>D(!1):b});return(0,x.jsxs)(x.Fragment,{children:[P&&j&&!F?j:P&&F?(0,x.jsx)(g().o,{label:R.formatMessage({id:"verificationPropertyOverlay.verificationMenuHeader.pickDate",defaultMessage:"Pick a date"}),onClickBackButton:()=>D(!1),onClose:()=>b(),width:265,showBottomBorder:!1}):null,(0,x.jsx)(y().A,{...$,header:!F&&A&&"none"!==V.type&&(0,x.jsx)("div",{style:Y.headerStyle,children:(0,x.jsx)(N().r,{verificationValue:t,fontSize:B.isMobile?u().J.UIRegular.mobile:void 0})}),children:F?(0,x.jsx)(I,{today:z.current,verificationState:V,onChange:e=>H(e),clearCustomDatePicker:()=>D(!1),addExtraTopPadding:!P}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(L,{today:z.current,verificationState:V,onChange:e=>H(e),onCustomDateClick:()=>D(!0),showTitle:S,showUpsell:_,isEligibleForBusinessTrial:T}),k&&(U||"expired"===V.type)&&(0,x.jsx)(C,{onClick:()=>{K(O,{action:"remove",verification_page_id:f}),p({value:void 0,metadata:{action:"remove",entrypoint:w}})}})]})})]})}function K(e,t){(0,p().v)(e,"verification_update",t),f().default.logEvent("verification_update",t.action)}},948352:(e,t,o)=>{o.d(t,{M:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("templatesColor",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z",fill:"#3C9ED7"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z",fill:"#E7595E"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z",fill:"#F5BC4E"})]})})},986229:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().Store{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"editor",table:o(179034).ev,flowId:void 0,inputFocus:"invitee",emailMessage:""}}}const r=n}}]);