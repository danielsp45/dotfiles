"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[28464,36009,82122],{69447:(e,t,i)=>{i.d(t,{Lq:()=>o,WK:()=>r,nh:()=>n});const o=40,n=48,r=60},129546:(e,t,i)=>{i.d(t,{Xc:()=>u,Yc:()=>g,rL:()=>p});i(16280);var o=()=>i(604995),n=()=>i(161479),r=()=>i(496603),s=()=>i(12974),a=()=>i(765957),l=()=>i(449506);const d=20,c=20;async function u(e,t){const{store:i,activityIds:o,spaceId:a,filterActivityTypes:u,filterDateRange:p,navigableBlockId:g,collectionId:h,authorId:f,source:m}=t,y=r().$1(o),S=(0,s().u$)(),x="person_profile"===m&&f&&S?await l().callApi({eventName:"getRecentActivityFeed",environment:e,data:{spaceId:a,authorId:f,limit:c}}):await l().callApi({eventName:"getActivityLog",environment:e,data:{spaceId:a,navigableBlock:g?{id:g,spaceId:(0,n().e)(void 0)}:void 0,collection:h?{id:h,spaceId:(0,n().e)(void 0)}:void 0,endingBeforeId:y,limit:d,activityTypes:u,...v(p),authorId:f}});if("failed"===x.type)throw x.error;const b=x.data.activityIds;i.update((e=>({...e,shouldLoadNewerActivities:!1,activityIds:b.concat(o)})))}async function p(e,t){const{store:i,activityIds:o,spaceId:a,filterActivityTypes:u,filterDateRange:p,navigableBlockId:g,collectionId:h,authorId:f,source:m}=t,y=r().HV(o),S=(0,s().u$)(),x="person_profile"===m&&f&&S?await l().callApi({eventName:"getRecentActivityFeed",environment:e,data:{spaceId:a,startingAfterId:y,authorId:f,limit:c}}):await l().callApi({eventName:"getActivityLog",environment:e,data:{spaceId:a,navigableBlock:g?{id:g,spaceId:(0,n().e)(void 0)}:void 0,collection:h?{id:h,spaceId:(0,n().e)(void 0)}:void 0,startingAfterId:y,limit:d,activityTypes:u,...v(p),authorId:f}});if("failed"===x.type)throw x.error;const b=x.data.activityIds;i.update((e=>({...e,shouldLoadOlderActivities:!1,activityIds:o.concat(b),hasOlderActivities:b.length>0})))}async function g(e,t){var i;const{store:o,activityIds:n}=t,r=null===(i=a().default.state.currentSpaceViewStore)||void 0===i?void 0:i.id;if(!r)throw new Error("No space view id");const s=await l().callApi({eventName:"getActivityFeedForHomePrototypeDoNotUse",environment:e,data:{spaceViewId:r}});if("failed"===s.type)throw s.error;const d=s.data.activityIds;o.update((e=>({...e,shouldLoadOlderActivities:!1,activityIds:n.concat(d),hasOlderActivities:!1})))}function v(e){var t,i;const n=null!==(t=e.ending)&&void 0!==t&&t.start_date?o().C6.isoToUnixMs(e.ending.start_date):void 0;return{startingAfterTimeMs:null!==(i=e.starting)&&void 0!==i&&i.start_date?o().C6.isoToUnixMs(e.starting.start_date):void 0,endingBeforeTimeMs:n?o().K1({date:n,daysToAdd:1}):void 0}}},131533:(e,t,i)=>{i.d(t,{A:()=>Z});i(581454);var o=i(296540),n=()=>i(484714),r=()=>i(56366),s=()=>i(401497),a=()=>i(187174),l=()=>i(563884),d=()=>i(281067),c=()=>i(921997),u=()=>i(801634),p=()=>i(959013),g=()=>i(496603),v=()=>i(720665),h=()=>i(129546),f=()=>i(848259),m=()=>i(675700),y=()=>i(299545),S=()=>i(37433),x=()=>i(721273),b=()=>i(963589),I=()=>i(941541),A=()=>i(423817),w=()=>i(155959),k=()=>i(224239),j=()=>i(765957),C=()=>i(463830),M=()=>i(227440);class T extends(()=>i(757695))().Store{getInitialState(){return{selectedItems:[]}}}const _=T;var L=()=>i(606846),R=(i(944114),()=>i(17022)),B=(i(16280),i(898992),i(354520),()=>i(397682)),P=i(474848);const D=function(e){const{batch:t,rootStore:a,tabArgs:l,isLast:d}=e,c=(0,n().v3)(),u=(0,p().tz)(),g=(0,s().IS)((e=>({details:{color:e.text.secondary,fontSize:12,marginLeft:15,marginTop:9,marginBottom:10},hr:{border:"none",height:1,backgroundColor:e.tableDividerColor}})),[]),v=(0,o.useMemo)((()=>R().e.withListenerIgnored((()=>t.activities.map((e=>{if("block-edited"===e.type)return{type:"block-edited",end_time:parseInt(e.end_time),edits:(0,i(191278).E)(e.getEdits())};if("commented"===e.type){const t=a.getRecordStore(a,{table:i(197959).$Y,id:e.discussion_id,spaceId:e.space_id});if(!t.isDefined())return;const o=(0,B().s6)(e.getEdits(),l.source,t);if(!(0,B().Aj)(o)||0===o.length)return;return{type:"comment-created",end_time:parseInt(e.end_time),edits:o,discussion_id:e.discussion_id,space_id:e.space_id}}throw new Error("Unsupported activity type")})).filter(i(534177).O9)))),[t,a,l.source]),h=(0,r().K8)((()=>{if(0===v.length)return;const e=v[0].edits[0];return e&&i(630116).Bv.createChildStore(a,{table:i(179034).ev,id:e.navigable_block_id})}),[v,a]),f=(0,r().K8)((()=>h&&(0,i(71304).Qe)(h,u,c,!0)),[c,u,h]);return 0!==v.length&&h?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(i(302925).Ay,{batch:v,rootStore:a,activityTime:v[0].end_time,source:l.source,pageTitleElem:(0,P.jsx)(i(423213).A,{titledRecordStore:h,activity:t.activities[0],tabArgs:l,getRecordModel:a.getRecordModel}),currentPageTitle:f??"No page title"}),(0,P.jsx)("details",{style:g.details,open:!1,children:t.activities.map((e=>(0,P.jsx)(m().h,{activity:e,rootStore:a,tabArgs:l,isLast:d},e.id)))}),(0,P.jsx)("hr",{style:g.hr})]}):null};const H=function(e){let{activities:t,rootStore:i}=e;const n=(0,o.useMemo)((()=>R().e.withListenerIgnored((()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;const i=[],o={};for(const n of e){const e=n.navigable_block_id;if(!e)continue;if(!o[e]){o[e]=[n];continue}const r=o[e][o[e].length-1];Math.abs((Number(r.end_time)-parseInt(n.end_time))/36e5)<=t?o[e].push(n):(o[e].sort(((e,t)=>parseInt(t.end_time)-parseInt(e.end_time))),i.push({page:e,activities:o[e],latest_activity_end_time:parseInt(o[e][0].end_time)}),o[e]=[n])}for(const n in o)o[n].length>0&&(o[n].sort(((e,t)=>parseInt(t.end_time)-parseInt(e.end_time))),i.push({page:n,activities:o[n],latest_activity_end_time:parseInt(o[n][0].end_time)}));return i.sort(((e,t)=>t.latest_activity_end_time-e.latest_activity_end_time)),i}(t).slice(0,20)))),[t]);return(0,P.jsx)("section",{role:"feed","aria-label":"Recent updates",children:n.map(((e,t)=>(0,P.jsx)(D,{batch:e,rootStore:i,isLast:t===e.activities.length-1,tabArgs:{tab:"homeTile",source:"home_tile"}},t)))})};var N=()=>i(331542),O=()=>i(228927),U=()=>i(125565),K=()=>i(575695),V=()=>i(760217),E=()=>i(297401),F=()=>i(821879);const W=function(e){let{mode:t,title:i,onChange:n,disabled:s,focused:a,onMenuDismiss:l,items:d,addItemLabel:c,tokenInputPlaceholder:u,resultSectionTitle:p,componentDebugName:g,icon:v,getItemLabel:h,options:f,store:m}=e;const y=(0,r().uB)(m,_),S=(0,r().O$)(y);return(0,o.useEffect)((()=>{y.setState({selectedItems:d})}),[d,y]),(0,P.jsx)(F().A,{mode:t,hasItemsSelected:S.selectedItems.length>0,title:i,icon:v,items:d,onChange:e=>{n(e)},disabled:s,focused:a,renderFilter:(e,t)=>(0,P.jsx)(X,{getItemLabel:h,item:e,args:t}),renderToken:e=>(0,P.jsx)($,{item:e}),renderItemForSummary:e=>(0,P.jsx)(z,{item:e}),addItemLabel:c,labelText:{title:i,tokenInputPlaceholder:u,resultSectionTitle:p,componentDebugName:g},performRequest:e=>function(e,t){let{query:i}=e;return Promise.resolve(t.filter((e=>e.includes(i))))}(e,f),renderResultMenuItem:(e,i)=>(0,P.jsx)(Y,{getItemLabel:h,mode:t,store:y,item:e,props:i}),onMenuDismiss:l})};function z(e){let{item:t}=e;return(0,P.jsx)(P.Fragment,{children:`hello${t}`})}function $(e){let{item:t}=e;return(0,P.jsx)(P.Fragment,{children:t})}function X(e){let{item:t,args:i,getItemLabel:o}=e;const{disabled:r,onRemove:s,onClick:a}=i,l=function(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{marginRight:4}}}((0,n().v3)()),d=(0,P.jsx)(E().A,{disabled:r,onClick:s});return(0,P.jsx)(V().A,{title:(null==o?void 0:o(t))||t,disabled:r,focused:!1,right:d,style:l.menuItem,desktopTitleStyle:l.menuItemTitle,onClick:a})}function Y(e){let{item:t,props:i,getItemLabel:n,mode:s,store:a}=e;const l=(0,r().uB)(a,_),d=(0,r().K8)((()=>l.state.selectedItems),[l]);return(0,o.createElement)(V().A,{...i,key:t,title:(null==n?void 0:n(t))||t,isChecked:s===F().C.Pill&&d.includes(t)})}function Z(e){var t;const{spaceId:i,navigableBlockStore:l,collectionId:d,authorId:u,source:f}=e,T=null==l?void 0:l.id,_=(0,n().v3)(),R=(0,r().uB)(void 0,k().L),B=(0,r().uB)(void 0,C().A),D=(0,s().IS)((e=>({placeholderContent:Q(_,e),banner:{padding:"12px 10px"}})),[_]),N=(0,o.useMemo)((()=>g().nF((e=>function(e,t){t.update((e=>({...e,shouldLoadNewerActivities:!0})))}(0,R)),1e3)),[R]),K=(0,o.useMemo)((()=>v().Hg(N)),[N]);(0,o.useEffect)((()=>{let e,t,i;if(T){const t=(0,c().O$)(T);e=I().Ay.addListener(t,void 0,K,void 0,_)}if(d){const e=(0,c().zB)(d);t=I().Ay.addListener(e,void 0,K,void 0,_)}if(u){const e=(0,c().Ii)(u);i=I().Ay.addListener(e,void 0,K,void 0,_)}return()=>{e&&I().Ay.removeListener(e,_),t&&I().Ay.removeListener(t,_),i&&I().Ay.removeListener(i,_)}}),[d,_,K,T,u]);const V=(0,r().O$)(M().e),E=(0,r().K8)((()=>{const e=R.state;return 0===e.filterActivityTypes.length&&void 0===e.filterDateRange.ending&&void 0===e.filterDateRange.starting}),[R]),F=(0,r().K8)(S().XL,[]),W=(0,b().X)("updates_ai"),{currentUserStore:z,currentSpaceStore:$}=(0,r().K8)((()=>{const{currentUserStore:e,currentSpaceStore:t}=j().default.state;return{currentUserStore:e,currentSpaceStore:t}}),[]),{shouldLoadOlderActivities:X,shouldLoadNewerActivities:Y,filterActivityTypes:Z,filterDateRange:G,activityIds:ie,hasOlderActivities:oe}=(0,r().K8)((()=>{const{shouldLoadOlderActivities:e,shouldLoadNewerActivities:t,filterActivityTypes:i,filterDateRange:o,activityIds:n,hasOlderActivities:r}=R.state;return{shouldLoadOlderActivities:e,shouldLoadNewerActivities:t,filterActivityTypes:i,filterDateRange:o,activityIds:n,hasOlderActivities:r}}),[R]),[ne]=(0,a().Yb)((async()=>{if(!V||!z||!$)return;const e=L().Ay.startLoading();Y?await h().Xc(_,{store:R,activityIds:ie,spaceId:i,filterActivityTypes:Z,filterDateRange:G,navigableBlockId:T,collectionId:d,authorId:u,source:f}):X&&oe&&("home_tile"===f?await h().Yc(_,{store:R,activityIds:ie,spaceId:i,filterActivityTypes:Z,filterDateRange:G,navigableBlockId:T,collectionId:d,source:f}):await h().rL(_,{store:R,activityIds:ie,spaceId:i,filterActivityTypes:Z,filterDateRange:G,navigableBlockId:T,collectionId:d,authorId:u,source:f})),L().Ay.endLoading(e)}),[ie,R,d,$,z,_,Z,G,oe,V,T,Y,X,i,f,u]),re=ne.error,se="resolved"===ne.status,ae=(0,r().K8)((()=>{if(!z)return[];const e=z.id,t=(0,w().T)("supportsNativeHome"),o={spaceId:i,userId:e,navigableBlockId:T,collectionId:d,filterDateRange:G,filterActivityTypes:Z,authorId:u},n=t&&0===ie.length&&!se?x().oV(o):ie;return t&&se&&x().tK(o,ie),function(e){return g().oE(e.map((e=>function(e){const{currentUserStore:t,currentSpaceStore:i}=j().default.state;if(!t||!i)return;const o=(0,y().jA)(i,e,i.id),n=o.getModel();return n&&!n.invalid?n:null}(e))))}(n)}),[ie,d,z,Z,G,u,T,se,i]);if(!V)return(0,P.jsx)(ee,{});if(!z||!$)return null;const le=0===ae.length&&!oe&&se,de=$;if(re)return(0,P.jsx)("div",{style:D.placeholderContent,children:(0,P.jsx)(p().sA,{defaultMessage:"Something went wrong.",id:"activityUpdate.unknownErrorLoadingActivities.message"})});if(0===ae.length&&!se)return(0,P.jsxs)("div",{children:[F?(0,P.jsx)(q,{collectionId:d,source:f,activityUpdatesStore:R,filterPopupStore:B}):void 0,(0,P.jsx)(A().J,{areaHeight:window.innerHeight})]});const ce=(0,P.jsx)(U().A,{isSecondaryColor:!0,isMultiline:!0,children:(0,P.jsxs)("div",{style:{paddingTop:"15px",paddingRight:"10px",marginBottom:"-8px",paddingLeft:"10px"},children:["We're testing out AI summaries of updates on suggested pages. AI can make mistakes. Please leave feedback ",(0,P.jsx)("a",{href:"https://dev.notion.so/notion/Home-feed-with-AI-summary-feedback-doc-fffb35e6e67f8083b14ecc64c6ed465d",children:"here"}),"!"]})}),ue=(0,P.jsxs)("div",{style:{...D.banner,marginTop:"-10px"},children:["Did you read to the end? Please let us know ",(0,P.jsx)("a",{href:"https://dev.notion.so/notion/Home-feed-with-AI-summary-feedback-doc-fffb35e6e67f8083b14ecc64c6ed465d",children:"here"}),", particularly if anything was helpful or unhelpful!"]});return(0,P.jsxs)("div",{children:[W&&"home_tile"===f?ce:void 0,F?(0,P.jsx)(q,{collectionId:d,source:f,activityUpdatesStore:R,filterPopupStore:B}):void 0,(0,P.jsxs)("div",{style:le?D.placeholderContent:J(_,f),className:le?"":"notranslate",children:[le?null===(t=e.empty)||void 0===t?void 0:t.call(e,{hasFiltersOn:!E}):null,W&&"home_tile"===f?(0,P.jsx)(H,{activities:ae,rootStore:de}):(0,P.jsx)("section",{role:"feed",children:ae.map(((e,t,i)=>{const o=i.length-1===t,n="notifications_tab"===f?{tab:"all",source:f}:"updates_sidebar"===f?{tab:"pageUpdatesSidebar",source:f}:"person_profile"===f?{tab:"personProfile",source:f}:{tab:"homeTile",source:f};return(0,P.jsx)(m().h,{activity:e,rootStore:de,isLast:o,tabArgs:n},e.id)}))}),(0,P.jsx)(O().A,{onChange:e=>{e<200&&se&&!X&&oe&&(E||ae.length>0)&&R.update((e=>({...e,shouldLoadOlderActivities:!0})))},children:!se&&oe?(0,P.jsx)(te,{isPaginated:!0}):null})]}),W?"home_tile"===f?(0,P.jsx)(U().A,{isSecondaryColor:!0,isMultiline:!0,children:ue}):null:void 0]})}function q(e){const{collectionId:t,source:i,activityUpdatesStore:o,filterPopupStore:n}=e,{currentUserStore:s,currentSpaceStore:a}=(0,r().K8)((()=>{const{currentUserStore:e,currentSpaceStore:t}=j().default.state;return{currentUserStore:e,currentSpaceStore:t}}),[]),l=(0,r().K8)((()=>o.state.filterActivityTypes.length>0||o.state.filterDateRange.ending||o.state.filterDateRange.starting),[o]);return s&&a?(0,P.jsxs)("div",{style:{display:"flex",flexDirection:"row",padding:"12px 10px",width:"100%",gap:6},children:[(0,P.jsx)(G,{collectionId:t,source:i,filterPopupStore:n,activityUpdatesStore:o}),(0,P.jsx)(se,{source:e.source,activityUpdatesStore:o,filterPopupStore:n}),l?(0,P.jsx)(re,{source:e.source,activityUpdatesStore:o}):void 0]}):null}function G(e){const{collectionId:t,source:i,activityUpdatesStore:s,filterPopupStore:a}=e,l=(0,p().tz)(),c=(0,n().v3)(),g=t?u().Fv:u().IP,v=(0,r().uB)(void 0,_),h=(0,r().K8)((()=>s.state.filterActivityTypes),[s]),f=(0,o.useCallback)((()=>{oe(a)}),[a]);return(0,P.jsx)(W,{store:v,focused:!1,icon:d().v,options:[...g].sort(),items:h,mode:F().C.Pill,title:(0,P.jsx)(p().sA,{id:"activityUpdates.filterMenu.byType.title",defaultMessage:"Activity type"}),tokenInputPlaceholder:l.formatMessage({id:"activityUpdates.filterMenu.byType.search",defaultMessage:"Search for a type"}),resultSectionTitle:l.formatMessage({id:"activityUpdates.filterMenu.byType.resultSectionTitle",defaultMessage:"Activity Types"}),addItemLabel:l.formatMessage({id:"activityUpdates.filterMenu.byType.addItemLabel",defaultMessage:"Add an activity type"}),componentDebugName:"ActivityUpdatesSearchEditTypesFilter",onChange:e=>ne((()=>s.update((t=>({...t,filterActivityTypes:e,activityIds:[],hasOlderActivities:!0,shouldLoadOlderActivities:!0,shouldLoadNewerActivities:!1})))),c,i,s),onMenuDismiss:f,getItemLabel:e=>e.split("-").map((e=>e.replace(/(^.)/,(e=>e.toUpperCase())))).join(" ")})}function J(e,t){return{minHeight:e.device.isMobile?void 0:"75vh",padding:t&&"home_tile"===t?"10px":void 0}}function Q(e,t){const{device:i}=e;return{...J(e),paddingTop:i.isMobile?32:void 0,paddingBottom:i.isMobile?32:void 0,minHeight:i.isMobile?void 0:220,display:"flex",textAlign:"center",alignItems:"center",justifyContent:"center",fontSize:14,color:t.text.secondary,flexDirection:"column",flex:"1 1 0%"}}function ee(){const e=(0,n().v3)(),t=(0,s().IS)((t=>({offlineMessage:Q(e,t)})),[e]);return(0,P.jsx)("div",{style:t.offlineMessage,children:(0,P.jsx)(p().sA,{defaultMessage:"Please go online to view updates.",id:"activityUpdates.offlineMessage"})})}function te(e){let{isPaginated:t}=e;const i=(0,n().v3)(),o=(0,s().IS)((e=>({spinner:{...Q(i,e),minHeight:t?64:220}})),[i,t]);return(0,P.jsx)("div",{style:o.spinner,children:(0,P.jsx)(N().A,{})})}function ie(e){var t,i;const{filterActivityTypes:o,filterDateRange:n}=e.state;return{activityTypes:o,dateRange:{start:null===(t=n.starting)||void 0===t?void 0:t.start_date,end:null===(i=n.ending)||void 0===i?void 0:i.start_date}}}function oe(e){e.setState({...e.state,open:!1})}function ne(e,t,i,o){const n=ie(o);e();const r=ie(o);f().Xl({environment:t,activityUpdatesSource:i,filters:r,prevFilters:n})}function re(e){let{source:t,activityUpdatesStore:i}=e;const o=(0,n().v3)(),r=(0,s().IS)((e=>({clearButton:{flexGrow:1,textAlign:"right",cursor:"pointer",fontSize:14,color:e.text.secondary,marginRight:8}})),[]);return(0,P.jsx)("div",{style:r.clearButton,onClick:()=>ne((()=>i.reset()),o,t,i),children:(0,P.jsx)(p().sA,{defaultMessage:"Clear",id:"activityUpdates.clearFilters"})})}function se(e){let{source:t,activityUpdatesStore:i,filterPopupStore:s}=e;const a=(0,n().v3)(),d=(0,o.useCallback)((()=>oe(s)),[s]),c=(0,r().K8)((()=>i.state.filterDateRange),[i]);return(0,P.jsx)(K().A,{mode:F().C.Pill,focused:!1,showButtons:!0,title:(0,P.jsx)(p().sA,{id:"activityUpdates.filterMenu.byDate",defaultMessage:"Date Range"}),icon:l().k,value:c,onMenuDismiss:d,onChange:e=>ne((()=>i.update((t=>({...t,filterDateRange:e,activityIds:[],hasOlderActivities:!0,shouldLoadOlderActivities:!0})))),a,t,i)})}},149375:(e,t,i)=>{i.d(t,{v:()=>n});i(296540);var o=i(474848);const n=(0,i(340498).wt)("arrowLeftThick",{viewBox:"0 0 16 16",directional:!0,svg:(0,o.jsx)("path",{d:"M1.54004 8.05762C1.54004 8.2627 1.62891 8.46094 1.78613 8.61133L6.29102 13.1162C6.45508 13.2734 6.63965 13.3486 6.82422 13.3486C7.25488 13.3486 7.5625 13.041 7.5625 12.6309C7.5625 12.4189 7.48047 12.2344 7.34375 12.1045L5.8125 10.5527L3.78906 8.70703L5.38867 8.80273H13.7012C14.1455 8.80273 14.46 8.49512 14.46 8.05762C14.46 7.61328 14.1455 7.3125 13.7012 7.3125H5.38867L3.7959 7.4082L5.8125 5.5625L7.34375 4.01074C7.48047 3.87402 7.5625 3.68945 7.5625 3.47754C7.5625 3.06738 7.25488 2.7666 6.82422 2.7666C6.63965 2.7666 6.45508 2.83496 6.27734 3.00586L1.78613 7.50391C1.62891 7.64746 1.54004 7.85254 1.54004 8.05762Z"})})},175116:(e,t,i)=>{i.d(t,{ET:()=>l,Ks:()=>d,RI:()=>a,p2:()=>s});i(16280);var o=i(296540);const n="collectionContextStore",r=(0,i(446943).C)({displayName:n,legacyContextKey:n,modernContextDefaultValue:void 0}),s=r.context,a=r.Provider;function l(){const e=o.useContext(s);if(void 0===e)throw new Error(`No context provided: ${n}`);return e}function d(){return o.useContext(s)}},224239:(e,t,i)=>{i.d(t,{L:()=>o});class o extends(()=>i(757695))().Store{getInitialState(){return{activityIds:[],shouldLoadNewerActivities:!1,shouldLoadOlderActivities:!0,hasOlderActivities:!0,filterActivityTypes:[],filterDateRange:{starting:void 0,ending:void 0}}}}},255824:(e,t,i)=>{i.d(t,{a:()=>r});var o=()=>i(56366);const n=new(i(496506).ComputedStore)((()=>i(263711).g.state.isOpen),{debugName:"IsInPageViewModeStore"});function r(){return(0,o().O$)(n)}},256863:(e,t,i)=>{i.d(t,{A:()=>s});i(296540);var o=()=>i(56366),n=()=>i(824862),r=i(474848);const s=function(e){const{botValue:t,botStore:s,showActiveDot:a,style:l,size:d}=e,c=(0,i(959013).tz)(),u=(0,o().K8)((()=>{if(s){const e=s.getIcon();if(e)return{pointer:{table:n().GP,id:s.id,spaceId:s.getSpaceId()},icon:e}}else if(null!=t&&t.icon)return{pointer:{table:n().GP,id:t.id,spaceId:t.space_id},icon:t.icon}}),[s,t]),p=(0,o().K8)((()=>(null==s?void 0:s.getDisplayName(c))??(0,i(799288).Hg)(t)),[s,t,c]),{activeDotStyle:g}=(0,i(401497).IS)((e=>({activeDotStyle:{height:10,width:10,backgroundColor:e.palette.green[400],border:"2px solid white",borderRadius:"50%",position:"absolute",left:11,top:11}})),[]);return(0,r.jsxs)("div",{style:l,children:[(0,r.jsx)(i(187820).B6,{icon:u,title:p,size:d||18,disabled:!0,isEmptyPage:!1,useInvertedColors:!0}),a?(0,r.jsx)("div",{style:g}):void 0]})}},398217:(e,t,i)=>{i.d(t,{Jv:()=>f,Rl:()=>m,mA:()=>h});var o=i(296540),n=()=>i(484714),r=()=>i(56366),s=()=>i(401497),a=()=>i(970013),l=()=>i(743176),d=()=>i(780054),c=()=>i(68465),u=()=>i(159588),p=()=>i(963589),g=i(474848);const v=function(){return(0,g.jsx)(i(464708).A,{color:"purple",style:{marginLeft:6,padding:"1px 4px",display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1},content:(0,g.jsx)(i(959013).sA,{defaultMessage:"AI",id:"database.property.aiAutofillEnabledIndicator"})})};const h=o.memo((function(e){const{propertySchema:t,showIcon:o,showDragIcon:n,hideName:r,badge:a,style:l,iconStyle:c,iconSize:p,dragHandleStyle:v,className:h,labelSizeVariant:f}=e,y=d().A.isMobile?16:14,S=(0,s().IS)((e=>({container:{display:"flex",alignItems:"center",lineHeight:"120%",minWidth:0,fontSize:y,...l},iconWrapper:{display:"grid",justifyContent:"center",alignItems:"center",marginRight:r?void 0:"small"===f||n?4:d().A.isMobile?9:6,...c},dragHandle:{gridColumn:1,gridRow:1,opacity:n?1:0,transition:`opacity ${u().bM}`},itemIcon:{gridColumn:1,gridRow:1,opacity:n?0:1,transition:`opacity ${u().bM}`},dragIcon:{fill:e.icon.secondary}})),[y,r,c,f,n,l]);return(0,g.jsxs)("div",{className:h,style:S.container,children:[o&&(0,g.jsxs)("div",{style:S.iconWrapper,children:[(0,g.jsx)("div",{style:S.itemIcon,children:(0,g.jsx)(m,{propertySchema:t,iconSize:p,iconStyle:c})}),(0,g.jsx)("div",{style:S.dragHandle,children:(0,g.jsx)(i(57232).A,{style:v,iconSize:12,iconStyle:S.dragIcon})})]}),!r&&(0,g.jsx)("div",{style:{...i(284371).RC},children:t.name}),a]})}));function f(e){const{propertySchema:t}=e,i=(0,n().v3)();return(0,r().K8)((()=>(0,c().O0)(i)&&a().$M(t)&&a().om(t)),[i,t])?(0,g.jsx)(v,{}):null}function m(e){const{propertySchema:t,iconSize:i,iconStyle:o}=e,n=(0,s().DP)(),r=(0,p().X)("nds_default_property_noticon"),a=d().A.isMobile?18:16;return(0,g.jsx)(l().zB,{type:t.type,icon:t.icon,size:i||a,theme:n,style:o,isDefaultNoticonEnabled:r})}},423817:(e,t,i)=>{i.d(t,{J:()=>s});i(581454),i(296540);var o=()=>i(401497),n=()=>i(710149),r=i(474848);function s(e){let t=Math.floor(e.areaHeight/124);0===t&&(t=1);const i=(0,o().IS)((e=>({skeletonRect:{height:8,borderRadius:4,margin:10,backgroundColor:e.lightDividerColor},skeletonCircle:{display:"flex",width:28,height:28,marginRight:8,backgroundColor:e.lightDividerColor,borderRadius:20},skeletonSection:{display:"flex",width:"100%",margin:20,flexDirection:"row"}})),[8,10,20]),s=[...Array(t)].map(((e,t)=>(0,r.jsxs)("div",{style:i.skeletonSection,children:[(0,r.jsx)(n().A,{style:i.skeletonCircle}),(0,r.jsxs)("div",{style:{width:"80%"},children:[(0,r.jsx)(n().A,{style:{width:"80%",...i.skeletonRect,marginTop:0}}),(0,r.jsx)(n().A,{style:{width:"50%",...i.skeletonRect}}),(0,r.jsx)(n().A,{style:{width:"60%",...i.skeletonRect}}),(0,r.jsx)(n().A,{style:{width:"50%",...i.skeletonRect}})]})]},t)));return(0,r.jsx)("div",{children:s})}},525432:(e,t,i)=>{i.d(t,{Bd:()=>a,DN:()=>v,II:()=>S,R8:()=>y,U9:()=>m,VM:()=>f,ZF:()=>p,ZI:()=>c,bf:()=>d,jx:()=>u,wW:()=>h,xO:()=>l});i(16280),i(296540);var o=()=>i(651124),n=()=>i(959013),r=()=>i(712505),s=i(474848);let a=function(e){return e[e.ViewSettings=0]="ViewSettings",e[e.FilterBar=1]="FilterBar",e[e.TopbarFilterPopup=2]="TopbarFilterPopup",e[e.TopbarSortPopup=3]="TopbarSortPopup",e[e.TopbarFollowPopup=4]="TopbarFollowPopup",e[e.MobileSheet=5]="MobileSheet",e}({});const l=480,d=320;function c(e){const{timelineViewTab:t,collectionContextStore:i}=e,n=u({collectionContextStore:i}),r=p({collectionContextStore:i});return"timeline"===n?"timeline"===t?"timeline_properties":r?"timeline_table_properties":void 0:(0,o().u9)(u({collectionContextStore:i}))}function u(e){var t;const{collectionContextStore:i}=e,o=null===(t=i.collectionViewStore())||void 0===t?void 0:t.getType();if(!o)throw new Error("View type was not defined.");return o}function p(e){const{collectionContextStore:t}=e,i=t.normalizedFormatStore.state;return Boolean(i.timeline_show_table)}const g=600;function v(e,t,i){const o=i||0,n=e.settingsStore.state;if(n.open&&!0!==n.hideSettingsPopup)return h(e,t,o)}function h(e,t,i){const o=i||0,n=e.settingsStore.state,s=u({collectionContextStore:e});return n.open&&"form_editor"===s||t||r().default.isSidePeekOpen()||e.isInHomeWidgetStore.state||e.isInlineViewStore.state||o<=g?"popup":"sidebar"}function f(e){let{hasOnlyLinkedDataSources:t,isCollectionViewPageWithContent:i,locked:o}=e;return i?o?(0,s.jsx)(n().sA,{defaultMessage:"Unlock wiki",id:"action.unlockWikiName.name"}):(0,s.jsx)(n().sA,{defaultMessage:"Lock wiki",id:"action.lockWikiName.name"}):t?o?(0,s.jsx)(n().sA,{defaultMessage:"Unlock views",id:"database.viewSettings.mainTab.unlockViews.title"}):(0,s.jsx)(n().sA,{defaultMessage:"Lock views",id:"database.viewSettings.mainTab.lockViews.title"}):o?(0,s.jsx)(n().sA,{defaultMessage:"Unlock database",id:"database.viewSettings.mainTab.unlockDatabase.title"}):(0,s.jsx)(n().sA,{defaultMessage:"Lock database",id:"database.viewSettings.mainTab.lockDatabase.title"})}let m=function(e){return e[e.Source=0]="Source",e[e.Relation=1]="Relation",e}({});const y=6;function S(e){let{currentViewType:t,isPlaceholderExternalCollection:i,collectionContextStore:o,allowedActions:n,settingsHeaderSizeObserver:r}=e;return"page"!==t&&"form_editor"!==t&&(!i&&(!!o.shouldAllowNewItemCreation()&&(!(n&&!n.includes("addItem"))&&!(r&&r.rect.state.width>d))))}},551619:(e,t,i)=>{i.d(t,{Hy:()=>L,NV:()=>T,O9:()=>B,Rg:()=>R,Sm:()=>D,dK:()=>H,f7:()=>P,l8:()=>N,n$:()=>O,no:()=>U,sx:()=>_});var o=()=>i(402014),n=()=>i(484714),r=()=>i(792485),s=()=>i(56366),a=()=>i(700500),l=()=>i(651124),d=()=>i(519831),c=()=>i(620689),u=()=>i(591197),p=()=>i(835066),g=()=>i(780054),v=()=>i(964345),h=()=>i(68465),f=()=>i(504836),m=()=>i(478726),y=()=>i(747100),S=()=>i(963589),x=()=>i(665579),b=()=>i(765957),I=()=>i(525569),A=()=>i(217429),w=()=>i(375447),k=()=>i(66496),j=()=>i(548821),C=()=>i(712505),M=()=>i(302022);function T(e){(0,o().SQ)({event:e,context:o().y$.EditorMouseDown,callback:()=>{}})}function _(e){(0,o().SQ)({event:e,context:o().y$.Click,callback:()=>{}})}function L(e){return(0,s().K8)((()=>Boolean(M().A.state.pageMap[e.id])||k().A.state.pages.has(e.id)),[e.id])}function R(e,t){const i=(0,n().v3)(),o=(0,r().S)(),a=L(e),l=(0,s().K8)((()=>{var i,o;return t===j().Rr.Frame?Boolean(null===(i=b().default.state.currentLoadingContainerStore)||void 0===i?void 0:i.state.ready):t===j().Rr.PeekView&&C().default.state.open?Boolean(null===(o=C().default.state.loadingContainerStore)||void 0===o?void 0:o.state.ready):t===j().Rr.CollectionPageView||t===j().Rr.CollectionPageViewFullScreen?e.isReady():void 0}),[t,e]),d=P(e);return(0,s().K8)((()=>{if(!l)return!1;const t=i.currentUser.isLoggedIn(),n=o&&o.publicEditModeStore.state;return Boolean(e&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=n&&n.hasPublicPermission)||"edit"===(null==n?void 0:n.permission))&&!a&&!d&&(!(0,h().ZE)(n)||"completionPopup"!==I().default.state.type))}),[i.currentUser,d,l,o,a,e])}function B(e,t){const i=(0,n().v3)(),o=(0,r().S)(),{isTablet:a}=(0,n().Y0)(),l=(0,S().X)("tablet_refresh_template_pills_gate");return(0,s().K8)((()=>{if(t===j().Rr.SitePreview)return!1;if(g().A.isMobile&&(!a||!l))return!1;if(!i.currentUser.isLoggedIn())return!1;const n=o&&o.publicEditModeStore.state;if(null!=n&&n.hasPublicPermission&&"edit"!==(null==n?void 0:n.permission))return!1;if(e.getContentLength()>1)return!1;if(!e.canEdit()||e.isNonEditableState())return!1;const r=e.getContentStores()[0];if(r&&!r.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const s=v().gZ.state,d=v().Di.state;if(s&&e.id===d)return!1;return!((0,m().L5)(t)?u().VY.state:u().u3.state)}),[i,o,e,t,a,l])}function P(e){return(0,s().K8)((()=>{if(e.isCollectionView()){const t=e.getCollectionStoreIfSingleSource();return!!t&&t.isSyncedCollection()}return e.isType(a().xd.externalObjectInstancePage)}),[e])}function D(e){return(0,s().K8)((()=>{if(!(0,f().vL)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===d().Vl){return!!t.getFormatStore().getKeyStore("external_collection_type").getValue()}return!1}),[e])}function H(e){return(0,s().K8)((()=>{if(!(0,f().pB)())return!1;var t;return!!e.isCollectionView()&&((null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("external_collection_type").getValue())??!1)}),[e])}function N(e){return(0,s().K8)((()=>{if(!A().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"}))return!1;var t;return!!e.isCollectionView()&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("static_import_collection_type").getValue())===l().IE.CsvImport}),[e])}function O(e){const t=(0,n().v3)(),{device:i,WindowSizeStore:o}=t,r=(0,s().K8)((()=>{const e=o.state.height,i=g().A.isMobile&&w().Ay.state.open?e:0;return c().C6(t)+i}),[t,o]);return(0,s().K8)((()=>"home-phone"===e?x().q3:i.isTablet?380:i.isIOS?Math.max(350,r):g().A.isMobile?400:"side-peek"===e||"center-peek"===e?y().ln:"home"===e?x().wH:"30vh"),[i,r,e])}function U(e){const t=(0,n().v3)(),i=(0,s().K8)((()=>(0,p().dC)(t,e)),[t,e]);return(0,s().K8)((()=>i&&!e.isFullWidth()?(0,p().Zy)(t,(0,y().cq)(e),(0,y().RX)(e)):0),[t,i,e])}},569866:(e,t,i)=>{i.d(t,{A:()=>s});i(296540);var o=()=>i(401497),n=()=>i(829548),r=i(474848);function s(e){const{message:t,title:i}=e,s=(0,o().IS)((e=>({wrapper:{textAlign:"center",paddingLeft:20,paddingRight:20,height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",minHeight:220},icon:{width:48,fill:e.icon.tertiary},message:{fontSize:14,color:e.text.tertiary,marginTop:2,marginBottom:4,maxWidth:380,textWrap:"balance"},title:{fontSize:14,fontWeight:500,color:e.text.secondary,maxWidth:380,textWrap:"balance"}})),[]),a=e.icon||n().y;return(0,r.jsxs)("div",{style:s.wrapper,children:[(0,r.jsx)("div",{style:{paddingBottom:12},children:a(s.icon)}),(0,r.jsx)("div",{style:s.title,children:i}),(0,r.jsx)("div",{style:s.message,children:t})]})}},591197:(e,t,i)=>{i.d(t,{VY:()=>a,ZJ:()=>r,u3:()=>s});var o=()=>i(496506);class n extends(()=>i(757695))().Store{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const r=new n,s=new(o().ComputedStore)((()=>!1!==r.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),a=new(o().ComputedStore)((()=>!1!==r.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},665579:(e,t,i)=>{i.d(t,{$L:()=>a,BZ:()=>c,EC:()=>v,EI:()=>x,E_:()=>j,Ed:()=>p,Fq:()=>m,Lu:()=>I,Mk:()=>g,O0:()=>k,UO:()=>C,V$:()=>w,VQ:()=>h,Xx:()=>b,Xy:()=>d,YS:()=>f,_g:()=>S,dd:()=>u,pW:()=>l,q3:()=>s,wH:()=>r});var o=()=>i(496603),n=()=>i(534177);const r=160,s=40,a=24,l=20,d=600,c=270,u=405,p=480,g=500,v=void 0,h=16,f=10,m=8,y=(i(69447).nh,{backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"}),S=4;function x(e){return{icon:e.icon.secondary,text:e.text.secondary}}function b(e){return{width:48,height:48,fill:e.icon.tertiary}}function I(e){let{theme:t,isPhone:i}=e;return i?t.personalHomeBackgroundPhone:t.surface.page}const A=1;function w(e){let{isPhone:t,theme:i}=e;return{zIndex:1,position:"relative",display:"flex",flexDirection:"column",borderRadius:12,background:i.home.tile.background,boxShadow:j({isPhone:t,theme:i}),...y}}function k(e){let{mode:t}=e;switch(t){case"dark":return 0;case"light":return A;default:return(0,n().ub)(t),0}}function j(e){let{isPhone:t,theme:i,borderOnly:n}=e;if("dark"===i.mode)return"unset";i.mode;const r=k({mode:i.mode});return(0,o().oE)([n||t?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${r}px rgba(0, 0, 0, 0.05)`]).join(", ")}function C(e){const{isPhone:t,theme:i,borderOnly:o}=e;return{unhoveredBoxShadow:j({isPhone:t,theme:i,borderOnly:o}),hoveredBoxShadow:"light"===i.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):i.homeShadow.card.hovered}}},721273:(e,t,i)=>{i.d(t,{Cn:()=>n,oV:()=>a,tK:()=>s});i(581454);var o=()=>i(534177);let n=function(e){return e[e.Sidebar=0]="Sidebar",e[e.SidebarMobile=1]="SidebarMobile",e[e.MobileBottomBarPhone=2]="MobileBottomBarPhone",e[e.MobileBottomBarTablet=3]="MobileBottomBarTablet",e[e.TopbarMobile=4]="TopbarMobile",e[e.RenderAsPage=5]="RenderAsPage",e}({});const r=new Map;function s(e,t){r.set(l(e),t)}function a(e){return r.get(l(e))??[]}function l(e){return(0,o().uv)(e).sort().map((t=>{const i=e[t];return JSON.stringify(i)})).join("-")}},735695:(e,t,i)=>{i.d(t,{Ay:()=>j,iZ:()=>A,vE:()=>I});var o=i(296540),n=()=>i(804773),r=()=>i(401497),s=()=>i(149375),a=()=>i(66913),l=()=>i(959013),d=()=>i(284371),c=()=>i(686526),u=()=>i(704152),p=()=>i(285790),g=()=>i(928600),v=()=>i(480095),h=()=>i(554509),f=()=>i(780054),m=()=>i(722872),y=()=>i(253579),S=()=>i(255824),x=i(474848);const b=(0,l().YK)({back:{defaultMessage:"Back",id:"collectionsSettingsMenu.back"}}),I=290,A=400;function w(e){let{children:t,title:i,desktopTitleType:o,settingsStackLength:n,handleClose:c,handleBackArrowClick:g,hideDesktopHeader:v,hasBackStack:f}=e;const m=(0,S().a)(),y=(0,l().tz)(),I=(0,r().IS)((e=>({hiddenDesktopHeaderDiv:{height:0},nonHiddenDesktopHeaderDiv:{display:"flex",alignItems:m?"top":"center",padding:m?"0px 14px 6px 14px":"14px 16px 6px 16px",height:m?void 0:42},arrowButton:{marginRight:8,marginLeft:-2,height:22},arrowIcon:{width:16,height:16},title:{flexGrow:1,fontWeight:m?d().Wy.medium:d().Wy.semibold,fontSize:m?16:14,lineHeight:m?"24px":void 0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},closeButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:18,height:18,flexShrink:0},closeButtonHover:{background:e.buttonPressedBackground},closeIcon:{width:14,fill:e.text.secondary}})),[m]),A=!m;return(0,x.jsxs)(x.Fragment,{children:[v?(0,x.jsx)("div",{style:I.hiddenDesktopHeaderDiv}):(0,x.jsxs)("div",{style:I.nonHiddenDesktopHeaderDiv,children:[(n>1||f)&&(0,x.jsx)(p().A,{icon:s().v,style:I.arrowButton,iconStyle:I.arrowIcon,onClick:g,ariaLabel:y.formatMessage(b.back)}),"sectionHeader"===o?(0,x.jsx)(h().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",customStyles:{flexGrow:1},children:i}):(0,x.jsx)("span",{style:I.title,children:i}),A&&(0,x.jsx)(u().A,{onClick:c,style:I.closeButton,hoveredStyle:I.closeButtonHover,children:(0,a().V)(I.closeIcon)})]}),t]})}function k(e,t){let{children:r,footer:s,header:a,unconstrainedWidth:l,desktopWidth:d,title:u,desktopTitleType:p,collectionSettingsStore:h,fullHeight:b,hideDesktopHeader:A,menuScrollerStyle:k,innerContentWrapperStyle:j,disableScroller:C,handleBackArrowClick:M,hasBackStack:T,handleClose:_}=e;const L=(0,i(175116).Ks)(),R=(0,m().Tf)(),B=(0,S().a)(),{currentTab:P,settingsStackLength:D,hideHeader:H}=(0,i(56366).K8)((()=>{const e=h.state;return{currentTab:(0,i(940371).S)(h),settingsStackLength:e.stack.length,hideHeader:e.hideSettingsHeader}}),[h]),N=(0,o.useCallback)((()=>{var e;M?M():c().yl({collectionSettingsStore:h,keepPreviousRef:"form_editor"===(null==L||null===(e=L.collectionViewStore())||void 0===e?void 0:e.getType())})}),[M,h,L]),O=(0,o.useCallback)((e=>{_?_(e):c().os({collectionSettingsStore:h})}),[_,h]),U=(0,o.useCallback)((e=>{(0,y().rW)(e.target)||(0,y().iX)(e.target)||(0,y().u2)(e.target)||i(263711).g.state.isOpen||O(e)}),[O]);if(!P)return null;let K;if(f().A.isMobile)K={disableScroller:C,menuType:m().gu.Modal,title:u,left:D>1?(0,x.jsx)(v().MobileModalBackButton,{}):void 0,onClickLeft:D>1?N:void 0,scrollerStyle:k,innerRef:t,right:R?void 0:(0,x.jsx)(v().DoneMenuText,{}),onClickRight:R?void 0:O};else{const e=l||d?void 0:B?280:I;K={disableScroller:C,menuType:m().gu.Popup,minWidth:B?280:I,width:d,maxHeight:b?"100%":"80vh",...e&&{maxWidth:e},onClickOutside:U,scrollerStyle:{flexGrow:0,...k},header:!H&&(0,x.jsx)(w,{settingsStackLength:D,handleClose:O,handleBackArrowClick:N,hasBackStack:T,hideDesktopHeader:A,title:u,desktopTitleType:p,children:a}),paddingTop:H?6:0,footer:s,innerRef:t}}const V=(0,x.jsxs)(x.Fragment,{children:[f().A.isMobile&&a,r,f().A.isMobile&&s]});return b?(0,x.jsx)(n().Y,{direction:"vertical",children:(0,x.jsx)(g().A,{...K,children:V})}):(0,x.jsx)(i(297872).A,{capture:!0,allowMobileAutoScroll:!0,allowEsc:!0,render:e=>(0,x.jsx)(n().Y,{direction:"vertical",children:(0,x.jsx)(g().A,{...K,...e,children:(0,x.jsx)("div",{style:j,children:V})})})})}const j=(0,o.forwardRef)(k)}}]);