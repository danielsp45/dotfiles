"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[29875],{131849:(e,t,o)=>{o.d(t,{a:()=>i});var n=()=>o(484714),a=()=>o(56366),r=()=>o(486130);function i(e){const t=(0,n().v3)();return(0,a().K8)((()=>{if(t.currentUser.id&&e)return e.isMemberOrGuest(t.currentUser.id,r()._.getSpacePermissionGroupIds({userId:t.currentUser.id,spaceId:e.getSpaceId()}))}),[t.currentUser.id,e])}},149257:(e,t,o)=>{o.d(t,{A:()=>s});var n=o(296540),a=()=>o(959013),r=o(474848);const i=(0,a().YK)({message_placeholder:{id:"teamInviteLinkRequestPage.message.placeholder",defaultMessage:"Message (optional)"}});const s=function(e){const{teamStore:t,teamName:s,teamId:l,isModalOpen:d,onDismiss:c}=e,[u,m]=(0,n.useState)(""),g=(0,o(484714).v3)(),p=(0,a().tz)(),S=async()=>{await o(350648).Ip({environment:g,teamId:l,message:u}),c()},v=(0,o(401497).IS)((()=>({modal:{alignSelf:"center",overflow:"visible",padding:15,width:420},requestTitle:{display:"inline-flex",marginBottom:10},icon:{marginLeft:4,marginRight:4},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:15},requestInvitesButton:{marginLeft:20},input:{padding:8}})),[]);return(0,r.jsx)(o(676007).a,{open:d,onDismiss:c,innerStyle:v.modal,preventHideChildrenWhileOpening:!0,render:()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:v.requestTitle,children:(0,r.jsx)(a().sA,{id:"teamInviteLinkRequestModal.reasonForRequest.title",defaultMessage:"Request access to {icon} {teamName}",values:{teamName:s,icon:(0,r.jsx)(o(898808).x,{style:v.icon,store:t,disabled:!0,size:22})}})}),(0,r.jsx)(o(623580).A,{textarea:!0,style:v.input,value:u,onChange:e=>{m(e.target.value)},placeholder:p.formatMessage(i.message_placeholder)}),(0,r.jsxs)("div",{style:v.footer,children:[(0,r.jsx)(o(125565).A,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,children:(0,r.jsx)(a().sA,{id:"teamInviteLinkRequestModal.caption",defaultMessage:"Your teamspace owners will approve or decline your request."})}),(0,r.jsx)(o(204063).A,{size:"lg",style:v.requestInvitesButton,onClick:S,children:(0,r.jsx)(a().sA,{id:"teamInviteLinkRequestModal.requestAccessButton.label",defaultMessage:"Request"})})]})]})})}},192940:(e,t,o)=>{o.d(t,{h:()=>r});var n=()=>o(56366),a=()=>o(37433);function r(e){return(0,n().K8)((()=>{var t;return void 0===e?0:(null===(t=(0,a().PF)({teamStore:e}))||void 0===t?void 0:t.memberCountWithGuests)??0}),[e])}},205618:(e,t,o)=>{o.d(t,{A:()=>a});class n extends(()=>o(757695))().Store{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"member",table:o(854150).yK,isFocused:!0,flowId:void 0,inputFocus:"invitee",emailMessage:""}}}const a=n},211825:(e,t,o)=>{o.d(t,{G:()=>i});var n=()=>o(484714),a=()=>o(56366),r=()=>o(486130);function i(e){const t=(0,n().v3)().currentUser.id;return(0,a().K8)((()=>Boolean(void 0!==t&&e.isNonGuestMember(t,r()._.getSpacePermissionGroupIds({userId:t,spaceId:e.getSpaceId()})))),[t,e])}},341974:(e,t,o)=>{o.r(t),o.d(t,{TeamJoinLeaveButton:()=>h});var n=o(296540),a=()=>o(484714),r=()=>o(56366),i=()=>o(401497),s=()=>o(284371),l=()=>o(640653),d=()=>o(37433),c=()=>o(515512),u=()=>o(211825),m=()=>o(959013),g=()=>o(493823),p=o(474848);const S=function(e){const{teamStore:t,from:i,navigateToTeamHomeOnJoin:s,style:l,hoveredStyle:d,icon:c,isRed:u}=e,S=(0,a().v3)(),v=(0,r().O$)(o(765957).AppStoreCurrentSpaceStore),f=(0,n.useCallback)((async()=>{v&&await o(848237).e2({environment:S,teamStore:t,currentSpaceStore:v,from:i,andNavigateToTeamHome:s??!1})}),[v,S,t,i,s]);return(0,p.jsx)(g().p,{style:l,hoveredStyle:d,onClick:f,iconLeading:c,isRed:u,children:(0,p.jsx)(m().sA,{id:"outlinerTeamToggleButton.joinTeamButton",defaultMessage:"Join"})})};var v=()=>o(655784);const f=function(e){const{teamStore:t,style:a,hoveredStyle:i}=e,[s,l]=(0,n.useState)(!1),d=(0,r().K8)((()=>t.getName()),[t]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(g().p,{style:a,hoveredStyle:i,onClick:()=>l(!0),children:(0,p.jsx)(m().sA,{id:"teamRequestButton.requestButton.label",defaultMessage:"Request"})}),(0,p.jsx)(o(149257).A,{teamStore:t,teamName:d,teamId:t.id,isModalOpen:s,onDismiss:()=>l(!1)})]})};function h(e){const{teamStore:t,style:o,hoveredStyle:n}=e,m=(0,a().v3)(),g=(0,c().Q)(),h=(0,u().G)(t),b=(0,r().K8)((()=>t.getTeamAccessLevel()),[t]),y=(0,i().IS)((e=>({joinTeamButton:{maxHeight:26,marginLeft:10,paddingLeft:10,paddingRight:10,borderRadius:100,fontSize:13,fontWeight:s().Wy.semibold,background:e.buttonHoveredBackground,alignSelf:"center",...o},joinTeamButtonHoveredStyle:{background:e.buttonPressedBackground,...n}})),[o,n]),T=(0,r().K8)((()=>(0,d().A2)({membership:t.getRawMembership()})&&(0,l().s7)(m)),[m,t]),x=!h&&"open"===b||T,j=!h&&"closed"===b;return g?null:h?(0,p.jsx)(v().A,{...e,style:y.joinTeamButton,hoveredStyle:y.joinTeamButtonHoveredStyle}):x?(0,p.jsx)(S,{...e,style:y.joinTeamButton,hoveredStyle:y.joinTeamButtonHoveredStyle}):j?(0,p.jsx)(f,{teamStore:t,style:y.joinTeamButton,hoveredStyle:y.joinTeamButtonHoveredStyle}):null}},350648:(e,t,o)=>{o.d(t,{D2:()=>A,Ip:()=>T,Jk:()=>x,YT:()=>j,e2:()=>b,g:()=>y});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520);var n=()=>o(584262),a=()=>o(798880),r=()=>o(946141),i=()=>o(449506),s=()=>o(246826),l=()=>o(436572),d=()=>o(426116),c=()=>o(751156),u=()=>o(972435),m=()=>o(640653),g=()=>o(37433),p=()=>o(765957),S=()=>o(999830),v=()=>o(848237),f=()=>o(263928);const h=(0,o(959013).YK)({joinTeamSuccessMessage:{id:"teamInviteLinkActions.joinTeam.confirmationMessage",defaultMessage:"Joined {teamName}"},requestTeamSuccessMessage:{id:"teamInviteLinkActions.requestAccess.successMessage",defaultMessage:"Successfully requested membership"},requestTeamFailureMessage:{id:"teamInviteLinkActions.requestAccess.failureMessage",defaultMessage:"Failed to request membership"}});async function b(e){let{environment:t,userId:o,teamStore:n,user:a}=e;const i=n.getSpaceId();if(!i)return;await v().rU({environment:t,teamId:n.id,spaceId:i,teamUserInfo:a,isSettingDefaultTeam:!1,inviterId:o})&&(r().vo(t,{store:n,joined_role:"member",from:"team_invite_link"}),await y({environment:t,userId:o,teamStore:n}),l().D6({label:u().A.formatMessage(h.joinTeamSuccessMessage,{teamName:n.getName()})}))}async function y(e){let{environment:t,userId:o,teamStore:a}=e;const r=p().default.state.currentUserRootStore,i=a.getSpaceId();if(!i||!r)return;const s=r.getSpaceViewStores().filter((e=>e.getSpaceId()===i))[0];await d().tR({environment:t,spaceViewStore:s,userSettingsStore:void 0,userRootStore:r,pageVisitSource:n().y8.JoinTeam,navigationType:"switchingToOrLoadingSpace"}),(0,g().Qn)()?S().q.fetchUnfetchedTeams({userId:o,spaceId:i,teamTypes:new Set(["Joined"]),environment:t,callGetTeamsV2ApiFn:g().FK}):await f().J({environment:t,spaceId:i,userId:o}),v().L0({environment:t,teamStore:a,shouldScroll:!0})}async function T(e){let{environment:t,teamId:o,message:n}=e;if(!t.currentUser.id)return;"success"===(await i().callApi({eventName:"requestAccess",environment:t,data:{type:"current-actor-to-team",teamId:o,message:n}})).type?(r().XQ(t,{teamId:o}),await j({environment:t}),new Promise((e=>setTimeout(e,500))).then((()=>{l().D6({label:u().A.formatMessage(h.requestTeamSuccessMessage)})}))):l().D6({label:u().A.formatMessage(h.requestTeamFailureMessage)})}async function x(e){let{environment:t,teamStore:o,accessRequestStore:n,status:i}=e;const l=n.getForActorId();if(!l)return;const d=n.getRecordModel({table:a().oo,id:l});if(d){if("approved"===i){const e=[{type:"member",entity_type:"user",user_id:d.id}];if(!(await v().Zd({environment:t,teamStore:o,teamMemberInfos:e,isSettingDefaultTeam:!1,createNewTeamFlowId:void 0})))return}c().createAndCommit({userAction:"GrantAccessActivityAction.handleGrantAccess",environment:t,canUndo:!0,perform:e=>{s().zv({store:n,transaction:e,data:{resolved_time:Date.now(),resolved_by_table:a().oo,resolved_by_id:t.currentUser.id,status:i}})}}),r().GW(t,{store:o,resolution:i})}}async function j(e){let{environment:t}=e;const{lastVisitedSpaceView:o,userRootStore:a,userSettingsStore:r}=await(0,m().ex)({environment:t,disableRedirectUrl:!1});o?await d().tR({environment:t,spaceViewStore:o,userRootStore:a,userSettingsStore:r,pageVisitSource:n().y8.BackForward,navigationType:"switchingToOrLoadingSpace"}):await d().t9({environment:t,userRootStore:a,userSettingsStore:r,pageVisitSource:n().y8.BackForward})}async function A(e){let{environment:t,teamId:o}=e;const n=await i().callApi({eventName:"getTeamAccessRequestMetadata",environment:t,data:{teamId:o}});if("success"===n.type)return n.data}},418426:(e,t,o)=>{o.d(t,{$:()=>l});o(898992),o(354520),o(581454);var n=()=>o(484714),a=()=>o(56366),r=()=>o(468006),i=()=>o(605402),s=()=>o(486130);function l(e){const t=(0,n().v3)().currentUser.id;return(0,a().K8)((()=>{if(!e.isDefined())return[];return(0,r().ri)({rawMembers:e.getRawMembership(),groupsInSpace:i().A.state.permissionGroupsAndMemberCounts.map((e=>e.group))}).filter((o=>s()._.getSpacePermissionGroupIds({userId:t,spaceId:e.getSpaceId()}).has(o.getGroupId())))}),[t,e])}},515512:(e,t,o)=>{o.d(t,{Q:()=>s});var n=()=>o(484714),a=()=>o(56366),r=()=>o(640653),i=()=>o(765957);function s(){const e=function(){const e=(0,n().v3)();return(0,a().K8)((()=>{const t=i().default.state.currentSpaceStore;if(!t)return{loading:!0};if(!r().IL(t))return{loading:!1,isUserTeamGuestOfSpace:!1};const o=i().default.state.currentSpaceViewStore;if(!o||!e.currentUser.id)return{loading:!0};const n=r().vb({userId:e.currentUser.id,spaceViewStore:o});return n.isLoaded?{loading:!1,isUserTeamGuestOfSpace:n.isTeamGuestInSpace}:{loading:!0}}),[e])}();return(0,a().K8)((()=>e.loading||e.isUserTeamGuestOfSpace),[e])}},629875:(e,t,o)=>{o.d(t,{kv:()=>Te,Ay:()=>Re,uA:()=>Ce,bH:()=>ke});var n=o(296540),a=()=>o(484714),r=()=>o(819121),i=()=>o(56366),s=()=>o(401497),l=()=>o(946065),d=()=>o(120739),c=()=>o(959013),u=()=>o(534177),m=()=>o(284371),g=()=>o(872539),p=()=>o(435009),S=()=>o(780054),v=()=>o(38337),f=()=>o(159588),h=()=>o(836251);function b(e){switch(e){case l().AX:case l().GU:return!0;case l().zt:case l().st:return!1;default:(0,u().HB)(e)}}var y=()=>o(578136),T=()=>o(402014),x=()=>o(22394),j=()=>o(381349),A=()=>o(946141),I=()=>o(145214),w=()=>o(406699),B=()=>o(218557),M=()=>o(986863),C=()=>o(196539),k=()=>o(855801),R=()=>o(396301),L=()=>o(115512),_=()=>o(645873),O=()=>o(646736),P=()=>o(962730),H=()=>o(765957),U=()=>o(210737),W=()=>o(663325),G=()=>o(205618),K=()=>o(848237),D=o(474848);const N=function(e){const{outlinerToggleButtonStore:t,outlinerTeamOnToggle:n,style:r}=e,{isMobile:l}=(0,a().Y0)(),d=(0,s().IS)((e=>({caratContainer:{fontSize:16,flexShrink:0,minHeight:20,minWidth:20,...r||{}},toggleButton:{color:e.icon.tertiary}})),[r]),c=(0,i().K8)((()=>t.state.isHidden),[t]);return(0,D.jsx)("div",{style:d.caratContainer,children:(0,D.jsx)(o(606273).f,{isSidebar:!0,fill:!0,icon:"chevron",open:!c,color:d.toggleButton.color,onClick:n,disabled:l})})};var q=()=>o(341974),F=(o(898992),o(823215),o(581454),()=>o(798880)),z=()=>o(859428),V=()=>o(994006),J=()=>o(37433),E=()=>o(630116);function Y(e){const t=(0,a().v3)(),[o,r]=(0,n.useState)(!1),{teamStore:l,teamOutlinerType:d}=e,u=(0,i().K8)((()=>(0,J().PF)({teamStore:l})),[l]),m=(null==u?void 0:u.memberCountWithGuests)??0,{isReady:g,limitedUserStores:p,countRemainingUsers:S}=(0,i().K8)((()=>{let e=(null==u?void 0:u.sampleMemberUserIds)??[];e.length>5&&(e=e.slice(0,5));const t=e.map((e=>E().LU.createChildStore(l,{table:F().oo,id:e})))??[],o=t&&t.every((e=>e.isReady()));return{countRemainingUsers:(null==u?void 0:u.memberCount)??0-t.length,limitedUserStores:t,isReady:o}}),[l,u]),v=(0,s().IS)((e=>({membershipSection:{display:"flex",flexDirection:"row",fontSize:14,alignItems:"center",whiteSpace:"nowrap"},teamMemberList:{paddingTop:3},moreMessage:{marginLeft:2,marginTop:4,color:e.text.contrastSecondary}})),[]);return g?(0,D.jsx)("div",{style:v.membershipSection,children:(0,D.jsx)(z().A,{placement:P().W.Bottom,disableTooltip:m<=0,render:t=>{return(0,D.jsxs)("span",{...t,style:e.renderStyle,children:[m," ",(o=m,o>1?(0,D.jsx)(c().sA,{defaultMessage:"members",id:"teamBrowser.teamCard.MembershipPlural"}):(0,D.jsx)(c().sA,{defaultMessage:"member",id:"teamBrowser.teamCard.Membership"}))]});var o},renderTooltip:e=>(o||(r(!0),A().JG(t,{teamStore:l,outliner_type:d})),(0,D.jsx)("div",{...e,children:(0,D.jsxs)("div",{style:{marginBottom:4},children:[p.map((e=>(0,D.jsx)(V().A,{style:v.teamMemberList,userStore:e,avatarSize:18},e.id))),S>0&&(0,D.jsx)("div",{style:v.moreMessage,children:(0,D.jsx)(c().sA,{id:"teamMembersList.tooltip.overflowMessage",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:S}})})]})}))})}):null}var $=()=>o(898808),Q=()=>o(211825),X=()=>o(131849),Z=()=>o(192940),ee=()=>o(863330),te=()=>o(362749),oe=()=>o(2220),ne=()=>o(704152),ae=()=>o(8980),re=()=>o(972435),ie=()=>o(611371),se=()=>o(338907),le=()=>o(869562),de=()=>o(205160);function ce(e){let{teamStore:t,from:o,outlinerToggleButtonStore:r,shouldPersistToggleState:s}=e;const l=(0,a().v3)(),d=(0,i().K8)((()=>(0,se().u)(l)),[l]),c=(0,n.useCallback)((()=>(0,se().u)(l)),[l]);return d?(0,D.jsx)(te().LL,{origin:"team",parentStore:t,onClick:c}):(0,D.jsx)(ue,{teamStore:t,from:o,outlinerToggleButtonStore:r,shouldPersistToggleState:s,onClick:c})}function ue(e){let{teamStore:t,from:o,outlinerToggleButtonStore:r,shouldPersistToggleState:l,onClick:d}=e;const c=(0,a().v3)(),u=(0,i().K8)((()=>(0,ie().EF)(c)),[c]),m=(0,n.useCallback)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:n}=H().default.state;null==d||d(),e&&n&&(g().A5({environment:c,from:o,spaceStore:e,spaceViewStore:n,teamStore:t,outlinerToggleButtonStore:r,shouldPersistToggleState:l,andNavigate:!0,appendOrPrepend:"append"}),S().A.isMobile&&(0,le().close)(),(0,oe().u)({environment:c,event:{eventName:"sidebar_new_page_click",eventProperties:{origin:"team",target_team_id:t.id}}}))}),[c,o,d,r,l,t]),p=(0,s().IS)((e=>{const t=S().A.isMobile?32:20;return{button:{height:t,width:t,border:"none",borderRadius:3,marginLeft:S().A.isMobile?0:4},plusIconContainer:{display:"flex",alignItems:"center",justifyContent:"center",color:e.legacyRedSelectColor,height:t,width:t},tooltip:{width:"204px"}}}),[]);return(0,D.jsx)(z().A,{textWrap:!u,renderTooltip:()=>u?re().A.formatMessage(de().K.addPageTooltip):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{children:re().A.formatMessage(me.disabledTooltipUpper)}),(0,D.jsx)("div",{children:re().A.formatMessage(me.disabledTooltipLower)})]}),placement:P().W.Bottom,render:e=>(0,D.jsx)(ne().A,{style:p.button,onClick:m,ariaLabel:u?re().A.formatMessage(de().K.addPageTooltip):re().A.formatMessage(me.disabledTooltipUpper),...e,disabled:!u,children:(0,D.jsx)("div",{style:p.plusIconContainer,children:(0,D.jsx)(ae().I,{icon:ee().plusSmallIcon,size:"sm",color:S().A.isMobile?"tertiary":"secondary"})})}),style:u?{}:p.tooltip})}const me=(0,c().YK)({disabledTooltipUpper:{defaultMessage:"You’ve used up your free blocks.",id:"sidebar.addButton.disabledTooltipUpper"},disabledTooltipLower:{defaultMessage:"Upgrade to add a new page.",id:"sidebar.addButton.disabledTooltipLower"}});function ge(e){const{teamStore:t,label:o,isHovered:r,outlinerToggleButtonStore:d,teamOutlinerType:p,shouldPersistToggleState:v,outlinerTeamOnToggle:h,labelAriaId:y}=e,F=b(p),z=(0,a().v3)(),{name:V,showAddPageButton:J}=(0,i().K8)((()=>({name:t.getName(),showAddPageButton:t.canAddOrRemoveTopLevelPages()})),[t]),E=(0,Q().G)(t),ee=(0,X().a)(t),te=(0,Z().h)(t),oe=(0,i().O$)(H().AppStoreCurrentSpaceStore),ne=(0,i().uB)(void 0,G().A),ae=S().A.isMobile||r,re=(0,s().IS)((e=>({teamHighlightAnimationBackgroundContainer:{backgroundColor:j().Ay.frontTertiaryButtonBackgroundHovered,position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:-1,borderRadius:4},container:{position:"relative",display:"flex",alignItems:"center",minHeight:S().A.isMobile?48:F?30:28,padding:F?"6px 0px":0},overflow:{marginLeft:5,justifySelf:"flex-end",height:22,display:"flex",alignItems:"center",opacity:r||S().A.isMobile?1:0,transition:`opacity ${f().bM}`,...ae?{}:L().Qg},labelContainer:{flexShrink:1,flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",height:"100%",...m().RC},labelText:{display:"flex",width:"100%",alignItems:"center",lineHeight:m().K_.UISmall.desktop,marginBottom:1,minHeight:20,...m().RC},membersCountText:{display:"flex",fontSize:12,fontWeight:m().Wy.regular,lineHeight:1.3,color:e.text.tertiary,width:"100%",...m().RC},joinedBadge:{color:e.darkTextColor,lineHeight:1.2,...m().RC},joinedBadgeIcon:{display:"inline",color:e.darkTextColor,marginBottom:-1,marginRight:2,marginLeft:3,width:10,height:10},joinLeaveButton:{background:"none",color:e.text.secondary,fontSize:13,borderRadius:4,padding:"0px 4px",height:22,...ae?{}:L().Qg},joinLeaveButtonHovered:{background:e.buttonHoveredBackground},unjoinedOverflowMenu:{display:"flex",height:22,marginLeft:8,marginRight:-6,opacity:r?1:0,transition:`opacity ${f().bM}`,...ae?{}:L().Qg},teamIconContainer:{minHeight:20,minWidth:20,marginRight:9},closedTeamLabel:{display:"flex",alignItems:"center"},carat:{minHeight:20,height:20},iconAndToggleContainer:{display:"grid"},toggle:{gridColumn:1,gridRow:1,opacity:r?1:0,order:r?1:0,transition:`opacity ${f().bM}`},icon:{gridColumn:1,gridRow:1,opacity:r?0:1,transition:`opacity ${f().bM}`,order:r?0:1}})),[F,ae,r]),ie=(0,i().K8)((()=>t.getTeamPagesStore()),[t]),se=(0,i().K8)((()=>W().A.state===t.id),[t.id]),le=(0,i().K8)((()=>t.getTeamAccessLevel()),[t]),[de,ue]=(0,n.useState)(void 0),me=(0,n.useCallback)((e=>{let{draggingStores:t}=e;return!!oe&&(0,R().ox)({environment:z,draggingStores:t,parentStore:ie,currentSpaceStore:oe})}),[oe,z,ie]),{value:ge}=(0,_().fJ)(k().VI.duplicateActions),Se=(0,O().HI)(oe),ve=(0,n.useCallback)((async e=>{await g().RM({dropArgs:e,environment:z,type:"team",isDroppingOnFullSection:!1,parentStore:ie,duplicateActions:ge,currentSpaceUserStore:Se})}),[ge,z,ie,Se]);if(!V)return null;const fe=!ee,he=function(e,t){if(!t)return!1;switch(e){case l().GU:return!0;case l().zt:case l().st:case l().AX:return!1;default:(0,u().HB)(e)}}(p,E),be=!S().A.isMobile&&!E&&"closed"===le,ye=e=>{U().A.addNamedPopup("team_more_actions"),A().lR(z,{store:t,from:e})},Te=()=>{U().A.removeNamedPopup("team_more_actions")};return(0,D.jsxs)(B().Tl,{dropTargetKey:K().pW(t),canDropOnto:!e.isExpanded,shouldShowDropZone:!0,canAcceptDrop:me,onSelectableDrop:ve,children:[(0,D.jsx)(w().Ay,{popupType:w().z7.Popup,alignmentToOrigin:w().yP.Start,placementToOrigin:w().sx.Right,preventSlideUpTransition:!0,preventScaleTransition:!0,originRect:de,render:e=>(0,D.jsx)(C().B1,{teamStore:t,permissionsInviteStore:ne,onDismiss:e.close,from:"teamSidebar"}),renderOrigin:e=>{let{onClick:n}=e;return(0,D.jsxs)("div",{style:re.container,onContextMenu:e=>{!S().A.isMobile&&(0,T().SQ)({event:e,context:T().y$.EditorContextMenu,callback:()=>{e.preventDefault(),ue(new DOMRect(e.clientX,e.clientY)),n()}})},children:[S().A.isMobile?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(N,{store:t,outlinerToggleButtonStore:d,outlinerTeamOnToggle:h}),(0,D.jsx)("div",{style:re.teamIconContainer,children:(0,D.jsx)($().x,{size:20,store:t,disabled:!0,style:{fontWeight:m().Wy.medium}})})]}):(0,D.jsxs)("div",{style:re.iconAndToggleContainer,children:[(0,D.jsx)("div",{style:re.icon,children:(0,D.jsx)("div",{style:re.teamIconContainer,children:(0,D.jsx)($().x,{size:20,store:t,disabled:!0,style:{fontWeight:m().Wy.medium}})})}),(0,D.jsx)("div",{style:re.toggle,children:(0,D.jsx)(N,{store:t,outlinerToggleButtonStore:d,outlinerTeamOnToggle:h,style:F||ae?re.carat:L().Qg})})]}),(0,D.jsxs)("div",{style:re.labelContainer,children:[(0,D.jsx)("div",{style:re.labelText,id:y,children:o}),F&&void 0!==te&&(0,D.jsxs)("div",{style:re.membersCountText,children:[oe&&(0,D.jsx)(Y,{teamStore:t,renderStyle:re.membersCountText,teamOutlinerType:p}),be&&(0,D.jsxs)("div",{style:re.closedTeamLabel,children:[" ","·"," ",(0,D.jsx)(c().sA,{id:"outlinerTeamToggleButton.closedTeamLabel",defaultMessage:"Closed"})]}),he&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("span",{children:" "})," ·",(0,D.jsx)("span",{children:(0,x().o)(re.joinedBadgeIcon)}),(0,D.jsx)("span",{style:re.joinedBadge,children:(0,D.jsx)(c().sA,{id:"outlinerTeamToggleButton.joinedBadge",defaultMessage:"Joined"})})]})]})]}),E&&(0,D.jsxs)("div",{style:re.overflow,children:[(0,D.jsx)(C().eE,{teamStore:t,from:p,onPopupClick:()=>ye(p),onPopupClose:Te}),J&&!S().A.isMobile&&(0,D.jsx)(ce,{teamStore:t,outlinerToggleButtonStore:d,shouldPersistToggleState:v,from:pe(p)})]}),!E&&(0,D.jsx)("div",{style:re.unjoinedOverflowMenu,children:(0,D.jsx)(C().eE,{teamStore:t,from:p,hideJoin:!0,onPopupClick:()=>ye(p),onPopupClose:Te})}),!S().A.isMobile&&fe&&(0,D.jsx)(q().TeamJoinLeaveButton,{style:re.joinLeaveButton,hoveredStyle:re.joinLeaveButtonHovered,teamStore:t,placement:P().W.Right,from:"sidebar_team_modal",navigateToTeamHomeOnJoin:!0}),J&&S().A.isMobile&&(0,D.jsx)("div",{style:{...re.overflow,...ae?{}:L().Qg},children:(0,D.jsx)(ce,{teamStore:t,outlinerToggleButtonStore:d,shouldPersistToggleState:v,from:pe(p)})}),(0,D.jsx)(I().A,{visible:se,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:re.teamHighlightAnimationBackgroundContainer})]})},onClick:()=>ye("teamSidebar"),onClose:Te}),(0,D.jsx)(M().u,{permissionsInviteStore:ne,store:t})]})}function pe(e){switch(e){case l().AX:case l().zt:return"sidebar_team_section_browser";case l().GU:return"sidebar_team_section_browser_search";case l().st:return"sidebar_team_section";default:(0,u().HB)(e)}}var Se=()=>o(217429);const ve=function(e){let{type:t,from:r,disableTooltip:i,labelTooltip:d,spaceStore:m,spaceViewStore:p,shouldPersistToggleState:v,outlinerToggleButtonStore:f,fromSecondarySidebar:h,onClick:b}=e;const y=(0,a().v3)(),T=function(e){switch(e){case"bookmarks":case"private":case"shared":case"team":case"workspace":case l().yy:return!1;case l().zt:case l().AX:case l().GU:case l().st:return!0;default:(0,u().HB)(e)}}(t),x=(0,c().tz)(),j=(0,o(963589).X)("sidebar_add_new_pages_to_bottom"),A=(0,n.useRef)(null),I=(0,n.useCallback)((async()=>{if(T)K().vn("sidebar_team_section");else{if(!p)return;if("team"===t||t===l().yy)return;if((0,se().u)(y)&&"on"===Se().default.getEligibleGroup({experimentId:"packaging_open_modal_private_section_plus_button",defaultGroup:"control"})){const{openTemplateOnboardingModal:e,getTemplateOnboardingVersion:t}=await o(373444).O.load();return void e({origin:"sidebar_private_new_page",parentStore:m,template:void 0,version:t({template:void 0})})}o(116225).u4({name:"page_created",args:{type:t,from:r}}),g().SE({environment:y,spaceStore:m,spaceViewStore:p,type:t,outlinerToggleButtonStore:f,outlinerItemFrom:r,prepend:!j,shouldPersistToggleState:v}),b&&b()}}),[T,j,y,r,b,f,v,m,p,t]),w=o(900652).zg(),B=(0,s().IS)((e=>({plusButton:{display:"flex",alignItems:"center",justifyContent:"center",height:20,width:20,borderRadius:4,marginLeft:S().A.isMobile||h?0:4,...h?w.button:{}},labelTooltip:{color:e.text.contrastSecondary}})),[h,w]),M=T?x.formatMessage({defaultMessage:"New teamspace",id:"sidebar.addButton.addTeamTooltip"}):x.formatMessage({defaultMessage:"Add a page",id:"sidebar.addButton.addPageTooltip"});return(0,D.jsx)(z().A,{textWrap:!1,disableTooltip:i,renderTooltip:()=>(0,D.jsxs)(D.Fragment,{children:[M,(0,D.jsx)("br",{}),(0,D.jsx)("span",{style:B.labelTooltip,children:!T&&d})]}),placement:P().W.Bottom,render:e=>(0,D.jsxs)(ne().A,{ariaLabel:M,style:B.plusButton,onClick:I,className:"private"===t?"shadow-cursor-new-page-sidebar":void 0,...e,children:[(0,D.jsx)("span",{ref:A}),(0,D.jsx)(ae().I,{icon:ee().plusSmallIcon,size:"sm",color:S().A.isMobile?"tertiary":"secondary"})]})})};var fe=()=>o(644914),he=()=>o(227440),be=()=>o(929450),ye=()=>o(490044);const Te=12,xe={bookmarks:v().ojI,workspace:v().kRA,shared:v().c6k,private:v().MaD,offline:v().mLD,team:v().zqk,[l().zt]:v().Pji,[l().AX]:v().oDg,[l().GU]:v().kyo,[l().st]:v().Of1,[l().yy]:v().wgf};function je(e){const{type:t,renderSidebar:r,isLastTeam:d,marginBottomOverrideWhenExpanded:c,marginBottomOverrideWhenCollapsed:u,initialToggleState:m,shouldPersistToggleState:g}=e,p=(0,a().v3)(),{isTablet:v}=(0,a().Y0)(),f=(0,i().uB)(e.outlinerToggleButtonStore,o(633892).A);(0,o(852507).l)((()=>{if(m&&f.setState({...f.state,isHidden:"hidden"===m}),!g)return;const t=function(e){const{type:t,spaceViewStore:o}=e;if(t===l().yy)return;if("team"===t)return be().YB(o,e.teamStore.id);return(0,fe().LW)(o,t)}(e);if(!t)return;const n=o(763884).K.get({userId:p.currentUser.id,key:t});n&&f.setState({...f.state,isHidden:n})}));const h=(0,i().K8)((()=>f.state.isHidden),[f]),b=xe[t],y=(0,n.useRef)(null),T=(0,n.useId)(),x=(0,n.useId)(),j=(0,s().IS)((()=>({toggle:{marginBottom:h||d&&!S().A.isMobile?u:c??v?14:Te,width:"100%",display:"flex",flexDirection:"column",gap:1}})),[h,d,u,c,v]);return(0,D.jsxs)("div",{ref:y,style:j.toggle,className:`${b}-container`,children:[S().A.isMobile&&"team"===t?(0,D.jsx)(Ae,{...e,outlinerToggleButtonStore:f,isHidden:h,labelAriaId:x,contentsAriaId:T}):(0,D.jsx)(Ie,{...e,outlinerToggleButtonStore:f,isHidden:h,labelAriaId:x,contentsAriaId:T}),!h&&r({headerRef:y,labelAriaId:x,contentsAriaId:T})]})}function Ae(e){const{type:t}=e,o=xe[t],n=(0,s().IS)((e=>({sidebarItem:{padding:0},sidebarItemChildren:{overflow:"visible"}})),[]);return(0,D.jsx)(ye().A,{className:o,style:n.sidebarItem,childrenStyle:n.sidebarItemChildren,right:(0,D.jsx)(Be,{right:e.right,from:e.from,showAddButton:e.showAddButton,type:e.type,spaceStore:e.spaceStore,spaceViewStore:e.spaceViewStore,shouldPersistToggleState:e.shouldPersistToggleState,outlinerToggleButtonStore:e.outlinerToggleButtonStore}),children:(0,D.jsx)(Ie,{...e})})}function Ie(e){const{type:t,isHidden:o,teamOutlinerType:c,teamStore:u,labelAriaId:v,contentsAriaId:b,forceHoveredButtonStyle:T,spaceViewStore:x,shouldPersistToggleState:j,outlinerToggleButtonStore:A}=e,I=(0,a().v3)(),{isTablet:w}=(0,a().Y0)(),[B,M]=(0,n.useState)(!1),[C,k]=(0,n.useState)(!1),R=B||C||Boolean(T),L=(0,i().K8)((()=>"team"===t&&(0,h().Gn)({environment:I,teamStore:u})),[I,u,t]),_=xe[t],O=(0,fe().ab)(),P=(0,s().IS)((e=>({label:{...ke(e),..."team"===t&&{width:"100%"},...R&&!w&&{color:e.darkTextColor},...S().A.isMobile&&"team"!==t&&{fontWeight:w?m().Wy.regular:m().Wy.semibold,paddingLeft:w?5:8,fontSize:w?15:13}},button:{...!("team"===t&&S().A.isMobile)&&Ce(c),...(0,f().ic)(),..."team"===t&&{width:"100%",...f().hG},...L&&O.currentSelectedSidebarItem},hoveredButton:{background:e.sidebarItemSelectedBackground},rightLabelWrapper:{marginLeft:"auto",marginRight:w?8:void 0}})),[t,R,c,L,O.currentSelectedSidebarItem,w]),H=(0,n.useCallback)((()=>{!function(e,t,o,n,a,r,i){const{isHidden:s}=i.state,d=!s;"team"===t?be().Of({environment:e,spaceViewStore:o,teamStore:n,outlinerToggleButtonStore:i,newIsHidden:d,shouldPersistToggleState:a,teamOutlinerType:r,isExplicitUserAction:!0}):t===l().yy?g().Wx({environment:e,type:t,outlinerToggleButtonStore:i,newIsHidden:d,shouldPersistToggleState:!1}):g().Wx({environment:e,spaceViewStore:o,type:t,outlinerToggleButtonStore:i,newIsHidden:d,shouldPersistToggleState:a})}(I,t,x,u,j,c,A)}),[I,t,x,u,c,j,A]),U=(0,n.useCallback)((e=>{u&&p().navigateOnBaseUrl({environment:I,url:(0,d().a)({teamId:u.id,spaceId:u.getSpaceId()}),openInNew:e.metaKey||e.ctrlKey?"tab":void 0})}),[I,u]),W=(0,n.useCallback)((()=>M(!0)),[M]),G=(0,n.useCallback)((()=>M(!1)),[M]),K=(0,n.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,r().p)(t)&&k(!0)}),[k]),N=(0,n.useCallback)((()=>k(!1)),[k]),q=(0,i().K8)((()=>u&&(0,y().D)({isMobileNative:I.device.isMobileNative,disableExposureLogging:!0})),[u,I]),F=(0,i().K8)((()=>!he().A.state.online&&I.device.isElectron&&q&&Se().default.checkGate({gateName:"download_for_offline"})),[I,q]);return(0,D.jsxs)(ne().A,{className:_,..."team"===t?{"aria-labelledby":v}:{id:v},"aria-expanded":!o,"aria-controls":b,style:P.button,hoveredStyle:P.hoveredButton,hovered:!!T||void 0,onClick:w?H:q?U:H,onMouseMove:W,onMouseLeave:G,onFocus:K,onBlur:N,disabled:"publicPageTemplateIncludes"===t||F,disabledFeedback:F,children:[(0,D.jsx)("span",{style:P.label,children:"team"===t?(0,D.jsx)(ge,{isHovered:R,isExpanded:!o,teamStore:e.teamStore,label:e.teamHeaderLabel,outlinerToggleButtonStore:e.outlinerToggleButtonStore,outlinerTeamOnToggle:H,shouldPersistToggleState:e.shouldPersistToggleState,teamOutlinerType:e.teamOutlinerType,labelAriaId:e.labelAriaId}):Me(t)?e.sectionLabel:we(t)}),(0,D.jsx)("div",{style:P.rightLabelWrapper,children:(0,D.jsx)(Be,{right:e.right,showAddButton:e.showAddButton,from:e.from,type:t,spaceStore:e.spaceStore,spaceViewStore:e.spaceViewStore,shouldPersistToggleState:e.shouldPersistToggleState,isHovered:R,outlinerToggleButtonStore:e.outlinerToggleButtonStore})})]})}function we(e){switch(e){case"bookmarks":return(0,D.jsx)(c().sA,{defaultMessage:"Favorites",id:"sidebar.favoritesSection.header"});case"workspace":return(0,D.jsx)(c().sA,{defaultMessage:"Workspace",id:"sidebar.workspaceSection.header"});case"private":return(0,D.jsx)(c().sA,{defaultMessage:"Private",id:"sidebar.privateSection.header"});case"shared":return(0,D.jsx)(c().sA,{defaultMessage:"Shared",id:"sidebar.sharedSection.header"});default:(0,u().HB)(e)}}function Be(e){let{right:t,showAddButton:o,isHovered:n,...r}=e;const{isTablet:i}=(0,a().Y0)(),l=(0,s().IS)((()=>({wrapper:{display:"flex",alignItems:"center",gap:i?12:void 0,opacity:i||n?1:0,pointerEvents:n?"auto":"none",transition:`opacity ${f().bM}`}})),[n,i]);return(0,D.jsxs)("div",{style:l.wrapper,children:[t,o&&(0,D.jsx)(ve,{...r})]})}function Me(e){return"teamSidebar"===e||"teamBrowserJoinedTeams"===e||"teamBrowserUnjoinedTeams"===e||"teamBrowserSearch"===e||"publicPageTemplateIncludes"===e}function Ce(e){return{display:"flex",alignItems:"center",borderRadius:6,cursor:void 0,...!(e&&b(e))&&{height:fe().Zr}}}function ke(e){return{textTransform:"initial",fontSize:12,lineHeight:1,color:e.sidebarSecondaryColor,fontWeight:m().Wy.medium,transition:"color 100ms ease-out"}}const Re=n.memo(je)},655784:(e,t,o)=>{o.d(t,{A:()=>c});o(581454);var n=o(296540),a=()=>o(484714),r=()=>o(56366),i=()=>o(959013),s=()=>o(496603),l=()=>o(418426),d=o(474848);const c=function(e){const{teamStore:t,from:c,onLeavingTeam:u,style:m,hoveredStyle:g,icon:p,isRed:S,placement:v,alignment:f,buttonInternals:h}=e,b=(0,a().v3)(),y=(0,r().O$)(o(765957).AppStoreCurrentSpaceStore),T=(0,l().$)(t),x=(0,n.useCallback)((async()=>{if(!y)return;await o(848237).JC({environment:b,teamStore:t,from:c,userGroupsInTeam:T})&&(null==u||u())}),[y,b,t,c,T,u]),j=(0,d.jsx)(i().sA,{id:"teamJoinLeaveButton.leaveTeam.enabledTooltip",defaultMessage:"Click to leave teamspace"}),A=function(e){let{teamStore:t}=e;const o=(0,a().v3)(),n=o.currentUser.id,{isDefaultTeam:c}=(0,r().K8)((()=>({isDefaultTeam:t.isDefault()})),[t]),u=(0,l().$)(t),m=(0,r().K8)((()=>{if(!t.isReady())return!1;const{ownerUserIds:e,ownerGroupIds:o}=t.getAllOwnerIds();return Boolean(n&&t.isOwner(n)&&e.length+o.length===1)}),[t,n]);return function(e){let{isDefaultTeam:t,isOnlyTeamOwner:o,userGroupsInTeam:n}=e;if(t)return(0,d.jsx)(i().sA,{id:"teamBrowser.teamCard.leaveTeam.defaultTeamTooltip",defaultMessage:"You can’t leave this teamspace because everyone in the workspace must be a member"});if(o)return(0,d.jsx)(i().sA,{id:"teamJoinLeaveButton.leaveTeam.onlyOwnerTooltip",defaultMessage:"Invite another teamspace owner to leave this teamspace"});if(n.length>0)return(0,d.jsx)(i().sA,{id:"teamBrowser.teamCard.leaveTeam.groupTooltip",defaultMessage:"{groupNames, plural, one {You can't leave this teamspace because you're a member of multiple groups, {groupNames}.} other {You can't leave this teamspace because you're a member of the group, {groupNames}.}}",values:{groupNames:s().oE(n.map((e=>e.name))).join()}})}({isDefaultTeam:c,isOnlyTeamOwner:m,userGroupsInTeam:u})}({teamStore:t}),I=Boolean(A),w=I?A:j;return(0,d.jsx)(o(859428).A,{style:I?{width:240}:void 0,disableTooltip:!Boolean(w),renderTooltip:e=>(0,d.jsx)("div",{...e,children:w}),textWrap:I,placement:v,alignment:f,render:e=>(0,d.jsx)(o(493823).p,{...e,style:m,hoveredStyle:g,onClick:x,disabled:I,disabledFeedback:I,iconLeading:p,isRed:S,children:h||(0,d.jsxs)(d.Fragment,{children:[(0,o(831310).o)({width:12.5,marginRight:4}),(0,d.jsx)(i().sA,{id:"teamBrowser.teamCard.button.joined",defaultMessage:"Joined"})]})})})}},986863:(e,t,o)=>{o.d(t,{u:()=>r});var n=()=>o(645873);const a=new(n().O2)("teamPermissionsInviteWithModal",(async()=>await Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,487443)))),r=(0,n()._h)(a,(e=>e.TeamPermissionsInviteWithModal))}}]);