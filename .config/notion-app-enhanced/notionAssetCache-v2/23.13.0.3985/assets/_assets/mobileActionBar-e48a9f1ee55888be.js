"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[22542,49222],{22394:(e,t,i)=>{i.d(t,{o:()=>n});i(296540);var o=i(474848);const n=(0,i(340498).wt)("circleCheck",{viewBox:"0 0 12 12",svg:(0,o.jsx)("path",{d:"M6.09277 11.1855C8.88574 11.1855 11.1855 8.88574 11.1855 6.09277C11.1855 3.30469 8.88086 1 6.08789 1C3.2998 1 1 3.30469 1 6.09277C1 8.88574 3.2998 11.1855 6.09277 11.1855ZM6.09277 10.0674C3.89062 10.0674 2.12305 8.29492 2.12305 6.09277C2.12305 3.89062 3.88574 2.11816 6.08789 2.11816C8.29492 2.11816 10.0625 3.89062 10.0674 6.09277C10.0723 8.29492 8.29492 10.0674 6.09277 10.0674ZM5.57031 8.41699C5.75586 8.41699 5.92188 8.31934 6.0293 8.15332L8.17773 4.81836C8.24609 4.71094 8.2998 4.58887 8.2998 4.47656C8.2998 4.21289 8.07031 4.03711 7.82129 4.03711C7.66016 4.03711 7.51855 4.125 7.41113 4.30078L5.55566 7.2793L4.68652 6.19043C4.56934 6.03906 4.44727 5.98047 4.2959 5.98047C4.03711 5.98047 3.82715 6.18555 3.82715 6.44922C3.82715 6.57129 3.87598 6.68359 3.96387 6.7959L5.0918 8.1582C5.22852 8.3291 5.37988 8.41699 5.57031 8.41699Z"})})},43492:(e,t,i)=>{i.r(t),i.d(t,{MobileActionBar:()=>z});var o=i(296540),n=()=>i(662303),a=()=>i(395361),r=()=>i(484714),s=()=>i(792485),l=()=>i(56366),c=()=>i(401497),d=()=>i(700500),u=()=>i(668725),m=()=>i(340498),g=i(474848);const p=(0,m().wt)("indentDown",{viewBox:"0 0 30 30",svg:(0,g.jsx)("path",{d:"M24,15l-1.406-1.406L16,20.188V2h-2v18.188l-6.594-6.594L6,15l9,9L24,15z M2,26v2h26v-2H2z"})});const b=(0,m().wt)("moveUp",{viewBox:"0 0 30 30",svg:(0,g.jsx)("path",{d:"M14,5.813V24h2V5.813l6.594,6.594L24,11l-9-9l-9,9l1.406,1.406L14,5.813z M2,26v2h26v-2H2z"})}),v=(0,m().wt)("redo",{viewBox:"0 0 16 16",directional:!0,svg:(0,g.jsx)("path",{d:"M1.45117 10.6826C1.45117 13.4102 3.24219 15.208 6.29785 15.208H7.93848C8.38281 15.208 8.69727 14.873 8.69727 14.4629C8.69727 14.0459 8.38281 13.7109 7.93848 13.7109H6.3457C4.14453 13.7109 2.92773 12.4053 2.92773 10.6211C2.92773 8.84375 4.14453 7.59277 6.3457 7.59277H10.7002L12.2793 7.52441L11.0762 8.53613L9.31934 10.252C9.18262 10.3887 9.10059 10.5527 9.10059 10.7715C9.10059 11.1953 9.39453 11.5029 9.83203 11.5029C10.0234 11.5029 10.2285 11.4141 10.3721 11.2705L14.3027 7.40137C14.46 7.25098 14.542 7.05273 14.542 6.84766C14.542 6.64258 14.46 6.4375 14.3027 6.29395L10.3721 2.4248C10.2285 2.28125 10.0234 2.19238 9.83203 2.19238C9.39453 2.19238 9.10059 2.5 9.10059 2.91699C9.10059 3.14258 9.18262 3.30664 9.31934 3.43652L11.0762 5.15234L12.2793 6.1709L10.7002 6.10254H6.38672C3.2832 6.10254 1.45117 7.96875 1.45117 10.6826Z"})});var y=()=>i(948352),f=()=>i(959013),h=()=>i(284371),S=()=>i(328523),A=()=>i(132867),k=()=>i(495262),x=()=>i(862292),T=()=>i(986260),M=()=>i(600871),w=()=>i(231722),C=()=>i(906537),I=()=>i(140862),P=()=>i(962730),_=()=>i(195613),B=()=>i(574012),R=()=>i(75368),U=()=>i(205682),j=()=>i(502438),N=()=>i(24157),E=()=>i(704152),L=()=>i(897119),D=()=>i(213799),F=()=>i(720263),V=()=>i(236228),O=()=>i(777849),q=()=>i(780243);const H=42;function z(e){const{stores:t,position:i,currentBlockStore:u}=e,m=(0,r().v3)(),p=(0,s().S)(),b=(0,r().Y0)(),v=b.isMobileNative,y=b.isSmallPhone,R=(0,I().A)(!0),z=(0,l().K8)((()=>T().rV(m,u,null==p?void 0:p.publicEditModeStore.state)),[m,u,null==p?void 0:p.publicEditModeStore]),re=(0,l().K8)((()=>m.WindowSizeStore.state),[m]),se=(0,c().IS)((e=>({button:{display:"flex",alignItems:"center",padding:"0 8px",whiteSpace:"nowrap"},actionButton:{height:"100%",width:"100%",fontSize:15,display:"flex",boxShadow:i===M().nh.Bottom?e.bottomActionBarShadow:e.shadowMD,backgroundColor:e.keyboardActionBarBackground,paddingLeft:v?re.paddingLeftCSS:0,paddingRight:v?re.paddingRightCSS:0},item:{display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:y?8:10,paddingRight:y?8:10,borderRight:`1px solid ${e.regularDividerColor}`,whiteSpace:"nowrap",height:H,flexShrink:0,flexGrow:0,flexBasis:"auto",color:e.text.primary,minWidth:y?42:44},minorItem:{width:34,justifyContent:"center"},itemBorderLeft:{borderLeft:`1px solid ${e.regularDividerColor}`},selectionLinkSpan:{borderBottom:`1px solid ${e.linkDecorationColor}`},actionMenu:{flexGrow:1,flexShrink:1,marginRight:-1,display:"flex",overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch"}})),[i,v,re,y]),le=(0,l().K8)((()=>m.device.isMobileBrowser?t.store.state.isOpen:z.shouldShow),[m,t,z]),ce=(0,l().K8)((()=>B().A.mobileNativeBottomPadding(m)),[m]),de=(0,l().K8)((()=>T().ou({environment:m,store:u})),[m,u]),ue=(0,l().K8)((()=>T().BT(t.ignoreSelectionAreaStore,m.TextSelectionCompositionStore,u,!1)),[t,m,u]),{canTriggerTextActions:me,canTriggerCommentAction:ge,canTriggerBlockActions:pe,hasMultiBlockSelection:be,currentSelection:ve}=(0,l().K8)((()=>{const e=T().xr(p&&p.publicEditModeStore.state,u),t=u.canComment(),i=!ue&&T().nC(p&&p.publicEditModeStore.state),o=N().default.state;return{canTriggerTextActions:e,canTriggerCommentAction:t,canTriggerBlockActions:i,hasMultiBlockSelection:"editing"===o.mode&&!(0,w().KP)(o.multiSelection),currentSelection:j().default.state.stores[0]}}),[p,u,ue]),ye=((0,l().K8)((()=>{const e=N().default.state;if("editing"===e.mode){const t=e.multiSelection.end;return{scrollTop:_().A.state.scrollTop_DEPRECATED,editing:!0,store:t.store.id,selection:t}}return{scrollTop:_().A.state.scrollTop_DEPRECATED,editing:!1}}),[]),(0,a().Y)((()=>S().cW(m)),500)),fe=(0,o.useRef)(null),he=(0,o.useRef)(void 0),Se=(0,o.useRef)(!1);(0,o.useLayoutEffect)((()=>{if(v)z.shouldShow!==Se.current&&(Se.current=z.shouldShow,fe.current&&(fe.current.scrollLeft=0));else{const e=t.store.state.isOpen;z.shouldShow?e?void 0!==he.current&&(window.clearTimeout(he.current),he.current=void 0):(t.store.setState({...t.store.state,isOpen:!0}),fe.current&&(fe.current.scrollLeft=0)):e&&void 0===he.current&&(he.current=window.setTimeout((()=>{he.current=void 0,t.store.setState({...t.store.state,isOpen:!1})}),200))}}),[m,v,z.shouldShow,t.store]);const Ae=(0,l().K8)((()=>({canIndent:A().v6(ve),canUnindent:A().mE(ve)})),[ve]),ke=(0,l().K8)((()=>{let e=!1,t=!1;const i=u.getType();if(i){const o=u.getFormat();(0,d().pD)(i,o)||(e=!0),(0,d().Q3)(i)||(t=!0)}return U().A.state.isOpen&&(e=!1),{canTriggerCommentAction:e,canTriggerMentionAction:t}}),[u]),xe=(0,l().K8)((()=>({canUndo:k().BB(),canRedo:k().fH()})),[]),Te=()=>{const{canTriggerCommentAction:e,canTriggerMentionAction:i}=ke;return(0,g.jsxs)("div",{ref:fe,style:se.actionMenu,onScroll:ye,children:[(0,g.jsxs)(E().A,{disabledFeedback:!0,style:{...se.item,...!y&&{paddingLeft:12,paddingRight:12}},onClick:()=>{t.store.setState({...t.store.state,isInsertOpen:!0}),ae("insert",m)},disabled:!pe,children:[J,(0,g.jsx)(K,{})]}),(0,g.jsxs)(E().A,{disabledFeedback:!0,style:{...se.item,fontWeight:h().Wy.medium},onClick:e=>{t.store.setState({...t.store.state,isTurnIntoOpen:!0}),ae("turn_into",m)},disabled:!pe,children:[(0,g.jsx)(f().sA,{defaultMessage:"Turn into",id:"mobileActionBar.turnInto.buttonTitle"}),(0,g.jsx)(K,{})]}),(0,g.jsx)(E().A,{disabledFeedback:!0,...R,style:se.item,onClick:()=>T().FN(m),disabled:!i,children:(0,g.jsx)("span",{style:{fontSize:19,lineHeight:1,fontWeight:h().Wy.medium,marginBottom:m.device.isAndroid?4:0},children:"@"})}),(0,g.jsx)(E().A,{disabledFeedback:!0,style:se.item,onClick:async()=>{const e=await x().T.formulas.load();T().aI(m,"mobile_action_bar",e)},disabled:!e,children:Z}),(0,g.jsx)(E().A,{disabledFeedback:!0,style:se.item,onClick:()=>T().zc(m),disabled:!pe,children:Q}),(0,g.jsx)(E().A,{disabledFeedback:!0,style:se.item,onClick:()=>T()._Y(m),disabled:!pe,children:$}),(0,g.jsxs)("div",{style:{...se.item,paddingLeft:6,paddingRight:6},children:[(0,g.jsx)(E().A,{disabledFeedback:!0,style:se.minorItem,disabled:!pe||!Ae.canUnindent,onClick:()=>T().u7(m),children:G}),(0,g.jsx)(E().A,{disabledFeedback:!0,style:se.minorItem,disabled:!Ae.canIndent,onClick:()=>T().lS(m),children:X}),(0,g.jsx)(E().A,{disabledFeedback:!0,style:se.minorItem,disabled:!pe,onClick:()=>T().FP(m),children:ee}),(0,g.jsx)(E().A,{disabledFeedback:!0,style:se.minorItem,disabled:!pe,onClick:()=>T().cM(m),children:te})]}),(0,g.jsxs)("div",{style:{...se.item,paddingLeft:6,paddingRight:6},children:[(0,g.jsx)(E().A,{disabledFeedback:!0,style:se.minorItem,disabled:!xe.canUndo,onClick:()=>T().RA(m),children:ie}),(0,g.jsx)(E().A,{disabledFeedback:!0,style:se.minorItem,disabled:!xe.canRedo,onClick:()=>T().xT(m),children:oe})]}),(0,g.jsxs)(E().A,{disabledFeedback:!0,style:{...se.item,fontWeight:h().Wy.medium},onClick:e=>{t.store.setState({...t.store.state,isColorOpen:!0}),ae("color",m)},disabled:!pe,children:[(0,g.jsx)(f().sA,{defaultMessage:"Color",id:"mobileActionBar.color.buttonTitle"}),(0,g.jsx)(K,{})]}),(0,g.jsxs)(E().A,{disabledFeedback:!0,style:{...se.item,fontWeight:h().Wy.medium},onClick:()=>T().al(m),disabled:!pe,children:[(0,g.jsx)(f().sA,{defaultMessage:"More",id:"mobileActionBar.more.buttonTitle"}),(0,g.jsx)(K,{})]})]})},Me=()=>(0,g.jsxs)("div",{style:se.actionButton,children:[de?(0,g.jsx)(W,{itemStyle:se.item,actionMenuStyle:se.actionMenu}):ue?(0,g.jsxs)("div",{style:se.actionMenu,onScroll:ye,children:[ge&&!U().A.state.isOpen&&(0,g.jsx)(F().A,{style:se.item,blockStore:ve,iconOnly:!1}),(0,g.jsx)(V().A,{type:"b",style:se.item,onClick:()=>ae("bold",m),disabled:!me,children:(0,g.jsx)("span",{style:{fontWeight:h().Wy.semibold},children:(0,g.jsx)(f().sA,{defaultMessage:"B",id:"mobileActionBar.bold.symbol"})})}),(0,g.jsx)(V().A,{type:"i",style:se.item,onClick:()=>ae("italic",m),disabled:!me,children:(0,g.jsx)("span",{style:{fontStyle:"italic",fontWeight:h().Wy.semibold},children:(0,g.jsx)(f().sA,{defaultMessage:"i",id:"mobileActionBar.italic.symbol"})})}),(0,g.jsx)(V().A,{type:"_",style:se.item,onClick:()=>ae("underline",m),disabled:!me,children:(0,g.jsx)("span",{style:{textDecoration:"underline"},children:(0,g.jsx)(f().sA,{defaultMessage:"U",id:"mobileActionBar.underline.symbol"})})}),(0,g.jsx)(V().A,{type:"s",style:se.item,onClick:()=>ae("strike_through",m),disabled:!me,children:(0,g.jsx)("span",{style:{textDecoration:"line-through"},children:(0,g.jsx)(f().sA,{defaultMessage:"S",id:"mobileActionBar.strikeThrough.symbol"})})}),(0,g.jsx)(E().A,{disabledFeedback:!0,style:se.button,disabled:!Ae.canUnindent,onClick:()=>T().u7(m),children:G}),(0,g.jsx)(E().A,{disabledFeedback:!0,style:se.button,disabled:!Ae.canIndent,onClick:()=>T().lS(m),children:X}),(0,g.jsx)(V().A,{type:"c",style:se.item,onClick:()=>ae("code",m),disabled:!me,children:(0,g.jsx)("span",{style:{fontFamily:h().vc(n().locale).githubMono},children:(0,g.jsx)(f().sA,{defaultMessage:"Code",id:"mobileActionBar.code.symbol"})})}),(0,g.jsx)(q().A,{style:se.item,disabled:!me||be,children:(0,g.jsx)("span",{style:se.selectionLinkSpan,children:(0,g.jsx)(f().sA,{defaultMessage:"Link",id:"mobileActionBar.link.symbol"})})}),(0,g.jsx)(O().A,{onClick:()=>ae("equation",m),disabled:!me||be,style:se.item,children:Y}),(0,g.jsx)(D().A,{style:se.item,disabled:!me})]}):Te(),(0,g.jsx)(E().A,{disabledFeedback:!0,style:{...se.item,...se.itemBorderLeft,borderRight:"none"},onClick:()=>T().EZ(t,m),children:ne})]});if(i===M().nh.Bottom)return(0,g.jsx)("div",{style:{position:"absolute",bottom:ce,left:0,height:H,width:"100%",pointerEvents:le?"auto":"none",opacity:le?1:0,transform:le?"translateY(0)":`translateY(${H}px)`,transition:"opacity 120ms ease-out, transform 120ms ease-out"},children:Me()});{const e=C().getSelectionRect();if(!e)return null;const t=document.body.getBoundingClientRect(),i={...e,left:10,top:e.top+10-t.top};return(0,g.jsx)(L().Ay,{popupType:v?L().nl.SlideUp:L().nl.Popup,open:le,preventBlockRenderQueueOnEnter:!0,placementToOrigin:P().W.Bottom,alignmentToOrigin:P().C.Start,originRect:i,disableMouseCapture:!0,keepFocus:!0,render:()=>(0,g.jsx)("div",{style:{height:H,borderRadius:4,overflow:"hidden"},children:Me()})})}}function W(e){let{itemStyle:t,actionMenuStyle:i}=e;const o=(0,r().v3)();return(0,g.jsx)("div",{style:i,children:(0,g.jsxs)(E().A,{disabledFeedback:!0,style:{...t,borderRight:"none",fontWeight:h().Wy.medium},onClick:e=>{R().A.setState({open:!0}),ae("templates",o)},children:[(0,y().M)({width:20,marginRight:8}),(0,g.jsx)(f().sA,{defaultMessage:"Choose a template...",id:"mobileActionBar.templates.buttonTitle"}),(0,g.jsx)(K,{})]})})}function K(){const e=(0,c().IS)((e=>({chevron:{width:10,marginLeft:4,fill:e.icon.tertiary}})),[]);return(0,u().b)(e.chevron)}const G=p({width:18,height:18,transform:"rotate(90deg)",position:"relative",left:1}),X=p({width:18,height:18,transform:"rotate(-90deg)",position:"relative",left:-1}),Y=(0,i(339764).c)({width:16,height:16}),J=(0,i(124085).P)({width:14,height:14}),Z=(0,i(965998).M)({width:18,height:18}),Q=(0,i(461515).F)({width:18,height:18}),$=(0,i(735384).I)({width:18,height:18}),ee=b({width:18,height:18,position:"relative",left:2}),te=b({width:18,height:18,transform:"rotate(180deg)",position:"relative",left:2}),ie=(0,i(112452)._)({width:19,height:19}),oe=v({width:19,height:19}),ne=(0,i(680243).l)({width:18,height:18});function ae(e,t){S().np(t,{itemName:e})}},97835:(e,t,i)=>{i.d(t,{x:()=>a});i(296540);var o=i(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"3.68 2.37 15.82 17.13",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242M7.676 6.441c0-.842.233-1.554.624-2.042.38-.473.937-.774 1.7-.774s1.32.301 1.7.774c.391.488.624 1.2.624 2.042s-.233 1.554-.624 2.041c-.38.473-.937.774-1.7.774s-1.32-.3-1.7-.774c-.391-.487-.624-1.2-.624-2.041M10 11.63c-2.7 0-5.101 1.315-6.12 3.305-.361.706-.199 1.421.23 1.923.412.48 1.06.767 1.74.767h5.845a4.6 4.6 0 0 1-.28-1.25H5.85c-.342 0-.634-.148-.79-.33-.138-.162-.172-.336-.067-.54.761-1.488 2.672-2.626 5.007-2.626.83 0 1.605.144 2.294.395.269-.364.59-.688.952-.96A7.9 7.9 0 0 0 10 11.63"}),(0,o.jsx)("path",{d:"M16 19.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7m2.594-3.469a.625.625 0 0 0-.625-.625h-1.375v-1.375a.625.625 0 0 0-1.25 0v1.375h-1.375a.625.625 0 0 0 0 1.25h1.375v1.375a.625.625 0 1 0 1.25 0v-1.375h1.375c.345 0 .625-.28.625-.625"})]})},a=(0,i(340498).wt)("inviteMember",n)},104077:(e,t,i)=>{i.d(t,{r:()=>n});i(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.79 2.35 14.41 15.68",svg:(0,i(474848).jsx)("path",{d:"M10 2.355a2.35 2.35 0 0 0-2.253 1.686 5.06 5.06 0 0 0-2.803 4.527v1.189c0 .919-.334 1.806-.939 2.498l-.818.935c-.881 1.007-.166 2.583 1.173 2.583h3.02a2.65 2.65 0 0 0 5.24 0h3.02c1.339 0 2.054-1.576 1.173-2.583l-.818-.935a3.8 3.8 0 0 1-.939-2.498v-1.19a5.06 5.06 0 0 0-2.803-4.526A2.35 2.35 0 0 0 10 2.355m1.5 13.418a1.55 1.55 0 0 1-2.998 0zM8.909 4.564A1.104 1.104 0 0 1 10 3.605c.556 0 1.017.415 1.091.96l.049.353.329.138a3.81 3.81 0 0 1 2.337 3.512v1.189c0 1.221.444 2.401 1.248 3.32l.818.936a.307.307 0 0 1-.232.51H4.36a.308.308 0 0 1-.232-.51l.818-.935a5.04 5.04 0 0 0 1.248-3.321v-1.19c0-1.58.963-2.936 2.337-3.511l.33-.138z"})},n=(0,i(340498).wt)("bell",o)},108414:(e,t,i)=>{i.d(t,{A:()=>n});class o extends(()=>i(757695))().Store{getInitialState(){return{open:!1}}}const n=new o},112799:(e,t,i)=>{i.d(t,{a:()=>c,E:()=>l});i(16280);var o=i(296540),n=()=>i(484714),a=(i(898992),i(672577),()=>i(427704));a().GJ.downloadMac,a().GJ.downloadMacUniversal,a().GJ.downloadMacIntel,a().GJ.downloadMacAppleSilicon,a().GJ.downloadWindows,a().GJ.downloadWindowsArm;const r=[{route:a().GJ.downloadMac,architecture:"universal",operatingSystem:"mac",target:"macUniversal"},{route:a().GJ.downloadMacIntel,architecture:"x86",operatingSystem:"mac",target:"mac"},{route:a().GJ.downloadMacUniversal,architecture:"universal",operatingSystem:"mac",target:"macUniversal"},{route:a().GJ.downloadMacAppleSilicon,architecture:"arm",operatingSystem:"mac",target:"macArm64"},{route:a().GJ.downloadWindows,architecture:"x86",operatingSystem:"windows",target:"windows"},{route:a().GJ.downloadWindowsArm,architecture:"arm",operatingSystem:"windows",target:"windowsArm64"}];function s(e,t){const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=e.toLowerCase();if(t.startsWith("arm"))return"arm";if(t.startsWith("x86")||"intel"===t)return"x86";return null}(e);if(!i||!("mac"===t||"windows"===t))return null;const o=r.find((e=>e.architecture===i&&e.operatingSystem===t));return(null==o?void 0:o.route)||null}function l(){const e=(0,o.useRef)(null),t=(0,n().Y0)();return(0,o.useEffect)((()=>{c(t).then((t=>{e.current=t??null})).catch((e=>{throw new Error(e)}))}),[t]),e}async function c(e){var t;if(!("userAgentData"in navigator))return e.isMac?a().GJ.downloadMacUniversal:a().GJ.downloadWindows;const i=navigator.userAgentData,o=await(null==i||null===(t=i.getHighEntropyValues)||void 0===t?void 0:t.call(i,["architecture"])),n=s(null==o?void 0:o.architecture,e.os);return n||null}},114816:(e,t,i)=>{i.r(t),i.d(t,{NativeMobileActionBar:()=>We});i(898992),i(823215),i(430670),i(803949),i(581454),i(737550);var o=i(296540),n=()=>i(266625),a=()=>i(484714),r=()=>i(118884),s=()=>i(792485),l=()=>i(56366),c=()=>i(110750),d=()=>i(700500),u=()=>i(651124),m=()=>i(278238),g=()=>i(206267),p=(i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698),i(354520),i(672577),()=>i(381349)),b=()=>i(534177),v=()=>i(148307),y=(i(908872),()=>i(671593)),f=()=>i(638681);function h(e,t,i){const{content:o,apiRequestValue:n}=i;return{id:e,content:o,action:{type:t,apiRequestValue:n}}}function S(e,t,i,o,n){return h(e,"webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:t},accessibilityText:n,selected:o},apiRequestValue:{menuType:i,actionId:e,context:void 0}})}function A(e,t,i,o,n){return h(e,"webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:t},accessibilityText:n,selected:o},apiRequestValue:{menuType:i,actionId:e,context:void 0}})}const k=["insertBlock","turnInto","textColor","textSelectionColor"];const x=["suggested","textFormatting","slashMenu","turnInto","textColor","textSelectionColor","more"];function T(e,t){return{type:e,apiRequestValue:t}}function M(e,t){const i={from:t,data:e};return JSON.stringify(i)}const w=f().object({required:{data:f().object({required:{action:f().literals("bold","italic","underline","strikethrough","link","code","equation","mention","trash","comment","emojiPicker","filePicker","indent","unindent","moveUp","moveDown","undo","redo","dismissKeyboard","more","ai","voiceInput","filing","templates","todoListTemplate","meetingNotesTemplate","weeklyPlanTemplate","copyLinkToBlock","databaseDiscoveryModal","teamspaceSelector","toggleNumberPositivity")},optional:{}})},optional:{from:f().literals("mobile_action_bar","mobile_text_formatting_menu")}});let C=function(e){return e[e.InvalidActionType=0]="InvalidActionType",e[e.MissingPayload=1]="MissingPayload",e[e.InvalidRequestType=2]="InvalidRequestType",e[e.InvalidData=3]="InvalidData",e}({});class I{constructor(e,t){this.type=e,this.message=t}}function P(e){return 0===e.reduce(((e,t)=>e+t.items.length),0)}const _=h("mab.button.back","nativeAction_setSubMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"chevron.backward.2",localImageIdentifier:"back"},accessibilityText:""},apiRequestValue:{subMenuType:void 0,context:void 0}});h("mab.button.noResults","nativeAction_setSubMenuType",{content:{type:"text_and_icon",imageReference:{},accessibilityText:"",text:"No results",fullWidth:!0,disabled:!0},apiRequestValue:{subMenuType:void 0,context:void 0}});function B(e,t,i,o){return h("mab.button.indent","webAction_generic",{content:{type:"icon",imageReference:o,disabled:e||t,accessibilityText:i},apiRequestValue:{jsonPayload:M({action:"indent"}),context:void 0}})}function R(e,t,i,o){return h("mab.button.unindent","webAction_generic",{content:{type:"icon",imageReference:o,accessibilityText:i,disabled:e||t},apiRequestValue:{jsonPayload:M({action:"unindent"}),context:void 0}})}function U(e,t,i){return h("mab.button.moveUp","webAction_generic",{content:{type:"icon",imageReference:i,accessibilityText:t,disabled:e},apiRequestValue:{jsonPayload:M({action:"moveUp"}),context:void 0}})}function j(e,t,i){return h("mab.button.moveDown","webAction_generic",{content:{type:"icon",imageReference:i,accessibilityText:t,disabled:e},apiRequestValue:{jsonPayload:M({action:"moveDown"}),context:void 0}})}function N(e){const{createAIAction:t,createDictationAction:i,createMeetingNotesAction:o,disableDictationActions:n,disableTextActions:a,disableAIAction:r,disableBlockActions:s,disableCommentAction:l,disableMentionAction:c,selectedMenuType:d,disableInsertBlockAction:u,disableTurnIntoAction:m,disableTextFormatting:g,disableTextColorAction:b,disableDeleteBlock:y,disableUndo:f,disableRedo:k,disableIndent:x,disableUnindent:T,disableLinkAction:w,disableCopyLinkToBlock:C,disableEquationAction:I,isEditingTitle:P,shouldShowTextActions:_,usePillStyling:N,isPersonalizedActionsEnabled:E,textSelectionColor:L,textFormattingSelections:D,titleTexts:F,accessibilityTexts:V,teamIcon:q,teamspaceName:z,theme:W}=e,K=_?"textSelectionColor":"textColor",G=function(e){const{usePillStyling:t,titleTexts:i,theme:o}=e,n=t?"pill":"filled";return{todoListTemplate:h("mab.button.template.todolist","webAction_generic",{content:{type:"text_and_icon",text:i.todoListTemplate,style:n,imageReference:{imageUrl:v().A.images.mab.blocks.toDoSvg,imageTintColor:(0,p().vU)(o.icon.secondary)}},apiRequestValue:{jsonPayload:M({action:"todoListTemplate"}),context:void 0}}),meetingNotesTemplate:h("mab.button.template.meetingNotes","webAction_generic",{content:{type:"text_and_icon",text:i.meetingNotesTemplate,style:n,imageReference:{imageUrl:v().A.images.mab.blocks.transcriptionSvg,imageTintColor:(0,p().vU)(o.icon.secondary)}},apiRequestValue:{jsonPayload:M({action:"meetingNotesTemplate"}),context:void 0}}),weeklyPlanTemplate:h("mab.button.template.weeklyPlan","webAction_generic",{content:{type:"text_and_icon",text:i.weeklyPlanTemplate,style:n,imageReference:{imageUrl:v().A.images.mab.database.calendarViewSvg,imageTintColor:(0,p().vU)(o.icon.secondary)}},apiRequestValue:{jsonPayload:M({action:"weeklyPlanTemplate"}),context:void 0}}),databaseDiscoveryModal:h("mab.buttonSection.databaseDiscoveryModal","webAction_generic",{content:{type:"text_and_icon",text:i.databaseDiscoveryModal,style:n,imageReference:{imageUrl:v().A.images.mab.blocks.simpleTableSvg,imageTintColor:(0,p().vU)(o.icon.secondary)}},apiRequestValue:{jsonPayload:M({action:"databaseDiscoveryModal"}),context:void 0}}),templates:h("mab.buttonSection.template","webAction_generic",{content:{type:"text_and_icon",text:t?i.moreTemplates:i.template,style:n,imageReference:{imageUrl:v().A.images.mab.actions.moreSvg,imageTintColor:(0,p().vU)(o.icon.secondary)}},apiRequestValue:{jsonPayload:M({action:"templates"}),context:void 0}})}}({usePillStyling:N,titleTexts:F,theme:W});return{teamspaceSelector:h("mab.button.teamspaceSelector","webAction_generic",{content:{type:"text_and_icon",text:z||V.teamspaceSelector,imageReference:null!=q&&q.emoji?{emoji:q.emoji}:null!=q&&q.imageUrl?{imageUrl:q.imageUrl,imageTintColor:q.imageBackgroundColor}:{character:(z||V.teamspaceSelector).charAt(0).toUpperCase(),imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:"Name of currently selected teamspace to post to"},apiRequestValue:{jsonPayload:M({action:"teamspaceSelector"}),context:void 0}}),ai:t?h("mab.button.ai","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.aiFaceSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},disabled:r,accessibilityText:V.ai},apiRequestValue:{jsonPayload:M({action:"ai"}),context:void 0}}):void 0,speech:o?h("mab.button.speech","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.transcriptionSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},style:N?"pill":void 0,accessibilityText:V.ai,disabled:n},apiRequestValue:{menuType:"insertBlock",actionId:"insert transcription-AI Meeting Notes",context:void 0}}):i?h("mab.button.speech","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.micSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},style:N?"pill":void 0,accessibilityText:V.ai,disabled:n},apiRequestValue:{jsonPayload:M({action:"voiceInput"}),context:void 0}}):void 0,insert:h("mab.button.insert","nativeAction_setMenuType",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.plusSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:V.insert,disabled:s||u,selected:"insertBlock"===d},apiRequestValue:{menuType:"insertBlock",context:void 0}}),turnInto:h("mab.button.turnInto","nativeAction_setMenuType",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.turnIntoSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},disabled:s||m,selected:"turnInto"===d,accessibilityText:V.turnInto},apiRequestValue:{menuType:"turnInto",context:void 0}}),emojiPicker:h("mab.button.emojiPicker","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.emojiSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},style:N?"pill":void 0,disabled:!P&&s,accessibilityText:V.emojiPicker},apiRequestValue:{jsonPayload:M({action:"emojiPicker"}),context:void 0}}),filePicker:h("mab.button.filePicker","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.photoMultipleSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},style:N?"pill":void 0,disabled:!P&&s,accessibilityText:V.filePicker},apiRequestValue:{jsonPayload:M({action:"filePicker"}),context:void 0}}),mention:h("mab.button.mention","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.mentionSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},disabled:c,accessibilityText:V.mention},apiRequestValue:{jsonPayload:M({action:"mention"}),context:void 0}}),comment:h("mab.button.comment","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.commentSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},disabled:l,accessibilityText:V.comment},apiRequestValue:{jsonPayload:M({action:"comment"},"mobile_action_bar"),context:void 0}}),biu:h("bold.italic.underline","nativeAction_setSubMenuType",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.textFormattingSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},disabled:g,accessibilityText:V.textFormatting},apiRequestValue:{subMenuType:"textFormatting",context:void 0}}),delete:h("mab.button.delete","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.trashSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},disabled:y,accessibilityText:V.trash},apiRequestValue:{jsonPayload:M({action:"trash"}),context:void 0}}),undo:h("mab.button.undo","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.undoSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},disabled:f,accessibilityText:V.undo},apiRequestValue:{jsonPayload:M({action:"undo"}),context:void 0}}),redo:h("mab.button.redo","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.redoSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},disabled:k,accessibilityText:V.redo},apiRequestValue:{jsonPayload:M({action:"redo"}),context:void 0}}),more:h("mab.button.more","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.moreSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:V.more,disabled:s},apiRequestValue:{jsonPayload:M({action:"more"}),context:void 0}}),indent:B(s,x,V.indent,{imageUrl:v().A.images.mab.actions.indentSvg,imageTintColor:(0,p().vU)(W.icon.secondary)}),unindent:R(s,T,V.unindent,{imageUrl:v().A.images.mab.actions.outdentSvg,imageTintColor:(0,p().vU)(W.icon.secondary)}),moveUp:U(s,V.moveUp,{imageUrl:v().A.images.mab.actions.moveUpSvg,imageTintColor:(0,p().vU)(W.icon.secondary)}),moveDown:j(s,V.moveDown,{imageUrl:v().A.images.mab.actions.moveDownSvg,imageTintColor:(0,p().vU)(W.icon.secondary)}),indentPrioritized:O(B(s,x,V.indent,{imageUrl:v().A.images.mab.actions.indentSvg,imageTintColor:(0,p().vU)(W.icon.secondary)})),unindentPioritized:O(R(s,T,V.unindent,{imageUrl:v().A.images.mab.actions.outdentSvg,imageTintColor:(0,p().vU)(W.icon.secondary)})),moveUpPrioritized:O(U(s,V.moveUp,{imageUrl:v().A.images.mab.actions.moveUpSvg,imageTintColor:(0,p().vU)(W.icon.secondary)})),moveDownPrioritized:O(j(s,V.moveDown,{imageUrl:v().A.images.mab.actions.moveDownSvg,imageTintColor:(0,p().vU)(W.icon.secondary)})),color:E?a||b?void 0:h("mab.button.textFormatting.textSelectionColor.native","nativeAction_setMenuType",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.textColorSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},selected:d===K,accessibilityText:V.textColor},apiRequestValue:{menuType:K,context:void 0}}):h("mab.button.textFormatting.textSelectionColor.native","nativeAction_setMenuType",{content:{type:"icon",imageReference:H(L,W),disabled:a||b,selected:d===K,accessibilityText:V.textColor},apiRequestValue:{menuType:K,context:void 0}}),bold:h("mab.button.bold","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.boldSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:V.bold,disabled:a,selected:D.bold},apiRequestValue:{jsonPayload:M({action:"bold"}),context:void 0}}),italic:h("mab.button.italic","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.italicSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},disabled:a,selected:D.italic,accessibilityText:V.italics},apiRequestValue:{jsonPayload:M({action:"italic"}),context:void 0}}),underline:h("mab.button.underline","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.underlineSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},disabled:a,selected:D.underline,accessibilityText:V.underline},apiRequestValue:{jsonPayload:M({action:"underline"}),context:void 0}}),strikethrough:h("mab.button.strikethrough","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.strikethroughSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},disabled:a,selected:D.strikethrough,accessibilityText:V.strikethrough},apiRequestValue:{jsonPayload:M({action:"strikethrough"}),context:void 0}}),linkToPage:h("insert link_to_page-Link to page","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.linkToPageSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:"Link",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert link_to_page-Link to page",context:void 0}}),link:h("mab.button.link","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.linkAddSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:V.link,disabled:a||w,selected:D.link},apiRequestValue:{jsonPayload:M({action:"link"}),context:void 0}}),copyLinkToBlock:E?h("mab.button.copyLinkToBlock","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.linkSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:V.copyLinkToBlock,disabled:C},apiRequestValue:{jsonPayload:M({action:"copyLinkToBlock"}),context:void 0}}):void 0,code:h("mab.button.code","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.codeSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:V.code,disabled:a,selected:D.code},apiRequestValue:{jsonPayload:M({action:"code"}),context:void 0}}),equation:h("mab.button.equation","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.inlineEquationSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:V.equation,disabled:a||I,selected:D.equation},apiRequestValue:{jsonPayload:M({action:"equation"}),context:void 0}}),filing:h("mab.button.filing","webAction_generic",{content:F.filing?{type:"text_and_icon",text:F.filing,style:"filled",imageReference:{sfProGlyphName:"folder",localImageIdentifier:"folder"},accessibilityText:V.filing}:{type:"icon",style:"filled",imageReference:{sfProGlyphName:"folder",localImageIdentifier:"folder"},accessibilityText:V.filing},apiRequestValue:{jsonPayload:M({action:"filing"}),context:void 0}}),text:E?h("insert text-Text","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.textSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:"Text",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert text-Text",context:void 0}}):void 0,page:E?h("insert page-Page","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.pageSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:"Page",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert page-Page",context:void 0}}):void 0,divider:h("insert divider-Divider","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.dividerSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:"Divider",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert divider-Divider",context:void 0}}),table:h("insert table-Table","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.simpleTableSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:"Table",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert table-Table",context:void 0}}),toDoList:E?h("insert to_do-To-do list","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.toDoSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:V.todoList,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert to_do-To-do list",context:void 0}}):void 0,h1:E?h("insert header-Heading 1","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.headerH1Svg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:V.h1,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert header-Heading 1",context:void 0}}):void 0,h2:E?h("insert sub_header-Heading 2","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.headerH2Svg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:V.h2,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert sub_header-Heading 2",context:void 0}}):void 0,h3:E?h("insert sub_sub_header-Heading 3","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.headerH3Svg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:V.h3,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert sub_sub_header-Heading 3",context:void 0}}):void 0,bulletedList:E?h("insert bulleted_list-Bulleted list","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.bulletedListSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:V.bulletedList,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert bulleted_list-Bulleted list",context:void 0}}):void 0,numberedList:E?h("insert numbered_list-Numbered list","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.numberedListSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:V.numberedList,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert numbered_list-Numbered list",context:void 0}}):void 0,toggleList:E?h("insert toggle-Toggle list","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.toggleListSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:V.toggleList,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert toggle-Toggle list",context:void 0}}):void 0,quote:E?h("insert quote-Quote","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.quoteSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:V.quote,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert quote-Quote",context:void 0}}):void 0,callout:E?h("insert callout-Callout","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.blocks.calloutSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:V.callout,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert callout-Callout",context:void 0}}):void 0,backgroundColorDefault:E&&"default_background"!==D.backgroundHighlight?A("action color default_background-Default background","dark"===W.mode?v().A.images.mab.textBackground.dark.defaultSvg:v().A.images.mab.textBackground.light.defaultSvg,K,!1,"Default"):void 0,backgroundColorGray:E?A("action color gray_background-Gray background","dark"===W.mode?v().A.images.mab.textBackground.dark.graySvg:v().A.images.mab.textBackground.light.graySvg,K,"gray_background"===D.backgroundHighlight,"Gray"):void 0,backgroundColorBrown:E?A("action color brown_background-Brown background","dark"===W.mode?v().A.images.mab.textBackground.dark.brownSvg:v().A.images.mab.textBackground.light.brownSvg,K,"brown_background"===D.backgroundHighlight,"Brown"):void 0,backgroundColorOrange:E?A("action color orange_background-Orange background","dark"===W.mode?v().A.images.mab.textBackground.dark.orangeSvg:v().A.images.mab.textBackground.light.orangeSvg,K,"orange_background"===D.backgroundHighlight,"Orange"):void 0,backgroundColorYellow:E?A("action color yellow_background-Yellow background","dark"===W.mode?v().A.images.mab.textBackground.dark.yellowSvg:v().A.images.mab.textBackground.light.yellowSvg,K,"yellow_background"===D.backgroundHighlight,"Yellow"):void 0,backgroundColorTeal:E?A("action color teal_background-Green background","dark"===W.mode?v().A.images.mab.textBackground.dark.greenSvg:v().A.images.mab.textBackground.light.greenSvg,K,"teal_background"===D.backgroundHighlight,"Green"):void 0,backgroundColorBlue:E?A("action color blue_background-Blue background","dark"===W.mode?v().A.images.mab.textBackground.dark.blueSvg:v().A.images.mab.textBackground.light.blueSvg,K,"blue_background"===D.backgroundHighlight,"Blue"):void 0,backgroundColorPurple:E?A("action color purple_background-Purple background","dark"===W.mode?v().A.images.mab.textBackground.dark.purpleSvg:v().A.images.mab.textBackground.light.purpleSvg,K,"purple_background"===D.backgroundHighlight,"Purple"):void 0,backgroundColorPink:E?A("action color pink_background-Pink background","dark"===W.mode?v().A.images.mab.textBackground.dark.pinkSvg:v().A.images.mab.textBackground.light.pinkSvg,K,"pink_background"===D.backgroundHighlight,"Pink"):void 0,backgroundColorRed:E?A("action color red_background-Red background","dark"===W.mode?v().A.images.mab.textBackground.dark.redSvg:v().A.images.mab.textBackground.light.redSvg,K,"red_background"===D.backgroundHighlight,"Red"):void 0,textColorRed:E?S("action color red-Red text","dark"===W.mode?v().A.images.mab.textColor.dark.redSvg:v().A.images.mab.textColor.light.redSvg,K,"red"===L,"Red"):void 0,textColorOrange:E?S("action color orange-Orange text","dark"===W.mode?v().A.images.mab.textColor.dark.orangeSvg:v().A.images.mab.textColor.light.orangeSvg,K,"orange"===L,"Orange"):void 0,textColorYellow:E?S("action color yellow-Yellow text","dark"===W.mode?v().A.images.mab.textColor.dark.yellowSvg:v().A.images.mab.textColor.light.yellowSvg,K,"yellow"===L,"Yellow"):void 0,textColorTeal:E?S("action color teal-Green text","dark"===W.mode?v().A.images.mab.textColor.dark.greenSvg:v().A.images.mab.textColor.light.greenSvg,K,"teal"===L,"Green"):void 0,textColorBlue:E?S("action color blue-Blue text","dark"===W.mode?v().A.images.mab.textColor.dark.blueSvg:v().A.images.mab.textColor.light.blueSvg,K,"blue"===L,"Blue"):void 0,textColorPurple:E?S("action color purple-Purple text","dark"===W.mode?v().A.images.mab.textColor.dark.purpleSvg:v().A.images.mab.textColor.light.purpleSvg,K,"purple"===L,"Purple"):void 0,textColorPink:E?S("action color pink-Pink text","dark"===W.mode?v().A.images.mab.textColor.dark.pinkSvg:v().A.images.mab.textColor.light.pinkSvg,K,"pink"===L,"Pink"):void 0,textColorGray:E?S("action color gray-Gray text","dark"===W.mode?v().A.images.mab.textColor.dark.graySvg:v().A.images.mab.textColor.light.graySvg,K,"gray"===L,"Gray"):void 0,textColorBrown:E?S("action color brown-Brown text","dark"===W.mode?v().A.images.mab.textColor.dark.brownSvg:v().A.images.mab.textColor.light.brownSvg,K,"brown"===L,"Brown"):void 0,textColorDefault:E&&"default"!==L?S("action color default-Default text","dark"===W.mode?v().A.images.mab.textColor.dark.defaultSvg:v().A.images.mab.textColor.light.defaultSvg,K,!1,"Default"):void 0,...G,dismissKeyboard:h("mab.dismissKeyboard","webAction_generic",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.keyboardDownSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:V.dismissKeyboard},apiRequestValue:{jsonPayload:M({action:"dismissKeyboard"}),context:void 0}}),closeActionMenu:h("mab.dismissKeyboard","nativeAction_setMenuType",{content:{type:"icon",imageReference:{imageUrl:v().A.images.mab.actions.xCircleSvg,imageTintColor:(0,p().vU)(W.icon.secondary)},accessibilityText:V.closeActionMenu},apiRequestValue:{menuType:void 0,context:void 0}}),toggleNumberPositivity:h("mab.button.toggleNumberPositivity","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"minus.forwardslash.plus",imageTintColor:(0,p().vU)(W.icon.secondary)},disabled:a,accessibilityText:V.toggleNumberPositivity},apiRequestValue:{jsonPayload:M({action:"toggleNumberPositivity"}),context:void 0}})}}function E(e){const{buttonMap:t,shouldShowTemplatePills:i,frecentlyRankedActions:o,isEditingTitle:n,isEditingHeader:a,isEditingSimpleTableOrCollectionTextPropertyInExp:r,isEditingCallout:s,isEditingQuote:l,shouldPrioritizeList:c,shouldShowEmojiPicker:d,shouldShowFiling:u,shouldShowTemplates:m,someBlockPrioritizesIndentation:g,isTablet:p,isPersonalizedActionsEnabled:v,isDBUXMobileEnabled:y,isMobileAISetupEnabled:f,isMobileMeetingNotesTemplateEnabled:h,shouldShowSelectedTextButtons:S,isIndentable:A,isEmpty:k,shouldShowTeamspaceSelector:x,shouldRenderMABForNumberProperty:T}=e,M={id:"mab.buttonSection.teamspace",buttons:[t.teamspaceSelector].filter(b().O9),skipSectionDivider:!1};let w=[];if(n)if(i)w=h?[t.meetingNotesTemplate,...f?[t.databaseDiscoveryModal]:[t.weeklyPlanTemplate],t.templates]:[t.todoListTemplate,t.weeklyPlanTemplate,...f?[t.databaseDiscoveryModal]:[],t.templates];else{const e=p?[]:[t.speech,t.filePicker,d?t.emojiPicker:void 0],i=u?[t.filing]:[],o=m?[t.templates]:[];w=[...i,...o,...e].filter(b().O9)}if(T)return[{id:"mab.buttonSection.main",buttons:[t.toggleNumberPositivity]}];if(!n&&v){let e=[];if(e=function(e,t,i,o,n,a,r,s){const l=new Set(["todoListTemplate","weeklyPlanTemplate","templates","filing","databaseDiscoveryModal"]),c=new Set(["bold","italic","underline","strikethrough","biu","dismissKeyboard","closeActionMenu","indent","unindent","moveUp","moveDown","ai","teamspaceSelector"]),d=new Set(["color","backgroundColorDefault","backgroundColorGray","backgroundColorBrown","backgroundColorOrange","backgroundColorYellow","backgroundColorTeal","backgroundColorBlue","backgroundColorPurple","backgroundColorPink","backgroundColorRed","textColorDefault","textColorGray","textColorBrown","textColorOrange","textColorYellow","textColorTeal","textColorBlue","textColorPurple","textColorPink","textColorRed"]);let u;u=n?new Set([...c,...l,...d,"insert","biu","turnInto","more"]):r||s?new Set([...c,...l,...d,"insert","turnInto","more"]):i?new Set([...c,...l,...d,"copyLinkToBlock","insert","turnInto","more"]):a?new Set([...c,...l,...d,"toDoList","h1","h2","h3","bulletedList","numberedList","toggleList","quote","callout","insert","speech","turnInto","filePicker","ai","more"]):new Set([...c,...l,...d,"insert","turnInto","more"]);const m=Object.keys(e).filter((i=>{var o;return!u.has(i)&&t.includes(i)&&!(null!==(o=e[i])&&void 0!==o&&null!==(o=o.content)&&void 0!==o&&o.disabled)})).sort(((e,i)=>t.indexOf(e)-t.indexOf(i))).map((t=>e[t])).filter(b().O9).slice(0,3).sort(((e,t)=>e.id>t.id?1:-1));return m}(t,o,k,0,a,r,s,l),e.length<3){const i=function(e,t){return t?[e.toDoList,e.bulletedList,e.toggleList].filter(b().O9):[e.toDoList,e.bulletedList,e.h1].filter(b().O9)}(t,a);e=Array.from(new Set([...e,...i])).slice(0,3)}const i=function(e){const{buttonMap:t,shouldShowEmojiPicker:i,shouldShowSelectedTextButtons:o,isIndentable:n,isEditingSimpleTableOrCollectionTextPropertyInExp:a,isEditingCallout:r,isDBUXMobileEnabled:s}=e;let l=[];l=a&&s?L(t,o):o?[t.color,t.bold,t.underline,t.italic,t.strikethrough,t.link,t.comment,t.turnInto,t.code,t.equation,t.copyLinkToBlock,t.more]:a?[t.color,t.bold,t.underline,t.italic,t.strikethrough,t.mention,t.link,t.comment,t.code,t.equation,t.copyLinkToBlock]:n?[t.unindent,t.indent,t.insert,t.biu,t.moveUp,t.moveDown,t.filePicker,t.speech,t.turnInto,i?t.emojiPicker:void 0,t.undo,t.redo,t.mention,t.delete,t.more]:r?[t.insert,t.biu,t.filePicker,t.speech,t.turnInto,i?t.emojiPicker:void 0,t.undo,t.redo,t.unindent,t.indent,t.moveUp,t.moveDown,t.delete,t.mention,t.more]:[t.insert,t.biu,t.filePicker,t.speech,t.turnInto,i?t.emojiPicker:void 0,t.undo,t.redo,t.unindent,t.indent,t.moveUp,t.moveDown,t.mention,t.delete,t.more];return l.filter(b().O9)}({buttonMap:t,shouldShowEmojiPicker:d,shouldShowSelectedTextButtons:S,isIndentable:A,isEditingSimpleTableOrCollectionTextPropertyInExp:r,isEditingCallout:s,isDBUXMobileEnabled:y}),n=function(e,t){const i=new Set(t.map((e=>e.id)));return e.filter((e=>!i.has(e.id)))}(i,e);return[x?M:void 0,e.length>0?{id:"mab.buttonSection.main.personalized",buttons:[...[t.ai,...e].filter(b().O9).entries()].map((e=>{let[t,i]=e;return F(i,t)})),skipSectionDivider:!1,shouldFadeIn:!0}:void 0,{id:"mab.buttonSection.main",buttons:[...n.entries()].map((e=>{let[t,i]=e;return F(i,t)})),shouldFadeIn:!0}].filter(b().O9)}if(c&&g){return[x?M:void 0,{id:"mab.buttonSection.main",buttons:[...[t.ai,t.unindentPioritized,t.indentPrioritized,t.moveUpPrioritized,t.moveDownPrioritized].filter(b().O9),...p?[t.insert,t.biu,t.turnInto,d?t.emojiPicker:void 0,t.filePicker,t.speech].filter(b().O9):[t.insert,t.biu,t.speech,t.filePicker,t.turnInto,d?t.emojiPicker:void 0].filter(b().O9),...[t.comment,t.undo,t.mention,t.delete,t.more].filter(b().O9)]}].filter(b().O9)}return[x?M:void 0,{id:"mab.buttonSection.main",buttons:(e=>{if(n)return w;if(y&&r)return L(t,S);const i=p?[t.turnInto,t.speech,t.filePicker]:[t.speech,t.filePicker,t.turnInto];return[u&&p?t.filing:void 0,t.ai,t.insert,t.biu,...i,t.undo,null!==(e=t.redo.content)&&void 0!==e&&e.disabled?void 0:t.redo,d?t.emojiPicker:void 0,t.comment,t.mention,t.delete,t.indent,t.unindent,t.moveUp,t.moveDown,t.more]})().filter(b().O9)}].filter(b().O9)}function L(e,t){return[e.undo,e.bold,e.underline,e.italic,e.strikethrough,e.mention,e.link,...t?[e.comment]:[],e.code,e.equation,e.copyLinkToBlock,e.delete,e.more].filter(b().O9)}const D="static-";function F(e,t){return{...e,id:`${e.id}.${D}${t}`}}function V(e){const t=e.split(".");if(t.length>0){if(t[t.length-1].startsWith(D))return t.slice(0,-1).join(".")}return e}function O(e){return e.id=`${e.id}.prioritized`,e}const q={"insert text-Text":"text","insert page-Page":"page","insert to_do-To-do list":"toDoList","insert header-Heading 1":"h1","insert sub_header-Heading 2":"h2","insert sub_sub_header-Heading 3":"h3","insert bulleted_list-Bulleted list":"bulletedList","insert numbered_list-Numbered list":"numberedList","insert toggle-Toggle list":"toggleList","insert quote-Quote":"quote","insert callout-Callout":"callout","insert link_to_page-Link to page":"linkToPage","insert divider-Divider":"divider","insert table-Table":"table","action color default_background-Default background":"backgroundColorDefault","action color gray_background-Gray background":"backgroundColorGray","action color brown_background-Brown background":"backgroundColorBrown","action color orange_background-Orange background":"backgroundColorOrange","action color yellow_background-Yellow background":"backgroundColorYellow","action color teal_background-Green background":"backgroundColorTeal","action color blue_background-Blue background":"backgroundColorBlue","action color purple_background-Purple background":"backgroundColorPurple","action color pink_background-Pink background":"backgroundColorPink","action color red_background-Red background":"backgroundColorRed","action color default-Default text":"textColorDefault","action color gray-Gray text":"textColorGray","action color brown-Brown text":"textColorBrown","action color orange-Orange text":"textColorOrange","action color yellow-Yellow text":"textColorYellow","action color teal-Green text":"textColorTeal","action color blue-Blue text":"textColorBlue","action color purple-Purple text":"textColorPurple","action color pink-Pink text":"textColorPink","action color red-Red text":"textColorRed"};function H(e,t){let i="textColor";const o=p().Wr.find((t=>t===e));let n;"default"===e||o&&(o.includes("background")?(n="background",i="textBackgroundColor"):n="color");const a=n&&o?(0,p().k5)(o,t)[n]:void 0;return{localImageIdentifier:i,imageTintColor:a?(0,p().vU)(a):void 0}}var z=()=>i(919709),W=()=>i(959013),K=()=>i(496603),G=()=>i(344394),X=()=>i(843005),Y=()=>i(953448),J=()=>i(741496),Z=()=>i(132867),Q=()=>i(495262),$=()=>i(2220),ee=()=>i(862835),te=()=>i(239837),ie=()=>i(878377),oe=()=>i(186445),ne=()=>i(68465),ae=()=>i(972435),re=()=>i(986260),se=()=>i(600871),le=()=>i(231722),ce=()=>i(962845),de=()=>i(299545),ue=()=>i(71304),me=()=>i(792002),ge=()=>i(494043);var pe=()=>i(963589),be=()=>i(833666);const ve={TIME_BUCKETS:[{hours:24,weight:100},{hours:96,weight:70},{hours:168,weight:50},{hours:720,weight:30}],DEFAULT_BUCKET_WEIGHT:10},ye={TIME_BUCKETS:[{hours:4,weight:100},{hours:12,weight:80},{hours:24,weight:70},{hours:72,weight:60},{hours:168,weight:50},{hours:336,weight:40},{hours:672,weight:30}],DEFAULT_BUCKET_WEIGHT:20};var fe=()=>i(79628),he=()=>i(952412),Se=()=>i(671363),Ae=()=>i(110955),ke=()=>i(765957),xe=()=>i(430483),Te=()=>i(227440),Me=()=>i(217429),we=()=>i(205682),Ce=()=>i(630116),Ie=()=>i(502438),Pe=()=>i(24157),_e=(i(944114),()=>i(837384)),Be=()=>i(443616),Re=()=>i(778417),Ue=()=>i(878337),je=()=>i(964345),Ne=()=>i(845955),Ee=()=>i(817722);function Le(e){const{type:t,actionSections:i,closeParentMenu:o,context:n}=e,a={},r=[];for(const s of i){const e={id:`${s.key}`,title:s.title,items:s.actions.map((e=>{var i;const r=`${e.key}-${e.analyticsName||""}`;return a[r]={...e,closeParentMenu:o},{id:r,title:e.displayName||"",icon:(null===(i=e.nativeImageReference)||void 0===i?void 0:i.call(e,n))??{},action:T("webAction_genericAction",{menuType:t,actionId:r,context:void 0}),checked:!1}}))};r.push(e)}return{actions:a,sections:r}}function De(e){const{key:t,displayName:i,analyticsName:o,closeParentMenu:n,action:a}=e,r=i;return{key:`action ${t}`,displayName:i?ae().A.formatMessage(i):void 0,analyticsName:o||`textformatting_action_${t}`,searchName:r?`${ae().A.formatMessage(r)} ${r.defaultMessage}`:void 0,validators:[],action:a,closeParentMenu:Boolean(n)}}const Fe={bold:De({key:"bold",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().vD(t,["b"])}}),italic:De({key:"italic",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().vD(t,["i"])}}),underline:De({key:"underline",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().vD(t,["_"])}}),strikethrough:De({key:"strikethrough",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().vD(t,["s"])}}),code:De({key:"code",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().vD(t,["c"])}}),comment:De({key:"comment",closeParentMenu:!0,action:async e=>{var t;let{environment:o}=e;await(null===(t=o.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary());const n=await i(862292).T.formulas.load();re().aI(o,"mobile_action_bar",n)}}),emojiPicker:De({key:"emojiPicker",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),re().Rk(i)}}),equation:De({key:"equation",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),re().FM(i)}}),filePicker:De({key:"filePicker",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),re().zc(i)}}),indent:De({key:"indent",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().lS(t)}}),unindent:De({key:"unindent",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().u7(t)}}),moveDown:De({key:"moveDown",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().cM(t)}}),moveUp:De({key:"moveUp",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().FP(t)}}),undo:De({key:"undo",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().RA(t)}}),redo:De({key:"redo",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().xT(t)}}),trash:De({key:"trash",closeParentMenu:!1,action:e=>{let{environment:t}=e;re()._Y(t)}}),mention:De({key:"mention",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),re().FN(i)}}),ai:De({key:"ai",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),re().hW(i)}}),voiceInput:De({key:"voiceInput",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary());je().Ay.state.enabled&&!je().Ay.state.loading?await Ue().dictationActions.stopDictation({environment:i,from:"native_action"}):await Ue().dictationActions.smartToggleDictation({environment:i,from:"native_action",preCreateDictationBlock:i.device.isIOS&&Ve(),includeSystemAudio:!1})}}),link:De({key:"link",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),re().TK(i)}}),copyLinkToBlock:De({key:"copyLinkToBlock",closeParentMenu:!1,action:async e=>{let{environment:t}=e;const o=Ie().default.state.stores[0];if(!o)return;(await i(884107).R.clipboardActions.load()).copyLinkToBlock({environment:t,blockStore:o})}}),more:De({key:"more",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().al(t)}}),teamspaceSelector:De({key:"teamspaceSelector",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().rZ(t)}}),toggleNumberPositivity:De({key:"toggleNumberPositivity",closeParentMenu:!1,action:e=>{let{environment:t}=e;const o=we().A.state;if(!o.isOpen)return;const n=o.store.getPropertyValue(o.property);if(!n)return;const a=(0,i(713998).Me)(n);if(!a)return;const r=-1*a;(0,i(414712).YX)(r,t,(0,Ee().IB)(o)),(0,Ee()._H)(o,t,we().A)}}),filing:De({key:"filing",closeParentMenu:!1,action:async e=>{let{environment:t}=e;const o=(0,oe().ao)();if(!o)return;const n=o.getParentStore();if(!n)return;const{currentSpaceStore:a}=ke().default.state,r="space"===n.table&&a&&n.id===a.id,s=t.RouterStore.state.route,l="page"===s.name&&s.showMoveTo;await i(750660).LP({environment:t,blocks:[o],moveToContext:"quick_add_mab",disableSuccessToast:!0,onAccept:e=>{i(328523).l7(t)},onCanceled:()=>{},isAddTo:l,isDefaultPrivateLocation:r})}}),dismissKeyboard:De({key:"dismissKeyboard",closeParentMenu:!0,action:e=>{let{environment:t}=e;Re().IU({environment:t}),i(919878).wr(),re().i3(t,void 0,!1),re().Qu(t,void 0,!1),re().Km(t,"hide_keyboard"),i(725614).blurActiveElement()}}),todoListTemplate:De({key:"todoListTemplate",closeParentMenu:!1,action:e=>{let{environment:t}=e;Re().IU({environment:t}),re().XR(t,_e().kx.todoListMobile)}}),meetingNotesTemplate:De({key:"meetingNotesTemplate",closeParentMenu:!1,action:e=>{let{environment:t}=e;Re().IU({environment:t}),re().XR(t,_e().kx.meetingNotesMobile)}}),weeklyPlanTemplate:De({key:"weeklyPlanTemplate",closeParentMenu:!1,action:e=>{let{environment:t}=e;Re().IU({environment:t}),re().XR(t,_e().kx.weeklyPlanMobile)}}),templates:De({key:"templates",closeParentMenu:!1,action:e=>{let{environment:t}=e;re().og(t)}}),databaseDiscoveryModal:De({key:"databaseDiscoveryModal",closeParentMenu:!1,action:e=>{let{environment:t}=e;const i=Ie().default.state.stores[0];re().v5(t,i)}})};function Ve(){if("editing"!==Pe().default.state.mode)return!1;const e=Pe().default.state.multiSelection.start.store;return!!(0,i(969197).Le)(e)}var Oe=i(474848);const qe=(0,W().YK)({subMenuLabelSuggested:{defaultMessage:"Suggested",id:"mobileActionBar.subMenuLabel.suggested"},subMenuLabelInsert:{defaultMessage:"Add",id:"mobileActionBar.subMenuLabel.insert"},subMenuLabelTurnInto:{defaultMessage:"Turn into",id:"mobileActionBar.subMenuLabel.turnInto"},subMenuLabelTextFormatting:{defaultMessage:"Format",id:"mobileActionBar.subMenuLabel.textFormatting"},subMenuLabelTextColor:{defaultMessage:"Text color",id:"mobileActionBar.subMenuLabel.textColor"},templatesButtonTitle:{defaultMessage:"Templates",id:"mobileActionBar.templateButtonTitle"},moreTemplatesButtonTitle:{defaultMessage:"More",id:"mobileActionBar.moreTemplatesButtonTitle"},todoListTemplateTitle:{defaultMessage:"To-do list",id:"mobileActionBar.templateTitle.todoList"},meetingNotesTemplateTitle:{defaultMessage:"Meeting",id:"mobileActionBar.templateTitle.meetingNotes"},weeklyPlanTemplateTitle:{defaultMessage:"Weekly plan",id:"mobileActionBar.templateTitle.weeklyPlan"},databaseDiscoveryModalTitle:{defaultMessage:"Database",id:"mobileActionBar.databaseDiscoveryModalTitle"},actionMenuInsertBlockTitle:{defaultMessage:"Insert Block",id:"mobileActionBar.actionMenuTitle.insertBlock"},actionMenuTurnIntoTitle:{defaultMessage:"Turn Into",id:"mobileActionBar.actionMenuTitle.turnInto"},actionMenuColorTitle:{defaultMessage:"Color",id:"mobileActionBar.actionMenuTitle.blockColor"},accessibilityInsert:{defaultMessage:"Add block",id:"mobileActionBar.accessibility.insertBlock"},accessibilityTurnInto:{defaultMessage:"Turn into block",id:"mobileActionBar.accessibility.turnInto"},accessibilityEmojiPicker:{defaultMessage:"Add emoji",id:"mobileActionBar.accessibility.emojiPicker"},accessibilityFilePicker:{defaultMessage:"Add image",id:"mobileActionBar.accessibility.filePicker"},accessibilityMention:{defaultMessage:"Add mention",id:"mobileActionBar.accessibility.mention"},accessibilityTextFormatting:{defaultMessage:"Open text formatting menu",id:"mobileActionBar.accessibility.textFormatting"},accessibilityComment:{defaultMessage:"Add comment",id:"mobileActionBar.accessibility.comment"},accessibilityTrash:{defaultMessage:"Delete block",id:"mobileActionBar.accessibility.trash"},accessibilityIndent:{defaultMessage:"Indent block",id:"mobileActionBar.accessibility.indent"},accessibilityDedent:{defaultMessage:"Unindent block",id:"mobileActionBar.accessibility.unindent"},accessibilityMoveUp:{defaultMessage:"Move a block up",id:"mobileActionBar.accessibility.moveUp"},accessibilityMoveDown:{defaultMessage:"Move a block down",id:"mobileActionBar.accessibility.moveDown"},accessibilityUndo:{defaultMessage:"Undo edit",id:"mobileActionBar.accessibility.undo"},accessibilityRedo:{defaultMessage:"Redo edit",id:"mobileActionBar.accessibility.redo"},accessibilityMore:{defaultMessage:"More block actions",id:"mobileActionBar.accessibility.more"},accessibilityBold:{defaultMessage:"Bold",id:"mobileActionBar.accessibility.bold"},accessibilityItalics:{defaultMessage:"Italicize",id:"mobileActionBar.accessibility.italics"},accessibilityUnderline:{defaultMessage:"Underline",id:"mobileActionBar.accessibility.underline"},accessibilityStrikethrough:{defaultMessage:"Strikethrough",id:"mobileActionBar.accessibility.strikethrough"},accessibilityTextColor:{defaultMessage:"Text color",id:"mobileActionBar.accessibility.textColor"},accessibilityCode:{defaultMessage:"Code",id:"mobileActionBar.accessibility.code"},accessibilityLink:{defaultMessage:"Add link",id:"mobileActionBar.accessibility.link"},accessibilityCopyLinkToBlock:{defaultMessage:"Copy link to block",id:"mobileActionBar.accessibility.copyLinkToBlock"},accessibilityEquation:{defaultMessage:"Add equation",id:"mobileActionBar.accessibility.equation"},accessibilityFiling:{defaultMessage:"Page location",id:"mobileActionBar.accessibility.filing"},accessibilityCloseTextFormattingMenu:{defaultMessage:"Close text formatting menu",id:"mobileActionBar.accessibility.close"},accessibilityDismissKeyboard:{defaultMessage:"End editing",id:"mobileActionBar.accessibility.endEditing"},accessibilityCloseActionMenu:{defaultMessage:"Close menu",id:"mobileActionBar.accessibility.closeMenu"},accessibilityAi:{defaultMessage:"Notion AI",id:"mobileActionBar.accessibility.ai"},accessibilityTeamspaceSelector:{defaultMessage:"Select teamspace",id:"mobileActionBar.accessibility.teamspaceSelector"},toggleNumberPositivity:{defaultMessage:"Toggle number positive or negative",id:"mobileActionBar.accessibility.toggleNumberPositivity"},filingButtonPrivateSection:{defaultMessage:"Private",id:"mobileActionBar.filing.private"},accessibilityTodoList:{defaultMessage:"Add a to-do list",id:"mobileActionBar.accessibility.todoList"},accessibilityH1:{defaultMessage:"Add an H1 heading",id:"mobileActionBar.accessibility.h1"},accessibilityH2:{defaultMessage:"Add an H2 heading",id:"mobileActionBar.accessibility.h2"},accessibilityH3:{defaultMessage:"Add an H3 heading",id:"mobileActionBar.accessibility.h3"},accessibilityBulletedList:{defaultMessage:"Add a bulleted list",id:"mobileActionBar.accessibility.bulletedList"},accessibilityNumberedList:{defaultMessage:"Add a numbered list",id:"mobileActionBar.accessibility.numberedList"},accessibilityToggleList:{defaultMessage:"Add a toggle list",id:"mobileActionBar.accessibility.toggleList"},accessibilityQuote:{defaultMessage:"Add a quote block",id:"mobileActionBar.accessibility.quote"},accessibilityCallout:{defaultMessage:"Add a callout block",id:"mobileActionBar.accessibility.callout"}}),He={text:!1,to_do:!0,bulleted_list:!0,numbered_list:!0,toggle:!0,column:!1,transclusion_container:!1,callout:!1,quote:!1,post:!1};function ze(e){var t;const{onAction:i,fallbackRenderer:r,...s}=e,l=null===(t=(0,a().v3)().mobileNative)||void 0===t?void 0:t.api.renderMobileActionBar,c=(0,n().y)(l,s);return function(e,t,i,n){var r;const s=null===(r=(0,a().v3)().mobileNative)||void 0===r?void 0:r.componentEvents;(0,o.useEffect)((()=>{if(s&&n&&t)return s.addListener(e,t,i,n)}),[e,t,i,n,s])}("MobileActionBar",c,"onAction",i),!c&&r?(0,Oe.jsx)(Oe.Fragment,{children:r()}):null}function We(e){const{currentBlockStore:t,fallbackRenderer:i,stores:n,shouldShowMoveTo:v,renderApi:h}=e,S=(0,a().v3)(),A=(0,s().S)(),T=(0,W().tz)(),M=(0,Y().J)(),B=(0,l().K8)((()=>Me().default.getEligibleGroup({experimentId:"mab_personalized_section",defaultGroup:"control"})),[]),R="v1"===B||"v2"===B,U=(0,pe().X)("mobile_mab_emoji_picker"),j=(0,pe().X)("db_ux_mobile"),L=(0,o.useRef)(void 0),D=(0,l().K8)((()=>{const e=null==A?void 0:A.publicEditModeStore.state;return re().rV(S,t,e)}),[S,t,null==A?void 0:A.publicEditModeStore]),F=(0,l().K8)((()=>{if(S.TabbedRouterStore){const t=(0,c().XB)(S.TabbedRouterStore.state);var e;if("web"===(null==t?void 0:t.type))return"team"===(null===(e=t.route)||void 0===e?void 0:e.name)}return!1}),[S.TabbedRouterStore]),O=(0,o.useMemo)((()=>K().Bj((e=>{const{blocks:t,environment:i}=e;return function(e,t,i){return{insertBlock:Le({type:"insertBlock",actionSections:Ne().o2(t,e),context:e,closeParentMenu:!0}),turnInto:Le({type:"turnInto",actionSections:Ne().o2(i,e),context:e,closeParentMenu:!0}),textColor:Le({type:"textColor",actionSections:Ne().o2([Be().qW,Be().J1],e),context:e,closeParentMenu:!0}),textSelectionColor:Le({type:"textSelectionColor",actionSections:Ne().o2([Be().qC,Be().nd],e),context:e,closeParentMenu:!0})}}({environment:i,blocks:t,publicEditMode:void 0},function(e){return(0,G().dH)(e).state.insertActions}(i),[(0,X().kR)()])}),(e=>{let{blocks:t,environment:i}=e;const o=t.map((e=>e.key)).join(",");return`${i.key}-${o}`}))),[]),H=(0,l().K8)((()=>O({blocks:Ke(),environment:S,isPersonalizedActionsEnabled:R})),[S,O,R]),ce=(0,l().K8)((()=>{const e=$e(n.ignoreSelectionAreaStore);return 1===(null==e?void 0:e.length)?e[0]:void 0}),[n.ignoreSelectionAreaStore],{useDeepEqual:!0}),Se=(0,l().K8)((()=>!0===re().BT(n.ignoreSelectionAreaStore,S.TextSelectionCompositionStore,ce,R)),[S,n,ce,R]),_e=(0,l().K8)((()=>{const e=Boolean(D.disableStyleAnnotations);return Se&&!e}),[D.disableStyleAnnotations,Se]),Re=(0,l().K8)((()=>{const e=(e,t)=>{if(!e||"editing"!==e.mode)return;const{multiSelection:i}=e;return{startRecord:i.start.store.pointer,startIndex:i.start.index,endRecord:i.end.store.pointer,endIndex:i.end.index,source:t}};return e(Pe().default.state,"TextSelectionStore")||e(n.ignoreSelectionAreaStore.state.savedTextSelectionStoreState,"IgnoreSelectionAreaStore")}),[n.ignoreSelectionAreaStore],{useDeepEqual:!0}),Ue=(0,l().K8)((()=>{if(!Re)return;const{source:e,...t}=Re;return t}),[Re],{useDeepEqual:!0}),je=(0,l().K8)((()=>{var e;const t=he().u.state.selectedTeamStore;if(!t)return;const i=t.getIcon(),o=i?(0,u().WO)(i.icon):void 0,n=t.getName(),a=n?[...n][0].toUpperCase():void 0;return{name:n,icon:o?"unicode_emoji"===o.type?{emoji:o.emoji.unicode}:"notion_icon"===o.type?{imageUrl:o.icon,imageTintColor:null===(e=(0,m().DV)(o.icon))||void 0===e?void 0:e.color}:"custom_emoji"===o.type||"app_package_asset"===o.type||"url"===o.type?{imageUrl:o.icon}:void 0:a?{initial:a}:void 0}}),[]),Ee=(0,l().K8)((()=>t.isDraft()),[t]),De=!F&&Ee&&void 0!==(null==je?void 0:je.name)&&!S.device.isAndroid,Ve=(0,se().GN)(),We=(0,l().K8)((()=>{const e=re().oG(we().A.state);return"number"===(null==e?void 0:e.type)&&Ve}),[Ve]),tt=(0,l().K8)((()=>{var e;const{NativeMobileActionBarStore:i}=S,o=(0,p().O4)({theme:S.ThemeModeStore.state}),a=t.getType(),r=t.getFormat(),s=Ge(),l=Ye(j),c=we().A.state.isOpen,u=Qe(n.ignoreSelectionAreaStore),m=Boolean(u&&(0,le().KP)(u)),g=(0,ne().ZE)(null==A?void 0:A.publicEditModeStore.state),b=!(0,oe().Te)()&&(0,ee().h)(),y=!(0,oe().Te)()&&(0,te().M5)(),f=l||c,h=s||l,k=!re().xr(A&&A.publicEditModeStore.state,t),x=!re().nC(A&&A.publicEditModeStore.state),M=function(){let e;e="editing"===Pe().default.state.mode?(0,me().x7)([z().Ifu.Bold,z().Ifu.Italic,z().Ifu.Underline,z().Ifu.Strike,z().Ifu.Code,z().Ifu.Link,z().Ifu.Equation,...(0,z().kJl)(z().Ifu.Highlight)],Pe().default.state.multiSelection,Pe().default.state.forceExtendAnnotations):{};const t=e.hf,i=e.hb;return{bold:Boolean(e[z().Ifu.Bold]),italic:Boolean(e[z().Ifu.Italic]),underline:Boolean(e[z().Ifu.Underline]),strikethrough:Boolean(Boolean(e[z().Ifu.Strike])),code:Boolean(e[z().Ifu.Code]),link:Boolean(e[z().Ifu.Link]),equation:Boolean(e[z().Ifu.Equation]),textHighlight:t&&(0,z().YuY)(t)?(0,z().uIc)(t):void 0,backgroundHighlight:i&&(0,z().YuY)(i)?(0,z().uIc)(i):void 0}}(),w=Boolean(D.disableStyleAnnotations),C=null==i||null===(e=i.state.menu)||void 0===e?void 0:e.type,I=P(H.insertBlock.sections),_=P(H.turnInto.sections),B=P(H.textColor.sections),U=function(e,t,i){var o;const{NativeMobileActionBarStore:n}=e,a=n&&void 0!==(null===(o=n.state.menu)||void 0===o?void 0:o.type)?t.state.savedTextSelectionStoreState:void 0;if(!a)return i;const r="editing"===a.mode&&(0,me().x7)(["hf","hb"],a.multiSelection,a.forceExtendAnnotations);if(r){const e=r.hf??r.hb;return e&&(0,z().YuY)(e)?(0,z().uIc)(e):void 0}}(S,n.ignoreSelectionAreaStore,M.textHighlight),E=!Q().BB(),L=!Q().fH(),F=!Ke().every(Z().v6),V=!Ke().every(Z().mE),O=s||c,q=!m,W=!m,K=Boolean(a&&(0,d().Q3)(a))||!m,G=Boolean(a&&(0,d().pD)(a,r))||Boolean(D.disableComment),X=(null==ce?void 0:ce.isNavigableBlock())||(0,ie().mEr)(ce),Y=s&&Ze(S,t)&&Je(S),J=v&&!Je(S),$=function(e,t,i,o){if(!i||!t)return;if(e.device.isTablet&&!function(e){if(!e.hasContent())return!0;return e.getContentStores().every((e=>e.isEmptyEditableBlock()))}(t))return;const n=t.getParentStore();if(!n||!(0,ue().D_)(n))return;function a(e){if(!e)return;const t=10;return e.length>t?`${Array.from(e).slice(0,t).join("").trim()}…`:e}const{currentSpaceStore:r}=ke().default.state;if(n instanceof Ce().SL&&r&&n.id===r.id)return a(ae().A.formatMessage(qe.filingButtonPrivateSection));return a((0,ue().Qe)(n,o,e,xe().zD.shouldEnablePageTitleDiffs()))}(S,null==A?void 0:A.pageStore,J,T);return N({createAIAction:g,createDictationAction:b,createMeetingNotesAction:y,disableDictationActions:f,disableAIAction:h,disableTextActions:k,disableBlockActions:x,disableLinkAction:q,disableEquationAction:W,disableCommentAction:G,disableMentionAction:K,disableTextFormatting:w,disableInsertBlockAction:I,disableTurnIntoAction:_,disableTextColorAction:B,disableDeleteBlock:O,disableUndo:E,disableRedo:L,disableIndent:F,disableUnindent:V,disableCopyLinkToBlock:X,selectedMenuType:C,isEditingTitle:s,shouldShowTextActions:Se,usePillStyling:Y,isPersonalizedActionsEnabled:R,textSelectionColor:U,textFormattingSelections:M,titleTexts:{filing:$,template:ae().A.formatMessage(qe.templatesButtonTitle),moreTemplates:ae().A.formatMessage(qe.moreTemplatesButtonTitle),todoListTemplate:ae().A.formatMessage(qe.todoListTemplateTitle),meetingNotesTemplate:ae().A.formatMessage(qe.meetingNotesTemplateTitle),weeklyPlanTemplate:ae().A.formatMessage(qe.weeklyPlanTemplateTitle),databaseDiscoveryModal:ae().A.formatMessage(qe.databaseDiscoveryModalTitle)},accessibilityTexts:{insert:ae().A.formatMessage(qe.accessibilityInsert),turnInto:ae().A.formatMessage(qe.accessibilityTurnInto),emojiPicker:ae().A.formatMessage(qe.accessibilityEmojiPicker),filePicker:ae().A.formatMessage(qe.accessibilityFilePicker),mention:ae().A.formatMessage(qe.accessibilityMention),comment:ae().A.formatMessage(qe.accessibilityComment),textFormatting:ae().A.formatMessage(qe.accessibilityTextFormatting),trash:ae().A.formatMessage(qe.accessibilityTrash),ai:ae().A.formatMessage(qe.accessibilityAi),undo:ae().A.formatMessage(qe.accessibilityUndo),redo:ae().A.formatMessage(qe.accessibilityRedo),more:ae().A.formatMessage(qe.accessibilityMore),indent:ae().A.formatMessage(qe.accessibilityIndent),unindent:ae().A.formatMessage(qe.accessibilityDedent),moveUp:ae().A.formatMessage(qe.accessibilityMoveUp),moveDown:ae().A.formatMessage(qe.accessibilityMoveDown),bold:ae().A.formatMessage(qe.accessibilityBold),italics:ae().A.formatMessage(qe.accessibilityItalics),underline:ae().A.formatMessage(qe.accessibilityUnderline),strikethrough:ae().A.formatMessage(qe.accessibilityStrikethrough),textColor:ae().A.formatMessage(qe.accessibilityTextColor),code:ae().A.formatMessage(qe.accessibilityCode),link:ae().A.formatMessage(qe.accessibilityLink),copyLinkToBlock:ae().A.formatMessage(qe.accessibilityCopyLinkToBlock),equation:ae().A.formatMessage(qe.accessibilityEquation),close:ae().A.formatMessage(qe.accessibilityCloseTextFormattingMenu),filing:ae().A.formatMessage(qe.accessibilityFiling),todoList:ae().A.formatMessage(qe.accessibilityTodoList),h1:ae().A.formatMessage(qe.accessibilityH1),h2:ae().A.formatMessage(qe.accessibilityH2),h3:ae().A.formatMessage(qe.accessibilityH3),bulletedList:ae().A.formatMessage(qe.accessibilityBulletedList),numberedList:ae().A.formatMessage(qe.accessibilityNumberedList),toggleList:ae().A.formatMessage(qe.accessibilityToggleList),quote:ae().A.formatMessage(qe.accessibilityQuote),callout:ae().A.formatMessage(qe.accessibilityCallout),dismissKeyboard:ae().A.formatMessage(qe.accessibilityDismissKeyboard),closeActionMenu:ae().A.formatMessage(qe.accessibilityCloseActionMenu),teamspaceSelector:ae().A.formatMessage(qe.accessibilityTeamspaceSelector),toggleNumberPositivity:ae().A.formatMessage(qe.toggleNumberPositivity)},teamIcon:null==je?void 0:je.icon,teamspaceName:null==je?void 0:je.name,theme:o})}),[S,t,j,n.ignoreSelectionAreaStore,A,D.disableStyleAnnotations,D.disableComment,H,ce,v,Se,R,T,je]),it=(0,l().K8)((()=>{var e;const t=S.NativeMobileActionBarStore,i=Boolean(null==t||null===(e=t.state)||void 0===e?void 0:e.isSubMenuOverridden),o=Ae().A.state.open,n=j&&Ye(!0),a=_e&&!R&&!n;var r;return i?null==t||null===(r=t.state.subMenu)||void 0===r?void 0:r.type:o?"slashMenu":a?"textFormatting":void 0}),[S.NativeMobileActionBarStore,j,R,_e]),ot=(0,pe().X)("mobile_meeting_notes_mab_template_gate"),nt=!(0,l().O$)(Te().e),at=(0,l().K8)((()=>{var e;const i=Ge(),o=Xe(ce),a=Ye(j),r="callout"===(null==(s=ce)||null===(l=s.getParentBlockStore())||void 0===l?void 0:l.getType());var s,l;const c=function(e){const t=null==e?void 0:e.getType();return"quote"===t}(ce),d=!re().nC(A&&A.publicEditModeStore.state),u=!Ke().every(Z().v6),m=!Ke().every(Z().mE),g=$e(n.ignoreSelectionAreaStore),p=!!g&&g.some((e=>{const t=e.getType();return t&&He[t]})),b=!nt&&Ze(S,t)&&Je(S),y=b&&"on"===Me().default.getEligibleGroup({experimentId:"mobile_ai_setup_gen",defaultGroup:"control"}),f=Boolean(ce&&(0,de().P4)(ce)),h=null==ce?void 0:ce.getType(),k=h&&He[h],x=!Boolean(null===(e=S.NativeMobileActionBarStore)||void 0===e||null===(e=e.state)||void 0===e?void 0:e.isSubMenuOverridden)&&_e,T=!(d||u&&m),M=R?function(e,t){const i=new(be().A),o=t?ye:ve;return i.getFrecencyRankedActions(e,o)}(fe().A.get(),"v2"===B):[];return E({buttonMap:tt,shouldShowTemplatePills:b,frecentlyRankedActions:M,isEditingTitle:i,isEditingHeader:o,isEditingSimpleTableOrCollectionTextPropertyInExp:a,isEditingCallout:r,isEditingQuote:c,shouldPrioritizeList:T,someBlockPrioritizesIndentation:p,shouldShowEmojiPicker:U,shouldShowFiling:v&&!Je(S),shouldShowTemplates:Ze(S,t),isTablet:S.device.isTablet,isPersonalizedActionsEnabled:R,isDBUXMobileEnabled:j,isMobileAISetupEnabled:y,isMobileMeetingNotesTemplateEnabled:ot&&(0,te().M5)(),shouldShowSelectedTextButtons:x,isIndentable:k,isEmpty:f,shouldShowTeamspaceSelector:De,shouldRenderMABForNumberProperty:We})}),[ce,j,ot,A,n.ignoreSelectionAreaStore,S,t,_e,R,B,tt,v,De,U,We,nt]),rt=(0,l().K8)((()=>{var e;const{NativeMobileActionBarStore:t}=S,i=null==t||null===(e=t.state.menu)||void 0===e?void 0:e.type,o=function(e){const{buttonMap:t,shouldShowTextActions:i}=e;let o;return o=i?[_,t.ai,t.color,t.comment,t.bold,t.italic,t.underline,t.strikethrough,t.link,t.code,t.equation].filter(b().O9):[_,t.color,t.bold,t.italic,t.underline,t.strikethrough,t.link,t.code,t.equation].filter(b().O9),{id:"mab.buttonSection.textFormatting",shouldFadeIn:!0,buttons:o}}({buttonMap:tt,shouldShowTextActions:Se}),n=void 0===i?tt.dismissKeyboard:tt.closeActionMenu,a=function(e){const{version:t,selectedMenu:i,selectedSubMenu:o,nativeMenus:n,buttonSections:a,nativeSubMenus:r,dismissKeyboardButton:s,localizedMessages:l}=e;return{nativeMenus:n,nativeSubMenus:r,localizedMessages:l,state:{buttonSections:a,selectedMenu:i,selectedSubMenu:o,dismissKeyboardButton:s},version:t}}({version:3,selectedMenu:i,selectedSubMenu:it,nativeMenus:{textColor:{id:"textColor",title:ae().A.formatMessage(qe.actionMenuColorTitle),sections:H.textColor.sections},textSelectionColor:{id:"textSelectionColor",title:ae().A.formatMessage(qe.actionMenuColorTitle),sections:H.textSelectionColor.sections},insertBlock:{id:"insertBlock",title:ae().A.formatMessage(qe.actionMenuInsertBlockTitle),sections:H.insertBlock.sections},turnInto:{id:"turnInto",title:ae().A.formatMessage(qe.actionMenuTurnIntoTitle),sections:H.turnInto.sections}},nativeSubMenus:{suggested:[],textFormatting:[o],slashMenu:[],turnInto:[],textColor:[],textSelectionColor:[],more:[]},buttonSections:at,accessibilityTexts:{dismissKeyboard:ae().A.formatMessage(qe.accessibilityDismissKeyboard),closeActionMenu:ae().A.formatMessage(qe.accessibilityCloseActionMenu)},localizedMessages:{...et(it)},dismissKeyboardButton:n});if(Me().default.checkGate({gateName:"mobile_mab_mrr"})){var r;const e=null===(r=S.NativeMobileActionBarStore)||void 0===r?void 0:r.state,t=7,o=Boolean(null==e?void 0:e.isSubMenuOverridden)?t:0;if(a.state.buttonSections.flatMap((e=>e.buttons)).forEach(((e,t)=>{e.action.apiRequestValue&&(e.action.apiRequestValue.context={index:t+1+o,id:e.id})})),it){var s,l;let i=0;null!=e&&null!==(s=e.subMenu)&&void 0!==s&&s.type&&null!=e&&null!==(l=e.subMenu)&&void 0!==l&&l.context&&(i=t+e.subMenu.context.index),a.nativeSubMenus[it].flatMap((e=>e.buttons)).forEach(((e,t)=>{e.action.apiRequestValue&&(e.action.apiRequestValue.context={index:t+1+i,id:e.id})}))}if(i){var c,d;let o=0;null!=e&&null!==(c=e.menu)&&void 0!==c&&c.type&&null!=e&&null!==(d=e.menu)&&void 0!==d&&d.context&&(o=t+e.menu.context.index),a.nativeMenus[i].sections.flatMap((e=>e.items)).forEach(((e,t)=>{e.action.apiRequestValue&&(e.action.apiRequestValue.context={index:t+1+o,id:e.id})}))}}return a}),[S,it,Se,tt,H,at],{useDeepEqual:!0,debugName:"getCurrentActionBarSchema"}),st=(0,o.useCallback)((e=>{var t,i,o;let{action:n}=e;if(null!==(t=n.apiRequestValue)&&void 0!==t&&t.context&&null!==(i=n.apiRequestValue)&&void 0!==i&&i.context.id&&null!==(o=n.apiRequestValue)&&void 0!==o&&o.context.index){var a,r,s;const e=Boolean(ce&&(0,de().P4)(ce)),t=null==ce?void 0:ce.getType(),i=Boolean(t&&He[t]),o=null==Re?void 0:Re.startIndex,l=null==Re?void 0:Re.endIndex,c=Ie().default.state.stores[0],d={action_id:V(n.apiRequestValue.context.id),reciprocal_rank:1/(null===(a=n.apiRequestValue)||void 0===a?void 0:a.context.index),block_type:null==c?void 0:c.getType(),is_editing_title:Ge(),text_selection_start_index:o,text_selection_end_index:l,is_indentable:i,is_empty:e,is_editing_header:Xe(ce),session_id:null===(r=S.NativeMobileActionBarStore)||void 0===r||null===(r=r.state.session)||void 0===r?void 0:r.session_id,render_id:null===(s=S.NativeMobileActionBarStore)||void 0===s||null===(s=s.state.session)||void 0===s?void 0:s.render_id,algorithm_version:B};(0,$().u)({environment:S,event:{eventName:"mobile_action_bar_reciprocal_rank",eventProperties:d}})}switch(n.type){case"nativeAction_setMenuType":!function(e,t,i){var o;const n=function(e){if("nativeAction_setMenuType"!==e.type)return new I(C.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("menuType"in t))return new I(C.MissingPayload,void 0);null===t.menuType&&(t.menuType=void 0);const i=f().object({required:{menuType:f().undefinable(f().literals(...k))},optional:{}}),o=(0,y().tf)(i,t);return o?new I(C.InvalidRequestType,JSON.stringify(o)):t.menuType}(e);if(n instanceof I)return void console.error(JSON.stringify(n));const a=t.NativeMobileActionBarStore?null===(o=t.NativeMobileActionBarStore.state.menu)||void 0===o?void 0:o.type:void 0;if(a===n)re().i3(t,void 0,!0);else{var r;if(!n)return void re().i3(t,void 0,!0);switch(re().i3(t,{type:n,context:null===(r=e.apiRequestValue)||void 0===r?void 0:r.context},!0),i(n),n){case"insertBlock":re().Km(t,"insert");break;case"turnInto":re().Km(t,"turn_into");break;case"textColor":re().Km(t,"color","mobile_action_bar");break;case"textSelectionColor":re().Km(t,"color","mobile_text_formatting_menu")}}}(n,S,(e=>{const t=function(e){if("turnInto"===e)return"turnInto"}(e);void 0!==t&&fe().A.track(t)}));break;case"nativeAction_setSubMenuType":!function(e,t,i){const o=function(e){if("nativeAction_setSubMenuType"!==e.type)return new I(C.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("subMenuType"in t))return new I(C.MissingPayload,void 0);null===t.subMenuType&&(t.subMenuType=void 0);const i=f().object({required:{subMenuType:f().undefinable(f().literals(...x))},optional:{}}),o=(0,y().tf)(i,t);return o?new I(C.InvalidRequestType,JSON.stringify(o)):t.subMenuType}(e);if(o instanceof I)return void console.error(JSON.stringify(o));if(o){var n;re().Qu(t,{type:o,context:null===(n=e.apiRequestValue)||void 0===n?void 0:n.context},!0),i(o)}else re().Qu(t,void 0,!0)}(n,S,(e=>{const t=function(e){switch(e){case"textFormatting":return"biu";case"turnInto":return"turnInto";default:return}}(e);void 0!==t&&fe().A.track(t)}));break;case"webAction_generic":!function(e,t,i,o){const n=function(e){if("webAction_generic"!==e.type)return new I(C.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("jsonPayload"in t))return new I(C.MissingPayload,void 0);const i=JSON.parse(t.jsonPayload),o=(0,y().tf)(w,i);return o?new I(C.InvalidData,JSON.stringify(o)):i}(e);if(n instanceof I)return void console.error(JSON.stringify(n));const{mainEditorCurrentBlockStore:a}=ke().default.state;if(!a)return;const{device:r}=i,s=Fe[n.data.action];s.closeParentMenu&&!r.isTablet&&re().i3(i,void 0,!0);s.action({environment:i,blocks:[a],publicEditMode:void 0,analyticsFrom:"mobile_action_bar_actions",lazyDependencies:t}),o(n.data.action)}(n,M,S,(e=>{const t=e??q[e];tt[t]&&fe().A.track(t)}));break;case"webAction_genericAction":!function(e,t,i,o,n,a){var r,s;const l=null===(r=e.apiRequestValue)||void 0===r?void 0:r.menuType,c=null===(s=e.apiRequestValue)||void 0===s?void 0:s.actionId;if(!l||!c)return;const d=i({environment:n,blocks:Ie().default.state.stores,isPersonalizedActionsEnabled:o})[l].actions[c];if(null==d||!d.action)return;d.closeParentMenu&&re().i3(n,void 0,!0);d.action({environment:n,blocks:Ie().default.state.stores,publicEditMode:void 0,analyticsFrom:"mobile_action_bar_actions",lazyDependencies:t});const u=Ie().default.state.stores[0];if(u){const e=u.getType(),t=u.getFormat();(0,J().N)(n,{analyticsName:d.analyticsName,action_type:d.analyticsActionType,from:"slash_menu",block_id:u.id,block_type:e,is_toggleable:e?(0,ge().Yt)(e,t):void 0,slash_menu_filter_length:0,slash_menu_section:`Mobile Action Bar ${l}`,parent_collection_id:u.getParentCollectionIdUpToTwoLevels()}),d.analyticsName&&re().Km(n,d.analyticsName,l)}a(c)}(n,M,O,R,S,(e=>{const t=q[e];void 0!==t&&tt[t]&&fe().A.track(t)}))}}),[ce,null==Re?void 0:Re.startIndex,null==Re?void 0:Re.endIndex,S,B,M,O,R,tt]);return(0,o.useEffect)((()=>{if(!D){const{NativeMobileActionBarStore:e}=S,t=window.setTimeout((()=>{var t,i;null!=e&&null!==(t=e.state.menu)&&void 0!==t&&t.type&&re().i3(S,void 0,!1),null!=e&&null!==(i=e.state.subMenu)&&void 0!==i&&i.type&&re().Qu(S,void 0,!1)}),500);return()=>{window.clearTimeout(t)}}}),[D,S]),(0,o.useEffect)((()=>{var e;const t=S.NativeMobileActionBarStore;Boolean(null==t||null===(e=t.state)||void 0===e?void 0:e.isSubMenuOverridden)||"slashMenu"!==it&&"textFormatting"!==it||null==t||t.update((e=>({...e,isSubMenuOverridden:!1,subMenu:void 0})))}),[S.NativeMobileActionBarStore,it]),(0,o.useEffect)((()=>{var e;if(!Re)return;const{NativeMobileActionBarStore:t,device:i}=S;"TextSelectionStore"===Re.source&&null!=t&&null!==(e=t.state.menu)&&void 0!==e&&e.type&&!i.isTablet&&re().i3(S,void 0,!0)}),[S,Re]),(0,o.useEffect)((()=>{var e;Ue&&null!==(e=S.NativeMobileActionBarStore)&&void 0!==e&&e.state.isSubMenuOverridden&&!Ae().A.state.open&&re().Qu(S,void 0,!1)}),[S,Ue]),(0,o.useEffect)((()=>{var e,t,i;const{NativeMobileActionBarStore:o}=S,n=D.shouldShow,a=(it?rt.nativeSubMenus[it]:rt.state.buttonSections).map((e=>{let{id:t,buttons:i}=e;return{id:t,buttonIds:i.map((e=>{let{id:t}=e;return V(t)}))}}));let r=!0,s=!0;L.current&&(r=n&&L.current.isOpen!==n,s=r||!K().n4(a,L.current.sectionsState));const l=null==o||null===(e=o.state.session)||void 0===e?void 0:e.session_id,c=s||!l?g().JW():l,d=null==o||null===(t=o.state.session)||void 0===t?void 0:t.render_id,u=s||!d?g().JW():d;if(null===(i=S.NativeMobileActionBarStore)||void 0===i||i.update((e=>({...e,session:{session_id:c,render_id:u}}))),L.current={isOpen:n,sectionsState:a},(r||s)&&n){const e=Boolean(ce&&(0,de().P4)(ce)),t=null==ce?void 0:ce.getType(),i=Boolean(t&&He[t]),o=null==Re?void 0:Re.startIndex,n=null==Re?void 0:Re.endIndex,a=Ie().default.state.stores[0];(0,$().u)({environment:S,event:{eventName:"mobile_action_bar_render",eventProperties:{session_id:c,render_id:u,block_type:null==a?void 0:a.getType(),is_editing_title:Ge(),text_selection_start_index:o,text_selection_end_index:n,is_indentable:i,is_empty:e,is_editing_header:Xe(ce),algorithm_version:B}}})}}),[S,rt,it,D.shouldShow,ce,Re,B]),(0,r().X)((0,o.useCallback)((()=>{h&&h({type:"unmount",id:""})}),[h])),(0,Oe.jsx)(ze,{isOpen:D.shouldShow,canShow:D.canShowNativeBar,isEmpty:D.isEmpty,schema:rt,onAction:st,fallbackRenderer:i&&(()=>i(n))})}function Ke(){return Ie().default.state.stores}function Ge(){return(0,oe().fI)()||(0,oe().Te)()}function Xe(e){const t=null==e?void 0:e.getType();return"header"===t||"sub_header"===t||"sub_sub_header"===t}function Ye(e){const t=Se().A.state.isActive,i=re().zN();return t||i&&e}function Je(e){return e.device.isMobileNative&&!e.device.isTablet}function Ze(e,t){return re().ou({environment:e,store:t})}function Qe(e){const t="editing"===Pe().default.state.mode&&Pe().default.state.multiSelection,i=e.state.savedTextSelectionStoreState,o=i&&"editing"===i.mode&&i.multiSelection;return t||o||void 0}function $e(e){var t;const i=Qe(e);return i&&(null===(t=(0,ce().ZS)({multiSelection:i,focus:void 0,filterCommonAncestors:!1}))||void 0===t?void 0:t.stores)}function et(e){let t;switch(e){case void 0:break;case"suggested":t=ae().A.formatMessage(qe.subMenuLabelSuggested);break;case"slashMenu":t=Ae().A.state.open&&Ae().A.state.isAddMenu?ae().A.formatMessage(qe.subMenuLabelInsert):ae().A.formatMessage(qe.subMenuLabelTurnInto);break;case"turnInto":t=ae().A.formatMessage(qe.subMenuLabelTurnInto);break;case"textFormatting":t=ae().A.formatMessage(qe.subMenuLabelTextFormatting);break;case"textColor":case"textSelectionColor":t=ae().A.formatMessage(qe.subMenuLabelTextColor)}return t?{selectedSubMenuLabel:t}:void 0}},124085:(e,t,i)=>{i.d(t,{P:()=>n});i(296540);var o=i(474848);const n=(0,i(340498).wt)("thinPlus",{viewBox:"0 0 14 14",svg:(0,o.jsx)("path",{d:"M 7.75 0L 6.25 0L 6.25 6.25L 0 6.25L 0 7.75L 6.25 7.75L 6.25 14L 7.75 14L 7.75 7.75L 14 7.75L 14 6.25L 7.75 6.25L 7.75 0Z"})})},124954:(e,t,i)=>{i.d(t,{w:()=>g});var o=i(296540),n=()=>i(484714),a=()=>i(56366),r=()=>i(401497),s=()=>i(987555),l=()=>i(246826),c=()=>i(751156),d=()=>i(187820),u=()=>i(738865),m=i(474848);function g(e){const{clickTitleBehavior:t,blockStore:i,format:s,shouldWrap:g}=e,b="edit"===t,v=(0,n().v3)(),[y,f,h]=(0,a().K8)((()=>[i.getIcon(),i.isEmptyPage(),i.isReady()&&"none"===i.getRole()]),[i]),S=(0,a().K8)((()=>(0,d().Te)(i)),[i]),{style:A}=(0,r().IS)((()=>({style:{flexShrink:0,marginRight:b?0:u().U[s].recordIconMarginRight,justifyContent:"flex-start",...g&&{display:"inline-block",verticalAlign:"text-top",marginBottom:-1}}})),[b,s,g]),k=(0,o.useCallback)((e=>{const t=i.getIconStore();t&&c().createAndCommit({userAction:"RelationToken.handleRecordIconChange",environment:v,canUndo:!0,perform:i=>{l().KY({store:t,value:e,transaction:i})}})}),[i,v]),x={icon:y,size:u().U[s].pageIconSize,isEmptyPage:f,iconRecordCategory:S,style:A};return h?(0,m.jsx)(p,{...x}):b?(0,m.jsx)(d().B6,{...x,disabled:!1,onChange:k,bucket:"public"}):(0,m.jsx)(d().B6,{...x,disabled:!0})}function p(e){const t=(0,r().DP)();return(0,s().T)({...e.style,width:e.size,height:e.size,fill:t.icon.secondary,verticalAlign:"top",marginTop:1})}},150987:(e,t,i)=>{i.d(t,{A:()=>p});i(898992),i(354520),i(581454),i(737550);var o=i.n(i(844751)),n=i(296540),a=()=>i(970013),r=()=>i(713998),s=()=>i(959013),l=()=>i(496603),c=()=>i(722872),d=()=>i(939740),u=()=>i(89924),m=()=>i(250202),g=i(474848);const p=function(e){let{selectedProperty:t,onAccept:p,schema:b,onClose:v,allowProperty:y,isRelationProperty:f}=e;const h=(0,i(484714).v3)(),S=(0,s().tz)(),[A,k]=(0,n.useState)("");let x=Object.keys(b);const T=x.some(i(443239).u);x=l().Ul(x,(e=>{const t=(0,r()._g)({schema:b,property:e});return t?t.name:""}));const M=T?a().Ho:a().rn;if(x=l().FF(x,M),x.unshift(M),y&&(x=x.filter((e=>{const t=(0,r()._g)({schema:b,property:e});return t&&y(t)}))),A){let e=x.map((e=>{const t=(0,r()._g)({schema:b,property:e});return t&&t.name}));e=o().filter(A,e).map((e=>{let{original:t}=e;return t})),x=x.filter((t=>{const i=(0,r()._g)({schema:b,property:t});return i&&i.name&&e.includes(i.name)}))}const w=A||x.length>i(525432).R8,C=l().oE(x.map((e=>{const i=(0,r()._g)({schema:b,property:e});if(!i)return null;return{key:e,render:o=>(0,g.jsx)(m().G,{...o,propertySchema:i,format:m().e.Name,isChecked:e===t}),action:()=>p(e)}}))),I=[{key:0,render:e=>(0,g.jsx)(u().A,{...e}),items:C}],{device:P}=h,_=w?(0,g.jsx)(u().A,{isInput:!0,children:(0,g.jsx)(i(419357).Ay,{focus:!P.isMobile||void 0,focusAfterAnimation:!0,value:A,onChange:e=>k(e.target.value),placeholder:f?S.formatMessage({defaultMessage:"Search for a relation property…",id:"propertySelectMenu.searchForProperty.relation.placeholder"}):S.formatMessage({defaultMessage:"Search for a property…",id:"propertySelectMenu.searchForProperty.default.placeholder"})})}):null;let B;return B=P.isMobile?{menuType:c().gu.Modal,title:f?S.formatMessage({defaultMessage:"Relation property",id:"propertySelectMenu.mobileMenu.relationProperty.header"}):S.formatMessage({defaultMessage:"Property",id:"propertySelectMenu.mobileMenu.property.header"}),right:(0,g.jsx)(i(480095).CancelMenuText,{}),onClickRight:v,header:_}:{menuType:c().gu.Popup,width:280,maxHeight:480,header:_},(0,g.jsx)(i(928600).A,{...B,children:0===C.length?(0,g.jsx)(u().A,{children:(0,g.jsx)(i(64e3).A,{title:(0,g.jsx)(s().sA,{defaultMessage:"No results",id:"propertySelectMenu.search.noResults.title"})})}):(0,g.jsx)(d().Ay,{type:d().Oh.Vertical,sections:I,onAccept:v,initialFocus:A.length>0?0:void 0})})}},159026:(e,t,i)=>{i.d(t,{Ay:()=>r,NJ:()=>o,d5:()=>n});i(898992),i(354520),i(581454),i(737550);let o=function(e){return e.unselected="unselected",e.workspace_member="workspace_member",e.request_workspace_member="request_workspace_member",e.page_guest="page_guest",e.closed="closed",e}({}),n=function(e){return e[e.closed=0]="closed",e[e.share_page=1]="share_page",e[e.share_workspace=2]="share_workspace",e[e.request_workspace=3]="request_workspace",e}({});class a extends(()=>i(757695))().Store{getInitialState(){return{inviteStage:n.closed,selection:o.workspace_member,order:[o.workspace_member,o.page_guest],invitedUsers:[],invitedEmailToUserIdMap:{},flowId:i(206267).JW()}}startWorkspaceInvite(){this.setState({...this.state,inviteStage:n.share_workspace,order:[o.workspace_member,o.page_guest],selection:o.workspace_member})}startRequestMembership(){this.setState({...this.state,inviteStage:n.request_workspace,order:[o.request_workspace_member,o.page_guest],selection:o.request_workspace_member})}hasGuests(){return this.state.invitedUsers.some((e=>e.isGuest))}getGuestEmails(){return this.state.invitedUsers.filter((e=>e.isGuest)).map((e=>e.email))}}const r=a},173783:(e,t,i)=>{i.d(t,{A:()=>r});i(296540);var o=()=>i(401497),n=()=>i(658985),a=i(474848);function r(e){const t=function(e){const{size:t,style:i}=e;return(0,o().IS)((e=>({icon:{width:.6*t,height:.6*t,fill:e.text.secondary},iconContainer:{width:t,height:t,borderRadius:"100%",background:e.regularDividerColor,display:"flex",alignItems:"center",justifyContent:"center",...i}})),[t,i])}(e),i=(0,n().$)(t.icon);return(0,a.jsx)("div",{style:t.iconContainer,children:i})}},195071:(e,t,i)=>{i.d(t,{A:()=>k});i(944114),i(898992),i(803949),i(581454),i(296540);var o=()=>i(67657),n=()=>i(568063),a=()=>i(959013),r=()=>i(496603),s=()=>i(478184),l=()=>i(722372),c=()=>i(722872),d=()=>i(553965),u=()=>i(962730),m=()=>i(509060),g=()=>i(760217),p=()=>i(928600),b=()=>i(939740),v=()=>i(480095),y=()=>i(89924),f=()=>i(859428),h=()=>i(662971),S=i(474848);const A=(0,a().YK)({noneText:{defaultMessage:"None",id:"database.propertyAggregationMenu.noneText"},systemShowValuesText:{defaultMessage:"Show values",id:"database.rollupProperty.aggregate.showValues"},tableAggregationTooltip:{defaultMessage:"Table aggregation",id:"database.propertyAggregationMenu.tableAggregationTooltip"}});const k=(0,a().j4)((function(e){let{onClose:t,property:a,schema:r,currentAggregation:s,source:d,noneText:u,intl:m,onChange:f}=e;const k=(0,i(484714).v3)(),{device:x}=k;let C;C=x.isMobile?{menuType:c().gu.Modal,title:m.formatMessage(A.tableAggregationTooltip),right:(0,S.jsx)(v().DoneMenuText,{}),onClickRight:t}:{menuType:c().gu.Popup,width:200};const[I,P]=function(e){let{property:t,schema:i,source:a,intl:r,onChange:s,environment:d,currentAggregation:u,noneText:m}=e;const f=[];let k=0,x=0;const{device:C}=d,I=null==u?void 0:u.aggregator,P=e=>{let{aggregationType:t,enforceMaxAggregationLimit:i}=e;return s({aggregationType:t,enforceMaxAggregationLimit:i})};if((0,n().cl)(t)){const e=[];e.push({key:"none",render:e=>(0,S.jsx)(g().A,{...e,isChecked:!u,title:r.formatMessage(A.systemShowValuesText)}),action:()=>s({aggregationType:void 0})}),e.push(T("count"===I,"count",P,!0));return[e,"count"===I?1:0]}const _=function(e){let{property:t,schema:i,currentAggregationType:n,onChangeWithLimit:a,environment:r,currentAggregation:s}=e;const l={},c=i[t];if(!c)return{};for(const d of o().VD)l[d]=T(d===n,d,a);if((0,o().wG)(c))for(const d of o().CG)l[d]=T(d===n,d,a);if((0,o().OC)(c))for(const d of o().Sn)l[d]=T(d===n,d,a);if((0,o().fo)(c))for(const d of o().zE)l[d]=T(d===n,d,a);if((0,o().s_)(c))for(const d of o().QO)l[d]=T(d===n,d,a);if((0,o().q0)(c))for(const d of o().nJ)l[d]=M(t,d,s,i,a,r);if((0,o().pe)(c))for(const d of o().A3)l[d]=T(d===n,d,a);return l}({property:t,schema:i,currentAggregationType:I,onChangeWithLimit:P,environment:d,currentAggregation:u});f.push({key:"none",render:e=>(0,S.jsx)(g().A,{...e,isChecked:!u,title:m||r.formatMessage(A.noneText)}),action:()=>s({aggregationType:void 0})});let B="tableAggregation"===a?1:2;return Object.entries(o().Kn).forEach((e=>{let[t,i]=e;const n=[];for(const s of i)if(_[s]){if("show_unique"===s)switch(a){case"tableAggregation":continue;case"rollupPropertyMenu":f.splice(1,0,_[s]),(null==u?void 0:u.aggregator)===s&&(k=1);continue}n.push(_[s]),(u&&(0,o().ET)(null==u?void 0:u.aggregator)&&u.aggregator.operator===s||(null==u?void 0:u.aggregator)===s)&&(k=B,x=n.length-1)}const r=[];if("count_aggregations"===t&&"tableAggregation"===a&&r.push({key:"limitToggleSection",render:e=>(0,S.jsx)(y().A,{...e}),items:[w(u,P)]}),r.push({key:"aggregations",render:e=>(0,S.jsx)(y().A,{topBorder:!0,...e}),items:n}),n.length>0){B++;const e=l().jA[t],i={key:e,render:(t,i)=>(0,S.jsx)(h().A,{...t,disableDefaultClick:!0,onFocus:i.onFocus,renderOrigin:(t,i)=>(0,S.jsx)(g().A,{...t,ref:i,title:e}),renderExtension:(t,o)=>{let n;return n=C.isMobile?{menuType:c().gu.Modal,title:e,right:(0,S.jsx)(v().DoneMenuText,{}),onClickRight:o.close,...t}:{menuType:c().gu.Popup,width:250,...t},(0,S.jsx)(p().A,{...n,children:(0,S.jsx)(b().Ay,{type:b().Oh.Vertical,initialFocus:x,sections:r,onAccept:(e,t,n)=>{"aggregationLimitToggle"!==e.key&&(o.close(),i.onAccept&&i.onAccept(e,t,n))}})})}}),action:()=>null};f.push(i)}})),[f,k]}({property:a,schema:r,source:d,intl:m,onChange:f,environment:k,currentAggregation:s,noneText:u});return(0,S.jsx)(p().A,{...C,children:(0,S.jsx)(b().Ay,{type:b().Oh.Vertical,initialFocus:P??0,sections:[{key:0,render:e=>(0,S.jsx)(y().A,{...e}),items:I}],onAccept:t})})}));function x(e){let{isSelected:t,aggregationType:i,label:o,props:n}=e;const a=l().cx[i];return(0,S.jsx)(f().A,{placement:u().W.Right,delayThreshold:0,render:e=>(0,S.jsx)(g().A,{title:o,isChecked:t,...(0,d().A)(e,n)}),renderTooltip:()=>(0,S.jsxs)("div",{style:{width:140,whiteSpace:"normal"},children:[a&&(0,S.jsx)("img",{src:(0,s().L)(a),style:{borderRadius:4,width:140,marginTop:4}}),l().fp[i]]})},n.key)}function T(e,t,i,o){const n=l().zY[t],a=l().cx[t];return{key:n,render:i=>(0,S.jsx)(f().A,{placement:u().W.Right,delayThreshold:0,render:t=>(0,S.jsx)(g().A,{title:n,isChecked:e,...(0,d().A)(t,i)}),disableTooltip:o,renderTooltip:()=>(0,S.jsxs)("div",{style:{width:140,whiteSpace:"normal"},children:[a&&(0,S.jsx)("img",{src:(0,s().L)(a),style:{borderRadius:4,width:140,marginTop:4}}),l().fp[t]]})},i.key),action:()=>{i({aggregationType:t})}}}function M(e,t,i,n,a,s){const{device:d}=s,u=l().zY[t],m=r().oE(function(e,t,i,n,a){const r=n[t];if(!r||"status"!==r.type)return;const s=r.groups;return s?s.map((t=>{const n=(e&&(0,o().ET)(e.aggregator)&&e.aggregator.operator===i&&e.aggregator.groupName===t.name)??!1;return{key:`${i}${t.name}`,render:e=>(0,S.jsx)(x,{isSelected:n,aggregationType:i,label:t.name,props:e}),action:()=>{a({aggregationType:{operator:i,groupName:t.name}})}}})):void 0}(i,e,t,n,a));let f=0;if(i&&(0,o().ET)(null==i?void 0:i.aggregator)&&i.aggregator.operator===t){const e=i.aggregator.groupName,o=m.findIndex((i=>i.key===`${t}${e}`));-1!==o&&(f=o)}return{key:t,render:(e,t)=>(0,S.jsx)(h().A,{...e,onFocus:t.onFocus,renderOrigin:e=>(0,S.jsx)(g().A,{...e,title:u}),renderExtension:(e,i)=>{let o;return o=d.isMobile?{menuType:c().gu.Modal,title:u,right:(0,S.jsx)(v().DoneMenuText,{}),onClickRight:i.close,...e}:{menuType:c().gu.Popup,width:200,...e},(0,S.jsx)(p().A,{...o,children:(0,S.jsx)(b().Ay,{type:b().Oh.Vertical,initialFocus:f,sections:[{key:"groups",render:e=>(0,S.jsx)(y().A,{...e}),items:m}],onAccept:t.onAccept})})}}),action:()=>null}}function w(e,t){const{enforceMaxAggregationLimit:i,disabled:o}=e?(0,l().NT)(e):{enforceMaxAggregationLimit:!1,disabled:!1};return{key:"aggregationLimitToggle",render:e=>(0,S.jsx)(m().A,{on:i,disabled:o,menuListItemProps:e}),action:()=>{t(e?{aggregationType:e.aggregator,enforceMaxAggregationLimit:!i}:{aggregationType:"count",enforceMaxAggregationLimit:!0})}}}},201361:(e,t,i)=>{i.d(t,{P:()=>a});i(296540);var o=i(474848);const n={viewBox:"2.72 1.1 15.56 16.51",svg:e=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.93132 1.82416C6.22047 1.48199 4.62427 2.79056 4.62427 4.5353C4.62427 5.09457 4.79032 5.61505 5.07582 6.05014H4.29912C3.42927 6.05014 2.72412 6.75529 2.72412 7.62514V9.52514C2.72412 10.1359 3.07175 10.6654 3.57994 10.9267H9.37427V6.05643H10.6243V10.9267H16.4183C16.9265 10.6654 17.2741 10.1359 17.2741 9.52514V7.62514C17.2741 6.75529 16.569 6.05014 15.6991 6.05014H14.9228C15.2082 5.61507 15.3743 5.09461 15.3743 4.53538C15.3743 2.78566 13.7613 1.48542 12.0554 1.82661C11.2118 1.99533 10.4924 2.47592 10.0119 3.13467C9.54306 2.48204 8.83618 2.00513 8.00124 1.83815L7.93132 1.82416ZM9.37427 5.03772V6.05013H7.3891C6.55248 6.05013 5.87427 5.37192 5.87427 4.5353C5.87427 3.57937 6.74882 2.86241 7.68618 3.04989L7.7561 3.06387C8.69699 3.25205 9.37427 4.07819 9.37427 5.03772ZM14.1243 4.53538C14.1243 5.36715 13.4539 6.04235 12.624 6.05014H10.6243V5.08677C10.6243 4.10164 11.3289 3.24667 12.3005 3.05234C13.2428 2.86389 14.1243 3.58444 14.1243 4.53538Z",style:{rotate:"animate"===e?"14deg":"0deg",transformOrigin:"75% center",transition:"rotate 0.548s linear(\n    \t\t\t\t0, 0.007, 0.028 1.8%, 0.113 3.9%, 0.613 12.1%, 0.817 16.2%, 0.894,\n   \t\t\t\t\t0.954 20.4%, 1, 1.031 25.1%, 1.043 26.4%, 1.051, 1.055, 1.056 31.2%,\n    \t\t\t\t1.049 34.9%, 1.012 46.3%, 0.999 54.2%, 0.997 61.9%, 1\n  \t\t\t\t)"}}),(0,o.jsx)("path",{d:"M10.6243 12.1768H16.4133V15.7002C16.4133 16.5701 15.7082 17.2752 14.8383 17.2752H10.6243V12.1768Z"}),(0,o.jsx)("path",{d:"M3.58521 12.1768H9.37427V17.2752H5.1602C4.29036 17.2752 3.58521 16.5701 3.58521 15.7002V12.1768Z"})]})},a=(0,i(882827).p)("presentFillAnimated",n)},207583:(e,t,i)=>{i.d(t,{F:()=>n});i(296540);var o=i(474848);const n=(0,i(340498).wt)("eyeHideInversePadded",{viewBox:"0 0 24 24",svg:(0,o.jsx)("path",{d:"M17.3867 18.1074C17.6055 18.3193 17.9404 18.333 18.1592 18.1074C18.3848 17.875 18.3711 17.5469 18.1592 17.335L6.5791 5.76855C6.37402 5.55664 6.01855 5.5498 5.80664 5.76855C5.60156 5.97363 5.60156 6.3291 5.80664 6.53418L17.3867 18.1074ZM12 6.1582C10.8105 6.1582 9.73047 6.36328 8.72559 6.69141L9.81934 7.78516C10.5098 7.58691 11.2275 7.4707 12 7.4707C16.3682 7.4707 19.8408 11.2715 19.8408 12.0713C19.8408 12.6113 18.7334 14.0059 16.9766 15.1064L17.9883 16.125C20.1348 14.7168 21.3857 12.8779 21.3857 12.0713C21.3857 10.6699 17.6055 6.1582 12 6.1582ZM12 17.9912C13.2646 17.9912 14.4199 17.7725 15.4658 17.4102L14.3789 16.3232C13.6338 16.542 12.8477 16.6787 12 16.6787C7.63184 16.6787 4.15918 13.0283 4.15918 12.0713C4.15918 11.6133 5.32129 10.1299 7.19434 8.98145L6.16211 7.94922C3.92676 9.37109 2.60742 11.251 2.60742 12.0713C2.60742 13.4727 6.46973 17.9912 12 17.9912ZM15.4111 13.3906C15.5889 12.9873 15.6914 12.5361 15.6914 12.0713C15.6914 10.0137 14.0508 8.39355 12 8.39355C11.5283 8.39355 11.084 8.48242 10.6738 8.65332L15.4111 13.3906ZM12 15.7559C12.5332 15.7559 13.0322 15.6328 13.4766 15.4209L8.64355 10.5811C8.4248 11.0322 8.30176 11.5312 8.30176 12.0781C8.30859 14.0811 9.94238 15.7559 12 15.7559Z"})})},208603:(e,t,i)=>{i.d(t,{i9:()=>s,lP:()=>l,sH:()=>r});var o=i(296540),n=()=>i(401497),a=()=>i(625634);function r(e){let{icon:t,style:i,animationState:o}=e;return"static"===t.type?t.iconFn(i,void 0,void 0,"all"):t.iconFn({style:i,animationState:o})}function s(e,t){return(0,n().IS)((i=>({icon:{fill:i.icon[e.iconColor],...t?{width:a().z[t],height:a().z[t]}:{}}})),[t,e]).icon}function l(){const[e,t]=o.useState("initial");return{animationState:e,animationTriggers:{onMouseEnter:()=>t("animate"),onMouseLeave:()=>t("initial")}}}},279620:(e,t,i)=>{i.d(t,{Y:()=>r});var o=i(296540),n=()=>i(16006),a=i(474848);function r(e){const{blockStore:t,shouldWrap:i,titleStyle:r,recordTitleRef:s,noUnderline:l,disableTooltip:c}=e,d=(0,o.useRef)({getNode:()=>s.current});return(0,a.jsx)(n().A,{store:t,underline:!l,shouldWrap:i,style:r,ref:d,enableHover:!0,showTooltipWhenTruncated:!0,disableTooltip:c})}},366858:(e,t,i)=>{i.d(t,{A:()=>r});i(581454);var o=()=>i(484714),n=()=>i(56366),a=()=>i(592674);function r(e){const t=(0,o().v3)();return(0,n().K8)((()=>{var i;const o=null==e?void 0:e.id;if(o)return null===(i=a().A.getData(t,{spaceId:o}))||void 0===i?void 0:i.map((e=>e.domain))}),[t,e])}},378941:(e,t,i)=>{i.d(t,{J7:()=>c,XC:()=>u,hs:()=>d});i(898992),i(354520),i(581454);var o=()=>i(857639),n=()=>i(792071),a=()=>i(277816),r=()=>i(534177),s=()=>i(449506),l=()=>i(630116);function c(e){let{trustedDomainIds:t,spaceStore:i}=e;return t.map((e=>{const t=l().LX.createChildStore(i,{table:a().A,id:e,spaceId:i.id});if(t.canRead())return t})).filter(r().O9)}async function d(e){let{environment:t,spaceId:i,currentUserId:n,organizationId:a}=e;const r=await s().callApi({eventName:"getTrustedDomainsNumberOfMembers",environment:t,data:{spaceId:i,organizationId:a},userId:n});return"failed"===r.type?(o().rateLimitedLog({from:"trustedDomainHelpers",level:"error",type:"getTrustedDomainsNumberOfMembersForSpaceFailed"}),[]):r.data.results}async function u(e){let{environment:t,spaceId:i}=e;const o=await s().callApi({eventName:"getTrustedDomainsForSpace",environment:t,data:{spaceId:i}});if("success"!==o.type)return[];return o.data.results.filter((e=>e.domain_link_sharing_enabled)).map((e=>n().Bj6.fromValue(a().A,e)))}},391532:(e,t,i)=>{i.r(t),i.d(t,{appendTranscriptionBlockToPage:()=>T,createAndNavigateToTranscriptionBlockInNewPage:()=>M,createTranscriptionBlockInNewPage:()=>w});i(898992),i(354520);var o=()=>i(244641),n=()=>i(584262),a=()=>i(700500),r=()=>i(597777),s=()=>i(604995),l=()=>i(416504),c=()=>i(919709),d=()=>i(534177),u=()=>i(669548),m=()=>i(44729),g=()=>i(857783),p=()=>i(185544),b=()=>i(319975),v=()=>i(751156),y=()=>i(87017),f=()=>i(755206),h=()=>i(211716),S=()=>i(972435),A=()=>i(765957),k=()=>i(502438);const x=(0,i(959013).YK)({newPage:{id:"transcriptionNewPageActions.newPage.title",defaultMessage:"Try AI Meeting Notes "}});function T(e){const{environment:t}=e;v().createAndCommit({userAction:"transcriptionNewPageActions.appendTranscriptionBlock",environment:t,canUndo:!0,perform:e=>{(0,y().insertBlockBelow)({environment:t,createBlockItem:f().ry[a().xd.transcription],analyticsFrom:"quick_templates",selection:[],transaction:e})}})}function M(e){const{environment:t,from:i,includeTitle:o,origin:a}=e,r=w({environment:t,from:i,includeTitle:o});r&&g().uK({environment:t,store:r,visitType:h().ig.Link,pageVisitSource:n().y8.Create,origin:a})}function w(e){const{environment:t,from:i,includeTitle:n}=e,g=A().default.state.currentSpaceStore,y=A().default.state.currentSpaceViewStore,h=k().default.getCurrentRecordCache();if(!h)return;if(!g||!y)return;const{performResult:{createdPage:T}}=v().createAndCommit({userAction:"transcriptionNewPageActions.createTranscriptionBlockInNewPage",environment:t,canUndo:!0,perform:e=>{const v=p().IT({environment:t,spaceStore:g,spaceViewStore:y,isPrivate:!0,transaction:e});if(v.isType(a().xd.page)){const i=v.getBlockTitleStore(),a=o().c9.now(),u=S().A.getIntl().formatMessage(x.newPage),m=[n?[u]:void 0,c().wmz(c().Ww9({type:"datetime",start_date:a.toFormat(s().tr),start_time:a.toFormat(r().GE),time_zone:(0,l().P)(),date_format:"relative"}),[[c().BQP.Bold]])].filter(d().O9);b().yr({environment:t,store:i,tokens:m,transaction:e,index:0})}const A=f().ry[a().xd.transcription],k=u().w({environment:t,transaction:e,inMemoryRecordCache:h,from:i,selection:[],createBlockItem:A});return m().NI({childStore:k,parentStore:v,transaction:e}),{createdPage:v}}});return T}},431895:(e,t,i)=>{i.d(t,{HT:()=>g,MZ:()=>v,u:()=>y,xw:()=>m});i(16280);var o=()=>i(874913),n=()=>i(435009),a=()=>i(2220),r=()=>i(112799),s=()=>i(948914),l=()=>i(217429),c=()=>i(927648);const d=(0,i(959013).YK)({latestVersionStepTitle:{id:"transcriptionSetupSteps.latestVersionStepTitle",defaultMessage:"Update the Notion app"},latestVersionStepDescription:{id:"transcriptionSetupSteps.latestVersionStepDescription",defaultMessage:"Update to the latest version of the Notion app to use AI Meeting Notes."},latestVersionStepActionText:{id:"transcriptionSetupSteps.latestVersionStepActionText",defaultMessage:"Update my Notion app"},microphoneStepTitle:{id:"transcriptionSetupSteps.microphoneStepTitle",defaultMessage:"Enable microphone access"},microphoneStepDescription:{id:"transcriptionSetupSteps.microphoneStepDescription",defaultMessage:"This allows Notion AI to transcribe what you say."},microphoneStepActionText:{id:"transcriptionSetupSteps.microphoneStepActionText",defaultMessage:"Enable microphone access"},systemAudioStepTitle:{id:"transcriptionSetupSteps.systemAudioStepTitle",defaultMessage:"Enable screen & system audio access"},systemAudioStepDescription:{id:"transcriptionSetupSteps.systemAudioStepDescription",defaultMessage:"This allows Notion AI to transcribe what everyone else is saying (even on headphones)."},systemAudioStepActionText:{id:"transcriptionSetupSteps.systemAudioStepActionText",defaultMessage:"Enable access"},restartAppStepTitle:{id:"transcriptionSetupSteps.restartAppStepTitle",defaultMessage:"Restart Notion"},restartAppStepDescription:{id:"transcriptionSetupSteps.restartAppStepDescription",defaultMessage:"Final step! Restart your Notion app to apply the permissions."},restartAppStepActionText:{id:"transcriptionSetupSteps.restartAppStepActionText",defaultMessage:"Restart Notion app"}}),u=[{id:"desktop-app-version",title:d.latestVersionStepTitle,description:d.latestVersionStepDescription,hasCompleted:e=>Promise.resolve(y(e.environment)),actionText:d.latestVersionStepActionText,action:async e=>{const t=await(0,r().a)(e.environment.device);t?await o().openExternalUrl(i(780054).A.domainBaseUrl+t):await o().openExternalUrl("https://www.notion.so/desktop")}},{id:"microphone",title:d.microphoneStepTitle,description:d.microphoneStepDescription,hasCompleted:async e=>{if(e.environment.device.isElectronWindows)return!0;if(e.environment.device.isElectron){if("granted"===await o().getMediaAccessStatus("microphone"))return!0;if(e.isConfirmation)try{return await p(),!0}catch{return!1}}return!1},actionText:d.microphoneStepActionText,action:async e=>{try{await p()}catch(t){t instanceof Error&&t.name===c().nY&&o().openSystemSettings("microphone")}}},{id:"system-audio",title:d.systemAudioStepTitle,description:d.systemAudioStepDescription,hasCompleted:async e=>{if(e.environment.device.isElectronWindows)return!0;if(e.isConfirmation){if(await b())return!0}return Promise.resolve(void 0!==c().Ay.getHasAttemptedScreenRecordingPermissions())},actionText:d.systemAudioStepActionText,action:async e=>{const t=await b();c().Ay.setHasAttemptedScreenRecordingPermissions(t?c().a3:c().JS),t&&t===c().a3||o().openSystemSettings("screen-recording")}},{id:"restart-app",title:d.restartAppStepTitle,description:d.restartAppStepDescription,hasCompleted:async e=>{if(e.environment.device.isElectron&&e.isConfirmation){if("allowed"===await b())return!0}return Promise.resolve(!1)},actionText:d.restartAppStepActionText,action:async()=>(o().relaunch(),Promise.resolve())}];function m(){return u}async function g(e){if(l().default.checkGate({gateName:"enable_transcription_on_browser_for_debug_enabled"}))return"startDictation";if("allow_browser"===l().default.getEligibleGroup({experimentId:"ai_meeting_notes_allow_browser"}))return"startDictation";if(e.device.isMobile)return"startDictation";if(e.device.isBrowser)return"noBrowserSupport";if(e.device.isElectron&&e.device.isMac&&void 0!==e.device.osVersion[0]&&e.device.osVersion[0]>10&&e.device.osVersion[0]<=12)return"requiresMacOS13";const t=await async function(e,t){for(const i of t)if(!(await i.hasCompleted({environment:e,isConfirmation:!1})))return i}(e,m());return"desktop-app-version"===(null==t?void 0:t.id)||"microphone"===(null==t?void 0:t.id)?"showSetupModal":"startDictation"}async function p(){const e=(0,i(673903).E)(),t=await e.getUserMedia({audio:!0});for(const i of t.getTracks())i.stop()}async function b(){try{const e=await(0,i(763824).nQ)(5e3,(0,c().Kj)());return e.timeout?c().JS:e.result}catch{return c().JS}}async function v(e){const{environment:t,registered:i,source:o,url:s}=e;if(i)return(0,a().u)({environment:t,event:{eventName:"open_transcription_block_in_desktop_app_clicked",eventProperties:{source:o}}}),void(await n().eG({environment:t,url:s}));await async function(e,t){const i=await(0,r().a)(e.device);if(!i)return;(0,a().u)({environment:e,event:{eventName:"download_app_for_transcription_clicked",eventProperties:{source:t}}}),n().oo({environment:e,url:i,openInNew:"tab"})}(t,o)}function y(e){const t=s().A.state.transcriptionSupportLevel;return Boolean(t)}},454354:(e,t,i)=>{i.d(t,{A:()=>r});var o=()=>i(765957),n=()=>i(630116);class a extends(()=>i(757695))().Store{getInitialState(){return{changePermissionsEnabled:!1,privatePageStore:void 0,loading:!1,error:void 0}}shouldSaveTransactionWithSudoMode(e){const t=e===this.state.privatePageStore,i=this.doesUserAlreadyHaveEditorAccess(e.pointer);return t&&this.state.changePermissionsEnabled&&!i}shouldUserHaveAccessToPrivatePageBlock(){var e,t;const i=null===(e=o().default.state.currentSpaceStore)||void 0===e?void 0:e.canAdmin(),n="enterprise"===(null===(t=o().default.state.currentSpaceStore)||void 0===t?void 0:t.getSubscriptionTier());return this.state.privatePageStore&&i&&n}doesUserAlreadyHaveEditorAccess(e){const t=o().default.state.currentSpaceStore;if(!t)return!1;return(e.table===i(179034).ev?n().Bv.createChildStore(t,e):n().md.createChildStore(t,e)).canAdmin()}}const r=a},475355:(e,t,i)=>{i.d(t,{Vs:()=>P,gj:()=>I,hX:()=>R,oH:()=>B,v4:()=>_});i(16280);var o=()=>i(110192),n=()=>i(857639),a=()=>i(416504),r=()=>i(206267),s=()=>i(737188),l=()=>i(179034),c=()=>i(519831),d=()=>i(854150),u=()=>i(529316),m=()=>i(797573),g=()=>i(919709),p=()=>i(946141),b=()=>i(449506),v=()=>i(413677),y=()=>i(751156),f=()=>i(972435),h=()=>i(45359),S=()=>i(37433),A=()=>i(274511),k=()=>i(406792),x=()=>i(632709),T=()=>i(765957),M=()=>i(630116),w=()=>i(108414),C=()=>i(848237);async function I(e){let{environment:t,name:i,description:o,icon:n,accessLevel:a,isDefault:r,flowId:u,createTeamHome:m,teamPermissionRole:g,spacePermissionRole:v,members:y,settings:f}=e;const{currentSpaceStore:h}=T().default.getState();if(!h)throw new Error("currentSpaceStore does not exist");const S=k().default.mark("client_create_team_latency"),A=h.id,x=await b().callApi({eventName:"createTeam",environment:t,data:{spaceId:A,name:i,description:o,icon:n,isDefault:r,accessLevel:a,teamPermissionRole:g,spacePermissionRole:v,members:y,settings:f}});if("failed"===x.type)return void(0,C().O)(x);const{teamId:w}=x.data,I=M().h4.createChildStore(h,{table:d().yK,id:w,spaceId:A});await I.load();const P=I.getSpaceId(),_=I&&P&&{id:I.id,table:c().Vl,spaceId:P},B=I&&_&&M().md.createChildStore(I,_);await(null==B?void 0:B.load());const R=I&&P&&M().Bv.createChildStore(I,{id:(0,s().t)(I.id),table:l().ev,spaceId:P});return await(null==R?void 0:R.load()),P&&await b().callApi({eventName:"createCollectionViewBlockForPosts",environment:t,data:{teamId:I.id,spaceId:P}}),m&&U({environment:t,teamStore:I}),p()._P(t,{store:I,flowId:u}),k().default.measure(S,{environment:t}),I}function P(e){var t;let{environment:i,page:o}=e;const n=r().JW(),a=(null===(t=o.getParentPointer())||void 0===t?void 0:t.table)!==d().yK?"page_to_team_nested":"page_to_team";p().H8(i,{from:a,flowId:n}),w().A.setState({open:!0,pageStore:o,flowId:n})}async function _(e){var t;let{environment:i,page:o,flowId:n,intl:r}=e;const{accessLevel:s,spacePermissionRole:l,teamPermissionRole:c,members:u}=await(0,S().sy)(o),m=(o.isDefined()?o.getModel().getRenderTitle({intl:r,userTimeZone:(0,a().P)(),getRecordModel:o.getRecordModel}):void 0)??g().q4_(o.getTitleValue()),p=await I({environment:i,name:m,icon:null===(t=o.getIcon())||void 0===t?void 0:t.icon,accessLevel:s,isDefault:!1,description:"",flowId:n,createTeamHome:!1,teamPermissionRole:c,spacePermissionRole:l,members:u});if(!p)return;const{currentSpaceViewStore:b}=T().default.state;if(!b)return;const v=await(0,A().U)();y().createAndCommit({userAction:"teamActions.movePageToCreatedTeam",environment:i,canUndo:!0,perform:e=>{v({environment:i,currentSpaceViewStore:b,transaction:e,teamStore:p,action:"move",value:{type:d().yK,id:p.id},targets:[o],location:{type:"append"}})}}),(0,C().F2)({environment:i,teamId:p.id,tab:x().p.Members,from:"create_team_from_page"}),await new Promise((e=>setTimeout((()=>(0,C().Mh)({teamStore:p,environment:i})),100)))}async function B(e){let{environment:t,name:i,description:o,icon:n,flowId:a,trackCreateTeamComplete:r}=e;const{currentSpaceStore:s}=T().default.getState();if(!s)throw new Error("currentSpaceStore does not exist");const l=s.id,c=await b().callApi({eventName:"enableTeams",environment:t,data:{spaceId:l,defaultTeamName:i,defaultTeamIcon:n,defaultTeamDescription:o}});if("failed"===c.type)return void(0,C().O)(c);const{teamId:u}=c.data,m=M().h4.createChildStore(s,{table:d().yK,id:u,spaceId:l});return await m.load(),await U({environment:t,teamStore:m}),p().b0(t,{spaceId:l,store:m,flowId:a}),r&&u&&p()._P(t,{store:m,flowId:a}),m}async function R(e){var t;let{environment:i,teamStore:n,from:a,buttonPopupStore:s}=e;if(!i.currentUser.id)return!1;const l=r().JW(),c=n.isDefault(),d=n.getTeamAccessLevel();if(c)return!1;const u=n.getName(),m=await I({environment:i,name:(0,o().Q)(u||""),description:"",icon:n.getRawIcon(),accessLevel:d,isDefault:c,createTeamHome:!0,teamPermissionRole:null===(t=n.getTeamPermission())||void 0===t?void 0:t.role,spacePermissionRole:n.getSpacePermissionRole(),members:[],settings:n.getSettings(),flowId:l});return!!m&&(p().KK(i,{store:m,from:a}),(0,C().L0)({environment:i,teamStore:m,shouldScroll:!0}),(0,C().F2)({environment:i,teamId:m.id,tab:x().p.General,from:"duplicate_team",buttonPopupStore:s}),new Promise((e=>setTimeout(e,500))).then((()=>{(0,h().jH)(u)})),!0)}async function U(e){const{environment:t,teamStore:i}=e,o=T().default.state.currentSpaceStore,a=T().default.state.currentSpaceViewStore;if(!o||!a)return n().log({level:"error",from:"teamActions",type:"createHomepageOnTeamCreation-SpaceOrSpaceViewStoreError"}),!1;const r=(s=f().A.getIntl(),(0,m().B)(u().wA.teamsHomepage,s));var s;return!!(await v().createTemplateInstance({environment:t,item:r,spaceStore:o,spaceViewStore:a,useMinimalTemplates:!1,type:"inTeam",teamStore:i,from:"homepage_team",isOnboarding:!1}))||(n().log({level:"error",from:"teamActions",type:"createHomepageOnTeamCreation-PageNotCreated"}),!1)}},482707:(e,t,i)=>{i.d(t,{k:()=>a});var o=()=>i(645873);const n=new(o().O2)("shareMenuContainer",(async()=>await Promise.all([i.e(75134),i.e(9304),i.e(16471),i.e(58550),i.e(44711),i.e(53321),i.e(90825),i.e(96346),i.e(55373),i.e(37353),i.e(29151),i.e(78191),i.e(62475),i.e(3151),i.e(98629),i.e(49889),i.e(97727),i.e(22900),i.e(85128),i.e(95555),i.e(14659),i.e(92845),i.e(84468),i.e(5605),i.e(48486),i.e(95794),i.e(13677),i.e(56952),i.e(48632),i.e(74562),i.e(27711),i.e(4422),i.e(11341),i.e(46414),i.e(95168),i.e(28271),i.e(34877),i.e(36908),i.e(17254),i.e(84185),i.e(32421),i.e(15315),i.e(24587),i.e(78708),i.e(43777),i.e(74752),i.e(91194),i.e(81197),i.e(98659),i.e(20502),i.e(6266),i.e(8184),i.e(83884),i.e(65881),i.e(99809),i.e(93282),i.e(43678),i.e(15019),i.e(90978),i.e(3910),i.e(77213),i.e(6912),i.e(21194),i.e(30291),i.e(39541),i.e(12913),i.e(45620),i.e(54220),i.e(19930),i.e(81768),i.e(58102),i.e(52836),i.e(26483),i.e(19687),i.e(6463),i.e(68137),i.e(50569),i.e(40925),i.e(24975),i.e(282),i.e(87250),i.e(93847),i.e(79928),i.e(7203),i.e(61349),i.e(55197),i.e(94256),i.e(76690),i.e(29669),i.e(24930),i.e(62573),i.e(33882),i.e(44763),i.e(1440),i.e(5044),i.e(31782),i.e(93449),i.e(63996),i.e(895),i.e(66559),i.e(35986),i.e(45683),i.e(78862),i.e(38536),i.e(92924),i.e(64819),i.e(67378),i.e(40186),i.e(97339),i.e(55717),i.e(63797),i.e(56352),i.e(52811),i.e(28398),i.e(21367),i.e(65351),i.e(22686),i.e(4112),i.e(31889),i.e(36009),i.e(81973),i.e(2600),i.e(77663),i.e(97832),i.e(75681)]).then(i.bind(i,578030)))),a=(0,o()._h)(n,(e=>e.ShareMenuContainer))},495867:(e,t,i)=>{i.d(t,{BY:()=>y,Lg:()=>f,id:()=>k,nE:()=>x,xi:()=>h});i(944114),i(898992),i(430670),i(581454);var o=()=>i(857639),n=()=>i(402390),a=()=>i(68263),r=()=>i(762433),s=()=>i(449506),l=()=>i(579627),c=()=>i(436572),d=()=>i(972435),u=()=>i(765957),m=()=>i(57605),g=()=>i(159026),p=()=>i(329304),b=()=>i(47373),v=()=>i(250064);async function y(e){const{environment:t,spaceStore:i,contextualInviteStore:o}=e;!function(e){const{spaceStore:t,contextualInviteStore:i}=e,o=t.getRole();if(!o||!(0,a().NB)(o))return!1;if(!i.hasGuests())return!1;if(t.getDisableMembershipRequests())return!1;return(0,b().x3)()}({environment:t,spaceStore:i,contextualInviteStore:o})?await async function(e){const{spaceStore:t,contextualInviteStore:i,environment:o}=e,n=t.getRole();if(!n||!(0,a().vp)(n))return!1;if(!i.hasGuests())return!1;return await(0,p().Se)(o,{name:"members",spaceId:t.id,userId:t.userId,amount:1})}({environment:t,spaceStore:i,contextualInviteStore:o})?o.startWorkspaceInvite():o.setState({...o.state,inviteStage:g().d5.closed}):o.startRequestMembership()}async function f(e){const{environment:t,spaceStore:i,contextualInviteStore:n,from:a,intl:r}=e,{selection:s,flowId:d}=n.state;if("page_guest"===s||!n.hasGuests())return n.reset(),!1;const{inviteTargets:u,unknownEmails:m}=await S({environment:t,contextualInviteStore:n}),g={...n.state};n.reset();const b=await(0,p().Se)(t,{name:"non_admin_members",spaceId:i.id,userId:i.userId})?e.inviteRole??"read_and_write":"editor";try{await l().eP({environment:t,store:i,inviteTargets:u,inviteRole:b,isOnboarding:!1,invite:{inviteOrigin:a,inviteFlowId:d,disable_invite_email:!0}})}catch(v){return function(e,t){if(0===t.length)return;c().D6({label:e.formatMessage({id:"contextual_invite.contextual_invite_failure",defaultMessage:"{userCount, plural, one {Failed to invite {users} as member} other {Failed to invite {users} as members}}"},{users:k(t,e),userCount:t.length})})}(r,g.invitedUsers),o().log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.inviteTargets",data:{miscDataToConvertToString:{...g,inviteTargets:u}}}),!1}finally{m.length&&o().log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.unknownUserId",data:{miscDataToConvertToString:{...g,unknownEmails:m}}})}return!0}async function h(e){const{environment:t,spaceStore:i,originId:n,originType:a,reasonMessage:r,contextualInviteStore:l,intl:d}=e,{selection:u}=l.state;if("page_guest"===u||!l.hasGuests())return l.reset(),!1;const{inviteTargets:m,unknownEmails:g}=await S({environment:t,contextualInviteStore:l}),p={...l.state};l.reset();const b=[];try{const e=m.map((e=>s().callApi({eventName:"requestAccess",environment:t,data:{type:"actor-to-space",forActorId:e.value.id,spaceId:i.id,message:r,attributes:{origin_id:n,origin_type:a,origin_table:"share_menu"===a?"block":"space",add_permissions_on_approval:!1}}}).catch((()=>b.push(e)))));await Promise.all(e)}catch(v){return function(e,t){if(0===t.length)return;c().D6({label:e.formatMessage({id:"contextual_invite.request_members_failure",defaultMessage:"Failed to request {users} to become members"},{users:k(t,e)})})}(d,p.invitedUsers),o().log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.inviteTargets",data:{miscDataToConvertToString:{...p,inviteTargetsWithErrors:b}}}),!1}finally{g.length&&o().log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.unknownUserId",data:{miscDataToConvertToString:{...p,unknownEmails:g}}})}return!0}async function S(e){const{environment:t,contextualInviteStore:i}=e,{invitedEmailToUserIdMap:o}=i.state,n=[],a=[];for(const r of i.state.invitedUsers){if(!r.isGuest)continue;const e=await A(t,r,o);e?n.push({type:"existingUser",value:{id:e,email:r.email,version:1}}):a.push(r.email)}return{inviteTargets:n,unknownEmails:a}}async function A(e,t,i){const o=await async function(e,t,i){let o=t.id;if(o||(o=i[t.email]),!o){const i=await s().callApi({eventName:"findUser",environment:e,data:{email:t.email}});if("failed"!==i.type){const e=i.data;e.value&&(o=e.value.value.id)}}return o}(e,t,i);if(o)return o;const a=(0,n().H)(d().A.getIntl()),r=await s().callApi({eventName:"createEmailUser",environment:e,data:{email:t.email,preferredLocaleOrigin:"inferred_from_inviter",preferredLocale:a}});return"failed"!==r.type?r.data.userId:void 0}function k(e,t){return(0,v().l)(e.flatMap((e=>e.email||[])))}function x(e,t){var i;const{state:o}=t,n=null===(i=u().default.state.currentSpaceStore)||void 0===i?void 0:i.id,a=n?(0,r().AI)(m().A.getData(e,{spaceId:n})):void 0,s=t.getGuestEmails();return{invite_flow_id:o.flowId,user_count:s.length,user_emails:s,invite_space_role_selection:o.selection,is_bot:!1,subscription_tier:a}}},509060:(e,t,i)=>{i.d(t,{A:()=>a});i(296540);var o=()=>i(959013),n=i(474848);const a=function(e){let{on:t,menuListItemProps:a,disabled:r}=e;return(0,n.jsx)(i(859428).A,{disableTooltip:!r,renderTooltip:()=>(0,n.jsx)(o().sA,{defaultMessage:"Only available for Count",id:"AggregationLimitToggle.disabled.tooltip"}),render:e=>(0,n.jsx)(i(574036).A,{...(0,i(553965).A)(a,e),on:!r&&t,disabled:r,style:{alignItems:"flex-start",paddingTop:8,paddingBottom:8},title:(0,n.jsx)(o().sA,{defaultMessage:"Show large counts as 99+",id:"BoardAggregations.aggregationLimitToggle.title"}),captionStyle:{marginTop:6},shouldWrapCaption:!0,caption:(0,n.jsx)(o().sA,{defaultMessage:"This improves performance for large databases.",id:"BoardAggregations.aggregationLimitToggle.description"})})})}},542056:(e,t,i)=>{i.d(t,{Ah:()=>B,D6:()=>_,KW:()=>w,Oo:()=>M,Pp:()=>R,St:()=>P,hQ:()=>j,iS:()=>I,kW:()=>C,l5:()=>T,lf:()=>U});i(944114),i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698),i(898992),i(354520),i(803949),i(581454);var o=()=>i(842599),n=()=>i(68263),a=()=>i(96689),r=()=>i(496603),s=()=>i(763824),l=()=>i(579627),c=()=>i(495867),d=()=>i(731320),u=()=>i(743260),m=()=>i(299545),g=()=>i(37433),p=()=>i(106628),b=()=>i(765957),v=()=>i(57605),y=()=>i(159026),f=()=>i(217429),h=()=>i(630116),S=()=>i(991249),A=()=>i(475355),k=()=>i(134696),x=()=>i(449506);async function T(e){const{environment:t,store:i,sudoModeStore:a,permissionsInviteStore:r,onInviteStart:s,contextualInviteStore:c,inviteOrigin:g}=e,{tokenQuery:p}=r.state;if((0,o().DT)(p.trim())){const e={type:"newUser",value:{email:p.trim()},source:"email"};u().mQ({target:e,permissionsInviteStore:r})||r.setState({...r.state,inviteTargets:[...r.state.inviteTargets,e],tokenQuery:""})}if(r.state.inviteTargets.length>0){null==s||s();const e=r.state,{inviteRole:o,flowId:u,emailMessage:p}=e;r.reset();const b=await(0,d().hb)(i,e.inviteTargets);if((0,n().PW)(o)){const e=await l().eP({environment:t,store:i,sudoModeStore:a,inviteTargets:b,inviteRole:o,isOnboarding:!1,invite:{inviteFlowId:u,inviteMessage:p,inviteOrigin:g}});return e.success&&(null==c||c.setState({...null==c?void 0:c.state,invitedEmailToUserIdMap:e.invitedUsers})),{success:e.success,requestedUserCount:e.success?Object.keys(e.requestedUsers).length:0}}if((0,m().$R)(i)){return{success:await l().sQ({environment:t,store:i,inviteTargets:e.inviteTargets,inviteRole:o,createNewTeamFlowId:u}),requestedUserCount:0}}}return{success:!0,requestedUserCount:0}}function M(e){e.permissionsInviteStore.setState({...e.permissionsInviteStore.state,modalOpen:!1,flowId:void 0})}function w(e){const{permissionsInviteStore:t,contextualInviteStore:i}=e;if(!i)return;const o=[];t.state.inviteTargets.forEach((e=>{if("newUser"===e.type)o.push({email:e.value.email,isGuest:!0});else if("existingUser"===e.type){const t={...e.value,email:e.value.email,isGuest:"none"===e.spaceRole||"not_in_space"===e.spaceRole};o.push(t)}})),i.setState({...i.state,invitedUsers:o})}async function C(e){const{environment:t,store:i,sudoModeStore:o,permissionsInviteStore:n,contextualInviteStore:r,onInviteClick:s,onInviteComplete:l,inviteOrigin:d,intl:u}=e,m=i.getSpaceId(),p=new(h().SL)(t,{table:a().NX,id:m}),b=m?await v().A.awaitData(t,{spaceId:m}):void 0;if((null==r?void 0:r.state.selection)===y().NJ.workspace_member&&p&&(0,g().Gx)(t,b)){if(!(await A().oH({environment:t,flowId:n.state.flowId||"",trackCreateTeamComplete:!1})))return;w({permissionsInviteStore:n,contextualInviteStore:r}),await(0,c().Lg)({environment:t,spaceStore:p,contextualInviteStore:r,from:d,intl:u})}else w({permissionsInviteStore:n,contextualInviteStore:r});let f={success:!1,requestedUserCount:0};try{f=await T({environment:t,store:i,sudoModeStore:o,permissionsInviteStore:n,contextualInviteStore:r,onInviteStart:()=>{null==s||s()},inviteOrigin:d})}catch(S){}finally{null==l||l(f.success,f.requestedUserCount)}}async function I(e){const{environment:t,permissionsInviteStore:i,from:o}=e;await u().iQ({environment:t,permissionsInviteStoreState:i.state,from:o})||i.reset()}function P(e){const{permissionsInviteStore:t,targetToRemove:i,defaultRoleForNonBot:o}=e,n=t.state.inviteTargets.filter((e=>e!==i));t.setState({...t.state,inviteTargets:n,inviteRole:o})}function _(e){const{environment:t,onUpgradeButtonClick:i,upgradeButtonName:o}=e;S().K(t,{from:o,upsell:{type:"product",product:"plus",limit:{type:"none"},trialability:"none"}}),null==i||i()}async function B(e,t){const i=new Set(t),o=Array.from(i).map((async t=>{const i=await x().callApi({eventName:"findUser",environment:e,data:{email:t}});if("success"===i.type){const e=i.data;if(e.value){return{type:"existingUser",value:e.value.value}}}return{type:"newUser",value:{email:t},source:"email"}}));return await Promise.all(o)}async function R(e){const{environment:t,permissionsInviteStore:i,event:n}=e,a=n.target.value,{extractedEmails:r,newInputValue:s}=(0,o().Ct)(a),l=(await B(t,r)).filter((e=>!u().mQ({target:e,permissionsInviteStore:i}))),c=[...i.state.inviteTargets,...l];i.setState({...i.state,inviteTargets:c,inputFocus:"invitee",tokenQuery:s})}function U(e){const{environment:t,newRole:i,permissionsInviteStore:o}=e,{state:n}=o;k().Jy(t,{...u().oX(t,n),invite_updated_role:i}),o.setState({...n,inviteRole:i})}async function j(e){var t;const{query:i,environment:o,sectionLimit:n,intl:a,membersOnly:l,importContactType:c,shouldUseEdgeCacheRollout:d}=e,{currentSpaceStore:u}=b().default.state;if(!u)return{inviteUsers:[],inviteGroups:[]};const m=f().default.getConfigKey("search_contacts_timeout","timeoutMs"),{userLimit:g,groupLimit:v,importContactLimit:y}=n,h=await p().T.searchActions.load(),[S,A,{user:k,email:T},M]=await Promise.all([g>0?h.searchSpaceUsers({environment:o,query:i,membersOnly:l,limit:g,shouldUseEdgeCacheRollout:d}):[],v>0?h.searchSpaceGroups({query:i,intl:a}):[],h.searchEmailUser(o,i),y>0?(0,s().nQ)(m,x().callApi({eventName:"searchContacts",environment:o,data:{spaceId:u.id,limit:y,query:i,importContactType:c,includeNonNotionUsers:!l,includeUserId:!0}})):void 0]),w=S.slice(0,g).map((e=>({type:"existingUser",value:e}))),C=A.slice(0,v).map((e=>({type:"group",value:e})));k&&w.unshift({type:"existingUser",value:k}),T&&w.unshift({type:"newUser",value:{email:T},source:"email"});let I=0,P=[];var _;"success"===(null==M||null===(t=M.result)||void 0===t?void 0:t.type)&&(P=M.result.data.contacts.map((e=>({type:"newUser",value:{email:e.email,name:e.name,avatar_url:e.profile_photo,user_id:e.user_id},source:e.type}))),I=(null==M||null===(_=M.result)||void 0===_||null===(_=_.data)||void 0===_?void 0:_.totalCount)??0);return{inviteUsers:r().hS(w,(e=>e.value.email)),inviteGroups:C,importedContacts:P,totalContactsCount:I}}},563015:(e,t,i)=>{i.d(t,{eJ:()=>b,ew:()=>p,ml:()=>d,rA:()=>m,yI:()=>g,zf:()=>u});i(581454);var o=()=>i(496603),n=()=>i(534177),a=()=>i(708685),r=()=>i(145076),s=()=>i(349835),l=()=>i(977345);function c(e){switch(e){case"checkbox":return"boolean";case"number":return"number";case"text":return"text";case"date":return"date";case"array":return"array";case"block":return"block";case"person":return"person";case"select":return"select";case"function":return"function";case"unknown":return"unknown";case"undefined":return"undefined";default:(0,n().HB)(e)}}function d(e){switch(e.type){case s().M9.InvalidCharacter:return{...r().x0.InvalidCharacter,values:{errorCharacter:e.character}};case s().M9.UnclosedStringLiteral:return r().x0.UnclosedStringLiteral;case s().M9.UnclosedComment:return r().x0.UnclosedComment;case s().M9.TokenExpected:return{...r().x0.TokenExpected,values:{expectedToken:e.token}};case s().M9.StringLiteralContainsToken:return r().x0.StringLiteralContainsToken;case s().M9.ExpressionExpected:return r().x0.ExpressionExpected;case s().M9.PropertyTokenOrFunctionExpected:return r().x0.PropertyTokenOrFunctionExpected;case s().M9.EndOfInputExpected:return r().x0.EndOfInputExpected;case s().M9.UnexpectedError:return r().x0.UnexpectedError;case s().M9.TooDeeplyNested:return r().x0.TooDeeplyNested;default:(0,n().HB)(e)}}function u(e){switch(e.type){case s().IA.FunctionCallArgumentWrongType:case s().IA.FunctionCallUnexpectedArgument:return e.argument;default:return e.node}}function m(e,t){let i;switch(t.type){case s().IA.ThisRowTypeNotFound:i=r().Xz.ThisRowTypeNotFound;break;case s().IA.ThisRowNotBlockWithCollection:i=r().Xz.ThisRowNotBlockWithCollection;break;case s().IA.MissingPropertyOnThisRow:i={...r().Xz.MissingPropertyOnThisRow,values:{propertyName:t.property}};break;case s().IA.MissingContextVariable:{const e=(0,l().ix)(t.token)?t.token.contextValueId:t.token.valueId;i={...r().Xz.MissingContextVariable,values:{valueId:e}}}break;case s().IA.MissingBlock:i={...r().Xz.MissingBlock,values:{blockId:t.token.blockId}};break;case s().IA.CallingNotFunction:i={...r().Xz.CallingNotFunction,values:{expressionType:c(t.callee.type.type)}};break;case s().IA.FunctionCallTooFewArguments:i={...r().Xz.FunctionCallTooFewArguments,values:{minNumParameters:t.minNumParameters,functionName:t.libraryFunction.name,numArguments:t.numArguments}};break;case s().IA.FunctionCallUnexpectedArgument:i={...r().Xz.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case s().IA.FunctionCallArgumentWrongType:i={...r().Xz.FunctionCallArgumentWrongType,values:{argumentType:c(t.argument.type.type),functionName:t.libraryFunction.name}};break;case s().IA.MemberPropertyMismatchCollection:i={...r().Xz.MemberPropertyMismatchCollection,values:{propertyName:t.token.property}};break;case s().IA.MemberPropertyMissing:i={...r().Xz.MemberPropertyMissing,values:{propertyName:t.property}};break;case s().IA.MemberPropertyTargetNotBlock:i=r().Xz.MemberPropertyTargetNotBlock;break;case s().IA.MemberPropertyTypeInvalid:i={...r().Xz.MemberPropertyTypeInvalid,values:{propertyName:t.propertyName,propertyType:t.propertyType}};break;case s().IA.UndefinedIdentifier:i={...r().Xz.UndefinedIdentifier,values:{identifier:t.node.text}};break;case s().IA.UnifiedFunctionCannotFindFunction:i={...r().Xz.UnifiedFunctionCannotFindFunction,values:{functionName:t.name}};break;case s().IA.UnifiedFunctionNoArguments:i={...r().Xz.UnifiedFunctionNoArguments,values:{functionName:t.libraryFunction.name}};break;case s().IA.UnifiedFunctionTargetWrongType:i={...r().Xz.UnifiedFunctionTargetWrongType,values:{functionName:t.libraryFunction.name,targetType:c(t.expression.type.type)}};break;case s().IA.CannotRelativelyCompareTypes:i={...r().Xz.CannotRelativelyCompareTypes,values:{lhsType:c(t.lhsType.type),rhsType:c(t.rhsType.type)}};break;case s().IA.CannotDoMathOnType:i={...r().Xz.CannotDoMathOnType,values:{lhsType:c(t.lhsType.type),rhsType:c(t.rhsType.type)}};break;case s().IA.UnaryMinusOnNonNumber:i={...r().Xz.UnaryMinusOnNonNumber,values:{type:c(t.expression.type.type)}};break;case s().IA.IdentifierExpected:i=r().Xz.IdentifierExpected;break;case s().IA.FunctionCallExpected:i={...r().Xz.FunctionCallExpected,values:{functionName:t.functionName}};break;case s().IA.RenamedIdentifier:i={...r().Xz.RenamedIdentifier,values:{identifier:t.identifier,renamedTo:t.renamedTo}};break;case s().IA.RemovedFunction:i={...r().Xz.RemovedFunction,values:{functionName:t.functionName,alternative:t.alternative}};break;case s().IA.ContextVariableNotBlockWithCollection:i={...r().Xz.ContextVariableNotBlockWithCollection,values:{valueId:t.token.contextValueId}};break;case s().IA.MissingPropertyOnContextVariable:i={...r().Xz.MissingPropertyOnContextVariable,values:{propertyName:t.property,valueId:t.token.contextValueId}};break;case s().IA.BlockPropertyTypeInvalid:i={...r().Xz.BlockPropertyTypeInvalid,values:{propertyName:t.propertyName}};break;case s().IA.DisallowedReturnType:{const o=t.allowedReturnTypes.map((t=>e.formatMessage((0,a().getHumanReadableType)(t)).toLocaleLowerCase()));i={...r().Xz.DisallowedReturnType,values:{allowedReturnType:e.formatList(o,{style:"long",type:"conjunction"}),allowedReturnTypeCount:t.allowedReturnTypes.length,returnType:e.formatMessage((0,a().getHumanReadableType)(t.returnType)).toLocaleLowerCase()}};break}case s().IA.CrossSpacePropertyNotSupported:i={...r().Xz.CrossSpacePropertyNotSupported};break;default:(0,n().HB)(t)}return{...i,values:{...i.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}}function g(e,t){let i;switch(t.type){case s().uW.MissingThisRow:i=r().X8.MissingThisRow;break;case s().uW.MissingSchemaPropertyOnThisRow:i={...r().X8.MissingSchemaPropertyOnThisRow,values:{propertyName:t.property}};break;case s().uW.ThisRowBlockPropertyMismatchCollection:i=r().X8.ThisRowBlockPropertyMismatchCollection;break;case s().uW.MissingContextVariable:i={...r().X8.MissingContextVariable,values:{valueId:t.valueId}};break;case s().uW.IdentifierNotFound:i={...r().X8.IdentifierNotFound,values:{identifier:t.node.text}};break;case s().uW.CannotRelativelyCompareTypes:i={...r().X8.CannotRelativelyCompareTypes,values:{lhsType:c(t.lhsType),rhsType:c(t.rhsType)}};break;case s().uW.CannotDoMathOnType:i={...r().X8.CannotDoMathOnType,values:{valueType:c(t.valueType)}};break;case s().uW.CannotCallNonFunction:i={...r().X8.CannotCallNonFunction,values:{calleeType:c(t.calleeType)}};break;case s().uW.UnifiedFunctionPropertyNotFound:i={...r().X8.UnifiedFunctionPropertyNotFound,values:{functionName:t.node.name}};break;case s().uW.LibraryFunctionExecutionError:const o=t.error instanceof s().x4?t.error:void 0;i=(null==o?void 0:o.info.type)===s().v3.DateInvalidDurationUnit?{...r().gW.DateInvalidDurationUnit,values:{functionName:t.libraryFunction.name,invalidUnit:o.info.invalidUnit}}:(null==o?void 0:o.info.type)===s().v3.CannotUseToNumberOnList?{...r().gW.CannotUseToNumberOnList}:(null==o?void 0:o.info.type)===s().v3.CannotRoundToNonInteger?{...r().gW.CannotRoundToNonInteger,values:{precision:o.info.precision}}:(null==o?void 0:o.info.type)===s().v3.CannotRoundToTooManyDecimalPlaces?{...r().gW.CannotRoundToTooManyDecimalPlaces,values:{precision:o.info.precision}}:{...r().X8.LibraryFunctionExecutionError,values:{functionName:t.libraryFunction.name}};break;case s().uW.FunctionCallTooFewArguments:i={...r().X8.FunctionCallTooFewArguments,values:{functionName:t.libraryFunction.name}};break;case s().uW.FunctionCallUnexpectedArgument:i={...r().X8.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case s().uW.FunctionCallArgumentWrongType:i={...r().X8.FunctionCallArgumentWrongType,values:{functionName:t.libraryFunction.name,argumentType:c(t.argumentType)}};break;case s().uW.AccessingPropertyOnNonBlock:i=r().X8.AccessingPropertyOnNonBlock;break;case s().uW.MissingDataDependencyBlock:i={...r().X8.MissingDataDependencyBlock,values:{blockId:t.blockPointer.id}};break;case s().uW.MissingDataDependencyPerson:i={...r().X8.MissingDataDependencyPerson,values:{personId:t.personPointer.id}};break;case s().uW.MemberPropertyMismatchCollection:i=r().X8.MemberPropertyMismatchCollection;break;case s().uW.MissingPropertyOnSchemaForMemberProperty:i=r().X8.MissingPropertyOnSchemaForMemberProperty;break;case s().uW.UnaryMinusOnNonNumber:i={...r().X8.UnaryMinusOnNonNumber,values:{expressionType:c(t.expressionType)}};break;case s().uW.UnexpectedRecoveryNode:i=r().X8.UnexpectedRecoveryNode;break;case s().uW.UnexpectedError:i=r().X8.UnexpectedError;break;case s().uW.DepthExceeded:i=r().X8.DepthExceeded;break;case s().uW.CycleDetected:i=r().X8.CycleDetected;break;case s().uW.DownstreamParseFailure:i=r().X8.DownstreamParseFailure;break;case s().uW.MaxEvaluationTimeExceeded:i=r().X8.MaxEvaluationTimeExceeded;break;case s().uW.MissingSchemaPropertyOnCollection:i={...r().X8.MissingSchemaPropertyOnCollection,values:{collectionId:t.collectionId,propertyName:t.property}};break;case s().uW.ContextVariableWrongType:i={...r().X8.ContextVariableWrongType,values:{expectedType:t.expectedType,propertyType:t.resultType,valueId:t.valueId}};break;case s().uW.DisallowedValueType:{const o=t.allowedValueTypes.map((t=>e.formatMessage((0,a().getHumanReadableType)(t)).toLocaleLowerCase()));i={...r().Xz.DisallowedReturnType,values:{allowedValueType:e.formatList(o,{style:"long",type:"conjunction"}),allowedValueTypeCount:t.allowedValueTypes.length,valueType:e.formatMessage((0,a().getHumanReadableValueType)(t.expressionValue)).toLocaleLowerCase()}};break}default:(0,n().HB)(t)}return(0,l().li)(t)?{...i,values:{...i.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}:i}function p(e){const t=null==e?void 0:e.values;return[o().cJ(e,"values"),t]}function b(e){return e.type===s().uW.DepthExceeded||e.type===s().uW.CycleDetected||e.type===s().uW.MaxEvaluationTimeExceeded||e.type===s().uW.LibraryFunctionExecutionError}},566081:(e,t,i)=>{i.d(t,{A:()=>j});var o=i(296540),n=()=>i(56366),a=()=>i(728611),r=()=>i(908006),s=()=>i(725614),l=()=>i(685889),c=()=>i(704152),d=()=>i(16006),u=i(474848);function m(e){const{blockStore:t,titleStyle:i,shouldWrap:n,recordTitleRef:a,disableTooltip:m}=e,g=(0,o.useRef)({getNode:()=>a.current}),p=(0,o.useCallback)((e=>{r().default.afterNextFlush((()=>{const e=t.getBlockTitleStore();if(!e)return;const i=e.getValue(),o=i?i[0][0].length:0,n={start:{index:o,store:e},end:{index:o,store:e}};s().setMultiSelection({multiSelection:n})}))}),[t]);return(0,u.jsx)(c().A,{style:{height:l().d0+2,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:5,padding:"6px 8px 7px 8px",overflow:"hidden"},onClick:p,children:(0,u.jsx)(d().A,{store:t,underline:!0,shouldWrap:n,style:i,ref:g,disableTooltip:m})})}var g=()=>i(959013),p=()=>i(496603),b=()=>i(792540),v=()=>i(972435),y=()=>i(524702);const f=(0,g().YK)({typeTitle:{defaultMessage:"Type a title...",id:"relationToken.title.placeholder"}});function h(e){const{blockStore:t,clickTitleBehavior:i,onTitleEnter:o,onTitleEsc:a}=e,r="edit"===i,s=(0,n().K8)((()=>t.getBlockTitleStore()),[t]);return(0,u.jsx)(y().A,{store:s,disabled:!r,disableSlashCommands:!0,disableEmojiCommands:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableEmbedMenu:!0,onEnter:o,onEsc:a,onTab:p().D_,placeholder:v().A.formatMessage(f.typeTitle),style:{padding:"6px 8px 7px 8px",textOverflow:"none",overflow:"visible",whiteSpace:"pre"},disableSelectAllBlocks:!0,pasteBehavior:"inline",inPageFind:b().Os.none})}var S=()=>i(484714),A=()=>i(919709),k=()=>i(319975);const x=function(e){const{store:t,style:r,disableLinks:s,disableHover:l,isAndroid:c,externalIntegrations:d,canEdit:m,shouldWrap:p,tokenFormat:b}=e,v=(0,o.useRef)(null),y=(0,g().tz)(),f=(0,S().v3)(),h=(0,i(401497).DP)(),{isExternalIntegrationPageType:x,blockType:T,blockId:M,blockModel:w}=(0,n().K8)((()=>{const e=t.getModel();return{isExternalIntegrationPageType:Boolean(null==e?void 0:e.isType(i(700500).xd.externalObjectInstancePage)),blockType:t.getType(),blockId:t.id,blockModel:e}}),[t]),C=(0,n().K8)((()=>i(267419).A.getState()),[]),I=(0,o.useCallback)((()=>{if(!v||!v.current)return;const e=(0,A().bMp)(t.id),i=(0,A().wmz)(e);return{textValue:[i],tokenIndex:0,textToken:i,node:v.current}}),[v,t.id]),P=(0,o.useCallback)((e=>{if(l)return;const i=I(),o=t.getTitleStore();o&&i&&k().xE({environment:f,event:e,interactiveToken:i,store:o,canEdit:m})}),[l,I,t,f,m]),_=(0,o.useCallback)((e=>{const i=I(),o=t.getTitleStore();o&&i&&!l&&k().HH({environment:f,event:e,interactiveToken:i,store:o,canEdit:m})}),[I,t,l,f,m]),B=t.getRecordModel,R=M,U=(0,i(712030).FN)(f),j=i(780054).A.domainBaseUrl,N=f.currentUser.id,E=!s,L=(0,n().K8)((()=>{if(w)return(0,i(191772).gA)({blockModel:w,shouldWrap:p,index:0,style:r,disableHover:l,disableLinks:s,isAndroid:c,theme:h,getRecordModel:B,currentUserId:N,baseUrl:j,emojiType:U,externalIntegrations:d,classNames:[],intl:y,emojiData:C,stopLinkPropagation:E,tokenFormat:(0,i(425497).Ug)(b)})}),[w,p,r,l,s,c,h,B,N,j,U,d,y,C,E,b]);return R?"external_object_instance_page"!==T?null:x?(0,u.jsx)("span",{ref:v,onMouseOver:P,onMouseOut:_,onClick:E?a().kV:void 0,style:{width:"100%"},children:L}):null:null};function T(e){const{blockStore:t,shouldWrap:o,style:a,disableLinks:r,format:s}=e,l=(0,n().K8)((()=>(0,i(939768).q7)(t.getSyncedUri())),[t]),c=(0,n().O$)(i(53137).A.integrations),d=(0,S().v3)();return(0,u.jsx)(x,{shouldWrap:o,store:t,style:a,disableHover:r||!l,disableLinks:r||!l,isAndroid:d.device.isAndroid,externalIntegrations:c,canEdit:!0,tokenFormat:s})}var M=()=>i(738865);function w(e){const{format:t,showRemoveButton:o,onClickRemove:n}=e,{height:a,closeIconSize:r}=M().U[t];return o?(0,u.jsx)(c().A,{onClick:n,style:{display:"flex",alignItems:"center",justifyContent:"center",width:a,height:a,marginLeft:2,marginRight:2,flexGrow:0,flexShrink:0,borderRadius:4},children:(0,i(65767).l)({width:r,height:r,opacity:.5})}):null}var C=()=>i(584262),I=()=>i(519839),P=()=>i(175116),_=()=>i(492414),B=()=>i(765957);var R=()=>i(231722),U=()=>i(24157);const j=(0,o.forwardRef)((function(e,t){const{parentStore:a,blockId:r,shouldWrap:s,format:l,showRemoveButton:c,clickTitleBehavior:d,onClickRemove:m,titleStyle:g,onTitleEnter:p,onTitleEsc:b,index:v,noUnderline:y,disableTooltip:f,disableLinks:h}=e,S=i(630116).Bv.createChildStore(a,{table:i(179034).ev,id:r}),{style:A}=(0,M().t)(e),k=(0,o.useRef)(null),x=(0,o.useRef)(null),C="peek"===d;(0,o.useImperativeHandle)(t,(()=>S),[S]);const I=(0,n().K8)((()=>"external_object_instance_page"===S.getType()),[S]);if((0,i(571468).W)(S))return null;if(I)return(0,u.jsx)(T,{shouldWrap:s,blockStore:S,style:A,disableLinks:h,format:l});const P=(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i(124954).w,{format:l,blockStore:S,clickTitleBehavior:d,shouldWrap:s}),(0,u.jsx)(E,{blockStore:S,recordTitleRef:k,clickTitleBehavior:d,shouldWrap:s,titleStyle:g,noUnderline:y,onTitleEnter:p,onTitleEsc:b,index:v,disableTooltip:f})]});return(0,u.jsxs)("div",{style:A,ref:x,children:[C?(0,u.jsx)(N,{blockStore:S,relationTokenStyle:A,children:P}):P,(0,u.jsx)(w,{showRemoveButton:c,onClickRemove:m,format:l})]})}));function N(e){let{blockStore:t,relationTokenStyle:r,children:s}=e;const{blockUrlPage:l,blockUrlPeek:c}=function(e){const t=(0,S().v3)(),i=(0,P().Ks)(),o=(0,n().K8)((()=>(0,_().Ay)({store:e,fullyQualified:!1,pageVisitSource:C().y8.LinkInPage})),[e]);return{blockUrlPeek:(0,n().K8)((()=>{const{mainEditorCurrentBlockStore:o}=B().default.state;return I().wy({environment:t,store:e,mainEditorCurrentBlockStore:o,collectionContextStore:i,fullyQualified:!1})}),[t,e,i]),blockUrlPage:o}}(t),d=(0,o.useMemo)((()=>({display:r.display,height:r.height,alignItems:r.alignItems})),[r]);return(0,u.jsx)(i(187485).A,{href:l,metaHref:c,onClick:a().kV,style:d,children:s})}function E(e){const{blockStore:t,clickTitleBehavior:o,onTitleEnter:a,onTitleEsc:r,index:s,recordTitleRef:l,titleStyle:c,shouldWrap:d,noUnderline:g,disableTooltip:p}=e,b=(0,i(551619).Sm)(t),v="edit"===o&&!b,y=function(e){return(0,n().K8)((()=>{var t;const i=U().default.state;return"editing"===i.mode&&(null===(t=(0,R().H7)(i.multiSelection))||void 0===t?void 0:t.store)===e.getBlockTitleStore()}),[e])}(t);return v?y&&a&&s?(0,u.jsx)(h,{blockStore:t,clickTitleBehavior:o,onTitleEnter:a,onTitleEsc:r}):(0,u.jsx)(m,{blockStore:t,recordTitleRef:l,titleStyle:c,shouldWrap:d,disableTooltip:p}):(0,u.jsx)(i(279620).Y,{blockStore:t,recordTitleRef:l,titleStyle:c,shouldWrap:d,noUnderline:g,disableTooltip:p})}},571468:(e,t,i)=>{i.d(t,{W:()=>a,X:()=>n});var o=()=>i(56366);function n(e){return e.isReady()&&!e.isDefined()&&"none"!==e.getRole()}function a(e){return(0,o().K8)((()=>n(e)),[e])}},592674:(e,t,i)=>{i.d(t,{A:()=>n});const o=new(i(848776).U)((e=>{let{spaceId:t}=e;return t}),(async function(e,t){var o;let{spaceId:n}=t;const a=await Promise.resolve().then(i.bind(i,449506)),r=await a.callApi({eventName:"getInternalDomains",environment:e,data:{spaceId:n}});return"success"===r.type?null===(o=r.data)||void 0===o?void 0:o.internalDomainsWithInfo:void 0}));i(604341).exposeDebugValue("InternalDomainsStore",o);const n=o},623275:(e,t,i)=>{i.d(t,{$D:()=>c,CJ:()=>m,CY:()=>v,Sg:()=>l,iM:()=>f,kJ:()=>g,kx:()=>b,qj:()=>y,rL:()=>a,sH:()=>p,u6:()=>r,zr:()=>d});var o=()=>i(278238),n=()=>i(115512);const a=16,r=20,s=10,l=12,c=456,d=24,u=24,m=48;function g(e){let{theme:t,isMobile:i}=e;return{background:t.tint.regular,borderRadius:8,paddingTop:8,paddingBottom:8,paddingLeft:8,paddingRight:8,marginLeft:i?0:a,marginRight:i?0:a,marginTop:4,marginBottom:8}}function p(){return{...v(),width:"unset",height:m,paddingTop:6,paddingBottom:6}}function b(e){let{environment:t}=e;return(0,n().ny)(t,t.device.isMobile?"UISmall":"UIRegular")}function v(){return{borderRadius:s,transition:"background 150ms ease-out"}}function y(e){let{isMobile:t}=e;return t?12:10}function f(e){let{theme:t,colorOverride:i,size:n=u,useLargeBorderRadius:a,useLightBackgroundColor:r,icon:s}=e;return{background:i||(s&&(0,o().T8)(s)?(0,o().ez)({icon:s,mode:t.mode,useLightGrayColor:r}):r?t.lightDividerColor:t.regularDividerColor),width:n,height:n,borderRadius:a?6:"0.25em"}}},625634:(e,t,i)=>{i.d(t,{_:()=>n,z:()=>a});var o=()=>i(340498);const n={small:"md",default:"lg",large:"xl"},a={small:o().Ev.xs,default:o().Ev.sm,large:o().Ev.sm}},637573:(e,t,i)=>{i.d(t,{r:()=>s});var o=()=>i(484714),n=()=>i(56366),a=()=>i(640653),r=()=>i(765957);function s(){const e=(0,o().v3)();return(0,n().K8)((()=>{const{currentSpaceStore:t}=r().default.state;if(t)return(0,a().fD)({environment:e,spaceId:t.id})}),[e])}},643747:(e,t,i)=>{i.r(t),i.d(t,{default:()=>B});var o=i(296540),n=()=>i(484714),a=()=>i(56366),r=()=>i(401497),s=()=>i(959013),l=()=>i(443616),c=()=>i(344394),d=()=>i(843005),u=()=>i(413677),m=()=>i(722872),g=()=>i(986260),p=()=>i(691298),b=()=>i(212921),v=()=>i(377586),y=()=>i(757695);class f extends y().Store{getInitialState(){return{}}}const h=f;class S extends y().Store{getInitialState(){return{isOpen:!1,isInsertOpen:!1,isTurnIntoOpen:!1,isColorOpen:!1,isTemplatesOpen:!1}}}const A=S;var k=()=>i(75368),x=()=>i(502438),T=()=>i(452558),M=()=>i(928600),w=()=>i(480095),C=()=>i(897119),I=()=>i(381495),P=()=>i(194820),_=i(474848);const B=function(e){let{currentBlockStore:t,makeActionBarComponent:r,isNativeMobileActionBar:s}=e;const l=(0,n().v3)(),c=(0,i(792485).S)(),d=(0,a().uB)(void 0,i(970585).A),u=(0,a().uB)(void 0,h),m=(0,a().uB)(void 0,A),b=(0,a().K8)((()=>g().rV(l,t,null==c?void 0:c.publicEditModeStore.state)),[l,t,c]),{shouldShow:v}=b,{device:y,WindowSizeStore:f}=l,S=(0,a().K8)((()=>function(e,t,i){const{device:o}=e;return o.isMobileBrowser?t.state.isOpen:i}(l,m,v)),[l,m,v]),k=(0,a().K8)((()=>f.state.paddingBottomCSS),[f]),x=(0,i(140862).A)(!0),T=l.NativeMobileActionBarStore,M=(0,a().K8)((()=>g().jk(l)),[l]),w=(0,a().K8)((()=>"editing"!==i(24157).default.state.mode&&Boolean(null==T?void 0:T.state.shouldRestoreSelectionForMenu)),[T]);return(0,p().A)({shouldPreserveTextSelection:M,shouldPreserveBlockSelection:!1,shouldRestoreSelection:w}),(0,_.jsxs)(o.Fragment,{children:[(0,_.jsxs)("div",{...x,style:{position:"relative",width:"100%",height:0,zIndex:99},children:[r({store:m,ignoreSelectionAreaStore:u,templatePickerMenuListStore:d}),!s&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(U,{store:m}),(0,_.jsx)(j,{store:m}),(0,_.jsx)(N,{store:m})]}),(0,_.jsx)(E,{})]}),!S&&y.isIPhoneX&&y.isNative&&(0,_.jsx)("div",{style:{position:"absolute",bottom:0,background:"transparent",height:k,width:"100%",pointerEvents:"none",WebkitUserSelect:"none"}})]})};function R(e){e.setState({...e.state,isInsertOpen:!1})}function U(e){let{store:t}=e;const i=(0,n().v3)(),r=(0,o.useCallback)((()=>R(t)),[t]),{device:l}=i,d=(0,a().K8)((()=>t.state.isInsertOpen),[t]),u=(0,o.useMemo)((()=>(0,c().s7)(i)),[i]),{insertActions:g}=(0,a().O$)(u);return(0,_.jsx)(C().Ay,{popupType:l.isMobile?v().n.SlideUp:v().n.Popup,preventBlockRenderQueueOnEnter:!0,open:d,keepFocus:!0,onDismiss:()=>{R(t)},render:()=>(0,_.jsx)(M().A,{menuType:m().gu.Modal,title:(0,_.jsx)(s().sA,{defaultMessage:"Insert block",id:"mobileActionBar.insertBlock.modalTitle"}),right:(0,_.jsx)(w().CancelMenuText,{}),onClickRight:()=>{R(t)},children:(0,_.jsx)(T().A,{sections:g,context:{environment:i,blocks:x().default.state.stores,publicEditMode:void 0,analyticsFrom:"mobile_action_bar_actions"},onAccept:r})})})}function j(e){let{store:t}=e;const i=(0,n().v3)(),r=(0,o.useCallback)((()=>function(e){e.setState({...e.state,isTurnIntoOpen:!1})}(t)),[t]),l=(0,a().K8)((()=>t.state.isTurnIntoOpen),[t]);(0,p().A)({shouldPreserveTextSelection:l,shouldPreserveBlockSelection:!1,shouldRestoreSelection:!0});const{device:c}=i;return(0,_.jsx)(C().Ay,{popupType:c.isMobile?v().n.SlideUp:v().n.Popup,open:l,keepFocus:!0,onDismiss:r,preventBlockRenderQueueOnEnter:!0,render:()=>(0,_.jsx)(M().A,{menuType:m().gu.Modal,title:(0,_.jsx)(s().sA,{defaultMessage:"Turn into",id:"mobileActionBar.turnInto.modalTitle"}),right:(0,_.jsx)(w().CancelMenuText,{}),onClickRight:r,children:(0,_.jsx)(T().A,{sections:[{...d().t3,title:""}],context:{environment:i,blocks:x().default.state.stores,publicEditMode:void 0,analyticsFrom:"mobile_action_bar_actions"},onAccept:r})})})}function N(e){let{store:t}=e;const i=(0,n().v3)(),r=(0,o.useCallback)((()=>function(e){e.setState({...e.state,isColorOpen:!1})}(t)),[t]),{device:c}=i,d=(0,a().K8)((()=>t.state.isColorOpen),[t]);return(0,p().A)({shouldPreserveTextSelection:d,shouldPreserveBlockSelection:!1,shouldRestoreSelection:!0}),(0,_.jsx)(C().Ay,{popupType:c.isMobile?v().n.SlideUp:v().n.Popup,open:d,keepFocus:!0,onDismiss:r,preventBlockRenderQueueOnEnter:!0,render:()=>(0,_.jsx)(M().A,{menuType:m().gu.Modal,title:(0,_.jsx)(s().sA,{defaultMessage:"Block color",id:"mobileActionBar.blockColor.modalTitle"}),right:(0,_.jsx)(w().CancelMenuText,{}),onClickRight:r,children:(0,_.jsx)(T().A,{sections:[l().kl,l().qW,l().J1],context:{environment:i,blocks:x().default.state.stores,publicEditMode:void 0,analyticsFrom:"mobile_action_bar_actions"},onAccept:r})})})}function E(){const e=(0,n().v3)(),t=(0,r().IS)((e=>({popupStyles:{background:e.contentBackground}})),[]),i=(0,o.useCallback)((()=>function(e,t){const i=k().A.state.isFromNativeHome;k().A.setState({open:!1}),t.shouldCancel&&i&&(0,P().handleCancelQuickAdd)(e,{isFromTopbar:!1})}(e,{shouldCancel:!0})),[e]),{isTemplatesOpen:l}=(0,a().K8)((()=>({isTemplatesOpen:k().A.state.open})),[]);(0,p().A)({shouldPreserveTextSelection:l,shouldPreserveBlockSelection:!1,shouldRestoreSelection:!0});const{device:c}=e;return(0,_.jsx)(C().Ay,{popupType:c.isMobile?v().n.SlideUp:v().n.Popup,open:l,onDismiss:i,keepFocus:!0,style:t.popupStyles,render:()=>(0,_.jsx)(M().A,{menuType:m().gu.Modal,whiteBackground:!0,disableHeaderShadow:l,hideMobileTopbar:l,title:(0,_.jsx)(s().sA,{defaultMessage:"Templates",id:"mobileActionBar.templates.modalTitle"}),right:(0,_.jsx)(I().CloseTemplatesPopupComponent,{handleClick:i,style:{marginRight:20}}),disableScroller:!0,onClickRight:i,shouldRenderRightDirectly:!0,onCancel:i,forceFullScreenSlideUp:!0,children:(0,_.jsx)(b().A,{onTemplateItemSelect:t=>{u().openWithItem({environment:e,item:t,createNewPage:!1,isPrivate:!1,disablePointerEvents:!0})},onClose:i})})})}},645109:(e,t,i)=>{i.d(t,{c:()=>m});var o=i(296540),n=()=>i(401497),a=()=>i(340498),r=()=>i(959013),s=()=>i(864943),l=()=>i(201361),c=()=>i(922442),d=()=>i(208603),u=i(474848);function m(e){let{openedFrom:t,styleOverrides:i}=e;const{animationState:m,animationTriggers:p}=(0,d().lP)(),b=(0,o.useMemo)((()=>{switch(t){case"business_trial_verify_pages_upsell":return"pageVerification";case"business_trial_private_teamspaces_upsell":return"privateTeamspaces";case"business_trial_ai_connectors_upsell":return"aiConnectors";case"upgrade_requests_page":return"free";default:return"blank"}}),[t]),v=(0,n().IS)((e=>({button:{display:"flex",alignItems:"center",flex:1},icon:{fill:e.icon.orangePrimary,width:a().Ev.sm,height:a().Ev.sm}})),[]);return(0,u.jsx)(s().A,{...p,size:"lg",iconLeading:e=>(0,d().sH)({icon:{type:"animated",iconFn:l().P},style:e,animationState:m}),iconStyle:v.icon,style:{...v.button,...i},onClick:()=>{(0,c().openSelfServeBusinessTrialStartModal)({openedFrom:t})},children:(0,u.jsx)(r().sA,{...g[b]})})}const g=(0,r().YK)({blank:{id:"selfServeBusinessTrial.tryButton.blank",defaultMessage:"Try"},privateTeamspaces:{id:"selfServeBusinessTrial.tryButton.privateTeamspaces",defaultMessage:"Try for free"},aiConnectors:{id:"selfServeBusinessTrial.tryButton.connectors",defaultMessage:"Try connectors"},pageVerification:{id:"selfServeBusinessTrial.tryButton.pageVerification",defaultMessage:"Try for free"},free:{id:"selfServeBusinessTrial.tryButton.free",defaultMessage:"Try for free"},thirtyDays:{id:"selfServeBusinessTrial.tryButton.30Days",defaultMessage:"Try for 30 days"}})},658985:(e,t,i)=>{i.d(t,{$:()=>n});i(296540);var o=i(474848);const n=(0,i(340498).wt)("membersFilled",{viewBox:"0 0 30 30",svg:(0,o.jsx)("path",{d:"M20.31 14.731c2.22 0 4.097-1.967 4.097-4.513 0-2.485-1.887-4.391-4.098-4.391-2.2 0-4.097 1.937-4.087 4.411 0 2.526 1.866 4.493 4.087 4.493zm-11.725.233c1.937 0 3.57-1.724 3.57-3.935 0-2.17-1.653-3.823-3.57-3.823-1.917 0-3.57 1.683-3.56 3.844 0 2.19 1.633 3.914 3.56 3.914zm-5.588 9.21h7.606c-1.085-1.552.082-4.615 2.374-6.42-1.116-.72-2.566-1.248-4.392-1.248-4.533 0-7.464 3.337-7.464 6.085 0 1.004.507 1.582 1.876 1.582zm10.994-.01h12.637c1.673 0 2.251-.508 2.251-1.44 0-2.607-3.316-6.198-8.57-6.198-5.263 0-8.57 3.59-8.57 6.197 0 .933.578 1.44 2.252 1.44z"})})},673903:(e,t,i)=>{i.d(t,{E:()=>o,G:()=>n});i(16280);function o(){const e=navigator.mediaDevices;if(e instanceof MediaDevices)return e;throw new Error("Media devices unavailable in current context.")}function n(e){const t=window.AudioContext||window.webkitAudioContext||!1;var i;if(Boolean(t))return new t({...(null===(i=navigator)||void 0===i||null===(i=i.mediaDevices)||void 0===i?void 0:i.getSupportedConstraints().sampleRate)&&{sampleRate:e}});throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}},680243:(e,t,i)=>{i.d(t,{l:()=>n});i(296540);var o=i(474848);const n=(0,i(340498).wt)("keyboard",{viewBox:"0 0 30 30",svg:(0,o.jsxs)("g",{children:[" ",(0,o.jsx)("path",{d:"M15,30l8-10H7Zm0-3.2L11.16,22h7.68Z"})," ",(0,o.jsx)("path",{d:"M6,4H4V6H6V4Zm4,0H8V6h2V4Zm4,0H12V6h2V4Zm4,0H16V6h2V4Zm4,0H20V6h2V4Zm4,0H24V6h2V4ZM10,8H8v2h2V8Zm4,0H12v2h2V8Zm4,0H16v2h2V8Zm4,0H20v2h2V8Zm-2,4H10v2H20V12Zm5,0H22v2h3V12ZM5,14H8V12H5v2ZM0,0V18H30V0H0ZM28,16H2V2H28V16Z"})," "]})})},738865:(e,t,i)=>{i.d(t,{U:()=>s,t:()=>l});var o=()=>i(401497),n=()=>i(784892),a=()=>i(284371),r=()=>i(685889);const s={[n().NY.ExtremeSmall]:{height:16,fontSize:12,margin:"0 4px 0 0",recordIconMarginRight:3,pageIconSize:13,closeIconSize:8},[n().NY.ExtraSmall]:{height:16,fontSize:12,margin:"0 4px 0 0",recordIconMarginRight:3,pageIconSize:13,closeIconSize:8},[n().NY.Small]:{height:18,fontSize:12,margin:"0 6px 6px 0",recordIconMarginRight:3,pageIconSize:16,closeIconSize:8},[n().NY.CompactEssential]:{height:20,fontSize:14,margin:"0 12px 6px 0",recordIconMarginRight:4,pageIconSize:20,closeIconSize:8},[n().NY.Medium]:{height:20,fontSize:14,margin:"0 12px 6px 0",recordIconMarginRight:4,pageIconSize:20,closeIconSize:8},[n().NY.Inline]:{height:20,fontSize:14,margin:"0 12px 0 0",recordIconMarginRight:4,pageIconSize:20,closeIconSize:8},[n().NY.Large]:{height:24,fontSize:16,margin:"0 8px 8px 0",recordIconMarginRight:4,pageIconSize:24,closeIconSize:10}};function l(e){let{format:t,shouldShrink:i,shouldWrap:l,isSingle:d,style:u,clickTitleBehavior:m}=e;const g="edit"===m;return(0,o().IS)((()=>{const{fontSize:e,margin:o}=s[t],m=g?r().d0:s[t].height;return{style:{...l?{display:"inline",lineHeight:1.5,borderRadius:4}:c({height:m}),fontSize:e,fontWeight:a().Wy.medium,minWidth:i?0:"auto",margin:d?0:o,...t===n().NY.Inline&&{overflow:"hidden"},...u}}}),[t,i,l,d,g,u])}function c(e){let{height:t}=e;return{display:"flex",alignItems:"center",lineHeight:1.2,height:t}}},871202:(e,t,i)=>{i.r(t),i.d(t,{hasAccessDefaultFn:()=>f,hasAccessToCode:()=>k,hasAccessToProperty:()=>A,hasReadPermissionsAccess:()=>h,hasSameSpaceAccess:()=>S,testOnly:()=>x});i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698),i(898992),i(354520);var o=()=>i(496603),n=()=>i(763824),a=()=>i(973647),r=()=>i(534177),s=()=>i(970013),l=()=>i(247331),c=()=>i(443881),d=()=>i(977345),u=()=>i(501053),m=()=>i(373907);function*g(e){const{collectionPointer:t,context:i,propertyId:o,propertySchema:n,visitedPointers:a,hasAccessFn:r}=e,s=(0,c().G7)({...t,propertyId:o});if(a.has(s))return!0;a.add(s);const l=r({propertySchema:n,spaceId:i.spaceId});return"boolean"==typeof l?l:yield*l}function*p(e){var t,i;const{collectionPointer:n,depth:u,collectionSchema:g,context:p,propertyId:b,propertySchema:v,visitedPointers:f,hasAccessFn:h}=e;if("v2"!==v.version||u>l().FORMULA_MAX_DEPTH)return!1;const S=(0,c().G7)({...n,propertyId:b});if(f.has(S))return!0;if(f.add(S),!(0,r().O9)(null===(t=v.formula2)||void 0===t?void 0:t.code))return!0;const A=(0,m().$t)(null===(i=v.formula2)||void 0===i?void 0:i.code);if(a().Q.isFail(A))return!0;const{spaceId:k}=p,x=(0,c().zm)({formulaTypecheckContextValues:[{kind:l().FormulaContextValueKind.ThisRow,type:{collection:n,type:"block"}}],node:A.value,spaceId:k}),T=(0,o().hS)(x,(e=>(0,c().G7)(e)));if(0===T.length)return!0;const{getRecordModel:M}=yield{collectionBlockProperties:[{blockPointers:[],collectionPointer:n,property:b,schema:g}],recordPointers:T.filter((e=>(0,d().T3)(e)))};for(const o of T)if((0,s().pq)(o)){const e=M(o);if(!(0,r().O9)(e))return!1;const t=o.propertyId,i=e.getSchema(),n=i[t];if(!n)continue;if((0,s().bT)(n)||(0,s().lb)(n)){if(!(yield*y({collectionPointer:o,collectionSchema:i,context:p,depth:u+1,propertyId:t,propertySchema:n,visitedPointers:f,hasAccessFn:h})))return!1}else if((0,s().nC)(n)){if(!(yield*y({collectionPointer:o,collectionSchema:i,context:p,depth:u,propertyId:t,propertySchema:n,visitedPointers:f,hasAccessFn:h})))return!1}}else if(!(0,r().O9)(M(o)))return!1;return!0}function*b(e){const{collectionPointer:t,depth:i,collectionSchema:o,context:n,propertyId:a,propertySchema:r,visitedPointers:d,hasAccessFn:m}=e;if("v2"===r.version||i>l().FORMULA_MAX_DEPTH)return!1;const g=(0,c().G7)({...t,propertyId:a});if(d.has(g))return!0;d.add(g);const p=(0,u().kh)(r.formula);if(0===p.length)return!0;for(const l of p){const e=o[l];if(e)if((0,s().bT)(e)||(0,s().lb)(e)){if(!(yield*y({collectionPointer:t,depth:i+1,collectionSchema:o,context:n,propertyId:l,propertySchema:e,visitedPointers:d,hasAccessFn:m})))return!1}else if((0,s().nC)(e)){if(!(yield*y({collectionPointer:t,collectionSchema:o,context:n,depth:i,propertyId:l,propertySchema:e,visitedPointers:d,hasAccessFn:m})))return!1}}return!0}function*v(e){const{collectionPointer:t,depth:i,collectionSchema:o,context:n,propertyId:a,propertySchema:r,visitedPointers:d,hasAccessFn:u}=e;if(i>l().FORMULA_MAX_DEPTH)return!1;const m=(0,c().G7)({...t,propertyId:a});if(d.has(m))return!0;if(d.add(m),!r.relation_property||!r.target_property)return!0;const g=o[r.relation_property];if(!g||"relation"!==g.type)return!0;const p=u({propertySchema:g,spaceId:n.spaceId});if(!("boolean"==typeof p?p:yield*p))return!1;const b=(0,s().Nv)(g);if(!b)return!0;const{getRecordModel:v}=yield{recordPointers:[b]},f=v(b),h=null==f?void 0:f.getNormalizedSchema();if(r.target_property_type&&h){const e=h[r.target_property];if(e&&r.target_property_type===e.type){if((0,s().lb)(e))return yield*y({collectionPointer:b,collectionSchema:h,context:n,depth:i+1,propertyId:r.target_property,propertySchema:e,visitedPointers:d,hasAccessFn:u});if((0,s().nC)(e))return yield*y({collectionPointer:b,collectionSchema:h,context:n,depth:i,propertyId:r.target_property,propertySchema:e,visitedPointers:d,hasAccessFn:u})}}return!0}function*y(e){const{collectionPointer:t,depth:i,collectionSchema:o,context:n,propertyId:a,propertySchema:r,visitedPointers:l,hasAccessFn:c}=e;return(0,s().nC)(r)?yield*g({collectionPointer:t,context:n,propertyId:a,propertySchema:r,visitedPointers:l,hasAccessFn:c}):(0,s().lb)(r)?"v2"===r.version?yield*p({collectionPointer:t,depth:i,collectionSchema:o,context:n,propertyId:a,propertySchema:r,visitedPointers:l,hasAccessFn:c}):yield*b({collectionPointer:t,depth:i,collectionSchema:o,context:n,propertyId:a,propertySchema:r,visitedPointers:l,hasAccessFn:c}):!(0,s().bT)(r)||(yield*v({collectionPointer:t,depth:i,collectionSchema:o,context:n,propertyId:a,propertySchema:r,visitedPointers:l,hasAccessFn:c}))}function*f(e){const{propertySchema:t,spaceId:i}=e,o=(0,s().Nv)(t);if(!(0,r().O9)(o))return!0;const{getRecordModel:n}=yield{recordPointers:[o]},a=n(o);return(0,r().O9)(a)&&S({spaceId:i,propertySchema:t})}function*h(e){const{propertySchema:t}=e,i=(0,s().Nv)(t);if(!(0,r().O9)(i))return!0;const{getRecordModel:o}=yield{recordPointers:[i]},n=o(i);return(0,r().O9)(n)}function S(e){const{propertySchema:t,spaceId:i}=e;return!(0,s().o2)(i,t)}async function A(e){const{collectionPointer:t,collectionSchema:i,context:o,propertyId:a,hasAccessFn:r}=e,s=i[a];return!s||await async function(e){const{context:t}=e;try{const i=y(e);let o=i.next();for(;!o.done;){const e=t.handleDataRequest(o.value);o=i.next((0,n().yL)(e)?await e:e)}return o.value}catch(i){return!0}}({collectionPointer:t,depth:0,collectionSchema:i,context:o,propertyId:a,propertySchema:s,visitedPointers:new Set,hasAccessFn:r})}function k(e){const{context:t}=e;try{const i=function*(e){const{collectionPointer:t,depth:i,context:n,code:u,visitedPointers:g,hasAccessFn:p}=e,b=(0,m().$t)(u);if(a().Q.isFail(b))return!0;const{spaceId:v}=n,f=n.valueTypes.filter((e=>e.kind!==l().FormulaContextValueKind.ThisRow)),h=(0,c().zm)({formulaTypecheckContextValues:t?[...f,{kind:l().FormulaContextValueKind.ThisRow,type:{collection:t,type:"block"}}]:[],node:b.value,spaceId:v}),S=(0,o().hS)(h,(e=>(0,c().G7)(e)));if(0===S.length)return!0;const{getRecordModel:A}=yield{collectionBlockProperties:[],recordPointers:S.filter((e=>(0,d().T3)(e)))};for(const o of S)if((0,s().pq)(o)){const e=A(o);if(!(0,r().O9)(e))return!1;const t=o.propertyId,a=e.getSchema(),l=a[t];if(!l)continue;if((0,s().bT)(l)||(0,s().lb)(l)){if(!(yield*y({collectionPointer:o,collectionSchema:a,context:n,depth:i+1,propertyId:t,propertySchema:l,visitedPointers:g,hasAccessFn:p})))return!1}else if((0,s().nC)(l)&&!(yield*y({collectionPointer:o,collectionSchema:a,context:n,depth:i,propertyId:t,propertySchema:l,visitedPointers:g,hasAccessFn:p})))return!1}else if(!(0,r().O9)(A(o)))return!1;return!0}(e);let n=i.next();for(;!n.done;){const e=t.handleDataRequest(n.value);n=i.next(e)}return n.value}catch(i){return!0}}const x={hasAccessDefaultFn:f,hasAccessToProperty:A,hasAccessToFormula1Property:b,hasAccessToFormula2Property:p,hasAccessToRelationProperty:g,hasAccessToRollupProperty:v}},876926:(e,t,i)=>{i.d(t,{m:()=>n});i(296540);var o=i(474848);const n=(0,i(340498).wt)("apple",{viewBox:"0 0 64 64",svg:(0,o.jsx)("path",{d:"m54,30c0,12-8.09,24-14,24-3.63,0-4.4-2-8-2s-4.37,2-8,2c-5.91,0-14-12-14-24s6.09-16,12-16c3.24,0,5.71,1.89,7.65,3.08.77-7.85,4.35-13.08,4.35-13.08l6,3s-3.51,3.71-5.29,9.85c1.89-1.18,4.25-2.85,7.29-2.85,5.91,0,12,4,12,16Z"})})},882827:(e,t,i)=>{i.d(t,{p:()=>r});i(296540);var o=()=>i(783982),n=()=>i(340498),a=i(474848);function r(e,t){const{viewBox:i,svg:r}=t,s=i??`0 0 ${n().Ev.default} ${n().Ev.default}`;return Object.assign((t=>{let{style:i,className:n,label:l,animationState:c}=t;const d=n?`${e} ${n}`:e;return(0,a.jsx)(o().A,{viewBox:s,className:d,style:i,label:l,children:r(c)})}),{__iconDefinition:{viewBox:s,svg:r("initial")}})}},889154:(e,t,i)=>{i.d(t,{G:()=>n});i(296540);var o=i(474848);const n=(0,i(340498).wt)("personBadgeExclamationMark",{viewBox:"0 0 24 22",svg:(0,o.jsx)("path",{d:"M14 20.91c1.36 0 2.64-.26 3.838-.781a10.166 10.166 0 003.183-2.158 10.198 10.198 0 002.159-3.174 9.59 9.59 0 00.78-3.848c0-1.36-.263-2.64-.79-3.838a10.165 10.165 0 00-2.158-3.183 10.165 10.165 0 00-3.184-2.158A9.52 9.52 0 0013.99.988c-1.27 0-2.47.228-3.603.684A10.24 10.24 0 007.34 3.566 10.179 10.179 0 005.152 6.39a9.75 9.75 0 00-1.045 3.466c.235-.045.508-.074.82-.087.32-.02.61-.013.87.02.137-1.01.44-1.948.908-2.813A8.088 8.088 0 018.512 4.7a8.261 8.261 0 012.5-1.504 8.095 8.095 0 012.978-.547c1.153 0 2.23.215 3.233.645a8.233 8.233 0 012.646 1.777 8.365 8.365 0 011.787 2.647 8.11 8.11 0 01.645 3.232 8.15 8.15 0 01-2.139 5.557c-.319-.378-.775-.736-1.367-1.074-.593-.345-1.296-.625-2.11-.84-.813-.215-1.712-.322-2.695-.322-.469 0-.918.029-1.347.087-.43.053-.837.124-1.221.215.117.469.176.96.176 1.475 0 .762-.134 1.488-.4 2.178a6.308 6.308 0 01-1.095 1.865c.6.26 1.228.462 1.885.605A9.426 9.426 0 0014 20.91zm-.01-8.3a3.02 3.02 0 001.69-.47 3.53 3.53 0 001.21-1.318c.3-.56.45-1.191.45-1.894 0-.658-.15-1.26-.45-1.807a3.55 3.55 0 00-1.21-1.309 3.035 3.035 0 00-1.69-.488c-.625 0-1.191.163-1.699.489a3.622 3.622 0 00-1.65 3.115c0 .696.15 1.321.449 1.875.3.553.7.993 1.201 1.318a3.194 3.194 0 001.7.488zM5.3 21.017c.67 0 1.305-.13 1.904-.391a5.082 5.082 0 001.582-1.074A5 5 0 009.87 17.97c.26-.6.39-1.237.39-1.914 0-.684-.13-1.325-.39-1.924a4.945 4.945 0 00-1.064-1.582 4.946 4.946 0 00-1.582-1.065 4.772 4.772 0 00-1.924-.39c-.677 0-1.315.13-1.914.39a4.87 4.87 0 00-1.582 1.074A5.082 5.082 0 00.73 14.142a4.707 4.707 0 00-.391 1.914c0 .683.13 1.325.39 1.924a5.07 5.07 0 001.075 1.581c.455.456.983.811 1.582 1.065.599.26 1.237.39 1.914.39zm-.01-1.797a.788.788 0 01-.576-.244.768.768 0 01-.244-.577c0-.227.081-.423.244-.585a.788.788 0 01.576-.245c.234 0 .43.085.586.254a.788.788 0 01.244.576.77.77 0 01-.244.577.8.8 0 01-.586.244zm.01-2.325a.601.601 0 01-.43-.156.613.613 0 01-.166-.41l-.078-2.793a.63.63 0 01.176-.488.673.673 0 01.498-.186.66.66 0 01.488.186.63.63 0 01.176.488l-.078 2.793a.592.592 0 01-.176.41.554.554 0 01-.41.157z"})})},893952:(e,t,i)=>{i.d(t,{A:()=>s});i(296540);var o=()=>i(484714),n=()=>i(401497),a=()=>i(381349),r=i(474848);const s=function(e){const{color:t}=e;return(0,r.jsx)(i(760217).A,{...e,icon:(0,r.jsx)(l,{color:t}),title:(0,i(27178).mN)(t)})};function l(e){let{color:t}=e;const i=(0,n().DP)(),s=(0,o().v3)(),l=(0,a().LD)(i,t);return(0,r.jsx)("div",{style:{width:s.device.isMobile?24:18,height:s.device.isMobile?24:18,background:l.menuBackgroundColor,color:l.textColor,boxShadow:i.innerBorderBoxShadow,borderRadius:4}})}},904671:(e,t,i)=>{i.d(t,{$:()=>u,B:()=>d});var o=()=>i(221844),n=()=>i(223116),a=()=>i(179034),r=()=>i(217429),s=()=>i(630116),l=()=>i(329304),c=()=>i(449506);async function d(e){const{environment:t,sudoModeStore:i,pageBlockId:o,currentSpaceStore:a}=e,s=i.state.privatePageStore&&i.state.privatePageStore.id===o;if(t.device.isMobile||s||i.state.loading||i.state.error)return;await r().default.waitUntilStatsigReady();const d=(null==a?void 0:a.isReady())&&(null==a?void 0:a.canAdmin()),m=await function(e,t){return(0,l().Se)(e,{name:"sudo_mode",spaceId:t,userId:e.currentUser.id})}(t,null==a?void 0:a.id);if(!(o&&d&&a&&m))return;i.setState({...i.state,privatePageStore:void 0,loading:!0});const g=a.id,p=await c().callApi({eventName:"getPrivatePageInfo",environment:t,data:{id:o}});if("failed"===p.type)return void i.setState({...i.state,loading:!1,error:p.error});const b=p.data,v=u({environment:t,blockId:o,privateRecordCacheName:n().Rb,ancestorData:b,spaceId:g});i.setState({...i.state,privatePageStore:v,loading:!1,error:void 0})}function u(e){const{environment:t,privateRecordCacheName:i,ancestorData:n,spaceId:r,blockId:l}=e,c=new(o().A)({name:i});for(const o of n)switch(o.table){case"block":case"collection":case"team":c.setRecord({pointer:{spaceId:r,table:o.table,id:o.value.id},userId:t.currentUser.id},{role:"editor",value:o.value})}const d=new(s().Bv)(t,{table:a().ev,id:l},{inMemoryRecordCache:c});return d.inMemoryRecordCache.addCacheFallback(t.defaultRecordCache.inMemoryRecordCache),d}},911706:(e,t,i)=>{i.d(t,{A:()=>s});i(296540);var o=()=>i(401497),n=()=>i(30626),a=()=>i(704152),r=i(474848);function s(e){let{onClick:t,className:i,isMobile:s,style:l,onFocus:c,onBlur:d,onMouseDown:u,onMouseEnter:m,onMouseLeave:g}=e;const{buttonStyle:p,iconStyle:b}=(0,o().IS)((e=>({buttonStyle:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,borderRadius:6,width:s?45:24,height:s?45:24,marginRight:s?-8:-6,...l},iconStyle:{width:s?18:14,height:s?18:14,fill:e.icon.secondary}})),[s,l]);return(0,r.jsx)(a().A,{onClick:t,style:p,className:i,onFocus:c,onBlur:d,onMouseDown:u,onMouseEnter:m,onMouseLeave:g,children:(0,n()._)(b)})}},927648:(e,t,i)=>{i.d(t,{Ay:()=>y,JS:()=>s,Kj:()=>p,a3:()=>r,nY:()=>u});i(16280);var o=()=>i(496603),n=()=>i(673903);const a="initial",r="allowed",s="denied",l="no_devices",c="insecure_context",d="unknown_error",u="NotAllowedError";function m(e){for(const t of e.getTracks())t.stop()}const g=(0,o().nF)((async function(){if(!window.isSecureContext)return c;try{const e=(0,n().E)();return m(await e.getUserMedia({video:!1,audio:!0})),r}catch(e){const{displayDictationPermissionSnackbar:t}=await Promise.all([i.e(45620),i.e(2681),i.e(70193),i.e(4902)]).then(i.bind(i,491396));if(e instanceof Error)switch(e.name){case u:return t(s),s;case"NotFoundError":case"OverconstrainedError":return t(l),l}return t(d),d}}),1e3);async function p(){if(!window.isSecureContext)return c;try{const e=(0,n().E)();return m(await e.getDisplayMedia({audio:!0,systemAudio:"include"})),r}catch(e){return d}}const b=(0,o().nF)(p,1e3);class v extends(()=>i(757695))().Store{async checkPermissions(e){const t=await g(),i=e?await b():a;return this.setState({...this.state,audio:t,screenRecording:i}),{audio:t,screenRecording:i}}getHasAttemptedScreenRecordingPermissions(){return this.state.hasAttemptedScreenRecordingPermissions}setHasAttemptedScreenRecordingPermissions(e){this.setState({...this.state,hasAttemptedScreenRecordingPermissions:e})}getInitialState(){const e=window.isSecureContext?a:c;return{audio:e,screenRecording:e,hasAttemptedScreenRecordingPermissions:void 0}}}const y=new v},958846:(e,t,i)=>{i.d(t,{A:()=>n});i(296540);var o=i(474848);const n=function(e){let{loading:t,onLoadMore:n,loadMoreOffsetThreshold:a,resultSize:r,fetchSize:s}=e;return(0,o.jsx)(i(228927).A,{onChange:e=>function(e,t,i,o,n,a){if(t)return;const r=o||200;if(e>r)return;const s=void 0===n||void 0===a||n>=a;s&&i()}(e,t,n,a,r,s)})}},992510:(e,t,i)=>{i.d(t,{A:()=>r});i(296540);var o=()=>i(959013),n=()=>i(250202),a=i(474848);const r=function(e){const t=(0,i(484714).v3)(),{device:r}=t;if(r.isMobile)return e.propertySchema?(0,a.jsx)(n().G,{propertySchema:e.propertySchema,onClick:e.onClick,focused:!1,format:n().e.Name,showExtensionArrow:!e.disabled}):(0,a.jsx)(i(760217).A,{focused:!1,title:(0,a.jsx)(o().sA,{defaultMessage:"Property",id:"database.mobileFilterAndSortMenu.property.buttonMenuItem.label"})});{const t=e.propertySchema&&(0,a.jsx)(i(398217).mA,{propertySchema:e.propertySchema,showIcon:!0,style:{lineHeight:1.4}}),n=(0,a.jsx)(o().sA,{defaultMessage:"Property",id:"database.filterAndSortMenu.propertyButton.label"});return(0,a.jsx)(i(272630).A,{title:t,placeholder:n,onClick:e.onClick,disabled:e.disabled,disableMargins:e.disableMargins,desktopStyle:e.textWrapperStyle})}}}}]);