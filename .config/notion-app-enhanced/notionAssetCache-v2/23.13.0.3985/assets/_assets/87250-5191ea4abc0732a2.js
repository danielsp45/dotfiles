"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[87250],{75491:(e,t,o)=>{o.d(t,{ED:()=>y,Kb:()=>f});o(296540);var i=()=>o(56366),n=()=>o(401497),r=()=>o(668725),s=()=>o(722872),a=()=>o(463830),l=()=>o(406699),d=()=>o(928600),c=()=>o(939740),u=()=>o(897119),h=()=>o(89924),g=()=>o(125565),m=()=>o(493823),p=()=>o(566468),x=o(474848);function y(e){let{title:t,items:o,disabled:r,hideDropdownIcon:g,itemMaxWidth:m,itemMinWidth:p,...y}=e;const f=(0,i().uB)(void 0,a().A),w=(0,n().IS)((()=>({container:{minWidth:180}})),[]),b={key:"workspace-users-menu",render:e=>(0,x.jsx)(h().A,{...e}),items:o};return(0,x.jsx)(l().Ay,{popupType:u().nl.Popup,style:w.container,buttonPopupStore:f,disabled:r,renderOrigin:e=>(0,x.jsx)(v,{title:t,hideDropdownIcon:g,disabled:r,styles:y.styles,...e}),render:()=>(0,x.jsx)(d().A,{menuType:s().gu.Popup,maxWidth:m??250,minWidth:p,children:(0,x.jsx)(c().Ay,{type:c().Oh.Vertical,initialFocus:0,sections:[b],onAccept:()=>{f.setState({open:!1})}})})})}function v(e){let{title:t,hideDropdownIcon:o,disabled:i,...s}=e;const a=(0,n().IS)((e=>({container:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",maxWidth:"100%",...s.styles},chevron:{width:10,height:10,marginLeft:4,color:e.icon.tertiary}})),[s.styles]);return(0,x.jsxs)(m().p,{style:a.container,disabled:i,...s,children:[(0,x.jsx)(g().A,{showTooltipWhenTruncated:!0,children:t}),o||i?null:(0,r().b)(a.chevron)]})}function f(){const e=(0,n().IS)((()=>({title:{width:"50%"}})),[]);return(0,x.jsx)(p().mf,{titleStyles:e.title})}},126158:(e,t,o)=>{o.d(t,{m:()=>n});o(296540);var i=o(474848);const n=(0,o(340498).wt)("arrowDownSmall",{viewBox:"0 0 12 12",svg:(0,i.jsx)("path",{d:"M5.99756 0.850098C5.53564 0.850098 5.21875 1.17236 5.21875 1.65576V7.61768L5.27246 8.7832L4.19287 7.53711L2.98438 6.33398C2.84473 6.18896 2.66211 6.09229 2.42578 6.09229C2.00684 6.09229 1.68994 6.40381 1.68994 6.84424C1.68994 7.04834 1.77051 7.23633 1.93164 7.40283L5.42285 10.8994C5.56787 11.0498 5.78809 11.1357 5.99756 11.1357C6.2124 11.1357 6.42725 11.0498 6.57227 10.8994L10.0688 7.40283C10.23 7.23633 10.3105 7.04834 10.3105 6.84424C10.3105 6.40381 9.99365 6.09229 9.57471 6.09229C9.34375 6.09229 9.16113 6.18896 9.01611 6.33398L7.80762 7.53711L6.72803 8.7832L6.77637 7.61768V1.65576C6.77637 1.17236 6.46484 0.850098 5.99756 0.850098Z"})})},309049:(e,t,o)=>{o.d(t,{A:()=>n});class i extends(()=>o(757695))().Store{getInitialState(){return{count:0}}}const n=new i},525884:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,infoCircleIcon:()=>r});o(296540);var i=o(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M8.65 8.25a.625.625 0 1 0 0 1.25h.725v3.25H8.65a.625.625 0 1 0 0 1.25h2.7a.625.625 0 1 0 0-1.25h-.725V8.875A.625.625 0 0 0 10 8.25zM10.7 6.3a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,i.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},r=(0,o(340498).wt)("infoCircle",n)},592674:(e,t,o)=>{o.d(t,{A:()=>n});const i=new(o(848776).U)((e=>{let{spaceId:t}=e;return t}),(async function(e,t){var i;let{spaceId:n}=t;const r=await Promise.resolve().then(o.bind(o,449506)),s=await r.callApi({eventName:"getInternalDomains",environment:e,data:{spaceId:n}});return"success"===s.type?null===(i=s.data)||void 0===i?void 0:i.internalDomainsWithInfo:void 0}));o(604341).exposeDebugValue("InternalDomainsStore",i);const n=i},625383:(e,t,o)=>{o.d(t,{d:()=>l,h:()=>d});o(296540);var i=()=>o(401497),n=()=>o(907514),r=()=>o(859428),s=()=>o(566468),a=o(474848);function l(e){let{dateTs:t,useSecondaryColorTitle:o,includeTime:i,tooltip:l,omitTooltip:d}=e;const c=(0,a.jsx)(s().s7,{useThinTitle:!0,useSecondaryColorTitle:o,title:i?(0,n().x$)(t,!0):(0,n().DG)(t)});return d?c:(0,a.jsx)(r().A,{render:e=>(0,a.jsx)("div",{...e,children:c}),renderTooltip:()=>l??(0,n().x$)(t)})}function d(){const e=(0,i().IS)((()=>({title:{width:"50%"}})),[]);return(0,a.jsx)(s().mf,{titleStyles:e.title})}},641300:(e,t,o)=>{o.d(t,{Gr:()=>I,WE:()=>k,rC:()=>R});o(898992),o(581454),o(908872);var i=o(296540),n=()=>o(402014),r=()=>o(401497),s=()=>o(158359),a=()=>o(126158),l=()=>o(380048),d=()=>o(742117),c=()=>o(525884),u=()=>o(959013),h=()=>o(534177),g=()=>o(284371),m=()=>o(553965),p=()=>o(115512),x=()=>o(962730),y=()=>o(704152),v=()=>o(493823),f=()=>o(958846),w=()=>o(554509),b=()=>o(73332),_=()=>o(859428),C=o(474848);const S=14,j=16,I=S+j,P=24;function R(e){let{columnRenderInfo:t,theme:o,containerMarginTop:i}=e;return{container:{marginTop:i??17,tableLayout:"fixed",borderCollapse:"collapse",width:"100%",minWidth:t.reduce(((e,t)=>e+q(t.widthData)+P),0)},tableHeaderRow:{},paddingRowCell:{height:8}}}function k(e){let{columnRenderInfo:t,sortState:o,onSortStateChanged:n,showRowBorders:s,hideHeaderRow:a,hideHeaderRowPadding:l,renderRowChild:d,rows:c,onRowClick:u,renderNoRowsComponent:h,styles:g,getStyleForRow:m,extendToFullScreen:p,multiselect:x,allowHorizontalScroll:y,setStickyHeaderColumn:v,maxHeight:w,setStickyHeaderRow:b,loadMoreMethod:_}=e;const S=y?v??!0:void 0,j=(0,r().IS)((e=>({horizontalScrollContainer:{position:"relative",width:null!=p&&p.extendTableToFullWidthOffsetPx?`calc(100% + ${null==p?void 0:p.extendTableToFullWidthOffsetPx}px)`:"100%",display:"grid",overflow:"auto"},scrollableContainer:{maxHeight:w,position:"relative",display:"grid",overflowX:"auto",width:"100%"},table:S?{...g.container,minWidth:"100%",width:void 0}:g.container})),[g.container,S,w,null==p?void 0:p.extendTableToFullWidthOffsetPx]),I=(0,r().IS)((e=>({thead:{position:"sticky",zIndex:1}})),[]),P=(0,i.useCallback)((e=>{var t;const i=e.id===(null==o||null===(t=o.column)||void 0===t?void 0:t.id)&&!(null!=o&&o.sortAscending);n&&n({sortAscending:i,column:e})}),[o,n]),R=(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("table",{style:j.table,children:[!a&&(0,C.jsx)("thead",{style:b?I.thead:void 0,children:(0,C.jsxs)("tr",{children:[t.map(((e,t)=>(0,C.jsx)(A,{index:t,column:e,sortState:o,handleSortableColumnClick:P,shouldShowSortIcon:0!==c.length,multiselect:x,setStickyHeaderColumn:S,setStickyHeaderRow:b,style:e.headerStyle},`header_${e.id}`))),null!=p&&p.rightPaddingPx?(0,C.jsx)(U,{width:null==p?void 0:p.rightPaddingPx,style:t[t.length-1].rowStyle}):null]})}),!l&&(0,C.jsx)("tbody",{children:(0,C.jsxs)("tr",{children:[t.map((e=>(0,C.jsx)("td",{style:g.paddingRowCell},`padding_row_${e.id}`))),null!=p&&p.rightPaddingPx?(0,C.jsx)("td",{style:g.paddingRowCell}):null]})}),(0,C.jsx)("tbody",{children:c.map((e=>(0,C.jsx)(T,{columns:t,onRowClick:u,rowChild:null==d?void 0:d(e),showRowBorders:s,row:e,getStyleForRow:m,multiselect:x,setStickyHeaderColumn:S,rightPaddingPx:null==p?void 0:p.rightPaddingPx},`${e.id}_row`)))}),c.length>0&&_&&(!y||"scroll"!==(null==_?void 0:_.type))?(0,C.jsx)("tfoot",{children:(0,C.jsx)(H,{columnLength:t.length,loadMoreMethod:_,showRowBorders:s,rightPaddingPx:null==p?void 0:p.rightPaddingPx,style:t[t.length-1].rowStyle})}):null]}),0===c.length&&h()]});return y?(0,C.jsxs)("div",{style:j.horizontalScrollContainer,children:[(0,C.jsxs)("div",{style:j.scrollableContainer,children:[R,w&&"scroll"===(null==_?void 0:_.type)&&(0,C.jsx)(f().A,{loading:!1,loadMoreOffsetThreshold:100,onLoadMore:_.onLoadMore})]}),!w&&"scroll"===(null==_?void 0:_.type)&&(0,C.jsx)(f().A,{loading:!1,loadMoreOffsetThreshold:100,onLoadMore:_.onLoadMore})]}):(0,C.jsx)("div",{style:{maxHeight:w,overflowY:b&&w?"auto":void 0,overflowX:b&&w?"hidden":void 0},children:R})}function A(e){let{column:t,index:o,sortState:n,handleSortableColumnClick:s,shouldShowSortIcon:l,multiselect:d,setStickyHeaderColumn:h,setStickyHeaderRow:p,style:y}=e;const[f,w]=(0,i.useState)(!1),I=0===o,P=t.id===(null==n?void 0:n.column.id),R=(0,r().IS)((e=>({th:{boxShadow:`\n\t\t\t\t\tinset 0 1px 0 ${e.tableDividerColor},\n\t\t\t\t\tinset 0 -1px 0 ${e.tableDividerColor}\n\t\t\t\t`,...p&&{position:"sticky",top:0,zIndex:3,background:e.modalBackground},...B(t),...h&&I&&{position:"sticky",zIndex:4,left:0,background:e.modalBackground,boxShadow:`\n\t\t\t\t\t\t\tinset -1px 0px 0px ${e.tableDividerColor},\n\t\t\t\t\t\t\tinset 0 1px 0 ${e.tableDividerColor},\n\t\t\t\t\t\t\tinset 0 -1px 0 ${e.tableDividerColor}\n\t\t\t\t\t\t`},height:32,...y},innerDiv:{display:"flex",alignItems:"center",height:"100%",minWidth:q(t.widthData),maxWidth:t.widthData.maxWidth},text:{fontSize:g().J.UISmall.desktop,fontWeight:g().Wy.regular,color:e.text.secondary,...g().RC},sortButton:{padding:5,margin:-5},sortIcon:{color:e.text.secondary,width:12,height:12,marginLeft:4,fill:"currentColor"},multiselectCheckbox:{color:e.selectLightGray[300],marginRight:j,opacity:null!=d&&d.header.isDisabled?.5:1},tooltipContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},tooltipIcon:{marginLeft:4,color:f?e.icon.secondary:e.icon.tertiary,height:16,width:16},tooltip:{width:380}})),[t,d,h,p,y,I,f]),k=()=>{if(n&&l&&P)return(0,a().m)({...R.sortIcon,...n.sortAscending&&{transform:"rotate(180deg)"}})},A={onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1)},T=t.headerInfoTooltip?(0,C.jsxs)("div",{style:R.tooltipContainer,children:[(0,C.jsx)("div",{style:R.text,children:t.headerTitle}),(0,C.jsx)(_().A,{textWrap:!0,style:R.tooltip,delayThreshold:0,render:e=>(0,C.jsx)("div",{...(0,m().A)(e,A),children:(0,c().infoCircleIcon)(R.tooltipIcon)}),renderTooltip:()=>t.headerInfoTooltip})]}):(0,C.jsx)("div",{style:R.text,children:t.headerTitle}),M=t.sortable?(0,C.jsx)(_().A,{placement:x().W.Bottom,disableTooltip:!t.shouldShowSortTooltip,renderTooltip:()=>P?(0,C.jsx)(u().sA,{id:"baseTable.hoverSortedHeaderCell",defaultMessage:"Reverse sort order"}):(0,C.jsx)(u().sA,{id:"baseTable.hoverSortableHeaderCell",defaultMessage:"Sort by this column"}),render:e=>(0,C.jsxs)(v().p,{size:"xs",style:R.sortButton,onClick:()=>s(t),...e,children:[T,k()]})}):T,L=void 0!==d&&0===o?(0,C.jsx)(b().T,{style:R.multiselectCheckbox,disabled:d.header.isDisabled,onClick:()=>d.header.onClick(),checked:d.header.isSelected,size:S,tapArea:{size:30}}):null;return(0,C.jsx)("th",{style:R.th,children:(0,C.jsxs)("div",{style:R.innerDiv,children:[L,M]})})}function T(e){let{row:t,columns:o,onRowClick:n,rowChild:s,showRowBorders:a,getStyleForRow:l,setStickyHeaderColumn:d,multiselect:c,rightPaddingPx:u}=e;const[h,g]=(0,i.useState)(!1),m=t.isClickable,p=(0,i.useCallback)((()=>g(!0)),[]),x=(0,i.useCallback)((()=>g(!1)),[]),y=(0,i.useCallback)((e=>{m&&void 0!==n&&L(e,(()=>n(t)))}),[m,n,t]),v=(0,r().IS)((e=>({row:{height:1,...m&&{cursor:"pointer"},...a&&{borderBottom:`1px solid ${e.tableDividerColor}`},...l&&l(t)}})),[m,a,l,t]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("tr",{onMouseLeave:x,onMouseEnter:p,style:v.row,onClick:y,children:[o.map(((e,i)=>(0,C.jsx)(M,{isRowHovered:h,isRowClickable:m,columnIndex:i,numColumns:o.length,data:t,column:e,multiselect:c,setStickyHeaderColumn:d,cellStyle:e.rowStyle},`cell_${t.id}_${e.id}`))),u?(0,C.jsx)(z,{style:o[o.length-1].rowStyle}):null]}),s&&(0,C.jsx)("tr",{style:v.row,children:(0,C.jsx)("td",{colSpan:o.length,children:s})})]})}function M(e){let{data:t,column:o,columnIndex:i,numColumns:n,isRowHovered:s,isRowClickable:a,multiselect:l,setStickyHeaderColumn:d,cellStyle:c}=e;const u=0===i,h=i===n-1,m=(0,r().IS)((e=>({td:{...B(o),height:"inherit",...u&&{borderRadius:(0,p().Nb)({topLeft:4,bottomLeft:4})},...h&&{borderRadius:(0,p().Nb)({topRight:4,bottomRight:4})},...d&&u&&{position:"sticky",zIndex:2,left:0,background:e.modalBackground,boxShadow:`inset -1px 0px 0px ${e.tableDividerColor}`},...c,...s&&a&&{background:"light"===e.mode?"#f8f8f7":e.palette.gray[30]}},innerDiv:{minWidth:q(o.widthData),maxWidth:o.widthData.maxWidth,fontSize:g().J.UIRegular.desktop,color:e.text.primary,minHeight:42,maxHeight:52,display:"flex",alignItems:"center",height:"100%"},multiselectCheckbox:{color:e.selectLightGray[300],marginRight:16,opacity:null!=l&&l.row.getDisabledState(t)?.5:1}})),[o,u,h,s,a,l,t,d,c]),x=Boolean(o.hasClickableContents)||!!o.computeClickableContents&&o.computeClickableContents(t),y=l&&u?(0,C.jsx)(b().T,{style:m.multiselectCheckbox,checked:l.row.getSelectedState(t),onClick:e=>{e.stopPropagation(),l.row.onClick(t)},disabled:l.row.getDisabledState(t),size:14,tapArea:{size:30}}):null;return(0,C.jsx)("td",{style:m.td,children:(0,C.jsxs)("div",{style:m.innerDiv,onClick:x?L:void 0,children:[y,o.renderCell({...t,isRowHovered:s})]})})}function L(e,t){(0,n().SQ)({event:e,context:n().y$.Click,callback:t})}const D={paddingLeft:P/2,paddingRight:P/2};function q(e){return"minWidth"in e?e.minWidth:e.width}function B(e){let t;return t="width"in e.widthData?{width:e.widthData.width}:{width:`${e.widthData.widthPercent}%`,minWidth:e.widthData.minWidth},{...D,...t}}function W(e){let{columnLength:t,onLoadMore:o,showRowBorders:i,hasNextPage:n}=e;const a=(0,r().IS)((e=>({row:{...i&&{borderBottom:`1px solid ${e.tableDividerColor}`}},container:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:4},sticky:{position:"sticky",left:0,display:"flex",justifyContent:"flex-start",alignItems:"center",gap:4},button:{display:"flex",alignItems:"center",height:30,borderRadius:i?0:6,whiteSpace:"break-spaces",fontSize:14,paddingRight:8},icon:{width:14,height:14,marginLeft:4,marginRight:6,fill:e.icon.tertiary},text:{color:e.text.tertiary}})),[i]);return!1===n?null:(0,C.jsx)("tr",{style:a.row,children:(0,C.jsx)("td",{colSpan:t,children:(0,C.jsx)("div",{style:a.container,children:(0,C.jsx)("div",{style:a.sticky,children:(0,C.jsxs)(y().A,{style:a.button,onClick:o,children:[(0,s().P)(a.icon),(0,C.jsx)("div",{style:a.text,children:(0,C.jsx)(u().sA,{id:"baseTable.loadMoreButton",defaultMessage:"Load more"})})]})})})})})}function $(e){let{columnLength:t,onLoadNext:o,onLoadPrevious:i,currentPage:n,finalPage:s,hasNextPage:a,hasPrevPage:c,showRowBorders:h,rightPaddingPx:g,style:m}=e;const p=(0,r().IS)((e=>({row:{...h&&{borderBottom:`1px solid ${e.tableDividerColor}`}},container:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:4},sticky:{position:"sticky",left:0,display:"flex",justifyContent:"flex-start",alignItems:"center",gap:4},button:{display:"flex",justifyContent:"center",alignItems:"center",height:30,width:30,borderRadius:h?0:6,whiteSpace:"break-spaces",fontSize:14},icon:{width:14,height:14,marginLeft:4,marginRight:6,fill:e.icon.secondary}})),[h]);return(0,C.jsxs)("tr",{style:p.row,children:[(0,C.jsx)("td",{colSpan:Boolean(g)?t:t-1,children:(0,C.jsx)("div",{style:p.container,children:(0,C.jsxs)("div",{style:p.sticky,children:[(0,C.jsx)(y().A,{ariaLabel:c?"Previous page":"No previous pages",style:p.button,onClick:i,disabled:!c,disabledFeedback:!c,children:(0,l().I)(p.icon)}),(0,C.jsx)(y().A,{ariaLabel:a?"Next page":"No more pages",style:p.button,onClick:o,disabled:!a,disabledFeedback:!a,children:(0,d().V)(p.icon)}),(0,C.jsx)(w().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:s?(0,C.jsx)(u().sA,{id:"baseTable.pages.currentPageWithFinalPageCount",defaultMessage:"Page {currentPage} of {finalPage}",values:{currentPage:n,finalPage:s}}):(0,C.jsx)(u().sA,{id:"baseTable.pages.currentPage",defaultMessage:"Page {currentPage}",values:{currentPage:n}})})]})})}),g?(0,C.jsx)(z,{style:m}):null]})}function H(e){let{columnLength:t,loadMoreMethod:o,showRowBorders:i,rightPaddingPx:n,style:r}=e;switch(o.type){case"scroll":return(0,C.jsx)(f().A,{loading:!1,loadMoreOffsetThreshold:100,onLoadMore:o.onLoadMore});case"button":return(0,C.jsx)(W,{columnLength:t,onLoadMore:o.onLoadMore,showRowBorders:i,hasNextPage:o.hasNextPage});case"pages":return(0,C.jsx)($,{columnLength:t,showRowBorders:i,onLoadNext:o.onLoadNext,onLoadPrevious:o.onLoadPrevious,currentPage:o.currentPage,finalPage:o.finalPage,hasNextPage:o.hasNextPage,hasPrevPage:o.hasPrevPage,rightPaddingPx:n,style:r});default:return(0,h().HB)(o)}}function U(e){const t=(0,r().IS)((t=>({container:{position:"relative"},extender:{width:e.width,height:1},inner:{background:t.modalBackground,position:"absolute",top:0,left:0,right:0,bottom:-1,...e.style}})),[e.width,e.style]);return(0,C.jsxs)("th",{style:t.container,children:[(0,C.jsx)("div",{style:t.extender}),(0,C.jsx)("div",{style:t.inner})]})}function z(e){const t=(0,r().IS)((t=>({container:{position:"relative"},inner:{background:t.modalBackground,position:"absolute",top:0,left:0,right:0,bottom:-1,...e.style}})),[e.style]);return(0,C.jsx)("td",{style:t.container,children:(0,C.jsx)("div",{style:t.inner})})}},746970:(e,t,o)=>{o.d(t,{KB:()=>w,Wy:()=>_,aV:()=>b,p4:()=>f,si:()=>C});o(18107),o(967357),o(898992),o(354520),o(581454);var i=()=>o(296344),n=()=>o(96689),r=()=>o(798880),s=()=>o(496603),a=()=>o(763824),l=()=>o(134696),d=()=>o(966505),c=()=>o(449506),u=()=>o(579627),h=()=>o(246826),g=()=>o(751156),m=()=>o(680074),p=()=>o(592674),x=()=>o(630116),y=()=>o(309049),v=()=>o(224701);async function f(e){const{environment:t,store:o,status:i,requests:n}=e,a=t.currentUser.id;d().qQ(t,{status:i,user_count:n.length,from:e.from,request_type:"member"});const l=await Promise.all(n.map((e=>S(t,{id:e.getForActorId(),table:r().oo})))).then((e=>(0,s().oE)(e)));if("approved"===i){const e=l.map((e=>({type:"existingUser",value:e.__IM_SORRY__getValue(),spaceRole:"read_and_write"})));if(!(await u().eP({environment:t,store:o,inviteTargets:e,inviteRole:"read_and_write",isOnboarding:!1,invite:{inviteOrigin:"membership_request"}})).success)return{failedUsers:l,resolvedUsers:[]}}return g().createAndCommit({userAction:"accessRequestActions.resolveMembershipRequests",environment:t,canUndo:!0,perform:s=>{n.map((n=>{const l=new(x().v3)(t,n.pointer);h().zv({store:l,transaction:s,data:{granted_time:Date.now(),granted_by_table:r().oo,granted_by_id:a,resolved_time:Date.now(),resolved_by_table:r().oo,resolved_by_id:a,status:i}}),d().vn(t,{status:i,request_id:n.id,from:e.from,for_actor_id:n.for_actor_id,space_role:o.getRole()})}))}}),{failedUsers:[],resolvedUsers:l}}async function w(e){const{environment:t,store:o,status:i,requests:n}=e,a=t.currentUser.id;d().qQ(t,{status:i,user_count:n.length,from:e.from,request_type:"member"});const c=await Promise.all(n.map((e=>S(t,{id:e.getForActorId(),table:r().oo})))).then((e=>(0,s().oE)(e)));if("approved"===i){const e=c.map((e=>({type:"existingUser",value:e.__IM_SORRY__getValue(),spaceRole:"read_and_write"})));if(!(await u().eP({environment:t,store:o,inviteTargets:e,inviteRole:"read_and_write",isOnboarding:!1,invite:{inviteOrigin:"membership_request"}})).success)return{failedUsers:c,resolvedUsers:[]};const i=o.id,n=await p().A.awaitData(t,{spaceId:i}),r=n?n.map((e=>e.domain.url)):[];l().hp(t,{invite_flow_id:void 0,invite_origin:"membership_request",user_ids:c.map((e=>e.id)),internal_domains:r})}return g().createAndCommit({userAction:"accessRequestActions.resolveMembershipRequests",environment:t,canUndo:!0,perform:e=>{n.map((o=>{const n=new(x().v3)(t,o.pointer);h().zv({store:n,transaction:e,data:{granted_time:Date.now(),granted_by_table:r().oo,granted_by_id:a,resolved_time:Date.now(),resolved_by_table:r().oo,resolved_by_id:a,status:i,type:"space_membership_request"}})}))}}),{failedUsers:[],resolvedUsers:c}}async function b(e){const{environment:t,status:o,requests:i,from:n}=e;d().qQ(t,{status:o,user_count:i.length,from:n,request_type:"guest"});const u=await Promise.all(i.map((async e=>{var i,s,a;const u=await S(t,{id:e.getForActorId(),table:r().oo});if(!u)return{type:"failed",user:void 0};if(!e.isGuestInviteRequest())return{type:"failed",user:u};const h=await c().callApi({eventName:"resolveAccessRequest",environment:t,data:{accessRequestId:e.id,status:o,spaceId:e.getParentId()}}),g=null===(i=e.getAttributes().permission_records_and_roles.at(0))||void 0===i?void 0:i.role,p=null===(s=e.getAttributes().permission_records_and_roles.at(0))||void 0===s?void 0:s.id,x=(null===(a=e.getAttributes().invite_message)||void 0===a?void 0:a.length)??0;return"success"===h.type&&"approved"===o&&l().Jg(t,{role:g,is_space:!1,invite_targets:[{type:"existingUser",value:{id:u.id,version:0,email:u.getEmail()},spaceRole:"none"}],is_onboarding:!1,invite_origin:"guest_invite_request",permission_items:[{type:"user_permission",role:g,user_id:u.id}],invite_message_length:x,domainType:(0,m().FX)()}),"success"===h.type&&d().AE(t,{status:o,request_id:e.id,for_actor_id:e.getForActorId(),created_by_id:e.getCreatedById(),requested_page_id:p,requested_role:g,from:n}),{type:h.type,user:u}})));await(0,a().lX)(i,10,(e=>v().nO({environment:t,spaceStore:{id:e.getParentId()}})));const h=u.filter((e=>"failed"===e.type)).map((e=>e.user)),g=u.filter((e=>"success"===e.type)).map((e=>e.user));return{failedUsers:(0,s().oE)(h),resolvedUsers:(0,s().oE)(g)}}async function _(e){if(y().A.reset(),!e.canAdmin)return;const{environment:t,spaceId:o}=e,i=await c().callApi({eventName:"getUnreadAccessRequestCount",environment:t,data:{parentTable:n().NX,parentId:o,size:1}});"success"===i.type&&y().A.setState({spaceId:o,count:i.data.count})}async function C(e,t,o){const n=function(e){return Object.values((0,s().$z)(e,(e=>function(e){if(e.isGuestInviteRequest()){const t=e.getAttributes().permission_records_and_roles[0];return`guest_invite_${e.getForActorId()}:${null==t?void 0:t.id}:${e.getCreatedById()}`}return e.isSpaceMembershipRequest()?`space_membership_${e.getForActorId()}:${e.getCreatedById()}}`:e.isTeamMembershipRequest()?void 0:void e.isPageAccessRequest()}(e)))).map((e=>{const t=(0,s().Ul)(e,(e=>e.getCreatedTime()));return t[t.length-1]}))}(await Promise.all(o.map((async t=>{const o=i().O,n=new(x().v3)(e,{table:o,id:t});return await n.load(),n.getModel()}))).then((e=>(0,s().oE)(e)))),a=await function(e,t){const o=Object.values((0,s().$z)(t,(e=>function(e){if(e.isGuestInviteRequest()){const t=e.getAttributes().permission_records_and_roles[0];return`guest_invite_${e.getForActorId()}:${null==t?void 0:t.id}:${null==t?void 0:t.role}`}return e.isSpaceMembershipRequest()?`space_membership_${e.getForActorId()}`:e.isTeamMembershipRequest()?void 0:void e.isPageAccessRequest()}(e))));return Promise.all(o.map((async t=>{const o=(0,s().Ul)(t,(e=>e.getCreatedTime())),i=o[0];return{createdByActorsWithReason:await Promise.all(o.map((async t=>{const o=await S(e,{id:t.created_by_id,table:r().oo});if(o)return{actor:o,reason:t.message}}))).then((e=>(0,s().oE)(e))),accessRequest:i}})))}(e,n);return Promise.all(a.map((async t=>{const o=await S(e,{id:t.accessRequest.getForActorId(),table:r().oo});if(o)return{forActor:o,...t}}))).then((e=>(0,s().oE)(e)))}async function S(e,t){const o=new(x().LU)(e,t);return await o.load(),o.getModel()}},958846:(e,t,o)=>{o.d(t,{A:()=>n});o(296540);var i=o(474848);const n=function(e){let{loading:t,onLoadMore:n,loadMoreOffsetThreshold:r,resultSize:s,fetchSize:a}=e;return(0,i.jsx)(o(228927).A,{onChange:e=>function(e,t,o,i,n,r){if(t)return;const s=i||200;if(e>s)return;const a=void 0===n||void 0===r||n>=r;a&&o()}(e,t,n,r,s,a)})}}}]);