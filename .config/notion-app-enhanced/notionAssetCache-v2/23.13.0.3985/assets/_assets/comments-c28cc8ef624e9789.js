"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[2411,5053,5834,9150,22542,28464,34208,37125,67608,78984,82122,84358],{346:(e,t,o)=>{o.d(t,{MG:()=>g,T1:()=>m,a1:()=>b,dt:()=>h,kg:()=>f,lC:()=>y,n_:()=>v});var n=o(296540),i=()=>o(484714),r=()=>o(56366),s=()=>o(187174),a=()=>o(645873),l=()=>o(941463),c=()=>o(441199),d=()=>o(749687),u=()=>o(737230),p=()=>o(756114);const m=new(a().O2)("PerformanceToolbar",(()=>Promise.all([o.e(16471),o.e(92845),o.e(84468),o.e(48632),o.e(75078),o.e(95168),o.e(36908),o.e(21194),o.e(23930),o.e(61347),o.e(45624)]).then(o.bind(o,462407)))),g=(0,a()._h)(m,(e=>e.PerformanceToolbar)),h=(0,a()._h)(m,(e=>e.PerformanceToolbarSettings));function f(){const e=(0,i().v3)();return(0,r().K8)((()=>(0,p().D)(e,e.RouterStore.state)),[e])}function v(){const e=(0,i().v3)(),t=S("PerformanceToolbarStore"),o=S("isPerformanceToolbarVisible");return(0,r().K8)((()=>!(!t||!o)&&o(e,e.RouterStore.state,t.state)),[o,e,t])}function y(){const e=S("PerformanceToolbarStore");return(0,r().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function b(){const e=(0,i().v3)(),t=S("createPerformanceToolbarMouseListeners"),o=S("PerformanceToolbarStore"),{sidebarExpanded:s,sidebarWidth:a,secondarySidebarExpanded:p,secondarySidebarWidth:m,updateSidebarExpanded:g,updateSidebarWidth:h}=(0,r().K8)((()=>({sidebarExpanded:d().sidebarExpandedStore.state,sidebarWidth:d().sidebarWidthStore.state,secondarySidebarExpanded:c().default.isOpen(),secondarySidebarWidth:l().Ay.getWidth(),updateSidebarExpanded:u().Ay.state.expanded,updateSidebarWidth:u().Ay.state.width})),[]);return(0,n.useEffect)((()=>{if(o&&t)return t(e,(e=>o.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),s,a,p,m,g,h)}),[t,e,o,s,a,p,m,g,h])}function S(e){const t=f(),[{value:o}]=(0,s().Yb)((()=>t?m.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return o}},8633:(e,t,o)=>{o.d(t,{b:()=>l,j:()=>c});o(898992),o(354520),o(672577),o(581454),o(296540);var n=()=>o(959013),i=()=>o(284371),r=()=>o(764880),s=o(474848);const a=(0,n().YK)({nobody:{id:"activitySection.displayNamePhrase.forNoAuthors",defaultMessage:"Nobody"},currentUser:{id:"activityHelpers.displayNamePhrase.currentUser",defaultMessage:"You"},twoAuthorsWithYou:{id:"activityHelpers.displayNamePhrase.twoAuthorsWithYou",defaultMessage:"{otherAuthor} and you"},twoAuthors:{id:"activityHelpers.displayNamePhrase.twoAuthors",defaultMessage:"{firstAuthor} and {secondAuthor}"},multipleAuthorsWithYouMinimal:{id:"activityHelpers.displayNamePhrase.multipleAuthorsWithYouMinimal",defaultMessage:"{firstAuthor}, {secondAuthor} and you"},multipleAuthorsWithYou:{id:"activityHelpers.displayNamePhrase.multipleAuthorsWithYou",defaultMessage:"{firstAuthor}, {secondAuthor}, you and {count, plural, one {# other} other {# others}}"},multipleAuthors:{id:"activityHelpers.displayNamePhrase.multipleAuthors",defaultMessage:"{firstAuthor}, {secondAuthor}, and {count, plural, one {# other} other {# others}}"}});function l(e,t,o,a){const l=t.find((e=>e.id===o)),c=t.map((t=>(0,r().lR)(e,t))),d={fontWeight:i().Wy.semibold,...a};if(1===t.length)return l?(0,s.jsx)("span",{children:(0,s.jsx)(n().sA,{defaultMessage:"You",id:"activitySection.authorPhrase.forOneAuthorCurrentUser.label",values:{b:e=>(0,s.jsx)("span",{style:d,children:e})}})}):(0,s.jsx)("span",{children:(0,s.jsx)(n().sA,{defaultMessage:"<b>{author}</b>",id:"activitySection.authorPhrase.forOneAuthor.label",values:{author:c[0],b:e=>(0,s.jsx)("span",{style:d,children:e})}})});if(2===t.length){if(l){const o=t.filter((e=>e!==l)).map((t=>(0,r().lR)(e,t)));return(0,s.jsx)("span",{children:(0,s.jsx)(n().sA,{defaultMessage:"<b>{firstAuthor}</b> and you",id:"activitySection.authorPhrase.forTwoAuthorsCurrentUser.label",values:{firstAuthor:o[0],b:e=>(0,s.jsx)("span",{style:d,children:e})}})})}return(0,s.jsx)("span",{children:(0,s.jsx)(n().sA,{defaultMessage:"<b>{firstAuthor}</b> and <b>{secondAuthor}</b>",id:"activitySection.authorPhrase.forTwoAuthors.label",values:{firstAuthor:c[0],secondAuthor:c[1],b:e=>(0,s.jsx)("span",{style:d,children:e})}})})}if(c.length>2){if(l){const o=t.filter((e=>e!==l)).map((t=>(0,r().lR)(e,t))),i=(0,s.jsx)(n().sA,{defaultMessage:"{numberOfOtherAuthors, plural, =0 {<b>{firstAuthor}</b>, <b>{secondAuthor}</b> and you} one {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, you and {numberOfOtherAuthors} other} other {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, you and {numberOfOtherAuthors} others}}",id:"activitySection.authorPhrase.forMoreThanTwoAuthorsCurrentUser.label",values:{numberOfOtherAuthors:o.length-2,firstAuthor:o[0],secondAuthor:o[1],b:e=>(0,s.jsx)("span",{style:d,children:e})}});return(0,s.jsx)("span",{children:i})}{const e=(0,s.jsx)(n().sA,{defaultMessage:"{numberOfOtherAuthors, plural, one {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, and {numberOfOtherAuthors} other} other {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, and {numberOfOtherAuthors} others}}",id:"activitySection.authorPhrase.forMoreThanTwoAuthors.label",values:{numberOfOtherAuthors:c.length-2,firstAuthor:c[0],secondAuthor:c[1],b:e=>(0,s.jsx)("span",{style:d,children:e})}});return(0,s.jsx)("span",{children:e})}}return(0,s.jsx)("span",{style:d,children:(0,s.jsx)(n().sA,{defaultMessage:"Nobody",id:"activitySection.authorPhrase.forNoAuthors.label"})})}function c(e,t,o){const r=e.length,l={fontWeight:i().Wy.semibold,...o};if(0===r)return(0,s.jsx)("span",{style:l,children:(0,s.jsx)(n().sA,{...a.nobody})});if(1===r)return t===e[0]?(0,s.jsx)("span",{children:(0,s.jsx)(n().sA,{...a.currentUser})}):(0,s.jsx)("span",{style:l,children:e[0]});if(2===r){if(t){const o=e.find((e=>e!==t));return(0,s.jsx)(n().sA,{...a.twoAuthorsWithYou,values:{otherAuthor:(0,s.jsx)("span",{style:l,children:o})}})}return(0,s.jsx)(n().sA,{...a.twoAuthors,values:{firstAuthor:(0,s.jsx)("span",{style:l,children:e[0]}),secondAuthor:(0,s.jsx)("span",{style:l,children:e[1]})}})}if(t){const o=e.filter((e=>e!==t)),i=o.length-2;return 0===i?(0,s.jsx)(n().sA,{...a.multipleAuthorsWithYouMinimal,values:{firstAuthor:(0,s.jsx)("span",{style:l,children:o[0]}),secondAuthor:(0,s.jsx)("span",{style:l,children:o[1]})}}):(0,s.jsx)(n().sA,{...a.multipleAuthorsWithYou,values:{firstAuthor:(0,s.jsx)("span",{style:l,children:o[0]}),secondAuthor:(0,s.jsx)("span",{style:l,children:o[1]}),count:i}})}{const t=r-2;return(0,s.jsx)(n().sA,{...a.multipleAuthors,values:{firstAuthor:(0,s.jsx)("span",{style:l,children:e[0]}),secondAuthor:(0,s.jsx)("span",{style:l,children:e[1]}),count:t}})}}},12296:(e,t,o)=>{o.d(t,{$5:()=>f,P:()=>m,Qo:()=>c,em:()=>h,hx:()=>d,jU:()=>u,jv:()=>p,uY:()=>l});var n=()=>o(244309),i=()=>o(848259),r=()=>o(479788),s=()=>o(212326),a=()=>o(606846);function l(e){const t=e.mightCloseTab??!0;g({target:"body",...e,mightCloseTab:t})}function c(e){const t=e.mightCloseTab??!0;g({target:"title",...e,mightCloseTab:t})}function d(e){g({target:"approve_request_access",...e,mightCloseTab:!1})}function u(e){g({target:"deny_request_access",...e,mightCloseTab:!1})}function p(e){g({target:"remove_reaction",...e,mightCloseTab:!1})}function m(e){g({target:"add_reaction",...e,mightCloseTab:!1})}function g(e){const{target:t,environment:o,activity:s,notification:l,source:c,tab:d,mightCloseTab:u}=e,p="notifications_tab"===c?a().Ay.state.sessionId:void 0,m="notifications_tab"===c?a().Ay.isFilteredToUnreadOnly():void 0;i().nR(o,{target:t,activity_id:s.id,notification_id:null==l?void 0:l.id,notification_page_id:null==l?void 0:l.navigable_block_id,sessionId:p,is_filtered:m,tab:d}),u&&i().s$({environment:o,target:t}),l&&n().v((0,r().Q)(o),{alreadyRead:l.read,notificationId:l.id,activityId:l.activity_id,from:t,sessionId:p})}function h(e){const{notification:t,activity:o,environment:n,tab:r}=e,s={environment:n,activity:o,notificationId:null==t?void 0:t.id,alreadyRead:Boolean(null==t?void 0:t.read),tab:r};return{onBacklinkClicked:e=>i().uK({...s,backlinkPageId:e}),onNotificationFrameClicked:()=>i().Hd(s),...f({notification:t,activity:o,environment:n,tab:r})}}function f(e){const{notification:t,activity:o,environment:n,tab:r}=e,a={environment:n,activity:o,notificationId:null==t?void 0:t.id,alreadyRead:Boolean(null==t?void 0:t.read),tab:r},l=()=>{const e={notification_type:null==t?void 0:t.type,notification_page_id:null==t?void 0:t.navigable_block_id,tab:s().dl()};return"commented"===(null==t?void 0:t.type)&&(e.discussion_id=null==o?void 0:o.discussion_id),e};return{onArchiveClicked:()=>i().R0({...a,otherArgs:l()}),onUnarchiveClicked:()=>i().sL({...a,otherArgs:l()}),onMarkAsReadClicked:()=>i().oy({...a,otherArgs:l()}),onMarkAsUnreadClicked:()=>i().bl({...a,otherArgs:l()}),onNotificationBodyClicked:()=>i().e0({...a,otherArgs:l()})}}},29037:(e,t,o)=>{o.r(t),o.d(t,{checkmarkIcon:()=>i,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.92 3.91 12.17 12.18",svg:(0,o(474848).jsx)("path",{d:"M15.784 4.002a.625.625 0 0 1 .214.857L9.445 15.784a.625.625 0 0 1-1.01.085l-4.37-5.098a.625.625 0 0 1 .948-.814l3.806 4.44 6.109-10.181a.625.625 0 0 1 .857-.214"})},i=(0,o(340498).wt)("checkmark",n)},57145:(e,t,o)=>{var n=o(746518),i=o(179504),r=o(479306),s=o(225397),a=o(435370),l=o(344124),c=o(206469),d=Array,u=i(l("Array","sort"));n({target:"Array",proto:!0},{toSorted:function(e){void 0!==e&&r(e);var t=s(this),o=a(d,t);return u(o,e)}}),c("toSorted")},59400:(e,t,o)=>{o.d(t,{nR:()=>d,m$:()=>a,m4:()=>l,Dy:()=>c,FZ:()=>p});o(296540);var n=()=>o(645873),i=o(474848);function r(e){const{shouldShowSpinner:t,collectionSettingsProps:n}=e;return(0,i.jsx)(o(735695).Ay,{collectionSettingsStore:n.collectionSettingsStore,fullHeight:n.fullHeight,hideDesktopHeader:n.hideDesktopHeader,children:t&&(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",overflow:"hidden",paddingBottom:20},children:(0,i.jsx)(o(331542).A,{})})})}const s=new(n().O2)("collectionSettings",(()=>Promise.all([o.e(75134),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(75078),o.e(25497),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(30291),o.e(19930),o.e(58102),o.e(26483),o.e(6463),o.e(40925),o.e(282),o.e(61349),o.e(62573),o.e(1440),o.e(63996),o.e(66559),o.e(35986),o.e(92924),o.e(64819),o.e(97339),o.e(55717),o.e(63797),o.e(21367),o.e(22686),o.e(99108)]).then(o.bind(o,409198)))),a=(0,n()._h)(s,(e=>e.CollectionSettings),{renderLoading:(e,t)=>(0,i.jsx)(r,{shouldShowSpinner:e,collectionSettingsProps:t})}),l=(0,n()._h)(s,(e=>e.CollectionSettingsButtonOptions)),c=(0,n()._h)(s,(e=>e.CollectionSettingsPropertyTypeMenuItem)),d=(0,n()._h)(s,(e=>e.CollectionEditButtonAutomationOption)),u=new(n().O2)("TableHeaderPropertyCreationMenu",(()=>Promise.all([o.e(75134),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(75078),o.e(25497),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(61349),o.e(35986),o.e(43935)]).then(o.bind(o,908800)))),p=(0,n()._h)(u,(e=>e.TableHeaderPropertyCreationMenu))},63467:(e,t,o)=>{o.d(t,{y:()=>d});var n=()=>o(637997),i=()=>o(267419);const r={ko:()=>o.e(2268).then(o.bind(o,224434)),es:()=>o.e(95264).then(o.bind(o,196425)),de:()=>o.e(35390).then(o.bind(o,653703)),fr:()=>o.e(3272).then(o.bind(o,94677)),pt:()=>o.e(27315).then(o.bind(o,766869)),zh:()=>o.e(69945).then(o.bind(o,516814)),ja:()=>o.e(77757).then(o.bind(o,824432)),da:()=>o.e(9423).then(o.bind(o,440761)),fi:()=>o.e(59337).then(o.bind(o,462135)),nb:()=>o.e(2040).then(o.bind(o,937314)),nl:()=>o.e(51106).then(o.bind(o,530897)),sv:()=>o.e(53631).then(o.bind(o,895222)),id:()=>o.e(69945).then(o.bind(o,516814)),th:()=>o.e(69945).then(o.bind(o,516814)),vi:()=>o.e(69945).then(o.bind(o,516814))};let s=!1,a=!1;async function l(e){for(const[o,i]of Object.entries(e.emojiLocaleKeywords)){var t;n().fB[o]={...n().fB[o],keywords:[...i,...(null===(t=n().fB[o])||void 0===t?void 0:t.keywords)||[]]}}await i().A.waitUntilLoaded(),i().A.update((t=>{let{emojiByName:o,...n}=t;return{...n,emojiByName:{...o,...e.emojiByName}}}))}async function c(){if(s)return;const[e]=o(662303).locale.split("-");e in r&&(await l(await r[e]()),s=!0)}const d=(0,o(279900).A)((async()=>{await async function(){a||(await l(await o.e(51872).then(o.bind(o,443716))),a=!0)}(),await c()}))},69447:(e,t,o)=>{o.d(t,{Lq:()=>n,WK:()=>r,nh:()=>i});const n=40,i=48,r=60},73223:(e,t,o)=>{o.r(t),o.d(t,{dismissTutorial:()=>d,resetTutorials:()=>u,tutorialAdvanceToStep:()=>p,tutorialAdvanceToStepAfter:()=>m,tutorialGoToNextStep:()=>l,tutorialGoToPrevStep:()=>c});var n=()=>o(541235),i=()=>o(751156),r=()=>o(755199),s=()=>o(739135),a=()=>o(765957);function l(e,t){var o;const{currentUserSettingsStore:n}=a().default.state;if(!n)return;const i=null===(o=n.getSettings())||void 0===o?void 0:o.tutorials;g({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{r().mJ({userSettingsStore:n,transaction:e,data:{tutorials:{...i,[t]:(0,s().i9)(n,t)}}})},userId:n.id})}function c(e,t){var o;const{currentUserSettingsStore:n}=a().default.state;if(!n)return;const i=null===(o=n.getSettings())||void 0===o?void 0:o.tutorials;g({userAction:"TutorialActions.prevStep",environment:e,perform:e=>{r().mJ({userSettingsStore:n,transaction:e,data:{tutorials:{...i,[t]:(0,s().KD)(n,t)}}})},userId:n.id})}function d(e,t){var o;const{currentUserSettingsStore:i}=a().default.state;if(!i)return;const s=null===(o=i.getSettings())||void 0===o?void 0:o.tutorials;(null==s?void 0:s[t])!==n().YD&&g({userAction:"TutorialActions.dismissTutorial",environment:e,perform:e=>{r().mJ({userSettingsStore:i,transaction:e,data:{tutorials:{...s,[t]:n().YD}}})},userId:i.id})}function u(e){const{currentUserSettingsStore:t}=a().default.state;t&&g({userAction:"TutorialActions.resetTutorialsDebug",environment:e,perform:e=>{r().mJ({userSettingsStore:t,transaction:e,data:{tutorials:{}}})},userId:t.id})}function p(e,t,o){var i;const{currentUserSettingsStore:l}=a().default.state;if(!l||(0,s().x$)(l,t))return;const c=(0,s().gt)(l,t);n().c$[t].steps.findIndex((e=>e.id===c))>=n().c$[t].steps.findIndex((e=>e.id===o))||r().mJ({userSettingsStore:l,transaction:e,data:{tutorials:{...null===(i=l.getSettings())||void 0===i?void 0:i.tutorials,[t]:o}}})}function m(e,t,o){if((0,s().ll)(o))return;const n=(0,s().tb)(t,o);n&&p(e,t,n)}function g(e){return i().createAndCommit({...e,canUndo:!1})}},77126:(e,t,o)=>{o.d(t,{j:()=>i});class n extends(()=>o(959180))().A{}const i=new n},77179:(e,t,o)=>{o.d(t,{Ay:()=>W,H8:()=>_});var n=o(296540),i=()=>o(484714),r=()=>o(56366),s=()=>o(401497),a=()=>o(563884),l=()=>o(823279),c=()=>o(693954),d=()=>o(179034),u=()=>o(798880),p=()=>o(959013),m=()=>o(534177),g=()=>o(82926),h=()=>o(38337),f=()=>o(907514),v=()=>o(436525),y=()=>o(741737),b=()=>o(765957),S=()=>o(630116),x=()=>o(285790),C=()=>o(128295),A=()=>o(859428),k=()=>o(256863),w=()=>o(453697),M=()=>o(659799),I=()=>o(365136),j=()=>o(770176),T=o(474848);const P=16,B={paddingTop:12},D={fontSize:14,lineHeight:1.4,flexGrow:1,minWidth:0},L=o(757695).Store.createClass(!1,{name:"HoveredStore"});const R={marginTop:2,marginRight:8,flexShrink:0};function _(e){const{authors:t,size:o,style:n,iconStyle:a,showAvatarShadow:l,showWarningIcon:d}=e,p=(0,i().v3)(),g=(0,s().IS)((e=>({container:{position:"relative"},icon:{position:"absolute",right:5,bottom:-3,fill:e.icon.yellowPrimary,height:12,width:12}})),[]),h=t.sort(((e,t)=>(0,j().G7)({actor:e,environment:p})-(0,j().G7)({actor:t,environment:p})))[0],f=o,x={...R,...n},C={...g.icon,...a},A=(0,r().O$)(b().AppStoreCurrentSpaceStore),M=(0,r().K8)((()=>{if(!h||!A)return;return S().LU.createChildStore(A,{table:u().oo,id:h.id})}),[A,h]),I=(0,y().c)({spaceStore:A,viewedUserStore:M});return h?h.isBot()?(0,T.jsxs)("div",{style:g.container,children:[(0,T.jsx)(k().A,{botValue:h,style:x,size:f}),d&&(0,c().Q)(C)]}):h.isUser()?(0,T.jsxs)("div",{style:g.container,children:[I&&M?(0,T.jsx)(v().D,{userStore:M,children:(0,T.jsx)(w().A,{userValue:h,style:x,size:f,avatarShouldShowShadow:l??!0})}):(0,T.jsx)(w().A,{userValue:h,style:x,size:f,avatarShouldShowShadow:l??!0}),d&&(0,c().Q)(C)]}):h.isAgent()?null:void(0,m().HB)(h):null}const W=function(e){let{children:t,icon:o,timestamp:s,header:a,navigableBlockId:l,rootStore:c,onBacklinkClicked:d,showSnapshotButton:u,isPrivate:p,isLast:m}=e;const g=(0,i().v3)(),f=(0,r().uB)(void 0,L),v=(0,n.useCallback)((()=>function(e){e.setState(!1)}(f)),[f]),y=(0,n.useCallback)((()=>function(e){e.setState(!0)}(f)),[f]),b=(0,n.useId)(),S=(0,r().K8)((()=>g.WindowSizeStore.state.paddingLeftCSS),[g]),x=(0,r().K8)((()=>g.WindowSizeStore.state.paddingRightCSS),[g]),C=(0,T.jsxs)("div",{style:{...B,paddingBottom:t?12:8,paddingLeft:g.device.isMobile?S:0,paddingRight:g.device.isMobile?x:0},children:[(0,T.jsxs)("div",{style:{display:"flex",paddingLeft:P,paddingRight:P},children:[(0,T.jsxs)("div",{className:h().a9W,style:{display:"flex",alignItems:"flex-start",position:"relative"},children:[(0,T.jsx)("div",{style:{marginRight:4}}),o]}),(0,T.jsx)(X,{timestamp:s,header:a,children:t,navigableBlockId:l,rootStore:c,onBacklinkClicked:d,titleAriaId:b}),(0,T.jsx)(z,{showSnapshotButton:u,timestamp:s,navigableBlockId:l,rootStore:c}),(0,T.jsx)(E,{isPrivate:p})]}),t&&(0,T.jsx)(F,{children:t})]});return(0,T.jsxs)("article",{onMouseOver:y,onMouseLeave:v,"aria-labelledby":b,children:[C,(0,T.jsx)(U,{isLast:m})]})};function E(e){let{isPrivate:t}=e;return t?(0,T.jsx)(I().A,{style:{marginTop:1,marginBottom:4,marginLeft:8}}):null}function F(e){let{children:t}=e;return(0,T.jsx)("div",{className:h().CyB,children:t})}function V(e){return{borderBottom:`1px solid ${e.regularDividerColor}`}}function N(e){return{fontSize:12,color:e.text.tertiary}}function O(e){return{fontSize:12,color:e.text.tertiary,whiteSpace:"nowrap"}}function H(e){return{fontSize:12,color:e.text.tertiary,marginLeft:4,marginRight:4}}function U(e){let{isLast:t}=e;const o=(0,s().DP)();return t?null:(0,T.jsx)("div",{style:V(o)})}function z(e){let{showSnapshotButton:t,timestamp:o,navigableBlockId:n,rootStore:r}=e;const s=(0,i().v3)(),a=(0,p().tz)();if(!t)return null;if(o<new Date("2018-10-26").getTime())return null;const c=a.formatMessage({defaultMessage:"View version for this update",id:"activitySection.viewVersionForUpdate.tooltip"});return n?(0,T.jsx)(A().A,{renderTooltip:()=>c,render:e=>(0,T.jsx)(x().A,{ariaLabel:c,onClick:()=>function(e,t,o,n){if(n){const i=S().Bv.createChildStore(e,{table:d().ev,id:n});g().WE({environment:o,blockStore:i,openSnapshotNearTimestamp:t.toString(),from:"activity"})}}(r,o,s,n),icon:l().L,...e})}):null}function X(e){let{titleAriaId:t,timestamp:o,header:i,children:r,navigableBlockId:l,rootStore:c,onBacklinkClicked:u}=e;const p=(0,s().DP)(),m=(0,f().nl)(o),g=(0,f().x$)(o),v=(0,n.useMemo)((()=>l?S().Bv.createChildStore(c,{table:d().ev,id:l}):void 0),[l,c]);return(0,T.jsxs)("div",{style:D,children:[(0,T.jsx)("div",{id:t,className:h().k2l,children:i}),(0,T.jsxs)("div",{style:{display:"flex",marginTop:4,marginBottom:r?8:4},children:[(0,T.jsx)("div",{style:O(p),className:h().Cxn,children:(0,T.jsx)(M().A,{text:m,tooltipText:g,icon:a().k})}),c&&v&&(0,T.jsx)(C().Ay,{isLink:!0,innerStyle:N(p),store:v,left:(0,T.jsx)("div",{style:H(p),children:"·"}),onClick:u})]})]})}},77279:(e,t,o)=>{o.r(t),o.d(t,{default:()=>i});class n extends(()=>o(757695))().Store{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const i=new n},82926:(e,t,o)=>{o.d(t,{j8:()=>h,un:()=>m,p2:()=>p,WE:()=>u,n5:()=>f,Xn:()=>g});var n=()=>o(161479);const i=(0,o(583835).Dv)("restoreSnapshot");var r=()=>o(570323),s=()=>o(679924);var a=()=>o(136833);var l=()=>o(357625),c=()=>o(496414);const d=(0,o(959013).YK)({restoringPreviousVersion:{id:"historyModalActions.restoringPreviousVersion.loadingMessage",defaultMessage:"Restoring…"}});function u(e){const{environment:t,from:o,...n}=e;!function(e,t){(0,s().v)(e,"open_history",{from:t})}(t,o),r().A.setState({...n,open:!0,size:50})}function p(){const e=r().A.state;e.open&&r().A.setState({...e,size:e.size+20})}function m(){r().A.setState({open:!1})}function g(e){const{environment:t,snapshot:o,nextFutureSnapshot:n}=e;!function(e,t){(0,s().v)(e,"select_snapshot",{ageMs:(0,a().S)(t)})}(t,o);const i=r().A.state;i.open&&r().A.setState({...i,snapshot:o,nextFutureSnapshot:n,openSnapshotNearTimestamp:void 0})}function h(){const e=r().A.state;e.open&&r().A.setState({...e,snapshot:void 0,nextFutureSnapshot:void 0})}async function f(e,t){if(!r().A.state.open||!r().A.state.snapshot)return;if(!r().A.state.snapshot)return;!function(e,t){(0,s().v)(e,"restore_snapshot",{ageMs:(0,a().S)(t)})}(e,r().A.state.snapshot),c().m({message:d.restoringPreviousVersion});const o=await l().UT(e,i,{block:{id:r().A.state.blockStore.id,spaceId:(0,n().e)(r().A.state.blockStore.pointer.spaceId)},timestamp:r().A.state.snapshot.timestamp,shouldRestoreCollection:t??!1},{spaceIds:[]}).next();if(c().V(),o.value.error)throw o.value.error}},97059:(e,t,o)=>{o.d(t,{W:()=>h,w:()=>g});o(944114);var n=()=>o(585515),i=()=>o(577449),r=()=>o(161479),s=()=>o(545285),a=()=>o(763824),l=()=>o(780054),c=()=>o(870618),d=()=>o(670631),u=()=>o(227440),p=()=>o(217429),m=()=>o(540758);async function g(e){const{environment:t}=e;return(await a().lX(Object.keys(d().A.state.offlinePages||{}),100,(e=>async function(e){const{environment:t,pageId:o}=e,a={page:{id:o,spaceId:(0,r().e)(void 0)},baseUrl:l().A.domainBaseUrl,publicDomainName:l().A.publicDomainName,shouldTraverseToggleBlocks:!0,limit:1/0,cursor:{stack:[]},verticalColumns:!1},d=[];return await n().T(a,i().h.sideEffect((e=>((0,s().u)(e)&&d.push(e.id),Promise.resolve())),i().h.fromMonomorphicFunctionUnsafe((async e=>{const o=await c().h7({environment:t,pointer:e,useInMemoryCacheOnly:!1,skipAccessWrites:!0});return null==o?void 0:o.model})))),d}({environment:t,pageId:e})))).flat()}function h(e,t){return!u().A.state.online&&(e.device.isElectron||e.device.isMobileNative)&&p().default.checkGate({gateName:"download_for_offline"})&&!(0,m().Bd)(t)}},104077:(e,t,o)=>{o.d(t,{r:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.79 2.35 14.41 15.68",svg:(0,o(474848).jsx)("path",{d:"M10 2.355a2.35 2.35 0 0 0-2.253 1.686 5.06 5.06 0 0 0-2.803 4.527v1.189c0 .919-.334 1.806-.939 2.498l-.818.935c-.881 1.007-.166 2.583 1.173 2.583h3.02a2.65 2.65 0 0 0 5.24 0h3.02c1.339 0 2.054-1.576 1.173-2.583l-.818-.935a3.8 3.8 0 0 1-.939-2.498v-1.19a5.06 5.06 0 0 0-2.803-4.526A2.35 2.35 0 0 0 10 2.355m1.5 13.418a1.55 1.55 0 0 1-2.998 0zM8.909 4.564A1.104 1.104 0 0 1 10 3.605c.556 0 1.017.415 1.091.96l.049.353.329.138a3.81 3.81 0 0 1 2.337 3.512v1.189c0 1.221.444 2.401 1.248 3.32l.818.936a.307.307 0 0 1-.232.51H4.36a.308.308 0 0 1-.232-.51l.818-.935a5.04 5.04 0 0 0 1.248-3.321v-1.19c0-1.58.963-2.936 2.337-3.511l.33-.138z"})},i=(0,o(340498).wt)("bell",n)},105819:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,pencilLineIcon:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.63 4.12 14.99 11.76",svg:(0,o(474848).jsx)("path",{d:"m13.987 5.682-.684.684-1.288-1.288.692-.691a.91.91 0 0 1 1.28 0c.35.35.35.93 0 1.28zm-9.433 9.433 7.914-7.914-1.289-1.289-7.92 7.908c-.122.122-.214.29-.274.457l-.336 1.082c-.06.229.153.442.366.366l1.082-.335q.252-.07.457-.275m12.446.76H5.61l1.25-1.25H17a.625.625 0 1 1 0 1.25"})},i=(0,o(340498).wt)("pencilLine",n)},115562:(e,t,o)=>{o.d(t,{W:()=>l});o(296540);var n=()=>o(819121),i=()=>o(401497),r=()=>o(955825),s=()=>o(677195),a=o(474848);function l(e){const{selectorSize:t="normal",...o}=e,{disabled:l,checked:c}=o,[d,u]=(0,n().A)(),p=function(e){const{checked:t,disabled:o,isFocusVisible:n,selectorSize:r}=e;return(0,i().IS)((e=>({root:{position:"absolute",display:"flex",width:"large"===r?15:11,height:"large"===r?15:11,margin:1.5,justifyContent:"center",alignItems:"center",flexShrink:0,borderRadius:"large"===r?2:1,transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${o?e.tint.regular:e.blueColor}`,background:o?e.tint.regular:e.blueColor}:{boxShadow:`0 0 0 1.5px ${o?e.icon.quaternary:e.stroke.input}`,background:e.surface.page},...n&&{boxShadow:e.buttonBlueFocusRing}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"large"===r?18:void 0,height:"large"===r?18:void 0,...o?{pointerEvents:"none"}:{cursor:"pointer"}},icon:{color:e.text.contrastPrimary,width:"large"===r?12:10,height:"large"===r?12:10,ariaHidden:!0}})),[r,t,o,n])}({checked:c,disabled:l,selectorSize:t,isFocusVisible:u});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{ref:d,type:"checkbox",style:p.input,...o}),(0,a.jsx)("span",{...(0,r().AH)(p.root,l?{}:{pseudoActive:p.active}),children:c&&(0,s().R)(p.icon)})]})}},126158:(e,t,o)=>{o.d(t,{m:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("arrowDownSmall",{viewBox:"0 0 12 12",svg:(0,n.jsx)("path",{d:"M5.99756 0.850098C5.53564 0.850098 5.21875 1.17236 5.21875 1.65576V7.61768L5.27246 8.7832L4.19287 7.53711L2.98438 6.33398C2.84473 6.18896 2.66211 6.09229 2.42578 6.09229C2.00684 6.09229 1.68994 6.40381 1.68994 6.84424C1.68994 7.04834 1.77051 7.23633 1.93164 7.40283L5.42285 10.8994C5.56787 11.0498 5.78809 11.1357 5.99756 11.1357C6.2124 11.1357 6.42725 11.0498 6.57227 10.8994L10.0688 7.40283C10.23 7.23633 10.3105 7.04834 10.3105 6.84424C10.3105 6.40381 9.99365 6.09229 9.57471 6.09229C9.34375 6.09229 9.16113 6.18896 9.01611 6.33398L7.80762 7.53711L6.72803 8.7832L6.77637 7.61768V1.65576C6.77637 1.17236 6.46484 0.850098 5.99756 0.850098Z"})})},132389:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=o(474848);function i(e){const t={display:"inline-block",minWidth:e.size,minHeight:e.size};return"x"===e.axis?t.minHeight=1:"y"===e.axis&&(t.minWidth=1),(0,n.jsx)("div",{style:t})}},132855:(e,t,o)=>{o.r(t),o.d(t,{arrowInCircleUpFillIcon:()=>i,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o(474848).jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 0 0-15.25 7.625 7.625 0 0 0 0 15.25m3.042-8.07a.625.625 0 0 1-.884 0L10.625 8.02v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 1 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"})},i=(0,o(340498).wt)("arrowInCircleUpFill",n)},136833:(e,t,o)=>{function n(e){return Date.now()-parseInt(e.timestamp)}o.d(t,{S:()=>n})},149375:(e,t,o)=>{o.d(t,{v:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("arrowLeftThick",{viewBox:"0 0 16 16",directional:!0,svg:(0,n.jsx)("path",{d:"M1.54004 8.05762C1.54004 8.2627 1.62891 8.46094 1.78613 8.61133L6.29102 13.1162C6.45508 13.2734 6.63965 13.3486 6.82422 13.3486C7.25488 13.3486 7.5625 13.041 7.5625 12.6309C7.5625 12.4189 7.48047 12.2344 7.34375 12.1045L5.8125 10.5527L3.78906 8.70703L5.38867 8.80273H13.7012C14.1455 8.80273 14.46 8.49512 14.46 8.05762C14.46 7.61328 14.1455 7.3125 13.7012 7.3125H5.38867L3.7959 7.4082L5.8125 5.5625L7.34375 4.01074C7.48047 3.87402 7.5625 3.68945 7.5625 3.47754C7.5625 3.06738 7.25488 2.7666 6.82422 2.7666C6.63965 2.7666 6.45508 2.83496 6.27734 3.00586L1.78613 7.50391C1.62891 7.64746 1.54004 7.85254 1.54004 8.05762Z"})})},173019:(e,t,o)=>{o.d(t,{r:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("pencil",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},175116:(e,t,o)=>{o.d(t,{ET:()=>l,Ks:()=>c,RI:()=>a,p2:()=>s});o(16280);var n=o(296540);const i="collectionContextStore",r=(0,o(446943).C)({displayName:i,legacyContextKey:i,modernContextDefaultValue:void 0}),s=r.context,a=r.Provider;function l(){const e=n.useContext(s);if(void 0===e)throw new Error(`No context provided: ${i}`);return e}function c(){return n.useContext(s)}},182034:(e,t,o)=>{o.d(t,{O:()=>u,e:()=>d});o(898992),o(672577);var n=()=>o(908006),i=()=>o(878523),r=()=>o(725614),s=()=>o(892632),a=()=>o(299545),l=()=>o(77126),c=()=>o(489348);function d(e,t){const o=a().dd(t),n=s().xh(o);e.setState({...e.state,files:n})}async function u(e){const{blockStore:t,pageViewBlockStore:o,environment:s}=e;o?o.setState({...o.state,forceDiscussionOpen:!0}):c().A.openNewPageDiscussionInput(t),i().o2(s,{from:"page_comments"}),await n().default.afterNextFlush();const a=l().j.find((e=>e.getBlockStore().id===t.id)),d=null==a?void 0:a.getInputStore();d&&r().setSelectionAtEnd({store:d.state.textStore})}},207207:(e,t,o)=>{o.d(t,{J:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.62 2.62 15.26 15.26",svg:(0,o(474848).jsx)("path",{d:"M8.875 2.625a6.25 6.25 0 1 0 3.955 11.09l3.983 3.982a.625.625 0 1 0 .884-.884l-3.983-3.982a6.25 6.25 0 0 0-4.84-10.205m-5 6.25a5 5 0 1 1 10 0 5 5 0 0 1-10 0"})},i=(0,o(340498).wt)("magnifyingGlass",n)},240865:(e,t,o)=>{o.d(t,{V:()=>r});var n=()=>o(56366),i=()=>o(765957);function r(e){return(0,n().K8)((()=>{var t;return e?e.getMemberCountFromPublicSpaceData()??void 0:(null===(t=i().default.state.currentSpaceStore)||void 0===t?void 0:t.getMemberCountFromPublicSpaceData())??void 0}),[e])}},255824:(e,t,o)=>{o.d(t,{a:()=>r});var n=()=>o(56366);const i=new(o(496506).ComputedStore)((()=>o(263711).g.state.isOpen),{debugName:"IsInPageViewModeStore"});function r(){return(0,n().O$)(i)}},256863:(e,t,o)=>{o.d(t,{A:()=>s});o(296540);var n=()=>o(56366),i=()=>o(824862),r=o(474848);const s=function(e){const{botValue:t,botStore:s,showActiveDot:a,style:l,size:c}=e,d=(0,o(959013).tz)(),u=(0,n().K8)((()=>{if(s){const e=s.getIcon();if(e)return{pointer:{table:i().GP,id:s.id,spaceId:s.getSpaceId()},icon:e}}else if(null!=t&&t.icon)return{pointer:{table:i().GP,id:t.id,spaceId:t.space_id},icon:t.icon}}),[s,t]),p=(0,n().K8)((()=>(null==s?void 0:s.getDisplayName(d))??(0,o(799288).Hg)(t)),[s,t,d]),{activeDotStyle:m}=(0,o(401497).IS)((e=>({activeDotStyle:{height:10,width:10,backgroundColor:e.palette.green[400],border:"2px solid white",borderRadius:"50%",position:"absolute",left:11,top:11}})),[]);return(0,r.jsxs)("div",{style:l,children:[(0,r.jsx)(o(187820).B6,{icon:u,title:p,size:c||18,disabled:!0,isEmptyPage:!1,useInvertedColors:!0}),a?(0,r.jsx)("div",{style:m}):void 0]})}},271084:(e,t,o)=>{o.d(t,{k:()=>i});o(581454);class n extends(()=>o(757695))().Store{getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}getSortedUserIds(){return Object.entries(this.state||{}).sort(((e,t)=>{let[o,n]=e,[i,r]=t;return r-n})).map((e=>{let[t,o]=e;return t}))}}const i=new n;(0,o(604341).exposeDebugValue)("UserSimilarityStore",i)},279900:(e,t,o)=>{function n(e){let t,o,n;return async function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t?(n=r,o||(o=t.then((()=>(o=void 0,t=e(...n),t))),o)):(t=e(...r),t)}}o.d(t,{A:()=>n})},292379:(e,t,o)=>{o.d(t,{B:()=>m});var n=o(296540),i=()=>o(484714),r=()=>o(56366),s=()=>o(541235),a=()=>o(73223),l=()=>o(739135);const c=new Map;var d=()=>o(765957),u=()=>o(953006),p=o(474848);function m(e){let{tutorialId:t,tutorialStepId:o,onPrimaryButtonClick:m,displayStore:g,...h}=e;const f=(0,i().v3)(),v=function(e){const t=!c.get(e),o=(0,n.useRef)(t);return o.current&&c.set(e,!0),(0,n.useEffect)((()=>()=>{o.current&&c.set(e,!1)}),[e]),o.current}(`${t}.${o}`),{currentStep:y,isLoading:b}=(0,r().K8)((()=>{var e;return{isLoading:!(null!==(e=d().default.state.currentUserSettingsStore)&&void 0!==e&&e.getSettings()),currentStep:(0,l().gt)(d().default.state.currentUserSettingsStore,t)}}),[t]);if((0,n.useEffect)((()=>{b||y!==o||!v?null==g||g.setState(!1):null==g||g.setState(!0)}),[b,y,o,v,g]),b||y!==o||!v)return null;const S=s().c$[t],x=S.steps.findIndex((e=>e.id===o)),C=S.steps.length;return(0,p.jsx)(u().k,{onCloseClick:()=>{a().dismissTutorial(f,t)},onPrimaryButtonClick:e=>{a().tutorialGoToNextStep(f,t),null==m||m(e)},onBackButtonClick:()=>{a().tutorialGoToPrevStep(f,t)},numSteps:C,currStepIndex:x,...h})}},320865:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=o(474848);const i=function(){return(0,n.jsx)(o(678553).Ay,{title:(0,n.jsx)(o(331542).A,{})})}},331132:(e,t,o)=>{o.d(t,{A:()=>s});o(296540);var n=()=>o(401497),i=()=>o(381349),r=o(474848);function s(){const e=(0,n().IS)((e=>({blockContext:{flexShrink:0,display:"flex",width:3,borderRadius:4,marginLeft:2,marginRight:8,minHeight:20,background:(0,i().eb)(e.mode)}})),[]);return(0,r.jsx)("div",{style:e.blockContext})}},344124:(e,t,o)=>{var n=o(444576);e.exports=function(e,t){var o=n[e],i=o&&o.prototype;return i&&i[t]}},350124:(e,t,o)=>{o.d(t,{s:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("reactionAdd",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M12 14.3516C12 14.1875 12.0573 14.0482 12.1719 13.9336C12.2891 13.8164 12.4297 13.7578 12.5938 13.7578H14.7617V11.5938C14.7617 11.4297 14.819 11.2904 14.9336 11.1758C15.0482 11.0586 15.1875 11 15.3516 11C15.5156 11 15.6549 11.0586 15.7695 11.1758C15.8867 11.2904 15.9453 11.4297 15.9453 11.5938V13.7578H18.1133C18.2747 13.7578 18.4128 13.8164 18.5273 13.9336C18.6445 14.0482 18.7031 14.1875 18.7031 14.3516C18.7031 14.5156 18.6445 14.6562 18.5273 14.7734C18.4128 14.888 18.2747 14.9453 18.1133 14.9453H15.9453V17.1133C15.9453 17.2747 15.8867 17.4128 15.7695 17.5273C15.6549 17.6445 15.5156 17.7031 15.3516 17.7031C15.1875 17.7031 15.0482 17.6445 14.9336 17.5273C14.819 17.4128 14.7617 17.2747 14.7617 17.1133V14.9453H12.5938C12.4297 14.9453 12.2891 14.888 12.1719 14.7734C12.0573 14.6562 12 14.5156 12 14.3516Z"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0615 17.123C9.09538 17.123 8.1862 16.9385 7.33398 16.5693C6.48177 16.2048 5.72982 15.6966 5.07812 15.0449C4.43099 14.3932 3.92285 13.6413 3.55371 12.7891C3.18457 11.9368 3 11.0277 3 10.0615C3 9.09538 3.18457 8.1862 3.55371 7.33398C3.92285 6.48177 4.43099 5.7321 5.07812 5.08496C5.72982 4.43327 6.47949 3.92285 7.32715 3.55371C8.17936 3.18457 9.08854 3 10.0547 3C11.0254 3 11.9368 3.18457 12.7891 3.55371C13.6413 3.92285 14.3932 4.43327 15.0449 5.08496C15.6966 5.7321 16.207 6.48177 16.5762 7.33398C16.9453 8.1862 17.1299 9.09538 17.1299 10.0615C17.1299 10.6193 17.0684 11.1581 16.9453 11.678V11.5938C16.9453 11.1646 16.7813 10.7706 16.4767 10.4687C16.2657 10.2558 16.0099 10.1116 15.7285 10.0441C15.7263 9.26677 15.5805 8.53887 15.291 7.86035C14.9993 7.1722 14.5938 6.56836 14.0742 6.04883C13.5547 5.5293 12.9508 5.1237 12.2627 4.83203C11.5791 4.54036 10.8431 4.39453 10.0547 4.39453C9.27083 4.39453 8.53483 4.54036 7.84668 4.83203C7.16309 5.1237 6.5638 5.5293 6.04883 6.04883C5.53385 6.56836 5.13053 7.1722 4.83887 7.86035C4.5472 8.54395 4.40137 9.27767 4.40137 10.0615C4.40137 10.8499 4.5472 11.5859 4.83887 12.2695C5.13053 12.9531 5.53385 13.5547 6.04883 14.0742C6.56836 14.5938 7.16992 14.9993 7.85352 15.291C8.54167 15.5827 9.27767 15.7285 10.0615 15.7285C10.5739 15.7285 11.0641 15.6669 11.5321 15.5438C11.8272 15.8056 12.1958 15.9453 12.5938 15.9453H13.7617V16.0641C13.4535 16.2554 13.1293 16.4238 12.7891 16.5693C11.9368 16.9385 11.0277 17.123 10.0615 17.123ZM10.0547 13.4248C9.58073 13.4248 9.16146 13.3405 8.79688 13.1719C8.43685 12.9987 8.15658 12.8005 7.95605 12.5771C7.76009 12.3538 7.66211 12.167 7.66211 12.0166C7.66211 11.9346 7.69401 11.8776 7.75781 11.8457C7.82617 11.8092 7.89909 11.8092 7.97656 11.8457C8.22721 11.9779 8.51204 12.1055 8.83105 12.2285C9.15006 12.3516 9.55794 12.4131 10.0547 12.4131C10.5514 12.4131 10.9593 12.3516 11.2783 12.2285C11.6019 12.1055 11.8867 11.9779 12.1328 11.8457C12.2103 11.8092 12.2832 11.8092 12.3516 11.8457C12.4199 11.8776 12.4541 11.9346 12.4541 12.0166C12.4541 12.167 12.3538 12.3538 12.1533 12.5771C11.9528 12.8005 11.6725 12.9987 11.3125 13.1719C10.9525 13.3405 10.5332 13.4248 10.0547 13.4248ZM8.03809 9.44629C7.82389 9.44629 7.63704 9.3597 7.47754 9.18652C7.32259 9.01335 7.24512 8.79004 7.24512 8.5166C7.24512 8.24772 7.32259 8.02669 7.47754 7.85352C7.63704 7.67578 7.82389 7.58691 8.03809 7.58691C8.25228 7.58691 8.44141 7.67578 8.60547 7.85352C8.76953 8.02669 8.85156 8.24772 8.85156 8.5166C8.85156 8.79004 8.76953 9.01335 8.60547 9.18652C8.44141 9.3597 8.25228 9.44629 8.03809 9.44629ZM12.0713 9.44629C11.8571 9.44629 11.6702 9.3597 11.5107 9.18652C11.3558 9.01335 11.2783 8.79004 11.2783 8.5166C11.2783 8.24772 11.3558 8.02669 11.5107 7.85352C11.6702 7.67578 11.8571 7.58691 12.0713 7.58691C12.2855 7.58691 12.4746 7.67578 12.6387 7.85352C12.8027 8.02669 12.8848 8.24772 12.8848 8.5166C12.8848 8.79004 12.8027 9.01335 12.6387 9.18652C12.4746 9.3597 12.2855 9.44629 12.0713 9.44629Z"})]})})},380048:(e,t,o)=>{o.d(t,{I:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("chevronLeft",{viewBox:"0 0 16 16",directional:!0,svg:(0,n.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},381138:(e,t,o)=>{o.d(t,{q:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("search",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M.281 6.438c0-.875.164-1.696.492-2.461a6.484 6.484 0 011.375-2.032A6.237 6.237 0 016.64.078 6.2 6.2 0 019.11.57c.77.328 1.447.787 2.03 1.375a6.374 6.374 0 011.368 2.032c.333.765.5 1.586.5 2.46 0 .688-.107 1.342-.32 1.961a6.28 6.28 0 01-.868 1.696l3.563 3.578c.11.104.19.226.242.367.057.14.086.29.086.445 0 .22-.05.417-.149.594a1.122 1.122 0 01-1 .57c-.156 0-.307-.028-.453-.086a1.058 1.058 0 01-.382-.25l-3.586-3.585c-.5.333-1.047.596-1.641.789a6.089 6.089 0 01-1.86.28 6.237 6.237 0 01-2.468-.491 6.4 6.4 0 01-2.024-1.367A6.509 6.509 0 01.773 8.913a6.256 6.256 0 01-.492-2.476zm1.664 0c0 .65.12 1.26.36 1.828a4.775 4.775 0 001.015 1.5c.433.427.933.763 1.5 1.007a4.548 4.548 0 001.82.368c.652 0 1.261-.123 1.829-.368a4.747 4.747 0 002.508-2.507 4.567 4.567 0 00.367-1.829c0-.645-.123-1.252-.367-1.82a4.776 4.776 0 00-1.016-1.5A4.578 4.578 0 008.469 2.11a4.567 4.567 0 00-1.828-.367c-.646 0-1.253.123-1.82.367a4.667 4.667 0 00-1.5 1.008c-.433.432-.772.932-1.016 1.5a4.633 4.633 0 00-.36 1.82z"})})},396350:(e,t,o)=>{o.d(t,{i:()=>r});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.75 13.75",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M12.876 7.982a.625.625 0 1 0-1.072-.644L9.25 11.595 7.815 9.92a.625.625 0 1 0-.95.813l2 2.334a.625.625 0 0 0 1.01-.085z"}),(0,n.jsx)("path",{d:"M5.25 3.125A2.125 2.125 0 0 0 3.125 5.25v9.5c0 1.174.951 2.125 2.125 2.125h9.5a2.125 2.125 0 0 0 2.125-2.125v-9.5a2.125 2.125 0 0 0-2.125-2.125zM4.375 5.25c0-.483.392-.875.875-.875h9.5c.483 0 .875.392.875.875v9.5a.875.875 0 0 1-.875.875h-9.5a.875.875 0 0 1-.875-.875z"})]})},r=(0,o(340498).wt)("checkmarkSquare",i)},398217:(e,t,o)=>{o.d(t,{Jv:()=>f,Rl:()=>v,mA:()=>h});var n=o(296540),i=()=>o(484714),r=()=>o(56366),s=()=>o(401497),a=()=>o(970013),l=()=>o(743176),c=()=>o(780054),d=()=>o(68465),u=()=>o(159588),p=()=>o(963589),m=o(474848);const g=function(){return(0,m.jsx)(o(464708).A,{color:"purple",style:{marginLeft:6,padding:"1px 4px",display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1},content:(0,m.jsx)(o(959013).sA,{defaultMessage:"AI",id:"database.property.aiAutofillEnabledIndicator"})})};const h=n.memo((function(e){const{propertySchema:t,showIcon:n,showDragIcon:i,hideName:r,badge:a,style:l,iconStyle:d,iconSize:p,dragHandleStyle:g,className:h,labelSizeVariant:f}=e,y=c().A.isMobile?16:14,b=(0,s().IS)((e=>({container:{display:"flex",alignItems:"center",lineHeight:"120%",minWidth:0,fontSize:y,...l},iconWrapper:{display:"grid",justifyContent:"center",alignItems:"center",marginRight:r?void 0:"small"===f||i?4:c().A.isMobile?9:6,...d},dragHandle:{gridColumn:1,gridRow:1,opacity:i?1:0,transition:`opacity ${u().bM}`},itemIcon:{gridColumn:1,gridRow:1,opacity:i?0:1,transition:`opacity ${u().bM}`},dragIcon:{fill:e.icon.secondary}})),[y,r,d,f,i,l]);return(0,m.jsxs)("div",{className:h,style:b.container,children:[n&&(0,m.jsxs)("div",{style:b.iconWrapper,children:[(0,m.jsx)("div",{style:b.itemIcon,children:(0,m.jsx)(v,{propertySchema:t,iconSize:p,iconStyle:d})}),(0,m.jsx)("div",{style:b.dragHandle,children:(0,m.jsx)(o(57232).A,{style:g,iconSize:12,iconStyle:b.dragIcon})})]}),!r&&(0,m.jsx)("div",{style:{...o(284371).RC},children:t.name}),a]})}));function f(e){const{propertySchema:t}=e,o=(0,i().v3)();return(0,r().K8)((()=>(0,d().O0)(o)&&a().$M(t)&&a().om(t)),[o,t])?(0,m.jsx)(g,{}):null}function v(e){const{propertySchema:t,iconSize:o,iconStyle:n}=e,i=(0,s().DP)(),r=(0,p().X)("nds_default_property_noticon"),a=c().A.isMobile?18:16;return(0,m.jsx)(l().zB,{type:t.type,icon:t.icon,size:o||a,theme:i,style:n,isDefaultNoticonEnabled:r})}},406533:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>i,questionMarkCircleIcon:()=>r});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},r=(0,o(340498).wt)("questionMarkCircle",i)},413267:(e,t,o)=>{o.d(t,{b:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("thinCheck",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M6.385 14.162c.362 0 .642-.15.84-.444L13.652 3.71c.144-.226.205-.417.205-.602 0-.485-.341-.82-.833-.82-.335 0-.54.123-.746.444l-5.926 9.4-3.042-3.903c-.205-.267-.417-.376-.718-.376-.492 0-.848.348-.848.827 0 .212.075.417.253.629l3.541 4.416c.24.3.492.437.848.437z"})})},454531:(e,t,o)=>{o.d(t,{W:()=>h});var n=()=>o(780054),i=()=>o(972435),r=()=>o(867772),s=()=>o(681810),a=()=>o(901389),l=()=>o(896628),c=()=>o(383594),d=()=>o(675925),u=()=>o(751156),p=()=>o(892632);const m=1500,g=(0,o(959013).YK)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},preparing:{defaultMessage:"Preparing...",id:"pageCover.status.preparing"},downloading:{defaultMessage:"Downloading...",id:"pageCover.status.downloading"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image link…",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function h(e){let{environment:t,intl:o,store:n,rect:i,from:r}=e;c().W(t,{originGap:3,originRect:i,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:o.formatMessage(g.pageCover),onDelete:()=>{!function(e){let{environment:t,store:o}=e;c().I(),u().createAndCommit({userAction:"PageCover.handleDelete",environment:t,canUndo:!0,perform:e=>{l().PT({store:o,transaction:e})}})}({environment:t,store:n})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:o,position:i}=e;(0,d().o)(t,{action:"edit_cover",block_type:"page",from:r},(e=>{v({environment:t,store:n,url:{originUrl:o},position:i}),e()}))}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:o.formatMessage(g.fileTypeCaption,{idealImageWidth:m}),onUpload:e=>{(0,d().o)(t,{action:"edit_cover",block_type:"page",from:r},(i=>{var r;c().I(),p().QM({environment:t,file:e[0],bucket:"secure",record:(null===(r=n.getCoverStore())||void 0===r?void 0:r.pointer)??n.pointer,isFileBlock:!1,reportRichUploadMetrics:!0,onStart:y,onProgress:b,onComplete:e=>{var o;o={environment:t,store:n,url:{originUrl:e}},f({...o,position:.5})},onError:()=>{a().f1(o.formatMessage(g.uploadFailed))}}),i()}))}},{type:"embed",title:o.formatMessage(g.embedTitle),inputPlaceholder:o.formatMessage(g.embedPlaceholder),caption:o.formatMessage(g.embedCaption),buttonText:o.formatMessage(g.embedSubmit),onChange:e=>{(0,d().o)(t,{action:"edit_cover",block_type:"page",from:r},(o=>{var i;i={environment:t,store:n,url:e},f({...i,position:.5}),c().I(),o()}))}},{type:"unsplash",onChange:e=>{let{url:o,position:i}=e;(0,d().o)(t,{action:"edit_cover",block_type:"page",from:r},(e=>{v({environment:t,store:n,url:{originUrl:o},position:i}),e()}))}}]})}async function f(e){const{environment:t,store:o,url:n,position:a}=e,{serverCommitResult:c}=u().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{l().fg({store:o,url:n,position:a||.5,transaction:e})}});await c,s().A.state.loadingMode===r().vS&&s().A.setState({loadingMode:r().Gi,dataURL:s().A.state.dataURL,uploadProgress:t.device.isMobileNative?void 0:100,progressText:i().A.formatMessage(g.downloading)})}function v(e){f(e),n().A.isMobile&&c().I()}function y(e){const{file:t,name:o,size:n}=e;if(c().I(),s().A.setState({loadingMode:r().Wc,file:t,name:o,size:n}),t.type.indexOf("image")>=0)if(t instanceof File){const e=new FileReader;e.onload=e=>{s().A.state.loadingMode===r().Wc&&s().A.setState({...s().A.state,loadingMode:r().vS,uploadProgress:0,dataURL:e.target.result})},e.readAsDataURL(t)}else s().A.state.loadingMode===r().Wc&&s().A.setState({...s().A.state,loadingMode:r().vS,dataURL:t.dataURL,progressText:i().A.formatMessage(g.preparing)});else s().A.state.loadingMode===r().Wc&&s().A.setState({...s().A.state,loadingMode:r().vS,progressText:i().A.formatMessage(g.preparing)})}function b(e){const{progressPercent:t,progressText:o}=e;s().A.state.loadingMode===r().vS&&s().A.setState({...s().A.state,uploadProgress:t,progressText:o})}},458366:(e,t,o)=>{o.d(t,{B2:()=>T,F1:()=>k,Kc:()=>C,NN:()=>j,UY:()=>x,br:()=>I,lA:()=>w,lh:()=>A,pi:()=>y,w_:()=>S,zP:()=>b});o(898992),o(737550);var n=()=>o(584262),i=()=>o(443239),r=()=>o(970013),s=()=>o(713998),a=()=>o(882262),l=()=>o(415566),c=()=>o(177256),d=()=>o(72135),u=()=>o(919709),p=()=>o(496603),m=()=>o(534177),g=()=>o(939768),h=()=>o(720665),f=()=>o(492414),v=()=>o(972435);function y(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function b(e){switch(e){case"table":return"table";case"board":return"board";case"list":return"list";case"gallery":return"gallery";case"feed":return"feed";case"relation":case"relation_section":return"relation_section";case"timeline":return"timeline";case"calendar":return"calendar";case"page":return"page_properties";case"compact_page":return"compact_page";case"mini":return"mini_peek";case"form_editor":case"form_viewer":case"property_module":return"property_module";default:(0,m().HB)(e)}}function S(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function x(e){const{store:t,property:o,propertySchema:i}=e,r=null==i?void 0:i.type;if("title"===r)return(0,f().Ay)({store:t,fullyQualified:!1,pageVisitSource:n().y8.LinkInPage});{const e=t.getPropertyValue(o);return s().UY(r,e)}}function C(e){let t=(0,u().k4p)(e);if(!t||""===t.trim()||t.trim().includes(" "))return{domain:void 0,restOfUrl:void 0};t=t.trim();let o=g().qg(t),n=o.host;if(o.protocol&&n||(o=g().qg(`http://${t}`),n=o.host),!n)return{domain:void 0,restOfUrl:void 0};n&&(n=n.replace(/^www./i,""));const i=t.toLowerCase().indexOf(n.toLowerCase());if(-1===i)return{domain:void 0,restOfUrl:void 0};n=t.slice(i,i+n.length);return{domain:n,restOfUrl:t.slice(i+n.length)}}function A(e){const{numberValue:t,numberFormat:o,numberShowAs:n}=e;if(!(p().yr(t)||h().pN(t)||"bar"!==(null==n?void 0:n.type)&&"ring"!==(null==n?void 0:n.type))){const e=v().A.getIntl();return"percent"===o?d().ZV(t,"percent",e):`${t} / ${n.maxValue}`}}function k(e){const{property:t,collectionStore:o}=e,n=o.isSyncedCollection();return Boolean(n)&&(0,i().u)(t)}function w(e,t){switch(e){case"side_peek":return{icon:c().A,tooltip:v().A.formatMessage(M.openInSidePeekTooltip),caption:t?"":v().A.formatMessage(M.openAsPageTitle)};case"center_peek":return{icon:l().q,tooltip:v().A.formatMessage(M.openInCenterPeekTooltip),caption:t?"":v().A.formatMessage(M.openAsPageTitle)};case"full_page":return{icon:a().m,tooltip:v().A.formatMessage(M.openAsPageTooltip),caption:t?"":v().A.formatMessage(M.openAsPageTitle)};default:(0,m().HB)(e)}}const M=(0,o(959013).YK)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function I(e){const{store:t,additionalStores:o,collectionContextStore:n}=e,i=t.getAssociatedCollectionStore();return!("collectionTypedView"!==(null==n?void 0:n.contextType)||!i)&&o.some((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==i.id}))}function j(e){return"form_editor"===e||"form_viewer"===e}function T(e){return Boolean(e&&!r().dA.includes(e.type))}},465364:(e,t,o)=>{o.d(t,{$N:()=>P,D5:()=>B,GB:()=>I,M9:()=>w,Pt:()=>T,eW:()=>j,jo:()=>L,v7:()=>M});o(944114),o(898992),o(803949),o(581454);var n=()=>o(244641),i=()=>o(787626),r=()=>o(713998),s=()=>o(597777),a=()=>o(604995),l=()=>o(416504),c=()=>o(519831),d=()=>o(496603),u=()=>o(534177),p=()=>o(299709),m=()=>o(317001),g=()=>o(520861),h=()=>o(878060),f=()=>o(44729),v=()=>o(246826),y=()=>o(319975),b=()=>o(519839),S=()=>o(695625),x=()=>o(397248),C=()=>o(217429),A=()=>o(630116),k=()=>o(747671);function w(e){const{environment:t,droppedStores:o,duplicate:r,calendarBy:d,transaction:u,collectionContextStore:h,duplicateActions:v}=e,y=n().c9.fromMillis(e.startOfDay);let S=!0;for(const n of o){const t=e.collectionStore?e.collectionStore:(0,b().Dj)({store:n,collectionContextStore:h});if(n.getParentTable()===c().Vl||!t){S=!1;break}f().X$({childStore:n,parentStore:t,transaction:u})||(S=!1)}const x=(0,g().T)({environment:t,droppedStores:o,duplicate:r,transaction:u,collectionStore:e.collectionStore,duplicateActions:v});for(const n of x){const o=e.collectionStore?e.collectionStore:(0,b().Dj)({store:n,collectionContextStore:h});if(!o)continue;const r=o.getMappedProperty(d),c=n.getPropertyStore(r),g=(0,i().b)(c.getValue())||a().Ec((0,l().P)()),f=a().kW(g,(0,l().P)()),v=y.toFormat(a().tr);let x;if("date"===f.type||"datetime"===f.type)x={...f,start_date:v};else{const e=a().AA(f,(0,l().P)());if(!e.end)return;const t={...f,start_date:v},o=a().AA(t,(0,l().P)()).start.diff(e.start,"days"),n=e.end.plus(o).toFormat(a().tr);x={...f,start_date:v,end_date:n}}const C=a().kW(x,s().$K(g)||(0,l().P)());(0,m().j)({environment:t,store:n,collectionStore:o,collectionContextStore:h,shouldCoerce:!0,groupsPointer:[],transaction:u,alreadyMovedToCollection:S}),B({environment:t,type:"dateValue",propertyId:r,store:n,transaction:u,dateValue:C}),(0,p().E)({environment:t,collectionContextStore:h,block_id:n.id,property:r,property_type:"date",from:"calendar"})}}function M(e){const{calendarStore:t,direction:o,targetStore:n}=e;t.setState({...t.state,isDragging:!0,targetStore:n,direction:o,temporaryValue:void 0})}function I(e){const{calendarStore:t,x:o,y:r,calendarBy:c}=e,u=t.state;if(u.isDragging){const e=(0,i().b)(u.targetStore.getPropertyStore(c).getValue());if(!e)return;const p=a().kW(e,(0,l().P)()),m=u.temporaryValue||e,g=a().kW(m,(0,l().P)()),h=[];u.dayStoreMap.forEach(((e,t)=>{h.push({store:e,timestamp:t})}));const f=h.find((e=>{let{store:t}=e;const n=S().T.getRectFromStore(t);return Boolean(n&&x().ux(n,o,r))}));let v;if(f){const e=n().c9.fromMillis(f.timestamp),t=e.endOf("day"),o=e.toFormat(a().tr);if(p){const i=a().AA(p,(0,l().P)());if(u.direction===k().Q.Left)if(n().IX.fromDateTimes(e,t).contains(i.start))v=p;else{let e;e="datetimerange"===p.type||"daterange"===p.type?{...p,start_date:o,end_date:p.end_date}:"datetime"===p.type?{type:"datetimerange",start_date:o,start_time:p.start_time,end_date:p.start_date,end_time:p.start_time,time_zone:p.time_zone,reminder:p.reminder}:{type:"daterange",start_date:o,end_date:p.start_date,reminder:p.reminder};const t=a().AA(e,(0,l().P)());v=!i.end&&t.start>i.start||i.end&&t.start>i.end?g:e}else if(i.end?n().IX.fromDateTimes(e,t).contains(i.end):n().IX.fromDateTimes(e,t).contains(i.start))v=p;else{let e;e="date"===p.type?{...p,type:"daterange",end_date:o}:"datetime"===p.type?{...p,type:"datetimerange",end_date:o,end_time:"00:00"}:{...p,end_date:o};const t=a().AA(e,(0,l().P)());v=t.end&&t.end<t.start?g:e}}}if(v&&!d().n4(g,v)){const e=a().kW(v,s().$K(m)||(0,l().P)());t.setState({...u,temporaryValue:e})}}}function j(e){const{environment:t,calendarStore:o,calendarBy:n,transaction:i}=e,r=o.state;r.isDragging&&r.temporaryValue&&(B({type:"dateValue",environment:t,dateValue:r.temporaryValue,propertyId:n,store:r.targetStore,transaction:i}),o.setState({...o.state,isDragging:!1}))}function T(e){const{calendarStore:t}=e,o=t.state;o.isDragging&&t.setState({...o,isDragging:!1})}function P(e){const{environment:t,store:o,collectionStore:i,collectionContextStore:s,startDayOfWeek:c,transaction:d}=e,u=s.dateRangeStartStore.state,p=(0,l().P)(),g=s.normalizedQueryStore.state;if(!g||!g.calendar_by)return;const h=(null==i?void 0:i.getMappedProperty(g.calendar_by))??g.calendar_by,f=a().hp(u,c,p),y=f.startOf("month"),b=f.endOf("month"),S=n().c9.now().startOf("day");let x;return x=n().IX.fromDateTimes(y,b).contains(S)?a().p6(S.valueOf(),p):a().p6(a().iB(u,c,p).valueOf(),p),v().zv({store:o.getPropertiesStore(),data:{[h]:r().m5(x)},transaction:d}),(0,m().j)({environment:t,store:o,collectionStore:i,collectionContextStore:s,shouldCoerce:!0,groupsPointer:[],transaction:d}),o}function B(e){const{environment:t,store:o,propertyId:n,transaction:i}=e;let s;"timestamp"===e.type?s=a().p6(e.timestampMs.valueOf(),(0,l().P)()):"dateValue"===e.type?s=e.dateValue:(0,u().HB)(e);const c=o.getPropertyValue(n);if(s&&function(e){const{propertyId:t,oldDateValue:o,newPersistedDate:n,store:i}=e;if(o||!n||void 0!==n.reminder)return!1;if(!C().default.checkGate({gateName:"adoption_reminder_collection_default"}))return!1;const r=D(t,i);if(void 0===r)return!1;return!0}({propertyId:n,oldDateValue:c,newPersistedDate:s,store:o})){const e=D(n,o);void 0!==e&&(s={...s,reminder:e})}const d=r().m5(s);v().zv({store:o.getPropertiesStore(),data:{[n]:d},transaction:i}),h().O({environment:t,store:o,dateProperty:{id:n,oldValue:c,newValue:d}})}function D(e,t){const o=t.getAssociatedCollectionStore();if(!o)return;const n=o.getSchema();if(!n)return;const i=n[e];return i&&"date"===i.type?i.default_reminder:void 0}function L(e){const{environment:t,collectionStore:o,calendarBy:n,store:i,insertStores:r,collectionContextStore:s,transaction:a}=e,l=i.getPropertyStore(n).getValue();for(const c of r)(0,m().j)({environment:t,store:c,collectionStore:o,collectionContextStore:s,shouldCoerce:!0,groupsPointer:[],transaction:a}),y().R9({environment:t,store:c.getPropertyStore(n),value:l,transaction:a});return r.map((e=>A().Bv.createChildStore(o,e.pointer)))}},477293:(e,t,o)=>{o.d(t,{r:()=>r});var n=()=>o(56366),i=()=>o(217429);function r(e){let{disableExposureLogging:t,disableEventTrailLogging:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n().K8)((()=>i().default.getEligibleGroup({experimentId:e,defaultGroup:"control",disableExposureLogging:t,disableEventTrailLogging:o})),[e,t,o])}},505108:(e,t,o)=>{o.d(t,{a:()=>m});var n=o(296540),i=()=>o(401497),r=()=>o(534177),s=()=>o(284371),a=()=>o(84817),l=()=>o(819121),c=()=>o(955825),d=o(474848);function u(e){const{disabled:t,checked:o,selectorSize:n}=e,[r,s]=(0,l().A)(),a=function(e){const{checked:t,disabled:o,isFocusVisible:n,selectorSize:r}=e;return(0,i().IS)((e=>({root:{position:"absolute",display:"flex",width:15,height:15,padding:5,margin:1.5,justifyContent:"center",alignItems:"center",gap:8,flexShrink:0,borderRadius:"50%",transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${o?e.tint.regular:e.blueColor}`,background:o?e.tint.regular:e.blueColor}:{boxShadow:`0 0 0 1.5px ${o?e.icon.quaternary:e.stroke.input}`,background:e.surface.page},...n&&{boxShadow:e.buttonBlueFocusRing}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"small"===r?14:18,height:"small"===r?14:18,...o?{pointerEvents:"none"}:{cursor:"pointer"}}})),[t,o,n,r])}({checked:o,disabled:t,isFocusVisible:s,selectorSize:n});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("input",{ref:r,type:"radio",style:a.input,className:"radio-button",...e}),(0,d.jsx)("span",{...(0,c().AH)("custom-radio-button",a.root,t?{}:{pseudoActive:a.active})})]})}var p=()=>o(554509);const m=n.forwardRef((function(e,t){let{additionalContent:o,description:r,isDisabled:l,isSelected:c,label:u,name:p,onChange:m,width:f="fill",selectorSize:v="normal",selectAlignXAxis:y="left",selectAlignYAxis:b="center",selectType:S="checkbox",style:x,supportText:C,value:A,colorName:k,alignAdditionalContent:w,...M}=e;const I=(0,n.useId)(),j=function(e){const{isSelected:t,isDisabled:o,selectAlignYAxis:n,alignAdditionalContent:r}=e;return(0,i().IS)((e=>{const i=t&&!o?e.blueColor:e.selectorBorderUnselected;return{container:{display:"flex",alignItems:r??"center",gap:12,userSelect:"none",padding:"9px 16px 10px 10px",borderRadius:6,border:`1px solid ${i}`,...!o&&{cursor:"pointer"}},title:{fontWeight:s().Wy.medium,fontSize:14,userSelect:"none",lineHeight:18},additionalContentWrapper:{flexShrink:0},selectorWrapper:{display:"flex",..."top"===n?{marginTop:2}:{}},rightAlignSelectorWrapper:{display:"flex"}}}),[t,o,n,r])}({isSelected:c,isDisabled:l,selectAlignYAxis:b,alignAdditionalContent:w}),T=(0,d.jsxs)(a().Y1,{direction:"horizontal",align:"top"===b?"top-left":"center-left",gap:12,width:f,children:[(0,d.jsx)("div",{style:j.selectorWrapper,children:(0,d.jsx)(h,{id:I,selectType:S,name:p,value:A,onChange:m,isSelected:c,selectorSize:v,isDisabled:l,...M})}),(0,d.jsx)(g,{colorName:k,description:r,label:u,selectorSize:v,supportText:C,isDisabled:l})]}),P=(0,d.jsxs)(a().Y1,{direction:"horizontal",align:"top"===b?"top-center":"center",gap:12,children:[(0,d.jsx)(g,{colorName:k,description:r,label:u,selectorSize:v,supportText:C,isDisabled:l}),(0,d.jsx)("div",{style:{...j.selectorWrapper,...j.rightAlignSelectorWrapper},children:(0,d.jsx)(h,{id:I,selectType:S,name:p,value:A,onChange:m,selectorSize:v,isSelected:c,isDisabled:l,...M})})]}),B=o?(0,d.jsx)("div",{style:j.additionalContentWrapper,children:o}):null;return(0,d.jsx)("label",{ref:t,style:{...j.container,...x},htmlFor:I,children:"left"===y?(0,d.jsxs)(d.Fragment,{children:[T,B]}):(0,d.jsxs)(d.Fragment,{children:[B,P]})})}));function g(e){const{description:t,label:o,supportText:n,selectorSize:i,isDisabled:s,colorName:l}=e;let c;return"large"===i?c="Page-Content/Text-Block":"normal"===i||void 0===i?c="Body-13px/Medium":"small"===i?c="Body-12px/Regular":(0,r().HB)(i),(0,d.jsxs)(a().Y1,{gap:4,children:[(0,d.jsxs)(a().Y1,{gap:2,children:[(0,d.jsx)(p().D,{styleName:c,colorName:l||(s?"quaternary":"primary"),children:o}),t?(0,d.jsx)(p().D,{styleName:"Caption-12px/Regular",colorName:s?"quaternary":"secondary",children:t}):null]}),n?(0,d.jsx)(p().D,{styleName:"Caption-12px/Medium",colorName:"tertiary",children:n}):null]})}function h(e){const{selectType:t,selectorSize:n="normal",id:s,name:a,value:l,onChange:c,isSelected:p,isDisabled:m,...g}=e,h=(0,i().IS)((()=>({checkboxWrapper:{minWidth:18,display:"flex",justifyContent:"center"}})),[]);switch(t){case"radio":return(0,d.jsx)(u,{id:s,name:a,value:l,onChange:c,checked:p,disabled:m,selectorSize:n,...g});case"checkbox":return(0,d.jsx)("div",{style:h.checkboxWrapper,children:(0,d.jsx)(o(115562).W,{id:s,name:a,value:l,onChange:c,checked:p,disabled:m,selectorSize:n,...g})});case"none":return null;default:(0,r().HB)(t)}}},520861:(e,t,o)=>{o.d(t,{T:()=>i});o(944114),o(898992),o(908872);var n=()=>o(415651);function i(e){const{environment:t,collectionStore:o,duplicate:i,droppedStores:r,transaction:s,duplicateActions:a}=e,{movedStores:l,reparentedStores:c}=r.reduce(((e,t)=>(i||t.getAssociatedCollectionId()!==(null==o?void 0:o.id)?e.reparentedStores.push(t):e.movedStores.push(t),e)),{movedStores:[],reparentedStores:[]});return[...l,...n().MS({environment:t,droppedStores:c,duplicate:i,transaction:s,resolveTemplateVariables:!1,duplicateActions:a})]}},525432:(e,t,o)=>{o.d(t,{Bd:()=>a,DN:()=>g,II:()=>b,R8:()=>y,U9:()=>v,VM:()=>f,ZF:()=>p,ZI:()=>d,bf:()=>c,jx:()=>u,wW:()=>h,xO:()=>l});o(16280),o(296540);var n=()=>o(651124),i=()=>o(959013),r=()=>o(712505),s=o(474848);let a=function(e){return e[e.ViewSettings=0]="ViewSettings",e[e.FilterBar=1]="FilterBar",e[e.TopbarFilterPopup=2]="TopbarFilterPopup",e[e.TopbarSortPopup=3]="TopbarSortPopup",e[e.TopbarFollowPopup=4]="TopbarFollowPopup",e[e.MobileSheet=5]="MobileSheet",e}({});const l=480,c=320;function d(e){const{timelineViewTab:t,collectionContextStore:o}=e,i=u({collectionContextStore:o}),r=p({collectionContextStore:o});return"timeline"===i?"timeline"===t?"timeline_properties":r?"timeline_table_properties":void 0:(0,n().u9)(u({collectionContextStore:o}))}function u(e){var t;const{collectionContextStore:o}=e,n=null===(t=o.collectionViewStore())||void 0===t?void 0:t.getType();if(!n)throw new Error("View type was not defined.");return n}function p(e){const{collectionContextStore:t}=e,o=t.normalizedFormatStore.state;return Boolean(o.timeline_show_table)}const m=600;function g(e,t,o){const n=o||0,i=e.settingsStore.state;if(i.open&&!0!==i.hideSettingsPopup)return h(e,t,n)}function h(e,t,o){const n=o||0,i=e.settingsStore.state,s=u({collectionContextStore:e});return i.open&&"form_editor"===s||t||r().default.isSidePeekOpen()||e.isInHomeWidgetStore.state||e.isInlineViewStore.state||n<=m?"popup":"sidebar"}function f(e){let{hasOnlyLinkedDataSources:t,isCollectionViewPageWithContent:o,locked:n}=e;return o?n?(0,s.jsx)(i().sA,{defaultMessage:"Unlock wiki",id:"action.unlockWikiName.name"}):(0,s.jsx)(i().sA,{defaultMessage:"Lock wiki",id:"action.lockWikiName.name"}):t?n?(0,s.jsx)(i().sA,{defaultMessage:"Unlock views",id:"database.viewSettings.mainTab.unlockViews.title"}):(0,s.jsx)(i().sA,{defaultMessage:"Lock views",id:"database.viewSettings.mainTab.lockViews.title"}):n?(0,s.jsx)(i().sA,{defaultMessage:"Unlock database",id:"database.viewSettings.mainTab.unlockDatabase.title"}):(0,s.jsx)(i().sA,{defaultMessage:"Lock database",id:"database.viewSettings.mainTab.lockDatabase.title"})}let v=function(e){return e[e.Source=0]="Source",e[e.Relation=1]="Relation",e}({});const y=6;function b(e){let{currentViewType:t,isPlaceholderExternalCollection:o,collectionContextStore:n,allowedActions:i,settingsHeaderSizeObserver:r}=e;return"page"!==t&&"form_editor"!==t&&(!o&&(!!n.shouldAllowNewItemCreation()&&(!(i&&!i.includes("addItem"))&&!(r&&r.rect.state.width>c))))}},541235:(e,t,o)=>{o.d(t,{YD:()=>r,c$:()=>n,q_:()=>i});const n={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]}},i="completed",r="dismissed"},544862:(e,t,o)=>{o.d(t,{A:()=>A});var n=o(296540),i=()=>o(484714),r=()=>o(56366),s=()=>o(959013),a=()=>o(896628),l=()=>o(454531),c=()=>o(751156),d=()=>o(478726),u=()=>o(227440),p=()=>o(867772),m=()=>o(681810),g=()=>o(608581),h=()=>o(145214),f=()=>o(704152),v=()=>o(807683),y=()=>o(401497),b=()=>o(534177),S=o(474848);function x(e){let{src:t,placeholderSrc:o,placeholderBehavior:i,imageStyle:r,containerStyle:s,onLoadComplete:a,testId:l}=e;const[c,d]=(0,n.useState)(!0);let u;switch(i){case"force-show-placeholder":u=!0;break;case"force-show-src":u=!1;break;case"show-placeholder-if-loading-src":u=!!o&&(c||void 0===t);break;default:(0,b().HB)(i)}const p=(0,y().IS)((()=>{const e={gridColumn:1,gridRow:1};return{container:{display:"grid",...s},srcWrapper:{...u&&{display:"none"},...e},placeholderWrapper:{pointerEvents:"none",...e}}}),[s,u]);(0,n.useEffect)((()=>{void 0!==t&&d(!0)}),[t]);const m=(0,n.useCallback)((e=>{d(!1),null==a||a()}),[a]);return(0,S.jsxs)("div",{style:p.container,children:[(0,S.jsx)(v().Ay,{src:t,onLoad:m,style:r,placeholderStyle:p.srcWrapper,placeholderLoadedStyle:p.srcWrapper,testId:l}),o&&(0,S.jsx)(v().Ay,{src:o,style:r,placeholderStyle:p.placeholderWrapper,placeholderLoadedStyle:p.placeholderWrapper})]})}var C=()=>o(453101);const A=function(e){let{store:t,disabled:s,paddingRight:l,paddingLeft:d,height:u,proxyWidth:g}=e;const h=(0,i().v3)(),f=(0,i().Y0)(),y=(0,r().uB)(void 0,o(454305).A),b=(0,r().K8)((()=>s||"suggest"===o(77246).Uv.getMode(t)||(0,o(600871).aD)(f)),[s,t,f]),C=(0,r().K8)((()=>t.getCover()),[t]),A=(0,r().O$)(m().A),[M,I]=(0,n.useState)(void 0);if(!C)return null;const j=A.loadingMode!==p().pF&&A.loadingMode!==p().Wc;return(0,S.jsx)(o(801678).A,{mouseStore:y,onFlushTemporaryPosition:e=>function(e,t,o){const{imagePosition:n,reset:i}=e;c().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:o,canUndo:!0,perform:e=>{a().yY({store:t,coverPosition:n,transaction:e}),i()}})}(e,t,h),renderControl:e=>{let{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:i,isVisible:r,isRepositioning:s}=e;return(0,S.jsx)(w,{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:i,isVisible:r,isRepositioning:s,lastProxiedUrl:M,store:t,disabled:b,paddingRight:l,paddingLeft:d,mouseStore:y})},source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:u,maxHeight:280,cursor:"default"},preventClickPropagation:!0,render:e=>(0,S.jsxs)(n.Fragment,{children:[(0,S.jsx)(o(360083).A,{url:C.cover,isAuthenticated:!0,permissionRecord:C.pointer,width:g,onFinishedLoadingProxyUrl:I,render:(t,o)=>{const n={width:"100%",height:u,maxHeight:280,objectFit:"cover",opacity:j?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},i={width:"100%",height:u,maxHeight:280};return(0,S.jsx)(x,{src:o,placeholderSrc:j?A.dataURL:void 0,placeholderBehavior:j?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:i,imageStyle:n,onLoadComplete:k,testId:"pageCover"})}}),j&&(0,S.jsxs)("div",{style:v().fd,children:[(0,S.jsx)(o(331542).A,{size:"md",style:{marginRight:4}}),(0,S.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:void 0!==A.uploadProgress?(0,S.jsx)(o(773382).A,{percentage:A.uploadProgress}):A.progressText?(0,S.jsx)("span",{children:A.progressText}):null})]})]})})};function k(){m().A.reset()}function w(e){let{isVisible:t,isRepositioning:o,handleCancelClick:a,handleRepositionClick:c,handleSavePositionClick:v,lastProxiedUrl:y,store:b,disabled:x,paddingRight:A,paddingLeft:k,mouseStore:w}=e;const M=(0,i().v3)(),I=(0,s().tz)(),j=(0,n.useCallback)((e=>function(e,t,o,n,i){i.reset();const r=e.target.getBoundingClientRect();l().W({environment:t,intl:o,store:n,rect:r,from:"page_header"})}(e,M,I,b,w)),[M,I,b,w]),T=(0,r().K8)((()=>m().A.state.loadingMode),[]),P=(0,r().K8)((()=>function(e){let t;return t=Boolean(e.isFullWidth())?"100%":d().x6,t}(b)),[b]),{device:B}=M,D=(0,r().O$)(u().e);if(x||T!==p().pF||!D)return null;const{isMobile:L}=B;return(0,S.jsx)(h().A,{animate:{width:P,opacity:t?1:0},style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,S.jsxs)(g().A,{isVisible:t,position:"bottom",style:{marginRight:A,marginLeft:k},children:[!o&&(0,S.jsx)(f().A,{style:{borderRight:L?"none":void 0,...C().k},onClick:j,children:(0,S.jsx)(s().sA,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!o&&!L&&(0,S.jsx)(f().A,{style:{...C().k,borderRight:"none"},onClick:e=>c(e,y),children:(0,S.jsx)(s().sA,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),o&&!L&&(0,S.jsx)(f().A,{style:C().k,onClick:v,children:(0,S.jsx)(s().sA,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),o&&!L&&(0,S.jsx)(f().A,{style:{...C().k,borderRight:"none"},onClick:a,children:(0,S.jsx)(s().sA,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})}},551619:(e,t,o)=>{o.d(t,{Hy:()=>B,NV:()=>T,O9:()=>L,Rg:()=>D,Sm:()=>_,dK:()=>W,f7:()=>R,l8:()=>E,n$:()=>F,no:()=>V,sx:()=>P});var n=()=>o(402014),i=()=>o(484714),r=()=>o(792485),s=()=>o(56366),a=()=>o(700500),l=()=>o(651124),c=()=>o(519831),d=()=>o(620689),u=()=>o(591197),p=()=>o(835066),m=()=>o(780054),g=()=>o(964345),h=()=>o(68465),f=()=>o(504836),v=()=>o(478726),y=()=>o(747100),b=()=>o(963589),S=()=>o(665579),x=()=>o(765957),C=()=>o(525569),A=()=>o(217429),k=()=>o(375447),w=()=>o(66496),M=()=>o(548821),I=()=>o(712505),j=()=>o(302022);function T(e){(0,n().SQ)({event:e,context:n().y$.EditorMouseDown,callback:()=>{}})}function P(e){(0,n().SQ)({event:e,context:n().y$.Click,callback:()=>{}})}function B(e){return(0,s().K8)((()=>Boolean(j().A.state.pageMap[e.id])||w().A.state.pages.has(e.id)),[e.id])}function D(e,t){const o=(0,i().v3)(),n=(0,r().S)(),a=B(e),l=(0,s().K8)((()=>{var o,n;return t===M().Rr.Frame?Boolean(null===(o=x().default.state.currentLoadingContainerStore)||void 0===o?void 0:o.state.ready):t===M().Rr.PeekView&&I().default.state.open?Boolean(null===(n=I().default.state.loadingContainerStore)||void 0===n?void 0:n.state.ready):t===M().Rr.CollectionPageView||t===M().Rr.CollectionPageViewFullScreen?e.isReady():void 0}),[t,e]),c=R(e);return(0,s().K8)((()=>{if(!l)return!1;const t=o.currentUser.isLoggedIn(),i=n&&n.publicEditModeStore.state;return Boolean(e&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=i&&i.hasPublicPermission)||"edit"===(null==i?void 0:i.permission))&&!a&&!c&&(!(0,h().ZE)(i)||"completionPopup"!==C().default.state.type))}),[o.currentUser,c,l,n,a,e])}function L(e,t){const o=(0,i().v3)(),n=(0,r().S)(),{isTablet:a}=(0,i().Y0)(),l=(0,b().X)("tablet_refresh_template_pills_gate");return(0,s().K8)((()=>{if(t===M().Rr.SitePreview)return!1;if(m().A.isMobile&&(!a||!l))return!1;if(!o.currentUser.isLoggedIn())return!1;const i=n&&n.publicEditModeStore.state;if(null!=i&&i.hasPublicPermission&&"edit"!==(null==i?void 0:i.permission))return!1;if(e.getContentLength()>1)return!1;if(!e.canEdit()||e.isNonEditableState())return!1;const r=e.getContentStores()[0];if(r&&!r.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const s=g().gZ.state,c=g().Di.state;if(s&&e.id===c)return!1;return!((0,v().L5)(t)?u().VY.state:u().u3.state)}),[o,n,e,t,a,l])}function R(e){return(0,s().K8)((()=>{if(e.isCollectionView()){const t=e.getCollectionStoreIfSingleSource();return!!t&&t.isSyncedCollection()}return e.isType(a().xd.externalObjectInstancePage)}),[e])}function _(e){return(0,s().K8)((()=>{if(!(0,f().vL)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===c().Vl){return!!t.getFormatStore().getKeyStore("external_collection_type").getValue()}return!1}),[e])}function W(e){return(0,s().K8)((()=>{if(!(0,f().pB)())return!1;var t;return!!e.isCollectionView()&&((null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("external_collection_type").getValue())??!1)}),[e])}function E(e){return(0,s().K8)((()=>{if(!A().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"}))return!1;var t;return!!e.isCollectionView()&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("static_import_collection_type").getValue())===l().IE.CsvImport}),[e])}function F(e){const t=(0,i().v3)(),{device:o,WindowSizeStore:n}=t,r=(0,s().K8)((()=>{const e=n.state.height,o=m().A.isMobile&&k().Ay.state.open?e:0;return d().C6(t)+o}),[t,n]);return(0,s().K8)((()=>"home-phone"===e?S().q3:o.isTablet?380:o.isIOS?Math.max(350,r):m().A.isMobile?400:"side-peek"===e||"center-peek"===e?y().ln:"home"===e?S().wH:"30vh"),[o,r,e])}function V(e){const t=(0,i().v3)(),o=(0,s().K8)((()=>(0,p().dC)(t,e)),[t,e]);return(0,s().K8)((()=>o&&!e.isFullWidth()?(0,p().Zy)(t,(0,y().cq)(e),(0,y().RX)(e)):0),[t,o,e])}},555267:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),i=()=>o(401497),r=()=>o(62856),s=()=>o(331542),a=o(474848);function l(e){let{loadingMessage:t}=e;const o=(0,i().DP)(),l=(0,r().A)(!0,400);return(0,a.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:l?(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(s().A,{}),t?(0,a.jsx)("div",{style:{marginLeft:8,color:o.text.secondary},children:t}):void 0]}):void 0})}},563015:(e,t,o)=>{o.d(t,{eJ:()=>h,ew:()=>g,ml:()=>d,rA:()=>p,yI:()=>m,zf:()=>u});o(581454);var n=()=>o(496603),i=()=>o(534177),r=()=>o(708685),s=()=>o(145076),a=()=>o(349835),l=()=>o(977345);function c(e){switch(e){case"checkbox":return"boolean";case"number":return"number";case"text":return"text";case"date":return"date";case"array":return"array";case"block":return"block";case"person":return"person";case"select":return"select";case"function":return"function";case"unknown":return"unknown";case"undefined":return"undefined";default:(0,i().HB)(e)}}function d(e){switch(e.type){case a().M9.InvalidCharacter:return{...s().x0.InvalidCharacter,values:{errorCharacter:e.character}};case a().M9.UnclosedStringLiteral:return s().x0.UnclosedStringLiteral;case a().M9.UnclosedComment:return s().x0.UnclosedComment;case a().M9.TokenExpected:return{...s().x0.TokenExpected,values:{expectedToken:e.token}};case a().M9.StringLiteralContainsToken:return s().x0.StringLiteralContainsToken;case a().M9.ExpressionExpected:return s().x0.ExpressionExpected;case a().M9.PropertyTokenOrFunctionExpected:return s().x0.PropertyTokenOrFunctionExpected;case a().M9.EndOfInputExpected:return s().x0.EndOfInputExpected;case a().M9.UnexpectedError:return s().x0.UnexpectedError;case a().M9.TooDeeplyNested:return s().x0.TooDeeplyNested;default:(0,i().HB)(e)}}function u(e){switch(e.type){case a().IA.FunctionCallArgumentWrongType:case a().IA.FunctionCallUnexpectedArgument:return e.argument;default:return e.node}}function p(e,t){let o;switch(t.type){case a().IA.ThisRowTypeNotFound:o=s().Xz.ThisRowTypeNotFound;break;case a().IA.ThisRowNotBlockWithCollection:o=s().Xz.ThisRowNotBlockWithCollection;break;case a().IA.MissingPropertyOnThisRow:o={...s().Xz.MissingPropertyOnThisRow,values:{propertyName:t.property}};break;case a().IA.MissingContextVariable:{const e=(0,l().ix)(t.token)?t.token.contextValueId:t.token.valueId;o={...s().Xz.MissingContextVariable,values:{valueId:e}}}break;case a().IA.MissingBlock:o={...s().Xz.MissingBlock,values:{blockId:t.token.blockId}};break;case a().IA.CallingNotFunction:o={...s().Xz.CallingNotFunction,values:{expressionType:c(t.callee.type.type)}};break;case a().IA.FunctionCallTooFewArguments:o={...s().Xz.FunctionCallTooFewArguments,values:{minNumParameters:t.minNumParameters,functionName:t.libraryFunction.name,numArguments:t.numArguments}};break;case a().IA.FunctionCallUnexpectedArgument:o={...s().Xz.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case a().IA.FunctionCallArgumentWrongType:o={...s().Xz.FunctionCallArgumentWrongType,values:{argumentType:c(t.argument.type.type),functionName:t.libraryFunction.name}};break;case a().IA.MemberPropertyMismatchCollection:o={...s().Xz.MemberPropertyMismatchCollection,values:{propertyName:t.token.property}};break;case a().IA.MemberPropertyMissing:o={...s().Xz.MemberPropertyMissing,values:{propertyName:t.property}};break;case a().IA.MemberPropertyTargetNotBlock:o=s().Xz.MemberPropertyTargetNotBlock;break;case a().IA.MemberPropertyTypeInvalid:o={...s().Xz.MemberPropertyTypeInvalid,values:{propertyName:t.propertyName,propertyType:t.propertyType}};break;case a().IA.UndefinedIdentifier:o={...s().Xz.UndefinedIdentifier,values:{identifier:t.node.text}};break;case a().IA.UnifiedFunctionCannotFindFunction:o={...s().Xz.UnifiedFunctionCannotFindFunction,values:{functionName:t.name}};break;case a().IA.UnifiedFunctionNoArguments:o={...s().Xz.UnifiedFunctionNoArguments,values:{functionName:t.libraryFunction.name}};break;case a().IA.UnifiedFunctionTargetWrongType:o={...s().Xz.UnifiedFunctionTargetWrongType,values:{functionName:t.libraryFunction.name,targetType:c(t.expression.type.type)}};break;case a().IA.CannotRelativelyCompareTypes:o={...s().Xz.CannotRelativelyCompareTypes,values:{lhsType:c(t.lhsType.type),rhsType:c(t.rhsType.type)}};break;case a().IA.CannotDoMathOnType:o={...s().Xz.CannotDoMathOnType,values:{lhsType:c(t.lhsType.type),rhsType:c(t.rhsType.type)}};break;case a().IA.UnaryMinusOnNonNumber:o={...s().Xz.UnaryMinusOnNonNumber,values:{type:c(t.expression.type.type)}};break;case a().IA.IdentifierExpected:o=s().Xz.IdentifierExpected;break;case a().IA.FunctionCallExpected:o={...s().Xz.FunctionCallExpected,values:{functionName:t.functionName}};break;case a().IA.RenamedIdentifier:o={...s().Xz.RenamedIdentifier,values:{identifier:t.identifier,renamedTo:t.renamedTo}};break;case a().IA.RemovedFunction:o={...s().Xz.RemovedFunction,values:{functionName:t.functionName,alternative:t.alternative}};break;case a().IA.ContextVariableNotBlockWithCollection:o={...s().Xz.ContextVariableNotBlockWithCollection,values:{valueId:t.token.contextValueId}};break;case a().IA.MissingPropertyOnContextVariable:o={...s().Xz.MissingPropertyOnContextVariable,values:{propertyName:t.property,valueId:t.token.contextValueId}};break;case a().IA.BlockPropertyTypeInvalid:o={...s().Xz.BlockPropertyTypeInvalid,values:{propertyName:t.propertyName}};break;case a().IA.DisallowedReturnType:{const n=t.allowedReturnTypes.map((t=>e.formatMessage((0,r().getHumanReadableType)(t)).toLocaleLowerCase()));o={...s().Xz.DisallowedReturnType,values:{allowedReturnType:e.formatList(n,{style:"long",type:"conjunction"}),allowedReturnTypeCount:t.allowedReturnTypes.length,returnType:e.formatMessage((0,r().getHumanReadableType)(t.returnType)).toLocaleLowerCase()}};break}case a().IA.CrossSpacePropertyNotSupported:o={...s().Xz.CrossSpacePropertyNotSupported};break;default:(0,i().HB)(t)}return{...o,values:{...o.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}}function m(e,t){let o;switch(t.type){case a().uW.MissingThisRow:o=s().X8.MissingThisRow;break;case a().uW.MissingSchemaPropertyOnThisRow:o={...s().X8.MissingSchemaPropertyOnThisRow,values:{propertyName:t.property}};break;case a().uW.ThisRowBlockPropertyMismatchCollection:o=s().X8.ThisRowBlockPropertyMismatchCollection;break;case a().uW.MissingContextVariable:o={...s().X8.MissingContextVariable,values:{valueId:t.valueId}};break;case a().uW.IdentifierNotFound:o={...s().X8.IdentifierNotFound,values:{identifier:t.node.text}};break;case a().uW.CannotRelativelyCompareTypes:o={...s().X8.CannotRelativelyCompareTypes,values:{lhsType:c(t.lhsType),rhsType:c(t.rhsType)}};break;case a().uW.CannotDoMathOnType:o={...s().X8.CannotDoMathOnType,values:{valueType:c(t.valueType)}};break;case a().uW.CannotCallNonFunction:o={...s().X8.CannotCallNonFunction,values:{calleeType:c(t.calleeType)}};break;case a().uW.UnifiedFunctionPropertyNotFound:o={...s().X8.UnifiedFunctionPropertyNotFound,values:{functionName:t.node.name}};break;case a().uW.LibraryFunctionExecutionError:const n=t.error instanceof a().x4?t.error:void 0;o=(null==n?void 0:n.info.type)===a().v3.DateInvalidDurationUnit?{...s().gW.DateInvalidDurationUnit,values:{functionName:t.libraryFunction.name,invalidUnit:n.info.invalidUnit}}:(null==n?void 0:n.info.type)===a().v3.CannotUseToNumberOnList?{...s().gW.CannotUseToNumberOnList}:(null==n?void 0:n.info.type)===a().v3.CannotRoundToNonInteger?{...s().gW.CannotRoundToNonInteger,values:{precision:n.info.precision}}:(null==n?void 0:n.info.type)===a().v3.CannotRoundToTooManyDecimalPlaces?{...s().gW.CannotRoundToTooManyDecimalPlaces,values:{precision:n.info.precision}}:{...s().X8.LibraryFunctionExecutionError,values:{functionName:t.libraryFunction.name}};break;case a().uW.FunctionCallTooFewArguments:o={...s().X8.FunctionCallTooFewArguments,values:{functionName:t.libraryFunction.name}};break;case a().uW.FunctionCallUnexpectedArgument:o={...s().X8.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case a().uW.FunctionCallArgumentWrongType:o={...s().X8.FunctionCallArgumentWrongType,values:{functionName:t.libraryFunction.name,argumentType:c(t.argumentType)}};break;case a().uW.AccessingPropertyOnNonBlock:o=s().X8.AccessingPropertyOnNonBlock;break;case a().uW.MissingDataDependencyBlock:o={...s().X8.MissingDataDependencyBlock,values:{blockId:t.blockPointer.id}};break;case a().uW.MissingDataDependencyPerson:o={...s().X8.MissingDataDependencyPerson,values:{personId:t.personPointer.id}};break;case a().uW.MemberPropertyMismatchCollection:o=s().X8.MemberPropertyMismatchCollection;break;case a().uW.MissingPropertyOnSchemaForMemberProperty:o=s().X8.MissingPropertyOnSchemaForMemberProperty;break;case a().uW.UnaryMinusOnNonNumber:o={...s().X8.UnaryMinusOnNonNumber,values:{expressionType:c(t.expressionType)}};break;case a().uW.UnexpectedRecoveryNode:o=s().X8.UnexpectedRecoveryNode;break;case a().uW.UnexpectedError:o=s().X8.UnexpectedError;break;case a().uW.DepthExceeded:o=s().X8.DepthExceeded;break;case a().uW.CycleDetected:o=s().X8.CycleDetected;break;case a().uW.DownstreamParseFailure:o=s().X8.DownstreamParseFailure;break;case a().uW.MaxEvaluationTimeExceeded:o=s().X8.MaxEvaluationTimeExceeded;break;case a().uW.MissingSchemaPropertyOnCollection:o={...s().X8.MissingSchemaPropertyOnCollection,values:{collectionId:t.collectionId,propertyName:t.property}};break;case a().uW.ContextVariableWrongType:o={...s().X8.ContextVariableWrongType,values:{expectedType:t.expectedType,propertyType:t.resultType,valueId:t.valueId}};break;case a().uW.DisallowedValueType:{const n=t.allowedValueTypes.map((t=>e.formatMessage((0,r().getHumanReadableType)(t)).toLocaleLowerCase()));o={...s().Xz.DisallowedReturnType,values:{allowedValueType:e.formatList(n,{style:"long",type:"conjunction"}),allowedValueTypeCount:t.allowedValueTypes.length,valueType:e.formatMessage((0,r().getHumanReadableValueType)(t.expressionValue)).toLocaleLowerCase()}};break}default:(0,i().HB)(t)}return(0,l().li)(t)?{...o,values:{...o.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}:o}function g(e){const t=null==e?void 0:e.values;return[n().cJ(e,"values"),t]}function h(e){return e.type===a().uW.DepthExceeded||e.type===a().uW.CycleDetected||e.type===a().uW.MaxEvaluationTimeExceeded||e.type===a().uW.LibraryFunctionExecutionError}},567121:(e,t,o)=>{o.d(t,{EG:()=>s,K5:()=>r,RH:()=>i,Yi:()=>a,ls:()=>n});const n=32,i=202,r=1e3,s="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",a="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},569397:(e,t,o)=>{o.d(t,{C:()=>i});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.12 3.05 11.76 9.9",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M9.372 3.238a.625.625 0 1 0-.884.884l3.253 3.253H2.75a.625.625 0 0 0 0 1.25h8.991l-3.253 3.253a.625.625 0 0 0 .884.884l4.32-4.32a.625.625 0 0 0 0-.884z"})},i=(0,o(340498).wt)("arrowStraightRightSmall",n)},577009:(e,t,o)=>{o.d(t,{rU:()=>p,QB:()=>r,hR:()=>c,pT:()=>l,JN:()=>u,i8:()=>s,Wt:()=>d,Sx:()=>a});var n=()=>o(645873);const i=new(n().O2)("notifications",(()=>Promise.all([o.e(75134),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(75078),o.e(25497),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(79928),o.e(52811),o.e(65351),o.e(36009),o.e(75840),o.e(38583),o.e(6893)]).then(o.bind(o,241637)))),r=(0,n()._h)(i,(e=>e.GetNotifiedFor)),s=(0,n()._h)(i,(e=>e.TopbarUpdatesMenu)),a=(0,n()._h)(i,(e=>e.UpdateSidebar)),l=(0,n()._h)(i,(e=>e.MobileInboxPopup)),c=(0,n()._h)(i,(e=>e.InboxActionsMenu)),d=((0,n()._h)(i,(e=>e.InboxNotificationSettingsButton)),(0,n()._h)(i,(e=>e.UnreadMentionsBadge))),u=(0,n()._h)(i,(e=>e.NotificationInboxPanelContent)),p=(0,n()._h)(i,(e=>e.AnimatedEmojiBadge))},578194:(e,t,o)=>{o.d(t,{r:()=>n});const n=(0,o(583835).Dv)("importEvernote")},591197:(e,t,o)=>{o.d(t,{VY:()=>a,ZJ:()=>r,u3:()=>s});var n=()=>o(496506);class i extends(()=>o(757695))().Store{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const r=new i,s=new(n().ComputedStore)((()=>!1!==r.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),a=new(n().ComputedStore)((()=>!1!==r.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},608581:(e,t,o)=>{o.d(t,{A:()=>u});o(898992),o(354520),o(581454),o(941795);var n=o(296540),i=()=>o(401497),r=()=>o(955825),s=()=>o(284371),a=()=>o(780054),l=()=>o(963575),c=o(474848);function d(e){const{button:t,isLast:o}=e,a=(0,i().IS)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:s().Wy.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return n.cloneElement(t,{...(0,r().AH)(t.props.style,a.button,o&&a.buttonLast),hoveredStyle:(0,r().AH)(a.buttonHovered,o&&a.buttonLast).style,pressedStyle:a.buttonPressed})}const u=function(e){let{children:t,isVisible:u,position:p,style:m}=e;const g=(0,i().IS)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.shadowSM,display:"flex",whiteSpace:"nowrap",borderRadius:l().A.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:a().A.isMobile?"auto":"none",opacity:a().A.isMobile?1:0,fontFamily:s().vc(o(662303).locale).sans,position:"absolute",right:l().A.horizontal.small,bottom:l().A.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:l().A.vertical.small,bottom:void 0}})),[]),h=n.Children.toArray(t).filter(o(534177).O9),f=h.length;return(0,c.jsx)(o(145214).A,{animate:{opacity:u?1:0},...(0,r().AH)(g.container,m,u&&g.containerHover,"top"===p&&g.containerTop),children:h.map(((e,t)=>{const i=t===f-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===o(859428).A&&n.isValidElement(e))return n.cloneElement(e,{render:(t,o)=>{const n=e.props.render(t,o);return(0,c.jsx)(d,{isLast:i,button:n},e.key)}});if(e.type===o(704152).A&&n.isValidElement(e))return(0,c.jsx)(d,{isLast:i,button:e},e.key)}}))})}},612900:(e,t,o)=>{o.d(t,{u:()=>r});var n=()=>o(645873);const i=new(n().O2)("PulsingWrapper",(async()=>o.e(45248).then(o.bind(o,673962)))),r=(0,n().jQ)(i,(e=>e.PulsingWrapper),{renderLoading:(e,t)=>t.children})},659799:(e,t,o)=>{o.d(t,{A:()=>l});o(296540);var n=()=>o(401497),i=()=>o(284371),r=()=>o(962730),s=()=>o(859428),a=o(474848);function l(e){let{text:t,tooltipText:o,icon:l}=e;const c=(0,n().IS)((e=>({icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.icon.secondary,marginBottom:"0.1em"},tooltip:{background:e.contentBackground,boxShadow:e.shadowSM},container:{display:"flex",alignItems:"center",fontWeight:i().Wy.regular,color:e.text.secondary,fontSize:i().J.UISmall.desktop,textAlign:"center"},text:{display:"inline"}})),[]);return(0,a.jsx)(s().A,{style:c.tooltip,render:e=>(0,a.jsx)("div",{style:c.text,...e,children:t}),renderTooltip:()=>(0,a.jsxs)("div",{style:c.container,children:[l(c.icon),(0,a.jsx)("div",{children:o})]}),alignment:r().C.Start,placement:r().W.Bottom})}},665579:(e,t,o)=>{o.d(t,{$L:()=>a,BZ:()=>d,EC:()=>g,EI:()=>S,E_:()=>M,Ed:()=>p,Fq:()=>v,Lu:()=>C,Mk:()=>m,O0:()=>w,UO:()=>I,V$:()=>k,VQ:()=>h,Xx:()=>x,Xy:()=>c,YS:()=>f,_g:()=>b,dd:()=>u,pW:()=>l,q3:()=>s,wH:()=>r});var n=()=>o(496603),i=()=>o(534177);const r=160,s=40,a=24,l=20,c=600,d=270,u=405,p=480,m=500,g=void 0,h=16,f=10,v=8,y=(o(69447).nh,{backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"}),b=4;function S(e){return{icon:e.icon.secondary,text:e.text.secondary}}function x(e){return{width:48,height:48,fill:e.icon.tertiary}}function C(e){let{theme:t,isPhone:o}=e;return o?t.personalHomeBackgroundPhone:t.surface.page}const A=1;function k(e){let{isPhone:t,theme:o}=e;return{zIndex:1,position:"relative",display:"flex",flexDirection:"column",borderRadius:12,background:o.home.tile.background,boxShadow:M({isPhone:t,theme:o}),...y}}function w(e){let{mode:t}=e;switch(t){case"dark":return 0;case"light":return A;default:return(0,i().ub)(t),0}}function M(e){let{isPhone:t,theme:o,borderOnly:i}=e;if("dark"===o.mode)return"unset";o.mode;const r=w({mode:o.mode});return(0,n().oE)([i||t?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${r}px rgba(0, 0, 0, 0.05)`]).join(", ")}function I(e){const{isPhone:t,theme:o,borderOnly:n}=e;return{unhoveredBoxShadow:M({isPhone:t,theme:o,borderOnly:n}),hoveredBoxShadow:"light"===o.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):o.homeShadow.card.hovered}}},677195:(e,t,o)=>{o.d(t,{R:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("verificationCheck",{viewBox:"0 0 6 7",svg:(0,n.jsx)("path",{d:"M2.84245 6.11619C2.71116 6.30644 2.53392 6.40156 2.31072 6.40156C2.20131 6.40156 2.10066 6.37881 2.00875 6.33332C1.92123 6.28782 1.83589 6.21545 1.75274 6.11619L0.150985 4.25515C0.0503282 4.12694 0 3.99874 0 3.87053C0 3.73406 0.04814 3.61826 0.14442 3.52314C0.245077 3.42388 0.365427 3.37425 0.50547 3.37425C0.597374 3.37425 0.680525 3.39286 0.754923 3.43008C0.833698 3.46317 0.912473 3.52934 0.991247 3.6286L2.28446 5.21049L5.00875 1.07896C5.13129 0.892857 5.28446 0.799805 5.46827 0.799805C5.60394 0.799805 5.72648 0.841161 5.83589 0.923874C5.9453 1.00659 6 1.11618 6 1.25266C6 1.32297 5.98249 1.39327 5.94748 1.46358C5.91685 1.52975 5.88184 1.59178 5.84245 1.64968L2.84245 6.11619Z"})})},681810:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(867772).Ay)},701751:(e,t,o)=>{o.d(t,{p:()=>r});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.94 14.91 15.66",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 1 0 1.1 0z"}),(0,n.jsx)("path",{d:"M15.4 1.95a3.48 3.48 0 0 0-3.48 3.48v1.92H6.4a2.425 2.425 0 0 0-2.425 2.425v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.425 2.425 0 0 0 13.6 7.35h-.43V5.43a2.23 2.23 0 1 1 4.46 0v2.095a.625.625 0 1 0 1.25 0V5.43a3.48 3.48 0 0 0-3.48-3.48M5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},r=(0,o(340498).wt)("lockOpen",i)},735695:(e,t,o)=>{o.d(t,{Ay:()=>M,iZ:()=>A,vE:()=>C});var n=o(296540),i=()=>o(804773),r=()=>o(401497),s=()=>o(149375),a=()=>o(66913),l=()=>o(959013),c=()=>o(284371),d=()=>o(686526),u=()=>o(704152),p=()=>o(285790),m=()=>o(928600),g=()=>o(480095),h=()=>o(554509),f=()=>o(780054),v=()=>o(722872),y=()=>o(253579),b=()=>o(255824),S=o(474848);const x=(0,l().YK)({back:{defaultMessage:"Back",id:"collectionsSettingsMenu.back"}}),C=290,A=400;function k(e){let{children:t,title:o,desktopTitleType:n,settingsStackLength:i,handleClose:d,handleBackArrowClick:m,hideDesktopHeader:g,hasBackStack:f}=e;const v=(0,b().a)(),y=(0,l().tz)(),C=(0,r().IS)((e=>({hiddenDesktopHeaderDiv:{height:0},nonHiddenDesktopHeaderDiv:{display:"flex",alignItems:v?"top":"center",padding:v?"0px 14px 6px 14px":"14px 16px 6px 16px",height:v?void 0:42},arrowButton:{marginRight:8,marginLeft:-2,height:22},arrowIcon:{width:16,height:16},title:{flexGrow:1,fontWeight:v?c().Wy.medium:c().Wy.semibold,fontSize:v?16:14,lineHeight:v?"24px":void 0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},closeButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:18,height:18,flexShrink:0},closeButtonHover:{background:e.buttonPressedBackground},closeIcon:{width:14,fill:e.text.secondary}})),[v]),A=!v;return(0,S.jsxs)(S.Fragment,{children:[g?(0,S.jsx)("div",{style:C.hiddenDesktopHeaderDiv}):(0,S.jsxs)("div",{style:C.nonHiddenDesktopHeaderDiv,children:[(i>1||f)&&(0,S.jsx)(p().A,{icon:s().v,style:C.arrowButton,iconStyle:C.arrowIcon,onClick:m,ariaLabel:y.formatMessage(x.back)}),"sectionHeader"===n?(0,S.jsx)(h().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",customStyles:{flexGrow:1},children:o}):(0,S.jsx)("span",{style:C.title,children:o}),A&&(0,S.jsx)(u().A,{onClick:d,style:C.closeButton,hoveredStyle:C.closeButtonHover,children:(0,a().V)(C.closeIcon)})]}),t]})}function w(e,t){let{children:r,footer:s,header:a,unconstrainedWidth:l,desktopWidth:c,title:u,desktopTitleType:p,collectionSettingsStore:h,fullHeight:x,hideDesktopHeader:A,menuScrollerStyle:w,innerContentWrapperStyle:M,disableScroller:I,handleBackArrowClick:j,hasBackStack:T,handleClose:P}=e;const B=(0,o(175116).Ks)(),D=(0,v().Tf)(),L=(0,b().a)(),{currentTab:R,settingsStackLength:_,hideHeader:W}=(0,o(56366).K8)((()=>{const e=h.state;return{currentTab:(0,o(940371).S)(h),settingsStackLength:e.stack.length,hideHeader:e.hideSettingsHeader}}),[h]),E=(0,n.useCallback)((()=>{var e;j?j():d().yl({collectionSettingsStore:h,keepPreviousRef:"form_editor"===(null==B||null===(e=B.collectionViewStore())||void 0===e?void 0:e.getType())})}),[j,h,B]),F=(0,n.useCallback)((e=>{P?P(e):d().os({collectionSettingsStore:h})}),[P,h]),V=(0,n.useCallback)((e=>{(0,y().rW)(e.target)||(0,y().iX)(e.target)||(0,y().u2)(e.target)||o(263711).g.state.isOpen||F(e)}),[F]);if(!R)return null;let N;if(f().A.isMobile)N={disableScroller:I,menuType:v().gu.Modal,title:u,left:_>1?(0,S.jsx)(g().MobileModalBackButton,{}):void 0,onClickLeft:_>1?E:void 0,scrollerStyle:w,innerRef:t,right:D?void 0:(0,S.jsx)(g().DoneMenuText,{}),onClickRight:D?void 0:F};else{const e=l||c?void 0:L?280:C;N={disableScroller:I,menuType:v().gu.Popup,minWidth:L?280:C,width:c,maxHeight:x?"100%":"80vh",...e&&{maxWidth:e},onClickOutside:V,scrollerStyle:{flexGrow:0,...w},header:!W&&(0,S.jsx)(k,{settingsStackLength:_,handleClose:F,handleBackArrowClick:E,hasBackStack:T,hideDesktopHeader:A,title:u,desktopTitleType:p,children:a}),paddingTop:W?6:0,footer:s,innerRef:t}}const O=(0,S.jsxs)(S.Fragment,{children:[f().A.isMobile&&a,r,f().A.isMobile&&s]});return x?(0,S.jsx)(i().Y,{direction:"vertical",children:(0,S.jsx)(m().A,{...N,children:O})}):(0,S.jsx)(o(297872).A,{capture:!0,allowMobileAutoScroll:!0,allowEsc:!0,render:e=>(0,S.jsx)(i().Y,{direction:"vertical",children:(0,S.jsx)(m().A,{...N,...e,children:(0,S.jsx)("div",{style:M,children:O})})})})}const M=(0,n.forwardRef)(w)},735790:(e,t,o)=>{o.d(t,{M:()=>r});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.25 15.25 11.5",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M3 7.375h6.829a2.501 2.501 0 0 0 4.842 0H17a.625.625 0 1 0 0-1.25h-2.329a2.501 2.501 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25M12.25 5.5a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M7.75 15.75a2.5 2.5 0 0 0 2.421-1.875H17a.625.625 0 1 0 0-1.25h-6.829a2.5 2.5 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25h2.329A2.5 2.5 0 0 0 7.75 15.75m0-1.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})]})},r=(0,o(340498).wt)("sliders",i)},739135:(e,t,o)=>{o.d(t,{KD:()=>c,gt:()=>d,i9:()=>l,ll:()=>s,tb:()=>a,x$:()=>r});var n=()=>o(541235),i=()=>o(496603);function r(e,t){return s(d(e,t))}function s(e){return void 0!==e&&(e===n().q_||e===n().YD)}function a(e,t){if(s(t))return;const o=n().c$[e],i=o.steps.findIndex((e=>e.id===t));return-1===i?o.steps[0].id:i===o.steps.length-1?n().q_:o.steps[i+1].id}function l(e,t){const o=d(e,t);if(o&&!s(o))return a(t,o)}function c(e,t){const o=d(e,t);if(o)return function(e,t){const o=n().c$[e];var r;if(s(t))return null===(r=(0,i().HV)(o.steps))||void 0===r?void 0:r.id;const a=o.steps.findIndex((e=>e.id===t));return-1!==a&&0!==a?o.steps[a-1].id:void 0}(t,o)}function d(e,t){var o;if(!e)return;const i=((null===(o=e.getSettings())||void 0===o?void 0:o.tutorials)||{})[t];return void 0===i?n().c$[t].steps[0].id:i}},742117:(e,t,o)=>{o.d(t,{V:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("chevronRight",{viewBox:"0 0 16 16",directional:!0,svg:(0,n.jsx)("path",{d:"M12.375 8.06445C12.375 7.83203 12.2861 7.63379 12.1084 7.45605L6.77637 2.24023C6.62598 2.08984 6.44141 2.01465 6.22266 2.01465C5.77832 2.01465 5.42285 2.35645 5.42285 2.80078C5.42285 3.01953 5.51172 3.21777 5.66211 3.375L10.4746 8.06445L5.66211 12.7539C5.51855 12.9043 5.42285 13.1025 5.42285 13.3213C5.42285 13.7725 5.77832 14.1143 6.22266 14.1143C6.44141 14.1143 6.62598 14.0391 6.77637 13.8887L12.1084 8.67285C12.293 8.49512 12.375 8.29688 12.375 8.06445Z"})})},747671:(e,t,o)=>{o.d(t,{Q:()=>n,a:()=>i});let n=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});class i extends(()=>o(757695))().Store{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}}},748539:(e,t,o)=>{o.d(t,{f:()=>n});const n=new(o(645873).O2)("pageCovers",(async()=>{const{pageCovers:e}=await o.e(40198).then(o.bind(o,519737));return e}))},756114:(e,t,o)=>{o.d(t,{D:()=>n});function n(e,t){t.route.name;return!1}},770176:(e,t,o)=>{o.d(t,{DU:()=>j,G7:()=>x,Jd:()=>w,Ln:()=>A,T9:()=>M,U6:()=>T,_S:()=>C,bD:()=>k,j1:()=>I,pN:()=>P});o(18107),o(967357),o(898992),o(430670),o(581454),o(737550),o(296540);var n=()=>o(764880),i=()=>o(8633),r=()=>o(601813),s=()=>o(179034),a=()=>o(824862),l=()=>o(519831),c=()=>o(197959),d=()=>o(798880),u=()=>o(919709),p=()=>o(220719),m=()=>o(959013),g=()=>o(496603),h=()=>o(534177),f=()=>o(972435),v=()=>o(731320),y=()=>o(765957),b=()=>o(630116),S=o(474848);function x(e){let{actor:t,environment:o}=e;return t.isBot()?2:o.currentUser.id===t.id?1:0}function C(e){const{authorStores:t,currentUserId:o}=e;if(!o||0===t.length)return{frontActorStore:void 0,backActorStore:void 0};const n=t.some((e=>e.id===o)),i=t.sort(((e,t)=>(e.id===o?1:0)-(t.id===o?1:0)));return{frontActorStore:i.at(0)||void 0,backActorStore:i.at(Math.max(1,i.length-(n?2:1)))||void 0}}function A(e){const{edits:t,rootStore:o}=e,n=g().Mp(t.flatMap((e=>e.authors||[])),g().n4),i=g().oE(n.map((e=>M(e,o))));return i.sort(((e,t)=>x({actor:e,environment:o.environment})-x({actor:t,environment:o.environment}))),i}function k(e,t){const{currentUserStore:o}=y().default.state,n=null==o?void 0:o.id;return(0,i().b)(f().A.getIntl(),e,n,t)}function w(e,t){return(0,S.jsx)("span",{children:(0,S.jsx)(m().sA,{defaultMessage:"<b>{author}</b>",id:"activitySection.authorPhrase.forOneAuthor.email",values:{author:e,b:e=>(0,S.jsx)("span",{style:t,children:e})}})})}function M(e,t){if(e.table===d().oo){const o=I(e.id,t);if(o)return(0,n().A7)(o)}else{const o=function(e,t){const o=(0,b().Oo)(t,{table:a().GP,id:e});return o.getValue()}(e.id,t);if(o)return(0,n().qt)(o)}}function I(e,t){return b().LU.createChildStore(t,{table:d().oo,id:e}).getValue()}function j(e){const{tab:t,recordId:o,recordType:n,rootStore:i,environment:r}=e;if("all"===t){if(!o)return!1;let e;return"block"===n?e=b().Bv.createChildStore(i,{table:s().ev,id:o}):"collection"===n?e=b().md.createChildStore(i,{table:l().Vl,id:o}):(0,h().HB)(n),(0,v().X9)(r,e)}return!1}function T(e){const{activity:t,rootStore:o}=e;if("commented"!==t.type)return;const n=o.getRecordModel({table:c().$Y,id:t.discussion_id,spaceId:t.space_id});if(!n)return;const i=P(n);return i?{id:n.id,context:i}:void 0}function P(e){const t=e.getPersistedContext(),o=t?(0,r().l8)({discussionContextData:t,discussionType:(0,p().o9)(e.getType()),discussionId:e.id,intl:f().A.getIntl()}):void 0;if(o)return(0,u().JJ$)(o,(t=>!(0,u().iQL)(t)||(0,u().Orm)(t)===e.id))}},775407:(e,t,o)=>{o.r(t),o.d(t,{Comment:()=>n().A,CommentFileBlock:()=>Re().A,Discussion:()=>i().A,DiscussionIndicator:()=>r().Ay,DiscussionInput:()=>s().A,DiscussionReactionBar:()=>re().tx,MOBILE_REACTION_PILL_STYLE_OVERRIDES:()=>re().ZR,MarginCommentsSection:()=>he,NewDiscussionMenu:()=>we,PropertyDiscussionIndicator:()=>S,REACTION_PILL_STYLE:()=>re().Of,ReactionBar:()=>re().Ay,ReplyDiscussionMenu:()=>Be,SuggestionContext:()=>Le().A,discussionHelpers:()=>J(),discussionViewActions:()=>_e(),reactionActions:()=>We()});var n=()=>o(325065),i=()=>o(1564),r=()=>o(886901),s=()=>o(640753),a=o(296540),l=()=>o(484714),c=()=>o(56366),d=()=>o(401497),u=()=>o(959013),p=()=>o(284371),m=()=>o(285790),g=()=>o(21140),h=()=>o(644914),f=()=>o(835066),v=o(474848);const y=(0,u().YK)({commentsAriaLabel:{defaultMessage:"{count, plural, one {1 comment} other {{count} comments}}",id:"comments.components.discussionindicator.commentAriaLabel"},suggestionsAriaLabel:{defaultMessage:"{count, plural, one {1 suggestion} other {{count} suggestions}}",id:"comments.components.discussionindicator.suggestionAriaLabel"},reactionsAriaLabel:{defaultMessage:"{count, plural, one {1 reaction} other {{count} reactions}}",id:"comments.components.discussionindicator.reactionsAriaLabel"}});function b(e){const t=(0,u().tz)(),{store:n,propertyId:i,style:r}=e,{showIndicator:s,formattedReactionCount:a,onlySuggestions:b,icon:S,showReactionsIcon:x,onlyHasDraftIndicator:C,formattedCommentCount:A,handleClick:k,discussionIsSelected:w,commentsCount:M,shouldShowDraftIndicator:I}=(0,o(257120).A)({store:n,recursivelyLoadAllDiscussions:!1,onlyCountBlockLevelDiscussions:!1,propertyId:i}),j=(0,d().IS)((e=>({iconButton:{background:w?e.selectLightGray[100]:void 0,gap:2},icon:{width:14,color:e.text.tertiary},commentCaptionStyle:{fontWeight:p().Wy.semibold,...I?{color:e.icon.tertiary}:{color:e.text.tertiary,marginBottom:1}},reactionCaptionStyle:{fontWeight:p().Wy.semibold,color:e.text.tertiary}})),[w,I]),T=(0,l().v3)(),P=(0,c().K8)((()=>(0,h().me)(T)),[T]),B=(0,c().K8)((()=>(0,f().dC)(T,n)),[T,n]),{isPropertyInPageDetails:D}=(0,o(517223)._1)({store:n,propertyId:i});return!s||!D&&(P||B)?null:(0,v.jsxs)(g().Ye,{style:r,children:[(M>0||C)&&(0,v.jsxs)(g().Ye,{style:{position:"relative"},children:[(0,v.jsx)(m().A,{ariaLabel:b?t.formatMessage(y.suggestionsAriaLabel,{count:A}):t.formatMessage(y.commentsAriaLabel,{count:A}),icon:S,style:j.iconButton,iconStyle:j.icon,onClick:k,caption:A,captionStyle:j.commentCaptionStyle}),I&&(0,v.jsx)(o(359848).h,{customTop:3,customLeft:16,onlyShowDraftDot:!0})]}),x&&(0,v.jsx)(m().A,{ariaLabel:t.formatMessage(y.reactionsAriaLabel,{count:a}),icon:o(650225).l,style:j.iconButton,iconStyle:j.icon,onClick:k,captionStyle:j.reactionCaptionStyle,caption:a})]})}const S=a.memo(b);var x=()=>o(145214),C=()=>o(478726),A=()=>o(747100),k=(o(581454),()=>o(496506)),w=()=>o(191772),M=()=>o(372154),I=()=>o(94953),j=()=>o(555776),T=()=>o(116008),P=()=>o(534177),B=()=>o(963589),D=(o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(430670),o(737550),()=>o(563884)),L=()=>o(715862),R=()=>o(798880),_=()=>o(61548),W=()=>o(125565),E=()=>o(659799),F=()=>o(709438),V=()=>o(38337),N=()=>o(299545),O=()=>o(907514),H=()=>o(765957),U=()=>o(217429),z=()=>o(630116),X=()=>o(938045),K=()=>o(811879);function $(e){let{discussionData:{groupedDiscussionsData:t,newDiscussionData:o,id:n},onClick:i}=e;const[r,s]=(0,a.useState)(!1),m=(0,l().v3)(),g=m.currentUser.id,h=(0,a.useCallback)((()=>{s(!0)}),[]),y=(0,a.useCallback)((()=>{s(!1)}),[]),b=o,S=(0,a.useCallback)((async e=>{if(b){const e=H().default.state.mainEditorCurrentBlockStore;j().A.setActiveWithSource("margin_comments"),await(0,X().x)({currentBlockStore:e,discussionInputStore:o.discussionInputStore,environment:m})}else if(t.length>0){const o=t[0].discussionStore;await i(e,o)}}),[b,t,null==o?void 0:o.discussionInputStore,m,i]),{commentStores:x,reactionStores:C}=(0,c().K8)((()=>{if(t){return{commentStores:t.flatMap((e=>(0,N().wc)(e.discussionStore))),reactionStores:t.flatMap((e=>z().Lk.getUserVisibleReactions(e.discussionStore)))}}return{commentStores:[],reactionStores:[]}}),[t]),A=(0,c().K8)((()=>{let e;if(b&&(e=o.parentBlockStore),t.length>0&&(e=t[0].parentBlockStore),!e)return;const n=x.map((e=>e.getCreatedById())).filter(P().O9),i=C.map((e=>e.getActorPointers().map((e=>e.id)))).flat().filter(P().O9);return Array.from(new Set([...n,...i,...b&&g?[g]:[]])).map((t=>z().LU.createChildStore(e,{table:R().oo,id:t}))).slice(0,5)}),[t,b,x,C,g,null==o?void 0:o.parentBlockStore]),k=(0,c().K8)((()=>{const e=x.map((e=>e.getLastEditedTime())),t=C.map((e=>e.getCreatedTime()));return Math.max(...e,...t)}),[x,C]),w=(0,B().X)("comment_sidebar_for_you"),M=(0,c().K8)((()=>{if(!w)return!1;const e=t.map((e=>e.discussionStore)),o=U().default.getConfigKey("assume_comment_read","last_seen_at");return e.some((e=>e.isUnread(o)))}),[t,w]),I=(0,d().IS)((e=>({discussion:{background:r?e.hoveredMarginDiscussionBackground:e.contentBackground,width:f().JC,display:"flex",cursor:"pointer",border:`1px solid ${e.stroke.secondary}`,borderRadius:10,padding:"12px",alignItems:"center",gap:6},userAvatarsContainer:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row-reverse",marginRight:8},lastEditedTime:{margin:"1px 0px 0px 0px",whiteSpace:"normal",display:"flex",justifyContent:"center",alignItems:"center",color:e.text.tertiary,fontSize:12,lineHeight:"15px"},commentAuthorAvatarStyle:{borderRadius:20,position:"relative",userSelect:"none",WebkitUserSelect:"none",width:24,height:24,boxShadow:e.avatarBoxShadow,marginRight:-6},commentAuthorPlaceholderStyle:{width:20,height:20,borderRadius:20,marginRight:-3,position:"relative"},secondaryLabel:{fontSize:p().J.UISmall.desktop,whiteSpace:"normal",display:"flex",justifyContent:"center",alignItems:"center",lineHeight:"21px",marginLeft:0,marginTop:0,color:e.text.tertiary},expandIcon:{width:p().J.UISmall.desktop,height:p().J.UISmall.desktop,fill:e.text.tertiary,marginTop:1},expandDiv:{display:"flex",justifyContent:"center",alignItems:"center",marginLeft:0},unreadStatusDot:{display:"flex",alignItems:"center",marginRight:4,marginLeft:"auto"}})),[r]),T=(0,v.jsx)("div",{style:I.secondaryLabel,children:(0,v.jsx)(u().sA,{defaultMessage:"Draft",id:"marginComments.collapsed.draft.label"})}),$=(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{style:I.expandDiv,children:(0,L().e)(I.expandIcon)}),b?T:(0,v.jsx)("div",{style:I.secondaryLabel,children:(0,v.jsx)(u().sA,{defaultMessage:"Expand",id:"marginComments.collapsed.expand.label"})})]}),G=b?T:k&&(0,v.jsx)(W().A,{isSmall:!0,isSecondaryColor:!0,isMultiline:!0,style:I.lastEditedTime,children:(0,v.jsx)(E().A,{text:(0,O().nl)(k,{useUltraCompactFormat:!0}),tooltipText:(0,O().x$)(k),icon:D().k})});return(0,v.jsxs)("div",{style:I.discussion,onMouseEnter:h,onMouseLeave:y,onClick:S,className:V().OO1,children:[(0,v.jsx)("div",{style:I.userAvatarsContainer,children:null==A?void 0:A.map((e=>(0,v.jsx)(K().E,{authorStore:e,avatarSize:24,avatarStyle:I.commentAuthorAvatarStyle,placeholderStyle:I.commentAuthorPlaceholderStyle},e.id)))}),(0,v.jsx)(Y,{reactionCount:C.length,commentCount:x.length+(b?1:0)}),r?$:G,M&&(0,v.jsx)("div",{style:I.unreadStatusDot,children:(0,v.jsx)(F().m,{size:_().jd})})]})}function Y(e){const t=(0,d().IS)((e=>({commentCount:{fontSize:14,whiteSpace:"normal",marginLeft:0,color:e.text.primary,fontWeight:p().Wy.medium,lineHeight:"18px"},textPlaceholder:{background:e.lightDividerColor,height:14,width:81,borderRadius:4,marginLeft:4}})),[]);return e.commentCount>0?(0,v.jsx)("div",{style:t.commentCount,children:(0,v.jsx)(u().sA,{defaultMessage:"{numComments, plural, one {{numComments} comment} other {{numComments} comments}}",id:"marginComments.collapsed.numComments.count",values:{numComments:e.commentCount}})}):e.reactionCount>0?(0,v.jsx)("div",{style:t.commentCount,children:(0,v.jsx)(u().sA,{defaultMessage:"{numReactions, plural, one {{numReactions} reaction} other {{numReactions} reactions}}",id:"marginComments.collapsed.numReactions.count",values:{numReactions:e.reactionCount}})}):(0,v.jsx)("div",{style:t.textPlaceholder})}var G=()=>o(833744),Z=()=>o(862292),q=()=>o(441467),J=()=>o(369767);function Q(e){let{discussionData:{parentBlockStore:t,discussionInputStore:o},isVisible:n}=e;const i=(0,a.useRef)(null),r=(0,l().v3)(),u=(0,a.useCallback)((async()=>{const e=await Z().T.formulas.load();q().i5({environment:r,allowActionsWhileCommenting:!0,formulasModule:e})}),[r]),p=(0,c().K8)((()=>o.isEmpty()),[o]),m=(0,a.useCallback)((()=>{j().A.setActiveWithSource("margin_comments")}),[]),g=(0,a.useCallback)((()=>{j().A.resetActiveSource("margin_comments")}),[]),h=(0,a.useCallback)((()=>{p&&T().A.reset(),j().A.resetEditorActiveSources()}),[p]),y=(0,a.useCallback)((()=>{j().A.setHoverWithSource("margin_comments")}),[]),b=(0,a.useCallback)((()=>{j().A.resetHoverSource("margin_comments")}),[]),S=(0,a.useMemo)((()=>[`.${V().MUV}`]),[]),x=(0,c().K8)((()=>j().A.state.isActivelyComposing),[]),C=(0,c().K8)((()=>j().A.state.isHovered&&!j().A.state.isActivelyComposing),[]),A=Boolean(x||p);(0,G().L)({active:n&&A,closeHandler:h,ref:i,excludedSelectors:S,ignoreKeydown:!0});const k=(0,d().IS)((e=>({discussion:{borderRadius:10,...x?{boxShadow:e.shadowSM}:{border:`1px solid ${e.lightDividerColor}`},width:f().JC,background:e.selectedMarginDiscussionBackground,willChange:"transform",transition:"transform 200ms ease",transform:x?"translateX(-20px)":C?"translateX(-5px)":void 0},discussionInputContainer:{borderRadius:6,padding:"8px 0px 4px 12px",backgroundColor:C?e.hoveredMarginDiscussionBackground:void 0}})),[x,C]);return(0,v.jsx)("div",{style:k.discussion,ref:i,className:V().OO1,onMouseEnter:y,onMouseLeave:b,children:(0,v.jsx)(s().A,{parentStore:t,discussionInputStore:o,shouldSaveUnsentComments:!1,isMobileSlideUpMenu:!1,discussionFormat:J().DiscussionFormat.Margin,onSubmit:u,onCancel:h,isNewComment:!0,blockStore:t,canDrop:!0,showAvatar:!1,containerStyle:k.discussionInputContainer,showCtaButtons:!0,onFocus:m,onBlur:g})})}o(672577);var ee=()=>o(955825),te=()=>o(878523),oe=()=>o(112873),ne=()=>o(424746),ie=()=>o(404783),re=()=>o(138873);function se(e){let{discussionData:{discussionStore:t,parentBlockStore:o},timeMounted:n,onClick:r,isVisible:s,isDiscussionSelected:u,isDiscussionHovered:p}=e;const m=(0,a.useRef)(null),g=(0,l().v3)(),[h,y]=(0,a.useState)((()=>new(ie().A)(g,t.pointer.spaceId))),b=(0,B().X)("block_reactions"),S=t.id,x=(0,c().K8)((()=>t.getCommentStores().length>0),[t]),C=(0,c().K8)((()=>t.getReactionStores().length>0),[t]),A=(0,a.useMemo)((()=>[`.${(0,ee().wV)({discussionId:S})}`,`.${V().MUV}`,`.${V().OO1}`]),[S]),k=(0,a.useCallback)((async()=>{const e=ne().A.find((e=>e.isEditing()));if(e){if(!(await e.handleCancelEdit()))return}oe().xl()}),[]);(0,G().L)({active:s&&u,closeHandler:k,ref:m,excludedSelectors:A,ignoreKeydown:!0});const w=(0,a.useCallback)((async e=>{var o;u||(te().E9(g,{discussion_id:t.id,discussion_type:t.getType(),from:"margin_comments",parent_block_id:t.getParentId(),parent_collection_id:null===(o=t.getParentStore())||void 0===o?void 0:o.getParentCollectionIdUpToTwoLevels()}),await r(e,t))}),[r,t,u,g]),M=(0,d().IS)((e=>({discussion:{border:u?void 0:`1px solid ${e.lightDividerColor}`,borderRadius:10,padding:u?"1px":void 0,background:u?e.selectedMarginDiscussionBackground:p?e.hoveredMarginDiscussionBackground:e.contentBackground,boxShadow:u?e.shadowSM:void 0,width:f().JC,cursor:u?void 0:"pointer"},wrapper:{willChange:"transform",transition:"transform 200ms ease",transform:u?"translateX(-20px)":p?"translateX(-5px)":void 0}})),[p,u]);return(0,v.jsxs)("div",{className:V().OO1,ref:m,style:M.wrapper,onClick:w,children:[C&&b?(0,v.jsx)("div",{style:{width:f().JC},children:(0,v.jsx)(re().tx,{focused:u,parentStore:t,discussionLocation:"margin_comments"})}):void 0,x?(0,v.jsx)("div",{style:M.discussion,children:(0,v.jsx)(i().A,{store:t,blockStore:o,format:J().DiscussionFormat.Margin,isFirst:!1,isOnly:!1,showResolveButtonByDefaultIfPossible:!1,discussionLocation:"margin_comments",showAllRepliesAfterTimestamp:n,discussionInputStore:h,collapsed:!u})}):void 0]})}const ae=a.memo(se);function le(e){let{discussionData:{discussionStore:t,parentBlockStore:n},timeMounted:r,onClick:s,isVisible:u,isDiscussionSelected:p,isDiscussionHovered:m,onMouseEnter:g,onMouseLeave:h}=e;const y=(0,a.useRef)(null),b=(0,l().v3)(),[S,x]=(0,a.useState)((()=>new(ie().A)(b,t.pointer.spaceId))),C=(0,B().X)("block_reactions"),A=(0,B().X)("margin_comments_stepper"),k=t.id,w=(0,c().K8)((()=>t.getCommentStores().length>0),[t]),M=(0,c().K8)((()=>t.getReactionStores().length>0),[t]),I=(0,a.useMemo)((()=>[`.${(0,ee().wV)({discussionId:k})}`,`.${V().MUV}`,`.${V().OO1}`]),[k]),j=(0,a.useCallback)((async()=>{const e=ne().A.find((e=>e.isEditing()));if(e){if(!(await e.handleCancelEdit()))return}oe().xl()}),[]);(0,G().L)({active:u&&p,closeHandler:j,ref:y,excludedSelectors:I,ignoreKeydown:!0});const T=(0,a.useCallback)((async e=>{var o;p||(te().E9(b,{discussion_id:t.id,discussion_type:t.getType(),from:"margin_comments",parent_block_id:t.getParentId(),parent_collection_id:null===(o=t.getParentStore())||void 0===o?void 0:o.getParentCollectionIdUpToTwoLevels()}),await s(e,t))}),[s,t,p,b]),{pageSortedDiscussions:P,pageSortedUnreadDiscussions:D}=(0,o(487441).i)(),{discussionCount:L,currentPosition:R,isStepperVisible:_,handleMarkAllAsRead:W,handleStepToNextDiscussion:E,handleStepToPreviousDiscussion:F}=(0,o(970464).p)({discussionStore:t,pageSortedDiscussions:P,pageSortedUnreadDiscussions:D,isDiscussionSelected:p}),N=(0,d().IS)((e=>({discussion:{border:p?void 0:`1px solid ${e.lightDividerColor}`,borderRadius:10,padding:p?"1px":void 0,background:p?e.selectedMarginDiscussionBackground:m?e.hoveredMarginDiscussionBackground:e.contentBackground,boxShadow:p?e.shadowSM:void 0,width:f().JC,cursor:p?void 0:"pointer"},wrapper:{willChange:"transform",transition:"transform 200ms ease",transform:p?"translateX(-20px)":m?"translateX(-5px)":void 0},stepper:{display:"flex",justifyContent:"end",gap:4,opacity:_?1:0,transition:"opacity 250ms ease-in"},discussionItemAndStepperContainer:{display:"flex",flexDirection:"column",gap:10}})),[m,p,_]);return A?(0,v.jsxs)("div",{style:N.discussionItemAndStepperContainer,children:[_?(0,v.jsx)("div",{style:N.stepper,children:(0,v.jsx)(o(580546).U,{currentPosition:R,discussionCount:L,onMarkAllAsRead:W,onStepToPrevious:F,onStepToNext:E})}):void 0,(0,v.jsxs)("div",{ref:y,className:V().OO1,style:N.wrapper,onMouseEnter:g,onMouseLeave:h,onClick:T,role:"button",tabIndex:0,children:[M&&C?(0,v.jsx)("div",{style:{width:f().JC},children:(0,v.jsx)(re().tx,{focused:p,parentStore:t,discussionLocation:"margin_comments"})}):void 0,w?(0,v.jsx)("div",{style:N.discussion,children:(0,v.jsx)(i().A,{store:t,blockStore:n,format:J().DiscussionFormat.Margin,isFirst:!1,isOnly:!1,showResolveButtonByDefaultIfPossible:!1,discussionLocation:"margin_comments",showAllRepliesAfterTimestamp:r,discussionInputStore:S,collapsed:!p})}):void 0]})]}):(0,v.jsxs)("div",{className:V().OO1,ref:y,style:N.wrapper,onClick:T,role:"button",tabIndex:0,children:[M&&C?(0,v.jsx)("div",{style:{width:f().JC},children:(0,v.jsx)(re().tx,{focused:p,parentStore:t,discussionLocation:"margin_comments"})}):void 0,w?(0,v.jsx)("div",{style:N.discussion,children:(0,v.jsx)(i().A,{store:t,blockStore:n,format:J().DiscussionFormat.Margin,isFirst:!1,isOnly:!1,showResolveButtonByDefaultIfPossible:!1,discussionLocation:"margin_comments",showAllRepliesAfterTimestamp:r,discussionInputStore:S,collapsed:!p})}):void 0]})}const ce=a.memo(le);function de(e){const{discussionData:t,isLastItem:o,isDiscussionSelected:n,discussionItemElementMap:i}=e,r=(0,d().IS)((()=>({discussionContainer:{transition:t.hide?void 0:"opacity 200ms ease-in-out",top:t.offsetTop,position:"absolute",paddingBottom:o?f().t_:f().kH,zIndex:n?1:void 0,opacity:t.hide?0:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",pointerEvents:"auto"}})),[t.hide,t.offsetTop,n,o]);let s;const u=t.type,p=(0,l().v3)(),m=(0,c().K8)((()=>(0,f().$N)(p,t.parentBlockStore)),[p,t.parentBlockStore]),g=(0,B().X)("margin_comments_stepper"),h=(0,a.useCallback)((()=>{I().A.setState({source:"margin_comments",discussionIds:[t.id]})}),[t.id]),y=(0,a.useCallback)((()=>{I().A.setState({discussionIds:[]})}),[]),b=(0,a.useCallback)((e=>{i.set(t.id,e)}),[t.id,i]);m?"existing"===u?s=g?(0,v.jsx)(ce,{...e,onMouseEnter:h,onMouseLeave:y,discussionData:t}):(0,v.jsx)(ae,{...e,discussionData:t}):"new"===u?s=(0,v.jsx)(Q,{...e,discussionData:t}):"grouped"===u?s=(0,v.jsx)($,{...e,discussionData:t}):(0,P().HB)(u):s=null;return g&&"existing"===u?(0,v.jsx)("div",{style:r.discussionContainer,ref:b,children:s}):(0,v.jsx)("div",{style:r.discussionContainer,onMouseEnter:h,onMouseLeave:y,ref:b,children:s})}const ue=a.memo(de),pe=`.${w().iU}, .${w().F0}`;function me(e){let{pageBlockStore:t,timeMounted:n,isVisible:i,animating:r,pageViewBlockAccessor:s,width:u,context:p}=e;const m=(0,l().v3)(),g=(0,l().Y0)(),h=(0,a.useRef)(null),y=(0,a.useRef)(new Map),b=(0,a.useRef)(new Map),S=(0,c().K8)((()=>I().A.getFirstSelectedDiscussionId()),[]),x=(0,a.useCallback)((async(e,n)=>{(0,o(592678).Zm)()||e.target instanceof Element&&e.target.closest(pe)||await o(789557).DZ({discussionStore:n,currentBlockStore:t,environment:m,analyticsFrom:"margin_comments",currentEl:h.current})}),[t,m]),[A,w]=(0,a.useState)({data:[],hasNewDiscussion:!1,selectedDiscussion:void 0}),[P,B]=(0,a.useState)(!1),{WindowSizeStore:D}=m,L=o(175947).ek(m.device.isElectronMac);(0,a.useEffect)((()=>{if(!i)return;const e=new(k().ComputedStore)((()=>({selectableRectMap:o(666710).default.state.selectableRectMap,pageContentStores:t.getContentStores(),sidebarIsAnimating:o(737230).Ay.state.isAnimating,windowHeight:D.state.height})),{debugName:"effectDataStore"}),n=new(k().ComputedStore)((()=>f().Ob.state),{debugName:"discussionStoresStore"}),a=new(k().ComputedStore)((()=>{const e=T().A.state,t=T().A.getBlockStore(),n=T().A.getClosestBlockStore();if(e.open&&e.rect&&"comment"===e.content&&(t||n)&&(!t||o(489348).A.isBlockInFrame(t)&&!e.property_id))return{recomputeFocus:j().A.state.isActivelyComposing,blockStore:t??e.blockStore,discussionInputStore:e.discussionInputStore}}),{debugName:"newMarginDiscussionArgsStore"}),l=new(k().ComputedStore)((()=>{if(!j().A.state.isActivelyComposing)return M().A.getFramePageFirstSelectedDiscussionId();M().A.reset()}),{debugName:"selectedDiscussionIdStore"});let c=!1;const d=(0,o(496603).sg)((()=>{const{selectableRectMap:o,pageContentStores:i,sidebarIsAnimating:d,windowHeight:u}=e.state,m=n.state,v=a.state,S=l.state;if(r||d)return;const x=s();if(!(x&&h.current&&o&&o.size))return;(0,f().cY)({discussionStores:m,pageContentStores:i,marginDiscussionItemRefs:y.current,selectedDiscussionId:S,newMarginDiscussionArgs:v,marginContainerElement:h.current,pageViewBlockElement:x,onComputeComplete:(e,t)=>{c||(b.current=t,P||B(!0),w(e))},computedOnce:P,topbarHeight:L,windowHeight:u,isFullWidth:(0,C().Ck)(t,p,g),prevSelectedDiscussionId:A.selectedDiscussion,previousDiscussionElements:b.current})}),5);return e.addListener(d),n.addListener(d),l.addListener(d),a.addListener(d),()=>{c=!0,e.removeListener(d),n.removeListener(d),l.removeListener(d),a.removeListener(d)}}),[i,r,s,P,t,A.selectedDiscussion,D,L,m,p,g]);const R=(0,d().IS)((()=>({marginCommentsContainer:{display:"flex",flexDirection:"column",paddingTop:8,paddingBottom:8,paddingLeft:f().JR,paddingRight:f().JR,width:u-2*f().JR,flexShrink:0,height:"100%",position:"relative",pointerEvents:"none",zIndex:1}})),[u]);return(0,v.jsx)("div",{style:R.marginCommentsContainer,ref:h,children:A.data.map(((e,t)=>(0,v.jsx)(ue,{discussionData:e,timeMounted:n,onClick:x,isVisible:i,discussionItemElementMap:y.current,isDiscussionSelected:e.selected||"new"===e.type,isDiscussionHovered:e.id===S,isLastItem:t===A.data.length-1},`margin-discussion-${e.id}`)))})}const ge=a.memo(me);function he(e){let{pageBlockStore:t,isVisible:o,pageViewBlockAccessor:n,context:i,isCollapsedAnchor:r}=e;const[s,u]=(0,a.useState)(!1),p=(0,l().v3)(),m=(0,l().Y0)(),g=(0,a.useMemo)((()=>(new Date).getTime()),[]),h=(0,c().K8)((()=>{const e=(0,C().Ck)(t,i,m);return r?{paddingLeft:e?96:16,height:0}:e?void 0:{position:"absolute",right:(0,f().gg)(p,(0,A().cq)(t),(0,A().RX)(t))}}),[t,i,p,m,r]),y=(0,a.useCallback)((()=>{u(!0)}),[]),b=(0,a.useCallback)((()=>{u(!1)}),[]),S=(0,d().IS)((()=>({marginCommentsSection:{display:o||s?"flex":"none",flexShrink:0,pointerEvents:"none",width:o?f().Qb:0,...h}})),[o,s,h]);return(0,v.jsx)(x().A,{animate:{opacity:o?1:0},onAnimationStart:y,onAnimationEnd:b,style:S.marginCommentsSection,children:(0,v.jsx)(ge,{pageBlockStore:t,timeMounted:g,isVisible:o,animating:s,pageViewBlockAccessor:n,width:f().Qb,context:i})})}var fe=()=>o(297872),ve=()=>o(897119),ye=()=>o(13679);const be=function(e){const{capture:t,children:n}=e,i=(0,a.useRef)(null);return(0,o(790748).b)(o(536612).A,(()=>({getNode:()=>i.current,isCaptured:()=>t})),[t]),(0,v.jsx)("div",{ref:i,children:a.Children.only(n)})};var Se=()=>o(691298),xe=()=>o(962730),Ce=()=>o(377586),Ae=()=>o(574012);function ke(e){let{blockStore:t,discussionInputStore:o,handleDismiss:n}=e;const i=(0,l().v3)(),{device:r,WindowSizeStore:u}=i,p=(0,a.useCallback)((async()=>{const e=await Z().T.formulas.load();q().i5({environment:i,allowActionsWhileCommenting:!0,formulasModule:e})}),[i]),m=(0,c().K8)((()=>Ae().A.keyboardHeight()>0),[]),g=(0,c().K8)((()=>{const e=r.isAndroid?12:8;return{paddingLeft:u.getSafePaddingLeftCSS(12),paddingRight:u.getSafePaddingRightCSS(8),paddingBottom:m?e:u.getSafePaddingBottomCSS(e)}}),[u,m,r.isAndroid]),h=(0,d().IS)((()=>({inputWrapper:{width:r.isMobileNative?"100%":470,maxWidth:r.isMobileBrowser?"90vw":"100%",paddingTop:9,paddingLeft:g.paddingLeft,paddingRight:g.paddingRight,paddingBottom:g.paddingBottom}})),[r,g]);return(0,Se().A)({shouldPreserveTextSelection:!0,shouldPreserveBlockSelection:!0,shouldRestoreSelection:!0}),(0,v.jsx)(fe().A,{capture:!0,allowOpenLinkMenu:!0,render:()=>(0,v.jsx)(ye().A,{store:t,droppable:!0,render:()=>(0,v.jsx)(be,{capture:!0,children:(0,v.jsx)("div",{style:h.inputWrapper,children:(0,v.jsx)(s().A,{showAvatar:!0,parentStore:t,onCancel:n,onSubmit:p,discussionInputStore:o,isMobileSlideUpMenu:!0,shouldSaveUnsentComments:!1,discussionFormat:J().DiscussionFormat.Page,blockStore:t,canDrop:!0})})})},t.id)})}const we=function(){const e=(0,l().v3)(),t=(0,l().WS)(),n=(0,c().K8)((()=>T().A.state.rect),[]),i=(0,c().K8)((()=>{if(T().A.state.open&&"comment"===T().A.state.content){const{discussionInputStore:o}=T().A.state;if((0,h().me)(e))return null;if(T().A.updateRect(),j().A.state.isActivelyComposing){"comments_pane"===j().A.state.clickEntryPoint&&j().A.setActiveWithSource("popover_comments");const n=T().A.getBlockStore();var t;if(n)return{blockStore:n,discussionInputStore:o,canMarginCommentsRender:!(null!==(t=T().A.state)&&void 0!==t&&t.property_id)&&(0,f().$N)(e,n)}}}return null}),[e]),r=(0,a.useCallback)((()=>{const t=null==i?void 0:i.discussionInputStore;t&&(0,o(36088).M)({discussionInputStore:t,environment:e})}),[e,null==i?void 0:i.discussionInputStore]),s=(0,a.useCallback)((()=>{T().A.hasContent()?j().A.resetEditorActiveSources():i&&(0,o(681634).c)(e)}),[e,i]);(0,a.useEffect)((()=>{function t(t){const n=T().A.state,i=n.open&&"comment"===n.content&&n.discussionInputStore||void 0;i&&((0,o(405981).HR)({discussionInputStore:i,environment:e,discussionHelpers:J()}),t.preventDefault())}return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}}),[e]);const d=(0,c().K8)((()=>o(205682).A.state.isOpen),[]);return(0,c().K8)((()=>j().A.state.overlapsExistingDiscussionMenu),[])?null:(0,v.jsx)(ve().Ay,{popupType:t?Ce().n.SlideUp:Ce().n.Popup,keepFocus:!0,open:null!==i&&(!i.canMarginCommentsRender||d),originRect:n,placementToOrigin:xe().W.Bottom,alignmentToOrigin:xe().C.Center,originGap:4,onDismiss:s,render:()=>i?(0,v.jsx)(ke,{blockStore:i.blockStore,discussionInputStore:i.discussionInputStore,handleDismiss:s}):null,onAnimationEnd:r})};var Me=()=>o(928600),Ie=()=>o(722872),je=()=>o(347199),Te=()=>o(902731),Pe=()=>o(21510);const Be=function(){const e=(0,l().v3)(),t=(0,l().Y0)(),{open:o,rect:n,discussionLocation:i}=(0,c().K8)((()=>{const{open:e,rect:t}=Pe().A.state;return{open:e,rect:t,discussionLocation:Pe().A.state.open?Pe().A.state.discussionLocation:Pe().A.state.prevDiscussionLocation}}),[]),r=(0,B().X)("comment_sidebar_for_you"),{popupType:s,bottomSheetInitialState:a}=function(e){if(!e.device.isPhone)return{popupType:Ce().n.Popup,bottomSheetInitialState:void 0};if(e.enableForYouCommentSidebar||"post_top_level_discussion"===e.discussionLocation)return{popupType:Ce().n.BottomSheet,bottomSheetInitialState:"full"};return{popupType:Ce().n.SlideUp,bottomSheetInitialState:void 0}}({device:t,enableForYouCommentSidebar:r,discussionLocation:i});return(0,v.jsx)(ve().Ay,{popupType:s,bottomSheetInitialState:a,bottomSheetBackgroundColor:s===Ce().n.BottomSheet?"contentBackground":void 0,open:o,originRect:n,placementToOrigin:xe().W.Bottom,alignmentToOrigin:xe().C.Center,originGap:4,onDismiss:()=>Te().oU(e),render:()=>(0,v.jsx)(De,{}),trapFocus:!0})};function De(){const e=(0,l().v3)(),{device:t}=e,o=(0,c().O$)(Pe().A),n=(0,c().K8)((()=>Pe().A.state.open?Pe().A.state.discussionInputStore.state.textStore.getValue():null),[]);if((0,a.useEffect)((()=>{var e;if(o.open&&"post_top_level_discussion"===o.discussionLocation)return;const t=null===(e=je().A.MenuScroller)||void 0===e?void 0:e.getNode();null==t||t.scrollTo({top:t.scrollHeight})}),[n,o]),o.open){const{discussionStore:n,discussionInputStore:r,blockStore:s,discussionLocation:a}=o;let l;return l=t.isMobile?{menuType:Ie().gu.Modal,title:(0,v.jsx)(u().sA,{defaultMessage:"Comments",id:"discussion.mobileReplyMenu.title"}),right:(0,v.jsx)(u().sA,{defaultMessage:"Done",id:"discussion.mobileReplyMenu.closeButton.label"}),onClickRight:()=>Te().oU(e),whiteBackground:!0}:{menuType:Ie().gu.Popup,width:420,minHeight:"100px",maxHeight:"50vh",maxWidth:"100%"},(0,v.jsx)(Me().A,{className:V()._qG,...l,children:(0,v.jsx)(fe().A,{capture:!0,allowMobileAutoScroll:!0,render:()=>(0,v.jsx)(i().A,{store:n,discussionInputStore:r,onDismiss:()=>Te().oU(e),format:J().DiscussionFormat.Menu,isFirst:!0,isOnly:!0,showResolveButtonByDefaultIfPossible:!0,blockStore:s,collapsed:!1,..."post_top_level_discussion"===a?{pageVisitStore:void 0,presenceStore:void 0,discussionLocation:"post_top_level_discussion"}:{discussionLocation:a}})})})}return null}var Le=()=>o(798995),Re=()=>o(165492),_e=()=>o(245125),We=()=>o(528787)},801678:(e,t,o)=>{o.d(t,{A:()=>g});var n=o(296540),i=()=>o(662303),r=()=>o(56366),s=()=>o(959013),a=()=>o(381349),l=()=>o(496603),c=()=>o(284371),d=()=>o(720665),u=()=>o(145214),p=o(474848);const m={isRepositioning:!1};const g=function(e){const t=(0,n.useRef)(null),i=(0,o(484714).v3)(),[s,a]=(0,n.useState)(m),c=(0,n.useCallback)((()=>{a(m)}),[]),{renderControl:u,onFlushTemporaryPosition:g,style:f,source:v,store:y}=e,{isRepositioning:b,image:S,startDragRenderedPosition:x,startDragImageScreenHeight:C}=s,A=(0,r().K8)((()=>0===o(502438).default.state.stores.length),[]),[k,w]=(0,n.useState)(!1),M=(0,r().uB)(e.mouseStore,o(454305).A),I=(0,r().K8)((()=>M.state.mouseEntered),[M]),j=(0,o(401497).IS)((()=>({dragContainer:{width:"100%",cursor:b?"move":"inherit"},container:{position:"relative",width:"100%",zIndex:1}})),[b]),T=(0,r().K8)((()=>function(e,t,o){return(0,l().Et)(o)?o:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,l().Et)(e))return e}const o=.5;if(t.isCollectionView()){const e=t.getCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,d().pN)(t)?o:t}}const n=t.getFormat(),i=n.page_cover_position;if((0,l().Et)(i))return i;return o}(e,t)}(v,y,s.temporaryPosition)),[s.temporaryPosition,v,y]);(0,n.useEffect)((()=>{const e=e=>{const o=t.current;o&&!o.contains(e.target)&&b&&g({imagePosition:T,reset:()=>{M.reset(),c()}})};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)}),[T,b,M,g,c]),b&&!A&&c();const P=(0,n.useMemo)((()=>(0,l().nF)((e=>{M.setState({...M.state,mouseEntered:!0})}),100)),[M]),B=(0,n.useMemo)((()=>(0,l().sg)((e=>{M.setState({...M.state,mouseEntered:!1})}),100)),[M]),D=(0,n.useCallback)(((e,t)=>{o(778417).IU({environment:i});const n=new Image;n.onload=()=>{a((e=>({...e,isRepositioning:!0,image:n})))},t&&(n.src=t)}),[i]),L=(0,n.useCallback)((e=>{g({imagePosition:T,reset:()=>{c()}})}),[T,g,c]),R=(0,n.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,o(819121).p)(t)&&w(!0)}),[]),_=(0,n.useCallback)((()=>{w(!0)}),[]),W=(0,n.useCallback)((e=>{if(S&&b){const e=t.current;if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/S.width*S.height;a((e=>({...e,startDragImageScreenHeight:t,startDragRenderedPosition:T})))}}}),[S,T,b]),E=(0,n.useCallback)((e=>{if(b){const t=e.diffY/(C||0)+(x||0);a((e=>({...e,temporaryPosition:(0,l().LI)((0,o(40845).A)(t,0,1),4)})))}}),[b,C,x]),F=(0,n.useCallback)((()=>{a((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),V=(0,r().K8)((()=>u({handleRepositionClick:D,handleSavePositionClick:L,handleCancelClick:c,isVisible:I||k||b,isRepositioning:b})),[D,L,k,b,I,u,c]),N=(0,o(79043).A)(Boolean(e.preventClickPropagation));return(0,p.jsxs)("div",{ref:t,onFocus:R,onBlur:_,onMouseEnter:P,onMouseMove:P,onMouseLeave:B,...N,...(0,o(955825).AH)(j.container,f),children:[(0,p.jsx)(o(603820).A,{onDraggableDragStart:W,onDraggableDragMove:E,onDraggableDragEnd:F,onDraggableDragCancel:F,disabled:!b,render:t=>(0,p.jsx)("div",{style:j.dragContainer,...t,children:e.render({imagePosition:T,isRepositioning:b})})}),(0,p.jsx)(h,{small:e.small,isRepositioning:b}),V]})};function h(e){let{small:t,isRepositioning:o}=e;if(t)return null;const n={background:a().Ay.blackWithAlpha(.4),borderRadius:4,color:a().Ay.white,fontSize:12,fontFamily:c().vc(i().locale).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,p.jsx)(u().A,{visible:o,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:n,children:(0,p.jsx)(s().sA,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},823279:(e,t,o)=>{o.d(t,{L:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("versionHistoryThick",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M0 7C0 3.136 3.129 0 6.993 0C10.864 0 14 3.136 14 7C14 10.864 10.864 14 6.993 14C3.129 14 0 10.864 0 7ZM1.4 7C1.4 10.094 3.906 12.6 7 12.6C10.094 12.6 12.6 10.094 12.6 7C12.6 3.906 10.094 1.4 7 1.4C3.906 1.4 1.4 3.906 1.4 7ZM6.3 3.5H7.35V7.175L10.5 9.044L9.975 9.905L6.3 7.7V3.5Z"})})},831098:(e,t,o)=>{o.d(t,{y:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("jira",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M16.8784 2.5H9.65698C9.65698 4.3 11.1141 5.75714 12.9141 5.75714H14.2427V7.04288C14.2427 8.84288 15.6998 10.3 17.4998 10.3V3.12143C17.4998 2.77857 17.2212 2.5 16.8784 2.5Z M13.3001 6.10001H6.07861C6.07861 7.9 7.53574 9.35713 9.33574 9.35713H10.6643V10.6429C10.6643 12.4429 12.1215 13.9 13.9215 13.9V6.72144C13.9215 6.37856 13.6429 6.10001 13.3001 6.10001Z M9.72144 9.70001H2.5C2.5 11.5 3.95714 12.9571 5.75714 12.9571H7.08569V14.2429C7.08569 16.0429 8.54287 17.5 10.3429 17.5V10.3214C10.3429 9.97857 10.0643 9.70001 9.72144 9.70001Z"})})},843189:(e,t,o)=>{o.d(t,{E:()=>s});var n=o(296540),i=()=>o(960715),r=o(474848);const s=n.forwardRef(((e,t)=>{let{children:n,color:s,disabled:a,iconLeading:l,iconStyle:c,iconTrailing:d,isLoading:u,shape:p="default",size:m="md",style:g,...h}=e;const f=(0,o(963589).X)("nds_button_gap")||Boolean(d),v=(0,o(401497).IS)((e=>{const t=s?`${s}Primary`:"primary",r=s||"regular",d=s?`${s}Hover`:"primaryHover",h=s?`${s}Pressed`:"primaryPressed";return{button:{...(0,i().qq)({shape:p,size:m,hasIconOnly:Boolean(l)&&!n,isButtonGapEnabled:f}),justifyContent:"center",color:e.text[t],background:e.tint[r],opacity:a||u?.3:1,fontWeight:o(284371).Wy.medium,...g},hovered:{background:a?e.tint[r]:e.tint[d]},pressed:{background:a?e.tint[r]:e.tint[h]},icon:{...(0,i().D3)({size:m,hasIconOnly:!n,isButtonGapEnabled:f}),...c}}}),[n,s,a,l,c,f,u,p,m,g]);return(0,r.jsxs)(o(197190).A,{ref:t,style:v.button,hoveredStyle:v.hovered,pressedStyle:v.pressed,disabled:a||u,...h,children:[u?(0,r.jsx)(o(331542).A,{style:{marginRight:4}}):null,l?l(v.icon):null,n,d?d(v.icon):null]})}));s.displayName="TintButton"},848565:(e,t,o)=>{o.d(t,{FB:()=>p,Ql:()=>m,SM:()=>g,Wv:()=>r,Yz:()=>a,ds:()=>i,e4:()=>n,eQ:()=>s,im:()=>c,jw:()=>l,k2:()=>u,uG:()=>d});const n=8,i=10,r=8,s=24,a=6,l=1.5,c=(s-l)/2,d=s+a,u=`calc(100% + ${r+(n-a)-d}px)`,p=s+8,m=-16;function g(e){return"margin_comments"===e?12:"comment_unfurl"===e?14:16}},867772:(e,t,o)=>{o.d(t,{Ay:()=>l,Gi:()=>r,Wc:()=>n,pF:()=>s,vS:()=>i});const n="loadingLocalImage",i="uploading",r="downloading",s="loaded";class a extends(()=>o(757695))().Store{getInitialState(){return{loadingMode:s}}}const l=a},882262:(e,t,o)=>{o.d(t,{m:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.23 3.23 13.54 13.53",svg:(0,o(474848).jsx)("path",{d:"M4.485 8.86V5.369l4.073 4.073a.625.625 0 0 0 .884-.884L5.369 4.485h3.49a.625.625 0 1 0 0-1.25h-5a.625.625 0 0 0-.624.625v5a.625.625 0 0 0 1.25 0m10.146 6.655-4.07-4.07a.625.625 0 0 1 .884-.884l4.07 4.07V11.14a.625.625 0 1 1 1.25 0v5c0 .345-.28.625-.625.625h-5a.625.625 0 1 1 0-1.25z"})},i=(0,o(340498).wt)("arrowExpandDiagonal",n)},937199:(e,t,o)=>{o.d(t,{LH:()=>r,Op:()=>i,bi:()=>l,sf:()=>a,v$:()=>s});o(16280);var n=o(296540);const i=(0,n.createContext)(null);function r(){const e=(0,n.useContext)(i);if(!e)throw new Error("usePageLayoutEditorContext must be used inside BaseLayoutEditorContext.Provider");return e}function s(){return(0,n.useContext)(i)}i.displayName="BaseLayoutEditorContext";const a=(0,n.createContext)(null);function l(){const e=(0,n.useContext)(a);if(!e)throw new Error("usePageLayoutEditorContext must be used inside PageLayoutEditorContextProvider");return e}a.displayName="PageLayoutEditorContext"},990402:(e,t,o)=>{o.d(t,{m:()=>i});var n=()=>o(46986);function i(e){return("workflow"===e.getType()||e.isCollectionView()&&e.getWorkflowStore())&&e.canEdit()&&!e.isSystemBlock()&&(0,n().re)()}}}]);