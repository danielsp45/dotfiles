"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[40186],{72645:(e,t,o)=>{o.d(t,{b:()=>i});o(296540);var r=o(474848);const i=(0,o(340498).wt)("plusMedium",{viewBox:"0 0 16 16",svg:(0,r.jsx)("g",{children:(0,r.jsx)("path",{d:"M2 8a.77.77 0 01.237-.566.762.762 0 01.566-.244h4.394V2.803a.77.77 0 01.237-.566A.773.773 0 018 2c.225 0 .416.079.573.237a.773.773 0 01.237.566V7.19h4.387c.22 0 .409.081.566.244A.773.773 0 0114 8a.781.781 0 01-.237.573.785.785 0 01-.566.23H8.81v4.401a.764.764 0 01-.237.56A.781.781 0 018 14a.773.773 0 01-.566-.237.764.764 0 01-.237-.559V8.803H2.803a.785.785 0 01-.566-.23A.781.781 0 012 8z"})})})},104129:(e,t,o)=>{o.d(t,{A:()=>i});o(898992),o(672577);class r extends(()=>o(959180))().A{findModuleContainer(e){let{layoutStore:t,moduleId:o}=e;return this.find((e=>e.layoutStore===t&&e.moduleId===o))}}const i=new r},132174:(e,t,o)=>{o.d(t,{A:()=>l});var r=()=>o(713998),i=()=>o(919709);class n extends(()=>o(757695))().Store{getInitialState(){return{isLoaded:!1}}getFormState(){if(this.state.isLoaded)return this.state}getQuestionError(e){if(this.state.isLoaded)return this.state.formQuestionErrorMap.get(e)}updateFormState(e){this.state.isLoaded&&this.setState({...this.state,...e})}updateFilePropertyIdToFormFiles(e,t){var o;if(!this.state.isLoaded)return;const r=null===(o=this.getFormState())||void 0===o?void 0:o.filePropertyIdToFormFiles;this.updateFormState({filePropertyIdToFormFiles:{...r,[e]:t((null==r?void 0:r[e])??[])}})}updateFormErrorMap(e,t){if(!this.state.isLoaded)return;const n=this.state.collectionSchema;if(!n)return;const l=new Map;for(const c of e){var s,a,d;const e=c.id,p=null===(s=c.getConfig())||void 0===s?void 0:s.propertyId;if(!p)continue;const m=null===(a=this.state.draftFormBlockStore)||void 0===a?void 0:a.getProperties()[p],g=(0,r()._g)({schema:n,property:p});if(g){if(c.isRequired()&&null!==(d=this.state.questionIdsVisibleAtLastSubmissionAttempt)&&void 0!==d&&d.includes(e)){const t=this.state.filePropertyIdToFormFiles;if("file"===g.type){var u;if(((null===(u=t[p])||void 0===u?void 0:u.length)??0)<1){l.set(e,"required");continue}}else if("checkbox"===g.type){if(!0!==(0,r().wu)(m)){l.set(e,"required");continue}}else if((0,i().w9s)(m)){l.set(e,"required");continue}}if(!(0,i().w9s)(m)){const r=(0,i().q4_)(m);if("number"===g.type&&!(0,o(72135).kf)(r,t)){l.set(e,"invalid_number");continue}if("email"===g.type&&!(0,o(842599).DT)(r)){l.set(e,"invalid_email");continue}if("url"===g.type&&!(0,o(402137).w)(r)){l.set(e,"invalid_url");continue}if("phone_number"===g.type&&!(0,o(754199).e)(r)){l.set(e,"invalid_phone_number");continue}}}}this.updateFormState({formQuestionErrorMap:l})}}const l=n},160241:(e,t,o)=>{o.d(t,{d:()=>i});var r=()=>o(401497);function i(){return(0,r().IS)((e=>({button:{background:"light"===e.mode?e.palette.uiBlue[100]:e.palette.uiBlue[200]},buttonHovered:{background:"light"===e.mode?e.palette.uiBlue[200]:e.palette.uiBlue[300]},buttonPressed:{background:"light"===e.mode?e.palette.uiBlue[300]:e.palette.uiBlue[400]}})),[])}},173215:(e,t,o)=>{o.d(t,{x:()=>a});var r=()=>o(484714),i=()=>o(56366),n=()=>o(401497),l=()=>o(712030),s=()=>o(921855);function a(e){let{textStore:t,parentStore:o,spaceId:a,disabled:d=!1}=e;const u=(0,r().v3)(),c=(0,n().DP)(),p=(0,l().Ol)(),m=(0,i().K8)((()=>u.KatexStore.getKatex()),[u.KatexStore]);return(0,i().K8)((()=>{const e=null==t?void 0:t.getValue();return e&&a&&o?s().S5({environment:u,textValue:{value:e,spaceId:a},parentStore:o,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableCommentAnnotations:!0,disabled:d,theme:c,disableLinks:d,emojiType:p,katex:m,formulaValueTypes:[]}):null}),[d,p,u,m,o,a,t,c])}},279897:(e,t,o)=>{o.d(t,{A:()=>d});var r=o(296540),i=()=>o(56366),n=()=>o(401497),l=()=>o(31503),s=()=>o(959013),a=o(474848);function d(e){let{propertySchema:t,formQuestionStore:o,formMode:d}=e;const u=(0,n().IS)((e=>({select:{color:e.text.tertiary,marginTop:4,marginBottom:12,..."viewer"===d?{marginLeft:0,marginRight:0}:{marginLeft:10,marginRight:10}}})),[d]),c=(0,i().K8)((()=>(0,l().hm)(t,o.getModel())),[o,t]),p=(0,r.useMemo)((()=>"builder"===d?void 0===c?(0,a.jsx)(s().sA,{id:"QuestionMaxSelection.builder.unlimited",defaultMessage:"(Respondents can select as many as they like)"}):(0,a.jsx)(s().sA,{id:"QuestionMaxSelection.builder.limited",defaultMessage:"(Respondents can select up to {count})",values:{count:c}}):void 0===c?(0,a.jsx)(s().sA,{id:"QuestionMaxSelection.viewer.unlimited",defaultMessage:"(Select as many as you like)"}):(0,a.jsx)(s().sA,{id:"QuestionMaxSelection.viewer.limited",defaultMessage:"(Select up to {count})",values:{count:c}})),[d,c]);return(0,a.jsx)("div",{style:u.select,children:p})}},316397:(e,t,o)=>{o.d(t,{z:()=>n});var r=()=>o(56366),i=()=>o(937199);function n(){const{layoutStore:e}=(0,i().LH)();return"form"===(0,r().K8)((()=>{var t;return null===(t=e.getModel())||void 0===t?void 0:t.getLayoutType()}),[e])?24:12}},348241:(e,t,o)=>{o.d(t,{Q1:()=>l,cJ:()=>n,zi:()=>i});o(16280);var r=o(296540);const i=(0,r.createContext)(null);function n(){const e=(0,r.useContext)(i);if(!e)throw new Error("useFormLayoutEditorContext must be used inside FormLayoutEditorContext.Provider");return(0,r.useMemo)((()=>e),[e])}function l(){return(0,r.useContext)(i)}i.displayName="FormLayoutEditorContext"},358354:(e,t,o)=>{o.d(t,{B:()=>d,I:()=>a});var r=()=>o(966759),i=()=>o(235191),n=()=>o(854593),l=()=>o(4319),s=()=>o(751156);async function a(e){let{theme:t,collectionContextStore:o,environment:r,property:i,from:l,schema:s,onDeleteCompleted:a,...u}=e;await n().q({environment:r,collectionContextStore:o,property:i,handleDeleteAccept:async()=>{await d({collectionContextStore:o,environment:r,property:i,schema:s,from:l,...u}),null==a||a()},theme:t,from:l})}async function d(e){const{collectionContextStore:t,environment:o,property:n,schema:a,from:d,...u}=e,c=t.collectionStore();if(!c)return;const p=c.getSchema()[n];await s().createAndCommitAsync({environment:o,userAction:"TableHeaderCell.handleDeleteAccept",waitForServerCommit:!1,perform:async e=>{await i().PF({environment:o,collectionStore:c,schema:a,property:n,transaction:e}),u.updateFrozenColumn&&l().sp({environment:o,collectionContextStore:t,currentIndex:u.columnIndex,entrypoint:u.updateFrozenColumnEntrypoint,transaction:e,propertyAction:"delete"})}}),p&&(0,r().i)({environment:o,collectionContextStore:t,property_type:p.type,from:d,property:n})}},417257:(e,t,o)=>{o.d(t,{H:()=>l,o:()=>n});var r=o(296540),i=()=>o(132174);const n=(0,r.createContext)(null);function l(){const e=(0,r.useContext)(n);return e||new(i().A)}n.displayName="FormBlockContext"},435930:(e,t,o)=>{o.d(t,{s:()=>l});const r={id:"pageLayoutEditor.property",defaultMessage:"Property",description:"Label for the property section in the page layout editor"},i={id:"pageLayoutEditor.titleWithIcon",defaultMessage:"Heading",description:"Label for the titleWithIcon section in the page layout editor"},n={id:"pageLayoutEditor.collectionView",defaultMessage:"Database View",description:"Label for the form submit button section in the form page layout editor"},l=(0,o(959013).YK)({cover:{id:"pageLayoutEditor.cover",defaultMessage:"Cover"},properties:{id:"pageLayoutEditor.properties",defaultMessage:"Property group"},inlinePageSections:{id:"pageLayoutEditor.inlinePageSections",defaultMessage:"Inline Page Sections"},expandedBacklinks:{id:"pageLayoutEditor.expandedBacklinks",defaultMessage:"Backlinks"},discussions:{id:"pageLayoutEditor.discussions",defaultMessage:"Page Comments"},editor:{id:"pageLayoutEditor.editor",defaultMessage:"Content"},tabs:{id:"pageLayoutEditor.tabs",defaultMessage:"Tabs"},transcript:{id:"pageLayoutEditor.transcript",defaultMessage:"Transcript"},bottomControls:{id:"pageLayoutEditor.bottomControls",defaultMessage:"Bottom Controls"},selectAModulePrompt:{id:"pageLayoutEditor.selectAModuleTitle",defaultMessage:"Select a module to configure"},deleteModuleButton:{id:"pageLayoutEditor.deleteModuleButton",defaultMessage:"Delete"},views:{id:"pageLayoutEditor.views",defaultMessage:"Views"},viewsMain:{id:"pageLayoutEditor.views",defaultMessage:"Views"},relationsGroup:{id:"pageLayoutEditor.relationsGroup",defaultMessage:"Relations group"},formTitle:{id:"pageLayoutEditor.formTitle",defaultMessage:"Form Title"},formQuestion:{id:"pageLayoutEditor.formQuestion",defaultMessage:"Form Question"},formSubmit:{id:"pageLayoutEditor.formSubmit",defaultMessage:"Form Submit"},placeholder:{id:"pageLayoutEditor.placeholder",defaultMessage:"New"},recentActivity:{id:"pageLayoutEditor.recentActivity",defaultMessage:"Recent activity"},collaborators:{id:"pageLayoutEditor.collaborators",defaultMessage:"Top collaborators"},teamspaces:{id:"pageLayoutEditor.teamspaces",defaultMessage:"Teamspaces"},normalizedTitleWithIcon:i,titleWithIcon:i,deleted_property:r,property_number:r,property_title:r,property_person:r,property_file:r,property_text:r,property_checkbox:r,property_url:r,property_email:r,property_phone_number:r,property_created_by:r,property_last_edited_by:r,property_button:r,property_select:r,property_multi_select:r,property_status:r,property_date:r,property_created_time:r,property_last_edited_time:r,property_last_visited_time:r,property_relation:r,property_rollup:r,property_formula:r,property_auto_increment_id:r,property_location:r,property_verification:r,property_place:r,property:r,collectionView:n,collectionViewV2:n})},437426:(e,t,o)=>{o.d(t,{$:()=>a});var r=o(296540),i=()=>o(56366),n=()=>o(895876),l=()=>o(8980),s=o(474848);const a=r.memo(r.forwardRef((function(e,t){let{collectionContextStore:a,property:d,iconTransformer:u=(e=>e),getTitleOverride:c,...p}=e;const{isMobile:m}=(0,o(484714).Y0)(),g=(0,i().K8)((()=>a.collectionStore()),[a]),y=(0,i().K8)((()=>null==g?void 0:g.getDatabaseType()),[g]),f=(0,i().K8)((()=>Boolean(g&&y&&o(313892).jP((0,o(617254).appConfigs)(),y,d,g))),[g,y,d]),v=(0,r.useCallback)((e=>(0,n().eF)(y,e)),[y]),h=(0,r.useCallback)((e=>(0,s.jsx)(o(760217).A,{...p,...e,disabled:f,disabledFeedback:f,title:(null==c?void 0:c({isRequiredProperty:f}))??(0,s.jsx)(o(959013).sA,{defaultMessage:"Delete property",id:"database.tableHeaderCell.deleteProperty"}),caption:m&&f?(0,n().eF)(y):null,icon:u(f?(0,s.jsx)("div",{...e,children:(0,s.jsx)(l().I,{icon:o(471095).i})}):(0,s.jsx)(l().I,{icon:o(236262).trashIcon})),isRedOnHover:!0})),[y,c,u,m,f,p]);return(0,s.jsx)(o(859428).A,{placement:o(962730).W.Left,disableTooltip:!f,renderTooltip:v,render:h})})))},471645:(e,t,o)=>{o.d(t,{P:()=>d});o(296540);var r=()=>o(56366),i=()=>o(401497),n=()=>o(919709),l=()=>o(959013),s=()=>o(582049),a=o(474848);function d(e){let{disabled:t,formQuestionStore:o,formMode:d}=e;const u=(0,l().tz)(),c=(0,i().IS)((e=>({questionDescriptionInput:{cursor:"text",fontSize:16,color:e.text.secondary,padding:"builder"===d?"4px 10px":"4px 0px",width:"fit-content"}})),[d]),{questionDescriptionStore:p,questionDescription:m,showDescription:g}=(0,r().K8)((()=>{var e;const t=o.getDescriptionStore().getValue();return{showDescription:Boolean(null===(e=o.getConfig())||void 0===e?void 0:e.showDescription),questionDescriptionStore:o.getDescriptionStore(),questionDescription:t?(0,n().q4_)(t):void 0}}),[o]);return g&&("viewer"!==d||m)?(0,a.jsx)(s().B,{store:p,style:c.questionDescriptionInput,disabled:t,placeholder:u.formatMessage({id:"FormQuestionDescription.placeholder",defaultMessage:"Add description"}),id:`form-description-${o.id}`}):null}},511177:(e,t,o)=>{o.d(t,{j:()=>m});o(296540);var r=()=>o(56366),i=()=>o(401497),n=()=>o(713998),l=()=>o(955825),s=()=>o(959013),a=()=>o(284371),d=()=>o(417257),u=()=>o(173215),c=()=>o(582049),p=o(474848);function m(e){let{disabled:t,onChange:o,formQuestionStore:m,formMode:g}=e;const y=(0,s().tz)(),f=(0,d().H)(),{parentBlockStore:v,questionNameStore:h,isRequired:x}=(0,r().K8)((()=>({parentBlockStore:m.getParentStore(),questionNameStore:m.getNameStore(),isRequired:m.isRequired()})),[m]),S=(0,r().K8)((()=>{var e,t;const o=f.getFormState();if(!o)return;const r=o.collectionSchema,i=null===(e=m.getConfig())||void 0===e?void 0:e.propertyId;return r&&i?null===(t=(0,n()._g)({schema:r,property:i}))||void 0===t?void 0:t.type:void 0}),[m,f]),M=(0,r().K8)((()=>f.getQuestionError(m.id)),[f,m.id]),b=(0,i().IS)((e=>({questionTitleInput:{padding:"0px 10px",margin:"10px 0px",fontSize:24,lineHeight:"30px",borderRadius:6,fontWeight:a().Wy.bold,cursor:"text",textWrap:"wrap",width:"fit-content"},viewQuestionTitleOverrides:{display:"block",margin:0,padding:"6px 0px",whiteSpace:"pre-wrap",maxWidth:"100%",wordBreak:"break-word"},pseudoAfter:{content:"'*'",color:"required"===M?e.palette.red[500]:e.text.tertiary,fontWeight:"normal"}})),[M]),C=(0,u().x)({textStore:h,spaceId:m.pointer.spaceId,parentStore:v,disabled:!1});return"builder"===g?(0,p.jsx)("div",{className:"form-question-title",children:(0,p.jsx)(c().B,{store:h,onChange:o,disabled:t,placeholder:"builder"===g?y.formatMessage({id:"FormQuestionTitle.placeholder",defaultMessage:"Question name"}):void 0,...(0,l().AH)({...b.questionTitleInput,...x?{pseudoAfter:b.pseudoAfter}:{}})})}):"multi_select"===S?(0,p.jsx)("legend",{className:"form-question-title",...(0,l().AH)({...b.questionTitleInput,...b.viewQuestionTitleOverrides,...x?{pseudoAfter:b.pseudoAfter}:{}}),children:C}):"file"===S?(0,p.jsx)("div",{className:"form-question-title",...(0,l().AH)({...b.questionTitleInput,...b.viewQuestionTitleOverrides,...x?{pseudoAfter:b.pseudoAfter}:{}}),id:`form-question-${m.id}`,children:C}):(0,p.jsx)("h2",{id:`form-question-title-${m.id}`,className:"form-question-title",...(0,l().AH)({...b.questionTitleInput,...b.viewQuestionTitleOverrides,...x?{pseudoAfter:b.pseudoAfter}:{}}),children:C})}},524060:(e,t,o)=>{o.d(t,{O:()=>i});o(296540);var r=o(474848);const i=(0,o(340498).wt)("parentChildRelation",{viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{fillRule:"evenodd",d:"M6 6.75a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5m.625 1.171a2.501 2.501 0 1 0-1.25 0V11A3.625 3.625 0 0 0 9 14.625h3.079a2.5 2.5 0 1 0 0-1.25H9A2.375 2.375 0 0 1 6.625 11zM14.5 15.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})})},582049:(e,t,o)=>{o.d(t,{B:()=>s});o(296540);var r=()=>o(496603),i=()=>o(524702),n=()=>o(792540),l=o(474848);function s(e){let{store:t,disabled:o,style:s,placeholder:a,className:d,onChange:u,id:c}=e;return(0,l.jsx)(i().A,{store:t,style:s,className:d,disableSlashCommands:!0,onEnter:r().lQ,onEsc:r().lQ,onTab:r().lQ,onUntab:r().lQ,onMoveDown:r().lQ,onMoveUp:r().lQ,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableEmbedMenu:!0,disabledMentionTypes:{page:!1,user:!1,date:!1,createPage:!0,inviteUserToWorkspace:!0,inviteUserToPage:!0,reminder:!0,bot:!0,heading:!0,group:!0,templateVariable:!0},disabled:o,pasteBehavior:"inline",placeholder:a,inPageFind:n().Os.none,disableComment:!0,onBlur:r().lQ,onChange:u,id:c})}},630960:(e,t,o)=>{o.d(t,{Jz:()=>a,in:()=>s,yh:()=>l});o(898992),o(354520),o(581454);var r=()=>o(56366),i=()=>o(31503),n=()=>o(534177);const l=(0,o(959013).YK)({unsupportedPublicQuestionType:{defaultMessage:"This question type cannot be used in public forms.",id:"useNewQuestionPropertyMenuItems.invalidPublicQuestionType"},relatedCollectionNotPublic:{defaultMessage:"Only relations to public databases are supported in public forms.",id:"formEditorQuestion.relatedCollectionNotPublic"},editorPlaceholder:{defaultMessage:"Respondent's answer",id:"formEditorQuestion.editorPlaceholder"},viewerEmptyPlaceholder:{defaultMessage:"Your answer",id:"formEditorQuestion.viewerEmptyPlaceholder"},viewerEmptyPlaceholderSelect:{defaultMessage:"Your selection",id:"formEditorQuestion.viewerEmptyPlaceholderSelect"},editorDropdownPlaceholderSelect:{defaultMessage:"Options below will appear in the dropdown",id:"formEditorQuestion.editorDropdownPlaceholder"}});function s(e){let{layoutStore:t,collectionStore:o}=e;const l=(0,r().K8)((()=>o?t.getNormalizedFormQuestionStoresForFormLayout({collectionSchema:o.getSchema()})??[]:[]),[t,o]),s=(0,r().K8)((()=>l.map((e=>{var t;return null===(t=e.getConfig())||void 0===t?void 0:t.propertyId})).filter(n().O9)),[l]);return(0,r().K8)((()=>{if(!o)return[];const e=o.getSchema();if(!t.getModel())return[];return(0,n().WP)(e).map((e=>{let[t,o]=e;if(o&&(0,i().Sg)(o)&&!s.includes(t))return t})).filter(n().O9)}),[o,t,s])}const a=[{key:"unlimited",title:"Unlimited",type:"button"},{key:"1",title:"1",type:"button"},{key:"2",title:"2",type:"button"},{key:"3",title:"3",type:"button"},{key:"4",title:"4",type:"button"},{key:"5",title:"5",type:"button"},{key:"10",title:"10",type:"button"}]},634058:(e,t,o)=>{o.d(t,{A:()=>i});class r extends(()=>o(757695))().Store{getInitialState(){return{open:!1}}}const i=new r},646796:(e,t,o)=>{o.d(t,{W:()=>u});var r=o(296540),i=()=>o(221844),n=()=>o(484714),l=()=>o(852507),s=()=>o(56366),a=()=>o(958102),d=()=>o(417257);function u(e){const t=(0,n().v3)(),{inMemoryRecordCacheName:o,collectionSchemaPropertyIds:u,collectionId:c,spaceId:p,formMode:m}=e,g=(0,d().H)(),y=(0,r.useMemo)((()=>new(i().A)({name:o,isTemporaryData:!0})),[o]),f=(0,s().K8)((()=>{var e;const o=null===(e=g.getFormState())||void 0===e?void 0:e.draftFormBlockStore;return o||a().createDummyFormPage({environment:t,spaceId:p,collectionSchemaPropertyIds:u,temporaryRecordCache:y,collectionId:c,formMode:m})}),[c,u,t,g,m,p,y]);return(0,l().l)((()=>{y.addCacheFallback(t.defaultRecordCache.inMemoryRecordCache),g.updateFormState({draftFormBlockStore:f})})),f}},728915:(e,t,o)=>{o.d(t,{Ai:()=>s,EJ:()=>d,M8:()=>u,TX:()=>p,Yj:()=>l,cf:()=>c});o(581454);var r=()=>o(959013),i=()=>o(534177),n=()=>o(921855);const l=12,s=(0,r().YK)({anonymousSubmissionLabel:{id:"FormBlock.anonymousSubmissionLabel",defaultMessage:"Submitting response anonymously"}}),a=(0,r().YK)({inaccessibleTitle:{id:"FormBlock.inaccessible.title",defaultMessage:"This form is not publicly available."},inaccessibleSubtitle:{id:"FormBlock.inaccessible.subtitle",defaultMessage:"Login to submit or contact the form creator to publish."},closedOrDeletedTitle:{id:"FormBlock.closedOrDeleted.title",defaultMessage:"This form is closed or deleted."},closedOrDeletedSubtitle:{id:"FormBlock.closedOrDeleted.subtitle",defaultMessage:"Try contacting the form owner if you think it's a mistake."},submissionErrorTitle:{id:"FormBlock.submissionError.title",defaultMessage:"Something went wrong."},submissionErrorSubtitle:{id:"FormBlock.submissionError.subtitle",defaultMessage:"There was an issue submitting the form. Please try again or contact the form owner."}}),d={closedOrDeleted:a.closedOrDeletedTitle,inaccessible:a.inaccessibleTitle,submissionError:a.submissionErrorTitle},u={closedOrDeleted:a.closedOrDeletedSubtitle,inaccessible:a.inaccessibleSubtitle,submissionError:a.submissionErrorSubtitle};function c(e){let{questionType:t,filePropertyIdToFormFiles:o,draftSubmissionPageStore:r,propertyId:l}=e;switch(t){case"checkbox":return"Yes"===(0,n().r4)(r.getPropertyValue(l),r)?"true":"false";case"file":return((null==o?void 0:o[l])??[]).map((e=>e.fileName)).join(", ");case"text":case"title":case"select":case"multi_select":case"relation":case"date":case"person":case"number":case"email":case"url":case"phone_number":case"place":return(0,n().r4)(r.getPropertyValue(l),r);default:(0,i().HB)(t)}}function p(e){return e?500:600}},802975:(e,t,o)=>{o.d(t,{B:()=>m});o(16280),o(898992),o(354520);var r=()=>o(792071),i=()=>o(37165),n=()=>o(235191),l=()=>o(686526),s=()=>o(751156),a=()=>o(2220),d=()=>o(640868),u=()=>o(630116),c=()=>o(465741),p=()=>o(98205);function m(e){let{environment:t,module:o,sessionId:r,layoutStore:i,collectionSettingsStore:n,isCollectionEmpty:s,collectionContextStore:a,area:d,transaction:u,updateParentModule:c}=e;const m=a.collectionStore();if(!m)throw new Error("Could not find collection store");const y=i.getModules().form_conditional_modules??{},f=(0,p().Yg)({currentModule:o,nestedModules:y,includePlaceholders:!0}).formQuestionDescendants.filter((e=>e.id!==o.id)),v=a.normalizedSchemaStore.state;for(const l of f)g({environment:t,module:l,sessionId:r,layoutStore:i,isCollectionEmpty:s,collectionContextStore:a,collectionStore:m,area:"form_conditional_modules",transaction:u,schema:v,updateParentModule:!1});g({environment:t,module:o,sessionId:r,layoutStore:i,isCollectionEmpty:s,collectionContextStore:a,collectionStore:m,area:d,transaction:u,schema:v,updateParentModule:c}),l().os({collectionSettingsStore:n})}function g(e){let t,{environment:o,module:l,sessionId:p,layoutStore:m,isCollectionEmpty:g,collectionContextStore:y,collectionStore:f,area:v,transaction:h,updateParentModule:x,schema:S}=e;if("formQuestion"===l.type){var M;if(t=u().c7.createChildStore(m,{table:i().lo,id:l.formQuestionId,spaceId:m.getSpaceId()??""}).getPropertyId(),!t)return;const e=null===(M=S[t])||void 0===M?void 0:M.type;g&&e&&"title"!==e&&n().BJ({environment:o,collectionStore:f,schema:S,property:t,transaction:h}),(0,a().u)({environment:o,event:{eventName:"delete_form_question",eventProperties:(0,c().YA)({collectionContextStore:y,propertyId:t,questionId:l.id,parentModuleId:x?l.parentModuleId:void 0,area:v,layoutStore:m})}})}x?(0,d().U)({environment:o,position:{area:v,moduleId:l.id},layoutStore:m,sessionId:p,transaction:h}):s().applyOperation({transaction:h,store:m,operation:r().N4X.deleteModuleInArea({pointer:m.pointer,area:v,moduleId:l.id})})}},832857:(e,t,o)=>{o.d(t,{FG:()=>v,Is:()=>f,Ix:()=>h,jD:()=>x,lF:()=>y});o(944114),o(898992),o(354520),o(672577),o(581454);var r=()=>o(289915),i=()=>o(792071),n=()=>o(500993),l=()=>o(183558),s=()=>o(534177),a=()=>o(751156),d=()=>o(909470),u=()=>o(978846),c=()=>o(640868),p=()=>o(33218),m=()=>o(217429),g=()=>o(802975);function y(e){const{environment:t,layoutStore:o,currentQuestionModule:r,area:i,property:n,filterValue:s,setModuleSelection:d,sessionId:c}=e;a().createAndCommit({userAction:"FormSelectProperty.handleAddConditionalLogic",environment:t,canUndo:!0,perform:e=>{if(!o.getModel())return;const a=(0,l().Ay)(),m=(0,l().Ay)(),g=function(e){var t,o;switch(e.type){case"select":return{operator:"enum_is",value:{type:"exact",value:null===(t=e.value)||void 0===t?void 0:t.value}};case"multi_select":return{operator:"enum_contains",value:{type:"exact",value:null===(o=e.value)||void 0===o?void 0:o.value}};case"checkbox":return{operator:"checkbox_is",value:{type:"exact",value:e.value}}}}(s);(0,p().UQ)({environment:t,transaction:e,layoutStore:o,position:{area:i,moduleId:r.id},updatedModule:{...r,conditionalGroups:[...r.conditionalGroups??[],{id:a,trigger:{property:n,filter:g},children:[]}]}});const y={id:m,type:"placeholder",parentModuleId:r.id,parentConditionalGroupId:a};(0,u().UQ)({environment:t,transaction:e,layoutStore:o,position:{type:"absolute",area:"form_conditional_modules",parentConditionalGroupId:a,parentModuleId:r.id},module:y,sessionId:c,isPropertyCreation:!1}),d&&d({type:"existing_module",moduleId:m,isDragging:!1})}})}function f(e){var t;const{environment:o,layoutStore:r,module:i,conditionalGroupId:l,newValue:s}=e,d=(0,n().A)(i.id,r.getModules()),u={...i,conditionalGroups:null===(t=i.conditionalGroups)||void 0===t?void 0:t.map((e=>e.id===l?{...e,trigger:{...e.trigger,filter:s}}:e))};a().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.updateTriggerFilter",environment:o,canUndo:!0,perform:e=>{(0,p().UQ)({environment:o,transaction:e,layoutStore:r,position:{area:d.area,moduleId:i.id},updatedModule:u})}})}function v(e){const{environment:t,parentModule:o,groupId:r,layoutStore:n,collectionContextStore:l,isCollectionEmpty:s,sessionId:d}=e,u=n.getModules().form_conditional_modules??{};a().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.deleteConditionalGroup",environment:t,canUndo:!0,perform:e=>{var c,m;const y=null==n?void 0:n.getModel();if(!n||!y)return;const f=null===(c=o.conditionalGroups)||void 0===c?void 0:c.filter((e=>e.id!==r)),v=null===(m=o.conditionalGroups)||void 0===m?void 0:m.find((e=>e.id===r));if(void 0!==v){for(const o of v.children??[]){const r=u[o];r&&("placeholder"!==r.type?(0,g().B)({environment:t,module:r,sessionId:d,transaction:e,layoutStore:n,collectionContextStore:l,collectionSettingsStore:l.settingsStore,isCollectionEmpty:s,area:"form_conditional_modules",updateParentModule:!1}):a().applyOperation({transaction:e,store:n,operation:i().N4X.deleteModuleInArea({pointer:n.pointer,area:"form_conditional_modules",moduleId:o})}))}(0,p().UQ)({environment:t,transaction:e,layoutStore:n,position:{area:Object.keys(u).includes(o.id)?"form_conditional_modules":"form_layout_schema",moduleId:o.id},updatedModule:{...o,conditionalGroups:f}})}}})}function h(e){const{environment:t,layoutStore:o,formQuestionModule:r,sessionId:i}=e;a().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.deleteConditionalGroup",environment:t,canUndo:!0,perform:e=>{(0,c().U)({environment:t,transaction:e,layoutStore:o,position:{area:"form_conditional_modules",moduleId:r.id}}),(0,u().UQ)({environment:t,transaction:e,layoutStore:o,position:{area:"form_layout_schema",type:"area_relative",location:"end_moveable"},module:{...r,parentModuleId:void 0,parentConditionalGroupId:void 0},sessionId:i,isPropertyCreation:!1})}})}function x(e){const{questionModulesToVisit:t,draftSubmissionPageStore:o,collectionSchema:i,nestedQuestionModules:n,intl:l}=e,a=[],u=o.getModel();if(!u)return[];for(const p of t){a.push(p);const e=p.conditionalGroups;if(e)for(const t of e){var c;const e=t.trigger;if(!(0,r().ts)({filter:e.filter,property:e.property,propertyMapping:void 0,context:{schema:i,userId:void 0,userTimeZone:"",userStartOfWeek:0,relativeVariableResult:void 0,currentPageInRelatedCollection:void 0,intl:l,collectionFeatureGates:(0,d().i)()},depth:0})({block:u,getRecordModel:o.getRecordModel,propertyMapping:void 0,resultCache:new Map,regExpCache:new Map,formatDateCache:new Map,experimentService:m().default,formulasModule:void 0}))continue;const p=null===(c=t.children)||void 0===c?void 0:c.map((e=>{const t=n[e];if(t&&"formQuestion"===t.type)return t})).filter(s().O9);if(!p||0===p.length)continue;const g=x({questionModulesToVisit:p,draftSubmissionPageStore:o,collectionSchema:i,nestedQuestionModules:n,intl:l});a.push(...g)}}return a}},846207:(e,t,o)=>{o.d(t,{f:()=>i,l:()=>n});var r=()=>o(634058);async function i(e){return r().A.state.open?Promise.resolve(void 0):new Promise((t=>{!function(e){r().A.setState({...e,open:!0})}({...e,onConfirm:e=>(n(),t(e)),onDismiss:()=>(n(),t(void 0))})}))}function n(){r().A.reset()}},885791:(e,t,o)=>{o.d(t,{h:()=>i});o(296540);var r=o(474848);const i=(0,o(340498).wt)("trashSmall",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M5.31055 14.3398C4.85742 14.3398 4.49414 14.2129 4.2207 13.959C3.95117 13.7051 3.80664 13.3516 3.78711 12.8984L3.38867 4.45508H2.74414C2.59961 4.45508 2.47656 4.4043 2.375 4.30273C2.27344 4.20117 2.22266 4.07812 2.22266 3.93359C2.22266 3.79297 2.27344 3.67383 2.375 3.57617C2.47656 3.47461 2.59961 3.42383 2.74414 3.42383H13.2617C13.4062 3.42383 13.5273 3.47266 13.625 3.57031C13.7266 3.66797 13.7773 3.78906 13.7773 3.93359C13.7773 4.07812 13.7266 4.20117 13.625 4.30273C13.5273 4.4043 13.4062 4.45508 13.2617 4.45508H12.6172L12.2188 12.8926C12.1992 13.3457 12.0527 13.6992 11.7793 13.9531C11.5059 14.2109 11.1445 14.3398 10.6953 14.3398H5.31055ZM5.42773 13.3027H10.5723C10.7363 13.3027 10.8711 13.248 10.9766 13.1387C11.082 13.0332 11.1387 12.8926 11.1465 12.7168L11.5273 4.45508H4.45508L4.85352 12.7168C4.86133 12.8887 4.91797 13.0293 5.02344 13.1387C5.12891 13.248 5.26367 13.3027 5.42773 13.3027ZM6.27734 12.3535C6.15625 12.3535 6.05859 12.3203 5.98438 12.2539C5.91016 12.1836 5.87109 12.0898 5.86719 11.9727L5.69141 5.83203C5.6875 5.71875 5.72266 5.62695 5.79688 5.55664C5.87109 5.48242 5.96875 5.44531 6.08984 5.44531C6.21094 5.44531 6.30859 5.48047 6.38281 5.55078C6.45703 5.62109 6.49414 5.71289 6.49414 5.82617L6.67578 11.9668C6.67578 12.084 6.63867 12.1777 6.56445 12.248C6.49414 12.3184 6.39844 12.3535 6.27734 12.3535ZM8 12.3535C7.87891 12.3535 7.7793 12.3184 7.70117 12.248C7.62695 12.1777 7.58984 12.0859 7.58984 11.9727V5.83203C7.58984 5.71875 7.62695 5.62695 7.70117 5.55664C7.7793 5.48242 7.87891 5.44531 8 5.44531C8.125 5.44531 8.22461 5.48242 8.29883 5.55664C8.37695 5.62695 8.41602 5.71875 8.41602 5.83203V11.9727C8.41602 12.0859 8.37695 12.1777 8.29883 12.248C8.22461 12.3184 8.125 12.3535 8 12.3535ZM9.72852 12.3535C9.60352 12.3535 9.50391 12.3184 9.42969 12.248C9.35938 12.1777 9.32617 12.084 9.33008 11.9668L9.50586 5.83203C9.50977 5.71484 9.54883 5.62109 9.62305 5.55078C9.69727 5.48047 9.79297 5.44531 9.91016 5.44531C10.0352 5.44531 10.1328 5.48242 10.2031 5.55664C10.2773 5.62695 10.3125 5.71875 10.3086 5.83203L10.1328 11.9727C10.1289 12.0898 10.0898 12.1836 10.0156 12.2539C9.94141 12.3203 9.8457 12.3535 9.72852 12.3535ZM5.33984 3.81055V2.54492C5.33984 2.0957 5.47461 1.74609 5.74414 1.49609C6.01758 1.24219 6.39648 1.11523 6.88086 1.11523H9.10742C9.5918 1.11523 9.9707 1.24219 10.2441 1.49609C10.5176 1.74609 10.6543 2.0957 10.6543 2.54492V3.81055H9.57031V2.59766C9.57031 2.44922 9.52148 2.33008 9.42383 2.24023C9.32617 2.14648 9.19531 2.09961 9.03125 2.09961H6.95703C6.79688 2.09961 6.66797 2.14648 6.57031 2.24023C6.47266 2.33008 6.42383 2.44922 6.42383 2.59766V3.81055H5.33984Z"})})},940186:(e,t,o)=>{o.d(t,{n:()=>ao,B:()=>mo});o(16280),o(898992),o(354520),o(581454);var r=()=>o(153321),i=o(296540),n=()=>o(484714),l=()=>o(56366),s=()=>o(401497),a=()=>o(713998),d=()=>o(688728),u=()=>o(369186),c=()=>o(155185),p=()=>o(800065),m=()=>o(959013),g=()=>o(381349),y=()=>o(496603),f=()=>o(534177),v=()=>o(284371),h=()=>o(348241),x=()=>o(464708),S=()=>o(21140),M=()=>o(175116),b=()=>o(478726),C=()=>o(548821),_=()=>o(864994),I=()=>o(557198),w=()=>o(646447),j=()=>o(852302),A=()=>o(106412),k=()=>o(630116),T=()=>o(472090),P=()=>o(937199),B=o(474848);function L(e){const{wrapper:t,viewsModule:o}=e,{pageStore:r,moduleStateByIdStore:n}=(0,P().bi)(),[s,a]=(0,i.useState)(void 0),{setModuleSelection:d}=(0,P().LH)(),u=(0,i.useMemo)((()=>new(T().E)),[]),c=(0,i.useCallback)((e=>{e&&u.observe(e)}),[u]),p=(0,l().K8)((()=>u.rect.state.width),[u]);(0,i.useEffect)((()=>{s&&n.set(o.id,{collectionContextStore:s})}),[s,n,o.id]);const{collectionViewBlockStore:m,viewsModuleContext:g,isViewsMainModule:y}=(0,l().K8)((()=>{if(!o)return{collectionViewBlockStore:void 0,viewsModuleContext:void 0,isViewsMainModule:!1};const e=k().Bv.createChildStore(r,o.collection_view_block_pointer);return{collectionViewBlockStore:e,viewsModuleContext:{location:"layoutBuilder",viewsModule:o,currentPageStore:r,collectionViewBlockStore:e,selectViewsModule:()=>{d&&d({type:"existing_module",moduleId:o.id,isDragging:!1})}},isViewsMainModule:"viewsMain"===o.type}}),[r,o,d]);if(!m||!g)return null;return t((0,B.jsx)("div",{ref:c,children:(0,B.jsx)(j().l,{children:(0,B.jsx)(A().tx,{value:{location:"layout_editor",isPreviewing:!0,disableAllPointerEvents:!1,disablePageLinks:!1,hideTableAggregationRow:!1,hideViewBlockSource:!1,enableHorizontalScroll:!0},children:(0,B.jsx)(w().dN,{store:m,isFullScreen:!1,productUseCase:"page_layout_editor",disabled:!1,disableHoverMenu:!0,headerActionsBehavior:"always_show",headerAllowedActions:F,fullWidth:p,overridePaddingLeft:0,overridePaddingRight:0,setCollectionContextStore:a,showOnlyCurrentView:!y,isUnlistedView:!1,viewsModuleContext:g})})})}))}const F=["filter","sort"];var E=()=>o(678834),D=()=>o(402014),O=()=>o(93583),R=()=>o(790748),H=()=>o(887146),Q=()=>o(778781),G=()=>o(747100),K=()=>o(115512),V=()=>o(554283),q=()=>o(104129),W=()=>o(435930),N=()=>o(823082),z=()=>o(316397),U=(o(944114),()=>o(487929)),$=()=>o(158359),Y=()=>o(340498);const Z=(0,Y().wt)("arrowLeftRounded",{viewBox:"0 0 16 13",directional:!0,svg:(0,B.jsx)("path",{d:"M0.617188 6.85156C0.617188 6.60677 0.710938 6.39323 0.898438 6.21094L6.03906 1.07812C6.13281 0.984375 6.23177 0.914062 6.33594 0.867188C6.4401 0.820312 6.54948 0.796875 6.66406 0.796875C6.90365 0.796875 7.10417 0.875 7.26562 1.03125C7.42708 1.1875 7.50781 1.38281 7.50781 1.61719C7.50781 1.74219 7.48438 1.85677 7.4375 1.96094C7.39062 2.0599 7.32812 2.14844 7.25 2.22656L5.5 4L2.59375 6.66406L2.3125 6.15625L5.02344 5.99219H14.5156C14.776 5.99219 14.9844 6.07292 15.1406 6.23438C15.3021 6.39062 15.3828 6.59635 15.3828 6.85156C15.3828 7.10156 15.3021 7.30729 15.1406 7.46875C14.9844 7.625 14.776 7.70312 14.5156 7.70312H5.02344L2.3125 7.54688L2.59375 7.04688L5.5 9.70312L7.25 11.4688C7.32812 11.5469 7.39062 11.638 7.4375 11.7422C7.48438 11.8464 7.50781 11.9583 7.50781 12.0781C7.50781 12.3125 7.42708 12.5078 7.26562 12.6641C7.10417 12.8203 6.90365 12.8984 6.66406 12.8984C6.4349 12.8984 6.22917 12.8099 6.04688 12.6328L0.898438 7.49219C0.710938 7.3099 0.617188 7.09635 0.617188 6.85156Z"})});var J=()=>o(261164),X=()=>o(498474),ee=()=>o(30626),te=()=>o(735384),oe=()=>o(728396),re=()=>o(475140);var ie=()=>o(120997),ne=()=>o(251822),le=()=>o(789280),se=()=>o(235191),ae=()=>o(751156),de=()=>o(358354),ue=()=>o(437426),ce=()=>o(760217),pe=()=>o(406699),me=()=>o(285790),ge=()=>o(928600),ye=()=>o(939740),fe=()=>o(89924),ve=()=>o(859428),he=()=>o(722872),xe=()=>o(962730),Se=()=>o(377586),Me=()=>o(237775),be=()=>o(978846),Ce=()=>o(640868),_e=()=>o(885791),Ie=()=>o(846207);async function we(e){switch(e){case"property_number":case"property_title":case"property_person":case"property_file":case"property_text":case"property_checkbox":case"property_url":case"property_email":case"property_phone_number":case"property_created_by":case"property_last_edited_by":case"property_button":case"property_select":case"property_multi_select":case"property_status":case"property_date":case"property_created_time":case"property_last_edited_time":case"property_last_visited_time":case"property_relation":case"property_rollup":case"property_formula":case"property_auto_increment_id":case"property_location":case"property_verification":case"property_place":return await async function(){return await Ie().f({icon:_e().h,confirmTextStyle:"red",title:(0,B.jsx)(m().sA,{defaultMessage:"Remove property from layout?",id:"deletePropertyActions.title"}),confirmText:(0,B.jsx)(m().sA,{defaultMessage:"Remove",id:"deletePropertyActions.confirmText"}),confirmTextPerRadioOption:{delete_property_and_module:(0,B.jsx)(m().sA,{defaultMessage:"Remove and delete",id:"deletePropertyActions.confirmTextForDeletePropertyAndModule"})},radioOptions:[{key:"delete_module",title:(0,B.jsx)(m().sA,{defaultMessage:"Remove from layout",id:"deletePropertyActions.titleForDeleteModuleOption"}),subtitle:(0,B.jsx)(m().sA,{defaultMessage:"The property will still be visible in database views and in the page’s property group",id:"deletePropertyActions.subtitleForDeleteModuleOption"})},{key:"delete_property_and_module",title:(0,B.jsx)(m().sA,{defaultMessage:"Remove from layout and database",id:"deletePropertyActions.titleForDeletePropertyAndModuleOption"}),subtitle:(0,B.jsx)(m().sA,{defaultMessage:"The property will be removed from both the page layout and the database",id:"deletePropertyActions.subtitleForDeletePropertyAndModuleOption"})}]})}();case"relationsGroup":return await async function(){return await Ie().f({icon:_e().h,confirmTextStyle:"red",title:(0,B.jsx)(m().sA,{defaultMessage:"Remove relations group from layout?",id:"deleteRelationsGroupModuleActions.title"}),confirmText:(0,B.jsx)(m().sA,{defaultMessage:"Remove",id:"deleteRelationsGroupModuleActions.confirmText"}),confirmTextPerRadioOption:{delete_property_and_module:(0,B.jsx)(m().sA,{defaultMessage:"Remove and delete",id:"deleteRelationsGroupModuleActions.confirmTextForDeletePropertyAndModule"})},radioOptions:[{key:"delete_module",title:(0,B.jsx)(m().sA,{defaultMessage:"Remove from layout",id:"deleteRelationsGroupModuleActions.titleForDeleteModuleOption"}),subtitle:(0,B.jsx)(m().sA,{defaultMessage:"The relations properties will still be visible in database views and in the page's property group",id:"deleteRelationsGroupModuleActions.subtitleForDeleteModuleOption"})},{key:"delete_property_and_module",title:(0,B.jsx)(m().sA,{defaultMessage:"Remove from layout and database",id:"deleteRelationsGroupModuleActions.titleForDeletePropertyAndModuleOption"}),subtitle:(0,B.jsx)(m().sA,{defaultMessage:"The relations properties will be removed from both the page layout and the database",id:"deleteRelationsGroupModuleActions.subtitleForDeletePropertyAndModuleOption"})}]})}();case"formSubmit":case"formQuestion":case"formTitle":case"placeholder":case"views":case"transcript":return"delete_module";default:(0,f().HB)(e)}}var je=()=>o(447934),Ae=()=>o(204521),ke=()=>o(970176),Te=()=>o(160241),Pe=()=>o(846899),Be=()=>o(365683),Le=()=>o(662971);function Fe(e){let{icon:t}=e;const o=(0,s().IS)((()=>({iconWrapper:{display:"flex",alignItems:"center",justifyContent:"center",width:16,height:16,overflow:"visible"}})),[]);return(0,B.jsx)("div",{style:o.iconWrapper,children:t})}const Ee=i.memo(Fe);function De(e){let{parent:t,onSelect:o,...r}=e;const i=(0,n().v3)(),{layoutStore:a}=(0,P().LH)(),d=(0,l().K8)((()=>a.getModules()),[a]),u=(0,l().K8)((()=>Boolean((0,re().JO)(d,(e=>"relationsGroup"===e.type)))),[d]),c=(0,s().IS)((e=>({icon:{width:16,height:16}})),[]),p=(0,B.jsx)(m().sA,{id:"AdvancedModuleMenuItem.originButtonTitle",defaultMessage:"Advanced"}),g=(0,B.jsx)(Ee,{icon:(0,Pe().B)(c.icon)}),y=u?(0,B.jsx)(m().sA,{id:"AdvancedModuleMenuItem.buttons.moveToRelationsGroupModule",defaultMessage:"Add to relations group"}):(0,B.jsx)(m().sA,{id:"AdvancedModuleMenuItem.buttons.convertToRelationsGroupModule",defaultMessage:"Convert to relations group"}),f={key:"moveOrConvertToRelationsGroup",render:(e,t)=>(0,B.jsx)(ce().A,{...e,icon:(0,B.jsx)(Ee,{icon:(0,Be().H)({width:14})}),title:y,caption:(0,B.jsx)(m().sA,{id:"AdvancedModuleMenuItem.moveOrConvertToRelationsGroup.caption",defaultMessage:"Supports minimal or responsive page sections"})}),action:()=>o()};return(0,B.jsx)(Le().A,{...r,onFocus:t.onFocus,renderOrigin:(e,t)=>(0,B.jsx)(ce().A,{...e,ref:t,title:p,icon:g}),renderExtension:e=>{let o;return o=i.device.isMobile?{menuType:he().gu.ActionSheet}:{menuType:he().gu.Popup},(0,B.jsx)(ge().A,{...o,...e,children:(0,B.jsx)(ye().Ay,{type:ye().Oh.Vertical,initialFocus:0,sections:[{key:"sections",render:e=>(0,B.jsx)(fe().A,{...e}),items:[f]}],onAccept:t.onAccept})})}})}const Oe=(0,Y().wt)("propertyGroup",{viewBox:"0 0 20 20",svg:(0,B.jsx)("path",{d:"M5.49512 7.7334C5.35384 7.7334 5.23079 7.68099 5.12598 7.57617C5.02116 7.47135 4.96875 7.34603 4.96875 7.2002C4.96875 7.05436 5.01888 6.92904 5.11914 6.82422C5.22396 6.7194 5.34928 6.66699 5.49512 6.66699H6.27441C6.42025 6.66699 6.54557 6.7194 6.65039 6.82422C6.75977 6.92904 6.81445 7.05436 6.81445 7.2002C6.81445 7.35059 6.75977 7.47819 6.65039 7.58301C6.54557 7.68327 6.42025 7.7334 6.27441 7.7334H5.49512ZM5.49512 9.97559C5.34928 9.97559 5.22396 9.92546 5.11914 9.8252C5.01888 9.72038 4.96875 9.59505 4.96875 9.44922C4.96875 9.29883 5.01888 9.1735 5.11914 9.07324C5.22396 8.96842 5.34928 8.91602 5.49512 8.91602H6.27441C6.4248 8.91602 6.55241 8.96842 6.65723 9.07324C6.76204 9.1735 6.81445 9.29883 6.81445 9.44922C6.81445 9.59505 6.75977 9.72038 6.65039 9.8252C6.54557 9.92546 6.42025 9.97559 6.27441 9.97559H5.49512ZM8.16113 7.65137C8.03353 7.65137 7.92643 7.60807 7.83984 7.52148C7.75781 7.4349 7.7168 7.3278 7.7168 7.2002C7.7168 7.07715 7.76009 6.97461 7.84668 6.89258C7.93327 6.80599 8.03809 6.7627 8.16113 6.7627H14.5732C14.6963 6.7627 14.7988 6.80599 14.8809 6.89258C14.9674 6.97461 15.0107 7.07715 15.0107 7.2002C15.0107 7.3278 14.9674 7.4349 14.8809 7.52148C14.7988 7.60807 14.6963 7.65137 14.5732 7.65137H8.16113ZM8.16113 9.89355C8.03353 9.89355 7.92643 9.85026 7.83984 9.76367C7.75781 9.67708 7.7168 9.57227 7.7168 9.44922C7.7168 9.32161 7.76009 9.21452 7.84668 9.12793C7.93327 9.04134 8.03809 8.99805 8.16113 8.99805H14.5732C14.6963 8.99805 14.7988 9.04362 14.8809 9.13477C14.9674 9.22135 15.0107 9.32617 15.0107 9.44922C15.0107 9.57682 14.9674 9.68392 14.8809 9.77051C14.7988 9.85254 14.6963 9.89355 14.5732 9.89355H8.16113ZM4.1416 16.4492C3.40332 16.4492 2.84505 16.2624 2.4668 15.8887C2.08854 15.515 1.89941 14.9635 1.89941 14.2344V5.9082C1.89941 5.17904 2.08854 4.6276 2.4668 4.25391C2.84505 3.87565 3.40332 3.68652 4.1416 3.68652H15.8447C16.5876 3.68652 17.1481 3.87565 17.5264 4.25391C17.9046 4.6276 18.0938 5.17904 18.0938 5.9082V14.2344C18.0938 14.9635 17.9046 15.515 17.5264 15.8887C17.1481 16.2624 16.5876 16.4492 15.8447 16.4492H4.1416ZM4.22363 15.1094H15.7695C16.084 15.1094 16.3255 15.0273 16.4941 14.8633C16.6628 14.6947 16.7471 14.4463 16.7471 14.1182V6.02441C16.7471 5.69629 16.6628 5.4502 16.4941 5.28613C16.3255 5.11751 16.084 5.0332 15.7695 5.0332H4.22363C3.90462 5.0332 3.66081 5.11751 3.49219 5.28613C3.32812 5.4502 3.24609 5.69629 3.24609 6.02441V14.1182C3.24609 14.4463 3.32812 14.6947 3.49219 14.8633C3.66081 15.0273 3.90462 15.1094 4.22363 15.1094Z"})});function Re(e){let{propertyGroups:t,propertyIds:r,parent:a,onSelectSectionMove:d,...u}=e;const c=(0,n().v3)(),p=(0,M().ET)(),g=(0,i.useCallback)((e=>{const i=p.collectionStore();let n=t;for(const t of r)n=(0,o(706665).lT)({propertyGroups:n,propertyId:t,destinationGroupId:e.id});i&&ae().createAndCommit({environment:c,perform(e){(0,o(395963).Yf)({collectionStore:i,newGroups:n,transaction:e})},canUndo:!0,userAction:"MoveToPropertyGroupMenuItem.handlePropertyGroupClick"}),d()}),[p,c,d,t,r]),y=(0,s().IS)((e=>({icon:{width:20,height:20},sectionMenuItem:{paddingTop:4,paddingBottom:4}})),[]),f=(0,l().K8)((()=>t.map((e=>({key:e.id,render:(t,o)=>(0,B.jsx)(ce().A,{...t,title:e.title}),action:()=>g(e)})))),[g,t]),v=(0,B.jsx)(m().sA,{id:"ModuleActionMenu.buttons.moveToPropertiesGroupButton",defaultMessage:"Add to property group"}),h=(0,B.jsx)(Ee,{icon:Oe(y.icon)});return t.length<=1?(0,B.jsx)(ce().A,{...u,icon:h,title:v}):(0,B.jsx)(Le().A,{...u,onFocus:a.onFocus,renderOrigin:(e,t)=>(0,B.jsx)(ce().A,{...e,ref:t,title:v,icon:h}),renderExtension:e=>{let t;return t=c.device.isMobile?{menuType:he().gu.ActionSheet}:{menuType:he().gu.Popup,width:200},(0,B.jsx)(ge().A,{...t,...e,children:(0,B.jsx)(ye().Ay,{type:ye().Oh.Vertical,initialFocus:0,sections:[{key:"sections",render:e=>(0,B.jsx)(fe().A,{...e,style:y.sectionMenuItem,title:(0,B.jsx)(m().sA,{id:"moveToPropertyGroupMenuItem.sections",defaultMessage:"Sections"})}),items:f}],onAccept:a.onAccept})})}})}const He=i.memo(Re),Qe=i.memo((function(e){const{layoutType:t,module:o,isModuleHoveredOrSelected:r}=e;switch(t){case"form":if("formQuestion"===o.type)return(0,B.jsx)(Ge,{moduleId:o.id,isModuleHoveredOrSelected:r});break;case"page_in_collection":case void 0:return(0,B.jsx)(Ke,{module:o});default:(0,f().HB)(t)}return null}));function Ge(e){let{moduleId:t,isModuleHoveredOrSelected:o}=e;const{canEditLayout:r}=(0,P().LH)(),i=(0,s().IS)((()=>({actionButton:{position:"absolute",top:10,right:10,zIndex:1e3}})),[]);return r?(0,B.jsx)("div",{style:i.actionButton,children:(0,B.jsx)(Ve,{moduleId:t,isModuleHoveredOrSelected:o})}):null}function Ke(e){let{module:t}=e;const{canEditLayout:o}=(0,P().LH)(),r=function(e){const{layoutModule:t}=e,{sessionId:o,layoutStore:r,setModuleSelection:s}=(0,P().LH)(),a=(0,n().v3)(),u=(0,M().ET)(),c=(0,l().K8)((()=>u.collectionStore()),[u]),{collectionSchema:p,collectionFormat:g,propertyGroups:y}=(0,l().K8)((()=>({collectionSchema:null==c?void 0:c.getSchema(),collectionFormat:null==c?void 0:c.getFormat(),propertyGroups:(null==c?void 0:c.getNormalizedPropertyGroups())??[]})),[c]),v=(0,i.useMemo)((()=>g&&p?(0,U().T)({format:g,schema:p,visibilityLevels:["inline","minimal"]}).map((e=>e.section)):[]),[g,p]),{layoutType:h,isTabbedLayout:x,viewsMainTabModuleKey:S,currentModulePosition:b,modulesSplitByMoveable:C}=(0,l().K8)((()=>{var e,o;const i=r.getModules(),n=(0,re().JO)(i,(e=>e.id===t.id)),l=null==n?void 0:n.area;if("form_conditional_modules"===l)throw new Error("[Forms Conditional Logic Not Implemented] usePageLayoutModuleActionMenuListItems not implemented for form_conditional_modules");const s=l&&("views_main_tab_modules"===l?null==i||null===(e=i[l])||void 0===e?void 0:e[n.viewId]:null==i?void 0:i[l]),a=l&&s&&(0,ne().jS)(l,s),d=null===(o=function(e){if(e.views_main_tab_modules)return(0,f().uv)(e.views_main_tab_modules)}(i))||void 0===o?void 0:o[0];return{layoutType:r.getLayoutType(),isTabbedLayout:r.isTabbedPageLayout(),viewsMainTabModuleKey:d,currentModulePosition:n,modulesSplitByMoveable:a}}),[t.id,r]),_=(0,i.useCallback)((e=>{let{destinationModuleId:t}=e;h&&((0,oe().Hc)(h)?s(void 0):s({type:"existing_module",moduleId:t,isDragging:!1,draggingModuleInitialArea:void 0,draggingModuleFinalArea:void 0}),(0,oe().U2)(h)&&(0,ke().z)({layoutStore:r,moduleId:t,environment:a}))}),[r,h,s,a]),I=(0,i.useMemo)((()=>{const e=[],i=(0,ie().p)(t,"page_details");if(C&&C.moveableModules.length>1&&null!=b&&b.area){const i=C.moveableModules.findIndex((e=>e.id===t.id)),n=-1!==i,l=0===i,s=i===C.moveableModules.length-1;n&&!l&&e.push({key:"move-up",render:e=>(0,B.jsx)(ce().A,{...e,title:(0,B.jsx)(m().sA,{id:"ModuleActionMenu.buttons.moveUpButton",defaultMessage:"Move up"}),icon:(0,B.jsx)(Ee,{icon:(0,X().q)({width:14})})}),action:()=>{const e=C.nonMoveableHeaderModules.length+i;(0,be().E)({environment:a,layoutStore:r,position:{type:"absolute",index:e-1,..."views_main_tab_modules"===(null==b?void 0:b.area)?{area:"views_main_tab_modules",viewId:b.viewId}:{area:b.area}},moduleId:t.id,sessionId:o}),_({destinationModuleId:t.id})}}),n&&!s&&e.push({key:"move-down",render:e=>(0,B.jsx)(ce().A,{...e,title:(0,B.jsx)(m().sA,{id:"ModuleActionMenu.buttons.moveDownButton",defaultMessage:"Move down"}),icon:(0,B.jsx)(Ee,{icon:(0,$().P)({width:14})})}),action:()=>{const e=C.nonMoveableHeaderModules.length+i;(0,be().E)({environment:a,layoutStore:r,position:{type:"absolute",index:e+1,..."views_main_tab_modules"===(null==b?void 0:b.area)?{area:"views_main_tab_modules",viewId:b.viewId}:{area:b.area}},moduleId:t.id,sessionId:o}),_({destinationModuleId:t.id})}})}if("page_main"!==(null==b?void 0:b.area)&&"views_main_tab_modules"!==(null==b?void 0:b.area)||!i?"page_details"===(null==b?void 0:b.area)&&e.push({key:"moveToMainPage",render:e=>(0,B.jsx)(ce().A,{...e,title:(0,B.jsx)(m().sA,{id:"ModuleActionMenu.buttons.moveToPage",defaultMessage:"Move to page"}),icon:(0,B.jsx)(Ee,{icon:Z({width:14})})}),action:()=>{x&&S?(0,be().E)({environment:a,position:{type:"area_relative",area:"views_main_tab_modules",viewId:S,location:"end_moveable"},moduleId:t.id,layoutStore:r,sessionId:o}):(0,be().E)({environment:a,position:{type:"area_relative",area:"page_main",location:"end_moveable"},moduleId:t.id,layoutStore:r,sessionId:o}),_({destinationModuleId:t.id})}}):e.push({key:"moveToSidebar",render:e=>(0,B.jsx)(ce().A,{...e,title:(0,B.jsx)(m().sA,{id:"ModuleActionMenu.buttons.moveToInfoPanel",defaultMessage:"Move to panel"}),icon:(0,B.jsx)(Ee,{icon:(0,J().o)({width:14})})}),action:()=>{(0,be().E)({environment:a,position:{type:"area_relative",area:"page_details",location:"end_moveable"},moduleId:t.id,layoutStore:r,sessionId:o}),_({destinationModuleId:t.id})}}),(0,le().Fe)(t)&&(0,le().wm)(t)){let o=[];(0,Q().gx)(t)?o=[t.propertyId]:(0,Q().V_)(t)?o=v:(0,f().HB)(t);const i=()=>{var e;ae().createAndCommitOrAppend({environment:a,transaction:void 0,canUndo:!0,userAction:"ModuleActionsMenu.moveToPropertyGroup",perform(e){for(const t of o)(0,je().HD)({environment:a,transaction:e,layoutStore:r,property:t})}});const t=null===(e=r.firstModuleOfType("properties"))||void 0===e?void 0:e.id;t?_({destinationModuleId:t}):s(void 0)};e.push({key:"moveToPropertiesGroupModule",render:(e,t)=>(0,B.jsx)(He,{...e,parent:t,propertyIds:o,onSelectSectionMove:i,propertyGroups:y}),action:i})}if((0,Q().Yp)(t)){const o=()=>{var e;ae().createAndCommitOrAppend({environment:a,transaction:void 0,canUndo:!0,userAction:"ModuleActionsMenu.moveToRelationsGroupModule",perform(e){const o=r.getCollectionModel();if(!o)return;const i=k().md.createChildStore(r,o.pointer);(0,je().HD)({environment:a,transaction:e,layoutStore:r,property:t.propertyId}),se().Z7({property:t.propertyId,visibility:"inline",schema:o.getSchema(),format:o.getFormat(),collectionStore:i,environment:a,transaction:e})}});const o=null===(e=r.firstModuleOfType("relationsGroup"))||void 0===e?void 0:e.id;o?_({destinationModuleId:o}):s(void 0)};e.push({key:"moveToRelationsGroup",render:(e,t)=>(0,B.jsx)(De,{parent:t,onSelect:o,...e}),action:o})}if((0,le().Fe)(t)){const i=async()=>{var e;if(null==b||!b.area||!p)return;const i=await we(t.type);if(i)switch(i){case"delete_module":ae().createAndCommitOrAppend({environment:a,transaction:void 0,canUndo:!0,perform(e){if((0,Q().gx)(t))(0,je().HD)({environment:a,transaction:e,layoutStore:r,property:t.propertyId});else if((0,Q().V_)(t))for(const t of v)(0,je().HD)({environment:a,transaction:e,layoutStore:r,property:t});else(0,Ce().U)({environment:a,layoutStore:r,position:{..."views_main_tab_modules"===(null==b?void 0:b.area)?{area:"views_main_tab_modules",viewId:b.viewId}:{area:b.area},moduleId:t.id},sessionId:o})},userAction:"ModuleActionsMenu.removePropertyFromLayout.deleteModule"});const l=null===(e=r.firstModuleOfType("properties"))||void 0===e?void 0:e.id;return void(l&&_({destinationModuleId:l}));case"delete_property_and_module":let c=[];if((0,Q().gx)(t)?c=[t.propertyId]:(0,Q().V_)(t)&&(c=v||[]),c.length)for(const e of c){var n;(0,de().B)({collectionContextStore:u,environment:a,property:e,schema:p,from:"table_column"}),(0,Ae().PS)({environment:a,module:t,sessionId:o,collectionId:null===(n=r.getCollectionModel())||void 0===n?void 0:n.id,layoutId:r.id,context:(0,d().We)(null==b?void 0:b.area),area:null==b?void 0:b.area,depth:0})}else(0,Ce().U)({environment:a,layoutStore:r,sessionId:o,position:{..."views_main_tab_modules"===(null==b?void 0:b.area)?{area:"views_main_tab_modules",viewId:b.viewId,moduleId:t.id}:{area:b.area,moduleId:t.id}}});return void s(void 0);default:(0,f().HB)(i)}};e.push({key:"removeModule",render:e=>(0,Q().gx)(t)?(0,B.jsx)(ue().$,{...e,getTitleOverride:e=>{let{isRequiredProperty:t}=e;return t?void 0:(0,B.jsx)(m().sA,{id:"ModuleActionMenu.buttons.removeFromPropertyModule",defaultMessage:"Remove from layout"})},iconTransformer:e=>(0,B.jsx)(Ee,{icon:e}),collectionContextStore:u,property:t.propertyId}):(0,B.jsx)(ce().A,{...e,title:(0,B.jsx)(m().sA,{id:"ModuleActionMenu.buttons.removeFromModule",defaultMessage:"Remove from layout"}),isRedOnHover:!0,icon:(0,B.jsx)(Ee,{icon:(0,te().I)({width:14})})}),action:i})}return e}),[t,C,b,a,r,o,_,x,S,v,s,y,p,u]);return I}({layoutModule:t}),a=(0,s().IS)((()=>({actionButton:{position:"absolute",top:4,right:4,zIndex:1e3}})),[]);return o&&0!==r.length?(0,B.jsx)("div",{style:a.actionButton,children:(0,B.jsx)(qe,{moduleId:t.id,menuListItems:r})}):null}function Ve(e){let{moduleId:t,isModuleHoveredOrSelected:o}=e;const{layoutStore:r,setModuleSelection:i}=(0,P().LH)(),n=(0,l().K8)((()=>r.getModuleById(t)),[r,t]),a=(0,l().K8)((()=>{if(n&&"formQuestion"===n.type)return Me().c.createChildStore(r,{table:"form_question",id:n.formQuestionId,spaceId:r.getSpaceId()??""})}),[r,n]),d=(0,Te().d)(),u=(0,s().IS)((e=>({iconStyle:{fill:e.palette.uiBlue[600]}})),[]),c=(0,m().tz)();if(!n||!a)return null;const p=c.formatMessage({id:"FormLayoutModuleActionMenu.editQuestion.tooltip",defaultMessage:"Edit question"});return(0,B.jsx)("div",{style:{opacity:o?1:0,pointerEvents:o?"auto":"none",transition:"opacity 200ms ease",borderRadius:4,height:24},children:(0,B.jsx)(ve().A,{render:e=>(0,B.jsx)(me().A,{...e,icon:ee()._,hasBackground:!0,style:{...d.button,cursor:"pointer"},iconStyle:u.iconStyle,pressedStyle:d.buttonPressed,hoveredStyle:d.buttonHovered,ariaLabel:p,onMouseDown:e=>{(0,D().SQ)({event:e,context:D().y$.EditorMouseDown})},onClick:()=>i({type:"existing_module",moduleId:t,isDragging:!1,draggingModuleInitialArea:void 0,draggingModuleFinalArea:void 0})}),renderTooltip:()=>p})})}function qe(e){let{moduleId:t,menuListItems:o}=e;const r=(0,m().tz)(),n=(0,i.useMemo)((()=>[{type:"actionGroup",label:r.formatMessage({id:"ModuleActionMenu.openButton",defaultMessage:"Action menu for module"}),icon:ee()._,menuListItems:o}]),[r,o]);return(0,B.jsx)(Ne,{moduleId:t,actionMenuItems:n,isModuleHoveredOrSelected:!0,boxShadow:!1})}function We(e){let{isFirst:t,isLast:o}=e;return{borderTopLeftRadius:t?4:0,borderBottomLeftRadius:t?4:0,borderTopRightRadius:o?4:0,borderBottomRightRadius:o?4:0,borderRight:"solid rgba(15, 15, 15, 0.1)",borderRightWidth:o?0:1}}function Ne(e){let{moduleId:t,actionMenuItems:o,isModuleHoveredOrSelected:r,boxShadow:n}=e;const[l,s]=(0,i.useState)(!1),a=(0,i.useCallback)((e=>{s(e)}),[]);return(0,B.jsx)("div",{style:{opacity:r||l?1:0,pointerEvents:r||l?"auto":"none",transition:"opacity 200ms ease",borderRadius:4,height:24,boxShadow:n?"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px, rgba(15, 15, 15, 0.1) 0px 2px 4px":void 0},children:o.map(((e,t)=>{const r=0===t,i=o.length-1===t;switch(e.type){case"action":return(0,B.jsx)(ze,{item:e,isFirst:r,isLast:i},t);case"actionGroup":return(0,B.jsx)(Ue,{itemGroup:e,isFirst:r,isLast:i,isOpen:l,setIsOpen:a},t)}}))})}function ze(e){let{item:t,isFirst:o,isLast:r}=e;const{layoutStore:i}=(0,P().LH)(),n=(0,l().K8)((()=>i.getLayoutType()),[i]),a=(0,s().IS)((e=>({iconButton:{...We({isFirst:o,isLast:r})},icon:{..."form"===n?{fill:e.icon.secondary}:{}}})),[o,r,n]);return(0,B.jsx)(ve().A,{render:e=>(0,B.jsx)(me().A,{...e,icon:t.icon,hasBackground:!0,ariaLabel:t.label,style:a.iconButton,iconStyle:a.icon,onMouseDown:e=>{(0,D().SQ)({event:e,context:D().y$.EditorMouseDown})},onClick:t.action}),renderTooltip:()=>t.tooltipLabel??null,disableTooltip:!t.tooltipLabel})}function Ue(e){let{itemGroup:t,isFirst:o,isLast:r,isOpen:i,setIsOpen:n}=e;const{layoutStore:a}=(0,P().LH)(),d=(0,l().K8)((()=>a.getLayoutType()),[a]),u=(0,s().IS)((e=>({iconButton:{...We({isFirst:o,isLast:r})},icon:{..."form"===d?{fill:e.icon.secondary}:{fill:e.text.uiBluePrimary}},iconButtonHovered:{..."form"===d?void 0:{background:e.tint.uiBlueHover}},sectionMenuItem:{paddingTop:4,paddingBottom:4}})),[o,r,d]);return(0,B.jsx)(pe().Ay,{alignmentToOrigin:xe().C.End,popupType:Se().n.Popup,onClose:()=>n(!1),onClick:()=>n(!0),open:i,render:()=>(0,B.jsx)(ge().A,{menuType:he().gu.Popup,onClick:()=>n(!1),children:(0,B.jsx)(ye().Ay,{initialFocus:void 0,sections:[{key:0,render:e=>(0,B.jsx)(fe().A,{...e,desktopStyle:u.sectionMenuItem}),items:t.menuListItems}],type:ye().Oh.Vertical})}),renderOrigin:e=>(0,B.jsx)(me().A,{...e,icon:t.icon,hasBackground:"form"===d,ariaLabel:t.label,style:u.iconButton,iconStyle:u.icon,onMouseDown:e=>{(0,D().SQ)({event:e,context:D().y$.EditorMouseDown})},hoveredStyle:u.iconButtonHovered,pressedStyle:u.iconButtonHovered})})}const $e=(0,i.createContext)(void 0);$e.displayName="PageEditorModuleContext";const Ye=$e.Provider;var Ze=()=>o(817942);const Je=!1,Xe=10;function et(e){const{isSelected:t,isDragging:o,isConfigurable:r,isDraggable:n}=function(){const e=(0,i.useContext)($e);if(!e)throw new Error("PageEditorModuleContext not found");return e}(),{style:a,children:d,module:u,area:c}=e,p="placeholder"===u.type,{setModuleSelection:m,layoutStore:g,currentModuleSelection:y}=(0,P().LH)(),[f,v]=(0,V().B)(),h=(0,i.useRef)(null),x=(0,O().A)(f,h),S=(0,l().K8)((()=>{var e;return null===(e=g.getModel())||void 0===e?void 0:e.getLayoutType()}),[g]),M=(0,l().K8)((()=>(0,G().cq)(g)),[g]),b=(0,z().z)();(0,R().b)(q().A,(()=>({layoutStore:g,moduleId:u.id,moduleType:u.type,area:c,getNode:()=>h.current})),[g,u,h,c]);const C=(0,i.useCallback)((e=>{if(!r||"viewsMain"===u.type)return{};const i={margin:0,borderRadius:"form"===S?12:8,...!r||n||"form"===S&&p?{}:{cursor:"pointer",margin:"0 0 12px 0"},padding:"form"!==S||p?0:12,transition:"box-shadow 0.3s"};if(o&&!p)return{...i,...(0,K().nl)({width:3,color:e.stroke.uiBluePrimary}),transform:"scale(1.03)",transition:"transform 0.8s cubic-bezier(0.5, -1.5, 0.5, 2)"};if(t&&!p)return{...i,...(0,K().nl)({width:3,color:e.stroke.uiBluePrimary})};const l=null==y?void 0:y.isDragging;return v&&!l?{...i,...(0,K().nl)({width:3,color:"light"===e.mode?e.stroke.uiBlueSecondary:e.text.uiBlueSecondary})}:{...i,...(0,K().nl)({width:1,color:"light"===e.mode?e.stroke.uiBlueSecondary:e.text.uiBlueSecondary})}}),[null==y?void 0:y.isDragging,r,n,o,v,p,t,S,u.type]),_=(0,s().IS)((e=>{const t=C(e),o="form"!==S?Xe:"cover"===u.type?0:"formTitle"===u.type?b:Xe,i=p?e.palette.uiBlue[75]:"form"===S&&M?e.peekModalBackground:e.contentBackground;return{labelContainer:{height:32,backgroundColor:"light"===e.mode?e.palette.uiBlue[100]:e.palette.uiBlue[200],display:"flex",alignItems:"center",gap:4,padding:6},dragHandle:{fill:e.text.uiBluePrimary,width:12,height:12},noDragHandle:{},label:{fontSize:14,fontWeight:500,color:e.text.uiBluePrimary,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",paddingRight:24},previewContainer:{padding:12},container:{background:i,width:"100%",position:"relative",marginBottom:o,...r?t:{},overflow:"formTitle"!==u.type&&"viewsMain"!==u.type?"hidden":void 0,...a},mouseEventCover:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:999}}}),[C,r,u.type,a,S,b,p,M]),I="form"!==S&&!Je&&"viewsMain"!==u.type,w=((0,N().H)(u),v||t);return(0,B.jsxs)("div",{style:_.container,ref:x,onClick:e=>{r&&!n&&"viewsMain"!==u.type&&m({type:"existing_module",moduleId:u.id,isDragging:!1}),r&&(0,D().SQ)({event:e,context:D().y$.Click})},className:"cover"===u.type?Ze().pv:Ze().hg,children:["form"!==S&&"viewsMain"!==u.type&&r?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{style:_.labelContainer,children:[n?(0,H().i)(_.dragHandle):(0,B.jsx)("div",{style:_.noDragHandle}),(0,B.jsx)("div",{style:_.label,children:(0,B.jsx)(tt,{module:u})})]}),(0,B.jsx)("div",{style:_.previewContainer,children:d})]}):d,I&&(0,B.jsx)("div",{style:_.mouseEventCover}),r&&(0,B.jsx)(Qe,{layoutType:S,module:u,isModuleHoveredOrSelected:w})]})}function tt(e){const{module:t}=e;return(0,Q().gx)(t)?(0,B.jsx)(ot,{module:t}):(0,B.jsx)(m().sA,{...W().s[t.type]})}function ot(e){const{module:t}=e,{collectionStore:o}=(0,P().bi)(),r=(0,l().K8)((()=>o.getSchema()),[o]),i=(0,l().K8)((()=>r[t.propertyId]),[t,r]);return i?(0,B.jsx)(B.Fragment,{children:i.name}):null}var rt=()=>o(31503),it=()=>o(133033),nt=()=>o(725614),lt=()=>o(958102),st=()=>o(630960),at=()=>o(471645),dt=()=>o(279897),ut=()=>o(511177),ct=()=>o(646796),pt=()=>o(239391),mt=()=>o(710149),gt=()=>o(205682);function yt(e){let{layoutStore:t,formQuestionId:o}=e;const r=(0,n().v3)(),s=(0,M().ET)(),d=(0,i.useRef)(null),{canEditLayout:u}=(0,P().LH)(),{collectionStore:c,formBlock:p}=(0,l().K8)((()=>{var e;return{collectionStore:s.collectionStore(),formBlock:null===(e=s.collectionViewStore())||void 0===e?void 0:e.getFormBlockStore()}}),[s]);if(!c)throw new Error("No collection store found");const m=(0,l().K8)((()=>t.getSpaceId()),[t]),g=(0,l().K8)((()=>{if(m)return k().c7.createChildStore(t,{table:"form_question",id:o,spaceId:m})}),[o,t,m]),y=(0,l().K8)((()=>!(null!=g&&g.isReady())),[g]),f=(0,l().K8)((()=>{var e;if(g)return null===(e=g.getConfig())||void 0===e?void 0:e.propertyId}),[g]),v=(0,l().K8)((()=>{const e=c.getSchema();return e?Object.keys(e):[]}),[c]),x=(0,l().K8)((()=>{const e=c.getSchema();if(e&&f)return(0,a()._g)({schema:e,property:f})}),[c,f],{useDeepEqual:!0}),S=(0,ct().W)({inMemoryRecordCacheName:"FormQuestionTemporaryRecordCache",collectionSchemaPropertyIds:v,collectionId:c.id,spaceId:m,formMode:"builder"}),b=(0,l().K8)((()=>{const e=c.getSchema();if(!e||!g)return"generic_error";return g.getQuestionErrorState(r,e,null==p?void 0:p.hasSitePublicPermission())}),[c,r,p,g]),{autofocusedQuestionTextStore:C}=(0,h().cJ)(),_=(0,l().K8)((()=>Boolean(C.state&&C.state.questionId===(null==g?void 0:g.id))),[C,null==g?void 0:g.id]);return(0,i.useEffect)((()=>{var e,t;g&&(_&&("title"===(null===(e=C.state)||void 0===e?void 0:e.questionInputType)?nt().selectAllTextMulti({environment:r,store:g.getNameStore(),canSelectAllBlocks:!1,contentEditableContextId:void 0}):"description"===(null===(t=C.state)||void 0===t?void 0:t.questionInputType)&&nt().setSelectionAtEnd({store:g.getDescriptionStore()}),C.clear()))}),[C,r,_,g]),y?(0,B.jsx)(ft,{}):g&&f&&c&&S?(0,B.jsxs)("div",{ref:d,children:[(0,B.jsx)(vt,{formQuestionStore:g}),b?(0,B.jsx)(St,{questionErrorState:b,propertyType:null==x?void 0:x.type}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(ht,{formQuestionStore:g}),x&&(0,rt().OG)(x)&&(0,B.jsx)(xt,{formQuestionStore:g,propertySchema:x}),(0,B.jsx)(pt().q,{store:S,property:f,disabled:!0,locked:!u,format:"form_editor",blockPropertyValueOverlayStore:gt().A,collectionStore:c,tableWrap:!1,formQuestionStore:g},f)]})]}):null}function ft(){const e=(0,s().IS)((e=>({questionTitleShimmer:{borderRadius:8,height:22,width:200},questionInputShimmer:{borderRadius:5,height:16,width:"100%",marginTop:12}})),[]);return(0,B.jsxs)("div",{children:[(0,B.jsx)(mt().A,{style:e.questionTitleShimmer}),(0,B.jsx)(mt().A,{style:e.questionInputShimmer})]})}function vt(e){let{formQuestionStore:t}=e;const o=(0,n().v3)(),r=(0,M().ET)(),{collectionStore:s}=(0,h().cJ)(),{canEditLayout:a}=(0,P().LH)(),d=(0,l().K8)((()=>Boolean(r.normalizedSchemaStore.state)),[r]),u=(0,i.useMemo)((()=>(0,y().sg)((()=>{(0,lt().maybeSyncQuestionNameToPropertyName)({environment:o,questionStore:t,collectionStore:s,collectionContextStore:r})}),500)),[r,s,o,t]),c=!a;return d&&s?(0,B.jsx)(ut().j,{formMode:"builder",disabled:c,onChange:u,formQuestionStore:t}):null}function ht(e){let{formQuestionStore:t}=e;const{canEditLayout:o}=(0,P().LH)(),r=!o;return(0,B.jsx)(at().P,{disabled:r,formQuestionStore:t,formMode:"builder"})}function xt(e){return(0,B.jsx)(dt().A,{...e,formMode:"builder"})}function St(e){let{questionErrorState:t,propertyType:o}=e;const r=(0,s().IS)((e=>({helpIcon:{width:16,marginLeft:6,fill:e.icon.secondary},container:{display:"flex",flexDirection:"row",alignItems:"center",paddingLeft:8},textSpan:{color:e.text.tertiary}})),[]),n=(0,i.useMemo)((()=>{switch(t){case"deleted_property":return(0,B.jsx)(m().sA,{id:"BrokenLinkedPropertyWarning.deletedProperty",defaultMessage:"This question's corresponding property has been deleted."});case"invalid_property_type":return(0,B.jsx)(m().sA,{id:"BrokenLinkedPropertyWarning.invalidProperty",defaultMessage:"This question's corresponding property is not supported."});case"invalid_property_type_for_public_form":return"person"===o?(0,B.jsx)(m().sA,{id:"BrokenLinkedPropertyWarning.invalidPublicProperty.person",defaultMessage:"Person property is not supported in public forms."}):(0,B.jsx)(m().sA,{id:"BrokenLinkedPropertyWarning.invalidPublicProperty.generic",defaultMessage:"This question's linked property type is not supported in public forms."});case"related_collection_not_public":return(0,B.jsx)(m().sA,{...st().yh.relatedCollectionNotPublic});case"generic_error":return(0,B.jsx)(m().sA,{id:"BrokenLinkedPropertyWarning.message",defaultMessage:"Something is wrong with this linked property."})}}),[o,t]),l=(0,i.useMemo)((()=>{switch(t){case"deleted_property":return(0,B.jsx)(m().sA,{id:"BrokenLinkedPropertyWarning.deletedProperty.helperTooltip",defaultMessage:"Delete this question or link it to a different property."});case"invalid_property_type":return(0,B.jsx)(m().sA,{id:"BrokenLinkedPropertyWarning.invalidProperty.helperTooltip",defaultMessage:"Change the question type to a supported type"});case"generic_error":return(0,B.jsx)(m().sA,{id:"BrokenLinkedPropertyWarning.genericError.helperTooltip",defaultMessage:"Delete this question or link it to a different property."})}}),[t]);return(0,B.jsxs)("div",{style:r.container,children:[(0,B.jsx)("span",{style:r.textSpan,children:n}),(0,B.jsx)(ve().A,{renderTooltip:()=>(0,B.jsx)("div",{style:{width:240,whiteSpace:"pre-wrap"},children:l}),disableTooltip:"invalid_property_type_for_public_form"===t||"related_collection_not_public"===t,render:e=>"invalid_property_type_for_public_form"===t||"related_collection_not_public"===t?null:(0,B.jsx)("div",{...e,children:(0,it().$)(r.helpIcon)})})]})}var Mt=()=>o(963900),bt=()=>o(661344),Ct=()=>o(601726),_t=()=>o(793282),It=()=>o(660197),wt=(o(672577),o(737550),()=>o(289915)),jt=()=>o(412532),At=()=>o(626466),kt=()=>o(524060),Tt=()=>o(72645),Pt=()=>o(236262),Bt=()=>o(37165),Lt=()=>o(751735),Ft=()=>o(686526),Et=()=>o(832857),Dt=()=>o(98205),Ot=()=>o(859794),Rt=()=>o(704152),Ht=()=>o(493823),Qt=()=>o(439264),Gt=()=>o(897119),Kt=()=>o(47170),Vt=()=>o(940371),qt=()=>o(170253),Wt=()=>o(700250),Nt=()=>o(991249),zt=()=>o(329304);function Ut(e){const{parentModule:t}=e,o=(0,l().K8)((()=>t.conditionalGroups),[t],{useDeepEqual:!0});return o?(0,B.jsx)(B.Fragment,{children:o.map((e=>(0,B.jsx)($t,{conditionalGroup:e,parentModule:t},e.id)))}):null}function $t(e){var t;const{conditionalGroup:o,parentModule:r}=e,a=(0,n().v3)(),{setModuleSelection:d,currentModuleSelection:u,canEditLayout:c,layoutStore:p,sessionId:m}=(0,P().LH)(),g=(0,Kt().O)(),{formConditionalGroupsStore:f}=(0,h().cJ)(),v=(0,l().K8)((()=>{const e=(0,Dt().h8)(r.id,o.id);return!f.state.conditionalGroupCollapsedStates[e]}),[o.id,f,r.id]),x=(0,i.useMemo)((()=>new(qt().A)),[]),[S,M]=(0,i.useState)(!1),[b,C]=(0,i.useState)(!1),_=(0,s().IS)((e=>({conditionalGroupContainer:{display:"flex",cursor:"auto",paddingTop:20},conditionalGroupContent:{display:"flex",flexDirection:"column",paddingBottom:12,paddingLeft:10,marginLeft:4,cursor:"auto",flexGrow:1},draggableList:{gap:24,display:"flex",flexDirection:"column"}})),[]),I=(0,l().K8)((()=>{var e;const t=null===(e=r.conditionalGroups)||void 0===e?void 0:e.find((e=>e.id===o.id));return t?t.children??[]:[]}),[o,r]),w=(0,i.useCallback)((e=>{const t="existing_module"===(null==u?void 0:u.type)&&u.moduleId===e;return(0,B.jsx)(ao,{pageModuleId:e,active:t,area:"form_conditional_modules"})}),[u]),j=(0,l().K8)((()=>{const e=p.getModules().form_conditional_modules;if(!e)return!0;return I.some((t=>"formQuestion"===e[t].type))}),[I,p]),A=(0,zt()._X)({name:"forms_conditional_logic",spaceId:g,userId:null===(t=a.currentUser)||void 0===t?void 0:t.id}),k=null==A?void 0:A.upsell,T=void 0===r.parentModuleId&&k,L=(0,i.useCallback)(((e,t)=>{let{key:i,endPosition:n}=t;(0,be().E)({environment:a,layoutStore:p,position:{type:"absolute",area:"form_conditional_modules",parentConditionalGroupId:o.id,parentModuleId:r.id,index:n},moduleId:i,sessionId:m})}),[o.id,a,p,r.id,m]),F=(0,i.useCallback)((()=>{const e=(0,Dt().h8)(r.id,o.id),t=f.state.conditionalGroupCollapsedStates[e];f.setState({conditionalGroupCollapsedStates:{...f.state.conditionalGroupCollapsedStates,[e]:!t}})}),[o.id,f,r.id]),E=(0,i.useCallback)((()=>{d(void 0)}),[d]),O=(0,i.useCallback)((e=>{e&&d({type:"existing_module",moduleId:e,isDragging:!1})}),[d]);return(0,B.jsxs)("div",{onMouseDown:e=>{M(!1),C(!1),(0,D().SQ)({event:e,context:D().y$.EditorMouseDown,callback:y().D_})},children:[T&&(0,B.jsx)(Yt,{upsell:k}),(0,B.jsxs)("div",{style:_.conditionalGroupContainer,children:[(0,B.jsx)(Zt,{isGroupExpanded:v,toggleGroupVisibility:F}),(0,B.jsxs)("div",{style:_.conditionalGroupContent,children:[(0,B.jsx)(Jt,{parentModule:r,groupId:o.id,trigger:o.trigger,isGroupExpanded:v,filterOptionsPopupOpen:S,setFilterOptionsPopupOpen:M,filterOperatorPopupOpen:b,setFilterOperatorPopupOpen:C}),v&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Qt().Ay,{className:Ze().hg,store:x,keys:I,direction:"vertical",onDrop:(e,t)=>{L(e,t)},onDragCancel:E,hoverCursorStyleOverride:1===I.length?"pointer":void 0,onClick:O,draggingStyle:{display:void 0},draggingStyleForNonDraggedItems:{display:void 0},renderKey:e=>w(e),disabled:!c,style:_.draggableList}),j&&(0,B.jsx)(oo,{parentModuleId:r.id,parentConditionalGroupId:o.id})]})]})]})]})}function Yt(e){const{upsell:t}=e,o=(0,n().v3)(),r=(0,s().IS)((e=>({container:{color:e.text.uiYellowPrimary,background:e.tint.uiYellowHover,borderRadius:6,width:"100%",padding:"10px 22px",marginTop:24,fontSize:14,display:"flex",alignItems:"center"},upgradeButton:{marginRight:-4,color:e.text.uiYellowPrimary,fontWeight:v().Wy.medium},upgradeButtonHovered:{backgroundColor:(0,Lt().X4)(e.text.uiYellowPrimary,.1)},upgradeButtonPressed:{backgroundColor:(0,Lt().X4)(e.text.uiYellowPrimary,.2)}})),[]);return(0,B.jsxs)("div",{style:r.container,children:[(0,B.jsx)("div",{style:{width:"90%",marginRight:10},children:(0,B.jsx)(m().sA,{id:"upgradeForConditionalLogicWarning.warning",defaultMessage:"Conditional logic is only available on Business and Enterprise plan types."})}),(0,B.jsx)(Ht().p,{style:r.upgradeButton,hoveredStyle:r.upgradeButtonHovered,pressedStyle:r.upgradeButtonPressed,onMouseDown:()=>{Nt().K(o,{upsell:t,from:"forms_conditional_logic"})},children:(0,B.jsx)(m().sA,{id:"upgradeForConditionalLogicWarning.upgrade",defaultMessage:"Upgrade"})})]})}function Zt(e){const{isGroupExpanded:t,toggleGroupVisibility:o}=e,r=(0,s().IS)((e=>({groupBar:{gap:6,opacity:"light"===e.mode?.5:.75,color:e.text.uiBlueSecondary,display:"flex",flexDirection:"column",alignItems:"center",marginTop:3,paddingLeft:26},toggleHovered:{background:void 0,opacity:"light"===e.mode?.8:1},toggleIcon:{height:14,width:14,transform:t?"rotate(180deg)":"rotate(90deg)",fill:e.text.uiBlueSecondary}})),[t]);return(0,B.jsxs)(Rt().A,{style:r.groupBar,onClick:o,hoveredStyle:r.toggleHovered,pressedStyle:r.toggleHovered,children:[(0,jt().l)(r.toggleIcon),(0,B.jsx)("div",{style:{width:2,flexGrow:1,background:"linear-gradient(0deg, rgba(35, 131, 226, 0) 0px, rgba(35, 131, 226, 0.57) 64px)",borderRadius:1,opacity:.4}})]})}function Jt(e){const{isGroupExpanded:t,groupId:o,trigger:r,parentModule:a,filterOptionsPopupOpen:d,setFilterOptionsPopupOpen:u,filterOperatorPopupOpen:c,setFilterOperatorPopupOpen:p}=e,g=(0,m().tz)(),f=(0,n().v3)(),{layoutStore:v,sessionId:x}=(0,P().LH)(),{isCollectionEmpty:S}=(0,h().cJ)(),b=(0,M().ET)(),C=(0,Kt().O)(),_=(0,l().K8)((()=>{const e=r.filter;if((0,wt().gc)(e)&&((0,wt().v0)(e)||(0,wt().as)(e))){return(0,wt().v0)(e)?(0,wt().Zl)(e):(0,wt().SM)(e)}}),[r]),I=(0,i.useMemo)((()=>(0,wt().Ui)(r.filter)?void 0===r.filter.value.value:0===(null==_?void 0:_.length)),[r.filter,_]),w=(0,s().IS)((e=>({indentedBranchContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:14,marginBottom:12},triggerText:{display:"flex",alignItems:"center",gap:4,color:e.text.uiBlueSecondary},deleteButton:{width:20,height:20},deleteIcon:{width:18,height:18},triggerOption:{color:e.text.uiBluePrimary},descendantCount:{display:"flex",alignItems:"center",gap:4,marginLeft:4},popupButton:{display:"flex",padding:"0px 3px",borderRadius:4,color:e.text.uiBluePrimary},triggerButtonHoveredStyle:{background:e.lightBlueBannerBackground},triggerButtonPressedStyle:{background:e.lightBlueBannerBackground},chevronIcon:{height:14,width:14,color:e.text.uiBluePrimary,marginTop:3,marginLeft:2},triggerOptionText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:300,color:I?e.text.uiBlueTertiary:void 0}})),[I]),[j,A]=(0,i.useState)(!1),T=(0,i.useMemo)((()=>j),[j]),L=(0,l().K8)((()=>v.getModules().form_conditional_modules||{}),[v]),F=(0,i.useMemo)((()=>{var e;const t=null===(e=a.conditionalGroups)||void 0===e?void 0:e.find((e=>e.id===o));if(!t)return 0;let r=0;for(const o of t.children??[]){const e=L[o];if(!e||"formQuestion"!==e.type)continue;const{formQuestionDescendants:t}=(0,Dt().Yg)({currentModule:e,nestedModules:L,includePlaceholders:!1});r+=t.length}return r}),[a,o,L]),E=(0,l().K8)((()=>{var e;if(!C)return;const t=k().c7.createChildStore(v,{id:a.formQuestionId,table:Bt().lo,spaceId:C}),o=null===(e=b.collectionStore())||void 0===e?void 0:e.getSchema();if(!o)return;const r=o[t.getPropertyId()??""];return(0,rt().hm)(r,t.getModel())}),[a.formQuestionId,v,C,b]),O=(0,l().K8)((()=>{if(!_||_.length<2||(0,wt().Ui)(r.filter))return;const e=r.filter;return(0,wt().v0)(e)?"any":"enum_contains_all"===e.operator?"all":"any"}),[r,_]),R=(0,l().K8)((()=>{if(!O)return;const e="any"===O?(0,B.jsx)(m().sA,{defaultMessage:"any",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.FilterOperator.any"}):(0,B.jsx)(m().sA,{defaultMessage:"all",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.FilterOperator.all"});return(0,wt().v0)(r.filter)||1===E?e:(0,B.jsx)(Gt().Ay,{popupType:Gt().nl.Popup,placementToOrigin:Wt().UV.Bottom,alignmentToOrigin:Wt().MY.Start,style:{marginLeft:-14},open:c,origin:(0,B.jsxs)(Rt().A,{onMouseDown:e=>{(0,D().SQ)({event:e,context:D().y$.EditorMouseDown,callback:y().D_})},onClick:()=>p(!0),style:w.popupButton,hoveredStyle:w.triggerButtonHoveredStyle,pressedStyle:w.triggerButtonPressedStyle,children:[e,(0,At().arrowChevronSingleDownFillIcon)(w.chevronIcon)]}),onDismiss:()=>p(!1),disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:6,render:()=>(0,B.jsx)(Xt,{trigger:r,currentOperator:O,parentModule:a,conditionalGroupId:o}),trapFocus:!0})}),[O,r,E,c,p,w,a,o]),H=(0,l().K8)((()=>{if((0,wt().Ui)(r.filter))switch(r.filter.value.value){case!0:return(0,B.jsx)(m().sA,{defaultMessage:"checked",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.IfCheckboxIsChecked"});case!1:return(0,B.jsx)(m().sA,{defaultMessage:"unchecked",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.IfCheckboxIsUnchecked"});default:return(0,B.jsx)(m().sA,{defaultMessage:"Select",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.NoOptionsSelected"})}return _&&0!==_.length?_.map((e=>e.value)).join(", "):(0,B.jsx)(m().sA,{defaultMessage:"Select",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.NoOptionsSelected"})}),[_,r.filter]),Q=(0,l().K8)((()=>(0,B.jsx)(Gt().Ay,{popupType:Gt().nl.Popup,placementToOrigin:Wt().UV.Bottom,alignmentToOrigin:Wt().MY.Start,style:{marginLeft:-14},open:d,origin:(0,B.jsxs)(Rt().A,{style:w.popupButton,onMouseDown:e=>{(0,D().SQ)({event:e,context:D().y$.EditorMouseDown,callback:y().D_})},onClick:()=>u(!0),hoveredStyle:w.triggerButtonHoveredStyle,pressedStyle:w.triggerButtonPressedStyle,children:[(0,B.jsx)("span",{style:w.triggerOptionText,children:H}),(0,At().arrowChevronSingleDownFillIcon)(w.chevronIcon)]}),onDismiss:()=>u(!1),disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:6,render:()=>(0,B.jsx)(eo,{parentModule:a,trigger:r,groupId:o}),trapFocus:!0})),[d,H,o,a,u,w,r]),G=(0,i.useCallback)((()=>{A(!0)}),[]),K=(0,i.useCallback)((()=>{A(!1)}),[]),V=(0,i.useCallback)((()=>{Et().FG({environment:f,parentModule:a,layoutStore:v,groupId:o,collectionContextStore:b,isCollectionEmpty:S,sessionId:x})}),[f,a,o,v,b,S,x]),q=(0,l().K8)((()=>(0,wt().v0)(r.filter)||(0,wt().as)(r.filter)?O?(0,B.jsx)(m().sA,{defaultMessage:"If {filterOperatorPopup} of {filterValuesPopup} is selected",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.IfFilterValueIsSelected",values:{filterOperatorPopup:R,filterValuesPopup:Q}}):(0,B.jsx)(m().sA,{defaultMessage:"If {filterValuesPopup} is selected",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.SimpleFilter.Trigger",values:{filterValuesPopup:Q}}):(0,wt().Ui)(r.filter)?(0,B.jsx)(m().sA,{defaultMessage:"If {filterValuesPopup}",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.Checkbox",values:{filterValuesPopup:Q}}):void 0),[O,R,Q,r.filter]);return(0,B.jsxs)("div",{style:w.indentedBranchContainer,onMouseMove:G,onMouseLeave:K,children:[(0,B.jsxs)("div",{style:w.triggerText,children:[q,!t&&F>0&&(0,B.jsxs)("div",{style:w.descendantCount,children:[(0,kt().O)({height:16,width:16}),(0,B.jsx)("span",{children:F})]})]}),T&&(0,B.jsx)(ve().A,{placement:xe().W.Top,textWrap:!1,renderTooltip:()=>(0,B.jsx)(m().sA,{defaultMessage:"Delete condition",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.DeleteIcon.Tooltip.title"}),render:e=>(0,B.jsx)(me().A,{style:w.deleteButton,iconStyle:w.deleteIcon,color:"uiBluePrimary",onClick:V,icon:Pt().trashIcon,ariaLabel:g.formatMessage({defaultMessage:"Delete condition",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.DeleteIcon.title"}),...e})})]})}function Xt(e){const{currentOperator:t,trigger:o,parentModule:r,conditionalGroupId:i}=e,l=(0,n().v3)(),{layoutStore:s}=(0,P().LH)(),a=[{key:"any",render:e=>(0,B.jsx)(ce().A,{...e,disabled:!1,title:(0,B.jsx)(m().sA,{defaultMessage:"any",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.FilterOperator.any"}),isChecked:"any"===t}),action:()=>{(0,wt().gc)(o.filter)&&(0,wt().as)(o.filter)&&Et().Is({environment:l,layoutStore:s,module:r,conditionalGroupId:i,newValue:{...o.filter,operator:"enum_contains"}})}},{key:"all",render:e=>(0,B.jsx)(ce().A,{...e,disabled:!1,title:(0,B.jsx)(m().sA,{defaultMessage:"all",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.FilterOperator.all"}),isChecked:"all"===t}),action:()=>{(0,wt().gc)(o.filter)&&(0,wt().as)(o.filter)&&Et().Is({environment:l,layoutStore:s,module:r,conditionalGroupId:i,newValue:{...o.filter,operator:"enum_contains_all"}})}}],d=[{key:0,render:e=>(0,B.jsx)(fe().A,{...e}),items:a}],u={menuType:he().gu.Popup,width:200};return(0,B.jsx)(ge().A,{...u,children:(0,B.jsx)(ye().Ay,{type:ye().Oh.Vertical,sections:d,onAccept:()=>{},initialFocus:void 0})})}function eo(e){const{parentModule:t,trigger:o,groupId:r}=e,i=(0,n().v3)(),{layoutStore:s,canEditLayout:a}=(0,P().LH)(),d=(0,M().ET)(),{collectionViewStore:u,schema:c}=(0,l().K8)((()=>{const e=d.collectionStore();if(!e)throw new Error("No collection store found");return{collectionViewStore:d.collectionViewStore(),schema:e.getSchema()}}),[d]);return u?(0,B.jsx)(Ot().td,{collectionViewId:u.id,propertyFilter:o,schema:c,parentStore:u,onChange:e=>{Et().Is({environment:i,layoutStore:s,module:t,conditionalGroupId:r,newValue:e})},onChangeDebounced:y().lQ,onClose:y().lQ,onDelete:y().lQ,onAddToCombinatorFilter:y().lQ,context:Ot().mL.PropertyFilter,userCanConfigureFilters:a,allowRelativeDateFilter:!1,allowRelativePersonFilter:!1,collectionContextStore:d}):null}function to(){const e=(0,s().IS)((e=>({container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",height:"100%",gap:8,color:e.text.uiBluePrimary},plusIcon:{borderRadius:"100%",background:e.tint.uiBlue,width:20,height:20,padding:2,boxShadow:`0 0 0 3px ${e.tint.uiBlue}`,marginRight:4}})),[]);return(0,B.jsxs)("div",{style:e.container,children:[(0,Tt().b)(e.plusIcon),(0,B.jsx)("span",{children:(0,B.jsx)(m().sA,{defaultMessage:"Add or select questions",id:"FormConditionalLogicModuleRenderer.NestedPlaceholderModuleTitle"})})]})}function oo(e){var t;const o=(0,n().v3)(),r=(0,Kt().O)(),{parentModuleId:a,parentConditionalGroupId:d}=e,u=(0,M().ET)(),c=(0,i.useRef)(null),p=(0,l().K8)((()=>{const e=(0,Vt().S)(u.settingsStore);return"formQuestionCreateSettings"===(null==e?void 0:e.type)&&u.settingsStore.state.ref===c}),[u.settingsStore,c]),g=(0,s().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"center",width:"100%",marginTop:12},plusButton:{borderRadius:"100%",background:e.tint.uiBlue,width:20,height:20,padding:2,boxShadow:`0 0 0 3px ${e.tint.uiBlue}`,marginRight:4},pressedStyle:{background:void 0,color:e.text.uiBluePrimary},hoveredStyle:{background:void 0,color:e.text.uiBluePrimary},buttonStyle:{height:32,color:p?e.text.uiBluePrimary:e.text.uiBlueSecondary,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:8}})),[p]),y=(0,i.useCallback)((()=>{Ft().Ow({collectionContextStore:u,collectionSettingsStore:u.settingsStore,ref:c}),Ft().dP({collectionSettingsStore:u.settingsStore,item:{type:"formQuestionCreateSettings",area:"form_conditional_modules",parentModuleId:a,parentConditionalGroupId:d},ref:c})}),[u,c,a,d]),f=(0,zt()._X)({name:"forms_conditional_logic",spaceId:r,userId:null===(t=o.currentUser)||void 0===t?void 0:t.id});return(null==f?void 0:f.upsell)?null:(0,B.jsx)("div",{style:g.container,ref:c,children:(0,B.jsxs)(Ht().p,{onClick:y,onMouseDown:e=>{(0,D().SQ)({event:e,context:D().y$.EditorMouseDown})},style:g.buttonStyle,pressedStyle:g.pressedStyle,hoveredStyle:g.hoveredStyle,children:[(0,Tt().b)({...g.plusButton}),(0,B.jsx)("span",{children:(0,B.jsx)(m().sA,{defaultMessage:"Add more questions",id:"FormConditionalLogicModuleRenderer.NestedAddMoreQuestionsButton"})})]})})}const ro={transcript:!0,bottomControls:!0,expandedBacklinks:!0,inlinePageSections:!0},io={editor:!0,discussions:!0};function no(e){if("editor"===e.type||"viewsMain"===e.type)return{minHeight:"500px"}}const lo="16px",so=o(757695).Store.createValue(!1,{name:"HEADER_FOCUS_STORE"});function ao(e){let{pageModuleId:t,active:o=!1,isDragging:r=!1,area:n,style:s}=e;const{layoutStore:a}=(0,P().LH)(),d=(0,l().K8)((()=>null==a?void 0:a.getModuleById(t)),[a,t],{useDeepEqual:!0}),u=(0,l().K8)((()=>!!d&&(0,c()._)(d)),[d]),m=(0,l().K8)((()=>{var e;return null===(e=a.getModel())||void 0===e?void 0:e.getLayoutType()}),[a]),g=(0,l().K8)((()=>!!d&&(("form"!==m||"placeholder"!==d.type)&&(0,p().i)(d))),[m,d]),y=(0,i.useMemo)((()=>({isSelected:o,isDragging:r,isConfigurable:u,isDraggable:g})),[o,r,u,g]);return d?(0,B.jsx)(Ye,{value:y,children:"form"===m?(0,B.jsx)(po,{pageModule:d,style:s}):(0,B.jsx)(uo,{pageModule:d,style:s,area:n})}):null}const uo=i.memo(co);function co(e){let{pageModule:t,style:r,area:a}=e;const{pageStore:d}=(0,P().bi)(),c=(0,l().K8)((()=>Boolean(d.getCover())),[d]),p=(0,u().Lv)(t).type,m=t.type,g=(0,n().v3)(),v=(0,l().K8)((()=>(0,o(577814).A)({environment:g,store:d,pageViewBlockStore:void 0})),[g,d]),h=(0,s().IS)((()=>{return{wrapper:{...no(t),opacity:(e=t,!0===(null==io?void 0:io[e.type])?"33%":void 0),marginTop:c&&"normalizedTitleWithIcon"===m?"-50px":void 0,...r}};var e}),[c,t,m,r]),x=(0,i.useCallback)((e=>(0,B.jsx)(et,{module:t,style:h.wrapper,area:a,children:e})),[t,h.wrapper,a]);if(ro[p])return null;switch(m){case"cover":return(0,B.jsx)(go,{wrapper:x,pageStore:d,isEditable:!1},`${t.id}-${d.id}`);case"properties":return(0,B.jsx)(ho,{pageStore:d,wrapper:x,pageModule:t},`${t.id}-${d.id}`);case"viewsMain":case"views":return(0,B.jsx)(L,{wrapper:x,viewsModule:t},`${t.id}-${d.id}`);case"property_title":case"property_text":case"property_url":case"property_email":case"property_phone_number":case"property_checkbox":case"property_person":case"property_created_by":case"property_last_edited_by":case"property_file":case"property_select":case"property_multi_select":case"property_status":case"property_number":case"property_date":case"property_created_time":case"property_last_edited_time":case"property_last_visited_time":case"property_formula":case"property_relation":case"property_rollup":case"property_button":case"property_auto_increment_id":case"property_location":case"property_verification":case"property_place":return(0,B.jsx)(o(483832).v,{propertyId:t.propertyId,context:C().Rr.Frame,disabled:!0,store:d,pageModule:t,wrapper:x,stackPropertyLabelAndValue:!0},`${t.id}-${d.id}`);case"normalizedTitleWithIcon":return(0,B.jsx)(yo,{wrapper:x,module:t},`${t.id}-${d.id}`);case"editor":return(0,B.jsx)(o(729923).p,{context:C().Rr.Frame,disabled:!0,handlePlaceholderWrapClick:y().lQ,pageBlockStore:d,editorWrapper:x},`${t.id}-${d.id}`);case"discussions":return(0,B.jsx)(o(257502).d,{store:d,wrapper:x,showDefaultTitle:!0,discussionLocation:"page_discussion",pageDiscussionsRenderState:v},`${t.id}-${d.id}`);case"inlinePageSections":return(0,B.jsx)(fo,{wrapper:x},`${t.id}-${d.id}`);case"relationsGroup":return(0,B.jsx)(o(996262).z,{pageStore:d,wrapper:x,disabled:!0,context:C().Rr.Frame,showDefaultTitle:!0});case"transcript":case"bottomControls":case"expandedBacklinks":case"deleted_property":return null;case"formQuestion":case"formTitle":case"formSubmit":case"placeholder":case"recentActivity":case"collaborators":case"teamspaces":throw new Error(`Cannot render ${m} in page layout editor.`);default:(0,f().HB)(m)}}function po(e){let{pageModule:t,style:o}=e;const n=(0,u().Lv)(t).type,{layoutStore:a,canEditLayout:d}=(0,P().LH)(),{formBlockStore:c,headerFocusStore:p,headerMouseStore:m}=(0,h().cJ)(),y=(0,M().ET)(),v=(0,l().K8)((()=>y.permissionScopesStore.state.canConfigureCollection),[y.permissionScopesStore]),x=(0,i.useCallback)((()=>{m.setState({...m.state,mouseEntered:!0})}),[m]),S=(0,i.useCallback)((()=>{m.setState({...m.state,mouseEntered:!1})}),[m]),b=(0,l().K8)((()=>{var e;const t=null===(e=y.collectionViewBlockStore())||void 0===e?void 0:e.getParentBlockStore();return null==t?void 0:t.getFormatStore().getKeyStore("block_color").getValue()}),[y]),C=(0,l().K8)((()=>"formQuestion"===t.type&&t.conditionalGroups&&t.conditionalGroups.length>0),[t]),_=(0,l().K8)((()=>{var e;return void 0!==(null===(e=a.getModules().form_conditional_modules)||void 0===e?void 0:e[t.id])}),[a,t]),I=(0,s().IS)((e=>({formTitleWrapper:{background:b?(0,g().ed)(b,e).background:void 0}})),[b]);if(ro[n])return null;const w=e=>(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(et,{module:t,style:o,area:_?"form_conditional_modules":"form_layout_schema",children:e}),C&&"formQuestion"===t.type&&(0,B.jsx)(Ut,{parentModule:t})]}),j=t.type;switch(j){case"formTitle":return w((0,B.jsxs)("div",{style:I.formTitleWrapper,children:[(0,B.jsx)("div",{style:{paddingLeft:lo},children:(0,B.jsx)(Mt().zE,{formBlockStore:c,disabled:!d,formMode:"builder",headerFocusStore:p,onHeaderMouseEnter:x,onHeaderMouseLeave:S})}),(0,B.jsx)(Mt().Y1,{collectionContextStore:y,formBlockStore:c})]}));case"formQuestion":return w((0,B.jsx)(yt,{layoutStore:a,formQuestionId:t.formQuestionId}));case"formSubmit":return null;case"placeholder":return w((0,B.jsx)(r().P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:_?72:36},transition:{duration:.2},children:_&&(0,B.jsx)(to,{})},"placeholderModule"));case"cover":return(0,B.jsx)(go,{wrapper:w,pageStore:c,isEditable:v},t.id);case"property_title":case"property_text":case"property_url":case"property_email":case"property_phone_number":case"property_checkbox":case"property_person":case"property_created_by":case"property_last_edited_by":case"property_file":case"property_select":case"property_multi_select":case"property_status":case"property_number":case"property_date":case"property_created_time":case"property_last_edited_time":case"property_last_visited_time":case"property_formula":case"property_relation":case"property_rollup":case"property_button":case"property_auto_increment_id":case"property_location":case"property_verification":case"property_place":case"normalizedTitleWithIcon":case"inlinePageSections":case"expandedBacklinks":case"discussions":case"bottomControls":case"editor":case"transcript":case"properties":case"views":case"viewsMain":case"relationsGroup":case"deleted_property":case"recentActivity":case"collaborators":case"teamspaces":throw new Error("Cannot render these modules in a form.");default:(0,f().HB)(j)}}const mo=160;function go(e){const{wrapper:t,pageStore:o,isEditable:r}=e;return(0,l().K8)((()=>Boolean(o.getCover())),[o])?t((0,B.jsx)(Ct().f,{store:o,isEditable:r,onMouseEnter:y().lQ,onMouseLeave:y().lQ,paddingX:0,pageCoverHeight:mo})):(0,B.jsx)("div",{className:Ze().hg,style:{height:0}})}function yo(e){const{wrapper:t,module:o}=e,{pageStore:r,collectionStore:i}=(0,P().bi)(),n=(0,l().K8)((()=>i.getFormat()),[i]),s=(0,l().K8)((()=>Boolean(r.getCover())),[r]),{backlinksConfiguredToShowAboveTitle:a}=(0,I().X1)({format:n}),d=a?(0,B.jsx)("div",{style:{marginTop:8},children:(0,B.jsx)(E().y,{pageStore:r,customization:{buttonIsLightGray:!0}})}):void 0,u=(0,M().ET)();return t((0,B.jsx)(It().H,{store:r,context:C().Rr.Frame,isEditable:!1,headerControls:d,hasCover:s,isInSidePeek:!1,headerFocusStore:so,openMenuOnMount:!1,openMenuOnMountCallback:y().lQ,disabled:!0,titlePlaceholder:void 0,collectionContextStore:u,shouldShowTemplatePicker:!1,onTitleChange:y().lQ,onTitleEditText:y().lQ,onTitleEsc:y().lQ,onTitleUntab:y().lQ,onTitleTab:y().lQ,handleHeaderMouseEnter:y().lQ,handleHeaderMouseLeave:y().lQ,isInPageLayoutModuleEditor:!0,layoutModule:o}))}function fo(e){const{pageStore:t}=(0,P().bi)(),o=(0,l().K8)((()=>t.getSchema()),[t]),r=(0,l().K8)((()=>(0,b().gV)(t)),[t]),i=(0,l().K8)((()=>{if(!r)return;return(r.collection_page_sections||[]).filter((e=>{const r=o[e.section];if(!r||"relation"!==r.type)return;const i=t.getPropertyValue(e.section),n=(0,a().bG)({relationValue:(0,a().n)(i),propertySchema:r,getRecordModel:t.getRecordModel,includeNoAccess:!0}).length;return"inline"===e.visibility&&o[e.section]&&0!==n})).map((e=>e.section))}),[r,o,t]);return(i??[]).length>0?(0,B.jsx)(bt().LG,{context:C().Rr.Frame,disabled:!0,inlinePropertyIDs:i,store:t,wrapper:e.wrapper}):(0,B.jsx)(vo,{text:"Inline page sections"})}function vo(e){const t=(0,s().IS)((e=>({text:{fontSize:14,color:"light"===e.mode?e.palette.gray[500]:e.palette.gray[600]}})),[]);return(0,B.jsx)(Ze().vV,{children:(0,B.jsxs)(S().Ye,{children:[(0,B.jsx)("span",{style:t.text,children:e.text}),(0,B.jsx)(x().A,{content:"Not enabled"})]})})}function ho(e){const{pageModule:t,pageStore:o,wrapper:r}=e,i=(0,n().v3)(),{layoutStore:a}=(0,P().LH)(),u=(0,s().IS)((e=>({empty:{color:e.text.tertiary,fontSize:v().J.UIRegular.desktop,padding:"0 6px"}})),[]),c=(0,l().K8)((()=>{var e;const o=null==a||null===(e=a.getModel())||void 0===e?void 0:e.getRawPageModuleAreaById(t.id);if(o)return(0,d().Fw)(o)}),[a,t.id]),p=(0,l().K8)((()=>!(0,_().g)({environment:i,layoutArea:c,moduleType:t.type,pageViewBlockContext:C().Rr.Frame})),[i,c,t.type]);return(0,B.jsx)(_t().h,{context:C().Rr.Frame,disabled:!0,store:o,wrapper:r,layoutModule:t,variant:t.variant,customization:{disableContainerPadding:!0,neverShowPropertiesElsewhereInLayout:!0,disableLastRowBottomPadding:!0,stackPropertyLabelAndValue:p,emptyState:(0,B.jsx)("div",{style:u.empty,children:(0,B.jsx)(m().sA,{id:"pageLayout.emptyModule",defaultMessage:"Empty"})})},forceGroupsOpenOrClosed:"open"},`${t.id}-${o.id}`)}},963900:(e,t,o)=>{o.d(t,{Y1:()=>E,zE:()=>L});o(18107),o(967357);var r=o(296540),i=()=>o(484714),n=()=>o(56366),l=()=>o(401497),s=()=>o(449552),a=()=>o(919709),d=()=>o(959013),u=()=>o(751735),c=()=>o(496603),p=()=>o(284371),m=()=>o(348241),g=()=>o(582049),y=()=>o(465741),f=()=>o(728915),v=()=>o(493823),h=()=>o(774524),x=()=>o(605243),S=()=>o(790324),M=()=>o(299772),b=()=>o(953418),C=()=>o(640653),_=()=>o(129522),I=()=>o(765957),w=()=>o(548821),j=()=>o(134217),A=()=>o(749240),k=()=>o(660197),T=o(474848);function P(e){let{onAfterAddIconClick:t,disabled:o,formBlockStore:r}=e;if((0,n().K8)((()=>Boolean(r.getIcon()&&r.getCover())),[r]))return null;const i=o?(0,T.jsx)(T.Fragment,{}):(0,T.jsx)(B,{onAfterAddIconClick:t});return(0,T.jsx)(h().A,{store:r,context:w().Rr.Form,children:i})}function B(e){let{onAfterAddIconClick:t}=e;const{formBlockStore:o,headerFocusStore:r,headerMouseStore:l}=(0,m().cJ)(),s=(0,i().Y0)(),a=(0,n().K8)((()=>{const e=l.state.mouseEntered||r.state;return(0,M().g1)(e)}),[r,l]),{hasIcon:u,hasCover:c}=(0,n().K8)((()=>({hasIcon:Boolean(o.getIcon()),hasCover:Boolean(o.getCover())})),[o]);return(0,T.jsxs)(T.Fragment,{children:[!u&&(0,T.jsx)(S().A,{store:o,afterOnClick:t,style:a,label:s.isSmallPhone?(0,T.jsx)(d().sA,{id:"FormHeaderControls.iconMobile",defaultMessage:"Icon"}):(0,T.jsx)(d().sA,{id:"FormHeaderControls.icon",defaultMessage:"Form icon"})}),!c&&(0,T.jsx)(x().A,{store:o,style:a,label:s.isSmallPhone?(0,T.jsx)(d().sA,{id:"FormHeaderControls.pageCoverMobile",defaultMessage:"Cover"}):(0,T.jsx)(d().sA,{id:"FormHeaderControls.pageCover",defaultMessage:"Form cover"}),from:"form_page_header"})]})}function L(e){let{formBlockStore:t,formMode:o,disabled:l,headerFocusStore:s,onHeaderMouseEnter:u,onHeaderMouseLeave:p,aliasStore:m,formBlockWidth:y}=e;const v=(0,d().tz)(),h=(0,i().Y0)(),[x,S]=(0,r.useState)(!1),M=(0,n().K8)((()=>null==t?void 0:t.getTitleStore()),[t]),{hasCoverImage:b,hasPageIcon:C,formDescriptionStore:_}=(0,n().K8)((()=>({hasCoverImage:Boolean(null==t?void 0:t.getCover()),hasPageIcon:Boolean(null==t?void 0:t.getIcon()),formDescriptionStore:t.getFormDescriptionStore()})),[t]),I=(0,n().K8)((()=>(0,a().w9s)(_.getValue())),[_]);if(!t||!M)return null;const j="viewer"===o&&h.isMobile&&C?12:0;let A=0;return"builder"===o?C&&b&&(A=12):m?(A=C||b?24:12,m&&"narrow"===y&&!h.isMobile&&(A-=f().Yj)):A=C||b?24:48,(0,T.jsxs)("div",{style:{marginTop:j,marginLeft:"builder"===o?3:0},children:[(0,T.jsx)(k().H,{store:t,context:w().Rr.Form,isEditable:!l,headerControls:(0,T.jsx)(P,{onAfterAddIconClick:()=>S(!0),disabled:l,formBlockStore:t}),hasCover:b,isInSidePeek:!1,hideTitleIfEmpty:"viewer"===o,headerFocusStore:s,openMenuOnMount:x,openMenuOnMountCallback:()=>S(!1),disabled:l,titlePlaceholder:v.formatMessage({id:"formTitle.titlePlaceholder",defaultMessage:"Form title"}),collectionContextStore:void 0,shouldShowTemplatePicker:!1,onTitleChange:c().lQ,onTitleEditText:c().lQ,onTitleEsc:c().lQ,onTitleUntab:c().lQ,onTitleTab:c().lQ,onMoveUp:c().lQ,onMoveDown:c().lQ,handleHeaderMouseEnter:u,handleHeaderMouseLeave:p,disableEnter:!0,extraStyles:{fontSize:40,fontWeight:"bold",cursor:"text",marginTop:A},layoutModule:F}),("builder"===o||!I)&&(0,T.jsx)("div",{style:{marginTop:16,marginLeft:3},children:(0,T.jsx)(g().B,{store:_,disabled:l,placeholder:v.formatMessage({id:"FormTitle.description.placeholder",defaultMessage:"Description (optional)"}),style:{cursor:"text"}})})]})}const F={id:"titleWithIcon",type:"normalizedTitleWithIcon",propertyIds:[]};function E(e){let{collectionContextStore:t,formBlockStore:o}=e;const r=(0,i().v3)(),{currentSpaceStore:a}=(0,n().O$)(I().default),c=(0,n().K8)((()=>a?(0,C().GK)(r,a):""),[r,a]),{isFormPublic:m,isFormClosed:g}=(0,n().K8)((()=>({isFormPublic:o.getIsFormPublic(),isFormClosed:o.getIsFormClosed()})),[o]),f=(0,n().K8)((()=>{const e=A().subscriptionDataStoreInstance.state;return Boolean(e&&a&&j().V$(r,e,a.id))}),[r,a]),h=(0,n().K8)((()=>f?"closed":(0,y().C0)(m,g)),[m,g,f]),x=(0,n().K8)((()=>{const e=t.collectionViewBlockStore();return!!e&&e.canEditMembership()}),[t]),S=(0,l().IS)((e=>{const t=()=>{switch(h){case"shared_to_web":return{light:{color:e.text.uiYellowPrimary,background:e.tint.uiYellowHover},dark:{color:e.text.uiYellowPrimary,background:e.tint.uiYellowHover}};case"shared_to_space":return{light:{color:e.text.secondary,background:e.fill.lightGrayTertiary},dark:{color:e.text.secondary,background:e.fill.lightGrayTertiary}};case"closed":return{light:{color:e.palette.red[500],background:e.palette.red[50]},dark:{color:e.palette.red[600],background:e.palette.red[200]}}}};return{container:{color:t()[e.mode].color,background:t()[e.mode].background,borderRadius:6,width:"100%",padding:"10px 22px",marginTop:24,fontSize:14,display:"flex",alignItems:"center"},lockIconContainer:{display:"flex",alignItems:"center"},changePermissionButton:{marginRight:-4,color:t()[e.mode].color,fontWeight:p().Wy.medium},changePermissionButtonHovered:{backgroundColor:(0,u().X4)(t()[e.mode].color,.1)},changePermissionButtonPressed:{backgroundColor:(0,u().X4)(t()[e.mode].color,.2)}}}),[h]),M=(0,y().ls)({formSharingState:h,spaceName:c,isOverBlockLimit:f});return(0,T.jsxs)("div",{style:S.container,children:[(0,T.jsx)("div",{style:{width:f?"100%":"90%",marginRight:10},children:(0,T.jsxs)("div",{style:S.lockIconContainer,children:[!g&&!m&&!f&&(0,s().g)({width:14,height:14,marginRight:6,marginLeft:-2}),M]})}),!f&&x&&(0,T.jsx)(v().p,{style:S.changePermissionButton,hoveredStyle:S.changePermissionButtonHovered,pressedStyle:S.changePermissionButtonPressed,onClick:()=>{var e,o;const r=null===(e=t.collectionViewBlockStore())||void 0===e?void 0:e.id,i=(null===(o=_().K.getMembersByDOMOrder({filter:e=>e.getBlockStore().id===r}).at(0))||void 0===o?void 0:o.getNode())??null;if(i instanceof Element){const e=t.isFullScreenStore.state?i:i.parentElement;(0,b().vq)(e,{edgeDist:0,animate:!1})}t.formShareMenuButtonPopupStore.setState({...t.formShareMenuButtonPopupStore.state,open:!0})},children:(0,T.jsx)(d().sA,{id:"editorFormResponderWarning.changePermission",defaultMessage:"Change"})})]})}},970176:(e,t,o)=>{o.d(t,{z:()=>n});var r=()=>o(953418),i=()=>o(104129);function n(e){let{layoutStore:t,moduleId:o,environment:n}=e;setTimeout((()=>{!function(e){let{layoutStore:t,moduleId:o,environment:n}=e;const l=i().A.findModuleContainer({layoutStore:t,moduleId:o}),s=null==l?void 0:l.getNode();s&&(0,r().$v)({element:s,environment:n,additionalPadding:{top:100,bottom:100}})}({layoutStore:t,moduleId:o,environment:n})}),100)}}}]);