"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[74357],{27356:(e,t,o)=>{o.r(t),o.d(t,{UISpacePermissionGroupToken:()=>y});var i=o(296540),n=()=>o(484714),r=()=>o(56366),a=()=>o(401497),s=()=>o(784892),l=()=>o(959013),c=()=>o(284371),d=()=>o(780054),p=()=>o(698449),u=()=>o(630116),m=()=>o(848401),f=()=>o(580648),g=o(474848);function y(e){const{groupPointer:t,parentStore:o,format:y}=e,v=(0,r().K8)((()=>u().Cv.createChildStore(o,t).getModel()),[o,t]),h=(0,r().K8)((()=>null==v?void 0:v.getName()),[v]),x=(0,n().Y0)(),{outerStyle:b,avatarWrapStyle:S}=(0,a().IS)((e=>({outerStyle:{display:"flex",alignItems:"center",minWidth:0},avatarWrapStyle:{width:"none",minHeight:"none",marginRight:6},badgeStyle:{borderRadius:4,background:e.legacyDefaultSelectColor,fontSize:d().A.isMobile?11:9,lineHeight:x.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em"}})),[x]),M=(0,l().tz)(),C=(0,i.useCallback)((()=>v?y===s().NY.Inline?(0,g.jsx)(f().o,{group:v}):(0,g.jsxs)("div",{style:b,children:[(0,g.jsx)("div",{style:S,children:(0,g.jsx)(f().o,{group:v})}),(0,g.jsx)("div",{style:{...c().RC},children:(0,p().Pf)({intl:M,groupName:h})})]}):null),[S,y,v,h,M,b]);return v?(0,g.jsx)(m().Ay,{...e,style:{margin:0},renderAvatar:C}):null}},88306:(e,t,o)=>{o.d(t,{C:()=>r});var i=o(296540),n=o(474848);const r=i.forwardRef((function(e,t){let{children:r,fontColor:a,style:s,isRightAligned:l,isEmpty:c}=e;const{baseStyles:d}=(0,i.useContext)(o(234359).L8),p=(0,o(401497).IS)((e=>({textStyle:{...c?d.emptyTextStyle??d.textStyle:d.textStyle,...s,...l?{justifyContent:"right",textAlign:"right"}:{},..."light"===a?{color:e.text.tertiary}:{}}})),[c,d.emptyTextStyle,d.textStyle,s,l,a]);return(0,n.jsx)("div",{ref:t,style:p.textStyle,children:r})}))},379421:(e,t,o)=>{o.d(t,{C:()=>N});var i=o(296540),n=()=>o(484714),r=()=>o(56366),a=()=>o(931075),s=()=>o(959013),l=()=>o(534177),c=()=>o(908671),d=()=>o(66323),p=()=>o(51493),u=(o(898992),o(737550),()=>o(401497)),m=()=>o(764880),f=()=>o(906380),g=()=>o(797561),y=()=>o(42583),v=()=>o(599813),h=()=>o(53528),x=()=>o(284371),b=()=>o(722872),S=()=>o(470928),M=()=>o(962730),C=()=>o(760217),V=()=>o(928600),j=()=>o(939740),k=()=>o(480095),w=()=>o(8980),A=()=>o(89924),R=()=>o(859428),T=()=>o(125565),P=()=>o(8802),B=()=>o(122894),I=o(474848);function D(e){const{onClose:t,blockStore:o,setVerificationMenuDisplay:i}=e,a=(0,n().v3)(),l=(0,s().tz)(),c=a.device.isMobile,D=(0,r().K8)((()=>(0,S().i1)(o)),[o]),U="verified"===D.type,O="verified"===D.type||"expired"===D.type,z=(0,r().K8)((()=>{const{verificationOwners:e}=(0,S().h4)({blockStore:o}),t=e.length;if(t<=0)return l.formatMessage(B().n.noOwners);const i=e[0],n=(0,m().xC)({pointer:i,getRecordModel:o.getRecordModel}),r=null==n?void 0:n.asActor,a=null==r?void 0:r.getDisplayName(l);if(!a)return l.formatMessage(B().n.noOwners);const s=t-1;return l.formatMessage(B().n.ownersAttribution,{actorName:a,numOtherActors:s})}),[o,l]),H=(0,r().K8)((()=>o.canEdit()),[o]),K=(0,r().K8)((()=>{const{verificationOwners:e}=(0,S().h4)({blockStore:o}),t=a.currentUser.id;return e.some((e=>e.id===t))}),[o,a.currentUser]),N=(0,u().IS)((e=>({disabledButton:{opacity:.7},redStyling:{color:e.text.uiRedPrimary},buttonRightContainer:{display:"flex",alignItems:"center",maxWidth:150,gap:2,color:e.icon.secondary},buttonRightText:{color:e.icon.secondary,fontSize:c?x().J.UIRegular.mobile:x().J.UISmall.desktop},footer:{color:e.text.secondary,fontSize:x().J.UISmall.desktop,borderTop:c?`1px solid ${e.regularDividerColor}`:void 0}})),[c]),W="none"!==D.type&&(0,I.jsx)("div",{style:N.footer,children:(0,I.jsx)(P().d,{lastVerifiedDate:U&&D.isIndefinite?D.startDateTime:D.dateTimeRange.start,getRecordModel:o.getRecordModel,actorPointer:D.actorPointer})});let E;return E=c?{menuType:b().gu.Modal,title:l.formatMessage(B().n.verificationMenuTitle),right:(0,I.jsx)(k().DoneMenuText,{}),onClickRight:t,footer:W}:{menuType:b().gu.Popup,width:320,footer:W},(0,I.jsx)(V().A,{...E,children:(0,I.jsx)(j().Ay,{type:j().Oh.Vertical,initialFocus:0,sections:[{key:"Verification Configuration",render:e=>(0,I.jsx)(A().A,{...e,hideTitle:c,title:l.formatMessage(B().n.verificationMenuTitle),disableMobilePadding:!0,disableMobileBorders:!0}),items:[{key:"Expiration",render:e=>{let t=l.formatMessage(B().n.noExpiration);"verified"!==D.type||D.isIndefinite?"expired"===D.type&&(t=h().OH({dateTime:D.dateTimeRange.end,intl:l,shortenDateAndRange:!0})):t=h().OH({dateTime:D.dateTimeRange.end,intl:l,shortenDateAndRange:!0});const o=!K,i=(0,I.jsxs)("div",{style:N.buttonRightContainer,children:[(0,I.jsx)(T().A,{style:N.buttonRightText,showTooltipWhenTruncated:!0,children:t}),K&&(0,I.jsx)(w().I,{icon:f().arrowChevronSingleRightSmallIcon,size:"sm"})]});return(0,I.jsx)(R().A,{placement:M().W.Right,render:t=>(0,I.jsx)(C().A,{...e,...t,title:l.formatMessage(B().n.expirationProperty),icon:(0,I.jsx)(w().I,{icon:y().D}),right:i,disabled:o,buttonStyle:o?N.disabledButton:void 0}),renderTooltip:()=>l.formatMessage(B().n.nonOwnersCannotEditVerification),disableTooltip:!o})},action:()=>{i("expiration")}},{key:"Verifier",render:e=>(0,I.jsx)(C().A,{...e,title:l.formatMessage(B().n.verifierProperty),icon:(0,I.jsx)(w().I,{icon:g().E}),right:(0,I.jsxs)("div",{style:N.buttonRightContainer,children:[(0,I.jsx)(T().A,{style:N.buttonRightText,showTooltipWhenTruncated:!0,children:z}),(0,I.jsx)(w().I,{icon:f().arrowChevronSingleRightSmallIcon,size:"sm"})]}),disabled:!H}),action:()=>{i("owner")}},{key:"Remove",render:e=>{const t=!K||!O;return(0,I.jsx)(R().A,{placement:M().W.Right,render:o=>(0,I.jsx)(C().A,{...e,...o,title:l.formatMessage(B().n.removeVerificationProperty),icon:(0,I.jsx)(w().I,{icon:v().xMarkIcon}),style:N.redStyling,disabled:t,buttonStyle:t?N.disabledButton:void 0}),renderTooltip:()=>l.formatMessage(B().n.nonOwnerCannotRemoveVerification),disableTooltip:!t})},action:()=>{var e;e={value:void 0,metadata:{action:"remove",entrypoint:"page_menu"}},d().h({environment:a,blockStore:o,verificationValue:e.value}),(0,p().q)({environment:a,blockStore:o,update:e}),t()}}]}]})})}var U=()=>o(436572),O=()=>o(751156),z=()=>o(232376);function H(e){const{blockStore:t,onClose:o}=e,i=(0,n().v3)(),c=(0,s().tz)(),{verifierValue:d,isDefaultUnpersistedValue:u}=(0,r().K8)((()=>{const{verificationOwners:e,isCreatedByDefault:o}=(0,S().h4)({blockStore:t});return{verifierValue:e,isDefaultUnpersistedValue:Boolean(o)}}),[t]);return(0,I.jsx)(z().Ay,{value:d,format:"page",valueIsUnpersistedDefaultValue:u,propertySchema:{name:c.formatMessage(B().n.verifierProperty),type:"person",limit:void 0,default:"created_by"},schema:{},insertChar:void 0,disabled:!1,onChange:e=>{(e=>{const o=t.getPropertyStore(a()._e.Owner);"personPropertyMenuUpdateAddPerson"===e.type?(O().createAndCommit({userAction:"PageVerificationBadge.addVerifier",environment:i,canUndo:!0,perform:t=>{for(const i of e.newValues)O().applyOperation({transaction:t,store:o,operation:{path:o.path,pointer:o.pointer,command:"addPersonAfter",args:{pointer:i}}})}}),(0,p().y)({environment:i,blockStore:t,entrypoint:"breadcrumbs",action:"add"})):"personPropertyMenuUpdateRemovePerson"===e.type?1===d.length?U().D6({label:(0,I.jsx)(s().sA,{id:"pageVerification.removeLastVerifier.error",defaultMessage:"At least one owner is required for verification."})}):(O().createAndCommit({userAction:"PageVerificationBadge.removeVerifier",environment:i,canUndo:!0,perform:t=>{O().applyOperation({transaction:t,store:o,operation:{path:o.path,pointer:o.pointer,command:"removePerson",args:{pointer:e.removedValue}}})}}),(0,p().y)({environment:i,blockStore:t,entrypoint:"breadcrumbs",action:"remove"})):"personPropertyMenuUpdateReplacePerson"===e.type?(O().createAndCommit({userAction:"PageVerificationBadge.replaceVerifier",environment:i,canUndo:!0,perform:t=>{O().applyOperation({transaction:t,store:o,operation:{path:o.path,pointer:o.pointer,command:"addPersonAfter",args:{pointer:e.newValue}}})}}),(0,p().y)({environment:i,blockStore:t,entrypoint:"breadcrumbs",action:"replace"})):(0,l().HB)(e)})(e)},onDismiss:o,parentStore:t,isTemplatePage:!1,formQuestionStore:void 0})}var K=()=>o(206837);function N(e){const{onClose:t,blockStore:o,entrypoint:r}=e,a=(0,n().v3)(),[s,c]=(0,i.useState)("mainVerificationMenu");return"mainVerificationMenu"===s?(0,I.jsx)(D,{onClose:t,blockStore:o,setVerificationMenuDisplay:c}):"owner"===s?(0,I.jsx)(W,{blockStore:o,onClose:a.device.isMobile?()=>c("mainVerificationMenu"):t,setVerificationMenuDisplay:c}):"expiration"===s?(0,I.jsx)(E,{blockStore:o,onClose:a.device.isMobile?()=>c("mainVerificationMenu"):t,setVerificationMenuDisplay:c,entrypoint:r}):void(0,l().HB)(s)}function W(e){const{onClose:t,blockStore:o,setVerificationMenuDisplay:i}=e,r=(0,n().v3)(),a=(0,s().tz)(),l=r.device.isMobile;return(0,I.jsxs)(I.Fragment,{children:[!l&&(0,I.jsx)(K().o,{label:_(a,"owner"),onClickBackButton:()=>i("mainVerificationMenu"),onClose:t,showBottomBorder:!0,width:350}),(0,I.jsx)(H,{blockStore:o,onClose:t})]})}function E(e){const{onClose:t,blockStore:o,setVerificationMenuDisplay:i,entrypoint:l}=e,u=(0,n().v3)(),m=(0,s().tz)(),f=u.device.isMobile,g=(0,r().K8)((()=>o.getPropertyStore(a()._e.Verification).getValue()),[o]);return(0,I.jsx)(c().y,{propertyName:"Verification Status",onChange:e=>{(e=>{d().h({environment:u,blockStore:o,verificationValue:e.value}),(0,p().q)({environment:u,blockStore:o,update:e})})(e)},verificationValue:(0,a().U1)(g),getRecordModel:o.getRecordModel,blockId:o.id,onClose:t,showTitle:f,showRemoveVerificationButton:f,showVerificationFooter:f,showCurrentStatusHeader:f,showCustomHeader:!f,customHeader:!f&&(0,I.jsx)(K().o,{label:_(m,"expiration"),onClickBackButton:()=>i("mainVerificationMenu"),onClose:t,showBottomBorder:!0,width:320}),entrypoint:l})}function _(e,t){return"expiration"===t?e.formatMessage(B().n.expirationProperty):"owner"===t?e.formatMessage(B().n.verifierProperty):"mainVerificationMenu"===t?null:void(0,l().HB)(t)}},580648:(e,t,o)=>{o.d(t,{o:()=>c});o(296540);var i=()=>o(56366),n=()=>o(959013),r=()=>o(698449),a=()=>o(173783),s=()=>o(187820),l=o(474848);function c(e){const{group:t}=e,o=e.size??20,c=(0,n().tz)(),d=(0,i().K8)((()=>{if(t.icon)return{pointer:t.pointer,icon:t.icon}}),[t]),p=(0,i().K8)((()=>null==t?void 0:t.getName()),[t]);return(0,l.jsx)("div",{children:d?(0,l.jsx)(s().B6,{disabled:!0,size:o,icon:d,isEmptyPage:!1,title:(0,r().Pf)({intl:c,groupName:p})}):(0,l.jsx)(a().A,{size:o})})}}}]);