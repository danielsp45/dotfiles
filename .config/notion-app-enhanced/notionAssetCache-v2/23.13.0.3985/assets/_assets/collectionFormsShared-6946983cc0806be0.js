"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[10831],{730370:(e,o,t)=>{t.r(o),t.d(o,{FormResponseSnapshotModal:()=>_});t(581454);var s=t(296540),n=()=>t(484714),a=()=>t(852507),r=()=>t(56366),i=()=>t(401497),d=t(474848);const l=(0,t(340498).wt)("arrowDownLine",{viewBox:"0 0 16 16",svg:(0,d.jsx)("path",{d:"M13.2944 8.45459C13.2944 8.65967 13.217 8.84196 13.062 9.00146L8.55713 13.5132C8.48421 13.5907 8.39762 13.6499 8.29736 13.6909C8.20166 13.7319 8.10368 13.7524 8.00342 13.7524C7.8986 13.7524 7.79834 13.7319 7.70264 13.6909C7.60693 13.6499 7.52035 13.5907 7.44287 13.5132L2.93799 9.00146C2.78304 8.84196 2.70557 8.65967 2.70557 8.45459C2.70557 8.24495 2.77393 8.07178 2.91064 7.93506C3.04736 7.79834 3.21826 7.72998 3.42334 7.72998C3.52816 7.72998 3.62614 7.75049 3.71729 7.7915C3.80843 7.82796 3.88818 7.88037 3.95654 7.94873L5.5083 9.47998L7.7915 12.0229L7.3335 12.2485L7.25146 10.0132V1.52295C7.25146 1.3042 7.31982 1.12419 7.45654 0.98291C7.59782 0.841634 7.78011 0.770996 8.00342 0.770996C8.22217 0.770996 8.3999 0.841634 8.53662 0.98291C8.6779 1.12419 8.74854 1.3042 8.74854 1.52295V10.0132L8.6665 12.2485L8.21533 12.0229L10.4917 9.47998L12.0435 7.94873C12.1118 7.88037 12.1916 7.82796 12.2827 7.7915C12.3739 7.75049 12.4718 7.72998 12.5767 7.72998C12.7817 7.72998 12.9526 7.79834 13.0894 7.93506C13.2261 8.07178 13.2944 8.24495 13.2944 8.45459ZM13.2944 14.4839C13.2944 14.6981 13.2261 14.8758 13.0894 15.0171C12.9526 15.1584 12.7817 15.229 12.5767 15.229H3.43701C3.22282 15.229 3.04736 15.1584 2.91064 15.0171C2.77393 14.8758 2.70557 14.6981 2.70557 14.4839C2.70557 14.2743 2.77393 14.0988 2.91064 13.9575C3.04736 13.8208 3.22282 13.7524 3.43701 13.7524H12.5767C12.7817 13.7524 12.9526 13.8208 13.0894 13.9575C13.2261 14.0988 13.2944 14.2743 13.2944 14.4839Z"})});var p=()=>t(959013),c=()=>t(449506),u=()=>t(436572),m=()=>t(676007),h=()=>t(864943),f=()=>t(897119),g=()=>t(204063),S=()=>t(2143),x=()=>t(859428),y=()=>t(962730),v=()=>t(756279),C=()=>t(765957),M=()=>t(102946),A=()=>t(584262),w=()=>t(700500),R=()=>t(919709),j=()=>t(896628),F=()=>t(44729),b=()=>t(246826),T=()=>t(857783),I=()=>t(185544),P=()=>t(751156),D=()=>t(2220),k=()=>t(972435),B=()=>t(465741);function L(e){let{environment:o,inMemoryRecordCache:t,formSnapshotData:s,currentSpaceStore:n,currentSpaceViewStore:a,handleModalClose:r}=e;P().createAndCommit({environment:o,userAction:"FormResponseSnapshot.saveFormResponseAsPage",canUndo:!0,perform:e=>{const i=""!==s.formTitle?(0,R().x9d)(s.formTitle):(0,R().x9d)(k().A.formatMessage(q.defaultFormResponseTitle)),d=b().Wv({environment:o,type:w().xd.page,properties:{title:i},format:{page_icon:"/icons/drafts_gray.svg"},inMemoryRecordCache:t,transaction:e,spaceId:n.id});s.questionsAndAnswers.map((s=>{const a=""!==s.question?(0,R().x9d)(s.question):(0,R().x9d)(k().A.formatMessage(q.defaultQuestion)),r=b().Wv({environment:o,type:w().xd.subHeader,properties:{title:a},inMemoryRecordCache:t,transaction:e,spaceId:n.id});F().NI({parentStore:d,childStore:r,transaction:e});const i="checkbox"===s.questionType?(0,B().Fc)(s.answer):s.answer,l=""!==s.answer?(0,R().x9d)(i):(0,R().x9d)(k().A.formatMessage(q.defaultAnswer)),p=b().Wv({environment:o,type:w().xd.text,properties:{title:l},inMemoryRecordCache:t,transaction:e,spaceId:n.id});F().NI({parentStore:d,childStore:p,transaction:e})})),I().yM({environment:o,spaceStore:n,spaceViewStore:a,pageStore:d,isPrivate:!0,transaction:e,location:{type:"prepend"}}),j()._l({environment:o,store:d,isLocked:!0,transaction:e}),(0,D().u)({environment:o,event:{eventName:"form_response_save_page",eventProperties:{page_id:d.id}}}),r(),T().uK({environment:o,store:d,pageVisitSource:A().y8.FormResponseSnapshot})}})}const q=(0,p().YK)({defaultFormResponseTitle:{id:"FormResponseSnapshotModal.saveResponseAsPage.defaultPageTitle",defaultMessage:"Your form response"},defaultAnswer:{id:"FormResponseSnapshotModal.saveResponseAsPage.defaultAnswer",defaultMessage:"(No answer)"},defaultQuestion:{id:"FormResponseSnapshotModal.saveResponseAsPage.defaultQuestion",defaultMessage:"(Untitled question)"}}),W=72,z=72;function _(){const e=(0,n().v3)(),{isPhone:o}=(0,n().Y0)(),t=(0,p().tz)(),[l,h]=(0,s.useState)(void 0),[g,x]=(0,s.useState)(!1),{open:y,formResponseId:C,secretKey:A,formSpaceId:w}=(0,r().O$)(M().A),R=(0,r().K8)((()=>e.WindowSizeStore.getSafePaddingTopCSS(24)),[e]),j=(0,i().IS)((e=>({mobilePopup:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",paddingTop:R,paddingBottom:R},desktopModal:{padding:96,height:"100%",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"}})),[R]);(0,a().l)((async()=>{if(!C||!A||!w)return;const o=e.currentUser.id,t=await c().callApi({eventName:"getFormResponseSnapshot",environment:e,data:{snapshotId:C,secretKey:A,spaceId:w},userId:o});"failed"!==t.type?(h(t.data.snapshotData),x(!0)):u().D6({label:(0,d.jsx)(p().sA,{defaultMessage:"There was an error loading your form response. Please contact the form creator.",id:"FormResponseSnapshotModal.Error"})})}));const F=(0,s.useCallback)((()=>{M().A.setState({open:!1,formResponseId:void 0,secretKey:void 0,formSpaceId:void 0})}),[]);return!y||g&&!l?null:o?(0,d.jsx)(f().Ay,{popupType:f().nl.SlideUp,style:j.mobilePopup,open:void 0!==l,onDismiss:F,render:()=>l?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(S().H,{type:v().A.Y,style:{marginBottom:50,width:"100%"},children:(0,d.jsx)("div",{style:{padding:20,width:"100%"},children:(0,d.jsx)(Y,{formSnapshotData:l})})}),(0,d.jsx)(N,{handleModalClose:F,formSnapshotData:l})]}):null}):(0,d.jsx)(m().a,{ariaLabel:t.formatMessage({id:"FormResponseSnapshotModal.ariaLabel",defaultMessage:"Form Response"}),style:{},innerStyle:{height:`calc(100% - ${W}px*2)`,width:`calc(100% - ${z}px*2)`,maxWidth:960},open:void 0!==l,onDismiss:F,render:()=>l?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(H,{formSnapshotData:l,handleModalClose:F}),(0,d.jsx)(S().H,{type:v().A.Y,style:j.desktopModal,children:(0,d.jsx)(Y,{formSnapshotData:l})})]}):null})}function V(){const e=`/icons/drafts_gray.svg?mode=${(0,i().DP)().mode}`;return(0,d.jsx)("img",{src:e,style:{height:75}})}function Y(e){let{formSnapshotData:o}=e;const t=(0,i().DP)(),s=(0,n().Y0)().isPhone,a=(0,r().K8)((()=>o.questionsAndAnswers??[]),[o]);return(0,d.jsxs)("div",{style:{maxWidth:700,wordBreak:"break-word",marginTop:12},children:[(0,d.jsx)(V,{}),(0,d.jsx)("h1",{style:{fontSize:s?28:40,fontWeight:700,marginBottom:42,lineHeight:1.2},children:(0,d.jsx)("span",{children:""===o.formTitle?(0,d.jsx)(p().sA,{id:"FormResponseSnapshotModal.yourResponse",defaultMessage:"Your form response"}):(0,d.jsx)(p().sA,{id:"FormResponseSnapshotModal.yourResponseToTitle",defaultMessage:"Your response to <a>{formTitle}</a>",values:{a:e=>(0,d.jsx)("a",{href:o.formUrl,style:{color:t.grayButtonPressedBackground,cursor:"pointer"},children:e}),formTitle:o.formTitle}})})}),(0,d.jsx)("div",{children:a.map(((e,o)=>(0,d.jsx)(K,{questionAndAnswer:e},o)))})]})}function K(e){let{questionAndAnswer:o}=e;const t=""===o.question?(0,d.jsx)(p().sA,{defaultMessage:"(Untitled question)",id:"FormResponseSnapshotModal.Question.defaultQuestion"}):o.question,s="checkbox"===o.questionType?(0,B().Fc)(o.answer):o.answer;return(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:25},children:[(0,d.jsx)("span",{style:{fontSize:24,fontWeight:600},children:t}),(0,d.jsx)("span",{style:{fontSize:16,fontWeight:400,marginTop:6,wordWrap:"break-word"},children:""!==s?s:(0,d.jsx)(p().sA,{defaultMessage:"(No answer)",id:"FormResponseSnapshotModal.Answer.defaultAnswer"})})]})}function H(e){let{formSnapshotData:o,handleModalClose:t}=e;const a=(0,n().v3)(),r=(0,i().IS)((e=>({savePageIcon:{width:16,fill:e.icon.secondary,marginRight:5}})),[]),c=(0,s.useCallback)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:s}=C().default.state;e&&s&&L({environment:a,inMemoryRecordCache:a.defaultRecordCache.inMemoryRecordCache,formSnapshotData:o,currentSpaceStore:e,currentSpaceViewStore:s,handleModalClose:t})}),[a,o,t]);return(0,d.jsx)(x().A,{placement:y().W.Bottom,renderTooltip:()=>(0,d.jsx)(p().sA,{defaultMessage:"Save a copy of your response to your private section",id:"FormResponseSnapshotModal.ActionButtons.SavePage.tooltip"}),render:e=>(0,d.jsx)("div",{style:{position:"absolute",top:10,right:10,zIndex:2},children:(0,d.jsxs)(h().A,{size:"lg",onClick:c,...e,children:[l(r.savePageIcon),(0,d.jsx)(p().sA,{defaultMessage:"Save page",id:"FormResponseSnapshotModal.ActionButtons.SavePage"})]})})})}function N(e){let{handleModalClose:o,formSnapshotData:t}=e;const a=(0,n().v3)(),r=(0,s.useCallback)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:s}=C().default.state;e&&s&&L({environment:a,inMemoryRecordCache:a.defaultRecordCache.inMemoryRecordCache,formSnapshotData:t,currentSpaceStore:e,currentSpaceViewStore:s,handleModalClose:o})}),[a,t,o]),l=(0,i().IS)((e=>({actionButtons:{height:47,width:"50%",fontSize:17,borderRadius:12}})),[]);return(0,d.jsxs)("div",{style:{display:"flex",width:"100%",position:"absolute",bottom:10,gap:12,zIndex:2,paddingLeft:10,paddingRight:10,paddingBottom:40},children:[(0,d.jsx)(g().A,{onClick:r,style:{...l.actionButtons,justifyContent:"center"},children:(0,d.jsx)(p().sA,{defaultMessage:"Save",id:"FormResponseSnapshotModal.Mobile.SavePage"})}),(0,d.jsx)(h().A,{size:"lg",onClick:o,style:l.actionButtons,children:(0,d.jsx)(p().sA,{defaultMessage:"Close",id:"FormResponseSnapshotModal.Mobile.Close"})})]})}}}]);