"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[1978],{63620:(e,i,t)=>{t.r(i),t.d(i,{InjectThirdPartyScripts:()=>L,useThirdPartyScripts:()=>D});var a=t(296540),s=()=>t(484714),n=()=>t(56366),o=(t(944114),()=>t(498212)),r=()=>t(283699),c=()=>t(591779),l=()=>t(299917);const d={siteId:"a2a8e2144b2bbbb4074a",orgId:"901895b8-45c7-40c8-ba91-626cfc6739b3"};function u(){var e,i,t;if(!window._cio)for(window._cio=[],e=function(e){return function(){window._cio.push([e].concat(Array.prototype.slice.call(arguments,0)))}},i=["load","identify","sidentify","track","page","on","off","reset"],t=0;t<i.length;t++)window._cio[i[t]]=e(i[t])}var g=()=>t(116225),p=()=>t(902052),f=()=>t(435009),m=()=>t(576727),y=()=>t(780054),v=()=>t(680074),w=()=>t(150749),_=()=>t(836251),S=()=>t(792415),b=()=>t(765957),I=()=>t(438754),k=()=>t(762014),A=()=>t(217429),h=()=>t(47170),C=()=>t(645873);const E=new(C().O2)("sentry",t(445155).q);var R=()=>t(240865);function D(){const e=(0,s().v3)(),i=(0,R().V)()||0,t=(0,s().Y0)(),{currentUser:D}=e,L=(0,h().O)(),{siteGoogleAnalyticsId:O,requestedOnPublicDomain:G}=(0,n().K8)((()=>{if(!(0,_().w6)(e))return{siteGoogleAnalyticsId:void 0,requestedOnPublicDomain:!1};const{publicPageData:i}=S().A.state,{siteGoogleAnalyticsId:t}=i||{};return t&&t.match(/[0-9A-Z]+/)?{siteGoogleAnalyticsId:`G-${t}`,requestedOnPublicDomain:!0}:{siteGoogleAnalyticsId:void 0,requestedOnPublicDomain:!0}}),[e]);!function(e){let{isEnabled:i,cookieService:t,siteGoogleAnalyticsId:s}=e;(0,a.useEffect)((()=>{(async function(){return!(!i||!s||!(await r().nQ({service:"google_tag_manager",cookieService:t}))||"dataLayer"in window)})().then((e=>{if(e)return(0,l().Ay)(`https://www.googletagmanager.com/gtag/js?id=${s}`,{id:"notion-site-google-analytics"}).catch((e=>{console.error("GA script failed to load",e)})).then((()=>{if(window.dataLayer){function e(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",s)}}))}))}),[i,t,s])}({isEnabled:Boolean(G),siteGoogleAnalyticsId:O,cookieService:e.cookieService}),function(e){let{isEnabled:i,isLoggedIn:t,userId:s,onMessageOpened:n,onMessageDismissed:g,onMessageError:p,onMessageAction:f,cookieService:m}=e;(0,a.useEffect)((()=>{(async function(){return!!i&&!!(await r().nQ({service:"customer_io",cookieService:m}))&&!("cio-tracker"in window)})().then((e=>{if(e)return u(),(0,l().Ay)("https://assets.customer.io/assets/track.js",{id:"cio-tracker",attributes:{"data-site-id":d.siteId,"data-use-array-params":"true","data-in-app-org-id":d.orgId,"data-use-in-app":"true","data-auto-track-page":"false"}}).catch((e=>{console.warn("Customer.io failed to load",e)}))}))}),[i,m]);const y=(0,c().ZC)(s);(0,a.useEffect)((()=>{y!==s&&(u(),t&&void 0!==s?(window._cio.identify({id:(0,o().Xw)(s)}),n&&window._cio.on("in-app:message-opened",n),g&&window._cio.on("in-app:message-dismissed",g),f&&window._cio.on("in-app:message-action",f),window._cio.on("in-app:message-error",p)):window._cio.reset())}),[t,s,y,n,g,p,f])}({isEnabled:(0,n().K8)((()=>D.isLoggedIn()),[D]),isLoggedIn:D.isLoggedIn(),userId:D.id,onMessageOpened:i=>{k().A.state.suppressReason?p().pO(e,{message_id:i.detail.messageId,reason:k().A.state.suppressReason}):(k().A.setState({...k().A.state,isVisible:!0}),p().v4(e,{message_id:i.detail.messageId}))},onMessageDismissed:i=>{k().A.setState({...k().A.state,isVisible:!1}),p().gQ(e,{message_id:i.detail.messageId})},onMessageError:i=>{p().gr(e,{message_id:i.detail.messageId})},onMessageAction:i=>{if(i.detail.actionValue.startsWith("relative_url=")){const t=i.detail.actionValue.split("relative_url=")[1];f().oo({environment:e,url:t})}i.detail.message.dismiss()},cookieService:e.cookieService}),(0,g().LW)({...(0,n().K8)((()=>{var e;const a=m().default.state.isSprigEnabled&&I().A.state.permission.performance&&A().default.checkGate({gateName:"sprig"})&&t.isDesktop,{currentUserSettingsStore:s,currentSpaceStore:n,currentUserStore:o}=b().default.state,r=null==o?void 0:o.getEmail(),c=s?(0,v().iZ)(s):null,l=Boolean(null==n?void 0:n.canAdmin()),d=null==n||null===(e=n.getModel())||void 0===e?void 0:e.getDaysSinceCreated();return{isEnabled:a,userEmail:r,userDaysSinceSignup:c??0,userDomainType:(0,v().FX)(),daysSinceSpaceCreated:d,isSpaceAdmin:l,spaceMemberCount:i}}),[t,i]),isLoggedIn:D.isLoggedIn(),userId:D.id,spaceId:L,sprigConfig:y().A.sprig}),function(e){var i;const{userId:t,spaceId:s,...n}=e,o=(0,C().fJ)(E);(0,a.useEffect)((()=>{if(!o.value)return;const{Sentry:e,sentryInitializeFull:i}=o.value;i({Sentry:{...e,isFullSDK:!0},config:y().A,...n})}),[o.value,n]);const r=null===(i=o.value)||void 0===i?void 0:i.Sentry;(0,a.useEffect)((()=>{r&&r.setUser(t?{id:t}:null)}),[r,t]),(0,a.useEffect)((()=>{r&&r.setTag("space.id",s)}),[r,s])}({userId:D.id,spaceId:L,getErrorsSampleRate:(0,a.useCallback)((()=>A().default.getConfigKey("sentry","errorsSampleRate")),[]),getTracesSampleRate:(0,a.useCallback)((()=>A().default.getConfigKey("sentry","tracesSampleRate-v0")),[]),getReplaysSessionSampleRate:(0,a.useCallback)((()=>A().default.getConfigKey("sentry","replaysSessionSampleRate-v0")),[]),getReplaysOnErrorSampleRate:(0,a.useCallback)((()=>A().default.getConfigKey("sentry","replaysOnErrorSampleRate-v0")),[]),getIsProfilingEnabled:(0,a.useCallback)((()=>"sentry"===(0,w().getProfilingToolForSession)()),[]),getProfilesSampleRate:(0,a.useCallback)((()=>A().default.getConfigKey("sentry","profilesSampleRate")),[])})}function L(){return D(),null}},902052:(e,i,t)=>{t.d(i,{_C:()=>s,gQ:()=>c,gr:()=>l,jr:()=>n,pO:()=>r,v4:()=>o});var a=()=>t(679924);function s(e,i){const{name:t,...s}=i;(0,a().v)(e,"click_link",{...s,click_name:t})}function n(e,i){(0,a().v)(e,"scroll",i)}function o(e,i){(0,a().v)(e,"customer_io_in_app_callout_show",i)}function r(e,i){(0,a().v)(e,"customer_io_in_app_callout_suppress",i)}function c(e,i){(0,a().v)(e,"customer_io_in_app_callout_dismiss",i)}function l(e,i){(0,a().v)(e,"customer_io_in_app_callout_error",i)}}}]);