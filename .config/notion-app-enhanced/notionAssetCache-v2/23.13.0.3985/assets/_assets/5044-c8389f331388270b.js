"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[5044],{5347:(e,t,a)=>{a.d(t,{K:()=>p,L:()=>m});var s=a(296540),n=()=>a(484714),o=()=>a(959013),i=()=>a(534177),r=()=>a(76590),l=()=>a(91709),d=()=>a(47170),c=()=>a(311670),u=()=>a(864943),g=a(474848);function m(e){const{style:t,analyticsType:a,filters:i,disabled:r}=e,l=(0,n().v3)(),[c,m]=(0,s.useState)(!1),h=(0,d().O)(),f=r||c;return(0,g.jsx)(u().A,{size:"lg",style:t,disabled:f,onClick:async function(){h&&(m(!0),await p({environment:l,spaceId:h,analyticsType:a,filters:i}),m(!1))},children:(0,g.jsx)(o().sA,{id:"spaceAnalytics.usersTab.export",defaultMessage:"Export as CSV"})})}async function p(e){const{environment:t,spaceId:a,organizationId:s,analyticsType:n,filters:o}=e;if(a)switch(n){case c().e.Users:r().TJ(t,{daysFilter:o.daysFilter}),await l().aC(t,{spaceId:a,organizationId:s,daysFilter:o.daysFilter});break;case c().e.Content:r().lP(t,{filters:o}),await l().QF(t,{spaceId:a,organizationId:s,filters:o});break;default:(0,i().HB)(n)}}},6208:(e,t,a)=>{a.d(t,{L:()=>d,y:()=>l});var s=()=>a(56366),n=()=>a(798880),o=()=>a(959013),i=()=>a(765957),r=()=>a(630116);function l(e){const t=(0,o().tz)();return(0,s().K8)((()=>{const{currentSpaceStore:a}=i().default.state;if(!a||!e)return;return r().LU.createChildStore(a,{table:n().oo,id:e}).getDisplayName(t)}),[t,e])}function d(){const e=(0,o().tz)();return(0,s().K8)((()=>{const{currentUserStore:t}=i().default.state,a=null!=t&&t.isDefined()?t.getModel():void 0;return a?a.getDisplayName(e):void 0}),[e])}},15144:(e,t,a)=>{a.d(t,{R:()=>i});a(296540);var s=()=>a(959013),n=()=>a(554509),o=a(474848);function i(e){let{error:t,id:a}=e;return t?(0,o.jsx)(n().D,{id:a,styleName:"UISmall-12px/Regular",colorName:"uiRedPrimary",children:"object"==typeof t?(0,o.jsx)(s().sA,{...t}):t}):null}},15936:(e,t,a)=>{a.d(t,{g:()=>o});a(296540);var s=a(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"3.07 2.17 13.85 15.65",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M12.876 7.978a.625.625 0 1 0-1.072-.643L9.25 11.59 7.815 9.916a.625.625 0 0 0-.95.814l2 2.333a.625.625 0 0 0 1.01-.085z"}),(0,s.jsx)("path",{d:"M10.28 2.241a.63.63 0 0 0-.56 0l-1.89.945a7.5 7.5 0 0 1-3.342.789H3.7a.625.625 0 0 0-.625.625v6.933a5.13 5.13 0 0 0 3.106 4.71l3.573 1.532a.63.63 0 0 0 .492 0l3.573-1.532a5.13 5.13 0 0 0 3.106-4.71V4.6a.625.625 0 0 0-.625-.625h-.788c-1.16 0-2.305-.27-3.343-.79zM8.39 4.304 10 3.499l1.61.805a8.7 8.7 0 0 0 3.902.921h.163v6.308c0 1.55-.924 2.95-2.349 3.562L10 16.52l-3.326-1.425a3.88 3.88 0 0 1-2.349-3.562V5.225h.163c1.354 0 2.69-.315 3.902-.921"})]})},o=(0,a(340498).wt)("checkmarkShield",n)},17281:(e,t,a)=>{a.d(t,{h:()=>l});var s=()=>a(484714),n=()=>a(187174),o=()=>a(449506),i=()=>a(749240),r=()=>a(963589);function l(e){const t=(0,s().v3)(),a=(0,r().X)("edge_cache_member_email_domains"),[{value:l}]=(0,n().Yb)((async()=>{var s,n,r;if(!a)return;if("unsubscribed_admin"!==(null===(s=i().subscriptionDataStoreInstance.state)||void 0===s?void 0:s.type)&&"unsubscribed_member"!==(null===(n=i().subscriptionDataStoreInstance.state)||void 0===n?void 0:n.type)&&"subscribed_admin"!==(null===(r=i().subscriptionDataStoreInstance.state)||void 0===r?void 0:r.type))return;const l=await o().callApi({eventName:"getMemberEmailDomains",environment:t,data:{spaceId:e}});if("success"===l.type)return l.data.emailDomains;if("failed"===l.type)throw l.error}),[t,e,a]);return l}},17297:(e,t,a)=>{a.d(t,{m:()=>de});var s=a(296540),n=(a(581454),()=>a(959013)),o=()=>a(496603),i=()=>a(534177),r=()=>a(728200),l=()=>a(202966),d=()=>a(64939),c=()=>a(624090),u=()=>a(130382),g=()=>a(674741),m=()=>a(857639),p=()=>a(433847),h=()=>a(348564),f=()=>a(179034),x=()=>a(326399),v=()=>a(96689),y=()=>a(854150),b=()=>a(287882),S=()=>a(301608),j=()=>a(939962),w=()=>a(326346),A=a(474848);function M(e){return"workspace"!==e}function C(e){var t,a,s,n,o,i,r;const l={read_content:null===(t=e.capabilities)||void 0===t?void 0:t.read_content,update_content:null===(a=e.capabilities)||void 0===a?void 0:a.update_content,insert_content:null===(s=e.capabilities)||void 0===s?void 0:s.insert_content,read_comment:null===(n=e.capabilities)||void 0===n?void 0:n.read_comment,insert_comment:null===(o=e.capabilities)||void 0===o?void 0:o.insert_comment,user_capabilities:null!==(i=e.capabilities)&&void 0!==i&&i.read_user_with_email?"read_user_including_email":null!==(r=e.capabilities)&&void 0!==r&&r.read_user_without_email?"read_user_excluding_email":"none"};return JSON.stringify(l)}const I=(0,n().YK)({started:{id:"space.spaceContentDuplicationStatus.started",defaultMessage:"Started"},completed:{id:"space.spaceContentDuplicationStatus.completed",defaultMessage:"Completed"},failed:{id:"space.spaceContentDuplicationStatus.failed",defaultMessage:"Failed"}}),T=(0,n().YK)({equallyRestrictive:{defaultMessage:". This is the same as the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_equal"},moreRestrictive:{defaultMessage:". This is more restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_more_restrictive"},lessRestrictive:{defaultMessage:". This is less restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_less_restrictive"}});function k(e,t){if(void 0!==e&&void 0!==t)return e===t?(0,A.jsx)(n().sA,{...T.equallyRestrictive}):!e&&t?(0,A.jsx)(n().sA,{...T.moreRestrictive}):e&&!t?(0,A.jsx)(n().sA,{...T.lessRestrictive}):void 0}function _(e){return e.name?`“${e.name}“ group`:(0,A.jsx)(n().sA,{...l().D.group})}function z(e){return e.changes.name.oldValue&&e.changes.name.newValue?(0,A.jsx)(n().sA,{defaultMessage:"from “{oldTeamName}” to “{newTeamName}”",id:"auditlog.actionNames.eventColumn.from_old_team_name_to_new_team_name",values:{oldTeamName:e.changes.name.oldValue,newTeamName:e.changes.name.newValue}}):!e.changes.name.oldValue&&e.changes.name.newValue?(0,A.jsx)(n().sA,{defaultMessage:"from some teamspace name to “{newTeamName}”",id:"auditlog.actionNames.eventColumn.from_unknown_team_name_to_new_team_name",values:{newTeamName:e.changes.name.newValue}}):(0,A.jsx)(n().sA,{defaultMessage:"for {teamName}",id:"auditlog.actionNames.eventColumn.for_team_name",values:{teamName:(0,d().if)(e)}})}function D(e){if(e)switch(e){case"owner":return(0,A.jsx)(n().sA,{...l().D.team_owner});case"member":return(0,A.jsx)(n().sA,{...l().D.team_member});case"team_level_guest":return(0,A.jsx)(n().sA,{...l().D.team_level_guest})}return(0,A.jsx)(n().sA,{...l().D.team_member})}function P(e){var t,a;return{oldRole:(0,A.jsx)(n().sA,{...N(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.oldValue)}),newRole:(0,A.jsx)(n().sA,{...N(null===(a=e.changes)||void 0===a||null===(a=a.permission)||void 0===a?void 0:a.newValue)})}}function N(e){if(!e)return p().Sf.noAccessLabel;switch(e){case"editor":return p().Sf.workspaceOwnerLabel;case"membership_admin":return p().Sf.membershipAdminLabel;case"read_and_write":return p().Sf.memberLabel;default:return p().Sf.noAccessLabel}}function R(e){var t,a;return null!==(t=e.target)&&void 0!==t&&null!==(t=t.page)&&void 0!==t&&null!==(t=t.meta)&&void 0!==t&&t.parent&&"title"in(null===(a=e.target)||void 0===a||null===(a=a.page)||void 0===a||null===(a=a.meta)||void 0===a?void 0:a.parent)?`“${e.target.page.meta.parent.title}“`:(0,A.jsx)(n().sA,{...j().Qk.anUntitledPage})}function B(e){var t;return null!==(t=e.actor.meta)&&void 0!==t&&t.platform?(0,A.jsx)(n().sA,{defaultMessage:"on {platform}",id:"auditlog.actionNames.eventColumn.logged_in_platform",values:{platform:e.actor.meta.platform}}):""}function L(e){switch(e){case"google":return(0,A.jsx)(n().sA,{defaultMessage:"Google",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.google"});case"email":return(0,A.jsx)(n().sA,{defaultMessage:"temporary passcode",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.email"});case"admin":return(0,A.jsx)(n().sA,{defaultMessage:"Notion support access",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.admin"});case"saml":return(0,A.jsx)(n().sA,{defaultMessage:"SAML SSO",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.saml"});case"apple":return(0,A.jsx)(n().sA,{defaultMessage:"Apple ID",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.apple"});case"microsoft":return(0,A.jsx)(n().sA,{defaultMessage:"Microsoft",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.microsoft"});case"password":case"password-no-mfa":case"password-sms":case"password-totp":case"password-backup-code":return(0,A.jsx)(n().sA,{defaultMessage:"password",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.password"});case"passkey":return(0,A.jsx)(n().sA,{defaultMessage:"passkey",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.passkey"});default:(0,i().HB)(e)}}function E(e){return e.changes.name.oldValue?(0,A.jsx)(n().sA,{defaultMessage:"from “{oldDomain}”",id:"auditlog.actionNames.eventColumn.old_domain",values:{oldDomain:e.changes.name.oldValue}}):""}function O(e,t){return"block"===e.table?(0,A.jsx)(n().sA,{defaultMessage:"{teamName} page {parentPage}",id:"auditlog.actionNames.eventColumn.team_parent_page",values:{teamName:(0,d().nZ)(t),parentPage:U(e)}}):"team"===e.table?(0,d().nZ)(t):void 0}function U(e){return"title"in e?`“${e.title}“`:(0,A.jsx)(n().sA,{...j().Qk.anUntitledPage})}function F(e,t){if(!t)return(0,A.jsx)(n().sA,{...j().Qk.anUntitledPage});const a=t.table;return"space"===a?t.id!==e?(0,A.jsx)(n().sA,{...l().D.otherWorkspace}):M(t.permissionLevel)?(0,A.jsx)(n().sA,{...l().D.private}):(0,A.jsx)(n().sA,{...l().D.thisWorkspace}):"team"===a?(0,d().nZ)(t):"block"===a?t.title?`“${t.title}“`:(0,A.jsx)(n().sA,{...j().Qk.anUntitledPage}):void 0}const H=(0,n().YK)({open:{defaultMessage:"Open",id:"auditlog.actionNames.eventColumn.team_privacy_types.open"},closed:{defaultMessage:"Closed",id:"auditlog.actionNames.eventColumn.team_privacy_types.closed"},private:{defaultMessage:"Private",id:"auditlog.actionNames.eventColumn.team_privacy_types.private"},default:{defaultMessage:"Default",id:"auditlog.actionNames.eventColumn.team_privacy_types.default"},unknown:{defaultMessage:"an unknown privacy state",id:"auditlog.actionNames.eventColumn.team_privacy_types.unknown"}});function V(e){return e?(0,A.jsx)(n().sA,{...H[e]}):(0,A.jsx)(n().sA,{...H.unknown})}function W(e){return e.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.disabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.enabled"})}function q(e){return e.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.disabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.enabled"})}function G(e){return"approved"===e.changes.requestStatus.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Approved",id:"auditlog.actionNames.eventColumn.membership_request_resolved.approved"}):(0,A.jsx)(n().sA,{defaultMessage:"Declined",id:"auditlog.actionNames.eventColumn.membership_request_resolved.declined"})}function K(e){return e.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.disabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.enabled"})}function Y(e){return e.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.disabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.enabled"})}const Q=(0,n().YK)({team_members:{defaultMessage:"any teamspace member",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_members"},team_owners:{defaultMessage:"only teamspace owners",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_owners"},unknown:{defaultMessage:"unknown",id:"auditlog.actionNames.eventColumn.team_access_level_types.unknown"}});function $(e){var t,a,s,p,T,N,U,H,$,Z,J,ee,te,ae,se,ne,oe,ie,re,le,de,ce,ue,ge,me,pe,he,fe,xe,ve,ye,be,Se,je,we,Ae,Me,Ce,Ie,Te,ke,_e,ze,De,Pe;const{auditLogEntry:Ne,env:Re,intl:Be}=e;if((0,r().nS)(Ne))return(0,r().ZD)({...e,auditLogEntry:Ne});switch(Ne.actionName){case"page.properties_edited":{const xt=Ne.meta.propertiesUpdated,vt=Ne.meta.propertiesUpdated.map((e=>`“${e.propertyName}“`)).join(", ");return 1===xt.length?(0,A.jsx)(n().sA,{defaultMessage:"Edited property {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.single_property",values:{properties:vt,pageName:(0,j().wS)(Ne)}}):(0,A.jsx)(n().sA,{defaultMessage:"Edited properties {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.multiple_properties",values:{properties:vt,pageName:(0,j().wS)(Ne)}})}case"page.suggestion.comment.updated":return(0,A.jsx)(n().sA,{defaultMessage:"Edited comment on suggestion on {pageName}",id:"auditlog.actionNames.eventColumn.page.suggestion.comment.updated",values:{pageName:(0,j().wS)(Ne)}});case"page.discussion.comment.updated":return(0,A.jsx)(n().sA,{defaultMessage:"Edited comment on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.updated",values:{pageName:(0,j().wS)(Ne)}});case"page_edited":return(0,A.jsx)(n().sA,{defaultMessage:"Edited {pageName}",id:"auditlog.actionNames.eventColumn.page_edited",values:{pageName:(0,j().wS)(Ne)}});case"page_deleted":return Ne.target.page.meta.permanentDeletion?(0,A.jsx)(n().sA,{defaultMessage:"Deleted {pageName} from Trash",id:"auditlog.actionNames.eventColumn.page_permanently_deleted",values:{pageName:(0,j().wS)(Ne)}}):(0,A.jsx)(n().sA,{defaultMessage:"Moved {pageName} to Trash",id:"auditlog.actionNames.eventColumn.page_deleted",values:{pageName:(0,j().wS)(Ne)}});case"page.purged":return(0,A.jsx)(n().sA,{defaultMessage:"Permanently deleted {pageName}",id:"auditlog.actionNames.eventColumn.page.purged",values:{pageName:(0,j().wS)(Ne)}});case"page_restored":return(0,A.jsx)(n().sA,{defaultMessage:"Restored {pageName}{withAdminPerms, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_restored",values:{pageName:(0,j().wS)(Ne),withAdminPerms:(0,d().th)(Ne)}});case"page_exported":return(0,A.jsx)(n().sA,{defaultMessage:"Exported {pageName}",id:"auditlog.actionNames.eventColumn.page_exported",values:{pageName:(0,j().wS)(Ne)}});case"page_moved":{var Le,Ee,Oe;const yt=null===(Le=Ne.changes)||void 0===Le?void 0:Le.team,bt=Ne.changes.parent.oldValue,St=Ne.changes.parent.newValue;let jt=F(Ne.spaceId,Ne.changes.parent.oldValue),wt=F(Ne.spaceId,Ne.changes.parent.newValue);null!=yt&&yt.oldValue&&null!=yt&&yt.newValue&&bt&&St&&("block"===bt.table||"block"===St.table)?(jt=O(bt,null==yt?void 0:yt.oldValue),wt=O(St,null==yt?void 0:yt.newValue)):"space"===(null===(Ee=Ne.changes.parent.oldValue)||void 0===Ee?void 0:Ee.table)&&"space"===(null===(Oe=Ne.changes.parent.newValue)||void 0===Oe?void 0:Oe.table)&&Ne.changes.parent.oldValue.id===Ne.changes.parent.newValue.id&&(M(Ne.changes.parent.oldValue.permissionLevel)||M(Ne.changes.parent.newValue.permissionLevel))&&(jt=M(Ne.changes.parent.oldValue.permissionLevel)?(0,A.jsx)(n().sA,{...l().D.private}):(0,A.jsx)(n().sA,{...l().D.workspaceLevel}),wt=M(Ne.changes.parent.newValue.permissionLevel)?(0,A.jsx)(n().sA,{...l().D.private}):(0,A.jsx)(n().sA,{...l().D.workspaceLevel}));const At=jt?Be.formatMessage({id:"auditLogEntry.changes.page_moved.old_parent",defaultMessage:" from {oldParentName}"},{oldParentName:jt}):"",Mt=wt?Be.formatMessage({id:"auditLogEntry.changes.page_moved.new_parent",defaultMessage:" to {newParentName}"},{newParentName:wt}):"";return(0,A.jsx)(n().sA,{defaultMessage:"Moved {pageName}{oldParentMessage}{newParentMessage}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_moved",values:{pageName:(0,j().wS)(Ne),oldParentMessage:At,newParentMessage:Mt,inSudoMode:(0,j().AJ)(Ne)}})}case"page_permission_updated":return function(e,t){var a,s,o;const i="bot"in t.target,r="space"in t.target,l="team"in t.target,c="group"in t.target,u="user"in t.target&&"guest"===(null===(a=t.target.user.meta)||void 0===a?void 0:a.spaceRole);var g,m;if(i)return(0,A.jsx)(n().sA,{defaultMessage:"Updated permissions of {pageName} for bot {botName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_bot",values:{botName:(0,d().xC)(e,t),oldRole:(0,j().H8)(null===(g=t.changes)||void 0===g||null===(g=g.permission)||void 0===g?void 0:g.oldValue),newRole:(0,j().H8)(null===(m=t.changes)||void 0===m||null===(m=m.permission)||void 0===m?void 0:m.newValue),pageName:(0,j().wS)(t),inSudoMode:(0,j().AJ)(t)}});var p,h,f,x,v,y;if(r)return(0,A.jsx)(n().sA,{defaultMessage:"Updated permissions of {pageName} for everyone in the workspace from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_space",values:{oldRole:(0,j().H8)(null===(p=t.changes)||void 0===p||null===(p=p.permission)||void 0===p?void 0:p.oldValue),newRole:(0,j().H8)(null===(h=t.changes)||void 0===h||null===(h=h.permission)||void 0===h?void 0:h.newValue),pageName:(0,j().wS)(t),inSudoMode:(0,j().AJ)(t)}});if(l)return(0,A.jsx)(n().sA,{defaultMessage:"Updated permissions of {pageName} for {teamName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_team",values:{oldRole:(0,j().H8)(null===(f=t.changes)||void 0===f||null===(f=f.permission)||void 0===f?void 0:f.oldValue),newRole:(0,j().H8)(null===(x=t.changes)||void 0===x||null===(x=x.permission)||void 0===x?void 0:x.newValue),pageName:(0,j().wS)(t),teamName:(0,d().if)(t),inSudoMode:(0,j().AJ)(t)}});if(u)return(0,A.jsx)(n().sA,{defaultMessage:"Updated permissions of {pageName} for guest {guestNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_guest",values:{guestNameAndEmail:(0,d().xC)(e,t),oldRole:(0,j().H8)(null===(v=t.changes)||void 0===v||null===(v=v.permission)||void 0===v?void 0:v.oldValue),newRole:(0,j().H8)(null===(y=t.changes)||void 0===y||null===(y=y.permission)||void 0===y?void 0:y.newValue),pageName:(0,j().wS)(t),inSudoMode:(0,j().AJ)(t)}});if(c){var b,S;return(0,A.jsx)(n().sA,{defaultMessage:"Updated permissions of {pageName} for group {groupName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_group",values:{groupName:(0,d().xC)(e,t),oldRole:(0,j().H8)(null===(b=t.changes)||void 0===b||null===(b=b.permission)||void 0===b?void 0:b.oldValue),newRole:(0,j().H8)(null===(S=t.changes)||void 0===S||null===(S=S.permission)||void 0===S?void 0:S.newValue),pageName:(0,j().wS)(t),inSudoMode:(0,j().AJ)(t)}})}return(0,A.jsx)(n().sA,{defaultMessage:"Updated permissions of {pageName} for {memberNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_default",values:{memberNameAndEmail:(0,d().xC)(e,t),oldRole:(0,j().H8)(null===(s=t.changes)||void 0===s||null===(s=s.permission)||void 0===s?void 0:s.oldValue),newRole:(0,j().H8)(null===(o=t.changes)||void 0===o||null===(o=o.permission)||void 0===o?void 0:o.newValue),pageName:(0,j().wS)(t),inSudoMode:(0,j().AJ)(t)}})}(Be,Ne);case"page_created":const qe=(0,h().fS)(Ne);if(null!=qe&&null!==(t=qe.meta)&&void 0!==t&&t.parent){var Ue,Fe,He,Ve;if(qe.meta.parent.table===v().NX)return"private"===(null===(He=qe.meta)||void 0===He?void 0:He.permissionLevel)||"private"===(null===(Ve=qe.meta)||void 0===Ve?void 0:Ve.pageAudience)?(0,A.jsx)(n().sA,{defaultMessage:"Created a private page",id:"auditlog.actionNames.eventColumn.page_created_private"}):(0,A.jsx)(n().sA,{defaultMessage:"Created a page in the workspace",id:"auditlog.actionNames.eventColumn.page_created_workspace"});if((null===(Ue=qe.meta)||void 0===Ue?void 0:Ue.parent.table)===y().yK)return(0,A.jsx)(n().sA,{defaultMessage:"Created a page under {teamName}",id:"auditlog.actionNames.eventColumn.page_created_team",values:{teamName:(0,d().nZ)(qe.meta.parent)}});if((null===(Fe=qe.meta)||void 0===Fe?void 0:Fe.parent.table)===f().ev)return(0,A.jsx)(n().sA,{defaultMessage:"Created a page under {parentPageName}",id:"auditlog.actionNames.eventColumn.page_created_under",values:{parentPageName:R(Ne)}})}return(0,A.jsx)(n().sA,{defaultMessage:"Created a page",id:"auditlog.actionNames.eventColumn.page_created_general"});case"page_shared_to_web":return function(e){var t;if(void 0===e.changes.permission.newValue||"none"===e.changes.permission.newValue)return(0,A.jsx)(n().sA,{defaultMessage:"Disabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.disabled",values:{pageName:(0,j().wS)(e),inSudoMode:(0,j().AJ)(e)}});return(0,A.jsx)(n().sA,{defaultMessage:"Enabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}} with permissions {newRole}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.enabled",values:{pageName:(0,j().wS)(e),inSudoMode:(0,j().AJ)(e),newRole:(0,j().H8)(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.newValue)}})}(Ne);case"page.shared_with_email_domain":return function(e){var t;if(void 0===e.changes.permission.newValue||"none"===e.changes.permission.newValue)return(0,A.jsx)(n().sA,{defaultMessage:"Unshared {pageName} with email domains{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_shared_with_email_domain.disabled",values:{pageName:(0,j().wS)(e),inSudoMode:(0,j().AJ)(e)}});return(0,A.jsx)(n().sA,{defaultMessage:"Shared {pageName} with email domains{inSudoMode, select, true { using administrator privileges} other {}} with permissions {newRole}",id:"auditlog.actionNames.eventColumn.page_shared_with_email_domain.enabled",values:{pageName:(0,j().wS)(e),inSudoMode:(0,j().AJ)(e),newRole:(0,j().H8)(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.newValue)}})}(Ne);case"login":return function(e,t){var a,s,o;const i=null===(a=e.meta)||void 0===a?void 0:a.authType;return null!==(s=e.actor.meta)&&void 0!==s&&s.countryCode&&i?(0,A.jsx)(n().sA,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod} in {geolocation}",values:{platform:B(e),geolocation:(0,w().BN)(e,t),loginMethod:L(i)}}):null!==(o=e.actor.meta)&&void 0!==o&&o.countryCode&&!i?(0,A.jsx)(n().sA,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry",defaultMessage:"Logged in {platform} in {geolocation}",values:{platform:B(e),geolocation:(0,w().BN)(e,t)}}):i?(0,A.jsx)(n().sA,{id:"auditLog.actionNames.eventColumn.loginWithPlatform.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod}",values:{platform:B(e),loginMethod:L(i)}}):(0,A.jsx)(n().sA,{id:"auditLog.actionNames.eventColumn.loginWithPlatform",defaultMessage:"Logged in {platform}",values:{platform:B(e)}})}(Ne,Be);case"allowed_support_access":return(0,A.jsx)(n().sA,{defaultMessage:"Granted support access for {name} until {date}",id:"auditlog.actionNames.allowed_support_access",values:{date:Be.formatDate(Ne.changes.expiresAt),name:Ne.target.user.name}});case"revoked_support_access":return(0,A.jsx)(n().sA,{defaultMessage:"Revoked support access for {name}",id:"auditlog.actionNames.revoked_support_access",values:{name:Ne.target.user.name}});case"preferred_name_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id),o=e.changes.name.oldValue,i=e.changes.name.newValue;if(s){if(o&&i)return(0,A.jsx)(n().sA,{defaultMessage:"Changed {memberNameAndEmail} name from “{oldValue}” to “{newValue}”",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed",values:{memberNameAndEmail:(0,d().xC)(t,e),oldValue:o,newValue:i}});if(!o&&i)return(0,A.jsx)(n().sA,{defaultMessage:"Set {memberNameAndEmail} name to “{newValue}”",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_to_value",values:{memberNameAndEmail:(0,d().xC)(t,e),newValue:i}});if(o&&!i)return(0,A.jsx)(n().sA,{defaultMessage:"Removed {memberNameAndEmail} name “{oldValue}”",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_from_value",values:{memberNameAndEmail:(0,d().xC)(t,e),oldValue:o}})}if(o&&i)return(0,A.jsx)(n().sA,{defaultMessage:"Changed name from “{oldValue}” to “{newValue}”",id:"auditlog.actionNames.eventColumn.preferred_name_changed",values:{oldValue:o,newValue:i}});if(!o&&i)return(0,A.jsx)(n().sA,{defaultMessage:"Set name to “{newValue}”",id:"auditlog.actionNames.eventColumn.preferred_name_changed_to_value",values:{newValue:i}});if(o&&!i)return(0,A.jsx)(n().sA,{defaultMessage:"Removed name “{oldValue}”",id:"auditlog.actionNames.eventColumn.preferred_name_changed_from_value",values:{oldValue:o}});return(0,A.jsx)(n().sA,{defaultMessage:"Name was changed",id:"auditlog.actionNames.eventColumn.preferred_name_changed_generic"})}(Ne,Be);case"email_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id);return s?(0,A.jsx)(n().sA,{defaultMessage:"Changed {memberNameAndEmail} email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.external_email_changed",values:{memberNameAndEmail:(0,d().xC)(t,e),oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.email_changed",values:{oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}})}(Ne,Be);case"picture_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id);return s?(0,A.jsx)(n().sA,{defaultMessage:"Changed {memberNameAndEmail} profile picture",id:"auditlog.actionNames.eventColumn.external_picture_changed",values:{memberNameAndEmail:(0,d().xC)(t,e)}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed profile picture",id:"auditlog.actionNames.eventColumn.picture_changed"})}(Ne,Be);case"member_invited":{const Ct=P(Ne);return(0,A.jsx)(n().sA,{defaultMessage:"Invited {memberNameAndEmail} to the workspace as {newRole}",id:"auditlog.actionNames.eventColumn.member_invited",values:{memberNameAndEmail:(0,d().xC)(Be,Ne),newRole:Ct.newRole}})}case"member_role_updated":{const It=P(Ne);return(0,A.jsx)(n().sA,{defaultMessage:"Updated {memberNameAndEmail} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.member_role_updated",values:{memberNameAndEmail:(0,d().xC)(Be,Ne),oldRole:It.oldRole,newRole:It.newRole}})}case"member_removed":return Ne.actor.actorId===Ne.target.user.id?(0,A.jsx)(n().sA,{defaultMessage:"Left the workspace",id:"auditlog.actionNames.eventColumn.member_left"}):(0,A.jsx)(n().sA,{defaultMessage:"Removed {memberNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.member_removed",values:{memberNameAndEmail:(0,d().xC)(Be,Ne)}});case"guest_removed":return(0,A.jsx)(n().sA,{defaultMessage:"Removed guest {guestNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.guest_removed",values:{guestNameAndEmail:(0,d().xC)(Be,Ne)}});case"file_downloaded":return function(e){return(0,A.jsx)(n().sA,{defaultMessage:"Downloaded {fileName} from {pageName}",id:"auditlog.actionNames.eventColumn.file_downloaded",values:{fileName:X(e),pageName:(0,j().wS)(e)}})}(Ne);case"invite_link_toggled":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{id:"auditlog.actionNames.eventColumn.inviteLink.enabled",defaultMessage:"Enabled invite link"}):(0,A.jsx)(n().sA,{id:"auditlog.actionNames.eventColumn.inviteLink.disabled",defaultMessage:"Disabled invite link"});case"public_page_sharing_toggled":case"workspace_sidebar_editing_toggled":case"disable_guests_toggled":case"pages_to_other_workspaces_toggled":case"export_toggled":case"page_access_requests_toggled":return(0,r().ez)((0,d().sp)(Ne,Be));case"workspace_name_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed workspace name from “{oldValue}” to “{newValue}”",id:"auditlog.actionNames.eventColumn.workspace_name_changed",values:{oldValue:Ne.changes.name.oldValue,newValue:Ne.changes.name.newValue}});case"workspace_domain_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed workspace domain {oldValue} to “{newValue}”",id:"auditlog.actionNames.eventColumn.workspace_domain_changed",values:{oldValue:E(Ne),newValue:Ne.changes.name.newValue}});case"workspace_integration_restriction_changed":return function(e){const t=void 0,{oldValue:a,newValue:s}=e.changes.integration_restrictions;if(s===t)return(0,A.jsx)(n().sA,{defaultMessage:"Enabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.no_restrictions"});if(a===t&&"approved_only"===s)return(0,A.jsx)(n().sA,{defaultMessage:"Disabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.approved_only"});if("approved_or_built_by_notion"===a&&"approved_only"===s)return(0,A.jsx)(n().sA,{defaultMessage:"Disabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.disabled_built_by_notion.from_approved_or_built_by_notion"});if("approved_only"===a&&"approved_or_built_by_notion"===s)return(0,A.jsx)(n().sA,{defaultMessage:"Enabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.enabled_built_by_notion"});return(0,A.jsx)(n().sA,{defaultMessage:"Changed workspace integration restriction",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.fallback_message"})}(Ne);case"workspace.settings.disallow_webhook_automation_action_toggled":return function(e){const{newValue:t}=e.changes.enabled;if(t)return(0,A.jsx)(n().sA,{defaultMessage:"Disabled using 'Send webhook' action in automations",id:"auditlog.actionNames.eventColumn.workspace.settings.disallow_webhook_automation_action_toggled.enabled"});return(0,A.jsx)(n().sA,{defaultMessage:"Enabled using 'Send webhook' action in automations",id:"auditlog.actionNames.eventColumn.workspace.settings.disallow_webhook_automation_action_toggled.disabled"})}(Ne);case"allowed_email_domain_added":return(0,A.jsx)(n().sA,{defaultMessage:"Added “{addedValue}” into allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_added",values:{addedValue:Ne.changes.domain}});case"allowed_email_domain_removed":return(0,A.jsx)(n().sA,{defaultMessage:"Removed “{removedValue}” from allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_removed",values:{removedValue:Ne.changes.domain}});case"public_page_set":return Ne.changes.name.oldValue?(0,A.jsx)(n().sA,{defaultMessage:"Changed public home page from “{oldPage}” to “{newPage}”",id:"auditlog.actionNames.eventColumn.public_page_changed",values:{oldPage:Ne.changes.name.oldValue,newPage:Ne.changes.name.newValue}}):(0,A.jsx)(n().sA,{defaultMessage:"Set “{newPage}” as public home page",id:"auditlog.actionNames.eventColumn.public_page_set",values:{newPage:Ne.changes.name.newValue}});case"idp_metadata_url_updated":case"organization.saml.idp_metadata_url_updated":return Ne.changes.url.oldValue?(0,A.jsx)(n().sA,{defaultMessage:"Changed IDP metadata URL from “{oldValue}” to “{newValue}”",id:"auditlog.actionNames.eventColumn.idp_metadata_url_updated",values:{oldValue:Ne.changes.url.oldValue,newValue:Ne.changes.url.newValue}}):(0,A.jsx)(n().sA,{defaultMessage:"Set IDP metadata URL to “{newValue}”",id:"auditlog.actionNames.eventColumn.idp_metadata_url_set",values:{newValue:Ne.changes.url.newValue}});case"saml_toggled":case"organization.saml.toggled":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{...l().D.saml_enabled}):(0,A.jsx)(n().sA,{...l().D.saml_disabled});case"saml_enforce_toggled":case"organization.saml.enforce_toggled":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{...l().D.saml_enforced}):(0,A.jsx)(n().sA,{...l().D.saml_unenforced});case"automatic_account_creation_toggled":case"organization.saml.automatic_account_creation_toggled":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{...l().D.automatic_account_creation_enabled}):(0,A.jsx)(n().sA,{...l().D.automatic_account_creation_disabled});case"workspace_analytics_toggled":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{...l().D.workspace_analytics_enabled}):(0,A.jsx)(n().sA,{...l().D.workspace_analytics_disabled});case"workspace_creation_set_for_email_domain":case"organization.managed_user_settings.workspace_creation_enum_updated":return function(e,t){const{oldValue:a,newValue:s}=e.changes.workspace_creation;if(!a&&!s)return(0,A.jsx)(n().sA,{defaultMessage:"Changed workspace creation setting",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain.fallback_message"});const o=e.changes.workspace_creation.oldValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.beforeSetting",defaultMessage:" from {prevWorkspaceCreationSetting}"},{prevWorkspaceCreationSetting:(0,x().XB)(e.changes.workspace_creation.oldValue,t)}):"",i=e.changes.workspace_creation.newValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.afterSetting",defaultMessage:" to {afterWorkspaceCreationSetting}"},{afterWorkspaceCreationSetting:(0,x().XB)(e.changes.workspace_creation.newValue,t)}):"";return(0,A.jsx)(n().sA,{defaultMessage:"Changed workspace creation setting{before}{after}.",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain",values:{before:o,after:i}})}(Ne,Be);case"member_added_to_group":return(0,A.jsx)(n().sA,{defaultMessage:"Added {memberNameAndEmail} to {groupName}",id:"auditlog.actionNames.eventColumn.member_added_to_group",values:{memberNameAndEmail:(0,d().xC)(Be,Ne),groupName:_(Ne.target.group)}});case"member_removed_from_group":return(0,A.jsx)(n().sA,{defaultMessage:"Removed {memberNameAndEmail} from {groupName}",id:"auditlog.actionNames.eventColumn.member_removed_from_group",values:{memberNameAndEmail:(0,d().xC)(Be,Ne),groupName:_(Ne.target.group)}});case"space_transfer_status_changed":return function(e,t){const{oldValue:a,newValue:s}=e.changes.spaceTransferStatus,o=e.target.space.name?t.formatMessage({id:"auditLogEntry.changes.space_transfer_status_changed.space_name",defaultMessage:" for {spaceName}"},{spaceName:e.target.space.name}):"";if(!a&&!s)return(0,A.jsx)(n().sA,{defaultMessage:"Workspace transfer status changed{spaceNameMessage}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.fallback_message",values:{spaceNameMessage:o}});if(!s)return(0,A.jsx)(n().sA,{defaultMessage:"Workspace transfer request cleared{spaceNameMessage} from prior status of {oldStatus}",id:"auditlog.actionNames.eventColumn.space_transfer_status_cleared",values:{spaceNameMessage:o,oldStatus:a}});return(0,A.jsx)(n().sA,{defaultMessage:"{newStatus, select, requested {Workspace transfer request initiated{spaceNameMessage}.} started {Workspace transfer started{spaceNameMessage}} completed {Workspace transfer completed{spaceNameMessage}} other {Workspace transfer status change to {newStatus}{spaceNameMessage}}}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.newStatus",values:{spaceNameMessage:o,newStatus:s}})}(Ne,Be);case"space_claim_and_upgrade_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimAndUpgradeStatus,s=(0,A.jsx)(n().sA,{defaultMessage:"Status changed for workspace claim of {workspaceName}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_changed.fallback_message",values:{workspaceName:e.target.space.name}});if(!t&&!a)return s;if(!a&&"completed"!==t)return(0,A.jsx)(n().sA,{defaultMessage:"Pending workspace claim for {workspaceName} has been cleared from {oldStatus}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_cleared",values:{workspaceName:e.target.space.name,oldStatus:t}});if("completed"===a)return(0,A.jsx)(n().sA,{defaultMessage:"{workspaceName} has been claimed and upgraded to the Enterprise plan",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_completed",values:{workspaceName:e.target.space.name}});if("requested"===a)return(0,A.jsx)(n().sA,{defaultMessage:"Request to claim and upgrade {workspaceName} has been sent.",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_requested",values:{workspaceName:e.target.space.name}});return s}(Ne);case"space_claim_deletion_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimDeletionStatus,s=(0,A.jsx)(n().sA,{defaultMessage:"Claimable workspace deletion status change for {spaceName}",id:"auditlog.actionNames.eventColumn.space_claim_deletion_status_changed.fallback_message",values:{spaceName:e.target.space.name}});if(!t&&!a)return s;if(!a||"canceled"===a)return(0,A.jsx)(n().sA,{defaultMessage:"Recovered workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.status_cleared",values:{spaceName:e.target.space.name}});return(0,A.jsx)(n().sA,{defaultMessage:"Deleted workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.deleted",values:{spaceName:e.target.space.name}})}(Ne);case"organization.domain_claim.claim_and_upgrade_status_updated":return function(e){const{oldValue:t,newValue:a}=e.changes.claimAndUpgradeStatus,s=(0,A.jsx)(n().sA,{defaultMessage:"Status changed for organization's workspace claim of {workspaceName}",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_changed.fallback_message",values:{workspaceName:e.target.space.name}});if(!t&&!a)return s;if(!a&&"completed"!==t)return(0,A.jsx)(n().sA,{defaultMessage:"Pending workspace claim by organization for {workspaceName} has been cleared from {oldStatus}",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_cleared",values:{workspaceName:e.target.space.name,oldStatus:t}});if("completed"===a)return(0,A.jsx)(n().sA,{defaultMessage:"{workspaceName} has been successfully claimed by organization.",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_completed",values:{workspaceName:e.target.space.name}});if("requested"===a)return(0,A.jsx)(n().sA,{defaultMessage:"Request sent to claim workspace: {workspaceName} for organization.",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_requested",values:{workspaceName:e.target.space.name}});return s}(Ne);case"membership_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} allowing members to request adding new members",id:"auditlog.actionNames.eventColumn.membership_requests_toggled",values:{enabled:W(Ne)}});case"external_membership_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} allowing external users to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled",values:{enabled:q(Ne)}});case"membership_request_resolved":return(0,A.jsx)(n().sA,{defaultMessage:"{status} request to add {email} to the workspace as a member",id:"auditlog.actionNames.eventColumn.membership_request_resolved",values:{status:G(Ne),email:(0,d().xC)(Be,Ne)}});case"guest_membership_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} allowing page guests to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled",values:{enabled:K(Ne)}});case"team_created":return(0,A.jsx)(n().sA,{defaultMessage:"Created {teamName}",id:"auditlog.actionNames.eventColumn.team_created",values:{teamName:(0,d().if)(Ne)}});case"team_archived":return(0,A.jsx)(n().sA,{defaultMessage:"Archived {teamName}",id:"auditlog.actionNames.eventColumn.team_archived",values:{teamName:(0,d().if)(Ne)}});case"team_default_toggled":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Added {teamName} to the default teamspace list. Workspace members will automatically be added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_enabled",values:{teamName:(0,d().if)(Ne)}}):(0,A.jsx)(n().sA,{defaultMessage:"Removed {teamName} from the default teamspace list. Workspace members will no longer be automatically added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_disabled",values:{teamName:(0,d().if)(Ne)}});case"team_public_page_sharing_toggled":return Ne.changes.enabled.newValue?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n().sA,{defaultMessage:"Disabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_disabled",values:{teamName:(0,d().if)(Ne)}}),k((null===(a=Ne.meta)||void 0===a?void 0:a.spacePublicPageSharingDisabled)??(null==Ne?void 0:Ne.spacePublicPageSharingDisabled),Ne.changes.enabled.newValue)]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n().sA,{defaultMessage:"Enabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_enabled",values:{teamName:(0,d().if)(Ne)}}),k((null===(s=Ne.meta)||void 0===s?void 0:s.spacePublicPageSharingDisabled)??(null==Ne?void 0:Ne.spacePublicPageSharingDisabled),Ne.changes.enabled.newValue)]});case"team_export_toggled":return Ne.changes.enabled.newValue?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n().sA,{defaultMessage:"Disabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_disabled",values:{teamName:(0,d().if)(Ne)}}),k((null===(p=Ne.meta)||void 0===p?void 0:p.spaceExportDisabled)??(null==Ne?void 0:Ne.spaceExportDisabled),Ne.changes.enabled.newValue)]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n().sA,{defaultMessage:"Enabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_enabled",values:{teamName:(0,d().if)(Ne)}}),k((null===(T=Ne.meta)||void 0===T?void 0:T.spaceExportDisabled)??(null==Ne?void 0:Ne.spaceExportDisabled),Ne.changes.enabled.newValue)]});case"team_sidebar_editing_toggled":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_disabled",values:{teamName:(0,d().if)(Ne)}}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_enabled",values:{teamName:(0,d().if)(Ne)}});case"team_creation_admins_setting_toggled":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_disabled",values:{teamName:(0,d().if)(Ne)}}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_enabled",values:{teamName:(0,d().if)(Ne)}});case"team_guests_toggled":return Ne.changes.enabled.newValue?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n().sA,{defaultMessage:"Disabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_disabled",values:{teamName:(0,d().if)(Ne)}}),k((null===(N=Ne.meta)||void 0===N?void 0:N.spaceDisableGuests)??Ne.spaceDisableGuests,Ne.changes.enabled.newValue)]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n().sA,{defaultMessage:"Enabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_enabled",values:{teamName:(0,d().if)(Ne)}}),k((null===(U=Ne.meta)||void 0===U?void 0:U.spaceDisableGuests)??Ne.spaceDisableGuests,Ne.changes.enabled.newValue)]});case"team_name_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed teamspace name {oldTeamNameToNewTeamName}",id:"auditlog.actionNames.eventColumn.team_name_changed",values:{oldTeamNameToNewTeamName:z(Ne)}});case"team_description_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed description of {teamName}",id:"auditlog.actionNames.eventColumn.team_description_changed",values:{teamName:(0,d().if)(Ne)}});case"team_icon_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed icon of {teamName}",id:"auditlog.actionNames.eventColumn.team_icon_changed",values:{teamName:(0,d().if)(Ne)}});case"member_added_to_team":return(0,A.jsx)(n().sA,{defaultMessage:"Invited {memberNameAndEmail} to {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_added_to_team",values:{memberNameAndEmail:(0,d().xC)(Be,Ne),teamName:(0,d().if)(Ne),teamRole:D(Ne.changes.teamRole.newValue)}});case"group_added_to_team":return(0,A.jsx)(n().sA,{defaultMessage:"Invited {groupName} to {teamName} as teamspace member",id:"auditlog.actionNames.eventColumn.group_added_to_team",values:{groupName:_(Ne.target.group),teamName:(0,d().if)(Ne)}});case"member_removed_from_team":return(0,A.jsx)(n().sA,{defaultMessage:"Removed {memberNameAndEmail} from {teamName}",id:"auditlog.actionNames.eventColumn.member_removed_from_team",values:{memberNameAndEmail:(0,d().xC)(Be,Ne),teamName:(0,d().if)(Ne)}});case"group_removed_from_team":return(0,A.jsx)(n().sA,{defaultMessage:"Removed {groupName} from {teamName}",id:"auditlog.actionNames.eventColumn.group_removed_from_team",values:{groupName:_(Ne.target.group),teamName:(0,d().if)(Ne)}});case"member_joined_team":const Ge=(0,d().if)(Ne),Ke=D(Ne.changes.teamRole.newValue);return(0,j().AJ)(Ne)?(0,A.jsx)(n().sA,{defaultMessage:"Joined {teamName} as {teamRole} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_joined_team_privileged",values:{teamName:Ge,teamRole:Ke}}):(0,A.jsx)(n().sA,{defaultMessage:"Joined {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_joined_team",values:{teamName:Ge,teamRole:Ke}});case"member_left_team":return(0,A.jsx)(n().sA,{defaultMessage:"Left {teamName}",id:"auditlog.actionNames.eventColumn.member_left_team",values:{teamName:(0,d().if)(Ne)}});case"member_team_role_updated":const Ye=(0,d().xC)(Be,Ne),Qe=D(Ne.changes.teamRole.oldValue),$e=D(Ne.changes.teamRole.newValue),Xe=(0,d().if)(Ne);return(0,j().AJ)(Ne)?(0,A.jsx)(n().sA,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_team_role_updated_privileged",values:{memberNameAndEmail:Ye,oldTeamRole:Qe,newTeamRole:$e,teamName:Xe}}):(0,A.jsx)(n().sA,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName}",id:"auditlog.actionNames.eventColumn.member_team_role_updated",values:{memberNameAndEmail:Ye,oldTeamRole:Qe,newTeamRole:$e,teamName:Xe}});case"team_user_permission_updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated {userNameOrEmail}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_user_permission_updated",values:{userNameOrEmail:(0,d().xC)(Be,Ne),oldPermission:(0,j().H8)(Ne.changes.permission.oldValue),newPermission:(0,j().H8)(Ne.changes.permission.newValue),teamName:(0,d().if)(Ne)}});case"team_group_permission_updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated {groupName}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_group_permission_updated",values:{groupName:_(Ne.target.group),oldPermission:(0,j().H8)(Ne.changes.permission.oldValue),newPermission:(0,j().H8)(Ne.changes.permission.newValue),teamName:(0,d().if)(Ne)}});case"team_member_default_permission_updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated default page permissions for teamspace members in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_member_default_permission_updated",values:{teamName:(0,d().if)(Ne),oldRole:(0,j().H8)(null===(H=Ne.changes)||void 0===H||null===(H=H.permission)||void 0===H?void 0:H.oldValue),newRole:(0,j().H8)(null===($=Ne.changes)||void 0===$||null===($=$.permission)||void 0===$?void 0:$.newValue)}});case"team_guest_default_permission_updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated default page permissions for teamspace guests in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_guest_default_permission_updated",values:{teamName:(0,d().if)(Ne),oldRole:(0,j().H8)(null===(Z=Ne.changes)||void 0===Z||null===(Z=Z.permission)||void 0===Z?void 0:Z.oldValue),newRole:(0,j().H8)(null===(J=Ne.changes)||void 0===J||null===(J=J.permission)||void 0===J?void 0:J.newValue)}});case"team_workspace_default_permission_updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated default page permissions for everyone else in the workspace for {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_workspace_default_permission_updated",values:{teamName:(0,d().if)(Ne),oldRole:(0,j().H8)(null===(ee=Ne.changes)||void 0===ee||null===(ee=ee.permission)||void 0===ee?void 0:ee.oldValue),newRole:(0,j().H8)(null===(te=Ne.changes)||void 0===te||null===(te=te.permission)||void 0===te?void 0:te.newValue)}});case"team_privacy_type_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed the teamspace privacy type for {teamName} from {oldType} to {newType}",id:"auditlog.actionNames.eventColumn.team_privacy_type_changed",values:{teamName:(0,d().if)(Ne),oldType:V(null===(ae=Ne.changes)||void 0===ae?void 0:ae.teamAccessLevel.oldValue),newType:V(null===(se=Ne.changes)||void 0===se?void 0:se.teamAccessLevel.newValue)}});case"team_invite_access_changed":return(0,A.jsx)(n().sA,{defaultMessage:"Changed who can invite teamspace members to {newType} for {teamName}",id:"auditlog.actionNames.eventColumn.team_invite_access_changed",values:{teamName:(0,d().if)(Ne),newType:(We=null===(ne=Ne.changes)||void 0===ne||null===(ne=ne.teamInviteAccess)||void 0===ne?void 0:ne.newValue,We?(0,A.jsx)(n().sA,{...Q[We]}):(0,A.jsx)(n().sA,{...Q.unknown}))}});case"teams_enabled_for_space":return(0,A.jsx)(n().sA,{defaultMessage:"Enabled teamspaces for {workspaceName}",id:"auditlog.actionNames.eventColumn.teams_enabled_for_space",values:{workspaceName:Ne.target.space.name}});case"private_content_transferred":return(0,A.jsx)(n().sA,{defaultMessage:"Transferred private content from {fromUserName} to {toUserName}",id:"auditLog.actionNames.eventColumn.private_content_transferred",values:{fromUserName:(0,d().q4)(Be,Ne.changes.userPermission.oldValue),toUserName:(0,d().q4)(Be,Ne.changes.userPermission.newValue)}});case"user_analytics_exported":return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.user_analytics_exported",defaultMessage:"Exported user analytics for {daysFilterString}",values:{daysFilterString:Be.formatMessage(S().jy[(null===(oe=Ne.meta)||void 0===oe?void 0:oe.daysFilter)||"last_90_days"]).toLowerCase()}});case"content_analytics_exported":return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.content_analytics_exported",defaultMessage:"Exported content analytics for {daysFilterString}",values:{daysFilterString:Be.formatMessage(S().jy[(null===(ie=Ne.meta)||void 0===ie?void 0:ie.daysFilter)||"last_90_days"]).toLowerCase()}});case"admin_content_search_queried":case"admin_content_search_exported":function Ze(e){return e.join(Be.formatMessage(l().D.adminContentSearchPredicateSplit))}function Je(e){return"starting"in e&&"ending"in e?`${e.starting} - ${e.ending}`:"starting"in e?`${e.starting} - `:"ending"in e?` - ${e.ending}`:void 0}const et=Ne.searchParameters.query&&Be.formatMessage(l().D.adminContentSearchQuery,{query:Ne.searchParameters.query}),tt=Ne.searchParameters.teamspaces&&Ne.searchParameters.teamspaces.length>0&&Be.formatMessage(l().D.adminContentSearchTeamspaces,{teamspaceCount:Ne.searchParameters.teamspaces.length,teamspaces:Ze(Ne.searchParameters.teamspaces)}),at=Ne.searchParameters.createdBy&&Ne.searchParameters.createdBy.length>0&&Be.formatMessage(l().D.adminContentSearchCreatedBy,{createdBy:Ze(Ne.searchParameters.createdBy)}),st=Ne.searchParameters.sharedWith&&Ne.searchParameters.sharedWith.length>0&&Be.formatMessage(l().D.adminContentSearchSharedWith,{sharedWith:Ze(Ne.searchParameters.sharedWith)}),nt=Ne.searchParameters.audience&&Ne.searchParameters.audience.length>0&&Be.formatMessage(l().D.adminContentSearchAudience,{audience:Ze(Ne.searchParameters.audience)}),ot=Ne.searchParameters.createdTime&&Be.formatMessage(l().D.adminContentSearchCreatedTime,{createdTime:Je(Ne.searchParameters.createdTime)}),it=Ne.searchParameters.lastEditedTime&&Be.formatMessage(l().D.adminContentSearchLastEditedTime,{lastEditedTime:Je(Ne.searchParameters.lastEditedTime)}),rt=Ne.searchParameters.deletionStatuses&&Ne.searchParameters.deletionStatuses.length>0&&Be.formatMessage(l().D.adminContentSearchDeletionStatus,{deletionStatuses:Ze(Ne.searchParameters.deletionStatuses.map((e=>Be.formatMessage((0,g().uT)(e))))),deletionStatusesCount:Ne.searchParameters.deletionStatuses.length}),lt=o().oE([et,tt,at,st,nt,ot,it,rt]);if("admin_content_search_queried"===Ne.actionName){if(0===lt.length)return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried.no_filters",defaultMessage:"Ran a content search with no filters"});{const Tt=Ze(lt);return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried",defaultMessage:"Ran a content search with the following criteria: {searchCriteria}",values:{searchCriteria:Tt}})}}if(0===lt.length)return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported.no_filters",defaultMessage:"Exported a content search result with no filters"});{const kt=Ze(lt);return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported",defaultMessage:"Exported a content search result with the following criteria: {searchCriteria}",values:{searchCriteria:kt}})}case"admin_managed_users_log_out_all":case"organization.managed_users.log_out":{const _t=Be.formatList(Ne.meta.emailDomains,{type:"conjunction"});return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.admin_managed_users_log_out_all",defaultMessage:"Logged out all managed users with the email domains {emailDomains}",values:{emailDomains:_t}})}case"admin_managed_users_log_out_one":case"organization.managed_users.log_out_one":return(0,A.jsx)(n().sA,{defaultMessage:"Logged out {guestNameAndEmail} from all of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_log_out_one",values:{guestNameAndEmail:(0,d().xC)(Be,Ne)}});case"admin_managed_users_password_cleared_one":case"organization.managed_users.password_cleared_one":return(0,A.jsx)(n().sA,{defaultMessage:"Reset the password and MFA settings for {guestNameAndEmail} and logged them out of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_password_cleared_one",values:{guestNameAndEmail:(0,d().xC)(Be,Ne)}});case"admin_managed_users_password_cleared":case"organization.managed_users.password_cleared":{const zt=Be.formatList(Ne.meta.emailDomains,{type:"conjunction"});return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.admin_managed_users_password_cleared",defaultMessage:"Cleared passwords for all users with the email domains {emailDomains}",values:{emailDomains:zt}})}case"automation_edited":return(0,A.jsx)(n().sA,{id:"auditlog.actionNames.eventColumn.automation_edited",defaultMessage:"Edited {automationType} on {pageTitle}",values:{automationType:(0,d().KE)(Ne.meta.automationType),pageTitle:(0,j().wS)(Ne)}});case"ai_admin_legal_acceptance_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} Notion AI for the workspace.",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled",values:{enabled:Y(Ne)}});case"workspace.settings.hipaa_compliance_updated":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Enabled HIPAA compliance",id:"auditlog.actionNames.eventColumn.hipaa_compliance_updated.enabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Disabled HIPAA compliance",id:"auditlog.actionNames.eventColumn.hipaa_compliance_updated.disabled"});case"space_consolidation_started":case"space_consolidation_completed":case"space_consolidation_failed":const dt=Ne.spaceId===Ne.meta.spaceConsolidationMetadata.source_space_id,ct=Ne.meta.spaceConsolidationMetadata.source_space_name??Ne.meta.spaceConsolidationMetadata.source_space_id,ut=Ne.meta.spaceConsolidationMetadata.target_space_name??Ne.meta.spaceConsolidationMetadata.target_space_id,gt=Ne.changes.spaceContentDuplicationStatus.newValue;return(0,A.jsx)(n().sA,{defaultMessage:"{status} workspace consolidation {direction} {spaceName}.",id:"auditlog.actionNames.eventColumn.space_consolidation_status_changed",values:{status:gt?(0,A.jsx)(n().sA,{...I[gt]}):"",spaceName:dt?ut:ct,direction:(0,A.jsx)(n().sA,{...dt?l().D.into:l().D.from})}});case"mfa_sms_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} SMS MFA on “{value}”",id:"auditlog.actionNames.eventColumn.mfa_sms_toggled",values:{value:null!==(re=Ne.changes)&&void 0!==re&&re.maskedPhoneNumber.oldValue?null===(le=Ne.changes)||void 0===le?void 0:le.maskedPhoneNumber.oldValue:null===(de=Ne.changes)||void 0===de?void 0:de.maskedPhoneNumber.newValue,enabled:null!==(ce=Ne.changes)&&void 0!==ce&&ce.enabled.newValue?"Enabled":"Disabled"}});case"mfa_totp_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} TOTP MFA",id:"auditlog.actionNames.eventColumn.mfa_totp_toggled",values:{enabled:null!==(ue=Ne.changes)&&void 0!==ue&&ue.enabled.newValue?"Enabled":"Disabled"}});case"mfa_backup_code_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{enabled} backup codes for MFA",id:"auditlog.actionNames.eventColumn.mfa_backup_code_toggled",values:{enabled:null!==(ge=Ne.changes)&&void 0!==ge&&ge.enabled.newValue?"Enabled":"Disabled"}});case"user_suspended":return(0,A.jsx)(n().sA,{defaultMessage:"Suspended {userNameAndEmail}",id:"auditLogEntry.user_suspended",values:{userNameAndEmail:(0,d().xC)(Be,Ne)}});case"user_unsuspended":return(0,A.jsx)(n().sA,{defaultMessage:"Reactivated {userNameAndEmail}",id:"auditLogEntry.user_unsuspended",values:{userNameAndEmail:(0,d().xC)(Be,Ne)}});case"user_deleted":return Ne.target?(0,A.jsx)(n().sA,{defaultMessage:"Deleted {userNameAndEmail}",id:"auditLogEntry.user_deleted",values:{userNameAndEmail:(0,d().q4)(Be,Ne.target.user)}}):(0,A.jsx)(n().sA,{...l().D.user_deleted});case"workspace.settings.prevent_granting_support_access_updated":case"organization.managed_user_settings.prevent_granting_support_access_updated":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.enabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.disabled"});case"workspace.settings.prevent_profile_edits_updated":case"organization.managed_user_settings.prevent_profile_edits_updated":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.enabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.disabled"});case"workspace.settings.external_workspace_access_updated":case"organization.managed_user_settings.external_workspace_access_updated":return Ne.changes.enabled.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Disabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.enabled"}):(0,A.jsx)(n().sA,{defaultMessage:"Enabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.disabled"});case"workspace.settings.delete_from_trash_delay":return void 0!==Ne.changes.valueS.oldValue||void 0!==Ne.changes.valueS.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Changed duration for when pages are deleted from Trash from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_settings_delete_from_trash_delay",values:{oldDuration:(0,b().rN)(Ne.changes.valueS.oldValue??c().I4,Be),newDuration:(0,b().rN)(Ne.changes.valueS.newValue??c().I4,Be)}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed duration for when pages are deleted from Trash.",id:"auditLogEntry.workspace_settings_delete_from_trash_delay.generic"});case"workspace.settings.purge_delay":return void 0!==Ne.changes.valueS.oldValue||void 0!==Ne.changes.valueS.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Changed duration for when deleted pages are permanently deleted from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_settings_purge_delay",values:{oldDuration:(0,b().rN)(Ne.changes.valueS.oldValue??c().qI,Be),newDuration:(0,b().rN)(Ne.changes.valueS.newValue??c().qI,Be)}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed duration for when deleted pages are permanently deleted.",id:"auditLogEntry.workspace_settings_purge_delay.generic"});case"workspace.settings.custom_session_duration_updated":case"organization.managed_user_settings.custom_session_duration_updated":return void 0!==Ne.changes.valueMs.oldValue&&void 0!==Ne.changes.valueMs.newValue?(0,A.jsx)(n().sA,{defaultMessage:"Changed the session duration for all managed users from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated",values:{oldDuration:(0,u().lH)(Ne.changes.valueMs.oldValue,Be),newDuration:(0,u().lH)(Ne.changes.valueMs.newValue,Be)}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed the session duration for all managed users.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated.disabled"});case"workspace.public_domain.created":return(0,A.jsx)(n().sA,{defaultMessage:"Public domain “{name}” created",id:"auditLogEntry.workspace_public_domain_created",values:{name:Ne.target.publicDomain.domainName}});case"workspace.public_domain.updated":return void 0!==(null===(me=Ne.changes.name)||void 0===me?void 0:me.oldValue)&&void 0!==(null===(pe=Ne.changes.name)||void 0===pe?void 0:pe.newValue)?(0,A.jsx)(n().sA,{defaultMessage:"Changed public domain name from “{oldValue}” to “{newValue}”",id:"auditLogEntry.workspace_public_domain_updated.domain_name",values:{oldValue:Ne.changes.name.oldValue,newValue:Ne.changes.name.newValue}}):void 0===(null===(he=Ne.changes.publicHomePage)||void 0===he?void 0:he.oldValue)&&void 0!==(null===(fe=Ne.changes.publicHomePage)||void 0===fe?void 0:fe.newValue)?(0,A.jsx)(n().sA,{defaultMessage:"Changed public domain add home page “{newValue}”",id:"auditLogEntry.workspace_public_domain_updated.public_home_page.add",values:{newValue:Ne.changes.publicHomePage.newValue}}):void 0!==(null===(xe=Ne.changes.publicHomePage)||void 0===xe?void 0:xe.oldValue)&&void 0!==(null===(ve=Ne.changes.publicHomePage)||void 0===ve?void 0:ve.newValue)?(0,A.jsx)(n().sA,{defaultMessage:"Changed public domain home page from “{oldValue}” to “{newValue}”",id:"auditLogEntry.workspace_public_domain_updated.public_home_page.update",values:{oldValue:Ne.changes.publicHomePage.oldValue,newValue:Ne.changes.publicHomePage.newValue}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed public domain",id:"auditLogEntry.workspace_public_domain_updated.unknown"});case"workspace.public_domain.deleted":return(0,A.jsx)(n().sA,{defaultMessage:"Public domain “{name}” deleted",id:"auditLogEntry.workspace_public_domain_deleted",values:{name:Ne.target.publicDomain.domainName}});case"workspace.custom_emoji.updated":const mt=null===(ye=Ne.changes.name)||void 0===ye?void 0:ye.oldValue,pt=null===(be=Ne.changes.name)||void 0===be?void 0:be.newValue,ht=null===(Se=Ne.changes.url)||void 0===Se?void 0:Se.oldValue,ft=null===(je=Ne.changes.url)||void 0===je?void 0:je.newValue;return void 0!==mt&&void 0!==pt&&void 0!==ht&&void 0!==ft?(0,A.jsx)(n().sA,{defaultMessage:"Changed image and name of custom emoji from “{oldName}” to “{newName}”",id:"auditLogEntry.workspace_custom_emoji_updated.name_image",values:{oldName:mt,newName:pt}}):void 0!==mt&&void 0!==pt?(0,A.jsx)(n().sA,{defaultMessage:"Changed name of custom emoji from “{oldName}” to “{newName}”",id:"auditLogEntry.workspace_custom_emoji_updated.name",values:{oldName:mt,newName:pt}}):void 0!==ht&&void 0!==ft?(0,A.jsx)(n().sA,{defaultMessage:"Changed image of custom emoji “{name}”",id:"auditLogEntry.workspace_custom_emoji_updated.image",values:{name:Ne.target.customEmoji.name}}):(0,A.jsx)(n().sA,{defaultMessage:"Changed custom emoji",id:"auditLogEntry.workspace_custom_emoji_updated.unknown"});case"workspace.custom_emoji.deleted":return(0,A.jsx)(n().sA,{defaultMessage:"Deleted custom emoji “{name}”",id:"auditLogEntry.workspace_custom_emoji_deleted",values:{name:Ne.target.customEmoji.name}});case"integration.created":return(0,A.jsx)(n().sA,{defaultMessage:"Added {botName} to the workspace",id:"auditLogEntry.integration.created",values:{botName:(0,d().Hg)(Be,Ne.meta.bot)}});case"integration.deleted":return(0,A.jsx)(n().sA,{defaultMessage:"Removed {botName} from workspace",id:"auditLogEntry.integration.deleted",values:{botName:(0,d().Hg)(Be,Ne.meta.bot)}});case"page.automation_deleted":return(0,A.jsx)(n().sA,{defaultMessage:"Deleted automation {automationType} from {pageTitle}",id:"auditLogEntry.page.automation_deleted",values:{automationType:(0,d().KE)(Ne.meta.automationType),pageTitle:(0,j().wS)(Ne)}});case"page.file_deleted":return(0,A.jsx)(n().sA,{defaultMessage:"Deleted file {fileName} from {pageTitle}",id:"auditLogEntry.page.file_deleted",values:{fileName:X(Ne),pageTitle:(0,j().wS)(Ne)}});case"integration.secret_reset":return(0,A.jsx)(n().sA,{defaultMessage:"Reset authentication secret of {botName}",id:"auditLogEntry.integration.secret_reset",values:{botName:(0,d().Hg)(Be,Ne.meta.bot)}});case"integration.settings.updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated settings of {botName}",id:"auditLogEntry.integration.settings.update",values:{botName:(0,d().Hg)(Be,Ne.meta.bot)}});case"integration.permission.updated":return(0,A.jsx)(n().sA,{defaultMessage:"Updated capabilities of {botName}: {botCapabilities}",id:"auditLogEntry.integration.permission.update",values:{botName:(0,d().Hg)(Be,Ne.meta.bot),botCapabilities:C(Ne.meta.bot)}});case"workspace.external_account_connected":return(0,A.jsx)(n().sA,{defaultMessage:"Connected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_connected",values:{integrationName:(0,d().Hg)(Be,Ne.meta.bot)}});case"workspace.external_account_disconnected":return(0,A.jsx)(n().sA,{defaultMessage:"Disconnected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_disconnected",values:{integrationName:(0,d().Hg)(Be,Ne.meta.bot)}});case"workspace.integration_added":return(0,A.jsx)(n().sA,{defaultMessage:"Added {integrationName} to the workspace",id:"auditLogEntry.workspace.workspace.integration_added",values:{integrationName:(0,d().Hg)(Be,Ne.meta.bot)}});case"workspace.integration_removed":return(0,A.jsx)(n().sA,{defaultMessage:"Removed {integrationName} from workspace",id:"auditLogEntry.workspace.workspace.integration_removed",values:{integrationName:(0,d().Hg)(Be,Ne.meta.bot)}});case"workspace.integration_webhook_inactivated":return(0,A.jsx)(n().sA,{defaultMessage:"Webhook events for {integrationName} failing",id:"auditLogEntry.workspace.integration_webhook_inactivated",values:{integrationName:(0,d().Hg)(Be,Ne.meta.bot)}});case"workspace.integration_webhook_reactivated":return(0,A.jsx)(n().sA,{defaultMessage:"Webhook events for {integrationName} restored",id:"auditLogEntry.workspace.integration_webhook_reactivated",values:{integrationName:(0,d().Hg)(Be,Ne.meta.bot)}});case"user.settings.analytics_tracking_setting_updated":return(0,A.jsx)(n().sA,{defaultMessage:"{enabledOrDisabled} page view tracking on their user account",id:"auditLogEntry.user.settings.analytics_tracking_setting_updated",values:{enabledOrDisabled:(0,d().ko)(Be,Boolean(null===(we=Ne.changes)||void 0===we||null===(we=we.enabled)||void 0===we?void 0:we.newValue))}});case"workspace.settings.guest_invite_request_setting_updated":return function(e,t){var a;return(0,A.jsx)(n().sA,{defaultMessage:"{enabledOrDisabled} allowing members to request inviting guests",id:"auditLogEntry.workspace.settings.guest_invite_request_setting_updated",values:{enabledOrDisabled:(0,d().ko)(t,Boolean(null===(a=e.changes)||void 0===a||null===(a=a.enabled)||void 0===a?void 0:a.newValue))}})}(Ne,Be);case"workspace.settings.ai_leap_toggled":return function(e,t){var a;return(0,A.jsx)(n().sA,{defaultMessage:"{enabledOrDisabled} Notion AI LEAP (Learning & Early Access Program)",id:"auditLogEntry.workspace.settings.ai_leap_toggled",values:{enabledOrDisabled:(0,d().ko)(t,Boolean(null===(a=e.changes)||void 0===a||null===(a=a.enabled)||void 0===a?void 0:a.newValue))}})}(Ne,Be);case"workspace.guest_invite_request_resolved":return function(e,t){const a=e.changes.requestStatus.newValue;return"approved"===a?(0,A.jsx)(n().sA,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.approved",defaultMessage:"Approved {requestorNameAndEmail}'s request to add guest {guestNameAndEmail} to {pageTitle}",values:{requestorNameAndEmail:(0,d().q4)(t,e.target.user),guestNameAndEmail:(0,d().q4)(t,e.meta.targetGuest),pageTitle:(0,j().uU)(e.meta.pagesAndRoles[0].page)}}):"rejected"===a?(0,A.jsx)(n().sA,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.rejected",defaultMessage:"Declined request to add guest {guestNameAndEmail} to {pageTitle}",values:{guestNameAndEmail:(0,d().q4)(t,e.meta.targetGuest),pageTitle:(0,j().uU)(e.meta.pagesAndRoles[0].page)}}):(0,A.jsx)(A.Fragment,{})}(Ne,Be);case"workspace.settings.integration_restrictions.integration_added_to_allowlist":case"workspace.settings.integration_restrictions.integration_removed_from_allowlist":return function(e){if("workspace.settings.integration_restrictions.integration_added_to_allowlist"===e.actionName)return(0,A.jsx)(n().sA,{defaultMessage:"Added {integrationName} to the approved connections list",id:"auditLogEntry.workspace.settings.integration_allowlist_add",values:{integrationName:e.meta.integrationName}});return(0,A.jsx)(n().sA,{defaultMessage:"Removed {integrationName} from the approved connections list",id:"auditLogEntry.workspace.settings.integration_allowlist_remove",values:{integrationName:e.meta.integrationName}})}(Ne);case"workspace_exported":case"public_page_cleared":case"password_changed":case"password_cleared":case"password_set":case"member_joined":case"scim_token_generated":case"scim_token_revoked":case"invite_link_reset":case"idp_metadata_xml_removed":case"idp_metadata_xml_updated":case"workspace.members_exported":case"organization.created":return(0,A.jsx)(n().sA,{...l().D[Ne.actionName]});case"organization.saml.idp_metadata_xml_removed":return(0,A.jsx)(n().sA,{...l().D.idp_metadata_xml_removed});case"organization.saml.idp_metadata_xml_updated":return(0,A.jsx)(n().sA,{...l().D.idp_metadata_xml_updated});case"organization.owner.added":return(0,A.jsx)(n().sA,{defaultMessage:"Added {ownerNameAndEmail} as an organization owner",id:"auditlogEventFilter.eventColumn.organization.owner.added",values:{ownerNameAndEmail:(0,d().xC)(Be,Ne)}});case"organization.owner.removed":return(0,A.jsx)(n().sA,{defaultMessage:"Removed {ownerNameAndEmail} as an organization owner",id:"auditlogEventFilter.eventColumn.organization.owner.removed",values:{ownerNameAndEmail:(0,d().xC)(Be,Ne)}});case"organization.audit_log_exported":return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.organization.audit_log_exported",defaultMessage:"Exported the organization audit log for last {duration} days",values:{duration:Ne.meta.duration}});case"organization.settings.name_changed":return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.organization.settings.name_changed",defaultMessage:"Changed the organization name from “{oldValue}” to “{newValue}”",values:{oldValue:Ne.changes.name.oldValue,newValue:Ne.changes.name.newValue}});case"organization.workspace.removed":return(0,A.jsx)(n().sA,{id:"auditlogEventFilter.eventColumn.organization.workspace.removed",defaultMessage:"Removed workspace “{workspaceName}” from the organization",values:{workspaceName:Ne.target.space.name}});case"organization.email_domain.verified":return(0,A.jsx)(n().sA,{defaultMessage:"Added a verified email domain “{emailDomain}” to the organization",id:"auditlog.actionNames.eventColumn.organization.email_domain.verified",values:{emailDomain:Ne.changes.domain}});case"organization.email_domain.unverified":return(0,A.jsx)(n().sA,{defaultMessage:"Removed a verified email domain “{emailDomain}” from the organization",id:"auditlog.actionNames.eventColumn.organization.email_domain.unverified",values:{emailDomain:Ne.changes.domain}});case"organization.default_space_settings.disable_guests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for guests",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.disable_guests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(Ae=Ne.changes)||void 0===Ae||null===(Ae=Ae.enabled)||void 0===Ae?void 0:Ae.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.enable_ai_feature_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for AI feature",id:"auditlog.actionNames.eventColumn.organization.enable_ai_feature_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(Me=Ne.changes)||void 0===Me||null===(Me=Me.enabled)||void 0===Me?void 0:Me.newValue,shouldInvertBoolean:!1})}});case"organization.default_space_settings.disable_page_analytics_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for page view tracking for workspace analytics",id:"auditlog.actionNames.eventColumn.organization.disable_page_analytics_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(Ce=Ne.changes)||void 0===Ce||null===(Ce=Ce.enabled)||void 0===Ce?void 0:Ce.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_public_access_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for members sharing pages publicly",id:"auditlog.actionNames.eventColumn.organization.disable_public_access_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(Ie=Ne.changes)||void 0===Ie||null===(Ie=Ie.enabled)||void 0===Ie?void 0:Ie.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_move_to_space_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for moving or duplicating pages to other workspaces",id:"auditlog.actionNames.eventColumn.organization.disable_move_to_space_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(Te=Ne.changes)||void 0===Te||null===(Te=Te.enabled)||void 0===Te?void 0:Te.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_export_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for exporting pages",id:"auditlog.actionNames.eventColumn.organization.disable_export_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(ke=Ne.changes)||void 0===ke||null===(ke=ke.enabled)||void 0===ke?void 0:ke.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_membership_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing members to request adding new members",id:"auditlog.actionNames.eventColumn.organization.disable_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(_e=Ne.changes)||void 0===_e||null===(_e=_e.enabled)||void 0===_e?void 0:_e.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_guest_membership_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing page guests to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.organization.disable_guest_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(ze=Ne.changes)||void 0===ze||null===(ze=ze.enabled)||void 0===ze?void 0:ze.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.enable_guest_invite_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing members to request inviting guests",id:"auditlog.actionNames.eventColumn.organization.enable_guest_invite_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(De=Ne.changes)||void 0===De||null===(De=De.enabled)||void 0===De?void 0:De.newValue,shouldInvertBoolean:!1})}});case"organization.default_space_settings.disable_external_membership_requests_toggled":return(0,A.jsx)(n().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing external users to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.organization.disable_external_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,d().P7)({intl:Be,value:null===(Pe=Ne.changes)||void 0===Pe||null===(Pe=Pe.enabled)||void 0===Pe?void 0:Pe.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.integration_restriction_updated":return function(e){const t=void 0,{newValue:a}=e.changes.integration_restrictions;if(a===t)return(0,A.jsx)(n().sA,{defaultMessage:"Updated organization integrations setting: workspaces may have their own integration restrictions",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.undefined"});switch(a){case"no_restrictions":return(0,A.jsx)(n().sA,{defaultMessage:"Updated organization integrations setting: allowing members to install all integrations",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.no_restrictions"});case"approved_only":return(0,A.jsx)(n().sA,{defaultMessage:"Updated organization integrations setting: allowing members to install only approved integrations",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.approved_only"});case"approved_or_built_by_notion":return(0,A.jsx)(n().sA,{defaultMessage:"Updated organization integrations setting: allowing members to install only approved and Notion-built integrations",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.approved_or_built_by_notion"});default:(0,i().HB)(a)}}(Ne);case"form_response.created":return(0,A.jsx)(n().sA,{defaultMessage:"New form submission for {formName} created",id:"auditLogEntry.workspace_form_submission_created",values:{formName:(0,j().$T)(Ne)}});case"form.created":return(0,A.jsx)(n().sA,{defaultMessage:"Created form",id:"auditLogEntry.workspace_form_created"});case"form.content.updated":return(0,A.jsx)(n().sA,{defaultMessage:"Edited form {formName}",id:"auditLogEntry.workspace_form_edited",values:{formName:(0,j().$T)(Ne)}});case"page.viewed.by_shared_email_domain_user":return(0,A.jsx)(n().sA,{defaultMessage:"{pageName} viewed by user on shared email domain",id:"auditLogEntry.page_viewed_by_shared_email_domain_user",values:{pageName:(0,j().wS)(Ne)}});default:if("local"!==Re)return m().log({level:"error",from:"auditLogEvent",type:"AuditLogEvent",data:{miscDataToConvertToString:{data:Ne}}}),(0,A.jsx)(A.Fragment,{});(0,i().HB)(Ne)}var We}function X(e){const{name:t,extension:a}=e.target.file;return t?`“${t}“`:a?(0,A.jsx)(n().sA,{...l().D.a_file_with_extension,values:{extension:a}}):(0,A.jsx)(n().sA,{...l().D.a_file})}var Z=()=>a(284371),J=()=>a(859428),ee=()=>a(962730),te=()=>a(56366),ae=()=>a(401497),se=()=>a(584262),ne=()=>a(187485),oe=()=>a(492414),ie=()=>a(765957),re=()=>a(630116);function le(e){const{pageAuditLogEntry:t}=e,{table:a,id:s,meta:n}=t.target.page||{},o=(0,ae().IS)((e=>({link:{display:"inline",color:e.text.secondary,textDecoration:"underline"}})),[]),i=(0,te().K8)((()=>{const{currentSpaceStore:e}=ie().default.state;return null!=n&&n.parent&&e?(0,re().Oo)(e,n.parent):e}),[n]),r=(0,te().K8)((()=>s&&a&&i?re().Bv.createChildStore(i,{id:s,table:a}):null),[i,s,a]),l=(0,te().K8)((()=>r?(0,oe().Ay)({store:r,pageVisitSource:se().y8.AuditLog}):null),[r]);return l?(0,A.jsxs)(A.Fragment,{children:["“",(0,A.jsx)(ne().A,{style:o.link,external:!0,href:l,children:(0,j().wS)(t,{noQuotes:!0})}),"“"]}):(0,A.jsx)(A.Fragment,{children:(0,j().wS)(t)})}function de(e){const{auditLogEntry:t,id:a}=e,[o,i]=(0,s.useState)(""),r=(0,n().tz)();return(0,s.useEffect)((()=>{const e=document.getElementById(a);i((null==e?void 0:e.textContent)||"")}),[a]),(0,A.jsx)(J().A,{style:{whiteSpace:"normal"},delayThreshold:80,renderTooltip:()=>(0,A.jsx)(ue,{text:o,auditLogEntry:t}),placement:ee().W.Bottom,render:e=>(0,A.jsx)("div",{...e,style:{fontSize:14,...Z().RC},id:a,children:(0,A.jsx)(ce,{auditLogEntry:t,env:"production",intl:r})})})}function ce(e){const{auditLogEntry:t,env:a,intl:s}=e;return $({auditLogEntry:t,env:a,intl:s,options:{renderPageName:e=>(0,A.jsx)(le,{pageAuditLogEntry:e})}})}function ue(e){var t,a;const{auditLogEntry:s,text:o}=e,i=(0,n().tz)(),r=(0,w().aj)({auditLogEntry:s,intl:i}),l=(0,w().Bb)({auditLogEntry:s,intl:i});return(0,A.jsxs)("div",{children:[o,(null===(t=s.actor.meta)||void 0===t?void 0:t.ipAddress)&&(0,A.jsx)("div",{children:(0,A.jsx)(n().sA,{defaultMessage:"IP address: {ip}",values:{ip:null===(a=s.actor.meta)||void 0===a?void 0:a.ipAddress},id:"auditLogSettings.metadata.ipAddress"})}),(0,A.jsx)("div",{children:(0,w().BN)(s,i)}),r&&(0,A.jsx)(n().sA,{id:"auditLogColumnEvent.tooltip.audienceMessage",defaultMessage:"Page audience: {audience}",values:{audience:r}}),l&&(0,A.jsx)(n().sA,{id:"auditLogColumnEvent.tooltip.audienceMessage.forms",defaultMessage:"Form audience: {audience}",values:{audience:l}})]})}},23534:(e,t,a)=>{a.d(t,{M:()=>u,g:()=>g});var s=a(296540),n=()=>a(484714),o=()=>a(187174),i=()=>a(436604),r=()=>a(534177),l=()=>a(449506),d=()=>a(511303);const c={pageViews:0,uniquePageViews:0,pagesCreated:0,pageEdits:0,topPages:[]};function u(e){let{spaceId:t}=e;const[a,n]=(0,s.useState)("last_90_days");return{...g({spaceId:t,daysFilter:a}),daysFilter:a,setDaysFilter:n}}function g(e){let{spaceId:t,daysFilter:a}=e;const u=(0,n().v3)(),{updateCacheWithRecordMap:g}=(0,s.useContext)(d().N),[{status:m,value:p,error:h}]=(0,o().Yb)((async()=>{const e=await l().callApi({eventName:"getContentEngagementAnalytics",environment:u,data:{spaceId:t,daysFilter:a},headers:{[i().B3]:t}});switch("success"===e.type&&g(e),e.type){case"success":return{pageViews:e.data.pageViews,uniquePageViews:e.data.uniquePageViews,pagesCreated:e.data.pagesCreated,pageEdits:e.data.pageEdits,topPages:e.data.topPages};case"failed":throw e.body;default:(0,r().HB)(e)}}),[u,t,a,g]);return{data:(0,s.useMemo)((()=>p||c),[p]),loading:"pending"===m||"idle"===m,error:h}}},27198:(e,t,a)=>{a.d(t,{Cx:()=>r,LL:()=>d,Ox:()=>c,Qq:()=>o,h6:()=>l,tL:()=>i});a(296540);var s=()=>a(959013),n=a(474848);function o(e){const{memberCount:t}=e;return(0,n.jsx)(s().sA,{id:"organization.general.members.count",defaultMessage:"{memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{memberCount:t.toLocaleString()}})}function i(e){const{teamCount:t}=e;return(0,n.jsx)(s().sA,{id:"organization.general.teamspaces.count",defaultMessage:"{teamCount, plural, one {{teamCount} teamspace} other {{teamCount} teamspaces}}",values:{teamCount:t.toLocaleString()}})}function r(e){const{workspacesCount:t}=e;return(0,n.jsx)(s().sA,{id:"organization.general.workspaces.count",defaultMessage:"{workspacesCount, plural, one {{workspacesCount} workspace} other {{workspacesCount} workspaces}}",values:{workspacesCount:t}})}function l(e){const{guestCount:t}=e;return(0,n.jsx)(s().sA,{defaultMessage:"{numGuests} {numGuests, plural, one {guest} other {guests}}",id:"organizationManageWorkspacesTable.numGuests",values:{numGuests:t}})}function d(e){const{verifiedDomainsCount:t,pendingDomainsCount:a}=e;return(0,n.jsx)(s().sA,{defaultMessage:"{verifiedDomainsCount} verified · {pendingDomainsCount} pending",id:"organizationEmailDomainsTable.emailDomainsSummaryCounts",values:{verifiedDomainsCount:t,pendingDomainsCount:a}})}function c(e){const{scimTokensCount:t}=e;return(0,n.jsx)(s().sA,{defaultMessage:"{scimTokensCount} tokens",id:"organizationEmailDomainsTable.scimTokensCount",values:{scimTokensCount:t}})}},28119:(e,t,a)=>{a.d(t,{TD:()=>o,YS:()=>i});var s=()=>a(645873);const n={ConfirmHIPAAModal:new(s().O2)("ConfirmHIPAAModal",(async()=>a.e(77761).then(a.bind(a,116217)))),HIPAASuccessModal:new(s().O2)("HIPAASuccessModal",(async()=>a.e(50568).then(a.bind(a,222660))))},o=(0,s()._h)(n.ConfirmHIPAAModal,(e=>e.ConfirmHIPAAModal)),i=(0,s()._h)(n.HIPAASuccessModal,(e=>e.HIPAASuccessModal))},43450:(e,t,a)=>{a.d(t,{R:()=>o});var s=()=>a(484714),n=()=>a(56366);function o(e){const t=(0,s().v3)();return(0,n().K8)((()=>{const a=t.currentUser.id;return!!(e&&e.isDefined()&&a)&&Boolean(e.isOwner(a))}),[t.currentUser.id,e])}},46413:(e,t,a)=>{a.d(t,{D:()=>o});var s=()=>a(348564),n=()=>a(118685);class o extends n().f{getInitialState(){return{categorySelections:{page:n().o.All,space:n().o.All,team:n().o.All,account:n().o.All,form:n().o.All},categoryToggleOpen:{page:!0,space:!0,team:!0,account:!0,form:!0},searchQuery:void 0,actionSelections:(0,a(534177).s8)(s().D$,(()=>!0)),isMenuOpen:!1,renderOrder:[{category:"page",orderedActions:s().Dj.page},{category:"space",orderedActions:s().Dj.space},{category:"account",orderedActions:s().Dj.account},{category:"team",orderedActions:s().Dj.team},{category:"form",orderedActions:s().Dj.form}]}}}},47095:(e,t,a)=>{a.d(t,{Z:()=>n});var s=()=>a(401497);function n(){return(0,s().IS)((e=>({longShimmer:{borderRadius:4,height:14,width:185},longTallShimmer:{borderRadius:4,height:25,width:185},shortShimmer:{borderRadius:4,height:14,width:70},avatarShimmer:{borderRadius:"100%",height:28,width:28,background:"light"===e.mode?"rgb(243 243 243)":"rgb(38 38 38)"}})),[])}},51703:(e,t,a)=>{a.d(t,{j:()=>u});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520),a(803949),a(581454);var s=()=>a(484714),n=()=>a(187174),o=()=>a(798880),i=()=>a(322769),r=()=>a(630116),l=()=>a(142448),d=()=>a(303129),c=()=>a(443573);function u(){const e=(0,d().l)(),t=(0,s().v3)(),{spaceUsers:a,loading:u}=(0,c().$)(e),[g]=(0,n().Yb)((()=>{if(u)return Promise.resolve(void 0);const s=new Set,n=new Set,d=new Set,c={},g={};for(const t of e){const e=a[t.id]??[],o=e.filter(i().c7);o.forEach((e=>{n.add(e.userId),"editor"===e.role&&s.add(e.userId)}));const r=e.filter(i().QE);r.forEach((e=>d.add(e.userId))),c[t.id]=o,g[t.id]=r}const m=Array.from(s).map((e=>new(r().LU)(t,{table:o().oo,id:e}))).sort(((e,t)=>e.getProfilePhoto()?-1:t.getProfilePhoto()?1:0)).map((e=>e.id));return Promise.resolve({memberCount:n.size,guestCount:d.size,sampleMemberIds:Array.from(new Set([...m,...n])).slice(0,l().iP),membersForSpace:c,guestsForSpace:g,loading:u})}),[u,e,a,t]);return{state:g,loading:u}}},51922:(e,t,a)=>{a.d(t,{_:()=>l});a(581454),a(296540);var s=()=>a(401497),n=()=>a(284371),o=()=>a(554509),i=()=>a(8178),r=a(474848);function l(e){const{title:t}=e,a=d({bylineWidth:"byline"in e&&e.byline?e.bylineWidth:void 0}),s="byline"in e?{marginBottom:0,paddingBottom:0}:{},n={...a.headingStyle,...s};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i().A,{large:!0,style:n,children:(0,r.jsx)("div",{style:a.titleContainer,children:(0,r.jsx)(o().D,{styleName:"UITitle-22px/Semibold",children:t})})}),"byline"in e&&(0,r.jsx)("div",{style:a.children,children:(0,r.jsx)(o().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:e.byline})})]})}function d(e){let{bylineWidth:t}=e;return(0,s().IS)((e=>({headingStyle:{marginBottom:16,paddingBottom:8,display:"flex",justifyContent:"space-between",alignItems:"center"},titleContainer:{display:"flex",justifyContent:"center",alignItems:"center",gap:12},title:{fontSize:20,fontWeight:n().Wy.medium,lineHeight:"150%",display:"flex",alignItems:"center",gap:0,margin:0},children:{width:t??"80%",marginTop:12,marginBottom:22},tabContainerStyle:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14,overflow:"visible"},tabStyle:{marginLeft:-8,marginRight:8},tabTitleStyle:{paddingLeft:8,paddingRight:8},tabBorderStyle:{left:8,right:8}})),[t])}},59976:(e,t,a)=>{a.d(t,{b:()=>o});var s=()=>a(645873);const n=new(s().O2)("time-series",(async()=>await Promise.resolve().then(a.bind(a,968526)))),o=(0,s()._h)(n,(e=>e.TimeSeries))},63964:(e,t,a)=>{a.d(t,{A:()=>W});var s=a(296540),n=()=>a(56366),o=()=>a(401497),i=()=>a(591779),r=()=>a(301608),l=()=>a(959013),d=()=>a(284371),c=()=>a(972435),u=()=>a(836251),g=()=>a(962730),m=()=>a(859428),p=()=>a(125565),h=()=>a(690197),f=()=>a(733815),x=()=>a(452864),v=(a(16280),a(944114),a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(581454),()=>a(484714)),y=()=>a(416845),b=()=>a(436604),S=()=>a(496603),j=()=>a(76590),w=()=>a(449506),A=()=>a(898486);const M={field:"num_searches",direction:"desc"},C=a(593467).Jb,I={sort:M,timeRange:C,searchAnalyticsDataList:[],numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};a(898992),a(354520);var T=()=>a(534177),k=()=>a(994776),_=()=>a(641300),z=()=>a(760217),D=()=>a(364280),P=()=>a(331542),N=()=>a(554509),R=()=>a(89924),B=()=>a(755535),L=()=>a(882690),E=a(474848);const O=(0,l().YK)({numSearches:{id:"workspaceAnalytics.searchTab.searchTable.searches.tooltip",defaultMessage:"Number of times users in the workspace have searched the query"},numUniqueUsers:{id:"workspaceAnalytics.searchTab.searchTable.uniqueSearches.tooltip",defaultMessage:"Total number of users that have searched the query"},ctr:{id:"workspaceAnalytics.searchTab.searchTable.ctr.tooltip",defaultMessage:"Percentage of times users have opened page from results of this query"}}),U=(0,l().YK)({queryText:{id:"spaceAnalyticsSearchTable.column.query",defaultMessage:"Query"},numSearches:{id:"spaceAnalyticsSearchTable.column.searches",defaultMessage:"Searches"},numUniqueUsers:{id:"spaceAnalyticsSearchTable.column.uniqueSearches",defaultMessage:"Unique searches"},ctr:{id:"spaceAnalyticsSearchTable.column.ctr",defaultMessage:"Click-through rate"}});function F(e){let{searchAnalyticsDataList:t,runNewSearch:a,sort:i,setSort:d,loadNextPage:u,loading:g,error:m,dateFilterProps:h}=e;const f=(0,s.useMemo)((()=>function(e){const{dateFilterProps:t}=e;return{queryText:{id:"queryText",headerTitle:(0,E.jsxs)(D().fI,{gap:8,alignItems:"center",children:[c().A.formatMessage(U.queryText),t?(0,E.jsx)(V,{currentFilter:t.currentFilter,onChangeFilter:t.onChangeFilter}):null]}),renderCell:e=>(0,E.jsx)(p().A,{children:e.queryText}),widthData:{width:200,maxWidth:300},sortable:!1},numSearches:{id:"numSearches",headerTitle:(0,E.jsx)(L().Z,{tooltipMessageDescriptor:O.numSearches,columnHeader:U.numSearches}),renderCell:e=>(0,E.jsx)(H,{value:e.numSearches}),widthData:{width:120,maxWidth:120},sortable:!0},numUniqueUsers:{id:"numUniqueUsers",headerTitle:(0,E.jsx)(L().Z,{tooltipMessageDescriptor:O.numUniqueUsers,columnHeader:U.numUniqueUsers}),renderCell:e=>(0,E.jsx)(H,{value:e.numUniqueUsers}),widthData:{width:120,maxWidth:120},sortable:!0},ctr:{id:"ctr",headerTitle:(0,E.jsx)(L().Z,{tooltipMessageDescriptor:O.ctr,columnHeader:U.ctr}),renderCell:e=>(0,E.jsx)(H,{value:Math.round(1e3*e.ctr)/1e3,isPercentage:!0}),widthData:{width:120,maxWidth:120},sortable:!0}}}({dateFilterProps:h})),[h]),x=(0,T().uv)(f).map((e=>f[e])),v=(0,n().K8)((()=>t.map((e=>({id:e.queryText,isClickable:!1,...e})))),[t]),y=(0,s.useMemo)((()=>function(e,t){const a=r().tV[t.field];if(!a)return;const s=e[a];return{column:s,sortAscending:"asc"===t.direction}}(f,i)),[f,i]),b=(0,o().IS)((e=>(0,_().rC)({columnRenderInfo:x,theme:e,containerMarginTop:0})),[x]),S=(0,o().IS)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return m?(0,E.jsx)(k().t,{error:m,runNewSearch:a}):(0,E.jsxs)("div",{children:[(0,E.jsx)(_().WE,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:x,rows:v,sortState:y,onSortStateChanged:e=>{d(function(e){const t=r().Bt[e.column.id],a=e.sortAscending?"asc":"desc";if(!t)return{field:"num_searches",direction:a};return{field:t,direction:a}}(e))},loadMoreMethod:{type:"scroll",onLoadMore:u},renderNoRowsComponent:()=>(0,E.jsx)(p().A,{isSmall:!0,style:S.emptyQuery,children:!g&&0===t.length&&(0,E.jsx)(l().sA,{id:"settings.workspaceAnalytics.searchTable.table.empty",defaultMessage:"No search query analytics to display."})}),styles:b}),g?(0,E.jsx)(P().A,{style:S.loadingSpinner}):null]})}function H(e){let{value:t,isPercentage:a}=e;const s=(0,o().IS)((e=>({centered:{width:"100%",textAlign:"center"}})),[]),n=a?`${t}%`:t;return(0,E.jsx)(p().A,{style:s.centered,children:n})}function V(e){return(0,E.jsx)(B().A,{selectedTitle:(0,E.jsx)(N().D,{styleName:"UISmall-12px/Regular",children:c().A.formatMessage(r().jy[e.currentFilter])}),renderMenuSections:t=>[{key:"day_filter_selector",render:e=>(0,E.jsx)(R().A,{...e}),items:r().jf.filter((e=>"all_time"!==e)).map((a=>({key:a,action:()=>{},render:()=>(0,E.jsx)(z().A,{focused:!1,onClick:()=>{e.onChangeFilter(a),t.close()},title:(0,E.jsx)(N().D,{styleName:"UISmall-12px/Regular",children:c().A.formatMessage(r().jy[a])})})})))}]})}function W(e){const{spaceStore:t,hideHeader:a=!1}=e,T=(0,o().IS)((()=>({header:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",marginBottom:16},sectionTitle:{fontWeight:d().Wy.semibold,fontSize:16,display:"flex",alignItems:"center"},helpInfo:{marginLeft:4}})),[]),k=(0,s.useRef)(!1),{searchAnalyticsDataList:_,timeRange:z,sort:D,loading:P,error:N,loadNextPage:R,runNewSearch:B,setTimeRange:L,setSort:O}=function(e){let{spaceStore:t}=e;const a=(0,v().v3)(),[n,o]=(0,s.useState)(I),i=(0,s.useRef)(M),r=(0,s.useRef)(C),d=(0,l().tz)(),c=(0,s.useCallback)((async e=>{let{fetchFromFirstPage:s,ignoreSearchInputComparison:l}=e;const d=!S().n4(n.sort,i.current)||!S().n4(n.timeRange,r.current);if(!l&&!d)return;i.current=n.sort,r.current=n.timeRange;let c=n.loading,u=n.error,g=n.hasNextPage,m=n.paginationToken;if(s&&(o((e=>({...I,timeRange:e.timeRange,sort:e.sort}))),c=I.loading,u=I.error,g=I.hasNextPage,m=I.paginationToken),!g||c)return;if(u)return;o((e=>({...e,loading:!0})));const p=await w().callApi({eventName:"loadSearchAnalytics",environment:a,data:{spaceId:t.id,sort:n.sort,timeRange:n.timeRange,startCursor:m},headers:{[b().B3]:t.id}});if("failed"===p.type)return void o((e=>({...e,loading:!1,error:p})));const h=p.data.results;o((e=>{const t=[],a=new Set(e.searchAnalyticsDataList.map((e=>e.queryText)));for(const n of h){const e=n.queryText;a.has(e)||(t.push(n),a.add(e))}const s=[...e.searchAnalyticsDataList,...t];return{...e,searchAnalyticsDataList:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:p.data.nextCursor,hasNextPage:Boolean(p.data.nextCursor)}}))}),[a,t,n.sort,n.timeRange,n.loading,n.error,n.hasNextPage,n.paginationToken]);(0,s.useEffect)((()=>{n.shouldReRunSearch&&(o((e=>({...e,shouldReRunSearch:!1}))),c({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[n.shouldReRunSearch,c]);const u=(0,s.useCallback)((async()=>{n.shouldReRunSearch||await c({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[n.shouldReRunSearch,c]),g=(0,s.useCallback)((async e=>{await c({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[c]),m=(0,s.useCallback)((e=>{"all_time"!==e&&(o((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),j().kJ(a,{daysFilter:e}))}),[a]),p=(0,s.useCallback)((e=>{o((t=>({...t,sort:e,shouldReRunSearch:!0}))),j().G4(a,{column:e.field,isAscending:"asc"===e.direction})}),[a]),h=(0,s.useMemo)((()=>{if(n.error)return 404===n.error.status?new(y().m_B)({message:(0,A().Hu)(d,n.error)}):new Error((0,A().Hu)(d,n.error))}),[n.error,d]);return{...n,error:h,loadNextPage:u,runNewSearch:g,setTimeRange:m,setSort:p}}({spaceStore:t}),U=(0,i().ZC)(t.id),H=(0,s.useMemo)((()=>void 0!==U&&t.id!==U),[t.id,U]);(0,s.useEffect)((()=>{k.current&&!H||(B(!0),k.current=!0)}),[B,H]);const V=(0,n().K8)((()=>t.getName()),[t]);return"NotFoundError"===(null==N?void 0:N.name)?(0,E.jsx)(x().H,{type:"empty",spaceName:V}):(0,E.jsxs)(E.Fragment,{children:[a?null:(0,E.jsxs)("div",{style:T.header,children:[(0,E.jsxs)(p().A,{style:T.sectionTitle,children:[(0,E.jsx)(l().sA,{id:"settings.workspaceAnalytics.searchTab.searchQueries.title",defaultMessage:"Search queries"}),(0,E.jsx)(m().A,{placement:g().W.Bottom,render:e=>(0,E.jsx)(h().A,{...e,href:(0,u().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:T.helpInfo}),renderTooltip:()=>(0,E.jsx)(l().sA,{id:"settings.workspaceAnalytics.searchTab.searchQueries.tooltip",defaultMessage:"Displays popular search queries in the workspace from the {dateRange}",values:{dateRange:c().A.formatMessage(r().Yr[z])}})})]}),(0,E.jsx)(f().Z,{currentFilter:z,onChangeFilter:L,hideAllTime:!0})]}),(0,E.jsx)(F,{searchAnalyticsDataList:_,runNewSearch:B,sort:D,setSort:O,loadNextPage:R,loading:P,error:N,dateFilterProps:a?{currentFilter:z,onChangeFilter:L}:void 0})]})}},75544:(e,t,a)=>{a.d(t,{A:()=>p});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520);var s=a(296540),n=()=>a(908006),o=()=>a(56366),i=()=>a(564787),r=()=>a(921598),l=()=>a(737658),d=()=>a(336811),c=()=>a(496603),u=()=>a(183558),g=()=>a(346923);function m(e){const{reducerId:t,instanceId:a,reducer:s,collectionContextStore:n,groupsPointer:o}=e,i=n.reducersStore.state,l=i[t];let d,u;if(o&&o.length>0&&(d=(0,r().Hm)(o)),s){if(u={instanceIds:c().sb([...(null==l?void 0:l.instanceIds)||[],a]),reducer:s},d){n.reducerDependencies.has(d)||n.reducerDependencies.set(d,new Set);const e=n.reducerDependencies.get(d);null==e||e.add(t)}}else{if(d){const e=n.reducerDependencies.get(d);e&&(e.delete(t),0===e.size&&n.reducerDependencies.delete(d))}const e=c().FF((null==l?void 0:l.instanceIds)||[],a);u=l&&e.length>0?{instanceIds:e,reducer:l.reducer}:void 0}c().n4(l,u)||n.reducersStore.setState({...i,[t]:u})}function p(e){const{id:t,reducer:a,collectionContextStore:p,groupsPointer:h,debounceWait:f}=e,x=(0,g().l)(h),v=(0,g().l)(a),y=(0,o().K8)((()=>p.collectionViewStore()),[p]),b=(0,o().K8)((()=>p.normalizedFormatStore.state.collection_pointer),[p.normalizedFormatStore]),S=(0,o().K8)((()=>{var e;return null==y||null===(e=y.getFormatStore())||void 0===e?void 0:e.getKeyStore("collection_view_source").getValue()}),[y]),j=(0,s.useRef)(!1),w=(0,d().O)(),[A,M]=(0,s.useReducer)(((e,t)=>c().n4(e,t)?e:t),void 0),C=(0,s.useCallback)((()=>{const e=p.localResultStore.state,a=p.remoteResultStore.state,s=e&&"reducer"===e.type?e.reducerResults[t]:void 0,n=a&&"reducer"===a.type?a.reducerResults[t]:void 0;return function(e){const{reducerId:t,localReducerResult:a,remoteReducerResult:s,collectionContextStore:n,reducer:o}=e,d=n.reducersStore.state,u=n.remoteResultStore.state,g=n.isClientModeEnabledStore.state;if(g)return a;const m=n.isCreatingNewChartCollectionStore.state,p=n.wasCreatedThisSessionStore.state;if("aggregation"===o.type){if(m&&p){return Boolean(s&&"aggregation"===s.type&&"number"===s.aggregationResult.type&&0!==s.aggregationResult.value)&&n.isCreatingNewChartCollectionStore.setState(!1),a}if(s)return s;const e=Boolean(u&&"reducer"===u.type&&c().I6(u.reducerResults,((e,t)=>{const a=d[t];return!!a&&Boolean("results"===a.reducer.type&&!a.reducer.searchQuery&&"results"===e.type&&e.hasMore&&c().n4(o.filter,a.reducer.filter))})));return e?a:s}if("groups"===o.type){if(m&&p){return Boolean(s&&"groups"===s.type&&("v2"===s.version?s.hasMore:0!==s.total))&&n.isCreatingNewChartCollectionStore.setState(!1),a}if("v2"===o.version){if(a&&"groups"!==a.type||a&&"groups"===a.type&&"v2"!==a.version)return;if(s&&"groups"!==s.type||s&&"groups"===s.type&&"v2"!==s.version)return;const e=function(e){var t;const{reducerId:a,reducer:s,collectionContextStore:n,wasCreatedThisSession:o,localReducerResult:d,remoteReducerResult:c}=e;if(!s.blockResults&&!a.includes(r().RO))return c;let u,g;s.aggregation&&(c?u=c.aggregationResults:d&&(u=d.aggregationResults));if(s.blockResults){var m;const e=Boolean(c&&c.blockResults),t=null===(m=n.collectionViewStore())||void 0===m?void 0:m.getCollectionSource(),a=(0,l().TR)(t)||(0,l().hJ)(t);if((e||o)&&!a&&d&&d.blockResults){const e=d.blockResults,t=(null==c?void 0:c.blockResults)??{},a=new Set([...Object.keys(e),...Object.keys(t)]),s={};for(const n of a){const a=e[n],o=t[n];let i=[];a?i=a.blockIds:o&&(i=o.blockIds);let r=!1;o?r=o.hasMore:a&&(r=a.hasMore),s[n]={blockIds:i,hasMore:r}}g=s}g||(g=n.forceLocalQueryCollection?null==c?void 0:c.blockResults:null==d?void 0:d.blockResults)}let p;d&&d.pinnedResults&&(p=d.pinnedResults);c&&c.pinnedResults&&(p={groupResults:c.pinnedResults.groupResults,...p,aggregationResults:c.pinnedResults.aggregationResults});const h=c?c.hasMore:Boolean(null==d?void 0:d.hasMore),f=c?c.hasMoreSubGroups:null==d?void 0:d.hasMoreSubGroups;let x=(null==d?void 0:d.results)??(null==c?void 0:c.results)??[],v=(null==d?void 0:d.subGroupResults)??(null==c?void 0:c.subGroupResults);const y=s.groupBy;c&&("relation"===y.type||"formula"===y.type&&"relation"===y.groupBy.type)&&(x=c.results);c&&function(e){var t,a,s,n;const o=null===(t=e.collectionViewStore())||void 0===t?void 0:t.getType();if(o&&!["timeline","table","list"].includes(o))return!1;const r=(0,i().S)(null===(a=e.collectionStore())||void 0===a?void 0:a.getFormat(),null===(s=e.collectionViewStore())||void 0===s?void 0:s.getFormat(),e.normalizedSchemaStore.state,(null===(n=e.collectionStore())||void 0===n?void 0:n.id)??"");return"show"===r}(n)&&(x=c.results);const b=null===(t=s.subGroup)||void 0===t?void 0:t.groupBy;c&&("relation"===(null==b?void 0:b.type)||"formula"===(null==b?void 0:b.type)&&"relation"===b.groupBy.type)&&(v=c.subGroupResults);n.forceLocalQueryCollection&&(x=(null==c?void 0:c.results)??(null==d?void 0:d.results)??[],v=(null==c?void 0:c.subGroupResults)??(null==d?void 0:d.subGroupResults));return{type:"groups",version:"v2",results:x,subGroupResults:v,pinnedResults:p,hasMore:h,hasMoreSubGroups:f,blockResults:g,aggregationResults:u}}({reducerId:t,collectionContextStore:n,reducer:o,wasCreatedThisSession:p,localReducerResult:a,remoteReducerResult:s});return e}return s||a}if("results"===o.type){var h;const e=n.wasCreatedThisSessionStore.state,o=Boolean(u&&"reducer"===u.type&&u.reducerResults[t]),i=null===(h=n.collectionViewStore())||void 0===h?void 0:h.getCollectionSource(),r=(0,l().TR)(i)||(0,l().hJ)(i);if((o||e)&&!r&&a&&"results"===a.type){return{...a,hasMore:s&&"results"===s.type?s.hasMore:a.hasMore}}return s}}({reducerId:t,collectionContextStore:p,reducer:v,localReducerResult:s,remoteReducerResult:n})}),[p,v,t]),I=(0,s.useCallback)((()=>{j.current=!1,w.current||M(C())}),[C,w]),T=(0,s.useCallback)((()=>{j.current||(j.current=!0,n().default.afterNextFlush(I))}),[I]),[k]=(0,s.useState)((()=>(0,u().Ay)()));return(0,s.useEffect)((()=>{const e=f?(0,c().sg)(T,f,{leading:!0}):T;return p.remoteResultStore.addListener(T),p.localResultStore.addListener(e),()=>{p.remoteResultStore.removeListener(T),p.localResultStore.removeListener(e)}}),[p,T,f]),(0,s.useEffect)((()=>(m({reducerId:t,instanceId:k,reducer:v,collectionContextStore:p,groupsPointer:x}),()=>{m({reducerId:t,instanceId:k,reducer:void 0,collectionContextStore:p,groupsPointer:x})})),[p,y,b,S,x,v,t,k]),(0,s.useEffect)((()=>{T()}),[]),(0,s.useEffect)((()=>(p.timingTracker.mountCollectionReducerRequest(t,v.type),()=>{p.timingTracker.unmountCollectionReducerRequest(t)})),[p,t,v]),A}},76590:(e,t,a)=>{a.d(t,{$s:()=>g,G4:()=>f,Jv:()=>r,Jy:()=>i,PH:()=>m,TJ:()=>l,Tm:()=>u,Wt:()=>p,Y5:()=>d,kJ:()=>h,lP:()=>c,n_:()=>n,wy:()=>o});var s=()=>a(679924);function n(e,t){(0,s().v)(e,"overview_analytics_filter_change",t)}function o(e,t){(0,s().v)(e,"user_analytics_engagement_timerange_filter_change",t)}function i(e,t){(0,s().v)(e,"user_analytics_table_filter_change",t)}function r(e,t){(0,s().v)(e,"user_analytics_table_sort_change",t)}function l(e,t){(0,s().v)(e,"user_analytics_export_requested",t)}function d(e,t){(0,s().v)(e,"content_analytics_engagement_timerange_filter_change",t)}function c(e,t){(0,s().v)(e,"content_analytics_export_requested",t)}function u(e,t){(0,s().v)(e,"content_analytics_table_filter_change",t)}function g(e,t){(0,s().v)(e,"content_analytics_table_timerange_filter_change",t)}function m(e,t){(0,s().v)(e,"content_analytics_table_sort_change",t)}function p(e,t){(0,s().v)(e,"workspace_analytics_tab_click",t)}function h(e,t){(0,s().v)(e,"search_analytics_table_timerange_filter_change",t)}function f(e,t){(0,s().v)(e,"search_analytics_table_sort_change",t)}},83842:(e,t,a)=>{a.r(t),a.d(t,{AccessLevelSection:()=>ne,SidebarCreateTeamModal:()=>le,TeamDescriptionRow:()=>X,TeamIconAndNameRow:()=>ee});a(581454);var s=a(296540),n=()=>a(484714),o=()=>a(56366),i=()=>a(401497),r=()=>a(148307),l=()=>a(66913),d=()=>a(652631),c=()=>a(505412),u=()=>a(959013),g=()=>a(496603),m=()=>a(534177),p=()=>a(284371),h=()=>a(946141),f=()=>a(704152),x=()=>a(364280),v=()=>a(623580),y=()=>a(545805),b=()=>a(331542),S=()=>a(676007),j=()=>a(15144),w=()=>a(125565),A=()=>a(453697),M=()=>a(101919),C=()=>a(780054),I=()=>a(898486),T=()=>a(972435),k=()=>a(640653),_=()=>a(37433),z=()=>a(456663),D=()=>a(765957),P=()=>a(630116),N=()=>a(205618),R=()=>a(714300),B=()=>a(848237),L=()=>a(204063),E=()=>a(213525),O=()=>a(47170),U=()=>a(10984),F=()=>a(475355),H=()=>a(812941),V=a(474848);function W(){const e=(0,n().v3)(),{currentSpaceStore:t,spaceViewStore:a}=(0,o().K8)((()=>({currentSpaceStore:D().default.state.currentSpaceStore,spaceViewStore:D().default.state.currentSpaceViewStore})),[]),r=(0,O().O)(),l=(0,R().l)({spaceId:r}),d=(0,o().O$)(z().A),p=(0,_().Gt)(l),h=function(){const e=(0,o().K8)((()=>U().El()&&!z().A.state.isDefault),[]),t=z().o.Team,a=z().o.Members;return e?[t,a]:[t]}(),{screen:f,pageNumber:x,teamId:v}=d,y=""===d.name||d.name.length>c().Q||d.description.length>c().z,b=(0,i().IS)((e=>({box:{justifyContent:"space-between",alignItems:"center",display:"flex",width:"100%",paddingTop:22},button:{marginLeft:8},learnMoreLink:{overflow:"hidden"}})),[]),S=(0,s.useCallback)(((a,s)=>{t&&function(e){let{pageOrder:t,pageNumber:a,teamId:s,currentSpaceStore:n,environment:o,from:i}=e;const r=a+1;if(r<=t.length)z().A.update((e=>({...e,loading:!1,screen:t[r-1],pageNumber:r})));else if(s){const e=P().h4.createChildStore(n,{table:"team",id:s,spaceId:n.id});B().L0({environment:o,teamStore:e,shouldScroll:!0}),B().lJ({environment:o,from:i,teamStore:e})}}({pageOrder:h,pageNumber:x,teamId:s||v,currentSpaceStore:t,environment:e,from:a})}),[t,e,x,h,v]),j=g().sg((async()=>{if(!t||!a)return;let s=v;switch(f){case z().o.Team:s=await async function(e){var t;let{spaceStore:a,environment:s,shouldShowZeroTeamsExperience:n,sidebarCreateTeamModalStoreState:o}=e;const{name:i,description:r,icon:l,flowId:d,accessLevel:c,isDefault:u}=o,g=await(0,E().d$)({environment:s,spaceStore:a,teamName:i});if(!g)return;let m;z().A.update((e=>({...e,loading:!0}))),m=n?await F().oH({environment:s,name:i,description:r,icon:l,flowId:d,trackCreateTeamComplete:!0}):await F().gj({environment:s,name:i,description:r,icon:l,accessLevel:c,isDefault:u,flowId:d,createTeamHome:!0});if(!m)return;const p=null===(t=m)||void 0===t?void 0:t.id;return z().A.update((e=>({...e,teamId:p}))),p}({spaceStore:t,environment:e,shouldShowZeroTeamsExperience:p,sidebarCreateTeamModalStoreState:d});break;case z().o.Members:break;default:(0,m().HB)(f)}s?S("success",s):z().A.update((e=>({...e,loading:!1})))}),1e3,{leading:!0,trailing:!1}),w=(0,s.useCallback)(j,[j]);return(0,V.jsxs)("div",{style:b.box,children:[(0,V.jsx)(H().A,{containerStyle:b.learnMoreLink,helpCenterLocation:"bestPractices",analyticsFrom:"teams_learn_more_sidebar_create_team_modal"}),(0,V.jsx)("div",{style:{display:"inline-flex"},children:(0,V.jsx)(L().A,{size:"lg",onClick:w,disabled:y,style:b.button,children:(0,V.jsx)(u().sA,{id:"sidebarCreateTeamModal.footer.createTeam",defaultMessage:"Create teamspace"})})})]})}var q=()=>a(144707),G=()=>a(284331),K=()=>a(898808);const Y={userSelect:"none",WebkitUserSelect:"none",position:"relative",padding:"22px 26px"},Q={createTeamContainer:{...Y,width:480},addMembersContainer:{...Y,width:500},full:{width:"100%"}},$=(0,u().YK)({teamNamePlaceholder:{id:"sidebarCreateTeamModal.teamScreen.namePlaceholder",defaultMessage:"Acme Labs"},teamDescriptionPlaceholder:{id:"sidebarCreateTeamModal.teamScreen.descriptionPlaceholder",defaultMessage:"Details about your teamspace"}});function X(e){let{hasMarginTop:t=!0}=e;const a=(0,u().tz)(),{description:s,isDescriptionTooLong:n}=(0,o().K8)((()=>{const e=z().A.state.description;return{description:e,isDescriptionTooLong:e.length>c().z}}),[]),i=a.formatMessage(I().qh.team_description_too_long,{maxTeamDescriptionLength:c().z});return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(M().A,{hasMarginTop:t,children:(0,V.jsx)(u().sA,{id:"sidebarCreateTeamModal.teamScreen.teamDescriptionLabel",defaultMessage:"Description"})}),(0,V.jsxs)(x().VP,{gap:4,grow:1,children:[(0,V.jsx)(v().A,{value:s,placeholder:T().A.formatMessage($.teamDescriptionPlaceholder),textarea:!0,onChange:e=>{z().A.update((t=>({...t,description:e.target.value})))},errorOutline:n}),n&&(0,V.jsx)(j().R,{id:"team-description-too-long",error:i})]})]})}function Z(e){return(0,V.jsx)("div",{id:e.titleAriaId,style:{fontSize:18,fontWeight:p().Wy.semibold},children:(()=>{switch(e.screen){case z().o.Team:return(0,V.jsx)(u().sA,{id:"sidebarCreateTeamModal.teamTitle.label",defaultMessage:"Create a new teamspace"});case z().o.Members:return(0,V.jsx)(u().sA,{id:"sidebarCreateTeamModal.membersTitle.label",defaultMessage:"Add people"});default:(0,m().HB)(e.screen)}})()})}function J(e){const t=(0,n().v3)(),{screen:a,teamId:i}=(0,o().K8)((()=>{const{screen:e,teamId:t}=z().A.state;return{screen:e,teamId:t}}),[]),r=(0,s.useCallback)(((e,a)=>{B().lJ({environment:t,from:a,teamStore:e})}),[t]);switch(a){case z().o.Team:return(0,V.jsx)(ae,{titleAriaId:e.titleAriaId,descriptionAriaId:e.descriptionAriaId,parentSpaceStore:e.parentSpaceStore});case z().o.Members:return i?(0,V.jsx)(oe,{teamId:i,onCompleted:e=>{r(e,"success")},onCanceled:e=>{r(e,"dismiss_button")}}):null;default:(0,m().HB)(a)}}function ee(e){let{parentSpaceStore:t,hasMarginTop:a=!0,inputStyles:s}=e;const n=(0,u().tz)(),r=(0,o().K8)((()=>t??D().default.state.currentSpaceStore),[t]),{icon:l,name:d,nameTooLong:g}=(0,o().K8)((()=>{const{icon:e,name:t}=z().A.state;return{icon:e,name:t,nameTooLong:t.length>c().Q}}),[]),m=n.formatMessage(I().qh.team_name_too_long,{maxTeamNameLength:c().Q}),p=(0,i().IS)((e=>({container:{display:"inline-flex",width:"100%",verticalAlign:"middle"},icon:{marginRight:8,marginTop:1}})),[]);if(!r)return null;const h=l?{icon:l,pointer:{table:"space",id:r.id}}:void 0;return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(M().A,{hasMarginTop:a,children:(0,V.jsx)(u().sA,{id:"sidebarCreateTeamModal.teamScreen.teamNameLabel",defaultMessage:"Icon & name"})}),(0,V.jsxs)("div",{style:p.container,children:[(0,V.jsx)(K().x,{icon:h,size:26,style:p.icon,onChange:e=>{z().A.update((t=>({...t,icon:e})))},iconLoggingData:{recordTable:"team",source:"team_creation"},parentSpaceStore:t}),(0,V.jsxs)(x().VP,{gap:4,grow:1,children:[(0,V.jsx)(v().A,{style:s,value:d,placeholder:T().A.formatMessage($.teamNamePlaceholder),onChange:e=>{z().A.update((t=>({...t,name:e.target.value})))},preventSafariAutofill:!0}),g&&(0,V.jsx)(j().R,{id:"team-name-too-long",error:m})]})]})]})}function te(e){const t=(0,i().IS)((()=>({description:{marginTop:3,marginBottom:26}})),[]);return(0,V.jsx)(w().A,{id:e.descriptionAriaId,isMultiline:!0,isSmall:!0,isSecondaryColor:!0,style:t.description,children:(()=>{switch(e.screen){case z().o.Team:return(0,V.jsx)(u().sA,{id:"sidebarCreateTeamModal.teamDescription.label",defaultMessage:"Teamspaces are where your team organizes pages, permissions, and members"});case z().o.Members:return null;default:(0,m().HB)(e.screen)}})()})}function ae(e){const t=(0,n().v3)(),{open:a,from:i,flowId:r}=(0,o().K8)((()=>{const e=z().A.state;return{open:e.open,from:e.open?e.from:void 0,flowId:e.flowId}}),[]);return(0,s.useEffect)((()=>{a&&i&&h().H8(t,{from:i,flowId:r})}),[]),(0,V.jsxs)("div",{style:Q.createTeamContainer,children:[(0,V.jsx)(Z,{titleAriaId:e.titleAriaId,screen:z().o.Team}),(0,V.jsx)(te,{descriptionAriaId:e.descriptionAriaId,screen:z().o.Team}),(0,V.jsxs)("div",{style:Q.full,children:[(0,V.jsx)(ee,{parentSpaceStore:e.parentSpaceStore}),(0,V.jsx)(X,{}),(0,V.jsx)(ne,{parentSpaceStore:e.parentSpaceStore})]}),(0,V.jsx)(W,{})]})}function se(){const e=(0,o().K8)((()=>z().A.state.loading),[]),t=(0,i().IS)((e=>({spinner:{width:"100%",height:"100%",backgroundColor:e.modalUnderlayBackground,position:"absolute",top:0,left:0}})),[]);return(0,V.jsx)(V.Fragment,{children:e&&(0,V.jsx)("div",{style:t.spinner,children:(0,V.jsx)(b().A,{style:{position:"absolute",top:"50%",left:"50%"}})})})}function ne(e){let{parentSpaceStore:t,hasMarginTop:a=!0}=e;const s=(0,i().IS)((e=>({openAccessMessage:{fontSize:13,color:e.text.secondary,marginTop:20,lineHeight:1.4,display:"flex"},iconContainer:{marginRight:8},openTeamIcon:{width:24,fill:e.icon.secondary}})),[]),r=(0,R().l)({spaceId:null==t?void 0:t.id}),l=(0,_().Gt)(r),c=(0,n().v3)(),g=(0,o().K8)((()=>{const e=t??D().default.state.currentSpaceStore;return e?(0,k().GK)(c,e):"this workspace"}),[c,t]),{accessLevel:m,isDefault:p}=(0,o().K8)((()=>{const{accessLevel:e,isDefault:t}=z().A.state;return{accessLevel:e,isDefault:t}}),[]);return l?(0,V.jsxs)("div",{style:s.openAccessMessage,children:[(0,V.jsx)("div",{style:s.iconContainer,children:(0,d().X)(s.openTeamIcon)}),(0,V.jsx)(u().sA,{id:"sidebarCreateTeamModal.teamScreen.openAccessLabel",defaultMessage:"Everyone at {spaceName} and new members will have access to this teamspace",values:{spaceName:g}})]}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(M().A,{hasMarginTop:a,children:(0,V.jsx)(u().sA,{id:"sidebarCreateTeamModal.teamScreen.permissionsLabel",defaultMessage:"Permissions"})}),(0,V.jsx)(q().u,{currentAccessLevel:m,currentIsDefault:p,onChange:(e,t)=>{t?z().A.update((e=>({...e,accessLevel:"open",isDefault:t}))):z().A.update((a=>({...a,accessLevel:e,isDefault:t})))},parentSpaceStore:t})]})}function oe(e){const t=(0,n().v3)(),a=(0,o().uB)(void 0,N().A);(0,o().K8)((()=>{const{defaultInviteTargets:e,flowId:t}=z().A.state;a.setState({...a.state,flowId:t}),e&&a.setState({...a.state,inviteTargets:e})}),[a]);const s=(0,o().K8)((()=>e.parentSpaceStore??D().default.state.currentSpaceStore),[e.parentSpaceStore]);if(!s)return null;const i=P().h4.createChildStore(s,{table:"team",id:e.teamId,spaceId:s.id});return(0,V.jsx)("div",{style:Q.full,children:(0,V.jsx)("div",{style:Q.addMembersContainer,children:(0,V.jsx)(G().A,{store:i,permissionsInviteStore:a,isNewlyCreatedTeam:!0,onSubmitSuccessful:()=>{e.onCompleted(i),B().L0({environment:t,teamStore:i,shouldScroll:!0})},onDismiss:()=>{e.onCanceled(i)}})})})}const ie=[r().A.images.avatars.avatar1Png,r().A.images.avatars.avatar2Png,r().A.images.avatars.avatar3Png];function re(e){let{handleModalClose:t}=e;const a=(0,i().IS)((e=>({container:{borderTopLeftRadius:5,borderTopRightRadius:5,background:e.inputBackground,boxShadow:e.inputBoxShadow},header:{display:"flex",padding:14,fontWeight:p().Wy.medium},avatarGroup:{display:"flex",width:"100",marginLeft:4,alignSelf:"center"},avatar:{marginLeft:-4},message:{paddingLeft:14,paddingRight:14},closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.text.secondary}})),[]);return(0,V.jsx)("div",{style:a.container,children:(0,V.jsxs)("div",{style:a.header,children:[(0,V.jsx)("div",{style:a.avatarGroup,children:ie.map(((e,t)=>(0,V.jsx)(A().A,{avatarShouldShowShadow:!0,style:a.avatar,size:28,avatar:{avatarUrl:e}},t)))}),(0,V.jsx)(w().A,{style:a.message,isMultiline:!0,isSmall:!0,children:(0,V.jsx)(u().sA,{id:"sidebarCreateTeamModal.teamScreen.firstTeamHeader",defaultMessage:"Create your first teamspace to start using Notion with your teammates"})}),(0,V.jsx)(f().A,{onClick:t,style:a.closeButton,hoveredStyle:a.closeButtonHover,children:(0,l().V)(a.closeButtonIcon)})]})})}function le(e){let{parentSpaceStore:t}=e;const a=(0,n().v3)(),r=(0,s.useId)(),d=(0,s.useId)(),c=(0,i().IS)((e=>({modal:{maxWidth:500,borderRadius:5,overflow:"visible"},closeButton:{position:"absolute",top:14,right:14,zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:14,fill:e.text.secondary},wrapper:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none"}})),[]),u=(0,s.useCallback)((e=>{B().lJ({environment:a,from:e})}),[a]),{open:m,loading:p,screen:h}=(0,o().K8)((()=>{const{open:e,loading:t,screen:a}=z().A.state;return{open:e,loading:t,screen:a}}),[]),x=(0,R().l)({spaceId:null==t?void 0:t.id}),v=(0,_().Gt)(x),b=(0,s.useRef)(v);return(0,s.useEffect)((()=>{p||(b.current=v&&h===z().o.Team)}),[p,h,v]),m?(0,V.jsx)(S().a,{ariaLabelledBy:r,ariaDescribedBy:d,open:m,innerStyle:c.modal,onDismiss:()=>{u("modal")},render:()=>(0,V.jsxs)("div",{style:{height:"100%"},children:[!C().A.isMobile&&(b.current?(0,V.jsx)(re,{handleModalClose:()=>{u("close_button")}}):(0,V.jsx)(f().A,{onClick:()=>{u("close_button")},style:c.closeButton,hoveredStyle:c.closeButtonHover,children:(0,l().V)(c.closeButtonIcon)})),(0,V.jsx)("div",{style:c.wrapper,children:(0,V.jsx)(y().A,{debugName:"SidebarCreateTeamModal",capture:!0,onBackspace:g().D_,onLeft:g().D_,onRight:g().D_,onSelectAll:g().D_,onRedo:g().D_,onUndo:g().D_,onCut:g().D_,onCopy:g().D_,onPaste:g().D_,onKeypress:g().D_,onDelete:g().D_,onTab:g().D_,children:(0,V.jsx)(J,{titleAriaId:r,descriptionAriaId:d,parentSpaceStore:t})})}),(0,V.jsx)(se,{})]})}):null}},87043:(e,t,a)=>{a.d(t,{Ev:()=>D,Bj:()=>P,Ay:()=>U});var s=a(296540),n=()=>a(484714),o=()=>a(56366),i=()=>a(401497),r=()=>a(584262),l=()=>a(302107),d=()=>a(142748),c=()=>a(273900),u=()=>a(68263),g=()=>a(179034),m=()=>a(519831),p=()=>a(854150),h=()=>a(959013),f=()=>a(381349),x=()=>a(534177),v=()=>a(761652),y=()=>a(296798),b=()=>a(125565),S=()=>a(912913),j=()=>a(492414),w=()=>a(299545),A=()=>a(976721),M=()=>a(632709),C=()=>a(630116),I=()=>a(848237),T=()=>a(265665),k=()=>a(623275),_=a(474848);const z=function(e){const{store:t,isDisabled:a,isCurrentUserPermission:s}=e;return a?s?(0,_.jsx)(h().sA,{defaultMessage:"Your access is based on {inlineIconAndName}",id:"blockPermissionsSettings.restrictedPermissionsCurrentUser.tooltip",values:{inlineIconAndName:(0,_.jsx)(v().A,{store:t,useInvertedColors:!0})}}):(0,_.jsx)(h().sA,{defaultMessage:"This access is based on {inlineIconAndName}",id:"blockPermissionsSettings.restrictedPermissions.tooltip",values:{inlineIconAndName:(0,_.jsx)(v().A,{store:t,useInvertedColors:!0})}}):s?(0,_.jsx)(h().sA,{defaultMessage:"Your access is based on {inlineIconAndName}. Changing your access will restrict permissions of this page.",id:"blockPermissionsSettings.restrictedPermissionsCurrentUser.canEdit.tooltip",values:{inlineIconAndName:(0,_.jsx)(v().A,{store:t,useInvertedColors:!0,maxLength:26})}}):(0,_.jsx)(h().sA,{defaultMessage:"This access is based on {inlineIconAndName}. Changing this access will restrict permissions of this page.",id:"blockPermissionsSettings.restrictedPermissions.canEdit.tooltip",values:{inlineIconAndName:(0,_.jsx)(v().A,{store:t,useInvertedColors:!0,maxLength:26})}})},D=32,P=40,N=(0,h().YK)({fromLinkBox:{defaultMessage:"From {linkBoxWithPageTitle}",id:"pagePermissionItem.fromInheritedRecordPermissions.setting"}});function R(e){const{from:t,store:r,onClick:l,permissionItem:d,ignoreLocalHoverState:c,nonInheritedTooltip:u,inheritedTooltip:h,shouldDisable:f,isCollapsible:v,openRoleSelectMenuOnRender:y}=e,b=(0,n().v3)(),S=(0,o().uB)(void 0,a(463830).A),j=(0,o().K8)((()=>{const e=t.table;return e===g().ev?C().Bv.createChildStore(r,{table:g().ev,id:t.blockId}):e===p().yK?C().h4.createChildStore(r,{table:p().yK,id:t.teamId}):e===m().Vl?C().md.createChildStore(r,{table:m().Vl,id:t.collectionId}):void(0,x().HB)(e)}),[t,r]),[w,A]=(0,s.useState)(!1),M=(0,s.useCallback)((()=>{S.setState({...S.state,open:!0}),A(!0)}),[S]),I=(0,s.useCallback)((()=>{A(!1)}),[]);(0,s.useEffect)((()=>{y&&!S.state.open&&requestAnimationFrame((()=>{M()}))}),[y,M,S]);const T=w,D=(0,o().K8)((()=>f||(0,a(484578).dK)({permissionItem:d,store:r})),[f,d,r]),P=(0,o().K8)((()=>j.id!==r.id),[j,r]),N=(0,s.useCallback)((e=>{l?l(e):D||S.setState({...S.state,open:!0})}),[S,l,D]),R=(0,o().K8)((()=>{const e=b.currentUser.id;return"user_permission"===d.type&&d.user_id===e}),[b,d]),L=(0,o().K8)((()=>T?null:P?h||(0,_.jsx)(z,{store:j,isDisabled:D,isCurrentUserPermission:R}):u),[P,u,h,j,D,R,T]),E=(0,i().IS)((t=>({button:{...(0,k().CY)(),...e.menuListItemProps?{width:"unset"}:{}},pressedButton:{background:t.buttonPressedBackgroundLight},tooltip:{maxWidth:240}})),[e.menuListItemProps]);return(0,_.jsx)(a(859428).A,{delayThreshold:0,renderTooltip:()=>L,textWrap:!0,disableTooltip:!Boolean(L)||T,forceRenderTooltipPopupComponent:Boolean(L),style:E.tooltip,render:t=>{const s=(0,a(553965).A)(t,{onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave});return e.menuListItemProps?(0,_.jsx)(a(760217).A,{...e.menuListItemProps,onClick:N,disabled:D,ignoreLocalHoverState:c,pressed:!1,buttonStyle:E.button,textWrapperStyle:{marginLeft:0,marginRight:0},style:{padding:0},title:(0,_.jsx)(B,{...e,isDisabled:D,fromStore:j,buttonPopupStore:S,isInherited:P,onOpenMenu:M,onClose:I}),...s}):(0,_.jsx)(a(704152).A,{disabled:D&&!v,ignoreLocalHoverState:c,style:E.button,pressedStyle:E.pressedButton,onClick:N,...s,children:(0,_.jsx)(B,{...e,isDisabled:D,fromStore:j,buttonPopupStore:S,isInherited:P,onOpenMenu:M,onClose:I})})},placement:a(962730).W.Left})}function B(e){const{permissionItem:t,fromStore:a,isCompact:r,iconStyle:l,icon:d,title:c,tag:u,subtitle:g,showInherited:m,isInherited:p,permissionRoleSelect:h,hideRoleSelectButton:f,renderTitleWithoutUILabelWrapper:v,onClose:y,style:S}=e,j=(0,n().v3)(),w=j.device.isMobile,A=(0,o().K8)((()=>function(e){return"user_permission"===e.type}(t)),[t]),{paddingLeft:M,paddingRight:I}=(0,o().K8)((()=>({paddingLeft:j.WindowSizeStore.getSafePaddingLeftCSS(w?0:8),paddingRight:j.WindowSizeStore.getSafePaddingRightCSS(w?0:8)})),[j.WindowSizeStore,w]),z=(0,i().IS)((e=>({container:{display:"flex",alignItems:"center",minHeight:r?44:void 0,height:w?void 0:k().CJ,paddingTop:w?12:8,paddingBottom:w?12:8,paddingLeft:M,paddingRight:I,...S},icon:{flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",width:w?40:32,height:w?40:32,marginRight:(0,k().qj)({isMobile:w}),...l},title:{marginRight:"auto",minWidth:0},labelWrapper:{display:"flex",flexDirection:"row"},label:{fontWeight:400},tag:{marginLeft:4},roleSelect:{display:"flex",alignItems:"center",flexShrink:0,marginLeft:8}})),[r,M,I,w,l,S]),D=(0,s.useMemo)((()=>f?null:function(e){return"display_only_overview_permission"===e.type||"display_only_hidden_permission"===e.type||"display_only_inherited_permission"===e.type||"display_only_group_member_permission"===e.type}(t)?h:e.store instanceof C().Bv?(0,_.jsx)(L,{...e,onClose:y,permissionItem:t}):e.store instanceof C().md?(0,_.jsx)(E,{...e,store:e.store,onClose:y,permissionItem:t}):void(0,x().HB)(e.store)),[f,t,e,h,y]);return(0,_.jsxs)("div",{className:"notranslate",style:z.container,children:[(0,_.jsx)("div",{style:z.icon,children:d}),(0,_.jsxs)("div",{style:z.title,children:[(0,_.jsxs)("div",{style:z.labelWrapper,children:[v?c:(0,_.jsx)(b().A,{style:A?void 0:z.label,children:(0,_.jsx)(T().j,{children:c})}),u&&(0,_.jsx)("div",{style:z.tag,children:u})]}),g&&(0,_.jsx)(b().A,{style:e.subtitleStyle,isSmall:!0,children:g}),m&&p&&(0,_.jsx)(O,{store:a})]}),D?(0,_.jsx)("div",{style:z.roleSelect,children:D}):null]})}function L(e){const{isInherited:t,permissionItem:a,store:r,from:l,isDisabled:m,sudoModeStore:p,location:h,fromPermissionWrapper:f,onUpgradeButtonClick:x,onChange:v,onClose:y,onOpenMenu:b,upgradeButtonName:j,buttonPopupStore:w,isRemovableOverride:M,onChangeSuccess:I}=e,T=(0,n().v3)(),z=(0,o().K8)((()=>{var e;const t=r.getModel(),s=null===(e=r.getParentStore())||void 0===e?void 0:e.getModel();return(0,c().tp)({record:t,parent:s,from:l,permissionItem:a})?(0,c().SK)({ancestors:d().Yn(r.pointer,r.getRecordModel),from:l}):a.role}),[l,a,r]),D=(0,o().K8)((()=>r instanceof C().Bv?r.getType():void 0),[r]),P=(0,o().K8)((()=>{const e=T.currentUser.id;return u().B2(a)&&a.user_id===e}),[T,a]),N=(0,s.useCallback)((async e=>{let s=!1;const n={...a};n.role=z,s=v?await v(e):await(0,A().o5)({oldPermissionItem:n,newRole:e,wasInherited:t,environment:T,store:r,sudoModeStore:p,location:h,fromPermissionWrapper:f}),s&&(null==I||I(e))}),[a,z,t,T,r,p,h,f,v,I]),R=(0,i().IS)((e=>({button:{color:e.text.secondary,fontSize:(0,k().kx)({environment:T})}})),[T]);return(0,_.jsx)(S().Ay,{role:z,table:g().ev,blockType:D,type:a.type,disabled:m,isUserPermission:P,onChange:N,onClick:b,onClose:y,onUpgradeButtonClick:x,upgradeButtonName:j,buttonPopupStore:w,buttonStyle:R.button,showPermissionOverrideWarning:t&&!e.selectFooter,isRemovableOverride:M,footer:e.selectFooter,roleItemOverrides:e.roleItemOverrides,from:"shareMenu",header:e.selectHeader})}function E(e){const{isInherited:t,permissionItem:a,store:r,from:g,isDisabled:p,sudoModeStore:h,location:f,fromPermissionWrapper:x,onUpgradeButtonClick:v,onChange:y,onClose:b,onOpenMenu:j,upgradeButtonName:w,buttonPopupStore:M,isRemovableOverride:C,onChangeSuccess:I}=e,T=(0,n().v3)(),z=(0,o().K8)((()=>{var e;const t=r.getModel(),s=null===(e=r.getParentStore())||void 0===e?void 0:e.getModel();return(0,c().tp)({record:t,parent:s,from:g,permissionItem:a})?(0,c().SK)({ancestors:d().Yn(r.pointer,r.getRecordModel),from:g}):a.role}),[g,a,r]),D=(0,o().K8)((()=>{const e=T.currentUser.id;return u().B2(a)&&a.user_id===e}),[T,a]),P=(0,s.useCallback)((async e=>{let s=!1;const n={...a};n.role=z,s=y?await y(e):await(0,A().o5)({oldPermissionItem:n,newRole:e,wasInherited:t,environment:T,store:r,sudoModeStore:h,location:f,fromPermissionWrapper:x}),s&&(null==I||I(e))}),[a,z,t,T,r,h,f,x,y,I]),N=(0,o().K8)((()=>{if("collection_property_permission"!==a.type)return;const e=r.getSchema();return(0,l().sq)({collectionSchema:e,permissionItem:a})?void 0:[{role:"none"}]}),[a,r]),R=(0,i().IS)((e=>({button:{color:e.text.secondary,fontSize:(0,k().kx)({environment:T})}})),[T]);return(0,_.jsx)(S().Ay,{role:z,table:m().Vl,blockType:void 0,type:a.type,disabled:p,isUserPermission:D,onChange:P,onClick:j,onClose:b,onUpgradeButtonClick:v,upgradeButtonName:w,buttonPopupStore:M,buttonStyle:R.button,showPermissionOverrideWarning:t&&!e.selectFooter,isRemovableOverride:C,footer:e.selectFooter,roleItemOverrides:e.roleItemOverrides,from:"shareMenu",header:e.selectHeader,availableRoleItems:N})}function O(e){const{store:t}=e,a=(0,n().v3)(),l=(0,h().tz)(),d=(0,o().K8)((()=>{if(t.table===g().ev)return(0,j().Ay)({store:t,fullyQualified:!1,pageVisitSource:r().y8.LinkInPage})}),[t]),c=(0,o().K8)((()=>(0,w().$R)(t)),[t]),u=(0,s.useCallback)((()=>{I().F2({environment:a,teamId:t.id,tab:M().p.Members,from:"permission_item"})}),[t.id,a]),m=(0,i().IS)((e=>({label:{lineHeight:1.4},linkBox:{display:"inline-flex",alignItems:"center",borderBottom:`0.5px solid ${f().Ay.mediumTextColor}`}})),[]);return(0,_.jsx)(b().A,{isSmall:!0,style:m.label,children:l.formatMessage(N.fromLinkBox,{linkBoxWithPageTitle:(0,_.jsx)(y().A,{inline:!0,href:d,onClick:c?u:void 0,innerStyle:m.linkBox,children:(0,_.jsx)(v().A,{store:t,useInvertedColors:!1})})})})}const U=s.memo(R)},97835:(e,t,a)=>{a.d(t,{x:()=>o});a(296540);var s=a(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"3.68 2.37 15.82 17.13",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M10 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242M7.676 6.441c0-.842.233-1.554.624-2.042.38-.473.937-.774 1.7-.774s1.32.301 1.7.774c.391.488.624 1.2.624 2.042s-.233 1.554-.624 2.041c-.38.473-.937.774-1.7.774s-1.32-.3-1.7-.774c-.391-.487-.624-1.2-.624-2.041M10 11.63c-2.7 0-5.101 1.315-6.12 3.305-.361.706-.199 1.421.23 1.923.412.48 1.06.767 1.74.767h5.845a4.6 4.6 0 0 1-.28-1.25H5.85c-.342 0-.634-.148-.79-.33-.138-.162-.172-.336-.067-.54.761-1.488 2.672-2.626 5.007-2.626.83 0 1.605.144 2.294.395.269-.364.59-.688.952-.96A7.9 7.9 0 0 0 10 11.63"}),(0,s.jsx)("path",{d:"M16 19.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7m2.594-3.469a.625.625 0 0 0-.625-.625h-1.375v-1.375a.625.625 0 0 0-1.25 0v1.375h-1.375a.625.625 0 0 0 0 1.25h1.375v1.375a.625.625 0 1 0 1.25 0v-1.375h1.375c.345 0 .625-.28.625-.625"})]})},o=(0,a(340498).wt)("inviteMember",n)},99756:(e,t,a)=>{a.d(t,{A:()=>d});var s=a(296540),n=()=>a(401497),o=()=>a(87043),i=a(474848);function r(e){let{type:t,isMobile:s,containerStyle:r,iconSize:d,...c}=e;const u=d??20,g=(0,n().IS)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"center",...(0,a(623275).iM)({theme:e,size:d??(s?o().Bj:o().Ev),useLargeBorderRadius:!0,useLightBackgroundColor:!0}),..."circle"===t&&{borderRadius:"100%"},...r}})),[r,s,t,d]);return(0,i.jsx)("div",{style:g.container,children:"function"===c.iconType?(0,i.jsx)(l,{iconFn:c.iconFn,iconStyle:c.iconStyle,innerIconSize:u}):"emoji"===c.iconType?(0,i.jsx)(a(56086).A,{char:c.emoji,size:u}):"recordIcon"===c.iconType?(0,i.jsx)(a(187820).B6,{icon:c.icon,disabled:!0,isEmptyPage:!1,size:u,defaultIcon:(0,a(658985).$)()}):c.element})}function l(e){let{iconFn:t,iconStyle:a,innerIconSize:s}=e;return t((0,n().IS)((e=>({icon:{width:s,height:s,fill:e.icon.secondary,...a}})),[a,s]).icon)}const d=s.memo(r)},101981:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(296540),n=()=>a(56366),o=a(474848);function i(e){const{resultStore:t,render:i,...r}=e,l=(0,a(75544).A)(r),d=(0,n().uB)(t,a(757695).Store.createClass(void 0));(0,s.useEffect)((()=>{d.setState(l);const t=e.reducer;"groups"===t.type&&"v2"===t.version&&"groups"===(null==l?void 0:l.type)&&"v2"===l.version&&e.collectionContextStore.groupsStore.setGroupBlockResults(t,l)}),[e.collectionContextStore.groupsStore,e.reducer,l,d]);const c=(0,n().K8)((()=>i?i(d):null),[i,d]);return(0,o.jsx)(o.Fragment,{children:c})}const r=s.memo(i)},112772:(e,t,a)=>{a.d(t,{o:()=>c});a(296540);var s=()=>a(56366),n=()=>a(401497),o=()=>a(987555),i=()=>a(959013),r=()=>a(898808),l=()=>a(566468),d=a(474848);function c(e){let{teamStore:t,iconSize:a=24,useThinTitle:c,showMemberCount:u,memberCountOverride:g}=e;const m=(0,n().IS)((e=>({icon:{height:a-4,width:a-4,color:e.icon.tertiary,fill:"currentColor"},hiddenTeamName:{color:e.text.tertiary}})),[a]),[p,h]=(0,s().K8)((()=>[null==t?void 0:t.getName(),null==t?void 0:t.getRawMembership().length]),[t]);return p?(0,d.jsx)(l().s7,{useThinTitle:c,icon:t?(0,d.jsx)(r().x,{disabled:!0,store:t,size:a}):void 0,title:p,byline:u&&void 0!==h?(0,d.jsx)(i().sA,{id:"baseTable.teamCell.memberCount",defaultMessage:"{numMembers, plural, one {# member} other {# members}}",values:{numMembers:g??h}}):null}):(0,d.jsx)(l().s7,{useThinTitle:c,icon:(0,o().T)(m.icon),title:(0,d.jsx)("span",{style:m.hiddenTeamName,children:(0,d.jsx)(i().sA,{id:"baseTable.teamCell.hiddenTeam",defaultMessage:"Hidden"})})})}},115240:(e,t,a)=>{a.d(t,{U:()=>o});a(296540);var s=a(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"4.12 2.37 15.02 16.77",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M6.25 2.375A2.125 2.125 0 0 0 4.125 4.5v11c0 1.174.951 2.125 2.125 2.125h4.923a4.8 4.8 0 0 1-.789-1.25H6.25a.875.875 0 0 1-.875-.875v-11c0-.483.392-.875.875-.875h7.5c.483 0 .875.392.875.875v5.252a5 5 0 0 1 1.25.132V4.5a2.125 2.125 0 0 0-2.125-2.125z"}),(0,s.jsx)("path",{d:"M7.25 5.2a.55.55 0 0 0 0 1.1h5.5a.55.55 0 0 0 0-1.1zM6.7 8.25a.55.55 0 0 1 .55-.55h5.5a.55.55 0 0 1 0 1.1h-5.5a.55.55 0 0 1-.55-.55m11 8.357a3.625 3.625 0 1 0-.893.878l1.223 1.427a.625.625 0 1 0 .94-.823zM12.376 14.5a2.375 2.375 0 1 1 4.75 0 2.375 2.375 0 0 1-4.75 0"})]})},o=(0,a(340498).wt)("docTextMagnifyingGlass",n)},118685:(e,t,a)=>{a.d(t,{f:()=>o,o:()=>n});a(898992),a(354520),a(672577),a(803949);var s=()=>a(534177);let n=function(e){return e.All="All",e.Partial="Partial",e.None="None",e}({});class o extends(()=>a(757695))().Store{getAllActionNames(){return(0,s().uv)(this.state.actionSelections)}getSelectedActionNames(){return this.getAllActionNames().filter((e=>this.state.actionSelections[e]))}hasActionNameSelected(){const e=this.getAllActionNames(),t=this.getSelectedActionNames();return t.length>0&&t.length!==e.length}updateSearchQuery(e){this.setState({...this.state,searchQuery:e})}toggleCategorySelection(e){const t=e.category;this.setState({...this.state,categoryToggleOpen:{...this.state.categoryToggleOpen,[t]:!this.state.categoryToggleOpen[t]}})}selectCategorySelection(e){const t=e.category,a=this.state.categorySelections[t],s=a===n.None||a===n.Partial?n.All:n.None,o=s===n.All,i={...this.state.actionSelections},r=this.state.renderOrder.find((e=>e.category===t));r&&(r.orderedActions.forEach((e=>{i[e]=o})),this.setState({...this.state,actionSelections:i,categorySelections:{...this.state.categorySelections,[r.category]:s}}))}selectActionName(e,t){const a=this.state.actionSelections[e],s={...this.state.actionSelections,[e]:!a},o=t.orderedActions.filter((e=>s[e])).length,i=0===o?n.None:o===t.orderedActions.length?n.All:n.Partial;this.setState({...this.state,actionSelections:s,categorySelections:{...this.state.categorySelections,[t.category]:i}})}clearAllSelections(){const e=this.getBulkUpdateNextActionSelectionState((0,s().uv)(this.state.actionSelections),!1),t=this.getBulkUpdateNextCategorySelectionState((0,s().uv)(this.state.categorySelections),n.None);this.setState({...this.state,actionSelections:e,categorySelections:t})}getBulkUpdateNextCategorySelectionState(e,t){const a={...this.state.categorySelections};return e.forEach((e=>{a[e]=t})),a}getBulkUpdateNextActionSelectionState(e,t){const a={...this.state.actionSelections};return e.forEach((e=>{a[e]=t})),a}}},135851:(e,t,a)=>{a.d(t,{e:()=>s});const s={rightPaddingPx:64,extendTableToFullWidthOffsetPx:64}},139125:(e,t,a)=>{a.d(t,{Ay:()=>y,Ew:()=>S,qh:()=>j});var s=a(296540),n=()=>a(401497),o=()=>a(634201),i=()=>a(66913),r=()=>a(116652),l=()=>a(689094),d=()=>a(959013),c=()=>a(512062),u=()=>a(962730),g=()=>a(704152),m=()=>a(807683),p=()=>a(331542),h=()=>a(360083),f=()=>a(859428),x=a(474848);const v=18;function y(e){let{size:t,style:a,avatarType:o,isOffline:r,disabled:l,loading:m,disabledTooltipMessage:p,onUploadProfilePhoto:h,onRemoveProfilePhoto:y}=e;const[S,j]=(0,s.useState)(!1),w=(0,n().IS)((e=>{const a=(t??v)/2,s=Math.ceil(Math.sqrt(a/2)-8);return(0,n().$4)({avatarButton:{position:"relative",padding:0,border:0,background:"none",borderRadius:"50%"},removeIconButton:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:s+2,right:s+2,height:16,width:16,padding:0,borderRadius:"50%",border:"none",background:"light"===e.mode?e.contentBackground:e.tooltipBackground,boxShadow:e.shadowSM,transition:"background 0.2s ease"},removeIcon:{fill:"light"===e.mode?c().M.light.gray[400]:c().M.dark.gray[800],height:10,width:10},buttonPressed:{borderRadius:"50%",background:"light"===e.mode?c().M.light.gray[200]:c().M.dark.gray[600]},buttonHovered:{borderRadius:"50%",background:"light"===e.mode?c().M.light.gray[100]:c().M.dark.gray[500]}})}),[t]),A=(0,s.useCallback)((()=>S?(0,x.jsx)(d().sA,{id:"editableUserAvatar.profilePhoto.remove",defaultMessage:"Remove photo"}):"photo"===o.type?(0,x.jsx)(d().sA,{id:"editableUserAvatar.profilePhoto.replace",defaultMessage:"Replace photo"}):(0,x.jsx)(d().sA,{id:"editableUserAvatar.profilePhoto.upload",defaultMessage:"Upload photo"})),[o.type,S]);return m?(0,x.jsx)(b,{size:t??v,isOffline:r,avatarType:o,loading:m}):l?(0,x.jsx)(f().A,{disableTooltip:!p,renderTooltip:()=>p,placement:u().W.Bottom,alignment:u().C.Center,render:e=>(0,x.jsx)("div",{...e,children:(0,x.jsx)(b,{size:t??v,isOffline:r,avatarType:o})})}):(0,x.jsx)(f().A,{renderTooltip:A,placement:u().W.Bottom,alignment:u().C.Center,render:(e,s)=>(0,x.jsxs)(g().A,{style:{...w.avatarButton,...a},pressedStyle:w.buttonPressed,hoveredStyle:w.buttonHovered,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:h,children:[(0,x.jsx)(b,{size:t??v,isOffline:r,avatarType:o}),s&&"photo"===o.type&&(0,x.jsx)(g().A,{style:w.removeIconButton,pressedStyle:w.buttonPressed,hoveredStyle:w.buttonHovered,onClick:e=>{y(),e.stopPropagation()},onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:(0,i().V)(w.removeIcon)})]})})}function b(e){let{size:t,isOffline:a,loading:o,avatarType:i}=e;const d=(0,n().IS)((e=>(0,n().$4)({avatarWrapStyle:{background:e.buttonHoveredBackground,borderRadius:"100%",boxShadow:"none",..."light"===e.mode?{border:`1px solid ${c().M.light.gray[100]}`}:{}},avatarStyle:{borderRadius:"100%",width:t,height:t,maxWidth:"100%",maxHeight:"100%",display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",WebkitUserSelect:"none",opacity:a?.3:1},avatarIcon:{width:Math.ceil(.6*t),height:Math.ceil(.6*t),color:e.icon.secondary},imageBox:{width:"100%",height:"100%",borderRadius:"100%"},initialStyle:{boxSizing:"content-box",border:"none",borderRadius:"100%",width:t-2,height:t-2,lineHeight:t-2+"px",overflow:"hidden",textAlign:"center",fontSize:Math.max(t*(14/32),10),userSelect:"none",WebkitUserSelect:"none",color:e.icon.primary,opacity:a?.3:1},suspendedUserStyle:{boxSizing:"content-box",borderRadius:"100%",width:t-2,height:t-2,overflow:"hidden",background:e.suspendedUIUserAvatarBackground,userSelect:"none",WebkitUserSelect:"none",color:e.text.primary,opacity:a?.3:1,display:"flex",justifyContent:"center",alignItems:"center"},suspendedUserIconStyle:{width:t-2,height:t-2,color:e.icon.tertiary}})),[t,a]),u=(0,s.useMemo)((()=>o?(0,x.jsx)(p().A,{}):"photo"===i.type?(0,x.jsx)(h().A,{stripGoogleIconQuery:!0,url:i.profilePhoto,isAuthenticated:!1,width:t||v,render:(e,t)=>(0,x.jsx)(m().Ay,{src:t,style:d.imageBox})}):"initial"===i.type?(0,x.jsx)("div",{style:d.initialStyle,children:i.firstUpperCasedGrapheme}):"icon"===i.type?(0,l().W)(d.avatarIcon):"suspended"===i.type?(0,x.jsx)("div",{style:d.suspendedUserStyle,children:(0,r().o)(d.suspendedUserIconStyle)}):void 0),[i,t,o,d]);return(0,x.jsx)("div",{style:d.avatarWrapStyle,children:(0,x.jsx)("div",{style:d.avatarStyle,children:u})})}function S(e,t){if(!e.isDefined())return{type:"icon"};if(e.getIsSuspended())return{type:"suspended"};return j({profilePhoto:e.getProfilePhoto(),name:e.getFullName(t),email:e.getEmail()})}function j(e){const{profilePhoto:t,name:a,email:s}=e;if(t)return{type:"photo",profilePhoto:t};const n=o().PE(a)[0]||o().PE(s)[0];return n?{type:"initial",firstUpperCasedGrapheme:n.toUpperCase()}:{type:"icon"}}},142448:(e,t,a)=>{a.d(t,{Gz:()=>v,Qp:()=>b,iP:()=>f,tR:()=>x});a(581454);var s=a(296540),n=()=>a(56366),o=()=>a(401497),i=()=>a(591779),r=()=>a(959013),l=()=>a(962730),d=()=>a(756279),c=()=>a(710149),u=()=>a(554509),g=()=>a(2143),m=()=>a(859428),p=()=>a(47095),h=a(474848);const f=4,x=24,v=18,y=10;function b(e){const{avatars:t,totalCount:a,avatarLimit:x,renderOverflowTooltip:v,isLightBackground:b,avatarStyles:S,isLoading:j}=e,w=(0,p().Z)(),A=(0,o().IS)((e=>({bottom:{display:"flex"},userAvatarContainer:{display:"flex",flexDirection:"row",isolation:"isolate",alignItems:"center",cursor:"default"},hiddenAvatarCount:{display:"flex",marginLeft:12,alignItems:"center"},scroller:{maxWidth:250,maxHeight:300,padding:0}})),[]),{pinTooltip:M,unpinTooltip:C,setImmediateState:I,isHovering:T}=function(){const[e,t]=(0,s.useState)(!1),a=(0,i().lW)(e,400,Object.is),[n,o]=(0,s.useState)(void 0),r=n||a,l=(0,s.useCallback)((()=>o(r)),[r]),d=(0,s.useCallback)((()=>{o(void 0)}),[]);return{pinTooltip:l,unpinTooltip:d,setImmediateState:t,isHovering:!1===e&&!0===r}}(),k=(0,n().K8)((()=>{let e=t;t.length>(x||f)&&(e=t.slice(0,x||f));for(const t of e)if(!t.renderAvatar)return[];return e}),[x,t]),_=(0,s.useCallback)((e=>({marginRight:e+1===k.length?0:-y,...S})),[S,k.length]);if(j)return(0,h.jsxs)("div",{style:A.bottom,children:[(0,h.jsx)("div",{style:A.userAvatarContainer,children:new Array(f).fill(null).map(((e,t)=>(0,h.jsx)(c().A,{style:{...w.avatarShimmer,..._(t)}},t)))}),(0,h.jsx)("div",{style:A.hiddenAvatarCount,children:(0,h.jsx)(c().A,{style:w.shortShimmer})})]});const z=x||f,D=(a||t.length)-z;return(0,h.jsxs)("div",{style:A.bottom,children:[(0,h.jsx)("div",{style:A.userAvatarContainer,children:k.map(((e,t)=>(0,h.jsx)(m().A,{isLightBackground:b,disableTooltip:!e.renderTooltip,delayThreshold:0,renderTooltip:e.renderTooltip??(()=>{}),placement:l().W.Bottom,alignment:l().C.Start,render:a=>(0,h.jsx)("div",{style:{zIndex:z-t,..._(t)},...a,children:e.renderAvatar()})},`avatar-${t}`)))}),D>0&&(0,h.jsx)(m().A,{disableTooltip:!v,placement:l().W.Bottom,alignment:l().C.Start,style:{paddingRight:0},forceVisibleState:T||void 0,delayThreshold:0,renderTooltip:e=>v?(0,h.jsx)(g().H,{...e,onMouseEnter:M,onMouseLeave:C,type:d().A.Y,style:A.scroller,children:v(e)}):void 0,allowHover:!0,render:e=>(0,h.jsx)("div",{style:A.hiddenAvatarCount,...e,onMouseEnter:t=>{var a;I(!0),null===(a=e.onMouseEnter)||void 0===a||a.call(e,t)},onMouseLeave:t=>{var a;I(!1),null===(a=e.onMouseLeave)||void 0===a||a.call(e,t)},children:(0,h.jsx)(u().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,h.jsx)(r().sA,{defaultMessage:"+{numHiddenAvatars}",id:"settingsConsole.general.numHiddenAvatars",values:{numHiddenAvatars:D.toLocaleString()}})})}),isLightBackground:b})]})}},144707:(e,t,a)=>{a.d(t,{u:()=>w});a(898992),a(672577),a(581454),a(296540);var s=()=>a(484714),n=()=>a(56366),o=()=>a(401497),i=()=>a(668725),r=()=>a(742117),l=()=>a(760217),d=()=>a(406699),c=()=>a(928600),u=()=>a(939740),g=()=>a(89924),m=()=>a(859428),p=()=>a(722872),h=()=>a(553965),f=()=>a(962730),x=()=>a(700250),v=()=>a(645109),y=()=>a(920769),b=()=>a(43450),S=()=>a(209592),j=a(474848);function w(e){let{currentAccessLevel:t,currentIsDefault:a=!1,onChange:w,teamStore:A,disabledWithRightChevron:M=!1,style:C,parentSpaceStore:I}=e;const{device:T}=(0,s().v3)(),k=(0,b().R)(A),_=(0,y().O)(),z=(0,o().IS)((e=>({chevron:{width:12,marginLeft:3,marginRight:3,fill:e.icon.tertiary},selectedButton:{width:"100%",margin:0,paddingTop:4,paddingBottom:4,border:`1px solid ${e.outlineButtonBorder}`,...C},icon:{alignSelf:"center",marginTop:0}})),[C]),D=(0,n().K8)((()=>(null==A?void 0:A.isDefault())??a),[A,a]),P=D?"default":t,N=(0,S().Z)({teamStore:A,onChange:w,isDefault:D,parentSpaceStore:I});return(0,j.jsx)(d().Ay,{popupType:T.isMobile?d().z7.SlideUp:d().z7.Popup,renderOrigin:e=>{const t=N.find((e=>e.key===P));if(!t)return null;const a=t.disableAllOptionsTooltip,s=M||Boolean(a)||Boolean(A)&&!k;return(0,j.jsx)(m().A,{placement:f().W.Bottom,alignment:f().C.Start,disableTooltip:!a||!k,renderTooltip:()=>a,style:{width:350},textWrap:!0,render:a=>(0,j.jsx)(l().A,{...(0,h().A)(e,a),title:t.title,caption:t.caption,icon:t.icon({fill:t.iconColor}),desktopIconStyle:z.icon,disabled:s,right:M?(0,r().V)(z.chevron):s?void 0:(0,i().b)(z.chevron),focused:!1,shouldWrapCaption:!0,buttonStyle:z.selectedButton})})},placementToOrigin:x().UV.Bottom,alignmentToOrigin:x().MY.Start,sameWidthAsOrigin:!0,render:e=>{const t=[{key:"access levels",render:e=>(0,j.jsx)(g().A,{...e,topBorder:0!==e.index}),items:N.map((t=>{const a=t.key===P;return{key:t.key,render:e=>(0,j.jsx)(m().A,{placement:f().W.Top,disableTooltip:!t.tooltip,renderTooltip:()=>t.tooltip,render:s=>(0,j.jsx)(l().A,{...(0,h().A)(e,s),title:t.title,caption:t.caption,icon:t.icon({fill:t.iconColor}),desktopIconStyle:z.icon,isChecked:a,disabled:t.disabled,shouldWrapCaption:!0})}),action:()=>{t.onSelect(),e.close()}}}))},..._?[{key:"try private teamspaces",render:()=>(0,j.jsx)(v().c,{openedFrom:"business_trial_private_teamspaces_upsell",styleOverrides:{margin:"4px 12px 12px 12px"}}),items:[]}]:[]];return(0,j.jsx)(c().A,{menuType:p().gu.Popup,children:(0,j.jsx)(u().Ay,{type:u().Oh.Vertical,initialFocus:void 0,sections:t})})}})}},174517:(e,t,a)=>{a.d(t,{$:()=>w,p:()=>j});var s=a(296540),n=()=>a(484714),o=()=>a(401497),i=()=>a(959013),r=()=>a(449506),l=()=>a(901389),d=()=>a(436572),c=()=>a(2220),u=()=>a(898486),g=()=>a(364280),m=()=>a(7674),p=()=>a(554509),h=()=>a(107683),f=()=>a(437594),x=()=>a(625319),v=()=>a(602105),y=()=>a(2609),b=()=>a(688437),S=a(474848);function j(e){let{refetchPendingDomains:t,onDismiss:a,domainVerification:o,regenerateCode:g,organizationId:f}=e;const v=(0,n().v3)(),j=(0,i().tz)(),[M,C]=(0,s.useState)(!1),I=(0,b().x5)(),{refreshOrganization:T}=(0,s.useContext)(x().D),k=(0,s.useCallback)((async()=>{if(M)return;C(!0);const e=await r().callApi({eventName:"verifyDomain",environment:v,data:{verificationId:o.id}});"success"===e.type?(C(!1),t(),T(),d().D6({label:(0,S.jsx)(p().D,{styleName:"UIRegular-14px/Regular",children:(0,S.jsx)(i().sA,{id:"organizationEmailDomainsTable.toastMessage.verifyDomain.success",defaultMessage:"Successfully verified <b>{domain}</b>",values:{domain:o.domain,b:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,S.jsx)("b",{children:t})}}})})}),a(),(0,c().u)({environment:v,event:{eventName:"org_console_general_create_entity",eventProperties:{entity:"verified_domain",organization_id:f}}})):(l().f1((0,u().Hu)(j,e)),C(!1))}),[v,j,M,C,t,T,o.id,o.domain,a,f]);return(0,S.jsx)(h().s,{isOpen:!0,onDismiss:a,render:e=>{let{sizeRange:t}=e;return(0,S.jsx)(m().tf,{showDismissButton:!1,sizeRange:t,header:(0,S.jsx)(b().Ws,{}),footer:(0,S.jsx)(y().jl,{primaryText:(0,S.jsx)(i().sA,{...A.verifyButton}),primaryAction:k,primaryDisabled:"invalid"===o.type,secondaryText:(0,S.jsx)(i().sA,{...A.cancelButton}),secondaryAction:a,isLoading:M}),children:(0,S.jsx)("div",{style:I.content,children:(0,S.jsx)(w,{domainVerification:o,regenerateCode:g})})})}})}function w(e){let{domainVerification:t,regenerateCode:a}=e;const s=(0,o().IS)((e=>({instructionsContainer:{padding:16,borderRadius:v().V.medium,background:e.cardBackground,display:"flex",flexDirection:"column",gap:16},list:{color:e.text.secondary,fontSize:12,lineHeight:"16px"}})),[]);return(0,S.jsxs)(g().VP,{gap:y().gA,children:[(0,S.jsxs)(g().VP,{gap:12,children:[(0,S.jsx)(f().bi,{domainVerification:t,regenerateCode:a}),(0,S.jsx)(f().KS,{domainVerification:t})]}),(0,S.jsxs)("div",{style:s.instructionsContainer,children:[(0,S.jsx)(p().D,{styleName:"Body-12px/Medium",children:(0,S.jsx)(i().sA,{...A.instructionsHeader})}),(0,S.jsx)(f().vr,{listStyles:s.list})]})]})}const A=(0,i().YK)({verifyButton:{id:"orgConsole.emailDomains.verifyEmailDomainModal.button.verify",defaultMessage:"Verify domain"},cancelButton:{id:"orgConsole.emailDomains.verifyEmailDomainModal.button.cancel",defaultMessage:"Cancel"},instructionsHeader:{id:"orgConsole.emailDomains.verifyEmailDomainModal.instuctionsHeader",defaultMessage:"Instructions to verify your domain"}})},175458:(e,t,a)=>{a.d(t,{a:()=>u});a(296540);var s=()=>a(401497),n=()=>a(416845),o=()=>a(959013),i=()=>a(381349),r=()=>a(284371),l=()=>a(298697),d=()=>a(125565),c=a(474848);function u(e){let{icon:t,iconStyles:a,textStyles:u,style:g,title:m,byline:p,loading:h,error:f}=e;const x=function(e,t,a){return(0,s().IS)((s=>({title:{fontWeight:r().Wy.medium,fontSize:16,maxWidth:"100%"},byline:{fontSize:r().J.UISmall.desktop,marginTop:4},textContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",overflow:"hidden",...t},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:8},icon:{height:28,width:28,color:s.text.tertiary,fill:"currentcolor",...e},container:{height:"100%",flex:1,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",border:`1px solid ${s.outlineButtonBorder}`,borderRadius:4,padding:12,gap:8,...a},loadingTitle:{display:"block",width:"40%"},loadingByline:{display:"block",width:"60%",marginTop:8,marginBottom:8},errorTitle:{textAlign:"center",color:i().Ay.red}})),[e,t,a])}(a,u,g);return h?(0,c.jsx)("div",{style:x.container,children:(0,c.jsxs)("div",{style:x.textContainer,children:[(0,c.jsx)("div",{style:x.loadingTitle,children:(0,c.jsx)(l().A,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}),p?(0,c.jsx)("div",{style:x.loadingByline,children:(0,c.jsx)(l().A,{paragraphs:[{lineHeight:14,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}):null]})}):f?(0,c.jsx)("div",{style:x.container,children:(0,c.jsx)("div",{style:x.titleContainer,children:(0,c.jsx)(d().A,{style:x.errorTitle,children:(0,n().op4)(f)?f.message:(0,c.jsx)(o().sA,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:(0,c.jsx)("br",{})}})})})}):(0,c.jsxs)("div",{style:x.container,children:[t?t(x.icon):null,(0,c.jsxs)("div",{style:x.textContainer,children:[(0,c.jsx)(d().A,{style:x.title,showTooltipWhenTruncated:!0,children:m}),p?(0,c.jsx)(d().A,{style:x.byline,isMultiline:!0,children:p}):null]})]})}},182392:(e,t,a)=>{a.d(t,{i:()=>d,y:()=>l});var s=()=>a(734459),n=()=>a(435009),o=()=>a(2220),i=()=>a(38337),r=()=>a(188409);function l(e,t,a){n().oo({environment:e,url:(0,s().re)({organizationId:t,tabRoute:a})})}function d(e){const{environment:t,from:a,organizationId:l,tabRoute:d,properties:c,queryParams:u}=e;function g(e,t){const a=null==e?void 0:e.name,s=null==t?void 0:t.subtab;return a?s?`${a}/${s}`:a:void 0}l&&(0,o().u)({environment:t,event:{eventName:"org_console_navigate_to_page",eventProperties:{organizationId:l,route:g(d,c),from:g(null==a?void 0:a.tabRoute,null==a?void 0:a.properties),spaceId:null==u?void 0:u[r().ge]}}});const m=document.getElementById(i().g5j);m&&m.scrollTo({top:0}),n().oo({environment:t,url:(0,s().re)({organizationId:l,tabRoute:d,properties:c,queryParams:u})})}},188213:(e,t,a)=>{a.d(t,{A:()=>l});a(296540);var s=()=>a(532940),n=()=>a(959013),o=()=>a(901389),i=()=>a(125565),r=a(474848);async function l(e){return o().Gh({message:(0,r.jsx)(i().A,{style:o().xh.title,children:(0,r.jsx)(n().sA,{id:"organizationSecuritySettings.discardChanges.confirmation.message",defaultMessage:"Discard unsaved changes?"})}),description:(0,r.jsx)(i().A,{isMultiline:!0,isSecondaryColor:!0,children:(0,r.jsx)(n().sA,{id:"organizationSecuritySettings.discardChanges.confirmation.description",defaultMessage:"Once discarded, changes cannot be recovered."})}),acceptLabel:(0,r.jsx)(n().sA,{id:"organizationSecuritySettings.discardChanges.confirmation.acceptLabel",defaultMessage:"Discard"}),cancelLabel:(0,r.jsx)(n().sA,{id:"organizationSecuritySettings.discardChanges.confirmation.cancelLabel",defaultMessage:"Cancel"}),icon:(0,s().exclamationMarkTriangleIcon)({width:24,height:24,fill:e.text.uiRedPrimary})})}},188409:(e,t,a)=>{a.d(t,{P$:()=>Qf,N9:()=>Yf,HG:()=>$f,ge:()=>Xf,XX:()=>ox,uy:()=>ex,eu:()=>tx,Tc:()=>ix,aZ:()=>nx,sE:()=>Zf,KJ:()=>Jf,I:()=>ax,KX:()=>sx});var s=a(296540),n=()=>a(820579),o=()=>a(340498),i=a(474848);const r=(0,o().wt)("briefcaseOutline",{viewBox:"0 0 20 20",svg:(0,i.jsx)("g",{children:(0,i.jsx)("path",{d:"M2.788 9.955V8.622q1.56.636 3.377.95 1.818.308 3.828.308 2.017 0 3.835-.308a16.5 16.5 0 0 0 3.377-.943l.007 1.326q-1.62.575-3.445.861a24 24 0 0 1-3.774.287q-1.948 0-3.773-.287a19 19 0 0 1-3.432-.86Zm6.139 2.42q-.828 0-.827-.8V10.4h3.787v1.176q0 .8-.827.8H8.927ZM4.12 16.866q-1.087 0-1.647-.553-.56-.548-.56-1.634V7.986q0-1.094.56-1.64.56-.547 1.647-.547h11.751q1.094 0 1.648.547.56.546.56 1.64v6.693q0 1.087-.56 1.633-.555.554-1.648.554H4.122Zm.055-1.292h11.641q.445 0 .677-.239.24-.232.24-.697v-6.61q0-.473-.24-.705-.232-.232-.677-.232H4.176q-.444 0-.684.232-.232.233-.232.704v6.61q0 .465.232.698.24.24.684.24ZM6.41 6.353V5.17q0-.964.533-1.436.534-.471 1.45-.471h3.192q.971 0 1.476.471.513.472.513 1.436v1.176H12.33v-1.17q0-.368-.205-.567-.199-.198-.574-.198h-3.11q-.377 0-.582.198-.204.2-.205.568v1.176z"})})});var l=()=>a(536583),d=()=>a(212727),c=()=>a(90907),u=()=>a(835607),g=()=>a(253673);const m=(0,o().wt)("personTwoCircle",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M9.993 17.126a6.8 6.8 0 0 1-2.727-.554 7.1 7.1 0 0 1-2.256-1.524 7.3 7.3 0 0 1-1.525-2.256 6.8 6.8 0 0 1-.553-2.727q0-1.45.553-2.728a7.24 7.24 0 0 1 3.773-3.78 6.8 6.8 0 0 1 2.728-.554q1.456 0 2.735.554t2.256 1.53a7.1 7.1 0 0 1 1.53 2.25q.555 1.278.554 2.728 0 1.449-.553 2.727a7.22 7.22 0 0 1-3.787 3.78 6.8 6.8 0 0 1-2.728.554m0-1.395q1.184 0 2.208-.437a5.7 5.7 0 0 0 1.805-1.217 5.7 5.7 0 0 0 1.217-1.804q.437-1.026.437-2.208a5.55 5.55 0 0 0-.437-2.202 5.66 5.66 0 0 0-3.029-3.028 5.6 5.6 0 0 0-2.208-.438q-1.176 0-2.208.438A5.6 5.6 0 0 0 5.98 6.052a5.7 5.7 0 0 0-1.21 1.811 5.55 5.55 0 0 0-.437 2.202q0 1.182.438 2.208a5.7 5.7 0 0 0 1.21 1.804 5.6 5.6 0 0 0 4.013 1.654Zm-.321-3q-.396 0-.56-.117a.41.41 0 0 1-.158-.341q0-.417.335-.875.335-.459.95-.78t1.463-.321q.84 0 1.45.321.615.321.943.78.335.458.335.875a.41.41 0 0 1-.157.341q-.158.116-.561.116zm2.03-3.015q-.533 0-.923-.417a1.44 1.44 0 0 1-.39-1.019q0-.594.39-.998a1.234 1.234 0 0 1 1.833-.007q.39.397.389.998 0 .609-.39 1.026-.382.417-.909.417m-5.55 3.014q-.322 0-.459-.13-.13-.129-.13-.369 0-.437.294-.888.294-.452.828-.752.54-.308 1.264-.308a2.54 2.54 0 0 1 1.408.41q-.362.28-.594.663a2 2 0 0 0-.287.76q-.055.368.116.614zm1.797-2.946q-.458 0-.8-.362a1.3 1.3 0 0 1-.341-.889q0-.513.341-.868a1.076 1.076 0 0 1 1.593-.007q.342.35.342.868 0 .534-.342.896a1.05 1.05 0 0 1-.793.362"})});var p=()=>a(737693),h=()=>a(959013),f=(a(898992),a(354520),a(581454),()=>a(484714)),x=()=>a(56366),v=()=>a(401497),y=()=>a(798880),b=()=>a(322769),S=()=>a(449506),j=()=>a(901389),w=()=>a(2220),A=()=>a(898486),M=()=>a(972435),C=()=>a(630116),I=()=>a(554509),T=()=>a(538739),k=()=>a(511303),_=()=>a(625319),z=()=>a(725036),D=()=>a(443573),P=()=>a(710149),N=()=>a(187820),R=()=>a(47095),B=()=>a(602105),L=()=>a(284371),E=()=>a(623580),O=()=>a(7674),U=()=>a(864943),F=()=>a(204063),H=()=>a(107683),V=()=>a(859428),W=()=>a(101919),q=()=>a(2609);const G=(0,h().YK)({namePlaceholder:{defaultMessage:"Display name",id:"organization.general.textInput.name.placeholder"},emailPlaceholder:{defaultMessage:"Email",id:"organization.general.textInput.email.placeholder"},descriptionPlaceholder:{defaultMessage:"Description",id:"organization.general.textInput.description.placeholder"}});function K(e){let{editButtonText:t,isEditing:a,setIsEditing:s,onCancel:n,onSave:o,disabled:r,disabledTooltipText:l,saveButtonText:d}=e;const c=(0,v().IS)((e=>({container:{marginLeft:"auto",display:"flex",gap:8},cancelButton:{fontSize:L().J.UIRegular.desktop,fontWeight:L().Wy.medium}})),[]);return!1===a?(0,i.jsx)("div",{style:c.container,children:(0,i.jsx)(V().A,{disableTooltip:!r||!l,renderTooltip:()=>l,render:e=>(0,i.jsx)(U().A,{style:{marginLeft:"auto"},size:"sm",onClick:()=>s(!0),disabled:r,disabledFeedback:r,...e,children:t})})}):(0,i.jsxs)("div",{style:c.container,children:[(0,i.jsx)(U().A,{onClick:n,size:"md",style:{...c.cancelButton},disabled:r,disabledFeedback:r,children:(0,i.jsx)(h().sA,{id:"organization.general.cancel.button",defaultMessage:"Cancel"})}),(0,i.jsx)(F().A,{onClick:o,disabled:r,children:d??(0,i.jsx)(h().sA,{id:"organization.general.save.button",defaultMessage:"Save"})})]})}function Y(e){const{title:t,byline:a,icon:n,onSave:o,onNameChange:r,onDescriptionChange:l,onEmailChange:d,onDismiss:c,disabled:u,disabledTooltipText:g,bylineWidthOverride:m}=e,p=(0,h().tz)(),[f,x]=(0,s.useState)(!1),[y,b]=(0,s.useState)(e.name),[S,j]=(0,s.useState)(e.email),[w,A]=(0,s.useState)(e.description);(0,s.useEffect)((()=>{r(y)}),[r,y]),(0,s.useEffect)((()=>{S&&(null==d||d(S))}),[d,S]),(0,s.useEffect)((()=>{null==l||l(w)}),[l,w]),(0,s.useEffect)((()=>{b(e.name)}),[e.name]),(0,s.useEffect)((()=>{j(e.email)}),[e.email]),(0,s.useEffect)((()=>{A(e.description)}),[e.description]);const M=function(e){return(0,v().IS)((t=>({container:{marginLeft:"auto",display:"flex",gap:8,opacity:e?.3:1},icon:{height:32,width:32,fill:t.icon.secondary},content:{display:"flex",flexDirection:"column",gap:q().gA,width:"100%"},inputRow:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},input:{padding:"6px 4px 6px 10px",margin:"0 auto 2px",width:"100%",background:t.modalBackground}})),[e])}(u);function C(){x(!1),c()}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V().A,{disableTooltip:!u||!g,renderTooltip:()=>g,render:e=>(0,i.jsx)("div",{style:M.container,children:(0,i.jsx)(U().A,{size:"md",onClick:()=>x(!0),...e,disabled:u,children:(0,i.jsx)(h().sA,{id:"organization.general.editProfile.button",defaultMessage:"Edit details"})})})}),f?(0,i.jsx)(H().s,{isOpen:!0,onDismiss:C,areaConstraint:{width:{type:"min",length:q().NF},height:{type:"min",length:300}},render:s=>{let{sizeRange:r}=s;return(0,i.jsx)(O().tf,{gap:q().gA,showDismissButton:!1,sizeRange:r,header:(0,i.jsx)(q().rQ,{icon:n(M.icon),title:t,byline:a,bylineWidthOverride:m}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"organization.general.editDetailsModal.button.saveChanges",defaultMessage:"Save changes"}),primaryAction:async()=>{await o(),C()},primaryDisabled:!1,secondaryText:(0,i.jsx)(h().sA,{id:"organization.general.editDetailsModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:C}),children:(0,i.jsxs)("div",{style:M.content,children:[(0,i.jsxs)("div",{style:M.inputRow,children:[(0,i.jsx)(W().A,{children:(0,i.jsx)(h().sA,{id:"organization.general.editDetailsModal.details.nameLabel",defaultMessage:"Name"})}),(0,i.jsx)(E().A,{style:M.input,value:y,placeholder:p.formatMessage(G.namePlaceholder),onChange:e=>{b(e.target.value)}})]}),e.description||l?(0,i.jsxs)("div",{style:M.inputRow,children:[(0,i.jsx)(W().A,{children:(0,i.jsx)(h().sA,{id:"organization.general.editDetailsModal.details.descriptionLabel",defaultMessage:"Description"})}),(0,i.jsx)(E().A,{style:M.input,value:w,textarea:!0,autosizeMinHeight:100,autosizeMaxHeight:600,placeholder:p.formatMessage(G.descriptionPlaceholder),onChange:e=>{A(e.target.value)}})]}):null,e.email?(0,i.jsxs)("div",{style:M.inputRow,children:[(0,i.jsx)(W().A,{children:(0,i.jsx)(h().sA,{id:"organization.general.editDetailsModal.details.emailLabel",defaultMessage:"Email"})}),(0,i.jsx)(E().A,{style:M.input,value:S,placeholder:p.formatMessage(G.emailPlaceholder),onChange:e=>{j(e.target.value)}})]}):null]})})}}):null]})}function Q(e){const{title:t,byline:a,icon:s,onSave:n,onCancel:o,onIconChange:r,onNameChange:l,onDescriptionChange:d,localIconWithPointer:c,entityName:u,entityDescription:g,entityDescriptionText:m,disabled:h,disabledTooltipText:f,bylineWidthOverride:x,loading:y}=e,b=(0,v().IS)((()=>({container:{display:"flex",gap:16,flexDirection:"column",marginBottom:36},profileContainer:{display:"flex"},metadataContainer:{gap:10,display:"flex",flexDirection:"column"},icon:{borderRadius:B().V.large,marginTop:-88},defaultIcon:{padding:20,backgroundColor:"rgba(220, 220, 220, 0.2)",borderRadius:B().V.large}})),[]),{longTallShimmer:S}=(0,R().Z)();return(0,i.jsxs)("div",{style:b.container,children:[(0,i.jsx)(N().B6,{disabled:!0,bucket:"public",icon:c,defaultIcon:(0,p().V)(b.defaultIcon),isEmptyPage:!1,size:80,onChange:r,style:b.icon}),(0,i.jsxs)("div",{style:b.profileContainer,children:[(0,i.jsxs)("div",{style:b.metadataContainer,children:[y?(0,i.jsx)(P().A,{style:S}):(0,i.jsx)(I().D,{styleName:"UITitle-26px/Bold",children:u}),g]}),(0,i.jsx)(Y,{title:t,byline:a,icon:s,name:u,description:m,onSave:n,onNameChange:l,onDescriptionChange:d,onDismiss:o,disabled:h,disabledTooltipText:f,bylineWidthOverride:x})]})]})}function $(){const e=(0,v().IS)((e=>({topRectangle:{width:"100%",height:100,backgroundColor:"light"===e.mode?"rgba(252, 252, 252, 1)":"rgba(35,35,35,1)"}})),[]);return(0,i.jsx)("div",{style:e.topRectangle})}var X=()=>a(817863);function Z(e){let{children:t}=e;const a=(0,v().IS)((()=>({container:{width:"100%",padding:48}})),[]);return(0,i.jsx)("div",{style:a.container,children:t})}var J=()=>a(721672),ee=()=>a(626466),te=()=>a(493823),ae=()=>a(364280);function se(e){let{title:t,content:a}=e;const s=(0,v().IS)((()=>({container:{margin:"40px auto"},content:{marginTop:16,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}})),[]);return(0,i.jsxs)("div",{style:s.container,children:[(0,i.jsx)(I().D,{styleName:"Heading-17px/Semibold",as:"h2",children:t}),(0,i.jsx)("div",{style:s.content,children:a})]})}function ne(e){let{title:t,badge:a,byline:s,content:n,rightContent:o,onClick:r,disabled:l,...d}=e;const c=(0,v().IS)((e=>({container:{margin:"6px auto",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:12,alignItems:"center",justifyContent:"space-between",width:"100%",height:"fit-content",padding:"12px 16px",borderRadius:8,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary,boxShadow:B().v},containerDark:{background:e.palette.translucentGray[30],borderColor:e.stroke.primary},left:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",gap:6,flex:"1 1 200px"},rightContent:{display:"flex",flexDirection:"row",flexShrink:0,justifyContent:"center",alignItems:"center",gap:12},title:{margin:0,padding:0,textWrap:"wrap"},secondaryText:{margin:0,padding:0,textWrap:"wrap"},content:{padding:"2px 0 6px"},iconButton:{display:"flex",justifyContent:"center",alignItems:"center",opacity:.5,borderRadius:"100%",background:e.palette.gray[100],height:20,width:20},icon:{height:20,width:20,padding:4,color:e.icon.primary,transform:"rotate(270deg)"}})),[]),u=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:c.left,children:[(0,i.jsxs)(ae().fI,{alignItems:"center",children:[(0,i.jsx)(I().D,{customStyles:c.title,styleName:"UIRegular-14px/Medium",as:"p",children:t}),a]}),n?(0,i.jsx)("div",{style:c.content,children:n}):null,(0,i.jsx)(I().D,{customStyles:c.secondaryText,styleName:"UIMedium-13px/Regular",colorName:"secondary",as:"p",children:s})]}),(0,i.jsxs)("div",{style:c.rightContent,children:[o&&(0,i.jsx)(I().D,{customStyles:c.secondaryText,styleName:"UIMedium-13px/Regular",colorName:"secondary",as:"p",children:o}),void 0===r?null:(0,i.jsx)("div",{style:c.iconButton,children:(0,ee().arrowChevronSingleDownFillIcon)(c.icon)})]})]});return void 0===r?(0,i.jsx)("div",{style:c.container,children:u}):(0,i.jsx)(te().p,{style:c.container,onClick:r,hoveredStyle:{...c.container,...c.containerDark},pressedStyle:{...c.container,...c.containerDark},disabled:l,disabledFeedback:l,...d,children:u})}var oe=()=>a(477657);function ie(e){let{memberCount:t,sampleMemberUserStores:a,onClick:s,disabled:n,isLoading:o}=e;const r=(0,R().Z)();return(0,i.jsx)(J().A,{disabled:n,isLoading:o,headerText:(0,i.jsx)(h().sA,{id:"organization.general.members.title",defaultMessage:"Members"}),mainText:void 0===t||o?(0,i.jsx)(P().A,{style:r.longTallShimmer}):(0,i.jsx)(h().sA,{id:"organization.general.members.count",defaultMessage:"{memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{memberCount:t.toLocaleString()}}),bottom:(0,i.jsx)(oe().t,{users:a,totalMemberCount:t,isLoading:o}),onClick:s})}var re=()=>a(27198),le=()=>a(762433),de=()=>a(426116),ce=()=>a(679924),ue=()=>a(836251),ge=()=>a(640653),me=()=>a(28119),pe=()=>a(765957),he=()=>a(57605),fe=()=>a(288864),xe=()=>a(459401),ve=()=>a(376203),ye=()=>a(946548),be=()=>a(573660);function Se(e){let{title:t,byline:a,isToggledOn:s,onToggle:n,badge:o,isLocked:r,lockedTooltip:l,bylineStyles:d}=e;const c=(0,ve().B)(),u=(0,ve().B)();return(0,i.jsx)(be().y,{title:t,titleId:c,byline:a,bylineId:u,bylineStyles:d,item:(0,i.jsx)(ye().A,{"aria-labelledby":c,"aria-describedby":u,on:s,onClick:n,isLocked:r,lockedTooltip:l}),badge:o})}const je=500;function we(e){let{spaceStore:t,organizationId:a}=e;return(0,i.jsxs)(xe().L,{children:[(0,i.jsx)(Ae,{spaceStore:t}),(0,i.jsx)(Me,{spaceStore:t,organizationId:a}),(0,i.jsx)(Ce,{spaceStore:t})]})}function Ae(e){let{spaceStore:t}=e;const a=(0,f().v3)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(k().N),o=(0,x().K8)((()=>t.getSetting("enable_ai_feature")??!1),[t]),[r,l]=(0,s.useState)(o),d=(0,x().K8)((()=>t.id),[t]),c=(0,x().K8)((()=>{var e;if(!(null===(e=pe().default.state.currentUserStore)||void 0===e?void 0:e.id))return!1;const t=he().A.getData(a,{spaceId:d});return(0,le().ji)(t).includes("ai")}),[a,d]),u=(0,s.useCallback)((async()=>{const e=!r;if(!1===e&&c){if(!(await j().Gh({message:(0,i.jsx)(h().sA,{id:"featureSettings.ai.turnOffAiWhenSubscribedToAiWarning",defaultMessage:"Your current plan includes Notion AI. You can turn off access to AI, but you will continue to be billed for it."}),acceptLabel:(0,i.jsx)(h().sA,{id:"featureSettings.ai.turnOffAiWhenSubscribedToAccept",defaultMessage:"Turn off AI"})})).accept)return}l(e);const t=await S().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:a,data:{spaceId:d,spaceSettings:{enable_ai_feature:e}}});"success"===t.type?n({data:t.data}):j().f1((0,A().Hu)(M().A.getIntl(),t))}),[c,r,a,d,n]);return(0,i.jsx)(Se,{title:(0,i.jsx)(h().sA,{id:"featureSettings.ai.title",defaultMessage:"Notion AI"}),byline:(0,i.jsx)(h().sA,{id:"featureSettings.ai.description",defaultMessage:"Enable AI-powered features for all workspace members. By activating Notion AI, you agree to the <inlinelink>Notion AI Supplementary Terms</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(fe()._,{href:"https://notion.notion.site/fa9034c8b5a04818a6baf3eac2adddbb",external:!0,children:e})}}),bylineStyles:{maxWidth:je},isToggledOn:r,onToggle:u})}function Me(e){let{spaceStore:t,organizationId:a}=e;const n=(0,f().v3)(),{updateCacheWithRecordMap:o}=(0,s.useContext)(k().N),r=(0,x().K8)((()=>(0,ge().Ar)(t)),[t]),[l,d]=(0,s.useState)(r),[c,u]=s.useState(!1),[g,m]=s.useState(!1),p=(0,s.useCallback)((async()=>{u(!1);const e=await S().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:n,data:{spaceId:t.id,spaceSettings:{zero_retention_enabled:!l}}});"success"===e.type?(o({data:e.data}),de().xu(n,t),await S().callApi({eventName:"sendHIPAACompliancyUpdate",environment:n,data:{spaceId:t.id,isDisablingHIPAA:l,organizationId:a}}),m(!0)):j().f1((0,A().Hu)(M().A.getIntl(),e))}),[n,t,l,o,a]),v=(0,s.useCallback)((()=>{u(!0)}),[]);return(0,i.jsxs)(i.Fragment,{children:[c&&(0,i.jsx)(me().TD,{isOpen:!0,onClose:()=>u(!1),onConfirmDecision:p,isDisablingHIPAACompliancy:l}),g&&(0,i.jsx)(me().YS,{isOpen:!0,hasDisabledHIPAACompliancy:l,onClose:()=>{m(!1),d(!l)}}),(0,i.jsx)(Se,{title:(0,i.jsx)(h().sA,{id:"featureSettings.hipaa.title",defaultMessage:"HIPAA Compliance"}),bylineStyles:{maxWidth:je},byline:(0,i.jsx)(h().sA,{id:"featureSettings.hipaa.description",defaultMessage:"Enable HIPAA compliance to securely store and process Protected Health Information (PHI). By enabling, you agree to the <inlinelink>Business Associate Agreement</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(fe()._,{href:(0,ue().xS)("guides.hipaaBAA"),external:!0,children:e})}}),isToggledOn:l,onToggle:v})]})}function Ce(e){let{spaceStore:t}=e;const a=(0,f().v3)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(k().N),o=(0,x().K8)((()=>t.id),[t]),r=(0,x().K8)((()=>t.getName()??""),[t]),l=(0,x().K8)((()=>t.getSettings().disable_page_analytics??!1),[t]),[d,c]=(0,s.useState)(l),u=(0,s.useCallback)((async()=>{const e=!d,t=await S().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:a,data:{spaceId:o,spaceSettings:{disable_page_analytics:e}}});"success"===t.type?(n({data:t.data}),(0,ce().v)(a,e?"page_analytics_workspace_opt_out":"page_analytics_workspace_opt_in"),c(e)):j().f1((0,A().Hu)(M().A.getIntl(),t))}),[d,a,o,n]);return(0,i.jsx)(Se,{title:(0,i.jsx)(h().sA,{id:"featureSettings.pageAnalytics.title",defaultMessage:"Page analytics"}),bylineStyles:{maxWidth:je},byline:(0,i.jsx)(h().sA,{id:"featureSettings.pageAnalytics.description",defaultMessage:"Allow members with edit or full access to view page analytics. If disabled, page view data will not be stored for pages in this workspace.",values:{workspaceName:r}}),isToggledOn:!d,onToggle:u})}var Ie=()=>a(646736),Te=()=>a(427704),ke=()=>a(745638),_e=()=>a(435009),ze=()=>a(469776),De=()=>a(588264),Pe=()=>a(534177),Ne=()=>a(843189);function Re(e){let{title:t,byline:a,badge:s,buttonLabel:n,modal:o,onClick:r,type:l,tooltipLabel:d,disabled:c}=e;const u=(0,ve().B)(),g=(0,ve().B)();let m;return"default"===l?m=e=>(0,i.jsx)(U().A,{...e,disabled:c,disabledFeedback:c&&Boolean(d),size:"md","aria-labelledby":u,"aria-describedby":g,onClick:r,children:n}):"danger"===l?m=e=>(0,i.jsx)(Ne().E,{...e,color:"uiRed",disabled:c,disabledFeedback:c&&Boolean(d),"aria-labelledby":u,"aria-describedby":g,onClick:r,children:n}):"primary"===l?m=e=>(0,i.jsx)(F().A,{...e,disabled:c,"aria-labelledby":u,"aria-describedby":g,onClick:r,children:n}):(0,Pe().HB)(l),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(be().y,{title:t,titleId:u,byline:a,bylineId:g,badge:s,item:(0,i.jsx)(V().A,{disableTooltip:void 0===c?!d:!c,renderTooltip:()=>d,render:m})}),o]})}var Be=()=>a(861646);function Le(e){let{spaceStore:t,onCloseModal:a,organizationId:n}=e;const o=(0,f().v3)(),r=(0,h().tz)(),[l,d]=(0,s.useState)(!1),{refreshOrganization:c,spaceIds:u}=(0,s.useContext)(_().D),g=(0,s.useCallback)((()=>{d(!0)}),[]),m=1===u.length&&u.includes(t.id),p=(0,x().K8)((()=>he().A.getData(o,{spaceId:t.id})),[o,t.id]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(De().Y,{}),(0,i.jsx)(Re,{title:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.deleteWorkspace.title",defaultMessage:"Delete workspace"}),byline:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.deleteWorkspace.caption",defaultMessage:"To confirm deletion, you'll need to enter the workspace name. <inlinelink>Learn more</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(fe()._,{href:(0,ue().xS)("guides.deleteWorkspace"),external:!0,children:e})}}),buttonLabel:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.deleteWorkspace.button",defaultMessage:"Delete workspace"}),type:"danger",onClick:g,modal:l?(0,i.jsx)(ze().S4,{isOpen:!0,billingData:p,onClose:()=>d(!1),onConfirmDelete:async()=>{(0,ke().H)(o),await(0,Be().Sr)(t,r,o,(async()=>{m?_e().oo({environment:o,url:Te().JZ.root}):await c(),a()}),n)},spaceStore:t}):null})]})}var Ee=()=>a(416504),Oe=()=>a(91709),Ue=()=>a(760217),Fe=()=>a(89924),He=()=>a(755535),Ve=()=>a(890434),We=()=>a(742784);const qe=["pdf","html","markdown"],Ge=["currentView","all"],Ke=["everything","no_files"];function Ye(e){let{onDismiss:t,spaceId:a,organizationId:o}=e;const r=(0,v().IS)((e=>({icon:{height:24,width:24,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:12,width:q().J2},switcherContainer:{marginTop:4}})),[]),[l,d]=(0,s.useState)({selectedExportType:"markdown",selectedCollectionViewExportType:"currentView",selectedContent:"everything",createFoldersForSubpages:!0}),c=(0,f().v3)(),u=c.currentUser.id,g=(0,s.useMemo)((()=>[a]),[a]),{teamStores:m}=(0,z().o)(g),p=(0,s.useCallback)((async()=>{t();const e="pdf"===l.selectedExportType?{exportType:l.selectedExportType,collectionViewExportType:l.selectedCollectionViewExportType,timeZone:(0,Ee().P)(),pdfFormat:Oe().id(u),locale:"en"}:{exportType:l.selectedExportType,collectionViewExportType:l.selectedCollectionViewExportType,includeContents:l.selectedContent,flattenExportFiletree:l.createFoldersForSubpages,timeZone:(0,Ee().P)(),locale:"en"};await Oe().P_(c,{spaceId:a,exportOptions:e,shouldExportComments:!1},o,m[a])}),[u,c,l,t,a,m,o]);return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:t,render:()=>(0,i.jsx)(O().tf,{showDismissButton:!1,header:(0,i.jsx)(q().rQ,{title:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.exportContent.modal.title",defaultMessage:"Export all workspace content"}),icon:(0,n().f)(r.icon),byline:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.exportContent.modal.caption",defaultMessage:"You can export all your pages as HTML, Markdown, or CSV (for databases), along with any files you've uploaded, too."})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.exportContent.modal.button",defaultMessage:"Export"}),primaryAction:p,secondaryText:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.exportContent.cancel",defaultMessage:"Cancel"}),secondaryAction:t}),children:(0,i.jsxs)("div",{style:r.content,children:[(0,i.jsx)(He().A,{label:(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.exportContent.exportFormat",defaultMessage:"Export format"})}),selectedTitle:(0,We().getBlockExportTypeTitle)(l.selectedExportType),renderMenuSections:e=>[{key:"exportType",render:e=>(0,i.jsx)(Fe().A,{...e}),items:qe.map((t=>({key:t,action:()=>{e.close(),d({...l,selectedExportType:t})},render:e=>(0,i.jsx)(Ue().A,{...e,title:(0,We().getBlockExportTypeTitle)(t)})})))}]}),(0,i.jsx)(He().A,{label:(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.exportContent.includeDatabases",defaultMessage:"Include databases"})}),selectedTitle:(0,We().getCollectionViewExportTypeTitle)(l.selectedCollectionViewExportType),renderMenuSections:e=>[{key:"includeDatabases",render:e=>(0,i.jsx)(Fe().A,{...e}),items:Ge.map((t=>({key:t,action:()=>{e.close(),d({...l,selectedCollectionViewExportType:t})},render:e=>(0,i.jsx)(Ue().A,{...e,title:(0,We().getCollectionViewExportTypeTitle)(t)})})))}]}),(0,i.jsx)(He().A,{label:(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.exportContent.includeContent",defaultMessage:"Include content"})}),selectedTitle:(0,We().getBlockIncludeContentsTitle)(l.selectedContent),renderMenuSections:e=>[{key:"includeContent",render:e=>(0,i.jsx)(Fe().A,{...e}),items:Ke.map((t=>({key:t,action:()=>{e.close(),d({...l,selectedContent:t})},render:e=>(0,i.jsx)(Ue().A,{...e,title:(0,We().getBlockIncludeContentsTitle)(t)})})))}]}),(0,i.jsx)("div",{style:r.switcherContainer,children:(0,i.jsx)(Ve().A,{title:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.exportContent.createFoldersForSubpages",defaultMessage:"Create folders for subpages"}),subtitle:"",on:l.createFoldersForSubpages,onChange:()=>d({...l,createFoldersForSubpages:!l.createFoldersForSubpages})})})]})})})}function Qe(e){let{spaceStore:t,organizationId:a}=e;const n=(0,x().K8)((()=>t.id),[t]),[o,r]=(0,s.useState)(!1);return(0,i.jsx)(Re,{type:"default",title:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.exportContent.title",defaultMessage:"Export workspace content"}),byline:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.exportContent.caption",defaultMessage:"Export all workspace content for legal and compliance purposes. <inlinelink>Learn more</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(fe()._,{href:(0,ue().xS)("guides.exportWorkspace"),external:!0,children:e})}}),buttonLabel:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.exportContent.button",defaultMessage:"Export workspace content"}),onClick:()=>r(!0),modal:o&&(0,i.jsx)(Ye,{onDismiss:()=>r(!1),spaceId:n,organizationId:a})})}a(672577);var $e=()=>a(496603),Xe=()=>a(187174),Ze=()=>a(803418),Je=()=>a(763824);function et(e){let{spaceIds:t}=e;const{permissionGroupsForSpace:a,loadPermissionGroupsForSpace:n}=(0,s.useContext)(_().D),[o,i]=(0,s.useState)(!1);return(0,Xe().Yb)((async()=>{i(!0),await(0,Je().lX)(t,Ze().O,(e=>n(e))),i(!1)}),[t,n]),{permissionGroupsForSpace:a,loading:o}}function tt(e){let{userIds:t,spaceIds:a}=e;const{userPermissionGroupIdsBySpaceId:n,loadUserPermissionGroupIdsBySpaceId:o}=(0,s.useContext)(_().D),[i,r]=(0,s.useState)(!1);return(0,Xe().Yb)((async()=>{r(!0),await(0,Je().lX)(a,Ze().O,(e=>o(e,t))),r(!1)}),[a,t,o]),{spaceIdToUserPermissionGroupMap:n,loading:i}}function at(e){let{spaceStore:t,organizationId:a}=e;const n=function(e,t){const a=(0,h().tz)(),{visibleUsers:n}=(0,D().d)(e.id),o=(0,s.useMemo)((()=>n.map((e=>e.userId))),[n]),i=(0,s.useMemo)((()=>[e.id]),[e.id]),{spaceIdToUserPermissionGroupMap:r}=tt({userIds:o,spaceIds:i}),l=(0,s.useMemo)((()=>r[e.id]),[r,e.id]),{permissionGroupsForSpace:d}=et({spaceIds:i}),c=(0,f().v3)();return(0,s.useCallback)((async()=>{await S().callApi({eventName:"exportSpaceMembers",environment:c,data:{organizationId:t,spaceId:e.id}});const s={};for(const[t,a]of Object.entries(l)){const n=a.map((t=>d[e.id].find((e=>e.group.group_id===t)))),o=$e().oE(n).map((e=>e.group.name)).sort().join(",");s[t]=o}await Oe().Sg(e,n,s,a)}),[c,t,e,n,a,l,d])}(t,a);return(0,i.jsx)(Re,{type:"default",title:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.exportMembers.title",defaultMessage:"Export members"}),byline:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.exportMembers.caption",defaultMessage:"Download a CSV list of all workspace members. <inlinelink>Learn more</inlinelink>",values:{inlinelink:e=>(0,i.jsx)(fe()._,{href:(0,ue().xS)("guides.exportMembers"),external:!0,children:e})}}),buttonLabel:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.exportMembers.button",defaultMessage:"Export members"}),onClick:n})}var st=()=>a(55293),nt=()=>a(436572),ot=()=>a(73332);function it(e){let{spaceIds:t,onCancel:a,onSubmit:n,organizationId:o,refetchData:r,isSingleWorkspaceAction:l}=e;const d=(0,v().IS)((e=>({icon:{height:30,width:30,color:e.text.uiRedPrimary},confirmation:{display:"flex",width:"100%",justifyContent:"center",gap:10},modalContainer:{width:440}})),[]),c=(0,f().v3)(),u=(0,s.useCallback)((async()=>{const e=await S().callApi({eventName:"removeWorkspacesFromOrganization",environment:c,data:{organizationId:o,spaceIds:t}});"success"===e.type?(r(),nt().D6({label:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.removeFromOrganization.success",defaultMessage:"{numWorkspaces, plural, one {Removed {numWorkspaces} workspace} other {Removed {numWorkspaces} workspaces}} from organization",values:{numWorkspaces:t.length}})}),n(),(0,w().u)({environment:c,event:{eventName:"org_console_general_remove_space_from_organization",eventProperties:{organization_id:o,space_ids:t}}})):j().f1((0,A().Hu)(M().A.getIntl(),e))}),[c,o,t,n,r]),[g,m]=(0,s.useState)(!1);return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)("div",{style:d.modalContainer,children:(0,i.jsx)(O().tf,{gap:q().gA,showDismissButton:!1,header:(0,i.jsx)(q().rQ,{icon:(0,st().J)(d.icon),title:l?(0,i.jsx)(h().sA,{id:"removeWorkspaceFromOrgModal.titleSingle",defaultMessage:"Remove workspace from organization"}):(0,i.jsx)(h().sA,{id:"removeWorkspaceFromOrgModal.title",defaultMessage:"{numWorkspaces, plural, one {Remove {numWorkspaces} workspace} other {Remove {numWorkspaces} workspaces}} from organization",values:{numWorkspaces:t.length}}),byline:l?(0,i.jsx)(h().sA,{id:"removeWorkspaceFromOrgModal.bylineSingle",defaultMessage:"Removing this workspace will disable SAML SSO and organization-wide security settings for it."}):(0,i.jsx)(h().sA,{id:"removeWorkspaceFromOrgModal.byline",defaultMessage:"Removing these workspaces will disable SAML SSO and organization-wide security settings for them.",values:{numWorkspaces:t.length}})}),footer:(0,i.jsx)(q().jl,{isDarkRed:!0,primaryDisabled:!g,primaryText:(0,i.jsx)(h().sA,{id:"removeWorkspaceFromOrgModal.removeButton",defaultMessage:"{numWorkspaces, plural, one {Remove workspace} other {Remove workspaces}}",values:{numWorkspaces:t.length}}),primaryAction:u,secondaryText:(0,i.jsx)(h().sA,{id:"removeWorkspaceFromOrgModal.cancelButton",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsxs)("div",{style:d.confirmation,children:[(0,i.jsx)(ot().T,{checked:g,size:14,onClick:()=>m(!g)}),(0,i.jsx)(I().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"removeWorkspaceFromOrgModal.confirmationText",defaultMessage:"I understand SAML SSO will be disabled for some users"})})]})})})})}function rt(e){let{spaceStore:t,organizationId:a,onCloseModal:n}=e;const{refreshOrganization:o,spaceIds:r}=(0,s.useContext)(_().D),l=1===r.length&&r.includes(t.id),d=(0,x().K8)((()=>t.id),[t]),c=(0,s.useMemo)((()=>[d]),[d]),[u,g]=(0,s.useState)(!1),m=(0,s.useCallback)((()=>{g(!0)}),[]),p=(0,s.useCallback)((()=>{g(!1),n()}),[n]);return(0,i.jsx)(Re,{title:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.removeFromOrganization.title",defaultMessage:"Remove from organization"}),byline:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.removeFromOrganization.caption",defaultMessage:"Remove this workspace from this organization. You can re-add it anytime."}),buttonLabel:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.removeFromOrganization.button",defaultMessage:"Remove from organization"}),tooltipLabel:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.removeFromOrganization.button.disabledTooltip",defaultMessage:"You must have at least one workspace in your organization."}),disabled:l,type:"danger",onClick:m,modal:u&&(0,i.jsx)(it,{isSingleWorkspaceAction:!0,spaceIds:c,organizationId:a,onCancel:()=>g(!1),onSubmit:p,refetchData:o})})}function lt(e){let{spaceStore:t,organizationId:a,onCloseModal:s}=e;const n=(0,Ie().HI)(t),o=(0,x().K8)((()=>(null==n?void 0:n.isMember())??!1),[n]),r=(0,x().K8)((()=>!t.getDisableExport()&&o),[o,t]);return(0,i.jsxs)(xe().L,{children:[(0,i.jsx)(at,{spaceStore:t,organizationId:a}),r&&(0,i.jsx)(Qe,{spaceStore:t,organizationId:a}),(0,i.jsx)(rt,{spaceStore:t,organizationId:a,onCloseModal:s}),(0,i.jsx)(Le,{spaceStore:t,organizationId:a,onCloseModal:s})]})}var dt=()=>a(784892),ct=()=>a(842599),ut=()=>a(778078),gt=()=>a(278768),mt=()=>a(722872),pt=()=>a(249847),ht=()=>a(870092),ft=()=>a(378941),xt=()=>a(928600),vt=()=>a(939740),yt=()=>a(897119),bt=()=>a(317194),St=()=>a(881690),jt=()=>a(297780);function wt(e){let{spaceStore:t,organizationId:a}=e;return(0,i.jsxs)(xe().L,{children:[(0,i.jsx)(Ct,{spaceStore:t,organizationId:a}),(0,i.jsx)(At,{spaceStore:t,organizationId:a})]})}function At(e){let{spaceStore:t,organizationId:a}=e;const s=(0,v().IS)((()=>({textContainer:{display:"flex",flexDirection:"column",maxWidth:"70%",gap:6}})),[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:s.textContainer,children:[(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Medium",children:(0,i.jsx)(h().sA,{id:"orgConsole.shareSettings.emailDomains.title",defaultMessage:"Enable organization-wide access"})}),(0,i.jsx)("div",{style:{maxWidth:500},children:(0,i.jsx)(I().D,{styleName:"UIMedium-13px/Regular",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"orgConsole.shareSettings.emailDomains.caption",defaultMessage:"Add your company email domain to let team members discover and share workspace pages, even if they’re not on Notion"})})})]}),(0,i.jsx)(Mt,{spaceStore:t,organizationId:a})]})}function Mt(e){let{spaceStore:t,organizationId:a}=e;const n=(0,h().tz)(),o=(0,f().v3)(),[r,l]=(0,s.useState)(""),d=(0,s.useCallback)((e=>{l(e.target.value)}),[]),c=(0,x().K8)((()=>t.getEmailDomains()),[t]);(0,s.useEffect)((()=>{g(c)}),[c]);const[u,g]=(0,s.useState)(c),m=(0,pt().T)(),[p]=(0,Xe().Yb)((async()=>({trustedDomainNumMembers:await(0,ft().hs)({environment:o,spaceId:t.id,currentUserId:m,organizationId:a})})),[o,t,m,a]),v=(0,x().K8)((()=>{if("resolved"!==p.status)return[];const e=p.value.trustedDomainNumMembers.map((e=>e.trustedDomain.id));return(0,ft().J7)({trustedDomainIds:e,spaceStore:t})}),[t,p]),C=(0,x().K8)((()=>$e().oE(v.filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())))),[v]),{updateCacheWithRecordMap:I}=(0,s.useContext)(k().N),T=(0,s.useCallback)((async e=>{g(e);const s=await S().callApi({eventName:"updateWorkspaceInOrganization",environment:o,data:{spaceId:t.id,organizationId:a,emailDomains:e}});"success"===s.type?(I({data:s.data}),(0,w().u)({environment:o,event:{eventName:"org_console_general_update_space",eventProperties:{organization_id:a,space_id:t.id,updated_fields:["email_domains"]}}})):j().f1((0,A().Hu)(M().A.getIntl(),s))}),[o,t.id,a,I]),_=(0,x().K8)((()=>t.getSpaceId()),[t]),{visibleUsers:z,joinedUserIds:P}=(0,D().d)(_);return(0,i.jsx)(yt().Ay,{popupType:yt().nl.Popup,sameWidthAsOrigin:!0,open:r.length>0,origin:(0,i.jsx)(jt().A,{placeholder:n.formatMessage({id:"orgConsole.shareSettings.emailDomains.placeholder",defaultMessage:"Type an email domain…"}),value:r,onChange:d,onRemoveLastToken:async()=>{const e=u.slice(0,u.length-1);await T(e)},tokens:u.map((e=>(0,i.jsx)(St().A,{showRemoveButton:!0,isSingle:!1,format:dt().NY.Medium,onClickRemove:async()=>{const t=u.filter((t=>t!==e));await T(t)},value:e},e)))}),render:()=>{const e=r.trim(),t=(0,i.jsx)(h().sA,{id:"orgConsole.shareSettings.emailDomains.headerTitle",defaultMessage:"Type an email domain…"}),a=(0,i.jsx)(h().sA,{id:"orgConsole.shareSettings.emailDomains.headerTitleNoResults",defaultMessage:"Type an email domain of a member of this workspace…"}),s=[...c,...C],n=z.filter((e=>(0,b().c7)(e)&&P.includes(e.userId))).map((e=>{const t=new(ht().L)(o,{table:y().oo,id:e.userId}).getEmail();if(t)return(0,ct().zN)(t)})).filter(((e,t,a)=>Boolean(e&&t===a.indexOf(e)&&!s.includes(e)))),d=(0,ut().Ay)(e,n,(e=>e)).map(((e,t)=>({key:t,render:t=>(0,i.jsx)(Ue().A,{...t,title:e}),action:async()=>{const t=[...u,e];await T(t),l("")}}))),g={menuType:mt().gu.Popup,width:"100%"};return(0,i.jsx)(xt().A,{...g,children:(0,i.jsx)(vt().Ay,{type:vt().Oh.Vertical,initialFocus:d.length>0?0:void 0,sections:[{key:0,render:e=>(0,i.jsx)(Fe().A,{...e,disableDesktopPadding:!0,title:d.length>0?t:a}),items:d}]})})},onDismiss:()=>{l("")}})}function Ct(e){let{spaceStore:t,organizationId:a}=e;const n=(0,x().K8)((()=>Boolean(t.getInviteLinkEnabled())),[t]),[o,r]=(0,s.useState)(n),l=(0,x().K8)((()=>t.getSpaceId()),[t]),d=(0,f().v3)(),{updateCacheWithRecordMap:c}=(0,s.useContext)(k().N),u=(0,s.useCallback)((async()=>{gt().OE(d,{enabled:!o}),r(!o);const e=await S().callApi({eventName:"updateWorkspaceInOrganization",environment:d,data:{spaceId:l,organizationId:a,inviteLinkEnabled:!o}});"success"===e.type?(c({data:e.data}),(0,w().u)({environment:d,event:{eventName:"org_console_general_update_space",eventProperties:{organization_id:a,space_id:l,updated_fields:["invite_link_enabled"]}}})):j().f1((0,A().Hu)(M().A.getIntl(),e))}),[d,o,a,l,c]);return(0,i.jsx)(Se,{title:(0,i.jsx)(h().sA,{id:"orgConsole.shareSettings.inviteLink.title",defaultMessage:"Invite link to add members"}),byline:o?(0,i.jsx)(bt().jo,{spaceStore:t,showBlueLink:!0,organizationId:a}):(0,i.jsx)(h().sA,{id:"orgConsole.shareSettings.inviteLink.caption",defaultMessage:"Only people with permission to invite members can see this."}),isToggledOn:o,onToggle:u})}var It=()=>a(284230);function Tt(e){let{spaceStore:t,organizationId:a}=e;const n=(0,v().IS)((e=>({token:{borderRadius:3,backgroundColor:e.white,margin:"3px 0 3px 6px"},header:{fontWeight:500,marginBottom:6}})),[]),o=(0,f().v3)(),r=(0,s.useMemo)((()=>[t.id]),[t.id]),{teamStores:l}=(0,z().o)(r),{updateCacheWithRecordMap:d}=(0,s.useContext)(k().N),c=(0,s.useCallback)((async e=>{let{addedTeams:s,removedTeams:n}=e;const i=s.map((e=>{let{store:t}=e;return t.id})),r=n.map((e=>{let{store:t}=e;return t.id})),l=await S().callApi({eventName:"updateDefaultTeamsInOrganizationSpace",environment:o,data:{organizationId:a,spaceId:t.id,addedTeams:i,removedTeams:r}});"success"===l.type?(d({data:l.data}),(0,w().u)({environment:o,event:{eventName:"org_console_general_update_default_teams_for_space",eventProperties:{organization_id:a,space_id:t.id,added_teams:i,removed_teams:r}}})):j().f1((0,A().Hu)(M().A.getIntl(),l))}),[o,t,a,d]),u=0===l[t.id].length?null:(0,i.jsx)("div",{children:(0,i.jsx)(It().A,{unarchivedTeams:l[t.id],isOrgOwner:!0,onUpdate:c,immediateUpdate:!0,tokenStyle:n.token,headerStyle:n.header,description:(0,i.jsx)(I().D,{styleName:"UIMedium-13px/Regular",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"teamspaceSettings.defaultTeams.caption",defaultMessage:"Select teamspaces that new and current workspace members join automatically"})})})});return(0,i.jsx)("div",{style:{width:"100%"},children:(0,i.jsxs)(xe().L,{children:[u,(0,i.jsx)(kt,{spaceStore:t}),(0,i.jsx)(_t,{spaceStore:t})]})})}function kt(e){let{spaceStore:t}=e;const a=(0,x().K8)((()=>t.getDisableTeamCreation()),[t]),[n,o]=(0,s.useState)(a),r=(0,f().v3)(),{updateCacheWithRecordMap:l}=(0,s.useContext)(k().N),d=(0,s.useCallback)((async()=>{const e=await S().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:r,data:{spaceId:t.id,spaceSettings:{disable_team_creation:!n}}});"success"===e.type?(o(!n),l({data:e.data})):j().f1((0,A().Hu)(M().A.getIntl(),e))}),[r,t.id,n,l]);return(0,i.jsx)(Se,{title:(0,i.jsx)(h().sA,{id:"teamspaceSettings.limitTeamspaceCreation.title",defaultMessage:"Limit teamspace creation to only workspace owners"}),byline:(0,i.jsx)(h().sA,{id:"teamspaceSettings.limitTeamspaceCreation.description",defaultMessage:"Restrict teamspace creation to workspace owners only"}),isToggledOn:n,onToggle:d})}function _t(e){let{spaceStore:t}=e;const a=(0,x().K8)((()=>t.getDisableExternalMembershipRequests()),[t]),[n,o]=(0,s.useState)(!a),r=(0,f().v3)(),{updateCacheWithRecordMap:l}=(0,s.useContext)(k().N),d=(0,s.useCallback)((async()=>{const e=await S().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:r,data:{spaceId:t.id,spaceSettings:{disable_external_membership_requests:n}}});"success"===e.type?(o(!n),l({data:e.data})):j().f1((0,A().Hu)(M().A.getIntl(),e))}),[r,t.id,n,l]);return(0,i.jsx)(Se,{title:(0,i.jsx)(h().sA,{id:"teamspaceSettings.memberRequest.title",defaultMessage:"Teamspace invite link to add members"}),byline:(0,i.jsx)(h().sA,{id:"teamspaceSettings.memberRequest.description",defaultMessage:"Allow membership requests from teamspace invite links"}),isToggledOn:n,onToggle:d})}function zt(e){let{organizationId:t,spaceStore:a,setSelectedTab:n,onCloseModal:o}=e;const r=(0,v().IS)((()=>({tilesContainer:{display:"flex",gap:12,flexWrap:"wrap"},dotSeparator:{margin:"0 4px"}})),[]),l=(0,f().v3)(),[d,c]=(0,s.useState)(""),u=(0,x().K8)((()=>null==a?void 0:a.getName()),[a]),g=(0,x().K8)((()=>{var e;return null==a||null===(e=a.getIcon())||void 0===e?void 0:e.icon}),[a]);(0,s.useEffect)((()=>{c(u||"")}),[u]);const{updateCacheWithRecordMap:m}=(0,s.useContext)(k().N),{loadVisibleUsersForSpace:P}=(0,s.useContext)(_().D);(0,s.useEffect)((()=>{P(a.id,!0)}),[a.id,P]);const{visibleUsers:N,loading:R}=(0,D().d)(a.id),B=(0,x().K8)((()=>{const e=N.filter((e=>(0,b().c7)(e)));return{sampleMemberStores:e.slice(0,4).map((e=>new(C().LU)(l,{table:y().oo,id:e.userId}))),numGuests:N.filter(b().QE).length,numMembers:e.length}}),[l,N]),L=(0,s.useMemo)((()=>[a.id]),[a.id]),{teamStores:E,loading:O}=(0,z().o)(L),U=(0,s.useMemo)((()=>E[a.id]),[E,a.id]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)($,{}),(0,i.jsxs)(Z,{children:[(0,i.jsx)(Q,{title:(0,i.jsx)(h().sA,{id:"organization.general.organization.workspace.title",defaultMessage:"Edit workspace details"}),byline:(0,i.jsx)(h().sA,{id:"organization.general.organization.workspace.byline",defaultMessage:"Edit this workspace's name below. Changes will take effect immediately upon saving."}),icon:p().V,onSave:async function(){if(!a||d===u)return;const e=await S().callApi({eventName:"updateWorkspaceInOrganization",environment:l,data:{organizationId:t,spaceId:a.id,name:d}});"success"===e.type?(m(e),(0,w().u)({environment:l,event:{eventName:"org_console_general_update_space",eventProperties:{organization_id:t,space_id:a.id,updated_fields:["name"]}}})):j().f1((0,A().Hu)(M().A.getIntl(),e))},onCancel:()=>{c(u||"")},onIconChange:async e=>{if(!a)return;const s=await S().callApi({eventName:"updateWorkspaceInOrganization",environment:l,data:{organizationId:t,spaceId:a.id,icon:e}});"success"===s.type?(m(s),(0,w().u)({environment:l,event:{eventName:"org_console_general_update_space",eventProperties:{organization_id:t,space_id:a.id,updated_fields:["icon"]}}})):j().f1((0,A().Hu)(M().A.getIntl(),s))},onNameChange:e=>c(e||""),localIconWithPointer:g?{pointer:a.pointer,icon:g}:void 0,entityName:u||"",entityDescription:(0,i.jsxs)(I().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:[(0,i.jsx)(re().Qq,{memberCount:B.numMembers}),(0,i.jsx)(T().A,{style:r.dotSeparator}),(0,i.jsx)(re().h6,{guestCount:B.numGuests})]})}),(0,i.jsxs)("div",{style:r.tilesContainer,children:[(0,i.jsx)(ie,{memberCount:B.numMembers,sampleMemberUserStores:B.sampleMemberStores,onClick:()=>n("members"),isLoading:R}),(0,i.jsx)(J().A,{isLoading:O,headerText:(0,i.jsx)(h().sA,{id:"organization.general.workspace.teamspace.title",defaultMessage:"Associated teamspaces"}),mainText:(0,i.jsx)(h().sA,{id:"organization.general.workspace.teamspace.count",defaultMessage:"{teamspaceCount, plural, one {{teamspaceCount} teamspace} other {{teamspaceCount} teamspaces}}",values:{teamspaceCount:U.length}}),bottom:(0,i.jsx)(X().tv,{teamStores:U,isLoading:O}),onClick:()=>n("teamspaces")})]}),(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.featureSettings.title",defaultMessage:"Feature settings"}),content:(0,i.jsx)(we,{spaceStore:a,organizationId:t})}),(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.shareSettings.title",defaultMessage:"Share settings"}),content:(0,i.jsx)(wt,{spaceStore:a,organizationId:t})}),(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.teamspaceSettings.title",defaultMessage:"Teamspace settings"}),content:(0,i.jsx)(Tt,{spaceStore:a,organizationId:t})}),(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"organization.workspace.settings.manageWorkspace.title",defaultMessage:"Manage workspace"}),content:(0,i.jsx)(lt,{spaceStore:a,organizationId:t,onCloseModal:o})})]})]})}a(737550);var Dt=()=>a(97835),Pt=()=>a(236262),Nt=()=>a(641300),Rt=()=>a(566468),Bt=()=>a(495427);function Lt(e){const[t,a]=(0,s.useState)(e.initialSelectedIds||[]);function n(){a([])}return(0,s.useEffect)((()=>{n()}),[e.allPossibleIds]),{selectedIds:t,handleToggleId:function(e){a((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))},handleSelectAllIds:function(){a(e.allPossibleIds)},handleUnselectAllIds:n}}function Et(e){const[t,a]=(0,s.useState)([]);return{selectedRows:t,handleToggleRow:function(e){a((t=>t.some((t=>t.id===e.id))?t.filter((t=>t.id!==e.id)):[...t,e]))},handleSelectAllRows:function(){a(e.allPossibleRows)},handleUnselectAllRows:function(){a([])}}}var Ot=()=>a(87043),Ut=()=>a(464708),Ft=()=>a(75491),Ht=()=>a(437607);var Vt=()=>a(489143),Wt=()=>a(145214);function qt(e){const{icon:t,title:a,byline:n}=e,[o,r]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const e=setTimeout((()=>r(!0)),100);return()=>clearTimeout(e)}),[]);const l=(0,v().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:8,margin:"52px auto"},icon:{color:e.icon.secondary,fill:e.icon.secondary,height:36,width:36}})),[]);return(0,i.jsxs)(Wt().A,{animate:{opacity:o?1:0},initial:{opacity:0},style:l.container,children:[t?t(l.icon):null,(0,i.jsx)(I().D,{styleName:"UIHeading-17px/Semibold",colorName:"secondary",children:a}),(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"tertiary",children:n})]})}var Gt=()=>a(780054);function Kt(e){const{error:t,runNewSearch:a}=e,[n,o]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const e=setTimeout((()=>o(!0)),100);return()=>clearTimeout(e)}),[]);const r=(0,v().IS)((e=>({icon:{color:e.redBadgeBackground,fill:"currentColor",height:36,width:36},description:{width:328,textAlign:"center"},errorMessage:{borderRadius:4,background:e.cardBackground,fontFamily:L().Tf.mono,fontSize:12,color:e.text.tertiary,padding:"18px 24px",margin:"auto"}})),[]);return(0,i.jsx)(Wt().A,{style:{opacity:n?1:0},animate:{opacity:n?1:0},children:(0,i.jsxs)(ae().VP,{justifyContent:"center",alignItems:"center",gap:12,margin:"40px auto",children:[(0,i.jsxs)(ae().VP,{gap:8,alignItems:"center",children:[(0,st().J)(r.icon),(0,i.jsx)(I().D,{styleName:"UIHeading-17px/Semibold",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"orgConsole.baseTable.errorState.title",defaultMessage:"Something went wrong"})}),(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"tertiary",customStyles:r.description,children:(0,i.jsx)(h().sA,{id:"orgConsole.baseTable.errorState.byline",defaultMessage:"Something went wrong when we were loading the results. Try to run your search again."})})]}),null,a?(0,i.jsx)(U().A,{size:"md",onClick:()=>a(),children:(0,i.jsx)(h().sA,{id:"adminContentSearchTab.pagesTable.error.confirm",defaultMessage:"Retry"})}):null]})})}var Yt=()=>a(135851),Qt=()=>a(743556),$t=()=>a(731736),Xt=()=>a(713996),Zt=()=>a(386164),Jt=()=>a(698449);var ea=()=>a(179034);function ta(e){let{blockIds:t}=e;const a=(0,f().v3)(),{organizationOwnerRecordCache:n}=(0,s.useContext)(k().N);return(0,x().K8)((()=>t.map((e=>new(C().Bv)(a,{table:ea().ev,id:e},{inMemoryRecordCache:n})))),[a,t,n])}var aa=()=>a(96689);function sa(e){let{spaceId:t}=e;const a=(0,f().v3)(),{organizationOwnerRecordCache:n}=(0,s.useContext)(k().N),{spaceIds:o}=(0,s.useContext)(_().D);return(0,x().K8)((()=>{if(t&&o.includes(t))return new(C().SL)(a,{id:t,table:aa().NX},{inMemoryRecordCache:n})}),[t,o,n,a])}var na=()=>a(590082);const oa=(0,h().YK)({untitled:{id:"settingsConsole.groupSettings.untitledGroup",defaultMessage:"Untitled"}});const ia=function(e){let{group:t,organizationId:a,onDismiss:n,removePagesFromGroup:o}=e;const r=(0,h().tz)(),l=(0,R().Z)(),d=sa({spaceId:t.spaceId}),{visibleUsers:c,loading:u}=(0,D().d)(t.spaceId),g=c.filter((e=>(0,b().c7)(e))).length,{workspaceName:m,workspaceIcon:p}=(0,x().K8)((()=>({workspaceName:null==d?void 0:d.getName(),workspaceIcon:null==d?void 0:d.getIcon()})),[d]),j=function(e){let{groupId:t,spaceId:a}=e;const n=(0,f().v3)(),{organizationOwnerRecordCache:o}=(0,s.useContext)(k().N);return(0,x().K8)((()=>new(C().Cv)(n,{table:Ht().n,id:(0,Ht().T1)({spacePermissionGroupId:t,spaceId:a}),spaceId:a},{inMemoryRecordCache:o})),[n,t,a,o])}({groupId:t.groupId,spaceId:t.spaceId}),{name:w,spaceId:A,icon:M}=(0,x().K8)((()=>({name:j.getName()||r.formatMessage(oa.untitled),spaceId:j.getSpaceId(),icon:j.getIcon()})),[j,r]),T=(0,v().IS)((()=>({groupIconContainer:{marginLeft:8}})),[]),_=ta({blockIds:t.sharedPageIds}),B=function(e){let{spaceStore:t,groupStore:a}=e;const s=(0,h().tz)(),n=(0,f().v3)(),[{value:o,status:i,error:r}]=(0,Xe().Yb)((async()=>{const e=a.getGroupId(),o=a.getSpaceId();if(!e||!o)return[];const i=await S().callApi({eventName:"getGroupMembersInOrganizationSpace",environment:n,data:{groupIds:[e],spaceId:o},headers:(0,Zt().WS)({spaceId:o})});if("success"===i.type){var r;const a=((null===(r=i.data.groupUsersMap[e])||void 0===r?void 0:r.userIds)??[]).map((e=>new(C().LU)(n,{table:y().oo,id:e})));return(0,Jt().cp)({userStores:a,spaceStore:t,intl:s})}}),[n,t,a,s]);return{members:o??[],loading:"pending"===i,error:r}}({groupStore:j,spaceStore:d}),L=function(e){const{spaceStore:t,groupStore:a}=e,n=(0,s.useMemo)((()=>null!=t&&t.id?[t.id]:[]),[null==t?void 0:t.id]),{teamStores:o,loading:i}=(0,z().o)(n);return{teamStores:(0,x().K8)((()=>null!=t&&t.id?o[t.id].filter((e=>e.getRawMembership().some((e=>"group"===e.entity_type&&e.group_id===a.getGroupId())))):[]),[o,null==t?void 0:t.id,a]),loading:i}}({groupStore:j,spaceStore:d});return(0,i.jsx)(na().iv,{isOpen:!0,sidebarProps:{sidebarItemsTitle:(0,i.jsx)(h().sA,{id:"organization.singleGroupModal.sidebarItemTitle",defaultMessage:"Group settings"}),sidebarTitleIcon:(0,i.jsx)($t().e,{spaceId:A,icon:M,size:na().WK}),sidebarTitle:w,sidebarByline:(0,i.jsx)(h().sA,{id:"settingsConsole.groupSettings.title.byline",defaultMessage:"Group · {numMembers, plural, one {# member} other {# members}}",values:{numMembers:t.membersCount}}),bottomEntitySection:(0,i.jsxs)("div",{style:T.groupIconContainer,children:[(0,i.jsx)(I().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"settingsConsole.groupSettings.bottom.preamble",defaultMessage:"Part of workspace"})}),(0,i.jsx)(Rt().s7,{title:m,iconSize:32,icon:(0,i.jsx)(N().B6,{disabled:!0,icon:p,iconRecordCategory:"workspace",isEmptyPage:!1,size:36}),byline:u?(0,i.jsx)(P().A,{style:l.shortShimmer}):(0,i.jsx)(re().Qq,{memberCount:g})})]}),hideSeparator:!0},tabRenderer:tx,tabNames:Xt().o3,tabAccessor:ex,defaultTab:"general",onDismiss:n,sceneProps:{groupStore:j,membersState:B,teamsState:L,groupPageStores:_,organizationId:a,onCloseModal:n,removePagesFromGroup:o}})};var ra=()=>a(453697);const la=28;function da(e){let{userId:t,showEmailByline:a,badge:s,isNotMultiSelectable:n,rightContent:o,overrides:r,useThinTitle:l=!0}=e;const d=(0,h().tz)(),c=(0,f().v3)(),u=(0,v().IS)((e=>({iconStyle:{color:e.text.tertiary,fontWeight:L().Wy.medium}})),[]),g=(0,x().K8)((()=>{const e=new(ht().L)(c,{table:y().oo,id:t});return{userStore:e,isReady:e.isReady(),userName:e.getDisplayName(d),email:e.getEmail()}}),[c,t,d]);return null!=g&&g.isReady?(0,i.jsx)(Rt().s7,{useThinTitle:l,useSecondaryColorTitle:!Boolean(g.userName),badge:s,title:(null==r?void 0:r.name)??g.userName,byline:a?(null==r?void 0:r.email)??g.email:void 0,rightContent:o,icon:(0,i.jsx)(ra().A,{size:la,userStore:g.userStore,iconStyle:u.iconStyle}),summaryStyles:{paddingBlock:8,overflow:"hidden"},containerStyles:{width:n?"100%":`calc(100% - ${Nt().Gr}px)`}}):(0,i.jsx)(ca,{})}function ca(e){const t=(0,v().IS)((()=>({icon:{borderRadius:"100%",height:e.iconSize??la,width:e.iconSize??la,marginLeft:-4,...e.iconStyles},title:{width:120}})),[e.iconSize,e.iconStyles]);return(0,i.jsx)(Rt().mf,{includeIcon:!0,iconStyles:t.icon,titleStyles:t.title})}const ua=(0,h().YK)({untitled:{id:"organizationGroupsTable.nameColumn.untitled",defaultMessage:"Untitled"}}),ga={id:"name",headerTitle:(0,i.jsx)(h().sA,{id:"organizationGroupsTable.nameColumn.header",defaultMessage:"Groups"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(ca,{}):(0,i.jsx)(va,{row:e}),widthData:{width:275,maxWidth:275},sortable:!1,shouldShowSortTooltip:!1},ma={id:"pages",headerTitle:(0,i.jsx)(h().sA,{id:"organizationGroupsTable.pagesColumn.header",defaultMessage:"Pages shared with this group"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Ft().Kb,{}):(0,i.jsx)(Rt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(h().sA,{id:"organizationGroupsTable.pagesColumn.title",defaultMessage:"{count, plural, one {# page} other {# pages}}",values:{count:e.organizationGroup.sharedPageIds.length}})}),widthData:{widthPercent:33,minWidth:200,maxWidth:200},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},pa={id:"teams",headerTitle:(0,i.jsx)(h().sA,{id:"organizationGroupsTable.teamsColumn.header",defaultMessage:"Associated Teamspaces"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Ft().Kb,{}):(0,i.jsx)(Rt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(h().sA,{id:"organizationGroupsTable.teamsColumn.title",defaultMessage:"{count, plural, one {# teamspace} other {# teamspaces}}",values:{count:e.organizationGroup.teamsCount}})}),widthData:{widthPercent:33,minWidth:200,maxWidth:200},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},ha={id:"members",headerTitle:(0,i.jsx)(h().sA,{id:"organizationGroupsTable.membersColumn.header",defaultMessage:"Members"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Ft().Kb,{}):(0,i.jsx)(Rt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(h().sA,{id:"organizationGroupsTable.membersColumn.title",defaultMessage:"{count, plural, one {# member} other {# members}}",values:{count:e.organizationGroup.membersCount}})}),widthData:{widthPercent:33,minWidth:200,maxWidth:200},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},fa=[ga,ma,pa,ha];function xa(e){let{groupId:t,groups:a,loading:n,error:o,organizationStore:r,loadNextPage:l,refreshPage:d,currentPage:c,hasNextPage:g,hasPreviousPage:m,loadPreviousPage:p,removePagesFromGroup:y}=e;const[b,S]=(0,s.useState)({isOpen:!1});(0,s.useEffect)((()=>{const e=a.find((e=>e.groupId===t));e&&S({isOpen:!0,type:"viewGroup",groupId:e.groupId})}),[a,t,S]);const j=(0,Vt().A)(),w=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:fa,theme:e,containerMarginTop:0})),[]),A=function(e){let{groupAndSpaceIds:t}=e;const a=(0,f().v3)(),{organizationOwnerRecordCache:n}=(0,s.useContext)(k().N);return(0,x().K8)((()=>t.map((e=>{let{groupId:t,spaceId:s}=e;return new(C().Cv)(a,{table:Ht().n,id:(0,Ht().T1)({spacePermissionGroupId:t,spaceId:s}),spaceId:s},{inMemoryRecordCache:n})}))),[a,t,n])}({groupAndSpaceIds:a.map((e=>({groupId:e.groupId,spaceId:e.spaceId})))}),M=(0,x().K8)((()=>a.map((e=>{const t=A.find((t=>t.getGroupId()===e.groupId)),a=Boolean(null==t?void 0:t.getDeletedAt());return{organizationGroup:e,id:e.groupId,groupStore:t,isClickable:!a,type:Qt().T.OrganizationGroup}}))),[a,A]),I=n?(0,Qt().n)():M;const T=fa.map((e=>({...e,headerStyle:j.tableHeader,rowStyle:j.tableRow}))),_=b.isOpen?a.find((e=>e.groupId===b.groupId)):void 0;return!n&&o?(0,i.jsx)(Kt,{error:o,runNewSearch:()=>d(!0)}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Nt().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:T,rows:I,renderNoRowsComponent:()=>(0,i.jsx)(qt,{icon:u().peopleIcon,title:(0,i.jsx)(h().sA,{id:"workspaceModalGroupsView.empty",defaultMessage:"No groups found"}),byline:(0,i.jsx)(h().sA,{id:"workspaceModalGroupsView.empty.byline",defaultMessage:"There are no groups that match this query"})}),styles:w,loadMoreMethod:{type:"pages",onLoadNext:l,onLoadPrevious:p,hasNextPage:g,hasPrevPage:m,currentPage:c},onRowClick:function(e){e.type===Qt().T.OrganizationGroup&&e.isClickable&&S({isOpen:!0,type:"viewGroup",groupId:e.organizationGroup.groupId})},extendToFullScreen:Yt().e}),b.isOpen&&"viewGroup"===b.type&&_?(0,i.jsx)(ia,{group:_,organizationId:r.id,onDismiss:()=>S({isOpen:!1}),removePagesFromGroup:y}):null]})}function va(e){const{row:t}=e,a=(0,h().tz)(),[s,n,o]=(0,x().K8)((()=>t.groupStore?[t.groupStore.getName(),t.groupStore.getIcon(),Boolean(t.groupStore.getDeletedAt())]:[void 0,void 0,!1]),[t.groupStore]),r=s||t.organizationGroup.name||a.formatMessage(ua.untitled),l=n||t.organizationGroup.icon;return(0,i.jsx)(Rt().s7,{useSecondaryColorTitle:!Boolean(r),title:r,badge:o?(0,i.jsx)(ya,{}):null,icon:(0,i.jsx)($t().e,{icon:l,spaceId:t.organizationGroup.spaceId,size:26}),iconSize:Ot().Ev,summaryStyles:{width:`calc(100% - ${Ot().Ev}px)`,paddingBlock:8}})}function ya(){return(0,i.jsx)(V().A,{renderTooltip:()=>(0,i.jsx)(h().sA,{id:"organizationGroupsTable.membersColumn.title.deletedBadge.tooltip",defaultMessage:"This group has been deleted"}),render:e=>(0,i.jsx)(Ut().A,{...e,content:(0,i.jsx)(h().sA,{id:"organizationGroupsTable.membersColumn.title.deletedBadge.content",defaultMessage:"Deleted"})})})}function ba(e,t){const{permissionGroupsForSpace:a,loadPermissionGroupsForSpace:n}=(0,s.useContext)(_().D);(0,s.useEffect)((()=>{t||n(e)}),[e,n,t]);return(0,s.useMemo)((()=>a[e]??[]),[a,e])}const Sa=Ze().q,ja=[{propertyId:ga.id,direction:"ascending"}];function wa(e,t){const{loadPermissionGroupsForSpace:a}=(0,s.useContext)(_().D),n=ba(e),[o,i]=(0,s.useState)(),r=(0,x().K8)((()=>n.map((a=>{const s=a.group;return{id:s.group_id,groupName:s.name,groupIcon:s.icon,teamspacesCount:t.filter((e=>e.isAssociatedWithPermissionGroup(s))).length,memberCount:a.memberCount,isClickable:!1,spaceId:e}}))),[n,t,e]),l=(0,s.useMemo)((()=>{const e=null!=o&&o.length?o:ja;return function(e){let{rows:t,appliedSorts:a}=e;const s=a.map((e=>{let{propertyId:t}=e;return t===ms.id?"teamspacesCount":t===ps.id?"memberCount":e=>e.groupName.toLowerCase()})),n=a.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Pe().HB)(t)}));return $e().My(t,s,n)}({rows:r,appliedSorts:e})}),[r,o]);return{rows:l,loadPermissionGroupsForSpace:a,appliedSorts:o,setAppliedSorts:i}}var Aa=()=>a(334013),Ma=(a(944114),()=>a(106628));async function Ca(e){const{query:t,environment:a}=e,s=await Ma().T.searchActions.load(),{user:n,email:o}=await s.searchEmailUser(a,t),i=[];return n?i.push({type:"existingUser",value:n}):o&&i.push({type:"newUser",value:{email:o},source:"email"}),{inviteUsers:i,inviteGroups:[],importedContacts:[]}}function Ia(e){let{organizationId:t,spaceId:a}=e;return async function(e){const{query:s,environment:n}=e,o=await S().callApi({eventName:"getMembersInOrganizationSpace",environment:n,data:{organizationId:t,spaceId:a,query:s,limit:5},headers:(0,Zt().WS)({spaceId:a})});if("success"!==o.type)return{inviteUsers:[],inviteGroups:[],importedContacts:[]};const i=[];for(const t of o.data.members){const e=new(C().LU)(n,{table:y().oo,id:t.userId}).getModel();e&&i.push({type:"existingUser",value:e})}return{inviteUsers:i,inviteGroups:[],importedContacts:[]}}}var Ta=()=>a(629148),ka=()=>a(757695),_a=()=>a(946064);class za extends ka().Store{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"read_and_write",table:_a().y7,flowId:void 0,inputFocus:"none",emailMessage:""}}}var Da=()=>a(221723);function Pa(e){let{organizationId:t,spaceId:a,groups:n,onDismiss:o,onSubmit:r}=e;const l=(0,f().v3)(),d=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},content:{width:q().J2}})),[]),[c,u]=(0,s.useState)(!1);async function g(){if(c)return;u(!0);const e=await S().callApi({eventName:"deleteGroupsInOrganizationSpace",environment:l,data:{organizationId:t,spaceId:a,groupIds:n.map((e=>e.id))}});"success"===e.type?(o(),r&&r(),(0,w().u)({environment:l,event:{eventName:"org_console_general_delete_entity",eventProperties:{entity:"group",organization_id:t,space_id:a,num_removed:n.length}}})):"failed"===e.type&&j().f1((0,A().Hu)(M().A.getIntl(),e)),u(!1)}return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:o,render:()=>(0,i.jsx)(O().tf,{header:(0,i.jsx)(q().rQ,{icon:(0,Pt().trashIcon)(d.icon),title:(0,i.jsx)(h().sA,{id:"organization.team.settings.deleteGroups.modal.title",defaultMessage:"Are you sure you want to delete {teamCount, plural, one {this group} other {these groups}}?",values:{teamCount:n.length}}),byline:(0,i.jsx)(h().sA,{id:"organization.team.settings.deleteGroups.modal.byline",defaultMessage:"This action cannot be undone. Any pages that are private to this group will be transferred to you."})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"organization.team.settings.deleteGroups.modal.primaryAction",defaultMessage:"Delete {groupsCount, plural, one {group} other {groups}}",values:{groupsCount:n.length}}),primaryAction:g,primaryDisabled:c,secondaryText:(0,i.jsx)(h().sA,{id:"organization.team.settings.deleteGroups.modal.cancelAction",defaultMessage:"Cancel"}),secondaryAction:o,isDarkRed:!0,isLoading:c}),children:(0,i.jsx)("div",{style:d.content,children:(0,i.jsx)(Na,{groups:n})})})})}function Na(e){const{groups:t}=e,[a,n]=(0,s.useState)(""),o=(0,x().K8)((()=>t.map((e=>({id:e.id,icon:(0,i.jsx)($t().e,{icon:e.groupIcon,spaceId:e.spaceId,size:Da().iK}),name:e.groupName,byline:(0,i.jsx)(I().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"organization.team.settings.deleteGroups.modal.groupsList.item.memberCount",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:e.memberCount}})})})))),[t]),r=(0,ut().Ay)(a,o,(e=>e.name??""));return(0,i.jsx)(q().p6,{items:r,titleText:(0,i.jsx)(h().sA,{id:"organization.team.settings.deleteGroups.modal.groupsList.title",defaultMessage:"Selected groups"}),headerText:(0,i.jsx)(h().sA,{id:"organization.team.settings.deleteGroups.modal.groupsList.header",defaultMessage:"Groups ({groupsCount})",values:{groupsCount:t.length}}),headerAction:(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:a,setQueryFilter:n})})}function Ra(e){let{organizationId:t,onDismiss:a,onSubmit:n,spaceId:o,...r}=e;const l=(0,f().v3)(),d=(0,h().tz)(),{updateCacheWithRecordMap:c}=(0,s.useContext)(k().N),u=(0,Ta().E)({organizationId:t}),[g,m]=(0,s.useState)(!1),p=(0,x().K8)((()=>new za),[]),y=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:q().gA,width:q().J2,overflowY:"auto"}})),[]),{inviteTargets:b}=(0,x().K8)((()=>({inviteTargets:p.state.inviteTargets})),[p]),M=(0,x().K8)((()=>{const e=p.state.inviteTargets.length>0;return!g&&e}),[p,g]);async function C(){var e,s;m(!0);const i=null===(e=r.groupStore)||void 0===e?void 0:e.getGroupId(),u=i?[i]:null===(s=r.groups)||void 0===s?void 0:s.map((e=>e.id));if(null==u||!u.length||!M)return void m(!1);const g=b.filter((e=>"existingUser"===e.type)).map((e=>e.value.id)).filter(Pe().O9),p=await S().callApi({eventName:"updateGroupsInOrganizationSpace",environment:l,data:{organizationId:t,spaceId:o,groupIds:u,addMembers:g}});"success"===p.type?("success"===p.type&&n&&(n(),(0,w().u)({environment:l,event:{eventName:"org_console_people_update_group_in_space",eventProperties:{organization_id:t,space_id:o,update_type:"add_members"}}})),c({data:p.data}),a(),m(!1)):j().f1((0,A().Hu)(d,p))}const T=(0,x().K8)((()=>r.groupStore?r.groupStore.getName():r.groups.length?r.groups[0].groupName:d.formatMessage({id:"orgConsole.people.modal.addUsersToGroup.title.defaultSingular",defaultMessage:"group"})),[r,d]);return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:a,areaConstraint:{height:{type:"min",length:200}},render:e=>{let{sizeRange:s}=e;return(0,i.jsx)(O().tf,{showDismissButton:!1,sizeRange:s,header:(0,i.jsx)(q().rQ,{icon:(0,Dt().x)(y.icon),title:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.addUsersToGroup.title",defaultMessage:"Add members to <gray>{groupCount, plural, one {{groupName}} other {# groups}}</gray>",values:{groupCount:r.groupStore?1:r.groups.length,groupName:T,gray:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.jsx)(I().D,{colorName:"secondary",as:"span",children:t})}}}),byline:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.addUsersToGroup.byline.space",defaultMessage:"Add the following users to this group."})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.addUsersToGroup.button.add",defaultMessage:"Add members"}),primaryAction:C,primaryDisabled:!M,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.addUsersToGroup.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsxs)("div",{style:y.content,children:[(0,i.jsx)(Aa().A,{disableAutoFocus:!0,showCurrentUser:!0,parentStore:u,permissionsInviteStore:p,performSearchRequest:Ia({organizationId:t,spaceId:o})}),r.groups&&r.groups.length>1?(0,i.jsx)(Na,{groups:r.groups}):void 0]})})}})}var Ba=()=>a(704152);function La(e){let{isOpen:t,children:a}=e;const s=(0,v().IS)((e=>({outer:{position:"absolute",top:-40,left:0,zIndex:999},inner:{display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:6,background:e.popoverBackground,boxShadow:e.shadowSM,height:32,overflow:"hidden"}})),[]);return(0,i.jsx)(Wt().A,{visible:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:s.outer,children:(0,i.jsx)("div",{style:s.inner,children:a})})}function Ea(e){const{icon:t,iconSize:a,title:s,isPrimary:n,isDestructive:o,onClick:r,disabled:l,disabledTooltipText:d}=e,c=(0,v().IS)((e=>({button:{color:n?e.blueColor:o?e.text.uiRedPrimary:e.text.primary,fontSize:14,whiteSpace:"nowrap",height:"100%",alignItems:"center",justifyContent:"center",gap:4,display:"flex",paddingRight:10,paddingLeft:10,borderRadius:0,boxShadow:`1px 0 0 ${e.regularDividerColor}`,fontVariantNumeric:"tabular-nums"},icon:{height:a??20,width:a??20,fill:"currentColor"}})),[n,o,a]);return(0,i.jsx)(V().A,{disableTooltip:!l,renderTooltip:()=>d,textWrap:!0,style:{width:260},render:e=>(0,i.jsxs)(Ba().A,{style:c.button,onClick:r,disabled:l,disabledFeedback:!0,...e,children:[t?t(c.icon):void 0,s]})})}function Oa(e){let{itemsSelectedCount:t}=e;return(0,i.jsx)(h().sA,{id:"settingsConsole.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount, plural, one {1 selected} other {{itemsSelectedCount} selected}}",values:{itemsSelectedCount:t}})}var Ua=()=>a(51922),Fa=()=>a(887720),Ha=()=>a(246682);function Va(){return(0,v().IS)((()=>({tableHeader:{position:"relative",display:"flex",flexDirection:"row"},leftContent:{display:"flex",flex:"auto",flexWrap:"wrap",justifyContent:"flex-start",rowGap:4,alignItems:"flex-start",width:"100%",margin:"0 auto 12px",paddingTop:4},rightContent:{display:"flex",flex:1,justifyContent:"flex-end",alignItems:"flex-start",width:"100%",margin:"0 auto 12px",minHeight:28,gap:8},filters:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%"},multiSelect:{position:"relative"},search:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",margin:"0 auto 12px"},actionContainer:{position:"relative",display:"flex",flexDirection:"row",gap:8}})),[])}var Wa=()=>a(764880),qa=()=>a(792071),Ga=()=>a(68263),Ka=()=>a(574752),Ya=()=>a(962730),Qa=()=>a(377586),$a=()=>a(862139),Xa=()=>a(267155),Za=()=>a(856952),Ja=()=>a(457688);function es(e){let{isOpen:t,onDismiss:a,onClick:n,spaceStore:o,includeGroups:r,selectedValues:l,setSelectedValues:d,inputPlaceholder:c}=e;const u=(0,h().tz)(),g=(0,f().v3)(),{organizationOwnerRecordCache:m}=(0,s.useContext)(k().N),[p,v]=(0,s.useState)(""),b=(0,s.useMemo)((()=>l.map((e=>e.userId)).filter(Pe().O9)),[l]),S=(0,s.useMemo)((()=>l.map((e=>e.groupId)).filter(Pe().O9)),[l]),{visibleUsers:j}=(0,D().d)(o.id),{permissionGroupsForSpace:w,loadPermissionGroupsForSpace:A}=(0,s.useContext)(_().D);(0,s.useEffect)((()=>{r&&A(o.id)}),[o.id,A,r]);const M=(0,s.useMemo)((()=>{const e=w[o.id].filter((e=>{let{group:t}=e;return!(null!=S&&S.includes(t.group_id))}));return(p?(0,ut().Ay)(p,e,(e=>{let{group:t}=e;return(0,Jt().Pf)({intl:u,groupName:t.name})}),{normalizeFuzzyScore:!0}):e).slice(0,5)}),[w,o.id,S,u,p]),[{value:I}]=(0,Xe().Yb)((async()=>{const e=j.filter((e=>(0,Ga().DH)(e.role)&&!(null!=b&&b.includes(e.userId))));return(await(0,Ka().searchUsers)({environment:g,query:p,parentStore:o,userIds:e.map((e=>e.userId))})).slice(0,5)}),[p,o,b,j,g]),T=(0,s.useCallback)((e=>{const t=l.filter((t=>t.userId!==e));d(t)}),[l,d]),z=(0,s.useCallback)((e=>{const t=l.filter((t=>t.groupId!==e));d(t)}),[l,d]),P=(0,x().K8)((()=>l.map((e=>{if("user"===e.type){const t=new(C().LU)(g,{table:y().oo,id:e.userId});return(0,i.jsx)(St().A,{showRemoveButton:!0,value:t.getFullName(u)||t.getEmail(),format:dt().NY.Medium,isSingle:!1,onClickRemove:()=>T(e.userId)},e.userId)}if("group"===e.type){const t=new(C().Cv)(g,{table:Ht().n,id:(0,Ht().T1)({spacePermissionGroupId:e.groupId,spaceId:o.id}),spaceId:o.id},{inMemoryRecordCache:m});return(0,i.jsx)(St().A,{showRemoveButton:!0,value:t.getName(),format:dt().NY.Medium,isSingle:!1,onClickRemove:()=>z(e.groupId)},e.groupId)}(0,Pe().HB)(e)}))),[g,T,z,u,l,m,o.id]),N=(0,s.useCallback)((e=>{v(e.currentTarget.value)}),[]),R=e=>{const t=[...l,{type:"user",userId:e}];d(t),v("")},B=r?{includeGroups:r,onSelectGroup:e=>{const t=[...l,{type:"group",groupId:e}];d(t),v("")},permissionGroups:M}:{includeGroups:!1};return(0,i.jsx)(yt().Ay,{placementToOrigin:Ya().W.Bottom,alignmentToOrigin:Ya().C.Start,originGap:8,open:t&&(Boolean(null==I?void 0:I.length)||Boolean(M.length&&r)),popupType:Qa().n.Popup,onDismiss:a,sameWidthAsOrigin:!0,origin:(0,i.jsx)(Za().Ay,{showBorder:!0,onRemoveLastToken:()=>d([]),format:Za().le.Select,value:p,tokens:P,onChange:N,onClick:n,placeholder:c??u.formatMessage(as.membersPlaceholder),style:{borderRadius:6,padding:"6px 8px"},inputStyle:{borderRadius:6},inputFullWidth:!0}),render:()=>(0,i.jsx)(ts,{spaceStore:o,onSelectUser:R,users:I??[],query:p,...B})})}function ts(e){let{spaceStore:t,onSelectUser:a,onSelectGroup:s,includeGroups:n,users:o,permissionGroups:r,query:l}=e;if(!(null!=o&&o.length||null!=r&&r.length))return null;const d=[],c=(o??[]).map((e=>({key:e.id,render:t=>(0,i.jsx)(Ja().A,{...t,actor:(0,Wa().A7)(e)}),action:()=>{a(e.id)}})));c.length&&d.push({key:"user results",render:e=>(0,i.jsx)(Xa().z,{loading:!1,...e}),items:c});const u=n&&s?r.map((e=>{let{group:a}=e;return{key:a.group_id,render:e=>(0,i.jsx)($a()._,{menuListItemProps:e,group:qa().Bj6.fromValue(Ht().n,a),spaceStore:t}),action:()=>{s(a.group_id)}}})):[];return u.length&&d.push({key:"group results",render:e=>(0,i.jsx)(Fe().A,{title:(0,i.jsx)(h().sA,{id:"spaceMembersInput.searchDropdown.selectGroupTitle",defaultMessage:"Select a group"}),loading:!1,...e}),items:u}),(0,i.jsx)(vt().Ay,{initialFocus:l.length>0?0:void 0,type:vt().Oh.Vertical,sections:d})}const as=(0,h().YK)({membersPlaceholder:{id:"spaceMembersInput.members.placeholder",defaultMessage:"No members yet"}});function ss(e){let{onDismiss:t,spaceStore:a,organizationId:n,refetchData:o}=e;const[r,l]=(0,s.useState)(void 0),[d,c]=(0,s.useState)(void 0),g=(0,v().IS)((e=>({content:{width:q().J2},headerIcon:{width:32,height:32,fill:e.icon.secondary},icon:{width:24,height:24,fill:e.icon.secondary},iconButton:{width:32,height:32,borderRadius:6,border:`1px solid ${e.stroke.primary}`,background:e.buttonHoveredBackground},iconNameContainer:{display:"flex",gap:8},header:{marginBottom:4},iconNameSection:{marginBottom:20}})),[]),[m,p]=(0,s.useState)([]),x=(0,f().v3)(),y=async()=>{const e=m.map((e=>{let{userId:t}=e;return t})).filter(Pe().O9),s=await S().callApi({eventName:"createPermissionGroupWithMembers",environment:x,data:{spaceId:a.id,organizationId:n,name:r,icon:null==d?void 0:d.icon,userIds:e}});t(),"success"===s.type?(o(),(0,w().u)({environment:x,event:{eventName:"org_console_general_create_entity",eventProperties:{entity:"group",organization_id:n,space_id:a.id}}})):j().f1((0,A().Hu)(M().A.getIntl(),s))},b=(0,s.useCallback)((e=>{l(e.currentTarget.value)}),[]),C=(0,s.useCallback)((e=>{c(e?{pointer:{id:a.id,table:aa().NX},icon:e}:void 0)}),[a]),T=(0,s.useCallback)((()=>{z(!0)}),[]),k=(0,h().tz)(),[_,z]=(0,s.useState)(!1);return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:t,render:()=>(0,i.jsx)(O().tf,{showDismissButton:!1,header:(0,i.jsx)(q().rQ,{title:(0,i.jsx)(h().sA,{id:"createGroupModal.title",defaultMessage:"Create a new group"}),icon:(0,u().peopleIcon)(g.headerIcon),byline:(0,i.jsx)(h().sA,{id:"createGroupModal.byline",defaultMessage:"Use groups to manage access to teamspaces and pages within a workspace."})}),footer:(0,i.jsx)(q().jl,{secondaryText:(0,i.jsx)(h().sA,{id:"createGroupModal.cancel",defaultMessage:"Cancel"}),primaryText:(0,i.jsx)(h().sA,{id:"createGroupModal.create",defaultMessage:"Create group"}),primaryAction:y,secondaryAction:t}),children:(0,i.jsxs)("div",{style:g.content,children:[(0,i.jsxs)("div",{style:g.iconNameSection,children:[(0,i.jsx)("div",{style:g.header,children:(0,i.jsx)(I().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"createGroupModal.iconAndName.header",defaultMessage:"Icon & name"})})}),(0,i.jsxs)("div",{style:g.iconNameContainer,children:[(0,i.jsx)(N().B6,{disabled:!1,bucket:"public",icon:d,defaultIcon:(0,u().peopleIcon)(g.icon),isEmptyPage:!1,size:24,onChange:C,style:g.iconButton}),(0,i.jsx)(E().A,{value:r,onChange:b,placeholder:k.formatMessage(ns.groupNamePlaceholder)})]})]}),(0,i.jsx)("div",{style:g.header,children:(0,i.jsx)(I().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"createGroupModal.members.header",defaultMessage:"Members"})})}),(0,i.jsx)(es,{spaceStore:a,isOpen:_,onDismiss:()=>z(!1),onClick:T,selectedValues:m,setSelectedValues:p})]})})})}const ns=(0,h().YK)({groupNamePlaceholder:{id:"createGroupModal.groupName.placeholder",defaultMessage:"Enter a name for the group"}});var os=()=>a(663247),is=()=>a(734459),rs=()=>a(285790);function ls(e){let{isHovered:t,iconFunction:a,tooltipMessage:s,buttonProps:n}=e;const o=(0,v().IS)((e=>({container:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"right"},buttonContainer:{display:"flex",background:e.surface.elevated,padding:2,boxShadow:e.shadowSM,borderRadius:6},button:{height:20,width:20,boxShadow:"none"},icon:{color:e.icon.secondary,height:14,width:14}})),[]);return(0,i.jsx)("div",{style:o.container,children:t&&(0,i.jsx)(V().A,{renderTooltip:()=>s,render:e=>(0,i.jsx)("div",{style:o.buttonContainer,...e,children:(0,i.jsx)(rs().A,{ariaLabel:s,hasBackground:!0,icon:a,showShadow:!0,iconStyle:o.icon,style:o.button,onClick:e=>{var t;null===(t=n.onClick)||void 0===t||t.call(n,e),e.stopPropagation()},...n})})})})}function ds(e){let{groupId:t,organizationId:a,isHovered:n}=e;const o=(0,h().tz)(),r=(0,s.useMemo)((()=>(0,is().re)({organizationId:a,tabRoute:Xt().kr,properties:{subtab:Xt().DE.Groups},queryParams:{[Qf]:t}})),[a,t]);return(0,i.jsx)(ls,{isHovered:n,iconFunction:os().arrowDiagonalUpRightFillIcon,tooltipMessage:o.formatMessage(cs.viewFullDetail),buttonProps:{href:r,external:!0}})}const cs=(0,h().YK)({viewFullDetail:{defaultMessage:"View full detail",id:"organization.workspace.members.emailColumn.viewFullDetail"}}),us=(0,h().YK)({name:{id:"workspaceModalGroupsView.nameColumn.header",defaultMessage:"Name"},teams:{id:"workspaceModalGroupsView.teamspacesColumn.sortName",defaultMessage:"Teamspaces"},members:{id:"workspaceModalGroupsView.membersColumn.header",defaultMessage:"Members"}}),gs={id:"name",headerTitle:(0,i.jsx)(h().sA,{...us.name}),renderCell:e=>{const t=0===e.groupName.length?(0,i.jsx)(h().sA,{id:"workspaceModalGroupsView.untitledGroup",defaultMessage:"Untitled"}):e.groupName;return(0,i.jsx)(Rt().s7,{useThinTitle:!1,title:t,icon:(0,i.jsx)($t().e,{icon:e.groupIcon,spaceId:e.spaceId,size:Da().p8}),iconSize:Da().p8,iconMargin:Rt().Ji,summaryStyles:{width:`calc(100% - ${Da().p8+Rt().Ji}px)`}})},widthData:{widthPercent:40,minWidth:100},sortable:!1},ms={id:"teamspaces",headerTitle:(0,i.jsx)(h().sA,{id:"workspaceModalGroupsView.teamspacesColumn.header",defaultMessage:"Associated Teamspaces"}),renderCell:e=>(0,i.jsx)(I().D,{colorName:"secondary",children:(0,i.jsx)(h().sA,{defaultMessage:"{numTeamspaces} {numTeamspaces, plural, one {teamspace} other {teamspaces}}",id:"workspaceModalGroupsView.numTeamspaces",values:{numTeamspaces:e.teamspacesCount}})}),widthData:{widthPercent:30,minWidth:100},sortable:!1},ps={id:"members",headerTitle:(0,i.jsx)(h().sA,{...us.members}),renderCell:e=>(0,i.jsx)(I().D,{colorName:"secondary",children:(0,i.jsx)(h().sA,{defaultMessage:"{numMembers, plural, one {# member} other {# members}}",id:"organizationManageWorkspacesTable.numMembers",values:{numMembers:e.memberCount}})}),widthData:{widthPercent:20,minWidth:100},sortable:!1};function hs(e){return{id:"details",headerTitle:(0,i.jsx)("div",{}),renderCell:t=>(0,i.jsx)(ds,{groupId:t.id,isHovered:t.isRowHovered,organizationId:e}),widthData:{widthPercent:10,minWidth:36},sortable:!1}}const fs=[{id:gs.id,name:M().A.formatMessage(us.name),type:"title"},{id:ms.id,name:M().A.formatMessage(us.teams),type:"number"},{id:ps.id,name:M().A.formatMessage(us.members),type:"number"}];var xs=function(e){return e.CreateGroup="create-group",e.DeleteGroups="delete-groups",e.AddMembers="add-members",e}(xs||{});function vs(e){let{spaceStore:t,organizationId:a}=e;const n=(0,s.useMemo)((()=>[gs,ms,ps,hs(a)]),[a]),o=(0,v().IS)((()=>({createGroupButton:{marginBottom:8}})),[]),r=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:n,theme:e,containerMarginTop:0})),[n]),l=Va(),d=(0,s.useMemo)((()=>[t.id]),[t]),{teamStores:c}=(0,z().o)(d),g=(0,s.useMemo)((()=>Object.values(c).flat()),[c]),{rows:m,loadPermissionGroupsForSpace:p,setAppliedSorts:f,appliedSorts:x}=wa(t.id,g),{filteredRows:y,query:b,setQuery:S,loadNextPage:j,loadPrevPage:w,hasNextPage:A,hasPrevPage:M,currentPageIndex:C}=function(e){const[t,a]=(0,s.useState)(""),[n,o]=(0,s.useState)(0),i=(0,s.useMemo)((()=>{if(!e)return[];let a=e;return t&&(a=(0,ut().Ay)(t,a,(e=>e.groupName))),a}),[t,e]),r=(0,s.useMemo)((()=>{const e=n*Sa,t=e+Sa;return i.slice(e,t)}),[i,n]);(0,s.useEffect)((()=>{o(0)}),[t]);const l=(0,s.useMemo)((()=>(n+1)*Sa<i.length),[i,n]),d=n>0,c=(0,s.useCallback)((()=>{l&&o((e=>e+1))}),[l]),u=(0,s.useCallback)((()=>{d&&o((e=>e-1))}),[d]);return{query:t,setQuery:a,filteredRows:r,loadNextPage:c,loadPrevPage:u,hasNextPage:l,hasPrevPage:d,currentPageIndex:n}}(m),{selectedRows:I,handleToggleRow:T,handleSelectAllRows:k,handleUnselectAllRows:_}=Et({allPossibleRows:y}),[D,P]=(0,s.useState)(),[N,R]=(0,s.useState)(),[B,L]=(0,s.useState)(!1),E=e=>{T(e)};return(0,i.jsxs)(Z,{children:[(0,i.jsx)(Ua()._,{title:(0,i.jsx)(h().sA,{id:"organization.general.workspace.groups.title",defaultMessage:"Groups"}),byline:(0,i.jsx)(h().sA,{id:"organization.general.workspace.groups.byline",defaultMessage:"Set up groups to simplify page permissions and manage teamspace members at scale"})}),(0,i.jsx)("div",{style:l.multiSelect,children:(0,i.jsxs)(La,{isOpen:I.length>0,children:[(0,i.jsx)(Ea,{isPrimary:!0,title:(0,i.jsx)(h().sA,{id:"organization.general.workspace.groups.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:I.length}}),onClick:_}),(0,i.jsx)(Ea,{icon:Dt().x,iconSize:16,title:(0,i.jsx)(h().sA,{id:"organization.general.workspace.groups.multiselect.addMembers",defaultMessage:"Add members"}),onClick:()=>P(xs.AddMembers)}),(0,i.jsx)(Ea,{icon:Pt().trashIcon,iconSize:16,title:(0,i.jsx)(h().sA,{id:"organization.general.workspace.groups.multiselect.delete",defaultMessage:"Delete groups"}),onClick:()=>P(xs.DeleteGroups),isDestructive:!0})]})}),(0,i.jsxs)("div",{style:l.actionContainer,children:[(0,i.jsx)("div",{style:l.filters,children:(0,i.jsx)(Ha().e,{sortProperties:fs,isMenuOpen:B,setIsMenuOpen:L,onApply:e=>{L(!1),f(e),R(void 0)},currentSorts:N??x??[]})}),(0,i.jsx)("div",{style:l.search,children:m.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Fa().x,{appliedSorts:x,openSortPillMenu:e=>{e&&R([{propertyId:e,direction:"ascending"}]),L(!0)},sortProperties:fs}),(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:b,setQueryFilter:S})]})}),(0,i.jsx)(F().A,{onClick:()=>P(xs.CreateGroup),style:o.createGroupButton,children:(0,i.jsx)(h().sA,{defaultMessage:"Create new group",id:"workspaceModalGroupsView.createNewGroupButton"})})]}),(0,i.jsx)(Nt().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,rows:y,columnRenderInfo:n,styles:r,onRowClick:E,multiselect:{header:{isDisabled:!1,isSelected:y.length>0&&I.length===y.length,onClick:()=>{I.length===y.length?_():k()}},row:{getDisabledState:()=>!1,getSelectedState:e=>I.some((t=>t.id===e.id)),onClick:E}},renderNoRowsComponent:()=>(0,i.jsx)(qt,{icon:u().peopleIcon,title:(0,i.jsx)(h().sA,{id:"workspaceModalGroupsView.empty",defaultMessage:"No groups found"}),byline:(0,i.jsx)(h().sA,{id:"workspaceModalGroupsView.empty.byline",defaultMessage:"There are no groups that match this query"})}),loadMoreMethod:{type:"pages",onLoadNext:j,onLoadPrevious:w,hasNextPage:A,hasPrevPage:M,currentPage:C+1}}),D===xs.CreateGroup&&(0,i.jsx)(ss,{onDismiss:()=>P(void 0),spaceStore:t,organizationId:a,refetchData:()=>p(t.id,!0)}),D===xs.DeleteGroups&&(0,i.jsx)(Pa,{spaceId:t.id,organizationId:a,groups:I,onDismiss:()=>P(void 0),onSubmit:()=>{p(t.id,!0),_()}}),D===xs.AddMembers&&(0,i.jsx)(Ra,{spaceId:t.id,organizationId:a,groups:I,onDismiss:()=>P(void 0),onSubmit:()=>{p(t.id,!0),_()}})]})}const ys=(0,o().wt)("removePersonOutline",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M11.524 16.45h-5.79q-1.75 0-1.75-1.177 0-.696.417-1.463.424-.765 1.21-1.428a6.4 6.4 0 0 1 1.9-1.073q1.108-.417 2.489-.417.895 0 1.675.191a6.4 6.4 0 0 1 1.435.513 4.5 4.5 0 0 0-.464.43q-.22.225-.397.5A5.7 5.7 0 0 0 10 12.074q-1.135 0-2.017.32-.875.315-1.476.8-.595.48-.91.992-.314.506-.314.902 0 .096.048.137.055.04.178.04h5.824q.007.315.048.602a4 4 0 0 0 .143.581Zm-1.53-6.358a2.75 2.75 0 0 1-1.512-.438 3.2 3.2 0 0 1-1.08-1.175A3.35 3.35 0 0 1 7 6.845q0-.882.403-1.6A3.2 3.2 0 0 1 8.49 4.104a2.78 2.78 0 0 1 1.504-.424q.82 0 1.497.43.684.431 1.087 1.156.41.718.403 1.592 0 .89-.403 1.627a3.2 3.2 0 0 1-1.08 1.17 2.7 2.7 0 0 1-1.504.437m0-1.19q.471 0 .867-.266a1.95 1.95 0 0 0 .643-.739q.24-.465.24-1.039a2 2 0 0 0-.24-1.011 1.9 1.9 0 0 0-.636-.718 1.54 1.54 0 0 0-.875-.267q-.478 0-.875.26-.396.26-.636.711t-.239 1.012q0 .574.24 1.046.238.465.635.738.403.273.875.273Zm5.83 9.79a3.4 3.4 0 0 1-1.36-.274 3.5 3.5 0 0 1-1.121-.766 3.7 3.7 0 0 1-.766-1.12 3.4 3.4 0 0 1-.273-1.361q0-.725.273-1.36.28-.636.766-1.121a3.5 3.5 0 0 1 1.12-.766 3.4 3.4 0 0 1 1.361-.274q.725 0 1.36.274a3.56 3.56 0 0 1 1.88 1.886q.28.636.28 1.36 0 .719-.28 1.354a3.5 3.5 0 0 1-.765 1.128q-.486.486-1.128.76a3.3 3.3 0 0 1-1.347.28m-1.77-3.056h3.527a.44.44 0 0 0 .328-.144.43.43 0 0 0 0-.642.44.44 0 0 0-.328-.144h-3.527a.44.44 0 0 0-.328.144.44.44 0 0 0-.137.32q0 .186.137.322.135.144.328.144"})});var bs=()=>a(618659),Ss=()=>a(319625);const js={rows:[],filters:{},query:void 0,sorts:void 0,loading:!1,error:void 0,hasNextPage:!0,hasPreviousPage:!1,nextCursor:void 0},ws=1;a(803949);var As=()=>a(433847),Ms=()=>a(848538),Cs=()=>a(303129);function Is(e){let{inviteTargets:t,inviteRole:a,organizationStore:n}=e;const o=(0,f().v3)(),[r,l]=(0,s.useState)(!1);return{spaceStores:(0,Cs().l)(),loading:r,onSubmit:(0,s.useCallback)((async e=>{l(!0);const s=t.filter((e=>"existingUser"===e.type)).map((e=>e.value.id)).filter(Pe().O9),r=t.filter((e=>"newUser"===e.type&&"email"===e.source)).map((e=>e.value.email)),d=(0,Ms().jM)(a),c=await S().callApi({eventName:"bulkAddUsersToOrganizationSpaces",environment:o,data:{organizationId:n.id,existingUserIds:s,newUserEmails:r,spaceIds:e,role:d}});l(!1),"success"===c.type&&((0,w().u)({environment:o,event:{eventName:"org_console_people_add_members",eventProperties:{organization_id:n.id,space_ids:e,num_users_added:r.length+s.length}}}),1===e.length?nt().D6({label:(0,i.jsx)(h().sA,{id:"workspacesMultiSelect.toastMessage.addUsers.singleSpace.success",defaultMessage:"Successfully added users to workspace"})}):nt().D6({label:(0,i.jsx)(h().sA,{id:"workspacesMultiSelect.toastMessage.addUsers.success",defaultMessage:"Successfully added users to {numWorkspaces, plural, one {{numWorkspaces} workspace} other {{numWorkspaces} workspaces}}.",values:{numWorkspaces:e.length}})}))}),[n,o,a,t])}}var Ts=()=>a(84817);function ks(e){const{userStore:t}=e,a=(0,v().IS)((e=>({userRow:{display:"flex",alignItems:"center",padding:"6px 12px",flexDirection:"row",gap:12},name:{flex:1},email:{flex:2,maxWidth:"70%",overflow:"hidden"}})),[]),s=(0,h().tz)(),n=(0,x().K8)((()=>({name:t.getDisplayName(s),email:t.getEmail()})),[s,t]);return(0,i.jsxs)("div",{style:a.userRow,children:[(0,i.jsx)(ra().A,{userStore:t,size:28}),(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Medium",colorName:"primary",customStyles:a.name,children:n.name}),(0,i.jsx)(Ts().Y1,{align:"center-right",style:a.email,children:(0,i.jsx)(I().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:n.email})})]})}const _s=function(e){let{userIds:t}=e;const n=(0,v().IS)((e=>({userListContainer:{borderRadius:8,border:`1px solid ${e.stroke.secondary}`},userListHeader:{padding:"4px 16px",borderBottom:`1px solid ${e.stroke.secondary}`,display:"flex",alignItems:"center"},scroller:{maxHeight:200},searchInput:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%"}})),[]),o=(0,f().v3)(),r=(0,h().tz)(),l=(0,x().K8)((()=>t.map((e=>new(ht().L)(o,{table:y().oo,id:e})))),[o,t]),[d,c]=(0,s.useState)(""),u=(0,x().K8)((()=>{if(d){return(0,ut().Ay)(d,l,(e=>e.getDisplayName(r)))}return l}),[d,l,r]);return(0,i.jsxs)("div",{children:[(0,i.jsx)(I().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",as:"p",children:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.usersList.label",defaultMessage:"Selected users"})}),(0,i.jsxs)("div",{style:n.userListContainer,children:[(0,i.jsxs)("div",{style:n.userListHeader,children:[(0,i.jsx)(I().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.usersList.nameLabel",defaultMessage:"Name"})}),(0,i.jsx)("div",{style:n.searchInput,children:(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:d,setQueryFilter:c})})]}),(0,i.jsx)(a(2143).H,{type:a(756279).A.Y,style:n.scroller,children:u.map((e=>(0,i.jsx)("div",{children:(0,i.jsx)(ks,{userStore:e})},e.id)))})]})]})};var zs=()=>a(653088);function Ds(e){const{userModel:t,refreshSpaceData:a,...n}=e,o=[{type:"existingUser",value:t}],r=(0,s.useCallback)((e=>(e.forEach((e=>a(e))),Promise.resolve())),[a]);return(0,i.jsx)(Rs,{title:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.convertToMemberModalForSingleUser.title",defaultMessage:"Upgrade guest to workspace member"}),byline:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.convertToMemberModalForSingleUser.byline",defaultMessage:"Choose workspaces to grant this guest full membership and expanded access."}),buttonText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.convertToMemberModalForSingleUser.button.add",defaultMessage:"Upgrade guest"}),inviteTargets:o,inviteRole:"read_and_write",refreshPage:r,...n})}function Ps(e){const{permissionsInviteStore:t,...a}=e,s=(0,h().tz)(),{inviteRole:n,inviteTargets:o}=(0,x().K8)((()=>({inviteRole:t.state.inviteRole,inviteTargets:t.state.inviteTargets})),[t]);return(0,i.jsx)(Rs,{title:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.convertToMemberModal.title",defaultMessage:"Upgrade {count} {count, plural, one {guest} other {guests}} to {role}",values:{count:o.length,role:s.formatMessage((0,As().rd)((0,Ms().jM)(n))).toLocaleLowerCase()}}),byline:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.convertToMemberModal.byline",defaultMessage:"Upgrade the selected guests to members in your workspaces"}),buttonText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.convertToMemberModal.button.add",defaultMessage:"Upgrade guests"}),inviteTargets:o,inviteRole:n,...a})}function Ns(e){const{inviteTargets:t,...a}=e;return(0,i.jsx)(Rs,{title:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.convertToMemberForSingleWorkspaceModal.title",defaultMessage:"Upgrade {count} {count, plural, one {guest to member} other {guests to member}}",values:{count:t.length}}),byline:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.convertToMemberForSingleWorkspaceModal.byline",defaultMessage:"Upgrade following guests to full members for broader workspace access."}),buttonText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.convertToMemberForSingleWorkspaceModal.button.add",defaultMessage:"Upgrade guests"}),inviteTargets:t,inviteRole:"read_and_write",...a})}function Rs(e){let{title:t,byline:a,buttonText:n,inviteTargets:o,inviteRole:r,organizationStore:l,refreshPage:d,onDismiss:c,disabledSpaceIds:u,spaceStore:g,bylineWidthOverride:m}=e;const[p,f]=(0,s.useState)(g?[g.id]:[]),{spaceStores:x,loading:y,onSubmit:b}=Is({inviteRole:r,inviteTargets:o,organizationStore:l}),S=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:q().J2}})),[]);function j(e){f((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function w(){f((e=>{const t=x.length-((null==u?void 0:u.length)??0);return e.length!==t?x.map((e=>e.id)).filter((e=>!(null!=u&&u.includes(e)))):[]}))}async function A(){0!==p.length&&(await b(p),await d(p),c())}return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:c,render:()=>(0,i.jsx)(O().tf,{showDismissButton:!1,header:(0,i.jsx)(q().rQ,{icon:(0,Dt().x)(S.icon),title:t,byline:a,bylineWidthOverride:m}),footer:(0,i.jsx)(q().jl,{primaryText:n,primaryAction:A,primaryDisabled:0===p.length||y,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.convertToMemberModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:c}),children:(0,i.jsx)("div",{style:S.content,children:g?(0,i.jsx)(_s,{userIds:o.map((e=>e.value.id)).filter(Pe().O9)}):(0,i.jsx)(zs().O,{spaceStores:x,selectedSpaceIds:p,onSelect:j,onSelectHeader:w,disabledRowMetadata:{disabledSpaceIds:u??[],disabledByline:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.workspacesSelect.workspaceRowDisabledByline",defaultMessage:"Already a member"})}})})})})}a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698);function Bs(e){let{inviteTargets:t,organizationStore:a}=e;const n=(0,f().v3)(),[o,r]=(0,s.useState)(!1);return{spaceStores:(0,Cs().l)(),loading:o,onSubmit:(0,s.useCallback)((async e=>{r(!0);const s=t.filter((e=>"existingUser"===e.type)).map((e=>e.value.id)).filter(Pe().O9);"success"===(await S().callApi({eventName:"removeUserFromOrganizationSpaces",environment:n,data:{organizationId:a.id,userIds:s,spaceIds:e}})).type&&((0,w().u)({environment:n,event:{eventName:"org_console_people_remove_users",eventProperties:{organization_id:a.id,space_ids:e,num_users_removed:s.length}}}),1===e.length?nt().D6({label:(0,i.jsx)(h().sA,{id:"workspacesMultiSelect.toastMessage.removeUsers.success.singleWorkspace",defaultMessage:"Successfully removed users from workspace."})}):nt().D6({label:(0,i.jsx)(h().sA,{id:"workspacesMultiSelect.toastMessage.removeUsers.success",defaultMessage:"Successfully removed users from {numWorkspaces, plural, one {{numWorkspaces} workspace} other {{numWorkspaces} workspaces}}.",values:{numWorkspaces:e.length}})})),r(!1)}),[t,n,a.id])}}function Ls(e){const{userModel:t,refreshSpaceData:a,guestSpaceIds:n,...o}=e,r=[{type:"existingUser",value:t}],l=(0,s.useCallback)((e=>(e.forEach((e=>a(e))),Promise.resolve())),[a]);return(0,i.jsx)(Hs,{title:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeGuestsFromWorkspaceModalForSingleUser.title",defaultMessage:"Remove guest access"}),byline:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeGuestsFromWorkspaceModalForSingleUser.byline",defaultMessage:"Choose the workspaces you wish to remove this guest’s access."}),buttonText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeGuestsFromWorkspaceModalForSingleUser.button.remove",defaultMessage:"Remove guest access"}),inviteTargets:r,refreshPage:l,spaceIdsToDisplay:n,...o})}function Es(e){let{count:t}=e;return(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeGuestsToWorkspaceModal.title",defaultMessage:"Remove {count} {count, plural, one {guest} other {guests}} from workspace",values:{count:t}})}function Os(e){let{count:t}=e;return(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeGuestsToWorkspaceModal.button.remove",defaultMessage:"Remove {count, plural, one {guest} other {guests}}",values:{count:t}})}function Us(e){const{permissionsInviteStore:t,organizationGuests:a,...s}=e,n=(0,x().K8)((()=>t.state.inviteTargets),[t]),o=new Set;for(const i of n){const e=a.find((e=>e.userId===i.value.id)),t=e?Object.keys(e.guestPages):[];for(const a of t)o.add(a)}return(0,i.jsx)(Hs,{title:(0,i.jsx)(Es,{count:n.length}),byline:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeGuestsToWorkspaceModal.byline",defaultMessage:"Remove access to all pages within selected workspaces."}),buttonText:(0,i.jsx)(Os,{count:n.length}),inviteTargets:n,spaceIdsToDisplay:Array.from(o),...s})}function Fs(e){const{inviteTargets:t,...a}=e;return(0,i.jsx)(Hs,{title:(0,i.jsx)(Es,{count:t.length}),byline:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeGuestsFromSingleWorkspaceModal.byline",defaultMessage:"Remove the following guests from the workspace and revoke all page access."}),buttonText:(0,i.jsx)(Os,{count:t.length}),inviteTargets:t,...a})}function Hs(e){let{title:t,byline:a,buttonText:n,inviteTargets:o,organizationStore:r,refreshPage:l,onDismiss:d,spaceIdsToDisplay:c,spaceStore:u}=e;const[g,m]=(0,s.useState)(u?[u.id]:[]),{spaceStores:p,loading:f,onSubmit:x}=Bs({inviteTargets:o,organizationStore:r}),y=p.filter((e=>!c||c.includes(e.id))),b=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:q().J2}})),[]);function S(e){m((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function j(){m((e=>e.length!==y.length?y.map((e=>e.id)):[]))}async function w(){0!==g.length&&(await x(g),await l(g),d())}return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:d,render:()=>(0,i.jsx)(O().tf,{showDismissButton:!1,header:(0,i.jsx)(q().rQ,{icon:ys(b.icon),title:t,byline:a}),footer:(0,i.jsx)(q().jl,{primaryText:n,primaryAction:w,primaryDisabled:0===g.length||f,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeGuestsToWorkspaceModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:d}),children:(0,i.jsx)("div",{style:b.content,children:u?(0,i.jsx)(_s,{userIds:o.map((e=>e.value.id)).filter(Pe().O9)}):(0,i.jsx)(zs().O,{spaceStores:y,selectedSpaceIds:g,onSelect:S,onSelectHeader:j})})})})}var Vs=()=>a(537193),Ws=()=>a(125565),qs=()=>a(981982);function Gs(e){let{selectedEmailDomains:t,setSelectedEmailDomains:a,emailDomains:s,pillTitle:n}=e;const o=(0,x().K8)((()=>s.map((e=>({key:e,value:e,title:(0,i.jsx)(Ws().A,{children:e}),shortTitle:e})))),[s]);return(0,i.jsx)(qs().VX,{pillTitle:n,pillIcon:Vs().b,selectedItems:t,setSelectedItems:a,items:o})}function Ks(e){let{userId:t,organizationId:a,isHovered:n,usersType:o}=e;const r=(0,h().tz)(),l=(0,s.useMemo)((()=>(0,is().re)({organizationId:a,tabRoute:Xt().kr,properties:{subtab:o},queryParams:{userId:t}})),[a,t,o]);return(0,i.jsx)(ls,{isHovered:n,iconFunction:os().arrowDiagonalUpRightFillIcon,tooltipMessage:r.formatMessage(Ys.viewFullDetail),buttonProps:{href:l,external:!0}})}const Ys=(0,h().YK)({viewFullDetail:{defaultMessage:"View full detail",id:"organization.workspace.members.emailColumn.viewFullDetail"}}),Qs=(0,h().YK)({name:{id:"organization.workspace.guests.nameColumn.header",defaultMessage:"Name"},email:{id:"organization.workspace.guests.emailColumn.header",defaultMessage:"Email"},pages:{id:"organization.workspace.guests.pagesColumn.header",defaultMessage:"Pages"}}),$s={id:"name",headerTitle:(0,i.jsx)(h().sA,{...Qs.name}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(ca,{}):(0,i.jsx)(da,{useThinTitle:!1,userId:e.id}),widthData:{widthPercent:40,minWidth:100},sortable:!1},Xs={id:"pages",headerTitle:(0,i.jsx)(h().sA,{...Qs.pages}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:120}}):(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"organization.workspace.guests.pagesColumn.pages",defaultMessage:"{count, plural, one {# page} other {# pages}}",values:{count:e.pagesCount}})}),widthData:{widthPercent:20,minWidth:80},sortable:!1},Zs={id:"email",headerTitle:(0,i.jsx)(h().sA,{...Qs.email}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:200}}):(0,i.jsx)(bs().xF,{userId:e.id,styles:{overflow:"hidden"}}),widthData:{widthPercent:40,minWidth:100},sortable:!1};function Js(e){return{id:"details",headerTitle:(0,i.jsx)("div",{}),renderCell:t=>t.type===Qt().T.Loading?void 0:(0,i.jsx)(Ks,{userId:t.id,isHovered:t.isRowHovered,organizationId:e,usersType:"guests"}),widthData:{widthPercent:9,minWidth:36},sortable:!1}}const en=[{id:$s.id,name:M().A.formatMessage(Qs.name),type:"title"},{id:Xs.id,name:M().A.formatMessage(Qs.pages),type:"number"},{id:Zs.id,name:M().A.formatMessage(Qs.email),type:"text"}];var tn=function(e){return e.RemoveFromWorkspace="remove-from-workspace",e.ConvertToMember="convert-to-member",e}(tn||{});function an(e){let{organizationId:t,spaceStore:a}=e;const n=(0,s.useMemo)((()=>[$s,Xs,Zs,Js(t)]),[t]),o=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:n,theme:e,containerMarginTop:0})),[n]),r=Va(),l=(0,Ta().E)({organizationId:t}),{rows:d,filters:c,setFilters:g,query:m,setQuery:p,hasNextPage:b,hasPreviousPage:j,loadNextPage:w,loadPreviousPage:A,currentPage:M,sorts:I,setSorts:T,loading:k,reloadPage:z}=function(e){let{spaceId:t,organizationId:a}=e;const n=(0,f().v3)(),[o,i]=(0,s.useState)(js),[r,l]=(0,s.useState)(ws),d=(0,s.useRef)(void 0),c=(0,s.useCallback)((e=>{i((t=>({...t,filters:e}))),l(ws)}),[]),u=(0,s.useCallback)((e=>{i((t=>({...t,sorts:e}))),l(ws)}),[]),g=(0,s.useCallback)((e=>{i((t=>({...t,query:e}))),l(ws)}),[]);function m(){if(!d.current)return;const e=d.current.offset-Ze().q;return e<0?void 0:e}const p=(0,s.useCallback)((async e=>{let{cursor:s}=e;try{i((e=>({...e,loading:!0}))),d.current=s;const e=await S().callApi({eventName:"getGuestsInOrganizationSpace",environment:n,data:{organizationId:a,spaceId:t,filters:o.filters,sorts:(r=o.sorts,null==r?void 0:r.map((e=>{let{propertyId:t,direction:a}=e;if("name"===t){return{columnName:"actor",direction:a}}if("email"===t||"pages"===t){return{columnName:t,direction:a}}})).filter(Pe().O9)),query:o.query,cursor:s,limit:Ze().q},headers:(0,Zt().WS)({spaceId:t})});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,Pe().HB)(e)}i((t=>({...t,rows:e.data.guests.map((e=>({id:e.userId,pagesCount:e.guestPageCount,isClickable:!0,type:Qt().T.SingleWorkspaceGuest}))),loading:!1,error:void 0,hasNextPage:e.data.hasNextPage,hasPreviousPage:void 0!==m(),nextCursor:e.data.nextCursor})))}catch(l){const e=(0,Ss().A)(l);i((t=>({...t,loading:!1,error:e})))}var r}),[n,a,t,o.filters,o.query,o.sorts]),h=(0,s.useCallback)((async()=>{if(o.hasNextPage)return l((e=>e+1)),p({cursor:o.nextCursor})}),[p,o.nextCursor,o.hasNextPage]),x=(0,s.useCallback)((async()=>{const e=m();if(void 0!==e)return l((e=>Math.max(1,e-1))),p({cursor:{offset:e}})}),[p]),v=(0,s.useCallback)((async()=>{await p({cursor:d.current})}),[p]);return(0,s.useEffect)((()=>{p({cursor:void 0})}),[a,p]),{rows:o.rows,filters:o.filters,setFilters:c,query:o.query,setQuery:g,sorts:o.sorts,setSorts:u,hasNextPage:o.hasNextPage,hasPreviousPage:o.hasPreviousPage,loadNextPage:h,loadPreviousPage:x,reloadPage:v,currentPage:r,loading:o.loading}}({organizationId:t,spaceId:a.id}),{memberEmailDomainsForSpace:D}=(0,s.useContext)(_().D),P=(null==D?void 0:D[a.id])??[],{selectedRows:N,handleToggleRow:R,handleSelectAllRows:B,handleUnselectAllRows:L}=Et({allPossibleRows:d}),[E,O]=(0,s.useState)(),U=(0,s.useCallback)((async()=>{await z(),L()}),[z,L]),F=(0,f().v3)(),H=(0,x().K8)((()=>N.map((e=>new(C().LU)(F,{table:y().oo,id:e.id}).getModel())).filter(Pe().O9).map((e=>({type:"existingUser",value:e,spaceRole:void 0})))),[F,N]),[V,W]=(0,s.useState)(),[q,G]=(0,s.useState)(!1);return(0,i.jsxs)(Z,{children:[(0,i.jsx)(Ua()._,{title:(0,i.jsx)(h().sA,{id:"organization.general.workspace.guests.title",defaultMessage:"Guests"}),byline:(0,i.jsx)(h().sA,{id:"organization.general.workspace.guests.byline",defaultMessage:"Manage guests for page-specific access or upgrade them to members for broader permissions across the workspace"})}),(0,i.jsx)("div",{style:r.multiSelect,children:(0,i.jsxs)(La,{isOpen:N.length>0,children:[(0,i.jsx)(Ea,{isPrimary:!0,title:(0,i.jsx)(h().sA,{id:"organization.general.workspaceMembersTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:N.length}}),onClick:L}),(0,i.jsx)(Ea,{icon:Dt().x,title:(0,i.jsx)(h().sA,{id:"organization.general.workspaceGuestsTable.multiselect.convertToMember",defaultMessage:"Upgrade to member"}),onClick:()=>O(tn.ConvertToMember)}),(0,i.jsx)(Ea,{icon:ys,iconSize:20,title:(0,i.jsx)(h().sA,{id:"organization.general.workspaceGuestsTable.multiselect.remove",defaultMessage:"Remove from workspace"}),onClick:()=>O(tn.RemoveFromWorkspace)})]})}),(0,i.jsxs)("div",{style:r.actionContainer,children:[(0,i.jsxs)("div",{style:r.filters,children:[(0,i.jsx)(Ha().e,{sortProperties:en,isMenuOpen:q,setIsMenuOpen:G,onApply:e=>{G(!1),T(e),W(void 0)},currentSorts:V??I??[]}),(0,i.jsx)(Gs,{pillTitle:(0,i.jsx)(h().sA,{id:"organization.workspaceGuestsTable.emailFilter.title",defaultMessage:"Email"}),emailDomains:P,selectedEmailDomains:c.emailDomains||[],setSelectedEmailDomains:e=>{g({...c,emailDomains:e})}})]}),(0,i.jsxs)("div",{style:r.search,children:[(0,i.jsx)(Fa().x,{appliedSorts:I,openSortPillMenu:e=>{e&&W([{propertyId:e,direction:"ascending"}]),G(!0)},sortProperties:en}),(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:m,setQueryFilter:p})]})]}),(0,i.jsx)(Nt().WE,{hideHeaderRowPadding:!0,rows:k?(0,Qt().n)():d,columnRenderInfo:n,styles:o,onRowClick:e=>{e.type!==Qt().T.Loading&&R(e)},renderNoRowsComponent:()=>(0,i.jsx)(qt,{icon:u().peopleIcon,title:(0,i.jsx)(h().sA,{id:"workspaceGuestsTable.empty",defaultMessage:"No guests found"}),byline:(0,i.jsx)(h().sA,{id:"workspaceGuestsTable.empty.byline",defaultMessage:"There are no guests that match this query"})}),showRowBorders:!0,multiselect:{header:{isDisabled:k,isSelected:d.length>0&&N.length===d.length,onClick:()=>{N.length===d.length?L():B()}},row:{getDisabledState:()=>k,getSelectedState:e=>N.some((t=>t.id===e.id)),onClick:e=>{e.type!==Qt().T.Loading&&R(e)}}},loadMoreMethod:{type:"pages",onLoadNext:async()=>{await w(),L()},onLoadPrevious:async()=>{await A(),L()},hasNextPage:b,hasPrevPage:j,currentPage:M}}),l&&E===tn.ConvertToMember?(0,i.jsx)(Ns,{inviteTargets:H,organizationStore:l,onDismiss:()=>O(void 0),refreshPage:U,spaceStore:a}):null,l&&E===tn.RemoveFromWorkspace&&(0,i.jsx)(Fs,{inviteTargets:H,organizationStore:l,onDismiss:()=>O(void 0),refreshPage:U,spaceStore:a})]})}const sn={viewBox:"0 0 20 20",fittedViewBox:"3.68 2.37 15.23 17.3",svg:(0,i.jsx)("path",{d:"M10 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242M7.676 6.441c0-.842.233-1.554.624-2.042.38-.473.937-.774 1.7-.774s1.32.301 1.7.774c.391.488.624 1.2.624 2.042s-.233 1.554-.624 2.041c-.38.473-.937.774-1.7.774s-1.32-.3-1.7-.774c-.391-.487-.624-1.2-.624-2.041M10 11.63c-2.7 0-5.101 1.315-6.12 3.305-.361.706-.199 1.421.23 1.923.412.48 1.06.767 1.74.767h7.88v-1.25H5.85c-.342 0-.634-.148-.79-.33-.138-.162-.172-.336-.067-.54.761-1.488 2.672-2.626 5.007-2.626a6.7 6.7 0 0 1 2.255.381 4 4 0 0 1 .036-1.301 8 8 0 0 0-2.291-.33m7.396 4.866v-1.34a2.719 2.719 0 1 0-2.417 0v3.454l1.209 1.058 1.208-1.058-.906-1.057zm-1.907-4.38a.698.698 0 1 1 1.396 0 .698.698 0 0 1-1.396 0"})},nn=(0,o().wt)("personKey",sn);let on=function(e){return e.WorkspaceMember="workspace-member",e.Loading="loading",e}({});const rn={rows:[],filters:{},query:void 0,sorts:void 0,loading:!1,error:void 0,currentPage:1,hasNextPage:!0,hasPreviousPage:!1};var ln=()=>a(922189);const dn=[{id:"workspace-owner",title:(0,i.jsx)(h().sA,{...As().Sf.workspaceOwnerLabel}),value:"editor",caption:(0,i.jsx)(h().sA,{...As().Sf.workspaceOwnerCaption}),icon:u().peopleIcon},{id:"memberbership-admin",title:(0,i.jsx)(h().sA,{...As().Sf.membershipAdminLabel}),value:"membership_admin",caption:(0,i.jsx)(h().sA,{...As().Sf.membershipAdminCaption}),icon:ln().personCircleFillIcon},{id:"member",title:(0,i.jsx)(h().sA,{...As().Sf.memberLabel}),value:"read_and_write",caption:(0,i.jsx)(h().sA,{...As().Sf.memberCaption}),icon:g().z}];function cn(e){const{organizationStore:t,onDismiss:a,refreshPage:n,spaceId:o}=e,r=(0,x().K8)((()=>new za),[]),[l,d]=(0,s.useState)(o?[o]:[]),c=(0,x().K8)((()=>{var e;const t=r.state.inviteRole;return(null===(e=dn.find((e=>e.value===t)))||void 0===e?void 0:e.id)??dn[0].id}),[r]),u=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:q().gA,width:q().J2,overflowY:"auto"}})),[]),{inviteRole:g,inviteTargets:m}=(0,x().K8)((()=>({inviteRole:r.state.inviteRole,inviteTargets:r.state.inviteTargets})),[r]),{spaceStores:p,loading:f,onSubmit:y}=Is({inviteRole:g,inviteTargets:m,organizationStore:t}),b=(0,x().K8)((()=>{const e=l.length>0,t=r.state.inviteTargets.length>0;return!f&&e&&t}),[l,r,f]);function S(e){d((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function j(){d((e=>e.length!==p.length?p.map((e=>e.id)):[]))}function w(e){var t;const a=null===(t=dn.find((t=>t.id===e)))||void 0===t?void 0:t.value;a&&r.setState({...r.state,inviteRole:a})}async function A(){b&&(await y(l),await n(),a())}return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:a,areaConstraint:{height:{type:"min",length:400}},render:e=>{let{sizeRange:s}=e;return(0,i.jsx)(O().tf,{showDismissButton:!1,sizeRange:s,header:(0,i.jsx)(q().rQ,{icon:(0,Dt().x)(u.icon),title:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.title",defaultMessage:"Add members to workspaces"}),byline:o?(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.byline.space",defaultMessage:"Add the following users to this workspace."}):(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.byline",defaultMessage:"Select members, workspaces, and roles to grant the appropriate access to workspace content, membership management and security controls."})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.button.add",defaultMessage:"Add members"}),primaryAction:A,primaryDisabled:!b,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.addNewMembersToWorkspaceModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsxs)("div",{style:u.content,children:[(0,i.jsx)(Aa().A,{disableAutoFocus:!0,showCurrentUser:!0,parentStore:t,permissionsInviteStore:r,performSearchRequest:Ca}),(0,i.jsx)(q().hr,{selectedId:c,onChange:w,options:dn}),!o&&(0,i.jsx)(zs().O,{spaceStores:p,selectedSpaceIds:l,onSelect:S,onSelectHeader:j})]})})}})}function un(e){const{permissionsInviteStore:t,organizationStore:a,onDismiss:n,refreshPage:o,spaceStore:r,membersSpaceIds:l}=e,[d,c]=(0,s.useState)(!1),[u,g]=(0,s.useState)(r?[r.id]:[]),m=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:q().J2}})),[]),{inviteTargets:p}=(0,x().K8)((()=>({inviteTargets:t.state.inviteTargets})),[t]),{spaceStores:f,onSubmit:y}=Bs({inviteTargets:p,organizationStore:a}),b=f.filter((e=>!l||l.has(e.id)));function S(e){g((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function j(){g((e=>e.length!==b.length?b.map((e=>e.id)):[]))}async function w(){0!==u.length&&(c(!0),await y(u),await o(),n(),c(!1))}return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(O().tf,{showDismissButton:!1,header:(0,i.jsx)(q().rQ,{icon:ys(m.icon),title:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeUsersToWorkspaceModal.title",defaultMessage:"Remove members from workspace"}),byline:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeUsersToWorkspaceModal.byline",defaultMessage:"Choose workspaces to remove <bold>{count} {count, plural, one {user} other {users}}</bold> from, revoking access to all content.",values:{count:p.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeUsersToWorkspaceModal.button.remove",defaultMessage:"Remove {count, plural, one {user} other {users}}",values:{count:p.length}}),primaryAction:w,primaryDisabled:d||0===u.length,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeUsersToWorkspaceModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsx)("div",{style:m.content,children:r?(0,i.jsx)(_s,{userIds:p.map((e=>e.value.id)).filter(Pe().O9)}):(0,i.jsx)(zs().O,{spaceStores:b,selectedSpaceIds:u,onSelect:S,onSelectHeader:j})})})})}function gn(e){let{setUserRoles:t,selectedUserRoles:a,roles:s}=e;return(0,i.jsx)(qs().VX,{pillTitle:(0,i.jsx)(h().sA,{id:"organizationMembersSubTab.filters.userRole.title",defaultMessage:"Role"}),pillIcon:ln().personCircleFillIcon,selectedItems:a,setSelectedItems:t,items:s})}const mn=[{key:"owner",value:"owner",title:(0,i.jsx)(h().sA,{id:"organization.workspace.members.roleColumn.owner",defaultMessage:"Workspace owner"})},{key:"membership_admin",value:"membership_admin",title:(0,i.jsx)(h().sA,{id:"organization.workspace.members.roleColumn.membershipAdmin",defaultMessage:"Membership admin"})},{key:"member",value:"member",title:(0,i.jsx)(h().sA,{id:"organization.workspace.members.roleColumn.member",defaultMessage:"Member"})}],pn=[{key:"organizationOwner",value:"organization_owner",title:(0,i.jsx)(h().sA,{id:"organizationMembers.table.filters.userRole.organizationOwner",defaultMessage:"Organization owner"}),wrapCaption:!0},...mn];var hn=()=>a(416845);function fn(e){let{organizationId:t,userIds:a}=e;const n=(0,f().v3)(),o=(0,h().tz)(),{updateCacheWithRecordMap:i}=(0,s.useContext)(k().N);return(0,s.useCallback)((async(e,s)=>{const r=await S().callApi({eventName:"updateUserRoleInOrganizationSpace",environment:n,data:{organizationId:t,userIds:a,newRole:s,spaceId:e}});"success"===r.type?(nt().D6({label:o.formatMessage(xn.changeRolesSuccess)}),i({data:r.data})):j().f1((0,A().Hu)(M().A.getIntl(),r))}),[n,o,t,i,a])}const xn=(0,h().YK)({addUserSuccess:{id:"settingsConsole.singleUserView.workspacesTab.useUpdateUserRole.addUser",defaultMessage:"Successfully added user to space"},changeRoleSuccess:{id:"settingsConsole.singleUserView.workspacesTab.useUpdateUserRole.changeRole",defaultMessage:"Successfully updated user's role in space"},changeRolesSuccess:{id:"settingsConsole.singleUserView.workspacesTab.useUpdateUserRole.changeRoles",defaultMessage:"Successfully updated users' roles in space"}});function vn(e){const{permissionsInviteStore:t,onDismiss:a,refreshPage:s,spaceStore:n,organizationStore:o}=e,r=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:q().J2}})),[]),{inviteTargets:l}=(0,x().K8)((()=>({inviteTargets:t.state.inviteTargets})),[t]),d=fn({organizationId:o.id,userIds:l.map((e=>e.value.id)).filter(Pe().O9)});async function c(){await d(n.id,"member"),await s(),a()}return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(O().tf,{showDismissButton:!1,header:(0,i.jsx)(q().rQ,{icon:ys(r.icon),title:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.demoteUsersToMemberModal.title",defaultMessage:"Demote {count} {count, plural, one {user} other {users}} to member",values:{count:l.length}}),byline:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.demoteUsersToMemberModal.byline",defaultMessage:"Downgrade these users to members."})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.demoteUsersToMemberModal.button.demote",defaultMessage:"Demote"}),primaryAction:c,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.demoteUsersToMemberModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:r.content,children:(0,i.jsx)(_s,{userIds:l.map((e=>e.value.id)).filter(Pe().O9)})})})})}function yn(e){const{permissionsInviteStore:t,onDismiss:a,refreshPage:s,organizationStore:n,spaceStore:o}=e,r=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:q().J2}})),[]),{inviteTargets:l}=(0,x().K8)((()=>({inviteTargets:t.state.inviteTargets})),[t]),d=fn({organizationId:n.id,userIds:l.map((e=>e.value.id)).filter(Pe().O9)});async function c(){await d(o.id,"owner"),await s(),a()}return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(O().tf,{showDismissButton:!1,header:(0,i.jsx)(q().rQ,{icon:nn(r.icon),title:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.promoteUsersToWorkspaceOwnerModal.title",defaultMessage:"Promote {count} {count, plural, one {user} other {users}} to workspace owner",values:{count:l.length}}),byline:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.promoteUsersToWorkspaceOwnerModal.byline",defaultMessage:"Grant workspace owner access to these users."})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.promoteUsersToWorkspaceOwnerModal.button.promote",defaultMessage:"Promote"}),primaryAction:c,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.promoteUsersToWorkspaceOwnerModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:r.content,children:(0,i.jsx)(_s,{userIds:l.map((e=>e.value.id)).filter(Pe().O9)})})})})}const bn=new Array(Ze().q).fill(0).map(((e,t)=>({id:`loading-${t}`,isClickable:!1,type:on.Loading}))),Sn=(0,h().YK)({name:{id:"organization.workspace.members.nameColumn.header",defaultMessage:"Name"},email:{id:"organization.workspace.members.emailColumn.header",defaultMessage:"Email"},role:{id:"organization.workspace.members.roleColumn.header",defaultMessage:"Role"}}),jn={id:"name",headerTitle:(0,i.jsx)(h().sA,{...Sn.name}),renderCell:e=>e.type===on.Loading?(0,i.jsx)(ca,{}):(0,i.jsx)(da,{useThinTitle:!1,userId:e.id}),widthData:{widthPercent:33,minWidth:100},sortable:!1},wn={id:"role",headerTitle:(0,i.jsx)(h().sA,{...Sn.role}),renderCell:e=>{if(e.type===on.Loading)return(0,i.jsx)(Rt().mf,{containerStyles:{width:120}});let t=(0,i.jsx)(h().sA,{id:"organization.workspace.members.roleColumn.member",defaultMessage:"Member"});switch(e.role){case"owner":t=(0,i.jsx)(h().sA,{id:"organization.workspace.members.roleColumn.owner",defaultMessage:"Workspace owner"});break;case"membership_admin":t=(0,i.jsx)(h().sA,{id:"organization.workspace.members.roleColumn.membershipAdmin",defaultMessage:"Membership admin"})}return(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t})},widthData:{widthPercent:25,minWidth:80},sortable:!1},An={id:"email",headerTitle:(0,i.jsx)(h().sA,{...Sn.email}),renderCell:e=>e.type===on.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:200}}):(0,i.jsx)(bs().xF,{userId:e.id,styles:{overflow:"hidden"}}),widthData:{widthPercent:33,minWidth:100},sortable:!1};function Mn(e){return{id:"details",headerTitle:(0,i.jsx)("div",{}),renderCell:t=>t.type===on.Loading?void 0:(0,i.jsx)(Ks,{userId:t.id,isHovered:t.isRowHovered,organizationId:e,usersType:"members"}),widthData:{widthPercent:9,minWidth:36},sortable:!1}}const Cn=[{id:jn.id,name:M().A.formatMessage(Sn.name),type:"title"},{id:wn.id,name:M().A.formatMessage(Sn.role),type:"title"},{id:An.id,name:M().A.formatMessage(Sn.email),type:"number"}];function In(e){let{organizationId:t,spaceStore:a}=e;const n=(0,Ta().E)({organizationId:t}),o=(0,s.useMemo)((()=>[jn,wn,An,Mn(t)]),[t]),r=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:o,theme:e,containerMarginTop:0})),[o]),l=Va(),{rows:d,filters:c,setFilters:g,query:m,setQuery:p,hasNextPage:b,hasPreviousPage:j,loadNextPage:w,loadPreviousPage:A,currentPage:M,sorts:I,setSorts:T,loading:z,reloadPage:D}=function(e){let{spaceId:t,organizationId:a}=e;const n=(0,f().v3)(),{updateCacheWithRecordMap:o}=(0,s.useContext)(k().N),[i,r]=(0,s.useState)(rn),l=(0,s.useCallback)((e=>{r((t=>({...t,filters:e,currentPage:rn.currentPage})))}),[]),d=(0,s.useCallback)((e=>{r((t=>({...t,sorts:e,currentPage:rn.currentPage})))}),[]),c=(0,s.useCallback)((e=>{r((t=>({...t,query:e,currentPage:rn.currentPage})))}),[]),u=(0,s.useCallback)((async e=>{let{cursor:s}=e;try{r((e=>({...e,loading:!0})));const e=await S().callApi({eventName:"getMembersInOrganizationSpace",environment:n,data:{organizationId:a,spaceId:t,filters:i.filters,sorts:(l=i.sorts,null==l?void 0:l.map((e=>{let{propertyId:t,direction:a}=e;return"name"===t?{columnName:"actor",direction:a}:"role"===t?{columnName:"role",direction:a}:void 0})).filter(Pe().O9)),query:i.query,cursor:s,limit:Ze().q},headers:(0,Zt().WS)({spaceId:t})});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,Pe().HB)(e)}o({data:e.data}),r((t=>{let a=t.currentPage;return e.data.hasPreviousPage?null!=s&&s.previousCursorId?a-=1:null!=s&&s.nextCursorId&&(a+=1):a=rn.currentPage,{...t,rows:e.data.members.filter((e=>"none"!==e.spaceRole&&"page_guest"!==e.spaceRole)).map((e=>({id:e.userId,role:e.spaceRole,isClickable:!0,type:on.WorkspaceMember}))),loading:!1,error:void 0,hasNextPage:e.data.hasNextPage,hasPreviousPage:e.data.hasPreviousPage,currentPage:a}}))}catch(d){const e=(0,Ss().A)(d);r((t=>({...t,loading:!1,error:e})))}var l}),[n,a,t,o,i.filters,i.query,i.sorts]),g=(0,s.useCallback)((async e=>{await u({cursor:{nextCursorId:e}})}),[u]),m=(0,s.useCallback)((async e=>{await u({cursor:{previousCursorId:e}})}),[u]),p=(0,s.useCallback)((async e=>{await u({cursor:{currentCursorId:e}})}),[u]);return(0,s.useEffect)((()=>{u({cursor:void 0})}),[a,u]),{rows:i.rows,filters:i.filters,setFilters:l,query:i.query,setQuery:c,sorts:i.sorts,setSorts:d,hasNextPage:i.hasNextPage,hasPreviousPage:i.hasPreviousPage,loadNextPage:g,loadPreviousPage:m,reloadPage:p,currentPage:i.currentPage,loading:i.loading}}({organizationId:t,spaceId:a.id}),{memberEmailDomainsForSpace:P}=(0,s.useContext)(_().D),N=(null==P?void 0:P[a.id])??[],{selectedRows:R,handleToggleRow:B,handleSelectAllRows:L,handleUnselectAllRows:E}=Et({allPossibleRows:d}),[O,U]=(0,s.useState)({isOpen:!1}),[H,V]=(0,s.useState)(),[W,q]=(0,s.useState)(!1),G=(0,s.useCallback)((async()=>{var e;await D(null===(e=d[0])||void 0===e?void 0:e.id),E()}),[d,D,E]),K=(0,x().K8)((()=>new za),[]),Y=(0,f().v3)(),Q=(0,x().K8)((()=>R.map((e=>new(C().LU)(Y,{table:y().oo,id:e.id}).getModel())).filter(Pe().O9).map((e=>({type:"existingUser",value:e,spaceRole:void 0})))),[Y,R]);return(0,s.useEffect)((()=>{K.setState({...K.state,inviteTargets:Q})}),[K,Q]),(0,i.jsxs)(Z,{children:[(0,i.jsx)(Ua()._,{title:(0,i.jsx)(h().sA,{id:"organization.general.workspace.members.title",defaultMessage:"Members"}),byline:(0,i.jsx)(h().sA,{id:"organization.general.workspace.members.byline",defaultMessage:"Add, remove, or change member roles to manage access and collaboration in your workspace"})}),(0,i.jsx)("div",{style:l.multiSelect,children:(0,i.jsxs)(La,{isOpen:R.length>0,children:[(0,i.jsx)(Ea,{isPrimary:!0,title:(0,i.jsx)(h().sA,{id:"organization.general.workspaceMembersTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:R.length}}),onClick:E}),(0,i.jsx)(Ea,{disabled:R.some((e=>"owner"===e.role)),disabledTooltipText:(0,i.jsx)(h().sA,{id:"organization.general.workspaceMembersTable.multiselect.promote.disabledTooltip",defaultMessage:"Cannot promote users that are already owners"}),icon:nn,iconSize:20,title:(0,i.jsx)(h().sA,{id:"organization.general.workspaceMembersTable.multiselect.promote",defaultMessage:"Promote to workspace owner"}),onClick:()=>U({isOpen:!0,modalType:"promoteToWorkspaceOwner",userIds:R.map((e=>e.id))})}),(0,i.jsx)(Ea,{disabled:R.some((e=>"member"===e.role)),disabledTooltipText:(0,i.jsx)(h().sA,{id:"organization.general.workspaceMembersTable.multiselect.demote.disabledTooltip",defaultMessage:"Cannot demote users that are already members"}),icon:ys,iconSize:20,title:(0,i.jsx)(h().sA,{id:"organization.general.workspaceMembersTable.multiselect.demote",defaultMessage:"Demote to member"}),onClick:()=>U({isOpen:!0,modalType:"demoteToMember",userIds:R.map((e=>e.id))})}),(0,i.jsx)(Ea,{icon:ys,iconSize:20,title:(0,i.jsx)(h().sA,{id:"organization.general.workspaceMembersTable.multiselect.remove",defaultMessage:"Remove from workspace"}),onClick:()=>U({isOpen:!0,modalType:"removeFromWorkspace",userIds:R.map((e=>e.id))})})]})}),(0,i.jsxs)("div",{style:l.actionContainer,children:[(0,i.jsxs)("div",{style:l.filters,children:[(0,i.jsx)(Ha().e,{sortProperties:Cn,isMenuOpen:W,setIsMenuOpen:q,onApply:e=>{q(!1),T(e),V(void 0)},currentSorts:H??I??[]}),(0,i.jsx)(gn,{setUserRoles:e=>g({...c,roles:e}),selectedUserRoles:c.roles||[],roles:mn}),(0,i.jsx)(Gs,{pillTitle:(0,i.jsx)(h().sA,{id:"organization.workspaceMembersTable.emailFilter.title",defaultMessage:"Email"}),emailDomains:N,selectedEmailDomains:c.emailDomains||[],setSelectedEmailDomains:e=>{g({...c,emailDomains:e})}})]}),(0,i.jsxs)("div",{style:l.search,children:[(0,i.jsx)(Fa().x,{appliedSorts:I,openSortPillMenu:e=>{e&&V([{propertyId:e,direction:"ascending"}]),q(!0)},sortProperties:Cn}),(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:m,setQueryFilter:p})]}),(0,i.jsx)(F().A,{onClick:()=>U({isOpen:!0,modalType:"addMembers"}),children:(0,i.jsx)(h().sA,{defaultMessage:"Add members",id:"organization.workspaceMembersTable.addMemberButton"})})]}),(0,i.jsx)(Nt().WE,{hideHeaderRowPadding:!0,rows:z?bn:d,columnRenderInfo:o,styles:r,onRowClick:e=>{e.type!==on.Loading&&B(e)},renderNoRowsComponent:()=>(0,i.jsx)(qt,{icon:u().peopleIcon,title:(0,i.jsx)(h().sA,{id:"workspaceMembersTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(h().sA,{id:"workspaceMembersTable.empty.byline",defaultMessage:"There are no members that match this query"})}),showRowBorders:!0,multiselect:{header:{isDisabled:z,isSelected:d.length>0&&R.length===d.length,onClick:()=>{R.length===d.length?E():L()}},row:{getDisabledState:()=>z,getSelectedState:e=>R.some((t=>t.id===e.id)),onClick:e=>{e.type!==on.Loading&&B(e)}}},loadMoreMethod:{type:"pages",onLoadNext:async()=>{await w(d[d.length-1].id),E()},onLoadPrevious:async()=>{await A(d[0].id),E()},hasNextPage:b,hasPrevPage:j,currentPage:M}}),n&&O.isOpen&&"addMembers"===O.modalType&&(0,i.jsx)(cn,{organizationStore:n,onDismiss:()=>U({isOpen:!1}),refreshPage:G,spaceId:a.id}),n&&O.isOpen&&"promoteToWorkspaceOwner"===O.modalType&&(0,i.jsx)(yn,{permissionsInviteStore:K,onDismiss:()=>U({isOpen:!1}),refreshPage:G,organizationStore:n,spaceStore:a}),n&&O.isOpen&&"demoteToMember"===O.modalType&&(0,i.jsx)(vn,{permissionsInviteStore:K,organizationStore:n,onDismiss:()=>U({isOpen:!1}),refreshPage:G,spaceStore:a}),n&&O.isOpen&&"removeFromWorkspace"===O.modalType&&(0,i.jsx)(un,{permissionsInviteStore:K,organizationStore:n,onDismiss:()=>U({isOpen:!1}),refreshPage:G,spaceStore:a})]})}var Tn=()=>a(333046),kn=()=>a(317131);function _n(e){switch(e){case"editor":return"owner";case"membership_admin":return"membership_admin";default:return"member"}}function zn(e){switch(e.role){case"owner":return 1;case"membership_admin":return 2;default:return 3}}function Dn(e){if(!e.accessLevel)return 4;switch(e.accessLevel){case"open":return 1;case"closed":return 2;case"private":return 3;default:(0,Pe().HB)(e.accessLevel)}}var Pn=()=>a(480795);const Nn=Ze().q,Rn=[{propertyId:"name",direction:"ascending"}];function Bn(e){const t=(0,s.useMemo)((()=>[e]),[e]),{teamStores:a,loading:n}=(0,z().o)(t),{teamAggregateDataForSpace:o,loading:i}=(0,Pn().N)(t),r=n||i,[l,d]=(0,s.useState)(),[c,u]=(0,s.useState)(""),[g,m]=(0,s.useState)(0),p=o[e],h=(0,x().K8)((()=>(a[e]??[]).map((t=>{const a=null==p?void 0:p[t.id];return{id:t.id,spaceId:e,teamStore:t,teamName:t.getName()??"",teamIcon:t.getIcon(),ownerIds:t.getAllOwnerIds(),memberCount:(null==a?void 0:a.memberCountWithGuests)??0,accessLevel:t.getTeamAccessLevel(),isDefault:t.isDefault(),isClickable:!1,type:Qt().T.SingleWorkspaceTeam}}))),[p,a,e]),f=(0,s.useMemo)((()=>{const e=null!=l&&l.length?l:Rn;return function(e){let{rows:t,appliedSorts:a}=e;const s=a.map((e=>{let{propertyId:t}=e;return t===fo.id?"memberCount":t===ho.id?Dn:e=>e.teamName.toLowerCase()})),n=a.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Pe().HB)(t)}));return $e().My(t,s,n)}({rows:h,appliedSorts:e})}),[h,l]),v=(0,s.useMemo)((()=>c?(0,ut().Ay)(c,f,(e=>e.teamName)):f),[c,f]),y=(0,s.useMemo)((()=>{const e=g*Nn,t=e+Nn;return v.slice(e,t)}),[v,g]);(0,s.useEffect)((()=>{m(0)}),[c]);const b=(0,s.useMemo)((()=>(g+1)*Nn<v.length),[v,g]),S=g>0;return{rows:y,loadNextPage:(0,s.useCallback)((()=>{b&&m((e=>e+1))}),[b]),loadPrevPage:(0,s.useCallback)((()=>{S&&m((e=>e-1))}),[S]),hasNextPage:b,hasPrevPage:S,currentPageIndex:g,appliedSorts:l,setAppliedSorts:d,query:c,setQuery:u,loading:r}}var Ln=()=>a(300089),En=()=>a(806754),On=()=>a(486019),Un=()=>a(888867),Fn=()=>a(505412),Hn=()=>a(456663),Vn=()=>a(83842);function Wn(e){let{organizationId:t,spaceStore:a,owner:n,onDismiss:o,onSubmit:r}=e;const l=(0,f().v3)(),d=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{width:q().J2,display:"flex",flexDirection:"column",gap:q().gA},input:{paddingTop:6,paddingBottom:6}})),[]);function c(){Hn().A.reset(),o()}const u=(0,h().tz)(),[g,m]=(0,s.useState)(!1),[p,y]=(0,s.useState)([]),b=(0,x().K8)((()=>""===Hn().A.state.name||Hn().A.state.name.length>Fn().Q||Hn().A.state.description.length>Fn().z||!(n||p.length)||g),[g,n,p]),j=(0,s.useCallback)((()=>{M(!0)}),[]),[A,M]=(0,s.useState)(!1);return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:c,render:()=>(0,i.jsx)(O().tf,{header:(0,i.jsx)(q().rQ,{icon:(0,Un().peopleFillIcon)(d.icon),title:(0,i.jsx)(h().sA,{id:"organization.team.settings.createTeam.modal.title",defaultMessage:"Create a new teamspace"}),byline:(0,i.jsx)(h().sA,{id:"organization.team.settings.createTeam.modal.byline",defaultMessage:"Create a teamspace to organize your teams pages, permissions, and members. Customize the name, icon, and default permission to get started."})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"organization.team.settings.createTeam.modal.primaryAction",defaultMessage:"Create teamspace"}),primaryAction:async()=>{m(!0),await async function(){if(!n&&!p.length)return;const{name:e,icon:s,description:o,accessLevel:i}=Hn().A.state,d=n?[n]:p.map((e=>"user"===e.type?{entity_type:e.type,user_id:e.userId,type:"owner"}:"group"===e.type?{entity_type:e.type,group_id:e.groupId,type:"owner"}:void(0,Pe().HB)(e)));"success"===(await S().callApi({eventName:"createTeamInOrganizationSpace",environment:l,data:{organizationId:t,spaceId:a.id,name:e,icon:s,description:o,accessLevel:i,members:d}})).type&&(0,w().u)({environment:l,event:{eventName:"org_console_general_create_entity",eventProperties:{entity:"team",organization_id:t,space_id:a.id}}}),c(),r&&r()}(),m(!1)},primaryDisabled:b,secondaryText:(0,i.jsx)(h().sA,{id:"organization.team.settings.createTeam.modal.cancelAction",defaultMessage:"Cancel"}),secondaryAction:c}),children:(0,i.jsxs)("div",{style:d.content,children:[(0,i.jsx)("div",{children:(0,i.jsx)(Vn().TeamIconAndNameRow,{parentSpaceStore:a,hasMarginTop:!1,inputStyles:d.input})}),(0,i.jsx)("div",{children:(0,i.jsx)(Vn().TeamDescriptionRow,{hasMarginTop:!1})}),(0,i.jsx)("div",{children:(0,i.jsx)(Vn().AccessLevelSection,{parentSpaceStore:a,hasMarginTop:!1})}),!n&&(0,i.jsxs)("div",{children:[(0,i.jsx)(W().A,{children:(0,i.jsx)(h().sA,{id:"organization.team.settings.createTeam.modal.ownersLabel",defaultMessage:"Teamspace owners"})}),(0,i.jsx)(es,{spaceStore:a,isOpen:A,onDismiss:()=>M(!1),onClick:j,includeGroups:!0,selectedValues:p,setSelectedValues:y,inputPlaceholder:u.formatMessage(qn.ownersPlaceholder)})]})]})})})}const qn=(0,h().YK)({ownersPlaceholder:{id:"spaceMembersInput.owners.placeholder",defaultMessage:"No owners yet"}});var Gn=()=>a(142448);function Kn(e){let{setAccessLevels:t,selectedAccessLevels:a}=e;return(0,i.jsx)(qs().VX,{pillTitle:(0,i.jsx)(h().sA,{id:"organization.filters.teamAccessLevel.title",defaultMessage:"Access"}),pillIcon:c().h,selectedItems:a,setSelectedItems:t,items:Yn})}const Yn=[{key:"open",value:"open",title:(0,i.jsx)(h().sA,{id:"organization.table.filters.access.open",defaultMessage:"Open"})},{key:"closed",value:"closed",title:(0,i.jsx)(h().sA,{id:"organization.table.filters.access.closed",defaultMessage:"Closed"})},{key:"private",value:"private",title:(0,i.jsx)(h().sA,{id:"organization.table.filters.access.private",defaultMessage:"Private"})}];var Qn=()=>a(898808);function $n(e){let{organizationId:t,onDismiss:a,groupStore:n,teamStores:o}=e;const r=(0,f().v3)(),l=(0,h().tz)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(k().N),{loadTeamsForSpace:c}=(0,s.useContext)(_().D),[u,g]=(0,s.useState)(!1),m=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:440}})),[]);async function p(){g(!0);const e=n.getSpaceId(),s=n.getGroupId(),i=o.map((e=>e.id));if(!e||!s)return void g(!1);const u=await S().callApi({eventName:"updateGroupsInOrganizationSpace",environment:r,data:{organizationId:t,spaceId:e,groupIds:[s],removeTeams:i}});"success"===u.type?(d({data:u.data}),await c(e,!0),a(),g(!1),(0,w().u)({environment:r,event:{eventName:"org_console_people_update_group_in_space",eventProperties:{organization_id:t,space_id:e,update_type:"remove_from_team"}}})):j().f1((0,A().Hu)(l,u))}return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(O().tf,{showDismissButton:!1,header:(0,i.jsx)(q().rQ,{icon:ys(m.icon),title:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.title",defaultMessage:"Remove group from {count} {count, plural, one {teamspace} other {teamspaces}}",values:{count:o.length}}),byline:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.byline",defaultMessage:"Remove this group from the following teamspaces."})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.button.remove",defaultMessage:"Remove from {count, plural, one {teamspace} other {teamspaces}}",values:{count:o.length}}),primaryAction:p,primaryDisabled:u,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:m.content,children:(0,i.jsx)(Xn,{teamStores:o})})})})}function Xn(e){const{teamStores:t}=e,[a,n]=(0,s.useState)(""),o=(0,x().K8)((()=>t.map((e=>({id:e.id,icon:(0,i.jsx)(Qn().x,{disabled:!0,store:e,size:24}),name:e.getName(),byline:(0,i.jsx)(I().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.pagesList.item.memberCount",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:e.getRawMembership().length}})})})))),[t]),r=(0,ut().Ay)(a,o,(e=>e.name??""));return(0,i.jsx)(q().p6,{items:r,titleText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.pagesList.title",defaultMessage:"Selected teamspaces"}),headerText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeGroupFromTeamspaces.pagesList.header",defaultMessage:"Teamspaces"}),headerAction:(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:a,setQueryFilter:n})})}const Zn=(0,h().YK)({name:{id:"organization.group.teamspaces.nameColumn.header",defaultMessage:"Name"},owners:{id:"organization.group.teamspaces.ownersColumn.header",defaultMessage:"Owners"},access:{id:"organization.group.teamspaces.accessColumn.header",defaultMessage:"Access"}}),Jn={id:"name",headerTitle:(0,i.jsx)(h().sA,{...Zn.name}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(ca,{}):(0,i.jsx)(a(112772).o,{showMemberCount:!0,iconSize:28,teamStore:e.teamStore,memberCountOverride:e.memberCount}),widthData:{widthPercent:33,minWidth:100},sortable:!1},eo={id:"owners",headerTitle:(0,i.jsx)(h().sA,{...Zn.owners}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:200}}):(0,i.jsx)(io,{ownerIds:e.ownerIds,spaceId:e.spaceId}),widthData:{widthPercent:33,minWidth:100},sortable:!1},to={id:"access",headerTitle:(0,i.jsx)(h().sA,{...Zn.access}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:120}}):function(e){let t=(0,i.jsx)(h().sA,{id:"organization.workspace.teamspaces.accessColumn.unknown",defaultMessage:"Unknown"});switch(e){case"open":t=(0,i.jsx)(h().sA,{id:"organization.workspace.teamspaces.accessColumn.open",defaultMessage:"Open"});break;case"closed":t=(0,i.jsx)(h().sA,{id:"organization.workspace.teamspaces.accessColumn.closed",defaultMessage:"Closed"});break;case"private":t=(0,i.jsx)(h().sA,{id:"organization.workspace.teamspaces.accessColumn.private",defaultMessage:"Private"})}return(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t})}(e.accessLevel),widthData:{widthPercent:33,minWidth:100},sortable:!1},ao=[{id:Jn.id,name:M().A.formatMessage(Zn.name),type:"title"},{id:to.id,name:M().A.formatMessage(Zn.access),type:"title"}],so=[Jn,eo,to];var no=function(e){return e.CreateNewTeamspace="create-new-teamspace",e.RemoveGroupFromTeam="remove-from-group",e}(no||{});function oo(e){let{organizationId:t,groupStore:a,teamsState:n}=e;const{loadTeamsForSpace:o}=(0,s.useContext)(_().D),r=(0,On().F)(),l=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:so,theme:e,containerMarginTop:0})),[]),d=(0,x().K8)((()=>{const e=a.getGroupId();return e?{type:"owner",entity_type:"group",group_id:e}:void 0}),[a]),c=(0,x().K8)((()=>a.getSpaceStore()),[a]),g=(0,s.useMemo)((()=>{const e=a.getSpaceId();return e?[e]:[]}),[a]),{teamAggregateDataForSpace:m}=(0,Pn().N)(g),p=(0,x().K8)((()=>null==m?void 0:m[a.getSpaceId()]),[m,a]),f=(0,x().K8)((()=>n.teamStores.map((e=>{var t;return{type:Qt().T.OrganizationGroupMember,id:e.id,name:e.getName(),spaceId:e.getSpaceId(),teamId:e.id,teamStore:e,ownerIds:e.getAllOwnerIds(),accessLevel:e.getTeamAccessLevel(),memberCount:null==p||null===(t=p[e.id])||void 0===t?void 0:t.memberCountWithGuests,isClickable:!0}}))),[n,p]),[y,b]=(0,s.useState)(),[S,j]=(0,s.useState)({}),[w,A]=(0,s.useState)(),[M,C]=(0,s.useState)(!1),[I,T]=(0,s.useState)(),k=I??w??[],z=(0,s.useMemo)((()=>{if(!f)return[];let e=f;return S.query&&(e=(0,ut().Ay)(S.query,e,(e=>e.name||""))),S.accessLevels&&S.accessLevels.length>0&&(e=e.filter((e=>{var t;const a=e.accessLevel;return!!a&&(null===(t=S.accessLevels)||void 0===t?void 0:t.includes(a))}))),function(e){const{rows:t,appliedSorts:a}=e,s=null!=a&&a.length?a:[{propertyId:to.id,direction:"ascending"}],n=s.map((e=>{let{propertyId:t}=e;return t===to.id?Dn:t===Jn.id?"name":Dn})),o=s.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Pe().HB)(t)}));return(0,$e().My)(t,n,o)}({rows:e,appliedSorts:w})}),[f,S.accessLevels,S.query,w]),D=Math.max(1,Math.floor(z.length/Ze().q)),[P,N]=(0,s.useState)(0),R=z.slice(P*Ze().q,(P+1)*Ze().q),B=Ze().q*(P+1)<z.length,L=P>0;const{selectedRows:E,handleToggleRow:O,handleSelectAllRows:U,handleUnselectAllRows:H}=Et({allPossibleRows:R});return(0,i.jsxs)(Z,{children:[(0,i.jsx)(Ua()._,{title:(0,i.jsx)(h().sA,{id:"organization.groups.modal.teamspaces.title",defaultMessage:"Teamspaces"}),byline:(0,i.jsx)(h().sA,{id:"organization.groups.modal.teamspaces.byline",defaultMessage:"Add and remove teamspaces from this group to manage access across this workspace"})}),(0,i.jsxs)("div",{style:r.tableHeader,children:[(0,i.jsxs)("div",{style:r.leftContent,children:[(0,i.jsxs)(La,{isOpen:E.length>0,children:[(0,i.jsx)(Ea,{isPrimary:!0,title:(0,i.jsx)(h().sA,{id:"organization.group.teamspacesTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:E.length}}),onClick:H}),(0,i.jsx)(Ea,{icon:ys,title:(0,i.jsx)(h().sA,{id:"organization.group.teamspacesTable.multiselect.remove",defaultMessage:"Remove group from teamspace"}),onClick:()=>b(no.RemoveGroupFromTeam)})]}),(0,i.jsx)(En().A,{children:(0,i.jsx)(Ha().e,{sortProperties:ao,isMenuOpen:M,setIsMenuOpen:C,onApply:e=>{C(!1),A(e),T(void 0)},currentSorts:k})}),k.length>0?(0,i.jsx)(Ln().he,{}):null,(0,i.jsx)(Kn,{setAccessLevels:e=>j((t=>({...t,accessLevels:e}))),selectedAccessLevels:S.accessLevels||[]})]}),(0,i.jsxs)("div",{style:r.rightContent,children:[(0,i.jsx)(Fa().x,{appliedSorts:w,openSortPillMenu:e=>{e&&T([{propertyId:e,direction:"ascending"}]),C(!0)},sortProperties:ao}),(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:S.query,setQueryFilter:e=>{j((t=>({...t,query:e})))}}),(0,i.jsx)(F().A,{onClick:()=>{b(no.CreateNewTeamspace)},children:(0,i.jsx)(h().sA,{id:"organizationTeamspacesSubTab.button.createTeamspace",defaultMessage:"Create teamspace"})})]})]}),(0,i.jsx)(Nt().WE,{hideHeaderRowPadding:!0,rows:n.loading?(0,Qt().n)():R,columnRenderInfo:so,styles:l,onRowClick:e=>{e.type!==Qt().T.Loading&&O(e)},renderNoRowsComponent:()=>(0,i.jsx)(qt,{icon:u().peopleIcon,title:(0,i.jsx)(h().sA,{id:"teamsTable.empty",defaultMessage:"No teamspaces found"}),byline:(0,i.jsx)(h().sA,{id:"teamsTable.empty.byline",defaultMessage:"There are no teams that match this query"})}),showRowBorders:!0,multiselect:{header:{isDisabled:n.loading,isSelected:R.length>0&&E.length===R.length,onClick:()=>{E.length===R.length?H():U()}},row:{getDisabledState:()=>n.loading,getSelectedState:e=>E.some((t=>t.id===e.id)),onClick:e=>{e.type!==Qt().T.Loading&&O(e)}}},loadMoreMethod:{type:"pages",onLoadNext:()=>{N((e=>B?e+1:e)),H()},onLoadPrevious:()=>{N((e=>Math.max(e-1,0))),H()},hasNextPage:B,hasPrevPage:L,currentPage:P+1,finalPage:D}}),y===no.RemoveGroupFromTeam?(0,i.jsx)($n,{organizationId:t,onDismiss:()=>{b(void 0),H()},groupStore:a,teamStores:E.map((e=>e.teamStore))}):null,y===no.CreateNewTeamspace&&c?(0,i.jsx)(Wn,{organizationId:t,spaceStore:c,owner:d,onDismiss:()=>{b(void 0)},onSubmit:()=>{o(c.id,!0)}}):null]})}function io(e){const t=(0,Vt().A)(),s=(0,f().v3)(),{ownerIds:n,spaceId:o}=e,r=Object.values(n).flat().length,l=(0,x().K8)((()=>n.ownerUserIds.map((e=>new(C().LU)(s,{table:y().oo,id:e})))),[n.ownerUserIds,s]),d=ba(o).filter((e=>{let{group:t}=e;return n.ownerGroupIds.includes(t.group_id)})),c=l.map((e=>({renderAvatar:()=>(0,i.jsx)(ra().A,{userStore:e,size:Gn().tR,avatarShouldShowShadow:!1,iconStyle:{fontSize:12},showAvatarInTooltip:!0,hasTooltip:!0,type:"avatar"},e.id)}))),u=d.map((e=>({renderAvatar:()=>(0,i.jsx)(a(208261).h,{permissionGroup:e,hasTooltip:!0,type:"avatar"})})));return(0,i.jsx)(Gn().Qp,{avatarStyles:t.roundAvatarBorder,avatars:c.concat(u),totalCount:r,isLoading:!1,renderOverflowTooltip:()=>(0,i.jsx)(a(696601).A,{userStores:l,permissionGroups:d})})}function ro(e){let{organizationId:t,spaceId:a,teams:n,onDismiss:o,onSubmit:r}=e;const l=(0,f().v3)(),d=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},content:{width:q().J2}})),[]),[c,u]=(0,s.useState)(!1);async function g(){if(c)return;u(!0);const e=await S().callApi({eventName:"deleteTeamsInOrganization",environment:l,data:{organizationId:t,spaceId:a,teamIds:n.map((e=>e.teamStore.id))}});"success"===e.type?(o(),r&&r(),(0,w().u)({environment:l,event:{eventName:"org_console_general_delete_entity",eventProperties:{entity:"team",organization_id:t,space_id:a,num_removed:n.length}}})):"failed"===e.type&&j().f1((0,A().Hu)(M().A.getIntl(),e)),u(!1)}return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:o,render:()=>(0,i.jsx)(O().tf,{header:(0,i.jsx)(q().rQ,{icon:(0,Pt().trashIcon)(d.icon),title:(0,i.jsx)(h().sA,{id:"organization.team.settings.archiveTeam.modal.title",defaultMessage:"Are you sure you want to archive {teamCount, plural, one {this teamspace} other {these teamspaces}}?",values:{teamCount:n.length}}),byline:(0,i.jsx)(h().sA,{id:"organization.team.settings.archiveTeam.modal.byline",defaultMessage:"This action cannot be undone."})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"organization.team.settings.archiveTeam.modal.primaryAction",defaultMessage:"Archive {teamCount, plural, one {teamspace} other {teamspaces}}",values:{teamCount:n.length}}),primaryAction:g,primaryDisabled:c,secondaryText:(0,i.jsx)(h().sA,{id:"organization.team.settings.archiveTeam.modal.cancelAction",defaultMessage:"Cancel"}),secondaryAction:o,isDarkRed:!0,isLoading:c}),children:(0,i.jsx)("div",{style:d.content,children:(0,i.jsx)(lo,{teams:n})})})})}function lo(e){const{teams:t}=e,[a,n]=(0,s.useState)(""),o=(0,x().K8)((()=>t.map((e=>{let{teamStore:t,memberCount:a}=e;return{id:t.id,icon:(0,i.jsx)(Qn().x,{disabled:!0,store:t,size:24}),name:t.getName(),byline:(0,i.jsx)(I().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"organization.team.settings.archiveTeam.modal.teamsList.item.memberCount",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:a}})})}}))),[t]),r=(0,ut().Ay)(a,o,(e=>e.name??""));return(0,i.jsx)(q().p6,{items:r,titleText:(0,i.jsx)(h().sA,{id:"organization.team.settings.archiveTeam.modal.teamsList.title",defaultMessage:"Selected teamspaces"}),headerText:(0,i.jsx)(h().sA,{id:"organization.team.settings.archiveTeam.modal.teamsList.header",defaultMessage:"Teamspaces ({teamCount})",values:{teamCount:t.length}}),headerAction:(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:a,setQueryFilter:n})})}function co(e){let{organizationId:t,spaceStore:a,teams:n,onDismiss:o,onSubmit:r}=e;const l=(0,f().v3)(),d=(0,h().tz)(),c=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:q().gA,width:q().J2,overflowY:"auto"}})),[]),[u,g]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[y,b]=(0,s.useState)([]),C=(0,s.useCallback)((()=>{g(!0)}),[]);async function T(){if(m)return;p(!0);const e=n.map((e=>e.teamStore.id)),s=await S().callApi({eventName:"updateMembersInTeamsInOrganization",environment:l,data:{organizationId:t,spaceId:a.id,teamIds:e,addMembers:y.map((e=>"user"===e.type?{type:"member",entity_type:"user",user_id:e.userId}:"group"===e.type?{type:"member",entity_type:"group",group_id:e.groupId}:void(0,Pe().HB)(e)))}});"success"===s.type?(o(),r&&r(),(0,w().u)({environment:l,event:{eventName:"org_console_general_update_team_members_in_space",eventProperties:{organization_id:t,space_id:a.id,team_ids:e,num_added:y.length}}})):"failed"===s.type&&j().f1((0,A().Hu)(M().A.getIntl(),s)),p(!1)}const k=(0,x().K8)((()=>n[0].teamStore.getName()),[n]);return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:o,render:()=>(0,i.jsx)(O().tf,{header:(0,i.jsx)(q().rQ,{icon:(0,Dt().x)(c.icon),title:(0,i.jsx)(h().sA,{id:"organization.team.settings.addTeamMembers.title",defaultMessage:"Add members to <gray>{teamCount, plural, one {{teamName}} other {# teamspaces}}</gray>",values:{teamCount:n.length,teamName:k,gray:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.jsx)(I().D,{colorName:"secondary",as:"span",children:t})}}}),byline:(0,i.jsx)(h().sA,{...uo.headerByline})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{...uo.addMembers}),primaryAction:T,primaryDisabled:m,secondaryText:(0,i.jsx)(h().sA,{...uo.cancel}),secondaryAction:o,isLoading:m}),children:(0,i.jsxs)("div",{style:c.content,children:[(0,i.jsx)(es,{spaceStore:a,isOpen:u,onDismiss:()=>g(!1),onClick:C,includeGroups:!0,selectedValues:y,setSelectedValues:b,inputPlaceholder:d.formatMessage(uo.membersPlaceholder)}),n.length>1?(0,i.jsx)(lo,{teams:n}):void 0]})})})}const uo=(0,h().YK)({headerByline:{id:"organization.team.settings.addTeamMembers.byline.space",defaultMessage:"Select the members you wish to add to this teamspace."},addMembers:{id:"organization.team.settings.addTeamMembers.modal.primaryAction",defaultMessage:"Add members"},cancel:{id:"organization.team.settings.addTeamMembers.modal.cancelAction",defaultMessage:"Cancel"},membersPlaceholder:{id:"organization.team.settings.addTeamMembers.members.placeholder",defaultMessage:"Add members or groups"}}),go=(0,h().YK)({name:{id:"workspaceModalTeamsView.nameColumn.header",defaultMessage:"Name"},members:{id:"workspaceModalTeamsView.membersColumn.header",defaultMessage:"Members"},permissions:{id:"workspaceModalTeamsView.membersColumn.permissions",defaultMessage:"Access"}}),mo={id:"name",headerTitle:(0,i.jsx)(h().sA,{...go.name}),renderCell:e=>{if(e.type===Qt().T.Loading)return(0,i.jsx)(Rt().mf,{containerStyles:{width:200}});const t=0===e.teamName.length?(0,i.jsx)(h().sA,{id:"workspaceModalTeamsView.untitledGroup",defaultMessage:"Untitled"}):e.teamName;return(0,i.jsx)(Rt().s7,{useThinTitle:!1,title:t,icon:(0,i.jsx)(N().B6,{disabled:!0,icon:e.teamIcon,title:e.teamName,size:Da().p8,isLarge:!0,isEmptyPage:!1}),iconSize:Da().p8,iconMargin:Rt().Ji,summaryStyles:{width:`calc(100% - ${Da().p8+Rt().Ji+Nt().Gr}px)`}})},widthData:{widthPercent:40,minWidth:100},sortable:!1},po={id:"owners",headerTitle:(0,i.jsx)(h().sA,{id:"workspaceModalTeamsView.ownersColumn.header",defaultMessage:"Owners"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(kn().p,{}):e.ownerIds.ownerGroupIds.length>0||e.ownerIds.ownerUserIds.length>0?(0,i.jsx)(io,{ownerIds:e.ownerIds,spaceId:e.spaceId}):null,widthData:{widthPercent:20,minWidth:100},sortable:!1},ho={id:"permissions",headerTitle:(0,i.jsx)(h().sA,{...go.permissions}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Ft().Kb,{}):(0,i.jsx)(I().D,{colorName:"secondary",children:(0,Tn().X)(e.accessLevel,e.isDefault)}),widthData:{widthPercent:20,minWidth:100},sortable:!1},fo={id:"members",headerTitle:(0,i.jsx)(h().sA,{...go.members}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Ft().Kb,{}):(0,i.jsx)(I().D,{colorName:"secondary",children:(0,i.jsx)(h().sA,{defaultMessage:"{numMembers, plural, one {# member} other {# members}}",id:"workspaceModalTeamsView.membersColumn.numMembers",values:{numMembers:e.memberCount}})}),widthData:{widthPercent:20,minWidth:100},sortable:!1},xo=[mo,po,ho,fo],vo=[{id:mo.id,name:M().A.formatMessage(go.name),type:"title"},{id:fo.id,name:M().A.formatMessage(go.members),type:"number"},{id:ho.id,name:M().A.formatMessage(go.permissions),type:"title"}];var yo=function(e){return e.CreateTeam="create-team",e.ArchiveTeam="archive-team",e.AddMembers="add-members",e}(yo||{});function bo(e){let{spaceStore:t,organizationId:a}=e;const n=(0,v().IS)((()=>({createGroupButton:{marginBottom:8}})),[]),o=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:xo,theme:e,containerMarginTop:0})),[]),r=Va(),l=(0,s.useMemo)((()=>[t.id]),[t.id]),{teamStores:d}=(0,z().o)(l),{rows:c,setAppliedSorts:g,appliedSorts:m,query:p,setQuery:f,loadNextPage:y,loadPrevPage:b,hasNextPage:S,hasPrevPage:j,currentPageIndex:w,loading:A}=Bn(t.id),M=A?(0,Qt().n)():c,{loadTeamsForSpace:C}=(0,s.useContext)(_().D),{selectedRows:I,handleToggleRow:T,handleSelectAllRows:k,handleUnselectAllRows:D}=Et({allPossibleRows:c}),[P,N]=(0,s.useState)(),[R,B]=(0,s.useState)(!1),[L,E]=(0,s.useState)(),O=(0,x().K8)((()=>I.filter((e=>e.teamStore.isDefault())).length===(d[t.id]??[]).filter((e=>e.isDefault())).length),[d,I,t.id]),U=e=>{e.type!==Qt().T.Loading&&T(e)};return(0,i.jsxs)(Z,{children:[(0,i.jsx)(Ua()._,{title:(0,i.jsx)(h().sA,{id:"organization.general.workspace.teams.title",defaultMessage:"Teamspaces"}),byline:(0,i.jsx)(h().sA,{id:"workspaceModalTeamsView.byline",defaultMessage:"Manage teamspace membership and permissions"})}),(0,i.jsx)("div",{style:r.multiSelect,children:(0,i.jsxs)(La,{isOpen:I.length>0,children:[(0,i.jsx)(Ea,{isPrimary:!0,title:(0,i.jsx)(h().sA,{id:"organization.general.workspace.teams.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:I.length}}),onClick:D}),(0,i.jsx)(Ea,{icon:Dt().x,iconSize:16,title:(0,i.jsx)(h().sA,{id:"organization.general.workspace.teams.multiselect.inviteMembers",defaultMessage:"Invite members"}),onClick:()=>E(yo.AddMembers)}),(0,i.jsx)(Ea,{icon:Pt().trashIcon,iconSize:16,title:(0,i.jsx)(h().sA,{id:"organization.general.workspace.teams.multiselect.archive",defaultMessage:"Archive teamspace"}),onClick:()=>E(yo.ArchiveTeam),isDestructive:!0,disabled:O,disabledTooltipText:(0,i.jsx)(h().sA,{id:"organization.general.workspace.teams.multiselect.archive.disabledTooltip",defaultMessage:"Cannot archive the last default teamspace."})})]})}),(0,i.jsxs)("div",{style:r.actionContainer,children:[(0,i.jsx)("div",{style:r.filters,children:(0,i.jsx)(Ha().e,{sortProperties:vo,isMenuOpen:R,setIsMenuOpen:B,onApply:e=>{B(!1),g(e),N(void 0)},currentSorts:P??m??[]})}),(0,i.jsx)("div",{style:r.search,children:M.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Fa().x,{appliedSorts:m,openSortPillMenu:e=>{e&&N([{propertyId:e,direction:"ascending"}]),B(!0)},sortProperties:vo}),(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:p,setQueryFilter:f})]})}),(0,i.jsx)(F().A,{onClick:()=>E(yo.CreateTeam),style:n.createGroupButton,children:(0,i.jsx)(h().sA,{defaultMessage:"Create teamspace",id:"workspaceModalTeamsView.createTeamspaceButton"})})]}),(0,i.jsx)(Nt().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,rows:M,columnRenderInfo:xo,styles:o,renderNoRowsComponent:()=>(0,i.jsx)(qt,{icon:u().peopleIcon,title:(0,i.jsx)(h().sA,{id:"workspaceModalTeamsView.empty",defaultMessage:"No teams found"}),byline:(0,i.jsx)(h().sA,{id:"workspaceModalTeamsView.empty.byline",defaultMessage:"There are no teams that match this query"})}),loadMoreMethod:{type:"pages",onLoadNext:y,onLoadPrevious:b,hasNextPage:S,hasPrevPage:j,currentPage:w+1},onRowClick:U,multiselect:{header:{isDisabled:A,isSelected:M.length>0&&I.length===M.length,onClick:()=>{I.length===M.length?D():k()}},row:{getDisabledState:()=>A,getSelectedState:e=>I.some((t=>t.id===e.id)),onClick:U}}}),L===yo.CreateTeam&&(0,i.jsx)(Wn,{organizationId:a,spaceStore:t,onDismiss:()=>E(void 0),onSubmit:()=>C(t.id,!0)}),L===yo.AddMembers&&(0,i.jsx)(co,{organizationId:a,spaceStore:t,teams:I,onDismiss:()=>E(void 0),onSubmit:()=>{D(),C(t.id,!0)}}),L===yo.ArchiveTeam&&(0,i.jsx)(ro,{organizationId:a,spaceId:t.id,teams:I,onDismiss:()=>E(void 0),onSubmit:()=>{D(),C(t.id,!0)}})]})}var So=()=>a(331542),jo=(a(16280),()=>a(221844)),wo=()=>a(223116),Ao=()=>a(436604),Mo=()=>a(445120),Co=()=>a(148832),Io=()=>a(583521);const To={query:void 0,teamIds:[],userIds:[]};function ko(e){const t=(0,f().v3)();let a,n,o;"legalHoldId"in e?a=e.legalHoldId:"organizationId"in e?n=e.organizationId:"spaceId"in e&&(o=e.spaceId);const[{status:i,value:r},l]=(0,Xe().Yb)((async()=>{if(a||n||o){const e=await S().callApi({eventName:"getLegalHoldMembers",environment:t,data:{legalHoldId:a,organizationId:n,spaceId:o}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,Pe().HB)(e)}throw new Error("No legal hold ID, organization ID, or space ID provided.")}),[t,a,n,o]),d=(0,s.useMemo)((()=>r??[]),[r]),c=(0,s.useMemo)((()=>new Set(d)),[d]);return{loading:"pending"===i,members:d,membersSet:c,refetch:l}}function _o(e){let{spaceStores:t}=e;return(0,x().K8)((()=>t.map((e=>{var t;return{id:e.id,name:e.getName(),subscriptionTier:e.getSubscriptionTier(),icon:null===(t=e.getIcon())||void 0===t?void 0:t.icon}}))),[t])}var zo=()=>a(12193),Do=()=>a(223544),Po=()=>a(994006);const No=10;function Ro(e){let{pillTitle:t,pillIcon:a,userIds:s,guestUserIds:n,showSearch:o,...r}=e;const l=(0,f().v3)(),d=(0,h().tz)(),c=(0,v().IS)((e=>({guestIcon:{height:16,width:16,color:e.guestIconColor},groupIcon:{height:14,width:14,color:e.text.secondary,fill:"currentColor"}})),[]),u=(0,pt().T)(),g=Boolean(n),m=(0,x().K8)((()=>{const e=s.map((e=>Bo({userId:e,isGuest:!1,showCaption:g,currentUserId:u,environment:l,intl:d,iconStyles:c.guestIcon})));return n&&e.push(...n.map((e=>Bo({userId:e,isGuest:!0,showCaption:g,currentUserId:u,environment:l,intl:d,iconStyles:c.guestIcon})))),r.includeGroups&&r.permissionGroups&&e.push(...r.permissionGroups.map((e=>function(e){let{group:t,iconStyles:a}=e;const s={id:t.getGroupId(),type:"permission_group"},n=t.getSpaceId();return{key:t.getGroupId(),value:s,title:(0,i.jsx)(Do().FS,{group:t,spaceId:n}),shortTitle:t.getName(),searchTerms:[t.getName()],tokenIcon:(0,i.jsx)(N().B6,{disabled:!0,icon:t.icon?{pointer:{id:n,table:aa().NX},icon:t.icon}:void 0,size:14,isEmptyPage:!1,title:t.getName(),defaultIcon:(0,Un().peopleFillIcon)(a)})}}({group:e,iconStyles:c.groupIcon})))),e}),[s,n,r.includeGroups,r.permissionGroups,g,u,l,d,c]),p=r.includeGroups?r.selectedUsers:r.selectedUsers.map((e=>({id:e,type:"user"}))),y=r.includeGroups?r.setSelectedUsers:e=>r.setSelectedUsers(e.filter((e=>"user"===e.type)).map((e=>e.id)));return o?(0,i.jsx)(qs().V$,{pillTitle:t,pillIcon:a,selectedItems:p,setSelectedItems:y,items:m,pageSize:No,searchPlaceholder:M().A.formatMessage(r.includeGroups?Do().uU.usersAndGroupsPlaceholder:Do().uU.usersPlaceholder)}):(0,i.jsx)(qs().VX,{pillTitle:t,pillIcon:a,selectedItems:p,setSelectedItems:y,items:m})}function Bo(e){let{userId:t,isGuest:a,showCaption:s,currentUserId:n,environment:o,intl:r,iconStyles:l}=e;const d=new(ht().L)(o,{table:y().oo,id:t},{userId:n}),c={id:t,type:"user"},u=d.getDisplayName(r);return{key:t,value:c,title:s?(0,i.jsx)(Do().tp,{userStore:d,isGuest:a}):(0,i.jsx)(Po().A,{userStore:d,avatarSize:20}),shortTitle:u,searchTerms:[u.toLowerCase(),d.getEmail()].filter(Pe().O9),tokenColor:a?"rgba(218, 163, 64, 0.2)":void 0,tokenIcon:a?(0,zo().globeIcon)(l):(0,i.jsx)(ra().A,{userStore:d,size:16})}}var Lo=()=>a(296746);function Eo(e){let{selectedSpaceIds:t,setSelectedSpaceIds:a,spaceData:s}=e;const n=(0,h().tz)(),o=(0,Lo().I)(s,n);return(0,i.jsx)(qs().VX,{pillTitle:(0,i.jsx)(h().sA,{id:"organizationMembersSubTab.filters.workspaces.title",defaultMessage:"Workspace"}),pillIcon:p().V,selectedItems:t,setSelectedItems:a,items:o})}function Oo(e){let{selectedSpaceId:t,setSelectedSpaceId:a,spaceData:s,shouldHideClear:n}=e;const o=(0,h().tz)(),r=(0,Lo().I)(s,o,!0);return(0,i.jsx)(qs().G0,{pillTitle:(0,i.jsx)(h().sA,{id:"orgConsole.filters.workspace.title",defaultMessage:"Workspace"}),pillIcon:p().V,selectedItem:t,setSelectedItem:e=>{void 0!==e&&e!==t&&a(e)},items:r,shouldUseCheck:!0,shouldHidePrefix:!0,selectionRequired:!0})}var Uo=()=>a(509657),Fo=()=>a(8980);function Ho(){const e=(0,f().v3)(),[t,a]=(0,Xe().V$)((async t=>{let a;a="legalHoldExportId"in t?{legalHoldId:t.legalHoldId,legalHoldExportId:t.legalHoldExportId}:{legalHoldId:t.legalHoldId,spaceIds:t.spaceIds,teamIds:t.teamIds,userIds:t.userIds,blockIds:t.blockIds,query:t.query};const s=await S().callApi({eventName:"exportLegalHold",environment:e,data:a});if("success"===s.type)return s.data;if("failed"===s.type)throw s.error;return(0,Pe().HB)(s)}),[e]);return{loading:"pending"===t.status,exportLegalHold:a}}function Vo(e){let{onDismiss:t,onExportContentSuccess:a,legalHoldId:o,selectedSpaceId:r,selectedTeamSpaceIds:l,selectedUserIds:d,selectedPageIds:c,selectedQuery:u}=e;const g=(0,f().v3)(),{exportLegalHold:m}=Ho(),[p,x]=(0,s.useState)([]),v=async()=>{p.includes("content")&&await m({legalHoldId:o,spaceIds:[r],teamIds:l,userIds:d,blockIds:c,query:""===u?void 0:u}),p.includes("metadata")&&await Oe().AO(g,{legalHoldId:o,spaceId:r,teamIds:l,userIds:d,blockIds:c,query:""===u?void 0:u}),p.includes("content")?a():t()};return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:t,areaConstraint:{width:{type:"min",length:q().NF}},render:()=>(0,i.jsx)(O().tf,{header:(0,i.jsx)(q().rQ,{icon:(0,i.jsx)(Fo().I,{size:"xl",color:"graySecondary",icon:n().f}),title:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.exportLegalHoldContentModal.title",defaultMessage:"Export legal hold"}),bylineWidthOverride:300,byline:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.exportLegalHoldContentModal.byline",defaultMessage:"Select which format you wish to download. You will receive an email with a download link once the export is ready."})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.exportLegalHoldContentModal.buttonText",defaultMessage:"Export pages"}),primaryAction:v,primaryDisabled:!p.length,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.exportLegalHoldContentModal.secondaryText",defaultMessage:"Cancel"}),secondaryAction:t}),children:(0,i.jsxs)(ae().VP,{gap:8,width:"100%",children:[(0,i.jsx)(Uo().a,{selectAlignXAxis:"right",name:"content",selectType:"checkbox",value:"content",label:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.exportLegalHoldContentModal.pdfLabel",defaultMessage:"Export pages as PDF"}),description:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.exportLegalHoldContentModal.pdfSupportText",defaultMessage:"This link will expire in 90 days upon receipt"}),isSelected:p.includes("content"),onChange:e=>x(p.includes("content")?p.filter((e=>"content"!==e)):[...p,"content"])}),(0,i.jsx)(Uo().a,{name:"metadata",selectType:"checkbox",value:"metadata",selectAlignXAxis:"right",label:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.exportLegalHoldContentModal.csvLabel",defaultMessage:"Export metadata as CSV"}),description:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.exportLegalHoldContentModal.csvSupportText",defaultMessage:"This link will expire in 7 days upon receipt"}),isSelected:p.includes("metadata"),onChange:e=>x(p.includes("metadata")?p.filter((e=>"metadata"!==e)):[...p,"metadata"])})]})})})}var Wo=()=>a(108944),qo=()=>a(592010),Go=()=>a(421645),Ko=()=>a(773290),Yo=()=>a(625383),Qo=()=>a(744766);const $o={id:"page",headerTitle:(0,i.jsx)(h().sA,{id:"singleLegalHoldContentTable.pageColumn.header",defaultMessage:"Page"}),renderCell:e=>(0,i.jsx)(Qo().oc,{blockStore:e.blockStore}),widthData:{widthPercent:25,minWidth:280,maxWidth:280},sortable:!1},Xo={id:"location",headerTitle:(0,i.jsx)(h().sA,{id:"singleLegalHoldContentTable.locationColumn.header",defaultMessage:"Location"}),renderCell:e=>(0,i.jsx)(Go().E,{blockStore:e.blockStore,teamStore:(0,Wo().Uo)(e.blockStore)}),widthData:{widthPercent:25,minWidth:140},sortable:!1},Zo={id:"pageStatus",headerTitle:(0,i.jsx)(h().sA,{id:"singleLegalHoldContentTable.pageStatusColumn.header",defaultMessage:"Page status"}),renderCell:e=>(0,i.jsx)(a(371895).u,{pageStatus:e.pageStatus}),widthData:{widthPercent:25,minWidth:140},sortable:!1};function Jo(e){let{blockStore:t,selectedSpaceId:a}=e;const s=sa({spaceId:a});return s?(0,i.jsx)(qo().b,{blockStore:t,spaceStore:s}):null}const ei={id:"audience",headerTitle:(0,i.jsx)(h().sA,{id:"singleLegalHoldContentTable.audienceColumn.header",defaultMessage:"Audience"}),renderCell:e=>(0,i.jsx)(Jo,{blockStore:e.blockStore,selectedSpaceId:e.selectedSpaceId}),widthData:{widthPercent:25,minWidth:140},sortable:!1},ti={id:"sharedWith",headerTitle:(0,i.jsx)(h().sA,{id:"singleLegalHoldContentTable.sharedWithColumn.header",defaultMessage:"Shared with"}),renderCell:e=>(0,i.jsx)(a(604484).o,{blockStore:e.blockStore}),widthData:{widthPercent:25,minWidth:140},sortable:!1},ai={id:"lastEditedBy",headerTitle:(0,i.jsx)(h().sA,{id:"singleLegalHoldContentTable.lastEditedByColumn.header",defaultMessage:"Last edited by"}),renderCell:e=>{const t=e.blockStore.getLastEditedById();return t?(0,i.jsx)(Ko().T,{blockStore:e.blockStore,userIds:[t]}):null},widthData:{widthPercent:25,minWidth:140},sortable:!1},si={id:"lastEditedTime",headerTitle:(0,i.jsx)(h().sA,{id:"singleLegalHoldContentTable.lastEditedTimeColumn.header",defaultMessage:"Last edited on"}),renderCell:e=>0===e.blockStore.getLastEditedTime()?null:(0,i.jsx)(a(738268).Z,{lastEditedTime:e.blockStore.getLastEditedTime(),lastEditedById:e.blockStore.getLastEditedById(),deletedFromTrashTime:e.blockStore.getDeletedFromTrashTime(),movedToTrashTime:e.blockStore.getMovedToTrashTime(),pageStatus:e.pageStatus}),widthData:{widthPercent:25,minWidth:140},sortable:!1},ni={id:"createdBy",headerTitle:(0,i.jsx)(h().sA,{id:"singleLegalHoldContentTable.createdByColumn.header",defaultMessage:"Created by"}),renderCell:e=>{const t=e.blockStore.getCreatedById();return t?(0,i.jsx)(Ko().T,{blockStore:e.blockStore,userIds:[t]}):null},widthData:{widthPercent:25,minWidth:140},sortable:!1},oi={id:"createdTime",headerTitle:(0,i.jsx)(h().sA,{id:"singleLegalHoldContentTable.createdTimeColumn.header",defaultMessage:"Created on"}),renderCell:e=>(0,i.jsx)(Yo().d,{dateTs:e.blockStore.getCreatedTime()}),widthData:{widthPercent:25,minWidth:140},sortable:!1};function ii(e){let{data:t,loading:a,selectedSpaceId:n,onLoadMore:o,hasNextPage:r,selectedIds:l,onSelectAll:d,onUnselectAll:c,onSelectRow:u}=e;const g=s.useMemo((()=>[$o,Xo,Zo,ei,ti,ai,si,ni,oi]),[]),m=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:g,theme:e,containerMarginTop:0})),[g]),p=t.map((e=>{const t=e.pathIsDead()?e.pathHasDeletedPermission()?"deleted_from_trash":"in_trash":"alive";return{id:e.id,blockStore:e,selectedSpaceId:n,type:Qt().T.SingleLegalHoldPage,isClickable:!1,pageStatus:t}})),f={header:{isDisabled:a,isSelected:l.length>0&&l.length===t.length,onClick:()=>{l.length===t.length?c():d()}},row:{getDisabledState:e=>a,getSelectedState:e=>l.includes(e.id),onClick:e=>{u(e.id)}}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Nt().WE,{columnRenderInfo:g,hideHeaderRowPadding:!0,rows:p,renderNoRowsComponent:()=>!a&&(0,i.jsx)(qt,{title:(0,i.jsx)(h().sA,{id:"singleLegalHoldContentTable.empty",defaultMessage:"No pages found"}),byline:(0,i.jsx)(h().sA,{id:"singleLegalHoldContentTable.empty.byline",defaultMessage:"There are no pages that match this query"})}),styles:m,showRowBorders:!0,allowHorizontalScroll:!0,loadMoreMethod:r?{type:"button",onLoadMore:o}:void 0,setStickyHeaderRow:!0,multiselect:f,extendToFullScreen:{rightPaddingPx:64,extendTableToFullWidthOffsetPx:64}}),a?(0,i.jsx)(ae().fI,{alignItems:"center",justifyContent:"center",paddingTop:24,paddingBottom:24,children:(0,i.jsx)(So().A,{})}):null]})}const ri=(0,h().YK)({content:{id:"settingsConsole.singleLegalHoldContentTab.title",defaultMessage:"Browse Content"},contentLabel:{id:"settingsConsole.singleLegalHoldContentTab.label",defaultMessage:"View the pages currently on hold in each workspace"},placeholder:{id:"settingsConsole.singleLegalHoldContentTab.search.placeholder",defaultMessage:"Search by page name"}});function li(e){let{legalHoldId:t,setSelectedTab:a}=e;const n=(0,h().tz)(),o=_o({spaceStores:(0,Cs().l)()}),{spaceIds:r,loading:l}=function(e){const t=(0,f().v3)(),{legalHoldId:a}=e,[{status:s,value:n},o]=(0,Xe().Yb)((async()=>{const e=await S().callApi({eventName:"getLegalHoldSpaceIdsWithPages",environment:t,data:{legalHoldId:a}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,Pe().HB)(e)}),[t,a]);return{loading:"pending"===s,spaceIds:n,refetch:o}}({legalHoldId:t}),d=(0,s.useMemo)((()=>r?o.filter((e=>r.includes(e.id))):[]),[o,r]);return l?(0,i.jsxs)(Z,{children:[(0,i.jsx)(Ua()._,{title:n.formatMessage(ri.content),byline:n.formatMessage(ri.contentLabel)}),(0,i.jsx)(ae().VP,{alignItems:"center",justifyContent:"center",children:(0,i.jsx)(So().A,{})})]}):(0,i.jsx)(di,{spaceData:d,legalHoldId:t,setSelectedTab:a})}function di(e){let{spaceData:t,legalHoldId:a,setSelectedTab:o}=e;const r=(0,h().tz)(),l=(0,On().F)(),[d,c]=(0,s.useState)(!1),{availableOrganizationFeatures:u}=(0,s.useContext)(_().D),g=u.legal_holds_exports_enabled,{content:m,loading:p,loadNextPage:x,selectedSpaceId:v,setSelectedSpaceId:y,filters:b,setFilters:j,hasNextPage:w}=function(e){const t=(0,f().v3)(),{legalHoldId:a,spaceIds:n}=e,o=t.currentUser.id,[i,r]=s.useState(n[0]),[l,d]=s.useState(void 0),[c,u]=s.useState(void 0),[g,m]=s.useState(To),[p,h]=s.useState([]),{query:x,teamIds:v,userIds:y}=g,b=null==v?void 0:v.join(","),j=null==y?void 0:y.join(","),[{status:w}]=(0,Xe().Yb)((async()=>{if(!i)throw new Error("No space ID provided,");if(!o)throw new Error("Current user not found.");const e=b?b.split(","):[],s=j?j.split(","):[],n=await S().callApi({eventName:"getLegalHoldPages",environment:t,data:{id:a,spaceId:i,query:""===x?void 0:x,cursor:c,filters:e.length>0||s.length>0?{teamIds:e.length>0?e:void 0,userIds:s.length>0?s:void 0}:void 0},headers:{[Ao().B3]:i}});if("success"!==n.type){if("failed"===n.type)throw n.error;return(0,Pe().HB)(n)}{const e=(0,Io().p)({recordMapWithRoleJson:n.data.recordMap}),a=new(jo().A)({name:wo().$H,data:new(Mo().b)({[o]:e})});a.addCacheFallback(t.defaultRecordCache.inMemoryRecordCache),h((e=>{const s=[],o=new Set(e.map((e=>e.id)));for(const i of n.data.recordIds)if(!o.has(i)){const e=new(Co().B)(t,{table:ea().ev,id:i},{inMemoryRecordCache:a});s.push(e)}return[...e,...s]})),d(n.data.nextCursor)}}),[t,a,i,x,o,b,j,c],{debounce:300}),A="pending"===w;return{content:p,loading:A,filters:g,setFilters:function(e){h([]),u(void 0),m((t=>({...t,...e})))},selectedSpaceId:i,setSelectedSpaceId:function(e){h([]),u(void 0),r(e)},loadNextPage:function(){0===p.length||!l||A||u(l)},hasNextPage:void 0!==l}}({legalHoldId:a,spaceIds:t.map((e=>e.id))}),{query:A,teamIds:M,userIds:C}=b,I=s.useMemo((()=>[v]),[v]),{teamStores:T}=(0,z().o)(I),{members:k}=ko({legalHoldId:a,spaceId:v}),D=(0,s.useMemo)((()=>m.map((e=>e.id))),[m]),{selectedIds:P,handleToggleId:N,handleSelectAllIds:R,handleUnselectAllIds:B}=Lt({allPossibleIds:D});return(0,i.jsxs)(Z,{children:[(0,i.jsx)(Ua()._,{title:r.formatMessage(ri.content),byline:r.formatMessage(ri.contentLabel)}),(0,i.jsxs)("div",{style:l.tableHeader,children:[(0,i.jsxs)("div",{style:l.leftContent,children:[g&&(0,i.jsxs)(La,{isOpen:P.length>0,children:[(0,i.jsx)(Ea,{isPrimary:!0,title:(0,i.jsx)(Oa,{itemsSelectedCount:P.length}),onClick:B}),(0,i.jsx)(Ea,{icon:n().f,title:(0,i.jsx)(h().sA,{id:"singleLegalHoldContentTable.",defaultMessage:"Export pages"}),onClick:()=>{c(!0)}})]}),(0,i.jsx)(Oo,{selectedSpaceId:v,setSelectedSpaceId:e=>{y(e),j({teamIds:[]})},spaceData:t}),(0,i.jsx)(Tn().j,{selectedTeamIds:M,setSelectedTeamIds:e=>{j({teamIds:e})},teamStores:T[v],onMenuClose:()=>{}}),(0,i.jsx)(Ro,{pillTitle:(0,i.jsx)(h().sA,{id:"legalHoldContentTable.filters.holdMembers.title",defaultMessage:"Hold members"}),pillIcon:Un().peopleFillIcon,selectedUsers:C,setSelectedUsers:e=>{j({userIds:e})},userIds:k})]}),(0,i.jsxs)("div",{style:l.rightContent,children:[(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:A,setQueryFilter:e=>{e!==b.query&&j({query:e})},placeholderText:r.formatMessage(ri.placeholder)}),g&&(0,i.jsx)(F().A,{onClick:()=>c(!0),children:(0,i.jsx)(h().sA,{id:"legalHoldContentTable.button.export",defaultMessage:"Export hold"})})]})]}),(0,i.jsx)(ii,{selectedSpaceId:v,data:m,loading:p,onLoadMore:x,hasNextPage:w,selectedIds:P,onSelectAll:R,onUnselectAll:B,onSelectRow:N}),d?(0,i.jsx)(Vo,{onDismiss:()=>c(!1),onExportContentSuccess:()=>{c(!1),o("exports")},legalHoldId:a,selectedSpaceId:v,selectedTeamSpaceIds:M,selectedUserIds:C,selectedPageIds:P,selectedQuery:A}):null]})}var ci=()=>a(519143),ui=()=>a(741037),gi=()=>a(512062);var mi=()=>a(985405);function pi(e){let{workspaceIds:t,totalCount:a}=e;const n=(0,f().v3)(),{organizationOwnerRecordCache:o}=(0,s.useContext)(k().N),r=(0,x().K8)((()=>t.map((e=>new(mi().S)(n,{table:aa().NX,id:e},{inMemoryRecordCache:o})))),[t,n,o]);return(0,i.jsx)(X().$,{spaceStores:r,totalCount:a,showTooltip:!0,isLoading:!1})}function hi(e){let{status:t,createdAt:a,url:s,legalHoldId:o,legalHoldExportId:r,refetchExports:l}=e;const{getPersonalLegalHoldExportDownloadLink:d}=function(){const e=(0,f().v3)(),[t,a]=(0,Xe().V$)((async t=>{let{legalHoldExportId:a}=t;const s=await S().callApi({eventName:"getPersonalLegalHoldExportDownloadLink",environment:e,data:{legalHoldExportId:a}});if("success"===s.type)return s.data;if("failed"===s.type)throw s.error;return(0,Pe().HB)(s)}),[e]);return{loading:"pending"===t.status,getPersonalLegalHoldExportDownloadLink:a}}(),{exportLegalHold:c}=Ho(),u=(0,h().tz)(),g=Date.now()-a>ui().wU,m=async()=>{if(o&&r)try{await c({legalHoldId:o,legalHoldExportId:r}),await l()}catch(e){}},p=async()=>{if(o&&r)try{const e=await d({legalHoldExportId:r});window.open(e.downloadLink,"_blank")}catch(e){}};return"failed"===t?(0,i.jsx)(V().A,{renderTooltip:()=>(0,i.jsx)(h().sA,{defaultMessage:"Retry export",id:"singleLegalHoldExportsTable.exportRequestedOnDate.action.retry"}),render:e=>(0,i.jsx)(rs().A,{...e,icon:ci().D,onClick:m,ariaLabel:u.formatMessage({id:"singleLegalHoldExportsTable.retry",defaultMessage:"Retry"})})}):"succeeded"===t&&s?(0,i.jsx)(V().A,{renderTooltip:()=>g?(0,i.jsx)(h().sA,{defaultMessage:"Download links are only valid for 90 days. Please export again.",id:"singleLegalHoldExportsTable.exportRequestedOnDate.action.tooltip"}):(0,i.jsx)(h().sA,{defaultMessage:"Download",id:"singleLegalHoldExportsTable.exportRequestedOnDate.action.download"}),render:e=>(0,i.jsx)(rs().A,{...e,icon:n().f,disabled:g,onClick:p,ariaLabel:u.formatMessage({id:"singleLegalHoldExportsTable.download",defaultMessage:"Download"})})}):null}function fi(e){let{status:t,createdAt:a,spaceIds:s,url:n,legalHoldId:o,legalHoldExportId:r,refetchExports:l}=e;const d=(0,f().v3)(),c=null==s?void 0:s[0],u=(0,x().K8)((()=>{if(!c)return;const e=new(C().SL)(d,{table:aa().NX,id:c});return null==e?void 0:e.getName()}),[d,c]);return c&&u?(0,i.jsx)(Rt().s7,{icon:(0,i.jsx)(pi,{workspaceIds:[c],totalCount:1}),title:u,rightContent:(0,i.jsx)(hi,{createdAt:a,url:n,status:t,legalHoldId:o,legalHoldExportId:r,refetchExports:l})}):null}const xi={id:"export",headerTitle:(0,i.jsx)(h().sA,{id:"singleLegalHoldExportsTable.exportColumn.header",defaultMessage:"Export"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{includeIcon:!0,containerStyles:{width:140}}):(0,i.jsx)(fi,{status:e.status,spaceIds:e.spaceIds,createdAt:e.createdAt,url:e.s3Url,legalHoldId:e.legalHoldId,legalHoldExportId:e.id,refetchExports:e.refetchExports}),widthData:{widthPercent:20,minWidth:280,maxWidth:280},sortable:!1};function vi(e){let t,a,s,{status:n,createdAt:o}=e;switch(n){case"processing":t=(0,i.jsx)(h().sA,{id:"singleLegalHoldExportsTable.status.processing",defaultMessage:"Processing"}),a="yellow",s=gi().M.light.yellow[100];break;case"succeeded":t=(0,i.jsx)(h().sA,{id:"singleLegalHoldExportsTable.status.succeeded",defaultMessage:"Succeeded"}),s=gi().M.light.blue[100],a="blue";break;case"failed":t=(0,i.jsx)(h().sA,{id:"singleLegalHoldExportsTable.status.failed",defaultMessage:"Failed"}),s=gi().M.light.red[100],a="red";break;default:(0,Pe().HB)(n)}return Date.now()-o>ui().wU&&"succeeded"===n&&(t=(0,i.jsx)(h().sA,{id:"singleLegalHoldExportsTable.status.expired",defaultMessage:"Expired"}),s=gi().M.light.gray[100],a="gray"),(0,i.jsx)(V().A,{renderTooltip:()=>(0,i.jsx)(h().sA,{defaultMessage:"Depending on the size of export this can take up to 3 days",id:"singleLegalHoldExportsTable.status.tooltip.description"}),disableTooltip:"processing"!==n,render:e=>(0,i.jsx)("div",{...e,children:(0,i.jsx)(St().A,{format:dt().NY.Medium,value:t,isSingle:!0,showRemoveButton:!1,isRound:!0,backgroundColor:s,showColoredDot:a})})})}const yi={id:"status",headerTitle:(0,i.jsx)(h().sA,{id:"singleLegalHoldExportsTable.statusColumn.header",defaultMessage:"Status"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{includeIcon:!0,containerStyles:{width:140}}):(0,i.jsx)(vi,{status:e.status,createdAt:e.createdAt}),widthData:{widthPercent:30,minWidth:140},sortable:!1};function bi(e){let{requestedBy:t,createdAt:a}=e;const s=(0,f().v3)(),n=(0,h().tz)(),{userStore:o,fullName:r}=(0,x().K8)((()=>{if(t){const e=new(C().LU)(s,{table:y().oo,id:t});return{userStore:e,fullName:e.getFullName(n)}}return{userStore:void 0,fullName:void 0}}),[t,s,n]);return o?(0,i.jsxs)(ae().fI,{alignItems:"center",gap:12,children:[(0,i.jsx)(kn().l,{userStores:[o],useSecondaryColorTitle:!0,useIconsOnly:!0}),(0,i.jsx)(Ws().A,{isSecondaryColor:!0,children:(0,i.jsx)(h().sA,{id:"legalHoldsTable.updatedAt.byAndDate",defaultMessage:"{fullName} on {date}",values:{fullName:r,date:(0,i.jsx)(h().XU,{value:a,year:"numeric",month:"short",day:"numeric"})}})})]}):null}const Si={id:"requestedBy",headerTitle:(0,i.jsx)(h().sA,{id:"singleLegalHoldExportsTable.requestedByColumn.header",defaultMessage:"Requested by"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{includeIcon:!0,containerStyles:{width:140}}):(0,i.jsx)(bi,{requestedBy:e.createdById,createdAt:e.createdAt}),widthData:{widthPercent:30,minWidth:140},sortable:!1},ji={id:"period",headerTitle:(0,i.jsx)(h().sA,{id:"singleLegalHoldExportsTable.periodColumn.header",defaultMessage:"Period"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{includeIcon:!0,containerStyles:{width:140}}):(0,i.jsxs)(Ws().A,{isSecondaryColor:!0,children:[(0,i.jsx)(h().XU,{value:e.legalHoldStartDate,year:"numeric",month:"short",day:"numeric"})," - ",e.legalHoldEndDate?(0,i.jsx)(h().XU,{value:e.legalHoldEndDate,year:"numeric",month:"short",day:"numeric"}):(0,i.jsx)(h().XU,{value:e.createdAt,year:"numeric",month:"short",day:"numeric"})]}),widthData:{widthPercent:30,minWidth:140},sortable:!1},wi={id:"numPages",headerTitle:(0,i.jsx)(h().sA,{id:"singleLegalHoldExportsTable.numPagesColumn.header",defaultMessage:"Associated pages"}),renderCell:e=>{var t,a;return e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{includeIcon:!0,containerStyles:{width:140}}):null!==(t=e.metadata)&&void 0!==t&&t.num_pages_exported?(0,i.jsx)(Ws().A,{isSecondaryColor:!0,children:(0,i.jsx)(h().sA,{id:"singleLegalHoldExportsTable.numPages.label",defaultMessage:"{numPages} {numPages, plural, one {page} other {pages}}",values:{numPages:(0,i.jsx)(h().Gr,{value:null===(a=e.metadata)||void 0===a?void 0:a.num_pages_exported})}})}):null},widthData:{widthPercent:40,minWidth:140},sortable:!1};function Ai(e){let{data:t,legalHold:a,loading:n,currentPage:o,setCurrentPage:r,refetchExports:l}=e;const d=s.useMemo((()=>[xi,yi,Si,ji,wi]),[]),c=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:d,theme:e,containerMarginTop:0})),[d]),u=n?(0,Qt().n)():t.slice(Ze().q*(o-1),Ze().q*o).map((e=>({...e,legalHoldStartDate:null==a?void 0:a.startDate,legalHoldEndDate:null==a?void 0:a.endDate,legalHoldId:null==a?void 0:a.id,refetchExports:l,isClickable:!1,type:Qt().T.SingleLegalHoldExport}))),g=t.length>Ze().q*o,m=1!==o;return(0,i.jsx)(Nt().WE,{columnRenderInfo:d,hideHeaderRowPadding:!0,rows:u,renderNoRowsComponent:()=>(0,i.jsx)(qt,{title:(0,i.jsx)(h().sA,{id:"singleLegalHoldExportsTable.empty",defaultMessage:"No exports found"}),byline:(0,i.jsx)(h().sA,{id:"singleLegalHoldExportsTable.empty.byline",defaultMessage:"There are no exports that match this query"})}),styles:c,showRowBorders:!0,allowHorizontalScroll:!0,loadMoreMethod:{type:"pages",onLoadNext:()=>{g&&r(o+1)},onLoadPrevious:()=>{m&&r(o-1)},hasNextPage:g,hasPrevPage:m,currentPage:o},setStickyHeaderRow:!0,extendToFullScreen:{rightPaddingPx:64,extendTableToFullWidthOffsetPx:64}})}const Mi=(0,h().YK)({exports:{id:"settingsConsole.singleLegalHoldExportsTab.title",defaultMessage:"Exports"},exportsLabel:{id:"settingsConsole.singleLegalHoldExportsTab.label",defaultMessage:"View pending and completed legal hold exports"}});function Ci(e){let{legalHoldId:t,legalHold:a}=e;const n=(0,h().tz)(),[o,r]=s.useState(1),{legalHoldExports:l,loading:d,refetch:c}=function(e){const t=(0,f().v3)(),[{status:a,value:s},n]=(0,Xe().Yb)((async()=>{const a=await S().callApi({eventName:"getLegalHoldExports",environment:t,data:{legalHoldId:e}});if("success"===a.type)return a.data;if("failed"===a.type)throw a.error;return(0,Pe().HB)(a)}),[t,e]);return{loading:"pending"===a,legalHoldExports:s||[],refetch:n}}(t);return(0,i.jsxs)(Z,{children:[(0,i.jsx)(Ua()._,{title:n.formatMessage(Mi.exports),byline:n.formatMessage(Mi.exportsLabel)}),(0,i.jsx)(Ai,{legalHold:a,data:l,loading:d,currentPage:o,setCurrentPage:r,refetchExports:c})]})}var Ii=()=>a(379951);function Ti(){const e=(0,f().v3)(),[t,a]=(0,Xe().V$)((async t=>{let{legalHoldId:a,name:s,description:n,icon:o,status:i,userIds:r}=t;const l=await S().callApi({eventName:"updateLegalHold",environment:e,data:{legalHoldId:a,name:s,description:n,icon:o,status:i,userIds:r}});if("success"===l.type)return l.data;if("failed"===l.type)throw l.error;return(0,Pe().HB)(l)}),[e]);return{loading:"pending"===t.status,updateLegalHold:a}}var ki=()=>a(381349),_i=()=>a(64e3),zi=()=>a(15144),Di=()=>a(15936),Pi=()=>a(804059);const Ni=(0,o().wt)("shieldSlash",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M4.19 11.425V6.619l1.29 1.285v3.268q0 .751.206 1.278.205.527.67.978.464.444 1.25.95a99 99 0 0 0 1.97 1.217q.142.089.232.123a.4.4 0 0 0 .157.034q.075 0 .157-.034a2 2 0 0 0 .24-.123 81 81 0 0 0 1.736-1.074l.984.992q-.525.342-1.183.717-.656.384-1.456.82-.13.069-.26.103a.8.8 0 0 1-.218.041.8.8 0 0 1-.219-.04 1.2 1.2 0 0 1-.26-.103A47 47 0 0 1 7 15.6q-1.011-.635-1.634-1.237a3.8 3.8 0 0 1-.895-1.299q-.28-.704-.28-1.64Zm10.978 2.208-1.012-1.012q.157-.3.226-.65a4 4 0 0 0 .075-.8V6.477a.6.6 0 0 0-.048-.267q-.048-.096-.191-.144l-.711-.253q-.397-.15-.834-.307a126 126 0 0 0-1.688-.615 32 32 0 0 0-.657-.24 2 2 0 0 0-.205-.061.65.65 0 0 0-.314 0 3 3 0 0 0-.199.061q-.225.075-.52.185-.293.102-.635.226l-1.367.492-1.019-1.027q.555-.205 1.183-.43a59 59 0 0 1 1.176-.417q.54-.185.827-.28.17-.042.355-.076a1.7 1.7 0 0 1 .356-.04q.17 0 .355.033.192.034.363.082.218.075.622.22.41.143.909.32a64 64 0 0 1 1.9.684q.411.15.636.246.506.218.745.5.246.279.246.888v5.168q0 .67-.137 1.21a3.4 3.4 0 0 1-.437.998m.451 3.199L2.863 4.09a.54.54 0 0 1-.15-.39q0-.232.15-.376.165-.165.39-.164.225 0 .39.164L16.392 16.06a.51.51 0 0 1 .157.39q0 .225-.157.382a.5.5 0 0 1-.383.164.53.53 0 0 1-.39-.164"})});let Ri=function(e){return e.ThreeMonths="three-months",e.SixMonths="six-months",e.OneYear="one-year",e}({});Object.values(Ri);const Bi={roles:["organization_owner","owner","membership_admin","member"]},Li=(0,h().YK)({organizationOwnerLabel:{id:"organizationMember.owner.label",defaultMessage:"Organization owner"}});var Ei=()=>a(463830),Oi=()=>a(406699),Ui=()=>a(893468);function Fi(){const e=(0,v().IS)((e=>({lockShieldIcon:{width:16,height:16,color:e.text.tertiary}})),[]);return(0,i.jsx)(V().A,{renderTooltip:()=>(0,i.jsx)(h().sA,{defaultMessage:"This user is placed in a legal hold in this organization.",id:"userSummary.legalHoldTooltip"}),render:t=>(0,i.jsx)("div",{...t,children:(0,a(373204).K)(e.lockShieldIcon)})})}function Hi(e){const{permissionsInviteStore:t,organizationStore:a,onDismiss:n,refreshPage:o}=e,[r,l]=(0,s.useState)(!1),[d,c]=(0,s.useState)([]),u=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:q().J2}})),[]),{inviteRole:g,inviteTargets:m}=(0,x().K8)((()=>({inviteRole:t.state.inviteRole,inviteTargets:t.state.inviteTargets})),[t]),{spaceStores:p,onSubmit:f}=Is({inviteRole:g,inviteTargets:m,organizationStore:a});function y(e){c((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}function b(){c((e=>e.length!==p.length?p.map((e=>e.id)):[]))}async function S(){0!==d.length&&(l(!0),await f(d),await o(),n(),l(!1))}return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(O().tf,{showDismissButton:!1,header:(0,i.jsx)(q().rQ,{icon:(0,Dt().x)(u.icon),title:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.addUsersToWorkspaceModal.title",defaultMessage:"Add members to workspace"}),byline:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.addUsersToWorkspaceModal.byline",defaultMessage:"Choose workspaces to add <bold>{count} {count, plural, one {user} other {users}}</bold> as {count, plural, one {a workspace member} other {workspace members}}, granting access to workspace content and default teamspaces.",values:{count:m.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.addUsersToWorkspaceModal.button.add",defaultMessage:"Add users"}),primaryAction:S,primaryDisabled:r||0===d.length,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.addUsersToWorkspaceModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsx)("div",{style:u.content,children:(0,i.jsx)(zs().O,{spaceStores:p,selectedSpaceIds:d,onSelect:y,onSelectHeader:b})})})})}function Vi(e){let{permissionsInviteStore:t,organizationStore:a,onDismiss:n,refreshPage:o}=e;const r=(0,h().tz)(),l=(0,f().v3)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(k().N),[c,u]=(0,s.useState)(!1),g=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:q().gA,height:"fit-content",width:q().J2}})),[]),m=(0,x().K8)((()=>t.state.inviteTargets.map((e=>e.value.id)).filter(Pe().O9)),[t]),p=(0,x().K8)((()=>!c&&m.length>0),[c,m]);async function y(){var e;if(!p)return;u(!0);const t=a.getOwnerIds().filter((e=>!m.includes(e))),s=null===(e=pe().default.state.currentUserStore)||void 0===e?void 0:e.id,c=s&&m.includes(s),g=await S().callApi({eventName:"updateOrganization",environment:l,data:{organizationId:a.id,ownerIds:t}});"success"===g.type?(d(g),nt().D6({label:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.success",defaultMessage:"Successfully demoted from admin"})}),(0,w().u)({environment:l,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:a.id,updated_fields:["owners"]}}}),c&&_e().oo({environment:l,url:Te().JZ.root})):j().f1((0,A().Hu)(r,g)),await o(),n(),u(!1)}return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(O().tf,{showDismissButton:!1,header:(0,i.jsx)(q().rQ,{icon:Ni(g.icon),title:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.title",defaultMessage:"Downgrade organization owners"}),byline:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.byline",defaultMessage:"Remove organization owner permissions from <bold>{count} {count, plural, one {user} other {users}}</bold>. Workspace roles and permissions remain unchanged.",values:{count:m.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.button.add",defaultMessage:"Downgrade"}),primaryAction:y,primaryDisabled:!p,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.demoteUsersFromOrgAdmins.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsx)("div",{style:g.content,children:(0,i.jsx)(_s,{userIds:m})})})})}function Wi(e){let{permissionsInviteStore:t,organizationStore:a,onDismiss:n,refreshPage:o}=e;const r=(0,h().tz)(),l=(0,f().v3)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(k().N),[c,u]=(0,s.useState)(!1),g=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{display:"flex",flexDirection:"column",gap:q().gA,height:"fit-content",width:q().J2}})),[]),m=(0,x().K8)((()=>t.state.inviteTargets.map((e=>e.value.id)).filter(Pe().O9)),[t]),p=(0,x().K8)((()=>!c&&m.length>0),[c,m]);async function y(){if(!p)return;u(!0);const e=a.getOwnerIds(),t=Array.from(new Set(e.concat(m))),s=await S().callApi({eventName:"updateOrganization",environment:l,data:{organizationId:a.id,ownerIds:t}});"success"===s.type?(d(s),nt().D6({label:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.success",defaultMessage:"Successfully promoted to admin"})}),(0,w().u)({environment:l,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:a.id,updated_fields:["owners"]}}})):j().f1((0,A().Hu)(r,s)),await o(),n(),u(!1)}return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(O().tf,{showDismissButton:!1,header:(0,i.jsx)(q().rQ,{icon:(0,Di().g)(g.icon),title:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.title",defaultMessage:"Make users organization owners"}),byline:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.byline",defaultMessage:"You are about to promote <bold>{count} {count, plural, one {user} other {users}}</bold> {count, plural, one { to an organization owner} other { to organization owners}}. Organization owners have access to the highest level of user permission controls.",values:{count:m.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.button.add",defaultMessage:"Make {count, plural, one {organization owner} other {organization owners}}",values:{count:m.length}}),primaryAction:y,primaryDisabled:!p,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.promoteUsersToOrgAdmins.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsx)("div",{style:g.content,children:(0,i.jsx)(_s,{userIds:m})})})})}function qi(e){let{userStore:t,organizationStore:a}=e;const n=(0,Cs().l)(),{spaceUsers:o,loading:i}=(0,D().$)(n),r=(0,x().K8)((()=>{var e;return(null===(e=a.getRoles().find((e=>e.id===t.id)))||void 0===e?void 0:e.role)??"none"}),[a,t.id]),[l,d]=(0,s.useState)(new Map),[c,u]=(0,s.useState)(new Map),g=(0,s.useMemo)((()=>n.map((e=>e.id))),[n]),[m,p]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(!i&&!m){const e=new Map;for(const a of g){const s=o[a];if(!s)continue;const n=s.find((e=>e.userId===t.id));n&&e.set(a,n)}d(e)}}),[i,g,o,t.id,m]);const{loadVisibleUsersForSpace:h}=(0,s.useContext)(_().D),f=(0,s.useCallback)((async e=>{p(!0),await h(e,!0),u((t=>{const a=new Map(t);return a.delete(e),a})),p(!1)}),[h]),v=(0,s.useCallback)((e=>{u((t=>{const a=new Map(t);return a.delete(e),f(e),a}))}),[f]),y=(0,s.useCallback)(((e,a)=>{u((s=>{if(!(0,Ga().DH)(a))return s;const n=new Map(s);return n.set(e,{userId:t.id,role:a}),f(e),n}))}),[f,t.id]);return{loading:i,userData:{loading:i,userSpaceAccessMap:new Map([...l,...c]),organizationRole:r,removeUserFromSpaceCache:v,updateUserRoleInSpaceCache:y}}}function Gi(e){let{onDismiss:t,...a}=e;const s=(0,f().v3)(),n=(0,h().tz)(),{userId:o,organizationStore:r,lastActiveAt:l,isOnLegalHold:d,refreshPage:c}=a,{userStore:u}=(0,x().K8)((()=>({userStore:new(C().LU)(s,{table:y().oo,id:o})})),[s,o]),{loading:g,userData:m}=qi({userStore:u,organizationStore:r}),p=(0,x().K8)((()=>(0,i.jsx)(ra().A,{size:na().WK,userStore:u})),[u]),[v,b]=(0,x().K8)((()=>[u.getDisplayName(n),u.getEmail()??""]),[u,n]);return(0,i.jsx)(na().iv,{sidebarProps:{sidebarItemsTitle:(0,i.jsx)(h().sA,{id:"orgConsole.singleUserViewModal.sidebarItemTitle",defaultMessage:"User settings"}),sidebarTitle:v,sidebarByline:b,sidebarTitleIcon:p,hideSeparator:!0},tabRenderer:Jf,tabNames:Xt().AM,defaultTab:"general",sceneProps:{isLoading:g,organizationStore:r,userStore:u,userData:{lastActiveAt:l,...m},isOnLegalHold:d,refreshPage:c,onDismiss:t},tabAccessor:Zf,isOpen:!0,onDismiss:t})}const Ki={id:"actor",headerTitle:(0,i.jsx)(h().sA,{id:"organizationMembersTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(ca,{}):(0,i.jsx)(da,{useThinTitle:!1,userId:e.organizationMember.userId,badge:e.usersOnLegalHold.has(e.organizationMember.userId)?(0,i.jsx)(Fi,{}):null,rightContent:(0,i.jsx)(sr,{userId:e.organizationMember.userId,setSelectedUserId:e.setSelectedUserId,setOpenedModal:e.setOpenedModal,isOrganizationOwner:"owner"===e.organizationMember.organizationRole,isLastOrganizationOwner:e.isLastOrganizationOwner})}),widthData:{width:275,maxWidth:275},sortable:!1,shouldShowSortTooltip:!1},Yi={id:"role",headerTitle:(0,i.jsx)(h().sA,{id:"organizationMembersTable.roleColumn.header",defaultMessage:"Highest role"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:140}}):(0,i.jsx)(tr,{organizationMember:e.organizationMember}),widthData:{widthPercent:25,minWidth:70},sortable:!1,shouldShowSortTooltip:!1},Qi={id:"spaces",headerTitle:(0,i.jsx)(h().sA,{id:"organizationMembersTable.spacesColumn.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:140}}):(0,i.jsx)(ar,{organizationMember:e.organizationMember}),widthData:{widthPercent:30,minWidth:120},sortable:!1,hasClickableContents:!1},$i={id:"email",headerTitle:(0,i.jsx)(h().sA,{id:"organizationMembersTable.emailColumn.header",defaultMessage:"Email"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:240}}):(0,i.jsx)(bs().xF,{userId:e.organizationMember.userId}),widthData:{widthPercent:30,minWidth:70},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},Xi={id:"lastActive",headerTitle:(0,i.jsx)(h().sA,{id:"organizationMembersTable.lastActiveColumn.header",defaultMessage:"Last active"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:100}}):(0,i.jsx)(Ui().F,{useSecondaryColorTitle:!0,isNoActivitySecondaryColor:!0,lastActiveAt:e.organizationMember.lastActiveAt}),widthData:{widthPercent:15,minWidth:100},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},Zi=[Ki,Yi,$i,Qi,Xi];var Ji=function(e){return e.AddToWorkspace="add-to-workspace",e.RemoveFromWorkspace="remove-from-workspace",e.PromoteToAdmin="promote-to-admin",e.DemoteAdmin="demote-admin",e}(Ji||{});function er(e){let{members:t,usersOnLegalHold:a,loading:n,error:o,loadNextPage:r,organizationStore:l,loadPreviousPage:d,currentPage:c,hasPreviousPage:g,hasNextPage:m,refreshPage:p,userId:b,selectedIds:S,onSelectAll:j,onUnselectAll:w,onSelectRow:A}=e;const M=(0,f().v3)(),I=(0,Vt().A)(),T=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:Zi,theme:e,containerMarginTop:0})),[]),k=Zi.map((e=>({...e,headerStyle:I.tableHeader,rowStyle:I.tableRow}))),_=()=>{B({isOpen:!1})},[z,D]=(0,s.useState)(),[P,N]=(0,s.useState)(),[R,B]=(0,s.useState)(b?{isOpen:!0,userId:b,organizationStore:l,lastActiveAt:void 0,onDismiss:_,refreshPage:async()=>p(!0)}:{isOpen:!1}),L=(0,x().K8)((()=>t.filter((e=>{var t;const a=new(C().LU)(M,{table:y().oo,id:e.userId});return!(null==a||null===(t=a.getModel())||void 0===t?void 0:t.getIsDeleted())}))),[t,M]),E=(0,x().K8)((()=>L.map((e=>({organizationMember:e,usersOnLegalHold:a,id:e.userId,isClickable:!0,type:Qt().T.OrganizationMember,setSelectedUserId:D,setOpenedModal:N,isLastOrganizationOwner:l.isUserLastOwner(e.userId)})))),[L,l,a]),O=n?(0,Qt().n)():E;function U(){N(void 0)}const F={header:{isDisabled:n,isSelected:S.length>0&&S.length===t.length,onClick:()=>{S.length===t.length?w():j()}},row:{getDisabledState:e=>n,getSelectedState:e=>e.type===Qt().T.OrganizationMember&&S.includes(e.organizationMember.userId),onClick:e=>{e.type===Qt().T.OrganizationMember&&A(e.organizationMember.userId)}}},H=(0,x().K8)((()=>{const e=new za,t=z?new(C().LU)(M,{table:y().oo,id:z}).getModel():void 0;return t?(e.setState({...e.state,inviteTargets:[{type:"existingUser",value:t,spaceRole:void 0}],inviteRole:"read_and_write"}),e):e}),[M,z]);return!n&&o?(0,i.jsx)(Kt,{error:o,runNewSearch:()=>p(!0)}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Nt().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:k,rows:O,renderNoRowsComponent:()=>(0,i.jsx)(qt,{icon:u().peopleIcon,title:(0,i.jsx)(h().sA,{id:"workspaceMembersTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(h().sA,{id:"workspaceMembersTable.empty.byline",defaultMessage:"There are no members that match this query"})}),styles:T,loadMoreMethod:{type:"pages",onLoadNext:r,onLoadPrevious:d,hasNextPage:m,hasPrevPage:g,currentPage:c},multiselect:F,onRowClick:function(e){e.type===Qt().T.OrganizationMember&&B({isOpen:!0,onDismiss:_,userId:e.organizationMember.userId,organizationStore:l,lastActiveAt:e.organizationMember.lastActiveAt,refreshPage:async()=>p(!0)})},extendToFullScreen:Yt().e}),P===Ji.AddToWorkspace?(0,i.jsx)(Hi,{permissionsInviteStore:H,onDismiss:U,organizationStore:l,refreshPage:p}):null,P===Ji.RemoveFromWorkspace?(0,i.jsx)(un,{permissionsInviteStore:H,onDismiss:U,organizationStore:l,refreshPage:p}):null,P===Ji.PromoteToAdmin?(0,i.jsx)(Wi,{permissionsInviteStore:H,onDismiss:U,organizationStore:l,refreshPage:p}):null,P===Ji.DemoteAdmin?(0,i.jsx)(Vi,{permissionsInviteStore:H,onDismiss:U,organizationStore:l,refreshPage:p}):null,R.isOpen&&(0,i.jsx)(Gi,{...R,isOnLegalHold:a.has(R.userId)})]})}function tr(e){let{organizationMember:t}=e;const a=(0,h().tz)(),s=nr(t);return(0,i.jsx)(Rt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:a.formatMessage(s)})}function ar(e){let{organizationMember:t}=e;const a=t.spacesInfo.map((e=>e.spaceId)),s=(0,Cs().l)(a);return 0===a.length?(0,i.jsx)(I().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"organizationMembersTable.spacesColumn.noWorkspaces",defaultMessage:"No workspaces"})}):(0,i.jsx)(X().$,{spaceStores:s,isLoading:!1,showTooltip:!0})}function sr(e){const t=(0,h().tz)(),{userId:a,setSelectedUserId:s,setOpenedModal:n,isOrganizationOwner:o,isLastOrganizationOwner:r}=e,l=(0,x().uB)(void 0,Ei().A),d=(0,v().IS)((()=>({popupMenu:{width:270},icon:{height:20,width:20,fill:"currentColor"}})),[]),c=[{key:"add-to-workspaces",render:e=>(0,i.jsx)(Ue().A,{...e,icon:(0,Dt().x)(d.icon),title:(0,i.jsx)(h().sA,{id:"organizationMembersTable.userColumn.menu.addUserToWorkspaces",defaultMessage:"Add to workspaces"})}),action:()=>{n(Ji.AddToWorkspace),s(a),l.setState({...l.state,open:!1})}},{key:"remove-from-workspaces",render:e=>(0,i.jsx)(Ue().A,{...e,icon:ys(d.icon),title:(0,i.jsx)(h().sA,{id:"organizationMembersTable.userColumn.menu.removeUserFromWorkspaces",defaultMessage:"Remove from workspaces"})}),action:()=>{n(Ji.RemoveFromWorkspace),s(a),l.setState({...l.state,open:!1})}},{key:"promote-to-owner",render:e=>(0,i.jsx)(Ue().A,{...e,icon:(0,Di().g)(d.icon),title:(0,i.jsx)(h().sA,{id:"organizationMembersTable.userColumn.menu.makeOrganizationOwner",defaultMessage:"Make organization owner"}),disabled:o,disabledFeedback:o}),action:()=>{n(Ji.PromoteToAdmin),s(a),l.setState({...l.state,open:!1})}},{key:"demote-from-owner",render:e=>(0,i.jsx)(Ue().A,{...e,icon:Ni(d.icon),title:(0,i.jsx)(h().sA,{id:"organizationMembersTable.userColumn.menu.downgradeOrganizationOwner",defaultMessage:"Downgrade organization owner"}),disabled:r||!o,disabledFeedback:r||!o}),action:()=>{n(Ji.DemoteAdmin),s(a),l.setState({...l.state,open:!1})}}],u={key:"actions",render:e=>(0,i.jsx)(Fe().A,{title:(0,i.jsx)(h().sA,{id:"organizationMembersTable.userColumn.menu.title",defaultMessage:"Member actions"}),...e}),items:c};return(0,i.jsx)(Oi().Ay,{stopClickPropagation:!0,popupType:Qa().n.Popup,alignmentToOrigin:Ya().C.Start,placementToOrigin:Ya().W.Bottom,style:d.popupMenu,render:()=>(0,i.jsx)(xt().A,{menuType:mt().gu.Popup,width:270,children:(0,i.jsx)(vt().Ay,{type:vt().Oh.Vertical,initialFocus:void 0,sections:[u]})}),onClose:$e().lQ,buttonPopupStore:l,renderOrigin:e=>(0,i.jsx)(rs().A,{ariaLabel:t.formatMessage({id:"memberActionsMenuButton.iconButton.ariaLabel",defaultMessage:"More actions"}),icon:Pi().W,...e})})}function nr(e){if("owner"===e.organizationRole)return Li.organizationOwnerLabel;const t=e.spacesInfo.length>0?e.spacesInfo[0].role:"none";return(0,As().rd)(t)}var or=()=>a(678553);function ir(e){const{userStore:t,highestUserRoleInOrganization:a,...s}=e,n=(0,h().tz)(),o=(0,x().K8)((()=>{const e=t.getModel();if(e)return{userValue:e,email:e.email,displayName:e.getDisplayName(n)}}),[t,n]);return(0,i.jsx)(Ue().A,{...s,icon:(0,i.jsx)(ra().A,{userValue:null==o?void 0:o.userValue,size:32}),title:null==o?void 0:o.displayName,caption:(null==o?void 0:o.displayName)!==(null==o?void 0:o.email)?null==o?void 0:o.email:(0,i.jsx)("div",{}),right:(0,i.jsx)(or().CU,{caption:a})})}const rr=(0,h().YK)({legalHoldAddMembersPlaceholder:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.addMembersPlaceholder",defaultMessage:"Search names or emails"},legalHoldAddMembersRequiredValidationError:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.addMembersRequiredValidationError",defaultMessage:"Hold members are required"}});function lr(e){let{organizationId:t,holdMemberUserIds:a,setHoldMemberUserIds:n,error:o,nonRemovableIds:r}=e;const l=(0,f().v3)(),d=(0,h().tz)(),[c,u]=s.useState(""),[g,m]=s.useState(!1),p=(0,v().IS)((e=>({token:{boxShadow:e.shadow2XS}})),[]),[{status:b,value:j}]=(0,Xe().Yb)((async()=>{if(0===c.length)return[];const e=await S().callApi({eventName:"getMembersInOrganization",environment:l,data:{organizationId:t,query:c}});if("success"===e.type)return e.data.members;if("failed"===e.type)throw e.error;return(0,Pe().HB)(e)}),[l,t,c],{debounce:300}),[{status:w,value:A}]=(0,Xe().Yb)((async()=>{if(0===c.length)return[];const e=await S().callApi({eventName:"getGuestsInOrganization",environment:l,data:{organizationId:t,query:c}});if("success"===e.type)return e.data.guests;if("failed"===e.type)throw e.error;return(0,Pe().HB)(e)}),[l,t,c],{debounce:300}),I=(0,s.useMemo)((()=>new Set(null==j?void 0:j.map((e=>e.userId)))),[j]),T=(0,s.useMemo)((()=>null==A?void 0:A.filter((e=>!I.has(e.userId)))),[A,I]),k=(0,s.useMemo)((()=>new Set(null==A?void 0:A.map((e=>e.userId)))),[A]),[{status:_,value:z}]=(0,Xe().Yb)((async()=>{if(0===c.length)return[];const e=await S().callApi({eventName:"getRemovedUsers",environment:l,data:{organizationId:t,query:c}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,Pe().HB)(e)}),[l,t,c],{debounce:300}),D=(0,s.useMemo)((()=>null==z?void 0:z.filter((e=>{const t=I.has(e),a=k.has(e);return!t&&!a}))),[z,I,k]),P=(0,x().K8)((()=>a.map((e=>{const t=new(C().LU)(l,{table:y().oo,id:e});return(0,i.jsx)(St().A,{showRemoveButton:!(null!=r&&r.includes(e)),onClickRemove:t=>{const s=a.filter((t=>t!==e));n(s),t.stopPropagation()},backgroundColor:ki().Tj.white,format:dt().NY.Medium,isSingle:!1,value:(0,i.jsx)(Po().A,{userStore:t,avatarSize:18}),style:p.token},e)}))),[l,a,p.token,n,r]),N=(0,x().K8)((()=>j&&0!==(null==j?void 0:j.length)?j.map((e=>{const t=new(C().LU)(l,{table:y().oo,id:e.userId}),s=nr(e);return{key:e.userId,render:e=>(0,i.jsx)(ir,{...e,userStore:t,highestUserRoleInOrganization:d.formatMessage(s)}),action:()=>{const t=[...a,e.userId];n(t),u("")}}})).filter((e=>!a.includes(e.key.toString()))):[]),[l,a,j,n,d]),R=(0,x().K8)((()=>T&&0!==(null==T?void 0:T.length)?T.map((e=>{const t=new(C().LU)(l,{table:y().oo,id:e.userId});return{key:e.userId,render:e=>(0,i.jsx)(ir,{...e,userStore:t}),action:()=>{const t=[...a,e.userId];n(t),u("")}}})).filter((e=>!a.includes(e.key.toString()))):[]),[l,T,a,n]),B=(0,x().K8)((()=>D&&0!==(null==D?void 0:D.length)?D.map((e=>{const t=new(C().LU)(l,{table:y().oo,id:e});return{key:e,render:e=>(0,i.jsx)(ir,{...e,userStore:t}),action:()=>{const t=[...a,e];n(t),u("")}}})):[]),[l,a,D,n]),L={key:"users",render:e=>(0,i.jsx)(Fe().A,{...e,title:(0,i.jsx)(h().sA,{defaultMessage:"Members",id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersMenu.members.title"})}),items:N},E={key:"guests",render:e=>(0,i.jsx)(Fe().A,{...e,title:(0,i.jsx)(h().sA,{defaultMessage:"Guests",id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersMenu.guests.title"})}),items:R},O={key:"removedUsers",render:e=>(0,i.jsx)(Fe().A,{...e,title:(0,i.jsx)(h().sA,{defaultMessage:"Removed users",id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersMenu.removedUsers.title"})}),items:B},U={key:"empty",render:e=>(0,i.jsx)(Fe().A,{...e}),items:[{key:"empty-item",render:e=>(0,i.jsx)(_i().A,{title:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersMenu.empty.item",defaultMessage:"Type or paste in emails above, separated by commas."})}),action:$e().lQ}]},F="resolved"===b&&"resolved"===w&&"resolved"===_;function H(){if(0===c.length)return[U];const e=[];return N.length>0&&e.push(L),R.length>0&&e.push(E),B.length>0&&e.push(O),e}return(0,i.jsxs)(ae().VP,{width:"100%",gap:8,children:[(0,i.jsxs)(ae().VP,{gap:0,children:[(0,i.jsx)(W().A,{children:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.membersLabel",defaultMessage:"Hold members"})}),(0,i.jsx)(yt().Ay,{trapFocus:!1,popupType:yt().nl.Popup,sameWidthAsOrigin:!0,open:g||c.length>0,enableOutsideClickDismiss:!0,onDismiss:()=>{m(!1)},origin:(0,i.jsx)(jt().A,{onClick:e=>{m(!0),e.stopPropagation()},tokens:P,placeholder:M().A.formatMessage(rr.legalHoldAddMembersPlaceholder),value:c,onChange:e=>u(e.target.value),onRemoveLastToken:()=>{const e=a.slice(0,-1);n(e)},errorOutline:Boolean(o),inputElementAttributes:{"aria-describedby":"legalHoldAddMembersError"}}),render:()=>(0,i.jsx)(xt().A,{menuType:mt().gu.Popup,children:(0,i.jsx)(vt().Ay,{type:vt().Oh.Vertical,initialFocus:F&&[...N,...R,...B].length>0?0:void 0,sections:H()})})})]}),(0,i.jsx)(zi().R,{id:"legalHoldAddMembersError",error:o})]})}function dr(e){let{onDismiss:t,legalHoldId:a,organizationId:n,userIdsAlreadyInLegalHold:o,onSuccess:r}=e;const[l,d]=s.useState({holdMemberUserIds:void 0}),[c,u]=(0,s.useState)(o),g=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary}})),[]),{loading:m,updateLegalHold:p}=Ti(),f=async()=>{if(c.length)try{await p({legalHoldId:a,userIds:c}),r(),t()}catch(e){return}else d((e=>({...e,holdMemberUserIds:rr.legalHoldAddMembersRequiredValidationError})))};return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:t,areaConstraint:{width:{type:"min",length:q().NF}},render:e=>{let{sizeRange:a}=e;return(0,i.jsx)(O().tf,{showDismissButton:!1,sizeRange:a,header:(0,i.jsx)(q().rQ,{icon:(0,Dt().x)(g.icon),title:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.addLegalHoldMembersModal.title",defaultMessage:"Add new hold member"}),bylineWidthOverride:360,byline:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.addLegalHoldMembersModal.byline",defaultMessage:"Members affected by a legal hold won’t be notified of the hold and will still maintain their permissions to create, edit, and delete files. {link}",values:{link:(0,i.jsx)(fe()._,{href:Ii().sn,children:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.addLegalHoldMembersModal.byline.link",defaultMessage:"Learn more"})})}})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.addLegalHoldMembersModal.button.addMember",defaultMessage:"Add hold member"}),primaryAction:f,primaryDisabled:m,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.addLegalHoldMembersModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:t}),children:(0,i.jsx)(lr,{organizationId:n,holdMemberUserIds:c,nonRemovableIds:o,setHoldMemberUserIds:e=>{u(e),e.length&&d((e=>({...e,holdMemberUserIds:void 0})))},error:l.holdMemberUserIds})})}})}function cr(e){let{userIdsToRemove:t,legalHoldId:a,onDismiss:n,onSuccess:o}=e;const[r,l]=(0,s.useState)(!1),d=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:440,display:"flex",flexDirection:"column",alignItems:"center"},confirmationContainer:{display:"flex",gap:10,alignItems:"center"}})),[]),{loading:c,updateLegalHold:u}=Ti(),g=async()=>{try{await u({legalHoldId:a,userIds:[]}),await o(),n()}catch(e){}},m=t.length;return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(O().tf,{header:(0,i.jsx)(q().rQ,{icon:(0,st().J)(d.icon),title:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.title",defaultMessage:"Are you sure you want to remove {memberRemovalCount, plural, one {this member} other {these members}}?",values:{memberRemovalCount:m}}),byline:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.byline",defaultMessage:"Removing all members will release the hold. This action is final and pages deleted after release will be permanently deleted according to the data retention setting.",values:{memberRemovalCount:m}})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.buttonText",defaultMessage:"Remove {memberRemovalCount, plural, one {member} other {members}}",values:{memberRemovalCount:m}}),primaryAction:g,primaryDisabled:c||!r,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.cancelButton",defaultMessage:"Cancel"}),secondaryAction:n,isDarkRed:!0}),children:(0,i.jsx)("div",{style:d.container,children:(0,i.jsxs)("div",{style:d.confirmationContainer,children:[(0,i.jsx)(ot().T,{checked:r,size:14,onClick:()=>l(!r)}),(0,i.jsx)(I().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.removeLastLegalHoldMembersModal.confirmationText",defaultMessage:"I understand the actions of releasing legal hold"})})]})})})})}function ur(e){let{userIdsToRemove:t,allUserIds:a,legalHoldId:s,onDismiss:n,onSuccess:o}=e;const r=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary}})),[]),{loading:l,updateLegalHold:d}=Ti(),c=async()=>{try{const e=a.filter((e=>!t.includes(e)));await d({legalHoldId:s,userIds:e}),o(),n()}catch(e){}},u=t.length;return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:n,areaConstraint:{width:{type:"fixed",length:q().NF}},render:()=>(0,i.jsx)(O().tf,{header:(0,i.jsx)(q().rQ,{icon:(0,st().J)(r.icon),title:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.removeLegalHoldMembersModal.title",defaultMessage:"Are you sure you want to remove {memberRemovalCount, plural, one {this member} other {these members}}?",values:{memberRemovalCount:u}}),byline:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.removeLegalHoldMembersModal.byline",defaultMessage:"Deleting {memberRemovalCount, plural, one {this member} other {these members}} will also remove associated pages by {memberRemovalCount, plural, one {this member} other {these members}}.",values:{memberRemovalCount:u}})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.removeLegalHoldMembersModal.buttonText",defaultMessage:"Remove {memberRemovalCount, plural, one {member} other {members}}",values:{memberRemovalCount:u}}),primaryAction:c,primaryDisabled:l,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.removeLegalHoldMembersModal.cancelButton",defaultMessage:"Cancel"}),secondaryAction:n,isDarkRed:!0})})})}function gr(e){let{organizationGuest:t}=e;const a=Object.keys(t.guestPages),s=(0,Cs().l)(a);return 0===a.length?(0,i.jsx)(I().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"organizationGuestsTable.spacesColumn.noWorkspaces",defaultMessage:"No workspaces"})}):(0,i.jsx)(X().$,{spaceStores:s,isLoading:!1,showTooltip:!0})}var mr=function(e){return e.RemoveFromLegalHold="remove-from-legal-hold",e.ReleaseLegalHold="release-legal-hold",e}(mr||{});function pr(e){const t=(0,h().tz)(),{userId:a,onRemoveMember:s}=e,n=(0,x().uB)(void 0,Ei().A),o=(0,v().IS)((()=>({popupMenu:{width:248},icon:{height:20,width:20,fill:"currentColor"}})),[]),r=[{key:"remove-member-from-legal-hold",render:e=>(0,i.jsx)(Ue().A,{...e,icon:ys(o.icon),title:(0,i.jsx)(h().sA,{id:"singleLegalHoldMembersTable.userColumn.menu.removeMemberFromLegalHold",defaultMessage:"Remove member"})}),action:()=>{s(a),n.setState({...n.state,open:!1})}}],l={key:"actions",render:e=>(0,i.jsx)(Fe().A,{title:(0,i.jsx)(h().sA,{id:"singleLegalHoldMembersTable.userColumn.menu.title",defaultMessage:"Member actions"}),...e}),items:r};return(0,i.jsx)(Oi().Ay,{stopClickPropagation:!0,popupType:Qa().n.Popup,alignmentToOrigin:Ya().C.Start,placementToOrigin:Ya().W.Bottom,style:o.popupMenu,render:()=>(0,i.jsx)(xt().A,{menuType:mt().gu.Popup,width:248,children:(0,i.jsx)(vt().Ay,{type:vt().Oh.Vertical,initialFocus:void 0,sections:[l]})}),onClose:$e().lQ,buttonPopupStore:n,renderOrigin:e=>(0,i.jsx)(rs().A,{ariaLabel:t.formatMessage({id:"legalHoldMemberActionsMenuButton.iconButton.ariaLabel",defaultMessage:"More actions"}),icon:Pi().W,...e})})}function hr(e){const{userId:t,onRemoveMember:a}=e,s=(0,f().v3)();return(0,x().K8)((()=>new(C().LU)(s,{table:y().oo,id:t})),[t,s])?(0,i.jsx)(da,{userId:t,rightContent:(0,i.jsx)(pr,{userId:t,onRemoveMember:a})}):null}const fr={id:"name",headerTitle:(0,i.jsx)(h().sA,{id:"singleLegalHoldMembersTable.nameColumn.header",defaultMessage:"Name"}),renderCell:e=>{if(e.type===Qt().T.Loading)return(0,i.jsx)(Rt().mf,{includeIcon:!0,containerStyles:{width:140}});const{onRemoveMember:t}=e;return e.type===Qt().T.SingleLegalHoldMemberUser?(0,i.jsx)(hr,{onRemoveMember:t,userId:e.organizationMember.userId}):e.type===Qt().T.SingleLegalHoldMemberGuest?(0,i.jsx)(hr,{onRemoveMember:t,userId:e.organizationGuest.userId}):e.type===Qt().T.SingleLegalHoldMemberDeletedUser?(0,i.jsx)(hr,{onRemoveMember:t,userId:e.deletedMemberId}):(0,Pe().HB)(e)},widthData:{widthPercent:26,minWidth:275,maxWidth:275},sortable:!1},xr={id:"role",headerTitle:(0,i.jsx)(h().sA,{id:"singleLegalHoldMembersTable.roleColumn.header",defaultMessage:"Highest role"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:140}}):e.type===Qt().T.SingleLegalHoldMemberUser?(0,i.jsx)(tr,{organizationMember:e.organizationMember}):e.type===Qt().T.SingleLegalHoldMemberGuest?(0,i.jsx)(Rt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(h().sA,{id:"singleLegalHoldMembersTable.guestRole",defaultMessage:"Guest"})}):e.type===Qt().T.SingleLegalHoldMemberDeletedUser?(0,i.jsx)(Rt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(h().sA,{id:"singleLegalHoldMembersTable.deletedUserRole",defaultMessage:"Deleted user"})}):(0,Pe().HB)(e),widthData:{widthPercent:25,minWidth:80},sortable:!1},vr={id:"workspaces",headerTitle:(0,i.jsx)(h().sA,{id:"singleLegalHoldMembersTable.workspacesColumn.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:140}}):e.type===Qt().T.SingleLegalHoldMemberUser?(0,i.jsx)(ar,{organizationMember:e.organizationMember}):e.type===Qt().T.SingleLegalHoldMemberGuest?(0,i.jsx)(gr,{organizationGuest:e.organizationGuest}):e.type===Qt().T.SingleLegalHoldMemberDeletedUser?null:(0,Pe().HB)(e),widthData:{widthPercent:25,minWidth:80},sortable:!1},yr={id:"email",headerTitle:(0,i.jsx)(h().sA,{id:"singleLegalHoldMembersTable.emailColumn.header",defaultMessage:"Email"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:240}}):e.type===Qt().T.SingleLegalHoldMemberUser?(0,i.jsx)(bs().xF,{userId:e.organizationMember.userId}):e.type===Qt().T.SingleLegalHoldMemberGuest?(0,i.jsx)(bs().xF,{userId:e.organizationGuest.userId}):e.type===Qt().T.SingleLegalHoldMemberDeletedUser?null:(0,Pe().HB)(e),widthData:{widthPercent:25,minWidth:80},sortable:!1};function br(e){let{data:t,loading:a,currentPage:n,setCurrentPage:o,selectedIds:r,onSelectAll:l,onUnselectAll:d,onSelectRow:c,legalHoldId:u,onRemoveMembersSuccess:g,onRemoveLastMembersSuccess:m}=e;const[p,f]=(0,s.useState)(),[x,y]=(0,s.useState)(),b=s.useMemo((()=>[fr,xr,vr,yr]),[]),S=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:b,theme:e,containerMarginTop:0})),[b]),j=t.map((e=>"user"===e.type||"guest"===e.type?e.userId:"deleted"===e.type?e.deletedMemberId:(0,Pe().HB)(e))),w=s.useCallback((e=>{f(e),j.includes(e)&&1===j.length?y(mr.ReleaseLegalHold):y(mr.RemoveFromLegalHold)}),[f,y,j]),A=t.map((e=>{const t={onRemoveMember:w};return"user"===e.type?{id:e.userId,organizationMember:e,isClickable:!0,type:Qt().T.SingleLegalHoldMemberUser,...t}:"guest"===e.type?{id:e.userId,organizationGuest:e,isClickable:!0,type:Qt().T.SingleLegalHoldMemberGuest,...t}:"deleted"===e.type?{id:e.deletedMemberId,deletedMemberId:e.deletedMemberId,type:Qt().T.SingleLegalHoldMemberDeletedUser,isClickable:!0,...t}:(0,Pe().HB)(e)})),M=a?(0,Qt().n)():A.slice(Ze().q*(n-1),Ze().q*n),C=A.length>Ze().q*n,I=1!==n,T={header:{isDisabled:a,isSelected:r.length>0&&r.length===t.length,onClick:()=>{r.length===t.length?d():l()}},row:{getDisabledState:e=>a,getSelectedState:e=>e.type===Qt().T.SingleLegalHoldMemberUser?r.includes(e.organizationMember.userId):e.type===Qt().T.SingleLegalHoldMemberGuest?r.includes(e.organizationGuest.userId):e.type===Qt().T.SingleLegalHoldMemberDeletedUser&&r.includes(e.deletedMemberId),onClick:e=>{e.type===Qt().T.SingleLegalHoldMemberUser&&c(e.organizationMember.userId),e.type===Qt().T.SingleLegalHoldMemberGuest&&c(e.organizationGuest.userId),e.type===Qt().T.SingleLegalHoldMemberDeletedUser&&c(e.deletedMemberId)}}},k=s.useCallback((()=>{y(void 0),f(void 0)}),[y,f]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Nt().WE,{columnRenderInfo:b,hideHeaderRowPadding:!0,rows:M,renderNoRowsComponent:()=>(0,i.jsx)(qt,{title:(0,i.jsx)(h().sA,{id:"singleLegalHoldMembersTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(h().sA,{id:"singleLegalHoldMembersTable.empty.byline",defaultMessage:"There are no members that match this query"})}),styles:S,showRowBorders:!0,allowHorizontalScroll:!0,loadMoreMethod:{type:"pages",onLoadNext:()=>{C&&o(n+1)},onLoadPrevious:()=>{I&&o(n-1)},hasNextPage:C,hasPrevPage:I,currentPage:n},setStickyHeaderRow:!0,multiselect:T,extendToFullScreen:{rightPaddingPx:64,extendTableToFullWidthOffsetPx:64}}),x===mr.RemoveFromLegalHold&&p?(0,i.jsx)(ur,{userIdsToRemove:[p],allUserIds:j,legalHoldId:u,onDismiss:k,onSuccess:g}):null,x===mr.ReleaseLegalHold&&p?(0,i.jsx)(cr,{userIdsToRemove:[p],legalHoldId:u,onDismiss:k,onSuccess:m}):null]})}const Sr=(0,h().YK)({members:{id:"settingsConsole.singleLegalHoldMembersTab.title",defaultMessage:"Hold Members"},membersLabel:{id:"settingsConsole.singleLegalHoldMembersTab.label",defaultMessage:"View members currently on hold"},placeholder:{id:"settingsConsole.singleLegalHoldMembersTab.search.placeholder",defaultMessage:"Search by member name or email"}}),jr=(0,h().YK)({name:{id:"settingsConsole.singleLegalHoldMembersTab.sort.name",defaultMessage:"Name"},role:{id:"settingsConsole.singleLegalHoldMembersTab.sort.role",defaultMessage:"Highest role"}}),wr=[{id:"actor",name:M().A.formatMessage(jr.name),type:"title"},{id:"role",name:M().A.formatMessage(jr.role),type:"text"}],Ar=[...pn,{key:"guest",value:"guest",title:(0,i.jsx)(h().sA,{id:"legalHoldsMembers.table.filters.userRole.guest",defaultMessage:"Guest"})}];var Mr=function(e){return e.AddMember="add-member",e.RemoveMember="remove-member",e.RemoveLastMembers="remove-last-members",e}(Mr||{});function Cr(e){let{legalHoldId:t,organizationId:a,setSelectedTab:n,refetchLegalHold:o}=e;const r=(0,h().tz)(),[l,d]=s.useState(),[c,u]=s.useState([]),[g,m]=s.useState([]),[p,x]=s.useState(void 0),[v,y]=s.useState(!1),[b,j]=s.useState(),[w,A]=s.useState(),[M,C]=s.useState(1),{members:I,guests:T,deletedMembersIds:k,allIdsInLegalHold:_,loading:z,refetch:D}=function(e){const t=(0,f().v3)(),{organizationId:a,legalHoldId:n,selectedSpaceIds:o,selectedUserRoles:i,query:r,sort:l}=e,{members:d,loading:c,refetch:u}=ko({legalHoldId:n}),g=d.join(","),m=o.join(","),p=i.join(","),h=function(e){if(e)return"actor"===e.propertyId?{columnName:"actor",direction:e.direction}:"role"===e.propertyId?{columnName:"role",direction:e.direction}:void 0}(l),x=null==h?void 0:h.columnName,v=null==h?void 0:h.direction,y=0===d.length,[{status:b,value:j}]=(0,Xe().Yb)((async()=>{if(y||"guest"===p)return;const e=g.split(","),s=m.length>0?m.split(","):void 0,n=p.length>0?p.split(","):void 0,o=null==n?void 0:n.filter((e=>"guest"!==e)),i=await S().callApi({eventName:"getMembersInOrganization",environment:t,data:{organizationId:a,filters:{userIds:e,spaceIds:s,roles:o},limit:e.length,query:r,sort:x&&v?{columnName:x,direction:v}:void 0}});if("success"===i.type)return{members:i.data.members};if("failed"===i.type)throw i.error;return(0,Pe().HB)(i)}),[t,a,g,m,p,r,x,v,y]),[{status:w,value:A}]=(0,Xe().Yb)((async()=>{if(y)return;const e=g.split(","),s=m.length>0?m.split(","):void 0,n=await S().callApi({eventName:"getGuestsInOrganization",environment:t,data:{organizationId:a,filters:{userIds:e,spaceIds:s},limit:e.length,query:r}});if("success"===n.type)return n.data;if("failed"===n.type)throw n.error;return(0,Pe().HB)(n)}),[t,a,g,m,r,y]),M=(0,s.useMemo)((()=>(null==j?void 0:j.members)??[]),[j]),C=(0,s.useMemo)((()=>new Set(M.map((e=>e.userId)))),[M]),I=(0,s.useMemo)((()=>(null==A?void 0:A.guests.map((e=>({...e,lastActiveTime:(null==A?void 0:A.guestIdToLastActive[e.userId])??void 0}))).filter((e=>!C.has(e.userId))))??[]),[A,C]),T=0===o.length&&0===i.length&&!r,k=(0,s.useMemo)((()=>T?d.filter((e=>!M.some((t=>t.userId===e))&&!I.some((t=>t.userId===e)))):[]),[d,M,I,T]);return{loading:c||"pending"===b||"pending"===w,members:M,guests:I,deletedMembersIds:k,allIdsInLegalHold:d,refetch:u}}({organizationId:a,legalHoldId:t,selectedSpaceIds:g,selectedUserRoles:c,query:p,sort:null==w?void 0:w[0]}),P=_o({spaceStores:(0,Cs().l)()}),N=(0,On().F)(),R=(0,s.useMemo)((()=>[...I.map((e=>({...e,type:"user"}))),...T.map((e=>({...e,type:"guest"}))),...k.map((e=>({type:"deleted",deletedMemberId:e})))]),[I,T,k]),{selectedIds:B,handleToggleId:L,handleSelectAllIds:E,handleUnselectAllIds:O}=Lt({allPossibleIds:_}),U=s.useCallback((async()=>{C(1),A(void 0),j(void 0),x(void 0),u([]),m([]),await D()}),[D]),H=s.useCallback((async()=>{await o(),n("general")}),[n,o]);return(0,i.jsxs)(Z,{children:[(0,i.jsx)(Ua()._,{title:r.formatMessage(Sr.members),byline:r.formatMessage(Sr.membersLabel)}),(0,i.jsxs)("div",{style:N.tableHeader,children:[(0,i.jsxs)("div",{style:N.leftContent,children:[(0,i.jsxs)(La,{isOpen:B.length>0,children:[(0,i.jsx)(Ea,{isPrimary:!0,title:(0,i.jsx)(Oa,{itemsSelectedCount:B.length}),onClick:O}),(0,i.jsx)(Ea,{icon:ys,title:(0,i.jsx)(h().sA,{id:"singleLegalHoldMembersTab.multiselect.removeFromLegalHold",defaultMessage:"Remove from legal hold"}),onClick:()=>{B.length===_.length?d(Mr.RemoveLastMembers):d(Mr.RemoveMember)}})]}),(0,i.jsx)(Ha().e,{preventMultipleSorts:!0,sortProperties:wr,isMenuOpen:v,setIsMenuOpen:y,onApply:e=>{y(!1),A(e),j(void 0),C(1)},currentSorts:b??w??[]}),(0,i.jsx)(gn,{setUserRoles:e=>{u(e),C(1)},selectedUserRoles:c,roles:Ar}),(0,i.jsx)(Eo,{selectedSpaceIds:g,setSelectedSpaceIds:e=>{m(e),C(1)},spaceData:P})]}),(0,i.jsxs)("div",{style:N.rightContent,children:[(0,i.jsx)(Fa().x,{appliedSorts:w,openSortPillMenu:e=>{e&&j([{propertyId:e,direction:"ascending"}]),y(!0)},sortProperties:wr}),(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:p,setQueryFilter:e=>{x(e),C(1)},placeholderText:r.formatMessage(Sr.placeholder)}),(0,i.jsx)(F().A,{onClick:()=>{d(Mr.AddMember)},disabled:z,children:(0,i.jsx)(h().sA,{id:"legalHoldsMembers.button.addMember",defaultMessage:"Add member"})})]})]}),(0,i.jsx)(br,{data:R,loading:z,currentPage:M,setCurrentPage:C,selectedIds:B,onSelectAll:E,onUnselectAll:O,onSelectRow:L,legalHoldId:t,onRemoveMembersSuccess:U,onRemoveLastMembersSuccess:H}),l===Mr.AddMember?(0,i.jsx)(dr,{onDismiss:()=>d(void 0),onSuccess:U,legalHoldId:t,organizationId:a,userIdsAlreadyInLegalHold:_}):null,l===Mr.RemoveMember?(0,i.jsx)(ur,{onDismiss:()=>d(void 0),onSuccess:U,legalHoldId:t,userIdsToRemove:B,allUserIds:_}):null,l===Mr.RemoveLastMembers?(0,i.jsx)(cr,{onDismiss:()=>d(void 0),onSuccess:H,legalHoldId:t,userIdsToRemove:B}):null]})}var Ir=()=>a(406533),Tr=()=>a(42583),kr=()=>a(802790),_r=()=>a(249117);function zr(e){let{iconFunction:t,label:a,value:s,disabled:n}=e;const o=(0,h().tz)(),r=(0,v().IS)((e=>({label:{color:e.text.secondary,minWidth:140,display:"flex",flexDirection:"row",gap:6,opacity:n?.3:1,alignItems:"center"},value:{color:e.text.primary,overflow:"hidden",opacity:n?.3:1},icon:{width:16,height:16}})),[n]);return(0,i.jsxs)(ae().fI,{gap:4,alignItems:"center",height:"100%",children:[(0,i.jsxs)("div",{style:r.label,children:[t(r.icon),(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",children:o.formatMessage(a)})]}),(0,i.jsx)(I().D,{styleName:"Body-14px/Regular",style:r.value,children:s})]})}function Dr(e){let{startDate:t,endDate:a}=e;return void 0===t?null:(0,i.jsx)(h().sA,{id:"legalHold.general.holdRange",defaultMessage:"{startDate} - {endDate}",values:{startDate:(0,i.jsx)(h().XU,{value:t,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"}),endDate:a?(0,i.jsx)(h().XU,{value:a,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"}):(0,i.jsx)(h().sA,{id:"legalHold.general.holdRange.ongoing",defaultMessage:"Ongoing"})}})}function Pr(e,t){if(t)return{pointer:{table:Ii().PX,id:e},icon:t}}function Nr(e){let{legalHoldId:t,legalHoldName:a,legalHoldIcon:s,size:n=Gn().tR,emojiSize:o=Gn().Gz}=e;const r=Pr(t,s);return(0,i.jsx)(N().B6,{size:n,emojiSize:o,disabled:!0,icon:r,isEmptyPage:!1,title:a,iconRecordCategory:"pageBlock",isLarge:!0,isRaw:!1})}function Rr(e){let{userIds:t,totalCount:a}=e;const s=(0,f().v3)(),n=(0,x().K8)((()=>t.map((e=>new(C().LU)(s,{table:y().oo,id:e})))),[t,s]);return(0,i.jsx)(kn().l,{userStores:n,useSecondaryColorTitle:!0,totalCount:a,useIconsOnly:!0})}function Br(e){let t,a,s,{status:n}=e;switch(n){case"active":t=(0,i.jsx)(h().sA,{id:"legalHoldsTable.status.active",defaultMessage:"Active"}),a="yellow",s=gi().M.light.yellow[100];break;case"released":t=(0,i.jsx)(h().sA,{id:"legalHoldsTable.status.released",defaultMessage:"Released"}),s=gi().M.light.gray[100],a="gray";break;default:(0,Pe().HB)(n)}return(0,i.jsx)(St().A,{format:dt().NY.Medium,value:t,isSingle:!0,showRemoveButton:!1,isRound:!0,backgroundColor:s,showColoredDot:a})}function Lr(e){let{onDismiss:t,onSubmit:a}=e;const n=(0,h().tz)(),[o,r]=(0,s.useState)(!1),[l,d]=(0,s.useState)(!1),c=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:440,display:"flex",flexDirection:"column",alignItems:"center"},confirmationContainer:{display:"flex",gap:10,alignItems:"center"}})),[]);return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:t,render:()=>(0,i.jsx)(O().tf,{header:(0,i.jsx)(q().rQ,{icon:(0,st().J)(c.icon),title:n.formatMessage(Er.title),byline:n.formatMessage(Er.byline)}),footer:(0,i.jsx)(q().jl,{primaryText:n.formatMessage(Er.buttonText),primaryAction:async()=>{r(!0),await async function(){await a(),t()}(),r(!1)},primaryDisabled:o||!l,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.destructiveUserAction.cancelButton",defaultMessage:"Cancel"}),secondaryAction:t,isDarkRed:!0}),children:(0,i.jsx)("div",{style:c.container,children:(0,i.jsxs)("div",{style:c.confirmationContainer,children:[(0,i.jsx)(ot().T,{checked:l,size:14,onClick:()=>d(!l)}),(0,i.jsx)(I().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:n.formatMessage(Er.confirmationText)})]})})})})}const Er=(0,h().YK)({title:{id:"orgConsole.legalHolds.modal.releaseLegalHold.title",defaultMessage:"Are you sure you want to release this hold?"},byline:{id:"orgConsole.legalHolds.modal.releaseLegalHold.byline",defaultMessage:"This action is final and any members and pages deleted after release will be permanently deleted."},confirmationText:{id:"orgConsole.legalHolds.modal.releaseLegalHold.confirmationText",defaultMessage:"I understand the actions of releasing legal hold"},buttonText:{id:"orgConsole.legalHolds.modal.releaseLegalHold.buttonText",defaultMessage:"Release legal hold"}});function Or(e){let{onClick:t}=e;return(0,i.jsx)(Ne().E,{color:"uiRed",onClick:t,children:(0,i.jsx)(h().sA,{id:"legalHold.general.release.button",defaultMessage:"Release legal hold"})})}const Ur=(0,h().YK)({holdRangeLabel:{id:"legalHold.general.details.holdRange",defaultMessage:"Hold from"},holdRangeLabelViewedFrom:{id:"legalHold.general.details.holdRange.viewedFrom",defaultMessage:"Viewed from"},holdRangeLabelEditedFrom:{id:"legalHold.general.details.holdRange.editedFrom",defaultMessage:"Edited from"},holdRangeLabelCreatedFrom:{id:"legalHold.general.details.holdRange.createdFrom",defaultMessage:"Created from"},createdByLabel:{id:"legalHold.general.details.createdBy",defaultMessage:"Created by"},workspacesLabel:{id:"legalHold.general.details.workspaces",defaultMessage:"Workspaces"},createdAtLabel:{id:"legalHold.general.details.createdAt",defaultMessage:"Created at"},manageLegalHoldTitle:{id:"legalHold.general.manage.title",defaultMessage:"Manage legal hold"},releaseLegalHoldLabel:{id:"legalHold.general.release.label",defaultMessage:"Release legal hold"},releaseLegalHoldDescription:{id:"legalHold.general.release.description",defaultMessage:"By releasing this legal hold, pages that are past their retention period will be deleted. This action can not be undone."},disabledTooltipText:{id:"legalHold.general.edit.disabledTooltipText",defaultMessage:"This legal hold has been released and cannot be edited."}}),Fr={"page.viewed":(0,i.jsx)(h().sA,{id:"legalHold.general.pages.tooltip.viewed",defaultMessage:"The associated page count will change over time for ongoing legal holds as users view more pages"}),"page.edited":(0,i.jsx)(h().sA,{id:"legalHold.general.pages.tooltip.edited",defaultMessage:"The associated page count will change over time for ongoing legal holds as users edit more pages"}),"page.created":(0,i.jsx)(h().sA,{id:"legalHold.general.pages.tooltip.created",defaultMessage:"The associated page count will change over time for ongoing legal holds as users create more pages"})};function Hr(e){let{createdBy:t}=e;const a=(0,f().v3)(),s=(0,x().K8)((()=>{if(t)return new(ht().L)(a,{table:y().oo,id:t})}),[t,a]);return s?(0,i.jsx)(Po().A,{avatarSize:24,userStore:s}):null}function Vr(e){let{legalHoldId:t,setSelectedTab:a,legalHold:n,loading:o,refetchLegalHold:r}=e;const l=(0,h().tz)(),[d,c]=(0,s.useState)(""),[u,g]=(0,s.useState)(""),[m,f]=(0,s.useState)(!1),{updateLegalHold:x}=Ti(),{name:y,description:b,icon:S}=n??{},j=(0,v().IS)((e=>({icon:{height:16,width:16,fill:e.text.secondary},releaseLegalHoldByline:{width:450}})),[]);(0,s.useEffect)((()=>{y&&c(y),b&&g(b)}),[y,b]);const{longTallShimmer:w,longShimmer:A,shortShimmer:M}=(0,R().Z)(),C=Pr(t,null==n?void 0:n.icon),T=(0,s.useCallback)((e=>{g(e||"")}),[g]),k=(0,s.useCallback)((e=>{c(e||"")}),[c]),_=(0,s.useCallback)((()=>{c(y||""),g(b||"")}),[y,b]),z=(0,s.useCallback)((async e=>{const a=await x({legalHoldId:t,icon:e});a.icon&&a.icon!==S&&await r()}),[t,x,r,S]),D=(0,s.useCallback)((()=>{f(!0)}),[]),N=(0,s.useCallback)((async()=>{await x({legalHoldId:t,status:"released"}),await r()}),[t,x,r]),B=(0,s.useMemo)((()=>{var e,t;return null!=n&&n.userInteractionType?null!=n&&null!==(e=n.userInteractionType)&&void 0!==e&&e.includes("page.viewed")?Ur.holdRangeLabelViewedFrom:null!=n&&null!==(t=n.userInteractionType)&&void 0!==t&&t.includes("page.edited")?Ur.holdRangeLabelEditedFrom:Ur.holdRangeLabelCreatedFrom:Ur.holdRangeLabel}),[null==n?void 0:n.userInteractionType]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)($,{}),(0,i.jsxs)(Z,{children:[(0,i.jsx)(Q,{title:(0,i.jsx)(h().sA,{id:"legalHold.general.edit.title",defaultMessage:"Edit legal hold details"}),byline:(0,i.jsx)(h().sA,{id:"legalHold.general.edit.byline",defaultMessage:"Edit this legal hold’s name below. Changes will take effect immediately upon saving."}),icon:ln().personCircleFillIcon,localIconWithPointer:C,onSave:async()=>{const e=await x({legalHoldId:t,name:""===d?void 0:d,description:""===u?void 0:u});e.name&&e.name!==d&&c(e.name),e.description&&e.description!==u&&g(e.description),await r()},onCancel:_,onNameChange:k,onIconChange:z,entityName:(null==n?void 0:n.name)||"",disabled:"released"===(null==n?void 0:n.status),loading:o,disabledTooltipText:l.formatMessage(Ur.disabledTooltipText),entityDescription:(0,i.jsxs)(ae().VP,{maxWidth:"600px",marginTop:2,alignItems:"flex-start",gap:12,children:[o?(0,i.jsx)(P().A,{style:M}):n&&(0,i.jsx)(Br,{status:n.status}),o?(0,i.jsx)(P().A,{style:A}):n&&(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:n.description})]}),onDescriptionChange:T,entityDescriptionText:null==n?void 0:n.description}),(0,i.jsxs)(ae().VP,{gap:40,children:[(0,i.jsxs)(_r().xA,{gap:12,children:[(0,i.jsx)(_r().LX,{row:1,col:1,children:(0,i.jsx)(zr,{iconFunction:Tr().D,label:B,value:(0,i.jsx)(Dr,{startDate:null==n?void 0:n.startDate,endDate:null==n?void 0:n.endDate})},"holdRange")}),(0,i.jsx)(_r().LX,{row:1,col:2,children:(0,i.jsx)(zr,{iconFunction:ln().personCircleFillIcon,label:Ur.createdByLabel,value:(0,i.jsx)(Hr,{createdBy:null==n?void 0:n.createdBy})},"createdBy")}),(0,i.jsx)(_r().LX,{row:2,col:1,children:(0,i.jsx)(zr,{iconFunction:p().V,label:Ur.workspacesLabel,value:(0,i.jsx)(pi,{workspaceIds:(null==n?void 0:n.workspaces.ids)||[],totalCount:(null==n?void 0:n.workspaces.total)||0})},"workspaces")}),(0,i.jsx)(_r().LX,{row:2,col:2,children:(0,i.jsx)(zr,{iconFunction:Tr().D,label:Ur.createdAtLabel,value:(0,i.jsx)(h().XU,{value:null==n?void 0:n.createdTime,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})},"createdAt")})]}),(0,i.jsxs)(ae().fI,{gap:12,wrap:"wrap",children:[(0,i.jsx)(J().A,{isLoading:o,headerText:(0,i.jsx)(h().sA,{id:"legalHold.general.members.title",defaultMessage:"Members on hold"}),mainText:n?(0,i.jsx)(h().sA,{id:"legalHold.general.members.count",defaultMessage:"{memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{memberCount:n.users.total}}):(0,i.jsx)(P().A,{style:w}),bottom:(0,i.jsx)(Rr,{userIds:(null==n?void 0:n.users.ids)||[],totalCount:(null==n?void 0:n.users.total)||0}),onClick:()=>{a("members")}}),(0,i.jsx)(J().A,{disabled:"active"!==(null==n?void 0:n.status),isLoading:o,headerText:(0,i.jsxs)(ae().fI,{gap:4,children:[(0,i.jsx)(h().sA,{id:"legalHold.general.pages.title",defaultMessage:"Associated pages"}),"active"===(null==n?void 0:n.status)&&(0,i.jsx)(V().A,{style:{width:238},textWrap:!0,renderTooltip:()=>null!=n&&n.userInteractionType?Fr[n.userInteractionType[0]]:null,render:e=>(0,i.jsx)("div",{...e,children:(0,Ir().questionMarkCircleIcon)(j.icon)})})]}),mainText:n?(0,i.jsx)(h().sA,{id:"legalHold.general.pages.count",defaultMessage:"{pageCount, plural, one {{pageCount} page} other {{pageCount} pages}}",values:{pageCount:n.pages.total}}):(0,i.jsx)(P().A,{style:w}),bottom:(0,i.jsx)(Wr,{pages:(null==n?void 0:n.pages.ids)||[],totalCount:(null==n?void 0:n.pages.total)||0,isLoading:o}),onClick:()=>{a("browse_content")}})]}),"active"===(null==n?void 0:n.status)&&(0,i.jsxs)("div",{children:[(0,i.jsx)(kr().A,{size:1,colorName:"weak"}),(0,i.jsx)(se,{title:l.formatMessage(Ur.manageLegalHoldTitle),content:(0,i.jsx)(be().y,{title:l.formatMessage(Ur.releaseLegalHoldLabel),byline:(0,i.jsx)("div",{style:j.releaseLegalHoldByline,children:l.formatMessage(Ur.releaseLegalHoldDescription)}),item:(0,i.jsx)(Or,{onClick:D})})})]})]}),m&&(0,i.jsx)(Lr,{onDismiss:()=>f(!1),onSubmit:N})]})]})}function Wr(e){let{pages:t,totalCount:a,isLoading:n}=e;const o=(0,f().v3)(),{organizationOwnerRecordCache:r}=(0,s.useContext)(k().N),l=(0,x().K8)((()=>t.map((e=>new(Co().B)(o,{table:ea().ev,id:e},{inMemoryRecordCache:r})))),[t,o,r]);return(0,i.jsx)(X().ng,{blockStores:l,totalCount:a,showTooltip:!0,isLoading:n})}var qr=()=>a(280335),Gr=()=>a(532940),Kr=()=>a(179030);function Yr(e){let{organizationStore:t,userStore:a,groupStore:n,onDismiss:o,onCloseOuterModal:r}=e;const l=(0,f().v3)(),d=(0,h().tz)(),{updateCacheWithRecordMap:c}=(0,s.useContext)(k().N),{userData:u}=qi({userStore:a,organizationStore:t}),g=(0,x().K8)((()=>{var e;const t=n.getSpaceId();return t?null===(e=u.userSpaceAccessMap.get(t))||void 0===e?void 0:e.role:void 0}),[u,n]),m=(0,x().K8)((()=>{var e;return null===(e=n.getSpaceStore())||void 0===e?void 0:e.getName()}),[n]),p=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:q().J2},header:{width:q().J2}})),[]);const[y,b]=(0,s.useState)(!1);return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:o,render:()=>(0,i.jsx)(O().tf,{header:(0,i.jsx)("div",{style:p.header,children:(0,i.jsx)(q().rQ,{icon:(0,Gr().exclamationMarkTriangleIcon)(p.icon),title:(0,i.jsx)(h().sA,{id:"organization.group.settings.manageGroup.delete.modal.title",defaultMessage:"Are you sure you want to delete this group?"}),byline:(0,i.jsx)(h().sA,{id:"organization.group.settings.manageGroup.delete.modal.byline",defaultMessage:"Deleting this group will remove member access to pages and teamspaces. Any pages that are private to this group will be transferred to you."})})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"organization.group.settings.manageGroup.delete.modal.primaryAction",defaultMessage:"Delete group"}),primaryAction:async()=>{b(!0),await async function(){const e=n.getSpaceId(),a=n.getGroupId();if(!e||!a)return;const s=await S().callApi({eventName:"deleteGroupsInOrganizationSpace",environment:l,data:{organizationId:t.id,spaceId:e,groupIds:[a]}});"success"===s.type?((0,w().u)({environment:l,event:{eventName:"org_console_general_delete_entity",eventProperties:{entity:"group",organization_id:t.id,space_id:e}}}),c({data:s.data}),o(),r(),(0,w().u)({environment:l,event:{eventName:"org_console_delete_group_in_space",eventProperties:{organization_id:t.id,space_id:e}}})):j().f1((0,A().Hu)(d,s))}(),b(!1)},primaryDisabled:y,secondaryText:(0,i.jsx)(h().sA,{id:"organization.group.settings.manageGroup.delete.modal.cancelAction",defaultMessage:"Cancel"}),secondaryAction:o,isLightRed:!0}),children:"editor"!==g?(0,i.jsx)("div",{style:p.container,children:(0,i.jsx)(Kr().l,{display:"inline",tint:"gray",iconGroup:qr().Z,label:(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",children:m?(0,i.jsx)(h().sA,{id:"organization.group.settings.manageGroup.delete.modal.notInWorkspaceWarning",defaultMessage:"<b>You are not an owner of this workspace</b>. By deleting this group you will join the <b>{workspaceName}</b> workspace as workspace owner.",values:{b:e=>(0,i.jsx)("b",{children:e}),workspaceName:m}}):(0,i.jsx)(h().sA,{id:"organization.group.settings.manageGroup.delete.modal.notInWorkspaceWarningNoName",defaultMessage:"<b>You are not an owner of this workspace</b>. By deleting this group you will join this group's workspace as workspace owner.",values:{b:e=>(0,i.jsx)("b",{children:e})}})})})}):null})})}function Qr(e){let{organizationId:t,membersState:a,teamsState:n,groupStore:o,setSelectedTab:r,onCloseModal:l}=e;const d=(0,f().v3)(),c=(0,h().tz)(),{updateCacheWithRecordMap:g}=(0,s.useContext)(k().N),m=(0,v().IS)((e=>({tilesContainer:{display:"flex",gap:12,flexWrap:"wrap"},dotSeparator:{margin:"0 4px"}})),[]),[p,y]=(0,s.useState)(""),b=(0,x().K8)((()=>o.getName()),[o]),M=(0,x().K8)((()=>o.getIcon()),[o]);return(0,s.useEffect)((()=>{y(b||"")}),[b]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)($,{}),(0,i.jsxs)(Z,{children:[(0,i.jsx)(Q,{title:(0,i.jsx)(h().sA,{id:"organization.general.organization.group.title",defaultMessage:"Edit group details"}),byline:(0,i.jsx)(h().sA,{id:"organization.general.organization.group.byline",defaultMessage:"Edit this group's name below. Changes will take effect immediately upon saving."}),icon:u().peopleIcon,onSave:async function(){if(p===b)return;const e=o.getSpaceId(),a=o.getGroupId();if(!e||!a)return;const s=await S().callApi({eventName:"updateGroupsInOrganizationSpace",environment:d,data:{organizationId:t,spaceId:e,groupIds:[a],name:p}});"success"===s.type?(g(s),(0,w().u)({environment:d,event:{eventName:"org_console_people_update_group_in_space",eventProperties:{organization_id:t,space_id:e,update_type:"name"}}})):j().f1((0,A().Hu)(c,s))},onCancel:function(){y(b||"")},onIconChange:async function(e){const a=o.getSpaceId(),s=o.getGroupId();if(!a||!s)return;const n=await S().callApi({eventName:"updateGroupsInOrganizationSpace",environment:d,data:{organizationId:t,spaceId:a,groupIds:[s],icon:e}});"success"===n.type?(g(n),(0,w().u)({environment:d,event:{eventName:"org_console_people_update_group_in_space",eventProperties:{organization_id:t,space_id:a,update_type:"icon"}}})):j().f1((0,A().Hu)(c,n))},onNameChange:e=>y(e||""),localIconWithPointer:M?{pointer:o.pointer,icon:M}:void 0,entityName:b||"",entityDescription:(0,i.jsxs)(I().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:[(0,i.jsx)(re().Qq,{memberCount:a.members.length}),(0,i.jsx)(T().A,{style:m.dotSeparator}),(0,i.jsx)(re().tL,{teamCount:n.teamStores.length})]})}),(0,i.jsxs)("div",{style:m.tilesContainer,children:[(0,i.jsx)(ie,{memberCount:a.members.length,sampleMemberUserStores:a.members.slice(0,5),onClick:()=>r("members"),isLoading:a.loading}),(0,i.jsx)(J().A,{isLoading:n.loading,headerText:(0,i.jsx)(h().sA,{id:"organization.group.teamspace.title",defaultMessage:"Associated teamspaces"}),mainText:(0,i.jsx)(h().sA,{id:"organization.group.teamspace.count",defaultMessage:"{teamspaceCount, plural, one {{teamspaceCount} teamspace} other {{teamspaceCount} teamspaces}}",values:{teamspaceCount:n.teamStores.length}}),bottom:(0,i.jsx)(X().tv,{teamStores:n.teamStores,isLoading:n.loading}),onClick:()=>r("teamspaces")})]}),(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"organization.group.settings.manageGroup.title",defaultMessage:"Manage group"}),content:(0,i.jsxs)(xe().L,{children:[(0,i.jsx)(be().y,{title:(0,i.jsx)(h().sA,{id:"organization.group.settings.manageGroup.createTeamspace.title",defaultMessage:"Create teamspace"}),byline:(0,i.jsx)(h().sA,{id:"organization.group.settings.manageGroup.createTeamspace.byline",defaultMessage:"Create a new teamspace using the information and members from this group"}),item:(0,i.jsx)($r,{organizationId:t,groupStore:o})}),(0,i.jsx)(be().y,{title:(0,i.jsx)(h().sA,{id:"organization.group.settings.manageGroup.delete.title",defaultMessage:"Delete group"}),byline:(0,i.jsx)(h().sA,{id:"organization.group.settings.manageGroup.delete.byline",defaultMessage:"Remove this group from the workspace permanently"}),item:(0,i.jsx)(Xr,{organizationId:t,groupStore:o,onCloseModal:l})})]})})]})]})}function $r(e){const{organizationId:t,groupStore:a}=e,[n,o]=(0,s.useState)(!1),r=(0,Ta().E)({organizationId:t}),l=(0,x().K8)((()=>{const e=a.getGroupId();return e?{type:"owner",entity_type:"group",group_id:e}:void 0}),[a]),d=(0,x().K8)((()=>a.getSpaceStore()),[a]);return r&&d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(U().A,{size:"md",onClick:()=>{Hn().A.setState({...Hn().A.state,name:a.getName()||""}),o(!0)},children:(0,i.jsx)(h().sA,{id:"organization.group.settings.manageGroup.createTeamspace.button",defaultMessage:"Create teamspace"})}),n?(0,i.jsx)(Wn,{organizationId:t,spaceStore:d,onDismiss:()=>o(!1),owner:l}):null]}):null}function Xr(e){const{organizationId:t,groupStore:a,onCloseModal:n}=e,o=(0,f().v3)(),[r,l]=(0,s.useState)(!1),d=(0,Ta().E)({organizationId:t}),c=(0,x().K8)((()=>{if(pe().default.state.currentUserStore)return new(C().LU)(o,{table:y().oo,id:pe().default.state.currentUserStore.id})}),[o]);return d&&c?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Ne().E,{color:"uiRed",onClick:()=>l(!0),children:(0,i.jsx)(h().sA,{id:"organization.group.settings.manageGroup.delete.button",defaultMessage:"Delete group"})}),r?(0,i.jsx)(Yr,{organizationStore:d,userStore:c,groupStore:a,onCloseOuterModal:n,onDismiss:()=>{l(!1)}}):null]}):null}function Zr(e){let{organizationId:t,onDismiss:a,groupStore:n,userIds:o}=e;const r=(0,f().v3)(),l=(0,h().tz)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(k().N),[c,u]=(0,s.useState)(!1),g=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:q().J2}})),[]);async function m(){u(!0);const e=n.getSpaceId(),s=n.getGroupId();if(!e||!s)return void u(!1);const i=await S().callApi({eventName:"updateGroupsInOrganizationSpace",environment:r,data:{organizationId:t,spaceId:e,groupIds:[s],removeMembers:o}});"success"===i.type?(d({data:i.data}),a(),u(!1),(0,w().u)({environment:r,event:{eventName:"org_console_people_update_group_in_space",eventProperties:{organization_id:t,space_id:e,update_type:"remove_members"}}})):j().f1((0,A().Hu)(l,i))}return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(O().tf,{showDismissButton:!1,header:(0,i.jsx)(q().rQ,{icon:ys(g.icon),title:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeUsersToGroupModal.title",defaultMessage:"Remove members from group"}),byline:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeUsersToGroupModal.byline",defaultMessage:"Confirm that you want to remove <bold>{count} {count, plural, one {user} other {users}}</bold> from this group, revoking access to all content that this group owns.",values:{count:o.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeUsersToGroupModal.button.remove",defaultMessage:"Remove {count, plural, one {user} other {users}}",values:{count:o.length}}),primaryAction:m,primaryDisabled:c,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removeUsersToGroupModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:g.content,children:(0,i.jsx)(_s,{userIds:o})})})})}const Jr=(0,h().YK)({name:{id:"organization.group.members.nameColumn.header",defaultMessage:"Name"},email:{id:"organization.group.members.emailColumn.header",defaultMessage:"Email"},role:{id:"organization.group.members.roleColumn.header",defaultMessage:"Role"}}),el={id:"name",headerTitle:(0,i.jsx)(h().sA,{...Jr.name}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(ca,{}):(0,i.jsx)(da,{userId:e.userId,useThinTitle:!1}),widthData:{widthPercent:33,minWidth:100},sortable:!1},tl={id:"email",headerTitle:(0,i.jsx)(h().sA,{...Jr.email}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:200}}):(0,i.jsx)(bs().xF,{userId:e.userId,styles:{overflow:"hidden"}}),widthData:{widthPercent:33,minWidth:100},sortable:!1},al={id:"role",headerTitle:(0,i.jsx)(h().sA,{...Jr.role}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:120}}):function(e){let t=(0,i.jsx)(h().sA,{id:"organization.workspace.members.roleColumn.member",defaultMessage:"Member"});switch(e){case"owner":t=(0,i.jsx)(h().sA,{id:"organization.workspace.members.roleColumn.owner",defaultMessage:"Workspace owner"});break;case"membership_admin":t=(0,i.jsx)(h().sA,{id:"organization.workspace.members.roleColumn.membershipAdmin",defaultMessage:"Membership admin"})}return(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t})}(e.role),widthData:{widthPercent:33,minWidth:100},sortable:!1},sl=[{id:el.id,name:M().A.formatMessage(Jr.name),type:"title"},{id:tl.id,name:M().A.formatMessage(Jr.email),type:"title"},{id:al.id,name:M().A.formatMessage(Jr.role),type:"title"}],nl=[el,tl,al];var ol=function(e){return e.AddToGroup="add-to-group",e.RemoveFromGroup="remove-from-group",e}(ol||{});function il(e){let{organizationId:t,groupStore:a,onCloseModal:n,membersState:o}=e;const{organizationMemberEmailDomains:r}=(0,s.useContext)(_().D),l=(0,h().tz)(),d=(0,x().K8)((()=>a.getSpaceId()),[a]),c=(0,On().F)(),g=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:nl,theme:e,containerMarginTop:0})),[]),m=(0,x().K8)((()=>o.members.map((e=>({type:Qt().T.OrganizationGroupMember,id:e.id,name:e.getDisplayName(l),email:e.getEmail(),role:_n(e.getRole()),userId:e.id,isClickable:!0})))),[o,l]),[p,f]=(0,s.useState)(),[y,b]=(0,s.useState)({}),[S,j]=(0,s.useState)(),[w,A]=(0,s.useState)(!1),[M,C]=(0,s.useState)(),I=M??S??[],T=(0,s.useMemo)((()=>{if(!m)return[];let e=m;return y.query&&(e=(0,ut().Ay)(y.query,e,(e=>e.name))),y.emailDomains&&y.emailDomains.length>0&&(e=e.filter((e=>{var t;const a=e.email?(0,ct().zN)(e.email):void 0;return!!a&&(null===(t=y.emailDomains)||void 0===t?void 0:t.includes(a))}))),y.roles&&y.roles.length>0&&(e=e.filter((e=>{var t;const a=e.role;return!!a&&(null===(t=y.roles)||void 0===t?void 0:t.includes(a))}))),function(e){const{rows:t,appliedSorts:a}=e,s=null!=a&&a.length?a:[{propertyId:al.id,direction:"ascending"}],n=s.map((e=>{let{propertyId:t}=e;return t===tl.id?"email":t===al.id?zn:t===el.id?"name":zn})),o=s.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Pe().HB)(t)}));return(0,$e().My)(t,n,o)}({rows:e,appliedSorts:S})}),[m,y.roles,y.emailDomains,y.query,S]),k=Math.max(1,Math.ceil(T.length/Ze().q)),[z,D]=(0,s.useState)(0),P=T.slice(z*Ze().q,(z+1)*Ze().q),N=Ze().q*(z+1)<T.length,R=z>0;const{selectedRows:B,handleToggleRow:L,handleSelectAllRows:E,handleUnselectAllRows:O}=Et({allPossibleRows:P});return!o.loading&&o.error?(0,i.jsx)(Kt,{error:o.error}):(0,i.jsxs)(Z,{children:[(0,i.jsx)(Ua()._,{title:(0,i.jsx)(h().sA,{id:"organization.groups.modal.members.title",defaultMessage:"Members"}),byline:(0,i.jsx)(h().sA,{id:"organization.groups.modal.members.byline",defaultMessage:"Add and remove members from this group to manage access across this workspace"})}),(0,i.jsxs)("div",{style:c.tableHeader,children:[(0,i.jsxs)("div",{style:c.leftContent,children:[(0,i.jsxs)(La,{isOpen:B.length>0,children:[(0,i.jsx)(Ea,{isPrimary:!0,title:(0,i.jsx)(h().sA,{id:"organization.group.membersTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:B.length}}),onClick:O}),(0,i.jsx)(Ea,{icon:ys,title:(0,i.jsx)(h().sA,{id:"organization.group.membersTable.multiselect.remove",defaultMessage:"Remove from group"}),onClick:()=>f(ol.RemoveFromGroup)})]}),(0,i.jsx)(En().A,{children:(0,i.jsx)(Ha().e,{sortProperties:sl,isMenuOpen:w,setIsMenuOpen:A,onApply:e=>{A(!1),j(e),C(void 0)},currentSorts:I})}),I.length>0?(0,i.jsx)(Ln().he,{}):null,(0,i.jsx)(Gs,{pillTitle:(0,i.jsx)(h().sA,{id:"organizationMembersSubTab.filters.email.title",defaultMessage:"Email"}),emailDomains:r,selectedEmailDomains:y.emailDomains||[],setSelectedEmailDomains:e=>{b((t=>({...t,emailDomains:e})))}}),(0,i.jsx)(gn,{setUserRoles:e=>b((t=>({...t,roles:e}))),selectedUserRoles:y.roles||[],roles:mn})]}),(0,i.jsxs)("div",{style:c.rightContent,children:[(0,i.jsx)(Fa().x,{appliedSorts:S,openSortPillMenu:e=>{e&&C([{propertyId:e,direction:"ascending"}]),A(!0)},sortProperties:sl}),(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:y.query,setQueryFilter:e=>{b((t=>({...t,query:e})))}}),(0,i.jsx)(F().A,{onClick:()=>{f(ol.AddToGroup)},children:(0,i.jsx)(h().sA,{id:"organizationMembersSubTab.button.addMembers",defaultMessage:"Add members"})})]})]}),p===ol.RemoveFromGroup?(0,i.jsx)(Zr,{organizationId:t,onDismiss:()=>{f(void 0),O()},groupStore:a,userIds:B.map((e=>e.userId))}):null,p===ol.AddToGroup&&d?(0,i.jsx)(Ra,{organizationId:t,onDismiss:()=>{f(void 0),O()},spaceId:d,groupStore:a}):null,(0,i.jsx)(Nt().WE,{hideHeaderRowPadding:!0,rows:o.loading?(0,Qt().n)():P,columnRenderInfo:nl,styles:g,onRowClick:e=>{e.type!==Qt().T.Loading&&L(e)},renderNoRowsComponent:()=>(0,i.jsx)(qt,{icon:u().peopleIcon,title:(0,i.jsx)(h().sA,{id:"membersTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(h().sA,{id:"membersTable.empty.byline",defaultMessage:"There are no members that match this query"})}),showRowBorders:!0,multiselect:{header:{isDisabled:o.loading,isSelected:P.length>0&&B.length===P.length,onClick:()=>{B.length===P.length?O():E()}},row:{getDisabledState:()=>o.loading,getSelectedState:e=>B.some((t=>t.id===e.id)),onClick:e=>{e.type!==Qt().T.Loading&&L(e)}}},loadMoreMethod:{type:"pages",onLoadNext:()=>{D((e=>N?e+1:e)),O()},onLoadPrevious:()=>{D((e=>Math.max(e-1,0))),O()},hasNextPage:N,hasPrevPage:R,currentPage:z+1,finalPage:k}})]})}var rl=()=>a(46986);function ll(e){let{organizationId:t,onDismiss:a,groupStore:n,spaceStore:o,pageIds:r,removePagesFromGroup:l}=e;const d=(0,f().v3)(),c=(0,h().tz)(),{updateCacheWithRecordMap:u}=(0,s.useContext)(k().N),[g,m]=(0,s.useState)(!1),p=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{height:"fit-content",width:440}})),[]);async function x(){m(!0);const e=n.getSpaceId(),s=n.getGroupId();if(!e||!s)return void m(!1);const o=await S().callApi({eventName:"updateGroupsInOrganizationSpace",environment:d,data:{organizationId:t,spaceId:e,groupIds:[s],removePages:r}});if("success"!==o.type)return j().f1((0,A().Hu)(c,o)),void m(!1);u({data:o.data}),l(s,r),a(),m(!1),(0,w().u)({environment:d,event:{eventName:"org_console_people_update_group_in_space",eventProperties:{organization_id:t,space_id:e,update_type:"remove_from_page"}}})}return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(O().tf,{showDismissButton:!1,header:(0,i.jsx)(q().rQ,{icon:ys(p.icon),title:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removePagesToGroupModal.title",defaultMessage:"Remove group from pages"}),byline:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removePagesToGroupModal.byline",defaultMessage:"Confirm that you want to remove this group from <bold>{count, plural, one {this page} other {these pages}} {count}</bold>, revoking this group’s access to that content.",values:{count:r.length,bold:e=>(0,i.jsx)("b",{children:e})}})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removePagesToGroupModal.button.remove",defaultMessage:"Remove {count, plural, one {page} other {pages}}",values:{count:r.length}}),primaryAction:x,primaryDisabled:g,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removePagesToGroupModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:a}),children:(0,i.jsx)("div",{style:p.content,children:(0,i.jsx)(dl,{pageIds:r,spaceStore:o})})})})}function dl(e){const{pageIds:t,spaceStore:a}=e,n=(0,h().tz)(),o=(0,rl().x6)(),r=ta({blockIds:t}),[l,d]=(0,s.useState)(""),c=(0,x().K8)((()=>r.map((e=>{var t,s;return{id:e.id,icon:(0,i.jsx)(N().B6,{icon:null===(t=e.getModel())||void 0===t?void 0:t.getRenderIcon({getRecordModel:e.getRecordModel}),defaultIcon:(0,N().Te)(e),size:20,isEmptyPage:!1,disabled:!0}),name:null===(s=e.getModel())||void 0===s?void 0:s.getRenderTitle({getRecordModel:e.getRecordModel,userTimeZone:(0,Ee().P)(),intl:n}),caption:(0,Qo().q7)({blockStore:e,spaceStore:a,intl:n,isWorkflowsContainerWithCreationEnabled:o})}}))),[r,a,n,o]),u=(0,ut().Ay)(l,c,(e=>e.name??""));return(0,i.jsx)(q().p6,{items:u,titleText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removePagesToGroupModal.pagesList.title",defaultMessage:"Selected pages"}),headerText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.removePagesToGroupModal.pagesList.header",defaultMessage:"Page"}),headerAction:(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:l,setQueryFilter:d})})}const cl=(0,h().YK)({name:{id:"organization.group.pages.pageColumn.header",defaultMessage:"Page"},createdBy:{id:"organization.group.pages.createdByColumn.header",defaultMessage:"Created by"},createdOn:{id:"organization.group.pages.createdOnColumn.header",defaultMessage:"Created on"},audience:{id:"organization.group.pages.audienceColumn.header",defaultMessage:"Audience"}}),ul={id:"name",headerTitle:(0,i.jsx)(h().sA,{...cl.name}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(ca,{}):(0,i.jsx)(Qo().oc,{blockStore:e.blockStore,parentSpaceStore:e.spaceStore}),widthData:{widthPercent:30,minWidth:130},sortable:!1},gl={id:"createdBy",headerTitle:(0,i.jsx)(h().sA,{...cl.createdBy}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:200}}):(0,i.jsx)(Ko().T,{blockStore:e.blockStore,userIds:e.createdById?[e.createdById]:[]}),widthData:{widthPercent:18,minWidth:75},sortable:!1},ml={id:"createdOn",headerTitle:(0,i.jsx)(h().sA,{...cl.createdOn}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:200}}):(0,i.jsx)(Yo().d,{useSecondaryColorTitle:!0,dateTs:e.createdOn}),widthData:{widthPercent:18,minWidth:75},sortable:!1},pl={id:"audience",headerTitle:(0,i.jsx)(h().sA,{...cl.audience}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:120}}):(0,i.jsx)(qo().b,{useSecondaryColorTitle:!0,blockStore:e.blockStore,spaceStore:e.spaceStore}),widthData:{widthPercent:18,minWidth:75},sortable:!1},hl=[{id:ul.id,name:M().A.formatMessage(cl.name),type:"title"},{id:gl.id,name:M().A.formatMessage(cl.createdBy),type:"person"},{id:ml.id,name:M().A.formatMessage(cl.createdOn),type:"date"}],fl=[ul,gl,ml,pl];var xl=function(e){return e.RemoveGroupFromPage="remove-from-group",e}(xl||{});function vl(e){let{organizationId:t,groupStore:a,groupPageStores:n,removePagesFromGroup:o}=e;const r=sa({spaceId:(0,x().K8)((()=>a.getSpaceId()),[a])}),d=(0,On().F)(),c=(0,Vt().A)(),u=(0,v().IS)((e=>{const t=(0,Nt().rC)({columnRenderInfo:fl,theme:e,containerMarginTop:0});return{...t,container:{...t.container,width:"calc(100% + 56px)"}}}),[]),g=fl.map((e=>({...e,headerStyle:c.tableHeader,rowStyle:c.tableRow}))),m=(0,x().K8)((()=>n.map((e=>{var t;return{type:Qt().T.OrganizationGroupPage,id:e.id,title:null===(t=e.getModel())||void 0===t?void 0:t.getRenderTitle({getRecordModel:e.getRecordModel,userTimeZone:(0,Ee().P)(),intl:M().A.getIntl()}),blockId:e.id,blockStore:e,spaceStore:r,createdOn:e.getCreatedTime(),createdById:e.getCreatedById(),isClickable:!0}}))),[n,r]),p=(0,x().K8)((()=>(0,$e().sb)(n.map((e=>e.getCreatedByPointer())).filter((e=>(null==e?void 0:e.table)===y().oo)).map((e=>e.id)))),[n]),[f,b]=(0,s.useState)(),[S,j]=(0,s.useState)({}),[w,A]=(0,s.useState)(),[C,I]=(0,s.useState)(!1),[T,k]=(0,s.useState)(),_=T??w??[],z=(0,s.useMemo)((()=>{if(!m)return[];let e=m;S.query&&(e=(0,ut().Ay)(S.query,e,(e=>e.title||"")));const t=S.createdByIds;return t&&t.length>0&&(e=e.filter((e=>!!e.createdById&&t.includes(e.createdById)))),function(e){const{rows:t,appliedSorts:a}=e,s=null!=a&&a.length?a:[{propertyId:ul.id,direction:"ascending"}],n=s.map((e=>{let{propertyId:t}=e;return t===ul.id?"title":t===ml.id?"createdOn":t===gl.id?"createdById":"title"})),o=s.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Pe().HB)(t)}));return(0,$e().My)(t,n,o)}({rows:e,appliedSorts:w})}),[m,S.query,S.createdByIds,w]),D=Math.max(1,Math.floor(z.length/Ze().q)),[P,N]=(0,s.useState)(0),R=z.slice(P*Ze().q,(P+1)*Ze().q),B=Ze().q*(P+1)<z.length,L=P>0;const{selectedRows:E,handleToggleRow:O,handleSelectAllRows:U,handleUnselectAllRows:F}=Et({allPossibleRows:R});return(0,i.jsxs)(Z,{children:[(0,i.jsx)(Ua()._,{title:(0,i.jsx)(h().sA,{id:"organization.groups.modal.pages.title",defaultMessage:"Pages"}),byline:(0,i.jsx)(h().sA,{id:"organization.groups.modal.pages.byline",defaultMessage:"View all pages accessible to this group or remove their access"})}),(0,i.jsxs)("div",{style:d.tableHeader,children:[(0,i.jsxs)("div",{style:d.leftContent,children:[(0,i.jsxs)(La,{isOpen:E.length>0,children:[(0,i.jsx)(Ea,{isPrimary:!0,title:(0,i.jsx)(h().sA,{id:"organization.group.pagesTable.multiselect.selectedItemsCount",defaultMessage:"{itemsSelectedCount} selected",values:{itemsSelectedCount:E.length}}),onClick:F}),(0,i.jsx)(Ea,{icon:ys,title:(0,i.jsx)(h().sA,{id:"organization.group.pagesTable.multiselect.remove",defaultMessage:"Remove group from page"}),onClick:()=>b(xl.RemoveGroupFromPage)})]}),(0,i.jsx)(En().A,{children:(0,i.jsx)(Ha().e,{sortProperties:hl,isMenuOpen:C,setIsMenuOpen:I,onApply:e=>{I(!1),A(e),k(void 0)},currentSorts:_})}),_.length>0?(0,i.jsx)(Ln().he,{}):null,(0,i.jsx)(Ro,{pillTitle:(0,i.jsx)(h().sA,{id:"organization.group.pagesTable.filters.createdBy",defaultMessage:"Created by"}),selectedUsers:S.createdByIds||[],setSelectedUsers:e=>{j((t=>({...t,createdByIds:e})))},userIds:p})]}),(0,i.jsxs)("div",{style:d.rightContent,children:[(0,i.jsx)(Fa().x,{appliedSorts:w,openSortPillMenu:e=>{e&&k([{propertyId:e,direction:"ascending"}]),I(!0)},sortProperties:hl}),(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:S.query,setQueryFilter:e=>{j((t=>({...t,query:e})))}})]})]}),(0,i.jsx)(Nt().WE,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,rows:R,columnRenderInfo:g,styles:u,onRowClick:e=>{e.type!==Qt().T.Loading&&O(e)},renderNoRowsComponent:()=>(0,i.jsx)(qt,{icon:l().d,title:(0,i.jsx)(h().sA,{id:"pagesTable.empty",defaultMessage:"No pages found"}),byline:(0,i.jsx)(h().sA,{id:"pagesTable.empty.byline",defaultMessage:"There are no pages that match this query"})}),showRowBorders:!0,multiselect:{header:{isDisabled:!1,isSelected:R.length>0&&E.length===R.length,onClick:()=>{E.length===R.length?F():U()}},row:{getDisabledState:()=>!1,getSelectedState:e=>E.some((t=>t.id===e.id)),onClick:e=>{e.type!==Qt().T.Loading&&O(e)}}},loadMoreMethod:{type:"pages",onLoadNext:()=>{N((e=>B?e+1:e)),F()},onLoadPrevious:()=>{N((e=>Math.max(e-1,0))),F()},hasNextPage:B,hasPrevPage:L,currentPage:P+1,finalPage:D}}),f===xl.RemoveGroupFromPage?(0,i.jsx)(ll,{organizationId:t,onDismiss:()=>{b(void 0),F()},groupStore:a,spaceStore:r,pageIds:E.map((e=>e.blockId)),removePagesFromGroup:o}):null]})}var yl=()=>a(348564),bl=()=>a(366951),Sl=()=>a(230357),jl=()=>a(873066),wl=()=>a(821879),Al=()=>a(604995),Ml=()=>a(824862);class Cl extends ka().Store{getInitialState(){return{auditLogPointer:void 0,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set}}isUserOrBotRemoved(e){return Boolean(e&&(this.state.removedUserIds.has(e)||this.state.removedBotIds.has(e)))}}const Il=new Cl;class Tl extends ka().Store{getInitialState(){return{cachedResponses:{}}}getCursor(e,t,a){if(a<=1||!$e().n4(this.state.pointer,e))return;const s=(0,Sl()._)(t);if(this.state.filterStr!==s)return;const n=this.state.cachedResponses[a-1];return"success"===n.status?null==n?void 0:n.nextCursor:void 0}startLoading(e,t){this.updateResultHelper(e,t,{status:"loading"})}updateLoadedResult(e,t,a){this.updateResultHelper(e,t,{...a,status:"success",loadedAt:Date.now()})}updateError(e,t){this.updateResultHelper(e,t,{status:"error"})}updateResultHelper(e,t,a){const s=(0,Sl()._)(t);1!==t.pageNum&&$e().n4(this.state.pointer,e)&&this.state.filterStr===s?this.setState({pointer:e,filterStr:s,cachedResponses:{...this.state.cachedResponses,[t.pageNum]:{...a}}}):this.setState({pointer:e,filterStr:s,cachedResponses:{[t.pageNum||1]:{...a}}})}}const kl=new Tl,_l=(0,h().YK)({loadCurrentAuditLogError:{id:"auditlog.error.loadCurrentAuditLogError",defaultMessage:"Failed to load audit logs"}});async function zl(e){var t,a;const{environment:s,auditLogPointer:n,organizationId:o}=e,i=e.filters||Sl().A.getState();kl.startLoading(n,i);const{sortOrder:r,pageSize:l,pageNum:d}=i,c={limit:l,cursor:kl.getCursor(n,i,d),filters:{timeRange:{starting:i.timeRange.starting?Al().C6.toUnixMs(i.timeRange.starting):void 0,ending:i.timeRange.ending?Al().C6.toUnixMs(i.timeRange.ending):void 0},...(null===(t=i.actors)||void 0===t?void 0:t.length)>0?{actors:i.actors}:void 0,...(null===(a=i.actions)||void 0===a?void 0:a.length)>0?{actions:i.actions}:void 0},sort:r||yl().K7.CreatedNewest};n.table===aa().NX?await Dl({environment:s,request:{...c,spaceId:n.id},auditLogPointer:n,filters:i,organizationId:o}):n.table===_a().y7?await Dl({environment:s,request:{...c,organizationId:n.id},auditLogPointer:n,filters:i,organizationId:o}):(0,Pe().HB)(n.table)}async function Dl(e){const{environment:t,request:a,auditLogPointer:s,filters:n,organizationId:o}=e;let i;if("spaceId"in a?i=await S().callApi({eventName:"searchAuditLog",environment:t,data:a,headers:(0,Zt().WS)({spaceId:a.spaceId})}):"organizationId"in a?i=await S().callApi({eventName:"searchAuditLogForOrganization",environment:t,data:a}):(0,Pe().HB)(a),"success"===i.type)"spaceId"in a?(0,w().u)({environment:t,event:{eventName:"org_console_audit_log_query",eventProperties:{type:"space",organization_id:o,space_id:a.spaceId}}}):"organizationId"in a?(0,w().u)({environment:t,event:{eventName:"org_console_audit_log_query",eventProperties:{type:"organization",organization_id:a.organizationId}}}):(0,Pe().HB)(a),kl.updateLoadedResult(s,n,i.data);else if(kl.updateError(s,n),(0,hn().op4)(i.body)){const e=(0,A().Hu)(M().A.getIntl(),i);j().f1(e)}else j().f1(M().A.formatMessage(_l.loadCurrentAuditLogError))}async function Pl(e){const{environment:t,shouldUseEdgeCache:a,parentStore:s}=e;if(!s)return void Il.reset();const n=Il.getState(),o={id:s.id,table:s.table};if($e().n4(n.auditLogPointer,o)||Il.reset(),!o)return;let i;if(s.table===aa().NX){const e=await Ma().T.searchActions.load();i=a?{userIds:[],botIds:await e.getSpaceBotIds({environment:t})}:await e.searchSpaceActorIds({environment:t,membersOnly:!1})}else if(s.table===_a().y7){var r;i={userIds:(null===(r=s.getModel())||void 0===r?void 0:r.getOwnerIds())||[],botIds:[]}}else(0,Pe().HB)(s);const l=await async function(e){const{environment:t,auditLogPointer:a,excludeCurrentUsers:s}=e;if(a.table===aa().NX){const e=await S().callApi({eventName:"getHistoricalAuditLogUsers",environment:t,data:{spaceId:a.id,excludeCurrentUsers:s}});return"success"!==e.type?[]:e.data.results}if(a.table===_a().y7){const e=await S().callApi({eventName:"getHistoricalAuditLogUsers",environment:t,data:{organizationId:a.id}});return"success"!==e.type?[]:e.data.results}(0,Pe().HB)(a.table)}({environment:t,auditLogPointer:o,excludeCurrentUsers:a}),d={auditLogPointer:o,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set};for(const u of i.userIds)d.allUserIds.add(u);for(const u of i.botIds)d.allBotIds.add(u);for(const u of l)(c=u.actorId)!==Ml().eR.id&&c!==y().BF.id&&c!==y().mc.id||d.allUserIds.has(u.actorId)?u.actorType!==y().oo||d.allUserIds.has(u.actorId)?u.actorType!==Ml().GP||d.allBotIds.has(u.actorId)||(d.allBotIds.add(u.actorId),d.removedBotIds.add(u.actorId)):(d.allUserIds.add(u.actorId),d.removedUserIds.add(u.actorId)):d.allUserIds.add(u.actorId);var c;Il.setState(d)}var Nl=()=>a(237824),Rl=()=>a(46413),Bl=()=>a(709062),Ll=()=>a(702723),El=()=>a(475971);function Ol(e){let{setWorkspaceRegion:t,workspaceRegion:a}=e;const[n,o]=(0,s.useState)(void 0),r=(0,v().IS)((e=>({button:{border:`1px solid ${e.outlineButtonBorder}`,...El().W},dropdownLabel:{display:"flex",alignItems:"center"},icon:{marginRight:"6px"},dropdownMenu:{width:"200px"}})),[]),l={"us-west-2":{key:"us-west-2",label:(0,i.jsxs)("div",{style:r.dropdownLabel,children:[(0,i.jsx)(Fo().I,{icon:(0,Bl().Iu)("us-west-2"),size:"sm",style:r.icon}),(0,i.jsx)(h().sA,{...(0,Bl().MG)("us-west-2")})]})},"eu-central-1":{key:"eu-central-1",label:(0,i.jsxs)("div",{style:r.dropdownLabel,children:[(0,i.jsx)(Fo().I,{icon:(0,Bl().Iu)("eu-central-1"),size:"sm",style:r.icon}),(0,i.jsx)(h().sA,{...(0,Bl().MG)("eu-central-1")})]})}};return(0,i.jsx)(Ll().m,{isMobile:!1,disabled:!1,type:"dropdown",currentOption:n??a,options:Object.values(l),onSelectOption:async e=>{e!==a&&(o(e),await t(e),o(void 0))},buttonStyle:r.button,placementToOrigin:Ya().W.Bottom,alignmentToOrigin:Ya().C.End,menuStyle:r.dropdownMenu})}a(908872);const Ul=(0,o().wt)("status",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.994 13.822a5.8 5.8 0 0 1-2.338-.474 6.1 6.1 0 0 1-1.933-1.307 6.2 6.2 0 0 1-1.307-1.934 5.8 5.8 0 0 1-.475-2.337q0-1.243.475-2.338a6.2 6.2 0 0 1 3.234-3.24 5.8 5.8 0 0 1 2.338-.475q1.248 0 2.344.474 1.095.475 1.934 1.313a6.1 6.1 0 0 1 1.312 1.928q.475 1.095.475 2.338a5.8 5.8 0 0 1-.475 2.337 6.2 6.2 0 0 1-3.246 3.24q-1.095.475-2.338.475m0-1.195q1.014 0 1.893-.375a4.87 4.87 0 0 0 2.59-2.59q.375-.88.375-1.892 0-1.008-.375-1.887a4.85 4.85 0 0 0-4.489-2.97 4.8 4.8 0 0 0-1.892.374A4.8 4.8 0 0 0 4.555 4.33a4.9 4.9 0 0 0-1.037 1.553 4.8 4.8 0 0 0-.375 1.887q0 1.013.375 1.892.374.88 1.037 1.547a4.8 4.8 0 0 0 3.44 1.418Zm0-6.996a.42.42 0 0 1-.44-.434.42.42 0 0 1 .44-.433.42.42 0 0 1 .434.433.42.42 0 0 1-.434.434m1.29.346a.43.43 0 0 1-.311-.123.43.43 0 0 1-.123-.317.42.42 0 0 1 .433-.433.42.42 0 0 1 .434.433.42.42 0 0 1-.434.44Zm.943.943a.42.42 0 0 1-.434-.434.42.42 0 0 1 .434-.433.42.42 0 0 1 .433.433.42.42 0 0 1-.433.434m.345 1.289a.42.42 0 0 1-.433-.434.42.42 0 0 1 .433-.433.42.42 0 0 1 .434.433.42.42 0 0 1-.434.434m-.345 1.295a.42.42 0 0 1-.434-.434.42.42 0 0 1 .434-.44.42.42 0 0 1 .433.44.42.42 0 0 1-.434.434Zm-.944.937a.42.42 0 0 1-.434-.434.42.42 0 0 1 .434-.433.42.42 0 0 1 .434.434.42.42 0 0 1-.434.433m-1.289.346a.42.42 0 0 1-.44-.434.42.42 0 0 1 .44-.433.42.42 0 0 1 .434.434.42.42 0 0 1-.434.433M6.7 10.441a.42.42 0 0 1-.433-.433.42.42 0 0 1 .433-.434q.188 0 .31.123a.41.41 0 0 1 .13.31.41.41 0 0 1-.13.311.42.42 0 0 1-.31.123m-.943-.937a.42.42 0 0 1-.434-.434.42.42 0 0 1 .434-.44.42.42 0 0 1 .433.44.42.42 0 0 1-.434.434ZM5.41 8.209a.42.42 0 0 1-.433-.434.42.42 0 0 1 .433-.433.42.42 0 0 1 .434.433.42.42 0 0 1-.434.434m.346-1.29a.42.42 0 0 1-.434-.433.42.42 0 0 1 .434-.433.42.42 0 0 1 .433.433.42.42 0 0 1-.433.434Zm.943-.942a.42.42 0 0 1-.433-.44.42.42 0 0 1 .433-.433q.188 0 .31.123a.41.41 0 0 1 .13.31.42.42 0 0 1-.13.317.42.42 0 0 1-.31.123"})});function Fl(e){let{organizationId:t,filters:a,sort:s,query:n}=e;const o=(0,f().v3)(),i=JSON.stringify(s),r=Boolean(a),[{status:l,value:d},c]=(0,Xe().Yb)((async()=>{if(!t)return[];let e=[];if(i){const t=JSON.parse(i);t&&(e=function(e){return e.map((e=>"status"===e.propertyId?{direction:e.direction,columnName:"status"}:"name"===e.propertyId?{direction:e.direction,columnName:"name"}:"lastModifiedAt"===e.propertyId?{direction:e.direction,columnName:"last_edited_time"}:void 0)).filter((e=>void 0!==e))}(t))}const s=await S().callApi({eventName:"getLegalHolds",environment:o,data:{organizationId:t,filters:r?{status:null==a?void 0:a.status,userIds:null==a?void 0:a.userIds}:void 0,sort:e.length>0?e:void 0,query:n??void 0}});if("success"===s.type)return s.data;if("failed"===s.type)throw s.error;return(0,Pe().HB)(s)}),[o,t,r,null==a?void 0:a.status,null==a?void 0:a.userIds,n,i]);return{loading:"pending"===l,legalHolds:d??[],refetch:c}}var Hl=()=>a(202345),Vl=()=>a(244641);const Wl=(0,o().wt)("murse",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M2.788 9.955V8.622q1.56.636 3.377.95 1.818.308 3.828.308 2.017 0 3.835-.308a16.5 16.5 0 0 0 3.377-.943l.007 1.326q-1.62.575-3.445.861a24 24 0 0 1-3.774.287q-1.948 0-3.773-.287a19 19 0 0 1-3.432-.86Zm6.139 2.42q-.828 0-.827-.8V10.4h3.787v1.176q0 .8-.827.8H8.927ZM4.12 16.866q-1.087 0-1.647-.553-.56-.548-.56-1.634V7.986q0-1.094.56-1.64.56-.547 1.647-.547h11.751q1.094 0 1.648.547.56.546.56 1.64v6.693q0 1.087-.56 1.633-.555.554-1.648.554H4.122Zm.055-1.292h11.641q.445 0 .677-.239.24-.232.24-.697v-6.61q0-.473-.24-.705-.232-.232-.677-.232H4.176q-.444 0-.684.232-.232.233-.232.704v6.61q0 .465.232.698.24.24.684.24ZM6.41 6.353V5.17q0-.964.533-1.436.534-.471 1.45-.471h3.192q.971 0 1.476.471.513.472.513 1.436v1.176H12.33v-1.17q0-.368-.205-.567-.199-.198-.574-.198h-3.11q-.377 0-.582.198-.204.2-.205.568v1.176z"})});var ql=()=>a(498212),Gl=()=>a(427711);const Kl=function(){const e=Vl().c9.now().minus({years:Ii().JN}),t=Vl().c9.fromMillis(Ii().V2);return e<t?t:e}(),Yl=(0,h().YK)({legalHoldNamePlaceholder:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.namePlaceholder",defaultMessage:"Name of investigation"},legalHoldDescriptionPlaceholder:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.descriptionPlaceholder",defaultMessage:"Describe the nature of this investigation"},legalHoldNameRequiredValidationError:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.nameRequiredValidationError",defaultMessage:"Name is required"},legalHoldDateRangeRequiredValidationError:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.dateRangeRequiredValidationError",defaultMessage:"Start date is required"},legalHoldDateRangeMinStartDateValidationError:{id:"orgConsole.legalHolds.modal.createLegalHoldModal.dateRangeMinStartDateValidationError",defaultMessage:"Start date is too far in the past"}});function Ql(e){let{onDismiss:t,onSuccess:a,organizationId:n}=e;const[o,r]=s.useState(""),[l,d]=s.useState(void 0),[c,u]=s.useState(void 0),[g,m]=s.useState("page.viewed"),[p,x]=s.useState(void 0),[y,b]=s.useState([]),[j,w]=s.useState({name:void 0,holdMemberUserIds:void 0,dateRange:void 0}),A=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary}})),[]),{loading:C,createLegalHold:I}=function(){const e=(0,f().v3)(),[t,a]=(0,Xe().V$)((async t=>{let{name:a,icon:s,description:n,userInteractionType:o,startDate:i,endDate:r,organizationId:l,spaceId:d,userIds:c}=t;const u=await S().callApi({eventName:"createLegalHold",environment:e,data:{name:a,icon:s,description:n,userInteractionType:o,startDate:i,endDate:r,organizationId:l,spaceId:d,userIds:c}});if("success"===u.type)return u.data;if("failed"===u.type)throw u.error;return(0,Pe().HB)(u)}),[e]);return{loading:"pending"===t.status,createLegalHold:a}}(),T=async()=>{if(!o||null==p||!p.start_date||!y.length){const e={name:o?void 0:Yl.legalHoldNameRequiredValidationError,dateRange:null!=p&&p.start_date?void 0:Yl.legalHoldDateRangeRequiredValidationError,holdMemberUserIds:y.length?void 0:rr.legalHoldAddMembersRequiredValidationError};return void w(e)}const e={name:o,icon:l,description:c,userInteractionType:[g],startDate:new Date(null==p?void 0:p.start_date).getTime(),endDate:null!=p&&p.end_date?new Date(null==p?void 0:p.end_date).getTime():void 0,organizationId:n,userIds:y};try{await I(e),null==a||a(),t()}catch(s){return}};return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:t,areaConstraint:{width:{type:"min",length:q().NF}},render:e=>{let{sizeRange:a}=e;return(0,i.jsx)(O().tf,{showDismissButton:!1,sizeRange:a,header:(0,i.jsx)(q().rQ,{icon:Wl(A.icon),title:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.title",defaultMessage:"Create legal hold"}),bylineWidthOverride:400,byline:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.byline",defaultMessage:"Members affected by a legal hold won’t be notified of the hold and will still maintain their permissions to create, edit, and delete files. {link}",values:{link:(0,i.jsx)(fe()._,{href:Ii().sn,children:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.byline.learnMore",defaultMessage:"Learn more"})})}})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.button.create",defaultMessage:"Create legal hold"}),primaryAction:T,primaryDisabled:C,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:t}),children:(0,i.jsxs)(ae().VP,{gap:q().gA,width:"100%",children:[(0,i.jsx)($l,{name:o,icon:l,error:j.name,onNameChange:e=>{r(e),""!==e&&w((e=>({...e,name:void 0})))},onIconChange:d}),(0,i.jsxs)(ae().VP,{gap:0,children:[(0,i.jsx)(W().A,{children:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.descriptionLabel",defaultMessage:"Description"})}),(0,i.jsx)(E().A,{value:c,placeholder:M().A.formatMessage(Yl.legalHoldDescriptionPlaceholder),onChange:e=>u(e.target.value),textarea:!0})]}),(0,i.jsx)(lr,{organizationId:n,holdMemberUserIds:y,setHoldMemberUserIds:e=>{b(e),e.length&&w((e=>({...e,holdMemberUserIds:void 0})))},error:j.holdMemberUserIds}),(0,i.jsx)(Jl,{interactionType:g,setInteractionType:m,dateRange:p,setDateRange:e=>{x(e),null!=e&&e.start_date&&(Vl().c9.fromFormat(e.start_date,"yyyy-MM-dd")<Kl?w((e=>({...e,dateRange:Yl.legalHoldDateRangeMinStartDateValidationError}))):w((e=>({...e,dateRange:void 0}))))},error:j.dateRange})]})})}})}function $l(e){let{name:t,icon:a,onNameChange:s,onIconChange:n,error:o}=e;const r=a?{icon:a,pointer:{table:"legal_hold",id:(0,ql().Ay)()}}:void 0,l=(0,v().IS)((e=>({icon:{boxShadow:e.inputBoxShadow,background:e.inputBackground,height:32,width:32}})),[]);return(0,i.jsxs)(ae().VP,{gap:8,children:[(0,i.jsxs)(ae().VP,{gap:0,children:[(0,i.jsx)(W().A,{children:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.nameLabel",defaultMessage:"Icon & Name"})}),(0,i.jsxs)(ae().fI,{gap:8,children:[(0,i.jsx)(N().B6,{isLarge:!0,largeIcon:!0,disabled:!1,isEmptyPage:!1,bucket:"public",style:l.icon,icon:r,iconRecordCategory:"pageBlock",size:24,emojiSize:24,onChange:n}),(0,i.jsx)(E().A,{errorOutline:Boolean(o),value:t,placeholder:M().A.formatMessage(Yl.legalHoldNamePlaceholder),onChange:e=>s(e.target.value),inputElementAttributes:{"aria-describedby":"legalHoldNameError",required:!0}})]})]}),(0,i.jsx)(zi().R,{id:"legalHoldNameError",error:o})]})}const Xl={"page.viewed":(0,i.jsx)(h().sA,{id:"legalHolds.userInteractionType.dropdown.label.viewed",defaultMessage:"Viewed, edited & created"}),"page.edited":(0,i.jsx)(h().sA,{id:"legalHolds.userInteractionType.dropdown.label.edited",defaultMessage:"Edited & created"}),"page.created":(0,i.jsx)(h().sA,{id:"legalHolds.userInteractionType.dropdown.label.created",defaultMessage:"Created only"})},Zl={"page.viewed":(0,i.jsx)(h().sA,{id:"legalHolds.dateRange.label.viewed",defaultMessage:"Pages viewed between"}),"page.edited":(0,i.jsx)(h().sA,{id:"legalHolds.dateRange.label.edited",defaultMessage:"Pages edited between"}),"page.created":(0,i.jsx)(h().sA,{id:"legalHolds.dateRange.label.created",defaultMessage:"Pages created between"})};function Jl(e){let{interactionType:t,setInteractionType:a,dateRange:n,setDateRange:o,error:r}=e;const l=s.useMemo((()=>({starting:null!=n&&n.start_date?{type:"date",start_date:n.start_date}:void 0,ending:null!=n&&n.end_date?{type:"date",start_date:n.end_date}:void 0})),[n]),d=(0,v().IS)((e=>({innerButton:{background:e.inputBackground,marginRight:0},popupWrapper:{paddingTop:12,paddingBottom:12},buttonError:{border:`1px solid ${e.redBadgeBackground}`},downIcon:{display:"none"},settingLabel:{marginBottom:0,textWrap:"nowrap"}})),[]);return(0,i.jsxs)(ae().VP,{gap:8,children:[(0,i.jsxs)(ae().fI,{gap:12,alignItems:"center",children:[(0,i.jsx)(W().A,{style:d.settingLabel,children:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.holdPagesLabel",defaultMessage:"Hold pages"})}),(0,i.jsx)(He().A,{innerButtonStyle:d.innerButton,downIconStyle:d.downIcon,selectedTitle:Xl[t],renderMenuSections:e=>[{key:"user_interaction_type",render:e=>(0,i.jsx)(Fe().A,{...e}),items:[{key:"page.viewed",action:()=>{a("page.viewed"),e.close()},render:e=>(0,i.jsx)(Ue().A,{...e,title:Xl["page.viewed"]})},{key:"page.edited",action:()=>{a("page.edited"),e.close()},render:e=>(0,i.jsx)(Ue().A,{...e,title:Xl["page.edited"]})},{key:"page.created",action:()=>{a("page.created"),e.close()},render:e=>(0,i.jsx)(Ue().A,{...e,title:Xl["page.created"]})}]}]}),(0,i.jsx)(W().A,{style:d.settingLabel,children:(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.label.between",defaultMessage:"between"})}),(0,i.jsx)(Oi().Ay,{popupType:Oi().z7.Popup,placementToOrigin:Oi().sx.Bottom,alignmentToOrigin:Oi().yP.Start,renderOrigin:e=>(0,i.jsx)(te().p,{isRed:Boolean(r),style:{...d.innerButton,...r&&d.buttonError},"aria-describedby":"legalHoldDateRangeError",...e,children:n?(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.selectDateRange",defaultMessage:"{startDate} - {endDate}",values:{startDate:null!=n&&n.start_date?(0,i.jsx)(h().XU,{value:null==n?void 0:n.start_date,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"}):(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.selectDateRange.startDate.placeholder",defaultMessage:"Select start date"}),endDate:null!=n&&n.end_date?(0,i.jsx)(h().XU,{value:n.end_date,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"}):(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.selectDateRange.endDate.ongoing",defaultMessage:"Ongoing"})}}):(0,i.jsx)(h().sA,{id:"orgConsole.legalHolds.modal.createLegalHoldModal.selectDateRange.placeholder",defaultMessage:"Select date range"})}),popupWrapStyle:d.popupWrapper,render:e=>(0,i.jsx)(xt().A,{menuType:mt().gu.Popup,children:(0,i.jsx)(Fe().A,{children:(0,i.jsxs)(ae().VP,{gap:12,children:[(0,i.jsx)(ae().fI,{paddingLeft:12,paddingRight:12,children:(0,i.jsx)(W().A,{children:Zl[t]})}),(0,i.jsx)(Gl().A,{title:void 0,disableMenuWrap:!0,value:l,allowRelativeRangeFilter:!0,onUpdate:e=>{var t,a;if(e.error)return;const s={...l,...e.value},n=null===(t=s.starting)||void 0===t?void 0:t.start_date,i=null===(a=s.ending)||void 0===a?void 0:a.start_date;o({type:"daterange",start_date:n,end_date:i})},onDismiss:()=>{e.close()},minDate:Kl,maxDate:Vl().c9.now().plus({years:Ii().gM})})]})})})})]}),(0,i.jsx)(zi().R,{id:"legalHoldDateRangeError",error:r})]})}const ed={id:"name",headerTitle:(0,i.jsx)(h().sA,{id:"organizationLegalHoldsSubTab.legalHolds.nameColumn.header",defaultMessage:"Hold name"}),renderCell:e=>{if(e.type===Qt().T.Loading)return(0,i.jsx)(Rt().mf,{includeIcon:!0,containerStyles:{width:140}});const t=(0,i.jsx)(Nr,{legalHoldName:e.name,legalHoldId:e.id,legalHoldIcon:e.icon,size:Gn().tR,emojiSize:Gn().Gz});return(0,i.jsx)(Rt().s7,{title:e.name,icon:t})},widthData:{widthPercent:25,minWidth:280,maxWidth:280},sortable:!1},td={id:"status",headerTitle:(0,i.jsx)(h().sA,{id:"organizationLegalHoldsSubTab.legalHolds.statusColumn.header",defaultMessage:"Status"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:140}}):(0,i.jsx)(Br,{status:e.status}),widthData:{widthPercent:15,minWidth:140},sortable:!1},ad={id:"workspaces",headerTitle:(0,i.jsx)(h().sA,{id:"organizationLegalHoldsSubTab.legalHolds.workspacesColumn.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:140}}):(0,i.jsx)(pi,{workspaceIds:e.workspaces.ids,totalCount:e.workspaces.total}),widthData:{widthPercent:20,minWidth:140},sortable:!1},sd={id:"users",headerTitle:(0,i.jsx)(h().sA,{id:"organizationLegalHoldsSubTab.legalHolds.membersColumn.header",defaultMessage:"Hold members"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:140}}):(0,i.jsx)(Rr,{userIds:e.users.ids,totalCount:e.users.total}),widthData:{widthPercent:20,minWidth:140},sortable:!1},nd={id:"period",headerTitle:(0,i.jsx)(h().sA,{id:"organizationLegalHoldsSubTab.legalHolds.periodColumn.header",defaultMessage:"Period"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:140}}):(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(Dr,{startDate:e.startDate,endDate:e.endDate})}),widthData:{widthPercent:20,minWidth:220},sortable:!1};function od(e){let{lastEditedTime:t,lastEditedBy:a}=e;const s=(0,f().v3)(),n=(0,h().tz)(),{userStore:o,fullName:r}=(0,x().K8)((()=>{if(a){const e=new(ht().L)(s,{table:y().oo,id:a});return{userStore:e,fullName:e.getFullName(n)}}return{userStore:void 0,fullName:void 0}}),[a,s,n]);return o?(0,i.jsxs)(ae().fI,{alignItems:"center",gap:12,children:[(0,i.jsx)(kn().l,{userStores:[o],useSecondaryColorTitle:!0,useIconsOnly:!0}),(0,i.jsx)(Ws().A,{isSecondaryColor:!0,children:(0,i.jsx)(h().sA,{id:"legalHoldsTable.updatedAt.byAndDate",defaultMessage:"{fullName} on {date}",values:{fullName:r,date:(0,i.jsx)(h().XU,{value:t,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})}})})]}):null}const id={id:"lastModifiedAt",headerTitle:(0,i.jsx)(h().sA,{id:"organizationLegalHoldsSubTab.legalHolds.lastModifiedAtColumn.header",defaultMessage:"Last modified at"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{includeIcon:!0,containerStyles:{width:140}}):(0,i.jsx)(od,{lastEditedTime:e.lastEditedTime,lastEditedBy:e.lastEditedBy}),widthData:{widthPercent:20,minWidth:140},sortable:!0};function rd(e){let{data:t,loading:a,currentPage:n,setCurrentPage:o,setSelectedLegalHoldId:r}=e;const l=s.useMemo((()=>[ed,td,ad,sd,nd,id]),[]),d=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:l,theme:e,containerMarginTop:0})),[l]),c=t.map((e=>({...e,isClickable:!0,type:Qt().T.OrganizationLegalHold}))),u=a&&0===c.length?(0,Qt().n)():c.slice(Ze().q*(n-1),Ze().q*n),g=c.length>Ze().q*n,m=1!==n;return(0,i.jsx)(Nt().WE,{columnRenderInfo:l,hideHeaderRowPadding:!0,rows:u,renderNoRowsComponent:()=>(0,i.jsx)(qt,{title:(0,i.jsx)(h().sA,{id:"legalHoldsTable.empty",defaultMessage:"No legal holds found"}),byline:(0,i.jsx)(h().sA,{id:"legalHoldsTable.empty.byline",defaultMessage:"There are no legal holds that match this query"})}),styles:d,showRowBorders:!0,onRowClick:e=>{e.type===Qt().T.OrganizationLegalHold&&r(e.id)},loadMoreMethod:{type:"pages",onLoadNext:()=>{g&&o(n+1)},onLoadPrevious:()=>{m&&o(n-1)},hasNextPage:g,hasPrevPage:m,currentPage:n},allowHorizontalScroll:!0,setStickyHeaderRow:!0,extendToFullScreen:Yt().e})}function ld(e){let{interactionType:t,startDate:a,endDate:s}=e;const n=(0,i.jsx)(h().sA,{defaultMessage:"This legal hold is currently holding pages created, edited, and viewed between {legalHoldDateRange}",id:"legalHold.tooltip.interactionTypeAndDateRange.viewed",values:{legalHoldDateRange:(0,i.jsx)(Dr,{startDate:a,endDate:s})}});return t?t.includes("page.viewed")?n:t.includes("page.created")?(0,i.jsx)(h().sA,{defaultMessage:"This legal hold is currently holding pages created between {legalHoldDateRange}",id:"legalHold.tooltip.interactionTypeAndDateRange.created",values:{legalHoldDateRange:(0,i.jsx)(Dr,{startDate:a,endDate:s})}}):t.includes("page.edited")?(0,i.jsx)(h().sA,{defaultMessage:"This legal hold is currently holding pages created and edited between {legalHoldDateRange}",id:"legalHold.tooltip.interactionTypeAndDateRange.edited",values:{legalHoldDateRange:(0,i.jsx)(Dr,{startDate:a,endDate:s})}}):void 0:n}function dd(e){let{organizationId:t,legalHoldId:a,legalHoldIcon:n,legalHoldName:o,legalHoldStartDate:r,legalHoldEndDate:l,onDismiss:d}=e;const{legalHold:c,loading:u,refetch:g}=function(e){const t=(0,f().v3)(),[{status:a,value:s},n]=(0,Xe().Yb)((async()=>{const a=await S().callApi({eventName:"getLegalHold",environment:t,data:{legalHoldId:e}});if("success"===a.type)return a.data;if("failed"===a.type)throw a.error;return(0,Pe().HB)(a)}),[t,e]);return{loading:"pending"===a,legalHold:s,refetch:n}}(a),{availableOrganizationFeatures:m}=(0,s.useContext)(_().D),p=(0,v().IS)((e=>({icon:{height:16,width:16,fill:e.text.secondary}})),[]),x=(0,i.jsxs)(ae().fI,{gap:4,alignItems:"center",children:[(0,i.jsx)(Dr,{startDate:r,endDate:l}),(0,i.jsx)(V().A,{textWrap:!0,renderTooltip:()=>(0,i.jsx)(ae().fI,{width:"220px",children:ld({interactionType:null==c?void 0:c.userInteractionType,startDate:r,endDate:l})}),render:e=>(0,i.jsx)("div",{...e,children:(0,Ir().questionMarkCircleIcon)(p.icon)})})]});return(0,i.jsx)(na().iv,{sidebarProps:{sidebarTitle:(null==c?void 0:c.name)||o,sidebarByline:x,sidebarTitleIcon:(0,i.jsx)(Nr,{legalHoldId:a,size:na().WK,emojiSize:na().WK,legalHoldIcon:(null==c?void 0:c.icon)||n,legalHoldName:(null==c?void 0:c.name)||o}),sidebarItemsTitle:(0,i.jsx)(h().sA,{defaultMessage:"Legal hold settings",id:"legalHold.sidebar.topEntitySection"}),hideSeparator:!0,renderTooltip:e=>m.legal_holds_exports_enabled||"exports"!==e.id?"released"===(null==c?void 0:c.status)&&"browse_content"===e.id?(0,i.jsx)(h().sA,{id:"legalHold.sidebar.browseContent.tooltip",defaultMessage:"You can no longer view the content of a released legal hold."}):void 0:(0,i.jsx)(h().sA,{id:"legalHold.sidebar.exports.tooltip",defaultMessage:"Coming soon"})},sceneProps:{legalHoldId:a,legalHold:c,organizationId:t,loading:u,refetchLegalHold:g},tabRenderer:ix,tabNames:Xt().hx,defaultTab:"general",tabAccessor:"active"===(null==c?void 0:c.status)?ox:nx,isOpen:!0,onDismiss:d})}const cd=(0,h().YK)({placeholder:{id:"organizationLegalHoldsSubTab.legalHolds.search.placeholder",defaultMessage:"Search by legal hold name."}}),ud=(0,h().YK)({name:{id:"organizationLegalHoldsSubTab.legalHolds.sort.name",defaultMessage:"Name"},status:{id:"organizationLegalHoldsSubTab.legalHolds.sort.status",defaultMessage:"Status"},lastModifiedAt:{id:"organizationLegalHoldsSubTab.legalHolds.sort.lastModifiedAt",defaultMessage:"Last modified at"}}),gd=[{id:"name",name:M().A.formatMessage(ud.name),type:"title"},{id:"status",name:M().A.formatMessage(ud.status),type:"status"},{id:"lastModifiedAt",name:M().A.formatMessage(ud.lastModifiedAt),type:"last_edited_time"}],md=[{key:"active",value:"active",title:(0,i.jsx)(h().sA,{id:"legalHoldsTable.filters.status.active",defaultMessage:"Active"}),shortTitle:(0,i.jsx)(h().sA,{id:"legalHoldsTable.filters.status.active.shortTitle",defaultMessage:"Active"})},{key:"released",value:"released",title:(0,i.jsx)(h().sA,{id:"legalHoldsTable.filters.status.released",defaultMessage:"Released"}),shortTitle:(0,i.jsx)(h().sA,{id:"legalHoldsTable.filters.status.released.shortTitle",defaultMessage:"Released"})}];var pd=function(e){return e.CreateLegalHold="create-legal-hold",e}(pd||{});function hd(e){let{organizationId:t}=e;const a=(0,h().tz)(),[n,o]=s.useState(),[r,l]=s.useState(""),[d,c]=s.useState(),[u,g]=s.useState(1),[m,p]=s.useState(!1),[f,x]=s.useState(),[v,y]=s.useState(),[b,S]=s.useState(),[j,w]=s.useState([]),A=j.length>0?j:void 0,M=b||A?{status:b,userIds:A}:void 0,{legalHolds:C,loading:I,refetch:T}=Fl({organizationId:t,filters:M,query:""===r?void 0:r,sort:v}),k=(0,On().F)(),_=Array.from(C.reduce(((e,t)=>(t.users.ids.forEach((t=>{e.add(t)})),e)),new Set)),z=C.find((e=>e.id===d)),D=s.useCallback((async()=>{g(1),y(void 0),x(void 0),l(""),S(void 0),w([]),await T()}),[T]);return(0,i.jsxs)(Hl().t,{children:[(0,i.jsx)(Ua()._,{title:Dc[zc.LegalHolds].title,bylineWidth:"600px",byline:(0,i.jsx)(h().sA,{id:"organizationLegalHoldsSubTab.legalHolds.byline",defaultMessage:"Placing a legal hold on a team member allows Organization Owners to view and export all the content that’s been created or modified by that member. {link}",values:{link:(0,i.jsx)(fe()._,{href:Ii().sn,children:(0,i.jsx)(h().sA,{id:"organizationLegalHoldsSubTab.legalHolds.learnMore",defaultMessage:"Learn more"})})}})}),(0,i.jsxs)("div",{style:k.tableHeader,children:[(0,i.jsxs)("div",{style:k.leftContent,children:[(0,i.jsx)(Ha().e,{sortProperties:gd,isMenuOpen:m,setIsMenuOpen:p,onApply:e=>{p(!1),y(e),x(void 0),g(1)},currentSorts:f??v??[]}),(0,i.jsx)(qs().G0,{pillTitle:(0,i.jsx)(h().sA,{id:"legalHoldsTable.filters.status.title",defaultMessage:"Status"}),pillIcon:Ul,selectedItem:b,setSelectedItem:e=>{S(e),g(1)},items:md,shouldUseCheck:!0}),(0,i.jsx)(Ro,{pillTitle:(0,i.jsx)(h().sA,{id:"legalHoldsTable.filters.holdMembers.title",defaultMessage:"Hold members"}),pillIcon:Un().peopleFillIcon,selectedUsers:j,setSelectedUsers:e=>{w(e),g(1)},userIds:_})]}),(0,i.jsxs)("div",{style:k.rightContent,children:[(0,i.jsx)(Fa().x,{appliedSorts:v,openSortPillMenu:e=>{e&&x([{propertyId:e,direction:"ascending"}]),p(!0)},sortProperties:gd}),(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:r,setQueryFilter:e=>{l(e),g(1)},placeholderText:a.formatMessage(cd.placeholder)}),(0,i.jsx)(F().A,{onClick:()=>{o(pd.CreateLegalHold)},children:(0,i.jsx)(h().sA,{id:"legalHoldsTable.button.addLegalHold",defaultMessage:"Create hold"})})]})]}),(0,i.jsx)(rd,{data:C,loading:I,currentPage:u,setCurrentPage:g,setSelectedLegalHoldId:c}),d?(0,i.jsx)(dd,{organizationId:t,legalHoldIcon:(null==z?void 0:z.icon)??"",legalHoldName:(null==z?void 0:z.name)??"",legalHoldId:d,legalHoldStartDate:null==z?void 0:z.startDate,legalHoldEndDate:null==z?void 0:z.endDate,onDismiss:async()=>{c(void 0),await T()}}):null,n===pd.CreateLegalHold?(0,i.jsx)(Ql,{onDismiss:()=>o(void 0),organizationId:t,onSuccess:D}):null]})}var fd=()=>a(655546),xd=()=>a(182392);var vd=()=>a(412632),yd=()=>a(966505);function bd(e){const t=(0,f().v3)(),{type:a,userId:n,onDismiss:o,onSubmit:r}=e,l=(0,h().tz)(),d=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:375}})),[]),c=(0,x().K8)((()=>{if(!n)return"";return new(ht().L)(t,{table:y().oo,id:n}).getDisplayName(l)}),[t,n,l]);const{title:u,byline:g,buttonText:m}=function(){switch(a){case"suspend":return{title:l.formatMessage(Sd.suspendTitle),byline:l.formatMessage(Sd.suspendByline,{userName:c,b:e=>(0,i.jsx)("b",{children:e})}),buttonText:l.formatMessage(Sd.suspendButton)};case"resetPasswordSingle":return{title:l.formatMessage(Sd.resetPasswordSingleTitle),byline:l.formatMessage(Sd.resetPasswordSingleByline),buttonText:l.formatMessage(Sd.resetPasswordSingleButton)};case"resetPasswordAll":return{title:l.formatMessage(Sd.resetPasswordAllTitle),byline:l.formatMessage(Sd.resetPasswordAllByline),buttonText:l.formatMessage(Sd.resetPasswordAllButton)};case"logoutSingle":return{title:l.formatMessage(Sd.logoutSingleTitle),byline:l.formatMessage(Sd.logoutSingleByline),buttonText:l.formatMessage(Sd.logoutSingleButton)};case"logoutAll":return{title:l.formatMessage(Sd.logoutAllTitle),byline:l.formatMessage(Sd.logoutAllByline),buttonText:l.formatMessage(Sd.logoutAllButton)};default:(0,Pe().HB)(a)}}();const[p,b]=(0,s.useState)(!1);return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:o,render:()=>(0,i.jsx)(O().tf,{header:(0,i.jsx)(q().rQ,{icon:(0,Gr().exclamationMarkTriangleIcon)(d.icon),title:u,byline:(0,i.jsx)("div",{style:d.container,children:g})}),footer:(0,i.jsx)(q().jl,{primaryText:m,primaryAction:async()=>{b(!0),await async function(){await r(),o()}(),b(!1)},primaryDisabled:p,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.destructiveUserAction.cancelButton",defaultMessage:"Cancel"}),secondaryAction:o,isLightRed:!0})})})}const Sd=(0,h().YK)({suspendTitle:{id:"orgConsole.people.modal.destructiveUserAction.suspendTitle",defaultMessage:"Suspend this user?"},suspendByline:{id:"orgConsole.people.modal.destructiveUserAction.suspendByline",defaultMessage:"<b>{userName}</b> will lose all workspace and notification access. Their content, comments, and @mentions will stay visible, and integrations will remain active."},suspendButton:{id:"orgConsole.people.modal.destructiveUserAction.suspendButton",defaultMessage:"Suspend user"},resetPasswordSingleTitle:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordTitle",defaultMessage:"Reset password for this user?"},resetPasswordSingleByline:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordByline",defaultMessage:"This will log the user out, remove 2-step verification, and require re-authentication via email. The user must set a new password to log back into Notion."},resetPasswordSingleButton:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordButton",defaultMessage:"Reset password"},resetPasswordAllTitle:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordAllTitle",defaultMessage:"Reset password for all managed users?"},resetPasswordAllByline:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordAllByline",defaultMessage:"This will log the users out, remove 2-step verification, and require re-authentication via email. All managed users must set new passwords to log back into Notion."},resetPasswordAllButton:{id:"orgConsole.people.modal.destructiveUserAction.resetPasswordAllButton",defaultMessage:"Reset all passwords"},logoutSingleTitle:{id:"orgConsole.people.modal.destructiveUserAction.logoutTitle",defaultMessage:"Log out this user?"},logoutSingleByline:{id:"orgConsole.people.modal.destructiveUserAction.logoutByline",defaultMessage:"You are about to log out this user from their current session. They will need to re-authenticate to log back into Notion."},logoutSingleButton:{id:"orgConsole.people.modal.destructiveUserAction.logoutButton",defaultMessage:"Log out user"},logoutAllTitle:{id:"orgConsole.people.modal.destructiveUserAction.logoutAllTitle",defaultMessage:"Log out all managed users?"},logoutAllByline:{id:"orgConsole.people.modal.destructiveUserAction.logoutAllByline",defaultMessage:"You are about to log out the users from their current session. They will need to re-authenticate to log back into Notion."},logoutAllButton:{id:"orgConsole.people.modal.destructiveUserAction.logoutAllButton",defaultMessage:"Log out all users"}});function jd(e){let{organizationStore:t,userId:a,disabled:n,isRed:o}=e;const r=(0,f().v3)(),[l,d]=(0,s.useState)(!1),c=a?(0,i.jsx)(h().sA,{id:"identityProvisioningSettings.managedAccounts.logoutUsers.logoutButton",defaultMessage:"Force log out"}):(0,i.jsx)(h().sA,{id:"identityProvisioningSettings.managedAccounts.logoutAllUsers.logoutButton",defaultMessage:"Log out all users"}),u=()=>d(!0);return(0,i.jsxs)(i.Fragment,{children:[o?(0,i.jsx)(Ne().E,{color:"uiRed",disabled:n,onClick:u,children:c}):(0,i.jsx)(U().A,{size:"md",disabled:n,disabledFeedback:n,onClick:u,children:c}),l&&(0,i.jsx)(bd,{type:a?"logoutSingle":"logoutAll",onDismiss:()=>d(!1),onSubmit:async()=>{a?await wd({environment:r,organizationId:t.id,userId:a}):await async function(e){let{environment:t,organizationId:a,emailDomains:s}=e;yd().V6(t,{email_domains:s}),await S().callApi({eventName:"logoutManagedUsers",environment:t,data:{organizationId:a,target:{type:vd().u.Domains,emailDomains:s}}}),nt().D6({label:(0,i.jsx)(h().sA,{id:"managedAccounts.toastMessage.logout.all.success",defaultMessage:"Successfully logged out all managed accounts"})}),yd().wE(t,{email_domains:s})}({environment:r,organizationId:t.id,emailDomains:t.getEmailDomains()})}})]})}async function wd(e){let{environment:t,organizationId:a,userId:s}=e;yd().fv(t),await S().callApi({eventName:"logoutManagedUsers",environment:t,data:{organizationId:a,target:{type:vd().u.User,userId:s}}}),nt().D6({label:(0,i.jsx)(h().sA,{id:"managedAccounts.toastMessage.logout.single.success",defaultMessage:"Successfully logged out user"})}),yd().fv(t)}const Ad=(0,h().YK)({singleUserSuccess:{id:"managedAccounts.toastMessage.forcePasswordReset.userId.success",defaultMessage:"Initiated password reset for the managed account."},singleUserRateLimited:{id:"managedAccounts.toastMessage.forcePasswordReset.userId.ratelimiterror",defaultMessage:"A recent password reset request was made. Please try again later."},singleUserError:{id:"managedAccounts.toastMessage.forcePasswordReset.userId.error",defaultMessage:"There was an error resetting the password for the managed account. Please try again later."},bulkSuccess:{id:"managedAccounts.toastMessage.forcePasswordReset.all.success",defaultMessage:"Initiated password reset for all managed accounts."},bulkRateLimited:{id:"managedAccounts.toastMessage.forcePasswordReset.all.ratelimiterror",defaultMessage:"A recent password reset request was made. Please try again later."},bulkError:{id:"managedAccounts.toastMessage.forcePasswordReset.all.error",defaultMessage:"There was an error resetting the passwords for all managed accounts. Please try again later."}});function Md(e){return"success"===e.type?Ad.singleUserSuccess:"failed"===e.type&&429===e.status?Ad.singleUserRateLimited:Ad.singleUserError}function Cd(e){return"success"===e.type?Ad.bulkSuccess:"failed"===e.type&&429===e.status?Ad.bulkRateLimited:Ad.bulkError}function Id(e){let{organizationStore:t,userId:a,disabled:n,isRed:o}=e;const r=(0,f().v3)(),[l,d]=(0,s.useState)(!1),c=a?(0,i.jsx)(h().sA,{id:"identityProvisioningSettings.managedAccounts.forcePasswordReset.resetSingleButton",defaultMessage:"Reset password"}):(0,i.jsx)(h().sA,{id:"identityProvisioningSettings.managedAccounts.forcePasswordReset.resetAllButton",defaultMessage:"Reset all passwords"}),u=()=>d(!0);return(0,i.jsxs)(i.Fragment,{children:[o?(0,i.jsx)(Ne().E,{color:"uiRed",disabled:n,onClick:u,children:c}):(0,i.jsx)(U().A,{size:"md",disabled:n,disabledFeedback:n,onClick:u,children:c}),l&&(0,i.jsx)(bd,{type:a?"resetPasswordSingle":"resetPasswordAll",onDismiss:()=>d(!1),onSubmit:async()=>{a?await Td({environment:r,organizationId:t.id,userId:a}):await async function(e){let{environment:t,organizationId:a,emailDomains:s}=e;yd().m6(t,{email_domains:s});const n=await S().callApi({eventName:"resetPasswordsForManagedUsers",environment:t,data:{organizationId:a,target:{type:vd().u.Domains,emailDomains:s}}});nt().D6({label:(0,i.jsx)(h().sA,{...Cd(n)})}),yd().Jm(t,{email_domains:s})}({environment:r,organizationId:t.id,emailDomains:t.getEmailDomains()})}})]})}async function Td(e){let{environment:t,organizationId:a,userId:s}=e;yd().HD(t);const n=await S().callApi({eventName:"resetPasswordsForManagedUsers",environment:t,data:{organizationId:a,target:{type:vd().u.User,userId:s}}});nt().D6({label:(0,i.jsx)(h().sA,{...Md(n)})}),yd().CF(t)}var kd=()=>a(326399),_d=()=>a(368332),zd=()=>a(907514);function Dd(e){let{organizationStore:t}=e;const a=(0,f().v3)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(k().N),o=(0,v().IS)((e=>({button:{border:`1px solid ${e.outlineButtonBorder}`,...El().W}})),[]),r=(0,s.useMemo)((()=>(0,Pe().WP)(kd().iI).map((e=>{let[t,a]=e;return{key:t,label:(0,i.jsx)(Ws().A,{children:(0,zd().OH)(0,a)})}}))),[]),l=(0,x().K8)((()=>{var e;return(0,_d().k)(null===(e=t.getManagedUserSettings())||void 0===e?void 0:e.custom_session_duration)??kd().DP}),[t]);return(0,i.jsx)(Ll().m,{isMobile:!1,disabled:!1,type:"dropdown",currentOption:l,options:r,onSelectOption:async function(e){var s;const o=(null===(s=t.getManagedUserSettings())||void 0===s?void 0:s.custom_session_duration)??kd().iI[kd().DP],r=kd().iI[e];if(void 0===r)return;yd().m4(a,{custom_session_duration_ms:o});const{accept:l}=await j().Gh({message:(0,i.jsx)(Ws().A,{style:j().xh.title,children:(0,i.jsx)(h().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.message",defaultMessage:"Confirm change"})}),description:(0,i.jsxs)(Ws().A,{isMultiline:!0,isSecondaryColor:!0,children:[(0,i.jsx)(h().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.description",defaultMessage:"You are about to change the session duration for all of your managed users from <b>{oldDuration}</b> to <b>{newDuration}.</b>",values:{oldDuration:(0,zd().OH)(0,o),newDuration:(0,zd().OH)(0,r),b:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.jsx)("b",{children:t})}}}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(h().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.secondDescription",defaultMessage:"This may log some users out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})]}),acceptLabel:(0,i.jsx)(h().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.acceptLabel",defaultMessage:"Confirm change"}),cancelLabel:(0,i.jsx)(h().sA,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.cancelLabel",defaultMessage:"Cancel"})});if(!l)return;yd().JN(a,{new_session_duration_ms:r});const d=await S().callApi({eventName:"updateOrganization",environment:a,data:{organizationId:t.id,managedUserSettings:{customSessionDuration:(0,_d().k)(r)}}});"success"===d.type?(n(d),(0,w().u)({environment:a,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:t.id,updated_fields:["custom_session_duration"]}}})):j().f1((0,A().Hu)(M().A.getIntl(),d))},buttonStyle:o.button,placementToOrigin:Ya().W.Bottom,alignmentToOrigin:Ya().C.End})}function Pd(e){const t=(0,f().v3)(),{updateCacheWithRecordMap:a}=(0,s.useContext)(k().N),n=(0,x().K8)((()=>e.getManagedUserSettings()),[e]),[o,i]=(0,s.useState)({prevent_profile_edits:!1,workspace_creation_enum:!1,prevent_members_joining_external_workspace:!1,prevent_granting_support_access:!1,disable_notion_mail:!1,workspace_region:!1});return{prevent_profile_edits:{value:null==n?void 0:n.prevent_profile_edits,loading:o.prevent_profile_edits,toggle:async function(){i((e=>({...e,prevent_profile_edits:!0})));const s=await S().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{preventProfileEdits:!(null!=n&&n.prevent_profile_edits)}}});"success"===s.type?(a(s),(0,w().u)({environment:t,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:e.id,updated_fields:["prevent_profile_edits"]}}})):j().f1((0,A().Hu)(M().A.getIntl(),s)),i((e=>({...e,prevent_profile_edits:!1})))}},workspace_creation_enum:{value:null==n?void 0:n.workspace_creation_enum,loading:o.workspace_creation_enum,toggle:async function(){i((e=>({...e,workspace_creation_enum:!0})));const s="admins_only"===(null==n?void 0:n.workspace_creation_enum)?"unrestricted":"admins_only",o=await S().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{workspaceCreationEnum:s}}});"success"===o.type?(a(o),(0,w().u)({environment:t,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:e.id,updated_fields:["workspace_creation_enum"]}}})):j().f1((0,A().Hu)(M().A.getIntl(),o)),i((e=>({...e,workspace_creation_enum:!1})))}},prevent_members_joining_external_workspace:{value:null==n?void 0:n.prevent_members_joining_external_workspace,loading:o.prevent_members_joining_external_workspace,toggle:async function(){i((e=>({...e,prevent_members_joining_external_workspace:!0})));const s=await S().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{preventMembersJoiningExternalWorkspace:!(null!=n&&n.prevent_members_joining_external_workspace)}}});"success"===s.type?(a(s),(0,w().u)({environment:t,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:e.id,updated_fields:["prevent_members_joining_external_workspace"]}}})):j().f1((0,A().Hu)(M().A.getIntl(),s)),i((e=>({...e,prevent_members_joining_external_workspace:!1})))}},prevent_granting_support_access:{value:null==n?void 0:n.prevent_granting_support_access,loading:o.prevent_granting_support_access,toggle:async function(){i((e=>({...e,prevent_granting_support_access:!0})));const s=await S().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{preventGrantingSupportAccess:!(null!=n&&n.prevent_granting_support_access)}}});"success"===s.type?(a(s),(0,w().u)({environment:t,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:e.id,updated_fields:["prevent_granting_support_access"]}}})):j().f1((0,A().Hu)(M().A.getIntl(),s)),i((e=>({...e,prevent_granting_support_access:!1})))}},disable_notion_mail:{value:null==n?void 0:n.disable_notion_mail,loading:o.disable_notion_mail,toggle:async function(){i((e=>({...e,disable_notion_mail:!0})));const s=await S().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{disableNotionMail:!(null!=n&&n.disable_notion_mail)}}});"success"===s.type?(a(s),(0,w().u)({environment:t,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:e.id,updated_fields:["disable_notion_mail"]}}})):j().f1((0,A().Hu)(M().A.getIntl(),s)),i((e=>({...e,disable_notion_mail:!1})))}},workspace_region:{value:null==n?void 0:n.workspace_region,loading:o.workspace_region,set:async function(s){i((e=>({...e,workspace_region:!0})));const n=await S().callApi({eventName:"updateOrganization",environment:t,data:{organizationId:e.id,managedUserSettings:{workspaceRegion:s}}});"success"===n.type?(a(n),(0,w().u)({environment:t,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:e.id,updated_fields:["workspace_region"]}}})):j().f1((0,A().Hu)(M().A.getIntl(),n)),i((e=>({...e,workspace_region:!1})))}}}}var Nd=()=>a(571499);function Rd(e){let{children:t}=e;const a=(0,v().IS)((e=>({container:{width:"100%",maxWidth:880,margin:"48px auto 100px",padding:"0 40px 0"}})),[]);return(0,i.jsx)("div",{style:a.container,children:t})}var Bd=()=>a(652399),Ld=()=>a(963589),Ed=()=>a(829351),Od=()=>a(17297),Ud=()=>a(617842),Fd=()=>a(623742);function Hd(e){const{auditLogEntry:t,parentStore:a,id:n}=e,o=(0,h().tz)(),r=(0,x().K8)((()=>{if(t.actor.actorType===y().oo){const e=C().LU.createChildStore(a,{id:t.actor.actorId,table:y().oo});if(e.isDefined()&&!e.getIsDeleted())return{actorStore:e};if(t.actor.email)return{avatar:{name:t.actor.name,email:t.actor.email}}}else if(t.actor.actorType===Ml().GP){const e=C().vK.createChildStore(a,{id:t.actor.actorId,table:Ml().GP});return e.isDefined()?{actorStore:e}:{avatar:{name:t.actor.name,email:t.actor.actorId}}}return{actorStore:void 0}}),[a,t]),l=(0,x().K8)((()=>{var e,t;if(r)return(null===(e=r.actorStore)||void 0===e?void 0:e.getDisplayName(o))??(null===(t=r.avatar)||void 0===t?void 0:t.name)}),[r,o]),d=(0,x().K8)((()=>{var e,t;if(r)return(null===(e=r.actorStore)||void 0===e?void 0:e.getDetail())??(null===(t=r.avatar)||void 0===t?void 0:t.email)}),[r]),c=(0,s.useMemo)((()=>{var e;if(t.actor.actorType===y().oo)return(0,Fd().v)(null===(e=t.actor.meta)||void 0===e?void 0:e.spaceRole)}),[t]),u=(0,v().IS)((()=>({container:{display:"block",width:"100%",paddingBlock:6}})),[]),g=(0,s.createRef)();return(0,i.jsx)(V().A,{disableTooltip:Vd(g.current),renderTooltip:()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:l}),(0,i.jsx)("div",{children:d})]}),placement:Ya().W.Bottom,render:e=>(0,i.jsx)("div",{...e,style:u.container,children:(0,i.jsx)(Fd().A,{id:n,...r,spaceRole:c})})})}function Vd(e){return!!e&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}var Wd=()=>a(326346),qd=()=>a(884107),Gd=()=>a(47373);function Kd(e){const{auditLogEntry:t,eventColumnId:a}=e,s=(0,x().K8)((()=>(0,Gd().Qd)()),[]),n=Wd().Gb,o=(0,h().tz)(),i=(0,f().v3)();return async()=>{const e=await qd().R.clipboardActions.load();e.copyString({environment:i,stringValue:(0,Wd().ZM)({auditLogEntry:t,intl:o,getAuditLogEventText:Yd(a),isTeamGuestsEnabled:s,csvColumnNames:n}),copiedMessage:e.clipboardMessages.copiedToClipboard})}}function Yd(e){return t=>{var a;return null===(a=document.getElementById(e))||void 0===a?void 0:a.textContent}}const Qd={id:"actor",headerTitle:(0,i.jsx)(h().sA,{id:"settingsConsole.auditlog.logTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)(Hd,{parentStore:e.parentStore,auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:30},sortable:!1},$d={id:"event",headerTitle:(0,i.jsx)(h().sA,{id:"settingsConsole.auditlog.logTable.eventColumn.header",defaultMessage:"Event"}),renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)(Od().m,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:40},sortable:!1},Xd={id:"dateTimeAndMenu",headerTitle:(0,i.jsx)(h().sA,{id:"settingsConsole.auditlog.logTable.dateColumn.header",defaultMessage:"Date"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`,a=`event-${e.auditLogEntry.actionName}-${e.id}`,s=`datetime-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Ed().V,{auditLogEntry:e.auditLogEntry,id:s}),(0,i.jsx)(ec,{auditLogEntry:e.auditLogEntry,ids:{actorColumnId:t,eventColumnId:a,dateTimeColumnId:s}})]})},widthData:{width:25},sortable:!0,shouldShowSortTooltip:!0},Zd=[Qd,$d,Xd];function Jd(){return(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"40vh",flexDirection:"column"},children:[(0,i.jsx)("div",{children:(0,i.jsx)(Ws().A,{isSecondaryColor:!0,style:{fontWeight:500},children:(0,i.jsx)(h().sA,{id:"settingsConsole.auditlog.logTable.noResults",defaultMessage:"No results"})})}),(0,i.jsx)(Ws().A,{isSecondaryColor:!0,children:(0,i.jsx)(h().sA,{id:"settingsConsole.auditlog.logTable.noResultsHelpText",defaultMessage:"Try different filters. Logs may take some time to show up."})})]})}function ec(e){const t=(0,v().DP)(),a=(0,v().IS)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"flex-end",width:"100%"},button:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:28,borderRadius:B().V.small}})),[]),s=Kd({auditLogEntry:e.auditLogEntry,eventColumnId:e.ids.eventColumnId});return(0,i.jsx)(V().A,{delayThreshold:80,placement:Ya().W.Bottom,render:e=>(0,i.jsx)("div",{style:a.container,...e,children:(0,i.jsx)(Ba().A,{style:a.button,onClick:s,children:(0,l().d)({width:16,height:16,fill:t.icon.secondary})})}),renderTooltip:()=>(0,i.jsx)(h().sA,{id:"AuditLogSettings.copyAuditLogEvent",defaultMessage:"Copy row"})})}const tc=(0,h().j4)((function(e){const{searchResponse:t,parentStore:a}=e,[n,o]=(0,x().$y)(Sl().A),r=t.results||[],l=t.hasMoreResults,d=Boolean(r.length),c=e=>{const t={...n,pageNum:e};o(t)},u=(0,Vt().A)(),g=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:Zd,theme:e,containerMarginTop:0})),[]),m=r.map(((e,t)=>({id:t.toString(),auditLogEntry:e,parentStore:a,isClickable:!1}))),p=(0,s.useCallback)((()=>{const e=n.sortOrder===yl().K7.CreatedOldest?yl().K7.CreatedNewest:yl().K7.CreatedOldest;o({...n,sortOrder:e,pageNum:1})}),[n,o]),f=(0,s.useMemo)((()=>({column:Xd,sortAscending:n.sortOrder===yl().K7.CreatedOldest})),[n]),y=Zd.map((e=>({...e,headerStyle:u.tableHeader})));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Nt().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:y,rows:m,sortState:f,onSortStateChanged:p,renderNoRowsComponent:Jd,styles:g}),d?(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:[(0,i.jsx)(Ud().M,{onClick:()=>{c(n.pageNum-1)},disabled:1===n.pageNum,children:(0,i.jsx)(h().sA,{id:"settingsConsole.auditlog.logTable.previousPage",defaultMessage:"Previous"})}),(0,i.jsx)(Ud().M,{disabled:!l,onClick:()=>{c(n.pageNum+1)},children:(0,i.jsx)(h().sA,{id:"settingsConsole.auditlog.logTable.nextPage",defaultMessage:"Next"})})]}):null]})}));function ac(e){let{organizationId:t,selectedSpaceId:a,parentStore:n}=e;const o=(0,f().v3)(),[r]=(0,x().$y)(kl),[l]=(0,x().$y)(Sl().A),d=(0,Sl()._)(l)!==r.filterStr?void 0:r.cachedResponses[l.pageNum];(0,s.useEffect)((()=>{n.id&&zl({environment:o,auditLogPointer:{id:n.id,table:n.table},organizationId:t})}),[o,n,l,t]);const c=(0,Ld().X)("edge_cache_audit_log");return(0,s.useEffect)((()=>{Pl({environment:o,parentStore:n,shouldUseEdgeCache:c})}),[o,n,c]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{justifyContent:"space-between",display:"flex",paddingTop:4,paddingBottom:12},children:[(0,i.jsx)(Qc,{organizationId:t,selectedSpaceId:a,parentStore:n}),(0,i.jsx)(Bd().A,{parentStore:n})]}),"loading"===(null==d?void 0:d.status)&&(0,i.jsx)(bl().A,{}),"success"===(null==d?void 0:d.status)&&(0,i.jsx)(tc,{searchResponse:d,parentStore:n})]})}function sc(e){const{organizationId:t,spaceId:a}=e,s=sa({spaceId:a}),n=(0,Ta().E)({organizationId:t}),o=s||n;return o&&t?(0,i.jsx)(Hl().t,{children:(0,i.jsxs)("div",{style:{padding:"12px 16px"},children:[(0,i.jsx)(Ua()._,{title:(0,i.jsx)(h().sA,{id:"organization.auditLog.title",defaultMessage:"Audit log"}),byline:(0,i.jsx)(h().sA,{id:"organization.auditLog.byline",defaultMessage:"Access to detailed information about security and safety-related activity. This can help identify potential security issues, investigate suspicious behavior, and troubleshoot access."})}),(0,i.jsx)(ac,{organizationId:t,selectedSpaceId:a,parentStore:o})]})}):null}var nc=()=>a(124749),oc=()=>a(793571),ic=()=>a(404302),rc=()=>a(710967),lc=()=>a(518658),dc=()=>a(224701),cc=()=>a(113474),uc=()=>a(933117);const gc="organization";function mc(e){let{organizationId:t,currentTabRoute:a,currentTabProperties:n,shouldShowOrganizationOption:o,showAsPill:r,selectedSpaceStore:l}=e;const d=(0,f().v3)(),c=(0,Ta().E)({organizationId:t}),u=(0,Cs().l)(),{itemIcon:g,itemName:m}=function(e){const t=fc(),{itemIcon:a,itemName:s}=(0,x().K8)((()=>{const a="Organization";return e?{itemIcon:(0,i.jsx)(N().B6,{disabled:!0,icon:e.getIcon(),iconRecordCategory:"workspace",isEmptyPage:!1,title:e.getName(),size:Da().iK,isLarge:!0}),itemName:e.getName()}:{itemIcon:(0,i.jsx)("div",{style:t.organizationIconContainer,children:(0,p().V)(t.organizationIcon)}),itemName:a}}),[e,t]);return{itemIcon:a,itemName:s}}(l),y=(null==l?void 0:l.id)??(o?gc:void 0),b=(0,v().IS)((e=>({container:{display:"inline-flex",width:"fit-content"},menuItem:{fontSize:"inherit",borderRadius:B().V.default,border:`1px solid ${e.stroke.secondary}`,paddingTop:4,paddingBottom:4}})),[]);(0,s.useEffect)((()=>{l&&(pe().default.setState({...pe().default.state,currentSpaceStore:l}),(0,dc().$D)({environment:d,spaceId:l.id}))}),[l,d]);const S=(0,s.useCallback)((e=>{e?(0,xd().i)({environment:d,organizationId:t,tabRoute:a,properties:n,queryParams:{[Xf]:e}}):(0,xd().y)(d,t,a)}),[a,n,d,t]),j=(0,x().K8)((()=>u.map((e=>e.id))),[u]),w=(0,s.useMemo)((()=>o?[gc,...j]:j),[j,o]),A=(0,x().K8)((()=>{const e=c?{key:c.id,value:gc,title:(0,i.jsx)(h().sA,{id:"organizationConsole.table.filters.option.organization.title",defaultMessage:"Organization"}),shortTitle:(0,i.jsx)(h().sA,{id:"organizationConsole.table.filters.option.organization.title",defaultMessage:"Organization"})}:void 0,t=u.map((e=>({key:e.id,value:e.id,title:e.getName(),shortTitle:e.getName()})));return o&&e?[e,...t]:t}),[u,c,o]);return r?(0,i.jsx)(qs().G0,{shouldUseCheck:!0,showActive:!0,shouldHidePrefix:!0,selectionRequired:!0,pillTitle:o?(0,i.jsx)(h().sA,{id:"organizationConsole.table.filters.orgOrWorkspaces.title",defaultMessage:"Organization or workspace"}):(0,i.jsx)(h().sA,{id:"organizationConsole.table.filters.workspaces.title",defaultMessage:"Workspace"}),pillIcon:p().V,selectedItem:y,setSelectedItem:S,items:A}):(0,i.jsx)("div",{style:b.container,children:(0,i.jsx)(uc().A,{items:w,getKey:$e().D_,selectedItem:y,onSelect:S,width:300,renderItem:e=>{const t=e.value;return t===gc?(0,i.jsx)(hc,{isSelected:!y,...e}):(0,i.jsx)(pc,{spaceId:t,isSelected:y===t,...e})},renderOrigin:e=>(0,i.jsx)(cc()._,{focused:!1,icon:g,title:m,style:b.menuItem,desktopIconStyle:{marginLeft:4,marginRight:0},...e})})})}function pc(e){let{spaceId:t,isSelected:a,...n}=e;const o=(0,f().v3)(),{organizationOwnerRecordCache:r}=(0,s.useContext)(k().N),{icon:l,name:d}=(0,x().K8)((()=>{const e=new(C().SL)(o,{id:t,table:aa().NX},{inMemoryRecordCache:r});return{icon:e.getIcon(),name:e.getName()}}),[t,r,o]);return(0,i.jsx)(Ue().A,{title:d,isChecked:a,icon:(0,i.jsx)(N().B6,{disabled:!0,icon:l,iconRecordCategory:"workspace",isEmptyPage:!1,title:d,size:Da().iK,isLarge:!0}),...n})}function hc(e){let{isSelected:t,...a}=e;const s=fc();return(0,i.jsx)(Ue().A,{title:"Organization",isChecked:t,icon:(0,i.jsx)("div",{style:s.organizationIconContainer,children:(0,p().V)(s.organizationIcon)}),...a})}function fc(){return(0,v().IS)((e=>({organizationIconContainer:{width:23,height:23,display:"flex",alignItems:"center",justifyContent:"center"},organizationIcon:{width:18,height:18}})),[])}function xc(e){let{selectedTeamspaceIds:t,setSelectedTeamspaceIds:a,teamspaceStores:s}=e;const n=function(e){const t=(0,v().IS)((()=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:8},optionTitle:{display:"block",paddingTop:4,paddingBottom:4}})),[]);return(0,x().K8)((()=>e.map((e=>{const a=e.getName(),s=e.getIcon();return{key:e.id,value:e.id,title:(0,i.jsxs)("div",{style:t.optionContainer,children:[(0,i.jsx)(N().B6,{disabled:!0,icon:s,iconRecordCategory:"teamspace",isEmptyPage:!1,size:Da().iK,title:a,isLarge:!0,emojiSize:Da().iK,isRaw:!1}),(0,i.jsx)(Ws().A,{style:t.optionTitle,children:a})]}),shortTitle:a}}))),[e,t])}(s);return(0,i.jsx)(qs().VX,{pillTitle:(0,i.jsx)(h().sA,{id:"organizationConsole.table.filters.teamspaces.title",defaultMessage:"Teamspaces"}),pillIcon:p().V,selectedItems:t,setSelectedItems:a,items:n})}var vc=()=>a(701144);function yc(e){let{audienceValues:t,selectedAudience:a,setSelectedAudience:n}=e;const o=(0,vc().Ry)([]),r=(0,s.useMemo)((()=>(t??ic().p).map((e=>({key:e.toString(),value:e,shortTitle:(0,vc().j)(e),title:(0,vc().j)(e),caption:(0,vc().b0)(e),wrapCaption:!0})))),[t]);return(0,i.jsx)(qs().VX,{pillTitle:o,pillIcon:Un().peopleFillIcon,selectedItems:a,setSelectedItems:n,items:r})}var bc=()=>a(797561);function Sc(e){let{spaceStore:t,includeGuests:a,pillTitle:n,...o}=e;const{visibleUsers:r,loading:l}=(0,D().d)(t.id),d=ba(t.id,!o.includeGroups),c=r.filter(b().c7),u=r.filter(b().QE),{userIds:g,guestUserIds:m}=(0,s.useMemo)((()=>l?{userIds:[],guestUserIds:void 0}:a?{userIds:c.map((e=>e.userId)),guestUserIds:u.map((e=>e.userId))}:{userIds:c.map((e=>e.userId)),guestUserIds:void 0}),[l,a,c,u]),p=o.includeGroups?{...o,permissionGroups:null==d?void 0:d.map((e=>{let{group:t}=e;return qa().Bj6.fromValue(Ht().n,t)}))}:o;return(0,i.jsx)(Ro,{pillTitle:n,pillIcon:bc().E,userIds:g,guestUserIds:m,showSearch:!0,...p})}var jc=()=>a(624090),wc=()=>a(920495),Ac=()=>a(459173);const Mc=["alive","in_trash","deleted_from_trash"];function Cc(e){let{spaceStore:t,selectedPageStatus:a,setSelectedPageStatus:n}=e;const o=(0,h().tz)(),{currentDeleteFromTrashDelayInSeconds:r,currentPurgeDelayInSeconds:l}=(0,x().K8)((()=>({currentDeleteFromTrashDelayInSeconds:(0,jc().XX)(t.getModel())/1e3,currentPurgeDelayInSeconds:(0,jc().NA)(t.getModel())/1e3})),[t]),d=(0,s.useMemo)((()=>(0,Ac().Rv)({currentDeleteFromTrashDelayInSeconds:r,currentPurgeDelayInSeconds:l,intl:o})),[r,l,o]),c=(0,s.useMemo)((()=>Mc.map((e=>({key:e.toString(),value:e,shortTitle:(0,Ac().$E)([e]),title:(0,Ac().dU)(e),caption:d(e),wrapCaption:!0})))),[d]);return(0,i.jsx)(qs().VX,{pillIcon:wc().pageIcon,pillTitle:(0,Ac().$E)([]),selectedItems:a,setSelectedItems:n,items:c})}function Ic(e){let{spaceStore:t,filters:a,setFilters:n,pageStores:o,organizationId:r}=e;const l=(0,s.useMemo)((()=>[t.id]),[t.id]),{teamStores:d}=(0,z().o)(l),c=d[t.id],u=(0,On().F)();return(0,i.jsxs)("div",{style:u.tableHeader,children:[(0,i.jsxs)("div",{style:u.leftContent,children:[(0,i.jsx)(mc,{showAsPill:!0,organizationId:r,currentTabRoute:Xt().D8,currentTabProperties:{subtab:zc.ContentSearch},selectedSpaceStore:t}),(0,i.jsx)(Cc,{spaceStore:t,selectedPageStatus:a.pageStatus,setSelectedPageStatus:function(e){n({pageStatus:e},{runSearchAfter:!0})}}),(0,i.jsx)(lc().Z,{lastEditedTime:a.lastEditedTime,createdTime:a.createdTime,setLastEditedTime:function(e){n({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){n({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}}),(0,i.jsx)(xc,{selectedTeamspaceIds:a.teamIds,setSelectedTeamspaceIds:function(e){n({teamIds:e},{runSearchAfter:!0})},teamspaceStores:c}),(0,i.jsx)(Sc,{spaceStore:t,selectedUsers:a.sharedWith??[],setSelectedUsers:function(e){n({sharedWith:e},{runSearchAfter:!0})},includeGroups:!0,includeGuests:!0,pillTitle:(0,i.jsx)(h().sA,{id:"adminContentSearchTab.pagesTable.filters.sharedWith.title",defaultMessage:"Shared with"})}),(0,i.jsx)(yc,{selectedAudience:a.audience,setSelectedAudience:function(e){n({audience:e},{runSearchAfter:!0})},audienceValues:ic().p}),(0,i.jsx)(Sc,{spaceStore:t,selectedUsers:a.createdBy,setSelectedUsers:function(e){n({createdBy:e},{runSearchAfter:!0})},includeGuests:!0,pillTitle:(0,i.jsx)(h().sA,{id:"adminContentSearchTab.pagesTable.filters.createdBy.title",defaultMessage:"Created by"})})]}),(0,i.jsxs)("div",{style:u.rightContent,children:[(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:a.query,setQueryFilter:function(e){n({query:e},{runSearchAfter:!0})}}),(0,i.jsx)(rc().t,{spaceId:t.id,organizationId:r,disabled:0===o.length,filters:a,shouldUseIconButton:!0})]})]})}function Tc(e){let{spaceStore:t,userStore:a,organizationId:n}=e;const{showSuggestions:o,loadNextPage:r,hasNextPage:l,pageStores:d,loading:c,error:u,runNewSearch:g,filters:m,setFilters:p,refreshSearchResult:f}=(0,Io().I)({spaceStore:t,userStore:a,hasUserConfirmedAcknowledgement:true,organizationId:n});return(0,s.useEffect)((()=>{g()}),[t.id,g]),(0,i.jsxs)(Hl().t,{children:[(0,i.jsx)(Ua()._,{title:(0,i.jsx)(h().sA,{id:"settingsConsole.spaceContentSearch.title",defaultMessage:"Content search"}),byline:(0,i.jsx)(h().sA,{id:"settingsConsole.spaceContentSearch.description",defaultMessage:"Organization owners can search for any page in the workspaces owned by the organization. This includes private pages and deleted pages retained per the data retention policy"})}),(0,i.jsx)(Ic,{spaceStore:t,setFilters:p,filters:m,pageStores:d,organizationId:n}),(0,i.jsx)(oc().r,{loading:c,error:u,pageStores:d,loadNextPage:r,hasNextPage:l,filters:m,setFilters:p,showSuggestions:o,runNewSearch:g,hasUserConfirmedAcknowledgement:true,refreshSearchResult:f,shouldShowLoadMore:!0})]})}function kc(e){let{spaceId:t,organizationId:a,subtab:n,queryParams:o,tabRoute:i}=e;const r=(0,f().v3)(),{spaceIds:l}=(0,s.useContext)(_().D);(0,s.useEffect)((()=>{!t&&l.length>0&&_e().oo({environment:r,url:(0,is().re)({organizationId:a,tabRoute:i,properties:{subtab:n},queryParams:{...o,[Xf]:l[0]}})})}),[r,t,a,l,n,o,i])}function _c(e){let{organizationId:t,spaceId:a,tabRoute:s,subtab:n,queryParams:o}=e;const r=(0,nc().$)(),l=sa({spaceId:a});return kc({organizationId:t,spaceId:a,tabRoute:s,subtab:n,queryParams:o}),l&&r&&t?(0,i.jsx)(Tc,{spaceStore:l,userStore:r,organizationId:t}):null}let zc=function(e){return e.LegalHolds="legal-holds",e.ContentSearch="content-search",e.AuditLog="audit-log",e}({});const Dc={[zc.LegalHolds]:{title:(0,i.jsx)(h().sA,{id:"organization.dataAndCompliance.dataGovernance.legalHolds.title",defaultMessage:"Legal holds"})},[zc.ContentSearch]:{title:(0,i.jsx)(h().sA,{id:"organization.dataAndCompliance.dataGovernance.contentSearch.title",defaultMessage:"Content search"})},[zc.AuditLog]:{title:(0,i.jsx)(h().sA,{id:"organization.dataAndCompliance.dataGovernance.auditLog.title",defaultMessage:"Audit log"})}};function Pc(e){const{subtab:t,organizationId:a}=e,n=(0,f().v3)(),o=(0,s.useMemo)((()=>t?function(e){switch(e){case zc.LegalHolds:return zc.LegalHolds;case zc.ContentSearch:return zc.ContentSearch;case zc.AuditLog:return zc.AuditLog;default:return zc.LegalHolds}}(t):void 0),[t]);if(!a)return null;let r=null;switch(o){case zc.ContentSearch:r=(0,i.jsx)(_c,{...e});break;case zc.AuditLog:r=(0,i.jsx)(sc,{...e});break;case zc.LegalHolds:r=(0,i.jsx)(hd,{organizationId:a})}return r&&o?(0,i.jsx)(Nd().D,{breadcrumbs:[{onClick:()=>{(0,xd().i)({environment:n,organizationId:a,from:{tabRoute:Xt().D8,properties:{subtab:o}},tabRoute:Xt().D8})},message:(0,i.jsx)(h().sA,{id:"organization.dataAndCompliance.breadcrumb.goBack",defaultMessage:"Data & Compliance"})},{message:Dc[o].title}],children:r}):(0,i.jsx)(Nc,{...e})}function Nc(e){let{organizationId:t}=e;const a=(0,f().v3)(),n=(0,R().Z)(),{availableOrganizationFeatures:o}=(0,s.useContext)(_().D),r=o.legal_holds_enabled,l=o.org_managed_user_workspace_region,{legalHolds:d,loading:c}=Fl({organizationId:t,filters:{status:"active"}}),u=(0,Ta().E)({organizationId:t});return(0,i.jsxs)(Rd,{children:[(0,i.jsx)(Ua()._,{title:(0,i.jsx)(h().sA,{id:"organization.dataAndCompliance.title",defaultMessage:"Data & Compliance"}),byline:(0,i.jsx)(h().sA,{id:"organization.dataAndCompliance.byline",defaultMessage:"Access tools for content search, audit logs, and legal holds to ensure data governance and meet regulatory requirements"}),bylineWidth:"70%"}),(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"organization.dataAndCompliance.dataGovernance.title",defaultMessage:"Data governance"}),content:(0,i.jsxs)(i.Fragment,{children:[r&&(0,i.jsx)(ne,{title:Dc[zc.LegalHolds].title,byline:(0,i.jsx)(h().sA,{id:"organization.dataAndCompliance.dataGovernance.legalHolds.byline",defaultMessage:"Place members on legal hold and export their content"}),rightContent:c?(0,i.jsx)(P().A,{style:n.longShimmer}):(0,i.jsx)(h().sA,{id:"organization.dataAndCompliance.dataGovernance.legalHolds.rightContent",defaultMessage:"{numLegalHolds, plural, one {# active legal hold} other {# active legal holds}}",values:{numLegalHolds:d.length.toLocaleString()}}),onClick:()=>Bc({environment:a,organizationId:t,tab:{tabRoute:Xt().D8,subtab:zc.LegalHolds}})}),(0,i.jsx)(ne,{title:Dc[zc.ContentSearch].title,byline:(0,i.jsx)(h().sA,{id:"organization.dataAndCompliance.dataGovernance.contentSearch.byline",defaultMessage:"See all the pages this user has shared externally or with other members"}),onClick:()=>Bc({environment:a,organizationId:t,tab:{tabRoute:Xt().D8,subtab:zc.ContentSearch}})}),(0,i.jsx)(ne,{title:Dc[zc.AuditLog].title,byline:(0,i.jsx)(h().sA,{id:"organization.dataAndCompliance.dataGovernance.auditLog.byline",defaultMessage:"See all recent activity on Notion"}),onClick:()=>Bc({environment:a,organizationId:t,tab:{tabRoute:Xt().D8,subtab:zc.AuditLog}})})]})}),l&&(u?(0,i.jsx)(Rc,{organizationStore:u,environment:a}):(0,i.jsx)(P().A,{style:n.longShimmer}))]})}function Rc(e){let{organizationStore:t,environment:a}=e;const{workspace_region:s}=Pd(t),n=(0,v().IS)((e=>({sectionPadding:{padding:"16px 0 0 0"}})),[]);return(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"organization.dataAndCompliance.dataResidency.title",defaultMessage:"Data residency"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ne,{title:(0,i.jsx)(h().sA,{id:"organization.dataAndCompliance.dataResidency.workspaceRegions.title",defaultMessage:"Workspace regions"}),byline:(0,i.jsx)(h().sA,{id:"organization.dataAndCompliance.viewDataResidency.byline",defaultMessage:"View where your data is stored"}),onClick:()=>Bc({environment:a,organizationId:t.id,tab:{tabRoute:Xt().Vo,subtab:Xt().al.Workspaces}})}),(0,i.jsx)(be().y,{styles:n.sectionPadding,title:(0,i.jsx)(h().sA,{id:"organization.dataAndCompliance.setDataResidency.title",defaultMessage:"Default data residency"}),byline:(0,i.jsx)(h().sA,{id:"organization.dataAndCompliance.setDataResidency.byline",defaultMessage:"Select default hosting region for newly created workspaces by managed accounts"}),item:void 0===s.value?(0,i.jsx)(P().A,{}):(0,i.jsx)(Ol,{workspaceRegion:s.value,setWorkspaceRegion:s.set})})]})})}function Bc(e){const{environment:t,organizationId:a,tab:s}=e;(0,xd().i)({environment:t,organizationId:a,from:{tabRoute:Xt().D8},tabRoute:s.tabRoute,properties:{subtab:s.subtab}})}var Lc=()=>a(118685);class Ec extends Lc().f{getInitialState(){return{categorySelections:{organization:Lc().o.All},categoryToggleOpen:{organization:!0},searchQuery:void 0,actionSelections:(0,Pe().s8)(yl().cj,(()=>!0)),isMenuOpen:!1,renderOrder:[{category:"organization",orderedActions:yl().A1.organization}]}}}var Oc=()=>a(30731),Uc=()=>a(217429),Fc=()=>a(448693),Hc=()=>a(848401);const Vc=(0,h().j4)((function(e){const{parentStore:t,auditLogHistoricalUserStore:a,selectedActors:n,onChange:o,intl:r}=e,l=(0,f().v3)(),[d,c]=s.useState(new Set(n.map(Oc().Ht))),u=(0,i.jsx)(h().sA,{id:"auditlogActorFilter.title",defaultMessage:"User"}),m=(0,s.useCallback)((()=>{const e=Array.from(d).map(Oc().Hl).filter((e=>Boolean(e)));o(e)}),[d,o]),p=(0,s.useCallback)((()=>{const e=n.map(Oc().Ht);c(new Set(e))}),[n]),x=(0,s.useCallback)((e=>{"applyButton"!==e?p():m()}),[m,p]),v={title:u,tokenInputPlaceholder:r.formatMessage({defaultMessage:"Search user...",id:"auditlogActorFilter.searchActor.placeholder"}),resultSectionTitle:r.formatMessage({defaultMessage:"Select users",id:"auditlogActorFilter.searchActor.resultsTitle"}),componentDebugName:"SearchActorFilter"};return(0,i.jsx)(wl().A,{mode:wl().C.Pill,title:u,icon:g().z,iconStyles:{marginRight:2},items:Array.from(d),hasItemsSelected:(null==n?void 0:n.length)>0,onChange:e=>{c(new Set(e))},renderFooter:!0,allowApplyBatchSelection:!0,keepInputOnItemConfirm:!0,onMenuDismiss:x,labelText:v,performRequest:e=>async function(e){let{args:t,auditLogHistoricalUserStore:a,selectedActors:s,environment:n,parentStore:o}=e;const{query:i}=t,{allUserIds:r,allBotIds:l}=a.getState(),d=100,c=await Ma().T.searchActions.load();let u;if(Uc().default.checkGate({gateName:"edge_cache_audit_log"})&&o.table===aa().NX){const e=await S().callApi({eventName:"listUsers",environment:n,data:{cursor:void 0,membershipFilter:void 0,limit:d,sort:"name_normalized",sortDirection:"asc",query:i,spaceId:o.id}});let t=[];"success"===e.type&&(t=e.data.users.map((e=>e.id))),u=await c.searchActorsById({environment:n,query:i,userIds:[...t,...r],botIds:[...l]})}else u=await c.searchActorsById({environment:n,query:i,userIds:[...r],botIds:[...l]});const g=[...u.users.map((e=>`notion_user:${e.id}`)),...u.bots.map((e=>`bot:${e.id}`))];if(i.length>0)return g.slice(0,d);const m=s.map(Oc().Ht),p=new Set(m),h=g.filter((e=>!p.has(e)));return[...m,...h].slice(0,Math.max(m.length,d))}({args:e,auditLogHistoricalUserStore:a,selectedActors:n,environment:l,parentStore:t}),renderResultMenuItem:(e,s)=>{var n;const o=Gc(e,t);return(0,i.jsx)(Wc,{...s,item:e,tempActorSelections:d,showRemovedBadge:a.isUserOrBotRemoved(null===(n=o.asActor)||void 0===n?void 0:n.id),actor:o,intl:r})},renderToken:(e,a)=>(0,i.jsx)(qc,{item:e,handlers:a,tempActorSelections:d,parentStore:t}),renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})})),Wc=(0,s.forwardRef)(((e,t)=>{const{item:n,intl:o,tempActorSelections:r,showRemovedBadge:l,actor:d}=e,c=(0,x().K8)((()=>(0,Wa().lR)(o,d)),[o,d]);return(0,s.createElement)(Ja().A,{...e,ref:t,key:n,actor:d,useEmailAsTooltip:!0,isChecked:r.has(n),userTitle:(0,i.jsxs)("div",{style:{display:"flex",gap:4},children:[c,l&&(0,i.jsx)(a(824160).A,{children:(0,i.jsx)(h().sA,{id:"auditlogActorFilter.removed_user",defaultMessage:"Removed"})})]})})}));function qc(e){let{item:t,handlers:a,tempActorSelections:s,parentStore:n}=e;const o=1===s.size,r=(0,x().K8)((()=>Gc(t,n)),[n,t]);return r?(0,i.jsx)(Fc().Ay,{format:Hc().mI.Small,showRemoveButton:!0,isSingle:o,onClickRemove:a.onRemove,actor:r,shouldShrink:!0,hasPersonHoverCard:!1},t):null}function Gc(e,t){const a=(0,Oc().Hl)(e);return a?"notion_user"===a.actorType?(0,Wa().MR)(function(e,t){return C().LU.createChildStore(t,{table:y().oo,id:e}).getModel()}(a.actorId,t)):(0,Wa().oC)(function(e,t){return C().vK.createChildStore(t,{table:Ml().GP,id:e}).getModel()}(a.actorId,t)):(0,Wa().MR)(void 0)}function Kc(e){let{onChange:t}=e;const a=(0,x().uB)(void 0,Ec),s=(0,x().uB)(void 0,Ec);return(0,i.jsx)(Nl().A,{lastSelectionStore:a,componentStore:s,onChange:t})}function Yc(e){let{onChange:t}=e;const a=(0,x().uB)(void 0,Rl().D),s=(0,x().uB)(void 0,Rl().D);return(0,i.jsx)(Nl().A,{lastSelectionStore:a,componentStore:s,onChange:t})}Wc.displayName="ResultMenuItem";const Qc=(0,h().j4)((function(e){const{parentStore:t,organizationId:s,selectedSpaceId:n}=e,o=sa({spaceId:n}),[r,l]=(0,x().$y)(Sl().A),[d,c,u]=(0,x().$y)(Il);return(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:4},children:[(0,i.jsx)(mc,{showAsPill:!0,shouldShowOrganizationOption:!0,organizationId:s,currentTabRoute:Xt().D8,currentTabProperties:{subtab:zc.AuditLog},selectedSpaceStore:o}),(0,i.jsx)(jl().A,{mode:wl().C.Pill,focused:!1,title:(0,i.jsx)(h().sA,{id:"settingsConsole.auditlogDateFilter.title",defaultMessage:"Date"}),icon:Tr().D,value:r.timeRange,showButtons:"footer",onChange:e=>{l({...r,timeRange:e,pageNum:1})}}),(0,i.jsx)(Vc,{parentStore:t,auditLogHistoricalUserStore:u,selectedActors:r.actors,onChange:e=>{l({...r,actors:e,pageNum:1})}}),(0,a(299545).nw)(t)?(0,i.jsx)(Kc,{onChange:e=>{l({...r,actions:e,pageNum:1})}}):(0,i.jsx)(Yc,{onChange:e=>{l({...r,actions:e,pageNum:1})}})]})}));function $c(e){let{isHovered:t,auditLogEntry:a,eventColumnId:s}=e;const n=(0,h().tz)(),o=Kd({auditLogEntry:a,eventColumnId:s});return(0,i.jsx)(ls,{isHovered:t,iconFunction:l().d,tooltipMessage:n.formatMessage(Xc.copyRow),buttonProps:{onClick:o}})}const Xc=(0,h().YK)({copyRow:{defaultMessage:"Copy row",id:"organization.auditLog.table.copyRow"}}),Zc=[{id:"timestampColumn",headerTitle:(0,i.jsx)(h().sA,{id:"auditlog.logTable.timestampColumn.header",defaultMessage:"Timestamp"}),renderCell:e=>{const t=`datetime-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)(Ed().V,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{widthPercent:30,minWidth:160,maxWidth:200},sortable:!1},{id:"event",headerTitle:(0,i.jsx)(h().sA,{id:"settingsConsole.singleUserView.auditlog.logTable.eventColumn.header",defaultMessage:"Event"}),renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)(Od().m,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{widthPercent:70,minWidth:200,maxWidth:800},sortable:!1},{id:"copyAction",headerTitle:void 0,renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return(0,i.jsx)($c,{isHovered:e.isRowHovered,auditLogEntry:e.auditLogEntry,eventColumnId:t})},widthData:{width:30},sortable:!1}];const Jc=(0,h().j4)((function(e){const{searchResponse:t,parentStore:a,filters:s,setFilters:n}=e,o=t.results||[],r=t.hasMoreResults,l=e=>{const t={...s,pageNum:e};n(t)},d=(0,Vt().A)(),c=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:Zc,theme:e,containerMarginTop:0})),[]),u=o.map(((e,t)=>({id:t.toString(),auditLogEntry:e,parentStore:a,isClickable:!1}))),g=Zc.map((e=>({...e,rowStyle:d.tableRow})));return(0,i.jsx)(Nt().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:g,rows:u,renderNoRowsComponent:Jd,styles:c,loadMoreMethod:{type:"pages",onLoadNext:()=>{l(s.pageNum+1)},onLoadPrevious:()=>{l(s.pageNum-1)},hasNextPage:r,hasPrevPage:s.pageNum>1,currentPage:s.pageNum}})}));function eu(e){var t;let{userStore:a,organizationStore:n}=e;const o=(0,f().v3)(),r=(0,Cs().l)(),l=_o({spaceStores:r}),[d,c]=(0,s.useState)(null===(t=r[0])||void 0===t?void 0:t.id),u=sa({spaceId:d}),g=(0,x().O$)(kl),[m,p]=(0,s.useState)({pageNum:1,pageSize:Ze().q,timeRange:{},actors:[{actorId:a.id,actorType:"notion_user"}],actions:[],sortOrder:yl().K7.CreatedNewest}),y=(0,Sl()._)(m)!==g.filterStr?void 0:g.cachedResponses[m.pageNum];(0,s.useEffect)((()=>{u&&zl({environment:o,auditLogPointer:{id:u.id,table:u.table},organizationId:n.id,filters:m})}),[o,u,m,n.id]);const b=(0,v().IS)((()=>({filters:{display:"flex",flexDirection:"row"},actionContainer:{display:"flex",flexDirection:"row",margin:"0 auto 12px"}})),[]);return u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:b.actionContainer,children:(0,i.jsxs)("div",{style:b.filters,children:[(0,i.jsx)(Oo,{selectedSpaceId:d,setSelectedSpaceId:c,spaceData:l,shouldHideClear:!0}),(0,i.jsx)(jl().A,{mode:wl().C.Pill,focused:!1,title:(0,i.jsx)(h().sA,{id:"singleUserAuditLogTable.datedFilter.title",defaultMessage:"Date"}),icon:Tr().D,value:m.timeRange,showButtons:"footer",onChange:e=>{p({...m,timeRange:e,pageNum:1})}}),(0,i.jsx)(Yc,{onChange:e=>{p({...m,actions:e,pageNum:1})}})]})}),"loading"===(null==y?void 0:y.status)&&(0,i.jsx)(bl().A,{}),"success"===(null==y?void 0:y.status)&&(0,i.jsx)(Jc,{searchResponse:y,parentStore:u,filters:m,setFilters:p})]}):null}const tu=(0,h().YK)({auditLog:{id:"settingsConsole.singleUserView.auditLogTab.title",defaultMessage:"Audit log"},auditLogLabel:{id:"settingsConsole.singleUserView.auditLogTab.label",defaultMessage:"View all the audit log events for this user"}});function au(e){const t=(0,h().tz)();return(0,i.jsxs)(Z,{children:[(0,i.jsx)(Ua()._,{title:t.formatMessage(tu.auditLog),byline:t.formatMessage(tu.auditLogLabel)}),(0,i.jsx)(eu,{...e})]})}var su=()=>a(139125),nu=()=>a(325020);function ou(e){let{organizationStore:t,userStore:a,userData:n}=e;const{userSpaceAccessMap:o,updateUserRoleInSpaceCache:r,removeUserFromSpaceCache:l}=n,d=(0,h().tz)(),c=(0,v().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",gap:16,width:"100%",paddingBottom:16},divider:{color:e.stroke.secondary}})),[]),u=Array.from(o.values()).some((e=>(0,b().QE)(e))),[g,m]=s.useState({isOpen:!1}),[p,f]=s.useState({isOpen:!1}),y=(0,s.useCallback)((()=>{u&&m({isOpen:!0,memberSpaceIds:Array.from(o.entries()).map((e=>{let[t,a]=e;return(0,b().c7)(a)?t:void 0})).filter(Pe().O9)})}),[u,o]),S=(0,s.useCallback)((()=>{u&&f({isOpen:!0,guestSpaceIds:Array.from(o.entries()).map((e=>{let[t,a]=e;return(0,b().QE)(a)?t:void 0})).filter(Pe().O9)})}),[u,o]),j=(0,x().K8)((()=>a.getModel()),[a]);return u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:c.container,children:[(0,i.jsx)(I().D,{styleName:"Heading-17px/Regular",children:d.formatMessage(iu.manageGuestAccessTitle)}),(0,i.jsx)(be().y,{title:d.formatMessage(iu.convertGuestLabel),byline:d.formatMessage(iu.convertGuestDescription),item:(0,i.jsx)(U().A,{size:"md",onClick:y,children:d.formatMessage(iu.convertGuestButton)})}),(0,i.jsx)(kr().A,{dividerColor:c.divider.color,size:1}),(0,i.jsx)(be().y,{title:d.formatMessage(iu.removeGuestLabel),byline:d.formatMessage(iu.removeGuestDescription),item:(0,i.jsx)(U().A,{size:"md",onClick:S,children:d.formatMessage(iu.removeGuestButton)})})]}),g.isOpen&&j&&(0,i.jsx)(Ds,{organizationStore:t,userModel:j,disabledSpaceIds:g.memberSpaceIds,onDismiss:()=>m({isOpen:!1}),refreshSpaceData:e=>r(e,"read_and_write")}),p.isOpen&&j&&(0,i.jsx)(Ls,{organizationStore:t,userModel:j,guestSpaceIds:p.guestSpaceIds,onDismiss:()=>f({isOpen:!1}),refreshSpaceData:e=>l(e)})]}):null}const iu=(0,h().YK)({manageGuestAccessTitle:{id:"organizationConsole.singleUserView.manageGuestAccess.manageGuestAccessTitle",defaultMessage:"Guest access"},convertGuestLabel:{id:"organizationConsole.singleUserView.manageUserActions.convertGuestLabel",defaultMessage:"Upgrade guest to member"},convertGuestDescription:{id:"organizationConsole.singleUserView.manageUserActions.convertGuestDescription",defaultMessage:"Upgrade this guest to a workspace member with full workspace access"},convertGuestButton:{id:"organizationConsole.singleUserView.manageUserActions.convertGuestButton",defaultMessage:"Upgrade to member"},removeGuestLabel:{id:"organizationConsole.singleUserView.manageUserActions.removeGuestLabel",defaultMessage:"Remove guest access"},removeGuestDescription:{id:"organizationConsole.singleUserView.manageUserActions.removeGuestDescription",defaultMessage:"Revoke this guest's access to all pages in select workspaces"},removeGuestButton:{id:"organizationConsole.singleUserView.manageUserActions.removeGuestButton",defaultMessage:"Remove guest access"}});function ru(e){const{userId:t,onDismiss:a,onSubmit:n,shouldWarnLegalHold:o}=e,r=(0,f().v3)(),l=(0,h().tz)(),d=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.redPrimary},container:{width:440,display:"flex",flexDirection:"column",alignItems:"center"},confirmationContainer:{display:"flex",gap:10,alignItems:"center"}})),[]),c=(0,x().K8)((()=>{if(!t)return"";return new(ht().L)(r,{table:y().oo,id:t}).getDisplayName(l)}),[r,t,l]);const[u,g]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1);return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:a,render:()=>(0,i.jsx)(O().tf,{header:(0,i.jsx)(q().rQ,{icon:(0,st().J)(d.icon),title:o?l.formatMessage(lu.legalHoldTitle):l.formatMessage(lu.title),byline:l.formatMessage(lu.byline,{userName:c,b:e=>(0,i.jsx)("b",{children:e})})}),footer:(0,i.jsx)(q().jl,{primaryText:l.formatMessage(lu.buttonText),primaryAction:async()=>{g(!0),await async function(){await n(),a()}(),g(!1)},primaryDisabled:u||!m,secondaryText:(0,i.jsx)(h().sA,{id:"orgConsole.people.modal.destructiveUserAction.cancelButton",defaultMessage:"Cancel"}),secondaryAction:a,isDarkRed:!0}),children:(0,i.jsx)("div",{style:d.container,children:(0,i.jsxs)("div",{style:d.confirmationContainer,children:[(0,i.jsx)(ot().T,{checked:m,size:14,onClick:()=>p(!m)}),(0,i.jsx)(I().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:l.formatMessage(lu.confirmationText)})]})})})})}const lu=(0,h().YK)({title:{id:"orgConsole.people.modal.deleteUser.title",defaultMessage:"Are you sure you want to delete this user?"},legalHoldTitle:{id:"orgConsole.people.modal.deleteUser.legalHoldTitle",defaultMessage:"This user is currently on legal hold."},byline:{id:"orgConsole.people.modal.deleteUser.byline",defaultMessage:"<b>{userName}</b> will be removed from all workspaces, losing access to content, groups, and teamspaces. Restore within 30 days before permanent deletion."},confirmationText:{id:"orgConsole.people.modal.deleteUser.confirmationText",defaultMessage:"I understand this deletion is permanent"},buttonText:{id:"orgConsole.people.modal.deleteUser.buttonText",defaultMessage:"Delete user"}});function du(e){let{userStore:t,isSuspended:a,disabled:n,shouldWarnLegalHold:o,refreshPage:r}=e;const l=(0,f().v3)(),[d,c]=(0,s.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Ne().E,{color:"uiRed",onClick:()=>c(!0),disabled:n,children:(0,i.jsx)(h().sA,{id:"organizationConsole.singleUserView.manageUserActions.deleteUserAccountButton",defaultMessage:"Delete user"})}),d&&(0,i.jsx)(ru,{shouldWarnLegalHold:o,userId:t.id,onDismiss:()=>c(!1),onSubmit:async()=>await cu({environment:l,isSuspended:a,userId:t.id,refreshPage:r})})]})}async function cu(e){let{environment:t,isSuspended:a,userId:s,refreshPage:n}=e;yd().KB(t,{user_status:a?"suspended":"notSuspended"});const o=await S().callApi({eventName:"deleteManagedUser",environment:t,data:{userId:s}});yd().$W(t,{user_status:a?"suspended":"notSuspended"}),"failed"===o.type&&j().c1(o.error.message),await n()}function uu(e){let{isAccessGranted:t,disabled:a,toggleDataAccessConsent:s}=e;const n=t?"granted":"denied",o=[{key:"granted",label:(0,i.jsx)(h().sA,{id:"organizationConsole.singleUserView.details.supportAccessGranted",defaultMessage:"Access granted"})},{key:"denied",label:(0,i.jsx)(h().sA,{id:"organizationConsole.singleUserView.details.supportAccessNotGranted",defaultMessage:"Not granted"})}],r=(0,v().IS)((e=>({button:{border:`1px solid ${e.outlineButtonBorder}`,...El().W,...a&&El().M}})),[a]);return(0,i.jsx)(Ll().m,{isMobile:!1,disabled:a,type:"dropdown",currentOption:n,options:o,onSelectOption:e=>{e!==n&&s()},buttonStyle:r.button,placementToOrigin:Ya().W.Bottom,alignmentToOrigin:Ya().C.End})}function gu(e){let{userStore:t,isSuspended:a,disabled:n}=e;const o=(0,f().v3)(),[r,l]=(0,s.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(U().A,{size:"md",onClick:async()=>{a?await mu({environment:o,isSuspended:a,userId:t.id}):l(!0)},disabled:n,disabledFeedback:n,children:a?(0,i.jsx)(h().sA,{id:"identityProvisioningSettings.managedAccounts.suspendUser.reactivateButton",defaultMessage:"Re-activate user"}):(0,i.jsx)(h().sA,{id:"identityProvisioningSettings.managedAccounts.suspendUser.suspendButton",defaultMessage:"Suspend user"})}),r&&(0,i.jsx)(bd,{type:"suspend",userId:t.id,onDismiss:()=>l(!1),onSubmit:async()=>await mu({environment:o,isSuspended:a,userId:t.id})})]})}async function mu(e){let{environment:t,isSuspended:a,userId:s}=e;a||yd().th(t);const n=await S().callApi({eventName:"updateUserSuspension",environment:t,data:{userId:s,suspend:!a}});a?yd().P4(t):yd().Az(t,{suspended_user_id:s}),"failed"===n.type&&j().f1((0,A().Hu)(M().A.getIntl(),n))}function pu(e){let{organizationStore:t,userStore:a,isUserManaged:s,isAccessGranted:n,toggleDataAccessConsent:o,isOnLegalHold:r,refreshPage:l}=e;const d=(0,h().tz)(),c=a.id,u=(0,x().K8)((()=>a.getIsSuspended()),[a]),g=(0,x().K8)((()=>t.isUserLastOwner(a.id)),[t,a.id]),m=(0,v().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",gap:16,width:"100%"},divider:{color:e.stroke.secondary}})),[]);return(0,i.jsxs)("div",{style:m.container,children:[(0,i.jsx)(I().D,{styleName:"Heading-17px/Semibold",children:d.formatMessage(fu.manageUserTitle)}),!s&&(0,i.jsx)(Kr().l,{iconGroup:qr().Z,label:d.formatMessage(fu.settingsNotAvailable),description:d.formatMessage(fu.settingsNotAvailableDescription),display:"inline",tint:"gray"}),(0,i.jsx)(be().y,{title:d.formatMessage(fu.supportAccessLabel),byline:d.formatMessage(fu.supportAccessDescription),item:(0,i.jsx)(hu,{disableTooltip:s,children:(0,i.jsx)(uu,{isAccessGranted:n,disabled:!s,toggleDataAccessConsent:o})})}),(0,i.jsx)(kr().A,{dividerColor:m.divider.color,size:1}),(0,i.jsx)(be().y,{title:d.formatMessage(fu.changeStatusLabel),byline:d.formatMessage(fu.changeStatusDescription),item:(0,i.jsx)(hu,{disableTooltip:s,children:(0,i.jsx)(gu,{userStore:a,isSuspended:u,disabled:!s})})}),(0,i.jsx)(kr().A,{dividerColor:m.divider.color,size:1}),(0,i.jsx)(be().y,{title:d.formatMessage(fu.forcePasswordResetLabel),byline:d.formatMessage(fu.forcePasswordResetDescription),item:(0,i.jsx)(hu,{disableTooltip:s,children:(0,i.jsx)(Id,{organizationStore:t,userId:c,disabled:!s})})}),(0,i.jsx)(kr().A,{dividerColor:m.divider.color,size:1}),(0,i.jsx)(be().y,{title:d.formatMessage(fu.forceLogoutLabel),byline:d.formatMessage(fu.forceLogoutDescription),item:(0,i.jsx)(hu,{disableTooltip:s,children:(0,i.jsx)(jd,{organizationStore:t,userId:c,disabled:!s})})}),(0,i.jsx)(kr().A,{dividerColor:m.divider.color,size:1}),(0,i.jsx)(be().y,{title:d.formatMessage(fu.deleteUserAccountLabel),byline:d.formatMessage(fu.deleteUserAccountDescription),item:(0,i.jsx)(hu,{disableTooltip:s&&!g,disabledTooltipText:g&&s?fu.deleteAccountDisabledForLastOrgOwner:void 0,children:(0,i.jsx)(du,{userStore:a,isSuspended:u,disabled:!s||g,shouldWarnLegalHold:s&&r,refreshPage:l})})})]})}function hu(e){let{children:t,disableTooltip:a,disabledTooltipText:s}=e;const n=(0,h().tz)();return(0,i.jsx)(V().A,{renderTooltip:()=>n.formatMessage(s??fu.settingsNotAvailableTooltip),render:e=>(0,i.jsx)("div",{...e,children:t}),disableTooltip:a})}const fu=(0,h().YK)({manageUserTitle:{id:"organizationConsole.singleUserView.manageUserActions.manageUserTitle",defaultMessage:"Managed user access"},settingsNotAvailable:{id:"organizationConsole.singleUserView.manageUserActions.notAvailable",defaultMessage:"Managed actions are not available for this user"},settingsNotAvailableDescription:{id:"organizationConsole.singleUserView.manageUserActions.notAvailableDescription",defaultMessage:"These settings are only available for user accounts with verified domains"},settingsNotAvailableTooltip:{id:"organizationConsole.singleUserView.manageUserActions.notAvailableTooltip",defaultMessage:"Not available for this role"},supportAccessLabel:{id:"organizationConsole.singleUserView.manageUserActions.supportAccessLabel",defaultMessage:"Allow support access"},supportAccessDescription:{id:"organizationConsole.singleUserView.manageUserActions.supportAccessDescription",defaultMessage:"Enable Notion support to troubleshoot or recover content"},changeStatusLabel:{id:"organizationConsole.singleUserView.manageUserActions.changeStatusLabel",defaultMessage:"Suspend or re-activate user"},changeStatusDescription:{id:"organizationConsole.singleUserView.manageUserActions.changeStatusDescription",defaultMessage:"Suspend to restrict all workspace access while keeping content and integrations active. Reactivate to restore access."},forcePasswordResetLabel:{id:"organizationConsole.singleUserView.manageUserActions.forcePasswordResetLabel",defaultMessage:"Reset password"},forcePasswordResetDescription:{id:"organizationConsole.singleUserView.manageUserActions.forcePasswordResetDescription",defaultMessage:"Log out user and require password reset on next login"},forceLogoutLabel:{id:"organizationConsole.singleUserView.manageUserActions.forceLogoutLabel",defaultMessage:"Force log out"},forceLogoutDescription:{id:"organizationConsole.singleUserView.manageUserActions.forceLogoutDescription",defaultMessage:"Log out user from all workspaces and require re-authentication"},deleteUserAccountLabel:{id:"organizationConsole.singleUserView.manageUserActions.deleteUserAccountLabel",defaultMessage:"Delete user account"},deleteUserAccountDescription:{id:"organizationConsole.singleUserView.manageUserActions.deleteUserAccountDescription",defaultMessage:"Remove this user from all workspaces. You have 30 days to restore access and data."},deleteAccountDisabledForLastOrgOwner:{id:"organizationConsole.singleUserView.manageUserActions.deleteAccountDisabledForLastOrgOwner",defaultMessage:"At least one organization owner is required. Add a new organization owner to enable this action."}}),xu=(0,h().YK)({disabledEditButtonTooltip:{id:"organizationConsole.singleUserView.manageUserActions.notAvailableTooltip",defaultMessage:"Not available for this role"},emailLabel:{id:"organizationConsole.singleUserView.details.emailLabel",defaultMessage:"Email"},lastActiveLabel:{id:"organizationConsole.singleUserView.details.lastActiveLabel",defaultMessage:"Last active"},emptyLastActive:{id:"identityProvisioningSettings.managedUsers.details.emptyLastActive",defaultMessage:"No activity"},supportAccessLabel:{id:"organizationConsole.singleUserView.details.supportAccessLabel",defaultMessage:"Support access"},supportAccessGranted:{id:"organizationConsole.singleUserView.details.supportAccessGranted",defaultMessage:"Access granted"},supportAccessNotGranted:{id:"organizationConsole.singleUserView.details.supportAccessNotGranted",defaultMessage:"Not granted"},unsupported:{id:"organizationConsole.singleUserView.details.unsupported",defaultMessage:"Unsupported"},joinedLabel:{id:"organizationConsole.singleUserView.details.joinedLabel",defaultMessage:"Joined"},emptyAccountCreated:{id:"identityProvisioningSettings.managedUsers.details.emptyAccountCreated",defaultMessage:"Incomplete"},toastSuccessfulCopy:{defaultMessage:"Copied email to clipboard",id:"singleUserModal.emailCell.copyButton.successfulCopy"}});function vu(e){let{organizationStore:t,userStore:s,userData:n,isOnLegalHold:o,refreshPage:r,onDismiss:l}=e;const{lastActiveAt:d,userSpaceAccessMap:c}=n,u=(0,h().tz)(),g=(0,f().v3)(),{longTallShimmer:m}=(0,R().Z)(),{resetState:p,saveChanges:y,profilePhoto:S,name:j,email:w}=(0,a(721249).u)({userStore:s}),A=function(e){const t=Array.from(e.userSpaceAccessMap.values()).map((e=>(0,b().c7)(e)?(0,Ms().jM)(e.role):(0,b().QE)(e)?"page_guest":void(0,Pe().HB)(e)));return(0,As().nn)(e.organizationRole,t)}(n),M=(0,x().K8)((()=>s.getIsSuspended()),[s]),C=(0,x().K8)((()=>M?{type:"suspended"}:(0,su().qh)({profilePhoto:S.value,name:j.value,email:w.value})),[M,S.value,j.value,w.value]),{userName:T,userEmail:k}=(0,x().K8)((()=>s.isReady()?{userName:s.getDisplayName(u),userEmail:s.getEmail()}:{userName:void 0,userEmail:void 0}),[s,u]),_=(0,x().K8)((()=>{const e=t.getEmailDomains();if(k&&(0,ct().Wy)(e,k))return(0,ct().zN)(k)}),[t,k]),z=void 0!==_,{isAccessGranted:D,toggleDataAccessConsent:N}=(0,a(555893).e)({userId:s.id,isUserUnmanaged:!z}),B=function(e){let t;for(const a of e.values())(0,b().c7)(a)&&a.firstJoinedSpaceTime&&(void 0===t||t>a.firstJoinedSpaceTime)&&(t=a.firstJoinedSpaceTime);return t}(c),E=(0,v().IS)((e=>({avatarContainer:{marginTop:-88,display:"flex",width:"100%"},nameContainer:{paddingTop:13,color:e.primaryBlack,display:"flex",alignItems:"center",gap:8},nameInput:{fontSize:26,fontWeight:L().Wy.bold,maxWidth:300},badgesContainer:{paddingTop:9,display:"flex"},label:{color:e.text.secondary},divider:{paddingTop:28},emailCell:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},infoContainer:{display:"grid",gridAutoColumns:"minmax(0, 1fr)",gridAutoFlow:"column",rowGap:16,columnGap:20},mainContentContainer:{display:"flex",flexDirection:"column",gap:40}})),[]),O=(0,a(402390).H)(u),U=!(0,x().O$)(a(227440).e);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)($,{}),(0,i.jsxs)(Z,{children:[(0,i.jsx)("div",{style:E.avatarContainer,children:(0,i.jsx)(su().Ay,{size:80,avatarType:C,disabled:!z,isOffline:U,loading:S.loading,onUploadProfilePhoto:S.setAndSave,onRemoveProfilePhoto:S.removeAndSave})}),(0,i.jsxs)("div",{style:E.nameContainer,children:[T?(0,i.jsx)(I().D,{styleName:"UITitle-26px/Bold",children:T}):(0,i.jsx)(P().A,{style:m}),(0,i.jsx)(Y,{icon:ln().personCircleFillIcon,title:(0,i.jsx)(h().sA,{id:"organization.general.editDetailsModal.title",defaultMessage:"Edit user details"}),byline:(0,i.jsx)(h().sA,{id:"organization.general.editDetailsModal.byline",defaultMessage:"Edit this user's name and email address below. Changes will take effect immediately upon saving."}),name:T,email:k,onDismiss:p,onSave:y,onNameChange:j.set,onEmailChange:w.set,disabled:!T||!z,disabledTooltipText:u.formatMessage(xu.disabledEditButtonTooltip)})]}),(0,i.jsxs)("div",{style:E.mainContentContainer,children:[(0,i.jsxs)("div",{style:E.badgesContainer,children:[M&&(0,i.jsx)(nu().zJ,{}),(0,i.jsx)(nu().NQ,{highestRole:A}),(0,i.jsx)(nu()._B,{emailDomain:_}),o&&(0,i.jsx)(nu().sg,{})]}),(0,i.jsxs)("div",{style:E.infoContainer,children:[(0,i.jsx)(_r().LX,{row:1,col:1,children:(0,i.jsx)(zr,{iconFunction:Vs().b,label:xu.emailLabel,value:(0,i.jsxs)(ae().fI,{gap:4,alignItems:"center",children:[(0,i.jsx)("div",{style:E.emailCell,children:k}),k&&(0,i.jsx)(bs().lz,{isHovered:!0,size:16,containerStyles:{marginBlock:1},onCopyClick:async()=>{const e=await qd().R.clipboardActions.load();await e.copyString({stringValue:k,environment:g,copiedMessage:e.clipboardMessages.copiedPropertyToClipboard}),nt().D6({label:u.formatMessage(xu.toastSuccessfulCopy)})}})]})},"email")}),(0,i.jsx)(_r().LX,{row:1,col:2,children:(0,i.jsx)(zr,{iconFunction:Tr().D,label:xu.lastActiveLabel,value:d?(0,zd().DG)(d):u.formatMessage(xu.emptyLastActive)},"lastActive")}),(0,i.jsx)(_r().LX,{row:2,col:1,children:(0,i.jsx)(zr,{iconFunction:Ir().questionMarkCircleIcon,label:xu.supportAccessLabel,value:u.formatMessage(z?D?xu.supportAccessGranted:xu.supportAccessNotGranted:xu.unsupported)},"supportAccess")}),(0,i.jsx)(_r().LX,{row:2,col:2,children:(0,i.jsx)(zr,{iconFunction:Tr().D,label:xu.joinedLabel,value:B?(0,a(869190).W_)(B,"medium",O):u.formatMessage(xu.emptyAccountCreated)},"joined")})]}),(0,i.jsx)(kr().A,{size:1}),(0,i.jsx)(ou,{organizationStore:t,userStore:s,userData:n}),(0,i.jsx)(pu,{organizationStore:t,userStore:s,isUserManaged:z,isAccessGranted:D,toggleDataAccessConsent:N,isOnLegalHold:o,refreshPage:async()=>{l(),await r()}})]})]})]})}const yu=Ze().q;var bu=()=>a(606273);function Su(e){const{columnRenderInfo:t,rows:a,rowFilterFn:s,isFiltered:n,expandedState:o,setExpandedState:r}=e,l=a.map((e=>{var t,a,i;const l=Boolean(o[e.id]),d={...e,isExpanded:l,setIsExpanded:(e,t)=>{r({...o,[e]:t})}};let c=null===(t=e.collapsibleRows)||void 0===t?void 0:t.map((e=>({...e,depth:1})));var u;s&&(c=null===(u=c)||void 0===u?void 0:u.filter(s));return d.collapsibleRows=c,l&&null!==(a=c)&&void 0!==a&&a.length?[d,...c]:!s||s(d)||n&&null!==(i=c)&&void 0!==i&&i.length?[d]:[]})).flat();if(!t.length)return null;const d=t[0];return(0,i.jsx)(Nt().WE,{...e,rows:l,columnRenderInfo:[{...d,renderCell:wu(d.renderCell)},...t.slice(1)]})}function ju(e){let{row:t,renderCell:a}=e;const{id:s,hideToggle:n,collapsibleRows:o,isExpanded:r,setIsExpanded:l,depth:d=0}=t,c=function(e,t){return(0,v().IS)((a=>({toggleContainer:{marginRight:Mu,marginLeft:t*(Au+Mu)},cellContainer:{overflow:"hidden"},toggle:{display:"flex",justifyContent:"center",alignItems:"center",visibility:e?void 0:"hidden"},icon:{display:"flex",justifyContent:"center",alignItems:"center"},content:{display:"flex",justifyContent:"end",alignItems:"center"},toggleColor:{color:e?a.icon.primary:a.icon.secondary}})),[e,t])}(Boolean(null==o?void 0:o.length),d);return(0,i.jsxs)(i.Fragment,{children:[!n&&(0,i.jsx)("div",{style:c.toggleContainer,children:(0,i.jsx)(bu().f,{isSidebar:!1,fill:!0,style:c.toggle,color:c.toggleColor.color,open:Boolean(r),onClick:()=>!!l&&l(s,!r)})}),(0,i.jsx)("div",{style:c.cellContainer,children:a(t)})]})}function wu(e){return t=>(0,i.jsx)(ju,{row:t,renderCell:e})}const Au=24,Mu=20;var Cu=()=>a(780879),Iu=()=>a(51703);const Tu="unset",ku="setting-name";function _u(){return[{key:"everyone",label:zu},{key:"none",label:Du}]}const zu=(0,i.jsx)(h().sA,{id:"settingsConsole.setting.value.everyone",defaultMessage:"Enabled for everyone"}),Du=(0,i.jsx)(h().sA,{id:"settingsConsole.setting.value.noOne",defaultMessage:"Disabled for everyone"});function Pu(e){return!0===e?"none":!1===e?"everyone":void(0,Pe().HB)(e)}function Nu(e){return"none"===e||"everyone"!==e&&void(0,Pe().HB)(e)}function Ru(e){return!0===e?"no":!1===e?"yes":void(0,Pe().HB)(e)}function Bu(e){return Pu(e.getDisablePublicAccess())}const Lu={settingName:"publish-sites",teamSettingName:"disable_public_access",title:(0,i.jsx)(h().sA,{id:"organization.security.settings.publishingSites.title",defaultMessage:"Publishing sites, forms, and public links"}),byline:(0,i.jsx)(h().sA,{id:"organization.security.settings.publishingSites.byline",defaultMessage:"Control who can publish sites, forms, and public links to the web"}),getOptions:_u,getValueFromSpace:Bu,getValueFromTeam:Bu,getValueFromOrganization:e=>{const t=e.getDisablePublicAccess();if(void 0!==t)return Pu(t)},formatValueToSave:e=>({disable_public_access:Nu(e)}),formatUndefinedToSave:()=>({disable_public_access:null})};function Eu(e){return Pu(e.getDisableExport())}const Ou={settingName:"export-pages",teamSettingName:"disable_export",title:(0,i.jsx)(h().sA,{id:"organization.security.settings.exportingPages.title",defaultMessage:"Exporting Pages"}),byline:(0,i.jsx)(h().sA,{id:"organization.security.settings.exportingPages.byline",defaultMessage:"Control who can export pages"}),getOptions:_u,getValueFromSpace:Eu,getValueFromTeam:Eu,getValueFromOrganization:e=>{const t=e.getDisableExport();if(void 0!==t)return Pu(t)},formatValueToSave:e=>({disable_export:Nu(e)}),formatUndefinedToSave:()=>({disable_export:null})},Uu={settingName:"duplicate-pages",title:(0,i.jsx)(h().sA,{id:"organization.security.settings.duplicatePages.title",defaultMessage:"Duplicating pages to other workspaces"}),byline:(0,i.jsx)(h().sA,{id:"organization.security.settings.duplicatePages.byline",defaultMessage:"Control who can duplicate pages into other workspaces"}),getOptions:_u,getValueFromSpace:e=>Pu(e.getDisableMoveToSpace()),getValueFromOrganization:e=>{const t=e.getDisableMoveToSpace();if(void 0!==t)return Pu(t)},formatValueToSave:e=>({disable_move_to_space:Nu(e)}),formatUndefinedToSave:()=>({disable_move_to_space:null})};function Fu(e){let{store:t,guestRequestStore:a}=e;return Hu({disableGuests:t.getDisableGuests(),enableGuestInviteRequests:a.getEnableGuestInviteRequest()})}function Hu(e){let{disableGuests:t,enableGuestInviteRequests:a}=e;return!1===t?"everyone":!0===t&&!0===a?"request":!0===t?"none":void(0,Pe().HB)(t)}const Vu={settingName:"guest-invites",teamSettingName:"disable_guests",title:(0,i.jsx)(h().sA,{id:"organization.security.settings.addingGuests.title",defaultMessage:"Adding guests"}),byline:(0,i.jsx)(h().sA,{id:"organization.security.settings.addingGuests.byline",defaultMessage:"Manage how members can add guests to pages"}),getOptions:()=>[{key:"everyone",label:zu},{key:"request",label:Ku},{key:"none",label:Du}],getValueFromSpace:e=>Fu({store:e,guestRequestStore:e}),getValueFromTeam:(e,t)=>Fu({store:e,guestRequestStore:t}),getValueFromOrganization:e=>{const t=e.getDisableGuests(),a=e.getEnableGuestInviteRequest();if(void 0!==t&&void 0!==a)return Hu({disableGuests:t,enableGuestInviteRequests:a})},formatValueToSave:e=>"none"===e?{disable_guests:!0,enable_guest_invite_requests:!1}:"request"===e?{disable_guests:!0,enable_guest_invite_requests:!0}:"everyone"===e?{disable_guests:!1,enable_guest_invite_requests:!1}:void(0,Pe().HB)(e),formatUndefinedToSave:()=>({disable_guests:null,enable_guest_invite_requests:null})},Wu={settingName:"member-requests",title:(0,i.jsx)(h().sA,{id:"organization.security.settings.memberRequests.title",defaultMessage:"Requesting membership"}),byline:(0,i.jsx)(h().sA,{id:"organization.security.settings.memberRequests.byline",defaultMessage:"Manage whether members can submit requests to add more members"}),getOptions:Ju,getValueFromSpace:e=>Ru(e.getDisableMembershipRequests()),getValueFromOrganization:e=>{const t=e.getDisableMembershipRequests();if(void 0!==t)return Ru(t)},formatValueToSave:e=>"yes"===e?{disable_membership_requests:!1}:"no"===e?{disable_membership_requests:!0}:void(0,Pe().HB)(e),formatUndefinedToSave:()=>({disable_membership_requests:null})},qu={settingName:"restrict-integrations",title:(0,i.jsx)(h().sA,{id:"organization.security.settings.integrations.title",defaultMessage:"Adding integrations"}),byline:(0,i.jsx)(h().sA,{id:"organization.security.settings.integrations.byline",defaultMessage:"Control what integrations members can connect"}),getOptions:()=>[{key:"approved_only",label:Yu},{key:"approved_or_built_by_notion",label:Qu},{key:"no_restrictions",label:$u}],getValueFromSpace:e=>e.getIntegrationRestrictions()??"no_restrictions",getValueFromOrganization:e=>e.getIntegrationRestrictions(),formatValueToSave:e=>({integration_restrictions:e}),formatUndefinedToSave:()=>({integration_restrictions:null})},Gu={settingName:"webhook-automations",title:(0,i.jsx)(h().sA,{id:"organization.security.settings.webhookAutomations.title",defaultMessage:"Webhook automations"}),byline:(0,i.jsx)(h().sA,{id:"organization.security.settings.webhookAutomations.byline",defaultMessage:"Manage access to webhooks in database automations and buttons"}),getOptions:Ju,getValueFromSpace:e=>Ru(e.getDisallowWebhookAutomationAction()),getValueFromOrganization:e=>{const t=e.getDisallowWebhookAutomationAction();if(void 0!==t)return Ru(t)},formatValueToSave:e=>"yes"===e?{disallow_webhook_automation_action:!1}:"no"===e?{disallow_webhook_automation_action:!0}:void(0,Pe().HB)(e),formatUndefinedToSave:()=>({disallow_webhook_automation_action:null})},Ku=(0,i.jsx)(h().sA,{id:"settingsConsole.setting.value.byRequest",defaultMessage:"By request only"}),Yu=(0,i.jsx)(h().sA,{id:"settingsConsole.setting.value.onlyApproved",defaultMessage:"Approved only"}),Qu=(0,i.jsx)(h().sA,{id:"settingsConsole.setting.value.approvedOrNotion",defaultMessage:"Native or approved"}),$u=(0,i.jsx)(h().sA,{id:"settingsConsole.setting.value.noRestrictions",defaultMessage:"All integrations"}),Xu=(0,i.jsx)(h().sA,{id:"settingsConsole.setting.value.enabledForMembers",defaultMessage:"Enabled for members"}),Zu=(0,i.jsx)(h().sA,{id:"settingsConsole.setting.value.disabledForMembers",defaultMessage:"Disabled for members"});function Ju(){return[{key:"yes",label:Xu},{key:"no",label:Zu}]}const eg=(0,i.jsx)(h().sA,{id:"settingsConsole.setting.value.workspaceManaged",defaultMessage:"Workspace managed"}),tg={[Lu.settingName]:Lu,[Ou.settingName]:Ou,[Uu.settingName]:Uu,[Vu.settingName]:Vu,[Wu.settingName]:Wu,[qu.settingName]:qu,[Gu.settingName]:Gu};const ag=(0,h().YK)({name:{id:"settingsConsole.securityTable.column.settingName.title",defaultMessage:"Name"},members:{id:"settingsConsole.securityTable.column.members.title",defaultMessage:"Members"},teams:{id:"settingsConsole.securityTable.column.team.title",defaultMessage:"Teamspaces"},guests:{id:"settingsConsole.securityTable.column.guests.title",defaultMessage:"Guests"},sites:{id:"settingsConsole.securityTable.column.sites.title",defaultMessage:"Sites"}}),sg={id:"name",headerTitle:(0,i.jsx)(h().sA,{...ag.name}),renderCell:e=>(0,i.jsx)(Rt().s7,{title:e.title,byline:e.byline,icon:(0,i.jsx)(N().B6,{disabled:!0,icon:e.icon,iconRecordCategory:"organization",title:e.title,size:e.iconSize,isLarge:!0,isEmptyPage:!1}),iconSize:e.iconSize,iconMargin:Rt().Ji,summaryStyles:{width:`calc(100% - ${e.iconSize+Rt().Ji}px)`}}),widthData:{widthPercent:0,minWidth:350,maxWidth:350},sortable:!1},ng={id:"teams",headerTitle:(0,i.jsx)(h().sA,{...ag.teams}),renderCell:e=>{if(void 0!==e.teamCount)return(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"settingsConsole.securityTable.column.team.value",defaultMessage:"{teamCount, plural, one {{teamCount} teamspace} other {{teamCount} teamspaces}}",values:{teamCount:e.teamCount}})})},widthData:{widthPercent:100,minWidth:160},sortable:!1},og={id:"members",headerTitle:(0,i.jsx)(h().sA,{...ag.members}),renderCell:e=>void 0===e.memberCount?(0,i.jsx)(P().A,{style:{borderRadius:B().V.small,width:"60%",height:18}}):(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"settingsConsole.securityTable.column.members.value",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:e.memberCount}})}),widthData:{widthPercent:100,minWidth:150},sortable:!1},ig={id:"setting",headerTitle:(0,i.jsx)("div",{}),renderCell:e=>(0,i.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"right",alignItems:"center"},children:[(0,i.jsx)(te().p,{isBlue:!0,style:{fontWeight:510,visibility:e.shouldShowBulkApply?void 0:"hidden"},onClick:e.onBulkApply,disabled:!e.shouldShowBulkApply,children:(0,i.jsx)(h().sA,{id:"settingsConsole.securityTable.bulkApply",defaultMessage:"Bulk apply"})}),(0,i.jsx)(dg,{isPending:e.isPending,settingValue:e.settingValue,settingOptions:e.settingOptions,onSelectOption:e.onSelectOption})]}),widthData:{widthPercent:0,minWidth:100},sortable:!1},rg={id:"guests",headerTitle:(0,i.jsx)(h().sA,{...ag.guests}),renderCell:e=>{if(void 0!==e.guestCount)return(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"settingsConsole.securityTable.column.guests.value",defaultMessage:"{guestCount, plural, one {{guestCount} guest} other {{guestCount} guests}}",values:{guestCount:e.guestCount}})})},widthData:{widthPercent:100,minWidth:120},sortable:!1},lg={id:"sites",headerTitle:(0,i.jsx)(h().sA,{...ag.sites}),renderCell:e=>{if(void 0!==e.siteCount)return(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"settingsConsole.securityTable.column.sites.value",defaultMessage:"{siteCount, plural, one {{siteCount} site} other {{siteCount} sites}}",values:{siteCount:e.siteCount}})})},widthData:{widthPercent:100,minWidth:120},sortable:!1};function dg(e){let{settingValue:t,settingOptions:a,isPending:s,onSelectOption:n}=e;const o=(0,v().IS)((e=>({button:{marginTop:4,marginBottom:4,fontWeight:L().Wy.medium,color:e.text.primary,background:e.buttonHoveredBackground},buttonHover:{background:e.darkBannerBackground},menu:{width:300},container:{display:"flex",width:"100%",justifyContent:"right"},pendingIndicator:{position:"absolute",top:1,right:-3,background:e.icon.orangePrimary,border:`1px solid ${e.contentBackground}`,width:9,height:9,borderRadius:9}})),[]);return(0,i.jsx)("div",{style:o.container,children:(0,i.jsxs)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",style:{position:"relative"},children:[(0,i.jsx)(Ll().m,{isMobile:!1,disabled:!1,type:"dropdown",currentOption:t,options:a,onSelectOption:n,buttonStyle:o.button,buttonHoverStyle:o.buttonHover,menuStyle:o.menu,placementToOrigin:Ya().W.Bottom,alignmentToOrigin:Ya().C.End}),s&&(0,i.jsx)("div",{style:o.pendingIndicator})]})})}function cg(e){let{settingValue:t,spaceStore:a,teamStores:s,config:n}=e;const o={},i={},r=n.getValueFromSpace(a);if(o[a.id]=t!==r?t:void 0,n.teamSettingName)for(const l of s){const e=n.getValueFromTeam(l,a);i[l.id]=t!==e?t:void 0}return{spaceChanges:o,teamChanges:i}}function ug(e){let{rows:t,appliedSorts:a}=e;const s=a.map((e=>{let{propertyId:t}=e;return t===sg.id?e=>{var t;return null===(t=e.title)||void 0===t?void 0:t.toLowerCase()}:t===og.id?"memberCount":t===ng.id?"teamCount":t===lg.id?"siteCount":t===rg.id?"guestCount":"title"})),n=a.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Pe().HB)(t)}));return $e().My(t,s,n)}function gg(e){var t,a;const{spaceStores:n,teamStoresForSpace:o,teamAggregateDataForSpace:r,orgPeopleCountState:l,sitesForSpace:d,config:c,organizationStore:u,appliedSorts:g,setSpaceExpandedState:m}=e,{pendingSpaceSettings:p,pendingTeamSettings:f,setPendingSpaceSettings:v,setPendingTeamSettings:y,pendingOrgSetting:b}=(0,s.useContext)(Cu().p),S=null===(t=l.value)||void 0===t?void 0:t.membersForSpace,j=null===(a=l.value)||void 0===a?void 0:a.guestsForSpace,w=(0,x().K8)((()=>n.map((e=>{var t,a,s;const n=o[e.id],l=p[e.id]??c.getValueFromSpace(e),x=function(e){let{teamStores:t,spaceStore:a,config:s,spaceSettingValue:n,teamAggregateDataForSpace:o,pendingTeamSettings:r,setPendingTeamSettings:l,appliedSorts:d}=e;if(!s.teamSettingName)return;const c=null==t?void 0:t.map((e=>{var t;const d=s.getValueFromTeam(e,a),c=null===(t=o[a.id])||void 0===t?void 0:t[e.id];return{id:e.id,iconSize:24,icon:e.getIcon(),title:e.getName()??"",byline:(0,i.jsx)(h().sA,{id:"settingsConsole.securityTable.team.byline",defaultMessage:"Teamspace"}),memberCount:(null==c?void 0:c.memberCountWithGuests)??0,settingValue:r[e.id]??d,parentSettingValue:n,settingOptions:s.getOptions(),onSelectOption:t=>{const a=t===d?void 0:t;l({[e.id]:a})},isClickable:!1,isPending:(0,Pe().O9)(r[e.id])}}));return null!=d&&d.length&&c?ug({rows:c,appliedSorts:d}):c}({teamStores:n,spaceStore:e,config:c,spaceSettingValue:l,setPendingTeamSettings:y,pendingTeamSettings:f,teamAggregateDataForSpace:r,appliedSorts:g}),w=c.getValueFromSpace(e),A={id:e.id,iconSize:28,icon:e.getIcon(),title:e.getName()??"",byline:(0,i.jsx)(h().sA,{id:"settingsConsole.securityTable.organization.space",defaultMessage:"Workspace"}),guestCount:j?null===(t=j[e.id])||void 0===t?void 0:t.length:void 0,siteCount:d?d[e.id]:void 0,memberCount:S?null===(a=S[e.id])||void 0===a?void 0:a.length:void 0,teamCount:null==n?void 0:n.length,collapsibleRows:x,settingValue:l,parentSettingValue:b??c.getValueFromOrganization(u),settingOptions:c.getOptions(),onSelectOption:t=>{const a=t===w?void 0:t;v({[e.id]:a})},isClickable:!1,isPending:(0,Pe().O9)(p[e.id]),onBulkApply:()=>{const{spaceChanges:t,teamChanges:a}=cg({spaceStore:e,teamStores:o[e.id],config:c,settingValue:l});v(t),y(a),Object.values(a).filter(Pe().O9).length&&m({[e.id]:!0})}};return A.shouldShowBulkApply=A.isPending&&A.onBulkApply&&Boolean(null===(s=A.collapsibleRows)||void 0===s?void 0:s.some((e=>e.settingValue!==A.settingValue))),A}))),[n,o,r,S,j,d,c,u,p,v,f,y,b,g,m]);return null!=g&&g.length&&w?ug({rows:w,appliedSorts:g}):w}function mg(e){var t,a;let{organizationStore:n,spaceStores:o,teamStoresForSpace:r,config:l,hasTeamColumn:d,rowFilterFn:u,isFiltered:g,appliedSorts:m}=e;const p=(0,f().v3)(),y=(0,Vt().A)(),b=(0,s.useMemo)((()=>o.map((e=>e.id))),[o]),{teamAggregateDataForSpace:j}=(0,Pn().N)(b),w=Boolean("publish-sites"===l.settingName),A=function(e){let{environment:t,settingName:a}=e;const{spaceIds:n}=(0,s.useContext)(_().D),[o]=(0,Xe().Yb)((async()=>{if((0,Pe().O9)(a)&&"publish-sites"!==a)return;let e=0;const s={};return await(0,Je().lX)(n,Ze().O,(async a=>{const n=await S().callApi({eventName:"getPublishedPageCountForOrganizationSpace",environment:t,data:{spaceId:a},headers:(0,Zt().WS)({spaceId:a})});"failed"!==n.type&&(e+=n.data.publishedPagesCount,s[a]=n.data.publishedPagesCount)})),{orgSitesCount:e,sitesCountForSpace:s}}),[t,n,a]);return{state:o}}({environment:p,settingName:l.settingName}),M=null===(t=A.state.value)||void 0===t?void 0:t.orgSitesCount,C=null===(a=A.state.value)||void 0===a?void 0:a.sitesCountForSpace,{state:I}=(0,Iu().j)(),[T,k]=(0,s.useState)({}),[z,D]=(0,s.useState)({}),P=function(e){var t,a;const{organizationStore:n,orgPeopleCountState:o,orgSitesCount:r,teamStoresForSpace:l,config:d,spaceStores:c,setSpaceExpandedState:u}=e,{pendingOrgSetting:g,setPendingOrgSetting:m,setPendingSpaceSettings:p,setPendingTeamSettings:f}=(0,s.useContext)(Cu().p),v=null===(t=o.value)||void 0===t?void 0:t.memberCount,y=null===(a=o.value)||void 0===a?void 0:a.guestCount;return(0,x().K8)((()=>{const e=d.getValueFromOrganization(n),t=g??e??Tu;return{id:n.id,icon:n.getIcon(),iconSize:32,title:n.getName()??"Default",byline:(0,i.jsx)(h().sA,{id:"settingsConsole.securityTable.organization.byline",defaultMessage:"Organization"}),memberCount:v,guestCount:y,siteCount:r,teamCount:Object.values(l).flat().length,settingValue:t,parentSettingValue:void 0,settingOptions:[{key:Tu,label:eg},...d.getOptions()],onSelectOption:t=>{let a=t===e?void 0:t;void 0===e&&t===Tu&&(a=void 0),m(a)},onBulkApply:()=>{let e={},a={};const s={};for(const n of c){const{spaceChanges:o,teamChanges:i}=cg({spaceStore:n,teamStores:l[n.id],config:d,settingValue:t});e={...e,...o},a={...a,...i},Object.values(i).filter(Pe().O9).length&&(s[n.id]=!0)}p(e),f(a),u(s)},isClickable:!1,hideToggle:!0,isPending:(0,Pe().O9)(g)}}),[n,c,l,v,y,r,d,g,m,p,f,u])}({organizationStore:n,orgPeopleCountState:I,orgSitesCount:M,teamStoresForSpace:r,config:l,spaceStores:o,setSpaceExpandedState:e=>k((t=>({...t,...e})))}),N=gg({spaceStores:o,teamStoresForSpace:r,teamAggregateDataForSpace:j,orgPeopleCountState:I,sitesForSpace:C,config:l,organizationStore:n,appliedSorts:m,setSpaceExpandedState:e=>k((t=>({...t,...e})))}),R={...P,shouldShowBulkApply:P.isPending&&P.settingValue!==Tu&&P.onBulkApply&&N.some((e=>{var t;return e.settingValue!==P.settingValue||Boolean(null===(t=e.collapsibleRows)||void 0===t?void 0:t.some((e=>e.settingValue!==P.settingValue)))}))},B="guest-invites"===l.settingName,L=(0,s.useMemo)((()=>[sg,B?rg:void 0,w?lg:void 0,d?ng:void 0,og,ig].filter(Pe().O9)),[d,B,w]),E=L.map((e=>({...e,headerStyle:y.tableHeader,rowStyle:y.tableRow}))),O=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:L,theme:e,containerMarginTop:0})),[L]);return(0,s.useEffect)((()=>{if(!0===g){const e={};for(const t of b)e[t]=!0;D(e)}else D({})}),[g,b]),(0,i.jsx)(Su,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,rows:[R,...N],rowFilterFn:u,isFiltered:g,columnRenderInfo:E,renderNoRowsComponent:()=>(0,i.jsx)(qt,{icon:c().h,title:(0,i.jsx)(h().sA,{id:"organizationSecuritySettingTable.empty",defaultMessage:"No settings found"}),byline:(0,i.jsx)(h().sA,{id:"organizationSecuritySettingTable.empty.byline",defaultMessage:"There are no settings that match this query"})}),styles:O,extendToFullScreen:Yt().e,expandedState:g?z:T,setExpandedState:g?D:k})}function pg(e){let{selectedGroupIds:t,setSelectedGroupIds:a,groups:s}=e;const n=function(e){const t=(0,v().IS)((()=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:8},optionTitle:{display:"block",paddingTop:4,paddingBottom:4}})),[]);return(0,x().K8)((()=>e.map((e=>({key:e.groupId,value:e.groupId,title:(0,i.jsxs)("div",{style:t.optionContainer,children:[(0,i.jsx)(N().B6,{disabled:!0,icon:e.groupIcon,isEmptyPage:!1,size:Da().iK,title:e.groupName,isLarge:!0,emojiSize:Da().iK,isRaw:!1}),(0,i.jsx)(Ws().A,{style:t.optionTitle,children:e.groupName})]}),shortTitle:e.groupName,count:(0,i.jsx)(h().sA,{id:"groupsFilter.numMembers",defaultMessage:"{count} {count, plural, one {member} other {members}}",values:{count:e.memberCount}})})))),[e,t])}(s);return(0,i.jsx)(qs().VX,{pillTitle:(0,i.jsx)(h().sA,{id:"organizationConsole.table.filters.groups.title",defaultMessage:"Groups"}),pillIcon:m,selectedItems:t,setSelectedItems:a,items:n})}const hg={id:"groups",headerTitle:(0,i.jsx)(h().sA,{id:"singleUserView.groupsTable.groupsColumn.header",defaultMessage:"Groups"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(ca,{}):(0,i.jsx)(Rt().s7,{title:e.groupName,icon:(0,i.jsx)(N().B6,{disabled:!0,icon:e.groupIcon,isEmptyPage:!1,title:e.groupName,size:Da().p8,isLarge:!0}),iconSize:Da().p8,summaryStyles:{overflow:"hidden"}}),widthData:{widthPercent:40,minWidth:100},sortable:!1},fg={id:"members",headerTitle:(0,i.jsx)(h().sA,{id:"singleUserView.groupsTable.membersColumn.header",defaultMessage:"Members"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Ft().Kb,{}):(0,i.jsx)(I().D,{colorName:"secondary",children:(0,i.jsx)(h().sA,{defaultMessage:"{numMembers, plural, one {# member} other {# members}}",id:"singleUserView.groupsTable.numMembers",values:{numMembers:e.memberCount}})}),widthData:{widthPercent:30,minWidth:50},sortable:!1};function xg(e,t){return{id:"teamspaces",headerTitle:(0,i.jsx)(h().sA,{id:"singleUserView.groupsTable.associatedTeamspacesColumn.header",defaultMessage:"Teamspaces"}),renderCell:a=>{if(a.type===Qt().T.Loading)return(0,i.jsx)(Ft().Kb,{});const s=a.associatedTeamspaceIds;if(0===s.length)return null;const n=e.filter((e=>s.includes(e.id)));return(0,i.jsx)(X().tv,{teamStores:n,isLoading:t,showTooltip:!0})},widthData:{widthPercent:30,minWidth:50},sortable:!1}}function vg(e){let{organizationStore:t,userStore:a}=e;const n=(0,Cs().l)(),o=(0,s.useMemo)((()=>n.map((e=>e.id))),[n]),[r,l]=(0,s.useState)(o[0]),{teamStores:d,loading:c}=(0,z().o)(o),g=(0,s.useMemo)((()=>d[r]??[]),[d,r]),m=s.useMemo((()=>{return[hg,fg,xg(g,c),(e=t.id,{id:"details",headerTitle:(0,i.jsx)("div",{}),renderCell:t=>t.type===Qt().T.Loading?null:(0,i.jsx)(ds,{groupId:t.id,isHovered:t.isRowHovered,organizationId:e}),widthData:{width:30},sortable:!1})];var e}),[g,t.id,c]),p=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:m,theme:e,containerMarginTop:0})),[m]),f=(0,v().IS)((()=>({filters:{display:"flex",flexDirection:"row"},search:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",margin:"0 auto 12px"},actionContainer:{display:"flex",flexDirection:"row"}})),[]),y=[{id:hg.id,name:M().A.formatMessage(ag.name),type:"title"},{id:fg.id,name:M().A.formatMessage(ag.members),type:"number"}],[b,S]=(0,s.useState)(),[j,w]=(0,s.useState)(!1),[A,C]=(0,s.useState)(),{rows:I,loading:T}=function(e){let{userId:t,spaceId:a,teamStores:n}=e;const o=(0,s.useMemo)((()=>[t]),[t]),i=(0,s.useMemo)((()=>[a]),[a]),{spaceIdToUserPermissionGroupMap:r,loading:l}=tt({userIds:o,spaceIds:i}),{permissionGroupsForSpace:d,loading:c}=et({spaceIds:i}),u=(0,s.useMemo)((()=>{var e;return(null===(e=r[a])||void 0===e?void 0:e[t])??[]}),[a,r,t]),g=(0,s.useMemo)((()=>(d[a]??[]).filter((e=>u.includes(e.group.group_id)))),[a,d,u]);return{rows:(0,x().K8)((()=>g.map((e=>{const t=e.group;return{type:Qt().T.SingleUserGroup,id:t.group_id,groupId:t.group_id,groupName:t.name,groupIcon:t.icon?{pointer:{id:t.group_id,spaceId:t.space_id,table:Ht().n},icon:t.icon}:void 0,memberCount:e.memberCount,associatedTeamspaceIds:n.filter((e=>e.isAssociatedWithPermissionGroup(t))).map((e=>e.id)),isClickable:!1}}))),[g,n]),loading:l||c}}({userId:a.id,spaceId:r,teamStores:g}),{filters:k,updateFilters:_,query:D,setQuery:P,filteredRows:N,onPageChange:R,hasMoreResults:B}=function(e,t){const[a,n]=(0,s.useState)({pageNum:1}),o=(0,s.useCallback)((e=>{n((t=>({...t,...e,pageNum:1})))}),[]),[i,r]=(0,s.useState)(""),{filteredRows:l,hasMoreResults:d}=(0,s.useMemo)((()=>{if(!e)return{filteredRows:[],hasMoreResults:!1};let s=e;i&&(s=(0,ut().Ay)(i,s,(e=>e.groupName))),a.groupIds&&a.groupIds.length>0&&(s=s.filter((e=>{var t;return null===(t=a.groupIds)||void 0===t?void 0:t.includes(e.groupId)}))),a.teamspaceIds&&a.teamspaceIds.length>0&&(s=s.filter((e=>{var t;return null===(t=a.teamspaceIds)||void 0===t?void 0:t.some((t=>e.associatedTeamspaceIds.includes(t)))}))),s=t&&t.length>0?s.sort(((e,a)=>{for(const s of t)if("groups"===s.propertyId){const t=e.groupName,n=a.groupName;if(t!==n)return"ascending"===s.direction?t.localeCompare(n):n.localeCompare(t)}else if("members"===s.propertyId){const t=e.memberCount,n=a.memberCount;if(t!==n)return"ascending"===s.direction?t-n:n-t}return 0})):s.sort(((e,t)=>e.groupName.localeCompare(t.groupName)));const n=s.length>a.pageNum*yu;return s=s.slice((a.pageNum-1)*yu,a.pageNum*yu),{filteredRows:s,hasMoreResults:n}}),[e,i,a.groupIds,a.teamspaceIds,a.pageNum,t]);return{filters:a,updateFilters:o,query:i,setQuery:r,filteredRows:l,onPageChange:e=>{const t={...a,pageNum:e};n(t)},hasMoreResults:d}}(I,b),L=_o({spaceStores:n}),E=A??b??[],O=T?(0,Qt().n)():N;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:f.actionContainer,children:[(0,i.jsxs)("div",{style:f.filters,children:[(0,i.jsx)(En().A,{children:(0,i.jsx)(Ha().e,{sortProperties:y,isMenuOpen:j,setIsMenuOpen:w,onApply:e=>{w(!1),S(e),C(void 0)},currentSorts:E})}),E.length>0?(0,i.jsx)(Ln().he,{}):null,(0,i.jsx)(Oo,{selectedSpaceId:r,setSelectedSpaceId:e=>{_({teamspaceIds:void 0,groupIds:void 0}),l(e)},spaceData:L}),(0,i.jsx)(pg,{selectedGroupIds:k.groupIds||[],setSelectedGroupIds:e=>{_({groupIds:e})},groups:I},`${r}-groups`),(0,i.jsx)(xc,{selectedTeamspaceIds:k.teamspaceIds||[],setSelectedTeamspaceIds:e=>{_({teamspaceIds:e})},teamspaceStores:g},`${r}-teamspaces`)]}),(0,i.jsxs)("div",{style:f.search,children:[(0,i.jsx)(Fa().x,{appliedSorts:b,openSortPillMenu:e=>{e&&C([{propertyId:e,direction:"ascending"}]),w(!0)},sortProperties:y}),(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:D,setQueryFilter:P})]})]}),(0,i.jsx)(Nt().WE,{hideHeaderRowPadding:!0,columnRenderInfo:m,rows:O,renderNoRowsComponent:()=>(0,i.jsx)(qt,{icon:u().peopleIcon,title:(0,i.jsx)(h().sA,{id:"singleUserView.groupsTable.empty",defaultMessage:"No groups found"}),byline:(0,i.jsx)(h().sA,{id:"singleUserView.groupsTable.empty.byline",defaultMessage:"There are no groups that match this query"})}),styles:p,showRowBorders:!0,loadMoreMethod:{type:"pages",onLoadNext:()=>{R(k.pageNum+1)},onLoadPrevious:()=>{R(k.pageNum-1)},hasNextPage:B,hasPrevPage:k.pageNum>1,currentPage:k.pageNum}})]})}const yg=(0,h().YK)({groups:{id:"settingsConsole.singleUserView.groupsTab.title",defaultMessage:"Groups"},groupsLabel:{id:"settingsConsole.singleUserView.groupsTab.label",defaultMessage:"View permission groups this user is a part of and associated teamspaces"}});function bg(e){const t=(0,h().tz)();return(0,i.jsxs)(Z,{children:[(0,i.jsx)(Ua()._,{title:t.formatMessage(yg.groups),byline:t.formatMessage(yg.groupsLabel)}),(0,i.jsx)(vg,{...e})]})}var Sg=()=>a(29037);function jg(e){const{userStore:t,metadata:a,onDismiss:n,onSubmit:o}=e,r=(0,h().tz)(),l=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.yellowPrimary},content:{height:"fit-content",width:390,border:"1px solid var(--stroke-regular, #E3E2E0)",borderRadius:6,padding:"4px 12px",display:"flex",alignItems:"center"},check:{height:20,width:20,color:e.text.tertiary}})),[]);const d=(0,x().K8)((()=>t.getDisplayName(r)),[t,r]),{state:c}=(0,Iu().j)(),{workspaceName:u,workspaceIcon:g,memberCount:m}=(0,x().K8)((()=>{var e;return a.isExternal?{workspaceName:a.workspaceName,workspaceIcon:a.workspaceIcon,memberCount:0}:{workspaceName:a.spaceStore.getName(),workspaceIcon:a.spaceStore.getIcon(),memberCount:(null===(e=c.value)||void 0===e||null===(e=e.membersForSpace[a.spaceStore.id])||void 0===e?void 0:e.length)||0}}),[a,c]),p=a.isExternal,f=!p&&(0,Ms().MN)(a.userRole),[y,b]=(0,s.useState)(!1);return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(O().tf,{header:(0,i.jsx)(q().rQ,{icon:(0,Gr().exclamationMarkTriangleIcon)(l.icon),title:p||f?r.formatMessage(wg.removeMemberTitle):r.formatMessage(wg.removeGuestAccessTitle),byline:r.formatMessage(p?wg.removeMemberFromExternalWorkspaceByline:f?wg.removeMemberByline:wg.removeGuestAccessByline,{b:e=>(0,i.jsx)("b",{children:e}),userName:d})}),footer:(0,i.jsx)(q().jl,{primaryText:p||f?r.formatMessage(wg.removeMemberButton):r.formatMessage(wg.removeGuestAccessButton),primaryAction:async()=>{b(!0),await async function(){await o(),n()}(),b(!1)},primaryDisabled:y,secondaryText:r.formatMessage(wg.cancelButton),secondaryAction:n}),children:(0,i.jsxs)("div",{style:l.content,children:[(0,i.jsx)(Rt().s7,{title:u,byline:p?r.formatMessage(wg.externalWorkspace):(0,i.jsxs)(i.Fragment,{children:[r.formatMessage(wg.workspace),(0,i.jsx)(T().A,{}),(0,i.jsx)(re().Qq,{memberCount:m})]}),icon:(0,i.jsx)(N().B6,{disabled:!0,icon:g,iconRecordCategory:"workspace",title:u,size:32,isLarge:!0,isEmptyPage:!1}),iconSize:32}),(0,Sg().checkmarkIcon)(l.check)]})})})}const wg=(0,h().YK)({removeMemberTitle:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeMemberTitle",defaultMessage:"Remove member from workspace"},removeGuestAccessTitle:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeGuestAccessTitle",defaultMessage:"Remove guest access"},removeMemberByline:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeMemberByline",defaultMessage:"<b>{userName}</b> will lose access to all content, teamspaces, and groups in this workspace."},removeGuestAccessByline:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeGuestAccessByline",defaultMessage:"<b>{userName}</b> will lose guest access to all pages in this workspace."},removeMemberFromExternalWorkspaceByline:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeMemberFromExternalWorkspaceByline",defaultMessage:"<b>{userName}</b> will lose access to all content, teamspaces, and groups in this external workspace."},removeMemberButton:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeMemberButton",defaultMessage:"Remove member"},removeGuestAccessButton:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.removeGuestAccessButton",defaultMessage:"Remove guest access"},cancelButton:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.cancelButton",defaultMessage:"Cancel"},workspace:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.workspace",defaultMessage:"Workspace"},externalWorkspace:{id:"orgConsole.removeUserFromWorkspaceConfirmationModal.externalWorkspace",defaultMessage:"External workspace"}});function Ag(e){const{row:t}=e,[a,n]=(0,s.useState)(!1);return(0,i.jsx)("div",{style:{marginRight:0,marginLeft:"auto"},children:function(e){switch(e.metadata.type){case"workspace":if(e.metadata.isExternal){const t=e.metadata.onClick;return(0,i.jsx)(Ne().E,{color:"uiBlue",onClick:()=>{n(!0),t(),n(!1)},children:(0,i.jsx)(h().sA,{id:"orgConsole.singleUserView.workspacesTable.removeFromWorkspace",defaultMessage:"Remove from workspace"})})}const t=e.metadata.onUpdateRole;return"none"===e.metadata.roleValue?(0,i.jsx)(Ne().E,{color:"uiBlue",disabled:a,onClick:async()=>{n(!0),await t("member"),n(!1)},children:(0,i.jsx)(h().sA,{id:"orgConsole.singleUserView.workspacesTable.addToWorkspace",defaultMessage:"Add to workspace"})}):"page_guest"===e.metadata.roleValue?(0,i.jsx)(Ne().E,{color:"uiBlue",disabled:a,onClick:async()=>{n(!0),await t("none"),n(!1)},children:(0,i.jsx)(h().sA,{id:"orgConsole.singleUserView.workspacesTable.removeGuestAccess",defaultMessage:"Remove guest access"})}):(0,i.jsx)(Mg,{settingValue:e.metadata.roleValue,settingOptions:e.metadata.roleOptions,onSelectOption:t});case"teamspace":return;default:(0,Pe().HB)(e.metadata)}}(t)})}function Mg(e){let{settingValue:t,settingOptions:a,onSelectOption:s}=e;const n=(0,v().IS)((e=>({dropdown:{marginTop:4,marginBottom:4,border:void 0,background:e.buttonHoveredBackground},buttonHover:{background:e.darkBannerBackground}})),[]);return(0,i.jsx)(Ll().m,{isMobile:!1,type:"dropdown",currentOption:t,options:a,onSelectOption:s,buttonStyle:{...El().W,...n.dropdown},placementToOrigin:Ya().W.Bottom,alignmentToOrigin:Ya().C.End,buttonHoverStyle:n.buttonHover})}const Cg=[{id:"name",renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(ca,{iconSize:Au,iconStyles:{marginLeft:0}}):(0,i.jsxs)(ae().fI,{gap:8,children:[(0,i.jsx)(Rt().s7,{title:e.title,iconSize:Au,icon:(0,i.jsx)(N().B6,{disabled:!0,icon:e.icon,iconRecordCategory:"workspace",title:e.title,size:Au,isLarge:!0,isEmptyPage:!1}),summaryStyles:{overflow:"hidden"}}),"workspace"===e.metadata.type&&e.metadata.isExternal&&(0,i.jsx)(Ut().A,{content:(0,i.jsx)(h().sA,{id:"orgConsole.singleUserView.workspacesTable.externalWorkspace.badge",defaultMessage:"External"})})]}),headerTitle:void 0,sortable:!1,widthData:{widthPercent:40,minWidth:100}},{id:"metadata",renderCell:e=>{if(e.type===Qt().T.Loading)return(0,i.jsx)(Ft().Kb,{});if("workspace"===e.metadata.type&&e.metadata.isExternal)return(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"orgConsole.singleUserView.workspacesTable.externalWorkspace",defaultMessage:"External workspace"})});let t,a;switch(e.metadata.type){case"workspace":t=(0,i.jsx)(h().sA,{id:"orgConsole.singleUserView.workspacesTable.workspace",defaultMessage:"Workspace"}),a=(0,i.jsx)(h().sA,{id:"orgConsole.singleUserView.workspacesTable.teamspaceCount",defaultMessage:"{teamCount, plural, one {{teamCount} teamspace} other {{teamCount} teamspaces}}",values:{teamCount:e.metadata.teamCount}});break;case"teamspace":t=(0,i.jsx)(h().sA,{id:"orgConsole.singleUserView.workspacesTable.teamspace",defaultMessage:"Teamspace"}),a=(0,i.jsx)(h().sA,{id:"orgConsole.singleUserView.workspacesTable.teamspaceMemberCount",defaultMessage:"{memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{memberCount:e.metadata.memberCount}});break;default:(0,Pe().HB)(e.metadata)}return(0,i.jsxs)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:[t," · ",a]})},headerTitle:void 0,sortable:!1,widthData:{widthPercent:30,minWidth:100}},{id:"action",renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Ft().Kb,{}):(0,i.jsx)(Ag,{row:e}),headerTitle:void 0,sortable:!1,widthData:{widthPercent:30,minWidth:100}}];a(18107),a(967357);function Ig(e){const{organizationStore:t,userStore:a,userData:n,setRemoveUserModalState:o}=e,{externalSpaceRows:r,loading:l}=function(e){let{organizationStore:t,userStore:a,setRemoveUserModalState:n}=e;const o=(0,f().v3)(),{managedUser:r,reloadManagedUser:l,loading:d}=function(e){let{organizationStore:t,userStore:a}=e;const n=(0,f().v3)(),o=(0,x().K8)((()=>t.getEmailDomains()),[t]),i=(0,x().K8)((()=>{const e=a.getEmail();return!(!e||!(0,ct().Wy)(o,e))}),[o,a]),[r,l]=(0,s.useState)(void 0),[d,c]=(0,s.useState)(!1),[u,g]=(0,Xe().Yb)((async()=>{if(0===o.length||!i)return;c(!0);const e=await S().callApi({eventName:"getManagedUsers",environment:n,data:{query:a.id,emailDomains:o}});if("failed"===e.type)throw c(!1),e.error;const t=e.data.results;l(t.at(0)),c(!1)}),[o,n,i,a.id]);return{managedUser:r,loading:d,reloadManagedUser:g}}({organizationStore:t,userStore:a}),c=(0,s.useMemo)((()=>(null==r?void 0:r.workspaces.filter((e=>e.isExternal)).map((e=>e.id)))??[]),[r]),u=(0,x().K8)((()=>c.map((e=>function(e){let{environment:t,userStore:a,spaceId:s,managedUser:n,reloadManagedUser:o,setRemoveUserModalState:r}=e;const l=null==n?void 0:n.workspaces.find((e=>e.id===s));if(!l)return;const d=l.name,c=l.icon?{pointer:{table:aa().NX,id:s},icon:l.icon}:void 0,u={type:Qt().T.SingleUserWorkspace,id:s,spaceId:s,icon:c,title:d,metadata:{type:"workspace",isExternal:!0,onClick:()=>{r({userStore:a,metadata:{isExternal:!0,workspaceName:d??"",workspaceIcon:c},onSubmit:async()=>{await async function(e){let{environment:t,userId:a,spaceId:s,spaceName:n}=e;yd().PG(t,{external_space_id:s});const o=await S().callApi({eventName:"removeManagedUserFromSpace",environment:t,data:{userId:a,targetSpaceId:s}});yd().st(t,{external_space_id:s}),"success"===o.type?nt().D6({label:(0,i.jsx)(h().sA,{defaultMessage:"Successfully removed user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceConfirmation",values:{workspaceName:n}})}):nt().D6({label:(0,i.jsx)(h().sA,{defaultMessage:"Failed to remove user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceFailure",values:{workspaceName:n}})})}({environment:t,userId:a.id,spaceId:s,spaceName:d??""}),await o()}})}},isPending:!1,isClickable:!1};return u}({environment:o,userStore:a,spaceId:e,managedUser:r,reloadManagedUser:l,setRemoveUserModalState:n})))),[c,o,a,r,l,n]);return{externalSpaceRows:u,loading:d}}({organizationStore:t,userStore:a,setRemoveUserModalState:o}),{organizationSpaceRows:d,loading:c}=function(e){let{organizationStore:t,userStore:a,userData:n,setRemoveUserModalState:o}=e;const i=(0,h().tz)(),r=(0,Cs().l)(),l=(0,Cs().l)(),d=(0,s.useMemo)((()=>r.map((e=>e.id))),[r]),{teamStores:c,loading:u}=(0,z().o)(d),{teamAggregateDataForSpace:g,loading:m}=(0,Pn().N)(d),p=function(e){let{organizationId:t,userId:a,userData:n}=e;const{removeUserFromSpaceCache:o,updateUserRoleInSpaceCache:i}=n,r=(0,f().v3)(),l=(0,h().tz)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(k().N),c=(0,s.useCallback)((async e=>{const s=e.id,n=await S().callApi({eventName:"removeUserFromOrganizationSpaces",environment:r,data:{organizationId:t,userIds:[a],spaceIds:[s]}});"success"===n.type?(nt().D6({label:l.formatMessage(xn.changeRoleSuccess)}),o(s),d({data:n.data}),(0,w().u)({environment:r,event:{eventName:"org_console_people_remove_users",eventProperties:{organization_id:t,space_ids:[s],num_users_removed:1}}})):j().f1((0,A().Hu)(M().A.getIntl(),n))}),[r,t,a,l,o,d]),u=(0,s.useCallback)((async(e,s)=>{const n=await S().callApi({eventName:"updateUserRoleInOrganizationSpace",environment:r,data:{organizationId:t,userIds:[a],newRole:s,spaceId:e}});"success"===n.type?(nt().D6({label:l.formatMessage(xn.changeRoleSuccess)}),i(e,(0,Ms().DR)(s)),d({data:n.data}),(0,w().u)({environment:r,event:{eventName:"org_console_people_update_user_role",eventProperties:{organization_id:t,space_id:e}}})):j().f1((0,A().Hu)(M().A.getIntl(),n))}),[r,l,t,d,i,a]),g=(0,s.useCallback)((async(e,s)=>{const n=await S().callApi({eventName:"bulkAddUsersToOrganizationSpaces",environment:r,data:{organizationId:t,existingUserIds:[a],newUserEmails:[],spaceIds:[e],role:s}});"success"===n.type?(nt().D6({label:l.formatMessage(xn.addUserSuccess)}),i(e,(0,Ms().DR)(s)),d({data:n.data}),(0,w().u)({environment:r,event:{eventName:"org_console_people_add_members",eventProperties:{organization_id:t,space_ids:[e],num_users_added:1}}})):j().f1((0,A().Hu)(M().A.getIntl(),n))}),[r,l,t,d,i,a]);return(0,s.useCallback)((async(e,t,a)=>{if(t===a)return;const s=e.id;if((0,Ms().MN)(t))switch(a){case"none":await c(e);break;case"page_guest":throw new(hn().yI4)("Cannot change role to guest.");case"restricted_member":case"owner":case"membership_admin":case"member":await u(s,a);break;default:(0,Pe().HB)(a)}else switch(a){case"none":await c(e);break;case"page_guest":throw new(hn().yI4)("Cannot change role to guest.");case"restricted_member":case"member":case"owner":case"membership_admin":await g(s,a);break;default:(0,Pe().HB)(a)}}),[g,c,u])}({organizationId:t.id,userId:a.id,userData:n}),v=(0,s.useMemo)((()=>[a.id]),[a]),{spaceIdToUserPermissionGroupMap:y,loading:C}=tt({userIds:v,spaceIds:d}),I=(0,s.useMemo)((()=>u||m||C),[u,m,C]),T=(0,x().K8)((()=>d.map((e=>{const t=l.find((t=>t.id===e));if(!t)return;const s=c[e]??[],r=g[e]??{};return function(e){let{userStore:t,spaceStore:a,teamStores:s,teamDataForSpace:n,userPermissionGroupIds:o,userData:i,intl:r,onUpdateMemberRole:l,setRemoveUserModalState:d}=e;const{userSpaceAccessMap:c}=i,u=c.get(a.id),g=u?(0,b().QE)(u)?"page_guest":(0,Ms().jM)(u.role):"none",m=t.id,p=(0,Ms().MN)(g)?null==s?void 0:s.map((e=>{var t;const s=n[e.id];return function(e){let{userId:t,spaceId:a,teamStore:s,teamData:n,userPermissionGroups:o,userRole:i}=e;const r=s.isMemberOrGuest(t,o,{membership_type:i,user_id:t});if(!r)return;const l={type:Qt().T.SingleUserWorkspace,id:s.id,spaceId:a,icon:s.getIcon(),title:s.getName()??"",metadata:{type:"teamspace",memberCount:(null==n?void 0:n.memberCountWithGuests)??0,onClick:()=>{}},isPending:!1,isClickable:!1};return l}({userId:m,spaceId:a.id,teamStore:e,teamData:s,userPermissionGroups:new Set((null===(t=o[a.id])||void 0===t?void 0:t[m])??[]),userRole:g})})).filter(Pe().O9):void 0,h={type:Qt().T.SingleUserWorkspace,id:a.id,spaceId:a.id,icon:a.getIcon(),title:a.getName()??"",metadata:{type:"workspace",isExternal:!1,teamCount:null==s?void 0:s.length,roleValue:g,roleOptions:g?Tg(r):[],onUpdateRole:async e=>{"none"===e?d({userStore:t,metadata:{isExternal:!1,userRole:g,spaceStore:a},onSubmit:async()=>{await l(a,g,e,i)}}):await l(a,g,e,i)}},collapsibleRows:p,isPending:!1,isClickable:!1};return h}({userStore:a,spaceStore:t,teamStores:s,teamDataForSpace:r,userPermissionGroupIds:y,userData:n,intl:i,onUpdateMemberRole:p,setRemoveUserModalState:o})}))),[d,l,c,g,y,a,n,i,p,o]);return{organizationSpaceRows:T,loading:I}}({organizationStore:t,userStore:a,userData:n,setRemoveUserModalState:o});return{spaceRows:(0,s.useMemo)((()=>$e().My([...d,...r].filter(Pe().O9),(e=>{var t;return null===(t=e.title)||void 0===t?void 0:t.toLowerCase()}),"asc")),[r,d]),loading:(0,s.useMemo)((()=>l||c),[l,c])}}function Tg(e){return[{key:"owner",label:e.formatMessage(kg.workspaceOwnerOption)},{key:"membership_admin",label:e.formatMessage(kg.membershipAdminOption)},{key:"member",label:e.formatMessage(kg.workspaceMemberOption)},{key:"none",label:(0,i.jsx)("span",{style:{color:ki().Tj.red},children:e.formatMessage(kg.removeFromWorkspaceOption)})}]}const kg=(0,h().YK)({workspaceOwnerOption:{id:"settingsConsole.singleUserView.workspacesTab.workspaceOwnerOption",defaultMessage:"Workspace owner"},membershipAdminOption:{id:"settingsConsole.singleUserView.workspacesTab.membershipAdminOption",defaultMessage:"Membership admin"},workspaceMemberOption:{id:"settingsConsole.singleUserView.workspacesTab.workspaceMemberOption",defaultMessage:"Workspace member"},removeFromWorkspaceOption:{id:"settingsConsole.singleUserView.workspacesTab.removeFromWorkspaceOption",defaultMessage:"Remove from workspace"}});function _g(e){let{organizationStore:t,userStore:a,userData:n}=e;const o=(0,h().tz)(),r=(0,Vt().A)(),l=(0,v().IS)((e=>({filters:{display:"flex",flexDirection:"row"},headerStyle:{...r.tableHeader,boxShadow:`inset 0 -1px 0 ${e.tableDividerColor}`,height:12}})),[r.tableHeader]),d=_o({spaceStores:(0,Cs().l)()}),[c,u]=(0,s.useState)([]),[g,m]=(0,s.useState)(void 0),{spaceRows:p,loading:f}=Ig({organizationStore:t,userStore:a,userData:n,setRemoveUserModalState:m}),x=Cg.map((e=>({...e,headerStyle:l.headerStyle,rowStyle:{...r.tableRow,height:56}}))),y=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:x,theme:e,containerMarginTop:0})),[x]),[b,S]=(0,s.useState)({}),j=f?(0,Qt().n)():p;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:l.filters,children:(0,i.jsx)(Eo,{selectedSpaceIds:c,setSelectedSpaceIds:u,spaceData:d})}),(0,i.jsx)(Su,{rows:j,rowFilterFn:e=>!(e.type===Qt().T.SingleUserWorkspace&&c.length>0)||c.includes(e.spaceId),isFiltered:c.length>0,columnRenderInfo:x,renderNoRowsComponent:()=>(0,i.jsx)("div",{children:o.formatMessage(zg.emptyState)}),styles:y,showRowBorders:!0,hideHeaderRowPadding:!0,expandedState:b,setExpandedState:S}),g&&(0,i.jsx)(jg,{...g,onDismiss:()=>{m(void 0)}})]})}const zg=(0,h().YK)({emptyState:{id:"settingsConsole.singleUserView.workspacesTab.emptyState",defaultMessage:"Empty!"}}),Dg=(0,h().YK)({workspaces:{id:"settingsConsole.singleUserView.workspacesTab.title",defaultMessage:"Workspaces"},workspacesLabel:{id:"settingsConsole.singleUserView.workspacesTab.label",defaultMessage:"Add, remove, or adjust this user's role to control their workspace access and collaboration permissions"}});function Pg(e){const t=(0,h().tz)();return(0,i.jsxs)(Z,{children:[(0,i.jsx)(Ua()._,{title:t.formatMessage(Dg.workspaces),byline:t.formatMessage(Dg.workspacesLabel)}),(0,i.jsx)(_g,{...e})]})}var Ng=()=>a(311670),Rg=()=>a(5347),Bg=()=>a(452864),Lg=()=>a(593467);function Eg(e){const t=(0,f().v3)(),{spaceStore:a,daysFilter:s,sort:n}=e,[{value:o,status:i}]=(0,Xe().Yb)((async()=>await Lg().i_({environment:t,spaceStore:a,nextGraphFilter:s,nextTableFilter:s,nextSort:n})),[t,a,s,n]);return{usersTabData:o,loading:"resolved"!==i}}const Og={id:"user",headerTitle:(0,i.jsx)(h().sA,{id:"organization.analytics.memberViewTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(ca,{}):(0,i.jsx)(Fd().A,{containerStyle:{height:52,width:"100%"},actorStore:e.userStore,spaceRole:e.userRole&&(0,Fd().v)(e.userRole)}),widthData:{width:275,maxWidth:275},sortable:!1,shouldShowSortTooltip:!1},Ug={id:"pageViews",headerTitle:(0,i.jsx)(h().sA,{id:"organization.analytics.memberViewTable.pageViewsColumn.header",defaultMessage:"Page views"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:100}}):(0,i.jsx)(Fg,{pageViews:e.pageViews}),widthData:{widthPercent:25,minWidth:100},sortable:!1,shouldShowSortTooltip:!1};function Fg(e){let{pageViews:t}=e;const s=(0,v().IS)((e=>({eyeHideIcon:{width:20,height:20,color:e.icon.tertiary}})),[]);return void 0===t?(0,i.jsx)(V().A,{placement:Ya().W.Bottom,render:e=>(0,i.jsx)("div",{...e,children:(0,a(566910).e)(s.eyeHideIcon)}),renderTooltip:e=>(0,i.jsx)(h().sA,{id:"spaceAnalyticsUsersTab.optedOutUser.icon.tooltip",defaultMessage:"User has disabled page view tracking"})}):(0,i.jsx)(Ws().A,{children:t})}const Hg={id:"pageEdits",headerTitle:(0,i.jsx)(h().sA,{id:"organization.analytics.memberViewTable.pageEditsColumn.header",defaultMessage:"Page edits"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:100}}):(0,i.jsx)(Ws().A,{children:e.pageEdits}),widthData:{widthPercent:25,minWidth:100},sortable:!1,shouldShowSortTooltip:!0,hasClickableContents:!1},Vg={id:"lastActiveAt",headerTitle:(0,i.jsx)(h().sA,{id:"organization.analytics.memberViewTable.lastActiveColumn.header",defaultMessage:"Last active"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:150}}):(0,i.jsx)(Ui().F,{lastActiveAt:e.lastActiveAt,isNoActivitySecondaryColor:!0}),widthData:{widthPercent:25,minWidth:150},sortable:!1,shouldShowSortTooltip:!0,hasClickableContents:!1};function Wg(e,t){return{id:"teamspaces",headerTitle:(0,i.jsx)(h().sA,{id:"organization.analytics.memberViewTable.teamspacesColumn.header",defaultMessage:"Teamspaces"}),renderCell:a=>{if(a.type===Qt().T.Loading)return(0,i.jsx)(Ft().Kb,{});const s=a.associatedTeamspaceIds;if(0===s.length)return null;const n=e.filter((e=>s.includes(e.id)));return(0,i.jsx)(X().tv,{teamStores:n,isLoading:t,showTooltip:!0})},widthData:{widthPercent:25,minWidth:150},sortable:!1}}function qg(e){var t;const{spaceStore:a,daysFilter:n,isWorkspaceAnalyticsDisabled:o,sort:r}=e,l=(0,x().K8)((()=>a.getName()),[a]),d=a.id,c=(0,x().K8)((()=>[a.id]),[a.id]),{teamStores:g,loading:m}=(0,z().o)(c),p=(0,s.useMemo)((()=>g[d]??[]),[g,d]),[f,y]=(0,s.useState)(1);(0,s.useEffect)((()=>{y(1)}),[a.id,n,r]);const{usersTabData:b,loading:S}=Eg({spaceStore:a,daysFilter:n,sort:r}),{rows:j,hasMoreResults:w}=function(e){let{usersTabData:t,usersTabDataLoading:a,spaceId:n,teamspaceStores:o,currPage:i}=e;const r=(0,s.useMemo)((()=>(null==t?void 0:t.usersAndStats)??[]),[t]),l=(0,s.useMemo)((()=>r.map((e=>e.userStore.id))),[r]),d=(0,s.useMemo)((()=>[n]),[n]),{spaceIdToUserPermissionGroupMap:c,loading:u}=tt({userIds:l,spaceIds:d}),{visibleUsers:g,loading:m}=(0,D().d)(n),p=(0,x().K8)((()=>a||u||m||!t?(0,Qt().n)():r.map((e=>{var t;let{userStore:a,stats:s}=e;const i=null===(t=g.find((e=>e.userId===s.userId)))||void 0===t?void 0:t.role;return{type:Qt().T.AnalyticsMemberViewsRow,id:s.userId,userStore:a,userRole:i,pageViews:s.numPageViews,pageEdits:s.numPageEdits,lastActiveAt:s.lastActive,associatedTeamspaceIds:o.filter((e=>{var t;return e.isMemberOrGuest(s.userId,new Set((null===(t=c[n])||void 0===t?void 0:t[s.userId])??[]),{membership_type:i?(0,Ms().jM)(i):"none",user_id:s.userId})})).map((e=>e.id)),isClickable:!1}}))),[a,u,m,t,r,g,o,c,n]),h=p.length>i*Ze().q,f=p.slice((i-1)*Ze().q,i*Ze().q);return{rows:f,hasMoreResults:h}}({usersTabData:b,usersTabDataLoading:S,spaceId:d,teamspaceStores:p,currPage:f}),A=s.useMemo((()=>[Og,Ug,Hg,Vg,Wg(p,m)]),[p,m]),M=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:A,theme:e,containerMarginTop:0})),[A]);return o?(0,i.jsx)(Bg().H,{type:"disabled",spaceName:l}):"NotFoundError"===(null==b||null===(t=b.usersAndStatsError)||void 0===t?void 0:t.name)?(0,i.jsx)(Bg().H,{type:"empty",spaceName:l}):(0,i.jsx)(Nt().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,columnRenderInfo:A,rows:j,renderNoRowsComponent:()=>(0,i.jsx)(qt,{icon:u().peopleIcon,title:(0,i.jsx)(h().sA,{id:"analyticsMemberViewsTable.empty",defaultMessage:"No members found"}),byline:(0,i.jsx)(h().sA,{id:"analyticsMemberViewsTable.empty.byline",defaultMessage:"There are no members with available analytics data."})}),styles:M,showRowBorders:!0,loadMoreMethod:{type:"pages",onLoadNext:()=>{y(f+1)},onLoadPrevious:()=>{y(f-1)},hasNextPage:w,hasPrevPage:f>1,currentPage:f}})}var Gg=()=>a(826658),Kg=()=>a(301608);const Yg="last_90_days";function Qg(e){const{currentFilter:t,hideAllTime:a,onChangeFilter:s}=e,n=Kg().jf.filter((e=>!a||"all_time"!==e)).map((e=>({key:e,value:e,title:(0,i.jsx)(h().sA,{...Kg().jy[e]}),shortTitle:(0,i.jsx)(h().sA,{...Kg().jy[e]}),wrapCaption:!1})));return(0,i.jsx)(qs().G0,{pillTitle:(0,i.jsx)(h().sA,{id:"organizationConsole.analytics.filters.timeRange.title",defaultMessage:"Time range"}),pillIcon:Tr().D,selectedItem:t,setSelectedItem:e=>{s(e??Yg)},items:n,shouldUseCheck:!0,selectionRequired:!0})}function $g(e){let{organizationId:t,spaceStore:a,subtab:n,daysFilter:o,setDaysFilter:r,title:l,byline:d,disableFilters:c,sortProps:u,additionalFilters:g,querySearchProps:m,onExport:p}=e;const h=Va(),[f,x]=(0,s.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Ua()._,{title:l,byline:d}),(0,i.jsxs)("div",{style:h.actionContainer,children:[(0,i.jsxs)("div",{style:h.filters,children:[u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(En().A,{children:(0,i.jsx)(Ha().e,{...u.sortPillProps})}),u.sortPillProps.currentSorts.length>0?(0,i.jsx)(Ln().he,{}):null]}):null,(0,i.jsx)(mc,{showAsPill:!0,organizationId:t,selectedSpaceStore:a,currentTabRoute:Xt().Tr,currentTabProperties:{subtab:n}}),c?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Qg,{currentFilter:o,onChangeFilter:r}),g]})]}),c?null:(0,i.jsxs)("div",{style:h.rightContent,children:[u?(0,i.jsx)(Fa().x,{...u.sortButtonProps}):null,m?(0,i.jsx)(Bt().nv,{...m}):null,p?(0,i.jsx)(Gg().K,{onClick:async()=>{x(!0),await p(),x(!1)},disabled:f}):null]})]})]})}function Xg(e){let{organizationId:t,spaceStore:a,daysFilter:n,setDaysFilter:o}=e;const r=(0,f().v3)(),l=(0,v().IS)((e=>({container:{width:"100%",padding:"22px 32px"}})),[]),d=(0,x().K8)((()=>Boolean(null==a?void 0:a.getSettings().disable_page_analytics)),[a]),[c,u]=(0,s.useState)(void 0),[g,m]=(0,s.useState)(),[p,y]=(0,s.useState)(!1),b=g??(c?[Zg(c)]:[]);return(0,s.useEffect)((()=>{u(void 0),m(void 0),y(!1)}),[a.id]),(0,i.jsxs)("div",{style:l.container,children:[(0,i.jsx)($g,{organizationId:t,spaceStore:a,subtab:Tm.MemberViews,daysFilter:n,setDaysFilter:o,disableFilters:d,title:(0,i.jsx)(h().sA,{id:"organization.memberViews.title",defaultMessage:"Member views"}),byline:(0,i.jsx)(h().sA,{id:"organization.memberViews.byline",defaultMessage:"View all member views and edits"}),sortProps:{sortPillProps:{sortProperties:tm,isMenuOpen:p,setIsMenuOpen:y,onApply:e=>{y(!1),m(void 0);const t=e.at(0);u(t?function(e){return{field:e.propertyId===Ug.id?"page_views":e.propertyId===Hg.id?"page_edits":"last_active",direction:"descending"===e.direction?"desc":"asc"}}(t):void 0)},currentSorts:b,preventMultipleSorts:!0},sortButtonProps:{appliedSorts:c?[Zg(c)]:void 0,openSortPillMenu:e=>{e&&m([{propertyId:e,direction:"descending"}]),y(!0)},sortProperties:tm}},onExport:async()=>{await(0,Rg().K)({environment:r,spaceId:a.id,organizationId:t,analyticsType:Ng().e.Users,filters:{daysFilter:n}})}}),(0,i.jsx)(qg,{organizationId:t,spaceStore:a,daysFilter:n,isWorkspaceAnalyticsDisabled:d,sort:c??Jg})]})}function Zg(e){return{propertyId:"page_views"===e.field?Ug.id:"page_edits"===e.field?Hg.id:Vg.id,direction:"desc"===e.direction?"descending":"ascending"}}const Jg={field:"last_active",direction:"desc"},em=(0,h().YK)({pageViews:{id:"organization.analytics.memberViewTable.pageViewsColumn.sortHeader",defaultMessage:"Page views"},pageEdits:{id:"organization.analytics.memberViewTable.pageEditsColumn.sortHeader",defaultMessage:"Page edits"},lastActive:{id:"organization.analytics.memberViewTable.lastActiveColumn.sortHeader",defaultMessage:"Last active"}}),tm=[{id:Ug.id,name:M().A.formatMessage(em.pageViews),type:"number"},{id:Hg.id,name:M().A.formatMessage(em.pageEdits),type:"number"},{id:Vg.id,name:M().A.formatMessage(em.lastActive),type:"date"}];var am=()=>a(837503),sm=()=>a(23534),nm=()=>a(663484);const om={id:"views",headerTitle:(0,i.jsx)(h().sA,{id:"organization.analytics.pageViewTable.viewsColumn.header",defaultMessage:"Views"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:100}}):(0,i.jsx)(Ws().A,{children:e.views.toLocaleString()}),widthData:{widthPercent:10,minWidth:100},sortable:!1},im={id:"uniqueViews",headerTitle:(0,i.jsx)(h().sA,{id:"organization.analytics.pageViewTable.uniqueViewsColumn.header",defaultMessage:"Unique views"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:100}}):(0,i.jsx)(Ws().A,{children:e.uniqueViews.toLocaleString()}),widthData:{widthPercent:10,minWidth:100},sortable:!1},rm={id:"location",headerTitle:(0,i.jsx)(h().sA,{id:"organization.analytics.pageViewTable.locationColumn.header",defaultMessage:"Location"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:200}}):(0,i.jsx)(Go().E,{blockStore:e.blockStore,teamStore:e.teamStore}),widthData:{widthPercent:20,minWidth:220},sortable:!1},lm={id:"audience",headerTitle:(0,i.jsx)(h().sA,{id:"organization.analytics.pageViewTable.audienceColumn.header",defaultMessage:"Audience"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:180}}):(0,i.jsx)(Ws().A,{children:(0,qo().Z)(e.audience)}),widthData:{widthPercent:15,minWidth:180},sortable:!1},dm={id:"lastEditedBy",headerTitle:(0,i.jsx)(h().sA,{id:"organization.analytics.pageViewTable.lastEditedByColumn.header",defaultMessage:"Last edited by"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:150}}):e.lastEditedById?(0,i.jsx)("div",{style:L().RC,children:(0,i.jsx)(Ko().T,{blockStore:e.blockStore,userIds:[e.lastEditedById]})}):null,widthData:{widthPercent:15,minWidth:150,maxWidth:180},sortable:!1},cm={id:"lastEditedTime",headerTitle:(0,i.jsx)(h().sA,{id:"organization.analytics.pageViewTable.lastEditedTimeColumn.header",defaultMessage:"Last edited at"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:150}}):(0,i.jsx)(Yo().d,{dateTs:e.lastEditedTime}),widthData:{widthPercent:15,minWidth:150},sortable:!1},um={id:"createdBy",headerTitle:(0,i.jsx)(h().sA,{id:"organization.analytics.pageViewTable.createdByColumn.header",defaultMessage:"Created by"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:150}}):e.createdById?(0,i.jsx)("div",{style:L().RC,children:(0,i.jsx)(Ko().T,{blockStore:e.blockStore,userIds:[e.createdById]})}):null,widthData:{widthPercent:15,minWidth:150,maxWidth:180},sortable:!1},gm={id:"createdAt",headerTitle:(0,i.jsx)(h().sA,{id:"organization.analytics.pageViewTable.createdAtColumn.header",defaultMessage:"Created at"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:150}}):(0,i.jsx)(Yo().d,{dateTs:e.createdTime}),widthData:{widthPercent:15,minWidth:150},sortable:!1};function mm(e){var t;const{spaceStore:a,loadMoreMethod:n,isWorkspaceAnalyticsDisabled:o}=e,r=(0,sm().M)({spaceId:a.id}),d=(0,x().K8)((()=>a.getName()),[a]),c=function(e){const{loading:t,navigableBlockStores:a,analyticsByPageId:s}=e,n=(0,x().K8)((()=>a.map((e=>{var t,a,n;return{type:Qt().T.AnalyticsPageViewsRow,id:e.id,isClickable:!1,blockStore:e,views:(null===(t=s.get(e.id))||void 0===t?void 0:t.pageViews)||0,uniqueViews:(null===(a=s.get(e.id))||void 0===a?void 0:a.uniquePageViews)||0,teamStore:(0,Wo().Uo)(e),lastEditedById:e.getLastEditedById(),lastEditedTime:e.getLastEditedTime(),createdTime:e.getCreatedTime(),createdById:e.getCreatedById(),audience:(null===(n=s.get(e.id))||void 0===n?void 0:n.audience)||"private"}}))),[a,s]);if(t)return(0,Qt().n)();return n}(e),u=s.useMemo((()=>[{id:"page",headerTitle:(0,i.jsx)(h().sA,{id:"organization.analytics.pageViewTable.pageColumn.header",defaultMessage:"Page"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(ca,{}):(0,i.jsx)(Qo().oc,{blockStore:e.blockStore,rightIcon:(0,i.jsx)(nm().r,{blockStore:e.blockStore})}),widthData:{width:275,maxWidth:275},sortable:!1},om,im,rm,lm,dm,cm,um,gm]),[a]),g=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:u,theme:e,containerMarginTop:0})),[u]);return o?(0,i.jsx)(Bg().H,{type:"disabled",spaceName:d}):"NotFoundError"===(null==r||null===(t=r.error)||void 0===t?void 0:t.name)?(0,i.jsx)(Bg().H,{type:"empty",spaceName:d}):(0,i.jsx)(Nt().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,columnRenderInfo:u,rows:c,renderNoRowsComponent:()=>(0,i.jsx)(qt,{icon:l().d,title:(0,i.jsx)(h().sA,{id:"analyticsPageViewsTable.empty",defaultMessage:"No pages found"}),byline:(0,i.jsx)(h().sA,{id:"analyticsPageViewsTable.empty.byline",defaultMessage:"There are no pages that match this query"})}),styles:g,showRowBorders:!0,loadMoreMethod:n})}function pm(e){let{organizationId:t,spaceStore:a,daysFilter:n,setDaysFilter:o}=e;const r=(0,f().v3)(),l=(0,v().IS)((e=>({container:{width:"100%",padding:"22px 32px"}})),[]),d=(0,s.useMemo)((()=>[a.id]),[a.id]),{teamStores:c}=(0,z().o)(d),u=(0,s.useMemo)((()=>c[a.id]),[c,a.id]),[g,m]=(0,s.useState)(void 0),[p,y]=(0,s.useState)(),[b,j]=(0,s.useState)(!1),w=p??(g?[hm(g)]:[]),[A,M]=(0,s.useState)([]),[I,T]=(0,s.useState)([]),[_,D]=(0,s.useState)({starting:void 0,ending:void 0}),[P,N]=(0,s.useState)({starting:void 0,ending:void 0}),[R,B]=(0,s.useState)("");(0,s.useEffect)((()=>{m(void 0),y(void 0),j(!1),M([]),T([]),D({starting:void 0,ending:void 0}),N({starting:void 0,ending:void 0}),B("")}),[a.id]);const{navigableBlockStores:L,analyticsByPageId:E,runNewSearch:O,loading:U,loadMoreMethod:F}=function(e){let{spaceStore:t,daysFilter:a,query:n,sort:o,teamIds:i,createdBy:r,createdOn:l,lastEditedOn:d}=e;const c=(0,f().v3)(),[u,g]=(0,s.useState)(void 0),[m,p]=(0,s.useState)([]);(0,s.useEffect)((()=>{g(void 0),p([])}),[t.id,a,n,o,i,r,l,d]);const{organizationOwnerRecordCache:h,updateCacheWithRecordMap:x}=(0,s.useContext)(k().N),[{value:v,status:y},b]=(0,Xe().Yb)((async()=>{const e=m.at(-1),s=await S().callApi({eventName:"loadContentAnalytics",environment:c,data:{spaceId:t.id,sort:o,titleQuery:n,filters:{inTeams:i,createdBy:r,createdTime:(0,Oc().ES)(l),lastEditedTime:(0,Oc().ES)(d)},timeRange:a,startCursor:e},headers:{[Ao().B3]:t.id}});if("failed"===s.type)return;x(s);const u=s.data.results,p=u.map((e=>e.id)),h=new Map(u.map((e=>[e.id,e.analytics])));return g(s.data.nextCursor),{navigableBlockIds:p,analyticsByPageId:h}}),[r,l,a,c,d,m,n,o,t.id,i,x]),j=(0,s.useMemo)((()=>((null==v?void 0:v.navigableBlockIds)??[]).map((e=>new(C().Bv)(c,{id:e,table:ea().ev},{inMemoryRecordCache:h})))),[null==v?void 0:v.navigableBlockIds,h,c]);return{loading:"pending"===y,analyticsByPageId:(null==v?void 0:v.analyticsByPageId)??new Map,navigableBlockStores:j,runNewSearch:b,loadMoreMethod:{type:"pages",hasPrevPage:Boolean(m.length>0),hasNextPage:Boolean(u),onLoadPrevious:()=>{g(m.at(-1)),p((e=>e.slice(0,-1)))},onLoadNext:()=>{u&&(p((e=>[...e,u])),g(void 0))},currentPage:m.length+1}}}({spaceStore:a,daysFilter:n,query:R,sort:g??fm,teamIds:A,createdBy:I,createdOn:_,lastEditedOn:P}),H=(0,x().K8)((()=>Boolean(null==a?void 0:a.getSettings().disable_page_analytics)),[a]);return(0,i.jsxs)("div",{style:l.container,children:[(0,i.jsx)($g,{organizationId:t,spaceStore:a,subtab:Tm.PageViews,daysFilter:n,setDaysFilter:o,title:(0,i.jsx)(h().sA,{id:"organization.pageViews.title",defaultMessage:"Page views"}),byline:(0,i.jsx)(h().sA,{id:"organization.pageViews.byline",defaultMessage:"View all recent page views and edits"}),disableFilters:H,additionalFilters:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Tn().j,{selectedTeamIds:A,setSelectedTeamIds:M,onMenuClose:()=>{},teamStores:u}),(0,i.jsx)(am().Q,{spaceStore:a,createdByFilterIds:I,setCreatedByFilter:e=>{T(e)},includeGuests:!0}),(0,i.jsx)(lc().Z,{lastEditedTime:P,createdTime:_,setLastEditedTime:e=>{N(e),D({starting:void 0,ending:void 0})},setCreatedOnTime:e=>{D(e),N({starting:void 0,ending:void 0})}})]}),sortProps:{sortPillProps:{sortProperties:vm,isMenuOpen:b,setIsMenuOpen:j,onApply:e=>{j(!1),y(void 0);const t=e.at(0);m(t?function(e){return{field:e.propertyId===om.id?"pageViews":"uniquePageViews",direction:"descending"===e.direction?"desc":"asc"}}(t):void 0)},currentSorts:w,preventMultipleSorts:!0},sortButtonProps:{appliedSorts:g?[hm(g)]:void 0,openSortPillMenu:e=>{e&&y([{propertyId:e,direction:"descending"}]),j(!0)},sortProperties:vm}},querySearchProps:{mode:Bt().Ke.AnimatedSearchButton,query:R,setQueryFilter:e=>{B(e)}},onExport:async()=>{await(0,Rg().K)({environment:r,spaceId:a.id,organizationId:t,analyticsType:Ng().e.Content,filters:{query:R,daysFilter:n,createdBy:I,teamIds:A,createdTime:(0,Oc().ES)(_),lastEditedTime:(0,Oc().ES)(P)}})}}),(0,i.jsx)(mm,{organizationId:t,spaceStore:a,navigableBlockStores:L,analyticsByPageId:E,runNewSearch:O,loadMoreMethod:F,loading:U,isWorkspaceAnalyticsDisabled:H})]})}function hm(e){return{propertyId:"pageViews"===e.field?om.id:im.id,direction:"desc"===e.direction?"descending":"ascending"}}const fm={field:"pageViews",direction:"desc"},xm=(0,h().YK)({views:{id:"organization.analytics.pageViewTable.viewsColumn.sortHeader",defaultMessage:"All views"},uniqueViews:{id:"organization.analytics.pageViewTable.uniqueViewsColumn.sortHeader",defaultMessage:"Unique views"}}),vm=[{id:om.id,name:M().A.formatMessage(xm.views),type:"number"},{id:im.id,name:M().A.formatMessage(xm.uniqueViews),type:"number"}];var ym=()=>a(854150),bm=()=>a(997583),Sm=()=>a(690197),jm=()=>a(374255),wm=()=>a(807106),Am=()=>a(188668),Mm=()=>a(63964),Cm=()=>a(254685);function Im(e){var t,a,n;let{organizationId:o,spaceStore:r,daysFilter:l}=e;const d=(0,f().v3)(),c=(0,h().tz)(),[u,g]=(0,bm().z)(),{longTallShimmer:m,shortShimmer:p}=(0,R().Z)(),b=(0,pt().T)(),{organizationOwnerRecordCache:S}=(0,s.useContext)(k().N),j=(0,wm().C)({spaceStore:r,userId:b,isOrganizationOwner:!0,daysFilter:l}),{activeMembersCount:w,previousActiveMembersCount:A,activeGuestsCount:M,previousActiveGuestsCount:T,topTeamspaces:_,topViewers:z,topEditors:D}=j.data,N=(0,x().K8)((()=>_.map((e=>{let{teamspaceId:t,pageViews:a}=e;return{store:new(C().h4)(d,{id:t,table:ym().yK},{inMemoryRecordCache:S}),caption:(0,i.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageViews",defaultMessage:"{pageViews} views",values:{pageViews:(0,i.jsx)(fd()._,{abbreviateNumber:!0,num:a})}})}})).filter((e=>e.store.canRead())).slice(0,5)),[d,_,S]),L=(0,x().K8)((()=>z.map((e=>{let{userId:t,pageViews:a}=e;return{store:new(C().LU)(d,{id:t,table:y().oo}),caption:(0,i.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,i.jsx)(fd()._,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[d,z]),E=(0,x().K8)((()=>D.map((e=>{let{userId:t,pageEdits:a}=e;return{store:new(C().LU)(d,{id:t,table:y().oo}),caption:(0,i.jsx)(h().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,i.jsx)(fd()._,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[d,D]),{usersTabData:O}=Eg({spaceStore:r,daysFilter:l}),U=(0,sm().g)({spaceId:r.id,daysFilter:l}),{pageViews:F,uniquePageViews:H,pageEdits:W,topPages:q}=U.data,G=(0,x().K8)((()=>q.map((e=>{let{pageId:t,pageViews:a}=e;return{store:new(C().Bv)(d,{id:t,table:ea().ev},{inMemoryRecordCache:S}),caption:(0,i.jsx)(h().sA,{id:"workspaceAnalytics.overview.contentEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,i.jsx)(fd()._,{abbreviateNumber:!1,num:a})}})}}))),[d,q,S]),K=(0,v().IS)((e=>({twoColumnGridWithGap:{display:"grid",columnGap:16,gridAutoColumns:"minmax(0, 1fr)",gridAutoFlow:"column",width:"100%",marginBottom:-6},twoColumnGridWithNoGap:{display:"grid",columnGap:0,gridAutoColumns:"minmax(0, 1fr)",gridAutoFlow:"column",width:"100%",border:`1px solid ${e.regularDividerColor}`,borderRadius:8,boxShadow:B().v},graphContainer:{width:"100%"},graphDisplayBox:{borderRadius:8,boxShadow:B().v},searchContainer:{width:"100%"},cardTitle:{fontSize:12,alignSelf:"start",color:e.text.secondary,fontWeight:510},analyticsCardListContainer:{border:"0px",borderRadius:0,padding:"14px 16px 14px 16px"},containerWithRightBorder:{borderRight:`1px solid ${e.regularDividerColor}`,height:"100%"},bylineShimmer:{...p,height:17}})),[p]),Y=Math.floor(g-8),Q=(0,x().K8)((()=>Boolean(null==r?void 0:r.getSettings().disable_page_analytics)),[r]),$=(0,x().K8)((()=>null==r?void 0:r.getName()),[r]);return Q?(0,i.jsx)(Bg().H,{type:"disabled",spaceName:$}):"NotFoundError"===(null===(t=U.error)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(a=j.error)||void 0===a?void 0:a.name)||"NotFoundError"===(null==O||null===(n=O.usersAndStatsError)||void 0===n?void 0:n.name)?(0,i.jsx)(Bg().H,{type:"empty",spaceName:$}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"organization.analytics.userEngagement.title",defaultMessage:"User engagement"}),content:(0,i.jsxs)(ae().VP,{gap:16,width:"100%",children:[(0,i.jsxs)("div",{style:K.twoColumnGridWithGap,children:[(0,i.jsx)(_r().LX,{row:1,col:1,children:(0,i.jsx)(ne,{title:(0,i.jsx)(h().sA,{id:"organization.analytics.userEngagement.activeMembers.title",defaultMessage:"Active members"}),content:j.loading?(0,i.jsx)(P().A,{style:m}):(0,i.jsx)(I().D,{styleName:"UITitle-22px/Semibold",children:(0,i.jsx)(h().sA,{id:"organization.analytics.userEngagement.members",defaultMessage:"{activeMembersCount} members",values:{activeMembersCount:(0,i.jsx)(fd()._,{abbreviateNumber:!1,num:w})}})}),byline:j.loading?(0,i.jsx)(P().A,{style:K.bylineShimmer}):void 0!==A?(0,i.jsx)(Am().Z,{userType:"members",daysFilter:l,count:w,previousCount:A}):null,onClick:()=>{Dm({environment:d,organizationId:o,spaceId:r.id,tab:Tm.MemberViews})}})}),(0,i.jsx)(_r().LX,{row:1,col:2,children:(0,i.jsx)(ne,{title:(0,i.jsx)(h().sA,{id:"organization.analytics.userEngagement.activeGuests.title",defaultMessage:"Active guests"}),content:j.loading?(0,i.jsx)(P().A,{style:m}):(0,i.jsx)(I().D,{styleName:"UITitle-22px/Semibold",children:(0,i.jsx)(h().sA,{id:"organization.analytics.userEngagement.guests",defaultMessage:"{activeGuestsCount} guests",values:{activeGuestsCount:(0,i.jsx)(fd()._,{abbreviateNumber:!1,num:M})}})}),byline:j.loading?(0,i.jsx)(P().A,{style:K.bylineShimmer}):void 0!==T?(0,i.jsx)(Am().Z,{userType:"guests",daysFilter:l,count:M,previousCount:T}):null,onClick:void 0})})]}),(0,i.jsx)("div",{style:K.graphContainer,children:(0,i.jsx)(Cm().N,{usersTabData:O,daysFilter:l,intl:c,containerRef:u,widthOfGraph:Y,displayBoxStyle:K.graphDisplayBox,graphTitleStyle:K.cardTitle})}),(0,i.jsxs)("div",{style:K.twoColumnGridWithNoGap,children:[(0,i.jsx)(_r().LX,{row:1,col:1,children:(0,i.jsx)("div",{style:K.containerWithRightBorder,children:(0,i.jsx)(jm().N,{loading:j.loading,error:j.error,title:(0,i.jsx)(h().sA,{id:"organization.analytics.userEngagement.activeViewers",defaultMessage:"Most active viewers"}),items:L,titleStyle:K.cardTitle,containerStyle:K.analyticsCardListContainer})})}),(0,i.jsx)(_r().LX,{row:1,col:2,children:(0,i.jsx)(jm().N,{loading:j.loading,error:j.error,title:(0,i.jsx)(h().sA,{id:"organization.analytics.userEngagement.activeEditors",defaultMessage:"Most active editors"}),items:E,titleStyle:K.cardTitle,containerStyle:K.analyticsCardListContainer})})]})]})}),(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"organization.analytics.contentEngagement.title",defaultMessage:"Content engagement"}),content:(0,i.jsxs)(ae().VP,{gap:16,width:"100%",children:[(0,i.jsxs)("div",{style:K.twoColumnGridWithGap,children:[(0,i.jsx)(_r().LX,{row:1,col:1,children:(0,i.jsx)(ne,{title:(0,i.jsx)(h().sA,{id:"organization.analytics.contentEngagement.pageViews.title",defaultMessage:"Page views"}),content:U.loading?(0,i.jsx)(P().A,{style:m}):(0,i.jsx)(I().D,{styleName:"UITitle-22px/Semibold",children:(0,i.jsx)(h().sA,{id:"organization.analytics.contentEngagement.pageViews",defaultMessage:"{pageViews} total views",values:{pageViews:(0,i.jsx)(fd()._,{abbreviateNumber:!1,num:F})}})}),byline:U.loading?(0,i.jsx)(P().A,{style:K.bylineShimmer}):(0,i.jsx)(h().sA,{id:"organization.analytics.contentEngagement.uniqueViews.title",defaultMessage:"{uniquePageViews, plural, one {{uniquePageViews} unique page viewed} other {{uniquePageViews} unique pages viewed}}",values:{uniquePageViews:(0,i.jsx)(fd()._,{abbreviateNumber:!1,num:H})}}),onClick:()=>Dm({environment:d,organizationId:o,spaceId:r.id,tab:Tm.PageViews})})}),(0,i.jsx)(_r().LX,{row:1,col:2,children:(0,i.jsx)(ne,{title:(0,i.jsx)(h().sA,{id:"organization.analytics.contentEngagement.pageEdits.title",defaultMessage:"Page edits"}),content:U.loading?(0,i.jsx)(P().A,{style:m}):(0,i.jsx)(I().D,{styleName:"UITitle-22px/Semibold",children:(0,i.jsx)(h().sA,{id:"organization.analytics.contentEngagement.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,i.jsx)(fd()._,{abbreviateNumber:!1,num:W})}})}),byline:(0,i.jsx)(i.Fragment,{children:" "}),onClick:void 0})})]}),(0,i.jsxs)("div",{style:K.twoColumnGridWithNoGap,children:[(0,i.jsx)(_r().LX,{row:1,col:1,children:(0,i.jsx)("div",{style:K.containerWithRightBorder,children:(0,i.jsx)(jm().N,{loading:j.loading,error:j.error,title:(0,i.jsx)(h().sA,{id:"organization.analytics.userEngagement.activeTeamspaces",defaultMessage:"Most active teamspaces"}),items:N,titleStyle:K.cardTitle,containerStyle:K.analyticsCardListContainer})})}),(0,i.jsx)(_r().LX,{row:1,col:2,children:(0,i.jsx)(jm().N,{loading:U.loading,error:U.error,title:(0,i.jsx)(h().sA,{id:"workspaceAnalytics.overview.contentEngagement.popularPages",defaultMessage:"Most popular pages"}),items:G,titleStyle:K.cardTitle,containerStyle:K.analyticsCardListContainer})})]})]})}),(0,i.jsx)(se,{title:(0,i.jsxs)(ae().fI,{gap:8,children:[(0,i.jsx)(h().sA,{id:"organization.analytics.searchQueries.title",defaultMessage:"Search queries"}),(0,i.jsx)(V().A,{placement:Ya().W.Bottom,render:e=>(0,i.jsx)(Sm().A,{...e,href:(0,ue().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq"}),renderTooltip:()=>(0,i.jsx)(h().sA,{id:"organization.analytics.searchQueries.tooltip",defaultMessage:"Displays popular search queries in the workspace from the selected date range."})})]}),content:(0,i.jsx)("div",{style:K.searchContainer,children:(0,i.jsx)(Mm().A,{spaceStore:r,hideHeader:!0})})})]})}let Tm=function(e){return e.PageViews="page-views",e.MemberViews="member-views",e}({});const km={[Tm.PageViews]:{title:(0,i.jsx)(h().sA,{id:"organization.analytics.pageViews.title",defaultMessage:"Page views"})},[Tm.MemberViews]:{title:(0,i.jsx)(h().sA,{id:"organization.analytics.memberViews.title",defaultMessage:"Member views"})}};function _m(e){let{spaceId:t,organizationId:a,subtab:n,queryParams:o,tabRoute:r}=e;const l=(0,f().v3)(),d=sa({spaceId:t});kc({spaceId:t,organizationId:a,subtab:n,queryParams:o,tabRoute:r});const c=(0,s.useMemo)((()=>n?function(e){switch(e){case Tm.MemberViews:return Tm.MemberViews;case Tm.PageViews:return Tm.PageViews;default:return Tm.MemberViews}}(n):void 0),[n]),[u,g]=(0,s.useState)(Yg);if(!d||!t||!a)return null;let m=null;switch(c){case Tm.MemberViews:m=(0,i.jsx)(Xg,{organizationId:a,spaceStore:d,daysFilter:u,setDaysFilter:g});break;case Tm.PageViews:m=(0,i.jsx)(pm,{organizationId:a,spaceStore:d,daysFilter:u,setDaysFilter:g})}return m&&c?(0,i.jsx)(Nd().D,{breadcrumbs:[{onClick:()=>{(0,xd().i)({environment:l,from:{tabRoute:Xt().Tr},organizationId:a,tabRoute:Xt().Tr,queryParams:o})},message:(0,i.jsx)(h().sA,{id:"organization.analytics.breadcrumb.goBack",defaultMessage:"Analytics"})},{message:km[c].title}],children:m}):(0,i.jsx)(zm,{organizationId:a,spaceStore:d,daysFilter:u,setDaysFilter:g})}function zm(e){let{organizationId:t,spaceStore:a,daysFilter:s,setDaysFilter:n}=e;const o=(0,v().IS)((e=>({divider:{color:e.stroke.secondary,marginTop:16,marginBottom:16}})),[]);return(0,i.jsxs)(Rd,{children:[(0,i.jsx)($g,{organizationId:t,spaceStore:a,daysFilter:s,setDaysFilter:n,title:(0,i.jsx)(h().sA,{id:"organization.analytics.title",defaultMessage:"Analytics"}),byline:(0,i.jsx)(h().sA,{id:"organization.analytics.byline",defaultMessage:"Overview of how your organization is engaging with content across the workspace"})}),(0,i.jsx)(kr().A,{size:1,style:o.divider,dividerColor:o.divider.color}),(0,i.jsx)(Im,{organizationId:t,spaceStore:a,daysFilter:s})]})}function Dm(e){const{environment:t,organizationId:a,spaceId:s,tab:n}=e;(0,xd().i)({environment:t,from:{tabRoute:Xt().Tr},organizationId:a,tabRoute:Xt().Tr,properties:{subtab:n},queryParams:{[Xf]:s}})}var Pm=()=>a(564766),Nm=()=>a(755636),Rm=()=>a(920093),Bm=()=>a(496414);function Lm(e){let{organizationStore:t}=e;const a=(0,f().v3)(),s=(0,h().tz)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(De().Y,{}),(0,i.jsx)(Re,{title:(0,i.jsx)(h().sA,{id:"organization.settings.deleteOrganization.title",defaultMessage:"Delete organization"}),byline:(0,i.jsx)(h().sA,{id:"organization.settings.deleteOrganization.caption",defaultMessage:"To confirm deletion, you’ll need to enter the organization name"}),buttonLabel:(0,i.jsx)(h().sA,{id:"organization.settings.deleteOrganization.button",defaultMessage:"Delete organization"}),type:"danger",onClick:async()=>{await async function(e,t,a){const{currentUserSettingsStore:s}=pe().default.state;if(!s)return;const n=e.getName()||t.formatMessage({defaultMessage:"Untitled organization",id:"organization.settings.deleteOrganization.untitledOrganization.placeholder"}),o=(0,i.jsx)(h().sA,{id:"organization.settings.deleteOrganization.confirmation.prompt",defaultMessage:"This will permanently delete the organization, including any security settings and verified domains. Workspaces will not be deleted. Please type the name of the organization to confirm."});if(await Rm().h({title:(0,i.jsx)(h().sA,{id:"organization.settings.deleteOrganization.confirmation.title",defaultMessage:"Delete this organization permanently?"}),message:o,acceptLabel:(0,i.jsx)(h().sA,{id:"organization.settings.deleteOrganization.confirmation.button",defaultMessage:"Permanently delete organization"}),requiredInputValue:n})){Bm().m({message:Em.deletingOrganization});try{const s=await S().callApi({eventName:"deleteOrganization",environment:a,data:{organizationId:e.id}});if("success"!==s.type)return void j().f1((0,A().Hu)(t,s));_e().oo({environment:a,url:Te().JZ.root})}finally{Bm().V()}}}(t,s,a)},modal:null})]})}const Em=(0,h().YK)({deletingOrganization:{id:"organization.deleting.loading",defaultMessage:"Deleting organization..."}});var Om=()=>a(566534);const Um=1,Fm=Ze().q;function Hm(e){const{environment:t,organizationId:a,filters:s,appliedSorts:n,query:o}=e,i=Object.keys($e().fN(s,(e=>Boolean(e)&&(null==e?void 0:e.length))));(0,w().u)({environment:t,event:{eventName:"org_console_general_table_query",eventProperties:{table:"spaces",organization_id:a,filter_keys:i.length?i:void 0,sort_columns:null==n?void 0:n.map((e=>e.propertyId)),has_query:Boolean(o)}}})}function Vm(e,t){const a=(0,f().v3)(),[n,o]=(0,s.useState)({}),[i,r]=(0,s.useState)(),[l,d]=(0,s.useState)(""),[c,u]=(0,s.useState)(Um);(0,s.useEffect)((()=>{Hm({organizationId:t,environment:a})}),[t,a]);const g=(0,s.useCallback)((e=>{o((t=>({...t,...e}))),u(Um),Hm({organizationId:t,environment:a,filters:{...n,...e},appliedSorts:i,query:l})}),[a,t,n,i,l]),m=(0,s.useCallback)((e=>{r(e),u(Um),Hm({organizationId:t,environment:a,filters:n,appliedSorts:e,query:l})}),[a,t,n,l]),p=(0,s.useCallback)((e=>{d(e),u(Um),Hm({organizationId:t,environment:a,filters:n,appliedSorts:i,query:e})}),[a,t,n,i]),h=(0,x().K8)((()=>{if(!e)return[];let t=e;l&&(t=(0,ut().Ay)(l,t,(e=>e.spaceName)));const a=[];return n.spaceIds&&n.spaceIds.length>0&&(t=t.filter((e=>{var t;return null===(t=n.spaceIds)||void 0===t?void 0:t.includes(e.id)})),a.push("spaceIds")),n.owners&&n.owners.length>0&&(t=t.filter((e=>e.owners.some((e=>{var t;return null===(t=n.owners)||void 0===t?void 0:t.includes(e)})))),a.push("owners")),function(e){let{rows:t,appliedSorts:a}=e;const s=null!=a&&a.length?a:[{propertyId:wp,direction:"ascending"}],n=s.map((e=>{let{propertyId:t}=e;return t===Ip.id?"memberCount":t===Tp.id?"guestCount":t===kp.id?e=>M().A.formatMessage((0,Bl().MG)(e.location)):e=>e.spaceName.toLowerCase()})),o=s.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,Pe().HB)(t)}));return $e().My(t,n,o)}({rows:t,appliedSorts:i})}),[e,n.spaceIds,n.owners,l,i]),v=(0,s.useMemo)((()=>{const e=(c-1)*Fm,t=e+Fm;return h.slice(e,t)}),[h,c]),y=(0,s.useMemo)((()=>c*Fm<h.length),[h,c]),b=c>Um,S=(0,s.useCallback)((()=>{y&&u((e=>e+1))}),[y]),j=(0,s.useCallback)((()=>{b&&u((e=>e-1))}),[b]);return{filters:n,updateFilters:g,query:l,setQuery:p,paginatedRows:v,appliedSorts:i,setAppliedSorts:m,loadNextPage:S,loadPrevPage:j,hasNextPage:y,hasPrevPage:b,currentPage:c}}const Wm={};var qm=()=>a(818211);const Gm={viewBox:"0 0 20 20",fittedViewBox:"2.96 1.99 14.08 15.13",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M6.75 2.545a.55.55 0 0 1 .55-.55h5.4a.55.55 0 0 1 0 1.1H7.3a.55.55 0 0 1-.55-.55m-1.25 1.7a.55.55 0 1 0 0 1.1h9a.55.55 0 0 0 0-1.1zm7.036 5.847a.625.625 0 1 0-1.072-.643l-1.953 3.256-1.036-1.208a.625.625 0 1 0-.95.813l1.6 1.867a.625.625 0 0 0 1.011-.085z"}),(0,i.jsx)("path",{d:"M5.088 6.42a2.125 2.125 0 0 0-2.125 2.125v6.45c0 1.174.951 2.125 2.125 2.125h9.825a2.125 2.125 0 0 0 2.125-2.125v-6.45a2.125 2.125 0 0 0-2.125-2.125zm-.875 2.125c0-.483.392-.875.875-.875h9.825c.483 0 .875.392.875.875v6.45a.875.875 0 0 1-.875.875H5.088a.875.875 0 0 1-.875-.875z"})]})},Km=(0,o().wt)("checkStack",Gm),Ym=(0,o().wt)("personTransfer",{viewBox:"0 0 26 20",svg:(0,i.jsx)("path",{d:"M5.918 10.085q-.738 0-1.347-.39a2.9 2.9 0 0 1-.964-1.039A3 3 0 0 1 3.252 7.2a2.85 2.85 0 0 1 1.32-2.44 2.5 2.5 0 0 1 1.346-.383q.732 0 1.333.376.61.375.97 1.018.363.643.363 1.43a2.92 2.92 0 0 1-1.333 2.494 2.4 2.4 0 0 1-1.333.39m0-1.155q.396 0 .725-.226.334-.232.533-.622.204-.39.205-.882 0-.485-.205-.861a1.5 1.5 0 0 0-.533-.588 1.3 1.3 0 0 0-.725-.219 1.3 1.3 0 0 0-.738.219 1.6 1.6 0 0 0-.527.602 1.8 1.8 0 0 0-.198.847q0 .5.198.889.198.39.527.615.335.226.738.226m-3.562 6.795q-.78 0-1.175-.267-.397-.267-.397-.82 0-.622.349-1.3.349-.675 1.012-1.264.663-.587 1.613-.95c.95-.363 1.351-.362 2.153-.362s1.518.12 2.147.362a5.2 5.2 0 0 1 1.613.95 4.4 4.4 0 0 1 1.019 1.265q.348.677.348 1.299 0 .553-.396.82-.398.267-1.176.267zm-.177-1.156h7.465q.13 0 .13-.116 0-.321-.24-.752a3 3 0 0 0-.724-.834 4 4 0 0 0-1.204-.683q-.724-.274-1.695-.274-.963 0-1.688.274a4.1 4.1 0 0 0-1.21.683 3.1 3.1 0 0 0-.732.834q-.24.43-.239.752 0 .116.137.116m17.91-4.457q-.738 0-1.347-.383a2.9 2.9 0 0 1-.964-1.045 3 3 0 0 1-.355-1.456q0-.773.355-1.415.363-.643.964-1.026a2.5 2.5 0 0 1 1.347-.383q.738 0 1.34.383.608.375.964 1.019.362.635.362 1.422 0 .8-.362 1.456a2.9 2.9 0 0 1-.971 1.039 2.4 2.4 0 0 1-1.333.39Zm0-1.155q.404 0 .731-.226.336-.232.527-.622.198-.39.198-.881 0-.486-.198-.862a1.47 1.47 0 0 0-.527-.588 1.3 1.3 0 0 0-.731-.218q-.404 0-.738.218a1.6 1.6 0 0 0-.527.602 1.8 1.8 0 0 0-.198.848q0 .498.198.888c.198.39.308.465.527.615q.334.226.738.226m-3.562 6.795q-.78 0-1.175-.267-.39-.265-.39-.82 0-.622.342-1.299.349-.676 1.011-1.258a5.2 5.2 0 0 1 1.614-.95q.949-.369 2.153-.369 1.203 0 2.153.37a5.2 5.2 0 0 1 1.614.95 4.3 4.3 0 0 1 1.011 1.257q.35.677.349 1.299 0 .555-.396.82-.398.267-1.176.267zm-.177-1.155h7.464q.137 0 .137-.117 0-.32-.246-.752a3 3 0 0 0-.724-.833 4 4 0 0 0-1.21-.677q-.725-.274-1.689-.274-.97 0-1.695.274a4 4 0 0 0-1.21.677 3 3 0 0 0-.718.834q-.24.43-.24.752 0 .116.13.116Zm-5.695-4.423a.63.63 0 0 1-.45-.185.63.63 0 0 1-.192-.458q0-.266.191-.458a.62.62 0 0 1 .451-.191.6.6 0 0 1 .458.191q.192.191.192.458c0 .267-.064.33-.192.458a.62.62 0 0 1-.458.185m2.345 0a.64.64 0 0 1-.458-.185.64.64 0 0 1-.185-.458.64.64 0 0 1 .185-.458.63.63 0 0 1 .458-.191q.267 0 .458.191.192.191.191.458c-.001.267-.063.33-.191.458a.64.64 0 0 1-.458.185m2.338 0a.64.64 0 0 1-.458-.185.64.64 0 0 1-.185-.458.64.64 0 0 1 .185-.458.63.63 0 0 1 .458-.191q.26 0 .451.191.192.191.191.458c-.001.267-.063.33-.19.458a.63.63 0 0 1-.452.185"})}),Qm={claimableSpaces:[],filters:{query:""},loading:!1,error:void 0,nextEarliestCreatedAt:Date.now(),hasNextPage:!0};function $m(e){let{organizationId:t}=e;const a=(0,f().v3)(),[n,o]=(0,s.useState)(Qm),i=(0,s.useRef)(!1),r=(0,s.useRef)({}),l=(0,s.useCallback)((async e=>{let{nextEarliestCreatedAt:s,filters:n}=e;try{const{spaces:e,earliestCreatedAt:i,hasMoreSpaces:r}=await async function(e){const{environment:t,organizationId:a,emailDomains:s,spaceCreatedTimeUpperBound:n,memberCountFilter:o,query:i}=e,r=await S().callApi({eventName:"getClaimableWorkspacesInOrganization",environment:t,data:{organizationId:a,emailDomains:s,memberCountFilter:o,spaceCreatedTimeUpperBound:n,limit:Ze().q,filters:{query:i}}});if("failed"===r.type)throw r.error;return{spaces:r.data.results.map((e=>({id:e.id,name:e.spaceName,icon:e.spaceIcon,createdAt:e.spaceCreatedTime,memberCount:e.memberCount,subscriptionTier:e.subscriptionTier,creatorEmailDomain:e.spaceCreatedByDomain,creator:e.spaceCreator,admins:e.admins,spaceRequest:e.spaceRequest,isDelinquent:e.isDelinquent,isPendingBilling:e.isPendingBilling,isActorInSpace:e.isActorInSpace}))),earliestCreatedAt:r.data.hasMoreSpaces?r.data.earliestCreatedAt:void 0,hasMoreSpaces:r.data.hasMoreSpaces}}({environment:a,organizationId:t,emailDomains:n.emailDomains,memberCountFilter:n.memberCountFilter,query:n.query,spaceCreatedTimeUpperBound:s?s-1:Date.now()});o((t=>({...t,loading:!1,error:void 0,claimableSpaces:t.claimableSpaces.concat(e),nextEarliestCreatedAt:i,hasNextPage:r})))}catch(i){const e=(0,Ss().A)(i);o((t=>({...t,loading:!1,error:e})))}}),[a,t]),d=(0,s.useCallback)((async e=>{let{restartSearch:a,nextEarliestCreatedAt:s}=e;if(!t)return;let i=n.loading,d=n.error;a&&(o((e=>({...Qm,filters:e.filters}))),i=Qm.loading,d=Qm.error),i||d||(o((e=>({...e,loading:!0}))),r.current=n.filters,await l({nextEarliestCreatedAt:s,filters:n.filters}))}),[t,n,l]);(0,s.useEffect)((()=>{!i.current&&Boolean(t)&&(d({restartSearch:!0}),i.current=!0)}),[t,d]),(0,s.useEffect)((()=>{$e().n4(r.current,n.filters)||d({restartSearch:!0})}),[n.filters,d]);const c=(0,s.useCallback)((async()=>{if(n.hasNextPage)return d({restartSearch:!1,nextEarliestCreatedAt:n.nextEarliestCreatedAt})}),[d,n.hasNextPage,n.nextEarliestCreatedAt]),u=(0,s.useCallback)((e=>{o((t=>({...t,filters:{...t.filters,...e}})))}),[]),g=(0,s.useCallback)((e=>(o((t=>({...t,loading:Boolean(e),claimableSpaces:[]}))),d({restartSearch:!0}))),[d]);return{loadNextPage:c,claimableSpaces:n.claimableSpaces,nextEarliestCreatedAt:n.nextEarliestCreatedAt,filters:n.filters,loading:n.loading,error:n.error,hasNextPage:n.hasNextPage,setFilters:u,refreshPage:g}}function Xm(e){let{selectedMemberCountType:t,setSelectedMemberCountType:a}=e;return(0,i.jsx)(qs().G0,{pillTitle:(0,i.jsx)(h().sA,{id:"filters.memberCountType.title",defaultMessage:"Member count"}),pillIcon:u().peopleIcon,selectedItem:t,setSelectedItem:a,items:Zm,shouldUseCheck:!0})}const Zm=[{key:"one",value:"single",title:(0,i.jsx)(h().sA,{id:"filters.memberCountType.option.single.title",defaultMessage:"Single member"}),shortTitle:(0,i.jsx)(h().sA,{id:"filters.memberCountType.option.single.title",defaultMessage:"Single member"})},{key:"multi",value:"multi",title:(0,i.jsx)(h().sA,{id:"filters.memberCountType.option.multi.title",defaultMessage:"Multiple members"}),shortTitle:(0,i.jsx)(h().sA,{id:"filters.memberCountType.option.multi.title",defaultMessage:"Multiple members"})}];var Jm=()=>a(454503);function ep(e){let{spaceId:t,spaceName:a,spaceIcon:s,shouldAccountForMultiselect:n,rightContent:o,badge:r}=e;const l=s?{pointer:{table:aa().NX,id:t,spaceId:t},icon:s}:void 0;return(0,i.jsx)(Rt().s7,{icon:(0,i.jsx)(N().B6,{disabled:!0,icon:l,iconRecordCategory:"workspace",isEmptyPage:!1,size:28,title:a,isLarge:!0,emojiSize:24,isRaw:!1}),title:a,badge:r,rightContent:o,summaryStyles:{paddingBlock:8,overflow:"hidden"},containerStyles:{width:`calc(100% - ${n?Nt().Gr:0}px)`}})}var tp=()=>a(379990);async function ap(e){const{spaceIds:t,fn:a,successMessage:s}=e,n=(0,Je().lX)(t,Ze().O,(async e=>a(e))),o=await n;return function(e){const{responses:t,successMessage:a}=e,s=t.find((e=>"failed"===(null==e?void 0:e.type)));if(s)return j().f1((0,A().Hu)(M().A.getIntl(),s));if(a)nt().D6({label:a})}({responses:o,successMessage:s}),o}function sp(e){const{spaces:t}=e,a=(0,v().IS)((e=>({workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,boxSizing:"border-box",padding:"0 12px",width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column",maxHeight:200,overflowY:"auto"},content:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",width:"100%"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.icon.secondary,height:16,width:16}})),[]);return(0,i.jsx)("div",{style:a.workspaceContainer,children:t.map((e=>(0,i.jsxs)("div",{style:a.content,children:[(0,i.jsx)(tp().H,{id:e.id,name:e.name,icon:e.icon,subscriptionTier:e.subscriptionTier,memberCount:e.memberCount}),(0,i.jsx)("div",{style:a.checkContainer,children:(0,Sg().checkmarkIcon)(a.check)})]},e.id)))})}function np(e){let{organizationId:t,claimableSpaces:a,onDismiss:n,onRefresh:o}=e;const r=(0,f().v3)(),l=(0,v().IS)((e=>({icon:{height:32,width:32},content:{display:"flex",flexDirection:"column",width:440,justifyContent:"center",alignItems:"center",gap:q().gA}})),[]);const[d,c]=(0,s.useState)(!1);return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(O().tf,{header:(0,i.jsx)(q().rQ,{icon:(0,Jm().arrowUTurnUpLeftIcon)(l.icon),title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.cancelScheduleDeletion.title",defaultMessage:"Recover workspace?"}),byline:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.cancelScheduleDeletion.byline",defaultMessage:"Restore workspace content, the workspace owner’s access, and cancel the scheduled permanent deletion."}),bylineWidthOverride:"90%"}),footer:(0,i.jsx)(q().jl,{primaryDisabled:d,primaryText:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.cancelScheduleDeletion.button.primary",defaultMessage:"Recover workspace"}),primaryAction:async()=>{c(!0),await async function(){await ap({spaceIds:a.map((e=>e.id)),fn:async e=>S().callApi({eventName:"cancelSpaceDeletionForOrganizationDomain",environment:r,data:{organizationId:t,targetSpaceId:e}}),successMessage:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.cancelScheduleDeletion.saveSuccess",defaultMessage:"Successfully canceled the scheduled deletion of {count, plural, one {# workspace} other {# workspaces}}",values:{count:a.length}})}),await o(),n()}(),c(!1)},secondaryText:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.cancelScheduleDeletion.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsx)("div",{style:l.content,children:(0,i.jsx)(sp,{spaces:a})})})})}var op=()=>a(911259),ip=()=>a(846523),rp=()=>a(852507);function lp(){const e=(0,f().v3)(),t=(0,h().tz)(),[a,n]=(0,s.useState)(!1),{samlConfigs:o,loadSamlConfigs:r,refreshSamlConfigs:l}=(0,s.useContext)(_().D),d=o.at(0),c=(0,x().K8)((()=>!!d&&(0,Pm().J4)({samlConfigStatus:d.status,emailDomains:d.emailDomains,idp_metadata:d.idpMetadata,idp_metadata_url:d.idpMetadataUrl})),[d]);(0,rp().w)((()=>{r()}));const u=(0,s.useCallback)((async(a,s)=>{n(!0);const o=await S().callApi({eventName:"setSamlConfig",environment:e,data:{spaceId:a,...s}});return"failed"===o.type?(j().f1((0,A().Hu)(t,o)),n(!1),!1):(await l(),n(!1),nt().D6({label:(0,i.jsx)(h().sA,{id:"organization.general.saml.settings.saveChanges.toast.success",defaultMessage:"Successfully updated SAML configuration"})}),!0)}),[e,l,t]);return{samlConfig:d,isEnabled:c,refreshSamlConfigs:l,updateSamlConfig:u,loading:a}}function dp(e){let{organizationId:t,claimableSpaces:a,onDismiss:n,onRefresh:o}=e;const{isEnabled:r}=lp(),l=(0,f().v3)(),d=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},content:{width:q().J2,display:"flex",flexDirection:"column",gap:20}})),[]);const[c,u]=(0,s.useState)(!1);return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(O().tf,{header:(0,i.jsx)(q().rQ,{icon:(0,op().arrowInCircleUpIcon)(d.icon),title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.title",defaultMessage:"Add workspace to organization?"}),byline:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.byline",defaultMessage:"Send a request to claim ownership of this workspace. Once approved, it will be added to your organization."}),bylineWidthOverride:"90%"}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.button.primary",defaultMessage:"Send request"}),primaryAction:async()=>{u(!0),await async function(){await ap({spaceIds:a.map((e=>e.id)),fn:async e=>S().callApi({eventName:"requestClaimForSalesAssisted",environment:l,data:{requestingOrganizationId:t,targetSpaceId:e}}),successMessage:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.saveSuccess",defaultMessage:"Successfully requested to add {count, plural, one {# workspace} other {# workspaces}}",values:{count:a.length}})}),await o(),n()}(),u(!1)},primaryDisabled:c,secondaryText:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsxs)("div",{style:d.content,children:[(0,i.jsx)(sp,{spaces:a}),r?(0,i.jsx)(Kr().l,{iconGroup:ip().u,display:"inline",tint:"gray",label:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.samlWarning.label",defaultMessage:"Your organization’s SAML will be applied to this workspace"}),description:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.claimSpace.samlWarning.description",defaultMessage:"All workspaces added to this organization will inherit the organization’s existing SAML configuration."})}):null]})})})}var cp=()=>a(701787);function up(e){let{organizationId:t,claimableSpaces:a,onDismiss:n,onRefresh:o}=e;const r=(0,f().v3)(),l=(0,h().tz)(),[d,c]=(0,s.useState)(!1),[u,g]=(0,s.useState)(),[m,p]=(0,s.useState)(!0),x=(0,v().IS)((e=>({icon:{height:32,fill:e.icon.secondary},content:{width:440,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:q().gA},confirmation:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center",gap:10}})),[]);function y(){const e=(0,ct().qh)(u);return p((0,ct().DT)(e)),e}const[b,j]=(0,s.useState)(!1);return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(O().tf,{header:(0,i.jsx)(q().rQ,{icon:Ym(x.icon),title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.title",defaultMessage:"Request transfer"}),byline:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.byline",defaultMessage:"Request the workspace owner to transfer this workspace to a personal account. Access will be restricted until transfer is complete."}),bylineWidthOverride:"85%"}),footer:(0,i.jsx)(q().jl,{primaryDisabled:!d||b||!m||!u,primaryText:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.button.primary",defaultMessage:"Request transfer"}),primaryAction:async()=>{j(!0),await async function(){const e=y();e&&(await ap({spaceIds:a.map((e=>e.id)),fn:async a=>S().callApi({eventName:"initiateOrganizationSpaceTransfer",environment:r,data:{organizationId:t,targetSpaceId:a,contactEmail:e}}),successMessage:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.saveSuccess",defaultMessage:"Successfully requested transfer for {count, plural, one {# workspace} other {# workspaces}}",values:{count:a.length}})}),await o(),n())}(),j(!1)},secondaryText:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsxs)("div",{style:x.content,children:[(0,i.jsx)(sp,{spaces:a}),(0,i.jsx)(cp().p,{value:u,onChange:e=>g(e.target.value),onBlur:y,placeholder:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.requestTransfer.placeholder",defaultMessage:"admin@example.com"}),labelMessage:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.requestTransfer.contactEmailInput",defaultMessage:"Assign a contact for inquiries"}),helpMessage:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.requestTransfer.helpMessage",defaultMessage:"The Workspace Owner of the transfer requested workspace can contact this email for inquiries"}),errorMessage:m?void 0:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.requestTransfer.errorMessage",defaultMessage:"Invalid email address"})}),(0,i.jsxs)("div",{style:x.confirmation,children:[(0,i.jsx)(ot().T,{checked:d,size:14,onClick:()=>c((e=>!e))}),(0,i.jsx)(I().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.requestTransfer.confirmationCheckbox",defaultMessage:"I understand this cannot be undone"})})]})]})})})}function gp(e){let{organizationId:t,claimableSpaces:a,onDismiss:n,onRefresh:o}=e;const r=(0,f().v3)(),l=(0,h().tz)(),[d,c]=(0,s.useState)(!1),[u,g]=(0,s.useState)(),[m,p]=(0,s.useState)(!0),x=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.uiRedPrimary},content:{display:"flex",flexDirection:"column",width:440,justifyContent:"center",alignItems:"center",gap:q().gA},confirmation:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center",gap:10}})),[]);function y(){const e=(0,ct().qh)(u);return p((0,ct().DT)(e)),e}const[b,j]=(0,s.useState)(!1);return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:n,render:()=>(0,i.jsx)(O().tf,{header:(0,i.jsx)(q().rQ,{icon:(0,Pt().trashIcon)(x.icon),title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.title",defaultMessage:"Delete workspace?"}),byline:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.byline",defaultMessage:"Schedule this workspace deletion in 30 days, revoking access for all users and notifying workspace owners."}),bylineWidthOverride:"90%"}),footer:(0,i.jsx)(q().jl,{isDarkRed:!0,primaryDisabled:!d||b||!m||!u,primaryText:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.button.primary",defaultMessage:"Schedule deletion"}),primaryAction:async()=>{j(!0),await async function(){const e=y();e&&(await ap({spaceIds:a.map((e=>e.id)),fn:async a=>S().callApi({eventName:"deleteSpaceForOrganizationDomain",environment:r,data:{organizationId:t,targetSpaceId:a,contactEmail:e}}),successMessage:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.saveSuccess",defaultMessage:"Successfully scheduled to delete {count, plural, one {# workspace} other {# workspaces}}",values:{count:a.length}})}),await o(),n())}(),j(!1)},secondaryText:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.button.cancel",defaultMessage:"Cancel"}),secondaryAction:n}),children:(0,i.jsxs)("div",{style:x.content,children:[(0,i.jsx)(sp,{spaces:a}),(0,i.jsx)(cp().p,{value:u,onChange:e=>g(e.target.value),onBlur:y,placeholder:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.placeholder",defaultMessage:"admin@example.com"}),labelMessage:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.contactEmailInput",defaultMessage:"Assign a contact for inquiries"}),helpMessage:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.helpMessage",defaultMessage:"The Workspace Owner of the deleted workspace can contact this email for inquiries"}),errorMessage:m?void 0:l.formatMessage({id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.errorMessage",defaultMessage:"Invalid email address"})}),(0,i.jsxs)("div",{style:x.confirmation,children:[(0,i.jsx)(ot().T,{checked:d,size:14,onClick:()=>c((e=>!e))}),(0,i.jsx)(I().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.action.innerModal.scheduleDeletion.confirmationCheckbox",defaultMessage:"I understand this cannot be undone after the 30-day period"})})]})]})})})}const mp=[{id:"name",headerTitle:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(ca,{}):(0,i.jsx)(ep,{shouldAccountForMultiselect:!0,rightContent:(0,i.jsx)(fp,{claimableSpace:e.claimableSpace,setSelectedSpaceId:e.setSelectedSpaceId,setOpenedModal:e.setOpenedModal}),spaceId:e.claimableSpace.id,spaceName:e.claimableSpace.name,spaceIcon:e.claimableSpace.icon,badge:e.claimableSpace.spaceRequest?(0,i.jsx)(xp,{claimableSpace:e.claimableSpace}):void 0}),widthData:{width:300,maxWidth:300},sortable:!1,shouldShowSortTooltip:!1},{id:"plan",headerTitle:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.plan.header",defaultMessage:"Plan"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:100}}):(0,i.jsx)(Rt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,tp().K)(e.claimableSpace.subscriptionTier,M().A.getIntl())}),widthData:{widthPercent:15,minWidth:40},sortable:!1,shouldShowSortTooltip:!1},{id:"memberCount",headerTitle:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.memberCount.header",defaultMessage:"Members"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:120}}):(0,i.jsx)(Rt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.memberCount.count",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:e.claimableSpace.memberCount}})}),widthData:{widthPercent:15,minWidth:40},sortable:!1,shouldShowSortTooltip:!1},{id:"domain",headerTitle:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.domain.header",defaultMessage:"Verified email domain"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:200}}):(0,i.jsx)(Rt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.domain.email",defaultMessage:"@{domain}",values:{domain:e.claimableSpace.creatorEmailDomain}})}),widthData:{widthPercent:20,minWidth:70},sortable:!1,shouldShowSortTooltip:!1},{id:"owners",headerTitle:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.owners.header",defaultMessage:"Workspace owners"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(kn().p,{}):e.workspaceOwnerUserStores.length>0?(0,i.jsx)(kn().l,{isClickable:!0,userStores:e.workspaceOwnerUserStores}):(0,i.jsx)(Rt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.owners.noOwners",defaultMessage:"Nobody"})}),hasClickableContents:!0,widthData:{widthPercent:15,minWidth:40},sortable:!1,shouldShowSortTooltip:!1},{id:"createdBy",headerTitle:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.createdBy.header",defaultMessage:"Created by"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(kn().p,{}):e.claimableSpace.creator?(0,i.jsx)(kn().l,{isClickable:!0,userStores:[e.createdByUserStore]}):(0,i.jsx)(Rt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.createdBy.deletedUser",defaultMessage:"Deleted user"})}),hasClickableContents:!0,widthData:{widthPercent:20,minWidth:70},sortable:!1,shouldShowSortTooltip:!1},{id:"createdOn",headerTitle:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.createdOn.header",defaultMessage:"Created on"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:80}}):(0,i.jsx)(Yo().d,{useSecondaryColorTitle:!0,dateTs:e.claimableSpace.createdAt}),widthData:{widthPercent:20,minWidth:70},sortable:!1,shouldShowSortTooltip:!1}];var pp=function(e){return e.AddWorkspace="add-workspace",e.RequestTransfer="request-transfer",e.ScheduleDeletion="schedule-deletion",e.CancelScheduleDeletion="cancel-schedule-deletion",e}(pp||{});function hp(e){let{organizationId:t,claimableSpaces:a,hasMoreResults:n,onLoadMoreResults:o,refreshPage:r,loading:l,error:d,selectedIds:c,onSelectAll:u,onUnselectAll:g,onSelectRow:m}=e;const x=(0,f().v3)(),[b,S]=(0,s.useState)(),[j,w]=(0,s.useState)(),A=(0,Vt().A)(),M=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:mp,theme:e,containerMarginTop:0})),[]),I=(0,s.useMemo)((()=>a.map((e=>({id:e.id,type:Qt().T.OrganizationClaimableWorkspace,claimableSpace:e,createdByUserStore:e.creator?new(C().LU)(x,{table:y().oo,id:e.creator.id}):void 0,workspaceOwnerUserStores:e.admins.map((e=>new(C().LU)(x,{table:y().oo,id:e.id}))),setSelectedSpaceId:S,setOpenedModal:w,isClickable:!0})))),[a,x]),T=l?0===I.length?(0,Qt().n)():[...I,...(0,Qt().n)(3)]:I,k=mp.map((e=>({...e,headerStyle:A.tableHeaderForModal,rowStyle:A.tableRowForModal}))),_={header:{isDisabled:l,isSelected:c.length>0&&c.length===a.length,onClick:()=>{c.length===a.length?g():u()}},row:{getDisabledState:e=>l,getSelectedState:e=>e.type===Qt().T.OrganizationClaimableWorkspace&&c.includes(e.claimableSpace.id),onClick:e=>{e.type===Qt().T.OrganizationClaimableWorkspace&&m(e.claimableSpace.id)}}},z=b?a.find((e=>e.id===b)):void 0;return!l&&d?(0,i.jsx)(Kt,{error:d,runNewSearch:r}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Nt().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:k,rows:T,styles:M,onRowClick:e=>m(e.id),multiselect:_,loadMoreMethod:!l&&n?{type:"button",onLoadMore:o}:void 0,renderNoRowsComponent:()=>(0,i.jsx)(qt,{icon:p().V,title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.empty.title",defaultMessage:"No workspaces found"}),byline:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.empty.byline",defaultMessage:"There are no workspaces that match this query"})})}),j===pp.AddWorkspace&&z?(0,i.jsx)(dp,{organizationId:t,claimableSpaces:[z],onDismiss:()=>w(void 0),onRefresh:r}):null,j===pp.RequestTransfer&&z?(0,i.jsx)(up,{organizationId:t,claimableSpaces:[z],onDismiss:()=>w(void 0),onRefresh:r}):null,j===pp.ScheduleDeletion&&z?(0,i.jsx)(gp,{organizationId:t,claimableSpaces:[z],onDismiss:()=>w(void 0),onRefresh:r}):null,j===pp.CancelScheduleDeletion&&z?(0,i.jsx)(np,{organizationId:t,claimableSpaces:[z],onDismiss:()=>w(void 0),onRefresh:r}):null]})}function fp(e){const{claimableSpace:t,setSelectedSpaceId:a,setOpenedModal:s}=e,n=(0,v().IS)((()=>({icon20x20:{height:20,width:20,fill:"currentColor"}})),[]),o=(0,b().zq)(t.spaceRequest)?{key:"cancel-schedule-deletion",type:"action",icon:(0,Jm().arrowUTurnUpLeftIcon)(n.icon20x20),title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.menuActions.cancelScheduleDeletion",defaultMessage:"Cancel deletion"}),caption:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.menuActions.cancelScheduleDeletion.caption",defaultMessage:"Cancel the scheduled deletion of this workspace."}),disabled:!1,tooltipDisabled:!0,action:()=>{s(pp.CancelScheduleDeletion),a(t.id)}}:{key:"schedule-deletion",type:"action",icon:(0,Pt().trashIcon)(n.icon20x20),title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.menuActions.scheduleDeletion",defaultMessage:"Schedule deletion"}),caption:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.menuActions.scheduleDeletion.caption",defaultMessage:"Schedule for 30-day deletion, revoke access, and notify owners."}),disabled:(0,qm().eG)(t)||(0,qm().NK)(t)||(0,qm().t_)(t),tooltipTitle:(0,qm().t_)(t)?(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.menuActions.scheduleDeletion.disabledTooltip.notFreeTier",defaultMessage:"Only workspaces on the free tier are eligible for deletion."}):(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.menuActions.scheduleDeletion.disabledTooltip",defaultMessage:"You can only delete workspaces with one member and have no pending requests."}),tooltipDisabled:(0,qm().Rx)(t)&&!(0,qm().NK)(t)&&!(0,qm().t_)(t),action:()=>{s(pp.ScheduleDeletion),a(t.id)}},r=[{key:"add-workspace",type:"action",icon:Km(n.icon20x20),title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.menuActions.addWorkspace",defaultMessage:"Add workspace"}),caption:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.menuActions.addWorkspace.caption",defaultMessage:"Claim ownership and add this workspace to your organization."}),disabled:(0,qm().Rx)(t)||(0,qm().NK)(t),tooltipTitle:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.menuActions.addWorkspace.disabledTooltip",defaultMessage:"You can only add workspaces to your organization that have more than one member and have no pending requests."}),tooltipDisabled:(0,qm().eG)(t)&&!(0,qm().NK)(t),action:()=>{s(pp.AddWorkspace),a(t.id)}},{key:"request-transfer",type:"action",icon:Ym(n.icon20x20),title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.menuActions.requestTransfer",defaultMessage:"Request transfer"}),caption:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.menuActions.requestTransfer.caption",defaultMessage:"Prompt the owner to transfer workspace ownership to a personal account."}),disabled:(0,qm().eG)(t)||(0,qm().NK)(t),tooltipTitle:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.menuActions.requestTransfer.disabledTooltip",defaultMessage:"You can only request transfers for workspaces with one member and have no pending requests."}),tooltipDisabled:(0,qm().Rx)(t)&&!(0,qm().NK)(t),action:()=>{s(pp.RequestTransfer),a(t.id)}},o];return(0,i.jsx)(Rt().bd,{items:r})}function xp(e){const{claimableSpace:t}=e,n=(0,h().tz)(),o=(0,s.useMemo)((()=>{const e=t.admins[0];return e?(0,a(695608).c6)(n,e):void 0}),[n,t]);const r=function(){var e;switch(null===(e=t.spaceRequest)||void 0===e?void 0:e.type){case"team_claim_upgrade":case"organization_claiming_space":return(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.pendingBadge.tooltip.claim",defaultMessage:"Workspace claim request is being processed."});case"organization_domain_claim_space_deletion":case"domain_claim_space_deletion":return(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.pendingBadge.tooltip.delete",defaultMessage:"Workspace is in the process of being deleted."});case"organization_personal_external_transfer":case"personal_external_transfer":return o?(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.pendingBadge.tooltip.transfer",defaultMessage:"Waiting for {ownerName} to transfer this workspace to an external account.",values:{ownerName:o}}):(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.pendingBadge.tooltip.transfer.noOwnerName",defaultMessage:"Waiting for the workspace owner to transfer this workspace to an external account."});default:return}}();return r?(0,i.jsx)(V().A,{renderTooltip:()=>r,render:e=>(0,i.jsx)(Ut().A,{...e,content:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.pendingBadge.content",defaultMessage:"Pending"})})}):null}function vp(e){let{organizationId:t,onDismiss:a}=e;const s=(0,v().IS)((e=>({content:{display:"flex",flexDirection:"column",width:"100%",gap:0,overflowY:"auto",padding:"16px 12px"}})),[]);return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:a,areaConstraint:{height:{type:"fixed",length:800},width:{type:"fixed",length:1280}},render:e=>{let{sizeRange:a}=e;return(0,i.jsx)(O().tf,{sizeRange:a,showDismissButton:!1,header:null,footer:null,children:(0,i.jsxs)("div",{style:s.content,children:[(0,i.jsx)(Ua()._,{title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.title",defaultMessage:"Add workspaces"}),byline:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.byline",defaultMessage:"Add workspaces created with a verified domain, or request ownership transfer to a personal account."})}),(0,i.jsx)(bp,{organizationId:t})]})})}})}var yp=function(e){return e.AddWorkspace="add-workspace",e.RequestTransfer="request-transfer",e.ScheduleDeletion="schedule-deletion",e}(yp||{});function bp(e){let{organizationId:t}=e;const[a,n]=(0,s.useState)(),o=(0,On().F)(),r=(0,h().tz)(),l=(0,f().v3)(),d=(0,Ta().E)({organizationId:t}),c=(0,x().K8)((()=>(null==d?void 0:d.getEmailDomains())??[]),[d]),[u,g]=(0,s.useState)(!1),{claimableSpaces:m,filters:p,setFilters:v,loading:y,error:b,hasNextPage:S,loadNextPage:j,refreshPage:w}=$m({organizationId:t}),A=(0,s.useMemo)((()=>m.map((e=>e.id))),[m]),{selectedIds:M,handleToggleId:C,handleSelectAllIds:I,handleUnselectAllIds:T}=Lt({allPossibleIds:A}),k=(0,s.useMemo)((()=>M.map((e=>m.find((t=>t.id===e)))).filter(Pe().O9)),[m,M]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:o.tableHeader,children:[(0,i.jsxs)("div",{style:o.leftContent,children:[(0,i.jsxs)(La,{isOpen:M.length>0,children:[(0,i.jsx)(Ea,{isPrimary:!0,title:(0,i.jsx)(Oa,{itemsSelectedCount:M.length}),onClick:T}),(0,i.jsx)(Ea,{icon:Km,title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.multiselect.addWorkspace",defaultMessage:"Add workspace"}),disabled:k.some(qm().Rx)||k.some(qm().NK),disabledTooltipText:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.multiselect.addWorkspace.disabledTooltip",defaultMessage:"You can only add workspaces to your organization that have more than one member and have no pending requests."}),onClick:()=>n(yp.AddWorkspace)}),(0,i.jsx)(Ea,{icon:Ym,title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.multiselect.requestTransfer",defaultMessage:"Request transfer"}),disabled:k.some(qm().eG)||k.some(qm().NK),disabledTooltipText:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.multiselect.requestTransfer.disabledTooltip",defaultMessage:"You can only request transfers for workspaces with one member and have no pending requests."}),onClick:()=>n(yp.RequestTransfer)}),(0,i.jsx)(Ea,{isDestructive:!0,icon:Pt().trashIcon,title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.multiselect.scheduleDeletion",defaultMessage:"Schedule deletion"}),disabled:k.some(qm().eG)||k.some(qm().NK)||k.some(qm().t_),disabledTooltipText:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.multiselect.scheduleDeletion.disabledTooltip",defaultMessage:"You can only delete workspaces with one member, no pending requests, and on the free tier."}),onClick:()=>n(yp.ScheduleDeletion)})]}),(0,i.jsx)(Xm,{selectedMemberCountType:p.memberCountFilter,setSelectedMemberCountType:e=>v({memberCountFilter:e})}),(0,i.jsx)(Gs,{pillTitle:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.filters.email.title",defaultMessage:"Verified email domains"}),emailDomains:c,selectedEmailDomains:p.emailDomains||[],setSelectedEmailDomains:e=>{v({emailDomains:e})}})]}),(0,i.jsxs)("div",{style:o.rightContent,children:[(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:p.query,setQueryFilter:e=>v({query:e}),placeholderText:r.formatMessage({id:"organization.workspaces.addModal.filters.query.placeholder",defaultMessage:"Search by workspace name"})}),(0,i.jsx)(Gg().K,{disabled:u,onClick:async()=>{g(!0),await Oe().M0({environment:l,data:{organizationId:t}}),g(!1)}})]})]}),(0,i.jsx)(hp,{organizationId:t,claimableSpaces:m,hasMoreResults:S,onLoadMoreResults:j,refreshPage:()=>w(!0),loading:y,error:b,selectedIds:M,onSelectAll:I,onUnselectAll:T,onSelectRow:C}),a===yp.AddWorkspace?(0,i.jsx)(dp,{organizationId:t,claimableSpaces:k,onDismiss:()=>n(void 0),onRefresh:()=>w(!0)}):null,a===yp.RequestTransfer?(0,i.jsx)(up,{organizationId:t,claimableSpaces:k,onDismiss:()=>n(void 0),onRefresh:()=>w(!0)}):null,a===yp.ScheduleDeletion?(0,i.jsx)(gp,{organizationId:t,claimableSpaces:k,onDismiss:()=>n(void 0),onRefresh:()=>w(!0)}):null]})}var Sp=()=>a(687190);function jp(e){var t;let{spaceStore:a,organizationId:n,onDismiss:o}=e;const r=(0,x().K8)((()=>a.getName()),[a]),{state:l}=(0,Iu().j)(),d=(null===(t=l.value)||void 0===t||null===(t=t.membersForSpace[a.id])||void 0===t?void 0:t.length)||0,c=(0,x().K8)((()=>(0,i.jsx)(N().B6,{disabled:!0,icon:a.getIcon(),defaultIcon:(0,p().V)(),isEmptyPage:!1,size:na().WK})),[a]),u=(0,s.useMemo)((()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h().sA,{id:"organization.general.workspace",defaultMessage:"Workspace"}),(0,i.jsx)(T().A,{style:{margin:"0 2px"}}),(0,i.jsx)(re().Qq,{memberCount:d})]})),[d]);return(0,i.jsx)(na().iv,{isOpen:!0,sidebarProps:{sidebarItemsTitle:(0,i.jsx)(h().sA,{id:"organization.workspaceModal.sidebarItemTitle",defaultMessage:"Workspace settings"}),sidebarTitleIcon:c,sidebarTitle:r,sidebarByline:u,hideSeparator:!0,bottomEntitySection:(0,i.jsx)(Sp().Ir,{organizationId:n}),renderTooltip:()=>(0,i.jsx)(Sp().uL,{})},tabRenderer:sx,tabNames:Xt().yp,tabAccessor:ax,defaultTab:"general",onDismiss:o,sceneProps:{spaceStore:a,organizationId:n,onCloseModal:o}})}const wp="space",Ap=(0,h().YK)({workspace:{id:"organizationManageWorkspacesTable.spaceColumn.sortName",defaultMessage:"Workspace"},members:{id:"organizationManageWorkspacesTable.membersColumn.header",defaultMessage:"Members"},guests:{id:"organizationManageWorkspacesTable.guestsColumn.header",defaultMessage:"Guests"},location:{id:"organizationManageWorkspacesTable.regionColumn.header",defaultMessage:"Hosting region"}});function Mp(e){return{id:wp,headerTitle:(0,i.jsx)(h().sA,{id:"organizationManageWorkspacesTable.spaceColumn.header",defaultMessage:"Workspaces ({numWorkspaces})",values:{numWorkspaces:e}}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{}):(0,i.jsx)(Rt().s7,{title:e.spaceName,icon:(0,i.jsx)(N().B6,{disabled:!0,icon:e.spaceIcon,isEmptyPage:!1,title:e.spaceName,size:Da().p8,isLarge:!0}),iconSize:Da().p8,iconMargin:Rt().Ji,summaryStyles:{paddingBlock:8,overflow:"hidden"},containerStyles:{width:`calc(100% - ${Nt().Gr}px)`}}),widthData:{width:350,maxWidth:350},sortable:!1}}function Cp(e,t){return{id:"owners",headerTitle:(0,i.jsx)(h().sA,{id:"organizationManageWorkspacesTable.ownersColumn.header",defaultMessage:"Workspace owners"}),renderCell:a=>a.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{}):(0,i.jsx)(oe().t,{users:e.filter((e=>a.owners.includes(e.id))),totalMemberCount:a.owners.length,showTooltip:!0,isLoading:t}),widthData:{widthPercent:33,minWidth:140},sortable:!1}}const Ip={id:"members",headerTitle:(0,i.jsx)(h().sA,{...Ap.members}),renderCell:e=>e.type===Qt().T.Loading||void 0===e.memberCount?(0,i.jsx)(Rt().mf,{}):(0,i.jsx)(I().D,{colorName:"secondary",children:(0,i.jsx)(h().sA,{defaultMessage:"{numMembers, plural, one {# member} other {# members}}",id:"organizationManageWorkspacesTable.numMembers",values:{numMembers:e.memberCount}})}),widthData:{widthPercent:33,minWidth:140},sortable:!1},Tp={id:"guests",headerTitle:(0,i.jsx)(h().sA,{...Ap.guests}),renderCell:e=>e.type===Qt().T.Loading||void 0===e.guestCount?(0,i.jsx)(Rt().mf,{}):(0,i.jsx)(I().D,{colorName:"secondary",children:(0,i.jsx)(re().h6,{guestCount:e.guestCount})}),widthData:{widthPercent:33,minWidth:140},sortable:!1},kp={id:"location",headerTitle:(0,i.jsx)(h().sA,{...Ap.location}),headerInfoTooltip:(0,i.jsx)(h().sA,{id:"organizationManageWorkspacesTable.locationColumn.tooltip",defaultMessage:"Please contact sales to change a workspace’s hosting region."}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Fo().I,{icon:(0,Bl().Iu)(e.location),style:{marginRight:"6px",width:"20px",height:"20px"}}),(0,i.jsx)(I().D,{colorName:"secondary",children:M().A.formatMessage((0,Bl().MG)(e.location))})]}),widthData:{widthPercent:33,minWidth:140},sortable:!1},_p=[{id:wp,name:M().A.formatMessage(Ap.workspace),type:"title"},{id:Ip.id,name:M().A.formatMessage(Ap.members),type:"number"},{id:Tp.id,name:M().A.formatMessage(Ap.guests),type:"number"},{id:kp.id,name:M().A.formatMessage(Ap.location),type:"text"}];function zp(e){let{organizationId:t}=e;const a=(0,f().v3)(),{availableOrganizationFeatures:n,refreshOrganization:o,regionsForSpaceMap:r}=(0,s.useContext)(_().D),l=n.has_access_to_domain_claim,d=(0,Vt().A)(),c=(0,Cs().l)(),{workspaceOwnerIdsBySpaceId:u,loading:g}=function(e){let{organizationId:t}=e;const a=(0,f().v3)(),[{status:s,error:n,value:o}]=(0,Xe().Yb)((async()=>{if(!t)return{userIdsBySpaceId:{}};const e=await S().callApi({eventName:"getWorkspaceOwnersInOrganization",environment:a,data:{organizationId:t}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,Pe().HB)(e)}),[a,t]);return{workspaceOwnerIdsBySpaceId:(null==o?void 0:o.userIdsBySpaceId)??Wm,loading:"pending"===s||"idle"===s,error:n}}({organizationId:t}),m=(0,x().K8)((()=>{const e=new Set(Object.values(u).flat());return Array.from(e).map((e=>new(ht().L)(a,{table:y().oo,id:e})))}),[a,u]),j=n.org_managed_user_workspace_region,w=s.useMemo((()=>j?[Mp(c.length),Cp(m,g),Ip,Tp,kp]:[Mp(c.length),Cp(m,g),Ip,Tp]),[m,c.length,g,j]),A=w.map((e=>({...e,headerStyle:d.tableHeader,rowStyle:d.tableRow}))),M=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:w,theme:e,containerMarginTop:0})),[w]),C=Va(),{spaceUsers:I}=(0,D().$)(c),{emailDomainsBySpace:T,isLoadingEmailDomains:k}=function(e,t){const a=(0,s.useMemo)((()=>t.map((e=>e.id))),[t]),n=(0,f().v3)(),[{value:o,status:i}]=(0,Xe().Yb)((async()=>{if(0===a.length)return;const t=await S().callApi({eventName:"getWorkspaceCreatorEmailDomainsForOrg",environment:n,data:{organizationId:e,spaceIds:a}});return"success"===t.type?{emailDomainMap:t.data.emailDomainMap,emailDomains:[...new Set(Object.values(t.data.emailDomainMap).filter((e=>void 0!==e)))]}:void 0}),[n,e,a]);return{isLoadingEmailDomains:"pending"===i||"idle"===i,emailDomainsBySpace:null==o?void 0:o.emailDomainMap,allEmailDomains:null==o?void 0:o.emailDomains}}(t,c),z=(0,x().K8)((()=>0===c.length||k||c.some((e=>!e.isReady()))||m.some((e=>!e.isReady()))),[c,m,k]),P=(0,x().K8)((()=>c.map((e=>{const t=null==T?void 0:T[e.id],a=null==I?void 0:I[e.id];let s,n;if(a){s=a.filter(b().QE).filter((e=>!e.isTeamGuest&&e.isPageGuest)).length,n=a.filter((e=>(0,b().c7)(e))).length}return{type:Qt().T.OrganizationWorkspace,spaceName:e.getName()||"",spaceIcon:e.getIcon(),emailDomain:t||"",owners:u[e.id]||[],memberCount:n,guestCount:s,id:e.id,isClickable:!0,location:null==r?void 0:r[e.id]}}))),[T,c,I,u,r]),{filters:N,updateFilters:R,query:B,setQuery:L,paginatedRows:E,appliedSorts:O,setAppliedSorts:U,loadNextPage:H,loadPrevPage:V,hasNextPage:W,hasPrevPage:q,currentPage:G}=Vm(P,t),K=z?(0,Qt().n)():E,Y=(0,s.useMemo)((()=>E.map((e=>e.id))),[E]),{selectedIds:Q,handleToggleId:$,handleSelectAllIds:X,handleUnselectAllIds:Z}=Lt({allPossibleIds:Y}),J=_o({spaceStores:c}),[ee,te]=(0,s.useState)(),[ae,se]=(0,s.useState)(),[ne,oe]=(0,s.useState)(!1);const ie=(0,x().K8)((()=>{if(ee&&"viewWorkspace"===(null==ee?void 0:ee.type))return c.find((e=>e.id===ee.spaceId))}),[ee,c]),re=ae??O??[],le=(0,x().K8)((()=>_p.filter((e=>!(e.id===kp.id&&!j)))),[j]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:C.tableHeader,children:[(0,i.jsxs)("div",{style:C.leftContent,children:[(0,i.jsxs)(La,{isOpen:Q.length>0,children:[(0,i.jsx)(Ea,{isPrimary:!0,title:(0,i.jsx)(Oa,{itemsSelectedCount:Q.length}),onClick:Z}),(0,i.jsx)(Ea,{disabled:Q.length===P.length,disabledTooltipText:(0,i.jsx)(h().sA,{id:"manageWorkspacesTable.multiselect.removeAllWorkspacesTooltip",defaultMessage:"You must have at least one workspace in your organization"}),icon:Om().U,iconSize:14,title:(0,i.jsx)(h().sA,{id:"manageWorkspacesTable.multiselect.removeWorkspace",defaultMessage:"Remove workspace"}),onClick:()=>te({type:"removeWorkspace",spaceIds:Q})})]}),(0,i.jsx)(En().A,{children:(0,i.jsx)(Ha().e,{sortProperties:le,isMenuOpen:ne,setIsMenuOpen:oe,onApply:e=>{oe(!1),U(e),se(void 0)},currentSorts:re})}),re.length>0?(0,i.jsx)(Ln().he,{}):null,(0,i.jsx)(Eo,{selectedSpaceIds:N.spaceIds||[],setSelectedSpaceIds:e=>R({spaceIds:e}),spaceData:J}),(0,i.jsx)(Ro,{pillTitle:(0,i.jsx)(h().sA,{id:"organizationManageWorkspacesTable.ownersFilter.pillTitle",defaultMessage:"Workspace owners"}),pillIcon:nn,userIds:u?[...new Set(Object.values(u).flat())]:[],selectedUsers:N.owners||[],setSelectedUsers:e=>{R({owners:e})}})]}),(0,i.jsxs)("div",{style:C.rightContent,children:[(0,i.jsx)(Fa().x,{appliedSorts:O,openSortPillMenu:e=>{e&&se([{propertyId:e,direction:"ascending"}]),oe(!0)},sortProperties:le}),(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:B,setQueryFilter:L}),l?(0,i.jsx)(F().A,{onClick:()=>te({type:"addWorkspaces"}),children:(0,i.jsx)(h().sA,{defaultMessage:"Add workspace",id:"manageWorkspacesTable.addWorkspaceButton"})}):null]})]}),"addWorkspaces"===(null==ee?void 0:ee.type)?(0,i.jsx)(vp,{onDismiss:()=>te(void 0),organizationId:t}):null,"viewWorkspace"===(null==ee?void 0:ee.type)&&ie?(0,i.jsx)(jp,{spaceStore:ie,onDismiss:()=>te(void 0),organizationId:t}):null,"removeWorkspace"===(null==ee?void 0:ee.type)?(0,i.jsx)(it,{spaceIds:ee.spaceIds,organizationId:t,onCancel:()=>{te(void 0)},onSubmit:()=>{te(void 0),Z()},refetchData:async()=>await o()}):null,(0,i.jsx)(Nt().WE,{hideHeaderRowPadding:!0,columnRenderInfo:A,rows:K,loadMoreMethod:{type:"pages",onLoadNext:H,onLoadPrevious:V,hasNextPage:W,hasPrevPage:q,currentPage:G},renderNoRowsComponent:()=>(0,i.jsx)(qt,{icon:p().V,title:(0,i.jsx)(h().sA,{id:"manageWorkspacesTable.empty",defaultMessage:"No workspaces found"}),byline:(0,i.jsx)(h().sA,{id:"manageWorkspacesTable.empty.byline",defaultMessage:"There are no workspaces that match this query"})}),styles:M,showRowBorders:!0,onRowClick:function(e){e.type!==Qt().T.Loading&&e.isClickable&&te({type:"viewWorkspace",spaceId:e.id})},multiselect:{header:{isDisabled:!1,isSelected:E.length>0&&Q.length===E.length,onClick:()=>{Q.length===E.length?Z():X()}},row:{getDisabledState:()=>!1,getSelectedState:e=>Q.includes(e.id),onClick:e=>{$(e.id)}}},allowHorizontalScroll:!0,extendToFullScreen:Yt().e})]})}function Dp(e){let{organizationStore:t}=e;const a=(0,f().v3)(),s=(0,i.jsx)(h().sA,{id:"organizationManageWorkspacesSubTab.title",defaultMessage:"Manage workspaces"});return(0,i.jsx)(Nd().D,{breadcrumbs:[{message:(0,i.jsx)(h().sA,{id:"organizationManageWorkspacesSubTab.breadcrumb.goBack",defaultMessage:"General"}),onClick:()=>{(0,xd().i)({environment:a,from:{tabRoute:Xt().Vo,properties:{subtab:"workspaces"}},organizationId:t.id,tabRoute:Xt().Vo})}},{message:s}],children:(0,i.jsxs)(Hl().t,{children:[(0,i.jsx)(Ua()._,{title:s,byline:(0,i.jsx)(h().sA,{id:"organizationManageWorkspacesSubTab.description",defaultMessage:"View and manage all workspaces associated to this organization"})}),(0,i.jsx)(zp,{organizationId:t.id})]})})}function Pp(e){const{samlConfig:t,updateCreateAccount:a,loading:s}=e,n=(0,h().tz)(),o=(0,f().v3)();return(0,i.jsx)(be().y,{title:(0,i.jsx)(h().sA,{id:"organization.general.saml.settings.automaticAccountCreation.title",defaultMessage:"Automatic account creation"}),badge:(0,i.jsx)(rs().A,{icon:Ir().questionMarkCircleIcon,ariaLabel:n.formatMessage({id:"organization.general.saml.settings.automaticAccountCreation.iconButton.ariaLabel",defaultMessage:"Learn more"}),onClick:()=>Nm().f({environment:o,url:(0,ue().xS)("guides.samlJIT")})}),byline:(0,i.jsx)(h().sA,{id:"organization.general.saml.settings.automaticAccountCreation.byline",defaultMessage:"Automatically create accounts for new SAML SSO users"}),item:(0,i.jsx)(ye().A,{on:Boolean(null==t?void 0:t.createAccount),onClick:async function(){t&&await a(!t.createAccount)},disabled:!t||s})})}function Np(e){const{buttonTitle:t,buttonOnClick:a,buttonDisabled:s,...n}=e,o=(0,v().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",width:"100%",gap:12}})),[]);return(0,i.jsxs)("div",{style:o.container,children:[(0,i.jsx)(te().p,{isBlue:!0,onClick:a,disabled:s,disabledFeedback:s,children:t}),(0,i.jsx)(ye().A,{...n})]})}var Rp=()=>a(759358),Bp=function(e){return e.UpdateConfiguration="update-configuration",e.UpdateAndEnableConfiguration="update-and-enable-configuration",e}(Bp||{});function Lp(e){const{samlConfig:t,onUpdateSamlStatus:a,onUpdateSamlMetadataUrl:n,onUpdateSamlMetadataXml:o,loading:r}=e,[l,d]=(0,s.useState)(),c=!!t&&("disabled"!==t.status&&"unconfigured"!==t.status);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(be().y,{title:(0,i.jsx)(h().sA,{id:"organization.general.saml.settings.enableSamlSso.title",defaultMessage:"Enable SAML SSO"}),byline:(0,i.jsx)(h().sA,{id:"organization.general.saml.settings.enableSamlSso.byline",defaultMessage:"Allow members to log in with SAML SSO using a verified domain"}),item:(0,i.jsx)(Np,{buttonTitle:(0,i.jsx)(h().sA,{id:"organization.general.saml.settings.enableSamlSso.configure.button",defaultMessage:"Configure"}),buttonOnClick:()=>d(Bp.UpdateConfiguration),buttonDisabled:!t||r,on:c,onClick:async function(){if(!t)return;const{status:e,idpMetadata:s,idpMetadataUrl:n}=t,o=n||s;switch(e){case"disabled":o?await a("configured"):d(Bp.UpdateAndEnableConfiguration);break;case"unconfigured":d(Bp.UpdateAndEnableConfiguration);break;case"configured":case"enforced":await a("disabled");break;case"enforced_for_domain":break;default:(0,Pe().HB)(e)}},disabled:!t||r})}),l===Bp.UpdateConfiguration?(0,i.jsx)(Rp().N,{samlConfig:t,loading:r,onSave:async function(e){const{metadataUrl:t,metadataXml:a}=e;let s=!1;t?s=await n(t):a&&(s=await o(a)),s&&d(void 0)},onDismiss:()=>d(void 0)}):null,l===Bp.UpdateAndEnableConfiguration?(0,i.jsx)(Rp().N,{samlConfig:t,loading:r,onSave:async function(e){const{metadataUrl:t,metadataXml:a}=e;let s=!1;t?s=await n(t,!0):a&&(s=await o(a,!0)),s&&d(void 0)},onDismiss:()=>d(void 0),saveButtonText:(0,i.jsx)(h().sA,{id:"organization.general.saml.settings.configure.modal.primaryAction.saveAndEnable",defaultMessage:"Save & enable"})}):null]})}function Ep(e){const{samlConfig:t,onUpdateSamlStatus:a,loading:s,isEnabled:n}=e,o=(0,v().IS)((e=>({button:{border:`1px solid ${e.outlineButtonBorder}`,...El().W}})),[]),r="enforced"===(null==t?void 0:t.status)?"enforced":"enforced_for_domain"===(null==t?void 0:t.status)?"enforced_for_domain":"not_enforced",l=[{key:"enforced",label:(0,i.jsx)(h().sA,{id:"organization.general.saml.settings.loginMethod.option.enforced",defaultMessage:"Only SAML SSO"})},{key:"not_enforced",label:(0,i.jsx)(h().sA,{id:"organization.general.saml.settings.loginMethod.option.notEnforced",defaultMessage:"Any method"})}];return"enforced_for_domain"===r?(0,i.jsx)(be().y,{title:(0,i.jsx)(h().sA,{id:"organization.general.saml.settings.loginMethod.title",defaultMessage:"Login method"}),byline:(0,i.jsx)(h().sA,{id:"organization.general.saml.settings.loginMethod.byline",defaultMessage:"Customize login methods for SAML-enabled workspaces. Owners retain password access"}),item:(0,i.jsx)(U().A,{size:"md",disabled:!0,disabledFeedback:!0,children:(0,i.jsx)(h().sA,{id:"organization.general.saml.settings.loginMethod.option.enforcedForDomain",defaultMessage:"Enforced for domain"})})}):(0,i.jsx)(be().y,{title:(0,i.jsx)(h().sA,{id:"organization.general.saml.settings.loginMethod.title",defaultMessage:"Login method"}),byline:(0,i.jsx)(h().sA,{id:"organization.general.saml.settings.loginMethod.byline",defaultMessage:"Customize login methods for SAML-enabled workspaces. Owners retain password access"}),item:(0,i.jsx)(Ll().m,{isMobile:!1,disabled:!t||s||!n,type:"dropdown",placementToOrigin:Ya().W.Bottom,alignmentToOrigin:Ya().C.End,currentOption:r,options:l,onSelectOption:async function(e){"enforced"===e?await a("enforced"):"enforced_for_domain"===e?await a("enforced_for_domain"):await a("configured")},buttonStyle:o.button})})}function Op(){const{samlConfig:e,updateSamlConfig:t,loading:a,isEnabled:s}=lp();async function n(a){return!!e&&await t(e.id,{status:a})}return(0,i.jsx)(be().c,{items:[(0,i.jsx)(Lp,{samlConfig:e,onUpdateSamlStatus:n,onUpdateSamlMetadataUrl:async function(a,s){return!!e&&await t(e.id,{idpMetadataUrl:a,status:s?"configured":void 0})},onUpdateSamlMetadataXml:async function(a,s){return!!e&&await t(e.id,{idpMetadata:a,status:s?"configured":void 0})},loading:a},"enable-saml-sso"),(0,i.jsx)(Ep,{samlConfig:e,onUpdateSamlStatus:n,loading:a,isEnabled:s},"login-method"),(0,i.jsx)(Pp,{samlConfig:e,updateCreateAccount:async function(a){return!!e&&await t(e.id,{createAccount:a})},loading:a},"auto-account-creation")]})}a(823215);var Up=()=>a(978604);function Fp(e){let{organizationStore:t,userStore:a,spaceId:n,onSubmit:o,onDismiss:r,onRefresh:l}=e;const d=(0,f().v3)(),c=(0,h().tz)(),u=sa({spaceId:n}),{visibleUsers:g}=(0,D().d)(n),{userData:m}=qi({userStore:a,organizationStore:t}),p=(0,x().K8)((()=>null==u?void 0:u.getName()),[u]),y=(0,x().K8)((()=>{var e;return n?null===(e=m.userSpaceAccessMap.get(n))||void 0===e?void 0:e.role:void 0}),[m,n]),w=(0,x().K8)((()=>{var e;if(!u)return;const t=g.filter((e=>(0,b().c7)(e))).length;return{id:u.id,name:u.getName()??"",icon:null===(e=u.getIcon())||void 0===e?void 0:e.icon,subscriptionTier:u.getSubscriptionTier(),memberCount:t}}),[u,g]),M=(0,v().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},container:{width:520},content:{width:"100%",display:"flex",flexDirection:"column",gap:16}})),[]);async function I(){o(),await async function(){const e=await S().callApi({eventName:"bulkAddUsersToOrganizationSpaces",environment:d,data:{organizationId:t.id,existingUserIds:[a.id],newUserEmails:[],spaceIds:[n],role:"owner"}});if("failed"===e.type)return void j().f1((0,A().Hu)(c,e));const s=new(C().SL)(d,{id:n,table:"space"});try{await(0,Up().H)({environment:d,spaceStore:s,userStore:a})}catch(o){return void j().f1(c.formatMessage(Hp.genericCreationError))}nt().D6({label:c.formatMessage(Hp.successCreationMessage)})}(),await l(),r()}const[T,k]=(0,s.useState)(!1);return(0,i.jsx)(H().s,{isOpen:!0,onDismiss:r,render:()=>(0,i.jsx)(O().tf,{header:(0,i.jsx)(q().rQ,{icon:(0,op().arrowInCircleUpIcon)(M.icon),title:(0,i.jsx)(h().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.title",defaultMessage:"Add new SCIM token"}),byline:(0,i.jsx)("div",{style:M.container,children:(0,i.jsx)(h().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.byline",defaultMessage:"This will generate a new SCIM token for this workspace."})})}),footer:(0,i.jsx)(q().jl,{primaryText:(0,i.jsx)(h().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.button.primary",defaultMessage:"Create SCIM token"}),primaryAction:async()=>{k(!0),await I(),k(!1)},primaryDisabled:T,secondaryText:(0,i.jsx)(h().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.button.cancel",defaultMessage:"Cancel"}),secondaryAction:r}),children:(0,i.jsxs)("div",{style:M.content,children:["editor"!==y?(0,i.jsx)(Kr().l,{iconGroup:qr().Z,display:"inline",tint:"gray",label:p?(0,i.jsx)(h().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.workspaceOwnerWarning.label.withWorkspaceName    ",defaultMessage:"You are not already a workspace owner of {workspaceName}.",values:{workspaceName:p}}):(0,i.jsx)(h().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.workspaceOwnerWarning.label",defaultMessage:"You are not already a workspace owner."}),description:p?(0,i.jsx)(h().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.workspaceOwnerWarning.description.withWorkspaceName",defaultMessage:"When creating a new SCIM token, you will be added as a workspace owner of <b>{workspaceName}</b>.",values:{workspaceName:p,b:e=>(0,i.jsx)("b",{children:e})}}):(0,i.jsx)(h().sA,{id:"organizationScimSubTab.addTokenModal.action.innerModal.workspaceOwnerWarning.description",defaultMessage:"When creating a new SCIM token, you will be added as a workspace owner of this workspace."})}):null,w?(0,i.jsx)(sp,{spaces:[w]}):null]})})})}const Hp=(0,h().YK)({genericCreationError:{id:"organizationScimSubTab.genericCreationError",defaultMessage:"Failed to create SCIM token"},successCreationMessage:{id:"organizationScimSubTab.successCreationMessage",defaultMessage:"SCIM token created successfully"}}),Vp={viewBox:"0 0 16 16",fittedViewBox:"3.99 1.37 8.01 13.26",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M8 3.8a.825.825 0 1 0 0 1.65.825.825 0 0 0 0-1.65"}),(0,i.jsx)("path",{d:"M8 1.375a4 4 0 0 0-2.125 7.39v3.922c0 .18.078.352.213.47l1.5 1.313a.625.625 0 0 0 .824 0l1.5-1.312a.625.625 0 0 0 .063-.877l-.777-.906.777-.906a.63.63 0 0 0 .15-.406V8.764A4 4 0 0 0 8 1.374m-2.75 4a2.75 2.75 0 1 1 3.972 2.464.63.63 0 0 0-.347.56V9.83L7.9 10.968c-.2.234-.2.58 0 .814l.723.842L8 13.17l-.875-.765V8.399a.63.63 0 0 0-.347-.56A2.75 2.75 0 0 1 5.25 5.375"})]})},Wp=(0,o().wt)("keySmall",Vp);const qp={viewBox:"0 0 16 16",fittedViewBox:"2.12 2.97 11.75 10.05",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M5.066 4.914a.538.538 0 1 0 0 1.076.538.538 0 0 0 0-1.076m2.162 0a.538.538 0 1 0 0 1.076.538.538 0 0 0 0-1.076M5.066 6.458a.538.538 0 1 0 0 1.077.538.538 0 0 0 0-1.077m2.162 0a.538.538 0 1 0 0 1.077.538.538 0 0 0 0-1.077M5.066 8.002a.538.538 0 1 0 0 1.077.538.538 0 0 0 0-1.077m2.162 0a.538.538 0 1 0 0 1.077.538.538 0 0 0 0-1.077m4.169.618a.538.538 0 1 0 0 1.076.538.538 0 0 0 0-1.076m0 1.544a.538.538 0 1 0 0 1.076.538.538 0 0 0 0-1.076"}),(0,i.jsx)("path",{d:"M4.063 2.977a1.934 1.934 0 0 0-1.935 1.935V12.4c0 .343.279.622.622.622h10.5a.62.62 0 0 0 .622-.622V8.772a1.934 1.934 0 0 0-1.934-1.934h-1.772V4.912a1.934 1.934 0 0 0-1.934-1.935zm-.691 1.935c0-.382.31-.691.69-.691h4.17c.381 0 .69.31.69.69v6.868H7.895v-1.54a.51.51 0 0 0-.512-.513H4.912a.51.51 0 0 0-.513.513v1.54H3.372zm6.794 6.867V8.08h1.772c.381 0 .69.31.69.691v3.007zm-4.742 0V10.75H6.87v1.028z"})]})},Gp=(0,o().wt)("teamspaceSmall",qp);var Kp=()=>a(817045);function Yp(e){let{botId:t,spaceId:a,onDismiss:s,onRefresh:n}=e;const o=(0,f().v3)(),r=(0,h().tz)();return(0,i.jsx)(Kp().S,{onSubmit:async function(){await async function(){const e=await S().callApi({eventName:"deleteBotInOrganizationSpace",environment:o,data:{botId:t,spaceId:a}});"failed"!==e.type?nt().D6({label:r.formatMessage(Qp.successDeletionMessage)}):j().f1((0,A().Hu)(r,e))}(),await n(),s()},onCancel:s,headerText:(0,i.jsx)(h().sA,{id:"organizationScimSubTab.deleteBotModal.action.innerModal.title",defaultMessage:"Are you sure you want to delete this bot?"}),bylineText:(0,i.jsx)(h().sA,{id:"organizationScimSubTab.deleteBotModal.action.innerModal.byline",defaultMessage:"SCIM configurations using this token will stop working.{br}A new token will be required.",values:{br:(0,i.jsx)("br",{})}}),submitText:(0,i.jsx)(h().sA,{id:"organizationScimSubTab.deleteBotModal.action.innerModal.button.primary",defaultMessage:"Revoke token"})})}const Qp=(0,h().YK)({successDeletionMessage:{id:"organizationScimSubTab.successDeletionMessage",defaultMessage:"SCIM token deleted successfully"}}),$p=[{id:"user",headerTitle:(0,i.jsx)(h().sA,{id:"organizationScimSubTab.table.userColumn.title",defaultMessage:"User"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(ca,{}):e.legacy?(0,i.jsx)(da,{userId:ql().rN,rightContent:(0,i.jsx)(Jp,{scimBotId:e.id,spaceId:e.spaceId,setSelectedScimBotId:e.setSelectedScimBotId,setOpenedModal:e.setOpenedModal,organizationId:e.organizationId}),overrides:{name:"Deactivated user"}}):(0,i.jsx)(da,{useThinTitle:!1,showEmailByline:!0,isNotMultiSelectable:!0,userId:e.ownerUserId,badge:e.ownedByCurrentUser?(0,i.jsx)(Ut().A,{style:{margin:0},content:(0,i.jsx)(h().sA,{id:"organizationScimSubTab.table.userColumn.you",defaultMessage:"You"})}):void 0,rightContent:(0,i.jsx)(Jp,{scimBotId:e.id,spaceId:e.spaceId,organizationId:e.organizationId,setSelectedScimBotId:e.setSelectedScimBotId,setOpenedModal:e.setOpenedModal})}),widthData:{width:275,maxWidth:275},sortable:!1},{id:"role",headerTitle:(0,i.jsx)(h().sA,{id:"organizationScimSubTab.table.roleColumn.title",defaultMessage:"Highest role"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{}):e.legacy?(0,i.jsx)(Rt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(h().sA,{id:"organizationScimSubTab.table.roleColumn.role.none",defaultMessage:"None"})}):e.isOrganizationOwner?(0,i.jsx)(Rt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(h().sA,{id:"organizationScimSubTab.table.roleColumn.role.organizationOwner",defaultMessage:"Organization owner"})}):(0,i.jsx)(Rt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(h().sA,{id:"organizationScimSubTab.table.roleColumn.role.workspaceOwner",defaultMessage:"Workspace owner"})}),widthData:{widthPercent:33,minWidth:100},sortable:!1},{id:"createdAt",headerTitle:(0,i.jsx)(h().sA,{id:"organizationScimSubTab.table.createdAtColumn.title",defaultMessage:"Created at"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Yo().h,{}):(0,i.jsx)(Yo().d,{useSecondaryColorTitle:!0,dateTs:e.createdAt}),widthData:{widthPercent:33,minWidth:100},sortable:!1},{id:"token",headerTitle:(0,i.jsx)(h().sA,{id:"organizationScimSubTab.table.tokenColumn.title",defaultMessage:"Token"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{}):(0,i.jsx)(Rt().s7,{useThinTitle:!0,title:"••••••••••••••••••••••"}),widthData:{widthPercent:33,minWidth:100},sortable:!1}];var Xp=function(e){return e.AddToken="add-token",e.RevokeToken="revoke-token",e.RegenerateToken="regenerate-token",e}(Xp||{});function Zp(e){const{organizationStore:t,spaceId:a,scimBots:n,loading:o,error:r,onRefresh:l}=e,[d,c]=(0,s.useState)(),[u,g]=(0,s.useState)(),m=(0,pt().T)(),p=(0,Vt().A)(),f=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:$p,theme:e,containerMarginTop:0})),[]),y=(0,x().K8)((()=>n.map((e=>e.isLegacy?{type:Qt().T.OrganizationSpaceScimBot,id:e.botId,createdAt:e.createdAt,spaceId:a,organizationId:t.id,setSelectedScimBotId:c,setOpenedModal:g,legacy:!0,isClickable:!1}:{type:Qt().T.OrganizationSpaceScimBot,id:e.botId,createdAt:e.createdAt,spaceId:a,organizationId:t.id,setSelectedScimBotId:c,setOpenedModal:g,ownerUserId:e.createdById,ownedByCurrentUser:e.createdById===m,isOrganizationOwner:t.getOwnerIds().includes(e.createdById),legacy:!1,isClickable:!1}))),[n,a,m,t]),b=$p.map((e=>({...e,headerStyle:p.tableHeader,rowStyle:p.tableRow}))),S=o?(0,Qt().n)(3):y;return!o&&r?(0,i.jsx)(Kt,{error:r,runNewSearch:l}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Nt().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:b,rows:S,styles:f,renderNoRowsComponent:()=>(0,i.jsx)(qt,{icon:Wp,title:(0,i.jsx)(h().sA,{id:"organizationScimSubTab.table.empty",defaultMessage:"No SCIM tokens found"}),byline:(0,i.jsx)(h().sA,{id:"organizationScimSubTab.table.empty.byline",defaultMessage:"There are no SCIM tokens that match this query"})}),extendToFullScreen:Yt().e}),u===Xp.RevokeToken&&d?(0,i.jsx)(Yp,{botId:d,spaceId:a,onDismiss:()=>g(void 0),onRefresh:l}):null]})}function Jp(e){const{scimBotId:t,spaceId:s,setSelectedScimBotId:n,setOpenedModal:o,organizationId:r}=e,l=(0,f().v3)(),d=(0,h().tz)(),c=(0,v().IS)((()=>({icon:{height:20,width:20,fill:"currentColor"}})),[]);async function u(e){const t=await qd().R.clipboardActions.load();await t.copyString({stringValue:e,environment:l,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard}),nt().D6({label:d.formatMessage(bs().DZ.toastSuccessfulCopy)})}const g=[{key:"copy-token",type:"action",icon:Wp(c.icon),title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.menuActions.copyToken",defaultMessage:"Copy SCIM token"}),action:()=>{!async function(){const e=await S().callApi({eventName:"getScimValueTokenForOrganizationSpace",environment:l,data:{spaceId:s,scimBotId:t},headers:(0,Zt().WS)({cellId:void 0,spaceId:s})});if("failed"===e.type)return void j().f1((0,A().Hu)(d,e));u(e.data.token),(0,w().u)({environment:l,event:{eventName:"org_console_general_read_scim_token",eventProperties:{organization_id:r,space_id:s,bot_id:t}}})}()}},{key:"copy-scim-base-url",type:"action",icon:(0,a(703778).d)(c.icon),title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.menuActions.copyScimBaseUrl",defaultMessage:"Copy SCIM base URL"}),action:()=>{u(Gt().A.domainBaseUrl+Te().JZ.scimApiBasePath)}},{key:"copy-scim-space-id",type:"action",icon:Gp(c.icon),title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.menuActions.copyScimSpaceId",defaultMessage:"Copy workspace ID"}),action:()=>{u(s)}},{key:"divider",type:"divider"},{key:"revoke-token",type:"action",icon:(0,a(259476).trashSmallIcon)(c.icon),isDestructive:!0,title:(0,i.jsx)(h().sA,{id:"organization.workspaces.addModal.table.name.menuActions.revokeToken",defaultMessage:"Revoke token"}),action:()=>{o(Xp.RevokeToken),n(t)}}];return(0,i.jsx)(Rt().bd,{items:g})}const eh=["organization_owner","owner"],th=pn.filter((e=>eh.includes(e.value)));function ah(e){let{organizationStore:t,subtab:a,queryParams:n}=e;const o=(0,f().v3)(),r=(0,s.useMemo)((()=>n[Xf]),[n]);kc({organizationId:t.id,spaceId:r,tabRoute:Xt().Vo,subtab:a,queryParams:n});const l=(0,i.jsx)(h().sA,{...oh.title});return(0,i.jsx)(Nd().D,{breadcrumbs:[{message:(0,i.jsx)(h().sA,{...oh.goBack}),onClick:()=>{(0,xd().i)({environment:o,from:{tabRoute:Xt().Vo,properties:{subtab:Xt().al.Scim}},organizationId:t.id,tabRoute:Xt().Vo})}},{message:l}],children:(0,i.jsxs)(Hl().t,{children:[(0,i.jsx)(Ua()._,{title:l,byline:(0,i.jsx)(h().sA,{...oh.description})}),(0,i.jsx)(nh,{organizationStore:t,spaceId:r})]})})}var sh=function(e){return e.AddToken="add-token",e}(sh||{});function nh(e){const{organizationStore:t,spaceId:a}=e,n=(0,On().F)(),[o,r]=(0,s.useState)({}),[l,d]=(0,s.useState)(void 0),[c,u]=(0,s.useState)(!1),{scimBots:g,refresh:m,loading:p,error:v}=function(e){const t=(0,f().v3)(),[{status:a,value:s,error:n},o]=(0,Xe().Yb)((async()=>{if(!e)return[];const a=await S().callApi({eventName:"getScimTokensForOrganizationSpace",environment:t,data:{spaceId:e},headers:(0,Zt().WS)({cellId:void 0,spaceId:e})});if("success"===a.type)return a.data.scimBots;if("failed"===a.type)throw a.error;(0,Pe().HB)(a)}),[e,t]);return{loading:"pending"===a,error:n,scimBots:s??[],refresh:o}}(a),y=(0,nc().$)(),b=!!p||g.some((e=>e.createdById===(null==y?void 0:y.id))),j=sa({spaceId:a}),w=!y||p||c||b,A=(0,x().K8)((()=>g.filter((e=>{if(!o.roles||0===o.roles.length)return!0;const a=t.getOwnerIds().includes(e.createdById)?"organization_owner":"owner";return o.roles.includes(a)}))),[g,o.roles,t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:n.tableHeader,children:[(0,i.jsxs)("div",{style:n.leftContent,children:[(0,i.jsx)(mc,{showAsPill:!0,organizationId:t.id,currentTabRoute:Xt().Vo,currentTabProperties:{subtab:Xt().al.Scim},selectedSpaceStore:j}),(0,i.jsx)(gn,{setUserRoles:e=>{(function(e){return e.every((e=>eh.includes(e)))})(e)&&r({...o,roles:e})},selectedUserRoles:o.roles||[],roles:th})]}),(0,i.jsx)("div",{style:n.rightContent,children:(0,i.jsx)(F().A,{disabled:w,onClick:()=>d(sh.AddToken),children:(0,i.jsx)(h().sA,{id:"organizationScimSubTab.button.addToken",defaultMessage:"Add token"})})})]}),(0,i.jsx)(Zp,{organizationStore:t,spaceId:a,loading:p,scimBots:A,error:v,onRefresh:async()=>{await m()}}),l===sh.AddToken&&y?(0,i.jsx)(Fp,{organizationStore:t,userStore:y,spaceId:a,onSubmit:()=>u(!0),onDismiss:()=>{d(void 0),u(!1)},onRefresh:async()=>{await m()}}):null]})}const oh=(0,h().YK)({title:{id:"organizationScimSubTab.title",defaultMessage:"SCIM provisioning"},description:{id:"organizationScimSubTab.description",defaultMessage:"Seamlessly manage users and groups through your identity provider. Access SCIM tokens for each workspace below"},goBack:{id:"organizationScimSubTab.breadcrumb.goBack",defaultMessage:"General"}});var ih=()=>a(675801);function rh(){const e=(0,f().v3)(),{refreshOrganization:t}=(0,s.useContext)(_().D),a=(0,Cs().l)(),[n,o]=(0,s.useState)(!1),r=(0,x().K8)((()=>a.every((e=>e.getSettings().are_scim_invite_emails_suppressed))),[a]);return(0,i.jsx)(be().c,{items:[(0,i.jsx)(ih().S,{isEnabled:r,onToggle:async function(){o(!0);const s=!r;await ap({spaceIds:a.map((e=>e.id)),fn:async t=>S().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:e,data:{spaceId:t,spaceSettings:{are_scim_invite_emails_suppressed:s}}}),successMessage:(0,i.jsx)(h().sA,{id:"organization.general.scim.settings.suppressScimInviteEmails.success",defaultMessage:"Successfully updated SCIM invite emails setting for {count, plural, one {# workspace} other {# workspaces}}",values:{count:a.length}})}),await t(!0),o(!1)},disabled:n},"suppress-scim-invite-emails")]})}function lh(e){var t;let{organizationId:n,tabRoute:o,subtab:r,queryParams:l}=e;const d=(0,h().tz)(),c=(0,R().Z)(),u=(0,v().IS)((e=>({container:{display:"flex",gap:12,flexWrap:"wrap"},divider:{color:e.stroke.secondary},workspacesIcons:{display:"flex",height:24}})),[]),g=(0,f().v3)(),{state:m,loading:b}=(0,Iu().j)(),C=(0,x().K8)((()=>m.value?m.value.sampleMemberIds.map((e=>new(ht().L)(g,{table:y().oo,id:e}))):[]),[g,m.value]),{scimBotCount:z,loading:D}=function(){const{spaceIds:e}=(0,s.useContext)(_().D),t=(0,f().v3)(),[{status:a,value:n}]=(0,Xe().Yb)((async()=>(await ap({spaceIds:e,fn:async e=>S().callApi({eventName:"getScimTokensForOrganizationSpace",environment:t,data:{spaceId:e}})})).map((e=>"success"===(null==e?void 0:e.type)?e.data.scimBots.length:0)).reduce(((e,t)=>e+t),0)),[t,e]);return{loading:"pending"===a,didError:"rejected"===a,scimBotCount:n}}(),N=(null===(t=m.value)||void 0===t?void 0:t.memberCount)||0,B=(0,Cs().l)(),{domainVerifications:L}=(0,a(522985).J)({organizationId:n}),E=(0,x().K8)((()=>L?L.map((e=>(0,a(375243).W0)({id:e.id,domain:e.domain,verificationCode:e.verification_code,createdAt:e.created_at,expiresAt:e.expires_at,verifiedAt:e.verified_at,invalidatedAt:e.info.invalidated_at}))).filter((e=>{let{status:t}=e;return t===a(366208).A$.Pending})).length:0),[L]),{updateCacheWithRecordMap:O}=(0,s.useContext)(k().N),U=(0,Ta().E)({organizationId:n}),F=(0,x().K8)((()=>null==U?void 0:U.getRawIcon()),[U]),H=(0,x().K8)((()=>(null==U?void 0:U.getName())||""),[U]),V=(0,x().K8)((()=>null==U?void 0:U.getEmailDomains().length),[U]),[W,q]=(0,s.useState)();(0,s.useEffect)((()=>{q(H)}),[H]);const G=(0,s.useMemo)((()=>r?function(e){switch(e){case Xt().al.Workspaces:return Xt().al.Workspaces;case Xt().al.EmailDomains:return Xt().al.EmailDomains;case Xt().al.Scim:return Xt().al.Scim;default:return Xt().al.Workspaces}}(r):void 0),[r]);const K=()=>{(0,xd().i)({environment:g,from:{tabRoute:Xt().Vo},organizationId:n,tabRoute:Xt().Vo,properties:{subtab:Xt().al.Workspaces}})};return U?G===Xt().al.Workspaces?(0,i.jsx)(Dp,{organizationStore:U}):G===Xt().al.EmailDomains?(0,i.jsx)(a(338499).CX,{organizationStore:U}):G===Xt().al.Scim?(0,i.jsx)(ah,{organizationStore:U,subtab:r,tabRoute:o,queryParams:l}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)($,{}),(0,i.jsxs)(Rd,{children:[(0,i.jsx)(Q,{title:(0,i.jsx)(h().sA,{id:"organization.general.organization.title",defaultMessage:"Edit organization details"}),byline:(0,i.jsx)(h().sA,{id:"organization.general.organization.byline",defaultMessage:"Edit this organization's name below. Changes will take effect immediately upon saving."}),bylineWidthOverride:"85%",icon:p().V,onSave:async function(){if(!U||W===H)return;const e=await S().callApi({eventName:"updateOrganization",environment:g,data:{organizationId:U.id,name:W}});"success"===e.type?(O(e),(0,w().u)({environment:g,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:U.id,updated_fields:["name"]}}})):j().f1((0,A().Hu)(M().A.getIntl(),e))},onCancel:()=>{q(H)},onIconChange:async function(e){if(!U||!e)return;const t=await S().callApi({eventName:"updateOrganization",environment:g,data:{organizationId:U.id,icon:e}});"success"===t.type?(O(t),(0,w().u)({environment:g,event:{eventName:"org_console_general_update_organization",eventProperties:{organization_id:U.id,updated_fields:["icon"]}}})):j().f1((0,A().Hu)(M().A.getIntl(),t))},onNameChange:e=>q(e),entityName:H,localIconWithPointer:void 0===F?void 0:{pointer:U.pointer,icon:F},entityDescription:(0,i.jsxs)(I().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:[(0,i.jsx)(h().sA,{id:"organization.general.orgMetadata",defaultMessage:"Enterprise plan"}),(0,i.jsx)(T().A,{style:{margin:"0 5px"}}),(0,i.jsx)(re().Qq,{memberCount:N})]})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:u.container,children:[(0,i.jsx)(ie,{memberCount:N,sampleMemberUserStores:C,onClick:()=>{(0,xd().i)({environment:g,from:{tabRoute:Xt().Vo},organizationId:n,tabRoute:Xt().kr,properties:{subtab:"members"}})},isLoading:b||0===N}),(0,i.jsx)(J().A,{headerText:(0,i.jsx)(h().sA,{id:"organization.general.workspaces.title",defaultMessage:"Workspaces"}),mainText:(0,i.jsx)(re().Cx,{workspacesCount:B.length}),bottom:(0,i.jsx)("div",{style:u.workspacesIcons,children:(0,i.jsx)(X().$,{spaceStores:B,isLoading:!1})}),onClick:K})]}),(0,i.jsx)(kr().A,{size:1,style:{marginTop:52},dividerColor:u.divider.color}),(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"organization.general.configure.title",defaultMessage:"Manage organization"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ne,{title:(0,i.jsx)(h().sA,{id:"organization.general.manageWorkspaces.title",defaultMessage:"Manage workspaces"}),byline:(0,i.jsx)(h().sA,{id:"organization.general.manageWorkspaces.subtitle",defaultMessage:"Add or remove workspaces from your organization"}),rightContent:0!==B.length&&(0,i.jsx)(re().Cx,{workspacesCount:B.length}),onClick:K}),(0,i.jsx)(ne,{title:(0,i.jsx)(h().sA,{id:"organization.general.manageEmailDomains.title",defaultMessage:"Manage email domains"}),byline:(0,i.jsx)(h().sA,{id:"organization.general.manageEmailDomains.subtitle",defaultMessage:"Verify email domains to manage matching user accounts and workspaces"}),rightContent:V?(0,i.jsx)(re().LL,{verifiedDomainsCount:V,pendingDomainsCount:E}):(0,i.jsx)(P().A,{style:c.shortShimmer}),onClick:()=>{(0,xd().i)({environment:g,from:{tabRoute:Xt().Vo},organizationId:n,tabRoute:Xt().Vo,properties:{subtab:Xt().al.EmailDomains}})}})]})}),(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"organization.general.saml.title",defaultMessage:"SAML Single sign-on (SSO)"}),content:(0,i.jsx)(Op,{})}),(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"organization.general.scim.title",defaultMessage:"SCIM provisioning"}),content:(0,i.jsxs)(ae().VP,{gap:16,width:"100%",children:[(0,i.jsx)(rh,{}),(0,i.jsx)(kr().A,{size:1,dividerColor:u.divider.color}),(0,i.jsx)(ne,{title:(0,i.jsx)(h().sA,{id:"organization.general.scimProvisioning.title",defaultMessage:"SCIM provisioning"}),badge:(0,i.jsx)(rs().A,{icon:Ir().questionMarkCircleIcon,ariaLabel:d.formatMessage({id:"organization.general.scimProvisioning.iconButton.ariaLabel",defaultMessage:"Learn more about SCIM provisioning"}),onClick:()=>Nm().f({environment:g,url:(0,ue().xS)("guides.scim")})}),byline:(0,i.jsx)(h().sA,{id:"organization.general.scimProvisioning.subtitle",defaultMessage:"Generate a token to configure SCIM"}),rightContent:D?(0,i.jsx)(P().A,{style:c.shortShimmer}):void 0!==z?(0,i.jsx)(re().Ox,{scimTokensCount:z}):null,onClick:()=>{(0,xd().i)({environment:g,from:{tabRoute:Xt().Vo},organizationId:n,tabRoute:Xt().Vo,properties:{subtab:Xt().al.Scim}})}}),(0,i.jsx)(Kr().l,{display:"inline",iconGroup:a(83489).H,label:(0,i.jsx)(h().sA,{id:"organization.general.scimProvisioning.setupInformation.title",defaultMessage:"Setup information"}),tint:"gray",description:(0,i.jsxs)(ae().VP,{gap:12,paddingTop:16,children:[(0,i.jsxs)(ae().fI,{justifyContent:"space-between",alignItems:"center",children:[(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"organization.general.scimProvisioning.setupInformation.samlId",defaultMessage:"SAML SSO Entity ID"})}),(0,i.jsx)(dh,{text:(0,Pm().Hw)(Gt().A.domainBaseUrl),toastSuccessMessage:ch.entityIdSuccessfulCopy})]}),(0,i.jsx)(kr().A,{size:1,dividerColor:u.divider.color}),(0,i.jsxs)(ae().fI,{justifyContent:"space-between",alignItems:"center",children:[(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"organization.general.scimProvisioning.setupInformation.scimUrl",defaultMessage:"SCIM Base URL"})}),(0,i.jsx)(dh,{text:Gt().A.domainBaseUrl+Te().JZ.scimApiBasePath,toastSuccessMessage:ch.baseUrlSuccessfulCopy})]})]})})]})}),(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"organization.general.deleteOrganization.title",defaultMessage:"Organization settings"}),content:(0,i.jsx)(Lm,{organizationStore:U})})]})]})]}):null}function dh(e){const{text:t,toastSuccessMessage:a}=e,s=(0,f().v3)(),n=(0,h().tz)();return(0,i.jsxs)(ae().fI,{justifyContent:"space-between",alignItems:"center",gap:8,children:[(0,i.jsx)(I().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t}),(0,i.jsx)(bs().lz,{isHovered:!0,onCopyClick:async function(e){e.stopPropagation();const o=await qd().R.clipboardActions.load();await o.copyString({stringValue:t,environment:s,copiedMessage:o.clipboardMessages.copiedPropertyToClipboard}),nt().D6({label:n.formatMessage(a)})}})]})}const ch=(0,h().YK)({entityIdSuccessfulCopy:{defaultMessage:"Copied ID to clipboard",id:"organization.general.scimProvisioning.entityId.successfulCopy"},baseUrlSuccessfulCopy:{defaultMessage:"Copied URL to clipboard",id:"organization.general.scimProvisioning.baseUrl.successfulCopy"}});function uh(e){let{organizationStore:t}=e;const a=(0,v().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:16,width:"100%"},divider:{color:e.stroke.secondary}})),[]);return(0,i.jsxs)("div",{style:a.container,children:[(0,i.jsx)(be().y,{title:(0,i.jsx)(h().sA,{id:"organization.people.accountAccess.settings.actions.sessionDuration.title",defaultMessage:"Session duration"}),byline:(0,i.jsx)(h().sA,{id:"organization.people.accountAccess.settings.actions.sessionDuration.byline",defaultMessage:"Set re-authentication interval for managed accounts"}),item:(0,i.jsx)(Dd,{organizationStore:t})}),(0,i.jsx)(kr().A,{dividerColor:a.divider.color,size:1}),(0,i.jsx)(be().y,{title:(0,i.jsx)(h().sA,{id:"organization.people.accountAccess.settings.actions.passwordManagement.title",defaultMessage:"Reset passwords for all users"}),byline:(0,i.jsx)(h().sA,{id:"organization.people.accountAccess.settings.actions.passwordManagement.byline",defaultMessage:"Log out and force all managed users to reset their passwords on next login"}),item:(0,i.jsx)(Id,{organizationStore:t,isRed:!0})}),(0,i.jsx)(kr().A,{dividerColor:a.divider.color,size:1}),(0,i.jsx)(be().y,{title:(0,i.jsx)(h().sA,{id:"organization.people.accountAccess.settings.actions.sessionManagement.title",defaultMessage:"Log out all users"}),byline:(0,i.jsx)(h().sA,{id:"organization.people.accountAccess.settings.actions.sessionManagement.byline",defaultMessage:"Log out all managed users and require re-authentication"}),item:(0,i.jsx)(jd,{organizationStore:t,isRed:!0})})]})}function gh(e){let{organizationStore:t}=e;const a=Pd(t),n=(0,R().Z)(),{availableOrganizationFeatures:o}=(0,s.useContext)(_().D),r=o.org_managed_user_workspace_region,l=(0,v().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:16,width:"100%"},divider:{color:e.stroke.secondary}})),[]);return(0,i.jsxs)("div",{style:l.container,children:[(0,i.jsx)(be().y,{title:(0,i.jsx)(h().sA,{id:"organization.people.managedAccounts.settings.toggles.changeProfileInformation.title",defaultMessage:"Allow users to change profile information"}),byline:(0,i.jsx)(h().sA,{id:"organization.people.managedAccounts.settings.toggles.changeProfileInformation.byline",defaultMessage:"Allow managed users to update their name, email, and profile photo"}),item:(0,i.jsx)(ye().A,{on:!Boolean(a.prevent_profile_edits.value),onClick:a.prevent_profile_edits.toggle,disabled:a.prevent_profile_edits.loading})}),(0,i.jsx)(kr().A,{dividerColor:l.divider.color,size:1}),(0,i.jsx)(be().y,{title:(0,i.jsx)(h().sA,{id:"organization.people.managedAccounts.settings.toggles.createNewWorkspaces.title",defaultMessage:"Allow users to create new workspaces"}),byline:(0,i.jsx)(h().sA,{id:"organization.people.managedAccounts.settings.toggles.createNewWorkspaces.byline",defaultMessage:"When on, any user can create workspaces. When off, only organization owners can."}),item:(0,i.jsx)(ye().A,{on:"unrestricted"===a.workspace_creation_enum.value,onClick:a.workspace_creation_enum.toggle,disabled:a.workspace_creation_enum.loading})}),(0,i.jsx)(kr().A,{dividerColor:l.divider.color,size:1}),(0,i.jsx)(be().y,{title:(0,i.jsx)(h().sA,{id:"organization.people.managedAccounts.settings.toggles.joinExternalWorkspaces.title",defaultMessage:"Allow users to join external workspaces"}),byline:(0,i.jsx)(h().sA,{id:"organization.people.managedAccounts.settings.toggles.joinExternalWorkspaces.byline",defaultMessage:"When on, all members can join external workspaces. When off, only organization owners can."}),item:(0,i.jsx)(ye().A,{on:!Boolean(a.prevent_members_joining_external_workspace.value),onClick:a.prevent_members_joining_external_workspace.toggle,disabled:a.prevent_members_joining_external_workspace.loading})}),(0,i.jsx)(kr().A,{dividerColor:l.divider.color,size:1}),(0,i.jsx)(be().y,{title:(0,i.jsx)(h().sA,{id:"organization.people.managedAccounts.settings.toggles.grantSupportAccess.title",defaultMessage:"Allow users to grant support access to accounts"}),byline:(0,i.jsx)(h().sA,{id:"organization.people.managedAccounts.settings.toggles.grantSupportAccess.byline",defaultMessage:"Allow Notion support to troubleshoot or recover content; access can be revoked anytime"}),item:(0,i.jsx)(ye().A,{on:!Boolean(a.prevent_granting_support_access.value),onClick:a.prevent_granting_support_access.toggle,disabled:a.prevent_granting_support_access.loading})}),(0,i.jsx)(kr().A,{dividerColor:l.divider.color,size:1}),(0,i.jsx)(be().y,{title:(0,i.jsx)(h().sA,{id:"organization.people.managedAccounts.settings.toggles.enableNotionMail.title",defaultMessage:"Enable Notion Mail"}),byline:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h().sA,{id:"organization.people.managedAccounts.settings.toggles.enableNotionMail.byline",defaultMessage:"Enable Notion Mail for all members under your company domains."}),(0,i.jsx)("br",{}),(0,i.jsx)(h().sA,{id:"organization.people.managedAccounts.settings.toggles.enableNotionMail.terms",defaultMessage:"If you re-enable Notion Mail, the changes will take 24 hours to fully propagate."})]}),item:(0,i.jsx)(ye().A,{on:!Boolean(a.disable_notion_mail.value),onClick:a.disable_notion_mail.toggle,disabled:a.disable_notion_mail.loading})}),r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(kr().A,{dividerColor:l.divider.color,size:1}),(0,i.jsx)(be().y,{title:(0,i.jsx)(h().sA,{id:"organization.people.managedAccounts.settings.setDefaultDataResidency.title",defaultMessage:"Default data residency"}),byline:(0,i.jsx)(h().sA,{id:"organization.people.managedAccounts.settings.setDefaultDataResidency.byline",defaultMessage:"Select default hosting region for newly created workspaces by managed accounts"}),item:void 0===a.workspace_region.value?(0,i.jsx)(P().A,{style:n.longShimmer}):(0,i.jsx)(Ol,{workspaceRegion:a.workspace_region.value,setWorkspaceRegion:a.workspace_region.set})})]})]})}var mh=()=>a(240865);const ph=Ze().q,hh={managedUsers:[],filters:{query:"",multiFactorStatus:void 0,workspaceId:void 0},numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,paginationTokenHistory:[],loading:!1,error:void 0};var fh=()=>a(875166);function xh(e){let{selectedAccountStatus:t,setSelectedAccountStatus:a}=e;return(0,i.jsx)(qs().G0,{pillTitle:(0,i.jsx)(h().sA,{id:"managedAccounts.table.filters.accountStatus.title",defaultMessage:"Status"}),pillIcon:fh().E,selectedItem:t,setSelectedItem:a,items:vh,shouldUseCheck:!0})}const vh=[{key:"notSuspended",value:"notSuspended",title:(0,i.jsx)(h().sA,{id:"managedAccounts.table.filters.accountStatus.active",defaultMessage:"Active"}),shortTitle:(0,i.jsx)(h().sA,{id:"managedAccounts.table.filters.accountStatus.active",defaultMessage:"Active"}),wrapCaption:!0},{key:"suspended",value:"suspended",title:(0,i.jsx)(h().sA,{id:"managedAccounts.table.filters.accountStatus.suspended",defaultMessage:"Suspended"}),shortTitle:(0,i.jsx)(h().sA,{id:"managedAccounts.table.filters.accountStatus.suspended",defaultMessage:"Suspended"}),wrapCaption:!0}];const yh=(0,o().wt)("personSlash",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M16.2 16.675 3.52 3.987a.52.52 0 0 1-.158-.383.53.53 0 0 1 .547-.54q.225 0 .39.15l12.674 12.681a.52.52 0 0 1 .157.383q0 .225-.157.39a.53.53 0 0 1-.39.157.53.53 0 0 1-.383-.15M10 4.862q-.533 0-.97.328a1.9 1.9 0 0 0-.636.855l-.903-.902a3 3 0 0 1 1.06-1.06A2.74 2.74 0 0 1 10 3.68q.827 0 1.504.424.684.424 1.08 1.141a3.2 3.2 0 0 1 .403 1.6 3.34 3.34 0 0 1-.328 1.47 3.2 3.2 0 0 1-.868 1.12l-.854-.854a1.96 1.96 0 0 0 .587-.718q.226-.458.226-1.018a2.1 2.1 0 0 0-.24-1.012 1.87 1.87 0 0 0-.635-.71 1.56 1.56 0 0 0-.875-.26Zm3.514 10.405 1.169 1.162-.206.013a3 3 0 0 1-.218.007H5.734q-1.75 0-1.75-1.176 0-.642.363-1.346a5 5 0 0 1 1.039-1.347 6 6 0 0 1 1.64-1.073 6.8 6.8 0 0 1 2.167-.567l1.142 1.148a2 2 0 0 0-.17-.007 2 2 0 0 0-.165-.007q-1.135 0-2.017.322-.874.314-1.476.8-.595.478-.91.99-.314.507-.314.903 0 .096.048.137.055.04.178.04z"})}),bh=(0,o().wt)("rectanglePencilEllipsis",{viewBox:"0 0 22 20",svg:(0,i.jsx)("path",{d:"M2.523 15.942q-.963 0-1.49-.512-.52-.513-.52-1.477V8.04q0-.971.52-1.477.527-.512 1.49-.512h12.845L14.11 7.3H2.715q-.84 0-.841.842v5.708q0 .396.219.615t.622.219h13.802q.403 0 .622-.22.219-.218.218-.614V9.257l1.36-1.36v6.056q0 .964-.519 1.477-.52.512-1.49.512zm10.391-4.6q-.116.047-.219-.055-.095-.102-.04-.219l.649-1.401 5.885-5.893 1.067 1.06-5.9 5.886zm7.861-7.034-1.06-1.067.493-.485a.7.7 0 0 1 .451-.212.53.53 0 0 1 .438.157l.191.185a.59.59 0 0 1 .192.45.67.67 0 0 1-.212.466zM4.438 12.012a.99.99 0 0 1-.725-.301 1 1 0 0 1-.294-.718q0-.417.294-.718.3-.3.724-.3.417 0 .711.3.301.3.301.718a.98.98 0 0 1-.3.718q-.295.3-.712.3Zm3 0a.98.98 0 0 1-.717-.301 1 1 0 0 1-.294-.718q0-.417.294-.718.3-.3.717-.3.424 0 .718.3.3.3.301.718a.98.98 0 0 1-.3.718.97.97 0 0 1-.719.3Zm3.008 0a.98.98 0 0 1-.717-.301.98.98 0 0 1-.301-.718q0-.417.3-.718.301-.3.718-.3.418 0 .718.3t.3.718a.98.98 0 0 1-.3.718q-.3.3-.718.3Z"})}),Sh={marginLeft:4,height:14,width:14,opacity:.5},jh={id:"user",headerTitle:(0,i.jsx)(h().sA,{id:"managedAccounts.table.user",defaultMessage:"Users"}),renderCell:e=>e.type===Qt().T.ManagedUser?(0,i.jsx)(da,{useThinTitle:!1,userId:e.managedUser.userId,badge:e.usersOnLegalHold.has(e.managedUser.userId)?(0,i.jsx)(Fi,{}):null,rightContent:(0,i.jsx)(_h,{managedUser:e.managedUser,isLastOrgOwner:e.isLastOrgOwner,handleEditDetails:e.handleEditDetails,handleUpdateUserSuspension:e.handleUpdateUserSuspension,handleLogOutUser:e.handleLogOutUser,handleResetPassword:e.handleResetPassword,handleDeleteUser:e.handleDeleteUser})}):(0,i.jsx)(ca,{}),widthData:{width:275,maxWidth:275},sortable:!1},wh={id:"email",headerTitle:(0,i.jsx)(h().sA,{id:"organizationAccounts.emailColumn.header",defaultMessage:"Email"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:240}}):(0,i.jsx)(bs().xF,{userId:e.managedUser.userId}),widthData:{widthPercent:40,minWidth:70},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},Ah={id:"workspaces",headerTitle:(0,i.jsx)(h().sA,{id:"managedAccounts.table.workspaces",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Qt().T.ManagedUser?(0,i.jsx)(Th,{managedUser:e.managedUser}):(0,i.jsx)(Rt().mf,{containerStyles:{width:140}}),widthData:{widthPercent:40,minWidth:120},sortable:!1},Mh={id:"lastActive",headerTitle:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},children:[(0,i.jsx)(h().sA,{id:"managedAccounts.table.lastActive",defaultMessage:"Last active"}),(0,i.jsx)(V().A,{render:e=>(0,i.jsx)("div",{...e,children:(0,a(525884).infoCircleIcon)(Sh)}),renderTooltip:()=>(0,i.jsx)(h().sA,{id:"managedAccounts.table.lastActive.tooltip",defaultMessage:"This may be delayed by several hours."})})]}),renderCell:e=>e.type===Qt().T.ManagedUser?(0,i.jsx)(Ui().F,{lastActiveAt:e.managedUser.lastActiveAt,containerStyle:{opacity:.5}}):(0,i.jsx)(Yo().h,{}),widthData:{widthPercent:20,minWidth:40},sortable:!1},Ch=[jh,{id:"accountStatus",headerTitle:(0,i.jsx)(h().sA,{id:"organization.managedAccounts.table.accountStatus",defaultMessage:"Status"}),renderCell:e=>e.type===Qt().T.ManagedUser?(0,i.jsx)(kh,{status:e.managedUser.accountStatus}):(0,i.jsx)(Rt().mf,{containerStyles:{width:80}}),widthData:{width:60},sortable:!1},wh,Ah,Mh];function Ih(e){let{organizationStore:t,usersOnLegalHold:a,managedUsers:n,loading:o,loadNextPage:r,loadPrevPage:l,currentPage:d,hasPreviousPage:c,hasNextPage:g,refreshPage:m,selectedIds:p,onSelectAll:y,onUnselectAll:b,onSelectRow:S}=e;const j=(0,f().v3)(),w=(0,Vt().A)(),A=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:Ch,theme:e,containerMarginTop:0})),[]),[M,C]=(0,s.useState)({isOpen:!1}),I=()=>{C({isOpen:!1})},[T,k]=(0,s.useState)(void 0),_=()=>{k(void 0)},[z,D]=(0,s.useState)(void 0),P=()=>{D(void 0)},N=(0,x().K8)((()=>n.map((e=>({id:e.userId,type:Qt().T.ManagedUser,managedUser:e,isLastOrgOwner:t.isUserLastOwner(e.userId),isClickable:!0,usersOnLegalHold:a,handleEditDetails:()=>{C({isOpen:!0,onDismiss:I,userId:e.userId,organizationStore:t,lastActiveAt:e.lastActiveAt,refreshPage:m})},handleUpdateUserSuspension:async()=>{"notSuspended"===e.accountStatus?k({type:"suspend",userId:e.userId,onDismiss:_,onSubmit:async()=>{await mu({environment:j,isSuspended:"suspended"===e.accountStatus,userId:e.userId}),m()}}):(await mu({environment:j,isSuspended:"suspended"===e.accountStatus,userId:e.userId}),m())},handleLogOutUser:()=>{k({type:"logoutSingle",onDismiss:_,onSubmit:async()=>{await wd({environment:j,organizationId:t.id,userId:e.userId}),m()}})},handleResetPassword:()=>{k({type:"resetPasswordSingle",userId:e.userId,onDismiss:_,onSubmit:async()=>{await Td({environment:j,organizationId:t.id,userId:e.userId}),m()}})},handleDeleteUser:()=>{D({userId:e.userId,onDismiss:P,onSubmit:async()=>{await cu({environment:j,isSuspended:"suspended"===e.accountStatus,userId:e.userId,refreshPage:m}),m()}})}})))),[j,n,t,m,a]);const R=o?(0,Qt().n)():N,B=Ch.map((e=>({...e,headerStyle:w.tableHeader,rowStyle:w.tableRow}))),L={header:{isDisabled:o,isSelected:p.length>0&&p.length===n.length,onClick:()=>{p.length===n.length?b():y()}},row:{getDisabledState:e=>o,getSelectedState:e=>e.type===Qt().T.ManagedUser&&p.includes(e.managedUser.userId),onClick:e=>{e.type===Qt().T.ManagedUser&&S(e.managedUser.userId)}}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Nt().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:B,rows:R,renderNoRowsComponent:()=>o?null:(0,i.jsx)(qt,{icon:u().peopleIcon,title:(0,i.jsx)(h().sA,{id:"managedAccounts.table.empty",defaultMessage:"No users found"}),byline:(0,i.jsx)(h().sA,{id:"managedAccounts.table.empty.byline",defaultMessage:"There are no users that match this query"})}),loadMoreMethod:{type:"pages",onLoadNext:r,onLoadPrevious:l,hasNextPage:g,hasPrevPage:c,currentPage:d},styles:A,multiselect:L,onRowClick:function(e){e.type===Qt().T.ManagedUser&&C({isOpen:!0,onDismiss:I,userId:e.managedUser.userId,organizationStore:t,lastActiveAt:e.managedUser.lastActiveAt,refreshPage:m})},extendToFullScreen:Yt().e}),M.isOpen&&(0,i.jsx)(Gi,{...M,isOnLegalHold:a.has(M.userId)}),T&&(0,i.jsx)(bd,{...T}),z&&(0,i.jsx)(ru,{shouldWarnLegalHold:a.has(z.userId),...z})]})}function Th(e){let{managedUser:t}=e;return 0===t.workspaces.length?(0,i.jsx)(I().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,i.jsx)(h().sA,{id:"organizationManagedUsersTable.spacesColumn.noWorkspaces",defaultMessage:"No workspaces"})}):(0,i.jsx)(X().Nt,{workspaces:t.workspaces,showTooltip:!0})}function kh(e){const{status:t}=e;let a,s,n,o;const r=(0,v().DP)();switch(t){case"notSuspended":a=(0,i.jsx)(h().sA,{id:"organization.managedAccounts.table.accountStatusValue.active",defaultMessage:"Active"}),s=r.statusTokenText.green,o=r.statusTokenBackground.green,n="green";break;case"suspended":a=(0,i.jsx)(h().sA,{id:"organization.managedAccounts.table.accountStatusValue.suspended",defaultMessage:"Suspended"}),s=r.statusTokenText.yellow,o=r.statusTokenBackground.yellow,n="yellow";break;default:(0,Pe().HB)(t)}return(0,i.jsx)(St().A,{format:dt().NY.Medium,value:a,isSingle:!0,showRemoveButton:!1,isRound:!0,backgroundColor:o,showColoredDot:n,color:s})}function _h(e){const t=(0,h().tz)(),{managedUser:s,isLastOrgOwner:n,handleEditDetails:o,handleUpdateUserSuspension:r,handleLogOutUser:l,handleResetPassword:d,handleDeleteUser:c}=e,u=(0,x().uB)(void 0,Ei().A),g=(0,v().IS)((()=>({popupMenu:{width:248},icon:{height:20,width:20,fill:"currentColor"}})),[]),m=[{key:"edit-details",render:e=>(0,i.jsx)(Ue().A,{...e,icon:(0,a(859384).M)(g.icon),title:(0,i.jsx)(h().sA,{id:"organizationManagedUsersTable.userColumn.menu.editDetails",defaultMessage:"Edit details"})}),action:()=>{o(),u.setState({...u.state,open:!1})}},{key:"log-out-user",render:e=>(0,i.jsx)(Ue().A,{...e,icon:(0,Om().U)(g.icon),title:(0,i.jsx)(h().sA,{id:"organizationManagedUsersTable.userColumn.menu.logoutUser",defaultMessage:"Log out"})}),action:()=>{l(),u.setState({...u.state,open:!1})}},{key:"reset-password",render:e=>(0,i.jsx)(Ue().A,{...e,icon:bh(g.icon),title:(0,i.jsx)(h().sA,{id:"organizationManagedUsersTable.userColumn.menu.resetPassword",defaultMessage:"Reset password"})}),action:()=>{d(),u.setState({...u.state,open:!1})}}],p={key:"actions",render:e=>(0,i.jsx)(Fe().A,{title:(0,i.jsx)(h().sA,{id:"organizationManagedUsersTable.userColumn.menu.title",defaultMessage:"Managed account actions"}),...e}),items:m},f=[{key:"suspend-user",render:e=>(0,i.jsx)(Ue().A,{...e,isRedOnHover:!0,icon:"suspended"===s.accountStatus?(0,ci().D)(g.icon):yh(g.icon),title:"suspended"===s.accountStatus?(0,i.jsx)(h().sA,{id:"organizationManagedUsersTable.userColumn.menu.unSuspendUser",defaultMessage:"Reactivate user"}):(0,i.jsx)(h().sA,{id:"organizationManagedUsersTable.userColumn.menu.suspendUser",defaultMessage:"Suspend user"})}),action:()=>{r(),u.setState({...u.state,open:!1})}},{key:"delete-user",render:e=>(0,i.jsx)(Ue().A,{...e,isRedOnHover:!0,icon:(0,Pt().trashIcon)(g.icon),title:(0,i.jsx)(h().sA,{id:"organizationManagedUsersTable.userColumn.menu.deleteUser",defaultMessage:"Delete user"}),disabled:n,disabledFeedback:n}),action:()=>{c(),u.setState({...u.state,open:!1})}}],y={key:"destructive-actions",render:e=>(0,i.jsx)(Fe().A,{topBorder:!0,...e}),items:f};return(0,i.jsx)(Oi().Ay,{stopClickPropagation:!0,popupType:Qa().n.Popup,alignmentToOrigin:Ya().C.Start,placementToOrigin:Ya().W.Bottom,style:g.popupMenu,render:()=>(0,i.jsx)(xt().A,{menuType:mt().gu.Popup,width:248,children:(0,i.jsx)(vt().Ay,{type:vt().Oh.Vertical,initialFocus:void 0,sections:[p,y]})}),onClose:()=>{},buttonPopupStore:u,renderOrigin:e=>(0,i.jsx)(rs().A,{ariaLabel:t.formatMessage({id:"managedUserActionsMenuButton.iconButton.ariaLabel",defaultMessage:"More actions"}),icon:Pi().W,...e})})}var zh=()=>a(771495);function Dh(e){let{selectedMfaMethod:t,setSelectedMfaMethod:a}=e;return(0,i.jsx)(qs().G0,{pillTitle:(0,i.jsx)(h().sA,{id:"managedUsersTab.table.filters.mfaMethod.title",defaultMessage:"2-step verification method"}),pillIcon:Di().g,selectedItem:t,setSelectedItem:a,items:zh().l,shouldUseCheck:!0})}const Ph=(0,h().YK)({placeholder:{id:"identityProvisioningSettings.managedUsers.searchInput.placeholder",defaultMessage:"Search name, email, or user ID"}});function Nh(e){let{organizationStore:t}=e;const a=(0,f().v3)(),s=(0,i.jsx)(h().sA,{id:"organization.people.accounts.title",defaultMessage:"Manage user accounts"});return(0,i.jsx)(Nd().D,{breadcrumbs:[{message:(0,i.jsx)(h().sA,{id:"organizationGuestsSubTab.breadcrumb.goBack",defaultMessage:"People"}),onClick:()=>{(0,xd().i)({environment:a,from:{tabRoute:Xt().kr,properties:{subtab:Xt().DE.ManagedUsers}},organizationId:t.id,tabRoute:Xt().kr})}},{message:s}],children:(0,i.jsxs)(Hl().t,{children:[(0,i.jsx)(Ua()._,{title:s,byline:(0,i.jsx)(h().sA,{id:"organization.people.accounts.byline",defaultMessage:"Manage user accounts with verified domain emails: adjust access, update profiles, and control permissions"})}),(0,i.jsx)(Bh,{organizationStore:t})]})})}var Rh=function(e){return e.AddToWorkspace="add-to-workspace",e.RemoveFromWorkspace="remove-from-workspace",e.DeleteUser="delete-user",e}(Rh||{});function Bh(e){let{organizationStore:t}=e;const a=(0,f().v3)(),n=(0,h().tz)(),o=(0,mh().V)()||0,r=(0,v().IS)((e=>({link:{fontSize:14,fontWeight:400,color:e.text.secondary,textDecoration:"none"},title:{marginTop:21,fontWeight:L().Wy.semibold,fontSize:17,display:"flex",justifyContent:"flex-start",alignItems:"center"},byline:{fontSize:14,fontWeight:L().Wy.regular,color:e.text.secondary,paddingBottom:20},count:{marginLeft:4,opacity:.5,fontWeight:400},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"},leftContent:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",margin:"0 auto 12px",paddingTop:4,rowGap:4},rightContent:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",margin:"0 auto 12px",minHeight:28,gap:8},tableHeader:{position:"relative",display:"flex",flexDirection:"row"}})),[]),{managedUsers:l,filters:d,setFilters:c,loading:u,currentPage:g,hasPrevPage:m,hasNextPage:p,loadNextPage:b,loadPrevPage:j,refreshPage:A}=function(e){let{organizationStore:t}=e;const a=(0,f().v3)(),[n,o]=(0,s.useState)(hh),i=(0,s.useRef)(n.filters),r=(0,s.useRef)(!1),l=(0,x().K8)((()=>t.getEmailDomains()),[t]),d=(0,s.useMemo)((()=>n.filters.emailDomains&&n.filters.emailDomains.length>0?n.filters.emailDomains:l),[n.filters.emailDomains,l]),c=(0,s.useCallback)((async e=>{if(0===d.length)return;let s=n.loading,r=n.error,l=n.hasNextPage,c=n.paginationToken,u=n.paginationTokenHistory;if(e.restartSearch&&(o((e=>({...hh,filters:e.filters}))),s=hh.loading,r=hh.error,l=hh.hasNextPage,c=hh.paginationToken,u=[]),l&&!s&&!r){o((e=>({...e,loading:!0}))),i.current=n.filters;try{var g;const s=await S().callApi({eventName:"getManagedUsers",environment:a,data:{query:n.filters.query,multiFactorStatus:n.filters.multiFactorStatus,workspaceId:n.filters.workspaceId,userStatus:n.filters.managedUserStatus,paginationToken:c,emailDomains:d,limit:ph}});if(yd().F2(a,{filters:{multiFactorStatus:n.filters.multiFactorStatus,workspaceId:n.filters.workspaceId},query_length:(null===(g=n.filters.query)||void 0===g?void 0:g.length)??0,current_page:c}),e.isRefreshing||(0,w().u)({environment:a,event:{eventName:"org_console_people_table_query",eventProperties:{table:"managed_accounts",organization_id:t.id,filter_keys:Object.keys($e().fN(n.filters,(e=>Boolean(e))))}}}),"failed"===s.type)throw s.error;const i=s.data.nextPaginationToken,r=s.data.results;o((e=>({...e,managedUsers:r,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:i,paginationTokenHistory:c?[...u,c]:u,hasNextPage:Boolean(i)})))}catch(m){const e=(0,Ss().A)(m);o((t=>({...t,loading:!1,error:e})))}}}),[a,n.loading,n.error,n.hasNextPage,n.paginationToken,n.paginationTokenHistory,n.filters,d,t.id]),u=(0,s.useCallback)((async e=>{if(0===d.length)return;let t=n.loading,s=n.error,r=n.paginationToken,l=n.paginationTokenHistory;if(e.restartSearch&&(o((e=>({...hh,filters:e.filters}))),t=hh.loading,s=hh.error,r=hh.paginationToken,l=[]),0===l.length||t)return;if(s)return;o((e=>({...e,loading:!0}))),i.current=n.filters;const c=l[l.length-2];try{var u;const e=await S().callApi({eventName:"getManagedUsers",environment:a,data:{query:n.filters.query,multiFactorStatus:n.filters.multiFactorStatus,workspaceId:n.filters.workspaceId,userStatus:n.filters.managedUserStatus,paginationToken:c,emailDomains:d,limit:ph}});if(yd().F2(a,{filters:{multiFactorStatus:n.filters.multiFactorStatus,workspaceId:n.filters.workspaceId},query_length:(null===(u=n.filters.query)||void 0===u?void 0:u.length)??0,current_page:r}),"failed"===e.type)throw e.error;const t=e.data.nextPaginationToken,s=e.data.results;o((e=>({...e,managedUsers:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:t,paginationTokenHistory:l.slice(0,-1),hasNextPage:Boolean(t)})))}catch(g){const e=(0,Ss().A)(g);o((t=>({...t,loading:!1,error:e})))}}),[a,n.loading,n.error,n.paginationToken,n.paginationTokenHistory,n.filters,d]);(0,s.useEffect)((()=>{!r.current&&d.length>0&&(c({restartSearch:!0}),r.current=!0)}),[d,c]),(0,s.useEffect)((()=>{$e().n4(i.current,n.filters)||c({restartSearch:!0})}),[n.filters,c]);const g=(0,s.useCallback)((()=>c({restartSearch:!1})),[c]),m=(0,s.useCallback)((()=>u({restartSearch:!1})),[u]),p=(0,s.useCallback)((e=>{o((t=>({...t,filters:{...t.filters,...e}})))}),[]),h=(0,s.useCallback)(((e,t)=>{o((a=>({...a,managedUsers:a.managedUsers.map((a=>a.userId===e?{...a,workspaces:a.workspaces.filter((e=>e.id!==t))}:a))})))}),[]),v=(0,s.useCallback)(((e,t)=>{o((a=>({...a,managedUsers:a.managedUsers.map((a=>a.userId===e?{...a,accountStatus:t}:a))})))}),[]),y=(0,s.useCallback)((e=>{o((t=>({...t,managedUsers:t.managedUsers.filter((t=>t.userId!==e))})))}),[]),b=(0,s.useCallback)((()=>c({restartSearch:!0,isRefreshing:!0})),[c]);return{managedUsers:n.managedUsers,filters:n.filters,loading:n.loading,error:n.error,removeWorkspaceFromUser:h,removeUserFromManagedUsers:y,setFilters:p,currentPage:n.paginationTokenHistory.length+1,hasNextPage:n.hasNextPage,loadNextPage:g,hasPrevPage:n.paginationTokenHistory.length>0,loadPrevPage:m,updateManagedUserAccountStatus:v,refreshPage:b}}({organizationStore:t}),M=(0,s.useMemo)((()=>l.map((e=>e.userId))),[l]),{selectedIds:I,handleToggleId:T,handleSelectAllIds:z,handleUnselectAllIds:D}=Lt({allPossibleIds:M}),{organizationOwnerRecordCache:P}=(0,s.useContext)(k().N),{spaceIds:N}=(0,s.useContext)(_().D),[R,B]=(0,s.useState)(),E=(0,x().K8)((()=>{const e=[];for(const t of N)e.push(new(C().SL)(a,{id:t,table:aa().NX},{inMemoryRecordCache:P}));return e.map((e=>{var t;return{id:e.id,name:e.getName(),createdTime:e.getCreatedTime(),memberCount:o,icon:null===(t=e.getIcon())||void 0===t?void 0:t.icon,subscriptionTier:e.getSubscriptionTier()}}))}),[a,P,N,o]),{membersSet:O}=ko({organizationId:t.id});function U(){B(void 0)}async function F(){await A(),D()}const H=(0,x().K8)((()=>new za),[]),V=(0,x().K8)((()=>t.getEmailDomains()),[t]),W=(0,x().K8)((()=>I.map((e=>new(C().LU)(a,{table:y().oo,id:e}).getModel())).filter(Pe().O9).map((e=>({type:"existingUser",value:e,spaceRole:void 0})))),[a,I]);(0,s.useEffect)((()=>{H.setState({...H.state,inviteTargets:W,inviteRole:"read_and_write"})}),[H,W]);const{inviteTargets:q}=(0,x().K8)((()=>({inviteTargets:H.state.inviteTargets})),[H]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:r.tableHeader,children:[(0,i.jsxs)("div",{style:r.leftContent,children:[(0,i.jsxs)(La,{isOpen:I.length>0,children:[(0,i.jsx)(Ea,{isPrimary:!0,title:(0,i.jsx)(Oa,{itemsSelectedCount:I.length}),onClick:D}),(0,i.jsx)(Ea,{icon:Dt().x,title:(0,i.jsx)(h().sA,{id:"organizationManagedAccountsSubTab.multiselect.addToWorkspace",defaultMessage:"Add to workspace"}),onClick:()=>B(Rh.AddToWorkspace)}),(0,i.jsx)(Ea,{icon:ys,title:(0,i.jsx)(h().sA,{id:"organizationManagedAccountsSubTab.multiselect.removeFromWorkspace",defaultMessage:"Remove from workspace"}),onClick:()=>B(Rh.RemoveFromWorkspace)})]}),(0,i.jsx)(Gs,{pillTitle:(0,i.jsx)(h().sA,{id:"organizationManagedAccountsTable.emailDomainsFilter.pillTitle",defaultMessage:"Domain email"}),emailDomains:V,selectedEmailDomains:d.emailDomains||[],setSelectedEmailDomains:e=>{c({emailDomains:e})}}),(0,i.jsx)(Oo,{selectedSpaceId:d.workspaceId,setSelectedSpaceId:e=>{c({workspaceId:e})},spaceData:E}),(0,i.jsx)(Dh,{selectedMfaMethod:d.multiFactorStatus,setSelectedMfaMethod:e=>{c({multiFactorStatus:e})}}),(0,i.jsx)(xh,{selectedAccountStatus:d.managedUserStatus,setSelectedAccountStatus:e=>{c({managedUserStatus:e})}})]}),(0,i.jsx)("div",{style:r.rightContent,children:(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:d.query,setQueryFilter:e=>c({query:e}),placeholderText:n.formatMessage(Ph.placeholder)})})]}),R===Rh.AddToWorkspace?(0,i.jsx)(Hi,{permissionsInviteStore:H,onDismiss:U,organizationStore:t,refreshPage:F}):null,R===Rh.RemoveFromWorkspace?(0,i.jsx)(un,{permissionsInviteStore:H,onDismiss:U,organizationStore:t,refreshPage:F,membersSpaceIds:Lh({managedUsers:l,inviteTargets:q})}):null,(0,i.jsx)(Ih,{organizationStore:t,managedUsers:l,usersOnLegalHold:O,loading:u,currentPage:g,loadNextPage:b,loadPrevPage:j,hasPreviousPage:m,hasNextPage:p,selectedIds:I,onSelectAll:z,onUnselectAll:D,onSelectRow:T,refreshPage:F})]})}function Lh(e){let{managedUsers:t,inviteTargets:a}=e;const s=new Set;if(t)for(const n of a){const e=t.find((e=>e.userId===n.value.id));for(const t of(null==e?void 0:e.workspaces)??[])s.add(t.id)}return s}const Eh=Ze().q,Oh={groups:[],loading:!1,error:void 0,hasNextPage:!0,cursor:void 0,sortState:{column:ga,sortAscending:!0},filters:{},query:"",hasPreviousPage:!1},Uh={columnName:"name",direction:"ascending"};function Fh(e){return"name"===e.column.id?{columnName:"name",direction:e.sortAscending?"ascending":"descending"}:"members"===e.column.id?{columnName:"members",direction:e.sortAscending?"ascending":"descending"}:Uh}const Hh=(0,h().YK)({placeholder:{id:"organizationGroupsSubTab.groupsSearch.placeholder",defaultMessage:"Search by email or name."},name:{id:"organizationGroupsSubTab.sort.name",defaultMessage:"Name"},memberCount:{id:"organizationGroupsSubTab.sort.memberCount",defaultMessage:"Member count"}});function Vh(e){let{organizationStore:t,groupId:a}=e;const s=(0,f().v3)(),n=(0,i.jsx)(h().sA,{id:"organization.people.groups.title",defaultMessage:"Manage groups"});return(0,i.jsx)(Nd().D,{breadcrumbs:[{message:(0,i.jsx)(h().sA,{id:"organizationGroupsSubTab.breadcrumb.goBack",defaultMessage:"People"}),onClick:()=>{(0,xd().i)({environment:s,from:{tabRoute:Xt().kr,properties:{subtab:Xt().DE.Groups}},organizationId:t.id,tabRoute:Xt().kr})}},{message:n}],children:(0,i.jsxs)(Hl().t,{children:[(0,i.jsx)(Ua()._,{title:n,byline:(0,i.jsx)(h().sA,{id:"organization.people.groups.byline",defaultMessage:"Set up groups to manage page permissions from the share menu and manage teamspace members in bulk"})}),(0,i.jsx)(Wh,{organizationStore:t,groupId:a})]})})}function Wh(e){let{organizationStore:t,groupId:a}=e;const n=(0,h().tz)(),{groups:o,loading:r,error:l,loadNextPage:d,setSortState:c,filters:u,setFilters:g,query:m,setQuery:p,refreshPage:x,currentPage:v,loadPreviousPage:y,hasPreviousPage:b,hasNextPage:j,removePagesFromGroup:A}=function(e){let{organizationStore:t}=e;const a=(0,f().v3)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(k().N),[o,i]=(0,s.useState)(Oh),[r,l]=(0,s.useState)(1),d=(0,s.useRef)(!1),c=(0,s.useRef)(Oh.sortState),u=(0,s.useRef)({}),g=(0,s.useRef)(Oh.query),m=(0,s.useRef)(Oh.cursor),p=(0,s.useCallback)((async e=>{let{cursor:s,sortState:o,filters:r,query:l}=e;try{const e=await S().callApi({eventName:"getGroupsInOrganization",environment:a,data:{organizationId:t.id,sort:Fh(o),cursor:s,filters:r,query:l,limit:Eh}});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,Pe().HB)(e)}n({data:e.data}),i((t=>({...t,error:void 0,loading:!1,groups:e.data.groups,cursor:e.data.nextCursor,hasNextPage:e.data.hasNextPage,hasPreviousPage:void 0!==A()})))}catch(d){const e=(0,Ss().A)(d);i((t=>({...t,loading:!1,error:e})))}}),[a,t.id,n]),h=(0,s.useCallback)((async e=>{var s;let{restartSearch:n,overridePage:r}=e;if(!t.id)return;let l=o.loading,d=o.error,h=r?r.hasNextPage:o.hasNextPage,f=r?r.cursor:o.cursor;if(n&&(i((e=>({...Oh,sortState:e.sortState,filters:e.filters,query:e.query}))),l=Oh.loading,d=Oh.error,h=Oh.hasNextPage,f=Oh.cursor),!h||l)return;if(d)return;i((e=>({...e,loading:!0}))),u.current=o.filters,c.current=o.sortState,g.current=o.query,m.current=r?r.cursor:f;const x=null===(s=Fh(o.sortState))||void 0===s?void 0:s.columnName;return(0,w().u)({environment:a,event:{eventName:"org_console_people_table_query",eventProperties:{table:"groups",organization_id:t.id,filter_keys:Object.keys(o.filters),sort_columns:x?[x]:void 0,has_query:Boolean(o.query)}}}),p({cursor:f,sortState:o.sortState,filters:o.filters,query:o.query})}),[t.id,o,p,a]);(0,s.useEffect)((()=>{!d.current&&Boolean(t.id)&&(h({restartSearch:!0}),d.current=!0)}),[t,h]);const x=(0,s.useCallback)((()=>(l((e=>e+1)),h({restartSearch:!1}))),[h]);(0,s.useEffect)((()=>{$e().n4(c.current,o.sortState)||h({restartSearch:!0})}),[o.sortState,h]),(0,s.useEffect)((()=>{$e().n4(u.current,o.filters)||h({restartSearch:!0})}),[o.filters,h]),(0,s.useEffect)((()=>{$e().n4(g.current,o.query)||h({restartSearch:!0})}),[o.query,h]);const v=(0,s.useCallback)((e=>{i((t=>({...t,filters:{...t.filters,...e}})))}),[]),y=(0,s.useCallback)((e=>{i((t=>({...t,sortState:e??Oh.sortState})))}),[]),b=(0,s.useCallback)((e=>{i((t=>({...t,query:e})))}),[]),j=(0,s.useCallback)((async e=>(e&&i((e=>({...e,loading:!0,groups:[]}))),p({cursor:m.current,sortState:o.sortState,filters:o.filters,query:o.query}))),[p,o]);function A(){if(!m.current)return;const e=m.current.offset-Eh;return e<0?void 0:e}const M=(0,s.useCallback)((async()=>{const e=A();void 0!==e&&(l((e=>Math.max(1,e-1))),await h({restartSearch:!1,overridePage:{cursor:{offset:e},hasNextPage:!0}}))}),[h]),C=(0,s.useCallback)(((e,t)=>{i((a=>({...a,groups:a.groups.map((a=>a.groupId===e?{...a,sharedPageIds:a.sharedPageIds.filter((e=>!t.includes(e)))}:a))})))}),[]);return{groups:o.groups,loading:o.loading,error:o.error,loadNextPage:x,currentPage:r,hasNextPage:o.hasNextPage,cursor:o.cursor,setSortState:y,sortState:o.sortState,setFilters:v,filters:o.filters,query:o.query,setQuery:b,loadPreviousPage:M,hasPreviousPage:o.hasPreviousPage,refreshPage:j,removePagesFromGroup:C}}({organizationStore:t}),M=_o({spaceStores:(0,Cs().l)()}),C=(0,On().F)(),I=[{id:ga.id,name:n.formatMessage(Hh.name),type:"title"},{id:ha.id,name:n.formatMessage(Hh.memberCount),type:"number"}],[T,_]=(0,s.useState)(),[z,D]=(0,s.useState)(!1),[P,N]=(0,s.useState)(),R=P??T??[];return(0,s.useEffect)((()=>{if(!T||0===T.length)return void c(void 0);const e=T[0];switch(e.propertyId){case ga.id:c({column:ga,sortAscending:"ascending"===e.direction});break;case ha.id:c({column:ha,sortAscending:"ascending"===e.direction})}}),[c,T]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:C.tableHeader,children:[(0,i.jsxs)("div",{style:C.leftContent,children:[(0,i.jsx)(En().A,{children:(0,i.jsx)(Ha().e,{preventMultipleSorts:!0,sortProperties:I,isMenuOpen:z,setIsMenuOpen:D,onApply:e=>{D(!1),_(e),N(void 0)},currentSorts:R})}),R.length>0?(0,i.jsx)(Ln().he,{}):null,(0,i.jsx)(Eo,{selectedSpaceIds:u.spaceIds||[],setSelectedSpaceIds:e=>g({spaceIds:e}),spaceData:M})]}),(0,i.jsxs)("div",{style:C.rightContent,children:[(0,i.jsx)(Fa().x,{appliedSorts:T,openSortPillMenu:e=>{e&&N([{propertyId:e,direction:"ascending"}]),D(!0)},sortProperties:I}),(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:m,setQueryFilter:p,placeholderText:n.formatMessage(Hh.placeholder)})]})]}),(0,i.jsx)(xa,{groupId:a,groups:o,loading:r,error:l,organizationStore:t,loadNextPage:d,currentPage:v,loadPreviousPage:y,hasPreviousPage:b,refreshPage:x,hasNextPage:j,removePagesFromGroup:A})]})}const qh={id:"actor",headerTitle:(0,i.jsx)(h().sA,{id:"organizationGuestsTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(ca,{}):(0,i.jsx)(da,{useThinTitle:!1,userId:e.organizationGuest.userId,badge:e.usersOnLegalHold.has(e.organizationGuest.userId)?(0,i.jsx)(Fi,{}):null,rightContent:(0,i.jsx)(ef,{userId:e.organizationGuest.userId,setSelectedUserId:e.setSelectedUserId,setOpenedModal:e.setOpenedModal})}),widthData:{width:275,maxWidth:275},sortable:!1,shouldShowSortTooltip:!1},Gh={id:"email",headerTitle:(0,i.jsx)(h().sA,{id:"organizationGuestsTable.emailColumn.header",defaultMessage:"Email"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:240}}):(0,i.jsx)(bs().xF,{userId:e.organizationGuest.userId}),widthData:{widthPercent:35,minWidth:70},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},Kh={id:"spaces",headerTitle:(0,i.jsx)(h().sA,{id:"organizationGuestsTable.spacesColumn.header",defaultMessage:"Workspaces"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:140}}):(0,i.jsx)(gr,{organizationGuest:e.organizationGuest}),widthData:{widthPercent:35,minWidth:120},sortable:!1,hasClickableContents:!1},Yh={id:"pages",headerTitle:(0,i.jsx)(h().sA,{id:"organizationGuestsTable.pagesColumn.header",defaultMessage:"Pages"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Ft().Kb,{}):(0,i.jsx)(Jh,{organizationGuest:e.organizationGuest}),widthData:{widthPercent:15,minWidth:70},sortable:!1,shouldShowSortTooltip:!1,hasClickableContents:!1},Qh={id:"lastActive",headerTitle:(0,i.jsx)(h().sA,{id:"organizationGuestsTable.lastActiveColumn.header",defaultMessage:"Last active"}),renderCell:e=>e.type===Qt().T.Loading?(0,i.jsx)(Rt().mf,{containerStyles:{width:100}}):(0,i.jsx)(Ui().F,{lastActiveAt:e.organizationGuest.lastActiveTime,isNoActivitySecondaryColor:!0}),widthData:{widthPercent:15,minWidth:100},sortable:!1,shouldShowSortTooltip:!0,hasClickableContents:!1},$h=[qh,Gh,Kh,Qh,Yh];var Xh=function(e){return e.ConvertToMember="convert-to-member",e.RemoveFromWorkspace="remove-from-workspace",e}(Xh||{});function Zh(e){let{guests:t,usersOnLegalHold:a,loading:n,error:o,organizationStore:r,loadNextPage:l,refreshPage:d,currentPage:c,hasNextPage:g,hasPreviousPage:m,loadPreviousPage:p,selectedIds:b,onSelectAll:S,onUnselectAll:j,onSelectRow:w}=e;const A=(0,f().v3)(),M=(0,Vt().A)(),I=(0,v().IS)((e=>(0,Nt().rC)({columnRenderInfo:$h,theme:e,containerMarginTop:0})),[]),[T,k]=(0,s.useState)(),[_,z]=(0,s.useState)(),[D,P]=(0,s.useState)({isOpen:!1}),N=t.map((e=>({organizationGuest:e,usersOnLegalHold:a,id:e.userId,isClickable:!0,type:Qt().T.OrganizationGuest,setSelectedUserId:k,setOpenedModal:z}))),R=n?(0,Qt().n)():N;function B(){z(void 0)}const L=()=>{P({isOpen:!1})};const E=$h.map((e=>({...e,headerStyle:M.tableHeader,rowStyle:M.tableRow}))),O={header:{isDisabled:n,isSelected:b.length>0&&b.length===t.length,onClick:()=>{b.length===t.length?j():S()}},row:{getDisabledState:e=>n,getSelectedState:e=>e.type===Qt().T.OrganizationGuest&&b.includes(e.organizationGuest.userId),onClick:e=>{e.type===Qt().T.OrganizationGuest&&w(e.organizationGuest.userId)}}},U=(0,x().K8)((()=>{const e=new za,t=T?new(C().LU)(A,{table:y().oo,id:T}).getModel():void 0;return t?(e.setState({...e.state,inviteTargets:[{type:"existingUser",value:t,spaceRole:void 0}],inviteRole:"read_and_write"}),e):e}),[A,T]);return!n&&o?(0,i.jsx)(Kt,{error:o,runNewSearch:()=>d(!0)}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Nt().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:E,rows:R,renderNoRowsComponent:()=>(0,i.jsx)(qt,{icon:u().peopleIcon,title:(0,i.jsx)(h().sA,{id:"organizationGuestsTable.empty",defaultMessage:"No guests found"}),byline:(0,i.jsx)(h().sA,{id:"organizationGuestsTable.empty.byline",defaultMessage:"There are no guests that match this query"})}),styles:I,loadMoreMethod:{type:"pages",onLoadNext:l,onLoadPrevious:p,hasNextPage:g,hasPrevPage:m,currentPage:c},multiselect:O,onRowClick:function(e){e.type===Qt().T.OrganizationGuest&&P({isOpen:!0,onDismiss:L,userId:e.organizationGuest.userId,organizationStore:r,lastActiveAt:e.organizationGuest.lastActiveTime,refreshPage:async()=>d(!0)})},extendToFullScreen:Yt().e}),_===Xh.ConvertToMember?(0,i.jsx)(Ps,{organizationStore:r,permissionsInviteStore:U,onDismiss:B,refreshPage:d}):null,_===Xh.RemoveFromWorkspace?(0,i.jsx)(Us,{permissionsInviteStore:U,onDismiss:B,organizationStore:r,refreshPage:d,organizationGuests:t}):null,D.isOpen&&(0,i.jsx)(Gi,{...D,isOnLegalHold:a.has(D.userId)})]})}function Jh(e){let{organizationGuest:t}=e;const a=Object.values(t.guestPages).flat();return(0,i.jsx)(Rt().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,i.jsx)(h().sA,{id:"organizationGuestsTable.pagesColumn.title",defaultMessage:"{count, plural, one {# page} other {# pages}}",values:{count:a.length}})})}function ef(e){const t=(0,h().tz)(),{userId:a,setSelectedUserId:s,setOpenedModal:n}=e,o=(0,x().uB)(void 0,Ei().A),r=(0,v().IS)((()=>({popupMenu:{width:248},icon:{height:20,width:20,fill:"currentColor"}})),[]),l=[{key:"convert-to-member",render:e=>(0,i.jsx)(Ue().A,{...e,icon:(0,Dt().x)(r.icon),title:(0,i.jsx)(h().sA,{id:"organizationGuestsTable.userColumn.menu.convertToMember",defaultMessage:"Upgrade to member"})}),action:()=>{n(Xh.ConvertToMember),s(a),o.setState({...o.state,open:!1})}},{key:"remove-from-workspace",render:e=>(0,i.jsx)(Ue().A,{...e,icon:ys(r.icon),title:(0,i.jsx)(h().sA,{id:"organizationGuestsTable.userColumn.menu.removeUserFromWorkspace",defaultMessage:"Remove from workspace"})}),action:()=>{n(Xh.RemoveFromWorkspace),s(a),o.setState({...o.state,open:!1})}}],d={key:"actions",render:e=>(0,i.jsx)(Fe().A,{title:(0,i.jsx)(h().sA,{id:"organizationGuestsTable.userColumn.menu.title",defaultMessage:"Guest actions"}),...e}),items:l};return(0,i.jsx)(Oi().Ay,{stopClickPropagation:!0,popupType:Qa().n.Popup,alignmentToOrigin:Ya().C.Start,placementToOrigin:Ya().W.Bottom,style:r.popupMenu,render:()=>(0,i.jsx)(xt().A,{menuType:mt().gu.Popup,width:248,children:(0,i.jsx)(vt().Ay,{type:vt().Oh.Vertical,initialFocus:void 0,sections:[d]})}),onClose:$e().lQ,buttonPopupStore:o,renderOrigin:e=>(0,i.jsx)(rs().A,{ariaLabel:t.formatMessage({id:"guestActionsMenuButton.iconButton.ariaLabel",defaultMessage:"More actions"}),icon:Pi().W,...e})})}const tf={guests:[],loading:!1,error:void 0,hasNextPage:!0,cursor:void 0,sortState:{column:qh,sortAscending:!0},filters:{},query:"",hasPreviousPage:!1},af={columnName:"actor",direction:"ascending"};function sf(e){return"actor"===e.column.id?{columnName:"actor",direction:e.sortAscending?"ascending":"descending"}:"lastActive"===e.column.id?{columnName:"lastActive",direction:e.sortAscending?"ascending":"descending"}:af}function nf(e){let{selectedLastActiveOption:t,setSelectedLastActiveOption:a}=e;return(0,i.jsx)(qs().G0,{pillTitle:(0,i.jsx)(h().sA,{id:"filters.lastActive.title",defaultMessage:"Last active"}),pillIcon:Tr().D,selectedItem:t,setSelectedItem:a,items:of,shouldUseCheck:!0})}const of=[{key:"three-months",value:Ri.ThreeMonths,title:(0,i.jsx)(h().sA,{id:"settingsConsole.people.table.filters.lastActive.moreThanThreeMonths.title",defaultMessage:"Within the last 3 months"}),shortTitle:(0,i.jsx)(h().sA,{id:"settingsConsole.people.table.filters.lastActive.moreThanThreeMonths.shortTitle",defaultMessage:"3 months"})},{key:"six-months",value:Ri.SixMonths,title:(0,i.jsx)(h().sA,{id:"settingsConsole.people.table.filters.lastActive.moreThanSixMonths.title",defaultMessage:"Within the last 6 months"}),shortTitle:(0,i.jsx)(h().sA,{id:"settingsConsole.people.table.filters.lastActive.moreThanSixMonths.shortTitle",defaultMessage:"6 months"})},{key:"one-year",value:Ri.OneYear,title:(0,i.jsx)(h().sA,{id:"settingsConsole.people.table.filters.lastActive.moreThanOneYear.title",defaultMessage:"Within the last 1 year"}),shortTitle:(0,i.jsx)(h().sA,{id:"settingsConsole.people.table.filters.lastActive.moreThanOneYear.shortTitle",defaultMessage:"1 year"})}],rf=(0,h().YK)({placeholder:{id:"organizationGuestsSubTab.guestsSearch.placeholder",defaultMessage:"Search by email or name."},name:{id:"organizationGuestsSubTab.sort.name",defaultMessage:"Name"}});function lf(e){let{organizationStore:t}=e;const a=(0,f().v3)(),s=(0,i.jsx)(h().sA,{id:"organization.people.guests.title",defaultMessage:"Manage guests"});return(0,i.jsx)(Nd().D,{breadcrumbs:[{message:(0,i.jsx)(h().sA,{id:"organizationGuestsSubTab.breadcrumb.goBack",defaultMessage:"People"}),onClick:()=>{(0,xd().i)({environment:a,from:{tabRoute:Xt().kr,properties:{subtab:Xt().DE.Guests}},organizationId:t.id,tabRoute:Xt().kr})}},{message:s}],children:(0,i.jsxs)(Hl().t,{children:[(0,i.jsx)(Ua()._,{title:s,byline:(0,i.jsx)(h().sA,{id:"organization.people.guests.byline",defaultMessage:"Manage guests for page-specific access or upgrade them to members for broader permissions across the workspace"})}),(0,i.jsx)(cf,{organizationStore:t})]})})}var df=function(e){return e.ConvertToMember="convert-to-member",e.RemoveFromWorkspace="remove-from-workspace",e}(df||{});function cf(e){let{organizationStore:t}=e;const a=(0,h().tz)(),n=(0,f().v3)(),{guests:o,loading:r,error:l,loadNextPage:d,setSortState:c,filters:u,setFilters:g,query:m,setQuery:p,refreshPage:v,currentPage:b,loadPreviousPage:j,hasPreviousPage:A,hasNextPage:M}=function(e){let{organizationStore:t}=e;const a=(0,f().v3)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(k().N),[o,i]=(0,s.useState)(tf),[r,l]=(0,s.useState)(1),d=(0,s.useRef)(!1),c=(0,s.useRef)(tf.sortState),u=(0,s.useRef)({}),g=(0,s.useRef)(tf.query),m=(0,s.useRef)(tf.cursor),p=(0,s.useCallback)((async e=>{let{cursor:s,sortState:o,filters:r,query:l}=e;try{const e=await S().callApi({eventName:"getGuestsInOrganization",environment:a,data:{organizationId:t.id,cursor:s,sort:sf(o),filters:r,query:l}});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,Pe().HB)(e)}{n({data:e.data});const t=e.data.guests.map((t=>({userId:t.userId,guestPages:t.guestPages,lastActiveTime:e.data.guestIdToLastActive[t.userId]})));i((a=>({...a,loading:!1,guests:t,cursor:e.data.nextCursor,hasNextPage:e.data.hasNextPage,hasPreviousPage:void 0!==A()})))}}catch(d){const e=(0,Ss().A)(d);i((t=>({...t,loading:!1,error:e})))}}),[a,t.id,n]),h=(0,s.useCallback)((async e=>{var s;let{restartSearch:n,overridePage:r}=e;if(!t.id)return;let l=o.loading,d=o.error,h=r?r.hasNextPage:o.hasNextPage,f=r?r.cursor:o.cursor;if(n&&(i((e=>({...tf,sortState:e.sortState,filters:e.filters,query:e.query}))),l=tf.loading,d=tf.error,h=tf.hasNextPage,f=tf.cursor),!h||l)return;if(d)return;i((e=>({...e,loading:!0}))),u.current=o.filters,c.current=o.sortState,g.current=o.query,m.current=r?r.cursor:f;const x=null===(s=sf(o.sortState))||void 0===s?void 0:s.columnName;return(0,w().u)({environment:a,event:{eventName:"org_console_people_table_query",eventProperties:{table:"guests",organization_id:t.id,filter_keys:Object.keys(o.filters),sort_columns:x?[x]:void 0,has_query:Boolean(o.query)}}}),p({cursor:f,sortState:o.sortState,filters:o.filters,query:o.query})}),[t.id,o,p,a]);(0,s.useEffect)((()=>{!d.current&&Boolean(t.id)&&(h({restartSearch:!0}),d.current=!0)}),[t,h]);const x=(0,s.useCallback)((()=>(l((e=>e+1)),h({restartSearch:!1}))),[h]);(0,s.useEffect)((()=>{$e().n4(c.current,o.sortState)||h({restartSearch:!0})}),[o.sortState,h]),(0,s.useEffect)((()=>{$e().n4(u.current,o.filters)||h({restartSearch:!0})}),[o.filters,h]),(0,s.useEffect)((()=>{$e().n4(g.current,o.query)||h({restartSearch:!0})}),[o.query,h]);const v=(0,s.useCallback)((e=>{i((t=>({...t,filters:{...t.filters,...e}})))}),[]),y=(0,s.useCallback)((e=>{i((t=>({...t,sortState:e??tf.sortState})))}),[]),b=(0,s.useCallback)((e=>{i((t=>({...t,query:e})))}),[]),j=(0,s.useCallback)((async e=>(e&&i((e=>({...e,loading:!0,guests:[]}))),p({cursor:m.current,sortState:o.sortState,filters:o.filters,query:o.query}))),[p,o]);function A(){if(!m.current)return;const e=m.current.offset-Ze().q;return e<0?void 0:e}const M=(0,s.useCallback)((async()=>{const e=A();void 0!==e&&(l((e=>Math.max(1,e-1))),await h({restartSearch:!1,overridePage:{cursor:{offset:e},hasNextPage:!0}}))}),[h]);return{guests:o.guests,loading:o.loading,error:o.error,loadNextPage:x,currentPage:r,hasNextPage:o.hasNextPage,cursor:o.cursor,setSortState:y,sortState:o.sortState,setFilters:v,filters:o.filters,query:o.query,setQuery:b,loadPreviousPage:M,hasPreviousPage:o.hasPreviousPage,refreshPage:j}}({organizationStore:t}),I=(0,s.useMemo)((()=>o.map((e=>e.userId))),[o]),{selectedIds:T,handleToggleId:z,handleSelectAllIds:D,handleUnselectAllIds:P}=Lt({allPossibleIds:I}),N=_o({spaceStores:(0,Cs().l)()}),{membersSet:R}=ko({organizationId:t.id}),{guestEmailDomains:B}=(0,s.useContext)(_().D),[L,E]=(0,s.useState)(),O=(0,On().F)();function U(){E(void 0)}async function F(){await v(),P()}const H=(0,x().K8)((()=>new za),[]),V=(0,x().K8)((()=>T.map((e=>new(C().LU)(n,{table:y().oo,id:e}).getModel())).filter(Pe().O9).map((e=>({type:"existingUser",value:e,spaceRole:void 0})))),[n,T]);(0,s.useEffect)((()=>{H.setState({...H.state,inviteTargets:V,inviteRole:"read_and_write"})}),[H,V]);const W=[{id:qh.id,name:a.formatMessage(rf.name),type:"title"}],[q,G]=(0,s.useState)(),[K,Y]=(0,s.useState)(!1),[Q,$]=(0,s.useState)();(0,s.useEffect)((()=>{if(!q||0===q.length)return void c(void 0);const e=q[0];if(e.propertyId===qh.id)c({column:qh,sortAscending:"ascending"===e.direction})}),[c,q]);const X=Q??q??[];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:O.tableHeader,children:[(0,i.jsxs)("div",{style:O.leftContent,children:[(0,i.jsxs)(La,{isOpen:T.length>0,children:[(0,i.jsx)(Ea,{isPrimary:!0,title:(0,i.jsx)(Oa,{itemsSelectedCount:T.length}),onClick:P}),(0,i.jsx)(Ea,{icon:Dt().x,title:(0,i.jsx)(h().sA,{id:"organizationGuestsSubTab.multiselect.addToWorkspace",defaultMessage:"Upgrade to member"}),onClick:()=>E(df.ConvertToMember)}),(0,i.jsx)(Ea,{icon:ys,title:(0,i.jsx)(h().sA,{id:"organizationGuestsSubTab.multiselect.removeFromWorkspace",defaultMessage:"Remove from workspace"}),onClick:()=>E(df.RemoveFromWorkspace)})]}),(0,i.jsx)(En().A,{children:(0,i.jsx)(Ha().e,{preventMultipleSorts:!0,sortProperties:W,isMenuOpen:K,setIsMenuOpen:Y,onApply:e=>{Y(!1),G(e),$(void 0)},currentSorts:X})}),X.length>0?(0,i.jsx)(Ln().he,{}):null,(0,i.jsx)(Gs,{pillTitle:(0,i.jsx)(h().sA,{id:"organizationGuestsSubTab.filters.email.title",defaultMessage:"Email"}),emailDomains:B,selectedEmailDomains:u.emailDomains||[],setSelectedEmailDomains:e=>{g({emailDomains:e})}}),(0,i.jsx)(Eo,{selectedSpaceIds:u.spaceIds||[],setSelectedSpaceIds:e=>g({spaceIds:e}),spaceData:N}),(0,i.jsx)(nf,{selectedLastActiveOption:u.lastActive,setSelectedLastActiveOption:e=>g({lastActive:e})})]}),(0,i.jsxs)("div",{style:O.rightContent,children:[(0,i.jsx)(Fa().x,{appliedSorts:q,openSortPillMenu:e=>{e&&$([{propertyId:e,direction:"ascending"}]),Y(!0)},sortProperties:W}),(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:m,setQueryFilter:p,placeholderText:a.formatMessage(rf.placeholder)})]})]}),L===df.ConvertToMember?(0,i.jsx)(Ps,{organizationStore:t,permissionsInviteStore:H,onDismiss:U,refreshPage:F}):null,L===df.RemoveFromWorkspace?(0,i.jsx)(Us,{permissionsInviteStore:H,onDismiss:U,organizationStore:t,refreshPage:F,organizationGuests:o}):null,(0,i.jsx)(Zh,{guests:o,usersOnLegalHold:R,loading:r,error:l,organizationStore:t,loadNextPage:d,currentPage:b,loadPreviousPage:j,hasPreviousPage:A,refreshPage:v,hasNextPage:M,selectedIds:T,onSelectAll:D,onUnselectAll:P,onSelectRow:z})]})}var uf=()=>a(92750);const gf={members:[],filters:{},loading:!1,error:void 0,currentCursor:void 0,hasNextPage:!0,nextCursor:void 0,hasPreviousPage:!1,previousCursor:void 0,sortState:void 0,query:"",currentPage:1};function mf(e){let{organizationId:t}=e;const a=(0,Ld().X)("settings_console_edge_cache"),n=function(e){let{organizationId:t}=e;const a=(0,f().v3)(),{updateCacheWithRecordMap:n}=(0,s.useContext)(k().N),[o,i]=(0,s.useState)(gf),r=(0,s.useRef)(!1),l=(0,s.useRef)({}),d=(0,s.useRef)(gf.sortState),c=(0,s.useRef)(gf.query);function u(e){return"actor"===(null==e?void 0:e.column.id)?{columnName:"actor",direction:e.sortAscending?"ascending":"descending"}:"role"===(null==e?void 0:e.column.id)?{columnName:"role",direction:e.sortAscending?"ascending":"descending"}:void 0}const g=(0,s.useCallback)((async e=>{let{cursor:s,filters:o,sortState:r,query:l}=e;const d=Ze().q;try{const e=await S().callApi({eventName:"getMembersInOrganization",environment:a,data:{organizationId:t,cursor:s,filters:o,sort:u(r),query:l,limit:d}});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,Pe().HB)(e)}n({data:e.data}),i((t=>({...t,members:e.data.members,loading:!1,error:void 0,hasNextPage:e.data.hasNextPage,hasPreviousPage:e.data.hasPreviousPage,currentPage:e.data.hasPreviousPage?t.currentPage:gf.currentPage})))}catch(c){const e=(0,Ss().A)(c);i((t=>({...t,loading:!1,error:e})))}}),[a,t,n]),m=(0,s.useCallback)((async e=>{let{restartSearch:a,cursor:s}=e;if(!t)return;let n=o.loading,r=o.error;a&&(i((e=>({...gf,filters:e.filters,sortState:e.sortState,query:e.query}))),n=gf.loading,r=gf.error),n||r||(i((e=>({...e,loading:!0,members:[]}))),l.current=o.filters,d.current=o.sortState,c.current=o.query,await g({cursor:s,filters:o.filters,sortState:o.sortState,query:o.query}))}),[t,o,g]);(0,s.useEffect)((()=>{!r.current&&Boolean(t)&&(m({restartSearch:!0}),r.current=!0)}),[t,m]),(0,s.useEffect)((()=>{$e().n4(l.current,o.filters)||m({restartSearch:!0})}),[o.filters,m]),(0,s.useEffect)((()=>{$e().n4(d.current,o.sortState)||m({restartSearch:!0})}),[o.sortState,m]),(0,s.useEffect)((()=>{$e().n4(c.current,o.query)||m({restartSearch:!0})}),[o.query,m]);const p=(0,s.useCallback)((async()=>{var e;if(!o.hasNextPage)return;i((e=>({...e,currentPage:e.currentPage+1})));const t=null===(e=o.members[o.members.length-1])||void 0===e?void 0:e.userId;return m({restartSearch:!1,cursor:t?{nextCursorId:t}:void 0})}),[m,o.members,o.hasNextPage]),h=(0,s.useCallback)((async()=>{var e;if(!o.hasPreviousPage)return;i((e=>({...e,currentPage:Math.max(1,e.currentPage-1)})));const t=null===(e=o.members[0])||void 0===e?void 0:e.userId;await m({restartSearch:!1,cursor:t?{previousCursorId:t}:void 0})}),[m,o.members,o.hasPreviousPage]),x=(0,s.useCallback)((e=>{i((t=>({...t,filters:{...t.filters,...e}})))}),[]),v=(0,s.useCallback)((e=>{i((t=>({...t,sortState:e})))}),[]),y=(0,s.useCallback)((e=>{var t;const a=null===(t=o.members[0])||void 0===t?void 0:t.userId;return e&&i((e=>({...e,loading:!0,members:[]}))),g({cursor:a?{currentCursorId:a}:void 0,filters:o.filters,sortState:o.sortState,query:o.query})}),[g,o.members,o.filters,o.sortState,o.query]),b=(0,s.useCallback)((e=>{i((t=>({...t,query:e})))}),[]);return{loadNextPage:p,loadPreviousPage:h,members:o.members,filters:o.filters,loading:o.loading,error:o.error,currentPage:o.currentPage,currentCursor:o.currentCursor,hasNextPage:o.hasNextPage,nextCursor:o.nextCursor,setFilters:x,sortState:o.sortState,setSortState:v,hasPreviousPage:o.hasPreviousPage,previousCursor:o.previousCursor,refreshPage:y,query:o.query,setQuery:b}}({organizationId:t}),o=function(e){let{organizationId:t}=e;const a=(0,f().v3)(),[n,o]=(0,s.useState)(gf),i=(0,s.useRef)(!1),r=(0,s.useRef)({}),l=(0,s.useRef)(gf.sortState),d=(0,s.useRef)(gf.query);function c(e){return"actor"===(null==e?void 0:e.column.id)?{columnName:"actor",direction:e.sortAscending?"ascending":"descending"}:"role"===(null==e?void 0:e.column.id)?{columnName:"role",direction:e.sortAscending?"ascending":"descending"}:void 0}const u=(0,s.useCallback)((async e=>{let{cursor:s,filters:n,sortState:i,query:r}=e;const l=Ze().q;try{const e=await S().callApi({eventName:"listOrgUsers",environment:a,data:{organizationId:t,cursor:s,filters:(0,uf().wq)({filters:n,defaultFilters:Bi}),sort:c(i),query:r,limit:l}});if("success"!==e.type){if("failed"===e.type)throw e.error;return(0,Pe().HB)(e)}o((t=>({...t,members:e.data.members.map(pf),loading:!1,error:void 0,hasNextPage:Boolean(e.data.nextCursor),nextCursor:e.data.nextCursor,hasPreviousPage:Boolean(e.data.previousCursor),previousCursor:e.data.previousCursor,currentPage:e.data.previousCursor?t.currentPage:gf.currentPage,currentCursor:s})))}catch(d){const e=(0,Ss().A)(d);o((t=>({...t,loading:!1,error:e})))}}),[a,t]),g=(0,s.useCallback)((async e=>{var s;let{restartSearch:i,cursor:g}=e;if(!t)return;let m=n.loading,p=n.error;if(i&&(o((e=>({...gf,filters:e.filters,sortState:e.sortState,query:e.query}))),m=gf.loading,p=gf.error),m||p)return;o((e=>({...e,loading:!0,members:[]}))),r.current=n.filters,l.current=n.sortState,d.current=n.query;const h=null===(s=c(n.sortState))||void 0===s?void 0:s.columnName;(0,w().u)({environment:a,event:{eventName:"org_console_people_table_query",eventProperties:{table:"members",organization_id:t,filter_keys:Object.keys(n.filters),sort_columns:h?[h]:void 0,has_query:Boolean(n.query)}}}),await u({cursor:g,filters:n.filters,sortState:n.sortState,query:n.query})}),[t,n,u,a]);(0,s.useEffect)((()=>{!i.current&&Boolean(t)&&(g({restartSearch:!0}),i.current=!0)}),[t,g]),(0,s.useEffect)((()=>{$e().n4(r.current,n.filters)||g({restartSearch:!0})}),[n.filters,g]),(0,s.useEffect)((()=>{$e().n4(l.current,n.sortState)||g({restartSearch:!0})}),[n.sortState,g]),(0,s.useEffect)((()=>{$e().n4(d.current,n.query)||g({restartSearch:!0})}),[n.query,g]);const m=(0,s.useCallback)((async()=>{if(n.nextCursor)return o((e=>({...e,currentPage:e.currentPage+1}))),g({restartSearch:!1,cursor:n.nextCursor})}),[g,n.nextCursor]),p=(0,s.useCallback)((async()=>{n.previousCursor&&(o((e=>({...e,currentPage:Math.max(1,e.currentPage-1)}))),await g({restartSearch:!1,cursor:n.previousCursor}))}),[g,n.previousCursor]),h=(0,s.useCallback)((e=>{o((t=>({...t,filters:{...t.filters,...e}})))}),[]),x=(0,s.useCallback)((e=>{o((t=>({...t,sortState:e})))}),[]),v=(0,s.useCallback)((e=>(e&&o((e=>({...e,loading:!0,members:[]}))),u({cursor:n.currentCursor,filters:n.filters,sortState:n.sortState,query:n.query}))),[u,n.filters,n.sortState,n.query,n.currentCursor]),y=(0,s.useCallback)((e=>{o((t=>({...t,query:e})))}),[]);return{loadNextPage:m,loadPreviousPage:p,members:n.members,filters:n.filters,loading:n.loading,error:n.error,currentPage:n.currentPage,currentCursor:n.currentCursor,hasNextPage:n.hasNextPage,nextCursor:n.nextCursor,previousCursor:n.previousCursor,setFilters:h,sortState:n.sortState,setSortState:x,hasPreviousPage:n.hasPreviousPage,refreshPage:v,query:n.query,setQuery:y}}({organizationId:t});return a?o:n}function pf(e){return{userId:e.id,userEmail:e.email,status:e.status,lastActiveAt:e.lastActiveAt,organizationRole:e.organizationRole,spacesInfo:e.spacesInfo.filter((e=>["owner","membership_admin","member"].includes(e.role)))}}const hf=(0,h().YK)({placeholder:{id:"organizationMemberSubTab.membersSearch.placeholder",defaultMessage:"Search by email or name."},name:{id:"organizationMemberSubTab.sort.name",defaultMessage:"Name"},highestRole:{id:"organizationMemberSubTab.sort.highestRole",defaultMessage:"Highest role"}});function ff(e){let{organizationStore:t,userId:a}=e;const s=(0,f().v3)(),n=(0,i.jsx)(h().sA,{id:"organization.people.members.title",defaultMessage:"Manage members"});return(0,i.jsx)(Nd().D,{breadcrumbs:[{message:(0,i.jsx)(h().sA,{id:"organizationMembersSubTab.breadcrumb.goBack",defaultMessage:"People"}),onClick:()=>{(0,xd().i)({environment:s,from:{tabRoute:Xt().kr,properties:{subtab:Xt().DE.Members}},organizationId:t.id,tabRoute:Xt().kr})}},{message:n}],children:(0,i.jsxs)(Hl().t,{children:[(0,i.jsx)(Ua()._,{title:n,byline:(0,i.jsx)(h().sA,{id:"organization.people.members.byline",defaultMessage:"Add, remove, or change member roles to manage access and collaboration across workspaces"})}),(0,i.jsx)(vf,{organizationStore:t,userId:a})]})})}var xf=function(e){return e.AddNewMembers="add-new-members",e.AddToWorkspace="add-to-workspace",e.RemoveFromWorkspace="remove-from-workspace",e.PromoteToAdmin="promote-to-admin",e.DemoteAdmin="demote-admin",e}(xf||{});function vf(e){let{organizationStore:t,userId:a}=e;const n=(0,h().tz)(),o=(0,f().v3)(),{loadNextPage:r,members:l,loading:d,error:c,setFilters:u,filters:g,setSortState:m,loadPreviousPage:p,currentPage:v,hasPreviousPage:b,hasNextPage:S,refreshPage:j,query:w,setQuery:A}=mf({organizationId:t.id}),M=(0,s.useMemo)((()=>l.map((e=>e.userId))),[l]),I=(0,x().K8)((()=>t.getOwnerIds()),[t]),{selectedIds:T,handleToggleId:k,handleSelectAllIds:z,handleUnselectAllIds:D}=Lt({allPossibleIds:M}),P=_o({spaceStores:(0,Cs().l)()}),{membersSet:N}=ko({organizationId:t.id}),{organizationMemberEmailDomains:R}=(0,s.useContext)(_().D),[B,L]=(0,s.useState)(),E=(0,On().F)();function O(){L(void 0)}async function U(){await j(),D()}const H=(0,x().K8)((()=>new za),[]),V=(0,x().K8)((()=>{const e=T.map((e=>new(C().LU)(o,{table:y().oo,id:e}).getModel())).filter(Pe().O9);return e.map((e=>({type:"existingUser",value:e,spaceRole:void 0})))}),[o,T]);(0,s.useEffect)((()=>{H.setState({...H.state,inviteTargets:V,inviteRole:"read_and_write"})}),[H,V]);const{inviteTargets:W}=(0,x().K8)((()=>({inviteTargets:H.state.inviteTargets})),[H]),q=[{id:Ki.id,name:n.formatMessage(hf.name),type:"title"},{id:Yi.id,name:n.formatMessage(hf.highestRole),type:"text"}],[G,K]=(0,s.useState)(),[Y,Q]=(0,s.useState)(!1),[$,X]=(0,s.useState)();(0,s.useEffect)((()=>{if(!G||0===G.length)return void m(void 0);const e=G[0];switch(e.propertyId){case Ki.id:m({column:Ki,sortAscending:"ascending"===e.direction});break;case Yi.id:m({column:Yi,sortAscending:"ascending"===e.direction})}}),[m,G]);const Z=$??G??[];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:E.tableHeader,children:[(0,i.jsxs)("div",{style:E.leftContent,children:[(0,i.jsxs)(La,{isOpen:T.length>0,children:[(0,i.jsx)(Ea,{isPrimary:!0,title:(0,i.jsx)(Oa,{itemsSelectedCount:T.length}),onClick:D}),(0,i.jsx)(Ea,{icon:Dt().x,title:(0,i.jsx)(h().sA,{id:"organizationMembersSubTab.multiselect.addToWorkspace",defaultMessage:"Add to workspace"}),onClick:()=>L(xf.AddToWorkspace)}),(0,i.jsx)(Ea,{icon:ys,title:(0,i.jsx)(h().sA,{id:"organizationMembersSubTab.multiselect.removeFromWorkspace",defaultMessage:"Remove from workspace"}),onClick:()=>L(xf.RemoveFromWorkspace)}),(0,i.jsx)(Ea,{disabled:T.filter((e=>I.includes(e))).length>0,disabledTooltipText:(0,i.jsx)(h().sA,{id:"organizationMembersSubTab.multiselect.promoteToAdminTooltip",defaultMessage:"Selected members are already organization owners"}),icon:Di().g,title:(0,i.jsx)(h().sA,{id:"organizationMembersSubTab.multiselect.promoteToAdmin",defaultMessage:"Make organization owner"}),onClick:()=>L(xf.PromoteToAdmin)}),(0,i.jsx)(Ea,{disabled:T.filter((e=>I.includes(e))).length===I.length||T.filter((e=>!I.includes(e))).length>0,disabledTooltipText:T.filter((e=>I.includes(e))).length===I.length?(0,i.jsx)(h().sA,{id:"organizationMembersSubTab.multiselect.demoteFromAdminTooltip.allOrgOwnersSelected",defaultMessage:"You must have at least one organization owner"}):(0,i.jsx)(h().sA,{id:"organizationMembersSubTab.multiselect.demoteFromAdminTooltip.notOrgOwnerSelected",defaultMessage:"Only available for organization owners"}),icon:Ni,title:(0,i.jsx)(h().sA,{id:"organizationMembersSubTab.multiselect.demoteFromAdmin",defaultMessage:"Downgrade organization owner"}),onClick:()=>L(xf.DemoteAdmin)})]}),(0,i.jsx)(En().A,{children:(0,i.jsx)(Ha().e,{preventMultipleSorts:!0,sortProperties:q,isMenuOpen:Y,setIsMenuOpen:Q,onApply:e=>{Q(!1),K(e),X(void 0)},currentSorts:Z})}),Z.length>0?(0,i.jsx)(Ln().he,{}):null,(0,i.jsx)(gn,{setUserRoles:e=>u({roles:e}),selectedUserRoles:g.roles||[],roles:pn}),(0,i.jsx)(Gs,{pillTitle:(0,i.jsx)(h().sA,{id:"organizationMembersSubTab.filters.email.title",defaultMessage:"Email"}),emailDomains:R,selectedEmailDomains:g.emailDomains||[],setSelectedEmailDomains:e=>{u({emailDomains:e})}}),(0,i.jsx)(Eo,{selectedSpaceIds:g.spaceIds||[],setSelectedSpaceIds:e=>u({spaceIds:e}),spaceData:P}),(0,i.jsx)(xh,{selectedAccountStatus:g.userStatus,setSelectedAccountStatus:e=>u({userStatus:e})}),(0,i.jsx)(nf,{selectedLastActiveOption:g.lastActive,setSelectedLastActiveOption:e=>u({lastActive:e})})]}),(0,i.jsxs)("div",{style:E.rightContent,children:[(0,i.jsx)(Fa().x,{appliedSorts:G,openSortPillMenu:e=>{e&&X([{propertyId:e,direction:"ascending"}]),Q(!0)},sortProperties:q}),(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:w,setQueryFilter:A,placeholderText:n.formatMessage(hf.placeholder)}),(0,i.jsx)(F().A,{onClick:()=>{L(xf.AddNewMembers)},children:(0,i.jsx)(h().sA,{id:"organizationMembersSubTab.button.addMembers",defaultMessage:"Add members"})})]})]}),B===xf.AddNewMembers?(0,i.jsx)(cn,{onDismiss:O,organizationStore:t,refreshPage:U}):null,B===xf.AddToWorkspace?(0,i.jsx)(Hi,{permissionsInviteStore:H,onDismiss:O,organizationStore:t,refreshPage:U}):null,B===xf.RemoveFromWorkspace?(0,i.jsx)(un,{permissionsInviteStore:H,onDismiss:O,organizationStore:t,refreshPage:U,membersSpaceIds:yf({organizationMembers:l,inviteTargets:W})}):null,B===xf.PromoteToAdmin?(0,i.jsx)(Wi,{permissionsInviteStore:H,onDismiss:O,organizationStore:t,refreshPage:U}):null,B===xf.DemoteAdmin?(0,i.jsx)(Vi,{permissionsInviteStore:H,onDismiss:O,organizationStore:t,refreshPage:U}):null,(0,i.jsx)(er,{members:l,usersOnLegalHold:N,loading:d,error:c,loadNextPage:r,loadPreviousPage:p,organizationStore:t,currentPage:v,hasPreviousPage:b,hasNextPage:S,refreshPage:j,userId:a,selectedIds:T,onSelectAll:z,onUnselectAll:D,onSelectRow:k})]})}function yf(e){let{organizationMembers:t,inviteTargets:a}=e;const s=new Set;if(t)for(const n of a){const e=t.find((e=>e.userId===n.value.id));for(const t of(null==e?void 0:e.spacesInfo)??[])s.add(t.spaceId)}return s}function bf(e){var t;let{config:a,navigateToSettingTab:s,organizationStore:n,spaceStores:o}=e;const r=a.getOptions(),l=(0,x().K8)((()=>a.getValueFromOrganization(n)),[n,a]),d=(null===(t=r.find((e=>e.key===l)))||void 0===t?void 0:t.label)??eg,c=(0,x().K8)((()=>o.map((e=>a.getValueFromSpace(e)))),[o,a]),u=Boolean(l&&c.filter((e=>e!==l)).length)?eg:d;return(0,i.jsx)(ne,{title:a.title,byline:a.byline,rightContent:u,onClick:()=>s(a.settingName)})}var Sf=()=>a(963605),jf=()=>a(263868);const wf={settingName:"hover-cards",title:(0,i.jsx)(h().sA,{...jf().y.title}),byline:(0,i.jsx)(h().sA,{...jf().y.byline}),getOptions:_u,getValueFromSpace:e=>Pu(Boolean(e.getSetting("disable_people_hover_card"))),getValueFromOrganization:e=>{const t=e.getSettingValue("disable_people_hover_card");if(void 0!==t)return Pu(t)},formatValueToSave:e=>({disable_people_hover_card:Nu(e)}),formatUndefinedToSave:()=>({disable_people_hover_card:null})},Af={settingName:"people-directory",title:(0,i.jsx)(h().sA,{...Sf().H1.title}),byline:(0,i.jsx)(h().sA,{...Sf().H1.byline}),getOptions:_u,getValueFromSpace:e=>Pu(Boolean(e.getSetting("disable_people_directory"))),getValueFromOrganization:e=>{const t=e.getSettingValue("disable_people_directory");if(void 0!==t)return Pu(t)},formatValueToSave:e=>({disable_people_directory:Nu(e)}),formatUndefinedToSave:()=>({disable_people_directory:null})},Mf={[wf.settingName]:wf,[Af.settingName]:Af};function Cf(e){let{organizationStore:t}=e;const a=(0,f().v3)(),n=(0,Cs().l)(),o=(0,Ld().X)("organization_console_hover_card_enabled"),r=(0,Ld().X)("organization_console_people_directory_enabled"),l=(0,s.useCallback)((e=>(0,xd().i)({environment:a,from:{tabRoute:Xt().kr},organizationId:t.id,tabRoute:Xt().kr,queryParams:{[ku]:e}})),[a,t.id]);return r||o?(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"settingsConsole.people.peopleDirectorySettings",defaultMessage:"People directory"}),content:(0,i.jsxs)(i.Fragment,{children:[r?(0,i.jsx)(bf,{config:Af,organizationStore:t,spaceStores:n,navigateToSettingTab:l}):null,o?(0,i.jsx)(bf,{config:wf,organizationStore:t,spaceStores:n,navigateToSettingTab:l}):null]})}):null}function If(e){let{selectedValues:t,setSelectedValues:a,options:s}=e;return(0,i.jsx)(qs().VX,{pillTitle:(0,i.jsx)(h().sA,{id:"organizationSecuritySettingFilter.filters.setting.title",defaultMessage:"Setting"}),pillIcon:d().gearIcon,selectedItems:t,setSelectedItems:a,items:s.map((e=>{let{key:t,label:a,count:s}=e;return{key:t,value:t,title:a,count:s}}))})}function Tf(e){let{selectedValue:t,setSelectedValue:a}=e;return(0,i.jsx)(qs().G0,{pillTitle:(0,i.jsx)(h().sA,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.title",defaultMessage:"Workspace"}),pillIcon:p().V,selectedItem:t,setSelectedItem:a,shouldUseCheck:!0,items:[{key:"pending",value:"pending",title:(0,i.jsx)(h().sA,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.pending.title",defaultMessage:"With pending changes only"}),shortTitle:(0,i.jsx)(h().sA,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.pending.shortTitle",defaultMessage:"Changes"})},{key:"custom",value:"custom",title:(0,i.jsx)(h().sA,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.custom.title",defaultMessage:"With custom setting only"}),shortTitle:(0,i.jsx)(h().sA,{id:"organizationSecurityWorkspaceFilter.filters.workspaces.custom.shortTitle",defaultMessage:"Custom setting"})}]})}function kf(e){let{searchQuery:t,setSearchQuery:a,filters:n,setFilters:o,options:r,appliedSorts:l,setAppliedSorts:d,config:c}=e;const u=(0,v().IS)((()=>({leftContent:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",margin:"0 auto 12px",paddingTop:4},rightContent:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",margin:"0 auto 12px",minHeight:28,gap:6},tableHeader:{position:"relative",display:"flex",flexDirection:"row"}})),[]),g=[{id:sg.id,name:M().A.formatMessage(ag.name),type:"title"},{id:og.id,name:M().A.formatMessage(ag.members),type:"number"},{id:ng.id,name:M().A.formatMessage(ag.teams),type:"number"}];Boolean("publish-sites"===c.settingName)&&g.push({id:lg.id,name:M().A.formatMessage(ag.sites),type:"number"});Boolean("guest-invites"===c.settingName)&&g.push({id:rg.id,name:M().A.formatMessage(ag.guests),type:"number"});const[m,p]=(0,s.useState)(!1),[h,f]=(0,s.useState)(),x=h??l??[];return(0,i.jsxs)("div",{style:u.tableHeader,children:[(0,i.jsxs)("div",{style:u.leftContent,children:[(0,i.jsx)(En().A,{children:(0,i.jsx)(Ha().e,{sortProperties:g,isMenuOpen:m,setIsMenuOpen:p,onApply:e=>{p(!1),d(e),f(void 0)},currentSorts:x})}),x.length>0?(0,i.jsx)(Ln().he,{}):null,(0,i.jsx)(Tf,{selectedValue:n.workspaceFilter,setSelectedValue:e=>o({...n,workspaceFilter:e})}),(0,i.jsx)(If,{selectedValues:n.settingFilter??[],setSelectedValues:e=>o({...n,settingFilter:e.length?e:void 0}),options:r})]}),(0,i.jsxs)("div",{style:u.rightContent,children:[(0,i.jsx)(Fa().x,{appliedSorts:l,openSortPillMenu:e=>{e&&f([{propertyId:e,direction:"ascending"}]),p(!0)},sortProperties:g}),(0,i.jsx)(Bt().nv,{mode:Bt().Ke.AnimatedSearchButton,query:t,setQueryFilter:a})]})]})}function _f(e){const{organizationStore:t,spaceStores:a,teamStoresForSpace:n,config:o,hasTeamColumn:r}=e,[l,d]=(0,s.useState)({}),[c,u]=(0,s.useState)(),[g,m]=(0,s.useState)(),{pendingOrgSetting:p,pendingSpaceSettings:h,pendingTeamSettings:f}=(0,s.useContext)(Cu().p),v=Boolean(Object.values(l).filter((e=>(0,Pe().O9)(e))).length),y=(0,x().K8)((()=>function(e){let{config:t,organizationStore:a,spaceStores:s,teamStoresForSpace:n,pendingOrgSetting:o,pendingSpaceSettings:i,pendingTeamSettings:r}=e;const l={};for(const c of t.getOptions())l[c.key]={option:c,count:0};const d=o??t.getValueFromOrganization(a);if(d&&d!==Tu){const e=l[d];e&&(l[d]={...e,count:e.count+1})}for(const c of s){const e=i[c.id]??t.getValueFromSpace(c),a=l[e];if(l[e]={...a,count:a.count+1},t.teamSettingName)for(const s of n[c.id]){const e=r[s.id]??t.getValueFromTeam(s,c),a=l[e];l[e]={...a,count:a.count+1}}}return Object.values(l).map((e=>{let{option:t,count:a}=e;return{...t,count:a}}))}({organizationStore:t,spaceStores:a,config:o,teamStoresForSpace:n,pendingOrgSetting:p,pendingSpaceSettings:h,pendingTeamSettings:f})),[t,a,n,o,p,h,f]);return(0,i.jsxs)("div",{children:[(0,i.jsx)(kf,{appliedSorts:g,setAppliedSorts:m,searchQuery:c,setSearchQuery:u,filters:l,setFilters:d,options:y,config:o}),(0,i.jsx)(mg,{organizationStore:t,spaceStores:a,teamStoresForSpace:n,hasTeamColumn:r,config:o,rowFilterFn:e=>function(e,t,a){let s=!0;return t&&e.title&&(s=s&&e.title.toLowerCase().includes(t.toLowerCase())),a.workspaceFilter&&("custom"===a.workspaceFilter?s=s&&Boolean(e.parentSettingValue)&&e.parentSettingValue!==e.settingValue:"pending"===a.workspaceFilter?s=s&&e.isPending:(0,Pe().HB)(a.workspaceFilter)),a.settingFilter&&(s=s&&a.settingFilter.includes(e.settingValue)),s}(e,c,l),isFiltered:Boolean(c||v),appliedSorts:null!=g&&g.length?g:[{propertyId:"name",direction:"ascending"}]})]})}var zf=()=>a(188213);function Df(e){let{organizationStore:t,config:a,navigateBack:n,breadcrumbBackMessage:o}=e;const r=(0,f().v3)(),l=(0,v().DP)(),{updateCacheWithRecordMap:d}=(0,s.useContext)(k().N),c=t.id,u=(0,Cs().l)(),g=(0,s.useMemo)((()=>u.map((e=>e.id))),[u]),m=Boolean(a.teamSettingName),{teamStores:p}=(0,z().o)(g,!m),{pendingOrgSetting:x,pendingSpaceSettings:y,pendingTeamSettings:b,clearAllPendingSettings:C,hasPendingCentralizedSettings:I}=(0,s.useContext)(Cu().p);(0,s.useEffect)((()=>(C(),C)),[C]);const T=(0,s.useCallback)((async()=>{if(I()){const{accept:e}=await(0,zf().A)(l);if(!e)return;C()}n()}),[l,C,I,n]),_=I(),D=(0,s.useCallback)((async()=>{const e=async function(e){let{environment:t,pendingOrgSetting:a,config:s,organizationId:n,updateCacheWithRecordMap:o}=e;if(!a)return;const i=a===Tu?s.formatUndefinedToSave():s.formatValueToSave(a),r=await S().callApi({eventName:"updateOrganizationSettings",environment:t,data:{organizationId:n,settings:i}});return"success"===r.type&&o({data:r.data}),r}({environment:r,pendingOrgSetting:x,config:a,organizationId:c,updateCacheWithRecordMap:d}),t=Je().lX(g,Ze().O,(async e=>async function(e){let{environment:t,pendingSpaceSettings:a,pendingTeamSettings:s,spaceId:n,teamStoresForSpace:o,config:i,updateCacheWithRecordMap:r}=e;const l=function(e){let t,{pendingSpaceSettings:a,spaceId:s,config:n}=e;return a[s]&&(t=n.formatValueToSave(a[s])),t}({pendingSpaceSettings:a,spaceId:n,config:i}),d=function(e){let{pendingTeamSettings:t,config:a,teams:s}=e;const n=[];for(const o of s){const e=t[o.id];e&&n.push({teamId:o.id,...a.formatValueToSave(e)})}return n.length?n:void 0}({pendingTeamSettings:s,config:i,teams:o[n]});if(l||d){const e=await S().callApi({eventName:"updateOrganizationSpaceAndTeamSettings",environment:t,data:{spaceId:n,spaceSettings:l,teamSettings:d}});return"success"===e.type&&r({data:e.data}),e}}({environment:r,pendingSpaceSettings:y,pendingTeamSettings:b,spaceId:e,teamStoresForSpace:p,config:a,updateCacheWithRecordMap:d})));!function(e){let{orgResponse:t,spaceResponses:a,pendingOrgSetting:s,pendingSpaceSettings:n,pendingTeamSettings:o,organizationId:r,environment:l,settingName:d}=e;const c=(null==a?void 0:a.find((e=>"failed"===(null==e?void 0:e.type))))??t;"failed"===(null==c?void 0:c.type)?j().f1((0,A().Hu)(M().A.getIntl(),c)):((0,w().u)({environment:l,event:{eventName:"org_console_security_update_settings",eventProperties:{organization_id:r,space_ids:Object.keys($e().fN(n,(e=>(0,Pe().O9)(e)))),team_ids:Object.keys($e().fN(o,(e=>(0,Pe().O9)(e)))),setting_name:d,was_org_updated:(0,Pe().O9)(s)}}}),nt().D6({label:(0,i.jsx)(h().sA,{id:"organizationSecuritySettingPage.saveSettings.success",defaultMessage:"Successfully saved all settings"})}))}({orgResponse:await e,spaceResponses:await t,pendingOrgSetting:x,pendingSpaceSettings:y,pendingTeamSettings:b,environment:r,organizationId:c,settingName:a.settingName}),C()}),[r,c,a,x,b,y,C,g,p,d]);return(0,i.jsx)(Nd().D,{breadcrumbs:[{onClick:T,message:(0,i.jsx)(h().sA,{...o})},{message:a.title}],headerRight:(0,i.jsx)(K,{onCancel:C,onSave:D,disabled:!_,saveButtonText:(0,i.jsx)(h().sA,{id:"organizationSecuritySettingPage.saveChanges",defaultMessage:"Save changes"}),isLarge:!0}),children:(0,i.jsxs)(Hl().t,{children:[(0,i.jsx)(Ua()._,{title:a.title,byline:a.byline}),(0,i.jsx)(_f,{organizationStore:t,spaceStores:u,teamStoresForSpace:p,hasTeamColumn:m,config:a})]})})}const Pf=(0,h().YK)({backBreadcrumb:{id:"organizationPeopleSettingPage.breadcrumb.goBack",defaultMessage:"People"}});function Nf(e){let{organizationStore:t,settingName:a}=e;const n=(0,f().v3)(),o=function(e){return Mf[e]}(a),r=(0,s.useCallback)((()=>(0,xd().i)({environment:n,from:{tabRoute:Xt().kr},organizationId:t.id,tabRoute:Xt().kr})),[n,t.id]);return(0,i.jsx)(Df,{organizationStore:t,config:o,navigateBack:r,breadcrumbBackMessage:Pf.backBreadcrumb})}var Rf=()=>a(802042);function Bf(e){return(0,i.jsx)(Lf,{...e})}function Lf(e){const t=(0,Ta().E)({organizationId:e.organizationId}),a=(0,s.useMemo)((()=>e.subtab?function(e){switch(e){case Xt().DE.Members:return Xt().DE.Members;case Xt().DE.Guests:return Xt().DE.Guests;case Xt().DE.Groups:return Xt().DE.Groups;case Xt().DE.ManagedUsers:return Xt().DE.ManagedUsers;default:return Xt().DE.Members}}(e.subtab):void 0),[e.subtab]);if(!t)return null;const n=e.queryParams[ku],o=(0,Pe().O)(Mf,n)?n:void 0;if(o)return(0,i.jsx)(Nf,{settingName:o,organizationStore:t});switch(a){case Xt().DE.Members:return(0,i.jsx)(ff,{organizationStore:t,userId:e.userId});case Xt().DE.Guests:return(0,i.jsx)(lf,{organizationStore:t});case Xt().DE.Groups:return(0,i.jsx)(Vh,{organizationStore:t,groupId:e.groupId});case Xt().DE.ManagedUsers:return(0,i.jsx)(Nh,{organizationStore:t});default:return(0,i.jsx)(Ef,{...e})}}function Ef(e){var t,a,n;let{organizationId:o}=e;const r=(0,f().v3)(),l=(0,Ta().E)({organizationId:o}),d=(0,Rf().o)({organizationId:o}),{state:c,loading:u}=(0,Iu().j)(),g=function(){const e=(0,Cs().l)(),t=(0,s.useMemo)((()=>e.map((e=>e.id))),[e]),{permissionGroupsForSpace:a,loadPermissionGroupsForSpace:n}=(0,s.useContext)(_().D);return(0,s.useEffect)((()=>{for(const e of t)n(e)}),[t,n]),{count:(0,s.useMemo)((()=>t.map((e=>{const t=a[e];return(null==t?void 0:t.length)??0})).reduce(((e,t)=>e+t),0)),[t,a]),loading:(0,s.useMemo)((()=>t.some((e=>void 0===a[e]))),[t,a])}}(),m=(0,x().K8)((()=>c.value?c.value.sampleMemberIds.map((e=>new(C().LU)(r,{table:y().oo,id:e}))):[]),[r,c.value]),p=(0,x().K8)((()=>l?l.getOwnerIds().length:void 0),[l]),b=null===(t=c.value)||void 0===t?void 0:t.memberCount,S=null===(a=c.value)||void 0===a?void 0:a.guestCount,j=g.loading?void 0:g.count,w=(0,R().Z)(),A=(0,v().IS)((e=>({actionContainer:{display:"flex",gap:24,justifyContent:"flex-start",alignItems:"center",height:32},divider:{color:e.stroke.secondary,marginTop:38,marginBottom:-12}})),[]),[M,I]=(0,s.useState)(!1);return l?(0,i.jsxs)(Rd,{children:[(0,i.jsx)(Ua()._,{title:(0,i.jsx)(h().sA,{id:"organization.people.title",defaultMessage:"People"}),byline:(0,i.jsx)(h().sA,{id:"organization.people.byline",defaultMessage:"Manage access, permissions, and user accounts. Oversee members, guests, and groups seamlessly."}),bylineWidth:"90%"}),(0,i.jsxs)("div",{style:A.actionContainer,children:[(0,i.jsx)(F().A,{onClick:()=>{I(!0)},children:(0,i.jsx)(h().sA,{id:"organizationMembersSubTab.button.addMembers",defaultMessage:"Add members"})}),(0,i.jsx)(oe().t,{users:m,totalMemberCount:b,isLoading:u})]}),(0,i.jsx)(kr().A,{size:1,style:A.divider,dividerColor:A.divider.color}),(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"organization.people.rolesAndPermissions.title",defaultMessage:"Roles & permissions"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ne,{title:(0,i.jsx)(h().sA,{id:"organization.people.rolesAndPermissions.members.title",defaultMessage:"Manage members"}),byline:(0,i.jsx)(h().sA,{id:"organization.people.rolesAndPermissions.members.byline",defaultMessage:"Add, remove, or adjust member roles"}),rightContent:Boolean(void 0!==p&&void 0!==b)?(0,i.jsx)(h().sA,{id:"organization.people.rolesAndPermissions.members.rightContent",defaultMessage:"{numOwners, plural, one {# org owner} other {# org owners}} · {numMembers, plural, one {# member} other {# members}}",values:{numOwners:p,numMembers:b}}):(0,i.jsx)(P().A,{style:w.longShimmer}),onClick:()=>Of({environment:r,organizationId:o,tab:Xt().DE.Members})}),(0,i.jsx)(ne,{title:(0,i.jsx)(h().sA,{id:"organization.people.rolesAndPermissions.guests.title",defaultMessage:"Manage guests"}),byline:(0,i.jsx)(h().sA,{id:"organization.people.rolesAndPermissions.guests.byline",defaultMessage:"Invite for page access or upgrade to members for full workspace access"}),rightContent:Boolean(void 0!==S)?(0,i.jsx)(h().sA,{id:"organization.people.rolesAndPermissions.guests.rightContent",defaultMessage:"{numGuests, plural, one {# guest} other {# guests}}",values:{numGuests:S}}):(0,i.jsx)(P().A,{style:w.shortShimmer}),onClick:()=>Of({environment:r,organizationId:o,tab:Xt().DE.Guests})}),(0,i.jsx)(ne,{title:(0,i.jsx)(h().sA,{id:"organization.people.rolesAndPermissions.groups.title",defaultMessage:"Manage groups"}),byline:(0,i.jsx)(h().sA,{id:"organization.people.rolesAndPermissions.groups.byline",defaultMessage:"Add and remove members from permission groups"}),rightContent:Boolean(void 0!==j)?(0,i.jsx)(h().sA,{id:"organization.people.rolesAndPermissions.groups.rightContent",defaultMessage:"{numGroups, plural, one {# permission group} other {# permission groups}}",values:{numGroups:j}}):(0,i.jsx)(P().A,{style:w.longShimmer}),onClick:()=>Of({environment:r,organizationId:o,tab:Xt().DE.Groups})}),(0,i.jsx)(ne,{title:(0,i.jsx)(h().sA,{id:"organization.people.rolesAndPermissions.accounts.title",defaultMessage:"Manage user accounts"}),byline:(0,i.jsx)(h().sA,{id:"organization.people.rolesAndPermissions.accounts.byline",defaultMessage:"Manage user accounts with verified domain emails"}),rightContent:Boolean(void 0!==d.count)?(0,i.jsx)(h().sA,{id:"organization.people.rolesAndPermissions.accounts.rightContent",defaultMessage:"{numUsers} accounts",values:{numUsers:null===(n=d.count)||void 0===n?void 0:n.usersCount}}):(0,i.jsx)(P().A,{style:w.shortShimmer}),onClick:()=>Of({environment:r,organizationId:o,tab:Xt().DE.ManagedUsers})})]})}),(0,i.jsx)(Cf,{organizationStore:l}),(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"organization.people.managedAccounts.title",defaultMessage:"Managed accounts"}),content:(0,i.jsx)(gh,{organizationStore:l})}),(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"organization.people.accountAccess.title",defaultMessage:"Account access"}),content:(0,i.jsx)(uh,{organizationStore:l})}),M?(0,i.jsx)(cn,{onDismiss:()=>I(!1),organizationStore:l,refreshPage:async()=>Promise.resolve()}):null]}):null}function Of(e){const{environment:t,organizationId:a,tab:s}=e;(0,xd().i)({environment:t,from:{tabRoute:Xt().kr},organizationId:a,tabRoute:Xt().kr,properties:{subtab:s}})}var Uf=()=>a(719147);function Ff(e){let{organizationStore:t}=e;const{spaceIds:a}=(0,s.useContext)(_().D),n=(0,f().v3)(),o=(0,Cs().l)(),r=()=>{(0,xd().i)({environment:n,from:{tabRoute:Xt().Xe},organizationId:t.id,tabRoute:Xt().Vo,properties:{subtab:Xt().al.Workspaces}})},l=e=>(0,xd().i)({environment:n,from:{tabRoute:Xt().Xe},organizationId:t.id,tabRoute:Xt().Xe,queryParams:{[ku]:e}});return(0,i.jsxs)(Rd,{children:[(0,i.jsx)(Ua()._,{title:(0,i.jsx)(h().sA,{id:"settingsConsole.security.title",defaultMessage:"Security"}),byline:(0,i.jsx)(h().sA,{id:"settingsConsole.security.organizationSettings.landingPage.description",defaultMessage:"Enforce security settings to {workspaceCount, plural, one {the <workspaceslink>1 workspace</workspaceslink>} other {all <workspaceslink>{workspaceCount} workspaces</workspaceslink>}} in your organization. Once enforced, workspace owners will not be able to change them.",values:{workspaceCount:a.length,workspaceslink:e=>(0,i.jsx)(Uf().A,{hoverColor:"blue",onClick:r,children:e})}})}),(0,i.jsx)(Hf,{navigateToSettingTab:l,organizationStore:t,spaceStores:o}),(0,i.jsx)(Vf,{navigateToSettingTab:l,organizationStore:t,spaceStores:o}),(0,i.jsx)(Wf,{navigateToSettingTab:l,organizationStore:t,spaceStores:o})]})}function Hf(e){return(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"settingsConsole.security.organizationSettings.pageAndPublishing.title",defaultMessage:"Publishing & pages"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(bf,{config:Lu,...e}),(0,i.jsx)(bf,{config:Ou,...e}),(0,i.jsx)(bf,{config:Uu,...e})]})})}function Vf(e){return(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"settingsConsole.security.organizationSettings.membersAndGuests.title",defaultMessage:"Members & guests"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(bf,{config:Wu,...e}),(0,i.jsx)(bf,{config:Vu,...e})]})})}function Wf(e){return(0,i.jsx)(se,{title:(0,i.jsx)(h().sA,{id:"settingsConsole.security.organizationSettings.integrations.title",defaultMessage:"Integrations"}),content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(bf,{config:qu,...e}),(0,i.jsx)(bf,{config:Gu,...e})]})})}const qf=(0,h().YK)({breadcrumbBack:{id:"organizationSecuritySettingPage.breadcrumb.goBack",defaultMessage:"Security"}});function Gf(e){let{organizationStore:t,settingName:a}=e;const n=(0,f().v3)(),o=function(e){return tg[e]}(a),r=(0,s.useCallback)((()=>(0,xd().i)({environment:n,from:{tabRoute:Xt().Xe},organizationId:t.id,tabRoute:Xt().Xe})),[n,t.id]);return(0,i.jsx)(Df,{organizationStore:t,config:o,navigateBack:r,breadcrumbBackMessage:qf.breadcrumbBack})}function Kf(e){let{organizationId:t,queryParams:a}=e;const s=(0,Ta().E)({organizationId:t}),n=a[ku],o=(0,Pe().O)(tg,n)?n:void 0;return s?o?(0,i.jsx)(Gf,{settingName:o,organizationStore:s}):(0,i.jsx)(Ff,{organizationStore:s}):null}const Yf={general:()=>!0,security:()=>!0,people:()=>!0,data_and_compliance:()=>!0,analytics:()=>!0},Qf="group-id",$f={general:{tab:{icon:d().gearIcon,name:(0,i.jsx)(h().sA,{id:"settingsConsole.organization.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(lh,{subtab:e.properties.subtab,...e})},security:{tab:{icon:c().h,name:(0,i.jsx)(h().sA,{id:"settingsConsole.organization.tabNames.security",defaultMessage:"Security"})},scene:e=>(0,i.jsx)(Kf,{...e})},people:{tab:{icon:u().peopleIcon,name:(0,i.jsx)(h().sA,{id:"settingsConsole.organization.tabNames.people",defaultMessage:"People"})},scene:e=>(0,i.jsx)(Bf,{subtab:e.properties.subtab,userId:e.queryParams.userId,groupId:e.queryParams[Qf],...e})},data_and_compliance:{tab:{icon:r,name:(0,i.jsx)(h().sA,{id:"settingsConsole.organization.tabNames.dataAndCompliance",defaultMessage:"Data & Compliance"})},scene:e=>(0,i.jsx)(Pc,{subtab:e.properties.subtab,spaceId:e.queryParams[Xf],...e})},analytics:{tab:{icon:a(489538).o,name:(0,i.jsx)(h().sA,{id:"settingsConsole.organization.tabNames.contentAnalytics",defaultMessage:"Analytics"})},scene:e=>(0,i.jsx)(_m,{spaceId:e.queryParams[Xf],subtab:e.properties.subtab,...e})}},Xf="space-id",Zf={general:()=>!0,workspaces:()=>!0,groups:()=>!0,audit_log:()=>!0},Jf={general:{tab:{icon:d().gearIcon,name:(0,i.jsx)(h().sA,{id:"settingsConsole.singleUserView.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(vu,{...e})},workspaces:{tab:{icon:p().V,name:(0,i.jsx)(h().sA,{id:"settingsConsole.singleUserView.tabNames.workspaces",defaultMessage:"Workspaces"})},scene:e=>(0,i.jsx)(Pg,{...e})},groups:{tab:{icon:m,name:(0,i.jsx)(h().sA,{id:"settingsConsole.singleUserView.tabNames.groups",defaultMessage:"Groups"})},scene:e=>(0,i.jsx)(bg,{...e})},audit_log:{tab:{icon:a(202017).n,name:(0,i.jsx)(h().sA,{id:"settingsConsole.singleUserView.tabNames.auditLog",defaultMessage:"Audit log"})},scene:e=>(0,i.jsx)(au,{...e})}},ex={general:()=>!0,members:()=>!0,teamspaces:()=>!0,pages:()=>!0},tx={general:{tab:{icon:d().gearIcon,name:(0,i.jsx)(h().sA,{id:"settingsConsole.singleGroupView.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(Qr,{organizationId:e.organizationId,membersState:e.membersState,teamsState:e.teamsState,groupStore:e.groupStore,setSelectedTab:e.setSelectedTab,onCloseModal:e.onCloseModal})},members:{tab:{icon:u().peopleIcon,name:(0,i.jsx)(h().sA,{id:"settingsConsole.singleGroupView.tabNames.members",defaultMessage:"Members"})},scene:e=>(0,i.jsx)(il,{organizationId:e.organizationId,membersState:e.membersState,groupStore:e.groupStore,setSelectedTab:e.setSelectedTab,onCloseModal:e.onCloseModal})},teamspaces:{tab:{icon:p().V,name:(0,i.jsx)(h().sA,{id:"settingsConsole.singleGroupView.tabNames.teamspaces",defaultMessage:"Teamspaces"})},scene:e=>(0,i.jsx)(oo,{organizationId:e.organizationId,teamsState:e.teamsState,groupStore:e.groupStore,setSelectedTab:e.setSelectedTab,onCloseModal:e.onCloseModal})},pages:{tab:{icon:l().d,name:(0,i.jsx)(h().sA,{id:"settingsConsole.singleGroupView.tabNames.pages",defaultMessage:"Pages"})},scene:e=>(0,i.jsx)(vl,{organizationId:e.organizationId,groupPageStores:e.groupPageStores,groupStore:e.groupStore,setSelectedTab:e.setSelectedTab,onCloseModal:e.onCloseModal,removePagesFromGroup:e.removePagesFromGroup})}},ax={general:()=>!0,members:()=>!0,guests:()=>!0,groups:()=>!0,teamspaces:()=>!0},sx={general:{tab:{icon:d().gearIcon,name:(0,i.jsx)(h().sA,{id:"settingsConsole.singleWorkspaceView.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(zt,{...e})},members:{tab:{icon:u().peopleIcon,name:(0,i.jsx)(h().sA,{id:"settingsConsole.singleWorkspaceView.tabNames.members",defaultMessage:"Members"})},scene:e=>(0,i.jsx)(In,{...e})},guests:{tab:{icon:g().z,name:(0,i.jsx)(h().sA,{id:"settingsConsole.singleWorkspaceView.tabNames.guests",defaultMessage:"Guests"})},scene:e=>(0,i.jsx)(an,{...e})},groups:{tab:{icon:m,name:(0,i.jsx)(h().sA,{id:"settingsConsole.singleWorkspaceView.tabNames.groups",defaultMessage:"Groups"})},scene:e=>(0,i.jsx)(vs,{...e})},teamspaces:{tab:{icon:p().V,name:(0,i.jsx)(h().sA,{id:"settingsConsole.singleWorkspaceView.tabNames.teamspaces",defaultMessage:"Teamspaces"})},scene:e=>(0,i.jsx)(bo,{...e})}},nx={general:()=>!0,members:()=>!0,browse_content:()=>!1,exports:()=>!1},ox={general:()=>!0,members:()=>!0,browse_content:()=>!0,exports:e=>{let{features:t}=e;return t.legal_holds_exports_enabled??!1}},ix={general:{tab:{icon:d().gearIcon,name:(0,i.jsx)(h().sA,{id:"settingsConsole.singleLegalHoldView.tabNames.general",defaultMessage:"General"})},scene:e=>(0,i.jsx)(Vr,{...e})},members:{tab:{icon:p().V,name:(0,i.jsx)(h().sA,{id:"settingsConsole.singleLegalHoldView.tabNames.members",defaultMessage:"Members"})},scene:e=>(0,i.jsx)(Cr,{...e})},browse_content:{tab:{icon:a(115240).U,name:(0,i.jsx)(h().sA,{id:"settingsConsole.singleLegalHoldView.tabNames.browseContent",defaultMessage:"Browse content"})},scene:e=>(0,i.jsx)(li,{...e})},exports:{tab:{icon:n().f,name:(0,i.jsx)(h().sA,{id:"settingsConsole.singleLegalHoldView.tabNames.exports",defaultMessage:"Exports"})},scene:e=>(0,i.jsx)(Ci,{...e})}}},188668:(e,t,a)=>{a.d(t,{R:()=>z,Z:()=>D});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(484714),o=()=>a(56366),i=()=>a(401497),r=()=>a(576250),l=()=>a(854150),d=()=>a(798880),c=()=>a(301608),u=()=>a(959013),g=()=>a(534177),m=()=>a(284371),p=()=>a(76590),h=()=>a(972435),f=()=>a(836251),x=()=>a(997583),v=()=>a(962730),y=()=>a(630116),b=()=>a(249117),S=()=>a(859428),j=()=>a(125565),w=()=>a(690197),A=()=>a(655546),M=()=>a(511303),C=()=>a(374255),I=()=>a(175458),T=()=>a(733815),k=a(474848);const _=640;function z(e){let{data:t,loading:a,error:r,daysFilter:g,setDaysFilter:z}=e;const P=(0,n().v3)(),{activeMembersCount:N,previousActiveMembersCount:R,activeGuestsCount:B,previousActiveGuestsCount:L,topTeamspaces:E,topViewers:O,topEditors:U}=t,F=(0,i().IS)((e=>({title:{fontWeight:m().Wy.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},summaryCard:{minHeight:70},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16}})),[]),[H,V]=(0,x().z)(),{organizationOwnerRecordCache:W}=(0,s.useContext)(M().N),q=(0,s.useCallback)((e=>{p().n_(P,{filter:"user_engagement",daysFilter:e}),z(e)}),[P,z]),G=(0,o().K8)((()=>E.map((e=>{let{teamspaceId:t,pageViews:a}=e;return{store:new(y().h4)(P,{id:t,table:l().yK},{inMemoryRecordCache:W}),caption:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageViews",defaultMessage:"{pageViews} views",values:{pageViews:(0,k.jsx)(A()._,{abbreviateNumber:!0,num:a})}})}})).filter((e=>e.store.canRead())).slice(0,5)),[P,E,W]),K=(0,o().K8)((()=>O.map((e=>{let{userId:t,pageViews:a}=e;return{store:new(y().LU)(P,{id:t,table:d().oo}),caption:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,k.jsx)(A()._,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[P,O]),Y=(0,o().K8)((()=>U.map((e=>{let{userId:t,pageEdits:a}=e;return{store:new(y().LU)(P,{id:t,table:d().oo}),caption:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,k.jsx)(A()._,{abbreviateNumber:!0,num:a})}})}})).slice(0,5)),[P,U]);return(0,k.jsxs)("div",{style:F.container,ref:H,children:[(0,k.jsxs)("div",{style:F.titleContainer,children:[(0,k.jsxs)(j().A,{style:F.title,children:[(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.title",defaultMessage:"User engagement"}),(0,k.jsx)(S().A,{placement:v().W.Bottom,render:e=>(0,k.jsx)(w().A,{...e,href:(0,f().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:F.helpInfo}),renderTooltip:()=>"all_time"!==g?(0,k.jsx)(u().sA,{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:h().A.formatMessage(c().Yr[g])}}):(0,k.jsx)(u().sA,{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})]}),(0,k.jsx)(T().Z,{currentFilter:g,onChangeFilter:q})]}),(0,k.jsxs)(b().xA,{gap:16,children:[(0,k.jsx)(b().LX,{row:1,col:1,children:(0,k.jsx)(I().a,{style:F.summaryCard,loading:a,error:r,title:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:(0,k.jsx)(A()._,{abbreviateNumber:V<_,num:N})}}),byline:void 0!==R?(0,k.jsx)(D,{userType:"members",daysFilter:g,count:N,previousCount:R}):null})}),(0,k.jsx)(b().LX,{row:1,col:2,children:(0,k.jsx)(I().a,{style:F.summaryCard,loading:a,error:r,title:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:(0,k.jsx)(A()._,{abbreviateNumber:V<_,num:B})}}),byline:void 0!==L?(0,k.jsx)(D,{userType:"guests",daysFilter:g,count:B,previousCount:L}):null})})]}),(0,k.jsxs)(b().xA,{gap:16,children:[(0,k.jsx)(b().LX,{row:1,col:1,children:(0,k.jsx)(C().N,{loading:a,error:r,title:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.activeTeamspaces",defaultMessage:"Most active teamspaces"}),items:G})}),(0,k.jsx)(b().LX,{row:1,col:2,children:(0,k.jsx)(C().N,{loading:a,error:r,title:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.activeViewers",defaultMessage:"Most active viewers"}),items:K})}),(0,k.jsx)(b().LX,{row:1,col:3,children:(0,k.jsx)(C().N,{loading:a,error:r,title:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.activeEditors",defaultMessage:"Most active editors"}),items:Y})})]})]})}function D(e){let{userType:t,daysFilter:a,count:s,previousCount:n}=e;const o=0===s&&0===n?0:Math.round((s-n)/n*100);let l;l=o===1/0?function(e,t,a){if("all_time"===a)return(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"});return"guests"===e?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.guests.positive",defaultMessage:"{changeValue} more guests than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:c().Eb[a].toLocaleString()}}):(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.members.positive",defaultMessage:"{changeValue} more members than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:c().Eb[a].toLocaleString()}})}(t,s,a):function(e,t){switch(t){case"all_time":return 0===e?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"}):e>0?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.positive",defaultMessage:"{changeInPercentage}% more since the start",values:{changeInPercentage:Math.abs(e)}}):(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.negative",defaultMessage:"{changeInPercentage}% less since the start",values:{changeInPercentage:Math.abs(e)}});case"last_90_days":return 0===e?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.none",defaultMessage:"No changes in previous 90 days"}):e>0?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.positive",defaultMessage:"{changeInPercentage}% more than previous 90 days",values:{changeInPercentage:Math.abs(e)}}):(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.negative",defaultMessage:"{changeInPercentage}% less than previous 90 days",values:{changeInPercentage:Math.abs(e)}});case"last_28_days":return 0===e?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.none",defaultMessage:"No changes in previous 28 days"}):e>0?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.positive",defaultMessage:"{changeInPercentage}% more than previous 28 days",values:{changeInPercentage:Math.abs(e)}}):(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.negative",defaultMessage:"{changeInPercentage}% less than previous 28 days",values:{changeInPercentage:Math.abs(e)}});case"last_7_days":return 0===e?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.none",defaultMessage:"No changes in previous 7 days"}):e>0?(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.positive",defaultMessage:"{changeInPercentage}% more than previous 7 days",values:{changeInPercentage:Math.abs(e)}}):(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.negative",defaultMessage:"{changeInPercentage}% less than previous 7 days",values:{changeInPercentage:Math.abs(e)}});default:(0,g().HB)(t)}}(o,a);const d=o>0?(0,r().y)({height:12,width:12,fill:"currentColor"}):o<0?(0,r().y)({height:12,width:12,transform:"rotate(90deg)",fill:"currentColor"}):void 0,m=(0,i().IS)((e=>({text:{color:o>0?e.palette.green[500]:o<0?e.palette.red[500]:e.text.tertiary,display:"flex",alignItems:"center",gap:4}})),[o]);return(0,k.jsxs)("span",{style:m.text,children:[d,l]})}},189157:(e,t,a)=>{a.d(t,{A:()=>n});class s extends(()=>a(757695))().Store{getInitialState(){return{displaySummary:!0,openDropdown:!1,query:""}}}const n=new s},190106:(e,t,a)=>{a.d(t,{A:()=>x});var s=a(296540),n=()=>a(484714),o=()=>a(401497),i=()=>a(199734),r=()=>a(959013),l=()=>a(284371),d=()=>a(701763),c=()=>a(728611),u=()=>a(621979),g=()=>a(145214),m=()=>a(285790),p=()=>a(297872),h=()=>a(623580),f=a(474848);function x(e){let{handleSearchQueryChange:t,handleEnterPressed:a,handleInputCleared:x,currentTab:v,isSearchBarAlwaysOpen:y}=e;const b=(0,n().v3)(),{styles:S,isSearchOpen:j,intl:w,handleSearchButtonClick:A,handleSearchDismiss:M,searchQuery:C,setSearchQuery:I}=function(e){let{handleSearchQueryChange:t,handleInputCleared:a,currentTab:i,isSearchBarAlwaysOpen:c}=e;const u=(0,o().IS)((e=>({searchIcon:{width:14,height:void 0,fill:e.text.secondary},topbarIconButton:{display:"flex",alignItems:"center",fontSize:14,height:28,width:28,padding:6,color:e.text.secondary,fill:e.icon.secondary,fontWeight:l().Wy.regular,lineHeight:1,borderRadius:4},searchInput:{fontSize:14,lineHeight:1,paddingRight:4,color:e.text.primary,marginBottom:1}})),[]),g=(0,n().v3)(),[m,p]=(0,s.useState)(!1),[h,f]=(0,s.useState)(void 0),x=(0,s.useCallback)((()=>{p(!0),i&&d().Z9(g,{current_tab:i})}),[g,i]),v=(0,s.useCallback)((()=>{p(!1),f(void 0),t(void 0),null==a||a()}),[t,a]),y=(0,r().tz)();return{styles:u,isSearchOpen:m||c,intl:y,handleSearchButtonClick:x,handleSearchDismiss:v,searchQuery:h,setSearchQuery:f}}({handleSearchQueryChange:t,handleInputCleared:x,currentTab:v,isSearchBarAlwaysOpen:y});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m().A,{ariaLabel:w.formatMessage({id:"searchPlaceholder",defaultMessage:"Type to search..."}),icon:i().U,iconStyle:S.searchIcon,style:S.topbarIconButton,onClick:A,disableBackground:y}),(0,f.jsx)(g().A,{visible:j,animate:{width:150,opacity:1},initial:{width:0,opacity:0},exit:{width:0,opacity:0},skip:y,children:(0,f.jsx)(p().A,{capture:j,allowEsc:!0,render:e=>(0,f.jsx)("div",{style:{display:"flex",alignItems:"center",overflow:"hidden"},...e,children:(0,f.jsx)(h().A,{style:S.searchInput,format:h().C.Transparent,value:C,onChange:e=>{const a=e.target.value;I(a),t(a)},placeholder:w.formatMessage({id:"searchPlaceholder",defaultMessage:"Type to search..."}),focusInitial:j,showClearButton:!0,onCancel:M,onClick:c().kV,onClearButtonClick:M,onKeyDown:e=>{27===e.keyCode&&M(),a&&(0,u().A)(b,e,"enter")&&a()},onBlur:()=>{!C&&M()}})})})})]})}},194763:(e,t,a)=>{a.d(t,{A:()=>n});class s extends(()=>a(757695))().Store{getInitialState(){return{name:"",emailDomains:[]}}getValueForSpace(e){if(e.isDefined())return{name:e.getName()||"",emailDomains:e.getEmailDomains()}}}const n=s},202345:(e,t,a)=>{a.d(t,{t:()=>o});a(296540);var s=()=>a(401497),n=a(474848);function o(e){let{children:t}=e;const a=(0,s().IS)((e=>({container:{margin:"24px 32px 24px",padding:"0 16px",boxSizing:"border-box"}})),[]);return(0,n.jsx)("div",{style:a.container,children:t})}},207583:(e,t,a)=>{a.d(t,{F:()=>n});a(296540);var s=a(474848);const n=(0,a(340498).wt)("eyeHideInversePadded",{viewBox:"0 0 24 24",svg:(0,s.jsx)("path",{d:"M17.3867 18.1074C17.6055 18.3193 17.9404 18.333 18.1592 18.1074C18.3848 17.875 18.3711 17.5469 18.1592 17.335L6.5791 5.76855C6.37402 5.55664 6.01855 5.5498 5.80664 5.76855C5.60156 5.97363 5.60156 6.3291 5.80664 6.53418L17.3867 18.1074ZM12 6.1582C10.8105 6.1582 9.73047 6.36328 8.72559 6.69141L9.81934 7.78516C10.5098 7.58691 11.2275 7.4707 12 7.4707C16.3682 7.4707 19.8408 11.2715 19.8408 12.0713C19.8408 12.6113 18.7334 14.0059 16.9766 15.1064L17.9883 16.125C20.1348 14.7168 21.3857 12.8779 21.3857 12.0713C21.3857 10.6699 17.6055 6.1582 12 6.1582ZM12 17.9912C13.2646 17.9912 14.4199 17.7725 15.4658 17.4102L14.3789 16.3232C13.6338 16.542 12.8477 16.6787 12 16.6787C7.63184 16.6787 4.15918 13.0283 4.15918 12.0713C4.15918 11.6133 5.32129 10.1299 7.19434 8.98145L6.16211 7.94922C3.92676 9.37109 2.60742 11.251 2.60742 12.0713C2.60742 13.4727 6.46973 17.9912 12 17.9912ZM15.4111 13.3906C15.5889 12.9873 15.6914 12.5361 15.6914 12.0713C15.6914 10.0137 14.0508 8.39355 12 8.39355C11.5283 8.39355 11.084 8.48242 10.6738 8.65332L15.4111 13.3906ZM12 15.7559C12.5332 15.7559 13.0322 15.6328 13.4766 15.4209L8.64355 10.5811C8.4248 11.0322 8.30176 11.5312 8.30176 12.0781C8.30859 14.0811 9.94238 15.7559 12 15.7559Z"})})},208261:(e,t,a)=>{a.d(t,{h:()=>g});a(296540);var s=()=>a(401497),n=()=>a(278238),o=()=>a(959013),i=()=>a(962730),r=()=>a(859428),l=()=>a(453697),d=()=>a(731736),c=()=>a(142448),u=a(474848);function g(e){let{permissionGroup:t,hasTooltip:a,type:g="avatar"}=e;const{group:m,memberCount:p}=t,h=m.name,f=m.space_id,x=m.icon,{tooltipTextStyle:v,tooltipAvatarContainer:y,tooltipContainer:b,tooltipUserInfoContainer:S}=(0,l().n)(),j=(0,s().IS)((e=>({iconContainer:{position:"relative"},iconBackground:{position:"absolute",top:0,bottom:0,left:0,right:0,background:e.contentBackground,zIndex:1,borderRadius:"100%"},icon:{position:"relative",zIndex:2,height:c().tR,width:c().tR,background:x&&(0,n().T8)(x)?(0,n().ez)({icon:x,mode:e.mode,useLightGrayColor:!1}):e.palette.gray[75]}})),[x]),w=e=>(0,u.jsxs)("div",{style:j.iconContainer,...e,children:[(0,u.jsx)(d().e,{icon:x,spaceId:f,size:c().Gz,containerStyles:j.icon}),(0,u.jsx)("div",{style:j.iconBackground})]}),A=e=>(0,u.jsxs)("div",{style:b,children:[(0,u.jsx)("div",{style:y,children:w()}),(0,u.jsxs)("div",{style:S,children:[h,!e&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("br",{}),(0,u.jsx)("span",{style:v,children:(0,u.jsx)(o().sA,{id:"organization.workspace.teamspaces.groupAvatar.memberCount",defaultMessage:"{memberCount, plural, one {# member} other {# members}}",values:{memberCount:p}})})]})]})]});return a?(0,u.jsx)(r().A,{renderTooltip:()=>A("avatar-name"===g),placement:i().W.Bottom,alignment:i().C.Start,render:e=>w(e)}):"avatar-name"===g||"avatar-name-count"===g?A("avatar-name"===g):(0,u.jsx)("div",{children:w()})}},209592:(e,t,a)=>{a.d(t,{Z:()=>S});a(296540);var s=()=>a(484714),n=()=>a(56366),o=()=>a(401497),i=()=>a(12193),r=()=>a(90907),l=()=>a(835607),d=()=>a(737693),c=()=>a(340498),u=()=>a(468006),g=()=>a(959013),m=()=>a(381349),p=()=>a(640653),h=()=>a(765957),f=()=>a(991249),x=a(474848);const v=function(e){let{tier:t}=e;const s=()=>"business"===t?(0,x.jsx)(g().sA,{id:"upgradeToBusinessBadge",defaultMessage:"Business"}):(0,x.jsx)(g().sA,{id:"upgradeToEnterpriseBadge",defaultMessage:"Enterprise"});return(0,x.jsx)(a(824160).A,{children:(0,x.jsx)(s,{})})};var y=()=>a(233510),b=()=>a(976519);function S(e){let{teamStore:t,isDefault:a,onChange:S=(()=>{}),parentSpaceStore:w}=e;const A=(0,s().v3)(),M=(0,b().q)(null==t?void 0:t.id),C=(0,y().c)(w),I="business",T=(0,n().K8)((()=>w??h().default.state.currentSpaceStore),[w]),k=(0,n().K8)((()=>(null==T?void 0:T.canAdmin())??!1),[T]),_=(0,n().K8)((()=>{if(T)return(0,p().GK)(A,T)}),[A,T]),z=(0,n().K8)((()=>{const e=null==t?void 0:t.getSettingsStore().getValue();return!!e&&"private"===(0,u().MA)(e)}),[t]),D=(0,o().IS)((()=>({icon:{width:c().Ev.default,height:c().Ev.default},iconContainer:{width:c().Ev.default,height:c().Ev.default,display:"flex",justifyContent:"center",alignItems:"center",marginLeft:5,marginRight:5}})),[]),P=(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.privateTeamspaceUpsellBusiness.tooltip",defaultMessage:"Upgrade to Business Plan to enable Private teamspaces"}),N=(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.defaultTeamSpace.title",defaultMessage:"Default"}),R=(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.openTeamspace.title",defaultMessage:"Open"}),B=(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.closedTeamSpace.title",defaultMessage:"Closed"}),L=(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.privateTeamSpace.title",defaultMessage:"Private"}),E="dark"===(0,o().DP)().mode?m().Ay.uiLightGray:m().Ay.black,O=[{key:"open",icon:e=>(0,x.jsx)("div",{style:D.iconContainer,children:(0,d().V)({...e,...D.icon})}),iconColor:E,level:R,title:R,caption:(0,x.jsx)(g().sA,{id:"CreateTeamspaceMenu.openTeamspace.caption",defaultMessage:"Anyone can see and join this teamspace"}),disabled:!1,onSelect:()=>S("open",!1)},{key:"closed",icon:e=>(0,x.jsx)("div",{style:D.iconContainer,children:(0,l().peopleIcon)({...e,...D.icon})}),iconColor:E,level:B,title:B,caption:(0,x.jsx)(g().sA,{id:"CreateTeamspaceMenu.closedTeamspace.caption",defaultMessage:"Anyone can see this teamspace but not join"}),disabled:!1,onSelect:()=>S("closed",!1)},{key:"private",icon:e=>(0,x.jsx)("div",{style:D.iconContainer,children:(0,r().h)({...e,...D.icon})}),iconColor:E,level:L,title:C?L:(0,x.jsx)(j,{title:L,badge:(0,x.jsx)(v,{tier:I})}),caption:(0,x.jsx)(g().sA,{id:"CreateTeamspaceMenu.privateTeamspace.caption",defaultMessage:"Only members can see that this teamspace exists"}),disabled:!C&&!k,tooltip:C?void 0:P,onSelect:()=>{if(!C&&!z)return f().K(A,{from:"team_security_settings",upsell:{type:"product",product:I,limit:{type:"none"},trialability:"none"},dontOpenPlansOnCancel:!0});S("private",!1)}}];if(a||k){const e=a&&(!k||M),t={key:"default",icon:e=>(0,x.jsx)("div",{style:D.iconContainer,children:(0,i().globeIcon)({...e,...D.icon})}),iconColor:E,level:N,title:N,caption:(0,x.jsx)(g().sA,{id:"CreateTeamspaceMenu.defaultTeamspace.caption",defaultMessage:"Everyone at {spaceName} must be a member",values:{spaceName:_}}),disabled:!1,disableAllOptionsTooltip:e?k?(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.closeOrPrivateTeamspace.disabledTooltipOnlyDefaultTeam",defaultMessage:"Add another default teamspace to change teamspace permissions."}):(0,x.jsx)(g().sA,{id:"TeamAccessLevelSwitcher.defaultTeamspace.disabledTooltipNonAdmin",defaultMessage:"You can't change this setting because you are not a workspace admin"}):void 0,onSelect:()=>S("open",!0)};O.unshift(t)}return O}function j(e){let{title:t,badge:a}=e;const s=(0,o().IS)((()=>({container:{display:"flex",flexWrap:"wrap",alignItems:"center"},badge:{marginLeft:5}})),[]);return(0,x.jsxs)("div",{style:s.container,children:[t,(0,x.jsx)("div",{style:s.badge,children:a})]})}},221723:(e,t,a)=>{a.d(t,{iK:()=>n,p8:()=>s});const s=28,n=24},223544:(e,t,a)=>{a.d(t,{FS:()=>X,Jo:()=>Q,tp:()=>$,uU:()=>G,v8:()=>Y});a(944114),a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520),a(672577),a(581454);var s=a(296540),n=()=>a(56366),o=()=>a(401497),i=()=>a(784892),r=()=>a(187174),l=()=>a(12193),d=()=>a(888867),c=()=>a(797561),u=()=>a(96689),g=()=>a(798880),m=()=>a(695608),p=()=>a(959013),h=()=>a(763824),f=()=>a(534177),x=()=>a(56394),v=()=>a(972435),y=()=>a(722872),b=()=>a(698449),S=()=>a(118789),j=()=>a(962730),w=()=>a(377586),A=()=>a(765957),M=()=>a(605402),C=()=>a(21735),I=()=>a(970585),T=()=>a(630116),k=()=>a(493823),_=()=>a(760217),z=()=>a(928600),D=()=>a(939740),P=()=>a(897119),N=()=>a(204063),R=()=>a(187820),B=()=>a(73332),L=()=>a(228927),E=()=>a(89924),O=()=>a(125565),U=()=>a(453697),F=()=>a(484595),H=()=>a(806754),V=()=>a(881690),W=()=>a(297780),q=a(474848);const G=(0,p().YK)({usersPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersPlaceholder",defaultMessage:"Search for users..."},usersAndGroupsPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersAndGroupsPlaceholder",defaultMessage:"Search for users and groups..."}}),K=10,Y={key:"no-results",action:()=>{},render:e=>(0,q.jsx)(O().A,{isSecondaryColor:!0,style:{width:"100%",margin:"8px 12px"},...e,children:(0,q.jsx)(p().sA,{id:"adminContentSearchTab.pagesTable.filters.users.noResultsMessage",defaultMessage:"No results found"})})};function Q(e){const{title:t,selectedItems:a,setSelectedItems:o,onMenuClose:u,isMultiSelect:Q,includePermissionGroups:J,includeGuests:ee}=e,te=(0,p().tz)(),ae=(0,n().uB)(void 0,I().A),se=Z(),[ne,oe]=(0,s.useState)(K),[ie,re]=(0,s.useState)(!1),[le,de]=(0,s.useState)(""),ce=(0,n().O$)(A().AppStoreCurrentSpaceStore),ue=(0,n().K8)((()=>C().A.state.shouldUseEdgeCache),[]),ge=(0,S().n)({query:le,filter:ee?void 0:"members",disable:!ue}),{users:me,hasMore:pe}=(0,n().K8)((()=>({users:(null==ge?void 0:ge.rowsStore.state.rows)??[],hasMore:(null==ge?void 0:ge.rowsStore.state.hasMore)??!1})),[ge]),[{value:he}]=(0,r().Yb)((async()=>{if(!ue)return e.userStores;if(!ce)return[];return await(0,h().lX)(me,me.length,(async e=>{const t=T().LU.createChildStore(ce,{table:g().oo,id:e.id});return await t.load(),t}))}),[ue,ce,me,e.userStores]),fe=(0,s.useMemo)((()=>ue?ee?new Set(me.filter((e=>"page_guest"===e.membership_type)).map((e=>e.id))):new Set:e.guestUserIdSet),[ue,e.guestUserIdSet,me,ee]),xe=(null==he?void 0:he.length)??0,ve=(0,s.useMemo)((()=>a.map((e=>{let{id:t}=e;return t}))),[a]),ye=(0,n().K8)((()=>J?M().A.state.permissionGroupsAndMemberCounts.map((e=>e.group)):[]),[J]),be=(0,n().K8)((()=>ce?ve.map((e=>T().LU.createChildStore(ce,{table:g().oo,id:e}))).filter((e=>e.isReady())):[]),[ve,ce]),Se=(0,n().K8)((()=>ve.map((e=>ye.find((t=>t.group_id===e)))).filter(f().O9)),[ve,ye]);function je(){ue&&(null==ge||ge.refresh()),oe(K),re(!1),de(""),u()}function we(){de(""),o([])}function Ae(e){ue?e<5&&pe&&(null==ge||ge.loadMore()):e<5&&ne<xe&&oe(ne+K)}function Me(e){if(Q){return ve.includes(e.id)?[...a.filter((t=>{let{id:a}=t;return a!==e.id}))]:[...a,e]}return ve.includes(e.id)?[]:[e]}function Ce(e){const t=Me({id:e,type:"user"});o(t),de("")}function Ie(e){const t=Me({id:e,type:"permission_group"});o(t),de("")}const Te=(0,s.useCallback)((e=>{de(e.target.value)}),[]),ke=(0,n().K8)((()=>be.map((e=>{const t=(0,m().c6)(te,e.getModel()),a=!!fe&&fe.has(e.id);return(0,q.jsx)(V().A,{isSingle:!0,format:i().NY.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=ve.filter((t=>t!==e.id)).map((e=>({id:e,type:"user"})));o(t)},style:a?se.guestPillContainer:se.pillContainer,value:(0,q.jsxs)("div",{style:se.pillContents,children:[a?(0,l().globeIcon)(se.guestIcon):(0,q.jsx)(U().A,{userStore:e,size:16}),(0,q.jsx)(O().A,{style:se.pillText,children:t})]})},e.id)}))),[ve,be,o,fe,se,te]),_e=(0,n().K8)((()=>Se.map((e=>{const t=b().Pf({intl:te,groupName:e.name});return(0,q.jsx)(V().A,{isSingle:!0,format:i().NY.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=ve.filter((t=>t!==e.group_id)).map((e=>({id:e,type:"permission_group"})));o(t)},style:se.pillContainer,value:(0,q.jsxs)("div",{style:se.pillContents,children:[(0,q.jsx)(R().B6,{disabled:!0,icon:e.icon&&ce?{pointer:ce.pointer,icon:e.icon}:void 0,size:14,isEmptyPage:!1,title:t,defaultIcon:(0,d().peopleFillIcon)(se.defaultGroupIconPill),style:se.groupIconSpacing}),(0,q.jsx)(O().A,{style:se.pillText,children:t})]})},e.id)}))),[ve,Se,o,se,ce,te]);const ze=(0,q.jsx)(x().A,{on:ve.length>0,icon:(0,c().E)(se.icon),title:t,onClick:()=>re(!0)});return(0,q.jsx)(H().A,{children:(0,q.jsx)(P().Ay,{popupType:w().n.Popup,placementToOrigin:j().W.Bottom,alignmentToOrigin:j().C.Start,open:ie,render:function(){const e=[];for(const a of he??[]){var t;const s=(0,m().c6)(te,a.getModel()),n=!!fe&&fe.has(a.id);(s.toLocaleLowerCase().includes(le)||null!==(t=a.getEmail())&&void 0!==t&&t.toLocaleLowerCase().includes(le))&&e.push({key:a.id,action:()=>Ce(a.id),render:e=>(0,q.jsx)(_().A,{...e,icon:Q?(0,q.jsx)(B().T,{checked:ve.includes(a.id),onClick:()=>Ce(a.id),size:16}):(0,q.jsx)(F().A,{isSelected:ve.includes(a.id)}),focused:!1,title:(0,q.jsx)($,{userStore:a,isGuest:n})})})}const s=[];for(const a of ye){b().Pf({intl:te,groupName:a.name}).toLocaleLowerCase().includes(le)&&s.push({key:a.id,action:()=>Ie(a.group_id),render:e=>(0,q.jsx)(_().A,{...e,icon:Q?(0,q.jsx)(B().T,{checked:ve.includes(a.group_id),onClick:()=>Ie(a.group_id),size:16}):(0,q.jsx)(F().A,{isSelected:ve.includes(a.group_id)}),focused:!1,title:(0,q.jsx)(X,{group:a,spaceId:null==ce?void 0:ce.id})})})}let n=[];n=ue?pe?[...e]:[...e,...s]:[...e,...s].slice(0,ne);const i={key:"userOptions",items:n.length>0?n:[Y],render:e=>(0,q.jsx)(E().A,{...e,title:null,loading:!1})};return(0,q.jsxs)("div",{style:se.container,children:[(0,q.jsx)(W().A,{focus:!0,value:le,style:se.input,placeholder:v().A.formatMessage(J?G.usersAndGroupsPlaceholder:G.usersPlaceholder),onChange:Te,onRemoveLastToken:()=>{const e=a.slice(0,-1);o(e)},tokens:[...ke,..._e]}),(0,q.jsxs)(z().A,{menuType:y().gu.Popup,header:null,maxHeight:250,width:300,children:[(0,q.jsx)(D().Ay,{type:D().Oh.Vertical,store:ae,initialFocus:0,sections:[i]}),(0,q.jsx)(L().A,{onChange:Ae})]}),(0,q.jsxs)(E().A,{topBorder:!0,style:se.footer,children:[(0,q.jsx)(k().p,{onClick:we,children:(0,q.jsx)(p().sA,{id:"adminContentSearchTab.pagesTable.filters.users.clearButton",defaultMessage:"Clear"})}),(0,q.jsx)(N().A,{onClick:je,children:(0,q.jsx)(p().sA,{id:"adminContentSearchTab.pagesTable.filters.users.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:je,keepFocus:!0,origin:ze,preventScaleTransition:!0,originGap:8})})}function $(e){let{userStore:t,isGuest:a}=e;const s=(0,p().tz)(),o=Z(),i=(0,n().K8)((()=>t.getDisplayName(s)),[t,s]);return(0,q.jsxs)("div",{style:o.optionContainer,children:[(0,q.jsx)(U().A,{userStore:t,size:24,style:o.optionAvatar}),(0,q.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,q.jsx)(O().A,{style:o.optionTitle,children:i}),(0,q.jsx)(O().A,{style:o.optionCaption,children:a?(0,q.jsx)(p().sA,{id:"adminContentSearchTab.pagesTable.filters.users.guestCaption",defaultMessage:"Guest"}):(0,q.jsx)(p().sA,{id:"adminContentSearchTab.pagesTable.filters.users.memberCaption",defaultMessage:"Member"})})]})]})}function X(e){let{group:t,spaceId:a}=e;const s=Z(),n=(0,p().tz)(),o=b().Pf({intl:n,groupName:t.name});return(0,q.jsxs)("div",{style:s.optionContainer,children:[(0,q.jsx)(R().B6,{disabled:!0,icon:t.icon&&a?{pointer:{id:a,table:u().NX},icon:t.icon}:void 0,size:22,isEmptyPage:!1,title:o,defaultIcon:(0,d().peopleFillIcon)(s.defaultGroupIcon),style:s.groupIconSpacing}),(0,q.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,q.jsx)(O().A,{style:s.optionTitle,children:o}),(0,q.jsx)(O().A,{style:s.optionCaption,children:(0,q.jsx)(p().sA,{id:"adminContentSearchTab.pagesTable.filters.users.groupCaption",defaultMessage:"Group"})})]})]})}function Z(){return(0,o().IS)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:8},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%",maxHeight:200,overflowY:"auto"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},icon:{width:16,marginRight:4,fill:"currentColor"},defaultGroupIcon:{height:22,width:22,color:e.text.secondary,fill:"currentColor"},defaultGroupIconPill:{height:14,width:14,color:e.text.secondary,fill:"currentColor"},groupIconSpacing:{marginRight:8},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},guestPillContainer:{margin:"0px 6px 6px 0px",background:e.guestTokenBackground,height:20},guestIcon:{height:16,width:16,color:e.guestIconColor},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},pillText:{marginLeft:4},optionTitle:{display:"block"},optionCaption:{display:"block",color:e.text.secondary,fontSize:12,lineHeight:"15px"}})),[])}},229907:(e,t,a)=>{a.d(t,{lT:()=>d});a(944114);var s=()=>a(244641),n=()=>a(720665),o=()=>a(416845);const i=7;function r(e){if(void 0===e)return s().c9.utc();const t={zone:"utc"};return"number"==typeof e?s().c9.fromMillis(e,t):s().c9.fromISO(e,t)}function l(e,t){const a=t?r(t):s().c9.utc(),n=r(e??function(e){const{days:t,endDate:a,startDate:n}=e;if(t<=0)throw new(o().yI4)("Days must be greater than 0");const i=a?r(a):s().c9.utc();if(!i.isValid)throw new(o().yI4)(`endDate ${a} is in an invalid format`);const l=n?r(n).toMillis():0,d=i.minus({days:t-1}).toMillis();return Math.max(d,l)}({days:i,endDate:t}));if(!n.isValid)throw new(o().yI4)(`startDate ${e} is in an invalid format`);if(!a.isValid)throw new(o().yI4)(`endDate ${t} is in an invalid format`);if(n>a)throw new(o().yI4)(`startDate ${e} => ${n.toISO()} is after endDate ${t} => ${a.toISO()}`);return{startTimestamp:n.toMillis(),endTimestamp:a.toMillis()}}function d(e,t){const{startTimestamp:a,endTimestamp:s}=l(e,t),o=[];let i=a;for(;i<=s;)o.push(r(i).toISODate()),i+=n().nD;return o}},230357:(e,t,a)=>{a.d(t,{A:()=>r,_:()=>l});a(581454),a(814603),a(147566),a(198721);var s=()=>a(604995),n=()=>a(348564),o=()=>a(30731);class i extends(()=>a(757695))().Store{getInitialState(){return{pageNum:1,pageSize:10,timeRange:{},actors:[],actions:[],sortOrder:n().K7.CreatedNewest}}}const r=new i;function l(e){const{timeRange:t,actors:a,actions:i,sortOrder:r}=e,l=new URLSearchParams;return t.starting&&l.append("starting",`${s().C6.toUnixMs(t.starting)}`),t.ending&&l.append("ending",`${s().C6.toUnixMs(t.ending)}`),(null==a?void 0:a.length)>0&&l.append("actors",a.map(o().Ht).join(",")),(null==i?void 0:i.length)>0&&l.append("actions",i.join(",")),l.append("sort",`${r||n().K7.CreatedNewest}`),l.toString()}},233510:(e,t,a)=>{a.d(t,{Z:()=>c,c:()=>d});var s=()=>a(56366),n=()=>a(979340),o=()=>a(809730),i=()=>a(765957),r=()=>a(807778),l=()=>a(960236);function d(e){const{currentSpaceStore:t}=(0,s().O$)(i().default),a=e??t;return(0,s().K8)((()=>{const e=(null==a?void 0:a.getSubscriptionTier())??"free";return(0,n().rV)(e,"business")}),[a])}function c(){const{currentSpaceStore:e}=(0,s().O$)(i().default),t=(0,l().lh)({spaceId:null==e?void 0:e.id});return(0,s().K8)((()=>{const a=(null==e?void 0:e.getSubscriptionTier())??"free";return!(0,r().hG)()&&(0,n().rV)(a,"business")||(0,o().e)({billingData:t})}),[e,t])}},234748:(e,t,a)=>{a.d(t,{I:()=>n});a(296540);var s=a(474848);const n=(0,a(340498).wt)("settingsWorkspace",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M11.757 16.94v-1.333h4.812q.178 0 .267-.088.09-.09.089-.267v-7.95q0-.179-.09-.267-.087-.09-.266-.089h-4.327V5.62h4.703q.609 0 .957.383.35.376.349 1.032v8.484q0 .655-.349 1.039-.348.382-.957.382zm2.659-7.417q-.219 0-.219-.225V8.252q0-.232.219-.232h1.08q.226 0 .226.232v1.046q0 .225-.226.225zm0 2.53q-.219 0-.219-.233v-1.046q0-.232.219-.232h1.08q.226 0 .226.232v1.046q0 .233-.226.233zm0 2.522q-.219 0-.219-.232v-1.046q0-.226.219-.226h1.08q.226 0 .226.226v1.046q0 .232-.226.232zm-12.674.944V3.624q0-.663.349-1.039.349-.383.964-.383h8.627q.607 0 .957.383.355.376.355 1.039v11.895q0 .655-.355 1.039-.35.382-.957.382H3.055q-.616 0-.964-.382-.35-.384-.349-1.04Zm1.333-.267q0 .177.09.267.087.088.266.088h7.875q.177 0 .266-.088.09-.09.09-.267V3.897q0-.185-.09-.273-.089-.09-.266-.089H3.43q-.179 0-.267.089-.09.09-.089.273v11.355Zm1.853.991v-2.618q0-.437.205-.65.205-.218.622-.218H8.98q.417 0 .623.219.204.21.205.649v2.618h-1.04v-2.27q0-.204-.211-.204h-2.38q-.21 0-.211.205v2.27h-1.04Zm.198-9.755q-.26 0-.26-.273V4.943q0-.273.26-.273h1.306q.273 0 .273.273v1.272q0 .273-.273.273zm3.172 0q-.267 0-.267-.273V4.943q0-.273.267-.273h1.306q.266 0 .266.273v1.272q0 .273-.266.273zM5.126 9.106q-.26 0-.26-.273V7.568q0-.273.26-.273h1.306q.273 0 .273.273v1.265q0 .273-.273.273zm3.172 0q-.267 0-.267-.273V7.568q0-.273.267-.273h1.306q.266 0 .266.273v1.265q0 .273-.266.273zm-3.172 2.625q-.26 0-.26-.28v-1.264q0-.274.26-.274h1.306q.273 0 .273.274v1.264q0 .28-.273.28zm3.172 0q-.267 0-.267-.28v-1.264q0-.274.267-.274h1.306q.266 0 .266.274v1.264q0 .28-.266.28z"})})},237824:(e,t,a)=>{a.d(t,{A:()=>P});a(944114),a(898992),a(908872);var s=a(296540),n=()=>a(56366),o=()=>a(401497),i=()=>a(845960),r=()=>a(326346),l=()=>a(200582),d=()=>a(959013),c=()=>a(381349),u=()=>a(778078),g=()=>a(496603),m=()=>a(534177),p=()=>a(56394),h=()=>a(493823),f=()=>a(760217),x=()=>a(623580),v=()=>a(928600),y=()=>a(939740),b=()=>a(204063),S=()=>a(73332),j=()=>a(89924),w=()=>a(125565),A=()=>a(47373),M=()=>a(722872),C=()=>a(962730),I=()=>a(217429),T=()=>a(134217),k=()=>a(606273),_=a(474848);const z={page:(0,_.jsx)(d().sA,{id:"auditlogEventFilter.categoryName.page",defaultMessage:"Page"}),space:(0,_.jsx)(d().sA,{id:"auditlogEventFilter.categoryName.workspace",defaultMessage:"Workspace"}),team:(0,_.jsx)(d().sA,{id:"auditlogEventFilter.categoryName.team",defaultMessage:"Teamspace"}),account:(0,_.jsx)(d().sA,{id:"auditlogEventFilter.categoryName.account",defaultMessage:"Account"}),organization:(0,_.jsx)(d().sA,{id:"auditlogEventFilter.categoryName.organization",defaultMessage:"Organization"}),form:(0,_.jsx)(d().sA,{id:"auditlogEventFilter.categoryName.form",defaultMessage:"Form"})};function D(e){let{totalNumEventsForCategory:t,numSelectedForCategory:a,category:s,categoryOpen:n,shouldShowCount:i,onCategoryClick:r,onCategoryToggleClick:l,...c}=e;const u=(0,o().IS)((e=>({textWrapperStyle:{margin:0},title:{margin:0,display:"flex",alignItems:"center"},categoryText:{marginLeft:8,fontWeight:600},categorySubHeader:{marginLeft:6},toggleButton:{marginLeft:2,marginRight:2}})),[]);let g,m;return g=i?t===a?(0,_.jsx)(d().sA,{id:"auditlogEventFilter.allEventsSelected",defaultMessage:"({totalNum} events)",values:{totalNum:t}}):(0,_.jsx)(d().sA,{id:"auditlogEventFilter.numEventsSelected",defaultMessage:"({numSelected} of {totalNum} events selected)",values:{numSelected:a,totalNum:t}}):null,m=t===a||0!==a&&"partial",(0,_.jsx)(f().A,{...c,className:"notranslate",textWrapperStyle:u.textWrapperStyle,focused:!1,title:(0,_.jsxs)("div",{style:u.title,children:[(0,_.jsx)(k().f,{style:u.toggleButton,open:n,onClick:l,isSidebar:!1,fill:!1,icon:"chevron"}),(0,_.jsx)(S().T,{checked:m,size:14,onClick:r}),(0,_.jsx)(w().A,{style:u.categoryText,children:z[s]}),(0,_.jsx)(w().A,{isSecondaryColor:!0,style:u.categorySubHeader,children:g})]})})}const P=function(e){let{onChange:t,lastSelectionStore:i,componentStore:r}=e;const l=(0,o().DP)(),c=(0,n().uB)(void 0,a(970585).A),u=(0,n().K8)((()=>r.state.isMenuOpen),[r]),g=(0,s.useCallback)((()=>(0,_.jsx)(F,{onChange:t,componentStore:r,lastSelectionStore:i,menuListStore:c})),[t,r,i,c]),m=(0,s.useCallback)((()=>function(e,t){e.setState({...e.state,actionSelections:{...t.state.actionSelections}}),O(!1,e)}(r,i)),[r,i]),p=B(l),h=(0,_.jsx)(d().sA,{id:"auditlogEventFilter.title",defaultMessage:"Event"}),f=(0,_.jsx)(U,{componentStore:r,title:h});return(0,_.jsx)(a(806754).A,{marginAfter:!1,children:(0,_.jsx)(a(897119).Ay,{popupType:a(377586).n.Popup,placementToOrigin:C().W.Bottom,alignmentToOrigin:C().C.Start,open:u,render:g,onDismiss:m,keepFocus:!0,origin:f,preventScaleTransition:!0,style:p.popup})})};function N(e){var t;return g().oE([e.key,null===(t=e.localizedActionName)||void 0===t?void 0:t.toLowerCase()]).join(" ")}function R(e){let{totalNumSelected:t,totalNumEvents:a}=e;const s=(0,o().IS)((e=>({container:{background:c().Ay.diffBackground,color:c().Ay.diffTextColor,paddingInline:6,margin:8,marginBottom:0,borderRadius:4,fontWeight:510,width:"fit-content"}})),[]);return(0,_.jsx)(w().A,{style:s.container,children:(0,_.jsx)(d().sA,{id:"auditLogEventFilter.selectedPill",defaultMessage:"{totalNumSelected} of {totalNumEvents} selected",values:{totalNumSelected:t,totalNumEvents:a}})})}function B(e){return{container:{minWidth:460},searchInput:{padding:8,borderBottomLeftRadius:0,borderBottomRightRadius:0,boxShadow:"none",borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.lightDividerColor},popup:{paddingBottom:8}}}function L(e){const{renderGroup:t,shouldShowCount:a,totalNumEventsForCategory:s,numSelectedForCategory:n,componentStore:o}=e,i=t.category,r=()=>{o.toggleCategorySelection(t)},l=()=>{o.selectCategorySelection(t)};return{key:i,action:r,render:e=>(0,_.jsx)(D,{totalNumEventsForCategory:s,numSelectedForCategory:n,category:i,categoryOpen:o.state.categoryToggleOpen[i],shouldShowCount:a,onCategoryToggleClick:r,onCategoryClick:l,...e}),localizedActionName:null,actionName:null}}function E(e){const{actionName:t,renderGroup:a,componentStore:s,intl:n}=e,o=()=>{s.selectActionName(t,a)},i=n.formatMessage(r().T0[t]);return{key:t,action:o,render:e=>(0,_.jsx)(f().A,{...e,icon:(0,_.jsx)(S().T,{checked:s.state.actionSelections[t],size:14,onClick:o}),focused:!1,title:i,className:"notranslate",style:{paddingLeft:32},textWrapperStyle:{marginLeft:4}}),actionName:t,localizedActionName:i}}function O(e,t){t.setState({...t.state,isMenuOpen:e})}function U(e){let{title:t,componentStore:a}=e;const s=(0,n().K8)((()=>a.hasActionNameSelected()),[a]);return(0,_.jsx)(p().A,{on:s,icon:(0,l().m)({width:16,marginRight:6,fill:"currentColor"}),title:(0,_.jsx)("span",{children:t}),onClick:()=>{O(!0,a)}})}function F(e){let{onChange:t,componentStore:a,lastSelectionStore:r,menuListStore:l}=e;const c=(0,o().DP)(),g=(0,d().tz)(),p=(0,s.useCallback)((e=>function(e,t){t.updateSearchQuery(e.target.value)}(e,a)),[a]),f=B(c),S=(0,n().K8)((()=>[...(0,m().WP)(i().BU).reduce(((e,t)=>{let[a,s]=t;return I().default.checkGate({gateName:a})?e:[...e,...s]}),[]),...(0,A().Qd)()?[]:["team_guest_default_permission_updated"],...(0,T().dW)()?[]:["guest_membership_requests_toggled"],"page.shared_with_email_domain"]),[]),{actionSelections:w,categoryToggleOpen:C,renderOrder:k,searchQuery:z}=(0,n().K8)((()=>{const{actionSelections:e,categoryToggleOpen:t,renderOrder:s,searchQuery:n}=a.state;return{actionSelections:e,categoryToggleOpen:t,renderOrder:s,searchQuery:n}}),[a]),D=[];let P=0,U=0;for(const s of k){const e=s.category,t=[];let n=0;for(const o of s.orderedActions)S.includes(o)||(t.push(E({actionName:o,renderGroup:s,intl:g,componentStore:a})),w[o]&&n++);if(P+=n,U+=t.length,D.push(L({renderGroup:s,shouldShowCount:!Boolean(z),totalNumEventsForCategory:t.length,numSelectedForCategory:n,componentStore:a})),C[e])if(z){const e=(0,u().Ay)(z,t,N);D.push(...e)}else D.push(...t)}const F={key:"results",items:D,render:e=>(0,_.jsx)(j().A,{...e,title:null,loading:!1})};return(0,_.jsxs)("div",{style:f.container,children:[(0,_.jsx)(x().A,{style:f.searchInput,placeholder:g.formatMessage({id:"auditlogEventFilter.searchPlaceholder",defaultMessage:"Search for an event"}),onChange:p,value:z,showClearButton:!0}),z&&(0,_.jsx)(R,{totalNumSelected:P,totalNumEvents:U}),(0,_.jsx)(v().A,{menuType:M().gu.Popup,header:null,maxHeight:356,children:(0,_.jsx)(y().Ay,{type:y().Oh.Vertical,store:l,initialFocus:0,sections:[F]})}),(0,_.jsxs)(j().A,{topBorder:!0,style:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},children:[(0,_.jsx)(h().p,{onClick:()=>{!function(e){e.clearAllSelections()}(a)},children:(0,_.jsx)(d().sA,{id:"auditlogEventFilter.clearButton",defaultMessage:"Clear"})}),(0,_.jsx)(b().A,{onClick:()=>{!function(e,t,a){const s=t.getAllActionNames(),n=t.getSelectedActionNames();e(s.length===n.length?[]:n),0===n.length&&t.reset(),a.setState({...a.state,actionSelections:{...t.state.actionSelections}}),O(!1,t)}(t,a,r)},children:(0,_.jsx)(d().sA,{id:"auditlogEventFilter.applyButton",defaultMessage:"Apply"})})]})]})}},246682:(e,t,a)=>{a.d(t,{e:()=>L});a(898992),a(672577);var s=a(296540),n=()=>a(401497),o=()=>a(378815),i=()=>a(892936),r=()=>a(582684),l=()=>a(959013),d=()=>a(56394),c=()=>a(406699),u=()=>a(897119),g=(a(354520),a(581454),()=>a(617668)),m=()=>a(236262),p=()=>a(534177),h=()=>a(722872),f=()=>a(760217),x=()=>a(439264),v=()=>a(928600),y=()=>a(554509),b=()=>a(89924),S=()=>a(244149),j=()=>a(301524),w=()=>a(541558),A=()=>a(678553),M=()=>a(933117),C=()=>a(272630),I=()=>a(992510),T=()=>a(490094),k=a(474848);function _(e){let{sort:t,sortProperties:a,onChange:s,currentSorts:o}=e;const i=(0,n().IS)((()=>({sortRow:{display:"flex",alignItems:"center",flexGrow:1,whiteSpace:"nowrap"},section:{padding:"8px 0 0 8px",width:"100%"}})),[]);if(!t)return null;return(0,k.jsx)(b().A,{extraTopPadding:!0,style:i.section,children:(0,k.jsx)(A().Ay,{showDragHandle:!0,title:(0,k.jsxs)("div",{style:i.sortRow,children:[(0,k.jsx)(D,{currentPropertyId:t.propertyId,sortProperties:a,currentSorts:o,onChange:s}),(0,k.jsx)(z,{sort:t,currentSorts:o,onChange:s})]}),right:(0,k.jsx)(j().B,{onDeleteClick:()=>{const e=o.filter((e=>{let{propertyId:a}=e;return a!==(null==t?void 0:t.propertyId)}));s(e)}}),rightStyle:{marginRight:19}})})}function z(e){let{sort:t,onChange:a,currentSorts:s}=e;const n=(0,l().tz)(),o=t.direction;return(0,k.jsx)(M().A,{menuTitle:n.formatMessage(w().CL.menuTitle),items:[...S().FU],selectedItem:o,onSelect:e=>{const n=s.map((a=>a.propertyId===t.propertyId?{...a,direction:e}:a));a(n)},getKey:e=>e,renderItem:e=>(0,k.jsx)(f().A,{title:w().bL[e.value],...e}),renderOrigin:e=>(0,k.jsx)(C().A,{...e,placeholder:n.formatMessage(w().CL.emptyPlaceholder),title:o&&w().bL[o],desktopStyle:{opacity:1}})},"direction")}function D(e){let{currentPropertyId:t,sortProperties:a,currentSorts:s,onChange:n}=e;const o=a.find((e=>e.id===t));return o?(0,k.jsx)(c().Ay,{popupType:c().z7.Popup,renderOrigin:e=>(0,k.jsx)(I().A,{...e,disabled:s.length===a.length,propertySchema:o,textWrapperStyle:{opacity:1}}),render:e=>{let{close:o}=e;return(0,k.jsx)(T().J,{onClick:e=>{(e=>{const a=s.map((a=>a.propertyId===t?{propertyId:e,direction:a.direction}:a));n(a)})(e),o()},currentSorts:s,sortProperties:a})}}):null}function P(e){let{sortProperties:t,currentSorts:a,onChange:s,preventMultipleSorts:n}=e;const o=a.map((e=>e.propertyId));return(0,k.jsxs)(v().A,{menuType:h().gu.Popup,minWidth:320,children:[(0,k.jsx)(x().Ay,{direction:"vertical",keys:o,renderKey:e=>(0,k.jsx)(_,{sortProperties:t,onChange:s,currentSorts:a,sort:a.find((t=>t.propertyId===e))}),onDrop:e=>function(e,t,a){const s=e.map((e=>a.find((t=>t.propertyId===e)))).filter(p().O9);t(s)}(e,s,a)}),(0,k.jsxs)(b().A,{children:[n?null:(0,k.jsx)(N,{sortProperties:t,currentSorts:a,onChange:s}),(0,k.jsx)(R,{currentSorts:a,onChange:s})]})]})}function N(e){let{sortProperties:t,currentSorts:a,onChange:s}=e;const n=B();if(!(a.length<t.length))return null;return(0,k.jsx)(c().Ay,{popupType:u().nl.Popup,renderOrigin:e=>(0,k.jsx)(f().A,{focused:!1,icon:(0,g().plusIcon)(n.icon),title:(0,k.jsx)(y().D,{colorName:"secondary",children:(0,k.jsx)(l().sA,{id:"database.viewSettings.sortTab.newSort",defaultMessage:"Add sort"})}),...e}),render:e=>{let{close:n}=e;return(0,k.jsx)(T().J,{sortProperties:t,currentSorts:a,onClick:e=>{s([...a,{propertyId:e,direction:"ascending"}]),n()}})}})}function R(e){let{currentSorts:t,onChange:a}=e;const s=B();return t.length>0?(0,k.jsx)(f().A,{focused:!1,icon:(0,m().trashIcon)(s.icon),title:(0,k.jsx)(y().D,{colorName:"secondary",children:(0,k.jsx)(l().sA,{id:"database.viewSettings.sortTab.deleteAllSorts",defaultMessage:"Delete sort"})}),onClick:()=>a([])}):null}function B(){return(0,n().IS)((e=>({icon:{width:24,height:16,marginRight:-2,fill:e.icon.secondary}})),[])}function L(e){const{currentSorts:t,isMenuOpen:a,setIsMenuOpen:g,sortProperties:m,onApply:p,preventMultipleSorts:h}=e,f=(0,n().IS)((e=>({sortDirectionIcon:{width:12,height:22,marginRight:6,fill:"currentColor"},multiSortIcon:{width:16,height:22,marginRight:6,fill:"currentColor"},empty:{height:24}})),[]),[x,v]=(0,s.useState)(t.length?t:void 0),y=x??t;let b,S;if(1===y.length){var j;const e=y[0];b="ascending"===e.direction?(0,i().f)(f.sortDirectionIcon):(0,o().C)(f.sortDirectionIcon),S=null===(j=m.find((t=>t.id===e.propertyId)))||void 0===j?void 0:j.name}else b=(0,r().C)(f.multiSortIcon),S=(0,k.jsx)(l().sA,{defaultMessage:"{sortCount} sorts",id:"settingsConsoleSortButton.multiSorts.label",values:{sortCount:y.length}});const w=y.length||a?(0,k.jsx)(d().A,{on:y.length>0,icon:b,title:S,onClick:()=>g(!0)}):(0,k.jsx)("div",{style:f.empty});return(0,k.jsx)(u().Ay,{popupType:c().z7.Popup,open:a,origin:w,onDismiss:()=>{p(y),v(void 0),g(!1)},originGap:4,render:()=>(0,k.jsx)(P,{...e,preventMultipleSorts:y.length>0&&h,onChange:v,currentSorts:y})})}},254685:(e,t,a)=>{a.d(t,{N:()=>$,A:()=>Q});a(581454);var s=a(296540),n=()=>a(968526),o=()=>a(484714),i=()=>a(56366),r=()=>a(401497),l=()=>a(301608),d=()=>a(959013),c=()=>a(381349),u=()=>a(284371),g=()=>a(76590),m=()=>a(593467),p=()=>a(59976),h=()=>a(972435),f=()=>a(836251),x=()=>a(997583),v=()=>a(962730),y=()=>a(311670),b=()=>a(298697),S=()=>a(859428),j=()=>a(125565),w=()=>a(690197),A=()=>a(5347),M=()=>a(452864),C=()=>a(249117),I=()=>a(655546),T=()=>a(175458),k=()=>a(733815),_=()=>a(188668),z=a(474848);const D=640;function P(e){let{data:t,loading:a,error:s,daysFilter:n,setDaysFilter:o}=e;const[i,c]=(0,x().z)(),g=(0,r().IS)((e=>({title:{fontWeight:u().Wy.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},container:{display:"flex",flexDirection:"column",gap:16},helpInfo:{marginLeft:4},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},summaryCard:{height:70},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{activeMembersCount:m,previousActiveMembersCount:p,activeGuestsCount:y,previousActiveGuestsCount:b}=t;return(0,z.jsxs)("div",{style:g.container,ref:i,children:[(0,z.jsxs)("div",{style:g.titleContainer,children:[(0,z.jsxs)(j().A,{style:g.title,children:[(0,z.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.userEngagement.title",defaultMessage:"User engagement"}),(0,z.jsx)(S().A,{placement:v().W.Bottom,render:e=>(0,z.jsx)(w().A,{...e,href:(0,f().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:g.helpInfo}),renderTooltip:()=>"all_time"!==n?(0,z.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:h().A.formatMessage(l().Yr[n])}}):(0,z.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})]}),(0,z.jsx)(k().Z,{currentFilter:n,onChangeFilter:o})]}),(0,z.jsxs)(C().xA,{gap:16,children:[(0,z.jsx)(C().LX,{row:1,col:1,children:(0,z.jsx)(T().a,{style:g.summaryCard,loading:a,error:s,title:(0,z.jsx)(d().sA,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:(0,z.jsx)(I()._,{abbreviateNumber:c<D,num:m})}}),byline:void 0!==p?(0,z.jsx)(_().Z,{userType:"members",daysFilter:n,count:m,previousCount:p}):null})}),(0,z.jsx)(C().LX,{row:1,col:2,children:(0,z.jsx)(T().a,{style:g.summaryCard,loading:a,error:s,title:(0,z.jsx)(d().sA,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:(0,z.jsx)(I()._,{abbreviateNumber:c<D,num:y})}}),byline:void 0!==b?(0,z.jsx)(_().Z,{userType:"guests",daysFilter:n,count:y,previousCount:b}):null})})]})]})}a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520);var N=()=>a(187174),R=()=>a(386164),B=()=>a(848538),L=()=>a(449506),E=()=>a(646736),O=()=>a(623742),U=()=>a(765957),F=()=>a(641300),H=()=>a(882690);const V=(0,d().YK)({page_views:{id:"workspaceAnalytics.usersTab.usersTable.pageViews.tooltip",defaultMessage:"Total number of page views for the user across all pages in the workspace"},page_edits:{id:"workspaceAnalytics.usersTab.usersTable.pageEdits.tooltip",defaultMessage:"Total number of page edits for the user across all pages in the workspace"}}),W=(0,d().YK)({user:{id:"spaceAnalyticsUsersTab.column.user",defaultMessage:"User"},page_views:{id:"spaceAnalyticsUsersTab.column.pageViews",defaultMessage:"Page views"},page_edits:{id:"spaceAnalyticsUsersTab.column.pageEdits",defaultMessage:"Page edits"},last_active:{id:"spaceAnalyticsUsersTab.column.lastActive",defaultMessage:"Last active"},teams:{id:"spaceAnalyticsUsersTab.column.teams",defaultMessage:"Teamspaces"}}),q={user:{id:"user",renderCell:function(e){const{userStore:t,role:n}=e,o=(0,r().IS)((e=>({container:{height:52}})),[]);(0,s.useEffect)((()=>{t.load()}),[t]);return(0,i().K8)((()=>t.isReady()),[t])?(0,z.jsx)(O().A,{containerStyle:o.container,actorStore:t,spaceRole:n&&(0,O().v)(n)}):(0,z.jsx)(a(236527).a,{})},headerTitle:h().A.formatMessage(W.user),widthData:{width:100},sortable:!1},page_views:{id:"page_views",renderCell:function(e){const{page_views:t}=e,s=(0,r().IS)((e=>({eyeHideIcon:{width:20,height:20,color:e.icon.tertiary}})),[]);if(void 0===t)return(0,z.jsx)(S().A,{placement:v().W.Bottom,render:e=>(0,z.jsx)("div",{...e,children:(0,a(207583).F)(s.eyeHideIcon)}),renderTooltip:e=>(0,z.jsx)(d().sA,{id:"spaceAnalyticsUsersTab.optedOutUser.icon.tooltip",defaultMessage:"User has disabled page view tracking"})});return(0,z.jsx)(j().A,{children:t})},headerTitle:(0,z.jsx)(H().Z,{tooltipMessageDescriptor:V.page_views,columnHeader:W.page_views}),widthData:{width:80},sortable:!0},page_edits:{id:"page_edits",renderCell:function(e){const{page_edits:t}=e;return(0,z.jsx)(j().A,{children:t})},headerTitle:(0,z.jsx)(H().Z,{tooltipMessageDescriptor:V.page_edits,columnHeader:W.page_edits}),widthData:{width:80},sortable:!0},last_active:{id:"last_active",renderCell:function(e){const t=e.last_active;let s;s=t?(0,z.jsx)(a(625383).d,{dateTs:t}):(0,z.jsx)(j().A,{isSecondaryColor:!0,children:(0,z.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.userTable.lastActiveTimestamp.noLastActive",defaultMessage:"No activity"})});return(0,z.jsx)("div",{children:s})},headerTitle:h().A.formatMessage(W.last_active),widthData:{width:50},sortable:!0},teams:{id:"teams",renderCell:function(e){const{teamStores:t,userStore:s,role:n,userPermissionGroupIds:o}=e;if(!n)return(0,z.jsx)(j().A,{children:(0,z.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.teamsColumn.guest",defaultMessage:"None"})});return(0,z.jsx)(a(37625).Ay,{teamStores:t,memberId:s.id,userPermissionGroupIds:o})},headerTitle:h().A.formatMessage(W.teams),widthData:{width:50},sortable:!1}};const G=(0,a(534177).uv)(q).map((e=>q[e])),K=25;function Y(e){const t=(0,o().v3)(),[a,n]=(0,s.useState)(K),{teamStores:u,usersAndStats:m,filter:p,onUserTabFilterChange:h,usersAndStatsError:f}=e,{userRoles:x,spaceId:v}=(0,i().K8)((()=>{const{currentSpaceStore:e}=U().default.state,t=m.map((e=>e.userStore.id)),a=null==e?void 0:e.id,s={};for(const n of t){const t=(0,E().sE)(e,n),a=null==t?void 0:t.getMembershipType();if(a&&"none"!==a&&"page_guest"!==a){const e=(0,B().C4)(a);s[n]=e}}return{userRoles:s,spaceId:a}}),[m]),[{value:y}]=(0,N().Yb)((async()=>{if(void 0===v)return{};const e=await L().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:t,data:{spaceId:v,userIds:m.map((e=>e.userStore.id))},headers:(0,R().WS)({cellId:void 0,spaceId:v})});return"success"===e.type?e.data.userToGroupMap:{}}),[t,v,m],{debugName:"userToPermissionGroupIds",debounce:300,throttle:1e3}),[b,S]=(0,s.useState)({column:q.last_active,sortAscending:!1}),w=(0,s.useCallback)((e=>{g().Jv(t,{column:e.column.id,isAscending:e.sortAscending}),S(e)}),[S,t]),A=m.map((e=>{let{userStore:t,stats:a}=e;return{id:a.userId,userStore:t,teamStores:u,isClickable:!1,last_active:a.lastActive,page_views:a.numPageViews,page_edits:a.numPageEdits,role:x[a.userId],userPermissionGroupIds:new Set((null==y?void 0:y[a.userId])||[])}})).sort(function(e){switch(e.column.id){case"last_active":return(t,a)=>(0,l().mj)(t.last_active,a.last_active,e.sortAscending);case"page_views":return(t,a)=>(0,l().xV)(t.page_views,a.page_views,e.sortAscending);case"page_edits":return(t,a)=>e.sortAscending?t.page_edits-a.page_edits:a.page_edits-t.page_edits;default:return(e,t)=>0}}(b)),M=(0,s.useMemo)((()=>A.slice(0,a)),[A,a]),C=(0,r().IS)((e=>({error:{color:c().Ay.red},dateFilterPill:{display:"flex",marginTop:10,marginBottom:15,flexFlow:"row",alignItems:"center"},timeFilterDescription:{marginRight:5}})),[]);const I=(0,s.useCallback)((e=>{g().Jy(t,{daysFilter:e}),h({tableFilter:e})}),[t,h]),T=(0,r().IS)((e=>(0,F().rC)({columnRenderInfo:G,theme:e,containerMarginTop:0})),[]);return(0,z.jsxs)(z.Fragment,{children:[f&&(0,z.jsx)(j().A,{isMultiline:!1,style:C.error,children:f}),(0,z.jsxs)("div",{style:C.dateFilterPill,children:[(0,z.jsx)(j().A,{isSecondaryColor:!0,style:C.timeFilterDescription,children:(0,z.jsx)(d().sA,{id:"workspaceAnalytics.timeFilter.description",defaultMessage:"Views and edits from"})}),(0,z.jsx)(k().Z,{currentFilter:p,onChangeFilter:I})]}),(0,z.jsx)(F().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,setStickyHeaderRow:!0,maxHeight:500,sortState:b,onSortStateChanged:w,columnRenderInfo:G,rows:M,renderNoRowsComponent:()=>(0,z.jsx)("div",{children:"N/A"}),styles:T,loadMoreMethod:{type:"scroll",onLoadMore:function(){a<m.length&&n(a+K)}}})]})}function Q(e){var t,a;let{spaceStore:n,teamStores:c,usersTabData:p,onUserTabFilterChange:b,userEngagement:C}=e;const[I,T]=(0,x().z)(),k=(0,r().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:16},sectionTitle:{fontWeight:u().Wy.medium,fontSize:16},sectionTitleLeft:{marginBlock:"8px 4px",marginBottom:5,display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},tableHeader:{marginTop:20,flexDirection:"row",display:"flex",justifyContent:"space-between",alignItems:"end"}})),[]),_=(0,o().v3)(),D=(0,d().tz)(),N=(0,s.useCallback)((e=>{g().wy(_,{daysFilter:e});b({graphFilter:"all_time"===e?"last_90_days":e}),C.setDaysFilter(e)}),[b,C,_]),R=(0,i().K8)((()=>n.getName()),[n]);if("NotFoundError"===(null==p||null===(t=p.usersAndStatsError)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(a=C.error)||void 0===a?void 0:a.name))return(0,z.jsx)(M().H,{type:"empty",spaceName:R});const B=Math.floor(T-8);return(0,z.jsxs)("div",{style:k.container,children:[(0,z.jsx)(P,{data:C.data,loading:C.loading,error:C.error,daysFilter:C.daysFilter,setDaysFilter:N}),(0,z.jsx)($,{usersTabData:p,daysFilter:C.daysFilter,intl:D,containerRef:I,widthOfGraph:B}),(0,z.jsxs)("div",{style:k.tableHeader,children:[(0,z.jsxs)("div",{style:k.sectionTitleLeft,children:[(0,z.jsx)(j().A,{style:k.sectionTitle,children:(0,z.jsx)(d().sA,{id:"settings.workspaceAnalytics.usersTab.allUsers.title",defaultMessage:"All members in Notion"})}),(0,z.jsx)(S().A,{placement:v().W.Bottom,render:e=>(0,z.jsx)(w().A,{...e,href:(0,f().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:k.helpInfo}),renderTooltip:()=>p&&"all_time"!==p.tableFilter?(0,z.jsx)(d().sA,{id:"settings.workspaceAnalytics.allMembers.tooltip.lastDays",defaultMessage:"Per member workspace activity over the {dateRange}",values:{dateRange:h().A.formatMessage(l().Yr[p.tableFilter])}}):(0,z.jsx)(d().sA,{id:"settings.workspaceAnalytics.allMembers.tooltip.allTime",defaultMessage:"All time per member workspace activity"})})]}),p?(0,z.jsx)(A().L,{analyticsType:y().e.Users,filters:{daysFilter:p.tableFilter}}):null]}),p?(0,z.jsx)(Y,{teamStores:c,filter:p.tableFilter,usersAndStats:p.usersAndStats,onUserTabFilterChange:b,usersAndStatsError:p.usersAndStatsError&&m().fP(p.usersAndStatsError,D)}):null]})}function $(e){let{usersTabData:t,daysFilter:a,containerRef:s,widthOfGraph:n,intl:o,displayBoxStyle:i,graphTitleStyle:r}=e;return(0,z.jsx)(X,{style:i,children:(0,z.jsx)("div",{ref:s,children:t?(0,z.jsx)(Z,{width:n,dailyUsersData:t.dailyUsersData,userEngagementDaysFilter:a,daysFilter:t.graphFilter,dailyUsersError:t.dailyUsersError&&m().fP(t.dailyUsersError,o),graphTitleStyle:r}):(0,z.jsx)(J,{})})})}function X(e){const t=(0,r().IS)((t=>({border:{borderRadius:4,overflow:"hidden",border:`1px solid ${t.regularDividerColor}`,backgroundColor:t.contentBackground,color:t.text.primary,padding:20,...e.style}})),[e.style]);return(0,z.jsx)("div",{style:t.border,children:e.children})}function Z(e){const{width:t,dailyUsersData:a,userEngagementDaysFilter:s,daysFilter:o,dailyUsersError:g}=e,m=(0,r().IS)((t=>({graphHeader:{marginBottom:10,display:"flex",justifyContent:"space-between"},graphTitle:{fontSize:u().J.UIRegular.desktop,fontWeight:"bolder",display:"flex",alignItems:"center",height:24,...e.graphTitleStyle},helpInfo:{marginLeft:4},emptyGraphBody:{textAlign:"center",paddingTop:50,paddingBottom:50},error:{color:c().Ay.red},graphSubLabel:{paddingTop:4,color:"grey"}})),[e.graphTitleStyle]),{blueLayer:x}=(0,n().useTimeSeriesPalette)(),y=(0,i().K8)((()=>{if(0===a.length)return;return{startDate:a[0].ds,endDate:a[a.length-1].ds}}),[a]),b=(0,i().K8)((()=>a.map((e=>({ds:e.ds,values:{active_members:e.active_members||0}})))),[a]);let A;return A=!y||a.length<3?(0,z.jsx)("div",{style:m.emptyGraphBody,children:(0,z.jsx)(j().A,{isSecondaryColor:!0,children:(0,z.jsx)(d().sA,{id:"workspaceAnalytics.usersOverTime.emptyGraph",defaultMessage:"Not enough data to display graph"})})}):(0,z.jsx)(p().b,{startDate:y.startDate,endDate:y.endDate,width:t,data:b,height:300,layers:[{key:"active_members",...x,renderLabel:e=>(0,z.jsx)(d().sA,{id:"workspaceAnalytics.usersOverTime.activeMembers",defaultMessage:"{activeMembers, plural, one {1 active member} other {{activeMembers} active members}}",values:{activeMembers:e}})}],renderTooltipSubLabel:()=>(0,z.jsx)("div",{style:m.graphSubLabel,children:(0,z.jsx)(d().sA,{id:"workspaceAnalytics.usersOverTime.activeMembers.sublabel",defaultMessage:"Viewed a page in the {dateRange}",values:{dateRange:h().A.formatMessage(l().Yr[o])}})})}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{style:m.graphHeader,children:(0,z.jsxs)(j().A,{style:m.graphTitle,children:[(0,z.jsx)(d().sA,{id:"workspaceAnalytics.membersOverTime.title",defaultMessage:"Active members over time"}),"all_time"===s&&(0,z.jsx)(S().A,{placement:v().W.Bottom,render:e=>(0,z.jsx)(w().A,{...e,href:(0,f().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:m.helpInfo}),renderTooltip:()=>(0,z.jsx)(d().sA,{id:"settings.workspaceAnalytics.membersOverTime.allTimeTooltip",defaultMessage:"All Time selection shows members who have viewed a page in the last 90 days."})})]})}),g&&(0,z.jsx)(j().A,{isMultiline:!1,style:m.error,children:g}),A]})}function J(){return(0,z.jsxs)("div",{children:[(0,z.jsx)(b().A,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]}),(0,z.jsx)(b().A,{paragraphs:[{lineHeight:300,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:12}]})]})}},259476:(e,t,a)=>{a.r(t),a.d(t,{iconDefinition:()=>n,trashSmallIcon:()=>o});a(296540);var s=a(474848);const n={viewBox:"0 0 16 16",fittedViewBox:"2.5 2.12 11 11.75",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M6.688 6.3a.575.575 0 0 0-.575.575v4.5a.575.575 0 0 0 1.15 0v-4.5a.575.575 0 0 0-.575-.575m2.625 0a.575.575 0 0 0-.575.575v4.5a.575.575 0 0 0 1.15 0v-4.5a.575.575 0 0 0-.575-.575"}),(0,s.jsx)("path",{d:"M6.625 2.125a1.5 1.5 0 0 0-1.5 1.5v.75h-2a.625.625 0 0 0 0 1.25h.528l.29 6.4c.048 1.035.9 1.85 1.936 1.85h4.242a1.94 1.94 0 0 0 1.935-1.85l.291-6.4h.528a.625.625 0 1 0 0-1.25h-2v-.75a1.5 1.5 0 0 0-1.5-1.5zm-.25 1.5a.25.25 0 0 1 .25-.25h2.75a.25.25 0 0 1 .25.25v.75h-3.25zm-1.183 8.344-.288-6.344h6.192l-.288 6.344a.687.687 0 0 1-.687.656H5.879a.687.687 0 0 1-.687-.656"})]})},o=(0,a(340498).wt)("trashSmall",n)},263868:(e,t,a)=>{a.d(t,{O:()=>u,y:()=>c});a(296540);var s=()=>a(484714),n=()=>a(56366),o=()=>a(959013),i=()=>a(751156),r=()=>a(709062),l=()=>a(702723),d=a(474848);const c=(0,o().YK)({title:{id:"spacePermissionsSettings.people.peopleHoverCard.title",defaultMessage:"Hover cards"},byline:{id:"spacePermissionsSettings.people.peopleHoverCard.byline",defaultMessage:"Show information on hover over name"}});function u(e){let{spaceStore:t,isLocked:a,isMobile:u}=e;const g=(0,s().v3)(),m=(0,n().K8)((()=>Boolean(t.getSetting("disable_people_hover_card"))),[t]);return(0,d.jsx)(l().A,{isMobile:u,title:(0,d.jsx)(o().sA,{...c.title}),caption:(0,d.jsx)(o().sA,{...c.byline}),type:"toggle",isOn:!m,onToggle:()=>{a||function(e){let{environment:t,spaceStore:a,newValue:s}=e;i().createAndCommit({userAction:"SpacePermissionsSettings.DisablePeopleHoverCardSetting",environment:t,canUndo:!0,perform:e=>{i().applyOperation({store:a,operation:{pointer:a.pointer,path:["settings","disable_people_hover_card"],command:"set",args:s},transaction:e})}})}({environment:g,spaceStore:t,newValue:!m})},isLocked:a,lockedTooltip:a?(0,r().C_)():void 0})}},263919:(e,t,a)=>{a.d(t,{A:()=>w});a(944114),a(898992),a(354520),a(672577),a(581454);var s=a(296540),n=()=>a(56366),o=()=>a(842599),i=()=>a(733816),r=()=>a(792071),l=()=>a(798880),d=()=>a(959013),c=()=>a(284371),u=()=>a(743260),g=()=>a(299545),m=()=>a(962730),p=()=>a(630116),h=()=>a(760217),f=()=>a(939740),x=()=>a(64e3),v=()=>a(8980),y=()=>a(267155),b=a(474848);const S=(0,d().YK)({invited_page:{id:"PermissionsInviteSearchRequest.userTooltip.invited_page",defaultMessage:"{userNameAndEmail} is invited to this page already"},invited_database:{id:"PermissionsInviteSearchRequest.userTooltip.invite_database",defaultMessage:"{userNameAndEmail} is invited to this database already"},invited_space:{id:"PermissionsInviteSearchRequest.userTooltip.invited_space",defaultMessage:"{userNameAndEmail} is invited to this workspace already"},invited_team:{id:"PermissionsInviteSearchRequest.userTooltip.invited_team",defaultMessage:"{userNameAndEmail} is invited to this teamspace already"},not_in_space:{id:"PermissionsInviteSearchRequest.userTooltip.admin",defaultMessage:"Click to invite {userNameAndEmail}"}});function j(e,t){return e.filter(((e,a)=>a<t))}const w=function(e){const{store:t,shouldShowGroups:w,sectionRenderLimit:A,membersOnly:M,hideCurrentUser:C,hideUserTypeToken:I,disableInvitedUsers:T,guestsMustBeRequested:k,hideTitle:_,defaultUserTitle:z,performSearchRequest:D}=e,[P,N,R]=(0,n().$y)(e.permissionsInviteStore),B=(0,a(484714).v3)(),{device:L}=B,E=(0,d().tz)(),{tokenQuery:O}=P,U=(0,s.useMemo)((()=>u()._c({environment:{device:L}})),[L]),F=(0,a(401497).IS)((e=>({roleBadge:{...U},invitedBadge:{...U,backgroundColor:e.defaultBadgeBackground}})),[U]),H="invitee",V=(0,n().K8)((()=>{const e=a(21735).A.state.shouldUseEdgeCache,t=a(217429).default.checkGate({gateName:"edge_cache_settings"});return e&&t}),[]),W={request:O,performRequest:e=>D?D({query:e,limit:10,environment:B}):a(542056).hQ({query:e,sectionLimit:{userLimit:10,groupLimit:w?10:0,importContactLimit:0},membersOnly:M,environment:B,intl:E,shouldUseEdgeCacheRollout:V}),render:(e,s,n)=>{if(e)return(0,b.jsx)(y().z,{loading:!n,hideTitle:_,children:(0,b.jsx)(x().A,{title:(0,b.jsx)(d().sA,{id:"inviteUserModal.searchInput.errorMessage",defaultMessage:"Something went wrong"})})});const M=s&&{...s,inviteUsers:s.inviteUsers.filter((e=>!(0,u().mQ)({permissionsInviteStore:R,target:e})&&(!C||e.value.id!==B.currentUser.id))),importedContacts:(0,u().GZ)(s.inviteUsers,s.importedContacts)},D=M&&(null==O?void 0:O.length)>0,{inviteUsers:N,inviteGroups:L,importedContacts:U=[]}=D?M:(0,u().Es)({currentInviteActors:M,permissionsInviteStore:R,targetStore:t}),V=[...j(N,A),...j(U,10)].map(((e,s)=>{const n="newUser"===e.type?e.value.email:e.value.id,o=(0,u().$D)(e),c=Boolean(D&&(0,u().VF)({permissionsInviteStore:R,userTarget:e,targetStore:t}));return{key:n,render:s=>{const{tooltip:n,userTypeToken:f}=function(e){const{userTarget:t,targetStore:a,isInvited:s,userSpaceRole:n,styles:o,intl:i}=e,c="newUser"===t.type?null:r().Bj6.fromValue(l().oo,t.value).getDisplayName(i),m=t.value.email,h=c&&c!==m?`${c} (${m})`:m,f=n&&"not_in_space"!==n;if(s)return{tooltip:(0,g().Yu)(a)?i.formatMessage(S.invited_space,{userNameAndEmail:h}):a instanceof p().Bv?i.formatMessage(S.invited_page,{userNameAndEmail:h}):a instanceof p().md?i.formatMessage(S.invited_database,{userNameAndEmail:h}):i.formatMessage(S.invited_team,{userNameAndEmail:h}),userTypeToken:(0,b.jsx)("div",{style:{...o.invitedBadge},children:(0,b.jsx)(d().sA,{id:"inviteUserModal.userRole.invitedBadge.label",defaultMessage:"Invited"})})};if(f){const e=u().S6({role:n,intl:i,nameOrEmail:h});return{tooltip:e.tooltip,userTypeToken:(0,b.jsx)("div",{style:{...o.roleBadge},children:e.userRoleBadge})}}return{tooltip:i.formatMessage(S.not_in_space,{userNameAndEmail:h}),userTypeToken:void 0}}({userTarget:e,targetStore:t,userSpaceRole:o,isInvited:c,styles:F,intl:E});return"existingUser"===e.type?(0,b.jsx)(a(457688).A,{...s,actor:(0,a(764880).A7)(e.value),right:I?void 0:f,tooltip:n,tooltipPlacement:m().W.Left,disabled:T&&c,defaultUserTitle:z}):(0,b.jsx)(a(859428).A,{placement:m().W.Left,alignment:m().C.Start,textWrap:!0,render:t=>(0,b.jsx)(h().A,{...s,...t,icon:(0,b.jsx)(v().I,{icon:i().o}),right:f,title:e.value.email.trim(),disabled:T&&c}),disableTooltip:!n,renderTooltip:()=>n})},action:()=>{if(T&&c)return;const t={...e,..."existingUser"===e.type&&{spaceRole:o}};a(134696).kH(B,{subscription_tier:(0,a(10984).AI)(),invite_token_query:O,selected_user_token:e,selected_user_token_rank:s,from:"permission_invite"}),R.setState({...P,inviteTargets:[...P.inviteTargets,t],tokenQuery:"",inputFocus:H})}}})),W=j(L,A).map((e=>{const{value:t}=e;return{key:t.id,render:e=>(0,b.jsx)(a(862139)._,{group:t,menuListItemProps:e}),action:()=>{R.setState({...P,inviteTargets:[...P.inviteTargets,e],tokenQuery:"",inputFocus:H})}}})),q=[];if(V.length>0&&q.push({key:"user results",render:e=>(0,b.jsx)(y().z,{...e,loading:!n,hideTitle:_}),items:V}),w&&W.length>0&&q.push({key:"group results",render:e=>(0,b.jsx)(a(89924).A,{...e,title:(0,b.jsx)(d().sA,{id:"inviteUserModal.searchDropdown.selectGroupTitle",defaultMessage:"Select a group"}),loading:!n}),items:W}),0===q.length){const e=(0,o().qh)(P.tokenQuery);if((0,o().DT)(e)){const o={type:"newUser",value:{email:e},source:"email"},i=(0,u().mQ)({target:o,permissionsInviteStore:R});if(!i)return;if(i)return(0,b.jsx)(y().z,{loading:!n,hideTitle:_,children:(0,b.jsx)(x().A,{title:(0,b.jsx)(d().sA,{id:"inviteUserModal.userAlreadyInvitedMessage",defaultMessage:"Already inviting {user}.",values:{user:(0,b.jsx)("span",{style:{fontWeight:c().Wy.bold},children:(0,u().Sk)({intl:E,target:i})})}})})});const r=(s&&s.inviteUsers||[]).find((t=>"existingUser"===t.type&&t.value.email===e));if(r&&"existingUser"===r.type&&(0,u().wF)({store:t,target:r}))return(0,b.jsx)(y().z,{loading:!n,hideTitle:_,children:(0,b.jsx)(x().A,{title:(0,b.jsx)(d().sA,{id:"inviteUserModal.userAlreadyHasPermissionMessage",defaultMessage:"{user} already has permission.",values:{user:(0,b.jsx)("span",{style:{fontWeight:c().Wy.bold},children:(0,a(695608).c6)(E,r.value)})}})})})}else{if(!P.tokenQuery)return null;q.push({key:"user results",render:e=>(0,b.jsx)(y().z,{...e,loading:!n,hideTitle:_,title:k?(0,b.jsx)(d().sA,{id:"inviteUserModal.searchDropdown.requestPeople",defaultMessage:"Keep typing to request inviting an email"}):(0,b.jsx)(d().sA,{id:"inviteUserModal.searchDropdown.addPeople",defaultMessage:"Keep typing to invite email"})}),items:[{key:P.tokenQuery,render:e=>(0,b.jsx)(h().A,{icon:(0,b.jsx)(v().I,{icon:i().o}),title:P.tokenQuery,...e}),action:()=>{}}]})}}return(0,b.jsx)(f().Ay,{type:f().Oh.Vertical,initialFocus:O.length>0?0:void 0,sections:q})}};return(0,b.jsx)(a(251126).A,{...W})}},267155:(e,t,a)=>{a.d(t,{z:()=>r});a(296540);var s=()=>a(401497),n=()=>a(959013),o=()=>a(89924),i=a(474848);function r(e){const t=(0,s().IS)((()=>({container:{paddingBlock:4}})),[]);return(0,i.jsx)(o().A,{title:e.hideTitle?void 0:(0,i.jsx)(n().sA,{id:"inviteUserModal.searchDropdown.selectPersonTitle",defaultMessage:"Select a person"}),style:t.container,...e})}},284230:(e,t,a)=>{a.d(t,{A:()=>D});a(944114),a(898992),a(823215),a(354520),a(581454),a(908872);var s=a(296540),n=()=>a(484714),o=()=>a(56366),i=()=>a(401497),r=()=>a(784892),l=()=>a(468006),d=()=>a(959013),c=()=>a(778078),u=()=>a(496603);function g(e,t){return{state:t,store:e}}class m extends(()=>a(757695))().Store{getInitialState(){return{showAutoCompletePopup:!1,defaultTeams:{}}}addedAndCurrentTeams(){return Object.values(this.state.defaultTeams).filter((e=>{let{state:t}=e;return"current-default"===t||"add-default"===t}))}addedTeams(){return Object.values(this.state.defaultTeams).filter((e=>{let{state:t}=e;return"add-default"===t}))}removedTeams(){return Object.values(this.state.defaultTeams).filter((e=>{let{state:t}=e;return"remove-default"===t}))}}const p=new m;function h(e){var t;let{teamStore:a}=e;return null===(t=p.state.defaultTeams[a.id])||void 0===t?void 0:t.state}function f(e,t){const a=p.state,s={...a.defaultTeams};t?s[e.id]=g(e,t):delete s[e.id],p.setState({...a,defaultTeams:s})}var x=()=>a(928600),v=()=>a(939740),y=()=>a(897119),b=()=>a(204063),S=()=>a(89924),j=()=>a(859428),w=()=>a(626822),A=()=>a(881690),M=()=>a(856952),C=()=>a(722872),I=()=>a(115512),T=()=>a(962730),k=()=>a(377586),_=()=>a(898808),z=a(474848);function D(e){let{immediateUpdate:t,onUpdate:a,tokenStyle:r,headerStyle:m,unarchivedTeams:A,description:I,isOrgOwner:_}=e;const D=(0,n().Y0)(),L=(0,d().tz)(),E=(0,n().v3)(),[O,U]=(0,s.useState)(!1),F=(0,o().uB)(p),[H,V]=(0,s.useState)(""),{addedTeams:W,removedTeams:q,addedAndCurrentTeams:G}=(0,o().K8)((()=>({addedAndCurrentTeams:F.addedAndCurrentTeams(),addedTeams:F.addedTeams(),removedTeams:F.removedTeams()})),[F]),K=(0,o().K8)((()=>A.reduce(((e,t)=>(e[t.id]=t.getName(),e)),{})),[A]),Y=(0,o().K8)((()=>A.filter((e=>e.isDefault()))),[A]);(0,s.useEffect)((()=>function(e){const t=p.state,a=e.reduce(((e,t)=>(e[t.id]=g(t,"current-default"),e)),{});p.setState({...t,defaultTeams:a})}(Y)),[Y]);let Q=null;0===A.length?Q=(0,z.jsx)(d().sA,{id:"teamsWorkspaceSettings.defaultTeams.updateButton.noUnarchivedTeamsExist",defaultMessage:"Create your first teamspace to set a default"}):0===W.length&&0===q.length?Q=(0,z.jsx)(d().sA,{id:"teamsWorkspaceSettings.defaultTeams.updateButton.noChangesToExistingDefaultTeams",defaultMessage:"Current selection already matches existing default teams"}):0===G.length&&(Q=(0,z.jsx)(d().sA,{id:"teamsWorkspaceSettings.defaultTeams.updateButton.atLeastOneDefaultTeamMustBeSelected",defaultMessage:"At least one default team must be selected"}));const $=e=>{U(!0),a({addedTeams:e.addedTeams,removedTeams:e.removedTeams}),U(!1)},X=e=>{!function(e){let{teamStore:t}=e;f(t,"add-default"===h({teamStore:t})?null:"remove-default")}({teamStore:e}),t&&$({addedTeams:[],removedTeams:[g(e,"remove-default")]})},Z=e=>{!function(e){let{teamStore:t}=e;f(t,"remove-default"===h({teamStore:t})?"current-default":"add-default")}({teamStore:e}),F.update((e=>({...e,showAutoCompletePopup:!1}))),t&&$({addedTeams:[g(e,"add-default")],removedTeams:[]}),V("")},J=E.currentUser.id,ee=(0,o().K8)((()=>J?A.filter((e=>{const t=e.getSettingsStore().getValue();return!!t&&((_||e.isOwner(J))&&"open"===(0,l().MA)(t)&&G.every((t=>t.store.id!==e.id)))})):[]),[J,A,_,G]),te=(0,c().Ay)(H,ee,(e=>K[e.id]??"")),ae=[];te.length>0&&H.length>0&&ae.push({key:"default-teams-list",render:e=>(0,z.jsx)(S().A,{...e,title:(0,z.jsx)(d().sA,{id:"defaultTeamsInput.defaultTeamList.title",defaultMessage:"Teamspaces"}),loading:!1}),items:te.map((e=>({key:e.id,render:t=>(0,z.jsx)(w().A,{...t,teamStore:e}),action:()=>Z(e)})))});const se=(0,o().K8)((()=>F.state.showAutoCompletePopup&&ae.length>0),[F,ae.length]),ne=(0,i().IS)((e=>({defaultTeamsHeader:{fontSize:14,marginBottom:2,...m},inputAndButtonContainer:{paddingTop:12,display:"flex"},inputContainer:{flexGrow:1},tokenInputMenu:{borderRadius:se?R:N,margin:0},menuList:{maxHeight:300,border:`1px solid ${e.regularDividerColor}`,borderTop:0,borderRadius:B},updateButton:{marginLeft:10,height:35}})),[se,m]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{style:ne.defaultTeamsHeader,children:(0,z.jsx)(d().sA,{id:"teamsWorkspaceSettings.defaultTeams.title",defaultMessage:"Default teamspaces"})}),I,(0,z.jsxs)("div",{style:ne.inputAndButtonContainer,children:[(0,z.jsx)("div",{style:ne.inputContainer,children:(0,z.jsx)(y().Ay,{popupType:k().n.Popup,placementToOrigin:T().W.Bottom,sameWidthAsOrigin:!0,open:se,borderRadius:B,onDismiss:()=>F.update((e=>({...e,showAutoCompletePopup:!1}))),origin:(0,z.jsx)(M().Ay,{disabled:O||0===A.length,style:ne.tokenInputMenu,focusInitial:D.isMobile,focusAfterAnimation:!0,format:M().le.Share,inputDivStyle:{alignItems:"center"},value:H,onChange:e=>{F.update((e=>({...e,showAutoCompletePopup:!0}))),V(e.target.value)},type:"default-teams",tokens:G.map((e=>(0,z.jsx)(P,{teamStore:e.store,onClickRemove:X,style:r,hideRemoveButton:1===G.length},e.store.id))),placeholder:L.formatMessage({id:"teamsWorkspaceSettings.defaultTeams.inputPlaceholder",defaultMessage:"Select a default teamspace..."}),onRemoveLastToken:()=>{const e=G,t=u().HV(e);t&&X(t.store)},onEmptySubmit:u().D_,showBorder:!0}),render:()=>(0,z.jsx)(x().A,{menuType:C().gu.Popup,tokenInputHeader:!0,disableHeaderBorder:!0,children:(0,z.jsx)("div",{style:ne.menuList,children:(0,z.jsx)(v().Ay,{type:v().Oh.Vertical,initialFocus:0,sections:ae})})}),trapFocus:!1})}),!t&&(0,z.jsx)(j().A,{placement:T().W.Top,alignment:T().C.Center,disableTooltip:null===Q,renderTooltip:()=>Q,style:{width:180},textWrap:!0,render:e=>(0,z.jsx)(b().A,{...e,style:ne.updateButton,disabled:null!==Q||O,size:"lg",onClick:()=>$({addedTeams:W,removedTeams:q}),children:(0,z.jsx)(d().sA,{id:"teamsWorkspaceSettings.updateButton.label.2",defaultMessage:"Update"})})})]})]})}function P(e){const t=(0,n().Y0)(),{teamStore:a,onClickRemove:s,style:i,hideRemoveButton:l}=e,{name:d}=(0,o().K8)((()=>({name:a.getName()})),[a]);return(0,z.jsx)(A().A,{showRemoveButton:!l,isSingle:!1,format:t.isMobile?r().NY.Large:r().NY.Medium,style:{marginLeft:6,...i},onClickRemove:()=>s(a),value:(0,z.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,z.jsx)(_().x,{disabled:!0,store:a,size:14,style:{marginRight:4}}),d]})})}const N=3,R=(0,I().Nb)({topLeft:N,topRight:N,bottomLeft:0,bottomRight:0}),B=(0,I().Nb)({topLeft:0,topRight:0,bottomLeft:N,bottomRight:N})},284331:(e,t,a)=>{a.d(t,{m:()=>_,A:()=>z});a(898992),a(354520),a(581454),a(737550);var s=a(296540),n=()=>a(484714),o=()=>a(56366),i=()=>a(401497),r=()=>a(657222),l=()=>a(959013),d=()=>a(284371),c=()=>a(946141),u=()=>a(884107),g=()=>a(542056),m=()=>a(436572),p=()=>a(493823),h=()=>a(331542),f=()=>a(864943),x=()=>a(204063),v=()=>a(859428),y=()=>a(125565),b=()=>a(645873);const S=new(b().O2)("teamPermissionsInvite",(async()=>await Promise.all([a.e(75134),a.e(9304),a.e(16471),a.e(58550),a.e(44711),a.e(53321),a.e(90825),a.e(96346),a.e(55373),a.e(37353),a.e(29151),a.e(78191),a.e(62475),a.e(3151),a.e(98629),a.e(49889),a.e(97727),a.e(22900),a.e(85128),a.e(95555),a.e(14659),a.e(92845),a.e(84468),a.e(5605),a.e(48486),a.e(95794),a.e(13677),a.e(56952),a.e(48632),a.e(74562),a.e(27711),a.e(4422),a.e(11341),a.e(46414),a.e(95168),a.e(28271),a.e(34877),a.e(36908),a.e(17254),a.e(84185),a.e(32421),a.e(15315),a.e(24587),a.e(78708),a.e(43777),a.e(74752),a.e(91194),a.e(81197),a.e(98659),a.e(20502),a.e(6266),a.e(8184),a.e(83884),a.e(65881),a.e(99809),a.e(93282),a.e(43678),a.e(15019),a.e(90978),a.e(3910),a.e(77213),a.e(6912),a.e(21194),a.e(30291),a.e(39541),a.e(12913),a.e(45620),a.e(54220),a.e(19930),a.e(81768),a.e(58102),a.e(52836),a.e(26483),a.e(19687),a.e(6463),a.e(68137),a.e(50569),a.e(40925),a.e(24975),a.e(282),a.e(87250),a.e(93847),a.e(79928),a.e(7203),a.e(61349),a.e(55197),a.e(94256),a.e(76690),a.e(29669),a.e(24930),a.e(62573),a.e(33882),a.e(44763),a.e(1440),a.e(5044),a.e(31782),a.e(93449),a.e(63996),a.e(895),a.e(66559),a.e(35986),a.e(45683),a.e(78862),a.e(38536),a.e(92924),a.e(64819),a.e(67378),a.e(40186),a.e(97339),a.e(55717),a.e(63797),a.e(56352),a.e(52811),a.e(28398),a.e(21367),a.e(65351),a.e(22686),a.e(4112),a.e(31889),a.e(36009),a.e(81973),a.e(2600),a.e(77663),a.e(97832),a.e(75681)]).then(a.bind(a,500844)))),j=(0,b()._h)(S,(e=>e.TeamPermissionsInvite));var w=()=>a(47373),A=()=>a(743260),M=()=>a(37433),C=a(474848);const I={button:{height:32},multiButtonContainer:{width:"100%",paddingTop:12,display:"flex",justifyContent:"space-between"},singleButtonContainer:{width:"100%",paddingTop:12,display:"flex",justifyContent:"right"},containerLeftAligned:{display:"flex",alignItems:"left",justifyContent:"left",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none",width:"100%"},titleAndIcon:{paddingBottom:18,alignItems:"center",display:"flex"},addMembersTo:{minWidth:"25%"},icon:{paddingRight:3,paddingLeft:3},teamName:{paddingRight:10,fontWeight:d().Wy.medium,...d().RC,maxWidth:250},full:{width:"100%"},inviteInput:{zIndex:1},submitTooltip:{minWidth:250},subtitle:{paddingTop:16,position:"relative",zIndex:-1}};function T(e){var t;let{isLoading:a,isNewlyCreatedTeam:s,onDismiss:n,onSubmit:i,inviteTargets:r,inviteRole:d,canEditSpaceMembership:c,membershipRequestsDisabled:u,spaceAllowedDomains:g,hasTeamGuestsMatchAllowedDomain:m}=e;const p=r.length>0,y=r.filter((e=>(0,A().yi)(e))).length>0&&u&&!c,b=(0,o().K8)((()=>(0,w().Qd)()&&"team_level_guest"===d&&r.some((e=>"group"===e.type||"existingUser"===e.type&&"none"!==e.spaceRole&&"not_in_space"!==e.spaceRole))),[d,r]),S=b||y||m;if(a)return(0,C.jsx)(x().A,{style:{...I.button,minWidth:80},disabled:!0,children:(0,C.jsx)(h().A,{onDarkBackground:!0})});if(s&&!p)return(0,C.jsx)(f().A,{size:"lg",style:I.button,onClick:n,disabled:a,children:(0,C.jsx)(l().sA,{id:"teamPermissionsInviteOverlay.inviteModal.skipForNow",defaultMessage:"Skip for now"})});const j=b?(0,C.jsx)(l().sA,{id:"teamPermissionsInviteOverlay.inviteModal.addNMembers.memberOrGroupInvitedAsTeamGuestTooltip",defaultMessage:"Cannot add space members or groups as teamspace guests. Remove them to continue."}):m?(0,C.jsx)(l().sA,{id:"teamPermissionsInviteOverlay.inviteModal.addNMembers.hasTeamGuestsMatchAllowedDomain",defaultMessage:"Cannot add users with {emailDomains} as teamspace guests. Remove them to continue.",values:{emailDomains:null==g||null===(t=g.map((e=>`@${e}`)))||void 0===t?void 0:t.join(", ")}}):null;return(0,C.jsx)(v().A,{textWrap:!0,style:I.submitTooltip,disableTooltip:!j,renderTooltip:()=>j,render:e=>(0,C.jsx)(x().A,{style:I.button,onClick:i,disabled:!p||a||S,...e,children:(0,C.jsx)(l().sA,{id:"teamPermissionsInviteOverlayV2.inviteButton.label",defaultMessage:"Invite"})})})}function k(e){let{inviteTargets:t,workspaceName:a,canEditSpaceMembership:s,membershipRequestsDisabled:n,isFreeTier:o,inviteRole:i,hasTeamGuestsMatchAllowedDomain:r}=e;if(void 0===s)return null;if(!t||0===t.length)return null;const d=t.map((e=>{if("group"!==e.type&&(0,A().yi)(e))return e.value.email})).filter((e=>e));if(!d||0===d.length)return null;const c=e=>(0,C.jsx)("b",{children:e}),u=a??"this workspace";return s?o?(0,C.jsx)(y().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===d.length?(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingularOwner.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a workspace owner.",values:{guestEmail:d[0],workspaceName:u,b:c}}):(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPluralOwners.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as workspace owners.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}})}):"team_level_guest"===i?r?null:(0,C.jsx)(y().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===d.length?(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingular.teamGuest.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a billed teamspace guest.",values:{guestEmail:d[0],workspaceName:u,b:c}}):(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPlural.teamGuest.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as billed teamspace guests.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}})}):(0,C.jsx)(y().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===d.length?(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingular.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a billed workspace member.",values:{guestEmail:d[0],workspaceName:u,b:c}}):(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPlural.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as billed workspace members.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}})}):n?(0,C.jsx)(y().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipDisabled.subtitle",defaultMessage:"You can't add workspace guests to a teamspace. Ask your admin to add them as workspace members first."})}):(0,C.jsx)(y().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===d.length?(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipSingular.subtitle",defaultMessage:"Request will be sent to your admin to add <b>{guestEmail}</b> as a member to {workspaceName}.",values:{guestEmail:d[0],workspaceName:u,b:c}}):(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipPlural.subtitle",defaultMessage:"Request will be sent to your admin to add <b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> as members to {workspaceName}.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}})})}function _(e){const{store:t,isSmall:a}=e,s=(0,n().v3)(),o=(0,i().IS)((e=>({button:{marginRight:5,marginLeft:5,height:32,fontSize:a?12:14},icon:{width:a?12:14,height:a?12:14}})),[a]);return(0,C.jsx)(p().p,{onClick:async()=>{const e=await u().R.clipboardActions.load();e.copyString({environment:s,stringValue:(0,M().TP)(t.id),copiedMessage:e.clipboardMessages.copiedLinkToClipboard}),c().lY(s,{store:t})},iconLeading:r().w,style:o.button,iconStyle:o.icon,isBlue:!0,children:a?(0,C.jsx)(l().sA,{id:"teamPermissionsInviteOverlay.copyLinkCondensedButton.label",defaultMessage:"Copy link"}):(0,C.jsx)(l().sA,{id:"teamPermissionsInviteOverlay.copyLinkButton.label",defaultMessage:"Copy invite link"})})}const z=function(e){let{store:t,permissionsInviteStore:i,isNewlyCreatedTeam:r,onSubmitSuccessful:d,onDismiss:c}=e;const u=(0,n().v3)(),{teamName:p,workspaceName:h,canEditSpaceMembership:f,membershipRequestsDisabled:x,spaceAllowedDomains:v}=(0,o().K8)((()=>{const{currentSpaceStore:e}=a(765957).default.state;return{teamName:t.getName(),workspaceName:null==e?void 0:e.getName(),canEditSpaceMembership:null==e?void 0:e.canEditMembership(),membershipRequestsDisabled:null==e?void 0:e.getDisableMembershipRequests(),spaceAllowedDomains:null==e?void 0:e.getEmailDomains()}}),[t]);(0,s.useEffect)((()=>()=>{r&&a(848237).L0({environment:u,teamStore:t,shouldScroll:!0})}),[r,t,u]);const[y,b]=(0,s.useState)(!1),S=(0,o().K8)((()=>i.state.inviteTargets),[i]),z=(0,o().K8)((()=>i.state.inviteTargets.length),[i]),D=(0,o().K8)((()=>i.state.inviteRole),[i]),P=(0,o().K8)((()=>a(10984).dL()),[]),N=(0,o().K8)((()=>!(null==v||!v.length||"team_level_guest"!==D||!(0,w().Qd)())&&S.some((e=>"group"!==e.type&&(0,a(842599).Wy)(v,e.value.email)))),[v,D,S]),R=(0,o().K8)((()=>!P&&!(0,M().FQ)(t)),[t,P]),B=async()=>{if(b(!0),z>0){const e=i.state.inviteTargets,{success:a}=await g().l5({environment:u,store:t,permissionsInviteStore:i,inviteOrigin:"team_invite_overlay"});if(void 0!==f)if(a){const a=(0,A().c3)({inviteTargets:e,recordStore:t,canEditSpaceMembership:f});if(!a)return;setTimeout((()=>{m().D6({label:a})}))}else setTimeout((()=>{m().D6({label:(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlay.inviteMembersFailure.message",defaultMessage:"Failed to send invites"})})}))}g().Oo({permissionsInviteStore:i}),b(!1),null==d||d()};return(0,C.jsx)("div",{className:a(38337).jnS,style:{...I.full},children:(0,C.jsxs)("div",{style:I.containerLeftAligned,children:[(0,C.jsxs)("div",{style:I.titleAndIcon,children:[(0,C.jsx)("div",{style:I.addMembersTo,children:(0,C.jsx)(l().sA,{id:"TeamPermissionsInviteOverlayV2.membersTitle.label",defaultMessage:"Invite people to"})}),(0,C.jsx)("div",{style:I.icon,children:(0,C.jsx)(a(898808).x,{disabled:!0,store:t,size:20})}),(0,C.jsx)(a(265665).j,{style:I.teamName,children:p})]}),(0,C.jsxs)("div",{style:I.inviteInput,children:[(0,C.jsx)(j,{store:t,permissionsInviteStore:i,onEmptySubmit:B}),(0,C.jsx)("div",{style:I.subtitle,children:(0,C.jsx)(k,{inviteTargets:S,workspaceName:h,canEditSpaceMembership:f,membershipRequestsDisabled:x,isFreeTier:P,inviteRole:D,hasTeamGuestsMatchAllowedDomain:N})})]}),(0,C.jsx)("div",{style:R?I.multiButtonContainer:I.singleButtonContainer,children:(0,C.jsxs)("div",{style:R?I.multiButtonContainer:{},children:[R&&(0,C.jsx)(_,{store:t}),(0,C.jsx)(T,{isLoading:y,onSubmit:B,onDismiss:()=>{g().Oo({permissionsInviteStore:i}),null==c||c()},isNewlyCreatedTeam:r,inviteTargets:S,inviteRole:D,canEditSpaceMembership:f,membershipRequestsDisabled:x,spaceAllowedDomains:v,hasTeamGuestsMatchAllowedDomain:N})]})})]})})}},296746:(e,t,a)=>{a.d(t,{I:()=>p,f:()=>m});a(581454),a(296540);var s=()=>a(56366),n=()=>a(401497),o=()=>a(234748),i=()=>a(96689),r=()=>a(979340),l=()=>a(959013),d=()=>a(567865),c=()=>a(187820),u=()=>a(125565),g=a(474848);function m(e){let{selectedSpaceId:t,setSelectedSpaceId:a,spaceData:s}=e;const n=p(s,(0,l().tz)());return(0,g.jsx)(d().zr,{pillTitle:(0,g.jsx)(l().sA,{id:"managedUsersTab.table.filters.workspaces.title",defaultMessage:"Workspace"}),pillIcon:o().I,selectedItem:t,setSelectedItem:a,items:n})}function p(e,t,a){const o=function(e){return(0,n().IS)((t=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:8},optionTitle:{display:"block"},optionCaption:{display:"block",color:t.text.secondary,fontSize:12,lineHeight:"15px"},container:{padding:e?"8px 0":"4px 0",overflow:"hidden"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:6,fill:"currentColor"}})),[e])}(a);return(0,s().K8)((()=>e.map((e=>{const s=e.name,n=e.icon?{pointer:{table:i().NX,id:e.id,spaceId:e.id},icon:e.icon}:void 0;return{key:e.id,value:e.id,title:(0,g.jsxs)("div",{style:o.optionContainer,children:[(0,g.jsx)(c().B6,{disabled:!0,icon:n,iconRecordCategory:"workspace",isEmptyPage:!1,size:24,title:s,isLarge:!0,emojiSize:24,isRaw:!1}),(0,g.jsxs)("div",{style:o.container,children:[(0,g.jsx)(u().A,{style:o.optionTitle,children:s}),!a&&(0,g.jsx)(u().A,{style:o.optionCaption,children:(0,r().u2)({product:e.subscriptionTier,intl:t})})]})]}),shortTitle:s}}))),[e,t,o,a])}},301524:(e,t,a)=>{a.d(t,{A:()=>M,B:()=>k});a(898992),a(354520),a(672577),a(581454),a(737550),a(296540);var s=()=>a(484714),n=()=>a(236262),o=()=>a(995847),i=()=>a(340498),r=()=>a(959013),l=()=>a(381349),d=()=>a(496603),c=()=>a(436696),u=()=>a(497222),g=()=>a(728611),m=()=>a(722872),p=()=>a(541558),h=()=>a(760217),f=()=>a(439264),x=()=>a(285790),v=()=>a(678553),y=()=>a(8980),b=()=>a(897119),S=()=>a(89924),j=()=>a(859428),w=a(474848);const A=(0,r().YK)({inputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.collectionSortMenu.inputPlaceholder"},deleteButtonTooltip:{defaultMessage:"Remove sort rule",id:"database.sortMenu.deleteButtonTooltip"}});const M=function(e){let{schema:t,format:o,sorts:i,showDeleteAll:l,disabled:d,parentStore:g,collectionContextStore:p,onChange:h,onDeleteAll:f}=e;const x=(0,s().v3)(),{device:v}=x,y=!!Object.keys(t).some((e=>!i.find((t=>t.property===e)))),j=l&&i.length>0;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(z,{sorts:i,schema:t,disabled:d,parentStore:g,collectionContextStore:p,onChange:h}),(y||j)&&(0,w.jsxs)(S().A,{children:[y&&(0,w.jsx)(a(406699).Ay,{popupType:v.isMobile?b().nl.SlideUp:b().nl.Popup,renderOrigin:e=>(0,w.jsx)(u().A,{icon:a(617668).plusIcon,isGray:!0,title:(0,w.jsx)(r().sA,{id:"database.viewSettings.sortTab.newSort",defaultMessage:"Add sort"}),...e}),render:e=>{let s;return s=v.isMobile?{menuType:m().gu.ActionSheet}:{menuType:m().gu.Popup,width:280,height:287},(0,w.jsx)(a(928600).A,{...s,children:(0,w.jsx)(a(380468).A,{schema:t,format:o,getProperties:()=>Object.entries(t).filter((e=>{let[t,s]=e;return!i.find((e=>e.property===t))&&(0,a(244149).oH)(s)})).map((e=>{let[t]=e;return t})),onAccept:a=>{!function(e,t,a,s,n,o){var i;if(!e)return;const r=null===(i=a[e])||void 0===i?void 0:i.type,l=[...s,{property:e,direction:"ascending"}];n(l),(0,c().X)({environment:t,action:"create_sort_accept",collectionContextStore:o,property_type:r})}(a,x,t,i,h,p),e.close()},inputPlaceholder:a(972435).A.formatMessage(A.inputPlaceholder)})})}}),j&&(0,w.jsx)(u().A,{icon:n().trashIcon,isRed:!0,isGray:!0,title:(0,w.jsx)(r().sA,{id:"database.viewSettings.sortTab.deleteAllSorts",defaultMessage:"Delete sort"}),onClick:()=>function(e,t,a,s){t([]),null==s||s(),(0,c().X)({environment:e,action:"delete_all_sorts",collectionContextStore:a})}(x,h,p,f)})]})]})};function C(e,t,a,s,n,o){s(n.map(((a,s)=>s===e?t:a))),(0,c().X)({environment:a,collectionContextStore:o,action:"update_sort"})}function I(e,t,a,s,n){a(s.filter(((t,a)=>a!==e))),(0,c().X)({environment:t,action:"delete_sort",collectionContextStore:n})}function T(e){let{index:t,onChange:a,sorts:o,collectionContextStore:i}=e;const d=(0,s().v3)();return(0,w.jsx)(h().A,{title:(0,w.jsx)("div",{style:{color:l().Ay.red},children:(0,w.jsx)(r().sA,{defaultMessage:"Delete",id:"database.viewSettings.sortTab.mobileDeleteButtonTitle"})}),icon:(0,w.jsx)(y().I,{icon:n().trashIcon,color:"redPrimary"}),onClick:()=>I(t,d,a,o,i),focused:!1})}function k(e){let{onDeleteClick:t}=e;const a=(0,r().tz)();return(0,w.jsx)(j().A,{render:e=>(0,w.jsx)(x().A,{ariaLabel:a.formatMessage(A.deleteButtonTooltip),icon:o().xMarkSmallIcon,iconStyle:{width:i().Ev.sm,height:i().Ev.sm},onClick:t,style:{marginRight:-6},...e}),renderTooltip:()=>a.formatMessage(A.deleteButtonTooltip)})}function _(e){let{sort:t,index:a,schema:n,disabled:o,parentStore:i,collectionContextStore:r,onChange:l,sorts:d}=e;const c=(0,s().v3)(),{device:u}=c;return u.isMobile?(0,w.jsxs)(S().A,{children:[(0,w.jsx)(p().Ay,{index:a,sort:t,schema:n,parentStore:i,collectionContextStore:r,onChange:(e,t)=>C(e,t,c,l,d,r)}),!o&&(0,w.jsx)(T,{onChange:l,sorts:d,collectionContextStore:r,index:a})]}):(0,w.jsx)(S().A,{extraTopPadding:!0,desktopStyle:{padding:"8px 0 0 8px",width:"100%"},children:(0,w.jsx)(v().Ay,{showDragHandle:!u.isMobile&&!o,title:(0,w.jsx)("div",{style:{display:"flex",alignItems:"center",flexGrow:1,whiteSpace:"nowrap"},onMouseDown:g().tr,children:(0,w.jsx)(p().Ay,{index:a,sort:t,schema:n,parentStore:i,collectionContextStore:r,onChange:(e,t)=>C(e,t,c,l,d,r)})}),right:!o&&(0,w.jsx)(k,{onDeleteClick:()=>I(a,c,l,d,r)}),rightStyle:{marginRight:19}})})}function z(e){let{sorts:t,schema:a,disabled:n,parentStore:o,collectionContextStore:i,onChange:r}=e;const l=(0,s().v3)(),{device:u}=l;if(u.isMobile)return(0,w.jsx)(w.Fragment,{children:t.map(((e,s)=>(0,w.jsx)(_,{schema:a,disabled:n,parentStore:o,collectionContextStore:i,onChange:r,sorts:t,sort:e,index:s},s)))});{const e=t.map(((e,t)=>t.toString()));return e.length>0?(0,w.jsx)("div",{style:{marginBottom:2},children:(0,w.jsx)(f().Ay,{direction:"vertical",keys:e,renderKey:e=>(0,w.jsx)(_,{schema:a,disabled:n,parentStore:o,collectionContextStore:i,onChange:r,sorts:t,sort:t[parseInt(e)],index:parseInt(e)}),onDrop:e=>function(e,t,a,s,n){a(d().oE(e.map((e=>s[parseInt(e)])))),(0,c().X)({environment:t,action:"reorder_sorts",collectionContextStore:n})}(e,l,r,t,i)})}):null}}},303129:(e,t,a)=>{a.d(t,{l:()=>c});a(581454);var s=a(296540),n=()=>a(484714),o=()=>a(56366),i=()=>a(96689),r=()=>a(630116),l=()=>a(511303),d=()=>a(625319);function c(e){const t=(0,n().v3)(),{organizationOwnerRecordCache:a}=(0,s.useContext)(l().N),{spaceIds:c}=(0,s.useContext)(d().D);return(0,o().K8)((()=>(e??c).map((e=>new(r().SL)(t,{id:e,table:i().NX},{inMemoryRecordCache:a})))),[a,c,e,t])}},311670:(e,t,a)=>{a.d(t,{A:()=>o,e:()=>s});let s=function(e){return e.Overview="overview",e.Users="users",e.Content="content",e.Search="search",e}({});class n extends(()=>a(757695))().Store{getInitialState(){return{}}shouldRefreshState(e){const t=this.getState();return e!==t.currentSpaceId||!(t.currentTab!==s.Users||t.usersTabData&&t.usersTabData.usersAndStats)}}const o=new n},317131:(e,t,a)=>{a.d(t,{p:()=>w,l:()=>b});a(581454),a(296540);var s=()=>a(484714),n=()=>a(56366),o=()=>a(401497),i=()=>a(254437),r=()=>a(695608),l=()=>a(959013),d=()=>a(755636),c=()=>a(125565),u=()=>a(453697),g=()=>a(493823),m=()=>a(859428),p=()=>a(75491);function h(e){let{totalCount:t,shownCount:a}=e;const s=t-a;return s>0?s:0}var f=()=>a(566468),x=a(474848);const v=24,y=4;function b(e){let{userStores:t,isClickable:a,useSecondaryColorTitle:i,useIconsOnly:g,totalCount:f,customAvatarStyles:b}=e;const w=(0,l().tz)(),A=(0,s().v3)(),M=(0,o().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",height:"auto",paddingTop:8,paddingBottom:8},iconsWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},icons:{display:"flex",flexDirection:"row",alignItems:"center"},iconContainer:{marginRight:-v/4,display:"flex",alignItems:"center",justifyContent:"center"},avatar:{marginRight:4,...b},plusMore:{opacity:.5,marginLeft:4,display:"inline-block"},tooltip:{color:e.text.contrastPrimary,fontSize:12}})),[b]),C=t.slice(0,y),I=(0,n().K8)((()=>{if(C[0])return C.map((e=>{if(e)return e.computeWithRecordValues((t=>{let{getRecordValueAndSubscribe:a}=t;return a(e)}))}))}),[C]),T=I&&I[0],k=(0,x.jsxs)("div",{style:M.container,children:[(0,x.jsx)(u().A,{style:M.avatar,userValue:T,size:v}),(0,x.jsx)(l().sA,{id:"baseTable.usersCell.userName",defaultMessage:"{remainingCount, plural, =0 {<user>{firstUser}</user>} one {<user>{firstUser}</user><gray>+{remainingCount}</gray>} other {<user>{firstUser}</user><gray>+{remainingCount}</gray>}}",values:{firstUser:(0,r().c6)(w,T),remainingCount:h({totalCount:f||t.length,shownCount:1}),user:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,x.jsx)(c().A,{isSecondaryColor:i,children:t})},gray:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,x.jsx)(c().A,{style:M.plusMore,children:t})}}})]});let _=k;if(g){const e=h({totalCount:f||t.length,shownCount:C.length});_=(0,x.jsxs)("div",{style:M.iconsWrapper,children:[(0,x.jsx)("div",{style:M.icons,children:null==I?void 0:I.map(((e,t)=>(0,x.jsx)("div",{style:M.iconContainer,children:(0,x.jsx)(u().A,{userValue:e,size:v})},(null==e?void 0:e.id)||t)))}),e>0&&(0,x.jsx)(l().sA,{id:"baseTable.usersCell.remainingUsers",defaultMessage:"<gray>+{remainingCount}</gray>",values:{remainingCount:e,gray:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,x.jsx)(c().A,{style:{...M.plusMore,marginLeft:M.plusMore.marginLeft+-1*M.iconContainer.marginRight},children:t})}}})]})}if(!a)return(0,x.jsx)(m().A,{disableTooltip:t.length<=1,render:e=>(0,x.jsx)("div",{...e,children:_}),renderTooltip:()=>(0,x.jsx)(x.Fragment,{children:t.map(((e,t)=>(0,x.jsx)(c().A,{style:M.tooltip,children:(0,x.jsx)(j,{userStore:e})},e?e.id:t)))})});const z=t.map(((e,t)=>({key:null!=e&&e.id?null==e?void 0:e.id:t,render:t=>(0,x.jsx)(S,{userStore:e,...t}),action:()=>null!=e&&e.getEmail?d().f({environment:A,url:`mailto:${null==e?void 0:e.getEmail()}`}):void 0})));return(0,x.jsx)(p().ED,{hideDropdownIcon:!0,title:_,items:z,itemMaxWidth:380})}function S(e){let{userStore:t,...a}=e;const s=(0,n().K8)((()=>null==t?void 0:t.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:a}=e;return a(t)}))),[t]),r=(0,o().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",height:"auto",paddingBlock:8,marginInline:4},avatarContainer:{display:"flex",justifyContent:"center",alignItems:"center"},copyContainer:{display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"auto",opacity:.5},nameContainer:{marginLeft:8,marginRight:8},name:{fontSize:14,lineHeight:1.2,maxWidth:400},email:{fontSize:12,lineHeight:1.2,opacity:.5,maxWidth:400}})),[]);return(0,x.jsxs)(g().p,{style:r.container,...a,children:[(0,x.jsx)("div",{style:r.avatarContainer,children:(0,x.jsx)(u().A,{userValue:s,size:v})}),(0,x.jsxs)("div",{style:r.nameContainer,children:[(0,x.jsx)(c().A,{style:r.name,children:(0,x.jsx)(j,{userStore:t})}),s?(0,x.jsx)(c().A,{style:r.email,children:s.email}):null]}),(0,x.jsx)("div",{style:r.copyContainer,children:(0,i().F)({height:18,width:18})})]})}function j(e){const t=(0,l().tz)(),{userStore:a}=e,s=(0,n().K8)((()=>null==a?void 0:a.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:t}=e;return t(a)}))),[a]);return(0,x.jsx)(x.Fragment,{children:(0,r().c6)(t,s)})}function w(){const e=(0,o().IS)((()=>({icon:{borderRadius:"100%"},title:{width:"80%"}})),[]);return(0,x.jsx)(f().mf,{titleStyles:e.title,includeIcon:!0,iconStyles:e.icon})}},325020:(e,t,a)=>{a.d(t,{NQ:()=>u,YM:()=>d,_B:()=>g,sg:()=>m,zJ:()=>c});a(296540);var s=()=>a(401497),n=()=>a(959013),o=()=>a(381349),i=()=>a(534177),r=()=>a(464708),l=a(474848);function d(e){let{content:t,isBlue:a}=e;const n=(0,s().IS)((e=>({badge:{marginLeft:0,marginRight:6,padding:"2px 6px",fontSize:13,lineHeight:"18px",...a&&{background:"light"===e.mode?o().Tj.diffBackground:"rgba(35, 131, 226, 0.2)",color:e.blueColor}}})),[a]);return(0,l.jsx)(r().A,{content:t,style:n.badge})}function c(){return(0,l.jsx)(d,{content:(0,l.jsx)(n().sA,{id:"organizationConsole.singleUserView.suspendedBadge",defaultMessage:"Suspended"})})}function u(e){let{highestRole:t}=e;const a=function(){switch(t){case"owner":return(0,l.jsx)(n().sA,{id:"organizationConsole.organizationRole.ownerRole",defaultMessage:"Org owner"});case"member":return(0,l.jsx)(n().sA,{id:"organizationConsole.organizationRole.memberRole",defaultMessage:"Member"});case"guest":return(0,l.jsx)(n().sA,{id:"organizationConsole.organizationRole.guestRole",defaultMessage:"Guest"});case"none":return;default:(0,i().HB)(t)}}();return a?(0,l.jsx)(d,{isBlue:!0,content:a}):null}function g(e){let{emailDomain:t}=e;return t?(0,l.jsx)(d,{content:(0,l.jsx)(n().sA,{id:"organizationConsole.singleUserView.managedByDomainBadge",defaultMessage:"Managed by {domain}",values:{domain:t}})}):null}function m(){return(0,l.jsx)(d,{content:(0,l.jsx)(n().sA,{id:"organizationConsole.singleUserView.legalHoldBadge",defaultMessage:"On legal hold"})})}},333046:(e,t,a)=>{a.d(t,{X:()=>P,j:()=>D});a(944114),a(898992),a(354520),a(672577),a(581454);var s=a(296540),n=()=>a(56366),o=()=>a(401497),i=()=>a(784892),r=()=>a(888867),l=()=>a(959013),d=()=>a(534177),c=()=>a(56394),u=()=>a(972435),g=()=>a(722872),m=()=>a(37433),p=()=>a(962730),h=()=>a(377586),f=()=>a(970585),x=()=>a(898808),v=()=>a(493823),y=()=>a(760217),b=()=>a(928600),S=()=>a(939740),j=()=>a(897119),w=()=>a(204063),A=()=>a(89924),M=()=>a(125565),C=()=>a(484595),I=()=>a(806754),T=()=>a(881690),k=()=>a(297780),_=a(474848);const z=(0,l().YK)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.teams.placeholder",defaultMessage:"Search for teamspaces..."}});function D(e){let{selectedTeamIds:t,setSelectedTeamIds:a,onMenuClose:D,teamStores:N}=e;const R=(0,n().uB)(void 0,f().A),B=(0,o().IS)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:4},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4},pillText:{marginLeft:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},icon:{width:16,marginRight:4,fill:"currentColor"},teamIcon:{marginRight:8},optionTitle:{display:"block"},noResultsMessage:{width:"100%",margin:"8px 12px"},optionCaption:{display:"block",color:e.text.secondary,fontSize:12,lineHeight:"15px"}})),[]),[L,E]=(0,s.useState)(!1),[O,U]=(0,s.useState)(""),F=(0,n().K8)((()=>[...N].sort(m().XE)),[N]),H=(0,n().K8)((()=>t.map((e=>N.find((t=>t.id===e)))).filter(d().O9)),[N,t]);function V(){E(!1),U(""),D()}function W(){U(""),a([])}function q(e){const s=t.includes(e)?[]:[e];a(s),U("")}const G=(0,s.useCallback)((e=>{U(e.target.value)}),[]),K=(0,n().K8)((()=>H.map((e=>{const s=e.getName();return(0,_.jsx)(T().A,{isSingle:!0,format:i().NY.Inline,showRemoveButton:!0,onClickRemove:()=>{const s=t.filter((t=>t!==e.id));a(s)},style:B.pillContainer,value:(0,_.jsxs)("div",{style:B.pillContents,children:[(0,_.jsx)(x().x,{disabled:!0,store:e,size:16}),(0,_.jsx)(M().A,{style:B.pillText,children:s})]})},e.id)}))),[H,t,a,B]);const Y=(0,_.jsx)(c().A,{on:t.length>0,icon:(0,r().peopleFillIcon)(B.icon),title:(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.title",defaultMessage:"Teamspace"}),onClick:()=>E(!0)});return(0,_.jsx)(I().A,{children:(0,_.jsx)(j().Ay,{popupType:h().n.Popup,placementToOrigin:p().W.Bottom,alignmentToOrigin:p().C.Start,open:L,render:function(){const e=[];for(const n of F){const a=n.getName(),s=n.getTeamAccessLevel(),o=n.isDefault();a&&a.toLocaleLowerCase().includes(O)&&e.push({key:n.id,action:()=>q(n.id),render:e=>(0,_.jsx)(y().A,{...e,icon:(0,_.jsx)(C().A,{isSelected:t.includes(n.id)}),focused:!1,title:(0,_.jsxs)("div",{style:B.optionContainer,children:[(0,_.jsx)(x().x,{disabled:!0,store:n,size:24,style:B.teamIcon}),(0,_.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,_.jsx)(M().A,{style:B.optionTitle,children:a}),(0,_.jsx)(M().A,{style:B.optionCaption,children:P(s,o)})]})]})})})}const a={key:"no-results",action:()=>{},render:e=>(0,_.jsx)(M().A,{isSecondaryColor:!0,style:B.noResultsMessage,...e,children:(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.noResultsMessage",defaultMessage:"No results found"})})},s={key:"teamOptions",items:e.length>0?e:[a],render:e=>(0,_.jsx)(A().A,{...e,title:null,loading:!1})};return(0,_.jsxs)("div",{style:B.container,children:[(0,_.jsx)(k().A,{focus:!0,value:O,style:B.input,placeholder:u().A.formatMessage(z.placeholder),onChange:G,onRemoveLastToken:W,tokens:K}),(0,_.jsx)(b().A,{menuType:g().gu.Popup,header:null,maxHeight:250,width:300,children:(0,_.jsx)(S().Ay,{type:S().Oh.Vertical,store:R,initialFocus:0,sections:[s]})}),(0,_.jsxs)(A().A,{topBorder:!0,style:B.footer,children:[(0,_.jsx)(v().p,{onClick:W,children:(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.clearButton",defaultMessage:"Clear"})}),(0,_.jsx)(w().A,{onClick:V,children:(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:V,keepFocus:!0,origin:Y,preventScaleTransition:!0})})}function P(e,t){if(t)return(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.default",defaultMessage:"Default"});switch(e){case"private":return(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.private",defaultMessage:"Private"});case"closed":return(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.closed",defaultMessage:"Closed"});case"open":return(0,_.jsx)(l().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.open",defaultMessage:"Open"});default:(0,d().HB)(e)}}},334013:(e,t,a)=>{a.d(t,{A:()=>x});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(56366),o=()=>a(401497),i=()=>a(842599),r=()=>a(959013),l=()=>a(534177),d=()=>a(897119),c=()=>a(417555),u=()=>a(856952),g=()=>a(743260),m=()=>a(962730),p=()=>a(406999),h=a(474848);function f(e){const{permissionsInviteStore:t}=e,a=(0,r().tz)(),d=(0,n().K8)((()=>{const{inputFocus:e}=t.state;return"invitee"===e}),[t]),m=(0,n().K8)((()=>t.state.tokenQuery),[t]),f=(0,n().K8)((()=>t.state.inviteTargets.filter(p().eL).filter(p().eL)),[t]),x=(0,n().K8)((()=>t.state.inviteRole||"editor"),[t]),v=(0,s.useCallback)((e=>{const{newInviteTargets:a,newInputValue:s,inputFocus:n}=e;t.setState({...t.state,inviteTargets:a,table:"space",inviteRole:x,...(0,l().O9)(s)&&{tokenQuery:s},...(0,l().O9)(n)&&{inputFocus:n}})}),[x,t]),y=(0,s.useCallback)((e=>{const a=e.target.value,{extractedEmails:s,newInputValue:n}=(0,i().Ct)(a),o=s.map((e=>({type:"newUser",value:{email:e},source:"email"}))).filter((e=>!(0,g().mQ)({target:e,permissionsInviteStore:t}))).filter(p().eL),r=[...f,...o];v({newInviteTargets:r,newInputValue:n,inputFocus:"invitee"})}),[f,t,v]),b=(0,s.useCallback)((e=>{const t=f.filter((t=>t!==e));v({newInviteTargets:t})}),[f,v]),S=(0,s.useCallback)((()=>{const e=f.slice(0,-1);v({newInviteTargets:e})}),[f,v]),j=(0,o().IS)((()=>({tokenMenuItem:{borderRadius:6,padding:"6px 8px"}})),[]),w=f.map((e=>(0,h.jsx)(c().A,{target:e,onClickRemove:b},e.value.id)));return(0,h.jsx)(u().Ay,{focusInitial:!0,focus:d,showBorder:!0,format:u().le.Select,tokenWrapStyle:{gap:4},value:m,onChange:y,onRemoveLastToken:S,type:"email",placeholder:a.formatMessage({id:"spacePermissionsInviteEmailSection.tokenInput.placeholder",defaultMessage:"Search names or emails"}),tokens:w,focusAfterAnimation:!0,style:j.tokenMenuItem})}const x=function(e){const{permissionsInviteStore:t,disableAutoFocus:l,showCurrentUser:c}=e,u=(0,a(58293).r)(),x=e.parentStore||u,v=(0,n().K8)((()=>{var e;return"invitee"===(null===(e=t.state)||void 0===e?void 0:e.inputFocus)}),[t]),y=(0,s.useCallback)((()=>{const e=t.state.tokenQuery.trim();if((0,i().DT)(e)){const a=t.state.inviteTargets.filter(p().eL).filter(p().eL),s="editor",n=t.state.inviteRole||s,o={type:"newUser",value:{email:e},source:"email"};if(!(0,g().mQ)({target:o,permissionsInviteStore:t})){const e=[...a,o];t.setState({...t.state,inviteTargets:e,table:"space",inviteRole:n,tokenQuery:""})}}t.setState({...t.state,inputFocus:"none"})}),[t]),b=(0,s.useCallback)((e=>{t.setState({...t.state,inputFocus:"invitee"}),e.stopPropagation()}),[t]);(0,s.useEffect)((()=>{l||t.setState({...t.state,inputFocus:"invitee"})}),[t,l]);const S=(0,o().IS)((e=>({origin:{display:"flex",flexDirection:"column",width:"100%",gap:8,padding:2},emailText:{color:e.text.secondary}})),[]);return x?(0,h.jsx)(d().Ay,{trapFocus:!1,placementToOrigin:m().W.Bottom,alignmentToOrigin:m().C.Start,originGap:10,open:v,popupType:d().nl.Popup,sameWidthAsOrigin:!0,disableMouseCapture:!0,enableOutsideClickDismiss:!0,onDismiss:y,render:()=>(0,h.jsx)(a(263919).A,{permissionsInviteStore:t,store:x,shouldShowGroups:!1,sectionRenderLimit:4,membersOnly:!1,disableInvitedUsers:!1,hideCurrentUser:!c,hideUserTypeToken:!1,hideTitle:!0,defaultUserTitle:"name_and_email_unless_right",performSearchRequest:e.performSearchRequest}),origin:(0,h.jsxs)("div",{style:S.origin,onClick:b,children:[(0,h.jsx)(a(554509).D,{styleName:"UISmall-12px/Medium",customStyles:S.emailText,children:(0,h.jsx)(r().sA,{id:"spacePermissionsInviteEmailSection.title",defaultMessage:"Email addresses"})}),(0,h.jsx)(f,{permissionsInviteStore:t})]})}):null}},338499:(e,t,a)=>{a.d(t,{q3:()=>je,CX:()=>Me,Hj:()=>Ie});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(484714),o=()=>a(56366),i=()=>a(713996),r=()=>a(959013),l=()=>a(496603),d=()=>a(534177),c=()=>a(449506),u=()=>a(901389),g=()=>a(2220),m=()=>a(300089),p=()=>a(898486),h=()=>a(972435),f=()=>a(204063),x=()=>a(375243),v=()=>a(806754),y=()=>a(495427),b=()=>a(366208),S=()=>a(522985),j=()=>a(187174),w=()=>a(511303);var A=()=>a(802042),M=()=>a(486019),C=()=>a(182392),I=()=>a(571499),T=()=>a(202345),k=()=>a(51922),_=()=>a(887720),z=()=>a(246682),D=()=>a(875166),P=()=>a(981982),N=a(474848);function R(e){let{selectedStatuses:t,setSelectedStatuses:a}=e;return(0,N.jsx)(P().VX,{pillTitle:(0,N.jsx)(r().sA,{id:"organizationEmailDomains.table.filters.status.title",defaultMessage:"Status"}),pillIcon:D().E,selectedItems:t,setSelectedItems:a,items:B})}const B=[b().A$.Success,b().A$.Pending,b().A$.Failure].map((e=>({key:e,value:e,title:(0,N.jsx)(x().d9,{status:e}),shortTitle:(0,x().xF)(e),dontShrinkTitle:!0})));var L=()=>a(688437),E=()=>a(401497),O=()=>a(12193),U=()=>a(7674),F=()=>a(864943),H=()=>a(107683),V=()=>a(2609);function W(e){const{onDismiss:t,domainVerification:a}=e,s=(0,E().IS)((e=>({headerIcon:{height:32,width:32,fill:e.icon.secondary},content:{width:400},fullButton:{width:"100%"}})),[]);return(0,N.jsx)(H().s,{isOpen:!0,onDismiss:t,render:e=>{let{sizeRange:n}=e;return(0,N.jsx)(U().tf,{showDismissButton:!1,sizeRange:n,header:(0,N.jsx)(V().rQ,{icon:(0,O().globeIcon)(s.headerIcon),title:(0,N.jsx)(r().sA,{id:"settingsConsole.emailDomains.invalidDomainModal.title",defaultMessage:"Unable to verify email domain"}),byline:(0,N.jsx)(r().sA,{id:"settingsConsole.emailDomains.invalidDomainModal.invalid",defaultMessage:"You are unable to verify the email domain <b>{domain}</b> because it has already been verified by another workspace or organization.",values:{domain:a.domain,b:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,N.jsx)("b",{children:t})}}})}),footer:(0,N.jsx)("div",{style:s.content,children:(0,N.jsx)(F().A,{size:"lg",onClick:t,style:s.fullButton,children:(0,N.jsx)(r().sA,{id:"settingsConsole.emailDomains.invalidDomainModal.okay",defaultMessage:"OK"})})})})}})}var q=()=>a(55293),G=()=>a(96689),K=()=>a(778078),Y=()=>a(284371),Q=()=>a(436572),$=()=>a(630116),X=()=>a(364280),Z=()=>a(331542),J=()=>a(554509),ee=()=>a(187820),te=()=>a(73332),ae=()=>a(625319),se=()=>a(221723);function ne(e){let{domainVerification:t,onDismiss:a,organizationId:o,associatedAccountCount:i,linkedSpaceIds:l}=e;const g=(0,E().IS)((e=>({icon:{height:30,width:30,color:e.text.uiRedPrimary},confirmation:{display:"flex",width:"100%",justifyContent:"center",gap:10},modalContainer:{width:V().NF},loadingContainer:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center",height:100}})),[]),m=(0,n().v3)(),{refreshOrganization:f}=(0,s.useContext)(ae().D),[x,v]=(0,s.useState)(!1),[y,b]=(0,s.useState)(!1),S=(0,s.useCallback)((async()=>{if(!x||y)return;b(!0);const e=await c().callApi({eventName:"deleteVerifiedDomainsForOrganization",environment:m,data:{organizationId:o,emailDomainsToRemove:[t.domain]}});b(!1),a(),"success"===e.type?(f(),Q().D6({label:(0,N.jsx)(J().D,{styleName:"UIRegular-14px/Regular",children:(0,N.jsx)(r().sA,{id:"organizationEmailDomainsTable.toastMessage.removeDomain.success",defaultMessage:"Successfully removed <b>{domain}</b>",values:{domain:t.domain,b:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,N.jsx)("b",{children:t})}}})})})):u().f1((0,p().Hu)(h().A.getIntl(),e))}),[m,o,f,a,x,y,t.domain]);return(0,N.jsx)(H().s,{isOpen:!0,onDismiss:a,render:e=>{let{sizeRange:s}=e;return(0,N.jsx)("div",{style:g.modalContainer,children:(0,N.jsx)(U().tf,{gap:V().gA,showDismissButton:!1,sizeRange:s,header:(0,N.jsx)(V().rQ,{icon:(0,q().J)(g.icon),title:(0,N.jsx)(r().sA,{...ie.title}),byline:(0,d().O9)(l)&&(0,d().O9)(i)?(0,N.jsx)(r().sA,{id:"orgConsole.emailDomains.removeEmailDomainModal.byline",defaultMessage:"This will disable SAML SSO, revoke management for <b>{userCount, plural, one {# user} other {# users}}</b>, and remove <b>{spaceCount, plural, one {# linked workspace} other {# linked workspaces}}</b>.",values:{userCount:i,spaceCount:l.length,domain:t.domain,b:e=>(0,N.jsx)("span",{style:{fontWeight:Y().Wy.semibold},children:e})}}):null}),footer:(0,N.jsx)(V().jl,{isDarkRed:!0,primaryDisabled:!x||y,primaryText:(0,N.jsx)(r().sA,{...ie.removeButton}),primaryAction:S,secondaryText:(0,N.jsx)(r().sA,{...ie.cancelButton}),secondaryAction:a}),children:(0,d().O9)(l)?(0,N.jsxs)(X().VP,{gap:V().gA,width:"100%",children:[l.length?(0,N.jsx)(oe,{linkedSpaceIds:l}):null,(0,N.jsxs)("div",{style:g.confirmation,children:[(0,N.jsx)(te().T,{checked:x,size:14,onClick:()=>v(!x)}),(0,N.jsx)(J().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,N.jsx)(r().sA,{...ie.confirmation})})]})]}):(0,N.jsx)("div",{style:g.loadingContainer,children:(0,N.jsx)(Z().A,{})})})})}})}function oe(e){const{linkedSpaceIds:t}=e,a=(0,n().v3)(),{organizationOwnerRecordCache:i}=(0,s.useContext)(w().N),[l,d]=(0,s.useState)(""),c=t.map((e=>new($().SL)(a,{id:e,table:G().NX},{inMemoryRecordCache:i}))),u=(0,o().K8)((()=>c.map((e=>({id:e.id,icon:(0,N.jsx)(ee().B6,{disabled:!0,icon:e.getIcon(),iconRecordCategory:"workspace",isEmptyPage:!1,title:e.getName(),size:se().iK,isLarge:!0}),name:e.getName()})))),[c]),g=(0,K().Ay)(l,u,(e=>e.name??""));return(0,N.jsx)(V().p6,{items:g,titleText:(0,N.jsx)(r().sA,{...ie.linkedWorkspaces}),headerText:(0,N.jsx)(r().sA,{...ie.workspaces}),headerAction:(0,N.jsx)(y().nv,{mode:y().Ke.AnimatedSearchButton,query:l,setQueryFilter:d})})}const ie=(0,r().YK)({title:{id:"orgConsole.emailDomains.removeEmailDomainModal.title",defaultMessage:"Remove email domain and workspaces?"},removeButton:{id:"orgConsole.emailDomains.removeEmailDomainModal.button.remove",defaultMessage:"Remove domain and workspaces"},cancelButton:{id:"orgConsole.emailDomains.removeEmailDomainModal.button.cancel",defaultMessage:"Cancel"},confirmation:{id:"orgConsole.emailDomains.removeEmailDomainModal.confirmation",defaultMessage:"I understand this cannot be undone"},linkedWorkspaces:{id:"orgConsole.emailDomains.removeEmailDomainModal.spacesList.title",defaultMessage:"Linked workspaces"},workspaces:{id:"orgConsole.emailDomains.removeEmailDomainModal.spacesList.header",defaultMessage:"Workspaces"}});var re=()=>a(174517),le=(a(944114),()=>a(525884)),de=()=>a(641300),ce=()=>a(566468),ue=()=>a(489143),ge=()=>a(135851),me=()=>a(743556);const pe=(0,r().YK)({domain:{id:"settingsConsole.organizationEmailDomains.table.header.domain",defaultMessage:"Email domain"},status:{id:"organizationEmailDomains.table.header.status",defaultMessage:"Status"}}),he={id:"domain",headerTitle:(0,N.jsx)(r().sA,{...pe.domain}),renderCell:e=>e.type===me().T.Loading?(0,N.jsx)(ce().mf,{}):(0,N.jsx)(ce().s7,{title:e.domain,rightContent:(0,N.jsx)(Se,{domainStatus:e.status,onViewDetails:"success"!==e.status?e.onShowDetails:void 0,onRemove:e.onRemove,isOnlyVerifiedDomain:e.isOnlyVerifiedDomain}),summaryStyles:{paddingBlock:8,overflow:"hidden"},containerStyles:{width:"100%"}}),widthData:{width:275,maxWidth:275},sortable:!1},fe={id:"spaces",headerTitle:(0,N.jsx)(r().sA,{id:"organizationEmailDomains.table.header.spaces",defaultMessage:"Linked workspaces"}),headerInfoTooltip:(0,N.jsx)(r().sA,{id:"organizationEmailDomains.table.header.spaces.tooltip",defaultMessage:"Workspaces in your organization that have been created by a user with the verified email domain."}),renderCell:e=>e.type!==me().T.Loading&&e.spaceStores?"success"===e.status?e.spaceStores.length<1?(0,N.jsx)(J().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,N.jsx)(r().sA,{id:"organizationEmailDomains.table.spacesColumn.noSpaces",defaultMessage:"None"})}):(0,N.jsx)(a(817863).$,{spaceStores:e.spaceStores,showTooltip:!0,isLoading:!1}):void 0:(0,N.jsx)(ce().mf,{}),widthData:{widthPercent:33,minWidth:100},sortable:!1},xe={id:"associatedAccounts",headerTitle:(0,N.jsx)(r().sA,{id:"organizationEmailDomains.table.header.associatedAccounts",defaultMessage:"Associated user accounts"}),renderCell:e=>e.type===me().T.Loading||e.isAssociatedAccountCountLoading?(0,N.jsx)(ce().mf,{}):"success"===e.status?(0,N.jsx)(J().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,N.jsx)(r().sA,{id:"organizationEmailDomains.table.associatedAccountsCount",defaultMessage:"{count, plural, one {# account} other {# accounts}}",values:{count:e.associatedAccountCount??0}})}):void 0,widthData:{widthPercent:33,minWidth:100},sortable:!1},ve={id:"status",headerTitle:(0,N.jsx)(r().sA,{...pe.status}),renderCell:e=>e.type===me().T.Loading?(0,N.jsx)(ce().mf,{}):(0,N.jsx)(x().d9,{status:e.status}),widthData:{widthPercent:33,minWidth:100},sortable:!1},ye=[he,ve,fe,xe];function be(e){let{domains:t,loading:a,setSelectedDomain:o,setOpenedModal:i,managedUsersCountState:l,spaceIdsForDomain:g,refetchPendingDomains:m}=e;const h=(0,n().v3)(),{organizationOwnerRecordCache:f}=(0,s.useContext)(w().N),v=(0,r().tz)(),y=(0,ue().A)(),b=(0,E().IS)((e=>(0,de().rC)({columnRenderInfo:ye,theme:e,containerMarginTop:0})),[]);const S=1===t.filter((e=>"verified"===e.data.type)).length,j=t.map((e=>{var t,a;let{domain:s,status:n,data:r}=e;const x=g?g[s]??[]:void 0;return{type:me().T.OrganizationEmailDomain,id:"verified"===r.type?s:r.id,isClickable:!1,domain:s,status:n,spaceStores:x?x.map((e=>{let{spaceId:t}=e;return new($().SL)(h,{id:t,table:G().NX},{inMemoryRecordCache:f})})):void 0,managedUsersCountState:l,associatedAccountCount:null!==(t=l.count)&&void 0!==t&&t.countsPerDomain?null===(a=l.count)||void 0===a?void 0:a.countsPerDomain[s]:void 0,isAssociatedAccountCountLoading:l.loading,onShowDetails:()=>function(e){o(e);const t="invalid"===e.type&&Date.now()<=e.expiresAt;i(t?je.InvalidEmailDomain:je.VerifyEmailDomain)}(r),onRemove:()=>async function(e){const{type:t}=e;if("invalid"===t||"unverified"===t){const t=await c().callApi({eventName:"deleteDomainVerificationCode",environment:h,data:{id:e.id}});return"failed"===t.type?u().f1((0,p().Hu)(v,t)):void("success"===t.type&&await m())}"verified"===t?(o(e),i(je.RemoveEmailDomain)):(0,d().HB)(t)}(r),isOnlyVerifiedDomain:S&&"verified"===r.type}})),A=a?0===j.length?(0,me().n)(5):[...j,...(0,me().n)(3)]:j,M=ye.map((e=>({...e,headerStyle:y.tableHeader,rowStyle:y.tableRow})));return(0,N.jsx)(de().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:M,rows:A,styles:b,renderNoRowsComponent:()=>(0,N.jsx)(x().Jd,{}),extendToFullScreen:ge().e})}function Se(e){let{onViewDetails:t,onRemove:s,domainStatus:n,isOnlyVerifiedDomain:o}=e;const i=(0,x().Rf)(),l=[];return t&&"pending"===n&&l.push({key:"verify",type:"action",icon:(0,le().infoCircleIcon)(i.menuIcon),title:(0,N.jsx)(r().sA,{defaultMessage:"Verify domain",id:"organizationEmailDomainsTable.actionsMenu.onVerifyDomain.verify"}),caption:(0,N.jsx)(r().sA,{defaultMessage:"Confirm your DNS record was successfully updated.",id:"organizationEmailDomainsTable.actionsMenu.onVerifyDomain.verifyCaption"}),action:()=>t()}),t&&"failure"===n&&l.push({key:"details",type:"action",icon:(0,le().infoCircleIcon)(i.menuIcon),title:(0,N.jsx)(r().sA,{defaultMessage:"View details",id:"organizationEmailDomainsTable.actionsMenu.onVerifyDomain.details"}),caption:(0,N.jsx)(r().sA,{defaultMessage:"See more information about the state of this domain verification record.",id:"organizationEmailDomainsTable.actionsMenu.onVerifyDomain.detailsCaption"}),action:()=>t()}),s&&l.push({key:"remove",type:"action",icon:(0,a(236262).trashIcon)(i.menuIcon),title:(0,N.jsx)(r().sA,{id:"organizationEmailDomainsTable.actionsMenu.onRemove.remove",defaultMessage:"Remove domain"}),caption:"success"===n?(0,N.jsx)(r().sA,{id:"organizationEmailDomainsTable.actionsMenu.onRemove.removeSuccessfulCaption",defaultMessage:"Delete domain verification and remove linked organization workspaces."}):(0,N.jsx)(r().sA,{id:"organizationEmailDomainsTable.actionsMenu.onRemove.removeCaption",defaultMessage:"Delete domain verification record."}),action:()=>{o||s()},disabled:o,tooltipTitle:(0,N.jsx)(r().sA,{id:"organizationEmailDomainsTable.actionsMenu.onRemove.disabledTooltip",defaultMessage:"You may not remove the last verified domain from your organization."}),tooltipDisabled:!o}),0===l.length?null:(0,N.jsx)(ce().bd,{items:l})}let je=function(e){return e.AddEmailDomain="add-email-domain",e.VerifyEmailDomain="verify-email-domain",e.RemoveEmailDomain="remove-email-domain",e.InvalidEmailDomain="invalid-email-domain",e}({});const we=[{id:he.id,name:h().A.formatMessage(pe.domain),type:"title"},{id:ve.id,name:h().A.formatMessage(pe.status),type:"status"}];function Ae(e){const{environment:t,organizationId:a,isStatusFiltered:s,appliedSorts:n,query:o}=e;(0,g().u)({environment:t,event:{eventName:"org_console_general_table_query",eventProperties:{table:"email_domains",organization_id:a,filter_keys:s?["status"]:void 0,sort_columns:null==n?void 0:n.map((e=>e.propertyId)),has_query:Boolean(o)}}})}function Me(e){var t;let{organizationStore:a}=e;const u=(0,n().v3)(),g=(0,M().F)(),[p,h]=(0,s.useState)([]),[b,D]=(0,s.useState)(),[P,B]=(0,s.useState)(),[L,E]=(0,s.useState)(!1),[O,U]=(0,s.useState)(),F=O??P??[];(0,s.useEffect)((()=>Ae({environment:u,organizationId:a.id})),[u,a.id]);const H=(0,A().o)({organizationId:a.id,includeCountsPerDomain:!0}),V=(0,o().K8)((()=>a.getEmailDomains()),[a]),W=function(e){const{organizationId:t,domains:a}=e,o=(0,n().v3)(),{updateCacheWithRecordMap:i}=(0,s.useContext)(w().N),[{status:r,value:l}]=(0,j().Yb)((async()=>{const e=await c().callApi({eventName:"getOrganizationSpacesForDomain",environment:o,data:{organizationId:t,domains:a}});if("success"===e.type)return i({data:e.data}),e.data;if("failed"===e.type)throw e.error;return(0,d().HB)(e)}),[o,t,a,i]);return{loading:"pending"===r,didError:"rejected"===r,data:l}}({organizationId:a.id,domains:V}),q=W.loading?void 0:l().$z(null===(t=W.data)||void 0===t?void 0:t.spaceEmailDomains,(e=>e.emailDomain)),G=(0,s.useMemo)((()=>V.map(x().vv).filter((e=>Te(e,b,p)))),[V,p,b]),{domainVerifications:K,refetchDomainVerifications:Y,loading:Q}=(0,S().J)({organizationId:a.id}),$=function(e){let{domains:t,appliedSorts:a}=e;if(!a)return t;const s=a.map((e=>{let{propertyId:t}=e;return t===ve.id?e=>ke[e.status]:e=>{var t;return null===(t=e.domain)||void 0===t?void 0:t.toLowerCase()}})),n=a.map((e=>{let{direction:t}=e;return"ascending"===t?"asc":"descending"===t?"desc":void(0,d().HB)(t)}));return l().My(t,s,n)}({domains:[...G,...(0,o().K8)((()=>K?K.map((e=>Ie(e))).filter((e=>Te(e,b,p))):[]),[K,p,b])],appliedSorts:P}),[X,Z]=(0,s.useState)(),[J,ee]=(0,s.useState)(),te=(0,N.jsx)(r().sA,{..._e.title});return(0,N.jsx)(I().D,{breadcrumbs:[{message:(0,N.jsx)(r().sA,{..._e.goBack}),onClick:()=>{(0,C().i)({environment:u,from:{tabRoute:i().Vo,properties:{subtab:i().al.EmailDomains}},organizationId:a.id,tabRoute:i().Vo})}},{message:te}],children:(0,N.jsxs)(T().t,{children:[(0,N.jsx)(k()._,{title:te,byline:(0,N.jsx)(r().sA,{..._e.description})}),(0,N.jsxs)("div",{style:g.tableHeader,children:[(0,N.jsxs)("div",{style:g.leftContent,children:[(0,N.jsx)(v().A,{children:(0,N.jsx)(z().e,{sortProperties:we,isMenuOpen:L,setIsMenuOpen:E,onApply:e=>{E(!1),B(e),U(void 0),Ae({environment:u,organizationId:a.id,appliedSorts:e,query:b,isStatusFiltered:Boolean(null==p?void 0:p.length)})},currentSorts:F})}),F.length>0?(0,N.jsx)(m().he,{}):null,(0,N.jsx)(R,{selectedStatuses:p,setSelectedStatuses:e=>{h(e),Ae({environment:u,organizationId:a.id,appliedSorts:P,query:b,isStatusFiltered:Boolean(null==e?void 0:e.length)})}})]}),(0,N.jsxs)("div",{style:g.rightContent,children:[(0,N.jsx)(_().x,{appliedSorts:P,openSortPillMenu:e=>{e&&U([{propertyId:e,direction:"ascending"}]),E(!0)},sortProperties:we}),(0,N.jsx)(y().nv,{mode:y().Ke.AnimatedSearchButton,query:b,setQueryFilter:e=>{D(e),Ae({environment:u,organizationId:a.id,appliedSorts:P,query:e,isStatusFiltered:Boolean(null==p?void 0:p.length)})}}),(0,N.jsx)(f().A,{onClick:()=>Z(je.AddEmailDomain),children:(0,N.jsx)(r().sA,{..._e.addDomainButton})})]})]}),(0,N.jsx)(be,{domains:$,loading:Q,setOpenedModal:Z,setSelectedDomain:ee,managedUsersCountState:H,spaceIdsForDomain:q,refetchPendingDomains:Y}),(0,N.jsx)(Ce,{openedModal:X,setOpenedModal:Z,selectedDomain:J,setSelectedDomain:ee,organizationId:a.id,refetchPendingDomains:Y,managedUsersCountState:H,spaceIdsForDomain:q})]})})}function Ce(e){let{openedModal:t,setOpenedModal:a,refetchPendingDomains:o,selectedDomain:i,setSelectedDomain:l,organizationId:g,managedUsersCountState:m,spaceIdsForDomain:h}=e;const f=(0,n().v3)(),x=(0,r().tz)(),v=()=>a(void 0),y=(0,s.useCallback)((async e=>{const t=await c().callApi({eventName:"deleteDomainVerificationCode",environment:f,data:{id:e.id}});if("failed"===t.type)return u().f1((0,p().Hu)(x,t));const a=await c().callApi({eventName:"createDomainVerificationCode",environment:f,data:{type:"org_saml_config",domain:e.domain,organizationId:g}});if("failed"===a.type)return u().f1((0,p().Hu)(x,a));o(),l(Ie(a.data.domainVerification).data)}),[f,x,g,o,l]);if(!t)return null;if(t===je.RemoveEmailDomain){var b;if(!i||"verified"!==i.type)return null;const e=h?(h[i.domain]??[]).map((e=>e.spaceId)):void 0;return(0,N.jsx)(ne,{organizationId:g,onDismiss:v,domainVerification:i,associatedAccountCount:null!==(b=m.count)&&void 0!==b&&b.countsPerDomain?m.count.countsPerDomain[i.domain]:void 0,linkedSpaceIds:e})}return t===je.VerifyEmailDomain?i&&"verified"!==i.type?(0,N.jsx)(re().p,{onDismiss:v,refetchPendingDomains:o,domainVerification:i,regenerateCode:y,organizationId:g}):null:t===je.AddEmailDomain?(0,N.jsx)(L().nb,{organizationId:g,onDismiss:v,onSubmit:e=>{o(),l(e),a(je.VerifyEmailDomain)}}):t===je.InvalidEmailDomain?i&&"invalid"===i.type?(0,N.jsx)(W,{onDismiss:v,domainVerification:i}):null:void(0,d().HB)(t)}function Ie(e){return(0,x().W0)({id:e.id,domain:e.domain,verificationCode:e.verification_code,createdAt:e.created_at,expiresAt:e.expires_at,verifiedAt:e.verified_at,invalidatedAt:e.info.invalidated_at})}function Te(e,t,a){let s=!t||e.domain.toLowerCase().includes(t.toLowerCase());return a.length&&(s=s&&a.includes(e.status)),s}const ke={[b().A$.Success]:0,[b().A$.Pending]:1,[b().A$.Failure]:2};const _e=(0,r().YK)({title:{id:"organizationEmailDomainsSubTab.title",defaultMessage:"Manage email domains"},description:{id:"organizationEmailDomainsSubTab.description",defaultMessage:"Verify email domains to manage matching user accounts and associated organization workspaces"},addDomainButton:{id:"organizationEmailDomainsSubTab.button.addEmailDomain",defaultMessage:"Add email domain"},goBack:{id:"organizationEmailDomainsSubTab.breadcrumb.goBack",defaultMessage:"General"}})},366951:(e,t,a)=>{a.d(t,{A:()=>n});a(296540);var s=a(474848);const n=function(){return(0,s.jsx)("div",{style:{},children:(0,s.jsx)(a(298697).A,{paragraphs:[{lineHeight:40,lineMargin:5,sectionWidths:[100],repeat:8,sectionMargin:10}]})})}},368332:(e,t,a)=>{a.d(t,{a:()=>o,k:()=>i});a(898992),a(672577);var s=()=>a(326399);const n={externalWorkspaceName:{defaultMessage:"External workspace",id:"managedUsers.externalWorkspaceName",description:"A generic name to replace the real name of an external workspace."}};function o(e){return e.formatMessage(n.externalWorkspaceName)}function i(e){if(!e)return;const t=Object.entries(s().iI).find((t=>{let[a,s]=t;return s===e}));if(t){return t[0]}}},371895:(e,t,a)=>{a.d(t,{u:()=>r});a(296540);var s=()=>a(959013),n=()=>a(534177),o=()=>a(566468),i=a(474848);function r(e){let{pageStatus:t}=e;return(0,i.jsx)(o().s7,{useThinTitle:!0,title:l(t)})}function l(e){switch(e){case"alive":return(0,i.jsx)(s().sA,{id:"adminContentSearchTab.pagesTable.pageStatusCell.active",defaultMessage:"Active"});case"in_trash":return(0,i.jsx)(s().sA,{id:"adminContentSearchTab.pagesTable.pageStatusCell.trash",defaultMessage:"In Trash"});case"deleted_from_trash":return(0,i.jsx)(s().sA,{id:"adminContentSearchTab.pagesTable.pageStatusCell.retained",defaultMessage:"Retained"});default:(0,n().HB)(e)}}},374255:(e,t,a)=>{a.d(t,{N:()=>f});a(581454),a(296540);var s=()=>a(56366),n=()=>a(401497),o=()=>a(959013),i=()=>a(381349),r=()=>a(534177),l=()=>a(284371),d=()=>a(898808),c=()=>a(298697),u=()=>a(187820),g=()=>a(16006),m=()=>a(125565),p=()=>a(453697),h=a(474848);function f(e){let{title:t,items:a,loading:s,error:o,titleStyle:i,containerStyle:r}=e;const d=(0,n().IS)((e=>({title:{alignSelf:"center",maxWidth:"100%",fontWeight:l().Wy.semibold,marginBottom:8,...l().RC},container:{flex:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",height:"100%",width:"100%",border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,padding:12,overflow:"hidden"}})),[]);return(0,h.jsxs)("div",{style:{...d.container,...r},children:[(0,h.jsx)(m().A,{style:{...d.title,...i},showTooltipWhenTruncated:!0,children:t}),s?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(v,{}),(0,h.jsx)(v,{}),(0,h.jsx)(v,{}),(0,h.jsx)(v,{}),(0,h.jsx)(v,{})]}):o?(0,h.jsx)(y,{}):a.map(((e,t)=>(0,h.jsx)(x,{item:e},t)))]})}function x(e){let{item:t}=e;const{store:a,caption:n}=t,i=(0,o().tz)(),l=b(),c=(0,s().K8)((()=>{switch(a.table){case"block":return(0,h.jsxs)("div",{style:l.nameAndIconContainer,children:[(0,h.jsx)(u().B6,{icon:a.getIcon(),iconRecordCategory:(0,u().Te)(a),size:18,isEmptyPage:!1,disabled:!0}),(0,h.jsx)(g().A,{store:a})]});case"notion_user":return(0,h.jsxs)("div",{style:l.nameAndIconContainer,children:[(0,h.jsx)(p().A,{userStore:a,size:18}),(0,h.jsx)(m().A,{children:a.getDisplayName(i)})]});case"team":const e=a.getName();return(0,h.jsxs)("div",{style:l.nameAndIconContainer,children:[(0,h.jsx)(d().x,{disabled:!0,store:a,size:20}),(0,h.jsx)(m().A,{children:e})]});default:(0,r().HB)(a)}}),[a,l.nameAndIconContainer,i]);return(0,h.jsxs)("div",{style:l.container,children:[(0,h.jsx)(m().A,{style:l.label,children:c}),(0,h.jsx)("div",{style:l.caption,children:(0,h.jsx)(m().A,{isSecondaryColor:!0,isSmall:!0,children:n})})]})}function v(){const e=b();return(0,h.jsxs)("div",{style:e.container,children:[(0,h.jsx)(m().A,{style:e.label,children:(0,h.jsx)(c().A,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})}),(0,h.jsx)("div",{style:e.loadingCaption,children:(0,h.jsx)(c().A,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})})]})}function y(){const e=b();return(0,h.jsx)("div",{style:e.container,children:(0,h.jsx)(m().A,{style:e.errorLabel,children:(0,h.jsx)(o().sA,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:(0,h.jsx)("br",{})}})})})}function b(){return(0,n().IS)((e=>({container:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingBlock:4,gap:4},nameAndIconContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start",gap:8,alignItems:"center",width:"100%"},label:{width:"100%"},caption:{display:"flex",justifyContent:"center",alignItems:"center"},loadingCaption:{display:"block",width:"50%"},errorLabel:{width:"100%",textAlign:"center",color:i().Ay.red}})),[])}},378941:(e,t,a)=>{a.d(t,{J7:()=>d,XC:()=>u,hs:()=>c});a(898992),a(354520),a(581454);var s=()=>a(857639),n=()=>a(792071),o=()=>a(277816),i=()=>a(534177),r=()=>a(449506),l=()=>a(630116);function d(e){let{trustedDomainIds:t,spaceStore:a}=e;return t.map((e=>{const t=l().LX.createChildStore(a,{table:o().A,id:e,spaceId:a.id});if(t.canRead())return t})).filter(i().O9)}async function c(e){let{environment:t,spaceId:a,currentUserId:n,organizationId:o}=e;const i=await r().callApi({eventName:"getTrustedDomainsNumberOfMembers",environment:t,data:{spaceId:a,organizationId:o},userId:n});return"failed"===i.type?(s().rateLimitedLog({from:"trustedDomainHelpers",level:"error",type:"getTrustedDomainsNumberOfMembersForSpaceFailed"}),[]):i.data.results}async function u(e){let{environment:t,spaceId:a}=e;const s=await r().callApi({eventName:"getTrustedDomainsForSpace",environment:t,data:{spaceId:a}});if("success"!==s.type)return[];return s.data.results.filter((e=>e.domain_link_sharing_enabled)).map((e=>n().Bj6.fromValue(o().A,e)))}},379990:(e,t,a)=>{a.d(t,{H:()=>c,K:()=>g});a(296540);var s=()=>a(401497),n=()=>a(96689),o=()=>a(959013),i=()=>a(534177),r=()=>a(187820),l=()=>a(125565),d=a(474848);function c(e){let{id:t,name:a,icon:i,subscriptionTier:c,memberCount:u,highlightIconContainer:m}=e;const p=(0,o().tz)(),h=i?{pointer:{table:n().NX,id:t,spaceId:t},icon:i}:void 0,f=(0,s().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",padding:"8px 0",width:"100%"},summaryContainer:{width:"calc(100% - 38px)"},iconContainer:{height:38,width:38,flexGrow:0,flexShrink:0,flexBasis:38,marginRight:12,display:"flex",justifyContent:"center",alignItems:"center",background:m?e.selectLightGray[50]:void 0,borderRadius:6},name:{fontSize:14,fontWeight:500},byline:{fontSize:12,opacity:.5}})),[m]);return(0,d.jsxs)("div",{style:f.container,children:[(0,d.jsx)("div",{style:f.iconContainer,children:(0,d.jsx)(r().B6,{disabled:!0,icon:h,iconRecordCategory:"workspace",isEmptyPage:!1,size:32,title:a,isLarge:!0,emojiSize:28,isRaw:!1})}),(0,d.jsxs)("div",{style:f.summaryContainer,children:[(0,d.jsx)(l().A,{style:f.name,showTooltipWhenTruncated:!0,children:a}),(0,d.jsx)(l().A,{style:f.byline,children:(0,d.jsx)(o().sA,{id:"identityAndProvisioning.claimWorkspaces.summaryByline",defaultMessage:"{subscriptionTier} · {memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{subscriptionTier:g(c,p),memberCount:u}})})]})]})}const u=(0,o().YK)({free:{id:"subscriptionTier.free",defaultMessage:"Free"},personal:{id:"subscriptionTier.personal",defaultMessage:"Personal Pro"},plus:{id:"subscriptionTier.plus",defaultMessage:"Plus"},business:{id:"subscriptionTier.business",defaultMessage:"Business"},enterprise:{id:"subscriptionTier.enterprise",defaultMessage:"Enterprise"}});function g(e,t){switch(e){case"personal_free":case"team_free":case"free":return t.formatMessage(u.free);case"student":case"personal":return t.formatMessage(u.personal);case"plus":return t.formatMessage(u.plus);case"business":return t.formatMessage(u.business);case"enterprise":return t.formatMessage(u.enterprise);default:(0,i().HB)(e)}}},404302:(e,t,a)=>{a.d(t,{p:()=>s});const s=["private","shared_internally","shared_externally","shared_to_web"]},412632:(e,t,a)=>{a.d(t,{u:()=>s});let s=function(e){return e.User="user",e.Domains="domains",e}({})},417555:(e,t,a)=>{a.d(t,{A:()=>d});a(296540);var s=()=>a(784892),n=()=>a(738418),o=()=>a(695608),i=()=>a(534177),r=()=>a(698449),l=a(474848);const d=function(e){let{isStrikedThrough:t,backgroundColor:d,onClickRemove:c,target:u,disabled:g,showInfoIcon:m,style:p,shouldWrap:h}=e;const f=(0,a(484714).v3)(),x=(0,a(959013).tz)(),{device:v}=f,y=(0,a(56366).K8)((()=>function(e){let t,{target:a,intl:s,showInfoIcon:d}=e;switch(a.type){case"newUser":t=a.value.email.trim();break;case"existingUser":t=(0,o().c6)(s,a.value);break;case"group":t=(0,r().Pf)({intl:s,groupName:a.value.name});break;default:(0,i().HB)(a)}return d?(c=t,(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,n().G)({marginRight:4,width:14,height:14}),c]})):t;var c}({target:u,intl:x,showInfoIcon:m})),[u,x,m]);return(0,l.jsx)(a(881690).A,{showRemoveButton:!0,isSingle:!0,isStrikedThrough:t,backgroundColor:d,format:v.isMobile?s().NY.Large:s().NY.Medium,onClickRemove:e=>function(e,t,a){e.stopPropagation(),t(a)}(e,c,u),disabled:g,disabledFeedback:!0,value:y,style:p,shouldWrap:h})}},421645:(e,t,a)=>{a.d(t,{E:()=>h});a(898992),a(354520),a(296540);var s=()=>a(56366),n=()=>a(401497),o=()=>a(449552),i=()=>a(234194),r=()=>a(433847),l=()=>a(68263),d=()=>a(959013),c=()=>a(108944),u=()=>a(566468),g=()=>a(112772),m=a(474848),p=function(e){return e.Shared="shared",e.Private="private",e.Hidden="hidden",e}(p||{});function h(e){let{blockStore:t,teamStore:a}=e;const h=(0,n().IS)((e=>({icon:{height:18,width:18,color:e.icon.tertiary,fill:"currentColor"}})),[]),f=(0,s().K8)((()=>{const e=(0,c().E)(t),a=(0,r().wD)(e),s=a.filter((e=>!(0,l().T6)(e)));return 1===s.length&&(0,l().B2)(s[0])?p.Private:a.length>0?p.Shared:p.Hidden}),[t]);return a?(0,m.jsx)(g().o,{useThinTitle:!0,teamStore:a}):function(){switch(f){case p.Shared:return(0,m.jsx)(u().s7,{useThinTitle:!0,icon:(0,i().M)(h.icon),title:(0,m.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.locationCell.shared",defaultMessage:"Shared"})});case p.Hidden:case p.Private:return(0,m.jsx)(u().s7,{useThinTitle:!0,icon:(0,o().g)(h.icon),title:(0,m.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.locationCell.private",defaultMessage:"Private"})})}}()}},443573:(e,t,a)=>{a.d(t,{$:()=>d,d:()=>l});a(581454);var s=a(296540),n=()=>a(187174),o=()=>a(803418),i=()=>a(763824),r=()=>a(625319);function l(e){const{visibleUsersForSpace:t,joinedUserIdsForSpace:a,loadVisibleUsersForSpace:o}=(0,s.useContext)(r().D),i=(0,s.useMemo)((()=>t[e]??[]),[t,e]),l=(0,s.useMemo)((()=>a[e]??[]),[a,e]),[d,c]=(0,s.useState)(!1);return(0,n().Yb)((async()=>{c(!0),await o(e),c(!1)}),[e,o]),{visibleUsers:i,joinedUserIds:l,loading:d}}function d(e){const{visibleUsersForSpace:t,loadVisibleUsersForSpace:a}=(0,s.useContext)(r().D),l=(0,s.useMemo)((()=>e.map((e=>e.id))),[e]),[d,c]=(0,s.useState)(!1);return(0,n().Yb)((async()=>{c(!0),await(0,i().lX)(l,o().O,(e=>a(e))),c(!1)}),[l,a]),{spaceUsers:t,loading:d}}},452864:(e,t,a)=>{a.d(t,{H:()=>h});a(296540);var s=()=>a(484714),n=()=>a(401497),o=()=>a(73514),i=()=>a(133033),r=()=>a(959013),l=()=>a(755636),d=()=>a(972435),c=()=>a(836251),u=()=>a(493823),g=()=>a(125565),m=a(474848);const p=(0,r().YK)({emptyAnalyticsHeading:{id:"workspaceAnalyticsTabs.empty.heading",defaultMessage:"No workspace analytics in the last 90 days"},emptyAnalyticsDescription:{id:"workspaceAnalyticsTabs.empty.description",defaultMessage:"It may take some time for workspace analytics information to appear."},disabledAnalyticsHeading:{id:"workspaceAnalyticsTabs.disabled.heading",defaultMessage:"Analytics are disabled"},disabledAnalyticsDescription:{id:"workspaceAnalyticsTabs.disabled.description",defaultMessage:"An admin has turned off page view recording for {name}.{br}This information will not be available in your workspace settings or on individual pages."},disabledAnalyticsDescriptionNoSpaceName:{id:"workspaceAnalyticsTabs.disabled.description.unnamed",defaultMessage:"An admin has turned off page view recording for this space.{br}This information will not be available in your workspace settings or on individual pages."}});function h(e){const t=(0,n().IS)((e=>({outerDiv:{display:"flex",flexDirection:"column",justifyContent:"center",height:"80%",gap:24},innerDiv:{display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",gap:4},header:{fontSize:16,fontWeight:500},analyticsIcon:{fill:e.text.secondary,padding:20,height:150,width:150},learnMoreIcon:{width:14,height:14},learnMore:{gap:4}})),[]),a=(0,s().v3)(),{type:h,spaceName:f}=e,x=function(e,t){switch(e){case"empty":return{heading:d().A.formatMessage(p.emptyAnalyticsHeading),description:d().A.formatMessage(p.emptyAnalyticsDescription)};case"disabled":const e=t?(0,m.jsx)(r().sA,{...p.disabledAnalyticsDescription,values:{name:t,br:(0,m.jsx)("br",{})}}):(0,m.jsx)(r().sA,{...p.disabledAnalyticsDescriptionNoSpaceName,values:{br:(0,m.jsx)("br",{})}});return{heading:d().A.formatMessage(p.disabledAnalyticsHeading),description:e}}}(h,f);return(0,m.jsx)("div",{style:t.outerDiv,children:(0,m.jsxs)("div",{style:t.innerDiv,children:[(0,o().C)(t.analyticsIcon),(0,m.jsx)(g().A,{isSecondaryColor:!0,style:t.header,children:x.heading}),(0,m.jsx)(g().A,{isSecondaryColor:!0,children:x.description}),(0,m.jsxs)(u().p,{onClick:()=>l().f({environment:a,url:(0,c().xS)("guides.workspaceAnalytics")}),style:t.learnMore,children:[(0,i().$)(t.learnMoreIcon),(0,m.jsx)(g().A,{isSmall:!0,children:(0,m.jsx)(r().sA,{id:"workspaceAnalyticsTabs.disabled.learnMore",defaultMessage:"Learn more"})})]})]})})}},459173:(e,t,a)=>{a.d(t,{$E:()=>f,MC:()=>m,Rv:()=>h,dU:()=>p});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698);var s=a(296540),n=()=>a(56366),o=()=>a(624090),i=()=>a(515358),r=()=>a(926401),l=()=>a(287882),d=()=>a(959013),c=()=>a(534177),u=()=>a(474747),g=a(474848);function m(e){let{spaceStore:t,selectedPageStatus:a,setSelectedPageStatus:i,onMenuClose:l}=e;const c=(0,d().tz)(),m=new Set(["alive","in_trash","deleted_from_trash"]),{currentDeleteFromTrashDelayInSeconds:x,currentPurgeDelayInSeconds:v}=(0,n().K8)((()=>({currentDeleteFromTrashDelayInSeconds:(0,o().XX)(t.getModel())/1e3,currentPurgeDelayInSeconds:(0,o().NA)(t.getModel())/1e3})),[t]),y=(0,s.useMemo)((()=>h({currentDeleteFromTrashDelayInSeconds:x,currentPurgeDelayInSeconds:v,intl:c})),[x,v,c]);return(0,g.jsx)(u().A,{pillIcon:r().n,allOptions:m,selectedOptions:a,setSelectedOption:i,setPillTitleStringToActiveSelection:!0,onMenuClose:l,getFormattedStringTitle:p,getFormattedStringCaption:y,getPillTitle:f})}function p(e){switch(e){case"alive":return(0,g.jsx)(d().sA,{...i().o.alive});case"in_trash":return(0,g.jsx)(d().sA,{...i().o.trash});case"deleted_from_trash":return(0,g.jsx)(d().sA,{...i().o.retained});default:(0,c().HB)(e)}}function h(e){return function(t){switch(t){case"alive":return null;case"in_trash":return(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.caption.trash",defaultMessage:"Trashed pages are automatically deleted after {duration}",values:{duration:(0,l().rN)(e.currentDeleteFromTrashDelayInSeconds,e.intl)}});case"deleted_from_trash":return(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.caption.internal",defaultMessage:"Pages deleted from Trash are retained for {duration}",values:{duration:(0,l().rN)(e.currentPurgeDelayInSeconds,e.intl)}});default:(0,c().HB)(t)}}}function f(e){if(0===e.length)return(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.default",defaultMessage:"Page status"});const t=e.includes("alive"),a=e.includes("in_trash"),s=e.includes("deleted_from_trash");return t?a&&s?(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.allStatusSelected",defaultMessage:"All pages"}):a||s?(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.inactiveStatusWithActive",defaultMessage:"Include {trashSelected, select, true {Trash} other {retained pages}}",values:{trashSelected:a}}):(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.activeOnly",defaultMessage:"Active pages"}):a&&s?(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.inactiveOnly",defaultMessage:"Inactive pages"}):(0,g.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.singleInactiveStatus",defaultMessage:"{trashSelected, select, true {Trash} other {Retained pages}} only",values:{trashSelected:a}})}},459401:(e,t,a)=>{a.d(t,{L:()=>r});a(898992),a(581454),a(941795);var s=a(296540),n=()=>a(401497),o=()=>a(802790),i=a(474848);function r(e){let{children:t}=e;const a=(0,n().IS)((e=>({divider:{color:e.stroke.secondary},container:{display:"flex",flexDirection:"column",gap:16,width:"100%",paddingTop:14}})),[]),r=s.Children.toArray(t);return(0,i.jsx)("div",{style:a.container,children:r.map(((e,t)=>(0,i.jsxs)(s.Fragment,{children:[e,t<r.length-1&&(0,i.jsx)(o().A,{dividerColor:a.divider.color,size:1})]},t)))})}},466492:(e,t,a)=>{a.d(t,{J:()=>i});a(296540);var s=()=>a(401497),n=()=>a(38337),o=a(474848);function i(e){let{left:t,right:a,showElevatedConsoleContainer:i}=e;const r=(0,s().IS)((e=>({grid:{display:"grid",gridTemplateColumns:"250px 1fr",background:i?e.surface.wash:void 0,height:"100%"},leftColumnFixed:{position:"relative",boxSizing:"border-box",maxHeight:"100%",overflow:"auto"},rightColumn:{position:"relative",background:e.surface.page,boxSizing:"border-box",maxHeight:"100%",overflow:"auto",...i?{borderRadius:12,border:"1px solid rgba(0, 0, 0, 0.08)",margin:"8px 8px 8px 0",boxShadow:"0 4px 0 -2px rgba(0, 0, 0, 0.04)",maxHeight:"calc(100% - 16px)"}:{}}})),[i]);return(0,o.jsxs)("div",{style:r.grid,children:[(0,o.jsx)("div",{style:r.leftColumnFixed,children:t}),(0,o.jsx)("div",{id:n().g5j,style:r.rightColumn,children:a})]})}},474747:(e,t,a)=>{a.d(t,{A:()=>j});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(56366),o=()=>a(401497),i=()=>a(959013),r=()=>a(56394),l=()=>a(722872),d=()=>a(962730),c=()=>a(377586),u=()=>a(970585),g=()=>a(493823),m=()=>a(760217),p=()=>a(928600),h=()=>a(939740),f=()=>a(897119),x=()=>a(204063),v=()=>a(73332),y=()=>a(89924),b=()=>a(806754),S=a(474848);function j(e){let{allOptions:t,selectedOptions:a,setSelectedOption:j,onMenuClose:w,pillIcon:A,setPillTitleStringToActiveSelection:M,getFormattedStringTitle:C,getFormattedStringCaption:I,getPillTitle:T}=e;const k=(0,n().uB)(void 0,u().A),_=(0,o().IS)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},icon:{width:16,marginRight:4,fill:"currentColor"},teamIcon:{marginRight:8}})),[]),[z,D]=(0,s.useState)(!1);function P(){D(!1),w&&w()}function N(){j&&j([])}function R(e){const t=a.includes(e)?[...a.filter((t=>t!==e))]:[...a,e];j&&j(t)}const B=(0,S.jsx)(r().A,{on:a.length>0,icon:A(_.icon),title:M&&a[0]?T(a):T([]),onClick:()=>D(!0),disabled:!j,hideChevron:!j});return j?(0,S.jsx)(b().A,{children:(0,S.jsx)(f().Ay,{popupType:c().n.Popup,placementToOrigin:d().W.Bottom,alignmentToOrigin:d().C.Start,open:z,render:function(){const e={key:"menuOptions",items:Array.from(t).map((e=>({key:e,action:()=>R(e),render:t=>(0,S.jsx)(m().A,{...t,icon:(0,S.jsx)(v().T,{checked:a.includes(e),onClick:()=>R(e),size:16}),focused:!1,title:C(e),caption:I(e),shouldWrapCaption:!0})}))),render:e=>(0,S.jsx)(y().A,{...e,title:null,loading:!1})};return(0,S.jsxs)("div",{style:_.container,children:[(0,S.jsx)(p().A,{menuType:l().gu.Popup,header:null,maxHeight:250,width:300,children:(0,S.jsx)(h().Ay,{type:h().Oh.Vertical,store:k,initialFocus:0,sections:[e]})}),(0,S.jsxs)(y().A,{topBorder:!0,style:_.footer,children:[(0,S.jsx)(g().p,{onClick:N,children:(0,S.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.clearButton",defaultMessage:"Clear"})}),(0,S.jsx)(x().A,{onClick:P,children:(0,S.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:P,keepFocus:!0,origin:B,preventScaleTransition:!0,trapFocus:!0})}):B}},477657:(e,t,a)=>{a.d(t,{t:()=>l});a(581454),a(296540);var s=()=>a(453697),n=()=>a(489143),o=()=>a(142448),i=()=>a(696601),r=a(474848);function l(e){const{users:t,totalMemberCount:a,showTooltip:l,isLoading:d}=e,c=(0,n().A)(),u=t.map((e=>({renderAvatar:()=>(0,r.jsx)(s().A,{userStore:e,size:o().tR,avatarShouldShowShadow:!1,hasTooltip:l,iconStyle:{fontSize:12,outlineOffset:0},delayThreshold:0,showAvatarInTooltip:!0},e.id)})));return(0,r.jsx)(o().Qp,{avatarStyles:c.roundAvatarBorder,avatars:u,totalCount:a,renderOverflowTooltip:l?()=>(0,r.jsx)(i().A,{userStores:t}):void 0,isLoading:d})}},480795:(e,t,a)=>{a.d(t,{N:()=>l});var s=a(296540),n=()=>a(187174),o=()=>a(803418),i=()=>a(763824),r=()=>a(625319);function l(e){const{teamAggregateDataForSpace:t,loadTeamsForSpace:a}=(0,s.useContext)(r().D),[l,d]=(0,s.useState)(!1);return(0,n().Yb)((async()=>{d(!0),await(0,i().lX)(e,o().O,(e=>a(e))),d(!1)}),[e,a]),{teamAggregateDataForSpace:t,loading:l}}},484578:(e,t,a)=>{a.d(t,{QX:()=>l,dK:()=>r});var s=()=>a(68263),n=()=>a(534177),o=()=>a(337567),i=()=>a(630116);function r(e){let{permissionItem:t,store:a}=e;return"display_only_inherited_permission"!==t.type&&(a instanceof i().md?"collection_property_permission"===t.type?a.pathIsDead()||!a.canAdmin():a.pathIsDead():a instanceof i().Bv?a.pathIsDead()||!function(e){return"display_only_overview_permission"===e.type}(t)&&!a.canAdmin()||(0,o().dL)(a):void(0,n().HB)(a))}function l(e){const t=e&&"from"in e?e.permissionItem:e;if(!t||!(0,s().Tt)(t.role))return"private";return(0,s().Ni)(t)&&"none"!==t.role?"unlisted":"open"}},486019:(e,t,a)=>{a.d(t,{F:()=>n});var s=()=>a(401497);function n(){return(0,s().IS)((e=>({leftContent:{display:"flex",flex:"auto",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start",width:"100%",margin:"0 auto 12px",paddingTop:4},rightContent:{display:"flex",flex:1,justifyContent:"flex-end",alignItems:"flex-start",width:"100%",margin:"0 auto 12px",minHeight:28,gap:8},tableHeader:{position:"relative",display:"flex",flexDirection:"row"}})),[])}},489143:(e,t,a)=>{a.d(t,{A:()=>o});var s=()=>a(401497),n=()=>a(284371);function o(){return(0,s().IS)((e=>({linkButton:{fontWeight:n().Wy.medium,fontSize:n().J.UIRegular.desktop,color:e.text.secondary},tableHeader:{background:e.surface.page},tableHeaderForModal:{background:e.surface.elevated},tableRow:{background:e.surface.page},tableRowForModal:{background:e.surface.elevated},roundAvatarBorder:{borderStyle:"solid",borderColor:e.white,borderWidth:2,borderRadius:"100%"}})),[])}},489538:(e,t,a)=>{a.d(t,{o:()=>n});a(296540);const s={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.76 13.75",directional:!0,svg:(0,a(474848).jsx)("path",{d:"M3.75 3.125c.345 0 .625.28.625.625v7.097l3.016-2.639a.625.625 0 0 1 .854.028l3.036 3.037 3.485-3.485H12.75a.625.625 0 1 1 0-1.25h3.5c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0V8.696l-3.902 3.902a.625.625 0 0 1-.884 0L7.774 9.534l-3.399 2.974v2.242c0 .483.392.875.875.875h11a.625.625 0 1 1 0 1.25h-11a2.125 2.125 0 0 1-2.125-2.125v-11c0-.345.28-.625.625-.625"})},n=(0,a(340498).wt)("chartLineUptrend",s)},490094:(e,t,a)=>{a.d(t,{J:()=>c});a(898992),a(354520),a(581454),a(737550),a(296540);var s=()=>a(534177),n=()=>a(722872),o=()=>a(928600),i=()=>a(939740),r=()=>a(89924),l=()=>a(250202),d=a(474848);function c(e){let{sortProperties:t,onClick:a,currentSorts:c}=e;const u=t.map((e=>{if(null==c?void 0:c.some((t=>{let{propertyId:a}=t;return a===e.id})))return;return{key:e.name,render:t=>(0,d.jsx)(l().G,{...t,propertySchema:e,format:l().e.Name}),action:()=>a(e.id)}})).filter(s().O9);return u.length?(0,d.jsx)(o().A,{menuType:n().gu.Popup,children:(0,d.jsx)(i().Ay,{type:i().Oh.Vertical,initialFocus:void 0,sections:[{key:"properties",render:e=>(0,d.jsx)(r().A,{...e}),items:u}]})}):null}},495427:(e,t,a)=>{a.d(t,{Jj:()=>p,Ke:()=>m,nv:()=>h});var s=a(296540),n=()=>a(401497),o=()=>a(199734),i=()=>a(959013),r=()=>a(496603),l=()=>a(972435),d=()=>a(623580),c=()=>a(204063),u=()=>a(190106),g=a(474848);let m=function(e){return e.OnChange="on-change",e.Button="button",e.AnimatedSearchButton="animated-search-button",e}({});const p=(0,i().YK)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.query.placeholder",defaultMessage:"Search by page ID, title or content"},titleOnlyPlaceholder:{id:"settings.workspaceAnalytics.contentTab.placeholder",defaultMessage:"Search by title"}});function h(e){let{mode:t,query:a,setQueryFilter:h,placeholderText:f,disabled:x}=e;const[v,y]=(0,s.useState)(a??""),b=function(e){return(0,n().IS)((t=>({searchIcon:{color:t.icon.tertiary,width:14},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:t.modalBackground,opacity:e?.5:1},button:{opacity:e?.5:1},searchInputContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center",flexDirection:"row"}})),[e])}(x),S=(0,s.useMemo)((()=>(0,r().sg)(h,500)),[h]),j=(0,s.useCallback)((e=>{void 0===e&&t===m.AnimatedSearchButton||(y(e??""),t!==m.OnChange&&t!==m.AnimatedSearchButton||S(e??""))}),[S,t]),w=(0,s.useCallback)((e=>{j(e.target.value)}),[j]);return t===m.AnimatedSearchButton?(0,g.jsx)("div",{style:b.searchInputContainer,children:(0,g.jsx)(u().A,{handleSearchQueryChange:j,handleEnterPressed:()=>h(v),handleInputCleared:()=>h(""),isSearchBarAlwaysOpen:!1})}):(0,g.jsx)(d().A,{value:v,style:b.input,left:(0,o().U)(b.searchIcon),placeholder:f||l().A.formatMessage(p.placeholder),focus:!x&&void 0,onChange:w,onSubmit:()=>h(v),disabled:x,right:t===m.Button?(0,g.jsx)(c().A,{onClick:()=>h(v),disabled:x,style:b.button,children:(0,g.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.query.searchButton",defaultMessage:"Search"})}):null})}},497799:(e,t,a)=>{a.d(t,{H:()=>d});a(898992),a(823215),a(354520),a(581454);var s=()=>a(56366),n=()=>a(798880),o=()=>a(322769),i=()=>a(630116),r=()=>a(134217),l=()=>a(749240);function d(e){let{spaceStore:t}=e;return(0,s().K8)((()=>{const e=l().subscriptionDataStoreInstance.state;if(!e)return{loading:!0};const a=r().Be(e);if(!a.every((e=>i().LU.createChildStore(t,{table:n().oo,id:e.userId}).isReady())))return{loading:!0};const s=a.filter(o().c7),d=a.filter(o().QE);return{loading:!1,members:s.map((e=>{let{userId:a}=e;return i().LU.createChildStore(t,{table:n().oo,id:a})})),guests:d.map((e=>{let{userId:a}=e;return i().LU.createChildStore(t,{table:n().oo,id:a})}))}}),[t])}},500128:(e,t,a)=>{a.d(t,{K:()=>i});a(296540);var s=()=>a(963589),n=()=>a(404520),o=a(474848);function i(e){const{children:t,...a}=e;return(0,s().X)("upgrade_system")?(0,o.jsx)(n().R,{...a}):t}},501497:(e,t,a)=>{a.d(t,{RC:()=>l,S6:()=>d,tD:()=>c});var s=()=>a(56366),n=()=>a(624090),o=()=>a(869190),i=()=>a(604995),r=()=>a(217429);function l(){return r().default.getConfigKey("permanently_delete_tree_queue_task_override","cdrr_enabled_timestamp_override")??n().mu}function d(){return(0,s().K8)((()=>l()),[])}function c(e,t,a){const s=(0,i().AA)(e,t);if((0,i().ak)(s)){const e=s.end.diff(s.start),t=e.as("year");if(t>=1)return(0,o().up)({years:Math.round(t)},a);const n=e.as("days");if(n>=1&&n<=45)return(0,o().up)({days:Math.round(n)},a);const i=e.as("months");if(i>=1)return(0,o().up)({months:Math.round(i)},a);if(n>=1)return(0,o().up)({days:Math.round(n)},a);const r=e.as("hours");if(r>=1)return(0,o().up)({hours:Math.round(r)},a);const l=e.as("minutes");return(0,o().up)({minutes:Math.round(l)},a)}return""}},505412:(e,t,a)=>{a.d(t,{Q:()=>s,z:()=>n});const s=80,n=200},511303:(e,t,a)=>{a.d(t,{$:()=>c,N:()=>d});var s=a(296540),n=()=>a(221844),o=()=>a(484714),i=()=>a(388821),r=()=>a(765957),l=a(474848);const d=(0,s.createContext)({organizationOwnerRecordCache:void 0,updateCacheWithRecordMap:e=>{}});function c(e){let{children:t}=e;const a=(0,o().v3)(),[n,c]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{const e=u(a);c(e)}),[a]);const g=(0,s.useCallback)((e=>{var t;const s=null===(t=r().default.state.currentUserStore)||void 0===t?void 0:t.id;if(!s||!e.data.organizationOwnerRecordMap)return;if(!e.data.organizationOwnerRecordMap)return;const n=i().RecordMap.create(e.data.organizationOwnerRecordMap);c((e=>{if(!e)return u(a);for(const{pointer:t,model:a}of n)e.setModelAndRole({pointer:t,userId:s},a,"editor");return u(a,e.data)}))}),[a]);return n?(0,l.jsx)(d.Provider,{value:{organizationOwnerRecordCache:n,updateCacheWithRecordMap:g},children:t}):null}function u(e,t){const a=new(n().A)({name:"organizationSettingsConsoleCache",data:t});return a.addCacheFallback(e.defaultRecordCache.inMemoryRecordCache),a}d.displayName="OrganizationCacheContext"},515358:(e,t,a)=>{a.d(t,{o:()=>o,p:()=>n});var s=()=>a(959013);const n=(0,s().YK)({private:{id:"adminContentSearchTab.pagesTable.audienceCell.private",defaultMessage:"Private"},sharedExternally:{id:"adminContentSearchTab.pagesTable.audienceCell.sharedExternally",defaultMessage:"Shared externally"},sharedInternally:{id:"adminContentSearchTab.pagesTable.audienceCell.sharedInternally",defaultMessage:"Shared internally"},publishedToWeb:{id:"adminContentSearchTab.pagesTable.audienceCell.publishedToWeb",defaultMessage:"Published to web"}}),o=(0,s().YK)({alive:{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.active",defaultMessage:"Active pages"},trash:{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.inTrash",defaultMessage:"In Trash"},retained:{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.retainedPages",defaultMessage:"Retained pages"}})},518658:(e,t,a)=>{a.d(t,{Z:()=>w});var s=a(296540),n=()=>a(484714),o=()=>a(56366),i=()=>a(401497),r=()=>a(597777),l=()=>a(803960),d=()=>a(42583),c=()=>a(959013),u=()=>a(534177),g=()=>a(284371),m=()=>a(30731),p=()=>a(722872),h=()=>a(780865),f=()=>a(963589),x=()=>a(704152),v=()=>a(760217),y=()=>a(933117),b=()=>a(873066),S=()=>a(821879),j=a(474848);function w(e){let{lastEditedTime:t,createdTime:a,setLastEditedTime:n,setCreatedOnTime:i}=e;const l=(0,c().tz)(),[p,f]=(0,s.useState)("createdTime"),x=(0,s.useMemo)((()=>{switch(p){case"createdTime":return a;case"lastEditedTime":return t;default:(0,u().HB)(p)}}),[t,a,p]),v=(0,s.useMemo)((()=>{switch(p){case"createdTime":return i;case"lastEditedTime":return n;default:(0,u().HB)(p)}}),[n,i,p]);const y=(0,o().K8)((()=>{if((0,m().jO)(x))switch(p){case"createdTime":return(0,j.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.filters.createdOn.title",defaultMessage:"Created on"});case"lastEditedTime":return(0,j.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.title",defaultMessage:"Last edited on"});default:(0,u().HB)(p)}const e=(0,m().ES)(x),t=h().tX(e,l,r().vz);switch(p){case"createdTime":return(0,j.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.filters.createdOn.titleWithDateRange",defaultMessage:"<b>Created on</b>: {dateRangeString}",values:{dateRangeString:t,b:e=>(0,j.jsx)("span",{style:{fontWeight:g().Wy.medium},children:e})}});case"lastEditedTime":return(0,j.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.titleWithDateRange",defaultMessage:"<b>Last edited on</b>: {dateRangeString}",values:{dateRangeString:t,b:e=>(0,j.jsx)("span",{style:{fontWeight:g().Wy.medium},children:e})}});default:(0,u().HB)(p)}}),[x,p,l]);return(0,j.jsx)(b().A,{header:(0,j.jsx)(A,{selectedItem:p,setSelectedItem:function(e){f(e)}}),mode:S().C.Pill,focused:!1,hideTime:!0,pillTitle:y,title:y,icon:d().D,value:x,showButtons:"footer",onChange:e=>{v(e)}})}function A(e){let{selectedItem:t,setSelectedItem:a}=e;const s=(0,f().X)("db_ux_mobile"),{isPhone:o}=(0,n().Y0)(),r=(0,i().IS)((e=>({button:{margin:"14px 12px 4px",padding:"2px 8px",width:"fit-content",borderRadius:4},text:{display:"flex",alignItems:"center",color:e.text.secondary,fill:e.icon.tertiary,fontWeight:500,fontSize:13},icon:{height:14,width:14,marginLeft:4}})),[]),d={width:190,items:["createdTime","lastEditedTime"],selectedItem:t,getKey:e=>e,onSelect:e=>a(e),renderItem:e=>(0,j.jsx)(v().A,{title:M(e.value),...e}),renderOrigin:e=>(0,j.jsx)(x().A,{...e,style:r.button,children:(0,j.jsxs)("div",{style:r.text,children:[M(t),(0,l().arrowChevronSingleDownIcon)(r.icon)]})})};return(0,j.jsx)(y().A,{...d,menuTypeOverride:(0,p().PK)(o,s)})}function M(e){return{lastEditedTime:(0,j.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.option",defaultMessage:"Last edited on"}),createdTime:(0,j.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.filters.createdOn.option",defaultMessage:"Created on"})}[e]}},522985:(e,t,a)=>{a.d(t,{J:()=>r});var s=()=>a(484714),n=()=>a(187174),o=()=>a(534177),i=()=>a(449506);function r(e){const{organizationId:t}=e,a=(0,s().v3)(),[{status:r,value:l},d]=(0,n().Yb)((async()=>{if(!t)return;const e=await i().callApi({eventName:"getDomainVerificationCodesForOrganization",environment:a,data:{organizationId:t}});if("success"===e.type)return e.data.domainVerifications;if("failed"===e.type)throw e.error;return(0,o().HB)(e)}),[a,t]);return{loading:"pending"===r,didError:"rejected"===r,domainVerifications:l,refetchDomainVerifications:d}}},541558:(e,t,a)=>{a.d(t,{Ay:()=>v,CL:()=>b,bL:()=>y});var s=a(296540),n=()=>a(484714),o=()=>a(244149),i=()=>a(959013),r=()=>a(436696),l=()=>a(755022),d=()=>a(722872),c=()=>a(963589),u=()=>a(760217),g=()=>a(406699),m=()=>a(933117),p=()=>a(150987),h=()=>a(272630),f=()=>a(992510),x=a(474848);const v=function(e){let{schema:t,sort:a,disabled:n,onChange:o,index:i,collectionViewType:r,collectionContextStore:l}=e;const d=t[a.property];return d?(0,x.jsxs)(s.Fragment,{children:[(0,x.jsx)(j,{disabled:n,schema:t,sort:a,onChange:o,index:i,collectionViewType:r,collectionContextStore:l,propertySchema:d}),(0,x.jsx)(S,{sort:a,index:i,onChange:o,collectionViewType:r,collectionContextStore:l,disabled:n})]}):null},y={ascending:(0,x.jsx)(i().sA,{defaultMessage:"Ascending",id:"collectionSortMenuRow.sortDirectionSelectMenu.ascending"}),descending:(0,x.jsx)(i().sA,{defaultMessage:"Descending",id:"collectionSortMenuRow.sortDirectionSelectMenu.descending"})},b=(0,i().YK)({menuTitle:{id:"collectionSortMenuRow.sortDirectionSelectMenu.title",defaultMessage:"Sort"},emptyPlaceholder:{id:"collectionSortMenuRow.sortDirectionSelectMenu.placeholder",defaultMessage:"Empty"}});function S(e){let{sort:t,index:a,onChange:s,collectionViewType:g,collectionContextStore:p,disabled:f}=e;const v=(0,c().X)("db_ux_mobile"),{isPhone:S}=(0,n().Y0)(),j=(0,n().v3)(),w=(0,i().tz)(),A=t.direction,M={menuTitle:w.formatMessage(b.menuTitle),items:[...o().FU],getKey:e=>e,selectedItem:A,disabled:f,onSelect:e=>{const n={...t,direction:e};s(a,n),p?(0,r().X)({environment:j,action:"set_sort_direction",sort_direction:e,collectionContextStore:p}):g&&(0,l().D)(j,{view_type:g,action:"set_sort_direction"})},renderItem:e=>(0,x.jsx)(u().A,{title:y[e.value],...e}),renderOrigin:e=>(0,x.jsx)(h().A,{...e,placeholder:w.formatMessage(b.emptyPlaceholder),title:A&&y[A],disabled:f,desktopStyle:{opacity:1}})};return(0,x.jsx)(m().A,{...M,menuTypeOverride:(0,d().PK)(S,v)},"direction")}function j(e){let{propertySchema:t,disabled:a,schema:s,sort:i,onChange:d,index:c,collectionViewType:u,collectionContextStore:m}=e;const h=(0,n().v3)(),{device:v}=h;return(0,x.jsx)(g().Ay,{popupType:v.isMobile?g().z7.SlideUp:g().z7.Popup,renderOrigin:e=>(0,x.jsx)(f().A,{...e,propertySchema:t,disabled:a,textWrapperStyle:{opacity:1}}),render:e=>(0,x.jsx)(p().A,{isRelationProperty:!1,schema:s,onAccept:e=>function(e,t,a,s,n,o,i){s(n,{...a,property:e}),i?(0,r().X)({environment:t,action:"set_sort_property",collectionContextStore:i}):o&&(0,l().D)(t,{view_type:o,action:"set_sort_property"})}(e,h,i,d,c,u,m),onClose:e.close,allowProperty:o().oH}),disabled:a})}},555893:(e,t,a)=>{a.d(t,{e:()=>g});var s=a(296540),n=()=>a(484714),o=()=>a(736501),i=()=>a(959013),r=()=>a(966505),l=()=>a(449506),d=()=>a(901389),c=()=>a(436572);const u=(0,i().YK)({getSupportAccessFailed:{defaultMessage:"Failed to load user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.getSupportAccessFailed"},setSupportAccessFailed:{defaultMessage:"Failed to update user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.setSupportAccessFailed"},toastDisabled:{id:"managedUsers.toastMessage.supportAccessDisabled",defaultMessage:"Successfully disabled user's support access status"},toastEnabled:{id:"managedUsers.toastMessage.supportAccessEnabled",defaultMessage:"Successfully enabled user's support access status"}});function g(e){const{spaceId:t,userId:a,isUserUnmanaged:g}=e,m=(0,i().tz)(),p=(0,n().v3)(),[h,f]=(0,s.useState)({loading:!1,error:void 0}),[x,v]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{!async function(){const e=await async function(){if(!a)return;if(g)return;f({loading:!0,error:void 0});const e=await l().callApi({eventName:"getDataAccessConsentForManagedUser",environment:p,data:{spaceId:t,userId:a}});return"failed"===e.type?(f({loading:!1,error:e.error}),void d().c1(m.formatMessage(u.getSupportAccessFailed))):(f({loading:!1,error:void 0}),e.data.expiryTime)}();v(e)}()}),[p,m,t,a,g]);const y=(0,s.useMemo)((()=>Boolean(x&&Number(x)>Date.now())),[x]),b=(0,s.useCallback)((async()=>{if(!a)return;f({loading:!0,error:void 0});const e=y?void 0:Date.now()+o().f,s=await l().callApi({eventName:"setDataAccessConsentForManagedUser",environment:p,data:{spaceId:t,userId:a,expiryTime:e}});if(r().MZ(p,{new_value:Boolean(e)}),"failed"===s.type)return f({loading:!1,error:s.error}),void d().c1(m.formatMessage(u.setSupportAccessFailed));v(e),e?c().D6({label:m.formatMessage(u.toastEnabled)}):c().D6({label:m.formatMessage(u.toastDisabled)}),f({loading:!1,error:void 0})}),[p,m,t,a,y]);return{isAccessGranted:y,toggleDataAccessConsent:b,loading:h.loading,error:h.error}}},566534:(e,t,a)=>{a.d(t,{U:()=>o});a(296540);var s=a(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"4.12 2.37 14.01 15.25",directional:!0,svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M6.25 2.375A2.125 2.125 0 0 0 4.125 4.5v11c0 1.174.951 2.125 2.125 2.125h7.5a2.125 2.125 0 0 0 2.125-2.125v-1.062h-1.25V15.5a.875.875 0 0 1-.875.875h-7.5a.875.875 0 0 1-.875-.875v-11c0-.483.392-.875.875-.875h7.5c.483 0 .875.392.875.875v1.125h1.25V4.5a2.125 2.125 0 0 0-2.125-2.125z"}),(0,s.jsx)("path",{d:"M17.942 9.558a.625.625 0 0 1 0 .884l-2.5 2.5a.625.625 0 1 1-.884-.884l1.408-1.408H10a.625.625 0 1 1 0-1.25h6.016l-1.458-1.458a.625.625 0 1 1 .884-.884z"})]})},o=(0,a(340498).wt)("arrowRightFromRectangle",n)},571499:(e,t,a)=>{a.d(t,{D:()=>l});a(581454);var s=a(296540),n=()=>a(401497),o=()=>a(493823),i=()=>a(554509),r=a(474848);function l(e){let{breadcrumbs:t,headerRight:a,children:l}=e;const d=(0,n().IS)((e=>({container:{margin:"0 auto"},top:{padding:"14px 16px",border:0,borderBottom:`1px solid ${e.stroke.secondary}`,display:"flex",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,backgroundColor:e.contentBackground,zIndex:10},breadcrumb:{display:"flex",justifyContent:"flex-start",width:"fit-content",alignItems:"center",gap:8},content:{padding:"14px 16px"}})),[]);return(0,r.jsxs)("div",{style:d.container,children:[(0,r.jsxs)("div",{style:d.top,children:[(0,r.jsx)("div",{style:d.breadcrumb,children:t.map(((e,t)=>{let a;return 0!==t&&(a=(0,r.jsx)(i().D,{styleName:"Body-14px/Regular",colorName:"quaternary",as:"span",children:"/"})),(0,r.jsxs)(s.Fragment,{children:[a,(0,r.jsx)(o().p,{onClick:e.onClick,isGray:Boolean(e.onClick),disabled:!e.onClick,children:e.message})]},`breadcrumb-${t}`)}))}),a]}),(0,r.jsx)("div",{style:d.content,children:l})]})}},573660:(e,t,a)=>{a.d(t,{c:()=>g,y:()=>u});a(581454);var s=a(296540),n=()=>a(401497),o=()=>a(802790),i=()=>a(364280),r=()=>a(554509),l=a(474848);const d=24,c=12;function u(e){let{title:t,titleId:a,byline:s,bylineId:o,item:u,onClick:g,padding:m,itemStyles:p,bylineStyles:h,styles:f,badge:x,shouldHighlight:v}=e;const y=(0,n().IS)((e=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:m,cursor:g?"pointer":"default",position:"relative"},settingLeft:{flex:3,display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",gap:6},settingRight:{flex:1,display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"flex-start"},highlight:{height:`calc(100% + ${c}px)`,width:`calc(100% + ${d}px)`,left:`-${d/2}px`,position:"absolute",backgroundColor:e.buttonHoveredBackground},byline:{lineHeight:"18px",...h}})),[m,g,h]),b={...y.settingContainer,...f};return(0,l.jsxs)("div",{style:b,...g?{onClick:g,role:"button",tabIndex:0}:{},children:[(0,l.jsxs)("div",{style:y.settingLeft,children:[(0,l.jsxs)(i().fI,{alignItems:"center",children:[(0,l.jsx)(r().D,{id:a,styleName:"UIRegular-14px/Medium",colorName:"primary",children:t}),x]}),s&&(0,l.jsx)(r().D,{id:o,styleName:"UIMedium-13px/Regular",colorName:"secondary",customStyles:y.byline,children:s})]}),(0,l.jsx)("div",{style:{...y.settingRight,...p},children:u}),v&&(0,l.jsx)("div",{style:y.highlight})]})}function g(e){const{items:t}=e,a=(0,n().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:16,width:"100%"},divider:{color:e.stroke.secondary}})),[]);return(0,l.jsx)("div",{style:a.container,children:t.map(((e,n)=>(0,l.jsxs)(s.Fragment,{children:[e,n<t.length-1?(0,l.jsx)(o().A,{dividerColor:a.divider.color,size:1}):null]},n)))})}},582684:(e,t,a)=>{a.d(t,{C:()=>n});a(296540);const s={viewBox:"0 0 20 20",fittedViewBox:"2.24 3.26 15.53 13.47",directional:!0,svg:(0,a(474848).jsx)("path",{d:"M14.075 3.45a.625.625 0 0 0-.884 0l-3.497 3.5a.625.625 0 0 0 .883.884l2.431-2.431v10.705a.625.625 0 0 0 1.25 0V5.402l2.431 2.43a.625.625 0 1 0 .884-.883zM2.427 12.167a.625.625 0 0 1 .884 0l2.43 2.431V3.893a.625.625 0 0 1 1.25 0v10.705l2.431-2.43a.625.625 0 0 1 .884.883L6.81 16.55a.625.625 0 0 1-.884 0l-3.498-3.498a.625.625 0 0 1 0-.884"})},n=(0,a(340498).wt)("arrowUpDown",s)},583521:(e,t,a)=>{a.d(t,{p:()=>C,I:()=>M});a(944114),a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(581454);var s=a(296540),n=()=>a(221844),o=()=>a(223116),i=()=>a(484714),r=()=>a(792071),l=()=>a(436604),d=()=>a(388821),c=()=>a(179034),u=()=>a(445120),g=()=>a(319625),m=()=>a(496603),p=()=>a(679924);var h=()=>a(449506),f=()=>a(904671),x=()=>a(30731),v=()=>a(963589),y=()=>a(630116);const b=20,S={query:"",createdBy:[],sharedWith:void 0,audience:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[],pageStatus:["alive"]},j={...S,audience:["shared_externally","shared_internally","shared_to_web"]},w={filters:S,pageStores:[],numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,loading:!1,error:void 0,shouldReRunSearch:!1,showSuggestions:!0},A={...w,filters:j};function M(e){let{spaceStore:t,userStore:a,hasUserConfirmedAcknowledgement:r,organizationId:d}=e;const S=(0,v().X)("enabled_bev_default_audience_filter")?A:w,j=(0,i().v3)(),[M,I]=(0,s.useState)(S),T=(0,s.useRef)(S.filters),k=(0,s.useRef)(t.id),_=(0,s.useCallback)((async e=>{let{restartSearch:s,ignoreFilterComparison:i}=e;if(!r)return;if(!i&&m().n4(M.filters,T.current)&&t.id===k.current)return;T.current=M.filters,k.current=t.id;let f=M.loading,v=M.error,S=M.hasNextPage,A=M.numPagesLoaded,_=M.paginationToken;if(s&&(I((e=>({...w,showSuggestions:e.showSuggestions,filters:e.filters}))),f=w.loading,v=w.error,S=w.hasNextPage,A=w.numPagesLoaded,_=w.paginationToken),S&&!f&&!v){I((e=>({...e,showSuggestions:!1,loading:!0})));try{const e=await h().callApi({eventName:"adminContentSearch",environment:j,data:{spaceId:t.id,organizationId:d,sort:{field:"relevance",direction:"desc"},limit:b,paginationToken:_,query:M.filters.query,audience:M.filters.audience,lastEditedTime:(0,x().ES)(M.filters.lastEditedTime),createdTime:(0,x().ES)(M.filters.createdTime),createdBy:M.filters.createdBy,sharedWith:M.filters.sharedWith,teamspaceIds:M.filters.teamIds,deletionStatuses:M.filters.pageStatus},headers:{[l().B3]:t.id}});if("failed"===e.type)throw e.error;!function(e,t){(0,p().v)(e,"admin_content_search_analytics_queried",t)}(j,{filters:M.filters,pageNumber:A});const s=e.data.paginationToken,i=e.data.recordIds,r=C({recordMapWithRoleJson:e.data.recordMap}),g=new(n().A)({name:o().a9,data:new(u().b)({[a.id]:r})});g.addCacheFallback(j.defaultRecordCache.inMemoryRecordCache),I((e=>{const t=[],a=new Set(e.pageStores.map((e=>e.id)));for(const s of i)if(!a.has(s)){const e=new(y().Bv)(j,{table:c().ev,id:s},{inMemoryRecordCache:g});t.push(e)}const n=[...e.pageStores,...t];return{...e,pageStores:n,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:s,hasNextPage:Boolean(s)}}))}catch(z){const e=(0,g().A)(z);I((t=>({...t,loading:!1,error:e})))}}}),[j,d,t,a,r,M.filters,M.loading,M.error,M.hasNextPage,M.numPagesLoaded,M.paginationToken]);(0,s.useEffect)((()=>{M.shouldReRunSearch&&(I((e=>({...e,shouldReRunSearch:!1}))),_({restartSearch:!0,ignoreFilterComparison:!1}))}),[M.shouldReRunSearch,_]);const z=(0,s.useCallback)((async()=>{M.shouldReRunSearch||await _({restartSearch:!1,ignoreFilterComparison:!0})}),[M.shouldReRunSearch,_]),D=(0,s.useCallback)((async e=>{await _({restartSearch:!0,ignoreFilterComparison:e||!1})}),[_]),P=(0,s.useCallback)(((e,t)=>{!function(e,t){(0,p().v)(e,"admin_content_search_analytics_filter_change",t)}(j,{newFilters:e}),I((a=>({...a,filters:{...a.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})))}),[j]),N=(0,s.useCallback)((async e=>{const a=await async function(e){let{environment:t,blockId:a,spaceStore:s}=e;const n=await h().callApi({eventName:"getPrivatePageInfo",environment:t,data:{id:a}});if("failed"===n.type)return;const i=f().$({environment:t,blockId:a,privateRecordCacheName:o().a9,ancestorData:n.data,spaceId:s.id});return i}({environment:j,blockId:e,spaceStore:t});a?I((t=>{const s=[];for(const n of t.pageStores)n.id===e?a.pathHasPurgedDeletedPermission()||s.push(a):s.push(n);return{...t,pageStores:s,loading:!1,error:void 0}})):await _({restartSearch:!0,ignoreFilterComparison:!1})}),[j,t,_]);return{showSuggestions:M.showSuggestions,filters:M.filters,pageStores:M.pageStores,loading:M.loading,error:M.error,hasNextPage:M.hasNextPage,loadNextPage:z,runNewSearch:D,setFilters:P,refreshSearchResult:N}}function C(e){const{recordMapWithRoleJson:t}=e,a=d().RecordMapWithRole.create(t),s=d().RecordMapWithRole.create();for(const{pointer:n,model:o}of a)if(o){const e=r().Bj6.fromValue(n.table,m().mg(o.__IM_SORRY__getValue()));s.setModelAndRole(n,e,"editor")}return s}},588264:(e,t,a)=>{a.d(t,{Y:()=>f});var s=a(296540),n=()=>a(56366),o=()=>a(401497),i=()=>a(835470),r=()=>a(959013),l=()=>a(920093),d=()=>a(350188),c=()=>a(84817),u=()=>a(623580),g=()=>a(7674),m=()=>a(554509),p=()=>a(107683),h=a(474848);function f(){const e=(0,n().O$)(d().A);return e.open?(0,h.jsx)(x,{state:e}):null}function x(e){let{state:t}=e;const[a,n]=s.useState(null),[d,f]=s.useState(""),x=(y=Boolean(a),(0,o().IS)((e=>({input:{padding:"10px, 8px",width:"100%",height:36,background:e.surface.wash,borderRadius:6,border:`1px solid ${y?e.stroke.uiRedPrimary:e.stroke.primary}`,...y?{boxShadow:e.inputRedFocusRing}:{boxShadow:"none"}}})),[y]));var y;const{title:b,message:S,acceptLabel:j,requiredInputValue:w,content:A,width:M}=t,C=s.useCallback((()=>{v(d)===v(w)?l().V({didConfirm:!0}):n((0,h.jsx)(r().sA,{id:"confirmDialogInput.incorrectInputError.message",defaultMessage:'Please type "{requiredInputValue}" to continue',values:{requiredInputValue:w}}))}),[d,w]);return(0,h.jsx)(p().s,{isOpen:!0,onDismiss:()=>l().V({didConfirm:!1}),areaConstraint:{height:{type:"unlimited",scroll:"allow"},width:{type:"fixed",length:M??420}},render:()=>(0,h.jsx)(g().tf,{showDismissButton:!1,header:(0,h.jsx)(g().YA,{iconAndTitle:(0,h.jsx)(g().ZQ,{iconGroup:i().F,iconColorName:"uiRedPrimary",title:b}),description:S}),footer:(0,h.jsx)(g().aO,{layout:"vertical",primaryButtons:[{buttonType:"destructive",label:j,onClick:C}],secondaryButtons:[{buttonType:"dismiss"}]}),children:(0,h.jsxs)(c().Y1,{gap:12,padding:2,children:[A,(0,h.jsxs)(c().Y1,{gap:4,children:[(0,h.jsx)(u().A,{style:x.input,value:d,onChange:e=>{n(void 0),f(e.target.value)},placeholder:w,onSubmit:C}),a?(0,h.jsx)(m().D,{styleName:"Caption-12px/Regular",colorName:"uiRedPrimary",children:a}):null]})]})})})}function v(e){return e.trim().toLowerCase().replace(/’/g,"'")}},590082:(e,t,a)=>{a.d(t,{WK:()=>g,iv:()=>m});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(484714),o=()=>a(56366),i=()=>a(124749),r=()=>a(107683),l=()=>a(466492),d=()=>a(625319),c=()=>a(687190),u=a(474848);const g=40;function m(e){let{sidebarProps:t,tabRenderer:a,tabNames:n,tabAccessor:o,defaultTab:i,sceneProps:d,isOpen:c,onDismiss:g}=e;const[m,h]=(0,s.useState)(i),f=a[m];return(0,u.jsx)(r().s,{isOpen:c,onDismiss:g,render:()=>(0,u.jsx)(l().J,{left:(0,u.jsx)(p,{sidebarProps:t,tabRenderer:a,tabNames:n,tabAccessor:o,selectedTabName:m,setSelectedTab:h}),right:(0,u.jsx)("div",{style:{width:"calc(100% - 8px)"},children:f.scene({...d,setSelectedTab:h})}),showElevatedConsoleContainer:!0}),areaConstraint:{width:{type:"fixed",length:1280},height:{type:"fixed",length:800}},borderRadius:20})}function p(e){let{sidebarProps:t,tabRenderer:a,tabNames:r,tabAccessor:l,selectedTabName:g,setSelectedTab:m}=e;const p=(0,n().v3)(),{availableOrganizationFeatures:h}=(0,s.useContext)(d().D),f=(0,i().$)(),x=(0,o().K8)((()=>r.filter((e=>l[e]({environment:p,currentUserStore:f,features:h})))),[f,p,l,r,h]),v=(0,s.useMemo)((()=>r.map((e=>({id:e,name:a[e].tab.name,icon:a[e].tab.icon,isSelected:g===e,onClick:()=>{m(e)},disabled:!x.includes(e)})))),[r,a,g,x,m]);return(0,u.jsx)(c().yc,{items:v,...t})}},592010:(e,t,a)=>{a.d(t,{Z:()=>m,b:()=>g});var s=a(296540),n=()=>a(56366),o=()=>a(515358),i=()=>a(433847),r=()=>a(959013),l=()=>a(534177),d=()=>a(108944),c=()=>a(566468),u=a(474848);function g(e){let{blockStore:t,spaceStore:a,useSecondaryColorTitle:o}=e;const[r,l]=(0,s.useState)(),g=(0,n().K8)((()=>{const e=d().E(t);return i().wD(e)}),[t]);(0,s.useEffect)((()=>{!async function(){if(!a)return;const e=await i().x8({spaceId:a.getSpaceId(),inheritedPermissionItemsForPage:g,loadRecordModel:a.loadRecordModel});l(e)}()}),[a,g]);const p=(0,s.useMemo)((()=>{if(r)return m(r)}),[r]);return(0,u.jsx)(c().s7,{useSecondaryColorTitle:o,useThinTitle:!0,title:p})}function m(e){switch(e){case"private":return(0,u.jsx)(r().sA,{...o().p.private});case"shared_internally":return(0,u.jsx)(r().sA,{...o().p.sharedInternally});case"shared_externally":return(0,u.jsx)(r().sA,{...o().p.sharedExternally});case"shared_to_web":return(0,u.jsx)(r().sA,{...o().p.publishedToWeb});default:(0,l().HB)(e)}}},593467:(e,t,a)=>{a.d(t,{Jb:()=>d,OJ:()=>h,fP:()=>x,i_:()=>f});a(898992),a(354520),a(581454);var s=()=>a(416845),n=()=>a(436604),o=()=>a(798880),i=()=>a(898486),r=()=>a(630116),l=()=>a(449506);const d="last_90_days",c={field:"last_active",direction:"desc"};async function u(e){const{environment:t,filter:a,spaceId:s,currentSpaceId:n,usersTabData:o}=e,i=null==o?void 0:o.dailyUsersData;return i&&a===(null==o?void 0:o.graphFilter)&&n===s?i:g({environment:t,spaceId:s,filter:a})}async function g(e){const{environment:t,spaceId:a,filter:s}=e,o=await l().callApi({eventName:"getDailyUsersAnalytics",environment:t,data:{spaceId:a,activeWindow:"all_time"===s?"last_90_days":s},headers:{[n().B3]:a}});return"failed"===o.type?o.body:o.data}async function m(e){const{environment:t,filter:a,sort:s,spaceStore:n,currentSpaceId:o,usersTabData:i}=e,r=null==i?void 0:i.tableFilter,l=null==i?void 0:i.userTableSort;return null!=i&&i.usersAndStats&&r===a&&l&&l.direction===s.direction&&l.field===s.field&&o===n.id?i.usersAndStats:p({environment:t,filter:a,sort:s,spaceStore:n})}async function p(e){const{environment:t,filter:a,sort:s,spaceStore:i}=e,d=await l().callApi({eventName:"loadWorkspaceAnalyticsUsers",environment:t,data:{spaceId:i.id,filters:{timeRange:a},sort:s},headers:{[n().B3]:i.id}});return"failed"===d.type?d.body:d.data.users.map((e=>({stats:e,userStore:r().LU.createChildStore(i,{table:o().oo,id:e.userId})})))}async function h(e){const{environment:t,spaceStore:a,currentTab:n,currentSpaceId:o,usersTabData:i,setState:r,graphFilter:l,tableFilter:g}=e,p=await async function(e){const{environment:t,spaceStore:a,currentSpaceId:n,usersTabData:o,graphFilter:i,tableFilter:r}=e,l=i||(null==o?void 0:o.graphFilter)||d,g=r||(null==o?void 0:o.tableFilter)||d,p=(null==o?void 0:o.userTableSort)||c,[h,f]=await Promise.all([u({environment:t,filter:l,spaceId:a.id,currentSpaceId:n,usersTabData:o}),m({environment:t,filter:g,sort:p,spaceStore:a,currentSpaceId:n,usersTabData:o})]),x=(0,s().OwV)(h)||!h?[]:h,v=(0,s().OwV)(f)||!f?[]:f;return{graphFilter:l,tableFilter:g,userTableSort:p,dailyUsersError:(0,s().OwV)(h)?h:void 0,dailyUsersData:x,usersAndStatsError:(0,s().OwV)(f)?f:void 0,usersAndStats:v}}({environment:t,spaceStore:a,currentSpaceId:o,usersTabData:i,graphFilter:l,tableFilter:g});r({currentSpaceId:a.id,currentTab:n,usersTabData:p})}async function f(e){const{environment:t,spaceStore:a}=e,n=e.nextGraphFilter||d,o=e.nextTableFilter||d,i=e.nextSort||c,[r,l]=await Promise.all([g({environment:t,filter:n,spaceId:a.id}),p({environment:t,filter:o,sort:i,spaceStore:a})]),u=(0,s().OwV)(r)||!r?[]:r,m=(0,s().OwV)(l)||!l?[]:l;return{graphFilter:n,tableFilter:o,userTableSort:i,dailyUsersError:(0,s().OwV)(r)?r:void 0,dailyUsersData:u,usersAndStatsError:(0,s().OwV)(l)?l:void 0,usersAndStats:m}}function x(e,t){if((0,s().vP6)(e)){const a=(0,i().DX)(t,e);if(a)return a}return t.formatMessage({defaultMessage:"Failed to retrieve analytics. Try refreshing and reopening the settings.",id:"workspaceAnalytics.usersTab.refershUserAnalytics.defaultFailed"})}},594137:(e,t,a)=>{a.d(t,{z:()=>r});var s=()=>a(484714),n=()=>a(187174),o=()=>a(534177),i=()=>a(449506);function r(e){const t=(0,s().v3)(),[{value:a,status:r}]=(0,n().Yb)((async()=>{if(!e)return{};const a=await i().callApi({eventName:"getAvailableOrganizationFeatures",environment:t,data:{organizationId:e}});if("success"===a.type)return a.data;if("failed"===a.type)throw a.error;(0,o().HB)(a)}),[t,e]);return{loading:"pending"===r,features:a??{}}}},602105:(e,t,a)=>{a.d(t,{V:()=>s,v:()=>n});const s={mini:3,small:4,default:6,medium:8,large:12,max:16},n="0px 4px 0px -2px #00000005"},609989:(e,t,a)=>{a.d(t,{$:()=>s,A:()=>o});const s={INVALID_DATE:"Invalid date",INVALID_RANGE:"Invalid range",NOT_SUPPORTED:"Not supported"};class n extends(()=>a(757695))().Store{getInitialState(){return{dateEdited:!1,timeEdited:!1,temporaryValue:{date:void 0,time:void 0},error:void 0}}}const o=n},617842:(e,t,a)=>{a.d(t,{M:()=>o});a(296540);var s=()=>a(493823),n=a(474848);function o(e){const{children:t,disabled:a,onClick:o}=e;return(0,n.jsx)(s().p,{onClick:o,disabled:a,style:{justifyContent:"center",marginLeft:6},isBlue:!a,isLightGray:a,children:t})}},618659:(e,t,a)=>{a.d(t,{DZ:()=>S,lz:()=>b,xF:()=>v});var s=a(296540),n=()=>a(484714),o=()=>a(56366),i=()=>a(401497),r=()=>a(925907),l=()=>a(798880),d=()=>a(959013),c=()=>a(884107),u=()=>a(436572),g=()=>a(630116),m=()=>a(285790),p=()=>a(859428),h=()=>a(125565),f=()=>a(566468),x=a(474848);function v(e){const t="userId"in e?e.userId:void 0,a="email"in e?e.email:void 0,r=(0,n().v3)(),m=(0,d().tz)(),[p,v]=(0,s.useState)(!1),j=(0,f().f0)({useThinTitle:!0,containerStyles:{width:"auto"},iconSize:34,icon:(0,x.jsx)("div",{})}),w=(0,i().IS)((t=>({...j,container:{cursor:"pointer",...j.container,...e.styles}})),[j,e.styles]),A=(0,o().K8)((()=>{if(t){const e=new(g().LU)(r,{table:l().oo,id:t});return{userStore:e,isReady:e.isReady(),userEmail:e.getEmail()}}}),[r,t]),M=t?null==A?void 0:A.userEmail:a;return null!=A&&A.isReady||a?(0,x.jsxs)("div",{style:w.container,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:[(0,x.jsx)("div",{style:w.summaryContainer,children:(0,x.jsx)(h().A,{isSecondaryColor:!0,style:w.name,showTooltipWhenTruncated:!0,children:M})}),(0,x.jsx)(b,{onCopyClick:async function(e){if(e.stopPropagation(),!M)return void u().D6({label:m.formatMessage(S.toastFailedToCopy)});const t=await c().R.clipboardActions.load();await t.copyString({stringValue:M,environment:r,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard}),u().D6({label:m.formatMessage(S.toastSuccessfulCopy)})},isHovered:p})]}):(0,x.jsx)(y,{})}function y(){return(0,x.jsx)(f().mf,{})}function b(e){let{onCopyClick:t,isHovered:a,containerStyles:s,size:n=20}=e;const o=(0,d().tz)().formatMessage(S.copy),l=(0,i().IS)((e=>({container:{display:"flex",background:e.surface.elevated,padding:2,boxShadow:e.shadowSM,borderRadius:6,marginLeft:8,marginRight:2,visibility:a?"visible":"hidden",...s},buttonStyle:{height:n,width:n,boxShadow:"none"},iconStyle:{color:e.text.secondary,fill:e.text.secondary}})),[a,n,s]);return(0,x.jsx)(p().A,{renderTooltip:()=>o,render:e=>(0,x.jsx)("div",{style:l.container,...e,children:(0,x.jsx)(m().A,{onClick:t,ariaLabel:o,hasBackground:!0,icon:r().n,showShadow:!0,iconStyle:l.iconStyle,style:l.buttonStyle})})})}const S=(0,d().YK)({copy:{defaultMessage:"Copy to Clipboard",id:"baseTable.emailCell.copyButton.copyToClipboard"},toastFailedToCopy:{defaultMessage:"Failed to copy",id:"baseTable.emailCell.copyButton.failedToCopy"},toastSuccessfulCopy:{defaultMessage:"Copied email to clipboard",id:"baseTable.emailCell.copyButton.successfulCopy"}})},625319:(e,t,a)=>{a.d(t,{D:()=>u,X:()=>g});a(944114);var s=a(296540),n=()=>a(484714),o=()=>a(852507),i=()=>a(386164),r=()=>a(449506),l=()=>a(594137),d=()=>a(511303),c=a(474848);const u=(0,s.createContext)({spaceIds:[],samlConfigs:[],teamIdsForSpace:{},teamAggregateDataForSpace:{},loadTeamsForSpace:function(e,t){return Promise.resolve()},visibleUsersForSpace:{},loadVisibleUsersForSpace:function(e,t){return Promise.resolve()},joinedUserIdsForSpace:{},permissionGroupsForSpace:{},loadPermissionGroupsForSpace:function(e,t){return Promise.resolve()},userPermissionGroupIdsBySpaceId:{},loadUserPermissionGroupIdsBySpaceId:function(e,t){return Promise.resolve()},refreshSamlConfigs:async()=>{},loadSamlConfigs:async()=>Promise.resolve([]),organizationMemberEmailDomains:[],memberEmailDomainsForSpace:{},guestEmailDomains:[],refreshOrganization:async function(){},availableOrganizationFeatures:{},regionsForSpaceMap:{}});function g(e){let{children:t,organizationId:a}=e;const g=(0,n().v3)(),[m,p]=(0,s.useState)([]),[h,f]=(0,s.useState)([]),[x,v]=(0,s.useState)({}),[y,b]=(0,s.useState)({}),[S,j]=(0,s.useState)({}),[w,A]=(0,s.useState)({}),[M,C]=(0,s.useState)({}),[I,T]=(0,s.useState)({}),[k,_]=(0,s.useState)({}),[z,D]=(0,s.useState)({}),[P,N]=(0,s.useState)([]),[R,B]=(0,s.useState)([]),{updateCacheWithRecordMap:L}=(0,s.useContext)(d().N),E=(0,s.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=await r().callApi({eventName:"getSpacesInOrganization",environment:g,data:{organizationId:a}});if("success"===t.type&&(p(t.data.spaceIds),v(t.data.regionMapping),L({data:t.data})),e)return;const s=await r().callApi({eventName:"getAllOrganizationMemberEmailDomains",environment:g,data:{organizationId:a}});"success"===s.type&&(B(s.data.orgMemberEmailDomains),D(s.data.memberEmailDomainsBySpace),N(s.data.guestEmailDomains))}),[g,a,L]),O=(0,s.useCallback)((async()=>{const e=await r().callApi({eventName:"getSamlConfigsForOrganization",environment:g,data:{organizationId:a}});"success"===e.type&&f(e.data.samlConfigs)}),[g,a]),U=(0,s.useCallback)((async()=>{if(h.length>0)return h;const e=await r().callApi({eventName:"getSamlConfigsForOrganization",environment:g,data:{organizationId:a}});return"success"===e.type?(f(e.data.samlConfigs),e.data.samlConfigs):[]}),[g,a,h]);(0,o().w)((()=>{E()}));const F=function(e,t){const{updateCacheWithRecordMap:a}=(0,s.useContext)(d().N),o=(0,n().v3)(),l=(0,s.useRef)({});return(0,s.useCallback)((async s=>{if(l.current[s])return;l.current[s]=!0;const n=await r().callApi({eventName:"getTeamsForOrganizationSpace",environment:o,data:{spaceId:s},headers:(0,i().WS)({spaceId:s})});"success"===n.type&&(a({data:n.data}),e(s,n.data.teamIds),t(s,n.data.teamAggregateData)),l.current[s]=!1}),[o,e,t,a])}((0,s.useCallback)(((e,t)=>{b((a=>({...a,[e]:t})))}),[]),(0,s.useCallback)(((e,t)=>{j((a=>({...a,[e]:t})))}),[])),H=(0,s.useCallback)((async(e,t)=>{const a=y[e],s=S[e];(void 0===a||void 0===s||t)&&await F(e)}),[F,S,y]),V=function(e,t){const a=(0,n().v3)(),o=(0,s.useRef)({});return(0,s.useCallback)((async s=>{if(void 0!==o.current[s])return void(await o.current[s]);const n=r().callApi({eventName:"getVisibleUsers",environment:a,data:{spaceId:s,supportsEdgeCache:!1},headers:(0,i().WS)({spaceId:s})}).then((a=>{if("success"===a.type){let n,o=[];"visibleUsers"in a.data?n=a.data.visibleUsers:(n=a.data.users,o=a.data.joinedMemberIds),e(s,n),t(s,o)}})).finally((()=>{delete o.current[s]}));o.current[s]=n,await n}),[a,t,e])}((0,s.useCallback)(((e,t)=>A((a=>({...a,[e]:t})))),[]),(0,s.useCallback)(((e,t)=>C((a=>({...a,[e]:t})))),[])),W=(0,s.useCallback)((async(e,t)=>{(void 0===w[e]||t)&&await V(e)}),[V,w]),q=(0,s.useCallback)(((e,t)=>T((a=>({...a,[e]:t})))),[]),G=function(e,t){const a=(0,n().v3)(),o=(0,s.useRef)({});return(0,s.useCallback)((async s=>{if(!o.current[s]){o.current[s]=!0;try{const n=await r().callApi({eventName:"getAllSpacePermissionGroupsWithMemberCount",environment:a,data:{spaceId:s,organizationId:e},headers:(0,i().WS)({cellId:void 0,spaceId:s})});"success"===n.type&&t(s,n.data.groupsWithMemberCount)}finally{o.current[s]=!1}}}),[a,e,t])}(a,q),K=(0,s.useCallback)((async(e,t)=>{(void 0===I[e]||t)&&await G(e)}),[G,I]),Y=function(e){const t=(0,n().v3)(),a=(0,s.useRef)({});return(0,s.useCallback)((async(s,n)=>{const o=[];for(const e of n){var l;null!==(l=a.current[s])&&void 0!==l&&l[e]||o.push(e)}if(0!==o.length){void 0===a.current[s]&&(a.current[s]={});for(const e of o)a.current[s][e]=!0;try{const a=await r().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:t,data:{spaceId:s,userIds:o},headers:(0,i().WS)({cellId:void 0,spaceId:s})});if("success"===a.type){const t={};for(const e of o)t[e]=a.data.userToGroupMap[e]??[];e(s,t)}}finally{for(const e of o)a.current[s][e]=!1}}}),[t,e])}((0,s.useCallback)(((e,t)=>_((a=>({...a,[e]:{...a[e],...t}})))),[])),Q=(0,s.useCallback)((async(e,t)=>{const a=[];for(const n of t){var s;null!==(s=k[e])&&void 0!==s&&s[n]||a.push(n)}a.length>0&&await Y(e,a)}),[Y,k]),{features:$}=(0,l().z)(a);return(0,c.jsx)(u.Provider,{value:{spaceIds:m,samlConfigs:h,teamIdsForSpace:y,teamAggregateDataForSpace:S,loadTeamsForSpace:H,visibleUsersForSpace:w,loadVisibleUsersForSpace:W,joinedUserIdsForSpace:M,permissionGroupsForSpace:I,loadPermissionGroupsForSpace:K,userPermissionGroupIdsBySpaceId:k,loadUserPermissionGroupIdsBySpaceId:Q,refreshSamlConfigs:O,loadSamlConfigs:U,organizationMemberEmailDomains:R,guestEmailDomains:P,memberEmailDomainsForSpace:z,refreshOrganization:E,availableOrganizationFeatures:$,regionsForSpaceMap:x},children:t})}u.displayName="OrganizationDataContext"},629148:(e,t,a)=>{a.d(t,{E:()=>d});var s=a(296540),n=()=>a(484714),o=()=>a(56366),i=()=>a(946064),r=()=>a(630116),l=()=>a(511303);function d(e){let{organizationId:t}=e;const a=(0,n().v3)(),{organizationOwnerRecordCache:d}=(0,s.useContext)(l().N);return(0,o().K8)((()=>{if(t)return new(r().Vl)(a,{table:i().y7,id:t},{inMemoryRecordCache:d})}),[a,t,d])}},643908:(e,t,a)=>{a.d(t,{A:()=>n});a(296540);var s=a(474848);const n=function(e){const t=(0,a(484714).v3)(),{render:n,requireUpgradeToTier:o,analyticsName:i,renderUpgradeTooltip:r,onUpgradeClick:l,alwaysAllowClick:d,tooltipPlacement:c,upgradeButtonDesktopStyle:u,upgradeButtonMobileStyle:g}=e;let m,{onClick:p,renderTooltip:h}=e;return o&&(m=(0,s.jsx)(a(118849).A,{subscriptionTier:o,analyticsName:i,desktopStyle:{display:"inline-block",pointerEvents:"none",...u},mobileStyle:{display:"inline-block",pointerEvents:"none",...g}}),d||(p=e=>{a(991249).K(t,{from:i,upsell:{type:"product",product:o,limit:{type:"none"},trialability:"none"}}),l&&l(e)},h=r)),(0,s.jsx)(a(859428).A,{renderTooltip:h||(()=>null),render:e=>n((0,a(553965).A)(e,{onClick:p}),m),disableTooltip:!h,placement:c})}},645109:(e,t,a)=>{a.d(t,{c:()=>g});var s=a(296540),n=()=>a(401497),o=()=>a(340498),i=()=>a(959013),r=()=>a(864943),l=()=>a(201361),d=()=>a(922442),c=()=>a(208603),u=a(474848);function g(e){let{openedFrom:t,styleOverrides:a}=e;const{animationState:g,animationTriggers:p}=(0,c().lP)(),h=(0,s.useMemo)((()=>{switch(t){case"business_trial_verify_pages_upsell":return"pageVerification";case"business_trial_private_teamspaces_upsell":return"privateTeamspaces";case"business_trial_ai_connectors_upsell":return"aiConnectors";case"upgrade_requests_page":return"free";default:return"blank"}}),[t]),f=(0,n().IS)((e=>({button:{display:"flex",alignItems:"center",flex:1},icon:{fill:e.icon.orangePrimary,width:o().Ev.sm,height:o().Ev.sm}})),[]);return(0,u.jsx)(r().A,{...p,size:"lg",iconLeading:e=>(0,c().sH)({icon:{type:"animated",iconFn:l().P},style:e,animationState:g}),iconStyle:f.icon,style:{...f.button,...a},onClick:()=>{(0,d().openSelfServeBusinessTrialStartModal)({openedFrom:t})},children:(0,u.jsx)(i().sA,{...m[h]})})}const m=(0,i().YK)({blank:{id:"selfServeBusinessTrial.tryButton.blank",defaultMessage:"Try"},privateTeamspaces:{id:"selfServeBusinessTrial.tryButton.privateTeamspaces",defaultMessage:"Try for free"},aiConnectors:{id:"selfServeBusinessTrial.tryButton.connectors",defaultMessage:"Try connectors"},pageVerification:{id:"selfServeBusinessTrial.tryButton.pageVerification",defaultMessage:"Try for free"},free:{id:"selfServeBusinessTrial.tryButton.free",defaultMessage:"Try for free"},thirtyDays:{id:"selfServeBusinessTrial.tryButton.30Days",defaultMessage:"Try for 30 days"}})},652399:(e,t,a)=>{a.d(t,{A:()=>w});a(296540);var s=()=>a(484714),n=()=>a(56366),o=()=>a(959013),i=()=>a(901389),r=()=>a(91709),l=()=>a(760217),d=()=>a(928600),c=()=>a(939740),u=()=>a(897119),g=()=>a(204063),m=()=>a(89924),p=()=>a(859428),h=()=>a(972435),f=()=>a(722872),x=()=>a(962730),v=()=>a(377586);class y extends(()=>a(757695))().Store{getInitialState(){return{open:!1}}}const b=new y;var S=a(474848);const j=(0,o().YK)({30:{id:"auditLogCSV.menu.30days",defaultMessage:"Last 30 days"},60:{id:"auditLogCSV.menu.60days",defaultMessage:"Last 60 days"},90:{id:"auditLogCSV.menu.90days",defaultMessage:"Last 90 days"},365:{id:"auditLogCSV.menu.365days",defaultMessage:"Last 1 year"},Export:{id:"auditLogCSV.menu.export",defaultMessage:"Export"}});function w(e){let{parentStore:t}=e;const a=(0,o().tz)(),s=(0,n().O$)(b);return(0,S.jsx)(u().Ay,{popupType:v().n.Popup,open:s.open,placementToOrigin:x().W.Bottom,alignmentToOrigin:x().C.End,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,keepFocus:!1,render:()=>(0,S.jsx)(T,{parentStore:t}),onDismiss:M,enableOutsideClickDismiss:!0,origin:(0,S.jsx)(p().A,{renderTooltip:()=>(0,S.jsx)(o().sA,{id:"auditLogCSV.popup.tooltip",defaultMessage:"Click for options to export the Audit Log in CSV form"}),render:e=>(0,S.jsx)(g().A,{size:"lg",onClick:()=>{return e=!s.open,void b.setState({open:e});var e},...e,children:a.formatMessage(j.Export)})})})}function A(e,t,a){r().uU(e,{targetPointer:a.pointer,exportOptions:{duration:t}})}function M(){b.setState({open:!1})}function C(e,t,a){return{key:e,render:()=>(0,S.jsx)(l().A,{focused:!1,title:h().A.formatMessage(j[e]),onClick:()=>{M(),A(t,e,a)}}),action:()=>{}}}function I(e,t,a){return{key:e,render:()=>(0,S.jsx)(l().A,{focused:!1,title:h().A.formatMessage(j[e]),onClick:()=>{i().ui({message:(0,S.jsx)(o().sA,{id:"auditLogCSV.menu.365days.prompt",defaultMessage:"Are you sure you want to export a one year CSV? You can't repeat this action while this is processing in the background."}),showCancel:!0,keepFocus:!0,items:[{label:(0,S.jsx)(o().sA,{id:"AuditLogCSV.exportConfirmationDialog.label",defaultMessage:"Export"}),color:"blue",onAccept:()=>{M(),A(t,e,a)}}]})}}),action:()=>{}}}function T(e){let{parentStore:t}=e;const a=(0,s().v3)(),n=[C(30,a,t),C(60,a,t),C(90,a,t),I(365,a,t)];return(0,S.jsx)(d().A,{menuType:f().gu.Popup,children:(0,S.jsx)(c().Ay,{type:c().Oh.Vertical,sections:[{key:"results",render:e=>(0,S.jsx)(m().A,{...e}),items:n}],initialFocus:0})})}},653088:(e,t,a)=>{a.d(t,{O:()=>y,i:()=>b});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(56366),o=()=>a(401497),i=()=>a(68263),r=()=>a(959013),l=()=>a(778078),d=()=>a(710149),c=()=>a(554509),u=()=>a(187820),g=()=>a(495427),m=()=>a(47095),p=()=>a(725036),h=()=>a(443573),f=()=>a(2609),x=()=>a(221723),v=a(474848);function y(e){let{spaceStores:t,selectedSpaceIds:a,onSelectHeader:o,onSelect:i,disabledRowMetadata:d}=e;const m=(0,n().K8)((()=>t.map((e=>e.id))),[t]),[h,y]=(0,s.useState)(""),{teamStores:S}=(0,p().o)(m),j=(0,n().K8)((()=>t.map((e=>{const t=S[e.id]??[],a=d&&d.disabledSpaceIds.includes(e.id);return{id:e.id,icon:(0,v.jsx)(u().B6,{size:x().iK,emojiSize:x().iK,disabled:!0,icon:e.getIcon(),iconRecordCategory:"workspace",isEmptyPage:!1,title:e.getName(),isLarge:!0,isRaw:!1}),name:e.getName(),byline:a?(0,v.jsx)(c().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:d.disabledByline}):(0,v.jsx)(b,{spaceId:e.id,teamCount:t.length})}}))),[t,S,d]),w=(0,l().Ay)(h,j,(e=>e.name??""));return(0,v.jsx)(f().p6,{items:w,selectedIds:a,disabledIds:(null==d?void 0:d.disabledSpaceIds)??[],onSelectHeader:o,onSelect:i,titleText:(0,v.jsx)(r().sA,{id:"orgConsole.people.modal.workspacesSelect.selectTitle",defaultMessage:"Select workspaces"}),headerText:(0,v.jsx)(r().sA,{id:"orgConsole.people.modal.workspacesSelect.headerRowTitle",defaultMessage:"Workspaces{selectedCount, plural, =0 {} one { ({selectedCount})} other { ({selectedCount})}}",values:{selectedCount:a.length}}),headerAction:(0,v.jsx)(g().nv,{mode:g().Ke.AnimatedSearchButton,query:h,setQueryFilter:y})})}function b(e){const{spaceId:t,teamCount:a,loading:s,styles:n}=e,{visibleUsers:l,loading:u}=(0,h().d)(t),g=l?l.filter((e=>(0,i().DH)(e.role))).length:0,p=(0,m().Z)(),f=(0,o().IS)((e=>({shimmer:{background:"rgba(255, 255, 255, 0.4)",marginTop:1,width:"80%"}})),[]);return s||u?(0,v.jsx)(d().A,{style:{...p.shortShimmer,...f.shimmer}}):(0,v.jsx)(c().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:n,children:(0,v.jsx)(r().sA,{id:"orgConsole.people.modal.workspacesSelect.workspaceRowByline",defaultMessage:"{teamCount, plural, one {# teamspace} other {# teamspaces}} · {memberCount, plural, one {# member} other {# members}}",values:{teamCount:a,memberCount:g}})})}},655546:(e,t,a)=>{a.d(t,{_:()=>l});a(296540);var s=()=>a(402390),n=()=>a(959013),o=()=>a(962730),i=()=>a(859428),r=a(474848);function l(e){let{num:t,abbreviateNumber:a}=e;const l=(0,n().tz)(),d=(0,s().H)(l),c=t.toLocaleString(d),u=Intl.NumberFormat(d,{notation:"compact",maximumFractionDigits:1}).format(t);return a?(0,r.jsx)(i().A,{placement:o().W.Bottom,render:e=>(0,r.jsx)("span",{...e,children:u}),renderTooltip:()=>c}):(0,r.jsx)("span",{children:c})}},663484:(e,t,a)=>{a.d(t,{r:()=>M});a(296540);var s=()=>a(484714),n=()=>a(56366),o=()=>a(401497),i=()=>a(584262),r=()=>a(452951),l=()=>a(30626),d=()=>a(657222),c=()=>a(959013),u=()=>a(884107),g=()=>a(755636),m=()=>a(492414),p=()=>a(722872),h=()=>a(962730),f=()=>a(463830),x=()=>a(760217),v=()=>a(406699),y=()=>a(285790),b=()=>a(928600),S=()=>a(939740),j=()=>a(897119),w=()=>a(89924),A=a(474848);function M(e){let{blockStore:t}=e;const a=(0,s().v3)(),M=(0,n().uB)(void 0,f().A),C=(0,o().IS)((e=>({changePermissionsIcon:{height:18,width:18,color:e.icon.primary,fill:"currentColor"},copyLinkIcon:{height:15,width:15,color:e.icon.primary,fill:"currentColor"},openLinkIcon:{height:15,width:15,color:e.icon.primary,fill:"currentColor",transform:"rotate(-45deg)"}})),[]);const I={key:"actions",render:e=>(0,A.jsx)(w().A,{...e}),items:[{key:"copy-link",render:e=>(0,A.jsx)(x().A,{...e,icon:(0,d().w)(C.copyLinkIcon),title:(0,A.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})}),action:async function(){const e=(0,m().Ay)({store:t,pageVisitSource:i().y8.CopyLink}),s=await u().R.clipboardActions.load();await s.copyString({environment:a,stringValue:e,copiedMessage:s.clipboardMessages.copiedLinkToClipboard}),M.setState({open:!1})}},{key:"open-page-in-new-tab",render:e=>(0,A.jsx)(x().A,{...e,icon:(0,r().Z)(C.openLinkIcon),title:(0,A.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.page.actions.openLink",defaultMessage:"Open in new tab"})}),action:function(){const e=(0,m().Ay)({store:t,pageVisitSource:i().y8.LinkInPage});g().f({environment:a,url:e}),M.setState({open:!1})}}]},T=(0,c().tz)();return(0,A.jsx)(v().Ay,{popupType:j().nl.Popup,alignmentToOrigin:h().C.Center,placementToOrigin:h().W.Right,style:{width:248},render:()=>(0,A.jsx)(b().A,{menuType:p().gu.Popup,width:248,children:(0,A.jsx)(S().Ay,{type:S().Oh.Vertical,initialFocus:void 0,sections:[I]})}),buttonPopupStore:M,renderOrigin:e=>(0,A.jsx)(y().A,{icon:l()._,ariaLabel:T.formatMessage({id:"pageCellActions.iconButton.ariaLabel",defaultMessage:"More actions"}),...e})})}},675801:(e,t,a)=>{a.d(t,{S:()=>l,i:()=>d});a(296540);var s=()=>a(959013),n=()=>a(751156),o=()=>a(946548),i=()=>a(573660),r=a(474848);function l(e){let{isEnabled:t,onToggle:a,disabled:n}=e;return(0,r.jsx)(i().y,{title:(0,r.jsx)(s().sA,{id:"identityAndProvisioning.scim.suppressScimInviteEmails.title",defaultMessage:"Suppress invite emails from SCIM provisioning"}),byline:(0,r.jsx)(s().sA,{id:"identityAndProvisioning.scim.suppressScimInviteEmails.message",defaultMessage:"Control if users will receive invite emails when provisioned by SCIM to workspaces and groups"}),item:(0,r.jsx)(o().A,{on:t,onClick:a,disabled:n})})}function d(e){let{environment:t,areScimInviteEmailsSuppressed:a,spaceStore:s}=e;n().createAndCommit({userAction:"ScimSection.SuppressScimInviteEmailsSetting",environment:t,canUndo:!0,perform:e=>{n().applyOperation({store:s,operation:{pointer:s.pointer,path:["settings","are_scim_invite_emails_suppressed"],command:"set",args:a},transaction:e})}})}},687190:(e,t,a)=>{a.d(t,{$n:()=>z,Ir:()=>D,uL:()=>P,yc:()=>_});a(581454),a(296540);var s=()=>a(484714),n=()=>a(56366),o=()=>a(401497),i=()=>a(737693),r=()=>a(959013),l=()=>a(284371),d=()=>a(159588),c=()=>a(124749),u=()=>a(843518),g=()=>a(644914),m=()=>a(962730),p=()=>a(224011),h=()=>a(948914),f=()=>a(197190),x=()=>a(710149),v=()=>a(554509),y=()=>a(187820),b=()=>a(566468),S=()=>a(859428),j=()=>a(453697),w=()=>a(236527),A=()=>a(490044),M=()=>a(27198),C=()=>a(590082),I=()=>a(51703),T=()=>a(629148),k=a(474848);function _(e){let{sidebarTitle:t,sidebarByline:a,sidebarTitleIcon:i,sidebarItemsTitle:r,topEntitySection:c,bottomEntitySection:x,items:y,hideSeparator:b,renderTooltip:j}=e;const w=(0,s().v3)(),{isElectron:M}=w.device,C=(0,n().K8)((()=>p().A.state.isFullScreen),[]),I=(0,n().O$)(h().b),T=(0,o().IS)((e=>({container:{background:e.surface.wash,boxShadow:b?void 0:e.sidebarBoxShadow,padding:8,width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:12},itemButton:{fontWeight:l().Wy.regular,color:e.text.primary,...d().hG},itemIcon:{fill:e.icon.primary,width:20},selectedItemIcon:{fill:e.icon.primary,width:20},selectedItemButton:{fontWeight:l().Wy.semibold,background:e.buttonHoveredBackground},disabledItemButton:{opacity:.3},sidebarItemContainer:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"row"},titleContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",padding:8,gap:10},titleTextContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",gap:2,width:"100%"},text:{...l().RC,width:"100%"},bottomEntitySection:{position:"absolute",bottom:0,paddingBottom:8,width:"calc(100% - 16px)"},sidebarItemsContainer:{display:"flex",flexDirection:"column",gap:1},sidebarItemsTitleContainer:{display:"flex",flexDirection:"column",padding:"4px 8px"}})),[b]),_=(0,g().Vl)({isExpanded:!0,isFullScreenDesktop:C,isShowingTabBar:I,isElectron:M});return(0,k.jsxs)("div",{style:T.container,children:[_?(0,k.jsx)(u().F,{isExpanded:!0}):null,c,(0,k.jsxs)("div",{style:T.titleContainer,children:[i,(0,k.jsxs)("div",{style:T.titleTextContainer,children:[(0,k.jsx)(v().D,{styleName:"UIHeading-17px/Semibold",customStyles:T.text,children:t}),(0,k.jsx)(v().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:T.text,children:a})]})]}),(0,k.jsxs)("div",{style:T.sidebarItemsContainer,children:[Boolean(r)?(0,k.jsx)("div",{style:T.sidebarItemsTitleContainer,children:(0,k.jsx)(v().D,{colorName:"secondary",styleName:"UISmall-12px/Semibold",children:r})}):null,y.map((e=>{const t=e.isSelected?{...T.itemButton,...T.selectedItemButton}:T.itemButton,a=e.disabled?{...t,...T.disabledItemButton}:t,s=e.isSelected?T.selectedItemIcon:T.itemIcon;return(0,k.jsx)(S().A,{disableTooltip:!e.disabled,renderTooltip:()=>null==j?void 0:j(e),render:t=>(0,k.jsx)(f().A,{style:a,disabled:e.disabled,...t,children:(0,k.jsx)(A().A,{style:T.sidebarItemContainer,left:e.icon(s),onClick:()=>{e.disabled||e.onClick()},children:e.name})},e.id),placement:m().W.Right},e.id)}))]}),(0,k.jsx)("div",{style:T.bottomEntitySection,children:x})]})}function z(e){let{userStore:t}=e;const a=(0,r().tz)(),s=(0,o().IS)((e=>({container:{padding:"0px 8px",background:e.surface.wash},iconStyle:{color:e.text.tertiary,fontWeight:500}})),[]),i=(0,c().$)(),l=t??i,d=void 0===t,u=(0,n().K8)((()=>{if(l)return{userName:l.getDisplayName(a),userEmail:l.getEmail()}}),[a,l]);return(0,k.jsxs)("div",{style:s.container,children:[d&&(0,k.jsx)(v().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,k.jsx)(r().sA,{id:"settingsConsole.sidebar.userSection.loggedInAs",defaultMessage:"Logged in as"})}),l&&u?(0,k.jsx)(b().s7,{title:u.userName,byline:u.userEmail,iconSize:C().WK,iconMargin:8,icon:(0,k.jsx)(j().A,{size:C().WK,userStore:l,iconStyle:s.iconStyle})}):(0,k.jsx)(w().a,{iconSize:C().WK})]})}function D(e){const{organizationId:t,iconSize:a=36}=e,{state:s}=(0,I().j)(),l=(0,T().E)({organizationId:t}),d=(0,o().IS)((e=>({container:{padding:"0px 8px",background:e.surface.wash}})),[]),c=(0,n().K8)((()=>l?(0,k.jsx)(y().B6,{disabled:!0,icon:l.getIcon(),defaultIcon:(0,i().V)(),isEmptyPage:!1,size:a}):(0,k.jsx)(x().A,{style:{height:a,width:a,borderRadius:4}})),[l,a]),u=(0,n().K8)((()=>l?l.getName():(0,k.jsx)(x().A,{style:{height:14,width:70,borderRadius:4}})),[l]),g=(0,n().K8)((()=>{var e;return s.value?(0,k.jsx)(M().Qq,{memberCount:(null===(e=s.value)||void 0===e?void 0:e.memberCount)||0}):(0,k.jsx)(x().A,{style:{height:14,width:100,borderRadius:4,marginTop:4}})}),[s.value]);return(0,k.jsxs)("div",{style:d.container,children:[(0,k.jsx)(v().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,k.jsx)(r().sA,{id:"settingsConsole.sidebar.childOfOrganization.preamble",defaultMessage:"Part of organization"})}),(0,k.jsx)(b().s7,{title:u,byline:g,iconSize:a,icon:c,iconMargin:8})]})}function P(){return(0,k.jsx)(r().sA,{defaultMessage:"Coming soon",id:"orgConsole.baseSidebar.comingSoon"})}},688437:(e,t,a)=>{a.d(t,{K4:()=>S,nb:()=>b,Ws:()=>j,x5:()=>A});var s=a(296540),n=()=>a(484714),o=()=>a(401497),i=()=>a(486345);a(898992),a(823215),a(581454);var r=()=>a(12193),l=()=>a(959013),d=()=>a(449506),c=()=>a(898486),u=()=>a(972435),g=()=>a(364280),m=()=>a(623580),p=()=>a(7674),h=()=>a(15144),f=()=>a(554509),x=()=>a(107683),v=()=>a(2609),y=a(474848);function b(e){const{organizationId:t,onDismiss:a,onSubmit:o}=e,r=A(),g=(0,n().v3)(),[m,h]=(0,s.useState)(),[f,b]=(0,s.useState)(),M=async()=>{if(!m)return b(w.invalidDomainError);if(!function(e){const{domain:t,allowSubDomain:a}=e,s=t.split(".").map((e=>e.replace(/\s/g,"").toLowerCase())),n=a?127:2;return s.length>=2&&s.length<=n&&s.every((e=>e.length>0&&e.length<=63))?s.join("."):void 0}({domain:m,allowSubDomain:!0}))return b(w.invalidDomainError);const e=await d().callApi({eventName:"createDomainVerificationCode",environment:g,data:{type:"org_saml_config",domain:m,organizationId:t}});"success"===e.type?o((0,i().pl)(e.data.domainVerification)):b((0,c().Hu)(u().A.getIntl(),e))};return(0,y.jsx)(x().s,{isOpen:!0,onDismiss:a,render:e=>{let{sizeRange:t}=e;return(0,y.jsx)(p().tf,{showDismissButton:!1,sizeRange:t,header:(0,y.jsx)(j,{}),footer:(0,y.jsx)(v().jl,{primaryText:(0,y.jsx)(l().sA,{...w.addButton}),primaryAction:M,secondaryText:(0,y.jsx)(l().sA,{...w.cancelButton}),secondaryAction:a}),children:(0,y.jsx)("div",{style:r.content,children:(0,y.jsx)(S,{pendingDomain:m,setPendingDomain:h,error:f})})})}})}function S(e){let{pendingDomain:t,setPendingDomain:a,error:s}=e;const n=A();return(0,y.jsxs)(g().VP,{gap:8,children:[(0,y.jsx)(f().D,{colorName:"secondary",styleName:"Body-12px/Medium",children:(0,y.jsx)(l().sA,{...w.inputLabel})}),(0,y.jsx)(m().A,{style:n.input,value:t,placeholder:u().A.formatMessage(w.emailDomainPlaceholder),onChange:e=>a(e.target.value),errorOutline:Boolean(s),inputElementAttributes:{required:!0,"aria-describedby":"domain-verification-validation-errors"}}),s?(0,y.jsx)("div",{style:n.error,children:(0,y.jsx)(h().R,{id:"domain-verification-validation-errors",error:s})}):null]})}function j(){const e=A();return(0,y.jsx)(v().rQ,{icon:(0,r().globeIcon)(e.headerIcon),title:(0,y.jsx)(l().sA,{...w.title}),byline:(0,y.jsx)(l().sA,{...w.byline})})}const w=(0,l().YK)({title:{id:"orgConsole.emailDomains.addEmailDomainModal.title",defaultMessage:"Add email domain"},byline:{id:"orgConsole.emailDomains.addEmailDomainModal.byline",defaultMessage:"Verify email domain to manage associated users and workspaces."},addButton:{id:"orgConsole.emailDomains.addEmailDomainModal.button.add",defaultMessage:"Get verification code"},cancelButton:{id:"orgConsole.emailDomains.addEmailDomainModal.button.cancel",defaultMessage:"Cancel"},inputLabel:{id:"orgConsole.emailDomains.addEmailDomainModal.domainInputLabel",defaultMessage:"Enter email domain"},invalidDomainError:{id:"orgConsole.emailDomains.addEmailDomainModal.invalidDomainError",defaultMessage:"Invalid domain, please check its format and spelling"},emailDomainPlaceholder:{id:"orgConsole.emailDomains.addEmailDomainModal.emailDomainPlaceholder",defaultMessage:"notion.so"}});function A(){return(0,o().IS)((e=>({headerIcon:{height:32,width:32,fill:e.icon.secondary},content:{width:v().J2},error:{height:15},input:{paddingTop:6,paddingBottom:6}})),[])}},696601:(e,t,a)=>{a.d(t,{A:()=>n});a(581454),a(296540);var s=a(474848);const n=function(e){let{userStores:t,permissionGroups:n}=e;const o=(0,a(401497).IS)((()=>({container:{display:"flex",flexDirection:"column",gap:4}})),[]);return(0,s.jsxs)("div",{style:o.container,children:[t.map((e=>(0,s.jsx)(a(453697).A,{userStore:e,type:"avatar-name-email",size:a(142448).tR,avatarShouldShowShadow:!1,hasTooltip:!1,iconStyle:{fontSize:12}},e.id))),null==n?void 0:n.map((e=>(0,s.jsx)(a(208261).h,{permissionGroup:e,type:"avatar-name-count"},e.group.group_id)))]})}},701144:(e,t,a)=>{a.d(t,{Ry:()=>c,b0:()=>g,j:()=>u,tE:()=>d});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(296540);var s=()=>a(234194),n=()=>a(404302),o=()=>a(959013),i=()=>a(534177),r=()=>a(474747),l=a(474848);function d(e){let{audienceValues:t,selectedAudience:a,setSelectedAudience:o,onMenuClose:i,setPillTitleStringToActiveSelection:d}=e;return(0,l.jsx)(r().A,{allOptions:t?new Set(t):new Set(n().p),getFormattedStringCaption:g,getFormattedStringTitle:u,getPillTitle:c,selectedOptions:a,setSelectedOption:o,pillIcon:s().M,onMenuClose:i,setPillTitleStringToActiveSelection:d})}function c(e){return e[0]?u(e[0]):(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.title",defaultMessage:"Audience"})}function u(e){switch(e){case"private":return(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.private",defaultMessage:"Private"});case"shared_externally":return(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.external",defaultMessage:"Shared externally"});case"shared_internally":return(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.internal",defaultMessage:"Shared internally"});case"shared_to_web":return(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.publishedToWeb",defaultMessage:"Shared to web"});default:(0,i().HB)(e)}}function g(e){switch(e){case"private":return(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.private",defaultMessage:"Pages that only a single workspace member has access to."});case"shared_externally":return(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.external",defaultMessage:"Pages that are shared with guests or connections."});case"shared_internally":return(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.internal",defaultMessage:"Pages that are shared with other workspace members."});case"shared_to_web":return(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.publishedToWeb",defaultMessage:"Pages that are available for anyone to see on the web."});default:(0,i().HB)(e)}}},701787:(e,t,a)=>{a.d(t,{p:()=>u});a(296540);var s=()=>a(401497),n=()=>a(406533),o=()=>a(284371),i=()=>a(623580),r=()=>a(554509),l=()=>a(618659),d=()=>a(859428),c=a(474848);function u(e){const t=(0,s().IS)((e=>({labelContainer:{display:"inline-flex",alignItems:"center",marginBottom:8},container:{position:"relative",width:"100%"},input:{padding:"6px 10px"},textBelowInput:{marginTop:6},helpIcon:{fill:e.icon.tertiary,marginLeft:4,height:14,width:14},inputContainer:{display:"flex",alignItems:"center"},inputElementWithCopyButton:{width:"calc(100% - 24px)",...o().RC},inputElementWhenMultiline:{minHeight:94},copyButton:{position:"absolute",right:4,height:"fit-content"}})),[]);return(0,c.jsxs)("div",{style:t.container,children:[(0,c.jsxs)("div",{style:t.labelContainer,children:[(0,c.jsx)(r().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:e.labelMessage}),e.helpMessage&&(0,c.jsx)(d().A,{renderTooltip:()=>e.helpMessage,render:e=>(0,c.jsx)("span",{...e,children:(0,n().questionMarkCircleIcon)(t.helpIcon)})})]}),(0,c.jsxs)("div",{style:t.inputContainer,children:[(0,c.jsx)(i().A,{textarea:e.multiline,value:e.value,placeholder:e.placeholder,disabled:e.disabled,onChange:e.onChange,onBlur:e.onBlur,style:t.input,inputStyle:{...e.onCopyClick?t.inputElementWithCopyButton:void 0,...e.multiline?t.inputElementWhenMultiline:void 0}}),e.onCopyClick?(0,c.jsx)(l().lz,{onCopyClick:e.onCopyClick,isHovered:!0,containerStyles:t.copyButton}):null]}),e.secondaryMessage?(0,c.jsx)(r().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:t.textBelowInput,children:e.secondaryMessage}):null,e.errorMessage?(0,c.jsx)(r().D,{styleName:"UISmall-12px/Regular",colorName:"uiRedPrimary",customStyles:t.textBelowInput,children:e.errorMessage}):null]})}},710967:(e,t,a)=>{a.d(t,{t:()=>m});var s=a(296540),n=()=>a(484714),o=()=>a(401497),i=()=>a(959013),r=()=>a(679924);var l=()=>a(91709),d=()=>a(864943),c=()=>a(826658),u=a(474848);const g=(0,i().YK)({exportButton:{id:"adminContentSearchTab.export",defaultMessage:"Export results"}});function m(e){let{spaceId:t,organizationId:a,filters:m,disabled:p,shouldUseIconButton:h}=e;const[f,x]=(0,s.useState)(!1),v=(0,n().v3)(),y=p||f,b=(0,o().IS)((e=>({button:{opacity:y?.5:1}})),[y]);async function S(){x(!0),function(e,t){(0,r().v)(e,"admin_content_search_analytics_export_requested",t)}(v,{filters:m}),await l().Lw(v,{spaceId:t,organizationId:a,filters:m}),x(!1)}return h?(0,u.jsx)(c().K,{onClick:S,disabled:y}):(0,u.jsx)(d().A,{size:"lg",style:b.button,disabled:y,onClick:S,children:(0,u.jsx)(i().sA,{...g.exportButton})})}},721249:(e,t,a)=>{a.d(t,{u:()=>x});a(944114);var s=a(296540),n=()=>a(484714),o=()=>a(56366),i=()=>a(959013),r=()=>a(966505),l=()=>a(449506),d=()=>a(901389),c=()=>a(436572),u=()=>a(892632),g=()=>a(898486),m=()=>a(765957),p=()=>a(125565),h=a(474848);const f=(0,i().YK)({uploadFailed:{defaultMessage:"Upload failed.",id:"identityAndProvisioning.managedUsers.modal.failedUpload"}});function x(e){const{userStore:t}=e,a=(0,i().tz)(),x=(0,n().v3)(),{userProfilePhoto:v,userName:y,userEmail:b,isSuspended:S}=(0,o().K8)((()=>({userProfilePhoto:t.getProfilePhoto(),userName:t.getFullName(a),userEmail:t.getEmail(),isSuspended:t.getIsSuspended()})),[t,a]),[j,w]=(0,s.useState)({loading:!1,error:void 0}),[A,M]=(0,s.useState)({value:v,loading:!1}),[C,I]=(0,s.useState)(y),[T,k]=(0,s.useState)(b);async function _(e){var s;const n=null===(s=m().default.state.currentSpaceStore)||void 0===s?void 0:s.id,o=[];A.value!==v&&o.push("profile_photo"),C!==y&&o.push("name"),T!==b&&o.push("email"),r().wF(x,{user_status:S?"suspended":"notSuspended",edited_fields:o});const{accept:u}=await d().Gh({message:(0,h.jsx)(p().A,{style:d().xh.title,children:(0,h.jsx)(i().sA,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.message",defaultMessage:"Confirm changes"})}),description:(0,h.jsxs)(p().A,{isMultiline:!0,isSecondaryColor:!0,children:[(0,h.jsx)(i().sA,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.description",defaultMessage:"Changes made to this user's account will be reflected across all workspaces they have access to."}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)(i().sA,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.descriptionForScim",defaultMessage:"If this user is being provisioned through SCIM, your changes be later overwritten by the next SCIM sync."})]}),acceptLabel:(0,h.jsx)(i().sA,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.acceptLabel",defaultMessage:"Save changes"}),cancelLabel:(0,h.jsx)(i().sA,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.cancelLabel",defaultMessage:"Go back"})});if(!u)return void z();w({loading:!0,error:void 0});const f=await l().callApi({eventName:"updateUserProfile",environment:x,data:{userId:t.id,spaceId:n,name:C,email:T,profilePhoto:(null==e?void 0:e.profilePhoto)??A.value}});if(r().Mh(x,{user_status:S?"suspended":"notSuspended",edited_fields:o}),"failed"===f.type)return d().f1((0,g().Hu)(a,f)),void w({loading:!1,error:f.error});c().D6({label:(0,h.jsx)(i().sA,{id:"managedUsers.toastMessage.updateProfileData.success",defaultMessage:"Successfully updated user's profile"})}),setTimeout((()=>{w({loading:!1,error:void 0})}),500)}function z(){M({value:v,loading:!1}),I(y),k(b)}return{hasStagedChanges:A.value!==v||C!==y||T!==b,saveChanges:_,resetState:z,loading:j.loading,error:j.error,profilePhoto:{value:A.value,loading:A.loading,set:function(){u().Bz({environment:x,onStart:()=>{M((e=>({...e,loading:!0})))},bucket:"public",onError:()=>{M((e=>({...e,loading:!1}))),d().f1(a.formatMessage(f.uploadFailed))},onComplete:e=>{const t=e[0];M({value:t,loading:!1})},accept:"image/*"})},setAndSave:function(){u().Bz({environment:x,onStart:()=>{M((e=>({...e,loading:!0})))},bucket:"public",onError:()=>{M((e=>({...e,loading:!1}))),d().f1(a.formatMessage(f.uploadFailed))},onComplete:e=>{const t=e[0];M({value:t,loading:!1}),_({profilePhoto:t})},accept:"image/*"})},remove:function(){M({value:"",loading:!1})},removeAndSave:function(){M({value:"",loading:!1}),_({profilePhoto:""})}},name:{value:C,set:I},email:{value:T,set:k}}}},721672:(e,t,a)=>{a.d(t,{A:()=>g,W:()=>u});var s=a(296540),n=()=>a(401497),o=()=>a(626466),i=()=>a(493823),r=()=>a(710149),l=()=>a(554509),d=()=>a(602105),c=a(474848);function u(e){let{headerText:t,mainText:a,bottom:u,onClick:g,isLoading:m,disabled:p}=e;const[h,f]=s.useState(!1),x=(0,n().IS)((e=>({loadingMainText:{width:140,borderRadius:4,height:25},loadingBottom:{width:120,borderRadius:4,height:24},container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:20,width:"100%",padding:16,borderRadius:d().V.medium,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary,boxShadow:d().v,height:"auto",flex:"1 1 200px",overflow:"hidden",position:"relative"},containerDark:{background:e.palette.translucentGray[30],borderColor:e.stroke.primary},content:{display:"flex",flexDirection:"column",gap:12,flex:"1 1 auto",minWidth:0,marginRight:32},textContainer:{display:"flex",flexDirection:"column",gap:8},mainText:{color:e.palette.gray[900],fontSize:20},iconButton:{display:"flex",justifyContent:"center",alignItems:"center",opacity:.5,borderRadius:"100%",background:h?e.palette.translucentGray[300]:e.palette.gray[100],height:20,width:20,flexShrink:0},icon:{height:20,width:20,padding:4,color:h?e.palette.gray[800]:e.icon.primary,transform:"rotate(270deg)"},bottomContainer:{minHeight:28}})),[h]);return(0,c.jsxs)(i().p,{onClick:g,style:x.container,shouldShrink:!0,hoveredStyle:{...x.container,...x.containerDark},pressedStyle:{...x.container,...x.containerDark},onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),disabled:p,children:[(0,c.jsxs)("div",{style:x.content,children:[(0,c.jsxs)("div",{style:x.textContainer,children:[(0,c.jsx)(l().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:t}),m?(0,c.jsx)(r().A,{style:x.loadingMainText}):(0,c.jsx)(l().D,{customStyles:x.mainText,styleName:"UITitle-Medium-20px/Semibold",colorName:"primary",children:a})]}),(0,c.jsx)("div",{style:x.bottomContainer,children:m?(0,c.jsx)(r().A,{style:x.loadingBottom}):u})]}),!p&&(0,c.jsx)("div",{style:x.iconButton,children:(0,o().arrowChevronSingleDownFillIcon)(x.icon)})]})}const g=u},725036:(e,t,a)=>{a.d(t,{o:()=>m});a(581454);var s=a(296540),n=()=>a(484714),o=()=>a(56366),i=()=>a(187174),r=()=>a(854150),l=()=>a(803418),d=()=>a(763824),c=()=>a(630116),u=()=>a(511303),g=()=>a(625319);function m(e,t){const a=(0,n().v3)(),{organizationOwnerRecordCache:m}=(0,s.useContext)(u().N),{teamIdsForSpace:p,loadTeamsForSpace:h}=(0,s.useContext)(g().D);(0,i().Yb)((async()=>{t||await(0,d().lX)(e,l().O,(async e=>h(e)))}),[e,h,t]);const{teamStoresForSpace:f,isLoading:x}=(0,o().K8)((()=>{const t={};let s=!1;for(const n of e){const e=p[n];s=s||void 0===e,t[n]=(null==e?void 0:e.map((e=>new(c().h4)(a,{id:e,table:r().yK},{inMemoryRecordCache:m}))))??[]}return{teamStoresForSpace:t,isLoading:s}}),[e,p,m,a]);return{teamStores:f,loading:x}}},731736:(e,t,a)=>{a.d(t,{e:()=>l});a(296540);var s=()=>a(401497),n=()=>a(922189),o=()=>a(96689),i=()=>a(99756),r=a(474848);function l(e){const{icon:t,spaceId:a,size:l,containerStyles:d}=e,c=(0,s().IS)((e=>({icon:{fill:e.icon.secondary}})),[]);return t&&a?(0,r.jsx)(i().A,{iconSize:l,type:"circle",iconType:"recordIcon",icon:{icon:t,pointer:{table:o().NX,id:a}},containerStyle:{background:"transparent",...d}}):(0,r.jsx)(i().A,{iconSize:l,type:"circle",iconType:"function",iconFn:n().personCircleFillIcon,iconStyle:c.icon,containerStyle:{background:"transparent",...d}})}},733815:(e,t,a)=>{a.d(t,{Z:()=>y});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(401497),o=()=>a(42583),i=()=>a(301608),r=()=>a(56394),l=()=>a(972435),d=()=>a(722872),c=()=>a(962730),u=()=>a(377586),g=()=>a(760217),m=()=>a(928600),p=()=>a(939740),h=()=>a(897119),f=()=>a(89924),x=()=>a(806754),v=a(474848);function y(e){const t=(0,n().IS)((e=>({popup:{width:125,marginLeft:5},pillStyle:{display:"flex",alignItems:"center"}})),[]),{currentFilter:a,hideAllTime:y}=e,[b,S]=(0,s.useState)(!1),j=i().jf.filter((e=>!y||"all_time"!==e)).map((t=>{const a=()=>{e.onChangeFilter(t),S(!1)};return{key:t,action:()=>{},render:()=>(0,v.jsx)(g().A,{focused:!1,onClick:a,title:l().A.formatMessage(i().jy[t])})}})),w=(0,v.jsx)(r().A,{on:Boolean(a),wrapStyle:t.pillStyle,icon:(0,o().D)({width:16,marginRight:6,fill:"currentColor"}),title:l().A.formatMessage(i().jy[a]),onClick:()=>{S(!0)}}),A=[{key:"filters",items:j,render:e=>(0,v.jsx)(f().A,{...e,title:null,loading:!1})}],M=(0,v.jsx)(m().A,{menuType:d().gu.Popup,header:null,children:(0,v.jsx)(p().Ay,{type:p().Oh.Vertical,initialFocus:0,sections:A})});return(0,v.jsx)(x().A,{marginAfter:!1,children:(0,v.jsx)(h().Ay,{popupType:u().n.Popup,placementToOrigin:c().W.Bottom,alignmentToOrigin:c().C.Start,open:b,render:()=>M,onDismiss:()=>S(!1),keepFocus:!0,origin:w,preventScaleTransition:!0,style:t.popup,trapFocus:!0,originGap:8})})}},738268:(e,t,a)=>{a.d(t,{Z:()=>g});a(296540);var s=()=>a(662303),n=()=>a(56366),o=()=>a(869190),i=()=>a(798880),r=()=>a(959013),l=()=>a(534177),d=()=>a(6208),c=()=>a(625383),u=a(474848);function g(e){let{pageStatus:t,lastEditedTime:a,lastEditedById:g,movedToTrashTime:m,deletedFromTrashTime:p}=e;const h=(0,d().y)(g),f=(0,n().K8)((()=>{if("alive"===t)return(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.lastEdited",defaultMessage:"Last edited by {name} on {time}",values:{name:h,time:(0,o().W_)(a,"month_day_time",s().locale)}});if((0,l().O9)(p)){return!!g&&(0,i().O5)(g)?(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.autoDeletedFromTrash",defaultMessage:"Automatically deleted from Trash on {time}",values:{time:(0,o().W_)(p,"month_day_time",s().locale)}}):(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.deletedFromTrash",defaultMessage:"Deleted from Trash by {name} on {time}",values:{name:h,time:(0,o().W_)(p,"month_day_time",s().locale)}})}return(0,l().O9)(m)?(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.movedToTrash",defaultMessage:"Moved to Trash by {name} on {time}",values:{name:h,time:(0,o().W_)(m,"month_day_time",s().locale)}}):void 0}),[p,g,a,m,t,h]);return(0,u.jsx)(c().d,{dateTs:a,tooltip:f})}},742784:(e,t,a)=>{a.r(t),a.d(t,{default:()=>K,getBlockExportTypeTitle:()=>Y,getBlockIncludeContentsTitle:()=>Q,getCollectionViewExportTypeTitle:()=>$});a(581454);var s=a(296540),n=()=>a(484714),o=()=>a(56366),i=()=>a(401497),r=()=>a(148307),l=()=>a(522419),d=()=>a(72135),c=()=>a(161479),u=()=>a(96689),g=()=>a(959013),m=()=>a(496603),p=()=>a(91709),h=()=>a(722872),f=()=>a(553965),x=()=>a(668766),v=()=>a(62856),y=()=>a(962730),b=()=>a(463830),S=()=>a(227440),j=()=>a(436529),w=()=>a(991249),A=()=>a(643908),M=()=>a(493823),C=()=>a(760217),I=()=>a(805751),T=()=>a(623580),k=()=>a(928600),_=()=>a(939740),z=()=>a(204063),D=()=>a(89924),P=()=>a(755535),N=()=>a(946548),R=()=>a(890434),B=()=>a(125565),L=()=>a(327165),E=()=>a(103448),O=a(474848);const U=["pdf","html","markdown"],F=["currentView","all"],H=1;function V(e){return e>.1&&e<2}const W=["everything","no_files"],q=(0,g().YK)({dialogLabel:{id:"exportModal.dialogLabel",defaultMessage:"Export"}});function G(e){let{value:t,onChange:a}=e;const n=(0,g().tz)(),o=s.useCallback((e=>{const t=e.target.value,s=(0,d().sA)(t)||(0,x().q)(t,n);let o;"object"==typeof s?o="percent"===s.format?s.value:s.value/100:"number"==typeof s&&(o=s/100),void 0!==o&&a(o)}),[a,n]),[i,r]=s.useState(!1),l=s.useMemo((()=>(0,d().ZV)(Math.round(100*t),"number",n)),[t,n]);return(0,O.jsx)(I().A,{debugName:"ExportModal",capture:i,children:(0,O.jsx)(T().A,{value:l,onChange:o,onFocus:()=>r(!0),onBlur:()=>r(!1),style:{width:60},inputStyle:{textAlign:"right"}})})}const K=function(){const e=(0,g().tz)(),t=(0,o().uB)(void 0,b().A),n=(0,o().uB)(void 0,b().A),i=(0,o().uB)(void 0,b().A),r=(0,o().uB)(void 0,b().A),l=(0,s.useCallback)((()=>(0,O.jsx)(me,{includeContentsPopupStore:r,exportTypePopupStore:i,pdfFormatPopupStore:n,collectionViewExportTypePopupStore:t})),[r,i,n,t]),d=(0,o().K8)((()=>j().Ay.state.open),[]);return(0,O.jsx)(a(641514).A,{ariaLabel:e.formatMessage(q.dialogLabel),onDismiss:ae,render:l,isOpen:d})};function Y(e){switch(e){case"pdf":return(0,O.jsx)(g().sA,{id:"exportModal.exportFormatButton.pdf.label",defaultMessage:"PDF"});case"markdown":return(0,O.jsx)(g().sA,{id:"exportModal.exportFormatButton.markdownAndCSV.label",defaultMessage:"Markdown & CSV"});case"html":return(0,O.jsx)(g().sA,{id:"exportModal.exportFormatButton.html.label",defaultMessage:"HTML"})}}function Q(e){switch(e){case"everything":return(0,O.jsx)(g().sA,{id:"exportModal.includeContentTypes.everything.label",defaultMessage:"Everything"});case"no_files":return(0,O.jsx)(g().sA,{id:"exportModal.includeContentTypes.no_files.label",defaultMessage:"No files or images"})}}function $(e){switch(e){case"all":return(0,O.jsx)(g().sA,{id:"exportModal.includeDatabases.all.label.defaultView",defaultMessage:"Default View"});case"currentView":return(0,O.jsx)(g().sA,{id:"exportModal.includeDatabases.currentView.label",defaultMessage:"Current view"})}}function X(e){switch(e){case"Letter":return(0,O.jsx)(g().sA,{id:"exportModal.pageFormatButton.letter.label",defaultMessage:"Letter"});case"A3":return(0,O.jsx)(g().sA,{id:"exportModal.pageFormatButton.a3.label",defaultMessage:"A3"});case"A4":return(0,O.jsx)(g().sA,{id:"exportModal.pageFormatButton.a4.label",defaultMessage:"A4"});case"Legal":return(0,O.jsx)(g().sA,{id:"exportModal.pageFormatButton.legal.label",defaultMessage:"Legal"});case"Tabloid":return(0,O.jsx)(g().sA,{id:"exportModal.pageFormatButton.tabloid.label",defaultMessage:"Tabloid"})}}function Z(){const e=j().Ay.state;return e.open&&(0,j().xt)(e)?void 0===e.exportOptions.scale?H:e.exportOptions.scale:H}function J(){return V(Z())}function ee(e){return{width:320,padding:24,fontSize:14,color:e.text.secondary}}function te(){const e=(0,i().DP)();return(0,O.jsx)("div",{style:ee(e),children:(0,O.jsx)(g().sA,{defaultMessage:"Please go online to export.",id:"exportModal.offlineMessage.description"})})}function ae(){p()._3()}function se(e){const t=j().Ay.state;if(t.open){if((0,j().xt)(t)&&!p().Dd(e))return void w().K(e,{from:"export_modal",upsell:{type:"product",product:"enterprise",limit:{type:"none"},trialability:"none"}});p().z_(e,{...t,recursive:!t.recursive})}}function ne(e){if(!J())return;const t=j().Ay.state;t.open&&(p()._3(),void 0===t.exportOptions.flattenExportFiletree&&e.device.isWindows&&(t.exportOptions.flattenExportFiletree=!0),t.root.table===u().NX?p().P_(e,{spaceId:t.root.id,exportOptions:t.exportOptions,shouldExportComments:t.shouldExportComments}):p().UP(e,{block:{id:t.root.id,spaceId:(0,c().e)(t.root.spaceId)},recursive:t.recursive,exportOptions:t.exportOptions,shouldExportComments:t.shouldExportComments}))}function oe(e,t,a,s){const n=j().Ay.state,o=n.open&&"pdf"===e&&"space"===n.root.table&&!p().Dd(s)&&"business";return{key:e,action:()=>{t.close(),o?w().K(s,{from:"export_modal",upsell:{type:"product",product:o,limit:{type:"none"},trialability:"none"}}):function(e,t,a){const s=j().Ay.state;if(!s.open)return;const{exportOptions:n}=s;if(e===n.exportType)return;let o;o="pdf"===e?{...n,exportType:"pdf",pdfFormat:p().id(t)}:{...n,exportType:e},p().z_(a,{...s,exportOptions:o})}(e,a,s)},render:t=>{let{onClick:a,key:s,...n}=t;return(0,O.jsx)(A().A,{requireUpgradeToTier:o,analyticsName:"export_modal",onClick:a,render:(t,a)=>(0,O.jsx)(C().A,{...(0,f().A)(n,t),title:Y(e),right:a}),renderUpgradeTooltip:()=>(0,O.jsx)(E().A,{imageURL:r().A.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:(0,O.jsx)(g().sA,{defaultMessage:"Upgrade to export the workspace as PDFs",id:"exportModal.workspacePdfUpgradeTooltip.title"}),caption:(0,O.jsx)(g().sA,{defaultMessage:"Creates a zip file containing all pages in the workspace as PDF files.",id:"exportModal.workspacePdfUpgradeTooltip.caption"})}),tooltipPlacement:y().W.Left,upgradeButtonDesktopStyle:{marginTop:2}},s)}}}function ie(e,t,a){return{key:e,action:()=>{t.close(),function(e,t){const a=j().Ay.state;a.open&&p().z_(t,{...a,exportOptions:{...a.exportOptions,includeContents:e}})}(e,a)},render:t=>(0,O.jsx)(C().A,{...t,title:Q(e)})}}function re(e,t,a){return{key:e,action:()=>{t.close(),function(e,t){const a=j().Ay.state;a.open&&p().z_(t,{...a,exportOptions:{...a.exportOptions,collectionViewExportType:e}})}(e,a)},render:t=>(0,O.jsx)(C().A,{...t,title:$(e)})}}function le(e,t,a){return{key:e,action:()=>{t.close(),function(e,t){const a=j().Ay.state;a.open&&(0,j().xt)(a)&&p().z_(t,{...a,exportOptions:{...a.exportOptions,pdfFormat:e}})}(e,a)},render:t=>(0,O.jsx)(C().A,{...t,title:X(e)})}}function de(){const e=(0,i().DP)(),t=(0,n().v3)(),a=(0,o().K8)((()=>Z()),[]),s=(0,v().A)(!0,500,100);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",height:32},children:[(0,O.jsx)(B().A,{style:{color:e.text.tertiary},children:(0,O.jsx)(g().sA,{id:"exportModal.pageScale.description",defaultMessage:"Scale percent"})}),(0,O.jsx)(G,{value:a,onChange:e=>function(e,t){const a=j().Ay.state;a.open&&(0,j().xt)(a)&&p().z_(t,{...a,exportOptions:{...a.exportOptions,scale:e}})}(e,t)})]}),!V(a)&&s?(0,O.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:32,padding:"4px 0"},children:(0,O.jsx)(B().A,{isSmall:!0,isMultiline:!0,style:{color:e.errorText},children:(0,O.jsx)(g().sA,{id:"exportModal.pageScale.invalidScaleError",defaultMessage:"Scale percent must be a number between 10 and 200"})})}):void 0]})}function ce(e){let{modalState:t,includeContentsPopupStore:a,exportTypePopupStore:s,pdfFormatPopupStore:d,collectionViewExportTypePopupStore:c}=e;const u=(0,i().DP)(),m=(0,n().v3)(),h=(0,o().uB)(c,b().A),f=(0,o().uB)(d,b().A),x=(0,o().uB)(s,b().A),v=(0,o().uB)(a,b().A),{device:S,currentUser:w}=m,C=(0,o().K8)((()=>(0,j().xt)(t)&&!p().Dd(m)&&"business"),[t,m]),I=m.device.isWindows,T=(0,o().K8)((()=>J()),[]),k=(0,o().K8)((()=>$(t.exportOptions.collectionViewExportType||"currentView")),[t]);return(0,O.jsxs)("div",{style:{width:320,padding:24,fontSize:14},children:[(0,O.jsx)(P().A,{isMenuItem:S.isMobile,buttonPopupStore:x,label:(0,O.jsx)(g().sA,{id:"exportModal.exportFormat.description",defaultMessage:"Export format"}),selectedTitle:Y(t.exportOptions.exportType),renderMenuSections:e=>[{key:"exportType",render:e=>(0,O.jsx)(D().A,{...e}),items:U.map((t=>oe(t,e,w.id,m)))}]}),t.exportOptions.collectionViewExportType?(0,O.jsx)(P().A,{isMenuItem:S.isMobile,buttonPopupStore:h,label:(0,O.jsx)(g().sA,{id:"exportModal.includeDatabases.description",defaultMessage:"Include databases"}),selectedTitle:k,renderMenuSections:e=>[{key:"exportCollection",render:e=>(0,O.jsx)(D().A,{...e}),items:F.map((t=>re(t,e,m)))}]}):void 0,(0,O.jsx)(P().A,{isMenuItem:S.isMobile,buttonPopupStore:v,label:(0,O.jsx)(g().sA,{id:"exportModal.includeContents.description",defaultMessage:"Include content"}),selectedTitle:Q(t.exportOptions.includeContents||"everything"),renderMenuSections:e=>[{key:"includeContents",render:e=>(0,O.jsx)(D().A,{...e}),items:W.map((t=>ie(t,e,m)))}]}),(0,j().xt)(t)?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(P().A,{isMenuItem:S.isMobile,buttonPopupStore:f,label:(0,O.jsx)(g().sA,{id:"exportModal.pageFormat.description",defaultMessage:"Page format"}),selectedTitle:X(t.exportOptions.pdfFormat),renderMenuSections:e=>[{key:"isoPaperFormats",render:e=>(0,O.jsx)(D().A,{...e}),items:l().yC.map((t=>le(t,e,m)))},{key:"otherPaperFormats",render:e=>(0,O.jsx)(D().A,{topBorder:!0,...e}),items:l().hj.map((t=>le(t,e,m)))}]}),(0,O.jsx)(de,{})]}):void 0,"space"!==t.root.table?(0,O.jsx)(A().A,{requireUpgradeToTier:C,analyticsName:"export_modal",onClick:()=>se(m),render:(e,a)=>(0,O.jsxs)("div",{...e,style:{display:"flex",alignItems:"center",height:32},children:[(0,O.jsxs)("div",{style:{display:"flex",alignItems:"center",marginRight:"auto",color:u.text.tertiary,fontSize:14},children:[(0,O.jsx)(g().sA,{defaultMessage:"Include subpages",id:"exportModal.includeSubpages.label"})," ",a?(0,O.jsx)("div",{style:{marginLeft:8},children:a}):void 0]}),(0,O.jsx)(N().A,{on:t.recursive,disabled:Boolean(C)})]}),renderUpgradeTooltip:()=>(0,O.jsx)(E().A,{imageURL:r().A.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:(0,O.jsx)(g().sA,{defaultMessage:"Upgrade to include subpages in PDF exports",id:"exportModal.pdfSubpageUpgradeTooltip.title"}),caption:(0,O.jsx)(g().sA,{defaultMessage:"Creates a zip file containing all the pages nested inside the current page as PDF files.",id:"exportModal.pdfSubpageUpgradeTooltip.caption"})}),tooltipPlacement:y().W.Left,upgradeButtonDesktopStyle:{marginTop:2}}):void 0,(0,O.jsx)(R().A,{title:(0,O.jsx)(g().sA,{id:"exportModal.flattenExportFiletree.description",defaultMessage:"Create folders for subpages"}),subtitle:"",style:{color:u.text.tertiary,fontSize:14,display:"flex",alignItems:"center",marginRight:"auto",height:32},on:void 0===t.exportOptions.flattenExportFiletree?!I:!t.exportOptions.flattenExportFiletree,disabled:!t.recursive,onChange:()=>function(e){const t=j().Ay.state;t.open&&p().z_(e,{...t,exportOptions:{...t.exportOptions,flattenExportFiletree:!t.exportOptions.flattenExportFiletree}})}(m)}),"html"===t.exportOptions.exportType?(0,O.jsx)(R().A,{title:(0,O.jsx)(g().sA,{id:"exportModal.shouldExportComments.description",defaultMessage:"Export comments"}),subtitle:"",style:{color:u.text.tertiary,fontSize:14,display:"flex",alignItems:"center",marginRight:"auto",height:32},on:t.shouldExportComments,onChange:()=>function(e){const t=j().Ay.state;t.open&&p().z_(e,{...t,shouldExportComments:!t.shouldExportComments})}(m)}):null,(0,O.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:16},children:[(0,O.jsx)(M().p,{isGray:!0,style:{marginLeft:"auto",marginRight:8},onClick:ae,children:(0,O.jsx)(g().sA,{defaultMessage:"Cancel",id:"exportModal.cancelButton.label"})}),(0,O.jsx)(z().A,{onClick:()=>ne(m),disabled:!T,children:(0,O.jsx)(g().sA,{defaultMessage:"Export",id:"exportModal.exportButton.label"})})]})]})}function ue(e,t,a,s){const{currentUser:n,device:o}=t;return m().oE([{key:"export type",render:s=>{let{ref:i,...r}=s;return(0,O.jsx)(P().A,{...r,isMenuItem:o.isMobile,buttonPopupStore:a,label:(0,O.jsx)(g().sA,{defaultMessage:"Export format",id:"exportModal.exportFormat.description"}),selectedTitle:Y(e.exportOptions.exportType),renderMenuSections:e=>[{key:"exportType",render:e=>(0,O.jsx)(D().A,{...e}),items:U.map((a=>oe(a,e,n.id,t)))}]})},action:()=>{a.setState({open:!0})}},(0,j().xt)(e)&&{key:"pdf format",render:a=>{let{ref:n,...i}=a;return(0,O.jsx)(P().A,{...i,isMenuItem:o.isMobile,buttonPopupStore:s,label:(0,O.jsx)(g().sA,{defaultMessage:"Page format",id:"exportModal.pageFormat.description"}),selectedTitle:X(e.exportOptions.pdfFormat),renderMenuSections:e=>[{key:"isoPaperFormats",render:e=>(0,O.jsx)(D().A,{...e}),items:l().yC.map((a=>le(a,e,t)))},{key:"otherPaperFormats",render:e=>(0,O.jsx)(D().A,{topBorder:!0,...e}),items:l().hj.map((a=>le(a,e,t)))}]})},action:()=>{s.setState({open:!0})}},"space"!==e.root.table&&{key:"recursive",render:a=>{let{onClick:s,key:n,...o}=a;const i=(0,j().xt)(e)&&!p().Dd(t)&&"business";return(0,O.jsx)(A().A,{requireUpgradeToTier:i,analyticsName:"export_modal",onClick:s,render:(t,a)=>{const s=(0,f().A)(o,t);return(0,O.jsx)(C().A,{...s,title:(0,O.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,O.jsx)(g().sA,{defaultMessage:"Include subpages",id:"exportModal.includeSubpages.label"})," ",a?(0,O.jsx)("div",{style:{marginLeft:8},children:a}):void 0]}),right:(0,O.jsx)(N().A,{...s,on:e.recursive,disabled:Boolean(i)})})},renderUpgradeTooltip:()=>(0,O.jsx)(E().A,{imageURL:r().A.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:(0,O.jsx)(g().sA,{defaultMessage:"Upgrade to include subpages in PDF exports",id:"exportModal.pdfSubpageUpgradeTooltip.title"}),caption:(0,O.jsx)(g().sA,{defaultMessage:"Creates a zip file containing all the pages nested inside the current page as PDF files.",id:"exportModal.pdfSubpageUpgradeTooltip.caption"})}),tooltipPlacement:y().W.Left,upgradeButtonDesktopStyle:{marginTop:2}},n)},action:()=>se(t)}])}function ge(e){let{modalState:t,exportTypePopupStore:a,pdfFormatPopupStore:s}=e;const o=(0,n().v3)(),i={menuType:h().gu.Modal,title:(0,O.jsx)(g().sA,{id:"exportModal.title",defaultMessage:"Export"}),right:(0,O.jsx)(g().sA,{id:"exportModal.closeButton.label",defaultMessage:"Close"}),onClickRight:ae};return(0,O.jsx)(k().A,{...i,children:(0,O.jsx)(_().Ay,{type:_().Oh.Vertical,initialFocus:void 0,sections:[{key:"exportOptions",render:e=>(0,O.jsx)(D().A,{...e}),items:ue(t,o,a,s)},{key:"actions",render:e=>{let{children:t,...a}=e;return(0,O.jsx)(D().A,{...a,children:t})},items:[{key:"submit",render:e=>{const{onClick:t,...a}=e;return(0,O.jsx)(L().A,{...a,onClick:t||(()=>ne(o)),disabled:!J(),title:(0,O.jsx)(g().sA,{id:"exportModal.exportButton.label",defaultMessage:"Export"})})},action:()=>ne(o)}]}]})})}function me(e){let{includeContentsPopupStore:t,exportTypePopupStore:a,pdfFormatPopupStore:s,collectionViewExportTypePopupStore:i}=e;const r=(0,n().v3)(),{device:l}=r,d=(0,o().O$)(S().e),c=(0,o().O$)(j().Ay);return d?c.open?l.isMobile?(0,O.jsx)(ge,{exportTypePopupStore:a,pdfFormatPopupStore:s,modalState:c}):(0,O.jsx)(ce,{includeContentsPopupStore:t,exportTypePopupStore:a,pdfFormatPopupStore:s,collectionViewExportTypePopupStore:i,modalState:c}):null:(0,O.jsx)(te,{})}},743556:(e,t,a)=>{a.d(t,{T:()=>n,n:()=>o});a(581454);var s=()=>a(803418);let n=function(e){return e.Loading="loading",e.ManagedUser="managed-user",e.OrganizationSpaceScimBot="organization-space-scim-bot",e.OrganizationWorkspace="organization-workspace",e.OrganizationGroup="organization-group",e.OrganizationGroupMember="organization-group-member",e.OrganizationGroupPage="organization-group-page",e.OrganizationGuest="organization-guest",e.OrganizationMember="organization-member",e.OrganizationClaimableWorkspace="organization-claimable-workspace",e.OrganizationEmailDomain="organization-email-domain",e.SingleUserGroup="single-user-group",e.SingleUserWorkspace="single-user-workspace",e.OrganizationLegalHold="organization-legal-hold",e.SingleLegalHoldMemberUser="single-legal-hold-member-user",e.SingleLegalHoldMemberGuest="single-legal-hold-member-guest",e.SingleLegalHoldMemberDeletedUser="single-legal-hold-member-deleted-user",e.SingleLegalHoldPage="single-legal-hold-page",e.SingleWorkspaceTeam="workspace-team",e.SingleWorkspaceGuest="workspace-guest",e.AnalyticsMemberViewsRow="analytics-member-view",e.AnalyticsPageViewsRow="analytics-page-views",e.SingleLegalHoldExport="single-legal-hold-export",e}({});function o(e){return new Array(e??s().q).fill(0).map(((e,t)=>({id:`loading-${t}`,isClickable:!1,type:n.Loading})))}},745638:(e,t,a)=>{a.d(t,{H:()=>o});var s=()=>a(679924),n=()=>a(217429);function o(e){(0,s().v)(e,"delete_workspace_click"),n().default.logEvent("delete_workspace_click")}},759358:(e,t,a)=>{a.d(t,{N:()=>M});var s=a(296540),n=()=>a(484714),o=()=>a(401497),i=()=>a(15936),r=()=>a(564766),l=()=>a(959013),d=()=>a(884107),c=()=>a(780054),u=()=>a(836251),g=()=>a(7674),m=()=>a(107683),p=()=>a(719147),h=()=>a(2609),f=(a(581454),()=>a(406533)),x=()=>a(493823),v=()=>a(554509),y=()=>a(859428),b=()=>a(484595),S=a(474848);function j(e){const t=(0,o().IS)((e=>({labelContainer:{display:"inline-flex",alignItems:"center",marginBottom:8},container:{position:"relative",width:"100%"},textBelowInput:{marginTop:6},helpIcon:{fill:e.icon.tertiary,marginLeft:4,height:14,width:14},inputContainer:{display:"flex",alignItems:"center",gap:8},radioOption:{display:"flex",alignItems:"center"}})),[]);return(0,S.jsxs)("div",{style:t.container,children:[(0,S.jsxs)("div",{style:t.labelContainer,children:[(0,S.jsx)(v().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:e.labelMessage}),e.helpMessage&&(0,S.jsx)(y().A,{renderTooltip:()=>e.helpMessage,render:e=>(0,S.jsx)("span",{...e,children:(0,f().questionMarkCircleIcon)(t.helpIcon)})})]}),(0,S.jsx)("div",{style:t.inputContainer,children:e.items.map((a=>(0,S.jsxs)(x().p,{style:t.radioOption,onClick:a.onClick,children:[(0,S.jsx)(b().A,{isSelected:e.selectedItem===a.value}),(0,S.jsx)(v().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:a.label})]},a.id)))}),e.secondaryMessage?(0,S.jsx)(v().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:t.textBelowInput,children:e.secondaryMessage}):null]})}var w=()=>a(701787),A=function(e){return e.MetadataUrl="metadataUrl",e.MetadataXml="metadataXml",e}(A||{});function M(e){let{saveButtonText:t,samlConfig:a,loading:f,onSave:x,onDismiss:v,headerByline:y}=e;const b=(0,n().v3)(),M=(0,l().tz)(),[I,T]=(0,s.useState)(null!=a&&a.idpMetadata?A.MetadataXml:A.MetadataUrl),[k,_]=(0,s.useState)(null==a?void 0:a.idpMetadataUrl),[z,D]=(0,s.useState)(null==a?void 0:a.idpMetadata),[P,N]=(0,s.useState)(void 0),[R,B]=(0,s.useState)(void 0),L=(0,o().IS)((e=>({icon:{height:32,width:32,fill:e.icon.secondary},byline:{paddingInline:32},container:{width:h().J2,display:"flex",flexDirection:"column",gap:h().gA,overflowY:"auto"}})),[]),E=a?(0,r().zW)(null==a?void 0:a.id,c().A.domainBaseUrl):null,O=(0,r().Hw)(c().A.domainBaseUrl),U=(0,s.useCallback)((async e=>{if(!e)return;const t=await d().R.clipboardActions.load();t.copyString({environment:b,stringValue:e,copiedMessage:t.clipboardMessages.copiedLinkToClipboard})}),[b]),F=[{id:"metadataUrl",value:A.MetadataUrl,label:"URL",onClick:()=>T(A.MetadataUrl)},{id:"metadataXml",value:A.MetadataXml,label:"Metadata XML",onClick:()=>T(A.MetadataXml)}];async function H(){switch(I){case A.MetadataUrl:return void("valid"===(0,r().vU)(k??"").type?await x({metadataUrl:k}):N((0,r().vU)(k??"")));case A.MetadataXml:return void("valid"===(0,r().$W)(z??"").type?await x({metadataXml:z}):B((0,r().$W)(z??"")))}}return(0,S.jsx)(m().s,{isOpen:!0,onDismiss:v,areaConstraint:{width:{type:"fixed",length:h().NF}},render:e=>{let{sizeRange:a}=e;return(0,S.jsx)(g().tf,{sizeRange:a,header:(0,S.jsx)(h().rQ,{icon:(0,i().g)(L.icon),title:(0,S.jsx)(l().sA,{id:"organization.general.saml.settings.configure.modal.title",defaultMessage:"Set up SAML SSO"}),byline:(0,S.jsx)("div",{style:L.byline,children:y||(0,S.jsx)(l().sA,{id:"organization.general.saml.settings.configure.modal.byline",defaultMessage:"Allow organization members to log into Notion through your identity provider (IDP). <guidelink>Learn more</guidelink>",values:{guidelink:e=>(0,S.jsx)(p().A,{hoverColor:"blue",href:(0,u().xS)("guides.samlSettings"),external:!0,children:e})}})})}),footer:(0,S.jsx)(h().jl,{primaryText:t??(0,S.jsx)(l().sA,{id:"organization.general.saml.settings.configure.modal.primaryAction",defaultMessage:"Save"}),primaryAction:H,primaryDisabled:f,secondaryText:(0,S.jsx)(l().sA,{id:"organization.general.saml.settings.configure.modal.cancelAction",defaultMessage:"Cancel"}),secondaryAction:v}),children:(0,S.jsxs)("div",{style:L.container,children:[E?(0,S.jsx)(w().p,{disabled:!0,onCopyClick:()=>U(E),value:E,placeholder:"https://notion.so/sso/saml/...",labelMessage:M.formatMessage({id:"organization.general.saml.settings.configure.modal.urlInput.label",defaultMessage:"Assertion Consumer Service (ACS) URL"}),secondaryMessage:M.formatMessage({id:"organization.general.saml.settings.configure.modal.urlInput.secondary",defaultMessage:"Add this URL to your IDP’s SAML SSO configuration"})}):null,O?(0,S.jsx)(w().p,{disabled:!0,onCopyClick:()=>U(O),value:O,placeholder:"https://notion.so/sso/saml/",labelMessage:M.formatMessage({id:"organization.general.saml.settings.configure.modal.entityIdInput.label",defaultMessage:"SAML SSO Entity ID"})}):null,(0,S.jsx)(j,{items:F,selectedItem:I,labelMessage:M.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.label",defaultMessage:"Setup method"})}),I===A.MetadataUrl?(0,S.jsx)(w().p,{value:k,onChange:e=>_(e.target.value),onBlur:()=>N((0,r().vU)(k??"")),placeholder:"https://...",labelMessage:M.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.url.value.label",defaultMessage:"URL"}),secondaryMessage:M.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.url.value.secondary",defaultMessage:"Paste the URL from your IDP"}),errorMessage:P?C(P,M):void 0}):I===A.MetadataXml?(0,S.jsx)(w().p,{multiline:!0,value:z,onChange:e=>D(e.target.value),onBlur:()=>B((0,r().$W)(z??"")),placeholder:'<md:EntityDescriptor entityID="...',labelMessage:M.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.xml.value.label",defaultMessage:"Metadata XML"}),secondaryMessage:M.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.xml.value.secondary",defaultMessage:"Paste the XML from your IDP"}),errorMessage:R?C(R,M):void 0}):null]})})}})}function C(e,t){if("valid"!==e.type)switch(e.reason){case"empty":return t.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.value.error.empty",defaultMessage:"You cannot leave this field empty"});case"signed_request":return t.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.value.error.signedRequest",defaultMessage:"Requests cannot be signed"})}}},771495:(e,t,a)=>{a.d(t,{M:()=>r,l:()=>l});a(296540);var s=()=>a(373204),n=()=>a(959013),o=()=>a(567865),i=a(474848);function r(e){let{selectedMfaMethod:t,setSelectedMfaMethod:a}=e;return(0,i.jsx)(o().zr,{pillTitle:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.title",defaultMessage:"2-step verification method"}),pillIcon:s().K,selectedItem:t,setSelectedItem:a,items:l})}const l=[{key:"totp",value:"totp",title:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.totp",defaultMessage:"Authenticator"}),shortTitle:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.totp",defaultMessage:"Authenticator"}),caption:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.totp.caption",defaultMessage:"Users who have enabled 2-step verification through an authenticator app"}),wrapCaption:!0},{key:"sms",value:"sms",title:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.sms",defaultMessage:"Phone number"}),shortTitle:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.sms",defaultMessage:"Phone number"}),caption:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.sms.caption",defaultMessage:"Users who have enabled 2-step verification through their phone number"}),wrapCaption:!0},{key:"backup_code",value:"backup_code",title:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.backupCode",defaultMessage:"Backup code"}),shortTitle:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.backupCode",defaultMessage:"Backup code"}),caption:(0,i.jsx)(n().sA,{id:"managedUsersTab.table.filters.mfaMethod.backup_code.caption",defaultMessage:"Users who have enabled 2-step verification with active backup codes."}),wrapCaption:!0}]},773290:(e,t,a)=>{a.d(t,{T:()=>l});a(581454),a(296540);var s=()=>a(56366),n=()=>a(798880),o=()=>a(630116),i=()=>a(317131),r=a(474848);function l(e){let{blockStore:t,userIds:a,isClickable:l}=e;const d=(0,s().K8)((()=>a.map((e=>o().LU.createChildStore(t,{table:n().oo,id:e})))),[t,a]);return(0,r.jsx)(i().l,{userStores:d,isClickable:l})}},780879:(e,t,a)=>{a.d(t,{$:()=>l,p:()=>i});a(898992),a(354520),a(908872);var s=a(296540),n=()=>a(534177),o=a(474848);const i=(0,s.createContext)({pendingTeamSettings:{},pendingSpaceSettings:{},pendingOrgSetting:void 0,setPendingTeamSettings:()=>{},setPendingSpaceSettings:()=>{},setPendingOrgSetting:()=>{},clearAllPendingSettings:()=>{},hasPendingCentralizedSettings:()=>!1});function r(e){return Object.entries(e).filter((e=>{let[t,a]=e;return(0,n().O9)(a)})).reduce(((e,t)=>{let[a,s]=t;return e[a]=s,e}),{})}function l(e){let{children:t}=e;const[a,n]=(0,s.useState)({}),[l,d]=(0,s.useState)({}),[c,u]=(0,s.useState)(void 0),g=(0,s.useCallback)((e=>{n(r({...a,...e}))}),[a]),m=(0,s.useCallback)((e=>{d(r({...l,...e}))}),[l]),p=(0,s.useCallback)((()=>{n({}),d({}),u(void 0)}),[n,d,u]),h=(0,s.useCallback)((()=>Boolean(c||Object.keys(l).length||Object.keys(a).length)),[c,l,a]);return(0,o.jsx)(i.Provider,{value:{pendingTeamSettings:a,pendingSpaceSettings:l,pendingOrgSetting:c,setPendingTeamSettings:g,setPendingSpaceSettings:m,setPendingOrgSetting:u,clearAllPendingSettings:p,hasPendingCentralizedSettings:h},children:t})}i.displayName="OrganizationCentralizedSettingsContext"},793571:(e,t,a)=>{a.d(t,{r:()=>be});a(581454);var s=a(296540),n=()=>a(56366),o=()=>a(401497),i=()=>a(959013),r=()=>a(108944),l=()=>a(991221),d=()=>a(641300),c=()=>a(364280),u=()=>a(331542),g=()=>a(625383),m=()=>a(125565),p=()=>a(484714),h=()=>a(738418),f=()=>a(449552),x=()=>a(284371),v=()=>a(679924);var y=()=>a(755636),b=()=>a(72234),S=()=>a(836251),j=()=>a(493823),w=()=>a(204063),A=a(474848);function M(e){const t=(0,p().v3)(),a=(0,o().IS)((e=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headerIcon:{width:36,height:36,color:e.text.tertiary,fill:"currentColor"},disclaimerTitle:{margin:"12px auto",fontWeight:x().Wy.medium,fontSize:16},disclaimer:{fontWeight:x().Wy.regular,fontSize:14,color:e.text.tertiary,textAlign:"center",width:432,margin:"0 auto 16px"},acknowledgeButton:{width:195,margin:"8px auto 0"},learnMoreButton:{width:195,margin:"8px auto 0",justifyContent:"center",color:e.text.tertiary},learnMoreButtonIcon:{width:12,height:12,marginRight:4}})),[]),n=(0,s.useCallback)((()=>{!function(e){(0,v().v)(e,"admin_content_search_analytics_acknowledge_confirm")}(t),b().dK(t)}),[t]);return(0,A.jsxs)("div",{style:a.container,children:[(0,f().g)(a.headerIcon),(0,A.jsx)("h1",{style:a.disclaimerTitle,children:(0,A.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimerTitle",defaultMessage:"Before using this feature"})}),(0,A.jsx)("p",{style:a.disclaimer,children:(0,A.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimer",defaultMessage:"As a workspace owner, you can use content search to find pages that you don't have access to, including the private pages of other workspace members. Consult with your organization's legal department on how to use this feature. Actions taken here will be recorded in the audit log."})}),(0,A.jsx)(w().A,{style:a.acknowledgeButton,onClick:n,children:(0,A.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.confirm",defaultMessage:"Acknowledge"})}),(0,A.jsxs)(j().p,{style:a.learnMoreButton,onClick:()=>{const e=(0,S().xS)("adminContentSearch");y().f({environment:t,url:e})},children:[(0,h().G)(a.learnMoreButtonIcon),(0,A.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.learnMore",defaultMessage:"Learn more"})]})]})}var C=()=>a(994776),I=()=>a(149375),T=()=>a(701144);function k(e){let{filters:t,setFilters:a}=e;const s=(0,o().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},title:{margin:"12px auto",fontWeight:x().Wy.medium,fontSize:16},description:{fontWeight:x().Wy.regular,fontSize:14,color:e.text.tertiary,textAlign:"center",maxWidth:386,margin:"0 auto 16px"},suggestion:{position:"relative",height:38,width:"100%",maxWidth:440,margin:"12px auto 0",justifyContent:"center",color:e.darkTextColor,boxShadow:e.shadow2XS},filterContainer:{margin:"0 8px",display:"flex",alignItems:"center",justifyContent:"center"},arrowIconContainer:{position:"absolute",right:12,transform:"rotate(180deg)"},arrowIcon:{width:18,height:18,opacity:.5,color:e.text.tertiary,fill:"currentColor"}})),[]);return(0,A.jsxs)("div",{style:s.container,children:[(0,A.jsx)("h1",{style:s.title,children:(0,A.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.suggestions.title",defaultMessage:"Search pages in your workspace"})}),(0,A.jsx)("p",{style:s.description,children:(0,A.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.suggestions.description",defaultMessage:"Use filters to find pages with specific sharing and permissions settings, such as:"})}),(0,A.jsxs)(j().p,{style:s.suggestion,onClick:function(){a({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_externally"],teamIds:[]},{runSearchAfter:!0})},children:[(0,A.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>(0,A.jsx)("div",{style:s.filterContainer,children:(0,A.jsx)(T().tE,{setPillTitleStringToActiveSelection:!0,selectedAudience:["shared_externally"]})})}}),(0,A.jsx)("div",{style:s.arrowIconContainer,children:(0,I().v)(s.arrowIcon)})]}),(0,A.jsxs)(j().p,{style:s.suggestion,onClick:function(){a({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_to_web"],teamIds:[]},{runSearchAfter:!0})},children:[(0,A.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>(0,A.jsx)("div",{style:s.filterContainer,children:(0,A.jsx)(T().tE,{setPillTitleStringToActiveSelection:!0,selectedAudience:["shared_to_web"]})})}}),(0,A.jsx)("div",{style:s.arrowIconContainer,children:(0,I().v)(s.arrowIcon)})]})]})}a(898992),a(354520);var _=()=>a(30626),z=()=>a(534177),D=()=>a(482707),P=()=>a(722872),N=()=>a(437487),R=()=>a(962730),B=()=>a(463830),L=()=>a(529183),E=()=>a(454354),O=()=>a(406699),U=()=>a(285790),F=()=>a(928600),H=()=>a(939740),V=()=>a(897119),W=()=>a(47582),q=()=>a(824176),G=()=>a(451830);function K(e){const{pageStatus:t,blockStore:a,refreshSearchResult:s}=e;switch(t){case"alive":case"in_trash":return(0,A.jsx)(Y,{pageStatus:t,blockStore:a,refreshSearchResult:s});case"deleted_from_trash":return(0,A.jsx)(Q,{pageStatus:t,blockStore:a,getValidDeletedPermissions:e.getValidDeletedPermissions,refreshSearchResult:s});default:(0,z().HB)(t)}}function Y(e){let{blockStore:t,pageStatus:a,refreshSearchResult:o}=e;const r=(0,i().tz)(),l=(0,n().uB)(void 0,B().A),d=(0,p().v3)(),c=(0,n().uB)(void 0,E().A),u=(0,n().uB)(void 0,L().Ay),g=(0,G().o)(),[m,h]=(0,s.useState)(!1);(0,s.useEffect)((()=>{c.setState({...c.state,privatePageStore:t,changePermissionsEnabled:!0,loading:!1,error:void 0})}),[t,c]);const f=[(0,q().j9)({environment:d,pageStatus:a,popupStore:l,blockStore:t,handleOpenPermissionsMenu:()=>h(!0),onRestoreOrDeletePage:o,from:"adminContentSearch"}),(0,q().CT)({environment:d,pageStatus:a,popupStore:l,blockStore:t,onRestoreOrDeletePage:o,from:"adminContentSearch"})].filter(z().O9);return(0,A.jsx)(O().Ay,{popupType:V().nl.Popup,alignmentToOrigin:R().C.Start,placementToOrigin:R().W.Bottom,style:m?g.popupShareModal:g.popupMenu,render:()=>m?(0,A.jsx)(D().k,{store:t,sudoModeStore:c,inviteTargetsStore:u,location:"admin_content_search"}):(0,A.jsx)(F().A,{menuType:P().gu.Popup,width:248,children:(0,A.jsx)(H().Ay,{type:H().Oh.Vertical,initialFocus:void 0,sections:f})}),onClose:()=>{h(!1),N().Ay.reset()},buttonPopupStore:l,renderOrigin:e=>(0,A.jsx)(U().A,{ariaLabel:r.formatMessage({id:"pageCellActions.aliveOrInTrash.iconButton.ariaLabel",defaultMessage:"More actions for page"}),icon:_()._,...e})})}function Q(e){let{blockStore:t,getValidDeletedPermissions:a,refreshSearchResult:n}=e;const o=(0,i().tz)(),r=(0,s.useCallback)((e=>(0,A.jsx)(U().A,{ariaLabel:o.formatMessage({id:"pageCellActions.deletedFromTrash.iconButton.ariaLabel",defaultMessage:"More actions for deleted from trash page"}),icon:_()._,...e})),[o]),l=(0,p().v3)();return(0,A.jsx)(W().V,{environment:l,renderPopupOrigin:r,blockStore:t,placementToOrigin:R().W.Bottom,includeNonRestoreActions:!0,getValidDeletedPermissions:a,onRestoreOrDeletePage:n,from:"adminContentSearch"})}var $=()=>a(624090),X=()=>a(287882),Z=()=>a(720665),J=()=>a(464708),ee=()=>a(859428);function te(e){let{pageStatus:t,blockStore:s}=e;const r=(0,o().IS)((e=>({grayBadge:{width:"fit-content",whiteSpace:"nowrap",display:"flex",flexDirection:"row"},trashIcon:{marginRight:2,height:12,width:12}})),[]),{deleteFromTrashDelayMs:l,purgeDelayMs:d}=(0,n().K8)((()=>{const e=s.getSpaceStore();return{deleteFromTrashDelayMs:(0,$().XX)(null==e?void 0:e.getModel()),purgeDelayMs:(0,$().NA)(null==e?void 0:e.getModel())}}),[s]),c=(0,n().K8)((()=>{if("in_trash"===t)return(0,$().BT)(s.pointer,s.getRecordModel)}),[s,t]),u=(0,n().K8)((()=>{if("deleted_from_trash"===t)return(0,$().uZ)(s.pointer,s.getRecordModel)}),[s,t]),g=(0,a(501497).S6)();switch(t){case"alive":return null;case"in_trash":return Date.now()>=(0,$().vw)({movedToTrashTime:c,deleteFromTrashDelayMs:l,cdrrDeletionEnabledTimestamp:g})?(0,A.jsx)(ae,{deleteFromTrashDelaySeconds:l/Z().TD,purgeDelaySeconds:d/Z().TD,pageStatus:t}):(0,A.jsx)(J().A,{style:r.grayBadge,content:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{children:(0,a(735384).I)(r.trashIcon)}),(0,A.jsx)(i().sA,{id:"adminContentSearch.pageStatusBadge.trash",defaultMessage:"In Trash"})]})});case"deleted_from_trash":return Date.now()>=(u??$().mZ)+d?(0,A.jsx)(ae,{deleteFromTrashDelaySeconds:l/Z().TD,purgeDelaySeconds:d/Z().TD,pageStatus:t}):(0,A.jsx)(J().A,{style:r.grayBadge,content:(0,A.jsx)(i().sA,{id:"adminContentSearch.pageStatusBadge.retained",defaultMessage:"Retained"})});default:(0,z().HB)(t)}}function ae(e){const{pageStatus:t,deleteFromTrashDelaySeconds:a,purgeDelaySeconds:s}=e,n=(0,i().tz)(),r=(0,o().IS)((e=>({redBadge:{color:e.text.uiRedPrimary,backgroundColor:e.fill.redPrimary,width:"fit-content",whiteSpace:"nowrap"},secondaryTooltip:{color:e.text.contrastSecondary}})),[]);return"in_trash"===t?(0,A.jsx)(ee().A,{renderTooltip:()=>(0,A.jsx)(i().sA,{id:"adminContentSearch.pageStatusBadge.deletionPending.trash.tooltip",defaultMessage:"<primary>We are processing the deletion from Trash</primary><secondary>This page is past {duration} in Trash</secondary>",values:{primary:e=>(0,A.jsx)("div",{children:e}),secondary:e=>(0,A.jsx)("div",{style:r.secondaryTooltip,children:e}),duration:(0,X().rN)(a,n)}}),placement:R().W.Bottom,render:e=>(0,A.jsx)("div",{...e,children:(0,A.jsx)(J().A,{style:r.redBadge,content:(0,A.jsx)(i().sA,{id:"adminContentSearch.pageStatusBadge.trash.deletionPending",defaultMessage:"Deleted from Trash soon"})})})}):"deleted_from_trash"===t?(0,A.jsx)(ee().A,{renderTooltip:()=>(0,A.jsx)(i().sA,{id:"adminContentSearch.pageStatusBadge.deletionPending.perm.tooltip",defaultMessage:"<primary>Will be permanently deleted soon </primary> <secondary>Retained pages are permanently deleted after {duration}</secondary>",values:{primary:e=>(0,A.jsx)("div",{children:e}),secondary:e=>(0,A.jsx)("div",{style:r.secondaryTooltip,children:e}),duration:(0,X().rN)(s,n)}}),placement:R().W.Bottom,render:e=>(0,A.jsx)("div",{...e,children:(0,A.jsx)(J().A,{style:r.redBadge,content:(0,A.jsx)(i().sA,{id:"adminContentSearch.pageStatusBadge.perm.deletionPending",defaultMessage:"Permanently deleted soon"})})})}):null}var se=()=>a(58293);var ne=()=>a(566468);function oe(e){let{deletedFromTrashTime:t}=e;const a=function(){const e=(0,se().r)();return(0,n().K8)((()=>{const t=null==e?void 0:e.getModel();return(0,$().NA)(t)}),[e])}();if((0,z().O9)(t)){const e=t+a;return e>Date.now()?(0,A.jsx)(g().d,{dateTs:e,omitTooltip:!0}):(0,A.jsx)(ee().A,{render:e=>(0,A.jsx)("div",{...e,children:(0,A.jsx)(ne().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,A.jsx)(i().sA,{defaultMessage:"N/A",id:"adminContentSearchTab.pagesTable.deletedTimeCell.notAvailable"})})}),renderTooltip:()=>(0,A.jsx)(i().sA,{defaultMessage:"This page is in process of being permanently deleted",id:"adminContentSearchTab.pagesTable.deletedTimeCell.beingPurged.tooltip"})})}return(0,A.jsx)(ne().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,A.jsx)(i().sA,{defaultMessage:"N/A",id:"adminContentSearchTab.pagesTable.deletedTimeCell.notAvailable"})})}var ie=()=>a(773290);const re={id:"page",headerTitle:(0,A.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.page.name",defaultMessage:"Page"}),renderCell:e=>(0,A.jsx)(a(744766).oc,{blockStore:e.pageStore,rightIcon:(0,A.jsx)(K,{blockStore:e.pageStore,pageStatus:e.pageStatus,getValidDeletedPermissions:e.filterDeletedPermissions,refreshSearchResult:e.refreshSearchResult}),inlineTitleContent:(0,A.jsx)(te,{pageStatus:e.pageStatus,blockStore:e.pageStore})}),widthData:{width:320,maxWidth:320},sortable:!1},le={id:"location",headerTitle:(0,A.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.location.name",defaultMessage:"Location"}),renderCell:e=>(0,A.jsx)(a(421645).E,{blockStore:e.pageStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},de={id:"createdTime",headerTitle:(0,A.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.createdTime.name",defaultMessage:"Created on"}),renderCell:e=>(0,A.jsx)(g().d,{dateTs:e.createdTime}),widthData:{width:140},sortable:!1},ce={id:"lastEditedTime",headerTitle:(0,A.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.name",defaultMessage:"Last edited on"}),renderCell:e=>(0,A.jsx)(a(738268).Z,{lastEditedTime:e.lastEditedTime,lastEditedById:e.lastEditedById,deletedFromTrashTime:e.deletedFromTrashTime,movedToTrashTime:e.movedToTrashTime,pageStatus:e.pageStatus}),widthData:{width:140},sortable:!1},ue={id:"createdBy",headerTitle:(0,A.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.createdBy.name",defaultMessage:"Created by"}),renderCell:e=>e.createdById?(0,A.jsx)(ie().T,{blockStore:e.pageStore,userIds:[e.createdById]}):null,widthData:{width:140},sortable:!1},ge={id:"lastEditedBy",headerTitle:(0,A.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.lastEditedBy.name",defaultMessage:"Last edited by"}),renderCell:e=>e.lastEditedById?(0,A.jsx)(ie().T,{blockStore:e.pageStore,userIds:[e.lastEditedById]}):null,widthData:{width:140},sortable:!1};function me(e){let{blockStore:t}=e;const s=(0,n().O$)(a(765957).AppStoreCurrentSpaceStore);return s?(0,A.jsx)(a(592010).b,{blockStore:t,spaceStore:s}):null}const pe={id:"audience",headerTitle:(0,A.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.audience.name",defaultMessage:"Audience"}),renderCell:e=>(0,A.jsx)(me,{blockStore:e.pageStore}),widthData:{width:140},sortable:!1},he={id:"sharedWith",headerTitle:(0,A.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.sharedWith.name",defaultMessage:"Shared with"}),renderCell:e=>(0,A.jsx)(a(604484).o,{blockStore:e.pageStore}),widthData:{width:140},sortable:!1},fe={id:"retainedUntil",headerTitle:(0,A.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.retainedUntil.name",defaultMessage:"Retained until"}),renderCell:e=>(0,A.jsx)(oe,{deletedFromTrashTime:e.deletedFromTrashTime}),widthData:{width:140},sortable:!1},xe={id:"pageStatus",headerTitle:(0,A.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.pageStatus.name",defaultMessage:"Page status"}),renderCell:e=>(0,A.jsx)(a(371895).u,{pageStatus:e.pageStatus}),widthData:{width:140},sortable:!1},ve=[re,le,pe,he,ge,ce,ue,de],ye=[re,le,xe,fe,pe,he,ge,ce,ue,de];function be(e){let{loading:t,error:a,loadNextPage:g,hasNextPage:p,filters:h,setFilters:f,pageStores:x,showSuggestions:v,runNewSearch:y,hasUserConfirmedAcknowledgement:b,refreshSearchResult:S,shouldShowLoadMore:j}=e;const w=b&&!t&&!v,I=b&&!v,T=(0,l().T)(),_=(0,s.useMemo)((()=>h.pageStatus.includes("deleted_from_trash")||h.pageStatus.includes("in_trash")||0===h.pageStatus.length),[h.pageStatus]),z=_?ye:ve,D=(0,n().K8)((()=>x.map((e=>{const t=_&&e.pathIsDead()?e.pathHasDeletedPermission()?"deleted_from_trash":"in_trash":"alive";return{id:e.id,isClickable:!1,pageStore:e,teamStore:(0,r().Uo)(e),createdTime:e.getCreatedTime(),lastEditedTime:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById(),pageStatus:t,movedToTrashTime:e.getMovedToTrashTime(),deletedFromTrashTime:"deleted_from_trash"===t?e.getDeletedFromTrashAt():void 0,filterDeletedPermissions:"deleted_from_trash"===t?T:void 0,refreshSearchResult:S}}))),[x,_,T,S]),P=(0,o().IS)((e=>(0,d().rC)({columnRenderInfo:z,theme:e,containerMarginTop:0})),[z]);return a?(0,A.jsx)(C().t,{runNewSearch:y,error:a}):b?v&&0===D.length?(0,A.jsx)(k,{filters:h,setFilters:f}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(d().WE,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:j?void 0:400,columnRenderInfo:z,rows:D,loadMoreMethod:I?j?{type:"button",onLoadMore:g,hasNextPage:p}:{type:"scroll",onLoadMore:g}:void 0,renderNoRowsComponent:()=>(0,A.jsx)(m().A,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:w&&(0,A.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.empty",defaultMessage:"No pages found with your query."})}),styles:P}),t?(0,A.jsx)(c().fI,{justifyContent:"center",children:(0,A.jsx)(u().A,{style:{margin:"24px auto 24px"}})}):null]}):(0,A.jsx)(M,{})}},802042:(e,t,a)=>{a.d(t,{o:()=>r});var s=()=>a(484714),n=()=>a(187174),o=()=>a(534177),i=()=>a(449506);function r(e){const{organizationId:t,includeCountsPerDomain:a}=e,r=(0,s().v3)(),[{status:l,value:d}]=(0,n().Yb)((async()=>{if(!t)return;const e=await i().callApi({eventName:"getVerifiedUsersCountForOrganization",environment:r,data:{organizationId:t,includeCountsPerDomain:a}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,o().HB)(e)}),[r,t,a]);return{loading:"pending"===l,didError:"rejected"===l,count:d}}},803418:(e,t,a)=>{a.d(t,{O:()=>n,q:()=>s});const s=20,n=25},807106:(e,t,a)=>{a.d(t,{C:()=>p,_:()=>m});var s=a(296540),n=()=>a(484714),o=()=>a(56366),i=()=>a(187174),r=()=>a(436604),l=()=>a(534177),d=()=>a(449506),c=()=>a(646736),u=()=>a(511303);const g={activeMembersCount:0,previousActiveMembersCount:0,activeGuestsCount:0,previousActiveGuestsCount:0,topTeamspaces:[],topViewers:[],topEditors:[]};function m(e){let{spaceStore:t,userId:a,isOrganizationOwner:n}=e;const[o,i]=(0,s.useState)("last_90_days");return{...p({spaceStore:t,userId:a,isOrganizationOwner:n,daysFilter:o}),daysFilter:o,setDaysFilter:i}}function p(e){let{spaceStore:t,userId:a,isOrganizationOwner:m,daysFilter:p}=e;const h=(0,n().v3)(),{updateCacheWithRecordMap:f}=(0,s.useContext)(u().N),x=(0,o().K8)((()=>t.id),[t]),v=(0,o().K8)((()=>Boolean(t&&a&&(0,c().dp)(t,a).isWorkspaceOwner())),[t,a]),[{status:y,value:b,error:S}]=(0,i().Yb)((async()=>{if(!a||!(m||v))return g;const e=await d().callApi({eventName:"getUserEngagementAnalytics",environment:h,data:{spaceId:x,daysFilter:p},headers:{[r().B3]:x}});switch(e.type){case"success":return f(e),{activeMembersCount:e.data.activeMembersCount,previousActiveMembersCount:e.data.previousActiveMembersCount,activeGuestsCount:e.data.activeGuestsCount,previousActiveGuestsCount:e.data.previousActiveGuestsCount,topTeamspaces:e.data.topTeamspaces,topViewers:e.data.topViewers,topEditors:e.data.topEditors};case"failed":throw e.body;default:(0,l().HB)(e)}}),[h,a,x,p,v,m,f]);return{data:(0,s.useMemo)((()=>b||g),[b]),loading:"pending"===y||"idle"===y,error:S}}},809730:(e,t,a)=>{a.d(t,{e:()=>r});var s=()=>a(534177),n=()=>a(597777);var o=()=>a(807778),i=()=>a(10984);function r(e){var t;let{billingData:a}=e;return function(e){let{subscriptionTier:t,subscriptionCreatedAtTime:a,useLegacyBehavior:o}=e;return"enterprise"===t||!("plus"!==t||!o)&&(0,s().O9)(a)&&a<n().fQ}({subscriptionTier:(0,i().AI)(),subscriptionCreatedAtTime:null==a||null===(t=a.subscription)||void 0===t||null===(t=t.startDate)||void 0===t?void 0:t.toMillis(),useLegacyBehavior:!(0,o().hG)()})}},812941:(e,t,a)=>{a.d(t,{A:()=>g});a(296540);var s=()=>a(401497),n=()=>a(959013),o=()=>a(534177),i=()=>a(690197),r=()=>a(836251),l=()=>a(265665),d=a(474848);function c(e){switch(e){case"bestPractices":return(0,r().xS)("guides.teamspacesLearnMore");case"workspaceOwnerGuide":return(0,r().xS)("guides.teamspacesWorkspaceOwner");case"settingsAndPermissions":return(0,r().xS)("guides.teamspacesSettingsAndPermissions");default:return(0,o().HB)(e)}}function u(e){return e||(0,d.jsx)(l().j,{children:(0,d.jsx)(n().sA,{defaultMessage:"Learn about teamspaces",id:"teamsLearnMoreLink"})})}function g(e){let{onClick:t,message:a,helpCenterLocation:n,analyticsFrom:o,containerStyle:r}=e;const l=(0,s().IS)((()=>({button:{maxWidth:"100%"}})),[]);return(0,d.jsx)("div",{style:r,children:(0,d.jsx)(i().A,{buttonStyle:l.button,title:u(a),analyticsFrom:o,href:c(n),onClick:t})})}},817045:(e,t,a)=>{a.d(t,{S:()=>c});var s=a(296540),n=()=>a(835470),o=()=>a(959013),i=()=>a(2609),r=()=>a(7674),l=()=>a(107683),d=a(474848);function c(e){let{onCancel:t,onSubmit:a,headerText:c,bylineText:u,submitText:g}=e;const[m,p]=(0,s.useState)(!1);return(0,d.jsx)(l().s,{isOpen:!0,onDismiss:t,areaConstraint:{width:{type:"min",length:i().NF}},render:()=>(0,d.jsx)(r().tf,{header:(0,d.jsx)(r().YA,{iconAndTitle:(0,d.jsx)(r().ZQ,{iconGroup:n().F,iconColorName:"uiRedPrimary",title:c}),description:u}),footer:(0,d.jsx)(r().aO,{primaryButtons:[{buttonType:"destructive",label:g,onClick:async()=>{p(!0),await a(),p(!1)},isDisabled:m}],secondaryButtons:[{buttonType:"dismiss",label:(0,d.jsx)(o().sA,{id:"destructiveActionModal.button.cancel",defaultMessage:"Cancel"})}],layout:"vertical"})})})}},817863:(e,t,a)=>{a.d(t,{ng:()=>H,Nt:()=>F,tv:()=>U,$:()=>O});a(898992),a(672577),a(581454);var s=a(296540),n=()=>a(96689),o=()=>a(625319),i=()=>a(303129),r=()=>a(56366),l=()=>a(401497),d=()=>a(416504),c=()=>a(278238),u=()=>a(972435),g=()=>a(187820),m=()=>a(142448),p=()=>a(534177),h=()=>a(46986),f=()=>a(364280),x=()=>a(710149),v=()=>a(554509),y=()=>a(566468),b=()=>a(47095),S=()=>a(480795),j=()=>a(725036),w=()=>a(27198),A=()=>a(325020),M=()=>a(653088),C=a(474848);const I=24,T=24;function k(e){switch(e.type){case"workspace":return(0,C.jsx)(D,{spaceStore:e.store});case"team":return(0,C.jsx)(z,{teamStore:e.store});case"external_workspace":return(0,C.jsx)(P,{name:e.name,icon:e.icon});case"block":return(0,C.jsx)(N,{blockStore:e.store});default:(0,p().HB)(e)}}function _(e){let{iconCellInfoArray:t}=e;const a=(0,l().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:4}})),[]);return(0,C.jsx)("div",{style:a.container,children:t.map((e=>k(e)))})}function z(e){var t;const{teamStore:a}=e,n=R(),o=(0,b().Z)(),{name:i,icon:l}=(0,r().K8)((()=>({name:a.getName(),icon:a.getIcon()})),[a]),d=(0,r().K8)((()=>a.getSpaceId()??""),[a]),c=(0,s.useMemo)((()=>[d]),[d]),{teamAggregateDataForSpace:u,loading:m}=(0,S().N)(c),p=(null==u||null===(t=u[d])||void 0===t||null===(t=t[a.id])||void 0===t?void 0:t.memberCount)??0;return(0,C.jsx)("div",{style:n.container,children:(0,C.jsx)(y().s7,{title:(0,C.jsx)("span",{style:n.primaryOnDarkBackground,children:i}),icon:(0,C.jsx)(g().B6,{size:I,emojiSize:T,disabled:!0,icon:l,iconRecordCategory:"teamspace",isEmptyPage:!1,title:i,isLarge:!0,isRaw:!1}),iconSize:I,byline:m?(0,C.jsx)(x().A,{style:o.shortShimmer}):(0,C.jsx)(v().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:n.secondaryOnDarkBackground,children:(0,C.jsx)(w().Qq,{memberCount:p})})})})}function D(e){var t;const{spaceStore:a}=e,s=R(),{name:n,icon:o}=(0,r().K8)((()=>({name:a.getName(),icon:a.getIcon()})),[a]),i=(0,r().K8)((()=>[a.id]),[a]),{teamStores:l,loading:d}=(0,j().o)(i);return(0,C.jsx)("div",{style:s.container,children:(0,C.jsx)(y().s7,{title:(0,C.jsx)("span",{style:s.primaryOnDarkBackground,children:n}),icon:(0,C.jsx)(g().B6,{size:I,emojiSize:T,disabled:!0,icon:o,iconRecordCategory:"workspace",isEmptyPage:!1,title:n,isLarge:!0,isRaw:!1}),iconSize:I,byline:(0,C.jsx)(M().i,{spaceId:a.id,teamCount:(null===(t=l[a.id])||void 0===t?void 0:t.length)??0,loading:d,styles:s.secondaryOnDarkBackground})})})}function P(e){const{name:t,icon:a}=e,s=R();return(0,C.jsx)("div",{style:s.container,children:(0,C.jsx)(y().s7,{title:(0,C.jsxs)(f().fI,{gap:8,children:[t,(0,C.jsx)(A().YM,{content:"External"})]}),icon:(0,C.jsx)(g().B6,{size:I,emojiSize:T,disabled:!0,icon:a,iconRecordCategory:"workspace",isEmptyPage:!1,title:t,isLarge:!0,isRaw:!1}),iconSize:I})})}function N(e){const{blockStore:t}=e,a=(0,h().x6)(),s=(0,r().K8)((()=>{const e=null==t?void 0:t.getModel();if(e&&t)return e.getRenderIcon({getRecordModel:t.getRecordModel})}),[t]),n=(0,r().K8)((()=>(0,g().Te)(t)),[t]),{pageTitle:o,placeholderTitle:i}=(0,r().K8)((()=>{const e=null==t?void 0:t.getModel();return e&&t?{pageTitle:e.getRenderTitle({getRecordModel:t.getRecordModel,userTimeZone:(0,d().P)(),intl:u().A.getIntl()}),placeholderTitle:e.getEmptyTitlePlaceholder({getRecordModel:t.getRecordModel,userTimeZone:(0,d().P)(),intl:u().A.getIntl(),isWorkflowsContainerWithCreationEnabled:a})}:{}}),[t,a]),l=R();return(0,C.jsx)("div",{style:l.container,children:(0,C.jsx)(y().s7,{title:o||i,icon:(0,C.jsx)(g().B6,{icon:s,iconRecordCategory:n,size:T,isEmptyPage:!1,disabled:!0}),iconSize:T})})}function R(){return(0,l().IS)((e=>({container:{width:250},primaryOnDarkBackground:{color:"dark"===e.mode?e.primaryBlack:e.white},secondaryOnDarkBackground:{color:"dark"===e.mode?e.primaryBlack:e.white,opacity:.8}})),[])}const B=2;function L(e){const{iconCellInfoArray:t,totalCount:a,showTooltip:s,isLoading:n}=e,o=(0,r().K8)((()=>t.sort(((e,t)=>{if("block"===e.type||"block"===t.type)return 0;const a="external_workspace"===e.type?e.name:e.store.getName(),s="external_workspace"===t.type?t.name:t.store.getName();return a||s?a&&!s?-1:!a&&s?1:a.localeCompare(s):0}))),[t]),i=(0,r().K8)((()=>o.map((e=>({renderAvatar:()=>(0,C.jsx)(E,{iconCellInfo:e}),renderTooltip:s?()=>k(e):void 0})))),[o,s]);return(0,C.jsx)(m().Qp,{avatars:i,totalCount:a,renderOverflowTooltip:s?()=>(0,C.jsx)(_,{iconCellInfoArray:o}):void 0,isLoading:n})}function E(e){const{iconCellInfo:t}=e,{name:a,icon:s,iconRecordCategory:n}=(0,r().K8)((()=>{if("block"===t.type){const e=t.store.getModel();return e?{name:e.getRenderTitle({getRecordModel:t.store.getRecordModel,userTimeZone:(0,d().P)(),intl:u().A.getIntl()}),icon:e.getRenderIcon({getRecordModel:t.store.getRecordModel}),iconRecordCategory:e.isCollectionView()?"collectionViewBlock":"pageBlock"}:{name:"",icon:void 0,iconRecordCategory:"pageBlock"}}return"external_workspace"===t.type?{name:t.name,icon:t.icon,iconRecordCategory:"workspace"}:{name:t.store.getName(),icon:t.store.getIcon(),iconRecordCategory:"workspace"===t.type?"workspace":"teamspace"}}),[t]),o=(0,l().IS)((e=>({icon:{borderRadius:5,marginRight:-B,border:`${B}px solid ${e.modalBackground}`,display:"flex",alignItems:"center",justifyContent:"center",height:m().tR+2*B,width:m().tR+2*B,background:s&&(0,c().T8)(s.icon)?(0,c().ez)({icon:s.icon,mode:e.mode,useLightGrayColor:!1}):e.palette.gray[75],zIndex:2,position:"relative"},iconContainer:{position:"relative"},iconBackground:{position:"absolute",top:0,bottom:0,left:0,right:0,background:e.contentBackground,zIndex:1}})),[s]);return(0,C.jsxs)("div",{style:o.iconContainer,children:[(0,C.jsx)("div",{style:o.icon,children:(0,C.jsx)(g().B6,{size:m().tR,emojiSize:m().Gz,disabled:!0,icon:s,iconRecordCategory:n,isEmptyPage:!1,title:"block"===t.type?void 0:a,isLarge:"block"!==t.type,isRaw:!1})}),(0,C.jsx)("div",{style:o.iconBackground})]})}function O(e){const{spaceStores:t,totalCount:a,showTooltip:s,isLoading:n}=e;return(0,C.jsx)(L,{iconCellInfoArray:t.map((e=>({type:"workspace",store:e}))),totalCount:a,showTooltip:s,isLoading:n})}function U(e){const{teamStores:t,totalCount:a,isLoading:s,showTooltip:n}=e;return(0,C.jsx)(L,{iconCellInfoArray:t.map((e=>({type:"team",store:e}))),totalCount:a,showTooltip:n,isLoading:s})}function F(e){const{workspaces:t,totalCount:a,showTooltip:r}=e,{spaceIds:l}=(0,s.useContext)(o().D),d=(0,i().l)(l),c=t.map((e=>l.includes(e.id)?{type:"workspace",store:d.find((t=>t.id===e.id))}:{type:"external_workspace",name:e.name??"",icon:e.icon?{pointer:{table:n().NX,id:e.id},icon:e.icon}:void 0}));return(0,C.jsx)(L,{iconCellInfoArray:c,totalCount:a,showTooltip:r,isLoading:!1})}function H(e){const{blockStores:t,totalCount:a,showTooltip:s,isLoading:n}=e;return(0,C.jsx)(L,{iconCellInfoArray:t.map((e=>({type:"block",store:e}))),totalCount:a,showTooltip:s,isLoading:n})}},818211:(e,t,a)=>{a.d(t,{Av:()=>n,NK:()=>r,Rx:()=>i,eG:()=>o,t_:()=>l});var s=()=>a(322769);function n(e,t){if(void 0!==e&&(0,s().me)(e))return!1;const a=(0,s().kF)(e)||(0,s().zq)(e);return!(void 0===e||!a||0!==t)||1===t}function o(e){return e.memberCount>1}function i(e){return!o(e)}function r(e){return Boolean(e.spaceRequest)}function l(e){return"free"!==e.subscriptionTier}},826658:(e,t,a)=>{a.d(t,{K:()=>l});a(296540);var s=()=>a(401497),n=()=>a(820579),o=()=>a(959013),i=()=>a(285790),r=a(474848);function l(e){const t=(0,o().tz)(),a=(0,s().IS)((e=>({icon:{width:21,height:void 0,fill:e.text.secondary},button:{display:"flex",alignItems:"center",fontSize:14,height:28,width:28,padding:6,color:e.text.secondary,fill:e.icon.secondary,lineHeight:1,borderRadius:4}})),[]);return(0,r.jsx)(i().A,{ariaLabel:t.formatMessage({id:"organization.shared.table.exportButton.label",defaultMessage:"Export content"}),icon:n().f,iconStyle:a.icon,style:a.button,onClick:e.onClick,disabled:e.disabled,disabledFeedback:e.disabled,disableBackground:e.disabled})}},829351:(e,t,a)=>{a.d(t,{V:()=>u});a(296540);var s=()=>a(662303),n=()=>a(401497),o=()=>a(869190),i=()=>a(959013),r=()=>a(859428),l=()=>a(125565),d=()=>a(962730),c=a(474848);function u(e){const{auditLogEntry:t,id:a}=e,u=(0,n().IS)((()=>({container:{display:"block",width:"100%"}})),[]);return(0,c.jsx)(r().A,{renderTooltip:()=>(0,c.jsx)("div",{style:{display:"flex",flexDirection:"column",fontVariantNumeric:"tabular-nums"},children:(0,c.jsx)("div",{children:(0,c.jsx)(i().sA,{id:"auditLogSettings.timeTooltip.utcTime",defaultMessage:"UTC: {time}",values:{time:(0,o().qV)(t.serverTimestamp)}})})}),render:e=>(0,c.jsx)("div",{id:a,style:u.container,children:(0,c.jsx)(l().A,{isSecondaryColor:!0,...e,children:(0,o().W_)(t.serverTimestamp,"medium_with_time",s().locale)})}),placement:d().W.Bottom})}},835470:(e,t,a)=>{a.d(t,{F:()=>s});const s=(0,a(340498).xh)("exclamationMarkCircle",{default:{loader:()=>a.e(64087).then(a.bind(a,129852))},small:{loader:()=>a.e(64087).then(a.bind(a,621594))},fill:{loader:()=>a.e(64087).then(a.bind(a,428390))},fillSmall:{loader:()=>a.e(64087).then(a.bind(a,297173))}},["exclamation","circle","alert","warning","attention"])},835607:(e,t,a)=>{a.r(t),a.d(t,{iconDefinition:()=>s,peopleIcon:()=>n});a(296540);const s={viewBox:"0 0 20 20",fittedViewBox:"0.85 2.79 18.76 14.42",svg:(0,a(474848).jsx)("path",{d:"M11.794 3.936c.57-.71 1.414-1.141 2.456-1.141s1.886.43 2.456 1.14c.558.696.823 1.618.823 2.582s-.265 1.885-.823 2.58c-.57.71-1.414 1.141-2.456 1.141s-1.886-.43-2.456-1.14c-.558-.696-.823-1.618-.823-2.581 0-.964.265-1.886.823-2.581m.975.782c-.341.426-.548 1.052-.548 1.799s.207 1.373.548 1.798c.33.41.813.673 1.481.673s1.152-.262 1.481-.673c.342-.425.548-1.051.548-1.798s-.206-1.373-.548-1.799c-.33-.41-.813-.673-1.48-.673-.669 0-1.152.263-1.482.673M5.75 3.625c-.956 0-1.734.396-2.259 1.05-.513.64-.755 1.484-.755 2.362s.242 1.723.755 2.362c.525.654 1.303 1.05 2.26 1.05s1.733-.396 2.258-1.05c.513-.64.755-1.484.755-2.362s-.242-1.723-.755-2.362c-.525-.654-1.302-1.05-2.259-1.05M3.986 7.037c0-.661.184-1.21.48-1.58.285-.354.702-.582 1.284-.582s1 .228 1.284.582c.297.37.48.919.48 1.58s-.183 1.21-.48 1.58c-.284.354-.701.582-1.284.582-.582 0-1-.228-1.284-.583-.296-.37-.48-.918-.48-1.579m-.948 8.918h4.69c.114.467.337.894.634 1.25H3.038c-.68 0-1.327-.286-1.742-.764-.432-.498-.606-1.209-.265-1.92.823-1.72 2.636-2.896 4.72-2.896 1.128 0 2.178.346 3.034.936a6.6 6.6 0 0 0-.681 1.05 4.1 4.1 0 0 0-2.354-.736c-1.611 0-2.98.908-3.592 2.186-.1.21-.063.393.082.56.161.186.456.334.798.334M14.25 11.21c-2.334 0-4.354 1.36-5.202 3.323-.309.715-.125 1.419.309 1.912.418.476 1.064.76 1.743.76h6.3c.68 0 1.325-.284 1.744-.76.433-.493.617-1.197.308-1.912-.848-1.963-2.868-3.324-5.202-3.324m-4.054 3.818c.645-1.494 2.207-2.569 4.054-2.569s3.409 1.075 4.055 2.57a.52.52 0 0 1-.1.59c-.166.19-.462.336-.805.336h-6.3c-.342 0-.638-.146-.805-.336a.52.52 0 0 1-.1-.59"})},n=(0,a(340498).wt)("people",s)},837503:(e,t,a)=>{a.d(t,{Q:()=>l});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(581454);var s=a(296540),n=()=>a(959013),o=()=>a(497799),i=()=>a(223544),r=a(474848);function l(e){let{spaceStore:t,createdByFilterIds:a,setCreatedByFilter:l,runNewSearch:d,includeGuests:c}=e;const u=(0,o().H)({spaceStore:t}),g=(0,s.useMemo)((()=>u.loading?[]:c?[...u.members,...u.guests]:u.members),[u,c]),m=(0,s.useMemo)((()=>u.loading?new Set:new Set(u.guests.map((e=>e.id)))),[u]);const p=(0,s.useMemo)((()=>a.map((e=>({id:e,type:"user"})))),[a]);return(0,r.jsx)(i().Jo,{userStores:g,title:(0,r.jsx)(n().sA,{id:"adminContentSearchTab.pagesTable.filters.createdBy.title",defaultMessage:"Created by"}),selectedItems:p,setSelectedItems:function(e){const t=e.map((e=>{let{id:t}=e;return t}));l(t)},onMenuClose:d||(()=>{}),isMultiSelect:!0,guestUserIdSet:m,includeGuests:c})}},843518:(e,t,a)=>{a.d(t,{F:()=>d});a(296540);var s=()=>a(484714),n=()=>a(401497),o=()=>a(175947),i=()=>a(277201),r=()=>a(38337),l=a(474848);function d(e){let{}=e;const{isElectronMac:t}=(0,s().Y0)(),a=function(e){return(0,n().IS)((t=>({container:{display:"flex",justifyContent:"flex-end",alignItems:"center",paddingRight:10,height:(0,o().ek)(e)},unexpand:{borderRadius:4,width:28,height:28},hoveredUnexpand:{fill:t.text.primary,background:t.sidebarItemSelectedBackground}})),[e])}(t);return(0,l.jsx)("div",{style:a.container,className:r().sbV,children:(0,l.jsx)("div",{className:r().qGl,children:(0,l.jsx)(i().I,{style:a.unexpand,hoveredStyle:a.hoveredUnexpand})})})}},846523:(e,t,a)=>{a.d(t,{u:()=>s});const s=(0,a(340498).xh)("questionMarkCircle",{default:{loader:()=>a.e(82106).then(a.bind(a,406533))},small:{loader:()=>a.e(82106).then(a.bind(a,721479))},fill:{loader:()=>a.e(82106).then(a.bind(a,299733))},fillSmall:{loader:()=>a.e(82106).then(a.bind(a,182060))}},["question","query","inquiry","uncertain","unknown","help","circle"])},861646:(e,t,a)=>{a.d(t,{Ay:()=>ut,Sr:()=>pt});var s=a(296540),n=()=>a(662303),o=()=>a(484714),i=()=>a(852507),r=()=>a(56366),l=()=>a(401497),d=()=>a(584262),c=()=>a(842599),u=()=>a(96689),g=()=>a(294712),m=()=>a(959013),p=()=>a(209199),h=()=>a(966505),f=()=>a(745638),x=()=>a(449506),v=()=>a(920093),y=()=>a(901389),b=()=>a(91709),S=()=>a(246826),j=()=>a(666144),w=()=>a(706024),A=()=>a(426116),M=()=>a(751156),C=()=>a(679924),I=()=>a(972435),T=()=>a(709062),k=()=>a(836251),_=()=>a(640653),z=()=>a(47170),D=()=>a(249847),P=()=>a(963589),N=()=>a(176983),R=()=>a(28119),B=()=>a(765957),L=()=>a(592674),E=()=>a(132813),O=()=>a(189157),U=()=>a(194763),F=()=>a(404141),H=()=>a(469776),V=()=>a(112698),W=()=>a(329304),q=()=>a(134217),G=()=>a(960236),K=()=>a(749240),Y=()=>a(500128),Q=()=>a(916727),$=()=>a(84817),X=()=>a(623580),Z=()=>a(554509),J=()=>a(864943),ee=()=>a(204063),te=()=>a(187820),ae=()=>a(125565),se=()=>a(690197),ne=()=>a(8178),oe=a(474848);const ie=function(e){let{handleExportClick:t}=e;const n=(0,r().O$)(B().default),{currentSpaceStore:i}=n,l=(0,r().O$)(a(544019).A),d=(0,o().v3)();return(0,s.useEffect)((()=>{b().X({environment:d,spaceId:null==i?void 0:i.id})}),[null==i?void 0:i.id,d]),(0,oe.jsxs)(s.Fragment,{children:[(0,oe.jsx)(ne().A,{children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.exportContentSection.title",defaultMessage:"Export content"})}),(0,oe.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,oe.jsx)(J().A,{disabled:Boolean(l.count),size:"lg",onClick:t,children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.exportContentSection.exportButton.label",defaultMessage:"Export all workspace content"})}),l.count?(0,oe.jsxs)(a(21140).Ye,{gap:4,children:[(0,oe.jsx)(a(331542).A,{}),(0,oe.jsxs)(ae().A,{isSmall:!0,children:[(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.exportContentSection.exportInProgress",defaultMessage:"Export in progress"}),l.exportedPageCount?(0,oe.jsx)(oe.Fragment,{children:` (${l.exportedPageCount} pages exported)`}):(0,oe.jsx)(oe.Fragment,{})]})]}):(0,oe.jsx)(oe.Fragment,{})]}),(0,oe.jsx)("div",{style:{height:12}}),(0,oe.jsx)(se().A,{title:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.exportContentSection.helpButton.caption",defaultMessage:"Learn about exporting workspaces."}),href:(0,k().xS)("guides.exportWorkspace"),analyticsFrom:"space_settings"})]})};var re=()=>a(719147),le=()=>a(418884),de=()=>a(702723),ce=()=>a(792223),ue=()=>a(963605),ge=()=>a(263868);function me(e){let{spaceStore:t,organizationOverrides:a}=e;const n=(0,o().v3)(),{isMobile:i}=n.device,r=(0,ce().CR)({spaceStore:t}),d=(0,ce().tU)({spaceStore:t}),c=(0,l().IS)((()=>({settingsItem:{paddingBottom:24}})),[]);if(!r&&!d)return null;const u=Boolean(a.disable_people_hover_card),g=Boolean(a.disable_people_directory);return(0,oe.jsxs)(s.Fragment,{children:[(0,oe.jsx)(ne().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.general.peopleSection.title",defaultMessage:"People"})}),d?(0,oe.jsx)("div",{style:c.settingsItem,children:(0,oe.jsx)(ue().VZ,{spaceStore:t,isLocked:g,isMobile:i})}):null,r?(0,oe.jsx)("div",{style:c.settingsItem,children:(0,oe.jsx)(ge().O,{spaceStore:t,isLocked:u,isMobile:i})}):null]})}a(898992),a(354520),a(581454);var pe=()=>a(784892),he=()=>a(187174),fe=()=>a(798880),xe=()=>a(979340),ve=()=>a(965597),ye=()=>a(778078),be=()=>a(496603),Se=()=>a(780054),je=()=>a(722872),we=()=>a(17281),Ae=()=>a(645873);const Me={WorkspaceDiscoveryAdminSetting:new(Ae().O2)("WorkspaceDiscoveryAdminSetting",(async()=>a.e(51799).then(a.bind(a,770790))))},Ce=(0,Ae()._h)(Me.WorkspaceDiscoveryAdminSetting,(e=>e.WorkspaceDiscoveryAdminSetting));var Ie=()=>a(377586),Te=()=>a(217429),ke=()=>a(630116),_e=()=>a(378941),ze=()=>a(66913),De=()=>a(12193),Pe=()=>a(939768),Ne=()=>a(493823),Re=()=>a(843189),Be=()=>a(802790),Le=()=>a(364280),Ee=()=>a(285790),Oe=()=>a(641514);const Ue=(0,m().YK)({closeModalAriaLabel:{id:"requestMembershipCustomizationUrlButton.closeModalAriaLabel",defaultMessage:"Close request membership customization modal"}});function Fe(e){const t=(0,o().v3)(),{spaceStore:a,isOpen:n,onDismiss:i}=e,[r,d]=(0,s.useState)(""),[c,u]=(0,s.useState)(!1),g=(0,s.useCallback)((e=>""===e||(0,Pe().AY)(e)),[]);(0,s.useEffect)((()=>{d(a.getSettings().request_membership_customization_redirect_url||"")}),[a]);const p=(0,l().IS)((e=>({modal:{maxWidth:500,paddingTop:20,fontSize:14,borderRadius:10},cancelButton:{position:"absolute",top:"10px",right:"10px"},title:{margin:"10px 0"},errorText:{color:e.errorText,fontSize:12},button:{padding:"6px 12px"},icon:{width:36,height:36,color:e.text.secondary},header:{padding:"0px 20px",maxWidth:300}})),[]),h=(0,s.useCallback)((async e=>{await x().callApi({eventName:"updateSpaceTrustedDomainSettings",environment:t,data:{spaceId:a.id,newRequestMembershipCustomizationRedirectUrl:e}})}),[t,a]);return(0,oe.jsx)(Oe().A,{innerStyle:p.modal,isOpen:n,onDismiss:i,render:()=>(0,oe.jsxs)(Le().VP,{alignItems:"center",children:[(0,oe.jsx)(Ee().A,{icon:ze().V,onClick:i,style:p.cancelButton,ariaLabel:I().A.formatMessage(Ue.closeModalAriaLabel)}),(0,oe.jsx)(ne().A,{large:!0,style:p.header,children:(0,oe.jsxs)(Le().VP,{alignItems:"center",children:[(0,oe.jsx)("div",{style:{...p.icon},children:(0,De().globeIcon)()}),(0,oe.jsx)(Z().D,{styleName:"Heading-17px/Semibold",colorName:"primary",customStyles:p.title,children:(0,oe.jsx)(m().sA,{id:"requestMembershipCustomizationUrlButton.title",defaultMessage:"Customize request access link"})}),(0,oe.jsx)(Z().D,{styleName:"Body-14px/Regular",colorName:"secondary",customStyles:{textAlign:"center"},children:(0,oe.jsx)(m().sA,{id:"requestMembershipCustomizationUrlButton.byline",defaultMessage:"Customize the destination when users request to join workspace"})})]})}),(0,oe.jsxs)(Le().VP,{alignItems:"start",gap:4,marginTop:24,paddingLeft:20,paddingRight:20,children:[(0,oe.jsx)(Z().D,{styleName:"Body-12px/Medium",colorName:"secondary",customStyles:{marginBottom:6},children:(0,oe.jsx)(m().sA,{id:"requestMembershipCustomizationUrlButton.input.label",defaultMessage:"Custom URL"})}),(0,oe.jsx)(X().A,{type:"text",value:r,onChange:e=>{const t=e.target.value;d(t),u(!g(t))},focusInitial:!0}),c?(0,oe.jsx)("div",{style:{...p.errorText},children:(0,oe.jsx)(m().sA,{id:"requestMembershipCustomizationUrlButton.invalidUrl",defaultMessage:"Invalid URL"})}):null,(0,oe.jsx)(Z().D,{styleName:"Body-12px/Regular",colorName:"secondary",customStyles:{marginTop:6,textAlign:"start",marginBottom:14},children:(0,oe.jsx)(m().sA,{id:"requestMembershipCustomizationUrlButton.input.hint",defaultMessage:"Users will be redirected to this URL when they request to join workspace."})})]}),(0,oe.jsx)(Be().A,{size:20}),(0,oe.jsxs)(Le().fI,{justifyContent:"flex-end",gap:12,paddingLeft:20,paddingRight:20,paddingBottom:12,width:"100%",children:[(0,oe.jsx)(Re().E,{style:p.button,onClick:i,children:(0,oe.jsx)(m().sA,{defaultMessage:"Cancel",id:"requestMembershipCustomizationUrlButton.cancel.label"})}),(0,oe.jsx)(ee().A,{style:p.button,onClick:async()=>{await h(r),i()},disabled:!g(r),children:(0,oe.jsx)(m().sA,{defaultMessage:"Save action",id:"requestMembershipCustomizationUrlButton.save.label"})})]})]})})}function He(e){const{spaceStore:t}=e,[a,n]=(0,s.useState)(!1);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Ne().p,{isBlue:!0,style:{marginRight:"16px"},onClick:()=>n(!0),children:(0,oe.jsx)(m().sA,{defaultMessage:"Customize",id:"requestMembershipCustomizationUrlButton.customizeAction.label"})}),(0,oe.jsx)(Fe,{spaceStore:t,isOpen:a,onDismiss:()=>n(!1)})]})}var Ve=()=>a(760217),We=()=>a(928600),qe=()=>a(939740),Ge=()=>a(897119),Ke=()=>a(89924),Ye=()=>a(946548),Qe=()=>a(881690),$e=()=>a(297780);const Xe=(0,m().YK)({allowedEmailDomainsInputPlaceholder:{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainInput.placeholder",defaultMessage:"Type an email domain…"}});function Ze(e){const{spaceStore:t}=e,a=(0,o().v3)(),{canAdminSpaceStore:n}=(0,r().K8)((()=>({canAdminSpaceStore:t.canAdmin()})),[t]),l=(0,D().T)(),d=(0,r().uB)(e.spaceBasicSettingsStore,U().A),c=(0,r().uB)(e.securitySettingsStore,E().A),u=(0,r().K8)((()=>(0,_().IL)(t)),[t]);(0,i().l)((()=>{const e=d.getValueForSpace(t),a=c.getValueForSpace(t);e&&d.setState(e),a&&c.setState(a)}));const[g]=(0,he().Yb)((async()=>({trustedDomainNumMembers:n?await(0,_e().hs)({environment:a,spaceId:t.id,currentUserId:l}):[]})),[a,t,l,n]),p=(0,r().K8)((()=>{if("resolved"!==g.status)return[];const e=g.value.trustedDomainNumMembers.map((e=>e.trustedDomain.id));return(0,_e().J7)({trustedDomainIds:e,spaceStore:t})}),[t,g]),h=(0,r().K8)((()=>be().oE(p.filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())))),[p]),f=(0,r().K8)((()=>q().vl(a)),[a]),x=at();return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Je,{}),u&&(0,oe.jsx)("div",{style:x.settingsItem,children:(0,oe.jsx)(ae().A,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"},children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.guestLimitedAccessMessage",defaultMessage:"You are currently a guest in this workspace. Ask an admin to add you as a member in order to see other pages."})})}),n&&f&&(0,oe.jsxs)(s.Fragment,{children:[(0,oe.jsxs)("div",{style:x.settingsItem,children:[(0,oe.jsx)(ne().A,{children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.title",defaultMessage:"Allowed email domains"})}),(0,oe.jsx)(et,{spaceStore:t,spaceBasicSettingsStore:d,trustedEmailDomains:h}),(0,oe.jsx)(ae().A,{isSmall:!0,isMultiline:!0,style:{marginTop:4,marginBottom:4},children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainInput.caption",defaultMessage:"Anyone with email addresses at these domains can automatically join your workspace."})})]}),(0,oe.jsx)(tt,{spaceBasicSettingsStore:d,spaceStore:t,trustedDomainsState:g}),(0,oe.jsx)(Ce,{spaceStore:t})]})]})}function Je(){return(0,oe.jsx)(ne().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.public.subtitle",defaultMessage:"Public settings"})})}function et(e){let{spaceStore:t,spaceBasicSettingsStore:a,trustedEmailDomains:n}=e;const o=(0,m().tz)(),i=Se().A.isMobile,[l,d]=(0,s.useState)(""),u=(0,r().K8)((()=>a.state.emailDomains),[a]),g=(0,r().K8)((()=>t.canAdmin()),[t]),p=(0,r().O$)(K().subscriptionDataStoreInstance),h=(0,P().X)("edge_cache_member_email_domains"),f=(0,we().h)(t.id),x=(0,s.useCallback)((e=>{d(e.target.value)}),[]);return(0,oe.jsx)(Ge().Ay,{popupType:i?Ie().n.BottomSheet:Ie().n.Popup,sameWidthAsOrigin:!0,open:l.length>0,trapFocus:!1,origin:(0,oe.jsx)($e().A,{placeholder:o.formatMessage(Xe.allowedEmailDomainsInputPlaceholder),value:l,onChange:x,readOnly:!g,onRemoveLastToken:()=>{const e=u.slice(0,u.length-1);a.setState({...a.state,emailDomains:e})},tokens:u.map((e=>(0,oe.jsx)(Qe().A,{showRemoveButton:!0,isSingle:!1,format:pe().NY.Medium,onClickRemove:()=>{const t=u.filter((t=>t!==e));a.setState({...a.state,emailDomains:t})},value:e},e)))}),render:()=>{const e=l.trim(),s=(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainsDropdown.placeholder",defaultMessage:"Type an email domain…"}),o=(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainsDropdown.placeholderNoResults",defaultMessage:"Type an email domain of a member of this workspace…"}),r=function(e){const{subscriptionData:t,spaceStore:a,emailDomainsToExclude:s}=e;return t?q().Ye(t).map((e=>{if(("unsubscribed_admin"===t.type||"unsubscribed_member"===t.type||"subscribed_admin"===t.type)&&t.joinedMemberIds.includes(e.userId)){const t=ke().LU.createChildStore(a,{table:fe().oo,id:e.userId}).getEmail();return t&&(0,c().zN)(t)}})).filter(((e,t,a)=>Boolean(e&&e&&t===a.indexOf(e)&&!s.includes(e)))):[]}({subscriptionData:p,spaceStore:t,emailDomainsToExclude:[...u,...n]}),g=h?(f??[]).filter((e=>!u.includes(e)&&!n.includes(e))):r,x=(0,ye().Ay)(e,(0,be().oE)(g),(e=>e)).map(((e,t)=>({key:t,render:t=>(0,oe.jsx)(Ve().A,{...t,title:e}),action:()=>{const t=[...u,e];a.setState({...a.state,emailDomains:t}),d("")}})));let v;return v=i?{menuType:je().gu.ActionSheet}:{menuType:je().gu.Popup,width:"100%"},(0,oe.jsx)(We().A,{...v,children:(0,oe.jsx)(qe().Ay,{type:qe().Oh.Vertical,initialFocus:x.length>0?0:void 0,sections:[{key:0,render:e=>(0,oe.jsx)(Ke().A,{...e,disableDesktopPadding:!0,title:x.length>0?s:o}),items:x}]})})},onDismiss:()=>{d("")}})}function tt(e){let{spaceStore:t,spaceBasicSettingsStore:a,trustedDomainsState:n}=e;const i=(0,o().v3)(),l=Boolean(Se().A.isMobile),d=(0,r().K8)((()=>(0,xe().OX)(t.getSubscriptionTier())),[t]),c=(0,r().K8)((()=>t.getName()),[t]),u=(0,r().K8)((()=>Boolean("request_to_join"===t.getSettings().join_space_method)),[t]),g=(0,r().K8)((()=>(0,ve().ko)(t.getModel())),[t]),p=(0,r().K8)((()=>(0,ve().Hm)(t.getModel())),[t]),h=(0,r().K8)((()=>Te().default.checkGate({gateName:"domain_link_sharing_redesign_override",disableExposureLogging:!0})||"on"===Te().default.getEligibleGroup({experimentId:"domain_link_sharing_redesign",defaultGroup:"control"})),[]),f=(0,s.useCallback)((async e=>{const{newDomainLinkSharingValue:a,newJoinSpaceMethod:s}=e;await x().callApi({eventName:"updateSpaceTrustedDomainSettings",environment:i,data:{spaceId:t.id,newDomainLinkSharingValue:a,newJoinSpaceMethod:s}})}),[i,t]),v=(0,s.useCallback)((async()=>{await f({newDomainLinkSharingValue:!p})}),[f,p]),y=(0,s.useCallback)((async()=>{const e=u?"click_to_join":"request_to_join";await f({newJoinSpaceMethod:e})}),[f,u]),b=(0,r().K8)((()=>a.state.emailDomains.length>0),[a]),S=at();return"resolved"===n.status&&b&&g&&h?(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)("div",{style:S.settingsItem,children:(0,oe.jsx)(de().A,{isMobile:l,disabled:!d,upsellOptions:{shouldUpsell:!d,subscriptionTier:"enterprise",analyticsName:"trusted_domain_item"},title:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.trustedDomainsSection.allowShareWithTrustedDomains.title",defaultMessage:"Enable organization-wide access for pages shared with this workspace"}),caption:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.trustedDomainsSection.allowShareWithTrustedDomains.description",defaultMessage:"Allow teammates with trusted email domains who aren’t workspace members to access pages shared with “Everyone at {spaceName}”",values:{spaceName:c}}),type:"toggle",isOn:p,onToggle:v})}),(0,oe.jsx)("div",{style:S.settingsItem,children:(0,oe.jsx)(de().A,{isMobile:l,disabled:!d,upsellOptions:{shouldUpsell:!d,subscriptionTier:"enterprise",analyticsName:"trusted_domain_item"},title:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.trustedDomainsSection.setJoinSpaceMethod.title",defaultMessage:"Teammates with trusted email domains can join"}),caption:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.trustedDomainsSection.setJoinSpaceMethod.description",defaultMessage:"Allow teammates with trusted email domains to join this workspace without requesting access"}),type:"custom",customButton:(0,oe.jsxs)(Le().fI,{children:[u&&d&&(0,oe.jsx)(He,{spaceStore:t}),(0,oe.jsx)(Le().VP,{justifyContent:"center",children:(0,oe.jsx)(Ye().A,{on:!u,disabled:!d,onClick:y})})]}),disableSettingsItemClick:!0})})]}):null}function at(){return(0,l().IS)((()=>({settingsItem:{paddingBottom:24}})),[])}function st(){return(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.workspaceNameSection.nameInput.caption",defaultMessage:"You can use your organization or company name. Keep it simple."})}const nt=(0,m().YK)({nameInputPlaceholder:{id:"spaceBasicSettings.nameInput.placeholder",defaultMessage:"e.g. company name"},activateHIPAAButton:{id:"spaceBasicSettings.hipaaCompliance.activateButton.label",defaultMessage:"Activate"},deactivateHIPAAButton:{id:"spaceBasicSettings.hipaaCompliance.deactivateButton.label",defaultMessage:"Deactivate"}});function ot(e){const{spaceStore:t,organizationOverrides:n,billingData:d}=e,c=(0,o().v3)(),{canAdminSpaceStore:u,spaceId:g}=(0,r().K8)((()=>({canAdminSpaceStore:t.canAdmin(),spaceId:t.id})),[t]),p=(0,D().T)(),f=(0,r().uB)(e.spaceBasicSettingsStore,U().A),x=(0,r().uB)(e.securitySettingsStore,E().A),v=(0,r().K8)((()=>(0,_().IL)(t)),[t]),S=(0,W().P9)({name:"hipaa_compliance",spaceId:g,userId:p});(0,i().l)((()=>{const e=f.getValueForSpace(t),a=x.getValueForSpace(t);e&&f.setState(e),a&&x.setState(a)}));const j=(0,P().X)("notion_ai_workspace_settings"),w=(0,r().K8)((()=>!j&&(0,Q().LR)({spaceStore:t,billingData:d})),[t,j,d]),M=(0,r().K8)((()=>!j&&(0,a(592420).Q)(c)),[c,j]),C=S&&u,I=(0,r().K8)((()=>u&&!t.getDisableExport()),[u,t]),T=(0,a(240865).V)()??1,z=(0,l().IS)((()=>({dangerZoneContainer:{display:"flex",flexWrap:"wrap",gap:"16px 12px"},gap:{height:12}})),[]),N=bt(),R=(0,r().K8)((()=>(0,a(807778).D3)()),[]);return(0,oe.jsxs)(a(843878).Ay,{controlRow:u&&(0,oe.jsx)(yt,{spaceStore:t,spaceBasicSettingsStore:f,securitySettingsStore:x}),controlRowPaddingTopBottom:14,children:[u&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(mt,{}),(0,oe.jsx)(it,{spaceStore:t,spaceBasicSettingsStore:f}),(0,oe.jsx)(rt,{spaceStore:t,spaceBasicSettingsStore:f}),R?(0,oe.jsx)(lt,{}):null]}),(M||w||C)&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(gt,{}),M&&(0,oe.jsx)("div",{style:N.settingsItem,children:(0,oe.jsx)(Q().aV,{billingData:d,spaceStore:t})}),w&&(0,oe.jsx)("div",{style:N.settingsItem,children:(0,oe.jsx)(Q().Iu,{securitySettingsStore:x})}),C&&(0,oe.jsx)(ft,{spaceStore:t,securitySettingsStore:x,spaceBasicSettingsStore:f})]}),(0,oe.jsx)(Ze,{spaceStore:t,spaceBasicSettingsStore:f,securitySettingsStore:x}),I||u?(0,oe.jsx)(ne().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.export.subtitle",defaultMessage:"Export"})}):void 0,I&&(0,oe.jsx)("div",{style:N.settingsItem,children:(0,oe.jsx)(ie,{handleExportClick:()=>function(e){const{currentSpaceStore:t}=B().default.state;t&&b().Ss({environment:e,root:{table:"space",id:t.id,spaceId:t.id},isCollectionViewExportTypeSupported:!0})}(c)})}),u&&(0,oe.jsx)(ct,{}),u&&(0,oe.jsx)(dt,{spaceStore:t,spaceBasicSettingsStore:f,organizationOverrides:n}),(0,oe.jsx)(me,{spaceStore:t,organizationOverrides:n}),(0,oe.jsx)(ne().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.dangerousSettingsSection.title",defaultMessage:"Danger zone"})}),(0,oe.jsxs)("div",{style:z.dangerZoneContainer,children:[(T>1||v)&&(0,oe.jsx)(J().A,{size:"lg",onClick:()=>function(e,t){const{currentUserSettingsStore:a}=B().default.state;a&&y().ui({message:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.leaveWorkspaceConfirmationDialog.prompt",defaultMessage:"Are you sure you want to leave this workspace?"}),showCancel:!0,keepFocus:!0,items:[{label:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.leaveWorkspaceConfirmationDialog.leaveButton.label",defaultMessage:"Leave"}),color:"red",onAccept:async()=>{await A().ev({environment:t,spaceId:e.id,userSettingsStore:a})&&(h().dp(t),F().A.setState({...F().A.state,open:!1}))}}]})}(t,c),children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.dangerousSettingsSection.leaveWorkspaceButton.label",defaultMessage:"Leave workspace"})}),u&&(0,oe.jsx)(vt,{spaceStore:e.spaceStore})]}),u&&(0,oe.jsxs)(s.Fragment,{children:[(0,oe.jsx)("div",{style:z.gap}),(0,oe.jsx)(se().A,{title:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.dangerousSettingsSection.deleteWorkspaceHelpButton.caption",defaultMessage:"Learn about deleting workspaces."}),href:(0,k().xS)("guides.deleteWorkspace"),analyticsFrom:"space_settings"})]})]})}function it(e){let{spaceStore:t,spaceBasicSettingsStore:a}=e;const n=(0,r().K8)((()=>a.state.name),[a]),o=(0,s.useCallback)((e=>{a.setState({...a.state,name:e.target.value})}),[a]),i=(0,l().IS)((()=>({label:{marginTop:4}})),[]),d=bt();return(0,oe.jsxs)("div",{style:d.settingsItem,children:[(0,oe.jsx)(ne().A,{children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.workspaceNameSection.title",defaultMessage:"Name"})}),(0,oe.jsx)(X().A,{value:n,placeholder:I().A.formatMessage(nt.nameInputPlaceholder),readOnly:!1,onChange:o,maxlength:u().zX}),(0,oe.jsx)(ae().A,{isSmall:!0,isMultiline:!0,style:i.label,children:(0,oe.jsx)(st,{})})]})}function rt(e){let{spaceStore:t,spaceBasicSettingsStore:a}=e;const n=(0,o().v3)(),i=(0,r().K8)((()=>(0,_().c2)(n,t)),[n,t]),d=(0,r().K8)((()=>a.state.name),[a]),c=(0,r().K8)((()=>({recordTable:t.table,source:"workspace_settings"})),[t]),u=(0,s.useCallback)((e=>{M().createAndCommit({userAction:"SpaceBasicSettings.handleRecordIconChange",environment:n,canUndo:!0,perform:a=>{S().KY({store:t.getIconStore(),value:e,transaction:a})}})}),[n,t]),g=(0,l().IS)((e=>({iconContainer:{width:72,height:72,border:`1px solid ${e.regularDividerColor}`,borderRadius:6,display:"flex",justifyContent:"center",alignItems:"center"},label:{marginTop:8}})),[]),p=bt();return(0,oe.jsxs)("div",{style:p.settingsItem,children:[(0,oe.jsx)(ne().A,{children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.workspaceIconSection.title",defaultMessage:"Icon"})}),(0,oe.jsx)("div",{style:g.iconContainer,children:(0,oe.jsx)(te().B6,{bucket:"public",disabled:!1,icon:i,iconRecordCategory:"workspace",isEmptyPage:!1,title:d,size:64,iconLoggingData:c,onChange:u})}),(0,oe.jsx)(ae().A,{isSmall:!0,isMultiline:!0,style:g.label,children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.workspaceIconSection.caption",defaultMessage:"Upload an image or pick an emoji. It will show up in your sidebar and notifications."})})]})}function lt(){const e=bt(),[t]=(0,s.useState)(0);return(0,oe.jsxs)("div",{style:{...e.settingsItem},children:[(0,oe.jsx)(ne().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.workspaceReferralSection.title",defaultMessage:"Referrals"})}),(0,oe.jsxs)($().Y1,{gap:16,direction:"horizontal",children:[(0,oe.jsxs)($().Y1,{direction:"vertical",gap:3,children:[(0,oe.jsx)(Z().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.workspaceReferralSection.subtitle",defaultMessage:"Referral link"})}),(0,oe.jsx)(Z().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.workspaceReferralSection.caption",defaultMessage:"Refer 3 people to Notion and get 50% off Plus for 12 months"})})]}),(0,oe.jsxs)($().Y1,{gap:16,direction:"horizontal",align:"center-right",width:"hug",children:[(0,oe.jsx)(Z().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.workspaceReferralSection.redemptionCounter",defaultMessage:"{count, plural, =0{0/3 redemptions} one{1/3 redemptions} =2{2/3 redemptions} =3{3/3 redemptions} other{# redemptions}}",values:{count:t}})}),(0,oe.jsx)(ee().A,{size:"lg",children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.workspaceReferralSection.share.button.label",defaultMessage:"Share"})})]})]})]})}function dt(e){let{spaceStore:t,spaceBasicSettingsStore:a,organizationOverrides:n}=e;const i=(0,o().v3)(),{isMobile:d}=i.device,c=(0,r().K8)((()=>t.getSettings().disable_page_analytics),[t]),u=Boolean(n.disable_page_analytics),g=(0,r().K8)((()=>a.state.name),[a]),p=(0,s.useCallback)((()=>{if(u)return;const e=!c;M().createAndCommit({userAction:"SpaceBasicSettings.analyticsSettings.onSelectOption",environment:i,canUndo:!0,perform:a=>{S().zv({store:t,data:{settings:{...t.getSettings(),disable_page_analytics:e}},transaction:a})}}),(0,C().v)(i,e?"page_analytics_workspace_opt_out":"page_analytics_workspace_opt_in")}),[c,i,u,t]),h=(0,l().IS)((()=>({toggleContainer:{display:"flex",gap:12,flexDirection:"column"}})),[]),f=bt();return(0,oe.jsxs)(s.Fragment,{children:[(0,oe.jsx)(ne().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.analytics.title",defaultMessage:"Analytics"})}),(0,oe.jsxs)("div",{style:{...h.toggleContainer,...f.settingsItem},children:[(0,oe.jsx)(de().A,{isMobile:d,title:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.analytics.settings.title",defaultMessage:"Save and display page view analytics"}),caption:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.analytics.settings.description",defaultMessage:"People with edit or full access will be able to see how many views a page has. If this is turned off, page views will not be stored for all pages in {workspaceName}.",values:{workspaceName:g}}),type:"toggle",isOn:!c,isLocked:u,lockedTooltip:(0,T().C_)(),onToggle:p}),(0,oe.jsx)(se().A,{title:(0,oe.jsx)(m().sA,{defaultMessage:"Learn about workspace analytics.",id:"spaceBasicSettings.workspaceAnalytics.helpButton.caption"}),href:(0,k().xS)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq"})]})]})}function ct(){const e=(0,o().v3)(),t=(0,m().tz)(),a=(0,z().O)(),n=(0,r().K8)((()=>{var t;return null===(t=e.currentUser)||void 0===t?void 0:t.id}),[e]),i=(0,W()._X)({name:"export_members",spaceId:a,userId:n}),d=(0,N().J)(),c=(0,r().K8)((()=>d&&"available"===(null==i?void 0:i.type)),[d,i]),u=(0,s.useCallback)((()=>{!function(e,t){const{currentSpaceStore:a}=B().default.state,s=K().subscriptionDataStoreInstance.state;a&&s&&"subscribed_admin"===s.type&&b().IG(t,{spaceStore:a,subscriptionData:s,intl:e})}(t,e)}),[e,t]),g=(0,l().IS)((()=>({button:{display:"flex"},gap:{height:12}})),[]),p=bt();return(0,oe.jsxs)("div",{style:p.settingsItem,children:[(0,oe.jsx)(ne().A,{children:(0,oe.jsxs)($().Y1,{direction:"horizontal",align:"center-left",gap:8,children:[(0,oe.jsx)("span",{children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.exportMembersSection.title",defaultMessage:"Export members"})}),null!=i&&i.upsell?(0,oe.jsx)(Y().K,{source:"space_export_members",display:"icon",upsell:i.upsell,children:!c&&null!=i&&i.upsell?(0,oe.jsx)(V().B,{upsell:i.upsell,analyticsName:"space_export_members"}):null}):null]})}),(0,oe.jsx)("div",{style:g.button,children:(0,oe.jsx)(J().A,{size:"lg",disabled:!c,onClick:u,disabledFeedback:!0,children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.exportMembersSection.exportAsCSVButton.label",defaultMessage:"Export members as CSV"})})}),(0,oe.jsx)("div",{style:g.gap}),(0,oe.jsx)(se().A,{title:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.exportMembersSection.helpButton.caption",defaultMessage:"Learn about exporting members."}),href:(0,k().xS)("guides.exportMembers"),analyticsFrom:"space_settings"})]})}const ut=s.memo(ot);function gt(){return(0,oe.jsx)(ne().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.feature.subtitle",defaultMessage:"Feature settings"})})}function mt(){return(0,oe.jsx)(ne().A,{large:!0,divider:"full",children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.title",defaultMessage:"Workspace settings"})})}async function pt(e,t,a,s,o){const{currentUserSettingsStore:i}=B().default.state;if(!i)return;const r=(0,_().GK)(a,e)||t.formatMessage({defaultMessage:"Untitled workspace",id:"spaceBasicSettings.deleteWorkspace.untitledWorkspace.placeholder"}),l=(0,p().vL)(n().locale)?(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.prompt",defaultMessage:"This action cannot be undone. This will permanently delete the workspace, including all pages and files. Please type the name of the workspace to confirm."}):(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsx)(le().A,{translations:{es:"Esta acción no se puede deshacer. Esto eliminará permanentemente el espacio de trabajo, incluidas todas las páginas y archivos. Por favor escriba el nombre del espacio de trabajo para confirmar.",ru:"Это действие не может быть отменено. Это навсегда удалит рабочее пространство, включая все страницы и файлы. Пожалуйста, введите название рабочей области для подтверждения.",zh:"此操作无法撤消。 这将永久删除工作区，包括所有页面和文件。 请输入要确认的工作空间的名称。",de:"Diese Aktion kann nicht rückgängig gemacht werden. Dadurch wird der Arbeitsbereich einschließlich aller Seiten und Dateien dauerhaft gelöscht. Bitte geben Sie den Namen des Arbeitsbereichs zur Bestätigung ein.",fr:"Cette action ne peut pas être annulée. Cela supprimera définitivement l'espace de travail, y compris toutes les pages et tous les fichiers. Veuillez saisir le nom de l'espace de travail pour confirmer.",ja:"この操作を元に戻すことはできません。 これにより、すべてのページとファイルを含むワークスペースが完全に削除されます。 確認するワークスペースの名前を入力してください。",it:"Questa azione non può essere annullata. Questo eliminerà definitivamente l'area di lavoro, incluse tutte le pagine e i file. Digita il nome dell'area di lavoro per confermare.",pt:"Essa ação não pode ser desfeita. Isso excluirá permanentemente o espaço de trabalho, incluindo todas as páginas e arquivos. Por favor, digite o nome do espaço de trabalho para confirmar.",nl:"Deze actie kan niet ongedaan gemaakt worden. Hiermee wordt de werkruimte permanent verwijderd, inclusief alle pagina's en bestanden. Typ de naam van de werkruimte om te bevestigen.",pl:"Tego działania nie można cofnąć. Spowoduje to trwałe usunięcie obszaru roboczego, w tym wszystkich stron i plików. Wpisz nazwę obszaru roboczego, aby potwierdzić.",sv:"Den här åtgärden kan inte ångras. Detta tar bort arbetsytan permanent, inklusive alla sidor och filer. Vänligen skriv in arbetsplatsens namn för att bekräfta.",uk:"Цю дію не можна скасувати. Це дозволить остаточно видалити робочу область, включаючи всі сторінки та файли. Введіть назву робочої області для підтвердження.",no:"Denne handlingen kan ikke fortrykkes. Dette vil permanent slette arbeidsområdet, inkludert alle sider og filer. Vennligst skriv navnet på arbeidsområdet for å bekrefte.",tr:"Bu işlem geri alınamaz. Bu, tüm sayfaları ve dosyaları içeren çalışma alanını kalıcı olarak siler. Lütfen onaylamak için çalışma alanının adını yazın.",cs:"Tuto akci nelze vrátit zpět. Tím se trvale odstraní pracovní prostor včetně všech stránek a souborů. Zadejte prosím název pracovního prostoru, který chcete potvrdit.",vi:"Hành động này không thể được hoàn tác. Điều này sẽ xóa vĩnh viễn không gian làm việc, bao gồm tất cả các trang và tệp. Vui lòng nhập tên của không gian làm việc để xác nhận.",da:"Denne handling kan ikke fortrydes. Dette vil permanent slette arbejdsområdet, inklusive alle sider og filer. Indtast navnet på arbejdsområdet for at bekræfte.",hu:"Ez a művelet nem visszavonható. Ez véglegesen törli a munkaterületet, beleértve az összes oldalt és fájlt. Kérjük, írja be a munkaterület nevét a megerősítéshez.",ar:"لا يمكن التراجع عن هذا الإجراء. سيؤدي ذلك إلى حذف مساحة العمل كليا ، بما يشمل جميع الصفحات والملفات. يرجى كتابة اسم مساحة العمل للتأكيد.",th:"การกระทำนี้ไม่สามารถยกเลิกได้ นี่จะเป็นการลบพื้นที่ทำงานอย่างถาวรรวมถึงหน้าและไฟล์ทั้งหมด โปรดพิมพ์ชื่อของพื้นที่ทำงานเพื่อยืนยัน",he:"לא ניתן לבטל פעולה זו. פעולה זו תמחק לצמיתות את סביבת העבודה, כולל כל הדפים והקבצים. הקלד את שם מרחב העבודה כדי לאשר.",fi:"Tätä toimintoa ei voi peruuttaa. Tämä poistaa työtilan pysyvästi, mukaan lukien kaikki sivut ja tiedostot. Vahvista kirjoittamalla työtilan nimi.",id:"Tindakan ini tidak bisa dibatalkan. Ini akan secara permanen menghapus ruang kerja, termasuk semua halaman dan file. Silakan ketik nama ruang kerja untuk mengonfirmasi."}})});await v().h({title:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.title",defaultMessage:"Delete this entire workspace permanently?"}),message:l,acceptLabel:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.deleteWorkspaceButton.label",defaultMessage:"Permanently delete workspace"}),requiredInputValue:r})&&(A().cN({environment:a,spaceId:e.id,onDelete:s,organizationId:o}),h().db(a),F().A.setState({...F().A.state,open:!1}))}function ht(){F().A.setState({...F().A.state,open:!1}),O().A.setState(O().A.getInitialState())}function ft(e){let{spaceStore:t,securitySettingsStore:a,spaceBasicSettingsStore:s}=e;const n=(0,l().IS)((()=>({title:{display:"flex",alignItems:"center",gap:8}})),[]),o=bt();return(0,oe.jsx)("div",{style:o.settingsItem,children:(0,oe.jsx)(de().A,{type:"custom",isMobile:!1,title:(0,oe.jsxs)("div",{style:n.title,children:[(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.hipaaCompliance.label",defaultMessage:"HIPAA Compliance"}),(0,oe.jsx)(se().A,{href:(0,k().xS)("guides.hipaaCompliancy"),analyticsFrom:"space_settings"})]}),caption:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.hipaaCompliance.description",defaultMessage:"Store and process Protected Health Information (PHI) by enabling HIPAA compliance. By enabling HIPAA compliance, you are agreeing to Notion’s <inlinelink>Business Associate Agreement</inlinelink>",values:{inlinelink:e=>(0,oe.jsx)(re().A,{href:(0,k().xS)("guides.hipaaBAA"),external:!0,onClick:e=>e.stopPropagation(),children:e})}}),customButton:(0,oe.jsx)(xt,{spaceStore:t,securitySettingsStore:a})})})}function xt(e){let{spaceStore:t,securitySettingsStore:a}=e;const n=(0,o().v3)(),i=(0,r().K8)((()=>(0,_().Ar)(t)),[t]),[l,d]=s.useState(i),[c,u]=s.useState(!1),[g,p]=s.useState(!1),h=(0,s.useCallback)((()=>async function(e){let{securitySettingsStore:t,spaceStore:a,environment:s,isGoingToDisableHIPAACompliancy:n,openModal:o,closeModal:i}=e;i(),t.setState({...t.state,zeroRetentionEnabled:!t.state.zeroRetentionEnabled}),w().V(s,{spaceStore:a,securitySettingsState:t.state}),A().xu(s,a),o(),await x().callApi({eventName:"sendHIPAACompliancyUpdate",environment:s,data:{spaceId:a.id,isDisablingHIPAA:n}})}({securitySettingsStore:a,spaceStore:t,environment:n,isGoingToDisableHIPAACompliancy:l,openModal:()=>p(!0),closeModal:()=>u(!1)})),[n,a,t,l]);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(R().YS,{isOpen:g,hasDisabledHIPAACompliancy:l,onClose:()=>p(!1)}),(0,oe.jsx)(R().TD,{isOpen:c,onClose:()=>u(!1),onConfirmDecision:h,isDisablingHIPAACompliancy:l}),(0,oe.jsx)(J().A,{size:"lg",onClick:()=>{u(!0),d(a.state.zeroRetentionEnabled)},children:(0,oe.jsx)(m().sA,{...i?nt.deactivateHIPAAButton:nt.activateHIPAAButton})})]})}function vt(e){let{spaceStore:t}=e;const a=(0,o().v3)(),n=(0,m().tz)(),[i,l]=s.useState(!1),c=(0,r().K8)((()=>B().default.state.currentUserRootStore),[]),u=(0,r().K8)((()=>B().default.state.currentUserSettingsStore),[]),p=(0,G().lh)({spaceId:t.id}),h=(0,s.useCallback)((async()=>{c&&u&&(await j().sy({environment:a,inMemoryRecordCache:a.defaultRecordCache.inMemoryRecordCache,pointer:{table:g().GD,id:c.id},userId:a.currentUser.id}),A().t9({environment:a,userRootStore:c,ignoreSpaceId:t.id,userSettingsStore:u,pageVisitSource:d().y8.SwitchSpace}))}),[a,c,u,t.id]);return(0,oe.jsxs)(oe.Fragment,{children:[i?(0,oe.jsx)(H().S4,{billingData:p,isOpen:i,onClose:()=>l(!1),onConfirmDelete:async()=>await pt(t,n,a,h),spaceStore:t}):null,(0,oe.jsx)(J().A,{size:"lg",color:"uiRed",onClick:async()=>await async function(e){const{environment:t,spaceStore:a,intl:s,showDowngradeModal:n,onDelete:o}=e,i=K().subscriptionDataStoreInstance.state,r=q().RJ(i);if((0,f().H)(t),r)return void n();await pt(a,s,t,o)}({environment:a,spaceStore:t,intl:n,showDowngradeModal:()=>l(!0),onDelete:h}),children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.dangerousSettingsSection.deleteWorkspaceButton.label",defaultMessage:"Delete entire workspace"})})]})}function yt(e){let{spaceStore:t,spaceBasicSettingsStore:a,securitySettingsStore:n}=e;const i=(0,o().v3)(),r=(0,s.useCallback)((()=>async function(e,t,a,s){await A().Ef({environment:e,spaceStore:t,spaceBasicSettingsStore:a,securitySettingsStore:s}),O().A.setState(O().A.getInitialState()),F().A.setState({...F().A.state,open:!1}),L().A.resetData(e,{spaceId:t.id})}(i,t,a,n)),[i,t,a,n]);return(0,oe.jsxs)("div",{style:{display:"flex"},children:[(0,oe.jsx)(ee().A,{size:"lg",onClick:r,disabled:!1,children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.updateButton.label",defaultMessage:"Update"})}),(0,oe.jsx)(J().A,{size:"lg",style:{marginLeft:12},onClick:ht,children:(0,oe.jsx)(m().sA,{id:"spaceBasicSettings.cancelButton.label",defaultMessage:"Cancel"})})]})}function bt(){return(0,l().IS)((()=>({settingsItem:{paddingBottom:24}})),[])}},873066:(e,t,a)=>{a.d(t,{A:()=>le});var s=a(296540),n=()=>a(484714),o=()=>a(56366),i=()=>a(401497),r=()=>a(563884),l=()=>a(959013),d=()=>a(534177),c=()=>a(30731),u=()=>a(56394),g=()=>a(780865),m=()=>a(962730),p=()=>a(377586),h=()=>a(117586),f=()=>a(141025),x=()=>a(35394),v=()=>a(493823),y=()=>a(760217),b=()=>a(545805),S=()=>a(897119),j=()=>a(204063),w=()=>a(89924),A=()=>a(604995),M=()=>a(416504),C=()=>a(972435),I=()=>a(722872),T=()=>a(513488),k=()=>a(480095),_=()=>a(574036),z=()=>a(539320),D=()=>a(498140),P=()=>a(609989),N=()=>a(623580),R=a(474848);const B=(0,l().YK)({invalidDateError:{id:"dateInputError.invalidDateError.tooltip",defaultMessage:"Invalid date"},invalidDateRangeError:{id:"dateInputError.invalidDateRangeError.tooltip",defaultMessage:"Invalid range"},notSupportedDateRangeError:{id:"dateInputError.notSupportedDateRangeError.tooltip",defaultMessage:"The date is not supported"}});const L=function(e){const t=(0,l().tz)(),n=(0,o().uB)(void 0,P().A),{value:i,customErrorMessage:r}=e;(0,s.useEffect)((()=>{n.reset()}),[i,n]);const d=(0,s.useCallback)((()=>(0,R.jsx)(q,{dateTimeInputMenuItemProps:e,store:n})),[e,n]),c=(0,o().K8)((()=>O(t,n,r)),[t,n,r]);return c?(0,R.jsx)(a(859428).A,{renderTooltip:()=>c,forceVisibleState:!0,placement:m().W.Left,render:d,originGap:-8}):(0,R.jsx)(q,{dateTimeInputMenuItemProps:e,store:n})};function E(e,t){const{device:a}=e;return!!a.isMobile||!t}function O(e,t,a){if(!t.state.error)return;const s=a&&a(t.state.error);if(s)return s;switch(t.state.error){case P().$.INVALID_DATE:return e.formatMessage(B.invalidDateError);case P().$.INVALID_RANGE:return e.formatMessage(B.invalidDateRangeError);case P().$.NOT_SUPPORTED:return e.formatMessage(B.notSupportedDateRangeError);default:(0,d().HB)(t.state.error)}}function U(e,t,a,s,n,o){const i=function(e,t,a,s,n){if(!a.state.dateEdited&&!a.state.timeEdited)return;if(!a.state.temporaryValue.date&&!a.state.temporaryValue.time)return{value:void 0};const o=(0,D().J8)(a.state.temporaryValue.date||"",t);if(o){let t="";return t=s?(null==e?void 0:e.start_time)||"00:00":n?"23:59":"00:00",{value:{type:"datetime",start_date:o,time_zone:(null==e?void 0:e.time_zone)||(0,M().P)(),start_time:t}}}const i=(0,D().KZ)(a.state.temporaryValue.time||"",t);return(null!=e&&e.start_date||o)&&i?{value:{type:"datetime",start_date:(null==e?void 0:e.start_date)||o,start_time:i,time_zone:(null==e?void 0:e.time_zone)||(0,M().P)()}}:{error:P().$.INVALID_DATE}}(e,t,a,n,o);if(i)return s?s(i):i}function F(e){const{theme:t,disabled:a,focus:s,intl:n,store:o,customErrorMessage:i}=e,r=function(e){return{inputDefault:{background:e.inputBackground,boxShadow:e.inputBoxShadow},inputFocused:{boxShadow:e.inputBlueFocusRing},inputError:{boxShadow:e.inputRedFocusRing},placeholder:{color:e.text.tertiary}}}(t),l=O(n,o,i);if(!a)return l?r.inputError:s?r.inputFocused:r.inputDefault}function H(e,t,a,s,n,o,i,r,l,d,c){const{device:u}=e,g=function(e,t){return{menuItem:{marginBottom:e.device.isMobile?1:12},inputWrapper:{borderRadius:6,height:28,paddingRight:E(e,t)?6:0,position:"relative"},inputEditRegion:{width:E(e,t)?"calc(100% - 14px)":"100%"},inputEditRegionMobile:{padding:"2px 6px",position:"relative"}}}(e,d);return{style:{...g.menuItem,...n},inputOuterStyle:{...g.inputWrapper,...s,...F({theme:t,disabled:o,focus:i,intl:r,store:l,customErrorMessage:c})},inputStyle:{...g.inputEditRegion,...u.isMobile&&g.inputEditRegionMobile,...a}}}function V(e,t,a,s,n,o,i,r,l,d){let c;(!r||"date"===t&&null!=n&&n.start_time||"time"===t&&null!=n&&n.start_date)&&(c=U(n,o,i,l,r,d),c&&(a(c),c.error?i.setState({...i.state,dateEdited:!1,error:c.error}):i.reset())),s&&s(e,c)}function W(e,t,a,s,n,o,i,r,l){const d=U(t,a,s,o,i,r);d?(e(d),d.error?s.setState({...s.state,dateEdited:!1,timeEdited:!1,error:d.error}):s.reset()):s.setState({...s.state,dateEdited:!1,timeEdited:!1}),l&&n&&n(l)}function q(e){let{dateTimeInputMenuItemProps:t,store:a}=e;const{store:r,hideClearButton:d,focus:u,showTime:g,placeholder:m,customErrorMessage:p,...h}=t,{onBlur:f,onClear:x,onDateFocus:v,onSubmit:y,onTimeFocus:b,onUpdate:S,isEndingDate:j,inputStyle:w,inputOuterStyle:A,style:M,disabled:I,validate:T,value:k}=t,_=(0,l().tz)(),z=(0,i().DP)(),D=(0,n().v3)(),P=(0,s.useCallback)((e=>function(e,t,a,s,n,o,i,r,l,d){const{device:c}=t;o.setState({...o.state,timeEdited:!0,temporaryValue:{...o.state.temporaryValue,time:e.target.value||""}}),c.isAndroid&&W(a,s,n,o,i,r,l,d)}(e,D,S,k,_,a,f,T,g,j)),[D,S,k,_,a,f,T,g,j]),B=(0,s.useCallback)((e=>function(e,t,a){t.setState({...t.state,timeEdited:!1}),a&&a(e)}(e,a,b)),[a,b]),L=(0,s.useCallback)((()=>function(e,t,a,s,n,o,i,r){s.setState({...s.state,dateEdited:!0,timeEdited:!0,temporaryValue:{date:void 0,time:void 0},error:void 0});const l=U(t,a,s,o,i,r);l&&e(l),s.setState({...s.state,dateEdited:!1,timeEdited:!1}),n&&n()}(S,k,_,a,x,T,g,j)),[S,k,_,a,x,T,g,j]),O=(0,s.useCallback)((e=>W(S,k,_,a,f,T,g,j)),[S,k,_,a,f,T,g,j]),F=(0,s.useCallback)((e=>function(e,t,a,s,n,o,i,r,l,d){const{device:c}=t;o.setState({...o.state,dateEdited:!0,temporaryValue:{...o.state.temporaryValue,date:e.target.value||""}}),c.isAndroid&&W(a,s,n,o,i,r,l,d)}(e,D,S,k,_,a,f,T,g,j)),[D,S,k,_,a,f,T,g,j]),q=(0,s.useCallback)((e=>function(e,t,a){t.setState({...t.state,dateEdited:!1}),a&&a(e)}(e,a,v)),[a,v]),{device:K}=D,Y=K.isMobile?"date":"text",Q=K.isMobile?"time":"text",$=N().C.Transparent,X=K.isMobile?void 0:u,Z=(0,o().K8)((()=>H(D,z,w,A,M,I,X,_,a,d,p)),[D,z,w,A,M,I,X,_,a,d,p]),J={display:"flex",alignItems:"center",lineHeight:2,background:z.inputBackground,paddingLeft:8,flexBasis:"50%",...Z.inputOuterStyle},ee=(0,o().K8)((()=>function(e,t,a,s){const{device:n}=e;return n.isMobile?t?c().Tq(t,a):"":s.state.temporaryValue.date?s.state.temporaryValue.date:s.state.dateEdited?s.state.temporaryValue.date||"":t?c().Tq(t,a):""}(D,k,_,a)),[D,k,_,a]),te=(0,o().K8)((()=>function(e,t,a,s){const{device:n}=e;return n.isMobile?t?c().Em(t,a):"":s.state.temporaryValue.time?s.state.temporaryValue.time:s.state.timeEdited?s.state.temporaryValue.time||"":t?c().Em(t,a):""}(D,k,_,a)),[D,k,_,a]);return(0,R.jsxs)("div",{style:J,children:[(0,R.jsx)(N().A,{...h,type:Y,format:$,placeholder:m,focus:"date"===X,onFocus:q,onChange:F,onSubmit:e=>V(e,"date",S,y,k,_,a,g,T,j),onBlur:O,value:ee,size:1,style:{fontSize:K.isMobile?16:14},showClearButton:!g&&E(D,d),onClearButtonClick:L}),g?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{style:{height:14,width:1,background:z.regularDividerColor,marginLeft:6,marginRight:12,flexShrink:0}}),(0,R.jsx)(N().A,{...h,placeholder:C().A.formatMessage(G.timePlaceholder),type:Q,format:$,focus:"time"===X,onFocus:B,onChange:P,onSubmit:e=>V(e,"time",S,y,k,_,a,g,T,j),onBlur:O,value:te,size:1,style:{fontSize:K.isMobile?16:14},showClearButton:E(D,d),onClearButtonClick:L})]}):void 0]})}const G=(0,l().YK)({startingDateMessage:{defaultMessage:"Starting",id:"auditLog.dateTimeRangeMenu.startingDatePlaceholder"},endingDateMessage:{defaultMessage:"Ending",id:"auditLog.dateTimeRangeMenu.endingDatePlaceholder"},timePlaceholder:{defaultMessage:"12:00 AM",id:"auditLog.dateTimeRangeMenu.timePlaceholderInNumber"}});const K=function(e){let{title:t,value:s,onUpdate:i,onDismiss:r,disabled:l,footer:d,header:c,hideTime:u,showTime:g,store:m,dayRangeStore:p,minDate:h,maxDate:v,customErrorMessage:y}=e;const b=(0,n().v3)(),S=(0,o().uB)(p,x().A),j=(0,o().uB)(m,f().Ay);(0,a(852507).l)((()=>{void 0!==g&&j.setState({...j.state,showTime:g})}));const{device:w}=b;return(0,R.jsx)(a(928600).A,{...se(b,t,s,i,j,S,r,l,d,h,v),children:(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,R.jsxs)("div",{children:[c,w.isMobile?void 0:(0,R.jsx)(ae,{value:s,disabled:l,onUpdate:i,store:j,dayRangeStore:S,minDate:h,maxDate:v,customErrorMessage:y}),(0,R.jsx)(X,{value:s,onUpdate:i,store:j,dayRangeStore:S,minDate:h,maxDate:v})]}),(0,R.jsx)(te,{onUpdate:i,value:s,hideTime:u,store:j,dayRangeStore:S})]})})};function Y(e){const{field:t,parsed:a,value:s,minValue:n,maxValue:o}=e;return a.error?a:function(e){const{range:t,minValue:a,maxValue:s}=e,n=t.starting?A().C6.notionDateTimeToLuxon(t.starting):void 0,o=t.ending?A().C6.notionDateTimeToLuxon(t.ending):void 0;if(n&&o&&o<n)return{error:T().$.INVALID_RANGE};const i=e=>(0,d().O9)(a)&&(0,d().O9)(e)&&e<a,r=e=>(0,d().O9)(s)&&(0,d().O9)(e)&&e>s;return i(n)||i(o)||r(n)||r(o)?{error:T().$.NOT_SUPPORTED}:{value:t}}({range:{...s,[t]:a.value},minValue:n,maxValue:o})}function Q(e){const{field:t,parsed:a,value:s,minValue:n,maxValue:o}=e;if(a.error)return a;return function(e){const{range:t,minValue:a,maxValue:s}=e,n=t.starting?A().C6.notionDateToLuxon(t.starting):void 0,o=t.ending?A().C6.notionDateToLuxon(t.ending):void 0;if(n&&o&&o<n)return{error:T().$.INVALID_RANGE};const i=e=>a&&e&&e<a,r=e=>s&&e&&e>s;return i(n)||i(o)||r(n)||r(o)?{error:T().$.NOT_SUPPORTED}:{value:t}}({range:{...c().BI(s),[t]:a.value},minValue:n,maxValue:o})}function $(e,t){return{pickerSection:{paddingLeft:16,paddingRight:16},pickerSectionMobile:{paddingTop:16,paddingBottom:8},sidebar:{paddingTop:12,paddingBottom:24,overflowY:"auto",overflowX:"hidden",flex:"0 0 220px",backgroundColor:t.sidebarSecondaryBackground,borderLeft:`1px solid ${t.regularDividerColor}`,maxWidth:"fit-content"},menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4,color:t.text.secondary}}}function X(e){let{value:t,onUpdate:a,store:s,dayRangeStore:r,minDate:l,maxDate:d}=e;const u=(0,i().DP)(),g=(0,n().v3)(),m=(0,o().uB)(r,x().A),p=(0,o().uB)(s,f().Ay),{device:h}=g,v=$(g,u),y=function(e){return{pickerSectionMobile:{background:e.popoverBackground,boxShadow:`0 1px 0 ${e.regularDividerColor}`,marginBottom:1}}}(u),b={...v.pickerSection,...h.isMobile&&v.pickerSectionMobile,...h.isMobile&&y.pickerSectionMobile};return(0,R.jsx)(w().A,{children:(0,R.jsx)("div",{style:b,children:(0,R.jsx)(z().A,{value:c().BI(t),dateTimeStore:p,store:m,onUpdate:e=>{if(e.error)return null;const s=c().y2(t,e.value);return a({error:e.error,value:s})},minDate:l,maxDate:d,validate:(e,a)=>Q({field:e,parsed:a,value:t,minValue:l,maxValue:d})})})})}function Z(e,t,a){t.setState({...t.state,focus:e});const s=f().yL[e];a.setState({...a.state,focus:s})}function J(e,t){t.setState({...t.state,focus:e})}function ee(e,t,a){e.ending&&Z(h().xQ.EndDate,t,a),t.setState({...t.state,temporaryDateRange:e}),a.setState({...a.state,displayMonth:e.starting||e.ending?A().mF(e.starting||e.ending):void 0,temporaryDateRange:{starting:c().qC(e.starting),ending:c().qC(e.ending)}})}function te(e){let{onUpdate:t,value:a,hideTime:s,store:r,dayRangeStore:d}=e;const c=(0,i().DP)(),u=(0,n().v3)(),g=(0,o().K8)((()=>r.state.showTime),[r]);return(0,R.jsxs)("aside",{style:$(u,c).sidebar,children:[s?null:(0,R.jsx)(_().A,{title:(0,R.jsx)(l().sA,{id:"auditlogDateFilter.timeToggle",defaultMessage:"Use time"}),on:g,onClick:()=>{if(r.toggleShowTime(),r.state.showTime){const e=a;e.starting&&(e.starting.start_time="00:00"),e.ending&&(e.ending.start_time="23:59"),t({value:e})}},focused:!1}),(0,R.jsx)(y().A,{focused:!1,title:(0,R.jsx)(l().sA,{id:"auditlogDateFilter.quickFilters.today",defaultMessage:"Today"}),onClick:()=>{const e=Date.now(),t=A().KQ(e,(0,M().P)());ee({starting:{...t,start_time:"00:00"},ending:t},r,d)},style:$(u,c).menuItem}),(0,R.jsx)(y().A,{focused:!1,title:(0,R.jsx)(l().sA,{id:"auditlogDateFilter.quickFilters.yesterday",defaultMessage:"Yesterday"}),onClick:()=>{const e=A().jI((0,M().P)());ee({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,M().P)()},ending:{type:"datetime",start_date:e.start_date,start_time:"23:59",time_zone:(0,M().P)()}},r,d)},style:$(u,c).menuItem}),(0,R.jsx)(y().A,{focused:!1,title:(0,R.jsx)(l().sA,{id:"auditlogDateFilter.quickFilters.lastWeek",defaultMessage:"Last 7 days"}),onClick:()=>{const e=A().t0((0,M().P)()),t=A().KQ(Date.now(),(0,M().P)());ee({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,M().P)()},ending:t},r,d)},style:$(u,c).menuItem}),(0,R.jsx)(y().A,{focused:!1,title:(0,R.jsx)(l().sA,{id:"auditlogDateFilter.quickFilters.lastMonth",defaultMessage:"Last 30 days"}),onClick:()=>{const e=A().ZG((0,M().P)()),t=A().KQ(Date.now(),(0,M().P)());ee({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,M().P)()},ending:t},r,d)},style:$(u,c).menuItem})]})}function ae(e){let{value:t,disabled:a,onUpdate:s,store:r,dayRangeStore:d,minDate:u,maxDate:g,customErrorMessage:m}=e;const p=(0,l().tz)(),f=(0,i().DP)(),x=(0,n().v3)(),{device:v,WindowSizeStore:y}=x,b=(0,o().K8)((()=>r.getFocus()),[r]);let S="date";b!==h().xQ.StartTime&&b!==h().xQ.EndTime||(S="time");const j=function(e,t){return{earliestValidEnding:e.starting&&c().r6(e.starting,t),latestValidStarting:e.ending&&c().r6(e.ending,t)}}(t,p),w=(0,o().K8)((()=>r.state.showTime),[r]),A=(0,o().K8)((()=>y.getSafePaddingLeftCSS(16)),[y]);return(0,R.jsxs)("div",{style:{paddingTop:v.isMobile?16:12,paddingBottom:v.isMobile?16:8,paddingLeft:v.isMobile?A:14,paddingRight:v.isMobile?A:14,display:w?"block":"flex",...v.isMobile&&{boxShadow:`\n                        0 1px 0 ${f.regularDividerColor}\n                    `,position:"relative",zIndex:2},background:v.isMobile?f.popoverBackground:void 0},children:[(0,R.jsx)(L,{disabled:a,placeholder:C().A.formatMessage(G.startingDateMessage),focus:b===h().xQ.StartDate||b===h().xQ.StartTime?S:void 0,value:t.starting,validate:e=>function(e){const{parsed:t,value:a,minValue:s,maxValue:n}=e,o=Y({field:"starting",parsed:t,value:a,minValue:s,maxValue:n});return o.error?o:{value:o.value.starting}}({parsed:e,value:t,minValue:u,maxValue:g}),customErrorMessage:m,onUpdate:e=>function(e,t,a){e.error||t({value:{...a,starting:e.value}})}(e,s,t),onDateFocus:()=>Z(h().xQ.StartDate,r,d),onTimeFocus:()=>J(h().xQ.StartTime,r),onSubmit:(e,t)=>function(e,t,a,s,n){t&&t.error||(a===h().xQ.StartDate&&s.state.showTime?s.setState({...s.state,focus:h().xQ.StartTime}):(s.setState({...s.state,focus:h().xQ.EndDate}),n.setState({...n.state,focus:"ending"})))}(0,t,b,r,d),inputElementAttributes:{max:j.latestValidStarting},showTime:w}),(0,R.jsx)("div",{style:{width:12,height:8}}),(0,R.jsx)(L,{disabled:a,placeholder:C().A.formatMessage(G.endingDateMessage),focus:b===h().xQ.EndDate||b===h().xQ.EndTime?S:void 0,value:t.ending,validate:e=>function(e){const{parsed:t,value:a,minValue:s,maxValue:n}=e,o=Y({field:"ending",parsed:t,value:a,minValue:s,maxValue:n});return o.error?o:{value:o.value.ending}}({parsed:e,value:t,minValue:u,maxValue:g}),customErrorMessage:m,onUpdate:e=>function(e,t,a){e.error||t({value:{...a,ending:e.value}})}(e,s,t),onDateFocus:()=>Z(h().xQ.EndDate,r,d),onTimeFocus:()=>J(h().xQ.EndTime,r),onSubmit:(e,t)=>function(e,t,a,s){t&&t.error||a===h().xQ.EndDate&&s.state.showTime&&s.setState({...s.state,focus:h().xQ.EndTime})}(0,t,b,r),inputElementAttributes:{min:j.earliestValidEnding},showTime:w})]})}function se(e,t,a,s,n,o,i,r,l,d,c){const{device:u}=e;if(u.isMobile){return{menuType:I().gu.Modal,title:t,right:(0,R.jsx)(k().DoneMenuText,{}),onClickRight:i,header:(0,R.jsx)(ae,{value:a,disabled:r,onUpdate:s,store:n,dayRangeStore:o,minDate:d,maxDate:c})}}return{menuType:I().gu.Popup,onClickOutside:i,footer:l}}var ne=()=>a(297401),oe=()=>a(821879),ie=()=>a(978625),re=()=>a(806754);const le=(0,l().j4)((function(e){let{onChange:t,onMenuDismiss:a,showButtons:i,title:r,header:l,sidebar:d,hideTime:c,value:u,disabled:g,icon:m,mode:p,focused:h,pillTitle:v,minDate:y,maxDate:b,customErrorMessage:S}=e;const j=(0,n().v3)(),w=(0,o().uB)(void 0,x().A),A=(0,o().uB)(void 0,f().Ay);(0,s.useEffect)((()=>{fe({value:u},A,w)}),[u,A,w]);const{device:M}=j;return M.isMobile?(0,R.jsx)(Me,{onChange:t,onMenuDismiss:a,showButtons:i,title:r,header:l,sidebar:d,hideTime:c,value:u,disabled:g,icon:m,store:A,dayRangeStore:w,mode:p,minDate:y,maxDate:b,customErrorMessage:S}):(0,R.jsx)(Ae,{onChange:t,onMenuDismiss:a,showButtons:i,title:r,header:l,sidebar:d,hideTime:c,value:u,disabled:g,focused:h,icon:m,mode:p,pillTitle:v,store:A,dayRangeStore:w,minDate:y,maxDate:b,customErrorMessage:S})}));function de(e){const{device:t}=e;return t.isMobile?p().n.SlideUp:p().n.Popup}function ce(e){return{buttonMenuItem:{color:e.text.secondary},activeMenuItem:{color:e.text.primary}}}function ue(e){e.preventDefault&&e.preventDefault()}function ge(e){e({starting:void 0,ending:void 0})}function me(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},icon:{height:16,width:16,marginRight:6},iconActiveDesktop:{height:14,width:14,fill:"currentColor",alignSelf:"flex-start",marginTop:2,marginRight:2},iconActiveDesktopWrapper:{marginTop:0},iconActiveMobile:{height:14,width:14,fill:"currentColor",marginTop:1,marginRight:6},popup:{paddingTop:0,paddingBottom:8},popupWithSidebar:{display:"flex"},menuItemTitleDesktop:{width:"100%"},summary:{display:"inline-flex"}}}function pe(e,t,a){a||(e.setState({...e.state,isOpen:!0,focus:h().xQ.StartDate}),t.setState({...t.state,isOpen:!0,focus:"starting"}))}function he(e,t,a,s,n,o){const{temporaryDateRange:i}=a.state;g().a9(e)||(o||t(i),a.setState({...a.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),s.setState({...s.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),n&&n())}function fe(e,t,a){if(e.error)return;const s={starting:(0,c().qC)(e.value.starting),ending:(0,c().qC)(e.value.ending)};return a.setState({...a.state,temporaryDateRange:{...a.state.temporaryDateRange,...s}}),t.setState({...t.state,temporaryDateRange:{...t.state.temporaryDateRange,...e.value}})}function xe(e){let{disabled:t,icon:a,title:o,store:i,dayRangeStore:r}=e;const l=(0,n().v3)(),d=(0,s.useCallback)((()=>pe(i,r,t)),[i,r,t]),c=me(l);return(0,R.jsx)(y().A,{disabled:t,focused:!1,icon:a(c.icon),title:o,onClick:d})}function ve(e){let{disabled:t,title:a,value:o,intl:i,onChange:l,store:d,dayRangeStore:c}=e;const u=(0,n().v3)(),m=(0,s.useCallback)((()=>pe(d,c,t)),[d,c,t]),p=me(u),h=(0,R.jsxs)("div",{style:p.summary,children:[(0,r().k)(p.iconActiveMobile),g().tX(o,i)]});return(0,R.jsx)(ie().A,{disabled:t,onClick:m,onClickClear:()=>ge(l),label:a,title:h})}function ye(e){let{disabled:t,value:a,focused:o,intl:l,onChange:d,store:c,dayRangeStore:u}=e;const m=(0,i().DP)(),p=(0,n().v3)(),h=(0,s.useCallback)((()=>pe(c,u,t)),[c,u,t]),f=me(p),x=ce(m),v={...f.menuItem,...x.activeMenuItem},b=g().tX(a,l),S=(0,R.jsx)(ne().A,{onClick:()=>ge(d),disabled:t});return(0,R.jsx)(y().A,{focused:o,disabled:t,icon:(0,r().k)(f.iconActiveDesktop),title:b,right:S,isTokenTitle:!0,alignIconTop:!0,onClick:h,desktopTitleStyle:f.menuItemTitleDesktop,desktopIconStyle:f.iconActiveDesktopWrapper,style:v})}function be(e){let{disabled:t,title:a,icon:o,focused:r,mode:l,store:d,dayRangeStore:c}=e;const u=(0,i().DP)(),g=(0,n().v3)(),m=(0,s.useCallback)((()=>pe(d,c,t)),[d,c,t]),p=me(g),h=ce(u),f={...p.menuItem,...h.buttonMenuItem,...l===oe().C.Pill?{width:"fit-content",border:"solid 1px",paddingLeft:0,paddingRight:0,borderRadius:20,fontSize:12}:{}};return(0,R.jsx)(y().A,{focused:r,disabled:t,icon:o(p.icon),title:a,onClick:m,style:f})}function Se(e){let{disabled:t,value:a,pillTitle:n,store:o,dayRangeStore:i}=e;const d=(0,s.useCallback)((()=>pe(o,i,t)),[o,i,t]),c=(0,R.jsx)(l().sA,{id:"searchDateFilter.shortTitle",defaultMessage:"Date"});return(0,R.jsx)(u().A,{on:Boolean(a.starting||a.ending),icon:(0,r().k)({width:16,marginRight:6,fill:"currentColor"}),title:(0,R.jsx)("span",{children:n||c}),onClick:d})}function je(e){let{onChange:t,onMenuDismiss:a,showButtons:s,store:n,dayRangeStore:o}=e;return(0,R.jsxs)(w().A,{topBorder:!0,style:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},children:[(0,R.jsx)(v().p,{onClick:()=>{n.clearTemporaryDateRange(),o.clearTemporaryDateRange(),t({starting:void 0,ending:void 0})},children:(0,R.jsx)(l().sA,{id:"searchDateFilter.clearButton",defaultMessage:"Clear"})}),(0,R.jsx)(j().A,{onClick:e=>{t(n.state.temporaryDateRange),he(e,t,n,o,a,s)},children:(0,R.jsx)(l().sA,{id:"searchDateFilter.applyButton",defaultMessage:"Apply"})})]})}function we(e){let{onChange:t,onMenuDismiss:a,showButtons:n,title:i,header:r,sidebar:d,hideTime:c,value:u,store:g,dayRangeStore:m,minDate:p,maxDate:h,customErrorMessage:f}=e;const x=(0,s.useCallback)((e=>he(e,t,g,m,a,n)),[t,g,m,a,n]),y=(0,s.useCallback)((e=>fe(e,g,m)),[g,m]),b=(0,o().K8)((()=>function(e,t){const{temporaryDateRange:a}=t.state;return{...e,...a}}(u,g)),[u,g]);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(K,{title:i,value:b,onUpdate:y,store:g,dayRangeStore:m,onDismiss:x,footer:"footer"===n&&(0,R.jsx)(je,{onChange:t,onMenuDismiss:a,showButtons:n,store:g,dayRangeStore:m}),sidebar:d,hideTime:c,header:r,minDate:p,maxDate:h,customErrorMessage:f}),"side"===n?(0,R.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"0px 10px"},children:[(0,R.jsx)(v().p,{isGray:!0,style:{marginLeft:"auto",marginRight:8},onClick:x,children:(0,R.jsx)(l().sA,{defaultMessage:"Cancel",id:"DateTimeFilter.cancelButton.label"})}),(0,R.jsx)(j().A,{onClick:()=>t(g.state.temporaryDateRange),children:(0,R.jsx)(l().sA,{defaultMessage:"Accept",id:"DateTimeFilter.acceptButton.label"})})]}):void 0]})}function Ae(e){let{mode:t,onChange:a,onMenuDismiss:i,showButtons:r,title:c,header:u,sidebar:g,hideTime:p,value:h,disabled:f,focused:x,icon:v,pillTitle:y,store:j,dayRangeStore:w,minDate:A,maxDate:M,customErrorMessage:C}=e;const I=(0,n().v3)(),T=(0,l().tz)(),k=(0,s.useCallback)((e=>he(e,a,j,w,i,r)),[a,j,w,i,r]),_=(0,s.useCallback)((()=>(0,R.jsx)(we,{onChange:a,onMenuDismiss:i,showButtons:r,title:c,header:u,sidebar:g,hideTime:p,value:h,store:j,dayRangeStore:w,minDate:A,maxDate:M,customErrorMessage:C})),[a,i,r,c,u,g,p,h,j,w,A,M,C]),z=me(I),D=t===oe().C.Section,P=D?c:void 0,N=t===oe().C.Section?(0,R.jsx)(ye,{disabled:f,value:h,focused:x,intl:T,onChange:a,store:j,dayRangeStore:w}):t===oe().C.Button?(0,R.jsx)(be,{disabled:f,title:c,icon:v,focused:x,mode:t,store:j,dayRangeStore:w}):t===oe().C.Pill?(0,R.jsx)(Se,{disabled:f,value:h,pillTitle:y,store:j,dayRangeStore:w}):void(0,d().HB)(t),B=(0,o().K8)((()=>j.state.isOpen),[j]);return(0,R.jsx)(re().A,{title:P,marginAfter:D,children:(0,R.jsx)(b().A,{debugName:"DateTimeFilter",capture:B,onUp:ue,onDown:ue,onEnter:ue,children:(0,R.jsx)(S().Ay,{popupType:de(I),open:B,origin:N,render:_,onDismiss:k,placementToOrigin:m().W.Bottom,alignmentToOrigin:m().C.Start,style:g?z.popupWithSidebar:z.popup,originGap:8,trapFocus:!0})})})}function Me(e){let{mode:t,onChange:a,onMenuDismiss:n,showButtons:i,title:r,header:d,sidebar:c,hideTime:u,value:g,disabled:m,icon:h,store:f,dayRangeStore:x,minDate:v,maxDate:y,customErrorMessage:b}=e;const j=(0,l().tz)(),w=(0,s.useCallback)((e=>he(e,a,f,x,n,i)),[a,f,x,n,i]),A=(0,s.useCallback)((()=>(0,R.jsx)(we,{onChange:a,onMenuDismiss:n,showButtons:i,title:r,header:d,sidebar:c,hideTime:u,value:g,store:f,dayRangeStore:x,minDate:v,maxDate:y,customErrorMessage:b})),[a,n,i,r,d,c,u,g,f,x,v,y,b]),M=(0,o().K8)((()=>f.state.isOpen),[f]),C=t===oe().C.Section?(0,R.jsx)(ve,{disabled:m,title:r,value:g,intl:j,onChange:a,store:f,dayRangeStore:x}):(0,R.jsx)(xe,{disabled:m,icon:h,title:r,store:f,dayRangeStore:x});return(0,R.jsx)(S().Ay,{popupType:p().n.SlideUp,open:M,origin:C,render:A,onDismiss:w,preventScaleTransition:!0})}},875166:(e,t,a)=>{a.d(t,{E:()=>n});a(296540);var s=a(474848);const n=(0,a(340498).wt)("circleDottedCircle",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M9.993 16.626a6.8 6.8 0 0 1-2.727-.554 7.1 7.1 0 0 1-2.256-1.524 7.3 7.3 0 0 1-1.525-2.256 6.8 6.8 0 0 1-.553-2.728q0-1.449.553-2.727a7.24 7.24 0 0 1 3.773-3.78 6.8 6.8 0 0 1 2.728-.554q1.456 0 2.735.554t2.256 1.53a7.1 7.1 0 0 1 1.53 2.25 6.8 6.8 0 0 1 .554 2.727q0 1.45-.553 2.728a7.22 7.22 0 0 1-3.787 3.78 6.8 6.8 0 0 1-2.728.554m0-1.395q1.184 0 2.208-.437a5.7 5.7 0 0 0 1.805-1.217 5.7 5.7 0 0 0 1.217-1.804q.437-1.026.437-2.209a5.55 5.55 0 0 0-.437-2.2 5.66 5.66 0 0 0-3.029-3.029 5.6 5.6 0 0 0-2.208-.438q-1.176 0-2.208.438A5.6 5.6 0 0 0 5.98 5.552a5.7 5.7 0 0 0-1.21 1.811 5.55 5.55 0 0 0-.437 2.201q0 1.183.438 2.209a5.7 5.7 0 0 0 1.21 1.804 5.6 5.6 0 0 0 4.013 1.654Zm0-8.162a.49.49 0 0 1-.513-.506.49.49 0 0 1 .513-.505.49.49 0 0 1 .506.505.49.49 0 0 1-.506.506m1.504.404a.5.5 0 0 1-.362-.144.5.5 0 0 1-.144-.369.49.49 0 0 1 .506-.506.49.49 0 0 1 .506.506.49.49 0 0 1-.506.513m1.1 1.1a.49.49 0 0 1-.505-.506.49.49 0 0 1 .506-.505.49.49 0 0 1 .505.505.49.49 0 0 1-.505.506Zm.404 1.504a.49.49 0 0 1-.506-.506.49.49 0 0 1 .506-.506.49.49 0 0 1 .506.506.49.49 0 0 1-.506.506m-.403 1.51a.49.49 0 0 1-.506-.505.49.49 0 0 1 .506-.513.49.49 0 0 1 .506.513.49.49 0 0 1-.506.506Zm-1.1 1.095a.49.49 0 0 1-.506-.506.49.49 0 0 1 .505-.506.49.49 0 0 1 .506.506.49.49 0 0 1-.506.506Zm-1.505.403a.49.49 0 0 1-.513-.506.49.49 0 0 1 .513-.506.49.49 0 0 1 .506.506.49.49 0 0 1-.506.506m-1.51-.403a.49.49 0 0 1-.506-.506.49.49 0 0 1 .505-.506q.219 0 .363.143.15.144.15.363a.48.48 0 0 1-.15.362.5.5 0 0 1-.363.144Zm-1.101-1.094a.49.49 0 0 1-.506-.506.49.49 0 0 1 .506-.513.49.49 0 0 1 .506.513.49.49 0 0 1-.506.506m-.403-1.51a.49.49 0 0 1-.506-.507.49.49 0 0 1 .506-.506.49.49 0 0 1 .505.506.49.49 0 0 1-.505.506Zm.403-1.505a.49.49 0 0 1-.506-.506.49.49 0 0 1 .506-.505.49.49 0 0 1 .506.505.49.49 0 0 1-.506.506m1.1-1.1a.49.49 0 0 1-.505-.513.49.49 0 0 1 .505-.506q.219 0 .363.144.15.143.15.362 0 .225-.15.37a.5.5 0 0 1-.363.143"})})},882690:(e,t,a)=>{a.d(t,{Z:()=>l});a(296540);var s=()=>a(959013),n=()=>a(972435),o=()=>a(962730),i=()=>a(859428),r=a(474848);function l(e){const{tooltipMessageDescriptor:t,columnHeader:a}=e;return(0,r.jsx)(i().A,{placement:o().W.Top,renderTooltip:e=>(0,r.jsx)("div",{...e,children:(0,r.jsx)(s().sA,{...t})}),render:e=>(0,r.jsx)("div",{...e,children:n().A.formatMessage(a)})})}},887720:(e,t,a)=>{a.d(t,{x:()=>x});var s=a(296540),n=()=>a(484714),o=()=>a(401497),i=()=>a(582684),r=()=>a(972435),l=()=>a(963589),d=()=>a(541558),c=()=>a(766558),u=()=>a(406699),g=()=>a(285790),m=()=>a(897119),p=()=>a(859428),h=()=>a(490094),f=a(474848);function x(e){const{appliedSorts:t,openSortPillMenu:a}=e,[x,v]=(0,s.useState)(!1),y=Boolean(null==t?void 0:t.length),b=function(e){let{hasSort:t}=e;const{isMobile:a}=(0,n().Y0)(),s=(0,l().X)("db_ux_chrome");return(0,o().IS)((e=>({iconStyle:{width:21,height:void 0,fill:t?e.icon.uiBluePrimary:e.actionMenuButtonTextColor},buttonStyle:{...(0,c().i)({theme:e,isInHomeWidget:!1,isMobile:a,isDBUXChromeEnabled:s}).button,marginRight:4}})),[t,a,s])}({hasSort:y}),S=(0,s.useCallback)((()=>{y?a():v(!0)}),[v,a,y]),j=r().A.formatMessage(d().CL.menuTitle);return(0,f.jsx)(m().Ay,{popupType:u().z7.Popup,open:x,origin:(0,f.jsx)(p().A,{renderTooltip:()=>j,render:e=>(0,f.jsx)(g().A,{...e,ariaLabel:j,icon:i().C,iconStyle:b.iconStyle,style:b.buttonStyle,onClick:S})}),onDismiss:()=>v(!1),originGap:4,render:()=>(0,f.jsx)(h().J,{...e,currentSorts:t,onClick:e=>{a(e),v(!1)}})})}},888867:(e,t,a)=>{a.r(t),a.d(t,{iconDefinition:()=>s,peopleFillIcon:()=>n});a(296540);const s={viewBox:"0 0 20 20",fittedViewBox:"0.85 2.79 18.76 14.42",svg:(0,a(474848).jsx)("path",{d:"M14.25 2.795c-1.042 0-1.886.43-2.456 1.14-.558.696-.823 1.618-.823 2.582s.265 1.885.823 2.58c.57.71 1.414 1.141 2.456 1.141s1.886-.43 2.456-1.14c.558-.696.823-1.618.823-2.581 0-.964-.265-1.886-.823-2.581-.57-.71-1.414-1.141-2.456-1.141M3.491 4.675c.525-.654 1.303-1.05 2.26-1.05s1.733.396 2.258 1.05c.513.64.755 1.484.755 2.362S8.522 8.76 8.01 9.399c-.525.654-1.302 1.05-2.259 1.05s-1.734-.396-2.259-1.05c-.513-.64-.755-1.484-.755-2.362s.242-1.723.755-2.362M1.03 14.52c.824-1.719 2.637-2.895 4.72-2.895 1.13 0 2.18.346 3.035.936a6.6 6.6 0 0 0-.884 1.476c-.509 1.177-.215 2.356.461 3.168H3.038c-.68 0-1.327-.286-1.742-.764-.432-.498-.606-1.209-.265-1.92M14.25 11.21c-2.334 0-4.354 1.36-5.202 3.323-.309.715-.125 1.419.309 1.912.418.476 1.064.76 1.743.76h6.3c.68 0 1.325-.284 1.744-.76.433-.493.617-1.197.308-1.912-.848-1.963-2.868-3.324-5.202-3.324"})},n=(0,a(340498).wt)("peopleFill",s)},890434:(e,t,a)=>{a.d(t,{A:()=>o});a(296540);var s=a(474848);function n(e){let{title:t,subtitle:n,on:o,onChange:i,disabled:r,style:l}=e;const d=(0,a(401497).IS)((()=>({container:{display:"flex",alignItems:"center",width:"100%"},title:{fontSize:14,marginRight:8,flexGrow:1}})),[]);return(0,s.jsxs)("div",{style:{...d.container,...l},children:[(0,s.jsxs)("div",{style:d.title,children:[t,(0,s.jsx)(a(125565).A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"95%"},children:n})]}),(0,s.jsx)(a(946548).A,{on:o,disabled:r,onClick:i})]})}n.defaultProps={disabled:!1,style:{}};const o=n},893468:(e,t,a)=>{a.d(t,{F:()=>l});a(296540);var s=()=>a(401497),n=()=>a(959013),o=()=>a(625383),i=()=>a(125565),r=a(474848);function l(e){let{lastActiveAt:t,containerStyle:a,useSecondaryColorTitle:l,isNoActivitySecondaryColor:d}=e;const c=(0,s().IS)((e=>({container:{...a}})),[a]);return(0,r.jsx)("div",{style:c.container,children:t?(0,r.jsx)(o().d,{useSecondaryColorTitle:l,dateTs:t}):(0,r.jsx)(i().A,{isSecondaryColor:d,children:(0,r.jsx)(n().sA,{id:"identityAndProvisioning.managedUsers.table.lastActive.unknown",defaultMessage:"No activity"})})})}},911259:(e,t,a)=>{a.r(t),a.d(t,{arrowInCircleUpIcon:()=>o,iconDefinition:()=>n});a(296540);var s=a(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M13.042 9.554a.625.625 0 0 1-.884 0l-1.533-1.533v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 0 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"}),(0,s.jsx)("path",{d:"M17.625 10a7.625 7.625 0 1 1-15.25 0 7.625 7.625 0 0 1 15.25 0M10 16.375a6.375 6.375 0 1 0 0-12.75 6.375 6.375 0 0 0 0 12.75"})]})},o=(0,a(340498).wt)("arrowInCircleUp",n)},922189:(e,t,a)=>{a.r(t),a.d(t,{iconDefinition:()=>n,personCircleFillIcon:()=>o});a(296540);var s=a(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M10 5.125c-.95 0-1.723.393-2.245 1.044-.51.635-.75 1.474-.75 2.346s.24 1.71.75 2.346c.522.65 1.295 1.044 2.245 1.044s1.723-.394 2.245-1.044c.51-.635.75-1.474.75-2.346s-.24-1.711-.75-2.346c-.522-.65-1.294-1.044-2.245-1.044"}),(0,s.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 0 0-4.087 11.268C6.702 13.495 8.246 12.56 10 12.56s3.298.934 4.087 2.332A6.375 6.375 0 0 0 10 3.626"})]})},o=(0,a(340498).wt)("personCircleFill",n)},963605:(e,t,a)=>{a.d(t,{H1:()=>u,VZ:()=>m});a(296540);var s=()=>a(484714),n=()=>a(56366),o=()=>a(959013),i=()=>a(751156),r=()=>a(709062),l=()=>a(359941),d=()=>a(702723),c=a(474848);const u=(0,o().YK)({title:{id:"spacePermissionsSettings.people.peopleDirectory.title",defaultMessage:"People directory"},byline:{id:"spacePermissionsSettings.people.peopleDirectory.byline",defaultMessage:"Enable the people directory and profile pages in Notion"}}),g=(0,o().YK)({title:{id:"spacePermissionsSettings.people.peopleProfile.title",defaultMessage:"Profiles"},byline:{id:"spacePermissionsSettings.people.peopleProfile.byline",defaultMessage:"Enable user profiles"}});function m(e){let{spaceStore:t,isLocked:a,isMobile:m}=e;const p=(0,s().v3)(),h=(0,n().K8)((()=>Boolean(t.getSetting("disable_people_directory"))),[t]),f=(0,l().V)({spaceStore:t})?u:g;return(0,c.jsx)(d().A,{isMobile:m,title:(0,c.jsx)(o().sA,{...f.title}),caption:(0,c.jsx)(o().sA,{...f.byline}),type:"toggle",isOn:!h,onToggle:()=>{a||function(e){let{environment:t,spaceStore:a,newValue:s}=e;i().createAndCommit({userAction:"SpacePermissionsSettings.DisablePeopleDirectorySetting",environment:t,canUndo:!0,perform:e=>{i().applyOperation({store:a,operation:{pointer:a.pointer,path:["settings","disable_people_directory"],command:"set",args:s},transaction:e})}})}({environment:p,spaceStore:t,newValue:!h})},isLocked:a,lockedTooltip:a?(0,r().C_)():void 0})}},965597:(e,t,a)=>{a.d(t,{Hb:()=>n,Hm:()=>i,ko:()=>o});a(898992),a(354520),a(581454);var s=()=>a(979340);function n(e){let{space:t,trustedDomains:a,enableTrustedDomainPermissionRedesign:n}=e;return t&&o(t)?n?(0,s().OX)(t.subscription_tier)?(a||[]).filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())):t.getEmailDomains():(a||[]).filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())):[]}function o(e){return Boolean(e&&(0,s().jR)(e.subscription_tier))}function i(e){return!(!e||!o(e))&&(!(0,s().OX)(e.subscription_tier)||(e.getSettings().domain_link_sharing_enabled??!0))}},976519:(e,t,a)=>{a.d(t,{q:()=>i});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(56366),o=()=>a(37433);function i(e){const t=(0,o().uJ)(),a=(0,s.useMemo)((()=>((null==t?void 0:t.teams)??[]).map((e=>e.store))),[t]),i=(0,o().qQ)(),r=(0,o().D5)(),l=(0,s.useMemo)((()=>r?a:i),[a,i,r]);return(0,n().K8)((()=>{if(!e)return!1;const t=l.filter((e=>e.isDefault()&&!e.isArchived()));return 1===t.length&&t[0].id===e}),[e,l])}},978604:(e,t,a)=>{a.d(t,{H:()=>f,K:()=>x});var s=a(296540),n=()=>a(484714),o=()=>a(689094),i=()=>a(959013),r=()=>a(534177),l=()=>a(908928),d=()=>a(901389),c=()=>a(972435),u=()=>a(962730),g=()=>a(493823),m=()=>a(859428),p=a(474848);const h=(0,i().YK)({failedCreatingNewScimToken:{id:"scimTokenSettings.error.failedCreatingNewScimToken",defaultMessage:"Failed to create a new SCIM token, please try again later."}});async function f(e){let{environment:t,spaceStore:a,userStore:s}=e;const{botStore:n,transactionPromise:o}=l().gI({environment:t,spaceStore:a,name:"SCIM",userId:s.id,spaceRole:"editor",type:"scim"});return await o,n.id}function x(e){const[t,a]=(0,s.useState)(!1),l=(0,n().v3)();const x=!t&&"Able"===e.tokenCreationAbility,v=t||"Able"!==e.tokenCreationAbility,y=(0,p.jsx)(g().p,{isBlue:x,isLightGray:v,disabled:v,style:{position:"relative",marginLeft:"auto",marginRight:0},iconLeading:e=>(0,o().W)({...e,width:14,height:14,fill:"inherit",marginRight:"6px"}),onClick:async function(){a(!0);try{const t=await f({...e,environment:l});e.onNewScimToken(t)}catch(t){d().f1(c().A.formatMessage(h.failedCreatingNewScimToken))}a(!1)},children:(0,p.jsx)(i().sA,{id:"scimTokenSettings.NewSCIMTokenButton.title",defaultMessage:"Add token"})});let b;switch(e.tokenCreationAbility){case"Able":return y;case"Undefined":b=(0,p.jsx)(i().sA,{defaultMessage:"Not able to create a new SCIM token right now. Please try again later.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.undefined"});break;case"SpaceHasExistingToken":b=(0,p.jsx)(i().sA,{defaultMessage:"To create a new SCIM token, please revoke the existing token.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.spaceHasLegacyToken"});break;case"UserHasExistingToken":b=(0,p.jsx)(i().sA,{defaultMessage:"You already have a registered SCIM token. To create a new one, please revoke the token created by you.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.userHasExistingToken"});break;default:(0,r().HB)(e.tokenCreationAbility)}return(0,p.jsx)(m().A,{textWrap:!1,renderTooltip:()=>b,placement:u().W.Right,render:e=>(0,p.jsx)("div",{...e,style:{paddingLeft:"4px"},children:y})})}},981982:(e,t,a)=>{a.d(t,{G0:()=>C,V$:()=>T,VX:()=>I});a(898992),a(354520),a(672577),a(581454),a(737550);var s=a(296540),n=()=>a(56366),o=()=>a(401497),i=()=>a(784892),r=()=>a(959013),l=()=>a(496603),d=()=>a(534177),c=()=>a(284371),u=()=>a(722872),g=()=>a(223544),m=()=>a(567865),p=()=>a(493823),h=()=>a(760217),f=()=>a(928600),x=()=>a(939740),v=()=>a(554509),y=()=>a(204063),b=()=>a(228927),S=()=>a(89924),j=()=>a(125565),w=()=>a(881690),A=()=>a(297780),M=a(474848);function C(e){const{pillTitle:t,selectedItem:a,items:s,shouldHidePrefix:n,selectionRequired:o}=e,i=s.find((e=>(0,l().n4)(e.value,a)));return(0,M.jsx)(m().zr,{...e,iconStyles:{marginRight:5},renderMenu:e=>(0,M.jsx)(_,{...e,pillTitle:t,selectionRequired:o}),pillTitle:(0,M.jsx)("div",{style:{maxWidth:300,overflow:"hidden",textOverflow:"ellipsis"},children:n?i?i.shortTitle:t:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{style:Boolean(i)?{fontWeight:c().Wy.medium}:void 0,children:t}),Boolean(i)?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{children:": "}),(0,M.jsx)("span",{children:null==i?void 0:i.shortTitle})]}):void 0]})})})}function I(e){const{pillTitle:t}=e,[a,n]=(0,s.useState)(e.selectedItems);return(0,M.jsx)(k,{...e,tempSelectedItems:a,setTempSelectedItems:n,renderMenu:e=>(0,M.jsx)(_,{...e,pillTitle:t})})}function T(e){const{pillTitle:t,pageSize:a,searchPlaceholder:n,items:o}=e,[i,r]=(0,s.useState)(e.selectedItems),[l,d]=(0,s.useState)("");return(0,M.jsx)(k,{...e,tempSelectedItems:i,setTempSelectedItems:r,onToggleSelected:()=>d(""),renderMenu:e=>(0,M.jsx)(z,{...e,items:o,pageSize:a,pillTitle:t,searchPlaceholder:n,tempSelectedItems:i,setTempSelectedItems:r,query:l,setQuery:d})})}function k(e){const{pillTitle:t,selectedItems:a,items:s,renderMenu:n,tempSelectedItems:o,setTempSelectedItems:i}=e;let d;if(1===a.length){const e=s.find((e=>(0,l().n4)(e.value,a[0])));d=(null==e?void 0:e.shortTitle)||(null==e?void 0:e.title)}else a.length>1&&(d=(0,M.jsx)(r().sA,{id:"settingsConsoleFilterPill.numSelected",defaultMessage:"{count} selected",values:{count:a.length}}));return(0,M.jsx)(m().m1,{...e,iconStyles:{marginRight:5},tempSelectedItems:o,setTempSelectedItems:i,renderMenu:n,pillTitle:(0,M.jsxs)("div",{children:[(0,M.jsx)("span",{style:Boolean(d)?{fontWeight:c().Wy.medium}:void 0,children:t}),Boolean(d)?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{children:": "}),(0,M.jsx)("span",{children:d})]}):void 0]})})}function _(e){let{items:t,toggleSelectedItem:a,renderItemOptionIcon:s,menuListStore:n,clearSelection:o,pillTitle:i,selectAll:l,shouldUseCheck:d,selectionRequired:c,onSubmit:m,handleScroll:j,renderSearchInput:w}=e;const A=D(),C={key:"menuOptions",items:t.length?t.map((e=>({key:e.key,action:()=>a(e.value),render:t=>(0,M.jsx)(h().A,{...t,icon:d?void 0:s(e.value),title:e.title,caption:e.caption,shouldWrapCaption:e.wrapCaption,dontShrinkTitle:e.dontShrinkTitle,hoveredStyle:A.hoveredItem,right:d?s(e.value):(0,M.jsx)(v().D,{colorName:"tertiary",children:e.count})})}))):[g().v8],render:e=>(0,M.jsx)(S().A,{...e,title:null,loading:!1})};return(0,M.jsxs)("div",{style:A.container,children:[(0,M.jsxs)(S().A,{topBorder:!1,style:A.header,children:[(0,M.jsx)(v().D,{styleName:"UISmall-12px/Medium",colorName:"tertiary",children:i}),l?(0,M.jsx)("div",{style:A.buttonContainer,children:(0,M.jsx)(p().p,{onClick:l,isBlue:!0,size:"xs",children:(0,M.jsx)(r().sA,{id:"settingsConsoleFilterPill.selectAllButton",defaultMessage:"Select all"})})}):void 0]}),w?w():void 0,(0,M.jsxs)(f().A,{menuType:u().gu.Popup,header:null,maxHeight:250,width:320,children:[(0,M.jsx)(x().Ay,{type:x().Oh.Vertical,store:n,initialFocus:void 0,sections:[C]}),j&&(0,M.jsx)(b().A,{onChange:j})]}),(0,M.jsxs)(S().A,{topBorder:!0,style:A.footer,children:[c?(0,M.jsx)("div",{}):(0,M.jsx)(p().p,{onClick:o,style:A.clearButton,children:(0,M.jsx)(r().sA,{id:"settingsConsoleFilterPill.clearButton",defaultMessage:"Clear"})}),(0,M.jsx)(y().A,{onClick:m,children:(0,M.jsx)(r().sA,{id:"core.baseFilterPill.doneButton",defaultMessage:"Apply"})})]})]})}function z(e){const{items:t,pageSize:a,searchPlaceholder:o,tempSelectedItems:r,setTempSelectedItems:c,query:u,setQuery:g}=e,m=D(),p=(0,s.useMemo)((()=>u?t.filter((e=>e.searchTerms.some((e=>e.includes(u.toLowerCase()))))):t),[u,t]),h=(0,s.useCallback)((e=>{g(e.target.value)}),[g]),[f,x]=(0,s.useState)(a),v=(0,s.useMemo)((()=>a?p.slice(0,f):p),[p,f,a]);const y=(0,n().K8)((()=>r.map((e=>{const a=t.find((t=>(0,l().n4)(t.value,e)));if(a)return(0,M.jsx)(w().A,{isSingle:!0,format:i().NY.Inline,style:m.tokenContainer,showRemoveButton:!0,onClickRemove:()=>{const e=r.filter((e=>!(0,l().n4)(e,a.value)));c(e)},value:(0,M.jsxs)("div",{style:m.tokenContents,children:[a.tokenIcon,(0,M.jsx)(j().A,{children:a.shortTitle})]}),backgroundColor:a.tokenColor},a.key)})).filter(d().O9)),[r,c,m,t]);return(0,M.jsx)(_,{...e,toggleSelectedItem:t=>{e.toggleSelectedItem(t),g("")},items:v,handleScroll:function(e){a&&f&&e<5&&f<p.length&&x(f+a)},renderSearchInput:()=>(0,M.jsx)(A().A,{focus:!0,value:u,style:m.search,placeholder:o??"",onChange:h,onRemoveLastToken:()=>{const e=r.slice(0,-1);c(e)},tokens:y})})}function D(){return(0,o().IS)((e=>({container:{padding:"8px 0 6px"},header:{padding:"0px 8px 6px 12px",justifyContent:"space-between",display:"flex",alignItems:"center",flexDirection:"row"},icon:{width:12,marginRight:6,fill:"currentColor"},buttonContainer:{display:"flex",alignItems:"center"},check:{width:16,height:16,color:e.text.tertiary},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex",flexDirection:"row"},clearButton:{fontWeight:c().Wy.medium},search:{margin:"4px auto",width:"95%",maxHeight:200,overflowY:"auto"},tokenContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4},tokenContainer:{margin:"0px 6px 6px 0px",height:20},hoveredItem:{background:e.buttonHoveredBackground}})),[])}},994776:(e,t,a)=>{a.d(t,{t:()=>d});a(296540);var s=()=>a(401497),n=()=>a(750559),o=()=>a(959013),i=()=>a(284371),r=()=>a(864943),l=a(474848);function d(e){let{runNewSearch:t,error:a}=e;const d=(0,s().IS)((e=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headerIcon:{width:28,height:28,color:e.redBadgeBackground,fill:"currentColor"},title:{margin:"8px auto",fontWeight:i().Wy.medium,fontSize:16},description:{fontWeight:i().Wy.regular,fontSize:14,lineHeight:1.3,color:e.text.tertiary,textAlign:"center",width:328,margin:"0 auto 16px"},errorMessage:{borderRadius:4,background:e.cardBackground,fontFamily:i().Tf.mono,fontSize:12,color:e.text.tertiary,padding:"18px 24px",margin:"0 auto 12px"},errorButton:{width:195,margin:"8px auto 0",textAlign:"center"}})),[]);return(0,l.jsxs)("div",{style:d.container,children:[(0,n().f)(d.headerIcon),(0,l.jsx)("h1",{style:d.title,children:(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.error.title",defaultMessage:"Something went wrong"})}),(0,l.jsx)("p",{style:d.description,children:(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.error.description",defaultMessage:"Something went wrong when we were loading the results. Try to run your search again."})}),null,(0,l.jsx)(r().A,{size:"lg",style:d.errorButton,onClick:()=>t(!0),children:(0,l.jsx)(o().sA,{id:"adminContentSearchTab.pagesTable.error.confirm",defaultMessage:"Retry"})})]})}}}]);