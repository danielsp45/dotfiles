"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[95168],{90907:(e,t,a)=>{a.d(t,{h:()=>i});a(296540);var n=a(474848);const o={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.95 12.06 15.66",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"}),(0,n.jsx)("path",{d:"M10 1.95a4 4 0 0 0-4 4v1.433a2.426 2.426 0 0 0-2.025 2.392v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.426 2.426 0 0 0 14 7.383V5.95a4 4 0 0 0-4-4m2.75 5.4h-5.5v-1.4a2.75 2.75 0 0 1 5.5 0zM5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},i=(0,a(340498).wt)("lock",o)},94985:(e,t,a)=>{a.d(t,{A:()=>gt,$:()=>mt});var n=a(296540),o=()=>a(959013),i=()=>a(484714),s=()=>a(56366),r=()=>a(401497),l=()=>a(584262),c=()=>a(340498),d=a(474848);const u=(0,c().wt)("disconnect",{viewBox:"0 0 16 16",svg:(0,d.jsx)("path",{d:"M6.45508 4.50977L7.28906 5.34375L8.7041 3.4707L7.67871 5.7334L9.45605 7.51074H11.083L10.3857 8.43359L11.2539 9.30859L12.7852 7.36035C12.9082 7.20996 12.9697 7.06641 12.9697 6.90234C12.9697 6.61523 12.751 6.41016 12.4502 6.41016H8.54688L10.5703 1.05078C10.8506 0.298828 10.0645 -0.0976562 9.58594 0.517578L6.45508 4.50977ZM12.874 13.6631C13.0859 13.875 13.4346 13.875 13.6396 13.6631C13.8516 13.458 13.8584 13.1025 13.6396 12.8906L3.10547 2.35645C2.90039 2.15137 2.53809 2.14453 2.33301 2.35645C2.12793 2.56152 2.12793 2.92383 2.33301 3.12891L12.874 13.6631ZM3.0166 9.12402C3.0166 9.4043 3.23535 9.61621 3.53613 9.61621H7.44629L5.41602 14.9688C5.13574 15.7207 5.92188 16.1172 6.40039 15.5088L9.52441 11.5166L8.69043 10.6895L7.28223 12.5488L8.30078 10.293L6.5166 8.51562H4.89648L5.60059 7.59277L4.72559 6.71777L3.20801 8.65918C3.08496 8.81641 3.0166 8.95996 3.0166 9.12402Z"})});var m=()=>a(212727),g=()=>a(858141),p=()=>a(498212),f=()=>a(939768),v=()=>a(427704);function b(e,t){const a=t.trim().toLowerCase(),n=(0,f().d9)(a).replace(/\./g,"-");return n?`${n}-${e}`:e}var y=()=>a(388693),M=()=>a(433847),k=()=>a(179034),h=()=>a(857783),A=()=>a(799288),S=()=>a(553965),C=()=>a(332393),w=()=>a(798880),x=()=>a(765957),I=()=>a(630116);const N={createdBy:void 0,authorizedBy:void 0,integrationType:void 0,isYou:!1,creatorEmail:void 0,tagline:void 0,integrationInfo:void 0,isInternal:!0};function _(e){const t=(0,o().tz)(),a=(0,s().K8)((()=>x().default.state.currentUserRootStore),[]);return(0,s().K8)((()=>{var n;if(!e||!a)return N;const o=e.integration_id;if(!o)return N;const i=(0,I().Oo)(a,{id:o,table:C().Li}),s=i.getKeyStore("type").getValue(),r=i.getKeyStore("info").getValue(),l=e.created_by_id;let c;if(r&&"tagline"in r&&(c=r.tagline),!l)return{...N,integrationType:s,integrationInfo:r,tagline:c,isInternal:!s||"internal"===s};const d=I().sk.createChildStore(a,{id:l,table:w().oo}),u=d.getDisplayName(t),m=d.getEmail(),g=null===(n=x().default.state.currentUserStore)||void 0===n?void 0:n.id,p=d.id===g,f=!s||"internal"===s;return f?{createdBy:u,authorizedBy:void 0,integrationType:s,isYou:p,creatorEmail:m,tagline:c,integrationInfo:r,isInternal:f}:{createdBy:r&&"developer_name"in r?r.developer_name:void 0,authorizedBy:u,integrationType:s,isYou:p,creatorEmail:m,tagline:c,integrationInfo:r,isInternal:f}}),[e,a,t])}var L=()=>a(963589),P=()=>a(962730),j=()=>a(554509);function T(e){let{mainContent:t,caption:a}=e;const n=(0,r().IS)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"flex-start",maxWidth:350,whiteSpace:"normal",padding:8},caption:{marginTop:t?4:0,color:e.text.contrastSecondary},mainContent:{color:e.text.contrastPrimary}})),[t]);return(0,d.jsxs)("div",{style:n.container,children:[t?(0,d.jsx)(j().D,{styleName:"UISmall-12px/Medium",style:n.mainContent,children:t}):void 0,a?(0,d.jsx)(j().D,{styleName:"UISmall-12px/Regular",style:n.caption,children:a}):void 0]})}var B=()=>a(760217),U=()=>a(859428),R=()=>a(256863);const D=(0,o().YK)({createdBy:{id:"connection.createdBy",defaultMessage:"Created by {name}"},authorizedBy:{id:"botMenuItem.authorizedBy",defaultMessage:"Authorized by {name}"},publicLabel:{id:"botMenuItem.public",defaultMessage:"Public"},selfIndicator:{id:"botMenuItem.youIndicator",defaultMessage:" (You)"},addConnectionLabel:{id:"topbarMoreConnections.addConnection",defaultMessage:"Add connection"},activeConnectionsLabel:{defaultMessage:"Active connections",id:"topbarMenu.subActions.addConnections.activeConnections"},authorizedByLabel:{defaultMessage:"Authorized by {authorizedBy}",id:"topbarMenu.subActions.activeConnection.authorizedBy"},notConnectedLabel:{defaultMessage:"Add a new connection",id:"topbarMenu.subActions.addConnections.addNewConnection"},noConnectionsLabel:{defaultMessage:"None",id:"topbarMenu.subActions.addConnections.none"},capabilitiesLabel:{defaultMessage:"Capabilities",id:"topbar.connectionSection.capabilities.label"}});function V(e,t){const a=(0,L().X)("clearer_integration_access_connections_menu"),{bot:i}=e,r=(0,s().K8)((()=>x().default.state.currentUserRootStore),[]),l=(0,o().tz)(),c=_(i);let u,m;if(c.isInternal){u=c.createdBy?l.formatMessage(D.createdBy,{name:c.createdBy}):void 0;const e=c.createdBy?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{children:u}),(0,d.jsx)("span",{children:c.isYou?(0,d.jsx)(o().sA,{...D.selfIndicator}):void 0})]}):void 0;m=c.creatorEmail||e?(0,d.jsx)(T,{mainContent:e,caption:c.creatorEmail}):void 0}else u=c.authorizedBy?l.formatMessage(D.authorizedBy,{name:c.authorizedBy}):void 0,m=(0,d.jsx)(T,{mainContent:c.tagline,caption:c.authorizedBy?(0,d.jsx)(o().sA,{...D.authorizedBy,values:{name:c.authorizedBy}}):void 0});const g=a&&!c.isInternal?(0,d.jsx)(j().D,{styleName:"UISmall-12px/Regular",colorName:"tertiary",children:(0,d.jsx)(o().sA,{...D.publicLabel})}):void 0;if(!i||!r)return null;if(!a)return(0,d.jsx)(B().A,{...e,icon:(0,d.jsx)(R().A,{botValue:i}),title:(0,A().Hg)(i),ref:t});const p=(0,d.jsx)(B().A,{...e,icon:(0,d.jsx)(R().A,{botValue:i}),title:(0,A().Hg)(i),caption:u,right:g,rightStyle:{alignSelf:"flex-start"},ref:t});return m?(0,d.jsx)(U().A,{placement:P().W.Left,renderTooltip:()=>m,render:(e,t)=>n.cloneElement(p,(0,S().A)(e,p.props))}):p}const F=n.forwardRef(V);var z=()=>a(583690),E=()=>a(575143),O=()=>a(84817),H=()=>a(419357),q=()=>a(331542),W=()=>a(678553),K=()=>a(64e3),G=()=>a(187820),Y=()=>a(16006),X=()=>a(148307),Q=()=>a(751109),Z=()=>a(878079),$=()=>a(103448);function J(e){return(0,s().K8)((()=>{var t;return{isDefined:e.isDefined(),channel:null===(t=e.getKeyStore("channel").getValue())||void 0===t?void 0:t.replace(/^#/,"")}}),[e])}function ee(){return(0,d.jsx)($().A,{imageURL:X().A.images.tooltips.pageUpdates.slackPng,imageHeight:100,caption:(0,d.jsx)(o().sA,{defaultMessage:"Connect a Slack channel to get updates about this page and pages within it.",id:"topbar.updatesButton.slackIntegrationButton.tooltip"})})}function te(){return(0,d.jsx)($().A,{imageURL:X().A.images.tooltips.pageUpdates.slackPng,imageHeight:100,caption:(0,d.jsx)(o().sA,{defaultMessage:"Disconnect a Slack channel to stop getting updates about this page and pages within it.",id:"topbar.updatesButton.slackIntegrationButton.disconnectTooltip"})})}const ae=(0,n.forwardRef)((function(e,t){const{blockStore:n,...i}=e,{blockStore:r,slackIntegrationStore:c}=(0,Z().x2)(n),{isDefined:u,channel:m}=J(c),g=(0,s().K8)((()=>(0,a(492414).Ay)({store:r,pageVisitSource:l().y8.LinkInPage})),[r]);return u?(0,d.jsx)(U().A,{placement:P().W.Left,render:e=>(0,d.jsx)(E().A,{...(0,S().A)(e,i),svg:Q().z,title:m,caption:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o().sA,{defaultMessage:"Based on",id:"topbar.updatesButton.slackIntegrationButton.activeTitle"})," ",(0,d.jsx)(a(719147).A,{href:g,children:(0,d.jsx)(Y().A,{store:r,style:{display:"inline"}})})]}),ref:t}),renderTooltip:te}):null})),ne=(0,n.forwardRef)((function(e,t){const{blockStore:a,...n}=e,{slackIntegrationStore:i}=(0,s().K8)((()=>(0,Z().x2)(a)),[a]),{isDefined:r,channel:l}=J(i);return r?(0,d.jsx)(U().A,{placement:P().W.Left,render:e=>(0,d.jsx)(E().A,{ref:t,svg:Q().z,title:l,caption:(0,d.jsx)(o().sA,{defaultMessage:"Connected to Slack channel",id:"topbar.updatesButton.slackIntegrationButton.connectedCaption"}),...(0,S().A)(e,n)}),renderTooltip:te}):null}));var oe=()=>a(722872);function ie(e){const[t,a]=(0,n.useState)(""),[o,i]=(0,n.useState)(!1),s=(0,n.useCallback)((()=>{a(""),i(!1)}),[]);return{query:t,setQuery:a,userToggledToAddView:o,setUserToggledToAddView:i,resetMenuState:s,inActiveOnlyMode:!o&&e}}var se=()=>a(452558),re=()=>a(928600),le=()=>a(480095),ce=()=>a(89924),de=()=>a(662971);const ue=(0,n.forwardRef)((function(e,t){const{context:a,parent:r,isSharedDirectly:l,botStore:c,botPermissionSourcePage:u,originConnectionLabel:m,...g}=e,p=(0,L().X)("clearer_integration_access_connections_menu"),f=Boolean(c),v=(0,i().v3)(),b=(0,o().tz)(),y=(0,s().O$)(x().AppStoreCurrentSpaceStore),M=a.blocks[0],k=(0,s().K8)((()=>M.canAdmin()&&(null==y?void 0:y.canRead())),[M,y]),h=_((0,s().K8)((()=>c.getModel()),[c])),A=ie(f),{resetMenuState:S}=A,C=!h.isInternal,w=p&&h.createdBy?b.formatMessage(D.createdBy,{name:h.createdBy}):void 0,I=p&&h.authorizedBy?b.formatMessage(D.authorizedBy,{name:h.authorizedBy}):void 0;return(0,n.createElement)(de().A,{...g,style:p?{width:350}:void 0,key:c.id,onFocus:r.onFocus,focused:g.focused,openOnFocus:!1,ref:t,placementToOrigin:P().W.Left,renderOrigin:e=>(0,d.jsx)(B().A,{...e,title:m,titleStyle:p?{fontSize:"13px",fontWeight:500}:void 0,caption:p?h.isInternal?w:I:void 0,captionStyle:p?{fontSize:"11px"}:void 0,right:p&&C?(0,d.jsx)(j().D,{styleName:"UIMini-10px/Regular",colorName:"tertiary",children:(0,d.jsx)(o().sA,{...D.publicLabel})}):void 0,rightStyle:p?{alignSelf:"center",marginRight:"4px"}:void 0,icon:(0,d.jsx)(R().A,{botStore:c,showActiveDot:!p,style:{position:"relative",...p&&{width:"20px",height:"20px"}}})}),renderExtension:(e,t)=>{let n;return n=v.device.isPhone?{menuType:oe().gu.Modal,right:(0,d.jsx)(le().DoneMenuText,{}),onClickRight:()=>{S(),t.close()},...e}:{menuType:oe().gu.Popup,onClickOutside:p?()=>{S(),t.close()}:t.close,width:p?void 0:220,...e},(0,d.jsx)(re().A,{...n,children:(0,d.jsx)(se().A,{context:a,initialFocus:0,onAccept:r.onAccept,sections:[me({isSharedDirectly:l,botCapabilities:c.getCapabilities(),botPermissionSourcePage:u,intl:b}),...k?[ge({isSharedDirectly:l,botId:c.id,botName:c.getName(),newConnectionsMenuEnabled:p})]:[],...p&&(h.createdBy||h.authorizedBy)?[pe({createdBy:h.createdBy,authorizedBy:h.authorizedBy})]:[]]})})}})}));function me(e){const{isSharedDirectly:t,botCapabilities:a,botPermissionSourcePage:n,intl:o}=e,i=(0,M().MD)(a);return{key:"active connection capabilities section",render:e=>(0,d.jsx)(ce().A,{...e,topBorder:!1}),actions:[...t?[]:[at(n)],{key:"capabilities",displayName:o.formatMessage(D.capabilitiesLabel),analyticsName:"capabilities",searchName:o.formatMessage(D.capabilitiesLabel),closeParentMenu:!1,action:()=>{},render:e=>{const t=(0,z().I2)(i);return(0,d.jsx)(W().Ay,{...e,title:(0,d.jsx)(j().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:o.formatMessage(D.capabilitiesLabel)}),shouldWrapCaption:!0,style:{paddingLeft:12,paddingRight:12,paddingTop:4,paddingBottom:4},captionStyle:{marginTop:4},caption:(0,d.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:t})})}}]}}function ge(e){const{botId:t,botName:a}=e;return{key:"active connection disconnect section",render:e=>(0,d.jsx)(ce().A,{...e,topBorderExtendToEdge:!0}),actions:[nt(t,a)]}}function pe(e){const{createdBy:t,authorizedBy:a}=e;return{key:"active connection metadata section",render:e=>(0,d.jsx)(ce().A,{...e,topBorderExtendToEdge:!0}),actions:[{key:"created by",displayName:t||"",analyticsName:"created_by_label",searchName:D.createdBy.defaultMessage,closeParentMenu:!0,render:()=>(0,d.jsxs)("div",{style:{width:175,display:"flex",flexDirection:"column",alignItems:"start",padding:"8px",gap:4},children:[t?(0,d.jsx)(j().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,d.jsx)(o().sA,{...D.createdBy,values:{name:t}})}):void 0,a?(0,d.jsx)(j().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,d.jsx)(o().sA,{...D.authorizedBy,values:{name:a}})}):void 0]}),action:()=>{}}]}}a(16280),a(944114),a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520),a(581454);var fe=()=>a(792071),ve=()=>a(824862),be=()=>a(534177);function ye(e){(0,a(679924).v)(e,"open_more_connections_menu")}var Me=()=>a(780054),ke=()=>a(163580),he=()=>a(640653),Ae=()=>a(106628);const Se=(0,n.forwardRef)((function(e,t){const{context:l,parent:u,alreadyConnectedIntegrationIds:m,alreadyConnectedBotIds:p,originButtonLabel:f,connectedActionsToShow:v,...b}=e,M=l.blocks[0],k=(0,i().v3)(),h=(0,o().tz)(),A=(0,s().O$)(x().AppStoreCurrentSpaceStore),S=(0,s().K8)((()=>null==A?void 0:A.getBotSettingsStore().getValue()),[A]),w=(0,s().K8)((()=>null!=S&&S.integration_restrictions&&null!=S&&S.integration_approval_statuses?Object.keys(S.integration_approval_statuses):[]),[S]),N=(0,L().X)("clearer_integration_access_connections_menu"),_=((null==v?void 0:v.length)??0)>0,{query:P,setQuery:T,userToggledToAddView:B,setUserToggledToAddView:U,resetMenuState:R}=ie(_),[V,F]=(0,n.useState)({status:"loading"}),z=(0,a(645873).fJ)(Ae().T.searchActions),O=(0,r().IS)((e=>({rightStyle:{color:e.text.tertiary,marginRight:5},botCapabilitiesListContainer:{display:"flex",alignItems:"start",flexDirection:"column",fontSize:a(284371).J.UISmall.desktop},botCapabilitiesList:{display:"flex",flexDirection:"column",border:`1px solid ${e.stroke.secondary}`,padding:14,width:"100%",borderRadius:8},botCapabilitiesListTitle:{color:e.text.secondary,marginBottom:6},dialogIconStyle:{height:c().Ev.xl,width:c().Ev.xl},connectBotDescription:{marginTop:8,color:e.text.secondary},backArrowStyle:{fill:e.text.tertiary,height:16,width:16,fontWeight:510}})),[]),[H,q]=(0,a(857437).$)();return(0,n.useEffect)((()=>{if("resolved"!==z.status)return;const e=z.value;const{currentUserRootStore:t}=x().default.state;Promise.all([async function(t){return await e.searchSpaceBots({environment:k,query:t})}(P),async function(e){const t=await Ae().T.searchActions.load();return await t.searchInstallableIntegrations({query:e,environment:k,spaceId:null==A?void 0:A.id,botSettings:S})}(P)]).then((e=>{let[a,n]=e;const o=new Set,i=function(e){const{alreadyConnectedBotIds:t,alreadyConnectedIntegrationIds:a,botValues:n,environment:o}=e,i=[],{currentUserRootStore:s}=x().default.state;if(!s)throw new Error("currentUserStore not defined");for(const r of n){const e=r.id;let n=!Boolean(r.integration_id);if(r.integration_id){const e=(0,I().Oo)(s,{id:r.integration_id,table:C().Li}).getKeyStore("type").getValue();(0,C().SF)(e?{type:e}:void 0)&&(n=!0)}const l=t.has(e)||r.integration_id&&!n&&a.has(r.integration_id),c=fe().Bj6.fromValue(ve().GP,r),d=(0,ke().VT)(o,c)||(0,he().s7)(o)&&(0,ke().b0)(c);!l&&d&&i.push(r)}return i}({alreadyConnectedBotIds:p,alreadyConnectedIntegrationIds:m,botValues:a,environment:k}).map((e=>{if(e.integration_id&&t){const a=(0,I().Oo)(t,{id:e.integration_id,table:C().Li}).getKeyStore("type").getValue();fe().Bj6.fromValue(ve().GP,e).isInternalBot(a?{type:a}:void 0)&&o.add(e.integration_id)}return{table:ve().GP,value:e}}));let s=n.map((e=>{if(A){const t=I().sk.createChildStore(A,{id:e,table:C().Li}),a=t.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:a}=e;return a(t)}));if(a&&!(0,y().v_)(a))return{table:C().Li,value:a}}})).filter(be().O9).filter((e=>!(o.has(e.value.id)||m.has(e.value.id))));if(y().Gk.name.toLowerCase().includes(P.toLowerCase())){const e={table:"legacy_integration",value:y().Gk};s=[...s,e]}const r=[...i,...s].sort(((e,t)=>{var a,n;const o=null===(a=e.value.name)||void 0===a?void 0:a.toLowerCase(),i=null===(n=t.value.name)||void 0===n?void 0:n.toLowerCase();return o&&i?o<i?-1:o>i?1:0:0}));F({results:r,status:"ready"})})).catch((()=>F({status:"error"})))}),[P,A,p,S,w,k,m,M,z.status,z.value]),(0,d.jsx)(de().A,{...b,renderOrigin:(e,t)=>(0,d.jsx)(E().A,{...e,ref:t,title:f,svg:g().p}),renderExtension:(e,t)=>{const n=Me().A.isMobile?{menuType:oe().gu.Modal,right:(0,d.jsx)(le().DoneMenuText,{}),onClickRight:()=>{R(),t.close()},onCancel:()=>{R(),t.close()},...e}:{menuType:oe().gu.Popup,onClickOutside:()=>{R(),t.close},...e},o=k.device.isMobile?{menuType:oe().gu.Modal,topbarStyle:{height:0},onCancel:()=>{R(),t.close}}:{menuType:oe().gu.Popup,maxHeight:"16vh",onClickOutside:()=>{R(),t.close},...e},i=Boolean(M.canAdmin()&&(null==A?void 0:A.canRead()));let s=[];if(N){const e={key:"add connection row",displayName:h.formatMessage(D.addConnectionLabel),analyticsName:"add_connection_row",searchName:h.formatMessage(D.addConnectionLabel),closeParentMenu:!1,action:()=>{U(!0)},render:e=>(0,d.jsx)(E().A,{...e,title:h.formatMessage(D.addConnectionLabel),svg:a(617668).plusIcon,svgStyle:{height:c().Ev.xs,width:c().Ev.xs}})};if(!B&&_)s=[_e(v||[],N,h),{key:"add connection row section",render:e=>(0,d.jsx)(ce().A,{...e}),actions:[e]}],s.push(Ne({canAdminAndIsMember:i,slackValue:y().Gk}));else{if(_){const e={key:"back row",displayName:h.formatMessage(D.addConnectionLabel),analyticsName:"back_button",searchName:"back row",closeParentMenu:!1,action:()=>{U(!1),T("")},render:e=>(0,d.jsx)(E().A,{...e,title:(0,d.jsx)(j().D,{styleName:"UIRegular-14px/Semibold",colorName:"primary",children:h.formatMessage(D.addConnectionLabel)}),svg:a(526278).w,svgStyle:O.backArrowStyle})};s=[{key:"back row section",render:e=>(0,d.jsx)(ce().A,{...e,topBorder:!1}),actions:[e]}]}i&&(s.push(Ce({query:P,setQuery:T,inputComboboxProps:H,newConnectionsMenuEnabled:N})),""===P?s.push(we({searchResults:V,resultsMenuProps:o,styles:O,onClose:()=>R(),intl:h,hasExistingConnections:p.size+m.size>0})):s.push(Ie({searchResults:V,resultsMenuProps:o,styles:O,onClose:()=>R()}))),s.push(Ne({canAdminAndIsMember:i,slackValue:y().Gk,includeDeveloperLink:!0}))}}else s=[...i?[Ce({query:P,setQuery:T,inputComboboxProps:H,newConnectionsMenuEnabled:N}),""===P?we({searchResults:V,resultsMenuProps:o,styles:O,onClose:()=>R(),intl:h,hasExistingConnections:p.size+m.size>0}):Ie({searchResults:V,resultsMenuProps:o,styles:O,onClose:()=>R()})]:[],Ne({canAdminAndIsMember:i,slackValue:y().Gk}),_e(v||[],N,h)];return(0,d.jsx)(re().A,{...n,onClick:e=>{e.stopPropagation()},children:(0,d.jsx)(se().A,{initialFocus:0,context:l,onAccept:e=>{ye(k),e.closeParentMenu&&(t.close(),R())},comboboxProps:i?q:void 0,sections:s,resetFocusOnMouseOut:!0})})},onFocus:u.onFocus,focused:b.focused,openOnFocus:!0,ref:t,right:m.size+p.size>0?m.size+p.size:h.formatMessage(D.noConnectionsLabel),rightStyle:O.rightStyle})}));function Ce(e){let{query:t,setQuery:a,newConnectionsMenuEnabled:n,inputComboboxProps:o}=e;return{key:"search connections section",render:e=>(0,d.jsx)(ce().A,{style:n?{width:350}:{},...e,isInput:!0,topBorder:!1}),actions:[Xe(t,a,o)]}}function we(e){const{searchResults:t,resultsMenuProps:a,styles:n,onClose:o,intl:i,hasExistingConnections:s}=e,r=new Set,l="ready"===t.status?t.results.map((e=>"bot"===e.table?(e.value.integration_id&&r.add(e.value.integration_id),Ze(e.value,n,o)):st(e)?(0,Z().Qi)()&&!(0,Z().yP)()?void 0:Je(e.value):$e(e.value,o))).filter(be().O9):"loading"===t.status?[Ye()]:[Qe()];return{key:"search initial connections section",render:e=>(0,d.jsx)(xe,{...e,resultsMenuProps:a}),title:s?void 0:i.formatMessage(D.notConnectedLabel),actions:[...l]}}function xe(e){const{resultsMenuProps:t,...a}=e,o=(0,n.useRef)(null),i=(0,n.useCallback)((()=>{var e;const t=null===(e=o.current)||void 0===e||null===(e=e.querySelector('[role="menuitem"]'))||void 0===e?void 0:e.clientHeight,a=window.innerHeight<600?3:7;o.current&&t&&(o.current.style.maxHeight=a*t+.5*t+"px")}),[]);return(0,n.useEffect)((()=>(i(),window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)})),[i]),(0,d.jsx)(re().A,{...t,innerRef:o,children:(0,d.jsx)(ce().A,{...a,isInput:!0,topBorder:!1,style:{margin:0,paddingTop:0,paddingBottom:0}})})}function Ie(e){const{searchResults:t,resultsMenuProps:a,styles:n,onClose:o}=e;let i;return i="error"===t.status?[Qe()]:"loading"===t.status?[Ye()]:"ready"===t.status&&t.results.length>0?t.results.map((e=>e.table===ve().GP?Ze(e.value,n,o):st(e)?(0,Z().Qi)()&&!(0,Z().yP)()?void 0:Je(e.value):$e(e.value,o))).filter(be().O9):[{key:"connections search error",displayName:Pe().A.formatMessage(Ke.connectionNoSearchResultsLabel),analyticsName:Ke.connectionNoSearchResultsLabel.defaultMessage,searchName:Ke.connectionNoSearchResultsLabel.defaultMessage,closeParentMenu:!1,validators:[Le().sc7,Le().p2L,Ge],render:e=>(0,d.jsx)(K().A,{title:Pe().A.formatMessage(Ke.connectionNoSearchResultsLabel)}),action:()=>{}}],{key:"connections search results",render:e=>(0,d.jsx)(xe,{...e,resultsMenuProps:a}),actions:i}}function Ne(e){let{canAdminAndIsMember:t,slackValue:n,includeDeveloperLink:i}=e;const s=t,r=!(0,Z().Qi)()||(0,Z().yP)(),l={key:"develop manage integrations",displayName:"Develop or manage integrations",analyticsName:"develop_manage_integrations",searchName:"develop manage integrations",closeParentMenu:!0,action:e=>{let{environment:t}=e;a(559926).yQ(t,{from:"topbar_connections_menu",href:v().JZ.creatorProfileIntegrations}),window.open(v().JZ.creatorProfileIntegrations,"_blank")},render:e=>(0,d.jsx)(a(187485).A,{...e,href:v().JZ.creatorProfileIntegrations,external:!0,children:(0,d.jsx)(a(493823).p,{iconLeading:a(955363).arrowDiagonalUpRightIcon,iconStyle:{height:c().Ev.default,width:c().Ev.default},style:{width:"100%"},children:(0,d.jsx)(j().D,{styleName:"UIRegular-14px/Regular",children:(0,d.jsx)(o().sA,{id:"topbarMoreConnections.developManage",defaultMessage:"Develop integration"})})})})};return{key:"manage connections section",render:e=>(0,d.jsx)(ce().A,{...e}),actions:[...!s&&r?[Je(n)]:[],{key:"manage connections",displayName:Pe().A.formatMessage(Ke.manageConnectionsLabel),analyticsName:Ke.manageConnectionsLabel.defaultMessage,searchName:Ke.manageConnectionsLabel.defaultMessage,closeParentMenu:!0,validators:[Le().sc7,Le().p2L,Le().AU6(Le().FrL)],render:(e,t,a)=>(0,d.jsx)(E().A,{...e,title:Pe().A.formatMessage(Ke.manageConnectionsLabel),svg:m().gearIcon}),action:e=>{Be().Ow({currentTab:"connected_apps",openedFrom:"topbar"})}},...i?[l]:[]]}}function _e(e,t,a){return{key:"existing connections section",title:a.formatMessage(D.activeConnectionsLabel),render:e=>(0,d.jsx)(ce().A,{style:t?{maxHeight:300,overflowY:"auto"}:{},...e}),actions:[...e]}}var Le=()=>a(878377),Pe=()=>a(972435),je=()=>a(908928),Te=()=>a(901389),Be=()=>a(209660),Ue=()=>a(755636),Re=()=>a(861017),De=()=>a(725951),Ve=()=>a(898563),Fe=()=>a(874913),ze=()=>a(957416),Ee=()=>a(246826),Oe=()=>a(464510),He=()=>a(751156);const qe=(0,o().YK)({somethingWentWrong:{defaultMessage:"Something went wrong.",id:"slackActions.dialogError.loginWithSlack.errorMessage"},titleMessage:{defaultMessage:"Slack login",id:"slackActions.loginPopupModal.title"},removeIntegrationMessage:{id:"slackIntegrationButton.removeIntegrationConfirmationDialog.prompt",defaultMessage:"Are you sure you want to remove Slack integration?"},removeIntegrationConfirmationLabel:{id:"slackIntegrationButton.removeIntegrationConfirmationDialog.removeButton.label",defaultMessage:"Remove"}});async function We(e){let{environment:t,blockId:a,intl:n}=e;Ve().FY(t),await async function(e){const{environment:t,blockId:a,intl:n}=e,o=(0,De().LX)(t);let i=(0,Re().Hs)(Me().A.domainBaseUrl,{blockId:a,authType:o,userId:t.currentUser.id});if(i=o.redirectToAuth?i:await(0,De().YN)(t,i),t.device.isElectron)return void Fe().openExternalUrl(i);const s=await ze().P(t,{width:530,height:530,url:i,titleMessage:qe.titleMessage});if(!s)return void Te().f1(n.formatMessage(qe.somethingWentWrong));const r=(0,Re().parseRoute)({url:s,isMobile:t.device.isMobile,baseUrl:Me().A.domainBaseUrl,publicDomainName:Me().A.publicDomainName,protocol:Me().A.protocol,currentUrl:window.location.href});"slackAuthCallback"===r.name&&Oe().KY({route:r,environment:t})}({environment:t,blockId:a,intl:n})}const Ke=(0,o().YK)({connectionLoadingLabel:{id:"topbar.connectionsSection.connectionLoading.label",defaultMessage:"Connections loading…"},connectionSearchPlaceholderLabel:{id:"topbar.connectionsSection.topbarMoreConnectionsSubMenu.label",defaultMessage:"Search for connections..."},connectionSearchErrorLabel:{id:"topbar.connectionsSection.connectionSearchError.label",defaultMessage:"Something went wrong"},connectionNoSearchResultsLabel:{id:"topbar.connectionsSection.noSearchResults.label",defaultMessage:"No results"},connectionSearchResultLabel:{id:"topbar.connectionsSection.connectionSearchResult.label",defaultMessage:"{name}"},slackEmptyLabel:{id:"topbar.connectionSection.slackEmpty.label",defaultMessage:"Slack"},slackConnectedLabel:{id:"topbar.connectionSection.slackConnected.label",defaultMessage:"Connected to Slack channel"},manageConnectionsLabel:{id:"topbar.connectionsSection.manageConnections.label",defaultMessage:"Manage connections"},connectionsLabel:{id:"topbar.connectionsSection.connections.label",defaultMessage:"Connections"},fromParentPageLabel:{id:"topbar.connectionsSection.fromParenPage.label",defaultMessage:"From"},capabilitiesLabel:{id:"topbar.connectionsSection.capabilities.label",defaultMessage:"Capabilities"},disconnectLabel:{id:"topbar.connectionSection.disconnectIntegration.label",defaultMessage:"Disconnect"},disconnectConfirmationLabel:{id:"topbar.connectionSection.disconnectIntegrationConfirmation.label",defaultMessage:"Remove {botName}"},restrictionLabel:{id:"topbar.connectionSection.restrictIntegration.label",defaultMessage:"Restrict"},restrictionConfirmationLabel:{id:"topbar.connectionSection.restrictIntegrationConfirmation.label",defaultMessage:"Are you sure you want to remove this permission and restrict access? This page will no longer share settings from the parent page."},restrictionAcceptLabel:{id:"topbar.connectionSection.restrictAccept.label",defaultMessage:"Restrict access"},connectionLabel:{id:"topbar.connectionSection.connectionIntegration.label",defaultMessage:"{connectionName}"},connectionBotConfirmLabel:{id:"topbar.connectionSection.connectBotConfirmation.label",defaultMessage:"Connect {botName} to this page"},connectionIntegrationConfirmlabel:{id:"topbar.connectionSection.connectIntegrationConfirmation.label",defaultMessage:"{integrationName} is developed by a third party partner and you will be redirected outside of Notion to authorize this connection. Continue?"},botCapabilitiesLabel:{id:"topbar.connectionSection.botCapabilities.label",defaultMessage:"Integration capabilities"},connectionBotConfirmDescription:{id:"topbar.connectionSection.connectionBotConfirmDescription.label",defaultMessage:"This integration will have the following access to this page and all its child pages"},disconnectConfirmationDescription:{id:"topbar.connectionSection.disconnectConfirmationDescription.label",defaultMessage:"This action will remove {botName} from the page. Do you want to continue?"}}),Ge=Le().AU6(Le().Uo6([Le().FrL,Le().AU6(Le().Uo6([Le().Km9,Le().p2L]))]));function Ye(){return{key:"connections loading",displayName:Pe().A.formatMessage(Ke.connectionLoadingLabel),analyticsName:Ke.connectionLoadingLabel.defaultMessage,searchName:Ke.connectionLoadingLabel.defaultMessage,closeParentMenu:!1,validators:[Le().sc7,Le().p2L,Ge],render:e=>(0,d.jsx)(W().Ay,{...e,icon:(0,d.jsx)(q().A,{}),title:Pe().A.formatMessage(Ke.connectionLoadingLabel)}),action:()=>{}}}function Xe(e,t,a){return{key:"search connections input",analyticsName:Ke.connectionSearchPlaceholderLabel.defaultMessage,displayName:Pe().A.formatMessage(Ke.connectionSearchPlaceholderLabel),searchName:Ke.connectionSearchPlaceholderLabel.defaultMessage,closeParentMenu:!1,validators:[Le().sc7,Le().p2L,Ge],render:()=>(0,d.jsx)(H().Ay,{value:e,onChange:e=>t(e.target.value),placeholder:Pe().A.formatMessage(Ke.connectionSearchPlaceholderLabel),focus:!0,...a}),action:()=>{}}}function Qe(){return{key:"connections search error",displayName:Pe().A.formatMessage(Ke.connectionSearchErrorLabel),analyticsName:Ke.connectionSearchErrorLabel.defaultMessage,searchName:Ke.connectionSearchErrorLabel.defaultMessage,closeParentMenu:!1,validators:[Le().sc7,Le().p2L,Ge],render:e=>(0,d.jsx)(K().A,{title:Pe().A.formatMessage(Ke.connectionSearchErrorLabel)}),action:()=>{}}}function Ze(e,t,a){const{id:n,name:i}=e,s=Pe().A.formatMessage(Ke.connectionSearchResultLabel,{name:i});return{key:`${n}`,displayName:s,analyticsName:s,searchName:i,closeParentMenu:!1,validators:[Le().sc7,Le().p2L,Ge],render:(t,a,n)=>(0,d.jsx)(F,{...t,bot:e,focused:t.focused,ref:t.ref}),action:async n=>{await async function(e,t,a,n,i){const s=[...(0,z().I2)((0,M().MD)(a.capabilities))],{accept:r}=await Te().Gh({icon:(0,g().p)(n.dialogIconStyle),message:(0,d.jsxs)(O().Y1,{gap:24,direction:"vertical",style:{marginBottom:16},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(j().D,{styleName:"UIHeading-17px/Semibold",children:(0,d.jsx)(o().sA,{...Ke.connectionBotConfirmLabel,values:{botName:a.name}})}),(0,d.jsx)(j().D,{styleName:"Body-14px/Regular",style:n.connectBotDescription,children:Pe().A.formatMessage(Ke.connectionBotConfirmDescription)})]}),(0,d.jsx)("div",{children:(0,d.jsxs)("div",{style:n.botCapabilitiesListContainer,children:[(0,d.jsx)(j().D,{styleName:"UISmall-12px/Medium",style:n.botCapabilitiesListTitle,children:Pe().A.formatMessage(Ke.botCapabilitiesLabel)}),(0,d.jsx)("div",{style:n.botCapabilitiesList,children:(0,d.jsx)(O().Y1,{gap:10,direction:"vertical",children:s})})]})})]}),acceptColor:"blue",mode:"wide"});r&&je().sK({botValue:a,store:e,environment:t});i&&i();return{accept:r}}(n.blocks[0],n.environment,e,t),a()}}}function $e(e,t){const{id:a,name:n,info:o}=e,i=Pe().A.formatMessage(Ke.connectionLabel,{connectionName:n});return{key:`${a}`,displayName:i,analyticsName:i,searchName:n,closeParentMenu:!1,validators:[Le().sc7,Le().p2L,Ge,Le().AU6(Le().FrL)],render:(e,t,a)=>(0,d.jsx)(B().A,{...e,title:i,icon:(0,d.jsx)("img",{src:o.icon,style:{width:18,height:"auto"},ref:e.ref})}),action:async t=>{e.id!==y().Jc&&await async function(e,t){const{id:a,name:n}=e,{accept:o}=await Te().Gh({message:Pe().A.formatMessage(Ke.connectionIntegrationConfirmlabel,{integrationName:n})}),i=function(e,t){if(!(0,p().uj)(e))return`${v().JZ.integrations}/${e}`;const a=b(e,void 0===t?"":t);return`${v().JZ.integrations}/${a}`}(a,n);o&&Ue().f({environment:t,url:i,targetSelf:!1})}(e,t.environment)}}}function Je(e){const t=Pe().A.formatMessage(Ke.slackEmptyLabel);return{key:"slack empty",displayName:t,analyticsName:Ke.slackEmptyLabel.defaultMessage,searchName:t,closeParentMenu:!1,validators:[Le().sc7,Le().p2L,Le().D4X,Le().LO$,Le().lG8,Le().AU6(Le().wHP)],render:(a,n,o)=>(0,d.jsx)(U().A,{placement:P().W.Left,render:n=>(0,d.jsx)(B().A,{...(0,S().A)(n,a),title:t,icon:(0,d.jsx)("img",{src:e.info.icon,style:{height:18}})}),renderTooltip:ee}),action:async e=>{var t;await We({environment:e.environment,blockId:null===(t=e.blocks)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.id,intl:Pe().A.getIntl()})}}}function et(){const e=Pe().A.formatMessage(Ke.slackConnectedLabel);return{key:"slack connected inherited",displayName:e,analyticsName:Ke.slackConnectedLabel.defaultMessage,searchName:e,closeParentMenu:!0,validators:[Le().sc7,Le().p2L,Le().geu,Le().AU6(Le().wHP)],render:(e,t,a)=>(0,d.jsx)(ae,{blockStore:t.blocks[0],...e}),action:()=>{}}}function tt(){const e=Pe().A.formatMessage(Ke.slackConnectedLabel);return{key:"slack connected on block",displayName:e,analyticsName:Ke.slackConnectedLabel.defaultMessage,searchName:e,closeParentMenu:!0,validators:[Le().sc7,Le().p2L,Le().qFS,Le().AU6(Le().wHP)],render:(e,t,a)=>(0,d.jsx)(ne,{blockStore:t.blocks[0],...e}),action:e=>{const{slackIntegrationStore:t}=(0,Z().x2)(e.blocks[0]);!function(e,t,a){Te().ui({message:a.formatMessage(qe.removeIntegrationMessage),showCancel:!0,keepFocus:!0,items:[{label:a.formatMessage(qe.removeIntegrationConfirmationLabel),color:"red",onAccept:()=>{Ve().oI(e),He().createAndCommit({userAction:"slackActions.handleRemoveSlackIntegration",environment:e,canUndo:!0,perform:e=>{Ee().zv({store:t,data:{enabled:!1},transaction:e})}})}}]})}(e.environment,t,Pe().A.getIntl())}}}function at(e){const t=Pe().A.formatMessage(Ke.fromParentPageLabel);return{key:"from parent page",displayName:t,analyticsName:t,searchName:t,closeParentMenu:!1,validators:[Le().sc7,Le().p2L],action:()=>{},render:(t,a)=>{let{blocks:n}=a;const o=n[0],i=I().Bv.createChildStore(o,{table:k().ev,id:e.blockId});return(0,d.jsx)(it,{parentBlockStore:i})}}}function nt(e,t){const a=Pe().A.formatMessage(Ke.disconnectLabel);return{key:"disconnect integration",displayName:a,analyticsName:a,searchName:Ke.disconnectLabel.defaultMessage,closeParentMenu:!1,validators:[Le().sc7,Le().p2L],action:async a=>{let{blocks:n,environment:o}=a;const i=n[0];await async function(e,t,a,n){const{accept:o}=await Te().Gh({message:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(j().D,{styleName:"UIHeading-17px/Semibold",children:Pe().A.formatMessage(Ke.disconnectConfirmationLabel,{botName:n})}),(0,d.jsx)(j().D,{styleName:"Body-14px/Regular",colorName:"secondary",style:{marginTop:8},children:Pe().A.formatMessage(Ke.disconnectConfirmationDescription,{botName:n})})]})});o&&je().oG({botId:a,store:e,environment:t})}(i,o,e,t)},render:e=>(0,d.jsx)(E().A,{...e,svg:u,title:a})}}function ot(e){const{botStore:t,botPermissionSourcePage:a}=e,{id:n}=t,o=t.getName(),i=Pe().A.formatMessage(Ke.connectionLabel,{connectionName:o});return{key:`${n}`,displayName:i,analyticsName:i,searchName:i,closeParentMenu:!1,validators:[Le().sc7,Le().p2L,Le().AU6(Le().oy3)],action:()=>{},render:(e,n,o)=>{const s=n.blocks[0].id===a.blockId;return(0,d.jsx)(ue,{...e,context:n,parent:o,isSharedDirectly:s,botStore:t,botPermissionSourcePage:a,originConnectionLabel:i})}}}function it(e){const{parentBlockStore:t}=e,a=(0,s().K8)((()=>t.getIcon()),[t]),{isParentPageEmpty:c,iconRecordCategory:u}=(0,s().K8)((()=>({isParentPageEmpty:t.isEmptyPage(),iconRecordCategory:(0,G().Te)(t)})),[t]),m=(0,i().v3)(),g=(0,r().DP)(),[p,f]=(0,n.useState)("transparent"),v=m.device.isMobile?{fontSize:14,paddingLeft:4}:{fontSize:12,paddingLeft:4};return(0,d.jsx)(K().A,{...e,title:(0,d.jsxs)("span",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[(0,d.jsx)(o().sA,{id:"topbar.connectionSection.parentPage.label",defaultMessage:"From"}),(0,d.jsxs)("span",{style:{display:"flex",alignItems:"center",padding:2,borderRadius:2,marginLeft:2,cursor:"pointer",backgroundColor:p,color:g.text.primary,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},onClick:()=>{h().uK({environment:m,store:t,pageVisitSource:l().y8.LinkInPage})},onMouseEnter:()=>{f(g.selectLightGray[100])},onMouseLeave:()=>{f("transparent")},onMouseDown:()=>{f(g.selectLightGray[200])},onMouseUp:()=>{f(g.selectLightGray[100])},children:[(0,d.jsx)(G().B6,{disabled:!0,icon:a,isEmptyPage:c,size:12,style:{margin:"0px 2px"},iconRecordCategory:u}),(0,d.jsx)(Y().A,{store:t})]})]}),textWrapperStyle:v})}function st(e){return"legacy_integration"===e.table&&e.value.id===y().Gk.id}a(823215);var rt=()=>a(68263),lt=()=>a(310001),ct=()=>a(731320);function dt(e){const t=function(e){var t;const a=e.blocks[0],n=(0,ct().i0)(a).filter((e=>(0,rt().P3)(e.permissionItem)?(e.permissionItem,!0):(e.permissionItem,!1)));if(0===n.length)return{status:"no bots"};const o=new Map,i=null===(t=x().default.state.currentSpaceStore)||void 0===t?void 0:t.id,s=n.map((e=>{let{from:t,permissionItem:n}=e;const s=I().sk.createChildStore(a,{table:ve().GP,id:n.bot_id,spaceId:i});if("block"===t.table)return o.set(n.bot_id,t),s})).filter(be().O9);if(!s.every((e=>e.isReady())))return{status:"loading"};const r=s.filter((t=>t.isDefined()&&Boolean((0,ke().VT)(e.environment,t.getModel()))));if((0,he().s7)(e.environment)){const e=r.map((e=>e.getIntegrationId())),t=new Set(e),a=s.filter((e=>!(!e.isDefined()||t.has(e.getIntegrationId())||!Boolean((0,ke().b0)(e.getModel()))||(t.add(e.getIntegrationId()),0))));r.push(...a)}return{status:"ready",botStores:r,botIdToSharedPageIds:o}}(e),{alreadyConnectedBotIds:a,alreadyConnectedIntegrationIds:n,botActionsState:o}=function(e){const{status:t}=e;if("no bots"===t||"loading"===t)return{botActionsState:e,alreadyConnectedIntegrationIds:new Set,alreadyConnectedBotIds:new Set};const{botStores:a,botIdToSharedPageIds:n}=e,o=(0,lt().R7)(a),i=new Set,s=new Array;for(const r of a.filter(be().O9)){const e=n.get(r.id);if(!e)continue;const t=ot({botStore:r,botPermissionSourcePage:e});s.push(t);const a=r.getIntegrationId();a&&o.has(a)||i.add(r.id)}return{alreadyConnectedIntegrationIds:o,alreadyConnectedBotIds:i,botActionsState:{status:"ready",botActions:s}}}(t),i=function(e,t,a){const n=Ke.connectionsLabel,o=Pe().A.formatMessage(n),i="ready"===(null==a?void 0:a.status)?a.botActions:[];return{key:"add connections action",displayName:o,analyticsName:n.defaultMessage,searchName:n.defaultMessage,closeParentMenu:!1,validators:[Le().sc7,Le().p2L,Ge,Le().AU6(Le().oy3),Le().AU6(Le().qsB)],action:()=>{},render:(a,n,s)=>(0,d.jsx)(Se,{...a,context:n,parent:s,alreadyConnectedIntegrationIds:e,alreadyConnectedBotIds:t,originButtonLabel:o,connectedActionsToShow:i})}}(n,a,o);return"loading"===o.status?{loadingAction:[Ye()],connectedActions:[],searchSubMenu:i}:{loadingAction:[],connectedActions:[],searchSubMenu:i}}const ut=(0,o().YK)({copyPublicApiObject:{id:"action.copyPublicApiObject",defaultMessage:"Copy API object (Dev)"}}),mt=(0,a(416726).Ls)({key:"copy public API object",displayName:ut.copyPublicApiObject,analyticsName:ut.copyPublicApiObject.defaultMessage,validators:[Le().vXb,Le().SQN("public_api_dev_mode")],closeParentMenu:!1,svg:a(536583).d,action:async e=>{let{environment:t,blocks:n}=e;const o=await a(449506).callApi({eventName:"getPublicApiObject",environment:t,data:{id:n[0].id}});let i;i="success"===o.type?JSON.stringify(o.data,void 0,2):JSON.stringify(o.error,void 0,2);const s=await a(884107).R.clipboardActions.load();s.copyString({environment:t,stringValue:i,copiedMessage:s.clipboardMessages.copiedApiObjectToClipboard})}});function gt(e){const{loadingAction:t,connectedActions:a,searchSubMenu:n}=dt(e);return{key:"topbar connections",render:e=>(0,d.jsx)(ce().A,{...e,style:{marginTop:1},topBorder:!0}),actions:[...t,...[et(),tt()],...a,n,mt]}}},124524:(e,t,a)=>{a.d(t,{I:()=>d});var n=a(296540),o=()=>a(484714),i=()=>a(401497),s=()=>a(340498),r=a(474848);const l="M19 6V4C19 2.34315 17.6569 1 16 1V1C14.3431 1 13 2.34315 13 4V8",c="M7 7.5V5.5C7 3.84315 8.34315 2.5 10 2.5V2.5C11.6569 2.5 13 3.84315 13 5.5V7.5";function d(e){let{isLocked:t,color:a="primary",size:d="default",style:u}=e;const{isMobile:m}=(0,o().Y0)(),g="number"==typeof d?d:m?s().lD[d]:s().Ev[d],p=(0,n.useRef)(!0),[f,v]=(0,n.useState)(""),b=(0,i().IS)((e=>({icon:{width:g,height:g,stroke:"inherit"===a?"inherit":e.icon[a],...u,fill:"none"}})),[a,g,u]);return(0,n.useEffect)((()=>{p.current?p.current=!1:v(t?"unlocked-to-locked":"locked-to-unlocked")}),[t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("style",{children:`\n\t\t\t\t.unlocked-to-locked {\n\t\t\t\t\tanimation-duration: 0.75s;\n\t\t\t\t\tanimation-name: unlocked-to-locked;\n\t\t\t\t\tanimation-fill-mode: forwards;\n\t\t\t\t}\n\n\t\t\t\t.locked-to-unlocked {\n\t\t\t\t\tanimation-duration: 0.75s;\n\t\t\t\t\tanimation-name: locked-to-unlocked;\n\t\t\t\t\tanimation-fill-mode: forwards;\n\t\t\t\t}\n\n\t\t\t\t@keyframes unlocked-to-locked {\n\t\t\t\t\t0% {\n\t\t\t\t\t\td: path("${l}");\n\t\t\t\t\t\ttransition-timing-function: cubic-bezier(0.11, 0, 0.5, 0);\n\t\t\t\t\t}\n\t\t\t\t\t50% {\n\t\t\t\t\t\td: path("M7 6V4C7 2.34315 8.34315 1 10 1V1C11.6569 1 13 2.34315 13 4V8");\n\t\t\t\t\t\ttransition-timing-function: linear;\n\t\t\t\t\t}\n\t\t\t\t\t100% {\n\t\t\t\t\t\td: path("${c}");\n\t\t\t\t\t\ttransition-timing-function: cubic-bezier(0.34, 1.56, 0.64, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t@keyframes locked-to-unlocked {\n\t\t\t\t\t0% {\n\t\t\t\t\t\td: path("${c}");\n\t\t\t\t\t\ttransition-timing-function: cubic-bezier(0.36, 0, 0.66, -0.56);\n\t\t\t\t\t}\n\t\t\t\t\t50% {\n\t\t\t\t\t\td: path("M7 6V4C7 2.34315 8.34315 1 10 1V1C11.6569 1 13 2.34315 13 4V8");\n\t\t\t\t\t\ttransition-timing-function: linear;\n\t\t\t\t\t}\n\t\t\t\t\t100% {\n\t\t\t\t\t\td: path("${l}");\n\t\t\t\t\t\ttransition-timing-function: cubic-bezier(0.5, 1, 0.89, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t`}),(0,r.jsxs)("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:b.icon,children:[(0,r.jsx)("rect",{x:"4.5",y:"8",width:"11",height:"9",rx:"2",strokeWidth:"1.25"}),(0,r.jsx)("circle",{cx:"10",cy:"11.5",r:"0.5",strokeWidth:"1.25"}),(0,r.jsx)("path",{d:"M10 14V11.5",strokeWidth:"1.25",strokeLinecap:"round"}),(0,r.jsx)("path",{className:f,d:t?c:l,strokeWidth:"1.25",strokeLinecap:"round"})]})]})}},163580:(e,t,a)=>{a.d(t,{VT:()=>r,b0:()=>l,gz:()=>c});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520),a(581454);var n=()=>a(799288),o=()=>a(332393),i=()=>a(765957),s=()=>a(630116);function r(e,t){const a=t.getAlive(),o=(0,n().hu)(t),i=!l(t),s=l(t),r=Boolean(e.currentUser.id===t.getParentId());return a&&o&&(s&&r||i)}function l(e){if(!e.getAlive||!(0,n().hu)(e))return!1;const{currentUserRootStore:t}=i().default.state,a=e.getIntegrationId();if(!t||!a)return!1;const r=(0,s().Oo)(t,{id:a,table:o().Li}).getKeyStore("type").getValue();return!e.isInternalBot(r?{type:r}:void 0)}function c(e){const{externalIntegrationStoreState:t,integrationId:a}=e;if(!t.loaded)return;const o=t.externalAuthentications.map((e=>{let{parent_id:t}=e;return t})),i=new Set(o),s=t.bots.filter((e=>e.alive&&i.has(e.id)&&(0,n().Sd)(e)&&e.integration_id===a));return s.length?s[0]:void 0}},192421:(e,t,a)=>{a.d(t,{F:()=>d});a(296540);var n=()=>a(484714),o=()=>a(433847),i=()=>a(959013),s=()=>a(583690),r=()=>a(678553),l=()=>a(554509),c=a(474848);function d(e){const{role:t}=e,a=(0,i().tz)(),{device:d}=(0,n().v3)(),u=(0,s().I2)(t);return(0,c.jsx)(r().Ay,{...e,title:(0,c.jsx)(l().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:a.formatMessage((0,o().sK)(t,void 0).label)}),shouldWrapCaption:!0,style:d.isMobile?{padding:"12px 4px"}:{padding:4,marginTop:2,marginBottom:2},captionStyle:{marginTop:4},caption:(0,c.jsx)("div",{children:u})})}},200582:(e,t,a)=>{a.d(t,{m:()=>o});a(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"4.62 1.77 10.75 15.98",svg:(0,a(474848).jsx)("path",{d:"M11.633 1.812c.263.096.43.354.41.632l-.392 5.51h3.099a.625.625 0 0 1 .506.992l-6.18 8.54a.625.625 0 0 1-1.13-.412l.402-5.5H5.25a.625.625 0 0 1-.507-.99l6.17-8.55a.625.625 0 0 1 .72-.222m-5.161 8.513H9.02a.625.625 0 0 1 .623.67l-.29 3.976 4.173-5.766H10.98a.625.625 0 0 1-.623-.67l.284-3.987z"})},o=(0,a(340498).wt)("lightning",n)},212727:(e,t,a)=>{a.r(t),a.d(t,{gearIcon:()=>i,iconDefinition:()=>o});a(296540);var n=a(474848);const o={viewBox:"0 0 20 20",fittedViewBox:"2.19 2.19 15.58 15.6",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.29 10c0 1.5 1.22 2.71 2.71 2.71 1.5 0 2.71-1.21 2.71-2.71S11.5 7.29 10 7.29 7.29 8.5 7.29 10m1.25 0c0-.81.66-1.46 1.46-1.46.81 0 1.46.65 1.46 1.46s-.65 1.46-1.46 1.46-1.46-.65-1.46-1.46"}),(0,n.jsx)("path",{d:"M8.49 17.64q.75.15 1.53.15v-.01c.47 0 .94-.04 1.41-.13.26-.05.46-.25.5-.51l.26-1.53.15-.06 1.28.91c.21.14.49.14.71 0 .41-.28.8-.61 1.18-.98.33-.33.63-.7.9-1.09.15-.21.15-.5 0-.71l-.9-1.27.06-.15 1.55-.27c.26-.05.46-.25.51-.5a7.8 7.8 0 0 0 .02-2.94.62.62 0 0 0-.51-.5l-1.53-.26-.06-.15.91-1.28c.14-.21.14-.49 0-.71a7.9 7.9 0 0 0-2.07-2.08.62.62 0 0 0-.71 0l-1.27.9-.15-.06-.27-1.55a.64.64 0 0 0-.5-.51c-.5-.1-1-.15-1.53-.15-.47 0-.95.04-1.41.13-.26.05-.46.25-.5.51l-.26 1.53-.15.06-1.28-.91a.65.65 0 0 0-.71 0 7.9 7.9 0 0 0-2.08 2.07c-.15.21-.15.5 0 .71l.9 1.27-.06.15-1.55.27c-.26.05-.46.25-.51.5-.1.5-.15 1-.15 1.53 0 .47.04.95.13 1.41.05.26.25.46.51.5l1.53.26.06.15-.91 1.28c-.14.21-.15.49 0 .71.29.42.61.81.98 1.18.34.34.7.65 1.09.91.21.15.5.15.71 0l1.27-.9.15.06.27 1.55c.05.26.25.46.5.51m2.29-1.15c-.53.07-1.09.07-1.63 0l-.25-1.47a.62.62 0 0 0-.42-.49 6 6 0 0 1-.68-.28.63.63 0 0 0-.65.04l-1.2.85a6.8 6.8 0 0 1-1.14-1.16l.86-1.21c.13-.19.15-.43.05-.64-.11-.22-.21-.45-.28-.68a.62.62 0 0 0-.49-.43l-1.45-.25a6.7 6.7 0 0 1 0-1.63l1.47-.25c.23-.04.42-.2.49-.42.07-.23.17-.46.28-.68.11-.21.09-.46-.04-.65l-.85-1.2A6.8 6.8 0 0 1 6.01 4.8l1.21.86c.19.13.43.15.64.05.22-.11.45-.21.68-.28s.39-.26.43-.49l.25-1.45c.53-.07 1.09-.07 1.63 0l.25 1.47c.04.23.2.42.42.49.23.07.46.17.68.28.21.11.46.09.65-.04l1.2-.85A6.8 6.8 0 0 1 15.19 6l-.86 1.21c-.13.19-.15.43-.05.64.11.22.21.45.28.68s.26.39.49.43l1.45.25a6.7 6.7 0 0 1 0 1.63l-1.47.25c-.23.04-.42.2-.49.42-.07.23-.17.46-.28.68-.11.21-.09.46.04.65l.85 1.2a6.8 6.8 0 0 1-1.16 1.14l-1.21-.86a.64.64 0 0 0-.64-.05c-.22.11-.45.21-.68.28s-.39.26-.43.49z"})]})},i=(0,a(340498).wt)("gear",o)},250202:(e,t,a)=>{a.d(t,{G:()=>r,e:()=>s});var n=a(296540),o=()=>a(401497),i=a(474848);let s=function(e){return e[e.Name=0]="Name",e}({});const r=n.forwardRef((function(e,t){const{propertySchema:n,format:r}=e,{name:l,type:c,icon:d}=n,u=(0,a(963589).X)("nds_default_property_noticon"),{isMobile:m}=(0,a(484714).Y0)(),g=(0,o().IS)((e=>({propertyIcon:{fill:e.icon.primary,marginLeft:6,marginRight:2}})),[]),p=(0,o().DP)(),f=r===s.Name?l:a(852353).dC[c];return(0,i.jsx)(a(760217).A,{title:f,icon:(0,i.jsx)(a(743176).zB,{icon:d,type:c,size:m?18:16,theme:p,style:g.propertyIcon,isDefaultNoticonEnabled:u}),...e})}))},300985:(e,t,a)=>{a.d(t,{Z:()=>o});a(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.49 2.37 15.01 15.25",svg:(0,a(474848).jsx)("path",{d:"M7.154 3.625h1.23a.625.625 0 1 0 0-1.25h-1.23A2.625 2.625 0 0 0 4.529 5v2.069c0 .9-.508 1.722-1.313 2.124l-.317.159a.725.725 0 0 0 0 1.297l.317.158a2.38 2.38 0 0 1 1.313 2.124V15a2.625 2.625 0 0 0 2.625 2.625h1.23a.625.625 0 1 0 0-1.25h-1.23c-.76 0-1.375-.616-1.375-1.375v-2.069c0-1.17-.564-2.256-1.492-2.931a3.63 3.63 0 0 0 1.492-2.931V5c0-.76.615-1.375 1.375-1.375m5.692 12.75h-1.23a.625.625 0 1 0 0 1.25h1.23A2.625 2.625 0 0 0 15.471 15v-2.069c0-.9.508-1.722 1.313-2.124l.317-.159a.725.725 0 0 0 0-1.296l-.317-.159a2.38 2.38 0 0 1-1.313-2.124V5a2.625 2.625 0 0 0-2.625-2.625h-1.23a.625.625 0 1 0 0 1.25h1.23c.76 0 1.375.616 1.375 1.375v2.069c0 1.17.564 2.256 1.492 2.931a3.63 3.63 0 0 0-1.492 2.931V15c0 .76-.615 1.375-1.375 1.375"})},o=(0,a(340498).wt)("curlyBraces",n)},354406:(e,t,a)=>{a.d(t,{LQ:()=>c});a(296540);var n=()=>a(495262),o=()=>a(878377),i=()=>a(416726),s=a(474848);const r=(0,i().Ls)({key:"mobile undo",displayName:i().AY.undoName,analyticsName:i().AY.undoName.defaultMessage,svg:a(454503).arrowUTurnUpLeftIcon,validators:[o().M3g,o().FrL,o().BBM,o().AU6(o().ctY),o().AU6(o().Pnk)],closeParentMenu:!0,track:{actionName:"undo"},action:(e,t,a)=>{let{environment:o}=t;return n().tN({environment:o,callback:e})}}),l=(0,i().Ls)({key:"mobile redo",displayName:i().AY.redoName,analyticsName:i().AY.redoName.defaultMessage,svg:a(638616).W,validators:[o().FrL,o().fHN,o().AU6(o().ctY),o().AU6(o().Pnk)],closeParentMenu:!0,track:{actionName:"redo"},action:(e,t,a)=>{let{environment:o}=t;return n().ZS({environment:o,callback:e})}}),c=(0,i().gy)({key:"mobile revision actions",render:e=>(0,s.jsx)(a(89924).A,{...e}),actions:[r,l]})},412975:(e,t,a)=>{a.d(t,{R:()=>o});a(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.12 4.12 14.76 12.16",directional:!0,svg:(0,a(474848).jsx)("path",{d:"M15.63 4.75a.625.625 0 1 1 1.25 0v5a2.125 2.125 0 0 1-2.125 2.125H4.264l3.333 3.333a.625.625 0 0 1-.884.884l-4.4-4.4a.625.625 0 0 1 0-.884l4.4-4.4a.625.625 0 0 1 .884.884l-3.333 3.333h10.49a.875.875 0 0 0 .876-.875z"})},o=(0,a(340498).wt)("arrowTurnDownLeft",n)},487494:(e,t,a)=>{a.d(t,{A:()=>o});var n=function(e){return e[e.Preview=0]="Preview",e[e.Mention=1]="Mention",e[e.Link=2]="Link",e}(n||{});const o=n},519143:(e,t,a)=>{a.d(t,{D:()=>o});a(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"0.12 2.37 19.76 15.25",svg:(0,a(474848).jsx)("path",{d:"m3.625 11.151 1.187-1.187a.625.625 0 1 1 .884.884l-2.254 2.254a.625.625 0 0 1-.884 0L.304 10.848a.625.625 0 0 1 .884-.884l1.187 1.187V10a7.625 7.625 0 0 1 12.813-5.587.625.625 0 1 1-.85.915A6.375 6.375 0 0 0 3.625 10zm14-2.302 1.187 1.187a.625.625 0 1 0 .884-.884l-2.254-2.254a.625.625 0 0 0-.884 0l-2.254 2.254a.625.625 0 1 0 .884.884l1.187-1.187V10a6.375 6.375 0 0 1-10.713 4.672.625.625 0 0 0-.85.915A7.625 7.625 0 0 0 17.625 10z"})},o=(0,a(340498).wt)("arrowCircleLoop",n)},583690:(e,t,a)=>{a.d(t,{AC:()=>m,I2:()=>d,YC:()=>u});a(296540);var n=()=>a(401497),o=()=>a(212050),i=()=>a(413267),s=()=>a(959013),r=()=>a(554509),l=a(474848);function c(e){const{enabled:t,labelIfEnabled:a,labelIfDisabled:s}=e,c=(0,n().IS)((e=>({container:{color:t?e.text.secondary:e.text.tertiary,display:"flex",alignItems:"center",gap:5},iconStyles:{width:12,display:"inline",verticalAlign:"middle",color:t?e.icon.uiBluePrimary:e.text.tertiary}})),[t]);return(0,l.jsxs)("div",{style:c.container,children:[t?(0,i().b)(c.iconStyles):(0,o().u)(c.iconStyles),(0,l.jsx)(r().D,{styleName:"UISmall-12px/Regular",children:t?a:s})]})}function d(e){const t="none"!==e;return[(0,l.jsx)(c,{enabled:t&&e.read_content,labelIfEnabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.mixedAccess.readContent.enabled",defaultMessage:"Can read content"}),labelIfDisabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.mixedaccess.readContent.disabled",defaultMessage:"Cannot read content"})},"read_content"),(0,l.jsx)(c,{enabled:t&&e.insert_content,labelIfEnabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.mixedaccess.insertContent.enabled",defaultMessage:"Can insert content"}),labelIfDisabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.mixedaccess.insertContent.disabled",defaultMessage:"Cannot insert content."})},"insert_content"),(0,l.jsx)(c,{enabled:t&&e.update_content,labelIfEnabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.mixedaccess.updateContent.enabled",defaultMessage:"Can update content"}),labelIfDisabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.mixedaccess.updateContent.disabled",defaultMessage:"Cannot update content"})},"update_content"),(0,l.jsx)(c,{enabled:t&&e.insert_comment,labelIfEnabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.insertComment.enabled",defaultMessage:"Can comment"}),labelIfDisabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.insertComment.disabled",defaultMessage:"Cannot comment"})},"insert_comment"),(0,l.jsx)(c,{enabled:t&&e.read_comment,labelIfEnabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.readComment.enabled",defaultMessage:"Can read comments"}),labelIfDisabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.readComment.disabled",defaultMessage:"Cannot read comments"})},"read_comment")]}function u(e){return[(0,l.jsx)(c,{enabled:e.read_user_without_email,labelIfEnabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.userAccess.readUsers.enabled",defaultMessage:"Can view users"}),labelIfDisabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.userAccess.readUsers.disabled",defaultMessage:"Cannot view users"})},"read_user_without_email"),(0,l.jsx)(c,{enabled:e.read_user_with_email,labelIfEnabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.enabled",defaultMessage:"Can view user email addresses"}),labelIfDisabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.disabled",defaultMessage:"Cannot view user email addresses"})},"read_user_with_email")]}function m(e){return[(0,l.jsx)(c,{enabled:e.link_preview,labelIfEnabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.linkPreview.enabled",defaultMessage:"Can preview links."}),labelIfDisabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.linkPreview.disabled",defaultMessage:"Cannot preview links."})},"link_preview"),(0,l.jsx)(c,{enabled:e.synced_database,labelIfEnabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.syncedDatabase.enabled",defaultMessage:"Can sync databases."}),labelIfDisabled:(0,l.jsx)(s().sA,{id:"capabilitiesTooltip.syncedDatabase.disabled",defaultMessage:"Cannot sync databases."})},"synced_database")]}},609316:(e,t,a)=>{a.d(t,{V:()=>n});const n=(0,a(583835).Dv)("importFile")},613850:(e,t,a)=>{a.d(t,{G:()=>o});a(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"4.62 2.37 10.76 15.26",svg:(0,a(474848).jsx)("path",{d:"M4.665 17.22a.625.625 0 0 0 .805.365 7.96 7.96 0 0 0 4.528-4.353 7.94 7.94 0 0 0 4.532 4.353.625.625 0 0 0 .44-1.17 6.69 6.69 0 0 1-4.345-6.268V4.509l2.683 2.683a.625.625 0 0 0 .884-.884l-3.75-3.75a.625.625 0 0 0-.884 0l-3.75 3.75a.625.625 0 1 0 .884.884l2.683-2.683v5.625a6.71 6.71 0 0 1-4.345 6.281.625.625 0 0 0-.365.805"})},o=(0,a(340498).wt)("arrowMergeUp",n)},655923:(e,t,a)=>{a.d(t,{v:()=>o});a(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 2.37 12.06 15.26",svg:(0,a(474848).jsx)("path",{d:"M10.625 3a.625.625 0 1 0-1.25 0v12.491l-4.333-4.333a.625.625 0 1 0-.884.884l5.4 5.4a.62.62 0 0 0 .884 0l5.4-5.4a.625.625 0 0 0-.884-.884l-4.333 4.333z"})},o=(0,a(340498).wt)("arrowStraightDown",n)},727722:(e,t,a)=>{a.d(t,{T:()=>h});var n=()=>a(857639),o=()=>a(416504),i=()=>a(161479),s=()=>a(609316),r=()=>a(559926),l=()=>a(745800),c=()=>a(901389),d=()=>a(357625),u=()=>a(496414),m=()=>a(892632),g=()=>a(2220),p=()=>a(73848),f=()=>a(972435),v=()=>a(129522),b=()=>a(217429),y=()=>a(522094),M=()=>a(799832);const k=(0,a(959013).YK)({importingCSV:{id:"databaseViewActions.importingCSV.loadingMessage",defaultMessage:"Importing"},uploadingCSV:{id:"databaseViewActions.uploadingCSV.loadingMessage",defaultMessage:"Uploading"},importFailed:{id:"databaseViewActions.importFailedError.message",defaultMessage:"Import failed."}});function h(e){const{store:t,environment:a,from:h}=e,A=(0,M().U)(t),S=null==A?void 0:A.collectionViewBlockStore(),C=null==A?void 0:A.collectionViewStore(),w=null==C?void 0:C.getCollectionStore();if((0,p().v)()){const e=y().A.getOrCreateFlowId();return r().fJ(a,{import_source:"csv",from:h,import_type:"file",flowId:e,userId:a.currentUser.id,spaceId:t.getSpaceId()}),void l().Z({importType:"merge",spaceId:t.getSpaceId(),importLocation:null==w?void 0:w.id,parentId:t.id,parentTable:"block",collectionViewBlockStore:S,analyticsFrom:h})}let x;const I={},N=performance.now();m().Bz({environment:a,accept:".csv",bucket:"temporary",spaceId:t.getSpaceId(),onStart:e=>{x=e,u().m({message:k.uploadingCSV})},onCompleteWithToken:e=>{r().eH(a,{from:h,import_source:"csv"}),I.uploadTimeTaken=performance.now()-N,I.firstTimeNavigateToCollection=I.uploadTimeTaken,(async(e,n,r)=>{if(u().m({message:k.importingCSV}),!w)return;if(!v().K.findCollectionViewBlockFromStore(t))return;const l=(0,o().P)(),m=d().UT(a,s().V,{importType:"MergeIntoCollection",fileURL:e,fileName:n,collection:{id:w.id,spaceId:(0,i().e)(w.pointer.spaceId)},spaceId:(0,i().e)(w.pointer.spaceId),userTimeZone:l,signedToken:r},{spaceIds:[w.getSpaceId()]}),g=b().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"});let p=!1;for await(const t of m){if(t.error)throw c().f1(f().A.formatMessage(k.importFailed)),u().V(),t.error;!p&&g&&"status"in t.value&&"updated_collection"===t.value.status.message&&(p=!0,u().V())}u().V()})(e[0].fileUrl,x[0].name,e[0].signedToken),I.overallTimeTaken=performance.now()-N;for(const[t,n]of Object.entries(I))(0,g().u)({environment:a,event:{eventName:"import_file_finished",eventProperties:{importUploadType:"csv",importType:"MergeIntoCollection",importLatency:n,importSource:"file",importLatencyType:t,importFileCount:1}}});n().log({level:"info",from:"mergeWithCSV",type:"mergeWithCSVFinished",data:{miscDataToConvertToString:{data:{uploadType:"csv",importType:"MergeIntoCollection",importLatencies:I,importSource:"file",fileNames:[x[0].name]}}}})},onError:e=>{u().V(),c().f1(f().A.formatMessage(k.importFailed))}})}},751109:(e,t,a)=>{a.d(t,{z:()=>o});a(296540);var n=a(474848);const o=(0,a(340498).wt)("slackLogo",{viewBox:"0 0 16 16",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M1.68078 11.7915C2.60586 11.7915 3.36156 11.0358 3.36156 10.1107V8.42993H1.68078C0.755701 8.42993 0 9.18563 0 10.1107C0 11.0358 0.755701 11.7915 1.68078 11.7915Z",fill:"#E01E5A"}),(0,n.jsx)("path",{d:"M5.88928 8.42993C4.9642 8.42993 4.2085 9.18563 4.2085 10.1107V14.3192C4.2085 15.2443 4.9642 16 5.88928 16C6.81436 16 7.57006 15.2443 7.57006 14.3192V10.1107C7.57006 9.18563 6.81436 8.42993 5.88928 8.42993Z",fill:"#E01E5A"}),(0,n.jsx)("path",{d:"M4.2085 1.68078C4.2085 2.60586 4.9642 3.36156 5.88928 3.36156H7.57006V1.68078C7.57006 0.755701 6.81436 0 5.88928 0C4.9642 0 4.2085 0.755701 4.2085 1.68078Z",fill:"#36C5F0"}),(0,n.jsx)("path",{d:"M7.57003 5.88928C7.57003 4.9642 6.81433 4.2085 5.88925 4.2085H1.68078C0.755701 4.2085 0 4.9642 0 5.88928C0 6.81436 0.755701 7.57006 1.68078 7.57006H5.88925C6.81433 7.57006 7.57003 6.81436 7.57003 5.88928Z",fill:"#36C5F0"}),(0,n.jsx)("path",{d:"M10.1107 7.57003C11.0358 7.57003 11.7915 6.81433 11.7915 5.88925V1.68078C11.7915 0.755701 11.0358 0 10.1107 0C9.18563 0 8.42993 0.755701 8.42993 1.68078V5.88925C8.42993 6.81433 9.18563 7.57003 10.1107 7.57003Z",fill:"#2EB67D"}),(0,n.jsx)("path",{d:"M14.3192 4.2085C13.3941 4.2085 12.6384 4.9642 12.6384 5.88928V7.57006H14.3192C15.2443 7.57006 16 6.81436 16 5.88928C16 4.9642 15.2443 4.2085 14.3192 4.2085Z",fill:"#2EB67D"}),(0,n.jsx)("path",{d:"M8.42993 10.1107C8.42993 11.0358 9.18563 11.7915 10.1107 11.7915H14.3192C15.2443 11.7915 16 11.0358 16 10.1107C16 9.18563 15.2443 8.42993 14.3192 8.42993H10.1107C9.18563 8.42993 8.42993 9.18563 8.42993 10.1107Z",fill:"#ECB22E"}),(0,n.jsx)("path",{d:"M11.7915 14.3192C11.7915 13.3941 11.0358 12.6384 10.1107 12.6384H8.42993V14.3192C8.42993 15.2443 9.18563 16 10.1107 16C11.0358 16 11.7915 15.2443 11.7915 14.3192Z",fill:"#ECB22E"})]})})},795168:(e,t,a)=>{a.d(t,{Xv:()=>ut,_J:()=>st,qQ:()=>it,JS:()=>ia,SH:()=>fa,bH:()=>va,tA:()=>je,O5:()=>Be,qI:()=>De,fg:()=>Ze,Fh:()=>$e,cy:()=>Je,TD:()=>Qe,wy:()=>ct,Zk:()=>lt,oq:()=>nt,b2:()=>Ue});a(18107),a(967357),a(898992),a(823215),a(354520),a(430670),a(803949),a(581454),a(737550),a(296540);var n=()=>a(700500),o=()=>a(651124),i=()=>a(857639),s=()=>a(340498),r=a(474848);const l={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.87 15.25 14.25",svg:(0,r.jsx)("path",{d:"M3 2.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zM5.125 7.5c0-1.174.951-2.125 2.125-2.125h5.5c1.174 0 2.125.951 2.125 2.125v5a2.125 2.125 0 0 1-2.125 2.125h-5.5A2.125 2.125 0 0 1 5.125 12.5zm2.125-.875a.875.875 0 0 0-.875.875v5c0 .483.392.875.875.875h5.5a.875.875 0 0 0 .875-.875v-5a.875.875 0 0 0-.875-.875zM2.375 16.5c0-.345.28-.625.625-.625h14a.625.625 0 1 1 0 1.25H3a.625.625 0 0 1-.625-.625"})},c=(0,s().wt)("alignCenter",l),d={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.87 15.25 14.25",directional:!0,svg:(0,r.jsx)("path",{d:"M3 2.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zM2.375 7.5c0-1.174.951-2.125 2.125-2.125H10c1.174 0 2.125.951 2.125 2.125v5A2.125 2.125 0 0 1 10 14.625H4.5A2.125 2.125 0 0 1 2.375 12.5zM4.5 6.625a.875.875 0 0 0-.875.875v5c0 .483.392.875.875.875H10a.875.875 0 0 0 .875-.875v-5A.875.875 0 0 0 10 6.625zM2.375 16.5c0-.345.28-.625.625-.625h14a.625.625 0 1 1 0 1.25H3a.625.625 0 0 1-.625-.625"})},u=(0,s().wt)("alignLeft",d),m={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.87 15.25 14.25",directional:!0,svg:(0,r.jsx)("path",{d:"M3 2.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zM7.875 7.5c0-1.174.951-2.125 2.125-2.125h5.5c1.174 0 2.125.951 2.125 2.125v5a2.125 2.125 0 0 1-2.125 2.125H10A2.125 2.125 0 0 1 7.875 12.5zM10 6.625a.875.875 0 0 0-.875.875v5c0 .483.392.875.875.875h5.5a.875.875 0 0 0 .875-.875v-5a.875.875 0 0 0-.875-.875zM2.375 16.5c0-.345.28-.625.625-.625h14a.625.625 0 1 1 0 1.25H3a.625.625 0 0 1-.625-.625"})},g=(0,s().wt)("alignRight",m);var p=()=>a(519143),f=()=>a(955363),v=()=>a(3284);const b={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.25",directional:!0,svg:(0,r.jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 1 0-15.25 7.625 7.625 0 0 1 0 15.25m-1.046-4.769 3.834-2.236a.718.718 0 0 0 0-1.24L8.954 7.144a.718.718 0 0 0-1.079.62v4.472c0 .554.6.9 1.08.62"})},y=(0,s().wt)("arrowTriangleRightCircleFill",b);var M=()=>a(202017);const k={viewBox:"0 0 20 20",fittedViewBox:"1.37 1.37 17.25 17.25",svg:(0,r.jsx)("path",{d:"M5.625 2a.625.625 0 1 0-1.25 0v2.375H2a.625.625 0 1 0 0 1.25h2.375V13.5c0 1.174.951 2.125 2.125 2.125h7.875V18a.625.625 0 1 0 1.25 0v-2.375H18a.625.625 0 1 0 0-1.25h-2.375V6.5A2.125 2.125 0 0 0 13.5 4.375H5.625zm0 3.625H13.5c.483 0 .875.392.875.875v7.875H6.5a.875.875 0 0 1-.875-.875z"})},h=(0,s().wt)("crop",k);var A=()=>a(424139),S=()=>a(742852),C=()=>a(90907);const w={viewBox:"0 0 20 20",fittedViewBox:"2.4 2.39 15.2 15.86",svg:(0,r.jsx)("path",{d:"m4.897 3.085-.122-.142a.625.625 0 0 0-.95.814l3.18 3.71h-3.98a.625.625 0 0 0-.367 1.13L6.6 11.462l-1.506 4.636a.625.625 0 0 0 .962.699L10 13.932l3.943 2.865a.625.625 0 0 0 .903-.183l1.215 1.418a.625.625 0 1 0 .95-.814l-.495-.576a.6.6 0 0 1-.127-.113l-11.4-13.3a.6.6 0 0 1-.093-.144m.051 5.632h3.129l5.018 5.853.027.085-2.755-2.001a.625.625 0 0 0-.734 0l-2.755 2 1.052-3.237a.625.625 0 0 0-.227-.7zm8.633 2.613 3.762-2.733a.625.625 0 0 0-.367-1.13H12.1L10.594 2.83a.625.625 0 0 0-1.188 0L8.55 5.463l.953 1.112L10 5.046l1.052 3.239a.625.625 0 0 0 .595.432h3.404l-2.287 1.662z"})},x=(0,s().wt)("starSlash",w),I=(0,s().wt)("timeBy",{viewBox:"0 0 30 30",svg:(0,r.jsx)("path",{d:"M14 25H16V15H14C13.919 15.164 13.209 15.698 12 15.909V17.94C12.743 17.85 13.416 17.652 14 17.388V25ZM25 4C25 2.343 23.657 1 22 1C20.343 1 19 2.343 19 4H11C11 2.343 9.657 1 8 1C6.343 1 5 2.343 5 4H1V29H29V4H25ZM21 4C21 3.449 21.448 3 22 3C22.552 3 23 3.449 23 4V6C23 6.551 22.552 7 22 7C21.448 7 21 6.551 21 6V4ZM7 4C7 3.449 7.448 3 8 3C8.552 3 9 3.449 9 4V6C9 6.551 8.552 7 8 7C7.448 7 7 6.551 7 6V4ZM27 27H3V13H27V27ZM27 11H3V6H5C5 7.657 6.343 9 8 9C9.657 9 11 7.657 11 6H19C19 7.657 20.343 9 22 9C23.657 9 25 7.657 25 6H27V11Z"})});var N=()=>a(763884),_=()=>a(919709),L=()=>a(959013),P=()=>a(496603),j=()=>a(522986),T=()=>a(899038),B=()=>a(675074),U=()=>a(896628),R=()=>a(383594),D=()=>a(246826),V=()=>a(778417),F=()=>a(751156),z=()=>a(633457),E=()=>a(799832),O=()=>a(89924),H=()=>a(250202),q=()=>a(94985),W=()=>a(375078),K=()=>a(878377),G=()=>a(943846),Y=()=>a(972435),X=()=>a(792609),Q=()=>a(765957),Z=()=>a(640653),$=()=>a(381895);function J(e){const t=(0,$().k)(e),a=Q().default.state.currentSpaceStore,n=(0,Z().IL)(a);return!(!t||n)&&t}var ee=()=>a(486666),te=()=>a(165162),ae=()=>a(869562),ne=()=>a(919878),oe=()=>a(372121),ie=()=>a(178687),se=()=>a(227440),re=()=>a(522200),le=()=>a(443616),ce=()=>a(63759),de=()=>a(316221),ue=()=>a(599364),me=()=>a(254452),ge=()=>a(797583),pe=()=>a(654056),fe=()=>a(416726),ve=()=>a(566908),be=()=>a(288502),ye=()=>a(354406),Me=()=>a(137743),ke=()=>a(909437),he=()=>a(22913),Ae=()=>a(363019),Se=()=>a(978278),Ce=()=>a(843005);const we="block menu navigation",xe=(0,L().YK)({fixLegacyTransclusion:{id:"action.fixLegacyTransclusion.name",defaultMessage:"Fix legacy transclusion"},insertBelowName:{id:"action.insertBelow.name",defaultMessage:"Insert below"},simpleTableFitToPageWidth:{id:"action.fitToPageWidth.title",defaultMessage:"Fit to page width"},startPresentationName:{id:"action.startPresentation.name",defaultMessage:"Start presentation"},copyDirectLinkName:{id:"action.copyDirectLink.name",defaultMessage:"Copy link to original"},openasPageName:{id:"action.openasPage.name",defaultMessage:"Open as page"},copyLinksName:{id:"action.copyLinks.name",defaultMessage:"Copy links to all"},viewOriginalName:{id:"action.viewOriginal.name",defaultMessage:"View original"},openInBrowserName:{id:"action.openInBrowser.name",defaultMessage:"Open in browser"},downloadName:{id:"action.download.name",defaultMessage:"Download"},replaceName:{id:"action.replace.name",defaultMessage:"Replace"},turnSimpleTableIntoCollection:{id:"action.turnIntoCollection.title",defaultMessage:"Turn into database"},viewAsSpreadsheetPrototype:{id:"action.viewAsSpreadsheetPrototype.title",defaultMessage:"View as spreadsheet"},editPropertyName:{id:"action.editProperty.name",defaultMessage:"Edit property"},clearDateName:{id:"action.clearDate.name",defaultMessage:"Clear date"},turnintoInlineName:{id:"action.turnintoInline.name",defaultMessage:"Turn into inline database"},turnintoPageName:{id:"action.turnintoPage.name",defaultMessage:"Turn into database page"},turnintoPageName6dotRedesign:{id:"action.turnintoPage.name.6dotredesign",defaultMessage:"Turn into page"},turnCollectionIntoSimpleTable:{id:"action.turnintoSimpleTable.name",defaultMessage:"Turn into simple table"},mergewithCSVName:{id:"action.mergewithCSV.name",defaultMessage:"Merge with CSV"},mergewithCSVCaption:{id:"action.mergewithCSV.caption",defaultMessage:"Header row required"},openIn:{id:"action.openIn.name",defaultMessage:"Open in"},lockDatabaseName:{id:"action.lockDatabaseName.name",defaultMessage:"Lock database"},lockDatabaseViewsName:{id:"action.lockDatabaseViewsName.name",defaultMessage:"Lock views"},lockWikiName:{id:"action.lockWikiName.name",defaultMessage:"Lock wiki"},reloadPreview:{id:"action.reloadPreview",defaultMessage:"Reload preview"},unlockWikiName:{id:"action.unlockWikiName.name",defaultMessage:"Unlock wiki"},turnPreviewIntoMention:{id:"action.turnPreviewIntoMention",defaultMessage:"Turn into mention"},reloadSyncedPage:{id:"action.reloadSyncedPage",defaultMessage:"Sync page"},addtoFavoritesName:{id:"action.addtoFavorites.name",defaultMessage:"Add to Favorites"},removefromFavoritesName:{id:"action.removefromFavorites.name",defaultMessage:"Remove from Favorites"},editIconName:{id:"action.editIcon.name",defaultMessage:"Icon"},editIconName6dotRedesign:{id:"action.editIcon.name.6dotredesign",defaultMessage:"Edit icon"},addIcon:{id:"action.addIcon.name",defaultMessage:"Add icon"},wrapCodeKeywords:{id:"action.wrapCode.fuzzySearchKeywords",defaultMessage:"Wrap Code"},wrapCodeLabel:{id:"action.wrapCode.label",defaultMessage:"Wrap code"},languageModeName:{id:"action.languageMode.name",defaultMessage:"Set language"},languageModeName6dotRedesign:{id:"action.languageMode.name.6dotredesign",defaultMessage:"Language"},formatCodeLabel:{id:"action.formatCode.label",defaultMessage:"Format code"},openInBrowserLabel:{id:"action.openInBrowser.label",defaultMessage:"Open in browser"},workAtNotion:{id:"action.workAtNotion.name",defaultMessage:"Work at Notion"},quoteSizeSection:{id:"action.section.quoteSize",defaultMessage:"Quote size"},quoteSizeDefault:{id:"action.quoteSize.default",defaultMessage:"Default"},quoteSize:{id:"action.quoteSize.name",defaultMessage:"Quote size"},quoteSizeLarge:{id:"action.quoteSize.large",defaultMessage:"Large"},listFormatDefault:{id:"action.listFormat.letters.default",defaultMessage:"Default"},listFormatSection:{id:"action.listFormat.sectionName",defaultMessage:"List format"},listFormat:{id:"action.listFormat.name",defaultMessage:"List format"},listFormatNumbers:{id:"action.listFormat.numbers.name",defaultMessage:"Numbers"},listFormatLetters:{id:"action.listFormat.letters.name",defaultMessage:"Letters"},listFormatRoman:{id:"action.listFormat.letters.roman",defaultMessage:"Roman numerals"},listFormatDisc:{id:"action.listFormat.disc.name",defaultMessage:"Disc"},listFormatCircle:{id:"action.listFormat.circle.name",defaultMessage:"Circle"},listFormatSquare:{id:"action.listFormat.square.name",defaultMessage:"Square"},alignmentName:{id:"action.alignment.name",defaultMessage:"Align"},cropImage:{id:"action.cropImage",defaultMessage:"Crop image"},turnTableIntoDatabaseWarning:{id:"action.turnTableIntoDatabaseWarning",defaultMessage:"All suggestions in the table must be resolved before the table can be turned into a database."},linkToImportModal:{id:"action.linkToImportModal",defaultMessage:"Import data"}}),Ie=[K().ecY,K().AU6(K().xqI),K().AU6(K().p9k),K().or([K().Cuf,K().AU6(K().vEP)]),...fe().uo],Ne=(0,fe().Ls)({key:"fixLegacyTransclusion",displayName:xe.fixLegacyTransclusion,analyticsName:xe.fixLegacyTransclusion.defaultMessage,svg:p().D,validators:[K().VxA,K().vXb,...Ie],closeParentMenu:!0,action:async e=>{let{blocks:t,environment:n}=e;(await a(764061).l.legacyTransclusionActions.load()).fixLegacyTransclusion({environment:n,store:t[0]})}}),_e=(0,fe().uk)({key:"turn into section",displayName:fe().AY.turnIntoName,analyticsName:fe().AY.turnIntoName.defaultMessage,svg:v().arrowSquarePathUpDownIcon,validators:[K().p2L,K().AU6(K().vEP),K().pLL,X().Y,K().P5O],subActions:()=>[{key:0,title:void 0,render:e=>(0,r.jsx)(O().A,{...e}),actions:Ce().t3.actions}]}),Le=(0,fe().Ls)({key:"insert below",displayName:xe.insertBelowName,analyticsName:xe.insertBelowName.defaultMessage,svg:a(655923).v,validators:[K().p2L,K().AU6(K().vEP),K().AU6(K().pe1),K().ctY,K().FrL],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;F().createAndCommit({userAction:"actionRegistry.insertBelow",environment:n,canUndo:!0,perform:e=>{a(87017).insertTextBelow({environment:n,blocks:t,transaction:e})}})}}),Pe=(0,fe().Ls)({key:"start presentation",displayName:xe.startPresentationName,analyticsName:xe.startPresentationName.defaultMessage,validators:[K().vXb,K().Xjv(n().xd.slide)],closeParentMenu:!0,svg:y,action:e=>{let{blocks:t}=e;a(447934).V_({slideBlockStore:t[0]})}}),je=(0,fe().Ls)({key:"copy direct link to content housed within block",displayName:xe.copyDirectLinkName,analyticsName:xe.copyDirectLinkName.defaultMessage,svg:S().w,validators:[K().M3g,K().vXb,K().AU6(K().Rde),K().AU6(K().wHP),K().or([K().ISA,K().ka$,K().Xjv(n().xd.bookmark),K().Xjv(n().xd.externalObjectInstance),K().Xjv(n().xd.externalObjectInstancePage),K().IW,K().tpG]),K().AU6(K().IuJ)],closeParentMenu:!0,track:{actionName:"copy_original_link"},action:(e,t,a)=>{let{lazyDependencies:n,...o}=t;const{clipboardActions:s}=n;s?s.copyDirectLinkToContent({...o,event:a,callback:e}):i().log({data:{miscDataToConvertToString:{actionKey:"copy direct link to content housed within block"}},from:"blockActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),Te=(0,fe().Ls)({key:"open collection as page",displayName:xe.openasPageName,analyticsName:xe.openasPageName.defaultMessage,svg:a(47218).arrowExpandDiagonalBottomLeftToTopRightIcon,validators:[K().lOb,K().AU6(K().Cuf),K().AU6(K().hLE)],closeParentMenu:!0,action:e=>a(797265).mP(e)}),Be=(0,fe().Ls)({key:"copy links to blocks",displayName:xe.copyLinksName,analyticsName:xe.copyLinksName.defaultMessage,svg:S().w,validators:[K().M3g,K().FEq,K().AU6(K().oy3)],closeParentMenu:!0,track:{actionName:"copy_multiple_block_links"},action:(e,t,a)=>{let{lazyDependencies:n,...o}=t;const{clipboardActions:s}=n;s?s.copyLinksToBlocks({...o,callback:e}):i().log({data:{miscDataToConvertToString:{actionKey:"copy links to blocks"}},from:"blockActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),Ue=(0,fe().Ls)({key:"view original",displayName:xe.viewOriginalName,analyticsName:xe.viewOriginalName.defaultMessage,svg:f().arrowDiagonalUpRightIcon,validators:[K().AU6(K().b8R),K().vXb,K().or([K().ISA,K().ka$])],closeParentMenu:!0,track:{actionName:"view_original"},action:(e,t,a)=>{let{blocks:n,environment:o}=t;const i=n.at(0);i&&(0,G().hg)(i)&&B().oD(o,{store:i,from:"view_original",callback:e})},disabled:()=>!se().A.state.online,renderTooltip:()=>Y().A.formatMessage(fe().AY.unavailableOfflineTooltip),disableTooltip:()=>se().A.state.online}),Re=(0,fe().Ls)({key:"view in browser",displayName:xe.openInBrowserName,analyticsName:xe.openInBrowserName.defaultMessage,svg:f().arrowDiagonalUpRightIcon,validators:[K().b8R,K().vXb,K().or([K().ISA,K().ka$])],closeParentMenu:!0,track:{actionName:"view_original"},action:(e,t,a)=>{let{blocks:n,environment:o}=t;const i=n.at(0);i&&(0,G().hg)(i)&&B().oD(o,{store:i,from:"view_original",callback:e})},disabled:()=>!se().A.state.online,renderTooltip:()=>Y().A.formatMessage(fe().AY.unavailableOfflineTooltip),disableTooltip:()=>se().A.state.online}),De=(0,fe().Ls)({key:"download source",displayName:xe.downloadName,analyticsName:xe.downloadName.defaultMessage,svg:a(973238).arrowInCircleDownIcon,validators:[K().vXb,K().or([K().ka$,K().ISA]),K().or([K().bIL,K().Rde]),K().AU6(K().wHP)],closeParentMenu:!0,track:{actionName:"download"},action:(e,t,a)=>{let{blocks:n,environment:o}=t;const i=n[0];i&&(0,G().hg)(i)&&B().qI({environment:o,store:i,callback:e})},disabled:()=>!se().A.state.online,renderTooltip:()=>Y().A.formatMessage(fe().AY.unavailableOfflineTooltip),disableTooltip:()=>se().A.state.online}),Ve=(0,fe().Ls)({key:"replace source",displayName:xe.replaceName,analyticsName:xe.replaceName.defaultMessage,svg:p().D,validators:[K().p2L,K().AU6(K().vEP),K().vXb,K().or([K().ka$,K().ISA])],closeParentMenu:!0,action:e=>{let{blocks:t}=e;B().wA({store:t[0]})},disabled:()=>!se().A.state.online,renderTooltip:()=>Y().A.formatMessage(fe().AY.unavailableOfflineTooltip),disableTooltip:()=>se().A.state.online}),Fe=(0,fe().Ls)({key:"view as spreadsheet prototype",displayName:xe.viewAsSpreadsheetPrototype,analyticsName:xe.viewAsSpreadsheetPrototype.defaultMessage,svg:a(421559).T,validators:[()=>!1,K().SQN("spreadsheet_prototype"),K().p2L,K().AU6(K().wFE),K().zVC,X().Y,K().AU6(K().Y8P)],closeParentMenu:!0,action:e=>{let{blocks:t}=e;const a=t[0];re().A.setState({...re().A.getState(),[a.id]:!0})}}),ze=(0,fe().Ls)({key:"link to import modal",displayName:xe.linkToImportModal,analyticsName:xe.linkToImportModal.defaultMessage,svg:a(820579).f,validators:[K().p2L,K().AU6(K().wFE),K().zVC,K().HOV()],closeParentMenu:!0,action:e=>{let{environment:t}=e;a(209660).Ow({currentTab:"imports",openedFrom:"block_action_import"}),(0,a(160475).t)({environment:t,action:"click",from:"block_action_import"});const n=a(522094).A.getOrCreateFlowId();a(559926).kY(t,{from:"block_action_import",flowId:n})}}),Ee=(0,fe().Ls)({key:"fit to page width",displayName:xe.simpleTableFitToPageWidth,analyticsName:xe.simpleTableFitToPageWidth.defaultMessage,svg:a(665589).l,validators:[K().p2L,K().AU6(K().wFE),K().zVC,X().Y,K().AU6(K().Y8P),K().SQN("simple_table_menus")],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;return F().createAndCommit({userAction:"actionRegistry.fitSimpleTableToPageWidth",environment:n,canUndo:!0,perform:e=>{const n=t[0];let o=oe().c;try{const e=a(695625).T.findScrollToSelectableFromStore(n),t=null==e?void 0:e.getNode(),i=a(217429).default.checkGate({gateName:"content_reskin_v2"});if(t){const e=t.closest(".notion-page-content")||t.closest("[data-content-editable-root]")||t.parentElement;if(e){o=e.getBoundingClientRect().width,i||(o+=oe().zc)}}}catch(s){i().log({level:"error",from:"blockActionRegistry",type:"fitToPageWidth:parentWidthCalculationError",data:{miscDataToConvertToString:{error:s}}})}ne().uT({simpleTableStore:n,parentWidth:o,transaction:e})}})}}),Oe=(0,fe().Ls)({key:"turn into collection",displayName:xe.turnSimpleTableIntoCollection,analyticsName:xe.turnSimpleTableIntoCollection.defaultMessage,svg:v().arrowSquarePathUpDownIcon,validators:[K().p2L,K().AU6(K().wFE),K().zVC,X().Y,K().AU6(K().Y8P)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;return F().createAndCommit({userAction:"actionRegistry.turnSimpleTableIntoCollection",environment:n,canUndo:!0,perform:e=>{const o=t[0];o.getContentStores().flatMap((e=>{const t=Object.values(e.getProperties()).flat().filter(a(534177).O9);return(0,_().vSn)(t)})).length>0?a(901389).rG({message:(0,r.jsx)(L().sA,{...xe.turnTableIntoDatabaseWarning})}):(ne().cP({environment:n,simpleTableStore:o,transaction:e}),V().IU({environment:n}),ne().wr())}})}}),He=[K().p2L,K().AU6(K().ln6),K().$Mx,K().AU6(K().PfK),K().AU6(K().Kq2),function(e){return e.blocks.some((e=>e.getAssociatedCollectionStore()))}];function qe(e){const{property:t,propertySchema:n}=e,o=n.name,i=!se().A.state.online&&(0,a(334684).$)({propertyType:n.type,propertySchema:n,allowAIProperty:!0});return{key:`Edit Property ${o} ${t}`,displayName:o,analyticsName:"Edit property",searchName:o,validators:He,closeParentMenu:!0,action:e=>{let{blocks:o,originRect:i,environment:s}=e;"checkbox"===n.type?F().createAndCommit({userAction:"actionRegistry.createEditPropertyAction",environment:s,canUndo:!0,perform:e=>{j().qS({stores:o,property:t,transaction:e})}}):i&&j().ho({environment:s,store:o[0],additionalStores:o.slice(1),property:t,format:"page",rect:{...P().VP(i),width:200},preventClearSelection:!0,blockPropertyValueOverlayStore:a(186445).jQ(),collectionContextStore:(0,E().U)(o[0])})},render:e=>(0,r.jsx)(a(859428).A,{disableTooltip:!i,placement:a(962730).W.Right,renderTooltip:()=>(0,r.jsx)(L().sA,{id:"collectionAction.editProperty.offlineTooltip",defaultMessage:"Go online to edit property"}),render:t=>(0,r.jsx)(H().G,{...(0,a(553965).A)(t,e),propertySchema:n,format:H().e.Name,disabled:i,disabledFeedback:!0})})}}const We=(0,fe().uk)({key:"edit property",displayName:xe.editPropertyName,analyticsName:xe.editPropertyName.defaultMessage,svg:M().n,validators:He,subActions:e=>{let{blocks:t}=e;const n=t.at(0);if(!n)return[];const i=(0,E().U)(n),s=n.getAssociatedCollectionStore();if(!s)return[];const l=(null==i?void 0:i.normalizedSchemaStore.state)??s.getSchema(),c=s.getFormat(),d=(0,a(390066).L)(c,l,void 0,o().jf.Collection);if(!d.collection_page_properties)return[];d.collection_page_properties.unshift({property:"title"});return[{key:0,title:void 0,render:e=>(0,r.jsx)(O().A,{...e}),actions:P().oE(d.collection_page_properties.map((e=>{const n=l[e.property];if(n&&(0,a(852353).g2)({propertySchema:n,property:e.property,blockStores:t,collectionSchema:l,collectionStore:s,spaceStore:Q().default.state.currentSpaceStore}))return qe({property:e.property,propertySchema:n})})))}]}}),Ke=(0,fe().Ls)({key:"clear date",displayName:xe.clearDateName,analyticsName:xe.clearDateName.defaultMessage,svg:I,validators:[K().p2L,K().AU6(K().vEP),K().or([K().Bb5("timeline"),K().Bb5("calendar")])],closeParentMenu:!0,action:e=>{let{environment:t,blocks:n}=e;const o=(0,E().U)(n[0]);if(!o)return;const i=null==o?void 0:o.collectionViewStore();if(!i)return;const s=o.normalizedSchemaStore.state;F().createAndCommit({userAction:"actionRegistry.clearDate",environment:t,canUndo:!0,perform:e=>{a(717989).MQ({stores:n,collectionViewStore:i,schema:s,transaction:e})}})}}),Ge=(0,fe().Ls)({key:"view collection view inline",displayName:xe.turnintoInlineName,analyticsName:xe.turnintoInlineName.defaultMessage,svg:v().arrowSquarePathUpDownIcon,validators:[K().BAy,K().AU6(K().Cuf),K().Xmj,K().AU6(K().wFE),K().AU6(K().Afv),K().P5O],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;return F().createAndCommit({userAction:"actionRegistry.viewCollectionViewInline",environment:a,canUndo:!0,perform:e=>{W().transformBlocks({environment:a,blocks:t,blockType:"collection_view",transaction:e}),V().IU({environment:a})}})}}),Ye=(0,fe().Ls)({key:"view collection view as page",displayName:(0,te().localUserOnlyGateCheck)({gateName:"updated_6dot_menu"})?xe.turnintoPageName6dotRedesign:xe.turnintoPageName,analyticsName:xe.turnintoPageName.defaultMessage,svg:v().arrowSquarePathUpDownIcon,validators:[K().lOb,K().AU6(K().Cuf),K().Xmj,K().AU6(K().wFE),K().AU6(K().vEP),K().AU6(K().IW)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;return F().createAndCommit({userAction:"actionRegistry.turnCollectionViewIntoCollectionViewPage",environment:a,canUndo:!0,perform:e=>{W().transformBlocks({environment:a,blocks:t,blockType:"collection_view_page",transaction:e})}})}}),Xe=(0,fe().Ls)({key:"turn into simple table",displayName:xe.turnCollectionIntoSimpleTable,analyticsName:xe.turnCollectionIntoSimpleTable.defaultMessage,svg:v().arrowSquarePathUpDownIcon,validators:[K().lOb,K().Efw("table"),K().SDU,K().AU6(K().Cuf),K().Xmj,K().AU6(K().wFE),K().ed0,K().P_F,K().AU6(K().IW)],closeParentMenu:!0,action:async e=>{let{blocks:t,environment:n}=e;const o=t[0],s=o.useCrdt(),r=await a(980914).Bp({environment:n,collectionViewBlockStore:o});if(r.some((e=>e.useCrdt()!==s)))return a(436572).D6({label:s?"Cannot turn database with non-CRDT pages into simple table on CRDT page":"Cannot turn database with CRDT pages into simple table on non-CRDT page"}),void i().log({level:"info",from:"blockActionRegistry",type:"crdt:turnCollectionIntoSimpleTableUseCrdtMismatch",data:{miscDataToConvertToString:{collectionViewBlockUseCrdt:s}}});F().createAndCommit({userAction:"actionRegistry.turnCollectionIntoSimpleTable",environment:n,canUndo:!0,perform:e=>{ne().GD({environment:n,collectionViewBlockStore:o,pageStores:r,transaction:e}),V().IU({environment:n}),ne().wr()}})}}),Qe=(0,fe().Ls)({key:"merge with csv",displayName:xe.mergewithCSVName,analyticsName:xe.mergewithCSVName.defaultMessage,validators:[K().Kq2,K().Xmj,K().sc7,K().IRu,K().AU6(K().vEP),K().AU6(K().BUc),K().AU6(K().Qp$),K().AU6(K().IW),K().AU6(K().oy3)],closeParentMenu:!0,render:e=>(0,r.jsx)(a(575143).A,{...e,svg:a(613850).G,title:(0,r.jsx)(L().sA,{...xe.mergewithCSVName}),tooltipText:(0,r.jsx)(L().sA,{...xe.mergewithCSVCaption})}),action:e=>{let{blocks:[t],environment:n}=e;(0,a(727722).T)({environment:n,store:t,from:"topbar_more_menu"})}}),Ze=(0,fe().fi)({key:"database lock",displayName:xe.lockDatabaseName,label:Y().A.formatMessage(xe.lockDatabaseName),getSvgIcon:e=>{let{isChecked:t}=e;return e=>(0,r.jsx)(a(124524).I,{isLocked:t,style:e})},isChecked:e=>e.isLockedForAllUsers(),validators:[K().Kq2,K().an_,K().AU6(K().Afv),K().Xmj,K().AU6(K().oy3)],action:(e,t,a)=>D().zv({store:t.getFormatStore(),data:{block_locked:!t.isLockedForAllUsers(),block_locked_by:e.currentUser.id},transaction:a}),afterAction:()=>null}),$e=(0,fe().fi)({key:"database views lock",displayName:xe.lockDatabaseViewsName,label:Y().A.formatMessage(xe.lockDatabaseViewsName),getSvgIcon:()=>C().h,isChecked:e=>e.isLockedForAllUsers(),validators:[K().Kq2,K().AU6(K().an_),K().Xmj,K().AU6(K().oy3)],action:(e,t,a)=>D().zv({store:t.getFormatStore(),data:{block_locked:!t.isLockedForAllUsers(),block_locked_by:e.currentUser.id},transaction:a}),afterAction:()=>null}),Je=(0,fe().fi)({key:"wiki lock",displayName:xe.lockWikiName,label:Y().A.formatMessage(xe.lockWikiName),getSvgIcon:()=>C().h,isChecked:e=>e.isLockedForAllUsers(),validators:[K().Kq2,K().an_,K().Afv,K().Xmj,K().AU6(K().oy3)],action:(e,t,a)=>D().zv({store:t.getFormatStore(),data:{block_locked:!t.isLockedForAllUsers(),block_locked_by:e.currentUser.id},transaction:a}),afterAction:()=>null}),et=(0,fe().Ls)({key:"wiki unlock",displayName:xe.unlockWikiName,analyticsName:xe.unlockWikiName.defaultMessage,svg:a(701751).p,validators:[K().Kq2,K().an_,K().Afv,K().Xmj,K().ln6],closeParentMenu:!1,action:e=>{let{blocks:t,environment:n}=e;const o=t[0];a(222299).X6({environment:n,store:o,lock:!1})}});function tt(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[K().p2L,K().AU6(K().vEP),K().AU6(K().PaP),K().vXb,e?K().or([K().bLC("external_object_instance"),K().tpG]):K().bLC("external_object_instance"),K().AU6(K().SoP)]}const at=(0,fe().Ls)({key:"reload link preview",displayName:xe.reloadPreview,analyticsName:xe.reloadPreview.defaultMessage,svg:p().D,validators:tt(!1),closeParentMenu:!0,action:e=>{let{environment:t,blocks:a}=e;if(0===a.length)return;const n=a[0];n.isExternalObjectInstanceBlockStore()&&z().lf({environment:t,from:"page_more_menu",store:n,spaceId:n.getSpaceId()})},disabled:()=>!se().A.state.online,renderTooltip:()=>Y().A.formatMessage(fe().AY.unavailableOfflineTooltip),disableTooltip:()=>se().A.state.online}),nt=(0,fe().Ls)({key:"turn preview into mention",displayName:xe.turnPreviewIntoMention,analyticsName:xe.turnPreviewIntoMention.defaultMessage,svg:v().arrowSquarePathUpDownIcon,validators:tt(!0),closeParentMenu:!0,action:e=>{let{environment:t,blocks:n}=e;0!==n.length&&F().createAndCommit({userAction:"actionRegistry.turnPreviewIntoMention",environment:t,canUndo:!0,perform:e=>{n[0].isType("alias")?a(813743).O8({blockStore:n[0],transaction:e}):z().PO({environment:t,block:n[0],transaction:e})}})}});function ot(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,fe().Ls)({key:"add to favorites",displayName:xe.addtoFavoritesName,analyticsName:xe.addtoFavoritesName.defaultMessage,svg:a(877788).w,validators:[...e,K().M3g,K()._fc,K().vXb,K().AU6(K().WWi),K().AU6(K().Pnk),K().AU6(K().mDl),K().or([K().oRh,K().AU6(K().qsB)]),K().AU6(K().Uo6([J,K().AU6(K().qsB)]))],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;const{currentSpaceViewStore:n}=Q().default.state;if(n){const e=t[0];F().createAndCommit({userAction:"actionRegistry.addToFavorites",environment:a,canUndo:!0,perform:t=>{ae().bookmarkPage({spaceViewStore:n,store:e,transaction:t})}})}}})}const it=ot([K().FrL]),st=ot();function rt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,fe().Ls)({key:"remove from favorites",displayName:xe.removefromFavoritesName,analyticsName:xe.removefromFavoritesName.defaultMessage,svg:x,validators:[...e,K().WWi,K().vXb],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;const{currentSpaceViewStore:n}=Q().default.state;n&&F().createAndCommit({userAction:"actionRegistry.removeFromFavorites",environment:a,canUndo:!0,perform:e=>{ae().unbookmarkPage({spaceViewStore:n,store:t[0],transaction:e})}})}})}const lt=rt([K().FrL]),ct=rt(),dt=(0,fe().Ls)({key:"reload synced page",displayName:xe.reloadSyncedPage,analyticsName:xe.reloadSyncedPage.defaultMessage,svg:p().D,validators:[K().p2L,K().AU6(K().vEP),K().AU6(K().PaP),K().vXb,K().bLC("external_object_instance_page")],closeParentMenu:!0,action:e=>{let{environment:t,blocks:a}=e;if(0===a.length)return;const n=a[0];n.isExternalObjectInstancePageBlockStore()&&z().lf({environment:t,from:"page_more_menu",store:n,spaceId:n.getSpaceId(),bypassCache:!0})},disabled:()=>!se().A.state.online,renderTooltip:()=>Y().A.formatMessage(fe().AY.unavailableOfflineTooltip),disableTooltip:()=>se().A.state.online}),ut=(0,fe().Ls)({key:"add page icon",displayName:xe.addIcon,svg:A().emojiFaceIcon,analyticsName:xe.addIcon.defaultMessage,validators:[K().p2L,K().AU6(K().vEP),K().AU6(K().oy3),K().or([K().ZCq,K().Kq2]),K().V40],closeParentMenu:!0,track:{actionName:"init_edit_icon"},action:(e,t,a)=>{gt(e,t,a)}}),mt=(0,fe().Ls)({key:"edit icon",displayName:(0,te().localUserOnlyGateCheck)({gateName:"updated_6dot_menu"})?xe.editIconName6dotRedesign:xe.editIconName,analyticsName:xe.editIconName.defaultMessage,svg:A().emojiFaceIcon,validators:[K().p2L,K().AU6(K().vEP),K().or([K().ZCq,K().Kq2,K().Uo6([K().ibx,K().h1w])])],closeParentMenu:!0,track:{actionName:"init_edit_icon"},action:(e,t,a)=>{gt(e,t,a)}});function gt(e,t,n){const{environment:i,originRect:s}=t;let l=t.blocks;if(K().ibx(t)&&K().h1w(t)){const e=l[0].getParentStore();e instanceof a(630116).Bv&&(l=[e])}const c=e=>{var t;return e.isType("button")?null===(t=e.getAutomationStore())||void 0===t?void 0:t.getIconStore():e.getIconStore()},d=(e,t)=>{var n;l.forEach((t=>{(0,a(675925).o)(i,{action:"edit_icon",block_type:t.getType(),from:"block_more_menu"},(a=>{const n=c(t);n&&(F().createAndCommit({userAction:"actionRegistry.editIcon",environment:i,canUndo:!0,perform:t=>{D().KY({store:n,value:e,transaction:t})}}),a())}))})),"url"!==(null===(n=(0,o().WO)(e))||void 0===n?void 0:n.type)&&l.some((e=>e.isType("callout")))&&N().K.set({userId:i.currentUser.id,key:a(492696).c,value:e??""}),t&&t.keepVisible||R().I()},u=l.some((e=>{var t;return e.isType("button")?null===(t=c(e))||void 0===t?void 0:t.getValue():Boolean(e.getIcon())})),m=l.every((e=>e.isType("callout"))),g=[{type:"emoji",title:(0,r.jsx)(L().sA,{defaultMessage:"Emoji",id:"recordIcon.emojiTab.title"}),onChange:d},{type:"icon",title:(0,r.jsx)("div",{style:{display:"flex",gap:4},children:(0,r.jsx)(L().sA,{defaultMessage:"Icons",id:"recordIcon.iconTab.title"})}),onChange:d}];R().W(i,{recordIconLoggingData:{source:"bulk_block_selection"},originGap:4,originRect:s,popupWidth:ee().jv,popupHeight:ee().GF,isSmallWidth:!1,title:Y().A.getIntl().formatMessage({defaultMessage:"Page icon",id:"recordIcon.emojiModalMenu.title"}),onDelete:u?()=>{l.forEach((e=>{const t=c(e);t&&F().createAndCommit({userAction:"actionRegistry.editIcon",environment:i,canUndo:!0,perform:e=>{D().KY({store:t,value:void 0,transaction:e})}})})),R().I()}:void 0,currentTab:"emoji",isCallout:m,tabs:g,disableClearSelection:!0}),e()}const pt=(0,fe().fi)({key:"code wrap",displayName:xe.wrapCodeKeywords,label:Y().A.formatMessage(xe.wrapCodeLabel),isChecked:e=>Boolean(e.getFormat().code_wrap),getSvgIcon:()=>(0,te().localUserOnlyGateCheck)({gateName:"updated_6dot_menu"})?a(412975).R:void 0,validators:[K().vXb,K().Xjv("code")],track:{actionName:"set_text_wrap"},action:(e,t,a)=>U().zA({stores:[t],update:{code_wrap:!t.getFormat().code_wrap},transaction:a}),afterAction:(e,t)=>{N().K.set({userId:t.currentUser.id,key:ie().j.localCodeWrapPreferenceKey,value:e})}}),ft=(0,L().YK)({ABAP:{id:"action.languageMode.abap",defaultMessage:"ABAP"},Agda:{id:"action.languageMode.agda",defaultMessage:"Agda"},Arduino:{id:"action.languageMode.arduino",defaultMessage:"Arduino"},"ASCII Art":{id:"action.languageMode.asciiart",defaultMessage:"ASCII Art"},Assembly:{id:"action.languageMode.nasm",defaultMessage:"Assembly"},Bash:{id:"action.languageMode.bash",defaultMessage:"Bash"},BASIC:{id:"action.languageMode.basic",defaultMessage:"Basic"},BNF:{id:"action.languageMode.bnf",defaultMessage:"BNF"},C:{id:"action.languageMode.c",defaultMessage:"C"},"C#":{id:"action.languageMode.csharp",defaultMessage:"C#"},"C++":{id:"action.languageMode.cplusplus",defaultMessage:"C++"},Clojure:{id:"action.languageMode.clojure",defaultMessage:"Clojure"},CoffeeScript:{id:"action.languageMode.coffeescript",defaultMessage:"CoffeeScript"},Coq:{id:"action.languageMode.coq",defaultMessage:"Coq"},CSS:{id:"action.languageMode.css",defaultMessage:"CSS"},Dart:{id:"action.languageMode.dart",defaultMessage:"Dart"},Dhall:{id:"action.languageMode.dhall",defaultMessage:"Dhall"},Diff:{id:"action.languageMode.diff",defaultMessage:"Diff"},Docker:{id:"action.languageMode.docker",defaultMessage:"Docker"},EBNF:{id:"action.languageMode.ebnf",defaultMessage:"EBNF"},Elixir:{id:"action.languageMode.elixir",defaultMessage:"Elixir"},Elm:{id:"action.languageMode.elm",defaultMessage:"Elm"},Erlang:{id:"action.languageMode.erlang",defaultMessage:"Erlang"},"F#":{id:"action.languageMode.fsharp",defaultMessage:"F#"},Flow:{id:"action.languageMode.flow",defaultMessage:"Flow"},Fortran:{id:"action.languageMode.fortran",defaultMessage:"Fortran"},Gherkin:{id:"action.languageMode.gherkin",defaultMessage:"Gherkin"},GLSL:{id:"action.languageMode.glsl",defaultMessage:"GLSL"},Go:{id:"action.languageMode.go",defaultMessage:"Go"},GraphQL:{id:"action.languageMode.graphql",defaultMessage:"Graphql"},Groovy:{id:"action.languageMode.groovy",defaultMessage:"Groovy"},Haskell:{id:"action.languageMode.haskell",defaultMessage:"Haskell"},HCL:{id:"action.languageMode.hcl",defaultMessage:"HCL"},HTML:{id:"action.languageMode.html",defaultMessage:"HTML"},Idris:{id:"action.languageMode.idris",defaultMessage:"Idris"},Java:{id:"action.languageMode.java",defaultMessage:"Java"},JavaScript:{id:"action.languageMode.javascript",defaultMessage:"JavaScript"},JSON:{id:"action.languageMode.json",defaultMessage:"JSON"},Julia:{id:"action.languageMode.julia",defaultMessage:"Julia"},Kotlin:{id:"action.languageMode.kotlin",defaultMessage:"Kotlin"},LaTeX:{id:"action.languageMode.latex",defaultMessage:"LaTeX"},Less:{id:"action.languageMode.less",defaultMessage:"LESS"},Lisp:{id:"action.languageMode.lisp",defaultMessage:"Lisp"},LiveScript:{id:"action.languageMode.livescript",defaultMessage:"LiveScript"},"LLVM IR":{id:"action.languageMode.llvm",defaultMessage:"LLVM IR"},Lua:{id:"action.languageMode.lua",defaultMessage:"Lua"},Makefile:{id:"action.languageMode.makefile",defaultMessage:"Makefile"},Markdown:{id:"action.languageMode.markdown",defaultMessage:"Markdown"},Markup:{id:"action.languageMode.markup",defaultMessage:"Markup"},MATLAB:{id:"action.languageMode.matlab",defaultMessage:"MATLAB"},Mathematica:{id:"action.languageMode.mathematica",defaultMessage:"Mathematica"},Mermaid:{id:"action.languageMode.mermaid",defaultMessage:"Mermaid"},Nix:{id:"action.languageMode.nix",defaultMessage:"Nix"},"Notion Formula":{id:"action.languageMode.notionFormula",defaultMessage:"Notion Formula"},NotionScript:{id:"action.languageMode.notionScript",defaultMessage:"NotionScript"},"Objective-C":{id:"action.languageMode.objectiveC",defaultMessage:"Objective-C"},OCaml:{id:"action.languageMode.ocaml",defaultMessage:"OCaml"},Pascal:{id:"action.languageMode.pascal",defaultMessage:"Pascal"},Perl:{id:"action.languageMode.perl",defaultMessage:"Perl"},PHP:{id:"action.languageMode.php",defaultMessage:"PHP"},"Plain Text":{id:"action.languageMode.plaintext",defaultMessage:"Plain Text"},PowerShell:{id:"action.languageMode.powershell",defaultMessage:"Powershell"},Prolog:{id:"action.languageMode.prolog",defaultMessage:"Prolog"},Protobuf:{id:"action.languageMode.protobuf",defaultMessage:"Protobuf"},PureScript:{id:"action.languageMode.purescript",defaultMessage:"PureScript"},Python:{id:"action.languageMode.python",defaultMessage:"Python"},R:{id:"action.languageMode.r",defaultMessage:"R"},Racket:{id:"action.languageMode.racket",defaultMessage:"Racket"},Reason:{id:"action.languageMode.reason",defaultMessage:"Reason"},Ruby:{id:"action.languageMode.ruby",defaultMessage:"Ruby"},Rust:{id:"action.languageMode.rust",defaultMessage:"Rust"},Sass:{id:"action.languageMode.sass",defaultMessage:"Sass"},Scala:{id:"action.languageMode.scala",defaultMessage:"Scala"},Scheme:{id:"action.languageMode.scheme",defaultMessage:"Scheme"},Scss:{id:"action.languageMode.scss",defaultMessage:"SCSS"},Shell:{id:"action.languageMode.shell",defaultMessage:"Shell"},Smalltalk:{id:"action.languageMode.smalltalk",defaultMessage:"Smalltalk"},Solidity:{id:"action.languageMode.solidity",defaultMessage:"Solidity"},SQL:{id:"action.languageMode.sql",defaultMessage:"SQL"},Swift:{id:"action.languageMode.swift",defaultMessage:"Swift"},TOML:{id:"action.languageMode.toml",defaultMessage:"TOML"},TypeScript:{id:"action.languageMode.typescript",defaultMessage:"TypeScript"},"VB.Net":{id:"action.languageMode.vbdotnet",defaultMessage:"VB.Net"},Verilog:{id:"action.languageMode.verilog",defaultMessage:"Verilog"},VHDL:{id:"action.languageMode.vhdl",defaultMessage:"VHDL"},"Visual Basic":{id:"action.languageMode.visualbasic",defaultMessage:"Visual Basic"},WebAssembly:{id:"action.languageMode.webassembly",defaultMessage:"WebAssembly"},XML:{id:"action.languageMode.xml",defaultMessage:"XML"},YAML:{id:"action.languageMode.yaml",defaultMessage:"YAML"},"Java/C/C++/C#":{id:"action.languageMode.cstyle",defaultMessage:"Java/C/C++/C#"}}),vt=[K().p2L,K().AU6(K().vEP),K().ctY,K().bLC("code"),K().AU6(K().Cuf)],bt=(0,fe().gy)({key:"code block languageMode actions",title:(0,te().localUserOnlyGateCheck)({gateName:"updated_6dot_menu"})?xe.languageModeName6dotRedesign:xe.languageModeName,render:e=>(0,r.jsx)(O().A,{...e}),actions:a(15440).Dm.map((e=>(0,fe().Ls)({key:`set language ${e} action`,displayName:ft[e],analyticsName:`set language ${e}`,validators:vt,closeParentMenu:!0,track:{actionName:"set_language"},action:(t,a,n)=>{let{environment:o,blocks:i}=a;N().K.set({userId:o.currentUser.id,key:ie().j.localLanguagePreferenceKey,value:e});const{serverCommitResult:s}=F().createAndCommit({userAction:"actionRegistry.languageModeActions",environment:o,canUndo:!0,perform:t=>{T().IA({language:e,blocks:i,transaction:t})}});s.then(t)},render:t=>(0,r.jsx)(a(760217).A,{...t,title:e})})))}),yt=(0,fe().uk)({key:"languageMode section",displayName:xe.languageModeName,analyticsName:xe.languageModeName.defaultMessage,svg:(0,te().localUserOnlyGateCheck)({gateName:"updated_6dot_menu"})?a(300985).Z:void 0,validators:vt,subActions:()=>[bt]}),Mt=(0,fe().Ls)({key:"format code",displayName:xe.formatCodeLabel,closeParentMenu:!0,analyticsName:xe.formatCodeLabel.defaultMessage,svg:(0,te().localUserOnlyGateCheck)({gateName:"updated_6dot_menu"})?a(200582).m:void 0,validators:[K().vXb,K().Xjv("code"),K().Wfp],action:async e=>{let{blocks:t,environment:a}=e;const n=t[0];await T().aZ({codeBlockStore:n,environment:a})}}),kt=(0,fe().Ls)({key:"open html in browser",displayName:xe.openInBrowserLabel,closeParentMenu:!0,analyticsName:xe.openInBrowserLabel.defaultMessage,validators:[K().vXb,K().Xjv("code"),K().Ozi,K().d0C],action:e=>{let{blocks:t,environment:a}=e;const n=t[0].getTitleValue(),o=(0,_().q4_)(n),i=window.open();i&&i.document.write(o)}}),ht=(0,fe().Ls)({key:"work at notion",analyticsName:xe.workAtNotion.defaultMessage,closeParentMenu:!0,displayName:xe.workAtNotion,svg:(0,te().localUserOnlyGateCheck)({gateName:"updated_6dot_menu"})?a(481721).codeIcon:void 0,validators:[K().Xjv("code"),K().gII],action:()=>{window&&window.open(a(427704).JZ.careers)}}),At=[K().p2L,K().AU6(K().vEP),K().bLC("quote")];function St(e){return(t,a)=>{N().K.set({userId:a.environment.currentUser.id,key:ie().w.localSizePreferenceKey,value:e});const{serverCommitResult:n}=F().createAndCommit({userAction:"actionRegistry.createQuoteSizeAction",environment:a.environment,canUndo:!0,perform:t=>{U().zA({stores:a.blocks,update:{quote_size:e},transaction:t})}});n.then(t)}}const Ct=(0,fe().gy)({key:"quote size actions",title:xe.quoteSizeSection,render:e=>(0,r.jsx)(O().A,{...e}),actions:[(0,fe().Ls)({key:"quote size default",displayName:xe.quoteSizeDefault,analyticsName:xe.quoteSizeDefault.defaultMessage,validators:At,closeParentMenu:!0,track:{actionName:"set_size"},action:St(void 0)}),(0,fe().Ls)({key:"quote size large",displayName:xe.quoteSizeLarge,analyticsName:xe.quoteSizeLarge.defaultMessage,validators:At,closeParentMenu:!0,track:{actionName:"set_size"},action:St("large")})]}),wt=(0,fe().uk)({key:"quote size",displayName:xe.quoteSize,analyticsName:xe.quoteSize.defaultMessage,svg:a(37719).P,validators:At,subActions:()=>[Ct]}),xt=[K().p2L,K().AU6(K().vEP),K().bLC("numbered_list"),K().ctQ("numbered_list")],It=[K().p2L,K().AU6(K().vEP),K().bLC("bulleted_list"),K().ctQ("bulleted_list")],Nt=(0,fe().uk)({key:"number format",displayName:xe.listFormat,analyticsName:xe.listFormat.defaultMessage,svg:M().n,validators:xt,subActions:()=>[Lt]});function _t(e){return(t,a)=>{const{serverCommitResult:n}=F().createAndCommit({userAction:"actionRegistry.createListFormatAction",environment:a.environment,canUndo:!0,perform:t=>{U().zA({stores:a.blocks,update:{list_format:e},transaction:t})}});n.then(t)}}const Lt=(0,fe().gy)({key:"text color actions",title:xe.listFormatSection,render:e=>(0,r.jsx)(O().A,{...e}),actions:[(0,fe().Ls)({key:"list format default",displayName:xe.listFormatDefault,analyticsName:xe.listFormatDefault.defaultMessage,validators:xt,closeParentMenu:!0,track:{actionName:"set_list_format"},action:_t(void 0)}),(0,fe().Ls)({key:"list format numbers",displayName:xe.listFormatNumbers,analyticsName:xe.listFormatNumbers.defaultMessage,validators:xt,closeParentMenu:!0,track:{actionName:"set_list_format"},action:_t("numbers")}),(0,fe().Ls)({key:"list format letters",displayName:xe.listFormatLetters,analyticsName:xe.listFormatLetters.defaultMessage,validators:xt,closeParentMenu:!0,track:{actionName:"set_list_format"},action:_t("letters")}),(0,fe().Ls)({key:"list format roman numerals",displayName:xe.listFormatRoman,analyticsName:xe.listFormatRoman.defaultMessage,validators:xt,closeParentMenu:!0,track:{actionName:"set_list_format"},action:_t("roman")})]});function Pt(e){return(t,a)=>{const{serverCommitResult:n}=F().createAndCommit({userAction:"actionRegistry.createBulletListFormatAction",environment:a.environment,canUndo:!0,perform:t=>{U().zA({stores:a.blocks,update:{bullet_list_format:e},transaction:t})}});n.then(t)}}const jt=(0,fe().gy)({key:"bullet list format actions",title:xe.listFormatSection,render:e=>(0,r.jsx)(O().A,{...e}),actions:[(0,fe().Ls)({key:"list format default",displayName:xe.listFormatDefault,analyticsName:xe.listFormatDefault.defaultMessage,validators:It,closeParentMenu:!0,track:{actionName:"set_list_format"},action:Pt(void 0)}),(0,fe().Ls)({key:"list format disc",displayName:xe.listFormatDisc,analyticsName:xe.listFormatDisc.defaultMessage,validators:It,closeParentMenu:!0,track:{actionName:"set_list_format"},action:Pt("disc")}),(0,fe().Ls)({key:"list format circle",displayName:xe.listFormatCircle,analyticsName:xe.listFormatCircle.defaultMessage,validators:It,closeParentMenu:!0,track:{actionName:"set_list_format"},action:Pt("circle")}),(0,fe().Ls)({key:"list format square",displayName:xe.listFormatSquare,analyticsName:xe.listFormatSquare.defaultMessage,validators:It,closeParentMenu:!0,track:{actionName:"set_list_format"},action:Pt("square")})]}),Tt=(0,fe().uk)({key:"bulleted format",displayName:xe.listFormat,analyticsName:xe.listFormat.defaultMessage,svg:M().n,validators:It,subActions:()=>[jt]}),Bt=[K().M3g,K().p2L,K().AU6(K().vEP),K().Uo6([K().vXb,K().ISA,K().WoS])],Ut=(0,fe().uk)({key:"alignment",displayName:xe.alignmentName,analyticsName:xe.alignmentName.defaultMessage,svg:u,validators:Bt,subActions:()=>[Vt]});function Rt(e){return(t,a)=>{const{serverCommitResult:n}=F().createAndCommit({userAction:"actionRegistry.createAlignmentFormatAction",environment:a.environment,canUndo:!0,perform:t=>{if(a.blocks&&a.blocks.length>0)for(const n of a.blocks)U().TP({environment:a.environment,store:n,alignment:e,transaction:t})}});n.then(t)}}const Dt=(0,L().YK)({leftAlign:{id:"action.alignment.left.name",defaultMessage:"Left"},centerAlign:{id:"action.alignment.center.name",defaultMessage:"Center"},rightAlign:{id:"action.alignment.right.name",defaultMessage:"Right"}}),Vt=(0,fe().gy)({key:"alignment format actions",title:xe.alignmentName,render:e=>(0,r.jsx)(O().A,{...e}),actions:[(0,fe().Ls)({key:"alignment format left",displayName:Dt.leftAlign,analyticsName:"Align left",validators:Bt,closeParentMenu:!0,svg:u,track:{actionName:"set_alignment"},action:Rt("left")}),(0,fe().Ls)({key:"alignment format center",displayName:Dt.centerAlign,analyticsName:"Align center",validators:Bt,closeParentMenu:!0,svg:c,track:{actionName:"set_alignment"},action:Rt("center")}),(0,fe().Ls)({key:"alignment format right",displayName:Dt.rightAlign,analyticsName:"Align right",validators:Bt,closeParentMenu:!0,svg:g,track:{actionName:"set_alignment"},action:Rt("right")})]}),Ft=(0,fe().Ls)({key:"edit image",displayName:xe.cropImage,analyticsName:xe.cropImage.defaultMessage,svg:h,validators:[K().p2L,K().JZE,K().IRu,K().SQN("image_cropping"),K().AU6(K().vEP)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;const o=t[0],i=o.getOriginalImageSource();i&&(a(471266).A.openModal({blockStore:o,originalSource:i}),a(799750).h(n,{from:"blockmenu"}))},disabled:()=>!se().A.state.online,renderTooltip:()=>Y().A.formatMessage(fe().AY.unavailableOfflineTooltip),disableTooltip:()=>se().A.state.online}),zt={key:"block menu primary",render:e=>(0,r.jsx)(O().A,{...e}),shouldShowMoreOptions:!0,actions:[...[...[_e,Oe,Ee,Ge,Ye,Xe,nt,ue().LN],le().Rw,mt,Ne,Le],...[Ve,De,ce().pG,Ft,Ut,ve().N,ve().S,ce().R5,be().i,Ue],...[wt],...[Tt],...[Nt],...[st,Ze,he().U,Qe],...[pt,yt,Mt,ht,kt],...[Se().Zm,Se().Lc],...[at],...[Pe],...[Ce().c5],...[$e,Je,et,Re,ze,Fe,he().H,We,Ke,dt]]},Et={key:we,render:e=>(0,r.jsx)(O().A,{...e}),actions:[Te,...ke().YO]},Ot={key:"block menu manage",render:e=>(0,r.jsx)(O().A,{...e}),actions:[je,ue().ko,ue().oc,Be,pe().As,pe().nK,Me().t,me().z,q().$]},Ht={key:"block menu comment",render:e=>(0,r.jsx)(O().A,{...e}),actions:[ce().Im,(0,Ae().F)("block_action_menu"),de().KV,ge().qp]},qt={key:"block menu primary",render:e=>(0,r.jsx)(O().A,{...e}),actions:[de().KV,me().z,pe().As,pe().nK,Ne,_e,Le,q().$]},Wt={key:we,render:e=>(0,r.jsx)(O().A,{...e}),actions:[je,Te,...ke().YO,ue().ko,ue().oc,Be]},Kt={key:"block menu presentation",render:e=>(0,r.jsx)(O().A,{...e}),actions:[Pe]},Gt={key:"block menu secondary",render:e=>(0,r.jsx)(O().A,{...e}),actions:[Ze,$e,Je,et,be().i,Re,Ue,De,Ve,Se().Zm,Se().Lc,Oe,Ee,ze,Fe,he().U,he().H,We,Ke,Ge,Ye,Xe,Qe,at,nt,ue().LN,dt,Me().t,st]},Yt={key:"block menu dictate",render:e=>(0,r.jsx)(O().A,{...e}),actions:[ge().qp]},Xt={key:"block menu comment",render:e=>(0,r.jsx)(O().A,{...e}),actions:[ce().Im,ce().pG,ce().R5,(0,Ae().F)("block_action_menu")]},Qt={key:"block menu color",render:e=>(0,r.jsx)(O().A,{...e,topBorder:!0}),actions:[mt,le().Rw]},Zt={key:"code block menu style",render:e=>(0,r.jsx)(O().A,{...e}),actions:[pt,yt,Mt,ht,kt]},$t={key:"block menu quote",render:e=>(0,r.jsx)(O().A,{...e}),actions:[wt]},Jt={key:"block menu number",render:e=>(0,r.jsx)(O().A,{...e}),actions:[Nt]},ea={key:"block menu bullet",render:e=>(0,r.jsx)(O().A,{...e}),actions:[Tt]},ta={key:"block alignment",render:e=>(0,r.jsx)(O().A,{...e}),actions:[Ut,Ft,ve().N,ve().S]},aa=[ye().LQ,Xt,ta,Ce().PE,qt,Yt,Wt,Gt,Kt,Qt,Zt,$t,Jt,ea],na=[ye().LQ,zt,Et,Ot,Ht],oa=(0,fe().uk)({key:"open in (group)",svg:f().arrowDiagonalUpRightIcon,displayName:xe.openIn,analyticsName:xe.openIn.defaultMessage,validators:[K().vXb,K().AU6(K().FrL),ke().kf],subActions:()=>[{key:0,title:void 0,render:e=>(0,r.jsx)(O().A,{...e}),actions:ke().Wq}]}),ia=(0,te().localUserOnlyGateCheck)({gateName:"updated_6dot_menu"})?na:aa,sa={key:"collection menu primary",render:e=>(0,r.jsx)(O().A,{...e}),actions:[mt,We,st,ct]},ra={key:"collection menu navigation",render:e=>(0,r.jsx)(O().A,{...e}),actions:[oa]},la={key:"collection menu manage",render:e=>(0,r.jsx)(O().A,{...e}),actions:[ue().oc,Be,pe().As,Me().t,me().z]},ca={key:"collection menu comment",render:e=>(0,r.jsx)(O().A,{...e}),actions:[ce().Im]},da={key:"collection menu tertiary",render:e=>(0,r.jsx)(O().A,{...e}),actions:[ce().Im,oa]},ua={key:"collection menu secondary",render:e=>(0,r.jsx)(O().A,{...e}),actions:[mt,We]},ma={key:"collection menu primary",render:e=>(0,r.jsx)(O().A,{...e}),actions:[st,ct,ue().oc,Be,pe().As,Me().t,me().z]},ga=[ma,ua,da],pa=[sa,ra,la,ca],fa=(0,te().localUserOnlyGateCheck)({gateName:"updated_6dot_menu"})?pa:ga,va=[ma,ua,{key:"collection menu tertiary",render:e=>(0,r.jsx)(O().A,{...e}),actions:[oa]}]},813743:(e,t,a)=>{a.d(t,{O8:()=>B,Yf:()=>j,fS:()=>T});var n=()=>a(221844),o=()=>a(496506),i=()=>a(700500),s=()=>a(792071),r=()=>a(861017),l=()=>a(179034),c=()=>a(197959),d=()=>a(161479),u=()=>a(919709),m=()=>a(534177),g=()=>a(246826),p=()=>a(778417),f=()=>a(725614),v=()=>a(780054),b=()=>a(97270),y=()=>a(299545),M=()=>a(906537),k=()=>a(110955),h=()=>a(487494),A=()=>a(176106),S=()=>a(525112),C=()=>a(375447),w=()=>a(630116),x=()=>a(292167),I=()=>a(437219),N=()=>a(722101),_=()=>a(666144),L=()=>a(319975),P=()=>a(751156);function j(e){const{environment:t,textStore:a,blockStore:i,url:s,oldTextValue:u,urlSelection:m}=e;if(k().A.state.open||b().A.state.open||C().Ay.state.open||A().A.state.open)return!1;const g=M().get();if(!g)return!1;const p=M().getRect(g);if(!p)return!1;const f=(0,r().parseRoute)({url:s,baseUrl:v().A.domainBaseUrl,publicDomainName:v().A.publicDomainName,isMobile:t.device.isMobile,protocol:v().A.protocol,currentUrl:window.location.href});if("page"===f.name&&Boolean(f.discussionId)&&f.discussionId){const e=f.discussionId,r=f.blockId;if(!r)return!1;const g=i.getParentBlockStore();if(!g)return!1;const v=(0,w().Oo)(g,{table:l().ev,id:r,spaceId:(0,d().e)(g.pointer.spaceId)}),b=(0,w().Oo)(v,{table:c().$Y,id:e,spaceId:(0,d().e)(i.pointer.spaceId)});if("none"===b.getRole())return!1;const M=new(o().ComputedStore)((()=>y().wc(b)[0]),{debugName:"firstCommentStore"}),k=new(n().A)({name:"internalUnfurlingMenuActions.activate",isTemporaryData:!0});t.defaultRecordCache.inMemoryRecordCache.addCacheOverride(k);const A=i.clone(k),C=a.clone(k),x=g.clone(k);return S().A.setState({args:{commentStore:M},stores:{blockStore:i,textStore:a,parentStore:g},temporaryStores:{blockStore:A,textStore:C,parentStore:x},temporaryRecordCache:k,focusedIndex:h().A.Preview,selectionRect:p,oldTextValue:u,open:!0,url:s,urlSelection:m}),I().wQ(t,{url:s}),!0}return!1}function T(e){const{actionType:t,environment:a,commentStore:n,useTempStores:o}=e,i=S().A.state;if(!i.open)return;const{oldTextValue:r}=i,l=o?i.temporaryStores:i.stores,{textStore:c,blockStore:g,parentStore:v}=l,b=a.currentUser.id;if(b){if(o){i.temporaryRecordCache.clearCache();for(const e in i.temporaryStores){const t=i.temporaryStores[e],n={userId:b,pointer:t.pointer},o=a.defaultRecordCache.inMemoryRecordCache.getRecord(n);o?_().PC({environment:a,inMemoryRecordCache:i.temporaryRecordCache,pointer:t.pointer,model:s().Bj6.fromValue(t.pointer.table,o.value),role:o.role,updatePaths:[[]],userId:b,force:!0,debugSource:"setUnfurlType"}):_().oX({environment:a,inMemoryRecordCache:i.temporaryRecordCache,persistedRecordCache:void 0,pointer:t.pointer,userId:b})}}else a.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(i.temporaryRecordCache);switch(t){case h().A.Link:p().hc({environment:a,store:i.stores.blockStore}),f().setSelection({store:i.stores.textStore,selection:{startIndex:i.urlSelection.endIndex,endIndex:i.urlSelection.endIndex}}),S().A.setState({...i,focusedIndex:h().A.Link});break;case h().A.Mention:if(!n)return;const e=(0,d().e)(c.pointer.spaceId);if(!e)return;const o=n.id;P().createAndCommit({environment:a,userAction:"internalUnfurlingMenuActions.mention",canUndo:!0,perform:t=>{L().R9({environment:a,store:c,value:r,transaction:t}),L().Gf({environment:a,editorMode:"default",store:c,selection:{startIndex:i.urlSelection.startIndex,endIndex:i.urlSelection.startIndex},annotation:u().hiQ(o,e),transaction:t,analyticsFrom:"block"})}}),S().A.setState({...i,focusedIndex:h().A.Mention});break;case h().A.Preview:if(!n)return;P().createAndCommit({environment:a,userAction:"internalUnfurlingMenuActions.preview",canUndo:!0,perform:e=>{L().R9({environment:a,store:c,value:r,transaction:e});const t=y().eK(n);if(!t)return;if(!y().No(t)||!v||!t.getParentId())return;const o=x().s({environment:a,parentBlockStore:v,targetStore:n,transaction:e});if(N().WH({parentStore:v.getContentStore(),insertStore:o,afterStore:g,transaction:e}),0===u().q4_(i.oldTextValue).trim().length){const t=w().Bv.createChildStore(v.getContentStore(),i.stores.blockStore.pointer);N().TF({parentStore:v.getContentStore(),childToRemoveStore:t,transaction:e})}}}),S().A.setState({...i,focusedIndex:h().A.Preview});break;default:throw(0,m().HB)(t)}o||S().A.setState({open:!1})}}function B(e){var t,a;const{blockStore:n,transaction:o}=e,s=n.getType(),r=n.getFormat(),l=n.getSpaceId();if(!n.isDefined()||s!==i().xd.alias||null==r||null===(t=r.alias_pointer)||void 0===t||!t.id)return;const c=[u().wmz(u().hiQ(null==r||null===(a=r.alias_pointer)||void 0===a?void 0:a.id,l))];g().zv({store:n,data:{type:i().xd.text},transaction:o}),g().zv({store:n.getFormatStore(),data:{alias_pointer:null},transaction:o}),L().R9({environment:n.environment,store:n.getBlockTitleStore(),value:c,transaction:o})}},820579:(e,t,a)=>{a.d(t,{f:()=>o});a(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.52 2.39 12.95 15.21",svg:(0,a(474848).jsx)("path",{d:"M10 2.4c.345 0 .625.28.625.625v9.966l3.333-3.333a.625.625 0 1 1 .884.884l-4.4 4.4a.625.625 0 0 1-.884 0l-4.4-4.4a.625.625 0 0 1 .884-.884l3.333 3.333V3.025c0-.345.28-.625.625-.625M4.15 16.35a.625.625 0 1 0 0 1.25h11.7a.625.625 0 0 0 0-1.25z"})},o=(0,a(340498).wt)("arrowLineDown",n)},877788:(e,t,a)=>{a.d(t,{w:()=>o});a(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.4 2.39 15.2 14.52",svg:(0,a(474848).jsx)("path",{d:"M10 2.399c.27 0 .51.174.594.432l1.507 4.636h4.874a.625.625 0 0 1 .367 1.13L13.4 11.462l1.506 4.636a.625.625 0 0 1-.962.699L10 13.932l-3.943 2.865a.625.625 0 0 1-.962-.699L6.6 11.462 2.658 8.597a.625.625 0 0 1 .367-1.13h4.874L9.406 2.83A.625.625 0 0 1 10 2.399m0 2.647L8.948 8.285a.625.625 0 0 1-.595.432H4.95l2.754 2c.22.16.31.442.227.7l-1.052 3.238 2.755-2.001a.625.625 0 0 1 .734 0l2.755 2-1.052-3.237a.625.625 0 0 1 .227-.7l2.754-2h-3.405a.625.625 0 0 1-.594-.432z"})},o=(0,a(340498).wt)("star",n)},898563:(e,t,a)=>{a.d(t,{C6:()=>b,Eu:()=>u,FY:()=>r,MP:()=>f,YT:()=>d,d2:()=>v,fK:()=>y,lL:()=>c,mH:()=>M,oI:()=>l,sD:()=>g,tr:()=>m,yS:()=>p});var n=()=>a(679924),o=()=>a(680074),i=()=>a(217429),s=()=>a(10984);function r(e){(0,n().v)(e,"add_slack_integration")}function l(e){(0,n().v)(e,"remove_slack_integration")}function c(e,t){(0,n().v)(e,"slack_notification_create",t)}function d(e,t){(0,n().v)(e,"slack_notification_delete",t)}function u(e,t){(0,n().v)(e,"slack_notification_update",t)}function m(e,t){const a=s().AI(),i=o().FX();(0,n().v)(e,"slack_imports_invite_render_button",{subscription_tier:a,domain_type:i,origin:t.origin,invite_flow_id:t.invite_flow_id})}function g(e,t){const a=s().AI(),i=o().FX();(0,n().v)(e,"slack_imports_invite_render_invite_popup",{subscription_tier:a,domain_type:i,origin:t.origin,invite_flow_id:t.invite_flow_id})}function p(e,t){const a=s().AI(),i=o().FX();(0,n().v)(e,"slack_imports_invite_click_invite_button",{subscription_tier:a,domain_type:i,invited_user_count:t.invited_user_count,origin:t.origin,invite_token_query:t.inviteTokenQuery,invite_targets:t.inviteTargets,invite_flow_id:t.invite_flow_id})}function f(e,t){const a=s().AI(),i=o().FX();(0,n().v)(e,"slack_imports_invite_completed",{subscription_tier:a,domain_type:i,invited_user_count:t.invited_user_count,is_success:t.is_success,origin:t.origin,invite_flow_id:t.invite_flow_id,error:t.error,invite_stage:t.invite_stage})}function v(e,t){const a=s().AI(),i=o().FX();(0,n().v)(e,"slack_imports_invite_dismiss_popup",{subscription_tier:a,domain_type:i,origin:t.origin,invite_flow_id:t.invite_flow_id})}function b(e,t){const a=s().AI(),i=o().FX();(0,n().v)(e,"slack_imports_invite_click_select_all",{subscription_tier:a,domain_type:i,origin:t.origin,invite_flow_id:t.invite_flow_id,invited_user_count:t.invited_user_count,is_unselect:t.is_unselect,invite_token_query:t.invite_token_query})}function y(e,t){const a=s().AI(),r=o().FX();(0,n().v)(e,"slack_imports_invite_start_slack_integration",{subscription_tier:a,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from}),i().default.logEvent("slack_imports_invite_start_slack_integration",void 0,{subscription_tier:a,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from})}function M(e,t){const a=s().AI(),r=o().FX();(0,n().v)(e,"slack_imports_invite_complete_slack_integration",{subscription_tier:a,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success}),i().default.logEvent("slack_imports_invite_complete_slack_integration",void 0,{metadata:{subscription_tier:a,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success}})}},908928:(e,t,a)=>{a.d(t,{GO:()=>j,Ju:()=>P,KA:()=>L,L0:()=>R,L2:()=>V,dA:()=>T,gI:()=>_,iN:()=>D,oG:()=>U,sK:()=>B});a(898992),a(354520),a(803949);var n=()=>a(386164),o=()=>a(433847),i=()=>a(68263),s=()=>a(388821),r=()=>a(179034),l=()=>a(824862),c=()=>a(161479),d=()=>a(96689),u=()=>a(798880),m=()=>a(763824),g=()=>a(534177),p=()=>a(901389),f=()=>a(855801),v=()=>a(594794),b=()=>a(972435),y=()=>a(731320),M=()=>a(630116),k=()=>a(449506),h=()=>a(496414),A=()=>a(579627),S=()=>a(246826),C=()=>a(436572),w=()=>a(751156),x=()=>a(633457);const I=(0,a(959013).YK)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"}});function N(e,t){const{environment:a,spaceStore:n,spaceRole:o}=t,i=function(e){const{name:t,spaceStore:a,userId:n,icon:o,type:i,environment:s}=e,r=Date.now(),c={name:t,created_at:r,created_by_table:u().oo,created_by_id:n,alive:!0,icon:o,space_id:a.id,last_edited_at:r,last_edited_by_id:n,last_edited_by_table:u().oo};switch(i){case"guest":return{...c,type:"guest",capabilities:e.capabilities,parent_table:d().NX,parent_id:a.id,integration_id:void 0};case"scim":return{...c,id:(0,v().Z1)({environment:s,table:l().GP,spaceId:a.id}),type:"scim",parent_table:u().oo,parent_id:n};default:(0,g().HB)(i)}}(t),s=S().eC({environment:a,table:l().GP,value:i,inMemoryRecordCache:a.defaultRecordCache.inMemoryRecordCache,transaction:e});return A().dy({environment:a,spaceStore:n,permissionItems:[{type:"bot_permission",role:o,bot_id:s.id}],transaction:e}),{botStore:s}}function _(e){const{environment:t}=e,{serverCommitResult:a,performResult:{botStore:n}}=w().createAndCommit({userAction:"botActions.createSpaceBot",environment:t,canUndo:!0,perform:t=>N(t,e)});return{botStore:n,transactionPromise:a}}async function L(e){const{environment:t,botId:a,onSuccess:n}=e,o=await k().callApi({eventName:"deleteBot",environment:t,data:{botId:a}});"failed"===o.type?p().Qg(o):"success"===o.type&&n&&(await x().oX({environment:t}),n())}async function P(e){const{environment:t,table:a,id:o,type:i}=e,s=await k().callApi({eventName:"getBots",environment:t,data:{table:a,id:o,type:i},headers:(0,n().WS)({spaceId:a===d().NX?o:void 0})});return"failed"===s.type?(p().Qg(s),{botIds:[],recordMap:{}}):{botIds:s.data.botIds,recordMap:s.data.recordMap}}async function j(e){const{environment:t,currentSpaceStore:a,botIds:n}=e;if(!a)return;const o=await k().callApi({eventName:"getBotSharedPageIds",environment:t,data:{spaceId:a.id,botIds:n}});if("failed"!==o.type)return o.data;p().Qg(o)}async function T(e){const{environment:t,botId:a}=e,n=await k().callApi({eventName:"getBotToken",environment:t,data:{botId:a}});if("failed"!==n.type)return n.data.token;p().Qg(n)}function B(e){const{botValue:t,store:a,environment:n}=e,{id:i,parent_id:s,parent_table:r,capabilities:l}=t,c={type:"bot_permission",bot_id:i,parent_id:s,parent_table:r,role:(0,o().MD)(l)};w().createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:n,canUndo:!0,perform:e=>{A().zP({environment:n,store:a,permissionItems:[c],transaction:e})}})}function U(e){const{botId:t,store:a,environment:n}=e,o=a.getPermissionItems().filter((e=>!!(0,i().P3)(e)));for(const i of o)if(i.bot_id===t){const e={...i,role:"none"};w().createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:n,canUndo:!0,perform:t=>{A().zP({environment:n,store:a,permissionItems:[e],transaction:t})}})}}function R(e){const{currentSpaceStore:t,environment:a,pages:n,botStore:o,addPermission:i}=e;if(!t)return;const s=(0,y().Ws)({botStore:o,addPermission:i});n.forEach((e=>{const n=M().sk.createChildStore(t,{table:r().ev,id:e,spaceId:t.getSpaceId()});w().createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:a,canUndo:!0,perform:e=>{A().zP({environment:a,store:n,permissionItems:[s],transaction:e})}})}))}async function D(e){const{environment:t,spaceStore:a,botStore:n,pageIdAndOperations:o,concurrency:i=20}=e;0!==o.length&&await(0,m().lX)(o,i,(async e=>{const o=M().sk.createChildStore(a,{table:r().ev,id:e.pageId,spaceId:a.getSpaceId()}),i=(0,y().Ws)({botStore:n,addPermission:"add"===e.operationType}),{serverCommitResult:s}=w().createAndCommit({userAction:`botActions.updateBotPermissionsForPages.${e.operationType}`,environment:t,canUndo:!0,perform:e=>{A().zP({environment:t,store:o,permissionItems:[i],transaction:e})}});await s}))}async function V(e){const{environment:t,spaceStore:a,spaceViewStore:o,templatePageId:i,botValue:r,pages:d}=e;if(!a)return;const u=M().sk.createChildStore(a,{table:l().GP,id:r.id});if(i)return await async function(e){const{environment:t,spaceStore:a,spaceViewStore:o,templatePageId:i,botStore:r}=e;if(!a||!o)return;try{h().m({message:I.duplicatingTemplate});const e=await k().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:i,spaceId:(0,c().e)(void 0)},shallow:!1},headers:(0,n().WS)({recordId:i})});if("failed"===e.type)return;const l=s().RecordMapWithRole.create(e.data.subtreeRecordMap),{createAndDuplicatePageInSpace:d}=await(0,f().nd)(),{performResult:u}=w().createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,canUndo:!0,perform:e=>{const n=d({environment:t,recordMap:l,copyPageId:i,isPrivate:!0,spaceStore:a,spaceViewStore:o,transaction:e,allowCopyExternalObjectInstances:!1}),s=o.getPrivatePageIds();s.length>0&&S().zv({store:o,data:{private_pages:[n.id,...s]},transaction:e});const c=(0,y().Ws)({botStore:r,addPermission:!0});return A().zP({environment:t,store:n,permissionItems:[c],transaction:e}),n}});return u}catch(l){C().D6({label:b().A.formatMessage(I.duplicatingTemplateError)})}finally{h().V()}}({environment:t,templatePageId:i,botStore:u,spaceStore:a,spaceViewStore:o});R({environment:t,currentSpaceStore:a,botStore:u,pages:d,addPermission:!0})}},973238:(e,t,a)=>{a.r(t),a.d(t,{arrowInCircleDownIcon:()=>i,iconDefinition:()=>o});a(296540);var n=a(474848);const o={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M6.958 10.446a.625.625 0 0 1 .884 0l1.533 1.533V6.513a.625.625 0 1 1 1.25 0v5.466l1.533-1.533a.625.625 0 1 1 .884.883l-2.6 2.6a.625.625 0 0 1-.884 0l-2.6-2.6a.625.625 0 0 1 0-.883"}),(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},i=(0,a(340498).wt)("arrowInCircleDown",o)}}]);