"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[3476],{359941:(e,t,i)=>{i.d(t,{V:()=>o});var r=()=>i(56366),n=()=>i(646736),s=()=>i(12974);function o(e){const{spaceStore:t}=e,i=(0,n().eD)(t);return(0,r().K8)((()=>(0,s().MU)({spaceStore:t,actorRole:i})),[t,i])}},471095:(e,t,i)=>{i.d(t,{i:()=>n});i(296540);const r={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.95 12.05 15.66",svg:(0,i(474848).jsx)("path",{d:"M6 5.95a4 4 0 1 1 8 0v1.433a2.426 2.426 0 0 1 2.025 2.392v5.4A2.425 2.425 0 0 1 13.6 17.6H6.4a2.425 2.425 0 0 1-2.425-2.425v-5.4c0-1.203.876-2.201 2.025-2.392zm6.75 1.4v-1.4a2.75 2.75 0 1 0-5.5 0v1.4zm-2.2 5.458a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"})},n=(0,i(340498).wt)("lockFill",r)},602248:(e,t,i)=>{i.d(t,{J:()=>ne,default:()=>se});var r=i(296540),n=()=>i(484714),s=()=>i(56366),o=()=>i(401497),a=()=>i(284371),l=()=>i(696746),d=()=>i(765957),c=(i(898992),i(354520),i(581454),()=>i(959013)),u=()=>i(874913),h=()=>i(108944),g=()=>i(71304),x=()=>i(37433),m=()=>i(963589),v=()=>i(630116),f=()=>i(704152),b=()=>i(493823),p=()=>i(406699),j=()=>i(928600),M=()=>i(939740),y=()=>i(722872),w=()=>i(771442),S=()=>i(864040),P=i(474848);const k=function(e){const{isMobile:t,stores:r}=e,s=(0,n().v3)(),o={display:"flex",alignItems:"center",flexShrink:0};return(0,P.jsx)(p().Ay,{popupType:t?p().z7.SlideUp:p().z7.Popup,renderOrigin:e=>t?(0,P.jsxs)(f().A,{style:{...o},...e,children:[(0,P.jsx)(w().f,{}),(0,P.jsx)("div",{style:{marginLeft:8,marginRight:8},children:"..."}),(0,P.jsx)(w().f,{})]}):(0,P.jsxs)("div",{style:o,children:[(0,P.jsx)(b().p,{size:"sm",...e,children:"..."}),(0,P.jsx)(w().f,{})]}),render:e=>{let n;return n=t?{menuType:y().gu.Modal,title:(0,P.jsx)(c().sA,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),right:(0,P.jsx)(i(480095).DoneMenuText,{}),onClickRight:e.close}:{menuType:y().gu.Popup,width:240},(0,P.jsx)(j().A,{...n,children:(0,P.jsx)(M().Ay,{type:M().Oh.Vertical,onAccept:e.close,initialFocus:void 0,sections:(0,S().A)(s,r)})})}})};var A=()=>i(906719),_=()=>i(565049);function R(e){const{ancestorMaxWidth:t,showDivider:i,store:r,disabled:n}=e;return r instanceof v().h4?(0,P.jsx)(_().A,{store:r,showDivider:i,maxWidth:t,disabled:n}):(0,P.jsx)(A().A,{store:r,showDivider:i,maxWidth:t,disabled:n})}function W(e){const{ancestorMaxWidth:t,isMobile:i,homeStore:o,store:a,maxAncestorCount:d,disabled:f}=e,b=(0,n().v3)(),p=(0,c().tz)(),j=(0,m().X)("team_feed_as_any_other_db"),[M,y]=(0,s().K8)((()=>{const e=h().fU(a,j);e.reverse();return[a.isNavigableBlock()?e.slice(0,-1):[...e],e]}),[a,j],{useDeepEqual:!0}),w=(0,s().K8)((()=>M.map((e=>(0,g().Qe)(e,p,b,!0)||(0,g().gG)(e,p)||""))),[b,p,M]);(0,r.useEffect)((()=>(u().setTabBreadcrumbs(w),()=>{u().setTabBreadcrumbs(void 0)})),[w]);const S=(0,s().K8)((()=>(0,l().Nh)(a.id)),[a]),W=(0,s().K8)((()=>(0,x().zI)()>0),[]);if(S&&void 0!==o)return(0,P.jsx)(R,{ancestorMaxWidth:t,showDivider:M.length>0,store:o,disabled:f},o.id);if(M.length>d){const[e,r,n]=[M[0],M.slice(1,M.length-d+1),M.slice(M.length-d+1)];if(W)return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(R,{ancestorMaxWidth:t,showDivider:!i,store:e,disabled:f},e.id),(0,P.jsx)(k,{isMobile:i,stores:i?y:r},"pages-popup"),n.map((e=>e instanceof v().h4?(0,P.jsx)(_().A,{store:e,showDivider:!0,maxWidth:t,disabled:f},e.id):(0,P.jsx)(A().A,{store:e,showDivider:!0,maxWidth:t,disabled:f},e.id)))]});{const e=M.filter((e=>e instanceof v().Bv)),r=M.filter((e=>e instanceof v().Bv));return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(A().A,{store:e[0],showDivider:!i,maxWidth:t,disabled:f},e[0].id),(0,P.jsx)(k,{isMobile:i,stores:i?r:e.slice(1,e.length-d+1)},"pages-popup"),e.slice(e.length-d+1).map((e=>(0,P.jsx)(A().A,{store:e,showDivider:!0,maxWidth:t,disabled:f},e.id)))]})}}return(0,P.jsx)(P.Fragment,{children:M.map((e=>(0,P.jsx)(R,{ancestorMaxWidth:t,showDivider:!0,store:e,disabled:f},`${e.table}-${e.id}`)))})}var C=()=>i(679924);var B=()=>i(898286),D=()=>i(2220),L=()=>i(187820),K=()=>i(478726),I=()=>i(836251),N=()=>i(347199),T=()=>i(953418),z=()=>i(217429),O=()=>i(712505);const U=function(e){const{ancestorMaxWidth:t,ignoreMaxLength:r,showDivider:n,store:s,marginLeft:a}=e,l=(0,o().IS)((()=>({wrapper:{display:"flex",alignItems:"center",flexShrink:1,marginLeft:a,minWidth:0,maxWidth:r?void 0:"100%"}})),[r,a]);return(0,P.jsxs)("div",{style:l.wrapper,children:[(0,P.jsx)(i(20039).A,{store:s,maxWidth:t,ignoreMaxLength:r}),n&&(0,P.jsx)(w().f,{})]})};function V(e){const{environment:t,isMobile:i,currentPageRef:r,store:n,disabled:o}=e;return(0,s().K8)((()=>{const e=n.canEdit(),s=n.isNonEditableState(),a=n.getCollectionStore(),d=null==a?void 0:a.isSyncedCollection(),c=n.isExternalObjectInstancePageBlockStore(),u=(0,K().fc)(n);return o||(0,l().Nh)(n.id)||n.isPersonProfile()||i||(0,I().w6)(t)||O().default.isCenterPeekOpen()||!r||!e||s||c||d||u}),[t,i,r,n,o])}function E(e){const{environment:t,currentPageRef:i,store:n}=e;return(0,r.useCallback)((()=>{const e=O().default.isCenterPeekOpen()?N().A.PeekViewScroller:N().A.PageScroller;if(e){const i=e.getNode();if(i&&!T().Np(i))return T().VG({element:i,environment:t,options:{top:0,behavior:"smooth"}}),void function(e){(0,C().v)(e,"click_breadcrumb_current_page_scroll_to_top")}(t)}const r=i.current;if(!r)return;if(!(r instanceof Element))return;const s=r.getBoundingClientRect();B().U({blockStore:n,originRect:s}),function(e){(0,C().v)(e,"open_breadcrumb_current_page_menu")}(t)}),[t,i,n])}function F(e,t){const{currentPageMaxWidth:r,isMobile:o,currentPageRef:a,store:l}=e,d=(0,n().v3)(),c=V({environment:d,isMobile:o,currentPageRef:a,store:l,disabled:e.disabled}),u=(0,s().K8)((()=>l.isEmptyPage()),[l]),h=(0,s().K8)((()=>(0,L().Te)(l)),[l]),g=(0,s().K8)((()=>l.getIcon()),[l]),x=o?24:20,m=E({environment:d,currentPageRef:a,store:l});return(0,P.jsxs)(b().p,{shouldShrink:!0,onClick:m,size:"sm",ref:t,disabled:c,children:[Boolean(g)&&(0,P.jsx)(L().B6,{disabled:!0,icon:g,iconRecordCategory:h,isEmptyPage:u,size:x,style:{marginRight:6},largeIcon:!0}),(0,P.jsx)(i(16006).A,{store:l,style:{maxWidth:r},enableHover:!0})]})}const H=(0,r.forwardRef)(F);function $(e){const{ancestorMaxWidth:t,isMobile:i,currentPageRef:r,store:o,marginLeft:a}=e,d=(0,n().v3)(),{mobileNative:c}=d,u=(0,s().K8)((()=>(0,l().lU)(o)),[o]),g=V({environment:d,isMobile:i,currentPageRef:r,store:o,disabled:e.disabled}),x=E({environment:d,currentPageRef:r,store:o}),m=(0,s().K8)((()=>{const e=h().fU(o);return 0===(o.isNavigableBlock()?e.slice(1):[...e]).length}),[o]);return u?null:i?(0,P.jsx)(b().p,{disabled:g,shouldShrink:!0,onClick:x,size:"sm",style:null!=c&&c.supportsNativeHomeOnPhone()?{paddingLeft:0}:void 0,children:(0,P.jsx)(U,{store:o,showDivider:!1,ignoreMaxLength:m,ancestorMaxWidth:t,marginLeft:a})}):(0,P.jsx)(b().p,{disabled:g,shouldShrink:!0,onClick:x,size:"sm",style:{fontSize:"inherit"},children:(0,P.jsx)(U,{store:o,showDivider:!1,ancestorMaxWidth:t,marginLeft:a})})}function G(e){const{store:t,ancestorMaxWidth:i,marginLeft:r}=e,n={display:"flex",alignItems:"center",flexShrink:0};return(0,P.jsx)(J,{store:t,renderOrigin:e=>(0,P.jsx)(f().A,{style:{...n,maxWidth:"100%"},...e,children:(0,P.jsx)(U,{store:t,showDivider:!1,ignoreMaxLength:!0,ancestorMaxWidth:i,marginLeft:r})})})}function J(e){const{store:t,renderOrigin:i}=e,o=(0,n().v3)(),a=(0,s().K8)((()=>{const e=h().fU(t);return e.reverse(),e}),[t]),l=(0,r.useCallback)((()=>{(0,D().u)({environment:o,event:{eventName:"topbar_breadcrumb_menu_click",eventProperties:{has_parent_pages:a.length>1}}})}),[o,a]),d=(0,r.useCallback)((e=>{o.device.isMobileNative&&((0,D().u)({environment:o,event:{eventName:"topbar_breadcrumb_page_click",eventProperties:{page_id:e.id}}}),z().default.logEvent("topbar_breadcrumb_page_click",void 0,{page_id:e.id}))}),[o]);return(0,P.jsx)(p().Ay,{popupType:p().z7.BottomSheet,bottomSheetInitialState:"half",onClick:l,renderOrigin:i,render:e=>(0,P.jsx)(j().A,{menuType:y().gu.Modal,title:(0,P.jsx)(c().sA,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),children:(0,P.jsx)(M().Ay,{type:M().Oh.Vertical,onAccept:e.close,initialFocus:void 0,sections:(0,S().A)(o,a,d)})})},"pages-popup")}i(823215),i(737550);var q=i(440961),Q=()=>i(626466),X=()=>i(471095),Y=()=>i(68263),Z=()=>i(95313),ee=()=>i(750660),te=()=>i(859428),ie=()=>i(962730);function re(e){const{store:t}=e,i=(0,n().v3)(),a=(0,s().K8)((()=>{const{currentSpaceViewStore:e}=d().default.state,r=(null==e?void 0:e.getPrivatePages(i))??[];return null==r?void 0:r.some((e=>e.id===t.id))}),[i,t]),l=(0,s().K8)((()=>{const e=i.currentUser.id;return t.getPermissionItems().every((t=>(0,Y().B2)(t)&&e===t.user_id))}),[i,t]),u=(0,o().DP)(),h=(0,r.useRef)(null),g=(0,r.useCallback)((()=>{if(!h)return;const e=q.findDOMNode(h.current);if(!(e&&e instanceof Element))return;const r=e.getBoundingClientRect(),n=new DOMRect(r.x,r.y,r.width,r.height+5);Z().D3(i),ee().ho({environment:i,blocks:[t],originRect:n,moveToContext:"topbar_breadcrumb"})}),[i,h,t]);return a&&l?(0,P.jsx)(te().A,{placement:ie().W.Right,renderTooltip:e=>(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{children:(0,P.jsx)(c().sA,{defaultMessage:"Only you have access",id:"breadcrumb.moveTo.hasPermission.title"})}),(0,P.jsx)("div",{style:{color:u.text.contrastSecondary},children:(0,P.jsx)(c().sA,{defaultMessage:"Click to move",id:"breadcrumb.moveTo.hasPermission.subtitle"})})]}),render:e=>(0,P.jsxs)(b().p,{size:"sm",disabled:!1,onClick:g,ref:h,...e,children:[(0,X().i)({width:16,fill:u.icon.tertiary}),(0,P.jsx)("span",{style:{color:u.text.tertiary,marginLeft:4,marginRight:5},children:(0,P.jsx)(c().sA,{defaultMessage:"Private",id:"breadcrumb.moveTo.privatePages"})}),(0,Q().arrowChevronSingleDownFillIcon)({width:11,fill:u.icon.tertiary})]})}):null}const ne=6;const se=function(e){const{ancestorMaxWidth:t,maxAncestorCount:c,currentPageMaxWidth:u,isMobile:h,showCurrentPageControls:g,store:x,style:m}=e,v=(0,r.useRef)(null),f=(0,n().v3)(),b=(0,o().IS)((()=>({container:{display:"flex",alignItems:"center",lineHeight:1.2,fontSize:h?a().J.UIRegular.mobile:a().J.UIRegular.desktop,...m},enforceMaxLength:{maxWidth:"100%"}})),[h,m]),p=(0,s().K8)((()=>{var e;return Boolean(null===(e=x.getTitleStore())||void 0===e?void 0:e.isReady())}),[x]),j=(0,s().K8)((()=>{const{currentSpaceViewStore:e}=d().default.state;let t;return e&&e.isReady()&&(t=(0,l().x$)(e)),t}),[]),M=(0,s().K8)((()=>x.isPersonProfile()),[x]),y=(0,s().K8)((()=>!(0,l().lU)(x)&&!M&&g&&x.isReady()),[g,x,M]),w=(0,s().O$)(d().AppStoreCurrentSpaceStore),S=(0,i(359941).V)({spaceStore:w}),k=!M||S,A=(0,s().K8)((()=>{var e;return f.device.isPhone||(null===(e=f.mobileNative)||void 0===e?void 0:e.supportsNativeHomeOnPhone())}),[f]);if((0,s().K8)((()=>{var e;if(Boolean(f.currentUser.isLoggedIn()||f.publicDomainUserId))return!1;const t=i(578872).GN(x),r=f.RouterStore.state.route;return!(!(0,i(861017).bh)(r)||(null==t?void 0:t.id)!==x.id)||(null==t||null===(e=t.getSiteStore())||void 0===e||null===(e=e.getHeader())||void 0===e?void 0:e.hideBreadcrumbs)}),[f,x]))return null;if(!p)return null;const _=Boolean(e.disabled);return A?(0,P.jsx)("div",{style:{...b.container,...b.enforceMaxLength},className:"notranslate",children:(0,P.jsx)(G,{store:x,ancestorMaxWidth:t,marginLeft:ne,disabled:_})}):(0,P.jsxs)("div",{style:b.container,className:"notranslate shadow-cursor-breadcrumb",children:[k&&(0,P.jsx)(W,{ancestorMaxWidth:t,maxAncestorCount:c,isMobile:h,homeStore:j,store:x,disabled:_}),y?(0,P.jsx)(H,{currentPageMaxWidth:u,isMobile:h,currentPageRef:v,ref:v,store:x,marginLeft:ne,disabled:_}):(0,P.jsx)($,{ancestorMaxWidth:t,isMobile:h,currentPageRef:v,store:x,marginLeft:ne,disabled:_}),(0,P.jsx)(re,{store:x})]})}},626466:(e,t,i)=>{i.r(t),i.d(t,{arrowChevronSingleDownFillIcon:()=>n,iconDefinition:()=>r});i(296540);const r={viewBox:"0 0 20 20",fittedViewBox:"3.72 6.72 12.56 7.16",svg:(0,i(474848).jsx)("path",{d:"M9.381 13.619a.875.875 0 0 0 1.238 0l5.4-5.4A.875.875 0 1 0 14.78 6.98L10 11.763 5.219 6.98A.875.875 0 1 0 3.98 8.22z"})},n=(0,i(340498).wt)("arrowChevronSingleDownFill",r)},864040:(e,t,i)=>{i.d(t,{A:()=>n});i(581454),i(296540);var r=i(474848);const n=function(e,t,n){return[{key:"results",render:e=>(0,r.jsx)(i(89924).A,{...e}),items:t.map(((t,s)=>({key:t.id,render:e=>(0,r.jsx)(i(958378).A,{...e,isSubpage:0!==s,store:t,hidePath:!0}),action:r=>{let{event:s}=r;const o=i(728611).Vr(s);t instanceof i(630116).Bv&&(n&&n(t),i(857783).uK({environment:e,store:t,openInNew:o,visitType:i(211716).ig.Link,pageVisitSource:i(584262).y8.Breadcrumb}))}})))}]}}}]);