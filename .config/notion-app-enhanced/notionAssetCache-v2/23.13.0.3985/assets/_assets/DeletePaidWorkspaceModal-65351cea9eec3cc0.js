"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[98906],{492720:(e,s,t)=>{t.d(s,{p:()=>r});var n=()=>t(762433),o=()=>t(57605);function r(e,s){if(!s)return;const t=o().A.getData(e,{spaceId:s});if(!t)return;const r=(0,n().AI)(t),a=(0,n().q8)(t);if(r&&a&&"year"!==a)switch(r){case"plus":return"team_three_months";case"business":return"business_three_months";case"enterprise":return"enterprise_three_months";default:return}}},876963:(e,s,t)=>{t.r(s),t.d(s,{DeletePaidWorkspaceModal:()=>S});var n=t(296540),o=()=>t(484714),r=()=>t(56366),a=()=>t(206267),u=()=>t(762433),i=()=>t(959013),c=()=>t(496603),l=()=>t(252105),d=()=>t(436572),p=()=>t(765957),h=()=>t(749356),f=()=>t(492720),g=()=>t(231127),v=()=>t(156262),y=()=>t(30265),m=t(474848);function S(e){let{isOpen:s,onClose:t,onConfirmDelete:c,billingData:g,spaceStore:S}=e;const b=(0,o().v3)(),_=(0,u().AI)(g),k="free",[T,x]=n.useState("survey"),[C,O]=n.useState({reasons:[],reasonOther:void 0,reasonOtherTools:void 0}),[I]=n.useState(a().JW()),[D,V]=n.useState(void 0),A=(0,r().K8)((()=>Boolean(null==S?void 0:S.canAdmin())),[S]);(0,n.useEffect)((()=>l().u4(b,{name:"churn_survey",args:{churnType:_,reasons:C.reasons,reasonOther:C.reasonOther,reasonOtherTools:C.reasonOtherTools,stage:T,churnSurveyId:I}})),[b,T,C,I,_]);const B=n.useCallback((()=>{l().u4(b,{name:"churn_survey_close",args:{churnSurveyId:I}}),t()}),[I,b,t]),j=n.useCallback((()=>{B(),c()}),[B,c]);return(0,m.jsx)(y().W,{step:T,isOpen:s,onClose:B,children:(()=>{switch(T){case"survey":return(0,m.jsx)(v().lU,{options:w(),description:(0,m.jsx)(i().sA,{id:"deletePaidWorkspaceFlow.surveyStep.description",defaultMessage:"Let us know why youâ€™re deleting your workspace"}),onSubmit:async e=>{var s,t;l().u4(b,{name:"churn_survey_submitted",args:{newProduct:k,churnType:_,reasons:e.reasons,reasonOther:e.customTextByReason.other??void 0,reasonOtherTools:e.customTextByReason.switching??void 0,stage:T,churnSurveyId:I}}),O((s=>({...s,reasons:e.reasons,reasonOther:e.customTextByReason.other??void 0,reasonOtherTools:e.customTextByReason.switching??void 0})));const n=await h().z6(b,{spaceId:null===(s=p().default.state.currentSpaceStore)||void 0===s?void 0:s.getSpaceId(),offerCampaign:(0,f().p)(b,null===(t=p().default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId())});if(n)return V(n),void x("offer");j()}});case"offer":return D?(0,m.jsx)(v().hL,{currentProduct:_,currentSubscriptionTier:_,offer:D,newProduct:k,secondaryButtonMessage:(0,m.jsx)(i().sA,{id:"churnSurvey.offer.continueDeletingWorkspace.title",defaultMessage:"Continue deleting workspace"}),onSubmit:async e=>{if(e&&D){var s;l().u4(b,{name:"offer_accepted",args:{coupon:D.campaign}});const e=null===(s=p().default.state.currentSpaceStore)||void 0===s?void 0:s.getSpaceId();(0,u().Rz)(g)&&e&&(0,u().qd)({billingData:g,canUpdateBilling:A})&&(await h().VY({environment:b,spaceId:e,offerCampaign:D.campaign,entrypoint:"deleted_space"}),d().D6({label:(0,m.jsx)(i().sA,{id:"applyCoupon.success",defaultMessage:"Coupon successfully applied"})})),B()}else j()}}):void j()}})()})}function w(){return[...(0,c().k4)([g().V.consolidatingWorkspaces,g().V.missingFeatures,g().V.notUsingEnough,g().V.switching,g().V.tooExpensive,g().V.tooDifficult]),g().V.other]}}}]);