"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[8418],{161165:(e,t,i)=>{i.d(t,{Bq:()=>m,P8:()=>p,tA:()=>f,v1:()=>g});i(296540);var s=()=>i(902006),n=()=>i(676370),a=()=>i(762433),r=()=>i(97065),o=()=>i(166386),u=()=>i(959013),l=()=>i(534177),d=i(474848);const c={ai:{title:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.v2.ai.title.v2",defaultMessage:"Get Notion AI"}),subtitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.ai.description",defaultMessage:"Search, generate, analyze, and chat—right inside Notion"}),fiftyPercentSubtitle:(0,d.jsx)(u().sA,{id:"addOnUpgrade.studentAiOffer.confirmation.description",defaultMessage:"Your personal teaching assistant, code reviewer, brainstorming partner, and more — right in your workspace"})},plus:{title:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.title.plusPlan",defaultMessage:"Upgrade to the Plus plan"}),plusAiTitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.title.plusPlanPlusAi",defaultMessage:"Upgrade to Plus + AI"}),subtitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.oneLiner.v2.plusSubtitle",defaultMessage:"Do more with unlimited charts, files, automations & integrations"}),resurrectionOfferSubtitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.oneLiner.v2.plusResurrectionOfferSubtitle",defaultMessage:"Unlimited content, charts and more. Upgrade to Plus to get 50% off for 3 months."}),lic50Subtitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.oneLiner.lic50.offerSubtitle",defaultMessage:"Unlimited content, charts and more. Upgrade to Plus to get 50% off for 12 months."}),lic25Subtitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.oneLiner.plus.lic25.offerSubtitle",defaultMessage:"Unlimited content, charts and more. Upgrade to Plus to get 25% off for 12 months."})},business:{title:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlan",defaultMessage:"Upgrade to the Business plan"}),aiCoreTitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanAiCoreTitle",defaultMessage:"Get Notion AI and more"}),aiConnectorsTitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanAiConnectorsTitle",defaultMessage:"Get AI Connectors and more"}),researchModeTitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanResearchModeTitle",defaultMessage:"Get Research Mode and more"}),meetingNotesTitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanMeetingNotesTitle",defaultMessage:"Get AI Meeting Notes and more"}),aiForNotionMailTitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanAiForNotionMailTitle",defaultMessage:"Get AI for Notion Mail and more"}),plusAiTitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanPlusAi",defaultMessage:"Upgrade to Business + AI"}),subtitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.oneLiner.v2.business",defaultMessage:"Find answers across tools, build team workflows, and automate with AI"}),lic50Subtitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.oneLiner.lic50.biz.offerSubtitle",defaultMessage:"Unlimited content, charts and more. Upgrade to Business to get 50% off for 12 months."}),lic25Subtitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.oneLiner.plus.lic25.biz.offerSubtitle",defaultMessage:"Unlimited content, charts and more. Upgrade to Business to get 25% off for 12 months."}),aiCoreSubtitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanAiCoreSubtitle",defaultMessage:"Upgrade to the Business plan to access the full suite of Notion AI features"}),aiConnectorsSubtitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanAiConnectorsSubtitle",defaultMessage:"Upgrade to the Business plan to access the full suite of Notion AI features"}),researchModeSubtitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanResearchModeSubtitle",defaultMessage:"Upgrade to the Business plan to access the full suite of Notion AI features"}),meetingNotesSubtitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanMeetingNotesSubtitle",defaultMessage:"Upgrade to the Business plan to access the full suite of Notion AI features"}),aiForNotionMailSubtitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanAiForNotionMailSubtitle",defaultMessage:"Upgrade to the Business plan to access the full suite of Notion AI features"})},enterprise:{title:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.title.enterprise",defaultMessage:"Upgrade to the Enterprise plan"}),plusAiTitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.title.enterprisePlusAi",defaultMessage:"Upgrade to Enterprise + AI"}),subtitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.oneLiner.v2.enterprise",defaultMessage:"Advanced controls & support to run your entire organization"})},enterpriseLimited:{title:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.title.enterpriseLimited",defaultMessage:"Upgrade to the Enterprise Limited plan"}),plusAiTitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.title.enterpriseLimitedPlusAi",defaultMessage:"Upgrade to Enterprise Limited + AI"}),subtitle:(0,d.jsx)(u().sA,{id:"subscriptionUpgradeModal.oneLiner.v2.enterpriseLimited",defaultMessage:"Advanced controls & support to run your entire organization"})}};function p(e){const{product:t,coupon:i,isOnTrialWithAiProduct:a,from:r,may13PackagingChangesEnabled:u}=e;switch(t){case"ai":const e=c.ai.title;return"ai_fifty_percent"===i?{title:e,subtitle:c.ai.fiftyPercentSubtitle}:{title:e,subtitle:c.ai.subtitle};case"sites_custom_hostnames":default:return{};case"plus":const t=a?c.plus.plusAiTitle:c.plus.title;return(0,o().u6)(i)?{title:t,subtitle:c.plus.resurrectionOfferSubtitle}:"lic_50"===i?{title:t,subtitle:c.plus.lic50Subtitle}:"lic_25"===i?{title:t,subtitle:c.plus.lic25Subtitle}:{title:t,subtitle:c.plus.subtitle};case"business":if(r&&u){if((0,l().Xk)(n().zj,r))return{title:c.business.aiCoreTitle,subtitle:c.business.aiCoreSubtitle,featureWithCustomImage:"coreAI"};if((0,l().Xk)(s().My,r))return{title:c.business.aiConnectorsTitle,subtitle:c.business.aiConnectorsSubtitle,featureWithCustomImage:"aiConnectors"};if((0,l().Xk)(n().uv,r))return{title:c.business.researchModeTitle,subtitle:c.business.researchModeSubtitle,featureWithCustomImage:"researchMode"};if((0,l().Xk)(n().CT,r))return{title:c.business.meetingNotesTitle,subtitle:c.business.meetingNotesSubtitle,featureWithCustomImage:"meetingNotes"};if(["mail_app"].includes(r))return{title:c.business.aiForNotionMailTitle,subtitle:c.business.aiForNotionMailSubtitle,featureWithCustomImage:"notionAIForMail"}}const d=a?c.business.plusAiTitle:c.business.title;return"lic_50"===i?{title:d,subtitle:c.business.lic50Subtitle}:"lic_25"===i?{title:d,subtitle:c.business.lic25Subtitle}:{title:d,subtitle:c.business.subtitle};case"enterprise":return{title:a?c.enterprise.plusAiTitle:c.enterprise.title,subtitle:c.enterprise.subtitle};case"enterprise_limited":return{title:a?c.enterpriseLimited.plusAiTitle:c.enterpriseLimited.title,subtitle:c.enterpriseLimited.subtitle}}}function m(e,t){const{subtotal:i,discount:s,balance:n}=e;return i.minus(s).minus(n).plus(t).zeroIfNegative()}function f(e,t){if(!e)return!1;const i=(0,a().q8)(e);return Boolean(t)&&"year"===i}function g(e,t,i){return(0,a().TB)(e)&&t&&(0,r().DH)(t.offer.campaign)&&i===(0,o().i)(t)}},627090:(e,t,i)=>{i.d(t,{AL:()=>m,Cg:()=>b,u7:()=>f});i(16280),i(898992),i(354520),i(672577),i(430670),i(581454),i(737550);var s=()=>i(244641),n=()=>i(496603),a=()=>i(498212),r=()=>i(534177),o=()=>i(720665),u=()=>i(762433),l=()=>i(47273),d=()=>i(952539),c=()=>i(622963),p=()=>i(979340);function m(e){return"trial"!==e.type&&"prorate_without_invoice"!==e.type&&"update_without_proration"!==e.type&&e.immediate.items.some((e=>e.price.unitAmount.amount>0))}function f(e){return"reset_and_invoice"===e.type}function g(e,t,i){var s;const a=(0,l().yw)(i);if(!(0,u().oD)(t))return i;if(!i.trialEnd)return i;if(!a)return i;const r=(null===(s=t.subscription)||void 0===s?void 0:s.items)||[],o=(0,n().$z)(r,u().IE),d=i.items,c=(0,n().$z)(d,u().IE),p=(0,n().sb)([...Object.keys(c),...Object.keys(o)]).flatMap((e=>"plan"===e?o[e]??[]:c[e]??[])).map((i=>(0,u().HY)(t)?function(e,t,i){const s=T(e,t.price,i);return{...t,price:s}}(e,i,a):i));return{items:p,trialEnd:void 0}}function b(e,t,i,n,r,o){const l=function(e,t,i,n,r,o){var l;if(!(0,u().oD)(t))return;const d=t.trial;if(d&&!i.trialEnd)return;const c=(0,u().KH)({subscription:i,trial:void 0,clock:void 0},"plan"),p=(0,u().KH)({subscription:void 0,trial:d,clock:void 0},"plan"),m=y(p,c)?c:p;if(!m)return;const f=(0,u().i5)(t)??i.trialEnd,g=(null===(l=t.trial)||void 0===l?void 0:l.startDate)??s().c9.now(),b=A(t.subscription,n),h=x([p,m],b);return f?{externalId:(null==d?void 0:d.externalId)??(0,a().Ay)(),endDate:f,startDate:g,items:[{...m,quantity:h}]}:void 0}(0,t,i,n);return{trial:l,subscription:h(e,t,g(e,t,i),n,r,o)}}function h(e,t,i,s,a,o){const m=(0,u().PP)(t),f=(0,d().qX)(t),g=o??function(e,t){const i=v(e,t),s=function(e,t){const i=Boolean(e.trialEnd),s=v(e,t);if(i&&!s)return!0;const n=(0,l().yw)(e),a=(0,l().yw)(t);if("month"===n&&"year"===a)return!0;if("year"===n&&"month"===a)return!1;const r=e.items.find((e=>(0,u().xp)(e))),o=t.items.find((e=>(0,u().xp)(e))),d=y(r,o),c=o&&0===o.price.unitAmount.amount;if(d&&!c)return!0;if(e.trialEnd&&S(e,t))return!0;return!1}(e,t),n=function(e,t){const i=(0,l().yw)(e),s=(0,l().yw)(t);if("month"===i&&"year"===s)return!0;const n=(0,u().HO)(e.items,t.items);return n.some((e=>{let[t,i]=e;const s=!t&&i,n=y(t,i),a=I(t,i)>0,r=i&&i.price.unitAmount.amount>0;return(s||n||a)&&r}))}(e,t);return i?"trial":s?"reset_and_invoice":n?"prorate_and_invoice":"prorate_without_invoice"}(m,i);if("reset_and_invoice"===g)return{type:"reset_and_invoice",immediate:{items:i.items.filter((e=>C(i,e))).map((e=>({...e,quantity:M(s,(0,c().vK)(e.price.product))})))},dunningCancellationTime:f};const b=function(e,t,i,s,n,a){const o=(0,l().yw)(i),d=(0,l().yw)(s);let m;m="trial"!==t&&"year"===o?"year":d??o;const f=(0,u().HO)(i.items,s.items),g=f.some((e=>{let[t,i]=e;const s=(0,u().xp)(t),n=(0,u().xp)(i);return s&&n&&!(0,p().rV)(s,"business")&&(0,p().rV)(n,"business")})),b=A(i,n);return f.map((t=>{const i=x(t,b),o=function(e,t,i,s){let n,[a,r]=s;if("ai"===(null==a?void 0:a.price.product)&&t)return;n=r&&y(a,r)?r.price:(a??r).price;return T(e,n,i)}(e,g,m,t),[u,l]=t,d=function(e,t){let[i,s]=e;const n=(0,c().vK)((i??s).price.product);return M(t,n)}(t,n),p=function(e,t,i,s){let{}=s;if(!i)return;if(!C(t,i))return;const n=i.price;if(c().As.includes(n.externalId))return function(e,t){const i=e.find((e=>e.product===t.product&&e.unitAmount.currencyCode===t.unitAmount.currencyCode&&e.billingInterval===t.billingInterval));if(!i)throw new Error(`Cannot find current PriceData for stripe price id: ${t.externalId}`);return i}(e,n);return n}(e,s,l,a);return{immediate:o?{price:o,quantity:i}:void 0,pending:(0,r().O9)(p)&&(0,r().O9)(d)&&d>0?{price:p,quantity:d}:void 0}}))}(e,g,m,i,s,a),h={items:(0,n().oE)(b.map((e=>e.immediate)))},U={items:(0,n().oE)(b.map((e=>e.pending)))},j=i.trialEnd??m.trialEnd;if("trial"===g){if(!j)throw new Error("cannot have trial without trialEnd");return{type:"trial",trialEnd:j,immediate:h,pending:U,dunningCancellationTime:f}}return{type:g,immediate:h,pending:U,dunningCancellationTime:f}}function v(e,t){const i=e.items.find((e=>(0,u().xp)(e))),s=y(i,t.items.find((e=>(0,u().xp)(e)))),n=i&&s||S(e,t);return Boolean(t.trialEnd||e.trialEnd)&&!n}function A(e,t){const i=U((null==e?void 0:e.items)??[],"seats"),s=U((null==e?void 0:e.items)??[],"public_domain_custom_hostnames");return{seats:{actual:t.numSeats,billed:i},public_domain_custom_hostnames:{actual:t.numCustomHostnames,billed:s}}}function M(e,t){switch(t){case"seats":return e.numSeats;case"public_domain_custom_hostnames":return e.numCustomHostnames;default:(0,r().HB)(t)}}function x(e,t){let[i,s]=e;const n=(0,c().vK)((i??s).price.product),{actual:a,billed:r}=t[n];return Math.max(a,r??0)}function y(e,t){const i=(0,u().xp)(e)??"free",s=(0,u().xp)(t);return!!s&&p().o3[i]<p().o3[s]}function S(e,t){var i;const s=e.items.find((e=>"sites_custom_hostnames"===(0,u().IE)(e))),n=t.items.find((e=>"sites_custom_hostnames"===(0,u().IE)(e))),a=null===(i=n??s)||void 0===i?void 0:i.price;return!(!a||0===a.unitAmount.amount)&&I(s,n)>0}function I(e,t){return null!=e&&e.price.product&&"seats"===(0,c().vK)(null==e?void 0:e.price.product)||null!=t&&t.price.product&&"seats"===(0,c().vK)(null==t?void 0:t.price.product)?0:((null==t?void 0:t.quantity)??0)-((null==e?void 0:e.quantity)??0)}function T(e,t,i){if(t.billingInterval===i)return t;const s=e.find((e=>e.product===t.product&&e.unitAmount.currencyCode===t.unitAmount.currencyCode&&e.billingInterval===i));if(!s)throw new Error(`Cannot find PriceData for stripe price id: ${t.externalId} at interval ${i}`);return s}function U(e,t){return(0,o().Z$)(e.filter((e=>(0,c().vK)(e.price.product)===t)).map((e=>e.quantity)),"A subscription should have a consistent quantity across all its items.")}function C(e,t){if("sites_custom_hostnames"!==(0,u().IE)(t))return!0;const i=e.items.find((e=>(0,u().xp)(e)));return(0,p().y4)((0,u().xp)(i))}},815418:(e,t,i)=>{i.d(t,{Dd:()=>T,F3:()=>j,Fy:()=>C,Vq:()=>U,cP:()=>S,eO:()=>_,vF:()=>I});i(898992),i(581454),i(908872);var s=i(296540),n=()=>i(662303),a=()=>i(484714),r=()=>i(56366),o=()=>i(869190),u=()=>i(762433),l=()=>i(47273),d=()=>i(323063),c=()=>i(627090),p=()=>i(643819),m=()=>i(979340),f=()=>i(959013),g=()=>i(496603),b=()=>i(449506),h=()=>i(240865),v=()=>i(224701),A=()=>i(601203),M=()=>i(807778),x=()=>i(644837),y=i(474848);function S(e){var t;let{desiredProducts:i,desiredInterval:n,billingData:a,prices:o}=e;const c=(0,u().Ry)(a)??"USD",p=(0,s.useMemo)((()=>(0,u().lQ)(a)),[a]),f=(0,h().V)()??1,b=(null===(t=(0,u().KH)(a,"sites_custom_hostnames"))||void 0===t?void 0:t.quantity)??0,v=(0,s.useMemo)((()=>({numSeats:f,numCustomHostnames:b})),[f,b]),A=(0,r().K8)((()=>(0,M().Le)()),[]),x=(0,s.useMemo)((()=>(0,d().ef)({state:p,prices:o,quantities:v,params:{currency:c,interval:n},products:i,flags:{isMay13PackagingChangesEnabled:A}})),[p,o,v,c,n,i,A]),y=(0,l().Gf)(x),S=(0,u().AW)(a),I="upgrade"===(0,m().qR)({oldTier:S,newTier:y});(0,u().TB)(a)&&(0,u().HY)(a)&&!I&&(x.trialEnd=(0,u().i5)(a));const T=(0,s.useMemo)((()=>(0,g().Lc)(x.items,p.items,"price.externalId")),[x.items,p]);return{desiredState:x,quantities:v,newItems:T}}function I(e){const{spaceStore:t,quantities:i,desiredState:n,currencyCode:o,couponOffer:u}=e,l=(0,r().K8)((()=>t.id),[t]),d=(0,a().v3)(),[c,m]=(0,s.useState)(),[f,g]=(0,s.useState)(),[h,v]=(0,s.useState)(!1),[A,M]=(0,s.useState)(),[x,y]=(0,s.useState)(),[S,I]=(0,s.useState)();let T;return(0,s.useEffect)((()=>{!async function(){var e;v(!0);const t=await b().callApi({eventName:"getImmediateUpdateCost",environment:d,data:{spaceId:l,quantities:i,desiredState:{items:(null==n?void 0:n.items.map((e=>({id:e.id,quantity:e.quantity,priceData:{external_id:e.price.externalId,product:e.price.product,billing_interval:e.price.billingInterval,currency:e.price.unitAmount.currencyCode,unit_amount:e.price.unitAmount.amount,state:e.price.state}}))))||[],trialEnd:null===(e=n.trialEnd)||void 0===e?void 0:e.toString()},couponCampaign:null==u?void 0:u.campaign}});if(v(!1),"success"!==t.type)return;m(p().W.fromValue(t.data.total)),g(t.data.lineItems);const s=t.data.couponApplicationResult;s&&(M(p().W.fromValue(s.amountDuePreCoupon)),y(p().W.fromValue(s.amountDuePostCoupon)),I(s.couponResultLineItems))}()}),[d,null==n?void 0:n.items,i,l,null==n?void 0:n.trialEnd,u]),u&&A&&x&&S&&(T={amountDuePreCoupon:A,amountDuePostCoupon:x,couponResultLineItems:S,couponOffer:u}),{subtotal:c??new(p().W)(o,0),lineItems:f,isLoading:h,couponApplicationResult:T}}function T(e,t,i){return((null==t?void 0:t.items)??[]).reduce(((e,t)=>{const s=(0,u().q5)(t.price);return e.plus(s.getCostPerBillingInterval({quantity:t.quantity,offer:i}))}),new(p().W)(e,0))}function U(e){let{change:t,interval:i,currentPeriodEnd:s,now:n}=e;return(0,c().u7)(t)&&i?n.plus({months:"month"===i?1:12}):s}function C(e){let{environment:t,currencyCode:i,address:n,lineItems:a,taxableAmount:r,billingData:o}=e;const[u,l]=(0,s.useState)(0),[d,c]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{!async function(){if(!n||0===a.length||0===r.amount)return;c(!0);const e=await(0,A().qu)({environment:t,taxableAmount:r,lineItems:a,address:n,billingData:o});l(e??0),c(!1)}()}),[t,r,a,n,o]),{tax:new(p().W)(i,u),isLoading:d}}async function j(e){let{environment:t,spaceStore:i,desiredState:s,stripe:n,coupon:a,intl:r,postUpgradeCallback:o}=e;try{const e=await v().nV({environment:t,from:x().A.state.open?x().A.state.analyticsArgs.from:"midterm_checkout_modal",spaceStore:i,desiredState:s,inAppOffer:a,postUpgradeCallback:o});await v().XO({paymentIntentData:e,stripe:n,onSuccess:()=>v().o2({environment:t,spaceStore:i})})}catch{return{error:r.formatMessage({id:"spaceSubscriptionUpgradeModal.payment.genericError",defaultMessage:"Your payment could not be processed. Please try again."})}}}function _(e){let{interval:t,effectiveDate:i}=e;return{title:(0,y.jsx)(f().sA,{id:"midtermIntervalChange.title",defaultMessage:"Switch to {interval, select, month {monthly} other {annual}} billing",values:{interval:t}}),subtitle:i?(0,y.jsx)(f().sA,{id:"midtermIntervalChange.subtitle.nextPeriod",defaultMessage:"Effective {periodEnd}",values:{periodEnd:(0,o().eV)({value:i,preset:"medium",locale:n().locale})}}):(0,y.jsx)(f().sA,{id:"spaceSubscriptionUpgradeModal.effectiveToday.header",defaultMessage:"Effective today"})}}},997929:(e,t,i)=>{i.d(t,{J:()=>M});i(296540);var s=()=>i(662303),n=()=>i(484714),a=()=>i(401497),r=()=>i(869190),o=()=>i(643819),u=()=>i(786508),l=()=>i(959013),d=()=>i(252105),c=()=>i(84817),p=()=>i(802790),m=()=>i(710149),f=()=>i(554509),g=()=>i(208993),b=()=>i(517492),h=()=>i(960389),v=()=>i(161165),A=i(474848);function M(e){let{immediate:t,recurring:i,nextBillingDate:s,accountBalance:r,items:m,chargeType:g={chargeType:"immediate"},modalId:b,isExpanded:M,setIsExpanded:y,couponApplicationResult:S,removeContainerPadding:I}=e;const T=(0,n().v3)(),U=(0,a().IS)((e=>({summaryContainer:{background:e.surface.wash,padding:16,borderRadius:8}})),[]),C=t.subtotal.plus(t.tax),j=new(o().W)(i.subtotal.currencyCode,0),_=(0,v().Bq)({subtotal:i.subtotal,discount:j,balance:r},i.tax),w=0!==_.amount&&0!==C.amount&&_.amount!==C.amount,[P,E,B]="immediate"===g.chargeType?[C,t.subtotal,t.tax]:[_,i.subtotal,i.tax];return(0,A.jsxs)(c().Y1,{gap:8,style:U.summaryContainer,children:[(0,A.jsx)(h().BB,{useNewStyle:!0,isTotalLoading:t.isLoading,total:P,originalSubtotal:E,tax:B,coupon:(0,u().RS)(null==S?void 0:S.couponOffer),couponApplicationResult:S,handleToggleExpanded:()=>{M?d().CK(T,{modalId:b}):d().wJ(T,{modalId:b}),y(!M)},isExpanded:M,discount:j,accountBalance:r,subtitle:"immediate"===g.chargeType?(0,A.jsx)(x,{recurringTotal:_,periodEnd:s,isNextBillDifferent:w,isLoading:i.isLoading||t.isLoading}):null,removeContainerPadding:I,...g}),(0,A.jsx)(h()._z,{isExpanded:M,children:(0,A.jsxs)(c().Y1,{gap:8,children:[w?(0,A.jsx)(f().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,A.jsx)(l().sA,{id:"checkout.orderSummary.title",defaultMessage:"Prorated charge"})}):null,(0,A.jsxs)(c().Y1,{gap:12,children:[(0,A.jsx)(h().f5,{items:m,showMonthlyPricing:!1}),(0,A.jsx)(p().A,{size:1}),(0,A.jsx)(h().Qs,{subtotal:E,subtotalText:w?(0,A.jsx)(l().sA,{id:"checkout.orderSummary.subtotalProrated",defaultMessage:"Subtotal (prorated)"}):void 0,discount:j,showDiscountLine:!1,accountBalance:r,tax:B})]})]})})]})}function x(e){let{recurringTotal:t,periodEnd:i,isLoading:n,isNextBillDifferent:a}=e;return n?(0,A.jsx)(m().A,{style:{width:180,height:16,borderRadius:4}}):a?(0,A.jsxs)(c().Y1,{direction:"horizontal",gap:4,align:"center-left",children:[(0,A.jsx)(l().sA,{id:"checkout.orderSummary.estimatedBill",defaultMessage:"Estimated next bill: {price}",values:{price:(0,A.jsx)(b().v,{cost:t,trailingZeroDisplay:"stripIfInteger"})}}),(0,A.jsx)(g().W,{tooltipTitle:(0,A.jsx)(l().sA,{id:"checkout.orderSummary.estimatedBillTooltip",defaultMessage:"This is an estimate of your next charge on {date}. If you add/remove members, this amount might change",values:{date:(0,r().eV)({value:i,preset:"medium",locale:s().locale})}}),tooltipDescription:(0,A.jsx)(l().sA,{id:"checkout.orderSummary.estimatedBillTooltipDescription",defaultMessage:"Click to learn more about billing"}),buttonProps:{href:"https://www.notion.com/help/billing-and-payment-info",external:!0},tooltipWidth:240})]}):null}}}]);