"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[56989],{202777:(e,t,a)=>{a.r(t),a.d(t,{UpgradeRequestFormModal:()=>_,UpgradeRequestFormModalWithData:()=>B});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(484714),r=()=>a(56366),i=()=>a(401497),o=()=>a(246760),d=()=>a(898615),l=()=>a(979340),u=()=>a(959013),c=()=>a(436572),p=()=>a(2220),m=()=>a(84817),h=()=>a(623580),g=()=>a(7674),f=()=>a(460292),y=()=>a(554509),x=()=>a(107683),v=()=>a(73332),w=()=>a(859428),b=()=>a(994006),q=()=>a(21140),S=()=>a(2609),j=()=>a(602105),M=()=>a(962730),R=()=>a(896678),k=()=>a(486115),C=()=>a(398304),I=a(474848);function _(e){const{spaceStore:t}=e,{open:a,...s}=(0,r().O$)(C().Q),{status:n,workspaceOwners:i}=(0,k().P)({spaceStore:t,skip:!a});return"feature"in s&&t&&"pending"!==n?(0,I.jsx)(B,{spaceStore:t,workspaceOwners:i,onDismiss:()=>C().Q.update((e=>({open:!1}))),...s}):null}function B(e){const t=(0,u().tz)(),[a,n]=s.useState(e.workspaceOwners.map((e=>e.id)));return(0,I.jsx)(x().s,{ariaLabel:t.formatMessage({id:"highlightPlanRequestButton.modal.ariaLabel",defaultMessage:"Upgrade plan request modal"}),isOpen:!0,onDismiss:e.onDismiss,areaConstraint:{width:{type:"min",length:400},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,I.jsx)(N,{...e,checkedState:a,setCheckedState:n})})}function N(e){let{feature:t,onDismiss:a,setRequestState:r,spaceStore:x,userId:k,workspaceOwners:C,checkedState:_,setCheckedState:B,entrypoint:N}=e;const P=(0,u().tz)(),T=(0,n().v3)(),[D,A]=s.useState(""),U=(0,i().IS)((e=>({outlineIcon:{height:30,width:30,color:e.text.secondary},input:{padding:"10px 8px",width:"100%",height:36,background:e.surface.wash,borderRadius:6},modalHeaderIcon:{marginBottom:4},modalHeaderTitle:{padding:"0 8px"},modalHeaderByline:{padding:"0 40px"},usersContainer:{padding:"16px 0 16px 16px",borderRadius:j().V.medium,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary},learnMoreTooltip:{width:240,whiteSpace:"normal"}})),[]);return(0,I.jsx)(g().tf,{showDismissButton:!0,header:(0,I.jsx)(S().rQ,{icon:(0,I.jsx)("div",{style:U.modalHeaderIcon,children:(0,d().F)(U.outlineIcon)}),title:(0,I.jsx)("div",{style:U.modalHeaderTitle,children:P.formatMessage({id:"highlightPlanRequestButton.modal.title",defaultMessage:"Request an upgrade to use {feature}"},{feature:l().v0[t].defaultMessage})}),byline:(0,I.jsx)("div",{style:U.modalHeaderByline,children:P.formatMessage({id:"highlightPlanRequestButton.modal.subtitle",defaultMessage:"Let your workspace owners know that you're interested in this feature"})})}),footer:(0,I.jsx)(S().jl,{primaryText:P.formatMessage({id:"highlightPlanRequestButton.modal.submitButton",defaultMessage:"Submit request"}),primaryAction:()=>{(0,R()._)({feature:t,spaceId:x.id,userId:k,environment:T,entrypoint:N,setRequestState:r,reasonForRequest:D,adminsToNotify:_}),(0,p().u)({environment:T,event:{eventName:"upgrade_request_submitted",eventProperties:{feature:t,entrypoint:N,number_admins_notified:_.length,added_note:D.length>0}}}),c().D6({label:P.formatMessage({id:"RequestUpgradeForm.modal.submitted.toast.label",defaultMessage:"Successfully sent request"})}),a()},secondaryText:P.formatMessage({id:"highlightPlanRequestButton.modal.cancelButton",defaultMessage:"Cancel"}),secondaryAction:()=>{(0,p().u)({environment:T,event:{eventName:"upgrade_request_canceled",eventProperties:{feature:t,entrypoint:N}}}),a()}}),children:(0,I.jsxs)(m().Y1,{gap:24,padding:2,children:[(0,I.jsxs)(m().Y1,{gap:8,children:[(0,I.jsxs)(m().Y1,{gap:4,direction:"horizontal",children:[(0,I.jsx)(y().D,{styleName:"Caption-12px/Medium",colorName:"secondary",children:P.formatMessage({id:"highlightPlanRequestButton.modal.selectWorkspaceOwners",defaultMessage:"Select who to notify"})}),(0,I.jsx)(w().A,{style:U.learnMoreTooltip,placement:M().W.Right,renderTooltip:()=>(0,I.jsx)(q().wt,{gap:2,children:(0,I.jsx)(y().D,{styleName:"UISmall-12px/Medium",children:P.formatMessage({id:"highlightPlanRequestButton.modal.notifyTooltip",defaultMessage:"Select who will receive an inbox notification for your request. Every workspace owner will be able to see all requests via the Requests tab in Settings."})})}),render:e=>(0,I.jsx)("div",{...e,children:(0,I.jsx)(f().Q,{iconGroup:o().G,variantName:"small",colorName:"tertiary"})})})]}),(0,I.jsx)("div",{style:U.usersContainer,children:C.length>0&&(0,I.jsx)(q().wt,{gap:16,style:{width:"100%",maxHeight:128,overflowY:"auto"},children:C.map((e=>(0,I.jsxs)(q().Ye,{gap:8,style:{alignItems:"center",justifyContent:"flex-start"},children:[(0,I.jsx)(v().T,{size:14,checked:_.includes(e.id),onClick:()=>{B((t=>t.includes(e.id)?t.filter((t=>t!==e.id)):[...t,e.id]))},style:{marginRight:8}},`check-${e.id}`),(0,I.jsx)(y().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,I.jsx)(b().A,{avatarSize:32,userStore:e})})]},e.id)))})})]}),(0,I.jsxs)(m().Y1,{gap:8,direction:"vertical",style:{paddingBottom:8},children:[(0,I.jsx)(y().D,{styleName:"Caption-12px/Medium",colorName:"secondary",children:P.formatMessage({id:"highlightPlanRequestButton.modal.noteLabel",defaultMessage:"Add a note (optional)"})}),(0,I.jsx)(h().A,{style:U.input,value:D,focusInitial:!0,onChange:e=>{A(e.target.value)}})]})]})})}},486115:(e,t,a)=>{a.d(t,{P:()=>p});a(898992),a(354520),a(581454);var s=()=>a(484714),n=()=>a(56366),r=()=>a(187174),i=()=>a(68263),o=()=>a(449506),d=()=>a(384100),l=()=>a(21735),u=()=>a(134217),c=()=>a(749240);function p(e){const{spaceStore:t,skip:a=!1}=e,p=(0,s().v3)(),m=(0,n().O$)(c().subscriptionDataStoreInstance),[{status:h,value:g}]=(0,r().Yb)((async()=>{const e=null==t?void 0:t.id;if(!a&&e){if(l().A.state.shouldUseEdgeCache){const e=await o().callApi({eventName:"listUsers",environment:p,data:{cursor:void 0,membershipFilter:"owners",limit:1e3,query:"",spaceId:t.id}});return"success"===e.type?e.data.users.map((e=>e.id)):[]}if(!m)return[];return(0,u().Be)(m).filter((e=>(0,i().Km)(e.role))).map((e=>e.userId))}}),[p,t,a,m]);return{status:h,workspaceOwners:(0,n().K8)((()=>!a&&g&&t?g.map((e=>(0,d().z5)({userId:e,currentSpaceStore:t}))):[]),[g,t,a])}}},896678:(e,t,a)=>{a.d(t,{_:()=>l});var s=()=>a(232802),n=()=>a(798880),r=()=>a(498212),i=()=>a(246826),o=()=>a(751156),d=()=>a(765957);function l(e){var t;const{feature:a,spaceId:l,userId:u,environment:c,entrypoint:p,setRequestState:m,reasonForRequest:h,adminsToNotify:g}=e,f=null===(t=d().default.state.currentSpaceViewStore)||void 0===t?void 0:t.id;f&&l&&u&&(o().createAndCommit({userAction:`UpgradeRequestModal.${a}.onClick`,environment:c,canUndo:!0,perform:e=>{i().vt({environment:c,table:s().GU,args:{id:(0,r().Ay)(),space_id:l,request:a,createdByPointer:{id:u,table:n().oo},parentPointer:{id:f,table:"space_view"},entrypoint:p,reason_for_request:h,request_status:"pending",admins_to_notify:g},transaction:e,inMemoryRecordCache:c.defaultRecordCache.inMemoryRecordCache})}}),m&&m("pending"))}}}]);