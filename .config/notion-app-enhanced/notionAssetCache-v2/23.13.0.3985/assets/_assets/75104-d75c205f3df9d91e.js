"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[75104],{205809:(e,t,i)=>{i.d(t,{A:()=>M});i(296540);var n=()=>i(484714),o=()=>i(56366),s=()=>i(401497),r=()=>i(584262),a=()=>i(859384),l=()=>i(340498),d=()=>i(116225),c=()=>i(959013),u=()=>i(874913),p=()=>i(285790),g=()=>i(35392),h=()=>i(859428),f=()=>i(47373),m=()=>i(728611),b=()=>i(492414),v=()=>i(640653),y=()=>i(963589),S=()=>i(962730),x=()=>i(765957),I=()=>i(551694),w=()=>i(869562),j=i(474848);function M(e){let{from:t,onClick:i,iconStyle:M}=e;const k=(0,n().v3)(),A=(0,c().tz)(),B=(0,o().O$)(x().AppStoreCurrentSpaceStore),C=(0,o().K8)((()=>x().default.state.currentUserRootStore),[]),_=(0,o().K8)((()=>(0,v().IL)(B)),[B]),P=(0,o().K8)((()=>(0,f().i3)({environment:k,spaceStore:B,userRootStore:C})),[k,B,C]),T=(0,y().X)("sidebar_add_new_pages_to_bottom"),L=(0,s().IS)((e=>({shortcutLabel:{color:e.text.contrastSecondary},button:{width:28,height:28,borderRadius:4},icon:{width:l().Ev.lg,height:l().Ev.lg,fill:e.text.primary,...M},iconDisabled:{opacity:.4},hovered:{background:e.sidebarItemSelectedBackground}})),[M]);return _?"sidebar_new_page_button"===t&&P?(0,j.jsx)(p().A,{icon:a().M,ariaLabel:A.formatMessage(w().newPageMessages.label),onClick:e=>{I().A.open()},style:L.button,iconStyle:{...L.icon,...L.iconDisabled}}):null:(0,j.jsx)(h().A,{renderTooltip:()=>(0,j.jsxs)(j.Fragment,{children:[A.formatMessage(w().newPageMessages.tooltip),k.device.isNative&&(0,j.jsx)("div",{children:(0,j.jsx)(g().A,{style:L.shortcutLabel,name:"newPage"})})]}),originGap:6,placement:S().W.Right,render:e=>(0,j.jsx)(p().A,{...e,icon:a().M,ariaLabel:A.formatMessage(w().newPageMessages.label),onClick:async e=>{if(B){const i=k.device.isElectron&&m().Vr(e),n=await w().quickAddPage({environment:k,from:t,event:e,navigateOnCreate:!i,prependPrivatePage:!T});if(i&&n){const e=(0,b().Ay)({store:n,pageVisitSource:r().y8.SidebarQuickAdd});u().openNotionUrl({makeTabActive:!0,url:e,position:"end",openInNew:i,isNewPage:!0,environment:k})}"sidebar_private_pane"===t&&d().u4({name:"page_created",args:{type:"private",from:"secondary_sidebar"}})}i&&i()},style:L.button,iconStyle:L.icon,hoveredStyle:L.hovered})})}},575104:(e,t,i)=>{i.d(t,{QH:()=>F,z_:()=>E,Ay:()=>G});i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698),i(898992),i(803949);var n=i(296540),o=()=>i(484714),s=()=>i(56366),r=()=>i(401497),a=()=>i(175947),l=()=>i(959013),d=()=>i(899963),c=()=>i(496414),u=()=>i(664713),p=()=>i(406699),g=()=>i(780054),h=()=>i(37433),f=()=>i(765957),m=()=>i(999830),b=()=>i(263928),v=()=>i(320460),y=()=>i(214006),S=(i(354520),i(581454),()=>i(187174)),x=()=>i(763824),I=()=>i(534177),w=()=>i(449506),j=()=>i(640653),M=()=>i(646736);var k=()=>i(66913),A=()=>i(553034),B=()=>i(381349),C=()=>i(284371),_=()=>i(285790),P=()=>i(864943),T=()=>i(897119),L=()=>i(962730),K=()=>i(377586),O=()=>i(404141),R=i(474848);const U=(0,l().YK)({offlineIcon:{id:"offlineIndicator.icon",defaultMessage:"No internet connection"},closeIcon:{id:"offlineIndicator.popup.closeIcon",defaultMessage:"Close"}});function W(){const[e,t]=(0,n.useState)(!1),i=(0,l().tz)(),o=(0,B().O4)({theme:"dark"}),a=(0,r().IS)((e=>({iconButton:{width:28,height:28},icon:{width:22,height:22,fill:e.text.primary},iconHover:{background:e.sidebarItemSelectedBackground},popup:{background:e.tooltipBackground,color:e.text.contrastPrimary,width:280,padding:12,fontSize:14},title:{fontWeight:C().Wy.medium},subtitle:{color:e.text.secondary},closeButton:{width:24,height:24,position:"absolute",right:8,top:8},closeIcon:{width:14,height:14,fill:o.palette.translucentGray[800]},closeHovered:{background:o.state.hover},closePressed:{background:o.state.pressed},settingsButtonContainer:{display:"flex",justifyContent:"end",paddingTop:10},settingsButton:{border:`1px solid ${o.outlineButtonBorder}`},settingsHover:{background:o.state.hover},settingsPressed:{background:o.state.pressed}})),[o]),d=(0,n.useCallback)((()=>t(!e)),[e]),c=(0,n.useCallback)((()=>t(!1)),[]),u=(0,s().K8)((()=>(0,R.jsx)(_().A,{icon:A().C,ariaLabel:i.formatMessage(U.offlineIcon),onClick:d,style:a.iconButton,iconStyle:a.icon,hoveredStyle:a.iconHover})),[i,d,a]);return(0,R.jsx)(T().Ay,{origin:u,originGap:2,open:e,onClosed:c,onDismiss:c,popupType:K().n.Popup,placementToOrigin:L().W.Bottom,alignmentToOrigin:L().C.Start,popupWrapStyle:a.popup,render:()=>(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{style:a.title,children:(0,R.jsx)(l().sA,{id:"offlineIndicator.popup.title",defaultMessage:"No internet connection"})}),(0,R.jsx)(_().A,{ariaLabel:i.formatMessage(U.closeIcon),icon:()=>(0,k().V)(a.closeIcon),style:a.closeButton,hoveredStyle:a.closeHovered,pressedStyle:a.closePressed,onClick:c}),(0,R.jsx)("div",{style:a.subtitle,children:(0,R.jsx)(l().sA,{id:"offlineIndicator.popup.subtitle",defaultMessage:"Return online for full access, or manage your offline settings."})}),(0,R.jsx)("div",{style:a.settingsButtonContainer,children:(0,R.jsx)(P().A,{style:a.settingsButton,hoveredStyle:a.settingsHover,pressedStyle:a.settingsPressed,size:"sm",onClick:()=>{O().A.setState({open:!0,openedFrom:"sidebar_offline_indicator",currentTab:"offline",defaultSubtab:void 0,highlightedSetting:void 0}),c()},children:(0,R.jsx)(l().sA,{id:"offlineIndicator.popup.manageOfflinePagesButton",defaultMessage:"Manage offline pages"})})})]}),trapFocus:!0})}let E=function(e){return e[e.Regular=0]="Regular",e[e.DesktopMac=1]="DesktopMac",e[e.Mobile=2]="Mobile",e}({});const F=300,N={[E.Regular]:a().$C-8,[E.DesktopMac]:a().Uu,[E.Mobile]:"auto"},H={display:"flex",alignItems:"center",minWidth:0,height:"100%",width:"100%"},z=i(757695).Store.createClass(!1,{name:"SidebarSwitcherIsHoveredStore"});const G=function(e){let{shouldShowUnexpandButton:t,shouldShowCreatePageButton:a,disabled:k,format:A,buttonStyle:B,redirectURL:C,disableLoginLink:_,onSpaceClick:P,hideEmail:T,shouldShowCreateOrJoinWorkspaceButtonInFooter:L=!1}=e;const K=(0,o().v3)(),O=(0,s().uB)(void 0,z),U=(0,s().uB)(void 0,i(791627).A),E=(0,s().uB)(void 0,i(20489).A),{isTablet:G}=(0,o().Y0)(),{currentSpaceStore:V,currentUserStore:$}=(0,s().K8)((()=>{const{currentSpaceStore:e,currentUserStore:t}=f().default.state;return{currentSpaceStore:e,currentUserStore:t}}),[]),Q=(0,s().K8)((()=>{const{mainEditorCurrentBlockStore:e}=f().default.state;return null==e?void 0:e.getSpaceStore()}),[]),q=K.currentUser.loggedInUserIds,J=(0,s().K8)((()=>{if(!T)return q.length>1?null==$?void 0:$.getEmail():void 0}),[q,$,T]),Y=(0,s().O$)(O),X=(0,s().K8)((()=>i(846955).default.isTutorialStepActive("create_page_sidebar")&&a),[a]),{organizationsInfo:Z}=(0,i(926938).q)(),{spaceInfo:ee}=function(e){const{userId:t}=e,i=(0,o().v3)(),n=(0,s().K8)((()=>t?y().A.getSpaceViewStores(i,t):[]),[i,t]),r=(0,s().K8)((()=>n.map((e=>e.getSpaceStore())).filter(I().O9)),[n]),a=(0,s().K8)((()=>t?r.map((e=>{const i=(0,M().dp)(e,t).isWorkspaceOwner(),n="enterprise"===e.getSubscriptionTier();if(i&&n)return e})).filter(I().O9):[]),[r,t]),[{value:l,status:d}]=(0,S().Yb)((async()=>(await(0,x().lX)(a,10,(e=>{const t=e.id;return w().callApi({eventName:"getOrganizationOnboardingInfo",environment:i,data:{spaceId:t}}).then((n=>{if("success"===n.type)return"ineligible"===n.data.result.onboardingStatus||"completed"===n.data.result.onboardingStatus?void 0:{spaceId:t,spaceName:(0,j().GK)(i,e)}}))}))).filter(I().O9)),[i,a]);return{spaceInfo:l??[],isLoading:"resolved"!==d}}({userId:K.currentUser.id}),te=(0,n.useMemo)((()=>({organizationsInfo:Z,spaceInfo:ee})),[Z,ee]),ie=(0,s().uB)(void 0,i(986229).A),ne=(0,s().K8)((()=>ie.state.modalOpen),[ie]),oe=(0,i(722038).y)(),se=(0,s().O$)(i(227440).e),re=(0,r().IS)((e=>({popup:{...g().A.isMobile?{}:{width:F,overflow:"hidden"}},button:{...H,height:N[A],marginLeft:4,marginRight:4,marginTop:g().A.isMobile?0:4,width:"calc(100% - 8px)",borderRadius:4,marginBottom:J?g().A.isMobile?0:8:0,padding:0,...B},spaceName:{marginLeft:0},hoveredStyle:{background:e.sidebarItemSelectedBackground},unexpand:{borderRadius:4,width:28,height:28,marginRight:4},unexpandHover:{fill:e.text.primary,background:e.sidebarItemSelectedBackground},rightButtonsContainer:{display:"flex",alignItems:"center",height:"100%",marginLeft:"auto",marginRight:0},rightButtons:{alignItems:"center",display:"inline-flex",marginRight:2,gap:2}})),[J,B,A]),ae=async()=>i(869562).quickAddPage({environment:K,from:"home_checklist"}),le=(0,n.useCallback)((()=>{const e=(0,l().YK)({invitingMembers:{id:"sidebarSwitcherMultiAccount.inviteMember.loadingMessage",defaultMessage:"Updatingâ€¦"}});c().m({message:e.invitingMembers})}),[]),de=(0,n.useCallback)(((e,t)=>{c().V();const n=e?(0,R.jsx)(l().sA,{id:"sidebarSwitcherMultiAccount.inviteMember.successToastMessage",defaultMessage:"Successfully sent"}):(0,R.jsx)(l().sA,{id:"sidebarSwitcherMultiAccount.inviteMember.failureToastMessage",defaultMessage:"Failed to send invites"});i(436572).D6({label:n})}),[]),ce=V||Q;if(!ce||!$)return null;const ue=Boolean(k)||X;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(p().Ay,{popupType:g().A.isMobile?p().z7.SlideUp:p().z7.Popup,buttonPopupStore:v().A,renderOrigin:()=>(0,R.jsxs)(i(704152).A,{style:re.button,onClick:()=>function(e){v().A.setState({...v().A.state,open:!0}),d().PL(e),e.currentUser.loggedInUserIds.forEach((t=>{y().A.getSpaceViewStores(e,t).forEach((i=>{const n=i.getSpaceId();n&&(u().Z({environment:e,spaceId:n,userId:t}),(0,h().Qn)()?m().q.fetchUnfetchedTeams({userId:t,spaceId:n,teamTypes:new Set(["Joined"]),environment:e,callGetTeamsV2ApiFn:h().FK}):b().J({environment:e,spaceId:n,userId:t}))}))}))}(K),disabled:ue,className:i(38337).eGX,hovered:Y,hoveredStyle:re.hoveredStyle,ignoreLocalHoverState:!0,onMouseEnter:()=>O.setState(!0),onMouseLeave:()=>O.setState(!1),children:[(0,R.jsx)(i(771660).A,{isMobile:D(A),spaceStore:ce,activeUserEmailAddress:J,showExpand:!ue,type:"store",style:re.spaceName}),(0,R.jsx)("div",{style:re.rightButtonsContainer,children:(0,R.jsxs)("div",{style:re.rightButtons,children:[t&&(0,R.jsx)(i(277201).I,{style:re.unexpand,hoveredStyle:re.unexpandHover}),oe&&!se?(0,R.jsx)(W,{}):null,!G&&a&&(0,R.jsx)(i(998109).n,{step:"create_page_sidebar",isFullWidth:!1,onNextButtonClick:ae,wrapperStyle:{display:"flex"},children:(0,R.jsx)(i(205809).A,{from:"sidebar_new_page_button"})})]})})]}),originGap:0,disableMutationObserver:!0,forceInitialInbound:!0,style:re.popup,render:e=>(0,R.jsx)(i(362749).UL,{permissionsInviteStore:ie,parent:e,redirectURL:C,disableLoginLink:_,onSpaceClick:P,loginStore:E,loginPermissionsStore:U,organizationEntryPointProps:te,shouldShowCreateOrJoinWorkspaceButtonInFooter:L})}),ne&&(0,R.jsx)(i(347930).H,{store:ce,permissionsInviteStore:ie,origin:(0,R.jsx)(R.Fragment,{}),membersOnly:!0,shouldGrow:!1,disabled:!1,isSubscribed:!1,upgradeButtonName:"space_permission_settings",onInviteClick:le,onInviteComplete:de,analyticsFrom:"space_switcher_invite_button"}),(0,R.jsx)(i(562866).cx,{store:ce,origin:(0,R.jsx)(R.Fragment,{}),analyticsFrom:"space_switcher_add_members"})]})};function D(e){return e===E.Mobile}},751348:(e,t,i)=>{i.d(t,{n:()=>s});var n=()=>i(56366),o=()=>i(303742);function s(e){return(0,n().K8)((()=>(0,o().o)(e)),[e])}},771660:(e,t,i)=>{i.d(t,{A:()=>v});var n=i(296540),o=()=>i(484714),s=()=>i(56366),r=()=>i(401497),a=()=>i(343916),l=()=>i(284371),d=()=>i(640653),c=()=>i(179534),u=()=>i(802963),p=()=>i(460292),g=()=>i(187820),h=()=>i(490044),f=i(474848);const m=function(e){const{showIcon:t}=e,n=(0,r().DP)(),o=(0,r().IS)((e=>{const i=Math.ceil(60),n=Math.floor(85),o=`${Math.floor(Math.random()*(n-i+1))+i}%`;return{placeholderPageStyle:{height:28,display:"flex",alignItems:"center",width:"100%",padding:t?"0 15px":"0 0px"},placeholderTextWrapStyle:{flexGrow:1,marginLeft:t?10:0,height:28,display:"flex",alignItems:"center"},placeholderTextStyle:{height:4,background:e.buttonHoveredBackground,width:o}}}),[t]);return(0,f.jsxs)("div",{style:o.placeholderPageStyle,children:[t&&(0,i(926329).b)({width:16,height:16,fill:n.buttonHoveredBackground}),(0,f.jsx)("div",{style:o.placeholderTextWrapStyle,children:(0,f.jsx)("div",{style:o.placeholderTextStyle})})]})},b={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"};const v=function(e){const t=(0,r().DP)(),a=(0,o().v3)(),{device:c}=a,u="name"===e.type?e.spaceName:void 0,p="store"===e.type?e.spaceStore:void 0,g=(0,i(751348).n)(p),m=(0,s().K8)((()=>"store"===e.type&&p?(0,d().GK)(a,p):u),[a,e.type,u,p]);return(0,n.useEffect)((()=>{"store"===e.type&&(null==p||p.getValue())}),[p,e.type]),g?(0,f.jsx)(h().A,{left:(0,f.jsx)(w,{}),children:(0,f.jsx)(i(959013).sA,{defaultMessage:"External Pages",id:"sidebarSwitcher.externalPagesButton.title"})}):(0,f.jsxs)(h().A,{style:{overflow:"hidden",paddingLeft:8,paddingRight:8,...e.isMobile&&{fontSize:14,padding:0,marginRight:12},...e.style},left:m?(0,f.jsx)(x,{title:m,icon:"store"===e.type?void 0:e.spaceIcon,isMobile:e.isMobile,spaceStore:"store"===e.type?e.spaceStore:void 0}):(0,f.jsx)(y,{}),disableMobileBorder:!0,children:[!m&&(0,f.jsx)(S,{}),m&&(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:e.activeUserEmailAddress?"space-between":"start"},className:"notranslate",children:[(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginRight:6,marginTop:c.isAndroid?3:0,...b},children:[(0,f.jsx)("div",{style:{color:t.text.primary,fontWeight:l().Wy.medium,...b,lineHeight:"20px"},children:m}),(0,f.jsx)("div",{style:{color:t.text.secondary,fontSize:11,lineHeight:"16px",fontWeight:l().Wy.regular,...b},children:e.activeUserEmailAddress})]}),e.showExpand&&(0,f.jsx)("div",{style:{flexGrow:0,flexShrink:0,width:10,height:10,marginLeft:2,fill:t.icon.secondary},children:(0,i(883234)._)()})]})]})};function y(){return(0,f.jsx)("div",{style:{opacity:.25},children:(0,f.jsx)(u().A,{size:20,title:void 0})})}function S(){return(0,f.jsx)(m,{showIcon:!1})}function x(e){let{title:t,icon:i,isMobile:n,spaceStore:a}=e;const u=(0,r().DP)(),p=(0,o().v3)(),h=(0,s().K8)((()=>a?(0,d().c2)(p,a):i?{icon:i,pointer:{table:"space",id:"undefined"}}:void 0),[a,p,i]),m=(0,s().K8)((()=>a?(0,d().GK)(p,a):t),[a,p,t]),b=(0,s().K8)((()=>c().A.getUnreadMentionsCountForOtherSpaces()>0),[]);return(0,f.jsxs)("div",{style:{position:"relative"},children:[(0,f.jsx)(g().B6,{disabled:!0,icon:h,iconRecordCategory:"workspace",isEmptyPage:!1,title:m,size:n?24:22,style:{marginTop:1,color:u.text.primary,fontWeight:l().Wy.medium}}),b&&(0,f.jsx)(I,{})]})}function I(){const e=(0,r().IS)((e=>({unreadBadge:{backgroundColor:e.redBadgeBackground,position:"absolute",top:0,right:-3,width:8,height:8,borderRadius:4,border:`1px solid ${e.surface.wash}`}})),[]);return(0,f.jsx)("div",{style:e.unreadBadge})}function w(){const e=(0,r().IS)((e=>({iconWrapper:{height:24,width:24,background:e.surface.wash,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center"}})),[]);return(0,f.jsx)("div",{style:e.iconWrapper,children:(0,f.jsx)(p().Q,{colorName:"graySecondary",iconGroup:a().i,variantName:"default"})})}},791627:(e,t,i)=>{i.d(t,{A:()=>o});class n extends(()=>i(757695))().Store{getInitialState(){return{contacts:!1}}}const o=n},986229:(e,t,i)=>{i.d(t,{A:()=>o});class n extends(()=>i(757695))().Store{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"editor",table:i(179034).ev,flowId:void 0,inputFocus:"invitee",emailMessage:""}}}const o=n}}]);