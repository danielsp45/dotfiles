"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[92821,93139],{564037:(e,t,n)=>{n.r(t),n.d(t,{getCurrentWorkflowNavigationState:()=>O,getDefaultClosedNavigationState:()=>k,getDefaultOpenNavigationState:()=>b,getIsWorkflowEditorOpen:()=>y,getIsWorkflowEditorStateOpen:()=>m,getIsWorkflowNavigationStateCurrent:()=>N,getMergedWorkflowNavigationState:()=>C,routeArgsGivenNavigationState:()=>V,useIsWorkflowEditorOpen:()=>j,useWorkflowNavigationState:()=>I});var i=()=>n(484714),o=()=>n(56366),r=()=>n(496603),a=()=>n(498212),s=()=>n(534177),u=()=>n(671593),c=()=>n(638681),l=()=>n(765957),d=()=>n(990402),g=()=>n(46986);const p=c().object({required:{isOpen:c().literal(!0)},optional:{}}),w={agent:c().intersection([p,c().object({required:{type:c().literal("agent")},optional:{}})]),module:c().intersection([p,c().object({required:{type:c().literal("module"),id:c().string()},optional:{}})]),database:c().intersection([p,c().object({required:{type:c().literal("database"),id:c().string()},optional:{}})]),trigger:c().intersection([p,c().object({required:{type:c().literal("trigger"),id:c().string()},optional:{}})]),debug:c().intersection([p,c().object({required:{type:c().literal("debug")},optional:{}})]),preview:c().intersection([p,c().object({required:{type:c().literal("preview")},optional:{collectionViewId:c().string()}})]),runtime_actor:c().intersection([p,c().object({required:{type:c().literal("runtime_actor")},optional:{}})]),view_settings:c().intersection([p,c().object({required:{type:c().literal("view_settings"),id:c().string()},optional:{}})]),runs:c().intersection([p,c().object({required:{type:c().literal("runs")},optional:{}})])},v=c().union(Object.values(w)),f=c().object({required:{isOpen:c().literal(!1)},optional:{}}),S=c().union([v,f]);function b(){return{isOpen:!0,type:"agent"}}function k(){return{isOpen:!1}}function m(e){return(null==e?void 0:e.isOpen)??!1}function y(e){return m(O(e))}function N(e){const{currentNavigationState:t,navigationState:n}=e,i=C({defaultNavigationState:{isOpen:!1},currentNavigationState:t,newNavigationState:n});return(0,r().n4)(t,i)}function O(e){const{RouterStore:t}=e;if("page"!==t.state.route.name)return;const n=l().default.state.mainEditorCurrentBlockStore;return n&&(0,d().m)(n)?function(e){const{workflowViewType:t,workflowViewId:n,collectionViewId:i}=e;switch(t){case"agent":case"debug":case"runtime_actor":return{isOpen:!0,type:t};case"module":case"trigger":case"view_settings":if(!n)return;return{isOpen:!0,type:t,id:n};case"database":if(!n)return;return{isOpen:!0,type:t,id:(0,a().ZA)(n)??n};case"preview":return{isOpen:!0,type:"preview",collectionViewId:i};case"runs":return{isOpen:!0,type:"runs"};default:return}}(t.state.route):void 0}function C(e){const{defaultNavigationState:t,currentNavigationState:n,newNavigationState:i}=e;if(!(0,g().re)())return{isOpen:!1};const o={...t};if(n)for(const[a,s]of Object.entries(n))o[a]=s;if(i)for(const[a,s]of Object.entries(i))o[a]=s;const r=(0,u().tf)(S,o);if(r)throw r;return o}function V(e){if(!e.isOpen)return{workflowViewType:void 0,workflowViewId:void 0,collectionViewId:void 0};const t=e.type,n={};switch(t){case"debug":case"runtime_actor":return{...n,workflowViewType:t,workflowViewId:void 0};case"module":case"trigger":case"view_settings":case"database":return{...n,workflowViewType:t,workflowViewId:e.id};case"runs":case"agent":return{...n,workflowViewType:t};case"preview":return{...n,workflowViewType:"preview",collectionViewId:e.collectionViewId};default:(0,s().HB)(t)}}function I(){const e=(0,i().v3)();return(0,o().K8)((()=>O(e)??{isOpen:!1}),[e])}function j(){const e=(0,i().v3)();return(0,o().K8)((()=>y(e)),[e])}},691093:(e,t,n)=>{n.r(t),n.d(t,{closeWorkflowEditor:()=>g,onConfigItemClick:()=>l,showWorkflowEditor:()=>d});var i=()=>n(496603),o=()=>n(435009),r=()=>n(118078),a=()=>n(890754),s=()=>n(492414),u=()=>n(765957),c=()=>n(564037);function l(e){const{environment:t,navigationState:n,parentStore:o}=e,r=(0,c().getCurrentWorkflowNavigationState)(t);(0,i().n4)(r,n)?d({environment:t,navigationState:{isOpen:!0,type:"agent"},parentStore:o}):d({environment:t,navigationState:n,parentStore:o})}function d(e){const{environment:t,parentStore:n,redirect:i}=e,l=(0,c().getMergedWorkflowNavigationState)({defaultNavigationState:(0,c().getDefaultOpenNavigationState)(),currentNavigationState:(0,c().getCurrentWorkflowNavigationState)(t),newNavigationState:e.navigationState}),d=(0,a().getMergedChatSidebarState)({environment:t,update:e.chatSidebarState}),g=(0,c().routeArgsGivenNavigationState)(l),p=(0,a().routeArgsGivenChatSidebarState)(d);(0,r().maybeCloseNotionSidebar)({environment:t});const w=(0,s().Ef)({environment:t,updates:{...g,...p,store:n}}),v=void 0!==n&&u().default.state.mainEditorCurrentBlockStore!==n;o().oo({environment:t,url:w,redirect:i??!v})}function g(e){const{environment:t,newStore:n,redirect:i}=e,u=(0,c().routeArgsGivenNavigationState)((0,c().getDefaultClosedNavigationState)()),l=(0,a().routeArgsGivenChatSidebarState)(a().CLOSED_CHAT_SIDEBAR_STATE),d=(0,s().Ef)({environment:t,updates:{...u,...l,store:n}});(0,r().maybeOpenNotionSidebar)(),o().oo({environment:t,url:d,redirect:i??!0})}},990402:(e,t,n)=>{n.d(t,{m:()=>o});var i=()=>n(46986);function o(e){return("workflow"===e.getType()||e.isCollectionView()&&e.getWorkflowStore())&&e.canEdit()&&!e.isSystemBlock()&&(0,i().re)()}}}]);