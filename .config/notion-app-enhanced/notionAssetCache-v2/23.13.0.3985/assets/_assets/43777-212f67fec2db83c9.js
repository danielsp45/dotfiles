"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[43777],{147294:(e,t,o)=>{o.d(t,{Ee:()=>h,oG:()=>m});o(296540);var n=()=>o(56366),i=()=>o(401497),s=()=>o(959013),a=()=>o(963589),r=()=>o(765957),l=()=>o(464708),d=o(474848);const c={define_variables_automation_action:{launchDateMs:17277408e5,expiryDateMs:1738368e6},passkey_setting:{launchDateMs:1729101727e3,expiryDateMs:1738432882e3},http_request_automation_action:{launchDateMs:173324302e4,expiryDateMs:1738368e6},publish_site_settings_embed_page:{launchDateMs:1736208e6,expiryDateMs:1743984e6},generalized_recurrence_automations:{launchDateMs:17365536e5,expiryDateMs:17460576e5},ai_page_translation_topbar_more_action:{launchDateMs:1740451280830,expiryDateMs:17434656e5},verification:{launchDateMs:1740096e6,expiryDateMs:174375e7},notion_ai_workspace_settings:{launchDateMs:17424288e5,expiryDateMs:17550432e5},notion_mail_launch_modal:{launchDateMs:17446752e5,expiryDateMs:17525376e5},notion_mail_launch_modal_2:{launchDateMs:17446752e5,expiryDateMs:17578944e5},ui_doc_example:{launchDateMs:19249056e5,expiryDateMs:19249056e5},collection_property_permissions:{launchDateMs:17433792e5,expiryDateMs:17671392e5},salesforce_sync_unfurling_option:{launchDateMs:17443296e5,expiryDateMs:17538336e5},personal_home_sidebar_item:{launchDateMs:17470944e5,expiryDateMs:175392e7},feed_collection_view:{launchDateMs:17471808e5,expiryDateMs:17591904e5}};function u(e){let{style:t}=e;const o=(0,i().IS)((()=>({badge:{letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",...t}})),[t]);return(0,d.jsx)(l().A,{color:"blue",style:o.badge,content:(0,d.jsx)(s().sA,{id:"newBadgeComponent.label",defaultMessage:"New"})})}function m(e){return(0,n().K8)((()=>{const{launchDateMs:t,expiryDateMs:o}=c[e],{currentUserSettingsStore:n}=r().default.state;if(n&&n.isReady()){var i;const e=null===(i=n.getSettings())||void 0===i?void 0:i.signup_time;if(e&&e>t)return!1}return Date.now()<=o}),[e])}function p(e){let{style:t,newBadgeKey:o}=e;return m(o)?(0,d.jsx)(u,{style:t}):null}function g(e){let{style:t,newBadgeKey:o}=e;return(0,a().X)(o)?(0,d.jsx)(u,{style:t}):null}function h(e){return e.didUserEngage?null:"feature_gate"===e.keyType?(0,d.jsx)(g,{...e}):(0,d.jsx)(p,{...e})}},205160:(e,t,o)=>{o.d(t,{K:()=>s,v:()=>i});var n=()=>o(959013);const i=(0,n().YK)({addAPageInside:{defaultMessage:"Add a page inside",id:"sidebarItem.addAPageInside.tooltip"}}),s=(0,n().YK)({addPageTooltip:{defaultMessage:"Add a page",id:"sidebar.addButton.addPageTooltip"}})},243777:(e,t,o)=>{o.d(t,{ke:()=>K,xw:()=>E,Ay:()=>R,aQ:()=>F});var n=o(296540),i=()=>o(484714),s=()=>o(56366),a=()=>o(401497),r=()=>o(133043),l=()=>o(959013),d=()=>o(35392),c=()=>o(296798),u=()=>o(8980),m=()=>o(859428),p=()=>o(490044),g=()=>o(694874),h=()=>o(696746),y=()=>o(770906),f=()=>o(962730);class S extends(()=>o(757695))().Store{getInitialState(){return{isSidebarItemHovered:!1,isSidebarItemFocused:!1,isChatHistoryHovered:!1,isChatHistoryFocused:!1,isExperimentSwitcherHovered:!1,isExperimentSwitcherFocused:!1}}}var v=()=>o(765957),b=()=>o(551694),x=()=>o(846955),A=()=>o(644914),_=()=>o(118884),I=()=>o(274570),M=()=>o(285790),w=()=>o(554283),C=()=>o(539412),j=()=>o(907893),T=o(474848);function k(e){const{aiSidebarItemHoverStore:t,aiSidebarTooltipStore:o}=e,r=(0,i().v3)(),d=(0,l().tz)(),c=(0,s().O$)(t),m=c.isSidebarItemHovered||c.isSidebarItemFocused,p=(0,j().Kd)(),g=(0,a().IS)((e=>({button:{...p.button,height:24,width:24,margin:0},iconContainer:{opacity:m?1:0,padding:0,transition:"opacity 0.1s ease-in-out"}})),[p.button,m]);(0,_().X)((()=>{t.setState({...t.state,isChatHistoryHovered:!1,isChatHistoryFocused:!1})}));const h=(0,n.useCallback)((()=>{o.reset(),(0,y().ZT)({environment:r,contentType:"assistant"})}),[r,o]),[f,S]=(0,w().B)();(0,n.useEffect)((()=>{t.setState({...t.state,isChatHistoryHovered:S})}),[S,t]);const v=(0,n.useCallback)((()=>{t.setState({...t.state,isChatHistoryFocused:!0})}),[t]),b=(0,n.useCallback)((()=>{t.setState({...t.state,isChatHistoryFocused:!1})}),[t]);if((0,C().x9)())return null;const x=d.formatMessage({id:"aiSidebarItem.askNotionAi.history.tooltip",defaultMessage:"Chat history"});return(0,T.jsx)("div",{ref:f,style:g.iconContainer,children:(0,T.jsx)(M().A,{onFocus:v,onBlur:b,icon:()=>(0,T.jsx)(u().I,{size:"default",color:"inherit",icon:I().clockIcon}),style:g.button,ariaLabel:x,onClick:h})})}var H=()=>o(645873);const B={LazyAiLandingPageExperimentSwitcher:new(H().O2)("LazyAiLandingPageExperimentSwitcher",(()=>o.e(66169).then(o.bind(o,981440))))},D=(0,H()._h)(B.LazyAiLandingPageExperimentSwitcher,(e=>e.AiLandingPageExperimentSwitcher)),L=(0,l().YK)({experimentSwitcherTooltip:{id:"aiLandingPageExperimentSwitcherTooltip",defaultMessage:"[dev only] experience switcher"},chatHistoryTooltip:{id:"aiSidebarItem.askNotionAi.history.tooltip",defaultMessage:"Chat history"}});function P(e){const{styles:t}=e,b=(0,i().v3)(),_=(0,s().K8)((()=>{const{currentSpaceViewStore:e}=v().default.state;if(e)return h().x$(e)}),[]),I=(0,s().K8)((()=>{const e=v().default.state.mainEditorCurrentBlockStore;return!!e&&h().Nh(e.id)}),[]),M=(0,s().K8)((()=>"home_available"===x().default.getState().type),[]),w=(0,s().K8)((()=>{var e;const{currentUserSettingsStore:t}=v().default.state;return null==t||null===(e=t.getSettings())||void 0===e?void 0:e.personal_home_sidebar_item_clicked_at}),[]),C=(0,s().K8)((()=>{var e;return null==_||null===(e=_.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:null==_?void 0:_.getRecordModel,pageVisitSource:o(584262).y8.SidebarHome})}),[_]),j=(0,o(640945).X)(),H=(0,s().K8)((()=>o(430483).zD.isAiHomeModuleEnabled()),[]),B=!(0,s().O$)(o(227440).e),P=(0,o(963589).X)("feed_sidebar_item"),K=(0,s().uB)(void 0,o(487941).A),R=(0,s().uB)(void 0,S),V=(0,n.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,o(819121).p)(t)&&R.setState({...R.state,isSidebarItemFocused:!0})}),[R]),U=(0,n.useCallback)((()=>{R.setState({...R.state,isSidebarItemFocused:!1})}),[R]),z=(0,n.useCallback)((()=>{o(353643).A.state.isDragging||R.setState({...R.state,isSidebarItemHovered:!0})}),[R]),Y=(0,n.useCallback)((()=>{R.setState({...R.state,isSidebarItemHovered:!1})}),[R]),N=(0,n.useCallback)((()=>{(0,g().Wy)(b),H&&(0,g().F$)(b),(0,o(162674).ZL)({environment:b,from:"sidebar"}),M&&(0,g().tL)(b),o(441199).default.isVisible()&&(0,y().VI)({environment:b})}),[b,H,M]),W=(0,A().ab)(),O=(0,a().IS)((e=>({tooltip:{width:200},shortcutLabel:{color:e.text.contrastSecondary},linkBoxStyle:{...W.baseSidebarItem,...I&&W.currentSelectedSidebarItem},newBadge:{background:e.tint.regular,color:e.text.secondary}})),[I,W]),X=(0,s().O$)(R),$=(0,n.useCallback)((()=>{const{isChatHistoryFocused:e,isChatHistoryHovered:t,isExperimentSwitcherFocused:o,isExperimentSwitcherHovered:n}=X;return t?(0,T.jsx)(l().sA,{...L.chatHistoryTooltip}):n?(0,T.jsx)(l().sA,{...L.experimentSwitcherTooltip}):e?(0,T.jsx)(l().sA,{...L.chatHistoryTooltip}):o?(0,T.jsx)(l().sA,{...L.experimentSwitcherTooltip}):(0,T.jsxs)("div",{style:O.tooltip,children:[(0,T.jsx)("div",{children:(0,T.jsx)(l().sA,{...F.tooltip})}),(0,T.jsx)(d().A,{style:O.shortcutLabel,name:"openHome"})]})}),[X,O.shortcutLabel,O.tooltip]),G=H&&!w;return(0,T.jsx)(m().A,{store:K,renderTooltip:$,disableTooltip:M,originGap:6,textWrap:!0,placement:f().W.Right,render:e=>(0,T.jsx)(c().A,{...e,style:O.linkBoxStyle,hoveredStyle:null==t?void 0:t.buttonHoveredStyle,href:C,onClick:N,onFocus:t=>{var o;null===(o=e.onFocus)||void 0===o||o.call(e,t),V(t)},onBlur:t=>{var o;null===(o=e.onBlur)||void 0===o||o.call(e,t),U()},"aria-current":I?"page":void 0,children:(0,T.jsx)(p().A,{left:(0,T.jsx)(u().I,{icon:r().P,color:"secondary",size:"lg"}),disableMobileBorder:!0,right:(0,T.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginRight:-4,justifyContent:"center",gap:3},children:[(0,T.jsx)(D,{aiSidebarItemHoverStore:R,aiSidebarTooltipStore:K}),!B&&H?(0,T.jsx)(k,{aiSidebarItemHoverStore:R,aiSidebarTooltipStore:K}):void 0,Boolean(j)&&!P&&(0,T.jsx)(E,{})]}),onMouseMove:z,onMouseLeave:Y,children:G?(0,T.jsxs)(o(84817).Y1,{direction:"horizontal",gap:4,align:"center-left",children:[(0,T.jsx)(l().sA,{...F.label}),(0,T.jsx)(o(147294).Ee,{keyType:"date",newBadgeKey:"personal_home_sidebar_item",didUserEngage:!1,style:O.newBadge})]}):(0,T.jsx)(l().sA,{...F.label})})})})}function K(e){const{styles:t}=e,o=(0,s().K8)((()=>"home_available"===x().default.getState().type),[]),n=(0,A().ab)(),i=(0,a().IS)((e=>({tooltip:{width:200},shortcutLabel:{color:e.text.contrastSecondary}})),[]);return(0,T.jsx)(m().A,{renderTooltip:()=>(0,T.jsxs)("div",{style:i.tooltip,children:[(0,T.jsx)("div",{children:(0,T.jsx)(l().sA,{id:"sidebarPersonalHomeButton.tooltip",defaultMessage:"View recent pages and more"})}),(0,T.jsx)(d().A,{style:i.shortcutLabel,name:"openHome"})]}),disableTooltip:o,originGap:6,textWrap:!0,placement:f().W.Right,render:e=>(0,T.jsx)(c().A,{...e,style:n.baseSidebarItem,hoveredStyle:null==t?void 0:t.buttonHoveredStyle,onClick:()=>{b().A.open()},children:(0,T.jsx)(p().A,{left:(0,T.jsx)(u().I,{icon:r().P,color:"secondary",size:"lg"}),disableMobileBorder:!0,children:(0,T.jsx)(l().sA,{id:"sidebarPersonalHomeButton.label",defaultMessage:"Home"})})})})}function E(){const e=(0,a().IS)((e=>({wrapper:{display:"flex",justifyContent:"center",alignItems:"center",width:24,height:24},unreadBadge:{backgroundColor:e.redBadgeBackground,width:8,height:8,borderRadius:5,transform:"scale(0)",position:"relative"},pulseRing:{position:"absolute",width:8,height:8,borderRadius:"50%",transform:"scale(0)",background:e.redBadgeBackground}})),[]),t=n.useRef(null),o=n.useRef(null);return n.useEffect((()=>{const e=t.current,n=o.current;if(!e||!n)return;const i=n.animate([{transform:"scale(0)"},{transform:"scale(1)"}],{duration:300,easing:"ease-out",fill:"forwards",delay:500}),s=e.animate([{transform:"scale(1)",opacity:.5},{transform:"scale(2.5)",opacity:0}],{duration:2e3,easing:"ease-out",delay:800});return()=>{s.cancel(),i.cancel()}}),[]),(0,T.jsx)("div",{style:e.wrapper,children:(0,T.jsx)("div",{ref:o,style:e.unreadBadge,children:(0,T.jsx)("div",{ref:t,style:e.pulseRing})})})}const F=(0,l().YK)({tooltip:{id:"sidebarPersonalHomeButton.tooltip",defaultMessage:"View recent pages and more"},label:{id:"sidebarPersonalHomeButton.label",defaultMessage:"Home"}}),R=n.memo(P)},640945:(e,t,o)=>{o.d(t,{X:()=>x});o(898992),o(354520),o(672577),o(803949),o(581454);var n=o(296540),i=()=>o(484714),s=()=>o(56366),a=()=>o(187174),r=()=>o(921997),l=()=>o(519831),d=()=>o(763824),c=()=>o(449506),u=()=>o(37433),m=()=>o(249847),p=()=>o(941541),g=()=>o(765957),h=()=>o(630116),y=()=>o(634157),f=()=>o(578136);const S=new(o(299919).Y)((e=>new v(e)));class v extends(()=>o(757695))().Store{constructor(e){super(),this.collectionStore=void 0,this.debouncedRefresh=void 0,this.collectionStore=e,this.debouncedRefresh=(0,o(496603).sg)(this.unthrottledRefresh.bind(this),2e3)}getInitialState(){return{createdTime:-1/0,createdById:void 0}}getLatestPostCreatedTime(){return this.state.createdTime}getLatestPostCreatedById(){return this.state.createdById}async refresh(e){return this.debouncedRefresh(e)}async unthrottledRefresh(e){const{environment:t}=e;if(!t.currentUser.id)return;if(await this.collectionStore.load(),!this.collectionStore.isDefined())return;const o=5e3*Math.random();await new Promise((e=>setTimeout(e,o)));const n=await c().callApi({eventName:"getLatestPostCreated",environment:t,data:{spaceId:this.collectionStore.getSpaceId(),collectionIds:[this.collectionStore.id]}});if("success"===n.type&&n.data){const e=n.data[0];this.setState(e)}}}function b(e){const t=(0,i().v3)(),o=(0,s().K8)((()=>{var t;return null==e||null===(t=e[0])||void 0===t?void 0:t.getSpaceId()}),[e]),l=(0,n.useMemo)((()=>e.filter((e=>!S.has(e)))),[e]);(0,a().Yb)((async()=>{await async function(e){const{environment:t,collectionStores:o}=e,n=await d().dS(o,10,(async e=>(await e.load(),e.isDefined())));if(0===n.length)return;const i=n[0].getSpaceId(),s=await c().callApi({eventName:"getLatestPostCreated",environment:t,data:{spaceId:i,collectionIds:n.map((e=>e.id))}});if("success"===s.type&&s.data)for(let a=0;a<n.length;a++){const e=n[a],t=s.data[a];t.collectionId===e.id&&S.get(e).setState(t)}}({environment:t,collectionStores:l})}),[l,t]);const u=(0,n.useMemo)((()=>e.map((e=>S.get(e)))),[e]);return(0,n.useEffect)((()=>{if(!o)return;const e=u.map((e=>p().Ay.addListener((0,r().eG)(e.collectionStore.id),void 0,(0,p().AY)((async()=>await e.refresh({environment:t}))),void 0,t)));return()=>{e.forEach((e=>{e&&p().Ay.removeListener(e,t)}))}}),[u,o,t]),u}function x(){const e=(0,i().v3)(),t=(0,s().K8)((()=>(0,f().D)({isMobileNative:e.device.isMobileNative,disableExposureLogging:!0})),[e]),o=(0,m().T)(),n=(0,s().O$)(g().AppStoreCurrentSpaceStore),a=(0,u().D5)(),{teams:r}=(0,u().X_)({userId:o,spaceStore:n}),d=b((0,s().K8)((()=>{if(!t)return[];if(!o||!n)return[];const e=y().A.getJoinedTeamStores({userId:o,spaceStore:n});return(a?r.map((e=>{let{store:t}=e;return t})):e).map((e=>h().md.createChildStore(e,{table:l().Vl,id:e.id,spaceId:n.id})))}),[t,o,r,a,n]));return(0,s().K8)((()=>{var e;if(!g().default.state.currentSpaceStore)return!1;const t=(null===(e=g().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getKeyStore("settings").getKeyStore("last_opened_aggregated_feed").getValue())??0;return d.find((e=>!!e.getLatestPostCreatedById()&&(!(e.getLatestPostCreatedTime()<=t)&&e.getLatestPostCreatedById()!==o)))}),[d,o])}},694874:(e,t,o)=>{o.d(t,{F$:()=>S,Oh:()=>v,Qs:()=>f,Wy:()=>p,aX:()=>h,it:()=>y,tL:()=>g});o(898992),o(354520),o(430670);var n=()=>o(994310),i=()=>o(534177),s=()=>o(246826),a=()=>o(751156),r=()=>o(755199),l=()=>o(638146),d=()=>o(765957),c=()=>o(846955),u=()=>o(696746),m=()=>o(705059);function p(e){const{currentUserSettingsStore:t}=d().default.state;t&&a().createAndCommit({userAction:"SidebarPersonalHomeButton.markAsSeen",environment:e,canUndo:!0,perform:e=>{r().mJ({userSettingsStore:t,transaction:e,data:{seen_personal_home:!0}})}})}function g(e){const{currentUserSettingsStore:t}=d().default.state;t&&(c().default.setState({type:"inactive"}),a().createAndCommit({userAction:"SidebarPersonalHomeButton.markHomeTooltipAsSeen",environment:e,canUndo:!0,perform:e=>{r().mJ({userSettingsStore:t,transaction:e,data:{personal_home_delayed_tooltip_dismissed_at:Date.now()}})}}))}function h(e){const{environment:t,newSeenWelcomeHomeValue:o}=e,n=d().default.state.currentSpaceViewStore;n&&a().createAndCommit({userAction:"SidebarPersonalHomeSettings.markWelcomeAnimationAsSeen",environment:t,canUndo:!0,perform:e=>{const t=n.getSettingsStore().getKeyStore("personal_home").getKeyStore("seen_welcome_animation");s().KY({store:t,transaction:e,value:o})}})}function y(e){const{environment:t,tipType:o,completed:n}=e,{currentUserSettingsStore:i}=d().default.state;if(!i)return;const s=i.getPersonalHomeTipsSettings(),l={...s,progress_data:{...s.progress_data,[o]:{completed:n}}};a().createAndCommit({userAction:"LearnHomePanel.updateProgress",environment:t,canUndo:!0,perform:e=>{r().mJ({userSettingsStore:i,transaction:e,data:{personal_home_tips_settings:l}})}})}function f(e){const{environment:t,hide:o}=e,{currentUserSettingsStore:n}=d().default.state;if(!n)return;const i={...n.getPersonalHomeTipsSettings(),hide_completed:o};a().createAndCommit({userAction:"LearnHomePanel.hideCompleted",environment:t,canUndo:!0,perform:e=>{r().mJ({userSettingsStore:n,transaction:e,data:{personal_home_tips_settings:i}})}})}function S(e){const{currentUserSettingsStore:t}=d().default.state;t&&a().createAndCommit({environment:e,userAction:"personalHomeActions.markPersonalHomeSidebarItemClicked",canUndo:!0,cellTarget:"main",perform:e=>{r().mJ({userSettingsStore:t,transaction:e,data:{personal_home_sidebar_item_clicked_at:Date.now()}})}})}function v(e){const{blockId:t,enabledFeatures:o,userId:s}=e,a=(0,i().WP)(o).flatMap((e=>{let[t,o]=e;if(!o)return[];switch(t){case"tasks":return[(0,u().NY)("myTasksAssignedToMeCollectionView")];case"customDb":const e=(0,u().NY)("customDb");return[e&&(0,l().cf)({userId:s,viewBlockId:e})].filter(i().O9);case"similarUsersAndTrending":return[(0,u().NY)("similarUsersCollectionView"),(0,u().NY)("trendingCollectionView")];case"unifiedFeed":return[(0,u().NY)("postsCollectionView")];case"recents":case"updates":case"templates":case"tips":case"calendar":case"aiChatModule":case"suggested":case"trending":return[];default:(0,i().HB)(t)}})),{isHomeKey:r,homeCollectionViewIdsKey:d,aiChatEnabledKey:c,unifiedFeedEnabledKey:p}=(0,m().h)(t);n().A.set(r,!0),n().A.set(d,a),n().A.set(p,o.unifiedFeed),n().A.set(c,o.aiChatModule)}},907893:(e,t,o)=>{o.d(t,{Ay:()=>K,Kd:()=>U});o(18107),o(967357),o(581454);var n=o(296540),i=()=>o(484714),s=()=>o(56366),a=()=>o(401497),r=()=>o(126617),l=()=>o(863330),d=()=>o(869558),c=()=>o(959013),u=()=>o(901265),m=()=>o(872539),p=()=>o(778417),g=()=>o(704152),h=()=>o(760217),y=()=>o(406699),f=()=>o(928600),S=()=>o(939740),v=()=>o(480095),b=()=>o(8980),x=()=>o(187820),A=()=>o(16006),_=()=>o(89924),I=()=>o(859428),M=()=>o(780054),w=()=>o(972435),C=()=>o(722872),j=()=>o(553965),T=()=>o(108944),k=()=>o(115512),H=()=>o(962730),B=()=>o(630116),D=()=>o(205160),L=o(474848);function P(e){const{store:t,from:n,type:i,canEditItem:r,itemDepth:l,isHovered:d,isFocused:c,onToggle:u}=e,m=M().A.isMobile||d||c,p=(0,s().K8)((()=>{var e;const o=Boolean(t.getAppContainerBlockStore()),n=t.isPlaceholderWorkflowTemplateBlock(),i=null===(e=t.getCollectionStore())||void 0===e?void 0:e.isSyncedCollection();return Boolean(t.getType()&&r&&!o&&!n&&!i)}),[t,r]),g=function(e){const{showRightIcons:t}=e;return(0,a().IS)((()=>({iconContainer:{display:"flex",paddingLeft:3,...t?{}:{...k().Qg,display:"block"}}})),[t])}({showRightIcons:m});return i===o(946065).yy?null:(0,L.jsxs)("div",{style:g.iconContainer,children:[(0,L.jsx)(V,{store:t,from:n,type:e.type,itemIndex:e.itemIndex,itemDepth:l}),p&&(0,L.jsx)(E,{store:t,onToggle:u,isTopLevelItem:0===l,from:n,type:i})]})}const K=n.memo(P);function E(e){const{store:t,onToggle:o,isTopLevelItem:n,from:a,type:r}=e,l=(0,i().v3)(),c=(0,s().K8)((()=>t.isCollectionView()),[t]),u=(0,s().K8)((()=>t.getLinkedViewCollectionBlockStores()),[t]),p=(0,s().K8)((()=>{var e;const o=null===(e=t.getCollectionViewStores().at(0))||void 0===e?void 0:e.id;if(!o)return;const n=B().pS.createChildStore(t,{table:d().Gy,id:o});return null==n?void 0:n.getFormatStore().getValue()}),[t]),g=w().A.formatMessage(D().v.addAPageInside);return c&&!p&&0===u.length?(0,L.jsx)(F,{disabled:!0}):u.length<=1?(0,L.jsx)(I().A,{renderTooltip:()=>g,placement:H().W.Bottom,render:e=>{const i={...e,onClick:e=>{m().y6({blockStore:u[0]??t,shouldNavigateToSource:!1,environment:l,event:e,analytics:{from:a,type:r},toggleOptions:{onToggle:o,isTopLevelItem:n}})}};return(0,L.jsx)(F,{events:i})}}):(0,L.jsx)(I().A,{renderTooltip:()=>g,placement:H().W.Bottom,render:e=>(0,L.jsx)(y().Ay,{popupType:M().A.isMobile?y().z7.SlideUp:y().z7.Popup,renderOrigin:t=>(0,L.jsx)(F,{events:(0,j().A)(e,t)}),render:e=>(0,L.jsx)(R,{store:t,onToggle:o,parent:e,isTopLevelItem:n,from:a,type:r})})})}function F(e){const t=U();return(0,L.jsx)(g().A,{ariaLabel:w().A.formatMessage(D().v.addAPageInside),style:t.button,disabled:e.disabled,disabledFeedback:e.disabled,...e.events,children:(0,L.jsx)(b().I,{icon:l().plusSmallIcon,size:"sm",color:M().A.isMobile?"tertiary":"secondary"})})}function R(e){const{store:t,onToggle:o,parent:n,isTopLevelItem:r,from:l,type:d}=e,u=(0,i().v3)(),p=(0,s().K8)((()=>t.getLinkedViewCollectionBlockStores()),[t]),g=(0,a().IS)((()=>({menuItem:{display:"flex",alignItems:"center",whiteSpace:"pre"}})),[]),y={menuType:M().A.isMobile?C().gu.Modal:C().gu.Popup,right:M().A.isMobile?(0,L.jsx)(v().DoneMenuText,{}):void 0},b={key:"collections",render:e=>(0,L.jsx)(_().A,{...e,title:(0,L.jsx)(c().sA,{defaultMessage:"Add to",id:"sidebarItem.addAPageInside.popup.addTo"})}),items:p.map((e=>({key:e.id,render:t=>(0,L.jsx)(h().A,{...t,title:(0,L.jsx)("div",{style:g.menuItem,children:(0,L.jsx)(A().A,{store:e})}),icon:(0,L.jsx)(x().B6,{disabled:!0,icon:e.getIcon(),isEmptyPage:e.isEmptyPage(),size:14,iconRecordCategory:(0,x().Te)(e)})}),action:t=>{m().y6({blockStore:e,environment:u,event:t.event,shouldNavigateToSource:!0,analytics:{from:l,type:d},toggleOptions:{onToggle:o,isTopLevelItem:r}})}})))};return(0,L.jsx)(f().A,{...y,children:(0,L.jsx)(S().Ay,{type:S().Oh.Vertical,onAccept:n.close,initialFocus:void 0,sections:[b]})})}function V(e){const{store:t,from:o,type:n,itemDepth:s,itemIndex:a}=e,l=(0,c().tz)(),d=(0,i().v3)(),m=U(),h=e=>{const i=T().Uo(t);p().Lt({environment:d,store:t}),u().it({environment:d,stores:[t],left:e.clientX,top:e.clientY,showInput:!1,actionSectionGroupKey:"sidebar_outliner",analyticsFrom:"sidebar_more_menu",optionalAnalyticsProperties:{teamStore:i,type:0===s?"top_level":"nested",outliner_type:n,outliner_position:a,outliner_depth:s,outliner_location:"main_sidebar"===o?"sidebar":"pane"}})},y="bookmarks"===n?l.formatMessage({defaultMessage:"Remove, rename, and more…",id:"sidebarItem.favoritedPageMenuButton.tooltip"}):l.formatMessage({defaultMessage:"Delete, duplicate, and more…",id:"sidebarItem.pageMenuButton.tooltip"});return(0,L.jsx)(I().A,{renderTooltip:()=>y,placement:H().W.Bottom,render:e=>(0,L.jsx)(g().A,{ariaLabel:y,style:m.button,onClick:h,...e,children:(0,L.jsx)(b().I,{icon:r().Y,size:"sm",color:M().A.isMobile?"tertiary":"secondary"})})})}function U(){return(0,a().IS)((e=>({button:M().A.isMobile?{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:4,marginLeft:0}:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:4,marginLeft:4}})),[])}}}]);