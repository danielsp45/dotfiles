"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[6266],{12193:(e,t,o)=>{o.r(t),o.d(t,{globeIcon:()=>n,iconDefinition:()=>i});o(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,o(474848).jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0m3.123-4.514c.55.252 1.21.463 1.953.612q.135-.585.308-1.086a6.6 6.6 0 0 1 .512-1.15 6.4 6.4 0 0 0-2.773 1.624m-.814.994a6.34 6.34 0 0 0-1.029 2.895h3.396c.022-.715.081-1.403.173-2.048-.962-.191-1.827-.48-2.54-.847m-1.029 4.145a6.34 6.34 0 0 0 1.03 2.895c.712-.367 1.577-.656 2.54-.848a19 19 0 0 1-.174-2.047zm4.647 0c.021.657.076 1.283.158 1.862a15 15 0 0 1 3.08 0c.082-.58.137-1.205.158-1.862zm4.647 0a19 19 0 0 1-.173 2.048c.845.169 1.615.412 2.274.717a.6.6 0 0 1 .23.182 6.34 6.34 0 0 0 1.065-2.947zm3.396-1.25a6.34 6.34 0 0 0-1.03-2.895c-.712.367-1.577.656-2.54.847.093.645.152 1.333.174 2.048zm-4.647 0a17 17 0 0 0-.158-1.862 15 15 0 0 1-3.08 0c-.082.58-.137 1.205-.158 1.862zm-6.2 5.139a6.4 6.4 0 0 0 2.773 1.624 6.6 6.6 0 0 1-.512-1.15 11 11 0 0 1-.308-1.086 9 9 0 0 0-1.953.612m9.004 0a9 9 0 0 0-1.953-.611q-.135.584-.308 1.085a6.6 6.6 0 0 1-.512 1.15 6.4 6.4 0 0 0 2.773-1.624m-3.443.067q.136-.395.249-.86a13.7 13.7 0 0 0-2.615-.001q.111.466.248.861c.198.575.42.995.635 1.259.22.269.366.302.424.302s.205-.033.424-.302c.215-.264.437-.684.635-1.259m3.443-9.095a6.4 6.4 0 0 0-2.773-1.624c.196.337.366.726.512 1.15q.173.501.308 1.086a9 9 0 0 0 1.953-.612M10 6.342q.676-.001 1.308-.062a9 9 0 0 0-.249-.861c-.198-.575-.42-.995-.635-1.259-.22-.269-.366-.302-.424-.302s-.204.033-.424.302c-.215.264-.437.684-.635 1.259q-.136.395-.248.861.631.061 1.307.062"})},n=(0,o(340498).wt)("globe",i)},73514:(e,t,o)=>{o.d(t,{C:()=>n});o(296540);var i=o(474848);const n=(0,o(340498).wt)("analyticsSearch",{viewBox:"0 0 51 52",svg:(0,i.jsx)("path",{d:"M.414 21.297c0 2.86.533 5.543 1.6 8.049a21.156 21.156 0 004.468 6.576 20.797 20.797 0 006.577 4.443c2.505 1.067 5.18 1.6 8.023 1.6 2.116 0 4.13-.305 6.043-.914a21.55 21.55 0 005.332-2.565l11.654 11.655a3.44 3.44 0 001.245.812c.473.186.964.28 1.472.28.728 0 1.371-.17 1.93-.508a3.48 3.48 0 001.32-1.346 3.887 3.887 0 00.482-1.93 3.8 3.8 0 00-.279-1.447 3.126 3.126 0 00-.787-1.193l-11.578-11.63a20.414 20.414 0 002.818-5.51c.694-2.013 1.041-4.138 1.041-6.372 0-2.844-.541-5.51-1.625-7.998a20.718 20.718 0 00-4.443-6.602 20.515 20.515 0 00-6.602-4.468c-2.488-1.067-5.162-1.6-8.023-1.6-2.844 0-5.518.533-8.023 1.6a20.592 20.592 0 00-6.577 4.468A21.072 21.072 0 002.014 13.3c-1.067 2.488-1.6 5.154-1.6 7.998zm5.408 0c0-2.1.39-4.071 1.168-5.916a15.517 15.517 0 013.301-4.875 15.168 15.168 0 014.875-3.276c1.845-.795 3.817-1.193 5.916-1.193 2.116 0 4.096.398 5.941 1.193a14.877 14.877 0 014.85 3.276 15.515 15.515 0 013.3 4.875c.796 1.845 1.194 3.817 1.194 5.916 0 2.116-.398 4.096-1.193 5.941a15.517 15.517 0 01-3.301 4.875 15.426 15.426 0 01-4.85 3.276c-1.845.795-3.825 1.193-5.941 1.193-2.099 0-4.07-.398-5.916-1.193a15.737 15.737 0 01-4.875-3.276 15.52 15.52 0 01-3.3-4.875c-.78-1.845-1.169-3.825-1.169-5.941zm15.31 10.36c.458 0 .746-.263.864-.788.237-1.32.474-2.437.711-3.351.254-.931.559-1.693.914-2.286a4.554 4.554 0 011.397-1.498c.575-.389 1.311-.694 2.209-.914.914-.237 2.056-.448 3.427-.634.542-.085.813-.381.813-.89 0-.507-.271-.812-.813-.913-1.354-.17-2.496-.373-3.427-.61-.915-.253-1.668-.567-2.26-.939a4.814 4.814 0 01-1.422-1.498c-.373-.61-.677-1.363-.914-2.26a42.337 42.337 0 01-.635-3.326c-.084-.542-.372-.813-.863-.813s-.796.263-.914.788a53.724 53.724 0 01-.737 3.377c-.22.914-.507 1.675-.863 2.285a4.64 4.64 0 01-1.396 1.472c-.576.373-1.32.677-2.235.914-.914.22-2.048.424-3.402.61-.559.101-.838.406-.838.914 0 .49.28.787.838.889 1.693.186 3.055.44 4.088.761 1.032.305 1.828.762 2.387 1.371.575.61 1.015 1.44 1.32 2.489.305 1.05.584 2.395.838 4.037a1 1 0 00.279.584c.17.152.38.228.635.228z"})})},113474:(e,t,o)=>{o.d(t,{_:()=>d});o(296540);var i=()=>o(484714),n=()=>o(401497),s=()=>o(668725),r=()=>o(704152),a=()=>o(678553),l=()=>o(125565),c=o(474848);function d(e){const t=(0,n().DP)(),o=(0,i().v3)(),{device:d}=o;return(0,c.jsx)(r().A,{onClick:e.onClick,hovered:e.focused,disabled:e.disabled,style:{width:"100%",...!d.isMobile&&{borderRadius:6},...e.buttonStyle},hoveredStyle:e.hoveredButtonStyle,pressedStyle:e.pressedButtonStyle,children:(0,c.jsx)(a().Ay,{...e,dontShrinkTitle:!0,right:(0,c.jsxs)("div",{style:{display:"flex",whiteSpace:"nowrap"},children:[e.right&&(0,c.jsx)(l().A,{isSecondaryColor:!0,isMobile:d.isMobile,children:e.right}),!d.isMobile&&(0,c.jsx)("div",{style:{flexShrink:0},children:(0,s().b)({width:10,marginLeft:4,fill:t.icon.tertiary,transform:"right"===e.chevronType?"rotate(-90deg)":void 0,transition:"transform 0.2s ease"})})]})})})}},135221:(e,t,o)=>{o.d(t,{A:()=>n});o(296540);var i=o(474848);const n=function(e){let{style:t,styleParentContainer:n,isTriColored:s}=e;const r=(0,o(959013).tz)();return(0,i.jsxs)("div",{"aria-valuetext":r.formatMessage({id:"loadingDots.label",defaultMessage:"Loading..."}),role:"progressbar",className:"loading-dots",style:{...n},children:[(0,i.jsx)("div",{className:"loading-dot",style:{...t,...s&&{backgroundColor:"#F6C050"}}}),(0,i.jsx)("div",{className:"loading-dot",style:{...t,...s&&{backgroundColor:"#ED6A5F"}}}),(0,i.jsx)("div",{className:"loading-dot",style:{...t,...s&&{backgroundColor:"#5F9CDB"}}})]})}},210741:(e,t,o)=>{o.d(t,{A:()=>j,l:()=>b});o(581454),o(296540);var i=()=>o(484714),n=()=>o(56366),s=()=>o(637997),r=()=>o(959013),a=()=>o(751156),l=()=>o(755199),c=()=>o(406699),d=()=>o(805751),u=()=>o(419357),m=()=>o(939740),p=()=>o(859428),g=()=>o(553965),h=()=>o(962730),f=()=>o(765957),x=()=>o(463830),v=()=>o(519116),y=o(474848);function j(){const e=(0,n().K8)((()=>{var e;return null===(e=f().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.emoji_picker_skin_tone}),[]),t=(0,i().v3)(),o=(0,n().uB)(void 0,x().A);return(0,y.jsx)(p().A,{renderTooltip:()=>(0,y.jsx)(r().sA,{defaultMessage:"Select skin tone",id:"emojiPickerSkinTonePicker.selectSkinTone"}),placement:h().W.Bottom,render:i=>(0,y.jsx)(c().Ay,{buttonPopupStore:o,popupType:c().z7.Popup,renderOrigin:t=>(0,y.jsx)(u().KF,{iconLeading:()=>(0,y.jsx)("div",{style:{paddingLeft:3,paddingRight:3},children:void 0!==e?s().pi[e]:"✋"}),style:{fontSize:20,border:"none"},...(0,g().A)(t,i)}),render:o=>function(e){const{parent:t,environment:o,currentSkinTone:i}=e,n=s().pi.map(((e,i)=>({key:e,action:()=>{t.close(),b({environment:o,skinTone:i})},render:t=>(0,y.jsx)(v().A,{...t,insertEmoji:()=>{},emoji:e,variations:void 0,showTooltip:!1})})));return(0,y.jsx)(d().A,{debugName:"EmojiPickerSkinTonePicker",capture:!0,allowEsc:!0,children:(0,y.jsx)(m().Ay,{type:m().Oh.Horizontal,initialFocus:i,sections:[{key:"variations",render:e=>(0,y.jsx)("div",{style:{display:"flex",padding:4},...e}),items:n}]})})}({parent:o,environment:t,currentSkinTone:e}),...i})})}function b(e){const{environment:t,skinTone:o}=e,{currentUserSettingsStore:i}=f().default.state;i&&a().createAndCommit({userAction:"mediaPicker.setEmojiSkinTone",environment:t,canUndo:!0,perform:e=>{l().mJ({userSettingsStore:i,transaction:e,data:{emoji_picker_skin_tone:o}})}})}},251994:(e,t,o)=>{o.d(t,{A:()=>$,h:()=>Z});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(401497),a=()=>o(634201),l=()=>o(522419),c=()=>o(519143),d=()=>o(848392),u=()=>o(837420),m=()=>o(798880),p=()=>o(959013),g=()=>o(496603),h=()=>o(534177),f=()=>o(284371),x=()=>o(724368),v=()=>o(246826),y=()=>o(436572),j=()=>o(751156),b=()=>o(892632),S=()=>o(2220),k=()=>o(493823),A=()=>o(500507),C=()=>o(623580),M=()=>o(545805),w=()=>o(928600),I=()=>o(8980),P=()=>o(204063),E=()=>o(73332),B=()=>o(859428),T=()=>o(780054),R=()=>o(87878),D=()=>o(594794),F=()=>o(937182),U=()=>o(251057),L=()=>o(722872),W=()=>o(962730),z=()=>o(423219),_=()=>o(797162),O=()=>o(217429),H=()=>o(589994),V=()=>o(267419),N=o(474848);const K=(0,p().YK)({nameInputPlaceholder:{defaultMessage:"have-fun-with-it",id:"customEmojiUploadPopup.nameInput.placeholder"},urlPasteInputPlaceholder:{defaultMessage:"Paste a link to an image...",id:"customEmojiUploadPopup.urlPasteInput.placeholder"},nameInputDuplicateError:{defaultMessage:"Name already taken",id:"customEmojiUploadPopup.nameInput.duplicateError"},nameInputCharacterError:{defaultMessage:"Name can only contain lowercase letters, numbers, hyphens, or underscores",id:"customEmojiUploadPopup.nameInput.characterError"},nameInputLengthError:{defaultMessage:"Name must be less than 50 characters",id:"customEmojiUploadPopup.nameInput.lengthError"},fileUploadImageError:{defaultMessage:"Only images are supported",id:"customEmojiUploadPopup.fileUpload.imageError"},urlPasteHintImageError:{defaultMessage:"Pasted link does not contain an image.{br}Use {keyboardShortcut} to paste a different link",id:"customEmojiUploadPopup.urlPasteHint.imageError"},urlPasteInputImageError:{defaultMessage:"Pasted link does not contain an image",id:"customEmojiUploadPopup.urlPasteInput.imageError"},customEmojiLimitError:{defaultMessage:"Your workspace has reached the custom emoji limit of {customEmojiLimit}",id:"customEmojiUploadPopup.customEmojiLimit.error"},uploadReplaceButton:{defaultMessage:"Replace",id:"customEmojiUploadPopup.uploadButton.replace"}}),q="\\p{Ll}\\p{Lo}\\d_-";function $(e){const t=(0,n().v3)(),o=(0,p().tz)(),[c,d]=(0,i.useState)(""),[A,I]=(0,i.useState)(null),[F,$]=(0,i.useState)(null),[Z,Q]=(0,i.useState)(null),[X,ee]=(0,i.useState)(!1),[te,oe]=(0,i.useState)(""),ie=e.allowUrlPaste&&t.device.isDesktop,ne=e.allowUrlPaste&&t.device.isMobile,{existingEmojiStore:se,isEditing:re}=(0,s().K8)((()=>({existingEmojiStore:_().A.state.store,isEditing:_().A.state.isEditing})),[]),ae=(0,s().K8)((()=>null==se?void 0:se.getName()),[se]),le=(0,s().K8)((()=>(0,R().vZ)()),[]),ce=(0,s().K8)((()=>{var e;return le?(null===(e=z().A.getData(t,{spaceId:le.id}))||void 0===e?void 0:e.names)??new Set:new Set}),[t,le]),de=(0,s().K8)((()=>V().A.state.emojiByName),[]),ue=(0,s().K8)((()=>(0,R().wA)({spaceStore:le})),[le]),me=(0,s().K8)((()=>O().default.getConfigKey("custom_emojis_config","limit")),[]),pe=(0,i.useCallback)((e=>{if(d(e),0===e.length)return void I(null);new RegExp(`^[${q}]*$`,"u").test(e)?e.length>50?I(o.formatMessage(K.nameInputLengthError)):e===ae&&re||!ce.has(e)&&!de.hasOwnProperty(e)?I(null):I(o.formatMessage(K.nameInputDuplicateError)):I(o.formatMessage(K.nameInputCharacterError))}),[ae,re,ce,de,o]);function ge(e){const t=(0,l().pc)({source:e,secureFileConfigRootpath:T().A.secureFileConfig.rootPath,secureFileConfigHostname:T().A.secureFileConfig.hostname}),o=t?t.link:e,i=new Image;i.src=o,i.onload=()=>{$({type:"url",url:o,isExistingImage:!1}),Q(null)},i.onerror=()=>{Q(ie?K.urlPasteHintImageError:K.urlPasteInputImageError)}}(0,i.useEffect)((()=>{null!=se&&se.isDefined()&&(pe(se.getName()),$({type:"url",url:se.getUrl(),isExistingImage:!0}))}),[se,re,pe]);const he=void 0!==le&&(!e.confirmToAdd||X),fe=!re&&ce.size>=me,xe=he?Boolean(!c)||Boolean(!F)||Boolean(A)||c===ae&&(null==F?void 0:F.isExistingImage)&&re||fe:Boolean(!F);const ve=function(e){const{customEmojiLimitReached:t}=e,o=(0,n().v3)();return(0,r().IS)((e=>({wrapper:{padding:"0 16px",display:"flex",flexDirection:"column",fontSize:f().J.UIRegular.desktop},title:{marginTop:12,fontSize:f().J.UIRegular.desktop,color:e.text.primary,fontWeight:f().Wy.semibold},description:{marginTop:2,color:e.text.secondary,fontSize:f().J.UISmall.desktop},errorDescription:{marginTop:2,color:e.text.uiRedPrimary,fontSize:f().J.UISmall.desktop},textInputContainer:{marginTop:20},textInputLabel:{marginBottom:6,color:e.text.secondary,fontWeight:f().Wy.medium,fontSize:f().J.UISmall.desktop},nameErrorText:{marginTop:10,color:e.text.uiRedPrimary,fontSize:f().J.UISmall.desktop},imageErrorText:{marginTop:10,color:e.text.uiRedPrimary,fontSize:f().J.UISmall.desktop,textAlign:"center"},checkboxContainer:{marginTop:12,display:"flex",alignItems:"center",gap:8,fontSize:f().J.UIRegular.desktop,...t&&{color:e.text.quaternary}},buttonFooter:{marginTop:16,marginBottom:12,display:"flex",flexDirection:o.device.isMobile?"column-reverse":"row",gap:8,justifyContent:"space-between",alignItems:"center"},secondaryButton:{color:e.text.secondary},primaryButton:{...o.device.isMobile&&{width:"100%"}},pastePrompt:{marginTop:10,color:e.text.tertiary,textAlign:"center",fontSize:f().J.UISmall.desktop},disabledCheckbox:{stroke:e.stroke.secondary},tooltip:{maxWidth:240,textWrap:"wrap"},divider:{width:19,height:1,borderBottom:`1px solid ${e.darkDividerColor}`},dividerContainer:{display:"flex",gap:4,alignItems:"center",justifyContent:"center",marginTop:10,marginBottom:10,color:e.text.tertiary,textAlign:"center",fontSize:f().J.UISmall.desktop}})),[o.device.isMobile,t])}({customEmojiLimitReached:fe}),ye=e.showTitle?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{style:ve.title,children:re?(0,N.jsx)(p().sA,{id:"customEmojiUploadPopup.title.edit",defaultMessage:"Edit custom emoji"}):(0,N.jsx)(p().sA,{id:"customEmojiUploadPopup.title.add",defaultMessage:"Add custom emoji"})}),fe?(0,N.jsx)("div",{style:ve.errorDescription,children:(0,N.jsx)(p().sA,{...K.customEmojiLimitError,values:{customEmojiLimit:me.toLocaleString()}})}):(0,N.jsx)("div",{style:ve.description,children:(0,N.jsx)(p().sA,{id:"customEmojiUploadPopup.description",defaultMessage:"Custom emoji can be used by anyone in your workspace"})})]}):null,je=(0,N.jsx)(G,{image:F,onFileChanged:e=>{if(null===e)return void $(null);(null==e?void 0:e.name)&&(""===c||"file"===(null==F?void 0:F.type)&&J(F.file.name)===c)&&pe(J(e.name)),$({file:e,type:"file"})},isSavingAsCustomEmoji:he,largeEmoji:e.largeEmoji,hideReplaceButton:e.allowUrlPaste,setError:Q,disabled:fe&&he}),be=(0,s().K8)((()=>{const e=x().getKeyboardShortcuts();return(0,U().dK)({name:"paste",shortcuts:e,environment:t})}),[t]),Se=ie&&null===F&&!Boolean(Z)?(0,N.jsx)("div",{style:ve.pastePrompt,children:(0,N.jsx)(p().sA,{id:"customEmojiUploadPopup.pastePrompt.label",defaultMessage:"or {keyboardShortcut} to paste an image link",values:{keyboardShortcut:be}})}):null,ke=ne&&null===F?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{style:ve.dividerContainer,children:[(0,N.jsx)("div",{style:ve.divider}),(0,N.jsx)(p().sA,{id:"customEmojiUploadPopup.divider.label",defaultMessage:"or"}),(0,N.jsx)("div",{style:ve.divider})]}),(0,N.jsx)(C().A,{placeholder:o.formatMessage(K.urlPasteInputPlaceholder),value:te,onChange:e=>oe(e.target.value),type:"text",autoComplete:"off"})]}):null,Ae=Boolean(Z)?(0,N.jsx)("div",{style:ve.imageErrorText,children:(0,N.jsx)(p().sA,{...Z,values:{br:(0,N.jsx)("br",{}),keyboardShortcut:be}})}):null,Ce=t.device.isDesktop&&ue&&e.confirmToAdd&&null!==F?(0,N.jsx)(B().A,{style:ve.tooltip,placement:W().W.Bottom,alignment:W().C.Start,disableTooltip:!fe,renderTooltip:()=>(0,N.jsx)(p().sA,{...K.customEmojiLimitError,values:{customEmojiLimit:me.toLocaleString()}}),render:e=>(0,N.jsxs)("label",{...e,style:ve.checkboxContainer,htmlFor:"confirmToAddCheckbox",children:[(0,N.jsx)(E().T,{id:"confirmToAddCheckbox",size:14,checked:X,onClick:()=>ee(!X),disabled:fe,stroke:fe?ve.disabledCheckbox.stroke:void 0}),(0,N.jsx)(p().sA,{id:"customEmojiUploadPopup.confirmToAddCheckbox.label",defaultMessage:"Add to workspace emoji library"})]})}):null,Me=he&&(!e.allowUrlPaste||e.allowUrlPaste&&null!==F)?(0,N.jsxs)("label",{style:ve.textInputContainer,htmlFor:"emojiName",children:[(0,N.jsx)("div",{style:ve.textInputLabel,children:(0,N.jsx)(p().sA,{id:"customEmojiUploadPopup.input.label",defaultMessage:"Emoji name"})}),(0,N.jsx)(C().A,{id:"emojiName",placeholder:o.formatMessage(K.nameInputPlaceholder),value:c,onChange:e=>pe(e.target.value),type:"text",autoFocus:!0,focus:!0,onSubmit:e=>{e.preventDefault()},autoComplete:"off",disabled:fe}),Boolean(A)&&(0,N.jsx)("div",{style:ve.nameErrorText,children:A})]}):null,we=(0,N.jsxs)("div",{style:ve.buttonFooter,children:[e.allowUrlPaste&&null!==F?(0,N.jsx)(k().p,{style:ve.secondaryButton,onClick:()=>{$(null),Q(null),d(""),I(null),ee(!1),oe("")},children:(0,N.jsx)(p().sA,{id:"customEmojiUploadPopup.backButton.label",defaultMessage:"Back"})}):t.device.isDesktop?(0,N.jsx)(k().p,{style:ve.secondaryButton,onClick:()=>{var t;_().A.dismiss(),null===(t=e.onCancel)||void 0===t||t.call(e)},children:(0,N.jsx)(p().sA,{id:"customEmojiUploadPopup.cancelButton.label",defaultMessage:"Cancel"})}):null,ne&&null===F?(0,N.jsx)(P().A,{onClick:()=>ge(te),disabled:0===te.length,style:ve.primaryButton,children:(0,N.jsx)(p().sA,{id:"customEmojiUploadPopup.nextButton.label",defaultMessage:"Next"})}):(0,N.jsx)(P().A,{onClick:function(){var o;xe||(he?re&&void 0!==se?async function(e){const{environment:t,name:o,existingEmojiStore:i,image:n}=e,s=i.getModel();if(!s)return;if(n.isExistingImage)j().createAndCommit({userAction:"customEmojiActions.rename",environment:t,canUndo:!0,perform:e=>{j().applyOperation({store:i,operation:s.ops.rename(o),transaction:e})}}),await H().transactionQueue.awaitRecordTransaction(i.pointer),y().D6({label:(0,N.jsx)(Y,{name:o})});else{const e=async e=>{j().createAndCommit({userAction:"customEmojiActions.replaceImageAndRename",environment:t,canUndo:!0,perform:t=>{j().applyOperation({store:i,operation:s.ops.setUrl(e),transaction:t}),j().applyOperation({store:i,operation:s.ops.rename(o),transaction:t})}}),await H().transactionQueue.awaitRecordTransaction(i.pointer),y().D6({label:(0,N.jsx)(Y,{name:o})})};"file"===n.type?b().QM({environment:t,file:n.file,bucket:"public",onComplete:e}):"url"===n.type?e(n.url):(0,h().HB)(n)}_().A.dismiss()}({environment:t,name:c,existingEmojiStore:se,image:F}):((0,S().u)({environment:t,event:{eventName:"create_custom_emoji",eventProperties:{entrypoint:e.entrypoint,is_first_emoji:0===ce.size}}}),function(e){const{environment:t,name:o,currentSpaceStore:i,uploadFileEventHandlers:n,image:s}=e,r=async e=>{const s=(0,D().JH)({environment:t,table:u().e,spaceId:i.getSpaceId()});if(j().createAndCommit({userAction:"customEmojiActions.createCustomEmoji",environment:t,canUndo:!0,perform:n=>{v().eC({environment:t,table:u().e,inMemoryRecordCache:i.inMemoryRecordCache,transaction:n,value:{id:s.id,url:e,name:o,file_ids:[],space_id:s.spaceId,created_by_id:t.currentUser.id,created_by_table:m().oo,created_time:Date.now(),alive:!0}})}}),await H().transactionQueue.awaitRecordTransaction(s),y().D6({label:(0,N.jsx)(p().sA,{id:"uploadCustomEmoji.success",defaultMessage:"{name} has been added to your workspace",values:{name:o}})}),null!=n&&n.onComplete){const e=a().qg.toString(a().qg.fromPointer(s));n.onComplete(e)}};"file"===s.type?b().QM({...n,environment:t,file:s.file,bucket:"public",onComplete:r}):"url"===s.type?r(s.url):(0,h().HB)(s);_().A.dismiss()}({environment:t,name:c,currentSpaceStore:le,uploadFileEventHandlers:e.uploadFileEventHandlers,image:F})):null===(o=e.onUploadWithoutSaving)||void 0===o||o.call(e,F))},disabled:xe,style:ve.primaryButton,children:(0,N.jsx)(p().sA,{id:"customEmojiUploadPopup.saveButton.label",defaultMessage:"Save"})})]});let Ie;return Ie=t.device.isMobile?{menuType:L().gu.ActionSheet}:{menuType:L().gu.Popup,minWidth:280},(0,N.jsx)(w().A,{...Ie,children:(0,N.jsx)(M().A,{debugName:"CustomEmojiUploadPopup",capture:!0,onUp:g().D_,onDown:g().D_,onLeft:g().D_,onRight:g().D_,onBackspace:g().D_,onSelectAll:g().D_,onUndo:g().D_,onRedo:g().D_,onTab:g().D_,onUntab:g().D_,onPaste:ie&&null===F?function(e){e.preventDefault(),ge(e.clipboardData.getData("text/plain"))}:g().D_,children:(0,N.jsxs)("div",{style:ve.wrapper,children:[ye,je,Se,ke,Ae,Ce,Me,we]})})})}function G(e){const t=(0,n().v3)(),o=(0,p().tz)(),[s,a]=(0,i.useState)(null),{onFileChanged:l,image:u,isSavingAsCustomEmoji:m,largeEmoji:g,hideReplaceButton:x,setError:v,disabled:y}=e;(0,i.useEffect)((()=>{if(null!==u)if("file"===u.type)if(u.file instanceof File){const e=new FileReader;e.onload=e=>{e.target&&"string"==typeof e.target.result&&a(e.target.result)},e.readAsDataURL(u.file)}else u.file.dataURL&&a(u.file.dataURL);else"url"===u.type?a(u.url):(0,h().HB)(u);else a(null)}),[u]);const j=(0,r().IS)((e=>({wrapper:{marginTop:20,display:"flex",flexDirection:"column",alignItems:"stretch"},dropZone:{backgroundColor:e.inputBackground,borderRadius:4},dropZoneInnerEmpty:{height:"100%",display:"flex",flexDirection:"row",gap:8,padding:14,color:e.text.secondary,justifyContent:"center"},dropZoneInnerWithEmoji:{display:"flex",flexDirection:"column",padding:g?16:12,...!x&&{paddingBottom:4},alignItems:"center",gap:4},buttonCaption:{fontSize:f().J.UISmall.desktop,color:e.text.secondary,fontWeight:f().Wy.medium},buttonIcon:{fill:e.icon.secondary,marginRight:4},previewLabel:{fontSize:f().J.UISmall.desktop,color:e.text.secondary,marginBottom:4},emojiContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:6},emojiImage:{width:g?80:48,height:g?80:48,padding:g?6:8,borderRadius:8,borderWidth:1,borderStyle:"solid",borderColor:e.darkDividerColor,objectFit:m?"contain":"cover"},darkBackground:{background:e.primaryBlack},lightBackground:{background:e.white}})),[m,g,x]),S=(0,i.useCallback)((e=>{v(null),l(e??null)}),[l,v]),C=(0,i.useCallback)((async()=>{const e=await b().dA({environment:t,supportsMobileNativeFileUpload:!1,multiple:!1,accept:"image/jpeg, image/png, image/gif, image/webp, image/avif, image/svg+xml"});e.length&&((0,F().B7)({fileMimeType:e[0].type,allowedType:F().Dn})?S(e[0]):v(K.fileUploadImageError))}),[S,v,t]);return(0,N.jsx)("div",{style:j.wrapper,children:(0,N.jsx)(A().V,{type:F().Dn,style:j.dropZone,dropTargetKey:"customEmoji",onDropFile:e=>{"invalidFileDrop"!==e.type?(v(null),e.file&&S(e.file)):v(K.fileUploadImageError)},disabled:y,children:s?(0,N.jsxs)("div",{style:j.dropZoneInnerWithEmoji,children:[(0,N.jsx)("div",{style:j.previewLabel,children:(0,N.jsx)(p().sA,{id:"customEmojiUploadPopup.preview.label",defaultMessage:"Preview"})}),(0,N.jsxs)("div",{style:j.emojiContainer,children:[(0,N.jsx)("img",{style:{...j.emojiImage,...j.lightBackground},src:s,alt:"Light Mode Image"}),(0,N.jsx)("img",{style:{...j.emojiImage,...j.darkBackground},src:s,alt:"Dark Mode Image"})]}),!x&&(0,N.jsx)(k().p,{iconLeading:e=>(0,c().D)({...e,...j.buttonIcon}),onClick:C,"aria-label":o.formatMessage(K.uploadReplaceButton),disabled:y,disabledFeedback:y,children:(0,N.jsx)("div",{style:j.buttonCaption,children:o.formatMessage(K.uploadReplaceButton)})})]}):(0,N.jsxs)(k().p,{style:j.dropZoneInnerEmpty,onClick:C,disabled:y,disabledFeedback:y,children:[(0,N.jsx)(I().I,{icon:d().M,color:"secondary"}),(0,N.jsx)(p().sA,{id:"customEmojiUploadPopup.uploadButton.label",defaultMessage:"Upload an image"})]})})})}const Z=function(){const{open:e,originRect:t,entrypoint:i}=(0,s().K8)((()=>_().A.state.open?{open:!0,originRect:_().A.state.originRect,entrypoint:_().A.state.entrypoint}:{open:!1,originRect:void 0,entrypoint:void 0}),[]),n=(0,s().K8)((()=>{if(_().A.state.open)return _().A.state.uploadFileEventHandlers}),[]);return(0,N.jsx)(o(897119).Ay,{popupType:o(377586).n.Popup,open:e,originRect:t,placementToOrigin:W().W.Bottom,alignmentToOrigin:W().C.Start,onDismiss:()=>_().A.dismiss(),onClosed:()=>_().A.reset(),render:()=>(0,N.jsx)($,{allowUrlPaste:!1,largeEmoji:!1,showTitle:!0,confirmToAdd:!1,entrypoint:i,uploadFileEventHandlers:n}),sameWidthAsOrigin:!1})};function Y(e){let{name:t}=e;return(0,N.jsx)(p().sA,{id:"editCustomEmoji.success",defaultMessage:"{name} has been edited",values:{name:t}})}function J(e){let t=e;const o=e.lastIndexOf(".");-1!==o&&(t=e.slice(0,o));const i=new RegExp(`[^${q}]`,"gu");return t.toLocaleLowerCase().replace(i,"-")}},278611:(e,t,o)=>{o.d(t,{HR:()=>wt,aD:()=>yt,Ay:()=>mt});o(898992),o(672577),o(581454);var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(401497),a=()=>o(522419),l=()=>o(278238),c=()=>o(340498),d=o(474848);const u={viewBox:"0 0 20 20",fittedViewBox:"2.47 3.08 15.06 13.83",directional:!0,svg:(0,d.jsx)("path",{d:"m14.867 3.268 2.475 2.475a.625.625 0 0 1 0 .884l-2.475 2.475a.625.625 0 0 1-.884-.884l1.405-1.405h-1.727a3.38 3.38 0 0 0-2.883 1.62L9.825 10l.953 1.566a3.38 3.38 0 0 0 2.883 1.621h1.727l-1.405-1.405a.625.625 0 0 1 .884-.884l2.475 2.475a.625.625 0 0 1 0 .884l-2.475 2.475a.625.625 0 1 1-.884-.884l1.411-1.41h-1.733a4.63 4.63 0 0 1-3.951-2.222l-.617-1.013-.618 1.016a4.63 4.63 0 0 1-3.951 2.22H3.1a.625.625 0 1 1 0-1.25h1.424a3.38 3.38 0 0 0 2.883-1.62L8.362 10l-.955-1.569a3.38 3.38 0 0 0-2.883-1.62H3.1a.625.625 0 0 1 0-1.25h1.424c1.614 0 3.112.841 3.951 2.22l.618 1.017.617-1.014a4.63 4.63 0 0 1 3.951-2.221h1.733l-1.41-1.41a.625.625 0 0 1 .883-.885"})},m=(0,c().wt)("arrowIntersectRight",u),p=(0,c().wt)("giphyLogo",{viewBox:"0 0 12 12",svg:(0,d.jsx)("path",{d:"M 1.332031 0 L 1.332031 12 L 10.667969 12 L 10.667969 4.332031 L 9.332031 5.667969 L 9.332031 10.667969 L 2.667969 10.667969 L 2.667969 1.335938 L 5 1.335938 L 6.332031 0 Z M 6.667969 0 L 6.667969 4 L 10.667969 4 L 10.667969 2.667969 L 9.332031 2.667969 L 9.332031 1.335938 L 8 1.335938 L 8 0 "})});var g=()=>o(381138),h=()=>o(654601);const f=(0,c().wt)("unsplashLogo",{viewBox:"0 0 12 12",svg:(0,d.jsx)("path",{d:"M3.75 3.375V0H8.25V3.375H3.75ZM8.25 5.25H12V12H0V5.25H3.75V8.625H8.25V5.25Z"})});var x=()=>o(959013),v=()=>o(751735),y=()=>o(381349),j=()=>o(496603),b=()=>o(901997),S=()=>o(559926),k=()=>o(415559),A=()=>o(896628),C=()=>o(436572),M=()=>o(892632),w=(o(944114),()=>o(798880)),I=()=>o(847743),P=()=>o(765957),E=()=>o(630116),B=()=>o(38337),T=()=>o(792540),R=()=>o(24157),D=()=>o(524702);function F(e){const{placeholder:t,onSubmit:o}=e,n=(0,r().IS)((e=>({wrap:{flexGrow:1,flexShrink:1,boxShadow:e.inputBoxShadow,borderRadius:6,padding:"6px 10px",marginLeft:8,marginRight:8,overflow:"hidden",fontSize:14,..."dark"===e.mode?{backgroundColor:e.inputBackground}:{}},text:{minHeight:60},placeholder:{minHeight:60}})),[]),s=(0,i.useCallback)((e=>{if(o&&!e.shiftKey)o();else{if("editing"!==R().default.state.mode)return}}),[o]);return(0,d.jsx)("div",{style:n.wrap,className:B().CCX,children:(0,d.jsx)(D().A,{placeholder:t,disabled:!1,store:e.store,style:n.text,placeholderStyle:n.placeholder,pasteBehavior:"inline",disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:!0,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,onEnter:s,disableMobileActionBar:!1,disabledMentionTypes:{reminder:!0},disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,inPageFind:T().Os.none})})}var U=()=>o(736767),L=()=>o(89924),W=()=>o(327165);function z(e){const{tab:t}=e,o=(0,n().v3)(),{store:s}=(0,I().AI)({initialValue:void 0,onChange:j().D_}),a=(0,r().IS)((e=>({desktopStyle:{marginTop:8,marginBottom:6},sparkleStyle:{width:16,height:16,marginRight:4},captionStyle:{textAlign:o.device.isMobile?"left":"center"}})),[o.device.isMobile]),l=(0,i.useCallback)((async()=>{const o=s.getValue();if(!o)return;const i=[];for(const e of o){var n;if("‣"===e[0]&&null!==(n=e[1])&&void 0!==n&&n.length){if("d"===e[1][0][0]){const t=e[1][0][1].start_date;i.push(t)}else if("u"===e[1][0][0]){const t=e[1][0][1],{currentSpaceStore:o}=P().default.state;if(!o)return{users:[],bots:[]};const n=E().LU.createChildStore(o,{table:w().oo,id:t});await n.load();const s=n.getEmail();i.push(s||"")}}else i.push(e[0])}const r=i.join(""),a=t.integration;if(r){e.store.setState({...e.store.state,loading:!0});const o=await t.getResults(r,a);e.store.setState({...e.store.state,loading:!1,result:o.results})}}),[s,e.store,t]);return(0,d.jsxs)("div",{children:[(0,d.jsx)(L().A,{desktopStyle:a.desktopStyle,children:(0,d.jsx)(F,{placeholder:e.placeholder,onSubmit:l,store:s})}),(0,d.jsx)(L().A,{children:(0,d.jsx)(W().A,{onClick:l,title:t.buttonText||(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(x().sA,{defaultMessage:"Ask",id:"mediaPicker.aiSourcePickerTab.askButtonText"}),(0,d.jsx)("div",{children:(0,h().X)(a.sparkleStyle)})]}),fullWidth:e.isSmallWidth})}),t.caption?(0,d.jsx)(U().A,{shouldWrapCaption:!0,caption:t.caption,style:a.captionStyle}):void 0]})}var _=()=>o(251126),O=()=>o(493823),H=()=>o(760217),V=()=>o(500507),N=()=>o(854672),K=()=>o(419357),q=()=>o(135221),$=()=>o(864943),G=()=>o(204063),Z=()=>o(859428),Y=()=>o(320865),J=()=>o(987017),Q=()=>o(780054),X=()=>o(210741);var ee=()=>o(937182),te=()=>o(722872),oe=()=>o(607859),ie=()=>o(962730),ne=()=>o(757695);class se extends ne().Store{getInitialState(){return{inputValue:"",focus:!1,result:void 0,loading:!1,hover:""}}}const re=se;class ae extends ne().Store{getInitialState(){return{allIcons:{},recentIcons:[],loadIconCount:0}}}const le=new ae;var ce=()=>o(969141),de=()=>o(118849),ue=()=>o(134217),me=()=>o(749240),pe=()=>o(948033),ge=()=>o(704152),he=()=>o(807683),fe=()=>o(360083),xe=()=>o(972435);function ve(e){let{pageCover:t,tab:o}=e;const{coverUrl:n,title:s,subtitle:a,position:l}=t,c=(0,r().IS)((e=>({container:{width:"25%",padding:3},tooltip:{maxWidth:180,whiteSpace:"normal"},title:{color:e.text.contrastPrimary},subtitle:{color:e.text.contrastSecondary},buttonHover:{opacity:.85},imageBox:{width:"100%",height:64,objectFit:"cover",objectPosition:`center ${100*(l||0)}%`,borderRadius:4}})),[l]),u=(0,i.useCallback)((()=>{o.onChange({url:n,position:l})}),[o,n,l]);return(0,d.jsx)("div",{style:c.container,children:(0,d.jsx)(Z().A,{originGap:0,placement:ie().W.Bottom,delayThreshold:600,renderTooltip:()=>(0,d.jsxs)("div",{style:c.tooltip,children:[(0,d.jsx)("span",{style:c.title,children:xe().A.formatMessage(s)})," ",(0,d.jsx)("span",{style:c.subtitle,children:a?xe().A.formatMessage(a):void 0})]}),render:e=>(0,d.jsx)(ge().A,{hoveredStyle:c.buttonHover,...e,onClick:u,children:(0,d.jsx)(fe().A,{url:n,width:200,isAuthenticated:!1,render:(e,t)=>t&&(0,d.jsx)(he().Ay,{src:t,style:c.imageBox})})})})})}const ye=function(e){let{tab:t}=e;const[n,s]=(0,i.useState)({}),[a,l]=(0,i.useState)(!1);(0,i.useEffect)((()=>{(async()=>{l(!0),await o(748539).f.load().then((e=>{s(e),l(!1)}))})()}),[]);const c=(0,pe().b0)(),u=(0,r().IS)((e=>({container:{paddingBottom:8},groupTitle:{marginLeft:-5},loader:{height:300}})),[]);return a?(0,d.jsx)("div",{style:u.loader,children:(0,d.jsx)(o(555267).A,{})}):(0,d.jsx)("div",{style:u.container,children:Object.keys(n).map((e=>{const i=n[e];return(0,d.jsx)(L().A,{title:(0,d.jsx)(o(187485).A,{style:u.groupTitle,href:i.url,external:!0,children:(0,d.jsx)(O().p,{isGray:!0,size:"xs",children:xe().A.formatMessage(i.title)})}),noTextOverflow:!0,children:(0,d.jsx)("div",{style:c.galleryWrap,children:i.items.map(((e,o)=>(0,d.jsx)(ve,{pageCover:e,tab:t},o)))})},e)}))})};var je=()=>o(449506),be=()=>o(331542),Se=()=>o(125565),ke=()=>o(719147),Ae=()=>o(361330);const Ce=(0,x().YK)({giphyPlaceholder:{id:"mediaPicker.giphyPlaceholder.text",defaultMessage:"Search GIPHY"}});function Me(e){const{tab:t,results:o,ready:n,isSmallWidth:s,giphyRandomId:a}=e,l=(0,r().IS)((e=>({loading:(0,pe().$n)(),captionMenuItem:{textAlign:s?"left":"center",color:e.text.secondary}})),[s]);return n?!o||o&&!o.length?(0,d.jsx)(U().A,{shouldWrapCaption:!0,caption:(0,d.jsx)(x().sA,{defaultMessage:"No results found",id:"mediaPicker.giphy.noResultsText"}),style:l.captionMenuItem}):(0,d.jsxs)(i.Fragment,{children:[o.map(((e,o)=>(0,d.jsx)(we,{tab:t,image:e,giphyRandomId:a},o))),(0,d.jsx)(U().A,{shouldWrapCaption:!0,caption:(0,d.jsx)(x().sA,{defaultMessage:"Search to find more results.",id:"mediaPicker.giphy.searchText"}),style:l.captionMenuItem})]}):(0,d.jsx)("div",{style:l.loading,children:(0,d.jsx)(be().A,{})})}function we(e){var t;let{tab:o,image:s,giphyRandomId:a}=e;const l=(0,n().v3)(),{device:c}=l,u=(0,r().IS)((e=>({container:{width:c.isMobile?"33%":"25%",padding:3},hoveredButton:{opacity:.85},imageBox:{width:"100%",height:64,objectFit:"cover",objectPosition:"center 0%",borderRadius:4},label:{marginTop:2,marginBottom:4}})),[c.isMobile]),m=(0,i.useCallback)((async()=>{var e;if(o.onChange({url:s.imageUrl}),null!==(e=s.analytics)&&void 0!==e&&e.onclick)try{var t;await je().callApi({eventName:"postGiphyAnalytics",environment:l,data:{url:null===(t=s.analytics)||void 0===t?void 0:t.onclick.url,timestamp:Date.now(),random_id:a}})}catch(i){}}),[l,a,s.imageUrl,o,null===(t=s.analytics)||void 0===t?void 0:t.onclick]);return(0,d.jsxs)("div",{style:u.container,children:[(0,d.jsx)(ge().A,{hoveredStyle:u.hoveredButton,onClick:m,children:(0,d.jsx)(he().Ay,{src:s.thumbUrl,style:u.imageBox})}),(0,d.jsx)(Se().A,{isSmall:!0,isSecondaryColor:!0,style:u.label,children:(0,d.jsx)(x().sA,{defaultMessage:"by <inlinetextlink>{authorName}</inlinetextlink>",id:"mediaPicker.giphy.byAuthor",values:{authorName:s.authorName||"GIPHY",inlinetextlink:e=>(0,d.jsx)(ke().A,{external:!0,href:s.imageUrl,children:e})}})})]},s.id)}const Ie=function(e){let{tab:t,isSmallWidth:o}=e;const[s,r]=(0,i.useState)(""),[a,l]=(0,i.useState)(""),c=(0,n().v3)(),{device:u}=c,m=(0,pe().b0)(),p=(0,i.useCallback)((async()=>{if(!j().Im(s))return s;const e=await je().callApi({eventName:"getGiphyRandomId",environment:c,data:{}});return"success"===e.type?(r(e.data.random_id),e.data.random_id):void 0}),[c,s]);return(0,d.jsxs)("div",{style:{paddingBottom:8},children:[(0,d.jsx)(L().A,{desktopStyle:{marginTop:8,marginBottom:6},children:(0,d.jsx)(K().Ay,{value:a,placeholder:xe().A.formatMessage(Ce.giphyPlaceholder),showClearButton:!0,focus:!u.isMobile||void 0,onChange:e=>l(e.target.value)})}),(0,d.jsx)("div",{style:m.galleryWrap,children:(0,d.jsx)(_().A,{request:a,debounce:Ae().tu,performRequest:async e=>{await p();const t=await je().callApi({eventName:"searchGiphyImages",environment:c,data:{query:e,page:0}});if("success"===t.type)return t.data.results;throw t.error},render:(e,i,n)=>(0,d.jsx)(Me,{tab:t,results:i,ready:n,isSmallWidth:o,giphyRandomId:s})})})]})};o(354520);var Pe=()=>o(852507),Ee=()=>o(634201),Be=()=>o(187174),Te=()=>o(994310),Re=()=>o(284371),De=()=>o(939740),Fe=()=>o(228927),Ue=()=>o(974233),Le=()=>o(970585),We=()=>o(486666),ze=()=>o(406699),_e=()=>o(545805),Oe=()=>o(553965),He=()=>o(463830);const Ve=(0,i.forwardRef)((function(e,t){const{shouldOpenVariations:o,icon:i,focused:n,color:r,onClick:a,onMouseEnter:l,variations:c,hideTooltip:u,insertIcon:m,id:p,role:g}=e,h=(0,s().uB)(void 0,He().A);return o?(0,d.jsx)($e,{ref:t,id:p,icon:i,focused:n,color:r,onClick:a,onMouseEnter:l,variations:c,hideTooltip:u,insertIcon:m,buttonPopupStore:h,role:g}):(0,d.jsx)(Ke,{ref:t,id:p,icon:i,focused:n,color:r,onClick:a,onMouseEnter:l,variations:c,hideTooltip:u,role:g})})),Ne=Ve,Ke=(0,i.forwardRef)((function(e,t){const{events:o,icon:s,focused:a,color:l,onClick:c,onMouseEnter:u,variations:m,hideTooltip:p,id:g,role:h}=e,f=(0,r().DP)(),x=(0,n().v3)(),{isMenuListFocusVisible:v}=(0,i.useContext)(De().VU),y=a&&v,j=(0,r().IS)((e=>({iconButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,...x.device.isMobile?{width:We().UA,height:We().UA,fontSize:We().ru}:{width:We().Sq,height:We().Sq,fontSize:We().Zl},...y&&{boxShadow:e.buttonBlueFocusRing}},iconImage:{...x.device.isMobile?{width:We().ru,height:We().ru}:{width:We().Zl,height:We().Zl}}})),[x.device.isMobile,y]),b=(m.tooltip?m.tooltip:s).replaceAll("-"," ").replaceAll("_"," "),S=`${b} ${l}`,k="dark"===f.mode?m.dark:m.light;return(0,d.jsx)(Z().A,{forceVisibleState:!!y||void 0,placement:y?ie().W.Bottom:void 0,allowHover:Boolean(s&&!p),disableTooltip:p,renderTooltip:()=>b,closeDelay:0,render:e=>(0,d.jsx)(ge().A,{ref:t,ariaLabel:S,id:g,role:h,focused:a,onClick:c,...(0,Oe().A)(o||{},(0,Oe().A)({onMouseEnter:u},e)),ignoreLocalHoverState:!0,style:j.iconButton,disallowTabbing:!0,children:(0,d.jsx)("img",{alt:S,src:`data:image/svg+xml;utf8,${encodeURIComponent(k[l])}`,style:j.iconImage,onContextMenu:e=>e.preventDefault()})},s)})}));function qe(e){const{parent:t,icon:i,variations:n,insertIcon:s}=e,a=(0,r().DP)(),c=(0,r().IS)((()=>({variationMenu:{display:"flex",padding:2,gap:1}})),[]),u="dark"===a.mode?n.light:n.dark,m=Object.keys(u).sort(((e,t)=>l().v3.indexOf(e)-l().v3.indexOf(t))).map((o=>{const r=`${i}_${o}`;return{key:r,action:e=>{t.close(),s(`/icons/${r}.svg`)},render:t=>(0,d.jsx)(Ve,{...e,...t,icon:r,color:o,variations:n,shouldOpenVariations:!1,hideTooltip:!0})}}));return(0,d.jsx)(o(805751).A,{debugName:"IconPickerMenuItem",capture:!0,allowEsc:!0,children:(0,d.jsx)(De().Ay,{type:De().Oh.Grid,getItemsPerRowForSection:()=>5,initialFocus:0,sections:[{key:"variations",render:e=>(0,d.jsx)("div",{...e}),items:m}],renderRow:(e,t)=>(0,d.jsx)("div",{role:"row",style:c.variationMenu,children:e},t)})})}const $e=(0,i.forwardRef)((function(e,t){const{icon:o,focused:n,color:s,onClick:r,onMouseEnter:a,variations:l,hideTooltip:c,insertIcon:u,buttonPopupStore:m,id:p,role:g}=e,h=(0,i.useCallback)((()=>function(e){e.setState({...e.state,open:!1})}(m)),[m]),f=(0,i.useCallback)((e=>function(e,t){e.preventDefault(),t.setState({...t.state,open:!0})}(e,m)),[m]),{isMenuListFocusVisible:x}=(0,i.useContext)(De().VU);return(0,d.jsx)(_e().A,{debugName:"IconPickerMenuItem",capture:n&&x,onEnter:f,children:(0,d.jsx)(ze().Ay,{buttonPopupStore:m,popupType:ze().z7.Popup,renderOrigin:e=>(0,d.jsx)(Ke,{ref:t,id:p,icon:o,focused:n,color:s,onClick:r,onMouseEnter:a,variations:l,hideTooltip:c,events:e,role:g}),render:e=>(0,d.jsx)(_e().A,{debugName:"IconPickerMenuItem.VariationMenuComponent",capture:n,onEsc:h,children:(0,d.jsx)(qe,{parent:e,icon:o,variations:l,insertIcon:u})})})},o)})),Ge={display:"flex",flexDirection:"column"},Ze="recentIcons",Ye=100,Je=(0,x().YK)({noResults:{defaultMessage:"No results",id:"iconPicker.noResults.message"}});function Qe(e){const{filter:t,enforceIconColor:o,onSubmit:a,menuRef:l,iconLoggingData:c,onNoResults:u,comboboxProps:m}=e,p=(0,n().v3)(),g=(0,r().DP)(),{isDesktop:h,isMobile:f}=(0,n().Y0)(),[v,y]=(0,i.useState)(!0),[S,k]=(0,i.useState)(void 0),{loadIconCount:A,recentIcons:C}=(0,s().O$)(le),M=(0,s().uB)(void 0,Le().A),w=(0,s().K8)((()=>{var e;return null===(e=P().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.icon_picker_color}),[]),I=(0,te().Tf)(),E=(0,s().K8)((()=>Math.floor((0,pe().so)(p,l,I))),[p,l,I]),B=(0,s().K8)((()=>(0,pe().uu)(p)),[p]);(0,Pe().l)((()=>{const e=Te().A.get(Ze);le.update((t=>({...t,recentIcons:e||[]})))}));const[T]=(0,Be().Yb)((async()=>{try{const e=await async function(e,t,o){if(!j().Im(o.allIcons))return o.allIcons;const i=await(0,Ue().default)({environment:t,url:e,method:"GET",format:"json",mode:"cors"});if("success"===i.type)return le.setState({...o,allIcons:i.data}),i.data;throw i.error}("/icons/all",p,le.state);k(e),y(!1)}catch(e){throw e}}),[p]),R=(0,i.useMemo)((()=>Ee().f7(e.filter)??""),[e.filter]),D=(0,i.useCallback)((e=>{const t=function(e){return e.replace("_dark","")}(e);a(t);const o=t.split(/[/_.]/),i=o[2],n=o[3];!function(e,t){const o=Te().A.get(Ze),i=j().KC([e],o),n=j().s(i,t);Te().A.set(Ze,n),le.update((e=>({...e,recentIcons:n})))}(i,We().Te*B),c&&b().aU(p,"pick_colored_icon",{icon:i,color:n,...c})}),[p,a,c,B]),F=(0,i.useCallback)(((e,t)=>{const i=o??w??"gray",n=`/icons/${`${e}_${i}`}.svg`;return{key:n,action:()=>D(n),render:n=>(0,d.jsx)(Ne,{...n,icon:e,color:i??"gray",variations:t,insertIcon:D,shouldOpenVariations:!o&&!w})}}),[o,D,w]),W=(0,i.useCallback)((e=>{if(!e)return[];const o=function(e,t){const o=j().oE(Object.keys(e).map((o=>{const i=e[o],n=((null==i?void 0:i.tooltip)??o).replace("-"," "),s=[n,...i.tags],r=s.findIndex((e=>e===t));if(-1!==r)return[0===r?100:50,o];const a=s.findIndex((e=>e.startsWith(t))),l=n.includes(t);return 0!==a&&l?[40,o]:-1!==a?[0===a?80:30,o]:void 0})));return j().Ul(o,(e=>-e[0])).map((e=>e[1]))}(e,t.toLowerCase());return 0===o.length?[]:[{key:"search-results",items:o.map((t=>F(t,e[t]))),render:e=>(0,d.jsx)(L().A,{children:(0,d.jsx)("div",{style:(0,pe().ze)(p,g,I),children:e.children})},e.key)}]}),[t,F,p,g,I]),z=(0,i.useCallback)(((e,t)=>{if(!t)return;let o=[];return o="recent"===e.id?C||[]:Object.keys(t),0!==o.length?{key:e.id,items:o.map((e=>{if(void 0!==t[e])return F(e,t[e])})).filter(Boolean),render:t=>(0,d.jsx)(L().A,{title:e.title,children:(0,d.jsx)("div",{style:(0,pe().ze)(p,g,I),children:t.children})},t.key)}:void 0}),[C,F,p,g,I]),_=(0,i.useCallback)((e=>{const o=j().oE(function(e){return j().oE([!e&&{id:"recent",title:(0,d.jsx)(x().sA,{id:"iconPicker.section.recent",defaultMessage:"Recent"})},!e&&{id:"icons",title:(0,d.jsx)(x().sA,{id:"iconPicker.section.icons",defaultMessage:"Icons"})}])}(t).map((t=>z(t,e))));return t&&R?W(e):o}),[t,R,z,W]),O=(0,i.useCallback)((e=>{const t=_(e);let o=0;for(const i of t)o+=i.items.length;return o}),[_]),H=(0,i.useCallback)((e=>{let t=A;0===A&&(t+=E*B);const o=[],i=_(e);let n=0;for(const s of i){if(!(n+s.items.length<=t)){o.push({...s,items:s.items.slice(0,t-n)});break}o.push(s),n+=s.items.length}return o}),[_,A,E,B]),V=(0,i.useMemo)((()=>({type:De().Oh.Grid,getItemsPerRowForSection:()=>E,renderRow:(e,t)=>(0,d.jsx)("div",{role:"row",style:{display:"flex"},children:e},t)})),[E]),N=(0,i.useCallback)((e=>{if(Math.abs(e)<Ye){const{loadIconCount:e,allIcons:t}=le.state,o=E*B,i=Math.max(o,O(t));le.setState({...le.state,loadIconCount:Math.min(i,e+o)})}}),[B,E,O]),K=(0,i.useMemo)((()=>{const e=H(S),t=h&&e.length>0?0:void 0;return"resolved"===T.status&&0===e.length&&(u&&u(),e.push({key:"no results",items:[{key:"no results",action:j().lQ,render:e=>(0,d.jsx)(U().A,{...e,style:{fontWeight:Re().Wy.medium,marginBottom:2,marginLeft:2,height:20,boxSizing:"content-box"},caption:xe().A.formatMessage(Je.noResults)})}],render:e=>(0,d.jsx)(L().A,{...e})})),(0,d.jsxs)("div",{style:Ge,children:[(0,d.jsx)("div",{style:{flexGrow:1},children:(0,d.jsx)(De().Ay,{...V,store:M,initialFocus:t,sections:e,disableKeyboardArrowWrap:!0,unfocusOnScroll:f,comboboxProps:m})}),(0,d.jsx)(Fe().A,{onChange:N})]})}),[H,S,h,V,M,f,N,T.status,u,m]);return(0,d.jsxs)("div",{children:[v?(0,d.jsx)("div",{style:{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center",paddingBottom:"10px"},children:(0,d.jsx)(be().A,{})}):void 0,K]})}var Xe=()=>o(524658),et=()=>o(751156),tt=()=>o(755199),ot=()=>o(769314),it=()=>o(574036);const nt=(0,x().YK)({selectIconColor:{defaultMessage:"Select icon color",id:"iconPickerColorPicker.selectColor"},selectIconColorWithCurrentColor:{defaultMessage:"Select icon color, {iconColor} selected",id:"iconPickerColorPicker.selectColorWithCurrentColor"},noIconColor:{defaultMessage:"no color",id:"iconPickerColorPicker.noColor"}});function st(){const e=(0,s().K8)((()=>{var e;return null===(e=P().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.icon_picker_color}),[]),t=(0,x().tz)(),o=(0,n().v3)(),i=(0,r().DP)(),a=(0,n().Y0)(),c=(0,s().uB)(void 0,He().A);return(0,d.jsx)(Z().A,{renderTooltip:()=>t.formatMessage(nt.selectIconColor),placement:ie().W.Bottom,render:n=>(0,d.jsx)(ze().Ay,{preventBlockRenderQueueOnEnter:!0,buttonPopupStore:c,popupType:ze().z7.Popup,renderOrigin:o=>(0,d.jsx)(K().KF,{ariaLabel:t.formatMessage(nt.selectIconColorWithCurrentColor,{iconColor:t.formatMessage(e?l().jd[e]:nt.noIconColor)}),iconLeading:t=>(0,Xe().D)({...t,stroke:e?l().l8[i.mode][e]:l().l8[i.mode].lightgray,fill:e?l().l8[i.mode][e]:i.icon.tertiary}),...(0,Oe().A)(o,n)}),render:n=>function(e){const{parent:t,environment:o,currentIconPickerColor:i,theme:n,device:s}=e,r=[];return r.push({key:"askEveryTime",action:()=>{t.close(),rt({environment:o,color:void 0})},render:e=>(0,d.jsx)(it().A,{...e,title:(0,d.jsx)(x().sA,{id:"iconPickerColorPicker.askEveryTime",defaultMessage:"Ask every time"}),onClick:()=>{rt(void 0!==i?{environment:o,color:void 0}:{environment:o,color:"gray"})},on:void 0===i,style:{boxShadow:void 0},textWrapperStyle:{marginLeft:s.isMobile?10:6},rightStyle:{marginRight:4}})}),(0,d.jsx)(ot().A,{parent:t,currentColor:i,onColorSelected:rt,additionalItems:r,rowStyle:e=>({...e<2&&{opacity:void 0===i?.5:1},...2===e&&{flexDirection:"row-reverse",padding:"4px 0 0",margin:"4px 0 0",borderTop:`1px solid ${n.regularDividerColor}`}}),menuStyle:{padding:"4px 0"}})}({parent:n,environment:o,currentIconPickerColor:e,theme:i,device:a,intl:t})})})}function rt(e){const{environment:t,color:o}=e,{currentUserSettingsStore:i}=P().default.state;i&&et().createAndCommit({userAction:"mediaPicker.setIconPickerColor",environment:t,canUndo:!0,perform:e=>{const t=void 0!==o?o:null;tt().mJ({userSettingsStore:i,transaction:e,data:{icon_picker_color:t}})}})}const at=(0,x().YK)({unsplashPlaceholder:{id:"mediaPicker.unsplashPlaceholder.text",defaultMessage:"Search for an image…"}});function lt(e){const{tab:t,results:o,ready:n,isSmallWidth:s}=e,a=(0,r().IS)((e=>({loading:(0,pe().$n)(),captionMenuItem:{textAlign:s?"left":"center",color:e.text.secondary}})),[s]);return n?!o||o&&!o.length?(0,d.jsx)(U().A,{shouldWrapCaption:!0,caption:(0,d.jsx)(x().sA,{defaultMessage:"No results found",id:"mediaPicker.unsplash.noResultsText"}),style:a.captionMenuItem}):(0,d.jsxs)(i.Fragment,{children:[o.map(((e,o)=>(0,d.jsx)(ct,{tab:t,image:e},o))),(0,d.jsx)(U().A,{shouldWrapCaption:!0,caption:(0,d.jsx)(x().sA,{defaultMessage:"Search to find more results.",id:"mediaPicker.unsplash.searchText"}),style:a.captionMenuItem})]}):(0,d.jsx)("div",{style:a.loading,children:(0,d.jsx)(be().A,{})})}function ct(e){let{tab:t,image:o}=e;const s=(0,n().v3)(),{device:r}=s,a=(0,i.useCallback)((async()=>{const e=await(0,Ue().default)({environment:s,url:o.downloadUrl,method:"GET",format:"json"});"success"===e.type&&t.onChange({url:e.data.url})}),[s,o.downloadUrl,t]);return(0,d.jsxs)("div",{style:{width:r.isMobile?"33%":"25%",padding:3},children:[(0,d.jsx)(ge().A,{hoveredStyle:{opacity:.85},onClick:a,children:(0,d.jsx)(he().Ay,{src:o.thumbUrl,style:{width:"100%",height:64,objectFit:"cover",objectPosition:"center 0%",borderRadius:4}})}),(0,d.jsx)(Se().A,{isSmall:!0,isSecondaryColor:!0,style:{marginTop:2,marginBottom:4},children:(0,d.jsx)(x().sA,{defaultMessage:"by <inlinetextlink>{authorName}</inlinetextlink>",id:"mediaPicker.unsplash.byAuthor",values:{authorName:o.authorName,inlinetextlink:e=>(0,d.jsx)(ke().A,{external:!0,href:o.unsplashUrl,children:e})}})})]},o.id)}const dt=function(e){let{tab:t,isSmallWidth:o}=e;const[s,r]=(0,i.useState)(""),a=(0,n().v3)(),{device:l}=a,c=(0,pe().b0)();return(0,d.jsxs)("div",{style:{paddingBottom:8},children:[(0,d.jsx)(L().A,{desktopStyle:{marginTop:8,marginBottom:6},children:(0,d.jsx)(K().Ay,{value:s,placeholder:xe().A.formatMessage(at.unsplashPlaceholder),showClearButton:!0,focus:!l.isMobile||void 0,onChange:e=>r(e.target.value)})}),(0,d.jsx)("div",{style:c.galleryWrap,children:(0,d.jsx)(_().A,{request:s,debounce:Ae().tu,performRequest:async e=>{const t=await je().callApi({eventName:"searchUnsplashImages",environment:a,data:{query:e,page:0}});if("success"===t.type)return t.data.results;throw t.error},render:(e,i,n)=>(0,d.jsx)(lt,{tab:t,results:i,ready:n,isSmallWidth:o})})})]})},ut=(0,x().YK)({embedPlaceholder:{id:"mediaPicker.embedPlaceholder.text",defaultMessage:"Paste in https://…"},filterPlaceholder:{id:"mediaPicker.emojiFilter.text",defaultMessage:"Filter…"},aiSourcePickerPlaceholder:{id:"mediaPicker.githubPlaceholder.text",defaultMessage:"Ask query here"},aiIsFetchingLoader:{id:"mediaPicker.aiIsFetchingLoader.text",defaultMessage:"Ai is fetching"}});const mt=function(e){var t,r;const a=(0,n().v3)(),c=(0,i.useRef)(null),[u,m]=(0,i.useState)(""),[p,g]=(0,i.useState)({inputValue:"",focus:!1}),[h,f]=(0,i.useState)({inputValue:"",focus:!1}),v=(0,s().uB)(void 0,re),[y,b]=(0,o(857437).$)();function S(){const t=e.tabs.find((t=>t.type===e.currentTab));if(!t)return(0,d.jsx)(x().sA,{defaultMessage:"Uh oh! Something went wrong.",id:"mediaPicker.errorMessage"});switch(t.type){case"embed":return(0,d.jsx)(Tt,{isSmallWidth:e.isSmallWidth,embedInputValue:u,setEmbedInputValue:m,tab:t});case"file":return(0,d.jsx)(vt,{isSmallWidth:e.isSmallWidth,onCancel:e.onCancel,tab:t});case"emoji":return(0,d.jsx)(o(828265).p,{onSubmit:t.onChange,filter:p.inputValue||"",isCallout:e.isCallout,iconLoggingData:e.recordIconLoggingData,menuRef:c,onUpload:t.uploadFileEventHandlers,isInline:!1,comboboxProps:b,hideCustomEmoji:e.hideCustomEmoji});case"icon":return(0,d.jsx)(Qe,{filter:h.inputValue||"",onSubmit:t.onChange,iconLoggingData:e.recordIconLoggingData,enforceIconColor:t.enforceIconColor,menuRef:c,comboboxProps:b});case"gallery":return(0,d.jsx)(ye,{tab:t});case"unsplash":return(0,d.jsx)(dt,{tab:t,isSmallWidth:e.isSmallWidth});case"giphy":return(0,d.jsx)(Ie,{tab:t,isSmallWidth:e.isSmallWidth});case"drive":return(0,d.jsx)(It,{tab:t});case"box":return(0,d.jsx)(kt,{tab:t});case"aiSourcePicker":return(0,d.jsx)(Pt,{isSmallWidth:e.isSmallWidth,aiSourcePickerStore:v,tab:t});case"custom":return(0,d.jsx)(Bt,{isSmallWidth:e.isSmallWidth,onCancel:e.onCancel,embedInputValue:u,setEmbedInputValue:m,tab:t});case"customEmoji":return(0,d.jsx)(o(251994).A,{showTitle:!1,largeEmoji:!0,allowUrlPaste:!0,confirmToAdd:!0,uploadFileEventHandlers:t.uploadFileEventHandlers,onUploadWithoutSaving:t.onUploadWithoutSaving,onCancel:e.onCancel,entrypoint:"upload_tab"});default:(0,o(534177).HB)(t)}}const k=null!=c&&null!==(t=c.current)&&void 0!==t&&t.offsetWidth?((null==c||null===(r=c.current)||void 0===r?void 0:r.offsetWidth)-24)/32:12,{device:C}=a,M=(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(Mt,{tabs:e.tabs,onDelete:e.onDelete,currentTab:e.currentTab}),(0,d.jsx)(pt,{tabs:e.tabs,currentTab:e.currentTab,onFilterChange:e=>{const t=k*(0,pe().uu)(a);g({...p,inputValue:e.currentTarget.value}),f({...h,inputValue:e.currentTarget.value}),le.setState({...le.state,loadIconCount:t})},iconInput:h.inputValue,emojiInput:p.inputValue,onRandomButtonClick:t=>{"emoji"===t.type?function(e,t,o){const{device:i}=o,n=e.find((e=>e.type===t));if(n&&"emoji"===n.type){const e=A().aB();n.onChange(e,{keepVisible:!i.isMobile})}}(e.tabs,e.currentTab,a):function(e,t,o){const{device:i}=e,n=t.find((e=>e.type===o));if(n&&"icon"===n.type){const e=n.enforceIconColor??(null===(s=P().default.state)||void 0===s||null===(s=s.currentUserSettingsStore)||void 0===s||null===(s=s.getSettings())||void 0===s?void 0:s.icon_picker_color),t=`/icons/${j().XM(Object.keys(le.getState().allIcons))}_${e??j().XM(l().v3)}.svg`;n.onChange(t,{keepVisible:!i.isMobile})}var s}(a,e.tabs,e.currentTab)},comboboxProps:y})]});let w;if(C.isMobile)w={menuType:te().gu.Modal,title:e.title,header:M,right:(0,d.jsx)(x().sA,{defaultMessage:"Close",id:"mediaPicker.mobileCloseButton.label"}),onClickRight:e.onCancel,left:e.onDelete&&(0,d.jsx)(x().sA,{defaultMessage:"Remove",id:"mediaPicker.mobileRemoveButton.label"}),onClickLeft:e.onDelete};else{w={menuType:te().gu.Popup,header:M};const t=e.tabs.find((t=>t.type===e.currentTab)),o=t&&"tabHeight"in t?t.tabHeight:void 0;w.width=e.popupWidth||300,w.height=o||e.popupHeight,w.maxHeight=e.maxHeight,w.maxWidth=e.maxWidth}return(0,d.jsx)(o(533655).A,{onSwipeLeft:()=>function(e,t){if(!ce().A.state.isActive)return;const o=e.map((e=>e.type)).indexOf(ce().A.state.currentTab),i=e[o+1];void 0!==i&&Ct(i.type,t)}(e.tabs,a),onSwipeRight:()=>function(e,t){if(!ce().A.state.isActive)return;const o=e.map((e=>e.type)).indexOf(ce().A.state.currentTab),i=e[o-1];void 0!==i&&Ct(i.type,t)}(e.tabs,a),render:e=>(0,d.jsx)(o(928600).A,{...w,...e,className:B().aIQ,innerRef:c,children:S()})})};function pt(e){const t=(0,x().tz)(),{isMobile:o,isAndroid:i}=(0,n().Y0)(),s=(0,te().Tf)(),r=e.tabs.find((t=>t.type===e.currentTab));if("emoji"===(null==r?void 0:r.type)||"icon"===(null==r?void 0:r.type)){const n="emoji"===r.type?e.emojiInput:e.iconInput,a=()=>e.onRandomButtonClick(r),l=(0,d.jsx)(ft,{tabs:e.tabs,currentTab:e.currentTab,hasRandomButtonOnLeft:!r.hideRandomButton}),u=(0,d.jsx)(K().Ay,{value:n,placeholder:t.formatMessage(ut.filterPlaceholder),autoFocus:!o||void 0,focusInitial:!o||void 0,showClearButton:!0,inputLeft:(0,d.jsx)(K().Zf,{icon:g().q}),onChange:e.onFilterChange,right:(0,d.jsxs)("div",{style:{display:"flex"},children:[null!=r&&r.hideRandomButton?void 0:(0,d.jsx)(Z().A,{renderTooltip:()=>(0,d.jsx)(x().sA,{id:"mediaPicker.emojiTab.random",defaultMessage:"Random"}),placement:ie().W.Bottom,render:e=>(0,d.jsx)(K().KF,{iconLeading:m,iconStyle:{width:c().Ev.sm,height:c().Ev.sm},onClick:a,...e})}),l]}),isRightLastElementOfInput:!0,style:{...i&&{borderBottom:"none"}},...e.comboboxProps});return(0,d.jsx)("div",{style:{...!o&&{marginTop:16},marginBottom:10},children:s?(0,d.jsx)(L().A,{children:u}):(0,d.jsx)("div",{children:u})},`input-header-${r.type}`)}return null}function gt(e){return e.fileUpload?ee().cM:e.imageUpload?ee().Dn:e.videoUpload?ee().Rt:void 0}async function ht(e){let{tab:t,environment:o}=e;const i=t.imageUpload?"image/*":t.videoUpload?"video/*":t.accept,n=await M().dA({environment:o,supportsMobileNativeFileUpload:!0,multiple:t.allowMultipleFileSelection??!1,accept:i});null!=n&&n.length&&t.onUpload(n)}function ft(e){let{hasRandomButtonOnLeft:t,tabs:o,currentTab:i}=e;const n=o.find((e=>e.type===i));if(!n)return null;let s;return"emoji"===(null==n?void 0:n.type)?s=(0,d.jsx)(X().A,{}):"icon"===(null==n?void 0:n.type)&&void 0===n.enforceIconColor&&(s=(0,d.jsx)(st,{})),t&&s?(0,d.jsx)("div",{style:{marginLeft:6},children:s}):s??null}function xt(e){let{tab:t,isSmallWidth:o}=e;const i=(0,n().v3)();return t.imageUpload||t.videoUpload?(0,d.jsxs)(L().A,{desktopStyle:{marginTop:4,display:"flex",justifyContent:"center",marginRight:12,marginLeft:12},children:[t.imageUpload?(0,d.jsx)($().A,{size:"lg",onClick:()=>ht({tab:t,environment:i}),style:{width:"100%"},children:(0,d.jsx)(x().sA,{defaultMessage:"Upload file",id:"mediaPicker.chooseImage.buttonText"})}):void 0,t.videoUpload?(0,d.jsx)(W().A,{title:(0,d.jsx)(x().sA,{defaultMessage:"Choose a video",id:"mediaPicker.chooseVideo.buttonText"}),onClick:()=>ht({tab:t,environment:i}),fullWidth:o}):void 0]}):null}function vt(e){let{tab:t,isSmallWidth:o,onCancel:i}=e;const a=(0,n().v3)(),l=(0,s().O$)(me().subscriptionDataStoreInstance),c=(0,r().IS)((e=>({dropzone:{background:(0,y().Qr)([y().Ay.blueWithAlpha(.14),(0,v().X4)(e.contentBackground,.5)])},caption:{textAlign:o?"left":"center",color:e.text.secondary},fileLimitWrapper:{display:"flex",alignItems:"center",justifyContent:o?"flex-start":"center"},fileLimitInner:{marginRight:6,color:e.text.secondary}})),[o]),u=(0,s().K8)((()=>oe().default.state.isOnboarding),[]),m=(0,s().K8)((()=>ue().Si(a)||"plus"),[a]);return(0,d.jsx)(V().V,{type:gt(t)??ee().hy,dropTargetKey:"uploadTab",onDropFile:e=>{if("invalidFileDrop"===e.type)return C().D6({label:(0,d.jsx)(x().sA,{id:"mediaPicker.invalidImageDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})}),null;t.onUpload([e.file])},dropzoneStyle:c.dropzone,children:(0,d.jsxs)("div",{style:{marginTop:-24,paddingTop:24},children:[t.fileUpload?(0,d.jsx)(L().A,{desktopStyle:{marginTop:o?8:24},children:(0,d.jsx)(W().A,{title:(0,d.jsx)(x().sA,{defaultMessage:"Choose a file",id:"mediaPicker.chooseFile.button.label"}),onClick:()=>ht({tab:t,environment:a}),fullWidth:o})}):void 0,(0,d.jsx)(xt,{isSmallWidth:o,tab:t}),t.caption?(0,d.jsx)(U().A,{shouldWrapCaption:!0,caption:t.caption,style:c.caption}):void 0,t.preventUploadLimitFreeFileSize||l&&ue().Fq(l)&&(0,d.jsx)("div",{style:{height:8}}),!l||t.preventUploadLimitFreeFileSize||ue().Fq(l)?void 0:(0,d.jsx)(U().A,{shouldWrapCaption:!0,caption:(0,d.jsxs)("div",{style:c.fileLimitWrapper,children:[(0,d.jsx)("div",{style:c.fileLimitInner,children:(0,d.jsx)(x().sA,{defaultMessage:"The maximum size per file is {filesize} MB.",id:"mediaPicker.maximumFileSize.notice",values:{filesize:M().u1}})}),u?void 0:(0,d.jsx)(de().A,{subscriptionTier:m,onClick:()=>{i&&i()},analyticsName:"media_picker",desktopStyle:{marginBottom:1}})]})})]})})}let yt=function(e){return e.Drive="drive",e.Docs="googleDocs",e}({});function jt(e){let{tab:t,type:o}=e;return o===yt.Docs?(0,d.jsx)(St,{tab:t}):(0,d.jsx)(bt,{tab:t})}function bt(e){let{tab:t}=e;const o=(0,r().IS)((e=>({buttonItem:{color:e.blueColor}})),[]);return(0,d.jsxs)(L().A,{children:[(0,d.jsx)(H().A,{title:(0,d.jsx)(x().sA,{defaultMessage:"Connect Google account",id:"mediaPicker.menuItem.connectFirstGoogleAccount.label"}),onClick:()=>t.onSelect(),focused:!1,style:o.buttonItem}),(0,d.jsx)(U().A,{shouldWrapCaption:!1,caption:(0,d.jsx)(x().sA,{defaultMessage:"Find and embed your Google Drive files.",id:"mediaPicker.menuItem.connectFirstGoogleAccount.caption"})})]})}function St(e){let{tab:t}=e;return(0,d.jsx)(L().A,{children:(0,d.jsx)(H().A,{title:(0,d.jsx)(x().sA,{defaultMessage:"Connect Google account",id:"mediaPicker.menuItem.connectFirstGoogleAccount.label"}),onClick:()=>t.onSelect(),focused:!1})})}function kt(e){let{tab:t}=e;const o=(0,r().IS)((e=>({connectFirstAccountButton:{color:e.blueColor},connectSecondAccountButton:{color:e.text.secondary}})),[]),{accounts:i}=t;return 0===i.length?(0,d.jsxs)(L().A,{children:[(0,d.jsx)(H().A,{title:(0,d.jsx)(x().sA,{defaultMessage:"Connect Box account",id:"mediaPicker.menuItem.connectFirstBoxAccount.label"}),onClick:()=>t.onSelect(),focused:!1,style:o.connectFirstAccountButton}),(0,d.jsx)(U().A,{shouldWrapCaption:!1,caption:(0,d.jsx)(x().sA,{defaultMessage:"Find and embed your Box files.",id:"mediaPicker.menuItem.connectFirstBoxAccount.caption"})})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L().A,{children:i.map((e=>(0,d.jsx)(H().A,{title:(0,d.jsx)(x().sA,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:e.account_name}}),onClick:()=>t.onSelect(e),focused:!1},e.account_key)))}),(0,d.jsx)(L().A,{topBorder:!0,children:(0,d.jsx)(H().A,{title:(0,d.jsx)(x().sA,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreBoxAccounts.label"}),onClick:()=>t.onSelect(),style:o.connectSecondAccountButton,focused:!1})})]})}function At(e,t){return()=>{e&&t.onChange(e)}}function Ct(e,t){ce().A.state.isActive&&(ce().A.setState({...ce().A.state,currentTab:e}),"icon"===e&&ce().A.state.recordIconLoggingData&&b().uZ(t,"select_icon_tab",ce().A.state.recordIconLoggingData))}function Mt(e){let{tabs:t,onDelete:o,currentTab:s}=e;const a=(0,r().IS)((e=>({sparklesIcon:{width:16,height:16,marginRight:4,color:e.palette.purple[400]}})),[]),l=(0,n().v3)(),{device:c}=l;if(t.length<=1&&!o)return null;{const e={gallery:(0,d.jsx)(x().sA,{id:"mediaPicker.tabs.gallery",defaultMessage:"Gallery"}),embed:(0,d.jsx)(x().sA,{id:"mediaPicker.tabs.embedLink",defaultMessage:"Embed link"}),file:(0,d.jsx)(x().sA,{id:"mediaPicker.tabs.upload",defaultMessage:"Upload"}),emoji:(0,d.jsx)(x().sA,{id:"mediaPicker.tabs.emoji",defaultMessage:"Emoji"}),icon:(0,d.jsx)(x().sA,{id:"mediaPicker.tabs.icon",defaultMessage:"Icon"}),custom:(0,d.jsx)(x().sA,{id:"mediaPicker.tabs.custom",defaultMessage:"Custom"}),customEmoji:(0,d.jsx)(x().sA,{id:"mediaPicker.tabs.customEmoji",defaultMessage:"Upload"}),unsplash:(0,d.jsxs)(i.Fragment,{children:[f({width:12,marginRight:4,height:12}),(0,d.jsx)("span",{children:"Unsplash"})]}),giphy:(0,d.jsxs)(i.Fragment,{children:[p({width:12,marginRight:4,height:12}),(0,d.jsx)("span",{children:"GIPHY"})]}),drive:(0,d.jsx)(x().sA,{id:"mediaPicker.tabs.browse",defaultMessage:"Browse"}),box:(0,d.jsx)(x().sA,{id:"mediaPicker.tabs.browse",defaultMessage:"Browse"}),aiSourcePicker:(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,d.jsx)(x().sA,{id:"mediaPicker.tabs.ask",defaultMessage:"Ask"}),(0,h().X)(a.sparklesIcon)]})},n=t.findIndex((e=>e.type===s)),r=t.map((t=>t.title||e[t.type])),u=t.find((e=>e.type===s)),m=u&&"emoji"!==u.type&&c.isAndroid;return(0,d.jsx)(J().Ay,{tabs:r,selectedIndex:n,onChange:e=>{Ct(t[e].type,l)},right:o&&!c.isMobile&&(0,d.jsx)(O().p,{isGray:!0,onClick:o,children:(0,d.jsx)(x().sA,{id:"mediaPicker.tabs.remove",defaultMessage:"Remove"})}),style:{...m&&{borderBottom:"none"}}})}}function wt(e){let{tab:t,accounts:o,type:n=yt.Drive}=e;const s=(0,r().IS)((e=>({buttonItem:{color:e.text.secondary}})),[]);return"accounts"in t?t.accounts&&0===t.accounts.length?(0,d.jsx)(jt,{tab:t,type:n}):(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(L().A,{children:t.accounts.map(((e,o)=>(0,d.jsx)(H().A,{title:(0,d.jsx)(x().sA,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:e.account_name}}),onClick:()=>t.onSelect(e),focused:!1},e.account_key)))}),(0,d.jsx)(L().A,{topBorder:!0,children:(0,d.jsx)(H().A,{title:(0,d.jsx)(x().sA,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreGoogleAccounts.label"}),onClick:()=>t.onSelect(),style:s.buttonItem,focused:!1})})]}):o?0===o.length?(0,d.jsx)(jt,{tab:t,type:n}):(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(L().A,{children:o.map(((e,o)=>(0,d.jsx)(H().A,{title:(0,d.jsx)(x().sA,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:e.accountName}}),onClick:()=>t.onSelect(e),focused:!1},e.accountId)))}),(0,d.jsx)(L().A,{topBorder:!0,children:(0,d.jsx)(H().A,{title:(0,d.jsx)(x().sA,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreGoogleAccounts.label"}),onClick:()=>t.onSelect(),style:s.buttonItem,focused:!1})})]}):null}function It(e){let{tab:t}=e;const o=(0,n().v3)();return"accounts"in t?(0,d.jsx)(wt,{tab:t}):(0,d.jsx)(_().A,{request:o,performRequest:k().QZ,render:(e,o,i)=>{if(!i)return(0,d.jsx)(L().A,{children:(0,d.jsx)(Y().A,{})});const n=o&&o.accounts?o.accounts:[];return(0,d.jsx)(wt,{tab:t,accounts:n})}})}function Pt(e){var t,o;let{tab:n,isSmallWidth:a,aiSourcePickerStore:l}=e;const c=(0,x().tz)(),u=(0,r().IS)((e=>({captionItem:{textAlign:a?"left":"center",color:e.text.secondary},aiResult:{cursor:"pointer",color:e.text.secondary,textAlign:"left",hyphens:"auto",padding:"10px 8px",display:"flex",flexDirection:"row"},aiTitleWrapper:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"rgb(55, 53, 47)",fontWeight:500,fontSize:"14px",paddingLeft:8},aiLoadingWrapper:{flex:1,color:e.palette.purple[400],fontWeight:500,flexDirection:"row",gap:6,display:"flex",alignItems:"center",padding:"12px 12px",marginLeft:10},loadingDots:{backgroundColor:e.palette.purple[400]}})),[a]),m=(0,s().uB)(l,re),p=(0,s().O$)(m);return(0,d.jsxs)(i.Fragment,{children:[p.result&&!1===p.loading?0===(null===(t=p.result)||void 0===t?void 0:t.length)?(0,d.jsx)(U().A,{shouldWrapCaption:!0,caption:(0,d.jsx)(x().sA,{defaultMessage:"No results found",id:"mediaPicker.aiSourcePicker.noResultsText"}),style:u.captionItem}):null===(o=p.result)||void 0===o?void 0:o.map((e=>(0,d.jsxs)("div",{style:{...u.aiResult,backgroundColor:p.hover===e.url?"rgba(55,53,47,0.08)":""},onClick:At(e.url,n),onMouseEnter:()=>{m.setState({...p,hover:e.url})},children:[(0,d.jsx)(N().A,{imageURL:"NONE"===e.avatar?n.defaultAvatar:e.avatar,size:24,imageStyle:{borderRadius:34,boxShadow:"0 2px 4px rgba(15, 15, 15, 0.1)"},type:"image_url"}),(0,d.jsx)("div",{style:u.aiTitleWrapper,children:e.title})]},e.url))):void 0,p.loading?(0,d.jsxs)("div",{style:u.aiLoadingWrapper,children:[c.formatMessage(ut.aiIsFetchingLoader),(0,d.jsx)(q().A,{style:u.loadingDots})]}):void 0,p.result||p.loading?void 0:(0,d.jsx)(z,{tab:n,placeholder:n.inputPlaceholder||c.formatMessage(ut.aiSourcePickerPlaceholder),store:m,isSmallWidth:a})]})}function Et(e,t,o){return()=>{const i=o;if(i){const o=(0,a().Zv)(i)||(0,a().ku)(i,Q().A.secureFileConfig.hostname);e.onChange({originUrl:i,pastedSecureFile:o}),S().oF(t,{pastedText:i,source:"media_picker"})}}}function Bt(e){let{tab:t,isSmallWidth:o,onCancel:i,embedInputValue:a,setEmbedInputValue:l}=e;const c=(0,x().tz)(),u=(0,n().v3)(),m=(0,n().Y0)(),p=(0,s().O$)(me().subscriptionDataStoreInstance),g=(0,s().K8)((()=>ue().Si(u)),[u]),h=(0,s().K8)((()=>oe().default.state.isOnboarding),[]),f=(0,r().IS)((e=>({dropZone:{background:(0,y().Qr)([y().Ay.blueWithAlpha(.14),(0,v().X4)(e.contentBackground,.5)])},caption:{textAlign:o?"left":"center",color:e.text.secondary},subscriptionLimitWrapper:{display:"flex",alignItems:"center",justifyContent:o?"flex-start":"center"},subscriptionLimitInner:{marginRight:6,color:e.text.secondary}})),[o]),j=(0,d.jsx)(G().A,{onClick:Et(t,u,a),disabled:0===a.length,hovered:!1,children:t.buttonText||(0,d.jsx)(x().sA,{defaultMessage:"Link",id:"mediaPicker.embedTab.embedLinkButtonText"})}),b=(0,d.jsx)(L().A,{desktopStyle:{marginTop:16,display:"flex",paddingTop:0,paddingBottom:12},children:(0,d.jsx)(K().Ay,{type:"url",value:a,placeholder:t.inputPlaceholder||c.formatMessage(ut.embedPlaceholder),autoFocus:!m.isMobile||void 0,showClearButton:!0,focus:!m.isMobile||void 0,onSubmit:Et(t,u,a),onChange:e=>l(e.target.value),inputRight:m.isPhone?j:void 0,right:m.isPhone?void 0:j,isRightLastElementOfInput:!0})}),S=(0,d.jsx)(V().V,{type:gt(t)??ee().hy,dropTargetKey:"uploadTab",onDropFile:e=>{if("invalidFileDrop"===e.type)return C().D6({label:(0,d.jsx)(x().sA,{id:"mediaPicker.invalidImageDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})}),null;t.onUpload([e.file])},dropzoneStyle:f.dropZone,children:(0,d.jsxs)("div",{style:{marginTop:-24,paddingTop:24},children:[t.fileUpload?(0,d.jsx)(L().A,{desktopStyle:{marginTop:o?8:24},children:(0,d.jsx)(W().A,{title:(0,d.jsx)(x().sA,{defaultMessage:"Choose a file",id:"mediaPicker.chooseFile.button.label"}),onClick:()=>ht({tab:t,environment:u}),fullWidth:o})}):void 0,(0,d.jsx)(xt,{isSmallWidth:o,tab:t}),t.caption?(0,d.jsx)(U().A,{shouldWrapCaption:!0,caption:t.caption,style:f.caption}):void 0,t.preventUploadLimitFreeFileSize||p&&ue().Fq(p)&&(0,d.jsx)("div",{style:{height:8}}),!p||t.preventUploadLimitFreeFileSize||ue().Fq(p)?void 0:(0,d.jsx)(U().A,{shouldWrapCaption:!0,caption:(0,d.jsxs)("div",{style:f.subscriptionLimitWrapper,children:[(0,d.jsx)("div",{style:f.subscriptionLimitInner,children:(0,d.jsx)(x().sA,{defaultMessage:"The maximum size per file is {filesize} MB.",id:"mediaPicker.maximumFileSize.notice",values:{filesize:M().u1}})}),h?void 0:(0,d.jsx)(de().A,{subscriptionTier:g||"plus",onClick:()=>{i&&i()},analyticsName:"media_picker",desktopStyle:{marginBottom:1}})]})})]})});return(0,d.jsxs)(d.Fragment,{children:[b,S]})}function Tt(e){let{tab:t,isSmallWidth:o,embedInputValue:s,setEmbedInputValue:r}=e;const a=(0,n().v3)(),l=(0,x().tz)(),{device:c}=a;return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(L().A,{desktopStyle:{marginTop:8},children:(0,d.jsx)(K().Ay,{type:"url",value:s,placeholder:t.inputPlaceholder||l.formatMessage(ut.embedPlaceholder),autoFocus:!c.isMobile||void 0,showClearButton:!0,focus:!c.isMobile||void 0,onSubmit:Et(t,a,s),onChange:e=>r(e.target.value)})}),(0,d.jsx)(L().A,{style:t.caption?{}:{marginBottom:6},children:(0,d.jsx)(W().A,{onClick:Et(t,a,s),title:t.buttonText||(0,d.jsx)(x().sA,{defaultMessage:"Link",id:"mediaPicker.embedTab.embedLinkButtonText"}),fullWidth:o})}),t.caption?(0,d.jsx)(U().A,{shouldWrapCaption:!0,caption:t.caption,style:{textAlign:c.isMobile?"left":"center",marginBottom:4}}):void 0]})}},298697:(e,t,o)=>{o.d(t,{A:()=>a});o(581454);var i=o(296540),n=()=>o(401497),s=()=>o(710149),r=o(474848);function a(e){let{paragraphs:t}=e;const o=(0,n().IS)((e=>({skeletonRect:{borderRadius:4,backgroundColor:e.lightDividerColor}})),[]),a=null==t?void 0:t.map(((e,t)=>{const n={height:e.lineHeight,marginTop:e.lineMargin,marginBottom:e.lineMargin},a={marginTop:e.sectionMargin,marginBottom:e.sectionMargin},l=[...Array(e.repeat||1)].map(((t,i)=>(0,r.jsx)("div",{style:a,children:e.sectionWidths.map(((e,t)=>(0,r.jsx)(s().A,{style:{...o.skeletonRect,...n,width:`${e}%`}},t)))},i)));return(0,r.jsxs)(i.Fragment,{children:[" ",l," "]},t)}));return(0,r.jsxs)(r.Fragment,{children:[" ",a," "]})}},327165:(e,t,o)=>{o.d(t,{A:()=>l});o(296540);var i=()=>o(484714),n=()=>o(381349),s=()=>o(704152),r=()=>o(204063),a=o(474848);const l=function(e){let{onClick:t,disabled:i,title:n}=e;return(0,a.jsx)(o(678553).Ay,{title:(0,a.jsx)(c,{onClick:t,disabled:i,title:n})})};function c(e){let{onClick:t,disabled:o,title:l}=e;const c=(0,i().v3)(),{isMobile:d}=c.device,u={width:"100%",color:n().Ay.blue};return d?(0,a.jsx)(s().A,{onClick:t,disabled:o,style:u,children:l}):(0,a.jsx)(r().A,{onClick:t,disabled:o,style:{width:"100%",maxWidth:300,display:"flex",margin:"auto"},children:l})}},423219:(e,t,o)=>{o.d(t,{A:()=>r});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(581454);const i={value:-1,refetch:!1};class n extends(()=>o(848776))().U{constructor(e,t){super(e,t),this.emitDataMapStore=void 0,this.emitDataMapStore=o(757695).Store.createValue({})}getData(e,t){var o;let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.keyFn(t);s in this.emitDataMapStore.state||(this.emitDataMapStore.state[s]={...i},this.emitDataMapStore.emit());const r=n||this.emitDataMapStore.state[s].refetch||void 0===(null===(o=this.storeMap[s])||void 0===o?void 0:o.state);return this.emitDataMapStore.state[s].refetch=!1,super.getData(e,t,r)}getDataWithoutRefetch(e,t){const o=this.keyFn(t);return o in this.emitDataMapStore.state||(this.emitDataMapStore.state[o]={...i},this.emitDataMapStore.emit()),super.getData(e,t,!1)}emit(e,t){const o=this.keyFn(e),n=this.emitDataMapStore.state[o].value;t!==n&&n!==i.value&&(this.emitDataMapStore.state[o].refetch=!0),this.emitDataMapStore.state[o].value=t;const s={...this.emitDataMapStore.state[o]};this.emitDataMapStore.setState({...this.emitDataMapStore.state,[o]:s})}getKeys(){return Object.keys(this.emitDataMapStore.state)}}const s=new n((e=>{let{spaceId:t}=e;return t}),(async function(e,t){const i=await o(449506).callApi({eventName:"getCustomEmojisForSpace",environment:e,data:t,headers:(0,o(386164).WS)({spaceId:t.spaceId})});if("failed"===i.type)return;const n={pointers:[],names:new Set,lastFetchedBy:e.currentUser.id},s=o(388821).RecordMapWithRole.create(i.data.recordMap),r=[];for(const{pointer:a}of s.getByTable(o(837420).e)){const e=s.getModel(a);if(!e)continue;const t=e.getName();n.names.add(t),r.push({pointer:a,name:t})}return n.pointers=r.sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>e.pointer)),n}));o(604341).exposeDebugValue("CustomEmojisStore",s);const r=s},438632:(e,t,o)=>{o.d(t,{PD:()=>d,cb:()=>c,yR:()=>u});o(16280),o(944114),o(898992),o(354520),o(803949),o(581454);var i=o.n(o(625473)),n=o.n(o(716471)),s=()=>o(496603),r=()=>o(534177),a=()=>o(634201),l=()=>o(919709);let c=function(e){return e[e.removed=-1]="removed",e[e.added=1]="added",e[e.same=0]="same",e}({});function d(e,t){const o=new(n())({timeout:2,editCost:6}),i=o.main(t,e);return o.cleanupSemantic(i),i}function u(e){const{before:t,after:o,isIncompleteAfter:n,insertCursor:u}=e,m={count:0,encoding:{},decoding:{},annotationEncoding:{},annotationDecoding:{}},p=e=>{const t=m.encoding[e];if(t)return t;{const t=String.fromCharCode(m.count);return m.count++,m.encoding[e]=t,m.decoding[t]=e,t}},g=e=>{const t=i()(e),o=m.annotationEncoding[t];if(o)return o;{const o=String.fromCharCode(m.count);return m.count++,m.annotationEncoding[t]=o,m.annotationDecoding[o]=e,o}},h=t=>s().Bq(l().RQ(t).map((t=>{let o=[];if("word"===e.mode||"wordUnderlineFinal"===e.mode){if("undefined"==typeof Intl||!Intl.Segmenter)throw new Error("Intl.Segmenter is not supported");{const e=new Intl.Segmenter(void 0,{granularity:"word"}).segment(t[0]);o=Array.from(e).map((e=>e.segment))}}else o=a().PE(t[0]);const i=o.map(p);if(l().qXl(t)){const e=l().uPN(t),o=l().jhx(e);o&&(i[0]=g({type:"mention",value:o}),e.forEach((e=>{l().iGj(e)||l().gir(e)||l().lfl(e)||(i.unshift(g({type:"start",value:e})),i.push(g({type:"end",value:e})))})))}else if(l().GiG(t)){const e=l().uPN(t),o=l().j1D(e);if(o){i[0]=g({type:"equation",value:o});for(const t of e)l().iGj(t)||l().gir(t)||l().lfl(t)||(i.unshift(g({type:"start",value:t})),i.push(g({type:"end",value:t})))}}else if(l().BEe(t)){l().uPN(t).forEach((e=>{i.unshift(g({type:"start",value:e})),i.push(g({type:"end",value:e}))}))}return i}))).join("");if(m.count>65535)throw new Error("This string has way too many different characters.");const f=d(h(o),h(t)),x=[];let v=[],y=0;const j=n?s().Kl(f,(e=>0===e[0]||1===e[0])):0;let b=!1;const S=e.insertionAnnotation,k=e.deletionAnnotation;return f.forEach((t=>{let[o,i]=t;i.split("").forEach((t=>{if(m.decoding[t]){const i=m.decoding[t];o===c.added?x.push([i,[...v,"wordUnderlineFinal"===e.mode?e.underlineAnnotation:S]]):o===c.removed&&(!n||y<=j)?"wordUnderlineFinal"!==e.mode&&x.push([i,[...v,k]]):(n&&u&&!b&&y===j+1&&(b=!0,x.push(["",[["tc"]]])),x.push([i,v]))}else{const i=m.annotationDecoding[t];if(o===c.added)if("mention"===i.type)x.push([l().Sj,[...v,"wordUnderlineFinal"===e.mode?e.underlineAnnotation:S,i.value]]);else if("start"===i.type)v=[...v,i.value];else if("end"===i.type)v=v.filter((e=>!s().n4(e,i.value)));else if("equation"===i.type){const e=l().U35(i.value),t=l().G0H(e,[...v,S]);x.push(t)}else(0,r().HB)(i);else if(o===c.removed){if("mention"===i.type)"wordUnderlineFinal"!==e.mode&&x.push([l().Sj,[...v,k,i.value]]);else if("equation"===i.type){const e=l().U35(i.value),t=l().G0H(e,[...v,k]);x.push(t)}}else if(o===c.same)if("mention"===i.type)x.push([l().Sj,[...v,i.value]]);else if("start"===i.type)v=[...v,i.value];else if("end"===i.type)v=v.filter((e=>!s().n4(e,i.value)));else if("equation"===i.type){const e=l().U35(i.value),t=l().G0H(e,v);x.push(t)}else(0,r().HB)(i)}})),n&&(y+=1)})),l().__s(x)}},480034:(e,t,o)=>{o.d(t,{q:()=>n});o(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o(474848).jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25m0 4c.345 0 .625.28.625.625v2.375H13a.625.625 0 1 1 0 1.25h-2.375V13a.625.625 0 1 1-1.25 0v-2.375H7a.625.625 0 1 1 0-1.25h2.375V7c0-.345.28-.625.625-.625"})},n=(0,o(340498).wt)("plusCircleFill",i)},484595:(e,t,o)=>{o.d(t,{A:()=>a,p:()=>s});var i=o(296540),n=o(474848);const s=8;function r(e,t){let{isSelected:i}=e;const{radioButtonStyle:r,dotStyle:a}=(0,o(401497).IS)((e=>({radioButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,borderRadius:16,marginRight:s,background:i?e.blueColor:e.whiteButtonBackground,border:i?"none":`1px solid ${e.radioButtonBorder}`,transition:"background 100ms ease-out"},dotStyle:{width:6,height:6,borderRadius:6,background:e.text.contrastPrimary,transition:"opacity 100ms ease-out",opacity:i?1:0}})),[i]);return(0,n.jsx)("div",{ref:t,style:r,children:(0,n.jsx)("div",{style:a})})}const a=i.forwardRef(r)},519116:(e,t,o)=>{o.d(t,{A:()=>p});o(581454);var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(634201),a=()=>o(406699),l=()=>o(939740),c=()=>o(553965),d=()=>o(486666),u=o(474848);const m=(0,i.forwardRef)((function(e,t){const{variations:i,emoji:n,focused:r,onClick:a,onMouseEnter:l,insertEmoji:c,showTooltip:d,id:m,role:p}=e,h=(0,s().uB)(void 0,o(463830).A);return void 0===(0,s().K8)((()=>(0,o(712030).bb)()),[])&&i&&i.length>0?(0,u.jsx)(x,{role:p,id:m,buttonPopupStore:h,emoji:n,focused:r,insertEmoji:c,onClick:a,onMouseEnter:l,showTooltip:d,variations:i,ref:t}):(0,u.jsx)(g,{role:p,id:m,emoji:n,focused:r,onClick:a,onMouseEnter:l,ref:t,showTooltip:d})})),p=m,g=(0,i.forwardRef)((function(e,t){let{events:a,emoji:m,focused:p,onClick:g,onMouseEnter:h,showTooltip:f,id:x,role:v}=e;const y=(0,n().v3)(),j=r().qg.isCustomEmojiString(m),{isMenuListFocusVisible:b}=(0,i.useContext)(l().VU),S=p&&b,k=(0,o(401497).IS)((e=>({emojiButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,...y.device.isMobile?{width:d().UA,height:d().UA,fontSize:d().ru}:{width:d().Sq,height:d().Sq,fontSize:d().Zl},...S&&{boxShadow:e.buttonBlueFocusRing}}})),[y.device.isMobile,S]),A=k.emojiButton.fontSize,C=(0,s().K8)((()=>{if(j){const e=r().qg.fromCustomEmojiString(m);return(0,o(87878).nA)({parentStore:void 0,pointer:e.pointer})}}),[m,j]),M=(0,s().K8)((()=>j?null==C?void 0:C.getName():r().Yf(m,o(267419).A.state)),[C,m,j]);return(0,u.jsx)(o(859428).A,{forceVisibleState:!!S||void 0,placement:S?o(962730).W.Bottom:void 0,allowHover:f,renderTooltip:()=>M,closeDelay:0,disableTooltip:!f,render:e=>(0,u.jsx)(o(704152).A,{role:v,ref:t,id:x,focused:p,onClick:g,...(0,c().A)(a||{},(0,c().A)({onMouseEnter:h},e)),ignoreLocalHoverState:!0,style:k.emojiButton,disallowTabbing:!0,children:j?C?(0,u.jsx)(o(448664).A,{size:A,emojiStore:C}):null:(0,u.jsx)(o(56086).A,{size:A,char:m})},m)})}));function h(e){let{props:t}=e;return(0,u.jsx)("div",{style:{display:"flex",padding:4},children:t.children})}function f(e){const{parent:t,emoji:i,variations:s,insertEmoji:r}=e,a=(0,n().v3)(),c=(s&&s.length>0?[i,...s]:[i]).map(((i,n)=>({key:i,action:e=>{t.close(),(null==s?void 0:s.length)===o(637997).aI&&(0,o(210741).l)({environment:a,skinTone:n}),r(i,n)},render:t=>(0,u.jsx)(m,{...e,...t,emoji:i,variations:void 0,showTooltip:!1})})));return(0,u.jsx)(o(805751).A,{debugName:"EmojiPickerMenuItem",capture:!0,allowEsc:!0,children:(0,u.jsx)(l().Ay,{type:l().Oh.Horizontal,initialFocus:0,sections:[{key:"variations",render:e=>(0,u.jsx)(h,{props:e}),items:c}]})})}const x=(0,i.forwardRef)((function(e,t){const{emoji:n,focused:s,onClick:r,onMouseEnter:l,showTooltip:c,variations:d,insertEmoji:m,buttonPopupStore:p,id:h,role:x}=e,v=(0,i.useCallback)((()=>function(e){e.setState({...e.state,open:!1})}(p)),[p]),y=(0,i.useCallback)((e=>function(e,t){var o;null===(o=e.preventDefault)||void 0===o||o.call(e),t.setState({...t.state,open:!0})}(e,p)),[p]);return(0,u.jsx)(o(545805).A,{debugName:"EmojiPickerMenuItem",capture:s,onEnter:y,onEsc:v,children:(0,u.jsx)(a().Ay,{buttonPopupStore:p,popupType:a().z7.Popup,renderOrigin:e=>(0,u.jsx)(g,{ref:t,emoji:n,focused:s,onClick:r,onMouseEnter:l,showTooltip:c,events:e,id:h,role:x}),render:e=>(0,u.jsx)(f,{parent:e,emoji:n,variations:d,insertEmoji:m})})},n)}))},522500:(e,t,o)=>{o.d(t,{q:()=>n});o(296540);var i=o(474848);const n=(0,o(340498).wt)("megaphone",{viewBox:"0 0 64 64",svg:(0,i.jsx)("path",{d:"m54,10v40h-4l-20-10h-4l4,16h-10l-4-16c-4.94,0-8-3.06-8-8v-4c0-4.94,3.06-8,8-8h14l20-10h4Z"})})},524658:(e,t,o)=>{o.d(t,{D:()=>n});o(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o(474848).jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25"})},n=(0,o(340498).wt)("circleFill",i)},533655:(e,t,o)=>{o.d(t,{A:()=>s});var i=o(296540),n=()=>o(56366);function s(e){let{render:t,threshold:o,onSwipeLeft:s,onSwipeRight:r,onSwipeDown:a,onSwipeUp:l}=e;const c=(0,i.useRef)(),d=(0,i.useRef)();return(0,n().K8)((()=>t({onTouchStart:e=>{c.current=e.touches[0].clientX,d.current=e.touches[0].clientY},onTouchMove:e=>{if(void 0===c.current)return;const t=o||120,i=c.current-e.touches[0].clientX;if(i>t&&s&&(s(),c.current=void 0),i<-1*t&&r&&(r(),c.current=void 0),void 0===d.current)return;const n=d.current-e.touches[0].clientY;n<-1*t&&a&&(a(),d.current=void 0),n>t&&l&&(l(),d.current=void 0)},onTouchEnd:()=>{c.current=void 0,d.current=void 0},onTouchCancel:()=>{c.current=void 0,d.current=void 0}})),[t,o,s,r,a,l])}},537193:(e,t,o)=>{o.d(t,{b:()=>n});o(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.26 2.37 15.26 15.26",svg:(0,o(474848).jsx)("path",{d:"M14.754 4.125a7.625 7.625 0 1 0-2.052 12.964.625.625 0 0 0-.46-1.162 6.376 6.376 0 1 1 3.672-3.83c-.159.457-.654.778-1.278.778a1.28 1.28 0 0 1-1.28-1.28V7.079a.625.625 0 0 0-1.25 0v.214c-.654-.555-1.496-.839-2.383-.839-.969 0-1.878.338-2.546 1-.672.665-1.058 1.614-1.058 2.751s.385 2.098 1.05 2.778c.665.679 1.575 1.04 2.554 1.04s1.893-.36 2.563-1.037q.075-.074.143-.153a2.53 2.53 0 0 0 2.207 1.292c1.01 0 2.081-.533 2.459-1.618a7.625 7.625 0 0 0-2.341-8.382m-7.385 6.08c0-.846.28-1.46.687-1.862.41-.406.99-.639 1.667-.639s1.266.234 1.683.641c.412.404.697 1.018.697 1.86 0 .844-.286 1.478-.704 1.9-.421.425-1.01.669-1.676.669-.667 0-1.247-.243-1.66-.666-.412-.42-.694-1.056-.694-1.903"})},n=(0,o(340498).wt)("at",i)},538739:(e,t,o)=>{o.d(t,{A:()=>n});o(296540);var i=o(474848);const n=function(e){const{style:t}=(0,o(401497).IS)((t=>({style:{display:"inline-block",textAlign:"center",color:e.disabled?t.text.tertiary:t.text.secondary,userSelect:"none",WebkitUserSelect:"none",width:8,...e.style}})),[e.disabled,e.style]);return(0,i.jsx)("div",{style:t,children:"·"})}},552871:(e,t,o)=>{o.d(t,{L:()=>c});var i=()=>o(484714),n=()=>o(792485),s=()=>o(56366),r=()=>o(986260),a=()=>o(765957),l=()=>o(574012);function c(){const e=(0,i().v3)(),t=(0,i().Y0)(),o=(0,n().S)(),c=(0,s().K8)((()=>{if(!t.isMobileNative||!t.isAndroid)return 0;const{mainEditorCurrentBlockStore:i}=a().default.state;if(!i)return 0;return(0,r().rV)(e,i,null==o?void 0:o.publicEditModeStore.state).shouldShow?48:0}),[e,t,o]);return(0,s().K8)((()=>{if(!t.isMobileNative)return 24;const o=l().A.mobileNativeBottomPadding(e);return 24+c+o}),[e,t.isMobileNative,c])}},602031:(e,t,o)=>{o.d(t,{H:()=>n});o(296540);var i=o(474848);const n=(0,o(340498).wt)("colorPickerCircle",{viewBox:"0 0 32 32",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"16",cy:"16",r:"14",strokeWidth:"3",fill:"none"}),(0,i.jsx)("circle",{cx:"16",cy:"16",r:"14",opacity:"0.9"})]})})},626466:(e,t,o)=>{o.r(t),o.d(t,{arrowChevronSingleDownFillIcon:()=>n,iconDefinition:()=>i});o(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"3.72 6.72 12.56 7.16",svg:(0,o(474848).jsx)("path",{d:"M9.381 13.619a.875.875 0 0 0 1.238 0l5.4-5.4A.875.875 0 1 0 14.78 6.98L10 11.763 5.219 6.98A.875.875 0 1 0 3.98 8.22z"})},n=(0,o(340498).wt)("arrowChevronSingleDownFill",i)},626822:(e,t,o)=>{o.d(t,{A:()=>a});var i=o(296540),n=()=>o(959013),s=o(474848);function r(e,t){const{teamStore:i,renderAsEveryoneMention:r}=e,{name:a}=(0,o(56366).K8)((()=>({name:i.getName()})),[i]);return(0,s.jsx)(o(760217).A,{...e,icon:r?(0,o(522500).q)({width:14,height:14}):(0,s.jsx)(o(898808).x,{size:14,store:i,disabled:!0}),title:r?(0,s.jsx)(n().sA,{id:"posts.teamMenuItem.everyoneMention",defaultMessage:"@everyone"}):a,ref:t,inline:!0,caption:r?(0,s.jsx)(n().sA,{id:"posts.teamMenuItem.caption",defaultMessage:"Notifies everyone in the teamspace"}):void 0})}const a=i.forwardRef(r)},668577:(e,t,o)=>{o.d(t,{Z:()=>i,o:()=>s});const i=100;class n extends(()=>o(757695))().Store{getInitialState(){return{stores:{}}}getStore(e){if(e)return this.state.stores[e]||(this.state.stores[e]=new(o(178624).R)({key:`emojiFrecency:${e}`,namespace:o(419494).Bq,important:!0,trackingType:"necessary"})),this.state.stores[e]}getEmojiFrecencyMap(){var e;const t=this.getStore(null===(e=o(765957).default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId());if(!t)return{};return t.state??{}}}const s=new n},671089:(e,t,o)=>{o.r(t),o.d(t,{checkmarkCircleIcon:()=>s,iconDefinition:()=>n});o(296540);var i=o(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M12.876 7.982a.625.625 0 1 0-1.072-.644L9.25 11.595 7.815 9.92a.625.625 0 0 0-.95.813l2 2.334a.625.625 0 0 0 1.01-.085z"}),(0,i.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},s=(0,o(340498).wt)("checkmarkCircle",n)},736767:(e,t,o)=>{o.d(t,{A:()=>r});var i=o(296540),n=o(474848);function s(e,t){return(0,n.jsx)(o(678553).Ay,{...e,ref:t,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}const r=(0,i.forwardRef)(s)},755535:(e,t,o)=>{o.d(t,{A:()=>v});o(581454);var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(401497),a=()=>o(668725),l=()=>o(722872);class c extends(()=>o(757695))().Store{getInitialState(){return{}}}const d=c;var u=()=>o(493823),m=()=>o(406699),p=()=>o(113474),g=()=>o(928600),h=()=>o(939740),f=o(474848);function x(e,t){let{isMenuItem:n,style:a,labelStyle:l,alignmentToOrigin:c,renderMenuSections:u,label:m,selectedTitle:p,focused:g,disabled:h,innerButtonStyle:x,buttonPopupStore:v,downIconStyle:j}=e;const k=(0,r().DP)(),A=(0,s().uB)(void 0,d),C=(0,s().uB)(v,o(463830).A);return(0,i.useImperativeHandle)(t,(()=>({closeMenu:()=>{C.setState({...C.state,open:!1})}})),[C]),n?(0,f.jsx)(S,{alignmentToOrigin:c,isMenuItem:n,renderMenuSections:u,buttonPopupStore:C,SelectButtonStore:A,renderOrigin:e=>(0,f.jsx)(y,{events:e,style:a,isMenuItem:n,label:m,selectedTitle:p,focused:g,disabled:h})}):(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center",height:32,...a},children:[m&&(0,f.jsx)("div",{style:{marginRight:"auto",color:k.text.tertiary,fontSize:14,...l},children:m}),(0,f.jsx)(S,{alignmentToOrigin:c,isMenuItem:n,renderMenuSections:u,buttonPopupStore:C,SelectButtonStore:A,renderOrigin:e=>(0,f.jsx)(b,{events:e,innerButtonStyle:x,disabled:h,selectedTitle:p,downIconStyle:j})})]})}const v=i.forwardRef(x);function y(e){let{events:t,style:o,isMenuItem:i,label:n,selectedTitle:s,focused:r,disabled:a}=e;if(i){const e=n?{title:n,right:s}:{title:s};return(0,f.jsx)(p()._,{...t,focused:Boolean(r),disabled:a,style:o,...e})}return null}function j(e){let{downIconStyle:t}=e;const{device:o}=(0,n().v3)(),i=(0,r().DP)();return(0,f.jsx)(f.Fragment,{children:(0,a().b)({width:o.isMobile?14:10,marginLeft:4,fill:i.icon.tertiary,...t})})}function b(e){let{events:t,innerButtonStyle:o,downIconStyle:i,disabled:n,selectedTitle:s}=e;return(0,f.jsxs)(u().p,{disabled:n,disabledFeedback:!0,style:{marginRight:-6,...o},...t,children:[s,(0,f.jsx)(j,{downIconStyle:i})]})}function S(e){let{renderOrigin:t,alignmentToOrigin:o,isMenuItem:i,renderMenuSections:s,buttonPopupStore:r,SelectButtonStore:a}=e;const c=(0,n().v3)(),{device:d}=c;return(0,f.jsx)(m().Ay,{popupType:d.isMobile?m().z7.SlideUp:m().z7.Popup,buttonPopupStore:r,alignmentToOrigin:void 0!==o?o:m().yP.End,renderOrigin:t,placementToOrigin:i?m().sx.Right:m().sx.Bottom,originGap:i?void 0:4,render:e=>{let t;t=d.isMobile?{menuType:l().gu.ActionSheet}:{menuType:l().gu.Popup};const{focusedIndex:o,menuSections:i}=function(e,t,o){let i,n=0;const s=t(e).map((e=>({...e,items:e.items.map((e=>(e.key===o.state.selectedKey&&(i=n),n++,{...e,action:t=>{e.action(t),function(e,t){t.setState({selectedKey:e})}(e.key,o)}})))})));return{menuSections:s,focusedIndex:i}}(e,s,a);return(0,f.jsx)(g().A,{...t,children:(0,f.jsx)(h().Ay,{type:h().Oh.Vertical,initialFocus:o,sections:i})})}})}},769314:(e,t,o)=>{o.d(t,{A:()=>g});o(944114),o(581454);var i=o(296540),n=()=>o(484714),s=()=>o(401497),r=()=>o(278238),a=()=>o(959013),l=()=>o(486666),c=()=>o(939740),d=o(474848);const u=(0,a().YK)({selectColorLabel:{defaultMessage:"Set color as {color}",id:"horizontalColorPicker.selectColor"}});function m(e){const{parent:t,currentColor:i,onColorSelected:l,additionalItems:u}=e,m=(0,n().v3)(),g=(0,a().tz)(),h=(0,s().IS)((()=>({menu:{padding:4,...e.menuStyle}})),[e.menuStyle]),f=r().v3.map((e=>({key:e,action:o=>{t.close(),l({environment:m,color:e})},render:t=>(0,d.jsx)(o(859428).A,{renderTooltip:()=>g.formatMessage(r().jd[e]),placement:o(962730).W.Bottom,render:o=>(0,d.jsx)(p,{ref:t.ref,color:e,tooltipEvents:o,menuListProps:t,currentColor:i})})})));return u&&f.push(...u),(0,d.jsx)(o(805751).A,{debugName:"ColorPicker",capture:!0,allowEsc:!0,children:(0,d.jsx)(c().Ay,{type:c().Oh.Grid,getItemsPerRowForSection:()=>5,initialFocus:i?Math.max(r().v3.indexOf(i),0):10,sections:[{key:"variations",render:e=>(0,d.jsx)("div",{...e}),items:f}],renderRow:(t,o)=>{var i;return(0,d.jsx)("div",{role:"row",style:{display:"flex",padding:4,gap:4,justifyContent:"center",...(null===(i=e.rowStyle)||void 0===i?void 0:i.call(e,o))??{}},children:t},o)},style:h.menu})})}const p=i.forwardRef((function(e,t){const{color:m,tooltipEvents:p,menuListProps:g,currentColor:h}=e,f=(0,a().tz)(),x=(0,n().Y0)(),[v,y]=(0,i.useState)(!1),{isMenuListFocusVisible:j}=(0,i.useContext)(c().VU),b=g.focused&&j,S=(0,s().IS)((e=>({colorPickerItem:{display:"grid",gridTemplateColumns:"1fr",cursor:void 0!==h?"pointer":void 0},icon:{height:x.isMobile?24:16,width:x.isMobile?24:16,stroke:r().l8[e.mode][m],fill:r().l8[e.mode][m]},iconButton:{width:x.isMobile?l().UA:22,height:x.isMobile?l().UA:22,gridRowStart:1,gridColumnStart:1,...b&&{boxShadow:e.buttonBlueFocusRing}},selectedCircleWrapper:{width:x.isMobile?l().UA:22,height:x.isMobile?l().UA:22,gridRowStart:1,gridColumnStart:1,display:"flex",alignItems:"center",justifyContent:"center"},selectedCircle:{width:x.isMobile?30:22,height:x.isMobile?30:22,borderRadius:"100%",border:`1.5px solid ${r().l8[e.mode][m]}`,opacity:v?.5:1}})),[x.isMobile,v,m,b,h]),k=(0,i.useCallback)((e=>{y(!0),g.onMouseEnter&&g.onMouseEnter(e),p.onMouseEnter&&p.onMouseEnter(e)}),[g,p]),A=(0,i.useCallback)((e=>{y(!1),p.onMouseLeave&&p.onMouseLeave(e)}),[p]);return(0,d.jsxs)("div",{style:S.colorPickerItem,...(0,o(553965).A)(p,{onClick:void 0!==h?g.onClick:void 0}),onMouseEnter:k,onMouseLeave:A,children:[(0,d.jsx)(o(285790).A,{ref:t,disabled:void 0===h,ariaLabel:f.formatMessage(u.selectColorLabel,{color:f.formatMessage(r().jd[m])}),style:S.iconButton,icon:o(602031).H,iconStyle:S.icon,hovered:v,role:g.role,id:g.id,disallowTabbing:!0}),(h===m||void 0!==h&&(v||b))&&(0,d.jsx)("div",{style:S.selectedCircleWrapper,children:(0,d.jsx)("div",{style:S.selectedCircle})})]})})),g=i.memo(m)},828265:(e,t,o)=>{o.d(t,{D:()=>ie,p:()=>re});o(944114),o(269479),o(898992),o(823215),o(354520),o(672577),o(430670),o(803949),o(581454),o(737550);var i=()=>o(690825),n=o(296540),s=()=>o(17022),r=()=>o(484714),a=()=>o(852507),l=()=>o(56366),c=()=>o(401497),d=()=>o(637997),u=()=>o(669729),m=()=>o(634201),p=()=>o(340498),g=o(474848);const h={viewBox:"0 0 20 20",fittedViewBox:"2.39 3.05 15.76 13.89",svg:(0,g.jsx)("path",{d:"M5.29 3.366a.63.63 0 0 1 .54-.311h2.81c.182 0 .356.08.474.218l4.023 4.692h2.983c1.112 0 2.025.897 2.025 2.025v.02a2.03 2.03 0 0 1-2.025 2.025h-2.983l-4.023 4.692a.63.63 0 0 1-.474.218H5.83a.625.625 0 0 1-.542-.936l2.274-3.974H6.496l-1.949 1.358-.026.017c-.24.15-.533.255-.851.255h-.65a.625.625 0 0 1-.597-.81L3.306 10l-.883-2.855a.625.625 0 0 1 .597-.81h.65c.298 0 .61.079.883.276l1.943 1.354h1.066L5.288 3.99a.63.63 0 0 1 .001-.624m1.618.939 2.274 3.974a.625.625 0 0 1-.542.936H6.3a.63.63 0 0 1-.357-.112L3.896 7.677l.661 2.138a.63.63 0 0 1 0 .37l-.661 2.138 2.047-1.426a.63.63 0 0 1 .357-.112h2.34a.625.625 0 0 1 .542.935l-2.274 3.975h1.445l4.023-4.692a.63.63 0 0 1 .474-.218h3.27a.78.78 0 0 0 .775-.775v-.02a.773.773 0 0 0-.775-.775h-3.27a.63.63 0 0 1-.474-.218L8.353 4.305z"})},f=(0,p().wt)("airplane",h),x={viewBox:"0 0 20 20",fittedViewBox:"1.67 1.55 16.78 16.78",svg:(0,g.jsx)("path",{d:"M11.375 5.413a4.5 4.5 0 0 1-.152-1.177c0-1.482.673-2.683 1.504-2.683.742 0 1.358.957 1.481 2.217.898-.62 1.846-.767 2.318-.296.471.472.324 1.42-.296 2.318 1.26.123 2.217.74 2.217 1.481 0 .83-1.201 1.504-2.683 1.504a4.5 4.5 0 0 1-1.177-.152 3.23 3.23 0 0 1-1.378 3.606l-9.233 5.853c-1.346.852-2.912-.714-2.06-2.06L7.77 6.791a3.23 3.23 0 0 1 3.606-1.378m.517 1.708a1.976 1.976 0 0 0-3.067.339l-.175.276 1.232 1.232a.55.55 0 1 1-.777.778L8.047 8.688l-.467.736 1.306 1.307a.55.55 0 1 1-.778.778l-1.132-1.132-4.004 6.317a.23.23 0 0 0-.042.16.26.26 0 0 0 .075.14.26.26 0 0 0 .141.076.23.23 0 0 0 .16-.042l3.221-2.042-.561-.561a.55.55 0 1 1 .778-.778l.735.736 5.06-3.208a1.976 1.976 0 0 0 .34-3.067z"})},v=(0,p().wt)("carrot",x);const y={viewBox:"0 0 20 20",fittedViewBox:"1.92 3.31 16.8 14.56",svg:(0,g.jsx)("path",{d:"M2.545 3.31a.625.625 0 0 0-.625.625c0 5.882 4.312 10.763 9.765 10.763h3.581c.737.8 1.472 1.718 2.306 2.88a.624.624 0 1 0 1.012-.728c-.947-1.32-1.78-2.344-2.621-3.232C15.747 7.94 11.518 3.31 6.207 3.31zm12.024 8.956c-1.239-1.104-2.624-2.118-4.489-3.483l-1.023-.75a.62.62 0 0 0-.872.134.63.63 0 0 0 .137.875l1.013.742c2.007 1.47 3.42 2.505 4.68 3.664h-2.33c-4.46 0-8.208-3.871-8.497-8.888h3.019c4.102 0 7.602 3.276 8.362 7.706"})},j=(0,p().wt)("leaf",y);var b=()=>o(863330);const S={viewBox:"0 0 20 20",fittedViewBox:"1.87 1.87 16.26 16.26",svg:(0,g.jsx)("path",{d:"M10 1.875a8.125 8.125 0 1 0 0 16.25 8.125 8.125 0 0 0 0-16.25M4.896 5.393a6.9 6.9 0 0 1 2.298-1.671L9.45 5.36v1.35L7.04 8.46l-1.283-.417zm-1.733 5.334L5.417 9.09l1.284.417.92 2.833-.793 1.091H4.04a6.8 6.8 0 0 1-.878-2.703m5.416 6.001-.861-2.651.793-1.092h2.978l.793 1.092-.861 2.651a6.9 6.9 0 0 1-2.842 0m7.38-3.298h-2.787l-.793-1.091.92-2.833 1.284-.417 2.254 1.638a6.8 6.8 0 0 1-.878 2.703m-.855-8.037-.861 2.65-1.283.417-2.41-1.75V5.36l2.256-1.638c.879.393 1.66.966 2.298 1.671"})},k=(0,p().wt)("soccerBall",S);var A=()=>o(959013),C=()=>o(496603),M=()=>o(534177),w=()=>o(284371),I=()=>o(901997),P=()=>o(736767),E=()=>o(197190),B=()=>o(939740),T=()=>o(8980),R=()=>o(89924),D=()=>o(859428),F=()=>o(87878),U=()=>o(63467),L=()=>o(722872),W=()=>o(486666),z=()=>o(948033),_=()=>o(423219),O=()=>o(797162),H=()=>o(970585),V=()=>o(765957),N=()=>o(712030);const K=1,q=6048e5;function $(e,t,o){if(void 0===e||void 0===t)return 0;const i=o-t,n=e*Math.pow(.5,i/q);return Math.round(n)}var G=()=>o(668577);var Z=()=>o(267419),Y=()=>o(285790),J=()=>o(962730);function Q(e){const t=(0,A().tz)(),o=(0,c().IS)((e=>({wrapper:{borderTop:`solid 1px ${e.stroke.secondary}`,display:"flex",justifyContent:"space-between",paddingTop:8,paddingBottom:10,paddingLeft:12,paddingRight:12}})),[]);return(0,g.jsx)("div",{style:o.wrapper,children:ie.map(((o,i)=>e.isHidden(o)?null:(0,g.jsx)(D().A,{alignment:J().C.Start,placement:J().W.Bottom,render:i=>(0,n.createElement)(Y().A,{focused:e.isFocused(o),disabled:e.isDisabled(o),...i,key:o.id,ariaLabel:t.formatMessage({id:"emojiPicker.category.label",defaultMessage:"Jump to category: {category}"},{category:o.category??o.id}),icon:()=>o.icon?(0,g.jsx)(T().I,{icon:o.icon,size:"lg",color:"secondary"}):void 0,style:{width:32,height:32},onClick:t=>{e.onCategoryClick(o,t)}}),renderTooltip:e=>(0,g.jsx)("div",{...e,children:o.title})},o.id)))})}var X=()=>o(519116);const ee=(0,A().YK)({noResults:{defaultMessage:"No results",id:"emojiPicker.noResults.message"}}),te=(0,g.jsx)(A().sA,{id:"emojiPicker.addCustomEmoji",defaultMessage:"Add emoji"}),oe="__ADD_CUSTOM_EMOJI__",ie=[{id:"recent",title:(0,g.jsx)(A().sA,{id:"emojiPicker.section.recent",defaultMessage:"Recent"}),icon:o(274570).clockIcon},{id:"callout",title:(0,g.jsx)(A().sA,{id:"emojiPicker.section.callout",defaultMessage:"Callout"})},{id:"people",category:"People & Body",title:(0,g.jsx)(A().sA,{id:"emojiPicker.section.people",defaultMessage:"People"}),icon:o(424139).emojiFaceIcon},{id:"nature",category:"Animals & Nature",title:(0,g.jsx)(A().sA,{id:"emojiPicker.section.animals",defaultMessage:"Animals and nature"}),icon:j},{id:"food",category:"Food & Drink",title:(0,g.jsx)(A().sA,{id:"emojiPicker.section.food",defaultMessage:"Food and drink"}),icon:v},{id:"activities",category:"Activities",title:(0,g.jsx)(A().sA,{id:"emojiPicker.section.activity",defaultMessage:"Activity"}),icon:k},{id:"travel",category:"Travel & Places",title:(0,g.jsx)(A().sA,{id:"emojiPicker.section.travel",defaultMessage:"Travel and places"}),icon:f},{id:"objects",category:"Objects",title:(0,g.jsx)(A().sA,{id:"emojiPicker.section.objects",defaultMessage:"Objects"}),icon:o(123411).X},{id:"symbols",category:"Symbols",title:(0,g.jsx)(A().sA,{id:"emojiPicker.section.symbols",defaultMessage:"Symbols"}),icon:o(671089).checkmarkCircleIcon},{id:"flags",category:"Flags",title:(0,g.jsx)(A().sA,{id:"emojiPicker.section.flags",defaultMessage:"Flags"}),icon:o(748054).M},{id:"custom",title:(0,g.jsx)(A().sA,{id:"emojiPicker.section.custom",defaultMessage:"Custom"}),icon:o(858141).p},{id:"add",title:te,icon:o(480034).q}],ne=Object.fromEntries(ie.map((e=>[e.id,e]))),se=["💡","👉","☝","👌","🔑","🚧","⚠️","🔥","📌","✂️","❓","🚫","⛔","⏰","☎️","🚨","♻️","✅","🔒","📎","📖","🗣","➡️","📢","🛠","⚙"];function re(e){const{onSubmit:t,isInline:o,onUpload:p,iconLoggingData:h,onNoResults:f,comboboxProps:x,hideCustomEmoji:v}=e,y=(0,r().v3)(),j=(0,c().DP)(),S=(0,A().tz)(),k=(0,r().Y0)(),q=(0,L().Tf)(),Y=(0,l().K8)((()=>Math.floor((0,z().so)(y,e.menuRef,q))),[y,e.menuRef,q]),J=(0,l().K8)((()=>(0,z().uu)(y)),[y]),ie=(0,l().K8)((()=>(0,F().wA)({spaceStore:(0,F().vZ)()})),[]),re=k.isDesktop&&ie&&!v,ue=(0,n.useMemo)((()=>s().e.withListenerIgnored((()=>G().o.getEmojiFrecencyMap()))),[]),me=(0,n.useMemo)((()=>Object.keys(ue).sort(((e,t)=>ue[t].f!==ue[e].f?ue[t].f-ue[e].f:ue[t].u-ue[e].u)).slice(0,W().Te*Y)),[ue,Y]),pe=(0,l().K8)((()=>{var e;const t=(0,F().vZ)();if(!t)return[];return((null===(e=_().A.getData(y,{spaceId:t.id}))||void 0===e?void 0:e.pointers)??[]).map((e=>m().qg.toString(m().qg.fromPointer(e))))}),[y]),ge=(0,n.useCallback)((e=>{t(e),function(e){var t;const o=G().o.getStore(null===(t=V().default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId());if(!o)return;let i=o.state??{};const n=Date.now();for(const r in i)i[r].f=$(i[r].f,i[r].u,n);const s=(0,N().t4)(e);if(s in i?(i[s].f+=K,i[s].u=n):i[s]={f:K,u:n},Object.keys(i).length>G().Z){const e=Object.entries(i);e.sort(((e,t)=>e[1].f!==t[1].f?t[1].f-e[1].f:t[1].u-e[1].u)),i=Object.fromEntries(e.slice(0,G().Z))}o.setState(i)}(e),h&&I().aU(y,"pick_emoji",{icon:e,...h})}),[t,h,y]),he=(0,Z()._)(),fe=(0,l().K8)(N().bb,[]),xe=(0,n.useCallback)((e=>{const t=void 0===fe?m().Fq(e,he):[];return{key:e,action:()=>{0===t.length&&ge(e)},render:o=>(0,g.jsx)(X().A,{...o,emoji:e,showTooltip:!0,variations:t,insertEmoji:ge})}}),[ge,he,fe]),ve=(0,l().K8)((()=>{const t=function(e){const{environment:t,filter:o,isCallout:i,maxEmojisPerSection:n,showCategoriesThreshold:s,customEmojiStrings:r,shouldShowCustomAddButton:a,frequentlyUsedEmojis:l,emojiFrecencyMap:c,hideCustomEmoji:d}=e,p=function(e){return C().oE([e.filterIsEmpty?ne.recent:void 0,e.isCallout?ne.callout:void 0,ne.people,ne.nature,ne.food,ne.activities,ne.travel,ne.objects,ne.symbols,ne.flags,e.hideCustomEmoji?void 0:ne.custom])}({filterIsEmpty:!(null!=o&&o.trim()),isCallout:i,hideCustomEmoji:d}),g=m().f7(o)??"",h=o.split(" ").filter(Boolean),f=p.map((e=>{const o=function(e,t,o){return"recent"===e.id?o:"callout"===e.id?se:"custom"===e.id?t:Z().A.state.emojiByCategory[e.category]||[]}(e,r,l),i=function(e,t,o,i,n,s){const r=C().oE(t.map((t=>{if(s&&m().qg.isCustomEmojiString(t))return;if(""===o)return{rank:100,emoji:t};const r=(0,u().$)(t,Z().A.state);let a=[];if(r&&r.keywords)a=r.keywords||[];else if(m().qg.isCustomEmojiString(t)){var l;const o=m().qg.fromCustomEmojiString(t).pointer,i=e.currentUser.id;if(!i)return;const n=null===(l=e.defaultRecordCache.inMemoryRecordCache.getRecord({pointer:o,userId:i}))||void 0===l?void 0:l.value;if(!n||!n.alive)return;a=m().AP(n.name)}const c=o.length<3||o.includes(" ")?a:a.map((e=>e.replaceAll(" ",""))),d=o.indexOf(t);if(-1!==d)return{rank:100-d+le(t,n),emoji:t};const p=":",g=c.findIndex((e=>e===`${p}${o}`));if(-1!==g)return{rank:100-g+le(t,n),emoji:t};const h=c.findIndex((e=>e===o));if(-1!==h)return{rank:10*(10-h)+le(t,n),emoji:t};const f=c.findIndex((e=>e.startsWith(o)));if(-1!==f)return{rank:10-f+le(t,n),emoji:t};if(i.length>1){const e=r&&r.uniqueKeywords||[];if(i.every((t=>e.find((e=>e.startsWith(t))))))return{rank:i.length+le(t,n),emoji:t}}return c.some((e=>e.includes(o)))?{rank:1+le(t,n),emoji:t}:void 0})));return r.sort(((e,t)=>t.rank-e.rank))}(t,o,g,h,c,d);return{category:e,emojis:i.map((e=>({rank:e.rank,emoji:ce(e.emoji)})))}})),x=[];let v=0;for(const{category:u,emojis:m}of f){if(a&&"custom"===u.id){const e={rank:-1/0,emoji:oe};m.unshift(e)}let e=0;for(;e<m.length;){const t=m.slice(e,e+n);x.push({id:u.id,title:0===e?u.title:void 0,emojis:t}),e+=t.length}v+=m.length}if(""===o||v>s){return x.map((e=>({...e,emojis:e.emojis.map((e=>{let{emoji:t}=e;return t}))})))}const y=C().Ul(x.flatMap((e=>e.emojis)),(e=>-e.rank)).map((e=>{let{emoji:t}=e;return t}));if(0===y.length)return[];return[{emojis:y}]}({environment:y,filter:e.filter,isCallout:e.isCallout??!1,maxEmojisPerSection:Y,showCategoriesThreshold:Math.floor(Y*J/2),customEmojiStrings:pe,shouldShowCustomAddButton:re,frequentlyUsedEmojis:me,emojiFrecencyMap:ue,hideCustomEmoji:v});return t}),[y,e.filter,e.isCallout,Y,J,re,pe,me,ue,v]),ye=(0,n.useRef)(null),je=(0,n.useMemo)((()=>{const e=[];for(const[t,o]of ve.entries()){let i;i=k.isMobile?W().UA:W().Sq;const n=void 0!==o.title,s=t===ve.length-1||void 0!==ve[t+1].title;n&&(k.isMobile?i+=47.5:i+=33.5),s&&k.isMobile&&(i+=10),e.push(i)}return e}),[ve,k]),be=(0,i().Te)({count:ve.length,getScrollElement:()=>ye.current,estimateSize:e=>je[e]}),Se=(0,n.useCallback)((e=>{const t=ve.findIndex((t=>t.id===e));-1!==t&&be.scrollToIndex(t,{behavior:"auto",align:"start"})}),[be,ve]),ke=(0,n.useRef)(null);(0,a().w)((()=>{!async function(){await(0,U().y)(),await async function(){if(!ae){await Z().A.waitUntilLoaded();for(const t in Z().A.state.positionalEmojiData){var e;const o=null===(e=(0,u().$)(t,Z().A.state))||void 0===e?void 0:e.keywords;o&&(d().fB[t]={...d().fB[t],uniqueKeywords:C().sb(o.flatMap((e=>e.split(" "))))})}ae=!0}}()}()}));const Ae=(0,l().uB)(void 0,H().A);(0,a().l)((()=>{Ae.setState({...Ae.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}));const Ce=re?1===ve.length&&ve[0].emojis[0]===oe:0===ve.length;(0,n.useEffect)((()=>{Ce?Ae.unsetFocus():Ae.setState({...Ae.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}),[e.filter,Ae,Ce]),(0,n.useEffect)((()=>{0===ve.length&&(null==f||f())}),[ve,f]);const Me=(0,n.useMemo)((()=>re?{key:"custom-emoji-add",action:()=>{ke.current&&O().A.setState({open:!0,isEditing:!1,entrypoint:"picker",originRect:ke.current.getBoundingClientRect(),uploadFileEventHandlers:p})},render:e=>(0,g.jsx)(D().A,{renderTooltip:()=>te,render:t=>(0,g.jsx)(E().A,{...e,...t,ref:ke,ignoreLocalHoverState:!1,style:{width:28,height:28,margin:2,display:"flex",justifyContent:"center",alignItems:"center",border:`1px solid ${j.stroke.primary}`,cursor:"pointer",borderRadius:15},children:(0,g.jsx)(T().I,{icon:b().plusSmallIcon,size:"sm",color:"secondary"})})})}:null),[p,re,j]),we=[];let Ie,Pe=!1;if(Ce)we.push({key:"no results",items:[{key:"no results",action:()=>{ke.current&&re&&O().A.setState({open:!0,isEditing:!1,entrypoint:"no_results",originRect:ke.current.getBoundingClientRect(),uploadFileEventHandlers:p})},render:(e,t)=>(0,g.jsxs)("div",{style:{...o&&{width:"100%"},display:"flex",flexDirection:o?"row":"column"},children:[(0,g.jsx)(P().A,{...!re&&e,caption:S.formatMessage(ee.noResults),style:{fontWeight:w().Wy.medium,marginBottom:2,marginLeft:2,height:20,boxSizing:"content-box"}}),re?(0,g.jsxs)(E().A,{...e,ref:ke,style:{display:"flex",alignItems:"center",gap:6,padding:"4px 8px",margin:o?"2px 8px":"0 12px",height:28,borderRadius:6,border:`1px solid ${j.stroke.primary}`,fontWeight:w().Wy.medium,fontSize:w().J.UIRegular.desktop,whiteSpace:"nowrap"},children:[(0,g.jsx)(T().I,{icon:b().plusSmallIcon,size:"sm",color:"primary"}),te]}):null]})}],render:e=>(0,g.jsx)(R().A,{...e})});else if(1===ve.length&&void 0===ve[0].id){const e=C().sb(ve[0].emojis).map((e=>e===oe?Me:xe(e))).filter(M().Pe);we.push({key:"search-results",items:e,render:e=>(0,g.jsx)(R().A,{shouldShowBottomDivider:!0,children:(0,g.jsx)("div",{style:(0,z().ze)(y,j,q),children:e.children})},e.key)})}else Pe=!0,be.getVirtualItems().map((e=>{var t;const{key:o,index:i,start:n,end:s,size:r}=e,a=ve[i],l=void 0!==a.title,c=i===ve.length-1||void 0!==ve[i+1].title,[d,u]=[be.scrollOffset??0,(be.scrollOffset??0)+((null===(t=be.scrollRect)||void 0===t?void 0:t.height)??0)];u<n||d>=s||void 0===Ie&&(Ie=a.id);const m=a.emojis.map((e=>e===oe?Me:xe(e))).filter(M().Pe);return{key:o.toString(),items:m,render:e=>(0,g.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:r,transform:`translateY(${n}px)`},children:(0,g.jsx)("div",{"data-index":i,children:(0,g.jsx)(R().A,{title:a.title,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,mobileTitleStyle:{...l?{paddingTop:16}:{}},desktopTitleStyle:{...l?{paddingTop:6,lineHeight:"100%"}:{}},style:{display:"flex",flexDirection:"column",alignItems:"stretch"},children:(0,g.jsx)("div",{style:{...(0,z().ze)(y,j,q),...l&&k.isMobile?{paddingTop:10}:{},...c&&k.isMobile?{paddingBottom:10}:{},...k.isPhone&&{boxShadow:de({theme:j,isFirstRowInSection:l,isLastRowInSection:c})}},children:e.children})})},o.toString())},i)}})).forEach((e=>e&&we.push(e)));const Ee=k.isDesktop&&we.length>0?0:void 0,Be=(0,g.jsx)(B().Ay,{style:{alignItems:"stretch",width:"100%",position:"relative",height:"100%"},type:B().Oh.Grid,getItemsPerRowForSection:()=>Y,renderRow:(e,t)=>(0,g.jsx)("div",{role:"row",style:{display:"flex"},children:e},t),store:Ae,initialFocus:Ee,sections:we,disableKeyboardArrowWrap:!0,unfocusOnScroll:k.isMobile,performHandleEnterOnTab:o,comboboxProps:x,captureKeyboardOnlyWhenFocused:!o});if(!Pe)return(0,g.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:(0,g.jsx)("div",{style:{width:"100%",flexGrow:1},children:Be})});const Te=(0,g.jsx)(Q,{isHidden:e=>{switch(e.id){case"callout":return!0;case"custom":return v||!ie&&0===pe.length;case"add":return!re;default:return!1}},isFocused:e=>Ie===e.id,isDisabled:e=>{if(["custom","add"].includes(e.id))return!1;const t=ve.find((t=>t.id===e.id));return void 0===t||0===t.emojis.length},onCategoryClick:(e,t)=>{"add"===e.id?O().A.setState({open:!0,isEditing:!1,entrypoint:"categories_bar",originRect:t.currentTarget.getBoundingClientRect(),uploadFileEventHandlers:p}):Se(e.id)}});return(0,g.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[(0,g.jsx)("div",{style:{width:"100%",flexGrow:1,maxHeight:k.isDesktop?W().w$:void 0,overflowX:"hidden",overflowY:"auto",paddingBottom:6},ref:ye,children:(0,g.jsx)("div",{style:{height:be.getTotalSize(),width:"100%",position:"relative"},children:Be})}),Te]})}let ae=!1;function le(e,t){const o=t[e];return o?100*o.f:0}function ce(e){var t;const o=(0,N().bb)();if(!(void 0!==o&&0!==o))return e;const i=null===(t=(0,u().$)(e,Z().A.state))||void 0===t?void 0:t.variations;return 5===(null==i?void 0:i.length)||"🤝"===e?(null==i?void 0:i[o-1])??e:e}function de(e){const{theme:t,isFirstRowInSection:o,isLastRowInSection:i}=e;return o&&i?`0 1px 0 ${t.regularDividerColor}, 0 -1px 0 ${t.regularDividerColor}`:o?`0 -1px 0 ${t.regularDividerColor}`:i?`0 1px 0 ${t.regularDividerColor}`:"none"}},892936:(e,t,o)=>{o.d(t,{f:()=>n});o(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"3.72 2.12 12.56 15.76",svg:(0,o(474848).jsx)("path",{d:"M10.619 2.381a.875.875 0 0 0-1.238 0l-5.4 5.4A.875.875 0 0 0 5.22 9.02l3.906-3.907V17.05c0 .456.392.826.875.826s.875-.37.875-.826V5.112l3.906 3.907A.875.875 0 1 0 16.02 7.78z"})},n=(0,o(340498).wt)("arrowStraightUpFill",i)},948033:(e,t,o)=>{o.d(t,{$n:()=>c,b0:()=>l,so:()=>u,uu:()=>m,ze:()=>d});var i=()=>o(484714),n=()=>o(56366),s=()=>o(401497),r=()=>o(381349),a=()=>o(486666);function l(){const{device:e,WindowSizeStore:t}=(0,i().v3)(),o=(0,n().K8)((()=>e.isPhone),[e]),{phonePaddingLeft:r,phonePaddingRight:a}=(0,n().K8)((()=>({phonePaddingLeft:t.getSafePaddingLeftCSS(14),phonePaddingRight:t.getSafePaddingRightCSS(14)})),[t]);return(0,s().IS)((e=>({galleryWrap:{display:"flex",flexWrap:"wrap",alignContent:"flex-start",background:e.popoverBackground,paddingTop:o?12:0,paddingBottom:o?12:0,paddingLeft:o?r:12,paddingRight:o?a:12,boxShadow:o?`0 1px 0 ${e.regularDividerColor}`:""}})),[o,r,a])}function c(){return{display:"flex",alignItems:"center",justifyContent:"center",minHeight:320,flex:1}}function d(e,t,o){const{device:i,WindowSizeStore:n}=e;return{display:"flex",flexDirection:"column",flexWrap:"wrap",...o?{}:{alignItems:"flex-start"},...i.isPhone?o?{background:r().Tj.transparent,paddingLeft:n.getSafePaddingLeftCSS(0),paddingRight:n.getSafePaddingRightCSS(0)}:{background:t.popoverBackground,paddingLeft:n.getSafePaddingLeftCSS(a().H),paddingRight:n.getSafePaddingRightCSS(a().MP)}:i.isTablet?{background:r().Tj.transparent,paddingLeft:a().FU,paddingRight:a().FU}:{background:r().Tj.transparent,paddingLeft:a().zG,paddingRight:a().zG}}}function u(e,t,o){var i,n;const{device:s,WindowSizeStore:r}=e;if(s.isPhone){const e=o?0:a().H,t=o?0:a().MP;return(window.innerWidth-r.getSafePaddingLeftPx(e)-r.getSafePaddingRightPx(t))/a().UA}return s.isTablet?a().Vq:null!=t&&null!==(i=t.current)&&void 0!==i&&i.offsetWidth?((null==t||null===(n=t.current)||void 0===n?void 0:n.offsetWidth)-2*a().zG)/a().Sq:a().bc}function m(e){return e.device.isMobile?a().zR:a().zf}}}]);