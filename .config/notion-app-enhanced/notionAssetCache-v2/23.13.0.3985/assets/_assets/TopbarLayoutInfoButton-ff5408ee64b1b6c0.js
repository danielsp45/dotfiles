"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[2597],{9768:(e,o,t)=>{t.d(o,{Br:()=>C,Jh:()=>x,Lb:()=>S,YE:()=>w,cu:()=>M});t(16280),t(898992),t(672577);var n=t.n(t(32485)),i=t(296540),r=()=>t(484714),l=()=>t(56366),a=()=>t(778781),s=()=>t(534177),c=()=>t(623186),d=()=>t(780054),u=()=>t(600871),p=()=>t(478726),m=()=>t(963589),g=()=>t(548821),y=()=>t(517223),f=()=>t(823082),h=()=>t(241181),v=()=>t(817942),_=t(474848);const S=12,w=12,B=10,b=10,P=8;function k(e){let{collectionSchema:o,module:t}=e;return!(!o||"normalizedTitleWithIcon"!==t.type)&&(0,y().LD)({collectionSchema:o,module:t}).length>0}function x(e){let{layoutModule:o,area:t,context:r,collectionSchema:u,collectionStore:y,showDetailsPanelToggleButtonBelowTitle:x,modules:C,postContext:M}=e;const A=C.findIndex((e=>e.id===o.id)),I=null!=C&&C.length&&-1!==A?C[A+1]:void 0,T=(0,h().p)({collectionStore:y,layoutModule:I}),D=(0,c().aN)(y),j=(0,l().K8)((()=>Boolean(null==y?void 0:y.isPageTreeCollection())),[y]),K=(0,m().X)("content_reskin_v2"),[L,V]=(0,i.useMemo)((()=>{const e=k({collectionSchema:u,module:o});let n=!1;const i={};if("page_details"===t||"person_profile_page_details"===t)i.marginBottom=B,i.paddingBottom=b;else if("page_main"===t||"person_profile_page_main"===t)i.marginBottom=w,i.paddingBottom=S;else if("views_main_tab_modules"===t)i.marginBottom=w,i.paddingBottom=S;else{if("form_layout_schema"===t||"form_conditional_modules"===t)throw new Error("Not implemented for forms");(0,s().HB)(t)}const l="editor"===(null==I?void 0:I.type);(0,p().Mi)(M)?"editor"===o.type&&M!==g().Rr.DraftPostInFullPageComposer?n=!0:"normalizedTitleWithIcon"===o.type&&(i.marginBottom=void 0,i.paddingBottom=P):l&&(n=!0,"normalizedTitleWithIcon"!==o.type||e||(n=!1,i.marginBottom=void 0,i.paddingBottom=void 0),"views_main_tab_modules"===t&&(n=!1,i.marginBottom=void 0,i.paddingBottom=void 0)),T&&i.marginBottom&&(i.marginBottom=Math.max(i.marginBottom-4,0)),"page_main"!==t&&"page_details"!==t&&"views_main_tab_modules"!==t||(K||"discussions"===o.type?i.marginLeft=0:"normalizedTitleWithIcon"===o.type?i.marginLeft=-4:(0,a().gx)(o)||"properties"===o.type||"relationsGroup"===o.type?i.marginLeft=-6:"editor"===o.type&&(i.marginLeft=-2));const c="views"===(null==I?void 0:I.type)||"editor"===(null==I?void 0:I.type);return"page_main"!==t&&"page_details"!==t||!i.paddingBottom||c||("property_text"===o.type||"property_relation"===o.type&&D?i.paddingBottom=Math.max(i.paddingBottom-4,0):"properties"===o.type&&(j&&!d().A.isMobile||(i.paddingBottom=Math.max(i.paddingBottom-4,0))),"viewsMain"===(null==I?void 0:I.type)&&(i.paddingBottom=Math.max(i.paddingBottom-12,0))),"normalizedTitleWithIcon"===o.type&&(e?d().A.isMobile&&"properties"===(null==I?void 0:I.type)&&!T&&(i.paddingBottom=void 0,i.marginBottom=4):(x?"discussions"===(null==I?void 0:I.type)&&(i.marginBottom=void 0):"properties"===(null==I?void 0:I.type)?(i.paddingBottom=void 0,i.marginBottom=8):"discussions"===(null==I?void 0:I.type)&&(i.paddingBottom=S),d().A.isMobile&&"discussions"===(null==I?void 0:I.type)&&(i.marginBottom=void 0))),"bottomControls"===o.type&&(i.paddingBottom=void 0,i.marginBottom=void 0),"discussions"===o.type&&l&&(i.paddingBottom=void 0),"inlinePageSections"!==(null==I?void 0:I.type)&&"expandedBacklinks"!==(null==I?void 0:I.type)&&"bottomControls"!==(null==I?void 0:I.type)||(i.marginBottom=8),"editor"!==o.type||(0,p().Mi)(M)||r===g().Rr.Presentation||(i.marginTop=8),("views"===o.type||"editor"===o.type&&!(0,p().Mi)(M))&&(i.paddingBottom=void 0,i.marginBottom=void 0),"viewsMain"===o.type&&(i.paddingBottom=void 0),r===g().Rr.DraftPostInInlineComposer&&(i.marginBottom=4,i.paddingBottom=0),[n,i]}),[u,o,t,null==I?void 0:I.type,T,j,r,D,x,M,K]);return(0,i.useMemo)((()=>function(e){return(0,_.jsx)(v().vV,{className:n()({"layout-content-with-divider":L}),style:V,testId:(0,f().H)(o),children:e})}),[o,L,V])}function C(e){let{layoutModule:o,area:t,collectionSchema:n,collectionStore:i,showDetailsPanelToggleButtonBelowTitle:a,pageMainModules:s}=e;const c=(0,r().Y0)(),p=(0,l().K8)((()=>{if(!i)return!1;return!!s.find((e=>"normalizedTitleWithIcon"===e.type))&&a}),[i,s,a]),m=(0,u().D1)(c);if(!i)return!1;if("properties"!==o.type&&"discussions"!==o.type&&"relationsGroup"!==o.type)return!1;if("page_main"!==t)return!0;const g=s.findIndex((e=>e.id===o.id));if(0===g||s.length<=1)return!1;if("discussions"===o.type&&m)return!1;const y=s[g-1];if("normalizedTitleWithIcon"!==(null==y?void 0:y.type))return!0;if("relationsGroup"===o.type&&p)return!0;if("properties"===o.type&&p&&!d().A.isMobile)return!0;const f=k({collectionSchema:n,module:y});return("properties"!==o.type||!d().A.isMobile||!f)&&f}function M(e){let{collectionStore:o,modulesByArea:t}=e;return!((o.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0})||[]).length>0)&&0===(0,y().Ul)({collectionStore:o,modulesByArea:t}).length}},146594:(e,o,t)=>{t.d(o,{H:()=>r});var n=()=>t(645873);const i=new(n().O2)("UpdateSidebarTabInfo",(async()=>await Promise.all([t.e(75134),t.e(93282),t.e(3910),t.e(82122),t.e(21377)]).then(t.bind(t,722143)))),r=(0,n()._h)(i,(e=>e.UpdateSidebarTabInfo))},240865:(e,o,t)=>{t.d(o,{V:()=>r});var n=()=>t(56366),i=()=>t(765957);function r(e){return(0,n().K8)((()=>{var o;return e?e.getMemberCountFromPublicSpaceData()??void 0:(null===(o=i().default.state.currentSpaceStore)||void 0===o?void 0:o.getMemberCountFromPublicSpaceData())??void 0}),[e])}},241181:(e,o,t)=>{t.d(o,{p:()=>r});var n=t(296540),i=()=>t(56366);function r(e){let{collectionStore:o,layoutModule:t}=e;const r=(0,i().K8)((()=>Boolean(null==o?void 0:o.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0}))),[o]);return(0,n.useMemo)((()=>!(!t||!o)&&("properties"===t.type&&"pinned"!==t.variant&&r)),[o,r,t])}},323974:(e,o,t)=>{t.d(o,{q:()=>u});var n=t(296540),i=()=>t(484714),r=()=>t(56366),l=()=>t(33791),a=()=>t(548821),s=()=>t(712287),c=()=>t(517223),d=()=>t(455994);function u(e){const{collectionStore:o,from:t,forceShowButtonIfNoProperties:u,pageViewBlockContext:p}=e,m=(0,r().K8)((()=>null==o?void 0:o.getLayoutStore()),[o]),g=(0,i().v3)(),y=p===a().Rr.PeekView,f=(0,r().K8)((()=>d().A.getPanelState(y?"peek":"mainPage").isOpen),[y]),h=(0,r().K8)((()=>!!o&&(0,l().v)({collectionStore:o,collectionViewBlockStore:o.getParentBlockStore(),checkNavigableAncestorLocked:!1})),[o]),v=(0,r().K8)((()=>!!m&&m.getModules().page_details.length>0),[m]),{count:_,isPropertiesModuleInPageDetails:S}=(0,r().K8)((()=>v&&o?(0,c().pm)({collectionStore:o}):{count:0,isPropertiesModuleInPageDetails:!1}),[v,o]),w=n.useCallback((()=>{if(!m)return;const e={environment:g,layoutStore:m,from:t,panelLocation:y?"peek":"mainPage"};f?(0,s().F)(e):(0,s().j)(e)}),[g,t,f,y,m]),B=n.useMemo((()=>p!==a().Rr.InPageSnapShot&&(p!==a().Rr.DraftPostInInlineComposer&&(_>0||!!u&&(S&&h)))),[p,_,u,S,h]);return{pageDetailsPropertiesCount:_,toggleDetailsPanel:w,isDetailsPanelOpen:f,pageDetailsHasModules:v,canShowButton:B}}},555801:(e,o,t)=>{t.r(o),t.d(o,{TopbarLayoutInfoButton:()=>C});var n=t(296540),i=()=>t(484714),r=()=>t(56366),l=t(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"1.62 3.62 16.75 12.75",directional:!0,svg:(0,l.jsx)("path",{d:"M16.25 3.625c1.174 0 2.125.951 2.125 2.125v8.5a2.125 2.125 0 0 1-2.125 2.125H3.75a2.125 2.125 0 0 1-2.125-2.125v-8.5c0-1.174.951-2.125 2.125-2.125zm-12.5 1.25a.875.875 0 0 0-.875.875v8.5c0 .483.392.875.875.875h8.7V4.875zm9.8 10.25h2.7a.875.875 0 0 0 .875-.875v-8.5a.875.875 0 0 0-.875-.875h-2.7z"})},s=(0,t(340498).wt)("sidebarRight",a);var c=()=>t(959013),d=()=>t(146594),u=()=>t(553965),p=()=>t(712287),m=()=>t(323974),g=()=>t(933951),y=()=>t(455994),f=()=>t(644914),h=()=>t(737230),v=()=>t(962730),_=()=>t(548821),S=()=>t(712505),w=()=>t(406699),B=()=>t(285790),b=()=>t(859428),P=()=>t(863059);const k=(0,c().YK)({showInfoToolTip:{defaultMessage:"View details",id:"topbar.infoButton.tooltip"},hideInfoToolTip:{defaultMessage:"Close page info",id:"topbar.infoButton.tooltipToHide"},buttonAriaLabel:{defaultMessage:"Page info",id:"topbar.infoButton.text"}});function x(e){let{layoutStoreId:o,inPeek:t,onClick:n,...i}=e;const a=(0,c().tz)(),d=(0,P().gQ)(),u=(0,r().K8)((()=>y().A.getPanelState(t?"peek":"mainPage").isOpen),[t]);return(0,l.jsx)("div",{style:d.iconButton,children:(0,l.jsx)(B().A,{style:{width:d.iconButton.width,height:d.iconButton.height},icon:s,iconStyle:d.icon,ariaLabel:a.formatMessage(k.buttonAriaLabel),focused:u,onClick:e=>{null==n||n(e)},...i})})}function C(e){const{blockStore:o,buttonPopupStore:t,pageViewBlockContext:a}=e,s=(0,i().v3)(),B=(0,i().Y0)(),P=(0,n.useMemo)((()=>(0,l.jsx)("div",{style:{textAlign:"center"},children:(0,l.jsx)(c().sA,{...k.showInfoToolTip})})),[]),C=(0,n.useMemo)((()=>(0,l.jsx)("div",{style:{textAlign:"center"},children:(0,l.jsx)(c().sA,{...k.hideInfoToolTip})})),[]),M=(0,r().K8)((()=>{if(S().default.state.open)return S().default.state.targetStore}),[]),A=(0,r().K8)((()=>o.getAssociatedCollectionStore()),[o]),I=(0,r().K8)((()=>null==A?void 0:A.getLayoutStore()),[A]),T=(0,g().sS)({pageStore:o,pageViewBlockStore:void 0,collectionStore:A}).page_details,D=M===o,j=(0,r().K8)((()=>y().A.getPanelState(D?"peek":"mainPage").displayStyle),[D]),K=(0,f().rw)({tab:h().tF.Info}),L=D?"peek":"mainPage",{toggleDetailsPanel:V,canShowButton:z}=(0,m().q)({collectionStore:A,from:"topbar",forceShowButtonIfNoProperties:!0,pageViewBlockContext:a}),N=(0,r().K8)((()=>y().A.getPanelState(D?"peek":"mainPage").isOpen),[D]);if(!z||!I)return null;if(!D){const e=K?C:P;return(0,l.jsx)(b().A,{placement:v().W.Bottom,renderTooltip:()=>e,render:e=>(0,l.jsx)(x,{...e,layoutStoreId:I.id,inPeek:D,onClick:V})})}if("static_sidebar"===j){const e=N?C:P;return(0,l.jsx)(b().A,{placement:v().W.Bottom,renderTooltip:()=>e,render:e=>(0,l.jsx)(x,{...e,layoutStoreId:I.id,inPeek:D,onClick:V})})}return(0,l.jsx)(w().Ay,{popupType:B.isMobile?w().z7.SlideUp:w().z7.Popup,onClose:()=>{(0,p().F)({environment:s,layoutStore:I,from:"topbar",panelLocation:L})},buttonPopupStore:t,renderOrigin:e=>(0,l.jsx)(b().A,{placement:v().W.Bottom,renderTooltip:()=>P,render:o=>(0,l.jsx)(x,{...(0,u().A)(e,o),layoutStoreId:I.id,inPeek:D,onClick:V})}),originGap:8,render:()=>(0,l.jsx)(d().H,{modules:T,store:o,context:D?_().Rr.PeekView:_().Rr.Frame,disabled:!1,shownAs:"popup"}),style:{width:380,overflow:"hidden"}})}},577814:(e,o,t)=>{t.d(o,{A:()=>l});t(898992),t(354520);var n=()=>t(449195),i=()=>t(478726),r=()=>t(299545);function l(e){var o;const{store:t,pageViewBlockStore:l,environment:a}=e,s=r().O3(t,{recursivelyLoadAllDiscussions:!1}).sort(((e,o)=>o.getReactions().length-e.getReactions().length)),c=s.length>0,d=0===s.length,u=0===s.filter((e=>e.getComments().length>0)).length,p="PageDetailsStore"in a&&a.PageDetailsStore.getToggleState({environment:a,type:"discussion",id:t.id}),m={type:"hidden"},g=t.getAssociatedCollectionStore()??t,y="section_hide"===(0,n().z5)(null===(o=g.getFormat())||void 0===o?void 0:o.page_section_visibility);if(!(null==l?void 0:l.state.forceDiscussionOpen)&&(!t.isInsideCollection()||!d)&&(d||c&&(!1===p||void 0===p&&y)))return m;if(y)return m;const f=t.pathIsDead(),h=a.currentUser.isLoggedIn();if(d&&f)return m;const v=h&&t.canComment()&&u&&!(0,i().sV)(t)&&(!(0,i().fc)(t)||(0,i().Cg)(t));return!v&&d?m:{type:"visible",showDiscussionInput:v,unresolvedDiscussionStores:s}}},623186:(e,o,t)=>{t.d(o,{Od:()=>h,U$:()=>v,aN:()=>y,z7:()=>f});t(16280),t(898992),t(354520),t(672577),t(581454);var n=t(296540),i=()=>t(484714),r=()=>t(56366),l=()=>t(959013),a=()=>t(496603),s=()=>t(896628),c=()=>t(751156),d=()=>t(33791),u=()=>t(862292),p=()=>t(645873),m=()=>t(395963),g=()=>t(517223);function y(e){return(0,r().K8)((()=>!!e&&(0,d().v)({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1})),[e])}function f(e){let{store:o,format:t,schema:n,collectionStore:a,propertyIds:s,propertyGroupId:c}=e;const d=(0,i().v3)(),m=(0,l().tz)(),{value:y}=(0,p().fJ)(u().T.formulas);return(0,r().K8)((()=>(0,g().e7)({store:o,format:t,schema:n,collectionStore:a,propertyIds:s,propertyGroupId:c,intl:m,environment:d,formulasModule:y})),[o,t,n,a,s,c,m,d,y])}function h(e){let{collectionStore:o,format:t}=e;const r=(0,i().v3)();return(0,n.useCallback)((e=>{const n=t.collection_page_properties||[],i=[...(0,a().oE)(e.map((e=>n.find((o=>o.property===e))))),...n.filter((o=>!e.includes(o.property)))];c().createAndCommit({userAction:"PageProperties.handleReorder",environment:r,canUndo:!0,perform:e=>{s().zA({stores:[o],update:{collection_page_properties:i},transaction:e})}})}),[o,r,t.collection_page_properties])}function v(e){let{collectionStore:o,propertyGroupId:t}=e;const r=(0,i().v3)();return(0,n.useCallback)((e=>{if(!t)throw new Error("cannot reorder properties for property group -- no property group id provided");c().createAndCommit({userAction:"PagePropertiesGroup.handleReorder",environment:r,canUndo:!0,perform:n=>{(0,m()._h)({collectionStore:o,newPartialPropertyIds:e,groupId:t,transaction:n})}})}),[o,r,t])}},817942:(e,o,t)=>{t.d(o,{A5:()=>p,MR:()=>v,Mx:()=>s,Pb:()=>y,WL:()=>h,hg:()=>c,kZ:()=>f,pv:()=>d,vV:()=>g});t(581454);var n=t.n(t(32485)),i=t(296540),r=()=>t(11048),l=()=>t(455994),a=t(474848);const s=i.forwardRef((function(e,o){const{children:i,type:s,gap:c,withBottomPadding:d,style:u,onMouseDown:p,onClick:m,onDoubleClick:g,onContextMenu:y,suppressMargin:f}=e,h=(0,t(551619).n$)(s),v=(0,t(56366).K8)((()=>l().A.getPanelState("peek").isOpen&&"static_sidebar"===l().A.getPanelState("peek").displayStyle),[]);return(0,a.jsx)(r().A,{name:"PageLayout",children:(0,a.jsx)("div",{className:n()("layout",{"layout-wide":"wide"===s,"layout-wide-right-margin-expanded":"wide-right-margin-expanded"===s,"layout-side-peek":"side-peek"===s,"layout-center-peek":"center-peek"===s&&!v,"layout-center-peek-with-layout-panel":"center-peek"===s&&v,"layout-home":"home"===s,"layout-home-phone":"home-phone"===s,"layout-home-redesign-desktop":"home-redesign-desktop"===s,"layout-form":"form"===s,"layout-form-viewer":"form-viewer"===s,"layout-form-viewer-embed":"form-viewer-embed"===s,"layout-phone":"phone"===s,"layout-tablet":"tablet"===s,"layout-template-preview":"template-preview"===s,"layout-chat":"chat"===s,"layout-layout-editor":"layout-editor"===s,"layout-layout-editor-wide":"layout-editor-wide"===s,"layout-layout-editor-narrow":"layout-editor-narrow"===s,"layout-marketplace":"marketplace"===s,"layout-marketplace-mobile":"marketplace-mobile"===s,"layout-team-home":"team-home"===s,"layout-team-home-mobile":"team-home-mobile"===s,"layout-create-post":"create-post"===s,"layout-fullscreen-ai":"fullscreen-ai"===s,"layout-narrowscreen-ai":"narrowscreen-ai"===s,"layout-presentation-mode":"presentation-mode"===s,"layout-person-profile":"person-profile"===s,"layout-suppress-margin":f}),style:{paddingBottom:d?h:void 0,gap:c,...u},ref:o,onMouseDown:p,onClick:m,onDoubleClick:g,onContextMenu:y,children:i})})})),c="layout-content",d="layout-full",u="layout-margin-right",p="hide-scrollbar",m="layout-column",g=i.forwardRef((function(e,o){return(0,a.jsx)(r().A,{name:"PageLayoutContent",children:(0,a.jsx)("div",{className:n()(c,e.className),style:e.style,ref:o,children:e.children})})}));function y(e){return(0,a.jsx)(r().A,{name:"PageLayoutFull",children:(0,a.jsx)("div",{className:d,style:e.style,children:e.children})})}function f(e){return(0,a.jsx)(r().A,{name:"PageLayoutMarginRight",children:(0,a.jsx)("div",{className:u,style:{...e.style,pointerEvents:"none"},children:e.children})})}function h(e){return(0,a.jsx)(r().A,{name:"PageLayoutColumn",children:(0,a.jsx)("div",{className:n()(m,e.className),style:{"--min-column-width":e.minWidth?`${e.minWidth}px`:"100%",...e.style},children:e.children})})}function v(e){return(0,a.jsx)(r().A,{name:"PageLayoutTwoColumn",children:(0,a.jsxs)(h,{minWidth:e.minWidth,className:e.className,style:e.style,children:[e.left,e.right]})})}},823082:(e,o,t)=>{t.d(o,{H:()=>r});var n=()=>t(778781),i=()=>t(534177);function r(e){const o=e.type;return"properties"===o?"module__properties_"+("pinned"===e.variant?"minimal":"expanded"):"normalizedTitleWithIcon"===o||"titleWithIcon"===o?"module__title_with_icon":"cover"===o?"cover__module":"views"===o?"module__views":"editor"===o?"module__editor":"formTitle"===o?"module__formTitle":"viewsMain"===o?"module__views_main":"transcript"===o?"module__transcript":"formSubmit"===o?"module__form_submit":"discussions"===o?"module__discussion":"placeholder"===o?"module__placeholder":"formQuestion"===o?"module__formQuestion":"bottomControls"===o?"module__bottomControls":"relationsGroup"===o?"module__relationsGroup":"deleted_property"===o?"module__deleted_property":"expandedBacklinks"===o?"module__expandedBacklinks":"inlinePageSections"===o?"module__inlinePageSections":"property"===o?`module__property_${e.id}`:"collectionView"===o?"module__collectionView":"collectionViewV2"===o?"module__collectionViewV2":(0,n().CA)(o)?`module__property_${e.id}`:void(0,i().HB)(o)}},933951:(e,o,t)=>{t.d(o,{Qf:()=>v,sS:()=>f,ub:()=>h});t(944114),t(517642),t(658004),t(733853),t(845876),t(432475),t(515024),t(731698),t(898992),t(672577),t(737550);var n=t(296540),i=()=>t(484714),r=()=>t(56366),l=()=>t(455348),a=()=>t(691678),s=()=>t(235692),c=()=>t(778781),d=()=>t(33791),u=()=>t(577814),p=()=>t(478726),m=()=>t(240865),g=()=>t(548821),y=()=>t(9768);function f(e){const{pageStore:o,pageViewBlockStore:t,postContext:l,collectionStore:s,collectionSchema:p}=e,{collectionStore:m,collectionFormat:g,collectionSchema:f,canConfigureCollection:v}=(0,r().K8)((()=>{const e=s||(null==o?void 0:o.getAssociatedCollectionStore()),t=p||(null==e?void 0:e.getSchema()),n=null==e?void 0:e.getFormat(),i=e&&(0,d().v)({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1});return{collectionStore:e,collectionSchema:t,collectionFormat:n,canConfigureCollection:i}}),[o,s,p]),_=(0,i().v3)(),S=(0,r().K8)((()=>(0,u().A)({environment:_,store:o,pageViewBlockStore:t})),[_,o,t]),w=h({collectionFormat:g,collectionSchema:f,layoutStore:(0,r().K8)((()=>null==m?void 0:m.getLayoutStore()),[m]),postContext:l,pageStoreId:null==o?void 0:o.id,pageStore:o}),B=(0,r().K8)((()=>{const e=w.page_main.some((e=>(0,c().i_)(e)))||w.page_details.some((e=>(0,c().i_)(e)));return!(!m||!e)&&(0,y().cu)({modulesByArea:w,collectionStore:m})}),[w,m]),b=(0,n.useMemo)((()=>{const e=new Set;return(!Boolean(m)||!v&&B)&&e.add("properties"),"hidden"===(null==S?void 0:S.type)&&e.add("discussions"),e}),[v,m,null==S?void 0:S.type,B]);return(0,n.useMemo)((()=>0===b.size?w:(0,a().KO)(w,(e=>!b.has(e.type)))),[w,b])}function h(e){const{layoutStore:o,collectionSchema:t,collectionFormat:i,postContext:a,pageStoreId:c,pageStore:d}=e,u=(0,n.useRef)(c),y=(0,n.useRef)(null),f=(0,r().K8)((()=>null==d?void 0:d.getSpaceStore()),[d]),h=(0,m().V)(f)??0;return(0,r().K8)((()=>{var e;if(a===g().Rr.DraftPostInInlineComposer)return s().wC;if(null!=d&&d.isPersonProfile())return _({personProfileStore:d,spaceMemberCount:h});if((0,p().Mi)(a)){const e=(0,l().aG)(t,"created_time"),o=(0,l().aG)(t,"created_by"),n=[];o&&n.push(o),e&&n.push(e);return{...s()._u,page_main:[{...s()._u.page_main[0],propertyIds:n},...s()._u.page_main.slice(1)]}}let n=null==o?void 0:o.getModules();const r=c&&n&&c===u.current&&0===n.page_main.length&&(null===(e=y.current)||void 0===e?void 0:e.page_main.find((e=>"editor"===e.type)));return n&&!r||(n=(0,s().xN)({collectionSchema:t,collectionFormat:i})),u.current=c,y.current=n,n}),[a,d,o,c,h,t,i],{useDeepEqual:!0})}function v(e){const{personProfileStore:o}=e,t=(0,r().K8)((()=>o.getSpaceStore()),[o]),n=(0,m().V)(t)??0;return(0,r().K8)((()=>_({personProfileStore:o,spaceMemberCount:n})),[o,n])}function _(e){const{personProfileStore:o,spaceMemberCount:t}=e,n=o.getAssociatedCollectionStore();if(!n)return(0,s().E1)({spaceMemberCount:t});const i=n.getLayoutStore();if(!i)return(0,s().E1)({spaceMemberCount:t});const r=i.getModules();return!r||0===r.person_profile_page_main.length&&0===r.person_profile_page_details.length?(0,s().E1)({spaceMemberCount:t}):r}}}]);