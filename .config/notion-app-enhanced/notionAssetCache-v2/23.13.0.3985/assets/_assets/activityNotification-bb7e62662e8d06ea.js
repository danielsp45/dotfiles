"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[56409],{409412:(e,t,i)=>{i.r(t),i.d(t,{ActivityNotification:()=>Pt});var o=i(296540),r=()=>i(484714),a=()=>i(56366),n=()=>i(813206),s=()=>i(857639),d=()=>i(197959),l=()=>i(477293),c=()=>i(770176),u=(i(18107),i(967357),()=>i(401497)),v=()=>i(692026),h=()=>i(584262),m=()=>i(296344),g=()=>i(179034),p=()=>i(96689),f=()=>i(854150),y=()=>i(798880),b=()=>i(959013),A=()=>i(534177),S=()=>i(284371),x=()=>i(746970),j=()=>i(126550),_=()=>i(972435),M=()=>i(773442),k=()=>i(963589),R=()=>i(212326),I=()=>i(630116),K=()=>i(979620),C=()=>i(459711),w=()=>i(302873),B=()=>i(77179),O=()=>i(12296),N=()=>i(360137),P=()=>i(423213),T=()=>i(700348),L=i(474848);function q(e){var t;const i=(null===(t=e.profileEmail)||void 0===t?void 0:t.charAt(0).toUpperCase())??"?",o=(0,u().IS)((e=>({circleStyle:{width:20,height:20,borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",borderColor:e.UIUserAvatarIdleOutline,borderWidth:1,borderStyle:"solid",marginRight:6},letterStyle:{color:e.text.secondary,fontWeight:S().Wy.medium,fontSize:12}})),[]);return(0,L.jsx)("div",{style:o.circleStyle,children:(0,L.jsx)("span",{style:o.letterStyle,children:i})})}function E(e){const{activity:t,rootStore:o,tabArgs:n,isFirst:s,isLast:d}=e,{notification:l,tab:v,source:p}=n,f=(0,r().v3)(),y=(0,a().K8)((()=>t.getEdits()),[t]),b=y[0],A=(0,u().IS)((()=>({message:{marginBottom:8},messageLabel:{whiteSpace:"pre-wrap"},titleStyle:{fontSize:14,display:"flex"}})),[]),S=(0,a().K8)((()=>I().v3.createChildStore(o,{table:m().O,id:t.access_request_id})),[t,o]),x=(0,a().K8)((()=>S.getModel()),[S]),_=(0,a().K8)((()=>Boolean(x&&(0,j().t)(x,o))),[x,o]),R=x&&(0,L.jsx)(z,{activity:t,accessRequest:x,rootStore:o,tabArgs:n}),K=b.message,C=(0,a().K8)((()=>(0,c().Ln)({edits:y,rootStore:o})),[y,o]),w=(0,a().K8)((()=>{if(null!=x&&x.isGuestInviteRequest()){const e=x.getAttributes().permission_records_and_roles[0],i=e&&I().Bv.createChildStore(o,{table:g().ev,id:e.id}),r=e.role;if(i.isDefined())return;return(0,L.jsx)(P().A,{titledRecordStore:i,activity:t,tabArgs:n,getRecordModel:o.getRecordModel,permissionRole:r,shouldRenderEmpty:!0})}}),[n,x,t,o]),N=(0,a().K8)((()=>{if(t.navigable_block_id)return I().Bv.createChildStore(o,{table:g().ev,id:t.navigable_block_id})}),[t,o]),q=(0,a().K8)((()=>{if(!N)return;const e=N.getModel();return e?e.getRenderUrl({getRecordModel:o.getRecordModel,discussionId:t.discussion_id,pageVisitSource:h().y8.Notification}):void 0}),[N,o,t]),E=(0,M().I)({spaceStore:o,request:x}),D=(0,k().X)("workspace_member_access_notif_polish");return R?(0,L.jsxs)(T().Ay,{header:(0,L.jsx)("span",{children:R}),isFirst:s,isLast:d,isPrivate:!1,rootStore:o,notification:l,icon:(0,L.jsx)(B().H8,{authors:C,size:T().eQ,style:{marginTop:0,marginRight:0},iconStyle:{right:-3},showAvatarShadow:!1,showWarningIcon:_}),showSnapshotButton:!1,url:q,...(0,O().$5)({notification:l,activity:t,environment:f,tab:v}),children:[D&&"space_membership_request"===E&&(0,L.jsx)(U,{rootStore:o,accessRequestModel:x}),K&&(0,L.jsx)("div",{style:A.message,children:(0,L.jsx)(i(125565).A,{isMultiline:!0,style:A.messageLabel,children:K})}),w&&(0,L.jsx)("div",{style:A.titleStyle,children:w}),(0,L.jsx)(V,{activity:t,accessRequestStore:S,rootStore:o,source:p,notification:l,tabArgs:n})]}):null}function U(e){const{rootStore:t,accessRequestModel:i}=e,o=(0,a().K8)((()=>i.getForActorId()===i.getCreatedById()),[i]),r=(0,a().K8)((()=>i.getForActorPointer(t.id)),[i,t.id]),n=r.table===y().oo?I().LU.createChildStore(t,r):void 0,s=(0,a().K8)((()=>null==n?void 0:n.getModel()),[n]),d=(0,a().K8)((()=>null==s?void 0:s.getEmail()),[s]),l=(0,a().K8)((()=>{if(!o)return d;const e=null==s?void 0:s.getFullName(_().A.getIntl());return e?`${e} (${d})`:d}),[o,s,d]),c=(0,u().IS)((()=>({inviteeBox:{display:"flex",alignItems:"center",marginBottom:8},inviteePhrase:{fontWeight:S().Wy.medium,fontSize:14}})),[]);return(0,L.jsxs)("div",{style:c.inviteeBox,children:[(0,L.jsx)(q,{profileEmail:l}),(0,L.jsx)("span",{style:c.inviteePhrase,children:l})]})}function z(e){const{activity:t,accessRequest:i,rootStore:o,tabArgs:r}=e,a=(0,M().I)({spaceStore:o,request:i});if(!a)return null;switch(a){case"guest_invite_request":return(0,L.jsx)(W,{activity:t,accessRequest:i,rootStore:o});case"space_membership_request":return(0,L.jsx)(F,{activity:t,accessRequest:i,rootStore:o});case"team_membership_request":return(0,L.jsx)(H,{activity:t,rootStore:o,tabArgs:r});case"page_access_request":return(0,L.jsx)(D,{activity:t,tabArgs:r,rootStore:o,accessRequest:i});default:(0,A().HB)(a)}}function D(e){const{activity:t,rootStore:i,accessRequest:o}=e,r=(0,a().K8)((()=>t.getEdits()),[t]),n=(0,a().K8)((()=>{const e=o.getForActorPointer(i.id),t=e.table===y().oo?I().LU.createChildStore(i,e):void 0,r=null==t?void 0:t.getModel();return null==r?void 0:r.getEmail()}),[o,i]),s=(0,a().K8)((()=>Boolean(o&&(0,j().t)(o,i))),[o,i]),d=(0,a().K8)((()=>(0,c().Ln)({edits:r,rootStore:i})),[r,i]),l=(0,a().K8)((()=>s&&n?(0,c().Jd)(n,(0,R()._m)()):(0,c().bD)(d,(0,R()._m)())),[s,n,d]),u=(0,a().K8)((()=>{if(t.navigable_block_id)return I().Bv.createChildStore(i,{table:g().ev,id:t.navigable_block_id})}),[t,i]),v=(0,a().K8)((()=>o.isEditPageAccessRequest()),[o]);return u?v?(0,L.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested edit access to} other {{authorOrAuthors} requested edit access to}}",values:{numberOfAuthors:d.length,authorOrAuthors:l},id:"activity.editAccessRequested.header.short"}):(0,L.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested access to} other {{authorOrAuthors} requested access to}}",values:{numberOfAuthors:d.length,authorOrAuthors:l},id:"activity.accessRequested.header.short"}):null}function F(e){const{activity:t,accessRequest:i,rootStore:o}=e,r=(0,u().IS)((()=>({inviteePhrase:{fontWeight:S().Wy.semibold}})),[]),n=(0,a().K8)((()=>t.getEdits()),[t]),s=(0,a().K8)((()=>i.getForActorPointer(o.id)),[i,o.id]),d=s.table===y().oo?I().LU.createChildStore(o,s):void 0,l=(0,a().K8)((()=>null==d?void 0:d.getModel()),[d]),v=(0,a().K8)((()=>null==l?void 0:l.getEmail()),[l]),h=(0,a().K8)((()=>i.getForActorId()===i.getCreatedById()),[i]),m=(0,a().K8)((()=>(0,c().Ln)({edits:n,rootStore:o})),[n,o]),g=(0,a().K8)((()=>(0,c().bD)(m,(0,R()._m)())),[m]),p=(0,a().K8)((()=>{if(!h)return v;const e=null==l?void 0:l.getFullName(_().A.getIntl());return e?`${e} (${v})`:v}),[h,l,v]),f=(0,k().X)("workspace_member_access_notif_polish");return l&&s.table===y().oo?h?(0,L.jsx)(b().sA,{defaultMessage:"{invitee} requested to become a workspace member",values:{invitee:(0,L.jsx)("span",{style:r.inviteePhrase,children:p})},id:"activity.accessRequestedMembershipFromGuest.header"}):f?(0,L.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested to add a workspace member} other {{authorOrAuthors} requested to add workspace members}}",values:{numberOfAuthors:m.length,authorOrAuthors:g},id:"activity.accessRequestedMembershipNoInvitee.header.short"}):(0,L.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested to add {invitee} as a workspace member} other {{authorOrAuthors} requested to add {invitee} as a workspace member}}",values:{numberOfAuthors:m.length,authorOrAuthors:g,invitee:(0,L.jsx)("span",{style:r.inviteePhrase,children:p})},id:"activity.accessRequestedMembership.header.short"}):null}function W(e){const{activity:t,accessRequest:i,rootStore:o}=e,r=(0,a().K8)((()=>t.getEdits()),[t]),n=(0,u().IS)((()=>({inviteePhrase:{fontWeight:S().Wy.semibold}})),[]),s=(0,a().K8)((()=>i.getForActorPointer(o.id)),[i,o.id]),d=s.table===y().oo?I().LU.createChildStore(o,s):void 0,l=(0,a().K8)((()=>null==d?void 0:d.getModel()),[d]),v=(0,a().K8)((()=>null==l?void 0:l.getEmail()),[l]),h=(0,a().K8)((()=>(0,c().Ln)({edits:r,rootStore:o})),[r,o]),m=(0,a().K8)((()=>(0,c().bD)(h,{...(0,R()._m)()})),[h]);return(0,a().K8)((()=>i.isGuestInviteRequest()),[i])&&l&&s.table===y().oo?(0,L.jsx)(b().sA,{defaultMessage:"{requestorsPhrase} requested inviting {guestEmail} as a guest",values:{requestorsPhrase:m,guestEmail:(0,L.jsx)("span",{style:n.inviteePhrase,children:v})},id:"activity.guestInviteRequest.header.short"}):null}function H(e){const{activity:t,rootStore:i,tabArgs:o}=e,r=(0,a().K8)((()=>t.getEdits()),[t]),n=(0,a().K8)((()=>(0,c().Ln)({edits:r,rootStore:i})),[r,i]),s=(0,a().K8)((()=>(0,c().bD)(n,{...(0,R()._m)()})),[n]),d=(0,a().K8)((()=>{if(t.team_id)return I().h4.createChildStore(i,{table:f().yK,id:t.team_id})}),[t,i]);return r&&d?(0,L.jsx)(b().sA,{defaultMessage:"{user} requested to join {teamName}",values:{user:(0,L.jsx)("span",{style:{fontWeight:S().Wy.semibold},children:s}),teamName:(0,L.jsx)(P().A,{titledRecordStore:d,getRecordModel:i.getRecordModel,activity:t,tabArgs:o})},id:"activity.teamAccessRequest.header.short"}):null}function V(e){const{activity:t,accessRequestStore:i,rootStore:n,notification:s,tabArgs:d}=e,l=(0,r().v3)(),c=(0,a().K8)((()=>t.getEdits()),[t])[0],h=(0,a().K8)((()=>i.getParentTable()),[i]),m=(0,a().K8)((()=>i.getParentId()),[i]),y=(0,a().K8)((()=>t.navigable_block_id),[t]),b=(0,a().K8)((()=>i.getModel()),[i]),S=(0,a().K8)((()=>b&&(0,v().C)(b)),[b]),j=(0,M().I)({spaceStore:n,request:b}),_=(0,a().K8)((()=>{if("page_access_request"===S){var e;const t=null==b||null===(e=b.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e||null===(e=e.at(0))||void 0===e?void 0:e.role;if(t)return t}return"reader"}),[b,S]),k=(0,o.useCallback)((async()=>{if(S&&j&&b)if("space_membership_request"===j&&"space_membership_request"===S)await x().p4({status:"approved",environment:l,requests:[b],store:n,from:"notification"});else if("space_membership_request"===j&&"guest_invite_request"===S)await x().KB({status:"approved",environment:l,store:n,requests:[b],from:"notification"});else{if("guest_invite_request"!==S)return;await x().aV({status:"approved",environment:l,requests:[b],from:"notification"})}}),[l,b,n,j,S]),R=(0,o.useCallback)((async()=>{if(S&&b)if("space_membership_request"===S)await x().p4({status:"rejected",environment:l,requests:[b],store:n,from:"notification"});else if("guest_invite_request"===S)await x().aV({status:"rejected",environment:l,requests:[b],from:"notification"});else{if("team_membership_request"===S||"page_access_request"===S)return;(0,A().HB)(S)}}),[l,b,n,S]),B=(0,u().IS)((e=>({actionPrimaryContainer:{paddingTop:6,paddingBottom:0,paddingRight:0},actionButton:(0,N().Ei)(e)})),[]),O=y?I().Bv.createChildStore(n,{table:g().ev,id:y}):void 0,P=(0,a().K8)((()=>h===g().ev&&Boolean(null==O?void 0:O.canAdmin())),[h,O]);if(!(h&&m&&j&&c))return null;if("page_access_request"===j)return P&&O?(0,L.jsx)("div",{style:B.actionPrimaryContainer,children:(0,L.jsx)(w().A,{accessRequestStore:i,targetBlockStore:O,initialRole:_,buttonStyle:B.actionButton,notification:s,rootStore:n,activity:t,tabArgs:d})}):null;if("space_membership_request"===j||"guest_invite_request"===j){const e=I().SL.createChildStore(n,{table:p().NX,id:m});return(0,L.jsx)("div",{style:B.actionPrimaryContainer,children:(0,L.jsx)(C().A,{effectiveAccessRequestType:j,accessRequestStore:i,spaceStore:e,initialRole:"reader",buttonStyle:B.actionButton,notification:s,onApprove:k,onReject:R})})}if("team_membership_request"===j){const e=I().h4.createChildStore(n,{table:f().yK,id:m});return(0,L.jsx)("div",{style:B.actionPrimaryContainer,children:(0,L.jsx)(K().A,{accessRequestStore:i,teamStore:e})})}(0,A().HB)(j)}const $=o.memo(E);function Y(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:s}=e,{notification:d,tab:l}=o,u=(0,r().v3)(),v=(0,a().K8)((()=>t.getEdits()),[t]),p=(0,a().K8)((()=>I().v3.createChildStore(i,{table:m().O,id:t.access_request_id})),[t,i]),f=(0,a().K8)((()=>{const e=p.getModel();return e&&e.isGuestInviteRequest()&&e.isResolved()||e&&e.isEditPageAccessRequest()&&e.isApproved()?e:void 0}),[p]),y=(0,a().K8)((()=>Boolean(null==f?void 0:f.isEditPageAccessRequest())),[f]),b=(0,a().K8)((()=>(0,c().Ln)({edits:v,rootStore:i})),[v,i]),A=(0,a().K8)((()=>{if(t.navigable_block_id)return I().Bv.createChildStore(i,{table:g().ev,id:t.navigable_block_id})}),[t,i]),S=f&&(0,L.jsx)(G,{activity:t,accessRequest:f,rootStore:i,isEditAccessRequest:y}),x=(0,a().K8)((()=>{if(!A)return;const e=A.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,discussionId:t.discussion_id,pageVisitSource:h().y8.Notification}):void 0}),[A,i,t]);return S&&A?(0,L.jsx)(T().Ay,{header:(0,L.jsx)("span",{children:S}),isFirst:n,isLast:s,isPrivate:!1,rootStore:i,notification:d,icon:(0,L.jsx)(B().H8,{authors:b,size:T().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:x,...(0,O().$5)({notification:d,activity:t,environment:u,tab:l})}):null}function G(e){const{accessRequest:t,rootStore:i,isEditAccessRequest:o}=e,r=(0,u().IS)((()=>({inviteePhrase:{fontWeight:S().Wy.medium}})),[]),n=(0,a().K8)((()=>i.getRecordModel({id:t.getForActorId(),table:t.getForActorTable()})),[t,i]),s=(0,a().K8)((()=>null==n?void 0:n.getEmail()),[n]),d=(0,a().K8)((()=>{const e=(null==n?void 0:n.isUser())&&(null==n?void 0:n.getFullName(_().A.getIntl()));return e?`${e} (${s})`:s}),[n,s]),l=(0,a().K8)((()=>i.getRecordModel({id:t.getResolvedById(),table:t.getResolvedByTable()})),[t,i]),v=(0,a().K8)((()=>l&&(0,c().bD)([l],{fontWeight:S().Wy.medium})),[l]),h=(0,a().K8)((()=>t.getStatus()),[t]);return v&&d?o?(0,L.jsx)(b().sA,{defaultMessage:"{resolverPhrase} approved your request to edit the page",values:{resolverPhrase:v},id:"activity.EditAccessRequestResolvedMembership.approved.header.short"}):"approved"===h?(0,L.jsx)(b().sA,{defaultMessage:"{resolverPhrase} approved your request to invite {invitee} as a guest",values:{resolverPhrase:v,invitee:(0,L.jsx)("span",{style:r.inviteePhrase,children:d})},id:"activity.AccessRequestResolvedMembership.approved.header.short"}):"rejected"===h?(0,L.jsx)(b().sA,{defaultMessage:"{resolverPhrase} denied your request to invite {invitee} as a guest",values:{resolverPhrase:v,invitee:(0,L.jsx)("span",{style:r.inviteePhrase,children:d})},id:"activity.AccessRequestResolvedMembership.rejected.header.short"}):void(0,A().HB)(h):null}const Q=o.memo(Y);i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698),i(898992),i(354520),i(581454);var J=()=>i(402014),X=()=>i(278132),Z=()=>i(693954),ee=()=>i(68263),te=()=>i(912720),ie=()=>i(848259),oe=()=>i(572080),re=()=>i(435009),ae=()=>i(751156),ne=()=>i(2220),se=()=>i(492414),de=()=>i(704152),le=()=>i(859428),ce=()=>i(51334);function ue(e){const{automationNames:t,handleAutomationNavigate:i}=e,o=(0,b().tz)(),r=t.at(0),a=t.length,n=a-2,s=o.formatList([...t.slice(0,2),n>0?o.formatMessage({defaultMessage:"{numRemainingAutomations} more",id:"AutomationTypecheckErrorRaisedActivity.wrappedAutomationName.tooltipNumRemainingAutomations"},{numRemainingAutomations:n}):void 0].filter(A().O9),{style:"long",type:"conjunction"}),d={defaultMessage:"{numAutomations, plural, one {{firstAutomationName}} other {{numAutomations} automations}}",values:{firstAutomationName:r,numAutomations:a},id:"AutomationTypecheckErrorRaisedActivity.wrappedAutomationName.automationName",description:"The display name for an automation."},l=e=>(0,L.jsx)(de().A,{...e,onClick:i,children:(0,L.jsx)(b().sA,{...d})});return 1===a?l():(0,L.jsx)(le().A,{renderTooltip:e=>(0,L.jsx)("div",{...e,children:s}),render:e=>l(e)})}function ve(e){let{automationName:t}=e;const i=(0,u().IS)((e=>({icon:{fill:e.icon.uiRedPrimary,height:12,left:9,position:"absolute",top:14,width:12},firstLetter:{textTransform:"uppercase",color:e.text.secondary},wrapper:{position:"relative"}})),[]);return(0,L.jsx)(T().rL,{children:(0,L.jsxs)("div",{style:i.wrapper,children:[(0,L.jsx)("div",{style:i.firstLetter,children:t.charAt(0)}),(0,Z().Q)(i.icon)]})})}i(803949);var he=()=>i(107273),me=()=>i(921194);var ge=()=>i(769617);const pe=function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:s}=e,{tab:d,notification:l}=o,u=(0,r().v3)(),v=(0,a().K8)((()=>(0,he().W9)(t.getEdits())),[t]),h=(0,a().K8)((()=>(0,c().Ln)({edits:v,rootStore:i})),[v,i]),m=(0,a().K8)((()=>{const e=v[0];return e?e.new_email:""}),[v]);return(0,L.jsx)(T().Ay,{header:(0,L.jsx)("span",{children:(0,L.jsx)(b().sA,{defaultMessage:"You updated your email to {newEmail}",values:{newEmail:m},id:"activity.emailEdited.header.short"})}),isFirst:n,isLast:s,isPrivate:!1,rootStore:i,notification:l,icon:(0,L.jsx)(B().H8,{authors:h,size:T().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:void 0,...(0,O().$5)({notification:l,activity:t,environment:u,tab:d})})};var fe=()=>i(674020),ye=()=>i(21140);function be(){const e=(0,u().IS)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,L.jsx)(T().rL,{children:(0,fe().y)(e.icon)})}i(672577);var Ae=()=>i(555555),Se=()=>i(831098),xe=()=>i(115512),je=()=>i(37433),_e=()=>i(296798),Me=()=>i(21735),ke=()=>i(466872),Re=()=>i(848237),Ie=()=>i(187820),Ke=()=>i(16006),Ce=()=>i(453697);const we=3;function Be(e){const{userIds:t,remainingAvatarCount:i,shownAvatarCount:o,titledRecordStore:r,isMobile:a}=e,n=(0,u().IS)((e=>({avatarContainer:{display:"flex",flexDirection:"row",justifyContent:"start",overflow:"hidden",paddingRight:2,alignItems:"center"},overlappingAvatar:{marginRight:-5,position:"relative"},rightmostAvatar:{position:"relative"},remainderCount:{paddingLeft:2,color:e.text.tertiary}})),[]);return(0,L.jsxs)("div",{style:n.avatarContainer,children:[t.slice(0,we).map(((e,t)=>{const i=I().LU.createChildStore(r,{table:y().oo,id:e}),s=t===o-1;if(i)return(0,L.jsx)(Ce().A,{userStore:i,size:24,avatarShouldShowShadow:!1,style:s?n.rightmostAvatar:n.overlappingAvatar,isOffline:!1,hasTooltip:!a},e)})),i>0&&(0,L.jsx)("div",{style:n.remainderCount,children:(0,L.jsx)(b().sA,{defaultMessage:"{remainingAvatarCount, plural, one {+{remainingAvatarCount}} other {+{remainingAvatarCount}}}",id:"activity.titleCard.members.otherCount.message",values:{remainingAvatarCount:i}})})]})}function Oe(e){const{titledRecordStore:t,rootStore:n,activity:s,tabArgs:d}=e,l=n.getRecordModel,c=(0,a().K8)((()=>t.getModel()),[t]),v=(0,r().v3)(),{isMobile:m}=v.device,b=(0,a().K8)((()=>null==c?void 0:c.getRenderIcon({getRecordModel:l})),[c,l]),x=(0,u().IS)((e=>({container:{display:"block",borderWidth:1,borderStyle:"solid",borderColor:e.tint.regular,borderRadius:8,marginTop:0,padding:12,background:e.contentBackground,boxShadow:"0px 1px 2px 0px "+("light"===e.mode?"rgba(0, 0, 0, 0.03)":"rgba(0, 0, 0, 0.12)"),transition:`background ${T().XA}`},icon:{...N().kI,marginRight:10},activityTitle:{fontSize:14,marginRight:void 0!==b?3:0,display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,verticalAlign:"top",textAlign:"left",lineHeight:S().K_.UIRegular.desktop,...S().RC,whiteSpace:"normal",...N().a_},flexRow:{display:"flex",alignItems:"center"},title:{maxWidth:"80%"},spacer:{flexGrow:1}})),[b]),j=(0,a().K8)((()=>{if(c&&c.table!==f().yK)return c.getRenderUrl({getRecordModel:l,pageVisitSource:h().y8.Notification})}),[c,l]),_=(0,o.useCallback)((e=>{const i=t.table;switch(i){case g().ev:case p().NX:(0,O().Qo)({environment:v,activity:s,...d});break;case f().yK:(0,O().uY)({environment:v,activity:s,...d}),Re().L0({environment:v,teamStore:t,shouldScroll:!0}),ke().A.setState({...ke().A.state,open:!1});break;default:(0,A().HB)(i)}}),[s,v,d,t]),[{value:M}]=(0,i(187174).Yb)((async()=>{if(t.table!==p().NX)return[];if(!Me().A.state.shouldUseEdgeCache)return[];const e=await i(449506).callApi({eventName:"listUsers",environment:v,data:{cursor:void 0,membershipFilter:"members",limit:we,query:"",spaceId:t.id}});return"success"!==e.type?[]:e.data.users.map((e=>e.id))}),[v,t]),k=(0,a().K8)((()=>{const e=t.table;let o=[],r=0;switch(e){case"space":if(!t.getModel())break;if(Me().A.state.shouldUseEdgeCache){const e=t.getMemberCountFromPublicSpaceData();if(!e||!M)break;o=M,r=Math.max(0,e-we)}else{const e=i(749240).subscriptionDataStoreInstance.state;if(!e)break;o=(0,i(134217).Ye)(e).map((e=>e.userId)),r=Math.max(0,o.length-we)}break;case"block":const a=t.getCreatedByPointer();(null==a?void 0:a.table)===y().oo&&(o=[a.id]),r=Math.max(0,o.length-we);break;case"team":const n=(0,je().PF)({teamStore:t});o=(null==n?void 0:n.sampleMemberUserIds)??[],r=Math.max(0,(null==n?void 0:n.memberCount)??0-we);break;default:(0,A().HB)(e)}const a=Math.min(o.length,we);return(0,L.jsx)(Be,{userIds:o,remainingAvatarCount:r,shownAvatarCount:a,titledRecordStore:t,isMobile:m})}),[m,t,M]);return c?(0,L.jsx)(_e().A,{href:j,onClick:_,external:!1,innerStyle:x.container,inline:!0,children:(0,L.jsxs)("div",{style:x.flexRow,children:[b&&(0,L.jsx)(Ie().B6,{disabled:!0,icon:b,isEmptyPage:!1,size:25,style:x.icon}),(0,L.jsx)("div",{style:x.title,children:(0,L.jsx)(Ke().A,{store:t,style:x.activityTitle})}),(0,L.jsx)("div",{style:x.spacer}),(0,L.jsx)("div",{children:k})]})}):null}const Ne=o.memo(Oe);function Pe(){const e=(0,u().IS)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,L.jsx)(T().rL,{children:(0,Ae().n)(e.icon)})}function Te(){const e=(0,r().v3)(),t=(0,a().K8)((()=>"dark"===e.ThemeStore.state.mode),[e]),i=(0,u().IS)((e=>({icon:{height:18,width:18,marginTop:2,marginRight:2,fill:t?e.primaryBlack:e.blueColor}})),[t]);return(0,L.jsx)(T().rL,{children:(0,Se().y)(i.icon)})}var Le=()=>i(101209),qe=()=>i(712030),Ee=()=>i(921855),Ue=()=>i(722872),ze=()=>i(962730),De=()=>i(377586),Fe=()=>i(463830),We=()=>i(920773),He=()=>i(406699),Ve=()=>i(928600),$e=()=>i(480095),Ye=()=>i(563943);const Ge=1;function Qe(e){const{rootStore:t,activity:i,isLast:n,tabArgs:s,edits:d,style:l,isFirst:v}=e,{tab:m,notification:p,source:f}=s,y=(0,r().v3)(),b=d.at(0),[x,j]=(0,o.useState)(null),_=(0,o.useMemo)((()=>x&&x.scrollHeight>x.clientHeight),[x]),M=(0,a().K8)((()=>{if(!b)return;const e=I().Bv.createChildStore(t,{table:g().ev,id:b.navigable_block_id});return(0,A().O9)(e)?e:void 0}),[b,t]),k=(0,a().K8)((()=>{const e=null==M?void 0:M.getModel();if(e)return e.getRenderUrl({getRecordModel:t.getRecordModel,pageVisitSource:h().y8.Notification})}),[t,M]),R=(0,a().K8)((()=>(0,c().DU)({recordId:null==M?void 0:M.id,recordType:g().ev,tab:m,rootStore:t,environment:y})),[M,m,t,y]),K=(0,u().IS)((e=>({formattedTitleStyle:{fontSize:S().J.UISmall.desktop,color:e.text.tertiary},container:{paddingBlock:4,display:"flex",flexDirection:"row",columnGap:1.5*Number((0,N().AG)(e).paddingLeft),alignItems:"center"}})),[]),C=(0,o.useMemo)((()=>new Set(d.map((e=>e.automation_id)))),[d]),w=1===C.size;return(0,A().O9)(M)&&(0,A().O9)(b)?(0,L.jsx)(T().Ay,{header:(0,L.jsx)(et,{rootStore:t,uniqueAutomations:C,firstEdit:b,spaceId:i.spaceId,environment:y,shortened:!1,titleStyle:{fontWeight:S().Wy.semibold}}),isFirst:v,isLast:n,isPrivate:R,rootStore:t,navigableBlockId:M.id,notification:p,icon:(0,L.jsx)(it,{}),showSnapshotButton:!1,url:k,...(0,O().$5)({notification:p,activity:i,environment:y,tab:m}),children:(0,L.jsxs)("div",{style:l,children:[d.slice(-1*Ge).map(((i,o)=>(0,L.jsxs)("div",{children:[!w&&(0,L.jsx)(et,{rootStore:t,firstEdit:i,uniqueAutomations:new Set([i.automation_id]),shortened:!0,spaceId:i.space_id,environment:y,titleStyle:K.formattedTitleStyle}),(0,L.jsx)(Ze,{...e,edit:i,isViewAllMenu:!1,source:f,isLast:d.length>Ge?o===d.length-1-Ge:o===d.length-1,clampedMessageContainerRef:j})]},o))),(0,L.jsx)("div",{style:K.container,children:(_||d.length>Ge)&&(0,L.jsx)(Je,{edits:d,rootStore:t,activity:i,navigableBlockStore:M,source:f})})]})}):null}function Je(e){const{edits:t,rootStore:i,activity:n,navigableBlockStore:s,source:d}=e,l=(0,r().Y0)(),c=(0,r().v3)(),{handleAnalyticsForPopupMenu:v}=(0,o.useContext)(ot),h=(0,a().uB)(void 0,Fe().A),m=(0,o.useCallback)((()=>h.reset()),[h]),g=(0,o.useMemo)((()=>(0,L.jsx)(b().sA,{defaultMessage:"{numNotifications, plural, one {View more} other {View {numRemainingNotifications}}}",id:"inAppNotificationAutomationActionTriggeredActivity.renderViewAllNotificationsButton.buttonLabel",values:{numNotifications:t.length,numRemainingNotifications:t.length}})),[t.length]);let p;p=l.isMobile?{menuType:Ue().gu.Modal,title:g,right:(0,L.jsx)($e().DoneMenuText,{}),onClickRight:m,whiteBackground:!0}:{menuType:Ue().gu.Popup,width:420,maxWidth:l.isMobileBrowser?"80vw":"100%"};const f=(0,u().IS)((e=>({actionButton:(0,N().Ei)(e),divider:{borderBlockEnd:`1px solid ${e.regularDividerColor}`},viewAllMenuNotificationContainer:{display:"flex",flexDirection:"column",padding:12},viewAllMenuHeaderContainer:{display:"flex",flexDirection:"row",gap:T().VB},popupMenu:{marginInlineStart:-2,fontSize:T().gH}})),[]),y=(0,o.useId)();return(0,L.jsx)(He().Ay,{buttonPopupStore:h,popupType:l.isMobile?De().n.SlideUp:De().n.Popup,placementToOrigin:ze().W.Bottom,alignmentToOrigin:ze().C.Center,originGap:4,onClick:()=>!h.state.open&&v(),renderOrigin:e=>(0,L.jsx)(We().p,{size:"xs",isGray:!0,...e,style:f.actionButton,children:g}),render:()=>(0,L.jsx)(Ve().A,{...p,children:(0,L.jsx)("div",{style:f.popupMenu,children:t.map(((o,r)=>(0,L.jsxs)("div",{children:[(0,L.jsxs)("div",{style:f.viewAllMenuNotificationContainer,children:[(0,L.jsxs)("div",{style:f.viewAllMenuHeaderContainer,children:[(0,L.jsx)(it,{}),(0,L.jsx)(Ye().A,{timestamp:o.timestamp,titleAriaId:y,onBacklinkClick:()=>null,disableJustify:!0,header:(0,L.jsx)(et,{rootStore:i,uniqueAutomations:new Set([o.automation_id]),firstEdit:o,spaceId:n.spaceId,environment:c,closeViewAllMenu:m,shortened:!0,titleStyle:{fontWeight:S().Wy.semibold}}),rootStore:i,navigableBlockId:s.id,showRecordPath:!1})]}),(0,L.jsx)(Ze,{...e,edit:o,isViewAllMenu:!0,source:d,isLast:r===t.length-1},r)]}),r!==t.length-1&&(0,L.jsx)("div",{style:f.divider})]},r)))})})})}const Xe=4;function Ze(e){const{edit:t,rootStore:i,source:o,isViewAllMenu:n,clampedMessageContainerRef:s}=e,d=(0,u().DP)(),l=(0,r().v3)(),c=(0,r().Y0)(),{isMobile:v}=c,h=(0,a().K8)((()=>l.KatexStore.getKatex()),[l]),m=(0,qe().Ol)(),g=(0,a().K8)((()=>(0,L.jsx)("div",{children:(0,Ee().S5)({environment:l,textValue:t.message.value?{value:t.message.value,spaceId:t.space_id}:void 0,parentStore:i,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disabled:!1,theme:d,emojiType:m,katex:h,parentBlockId:void 0,renderedPageBlockId:void 0,formulaValueTypes:[],stopLinkPropagation:!0})})),[l,m,h,d,t.message.value,i,t.space_id]),p=(0,u().IS)((e=>({container:{paddingInlineStart:n?32:(0,N().F9)({source:o,isMobile:v}),paddingBlockEnd:4},messageContainer:{position:"relative",display:"flex",justifyContent:"space-between",alignItems:"center"},clampedMessageContainer:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:n?void 0:Xe,verticalAlign:"top",textAlign:"left",lineHeight:S().K_.UIRegular.desktop,...S().RC},messageContent:{whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:T().gH,lineHeight:(0,xe().ks)({device:c},"UIRegular"),paddingInlineEnd:8}})),[v,o,c,n]);return(0,L.jsx)("div",{style:{...n&&p.container,...p.messageContainer},children:(0,L.jsx)("div",{ref:s,style:p.clampedMessageContainer,children:(0,L.jsx)("div",{style:p.messageContent,children:g})})})}function et(e){const{rootStore:t,spaceId:i,environment:o,closeViewAllMenu:r,shortened:n,titleStyle:s,firstEdit:d,uniqueAutomations:l}=e,c=(0,b().tz)(),u=1===l.size,v=(0,a().K8)((()=>!I().dn.createChildStore(t,{table:te().yB,id:d.automation_id,spaceId:t.getSpaceId()}).getAlive()),[t,d]),m=(0,a().K8)((()=>{const e=new(I().Bv)(o,{id:d.automation_navigable_block_id,table:g().ev}).getRole();return!e||!(0,ee().Tt)(e)}),[d,o]),p=(0,a().K8)((()=>{if(!(v&&u||m))return()=>{const e=d.automation_navigable_block_id,i=d.automation_id,a=I().Bv.createChildStore(t,{table:g().ev,id:e});if(!a)return;r&&r();const n=(0,se().Ay)({store:a,preferPublicLink:!1,pageVisitSource:h().y8.Notification});re().oo({environment:o,url:n,callback:async()=>await(0,ce()._)({environment:o,automationNavigableBlockStore:a,automationId:u?i:void 0,rootStore:t,source:"in_app_notification"})})}}),[o,u,d,t,r,v,m]),f=(0,a().K8)((()=>[...l].map((e=>{const o=t.getRecordStore(t,{table:te().yB,id:e,spaceId:i}),r=o.getRole();return(0,A().O9)(r)&&(0,ee().Tt)(r)?o.getAlive()?o.getNameWithDefault(c):c.formatMessage(X().VS.automationDeletedName):c.formatMessage(X().VS.automationPrivateName)}))),[c,t,i,l]);return n?(0,L.jsx)("div",{style:{...s,display:"inline-flex"},children:(0,L.jsx)(tt,{handleAutomationNavigate:p,automationNames:f})}):(0,L.jsx)(b().sA,{id:"inAppNotificationAutomationActionTriggeredActivity.formattedHeaderMessage.automationTitle",defaultMessage:"{automationNameWrappedHeader} sent you a message",values:{automationNameWrappedHeader:(0,L.jsx)("div",{style:{...s,display:"inline-flex"},children:(0,L.jsx)(tt,{handleAutomationNavigate:p,automationNames:f})})}})}function tt(e){const{automationNames:t,handleAutomationNavigate:i}=e,o=(0,b().tz)(),r=t.at(0),a=t.length,n=a-2,s=o.formatList([...t.slice(0,2),n>0?o.formatMessage({defaultMessage:"{numRemainingAutomations} more",id:"inAppNotificationAutomationActionTriggeredActivity.wrappedAutomationName.tooltipNumRemainingAutomations"},{numRemainingAutomations:n}):void 0].filter(A().O9),{style:"long",type:"conjunction"}),d={defaultMessage:"{numAutomations, plural, one {{firstAutomationName}} other {{numAutomations} automations}}",values:{firstAutomationName:r,numAutomations:a},id:"inAppNotificationAutomationActionTriggeredActivity.wrappedAutomationName.automationName",description:"The display name for an automation."},l=e=>i?(0,L.jsx)(de().A,{...e,onClick:i,children:(0,L.jsx)(b().sA,{...d})}):(0,L.jsx)("div",{...e,children:(0,L.jsx)(b().sA,{...d,...e})});return 1===a?l():(0,L.jsx)(le().A,{renderTooltip:e=>(0,L.jsx)("div",{...e,children:s}),render:e=>l(e)})}function it(){const e=(0,u().IS)((e=>({icon:{height:12,width:12,fill:e.icon.secondary}})),[]);return(0,L.jsx)(T().rL,{children:(0,Le().v)(e.icon)})}const ot=(0,o.createContext)({handleAnalyticsForPopupMenu:()=>{}});function rt(e){const{analyticsInfo:t,children:i}=e,r=(0,o.useCallback)((()=>ie().mF(t)),[t]);return(0,L.jsx)(ot.Provider,{value:{handleAnalyticsForPopupMenu:r},children:i})}ot.displayName="InAppNotificationAutomationActionTriggeredAnalyticsContext";var at=()=>i(641007);var nt=()=>i(764880);const st=function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:s}=e,{tab:d,notification:l}=o,u=(0,r().v3)(),v=(0,a().K8)((()=>t.getEdits()),[t]),h=(0,a().K8)((()=>(0,c().Ln)({edits:v,rootStore:i})),[v,i]),m=(0,a().K8)((()=>(0,c().bD)(h,{...(0,R()._m)()})),[h]),p=(0,a().K8)((()=>{const e=I().Bv.createChildStore(i,{table:g().ev,id:t.navigable_block_id});if(e.isDefined())return e}),[t,i]),f=(0,a().K8)((()=>Boolean(p&&(0,c().DU)({recordId:p.id,recordType:g().ev,tab:d,rootStore:i,environment:u}))),[p,d,i,u]),A=v[0],S=(0,a().K8)((()=>(0,c().j1)(A.from_user_id,i)),[A,i]),x=(0,a().K8)((()=>(0,c().j1)(A.to_user_id,i)),[A,i]);if(!(v.length>0&&S&&x&&p))return null;const j=(0,nt().lR)(_().A.getIntl(),(0,nt().D3)({table:y().oo,value:S}));return(0,L.jsx)(T().Ay,{header:(0,L.jsx)(b().sA,{defaultMessage:"{authorPhrase} transferred {fromUserName}{fromUserNameEndsWithS, select, true {’} other {’s}} private pages to you",values:{authorPhrase:m,fromUserName:j,fromUserNameEndsWithS:"s"===j.slice(-1).toLowerCase()},id:"activity.privateContentTransferred.standardizedHeader.short"}),isPrivate:f,rootStore:i,notification:o.notification,isFirst:n,isLast:s,icon:(0,L.jsx)(B().H8,{authors:h,size:T().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:void 0,...(0,O().$5)({notification:l,activity:t,environment:u,tab:d})})};i(430670),i(908872);var dt=()=>i(343666),lt=()=>i(191772),ct=()=>i(774733),ut=()=>i(299545);function vt(e){const{authorCount:t,authorPhrase:i,targetStore:o}=e;return(0,a().K8)((()=>o instanceof I().jg),[o])?(0,L.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} reacted in} other {{authorOrAuthors} reacted in}}",values:{numberOfAuthors:t,authorOrAuthors:i},id:"activity.reactionActivity.standardizedHeader.comment"}):(0,L.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} reacted to} other {{authorOrAuthors} reacted to}}",values:{numberOfAuthors:t,authorOrAuthors:i},id:"activity.reactionActivity.standardizedHeader.discussion"})}function ht(e){const{targetStore:t,source:i}=e,o=(0,r().v3)(),n=(0,r().Y0)(),s=(0,u().DP)(),d=(0,a().K8)((()=>(0,ge().gL)({source:i,forReplyMenu:!1})),[i]),l=(0,u().IS)((e=>({commentText:{whiteSpace:"pre-wrap",wordBreak:"break-word",display:"inline",fontSize:14,color:e.text.primary,lineHeight:"22px"},newReaction:{borderWidth:1,borderStyle:"solid",borderColor:n.isMobile?"transparent":e.stroke.primary,borderRadius:6,boxShadow:n.isMobile?"unset":"0px 2px 4px 0px rgba(22, 29, 27, 0.02)"},avatarCommentReactionBarContainer:{...!n.isMobile&&{position:"relative"}},avatarAndCommentContainer:{display:"flex",flexDirection:"column"},commentContainer:{display:"flex",justifyContent:"space-between",gap:6,flexGrow:1}})),[n.isMobile]),c=(0,a().K8)((()=>{if(t&&t.table===dt().SN)return t}),[t]),v=(0,a().K8)((()=>{if(!c)return null;const e=ut().gp(c).getValue();if(!e)return null;const i=t.getSpaceId();if(!i)return null;const r=(0,lt().Eh)({textValue:e,currentUserId:o.currentUser.id,getRecordModel:t.getRecordModel,highlightStyle:"text_only"});return(0,Ee().S5)({environment:o,textValue:{value:r,spaceId:i},parentStore:t,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableHover:!0,disabled:!0,theme:s,emojiType:(0,qe().FN)(o),katex:o.KatexStore.getKatex(),formulaValueTypes:[]})}),[t,o,s,c]);return(0,L.jsxs)("div",{style:l.avatarCommentReactionBarContainer,children:[c&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{style:l.avatarAndCommentContainer,children:(0,L.jsx)("div",{children:(0,L.jsx)(ge().m$,{commentStore:c})})}),(0,L.jsx)("div",{style:l.commentContainer,children:(0,L.jsx)("div",{style:S().RC,children:(0,L.jsx)("span",{style:l.commentText,children:v})})})]}),(0,L.jsx)(ct().fj,{parentStore:t,discussionLocation:d,onReactionToggle:()=>{},newReactionStyle:l.newReaction})]})}var mt=()=>i(599987);function gt(){const e=(0,u().IS)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,L.jsx)(T().rL,{children:(0,mt().P)(e.icon)})}function pt(e){const{titledRecordStore:t,rootStore:i,activity:n,tabArgs:s}=e,d=i.getRecordModel,l=(0,a().K8)((()=>t.getModel()),[t]),c=(0,r().v3)(),{isMobile:v}=c.device,h=(0,a().K8)((()=>null==l?void 0:l.getRenderIcon({getRecordModel:d})),[l,d]),m=(0,o.useCallback)((o=>{const r=t.table;switch(r){case g().ev:(0,O().Qo)({environment:c,activity:n,...s});break;case f().yK:(0,O().Qo)({environment:c,activity:n,...s}),Re().L0({environment:c,teamStore:t,shouldScroll:!0}),ke().A.setState({...ke().A.state,open:!1});const a=e.notification;if(!a||a.read)break;(0,J().SQ)({event:o,context:J().y$.Click,callback:()=>{ae().createAndCommit({userAction:"NotificationTitleCard.handleMarkAsRead",environment:c,canUndo:!0,perform:e=>{oe().ZB({notification:a,rootStore:i,transaction:e,read:!0})}})}});break;default:(0,A().HB)(r)}}),[n,c,e.notification,i,s,t]),[p,b]=o.useState(!1),[x,j]=o.useState(!1),_=(0,u().IS)((e=>({container:{display:"flex",alignItems:"center",borderRadius:8,background:x?e.state.pressed:p?e.state.hover:"transparent",transition:`background ${T().XA}`,marginTop:0,padding:12,boxShadow:"0px 1px 2px 0px "+("light"===e.mode?"rgba(0, 0, 0, 0.03)":"rgba(0, 0, 0, 0.12)"),border:"1px",borderStyle:"solid",borderColor:e.tint.regular,cursor:p?"pointer":"default"},icon:{...N().kI,marginRight:10},activityTitle:{fontSize:14,marginRight:void 0!==h?3:0,display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,verticalAlign:"top",textAlign:"left",lineHeight:S().K_.UIRegular.desktop,...S().RC,whiteSpace:"normal",...N().a_},title:{maxWidth:"80%"},spacer:{flexGrow:1}})),[h,p,x]),M=(0,a().K8)((()=>{let e=[],i=0;const o=t.table;switch(o){case"block":const r=t.getCreatedByPointer();(null==r?void 0:r.table)===y().oo&&(e=[r.id]),i=Math.max(0,e.length-we);break;case"team":const a=(0,je().PF)({teamStore:t});e=(null==a?void 0:a.sampleMemberUserIds)??[],i=Math.max(0,(null==a?void 0:a.memberCount)??0-we);break;default:(0,A().HB)(o)}const r=Math.min(e.length,we);return(0,L.jsx)(Be,{userIds:e,remainingAvatarCount:i,shownAvatarCount:r,titledRecordStore:t,isMobile:v})}),[v,t]);return l?(0,L.jsxs)("div",{style:_.container,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),onMouseDown:()=>j(!0),onMouseUp:()=>j(!1),onClick:m,children:[h&&(0,L.jsx)(Ie().B6,{disabled:!0,icon:h,isEmptyPage:!1,size:25,style:_.icon}),(0,L.jsx)("div",{style:_.title,children:(0,L.jsx)(Ke().A,{store:t,style:_.activityTitle})}),(0,L.jsx)("div",{style:_.spacer}),(0,L.jsx)("div",{children:M})]}):null}const ft=o.memo(pt);var yt=()=>i(682197);var bt=()=>i(814388),At=()=>i(426302),St=()=>i(456328),xt=()=>i(720665);function jt(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:s}=e,{notification:d,tab:l}=o,u=(0,r().v3)(),v=(0,a().K8)((()=>t.getEdits()),[t]),m=v[0],g=Rt({rootStore:i,edit:m}),p=function(e){let{data:t,tab:i,rootStore:o}=e;const n=(0,r().v3)();return(0,a().K8)((()=>{if("block"!==(null==t?void 0:t.type))return!1;const e=t.blockStore.id;return(0,c().DU)({recordId:e,recordType:"block",tab:i,rootStore:o,environment:n})}),[t,n,o,i])}({data:g,tab:l,rootStore:i}),f=(0,a().K8)((()=>(0,c().Ln)({edits:v,rootStore:i})),[v,i]),y=(0,a().K8)((()=>{if("block"===(null==g?void 0:g.type))return g.blockStore}),[g]),b=(0,a().K8)((()=>{if(!y)return;const e=y.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:h().y8.Notification}):void 0}),[y,i.getRecordModel]),A=(0,a().K8)((()=>t.navigable_block_id),[t]);if(0===v.length||!g)return null;const S=0===f.filter(nt().L_).length,x=S?void 0:(0,L.jsx)(B().H8,{authors:f,size:T().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1});return(0,L.jsxs)(T().Ay,{header:(0,L.jsx)(Mt,{data:g,authors:f,isFromBot:S}),hidePageTitle:!0,isFirst:n,isLast:s,isPrivate:p,rootStore:i,navigableBlockId:A,notification:d,icon:x,showSnapshotButton:!1,url:b,...(0,O().$5)({notification:d,environment:u,tab:l,activity:t}),children:[(0,L.jsx)(kt,{...e,edit:m}),(0,L.jsx)(_t,{data:g,rootStore:i,activity:t,tabArgs:o})]})}function _t(e){var t;const{data:i,rootStore:o,activity:r,tabArgs:a}=e,n=(0,u().IS)((e=>({group:{color:e.text.secondary,fontSize:14},titleCardWrapper:{display:"contents",pointerEvents:"none"}})),[]);switch(i.type){case"block":return(0,L.jsx)(yt().g,{children:(0,L.jsx)(ft,{titledRecordStore:i.blockStore,rootStore:o,activity:r,tabArgs:a})});case"group":return(0,L.jsx)("div",{style:n.group,children:(0,L.jsx)(b().sA,{defaultMessage:"You will now get notifications when @{groupName} is mentioned",id:"activity.userInvitedActivity.groupInviteExplanation",values:{groupName:null===(t=i.group)||void 0===t?void 0:t.name}})});case"space":return(0,L.jsx)(yt().g,{children:(0,L.jsx)("div",{style:n.titleCardWrapper,children:(0,L.jsx)(Ne,{tabArgs:a,titledRecordStore:i.spaceStore,rootStore:o,activity:r})})});default:(0,A().HB)(i)}}function Mt(e){var t,i;const{data:o,authors:r,isFromBot:n}=e,s=(0,a().K8)((()=>(0,c().bD)(r,{...(0,R()._m)()})),[r]);switch(o.type){case"block":return n?(0,L.jsx)(b().sA,{defaultMessage:"You were invited to a page",id:"activity.userInvitedActivityByBot.standardizedHeader.redesign"}):(0,L.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a page} other {{authorOrAuthors} invited you to a page}}",values:{numberOfAuthors:r.length,authorOrAuthors:s},id:"activity.userInvitedActivity.standardizedHeader.redesign"});case"group":return n?(0,L.jsx)(b().sA,{defaultMessage:"You were added to @{groupName}",values:{groupName:null===(t=o.group)||void 0===t?void 0:t.name},id:"activity.userInvitedActivityGroupIdByBot.standardizedHeader.redesign"}):(0,L.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to @{groupName}} other {{authorOrAuthors} added you to @{groupName}}}",values:{numberOfAuthors:r.length,authorOrAuthors:s,groupName:null===(i=o.group)||void 0===i?void 0:i.name},id:"activity.userInvitedActivityGroupId.standardizedHeader.redesign"});case"space":return n?(0,L.jsx)(b().sA,{defaultMessage:"You were invited to a workspace",id:"activity.userInvitedActivityOtherInviteByBot.standardizedHeader.redesign"}):(0,L.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a workspace} other {{authorOrAuthors} invited you to a workspace}}",values:{numberOfAuthors:r.length,authorOrAuthors:s},id:"activity.userInvitedActivityOtherInvite.standardizedHeader.redesign"});default:(0,A().HB)(o)}}function kt(e){const{edit:t,activity:i,rootStore:o}=e,r=(0,u().IS)((()=>({redesignedInviteMessage:{fontSize:14,paddingTop:8,paddingBottom:8}})),[]),n=Rt({rootStore:o,edit:t}),s=(0,a().K8)((()=>parseInt(i.end_time)),[i]),d=(0,a().K8)((()=>{if("block"!==(null==n?void 0:n.type))return;const e=n.blockStore;return null!=e&&e.isDefined()?e.getModel():void 0}),[n]),l=(0,a().K8)((()=>{if(!d)return{isValid:!1};const e=d&&(0,St()._T)(d,i);if(!e)return{isValid:!1};const t=o.getRecordModel({table:At().Yx,id:e,spaceId:i.space_id});return t&&t.getMessage()&&t.getCreatedTime()<=s+5*xt().Xb?{isValid:!0,message:t.getMessage()}:{isValid:!1}}),[i,s,d,o]);return null!=l&&l.isValid?(0,L.jsx)("div",{style:r.redesignedInviteMessage,children:l.message}):null}function Rt(e){let{rootStore:t,edit:i}=e;return(0,a().K8)((()=>{if(i)return i.navigable_block_id?{type:"block",blockStore:I().Bv.createChildStore(t,{table:g().ev,id:i.navigable_block_id})}:i.permission_group_id?{type:"group",group:(0,bt().$I)({spaceId:i.space_id,permissionGroupId:i.permission_group_id,getRecordValue:t.getRecordValue})}:{type:"space",spaceStore:I().SL.createChildStore(t,{table:p().NX,id:i.space_id})}}),[i,t])}const It=o.memo(jt);var Kt=()=>i(372160),Ct=()=>i(931075),wt=()=>i(907514);function Bt(){const e=(0,u().IS)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,L.jsx)(T().rL,{children:(0,Kt().E)(e.icon)})}const Ot={"block-property-edited":function(e){const{activity:t,rootStore:o,tabArgs:n,isFirst:s,isLast:d}=e,{tab:l,notification:u}=n,v=(0,a().K8)((()=>(0,he().W9)(t.getEdits())),[t]),m=v.length>0,p=(0,a().K8)((()=>I().Bv.createChildStore(o,{table:g().ev,id:v[0].navigable_block_id})),[o,v]),f=(0,a().K8)((()=>{const e=p.getModel();if(e)return e.getRenderUrl({getRecordModel:o.getRecordModel,pageVisitSource:h().y8.Notification})}),[p,o]),y=(0,a().K8)((()=>(0,c().Ln)({edits:v,rootStore:o})),[v,o]),A=(0,r().v3)(),S=(0,a().K8)((()=>(0,c().bD)(y,{...(0,R()._m)()})),[y]),x=(0,a().K8)((()=>(0,c().DU)({recordId:p.id,recordType:"block",tab:l,rootStore:o,environment:A})),[p,l,o,A]);if(!(0,a().K8)((()=>p.isDefined()),[p])||!m)return null;const j=new Set;return v.forEach((e=>{Object.keys(e.property_updates).forEach((e=>{j.add(e)}))})),(0,L.jsx)(T().Ay,{header:j.size>1?(0,L.jsx)("span",{children:(0,L.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated properties} other {{authorOrAuthors} updated properties}}",id:"activity.blockEdited.standardizedHeader.multiple",values:{numberOfAuthors:y.length,authorOrAuthors:S}})}):(0,L.jsx)("span",{children:(0,L.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated a property} other {{authorOrAuthors} updated a property}}",id:"activity.blockEdited.standardizedHeader.single",values:{numberOfAuthors:y.length,authorOrAuthors:S}})}),isFirst:s,isLast:d,isPrivate:x,rootStore:o,navigableBlockId:p.id,notification:u,icon:(0,L.jsx)(B().H8,{authors:y,size:T().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:f,...(0,O().$5)({notification:u,activity:t,environment:A,tab:l}),children:(0,L.jsx)(i(6533).A,{visible:5,items:v.map(((e,t)=>(0,L.jsx)(me().A,{edit:e,rootStore:o},t)))})})},"user-mentioned":i(550297).A,commented:ge().CS,"user-invited":It,reminder:function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:s}=e,{notification:d,tab:l}=o,u=(0,r().v3)(),v=(0,a().K8)((()=>t.getEdits()),[t]),m=v.length>0,p=I().Bv.createChildStore(i,{table:g().ev,id:v[0].navigable_block_id}),f=(0,a().K8)((()=>p.isDefined()),[p]),y=(0,a().K8)((()=>{const e=I().Bv.createChildStore(i,{table:g().ev,id:t.reminder_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:h().y8.Notification})}),[t,i]),A=(0,a().K8)((()=>(0,c().DU)({recordId:p.id,recordType:g().ev,tab:l,rootStore:i,environment:u})),[p,l,i,u]);return m&&f&&y?(0,L.jsx)(T().Ay,{header:(0,L.jsx)("span",{style:{fontWeight:S().Wy.medium},children:(0,L.jsx)(b().sA,{defaultMessage:"Reminder",id:"activity.reminderInActivity.header.short"})}),isFirst:n,isLast:s,isPrivate:A,rootStore:i,navigableBlockId:p.id,notification:d,icon:(0,L.jsx)(gt,{}),showSnapshotButton:!1,url:y,...(0,O().$5)({notification:d,activity:t,environment:u,tab:l}),children:(0,L.jsx)(me().A,{edit:v[0],rootStore:i})}):null},"email-edited":pe,"access-requested":$,"access-request-resolved":Q,"team-membership-edited":function(e){const{activity:t,rootStore:o,tabArgs:n,isFirst:s,isLast:d}=e,{notification:l,tab:u}=n,v=(0,r().v3)(),m=(0,a().K8)((()=>t.getEdits()),[t]),g=m.length>0,p=(0,a().K8)((()=>(0,c().Ln)({edits:m,rootStore:o})),[m,o]),y=(0,a().K8)((()=>(0,c().bD)(p,{...(0,R()._m)()})),[p]),A=m[0],S=I().h4.createChildStore(o,{table:f().yK,id:A.team_id}),x=(0,a().K8)((()=>S.isDefined()),[S]),j=(0,a().K8)((()=>{if((0,i(578136).D)({isMobileNative:v.device.isMobileNative}))return(0,i(120739).a)({teamId:A.team_id,spaceId:S.getSpaceId(),pageVisitSource:h().y8.Notification})}),[A.team_id,v,S]);return g&&x?(0,L.jsx)(T().Ay,{header:(0,L.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a teamspace} other {{authorOrAuthors} invited you to a teamspace}}",values:{numberOfAuthors:p.length,authorOrAuthors:y},id:"activity.userInvitedToTeamActivity.standardizedHeader"}),isFirst:s,isLast:d,isPrivate:!1,rootStore:o,notification:l,icon:(0,L.jsx)(B().H8,{authors:p,size:T().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:j,...(0,O().$5)({notification:l,activity:t,environment:v,tab:u}),children:(0,L.jsx)(yt().g,{children:(0,L.jsx)(ft,{titledRecordStore:S,rootStore:o,activity:t,tabArgs:n,notification:l})})}):null},"private-content-transferred":st,"permission-group-mentioned":function(e){const{activity:t,rootStore:i,isFirst:o,isLast:n,tabArgs:s}=e,{tab:d,notification:l}=s,u=(0,r().v3)(),v=(0,a().K8)((()=>t.getEdits()),[t]),m=v.length>0,p=v[0],f=I().Bv.createChildStore(i,{table:g().ev,id:p.navigable_block_id}),y=(0,a().K8)((()=>f.isDefined()),[f]),A=(0,a().K8)((()=>{const e=I().Bv.createChildStore(i,{table:g().ev,id:t.mentioned_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:h().y8.Notification})}),[t,i]),S=(0,a().K8)((()=>(0,c().Ln)({edits:t.getEdits(),rootStore:i})),[t,i]),x=(0,a().K8)((()=>(0,c().bD)(S,{...(0,R()._m)()})),[S]),j=(0,a().K8)((()=>(0,c().DU)({recordId:f.id,recordType:g().ev,tab:d,rootStore:i,environment:u})),[f,d,i,u]);return m&&y&&A?(0,L.jsx)(T().Ay,{header:(0,L.jsx)("span",{children:(0,L.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned your group} other {{authorOrAuthors} mentioned your group}}",values:{numberOfAuthors:S.length,authorOrAuthors:x},id:"activity.groupMentionActivity.standardizedHeader.short"})}),isFirst:o,isLast:n,isPrivate:j,rootStore:i,navigableBlockId:f.id,notification:l,icon:(0,L.jsx)(B().H8,{authors:S,size:T().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:A,...(0,O().$5)({notification:l,activity:t,environment:u,tab:d}),children:(0,L.jsx)(me().A,{edit:p,rootStore:i,highlightCurrentUser:!0,highlightCurrentUserStyle:"text_only"})}):null},"team-mentioned":function(e){const{activity:t,rootStore:i,isFirst:o,isLast:n,tabArgs:s}=e,{tab:d,notification:l}=s,u=(0,r().v3)(),v=(0,a().K8)((()=>t.getEdits()),[t]),m=v.length>0,p=v[0],f=(0,a().K8)((()=>I().Bv.createChildStore(i,{table:g().ev,id:p.navigable_block_id})),[p,i]),y=(0,a().K8)((()=>f&&f.isDefined()),[f]),A=(0,a().K8)((()=>{const e=I().Bv.createChildStore(i,{table:g().ev,id:t.mentioned_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:h().y8.Notification})}),[t,i]),S=(0,a().K8)((()=>(0,c().Ln)({edits:t.getEdits(),rootStore:i})),[t,i]),x=(0,a().K8)((()=>(0,c().bD)(S,{...(0,R()._m)()})),[S]),j=(0,a().K8)((()=>(0,c().DU)({recordId:f.id,recordType:g().ev,tab:d,rootStore:i,environment:u})),[f,d,i,u]);return m&&y&&A?(0,L.jsx)(T().Ay,{header:(0,L.jsx)("span",{children:(0,L.jsx)(b().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned your teamspace} other {{authorOrAuthors} mentioned your teamspace}}",values:{numberOfAuthors:S.length,authorOrAuthors:x},id:"activity.teamMentionActivity.standardizedHeader.short"})}),isFirst:o,isLast:n,isPrivate:j,rootStore:i,navigableBlockId:f.id,notification:l,icon:(0,L.jsx)(B().H8,{authors:S,size:T().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:A,...(0,O().$5)({notification:l,activity:t,environment:u,tab:d}),children:(0,L.jsx)(me().A,{edit:p,rootStore:i,highlightCurrentUser:!0,highlightCurrentUserStyle:"text_only"})}):null},"verification-expired":function(e){const{activity:t,rootStore:o,tabArgs:n,isFirst:s,isLast:d}=e,{tab:l,notification:v}=n,m=(0,r().v3)(),p=(0,a().K8)((()=>I().Bv.createChildStore(o,{table:g().ev,id:t.navigable_block_id})),[t,o]),f=(0,a().K8)((()=>p.isDefined()),[p]),y=(0,a().K8)((()=>{const e=p.getModel();if(e)return e.getRenderUrl({getRecordModel:o.getRecordModel,pageVisitSource:h().y8.Notification})}),[p,o]),A=(0,a().K8)((()=>t.collection_id?I().md.createChildStore(o,{table:i(519831).Vl,id:t.collection_id,spaceId:t.space_id}):void 0),[t,o]),x=(0,a().K8)((()=>Boolean(null==A?void 0:A.isPageTreeCollection())),[A]),j=(0,a().K8)((()=>{let e;if(x){const t=null==A?void 0:A.getSchema();e=(t?Object.keys(t):[]).find((e=>{var i;return!!t&&"verification"===(null===(i=t[e])||void 0===i?void 0:i.type)}))}else e=Ct()._e.Verification;let t=(0,L.jsx)(b().sA,{id:"Activity.author.unknown",defaultMessage:"Unknown"});if(e){const i=p.getPropertyValue(e),r=(0,Ct().U1)(i);if(r){const e=r[0],i=(0,c().T9)(e,o);i&&i.asActor&&(t=(0,c().bD)([i],{...(0,R()._m)()}))}}return t}),[p,A,x,o]),_=(0,a().K8)((()=>(0,c().DU)({recordId:p.id,recordType:"block",tab:l,rootStore:o,environment:m})),[p,l,o,m]),{activityStartTimestamp:M,activityEndTimestamp:k}=(0,a().K8)((()=>({activityStartTimestamp:parseInt(t.start_time),activityEndTimestamp:parseInt(t.end_time)})),[t]),K=(0,u().IS)((e=>({verificationMessage:{fontSize:14,color:e.text.secondary}})),[]);return f?(0,L.jsx)(T().Ay,{header:x?(0,L.jsx)(b().sA,{defaultMessage:"<medium>Wiki verification</medium> expired",id:"activity.verificationExpired.header.short",values:{medium:e=>(0,L.jsx)("span",{style:{fontWeight:S().Wy.medium},children:e})}}):(0,L.jsx)(b().sA,{defaultMessage:"<medium>Page verification</medium> expired",id:"activity.verificationExpired.page.header.short",values:{medium:e=>(0,L.jsx)("span",{style:{fontWeight:S().Wy.medium},children:e})}}),isFirst:s,isLast:d,isPrivate:_,rootStore:A??o,navigableBlockId:p.id,notification:v,icon:(0,L.jsx)(Bt,{}),showSnapshotButton:!1,url:y,...(0,O().$5)({notification:v,activity:t,environment:m,tab:l}),children:(0,L.jsx)("div",{style:K.verificationMessage,children:M&&k?(0,L.jsx)(b().sA,{defaultMessage:"Last verified by {person} from {startDate} to {endDate}",values:{person:j,startDate:(0,wt().DG)(M),endDate:(0,wt().DG)(k)},id:"activity.verificationExpired.contentWithTimestamp"}):(0,L.jsx)(b().sA,{defaultMessage:"Last verified by {person}",values:{person:j},id:"activity.verificationExpired.contentWithoutTimestamp"})})}):null},"export-completed":function(e){const{activity:t,rootStore:o,tabArgs:n,isFirst:s,isLast:d}=e,{tab:l,notification:c}=n,v=(0,r().v3)(),{edits:h}=(0,a().K8)((()=>({edits:t.getEdits()})),[t]),m=(0,u().IS)((e=>({newContainer:{paddingTop:12,paddingBottom:4},actionButton:(0,N().Ei)(e)})),[]),g=(0,L.jsx)(b().sA,{defaultMessage:"Your workspace export is ready",id:"activity.exportCompleted.header"}),p=(0,L.jsx)(ye().Ye,{style:{fontSize:12},children:(0,L.jsx)(b().sA,{defaultMessage:"The download link will expire in 7 days.",id:"activity.exportCompleted.downloadLink"})});return(0,L.jsxs)(T().Ay,{header:g,isFirst:s,isLast:d,isPrivate:!0,rootStore:o,notification:c,icon:(0,L.jsx)(be,{}),showSnapshotButton:!1,url:void 0,...(0,O().$5)({notification:c,activity:t,environment:v,tab:l}),children:[p,(0,L.jsx)("div",{style:m.newContainer,children:(0,L.jsx)(i(493823).p,{isGray:!0,size:"xs",onClick:()=>{window.open(h[0].link,"_blank")},style:m.actionButton,children:(0,L.jsx)(b().sA,{defaultMessage:"Download",id:"activity.actions.exportCompleted.download"})})})]})},"import-completed":function(e){var t;const{activity:n,rootStore:s,tabArgs:d,isFirst:l,isLast:c}=e,{tab:v,notification:m,source:p}=d,f=(0,r().v3)(),{edits:y}=(0,a().K8)((()=>({edits:n.getEdits()})),[n]),A=null===(t=y[0])||void 0===t?void 0:t.teamspace_id,S=(0,je().uJ)(),x=(0,o.useMemo)((()=>((null==S?void 0:S.teams)??[]).map((e=>e.store))),[S]),j=(0,je().qQ)(),_=(0,je().D5)(),M=(0,o.useMemo)((()=>_?x:j),[x,j,_]),k=(0,o.useMemo)((()=>M.find((e=>e.id===A))),[A,M]),R=(0,a().K8)((()=>null==k?void 0:k.getName()),[k]),K=f.device.isMobile,C=(0,u().IS)((e=>({newContainerLinkBox:{...(0,N().aY)({source:p,isMobile:K}),display:"flex",alignItems:"center",fontSize:xe().ny(f,"UIRegular"),paddingTop:2,paddingBottom:6,marginBottom:0,paddingLeft:0,width:"100%"}})),[K,p,f]);if(!y.length)return(0,L.jsx)(L.Fragment,{});const{import_source:w,import_status:B,version:P,landing_page:q,collection_page_ids:E}=y[0],U=(0,L.jsx)(b().sA,{defaultMessage:"Your {importSource} import has failed",id:"activity.importFailed.header",values:{importSource:w}}),z=(0,L.jsx)(b().sA,{defaultMessage:"Your {importSource} import was successful",id:"activity.importSuccess.header",values:{importSource:w}}),D=(0,L.jsx)(ye().Ye,{style:{fontSize:xe().ny(f,"UISmall")},children:(0,L.jsx)(b().sA,{defaultMessage:"View projects and tasks in Notion",id:"activity.importCompleted.projects.redirect"})}),F=(0,L.jsx)(ye().Ye,{style:{fontSize:xe().ny(f,"UISmall")},children:(0,L.jsx)(b().sA,{defaultMessage:"View boards in Notion",id:"activity.importCompleted.boards.redirect"})}),W=(0,L.jsx)(ye().Ye,{style:{fontSize:xe().ny(f,"UISmall")},children:(0,L.jsx)(b().sA,{defaultMessage:"View import logs",id:"activity.importCompleted.loggerPage.redirect"})}),H=(0,i(921940).A)({pageId:q,pageVisitSource:h().y8.Import});let V="successful"===B?z:U,$=(0,L.jsx)(ye().Ye,{children:(0,L.jsx)(_e().A,{href:H,innerStyle:C.newContainerLinkBox,children:"successful"===B?"Monday"===w&&"v2"===P?F:D:W})});const Y="Jira"===w?(0,L.jsx)(Te,{}):(0,L.jsx)(Pe,{}),G=null==E?void 0:E[0];if("Jira"===w){const{headerComponent:e,bodyComponent:t}=(()=>{let e,t;if(k&&"successful"===B&&(e=(0,L.jsxs)("div",{children:[(0,L.jsx)(b().sA,{defaultMessage:"Your Jira projects and tasks have been synced to",id:"activity.importCompleted.jira.success.header"})," ",(0,L.jsx)("div",{style:{display:"inline-block",position:"relative"},children:(0,L.jsx)(i(898808).x,{disabled:!0,store:k,size:20})})," ",(0,L.jsx)("span",{children:R})]})),G){const e=I().Bv.createChildStore(s,{id:G.projectCollectionPageId,spaceId:s.id,table:g().ev}),i=I().Bv.createChildStore(s,{id:G.taskCollectionPageId,spaceId:s.id,table:g().ev});t=(0,L.jsxs)("div",{style:{paddingRight:12},children:[(0,L.jsx)(Ne,{titledRecordStore:e,rootStore:s,activity:n,tabArgs:d}),(0,L.jsx)("div",{style:{height:6}}),(0,L.jsx)(Ne,{titledRecordStore:i,rootStore:s,activity:n,tabArgs:d})]})}return{headerComponent:e,bodyComponent:t}})();t&&($=t),e&&(V=e)}return(0,L.jsx)(T().Ay,{url:void 0,header:V,isPrivate:!0,isFirst:l,isLast:c,rootStore:s,notification:m,icon:Y,showSnapshotButton:!1,...(0,O().$5)({notification:m,activity:n,environment:f,tab:v}),children:$})},"in-app-notification-automation-action-triggered":function(e){const{activity:t,tabArgs:i}=e,{tab:o,notification:n}=i,s=(0,r().v3)(),d=(0,a().K8)((()=>t.getEdits()),[t]),l=d.length>0,c={tab:o,notificationId:null==n?void 0:n.id,environment:s,alreadyRead:Boolean(null==n?void 0:n.read),activity:t},v=(0,u().IS)((e=>({notificationContainer:{paddingBlock:"8px 4px",display:"flex",flexDirection:"column",rowGap:8}})),[]);return l?(0,L.jsx)(rt,{analyticsInfo:c,children:(0,L.jsx)(Qe,{...e,edits:d,style:v.notificationContainer})}):null},"no-conflicts-found":function(e){const{activity:t,rootStore:o,tabArgs:n,isFirst:s,isLast:d}=e,{tab:l,notification:c}=n,u=(0,r().v3)(),v=(0,b().tz)(),m=(0,a().K8)((()=>t.navigable_block_id),[t]),p=(0,a().K8)((()=>{const e=i(148832).B.createChildStore(o,{table:g().ev,id:t.navigable_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:o.getRecordModel,pageVisitSource:h().y8.Notification})}),[t,o]),f=(0,L.jsx)("span",{children:(0,L.jsx)(b().sA,{defaultMessage:"<b>{author}</b> did not find conflicts",id:"activity.noConflictsFound.header",values:{author:at().px.getDisplayName(v),b:e=>(0,L.jsx)("span",{style:{fontWeight:S().Wy.semibold},children:e})}})});return p?(0,L.jsx)(T().Ay,{header:f,isFirst:s,isLast:d,isPrivate:!0,rootStore:o,navigableBlockId:m,notification:c,icon:(0,L.jsx)(B().H8,{authors:[at().px],size:T().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:p,...(0,O().$5)({notification:c,activity:t,environment:u,tab:l})}):null},"automation-typecheck-error-raised":function(e){const{rootStore:t,activity:n,isLast:s,tabArgs:d,isFirst:l}=e,{tab:v,notification:m}=d,p=(0,b().tz)(),f=(0,r().v3)(),y=(0,a().K8)((()=>n.getEdits()),[n]),x=y.at(0),j=(0,u().IS)((e=>({notificationContainer:{paddingTop:4,display:"flex",flexDirection:"column",rowGap:8},editAutomation:{marginTop:8,height:26,fontWeight:S().Wy.medium},messageContainer:{alignItems:"center",color:e.text.secondary,display:"flex",fontSize:T().gH,justifyContent:"space-between",lineHeight:S().K_.UIRegular.desktop,paddingInlineEnd:12,position:"relative"},headerName:{fontWeight:S().Wy.medium,display:"inline-flex"}})),[]),_=(0,o.useMemo)((()=>new Set(y.map((e=>e.automation_id)))),[y]),M=(0,a().K8)((()=>{if(!(0,A().O9)(x))return!1;return!I().dn.createChildStore(t,{table:te().yB,id:x.automation_id,spaceId:t.getSpaceId()}).getAlive()}),[t,x]),{handleNavigateToAutomation:k,navigableBlockStore:R,navigableBlockUrl:K}=function(e){let{edit:t,rootStore:i,uniqueAutomationIds:o}=e;const n=(0,r().v3)(),s=1===o.size,d=(0,a().K8)((()=>{if(!(0,A().O9)(t))return!1;return!I().dn.createChildStore(i,{table:te().yB,id:t.automation_id,spaceId:i.getSpaceId()}).getAlive()}),[i,t]),l=(0,a().K8)((()=>{if((0,A().O9)(t))return new(I().Bv)(n,{id:t.automation_navigable_block_id,table:g().ev})}),[t,n]),c=(0,a().K8)((()=>{if(!(0,A().O9)(l))return!0;const e=l.getRole();return!e||!(0,ee().Tt)(e)}),[l]),u=(0,a().K8)((()=>{if((0,A().O9)(l))return(0,se().Ay)({store:l,preferPublicLink:!1,pageVisitSource:h().y8.Notification})}),[l]),v=(0,a().K8)((()=>c||!(0,A().O9)(t)?()=>{}:()=>{const e=t.automation_id;l&&u&&((0,ne().u)({environment:n,event:{eventName:"click_automation_typecheck_error_notification",eventProperties:{block_id:l.id,automation_id:e}}}),re().oo({environment:n,url:u,callback:async()=>await(0,ce()._)({environment:n,automationNavigableBlockStore:l,automationId:s&&!d?e:void 0,rootStore:i,source:"automation_typecheck_error_raised_notification"})}))}),[d,s,c,t,l,u,n,i]);return{handleNavigateToAutomation:v,navigableBlockStore:l,navigableBlockUrl:u}}({edit:x,rootStore:t,uniqueAutomationIds:_}),C=(0,a().K8)((()=>(0,c().DU)({recordId:null==R?void 0:R.id,recordType:g().ev,tab:v,rootStore:t,environment:f})),[R,v,t,f]),w=(0,a().K8)((()=>{const e=_.values().next().value;if(e){return t.getRecordStore(t,{table:te().yB,id:e,spaceId:n.spaceId}).getNameWithDefault(p)}return""}),[n.spaceId,p,t,_]),B=(0,a().K8)((()=>[..._].map((e=>{const i=t.getRecordStore(t,{table:te().yB,id:e,spaceId:n.spaceId}),o=i.getRole();return(0,A().O9)(o)&&(0,ee().Tt)(o)?i.getAlive()?i.getNameWithDefault(p):p.formatMessage(X().VS.automationDeletedName):p.formatMessage(X().VS.automationPrivateName)}))),[p,t,n,_]),N=(0,o.useCallback)((e=>{ae().createAndCommit({userAction:"AutomationTypecheckErrorRaisedActivity.viewError",environment:f,canUndo:!0,perform:e=>{oe().ZB({notification:m,rootStore:t,transaction:e,read:!0})}}),k(),ie().K4({tab:v,notificationId:null==m?void 0:m.id,environment:f,alreadyRead:Boolean(null==m?void 0:m.read),activity:n})}),[n,f,k,m,t,v]);if(!(0,A().O9)(R)||!(0,A().O9)(x)||0===y.length)return null;const P=(0,L.jsx)("div",{style:j.headerName,children:(0,L.jsx)(ue,{handleAutomationNavigate:N,automationNames:B})}),q=M&&1===_.size;return(0,L.jsx)(T().Ay,{header:(0,L.jsx)(b().sA,{id:"AutomationTypecheckErrorRaisedActivity.formattedHeaderMessage.automationTitle",defaultMessage:"{automationNames} {numAutomationNames, plural, one {is} other {are}} invalid",values:{numAutomationNames:_.size,automationNames:P}}),isFirst:l,isLast:s,isPrivate:C,rootStore:t,navigableBlockId:R.id,notification:m,icon:(0,L.jsx)(ve,{automationName:w}),showSnapshotButton:!1,url:K,...(0,O().$5)({notification:m,activity:n,environment:f,tab:v}),children:(0,L.jsx)("div",{style:j.notificationContainer,onClick:e=>{(0,J().SQ)({event:e,context:J().y$.Click,callback:()=>{N(e)}})},children:!q&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{style:j.messageContainer,children:(0,L.jsx)(b().sA,{id:"AutomationTypecheckErrorRaisedActivity.formattedHeaderMessage.automationMessage",defaultMessage:"Resolve any errors or remove failing steps to enable {numAutomationNames, plural, one {this automation} other {these automations}}",values:{numAutomationNames:_.size}})}),(0,L.jsx)("div",{children:(0,L.jsx)(i(864943).A,{style:j.editAutomation,onClick:N,size:"sm",children:(0,L.jsx)(b().sA,{id:"AutomationTypecheckErrorRaisedActivity.editAutomation.automationMessage",defaultMessage:"Edit automation"})})})]})})})},reacted:function(e){const{activity:t,tabArgs:o,rootStore:n,isFirst:s,isLast:l}=e,{source:u,tab:v,notification:m}=o,p=(0,a().K8)((()=>t.getEdits()),[t]),f=(0,r().v3)(),y=(0,a().K8)((()=>{const e=t.discussion_id;if(!p||!t.discussion_id)return;const{reacted_comment_id:i}=p[0],o=i?dt().SN:d().$Y,r=i??e;return n.getRecordStore(n,{table:o,id:r,spaceId:t.space_id})}),[p,t,n]),b=(0,a().K8)((()=>{if(y){if(y.table===dt().SN){const e=y.getParentStore(),t=null==e?void 0:e.getParentPointer();if(!t)return;return I().Bv.createChildStore(n,t)}if(y.table===d().$Y){const e=y.getParentPointer();if(!e)return;return I().Bv.createChildStore(n,e)}}}),[y,n]),x=(0,a().K8)((()=>{const e=null==b?void 0:b.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,b]),j=(0,a().K8)((()=>{var e;if(b)return null===(e=b.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:n.getRecordModel,discussionId:t.discussion_id,pageVisitSource:h().y8.Notification})}),[b,n,t]),_=(0,a().K8)((()=>{if(!y)return[];const e=(y.getReactionPointers()??[]).map((e=>I().sk.createChildStore(n,e)));let t;var o;y instanceof I().jg&&(t=null===(o=y.getCreatedById)||void 0===o?void 0:o.call(y));if(y instanceof I().cc){const e=y.getParentStore();t=null==e?void 0:e.getCreatedById()}const r=(0,i(496603).hS)(e.flatMap((e=>{var t;return(null===(t=e.getActorPointers())||void 0===t?void 0:t.filter(A().O9))??[]})).filter((e=>e.id!==t)),"id"),a=new Map;null==p||p.forEach((e=>{"reaction-created"===e.type&&e.authors&&e.authors.forEach((t=>{const i=a.get(t.id)??0;e.timestamp>i&&a.set(t.id,e.timestamp)}))}));return r.sort(((e,t)=>{const i=a.get(e.id)??0;return(a.get(t.id)??0)-i})).map((e=>I().sk.createChildStore(n,e)))}),[y,n,p]),{frontActorStore:M,backActorStore:k}=(0,a().K8)((()=>{const e=f.currentUser.id;if(!e||0===_.length)return{frontActorStore:void 0,backActorStore:void 0};const i=_.map((e=>I().sk.createChildStore(n,{table:e.table,id:e.id,spaceId:t.space_id})));return(0,c()._S)({authorStores:i,currentUserId:e})}),[_,f.currentUser.id,n,t.space_id]),R=(0,a().K8)((()=>(0,c().DU)({recordId:t.navigable_block_id,recordType:g().ev,tab:v,rootStore:n,environment:f})),[t,n,v,f]),K=(0,a().K8)((()=>{if(null==p||!p.length)return;const e=p.filter((e=>"reaction-created"===e.type)).reduce(((e,t)=>e.timestamp>t.timestamp?e:t),p[0]);if(null==e||!e.reaction_id)return;const o=n.getRecordStore(n,{table:i(204384).ez,id:e.reaction_id,spaceId:t.space_id});return null==o?void 0:o.getIcon()}),[t,n,p]);return(0,L.jsx)(T().Ay,{header:y&&(0,L.jsx)(vt,{authorCount:_.length,authorPhrase:(0,L.jsx)(ge()._B,{authorsLength:_.length,frontActorStore:M,backActorStore:k,authorTextStyle:{fontWeight:S().Wy.medium}}),targetStore:y}),isFirst:s,isLast:l,isPrivate:R,rootStore:n,navigableBlockId:x,notification:m,icon:K?(0,L.jsx)(i(56086).A,{char:K,size:18}):void 0,showSnapshotButton:!1,url:j,...(0,O().$5)({notification:m,environment:f,tab:v,activity:t}),children:y&&(0,L.jsx)(ht,{targetStore:y,source:u})})},"upgrade-request-created":i(981402).J,"app-builder-notification":i(617137).P,"external-integration-notification":i(729555).q,"trial-created":i(685277).e};var Nt=()=>i(963612);function Pt(e){const{activity:t,rootStore:i}=e,{source:a,notification:n,tab:s,...l}=e,u=(0,r().v3)(),v=(0,o.useMemo)((()=>({source:a,notification:n,tab:s})),[a,n,s]);return(0,o.useEffect)((()=>{!function(e,t){if("commented"===e.type){const o=t.getRecordStore(t,{table:d().$Y,id:e.discussion_id,spaceId:e.space_id});if(o.isDefined()){const e=o.getCommentStores();for(const t of e){var i;null===(i=t.getCreatedByStore())||void 0===i||i.load()}}}}(t,i),u.KatexStore.loadIfNeeded((()=>function(e,t){const i=(0,c().U6)({activity:e,rootStore:t});if(!i)return;return i.context}(t,i)))}),[u.KatexStore,t,i]),(0,L.jsx)("div",{"data-activity-id":t.id,"data-notification-id":n.id,"data-notification-type":n.type,children:(0,L.jsx)(Tt,{...l,tabArgs:v})})}function Tt(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:r,isLast:d}=e,c=(0,a().K8)((()=>t.type),[t]),u="on"===(0,l().r)("condensed_notification_ia"),v=e.overrideUsePageGroupRedesign??u;if(!(0,n().Jc)(c))return s().log({level:"error",from:"ActivityNotification",type:"unsupportedActivityType",data:{message:`Activity type ${c} is not supported for ActivityNotification`}}),null;if(v){const e=Nt()._b[c];return(0,L.jsx)(e,{activity:t,rootStore:i,tabArgs:o,isFirst:r,isLast:d})}const h=Ot[c];return(0,L.jsx)(h,{activity:t,rootStore:i,tabArgs:o,isFirst:r,isLast:d})}},550297:(e,t,i)=>{i.d(t,{A:()=>y});i(296540);var o=()=>i(484714),r=()=>i(56366),a=()=>i(584262),n=()=>i(66689),s=()=>i(801634),d=()=>i(179034),l=()=>i(959013),c=()=>i(212326),u=()=>i(630116),v=()=>i(921194),h=()=>i(77179),m=()=>i(12296),g=()=>i(770176),p=()=>i(700348),f=i(474848);function y(e){const{activity:t,rootStore:i,tabArgs:n,isFirst:l,isLast:y}=e,{tab:A,notification:S}=n,x=(0,o().v3)(),j=(0,r().K8)((()=>t.getEdits()),[t]),_=j.length>0,M=j[0],k=u().Bv.createChildStore(i,{table:d().ev,id:M.navigable_block_id}),R=(0,r().K8)((()=>k.isDefined()),[k]),I=(0,r().K8)((()=>u().xq.createChildStore(i,{table:s().kz,id:t.id,spaceId:t.space_id}).getStandardizedMentionedPropertyURI()),[t,i]),K=(0,r().K8)((()=>{const e=u().Bv.createChildStore(i,{table:d().ev,id:t.mentioned_block_id}).getModel();return null==e?void 0:e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:a().y8.Notification})}),[t,i]),C=(0,r().K8)((()=>(0,g().Ln)({edits:j,rootStore:i})),[j,i]),w=(0,r().K8)((()=>(0,g().bD)(C,{...(0,c()._m)()})),[C]),B=(0,r().K8)((()=>(0,g().DU)({recordId:k.id,recordType:"block",tab:A,rootStore:i,environment:x})),[k,A,i,x]);return _&&R&&K?(0,f.jsx)(p().Ay,{header:(0,f.jsx)(b,{mentionedProperty:I,authorPhrase:w,authors:C}),isFirst:l,isLast:y,isPrivate:B,rootStore:i,navigableBlockId:k.id,notification:S,icon:(0,f.jsx)(h().H8,{authors:C,size:p().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:K,...(0,m().$5)({notification:S,activity:t,environment:x,tab:A}),children:(0,f.jsx)(v().A,{edit:M,rootStore:i,highlightCurrentUser:!0,highlightCurrentUserStyle:"text_only"})}):null}function b(e){const{mentionedProperty:t,authorPhrase:i,authors:o}=e;switch(t){case n().yx.Assign:return(0,f.jsx)(l().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} assigned you a task} other {{authorOrAuthors} assigned you a task}}",values:{numberOfAuthors:o.length,authorOrAuthors:i},id:"activity.mentionTaskActivity.standardizedHeader"});case n().K4.People:return(0,f.jsx)(l().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned you in} other {{authorOrAuthors} mentioned you in}}",values:{numberOfAuthors:o.length,authorOrAuthors:i},id:"activity.mentionProjectActivity.standardizedHeader.short"});default:return(0,f.jsx)(l().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned you in} other {{authorOrAuthors} mentioned you in}}",values:{numberOfAuthors:o.length,authorOrAuthors:i},id:"activity.mentionActivity.standardizedHeader.short"})}}}}]);