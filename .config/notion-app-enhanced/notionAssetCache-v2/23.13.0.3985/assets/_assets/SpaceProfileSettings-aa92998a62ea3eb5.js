"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[30001],{371110:(e,t,i)=>{i.r(t),i.d(t,{SpaceProfileSettings:()=>At});i(898992),i(737550);var a=i(296540),s=()=>i(484714),n=()=>i(56366),o=()=>i(401497),r=()=>i(757695),l=()=>i(842599),c=()=>i(133033),d=()=>i(738418),u=()=>i(959013),g=()=>i(284371),m=()=>i(881738),h=()=>i(278768),f=()=>i(901389),v=()=>i(804411),p=()=>i(751156),S=()=>i(892632),x=()=>i(876853),y=()=>i(124749),j=()=>i(962730),b=()=>i(765957),w=()=>i(227440),A=()=>i(404141),C=()=>i(807778),D=()=>i(134217),M=()=>i(959098),E=()=>i(464708),P=()=>i(802790),k=()=>i(623580),z=()=>i(859428),B=()=>i(139125),L=()=>i(381349),T=()=>i(534177),I=()=>i(679924);function V(e,t){(0,I().v)(e,"change_email",t)}var N=()=>i(449506),U=()=>i(994877),F=()=>i(898486),W=()=>i(965378),_=()=>i(836251);let H=function(e){return e.Password="Password",e.CurrentEmail="TemporaryPasscode",e}({});class R extends r().Store{getInitialState(){return{open:!1,authorized:!1,authorizationType:void 0}}}const O=R;var K=()=>i(224701),$=()=>i(331542),q=()=>i(676007),Y=()=>i(864943),G=()=>i(204063),Z=()=>i(125565),Q=()=>i(719147),J=()=>i(688149),X=()=>i(702723),ee=i(474848);const te={modal:{width:460,padding:32,borderRadius:4,fontSize:14},loadingSpinner:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},paragraph:{marginTop:12,marginBottom:14},error:{color:L().Ay.red,fontSize:12,marginTop:4,marginLeft:8},bold:{fontWeight:g().Wy.bold},input:{padding:"4px 8px"},button:{marginTop:14,width:"100%"},educationPlanWarning:{display:"flex",marginTop:14,paddingTop:14},claimedEmailDomainWarning:{marginTop:14,marginBottom:14}},ie=(0,u().YK)({dialogLabel:{id:"profileSettings.accountSecuritySection.emailSetting.dialogLabel",defaultMessage:"Change email"}});const ae=function(e){let{userValue:t,hasEducationPlan:i,areProfileEditsDisabled:s}=e;const o=(0,u().tz)(),r=(0,n().uB)(void 0,O),l=(0,a.useCallback)((()=>(0,ee.jsx)(we,{userValue:t,hasEducationPlan:i,emailChangeStore:r})),[t,i,r]),c=(0,a.useCallback)((()=>de(r)),[r]),d=(0,n().K8)((()=>r.state.open),[r]);return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(X().A,{type:"custom",isMobile:!1,title:(0,ee.jsx)(u().sA,{id:"profileSettings.accountSecuritySection.emailSetting.label",defaultMessage:"Email"}),caption:t&&t.email,customButton:(0,ee.jsx)(me,{userValue:t,areProfileEditsDisabled:s,emailChangeStore:r})}),(0,ee.jsx)(q().a,{ariaLabel:o.formatMessage(ie.dialogLabel),open:d,onDismiss:c,render:l})]})};function se(e){let{userValue:t}=e;return t?(0,ee.jsx)(u().sA,{id:"profileSettings.changeEmailModal.currentEmail",defaultMessage:"Your current email is {currentEmail}.",values:{currentEmail:(0,ee.jsx)("span",{style:te.bold,children:t?t.email:void 0})}}):null}function ne(e){let{state:t}=e;return(0,ee.jsx)(Z().A,{isSmall:!0,isMultiline:!0,style:te.claimedEmailDomainWarning,children:(0,ee.jsx)(u().sA,{id:"profileSettings.changeEmailModal.claimedEmailDomainWarning",defaultMessage:"The email domain {newEmailDomain} has been claimed by an organization. If you continue with changing this email address, any workspaces created by this account can be managed by the organization. See <domainclaimlink>this page</domainclaimlink> for more info.",values:{newEmailDomain:(0,l().zN)(t.newEmail)??t.newEmail,domainclaimlink:e=>(0,ee.jsx)(Q().A,{href:(0,_().xS)("guides.domainManagement"),external:!0,children:e})}})})}function oe(e){return{modal:{background:e.contentBackground},educationPlanWarning:{color:e.text.tertiary,borderTop:`1px solid ${e.regularDividerColor}`}}}function re(e){let{hasEducationPlan:t}=e;const i=(0,o().DP)(),a=(0,s().v3)();return t?(0,ee.jsxs)("div",{style:{...te.educationPlanWarning,...oe(i).educationPlanWarning},children:[(0,c().$)({width:14,marginTop:4,marginRight:6,fill:i.icon.tertiary})," ",(0,ee.jsx)("div",{children:(0,ee.jsx)(u().sA,{defaultMessage:"Changing your email may downgrade your workspace on a Free Education Plan to the basic Free Plan. You won’t lose any data, but you’ll need to upgrade to re-access paid features. Have questions about this? <sendmessagelink>Message support</sendmessagelink>.",id:"emailChangeSettings.downgradeEducationPlan.warning.message",values:{sendmessagelink:e=>(0,ee.jsx)(Q().A,{onClick:()=>function(e){U().SI({environment:e,from:"change_email_student"})}(a),children:e})}})})]}):null}function le(e,t,i){if(e)return e.email;i.setState({open:i.state.open,authorized:!1,authorizationType:void 0,error:t.formatMessage({id:"profileSettings.changeEmailModal.errorNoUserValue",defaultMessage:"User value is undefined."})})}async function ce(e,t,i){if(!i.state.authorized)return;const a=(0,l().zN)(i.state.newEmail);i.setState({...i.state,loading:!0});const[s,n]=await Promise.all([await N().callApi({eventName:"sendEmailVerification",environment:e,data:{email:i.state.newEmail}}),a?await N().callApi({eventName:"getVerifiedEmailDomain",environment:e,data:{emailDomain:a}}):void 0]);if("success"===s.type){const e=(0,T().O9)(n)&&"failed"===n.type?(0,F().Hu)(t,n):void 0;i.setState({...i.state,newEmailPasscodeSent:!0,newEmailPasscode:"",error:e,errorField:void 0,loading:!1,newEmailContainsVerifiedDomain:(0,T().O9)(n)&&"success"===n.type&&void 0!==n.data.id})}else i.setState({...i.state,loading:!1,error:(0,F().Hu)(t,s)})}function de(e){e.reset()}async function ue(e,t,i,a){if(!a.state.authorized)if(a.state.authorizationType===H.Password){if(!le(t,i,a))return;a.setState({...a.state,loading:!0});const s=await N().callApi({eventName:"authVerifyPassword",environment:e,data:{password:a.state.password}});if("failed"===s.type)return void a.setState({...a.state,loading:!1,error:(0,F().Hu)(i,s)});a.setState({...a.state,authorized:!0,newEmail:"",newEmailPasscode:"",newEmailPasscodeSent:!1,newEmailContainsVerifiedDomain:!1,error:void 0,errorField:void 0,loading:!1})}else a.state.authorizationType===H.CurrentEmail&&a.setState({...a.state,authorized:!0,newEmail:"",newEmailPasscode:"",newEmailPasscodeSent:!1,newEmailContainsVerifiedDomain:!1,error:void 0,errorField:void 0,loading:!1})}async function ge(e,t,i,a){if(!a.state.authorized)return;const s=a.state.authorizationType===H.Password?{type:"Password",password:a.state.password,newEmail:a.state.newEmail,newEmailPasscode:a.state.newEmailPasscode}:{type:"CurrentEmail",currentEmailPasscode:a.state.currentEmailPasscode,newEmail:a.state.newEmail,newEmailPasscode:a.state.newEmailPasscode};a.setState({...a.state,loading:!0});const n=await N().callApi({eventName:"changeEmail",environment:e,data:s});if("success"===n.type){V(e,{new_email:a.state.newEmail,error:void 0});const i=b().default.state.currentSpaceStore;t&&i&&await K().o2({spaceStore:i,environment:e}),de(a)}else{var o,r;const t=(0,F().Hu)(i,n);let s;V(e,{new_email:a.state.newEmail,error:t}),"failed"===n.type&&"invalid_or_expired_password"===(null===(o=n.body)||void 0===o||null===(o=o.clientData)||void 0===o?void 0:o.type)&&null!==(r=n.body)&&void 0!==r&&null!==(r=r.clientData)&&void 0!==r&&null!==(r=r.messageValues)&&void 0!==r&&r.emailField&&(s=n.body.clientData.messageValues.emailField),a.setState({...a.state,loading:!1,error:t,errorField:s})}}function me(e){let{userValue:t,areProfileEditsDisabled:i,emailChangeStore:s}=e;const n=(0,a.useCallback)((()=>function(e){e.setState({open:!0,authorized:!1,authorizationType:void 0})}(s)),[s]),o=(0,ee.jsx)(Y().A,{size:"lg",onClick:i?()=>{}:n,disabled:i,disabledFeedback:i,children:(0,ee.jsx)(u().sA,{id:"profileSettings.accountSecuritySection.emailSetting.changeEmailButton.label",defaultMessage:"Change email"})});return i?(0,ee.jsx)(z().A,{renderTooltip:()=>(0,ee.jsx)(u().sA,{id:"editableUserAvatar.profilePhoto.disabledByOrganization",defaultMessage:"Profile editing has been disabled by your organization, {emailDomain}",values:{emailDomain:t?(0,l().zN)(t.email):""}}),placement:j().W.Bottom,alignment:j().C.Center,render:e=>(0,ee.jsx)("div",{...e,children:o})}):o}function he(e){let{state:t,userValue:i,emailChangeStore:n}=e;const o=(0,s().v3)(),r=(0,u().tz)(),l=(0,a.useCallback)((()=>ue(o,i,r,n)),[o,i,r,n]),c=(0,a.useCallback)((()=>function(e){e.setState({open:!0,authorized:!1,authorizationType:H.Password,password:""})}(n)),[n]),d=(0,a.useCallback)((e=>function(e,t){t.setState({open:!0,authorized:!1,authorizationType:H.Password,password:e.currentTarget.value,error:void 0})}(e,n)),[n]);return i?(0,ee.jsxs)(a.Fragment,{children:[(0,ee.jsx)("p",{style:{margin:0},children:(0,ee.jsx)(se,{userValue:i})}),(0,ee.jsx)("p",{style:te.paragraph,children:(0,ee.jsx)(u().sA,{id:"profileSettings.changeEmailModal.enterPasswordInstructions",defaultMessage:"Please enter your password."})}),(0,ee.jsx)(k().A,{style:{display:"none"},type:"text",value:i.email,autoComplete:"username",disabled:!0}),(0,ee.jsx)(k().A,{type:"password",disabled:t.authorized,value:t.password,onChange:d,showClearButton:!0,onClearButtonClick:c,onSubmit:l,placeholder:r.formatMessage({id:"profileSettings.changeEmailModal.passwordInput.label",defaultMessage:"Password"}),style:te.input,focusInitial:!0,autoComplete:"current-password"}),!t.authorized&&t.error?(0,ee.jsx)("div",{style:te.error,children:t.error}):void 0,t.authorized?void 0:(0,ee.jsx)(G().A,{size:"lg",style:te.button,onClick:l,disabled:t.loading,children:t.loading?(0,ee.jsx)($().A,{}):(0,ee.jsx)(u().sA,{id:"profileSettings.changeEmailModal.continueButton.label",defaultMessage:"Continue"})})]}):null}function fe(e){let{userValue:t,emailChangeStore:i}=e;const o=(0,s().v3)(),r=(0,u().tz)(),l=(0,a.useCallback)((()=>async function(e,t,i,a){if(!t)return;a.setState({...a.state,loading:!0});const s=await N().callApi({eventName:"sendEmailVerification",environment:e,data:{email:t.email}});"success"===s.type?a.setState({...a.state,currentEmailPasscodeSent:!0,currentEmailPasscode:"",error:void 0,loading:!1}):a.setState({...a.state,currentEmailPasscodeSent:!0,loading:!1,error:(0,F().Hu)(i,s)})}(o,t,r,i)),[o,t,r,i]),c=(0,n().K8)((()=>i.state.loading),[i]);return(0,ee.jsx)(G().A,{size:"lg",onClick:l,disabled:c,children:c?(0,ee.jsx)($().A,{}):(0,ee.jsx)(u().sA,{id:"profileSettings.changeEmailModal.sendCurrentEmailVerificationCode.label",defaultMessage:"Send verification code"})})}function ve(e){let{state:t,userValue:i,emailChangeStore:r}=e;const l=(0,s().v3)(),c=(0,u().tz)(),d=(0,o().DP)(),g=(0,a.useCallback)((()=>ue(l,i,c,r)),[l,i,c,r]),m=(0,a.useCallback)((e=>function(e,t){t.setState({...t.state,currentEmailPasscode:e.currentTarget.value,error:void 0,errorField:void 0})}(e,r)),[r]),h=(0,n().K8)((()=>"current"===r.state.errorField),[r]);return(0,ee.jsxs)(a.Fragment,{children:[(0,ee.jsx)(k().A,{value:t.currentEmailPasscode,onChange:m,onSubmit:g,placeholder:c.formatMessage({id:"profileSettings.changeEmailModal.enterCurrentEmailVerificationCodeInput.placeholder",defaultMessage:"Enter verification code"}),focusInitial:!0,style:{...te.input,boxShadow:h?`0 0 0 2px ${d.stroke.uiRedPrimary}`:void 0}}),t.authorized?void 0:(0,ee.jsx)(G().A,{size:"lg",style:te.button,onClick:g,disabled:t.loading,children:t.loading?(0,ee.jsx)($().A,{}):(0,ee.jsx)(u().sA,{id:"profileSettings.changeEmailModal.continueButton.label",defaultMessage:"Continue"})})]})}function pe(e){let{emailChangeStore:t}=e;const i=(0,s().v3)(),o=(0,u().tz)(),r=(0,a.useCallback)((()=>function(e){e.setState({...e.state,newEmail:"",newEmailPasscodeSent:!1,newEmailContainsVerifiedDomain:!1,error:void 0})}(t)),[t]),l=(0,a.useCallback)((()=>ce(i,o,t)),[i,o,t]),c=(0,a.useCallback)((e=>function(e,t){t.setState({...t.state,newEmail:e.currentTarget.value,error:void 0})}(e,t)),[t]),d=(0,n().O$)(t);return d.authorized?(0,ee.jsx)(k().A,{value:d.newEmail,onChange:c,onSubmit:l,showClearButton:!0,onClearButtonClick:r,placeholder:o.formatMessage({id:"profileSettings.changeEmailModal.newEmailInput.placeholder",defaultMessage:"Enter new email"}),style:te.input,focusInitial:!0}):null}function Se(e){let{state:t,emailChangeStore:i}=e;const n=(0,s().v3)(),o=(0,u().tz)(),r=(0,a.useCallback)((()=>ce(n,o,i)),[n,o,i]);return(0,ee.jsxs)(a.Fragment,{children:[t.error?(0,ee.jsx)("div",{style:te.error,children:t.error}):void 0,(0,ee.jsx)(G().A,{size:"lg",style:te.button,onClick:r,disabled:t.loading,children:t.loading?(0,ee.jsx)($().A,{}):(0,ee.jsx)(u().sA,{id:"profileSettings.changeEmailModal.sendVerificationCodeButton.label",defaultMessage:"Send verification code"})})]})}function xe(e){let{state:t,userValue:i,emailChangeStore:s}=e;return(0,ee.jsxs)(a.Fragment,{children:[(0,ee.jsxs)("p",{style:{...te.paragraph,marginTop:0},children:[(0,ee.jsx)(se,{userValue:i})," ",t.currentEmailPasscodeSent?(0,ee.jsx)(u().sA,{id:"profileSettings.changeEmailModal.sentVerificationCodeToCurrentEmail",defaultMessage:"We’ve sent a temporary verification code to this email."}):(0,ee.jsx)(u().sA,{id:"profileSettings.changeEmailModal.sendVerificationCodeToCurrentEmail",defaultMessage:"We’ll send a temporary verification code to this email."})]}),t.currentEmailPasscodeSent?(0,ee.jsx)(ve,{userValue:i,emailChangeStore:s,state:t}):(0,ee.jsx)(fe,{userValue:i,emailChangeStore:s})]})}function ye(e,t,i,a,s){if(!s.state.authorized)return()=>{};if(s.state.newEmailContainsVerifiedDomain&&(0,l().zN)(s.state.newEmail)!==(0,l().zN)((null==t?void 0:t.email)||"")){const t=s.state.newEmail;return async()=>{const n=await function(e){return f().Gh({mode:"wide",message:(0,ee.jsx)(u().sA,{id:"profileSettings.changeEmailModal.confirmationModal.title",defaultMessage:"Change your email?"}),description:(0,ee.jsx)(u().sA,{id:"profileSettings.changeEmailModal.confirmationModal.description",defaultMessage:"If you continue changing this email address to this domain, any workspaces created by this account can be managed by the organization.",values:{verifiedDomain:(0,l().zN)(e)}}),acceptLabel:(0,ee.jsx)(u().sA,{id:"profileSettings.changeEmailModal.confirmationModal.acceptButton.label",defaultMessage:"Change email"}),cancelLabel:(0,ee.jsx)(u().sA,{id:"profileSettings.changeEmailModal.confirmationModal.cancelButton.label",defaultMessage:"Go back"})}).then((e=>e.accept))}(t);n&&await ge(e,i,a,s)}}return()=>ge(e,i,a,s)}function je(e){let{state:t,userValue:i,hasEducationPlan:r,store:l}=e;const c=(0,s().v3)(),d=(0,u().tz)(),g=(0,o().DP)(),m=(0,a.useCallback)((e=>function(e,t){t.setState({...t.state,newEmailPasscode:e.currentTarget.value,error:void 0,errorField:void 0})}(e,l)),[l]),h=(0,n().K8)((()=>ye(c,i,r,d,l)),[c,i,r,d,l]),f=(0,n().K8)((()=>"new"===l.state.errorField),[l]);return(0,ee.jsxs)(a.Fragment,{children:[(0,ee.jsx)("p",{style:te.paragraph,children:(0,ee.jsx)(u().sA,{id:"profileSettings.changeEmailModal.verificationCodeSentMessage",defaultMessage:"We just sent you a temporary verification code to {newEmail}.",values:{newEmail:(0,ee.jsx)("span",{style:te.bold,children:t.newEmail})}})}),(0,ee.jsx)(k().A,{value:t.newEmailPasscode,onChange:m,onSubmit:h,placeholder:d.formatMessage({id:"profileSettings.changeEmailModal.enterVerificationCodeInput.placeholder",defaultMessage:"Enter verification code"}),focusInitial:!0,style:{...te.input,boxShadow:f?`0 0 0 2px ${g.stroke.uiRedPrimary}`:void 0}}),t.error?(0,ee.jsx)("div",{style:te.error,children:t.error}):void 0,(0,ee.jsx)(G().A,{size:"lg",style:te.button,onClick:h,disabled:t.loading,children:t.loading?(0,ee.jsx)($().A,{}):(0,ee.jsx)(u().sA,{id:"profileSettings.changeEmailModal.changeEmailButton.label",defaultMessage:"Change email"})})]})}function be(e){let{state:t,userValue:i,hasEducationPlan:s,emailChangeStore:o}=e;const r=(0,n().O$)(o);if(!r.authorized)return null;const{newEmail:c,newEmailContainsVerifiedDomain:d,newEmailPasscodeSent:g}=r;return(0,ee.jsxs)(a.Fragment,{children:[(0,ee.jsx)("p",{style:te.paragraph,children:(0,ee.jsx)(u().sA,{id:"profileSettings.changeEmailModal.newEmailInstructions",defaultMessage:"Please enter a new email and we will send you a verification code."})}),(0,ee.jsx)("div",{children:(0,ee.jsx)(pe,{emailChangeStore:o})}),d&&(0,l().zN)(c)!==(0,l().zN)((null==i?void 0:i.email)||"")?(0,ee.jsx)(ne,{state:t}):void 0,g?(0,ee.jsx)(je,{userValue:i,hasEducationPlan:s,store:o,state:t}):(0,ee.jsx)(Se,{emailChangeStore:o,state:t}),(0,ee.jsx)(re,{hasEducationPlan:s})]})}function we(e){let{userValue:t,hasEducationPlan:i,emailChangeStore:r}=e;const l=(0,u().tz)(),c=(0,o().DP)(),d=(0,s().v3)(),g=(0,a.useCallback)((()=>async function(e,t,i,a){const s=le(i,t,a);if(!s)return;const n=await W().V({environment:e,userEmail:s});n.error?a.setState({open:a.state.open,authorized:!1,authorizationType:void 0,error:t.formatMessage({id:"profileSettings.changeEmailModal.errorFetchingAccountData",defaultMessage:"Could not fetch account information for {currentEmail}."},{currentEmail:s})}):n.value.isSamlEnforced||!n.value.hasPassword?a.setState({open:!0,authorized:!1,authorizationType:H.CurrentEmail,currentEmailPasscodeSent:!1,currentEmailPasscode:""}):a.setState({open:!0,authorized:!1,authorizationType:H.Password,password:""})}(d,l,t,r)),[d,l,t,r]),m=(0,n().O$)(r);return(0,ee.jsx)("div",{style:{...te.modal,...oe(c).modal},children:(0,ee.jsx)(J().A,{fetch:g,loading:e=>e?(0,ee.jsx)("div",{style:te.loadingSpinner,children:(0,ee.jsx)($().A,{})}):null,render:()=>(0,ee.jsxs)(a.Fragment,{children:[m.authorizationType===H.Password?(0,ee.jsx)(he,{userValue:t,emailChangeStore:r,state:m}):m.authorizationType===H.CurrentEmail?(0,ee.jsx)(xe,{userValue:t,emailChangeStore:r,state:m}):void 0,m.authorized?(0,ee.jsx)(be,{userValue:t,hasEducationPlan:i,emailChangeStore:r,state:m}):void 0]})})})}i(354520),i(672577),i(581454);var Ae=()=>i(662303),Ce=()=>i(869190),De=()=>i(187174),Me=()=>i(158359),Ee=()=>i(126158),Pe=()=>i(498474),ke=()=>i(340498);const ze=(0,ke().wt)("cellPhone",{viewBox:"0 0 12 18",svg:(0,ee.jsx)("path",{d:"M2.938 17.398c-.672 0-1.217-.197-1.633-.593-.412-.39-.617-.912-.617-1.563V2.461c0-.646.205-1.167.617-1.563.416-.395.96-.593 1.633-.593h6.148c.667 0 1.2.198 1.601.593.407.396.61.917.61 1.563v12.781c0 .646-.203 1.167-.61 1.563-.4.396-.934.593-1.601.593H2.937zm.265-1.578h5.594c.307 0 .544-.08.71-.242.173-.161.259-.39.259-.687V2.812c0-.291-.086-.518-.258-.68-.167-.166-.404-.25-.711-.25H3.203c-.312 0-.555.082-.726.243-.167.161-.25.39-.25.688V14.89c0 .296.083.526.25.687.171.162.414.242.726.242zm1.11-.61a.398.398 0 01-.282-.108.368.368 0 01-.117-.282c0-.12.04-.216.117-.289a.398.398 0 01.282-.11h3.375a.38.38 0 01.28.11c.074.073.11.17.11.29a.38.38 0 01-.11.28.38.38 0 01-.28.11H4.313zm.703-11.546a.583.583 0 01-.43-.172.583.583 0 01-.172-.43.57.57 0 01.172-.421.57.57 0 01.43-.18h1.96a.56.56 0 01.422.18c.12.114.18.255.18.421a.583.583 0 01-.172.43.583.583 0 01-.43.172h-1.96z"})});(0,ke().wt)("exitDoor",{viewBox:"0 0 20 20",directional:!0,svg:(0,ee.jsx)("path",{d:"M4.121 17.468q-1.1 0-1.661-.568-.56-.567-.56-1.674V4.91q0-1.101.56-1.668.56-.574 1.661-.574h7.28q1.101 0 1.662.574.56.567.56 1.668v3.2h-1.34V4.998q0-.479-.246-.731-.246-.26-.745-.26H4.237q-.498 0-.745.26-.246.252-.246.731v10.145q0 .472.246.724.247.253.745.253h7.055q.5 0 .745-.253.246-.252.246-.724V12.02h1.34v3.206q0 1.107-.56 1.674-.561.568-1.662.568zm4.41-6.775a.6.6 0 0 1-.438-.184.6.6 0 0 1-.185-.444q0-.26.185-.445a.59.59 0 0 1 .437-.191h6.884l1.019.054-.506-.423-1.012-.964a.54.54 0 0 1-.191-.431q0-.233.15-.396a.51.51 0 0 1 .396-.165.55.55 0 0 1 .404.185l2.215 2.297a.7.7 0 0 1 .164.24.62.62 0 0 1 0 .478.8.8 0 0 1-.164.239l-2.215 2.297a.56.56 0 0 1-.403.178.51.51 0 0 1-.397-.165.6.6 0 0 1-.15-.403q0-.253.191-.424l1.012-.957.506-.424-1.019.048H8.53Z"})});var Be=()=>i(823274),Le=()=>i(889154),Te=()=>i(28755),Ie=()=>i(782398);class Ve extends r().Store{getInitialState(){return{open:!1,singleDeviceLogout:!1,deviceName:void 0}}}const Ne=new Ve;var Ue=()=>i(496603);const Fe=new(i(848776).U)((e=>{let{userId:t,paginationInfo:i}=e;return`getUserDevices/${t}/limit=${null==i?void 0:i.limit}`}),(async(e,t)=>{let{paginationInfo:a}=t;const s=await Promise.resolve().then(i.bind(i,449506)),n=await s.callApi({eventName:"getUserDevices",environment:e,data:{paginationInfo:a}});if("success"===n.type)return n.data}));i(604341).exposeDebugValue("DevicesStore",Fe);const We=Fe;class _e extends r().Store{getInitialState(){return{deviceListLoadingState:"init",nextCursor:void 0,currentDevice:void 0,allDevices:[],viewDevices:[],sortColumn:void 0,sortAscending:!1}}async fetchDevices(e,t){this.setState({...this.state,deviceListLoadingState:"loading",sortColumn:void 0});const i=await We.awaitData(e,t);var a,s;i&&i.devices&&i.currentDevice&&(this.setDevices(i.devices),this.setCurrentDevice(i.currentDevice),this.setNextCursor(null===(a=i.devices[i.devices.length-1])||void 0===a?void 0:a.id));i&&i.devices&&!i.currentDevice&&(this.setDevices(i.devices),this.setNextCursor(null===(s=i.devices[i.devices.length-1])||void 0===s?void 0:s.id));void 0!==i?this.setViewDevices():this.setState({...this.state,deviceListLoadingState:"error"})}setCurrentDevice(e){this.setState({...this.state,currentDevice:e})}setViewDevices(){var e;let t=this.state.allDevices.slice(0,3);const i=t.findIndex((e=>{var t;return e.id===(null===(t=this.state.currentDevice)||void 0===t?void 0:t.id)}));-1===i&&this.state.currentDevice?t=[this.state.currentDevice,...t.slice(0,2)]:i>0&&(t=[t[i],...t.slice(0,i),...t.slice(i+1)]);const a=null===(e=this.state.allDevices[t.length-1])||void 0===e?void 0:e.id;this.setNextCursor(a),this.setState({...this.state,deviceListLoadingState:"loaded",viewDevices:t})}setDevices(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return void this.setState({...this.state,allDevices:e,viewDevices:e.slice(0,3)});let t=e;this.state.currentDevice&&(t=[this.state.currentDevice,...e.filter((e=>{var t;return e.id!==(null===(t=this.state.currentDevice)||void 0===t?void 0:t.id)}))]),this.setState({...this.state,allDevices:e,viewDevices:t})}setSorting(e,t){switch(this.setState({...this.state,sortColumn:e,sortAscending:t}),e){case"device-name":this.sortDevicesByName();break;case"last-seen-time":this.sortDevicesByLastSeenTime();break;case"last-login-geographic-location":this.sortDevicesByLocation()}}sortDevicesByLastSeenTime(){const e=this.state.currentDevice,t=this.state.allDevices.filter((t=>t.id!==(null==e?void 0:e.id))),i=Ue().My(t,(e=>e.last_seen_time??e.last_login_at),this.state.sortAscending?"asc":"desc");this.setState({...this.state,viewDevices:e?[e,...i]:i})}sortDevicesByName(){const e=this.state.currentDevice,t=this.state.allDevices.filter((t=>t.id!==(null==e?void 0:e.id))),i=Ue().My(t,(e=>e.device_name.toLowerCase()),this.state.sortAscending?"asc":"desc");this.setState({...this.state,viewDevices:e?[e,...i]:i})}sortDevicesByLocation(){const e=this.state.currentDevice,t=this.state.allDevices.filter((t=>t.id!==(null==e?void 0:e.id))),i=Ue().My(t,(e=>{var t;return(null===(t=e.last_login_geographic_location)||void 0===t?void 0:t.toLowerCase())||"unknown"}),this.state.sortAscending?"asc":"desc");this.setState({...this.state,viewDevices:e?[e,...i]:i})}setNextCursor(e){this.setState({...this.state,nextCursor:e})}loadMoreDevices(){var e;if(void 0===this.state.nextCursor)return;const t=this.state.allDevices.slice(0,3),i=this.state.allDevices.slice(t.length);let a=[...t,...i];this.state.currentDevice&&(a=[this.state.currentDevice,...a.filter((e=>{var t;return e.id!==(null===(t=this.state.currentDevice)||void 0===t?void 0:t.id)}))]);const s=null===(e=this.state.allDevices[a.length-1])||void 0===e?void 0:e.id;this.setNextCursor(s),this.setState({...this.state,viewDevices:a})}}const He=new _e;var Re=()=>i(704152),Oe=()=>i(710149),Ke=()=>i(317182);function $e(){var e;const t=(0,s().v3)(),i=(0,o().IS)((e=>({tableBox:{tableLayout:"fixed"},cell:{paddingRight:12,height:44},allDevicesContainer:{display:"flex",flexDirection:"column",marginTop:16},noSessionsMessage:{height:120,width:"100%",fontSize:12,color:e.text.tertiary,display:"flex",alignItems:"center",justifyContent:"center",borderBottom:`1px solid ${e.lightDividerColor}`},shimmerRow:{height:12,gap:16,display:"flex",borderRadius:6},tooltips:{color:e.icon.tertiary,height:14,width:15,marginLeft:4},lastActiveTimeContainer:{display:"flex",alignItems:"center"}})),[]),[r]=(0,De().Yb)((async()=>{const e=t.currentUser.id;if(!e)return Promise.reject("User ID is not available");try{return await He.fetchDevices(t,{userId:e}),Promise.resolve()}catch(l){return Promise.reject(l)}}),[t]),l="rejected"===r.status,c=(0,n().O$)(He),d=(null===(e=c.currentDevice)||void 0===e?void 0:e.id)??"",u=(0,a.useMemo)((()=>l?[]:c.viewDevices.map((e=>function(e){let{userDevicePointer:t,storeState:i,currentUserDevicePk:a}=e;const s=t.id,n=i.viewDevices.find((e=>e.id===s));if(!n)return;const o=a===n.id,{device_name:r,last_seen_time:l,last_login_geographic_location:c,last_login_at:d}=n;return{key:s,columns:[(0,ee.jsx)(ot,{deviceName:r,isCurrentDevice:o},"device-name"),(0,ee.jsx)(st,{lastSeenTime:l??d,isCurrentDevice:o},"last-seen-time"),(0,ee.jsx)(nt,{location:c},"location"),(0,ee.jsx)(it,{deviceId:n.id,isCurrentDevice:o},"action")]}}({userDevicePointer:{id:e.id,table:Ie().S},storeState:c,currentUserDevicePk:d}))).filter((e=>void 0!==e))),[d,l,c]),g=(0,a.useMemo)((()=>Array.from({length:3}).map(((e,t)=>({columns:Array.from({length:4}).map(((e,t)=>(0,ee.jsx)(Oe().A,{style:i.shimmerRow},t))),key:`device-loading-shimmer-${t}`})))),[i.shimmerRow]);return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(Ge,{deviceRows:u,styles:i,storeState:c,shimmerRows:g}),(0,ee.jsx)(et,{})]})}function qe(e){let{column:t,onSortableColumnClick:i,header:a}=e;const s=(0,o().IS)((e=>({wrapper:{display:"flex"},sortButton:{display:"flex",alignItems:"center",padding:"3px 5px",overflow:"hidden",maxWidth:"100%",borderRadius:4},sortIcon:{fill:e.text.secondary,width:12,height:12,marginLeft:4}})),[]),{sortColumn:r,sortAscending:l}=(0,n().K8)((()=>{const{sortColumn:e,sortAscending:t}=He.state;return{sortColumn:e,sortAscending:t}}),[]),c=["device-name","last-seen-time","last-login-geographic-location"].includes(t),d=()=>{if(r===t)return(0,Ee().m)({...s.sortIcon,...l?{transform:"rotate(180deg)"}:{}})};return a&&c?(0,ee.jsx)("div",{style:s.wrapper,children:(0,ee.jsxs)(Re().A,{style:s.sortButton,onClick:()=>i(t),children:[a,d()]})}):a?(0,ee.jsx)("div",{style:s.wrapper,children:a}):(0,ee.jsx)(ee.Fragment,{children:a})}function Ye(e){let{isLoadingState:t,styles:i}=e;const a=t?"3px 5px":0;return[{key:"device-name",header:(0,ee.jsx)("div",{children:(0,ee.jsx)(u().sA,{id:"manageActiveSessions.table.nameColumn.title",defaultMessage:"Device Name"})}),style:{width:"30%",minWidth:200,padding:a}},{key:"last-seen-time",header:(0,ee.jsxs)("div",{style:i.lastActiveTimeContainer,children:[(0,ee.jsx)(u().sA,{id:"manageActiveSessions.table.lastSeenColumn.title",defaultMessage:"Last Active"}),(0,ee.jsx)(z().A,{renderTooltip:()=>(0,ee.jsx)(u().sA,{id:"manageActiveSessions.table.lastSeenColumn.tooltip",defaultMessage:"This may be delayed by several hours."}),render:e=>(0,ee.jsx)("div",{...e,children:(0,c().$)(i.tooltips)}),placement:j().W.Top,alignment:j().C.Start})]}),style:{width:"25%",padding:a}},{key:"last-login-geographic-location",header:(0,ee.jsx)(u().sA,{id:"manageActiveSessions.table.locationColumn.title",defaultMessage:"Location"}),style:{width:"30%",padding:a}},{key:"logout",header:(0,ee.jsx)(ee.Fragment,{}),style:{width:"10%",padding:a}}]}function Ge(e){const{deviceRows:t,styles:i,storeState:s,shimmerRows:n}=e,o="loading"===s.deviceListLoadingState&&!t.length,r=!o&&!t.length,l=!o&&!r,c=(0,a.useCallback)((e=>{const{sortColumn:t,sortAscending:i}=He.state,a=t!==e||!i;He.setSorting(e,a)}),[]);return(0,ee.jsxs)(ee.Fragment,{children:[o?(0,ee.jsx)(Ke().A,{columns:Ye({isLoadingState:!0,styles:i}),rows:n,tableStyle:i.tableBox,cellStyle:i.cell}):(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(Ke().A,{columns:Ye({isLoadingState:!1,styles:i}).map((e=>({key:e.key,header:(0,ee.jsx)(qe,{column:e.key,header:e.header,onSortableColumnClick:c}),style:e.style}))),rows:t,tableStyle:i.tableBox,cellStyle:i.cell}),r&&(0,ee.jsx)("div",{style:i.noSessionsMessage,children:(0,ee.jsx)(u().sA,{id:"manageActiveSessions.noActiveSessions",defaultMessage:"No active sessions found."})})]}),l&&(0,ee.jsx)(lt,{...e})]})}function Ze(e,t){Ne.setState({...Ne.state,open:!0,singleDeviceLogout:e??!1,deviceName:t})}function Qe(){Ne.setState({...Ne.state,open:!1,singleDeviceLogout:!1,deviceName:void 0})}function Je(){He.loadMoreDevices()}function Xe(){He.setViewDevices()}function et(){const e=(0,n().K8)((()=>Ne.state.open),[]),t=(0,n().K8)((()=>Ne.state.singleDeviceLogout),[]),i=(0,n().K8)((()=>Ne.state.deviceName),[]),s=(0,n().K8)((()=>function(){let e;const{currentUserStore:t}=b().default.state;return t&&(e=t.getEmail()),e}()),[]),r=(0,o().IS)((e=>({container:{width:350,padding:24,display:"flex",flexDirection:"column",alignItems:"center"},descriptionText:{marginBottom:20,textAlign:"center"},button:{width:"100%"},bold:{fontWeight:g().Wy.semibold}})),[]),l=(0,a.useCallback)((e=>(0,ee.jsx)("span",{style:r.bold,children:e})),[r]);return(0,ee.jsx)(q().a,{open:e,onDismiss:Qe,render:()=>(0,ee.jsxs)("div",{style:r.container,children:[(0,ee.jsx)("div",{style:r.descriptionText,children:t?(0,ee.jsx)(u().sA,{id:"manageActiveSessions.confirmationModal.singleDevice",defaultMessage:"You have been logged out from {br}<bold>{deviceName}</bold>",values:{deviceName:i,bold:l,br:(0,ee.jsx)("br",{})}}):s?(0,ee.jsx)(u().sA,{id:"manageActiveSessions.confirmationModal.withEmail",defaultMessage:"You have been logged out from other active sessions for <bold>{email}</bold>",values:{email:s,bold:l}}):(0,ee.jsx)(u().sA,{id:"manageActiveSessions.confirmationModal.withoutEmail",defaultMessage:"You have been logged out from other active sessions for your account."})}),(0,ee.jsx)(G().A,{style:r.button,onClick:Qe,size:"lg",children:(0,ee.jsx)(u().sA,{id:"manageActiveSessions.confirmationModal.close",defaultMessage:"Close"})})]})})}function tt(){const e=(0,s().v3)(),t=(0,n().O$)(He),{device:i}=e,r=(0,o().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:8,alignItems:"center",justifyContent:"center"},descriptionText:{textAlign:"center"},button:{color:"dark"===e.mode?L().Ay.whiteWithAlpha(.81):e.text.secondary,fontSize:12,fontWeight:500,padding:"6px 8px",height:28},personBadgeExclamationMarkIcon:{fill:e.icon.tertiary,width:24,height:24,marginBottom:8}})),[]),l=(0,a.useCallback)((async()=>{const i=(0,ee.jsxs)("div",{style:r.container,children:[(0,Le().G)(r.personBadgeExclamationMarkIcon),(0,ee.jsx)(u().sA,{id:"manageActiveSessions.handleLogoutAllDevicesClick.confirmationMessage",defaultMessage:"<bold>Log out of all devices?</bold>",values:{bold:e=>(0,ee.jsx)("span",{style:{fontWeight:g().Wy.semibold},children:e})}})]}),a=(0,ee.jsx)(u().sA,{id:"manageActiveSessions.handleLogoutAllDevicesClick.acceptLabel",defaultMessage:"Log out"}),s=(0,ee.jsx)(u().sA,{id:"manageActiveSessions.handleLogoutAllDevicesClick.cancelLabel",defaultMessage:"Cancel"}),n=(0,ee.jsx)("div",{style:r.descriptionText,children:(0,ee.jsx)(u().sA,{id:"manageActiveSessions.handleLogoutAllDevicesClick.description",defaultMessage:"You will be logged out of all other active sessions on other devices <bold>except</bold> this one.",values:{bold:e=>(0,ee.jsx)("span",{style:{fontWeight:g().Wy.semibold},children:e})}})}),{accept:o}=await f().Gh({message:i,acceptLabel:a,cancelLabel:s,description:n});if(!o)return;h().hy(e),await N().callApi({eventName:"logoutActiveSessions",environment:e,data:{}});const l=t.allDevices.filter((e=>{var i;return e.id===(null===(i=t.currentDevice)||void 0===i?void 0:i.id)}));He.setDevices(l,!0),Ze(!1)}),[t,e,r]),c=(0,ee.jsx)(u().sA,{id:"manageActiveSessions.logOutAllDevices.title",defaultMessage:"Log out of all devices"}),d=(0,ee.jsx)(u().sA,{id:"manageActiveSessions.logOutAllDevices.label",defaultMessage:"Log out of all other active sessions on other devices besides this one."});return(0,ee.jsx)(X().A,{type:"custom",isMobile:i.isMobile,disableSettingsItemClick:!0,title:c,caption:d,customButton:(0,ee.jsx)(Y().A,{size:"lg",onClick:l,style:r.button,children:(0,ee.jsx)(u().sA,{id:"manageActiveSessions.logOutAllDevices.button",defaultMessage:"Log out of all devices"})})})}function it(e){const t=(0,n().O$)(He),i=(0,n().K8)((()=>He),[]),r=(0,s().v3)(),l=(0,o().IS)((e=>({button:{color:"dark"===e.mode?L().Ay.whiteWithAlpha(.81):e.text.secondary,fontSize:12,fontWeight:500,padding:"6px 8px",height:28,display:"inline-flex",margin:0},container:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,justifyContent:"center"},descriptionText:{textAlign:"center"},confirmationIcon:{fill:e.icon.tertiary,width:24,height:24,marginBottom:8}})),[]),c=(0,a.useCallback)((e=>(0,ee.jsx)(at,{...e})),[]),d=(0,a.useCallback)((async e=>{const a=t.allDevices.find((t=>t.id===e)),s=(0,ee.jsx)(c,{deviceName:(null==a?void 0:a.device_name)??"Unknown Device",containerStyles:l.container,iconStyles:l.confirmationIcon}),n=(0,ee.jsx)(u().sA,{id:"manageActiveSessions.handleLogoutDeviceClick.acceptLabel",defaultMessage:"Log out"}),o=(0,ee.jsx)(u().sA,{id:"manageActiveSessions.handleLogoutDeviceClick.cancelLabel",defaultMessage:"Cancel"}),d=(0,ee.jsx)("div",{style:l.descriptionText,children:(0,ee.jsx)(u().sA,{id:"manageActiveSessions.handleLogoutDeviceClick.description",defaultMessage:"You will be logged out of this device."})}),{accept:g}=await f().Gh({message:s,acceptLabel:n,cancelLabel:o,description:d});if(g&&a){h().hy(r),await N().callApi({eventName:"logoutSingleDeviceSession",environment:r,data:{deviceId:e}});const s=t.allDevices.filter((t=>t.id!==e));i.setDevices(s),Ze(!0,a.device_name)}}),[i,t,r,l,c]);return e.isCurrentDevice?null:(0,ee.jsx)(Y().A,{size:"lg",onClick:()=>d(e.deviceId),style:l.button,children:(0,ee.jsx)(u().sA,{id:"manageActiveSessions.logOutSingleDevice.button",defaultMessage:"Log out"})})}function at(e){return(0,ee.jsxs)("div",{style:e.containerStyles,children:[(0,Le().G)(e.iconStyles),(0,ee.jsx)(u().sA,{id:"manageActiveSessions.handleLogoutDeviceClick.confirmationMessage",defaultMessage:"<bold>Log out of {deviceName}?</bold>",values:{bold:e=>(0,ee.jsx)("span",{style:{fontWeight:g().Wy.semibold},children:e}),deviceName:e.deviceName}})]})}function st(e){const t=(0,u().tz)(),i=(0,a.useMemo)((()=>e.isCurrentDevice?t.formatMessage({id:"manageActiveSessions.lastSeenTime.currentDevice",defaultMessage:"Now"}):function(e,t){const i=Number(e);return Ce().jE(i,Ae().locale,t)}(e.lastSeenTime,t)),[e.lastSeenTime,t,e.isCurrentDevice]);return(0,ee.jsx)(Z().A,{className:"notranslate",isSmall:!0,children:i})}function nt(e){const t=(0,a.useMemo)((()=>{return""===(t=e.location)?"Unknown Location":t;var t}),[e.location]);return(0,ee.jsx)(Z().A,{isSmall:!0,children:(0,ee.jsx)(u().sA,{id:"manageActiveSessions.location",defaultMessage:"{location}",values:{location:t}})})}function ot(e){const{deviceName:t,isCurrentDevice:i}=e,s=(0,o().IS)((e=>({container:{display:"flex",alignItems:"center",gap:8,marginLeft:4},stack:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},thisDeviceBadge:{color:e.blueColor,fontSize:11,fontWeight:400,margin:0}})),[]),n=(0,a.useMemo)((()=>function(e){const t=e.toLowerCase(),i={mac:"macOS",macintosh:"macOS",windows:"Windows Device",iphone:"iPhone",ipad:"iPad",ipod:"iPod",android:"Android Device",cros:"Chrome OS",ubuntu:"Ubuntu",linux:"Linux",unknown:"Unknown Device",motorola:"Motorola Device",intel:"macOS"},a=Object.keys(i);for(const s of a)if(t.includes(s))return i[s];return e}(t)),[t]);return(0,ee.jsxs)("div",{style:s.container,children:[rt({deviceName:t}),(0,ee.jsxs)("div",{style:s.stack,children:[(0,ee.jsx)(Z().A,{className:"notranslate",style:{fontSize:12,fontWeight:400},children:(0,ee.jsx)(u().sA,{id:"manageActiveSessions.deviceName",defaultMessage:"{deviceName}",values:{deviceName:n}})}),i?(0,ee.jsx)("p",{style:s.thisDeviceBadge,children:(0,ee.jsx)(u().sA,{id:"manageActiveSessions.deviceName.currentDeviceBadge",defaultMessage:"This Device"})}):void 0]})]})}function rt(e){const t=(0,o().IS)((e=>({iconStyle:{width:24,height:24,fill:e.icon.tertiary}})),[]),i={intel:()=>(0,Be().k)(t.iconStyle),iphone:()=>ze(t.iconStyle),ipad:()=>ze(t.iconStyle),pixel:()=>ze(t.iconStyle),unknown:()=>(0,Te().z)(t.iconStyle),windows:()=>(0,Be().k)(t.iconStyle)},a=e.deviceName.toLowerCase();for(const s in i)if(a.includes(s))return(0,ee.jsx)(ee.Fragment,{children:i[s]()});return(0,ee.jsx)(ee.Fragment,{children:i.unknown()})}function lt(e){const t=(0,o().IS)((e=>({loadMoreButton:{display:"flex",alignItems:"center",height:30,whiteSpace:"break-spaces",borderBottom:`1px solid ${e.lightDividerColor}`,color:e.text.tertiary,fontSize:14,opacity:.7},arrowIcon:{width:14,height:14,marginLeft:4,marginRight:6,fill:e.icon.tertiary}})),[]),i=e.deviceRows.length<=3,a=e.deviceRows.length===e.storeState.allDevices.length;return(0,ee.jsxs)(Re().A,{style:t.loadMoreButton,onClick:i?Je:Xe,children:[a?null:i?(0,Me().P)(t.arrowIcon):(0,Pe().q)(t.arrowIcon),(0,ee.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginLeft:i?4:8,fontSize:12},children:i?(0,ee.jsx)(u().sA,{id:"manageActiveSessions.loadMoreButton",defaultMessage:"{numberOfDevicesLeft, plural, =0 {All devices loaded} one {Load # more device} other {Load # more devices}}",values:{numberOfDevicesLeft:e.storeState.allDevices.length-e.deviceRows.length}}):(0,ee.jsx)(u().sA,{id:"manageActiveSessions.retractLoadMoreButton",defaultMessage:"Show fewer devices"})})]})}var ct=()=>i(30580),dt=()=>i(461857),ut=()=>i(364671),gt=()=>i(955302),mt=()=>i(318575),ht=()=>i(538669),ft=()=>i(334711);function vt(e){let{status:t,numMfaSettings:i,onReloadSettings:r,regenerateBackupCodes:l}=e;const c=(0,s().v3)(),[{rootStateMachine:d,settingsStateMachine:m,totpStateMachine:h,smsStateMachine:f,backupCodesStateMachine:v}]=(0,a.useState)((()=>{const e=new(dt().q)(c),t={totpStore:new(ft().$),settingsStore:new(mt().r),smsStore:new(ht().N),backupCodesStore:new(ct().Y),rootStore:new(gt().y)};return{mfaService:e,rootStateMachine:new(gt().J)(t.rootStore),settingsStateMachine:new(mt().U)(t.settingsStore,e),totpStateMachine:new(ft().U)(t.totpStore,e),smsStateMachine:new(ht().G)(t.smsStore,e),backupCodesStateMachine:new(ct().b)(t.backupCodesStore,e)}})),p=c.device.isMobile,S=(0,o().IS)((e=>({configureButton:{marginTop:p?12:0,marginBottom:p?4:0},regenerateBackupCodesBadge:{fontWeight:g().Wy.medium,letterSpacing:0,fontSize:11,color:e.blueColor,background:"light"===e.mode?L().Ay.diffBackground:"rgba(35, 131, 226, 0.2)",whiteSpace:"nowrap",width:"fit-content"}})),[p]),x=(0,n().K8)((()=>A().A.state.highlightedSetting===A().r.TwoStepVerification),[]);return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(X().A,{type:"custom",customButton:(0,ee.jsx)("div",{style:{marginTop:12},children:(0,ee.jsx)(Y().A,{size:"lg",onClick:()=>{!function(e){let{rootStateMachine:t,settingsStateMachine:i}=e;t.rootShowSettings({refresh:!1,startConfirmIdentity:()=>i.settingsConfirmIdentityForSettings()})}({rootStateMachine:d,settingsStateMachine:m})},style:S.configureButton,disabled:"disabled"===t,children:"on"===t?(0,ee.jsx)(u().sA,{id:"profileSettings.accountSecuritySection.changeTwoStepVerificationSettingButton.label",defaultMessage:"Change verification methods"}):(0,ee.jsx)(u().sA,{id:"profileSettings.accountSecuritySection.addTwoStepVerificationSettingButton.label",defaultMessage:"Add verification method"})})}),isMobile:!1,title:(0,ee.jsx)(u().sA,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.label",defaultMessage:"2-step verification"}),caption:"on"===t?(0,ee.jsx)(u().sA,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.settingConfigured.message",defaultMessage:"You have {numMfaSettings} verification methods turned on.",values:{numMfaSettings:i}}):(0,ee.jsx)(u().sA,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.message",defaultMessage:"Add an additional layer of security to your account during login."}),tooltipLabel:(0,ee.jsx)(u().sA,{id:"profileSettings.accountSecuritySection.twoStepVerificationSettingButton.tooltip",defaultMessage:"A password is required to enable 2-step verification"}),disableTooltip:"disabled"!==t,badge:l&&(0,ee.jsx)(E().A,{style:S.regenerateBackupCodesBadge,content:(0,ee.jsx)(u().sA,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.regenerateBackupCodes.badge",defaultMessage:"Regenerate backup codes"})}),shouldHighlight:x}),(0,ee.jsx)(ut().A,{onReloadSettings:r,rootStateMachine:d,settingsStateMachine:m,totpStateMachine:h,smsStateMachine:f,backupCodesStateMachine:v})]})}var pt=()=>i(862961),St=()=>i(243923),xt=()=>i(843878),yt=()=>i(8178),jt=()=>i(101919),bt=()=>i(289251);const wt=r().Store.createClass(!1,{name:"IsEducationStore"});function At(e){let{spaceProfileSettingsStore:t,isEducationPlan:i}=e;const o=(0,u().tz)(),r=(0,s().v3)(),l=(0,n().uB)(void 0,wt);return(0,a.useEffect)((()=>{!async function(){const{currentUserStore:e,currentUserSettingsStore:i,currentUserRootStore:a,currentSpaceStore:s}=b().default.state;if(e&&i){const a=t.getValueForUser(e,i,o);a&&t.setState({...t.state,...a})}if(a&&s){const e=await(0,D().eq)({environment:r,userRootStore:a}),t=s.canAdmin()&&(e||[]).some((e=>"student"===e));l.setState(t)}await v().Q(r,t)}()}),[r,o,l,t]),(0,a.useEffect)((()=>()=>{A().A.state.highlightedSetting&&A().A.setState({...A().A.state,highlightedSetting:void 0})}),[]),(0,ee.jsx)(zt,{spaceProfileSettingsStore:t,isEducationPlan:i,isEducationStore:l})}function Ct(e){const{emailDomainForUser:t,spaceProfileSettingsStore:i,areProfileEditsDisabled:a}=e,o=(0,n().K8)((()=>{var e;return Boolean(null===(e=i.state.emailDomainSettings)||void 0===e?void 0:e.isDomainVerified)}),[i]),r=(0,s().v3)(),l=(0,n().K8)((()=>(0,C().xu)(r)),[r]);return(0,ee.jsxs)(yt().A,{large:!0,divider:"full",children:[o?(0,ee.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",margin:"0 0 8px"},children:[(0,ee.jsx)(E().A,{style:{fontWeight:g().Wy.medium,letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",margin:0},content:(0,ee.jsx)(u().sA,{id:"profileSettings.myProfile.managedByline",defaultMessage:"Your account is managed by {domain}",values:{domain:t}})}),a?(0,ee.jsx)(z().A,{render:e=>(0,ee.jsx)("div",{...e,children:(0,d().G)({marginLeft:4,height:14,width:14,opacity:.5})}),renderTooltip:()=>(0,ee.jsx)(u().sA,{id:"profileSettings.myProfile.managedByTooltip",defaultMessage:"Contact your organization's administrator to change your profile information."})}):null]}):null,l?(0,ee.jsx)(u().sA,{id:"profileSettings.myAccount.title",defaultMessage:"Account"}):(0,ee.jsx)(u().sA,{id:"profileSettings.myProfile.title",defaultMessage:"My profile"})]})}function Dt(e){let{spaceProfileSettingsStore:t}=e;const i=(0,o().IS)((e=>({allDevicesHelpIcon:{height:14,width:15,color:e.icon.tertiary},headerContainer:{display:"flex",alignItems:"center",gap:4}})),[]),[a,r]=(0,n().K8)((()=>{var e;return[(null===(e=t.state.emailDomainSettings)||void 0===e?void 0:e.settings)??{},t.state.emailDomainSettings]}),[t]),l=(0,s().v3)(),d=(0,n().K8)((()=>(0,C().xu)(l)),[l]);return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(yt().A,{large:!0,divider:"full",children:(0,ee.jsx)(u().sA,{id:"profileSettings.support.title",defaultMessage:"Support"})}),(0,ee.jsx)(bt().A,{emailDomainSettings:a}),(0,ee.jsx)(P().A,{size:18,isHidden:!0}),(0,ee.jsx)(M().A,{userEmailDomainSettings:r}),(0,ee.jsx)(P().A,{size:d?48:14,isHidden:!0}),(0,ee.jsx)(yt().A,{large:!0,divider:"full",children:(0,ee.jsxs)("div",{style:i.headerContainer,children:[(0,ee.jsx)(u().sA,{id:"profileSettings.devices.title",defaultMessage:"Devices"}),(0,ee.jsx)(z().A,{renderTooltip:()=>(0,ee.jsx)(u().sA,{id:"profileSettings.devices.tooltip",defaultMessage:"All devices logged in to your Notion account."}),render:e=>(0,ee.jsx)("div",{...e,children:(0,c().$)(i.allDevicesHelpIcon)}),placement:j().W.Top,alignment:j().C.Start})]})}),(0,ee.jsx)(tt,{}),(0,ee.jsx)(P().A,{size:20,isHidden:!0}),(0,ee.jsx)($e,{})]})}function Mt(e,t){h().EA(t),S().Bz({environment:t,onStart:()=>function(e){e.setState({...e.state,uploadingProfilePhoto:!0})}(e),bucket:"public",onError:()=>function(e){e.setState({...e.state,uploadingProfilePhoto:!1}),f().f1((0,ee.jsx)(u().sA,{id:"profileSettings.profilePhotoSection.uploadProfilePhotoError.message",defaultMessage:"Upload failed."}))}(e),onComplete:i=>function(e,t,i){const a=e[0];t.setState({...t.state,profilePhoto:a,uploadingProfilePhoto:!1}),p().createAndCommit({userAction:"SpaceProfileSettings.handleUploadComplete",environment:i,canUndo:!0,perform:e=>{const{currentUserStore:t}=b().default.state;t&&m().b({userStore:t,data:{profilePhoto:a},transaction:e})}})}(i,e,t),accept:"image/*"})}function Et(e){const t=(0,s().v3)(),{userName:i,emailDomainForUser:a,areProfileEditsDisabled:n,spaceProfileSettingsStore:o}=e;return n?(0,ee.jsx)(z().A,{renderTooltip:()=>(0,ee.jsx)(u().sA,{id:"editableUserAvatar.profilePhoto.disabledByOrganization",defaultMessage:"Profile editing has been disabled by your organization, {emailDomain}",values:{emailDomain:a}}),placement:j().W.Bottom,alignment:j().C.Center,render:e=>(0,ee.jsx)("div",{...e,style:{opacity:.4},children:(0,ee.jsx)(k().A,{disabled:!0,value:i})})}):(0,ee.jsx)(k().A,{value:i,onChange:e=>function(e,t,i){const a=e.target.value;(0,x().r)(a)&&(h().x8(i,{from:t.state.name,to:a}),t.setState({...t.state,name:a}),p().createAndCommit({userAction:"SpaceProfileSettings.handleNameChange",environment:i,canUndo:!0,perform:e=>{const{currentUserStore:t}=b().default.state;t&&m().b({userStore:t,data:{name:a},transaction:e})}}))}(e,o,t)})}function Pt(e){let{currentUserValue:t,spaceProfileSettingsStore:i,isEducationPlan:o,isEducationStore:r}=e;const l=(0,s().v3)(),c=(0,n().K8)((()=>i.state.accountSettings),[i]),d=(0,n().K8)((()=>{var e;return Boolean(null===(e=i.state.emailDomainSettings)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.prevent_profile_edits)}),[i]),g=(0,a.useCallback)((()=>{v().Q(l,i)}),[l,i]),m=(0,n().O$)(r);return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(yt().A,{large:!0,divider:"full",children:(0,ee.jsx)(u().sA,{id:"profileSettings.accountSecurity.title",defaultMessage:"Account security"})}),(0,ee.jsx)(ae,{userValue:t,hasEducationPlan:m,areProfileEditsDisabled:d}),(0,ee.jsx)(P().A,{size:18,isHidden:!0}),(0,ee.jsx)(St().A,{hasPassword:c.hasPassword,hasPasswordActions:c.canConfigurePassword,isEducationPlan:o,samlEnforced:c.isSamlEnforced,email:t.email,isError:Boolean(c.error),onReloadSettings:g,mfaStatus:c.mfaStatus}),(0,ee.jsx)(P().A,{size:18,isHidden:!0}),(0,ee.jsx)(vt,{status:c.mfaStatus,numMfaSettings:c.numMfaSettings,onReloadSettings:g,regenerateBackupCodes:c.regenerateBackupCodes}),(0,ee.jsx)(P().A,{size:18,isHidden:!0}),(0,ee.jsx)(pt().A,{samlEnforced:c.isSamlEnforced,hasPasskeys:c.hasPasskeys})]})}function kt(e){const{userName:t,currentUserStore:i,currentUserValue:a,spaceProfileSettingsStore:o,isEducationPlan:r,isEducationStore:c}=e,d=(0,s().v3)(),g=(0,u().tz)(),h=(0,n().K8)((()=>(0,B().Ew)(i,g)),[i,g]),f=(0,l().zN)(a.email),v=(0,n().K8)((()=>{var e;return Boolean(null===(e=o.state.emailDomainSettings)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.prevent_profile_edits)}),[o]),S=(0,n().O$)(w().e),x=(0,n().K8)((()=>(0,C().xu)(d)),[d]);return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(Ct,{spaceProfileSettingsStore:o,emailDomainForUser:f,areProfileEditsDisabled:v}),(0,ee.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,ee.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,ee.jsx)(B().Ay,{size:60,avatarType:h,isOffline:!S,onUploadProfilePhoto:()=>Mt(o,d),onRemoveProfilePhoto:()=>function(e,t){e.setState({...e.state,profilePhoto:void 0}),p().createAndCommit({userAction:"SpaceProfileSettings.handleRemoveProfilePhoto",environment:t,canUndo:!0,perform:e=>{const{currentUserStore:t}=b().default.state;t&&m().b({userStore:t,data:{profilePhoto:null},transaction:e})}})}(o,d),disabled:v,disabledTooltipMessage:(0,ee.jsx)(u().sA,{id:"editableUserAvatar.profilePhoto.disabledByOrganization",defaultMessage:"Profile editing has been disabled by your organization, {emailDomain}",values:{emailDomain:f}})}),(0,ee.jsxs)("div",{style:{marginLeft:20,width:250},children:[(0,ee.jsx)(jt().A,{children:(0,ee.jsx)(u().sA,{id:"profileSettings.personalInfoSection.nameInput.label",defaultMessage:"Preferred name"})}),(0,ee.jsx)(Et,{spaceProfileSettingsStore:o,userName:t,emailDomainForUser:f,areProfileEditsDisabled:v})]})]}),(0,ee.jsx)(Bt,{avatarType:h,spaceProfileSettingsStore:o,areProfileEditsDisabled:v})]}),(0,ee.jsx)(P().A,{size:48,isHidden:!0}),(0,ee.jsx)(Pt,{spaceProfileSettingsStore:o,isEducationPlan:r,isEducationStore:c,currentUserValue:a}),(0,ee.jsx)(P().A,{size:x?48:12,isHidden:!0}),(0,ee.jsx)(Dt,{spaceProfileSettingsStore:o})]})}function zt(e){let{spaceProfileSettingsStore:t,isEducationPlan:i,isEducationStore:a}=e;const s=(0,y().$)(),o=(0,n().K8)((()=>s?s.getValue():void 0),[s]),r=(0,n().K8)((()=>t.state.name),[t]);return s&&o?(0,ee.jsx)(xt().Ay,{children:(0,ee.jsx)(kt,{spaceProfileSettingsStore:t,isEducationPlan:i,isEducationStore:a,currentUserStore:s,currentUserValue:o,userName:r})}):null}function Bt(e){const{avatarType:t,spaceProfileSettingsStore:i,areProfileEditsDisabled:a}=e,n=(0,o().DP)(),r=(0,s().v3)();return"photo"===t.type||a?a?null:(0,ee.jsx)("div",{style:{color:n.icon.secondary,fontSize:14,marginTop:8},children:(0,ee.jsx)(u().sA,{id:"editableUserAvatar.profilePhoto.addNotionFace",defaultMessage:"<createface>Create your portrait</createface>",values:{createface:e=>(0,ee.jsx)(Q().A,{color:n.blueColor,disableUnderline:!0,disableHover:!0,external:!0,href:"https://faces.notion.com",children:e})}})}):(0,ee.jsx)("div",{style:{color:n.icon.secondary,fontSize:14,marginTop:8},children:(0,ee.jsx)(u().sA,{id:"editableUserAvatar.profilePhoto.addPhotoWithNotionFace",defaultMessage:"<addphoto>Add photo</addphoto> or <createface>Create your portrait</createface>",values:{addphoto:e=>(0,ee.jsx)(Q().A,{color:n.blueColor,disableUnderline:!0,disableHover:!0,onClick:()=>{Mt(i,r)},children:e}),createface:e=>(0,ee.jsx)(Q().A,{color:n.blueColor,disableUnderline:!0,disableHover:!0,external:!0,href:"https://faces.notion.com",children:e})}})})}},823274:(e,t,i)=>{i.d(t,{k:()=>s});i(296540);var a=i(474848);const s=(0,i(340498).wt)("laptop",{viewBox:"0 0 64 64",svg:(0,a.jsx)("path",{d:"m54,40H10v-24c0-2.47,1.53-4,4-4h36c2.47,0,4,1.53,4,4v24Zm-50,4c0,4.94,3.06,8,8,8h40c4.94,0,8-3.06,8-8H4Z"})})}}]);