"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[62342],{59424:(e,n,o)=>{o.r(n),o.d(n,{estimateWillSkipTeamOnly:()=>S,getContextualizedOnboardingAnalyticsData:()=>c,getSpaceIntentOverride:()=>_,getStageName:()=>s,getStages:()=>d,isEducationFlowState:()=>u,isPublicAccessPageRedirect:()=>f,isWorkflowTemplatesEnabledForOnboarding:()=>y,shouldRedirectToJoinSpace:()=>p,shouldShowProgressIndicatorOnStage:()=>m,shouldShowWorkspaceInWorkspaceChooser:()=>v,shouldSkipStageTeamOnly:()=>g});o(16280);var t=()=>o(313127),i=()=>o(640653),r=()=>o(765957),a=()=>o(151168),l=()=>o(757156);function s(e){const{flowName:n,stageIndex:o,environment:t}=e;return d({flowName:n,environment:t})[o]}function d(e){let{flowName:n,environment:o}=e;const t=o.device.isMobile,i=l().onboardingFlowNameToFlowConfig[n];if(t){if(!i.isEnabledForMobile)throw new Error(`Mobile flow is not enabled for flow name: ${n}`);return i.getMobileStages(o)}if(!i.isEnabledForDesktop)throw new Error(`Desktop flow is not enabled for flow name: ${n}`);return i.getDesktopStages()}function u(e){var n,o;return"education_flow"===e.flowName&&void 0!==(null===(n=e.planTypeAndSurveyInfo)||void 0===n||null===(n=n.surveyResponses)||void 0===n?void 0:n.educationRole)&&void 0!==(null===(o=e.planTypeAndSurveyInfo)||void 0===o||null===(o=o.surveyResponses)||void 0===o?void 0:o.educationLevel)}function c(e){var n,o,t,l,d,u,c;let{onboardingState:p,spaceJoinOrCreate:v,environment:f}=e;const{currentSpaceStore:_}=r().default.state,m=(0,i().p3)(),y=(null===(n=p.planTypeAndSurveyInfo)||void 0===n||null===(n=n.surveyResponses)||void 0===n?void 0:n.userPersona)??m.function,g=(null===(o=p.planTypeAndSurveyInfo)||void 0===o||null===(o=o.surveyResponses)||void 0===o?void 0:o.userRole)??m.role,S=(null===(t=p.planTypeAndSurveyInfo)||void 0===t||null===(t=t.surveyResponses)||void 0===t?void 0:t.companySize)??m.companySize,b=(null===(l=p.planTypeAndSurveyInfo)||void 0===l?void 0:l.planType)??m.intent,w=(null===(d=p.planTypeAndSurveyInfo)||void 0===d||null===(d=d.surveyResponses)||void 0===d?void 0:d.useCases)??m.useCases,I=(null===(u=p.planTypeAndSurveyInfo)||void 0===u||null===(u=u.surveyResponses)||void 0===u?void 0:u.categories)??m.categories,T=(null===(c=p.planTypeAndSurveyInfo)||void 0===c?void 0:c.collaborativeIntent)??m.collaborativeIntent;return{flow_name:p.flowName,flow_id:p.flowId,stage:s({flowName:p.flowName,stageIndex:p.currentStageIndex,environment:f}),initial_workspace_type:v,is_new_onboarding:Boolean(p.isFirstTimeOnboarding),is_create_or_join:!0,stage_number:p.currentStageIndex,num_of_joinable_spaces:p.joinableSpaces.length,historical_stages:p.historicalStages,selectedPresets:void 0,user_persona:y,user_team_role:g,user_use_cases:w,user_categories:I,user_company_size:S,plan_selection:b,collaborative_intent:T,plan_type:null==_?void 0:_.getPlanType(),stage_duration_in_ms:void 0,onboarding_templates:void 0,trial_id:(0,a().vy)((0,a().E5)()),performance_marketing_term:p.performanceMarketingTerm,is_invalid_redirect:p.isInvalidRedirect,is_dark_mode:"dark"===f.ThemeStore.state.mode,selected_workflow_templates:p.selectedWorkflowTemplateIds}}function p(e){return"guest_redirect"===e.type||"redirect_page"===e.type||"redirect_space"===e.type}function v(e){return["CAN_JOIN","CAN_REQUEST"].includes(e.joinabilityStatus)}function f(e){return"public_access_page_redirect"===e.type}function _(e){if("form_response_onboarding"===e.flowName)return"string"==typeof(n=e.formSpaceIntent)&&t().ay.includes(n)?e.formSpaceIntent:"personal";var n}function m(e,n,o){const t=o.device.isMobile,{currentStageIndex:i}=e,r=d({flowName:e.flowName,environment:o}),a=r.indexOf(t?"mobile_onboarding_plan_type_choose":"onboarding_plan_type_choose");if(-1===a)return!1;if(n){const e=r.indexOf(t?"mobile_profile":"profile");return-1!==e&&i>=e}return i>=a}function y(e){return!e.device.isMobile}function g(e){var n;return"team"!==(null===(n=e.planTypeAndSurveyInfo)||void 0===n?void 0:n.planType)}function S(e,n,o){var t;const i=null===(t=e.planTypeAndSurveyInfo)||void 0===t?void 0:t.planType;switch(o){case"team":return Boolean(i&&"team"!==i);case"personal":case"school":return"team"!==i}}}}]);