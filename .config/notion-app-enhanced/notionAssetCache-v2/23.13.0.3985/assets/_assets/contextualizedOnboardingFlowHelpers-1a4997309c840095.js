"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[11126],{285518:(o,e,n)=>{n.d(e,{R:()=>t});n(898992),n(354520),n(581454);var a=()=>n(496603);function t(o){return o&&o.isReady()?a().sb(o.getSpaceViewStores().filter((o=>o.getJoined())).map((o=>o.getSpaceId()))).length:void 0}},322920:(o,e,n)=>{n.r(e),n.d(e,{getContextualizedOnboardingFlowName:()=>r,getMobileTutorialStages:()=>l});var a=()=>n(820103),t=()=>n(47373),i=()=>n(757156);async function r(o,e){for(const n of a().uL){const a=i().onboardingFlowNameToFlowConfig[n],t=o.device.isMobile,{isEnabledForMobile:r,isEnabledForDesktop:l}=a;if((t&&r||!t&&l)&&await a.shouldShowFlowToUser(o,e))return n}return a().JT}function l(o){switch((0,t().DV)({environment:o})){case"v1":return["mobile_onboarding_home","mobile_onboarding_creation","mobile_onboarding_share","mobile_onboarding_multi_platform"];case"v2":return["mobile_onboarding_home","mobile_onboarding_creation","mobile_onboarding_share"];case"v3":return["mobile_onboarding_skill_mab","mobile_onboarding_skill_filing","mobile_onboarding_skill_swipe"];default:return["mobile_onboarding_editor","mobile_onboarding_sidebar","mobile_onboarding_desktop","mobile_onboarding_web_clipper","mobile_onboarding_app_download"]}}},757156:(o,e,n)=>{n.r(e),n.d(e,{onboardingFlowNameToFlowConfig:()=>p});var a=n.n(n(794148)),t=()=>n(677338),i=()=>n(867899),r=()=>n(496414),l=()=>n(780054),s=()=>n(285518),d=()=>n(144114),_=()=>n(765957),b=()=>n(589994),g=()=>n(151168),c=()=>n(322920),m=()=>n(235921);const p={partner_program_onboarding_flow:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>["profile","offer_eligibility_workspace_choose","onboarding_plan_type_choose","onboarding_collaborative_intent_choose","onboarding_category_survey","team_onboarding_persona_survey","team_onboarding_use_cases","team_onboarding_workspace_create","partner_program_onboarding_checkout"],getMobileStages:o=>["mobile_partner_program_redeem_info","mobile_profile","mobile_onboarding_workspace_choose","mobile_onboarding_plan_type_choose","mobile_onboarding_collaborative_intent_choose","mobile_team_onboarding_function","mobile_team_onboarding_role","mobile_team_onboarding_company_size","mobile_onboarding_category_survey","mobile_team_onboarding_use_cases","mobile_team_onboarding_workspace_create","mobile_team_onboarding_invite",...(0,c().getMobileTutorialStages)(o)],onStartFlow:()=>{},onCompleteFlow:async(o,e,n)=>{if("partner_program_onboarding_flow"!==e.flowName||!e.onboardingData)return;if((0,t().fu)(),e.selectedEligibleWorkspaceId){var a,r;const{redirectAfterContextualizedOnboardingComplete:n}=await i().F.contextualizedOnboardingActions.load(),t=(0,d().sg)(e.onboardingData);return void(await n({environment:o,spaceViewId:null===(a=_().default.state.currentSpaceViewStore)||void 0===a?void 0:a.id,spaceId:null===(r=_().default.state.currentSpaceStore)||void 0===r?void 0:r.id,onboardingData:e.onboardingData,spaceJoinOrCreate:"join",redirectData:t,onboardingFlow:e.flowName,onboardingState:e,permissionLevel:(0,d().S1)(t)}))}const{defaultOnboardingComplete:l}=await i().F.contextualizedOnboardingActions.load();await l(o,n)},shouldShowFlowToUser:o=>void 0!==(0,t().OC)()},education_flow:{isEnabledForDesktop:!0,isEnabledForMobile:!1,getDesktopStages:()=>["profile","onboarding_workspace_choose","education_persona_survey","education_category_picker"],onStartFlow:()=>{},shouldShowFlowToUser:o=>!1},meeting_notes_flow:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>["profile","onboarding_workspace_choose","onboarding_plan_type_choose","onboarding_collaborative_intent_choose","team_onboarding_workspace_create","team_onboarding_timed_trial_checkout"],getMobileStages:o=>["mobile_profile","mobile_onboarding_workspace_choose","mobile_onboarding_plan_type_choose","mobile_onboarding_collaborative_intent_choose","mobile_team_onboarding_workspace_create"],onStartFlow:()=>{},shouldShowFlowToUser:(o,e)=>0===((0,s().R)(_().default.state.currentUserRootStore)??0)&&"meeting_notes"===(0,t().J0)()},form_response_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>["profile","onboarding_workspace_choose"],getMobileStages:()=>["mobile_profile","mobile_onboarding_workspace_choose"],onStartFlow:()=>{},onCompleteFlow:async(o,e,t)=>{a()("form_response_onboarding"===e.flowName);const{defaultOnboardingComplete:r}=await i().F.contextualizedOnboardingActions.load();await r(o,t),n(464510).V(e.formResponseId,e.secretKey,e.formSpaceId)},shouldShowFlowToUser:()=>0===(0,s().R)(_().default.state.currentUserRootStore)&&(0,n(326406).A)()},mail_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>[],getMobileStages:()=>[],onStartFlow:()=>{},onCompleteFlow:async(o,e,a)=>{const{setAndTrackContextualizedOnboardingComplete:s}=await i().F.contextualizedOnboardingActions.load(),{onboardingData:_,joinableSpaces:g}=e;if(!_)return;const{onboardingStateActions:c}=await n(935370).onboardingActionsDependency.load();if(r().m({message:c.messages.creatingWorkspace}),0===g.length&&_.canUserCreateSpace){const a=n(972435).A.getIntl(),t=_.userStore.getFullName(a),{spaceViewStore:i}=await n(426116).bz({environment:o,planType:"personal",planSelection:"personal",name:t?(0,d().JR)(t,a):(0,d().CD)(a),userRootStore:_.userRootStore,analyticsFrom:"onboarding",icon:void 0,userPersona:"unfilled"});n(72234).I$(o,i,!0),s({environment:o,onboardingState:e,userStore:_.userStore,spaceJoinOrCreate:"create",permissionLevel:"member"})}await b().transactionQueue.drain(),r().V();const m=(0,t().dw)();n(857639).log({data:{miscDataToConvertToString:{from:"getPostOnboardingRedirectURL",redirectUrl:m}},from:"contextualizedOnboardingflowDefinitions",level:"debug",type:"mail_onboarding:onCompleteFlow"});const p=null==m?void 0:m.startsWith(`${l().A.mail.domainBaseUrl}/`);Boolean(m&&p)?n(435009).oo({environment:o,url:`${m}?from=contextualizedOnboarding2#activeUserID=${o.currentUser.id}`}):await(0,n(838824).Z)({environment:o,from:"contextualizedOnboarding",targetSelf:!0})},shouldShowFlowToUser:()=>"mail"===(0,t().dY)()},calendar_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>["profile"],getMobileStages:()=>["mobile_profile"],onStartFlow:()=>{},onCompleteFlow:async(o,e,a)=>{await b().transactionQueue.drain(),await(0,n(645200).J7)({environment:o,url:`${l().A.domainBaseUrl}/calendarAuth/`,from:"contextualizedOnboarding",targetSelf:!0})},shouldShowFlowToUser:()=>0===(0,s().R)(_().default.state.currentUserRootStore)&&"calendar"===(0,t().dY)()},performance_marketing_term_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!1,getDesktopStages:()=>["profile","onboarding_workspace_choose","onboarding_plan_type_choose","onboarding_collaborative_intent_choose","team_onboarding_invite"],onStartFlow:()=>{},onCompleteFlow:async(o,e,n)=>{const{defaultOnboardingComplete:a}=await i().F.contextualizedOnboardingActions.load();await a(o,n)},shouldShowFlowToUser:o=>!o.device.isMobile&&("gantt"===(0,g().TQ)()||"crm"===(0,g().TQ)()||"projectManagement"===(0,g().TQ)())},mobile_tutorial_onboarding:{isEnabledForDesktop:!1,isEnabledForMobile:!0,getMobileStages:o=>(0,c().getMobileTutorialStages)(o),onStartFlow:()=>{},onCompleteFlow:async(o,e,n)=>{var a,t;const r=e.onboardingData;if(!r)return;const{redirectAfterContextualizedOnboardingComplete:l}=await i().F.contextualizedOnboardingActions.load(),s=(0,d().sg)(r);await l({environment:o,spaceViewId:null===(a=_().default.state.currentSpaceViewStore)||void 0===a?void 0:a.id,spaceId:null===(t=_().default.state.currentSpaceStore)||void 0===t?void 0:t.id,onboardingData:r,spaceJoinOrCreate:"join",redirectData:s,onboardingFlow:e.flowName,onboardingState:e,permissionLevel:(0,d().S1)(s)})},shouldShowFlowToUser:(o,e)=>Boolean(e)},mobile_promote_app_download:{isEnabledForDesktop:!1,isEnabledForMobile:!0,getMobileStages:o=>["mobile_onboarding_promote_app_download"],onStartFlow:()=>{},onCompleteFlow:()=>{},shouldShowFlowToUser:(o,e)=>0===(0,s().R)(_().default.state.currentUserRootStore)&&"required_to_download"===(0,n(47373).el)({environment:o})},default:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>{const o="on"===u({experimentId:"onboarding_split_team_survey",disableExposureLogging:!0})?["team_onboarding_function","team_onboarding_role","team_onboarding_company_size"]:["team_onboarding_persona_survey"],e="on"===u({experimentId:"adoption_diy_onboarding_template",disableExposureLogging:!0});return["profile","onboarding_workspace_choose","onboarding_plan_type_choose","onboarding_collaborative_intent_choose",e?"onboarding_use_case_picker":"onboarding_category_survey","desktop_onboarding_promote_app_download","onboarding_calendar_signup",...o,e?"team_onboarding_use_case_picker":"team_onboarding_use_cases","team_onboarding_workspace_create","team_onboarding_invite","team_onboarding_timed_trial_offer","team_onboarding_timed_trial_checkout","team_desktop_onboarding_promote_app_download"]},getMobileStages:o=>["mobile_onboarding_promote_app_download",...["mobile_profile","mobile_onboarding_workspace_choose","mobile_onboarding_plan_type_choose","mobile_onboarding_collaborative_intent_choose",..."on"===u({experimentId:"onboarding_split_team_survey",disableExposureLogging:!0})?["mobile_team_onboarding_function","mobile_team_onboarding_role","mobile_team_onboarding_company_size"]:["mobile_team_onboarding_persona_survey"],"mobile_onboarding_category_survey","mobile_team_onboarding_use_cases","mobile_team_onboarding_workspace_create","mobile_team_onboarding_invite"],...(0,c().getMobileTutorialStages)(o)],onStartFlow:()=>{},shouldShowFlowToUser:(o,e)=>(void 0===(0,s().R)(_().default.state.currentUserRootStore)&&(0,n(2220).u)({environment:o,event:{eventName:"onboarding_undefined_space_view_count",eventProperties:{}}}),!e)},undefined:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>[],getMobileStages:()=>[],onStartFlow:()=>{},onCompleteFlow:async()=>{},shouldShowFlowToUser:()=>!1}};function u(o){const{experimentId:e,disableExposureLogging:a}=o,t=m().A.state.onboardingExperiments;if(null!=t&&t[e])return t[e];const i=n(217429).default.getEligibleGroup({experimentId:e,defaultGroup:"control",disableExposureLogging:a});return m().A.setState({...m().A.state,onboardingExperiments:{...t,[e]:i}}),i}}}]);