"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[66806],{162547:(e,t,s)=>{s.d(t,{s:()=>o});var r=()=>s(755362),i=()=>s(1130);async function o(e){const{environment:t,panelType:s}=e;(0,r().e)(t,{panel_type:s,action_type:"create"}),await i().sy(t,{type:"create-or-join",source:"public_share_link"})}},369251:(e,t,s)=>{s.d(t,{A:()=>M,k:()=>x});var r=s(296540),i=()=>s(484714),o=()=>s(56366),a=()=>s(401497),n=()=>s(959013),u=()=>s(284371),l=()=>s(134696),c=()=>s(449506),p=()=>s(436572),d=()=>s(640653),g=()=>s(765957),C=()=>s(159026),m=()=>s(805751),b=()=>s(623580),h=()=>s(864943),y=()=>s(204063),f=s(474848);function x(e){const t=(0,i().v3)(),{onDismiss:s}=e,[x,M]=(0,r.useState)(""),j=(0,n().tz)(),A=(0,a().IS)((()=>({container:{padding:20,width:350,paddingBottom:15},title:{fontWeight:u().Wy.medium,marginBottom:10},input:{width:"100%",padding:"8px 12px",marginTop:10,marginBottom:10},button:{width:"100%",marginTop:10}})),[]),{currentSpaceStore:_}=(0,o().K8)((()=>({currentSpaceStore:g().default.state.currentSpaceStore})),[]),k=(0,o().K8)((()=>_?(0,d().GK)(t,_):"workspace"),[t,_]);return(0,f.jsxs)("div",{style:A.container,children:[(0,f.jsx)("div",{style:A.title,children:(0,f.jsx)(n().sA,{id:"GuestMembershipRequestModal.title",defaultMessage:"Request membership to {workspaceName}",values:{workspaceName:k}})}),(0,f.jsxs)(m().A,{debugName:"GuestMembershipRequestModal",capture:!0,allowEsc:!0,children:[(0,f.jsx)(b().A,{style:A.input,textarea:!0,value:x,placeholder:j.formatMessage({id:"GuestMembershipRequestModal.message.placeholder",defaultMessage:"Reason (optional)"}),onChange:e=>{M(e.target.value)}}),(0,f.jsx)(y().A,{size:"lg",style:A.button,onClick:()=>{const{currentUser:e}=t;e&&e.id&&_&&(l().RH(t,{invite_flow_id:void 0,user_count:1,new_user_count:1,is_bot:!1,space_role:"read_and_write",invite_message_length:x.length,invite_space_role_selection:C().NJ.request_workspace_member,from:"sidebar_guest_request"}),c().callApi({eventName:"requestAccess",environment:t,data:{type:"actor-to-space",forActorId:e.id,spaceId:_.id,message:x,attributes:{origin_id:_.id,origin_type:"sidebar_guest_request",origin_table:"space",add_permissions_on_approval:!1}}}).catch((()=>{p().D6({label:(0,f.jsx)(n().sA,{id:"guestMembershipRequestModal.confirmationToast.errorMessage",defaultMessage:"Failed to send membership request."})})})).finally((()=>{p().D6({label:(0,f.jsx)(n().sA,{id:"guestMembershipRequestModal.confirmationToast.successMessage",defaultMessage:"Sent membership request."})})})),M(""),s())},children:(0,f.jsx)(n().sA,{id:"GuestMembershipRequestModal.sendRequest.button",defaultMessage:"Send request"})}),(0,f.jsx)(h().A,{size:"lg",style:A.button,onClick:()=>{M(""),s()},children:(0,f.jsx)(n().sA,{id:"GuestMembershipRequestModal.cancel.button",defaultMessage:"Cancel"})})]})]})}const M=function(e){const t=(0,i().v3)(),[o,n]=(0,r.useState)(!1),{origin:u}=e,l=(0,a().IS)((()=>({modalStyle:{alignSelf:"center",overflow:"visible",top:0,width:350}})),[]);return(0,f.jsx)(s(433876).A,{modalStyle:l.modalStyle,open:o,origin:(0,f.jsx)("div",{onClick:()=>{s(701763).cK(t),n(!0)},children:u}),onDismiss:()=>n(!1),renderContent:()=>(0,f.jsx)(x,{onDismiss:()=>n(!1)})})}},776040:(e,t,s)=>{s.d(t,{C:()=>j,X:()=>k});var r=s(296540),i=()=>s(484714),o=()=>s(56366),a=()=>s(401497),n=()=>s(187174),u=s(474848);const l=(0,s(340498).wt)("personCircleDashed",{viewBox:"0 0 20 20",svg:(0,u.jsx)("path",{d:"M4.33301 10.0645C4.33301 10.3607 4.35352 10.6501 4.39453 10.9326C4.4401 11.2152 4.50391 11.4909 4.58594 11.7598L3.30078 12.2998C3.18229 11.9443 3.09115 11.5798 3.02734 11.2061C2.96354 10.8324 2.93164 10.4518 2.93164 10.0645C2.93164 9.67708 2.96354 9.29655 3.02734 8.92285C3.09115 8.5446 3.18001 8.18001 3.29395 7.8291L4.58594 8.36914C4.50391 8.63802 4.4401 8.91374 4.39453 9.19629C4.35352 9.47884 4.33301 9.76823 4.33301 10.0645ZM7.36133 5.0332C6.85091 5.30208 6.39062 5.64388 5.98047 6.05859C5.57031 6.46875 5.23307 6.93132 4.96875 7.44629L3.68359 6.91309C4.02539 6.23405 4.46517 5.62565 5.00293 5.08789C5.54525 4.54557 6.15592 4.10124 6.83496 3.75488L7.36133 5.0332ZM9.98633 4.39746C9.69466 4.39746 9.40527 4.42025 9.11816 4.46582C8.83105 4.50684 8.55534 4.57064 8.29102 4.65723L7.75098 3.37207C8.10189 3.24902 8.46419 3.15788 8.83789 3.09863C9.21615 3.03483 9.59896 3.00293 9.98633 3.00293C10.3783 3.00293 10.7611 3.03483 11.1348 3.09863C11.5085 3.15788 11.8708 3.24902 12.2217 3.37207L11.6953 4.65723C11.4264 4.57064 11.1484 4.50684 10.8613 4.46582C10.5742 4.42025 10.2826 4.39746 9.98633 4.39746ZM15.0244 7.43945C14.7555 6.91992 14.4137 6.45508 13.999 6.04492C13.5889 5.63477 13.1263 5.29753 12.6113 5.0332L13.1445 3.75488C13.819 4.09668 14.4274 4.53874 14.9697 5.08105C15.512 5.62337 15.9564 6.23405 16.3027 6.91309L15.0244 7.43945ZM15.6602 10.0645C15.6602 9.76823 15.6374 9.47884 15.5918 9.19629C15.5508 8.90918 15.487 8.63118 15.4004 8.3623L16.6855 7.82227C16.8086 8.17773 16.902 8.5446 16.9658 8.92285C17.0296 9.29655 17.0615 9.67708 17.0615 10.0645C17.0615 10.4518 17.0296 10.8346 16.9658 11.2129C16.902 11.5866 16.8086 11.9512 16.6855 12.3066L15.4072 11.7598C15.4893 11.4954 15.5508 11.222 15.5918 10.9395C15.6374 10.6523 15.6602 10.3607 15.6602 10.0645ZM9.99316 17.126C9.09082 17.126 8.23405 16.9619 7.42285 16.6338C6.61165 16.3102 5.88477 15.8545 5.24219 15.2666C4.59961 14.6787 4.08236 13.9951 3.69043 13.2158L4.96875 12.6895C5.20573 13.1361 5.49512 13.5462 5.83691 13.9199C6.07389 13.6556 6.3929 13.4118 6.79395 13.1885C7.19954 12.9606 7.67122 12.776 8.20898 12.6348C8.7513 12.4935 9.34603 12.4229 9.99316 12.4229C10.6449 12.4229 11.2396 12.4935 11.7773 12.6348C12.3151 12.7715 12.7845 12.9538 13.1855 13.1816C13.5911 13.4095 13.9124 13.6556 14.1494 13.9199C14.318 13.7376 14.4753 13.5439 14.6211 13.3389C14.7669 13.1292 14.9014 12.9128 15.0244 12.6895L16.3027 13.2158C15.9062 13.9951 15.3867 14.6787 14.7441 15.2666C14.1016 15.8545 13.3747 16.3102 12.5635 16.6338C11.7568 16.9619 10.9001 17.126 9.99316 17.126ZM9.99316 11.2949C9.55566 11.2904 9.15918 11.1764 8.80371 10.9531C8.44824 10.7298 8.16569 10.4245 7.95605 10.0371C7.75098 9.64518 7.64616 9.20312 7.6416 8.71094C7.63704 8.25065 7.73958 7.8291 7.94922 7.44629C8.15885 7.06348 8.44141 6.75814 8.79688 6.53027C9.1569 6.29785 9.55566 6.18164 9.99316 6.18164C10.4352 6.18164 10.8317 6.29785 11.1826 6.53027C11.5381 6.75814 11.8206 7.06348 12.0303 7.44629C12.2445 7.8291 12.3516 8.25065 12.3516 8.71094C12.3516 9.20312 12.2467 9.64518 12.0371 10.0371C11.8275 10.429 11.5449 10.7389 11.1895 10.9668C10.834 11.1901 10.4352 11.2995 9.99316 11.2949Z"})});var c=()=>s(959013),p=()=>s(284371),d=()=>s(449506),g=()=>s(493823),C=()=>s(125565),m=()=>s(369251),b=()=>s(47373),h=()=>s(1130),y=()=>s(311337),f=()=>s(217429),x=()=>s(134217),M=()=>s(515512);function j(e){let{currentSpaceStore:t,currentUserRootStore:s}=e;const r=(0,i().v3)(),a=(0,M().Q)(),{isEligibleForGuestMembershipRequest:l,isEligibleForGuestMembershipRequestStatus:c}=k({currentSpaceStore:t,environment:r}),p=(0,o().K8)((()=>{if(a||"pending"===c)return!0;if((0,y().y)(r))return!0;if(!(!s||(0,b().C4)({userRootStore:s})))return!1;return"control"===f().default.getEligibleGroup({experimentId:"sharing_allow_guest_membership_request_for_existing_members",defaultGroup:"control"})}),[a,c,s,r]),[{value:g,status:C}]=(0,n().Yb)((async()=>{if(p)return;const e=await d().callApi({eventName:"getJoinableSpaces",environment:r,data:{}});return"failed"!==e.type&&e.data.results.length>0}),[r,p]);return p||"pending"===C?null:(0,u.jsx)(_,{currentSpaceStore:t,isEligibleForGuestMembershipRequest:l,hasJoinableSpaces:g})}const A=(0,c().YK)({joinOnlyDescription:{defaultMessage:"To see more pages and unlock all of Notion’s features, become a member of this workspace",id:"sidebar.guestPopup.joinOnlyDescription"},createOnlyDescription:{defaultMessage:"To unlock all of Notion’s features, try creating your own workspace",id:"sidebar.guestPopup.createOnlyDescription"},joinOrCreateDescription:{defaultMessage:"To see more pages and unlock all of Notion’s features, become a member of this workspace, or try creating your own",id:"sidebar.guestPopup.joinOrCreateDescription"},createOrJoinOtherDescription:{defaultMessage:"To unlock all of Notion’s features, try creating your own workspace or joining an existing one",id:"sidebar.guestPopup.createOrJoinOtherDescription"},createWorkspaceCTA:{defaultMessage:"Create a workspace",id:"sidebar.guestPopup.createWorkspaceCTA"},requestMembershipCTA:{defaultMessage:"Request membership",id:"sidebar.guestPopup.requestMembershipCTA"},createOrJoinWorkspaceCTA:{defaultMessage:"Create or join a workspace",id:"sidebar.guestPopup.createOrJoinWorkspaceCTA"}});function _(e){let{currentSpaceStore:t,isEligibleForGuestMembershipRequest:s,hasJoinableSpaces:o}=e;const n=(0,i().v3)(),d=(0,a().IS)((e=>({personCircleDashedIcon:{width:20,height:20,color:e.icon.secondary},title:{color:e.text.primary},description:{lineHeight:p().K_.UIRegular.desktop,fontWeight:p().Wy.regular},guestPopupCard:{padding:14,borderRadius:8,margin:"auto 8px 8px 8px",background:e.surface.elevated,border:`1px solid ${e.stroke.secondary}`},popupCTAButton:{width:"100%",height:"inherit",justifyContent:"center",padding:8,marginTop:8,fontWeight:p().Wy.regular,whiteSpace:"normal",textAlign:"center"},tintedBlueButton:{background:e.tint.uiBlue,color:e.text.uiBluePrimary},secondaryButton:{color:e.text.secondary,marginTop:4}})),[]),b=(0,r.useCallback)((()=>{h().Ig(n,"guest_popup")}),[n]),y=(0,r.useCallback)((e=>{let{cta:s}=e;return t?(0,u.jsx)(m().A,{origin:(0,u.jsx)(g().p,{style:{...d.popupCTAButton,...d.tintedBlueButton},children:(0,u.jsx)(c().sA,{...s})})}):null}),[t,d.popupCTAButton,d.tintedBlueButton]),f=(0,r.useCallback)((e=>{let{cta:t,isPrimary:s}=e;return(0,u.jsx)(g().p,{onClick:b,style:{...d.popupCTAButton,...s?d.tintedBlueButton:d.secondaryButton},children:(0,u.jsx)(c().sA,{...t})})}),[b,d.popupCTAButton,d.tintedBlueButton,d.secondaryButton]);let x,M;return s&&o?(x=A.joinOrCreateDescription,M=(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(y,{cta:A.requestMembershipCTA}),(0,u.jsx)(f,{cta:A.createOrJoinWorkspaceCTA,isPrimary:!1})]})):s&&!o?(x=A.joinOnlyDescription,M=(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(y,{cta:A.requestMembershipCTA}),(0,u.jsx)(f,{cta:A.createWorkspaceCTA,isPrimary:!1})]})):!s&&o?(x=A.createOrJoinOtherDescription,M=(0,u.jsx)(f,{cta:A.createOrJoinWorkspaceCTA,isPrimary:!0})):s||o||(x=A.createOnlyDescription,M=(0,u.jsx)(f,{cta:A.createWorkspaceCTA,isPrimary:!0})),(0,u.jsxs)("div",{style:d.guestPopupCard,children:[l(d.personCircleDashedIcon),(0,u.jsx)(C().A,{style:d.title,children:(0,u.jsx)(c().sA,{defaultMessage:"You’re a guest",id:"sidebar.guestPopup.title"})}),(0,u.jsx)(C().A,{isSmall:!0,isMultiline:!0,isSecondaryColor:!0,style:d.description,children:(0,u.jsx)(c().sA,{...x})}),M]})}function k(e){let{currentSpaceStore:t,environment:s}=e;const[{value:r,status:i}]=(0,n().Yb)((async()=>{if(!t)return!1;if(!(0,x().dW)())return!1;const e=await d().callApi({eventName:"isEligibleForGuestMembershipRequest",environment:s,data:{spaceId:t.id}});return"failed"!==e.type&&e.data.isEligible}),[t,s]);return{isEligibleForGuestMembershipRequest:r,isEligibleForGuestMembershipRequestStatus:i}}}}]);