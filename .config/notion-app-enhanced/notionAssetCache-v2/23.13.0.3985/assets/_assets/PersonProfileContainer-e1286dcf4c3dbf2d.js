"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[44632],{53528:(e,n,t)=>{t.d(n,{OH:()=>l,T2:()=>a,do:()=>d});var o=()=>t(597777),i=()=>t(869190),r=()=>t(604995),s=()=>t(416504);function l(e){const{dateTime:n,intl:t,shortenDateAndRange:o}=e,s=r().C6.toPersistedDate(n.valueOf());return i().ZF({value:s,allowRelativeDates:!0,intl:t,shortenDateAndRange:o,displayInUserTimezone:!0})}function a(e){const{dateTime:n,intl:t,userTimeZone:o,displayInUserTimezone:s,alwaysIncludeTimezone:l}=e,a=r().C6.toPersistedDateTime(n.valueOf(),n.zoneName);return i().ZF({value:a,allowRelativeDates:!0,intl:t,userTimeZone:o,displayInUserTimezone:s,alwaysIncludeTimezone:l})}function d(e){const{luxonRange:n,intl:t}=e,l=r().C6.toPersistedDateRange(n),a=i().ZF({value:l,allowRelativeDates:!1,shortenDateAndRange:!0,intl:t,displayInUserTimezone:!0}),d=n.end.setZone((0,s().P)()),u=i().fU({start_time:d.toFormat(o().GE),humanReadable:!1,intl:t});return t.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:a,formattedEndTime:u})}},56394:(e,n,t)=>{t.d(n,{A:()=>d});t(296540);var o=()=>t(484714),i=()=>t(401497),r=()=>t(668725),s=()=>t(704152),l=()=>t(963589),a=t(474848);function d(e){const{icon:n,title:t,on:d,disabled:u,hasDiff:c,wrapStyle:m,innerStyle:p,hideChevron:h}=e,{isMobile:f}=(0,o().Y0)(),g=(0,l().X)("db_ux_chrome"),v=(0,i().IS)((e=>({container:{borderRadius:14,marginRight:6,display:"inline-flex",...c&&{position:"relative"},...m},filterPill:{fontSize:14,display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderRadius:32,height:f?28:24,lineHeight:f?"28px":"24px",padding:"0 8px",...!g&&{border:`1px solid ${e.outlineButtonBorder}`},color:e.text.secondary,...d&&{color:e.text.uiBluePrimary,borderColor:e.filterPillBorder,background:e.tint.uiBlue},...u&&{color:e.text.uiBlueTertiary,borderColor:e.text.uiBlueTertiary,background:e.tint.uiBlue},...p},hovered:d?{background:e.tint.uiBlueHover}:{},pressed:d?{background:e.tint.uiBluePressed}:{},chevron:{width:10,marginLeft:4,marginTop:1,fill:u?e.text.uiBlueTertiary:d?e.blueColor:e.icon.tertiary},diffDot:{position:"absolute",top:-2,right:-2,background:e.icon.orangePrimary,border:`1px solid ${e.contentBackground}`,width:9,height:9,borderRadius:9}})),[c,m,f,g,d,u,p]);return(0,a.jsxs)("div",{style:v.container,children:[(0,a.jsxs)(s().A,{disabled:u,style:v.filterPill,hoveredStyle:v.hovered,pressedStyle:v.pressed,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,onDoubleClick:e.onDoubleClick,children:[n,t,!h&&(0,r().b)(v.chevron)]}),c&&(0,a.jsx)("div",{style:v.diffDot})]})}},297401:(e,n,t)=>{t.d(n,{A:()=>i});t(296540);var o=t(474848);const i=function(e){const n=(0,t(484714).v3)(),i={removeFilterButton:{height:void 0,width:void 0},removeFilterButtonMobile:{marginRight:-12,marginTop:-12,marginBottom:-12,paddingRight:12,paddingTop:12,paddingBottom:12}},{onClick:r,disabled:s}=e,{device:l}=n,a=l.isMobile?{...i.removeFilterButton,...i.removeFilterButtonMobile}:i.removeFilterButton;return(0,o.jsx)(t(285790).A,{icon:t(931121).J,onClick:r,disabled:s,disableBackground:!0,style:a})}},346899:(e,n,t)=>{t.r(n),t.d(n,{PersonProfileContainer:()=>de});t(944114),t(581454);var o=t(296540),i=()=>t(484714),r=()=>t(56366),s=()=>t(401497),l=()=>t(757695),a=()=>t(959013),d=()=>t(496603),u=()=>t(284371),c=()=>t(2220),m=()=>t(131533),p=()=>t(2143),h=()=>t(125565),f=()=>t(774524),g=()=>t(605243),v=()=>t(299772),x=()=>t(828634),y=()=>t(9768),C=()=>t(817942),b=()=>t(601726),S=()=>t(660197),I=()=>t(933951),j=()=>t(665579),M=()=>t(756279),w=()=>t(765957),T=()=>t(548821),k=()=>t(712505),A=()=>t(17090),P=(t(517642),t(658004),t(733853),t(845876),t(432475),t(515024),t(731698),t(898992),t(354520),()=>t(857639)),R=()=>t(187174),B=()=>t(803960),D=t(474848);const F={viewBox:"0 0 20 20",fittedViewBox:"3.97 6.37 12.06 6.66",svg:(0,D.jsx)("path",{d:"M10.442 6.558a.625.625 0 0 0-.884 0l-5.4 5.4a.625.625 0 1 0 .884.884L10 7.884l4.958 4.958a.625.625 0 1 0 .884-.884z"})},L=(0,t(340498).wt)("arrowChevronSingleUp",F);var E=()=>t(449506),_=()=>t(974233),H=()=>t(37433),O=()=>t(646736),W=()=>t(898808),z=()=>t(12974),U=()=>t(568317),N=()=>t(710149);function K(e){let{isIconCircular:n=!1}=e;const t=(0,U()._)(),o=(0,s().IS)((()=>({skeletonIcon:{width:20,height:20,borderRadius:n?"50%":4},skeletonLabel:{width:120,height:16,borderRadius:4}})),[n]);return(0,D.jsxs)("div",{style:t.rowContainer,children:[(0,D.jsx)(N().A,{style:{...o.skeletonIcon}}),(0,D.jsx)(N().A,{style:{...t.rowLabel,...o.skeletonLabel}})]})}var V=()=>t(704152);function G(e){const{icon:n,totalCount:t,message:o,onToggleTruncation:i,maxRowsShownWhenTruncated:r=z().rX}=e,s=(0,a().tz)(),l=Math.max(t-r,0),d=(0,U()._)();return(0,D.jsxs)(V().A,{onClick:i,style:d.truncationButton,hoveredStyle:d.hoveredStyle,children:[n,(0,D.jsx)(h().A,{style:d.truncationLabel,isSecondaryColor:!0,children:s.formatMessage(o,{numHidden:l})})]})}const $=z().rX+1,q=(0,a().YK)({teamspacesModuleShowMore:{id:"PersonProfile.teamspacesModule.showMore",defaultMessage:"{numHidden} more teamspaces"},teamspacesModuleShowLess:{id:"PersonProfile.teamspacesModule.showLess",defaultMessage:"Hide {numHidden} teamspaces"}});function Q(e,n,t){const[{value:o,status:i,error:r}]=(0,R().Yb)((async()=>async function(e,n,t){if(!t)return;const o=await E().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:e,data:{spaceId:t,userIds:[n]}});var i;if("success"===o.type)return new Set((null===(i=o.data)||void 0===i||null===(i=i.userToGroupMap)||void 0===i||null===(i=i[n])||void 0===i?void 0:i.map((e=>e.toString())))||[]);throw P().log({level:"error",from:"personProfile.teamspacesModule",type:"getSpacePermissionGroupIdsContainingMembersError",error:{message:(0,_().V)(o)||"Error fetching user permission group ids"}}),o.error}(e,n,t)),[e,n,t],{debugName:"personProfile.userToPermissionGroupIds"});return{value:{userPermissionGroupIds:o},isLoading:"resolved"!==i&&"rejected"!==i,error:r}}function X(){const e=(0,U()._)();return(0,D.jsx)("div",{style:e.listModule,children:[0,1,2].map((e=>(0,D.jsx)(K,{isIconCircular:!1},e)))})}function Z(){const e=(0,U()._)();return(0,D.jsx)("div",{style:e.listModule,children:(0,D.jsx)(h().A,{isSmall:!0,isMultiline:!0,children:(0,D.jsx)(a().sA,{id:"PersonProfile.teamspaces.empty",defaultMessage:"None"})})})}function Y(e){const{teamStore:n}=e,t=(0,r().K8)((()=>n.isReady()),[n]),o=(0,r().K8)((()=>n.getName()),[n]),i=(0,U()._)();return t?(0,D.jsxs)("div",{style:i.rowContainer,children:[(0,D.jsx)(W().x,{store:n,disabled:!0,size:20}),(0,D.jsx)(h().A,{style:i.rowLabel,children:o})]}):(0,D.jsx)(K,{isIconCircular:!1})}function J(e){const{userId:n}=e,t=(0,i().v3)(),s=(0,r().O$)(w().AppStoreCurrentSpaceStore),{teams:l,isLoading:a}=function(e){let{environment:n,spaceStore:t,userId:o}=e;const i=(0,r().K8)((()=>null==t?void 0:t.isReady()),[t]),s=(0,r().K8)((()=>(0,O().sE)(t,o)),[t,o]),l=(0,r().K8)((()=>null==s?void 0:s.isReady()),[s]),{value:a,isLoading:d}=(0,H().N8)({fromCache:!0,includeArchived:!1,spaceStore:t}),{teams:u,teamAggregateData:c}=a??{teams:[],teamAggregateData:{}},{value:{userPermissionGroupIds:m},isLoading:p}=Q(n,o,null==t?void 0:t.id);return{teams:(0,r().K8)((()=>{const e=u.filter((e=>e.isMemberOrGuest(o,m||new Set,null==s?void 0:s.getModel())));return(0,z().PZ)(e,c)}),[u,m,o,s,c]),isLoading:!i||!l||d||p}}({environment:t,spaceStore:s,userId:n}),d=(0,o.useMemo)((()=>l.length>$),[l]),[u,c]=(0,o.useState)(!0),m=(0,U()._)(),p=(0,o.useCallback)((()=>{c(!u)}),[u]);return a?(0,D.jsx)(X,{}):0===l.length?(0,D.jsx)(Z,{}):(0,D.jsxs)("div",{style:m.listModule,children:[l.map(((e,n)=>u&&d&&n>=z().rX?null:(0,D.jsx)(Y,{teamStore:e},e.id))),d&&(0,D.jsx)(G,{icon:u?(0,B().arrowChevronSingleDownIcon)(m.truncationIcon):L(m.truncationIcon),totalCount:l.length,message:u?q.teamspacesModuleShowMore:q.teamspacesModuleShowLess,maxRowsShownWhenTruncated:z().rX,onToggleTruncation:p})]})}var ee=()=>t(453697),ne=()=>t(798880),te=()=>t(640653),oe=()=>t(630116);const ie=z().rX+1,re=(0,a().YK)({topCollaboratorsModuleShowMore:{id:"PersonProfile.collaboratorsModule.showMore",defaultMessage:"{numHidden} more collaborators"},topCollaboratorsModuleShowLess:{id:"PersonProfile.collaboratorsModule.showLess",defaultMessage:"Hide {numHidden} collaborators"}});function se(e){const{userStore:n}=e,t=(0,i().v3)(),o=(0,r().K8)((()=>n.isReady()),[n]),s=(0,r().K8)((()=>n.getName()||n.getEmail()),[n]),l=(0,r().K8)((()=>(0,z().MN)({userId:n.id,currentSpaceStore:w().default.state.currentSpaceStore,environment:t})),[n,t]),a=(0,U()._)();return o?(0,D.jsxs)(V().A,{style:a.rowContainer,hoveredStyle:a.hoveredStyle,href:l,children:[(0,D.jsx)(ee().A,{userStore:n,size:20,hasTooltip:!0}),(0,D.jsx)(h().A,{style:a.rowLabel,children:s})]}):(0,D.jsx)(K,{isIconCircular:!0})}function le(){const e=(0,U()._)();return(0,D.jsx)("div",{style:e.listModule,children:[0,1,2].map((e=>(0,D.jsx)(K,{isIconCircular:!0},e)))})}function ae(e){const{userId:n}=e,{value:t,isLoading:s}=function(e){let{userId:n}=e;const t=(0,i().v3)(),o=(0,r().O$)(w().AppStoreCurrentSpaceStore),[{status:s,error:l,value:a}]=(0,R().Yb)((async()=>{if(!o)return[];if((0,te().IL)(o))return[];const e=await E().callApi({eventName:"getSimilarUsers",environment:t,data:{userId:n,spaceId:o.id}});if("failed"===e.type)throw e.error;if(e){const n=e.data.userSimilarity??[];return Object.entries(n).map((e=>{let[n,t]=e;return{userStore:oe().LU.createChildStore(o,{table:ne().oo,id:n}),id:n}}))}}),[t,n,o]);return void 0===o?{isLoading:!0,error:void 0,value:[]}:{isLoading:"pending"===s||"idle"===s,error:l,value:a}}({userId:n}),l=(0,r().K8)((()=>t&&t.length>ie),[t]),[d,u]=(0,o.useState)(!0),c=(0,o.useCallback)((()=>{u(!d)}),[d]),m=(0,U()._)();return s?(0,D.jsx)(le,{}):t&&0!==t.length?(0,D.jsxs)("div",{style:m.listModule,children:[t.map(((e,n)=>d&&l&&n>=z().rX?null:(0,D.jsx)(se,{userStore:e.userStore},e.id))),l&&(0,D.jsx)(G,{icon:d?(0,B().arrowChevronSingleDownIcon)(m.truncationIcon):L(m.truncationIcon),totalCount:t.length,message:d?re.topCollaboratorsModuleShowMore:re.topCollaboratorsModuleShowLess,maxRowsShownWhenTruncated:z().rX,onToggleTruncation:c})]}):(0,D.jsx)("div",{style:m.listModule,children:(0,D.jsx)(h().A,{isSecondaryColor:!0,isMultiline:!0,children:(0,D.jsx)(a().sA,{id:"TopCollaboratorsModule.emptyState.message",defaultMessage:"No collaborators yet!"})})})}function de(e){const{store:n}=e,t=(0,r().uB)(void 0,A().A),l=(0,r().K8)((()=>n.getSpaceId()),[n]),a=(0,r().K8)((()=>n.getPersonProfileUserId()),[n]),d=(0,o.useRef)(null),u=(0,x().wY)(d),m=(0,i().v3)(),h=!m.device.isMobile;(0,o.useEffect)((()=>{"rendered"!==w().default.state.renderPhase&&w().default.setState({...w().default.state,renderPhase:"rendered"})}),[]),(0,o.useEffect)((()=>{(0,c().u)({environment:m,event:{eventName:"person_profile_viewed",eventProperties:{is_own_profile:a===m.currentUser.id}}})}),[m,a]);const f=(0,o.useMemo)((()=>u&&u.width<=k().SIDEPEEK_MIN_WIDTH),[u]),{person_profile_page_main:g,person_profile_page_details:v}=(0,I().Qf)({personProfileStore:n}),y=(0,s().IS)((e=>({container:{width:"100%",height:"100%",cursor:"default",backgroundColor:e.contentBackground},left:{flex:1,maxWidth:"752px",minWidth:k().SIDEPEEK_MIN_WIDTH-96+"px"},right:{width:"252px",minWidth:"252px",position:f?"relative":"sticky",top:0,height:"min-content",display:"flex",flexDirection:"column",gap:20},content:{display:"flex",flexDirection:f?"column-reverse":"row",gap:40}})),[f]);return a?(0,D.jsx)(p().H,{type:M().A.Y,style:y.container,className:"person-profile-content",store:t,children:(0,D.jsxs)(C().Mx,{type:"person-profile",withBottomPadding:!0,children:[(0,D.jsx)(he,{store:n,modules:g}),(0,D.jsxs)(C().vV,{ref:d,style:y.content,children:[h&&(0,D.jsx)("div",{style:y.left,children:(0,D.jsx)(ue,{modules:g,spaceId:l,userId:a})}),(0,D.jsx)("div",{style:y.right,children:(0,D.jsx)(ce,{modules:v,userId:a})})]},"main")]})}):null}function ue(e){const{spaceId:n,userId:t,modules:o}=e;return(0,D.jsx)(D.Fragment,{children:o.map((e=>"recentActivity"===e.type?(0,D.jsxs)("div",{children:[(0,D.jsx)(me,{children:(0,D.jsx)(a().sA,{id:"PersonProfile.recentActivity.title",defaultMessage:"Recent activity"})}),(0,D.jsx)(pe,{children:(0,D.jsx)(m().A,{spaceId:n,source:"person_profile",authorId:t,empty:()=>(0,D.jsx)(a().sA,{id:"PersonProfile.recentActivity.empty",defaultMessage:"No recent activity"})})})]},`${e.id}-${t}`):null))})}function ce(e){const{userId:n,modules:t}=e;return(0,D.jsx)(D.Fragment,{children:t.map((e=>{switch(e.type){case"collaborators":return(0,D.jsxs)("div",{children:[(0,D.jsx)(me,{children:(0,D.jsx)(a().sA,{id:"PersonProfile.topCollaborators.title",defaultMessage:"Top collaborators"})}),(0,D.jsx)(ae,{userId:n})]},`${e.id}-${n}`);case"teamspaces":return(0,D.jsxs)("div",{children:[(0,D.jsx)(me,{children:(0,D.jsx)(a().sA,{id:"PersonProfile.teamspaces.title",defaultMessage:"Teamspaces"})}),(0,D.jsx)(J,{userId:n})]},`${e.id}-${n}`);default:return null}}))})}function me(e){const n=(0,s().IS)((()=>({title:{paddingBottom:8,fontWeight:u().Wy.medium}})),[]);return(0,D.jsx)(h().A,{isSmall:!0,style:n.title,children:e.children})}function pe(e){const n=(0,i().WS)(),t=(0,s().IS)((e=>({widget:{...(0,j().V$)({isPhone:n,theme:e}),paddingTop:12,paddingBottom:12}})),[n]);return(0,D.jsx)("div",{style:t.widget,children:e.children})}function he(e){const{store:n,modules:t}=e,o=(0,r().K8)((()=>n.isReady()&&n.canEdit()),[n]);return(0,D.jsx)(D.Fragment,{children:t.map((e=>{switch(e.type){case"normalizedTitleWithIcon":return(0,D.jsx)(C().vV,{children:(0,D.jsx)(fe,{module:e,personProfileStore:n,modules:t,isEditable:o})},e.id);case"cover":return(0,D.jsx)(b().f,{store:n,isEditable:o,paddingX:0,pageCoverHeight:v().mv,onMouseEnter:d().lQ,onMouseLeave:d().lQ},e.id);default:return null}}))})}function fe(e){const{module:n,personProfileStore:t,modules:i,isEditable:s}=e,u=(0,y().Jh)({layoutModule:n,area:"page_main",collectionSchema:void 0,collectionStore:void 0,showDetailsPanelToggleButtonBelowTitle:!1,modules:i,context:T().Rr.Frame}),{hasCover:c}=(0,r().K8)((()=>({hasCover:Boolean(null==t?void 0:t.getCover())})),[t]),m=l().Store.createValue(!1,{name:"headerFocusStore"}),p=(0,o.useMemo)((()=>{const e=[];return s&&!c&&e.push((0,D.jsx)(g().A,{store:t,style:(0,v().g1)(!0),label:(0,D.jsx)(a().sA,{id:"PageViewBlock.cover.pageCover",defaultMessage:"Add cover"}),from:"person_page_header"},"add-cover")),e}),[s,c,t]);return u((0,D.jsx)(S().H,{store:t,context:T().Rr.Frame,isEditable:!1,headerControls:(0,D.jsx)(f().A,{store:t,context:T().Rr.Frame,children:p}),hasCover:c,isInSidePeek:!1,headerFocusStore:m,openMenuOnMount:!1,openMenuOnMountCallback:d().lQ,disabled:!0,collectionContextStore:void 0,shouldShowTemplatePicker:!1,onTitleChange:d().lQ,onTitleEditText:d().lQ,onTitleEsc:d().lQ,onTitleUntab:d().lQ,onTitleTab:d().lQ,handleHeaderMouseEnter:d().lQ,handleHeaderMouseLeave:d().lQ,layoutModule:n}))}},427636:(e,n,t)=>{t.d(n,{A:()=>i});t(296540);var o=t(474848);const i=function(e){const{botStore:n,avatarSize:i,shouldShowBadge:r,style:s,inline:l}=e,a=(0,t(959013).tz)(),d=(0,t(484714).Y0)(),u=(0,t(56366).K8)((()=>null==n?void 0:n.getDisplayName(a)),[n,a]),{outerStyle:c,avatarWrapStyle:m,badgeStyle:p}=(0,t(401497).IS)((e=>({outerStyle:{display:"flex",alignItems:"center",minWidth:0,...s},avatarWrapStyle:l?{width:"none",minHeight:"none",marginRight:6}:{marginRight:6},badgeStyle:{padding:"2px 6px",borderRadius:4,color:e.text.secondary,background:e.legacyDefaultSelectColor,fontSize:t(780054).A.isMobile?11:9,lineHeight:d.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",marginLeft:8,marginTop:1}})),[s,l,d]);return(0,o.jsxs)("div",{style:c,children:[(0,o.jsx)("div",{style:m,children:(0,o.jsx)(t(256863).A,{botStore:n,size:i})}),(0,o.jsx)("div",{style:{...t(284371).RC},children:u}),r&&(0,o.jsx)("div",{style:p,children:"Bot"})]})}},438632:(e,n,t)=>{t.d(n,{PD:()=>u,cb:()=>d,yR:()=>c});t(16280),t(944114),t(898992),t(354520),t(803949),t(581454);var o=t.n(t(625473)),i=t.n(t(716471)),r=()=>t(496603),s=()=>t(534177),l=()=>t(634201),a=()=>t(919709);let d=function(e){return e[e.removed=-1]="removed",e[e.added=1]="added",e[e.same=0]="same",e}({});function u(e,n){const t=new(i())({timeout:2,editCost:6}),o=t.main(n,e);return t.cleanupSemantic(o),o}function c(e){const{before:n,after:t,isIncompleteAfter:i,insertCursor:c}=e,m={count:0,encoding:{},decoding:{},annotationEncoding:{},annotationDecoding:{}},p=e=>{const n=m.encoding[e];if(n)return n;{const n=String.fromCharCode(m.count);return m.count++,m.encoding[e]=n,m.decoding[n]=e,n}},h=e=>{const n=o()(e),t=m.annotationEncoding[n];if(t)return t;{const t=String.fromCharCode(m.count);return m.count++,m.annotationEncoding[n]=t,m.annotationDecoding[t]=e,t}},f=n=>r().Bq(a().RQ(n).map((n=>{let t=[];if("word"===e.mode||"wordUnderlineFinal"===e.mode){if("undefined"==typeof Intl||!Intl.Segmenter)throw new Error("Intl.Segmenter is not supported");{const e=new Intl.Segmenter(void 0,{granularity:"word"}).segment(n[0]);t=Array.from(e).map((e=>e.segment))}}else t=l().PE(n[0]);const o=t.map(p);if(a().qXl(n)){const e=a().uPN(n),t=a().jhx(e);t&&(o[0]=h({type:"mention",value:t}),e.forEach((e=>{a().iGj(e)||a().gir(e)||a().lfl(e)||(o.unshift(h({type:"start",value:e})),o.push(h({type:"end",value:e})))})))}else if(a().GiG(n)){const e=a().uPN(n),t=a().j1D(e);if(t){o[0]=h({type:"equation",value:t});for(const n of e)a().iGj(n)||a().gir(n)||a().lfl(n)||(o.unshift(h({type:"start",value:n})),o.push(h({type:"end",value:n})))}}else if(a().BEe(n)){a().uPN(n).forEach((e=>{o.unshift(h({type:"start",value:e})),o.push(h({type:"end",value:e}))}))}return o}))).join("");if(m.count>65535)throw new Error("This string has way too many different characters.");const g=u(f(t),f(n)),v=[];let x=[],y=0;const C=i?r().Kl(g,(e=>0===e[0]||1===e[0])):0;let b=!1;const S=e.insertionAnnotation,I=e.deletionAnnotation;return g.forEach((n=>{let[t,o]=n;o.split("").forEach((n=>{if(m.decoding[n]){const o=m.decoding[n];t===d.added?v.push([o,[...x,"wordUnderlineFinal"===e.mode?e.underlineAnnotation:S]]):t===d.removed&&(!i||y<=C)?"wordUnderlineFinal"!==e.mode&&v.push([o,[...x,I]]):(i&&c&&!b&&y===C+1&&(b=!0,v.push(["",[["tc"]]])),v.push([o,x]))}else{const o=m.annotationDecoding[n];if(t===d.added)if("mention"===o.type)v.push([a().Sj,[...x,"wordUnderlineFinal"===e.mode?e.underlineAnnotation:S,o.value]]);else if("start"===o.type)x=[...x,o.value];else if("end"===o.type)x=x.filter((e=>!r().n4(e,o.value)));else if("equation"===o.type){const e=a().U35(o.value),n=a().G0H(e,[...x,S]);v.push(n)}else(0,s().HB)(o);else if(t===d.removed){if("mention"===o.type)"wordUnderlineFinal"!==e.mode&&v.push([a().Sj,[...x,I,o.value]]);else if("equation"===o.type){const e=a().U35(o.value),n=a().G0H(e,[...x,I]);v.push(n)}}else if(t===d.same)if("mention"===o.type)v.push([a().Sj,[...x,o.value]]);else if("start"===o.type)x=[...x,o.value];else if("end"===o.type)x=x.filter((e=>!r().n4(e,o.value)));else if("equation"===o.type){const e=a().U35(o.value),n=a().G0H(e,x);v.push(n)}else(0,s().HB)(o)}})),i&&(y+=1)})),a().__s(v)}},442277:(e,n,t)=>{t.d(n,{B:()=>i});t(296540);var o=t(474848);const i=(0,t(340498).wt)("arrowRightSmaller",{viewBox:"0 0 16 16",directional:!0,svg:(0,o.jsx)("path",{d:"M15.383 8.352a.877.877 0 01-.274.64l-5.156 5.14a.864.864 0 01-.617.266.831.831 0 01-.602-.234.795.795 0 01-.234-.586c0-.12.02-.232.063-.336a.912.912 0 01.187-.273l1.75-1.766 2.914-2.656.274.5-2.711.156H1.484c-.26 0-.471-.078-.632-.234a.851.851 0 01-.235-.617c0-.256.078-.461.235-.618a.856.856 0 01.632-.242h9.493l2.71.164-.273.508L10.5 5.5 8.75 3.727a.946.946 0 01-.188-.266.917.917 0 01-.062-.344c0-.234.078-.43.234-.586a.831.831 0 01.602-.234.79.79 0 01.328.07c.104.047.203.117.297.211l5.148 5.133a.877.877 0 01.274.64z"})})},568317:(e,n,t)=>{t.d(n,{_:()=>r,p:()=>s});var o=()=>t(401497),i=()=>t(284371);function r(){return(0,o().IS)((e=>({listModule:{display:"flex",flexDirection:"column",gap:4},truncationButton:{display:"flex",gap:6,alignItems:"center",padding:4,marginLeft:-4,flexDirection:"row",flexGrow:0,alignSelf:"flex-start"},truncationIcon:{width:20,fill:e.icon.secondary},truncationLabel:{fontWeight:400},rowContainer:{display:"flex",gap:6,alignItems:"center",padding:4,marginLeft:-4,flexGrow:0,alignSelf:"flex-start"},rowLabel:{fontWeight:400},hoveredStyle:{borderRadius:"6px"}})),[])}function s(){return(0,o().IS)((e=>({card:{minWidth:280,padding:12},bio:{display:"inline-flex",alignItems:"center",gap:12,flexGrow:1,width:0,height:56},bioRight:{overflow:"hidden",width:"100%"},actionButton:{width:"100%",height:28,fontWeight:i().Wy.medium},profileTitle:{fontWeight:i().Wy.semibold},profileSubtitle:{...i().RC},loadingShimmer:{height:16,borderRadius:6,animation:"500ms ease-in fadein"}})),[])}},654734:(e,n,t)=>{t.d(n,{A:()=>d});var o=t(296540),i=()=>t(597777),r=()=>t(869190),s=()=>t(604995),l=()=>t(416504),a=t(474848);const d=function(e){const n=(0,t(959013).tz)(),d=(0,t(401497).DP)(),m=(0,t(396182).I)(),p=(0,o.useRef)(),h=(0,o.useCallback)((()=>{const n=e.value;if(!n)return;const o=s().q8(n,(0,l().P)());if(!o)return;const i=o.valueOf(),r=i-Date.now();r<0||r>t(720665).nD||p.current&&p.current.timestamp===i||(p.current&&clearTimeout(p.current.timer),p.current={timestamp:i,timer:setTimeout((()=>m("DateBox","DateBox/createReminderTimer")),r)})}),[m,e.value]),f=(0,o.useCallback)((()=>{p.current&&(clearTimeout(p.current.timer),p.current=void 0)}),[]);(0,o.useEffect)((()=>{h()}),[h]),(0,o.useEffect)((()=>()=>{f()}),[f]);const{value:g,withComma:v}=e,x=(0,t(56366).K8)((()=>g?(0,r().ZF)({value:g,date_format:e.dateFormat,time_format:e.timeFormat,userTimeZone:(0,l().P)(),allowRelativeDates:!0,intl:n,shortenDateAndRange:e.shortenDateAndRange,displayInUserTimezone:e.displayInUserTimezone,getToday:t(838924).x1}):void 0),[n,e.dateFormat,e.displayInUserTimezone,e.shortenDateAndRange,e.timeFormat,g]);if(!g)return null;const y=s().AA(g,(0,l().P)(),t(662303).locale);let C;if((0,i().Lh)(g)){const e=s().Zs(g,(0,l().P)());C=e?{color:d.errorText}:{color:t(381349).Ay.blue}}const b=(0,a.jsxs)(a.Fragment,{children:[x,(0,i().Lh)(g)&&(0,t(599987).P)({display:"inline-block",width:"1em",marginLeft:6,marginRight:2,paddingBottom:4,verticalAlign:"middle"}),v?", ":null]});return e.disableTooltip?(0,a.jsx)("div",{className:e.className,style:{...e.style,...C},children:b}):(0,a.jsx)(t(859428).A,{renderTooltip:()=>(0,a.jsxs)(a.Fragment,{children:[e.tooltipHeader,(0,a.jsxs)("div",{style:c(d,e.tooltipHeader),children:[u(y.start),y.end?` → ${u(y.end)}`:""]})]}),render:n=>(0,a.jsx)("div",{className:e.className,style:{...e.style,...C},...n,children:b}),placement:e.tooltipPlacement})};function u(e){return(0,r().eV)({value:e,preset:"medium"})}function c(e,n){return n?{color:e.text.contrastSecondary}:{}}},803960:(e,n,t)=>{t.r(n),t.d(n,{arrowChevronSingleDownIcon:()=>i,iconDefinition:()=>o});t(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.97 6.97 12.06 6.66",svg:(0,t(474848).jsx)("path",{d:"M9.558 13.442c.244.244.64.244.884 0l5.4-5.4a.625.625 0 1 0-.884-.884L10 12.116 5.042 7.158a.625.625 0 0 0-.884.884z"})},i=(0,t(340498).wt)("arrowChevronSingleDown",o)},806754:(e,n,t)=>{t.d(n,{A:()=>i});t(296540);var o=t(474848);const i=function(e){const n={desktopTitleStyle:{marginBottom:4},marginAfter:{marginBottom:16}},{title:i,marginAfter:r,desktopStyle:s,desktopTitleStyle:l,...a}=e,d=(r||s)&&{...r&&n.marginAfter,...s},u=l?{...n.desktopTitleStyle,...l}:n.desktopTitleStyle;return(0,o.jsx)(t(89924).A,{disableDesktopPadding:!0,enableActionSheetTitle:!0,desktopStyle:d,desktopTitleStyle:u,shouldShowBottomDivider:!1,title:i,...a})}},821879:(e,n,t)=>{t.d(n,{C:()=>D,A:()=>F});t(898992),t(354520),t(581454);var o=t(296540),i=()=>t(484714),r=()=>t(401497),s=()=>t(959013),l=()=>t(496603),a=()=>t(115512),d=()=>t(962730),u=()=>t(377586),c=()=>t(493823),m=()=>t(760217),p=()=>t(897119),h=()=>t(204063),f=()=>t(89924),g=()=>t(978625),v=()=>t(56366),x=()=>t(857639),y=()=>t(502800),C=()=>t(722872),b=()=>t(970585),S=()=>t(939740),I=()=>t(64e3),j=()=>t(480095),M=()=>t(856952),w=t(474848);const T={menu:{width:250,maxHeight:"40vh"},inputMenu:{maxHeight:"20vh"}};const k=function(e){let{labelText:n,value:r,renderResultMenuItem:s,onConfirm:l,items:a,performRequest:d,onDismiss:u,onChange:c,renderToken:m,onRemove:p,onClear:h,disabled:f}=e;const g=(0,i().v3)(),x=(0,v().uB)(void 0,b().A),y=(0,v().uB)(void 0,t(40851).A),[C,S]=(0,t(857437).$)(),I=(0,o.useCallback)(((e,t,o)=>(0,w.jsx)(B,{error:e,data:t,ready:o,labelText:n,value:r,renderResultMenuItem:s,onConfirm:l,menuListStore:x,comboboxProps:S})),[n,r,s,l,x,S]),j={query:r,current:a};return(0,w.jsx)(t(928600).A,{...R(g,u,n,r,a,c,m,p,h,f,C),children:(0,w.jsx)(t(251126).A,{debounce:100,requestStore:y,request:j,performRequest:d,render:I})})};function A(e){const{device:n}=e;return n.isMobile}function P(e){let{labelText:n,value:t,items:o,disabled:r,onChange:s,renderToken:a,onRemove:d,onClear:u,inputComboboxProps:c}=e;const m=(0,i().v3)(),p=o.map((e=>a(e,{onRemove:()=>d(e)})));return(0,w.jsx)(f().A,{isInput:!0,children:(0,w.jsx)("div",{style:{padding:"4px 8px"},children:(0,w.jsx)(M().Ay,{focus:!A(m)||void 0,focusAfterAnimation:!0,format:M().le.FilterValue,tokens:p,placeholder:n.tokenInputPlaceholder,onRemoveLastToken:()=>function(e,n){const t=l().HV(e);t&&n(t)}(o,d),onClearButtonClick:u,value:t,onChange:s,showClearButton:!0,disabled:Boolean(r),style:T.inputMenu,...c})})})}function R(e,n,t,o,i,r,s,l,a,d,u){if(A(e)){return{menuType:C().gu.Modal,title:t.title,right:(0,w.jsx)(j().DoneMenuText,{}),onClickRight:n,header:(0,w.jsx)(P,{labelText:t,value:o,items:i,disabled:d,onChange:r,renderToken:s,onRemove:l,onClear:a,inputComboboxProps:u})}}return{menuType:C().gu.Popup,onClickOutside:n,header:(0,w.jsx)(P,{labelText:t,value:o,items:i,disabled:d,onChange:r,renderToken:s,onRemove:l,onClear:a,inputComboboxProps:u}),...T.menu}}function B(e){let{error:n,data:t,ready:i,labelText:r,value:l,renderResultMenuItem:a,onConfirm:d,menuListStore:u,comboboxProps:c}=e;const m=(0,v().uB)(u,b().A),p=(0,o.useCallback)((e=>(0,w.jsx)(f().A,{...e,title:r.resultSectionTitle,loading:!i})),[r,i]);if(n)return x().log({level:"error",from:r.componentDebugName,type:"requestFailed",error:(0,y().convertErrorToLog)(n),data:{miscDataToConvertToString:{query:l}}}),(0,w.jsx)(p,{children:(0,w.jsx)(I().A,{title:(0,w.jsx)(s().sA,{defaultMessage:"Something went wrong.",id:"search.inputMenu.errorMessage"})})});if(!t)return(0,w.jsx)(p,{children:(0,w.jsx)(I().A,{title:(0,w.jsx)(s().sA,{defaultMessage:"Loading…",id:"search.inputMenu.loading.message"})})});if(t&&0===t.length)return(0,w.jsx)(p,{children:(0,w.jsx)(I().A,{title:(0,w.jsx)(s().sA,{defaultMessage:"No results found",id:"search.inputMenu.noResults.message"})})});const h={key:"results",items:t.map((e=>function(e,n,t){return{key:e,action:()=>t(e),render:t=>n(e,t)}}(e,a,d))),render:p};return(0,w.jsx)(S().Ay,{type:S().Oh.Vertical,store:m,initialFocus:0,sections:[h],comboboxProps:c})}let D=function(e){return e.Button="Button",e.Section="Section",e.Pill="Pill",e}({});function F(e){const{items:n,keepInputOnItemConfirm:t,mode:r,onChange:s,onMenuDismiss:a,onMenuOpen:d}=e,{device:u}=(0,i().v3)(),c=(0,o.useRef)(),m=(0,o.useRef)(null),[p,h]=(0,o.useState)(!1),[f,g]=(0,o.useState)(""),[v,x]=(0,o.useState)(void 0),[y,C]=(0,o.useState)(void 0);function b(e,n){c.current=requestAnimationFrame((e=>{if(m&&m.current&&(C(m.current.getBoundingClientRect()),n)){const{shouldOpenMenu:e,nextIndexToReplace:t}=n;e&&(h(!0),x(t))}}))}(0,o.useEffect)((()=>(window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b),c.current&&(cancelAnimationFrame(c.current),c.current=void 0)})),[]);const S=n.length;function I(e){M(),h(!1),x(void 0),null==a||a(e)}function j(e){g(e.target.value)}function M(){g("")}function T(){s([])}const k=(0,o.useCallback)((e=>{const t=n.filter((n=>n!==e));s(t)}),[n,s]),A=(0,o.useCallback)((e=>{if("number"==typeof v&&v<n.length){const t=n.slice(0,v).concat(e,n.slice(v+1));s(t)}else if(n.includes(e)&&D.Pill)k(e);else{const t=n.concat(e);s(l().sb(t))}t||M()}),[k,v,n,t,s]);return(0,o.useEffect)((()=>{b()}),[S,r]),u.isMobile?(0,w.jsx)(N,{inputTemporaryValue:f,isMenuOpen:p,onClearInput:M,onClearItems:T,onItemConfirm:A,onMenuClose:I,onMenuInputChange:j,onMenuOpen:function(){h(!0)},onRemove:k,searchTokenFilterProps:e}):(0,w.jsx)(_,{hasItemsSelected:r===D.Pill&&e.hasItemsSelected,inputTemporaryValue:f,isMenuOpen:p,onClearInput:M,onClearItems:T,onItemConfirm:A,onMenuClose:I,onMenuInputChange:j,onMenuOpen:function(e){null==d||d(),b(0,{shouldOpenMenu:!0,nextIndexToReplace:e})},onRemove:k,popupOriginRect:y,ref:m,searchTokenFilterProps:e})}function L(e){return{buttonMenuItem:{color:e.text.secondary},appendListItemButton:{color:e.text.tertiary}}}function E(e,n){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},menuItemWrapper:{display:"flex"},sectionMenuItem:{display:"flex"},appendListItemButton:{minHeight:void 0,paddingTop:4,paddingBottom:4,fontSize:a().ny(e,"UIRegular")},icon:{height:16,width:16,marginRight:"Pill"===n?6:-2,fill:"currentColor"},iconSmall:{height:12,width:12},summary:{display:"inline"},summaryItem:{display:"inline"}}}const _=(0,o.forwardRef)((function(e,n){const{hasItemsSelected:r,inputTemporaryValue:s,isMenuOpen:l,onClearInput:a,onClearItems:c,onItemConfirm:m,onMenuClose:h,onMenuInputChange:f,onMenuOpen:g,onRemove:v,popupOriginRect:x,searchTokenFilterProps:y}=e,{addItemLabel:C,disabled:b,focused:S,icon:I,iconStyles:j,items:M,mode:T,renderFilter:k,title:A}=y,P=(0,i().v3)(),R=b||l,B=(0,o.useMemo)((()=>({open:l})),[l]),F=(0,o.useCallback)((()=>{g()}),[g]);return(0,w.jsxs)(t(806754).A,{title:T===D.Section?A:void 0,marginAfter:T===D.Section,style:E(P,T).sectionMenuItem,children:[T!==D.Pill&&(0,w.jsx)(H,{disableFilters:R,items:M,onClick:g,onRemove:v,renderFilter:k}),(0,w.jsx)(t(240260).k.Provider,{value:B,children:T===D.Section?(0,w.jsx)(O,{addItemLabel:C,disabled:b,isMenuOpen:l,mode:T,onClick:F,ref:n}):T===D.Button?(0,w.jsx)(W,{disabled:b,focused:S,icon:I,isMenuOpen:l,mode:T,onClick:F,ref:n,title:A}):T===D.Pill?(0,w.jsx)(z,{disabled:b,hasItemsSelected:r,icon:I,iconStyles:j,onClick:F,ref:n,title:A}):void(0,t(534177).HB)(T)}),(0,w.jsx)(p().Ay,{alignmentToOrigin:d().C.Start,keepFocus:!0,onDismiss:h,open:l,originRect:x,placementToOrigin:d().W.Bottom,popupType:u().n.Popup,preventScaleTransition:!0,render:()=>(0,w.jsx)(K,{searchTokenFilterProps:y,inputTemporaryValue:s,onMenuInputChange:f,onClearInput:a,onClearItems:c,onItemConfirm:m,onMenuClose:h,onRemove:v}),trapFocus:!0})]})}));function H(e){const{disableFilters:n,items:t,onClick:i,onRemove:r,renderFilter:s}=e,l=(0,o.useMemo)((()=>t.map(((e,t)=>(0,w.jsx)("li",{children:s(e,{disabled:n,onClick:()=>i(t),onRemove:()=>r(e)})},`${e}_${t}`)))),[n,t,i,r,s]);return(0,w.jsx)("ul",{style:a().$t,children:l})}const O=(0,o.forwardRef)((function(e,n){const{addItemLabel:o,disabled:s,isMenuOpen:l,mode:a,onClick:d}=e,u=E((0,i().v3)(),a),c=(0,r().IS)(L,[L]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{ref:n,style:u.menuItemWrapper}),(0,w.jsx)(m().A,{disabled:s||l,focused:!1,icon:(0,t(689094).W)(u.iconSmall),onClick:d,style:{...u.appendListItemButton,...c.appendListItemButton},title:o})]})})),W=(0,o.forwardRef)((function(e,n){const{disabled:t,focused:o,icon:s,isMenuOpen:l,mode:a,onClick:d,title:u}=e,c=E((0,i().v3)(),a),p=(0,r().IS)(L,[L]),h={...c.menuItem,...p.buttonMenuItem};return(0,w.jsx)("div",{ref:n,style:c.menuItemWrapper,children:(0,w.jsx)(m().A,{disabled:t||l,focused:o,icon:s(c.icon),onClick:d,style:h,title:u})})})),z=(0,o.forwardRef)((function(e,n){const{disabled:o,hasItemsSelected:r,icon:s,iconStyles:l,onClick:a,title:d}=e,u=E((0,i().v3)(),D.Pill);return(0,w.jsx)("div",{ref:n,style:u.menuItemWrapper,children:(0,w.jsx)(t(56394).A,{on:r,icon:s({...u.icon,...l}),title:(0,w.jsx)("span",{children:d}),onClick:a,wrapStyle:{opacity:o?.4:1}})})}));function U(e){const{disableFilters:n,items:t,mode:o,onClickClear:r,onMenuOpen:s,renderItemForSummary:l,title:d}=e,u=E((0,i().v3)(),o),c={...a().$t,...u.summary},m=t.length-1,p=(0,w.jsx)("ul",{style:c,children:t.map(((e,n)=>(0,w.jsxs)("li",{style:u.summaryItem,children:[l(e),n!==m&&","," "]},e)))});return(0,w.jsx)(g().A,{disabled:n,label:d,onClick:s,onClickClear:r,title:p})}function N(e){const{inputTemporaryValue:n,isMenuOpen:t,onClearInput:o,onClearItems:r,onItemConfirm:s,onMenuClose:l,onMenuInputChange:a,onMenuOpen:d,onRemove:c,searchTokenFilterProps:h}=e,{mode:f,disabled:g,title:v,items:x,renderItemForSummary:y,icon:C}=h,b=E((0,i().v3)(),f),S=g||t,I=f===D.Section?(0,w.jsx)(U,{disableFilters:S,items:x,mode:f,onClickClear:r,onMenuOpen:d,renderItemForSummary:y,title:v}):(0,w.jsx)(m().A,{disabled:S,focused:!1,icon:C({...b.icon}),onClick:d,title:v});return(0,w.jsx)(p().Ay,{keepFocus:!0,onDismiss:l,open:t,origin:I,popupType:u().n.SlideUp,render:()=>(0,w.jsx)(K,{inputTemporaryValue:n,onClearInput:o,onClearItems:r,onItemConfirm:s,onMenuClose:l,onMenuInputChange:a,onRemove:c,searchTokenFilterProps:h})})}function K(e){const{inputTemporaryValue:n,onClearInput:t,onClearItems:o,onItemConfirm:i,onMenuClose:r,onMenuInputChange:l,onRemove:a,searchTokenFilterProps:d}=e,{renderToken:u,renderFooter:m,allowApplyBatchSelection:p}=d;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(k,{...d,onChange:l,onClear:()=>{t(),o()},onConfirm:i,onDismiss:r,onRemove:a,renderToken:u,value:n}),m&&(0,w.jsxs)(f().A,{style:{padding:6,justifyContent:"space-between",display:"flex",flexDirection:"row"},topBorder:!0,children:[(0,w.jsx)(c().p,{onClick:o,children:(0,w.jsx)(s().sA,{id:"searchTokenFilter.clearButton",defaultMessage:"Clear"})}),p&&(0,w.jsx)(h().A,{onClick:()=>{r("applyButton")},children:(0,w.jsx)(s().sA,{defaultMessage:"Apply",id:"searchTokenFilter.applyButton"})})]})]})}},978625:(e,n,t)=>{t.d(n,{A:()=>a});t(296540);var o=()=>t(484714),i=()=>t(284371),r=()=>t(946548),s=()=>t(297401),l=t(474848);const a=function(e){const{disabled:n,label:i,title:r,onClick:s,isToggle:a,isToggleActive:c,onClickClear:m,...p}=e,h=(0,t(401497).DP)(),f=(0,o().v3)(),g=function(e){return{menuItemLabel:{color:e.text.tertiary}}}(h),v=d(f),x=(0,l.jsx)("span",{style:g.menuItemLabel,children:i});return(0,l.jsx)(t(760217).A,{focused:!1,...p,inline:a,disabled:n,icon:x,title:r,right:(0,l.jsx)(u,{disabled:Boolean(n),isToggle:Boolean(a),isToggleActive:Boolean(c),onClick:s,onClickClear:m}),onClick:s,dontShrinkIcon:!0,dontShrinkRight:!0,shouldWrapTitle:!0,style:v.menuItem,desktopIconStyle:v.menuItemLabel})};function d(e){return{menuItem:{background:void 0,minHeight:void 0,fontSize:e.device.isMobile?i().J.UISmall.mobile:i().J.UIRegular.desktop,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginTop:0},rightWrapper:{display:"flex",alignItems:"center",marginTop:"-50%",marginBottom:"-50%",height:44}}}function u(e){let{disabled:n,isToggle:t,isToggleActive:i,onClick:a,onClickClear:u=(()=>{})}=e;const c=d((0,o().v3)()).rightWrapper;return t?(0,l.jsx)("div",{style:c,children:(0,l.jsx)(r().A,{on:Boolean(i),onClick:a})}):(0,l.jsx)(s().A,{disabled:n,onClick:u})}}}]);