"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[39541],{9768:(e,t,o)=>{o.d(t,{Br:()=>M,Jh:()=>P,Lb:()=>x,YE:()=>b,cu:()=>I});o(16280),o(898992),o(672577);var i=o.n(o(32485)),n=o(296540),s=()=>o(484714),r=()=>o(56366),l=()=>o(778781),a=()=>o(534177),c=()=>o(623186),d=()=>o(780054),u=()=>o(600871),p=()=>o(478726),g=()=>o(963589),m=()=>o(548821),h=()=>o(517223),S=()=>o(823082),f=()=>o(241181),v=()=>o(817942),y=o(474848);const x=12,b=12,C=10,k=10,w=8;function _(e){let{collectionSchema:t,module:o}=e;return!(!t||"normalizedTitleWithIcon"!==o.type)&&(0,h().LD)({collectionSchema:t,module:o}).length>0}function P(e){let{layoutModule:t,area:o,context:s,collectionSchema:u,collectionStore:h,showDetailsPanelToggleButtonBelowTitle:P,modules:M,postContext:I}=e;const T=M.findIndex((e=>e.id===t.id)),A=null!=M&&M.length&&-1!==T?M[T+1]:void 0,j=(0,f().p)({collectionStore:h,layoutModule:A}),B=(0,c().aN)(h),L=(0,r().K8)((()=>Boolean(null==h?void 0:h.isPageTreeCollection())),[h]),V=(0,g().X)("content_reskin_v2"),[E,D]=(0,n.useMemo)((()=>{const e=_({collectionSchema:u,module:t});let i=!1;const n={};if("page_details"===o||"person_profile_page_details"===o)n.marginBottom=C,n.paddingBottom=k;else if("page_main"===o||"person_profile_page_main"===o)n.marginBottom=b,n.paddingBottom=x;else if("views_main_tab_modules"===o)n.marginBottom=b,n.paddingBottom=x;else{if("form_layout_schema"===o||"form_conditional_modules"===o)throw new Error("Not implemented for forms");(0,a().HB)(o)}const r="editor"===(null==A?void 0:A.type);(0,p().Mi)(I)?"editor"===t.type&&I!==m().Rr.DraftPostInFullPageComposer?i=!0:"normalizedTitleWithIcon"===t.type&&(n.marginBottom=void 0,n.paddingBottom=w):r&&(i=!0,"normalizedTitleWithIcon"!==t.type||e||(i=!1,n.marginBottom=void 0,n.paddingBottom=void 0),"views_main_tab_modules"===o&&(i=!1,n.marginBottom=void 0,n.paddingBottom=void 0)),j&&n.marginBottom&&(n.marginBottom=Math.max(n.marginBottom-4,0)),"page_main"!==o&&"page_details"!==o&&"views_main_tab_modules"!==o||(V||"discussions"===t.type?n.marginLeft=0:"normalizedTitleWithIcon"===t.type?n.marginLeft=-4:(0,l().gx)(t)||"properties"===t.type||"relationsGroup"===t.type?n.marginLeft=-6:"editor"===t.type&&(n.marginLeft=-2));const c="views"===(null==A?void 0:A.type)||"editor"===(null==A?void 0:A.type);return"page_main"!==o&&"page_details"!==o||!n.paddingBottom||c||("property_text"===t.type||"property_relation"===t.type&&B?n.paddingBottom=Math.max(n.paddingBottom-4,0):"properties"===t.type&&(L&&!d().A.isMobile||(n.paddingBottom=Math.max(n.paddingBottom-4,0))),"viewsMain"===(null==A?void 0:A.type)&&(n.paddingBottom=Math.max(n.paddingBottom-12,0))),"normalizedTitleWithIcon"===t.type&&(e?d().A.isMobile&&"properties"===(null==A?void 0:A.type)&&!j&&(n.paddingBottom=void 0,n.marginBottom=4):(P?"discussions"===(null==A?void 0:A.type)&&(n.marginBottom=void 0):"properties"===(null==A?void 0:A.type)?(n.paddingBottom=void 0,n.marginBottom=8):"discussions"===(null==A?void 0:A.type)&&(n.paddingBottom=x),d().A.isMobile&&"discussions"===(null==A?void 0:A.type)&&(n.marginBottom=void 0))),"bottomControls"===t.type&&(n.paddingBottom=void 0,n.marginBottom=void 0),"discussions"===t.type&&r&&(n.paddingBottom=void 0),"inlinePageSections"!==(null==A?void 0:A.type)&&"expandedBacklinks"!==(null==A?void 0:A.type)&&"bottomControls"!==(null==A?void 0:A.type)||(n.marginBottom=8),"editor"!==t.type||(0,p().Mi)(I)||s===m().Rr.Presentation||(n.marginTop=8),("views"===t.type||"editor"===t.type&&!(0,p().Mi)(I))&&(n.paddingBottom=void 0,n.marginBottom=void 0),"viewsMain"===t.type&&(n.paddingBottom=void 0),s===m().Rr.DraftPostInInlineComposer&&(n.marginBottom=4,n.paddingBottom=0),[i,n]}),[u,t,o,null==A?void 0:A.type,j,L,s,B,P,I,V]);return(0,n.useMemo)((()=>function(e){return(0,y.jsx)(v().vV,{className:i()({"layout-content-with-divider":E}),style:D,testId:(0,S().H)(t),children:e})}),[t,E,D])}function M(e){let{layoutModule:t,area:o,collectionSchema:i,collectionStore:n,showDetailsPanelToggleButtonBelowTitle:l,pageMainModules:a}=e;const c=(0,s().Y0)(),p=(0,r().K8)((()=>{if(!n)return!1;return!!a.find((e=>"normalizedTitleWithIcon"===e.type))&&l}),[n,a,l]),g=(0,u().D1)(c);if(!n)return!1;if("properties"!==t.type&&"discussions"!==t.type&&"relationsGroup"!==t.type)return!1;if("page_main"!==o)return!0;const m=a.findIndex((e=>e.id===t.id));if(0===m||a.length<=1)return!1;if("discussions"===t.type&&g)return!1;const h=a[m-1];if("normalizedTitleWithIcon"!==(null==h?void 0:h.type))return!0;if("relationsGroup"===t.type&&p)return!0;if("properties"===t.type&&p&&!d().A.isMobile)return!0;const S=_({collectionSchema:i,module:h});return("properties"!==t.type||!d().A.isMobile||!S)&&S}function I(e){let{collectionStore:t,modulesByArea:o}=e;return!((t.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0})||[]).length>0)&&0===(0,h().Ul)({collectionStore:t,modulesByArea:o}).length}},25680:(e,t,o)=>{o.d(t,{S:()=>c});var i=o(296540),n=()=>o(56366),s=()=>o(466721),r=()=>o(548821),l=()=>o(650031);const a=new(o(299919).Y)((e=>new(o(547726).A)));function c(e){let{store:t,environment:o,postContext:c}=e;const{pageVisitStore:d,presenceStore:u}=(0,n().K8)((()=>({pageVisitStore:a.get(t),presenceStore:new(l().A)})),[t]);return(0,i.useEffect)((()=>{!c||c!==r().Rr.PostInFullPageOrPeek&&c!==r().Rr.PostInFeed||(t.id!==d.state.pageId&&d.setState({...d.getInitialState(),pageId:t.id}),s().Ds(o,{blockStore:t,pageVisitStore:d,incremental:!1,includeTotalCount:!0}))}),[t,d,o,u,c]),{pageVisitStore:d,presenceStore:u}}},33301:(e,t,o)=>{o.d(t,{T:()=>g,n:()=>p});var i=()=>o(908006),n=()=>o(217429),s=()=>o(75368),r=()=>o(970330),l=()=>o(896628),a=()=>o(722101),c=()=>o(246826),d=()=>o(778417),u=()=>o(725614);function p(e){const{environment:t,store:o,transaction:l,preventTextSelection:p,onTextSelection:g}=e;n().default.checkGate({gateName:"mobile_keep_template_gallery_open"})&&s().A.state.open&&s().A.setState({open:!1});const m=(()=>{const e=o.getContentStores();if(1===e.length&&e[0].isEmptyTextBlock())return e[0];const i=c().Wv({environment:t,type:"text",inMemoryRecordCache:o.inMemoryRecordCache,transaction:l,spaceId:o.pointer.spaceId}),n=a().BC({parentStore:o.getContentStore(),appendStore:i,transaction:l}).childStore;return r().v(t,{from:"template_picker",type:"text",creating_block_id:i.id,parent_collection_id:i.getParentCollectionIdUpToTwoLevels()}),n})();return p||i().default.afterNextFlush((()=>{d().hc({environment:t,store:m}),u().setSelectionAtStart({store:m.getBlockTitleStore()}),null==g||g()})),m}function g(e){const{environment:t,store:o,transaction:i}=e;l().vc({store:o,transaction:i}),p({environment:t,store:o,transaction:i})}},67141:(e,t,o)=>{o.d(t,{v:()=>y});o(898992),o(430670);var i=()=>o(484714),n=()=>o(56366),s=()=>o(187174),r=()=>o(68263),l=()=>o(798880),a=()=>o(496603),c=()=>o(763824),d=()=>o(186445),u=()=>o(731320),p=()=>o(765957),g=()=>o(21735),m=()=>o(217429),h=()=>o(375447),S=()=>o(870092),f=()=>o(271084);const v=100;function y(){const e=(0,i().v3)(),t=(0,n().O$)(p().AppStoreCurrentSpaceStore),o=(0,n().K8)((()=>(0,d()._m)(e)),[e]),y=(0,n().K8)((()=>{const{spaceId:e,userId:i}=h().Ay.state.emptyQueryUserRequestStore.state.request??{};return(null==t?void 0:t.id)!==e||(null==o?void 0:o.id)!==i}),[t,o]),x=(0,n().K8)((()=>{const e=g().A.state.shouldUseEdgeCache,t=m().default.checkGate({gateName:"edge_cache_mentions"});return e&&t}),[]);(0,s().Yb)((async()=>{if(!x||!t||!y)return;h().Ay.state.emptyQueryUserRequestStore.setState({...h().Ay.state.emptyQueryUserRequestStore.state,ready:!1,loading:!0}),await f().k.waitUntilLoaded();const e=f().k.getSortedUserIds(),i=p().default.state.mainEditorCurrentBlockStore,n=i?(0,u().i0)(i).flatMap((e=>{let{permissionItem:t}=e;return(0,r().B2)(t)?[t.user_id]:[]})):[],s=(0,a().sb)([...(0,a().oE)([null==o?void 0:o.id]),...e,...n]),d=(0,c().lX)(s.slice(0,v),v,(async e=>{if(e===(null==o?void 0:o.id))return null==o?void 0:o.getValue();const i=S().L.createChildStore(t,{table:l().oo,id:e});return await i.load(),i.getValue()})),g=await d;h().Ay.state.emptyQueryUserRequestStore.setState({ready:!0,loading:!1,result:(0,a().oE)(g),request:{spaceId:t.id,userId:(null==o?void 0:o.id)??""}})}),[t,o,y,x])}},67805:(e,t,o)=>{o.d(t,{X:()=>l,c:()=>a});o(898992),o(672577);var i=()=>o(68263),n=()=>o(731320),s=()=>o(765957),r=()=>o(217429);function l(e,t){return e.sort(((e,o)=>{const i=e.store.canAdmin();if(i===o.store.canAdmin()){var n,s;const i=null===(n=e.publishedMetadata.publishedBy)||void 0===n?void 0:n.id,r=e.publishedMetadata.publishedTime,l=null===(s=o.publishedMetadata.publishedBy)||void 0===s?void 0:s.id,a=o.publishedMetadata.publishedTime;if(t){if(i===t&&l===t&&r&&a)return a-r;if(i===t)return-1;if(l===t)return 1}return r&&a?a-r:0}return i?-1:1}))}function a(e){const{environment:t,store:o}=e,l=r().default.checkGate({gateName:"allow_disable_sites_banner"});if(!o.pathIsAccessibleAndAlive())return!1;if(!n().i0(o).find((e=>(0,i().W8)(e.permissionItem))))return!1;const a=s().default.getState().currentSpaceStore;if(null!=a&&a.getSettings().hide_sites_banner&&l)return!1;return!n().qb(t,o)}},77126:(e,t,o)=>{o.d(t,{j:()=>n});class i extends(()=>o(959180))().A{}const n=new i},155129:(e,t,o)=>{o.d(t,{X:()=>i});const i=(0,o(296540).createContext)(0);i.displayName="PageViewHorizontalOffsetContext"},158574:(e,t,o)=>{o.d(t,{Bq:()=>u,K$:()=>g,OW:()=>a,de:()=>d,o:()=>p});var i=()=>o(908006),n=()=>o(919709),s=()=>o(725614),r=()=>o(751156);const l=1e3;function a(e){if(e){const t=(0,n().q4_)(e.getValue());return Boolean(t)}return!1}function c(e){if(e){const t=e.getSettings();if(t&&t.hidden_collection_descriptions)return t.hidden_collection_descriptions}return[]}function d(e){const{environment:t,descriptionStore:o}=e;p(e),i().default.afterNextFlush((()=>{o&&!t.device.isMobileBrowser&&s().setSelectionAtEnd({store:o})}))}function u(e){const{toggleStore:t,pageId:o,descriptionStore:i,environment:n,userSettingsStore:s}=e;p({environment:n,pageId:o,isExpanded:!t.state.isPageDescriptionExpanded,store:t,userSettingsStore:s,descriptionStore:i})}function p(e){const{environment:t,pageId:o,isExpanded:i,store:n,userSettingsStore:s,descriptionStore:d}=e,u=n.state.isPageDescriptionExpanded;n.setState({...n.state,isPageDescriptionExpanded:i});a(d)&&s&&u!==i&&r().createAndCommit({userAction:"pageDescriptionActions.setExpanded",environment:t,canUndo:!0,perform:e=>{if(i){const t={pointer:{table:"user_settings",id:s.id},path:["settings","hidden_collection_descriptions"],command:"listRemove",args:{id:o}};r().applyOperation({store:s,transaction:e,operation:t})}else{const t={pointer:{table:"user_settings",id:s.id},path:["settings","hidden_collection_descriptions"],command:"listAfter",args:{id:o}};r().applyOperation({store:s,transaction:e,operation:t});let i=c(s);for(;i.length>l;){const t=i[0],o={pointer:{table:"user_settings",id:s.id},path:["settings","hidden_collection_descriptions"],command:"listRemove",args:{id:t}};r().applyOperation({store:s,transaction:e,operation:o}),i=c(s)}}}})}function g(e){const{pageId:t,store:o,userSettingsStore:i,descriptionHasText:n}=e;let s=n;c(i).includes(t)&&(s=!1),o.setState({...o.state,isPageDescriptionExpanded:s})}},165121:(e,t,o)=>{o.d(t,{A:()=>n});class i extends(()=>o(757695))().Store{constructor(){super()}getInitialState(){}}const n=new i},182034:(e,t,o)=>{o.d(t,{O:()=>u,e:()=>d});o(898992),o(672577);var i=()=>o(908006),n=()=>o(878523),s=()=>o(725614),r=()=>o(892632),l=()=>o(299545),a=()=>o(77126),c=()=>o(489348);function d(e,t){const o=l().dd(t),i=r().xh(o);e.setState({...e.state,files:i})}async function u(e){const{blockStore:t,pageViewBlockStore:o,environment:r}=e;o?o.setState({...o.state,forceDiscussionOpen:!0}):c().A.openNewPageDiscussionInput(t),n().o2(r,{from:"page_comments"}),await i().default.afterNextFlush();const l=a().j.find((e=>e.getBlockStore().id===t.id)),d=null==l?void 0:l.getInputStore();d&&s().setSelectionAtEnd({store:d.state.textStore})}},257502:(e,t,o)=>{o.d(t,{d:()=>ne});o(18107),o(967357),o(898992),o(672577),o(430670),o(581454);var i=()=>o(244641),n=o(296540),s=()=>o(662303),r=()=>o(484714),l=()=>o(56366),a=()=>o(401497),c=()=>o(799954),d=()=>o(869190),u=()=>o(546703),p=()=>o(350124),g=()=>o(310442),m=()=>o(824862),h=()=>o(798880),S=()=>o(959013),f=()=>o(496603),v=()=>o(534177),y=()=>o(774733),x=()=>o(517288),b=()=>o(902731),C=()=>o(848565),k=()=>o(11048),w=()=>o(155004),_=()=>o(704152),P=()=>o(285790),M=()=>o(256863),I=()=>o(453697),T=()=>o(21140),A=()=>o(126126),j=()=>o(780054),B=()=>o(828634),L=()=>o(862292),V=()=>o(38337),E=()=>o(645873),D=()=>o(963589),R=()=>o(732430),K=()=>o(548821),O=()=>o(729380),F=()=>o(551619),z=()=>o(720501),W=()=>o(161479),H=()=>o(404783),N=o(474848);function U(e){const{store:t,discussionStore:o,isFirst:i,isOnly:s,discussionLocation:l,collapsed:a}=e,c=(0,r().v3)(),d=(0,n.useMemo)((()=>new(H().A)(c,(0,W().e)(t.pointer.spaceId))),[c,t.pointer.spaceId]),{value:u}=(0,E().fJ)(y().commentsDependency);return u?(0,N.jsx)(y().PW,{store:o,format:u.discussionHelpers.DiscussionFormat.Page,isFirst:i,isOnly:s,collapsed:a,showResolveButtonByDefaultIfPossible:!1,blockStore:t,discussionInputStore:d,..."post_top_level_discussion"===l?{discussionLocation:"post_top_level_discussion",pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore}:{discussionLocation:"page_discussion"}},o.id):null}var G=()=>o(908006),Y=()=>o(790748),q=()=>o(197959),X=()=>o(725614),$=()=>o(751156),Q=()=>o(583824),J=()=>o(143857),Z=()=>o(77126),ee=()=>o(630116);function te(e){const{store:t,from:o}=e,i=(0,r().v3)(),s=(0,n.useMemo)((()=>new(H().A)(i,(0,W().e)(t.pointer.spaceId))),[i,t.pointer.spaceId]),a=(0,n.useRef)(null),c=(0,n.useCallback)((()=>{X().clear({environment:i})}),[i]),d=function(e){const{environment:t,discussionInputStore:o,store:i,from:s}=e,r=(0,l().uB)(void 0,K().Ay),a=(0,n.useCallback)((e=>{var o;const n=i.id;null===(o=t.PageDetailsStore)||void 0===o||o.setToggleState({environment:t,type:"discussion",id:n},e)}),[t,i.id]);return(0,n.useCallback)((async()=>{const e=o.state.textStore.getValue(),n=o.state.files;if((!e||0===e.length)&&0===n.length)return;const l=await L().T.formulas.load(),c=(0,W().e)(i.pointer.spaceId),d=t.idCreator.getSpaceIdCreatorSync(c).deterministicIdInSavedSpace(q().$Y,`${i.id}-discussion-0`),u=d?ee().sk.createChildStore(i,{table:q().$Y,id:d,spaceId:c}):void 0;await(null==u?void 0:u.load());const p=Boolean(!(null!=u&&u.getResolved())),{performResult:g}=$().createAndCommit({userAction:"PageDiscussion.useSubmitNewDiscussion",environment:t,canUndo:!0,perform:o=>(0,Q().i)({discussionId:p?d:void 0,environment:t,type:"default",blockStore:i,commentTextValue:e||[],transaction:o,files:n,formulasModule:l,fromOverride:s}),skipUpdatingEditedMetadata:!0});if(o.reset(),r.setState({...r.state,forceDiscussionOpen:!1}),a(!0),g&&!j().A.isMobile){await G().default.afterNextFlush();const e=J().A.find((e=>e.getStore().id===g.id));e&&X().setSelectionAtEnd({store:e.getInputStore().state.textStore})}}),[o,t,r,a,i,s])}({environment:i,discussionInputStore:s,store:t,from:o});(0,Y().b)(Z().j,(()=>({getNode:()=>a.current,getBlockStore:()=>t,getInputStore:()=>s})),[s]);const{value:u}=(0,E().fJ)(y().commentsDependency);return u?(0,N.jsx)("div",{ref:a,children:(0,N.jsx)(y().bd,{showAvatar:!0,parentStore:t,onSubmit:d,onCancel:c,discussionInputStore:s,discussionFormat:u.discussionHelpers.DiscussionFormat.Page,isMobileSlideUpMenu:!1,shouldSaveUnsentComments:!0,canDrop:!0,blockStore:t})}):null}const oe=5;function ie(e){const{store:t,showDiscussionInput:o,unresolvedDiscussionStores:c,discussionLocation:g,collapsed:m}=e,h=(0,r().v3)(),v=(0,S().tz)(),{value:k}=(0,E().fJ)(L().T.formulas),{value:w}=(0,E().fJ)(y().commentsDependency),M=(0,D().X)("block_reactions"),I=(0,l().K8)((()=>c.find((e=>e.getReactions().length>0))),[c]),T=(0,l().K8)((()=>c.find((e=>e.getCommentPointers().length>0))),[c]),B=(0,l().K8)((()=>Boolean(I)),[I]),O=(0,l().K8)((()=>(null==T?void 0:T.getCommentPointers().length)??0),[T]),z=(0,l().K8)((()=>{const e=[...(null==T?void 0:T.getCommentStores())??[]].reverse().flatMap((e=>{const t=e.getCreatedByStore();return t?[t]:[]}));return f().hS(e,"id").slice(0,oe)}),[T]),{lastReplyTime:W}=(0,l().K8)((()=>{const e=null==T?void 0:T.getCommentStores().at(-1),t=null==e?void 0:e.getCreatedTime();return{lastReplyTime:t?(0,d().eV)({value:i().c9.fromMillis(t),preset:"time",locale:s().locale}):void 0}}),[T]),H=(0,n.useCallback)((e=>{const o=T;if(!o)return;const i=e.target;(0,b().IX)({environment:h,discussionStore:o,rect:i.getBoundingClientRect(),blockStore:t,discussionLocation:"post_top_level_discussion"})}),[h,t,T]),G=(0,D().X)("simple_reaction_style"),Y=(0,a().IS)((e=>{const t={paddingTop:c.length>0?12:-1*C().Ql/2,paddingBottom:12,paddingRight:4};return{pageViewDiscussion:{width:"100%",margin:"0 auto"},newPageDiscussionWrapper:{..."post_top_level_discussion"===g?{padding:0}:t},emptyPostDiscussion:{display:"flex",justifyContent:"space-between",paddingBottom:12},reactionButton:{...null==w?void 0:w.REACTION_PILL_STYLE,width:40,paddingLeft:10,paddingRight:10,borderRadius:13,borderWidth:1,borderColor:e.stroke.secondary,borderStyle:"solid",...j().A.isMobile?null==w?void 0:w.MOBILE_REACTION_PILL_STYLE_OVERRIDES:{},...G?{border:"none",background:e.surface.wash}:{}},reactionIcon:{width:22,height:22,fill:e.icon.secondary,marginTop:-.5,marginRight:1}}}),[c.length,g,w,G]),q=(0,a().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:12},presenceReactionsContainer:{display:"flex",flexDirection:"row",justifyContent:M?"space-between":"flex-end",...j().A.isMobile?{justifyContent:"flex-start",gap:4}:{}},reactionsContainer:{display:"flex",gap:6,minHeight:27},repliesButton:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",padding:4,borderRadius:6},repliesButtonContent:{display:"flex",alignItems:"center",gap:8},repliesInfo:{display:"flex",alignItems:"baseline",gap:8},replyCount:{fontSize:14,color:e.text.primary},lastReplyTime:{fontSize:12,color:e.text.tertiary}})),[M]);if("post_top_level_discussion"===g&&(null==e?void 0:e.pageViewBlockContext)===K().Rr.PostInFeed){const o=e.pageVisitStore&&e.presenceStore,i=o&&j().A.isMobile;return(0,N.jsxs)("div",{style:q.container,children:[(0,N.jsxs)("div",{style:q.presenceReactionsContainer,children:[M&&(0,N.jsxs)("div",{style:q.reactionsContainer,children:[I&&(0,N.jsx)(y().PH,{focused:!0,disableShadow:!0,parentStore:I,discussionLocation:e.discussionLocation,showAddReactionButton:!0,additionalItems:i?(0,N.jsx)(R().s9,{pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore,rootStore:t,enableFacepile:!1,isShowingInPostFeed:!0}):void 0}),!B&&(0,N.jsx)(P().A,{ariaLabel:v.formatMessage({defaultMessage:"Add reaction",id:"ReactionBar.newReaction.ariaLabel"}),hasBackground:!1,showShadow:!1,style:Y.reactionButton,icon:()=>(0,u().r)(Y.reactionIcon),onClick:e=>{(0,x().O)({environment:h,blockStore:t,rect:e.currentTarget.getBoundingClientRect(),skipOpeningDiscussionOnSubmit:!0,formulasModule:k})}})]}),B&&i||!o?null:(0,N.jsx)(R().s9,{pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore,rootStore:t,maxUsers:5,enableFacepile:!j().A.isMobile,isShowingInPostFeed:!0})]}),O>0?(0,N.jsx)(_().A,{style:q.repliesButton,onClick:H,children:(0,N.jsxs)("div",{style:q.repliesButtonContent,children:[(0,N.jsx)(re,{commenters:z}),(0,N.jsxs)("div",{style:q.repliesInfo,children:[(0,N.jsx)("div",{style:q.replyCount,children:(0,N.jsx)(S().sA,{defaultMessage:"{replyCount, plural, one {{replyCount} reply} other {{replyCount} replies}}",id:"pageLayout.discussionsModule.replyCount",values:{replyCount:O}})}),W&&(0,N.jsx)("div",{style:q.lastReplyTime,children:W})]})]})}):(0,N.jsx)("div",{style:Y.newPageDiscussionWrapper,children:(0,N.jsx)(te,{from:g,store:t})})]})}return(0,N.jsxs)("div",{style:Y.pageViewDiscussion,onMouseDown:F().NV,onClick:F().sx,className:V().Jv,children:["post_top_level_discussion"===g&&!B&&(0,N.jsxs)("div",{style:Y.emptyPostDiscussion,children:[(0,N.jsx)(P().A,{ariaLabel:v.formatMessage({defaultMessage:"Add reaction",id:"ReactionBar.newReaction.ariaLabel"}),hasBackground:!1,showShadow:!1,style:Y.reactionButton,icon:()=>(0,p().s)(Y.reactionIcon),onClick:e=>{(0,x().O)({environment:h,blockStore:t,rect:e.currentTarget.getBoundingClientRect(),skipOpeningDiscussionOnSubmit:!0,formulasModule:k})}}),e.pageVisitStore&&e.presenceStore&&(0,N.jsx)(A().hJ,{pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore,rootStore:t,maxUsers:5,isShowingInPostFeed:!0})]}),c.map(((o,i,n)=>(0,N.jsx)(U,{store:t,discussionStore:o,isFirst:0===i,isOnly:1===n.length,collapsed:m,..."post_top_level_discussion"===g?{discussionLocation:"post_top_level_discussion",pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore}:{discussionLocation:g}},o.id))),o&&(0,N.jsx)("div",{style:Y.newPageDiscussionWrapper,children:(0,N.jsx)(te,{from:g,store:t})})]})}function ne(e){const{store:t,wrapper:o,discussionLocation:i,collapsed:s,showDefaultTitle:r,pageDiscussionsRenderState:l}=e,a=(0,n.useRef)(null),d=(0,n.useCallback)((e=>{O().u.setDiscussionsHeight(e.height)}),[]);(0,B().tK)(a,d);const u=(0,D().X)("content_reskin_v2");return(0,N.jsx)(k().A,{name:"PageDiscussionsWrapper",children:"hidden"!==l.type&&o((0,N.jsxs)(T().wt,{style:u?{paddingLeft:c().dE.paddingLeft}:{},gap:2,ref:a,children:[r&&(0,N.jsx)(z().j,{store:t,children:(0,N.jsx)(S().sA,{id:"pageLayout.discussionsModule.title",defaultMessage:"Comments"})}),(0,N.jsx)(w().s,{allowSelectionWithin:!0,children:(0,N.jsx)(ie,{...l,withLegacyInputPadding:!0,store:t,collapsed:s,..."post_top_level_discussion"===i?{discussionLocation:"post_top_level_discussion",pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore,pageViewBlockContext:e.pageViewBlockContext}:{discussionLocation:"page_discussion"}})})]}))})}function se(e){const{actorStore:t,size:o}=e;return t.table===m().GP?(0,N.jsx)(M().A,{botStore:t,size:o}):t.table===h().oo?(0,N.jsx)(I().A,{userStore:t,size:o}):t.table===g().yj?(0,N.jsx)(I().A,{userStore:void 0,size:o}):void(0,v().HB)(t)}function re(e){const{commenters:t}=e,o=(0,a().IS)((()=>({container:{display:"flex",alignItems:"center",width:16*t.length+8,paddingRight:8}})),[t.length,8]);return(0,N.jsx)("div",{style:o.container,children:t.map(((e,o)=>(0,N.jsx)("div",{style:{position:"relative",left:-8*o,zIndex:t.length-o},children:(0,N.jsx)(se,{actorStore:e,size:24})},e.id)))})}},259140:(e,t,o)=>{o.d(t,{A:()=>ie});o(944114),o(898992),o(354520),o(581454);var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(713998),l=o(474848);const a=(0,o(340498).wt)("addPageDiscussion",{viewBox:"0 0 16 16",svg:(0,l.jsx)("path",{d:"M4.095 15.465c.287 0 .499-.137.84-.444l2.523-2.277 4.47.007c2.058 0 3.214-1.19 3.214-3.22V4.22c0-2.03-1.156-3.22-3.213-3.22H3.213C1.163 1 0 2.19 0 4.22V9.53c0 2.037 1.196 3.22 3.165 3.213h.273v1.983c0 .45.24.738.657.738zM3.958 5.156a.454.454 0 01-.444-.45c0-.24.198-.438.444-.438h7.157c.246 0 .445.198.445.437a.45.45 0 01-.445.451H3.958zm0 2.256a.454.454 0 01-.444-.451c0-.24.198-.444.444-.444h7.157a.448.448 0 010 .895H3.958zm0 2.256a.448.448 0 010-.896h4.669c.246 0 .437.206.437.452a.438.438 0 01-.437.444H3.958z"})});var c=()=>o(413267),d=()=>o(778781),u=()=>o(959013),p=()=>o(284371),g=()=>o(222299),m=()=>o(774733),h=()=>o(11048),S=()=>o(155004),f=()=>o(493823),v=()=>o(406699),y=()=>o(710149),x=()=>o(780054),b=()=>o(645873);const C=new(b().O2)("floatingTableOfContents",(async()=>await o.e(52614).then(o.bind(o,666892)))),k=(0,b()._h)(C,(e=>e.FloatingTableOfContents));var w=()=>o(38337),_=()=>o(449195),P=()=>o(722872),M=()=>o(478726);o(16280);var I=()=>o(299545),T=()=>o(25680),A=()=>o(644914),j=()=>o(217429),B=()=>o(548821),L=()=>o(712505),V=()=>o(557198),E=()=>o(678834),D=()=>o(918487),R=()=>o(661344),K=()=>o(601726),O=()=>o(257502),F=()=>o(729923),z=()=>o(793282),W=()=>o(483832),H=()=>o(660197),N=(o(672577),()=>o(180762)),U=()=>o(646447),G=()=>o(630116),Y=()=>o(186445),q=()=>o(747100),X=()=>o(661179),$=()=>o(154807);function Q(e){let{pageStore:t,disabled:o,viewsModule:r,wrapper:a,templatePickerMenuListStore:c,editorContentContainerRef:d}=e;const u=(0,n().v3)(),[p,g]=(0,i.useState)(void 0),{collectionViewBlockStore:m,viewsModuleContext:h,isViewsMainModule:S}=(0,s().K8)((()=>{if(!r)return{collectionViewBlockStore:void 0,collectionViewId:void 0,viewsModuleContext:void 0,isViewsMainModule:!1};const e=G().Bv.createChildStore(t,r.collection_view_block_pointer);return{collectionViewBlockStore:e,viewsModuleContext:{location:"page",viewsModule:r,currentPageStore:t,collectionViewBlockStore:e},isViewsMainModule:"viewsMain"===r.type}}),[t,r]);!function(e){let{isViewsMainModule:t,collectionViewBlockStore:o,environment:n,collectionContextStore:r}=e;const l=(0,s().K8)((()=>{if(!t||!o)return;const e=n.RouterStore.state.route;if("page"===e.name&&e.scrollToBlockId){const e=o.getCollectionViewStores().find((e=>"page"===e.getType()));return null==e?void 0:e.id}}),[n,o,t]);(0,i.useEffect)((()=>{r&&l&&(0,N().t)({environment:n,collectionContextStore:r,collectionViewId:l,isFullScreen:r.isFullScreenStore.state,isRootChild:r.isRootChildStore.state,isInPeekRenderer:r.isInPeekRendererStore.state})}),[n,l,o,t,r])}({isViewsMainModule:S,collectionViewBlockStore:m,environment:u,collectionContextStore:p});const f=function(e){const t=(0,n().v3)();return(0,s().K8)((()=>{if(!e)return 0;const{device:o}=t,i=t.WindowSizeStore.state.width,n=Boolean(e&&(0,q().cq)(e));if(n){const e=(0,$().eO)({environment:t,isInPeek:!0});return L().default.getPeekModeWidth(i)-X().A.state-e}const s=(0,A().zo)(t,n)-(0,A().Ql)(t);let r=i-X().A.state-s;if(!(0,A().tv)(t))return r;const{shouldShowSidebar:l}=(0,Y().X4)(t);return x().A.isMobile&&!o.isTablet||!l||(r-=(0,A().kf)(t)),r}),[t,e])}(m),v=function(e){let{isViewsMainModule:t,collectionViewBlockStore:o,collectionContextStore:i}=e;return(0,s().K8)((()=>{if(!t||!i)return!1;const e=null==i?void 0:i.collectionViewStore();return 1===(null==o?void 0:o.getCollectionViewStores().length)&&"page"===(null==e?void 0:e.getType())&&!(null!=e&&e.getFormat().page_pointer)}),[t,i,o])}({isViewsMainModule:S,collectionViewBlockStore:m,collectionContextStore:p});return m&&h?a((0,l.jsx)("div",{style:S?{minHeight:"60vh"}:void 0,children:(0,l.jsx)(U().dN,{store:m,isFullScreen:!1,productUseCase:"page_views_module",hideViewTabBar:v,headerActionsBehavior:v?"hidden":"always_show",headerAllowedActions:J,disabled:o,disableHoverMenu:!0,fullWidth:f,showOnlyCurrentView:!S,isUnlistedView:!1,viewsModuleContext:h,setCollectionContextStore:g,templatePickerMenuListStore:c,editorContentContainerRef:d})})):null}const J=["filter","sort","search","addItem","noDate"];var Z=()=>o(996262),ee=()=>o(9768);const te=new(b().O2)("PageLayoutModuleErrorFallback",(()=>o.e(98396).then(o.bind(o,100826)))),oe=(0,b()._h)(te,(e=>e.PageLayoutModuleErrorFallback));const ie=function(e){const{store:t,context:d,postContext:g,disabled:y,templatePickerMenuListStore:C,styleOverrides:T,onHeaderMouseEnter:j,onHeaderMouseLeave:L,pageCoverHeight:D,isEditable:R,getControlHoverStyle:K,pageViewBlockStores:O,pageViewBlockAccessor:F,onDetailMouseEnter:z,onDetailMouseLeave:W,modules:H,editorContentContainerRef:N,layoutRef:U}=e,G=(0,n().v3)(),Y=(0,s().K8)((()=>t.getAssociatedCollectionStore()),[t],{debugName:"PageLayoutModules(collectionStore).useComputedStore"}),q=(0,s().K8)((()=>t.getSchema()),[t],{debugName:"PageLayoutModules(schema).useComputedStore"}),X=(0,s().K8)((()=>(0,o(577814).A)({environment:G,store:t,pageViewBlockStore:O.pageViewBlockStore})),[G,t,O.pageViewBlockStore]),$=(0,s().K8)((()=>{const e=(0,M().gV)(t);if(!e)return;return(e.collection_page_sections||[]).filter((e=>{const o=q[e.section];if(!o||"relation"!==o.type)return;const i=t.getPropertyValue(e.section),n=(0,r().bG)({relationValue:(0,r().n)(i),propertySchema:o,getRecordModel:t.getRecordModel,includeNoAccess:!0}).length;return"inline"===e.visibility&&q[e.section]&&0!==n})).map((e=>e.section))}),[q,t],{debugName:"PageLayoutModules(inlinePropertyIDs).useComputedStore"}),Q=(0,o(401497).IS)((e=>({bottomControls:{display:"flex",alignItems:"baseline",justifyContent:"flex-start",flexWrap:"wrap",color:e.text.tertiary,fontFamily:p().vc(o(662303).locale).sans},detailsButton:{fontWeight:p().Wy.medium,color:e.text.secondary}})),[]),J=(0,s().K8)((()=>(null==T?void 0:T.paddingX)??(0,M().OU)(d,G)),[d,G,null==T?void 0:T.paddingX],{debugName:"PageLayoutModules(horizontalPadding).useComputedStore"}),Z=(0,s().K8)((()=>(0,I().qE)(t,{recursivelyLoadAllDiscussions:!1}).comments),[t]),ee=(0,s().K8)((()=>{const e=(0,M().gV)(t);if(!e)return;return(e.collection_page_sections||[]).filter((e=>{const o=q[e.section];if(!o||"relation"!==o.type)return;const i=t.getPropertyValue(e.section),n=(0,r().bG)({relationValue:(0,r().n)(i),propertySchema:o,getRecordModel:t.getRecordModel,includeNoAccess:!0}).length;return"minimal"===e.visibility&&q[e.section]||"inline"===e.visibility&&q[e.section]&&0===n})).map((e=>e.section))}),[q,t],{debugName:"PageLayoutModules(minimalPropertyIDs).useComputedStore"}),{value:te}=(0,b().fJ)(m().commentsDependency),{value:ie}=(0,b().fJ)(o(650829).assistantDependency),se=(0,s().K8)((()=>{var e;if(!ie)return!1;const i=ie.clientSkillHelpers.createClientGlobalSkill("fill_title");return 1===ie.assistantSurfaceValidators.filterAssistantSurfaceActionsForContext(ie.assistantSurfaceValidators.clientSkillToAssistantSurfaceAction([i]),{type:"entrypoint",entrypoint:"pageStart",pageStore:t,isMobile:Boolean(x().A.isMobile),userSettings:null===(e=o(765957).default.state.currentUserSettingsStore)||void 0===e?void 0:e.getSettings()}).length}),[ie,t]),re=(0,s().K8)((()=>(0,o(900967).J)(t,G).backlinksCount),[G,t],{debugName:"PageLayoutModules.useComputedStore:numberOfBacklinks"}),le=(0,V().Lx)({pageStore:t,numBacklinks:re}),ae=(0,V().RR)({pageStore:t,numBacklinks:re}),ce=(0,M().L5)(d),de=(0,o(600871).D1)(G.device),ue=(0,s().K8)((()=>{if(e.context===B().Rr.DraftPostInInlineComposer)return{bottomControls:[]};const n=async()=>{await(0,o(182034).O)({blockStore:t,pageViewBlockStore:O.pageViewBlockStore,environment:G})},s=async()=>{const{assistantDependency:e}=await Promise.resolve().then(o.bind(o,650829)),i=t.getTitleStore();if(!i)return;const n=await e.load();o(725614).setSelectionAtEnd({store:i}),n.executeAssistantSkillAction({environment:G,clientSkillWithParameterValues:n.clientSkillHelpers.dangerouslyCreateClientSkillWithParameterValues(n.clientSkillHelpers.createClientGlobalSkill("fill_title")),from:"block_action_menu",assistantSurfaceType:x().A.isMobile?"mobileWriter":"writer"})};try{let d=[];const p=[...e.topControls],g=()=>{if("section_hide"!==(0,_().Rn)())return Z>0?(0,l.jsx)(f().p,{isGray:!0,onClick:()=>{"PageDetailsStore"in G&&G.PageDetailsStore.setToggleState({environment:G,type:"discussion",id:t.id},!0)},iconLeading:a,style:Q.detailsButton,children:(0,l.jsx)(u().sA,{id:"pageViewBlock.show.pageComments",defaultMessage:"{numberOfComments, plural, one {{numberOfComments} comment} other {{numberOfComments} comments}}",values:{numberOfComments:Z}})},"showcomments"):void 0},h=()=>{if(!Y)return;const e=(0,M().gV)(t),i=t.isNonEditableState();if(!e)return;const n=ee;return n&&n.length?(0,l.jsx)(o(764891).A,{propertyIds:n,store:t,collectionStore:Y,disabled:y,locked:i,blockPropertyValueOverlayStore:ce?o(77238).A:o(205682).A,format:e,type:"minimal"}):void 0},S=()=>{const e=(0,I().hq)(t,{recursivelyLoadAllDiscussions:!1});if(0===e.length)return;const i=(0,l.jsx)(u().sA,{id:"pageViewBlock.showResolvedComments.button",defaultMessage:"{numberOfResolvedComments, plural, one {{numberOfResolvedComments} resolved comment} other {{numberOfResolvedComments} resolved comments}}",values:{numberOfResolvedComments:e.length}});return(0,A().Nk)(G)?(0,l.jsx)(f().p,{iconLeading:c().b,isGray:!0,style:Q.detailsButton,onClick:()=>{o(112873).B4({environment:G,blockStore:t,analyticsFrom:"page_comments",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1,discussionIds:e.map((e=>e.id))})},children:i}):(0,l.jsx)(v().Ay,{buttonPopupStore:O.resolvedDiscussionButtonPopupStore,popupType:x().A.isMobile?v().z7.SlideUp:v().z7.Popup,renderOrigin:e=>(0,l.jsx)(f().p,{iconLeading:c().b,isGray:!0,style:Q.detailsButton,...e,children:i}),render:i=>{let n;return n=x().A.isMobile?{menuType:P().gu.Modal,title:(0,l.jsx)(u().sA,{defaultMessage:"Resolved comments",id:"pageViewBlock.resolvedComments.menuTabTitle"}),right:(0,l.jsx)(o(480095).DoneMenuText,{}),onClickRight:i.close,whiteBackground:!0}:{menuType:P().gu.Popup,width:500},(0,l.jsx)(o(928600).A,{...n,children:e.map(((e,n,s)=>(0,l.jsx)(o(13679).A,{store:e,droppable:!0,render:()=>te?(0,l.jsx)(m().PW,{store:e,format:te.discussionHelpers.DiscussionFormat.Menu,isFirst:0===n,isOnly:1===s.length,discussionLocation:"page_discussion",showResolveButtonByDefaultIfPossible:!0,blockStore:t,onDismiss:i.close},e.id):null},e.id)))})}},"resolve-discussions")},b=e=>{const o=[];le&&o.push((0,l.jsx)(i.Fragment,{children:(0,l.jsx)(E().y,{pageStore:t,backlinksButtonPopupStore:O.backlinksButtonPopupStore,numBacklinks:re,customization:{buttonStyles:Q.detailsButton,buttonIsGray:!0}})},"backlinks"));const n="hidden"===e.type,s=n&&g();s&&o.push((0,l.jsx)(i.Fragment,{children:s},"discussions"));const r=S();r&&!n&&o.unshift((0,l.jsx)(i.Fragment,{children:r},"resolveddiscussions"));const a=h();return a&&o.push((0,l.jsx)(i.Fragment,{children:a},"minimalpagesections")),o};if(d=b(X),"always"===ae||"onHover"===ae){const e={isBottomControl:!1,..."always"===ae?{forceVisible:!0}:{}};p.unshift((0,l.jsx)(i.Fragment,{children:(0,l.jsx)(E().y,{pageStore:t,backlinksButtonPopupStore:O.backlinksButtonPopupStore,numBacklinks:re,customization:{buttonStyles:K(e),buttonIsLightGray:!0}})},"backlinks"))}"section_hide"===(0,_().Rn)()||t.isCollectionView()||t.isInsideCollection()||Z>0||!t.canComment()||!G.currentUser.isLoggedIn()||O.pageViewBlockStore.state.forceDiscussionOpen||t.pathIsDead()||t.isTeamPost()||y||p.push((r={isBottomControl:!1},(0,l.jsx)(f().p,{style:K({isBottomControl:r.isBottomControl}),isLightGray:!0,onClick:n,iconLeading:a,children:G.device.isSmallPhone?(0,l.jsx)(u().sA,{id:"pageViewBlock.add.pageCommentMobile",defaultMessage:"Comment"}):(0,l.jsx)(u().sA,{id:"pageViewBlock.add.pageComment",defaultMessage:"Add comment"})},"addcomment"))),se&&p.push((0,l.jsx)(f().p,{style:K({isBottomControl:!1}),isBlue:!0,onClick:s,iconLeading:o(263931).D,children:(0,l.jsx)(u().sA,{id:"pageViewBlock.add.fillTitle",defaultMessage:"Fill page title"})},"fill-title"));return{headerControls:de?void 0:(0,l.jsx)("div",{className:ce?w().S6D:void 0,children:(0,l.jsx)(o(774524).A,{store:t,context:e.context,children:p})}),bottomControls:d}}catch(d){return{bottomControls:[]}}var r}),[e.context,e.topControls,t,O.pageViewBlockStore,O.resolvedDiscussionButtonPopupStore,O.backlinksButtonPopupStore,G,K,Z,y,de,X,ae,se,ce,Q.detailsButton,Y,ee,te,le,re],{debugName:"PageLayoutModules(headerAndBottomControlsStore).useComputedStore"});return(0,l.jsxs)(h().A,{name:"PageLayoutModules",children:[(0,l.jsx)(S().s,{style:{display:"contents"},allowSelectionWithin:!1,children:(0,l.jsx)(k,{store:t})}),H.map((i=>(0,l.jsx)(o(306631).S,{from:`PageLayout.${i.type}`,fallback:e=>{let{error:t,errorId:o}=e;return(0,l.jsx)(oe,{error:t,errorId:o,type:i.type})},getParentEl:()=>U.current,children:(0,l.jsx)(ne,{editorContentContainerRef:N,module:i,context:d,postContext:g,pageViewBlockStore:O.pageViewBlockStore,disabled:y,environment:G,bottomControls:ue.bottomControls,headerControls:ue.headerControls,horizontalPadding:J,inlinePropertyIDs:$,isEditable:R,isInPeek:ce,onDetailMouseEnter:z,onDetailMouseLeave:W,onHeaderMouseEnter:j,onHeaderMouseLeave:L,pageCoverHeight:D,pageViewBlockAccessor:F,headerFocusStore:O.headerFocusStore,store:t,collectionStore:Y,collectionSchema:q,bottomControlsStyle:Q.bottomControls,templatePickerMenuListStore:C,pageTitleWithIconProps:e,modules:H,pageDiscussionsRenderState:X})},i.id)))]})};function ne(e){const{module:t,modules:o,context:i,postContext:n,disabled:r,environment:a,bottomControls:c,headerControls:u,horizontalPadding:p,inlinePropertyIDs:m,isEditable:f,isInPeek:v,onDetailMouseEnter:b,onDetailMouseLeave:C,onHeaderMouseEnter:k,onHeaderMouseLeave:_,pageCoverHeight:P,pageViewBlockAccessor:M,headerFocusStore:I,store:A,collectionStore:V,collectionSchema:E,bottomControlsStyle:N,templatePickerMenuListStore:U,pageTitleWithIconProps:G,pageDiscussionsRenderState:Y,editorContentContainerRef:q}=e,{pageVisitStore:X,presenceStore:$}=(0,T().S)({store:A,environment:a,postContext:n}),J=(0,s().K8)((()=>!!V&&(0,D().v)({collectionStore:V,module:t,isMobile:Boolean(x().A.isMobile)})),[V,t]),te="page_main",oe=(0,ee().Jh)({layoutModule:t,area:te,collectionSchema:E,collectionStore:V,showDetailsPanelToggleButtonBelowTitle:J,modules:o,context:i,postContext:n}),ie=(0,ee().Br)({layoutModule:t,area:te,collectionSchema:E,collectionStore:V,pageMainModules:o,showDetailsPanelToggleButtonBelowTitle:J}),ne=(0,s().K8)((()=>j().default.checkGate({gateName:"side_peek_transition_improvements"})&&i===B().Rr.PeekView&&L().default.state.open&&"side_peek"===L().default.state.mode&&(L().default.state.isOpening||L().default.state.isClosing)&&("editor"===t.type||"views"===t.type||"viewsMain"===t.type)),[i,t.type]);return(0,l.jsx)(h().A,{name:"PageLayoutModule",children:(()=>{if(ne)return(0,l.jsx)("div",{className:w().GSK,children:(0,l.jsx)(y().A,{style:{width:"100%",height:"30px",display:"block",marginTop:32,borderRadius:8}})});if((0,d().gx)(t))return(0,l.jsx)(W().v,{context:i,disabled:r,propertyId:t.propertyId,store:A,pageModule:t,wrapper:oe,stackPropertyLabelAndValue:!0});switch(t.type){case"cover":return(0,l.jsx)(K().f,{store:A,isEditable:f,paddingX:p,pageCoverHeight:P,onMouseEnter:k,onMouseLeave:_,isInPeek:v});case"normalizedTitleWithIcon":return oe((0,l.jsx)(H().H,{handleHeaderMouseEnter:k,handleHeaderMouseLeave:_,headerControls:u,headerFocusStore:I,layoutModule:t,...G}));case"properties":return(0,l.jsx)(z().h,{context:i,disabled:r,store:A,layoutModule:t,customization:{neverShowPropertiesElsewhereInLayout:!0,disableContainerPadding:!0},wrapper:oe,showDefaultTitle:ie});case"inlinePageSections":return(0,l.jsx)(R().LG,{context:i,disabled:r,inlinePropertyIDs:m,store:A,wrapper:oe});case"expandedBacklinks":case"transcript":case"formTitle":case"formQuestion":case"formSubmit":case"placeholder":case"deleted_property":case"recentActivity":case"collaborators":case"teamspaces":return null;case"discussions":return n===B().Rr.DraftPostInInlineComposer||n===B().Rr.DraftPostInFullPageComposer?null:n===B().Rr.PostInFullPageOrPeek?(0,l.jsx)(O().d,{store:A,wrapper:oe,showDefaultTitle:!1,discussionLocation:"post_top_level_discussion",pageDiscussionsRenderState:Y,presenceStore:$,pageVisitStore:X}):(0,l.jsx)(O().d,{store:A,wrapper:oe,showDefaultTitle:ie,discussionLocation:"page_discussion",pageDiscussionsRenderState:Y});case"bottomControls":return 0===c.length?null:oe((0,l.jsx)(S().s,{allowSelectionWithin:!0,children:(0,l.jsx)("div",{style:N,className:"notion-page-details-controls",onMouseEnter:b,onMouseLeave:C,children:c})}));case"editor":return(0,l.jsx)(F().p,{context:i,disabled:r,handlePlaceholderWrapClick:e=>g().YB(e,A,a),pageBlockStore:A,pathToBlockId:t.pathToBlockId,templatePickerMenuListStore:U,pageViewBlockAccessor:M,ref:q,editorWrapper:i===B().Rr.DraftPostInInlineComposer?void 0:oe});case"viewsMain":case"views":return(0,l.jsx)(Q,{pageStore:A,disabled:r,viewsModule:t,wrapper:oe,templatePickerMenuListStore:U,editorContentContainerRef:q});case"relationsGroup":return(0,l.jsx)(Z().z,{pageStore:A,wrapper:oe,disabled:r,context:i,showDefaultTitle:ie})}})()})}},350124:(e,t,o)=>{o.d(t,{s:()=>n});o(296540);var i=o(474848);const n=(0,o(340498).wt)("reactionAdd",{viewBox:"0 0 20 20",svg:(0,i.jsxs)("g",{children:[(0,i.jsx)("path",{d:"M12 14.3516C12 14.1875 12.0573 14.0482 12.1719 13.9336C12.2891 13.8164 12.4297 13.7578 12.5938 13.7578H14.7617V11.5938C14.7617 11.4297 14.819 11.2904 14.9336 11.1758C15.0482 11.0586 15.1875 11 15.3516 11C15.5156 11 15.6549 11.0586 15.7695 11.1758C15.8867 11.2904 15.9453 11.4297 15.9453 11.5938V13.7578H18.1133C18.2747 13.7578 18.4128 13.8164 18.5273 13.9336C18.6445 14.0482 18.7031 14.1875 18.7031 14.3516C18.7031 14.5156 18.6445 14.6562 18.5273 14.7734C18.4128 14.888 18.2747 14.9453 18.1133 14.9453H15.9453V17.1133C15.9453 17.2747 15.8867 17.4128 15.7695 17.5273C15.6549 17.6445 15.5156 17.7031 15.3516 17.7031C15.1875 17.7031 15.0482 17.6445 14.9336 17.5273C14.819 17.4128 14.7617 17.2747 14.7617 17.1133V14.9453H12.5938C12.4297 14.9453 12.2891 14.888 12.1719 14.7734C12.0573 14.6562 12 14.5156 12 14.3516Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0615 17.123C9.09538 17.123 8.1862 16.9385 7.33398 16.5693C6.48177 16.2048 5.72982 15.6966 5.07812 15.0449C4.43099 14.3932 3.92285 13.6413 3.55371 12.7891C3.18457 11.9368 3 11.0277 3 10.0615C3 9.09538 3.18457 8.1862 3.55371 7.33398C3.92285 6.48177 4.43099 5.7321 5.07812 5.08496C5.72982 4.43327 6.47949 3.92285 7.32715 3.55371C8.17936 3.18457 9.08854 3 10.0547 3C11.0254 3 11.9368 3.18457 12.7891 3.55371C13.6413 3.92285 14.3932 4.43327 15.0449 5.08496C15.6966 5.7321 16.207 6.48177 16.5762 7.33398C16.9453 8.1862 17.1299 9.09538 17.1299 10.0615C17.1299 10.6193 17.0684 11.1581 16.9453 11.678V11.5938C16.9453 11.1646 16.7813 10.7706 16.4767 10.4687C16.2657 10.2558 16.0099 10.1116 15.7285 10.0441C15.7263 9.26677 15.5805 8.53887 15.291 7.86035C14.9993 7.1722 14.5938 6.56836 14.0742 6.04883C13.5547 5.5293 12.9508 5.1237 12.2627 4.83203C11.5791 4.54036 10.8431 4.39453 10.0547 4.39453C9.27083 4.39453 8.53483 4.54036 7.84668 4.83203C7.16309 5.1237 6.5638 5.5293 6.04883 6.04883C5.53385 6.56836 5.13053 7.1722 4.83887 7.86035C4.5472 8.54395 4.40137 9.27767 4.40137 10.0615C4.40137 10.8499 4.5472 11.5859 4.83887 12.2695C5.13053 12.9531 5.53385 13.5547 6.04883 14.0742C6.56836 14.5938 7.16992 14.9993 7.85352 15.291C8.54167 15.5827 9.27767 15.7285 10.0615 15.7285C10.5739 15.7285 11.0641 15.6669 11.5321 15.5438C11.8272 15.8056 12.1958 15.9453 12.5938 15.9453H13.7617V16.0641C13.4535 16.2554 13.1293 16.4238 12.7891 16.5693C11.9368 16.9385 11.0277 17.123 10.0615 17.123ZM10.0547 13.4248C9.58073 13.4248 9.16146 13.3405 8.79688 13.1719C8.43685 12.9987 8.15658 12.8005 7.95605 12.5771C7.76009 12.3538 7.66211 12.167 7.66211 12.0166C7.66211 11.9346 7.69401 11.8776 7.75781 11.8457C7.82617 11.8092 7.89909 11.8092 7.97656 11.8457C8.22721 11.9779 8.51204 12.1055 8.83105 12.2285C9.15006 12.3516 9.55794 12.4131 10.0547 12.4131C10.5514 12.4131 10.9593 12.3516 11.2783 12.2285C11.6019 12.1055 11.8867 11.9779 12.1328 11.8457C12.2103 11.8092 12.2832 11.8092 12.3516 11.8457C12.4199 11.8776 12.4541 11.9346 12.4541 12.0166C12.4541 12.167 12.3538 12.3538 12.1533 12.5771C11.9528 12.8005 11.6725 12.9987 11.3125 13.1719C10.9525 13.3405 10.5332 13.4248 10.0547 13.4248ZM8.03809 9.44629C7.82389 9.44629 7.63704 9.3597 7.47754 9.18652C7.32259 9.01335 7.24512 8.79004 7.24512 8.5166C7.24512 8.24772 7.32259 8.02669 7.47754 7.85352C7.63704 7.67578 7.82389 7.58691 8.03809 7.58691C8.25228 7.58691 8.44141 7.67578 8.60547 7.85352C8.76953 8.02669 8.85156 8.24772 8.85156 8.5166C8.85156 8.79004 8.76953 9.01335 8.60547 9.18652C8.44141 9.3597 8.25228 9.44629 8.03809 9.44629ZM12.0713 9.44629C11.8571 9.44629 11.6702 9.3597 11.5107 9.18652C11.3558 9.01335 11.2783 8.79004 11.2783 8.5166C11.2783 8.24772 11.3558 8.02669 11.5107 7.85352C11.6702 7.67578 11.8571 7.58691 12.0713 7.58691C12.2855 7.58691 12.4746 7.67578 12.6387 7.85352C12.8027 8.02669 12.8848 8.24772 12.8848 8.5166C12.8848 8.79004 12.8027 9.01335 12.6387 9.18652C12.4746 9.3597 12.2855 9.44629 12.0713 9.44629Z"})]})})},352759:(e,t,o)=>{o.d(t,{p:()=>v,t:()=>y});o(581454),o(296540);var i=()=>o(484714),n=()=>o(56366),s=()=>o(584262),r=()=>o(959013),l=()=>o(857783),a=()=>o(255018),c=()=>o(939740),d=()=>o(958378),u=()=>o(89924),p=()=>o(900967),g=()=>o(728611),m=()=>o(211716),h=()=>o(592968),S=()=>o(551619),f=o(474848);function v(e){let{store:t}=e;return(0,f.jsx)("div",{style:{width:"100%",maxWidth:"100%",margin:"0 auto 6px auto"},onMouseDown:S().NV,onClick:S().sx,children:(0,f.jsx)(a().A,{type:"page",store:t,headerText:(0,f.jsx)(r().sA,{defaultMessage:"Linked to this page",id:"page.expandedBacklinks.label"}),disableCurrentPageToken:!0,disableInaccessiblePages:!0})})}function y(e){let{store:t}=e;const o=(0,i().v3)(),r=(0,n().K8)((()=>(0,p().c)(t,o)),[t,o]),a=(0,n().K8)((()=>r.backlinks.map((e=>e.backlinkStore))),[r]).map(((e,t)=>({key:e.id,render:t=>(0,f.jsx)(d().A,{...t,store:e,hidePath:!1}),action:t=>{let{event:i}=t;h().F.setState({isOpen:!1});const n=g().Vr(i);l().uK({environment:o,store:e,openInNew:n,visitType:m().ig.Link,pageVisitSource:s().y8.Backlinks})}})));return(0,f.jsx)(c().Ay,{type:c().Oh.Vertical,initialFocus:void 0,sections:[{key:"all",items:a,render:e=>(0,f.jsx)(u().A,{...e})}]})}},388139:(e,t,o)=>{o.d(t,{F:()=>l});o(296540);var i=()=>o(401497),n=()=>o(959013),s=()=>o(331542),r=o(474848);function l(){const e=(0,i().IS)((e=>({wrapper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:16,marginTop:"12vh"},message:{fontSize:14,marginTop:8,color:e.text.secondary}})),[]);return(0,r.jsxs)("div",{style:e.wrapper,children:[(0,r.jsx)(s().A,{}),(0,r.jsx)("div",{style:e.message,children:(0,r.jsx)(n().sA,{defaultMessage:"Importing…",id:"frame.importingMessage"})})]})}},395546:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,infoCircleSmallIcon:()=>s});o(296540);var i=o(474848);const n={viewBox:"0 0 16 16",fittedViewBox:"1.87 1.87 12.25 12.25",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M7.9 4.425a.775.775 0 1 0 0 1.55.775.775 0 0 0 0-1.55M6.95 6.5a.625.625 0 1 0 0 1.25h.425V10H6.95a.625.625 0 1 0 0 1.25h2.1a.625.625 0 1 0 0-1.25h-.425V7.125A.625.625 0 0 0 8 6.5z"}),(0,i.jsx)("path",{d:"M8 1.875a6.125 6.125 0 1 0 0 12.25 6.125 6.125 0 0 0 0-12.25M3.125 8a4.875 4.875 0 1 1 9.75 0 4.875 4.875 0 0 1-9.75 0"})]})},s=(0,o(340498).wt)("infoCircleSmall",n)},406859:(e,t,o)=>{o.d(t,{M:()=>n});class i extends(()=>o(757695))().Store{getInitialState(){return{blockStoreMode:{},siteTemplateStatus:{}}}getStateForBlock(e){if(e in this.state.blockStoreMode)return this.state.blockStoreMode[e]}setStateForBlock(e,t){this.update((o=>({...o,blockStoreMode:{...o.blockStoreMode,[e]:t}})))}setSiteTemplateStatus(e,t){this.update((o=>({...o,siteTemplateStatus:{[e]:t}})))}isTemplateListing(e){var t;return(null===(t=this.state.siteTemplateStatus[e])||void 0===t?void 0:t.templateListingExists)??!1}clearStateForBlock(e){e in this.state.blockStoreMode&&(delete this.state.blockStoreMode[e],this.emit())}}const n=new i;(0,o(604341).exposeDebugValue)("MarketplaceTemplateStore",n)},441301:(e,t,o)=>{o.d(t,{s:()=>f});var i=o(296540),n=()=>o(662303),s=()=>o(484714),r=()=>o(56366),l=()=>o(799954),a=()=>o(959013),c=()=>o(284371),d=()=>o(11048),u=()=>o(155004),p=()=>o(780054),g=()=>o(765957),m=()=>o(548821),h=()=>o(551619),S=o(474848);const f=i.memo((function(e){let{store:t,context:g,disabled:f,isInSidePeek:x,extraStyles:b,titlePlaceholder:C,collectionContextStore:k,shouldShowTemplatePicker:w,onTitleChange:_,onTitleEditText:P,onTitleEsc:M,onTitleUntab:I,onTitleTab:T,onMoveUp:A,onMoveDown:j,hideText:B,disableEnter:L}=e;const V=(0,a().tz)(),E=(0,s().v3)(),D=(0,o(792485).S)(),R=(0,r().K8)((()=>t.getTitleStore()),[t]),K=(0,o(46986).x6)(),O=(0,r().K8)((()=>{if(t.isCollectionView()){const e=t.getCollectionStoreIfSingleSource();return!!e&&e.isSyncedCollection()}return t.isType(o(700500).xd.externalObjectInstancePage)}),[t]),F=(0,h().Sm)(t),z=(0,r().K8)((()=>{if(f)return!1;if(o(620149).l.state)return!1;const e=D&&D.publicEditModeStore.state;return!(0,o(731320).QT)(e)&&t.canEditCollection()}),[f,D,t]),W=(0,r().K8)((()=>{if(!t.isCollectionView())return!1;const e=t.getCollectionStoreIfSingleSource();return!!e&&(0,o(107041).Qu)(e.getValue())}),[t]),H=(0,r().K8)((()=>{const e=t.getModel();return C??(null==e?void 0:e.getEmptyTitlePlaceholder({getRecordModel:t.getRecordModel,userTimeZone:(0,o(416504).P)(),intl:o(972435).A.getIntl(),isWorkflowsContainerWithCreationEnabled:K}))}),[t,C,K]),N=!p().A.isMobile&&x,U=(0,r().K8)((()=>z&&!t.isNonEditableState()&&!O&&!F&&!(0,o(696746).Nh)(t.id)&&!("suggest"===o(77246).Uv.getMode(t))),[z,O,F,t]),G=(0,r().K8)((()=>t.isEmptyPage()),[t]),Y=(0,r().K8)((()=>t.isTemplate()),[t]),q=(0,r().K8)((()=>t.getAssociatedCollectionTemplateStores()),[t]),X=(0,r().K8)((()=>t.getSyncedUri()),[t]),$=function(e){const{store:t,isInSidePeek:i,context:a,shouldRenderIconInlineWithTitle:d,extraStyles:u}=e,g=(0,s().v3)(),h=(0,r().K8)((()=>t.getFormat()),[t]),S=(0,r().K8)((()=>t.isCollectionView()),[t]),f=(0,r().K8)((()=>t.isExternalObjectInstancePageBlockStore()),[t]),v=y(t),x=(0,s().Y0)(),b=(0,o(600871).D1)(x),C=(0,o(963589).X)("content_reskin_v2");return(0,o(401497).IS)((e=>{const t=Boolean(h.page_small_text)||S||i;let o;o=p().A.isMobile?b?34:28:t?32:a===m().Rr.DraftPostInInlineComposer?26:40;const s=a===m().Rr.DraftPostInInlineComposer?c().Wy.semibold:c().Wy.bold,r="0px";return{container:{display:(null==u?void 0:u.display)??void 0,flex:d?1:void 0},title:{...C&&!S?l().dE:l().CC,paddingBottom:r,width:f||v?"fit-content":"100%",fontSize:"1em",fontWeight:"inherit",margin:0,...a===m().Rr.DraftPostInInlineComposer&&{fontSize:24},...v&&{whiteSpace:"nowrap",marginRight:"0.25em"}},selectable:{color:e.text.primary,fontWeight:s,lineHeight:1.2,fontSize:o,fontFamily:c().xf({pageFont:h.page_font,locale:n().locale}),cursor:"text",display:"flex",alignItems:"center",textRendering:g.device.isSafari?"optimizeSpeed":void 0,...v&&{flexWrap:"wrap"},...u},link:{width:16,fill:e.icon.secondary},placeholder:{...C?l().dE:l().CC,paddingBottom:r,WebkitTextFillColor:e.pageTitlePlaceholderTextColor,cursor:"text",...a===m().Rr.DraftPostInInlineComposer&&{color:e.text.tertiary,WebkitTextFillColor:e.text.tertiary}}}}),[b,g.device.isSafari,u,h.page_font,h.page_small_text,S,f,v,i,a,C,d])}({store:t,isInSidePeek:x,context:g,shouldRenderIconInlineWithTitle:N,extraStyles:b}),Q=(0,r().K8)((()=>t.isExternalObjectInstancePageBlockStore()),[t]),J=(0,r().K8)((()=>t.isExternalCollectionBlockStore()?t:void 0),[t]),Z=(0,r().K8)((()=>(null==J?void 0:J.canEdit())??!1),[J]),ee=(0,r().K8)((()=>X?(0,o(493208).e)(X,t.pointer.spaceId):void 0),[t.pointer.spaceId,X]),te=(0,r().K8)((()=>o(430483).zD.shouldEnablePageTitleDiffs()),[]),oe=q&&0===q.length,ie=(0,h().O9)(t,g),ne=(0,r().K8)((()=>!!L||!ie&&(!(!w||Y||oe||p().A.isMobile)&&G)),[ie,L,w,Y,oe,G]),se=(0,i.useRef)(null),re=(0,i.useCallback)((()=>{t&&o(751156).createAndCommit({userAction:"TourTutorial.createEmptyTextBlock",environment:E,canUndo:!0,perform:e=>{o(324089)._N({environment:E,store:t,transaction:e})}})}),[t,E]),le=y(t)?(0,S.jsx)("span",{children:(0,S.jsx)(a().sA,{id:"pageTitle.personalPronoun",defaultMessage:"(You)"})}):null;if(W)return(0,S.jsx)(d().A,{name:"PageTitle",children:null});if(!R)return(0,S.jsx)(d().A,{name:"PageTitle",children:null});const ae=o(630116).Bv.createChildStore(R,t.pointer),ce=E.device.isIOS||E.device.isSafari,de=(0,S.jsx)(o(998109).n,{step:"create_page_start_with_title",showSidebarOverlays:!1,onNextButtonClick:re,children:B?(0,S.jsx)(S.Fragment,{}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(o(524702).A,{tagName:"h1",style:$.title,store:R,placeholderStyle:$.placeholder,disabled:!U,placeholder:H,disableSlashCommands:!0,disableSelectAllBlocks:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!te,disableMobileActionBar:!1,disableShiftEnter:!0,disableEmbedMenu:!0,onEsc:M,onUntab:I,onTab:T,onMoveDown:j,onMoveUp:A,disableUpDownArrows:!(!w||Y||oe||p().A.isMobile)&&G,disableEnter:ne,onChange:_,disableHorizontalEdgeScroll:!0,pasteBehavior:"block",trackEditsToUserFlow:"user_flow_edit_page_title",inPageFind:o(792540).Os.block_match},R.id),le]})}),ue=V.formatMessage({id:"PageTitle.syncedBlock.original",defaultMessage:"Link to original url"});return(0,S.jsx)(d().A,{name:"PageTitle",children:(0,S.jsxs)("div",{style:$.container,ref:se,children:[(0,S.jsxs)(o(199896).Ay,{canSelect:!1,canDrag:!1,canEditText:U,onEditText:P,store:ae,style:$.selectable,analyticsName:"page_content",shouldShowDropZone:!0,children:[ce?(0,S.jsx)(u().s,{allowSelectionWithin:!0,style:{width:"100%",maxWidth:"100%"},children:de}):de,(0,S.jsxs)(u().s,{allowSelectionWithin:!0,children:[(0,S.jsx)(o(964447).vE,{origin:se??void 0}),Q&&(0,S.jsx)(o(859428).A,{placement:o(962730).W.Bottom,renderTooltip:()=>ue,render:e=>(0,S.jsx)(o(296798).A,{href:ee,ignoreLocalHoverState:!0,hovered:!1,children:(0,S.jsx)(o(285790).A,{ariaLabel:ue,...e,icon:()=>(0,o(657222).w)($.link),style:{marginLeft:4},onClick:()=>{ee&&o(755636).f({url:ee,environment:E})}})})}),J&&!p().A.isMobile&&(0,S.jsx)(o(66858).A,{store:J,canEdit:Z,buttonStyle:{fontWeight:"normal",margin:0}})]})]}),(0,S.jsx)(u().s,{allowSelectionWithin:!0,style:{marginLeft:4},children:(0,S.jsx)(v,{store:t,collectionContextStore:k})})]})})}));function v(e){const{store:t,collectionContextStore:i}=e,n=(0,r().K8)((()=>t.isCollectionView()),[t]),s=(0,r().K8)((()=>t.getCollectionStoreIfSingleSource()),[t]);return n&&i&&s?(0,S.jsx)(o(948049).A,{collectionStore:s,collectionContextStore:i}):null}function y(e){return(0,r().K8)((()=>{var t;const o=e.getPersonProfileUserId(),i=null===(t=g().default.state.currentUserStore)||void 0===t?void 0:t.id;return!(!o||!i)&&o===i}),[e])}},483832:(e,t,o)=>{o.d(t,{v:()=>_});var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(778781),l=()=>o(33791),a=()=>o(774733),c=()=>o(239391),d=()=>o(155004),u=()=>o(21140),p=()=>o(68350),g=()=>o(199896),m=()=>o(891078),h=()=>o(402838),S=()=>o(205682),f=()=>o(171018),v=()=>o(548821),y=()=>o(77238),x=()=>o(795963),b=()=>o(255824),C=()=>o(671891),k=()=>o(517223),w=o(474848);function _(e){const{store:t,context:o,propertyId:_,disabled:P,wrapper:M,pageModule:I,stackPropertyLabelAndValue:T}=e,A=(0,m().bx)(t,P),j=(0,s().K8)((()=>t.getAssociatedCollectionStore()),[t]),B=(0,s().K8)((()=>null==j?void 0:j.getParentStore()),[j]),L=(0,s().K8)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};const e=t.getAssociatedCollectionStore();return e?{type:"visible",store:t,collectionStore:e,propertyId:_}:{type:"hidden"}}),[_,t]),V=(0,s().K8)((()=>null==j?void 0:j.getSchema()),[j]),E=(0,s().K8)((()=>null==j?void 0:j.getFormat()),[j]),D=(0,s().K8)((()=>{var e;return null===(e=L.collectionStore)||void 0===e?void 0:e.getSchema()[_]}),[L.collectionStore,_]),R=(0,s().K8)((()=>t.isNonEditableState()),[t]),K=(0,i.useMemo)((()=>new(f().YB)),[]),O=i.useRef(null),F=(0,s().K8)((()=>!(!j||!B||"block"!==B.table)&&(0,l().v)({collectionStore:j,collectionViewBlockStore:B,checkNavigableAncestorLocked:!1})),[j,B]),z=o===v().Rr.PeekView,W=(0,r().gx)(I)?I:void 0,{isPropertyInPageDetails:H}=(0,k()._1)({store:t,propertyId:_}),{isMobile:N}=(0,n().v3)().device,U=(0,h().s)(O,50),G=(0,C().l)(t),Y=(0,s().K8)((()=>{var e;return"hide"===(null==G||null===(e=G.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[G]),q=(0,b().a)();if(!D)return null;if("hidden"===L.type)return null;if(!j||!V||!E)return null;const X=!q&&"relation"!==D.type,$=!q,Q=(0,x().Ge)({isMobile:N,stackPropertyLabelAndValue:T,isPropertyInPageDetails:H}),J=(0,w.jsx)(a().L_,{store:t,propertyId:_,style:H||N?{flexShrink:0}:{position:"absolute",left:null!=U&&U.width?U.width+4:void 0,top:0}}),Z=(0,w.jsxs)(w.Fragment,{children:[X&&(0,w.jsxs)(u().Ye,{alignItems:"center",justifyContent:H?void 0:"space-between",style:Q?{width:Q,flexShrink:0}:void 0,children:[(0,w.jsx)(p().I,{schema:V,format:E,hideIcon:Y,hideDragHandle:!0,property:_,blockStore:t,collectionStore:j,pagePropertiesStore:K,disabled:P,locked:R,canConfigureCollection:F,isInPeekRenderer:z,styleVariants:{width:(0,x().aG)({stackPropertyLabelAndValue:T}),height:T?{variant:"small"}:{variant:"medium"},size:"small",fontWeight:"medium"},layoutModule:W,hideDuplicatePropertyOption:!0}),$?J:null]}),(0,w.jsx)(g().Ay,{store:t,analyticsName:"page_property",children:(0,w.jsx)(c().q,{store:t,property:_,disabled:!A,locked:R,format:"property_module",tableWrap:!0,blockPropertyValueOverlayStore:z?y().A:S().A,collectionStore:L.collectionStore,isInPeekRenderer:z,propertyModule:W},_)})]});return M((0,w.jsx)(d().s,{allowSelectionWithin:!0,style:{position:"relative",width:"100%"},children:T?(0,w.jsx)(u().wt,{ref:O,children:Z}):(0,w.jsx)(u().Ye,{ref:O,style:{alignItems:"flex-start"},children:Z})}))}},529933:(e,t,o)=>{o.d(t,{m:()=>j});var i=o(296540),n=()=>o(484714),s=()=>o(819121),r=()=>o(56366),l=()=>o(401497),a=()=>o(835755),c=()=>o(263931),d=()=>o(959013),u=()=>o(158574),p=()=>o(778417),g=()=>o(725614),m=()=>o(186445),h=()=>o(600871),S=()=>o(478726),f=()=>o(551619),v=()=>o(799954),y=()=>o(77246),x=o(474848);const b=i.memo((function(e){const{descriptionStore:t,disabled:s,toggleStore:a,pageId:c,userSettingsStore:u,collectionStore:p,locked:g,canEdit:m}=e,{isMobile:h}=(0,n().Y0)(),S=(0,l().IS)((()=>({container:{maxWidth:"100%",borderRadius:4,overflow:"hidden",marginBottom:12},textContainer:{display:"flex",cursor:"text"},tooltipContainer:{display:"flex",alignItems:"start"},lockedIconContainer:{paddingTop:4,paddingRight:6},pageTitleWithIconContainer:{whiteSpace:"nowrap",fontWeight:o(284371).Wy.bold},pageIcon:{marginRight:4,display:"inline-block"},pageTitle:{display:"inline"}})),[]),f=(0,r().K8)((()=>p&&p.getIcon()),[p]),v=(0,i.useCallback)((e=>(0,x.jsx)("div",{children:(0,x.jsx)("div",{style:S.textContainer,...e,children:(0,x.jsx)(C,{descriptionStore:t,toggleStore:a,userSettingsStore:u,pageId:c,disabled:s,hasIcon:Boolean(f)})})})),[t,s,f,c,S.textContainer,a,u]),y=(0,i.useCallback)((()=>(0,x.jsxs)("div",{style:S.tooltipContainer,children:[(0,x.jsx)("div",{style:S.lockedIconContainer,children:(0,o(315564).S)({width:12})}),(0,x.jsx)("div",{children:(0,x.jsx)("div",{children:(0,x.jsx)(d().sA,{defaultMessage:"Please unlock {pageTitleWithIcon} to edit the description.",id:"pageDescription.lockedTooltip.message",values:{pageTitleWithIcon:(0,x.jsxs)("span",{style:S.pageTitleWithIconContainer,children:[f?(0,x.jsx)(o(187820).B6,{disabled:!0,icon:f,isEmptyPage:!1,size:12,style:S.pageIcon}):null,p?(0,x.jsx)(o(16006).A,{store:p,style:S.pageTitle}):null]})}})})})]})),[p,f,S.lockedIconContainer,S.pageIcon,S.pageTitle,S.pageTitleWithIconContainer,S.tooltipContainer]);return(0,x.jsx)("div",{style:S.container,children:h?(0,x.jsx)(C,{descriptionStore:t,toggleStore:a,userSettingsStore:u,pageId:c,disabled:s,hasIcon:Boolean(f)}):(0,x.jsx)(o(859428).A,{renderTooltip:y,render:v,disableTooltip:!g||!m})})})),C=i.memo((function(e){const{descriptionStore:t,disabled:s,toggleStore:a,pageId:c,userSettingsStore:p,hasIcon:g}=e,m=(0,n().v3)(),h=(0,n().Y0)(),S=(0,d().tz)(),f=(0,o(792485).S)(),b=(0,i.useRef)(null),{isPageDescriptionExpanded:C}=(0,r().O$)(a),k=(0,i.useCallback)((e=>{C||(C||e.preventDefault(),u().Bq({toggleStore:a,pageId:c,descriptionStore:t,environment:m,userSettingsStore:p}))}),[t,m,C,c,a,p]),w=(0,i.useCallback)((e=>{var i;if(!function(){const e=f&&f.publicEditModeStore.state,i=(0,o(220719).o9)((0,o(969197).T)(t));return!s&&(!(0,o(731320).QT)(e)&&("suggest"!==y().Uv.getMode(i)&&t.canEdit()))}())return;if(null===(i=e.preventDefault)||void 0===i||i.call(e),b.current&&b.current.isComposing())return;const n=o(24157).default.state;if("editing"!==n.mode)return;const r=(0,o(231722).H7)(n.multiSelection);if(!r)return;const l=null!=f&&f.pageStore?y().Uv.getMode(f.pageStore):"default";o(751156).createAndCommit({userAction:"PageDescription.handleEnter",environment:m,canUndo:!0,perform:e=>{o(319975).$D({environment:m,editorMode:l,store:t,string:"\n",selection:r.selection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:e})}})}),[t,s,m,f]),_=(0,i.useCallback)((e=>!0),[]),P=(0,i.useCallback)((e=>!0),[]),M=(0,i.useMemo)((()=>({bot:!1,date:!1,page:!1,team:!1,user:!1,group:!1,formulaContextVariable:!0,heading:!0,reminder:!0,createPage:!0,inviteUserToPage:!0,templateVariable:!0,slackSpecialMention:!0,inviteUserToWorkspace:!0})),[]),I=(0,l().IS)((()=>({container:{fontSize:14,paddingLeft:g?v().Md+4:v().Md,paddingBottom:4,paddingTop:3,width:780}})),[g]);return t?(0,x.jsx)(o(524702).A,{ref:b,store:t,style:I.container,disabled:s,placeholder:S.formatMessage({defaultMessage:"Add a description…",id:"pageDescription.emptyPlaceholder"}),disableSlashCommands:!0,disableEmbedMenu:!0,disabledMentionTypes:M,onTab:_,onUntab:P,onEnter:w,onClick:k,disableStyleAnnotations:h.isMobileBrowser,disableInsertedDeletedAnnotations:h.isMobileBrowser,disableHorizontalEdgeScroll:!0,pasteBehavior:"inline",inPageFind:o(792540).Os.none}):null}));var k=()=>o(644914),w=()=>o(765957),_=()=>o(646447),P=()=>o(493823),M=()=>o(774524),I=()=>o(217429),T=()=>o(990402);function A(e){return(0,r().K8)((()=>(0,T().m)(e.store)&&I().default.checkGate({gateName:"workflows_permissions"})),[e.store])?(0,x.jsx)(_().h3,{...e}):null}const j=i.memo((function(e){const{canEdit:t,collectionContextStore:s,context:l,controlHoverStyle:a,disabled:c,editorContentContainerRef:d,forceLocalQueryCollection:p,handleHeaderMouseEnter:g,handleHeaderMouseLeave:m,hasCover:h,headerFocusStore:S,isEditable:f,isInSidePeek:v,onCollectionViewBlockMount:y,onTitleChange:b,onTitleEditText:C,onTitleEsc:k,onTitleTab:P,onTitleUntab:M,openMenuOnMount:I,openMenuOnMountCallback:T,paddingLeft:A,paddingRight:j,pageCover:L,pageViewBlockStore:V,productUseCase:E,shouldShowTemplatePicker:D,store:R,titlePlaceholder:K,topControls:O}=e,F=(0,n().v3)(),z=(0,n().Y0)(),[W,H]=(0,i.useState)(!!z.isAndroid),N=(0,r().K8)((()=>R.getCollectionViewSourceDescriptionStoreIfSingleSource()),[R]),U=(0,r().K8)((()=>u().OW(N)),[N]),G=(0,r().K8)((()=>{var e;if(R.id!==(null===(e=w().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id))return;const{RouterStore:t}=F,o=t.state.route;return"page"===o.name?o.collectionViewId:void 0}),[R,F]);return(0,i.useEffect)((()=>{(async()=>{if((0,o(836251).w6)(F)){const e=F.RouterStore.getState();if((0,o(861017).bh)(e.route)){const e=(0,o(578872).GN)(R),t=null==e?void 0:e.getSiteStore();await(null==t?void 0:t.load());const i=null==t?void 0:t.getSettings(),n=null==i?void 0:i.embedSettings;return void H(Boolean(!(null!=n&&n.hideTitle)))}}H(!0)})()}),[F,R]),(0,o(852507).w)((()=>{const{currentUserSettingsStore:e}=w().default.state;u().K$({pageId:R.id,store:V,userSettingsStore:e,descriptionHasText:U})})),(0,x.jsxs)(x.Fragment,{children:[W?(0,x.jsx)(B,{canEdit:t,collectionContextStore:s,collectionViewDescriptionStore:N,context:l,controlHoverStyle:a,descriptionHasText:U,disabled:c,handleHeaderMouseEnter:g,handleHeaderMouseLeave:m,hasCover:h,headerFocusStore:S,isEditable:f,isInSidePeek:v,onTitleChange:b,onTitleEditText:C,onTitleEsc:k,onTitleTab:P,onTitleUntab:M,openMenuOnMount:I,openMenuOnMountCallback:T,paddingLeft:A,paddingRight:j,pageCover:L,pageViewBlockStore:V,shouldShowTemplatePicker:D,store:R,titlePlaceholder:K,topControls:O}):null,(0,x.jsx)(_().dN,{editorContentContainerRef:d,overridePaddingLeft:A,overridePaddingRight:j,store:R,isFullScreen:!0,productUseCase:E||"full_page",viewId:G,disabled:c,headerActionsBehavior:l===o(548821).Rr.InAppTemplatePreview?"hidden":"default",onMount:y,forceLocalQueryCollection:p})]})}),o(821062).A);function B(e){const{canEdit:t,collectionContextStore:i,collectionViewDescriptionStore:s,context:a,controlHoverStyle:c,descriptionHasText:d,disabled:p,handleHeaderMouseEnter:g,handleHeaderMouseLeave:h,hasCover:v,headerFocusStore:C,isEditable:_,isInSidePeek:P,onTitleChange:M,onTitleEditText:I,onTitleEsc:T,onTitleTab:A,onTitleUntab:j,openMenuOnMount:B,openMenuOnMountCallback:V,paddingLeft:E,paddingRight:D,pageCover:R,pageViewBlockStore:K,shouldShowTemplatePicker:O,store:F,titlePlaceholder:z,topControls:W}=e,H=(0,n().v3)(),N=(0,n().Y0)(),U=(0,o(46986).x6)(),G=(0,o(963589).X)("db_ux_mobile"),{singleSourceCollectionStore:Y,hasExactlyOneSourceAndNoLinkedCollections:q,hasAnySourceCollectionStores:X}=(0,r().K8)((()=>({singleSourceCollectionStore:F.getCollectionStoreIfSingleSource(),hasExactlyOneSourceAndNoLinkedCollections:F.hasSingleSourceAndNoLinkedCollections(),hasAnySourceCollectionStores:F.getOwnedCollectionStores().length>0})),[F]),$=(0,r().K8)((()=>y().Uv.getMode(F)),[F]),Q=(0,r().K8)((()=>F.getTitleStore()),[F]),J=(0,r().K8)((()=>o(919709).q4_(null==Q?void 0:Q.getValue())),[Q]),Z=(0,r().K8)((()=>!(0!==F.getCollectionViewStores().length)||(!!q||(!(!U||!X)||!!Q&&(!!J||!!(0,o(792002).j_)(Q))))),[F,q,U,X,Q,J]),ee=(0,f().dK)(F),te=(0,f().l8)(F),oe=ee||te,ie=(0,r().K8)((()=>{const e=K.state.isPageDescriptionExpanded;return(u().OW(s)||_)&&e}),[s,_,K]),ne=(0,r().K8)((()=>{if(!ie)return{type:"hidden"};if(!s)return{type:"hidden"};if(!K.state.isPageDescriptionExpanded)return{type:"hidden"};const{currentUserSettingsStore:e}=w().default.state;return{type:"visible",descriptionStore:s,currentUserSettingsStore:e,collectionStore:Y}}),[s,Y,K,ie]),se=(0,r().K8)((()=>m().sj(F.id)||m().Wu(F.id)),[F]),re=(0,r().K8)((()=>(0,S().NR)(F,H)),[F,H]),le=(0,r().K8)((()=>(0,S().uf)(F,a,N)),[F,a,N]),ae=(0,r().K8)((()=>F.isNonEditableState()),[F]),ce=(0,r().K8)((()=>(0,k().Uh)(H)+(0,k().zo)(H,!1)-o(661179).A.state-E),[H,E]),de=(0,r().K8)((()=>{const{WindowSizeStore:e}=H;return{paddingLeft:e.getSafePaddingLeftCSS(E),paddingRight:e.getSafePaddingRightCSS(D)}}),[H,E,D]),ue=(0,l().IS)((()=>({container:{maxWidth:"100%",paddingLeft:de.paddingLeft},titleWrapper:{paddingRight:de.paddingRight,marginBottom:8,width:ce},titleWithIcon:{display:"flex",alignItems:"flex-start",flexDirection:G&&Boolean(o(780054).A.isMobile)?"column":"row"}})),[ce,G,de.paddingLeft,de.paddingRight]);return(0,x.jsxs)("div",{style:re,onMouseEnter:g,onMouseLeave:h,children:[R,(0,x.jsxs)(o(145214).A,{animate:{width:le},style:ue.container,children:[(0,x.jsx)(L,{canEdit:t,context:a,controlHoverStyle:c,store:F,headerFocusStore:C,topControls:W,isEditable:_,titleStore:Q,titleTextValue:J,pageViewBlockStore:K,editorMode:$,shouldShowDescription:ie,collectionViewDescriptionStore:s,descriptionHasText:d}),(0,x.jsxs)("div",{style:ue.titleWrapper,children:[se?null:(0,x.jsxs)("div",{style:ue.titleWithIcon,children:[(0,x.jsx)(o(603616).v,{store:F,isEditable:_,hasCover:v,isInSidePeek:P,openMenuOnMount:B,openMenuOnMountCallback:V}),Z?(0,x.jsx)(o(441301).s,{store:F,context:a,disabled:p,isInSidePeek:P,titlePlaceholder:z,collectionContextStore:i,shouldShowTemplatePicker:O,onTitleChange:M,onTitleEditText:I,onTitleEsc:T,onTitleTab:A,onTitleUntab:j}):null]}),oe?(0,x.jsx)(o(556048).GL,{store:F}):null,"visible"===ne.type?(0,x.jsx)(b,{disabled:!_,canEdit:t,locked:ae,pageId:F.id,toggleStore:K,descriptionStore:ne.descriptionStore,collectionStore:ne.collectionStore,userSettingsStore:ne.currentUserSettingsStore}):null,(0,x.jsx)(o(793282).h,{store:F,context:a,layoutModule:void 0,disabled:p||"suggest"===$,wrapper:e=>(0,x.jsx)(o(817942).vV,{className:"layout-content-with-divider",style:{marginTop:4,paddingTop:4,marginBottom:12,paddingBottom:12},children:e})},F.id)]})]})]})}function L(e){const{collectionViewDescriptionStore:t,context:o,controlHoverStyle:l,descriptionHasText:a,editorMode:c,headerFocusStore:d,isEditable:u,pageViewBlockStore:p,shouldShowDescription:g,store:m,titleStore:S,titleTextValue:f,topControls:v}=e,y=(0,n().Y0)(),b=(0,h().D1)(y),C=(0,r().K8)((()=>m.getCollectionStoreIfSingleSource()),[m]),k=!b&&Boolean(C),w=(0,i.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,s().p)(t)&&d.setState(!0)}),[d]),_=(0,i.useCallback)((()=>{d.setState(!1)}),[d]);return(0,x.jsxs)(M().A,{store:m,context:o,onFocus:w,onBlur:_,children:[(0,x.jsx)(A,{store:m,style:l}),v,(0,x.jsx)(V,{controlHoverStyle:l,store:m,isEditable:u,titleStore:S,titleTextValue:f}),k?(0,x.jsx)(E,{store:m,pageViewBlockStore:p,collectionViewDescriptionStore:t,descriptionHasText:a,controlHoverStyle:l,editorMode:c,shouldShowDescription:g,isEditable:u}):null]})}function V(e){const{store:t,isEditable:o,titleTextValue:s,titleStore:l,controlHoverStyle:a}=e,u=(0,n().v3)(),{isSmallPhone:m}=(0,n().Y0)(),h=(0,r().K8)((()=>t.hasSingleSourceAndNoLinkedCollections()),[t]),S=(0,i.useCallback)((()=>{l&&(p().IU({environment:u}),g().setSelectionAtEnd({store:l}))}),[l,u]);return h||!o||s?null:(0,x.jsx)(P().p,{style:a,isLightGray:!0,onClick:S,iconLeading:c().D,children:m?(0,x.jsx)(d().sA,{id:"pageViewBlock.add.pageTitleMobile",defaultMessage:"Title"}):(0,x.jsx)(d().sA,{id:"pageViewBlock.add.pageTitle",defaultMessage:"Add title"})},"add-title")}function E(e){const{collectionViewDescriptionStore:t,descriptionHasText:o,controlHoverStyle:s,editorMode:r,isEditable:l,pageViewBlockStore:c,shouldShowDescription:p,store:g}=e,m=(0,n().v3)(),{isSmallPhone:h}=(0,n().Y0)(),S=(0,i.useCallback)((()=>{const{currentUserSettingsStore:e}=w().default.state,o=t;u().de({environment:m,pageId:g.id,store:c,userSettingsStore:e,isExpanded:!0,descriptionStore:o})}),[t,m,c,g.id]),f=(0,i.useCallback)((e=>{const{currentUserSettingsStore:o}=w().default.state,i=g.id;u().o({environment:m,pageId:i,isExpanded:e,store:c,userSettingsStore:o,descriptionStore:t})}),[m,g.id,c,t]),v=(0,i.useCallback)((()=>{f(!0)}),[f]),y=(0,i.useCallback)((()=>{f(!1)}),[f]);return p?(0,x.jsx)(P().p,{isLightGray:!0,style:s,onClick:y,iconLeading:a().p,children:(0,x.jsx)(d().sA,{defaultMessage:"Hide description",id:"pageViewBlock.hideDescription.button"})}):l&&"suggest"!==r&&!o?(0,x.jsx)(P().p,{isLightGray:!0,style:s,onClick:S,iconLeading:a().p,children:h?(0,x.jsx)(d().sA,{defaultMessage:"Description",id:"pageViewBlock.addDescription.mobileButton"}):(0,x.jsx)(d().sA,{defaultMessage:"Add description",id:"pageViewBlock.addDescription.button"})}):o?(0,x.jsx)(P().p,{isLightGray:!0,style:s,onClick:v,iconLeading:a().p,children:h?(0,x.jsx)(d().sA,{defaultMessage:"Description",id:"pageViewBlock.showDescription.mobileButton"}):(0,x.jsx)(d().sA,{defaultMessage:"Show description",id:"pageViewBlock.showDescription.button"})}):null}},538776:(e,t,o)=>{o.d(t,{l:()=>s});var i=()=>o(645873);const n=new(i().O2)("GenerateSocialMediaPreviewImageWrapper",(async()=>Promise.all([o.e(75134),o.e(9304),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(49889),o.e(97727),o.e(22900),o.e(85128),o.e(95555),o.e(14659),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(21194),o.e(30291),o.e(39541),o.e(12913),o.e(45620),o.e(54220),o.e(19930),o.e(81768),o.e(58102),o.e(52836),o.e(26483),o.e(19687),o.e(6463),o.e(68137),o.e(50569),o.e(40925),o.e(24975),o.e(282),o.e(87250),o.e(93847),o.e(79928),o.e(7203),o.e(61349),o.e(55197),o.e(94256),o.e(76690),o.e(29669),o.e(24930),o.e(62573),o.e(33882),o.e(44763),o.e(1440),o.e(5044),o.e(31782),o.e(93449),o.e(63996),o.e(895),o.e(66559),o.e(35986),o.e(45683),o.e(78862),o.e(38536),o.e(92924),o.e(64819),o.e(67378),o.e(40186),o.e(97339),o.e(55717),o.e(63797),o.e(56352),o.e(52811),o.e(28398),o.e(21367),o.e(65351),o.e(22686),o.e(4112),o.e(31889),o.e(36009),o.e(81973),o.e(2600),o.e(77663),o.e(97832),o.e(75681)]).then(o.bind(o,794831)))),s=(0,i()._h)(n,(e=>e.GenerateSocialMediaPreviewImageWrapper))},557198:(e,t,o)=>{o.d(t,{Ap:()=>d,Lx:()=>p,RR:()=>u,X1:()=>c});var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(534177),l=()=>o(334261),a=()=>o(449195);function c(e){const{format:t}=e;return{backlinksConfiguredToShowAboveTitle:(0,s().K8)((()=>{const e=(0,a().nl)(t.page_section_visibility);return"section_collapsed"===e||"always_show"===e}),[t.page_section_visibility])}}function d(e){const{store:t,format:o}=e,s=(0,n().v3)();return{backlinksVisibility:(0,a().nl)(o.page_section_visibility),updateBacklinksVisibility:(0,i.useCallback)((e=>{const i=(0,a().SB)(e);l().OD({environment:s,pageSection:"backlinks",visibility:i,store:t,format:o})}),[s,t,o])}}function u(e){const{pageStore:t,numBacklinks:o}=e,{store:i,format:n}=(0,s().K8)((()=>{const e=t.getAssociatedCollectionStore()??t,o=e.getFormat();return{store:e,format:o}}),[t]),{backlinksVisibility:l}=d({store:i,format:n});return 0===o?"never":"always_show"===l?"always":"section_collapsed"===l?"onHover":"section_hide"===l?"never":void(0,r().HB)(l)}function p(e){return!1}},577814:(e,t,o)=>{o.d(t,{A:()=>r});o(898992),o(354520);var i=()=>o(449195),n=()=>o(478726),s=()=>o(299545);function r(e){var t;const{store:o,pageViewBlockStore:r,environment:l}=e,a=s().O3(o,{recursivelyLoadAllDiscussions:!1}).sort(((e,t)=>t.getReactions().length-e.getReactions().length)),c=a.length>0,d=0===a.length,u=0===a.filter((e=>e.getComments().length>0)).length,p="PageDetailsStore"in l&&l.PageDetailsStore.getToggleState({environment:l,type:"discussion",id:o.id}),g={type:"hidden"},m=o.getAssociatedCollectionStore()??o,h="section_hide"===(0,i().z5)(null===(t=m.getFormat())||void 0===t?void 0:t.page_section_visibility);if(!(null==r?void 0:r.state.forceDiscussionOpen)&&(!o.isInsideCollection()||!d)&&(d||c&&(!1===p||void 0===p&&h)))return g;if(h)return g;const S=o.pathIsDead(),f=l.currentUser.isLoggedIn();if(d&&S)return g;const v=f&&o.canComment()&&u&&!(0,n().sV)(o)&&(!(0,n().fc)(o)||(0,n().Cg)(o));return!v&&d?g:{type:"visible",showDiscussionInput:v,unresolvedDiscussionStores:a}}},592968:(e,t,o)=>{o.d(t,{F:()=>n});class i extends(()=>o(757695))().Store{getInitialState(){return{isOpen:!1}}}const n=new i},596698:(e,t,o)=>{o.d(t,{V:()=>l});var i=o(296540),n=()=>o(56366),s=()=>o(746426),r=()=>o(67805);function l(e,t){const o=(0,n().K8)((()=>(0,r().c)({environment:e,store:t})),[e,t]),l=(0,s().J)(e,t,o);return(0,i.useMemo)((()=>{if(o&&"pending"!==l.status)return l.templateListingExists&&l.template?{type:"marketplace_template",template:l.template}:{type:"sites"}}),[o,l])}},601726:(e,t,o)=>{o.d(t,{E:()=>m,f:()=>g});o(296540);var i=()=>o(484714),n=()=>o(56366),s=()=>o(155004),r=()=>o(145214),l=()=>o(544862),a=()=>o(38337),c=()=>o(478726),d=()=>o(551619),u=()=>o(817942),p=o(474848);function g(e){const{store:t,isEditable:o,isInPeek:c,paddingX:g,pageCoverHeight:h,onMouseEnter:S,onMouseLeave:f}=e,v=(0,i().v3)(),y=(0,n().K8)((()=>t.isCollectionView()?"20vh":h),[h,t]),x=(0,n().K8)((()=>v.WindowSizeStore.getSafePaddingLeftCSS(g)),[v.WindowSizeStore,g]),b=(0,n().K8)((()=>v.WindowSizeStore.getSafePaddingRightCSS(g)),[v.WindowSizeStore,g]),C=(0,n().K8)((()=>v.WindowSizeStore.state.width),[v.WindowSizeStore]),k=(0,d().no)(t),w=(0,n().K8)((()=>m(t,v)),[v,t]);return(0,p.jsx)(u().Pb,{style:{isolation:"isolate"},children:(0,p.jsx)(r().A,{tag:s().s,animate:{translateX:k},allowSelectionWithin:!1,className:c?a().S6D:void 0,style:w,onMouseEnter:S,onMouseLeave:f,children:(0,p.jsx)(l().A,{height:y,store:t,disabled:!o,paddingLeft:x,paddingRight:b,proxyWidth:C})})})}function m(e,t){const o=(0,c().NR)(e,t);return o.zIndex=2,o}},603616:(e,t,o)=>{o.d(t,{v:()=>p});var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(700500),l=()=>o(534177),a=()=>o(187820),c=()=>o(780054),d=()=>o(186445),u=o(474848);const p=i.memo((function(e){const{hasCover:t,isEditable:p,isInlinePostTitle:g,isInPageLayoutModuleEditor:m,isInSidePeek:h,openMenuOnMount:S,openMenuOnMountCallback:f,store:v}=e,y=(0,n().v3)(),{isMobile:x}=(0,n().Y0)(),b=(0,o(959013).tz)(),C=(0,s().K8)((()=>v.isPersonProfile()),[v]),k=(0,s().K8)((()=>C?v.getPersonProfileUserStore():void 0),[C,v]),w=(0,s().K8)((()=>v.getIcon()),[v]),_=(0,s().K8)((()=>v.getIconStore()),[v]),P=(0,s().K8)((()=>v.getType()),[v]),M=(0,s().K8)((()=>{if(v.isCollectionView()){const e=v.getCollectionStoreIfSingleSource();return!!e&&e.isSyncedCollection()}return v.isType(r().xd.externalObjectInstancePage)}),[v]),I=(0,s().K8)((()=>v.isType(r().xd.form)),[v]),T=(0,s().K8)((()=>v.isCollectionView()),[v]),A=(0,s().K8)((()=>v.isEmptyPage()),[v]),j=(0,s().K8)((()=>(0,a().Te)(v)),[v]),B=(0,s().K8)((()=>o(77246).Uv.getMode(v)),[v]),L=(0,i.useCallback)((async e=>{const t=v.getIconStore();t&&await(0,o(675925).o)(y,{action:"edit_icon",block_type:P,from:"page_header"},(async i=>{const n=(0,o(522419).pc)({source:e,secureFileConfigRootpath:c().A.secureFileConfig.rootPath,secureFileConfigHostname:c().A.secureFileConfig.hostname}),s=n?n.link:e,{serverCommitResult:r}=o(751156).createAndCommit({userAction:"PageIcon.handleChange",environment:y,canUndo:!0,perform:e=>{o(246826).KY({store:t,value:s,transaction:e})}});await r,i()}))}),[y,v,P]),V=g?"xs":T||h?"sm":"md",{size:E,emojiSize:D}=(0,i.useMemo)((()=>"xs"===V?{size:26,emojiSize:26}:"sm"===V?{size:36,emojiSize:36}:"md"===V?M?{size:74,emojiSize:78}:{size:140,emojiSize:78}:((0,l().ub)(V),{size:140,emojiSize:78})),[M,V]),R=(0,o(401497).IS)((e=>{const o={position:"relative",zIndex:1,marginLeft:3,marginBottom:x?8:0,marginTop:4,pointerEvents:"auto"},i="xs"===V?{marginRight:4,height:E,width:E}:"sm"===V?{marginRight:6}:"md"===V?t&&!m?{marginTop:-80}:x||m?{marginTop:0}:{marginTop:(0,d().Ws)(y)-(I?32:0)}:((0,l().ub)(V),{}),n="xs"===V?{marginRight:4}:"sm"===V?{marginTop:4,marginRight:8}:t&&!m?{marginTop:-42}:x||m?{marginTop:0}:{marginTop:(0,d().Ws)(y)-(I?32:0)};return{icon:{...o,...i},emoji:n,personProfile:{...o,...i,borderRadius:"50%",background:e.contentBackground,overflow:"hidden",width:E,border:"2px solid white"}}}),[y,t,I,m,x,V,E]);if(C)return(0,u.jsx)("div",{style:R.personProfile,children:(0,u.jsx)(o(453697).A,{userStore:k,size:E})});if(!w&&!g)return null;if(!p||"suggest"===B)return(0,u.jsx)(a().B6,{disabled:!0,icon:w,iconRecordCategory:j,isEmptyPage:A,size:E,emojiSize:D,style:R.icon,emojiStyle:R.emoji,largeIcon:!0,label:b.formatMessage({id:"layout.pageIcon.disabledLabel",defaultMessage:"Page icon"}),testId:"pageIcon"});const K=null==_?void 0:_.table;return(0,u.jsx)(a().B6,{disabled:!1,bucket:"secure",icon:w,iconRecordCategory:j,store:v,isEmptyPage:A,onChange:L,size:E,emojiSize:D,style:R.icon,emojiStyle:R.emoji,largeIcon:!0,openMenuOnMount:S,openMenuOnMountCallback:f,isInlinePostTitle:g,iconLoggingData:{recordTable:K,source:"page_header",block_type:P,collection_id:"collection"===K?null==_?void 0:_.id:void 0},label:b.formatMessage({id:"layout.pageIcon.label",defaultMessage:"Change page icon"}),testId:"pageIcon"})}))},605243:(e,t,o)=>{o.d(t,{A:()=>g});var i=o(296540),n=()=>o(484714),s=o(474848);const r=(0,o(340498).wt)("addPageCover",{viewBox:"0 0 14 14",svg:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm0 12h10L8.5 5.5l-2 4-2-1.5L2 12z"})});var l=()=>o(959013),a=()=>o(222299),c=()=>o(675925),d=()=>o(751156),u=()=>o(748539),p=()=>o(493823);function g(e){const{store:t,style:o,label:g,from:m}=e,h=(0,n().v3)(),[S,f]=(0,i.useState)(!1),v=(0,n().Y0)(),y=(0,i.useCallback)((async()=>{await(0,c().o)(h,{action:"edit_cover",block_type:"page",from:m},(async e=>{const o=t.getCoverStore();if(!o)return;if(o.getValue())return;f(!0);const i=await u().f.load();d().createAndCommit({userAction:"PageViewBlock.handleAddRandomCoverClick",environment:h,canUndo:!0,perform:e=>{a().Oj({transaction:e,store:t,coverStore:o,pageCovers:i})}}),f(!1),e()}))}),[h,t,m]);return!0===S?(0,s.jsx)(p().p,{style:o,isLightGray:!0,disabled:!0,iconLeading:r,children:v.isSmallPhone?(0,s.jsx)(l().sA,{id:"pageAddCoverButton.add.pageCoverMobileLoading",defaultMessage:"Loading"}):(0,s.jsx)(l().sA,{id:"pageAddCoverButton.add.pageCoverLoading",defaultMessage:"Loading cover"})},"add-cover-loading"):(0,s.jsx)(p().p,{style:o,isLightGray:!0,onClick:y,iconLeading:r,children:g},"add-cover")}},620137:(e,t,o)=>{o.d(t,{e:()=>s});var i=()=>o(645873);const n=new(i().O2)("FormBlock",(async()=>await Promise.all([o.e(44711),o.e(53321),o.e(55373),o.e(92845),o.e(84468),o.e(95794),o.e(56952),o.e(25497),o.e(74562),o.e(27711),o.e(46414),o.e(28271),o.e(17254),o.e(15019),o.e(30291),o.e(58102),o.e(62573),o.e(26093),o.e(40186),o.e(65688)]).then(o.bind(o,9072)))),s=(0,i()._h)(n,(e=>e.FormBlock))},642054:(e,t,o)=>{o.d(t,{A:()=>n});o(296540);var i=o(474848);const n=(0,o(340498).wt)("addPage",{viewBox:"0 0 14 14",svg:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 0c3.861 0 7 3.139 7 7s-3.139 7-7 7-7-3.139-7-7 3.139-7 7-7zM3.561 5.295a1.027 1.027 0 1 0 2.054 0 1.027 1.027 0 0 0-2.054 0zm5.557 1.027a1.027 1.027 0 1 1 0-2.054 1.027 1.027 0 0 1 0 2.054zm1.211 2.816a.77.77 0 0 0-.124-1.087.786.786 0 0 0-1.098.107c-.273.407-1.16.958-2.254.958-1.093 0-1.981-.55-2.244-.945a.788.788 0 0 0-1.107-.135.786.786 0 0 0-.126 1.101c.55.734 1.81 1.542 3.477 1.542 1.668 0 2.848-.755 3.476-1.541z"})})},660197:(e,t,o)=>{o.d(t,{H:()=>K});var i=o(296540),n=()=>o(402014),s=()=>o(484714),r=()=>o(819121),l=()=>o(56366),a=()=>o(401497),c=()=>o(799954),d=()=>o(861017),u=()=>o(919709),p=()=>o(650829),g=()=>o(11048),m=()=>o(155004),h=()=>o(66858),S=()=>o(556048),f=()=>o(38337),v=()=>o(478726),y=()=>o(747100),x=()=>o(836251),b=()=>o(963589),C=()=>o(578872),k=()=>o(337567),w=()=>o(548821),_=()=>o(712505),P=()=>o(517223),M=()=>o(551619),I=()=>o(589647),T=()=>o(918487),A=()=>o(9768),j=()=>o(817942),B=o(474848);function L(e){let{onMouseEnter:t,onMouseLeave:o,headerControls:i}=e;return(0,B.jsx)("div",{onMouseEnter:t,onMouseLeave:o,children:i})}var V=()=>o(603616),E=()=>o(793282),D=()=>o(441301);const R=0;function K(e){const{store:t,hasCover:o,headerFocusStore:K,headerControls:O,isEditable:F,openMenuOnMount:z,openMenuOnMountCallback:W,pageViewBlockStore:H,discussionInputStore:N,handleHeaderMouseEnter:U,handleHeaderMouseLeave:G,hideTitleIfEmpty:Y,isInPageLayoutModuleEditor:q=!1,layoutModule:X,disabled:$,...Q}=e,J=(0,s().v3)(),{WindowSizeStore:Z}=J,{isMobile:ee,isAndroid:te}=(0,s().Y0)(),[oe,ie]=(0,i.useState)((()=>!!te));(0,i.useEffect)((()=>{(async()=>{if((0,x().w6)(J)){const e=J.RouterStore.getState();if((0,d().bh)(e.route)){await t.load();const e=(0,C().GN)(t),o=null==e?void 0:e.getSiteStore();await(null==o?void 0:o.load());const i=null==o?void 0:o.getSettings(),n=null==i?void 0:i.embedSettings;return void ie(Boolean(!(null!=n&&n.hideTitle)))}}ie(!0)})()}),[J,t]);const ne=(0,l().K8)((()=>(0,y().cq)(t)),[t]),se=(0,l().K8)((()=>ne&&(_().default.isSidePeekOpen()||_().default.isSidePeekClosingStore.state)),[ne]),{context:re}=Q,le=w().m8.has(re),ae=ee&&!o,ce=!ee&&Q.isInSidePeek||le,de=(0,a().IS)((()=>!ce||le?{container:{}}:{container:{display:"flex",alignItems:"flex-start"}}),[ce,le]),ue=(0,l().K8)((()=>t.isExternalObjectInstancePageBlockStore()&&t.hasError()?t:null),[t]),pe=(0,l().K8)((()=>t.canEdit()),[t]),ge=(0,l().K8)((()=>Z.getSafePaddingLeftCSS(R)),[Z]),me=(0,l().K8)((()=>Z.getSafePaddingRightCSS(R)),[Z]),he=(0,l().K8)((()=>(0,v().NR)(t,J)),[t,J]),Se=(0,M().Sm)(t),fe=(0,i.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,r().p)(t)&&K.setState(!0)}),[K]),ve=(0,i.useCallback)((()=>{K.setState(!1)}),[K]),ye=(0,B.jsx)("div",{className:ne?f().S6D:void 0,style:{display:"flow-root",pointerEvents:"auto",...le&&{display:"inline-block",verticalAlign:"top"}},children:(0,B.jsx)(V().v,{store:t,isEditable:F,hasCover:o,isInSidePeek:Q.isInSidePeek,openMenuOnMount:z,openMenuOnMountCallback:W,isInPageLayoutModuleEditor:q,isInlinePostTitle:le})}),xe=le?(0,B.jsx)(m().s,{style:{display:"inline-block"},allowSelectionWithin:!1,children:ye}):ye,be=(0,l().K8)((()=>{var e;return(0,u().w9s)(null===(e=t.getTitleStore())||void 0===e?void 0:e.getValue())}),[t]),Ce=le?{...e.extraStyles,display:"inline-block",verticalAlign:"top"}:e.extraStyles,ke=(0,B.jsx)(D().s,{store:t,disabled:$,hideText:Y&&be||!oe,...Q,extraStyles:Ce}),we=(0,l().K8)((()=>t.getAssociatedCollectionStore()),[t]),_e=(0,l().K8)((()=>!(!we||!X)&&(0,T().v)({collectionStore:we,module:X,isMobile:ee})),[we,ee,X]),Pe=(0,l().K8)((()=>null==we?void 0:we.getSchema()),[we]),Me=Pe&&X?(0,P().LD)({collectionSchema:Pe,module:X}):void 0,Ie=(0,b().X)("content_reskin_v2"),Te=(0,i.useMemo)((()=>{const e={...Boolean(null==Me?void 0:Me.length)&&(ee?{paddingBottom:20}:{paddingBottom:A().Lb})};return(0,B.jsxs)(B.Fragment,{children:[we&&_e&&(0,B.jsx)("div",{style:e,children:(0,B.jsx)(I().L,{collectionStore:we,pageViewBlockContext:re})}),Boolean(null==Me?void 0:Me.length)&&(0,B.jsx)("div",{style:{paddingTop:ee&&!_e?A().Lb:void 0,...Ie?{paddingLeft:c().Gt.paddingLeft}:{marginLeft:-2}},children:(0,B.jsx)(E().h,{context:re,disabled:$,store:t,variant:"pinned",layoutModule:X,propertyIds:Me,wrapper:e=>(0,B.jsx)(j().vV,{children:e}),customization:{disableContainerPadding:!0,disableLastRowBottomPadding:!0}})})]})}),[we,ee,X,re,Me,$,_e,t,Ie]),Ae=(0,l().K8)((()=>(0,k().Fm)(t)),[t]);return se?(0,B.jsxs)(g().A,{name:"PageTitleWithIcon",children:[(0,B.jsxs)(m().s,{allowSelectionWithin:!0,children:[(0,B.jsx)(L,{onMouseEnter:U,onMouseLeave:G,headerControls:O}),oe&&xe,ke,Se&&(0,B.jsx)(S().GL,{store:t})]}),Te]}):(0,B.jsxs)(g().A,{name:"PageTitleWithIcon",children:[(0,B.jsx)("div",{style:he,onMouseEnter:U,onMouseLeave:G,children:(0,B.jsxs)("div",{style:{maxWidth:"100%",paddingLeft:ge,width:"100%"},onClick:async e=>{if(Ae){const e=await p().assistantDependency.load();await e.assistantEditActions.saveAssistantCreatedPage(J)}(0,n().SQ)({event:e,context:n().y$.Click})},children:[(0,B.jsxs)(m().s,{onFocus:fe,onBlur:ve,allowSelectionWithin:!1,style:{pointerEvents:"none"},children:[ae&&O,oe&&!ce&&xe,!ae&&O]}),(0,B.jsx)("div",{style:{paddingRight:me},children:ce?(0,B.jsxs)("div",{style:de.container,children:[oe&&xe,ke,Se&&(0,B.jsx)(S().GL,{store:t})]}):ke}),Se&&(0,B.jsx)(S().GL,{store:t}),ue?(0,B.jsx)(h().A,{store:ue,canEdit:pe}):null]})}),Te]})}},661344:(e,t,o)=>{o.d(t,{LG:()=>m});var i=o(296540),n=()=>o(56366),s=()=>o(155004),r=()=>o(764891),l=()=>o(478726),a=()=>o(205682),c=()=>o(171018),d=()=>o(548821),u=()=>o(77238),p=o(474848);function g(e){const{state:t,store:o,disabled:i,blockPropertyValueOverlayStore:s}=e,l=(0,n().K8)((()=>o.isNonEditableState()),[o]);return(0,p.jsx)(r().A,{propertyIds:t.sectionPropertyIds,store:o,collectionStore:t.collectionStore,format:t.format,disabled:i,locked:l,blockPropertyValueOverlayStore:s})}function m(e){const{store:t,context:o,disabled:r,inlinePropertyIDs:m,wrapper:h}=e,S=(0,n().K8)((()=>t.getAssociatedCollectionStore()),[t]),f=(0,i.useMemo)((()=>new(c().YB)),[]),v=function(e){const{collectionStore:t,format:o,sectionPropertyIds:i}=e;if(!(t&&o&&i&&i.length))return{type:"hidden"};return{type:"visible",collectionStore:t,format:o,sectionPropertyIds:i}}({collectionStore:S,format:(0,n().K8)((()=>(0,l().gV)(t)),[t]),sectionPropertyIds:m});if("hidden"===v.type)return null;const y=o===d().Rr.PeekView;return h((0,p.jsx)(s().s,{allowSelectionWithin:!0,children:(0,p.jsx)(g,{topBorder:!0,state:v,store:t,disabled:r,blockPropertyValueOverlayStore:y?u().A:a().A,isInPeekRenderer:y,pagePropertiesStore:f})}))}},678834:(e,t,o)=>{o.d(t,{y:()=>f});o(296540);var i=()=>o(484714),n=()=>o(56366),s=()=>o(401497),r=()=>o(576250),l=()=>o(959013),a=()=>o(493823),c=()=>o(406699),d=()=>o(928600),u=()=>o(900967),p=()=>o(722872),g=()=>o(592968),m=()=>o(263711),h=()=>o(352759),S=o(474848);function f(e){const{pageStore:t,backlinksButtonPopupStore:o,numBacklinks:f,customization:v={}}=e,{buttonStyles:y,buttonIsGray:x,buttonIsLightGray:b}=v,C=(0,i().v3)(),{isPhone:k}=(0,i().Y0)(),w=(0,n().K8)((()=>void 0!==f?f:(0,u().J)(t,C).backlinksCount),[C,t,f],{debugName:"BacklinksControlButton.useComputedStore"}),_=(0,n().K8)((()=>m().g.getState().isOpen),[]),P=(0,s().IS)((e=>{const t=0===w&&_,o=e.text.quaternary;return{button:t?{color:o}:{},icon:t?{fill:o}:{}}}),[_,w]),M=e=>{let{buttonPopupEvents:t={}}=e;return(0,S.jsx)(a().p,{iconLeading:e=>(0,r().y)({...e,transform:"rotate(180deg)",...P.icon}),style:{...y,...P.button},isGray:x,isLightGray:b,...t,children:(0,S.jsx)(l().sA,{id:"pageViewBlock.show.backlinks",defaultMessage:"{numberOfBacklinks, plural, =0 {No backlinks} one {{numberOfBacklinks} backlink} other {{numberOfBacklinks} backlinks}}",values:{numberOfBacklinks:w}})})};if(k){return M({buttonPopupEvents:{onClick:e=>{g().F.setState({isOpen:!0})}}})}return(0,S.jsx)(c().Ay,{buttonPopupStore:o,popupType:c().z7.Popup,renderOrigin:e=>M({buttonPopupEvents:e}),render:()=>{const e={menuType:p().gu.Popup,width:500};return(0,S.jsx)(d().A,{...e,children:w>0?(0,S.jsx)(h().p,{store:t}):null})}},"backlinkspopup")}},729380:(e,t,o)=>{o.d(t,{u:()=>n});class i extends(()=>o(757695))().Store{getInitialState(){return{discussionsHeight:0}}setDiscussionsHeight(e){this.setState({...this.state,discussionsHeight:e})}resetHeights(){this.setState({discussionsHeight:0})}getTotalHeight(){return this.state.discussionsHeight}}const n=new i},729923:(e,t,o)=>{o.d(t,{p:()=>Y});var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(401497),l=()=>o(155004),a=()=>o(478726),c=()=>o(835066),d=o(474848);function u(e){const{pageBlockStore:t,isVisible:i,context:r}=e,u=(0,n().Y0)(),p=(0,s().K8)((()=>(0,a().Ck)(t,r,u)),[t,r,u]);return(0,d.jsx)(l().s,{allowSelectionWithin:!0,style:{width:p&&i?c().Qb:0},children:(0,d.jsx)(o(774733).UY,{...e})})}var p=()=>o(11048),g=()=>o(299772),m=()=>o(402014),h=()=>o(584262),S=()=>o(799954),f=()=>o(959013),v=()=>o(160568),y=()=>o(557281),x=()=>o(435009),b=()=>o(33301),C=()=>o(751156),k=()=>o(33791),w=()=>o(780054),_=()=>o(484792),P=()=>o(601734),M=()=>o(68465),I=()=>o(492414),T=()=>o(765957),A=()=>o(227440),j=()=>o(217429),B=()=>o(411671),L=()=>o(611371),V=()=>o(704152),E=(o(581454),()=>o(710149));function D(){const e=(0,r().IS)((()=>({menu:{display:"flex",alignItems:"center",marginBottom:5},icon:{marginLeft:5,width:26,height:26,marginRight:10,borderRadius:4},menuItem:{height:14,marginTop:8,marginBottom:8,width:"25%",borderRadius:8}})),[]);return(0,d.jsx)(d.Fragment,{children:[...Array(6)].map(((t,o)=>(0,d.jsxs)("div",{style:e.menu,children:[(0,d.jsx)(E().A,{style:e.icon}),(0,d.jsx)(E().A,{style:e.menuItem})]},o)))})}const R={width:"100%"};const K=function(e){let{menuListStore:t,store:a}=e;(0,o(852507).l)((()=>{t.reset()}));const c=(0,n().WS)(),u=(0,s().O$)(A().e),p=(0,s().K8)((()=>a.isTeamPost()),[a]),g=(0,r().IS)((e=>({wrapStyle:{width:"100%",display:"flex",flexDirection:"column",marginBottom:p?void 0:"14vh"}})),[p]),m=(0,i.useCallback)((()=>!c&&(0,d.jsx)(D,{})),[c]);return(0,d.jsx)(l().s,{style:R,allowSelectionWithin:!1,children:(0,d.jsx)(o(109488).A,{capture:!0,render:e=>(0,o(569912).A)((o=>(0,d.jsxs)("div",{...e,...o,style:g.wrapStyle,children:[(0,d.jsx)(F,{store:a}),u&&(0,d.jsx)(P().t,{menuListStore:t,store:a,renderLoading:m})]})))})})};function O(e,t,o){const{mainEditorCurrentBlockStore:i}=T().default.state;!function(e,t,o){o?o(e):x().oo({environment:t,url:e})}(i?(0,I().Ay)({store:i,peekViewBlockId:e.id,fullyQualified:!1,pageVisitSource:h().y8.LinkInPage}):(0,I().Ay)({store:e,fullyQualified:!1,pageVisitSource:h().y8.LinkInPage}),t,o)}function F(e){let{store:t}=e;const o=(0,n().v3)(),l=(0,n().Y0)(),a=(0,i.useContext)(_().n),c=(0,s().K8)((()=>B().A.getMode(o,t)),[o,t]),u=(0,i.useCallback)((e=>function(e,t,o,i){const n=o.getAssociatedCollectionStore();if(n&&(0,L().EF)(t)){const{performResult:e}=C().createAndCommit({userAction:"TemplatePicker.newPage",environment:t,canUndo:!0,perform:e=>y().bI({environment:t,collectionStore:n,transaction:e})});e&&O(e,t,i),v().er(t,{collection_id:n.id})}}(0,o,t,a)),[o,t,a]),p=(0,s().K8)((()=>t.isTemplate()),[t]),g=(0,s().O$)(A().e),h=(0,s().K8)((()=>function(e){return Boolean(e.getAssociatedCollectionStore())}(t)),[t]),x=(0,s().K8)((()=>function(e){const t=e.getAssociatedCollectionStore(),o=t?t.getTemplatePageStores():void 0;return o&&o.length>0}(t)),[t]),P=h&&!x,I=h&&x,T=(0,s().K8)((()=>{const e=t.getAssociatedCollectionStore(),o=e&&e.getParentBlockStore();return!(0,k().v)({collectionStore:e,collectionViewBlockStore:o,checkNavigableAncestorLocked:!0})}),[t]),E=(0,s().K8)((()=>(0,M().ZE)(c)),[c]),D=(0,s().K8)((()=>t.isTeamPost()),[t]),K=(0,r().IS)((e=>({placeholder:{...S().CC,color:e.text.tertiary,paddingTop:D?3:5,paddingBottom:D?3:24,paddingLeft:D?2:void 0,paddingRight:D?2:void 0}})),[D]),F=(0,s().K8)((()=>w().A.isMobile&&!l.isTablet&&(l.isIOS||"on"===j().default.getEligibleGroup({experimentId:"android_lightweight_editor_prompt",defaultGroup:"control"}))),[l.isIOS,l.isTablet]);let z=null;return g?p?z=(0,d.jsx)(f().sA,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page.} other {Press Enter to continue with an empty page.}}",id:"templatePicker.isTemplate.emptyPagePrompt",values:{isMobileDevice:Boolean(w().A.isMobile)}}):w().A.isMobile?I?z=l.isTablet?(0,d.jsx)(f().sA,{defaultMessage:"Tap here to continue with an empty page, or pick a template",id:"templatePicker.mobileTabletEmptyPage.withTemplates.prompt"}):(0,d.jsx)(f().sA,{defaultMessage:"Tap here to continue...",id:"templatePicker.mobilePhoneEmptyPage.withTemplates.prompt"}):P?z=(0,d.jsx)(f().sA,{defaultMessage:"{isParentLocked, select, true {Tap here to continue with an empty page} other {Tap here to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.mobileCollectionEmptyPage.prompt",values:{isParentLocked:T,templatebutton:e=>(0,d.jsx)(V().A,{style:{display:"inline-block",textDecoration:"underline"},onClick:u,children:e})}}):F||(z=l.isTablet?(0,d.jsx)(f().sA,{defaultMessage:"Tap here to continue with an empty page, or pick a template",id:"templatePicker.mobileTabletEmptyPage.withTemplates.prompt"}):(0,d.jsx)(f().sA,{defaultMessage:"Tap here to continue...",id:"templatePicker.mobilePhoneEmptyPage.withTemplates.prompt"})):P?z=(0,d.jsx)(f().sA,{defaultMessage:"{isParentLocked, select, true {Press Enter to continue with an empty page} other {Press Enter to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.webCollectionEmptyPage.prompt",values:{isParentLocked:T,templatebutton:e=>(0,d.jsx)(V().A,{style:{display:"inline-block",textDecoration:"underline"},onClick:u,children:e})}}):E&&!h||(z=(0,d.jsx)(f().sA,{defaultMessage:"Press Enter to continue with an empty page, or pick a template (↑↓ to select)",id:"templatePicker.webEmptyPage.withTemplates.prompt"})):z=(0,d.jsx)(f().sA,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page. Please go online to use templates.} other {Press Enter to continue with an empty page. Please go online to use templates.}}",id:"templatePicker.deviceOffline.goOnlinePrompt",values:{isMobileDevice:Boolean(w().A.isMobile)}}),z?(0,d.jsx)("div",{style:R,children:(0,d.jsx)("div",{style:K.placeholder,onClick:e=>function(e,t,o){(0,m().SQ)({event:e,context:m().y$.Click,callback:()=>{(0,L().EF)(o)&&(C().createAndCommit({userAction:"TemplatePicker.handleEmptyPageContinueClick",environment:o,canUndo:!0,perform:e=>{b().n({environment:o,store:t,transaction:e})}}),v().ki(o,{is_keyboard:!1,from:"template_picker",template_type:"empty_page"}))}})}(e,t,o),children:z})}):null}var z=()=>o(622237),W=()=>o(548821),H=()=>o(712505),N=()=>o(551619),U=()=>o(817942);const G=(0,i.forwardRef)((function(e,t){let{context:l,disabled:c,onClick:u,store:m,templatePickerMenuListStore:h,testPlaceholder:S}=e;const f=(0,n().v3)(),{device:v}=f,y=(0,N().Hy)(m),x=(0,o(877051).V)(),b=function(e,t){const o=(0,N().O9)(e,t),i=(0,N().Rg)(e,t);if(o)return"horizontal";if(i)return"legacy";return"none"}(m,l),C=(0,N().f7)(m),k=(0,N().Sm)(m),_=(0,s().K8)((()=>!!c||(!!m.isNonEditableState()||!!k)),[m,c,k]),M=(0,s().K8)((()=>m.getFormat()),[m]),I=(0,s().K8)((()=>(0,a().In)(m)),[m]),T=(0,a().L5)(l),A=(0,s().K8)((()=>m.isTeamPost()),[m]),j=(0,o(891078).bx)(m,c),B=(0,n().WS)(),L=(0,s().K8)((()=>m.isCollectionView()),[m]),V=(0,s().K8)((()=>Boolean(m.getCover())),[m]),E=(0,s().K8)((()=>{const e=(0,o(747100).cq)(m)&&!H().default.isSidePeekOpen()&&!H().default.isSidePeekClosingStore.state?`100vh - ${H().PeekModeOuterPadding}px*2`:"100vh",t=(0,o(175947).ek)(f.device.isElectronMac),i=o(729380).u.getTotalHeight();return`calc(${e} - ${t}px - 66px - 48px - 140px + ${i<250?0:i}px)`}),[f.device.isElectronMac,m]),D=(0,r().IS)((()=>{const e=M.page_font||g().zs,t=g().DX[e],i=g().JK[e]||1.5;let n;if(w().A.isMobile)n=v.isAndroid?g().By:g().y_;else if(l===W().Rr.DraftPostInInlineComposer)n=14;else{n=M.page_small_text?g().Y4[e]||g().dp:g().T1[e]||g().uD}let s={},r=l===W().Rr.Presentation?{}:{paddingTop:l===W().Rr.DraftPostInInlineComposer?0:8};const c=(0,a().L5)(l);if(!(I&&c&&"none"===b&&!y)){if(I){const e=29;r={...r,paddingBottom:l===W().Rr.DraftPostInInlineComposer?e:A?0:"15vh"}}else r={...r,paddingBottom:0};s={...r,paddingLeft:0,paddingRight:0}}let d={};c&&!A&&(d={minHeight:240,zIndex:1});let u={};l===W().Rr.InAppTemplatePreview&&(u={margin:"0 auto"});let p={};if(B&&!L&&j&&!V){const e=132,t=(0,g().nu)(l,v);p={minHeight:`calc(100vh - ${o(628182).s1+e-t}px)`}}return{content:{flexShrink:0,flexGrow:1,maxWidth:"100%",display:"flex",alignItems:"flex-start",flexDirection:"column",fontFamily:g().AP[e],fontSize:n,letterSpacing:t?`${t}em`:void 0,lineHeight:i,width:"100%",zIndex:4,...s,...d,...u,...p},emptyDroppableStyle:{width:"100%"},templatePicker:{position:"absolute",top:E,width:"100%",pointerEvents:"none"}}}),[M.page_font,M.page_small_text,v,l,I,b,y,A,B,L,j,V,E]),[R,O]=function(e,t){const n=(0,i.useRef)(null),r=(0,o(93583).A)(n,e),l=(0,o(828634).wY)(n),a=(0,i.useCallback)((e=>{z().A.setWidth(e.width,t)}),[t]);(0,i.useEffect)((()=>{l&&a(l)}),[a,l]);const c=(0,s().K8)((()=>z().A.getWidth(t)),[t]);return[r,c]}(t,T);return(0,d.jsxs)(p().A,{name:"PageEditor",children:[(0,d.jsxs)("div",{className:o(38337).pXT,onClick:u,style:D.content,ref:R,children:[!C&&(0,d.jsx)(o(493733).A,{store:m.getContentStore(),emptyDroppableStyle:D.emptyDroppableStyle,disabled:_,placeholder:S}),y&&(0,d.jsx)(o(331542).A,{}),h&&"legacy"===b&&(0,d.jsx)(K,{store:m,menuListStore:h})]}),"horizontal"===b&&!x&&(0,d.jsx)("div",{style:D.templatePicker,children:(0,d.jsx)(P().Nv,{store:m,context:l,menuListStore:h,editorWidth:O})})]})}));const Y=(0,i.forwardRef)((function(e,t){const{context:r,disabled:l,handlePlaceholderWrapClick:g,pageBlockStore:m,pathToBlockId:h,templatePickerMenuListStore:S,pageViewBlockAccessor:f,editorWrapper:v}=e,y=(0,n().v3)(),x=(0,s().K8)((()=>h?(0,o(21140).Dk)({environment:y,pageBlockStore:m,pathToBlockId:h}):m),[y,m,h]),b=(0,s().K8)((()=>(0,c().dC)(y,m)),[y,m]),C=(0,s().K8)((()=>(0,a().In)(m)),[m]),k=(0,s().K8)((()=>(0,o(337567).Fm)(m)),[m]),_=r===W().Rr.DraftPostInInlineComposer,P=w().A.isMobile||_?0:5,M=(0,s().K8)((()=>o(610640).A.state.isHovered),[]),I=v||(e=>(0,d.jsx)(U().vV,{style:{..._?{minHeight:void 0,pointerEvents:"auto"}:{minHeight:170},paddingTop:P},children:e})),T=(0,i.useMemo)((()=>k?async()=>{const e=await o(650829).assistantDependency.load();await e.assistantEditActions.saveAssistantCreatedPage(y)}:C?g:void 0),[g,C,k,y]);return(0,d.jsxs)(p().A,{name:"PageEditorModule",children:[I((0,d.jsx)(G,{store:x,disabled:l,context:r,templatePickerMenuListStore:S,onClick:T,ref:t})),b&&f?(0,d.jsx)(U().kZ,{children:(0,d.jsx)(u,{pageBlockStore:m,isVisible:!M,context:r,pageViewBlockAccessor:f,isCollapsedAnchor:!0})}):null]})}))},736316:(e,t,o)=>{o.d(t,{f:()=>n});var i=()=>o(449412);function n(e){const{name:t,startTime:o,endTime:n}=e;try{performance.measure(t,{start:o,end:n})}catch(s){i().Fg(s,{extra:{name:t,startTime:o,endTime:n}})}}},746426:(e,t,o)=>{o.d(t,{J:()=>a});var i=o(296540),n=()=>o(857639),s=()=>o(187174),r=()=>o(449506),l=()=>o(406859);function a(e,t,o){const[{value:a,status:c}]=(0,s().Yb)((async()=>{if(!o)return{templateListingExists:!1};try{const o=await r().callApi({eventName:"inAppGetBannerByBlockId",environment:e,data:{blockId:t.id}});var i,s,a;if("success"===o.type&&o.data.success)return l().M.setSiteTemplateStatus((null===(i=o.data.template)||void 0===i?void 0:i.root_block_id)??"",{templateListingExists:Boolean(null===(s=o.data.template)||void 0===s?void 0:s.listing_id),template:o.data.template,status:"resolved"}),{templateListingExists:Boolean(null===(a=o.data.template)||void 0===a?void 0:a.listing_id),template:o.data.template}}catch(c){n().log({level:"error",from:"AllPublishedSiteSettings",type:"getTemplateByBlockId",data:{blockId:t.id}})}return l().M.setSiteTemplateStatus(t.id,{templateListingExists:!1,template:void 0,status:"rejected"}),{templateListingExists:!1}}),[e,o,t]);return(0,i.useMemo)((()=>({templateListingExists:(null==a?void 0:a.templateListingExists)??!1,status:c,template:null==a?void 0:a.template})),[a,c])}},764891:(e,t,o)=>{o.d(t,{A:()=>p});o(898992),o(354520),o(672577),o(581454);var i=o(296540),n=()=>o(56366),s=()=>o(496603),r=()=>o(896628),l=()=>o(751156),a=()=>o(9768),c=()=>o(439264),d=o(474848);function u(e){const{store:t,collectionStore:i,disabled:a,locked:u,propertyIds:p,blockPropertyValueOverlayStore:m,format:h,type:S}=e,f=(0,o(484714).v3)(),v=(0,o(175116).Ks)(),y=(0,n().K8)((()=>null==v?void 0:v.permissionScopesStore.state),[v]);return v?"minimal"===S?(0,d.jsx)(d.Fragment,{children:p.map(((e,o)=>(0,d.jsx)(g,{format:h,locked:u,collectionStore:i,store:t,disabled:a,blockPropertyValueOverlayStore:m,propertyId:e,visibility:S,isLast:o===p.length-1},e)))}):a||u||null==y||!y.canConfigureCollection?(0,d.jsx)("div",{style:c().Bb,children:p.map(((e,o)=>(0,d.jsx)(g,{format:h,locked:u,collectionStore:i,store:t,disabled:a,blockPropertyValueOverlayStore:m,propertyId:e,visibility:S,isLast:o===p.length-1},e)))}):(0,d.jsx)(c().Ay,{direction:"vertical",keys:p,renderKey:(e,o)=>(0,d.jsx)(g,{format:h,locked:u,collectionStore:i,store:t,disabled:a,blockPropertyValueOverlayStore:m,propertyId:e,visibility:S,isLast:o===p.length-1},e),onDrop:e=>function(e,t,o,i){const n=o.collection_page_sections||[],a=s().oE(e.map((e=>n.find((t=>t.section===e))))),c=n.filter((t=>!e.includes(t.section))),d=[...a,...c];l().createAndCommit({userAction:"RelationPropertyPageSections.handleReorder",environment:i,canUndo:!0,perform:e=>{r().zA({stores:[t],update:{collection_page_sections:d},transaction:e})}})}(e,i,h,f)}):null}const p=i.memo(u,o(821062).A),g=i.memo((function(e){let t,{propertyId:i,format:s,locked:r,collectionStore:l,store:c,disabled:u,blockPropertyValueOverlayStore:p,visibility:g,isLast:m}=e;if(g)t=g;else{const e=s.collection_page_sections??[];t=e.filter((e=>e.section===i)).map((e=>e.visibility))[0]}const[h,S]=(0,o(997583).z)(),f=(0,o(255824).a)(),v="inline"===t,y=!m&&"minimal"!==t,x=(0,n().K8)((()=>c.canEdit()),[c]),b=(0,o(401497).IS)((()=>{const e={position:"absolute",visibility:S?"visible":"hidden",left:S?S+4:void 0,top:0};return{discussionIndicator:o(780054).A.isMobile?{flexShrink:0}:v?e:{},wrapperDiv:{position:"relative",width:"minimal"!==t?"100%":void 0,...y?{marginBottom:a().YE+a().Lb+(x?-4:0)}:{}},selectable:v?{}:{display:"flex",alignItems:"center"}}}),[S,y,v,t,x]),C=(0,d.jsx)(o(774733).L_,{store:c,propertyId:i,style:b.discussionIndicator});return(0,d.jsx)("div",{className:"minimal"!==t?"layout-content":void 0,style:b.wrapperDiv,ref:h,children:(0,d.jsxs)(o(199896).Ay,{store:c,analyticsName:"page_property",style:b.selectable,children:[(0,d.jsx)(o(239391).q,{store:c,property:i,disabled:u,locked:r,format:"property_module",tableWrap:!1,blockPropertyValueOverlayStore:p,collectionStore:l,propertyVisibility:t},i),f?null:C]})})}))},766081:(e,t,o)=>{o.d(t,{A:()=>m,R:()=>g});o(296540);var i=()=>o(484714),n=()=>o(56366),s=()=>o(401497),r=()=>o(868840),l=()=>o(175947),a=()=>o(959013),c=()=>o(710149),d=()=>o(299772),u=()=>o(62856),p=o(474848);function g(e){let{store:t,peekMode:o,forceShowIcon:l}=e;const a=(0,i().Y0)(),{isMobile:u}=a,g=(0,n().K8)((()=>Boolean(t.getCover())),[t]),m=(0,n().K8)((()=>Boolean(t.getIcon())),[t])||l,h=(0,n().K8)((()=>t.isCollectionView()),[t]),S=(0,n().K8)((()=>t.isFullWidth()),[t]),f=o===r().O?"20vh":d().mv,v=(0,s().IS)((()=>{const e=u?24:o===r().A?48:96,t=(()=>{switch(!0){case u:return 32;case m:return 96;case o===r().O&&!m:return 54;case!m:return 102}})(),i=(()=>{switch(!0){case u&&g&&m:return 22;case u&&g&&!m:return 54;case u&&!g&&m:return 56;case u&&!g&&!m:return 4;case!u&&g&&m:return 50;case!u&&g&&!m:return 58;case!u&&!g&&m:return 92;case!u&&!g&&!m:return 20}})();return{collectionCoverPhoto:{width:"100%",height:"20vh"},collectionTitleContainer:{display:"flex",alignItems:"center",paddingLeft:e,paddingRight:e,width:"100%",paddingTop:(()=>{switch(!0){case u&&g:return 50;case u&&!g:return 78;case!u&&g:return 48;case!u&&!g:return 36}})()},collectionIcon:{flexGrow:0,flexShrink:0,width:36,height:36,borderRadius:6,marginRight:10,marginLeft:3},collectionTitle:{height:u?24:30,width:600,marginTop:u?6:3,borderRadius:15},pageCoverPhoto:{width:"100%",height:f},pageCoverPadding:{width:"100%",height:t},pageIconContainer:{maxWidth:"100%",boxSizing:"border-box",paddingLeft:e,paddingRight:e,width:S?"100%":900,height:36},pageIcon:{position:"relative",top:g?-42:0,width:78,height:78,marginLeft:2,borderRadius:16},pageTitleContainer:{display:"flex",boxSizing:"border-box",paddingLeft:e,paddingRight:e,width:S?"100%":900,maxWidth:"100%",paddingTop:i},pageTitle:{marginTop:u?3:0,height:u?24:30,width:600,borderRadius:15}}}),[S,g,m,f,u,o]);return h||o===r().A?(0,p.jsxs)(p.Fragment,{children:[g&&(0,p.jsx)(c().A,{style:v.collectionCoverPhoto}),(0,p.jsxs)("div",{style:v.collectionTitleContainer,children:[m&&(0,p.jsx)(c().A,{emphasized:!0,style:v.collectionIcon}),(0,p.jsx)(c().A,{style:v.collectionTitle})]})]}):(0,p.jsxs)(p.Fragment,{children:[g?(0,p.jsx)(c().A,{style:v.pageCoverPhoto}):(0,p.jsx)("div",{style:v.pageCoverPadding}),m&&(0,p.jsx)("div",{style:v.pageIconContainer,children:(0,p.jsx)(c().A,{emphasized:!0,style:v.pageIcon})}),(0,p.jsx)("div",{style:v.pageTitleContainer,children:(0,p.jsx)(c().A,{style:v.pageTitle})})]})}function m(e){let{isVisible:t,peekMode:o,store:c}=e;const{WindowSizeStore:d}=(0,i().v3)(),m=(0,i().Y0)(),h=(0,a().tz)(),S=m.isPhone,f=m.isMobileNative,v=l().ek(m.isElectronMac),y=(0,n().K8)((()=>{const e=o===r().O||o===r().A||S?v:0;return{top:d.getSafePaddingTopCSS(e),bottom:d.getSafePaddingBottomCSS(0),left:d.getSafePaddingLeftCSS(0),right:d.getSafePaddingRightCSS(0)}}),[d,o,S,v]),x=(0,s().IS)((()=>({root:{position:"absolute",...y,display:"flex",flexDirection:"column",alignItems:"center",pointerEvents:"none"}})),[y]);return(0,u().A)(t,f?0:10,0)?(0,p.jsx)("div",{role:"progressbar","aria-valuetext":h.formatMessage({id:"frameLoadingState.loading",defaultMessage:"Loading..."}),style:x.root,children:(0,p.jsx)(g,{store:c,peekMode:o})},"shimmer"):null}},774524:(e,t,o)=>{o.d(t,{A:()=>d});o(296540);var i=()=>o(662303),n=()=>o(484714),s=()=>o(56366),r=()=>o(401497),l=()=>o(284371),a=()=>o(478726),c=o(474848);function d(e){const{store:t,context:o,onFocus:d,onBlur:u,children:p}=e,g=(0,n().Y0)(),{isMobile:m}=g,h=(0,s().K8)((()=>{const e=(0,a().XD)(o);let i,n,s;return m?t.getCover()?(t.getIcon(),s="block",i=e,n=4):(s="flex",i=e,n=(0,a().$n)()):t.isCollectionView()||(0,a().mb)(t)?(s="flex",t.getCover()?(i=16,n=4):(i=4,n=4)):(s="flex",t.getIcon()?(i=8,n=4):t.getCover()?(i=16,n=4):(i=e,n=(0,a().$n)())),{display:s,paddingTop:i,paddingBottom:n}}),[o,m,t]),S=(0,r().IS)((e=>({container:{...h,justifyContent:"flex-start",flexWrap:"wrap",marginLeft:-1,color:e.text.tertiary,fontFamily:l().vc(i().locale).sans,pointerEvents:"auto"}})),[h]);return(0,c.jsx)("div",{onFocus:d,onBlur:u,style:S.container,className:"notion-page-controls",children:p})}},790324:(e,t,o)=>{o.d(t,{A:()=>d});var i=o(296540),n=()=>o(484714),s=()=>o(642054),r=()=>o(896628),l=()=>o(751156),a=()=>o(493823),c=o(474848);function d(e){const{store:t,afterOnClick:o,style:d,label:u}=e,p=(0,n().v3)(),g=(0,i.useCallback)((()=>{l().createAndCommit({userAction:"PageAddIconButton.handleAddRandomIconClick",environment:p,canUndo:!0,perform:e=>{r().vc({store:t,transaction:e})}}),o()}),[p,o,t]);return(0,c.jsx)(a().p,{style:d,isLightGray:!0,onClick:g,iconLeading:s().A,children:u},"add-icon")}},823082:(e,t,o)=>{o.d(t,{H:()=>s});var i=()=>o(778781),n=()=>o(534177);function s(e){const t=e.type;return"properties"===t?"module__properties_"+("pinned"===e.variant?"minimal":"expanded"):"normalizedTitleWithIcon"===t||"titleWithIcon"===t?"module__title_with_icon":"cover"===t?"cover__module":"views"===t?"module__views":"editor"===t?"module__editor":"formTitle"===t?"module__formTitle":"viewsMain"===t?"module__views_main":"transcript"===t?"module__transcript":"formSubmit"===t?"module__form_submit":"discussions"===t?"module__discussion":"placeholder"===t?"module__placeholder":"formQuestion"===t?"module__formQuestion":"bottomControls"===t?"module__bottomControls":"relationsGroup"===t?"module__relationsGroup":"deleted_property"===t?"module__deleted_property":"expandedBacklinks"===t?"module__expandedBacklinks":"inlinePageSections"===t?"module__inlinePageSections":"property"===t?`module__property_${e.id}`:"collectionView"===t?"module__collectionView":"collectionViewV2"===t?"module__collectionViewV2":(0,i().CA)(t)?`module__property_${e.id}`:void(0,n().HB)(t)}},848565:(e,t,o)=>{o.d(t,{FB:()=>p,Ql:()=>g,SM:()=>m,Wv:()=>s,Yz:()=>l,ds:()=>n,e4:()=>i,eQ:()=>r,im:()=>c,jw:()=>a,k2:()=>u,uG:()=>d});const i=8,n=10,s=8,r=24,l=6,a=1.5,c=(r-a)/2,d=r+l,u=`calc(100% + ${s+(i-l)-d}px)`,p=r+8,g=-16;function m(e){return"margin_comments"===e?12:"comment_unfurl"===e?14:16}},864260:(e,t,o)=>{o.d(t,{A:()=>n});class i extends(()=>o(757695))().Store{getInitialState(){return{pageMap:{}}}setStatus(e,t){const{pageMap:o}=this.state;t?o[e]=t:delete o[e],this.emit()}}const n=new i},877051:(e,t,o)=>{o.d(t,{V:()=>a});var i=()=>o(56366),n=()=>o(765957),s=()=>o(961581),r=()=>o(477293),l=()=>o(963589);function a(){const e=(0,l().X)("lazier_dependencies"),t=(0,i().K8)((()=>n().default.state.renderPhase),[]),o=(0,i().K8)((()=>s().A.state.initialCollectionPendingRenderCount>0),[]),a=e&&"rendered"!==t,c="on"===(0,r().r)("collections_lazier_dependencies",{disableEventTrailLogging:!1});return a||c&&o}},892008:(e,t,o)=>{o.d(t,{Bs:()=>d,L:()=>c,Ob:()=>a});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949);var i=o(296540),n=()=>o(852507),s=()=>o(118884),r=()=>o(994310),l=()=>o(347320);const a=new class{constructor(){this.currentPageId=void 0,this._localStorage=void 0}startCachingViewIds(e){this.currentPageId=e;this.entryForPage(e).v=[]}stopCachingViewIds(){const e=this.currentPageId;if(this.currentPageId=void 0,e){0===this.entryForPage(e).v.length&&delete this.localStorage[e]}}registerView(e,t){if(this.currentPageId!==e)return;const o=this.entryForPage(e);o.v=[...new Set([...o.v,t])],o.t=Date.now(),this.writeToLocalStorage()}unregisterView(e,t){const o=this.localStorage[e];o&&(o.v=o.v.filter((e=>e!==t)),0===o.v.length&&delete this.localStorage[e],this.writeToLocalStorage())}lookupViewIds(e){const t=this.localStorage[e];return(null==t?void 0:t.v)??[]}clear(){this.currentPageId=void 0,this._localStorage=void 0}get localStorage(){return this._localStorage??(this._localStorage=r().A.get(l().O)||Object.create(null))}entryForPage(e){let t=this.localStorage[e];return t||(t={v:[],t:0},this.localStorage[e]=t),t}writeToLocalStorage(){this.limitLocalStorageSize(),r().A.set(l().O,this.localStorage)}limitLocalStorageSize(){const e=Object.keys(this.localStorage);if(e.length>=100){const t={timestamp:Number.MAX_SAFE_INTEGER,key:void 0};e.forEach((e=>{e!==this.currentPageId&&this.localStorage[e].t<t.timestamp&&(t.timestamp=this.localStorage[e].t,t.key=e)})),t.key&&delete this.localStorage[t.key]}}};function c(e){let{collectionContextStore:t,isFullScreen:o,wasCreatedThisSessionStore:n,didDelayOffscreenRenderRef:s,environment:r}=e;const l=(0,i.useCallback)((()=>{var e;const o=null===(e=t.collectionViewStore())||void 0===e?void 0:e.id,i=r.RouterStore.state.route;if("page"!==i.name)return;const n=i.blockId;n&&o&&(s.current?(a.unregisterView(n,o),t.shouldDelayRenderStore.removeListener(l)):a.registerView(n,o))}),[t,s,r]);(0,i.useEffect)((()=>{var e;if(o||n.state)return;const i=null===(e=t.collectionViewStore())||void 0===e?void 0:e.id,s=r.RouterStore.state.route;if("page"!==s.name)return;return s.blockId&&i?(t.shouldDelayRenderStore.addListener(l),l(),()=>{t.shouldDelayRenderStore.removeListener(l)}):void 0}),[t,o,n,r,l])}function d(e){let{pageId:t,isFrameContext:o}=e;(0,n().l)((()=>{o&&a.startCachingViewIds(t)})),(0,s().X)((()=>{o&&a.stopCachingViewIds()}))}},915086:(e,t,o)=>{o.r(t),o.d(t,{measurePageRenderMetrics:()=>w,setInitialRenderCompleted:()=>C,setSubMetric:()=>y,setSubMetricsAtRenderCallback:()=>v,updateMetricData:()=>x,updateMetricDataWithIsPushTag:()=>k,updateOPFSMetricData:()=>b});o(898992),o(581454),o(737550),o(814603),o(147566),o(198721);var i=()=>o(906510),n=()=>o(410690),s=()=>o(2220),r=()=>o(892008),l=()=>o(807054),a=()=>o(347320),c=()=>o(150749),d=()=>o(836251),u=()=>o(671973),p=()=>o(406792),g=()=>o(736316),m=()=>o(217429),h=()=>o(961581),S=()=>o(977390),f=()=>o(606932);function v(e){const{mainStartTime:t,prefetchInitiatedTime:o,statsigBootupBlockingStartTime:i,renderStartTime:s,renderEndTime:r}=e,l=n().getAppStartTime();if(!l)return;const a={app_start_to_main_start:{startTime:l,endTime:t},main_start_to_prefetch_initiated:{startTime:t,endTime:o},prefetch_initiated_to_statsig_bootup_blocking_start:{startTime:o,endTime:i},statsig_bootup_blocking:{startTime:i,endTime:s},render_start_to_render_end:{startTime:s,endTime:r}};for(const[n,c]of Object.entries(a)){const e=null==c?void 0:c.startTime,t=null==c?void 0:c.endTime;e&&t&&(0,g().f)({name:n,startTime:e,endTime:t})}h().A.state.subMetricsStore.update((e=>({...e,...a})))}function y(e){const{name:t,endTime:o}=e,i=e.startTime(h().A.state.subMetricsStore.state);i&&(h().A.state.subMetricsStore.update((e=>({...e,[t]:{startTime:i,endTime:o}}))),(0,g().f)({name:t,startTime:i,endTime:o}))}function x(e){h().A.state.metricDataStore.update((t=>({...t,...e})))}function b(e){h().A.state.OPFSMetricDataStore.update((t=>({...t,...e})))}function C(){h().A.update((e=>({...e,initialRenderCompleted:!0}))),u().N.markInitialPageRendered()}function k(e){const t=e.RouterStore.state;let o;var i;"page"===t.route.name&&(o=t.route.mobileData,x({is_push:null===(i=o)||void 0===i?void 0:i.isPush}))}function w(e){let{environment:t,isEditable:o,isHomePage:r,isWikiHome:a,isPageWithCustomLayout:c,idSchema:g}=e;const{initialRoute:{name:v},route:x}=t.RouterStore.state,{initialRenderCompleted:b,initialRenderAfterLoginCompleted:k}=h().A.state,w=l().isPrewarmedTabInitialRender(t),M=(0,d().w6)(t);b?k||"login"!==v?function(e,t){const o="page"===t.name?t.mobileData:void 0,i=f().A.popTimings();if(i){const{navigationStart:n,requestFirstChunkStart:s,requestFirstChunkEnd:r,requestFirstChunkSource:l,requestFirstChunkLocalSource:a,pageViewBlockRender:c}=i,d=performance.now(),g="page"===t.name?e.prefetchCache.getPrefetchAnalytic(`loadCachedPageChunk(${t.blockId})`):void 0;p().default.measure({metricName:"navigation_page_render",startTime:n,endTime:d},{environment:e,data:{sub_metrics:{navigation_start_to_request_first_chunk_start:s?s-n:0,request_first_chunk_start_to_request_first_chunk_end:s&&r?r-s:0,request_first_chunk_end_to_pvb_render:r&&c?c-r:0,pvb_render_to_handle_navigation_render:c?d-c:0},chunk_source:l,local_source:a,is_push:(null==o?void 0:o.isPush)??!1,wasm_sqlite_initialized:h().A.state.metricDataStore.state.wasm_sqlite_initialized,...g?{page_chunk_prefetch:g,page_chunk_prefetch_type:g.type}:{}}}),u().N.markNavigationRender(e)}S().A.state.isMeasuring&&S().A.update((e=>({...e,isMeasuring:!1})))}(t,x):function(e){p().default.DO_NOT_USE_measureLegacy("initial_page_render_after_login",{environment:e}),h().A.update((e=>({...e,initialRenderAfterLoginCompleted:!0})))}(t):w?function(e){let{environment:t,initialRoute:o,isEditable:i,isHomePage:n,isWikiHome:s,isPageWithCustomLayout:r,isPublicDomain:l,idSchema:a}=e;C();const c=performance.now();y({name:"await_page_chunk_end_to_browser_repaint_start",startTime:e=>{var t;return null===(t=e.await_page_chunk_start_to_await_page_chunk_end)||void 0===t?void 0:t.endTime},endTime:c});const d=h().A.state.prewarmedTabAppStartTimeOverride;d&&p().default.measure({metricName:"initial_page_render",startTime:d,endTime:c},{environment:t,data:_({initialRoute:o,isEditable:i,isHomePage:n,isWikiHome:s,isPageWithCustomLayout:r,isPublicDomain:l,idSchema:a,isPrewarmedTab:!0,prewarmedTabNavigationStart:d}),shouldSendIfStatsigNotInitialized:!0});S().A.state.isMeasuring&&S().A.update((e=>({...e,isMeasuring:!1})))}({environment:t,initialRoute:v,isEditable:o,isHomePage:r,isWikiHome:a,isPageWithCustomLayout:c,isPublicDomain:M,idSchema:g}):function(e){var t;let{environment:o,initialRoute:r,isEditable:l,isHomePage:a,isWikiHome:c,isPageWithCustomLayout:d,isPublicDomain:u,idSchema:g}=e;const{initialLoadCachedPageChunkCalledAt:S}=h().A.state;C();const f=Boolean(null===(t=performance)||void 0===t?void 0:t.mark)?performance.mark("initial_page_render").startTime:performance.now();i().S3.mark("initial_page_render"),y({name:"await_page_chunk_end_to_browser_repaint_start",startTime:e=>{var t;return null===(t=e.await_page_chunk_start_to_await_page_chunk_end)||void 0===t?void 0:t.endTime},endTime:f});const v=n().getAppStartTime(),x=n().getPageOriginTime();v&&x&&x>0&&v>x&&y({name:"page_origin_to_app_start",startTime:()=>x,endTime:v});p().default.measureFromPageOrigin({metricName:"initial_page_render",endTime:f},{environment:o,data:_({initialRoute:r,isEditable:l,isHomePage:a,isWikiHome:c,isPageWithCustomLayout:d,isPublicDomain:u,idSchema:g,prefetchedQueryCollection:P(o),isPrewarmedTab:!1}),shouldSendIfStatsigNotInitialized:!0});h().A.state.subMetricsStore.state;void 0!==S&&p().default.DO_NOT_USE_measureFromPageOriginLegacy({metricName:"load_cached_page_chunk_wait_time",endTime:S},{environment:o,data:{initial_route:r},shouldSendIfStatsigNotInitialized:!0,sendToStatsig:!0});m().default.checkGate({gateName:"beacon_pre_ipr_assets"})&&function(e,t){var o;if(null===(o=performance)||void 0===o||!o.getEntriesByType)return;const i=performance.getEntriesByType("resource"),n={eventName:"pre_ipr_assets",eventProperties:{ipr_end:t,assets:i.map((e=>{let t;try{t=new URL(e.name).pathname}catch{t=e.name}return{url:t,initiator_type:e.initiatorType,time:e.duration,perf_start:e.startTime,perf_end:e.startTime+e.duration,decoded_body_size:e.decodedBodySize,transfer_size:e.transferSize}}))}};(0,s().u)({environment:e,event:n})}(o,f)}({environment:t,initialRoute:v,isEditable:o,isHomePage:r,isWikiHome:a,isPageWithCustomLayout:c,isPublicDomain:M,idSchema:g})}function _(e){const{initialRoute:t,isEditable:o,isHomePage:i,isWikiHome:s,isPageWithCustomLayout:r,isPublicDomain:a,isPrewarmedTab:d,idSchema:u,prefetchedQueryCollection:p}=e;return{...l().getSubMetricsAndMetricDataForTracking(e.isPrewarmedTab?{isPrewarmedTab:!0,prewarmedTabNavigationStart:e.prewarmedTabNavigationStart}:{isPrewarmedTab:!1}),initial_route:t,is_editable:o,is_home_page:i,is_page_with_custom_layout:r,is_public_domain:a,profiling_tool:(0,c().getProfilingToolForSession)(),is_wiki_home:s,time_origin_to_app_start:n().getAppStartTime(),includes_page_origin_to_app_start:!0,id_schema:u,prefetched_cvb:p,is_prewarmed_tab:d,desktop_load_origin:l().getDesktopLoadOrigin(d),desktop_tab_count:h().A.state.desktopTabCount}}function P(e){const t=e.RouterStore.state.route;if("page"!==t.name||!t.blockId)return!1;return r().Ob.lookupViewIds(t.blockId).some((t=>{var o;const i=(0,a().A)(t),n=null===(o=e.prefetchCache)||void 0===o?void 0:o.getPrefetchAnalytic(i);return"hit-match"===(null==n?void 0:n.type)||"attempted"===(null==n?void 0:n.type)||"hit-mismatch"===(null==n?void 0:n.type)}))}},918487:(e,t,o)=>{o.d(t,{v:()=>n});o(898992),o(354520),o(672577),o(737550);var i=()=>o(517223);function n(e){const{collectionStore:t,module:o,isMobile:n}=e;if("normalizedTitleWithIcon"!==o.type)return!1;const s=t.getSchema(),r=!!s&&(0,i().LD)({collectionSchema:s,module:o}).length>0,l=(0,i().pm)({collectionStore:t}).count>0;return!(!n||!l)||!r&&l}},933951:(e,t,o)=>{o.d(t,{Qf:()=>v,sS:()=>S,ub:()=>f});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577),o(737550);var i=o(296540),n=()=>o(484714),s=()=>o(56366),r=()=>o(455348),l=()=>o(691678),a=()=>o(235692),c=()=>o(778781),d=()=>o(33791),u=()=>o(577814),p=()=>o(478726),g=()=>o(240865),m=()=>o(548821),h=()=>o(9768);function S(e){const{pageStore:t,pageViewBlockStore:o,postContext:r,collectionStore:a,collectionSchema:p}=e,{collectionStore:g,collectionFormat:m,collectionSchema:S,canConfigureCollection:v}=(0,s().K8)((()=>{const e=a||(null==t?void 0:t.getAssociatedCollectionStore()),o=p||(null==e?void 0:e.getSchema()),i=null==e?void 0:e.getFormat(),n=e&&(0,d().v)({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1});return{collectionStore:e,collectionSchema:o,collectionFormat:i,canConfigureCollection:n}}),[t,a,p]),y=(0,n().v3)(),x=(0,s().K8)((()=>(0,u().A)({environment:y,store:t,pageViewBlockStore:o})),[y,t,o]),b=f({collectionFormat:m,collectionSchema:S,layoutStore:(0,s().K8)((()=>null==g?void 0:g.getLayoutStore()),[g]),postContext:r,pageStoreId:null==t?void 0:t.id,pageStore:t}),C=(0,s().K8)((()=>{const e=b.page_main.some((e=>(0,c().i_)(e)))||b.page_details.some((e=>(0,c().i_)(e)));return!(!g||!e)&&(0,h().cu)({modulesByArea:b,collectionStore:g})}),[b,g]),k=(0,i.useMemo)((()=>{const e=new Set;return(!Boolean(g)||!v&&C)&&e.add("properties"),"hidden"===(null==x?void 0:x.type)&&e.add("discussions"),e}),[v,g,null==x?void 0:x.type,C]);return(0,i.useMemo)((()=>0===k.size?b:(0,l().KO)(b,(e=>!k.has(e.type)))),[b,k])}function f(e){const{layoutStore:t,collectionSchema:o,collectionFormat:n,postContext:l,pageStoreId:c,pageStore:d}=e,u=(0,i.useRef)(c),h=(0,i.useRef)(null),S=(0,s().K8)((()=>null==d?void 0:d.getSpaceStore()),[d]),f=(0,g().V)(S)??0;return(0,s().K8)((()=>{var e;if(l===m().Rr.DraftPostInInlineComposer)return a().wC;if(null!=d&&d.isPersonProfile())return y({personProfileStore:d,spaceMemberCount:f});if((0,p().Mi)(l)){const e=(0,r().aG)(o,"created_time"),t=(0,r().aG)(o,"created_by"),i=[];t&&i.push(t),e&&i.push(e);return{...a()._u,page_main:[{...a()._u.page_main[0],propertyIds:i},...a()._u.page_main.slice(1)]}}let i=null==t?void 0:t.getModules();const s=c&&i&&c===u.current&&0===i.page_main.length&&(null===(e=h.current)||void 0===e?void 0:e.page_main.find((e=>"editor"===e.type)));return i&&!s||(i=(0,a().xN)({collectionSchema:o,collectionFormat:n})),u.current=c,h.current=i,i}),[l,d,t,c,f,o,n],{useDeepEqual:!0})}function v(e){const{personProfileStore:t}=e,o=(0,s().K8)((()=>t.getSpaceStore()),[t]),i=(0,g().V)(o)??0;return(0,s().K8)((()=>y({personProfileStore:t,spaceMemberCount:i})),[t,i])}function y(e){const{personProfileStore:t,spaceMemberCount:o}=e,i=t.getAssociatedCollectionStore();if(!i)return(0,a().E1)({spaceMemberCount:o});const n=i.getLayoutStore();if(!n)return(0,a().E1)({spaceMemberCount:o});const s=n.getModules();return!s||0===s.person_profile_page_main.length&&0===s.person_profile_page_details.length?(0,a().E1)({spaceMemberCount:o}):s}},941112:(e,t,o)=>{o.d(t,{E:()=>c});o(296540);var i=()=>o(401497),n=o(474848);const s={viewBox:"0 0 20 20",fittedViewBox:"3.3 3.29 13.41 13.41",svg:(0,n.jsx)("path",{d:"M4.825 3.3c-.842 0-1.525.683-1.525 1.525v10.35c0 .842.683 1.525 1.525 1.525h3.15c.842 0 1.525-.683 1.525-1.525V4.825c0-.842-.683-1.525-1.525-1.525zm7.2 0c-.842 0-1.525.683-1.525 1.525v3.15c0 .842.683 1.525 1.525 1.525h3.15c.842 0 1.525-.683 1.525-1.525v-3.15c0-.842-.683-1.525-1.525-1.525zm0 7.2c-.842 0-1.525.683-1.525 1.525v3.15c0 .842.683 1.525 1.525 1.525h3.15c.842 0 1.525-.683 1.525-1.525v-3.15c0-.842-.683-1.525-1.525-1.525z"})},r=(0,o(340498).wt)("layoutFill",s);var l=()=>o(959013),a=()=>o(493823);function c(e){const{style:t,onClick:o}=e,s=(0,i().IS)((()=>({buttonIcon:{width:18,height:18}})),[]);return(0,n.jsx)(a().p,{style:t,iconStyle:s.buttonIcon,isLightGray:!0,onClick:o,iconLeading:r,children:(0,n.jsx)(l().sA,{id:"pageViewBlock.customizeLayout",defaultMessage:"Customize layout"})},"customize-layout")}},948049:(e,t,o)=>{o.d(t,{A:()=>B,m:()=>O});o(296540);var i=()=>o(484714),n=()=>o(56366),s=()=>o(401497),r=()=>o(651124),l=()=>o(132855),a=()=>o(395546),c=()=>o(796073),d=()=>o(693954),u=()=>o(462853),p=()=>o(959013),g=()=>o(381349),m=()=>o(284371),h=()=>o(686526),S=()=>o(664133),f=()=>o(2220),v=()=>o(198491),y=()=>o(493208),x=()=>o(504836),b=()=>o(252833),C=()=>o(907514),k=()=>o(817126),w=()=>o(666803),_=()=>o(991249),P=()=>o(920773),M=()=>o(364280),I=()=>o(285790),T=()=>o(296798),A=o(474848);const j=(0,p().YK)({learnMore:{defaultMessage:"Learn more",id:"syncedCollectionIndicators.upsell.learnMore"}});const B=function(e){let{collectionStore:t,collectionContextStore:o}=e;return(0,n().K8)((()=>t.isSyncedCollection()),[t])?(0,A.jsx)(D,{collectionStore:t,collectionContextStore:o}):null};function L(e){return{color:e.text.secondary,fontSize:12,lineHeight:1.2}}function V(e){let{collectionStore:t,collectionContextStore:o}=e;const r=(0,s().DP)(),l=(0,i().v3)(),a=(0,n().K8)((()=>t.getFormatStore().getKeyStore("sync_state").getKeyStore("syncing").getValue()),[t]),u=(0,n().K8)((()=>t.getFormatStore().getKeyStore("sync_state").getKeyStore("last_synced_at").getValue()),[t]),m=(0,n().K8)((()=>null==o?void 0:o.numberChildrenUnfurledStore.state),[o]),S=(0,n().K8)((()=>null==o?void 0:o.numberChildrenReceivedStore.state),[o]),f=m&&S&&m/S<1&&!l.device.isMobile,v=a&&l.device.isMobile;let y;return u&&(y=(0,A.jsx)(p().sA,{defaultMessage:"Synced {lastSyncedAt}",id:"synced.lastSyncedAt.label",values:{lastSyncedAt:(0,C().nl)(u,{useLowercase:!0})}})),"row_limit_exceeded"===a?(0,A.jsx)(T().A,{style:{display:"inline-flex",...L(r)},onClick:()=>function(e){e&&(h().Ow({collectionContextStore:e,collectionSettingsStore:e.settingsStore}),h().a2({collectionSettingsStore:e.settingsStore,item:{type:"source"}}))}(o),children:(0,A.jsxs)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...L(r)},children:[(0,d().Q)({fill:(0,g().k5)("orange",r).fill,marginLeft:4,marginRight:4,width:12,alignSelf:"center"}),(0,A.jsx)(p().sA,{defaultMessage:"Partial Sync",id:"synced.partial_sync.label"})]})}):f||v?(0,A.jsxs)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...L(r)},children:[(0,A.jsx)(p().sA,{defaultMessage:"Syncing",id:"synced.syncing.label"}),(0,c().$)({marginLeft:4,marginRight:4,width:12,alignSelf:"center"},"sync-spinner")]}):(0,A.jsx)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...L(r)},children:y})}function E(){const e=(0,i().v3)(),t=(0,s().IS)((e=>({span:{color:e.text.secondary},linkBox:{fontSize:"14px",lineHeight:1.2,color:e.blueColor,marginLeft:"5px",marginRight:"5px"}})),[]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("span",{style:t.span,children:"•"}),(0,A.jsx)(T().A,{inline:!0,onClick:async()=>{await S().jh({environment:e,from:"collection_header"});const t=w().Ay.createNewFlowId();(0,f().u)({environment:e,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",from:"database_sync",flowId:t}}})},style:t.linkBox,hoveredStyle:{background:"none",textDecoration:"underline"},children:(0,A.jsx)(p().sA,{defaultMessage:"Improve your Jira sync",id:"synced.improve_jira_sync.label"})})]})}function D(e){let{collectionStore:t,collectionContextStore:o}=e;const i=(0,s().DP)(),l=(0,n().K8)((()=>t.getFormatStore().getKeyStore("original_url").getValue()),[t]),a=(0,n().K8)((()=>t.getSpaceId()),[t]),c=(0,n().K8)((()=>Boolean(t.getFormatStore().getKeyStore("sync_state").getValue())),[t]),d=(0,n().K8)((()=>l&&(0,y().e)(l,a)),[a,l]),u=(0,n().K8)((()=>(0,b().fH)(l,a)),[a,l]),p=(0,n().K8)((()=>{if(!(0,x().pB)())return!1;const e=t.getFormat().uri;return!!e&&(t.getFormat().external_collection_type!==r().uO.Jira&&(0,b().Ip)(e))}),[t]);return(0,A.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[d&&(0,A.jsx)(T().A,{href:d,style:{display:"inline-flex"},hoveredStyle:{background:"none",textDecoration:"underline"},innerStyle:{flexShrink:1,width:"none",padding:"2px 0px",marginRight:5,borderRadius:4,display:"flex",alignItems:"center",alignSelf:"center",...L(i)},external:!0,children:u}),c?(0,A.jsx)("span",{style:{color:i.text.secondary},children:"•"}):null,c?(0,A.jsx)(V,{collectionStore:t,collectionContextStore:o}):null,p&&(0,A.jsx)(E,{}),(0,A.jsx)(R,{collectionStore:t})]})}function R(e){let{collectionStore:t}=e;const o=(0,n().K8)((()=>{const e=(0,b().cl)(t.getFormat().uri,t.getSpaceId());return(null==e?void 0:e.id)??t.getFormat().integration_id}),[t]),i=(0,u().l)(o);return i?(0,A.jsx)(O,{featureName:i}):null}const K="https://www.notion.com/blog/notion-ai-for-work";function O(e){let{featureName:t}=e;const o=(0,i().v3)(),n=(0,p().tz)(),r=(0,s().IS)((e=>({upgradeDescription:{fontSize:m().J.UISmall.desktop,lineHeight:m().K_.UISmall.desktop,color:e.text.secondary,display:"flex",alignItems:"center"}})),[]),c=(0,k().uF)({featureName:t});if(null==c||!c.upsell)return null;const{upsell:d,upsellTier:u,expirationDate:g}=c;return(0,A.jsxs)(M().fI,{alignItems:"center",marginLeft:8,children:[(0,A.jsxs)("div",{style:r.upgradeDescription,children:[(0,A.jsx)(v().A,{expirationDate:g,upsellTier:u}),(0,A.jsx)(I().A,{onClick:()=>window.open(K,"_blank"),color:"tertiary",size:"sm",icon:a().infoCircleSmallIcon,ariaLabel:n.formatMessage(j.learnMore)})]}),(0,A.jsx)(P().p,{onClick:()=>{_().K(o,{from:"collection_synced_database",upsell:d})},iconLeading:l().arrowInCircleUpFillIcon,isBlue:!0,size:"xs",children:(0,A.jsx)(p().sA,{defaultMessage:"Upgrade",id:"syncedCollectionIndicators.upsell.upgrade"})})]})}},973454:(e,t,o)=>{o.d(t,{p:()=>a,A:()=>c});var i=o(296540),n=()=>o(615234);const s=24*n().pT;function r(e){return l(e).status}function l(e){if(null==e||!e.enabled)return{status:"disabled"};const t=e.start_ts?1e3*e.start_ts-Date.now():0;return t<=0?{status:"active"}:t<=s?{status:"warning",nextUpdateInMs:t}:{status:"scheduled",nextUpdateInMs:t-s}}function a(e){const[t,o]=(0,i.useState)((()=>r(e)));return(0,i.useEffect)((()=>{if(null==e||!e.enabled)return;let t;return function i(){t=void 0;const{status:n,nextUpdateInMs:s}=l(e);o(n),s&&(t=setTimeout(i,s))}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[e]),t}function c(e){const[t,o]=(0,i.useState)((()=>Date.now())),s=(null==e?void 0:e.enabled)&&e.start_ts;return(0,i.useEffect)((()=>{if("number"!=typeof s)return;const e=s;let t;return function i(){const s=Date.now();o(s);const r=e*n().TD-s;if(r>0){const e=r%n().Xb,o=0===e?n().Xb:e;t=setTimeout(i,o)}else t=void 0}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[s]),{freezeStatus:r(e),minUntilFreeze:s?Math.floor((s*n().TD-t)/n().Xb):void 0}}},996262:(e,t,o)=>{o.d(t,{z:()=>x});o(898992),o(354520),o(581454);var i=o(296540),n=()=>o(56366),s=()=>o(401497),r=()=>o(487929),l=()=>o(713998),a=()=>o(651124),c=()=>o(390066),d=()=>o(959013),u=()=>o(155004),p=()=>o(21140),g=()=>o(764891),m=()=>o(205682),h=()=>o(548821),S=()=>o(77238),f=()=>o(9768),v=()=>o(720501),y=o(474848);function x(e){const{pageStore:t,disabled:o,context:x,wrapper:b,showDefaultTitle:C}=e,k=x===h().Rr.PeekView,{isPageLocked:w}=(0,n().K8)((()=>({isPageLocked:t.isNonEditableState()})),[t]),{collectionStore:_,collectionSchema:P,normalizedCollectionFormat:M}=(0,n().K8)((()=>{const e=t.getAssociatedCollectionStore(),o=null==e?void 0:e.getSchema(),i=null==e?void 0:e.getFormat();return{collectionStore:e,collectionSchema:o,normalizedCollectionFormat:i&&o&&(0,c().L)(i,o,void 0,a().jf.Collection)}}),[t]),I=(0,i.useCallback)((e=>{const o=null==P?void 0:P[e];if("relation"!==(null==o?void 0:o.type))return!1;const i=t.getPropertyValue(e);return 0===(0,l().bG)({relationValue:(0,l().n)(i),propertySchema:o,getRecordModel:t.getRecordModel,includeNoAccess:!0}).length}),[P,t]),T=(0,n().K8)((()=>{if(!P||!M)return[];return(0,r().u)({format:M,schema:P,visibilityLevels:["inline"]}).filter((e=>!I(e)))}),[P,I,M]),A=(0,n().K8)((()=>{if(!P||!M)return[];return(0,r().T)({format:M,schema:P,visibilityLevels:["minimal","inline"]}).filter((e=>"minimal"===e.visibility||!("inline"!==e.visibility||!I(e.section)))).map((e=>e.section))}),[P,I,M]),j=(0,n().K8)((()=>t.canEdit()),[t]),B=(0,s().IS)((e=>({inlinePageSectionsContainer:{...A.length>0?{marginBottom:f().YE+f().Lb+(j?-4:0)}:{}},minimalPropertiesContainer:{display:"flex",flexDirection:"row",flexWrap:"wrap"}})),[A.length,j]);return _&&P&&M&&(0!==T.length||0!==A.length)?b((0,y.jsx)(p().wt,{gap:4,children:(0,y.jsxs)(u().s,{allowSelectionWithin:!0,children:[T.length>0&&(0,y.jsx)("div",{style:B.inlinePageSectionsContainer,children:(0,y.jsx)(g().A,{propertyIds:T,store:t,collectionStore:_,disabled:o,locked:w,blockPropertyValueOverlayStore:k?S().A:m().A,format:M,type:"inline"})}),A.length>0&&(0,y.jsxs)(y.Fragment,{children:[C&&(0,y.jsx)(v().j,{store:t,style:{marginLeft:6},children:(0,y.jsx)(d().sA,{id:"pageLayout.relationsGroup.defaultTitle",defaultMessage:"Relations"})}),(0,y.jsx)("div",{style:B.minimalPropertiesContainer,children:(0,y.jsx)(g().A,{propertyIds:A,store:t,collectionStore:_,disabled:o,locked:w,blockPropertyValueOverlayStore:k?S().A:m().A,format:M,type:"minimal"})})]})]})})):null}}}]);