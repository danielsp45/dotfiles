"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[65351],{814388:(e,t,i)=>{i.d(t,{$I:()=>ae,$L:()=>ie,$f:()=>G,Bu:()=>ee,GK:()=>Z,IF:()=>re,Ln:()=>B,Nn:()=>W,OM:()=>K,OQ:()=>Q,Ui:()=>T,Uo:()=>se,bD:()=>L,ds:()=>E,dy:()=>F,fk:()=>J,g8:()=>X,kr:()=>ne,sL:()=>te,uj:()=>oe,xt:()=>Y});i(944114),i(898992),i(354520),i(803949),i(581454);var o=()=>i(496603),a=()=>i(534177),n=()=>i(720665),s=()=>i(764880),r=()=>i(278132),c=()=>i(700500),l=()=>i(799288),d=()=>i(787626),u=()=>i(970013),p=()=>i(713998),m=()=>i(597777),f=()=>i(869190),g=()=>i(651124),b=()=>i(80979),h=()=>i(236162),N=()=>i(945778),y=()=>i(792071),M=()=>i(433847),v=()=>i(450648),k=()=>i(296344),S=()=>i(912720),R=()=>i(179034),x=()=>i(824862),j=()=>i(519831),C=()=>i(96689),A=()=>i(437607),P=()=>i(854150),w=()=>i(798880),U=()=>i(919709),I=()=>i(695608),_=()=>i(53528),V=()=>i(931075);const T=(0,i(959013).YK)({defaultPluralizedUserNames:{defaultMessage:"Someone",id:"pushNotification.pluralizedUserNames.defaultLabel"},defaultPermissionGroupName:{defaultMessage:"Deleted group",id:"pushNotification.permissionGroupName.defaultLabel"},defaultPageName:{defaultMessage:"a Notion page",id:"pushNotification.pageName.defaultLabel"},untitledPermissionGroupName:{defaultMessage:"Untitled group",id:"pushNotification.permissionGroupName.untitledLabel"},userEditedPermissionGroup:{defaultMessage:"{userName} edited {permissionGroupName}",id:"pushNotification.userEditedTarget.label"},userDeletedPermissionGroup:{defaultMessage:"{userName} deleted {permissionGroupName}",id:"pushNotification.userDeletedTarget.label"},userCreatedPermissionGroup:{defaultMessage:"{userName} created {permissionGroupName}",id:"pushNotification.userCreatedTarget.label"},unknownAuthor:{defaultMessage:"Unknown author",id:"pushNotification.authorPhrase.unknown"},untitledSpaceName:{defaultMessage:"Untitled",id:"pushNotification.untitledSpaceName.label"},untitledTeamName:{defaultMessage:"Untitled",id:"pushNotification.untitledTeamName.label"},untitledCollectionName:{defaultMessage:"Untitled",id:"pushNotification.untitledCollectionName.placeholder"},untitledBlockTitle:{defaultMessage:"Untitled",id:"pushNotification.untitledBlockTitle.placeholder"},twoUserNames:{defaultMessage:"{firstAuthor} and {secondAuthor}",id:"pushNotification.twoUserNames.label"},threePlusUserNames:{defaultMessage:"{othersCount, plural, one {{firstAuthor} and {othersCount} other} other {{firstAuthor} and {othersCount} others}}",id:"pushNotification.threePlusUserNames.label"},editorPermissionLabel:{defaultMessage:"Full access",id:"pushNotifications.editorPermissionLevel.label"},readerPermissionLabel:{defaultMessage:"Read only",id:"pushNotifications.readerPermissionLevel.label"},editOnlyPermissionLabel:{defaultMessage:"Edit only",id:"pushNotifications.editOnlyPermissionLevel.label"},editPermissionLabel:{defaultMessage:"Edit",id:"pushNotifications.editPermissionLevel.label"},commentOnlyPermissionLabel:{defaultMessage:"Comment only",id:"pushNotifications.commentOnlyPermissionLevel.label"},noAccessPermissionLabel:{defaultMessage:"No access",id:"pushNotifications.noAccessPermissionLevel.label"},publicPermissionRoleLabel:{defaultMessage:"Public ({permissionLevel})",id:"pushNotifications.publicPermissions.label"},userNameWithRole:{defaultMessage:"{userName} ({permissionLevel})",id:"pushNotifications.userPermissionsWithRole.label"},botNameWithRole:{defaultMessage:"{botName} ({permissionLevel})",id:"pushNotifications.botPermissionsWithRole.label"},spaceNameWithRole:{defaultMessage:"{spaceName} ({permissionLevel})",id:"pushNotifications.spacePermissionsWithRole.label"},imageInPushNotification:{defaultMessage:"{imageEmoji} Image",id:"pushNotification.imageInPushNotification.placeholder"},topLevelBlockCreated:{defaultMessage:"{userName} created {targetName} in {spaceName}",id:"pushNotification.userCreatedBlockInSpace.message"},topLevelBlockDeleted:{defaultMessage:"{userName} deleted {targetName} in {spaceName}",id:"pushNotification.userDeletedBlockInSpace.message"},collectionRowCreated:{defaultMessage:"{userName} created {targetName} in {collectionName}",id:"pushNotification.userCreatedRowInCollection.message"},collectionRowDeleted:{defaultMessage:"{userName} deleted {targetName} in {collectionName}",id:"pushNotification.userDeletedRowInCollection.message"},emptyBlockEditedProperty:{defaultMessage:"Empty",id:"pushNotification.emptyBlockPropertyValueEdited.placeholderLabel"},propertyNameAndValueEdited:{defaultMessage:"{propertyName} ({propertyValue})",id:"pushNotification.propertyNameWithEditedValue.notificationSubject"},propertyNameAndValueNotificationBody:{defaultMessage:"{propertyName} ({propertyValue})",id:"pushNotification.propertyNameWithEditedValue.notificationBody"},blockDeletedEditBody:{defaultMessage:"[Deleted] {renderedBlock}",id:"pushNotification.deletedBlock.notificationContents"},blockEditedNotification:{defaultMessage:"{userName} edited {blockName}",id:"pushNotification.blockEdited.notificationSubject"},blockPropertyEditedNotification:{defaultMessage:"{userName} edited {blockName}",id:"pushNotification.blockPropertyEdited.notificationSubject"},mobileBlockPropertyEditedNotification:{defaultMessage:"{userName} edited",id:"pushNotification.mobileBlockPropertyEdited.notificationSubject"},userEditedPermissionsFor:{defaultMessage:"{userName} edited permissions for {targetName}",id:"pushNotifications.permissionsEditedForPageOrSpace.notificationSubject"},userMentionedIn:{defaultMessage:"{userName} mentioned you in {targetName}",id:"pushNotifications.userMentionedInPage.notificationSubject"},mobileUserMentionedIn:{defaultMessage:"{userName} mentioned you",id:"pushNotifications.mobileUserMentionedInPage.notificationSubject"},permissionGroupMentionedIn:{defaultMessage:"{userName} mentioned {groupName} in {targetName}",id:"pushNotifications.groupMentionedInPage.notificationSubject"},teamMentionedIn:{defaultMessage:"{userName} mentioned {teamName} in {targetName}",id:"pushNotifications.teamMentionedInPage.notificationSubject"},userDeletedComment:{defaultMessage:"[Deleted]ðŸ’¬ {commentText}",id:"pushNotifications.userDeletedCommentText.notificationContents"},userCommentedSubject:{defaultMessage:"{userName} commented in {targetName}",id:"pushNotifications.userCommentedSubject.notificationSubject"},userSuggestedSubject:{defaultMessage:"{userName} suggested in {targetName}",id:"pushNotifications.userSuggestedSubject.notificationSubject"},mobileUserCommentedSubject:{defaultMessage:"{userName} commented",id:"pushNotifications.mobileUserCommentedSubject.notificationSubject"},mobileUserSuggestedSubject:{defaultMessage:"{userName} commented",id:"pushNotifications.mobileUserSuggestedSubject.notificationSubject"},userAddedToSpace:{defaultMessage:"{userName} added you to {workspaceName}",id:"pushNotifications.userAddedToSpace.notificationSubject"},mobileUserInvited:{defaultMessage:"{userName} invited you",id:"pushNotifications.mobileUserInvited.notificationSubject"},mobileUserInvitedByBot:{defaultMessage:"You have been invited",id:"pushNotifications.mobileUserInvitedByBot.notificationSubject"},userInvitedToSpace:{defaultMessage:"{userName} invited you to {workspaceName}",id:"pushNotifications.userInvitedToSpace.notificationSubject"},userInvitedToSpaceByBot:{defaultMessage:"You have been invited to {workspaceName}",id:"pushNotifications.userInvitedToSpaceByBot.notificationSubject"},userEditedCollectionSubject:{defaultMessage:"{userName} edited {collectionName}",id:"pushNotifications.collectionEdited.notificationSubject"},userEditedCollectionPageLayoutSubject:{defaultMessage:"{userName} edited the layout of {collectionName}",id:"pushNotifications.collectionPageLayoutEdited.notificationSubject"},userCreatedCollectionSubject:{defaultMessage:"{userName} created {collectionName}",id:"pushNotifications.collectionCreated.notificationSubject"},collectionDescriptionDeleted:{defaultMessage:"{userName} deleted the description for {collectionName}",id:"pushNotifications.collectionDescriptionDeleted.notificationSubject"},collectionDescriptionCreated:{defaultMessage:"{userName} added a description for {collectionName}",id:"pushNotifications.collectionDescriptionAdded.notificationSubject"},untitledCollectionView:{defaultMessage:"Untitled",id:"pushNotifications.untitledCollection.label"},collectionViewEditedSubject:{defaultMessage:"{userName} edited view {collectionViewName} in {collectionName}",id:"pushNotifications.collectionViewEdited.notificationSubject"},collectionPropertyEditedUnknown:{defaultMessage:"Unknown",id:"pushNotifications.unknownCollectionPropertyName.label"},collectionPropertyEditedSubject:{defaultMessage:"{userName} edited property {propertyType} in {collectionName}",id:"pushNotifications.collectionPropertyEdited.subject"},reminderSubject:{defaultMessage:"Reminder in {pageName}",id:"pushNotifications.reminderChanged.subject"},pageLockedActivity:{defaultMessage:"{userName} locked {pageName}",id:"pushNotifications.pageLocked.subject"},pageUnlockedActivity:{defaultMessage:"{userName} unlocked {pageName}",id:"pushNotifications.pageUnlocked.subject"},emailEditedActivity:{defaultMessage:"{userName} edited their account settings",id:"pushNotifications.emailAccountSettingsEdited.subject"},emptyPropertyBody:{defaultMessage:"Empty",id:"pushNotifications.emptyPropertyValueInCollection.label"},unknownRelationValueChange:{defaultMessage:"Unknown",id:"pushNotifications.unknownRelationPropertyChanged.label"},unknownAuthorInPropertySchemaChange:{defaultMessage:"Unknown author",id:"pushNotifications.unknownAuthorUpdatedProperty.label"},accessRequestedSubject:{defaultMessage:"{userName} requested access to {pageName}",id:"pushNotifications.accessRequested.subject"},editAccessRequestedSubject:{defaultMessage:"{userName} requested edit access to {pageName}",id:"pushNotifications.editAccessRequested.subject"},accessRequestResolvedApprovedSubject:{defaultMessage:"Your request to invite {guestEmail} to {pageName} has been approved",id:"pushNotifications.accessRequestResolved.approved.subject"},accessRequestResolvedRejectedSubject:{defaultMessage:"Your request to invite {guestEmail} to {pageName} has been rejected",id:"pushNotifications.accessRequestResolved.subject"},membershipRequestedSubject:{defaultMessage:"{userName} requested to add a new member to {workspaceName}",id:"pushNotifications.membershipRequested.subject"},guestInviteRequestedSubject:{defaultMessage:"{userName} requested to invite a guest to {workspaceName}",id:"pushNotifications.guestInviteRequested.subject"},blockFormatEditPageIconName:{defaultMessage:"Page Icon",id:"pushNotifications.formatChange.pageIcon.label"},pageIconImagePlaceholder:{defaultMessage:"Image",id:"pushNotifications.formatChange.pageIcon.imagePlaceholder"},pageDeletedActivity:{defaultMessage:"{userName} deleted {pageName}",id:"pushNotifications.pageDeleted.subject"},pageRestoredActivity:{defaultMessage:"{userName} restored {pageName}",id:"pushNotifications.pageRestored.subject"},pagePermanentlyDeletedActivity:{defaultMessage:"{userName} permanently deleted {pageName}",id:"pushNotifications.pagePermanentlyDeleted.subject"},userInvitedToTeam:{defaultMessage:"{userName} invited you to {teamName}",id:"pushNotifications.userInvitedToTeam.notificationSubject"},privateContentTransferred:{defaultMessage:"{author} transferred private content from {fromUserName} to you: {pageName}",id:"pushNotifications.privateContentTransferred.notificationSubject"},verificationExpired:{defaultMessage:"Verification expired for {pageName}",id:"pushNotifications.verificationExpired.notificationSubject"},importSuccessful:{defaultMessage:"Your {importSource} import was successful",id:"pushNotifications.importCompleted.notificationSubject"},importFailed:{defaultMessage:"Your {importSource} import has failed",id:"pushNotifications.importFailed.notificationSubject"},exportCompleted:{defaultMessage:"Your workspace export is ready",id:"pushNotifications.exportCompleted.notificationSubject"},inAppNotificationAutomationActionTriggered:{defaultMessage:"{automationName} sent you a message",id:"pushNotifications.inAppNotificationAutomationActionTriggered.notificationSubject"},noConflictsFound:{defaultMessage:"No conflicts found",id:"pushNotifications.noConflictsFound.notificationSubject"},automationTypecheckErrorRaisedSubject:{defaultMessage:"{automationName} is invalid",id:"pushNotifications.automationTypecheckErrorRaised.notificationSubject"},automationTypecheckErrorRaisedBody:{defaultMessage:"Resolve any errors or remove failing steps to enable this automation",id:"pushNotifications.automationTypecheckErrorRaised.notificationBody"},reactionCreated:{defaultMessage:"{userName} reacted to {targetName}",id:"pushNotifications.reactionCreated.notificationSubject"},upgradeRequestCreated:{defaultMessage:"{userName} requested an upgrade",id:"pushNotifications.upgradeRequestCreated.notificationSubject"},appBuilderWorkflowError:{defaultMessage:"A workflow run has failed",id:"pushNotifications.appBuilderWorkflowError.notificationSubject"},appBuilderWorkflowAction:{defaultMessage:"{workflowName} has sent you a message",id:"pushNotifications.appBuilderWorkflowAction.notificationSubject"},customAppBuilderWorkflowActionTitle:{defaultMessage:"From {workflowName}: {customTitle}",id:"pushNotifications.appBuilderWorkflowAction.customNotificationSubject"},externalIntegrationNotificationDefault:{defaultMessage:"An external integration has sent you a message",id:"pushNotifications.externalIntegrationNotificationDefault.notificationSubject"},externalIntegrationNotificationJiraSyncTokenExpiryError:{defaultMessage:"Your Jira sync stopped for {site} due to expired Jira token. Please re-authenticate to continue.",id:"pushNotifications.externalIntegrationNotificationJiraSyncTokenExpiryError.notificationSubject"},trialCreated:{defaultMessage:"{userName} started a {days} day trial of Notion {product}",id:"pushNotifications.trialCreated.notificationSubject"},trialCreatedWithoutUserName:{defaultMessage:"Your space is in a {days} day trial of Notion {product}",id:"pushNotifications.trialCreatedWithoutUserName.notificationSubject"},trialCreatedBody:{defaultMessage:"You now have access to all {product} plan features until {endDate}",id:"pushNotifications.trialCreatedBody.notificationBody"}});function B(e){const{activity:t,getRecordValue:i}=e,a=t.getEdits();return o().oE((0,n().qt)(o().Bq(a.map((e=>e.authors||[])))).map((e=>{const t=i(e);if(t)return(0,s().D3)({table:e.table,value:t})})))}function L(e,t){const i=e.map((e=>e?(0,s().lR)(t,e):t.formatMessage(T.unknownAuthor)));return function(e,t){if(1===t.length)return t[0];if(2===t.length)return e.formatMessage(T.twoUserNames,{firstAuthor:t[0],secondAuthor:t[1]});if(t.length>2){const i=t.length-1;return e.formatMessage(T.threePlusUserNames,{othersCount:i,firstAuthor:t[0]})}return e.formatMessage(T.defaultPluralizedUserNames)}(t,i)}function E(e){var t;const{recipientUser:i,authors:o}=e,a=o.filter((e=>e.id!==(null==i?void 0:i.id)));if(0===a.length)return;const n=a[0];var s;return n.table===w().oo&&null!==(t=n.asActor)&&void 0!==t&&t.profile_photo?null===(s=n.asActor)||void 0===s?void 0:s.profile_photo:void 0}function F(e){if(!o().Im(e))return e[0].id}function D(e){const{blockValue:t,getRecordValue:i,userTimeZone:o,intl:a}=e,n=y().Bj6.fromBlock(t),s=y().b4_.fromGetRecordValueFn(i);return n.getRenderTitleWithEmojiOrPlaceholder({getRecordModel:s,userTimeZone:o,intl:a,isWorkflowsContainerWithCreationEnabled:!1})}function G(e){return function(e){const{activity:t,getRecordValue:i,pageVisitSource:o,userTimeZone:a,intl:n}=e,s=y().b4_.fromGetRecordValueFn(i),r=t.navigable_block_id||t.top_level_block_id||t.collection_row_id;if(r){const c=i({table:R().ev,id:r,spaceId:t.space_id});if(c){return{url:y().Bj6.fromBlock(c).getRenderUrl({getRecordModel:s,baseUrl:e.baseURL,pageVisitSource:o}),title:D({intl:n,blockValue:c,getRecordValue:i,userTimeZone:a})}}return{url:e.baseURL||"/",title:n.formatMessage(T.untitledBlockTitle)}}if(t.collection_id)return z(e);if("user-invited"===t.type){const o=function(e){const{activity:t}=e,i=y().b4_.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel);if(!t.permission_group_id)return;const o=ae({spaceId:t.space_id,permissionGroupId:t.permission_group_id,getRecordModel:i});if(o)return{icon:o.getIcon(),name:o.getName()};return}({activity:t,getRecordValue:i}),a=s({table:C().NX,id:t.space_id});if(a&&o)return{title:ne(n,o),url:a.getRenderUrl({baseUrl:e.baseURL})}}else{if("team-membership-edited"===t.type)return q(e);if("access-requested"===t.type){const i=s({id:t.getAccessRequestId(),table:k().O,spaceId:t.space_id});if(i&&i.isTeamMembershipRequest())return q(e)}}return O(e)}(e).title.replaceAll(/[\r\n]+/g," ")}function W(e){const{activity:t}=e,i=t.navigable_block_id||t.top_level_block_id||t.collection_row_id;return i||(t.collection_id?t.collection_id:void 0)}function q(e){const{activity:t,getRecordValue:i,intl:o}=e,a=y().b4_.fromGetRecordValueFn(i),n=e.baseURL||"/",s=o.formatMessage(T.untitledTeamName);if(!t.team_id)return{url:n,title:s};const r=a({table:P().yK,id:t.team_id}),c=a({table:C().NX,id:t.space_id});return{url:(null==c?void 0:c.getRenderUrl({baseUrl:e.baseURL}))??n,title:(null==r?void 0:r.getRenderTitleWithEmojiOrPlaceholder({intl:o}))??s}}function Z(e){return O(e).title}function O(e){const{activity:t,getRecordValue:i,intl:o}=e,a=i({table:C().NX,id:t.space_id});if(a){const t=y().Bj6.fromSpace(a);return{title:t.getRenderTitleWithEmojiOrPlaceholder({intl:o}),url:t.getRenderUrl({baseUrl:e.baseURL})}}return{url:e.baseURL||"/",title:o.formatMessage(T.untitledSpaceName)}}function K(e){return z(e).title}function z(e){const{activity:t,getRecordValue:i,pageVisitSource:o,userTimeZone:a,intl:n}=e;if(t.collection_id){const s=i({table:j().Vl,id:t.collection_id,spaceId:t.space_id});if(s){const t=y().Bj6.fromCollection(s),i=y().b4_.fromGetRecordValueFn(e.getRecordValue),r=t.getRenderTitleWithEmojiOrPlaceholder({getRecordModel:i,userTimeZone:a,intl:n,isWorkflowsContainerWithCreationEnabled:!1});return{url:t.getRenderUrl({getRecordModel:i,baseUrl:e.baseURL,pageVisitSource:o}),title:r}}return{url:e.baseURL||"/",title:n.formatMessage(T.untitledCollectionName)}}return{url:e.baseURL||"/",title:n.formatMessage(T.untitledCollectionName)}}function Y(e){const{activity:t,getRecordValue:i,intl:o}=e;if("in-app-notification-automation-action-triggered"===t.type||"automation-typecheck-error-raised"===t.type){const e=y().b4_.fromGetRecordValueFn(i),a=e({table:S().yB,id:t.getEdits()[0].automation_id,spaceId:t.space_id});return(null==a?void 0:a.getNameWithDefault(e,o))??(0,r().PK)(o)}}function H(e){if(e.blockValue.properties)return(0,v().r4)({intl:e.intl,textValue:e.blockValue.properties.title,getRecordModel:y().b4_.fromGetRecordValueFn(e.getRecordValue),userTimeZone:e.userTimeZone})}function $(e,t){const i=(0,M().an)(t,void 0);return e.formatMessage(i)}function J(e){let{userTimeZone:t,activity:i,getRecordValue:a,pageVisitSource:n,intl:s,experimentService:r,collectionFeatureGates:c}=e;const d=i.getEdits();if(d.length){const e=[];d.forEach((t=>{"permission-created"===t.type?e.push(t.permission_data):"permission-deleted"===t.type?e.push({...t.permission_data,role:"none"}):"permission-restriction-created"===t.type||"permission-restriction-deleted"===t.type?(t.permission_data.calculated_changes||[]).forEach((t=>{let[i,o]=t;e.push(o)})):e.push(t.permission_data.after)}));const u=o().oE(e.sort(M().zK).map((e=>{if("user_permission"===e.type){const t=a({table:w().oo,id:e.user_id}),i=(0,I().c6)(s,t),o=$(s,e.role);return s.formatMessage(T.userNameWithRole,{userName:i,permissionLevel:o})}if("space_permission"===e.type){const o=Z({intl:s,activity:i,getRecordValue:a,userTimeZone:t,pageVisitSource:n,experimentService:r,collectionFeatureGates:c}),l=$(s,e.role);return s.formatMessage(T.spaceNameWithRole,{spaceName:o,permissionLevel:l})}if("public_permission"===e.type){const t=$(s,e.role);return s.formatMessage(T.publicPermissionRoleLabel,{permissionLevel:t})}if("bot_permission"===e.type){const t=a({table:x().GP,id:e.bot_id}),i=(0,l().Hg)(t),o=$(s,e.role);return s.formatMessage(T.botNameWithRole,{botName:i,permissionLevel:o})}})));return s.formatList(u,{type:"conjunction",style:"narrow"})}}function X(e){const{intl:t}=e;switch(e.blockValue.type){case c().xd.text:case c().xd.header:case c().xd.subHeader:case c().xd.subSubHeader:case c().xd.factory:case c().xd.equation:case c().xd.code:return H(e);case c().xd.toggle:return`â–¸ ${H(e)}`;case c().xd.bulletedList:return`â€¢ ${H(e)}`;case c().xd.numberedList:return`1. ${H(e)}`;case c().xd.quote:return`â€œ${H(e)}â€`;case c().xd.toDo:return(function(e){let{blockValue:t}=e;return p().wu(t.properties&&t.properties.checked)}(e)?"âœ“ ":"â–¢ ")+H(e);case c().xd.file:case c().xd.bookmark:return`ðŸ”— ${H(e)}`;case c().xd.embed:case c().xd.framer:case c().xd.whimsical:case c().xd.mixpanel:case c().xd.miro:case c().xd.abstract:case c().xd.sketch:case c().xd.excalidraw:case c().xd.replit:case c().xd.hex:case c().xd.deepnote:case c().xd.tweet:case c().xd.gist:case c().xd.maps:case c().xd.invision:case c().xd.video:case c().xd.audio:case c().xd.image:return t.formatMessage(T.imageInPushNotification,{imageEmoji:"ðŸ–¼"});case c().xd.drive:return function(e){const{blockValue:t}=e,i=(0,g().v)(y().Bj6.fromBlock(t));return i&&i.title?i.title:D(e)}(e);case c().xd.page:case c().xd.collectionView:case c().xd.collectionViewPage:return D(e);case c().xd.tableRow:return function(e){var t;const{blockValue:i,getRecordValue:o,userTimeZone:a,intl:n}=e,s=o({table:i.parent_table,id:i.parent_id,spaceId:i.space_id});if(!s||!i)return;const r=i.properties,c=(null===(t=s.format)||void 0===t?void 0:t.table_block_column_order)||[];return c&&r?c.map((e=>(0,v().r4)({textValue:r[e],getRecordModel:y().b4_.fromGetRecordValueFn(o),userTimeZone:a,intl:n}))).join(", "):void 0}(e)}}function Q(e){const{getRecordValue:t,baseURL:i,userTimeZone:o,intl:a,collectionFeatureGates:n}=e,s=t({table:R().ev,id:e.blockId});if(s){if("page"===s.type){const r=(0,h().zN)({block:s,getRecordValue:t});if(r){const i=u().Dp(r),o=i[e.property],c=o?o.name:void 0,l=ee({property:e.property,schema:i,block:s,getRecordValue:t,userTimeZone:e.userTimeZone,baseURL:e.baseURL,intl:a,experimentService:e.experimentService,collectionFeatureGates:n})||a.formatMessage(T.emptyPropertyBody);return a.formatMessage(T.propertyNameAndValueNotificationBody,{propertyName:c,propertyValue:l})}return X({intl:a,blockValue:s,getRecordValue:t,baseURL:i,userTimeZone:o})}return X({intl:a,blockValue:s,getRecordValue:t,baseURL:i,userTimeZone:o})}}function ee(e){const{property:t,schema:i,getRecordValue:o,userTimeZone:a,baseURL:r,intl:c,experimentService:l,collectionFeatureGates:d}=e,g=i[t],h=y().Bj6.fromBlock(e.block);if(!h.getProperties()||!g)return;const N=h.getProperties()[t];if("formula"===g.type){const e=y().b4_.fromGetRecordValueFn(o),s=(0,b().primitiveFormulaValueFromPropertySchema)({schema:i,property:t,blockModel:h,getRecordModel:e,intl:c,userTimeZone:a,depth:0,resultCache:new Map,regExpCache:new Map,formatDateCache:new Map,experimentService:l,collectionFeatureGates:d});return m().kC(s)?(0,f().ZF)({allowRelativeDates:!0,intl:c,value:s,userTimeZone:a}):"boolean"==typeof s?s?u().I1:u().oP:(0,n().Et)(s)?s.toString():s}if("person"===g.type)return c.formatList(p().Y6({textValue:N,propertySchema:g,blockCreatorPointer:h.getCreatedByPointer()}).map((e=>{const t=o(e),i=(0,s().D3)({table:e.table,value:t});return(0,s().lR)(c,i)})),{type:"conjunction",style:"narrow"});if("created_by"===g.type){const e=h.getCreatedByPointer();if(!e)return c.formatMessage(T.unknownAuthorInPropertySchemaChange);const t=o(e),i=t&&(0,s().D3)({table:e.table,value:t});return i?(0,s().lR)(c,i):c.formatMessage(T.unknownAuthorInPropertySchemaChange)}return"created_time"===g.type?(0,f().W_)(h.getCreatedTime(),"short",c.locale,a):N?te({propertySchema:g,textValue:N,getRecordValue:o,userTimeZone:a,baseURL:r,intl:c,experimentService:l}):void 0}function te(e){const{propertySchema:t,textValue:i,getRecordValue:o,userTimeZone:n,baseURL:r,intl:c}=e;if("title"===t.type||"text"===t.type||"place"===t.type)return(0,v().r4)({intl:c,textValue:i,getRecordModel:y().b4_.fromGetRecordValueFn(o),userTimeZone:n});if("select"===t.type){const e=t.options||[];return p().L3(i,e)}if("multi_select"===t.type){const e=t.options||[];return c.formatList(p().o2(i,e),{type:"conjunction",style:"narrow"})}if("checkbox"===t.type)return p().wu(i)?u().I1:u().oP;if("date"===t.type){const e=(0,d().b)(i);if(e)return(0,f().ZF)({allowRelativeDates:!0,intl:c,value:e,date_format:t.date_format,time_format:t.time_format,userTimeZone:n})}else{if("person"===t.type)return c.formatList(p().Y6({textValue:i,propertySchema:t,blockCreatorPointer:void 0}).map((e=>{const t=o(e),i=(0,s().D3)({table:e.table,value:t});return(0,s().lR)(c,i)})),{type:"conjunction",style:"narrow"});if("relation"===t.type){const e=p().bG({relationValue:p().n(i),getRecordModel:y().b4_.fromGetRecordValueFn(o),propertySchema:t,includeNoAccess:!0});return c.formatList(e.map(o).map((e=>e?D({intl:c,blockValue:e,getRecordValue:o,baseURL:r,userTimeZone:n}):c.formatMessage(T.unknownRelationValueChange))),{type:"conjunction",style:"narrow"})}if("number"===t.type){const e=p().Me(i);if(void 0!==e)return e.toString()}else if("auto_increment_id"===t.type){const e=p().On(i);if(void 0!==e)return e.toString()}else{if("file"===t.type)return c.formatList(p().pJ(i).map((e=>e.name||e.url)),{type:"conjunction",style:"narrow"});if("url"===t.type||"phone_number"===t.type||"email"===t.type)return(0,U().k4p)(i);if("created_by"===t.type)return;if("created_time"===t.type)return;if("formula"===t.type)return;if("rollup"===t.type)return;if("last_edited_by"===t.type)return;if("last_edited_time"===t.type)return;if("last_visited_time"===t.type)return;if("button"===t.type)return;if("status"===t.type)return p().RZ(i,t);if("location"===t.type)return;if("verification"===t.type){const e=V().U1(i),t=e?V().B2(e):{type:"none"};if("none"===t.type)return c.formatMessage(V().nl.none);const a=o(t.actorPointer),r=(0,s().D3)({table:t.actorPointer.table,value:a}),l=(0,s().lR)(c,r);return"verified"===t.type&&t.isIndefinite?c.formatMessage(V().nl.verifiedIndefinitely,{actor:l}):c.formatMessage(V().nl.verifiedUntil,{actor:l,datetime:_().T2({dateTime:t.dateTimeRange.end,intl:c,userTimeZone:n,displayInUserTimezone:!1,alwaysIncludeTimezone:!0})})}(0,a().HB)(t)}}}function ie(e){if("page_icon"===e.formatProperty)return e.intl.formatMessage(T.blockFormatEditPageIconName)}function oe(e){const{formatProperty:t,block:i,getRecordValue:o,intl:a}=e;if("page_icon"===t){const e=y().Bj6.fromBlock(i).getRenderIcon({getRecordModel:y().b4_.fromGetRecordValueFn(o)});return e?(0,N().A)(e.icon)?e.icon:a.formatMessage(T.pageIconImagePlaceholder):a.formatMessage(T.emptyBlockEditedProperty)}}function ae(e){const t=y().b4_.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel),{spaceId:i,permissionGroupId:o}=e;return t({table:A().n,id:(0,A().T1)({spaceId:i,spacePermissionGroupId:o}),spaceId:i})}function ne(e,t){if(t){return[(0,N().A)(t.icon)?t.icon:void 0,t.name.length>0?t.name:e.formatMessage(T.untitledPermissionGroupName)].filter(Boolean).join(" ")}return e.formatMessage(T.defaultPermissionGroupName)}function se(e){const t=y().b4_.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel),{spaceId:i,teamId:o}=e;return t({table:P().yK,id:o,spaceId:i})}function re(e){switch(e){case"block-property-edited":case"reacted":case"commented":case"permission-group-mentioned":case"team-mentioned":case"reminder":case"user-invited":case"in-app-notification-automation-action-triggered":case"user-mentioned":case"app-builder-notification":return!0;case"access-requested":case"access-request-resolved":case"email-edited":case"private-content-transferred":case"team-membership-edited":case"verification-expired":case"export-completed":case"import-completed":case"no-conflicts-found":case"automation-typecheck-error-raised":case"external-integration-notification":case"block-edited":case"collection-edited":case"collection-page-layout-edited":case"collection-property-edited":case"collection-row-created":case"collection-row-deleted":case"collection-view-edited":case"page-deleted":case"page-locked":case"page-permanently-deleted":case"page-restored":case"page-unlocked":case"permissions-edited":case"trial-created":case"top-level-block-created":case"upgrade-request-created":case"top-level-block-deleted":case"grouped-commented":case"grouped-block-property-updated":case"grouped-user-mentioned":return!1;default:return(0,a().ub)(e),!1}}},863522:(e,t,i)=>{i.d(t,{C:()=>n});i(296540);var o=i(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"3.12 1.25 15.63 15.63",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M16.25 6.25a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5"}),(0,o.jsx)("path",{d:"M5.25 3.125h7.302a3.8 3.8 0 0 0 0 1.25H5.25a.875.875 0 0 0-.875.875v9.5c0 .483.392.875.875.875h9.5a.875.875 0 0 0 .875-.875V7.448a3.8 3.8 0 0 0 1.25 0v7.302a2.125 2.125 0 0 1-2.125 2.125h-9.5a2.125 2.125 0 0 1-2.125-2.125v-9.5c0-1.174.951-2.125 2.125-2.125"})]})},n=(0,i(340498).wt)("markUnread",a)},929469:(e,t,i)=>{i.d(t,{B:()=>o});const o=(0,i(296540).createContext)(void 0);o.displayName="SplitInboxActivityContext"},934999:(e,t,i)=>{i.d(t,{B:()=>n});i(296540);var o=i(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.75 13.76",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M8 9.875a.625.625 0 1 0 0 1.25h4a.625.625 0 1 0 0-1.25z"}),(0,o.jsx)("path",{d:"M3.125 4.75c0-.897.728-1.625 1.625-1.625h10.5c.898 0 1.625.728 1.625 1.625v1.57c0 .676-.413 1.256-1 1.5v7.43c0 .898-.727 1.625-1.625 1.625h-8.5a1.625 1.625 0 0 1-1.625-1.625V7.82c-.587-.244-1-.824-1-1.5zm11.5 3.195h-9.25v7.305c0 .207.168.375.375.375h8.5a.375.375 0 0 0 .375-.375zm1-1.625V4.75a.375.375 0 0 0-.375-.375H4.75a.375.375 0 0 0-.375.375v1.57c0 .205.164.372.369.375h10.512a.375.375 0 0 0 .369-.375"})]})},n=(0,i(340498).wt)("archiveBox",a)},965351:(e,t,i)=>{i.d(t,{Ay:()=>_,Lk:()=>I,UM:()=>w});i(581454);var o=i(296540),a=()=>i(484714),n=()=>i(56366),s=()=>i(401497),r=()=>i(934999),c=()=>i(454503),l=()=>i(396350),d=()=>i(863522),u=()=>i(340498),p=()=>i(959013),m=()=>i(534177),f=()=>i(953448),g=()=>i(572080),b=()=>i(751156),h=()=>i(760217),N=()=>i(406699),y=()=>i(285790),M=()=>i(928600),v=()=>i(939740),k=()=>i(89924),S=()=>i(859428),R=()=>i(125565),x=()=>i(722872),j=()=>i(575301),C=()=>i(538075),A=i(474848);const P=(0,p().YK)({changePageNotificationSettings:{defaultMessage:"Change page notification settings",id:"inboxActionsMenu.notificationSettings.tooltipMessage"},markUnread:{defaultMessage:"Mark this notification as unread",id:"inboxActionsMenu.markNotificationAsUnread.tooltipMessage"},markRead:{defaultMessage:"Mark this notification as read",id:"inboxActionsMenu.markNotificationAsRead.tooltipMessage"},archive:{defaultMessage:"Archive this notification",id:"inboxActionsMenu.handleArchive.tooltipMessage"},unarchive:{defaultMessage:"Unarchive",id:"inboxActionsMenu.handleUnarchive.tooltipMessage"}}),w=96;function U(e){const{notification:t,rootStore:m,onArchiveClicked:f,onUnarchiveClicked:h,onMarkAsReadClicked:M,onMarkAsUnreadClicked:v}=e,k=(0,a().v3)(),R=(0,a().Y0)(),x=(0,p().tz)(),w=(0,o.useContext)(i(929469).B),U=(0,n().K8)((()=>!!t&&(0,i(814388).IF)(t.type)),[t]),_=(0,n().K8)((()=>{const e=null==t?void 0:t.navigable_block_id;if(e)return i(630116).Bv.createChildStore(m,{table:i(179034).ev,id:e})}),[m,t]),V=(0,n().K8)((()=>null==_?void 0:_.getFollowSettingsKey()),[_]),T=(0,n().K8)((()=>{if(!V)return[];if(!_)return[];return C().H8({followSettingsKey:V,environment:k,blockStore:_,from:"inbox"})}),[V,k,_]),B=(0,n().K8)((()=>U&&T.length>0),[U,T]),L=(0,o.useCallback)((e=>{t&&(f(),b().createAndCommit({userAction:"InboxActionsMenu.handleArchive",environment:k,canUndo:!0,perform:e=>{g().s4({notification:t,rootStore:m,transaction:e})}}))}),[k,t,f,m]),E=(0,o.useCallback)((e=>{t&&(h(),b().createAndCommit({userAction:"Activity.handleUnarchive",environment:k,canUndo:!0,perform:e=>{g().JV({notificationId:t.id,visited:!1,rootStore:m,transaction:e})}}))}),[k,t,h,m]),F=(0,o.useCallback)((e=>{t&&(t.read?v():M(),b().createAndCommit({userAction:"InboxActionsMenu.toggleNotificationReadStatus",environment:k,canUndo:!0,perform:e=>{g().ZB({notification:t,rootStore:m,transaction:e,read:!t.read})}}))}),[k,t,M,v,m]),D=(0,o.useCallback)((()=>{V&&_&&t&&i(848259).zP({environment:k,notificationId:t.id,pageId:_.pointer.id,isCurrentlyFollowing:(0,i(518773).A)(V).following,from:"inbox"})}),[k,_,V,t]),G=(0,s().IS)((e=>({container:{display:"flex",gap:1,height:"min-content",padding:2,borderWidth:R.isMobile?0:1,borderStyle:"solid",borderColor:e.stroke.primary,background:e.buttonGroupBackground,borderRadius:6,boxShadow:R.isMobile?void 0:"0px 2px 4px 0px rgba(22, 29, 27, 0.02)"},button:{height:R.isMobile?30:24,width:R.isMobile?30:24,borderRadius:4},icon:{fill:e.icon.secondary,padding:0,width:R.isMobile?u().lD.default:u().Ev.default,height:R.isMobile?u().lD.default:u().Ev.default}})),[R.isMobile]),W=(0,j().T4)();return t.visited?(0,A.jsx)("div",{style:G.container,children:(0,A.jsx)(S().A,{renderTooltip:()=>x.formatMessage(P.unarchive),render:e=>(0,A.jsx)(y().A,{ariaLabel:x.formatMessage(P.unarchive),style:G.button,icon:c().arrowUTurnUpLeftIcon,iconStyle:G.icon,onClick:E,...e})})}):(0,A.jsxs)("div",{style:G.container,children:[B?(0,A.jsx)(S().A,{renderTooltip:()=>(0,A.jsx)(p().sA,{...P.changePageNotificationSettings}),render:e=>(0,A.jsx)(N().Ay,{style:W.popup,popupType:R.isMobile?N().z7.SlideUp:N().z7.Popup,alignmentToOrigin:N().yP.Start,placementToOrigin:N().sx.Bottom,render:e=>(0,A.jsx)(I,{blockStore:_,notification:t,handlers:{handleUnarchive:E,handleArchive:L,toggleNotificationReadStatus:F},closePopup:()=>e.close()}),renderOrigin:t=>(0,A.jsx)(y().A,{ariaLabel:x.formatMessage(P.changePageNotificationSettings),style:G.button,icon:i(104077).r,iconStyle:G.icon,...e,...(0,i(553965).A)(t,{onClick:()=>D()})})})},"pageNotificationSettings"):void 0,(0,A.jsx)(S().A,{renderTooltip:()=>x.formatMessage(t.read?P.markUnread:P.markRead),render:e=>(0,A.jsx)(y().A,{ariaLabel:x.formatMessage(t.read?P.markUnread:P.markRead),style:G.button,icon:t.read?d().C:l().i,iconStyle:G.icon,onClick:F,...e})},"markUnread"),"activity"!==w?(0,A.jsx)(S().A,{renderTooltip:()=>x.formatMessage(P.archive),render:e=>(0,A.jsx)(y().A,{ariaLabel:x.formatMessage(P.archive),style:G.button,icon:r().B,iconStyle:G.icon,onClick:L,...e})},"archive"):void 0]})}function I(e){const{blockStore:t,notification:i,handlers:o,closePopup:u}=e,{handleArchive:g,handleUnarchive:b,toggleNotificationReadStatus:N}=o,y=(0,a().v3)(),S=(0,a().Y0)(),w=(0,p().tz)(),U=(0,n().K8)((()=>null==t?void 0:t.getFollowSettingsKey()),[t]),I=(0,n().K8)((()=>{if(!U)return[];if(!t)return[];return C().H8({followSettingsKey:U,environment:y,blockStore:t,from:"inbox"})}),[U,y,t]),_=(0,j().T4)(),V=(0,s().IS)((()=>({iconContainer:{display:"flex",justifyContent:"center",alignItems:"center",..._.icon},icon:{height:24,width:24}})),[_.icon]),T=(0,f().J)();return(0,A.jsx)(M().A,{menuType:x().gu.Popup,height:S.isMobile?"50vh":void 0,minWidth:250,maxWidth:S.isMobile?"100vw":void 0,scrollerStyle:_.menuScroller,header:!S.isMobile&&(0,A.jsx)(R().A,{style:_.header,isSmall:!S.isMobile,isSecondaryColor:!S.isMobile,children:(0,A.jsx)(p().sA,{id:"UpdateSidebarTabUpdatesHeader.pageNotificationSettings.label",defaultMessage:"Page notification settings"})}),children:(0,A.jsx)(v().Ay,{type:v().Oh.Vertical,sections:[...S.isMobile?[{key:"Actions title",render:()=>(0,A.jsx)(R().A,{style:_.header,isSmall:!S.isMobile,isSecondaryColor:!S.isMobile,children:(0,A.jsx)(p().sA,{id:"inbox.actionsSectionTitle.label",defaultMessage:"Actions"})}),items:[]},{key:"Actions",render:e=>(0,A.jsx)(k().A,{...e,topBorder:!1,style:_.sectionMenuItem}),items:["markAsReadOrUnread","archive"].map(((e,t)=>{const o=t===I.length-1,a=S.isMobile&&o;return{key:e,render:t=>"archive"===e?(0,A.jsx)(h().A,{...t,style:{..._.buttonMenuItem,...a&&_.transparentButtonMenuItemBorder},pressedStyle:_.buttonMenuItemPressed,icon:i.visited?(0,c().arrowUTurnUpLeftIcon)({..._.icon,padding:3}):(0,r().B)(_.icon),title:w.formatMessage(i.visited?P.unarchive:P.archive),titleStyle:_.title}):"markAsReadOrUnread"===e?(0,A.jsx)(h().A,{...t,style:{..._.buttonMenuItem,...a&&_.transparentButtonMenuItemBorder},pressedStyle:_.buttonMenuItemPressed,icon:i.read?(0,A.jsx)("div",{style:V.iconContainer,children:(0,d().C)(V.icon)}):(0,A.jsx)("div",{style:V.iconContainer,children:(0,l().i)(V.icon)}),title:w.formatMessage(i.read?P.markUnread:P.markRead),titleStyle:_.title}):void(0,m().HB)(e),action:t=>{let{event:o}=t;"markAsReadOrUnread"===e?N(o):"archive"===e?i.visited?b(o):g(o):(0,m().HB)(e),u()}}}))}]:[],...S.isMobile?[{key:"Page notification settings title",render:()=>(0,A.jsx)(R().A,{style:_.subheader,isSmall:!S.isMobile,isSecondaryColor:!S.isMobile,children:(0,A.jsx)(p().sA,{id:"inbox.notifyMeForSectionTitle.label",defaultMessage:"Notify me for"})}),items:[]}]:[],{key:"Page notification settings",render:e=>(0,A.jsx)(k().A,{...e,topBorder:!1,style:_.sectionMenuItem}),items:I.map(((e,t)=>{const i=t===I.length-1,o=S.isMobile&&i;return{key:e.action.analyticsName,render:t=>(0,A.jsx)(h().A,{...t,style:{..._.buttonMenuItem,...o&&_.transparentButtonMenuItemBorder},pressedStyle:_.buttonMenuItemPressed,title:e.title,titleStyle:_.title,isChecked:e.isSelectedOption}),action:()=>{e.action.action({environment:y,blocks:[],publicEditMode:void 0,analyticsFrom:"inbox_long_press_menu",lazyDependencies:T}),u()}}}))}],initialFocus:void 0,onAccept:()=>u()})})}const _=o.memo(U)}}]);