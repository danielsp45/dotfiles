"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[62516],{235022:(e,t,i)=>{i.d(t,{RK:()=>f,x:()=>g,zf:()=>s});i(898992),i(354520),i(581454);var o=()=>i(221844),r=()=>i(179034),a=()=>i(445120),n=()=>i(534177),d=()=>i(638681),l=()=>i(765957),c=()=>i(630116);const s=10;const u=new class{constructor(){this.localStorageStore=new(i(419494).Ay)({namespace:"recentsCache",important:!1,trackingType:"preference"})}waitUntilReady(){return this.localStorageStore.waitUntilReady()}get(e){const t=this.localStorageStore.get(e),i=d().object({required:{id:d().uuid(),version:d().number(),parentId:d().uuid(),parentTable:d().string()},optional:{}});return null==t?void 0:t.filter((e=>!i.validator(e)))}set(e,t){this.localStorageStore.set(e,t)}remove(e){this.localStorageStore.remove(e)}};function v(e){var t,i;const o=e.getVersion(),r=e.getType(),a=e.getParentId(),n=e.getParentTable(),d=e.getLastEditedByPointer(),l=e.getLastEditedTime();if(void 0!==o&&void 0!==r&&void 0!==a&&void 0!==n)return{id:e.id,version:o,title:e.getTitleValue(),icon:null===(t=e.getIcon())||void 0===t?void 0:t.icon,cover:null===(i=e.getCover())||void 0===i?void 0:i.cover,coverPosition:e.getFormatStore().getKeyValue("page_cover_position"),parentId:a,parentTable:n,lastEditedByPointer:d,lastEditedTime:l}}function p(e,t){var i,o;return{type:"page",id:e.id,last_edited_by_id:null===(i=e.lastEditedByPointer)||void 0===i?void 0:i.id,last_edited_by_table:null===(o=e.lastEditedByPointer)||void 0===o?void 0:o.table,last_edited_time:e.lastEditedTime,properties:{title:e.title},format:{page_icon:e.icon,page_cover:e.cover,page_cover_position:e.coverPosition},version:e.version,alive:!0,parent_id:e.parentId,parent_table:e.parentTable,space_id:t}}function g(e){var t;const i=null===(t=l().default.state.currentSpaceViewStore)||void 0===t?void 0:t.id;if(!i)return!1;const o=e.filter((e=>e.canRead())).slice(0,s).map(v).filter(n().O9);return u.set(i,o),!0}async function f(){await u.waitUntilReady();const{currentSpaceViewStore:e,currentUserStore:t}=l().default.state;if(!e)return;const i=null==t?void 0:t.id,n=e.id,d=e.getSpaceId(),s=u.get(n);if(!s)return;const v=new(a().b);for(const o of s){const e=p(o,d);void 0!==e&&v.setValueAndRole({pointer:{id:o.id,table:r().ev,spaceId:d},userId:i},e,"reader")}const g=new(o().A)({name:"recentPagesCache",isTemporaryData:!0,data:v});g.addCacheOverride(e.inMemoryRecordCache),g.freeze();const f=e.clone(g);return s.map((e=>c().Bv.createChildStore(f,{id:e.id,table:r().ev,spaceId:d})))}},437879:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});i(581454);var o=i(296540),r=()=>i(968172),a=()=>i(235022);function n(){const e=(0,i(56366).K8)((()=>{var e;const{currentSpaceStore:t}=i(765957).default.state;if(i(217429).default.checkGate({gateName:"home_recents_caching"})&&r().A.getIsInitialized()&&null!=t&&t.id)return null===(e=r().A.get(t.id))||void 0===e||null===(e=e.slice(0,a().zf))||void 0===e?void 0:e.map((e=>e.store))}),[]);return(0,o.useEffect)((()=>{e&&(0,a().x)(e)}),[e]),null}const d=o.memo(n)}}]);