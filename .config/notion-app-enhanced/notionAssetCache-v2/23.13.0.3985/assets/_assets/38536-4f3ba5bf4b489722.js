"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[38536],{112665:(e,t,a)=>{a.d(t,{J:()=>n});a(296540);var s=a(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"1.57 1.57 16.86 16.86",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M12.806 8.074a.625.625 0 1 0-1.072-.643l-2.512 4.185-1.407-1.642a.625.625 0 1 0-.95.814l1.973 2.3a.625.625 0 0 0 1.01-.085z"}),(0,s.jsx)("path",{d:"M10.405 1.724a.625.625 0 0 0-.81 0L7.36 3.628l-2.926.233a.625.625 0 0 0-.573.574L3.628 7.36 1.724 9.595a.624.624 0 0 0 0 .81l1.904 2.234.233 2.926a.625.625 0 0 0 .574.573l2.926.234 2.234 1.904a.624.624 0 0 0 .81 0l2.234-1.904 2.926-.234a.625.625 0 0 0 .573-.573l.234-2.926 1.904-2.234a.624.624 0 0 0 0-.81L16.372 7.36l-.234-2.926a.625.625 0 0 0-.573-.573l-2.926-.234zM8.017 4.711 10 3.02l1.983 1.69c.1.085.224.136.355.147l2.597.207.207 2.597c.01.13.062.255.147.355L16.98 10l-1.69 1.983a.63.63 0 0 0-.147.355l-.207 2.597-2.597.207a.63.63 0 0 0-.355.147L10 16.98l-1.983-1.69a.63.63 0 0 0-.355-.147l-2.597-.207-.207-2.597a.63.63 0 0 0-.147-.355L3.02 10l1.69-1.983a.63.63 0 0 0 .147-.355l.207-2.597 2.597-.207a.63.63 0 0 0 .355-.147"})]})},n=(0,a(340498).wt)("badgeCheck",i)},196131:(e,t,a)=>{a.d(t,{C7:()=>n,CH:()=>r,JD:()=>i});a(898992),a(672577);var s=()=>a(842599);function i(e,t){return!!e&&n(e.getEmail(),t)}function n(e,t){return void 0!==r(e,t)}function r(e,t){if(!e)return;const a=(0,s().zN)(e);return t.find((e=>e.url===a))}},364499:(e,t,a)=>{a.d(t,{o:()=>u});var s=()=>a(484714),i=()=>a(56366),n=()=>a(519831),r=()=>a(792415),o=()=>a(217429);const l=new(a(848776).U)((e=>{if("block-space"===e.type)return`${e.type}-${e.blockId}-${e.spaceId}`;(0,a(534177).HB)(e.type)}),(async(e,t)=>{const s=await Promise.resolve().then(a.bind(a,449506)),i=(0,a(386164).WS)({spaceId:t.spaceId,recordId:t.blockId,verifyShortSpaceIdVersion:!0}),n=await s.callApi({eventName:"getPublicPageData",environment:e,data:t,headers:i});return"success"===n.type?n.data:void 0}));function u(e){const{store:t}=e,a=(0,s().v3)();return(0,i().K8)((()=>{if(!o().default.checkGate({gateName:"ui_guest_disable_changes"}))return;if(t.table===n().Vl)return{type:"cannot_add"};const e=t.id,s=t.getSpaceId(),i=r().A.state.publicPageData;var u;if((null==i?void 0:i.pageId)===e)return(null==i||null===(u=i.securitySettings)||void 0===u?void 0:u.guestSetting)??{type:"can_add"};{var d;const t=l.getData(a,{type:"block-space",blockId:e,spaceId:s});return(null==t||null===(d=t.securitySettings)||void 0===d?void 0:d.guestSetting)??{type:"can_add"}}}),[t,a])}},366858:(e,t,a)=>{a.d(t,{A:()=>r});a(581454);var s=()=>a(484714),i=()=>a(56366),n=()=>a(592674);function r(e){const t=(0,s().v3)();return(0,i().K8)((()=>{var a;const s=null==e?void 0:e.id;if(s)return null===(a=n().A.getData(t,{spaceId:s}))||void 0===a?void 0:a.map((e=>e.domain))}),[t,e])}},383716:(e,t,a)=>{a.d(t,{n:()=>c});a(296540);var s=()=>a(484714),i=()=>a(380048),n=()=>a(959013),r=()=>a(284371),o=()=>a(84817),l=()=>a(285790),u=()=>a(8178),d=a(474848);function c(e){const t=(0,n().tz)(),{title:a,goBack:c}=e,g=(0,s().v3)(),{isMobile:p}=g.device;return(0,d.jsxs)(o().Y1,{direction:"horizontal",gap:6,children:[c&&(0,d.jsx)(l().A,{ariaLabel:t.formatMessage({id:"requestsPageHeader.back",defaultMessage:"Back"}),icon:i().I,onClick:c}),(0,d.jsx)(u().A,{large:!p,divider:"none",fontSize:16,fontWeight:r().Wy.medium,style:{marginBottom:0},children:a})]})}},479314:(e,t,a)=>{a.d(t,{K:()=>i});const s={currentPage:"home",setPage:()=>{},isSalesEligible:!1},i=(0,a(296540).createContext)(s);i.displayName="RequestsSettingsPageContext"},529601:(e,t,a)=>{a.d(t,{$S:()=>l,Im:()=>u,SJ:()=>p,sf:()=>m,yQ:()=>g});a(898992),a(354520),a(581454),a(737550);var s=()=>a(496603),i=()=>a(534177),n=()=>a(842599),r=()=>a(176581),o=()=>a(196131);function l(e){let{space:t,domains:a,team:n,spaceUser:r,invitees:o,internalGuestFeatureAvailability:l,guestFeatureAvailability:d,publicPageDataGuestSetting:g}=e;const p=u({domains:a,internalGuestFeatureAvailability:l,guestFeatureAvailability:d,invitees:o,space:t,spaceUser:r,team:n,publicPageDataGuestSetting:g}),m=c({domains:a,internalGuestFeatureAvailability:l,guestFeatureAvailability:d,invitees:o,space:t,spaceUser:r,team:n,publicPageDataGuestSetting:g}),f=o.some((e=>{const t=m[e.email],a=p[e.email];return"can_autojoin"!==t.type&&h(a)}));return(0,s().Cr)(o.map((e=>{const{email:t,currentRole:a}=e,s=m[t],n=p[t];if("member"===a)return[t,{type:"member_page_add"}];if("guest"===a&&"can_add"===n.type)return[t,{type:"guest_page_add"}];if("can_autojoin"===s.type)return[t,{type:"member",reason:"autojoin_domain"}];if("cannot_add"===(r=p[t]).type&&"over_general_guest_limit"===r.reason)return[t,{type:"none",reason:"must_upgrade"}];if("can_add"===s.type&&f)return[t,{type:"member",reason:"over_internal_guest_limit"}];if("can_add"===n.type)return[t,{type:"guest"}];if("can_request"===n.type)return[t,{type:"guest_request"}];if("can_add"===s.type)return[t,{type:"member",reason:"guests_disabled"}];if("can_request"===s.type)return[t,{type:"member_request"}];if("cannot_add"===s.type&&"not_authorized_domain"===s.reason)return[t,{type:"none",reason:"not_authorized_domain"}];if("cannot_add"===n.type){return[t,{type:"none",reason:n.reason}]}if("cannot_add"===s.type){return[t,{type:"none",reason:s.reason}]}return(0,i().HB)(s)&&(0,i().HB)(n);var r})))}function u(e){let{space:t,domains:a,team:i,internalGuestFeatureAvailability:n,guestFeatureAvailability:r,optimism:l="pessimistic",spaceUser:u,invitees:c,publicPageDataGuestSetting:p}=e;const h=g({space:t,team:i,spaceUser:u,publicPageDataGuestSetting:p}),f=d(l,r,m(c)),v=function(e,t){return e.filter((e=>(0,o().C7)(e.email,t)&&!e.currentRole)).length}(c,a),b=d(l,n,v);return(0,s().Cr)(c.map((e=>{const t=(0,o().C7)(e.email,a),s=void 0!==e.currentRole;let i;return i=s||f?!t||s||b?"cannot_add"===h.type?{type:"cannot_add",reason:"disabled_by_admins"}:h:{type:"cannot_add",reason:"over_internal_guest_limit"}:{type:"cannot_add",reason:"over_general_guest_limit"},[e.email,i]})))}function d(e,t,a){const s=t.limit,i="unlimited"===s.total?"unlimited":s.total-s.current;return"optimistic"===e?"unlimited"===i||i>=1:"unlimited"===i||i>=a}function c(e){let{space:t,team:a,domains:r,spaceUser:o,invitees:l,internalGuestFeatureAvailability:d,guestFeatureAvailability:c,publicPageDataGuestSetting:g}=e;const m=p({space:t,domains:r,spaceUser:o}),f=u({space:t,domains:r,internalGuestFeatureAvailability:d,guestFeatureAvailability:c,team:a,spaceUser:o,invitees:l,publicPageDataGuestSetting:g}),v=!o.isMember();return(0,s().Cr)(l.map((e=>{const t=(0,n().zN)(e.email);if(!t)return[e.email,{type:"cannot_add",reason:"invalid_email"}];const a=h(f[e.email]),s=m.autojoinDomains;let r;return s.includes(t)?r={type:"can_autojoin"}:"can_add"===m.type?r={type:"can_add"}:"can_request"===m.type||a&&!v?r={type:"can_request"}:s.length>0?r={type:"cannot_add",reason:"not_authorized_domain"}:"cannot_add"===m.type?r={type:"cannot_add",reason:"disabled_by_admins"}:(0,i().HB)(m),[e.email,r]})))}function g(e){let{space:t,team:a,spaceUser:s,publicPageDataGuestSetting:n}=e;const o=s.isWorkspaceOwner(),l=(0,i().O9)(n)?n:(0,r().v)({space:t,team:a});return o&&"can_request"===l.type?{type:"can_add"}:l}function p(e){let{space:t,domains:a,spaceUser:s}=e;const i=!s.isMember(),n=function(e){let{space:t,domains:a}=e;const s=a.filter((e=>e.isAutojoinable)).map((e=>e.url));return t.getSettings().disable_membership_requests?{type:"cannot_add",autojoinDomains:s}:{type:"can_request",autojoinDomains:s}}({space:t,domains:a});return i?{type:"cannot_add",autojoinDomains:[]}:s.isWorkspaceOwner()?{...n,type:"can_add"}:n}function m(e){return e.filter((e=>!e.currentRole)).length}function h(e){return"cannot_add"===e.type&&"over_internal_guest_limit"===e.reason}},616092:(e,t,a)=>{a.d(t,{Hq:()=>c,mF:()=>d});var s=()=>a(484714),i=()=>a(56366),n=()=>a(529601),r=()=>a(366858),o=()=>a(364499),l=()=>a(151059),u=()=>a(329304);function d(e){let{space:t,team:a,spaceUser:s,invitees:l,store:d}=e;const c=(0,i().K8)((()=>null==s?void 0:s.getUserId()),[s]),h=(0,u()._X)({name:"internal_guests",spaceId:null==t?void 0:t.id,userId:c,amount:0}),f=(0,u()._X)({name:"guests",spaceId:null==t?void 0:t.id,userId:c,amount:0}),v=(0,o().o)({store:d}),b=g(t),y=p(s),_=m(y,a),x=(0,r().A)(t);return(0,i().K8)((()=>{if(b&&y&&f&&h&&x)return(0,n().$S)({space:b,domains:x,team:_,spaceUser:y,invitees:l,internalGuestFeatureAvailability:h,guestFeatureAvailability:f,publicPageDataGuestSetting:v})}),[b,_,h,f,y,l,x,v])}function c(e){let{space:t,team:a,spaceUser:s,invitees:o,optimism:l="pessimistic",publicPageDataGuestSetting:d}=e;const c=(0,i().K8)((()=>null==s?void 0:s.getUserId()),[s]),h=(0,u()._X)({name:"internal_guests",spaceId:null==t?void 0:t.id,userId:c,amount:0}),f=(0,u()._X)({name:"guests",spaceId:null==t?void 0:t.id,userId:c,amount:0}),v=g(t),b=p(s),y=m(b,a),_=(0,r().A)(t);return(0,i().K8)((()=>{if(v&&b&&f&&h&&_)return(0,n().Im)({space:v,domains:_,team:y,spaceUser:b,invitees:o,optimism:l,guestFeatureAvailability:f,internalGuestFeatureAvailability:h,publicPageDataGuestSetting:d})}),[v,b,_,y,o,f,h,l,d])}function g(e){const t=(0,s().v3)(),a=(0,i().K8)((()=>null==e?void 0:e.getModel()),[e]),n=(0,i().K8)((()=>{if(null==e||!e.id)return;const a=l().A.getData(t,{spaceId:e.id});return a?{id:a.id,disable_guests:a.disableGuests,getSettings:()=>({disable_membership_requests:!1,enable_guest_invite_requests:a.enableGuestInviteRequest})}:void 0}),[e,t]);return a??n}function p(e){return(0,i().K8)((()=>null==e?void 0:e.getModel()),[e])??{isMember:()=>!1,isWorkspaceOwner:()=>!1}}function m(e,t){const a=(0,i().K8)((()=>null==t?void 0:t.getModel()),[t]);return(0,i().K8)((()=>null==e?void 0:e.isMember()),[e])?a:{getDisableGuests:()=>!1}}},692026:(e,t,a)=>{a.d(t,{C:()=>i});var s=()=>a(534177);function i(e){return e.isGuestInviteRequest()?"guest_invite_request":e.isPageAccessRequest()?"page_access_request":e.isSpaceMembershipRequest()?"space_membership_request":e.isTeamMembershipRequest()?"team_membership_request":void(0,s().HB)(e)}},773442:(e,t,a)=>{a.d(t,{I:()=>c,T:()=>g});a(18107),a(967357),a(581454);var s=()=>a(484714),i=()=>a(56366),n=()=>a(692026),r=()=>a(798880),o=()=>a(496603),l=()=>a(630116),u=()=>a(616092),d=()=>a(646736);function c(e){var t;let{spaceStore:a,request:n}=e;const u=(0,s().v3)(),d=(0,i().K8)((()=>{if(n)return new(l().LU)(u,{id:n.getForActorId(),table:r().oo}).getModel()}),[n,u]),c=n&&d?{accessRequest:n,forActor:d}:void 0;return null===(t=g({spaceStore:a,requests:(0,o().oE)([c])}))||void 0===t?void 0:t.at(0)}function g(e){let{spaceStore:t,requests:a}=e;const r=function(e){let{spaceStore:t,requests:a}=e;const n=(0,s().v3)(),r=(0,i().K8)((()=>null==a?void 0:a.map((e=>{const a=(0,d().dp)(t,e.forActor.id);return{email:e.forActor.email,currentRole:a.isPageGuest()?"guest":a.isMember()?"member":void 0}}))),[a,t]),o=n.currentUser.id,l=o?(0,d().dp)(t,o):void 0;return(0,u().Hq)({space:t,spaceUser:l,team:void 0,optimism:"optimistic",invitees:r??[],publicPageDataGuestSetting:void 0})}({spaceStore:t,requests:a});return(0,i().K8)((()=>null==a?void 0:a.map((e=>{var t;const a=(0,n().C)(e.accessRequest),s=null==r||null===(t=r[e.forActor.email])||void 0===t?void 0:t.type;return"guest_invite_request"!==a?a:"cannot_add"===s?"space_membership_request":"guest_invite_request"}))),[a,r])}},938621:(e,t,a)=>{a.d(t,{Z:()=>te,Y:()=>ge});a(581454);var s=a(296540),i=()=>a(484714),n=()=>a(56366),r=()=>a(401497),o=a(474848);const l=(0,a(340498).wt)("speechBubble",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M4.32 15.424c.39 0 .677-.192 1.149-.609l2.344-2.064h4.116c2.057 0 3.213-1.19 3.213-3.22V4.22c0-2.03-1.156-3.22-3.213-3.22H3.213C1.163 1 0 2.19 0 4.22V9.53c0 2.037 1.196 3.22 3.165 3.22h.28v1.675c0 .608.322.998.875.998zm.342-1.531v-1.949c0-.403-.178-.56-.56-.56H3.26c-1.285 0-1.9-.65-1.9-1.894V4.26c0-1.243.615-1.893 1.9-1.893h8.627c1.278 0 1.893.65 1.893 1.894v5.23c0 1.243-.615 1.893-1.893 1.893h-4.15c-.417 0-.622.068-.909.369l-2.167 2.14z"})});var u=()=>a(909306),d=()=>a(762433),c=()=>a(959013),g=()=>a(534177),p=()=>a(209660),m=()=>a(84817),h=()=>a(641300),f=()=>a(554509),v=()=>a(204063),b=()=>a(702723),y=()=>a(606273),_=()=>a(384100),x=()=>a(963589),q=()=>a(217429),M=()=>a(645109),S=()=>a(324561),w=()=>a(807778),P=()=>a(479314),j=()=>a(568688);var I=()=>a(920769),R=()=>a(827774),A=()=>a(911964),U=()=>a(599500),C=()=>a(798880),D=()=>a(979340),k=()=>a(509628),B=()=>a(493823),N=()=>a(903706),T=()=>a(7674),F=()=>a(107683),W=()=>a(453697),z=()=>a(475971),G=()=>a(2609),K=()=>a(58293),L=()=>a(870092),H=()=>a(128265),Y=()=>a(714300);function O(e){let{feature:t,request:a,userId:s,onDismiss:l}=e;const u=(0,c().tz)(),p=(0,K().r)(),m=(0,i().v3)(),h=(0,Y().l)({spaceId:null==p?void 0:p.id}),b=(0,r().IS)((e=>({fullWidth:{width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},cancelButton:{...z().W,height:32,color:e.text.secondary},input:{color:e.text.primary}})),[]),{userStore:y,userDisplayName:_}=(0,n().K8)((()=>{if(!p||!s)return{userStore:void 0,userDisplayName:void 0};const e=L().L.createChildStore(p,{table:C().oo,id:s});return{userStore:e,userDisplayName:e.getDisplayName(u)}}),[p,s,u]),{entrypoint:x}=a,q=(0,n().K8)((()=>{switch(x){case"ai_connectors_request_modal":return u.formatMessage(E.subtitleAiConnectorsModal);case"ai_for_work_announcement_modal":return u.formatMessage(E.subtitleAiForWorkModal);case"plans":case"settings":case"charts":case"ai_chat":case"teamspace_menu":case"ai_corner_chat":case"version_history":case"ai_limit_nudge_sidebar":case"search_modal":case"ai_home_page":case"ai_meeting_notes":case"upgrade_system":return u.formatMessage(E.subtitlePlans);default:(0,g().HB)(x)}}),[u,x]),M=(0,n().K8)((()=>d().N8(null==h?void 0:h.subscription)),[h]),S=(0,H().n)(),w=ge(a.request,M,S);return w?(0,o.jsx)(F().s,{ariaLabel:u.formatMessage(E.ariaLabel),isOpen:!0,onDismiss:l,showCloseIcon:!0,areaConstraint:{width:{type:"fixed",length:400},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,o.jsx)(T().tf,{showDismissButton:!1,header:(0,o.jsx)(G().rQ,{icon:(0,o.jsx)(W().A,{userStore:y,size:40}),title:u.formatMessage(E.title,{feature:D().v0[t].defaultMessage,user:_}),byline:q}),footer:(0,o.jsx)(k().Y,{gap:16,children:(0,o.jsxs)(k().Y,{gap:8,children:[(0,o.jsx)(v().A,{"aria-label":u.formatMessage(w),onClick:async()=>{await(0,A().showUpgradeModal)({environment:m,spaceStore:p,billingData:h,product:a.request,from:"upgrade_requests_page"}),l()},style:{height:32},children:u.formatMessage(w)}),(0,o.jsx)("div",{style:{textAlign:"center"},children:(0,o.jsx)(f().D,{styleName:"Caption-12px/Regular",colorName:"secondary",children:u.formatMessage(E.billingNotice)})}),(0,o.jsx)(B().p,{size:"lg",onClick:l,style:{...b.fullWidth,...b.cancelButton},"aria-label":u.formatMessage(E.cancelButton),children:u.formatMessage(E.cancelButton)})]})}),children:(0,o.jsxs)(k().Y,{gap:8,children:[(0,o.jsx)(f().D,{styleName:"Caption-12px/Medium",colorName:"secondary",children:u.formatMessage(E.noteLabel)}),(0,o.jsxs)(k().Y,{style:{position:"relative"},gap:8,children:[(0,o.jsx)(N().A,{disabled:!0,format:N().C.Large,value:a.reason_for_request,inputStyle:{...b.input,paddingBottom:24},textarea:!0,autosize:!0}),(0,o.jsx)(f().D,{styleName:"Caption-12px/Regular",colorName:"secondary",style:{position:"absolute",bottom:8,left:8},children:u.formatDate(a.created_time,{year:"numeric",month:"long",day:"numeric"})})]})]})})}):null}const E=(0,c().YK)({cancelButton:{id:"viewUpgradeRequestModal.cancelButton",defaultMessage:"Cancel"},billingNotice:{id:"viewUpgradeRequestModal.billingNotice",defaultMessage:"You’ll be able to confirm the updated bill on the next step"},subtitlePlans:{id:"viewUpgradeRequestModal.subtitlePlans",defaultMessage:"This request was made from the Plans page"},subtitleAiConnectorsModal:{id:"viewUpgradeRequestModal.subtitleAiConnectorsModal",defaultMessage:"This request was made from AI Connector onboarding."},subtitleAiForWorkModal:{id:"viewUpgradeRequestModal.subtitleAiForWorkModal",defaultMessage:"This request was made from the AI for Work announcement."},title:{id:"viewUpgradeRequestModal.title",defaultMessage:"{user} would like access to Notion {feature}"},ariaLabel:{id:"viewUpgradeRequestModal.modal.ariaLabel",defaultMessage:"View plan request modal"},noteLabel:{id:"viewUpgradeRequestModal.noteLabel",defaultMessage:"Note"}});var V=()=>a(864943);function $(e){let{title:t,loadedIconFunction:a,buttonAction:s,buttonText:i,buttonAriaLabel:l}=e;const u=(0,r().IS)((e=>({icon:{height:48,width:48,fill:e.icon.tertiary}})),[]),d=(0,n().K8)((()=>a(u.icon)),[u.icon,a]);return(0,o.jsxs)(m().Y1,{gap:16,align:"center",direction:"vertical",padding:"32px 0 88px 0",height:"fill",children:[(0,o.jsx)("div",{children:d}),(0,o.jsx)(f().D,{customStyles:{textAlign:"center"},styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t}),(0,o.jsx)(V().A,{size:"lg",onClick:s,ariaLabel:l,children:(0,o.jsx)(f().D,{customStyles:{textAlign:"center"},styleName:"UIRegular-14px/Medium",children:i})})]})}var X=()=>a(383716),J=()=>a(209969),Q=()=>a(179030);function Z(){const e=(0,c().tz)();return(0,o.jsx)(Q().l,{label:e.formatMessage(ee.aiNowApartOfBusiness),display:"inline",description:e.formatMessage(ee.aiRequestsMigratedToBusiness),tint:"blue",staticIcon:J().checkmarkCircleFillIcon,actions:[{label:e.formatMessage(ee.learnMore),onClick:()=>{window.open("https://www.notion.com/blog/notion-ai-for-work","_blank")}}]})}const ee=(0,c().YK)({aiNowApartOfBusiness:{id:"RequestsSettingsPage.UpgradesPage.banner.aiNowApartOfBusiness",defaultMessage:"Notion AI is now a part of the Business plan"},aiRequestsMigratedToBusiness:{id:"RequestsSettingsPage.UpgradesPage.banner.aiRequestsMigratedToBusiness",defaultMessage:"We’re moving pending Notion AI requests into Business plan requests as our plans are being updated"},learnMore:{id:"RequestsSettingsPage.UpgradesPage.banner.learnMore",defaultMessage:"Learn more"}});function te(e){let{spaceStore:t}=e;const a=(0,c().tz)(),{setPage:i,isSalesEligible:r}=(0,s.useContext)(P().K),{requests:d,isLoading:h}=(0,j().I)({spaceId:t.id}),f=(0,n().K8)((()=>(0,w().Y3)()),[]),v=(0,n().K8)((()=>(0,w().Le)()),[]),b=(0,S()._3)({spaceId:t.id}),y=(0,n().K8)((()=>(0,u().ze)({billingData:b,experimentService:q().default,spaceId:t.id})),[b,t]),_=v&&f&&!y;if(h)return null;const x=Object.keys(d).length,M=1===x,I=0===x;return(0,o.jsxs)(m().Y1,{height:"fill",direction:"vertical",gap:32,padding:"36px 60px",style:{overflowY:"auto"},children:[(0,o.jsx)(X().n,{title:a.formatMessage(pe.title),goBack:()=>i("home")}),_?(0,o.jsx)(Z,{}):void 0,I?(0,o.jsx)($,{title:a.formatMessage(pe.noRequestsTitle),buttonAriaLabel:"explore plans",buttonText:a.formatMessage(pe.noRequestsButtonTitle),buttonAction:()=>{p().Ow({currentTab:"plans"})},loadedIconFunction:l}):(0,g().WP)(d).map((e=>{let[a,s]=e;return s?(0,o.jsx)(ae,{expandByDefault:!0,hasOneRequestType:M,requestType:a,requests:s,spaceStore:t,isSalesEligible:r},a):null}))]})}function ae(e){let{expandByDefault:t=!1,requestType:a,requests:n,spaceStore:r,isSalesEligible:l,hasOneRequestType:u}=e;const g=(0,i().v3)(),p=(0,S()._3)({spaceId:r.id}),[h,f]=s.useState(t),y=(0,c().tz)(),_=d().N8(null==p?void 0:p.subscription),q=ge(a,_,l),w=async()=>{await(0,A().showUpgradeModal)({environment:g,spaceStore:r,billingData:p,product:a,from:"upgrade_requests_page"})},P=(0,x().X)("business_trials_2025"),j=(0,I().O)(),C="business"===a,D=C&&P&&j,k=P&&d().TB(p)&&"business"===d().AI(p),{showTrialInfoModal:B}=(0,R().C)();return(0,o.jsxs)("div",{children:[(0,o.jsx)(b().A,{title:(0,o.jsx)(se,{requestType:a,requestCount:n.length,isExpanded:h,handleClick:()=>{f(!h)},shouldHideToggle:u}),type:"custom",isMobile:!1,disableSettingsItemClick:!0,badge:C&&k?(0,o.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,o.jsx)(U().g,{showIcon:!1,onClick:()=>B({openedFrom:"upgrade_requests_page"})})}):void 0,customButton:q&&(0,o.jsxs)(m().Y1,{direction:"horizontal",gap:8,align:"center-right",children:[D?(0,o.jsx)(M().c,{openedFrom:"upgrade_requests_page",onClick:w,styleOverrides:{flex:"none",height:28,padding:"4px 8px"}}):void 0,(0,o.jsx)(v().A,{onClick:w,children:y.formatMessage(q)})]})}),h&&(0,o.jsx)(ce,{spaceStore:r,requests:n})]})}function se(e){let{handleClick:t,isExpanded:a,requestType:s,requestCount:i,shouldHideToggle:n}=e;const l=(0,c().tz)(),u=function(e){switch(e){case"ai":return pe.ai;case"business":return pe.business;case"enterprise":return pe.enterprise;default:return null}}(s),d=(0,r().IS)((e=>({toggleButton:{color:e.icon.primary}})),[]);return(0,o.jsxs)(m().Y1,{direction:"horizontal",gap:6,align:"center-left",width:"hug",padding:"0px 6px 0px 0px",children:[!n&&(0,o.jsx)(y().f,{isSidebar:!1,fill:!0,onClick:()=>{t()},open:a,color:d.toggleButton.color}),u&&(0,o.jsx)(f().D,{styleName:"UIRegular-14px/Medium",colorName:"primary",children:l.formatMessage(u)}),(0,o.jsx)(f().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:i})]})}const ie={id:"note",headerTitle:(0,o.jsx)(c().sA,{id:"RequestsSettingsPage.UpgradesPage.noteColumn",defaultMessage:"Note"}),renderCell:e=>{let{value:t}=e;return(0,o.jsx)(ne,{value:t})},sortable:!1,widthData:{minWidth:150,maxWidth:310,widthPercent:37}};function ne(e){const t=e.value.reason_for_request??"—",a=(0,r().IS)((e=>({container:{width:"100%"},textWithEllipsis:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})),[]);return(0,o.jsx)("div",{style:a.container,children:(0,o.jsx)(f().D,{style:a.textWithEllipsis,styleName:"UIRegular-14px/Regular",children:t})})}function re(e){let{value:t,isRowHovered:i}=e;const n=(0,c().tz)(),[l,u]=s.useState(!1),[d,g]=s.useState(null),p=(0,r().IS)((e=>({icon:{height:14,width:14,color:e.icon.secondary}})),[]),h=n.formatMessage({id:"RequestsSettingsPage.UpgradesPage.viewDetail",defaultMessage:"View Detail"});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(m().Y1,{direction:"horizontal",width:"fill",gap:"auto",align:"center",children:i&&(0,o.jsx)(a(859428).A,{placement:a(962730).W.Top,renderTooltip:()=>h,render:e=>(0,o.jsx)(a(285790).A,{ariaLabel:h,hasBackground:!0,icon:a(576250).y,showShadow:!0,iconStyle:p.icon,onClick:e=>{g(t),u(!0),e.stopPropagation()},...e})})}),l&&d&&(0,o.jsx)(O,{feature:d.request,request:d,userId:d.created_by_id,onDismiss:()=>u(!1)})]})}const oe={id:"date",headerTitle:(0,o.jsx)(c().sA,{id:"RequestsSettingsPage.UpgradesPage.dateColumn",defaultMessage:"Date"}),renderCell:e=>{let{value:t}=e;return(0,o.jsx)(a(625383).d,{dateTs:t.created_time})},sortable:!1,widthData:{minWidth:150,maxWidth:240,widthPercent:24}},le={id:"dateWithViewDetail",headerTitle:"",renderCell:e=>{let{value:t,isRowHovered:a}=e;return(0,o.jsx)(re,{value:t,isRowHovered:a})},sortable:!1,widthData:{minWidth:100,maxWidth:100,widthPercent:6}},ue=[{id:"requestedBy",headerTitle:(0,o.jsx)(c().sA,{id:"RequestsSettingsPage.UpgradesPage.requestedByColumn",defaultMessage:"Requested By"}),renderCell:e=>{let{userStore:t}=e;return(0,o.jsx)(a(317131).l,{customAvatarStyles:{marginRight:8},userStores:[t]})},sortable:!1,widthData:{minWidth:150,maxWidth:240,widthPercent:30}},ie,oe,le],de=8;function ce(e){let{requests:t,spaceStore:a}=e;const[i,n]=s.useState(!1),[l,u]=s.useState(null),{header:d}=(0,r().IS)((e=>({header:{boxShadow:`inset 0 -1px 0 ${e.tableDividerColor}`}})),[]),c=ue.map((e=>({...e,headerStyle:d}))),g=(0,r().IS)((e=>{const t=(0,h().rC)({columnRenderInfo:c,theme:e,containerMarginTop:8});return{...t,container:{...t.container,width:"100%"}}}),[c]),p=t.map((e=>({value:e,userStore:(0,_().z5)({userId:e.created_by_id,currentSpaceStore:a}),id:e.id,isClickable:!0}))),{pageRows:m,loadMoreMethod:f}=function(e){let{rows:t,limit:a}=e;const[i,n]=(0,s.useState)(a),[r,o]=(0,s.useState)(0),l=t.length,u=l>a;return{pageRows:(0,s.useMemo)((()=>u?t.slice(r,i):t),[t,r,i,u]),loadMoreMethod:(0,s.useMemo)((()=>{if(u)return{type:"pages",onLoadNext:()=>{if(i>=l)return;const e=Math.min(i+a,l);n(e),o(r+a)},onLoadPrevious:()=>{0!==r&&(n(r),o(r-a))},hasNextPage:i<l,hasPrevPage:r>0,currentPage:Math.floor(r/a)+1,finalPage:Math.floor(l/a)+1}}),[l,r,i,a,u])}}({rows:p,limit:de});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h().WE,{columnRenderInfo:c,rows:m,hideHeaderRowPadding:!0,renderNoRowsComponent:()=>null,styles:g,loadMoreMethod:f,onRowClick:e=>{u(e.value),n(!0)},showRowBorders:!0}),i&&l&&(0,o.jsx)(O,{feature:l.request,request:l,userId:l.created_by_id,onDismiss:()=>n(!1)})]})}function ge(e,t,a){if(t||a&&"enterprise"===e)return pe.contactSales;switch(e){case"ai":return pe.aiUpgrade;case"business":case"enterprise":return pe.planUpgrade;default:return null}}const pe=(0,c().YK)({title:{id:"RequestsSettingPage.UpgradePage.title",defaultMessage:"Upgrades"},aiUpgrade:{id:"RequestsSettingsPage.UpgradesPage.aiUpgrade",defaultMessage:"Upgrade AI"},planUpgrade:{id:"RequestsSettingsPage.UpgradesPage.planUpgrade",defaultMessage:"Upgrade Plan"},contactSales:{id:"RequestsSettingsPage.UpgradesPage.contactSales",defaultMessage:"Contact Sales"},ai:{id:"RequestsSettingsPage.UpgradesPage.notionAI",defaultMessage:"Notion AI"},business:{id:"RequestsSettingsPage.UpgradesPage.business",defaultMessage:"Business"},enterprise:{id:"RequestsSettingsPage.UpgradesPage.enterprise",defaultMessage:"Enterprise"},noRequestsTitle:{id:"RequestsSettingsPage.UpgradesPage.NoPendingRequestsTitle",defaultMessage:"No upgrade requests in your workspace"},noRequestsButtonTitle:{id:"RequestsSettingsPage.UpgradesPage.NoPendingRequestsButtonTitle",defaultMessage:"Explore plans"}})}}]);