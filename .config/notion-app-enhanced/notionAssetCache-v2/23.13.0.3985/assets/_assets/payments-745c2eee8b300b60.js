"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[59970,98775],{346:(e,t,o)=>{o.d(t,{MG:()=>m,T1:()=>g,a1:()=>S,dt:()=>f,kg:()=>h,lC:()=>y,n_:()=>v});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(187174),s=()=>o(645873),l=()=>o(941463),d=()=>o(441199),c=()=>o(749687),u=()=>o(737230),p=()=>o(756114);const g=new(s().O2)("PerformanceToolbar",(()=>Promise.all([o.e(16471),o.e(92845),o.e(84468),o.e(48632),o.e(75078),o.e(95168),o.e(36908),o.e(21194),o.e(23930),o.e(61347),o.e(45624)]).then(o.bind(o,462407)))),m=(0,s()._h)(g,(e=>e.PerformanceToolbar)),f=(0,s()._h)(g,(e=>e.PerformanceToolbarSettings));function h(){const e=(0,r().v3)();return(0,i().K8)((()=>(0,p().D)(e,e.RouterStore.state)),[e])}function v(){const e=(0,r().v3)(),t=b("PerformanceToolbarStore"),o=b("isPerformanceToolbarVisible");return(0,i().K8)((()=>!(!t||!o)&&o(e,e.RouterStore.state,t.state)),[o,e,t])}function y(){const e=b("PerformanceToolbarStore");return(0,i().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function S(){const e=(0,r().v3)(),t=b("createPerformanceToolbarMouseListeners"),o=b("PerformanceToolbarStore"),{sidebarExpanded:a,sidebarWidth:s,secondarySidebarExpanded:p,secondarySidebarWidth:g,updateSidebarExpanded:m,updateSidebarWidth:f}=(0,i().K8)((()=>({sidebarExpanded:c().sidebarExpandedStore.state,sidebarWidth:c().sidebarWidthStore.state,secondarySidebarExpanded:d().default.isOpen(),secondarySidebarWidth:l().Ay.getWidth(),updateSidebarExpanded:u().Ay.state.expanded,updateSidebarWidth:u().Ay.state.width})),[]);return(0,n.useEffect)((()=>{if(o&&t)return t(e,(e=>o.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),a,s,p,g,m,f)}),[t,e,o,a,s,p,g,m,f])}function b(e){const t=h(),[{value:o}]=(0,a().Yb)((()=>t?g.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return o}},6208:(e,t,o)=>{o.d(t,{L:()=>d,y:()=>l});var n=()=>o(56366),r=()=>o(798880),i=()=>o(959013),a=()=>o(765957),s=()=>o(630116);function l(e){const t=(0,i().tz)();return(0,n().K8)((()=>{const{currentSpaceStore:o}=a().default.state;if(!o||!e)return;return s().LU.createChildStore(o,{table:r().oo,id:e}).getDisplayName(t)}),[t,e])}function d(){const e=(0,i().tz)();return(0,n().K8)((()=>{const{currentUserStore:t}=a().default.state,o=null!=t&&t.isDefined()?t.getModel():void 0;return o?o.getDisplayName(e):void 0}),[e])}},59400:(e,t,o)=>{o.d(t,{nR:()=>c,m$:()=>s,m4:()=>l,Dy:()=>d,FZ:()=>p});o(296540);var n=()=>o(645873),r=o(474848);function i(e){const{shouldShowSpinner:t,collectionSettingsProps:n}=e;return(0,r.jsx)(o(735695).Ay,{collectionSettingsStore:n.collectionSettingsStore,fullHeight:n.fullHeight,hideDesktopHeader:n.hideDesktopHeader,children:t&&(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",overflow:"hidden",paddingBottom:20},children:(0,r.jsx)(o(331542).A,{})})})}const a=new(n().O2)("collectionSettings",(()=>Promise.all([o.e(75134),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(75078),o.e(25497),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(30291),o.e(19930),o.e(58102),o.e(26483),o.e(6463),o.e(40925),o.e(282),o.e(61349),o.e(62573),o.e(1440),o.e(63996),o.e(66559),o.e(35986),o.e(92924),o.e(64819),o.e(97339),o.e(55717),o.e(63797),o.e(21367),o.e(22686),o.e(99108)]).then(o.bind(o,409198)))),s=(0,n()._h)(a,(e=>e.CollectionSettings),{renderLoading:(e,t)=>(0,r.jsx)(i,{shouldShowSpinner:e,collectionSettingsProps:t})}),l=(0,n()._h)(a,(e=>e.CollectionSettingsButtonOptions)),d=(0,n()._h)(a,(e=>e.CollectionSettingsPropertyTypeMenuItem)),c=(0,n()._h)(a,(e=>e.CollectionEditButtonAutomationOption)),u=new(n().O2)("TableHeaderPropertyCreationMenu",(()=>Promise.all([o.e(75134),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(75078),o.e(25497),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(61349),o.e(35986),o.e(43935)]).then(o.bind(o,908800)))),p=(0,n()._h)(u,(e=>e.TableHeaderPropertyCreationMenu))},63467:(e,t,o)=>{o.d(t,{y:()=>c});var n=()=>o(637997),r=()=>o(267419);const i={ko:()=>o.e(2268).then(o.bind(o,224434)),es:()=>o.e(95264).then(o.bind(o,196425)),de:()=>o.e(35390).then(o.bind(o,653703)),fr:()=>o.e(3272).then(o.bind(o,94677)),pt:()=>o.e(27315).then(o.bind(o,766869)),zh:()=>o.e(69945).then(o.bind(o,516814)),ja:()=>o.e(77757).then(o.bind(o,824432)),da:()=>o.e(9423).then(o.bind(o,440761)),fi:()=>o.e(59337).then(o.bind(o,462135)),nb:()=>o.e(2040).then(o.bind(o,937314)),nl:()=>o.e(51106).then(o.bind(o,530897)),sv:()=>o.e(53631).then(o.bind(o,895222)),id:()=>o.e(69945).then(o.bind(o,516814)),th:()=>o.e(69945).then(o.bind(o,516814)),vi:()=>o.e(69945).then(o.bind(o,516814))};let a=!1,s=!1;async function l(e){for(const[o,r]of Object.entries(e.emojiLocaleKeywords)){var t;n().fB[o]={...n().fB[o],keywords:[...r,...(null===(t=n().fB[o])||void 0===t?void 0:t.keywords)||[]]}}await r().A.waitUntilLoaded(),r().A.update((t=>{let{emojiByName:o,...n}=t;return{...n,emojiByName:{...o,...e.emojiByName}}}))}async function d(){if(a)return;const[e]=o(662303).locale.split("-");e in i&&(await l(await i[e]()),a=!0)}const c=(0,o(279900).A)((async()=>{await async function(){s||(await l(await o.e(51872).then(o.bind(o,443716))),s=!0)}(),await d()}))},69447:(e,t,o)=>{o.d(t,{Lq:()=>n,WK:()=>i,nh:()=>r});const n=40,r=48,i=60},73223:(e,t,o)=>{o.r(t),o.d(t,{dismissTutorial:()=>c,resetTutorials:()=>u,tutorialAdvanceToStep:()=>p,tutorialAdvanceToStepAfter:()=>g,tutorialGoToNextStep:()=>l,tutorialGoToPrevStep:()=>d});var n=()=>o(541235),r=()=>o(751156),i=()=>o(755199),a=()=>o(739135),s=()=>o(765957);function l(e,t){var o;const{currentUserSettingsStore:n}=s().default.state;if(!n)return;const r=null===(o=n.getSettings())||void 0===o?void 0:o.tutorials;m({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{i().mJ({userSettingsStore:n,transaction:e,data:{tutorials:{...r,[t]:(0,a().i9)(n,t)}}})},userId:n.id})}function d(e,t){var o;const{currentUserSettingsStore:n}=s().default.state;if(!n)return;const r=null===(o=n.getSettings())||void 0===o?void 0:o.tutorials;m({userAction:"TutorialActions.prevStep",environment:e,perform:e=>{i().mJ({userSettingsStore:n,transaction:e,data:{tutorials:{...r,[t]:(0,a().KD)(n,t)}}})},userId:n.id})}function c(e,t){var o;const{currentUserSettingsStore:r}=s().default.state;if(!r)return;const a=null===(o=r.getSettings())||void 0===o?void 0:o.tutorials;(null==a?void 0:a[t])!==n().YD&&m({userAction:"TutorialActions.dismissTutorial",environment:e,perform:e=>{i().mJ({userSettingsStore:r,transaction:e,data:{tutorials:{...a,[t]:n().YD}}})},userId:r.id})}function u(e){const{currentUserSettingsStore:t}=s().default.state;t&&m({userAction:"TutorialActions.resetTutorialsDebug",environment:e,perform:e=>{i().mJ({userSettingsStore:t,transaction:e,data:{tutorials:{}}})},userId:t.id})}function p(e,t,o){var r;const{currentUserSettingsStore:l}=s().default.state;if(!l||(0,a().x$)(l,t))return;const d=(0,a().gt)(l,t);n().c$[t].steps.findIndex((e=>e.id===d))>=n().c$[t].steps.findIndex((e=>e.id===o))||i().mJ({userSettingsStore:l,transaction:e,data:{tutorials:{...null===(r=l.getSettings())||void 0===r?void 0:r.tutorials,[t]:o}}})}function g(e,t,o){if((0,a().ll)(o))return;const n=(0,a().tb)(t,o);n&&p(e,t,n)}function m(e){return r().createAndCommit({...e,canUndo:!1})}},77279:(e,t,o)=>{o.r(t),o.d(t,{default:()=>r});class n extends(()=>o(757695))().Store{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const r=new n},81465:(e,t,o)=>{o.d(t,{z:()=>k});var n=o(296540),r=()=>o(84817),i=()=>o(780054),a=()=>o(807778),s=()=>o(624119),l=()=>o(484714),d=()=>o(852507),c=()=>o(56366),u=()=>o(959013),p=()=>o(252105),g=()=>o(710149),m=()=>o(765957),f=()=>o(506090),h=()=>o(960389),v=()=>o(414402),y=()=>o(471725),S=o(474848);function b(e){const{modalId:t,style:o}=e,n=(0,c().O$)(y().D),r=(0,l().v3)();(0,d().w)((()=>{y().D.setState(!0)}));const i={defaultValues:{billingDetails:(0,c().K8)((()=>{const e=m().default.state.currentUserStore;return{email:null==e?void 0:e.getEmail(),name:null==e?void 0:e.getName()}}),[])},terms:{card:"never"}};return(0,S.jsxs)(h().iy,{title:n?(0,S.jsx)(v().y,{labelOnly:!0}):(0,S.jsx)(u().sA,{id:"subscriptions.checkout.paymentMethod.title",defaultMessage:"Payment method"}),style:o,children:[n?(0,S.jsx)(x,{}):null,(0,S.jsx)(s().PaymentElement,{options:i,onChange:e=>{p().C3(r,{event:e,modal_id:t}),f().A.update((e=>{if(!e.open)return e;const{paymentData:t,...o}=e;return o}))},onReady:()=>y().D.setState(!1)})]})}function x(){return(0,S.jsxs)(r().Y1,{gap:12,children:[(0,S.jsxs)(r().Y1,{direction:"horizontal",gap:12,children:[(0,S.jsx)(g().A,{style:{width:"50%",height:60,borderRadius:6}}),(0,S.jsx)(g().A,{style:{width:"50%",height:60,borderRadius:6}})]}),(0,S.jsx)(v().y,{}),(0,S.jsx)(v().y,{}),(0,S.jsx)(v().y,{}),(0,S.jsx)(v().y,{})]})}var A=()=>o(520071);function C(e){const{customerAddress:t,vatId:o,onChangeFormData:n,errors:i,modalId:a}=e,s=(0,c().O$)(y().D),d=(0,u().tz)(),p=(0,l().v3)();return(0,S.jsxs)(r().Y1,{gap:12,children:[(0,S.jsxs)(r().Y1,{gap:12,direction:"horizontal",children:[(0,S.jsx)(h().uz,{id:"name",value:t.name,errorMessage:null==i?void 0:i.customerAddress,isLoading:s,onChange:e=>{a&&w({environment:p,addressType:"name",addressUpdate:e.target.value,modal_id:a}),n({vatId:o,customerAddress:{...t,name:e.target.value}})},label:d.formatMessage({defaultMessage:"Name",id:"billingDetails.name"}),placeholder:d.formatMessage({defaultMessage:"Ada Lovelace",id:"billingDetails.name.placeholder"})}),(0,S.jsx)(h().uz,{id:"businessName",value:t.businessName,isLoading:s,onChange:e=>{a&&w({environment:p,addressType:"businessName",addressUpdate:e.target.value,modal_id:a}),n({vatId:o,customerAddress:{...t,businessName:e.target.value}})},label:d.formatMessage({defaultMessage:"Business name (optional)",id:"billingDetails.businessName"}),placeholder:d.formatMessage({defaultMessage:"Acme Inc.",id:"billingDetails.businessName.placeholder"})})]}),void 0!==o?(0,S.jsx)(h().uz,{id:"vatId",value:o,isLoading:s,onChange:e=>n({vatId:e.target.value}),label:d.formatMessage({defaultMessage:"VAT/GST number (optional)",id:"billingDetails.vatNumber"}),placeholder:"123456789"}):null]})}const w=(0,o(496603).sg)((e=>{let{environment:t,addressType:o,addressUpdate:n,modal_id:r}=e;p().Jq(t,{addressType:o,addressUpdate:n,modal_id:r})}),1e3);function k(e){let{onChange:t,customerAddress:o,sessionId:s,vatId:l,validationErrors:d,gap:c=14,style:u,children:p}=e;const g=i().A.isMobile,m=(0,a().aD)(),f=(0,n.useMemo)((()=>{if(m)return(0,S.jsx)(A().c,{customerAddress:o,vatId:l,onChange:t,modalId:s});const{name:e,businessName:n}=o;return(0,S.jsx)(C,{customerAddress:{name:e,businessName:n},vatId:l,onChangeFormData:e=>{var n,r;t({customerAddress:{...o,name:(null===(n=e.customerAddress)||void 0===n?void 0:n.name)??"",businessName:(null===(r=e.customerAddress)||void 0===r?void 0:r.businessName)??""},vatId:e.vatId})},errors:d,modalId:s})}),[o,m,t,s,d,l]);return(0,S.jsxs)(r().Y1,{gap:c,padding:g&&m?4:0,style:u,children:[f,(0,S.jsx)(b,{modalId:s}),p]})}},105819:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,pencilLineIcon:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.63 4.12 14.99 11.76",svg:(0,o(474848).jsx)("path",{d:"m13.987 5.682-.684.684-1.288-1.288.692-.691a.91.91 0 0 1 1.28 0c.35.35.35.93 0 1.28zm-9.433 9.433 7.914-7.914-1.289-1.289-7.92 7.908c-.122.122-.214.29-.274.457l-.336 1.082c-.06.229.153.442.366.366l1.082-.335q.252-.07.457-.275m12.446.76H5.61l1.25-1.25H17a.625.625 0 1 1 0 1.25"})},r=(0,o(340498).wt)("pencilLine",n)},132389:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);function r(e){const t={display:"inline-block",minWidth:e.size,minHeight:e.size};return"x"===e.axis?t.minHeight=1:"y"===e.axis&&(t.minWidth=1),(0,n.jsx)("div",{style:t})}},175116:(e,t,o)=>{o.d(t,{ET:()=>l,Ks:()=>d,RI:()=>s,p2:()=>a});o(16280);var n=o(296540);const r="collectionContextStore",i=(0,o(446943).C)({displayName:r,legacyContextKey:r,modernContextDefaultValue:void 0}),a=i.context,s=i.Provider;function l(){const e=n.useContext(a);if(void 0===e)throw new Error(`No context provided: ${r}`);return e}function d(){return n.useContext(a)}},208993:(e,t,o)=>{o.d(t,{W:()=>p});o(296540);var n=()=>o(401497),r=()=>o(246760),i=()=>o(84817),a=()=>o(704152),s=()=>o(460292),l=()=>o(554509),d=()=>o(859428),c=()=>o(962730),u=o(474848);function p(e){let{tooltipTitle:t,tooltipDescription:o,buttonProps:n,iconSize:a="small",iconColorName:p="tertiary",tooltipWidth:m}=e;return(0,u.jsx)(d().A,{placement:c().W.Top,style:m?{width:m}:void 0,renderTooltip:()=>(0,u.jsxs)(i().Y1,{gap:2,direction:"vertical",children:[(0,u.jsx)(l().D,{styleName:"UISmall-12px/Medium",colorName:"contrastPrimary",children:t}),o?(0,u.jsx)(l().D,{styleName:"UISmall-12px/Regular",colorName:"contrastSecondary",children:o}):null]}),render:e=>(0,u.jsx)(g,{buttonProps:n,...e,children:(0,u.jsx)(s().Q,{iconGroup:r().G,colorName:p,variantName:a})}),textWrap:Boolean(m)})}function g(e){let{children:t,buttonProps:o,...r}=e;const i=(0,n().IS)((()=>({button:{borderRadius:2}})),[]);return o?(0,u.jsx)(a().A,{style:i.button,...o,...r,children:t}):(0,u.jsx)("span",{...r,children:t})}},255824:(e,t,o)=>{o.d(t,{a:()=>i});var n=()=>o(56366);const r=new(o(496506).ComputedStore)((()=>o(263711).g.state.isOpen),{debugName:"IsInPageViewModeStore"});function i(){return(0,n().O$)(r)}},271084:(e,t,o)=>{o.d(t,{k:()=>r});o(581454);class n extends(()=>o(757695))().Store{getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}getSortedUserIds(){return Object.entries(this.state||{}).sort(((e,t)=>{let[o,n]=e,[r,i]=t;return i-n})).map((e=>{let[t,o]=e;return t}))}}const r=new n;(0,o(604341).exposeDebugValue)("UserSimilarityStore",r)},279900:(e,t,o)=>{function n(e){let t,o,n;return async function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t?(n=i,o||(o=t.then((()=>(o=void 0,t=e(...n),t))),o)):(t=e(...i),t)}}o.d(t,{A:()=>n})},320865:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(){return(0,n.jsx)(o(678553).Ay,{title:(0,n.jsx)(o(331542).A,{})})}},334992:(e,t,o)=>{o.d(t,{A:()=>s});var n=()=>o(56366),r=()=>o(762433),i=()=>o(324561),a=()=>o(714300);function s(e){const t=(0,n().K8)((()=>e.getMemberCountFromPublicSpaceData()),[e]),o=(0,a().l)({spaceId:e.id}),s=(0,i().Q7)(e.id,o,t??0);return Boolean(!(0,r().Qx)(null==o?void 0:o.subscription)&&!(0,r().N8)(null==o?void 0:o.subscription)&&!(0,r().TB)(o)&&s>0)}},398217:(e,t,o)=>{o.d(t,{Jv:()=>h,Rl:()=>v,mA:()=>f});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(401497),s=()=>o(970013),l=()=>o(743176),d=()=>o(780054),c=()=>o(68465),u=()=>o(159588),p=()=>o(963589),g=o(474848);const m=function(){return(0,g.jsx)(o(464708).A,{color:"purple",style:{marginLeft:6,padding:"1px 4px",display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1},content:(0,g.jsx)(o(959013).sA,{defaultMessage:"AI",id:"database.property.aiAutofillEnabledIndicator"})})};const f=n.memo((function(e){const{propertySchema:t,showIcon:n,showDragIcon:r,hideName:i,badge:s,style:l,iconStyle:c,iconSize:p,dragHandleStyle:m,className:f,labelSizeVariant:h}=e,y=d().A.isMobile?16:14,S=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",lineHeight:"120%",minWidth:0,fontSize:y,...l},iconWrapper:{display:"grid",justifyContent:"center",alignItems:"center",marginRight:i?void 0:"small"===h||r?4:d().A.isMobile?9:6,...c},dragHandle:{gridColumn:1,gridRow:1,opacity:r?1:0,transition:`opacity ${u().bM}`},itemIcon:{gridColumn:1,gridRow:1,opacity:r?0:1,transition:`opacity ${u().bM}`},dragIcon:{fill:e.icon.secondary}})),[y,i,c,h,r,l]);return(0,g.jsxs)("div",{className:f,style:S.container,children:[n&&(0,g.jsxs)("div",{style:S.iconWrapper,children:[(0,g.jsx)("div",{style:S.itemIcon,children:(0,g.jsx)(v,{propertySchema:t,iconSize:p,iconStyle:c})}),(0,g.jsx)("div",{style:S.dragHandle,children:(0,g.jsx)(o(57232).A,{style:m,iconSize:12,iconStyle:S.dragIcon})})]}),!i&&(0,g.jsx)("div",{style:{...o(284371).RC},children:t.name}),s]})}));function h(e){const{propertySchema:t}=e,o=(0,r().v3)();return(0,i().K8)((()=>(0,c().O0)(o)&&s().$M(t)&&s().om(t)),[o,t])?(0,g.jsx)(m,{}):null}function v(e){const{propertySchema:t,iconSize:o,iconStyle:n}=e,r=(0,a().DP)(),i=(0,p().X)("nds_default_property_noticon"),s=d().A.isMobile?18:16;return(0,g.jsx)(l().zB,{type:t.type,icon:t.icon,size:o||s,theme:r,style:n,isDefaultNoticonEnabled:i})}},454531:(e,t,o)=>{o.d(t,{W:()=>f});var n=()=>o(780054),r=()=>o(972435),i=()=>o(867772),a=()=>o(681810),s=()=>o(901389),l=()=>o(896628),d=()=>o(383594),c=()=>o(675925),u=()=>o(751156),p=()=>o(892632);const g=1500,m=(0,o(959013).YK)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},preparing:{defaultMessage:"Preparing...",id:"pageCover.status.preparing"},downloading:{defaultMessage:"Downloading...",id:"pageCover.status.downloading"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image link…",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function f(e){let{environment:t,intl:o,store:n,rect:r,from:i}=e;d().W(t,{originGap:3,originRect:r,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:o.formatMessage(m.pageCover),onDelete:()=>{!function(e){let{environment:t,store:o}=e;d().I(),u().createAndCommit({userAction:"PageCover.handleDelete",environment:t,canUndo:!0,perform:e=>{l().PT({store:o,transaction:e})}})}({environment:t,store:n})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:o,position:r}=e;(0,c().o)(t,{action:"edit_cover",block_type:"page",from:i},(e=>{v({environment:t,store:n,url:{originUrl:o},position:r}),e()}))}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:o.formatMessage(m.fileTypeCaption,{idealImageWidth:g}),onUpload:e=>{(0,c().o)(t,{action:"edit_cover",block_type:"page",from:i},(r=>{var i;d().I(),p().QM({environment:t,file:e[0],bucket:"secure",record:(null===(i=n.getCoverStore())||void 0===i?void 0:i.pointer)??n.pointer,isFileBlock:!1,reportRichUploadMetrics:!0,onStart:y,onProgress:S,onComplete:e=>{var o;o={environment:t,store:n,url:{originUrl:e}},h({...o,position:.5})},onError:()=>{s().f1(o.formatMessage(m.uploadFailed))}}),r()}))}},{type:"embed",title:o.formatMessage(m.embedTitle),inputPlaceholder:o.formatMessage(m.embedPlaceholder),caption:o.formatMessage(m.embedCaption),buttonText:o.formatMessage(m.embedSubmit),onChange:e=>{(0,c().o)(t,{action:"edit_cover",block_type:"page",from:i},(o=>{var r;r={environment:t,store:n,url:e},h({...r,position:.5}),d().I(),o()}))}},{type:"unsplash",onChange:e=>{let{url:o,position:r}=e;(0,c().o)(t,{action:"edit_cover",block_type:"page",from:i},(e=>{v({environment:t,store:n,url:{originUrl:o},position:r}),e()}))}}]})}async function h(e){const{environment:t,store:o,url:n,position:s}=e,{serverCommitResult:d}=u().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{l().fg({store:o,url:n,position:s||.5,transaction:e})}});await d,a().A.state.loadingMode===i().vS&&a().A.setState({loadingMode:i().Gi,dataURL:a().A.state.dataURL,uploadProgress:t.device.isMobileNative?void 0:100,progressText:r().A.formatMessage(m.downloading)})}function v(e){h(e),n().A.isMobile&&d().I()}function y(e){const{file:t,name:o,size:n}=e;if(d().I(),a().A.setState({loadingMode:i().Wc,file:t,name:o,size:n}),t.type.indexOf("image")>=0)if(t instanceof File){const e=new FileReader;e.onload=e=>{a().A.state.loadingMode===i().Wc&&a().A.setState({...a().A.state,loadingMode:i().vS,uploadProgress:0,dataURL:e.target.result})},e.readAsDataURL(t)}else a().A.state.loadingMode===i().Wc&&a().A.setState({...a().A.state,loadingMode:i().vS,dataURL:t.dataURL,progressText:r().A.formatMessage(m.preparing)});else a().A.state.loadingMode===i().Wc&&a().A.setState({...a().A.state,loadingMode:i().vS,progressText:r().A.formatMessage(m.preparing)})}function S(e){const{progressPercent:t,progressText:o}=e;a().A.state.loadingMode===i().vS&&a().A.setState({...a().A.state,uploadProgress:t,progressText:o})}},458366:(e,t,o)=>{o.d(t,{B2:()=>T,F1:()=>w,Kc:()=>A,NN:()=>I,UY:()=>x,br:()=>M,lA:()=>k,lh:()=>C,pi:()=>y,w_:()=>b,zP:()=>S});o(898992),o(737550);var n=()=>o(584262),r=()=>o(443239),i=()=>o(970013),a=()=>o(713998),s=()=>o(882262),l=()=>o(415566),d=()=>o(177256),c=()=>o(72135),u=()=>o(919709),p=()=>o(496603),g=()=>o(534177),m=()=>o(939768),f=()=>o(720665),h=()=>o(492414),v=()=>o(972435);function y(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function S(e){switch(e){case"table":return"table";case"board":return"board";case"list":return"list";case"gallery":return"gallery";case"feed":return"feed";case"relation":case"relation_section":return"relation_section";case"timeline":return"timeline";case"calendar":return"calendar";case"page":return"page_properties";case"compact_page":return"compact_page";case"mini":return"mini_peek";case"form_editor":case"form_viewer":case"property_module":return"property_module";default:(0,g().HB)(e)}}function b(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function x(e){const{store:t,property:o,propertySchema:r}=e,i=null==r?void 0:r.type;if("title"===i)return(0,h().Ay)({store:t,fullyQualified:!1,pageVisitSource:n().y8.LinkInPage});{const e=t.getPropertyValue(o);return a().UY(i,e)}}function A(e){let t=(0,u().k4p)(e);if(!t||""===t.trim()||t.trim().includes(" "))return{domain:void 0,restOfUrl:void 0};t=t.trim();let o=m().qg(t),n=o.host;if(o.protocol&&n||(o=m().qg(`http://${t}`),n=o.host),!n)return{domain:void 0,restOfUrl:void 0};n&&(n=n.replace(/^www./i,""));const r=t.toLowerCase().indexOf(n.toLowerCase());if(-1===r)return{domain:void 0,restOfUrl:void 0};n=t.slice(r,r+n.length);return{domain:n,restOfUrl:t.slice(r+n.length)}}function C(e){const{numberValue:t,numberFormat:o,numberShowAs:n}=e;if(!(p().yr(t)||f().pN(t)||"bar"!==(null==n?void 0:n.type)&&"ring"!==(null==n?void 0:n.type))){const e=v().A.getIntl();return"percent"===o?c().ZV(t,"percent",e):`${t} / ${n.maxValue}`}}function w(e){const{property:t,collectionStore:o}=e,n=o.isSyncedCollection();return Boolean(n)&&(0,r().u)(t)}function k(e,t){switch(e){case"side_peek":return{icon:d().A,tooltip:v().A.formatMessage(P.openInSidePeekTooltip),caption:t?"":v().A.formatMessage(P.openAsPageTitle)};case"center_peek":return{icon:l().q,tooltip:v().A.formatMessage(P.openInCenterPeekTooltip),caption:t?"":v().A.formatMessage(P.openAsPageTitle)};case"full_page":return{icon:s().m,tooltip:v().A.formatMessage(P.openAsPageTooltip),caption:t?"":v().A.formatMessage(P.openAsPageTitle)};default:(0,g().HB)(e)}}const P=(0,o(959013).YK)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function M(e){const{store:t,additionalStores:o,collectionContextStore:n}=e,r=t.getAssociatedCollectionStore();return!("collectionTypedView"!==(null==n?void 0:n.contextType)||!r)&&o.some((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==r.id}))}function I(e){return"form_editor"===e||"form_viewer"===e}function T(e){return Boolean(e&&!i().dA.includes(e.type))}},465364:(e,t,o)=>{o.d(t,{$N:()=>j,D5:()=>D,GB:()=>M,M9:()=>k,Pt:()=>T,eW:()=>I,jo:()=>B,v7:()=>P});o(944114),o(898992),o(803949),o(581454);var n=()=>o(244641),r=()=>o(787626),i=()=>o(713998),a=()=>o(597777),s=()=>o(604995),l=()=>o(416504),d=()=>o(519831),c=()=>o(496603),u=()=>o(534177),p=()=>o(299709),g=()=>o(317001),m=()=>o(520861),f=()=>o(878060),h=()=>o(44729),v=()=>o(246826),y=()=>o(319975),S=()=>o(519839),b=()=>o(695625),x=()=>o(397248),A=()=>o(217429),C=()=>o(630116),w=()=>o(747671);function k(e){const{environment:t,droppedStores:o,duplicate:i,calendarBy:c,transaction:u,collectionContextStore:f,duplicateActions:v}=e,y=n().c9.fromMillis(e.startOfDay);let b=!0;for(const n of o){const t=e.collectionStore?e.collectionStore:(0,S().Dj)({store:n,collectionContextStore:f});if(n.getParentTable()===d().Vl||!t){b=!1;break}h().X$({childStore:n,parentStore:t,transaction:u})||(b=!1)}const x=(0,m().T)({environment:t,droppedStores:o,duplicate:i,transaction:u,collectionStore:e.collectionStore,duplicateActions:v});for(const n of x){const o=e.collectionStore?e.collectionStore:(0,S().Dj)({store:n,collectionContextStore:f});if(!o)continue;const i=o.getMappedProperty(c),d=n.getPropertyStore(i),m=(0,r().b)(d.getValue())||s().Ec((0,l().P)()),h=s().kW(m,(0,l().P)()),v=y.toFormat(s().tr);let x;if("date"===h.type||"datetime"===h.type)x={...h,start_date:v};else{const e=s().AA(h,(0,l().P)());if(!e.end)return;const t={...h,start_date:v},o=s().AA(t,(0,l().P)()).start.diff(e.start,"days"),n=e.end.plus(o).toFormat(s().tr);x={...h,start_date:v,end_date:n}}const A=s().kW(x,a().$K(m)||(0,l().P)());(0,g().j)({environment:t,store:n,collectionStore:o,collectionContextStore:f,shouldCoerce:!0,groupsPointer:[],transaction:u,alreadyMovedToCollection:b}),D({environment:t,type:"dateValue",propertyId:i,store:n,transaction:u,dateValue:A}),(0,p().E)({environment:t,collectionContextStore:f,block_id:n.id,property:i,property_type:"date",from:"calendar"})}}function P(e){const{calendarStore:t,direction:o,targetStore:n}=e;t.setState({...t.state,isDragging:!0,targetStore:n,direction:o,temporaryValue:void 0})}function M(e){const{calendarStore:t,x:o,y:i,calendarBy:d}=e,u=t.state;if(u.isDragging){const e=(0,r().b)(u.targetStore.getPropertyStore(d).getValue());if(!e)return;const p=s().kW(e,(0,l().P)()),g=u.temporaryValue||e,m=s().kW(g,(0,l().P)()),f=[];u.dayStoreMap.forEach(((e,t)=>{f.push({store:e,timestamp:t})}));const h=f.find((e=>{let{store:t}=e;const n=b().T.getRectFromStore(t);return Boolean(n&&x().ux(n,o,i))}));let v;if(h){const e=n().c9.fromMillis(h.timestamp),t=e.endOf("day"),o=e.toFormat(s().tr);if(p){const r=s().AA(p,(0,l().P)());if(u.direction===w().Q.Left)if(n().IX.fromDateTimes(e,t).contains(r.start))v=p;else{let e;e="datetimerange"===p.type||"daterange"===p.type?{...p,start_date:o,end_date:p.end_date}:"datetime"===p.type?{type:"datetimerange",start_date:o,start_time:p.start_time,end_date:p.start_date,end_time:p.start_time,time_zone:p.time_zone,reminder:p.reminder}:{type:"daterange",start_date:o,end_date:p.start_date,reminder:p.reminder};const t=s().AA(e,(0,l().P)());v=!r.end&&t.start>r.start||r.end&&t.start>r.end?m:e}else if(r.end?n().IX.fromDateTimes(e,t).contains(r.end):n().IX.fromDateTimes(e,t).contains(r.start))v=p;else{let e;e="date"===p.type?{...p,type:"daterange",end_date:o}:"datetime"===p.type?{...p,type:"datetimerange",end_date:o,end_time:"00:00"}:{...p,end_date:o};const t=s().AA(e,(0,l().P)());v=t.end&&t.end<t.start?m:e}}}if(v&&!c().n4(m,v)){const e=s().kW(v,a().$K(g)||(0,l().P)());t.setState({...u,temporaryValue:e})}}}function I(e){const{environment:t,calendarStore:o,calendarBy:n,transaction:r}=e,i=o.state;i.isDragging&&i.temporaryValue&&(D({type:"dateValue",environment:t,dateValue:i.temporaryValue,propertyId:n,store:i.targetStore,transaction:r}),o.setState({...o.state,isDragging:!1}))}function T(e){const{calendarStore:t}=e,o=t.state;o.isDragging&&t.setState({...o,isDragging:!1})}function j(e){const{environment:t,store:o,collectionStore:r,collectionContextStore:a,startDayOfWeek:d,transaction:c}=e,u=a.dateRangeStartStore.state,p=(0,l().P)(),m=a.normalizedQueryStore.state;if(!m||!m.calendar_by)return;const f=(null==r?void 0:r.getMappedProperty(m.calendar_by))??m.calendar_by,h=s().hp(u,d,p),y=h.startOf("month"),S=h.endOf("month"),b=n().c9.now().startOf("day");let x;return x=n().IX.fromDateTimes(y,S).contains(b)?s().p6(b.valueOf(),p):s().p6(s().iB(u,d,p).valueOf(),p),v().zv({store:o.getPropertiesStore(),data:{[f]:i().m5(x)},transaction:c}),(0,g().j)({environment:t,store:o,collectionStore:r,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:c}),o}function D(e){const{environment:t,store:o,propertyId:n,transaction:r}=e;let a;"timestamp"===e.type?a=s().p6(e.timestampMs.valueOf(),(0,l().P)()):"dateValue"===e.type?a=e.dateValue:(0,u().HB)(e);const d=o.getPropertyValue(n);if(a&&function(e){const{propertyId:t,oldDateValue:o,newPersistedDate:n,store:r}=e;if(o||!n||void 0!==n.reminder)return!1;if(!A().default.checkGate({gateName:"adoption_reminder_collection_default"}))return!1;const i=_(t,r);if(void 0===i)return!1;return!0}({propertyId:n,oldDateValue:d,newPersistedDate:a,store:o})){const e=_(n,o);void 0!==e&&(a={...a,reminder:e})}const c=i().m5(a);v().zv({store:o.getPropertiesStore(),data:{[n]:c},transaction:r}),f().O({environment:t,store:o,dateProperty:{id:n,oldValue:d,newValue:c}})}function _(e,t){const o=t.getAssociatedCollectionStore();if(!o)return;const n=o.getSchema();if(!n)return;const r=n[e];return r&&"date"===r.type?r.default_reminder:void 0}function B(e){const{environment:t,collectionStore:o,calendarBy:n,store:r,insertStores:i,collectionContextStore:a,transaction:s}=e,l=r.getPropertyStore(n).getValue();for(const d of i)(0,g().j)({environment:t,store:d,collectionStore:o,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:s}),y().R9({environment:t,store:d.getPropertyStore(n),value:l,transaction:s});return i.map((e=>C().Bv.createChildStore(o,e.pointer)))}},520861:(e,t,o)=>{o.d(t,{T:()=>r});o(944114),o(898992),o(908872);var n=()=>o(415651);function r(e){const{environment:t,collectionStore:o,duplicate:r,droppedStores:i,transaction:a,duplicateActions:s}=e,{movedStores:l,reparentedStores:d}=i.reduce(((e,t)=>(r||t.getAssociatedCollectionId()!==(null==o?void 0:o.id)?e.reparentedStores.push(t):e.movedStores.push(t),e)),{movedStores:[],reparentedStores:[]});return[...l,...n().MS({environment:t,droppedStores:d,duplicate:r,transaction:a,resolveTemplateVariables:!1,duplicateActions:s})]}},525432:(e,t,o)=>{o.d(t,{Bd:()=>s,DN:()=>m,II:()=>S,R8:()=>y,U9:()=>v,VM:()=>h,ZF:()=>p,ZI:()=>c,bf:()=>d,jx:()=>u,wW:()=>f,xO:()=>l});o(16280),o(296540);var n=()=>o(651124),r=()=>o(959013),i=()=>o(712505),a=o(474848);let s=function(e){return e[e.ViewSettings=0]="ViewSettings",e[e.FilterBar=1]="FilterBar",e[e.TopbarFilterPopup=2]="TopbarFilterPopup",e[e.TopbarSortPopup=3]="TopbarSortPopup",e[e.TopbarFollowPopup=4]="TopbarFollowPopup",e[e.MobileSheet=5]="MobileSheet",e}({});const l=480,d=320;function c(e){const{timelineViewTab:t,collectionContextStore:o}=e,r=u({collectionContextStore:o}),i=p({collectionContextStore:o});return"timeline"===r?"timeline"===t?"timeline_properties":i?"timeline_table_properties":void 0:(0,n().u9)(u({collectionContextStore:o}))}function u(e){var t;const{collectionContextStore:o}=e,n=null===(t=o.collectionViewStore())||void 0===t?void 0:t.getType();if(!n)throw new Error("View type was not defined.");return n}function p(e){const{collectionContextStore:t}=e,o=t.normalizedFormatStore.state;return Boolean(o.timeline_show_table)}const g=600;function m(e,t,o){const n=o||0,r=e.settingsStore.state;if(r.open&&!0!==r.hideSettingsPopup)return f(e,t,n)}function f(e,t,o){const n=o||0,r=e.settingsStore.state,a=u({collectionContextStore:e});return r.open&&"form_editor"===a||t||i().default.isSidePeekOpen()||e.isInHomeWidgetStore.state||e.isInlineViewStore.state||n<=g?"popup":"sidebar"}function h(e){let{hasOnlyLinkedDataSources:t,isCollectionViewPageWithContent:o,locked:n}=e;return o?n?(0,a.jsx)(r().sA,{defaultMessage:"Unlock wiki",id:"action.unlockWikiName.name"}):(0,a.jsx)(r().sA,{defaultMessage:"Lock wiki",id:"action.lockWikiName.name"}):t?n?(0,a.jsx)(r().sA,{defaultMessage:"Unlock views",id:"database.viewSettings.mainTab.unlockViews.title"}):(0,a.jsx)(r().sA,{defaultMessage:"Lock views",id:"database.viewSettings.mainTab.lockViews.title"}):n?(0,a.jsx)(r().sA,{defaultMessage:"Unlock database",id:"database.viewSettings.mainTab.unlockDatabase.title"}):(0,a.jsx)(r().sA,{defaultMessage:"Lock database",id:"database.viewSettings.mainTab.lockDatabase.title"})}let v=function(e){return e[e.Source=0]="Source",e[e.Relation=1]="Relation",e}({});const y=6;function S(e){let{currentViewType:t,isPlaceholderExternalCollection:o,collectionContextStore:n,allowedActions:r,settingsHeaderSizeObserver:i}=e;return"page"!==t&&"form_editor"!==t&&(!o&&(!!n.shouldAllowNewItemCreation()&&(!(r&&!r.includes("addItem"))&&!(i&&i.rect.state.width>d))))}},544862:(e,t,o)=>{o.d(t,{A:()=>C});var n=o(296540),r=()=>o(484714),i=()=>o(56366),a=()=>o(959013),s=()=>o(896628),l=()=>o(454531),d=()=>o(751156),c=()=>o(478726),u=()=>o(227440),p=()=>o(867772),g=()=>o(681810),m=()=>o(608581),f=()=>o(145214),h=()=>o(704152),v=()=>o(807683),y=()=>o(401497),S=()=>o(534177),b=o(474848);function x(e){let{src:t,placeholderSrc:o,placeholderBehavior:r,imageStyle:i,containerStyle:a,onLoadComplete:s,testId:l}=e;const[d,c]=(0,n.useState)(!0);let u;switch(r){case"force-show-placeholder":u=!0;break;case"force-show-src":u=!1;break;case"show-placeholder-if-loading-src":u=!!o&&(d||void 0===t);break;default:(0,S().HB)(r)}const p=(0,y().IS)((()=>{const e={gridColumn:1,gridRow:1};return{container:{display:"grid",...a},srcWrapper:{...u&&{display:"none"},...e},placeholderWrapper:{pointerEvents:"none",...e}}}),[a,u]);(0,n.useEffect)((()=>{void 0!==t&&c(!0)}),[t]);const g=(0,n.useCallback)((e=>{c(!1),null==s||s()}),[s]);return(0,b.jsxs)("div",{style:p.container,children:[(0,b.jsx)(v().Ay,{src:t,onLoad:g,style:i,placeholderStyle:p.srcWrapper,placeholderLoadedStyle:p.srcWrapper,testId:l}),o&&(0,b.jsx)(v().Ay,{src:o,style:i,placeholderStyle:p.placeholderWrapper,placeholderLoadedStyle:p.placeholderWrapper})]})}var A=()=>o(453101);const C=function(e){let{store:t,disabled:a,paddingRight:l,paddingLeft:c,height:u,proxyWidth:m}=e;const f=(0,r().v3)(),h=(0,r().Y0)(),y=(0,i().uB)(void 0,o(454305).A),S=(0,i().K8)((()=>a||"suggest"===o(77246).Uv.getMode(t)||(0,o(600871).aD)(h)),[a,t,h]),A=(0,i().K8)((()=>t.getCover()),[t]),C=(0,i().O$)(g().A),[P,M]=(0,n.useState)(void 0);if(!A)return null;const I=C.loadingMode!==p().pF&&C.loadingMode!==p().Wc;return(0,b.jsx)(o(801678).A,{mouseStore:y,onFlushTemporaryPosition:e=>function(e,t,o){const{imagePosition:n,reset:r}=e;d().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:o,canUndo:!0,perform:e=>{s().yY({store:t,coverPosition:n,transaction:e}),r()}})}(e,t,f),renderControl:e=>{let{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:r,isVisible:i,isRepositioning:a}=e;return(0,b.jsx)(k,{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:r,isVisible:i,isRepositioning:a,lastProxiedUrl:P,store:t,disabled:S,paddingRight:l,paddingLeft:c,mouseStore:y})},source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:u,maxHeight:280,cursor:"default"},preventClickPropagation:!0,render:e=>(0,b.jsxs)(n.Fragment,{children:[(0,b.jsx)(o(360083).A,{url:A.cover,isAuthenticated:!0,permissionRecord:A.pointer,width:m,onFinishedLoadingProxyUrl:M,render:(t,o)=>{const n={width:"100%",height:u,maxHeight:280,objectFit:"cover",opacity:I?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},r={width:"100%",height:u,maxHeight:280};return(0,b.jsx)(x,{src:o,placeholderSrc:I?C.dataURL:void 0,placeholderBehavior:I?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:r,imageStyle:n,onLoadComplete:w,testId:"pageCover"})}}),I&&(0,b.jsxs)("div",{style:v().fd,children:[(0,b.jsx)(o(331542).A,{size:"md",style:{marginRight:4}}),(0,b.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:void 0!==C.uploadProgress?(0,b.jsx)(o(773382).A,{percentage:C.uploadProgress}):C.progressText?(0,b.jsx)("span",{children:C.progressText}):null})]})]})})};function w(){g().A.reset()}function k(e){let{isVisible:t,isRepositioning:o,handleCancelClick:s,handleRepositionClick:d,handleSavePositionClick:v,lastProxiedUrl:y,store:S,disabled:x,paddingRight:C,paddingLeft:w,mouseStore:k}=e;const P=(0,r().v3)(),M=(0,a().tz)(),I=(0,n.useCallback)((e=>function(e,t,o,n,r){r.reset();const i=e.target.getBoundingClientRect();l().W({environment:t,intl:o,store:n,rect:i,from:"page_header"})}(e,P,M,S,k)),[P,M,S,k]),T=(0,i().K8)((()=>g().A.state.loadingMode),[]),j=(0,i().K8)((()=>function(e){let t;return t=Boolean(e.isFullWidth())?"100%":c().x6,t}(S)),[S]),{device:D}=P,_=(0,i().O$)(u().e);if(x||T!==p().pF||!_)return null;const{isMobile:B}=D;return(0,b.jsx)(f().A,{animate:{width:j,opacity:t?1:0},style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,b.jsxs)(m().A,{isVisible:t,position:"bottom",style:{marginRight:C,marginLeft:w},children:[!o&&(0,b.jsx)(h().A,{style:{borderRight:B?"none":void 0,...A().k},onClick:I,children:(0,b.jsx)(a().sA,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!o&&!B&&(0,b.jsx)(h().A,{style:{...A().k,borderRight:"none"},onClick:e=>d(e,y),children:(0,b.jsx)(a().sA,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),o&&!B&&(0,b.jsx)(h().A,{style:A().k,onClick:v,children:(0,b.jsx)(a().sA,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),o&&!B&&(0,b.jsx)(h().A,{style:{...A().k,borderRight:"none"},onClick:s,children:(0,b.jsx)(a().sA,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})}},551619:(e,t,o)=>{o.d(t,{Hy:()=>D,NV:()=>T,O9:()=>B,Rg:()=>_,Sm:()=>V,dK:()=>E,f7:()=>R,l8:()=>L,n$:()=>W,no:()=>H,sx:()=>j});var n=()=>o(402014),r=()=>o(484714),i=()=>o(792485),a=()=>o(56366),s=()=>o(700500),l=()=>o(651124),d=()=>o(519831),c=()=>o(620689),u=()=>o(591197),p=()=>o(835066),g=()=>o(780054),m=()=>o(964345),f=()=>o(68465),h=()=>o(504836),v=()=>o(478726),y=()=>o(747100),S=()=>o(963589),b=()=>o(665579),x=()=>o(765957),A=()=>o(525569),C=()=>o(217429),w=()=>o(375447),k=()=>o(66496),P=()=>o(548821),M=()=>o(712505),I=()=>o(302022);function T(e){(0,n().SQ)({event:e,context:n().y$.EditorMouseDown,callback:()=>{}})}function j(e){(0,n().SQ)({event:e,context:n().y$.Click,callback:()=>{}})}function D(e){return(0,a().K8)((()=>Boolean(I().A.state.pageMap[e.id])||k().A.state.pages.has(e.id)),[e.id])}function _(e,t){const o=(0,r().v3)(),n=(0,i().S)(),s=D(e),l=(0,a().K8)((()=>{var o,n;return t===P().Rr.Frame?Boolean(null===(o=x().default.state.currentLoadingContainerStore)||void 0===o?void 0:o.state.ready):t===P().Rr.PeekView&&M().default.state.open?Boolean(null===(n=M().default.state.loadingContainerStore)||void 0===n?void 0:n.state.ready):t===P().Rr.CollectionPageView||t===P().Rr.CollectionPageViewFullScreen?e.isReady():void 0}),[t,e]),d=R(e);return(0,a().K8)((()=>{if(!l)return!1;const t=o.currentUser.isLoggedIn(),r=n&&n.publicEditModeStore.state;return Boolean(e&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=r&&r.hasPublicPermission)||"edit"===(null==r?void 0:r.permission))&&!s&&!d&&(!(0,f().ZE)(r)||"completionPopup"!==A().default.state.type))}),[o.currentUser,d,l,n,s,e])}function B(e,t){const o=(0,r().v3)(),n=(0,i().S)(),{isTablet:s}=(0,r().Y0)(),l=(0,S().X)("tablet_refresh_template_pills_gate");return(0,a().K8)((()=>{if(t===P().Rr.SitePreview)return!1;if(g().A.isMobile&&(!s||!l))return!1;if(!o.currentUser.isLoggedIn())return!1;const r=n&&n.publicEditModeStore.state;if(null!=r&&r.hasPublicPermission&&"edit"!==(null==r?void 0:r.permission))return!1;if(e.getContentLength()>1)return!1;if(!e.canEdit()||e.isNonEditableState())return!1;const i=e.getContentStores()[0];if(i&&!i.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const a=m().gZ.state,d=m().Di.state;if(a&&e.id===d)return!1;return!((0,v().L5)(t)?u().VY.state:u().u3.state)}),[o,n,e,t,s,l])}function R(e){return(0,a().K8)((()=>{if(e.isCollectionView()){const t=e.getCollectionStoreIfSingleSource();return!!t&&t.isSyncedCollection()}return e.isType(s().xd.externalObjectInstancePage)}),[e])}function V(e){return(0,a().K8)((()=>{if(!(0,h().vL)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===d().Vl){return!!t.getFormatStore().getKeyStore("external_collection_type").getValue()}return!1}),[e])}function E(e){return(0,a().K8)((()=>{if(!(0,h().pB)())return!1;var t;return!!e.isCollectionView()&&((null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("external_collection_type").getValue())??!1)}),[e])}function L(e){return(0,a().K8)((()=>{if(!C().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"}))return!1;var t;return!!e.isCollectionView()&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("static_import_collection_type").getValue())===l().IE.CsvImport}),[e])}function W(e){const t=(0,r().v3)(),{device:o,WindowSizeStore:n}=t,i=(0,a().K8)((()=>{const e=n.state.height,o=g().A.isMobile&&w().Ay.state.open?e:0;return c().C6(t)+o}),[t,n]);return(0,a().K8)((()=>"home-phone"===e?b().q3:o.isTablet?380:o.isIOS?Math.max(350,i):g().A.isMobile?400:"side-peek"===e||"center-peek"===e?y().ln:"home"===e?b().wH:"30vh"),[o,i,e])}function H(e){const t=(0,r().v3)(),o=(0,a().K8)((()=>(0,p().dC)(t,e)),[t,e]);return(0,a().K8)((()=>o&&!e.isFullWidth()?(0,p().Zy)(t,(0,y().cq)(e),(0,y().RX)(e)):0),[t,o,e])}},555267:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),r=()=>o(401497),i=()=>o(62856),a=()=>o(331542),s=o(474848);function l(e){let{loadingMessage:t}=e;const o=(0,r().DP)(),l=(0,i().A)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:l?(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(a().A,{}),t?(0,s.jsx)("div",{style:{marginLeft:8,color:o.text.secondary},children:t}):void 0]}):void 0})}},567121:(e,t,o)=>{o.d(t,{EG:()=>a,K5:()=>i,RH:()=>r,Yi:()=>s,ls:()=>n});const n=32,r=202,i=1e3,a="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",s="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},578194:(e,t,o)=>{o.d(t,{r:()=>n});const n=(0,o(583835).Dv)("importEvernote")},591197:(e,t,o)=>{o.d(t,{VY:()=>s,ZJ:()=>i,u3:()=>a});var n=()=>o(496506);class r extends(()=>o(757695))().Store{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const i=new r,a=new(n().ComputedStore)((()=>!1!==i.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),s=new(n().ComputedStore)((()=>!1!==i.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},601203:(e,t,o)=>{o.d(t,{Kz:()=>y,Qe:()=>m,dn:()=>f,gM:()=>S,qu:()=>h,sM:()=>v});var n=()=>o(251111),r=()=>o(762433),i=()=>o(643819),a=()=>o(496603),s=()=>o(449506),l=()=>o(780054),d=()=>o(765957),c=()=>o(506090),u=()=>o(134217),p=()=>o(430395),g=()=>o(981046);async function m(e){var t;let{environment:o,billingData:i,lineItems:a,memberCount:l,billingInterval:p,vatId:m,addOn:f,onlyShowAddOn:h,isCheckoutAddressFormExperimentEnabled:v,...y}=e;const S=c().A.state;if(!S.open||!i)return;const b=v,x=b?y.address:(null==i?void 0:i.address)??S.temporaryAddress;if(!(0,n().Z)(x))return;c().A.update((e=>({...e,calculatingTax:!0})));const A=p??S.temporaryBillingInterval??"year",C=f??S.addOnFeature,w=h??S.onlyShowAddOn;if(!(null===(t=d().default.state.currentSpaceStore)||void 0===t?void 0:t.id))return;const{planAmount:k,promoInfo:P,accountBalance:M}=(0,u().TQ)({memberCount:l,promo:b?y.promo:S.appliedPromo,currencyCode:g().A.selectedCurrencyCode,billingData:i,addOnFeature:C,onlyShowAddOn:w,subscriptionTier:S.subscriptionTier,taxAmount:S.taxAmount,calculatingTax:S.calculatingTax,billingInterval:A,coupon:S.coupon}),I=Math.max(0,k-P.amount+M),T=await s().callApi({eventName:"calculateTax",environment:o,data:{address:x,lineItems:a,price:I,vatId:m??(S.vatApplicable?S.temporaryVatCode:void 0),customerId:(0,r().Rz)(i)}});if("failed"===T.type)c().A.update((e=>({...e,taxAmount:void 0,calculatingTax:!1})));else{const e=T.data;e.valid?c().A.update((t=>({...t,taxAmount:e.taxAmount,calculatingTax:!1,taxCalculationError:void 0}))):c().A.update((t=>({...t,taxAmount:void 0,calculatingTax:!1,taxCalculationError:e.error})))}}async function f(e,t,o){var a;const l=p().A.state;if(!l.open||!t)return;const d=l.temporaryAddress;if(!(0,n().Z)(d))return;p().A.update((e=>({...e,calculatingTax:!0})));const c=(null===(a=l.totalUpgradeCost)||void 0===a?void 0:a.amount)||0,u=await s().callApi({eventName:"calculateTax",environment:e,data:{address:d,price:c,vatId:o??(l.vatApplicable?l.temporaryVatCode:void 0),customerId:(0,r().Rz)(t)}});if("failed"===u.type)p().A.update((e=>({...e,taxAmount:void 0,calculatingTax:!1})));else{const e=u.data;e.valid?p().A.update((t=>({...t,taxAmount:i().W.fromValue({amount:e.taxAmount,currencyCode:g().A.selectedCurrencyCode}),calculatingTax:!1,taxCalculationError:void 0}))):p().A.update((t=>({...t,taxAmount:void 0,calculatingTax:!1,taxCalculationError:e.error})))}}async function h(e){const{environment:t,billingData:o,stripeData:i,taxableAmount:a,lineItems:l}=e,{address:d}=null!=o&&o.address?{address:null==o?void 0:o.address}:e,c=(null==i?void 0:i.vatId)??(o?(0,r().t_)(o,"vat"):void 0);if(!d||!(0,n().Z)(d))return;const u=(0,r().Rz)(o),p=await s().callApi({eventName:"calculateTax",environment:t,data:{address:d,price:a.amount,vatId:c,customerId:u,lineItems:l}});if("failed"===p.type)return;const g=p.data;return g.valid?g.taxAmount:void 0}function v(e){let{price:t,quantity:o,promo:n}=e;if(!t)return;if(void 0===t.unitAmount)return;const r=l().A.pricing[t.product];if(!("productId"in r))return;return{amount:t.unitAmount.amount*o-t.getDiscountPerBillingInterval({quantity:o,promo:n}).amount,productId:r.productId}}function y(e){const t=l().A.pricing[e.price.product];if("productId"in t)return{amount:e.price.unitAmount.amount*e.quantity,productId:t.productId}}function S(e){let{line:t,defaultProductId:o=l().A.pricing.plus.productId}=e;const n=(0,a().xu)(t.discount_amounts??[],"amount"),r=t.price?"string"==typeof(i=t.price.product)?i:i.id:o;var i;return{amount:t.amount-n,productId:r}}},608581:(e,t,o)=>{o.d(t,{A:()=>u});o(898992),o(354520),o(581454),o(941795);var n=o(296540),r=()=>o(401497),i=()=>o(955825),a=()=>o(284371),s=()=>o(780054),l=()=>o(963575),d=o(474848);function c(e){const{button:t,isLast:o}=e,s=(0,r().IS)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:a().Wy.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return n.cloneElement(t,{...(0,i().AH)(t.props.style,s.button,o&&s.buttonLast),hoveredStyle:(0,i().AH)(s.buttonHovered,o&&s.buttonLast).style,pressedStyle:s.buttonPressed})}const u=function(e){let{children:t,isVisible:u,position:p,style:g}=e;const m=(0,r().IS)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.shadowSM,display:"flex",whiteSpace:"nowrap",borderRadius:l().A.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:s().A.isMobile?"auto":"none",opacity:s().A.isMobile?1:0,fontFamily:a().vc(o(662303).locale).sans,position:"absolute",right:l().A.horizontal.small,bottom:l().A.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:l().A.vertical.small,bottom:void 0}})),[]),f=n.Children.toArray(t).filter(o(534177).O9),h=f.length;return(0,d.jsx)(o(145214).A,{animate:{opacity:u?1:0},...(0,i().AH)(m.container,g,u&&m.containerHover,"top"===p&&m.containerTop),children:f.map(((e,t)=>{const r=t===h-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===o(859428).A&&n.isValidElement(e))return n.cloneElement(e,{render:(t,o)=>{const n=e.props.render(t,o);return(0,d.jsx)(c,{isLast:r,button:n},e.key)}});if(e.type===o(704152).A&&n.isValidElement(e))return(0,d.jsx)(c,{isLast:r,button:e},e.key)}}))})}},612900:(e,t,o)=>{o.d(t,{u:()=>i});var n=()=>o(645873);const r=new(n().O2)("PulsingWrapper",(async()=>o.e(45248).then(o.bind(o,673962)))),i=(0,n().jQ)(r,(e=>e.PulsingWrapper),{renderLoading:(e,t)=>t.children})},665579:(e,t,o)=>{o.d(t,{$L:()=>s,BZ:()=>c,EC:()=>m,EI:()=>b,E_:()=>P,Ed:()=>p,Fq:()=>v,Lu:()=>A,Mk:()=>g,O0:()=>k,UO:()=>M,V$:()=>w,VQ:()=>f,Xx:()=>x,Xy:()=>d,YS:()=>h,_g:()=>S,dd:()=>u,pW:()=>l,q3:()=>a,wH:()=>i});var n=()=>o(496603),r=()=>o(534177);const i=160,a=40,s=24,l=20,d=600,c=270,u=405,p=480,g=500,m=void 0,f=16,h=10,v=8,y=(o(69447).nh,{backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"}),S=4;function b(e){return{icon:e.icon.secondary,text:e.text.secondary}}function x(e){return{width:48,height:48,fill:e.icon.tertiary}}function A(e){let{theme:t,isPhone:o}=e;return o?t.personalHomeBackgroundPhone:t.surface.page}const C=1;function w(e){let{isPhone:t,theme:o}=e;return{zIndex:1,position:"relative",display:"flex",flexDirection:"column",borderRadius:12,background:o.home.tile.background,boxShadow:P({isPhone:t,theme:o}),...y}}function k(e){let{mode:t}=e;switch(t){case"dark":return 0;case"light":return C;default:return(0,r().ub)(t),0}}function P(e){let{isPhone:t,theme:o,borderOnly:r}=e;if("dark"===o.mode)return"unset";o.mode;const i=k({mode:o.mode});return(0,n().oE)([r||t?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${i}px rgba(0, 0, 0, 0.05)`]).join(", ")}function M(e){const{isPhone:t,theme:o,borderOnly:n}=e;return{unhoveredBoxShadow:P({isPhone:t,theme:o,borderOnly:n}),hoveredBoxShadow:"light"===o.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):o.homeShadow.card.hovered}}},681810:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(867772).Ay)},701751:(e,t,o)=>{o.d(t,{p:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.94 14.91 15.66",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 1 0 1.1 0z"}),(0,n.jsx)("path",{d:"M15.4 1.95a3.48 3.48 0 0 0-3.48 3.48v1.92H6.4a2.425 2.425 0 0 0-2.425 2.425v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.425 2.425 0 0 0 13.6 7.35h-.43V5.43a2.23 2.23 0 1 1 4.46 0v2.095a.625.625 0 1 0 1.25 0V5.43a3.48 3.48 0 0 0-3.48-3.48M5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},i=(0,o(340498).wt)("lockOpen",r)},704073:(e,t,o)=>{o.d(t,{P:()=>f});var n=o(296540),r=()=>o(2143),i=()=>o(780054),a=()=>o(756279),s=(o(898992),o(354520),()=>o(56366)),l=()=>o(17090);const d=85,c=50,u="#000";function p(e,t,o,n){if(!e)return g(t,o,"bottom");const{clientHeight:r,scrollHeight:i,scrollTop:a}=e;if(i<=r+n)return;let s,l;if(a<i-r-n)l=g(t,o,"bottom");else{l=g(t,o+(100-o)*(n-(i-r-a))/n,"bottom")}if(0===a)s=void 0;else{const e=1-Math.min(a/n,1);s=g(t,Math.max(100*e,o),"top")}return[s,l].filter(Boolean).join(", ")}function g(e,t,o){return`linear-gradient(${"top"===o?"0deg":"180deg"}, ${e} ${t}%, transparent)`}var m=o(474848);function f(e){let{children:t,style:o,type:g,disabled:f}=e;const h=i().A.isMobile,{style:v,onScroll:y,scrollerStore:S}=function(){let{gradientPercentage:e=d,scrollThreshold:t=c}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[o]=(0,n.useState)(new(l().A)),{node:r,clientRect:i}=(0,s().K8)((()=>{var e;return{node:null===(e=o.state.element)||void 0===e?void 0:e.deref(),clientRect:o.state.clientRect}}),[o]),[a,g]=(0,n.useState)(p(r,u,e,t));return(0,n.useEffect)((()=>{g(p(r,u,e,t))}),[e,r,t,i]),{style:{maskImage:a,maskComposite:"intersect"},onScroll:(0,n.useCallback)((()=>{g(p(r,u,e,t))}),[e,r,t]),scrollerStore:o}}();return h||f?(0,m.jsx)(m.Fragment,{children:t}):(0,m.jsx)(r().H,{type:g??a().A.Y,style:{...v,...o},onScroll:y,store:S,children:t})}},735695:(e,t,o)=>{o.d(t,{Ay:()=>P,iZ:()=>C,vE:()=>A});var n=o(296540),r=()=>o(804773),i=()=>o(401497),a=()=>o(149375),s=()=>o(66913),l=()=>o(959013),d=()=>o(284371),c=()=>o(686526),u=()=>o(704152),p=()=>o(285790),g=()=>o(928600),m=()=>o(480095),f=()=>o(554509),h=()=>o(780054),v=()=>o(722872),y=()=>o(253579),S=()=>o(255824),b=o(474848);const x=(0,l().YK)({back:{defaultMessage:"Back",id:"collectionsSettingsMenu.back"}}),A=290,C=400;function w(e){let{children:t,title:o,desktopTitleType:n,settingsStackLength:r,handleClose:c,handleBackArrowClick:g,hideDesktopHeader:m,hasBackStack:h}=e;const v=(0,S().a)(),y=(0,l().tz)(),A=(0,i().IS)((e=>({hiddenDesktopHeaderDiv:{height:0},nonHiddenDesktopHeaderDiv:{display:"flex",alignItems:v?"top":"center",padding:v?"0px 14px 6px 14px":"14px 16px 6px 16px",height:v?void 0:42},arrowButton:{marginRight:8,marginLeft:-2,height:22},arrowIcon:{width:16,height:16},title:{flexGrow:1,fontWeight:v?d().Wy.medium:d().Wy.semibold,fontSize:v?16:14,lineHeight:v?"24px":void 0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},closeButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:18,height:18,flexShrink:0},closeButtonHover:{background:e.buttonPressedBackground},closeIcon:{width:14,fill:e.text.secondary}})),[v]),C=!v;return(0,b.jsxs)(b.Fragment,{children:[m?(0,b.jsx)("div",{style:A.hiddenDesktopHeaderDiv}):(0,b.jsxs)("div",{style:A.nonHiddenDesktopHeaderDiv,children:[(r>1||h)&&(0,b.jsx)(p().A,{icon:a().v,style:A.arrowButton,iconStyle:A.arrowIcon,onClick:g,ariaLabel:y.formatMessage(x.back)}),"sectionHeader"===n?(0,b.jsx)(f().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",customStyles:{flexGrow:1},children:o}):(0,b.jsx)("span",{style:A.title,children:o}),C&&(0,b.jsx)(u().A,{onClick:c,style:A.closeButton,hoveredStyle:A.closeButtonHover,children:(0,s().V)(A.closeIcon)})]}),t]})}function k(e,t){let{children:i,footer:a,header:s,unconstrainedWidth:l,desktopWidth:d,title:u,desktopTitleType:p,collectionSettingsStore:f,fullHeight:x,hideDesktopHeader:C,menuScrollerStyle:k,innerContentWrapperStyle:P,disableScroller:M,handleBackArrowClick:I,hasBackStack:T,handleClose:j}=e;const D=(0,o(175116).Ks)(),_=(0,v().Tf)(),B=(0,S().a)(),{currentTab:R,settingsStackLength:V,hideHeader:E}=(0,o(56366).K8)((()=>{const e=f.state;return{currentTab:(0,o(940371).S)(f),settingsStackLength:e.stack.length,hideHeader:e.hideSettingsHeader}}),[f]),L=(0,n.useCallback)((()=>{var e;I?I():c().yl({collectionSettingsStore:f,keepPreviousRef:"form_editor"===(null==D||null===(e=D.collectionViewStore())||void 0===e?void 0:e.getType())})}),[I,f,D]),W=(0,n.useCallback)((e=>{j?j(e):c().os({collectionSettingsStore:f})}),[j,f]),H=(0,n.useCallback)((e=>{(0,y().rW)(e.target)||(0,y().iX)(e.target)||(0,y().u2)(e.target)||o(263711).g.state.isOpen||W(e)}),[W]);if(!R)return null;let O;if(h().A.isMobile)O={disableScroller:M,menuType:v().gu.Modal,title:u,left:V>1?(0,b.jsx)(m().MobileModalBackButton,{}):void 0,onClickLeft:V>1?L:void 0,scrollerStyle:k,innerRef:t,right:_?void 0:(0,b.jsx)(m().DoneMenuText,{}),onClickRight:_?void 0:W};else{const e=l||d?void 0:B?280:A;O={disableScroller:M,menuType:v().gu.Popup,minWidth:B?280:A,width:d,maxHeight:x?"100%":"80vh",...e&&{maxWidth:e},onClickOutside:H,scrollerStyle:{flexGrow:0,...k},header:!E&&(0,b.jsx)(w,{settingsStackLength:V,handleClose:W,handleBackArrowClick:L,hasBackStack:T,hideDesktopHeader:C,title:u,desktopTitleType:p,children:s}),paddingTop:E?6:0,footer:a,innerRef:t}}const U=(0,b.jsxs)(b.Fragment,{children:[h().A.isMobile&&s,i,h().A.isMobile&&a]});return x?(0,b.jsx)(r().Y,{direction:"vertical",children:(0,b.jsx)(g().A,{...O,children:U})}):(0,b.jsx)(o(297872).A,{capture:!0,allowMobileAutoScroll:!0,allowEsc:!0,render:e=>(0,b.jsx)(r().Y,{direction:"vertical",children:(0,b.jsx)(g().A,{...O,...e,children:(0,b.jsx)("div",{style:P,children:U})})})})}const P=(0,n.forwardRef)(k)},747671:(e,t,o)=>{o.d(t,{Q:()=>n,a:()=>r});let n=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});class r extends(()=>o(757695))().Store{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}}},756114:(e,t,o)=>{o.d(t,{D:()=>n});function n(e,t){t.route.name;return!1}},801678:(e,t,o)=>{o.d(t,{A:()=>m});var n=o(296540),r=()=>o(662303),i=()=>o(56366),a=()=>o(959013),s=()=>o(381349),l=()=>o(496603),d=()=>o(284371),c=()=>o(720665),u=()=>o(145214),p=o(474848);const g={isRepositioning:!1};const m=function(e){const t=(0,n.useRef)(null),r=(0,o(484714).v3)(),[a,s]=(0,n.useState)(g),d=(0,n.useCallback)((()=>{s(g)}),[]),{renderControl:u,onFlushTemporaryPosition:m,style:h,source:v,store:y}=e,{isRepositioning:S,image:b,startDragRenderedPosition:x,startDragImageScreenHeight:A}=a,C=(0,i().K8)((()=>0===o(502438).default.state.stores.length),[]),[w,k]=(0,n.useState)(!1),P=(0,i().uB)(e.mouseStore,o(454305).A),M=(0,i().K8)((()=>P.state.mouseEntered),[P]),I=(0,o(401497).IS)((()=>({dragContainer:{width:"100%",cursor:S?"move":"inherit"},container:{position:"relative",width:"100%",zIndex:1}})),[S]),T=(0,i().K8)((()=>function(e,t,o){return(0,l().Et)(o)?o:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,l().Et)(e))return e}const o=.5;if(t.isCollectionView()){const e=t.getCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,c().pN)(t)?o:t}}const n=t.getFormat(),r=n.page_cover_position;if((0,l().Et)(r))return r;return o}(e,t)}(v,y,a.temporaryPosition)),[a.temporaryPosition,v,y]);(0,n.useEffect)((()=>{const e=e=>{const o=t.current;o&&!o.contains(e.target)&&S&&m({imagePosition:T,reset:()=>{P.reset(),d()}})};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)}),[T,S,P,m,d]),S&&!C&&d();const j=(0,n.useMemo)((()=>(0,l().nF)((e=>{P.setState({...P.state,mouseEntered:!0})}),100)),[P]),D=(0,n.useMemo)((()=>(0,l().sg)((e=>{P.setState({...P.state,mouseEntered:!1})}),100)),[P]),_=(0,n.useCallback)(((e,t)=>{o(778417).IU({environment:r});const n=new Image;n.onload=()=>{s((e=>({...e,isRepositioning:!0,image:n})))},t&&(n.src=t)}),[r]),B=(0,n.useCallback)((e=>{m({imagePosition:T,reset:()=>{d()}})}),[T,m,d]),R=(0,n.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,o(819121).p)(t)&&k(!0)}),[]),V=(0,n.useCallback)((()=>{k(!0)}),[]),E=(0,n.useCallback)((e=>{if(b&&S){const e=t.current;if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/b.width*b.height;s((e=>({...e,startDragImageScreenHeight:t,startDragRenderedPosition:T})))}}}),[b,T,S]),L=(0,n.useCallback)((e=>{if(S){const t=e.diffY/(A||0)+(x||0);s((e=>({...e,temporaryPosition:(0,l().LI)((0,o(40845).A)(t,0,1),4)})))}}),[S,A,x]),W=(0,n.useCallback)((()=>{s((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),H=(0,i().K8)((()=>u({handleRepositionClick:_,handleSavePositionClick:B,handleCancelClick:d,isVisible:M||w||S,isRepositioning:S})),[_,B,w,S,M,u,d]),O=(0,o(79043).A)(Boolean(e.preventClickPropagation));return(0,p.jsxs)("div",{ref:t,onFocus:R,onBlur:V,onMouseEnter:j,onMouseMove:j,onMouseLeave:D,...O,...(0,o(955825).AH)(I.container,h),children:[(0,p.jsx)(o(603820).A,{onDraggableDragStart:E,onDraggableDragMove:L,onDraggableDragEnd:W,onDraggableDragCancel:W,disabled:!S,render:t=>(0,p.jsx)("div",{style:I.dragContainer,...t,children:e.render({imagePosition:T,isRepositioning:S})})}),(0,p.jsx)(f,{small:e.small,isRepositioning:S}),H]})};function f(e){let{small:t,isRepositioning:o}=e;if(t)return null;const n={background:s().Ay.blackWithAlpha(.4),borderRadius:4,color:s().Ay.white,fontSize:12,fontFamily:d().vc(r().locale).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,p.jsx)(u().A,{visible:o,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:n,children:(0,p.jsx)(a().sA,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},867772:(e,t,o)=>{o.d(t,{Ay:()=>l,Gi:()=>i,Wc:()=>n,pF:()=>a,vS:()=>r});const n="loadingLocalImage",r="uploading",i="downloading",a="loaded";class s extends(()=>o(757695))().Store{getInitialState(){return{loadingMode:a}}}const l=s},882262:(e,t,o)=>{o.d(t,{m:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.23 3.23 13.54 13.53",svg:(0,o(474848).jsx)("path",{d:"M4.485 8.86V5.369l4.073 4.073a.625.625 0 0 0 .884-.884L5.369 4.485h3.49a.625.625 0 1 0 0-1.25h-5a.625.625 0 0 0-.624.625v5a.625.625 0 0 0 1.25 0m10.146 6.655-4.07-4.07a.625.625 0 0 1 .884-.884l4.07 4.07V11.14a.625.625 0 1 1 1.25 0v5c0 .345-.28.625-.625.625h-5a.625.625 0 1 1 0-1.25z"})},r=(0,o(340498).wt)("arrowExpandDiagonal",n)},937199:(e,t,o)=>{o.d(t,{LH:()=>i,Op:()=>r,bi:()=>l,sf:()=>s,v$:()=>a});o(16280);var n=o(296540);const r=(0,n.createContext)(null);function i(){const e=(0,n.useContext)(r);if(!e)throw new Error("usePageLayoutEditorContext must be used inside BaseLayoutEditorContext.Provider");return e}function a(){return(0,n.useContext)(r)}r.displayName="BaseLayoutEditorContext";const s=(0,n.createContext)(null);function l(){const e=(0,n.useContext)(s);if(!e)throw new Error("usePageLayoutEditorContext must be used inside PageLayoutEditorContextProvider");return e}s.displayName="PageLayoutEditorContext"},990402:(e,t,o)=>{o.d(t,{m:()=>r});var n=()=>o(46986);function r(e){return("workflow"===e.getType()||e.isCollectionView()&&e.getWorkflowStore())&&e.canEdit()&&!e.isSystemBlock()&&(0,n().re)()}}}]);