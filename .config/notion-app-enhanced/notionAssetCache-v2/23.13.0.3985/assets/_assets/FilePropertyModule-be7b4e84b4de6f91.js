"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[5938],{11356:(e,t,n)=>{n.d(t,{G:()=>o});n(296540);const r={viewBox:"0 0 20 20",fittedViewBox:"2.96 1.99 14.08 15.13",svg:(0,n(474848).jsx)("path",{d:"M7.3 1.995a.55.55 0 1 0 0 1.1h5.4a.55.55 0 0 0 0-1.1zm-2.35 2.8a.55.55 0 0 1 .55-.55h9a.55.55 0 0 1 0 1.1h-9a.55.55 0 0 1-.55-.55m-1.987 3.75c0-1.174.951-2.125 2.125-2.125h9.825c1.174 0 2.125.951 2.125 2.125v6.45a2.125 2.125 0 0 1-2.125 2.125H5.088a2.125 2.125 0 0 1-2.125-2.125zm2.125-.875a.875.875 0 0 0-.875.875v6.45c0 .483.392.875.875.875h9.825a.875.875 0 0 0 .875-.875v-6.45a.875.875 0 0 0-.875-.875z"})},o=(0,n(340498).wt)("stack",r)},300985:(e,t,n)=>{n.d(t,{Z:()=>o});n(296540);const r={viewBox:"0 0 20 20",fittedViewBox:"2.49 2.37 15.01 15.25",svg:(0,n(474848).jsx)("path",{d:"M7.154 3.625h1.23a.625.625 0 1 0 0-1.25h-1.23A2.625 2.625 0 0 0 4.529 5v2.069c0 .9-.508 1.722-1.313 2.124l-.317.159a.725.725 0 0 0 0 1.297l.317.158a2.38 2.38 0 0 1 1.313 2.124V15a2.625 2.625 0 0 0 2.625 2.625h1.23a.625.625 0 1 0 0-1.25h-1.23c-.76 0-1.375-.616-1.375-1.375v-2.069c0-1.17-.564-2.256-1.492-2.931a3.63 3.63 0 0 0 1.492-2.931V5c0-.76.615-1.375 1.375-1.375m5.692 12.75h-1.23a.625.625 0 1 0 0 1.25h1.23A2.625 2.625 0 0 0 15.471 15v-2.069c0-.9.508-1.722 1.313-2.124l.317-.159a.725.725 0 0 0 0-1.296l-.317-.159a2.38 2.38 0 0 1-1.313-2.124V5a2.625 2.625 0 0 0-2.625-2.625h-1.23a.625.625 0 1 0 0 1.25h1.23c.76 0 1.375.616 1.375 1.375v2.069c0 1.17.564 2.256 1.492 2.931a3.63 3.63 0 0 0-1.492 2.931V15c0 .76-.615 1.375-1.375 1.375"})},o=(0,n(340498).wt)("curlyBraces",r)},369767:(e,t,n)=>{n.r(t),n.d(t,{DiscussionFormat:()=>_,DiscussionLocationToAvatarSize:()=>q,anyDiscussionCommentsLoading:()=>W,commentComparator:()=>B,discussionLocationToDiscussionFormat:()=>H,formatFileSize:()=>Q,getAndSortCommentStoresByTime:()=>E,getDiscussions:()=>D,getDiscussionsForSidebar:()=>T,getFirstComment:()=>U,getIcon:()=>M,getLatestRelevantComment:()=>V,getSetOfUsersInDiscussions:()=>K,hasCommentChanged:()=>N,inputIsEmpty:()=>$,isCommentAllEmojis:()=>O,lineClampForCommentCount:()=>L,sortDiscussionStoresByLatestComment:()=>G});n(898992),n(354520),n(581454),n(737550);var r=()=>n(764880),o=(n(296540),()=>n(340498)),i=n(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"1.79 1.87 16.47 15.5",svg:(0,i.jsx)("path",{d:"M9.66 1.977a.63.63 0 0 1 .785.08l2.647 2.647.08.097a.626.626 0 0 1-.866.867l-.098-.08-1.579-1.58v6.95l6.018 3.475-.577-2.155a.626.626 0 0 1 1.207-.324l.97 3.615.019.121a.625.625 0 0 1-.462.645l-3.614.967a.625.625 0 0 1-.325-1.207l2.158-.579-6.015-3.472-5.97 3.55 2.165.55.118.043a.626.626 0 0 1-.301 1.188l-.125-.02-3.627-.922a.625.625 0 0 1-.451-.76l.921-3.626a.625.625 0 0 1 1.212.308L3.4 14.52l5.98-3.554V4.008L7.8 5.588l-.099.08a.626.626 0 0 1-.786-.964l2.647-2.647z"})},l=(0,o().wt)("arrow3D",a);var s=()=>n(300985),d=()=>n(575157);const u={viewBox:"0 0 20 20",fittedViewBox:"4.12 2.37 11.75 15.25",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M9.134 5.001c-.236-.667-1.18-.667-1.415 0L6.28 9.084a.5.5 0 1 0 .943.332l.276-.784h1.857l.276.784a.5.5 0 0 0 .944-.332zm-.708 1.001.576 1.63h-1.15zM10.75 5a.5.5 0 0 0 0 1h2.5a.5.5 0 0 0 0-1zm.313 3a.5.5 0 0 1 .5-.5h1.687a.5.5 0 0 1 0 1h-1.687a.5.5 0 0 1-.5-.5M6.75 10.708a.5.5 0 0 0-.5.5v3.715a.5.5 0 0 0 .845.362l1.101-1.05a.25.25 0 0 1 .347.003l.675.657a.5.5 0 0 0 .734-.038l1.189-1.435a.25.25 0 0 1 .375-.01l1.368 1.467a.5.5 0 0 0 .866-.341v-3.33a.5.5 0 0 0-.5-.5zm2.554 2.435a.696.696 0 1 1 0-1.393.696.696 0 0 1 0 1.393"}),(0,i.jsx)("path",{d:"M6.25 2.375A2.125 2.125 0 0 0 4.125 4.5v11c0 1.174.951 2.125 2.125 2.125h7.5a2.125 2.125 0 0 0 2.125-2.125v-11a2.125 2.125 0 0 0-2.125-2.125zM5.375 4.5c0-.483.392-.875.875-.875h7.5c.483 0 .875.392.875.875v11a.875.875 0 0 1-.875.875h-7.5a.875.875 0 0 1-.875-.875z"})]})},c=(0,o().wt)("docRichText",u);var p=()=>n(177148),m=()=>n(11356),g=()=>n(435644),h=()=>n(421559),f=()=>n(973231),y=()=>n(578717),v=()=>n(916813),w=()=>n(630417),x=()=>n(811563),b=()=>n(919709),C=()=>n(496603),S=()=>n(534177),P=()=>n(939768),k=()=>n(299545),j=()=>n(842677);const I=()=>n(43371),F={doc:d().D,docx:d().D,pages:d().D,md:d().D,txt:d().D,rtf:d().D,xls:h().T,xlsx:h().T,csv:h().T,tsv:h().T,ods:h().T,pdf:c,pptx:m().G,ppt:m().G,zip:y().p,br:y().p,bz2:y().p,gz:y().p,"7z":y().p,dmg:y().p,pkg:y().p,jar:y().p,rar:y().p,tar:y().p,xar:y().p,stl:l,obj:l,fbx:l,amf:l,iges:l,mp3:f().$,m4a:f().$,wav:f().$,aac:f().$,ogg:f().$,flac:f().$,alac:f().$,wma:f().$,exe:n(465505).P,otf:g().a,ttf:g().a,woff:g().a,eof:g().a,py:s().Z,java:s().Z,js:s().Z,ts:s().Z,tsx:s().Z,c:s().Z,h:s().Z,cpp:s().Z,go:s().Z,rs:s().Z,css:s().Z,php:s().Z,swift:s().Z,kt:s().Z,lua:s().Z,m:s().Z,bash_profile:s().Z,bashrc:s().Z,zshrc:s().Z,vimrc:s().Z,vim:s().Z};function M(e){const t=function(e){if(!e)return"";const{pathname:t}=P().qg(e);if(!t)return"";const n=t.split(".");return n[n.length-1]}(e).toLowerCase();return F[t]??p().Y}let _=function(e){return e[e.Menu=0]="Menu",e[e.Page=1]="Page",e[e.Sidebar=2]="Sidebar",e[e.Margin=3]="Margin",e[e.Unfurl=4]="Unfurl",e}({});function V(e){let{recordStore:t,currentUserId:n,timestamp:r}=e;return Z({recordStore:t,currentUserId:n,timestamp:r})||U(t)}const A=6,z=3;function L(e){return e>1?z:A}function D(e){return e?k().Bw(e,{recursivelyLoadAllDiscussions:!0,includeLoadingDiscussions:!0}):[]}function T(e){let{blockStore:t,currentUserId:n,ignoreAfterTime:r}=e;if(!t)return[];return k().Bw(t,{recursivelyLoadAllDiscussions:!0,includeLoadingDiscussions:!0,includePropertyDiscussions:!0}).sort(((e,t)=>{const o=V({recordStore:e,currentUserId:n,timestamp:r}),i=V({recordStore:t,currentUserId:n,timestamp:r});return null!=o&&o.isDefined()?null!=i&&i.isDefined()?-(o.getCreatedTime()-i.getCreatedTime()):1:-1}))}function B(e,t){return e&&e.isDefined()?t&&t.isDefined()?e.getCreatedTime()-t.getCreatedTime():1:-1}function E(e){return k().wc(e).sort(((e,t)=>B(e,t)))}function U(e){return E(e)[0]}function R(e){return Z({recordStore:e,currentUserId:void 0})}function Z(e){let{recordStore:t,currentUserId:n,timestamp:r}=e;const o=k().wc(t).filter((e=>r?e.isDefined()&&e.getCreatedTime()<r:e.isDefined())).sort(((e,t)=>B(e,t)));return o[o.length-1]}function G(e){return e.sort(((e,t)=>B(R(e),R(t))))}function $(e){const t=e.state.textStore.getValue(),n=(e.state.files??[]).length>0,r=t&&t.length>0;return!n&&!r}function N(e,t){const n=e.state.textStore.getValue(),r=e.state.files;if(!t)return n&&0!==n.length||r&&r.length>0;const o=k().gp(t).getValue();return!C().n4(o,n)||function(e,t){const n=e.state.files,r=k().dd(t);if(r.length!==n.length)return!0;return r.some(((e,t)=>e.id!==n[t].id))}(e,t)}function W(e){if(e.some((e=>!e.isReady())))return!0;return!!e.map((e=>k().wc(e))).flat().some((e=>!e.isReady()||!e.getCreatedTime()))}function H(e){switch(e){case"block_menu":case"ai_reject_all_suggestions":case"reply_menu_mentions_comments":case"reply_menu_all_updates":case"reply_menu_archive":case"reply_menu_updates_sidebar":case"updates_menu_mentions_comments":case"updates_menu_all_updates":case"updates_menu_archive":return _.Menu;case"page_discussion":case"post_top_level_discussion":return _.Page;case"updates_sidebar":return _.Sidebar;case"margin_comments":return _.Margin;case"comment_unfurl":return _.Unfurl;default:(0,S().HB)(e)}}function K(e){return C().hS(C().qI(e,(e=>k().wc(e).map((e=>({store:e,pointer:e.getCreatedByPointer()}))))),(e=>{var t;return null===(t=e.pointer)||void 0===t?void 0:t.id})).filter((e=>(0,S().O9)(e.pointer))).map((e=>{let{store:t,pointer:n}=e;return j().RecordStores.createChildStore(t,n)})).map((e=>e.getModel())).filter(S().O9).map((e=>e instanceof x().F?(0,r().A7)(e):e instanceof w().Hj?(0,r().qt)(e):e instanceof v().T?(0,r().Mq)(e):void(0,S().HB)(e))).filter(S().O9)}function O(e){for(const n of e){if(!n.length)return!1;if(!n[1]||!n[1].some(b().nNl)){var t;const e=n[0].trim(),r=I()();if((null===(t=e.match(r))||void 0===t?void 0:t.join(""))!==e)return!1}}return!0}const q={updates_menu_all_updates:28,updates_menu_mentions_comments:28,updates_menu_archive:28,block_menu:20,reply_menu_all_updates:20,reply_menu_mentions_comments:20,reply_menu_archive:20,reply_menu_updates_sidebar:20,page_discussion:20,post_top_level_discussion:20,updates_sidebar:23,margin_comments:20,comment_unfurl:32,ai_reject_all_suggestions:28};function Q(e){return((null==e?void 0:e.match(/[0-9.]+|[a-z]+/gi))??[]).join(" ")}},464699:(e,t,n)=>{n.d(t,{b:()=>o});n(296540);var r=n(474848);const o=(0,n(340498).wt)("plusThick",{viewBox:"0 0 14 14",svg:(0,r.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})},465505:(e,t,n)=>{n.d(t,{P:()=>o});n(296540);const r={viewBox:"0 0 20 20",fittedViewBox:"2.72 1.77 14.55 16.45",svg:(0,n(474848).jsx)("path",{d:"M10.302 1.853a.63.63 0 0 0-.604 0l-6.65 3.669c-.2.11-.323.32-.323.547v7.862c0 .228.124.437.323.547l6.65 3.67a.63.63 0 0 0 .604 0l6.65-3.67c.2-.11.323-.32.323-.547V6.069a.63.63 0 0 0-.323-.547zM3.975 7.127l5.4 2.98v6.434l-5.4-2.98zm6.65 9.414v-6.434l5.4-2.98v6.435zM15.356 6.07 10 9.024 4.644 6.069 10 3.114z"})},o=(0,n(340498).wt)("cube",r)},524461:(e,t,n)=>{n.d(t,{FF:()=>c,Pe:()=>s,Ru:()=>u,pZ:()=>d});n(16280);var r=n(296540),o=()=>n(892632),i=()=>n(518888);function a(e,t){return`${e}-${t}`}function l(e,t,n){return`${a(e,t)}-${n}`}function s(e,t,n){const r=a(t,n);return e.startsWith(r)}function d(e,t){return e.startsWith(t)}function u(e){const{blockStore:t,propertyId:n,environment:r,saveUploadedFile:o}=e;return p({blockStore:t,propertyId:n,environment:r,saveUploadedFile:o})}function c(e){const{blockStore:t,propertyId:n,environment:r,onSingleFileStartCallback:o,onSingleFileErrorCallback:i,formMetadata:a}=e,{spaceId:l,formId:s}=a,d=p({blockStore:t,propertyId:n,environment:r,onSingleFileStartCallback:o,onSingleFileErrorCallback:i,formMetadata:{spaceId:l??"",formId:s??""}});return l&&s?d:e=>{throw new Error("spaceId and formId are not defined")}}function p(e){const{blockStore:t,propertyId:n,environment:a,onSingleFileStartCallback:s,onSingleFileErrorCallback:d,saveUploadedFile:u,formMetadata:c}=e;return(0,r.useCallback)((e=>{const r=(e,r,o)=>{const a=l(t.pointer.id,n,r);i().default.setKeyState(a,{progressPercent:0,file:e.file,name:e.name,size:e.size}),s&&o&&s({...o,globalFileUploadStoreKey:a})},p=(e,r)=>{let{progressPercent:o,progressText:a}=e;const s=l(t.pointer.id,n,r),d=i().default.getKeyState(s);if(!d)throw new Error("uploading file cannot be found in global file upload state");i().default.setKeyState(s,{...d,progressPercent:o,progressText:a})},m=(e,r)=>{const o=l(t.pointer.id,n,r),a=i().default.getKeyState(o);if(i().default.setKeyState(o,void 0),!a||null==a||!a.name)throw new Error("completed file upload cannot be found in global file upload state");u&&u({name:null==a?void 0:a.name,url:e},void 0)},g=(e,r)=>{const o=l(t.pointer.id,n,r);i().default.setKeyState(o,void 0),d&&d(o)},h=c?{environment:a,files:e,bucket:"temporary",formMetadata:c,onSingleFileStart:r,onSingleFileProgress:p,onSingleFileComplete:m,onSingleFileError:g}:{environment:a,files:e,bucket:"secure",record:t.pointer,isFileBlock:!1,onSingleFileStart:r,onSingleFileProgress:p,onSingleFileComplete:m,onSingleFileError:g};o().Zn(h)}),[u,t.pointer,a,n,c,s,d])}},637360:(e,t,n)=>{n.r(t),n.d(t,{FilePropertyModule:()=>se});n(16280),n(898992),n(354520),n(581454);var r=n(296540),o=()=>n(484714),i=()=>n(56366),a=()=>n(401497),l=()=>n(713998),s=()=>n(522419),d=()=>n(496603),u=()=>n(534177),c=()=>n(235116),p=()=>n(524461),m=()=>n(817942),g=()=>n(518888),h=()=>n(859118);const f={height:150,width:100},y={height:100,width:150},v={height:130,width:130};let w=function(e){return e.GridPortraitCard="grid-portrait-card",e.GridLandscapeCard="grid-landscape-card",e.GridSquareCard="grid-square-card",e}({});n(944114);var x=()=>n(402014),b=()=>n(304740),C=()=>n(812318),S=()=>n(173019),P=()=>n(464699),k=()=>n(735384),j=()=>n(365683),I=()=>n(959013),F=()=>n(381349),M=()=>n(284371),_=()=>n(383594),V=()=>n(369767),A=()=>n(722872),z=()=>n(463830),L=()=>n(496889),D=()=>n(234359),T=()=>n(704152),B=()=>n(760217),E=()=>n(406699),U=()=>n(805751),R=()=>n(623580),Z=()=>n(331542),G=()=>n(928600),$=()=>n(939740),N=()=>n(162010),W=()=>n(360083),H=()=>n(89924),K=()=>n(453101),O=()=>n(192264),q=()=>n(512397),Q=n(474848);const Y=22;function J(e,t){let n,r;return t===w.GridPortraitCard?(n=f.height,r=f.width+12):t===w.GridLandscapeCard?(n=y.height,r=y.width+20):t===w.GridSquareCard?(n=v.height,r=v.width):(0,u().HB)(t),{valueContainer:{minHeight:n,maxHeight:n,height:n,width:r,maxWidth:"100%",position:"relative",border:"1px solid",overflow:"hidden",borderRadius:8,borderColor:e.stroke.secondary,fontSize:M().J.UIRegular.desktop},nonPreviewableValueInnerContainer:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",rowGap:12,cursor:"pointer"},addValueInnerContainer:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},addValueIcon:{width:23,height:23,color:e.icon.tertiary},uploadingValueInnerContainer:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",rowGap:12},uploadingProgress:{color:e.icon.tertiary},uploadingFileName:{maxWidth:"90%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},nonPreviewableValueIconContainer:{backgroundColor:e.tint.regular,borderRadius:6,minWidth:32,height:32,display:"flex",justifyContent:"center",alignItems:"center"},nonPreviewableValueIcon:{height:24,width:24,fill:e.icon.primary},nonPreviewableValueText:{maxWidth:"90%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},previewableImagePropertyValueContainer:{width:"100%",height:"100%",display:"flex",justifyContent:"center",cursor:"zoom-in"},previewableImagePropertyImageHidden:{height:"100%",objectFit:"contain",position:"absolute",visibility:"hidden"},previewableImagePropertyImage:{width:"100%",height:"100%",objectFit:"cover"},menuButton:{width:Y,height:Y},menuButtonIcon:{fill:F().Tj.white,width:14,height:14},renameInputContainer:{paddingTop:4,paddingBottom:4,paddingLeft:8,paddingRight:8,display:"flex",justifyContent:"center",alignItems:"center"}}}function X(e){const{size:t,filePropertyLink:n}=e,i=(0,o().Y0)(),[l,s]=(0,r.useState)(!1),u=(0,r.createRef)(),c=(0,a().IS)((e=>J(e,t)),[t]),p=(0,r.useCallback)((e=>{(0,x().SQ)({event:e,context:x().y$.Click,callback:d().lQ})}),[]);let m=(0,Q.jsx)(ie,{...e});return(0,b().rS)(n)&&(m=(0,Q.jsx)(ae,{...e})),(0,Q.jsxs)("div",{ref:u,style:c.valueContainer,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),onClick:p,children:[m,(l||i.isMobile)&&(0,Q.jsx)(ne,{...e,onCloseActionMenu:()=>s(!1)})]})}function ee(e){const{size:t,uploadingFile:n}=e,o=(0,a().IS)((e=>J(e,t)),[t]),i=(0,r.useCallback)((e=>{(0,x().SQ)({event:e,context:x().y$.Click,callback:d().lQ})}),[]);return(0,Q.jsx)("div",{style:o.valueContainer,onClick:i,children:(0,Q.jsxs)("div",{style:o.uploadingValueInnerContainer,children:[(0,Q.jsx)(N().C,{style:o.uploadingProgress,size:23,percentage:n.progressPercent??0}),(0,Q.jsx)("div",{style:o.uploadingFileName,children:n.name})]})})}function te(e){const{isLoading:t,uploadFile:n,isEmpty:i,addEmbedFile:l}=e,s=(0,o().v3)(),d=(0,I().tz)(),u=!t,c=(0,r.useMemo)((()=>[{type:"file",title:d.formatMessage({defaultMessage:"File",id:"FilePropertyModuleValue.FilePropertyModuleAddValue.mediaMenuTabs.file"}),fileUpload:!0,imageUpload:!1,videoUpload:!1,onUpload:e=>{n(e[0]),_().I()}},{type:"embed",onChange:e=>{l(e),_().I()}}]),[l,d,n]),p=(0,r.useCallback)((e=>{u&&_().W(s,{originRect:e.currentTarget.getBoundingClientRect(),originGap:3,title:d.formatMessage({id:"FilePropertyModuleValue.FilePropertyModuleAddValue.mediaActionsMenu.show",defaultMessage:"File"}),currentTab:"file",tabs:c,isSmallWidth:!0})}),[s,d,u,c]),m=(0,a().IS)((t=>J(t,e.size)),[e.size]),{baseStyles:g}=(0,r.useContext)(D().L8),f=e.isLoading?(0,Q.jsx)(Z().A,{legacySize:23}):(0,P().b)(m.addValueIcon);return(0,Q.jsx)(T().A,{style:i?g.emptyButtonStyle:m.valueContainer,onClick:p,disabled:!u,children:i?(0,Q.jsx)(h().ao,{}):(0,Q.jsx)("div",{style:m.addValueInnerContainer,children:f})})}function ne(e){const t=(0,i().uB)(void 0,z().A),n=(0,o().Y0)(),l=(0,o().v3)(),[s,d]=(0,r.useState)(!1),u=(0,O().nE)({environment:l,visible:!s,height:Y}),c=(0,a().IS)((t=>J(t,e.size)),[e.size]);return(0,Q.jsx)(E().Ay,{popupType:n.isMobile?E().z7.SlideUp:E().z7.Popup,placementToOrigin:E().sx.Bottom,alignmentToOrigin:E().yP.Start,buttonPopupStore:t,onClick:()=>d(!0),onClose:e.onCloseActionMenu,renderOrigin:e=>(0,Q.jsx)("div",{style:u,children:(0,Q.jsx)(L().X,{...e,hoveredStyle:K().t9,fadeIn:!1,style:c.menuButton,iconStyle:c.menuButtonIcon,ariaLabel:"more"})}),render:t=>(0,Q.jsx)(re,{...e,handleClose:t.close})})}function re(e){const{handleClose:t,deleteFile:n,viewFile:i,downloadFile:a,canEdit:l}=e,s=(0,o().Y0)(),[d,u]=(0,r.useState)(!1),c={width:18,height:18},p=[{key:"view-original",action:i,render:e=>(0,Q.jsx)(B().A,{...e,title:(0,Q.jsx)(I().sA,{defaultMessage:"View original",id:"FilePropertyModuleValue.PropertyValuePopoverMenu.viewOriginal"}),icon:(0,j().H)(c)})},{key:"download-file",action:a,render:e=>(0,Q.jsx)(B().A,{...e,title:(0,Q.jsx)(I().sA,{defaultMessage:"Download",id:"FilePropertyModuleValue.PropertyValuePopoverMenu.downloadFile"}),icon:(0,C().k)(c)})}];l&&p.push({key:"rename",action:()=>{u(!0)},render:e=>(0,Q.jsx)(B().A,{...e,title:(0,Q.jsx)(I().sA,{defaultMessage:"Rename",id:"FilePropertyModuleValue.PropertyValuePopoverMenu.Rename"}),icon:(0,S().r)(c)})},{key:"delete",action:n,render:e=>(0,Q.jsx)(B().A,{...e,title:(0,Q.jsx)(I().sA,{defaultMessage:"Delete",id:"FilePropertyModuleValue.PropertyValuePopoverMenu.delete"}),icon:(0,k().I)(c)})});const m=[{key:"actions",render:e=>(0,Q.jsx)(H().A,{...e}),items:p}];return d?(0,Q.jsx)(oe,{...e}):(0,Q.jsx)(G().A,{menuType:s.isMobile?A().gu.ActionSheet:A().gu.Popup,width:200,children:(0,Q.jsx)($().Ay,{type:$().Oh.Vertical,onAccept:e=>{"rename"!==e.key&&t()},sections:m,initialFocus:0})})}function oe(e){let{handleClose:t,renameFile:n,filePropertyLink:o,size:i}=e;const[l,d]=(0,r.useState)(o.name),u=(0,r.useCallback)((e=>{const t=e.target.value;d(t);const r=s().SB({title:t,source:o.url});n(r)}),[o.url,n]),c=(0,a().IS)((e=>J(e,i)),[i]);return(0,Q.jsx)(U().A,{debugName:"FileProperty",capture:!0,allowUndo:!0,allowEsc:!0,allowTabUntab:!0,children:(0,Q.jsx)(G().A,{menuType:A().gu.Popup,width:180,children:(0,Q.jsx)("div",{style:c.renameInputContainer,children:(0,Q.jsx)(R().A,{focusInitial:!0,selectAll:!0,value:l,placeholder:"foobar",onChange:u,onSubmit:t})})})})}function ie(e){const{size:t,filePropertyLink:n}=e,r=(0,V().getIcon)(n.url),o=(0,a().IS)((e=>J(e,t)),[t]);return(0,Q.jsxs)("div",{style:o.nonPreviewableValueInnerContainer,onClick:()=>e.downloadFile(),children:[(0,Q.jsx)("div",{style:o.nonPreviewableValueIconContainer,children:r(o.nonPreviewableValueIcon)}),(0,Q.jsx)("div",{style:o.nonPreviewableValueText,children:n.name})]})}function ae(e){const{size:t,filePropertyLink:n,blockStore:i}=e,l=(0,a().IS)((e=>J(e,t)),[t]),s=(0,r.useRef)(null),d=(0,o().v3)(),u=(0,r.useCallback)(((e,t)=>{if(t){const e=(0,q().T)({imageRef:s,url:n.url,blockStore:i,environment:d});return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)("img",{src:t,style:l.previewableImagePropertyImageHidden,ref:s}),(0,Q.jsx)("img",{src:t,style:l.previewableImagePropertyImage,onClick:e})]})}}),[i,d,n.url,l.previewableImagePropertyImage,l.previewableImagePropertyImageHidden]);return(0,Q.jsx)("div",{style:l.previewableImagePropertyValueContainer,children:(0,Q.jsx)(W().A,{url:n.url,isAuthenticated:!0,permissionRecord:i.pointer,render:u,width:200})})}function le(e,t){const n=e.getPropertyValue(t);return l().pJ(n)}const se=r.memo((function(e){const{store:t,property:a,propertyModule:u}=e;if(u&&!(0,n(778781).K9)(u))throw new Error("FilePropertyModule can only be used with file property modules");const m=(0,o().v3)(),h=(0,n(255824).a)(),f="landscape"===(null==u?void 0:u.style)?w.GridLandscapeCard:"portrait"===(null==u?void 0:u.style)?w.GridPortraitCard:"square"===(null==u?void 0:u.style)?w.GridSquareCard:w.GridLandscapeCard,y=(0,i().K8)((()=>le(t,a)),[t,a]),v=(0,r.useCallback)((e=>{if(e>=y.length)throw new Error(`filePropertyModule cannot get file at index ${e}. Out of bounds index`);return y[e]}),[y]),x=(0,i().K8)((()=>{const e=g().default.getState(),n=(0,d().oE)(Object.keys(e));return(0,d().oE)(n.filter((e=>(0,p().Pe)(e,t.pointer.id,a)))).sort().map((e=>g().default.getKeyState(e)))}),[t.pointer.id,a]),b=(0,r.useCallback)(((e,r)=>{n(751156).createAndCommit({userAction:"FilePropertyModule.updateFiles",environment:m,canUndo:!0,perform:o=>{const i=l().eQ(e);n(319975).R9({environment:m,store:t.getPropertyStore(a),value:i,transaction:o}),r&&n(246826).Bn({store:t,source:r.copiedSource,fileIds:[r.fileId],transaction:o})}})}),[t,m,a]),C=(0,r.useCallback)((e=>{v(e);const n=[...le(t,a)];n.splice(e,1),b(n,void 0)}),[t,v,a,b]),S=(0,r.useCallback)(((e,n)=>{const r=[...le(t,a),e];b(r,n)}),[t,a,b]),P=(0,r.useCallback)(((e,n)=>{v(e);const r=[...le(t,a)];r[e]=n,b(r,void 0)}),[t,v,a,b]),k=(0,r.useCallback)(((e,t)=>{const n={...v(e),name:t};P(e,n)}),[v,P]),j=(0,r.useCallback)((e=>{const n=v(e);c().OG(m,{url:n.url,type:"file",from:"view_original",downloadName:n.name,permissionRecord:t.pointer})}),[t.pointer,m,v]),I=(0,r.useCallback)((e=>{const n=v(e);c().KE(m,{url:n.url,download:!0,downloadName:n.name,permissionRecord:t.pointer})}),[t.pointer,m,v]),F=(0,p().Ru)({blockStore:t,propertyId:a,environment:m,saveUploadedFile:S}),M=(0,r.useCallback)((e=>F([e])),[F]),_=(0,r.useCallback)((e=>{const{originUrl:t,pastedSecureFile:n}=e,r=n?(0,s().xm)(n):t;S({name:r,url:r},n)}),[S]);return(0,Q.jsx)(de,{size:f,propertyId:a,blockStore:t,filePropertyLinks:y,isInPageViewMode:h,deletePropertyValueAtIndex:C,renamePropertyValueAtIndex:k,viewPropertyValueAtIndex:j,downloadPropertyValueAtIndex:I,uploadingFiles:x,uploadFilesAndUpdateProperty:F,uploadFileAndUpdateProperty:M,addEmbedFile:_,updateEntireFilePropertyWithTransaction:b})}));function de(e){const{size:t,blockStore:o,propertyId:l,uploadingFiles:s,filePropertyLinks:c,isInPageViewMode:p,uploadFilesAndUpdateProperty:g,uploadFileAndUpdateProperty:x,addEmbedFile:b,deletePropertyValueAtIndex:C,renamePropertyValueAtIndex:S,viewPropertyValueAtIndex:P,downloadPropertyValueAtIndex:k}=e,j=(0,r.useCallback)((e=>{let{files:t}=e;return g(t)}),[g]),I=(0,a().IS)((e=>({moduleValuesDropzone:{borderRadius:8}})),[]);let F;t===w.GridPortraitCard?F=f.width:t===w.GridLandscapeCard?F=y.width:t===w.GridSquareCard?F=v.width:(0,u().HB)(t);const[M,_]=(0,n(997583).z)(),V=(0,i().K8)((()=>o.canEdit()&&!o.isNonEditableState()),[o]),A=(0,i().K8)((()=>{const e=Math.floor((_+8)/(F+8)),t=(V?1:0)+s.length+c.length;if(t<e)return(0,d().y1)(e-t).map((e=>(0,Q.jsx)("div",{},e)))}),[V,c.length,_,F,s.length]),z=0===s.length?void 0:(0,Q.jsx)(Q.Fragment,{children:s.map((e=>void 0===e?void 0:(0,Q.jsx)(ee,{canEdit:V,blockStore:o,size:t,uploadingFile:e},e.name)))}),L=V||0!==c.length?null:(0,Q.jsx)("div",{style:{fontSize:14,paddingLeft:6},children:(0,Q.jsx)(h().ao,{})}),D=c.map(((e,n)=>(0,Q.jsx)(X,{canEdit:V,size:t,blockStore:o,filePropertyLink:e,deleteFile:()=>{C(n)},renameFile:e=>{S(n,e)},viewFile:()=>{P(n)},downloadFile:()=>k(n)},e.url))),T=!D.length&&!s.length,B=V?(0,Q.jsx)(te,{size:t,uploadFile:x,addEmbedFile:b,isLoading:s.length>0,isEmpty:T}):null,E=T&&!V?(0,Q.jsx)("div",{style:{fontSize:14,paddingLeft:6},children:(0,Q.jsx)(h().ao,{})}):null,U=(0,Q.jsx)("div",{ref:M,children:T?(0,Q.jsxs)(m().WL,{style:{width:"100%"},children:[B,E]}):(0,Q.jsxs)(m().WL,{minWidth:F,style:{gridGap:8,marginTop:p?void 0:6,paddingBottom:p?void 0:6,paddingLeft:6,paddingRight:6,gridTemplateColumns:`repeat(auto-fit, minmax(${F}px, max-content))`},children:[D,z,B,A,L]})});return V?(0,Q.jsx)(n(218557).Tl,{dropTargetKey:`FilePropertyModuleInner-${l}`,canAcceptDrop:e=>{let{isNativeDrag:t}=e;return t},onNativeDrop:j,dropzoneStyle:I.moduleValuesDropzone,shouldShowDropZone:!0,canNativeDropOnto:!0,children:U}):U}},817942:(e,t,n)=>{n.d(t,{A5:()=>p,MR:()=>v,Mx:()=>s,Pb:()=>h,WL:()=>y,hg:()=>d,kZ:()=>f,pv:()=>u,vV:()=>g});n(581454);var r=n.n(n(32485)),o=n(296540),i=()=>n(11048),a=()=>n(455994),l=n(474848);const s=o.forwardRef((function(e,t){const{children:o,type:s,gap:d,withBottomPadding:u,style:c,onMouseDown:p,onClick:m,onDoubleClick:g,onContextMenu:h,suppressMargin:f}=e,y=(0,n(551619).n$)(s),v=(0,n(56366).K8)((()=>a().A.getPanelState("peek").isOpen&&"static_sidebar"===a().A.getPanelState("peek").displayStyle),[]);return(0,l.jsx)(i().A,{name:"PageLayout",children:(0,l.jsx)("div",{className:r()("layout",{"layout-wide":"wide"===s,"layout-wide-right-margin-expanded":"wide-right-margin-expanded"===s,"layout-side-peek":"side-peek"===s,"layout-center-peek":"center-peek"===s&&!v,"layout-center-peek-with-layout-panel":"center-peek"===s&&v,"layout-home":"home"===s,"layout-home-phone":"home-phone"===s,"layout-home-redesign-desktop":"home-redesign-desktop"===s,"layout-form":"form"===s,"layout-form-viewer":"form-viewer"===s,"layout-form-viewer-embed":"form-viewer-embed"===s,"layout-phone":"phone"===s,"layout-tablet":"tablet"===s,"layout-template-preview":"template-preview"===s,"layout-chat":"chat"===s,"layout-layout-editor":"layout-editor"===s,"layout-layout-editor-wide":"layout-editor-wide"===s,"layout-layout-editor-narrow":"layout-editor-narrow"===s,"layout-marketplace":"marketplace"===s,"layout-marketplace-mobile":"marketplace-mobile"===s,"layout-team-home":"team-home"===s,"layout-team-home-mobile":"team-home-mobile"===s,"layout-create-post":"create-post"===s,"layout-fullscreen-ai":"fullscreen-ai"===s,"layout-narrowscreen-ai":"narrowscreen-ai"===s,"layout-presentation-mode":"presentation-mode"===s,"layout-person-profile":"person-profile"===s,"layout-suppress-margin":f}),style:{paddingBottom:u?y:void 0,gap:d,...c},ref:t,onMouseDown:p,onClick:m,onDoubleClick:g,onContextMenu:h,children:o})})})),d="layout-content",u="layout-full",c="layout-margin-right",p="hide-scrollbar",m="layout-column",g=o.forwardRef((function(e,t){return(0,l.jsx)(i().A,{name:"PageLayoutContent",children:(0,l.jsx)("div",{className:r()(d,e.className),style:e.style,ref:t,children:e.children})})}));function h(e){return(0,l.jsx)(i().A,{name:"PageLayoutFull",children:(0,l.jsx)("div",{className:u,style:e.style,children:e.children})})}function f(e){return(0,l.jsx)(i().A,{name:"PageLayoutMarginRight",children:(0,l.jsx)("div",{className:c,style:{...e.style,pointerEvents:"none"},children:e.children})})}function y(e){return(0,l.jsx)(i().A,{name:"PageLayoutColumn",children:(0,l.jsx)("div",{className:r()(m,e.className),style:{"--min-column-width":e.minWidth?`${e.minWidth}px`:"100%",...e.style},children:e.children})})}function v(e){return(0,l.jsx)(i().A,{name:"PageLayoutTwoColumn",children:(0,l.jsxs)(y,{minWidth:e.minWidth,className:e.className,style:e.style,children:[e.left,e.right]})})}},973231:(e,t,n)=>{n.d(t,{$:()=>o});n(296540);const r={viewBox:"0 0 20 20",fittedViewBox:"2.62 2.52 14.76 14.95",svg:(0,n(474848).jsx)("path",{d:"M8.65 2.525c.345 0 .625.28.625.625v13.7a.625.625 0 1 1-1.25 0V3.15c0-.345.28-.625.625-.625M6.575 5.45a.625.625 0 1 0-1.25 0v9.1a.625.625 0 1 0 1.25 0zm-2.7 3.2a.625.625 0 0 0-1.25 0v2.7a.625.625 0 1 0 1.25 0zm10.8-2.7a.625.625 0 1 0-1.25 0v8.1a.625.625 0 0 0 1.25 0zm2.075 2.075c.345 0 .625.28.625.625v2.7a.625.625 0 1 1-1.25 0v-2.7c0-.345.28-.625.625-.625m-4.775-.775a.625.625 0 1 0-1.25 0v5.5a.625.625 0 1 0 1.25 0z"})},o=(0,n(340498).wt)("waveform",r)}}]);