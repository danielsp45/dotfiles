"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[2411,5834,31517,34208],{31902:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=()=>o(959013),i=o(474848);const r=function(e){let{collectionViewName:t,collectionViewType:r}=e;return t?(0,i.jsx)(o(288722).A,{children:t}):"page"===r?(0,i.jsx)(n().sA,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,i.jsx)(n().sA,{...o(403905).X[r]})}},59400:(e,t,o)=>{o.d(t,{nR:()=>d,m$:()=>s,m4:()=>l,Dy:()=>c,FZ:()=>u});o(296540);var n=()=>o(645873),i=o(474848);function r(e){const{shouldShowSpinner:t,collectionSettingsProps:n}=e;return(0,i.jsx)(o(735695).Ay,{collectionSettingsStore:n.collectionSettingsStore,fullHeight:n.fullHeight,hideDesktopHeader:n.hideDesktopHeader,children:t&&(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",overflow:"hidden",paddingBottom:20},children:(0,i.jsx)(o(331542).A,{})})})}const a=new(n().O2)("collectionSettings",(()=>Promise.all([o.e(75134),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(62475),o.e(3151),o.e(98629),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(75078),o.e(25497),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(6912),o.e(30291),o.e(19930),o.e(58102),o.e(26483),o.e(6463),o.e(40925),o.e(282),o.e(61349),o.e(62573),o.e(1440),o.e(63996),o.e(66559),o.e(35986),o.e(92924),o.e(64819),o.e(97339),o.e(55717),o.e(63797),o.e(21367),o.e(22686),o.e(99108)]).then(o.bind(o,409198)))),s=(0,n()._h)(a,(e=>e.CollectionSettings),{renderLoading:(e,t)=>(0,i.jsx)(r,{shouldShowSpinner:e,collectionSettingsProps:t})}),l=(0,n()._h)(a,(e=>e.CollectionSettingsButtonOptions)),c=(0,n()._h)(a,(e=>e.CollectionSettingsPropertyTypeMenuItem)),d=(0,n()._h)(a,(e=>e.CollectionEditButtonAutomationOption)),p=new(n().O2)("TableHeaderPropertyCreationMenu",(()=>Promise.all([o.e(75134),o.e(16471),o.e(58550),o.e(44711),o.e(53321),o.e(90825),o.e(96346),o.e(55373),o.e(37353),o.e(29151),o.e(78191),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(48632),o.e(75078),o.e(25497),o.e(74562),o.e(27711),o.e(4422),o.e(11341),o.e(46414),o.e(95168),o.e(28271),o.e(34877),o.e(36908),o.e(17254),o.e(84185),o.e(32421),o.e(15315),o.e(24587),o.e(78708),o.e(43777),o.e(74752),o.e(91194),o.e(81197),o.e(98659),o.e(20502),o.e(6266),o.e(8184),o.e(83884),o.e(65881),o.e(99809),o.e(93282),o.e(43678),o.e(15019),o.e(90978),o.e(3910),o.e(77213),o.e(61349),o.e(35986),o.e(43935)]).then(o.bind(o,908800)))),u=(0,n()._h)(p,(e=>e.TableHeaderPropertyCreationMenu))},63467:(e,t,o)=>{o.d(t,{y:()=>d});var n=()=>o(637997),i=()=>o(267419);const r={ko:()=>o.e(2268).then(o.bind(o,224434)),es:()=>o.e(95264).then(o.bind(o,196425)),de:()=>o.e(35390).then(o.bind(o,653703)),fr:()=>o.e(3272).then(o.bind(o,94677)),pt:()=>o.e(27315).then(o.bind(o,766869)),zh:()=>o.e(69945).then(o.bind(o,516814)),ja:()=>o.e(77757).then(o.bind(o,824432)),da:()=>o.e(9423).then(o.bind(o,440761)),fi:()=>o.e(59337).then(o.bind(o,462135)),nb:()=>o.e(2040).then(o.bind(o,937314)),nl:()=>o.e(51106).then(o.bind(o,530897)),sv:()=>o.e(53631).then(o.bind(o,895222)),id:()=>o.e(69945).then(o.bind(o,516814)),th:()=>o.e(69945).then(o.bind(o,516814)),vi:()=>o.e(69945).then(o.bind(o,516814))};let a=!1,s=!1;async function l(e){for(const[o,i]of Object.entries(e.emojiLocaleKeywords)){var t;n().fB[o]={...n().fB[o],keywords:[...i,...(null===(t=n().fB[o])||void 0===t?void 0:t.keywords)||[]]}}await i().A.waitUntilLoaded(),i().A.update((t=>{let{emojiByName:o,...n}=t;return{...n,emojiByName:{...o,...e.emojiByName}}}))}async function c(){if(a)return;const[e]=o(662303).locale.split("-");e in r&&(await l(await r[e]()),a=!0)}const d=(0,o(279900).A)((async()=>{await async function(){s||(await l(await o.e(51872).then(o.bind(o,443716))),s=!0)}(),await c()}))},83027:(e,t,o)=>{o.r(t),o.d(t,{getMobilePreviewTemplates:()=>u,getSuggestedTemplatesForSearch:()=>p});o(581454);var n=()=>o(255591),i=()=>o(797573),r=()=>o(435009),a=()=>o(972435),s=()=>o(951340),l=()=>o(174723),c=()=>o(217429),d=()=>o(87726);function p(e){const{persona:t,environment:o}=e,n=a().A.getIntl();return(0,s().DC)(c().default,t).map((e=>{const t=(0,i().B)(e,n);return{name:t.name,icon:e.emoji||e.icon||void 0,onClick:()=>{(e=>{const t=(0,l().Up)({templateGalleryItem:e.rootId});r().oo({environment:o,url:t})})(t)}}}))}function u(e){const t=(0,d().un)(e);return(0,d().Iw)(e).map((e=>{const o=t[e];return{category:e,sectionHeaderMessage:n().bJ[e],templates:o}}))}},87726:(e,t,o)=>{o.d(t,{Hk:()=>m,Iw:()=>f,kc:()=>v,un:()=>y});o(898992),o(354520),o(581454);var n=()=>o(979340),i=()=>o(255591),r=()=>o(228271),a=()=>o(797573),s=()=>o(534177),l=()=>o(780054),c=()=>o(47373),d=()=>o(972435),p=()=>o(951340),u=()=>o(217429);const m=(0,o(959013).YK)({addToTeamspace:{id:"templateGalleryHelpers.addToTeamspace",defaultMessage:"Add to a teamspace"},addToPrivate:{id:"teamPickerButton.addToPrivate",defaultMessage:"Add to Private"}}),g=(0,s().uv)(i().PY);function f(e){let{userPersona:t,subscriptionTier:o}=e;return[...g].sort(((e,i)=>function(e,t,o,i){const r=(0,n().Pg)(i),a=(0,p().NI)({persona:o,defaultToLife:r});if("suggested"===e||"suggested"===t)return"suggested"===e?-1:1;if(a===e||a===t)return a===e?-1:1;if(("life"===e||"life"===t)&&r)return"life"===e?-1:1;if(("student"===e||"student"===t)&&function(e){let{persona:t,isPersonalishPlan:o}=e;const n=o?["other","unfilled","personal","undefined"]:["personal"];return n.includes(t??"undefined")}({persona:o,isPersonalishPlan:r}))return"student"===e?-1:1;return 0}(e,i,t,o)))}function y(e){let{subscriptionTier:t,environment:o}=e;const l=d().A.getIntl(),p=(0,c().WC)({environment:o}),m=p?function(e){return(0,n().Pg)(e)?i().sw:i().ht}(t):i().PY.suggested;return(0,s().s8)(i().PY,((e,t)=>"suggested"===t?m.map((e=>(0,a().B)(e,l))):e.filter((e=>(0,r().vc)(e,u().default))).map((e=>p?(0,r().G2)(e):e)).filter((e=>!m.includes(e))).map((e=>(0,a().B)(e,l)))))}function v(e){return`${l().A.domainBaseUrl}/@${e}`}},89849:(e,t,o)=>{o.r(t),o.d(t,{eyeIcon:()=>r,iconDefinition:()=>i});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"0.96 4.19 18.07 11.62",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10.17 6.694a3.307 3.307 0 0 1 3.135 3.303l-.005.17a3.305 3.305 0 0 1-3.3 3.137l-.17-.004a3.307 3.307 0 0 1-3.132-3.133l-.004-.17A3.307 3.307 0 0 1 10 6.69zm-.17 2.2a1.104 1.104 0 0 0 0 2.207 1.103 1.103 0 0 0 0-2.207"}),(0,n.jsx)("path",{d:"M10 4.194c3.878 0 7.26 2.075 8.862 5.127l.073.163c.126.333.126.7 0 1.033l-.073.163c-1.602 3.052-4.984 5.126-8.862 5.126-3.757 0-7.049-1.946-8.707-4.843l-.156-.283a1.46 1.46 0 0 1 0-1.359l.156-.283C2.95 6.141 6.243 4.194 10 4.194m0 1.251c-3.33 0-6.196 1.724-7.622 4.214l-.134.243a.21.21 0 0 0 0 .197l.134.243c1.426 2.49 4.292 4.214 7.622 4.214 3.437 0 6.38-1.837 7.756-4.457l.018-.048a.2.2 0 0 0 0-.1l-.018-.049C16.38 7.282 13.437 5.445 10 5.445"})]})},r=(0,o(340498).wt)("eye",i)},97789:(e,t,o)=>{o.d(t,{a6:()=>n,dL:()=>a,w$:()=>r,xc:()=>i});const n="notion://projects_app",i="notion://wiki_app",r="notion://docs_app",a="notion://meetings_app"},102586:(e,t,o)=>{o.d(t,{L1:()=>a,MY:()=>c,US:()=>p,Uj:()=>l,if:()=>r,z2:()=>s});o(898992),o(354520);var n=()=>o(755199);const i=100;function r(e,t){return e.prompt===t.prompt&&e.type===t.type}function a(e,t,o){const a=s(t).filter((t=>!r(t,e)));n().mJ({userSettingsStore:t,transaction:o,data:{recent_ai_actions:[e,...a].slice(0,i)}})}function s(e){var t;return(null===(t=e.getModel())||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.recent_ai_actions)??[]}function l(e,t,o){const i=s(t),a=i.filter((t=>!r(t,e)));i.length!==a.length&&n().mJ({userSettingsStore:t,transaction:o,data:{recent_ai_actions:a}})}function c(e){const{clientPrompt:t,additionalContext:o,promptTitle:n}=e,i=null==o?void 0:o.prompt;if(("helpMeWrite"===t.key||"helpMeEdit"===t.key||"helpMeDraft"===t.key)&&i)return{type:"helpMeDraft"===t.key?"helpMeWrite":t.key,prompt:i,promptTitle:n};const r=function(e,t){if(!p(e.key))return;return null==t?void 0:t.topic}(t,o);return r?{type:"helpMeWrite",prompt:r,promptTitle:n}:void 0}const d={brainstormIdeas:!0,blogPost:!0,outline:!0,socialMediaPost:!0,pressRelease:!0,creativeStory:!0,essay:!0,poem:!0,todoList:!0,meetingAgenda:!0,prosConsList:!0,jobDescription:!0,salesEmail:!0,recruitingEmail:!0};function p(e){return d[e]}},104636:(e,t,o)=>{o.d(t,{Is:()=>p,LS:()=>g,NH:()=>f,QA:()=>m,_b:()=>u});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(244641),i=(o(296540),()=>o(390527)),r=()=>o(604995),a=()=>o(959013),s=()=>o(488887),l=()=>o(534177),c=()=>o(108944),d=o(474848);function p(e){const t=c().g7(e)??[],o=[];for(const n of t){if(!("block"===n.table&&!0===n.isTemplate()&&n.getFormat().automation_id&&n.id!==e.id))continue;const t=n.getAutomationStore();if(t){if(!t.isReady())return{automationStoresReady:!1};void 0!==t.getRecurrence()&&t.isDefined()&&o.push(t.getModel())}}return{automationStoresReady:!0,...(0,i().templateAncestorsViolateRecurrenceNesting)(o)}}function u(e){switch(e){case"day":return(0,d.jsx)(a().sA,{defaultMessage:"Repeat daily",id:"database.templatePickerItem.recurrenceFrequency.daily"});case"week":return(0,d.jsx)(a().sA,{defaultMessage:"Repeat weekly",id:"database.templatePickerItem.recurrenceFrequency.weekly"});case"month":return(0,d.jsx)(a().sA,{defaultMessage:"Repeat monthly",id:"database.templatePickerItem.recurrenceFrequency.monthly"});case"year":return(0,d.jsx)(a().sA,{defaultMessage:"Repeat yearly",id:"database.templatePickerItem.recurrenceFrequency.yearly"});default:(0,l().HB)(e)}}function m(){return{start_date:n().c9.local().plus({days:1}).set({hour:0,minute:0,second:0,millisecond:0}).toMillis(),timezone:(0,r().dB)(),hour:0,minute:0,frequency:"day",interval:1}}function g(e){const{recurrence:t,intl:o,leadingPhrase:n}=e;return(0,i().rruleFromRecurrence)({..."month"===t.frequency?{...t,monthly_restriction:void 0}:t,weekdays:void 0,hour:0,minute:0,end_condition:void 0}).toText((e=>{switch(e){case"every":if(void 0===n)return"";if("every"===n)return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.every",defaultMessage:"every"});if("repeat every"===n)return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.repeatEvery",defaultMessage:"repeat every"});(0,l().HB)(n);break;case"day":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.day",defaultMessage:"day"});case"days":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.days",defaultMessage:"days"});case"week":{const e=(null==t?void 0:t.weekdays)||[];return 5===e.length&&(0,s()._)(new Set(e),new Set(["MO","TU","WE","TH","FR"]))?o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.weekday",defaultMessage:"weekday"}):o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.week",defaultMessage:"week"})}case"weeks":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.weeks",defaultMessage:"weeks"});case"month":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.month",defaultMessage:"month"});case"months":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.months",defaultMessage:"months"});case"year":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.year",defaultMessage:"year"});case"years":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.years",defaultMessage:"years"});default:return e.toString()}})).trim()}function f(e){const t=e.getRecurrence();return Boolean(e.isTriggerType("recurrence")&&t&&"disabled_recurrence_ended"===e.getStatus())}},132855:(e,t,o)=>{o.r(t),o.d(t,{arrowInCircleUpFillIcon:()=>i,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o(474848).jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 0 0-15.25 7.625 7.625 0 0 0 0 15.25m3.042-8.07a.625.625 0 0 1-.884 0L10.625 8.02v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 1 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"})},i=(0,o(340498).wt)("arrowInCircleUpFill",n)},178658:(e,t,o)=>{o.r(t),o.d(t,{closeInitialPromptAndEndSession:()=>C,closeInitialPromptButContinueSession:()=>M,openHelpMeWriteGenericPopup:()=>I,retryInitialPrompt:()=>w,showInitialPromptForAIBlock:()=>A,toggleInitialPrompt:()=>P});var n=()=>o(908006),i=()=>o(925193),r=()=>o(206267),a=()=>o(534177),s=()=>o(449506),l=()=>o(725614),c=()=>o(401040),d=()=>o(68465),p=()=>o(231722),u=()=>o(393255),m=()=>o(765957),g=()=>o(430483),f=()=>o(295169),y=()=>o(525569),v=()=>o(217429),h=()=>o(502438),S=()=>o(24157),k=()=>o(272200),b=()=>o(972911),x=()=>o(286088);function _(e,t){if((0,x().Ku)(e),!("completionPopup"!==t.type&&"assistantCompletionPopup"!==t.type||"results"!==t.stage&&"initialPrompt"!==t.stage||"textSelection"!==t.context.type&&"cursor"!==t.context.type)){const e=t.context.textSelection;n().default.afterNextFlush((()=>l().setMultiSelection({multiSelection:e})))}}function w(e){y().default.invalidateLastUpdater();const{environment:t}=e,{state:o}=y().default;if("completionPopup"!==o.type||"results"!==o.stage)return;t.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(o.inMemoryRecordCache);const n={type:"completionPopup",stage:"initialPrompt",prefilledValue:"",context:o.context,aiSessionId:o.aiSessionId,from:o.from,futureRevisions:[...o.revisions,...o.futureRevisions]};y().default.setState(n)}function C(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&_(e,y().default.state),y().default.setState({type:"closed"})}function M(e){const{state:t}=y().default;_(e,t),"completionPopup"===t.type&&"initialPrompt"===t.stage&&y().default.setState({type:"closedWithContext",context:t.context,aiSessionId:t.aiSessionId,futureRevisions:t.futureRevisions}),setTimeout((()=>{"closedWithContext"===y().default.state.type&&y().default.reset()}),1)}function A(e){y().default.setState({...e,type:"completionPopup",stage:"initialPromptForAIBlock",from:"ai_block",prefilledValue:"",aiSessionId:r().JW()}),T({environment:e.environment,promptForAnalytics:e.clientPrompt})}async function P(e){const{environment:t,from:n}=e;let{context:r,prefilledValue:a,sessionId:l}=e;const{assistantDependency:d}=await Promise.resolve().then(o.bind(o,650829)),u=await d.load();if(!(await u.assistantMenuActions.closeAssistantRightHandSideMenu({environment:t})))return;let f={type:"closed"};if("closed"===y().default.state.type||"closedWithContext"===y().default.state.type){if(!r&&h().default.state.stores.length>0){const e=S().default.state;r="empty"===e.mode?(0,c().RH)():(0,p().kM)(e.multiSelection)?(0,c().gu)():(0,c().rs)()}r&&(a||(a=""),l||(l=(0,i().gC)()),f=g().zD.isAssistantInWriterEnabled()?{type:"assistantCompletionPopup",stage:"initialPrompt",context:r,from:n,prefilledValue:a,sessionId:l,loading:!1,hasErrored:!1}:{type:"completionPopup",stage:"initialPrompt",context:r,from:n,prefilledValue:a,aiSessionId:l,futureRevisions:[]},m().default.state.currentSpaceStore&&s().callApi({eventName:"publishAiSession",environment:t,data:{inference_type:"writer",spaceId:m().default.state.currentSpaceStore.id,id:"assistantCompletionPopup"===f.type?l:f.aiSessionId,metadata:{from:n}}}),"spacebar"===n&&(0,b().onSpaceForAiTriggered)(t))}y().default.setState(f),T(e)}function I(e){const{title:t,environment:o,prefilledValue:n,from:i}=e,s=(0,c().gu)();if(!s)return;let l;if((0,a().O9)(t)){const e=t?(0,d().gB)({customPrompt:n??t,isPageEmpty:!0}):d().am;l={promptForAnalytics:e,prefilledValue:(0,c().oW)(e)}}else l={prefilledValue:n,promptForAnalytics:void 0};P({environment:o,from:i??"page_menu",sessionId:r().JW(),context:s,...l})}function T(e){const{environment:t,promptForAnalytics:o}=e,{state:n}=y().default;if(("completionPopup"===n.type||"assistantCompletionPopup"===n.type)&&"results"!==n.stage){"initialPromptForAIBlock"===n.stage||v().default.checkGate({gateName:"mobile_assistant_prevent_clear_selection"})||l().clear({environment:t});const e="assistantCompletionPopup"===n.type?n.sessionId:n.aiSessionId,i=f().default.getSessionContext(e);k().trackAICompletionPopupOpen(t,{session_id:"assistantCompletionPopup"===n.type?n.sessionId:n.aiSessionId,prompt_key:(null==o?void 0:o.key)??("completionPopup"!==n.type||n.prefilledValue?"unknown":"alternative_ui_empty_input"),from:n.from,sessionContext:i}),u().VN({dismissed:!1,environment:t})}}},200562:(e,t,o)=>{o.d(t,{z:()=>r});var n=()=>o(645873);const i=new(n().O2)("topbarSidebarButton",(async()=>await o.e(62033).then(o.bind(o,81292)))),r=(0,n()._h)(i,(e=>e.TopbarSidebarButton))},207207:(e,t,o)=>{o.d(t,{J:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.62 2.62 15.26 15.26",svg:(0,o(474848).jsx)("path",{d:"M8.875 2.625a6.25 6.25 0 1 0 3.955 11.09l3.983 3.982a.625.625 0 1 0 .884-.884l-3.983-3.982a6.25 6.25 0 0 0-4.84-10.205m-5 6.25a5 5 0 1 1 10 0 5 5 0 0 1-10 0"})},i=(0,o(340498).wt)("magnifyingGlass",n)},226916:(e,t,o)=>{o.d(t,{c:()=>h,t:()=>S});o(16280);var n=()=>o(908006),i=()=>o(388821),r=()=>o(919709),a=()=>o(970330),s=()=>o(319975),l=()=>o(751156),c=()=>o(62287),d=()=>o(184468),p=()=>o(389658),u=()=>o(972435),m=()=>o(129522),g=()=>o(765957),f=()=>o(217429),y=()=>o(75368);const v=(0,o(959013).YK)({formDatabaseTitle:{id:"newBlock.databaseInline.formDatabaseTitle",defaultMessage:"New form"}});function h(e){var t,o,r;const{environment:l,store:u,viewType:v,transaction:h}=e,S=null===(t=u.getBlockTitleStore())||void 0===t?void 0:t.getValue();f().default.checkGate({gateName:"mobile_keep_template_gallery_open"})&&y().A.state.open&&y().A.setState({open:!1});const k=u.getSpaceId()??(null===(o=g().default.state.currentSpaceStore)||void 0===o?void 0:o.id)??(null===(r=g().default.state.mainEditorCurrentBlockStore)||void 0===r?void 0:r.getSpaceId()),b=k?l.idCreator.getSpaceIdCreatorSync(k):void 0;(0,d().j)({environment:l,sourceBlockId:"root",targetBlockPointer:u.pointer,sourceBlockSubtree:(0,i().partialRecordMapToRecordMap)((0,p().qP)({isInline:!1,viewType:v})),targetRecordCache:u.inMemoryRecordCache,transaction:h,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,spaceIdCreator:b}),c().pd({environment:l,block:u,blockType:"collection_view_page",transaction:h}),S&&s().R9({environment:l,store:u.getBlockTitleStore(),value:S,transaction:h}),n().default.afterNextFlush((()=>{const e=m().K.findCollectionViewBlockFromStore(u);var t;e&&"handleCreated"in e&&(null===(t=e.handleCreated)||void 0===t||t.call(e))})),a().v(l,{from:"template_picker",type:"collection_view_page",creating_block_id:u.id,is_full_screen:!0,view_type:v})}async function S(e){var t,n,s;const{environment:m,store:f}=e,y=null===(t=f.getBlockTitleStore())||void 0===t?void 0:t.getValue(),{formsEditorDependency:h}=await Promise.resolve().then(o.bind(o,339034)),{formEditorActions:S}=await h.load(),k=f.getSpaceId()??(null===(n=g().default.state.currentSpaceStore)||void 0===n?void 0:n.id)??(null===(s=g().default.state.mainEditorCurrentBlockStore)||void 0===s?void 0:s.getSpaceId()),b=k?m.idCreator.getSpaceIdCreatorSync(k):void 0;l().createAndCommit({userAction:"HorizontalTemplatePicker.createForm",environment:m,canUndo:!0,perform:e=>{var t;(0,d().j)({environment:m,sourceBlockId:"root",targetBlockPointer:f.pointer,sourceBlockSubtree:(0,i().partialRecordMapToRecordMap)((0,p().mT)({isInline:!1,name:(0,r().w9s)(y)?(0,r().x9d)(u().A.formatMessage(v.formDatabaseTitle)):y})),targetRecordCache:f.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,spaceIdCreator:b}),c().pd({environment:m,block:f,blockType:"collection_view_page",transaction:e});const o=f.getCollectionStore(),n=null==o||null===(t=o.getModel())||void 0===t?void 0:t.getNormalizedSchema(),s=f;if(!n)throw new Error("Schema not found");const l=S.createCollectionFormEditorView({environment:m,transaction:e,collectionViewBlockStore:s,schema:n,initializeWithAllDefaultQuestions:!0});S.createResponsesCollectionView({environment:m,transaction:e,collectionViewBlockStore:s,schema:n}),a().v(m,{from:"template_picker",type:"form",creating_block_id:f.pointer.id,form_id:null==l?void 0:l.formId,view_id:s.id})}})}},240865:(e,t,o)=>{o.d(t,{V:()=>r});var n=()=>o(56366),i=()=>o(765957);function r(e){return(0,n().K8)((()=>{var t;return e?e.getMemberCountFromPublicSpaceData()??void 0:(null===(t=i().default.state.currentSpaceStore)||void 0===t?void 0:t.getMemberCountFromPublicSpaceData())??void 0}),[e])}},255591:(e,t,o)=>{o.d(t,{PY:()=>s,bJ:()=>a,ht:()=>c,sw:()=>l});var n=()=>o(66689),i=()=>o(837384),r=()=>o(544008);const a={suggested:r().DZ.suggestedCategory,design:r().DZ.designer,eng:r().DZ.engineering,product:r().DZ.productManagement,marketing:r().DZ.marketing,sales:r().DZ.sales,support:r().DZ.support,hr:r().DZ.hr,life:r().DZ.life,student:r().DZ.student},s=(n().Vq,n().WX,n().I0,n().Y8,n().ud,n().I0,n().WX,n().I0,n().WX,n().WX,n().WX,n().WX,{suggested:[i().kx.defaultWiki],product:[i().kx.oneOnOneNotes,i().kx.productWiki,i().kx.productSpec,i().kx.visionAndStrategy,i().kx.presentation,i().kx.investorUpdate,i().kx.userResearch,i().kx.experimentResults,i().kx.brainstorm,i().kx.productLaunchBrief],design:[i().kx.designSprint,i().kx.designSystem,i().kx.designPortfolio,i().kx.userResearch,i().kx.brainstorm],eng:[i().kx.engineeringWiki,i().kx.engineeringTechSpec,i().kx.experimentResults,i().kx.brainstorm],marketing:[i().kx.presentation,i().kx.brandAssets,i().kx.brainstorm,i().kx.contentCalendar,i().kx.blogEditorialCalendar,i().kx.socialMediaCalendar,i().kx.campaignBrief,i().kx.moodBoard,i().kx.mediaList],hr:[i().kx.companyHome,i().kx.newHireOnboarding,i().kx.employeeBenefits,i().kx.interviewGuide,i().kx.recruitingTracker,i().kx.jobBoard,i().kx.applicantTracker,i().kx.peopleDirectory],sales:[i().kx.salesWiki,i().kx.salesCRM,i().kx.salesAssets,i().kx.competitiveAnalysis],support:[i().kx.productFAQs,i().kx.helpCenter],life:[i().kx.readingListV2,i().kx.habitTrackerV2,i().kx.simpleBudgetV2,i().kx.weeklyTodoV2,i().kx.travelPlannerV2,i().kx.journalV2,i().kx.resumeV2,i().kx.personalHomeV3,i().kx.quickNoteV2,i().kx.jobApplicationsV2,i().kx.lifeWikiV2,i().kx.moodBoardV2,i().kx.blogPostV2,i().kx.personalCRMV2],student:[i().kx.studentPlanner,i().kx.classNotesV2,i().kx.courseScheduleV2,i().kx.gradeCalculatorV2,i().kx.cornellNotesSystemV2,i().kx.syllabusV2,i().kx.lessonPlansV2,i().kx.classDirectoryV2,i().kx.classroomHomeV2,i().kx.clubHomepageV2]}),l=[i().kx.todoListMobile,i().kx.quickNoteMobile,i().kx.habitTrackerMobile,i().kx.journalMobile,i().kx.weeklyPlanMobile,i().kx.classNotesMobile],c=[i().kx.todoListMobile,i().kx.quickNoteMobile,i().kx.oneOnOneNotesMobile,i().kx.meetingNotesMobile,i().kx.weeklyPlanMobile]},264699:(e,t,o)=>{o.d(t,{_:()=>a});var n=()=>o(972435);const i=(0,o(959013).YK)({table:{defaultMessage:"Table",id:"templatePickerHelpers.databaseTemplateNames.table"},board:{defaultMessage:"Board",id:"templatePickerHelpers.databaseTemplateNames.board"},list:{defaultMessage:"List",id:"templatePickerHelpers.databaseTemplateNames.list"},calendar:{defaultMessage:"Calendar",id:"templatePickerHelpers.databaseTemplateNames.calendar"},gallery:{defaultMessage:"Gallery",id:"templatePickerHelpers.databaseTemplateNames.gallery"},timeline:{defaultMessage:"Timeline",id:"templatePickerHelpers.databaseTemplateNames.timeline"}});function r(e){const{environment:t,store:n,viewType:i}=e;o(751156).createAndCommit({userAction:"templatePickerHelpers.handleClickForViewType",environment:t,canUndo:!0,perform:e=>{(0,o(226916).c)({environment:t,store:n,viewType:i,transaction:e}),o(857783).uK({environment:t,store:n,pageVisitSource:o(584262).y8.LinkInPage});const r=n.getCollectionViewStores()[0];r&&(0,o(493260).F)(r.id,{viewType:i})}})}const a=[{name:n().A.formatMessage(i.table),type:"table",iconFn:o(421559).T,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>r({environment:e,store:t,viewType:"table"})},{name:n().A.formatMessage(i.board),type:"board",iconFn:o(969523).q,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>r({environment:e,store:t,viewType:"board"})},{name:n().A.formatMessage(i.list),type:"list",iconFn:o(202017).n,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>r({environment:e,store:t,viewType:"list"})},{name:n().A.formatMessage(i.timeline),type:"timeline",iconFn:o(397414).u,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>r({environment:e,store:t,viewType:"timeline"})},{name:n().A.formatMessage(i.calendar),type:"calendar",iconFn:o(42583).D,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>r({environment:e,store:t,viewType:"calendar"})},{name:n().A.formatMessage(i.gallery),type:"gallery",iconFn:o(858141).p,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>r({environment:e,store:t,viewType:"gallery"})}]},271084:(e,t,o)=>{o.d(t,{k:()=>i});o(581454);class n extends(()=>o(757695))().Store{getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}getSortedUserIds(){return Object.entries(this.state||{}).sort(((e,t)=>{let[o,n]=e,[i,r]=t;return r-n})).map((e=>{let[t,o]=e;return t}))}}const i=new n;(0,o(604341).exposeDebugValue)("UserSimilarityStore",i)},272200:(e,t,o)=>{o.r(t),o.d(t,{trackAIAction:()=>s,trackAIAssistantEngineError:()=>_,trackAIAssistantSelfHealingRetries:()=>w,trackAIBlockAction:()=>d,trackAICompletionPopupClose:()=>g,trackAICompletionPopupHistoryNavigation:()=>y,trackAICompletionPopupOpen:()=>m,trackAICompletionPopupPreviewEnd:()=>S,trackAICompletionPopupPreviewStart:()=>v,trackAICompletionPopupPreviewStoppedByUser:()=>k,trackAICompletionPopupRetry:()=>f,trackAICompletionPopupUpdatePromptText:()=>h,trackAIDataSharingOptInSubmit:()=>b,trackAIEmptyResponse:()=>x,trackAIFavoriteAction:()=>c,trackAiAutofillAction:()=>p,trackAiAutofillSettingsAction:()=>u,trackUserFlow:()=>l});var n=()=>o(679924),i=()=>o(650829),r=()=>o(430483),a=()=>o(217429);function s(e,t){const{user_comment:o,...i}=t;(0,n().v)(e,"ai_action",i)}function l(e,t,o){const i={site:"client",...o};(0,n().v)(e,t,i)}function c(e,t){(0,n().v)(e,"ai_favorite_action",t)}function d(e,t){(0,n().v)(e,"ai_block_action",t)}function p(e,t){(0,n().v)(e,"ai_autofill_action",t),a().default.logEvent("ai_autofill_action",1,{action_type:t.type})}function u(e,t){(0,n().v)(e,"ai_autofill_settings_action",t)}function m(e,t){if(r().zD.isXMLAssistantEnabled()){var o;const n=(null===(o=t.sessionContext)||void 0===o?void 0:o.evaluator.getTranscript())??[];i().assistantDependency.load().then((o=>{let{assistantAnalyticsActions:i}=o;i.trackAssistantOpened(e,{from:t.from,sessionId:t.session_id,isReminder:!1,reminderType:void 0,startTimestamp:Date.now(),transcript:n,hasQuery:!1,searchSessionId:void 0})}))}else(0,n().v)(e,"ai_completion_popup_open",{session_id:t.session_id,prompt_key:t.prompt_key,from:t.from})}function g(e,t){(0,n().v)(e,"ai_completion_popup_close",t),a().default.logEvent("ai_completion_popup_close",1,{exit_type:t.exit_type})}function f(e,t){(0,n().v)(e,"ai_completion_popup_retry",t)}function y(e,t){(0,n().v)(e,"ai_completion_popup_history_navigation",t)}function v(e,t){(0,n().v)(e,"ai_completion_popup_preview_start",t),a().default.logEvent("ai_completion_popup_preview_start",1,{from:t.from,prompt_key:t.prompt_key})}function h(e,t){(0,n().v)(e,"ai_completion_popup_update_prompt_text",t)}function S(e,t){(0,n().v)(e,"ai_completion_popup_preview_end",t),a().default.logEvent("ai_completion_popup_preview_end",1,{preview_time:t.preview_time})}function k(e,t){(0,n().v)(e,"ai_completion_popup_preview_stopped_by_user",t)}function b(e,t){(0,n().v)(e,"ai_user_data_sharing_opt_in_submit",t)}function x(e,t){(0,n().v)(e,"getCompletion.emptyResponse",t),a().default.logEvent("getCompletion.emptyResponse",1,{promptKey:t.promptKey})}function _(e,t){(0,n().v)(e,"ai_assistant_error",t)}function w(e,t){(0,n().v)(e,"ai_assistant_self_healing_retries",t)}},274652:(e,t,o)=>{o.d(t,{o:()=>r});var n=o(296540),i=o(474848);const r=n.forwardRef((function(e,t){let{color:n="primary",...r}=e;const a=(0,o(401497).IS)((e=>{const t="blue"===n?o(381349).Ay.blue:"secondary"===n?e.text.secondary:e.text.primary;return{title:{color:t,fill:t},buttonMenuItem:{...r.style,...r.disabled?{cursor:"not-allowed"}:{}}}}),[r.disabled,n,r.style]);return(0,i.jsx)(o(760217).A,{ref:t,...r,title:(0,i.jsx)("div",{style:a.title,children:r.title}),icon:(0,i.jsx)(o(8980).I,{icon:o(617668).plusIcon,style:{fill:n}}),style:a.buttonMenuItem})}))},279900:(e,t,o)=>{function n(e){let t,o,n;return async function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t?(n=r,o||(o=t.then((()=>(o=void 0,t=e(...n),t))),o)):(t=e(...r),t)}}o.d(t,{A:()=>n})},316091:(e,t,o)=>{o.r(t),o.d(t,{default:()=>F,getIconStyle:()=>U});o(944114),o(898992),o(354520),o(581454);var n=o(296540),i=()=>o(484714),r=()=>o(56366),a=()=>o(401497),s=()=>o(799954),l=()=>o(30626),c=()=>o(356596),d=()=>o(383286),p=()=>o(654601),u=()=>o(919709),m=()=>o(959013),g=()=>o(496603),f=()=>o(160568),y=()=>o(557281),v=()=>o(413677),h=()=>o(33301),S=()=>o(261374),k=()=>o(751156),b=()=>o(178658),x=()=>o(264699),_=()=>o(601734),w=()=>o(549500),C=()=>o(862835),M=()=>o(964345),A=()=>o(921855),P=()=>o(68465),I=()=>o(640653),T=()=>o(645873),B=()=>o(765957),E=()=>o(24157),V=()=>o(611371),j=()=>o(331542),D=()=>o(939740),R=()=>o(532731),L=()=>o(286611),H=o(474848);const W=(0,m().YK)({genericHelpMeWriteNewPage:{defaultMessage:"Write “{filter}” with AI…",id:"id.completions.genericHelpMeWriteNewPage"},genericHelpMeWriteNewPageEmpty:{defaultMessage:"Start writing with AI…",id:"id.completions.genericHelpMeWriteNewPageEmpty"},dictate:{defaultMessage:"Dictate",id:"id.dictate.dictateIntoNewPage"}});function N(e){let{menuListStore:t,sectionTitleStyle:o,handleTemplatePickerEmptyEnter:n,sectionsBeforeMobilePreviewSections:a,renderMobileTemplatePreviewItem:s}=e;const l=(0,r().K8)((()=>{var e;return null===(e=B().default.state.currentSpaceStore)||void 0===e?void 0:e.getSubscriptionTier()}),[]),c=(0,r().K8)((()=>(0,I().p3)().function),[]),d=(0,i().v3)(),p=(0,T().fJ)(_().Aw),u=(0,r().K8)((()=>{if(!p.value)return[];return p.value.templatePickerItems.getMobilePreviewTemplates({userPersona:c,subscriptionTier:l,environment:d}).map((e=>{let{category:t,sectionHeaderMessage:n,templates:i}=e;return{key:t,render:e=>(0,H.jsxs)("div",{children:[(0,H.jsx)("div",{style:o,children:(0,H.jsx)(m().sA,{...n})}),e.children]},e.key),items:i.map(s)}}))}),[p.value,c,l,d,s,o]),g="pending"===p.status?(0,H.jsx)("div",{style:{marginTop:o.marginTop,marginBottom:o.marginBottom,paddingLeft:10},children:(0,H.jsx)(j().A,{})}):void 0;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(D().Ay,{type:D().Oh.Vertical,store:t,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,onEmptyEnter:n,sections:[...a,...u]}),g]})}const F=function(e){let{store:t,menuListStore:n}=e;const a=(0,i().v3)(),s=(0,i().Y0)();(0,o(852507).l)((()=>{n.reset()}));const l=(0,r().K8)((()=>o(411671).A.getMode(a,t)),[a,t]),c=(0,r().O$)(o(227440).e),d=(0,r().K8)((()=>function(e){return Boolean(e.getAssociatedCollectionStore())}(t)),[t]),p=(0,r().K8)((()=>t.getAssociatedCollectionStore()),[t]),m=(0,r().K8)((()=>p?p.getParentBlockStore():void 0),[p]),g=(0,r().K8)((()=>p?p.getTemplatePageStores():void 0),[p]),f=(0,r().K8)((()=>function(e){return e.isTemplate()}(t)),[t]),v=(0,r().K8)((()=>{const e=t.getAssociatedCollectionStore(),n=e&&e.getParentBlockStore();return(0,o(33791).v)({collectionStore:e,collectionViewBlockStore:n,checkNavigableAncestorLocked:!0})}),[t]),S=(0,r().K8)((()=>Boolean(null==m?void 0:m.isNonEditableState())),[m]);return c?(0,H.jsxs)("div",{children:[!d&&!s.isMobile&&(0,H.jsx)(q,{store:t,menuListStore:n,publicEditMode:l}),!d&&s.isTablet&&(0,H.jsx)(Y,{store:t,menuListStore:n,publicEditMode:l}),d&&!f&&p&&m&&g&&g.length>0&&(0,H.jsx)(o(975318).D,{isOverlay:!1,collectionStore:p,canConfigureCollection:v,onTemplateClick:e=>function(e,t,o){k().createAndCommit({userAction:"TemplatePicker.handleCollectionTemplateClick",environment:o,canUndo:!0,perform:n=>{const i=t.getTitleValue();y().n5({title:""!==u().q4_(i)?{text:i}:"template",environment:o,store:t,templateStore:e.templateStore,isKeyboard:e.isKeyboard,isCreateIn:!1,transaction:n,from:"template_picker"})}})}(e,t,a),onEmptyEnter:()=>K(a),onEmptyPageClick:()=>function(e,t){k().createAndCommit({userAction:"TemplatePicker.handleTemplateEmptyPageClick",environment:t,canUndo:!0,perform:o=>{h().n({environment:t,store:e,transaction:o})}})}(t,a),locked:S})]}):null};function O(e,t){const{device:o}=e;return{...s().CC,marginTop:16,marginBottom:4,letterSpacing:0,fontSize:o.isMobile?12:13,color:t.text.tertiary,display:"flex",alignItems:"center",fontWeight:500}}function U(e,t){return e.isLargeDatabaseIcon?{width:16,fill:t.icon.tertiary,marginLeft:2,marginRight:12}:{width:20,fill:t.icon.tertiary,marginRight:10}}function K(e){const t=E().default.state;(0,V().EF)(e)&&"editing"===t.mode&&(k().createAndCommit({userAction:"TemplatePicker.handleTemplatePickerEmptyEnter",environment:e,canUndo:!0,perform:o=>{S().Ve({environment:e,editorMode:"default",transaction:o,multiSelection:t.multiSelection})}}),f().ki(e,{is_keyboard:!0,from:"template_picker",template_type:"empty_page"}))}function z(e,t,o,n){return!!e.device.isMobile&&((0,P().ZE)(n)&&t.focused&&(0,c().K)({width:14,marginRight:6,fill:o.icon.tertiary}))}function J(e,t,o,i,r){return{key:e.name,render:i=>{var a;let{ref:s,...l}=i;return(0,n.createElement)(L().J,{...l,key:e.name,format:"page-menu-item",title:e.name,type:e.type,icon:null===(a=e.iconFn)||void 0===a?void 0:a.call(e,U(e,o)),locked:!1,right:z(t,l,o,r)})},action:o=>{(0,V().EF)(t)&&(f().ki(t,{is_keyboard:"keydown"===o.event.type,from:"template_picker",template_type:e.type}),e.onClick(t,i))}}}function Y(e){let{store:t,menuListStore:o,publicEditMode:r}=e;const s=(0,a().DP)(),l=(0,i().v3)(),c=(0,n.useCallback)((e=>J(e,l,s,t,r)),[l,s,t,r]),d=[{key:"Basic",render:e=>(0,H.jsx)("div",{children:e.children},e.key),items:R().dB.map(c)},{key:"Database",render:e=>(0,H.jsxs)("div",{children:[(0,H.jsx)("div",{style:O(l,s),children:(0,H.jsx)(m().sA,{defaultMessage:"Database",id:"templatePicker.mobileTemplatePicker.databaseTemplateSection.label"})}),e.children]},e.key),items:x()._.filter((e=>e.shouldShow(l))).map(c)}];return(0,H.jsx)(N,{menuListStore:o,sectionTitleStyle:O(l,s),handleTemplatePickerEmptyEnter:()=>K(l),sectionsBeforeMobilePreviewSections:d,renderMobileTemplatePreviewItem:e=>function(e,t){return{key:e.name,render:t=>{let{ref:o,...i}=t;return(0,n.createElement)(L().J,{...i,key:e.name,title:e.name,type:"page_template",format:"page-menu-item",locked:!1})},action:()=>{v().openWithItem({environment:t,item:e,createNewPage:!1,isPrivate:!1,disablePointerEvents:!1})}}}(e,l)})}function Z(e,t,o,i,r,a,s){const c=(0,R().F1)(x()._,["table"]),d=g().FF(x()._,...c),p=!a&&d.length>0?function(e,t,o,i,r){return{key:e,render:o=>{let{ref:a,...s}=o;return(0,n.createElement)(L().J,{...s,key:e,format:"page-menu-item",title:(0,H.jsx)(m().sA,{defaultMessage:"More",id:"templatePicker.more.label"}),type:"more",icon:(0,l()._)({width:20,fill:i.icon.tertiary,marginRight:10}),locked:!1,right:z(t,s,i,r)})},action:()=>o(!0)}}("moreNew",t,s,o,r):null,u=[R().zD,e?R().Wt:R().vP,...c,...p?[]:d].filter((e=>e.shouldShow(t))).map((e=>J(e,t,o,i,r)));return p?u.concat(p):u}function q(e){let{store:t,menuListStore:o,publicEditMode:s}=e;const l=(0,m().tz)(),c=(0,a().DP)(),u=(0,i().v3)(),g=(0,r().K8)((()=>M().gZ.state&&M().Di.state===t.id),[t]),[f,y]=(0,n.useState)(!1),v=(0,r().K8)((()=>(0,P().ZE)(s)),[s]),S=(0,r().K8)((()=>(0,C().h)()),[]),x=(0,r().K8)((()=>0===t.getContentLength()),[t])?[J(R().wL,u,c,t,s)]:[],_=Z(v,u,c,t,s,f,y),I=(0,r().K8)((()=>t.getTitleValue()),[t]),T=[];if(v){const e=function(e,t,o,i,r,a){return{key:"ask ai",render:r=>{let{ref:s,...l}=r;const c=e.replace(/(\r\n|\n|\r)/gm," "),d=c.length>30?`${c.slice(0,30)}…`:c;return(0,n.createElement)(L().J,{...l,key:"genericHelpMeWriteNewPageWithAI",format:"page-menu-item",title:c?i.formatMessage(W.genericHelpMeWriteNewPage,{filter:d}):i.formatMessage(W.genericHelpMeWriteNewPageEmpty),type:"ai",icon:(0,H.jsx)("div",{style:{height:24,width:24,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",marginRight:4},children:(0,p().X)({width:16,height:16,fill:"dark"===o.mode?o.palette.purple[700]:o.palette.purple[400]})}),locked:!1,right:z(t,l,o,a)})},action:()=>{k().createAndCommit({userAction:"TemplatePicker.genericHelpMeWriteNewPageWithAI",environment:t,canUndo:!0,perform:o=>{h().n({environment:t,store:r,transaction:o,preventTextSelection:!1,onTextSelection(){(0,b().openHelpMeWriteGenericPopup)({environment:t,title:e})}})}})}}}((0,A().r4)(I,t).trim(),u,c,l,t,s);T.push(e)}if(S){const e=function(e,t,o,i,r){return{key:"dictate",render:i=>{let{ref:a,...s}=i;return(0,n.createElement)(L().J,{...s,key:"dictateNewPage",format:"page-menu-item",title:o.formatMessage(W.dictate),type:"dictation",icon:(0,H.jsx)("div",{style:{height:24,width:24,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",marginRight:4},children:(0,d().E)({width:16,height:16,fill:"dark"===t.mode?t.palette.red[700]:t.palette.red[400]})}),locked:!1,right:z(e,s,t,r)})},action:async()=>{const{dictationActions:t}=await w().$O.load();t.startDictation({environment:e,blockStore:i,from:"template_picker",includeSystemAudio:!1})}}}(u,c,l,t,s);T.push(e)}return g?null:(0,H.jsx)(D().Ay,{type:D().Oh.Horizontal,store:o,disableInitialScroll:!0,disableCommandEnter:!0,isEnterOnHoverEmpty:!0,initialFocus:void 0,disableKeyboard:!0,onEmptyEnter:()=>K(u),sections:[{key:"Basic",render:e=>(0,H.jsx)("div",{children:e.children},e.key),items:[...x,...T]},{key:"Add new",render:e=>(0,H.jsxs)("div",{children:[(0,H.jsx)("div",{style:O(u,c),children:(0,H.jsx)(m().sA,{defaultMessage:"Add new",id:"templatePicker.add new.label"})}),e.children]},e.key),items:_}]})}},383286:(e,t,o)=>{o.d(t,{E:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("microphone",{viewBox:"0 0 17 25",svg:(0,n.jsx)("path",{d:"M0.20752 12.0743C0.20752 13.5496 0.511882 14.853 1.12061 15.9845C1.72933 17.116 2.57438 18.0219 3.65576 18.7023C4.73714 19.3826 5.98324 19.7908 7.39404 19.9269V22.129H3.45166C3.17236 22.129 2.93245 22.2257 2.73193 22.4191C2.53141 22.6196 2.43115 22.8595 2.43115 23.1388C2.43115 23.4109 2.53141 23.6437 2.73193 23.837C2.93245 24.0376 3.17236 24.1378 3.45166 24.1378H13.313C13.5923 24.1378 13.8322 24.0376 14.0327 23.837C14.2332 23.6437 14.3335 23.4109 14.3335 23.1388C14.3335 22.8595 14.2332 22.6196 14.0327 22.4191C13.8322 22.2257 13.5923 22.129 13.313 22.129H9.37061V19.9269C10.7814 19.7908 12.0239 19.3826 13.0981 18.7023C14.1795 18.0219 15.0246 17.116 15.6333 15.9845C16.242 14.853 16.5464 13.5496 16.5464 12.0743V9.94739C16.5464 9.66809 16.4461 9.43176 16.2456 9.2384C16.0522 9.04504 15.8159 8.94836 15.5366 8.94836C15.2573 8.94836 15.0174 9.04504 14.8169 9.2384C14.6164 9.43176 14.5161 9.66809 14.5161 9.94739V11.9991C14.5161 13.2166 14.2583 14.2837 13.7427 15.2003C13.2271 16.1098 12.5109 16.8152 11.5942 17.3165C10.6776 17.8178 9.60693 18.0685 8.38232 18.0685C7.16488 18.0685 6.09424 17.8178 5.17041 17.3165C4.24658 16.8152 3.52686 16.1098 3.01123 15.2003C2.50277 14.2837 2.24854 13.2166 2.24854 11.9991V9.94739C2.24854 9.66809 2.14827 9.43176 1.94775 9.2384C1.74723 9.04504 1.50374 8.94836 1.21729 8.94836C0.94515 8.94836 0.708822 9.04504 0.508301 9.2384C0.30778 9.43176 0.20752 9.66809 0.20752 9.94739V12.0743ZM8.38232 15.8448C9.10563 15.8448 9.75016 15.6766 10.3159 15.34C10.8888 14.9962 11.3364 14.5236 11.6587 13.922C11.9881 13.3204 12.1528 12.6222 12.1528 11.8273V4.59778C12.1528 3.80286 11.9881 3.10461 11.6587 2.50305C11.3364 1.90149 10.8888 1.43241 10.3159 1.09583C9.75016 0.752075 9.10563 0.5802 8.38232 0.5802C7.65902 0.5802 7.0109 0.752075 6.43799 1.09583C5.87223 1.43241 5.42464 1.90149 5.09521 2.50305C4.76579 3.10461 4.60107 3.80286 4.60107 4.59778V11.8273C4.60107 12.6222 4.76579 13.3204 5.09521 13.922C5.42464 14.5236 5.87223 14.9962 6.43799 15.34C7.0109 15.6766 7.65902 15.8448 8.38232 15.8448Z"})})},390527:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>B,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>_,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>x,MAX_RECURRENCE_INTERVAL:()=>v,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>h,RRULE_WEEKDAYS_MAP:()=>y,adjustedStartDateIfPossible:()=>C,areRecurrenceSchedulesEqual:()=>R,convertFromUnpersistedRecurrenceConfig:()=>D,convertToUnpersistedRecurrenceConfig:()=>E,getFormattedEndCondition:()=>T,getFormattedNextRecurrenceTime:()=>I,getNewEndTimestamp:()=>V,getNextDateUtc:()=>P,getRecurrenceAfter:()=>M,isRunningBetweenMidnightAnd3AM:()=>A,isValidRecurrenceInterval:()=>S,isValidRecurrenceNumberOfRuns:()=>k,rruleFromRecurrence:()=>b,templateAncestorsViolateRecurrenceNesting:()=>w});o(898992),o(354520),o(581454);var n=()=>o(244641);o(944114);function i(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];if(0===o.length)return e.map((e=>[e]));const r=[];for(const a of e)r.push(...i(o[0],...o.slice(1)).map((e=>[a,...e])));return r}var r=()=>o(496603),a=()=>o(534177),s=()=>o(720665),l=()=>o(597777),c=()=>o(869190),d=()=>o(416504),p=()=>o(402390);class u extends(()=>o(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>o(912720);const g=(0,o(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),f={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},y={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},v=99,h=999;function S(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=v}function k(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=h}function b(e){const{start_date:t,frequency:o,interval:n,weekdays:r,timezone:s,hour:c,minute:d}=e,p="week"===o&&r?r.map((e=>y[e])):void 0,m={};return(0,a().O9)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,l().eU)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,a().HB)(e.end_condition)),"month"===e.frequency&&(0,a().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=i(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,o]=e;return y[t].nth(o)})):(0,a().HB)(e.monthly_restriction)),new u({freq:f[o],dtstart:(0,l().eU)(t),interval:n,byweekday:p,tzid:s,byhour:c??0,byminute:d??0,bysecond:0,...m})}const x=1,_=1;function w(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),n=e.length,i=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,r=n>x,a=o.length>=_;return{violatesConstraint:r||a,templateNestingExceedsMaxDepth:r,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:n,immediateAncestorRecurrenceType:i}}function C(e){var t;const{recurrence:o,afterDate:i}=e;if("number"===(null===(t=o.end_condition)||void 0===t?void 0:t.type)||o.start_date>=i)return o;let r=n().c9.fromMillis(o.start_date,{zone:"utc"});const a=n().c9.fromMillis(i,{zone:"utc"});switch(o.frequency){case"year":{const e=Math.floor(a.diff(r,"years").years/o.interval);r=r.plus({years:e*o.interval});break}case"month":{const e=Math.floor(a.diff(r,"months").months/o.interval);r=r.plus({months:e*o.interval});break}case"week":{const e=Math.floor(a.diff(r,"weeks").weeks/o.interval);r=r.plus({weeks:e*o.interval});break}case"day":{const e=Math.floor(a.diff(r,"days").days/o.interval);r=r.plus({days:e*o.interval});break}}return{...o,start_date:(0,l().DH)(r.toMillis())}}function M(e){const{recurrence:t,afterDate:o}=e;if((0,m().wt)(t)){const e=(0,l().l1)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=b(C({recurrence:t,afterDate:o})).after((0,l().eU)(o));if(!e)return;return(0,l().h1)(e)}}function A(e){return 0===e.hour||1===e.hour||2===e.hour}function P(e){return b(e).after((0,l().eU)((0,l().Rz)()))||void 0}function I(e){const{recurrence:t,intl:o}=e,i=P(D(t));if(!i)return;const r=A(t),a=n().c9.fromJSDate(i).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,p().H)(o)).setZone(t.timezone),s=(0,c().Yq)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(r)return o.formatMessage(g.dateBetweenMidnightAnd3AM,{date:s});{let e=a.toLocaleString(n().c9.TIME_SIMPLE);return t.timezone!==(0,d().P)()&&(e+=` ${a.toFormat("ZZZZ")}`),o.formatMessage(g.dateAtTime,{date:s,time:e})}}function T(e,t){return(0,a().O9)(e)?"number"===e.type?t.formatMessage(g.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,c().Yq)({date:n().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,a().HB)(e):t.formatMessage(g.noEndCondition)}const B=100;function E(e){return{...e,start_date:(0,l().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().l1)(e.end_condition.end_at)}:(0,a().HB)(e.end_condition):void 0}}function V(e,t,o){return e.plus(o-t)}function j(e,t){const o=n().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Rz)(o.toJSDate())}}function D(e){return{...e,start_date:(0,l().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?j(e,e.end_condition):(0,a().HB)(e.end_condition):void 0}}function R(e,t){const o=r().fN(e,(e=>void 0!==e)),n=r().fN(t,(e=>void 0!==e));return r().n4(o,n)}},401040:(e,t,o)=>{o.d(t,{RH:()=>g,gu:()=>f,oW:()=>m,rs:()=>y});var n=()=>o(496603),i=()=>o(534177),r=()=>o(286088),a=()=>o(102586),s=()=>o(301421),l=()=>o(630116),c=()=>o(502438),d=()=>o(24157),p=()=>o(972435),u=()=>o(969197);function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p().A.getIntl();if("helpMeEdit"===e.key||"helpMeDraft"===e.key||"helpMeWrite"===e.key){var o;const n=null===(o=e.steps)||void 0===o?void 0:o[0],i="text"===(null==n?void 0:n.type)&&n.prefilledValue;return i?t.formatMessage({id:"completionPopup.prefilledValue",defaultMessage:"Write about {prefilledValue} "},{prefilledValue:i}):""}if(!(0,a().US)(e.key))return"";switch(e.key){case"brainstormIdeas":return t.formatMessage({id:"completionPopup.brainStorm.prefilledValue",defaultMessage:"Brainstorm ideas on "});case"blogPost":return t.formatMessage({id:"completionPopup.blogPost.prefilledValue",defaultMessage:"Write a blog post about "});case"outline":return t.formatMessage({id:"completionPopup.outline.prefilledValue",defaultMessage:"Write an outline about "});case"socialMediaPost":return t.formatMessage({id:"completionPopup.socialMediaPost.prefilledValue",defaultMessage:"Write a social media post about "});case"pressRelease":return t.formatMessage({id:"completionPopup.pressRelease.prefilledValue",defaultMessage:"Write a press release about "});case"creativeStory":return t.formatMessage({id:"completionPopup.creativeStory.prefilledValue",defaultMessage:"Write a creative story about "});case"essay":return t.formatMessage({id:"completionPopup.essay.prefilledValue",defaultMessage:"Write an essay about "});case"poem":return t.formatMessage({id:"completionPopup.poem.prefilledValue",defaultMessage:"Write a poem about "});case"todoList":return t.formatMessage({id:"completionPopup.todoList.prefilledValue",defaultMessage:"Write a todo list about "});case"meetingAgenda":return t.formatMessage({id:"completionPopup.meetingAgenda.prefilledValue",defaultMessage:"Write a meeting agenda about "});case"prosConsList":return t.formatMessage({id:"completionPopup.prosConsList.prefilledValue",defaultMessage:"Write a pros and cons list about "});case"jobDescription":return t.formatMessage({id:"completionPopup.jobDescription.prefilledValue",defaultMessage:"Write a job description about "});case"salesEmail":return t.formatMessage({id:"completionPopup.salesEmail.prefilledValue",defaultMessage:"Write a sales email about "});case"recruitingEmail":return t.formatMessage({id:"completionPopup.recruitingEmail.prefilledValue",defaultMessage:"Write a recruiting email about "});default:(0,i().HB)(e.key)}}function g(){const{stores:e}=c().default.state,t=e[0],o=n().HV(e),i=t?t.getRecordStoreUIRoot():void 0;if(i&&i instanceof l().Bv&&o){return{type:"blockSelection",stores:e,currentPage:i,origin:o,scrollerStore:(0,r().K3)(i)}}}function f(){const e=d().default.state;if("editing"!==e.mode)return;const t=e.multiSelection,o=t.start.store,n=o.getRecordStoreUIRoot(),i=s().n.findNodeFromStore(o),a=(0,u().T)(o),c=null==a?void 0:a.getRecordStoreUIParent(),p=(0,r().K3)(n),m=a&&a instanceof l().Bv&&a!==n?a:void 0,g=m??i;if(!(n&&n instanceof l().Bv&&g))return;return{type:"cursor",textSelection:t,currentPage:n,currentBlock:m,origin:g,currentParent:c,scrollerStore:p,isPageTitle:n.id===o.id}}function y(){const{stores:e}=c().default.state,t=d().default.state,o="empty"!==t.mode?t.multiSelection:void 0,n="empty"!==t.mode?t.multiSelection.start.store:void 0;let i=n?n.getRecordStoreUIRoot():void 0;if(!(i instanceof l().Bv)){let e,t=null==n?void 0:n.getRecordStoreUIParent();for(;null!=t;)t instanceof l().Bv&&(e=t),t=t.getRecordStoreUIParent();e&&(i=e)}if(o&&i&&i instanceof l().Bv){const t=(0,u().T)(o.end.store),n=null==t?void 0:t.getRecordStoreUIParent(),a=(0,r().K3)(i);if(t&&n){return{type:"textSelection",stores:e,textSelection:o,currentPage:i,origin:t,endBlock:t,endBlockParent:n,scrollerStore:a}}}}},406533:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>i,questionMarkCircleIcon:()=>r});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},r=(0,o(340498).wt)("questionMarkCircle",i)},458366:(e,t,o)=>{o.d(t,{B2:()=>I,F1:()=>w,Kc:()=>x,NN:()=>P,UY:()=>b,br:()=>A,lA:()=>C,lh:()=>_,pi:()=>h,w_:()=>k,zP:()=>S});o(898992),o(737550);var n=()=>o(584262),i=()=>o(443239),r=()=>o(970013),a=()=>o(713998),s=()=>o(882262),l=()=>o(415566),c=()=>o(177256),d=()=>o(72135),p=()=>o(919709),u=()=>o(496603),m=()=>o(534177),g=()=>o(939768),f=()=>o(720665),y=()=>o(492414),v=()=>o(972435);function h(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function S(e){switch(e){case"table":return"table";case"board":return"board";case"list":return"list";case"gallery":return"gallery";case"feed":return"feed";case"relation":case"relation_section":return"relation_section";case"timeline":return"timeline";case"calendar":return"calendar";case"page":return"page_properties";case"compact_page":return"compact_page";case"mini":return"mini_peek";case"form_editor":case"form_viewer":case"property_module":return"property_module";default:(0,m().HB)(e)}}function k(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function b(e){const{store:t,property:o,propertySchema:i}=e,r=null==i?void 0:i.type;if("title"===r)return(0,y().Ay)({store:t,fullyQualified:!1,pageVisitSource:n().y8.LinkInPage});{const e=t.getPropertyValue(o);return a().UY(r,e)}}function x(e){let t=(0,p().k4p)(e);if(!t||""===t.trim()||t.trim().includes(" "))return{domain:void 0,restOfUrl:void 0};t=t.trim();let o=g().qg(t),n=o.host;if(o.protocol&&n||(o=g().qg(`http://${t}`),n=o.host),!n)return{domain:void 0,restOfUrl:void 0};n&&(n=n.replace(/^www./i,""));const i=t.toLowerCase().indexOf(n.toLowerCase());if(-1===i)return{domain:void 0,restOfUrl:void 0};n=t.slice(i,i+n.length);return{domain:n,restOfUrl:t.slice(i+n.length)}}function _(e){const{numberValue:t,numberFormat:o,numberShowAs:n}=e;if(!(u().yr(t)||f().pN(t)||"bar"!==(null==n?void 0:n.type)&&"ring"!==(null==n?void 0:n.type))){const e=v().A.getIntl();return"percent"===o?d().ZV(t,"percent",e):`${t} / ${n.maxValue}`}}function w(e){const{property:t,collectionStore:o}=e,n=o.isSyncedCollection();return Boolean(n)&&(0,i().u)(t)}function C(e,t){switch(e){case"side_peek":return{icon:c().A,tooltip:v().A.formatMessage(M.openInSidePeekTooltip),caption:t?"":v().A.formatMessage(M.openAsPageTitle)};case"center_peek":return{icon:l().q,tooltip:v().A.formatMessage(M.openInCenterPeekTooltip),caption:t?"":v().A.formatMessage(M.openAsPageTitle)};case"full_page":return{icon:s().m,tooltip:v().A.formatMessage(M.openAsPageTooltip),caption:t?"":v().A.formatMessage(M.openAsPageTitle)};default:(0,m().HB)(e)}}const M=(0,o(959013).YK)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function A(e){const{store:t,additionalStores:o,collectionContextStore:n}=e,i=t.getAssociatedCollectionStore();return!("collectionTypedView"!==(null==n?void 0:n.contextType)||!i)&&o.some((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==i.id}))}function P(e){return"form_editor"===e||"form_viewer"===e}function I(e){return Boolean(e&&!r().dA.includes(e.type))}},465364:(e,t,o)=>{o.d(t,{$N:()=>T,D5:()=>B,GB:()=>A,M9:()=>C,Pt:()=>I,eW:()=>P,jo:()=>V,v7:()=>M});o(944114),o(898992),o(803949),o(581454);var n=()=>o(244641),i=()=>o(787626),r=()=>o(713998),a=()=>o(597777),s=()=>o(604995),l=()=>o(416504),c=()=>o(519831),d=()=>o(496603),p=()=>o(534177),u=()=>o(299709),m=()=>o(317001),g=()=>o(520861),f=()=>o(878060),y=()=>o(44729),v=()=>o(246826),h=()=>o(319975),S=()=>o(519839),k=()=>o(695625),b=()=>o(397248),x=()=>o(217429),_=()=>o(630116),w=()=>o(747671);function C(e){const{environment:t,droppedStores:o,duplicate:r,calendarBy:d,transaction:p,collectionContextStore:f,duplicateActions:v}=e,h=n().c9.fromMillis(e.startOfDay);let k=!0;for(const n of o){const t=e.collectionStore?e.collectionStore:(0,S().Dj)({store:n,collectionContextStore:f});if(n.getParentTable()===c().Vl||!t){k=!1;break}y().X$({childStore:n,parentStore:t,transaction:p})||(k=!1)}const b=(0,g().T)({environment:t,droppedStores:o,duplicate:r,transaction:p,collectionStore:e.collectionStore,duplicateActions:v});for(const n of b){const o=e.collectionStore?e.collectionStore:(0,S().Dj)({store:n,collectionContextStore:f});if(!o)continue;const r=o.getMappedProperty(d),c=n.getPropertyStore(r),g=(0,i().b)(c.getValue())||s().Ec((0,l().P)()),y=s().kW(g,(0,l().P)()),v=h.toFormat(s().tr);let b;if("date"===y.type||"datetime"===y.type)b={...y,start_date:v};else{const e=s().AA(y,(0,l().P)());if(!e.end)return;const t={...y,start_date:v},o=s().AA(t,(0,l().P)()).start.diff(e.start,"days"),n=e.end.plus(o).toFormat(s().tr);b={...y,start_date:v,end_date:n}}const x=s().kW(b,a().$K(g)||(0,l().P)());(0,m().j)({environment:t,store:n,collectionStore:o,collectionContextStore:f,shouldCoerce:!0,groupsPointer:[],transaction:p,alreadyMovedToCollection:k}),B({environment:t,type:"dateValue",propertyId:r,store:n,transaction:p,dateValue:x}),(0,u().E)({environment:t,collectionContextStore:f,block_id:n.id,property:r,property_type:"date",from:"calendar"})}}function M(e){const{calendarStore:t,direction:o,targetStore:n}=e;t.setState({...t.state,isDragging:!0,targetStore:n,direction:o,temporaryValue:void 0})}function A(e){const{calendarStore:t,x:o,y:r,calendarBy:c}=e,p=t.state;if(p.isDragging){const e=(0,i().b)(p.targetStore.getPropertyStore(c).getValue());if(!e)return;const u=s().kW(e,(0,l().P)()),m=p.temporaryValue||e,g=s().kW(m,(0,l().P)()),f=[];p.dayStoreMap.forEach(((e,t)=>{f.push({store:e,timestamp:t})}));const y=f.find((e=>{let{store:t}=e;const n=k().T.getRectFromStore(t);return Boolean(n&&b().ux(n,o,r))}));let v;if(y){const e=n().c9.fromMillis(y.timestamp),t=e.endOf("day"),o=e.toFormat(s().tr);if(u){const i=s().AA(u,(0,l().P)());if(p.direction===w().Q.Left)if(n().IX.fromDateTimes(e,t).contains(i.start))v=u;else{let e;e="datetimerange"===u.type||"daterange"===u.type?{...u,start_date:o,end_date:u.end_date}:"datetime"===u.type?{type:"datetimerange",start_date:o,start_time:u.start_time,end_date:u.start_date,end_time:u.start_time,time_zone:u.time_zone,reminder:u.reminder}:{type:"daterange",start_date:o,end_date:u.start_date,reminder:u.reminder};const t=s().AA(e,(0,l().P)());v=!i.end&&t.start>i.start||i.end&&t.start>i.end?g:e}else if(i.end?n().IX.fromDateTimes(e,t).contains(i.end):n().IX.fromDateTimes(e,t).contains(i.start))v=u;else{let e;e="date"===u.type?{...u,type:"daterange",end_date:o}:"datetime"===u.type?{...u,type:"datetimerange",end_date:o,end_time:"00:00"}:{...u,end_date:o};const t=s().AA(e,(0,l().P)());v=t.end&&t.end<t.start?g:e}}}if(v&&!d().n4(g,v)){const e=s().kW(v,a().$K(m)||(0,l().P)());t.setState({...p,temporaryValue:e})}}}function P(e){const{environment:t,calendarStore:o,calendarBy:n,transaction:i}=e,r=o.state;r.isDragging&&r.temporaryValue&&(B({type:"dateValue",environment:t,dateValue:r.temporaryValue,propertyId:n,store:r.targetStore,transaction:i}),o.setState({...o.state,isDragging:!1}))}function I(e){const{calendarStore:t}=e,o=t.state;o.isDragging&&t.setState({...o,isDragging:!1})}function T(e){const{environment:t,store:o,collectionStore:i,collectionContextStore:a,startDayOfWeek:c,transaction:d}=e,p=a.dateRangeStartStore.state,u=(0,l().P)(),g=a.normalizedQueryStore.state;if(!g||!g.calendar_by)return;const f=(null==i?void 0:i.getMappedProperty(g.calendar_by))??g.calendar_by,y=s().hp(p,c,u),h=y.startOf("month"),S=y.endOf("month"),k=n().c9.now().startOf("day");let b;return b=n().IX.fromDateTimes(h,S).contains(k)?s().p6(k.valueOf(),u):s().p6(s().iB(p,c,u).valueOf(),u),v().zv({store:o.getPropertiesStore(),data:{[f]:r().m5(b)},transaction:d}),(0,m().j)({environment:t,store:o,collectionStore:i,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:d}),o}function B(e){const{environment:t,store:o,propertyId:n,transaction:i}=e;let a;"timestamp"===e.type?a=s().p6(e.timestampMs.valueOf(),(0,l().P)()):"dateValue"===e.type?a=e.dateValue:(0,p().HB)(e);const c=o.getPropertyValue(n);if(a&&function(e){const{propertyId:t,oldDateValue:o,newPersistedDate:n,store:i}=e;if(o||!n||void 0!==n.reminder)return!1;if(!x().default.checkGate({gateName:"adoption_reminder_collection_default"}))return!1;const r=E(t,i);if(void 0===r)return!1;return!0}({propertyId:n,oldDateValue:c,newPersistedDate:a,store:o})){const e=E(n,o);void 0!==e&&(a={...a,reminder:e})}const d=r().m5(a);v().zv({store:o.getPropertiesStore(),data:{[n]:d},transaction:i}),f().O({environment:t,store:o,dateProperty:{id:n,oldValue:c,newValue:d}})}function E(e,t){const o=t.getAssociatedCollectionStore();if(!o)return;const n=o.getSchema();if(!n)return;const i=n[e];return i&&"date"===i.type?i.default_reminder:void 0}function V(e){const{environment:t,collectionStore:o,calendarBy:n,store:i,insertStores:r,collectionContextStore:a,transaction:s}=e,l=i.getPropertyStore(n).getValue();for(const c of r)(0,m().j)({environment:t,store:c,collectionStore:o,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:s}),h().R9({environment:t,store:c.getPropertyStore(n),value:l,transaction:s});return r.map((e=>_().Bv.createChildStore(o,e.pointer)))}},477293:(e,t,o)=>{o.d(t,{r:()=>r});var n=()=>o(56366),i=()=>o(217429);function r(e){let{disableExposureLogging:t,disableEventTrailLogging:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n().K8)((()=>i().default.getEligibleGroup({experimentId:e,defaultGroup:"control",disableExposureLogging:t,disableEventTrailLogging:o})),[e,t,o])}},488887:(e,t,o)=>{function n(e,t){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}o.d(t,{_:()=>n})},520861:(e,t,o)=>{o.d(t,{T:()=>i});o(944114),o(898992),o(908872);var n=()=>o(415651);function i(e){const{environment:t,collectionStore:o,duplicate:i,droppedStores:r,transaction:a,duplicateActions:s}=e,{movedStores:l,reparentedStores:c}=r.reduce(((e,t)=>(i||t.getAssociatedCollectionId()!==(null==o?void 0:o.id)?e.reparentedStores.push(t):e.movedStores.push(t),e)),{movedStores:[],reparentedStores:[]});return[...l,...n().MS({environment:t,droppedStores:c,duplicate:i,transaction:a,resolveTemplateVariables:!1,duplicateActions:s})]}},527580:(e,t,o)=>{o.d(t,{TK:()=>s,YC:()=>a,ui:()=>r});var n=()=>o(645873);const i={pageVerification:new(n().O2)("pageVerification",(()=>Promise.all([o.e(58550),o.e(11341),o.e(29252),o.e(94891)]).then(o.bind(o,80826)))),pageVerificationBadge:new(n().O2)("pageVerificationBadge",(()=>Promise.all([o.e(75134),o.e(58550),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(25497),o.e(74562),o.e(27711),o.e(11341),o.e(30291),o.e(12913),o.e(6463),o.e(93449),o.e(29252),o.e(74357),o.e(41412)]).then(o.bind(o,161901)))),pageVerificationMenuRenderer:new(n().O2)("pageVerificationMenuRenderer",(()=>Promise.all([o.e(75134),o.e(58550),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(25497),o.e(74562),o.e(27711),o.e(11341),o.e(30291),o.e(12913),o.e(6463),o.e(93449),o.e(29252),o.e(74357),o.e(26207)]).then(o.bind(o,196770))))},r=(0,n()._h)(i.pageVerification,(e=>e.PageAddVerificationButton)),a=(0,n()._h)(i.pageVerificationBadge,(e=>e.PageVerificationBadge)),s=(0,n()._h)(i.pageVerificationMenuRenderer,(e=>e.PageVerificationMenuRenderer))},532731:(e,t,o)=>{o.d(t,{F1:()=>y,KQ:()=>c,Wt:()=>u,dB:()=>f,vP:()=>p,wL:()=>d,zD:()=>m});o(944114),o(898992),o(581454),o(908872);var n=()=>o(959013),i=()=>o(33301),r=()=>o(751156),a=()=>o(972435),s=()=>o(806638),l=()=>o(404141);const c=(0,n().YK)({emptyWithIcon:{defaultMessage:"Empty page with icon",id:"templatePickerHelpers.basicTemplateItems.emptyWithIcon"},empty:{defaultMessage:"Empty page",id:"templatePickerHelpers.basicTemplateItems.empty"},templates:{defaultMessage:"Templates",id:"templatePickerHelpers.basicTemplateItems.templates"},import:{defaultMessage:"Import",id:"templatePickerHelpers.basicTemplateItems.import"}}),d={name:a().A.formatMessage(c.empty),iconFn:o(177148).Y,type:"empty_page",shouldShow:()=>!0,onClick:(e,t)=>{r().createAndCommit({userAction:"templatePickerHelpers.emptyTemplateItems",environment:e,canUndo:!0,perform:o=>{i().n({environment:e,store:t,transaction:o})}})}},p={name:a().A.formatMessage(c.templates),type:"templates",iconFn:e=>(0,o(948352).M)(e),shouldShow:()=>!0,onClick:e=>{(0,s().P)({environment:e})}},u={name:a().A.formatMessage(c.templates),type:"templates",iconFn:e=>(0,o(926329).b)(e),shouldShow:()=>!0,onClick:e=>{(0,s().P)({environment:e})}},m={name:a().A.formatMessage(c.import),type:"import",iconFn:o(820579).f,shouldShow:()=>!0,onClick:(e,t)=>{const n=o(206267).JW();o(522094).A.setState({flowId:n}),o(559926).kY(e,{from:"new_page",flowId:n}),l().A.setState({...l().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0})}},g=(0,n().YK)({pageWithIcon:{defaultMessage:"Page with icon",id:"templatePickerHelpers.mobileBasicTemplateItems.pageWithIcon"},emptyPage:{defaultMessage:"Empty page",id:"templatePickerHelpers.mobileBasicTemplateItems.emptyPage"}}),f=[{name:a().A.formatMessage(g.pageWithIcon),type:"page_with_icon",shouldShow:()=>!0,onClick:(e,t)=>{r().createAndCommit({userAction:"templatePickerHelpers.mobileBasicTemplateItems",environment:e,canUndo:!0,perform:o=>{i().T({environment:e,store:t,transaction:o})}})}},{name:a().A.formatMessage(g.emptyPage),type:"empty_page",shouldShow:()=>!0,onClick:(e,t)=>{r().createAndCommit({userAction:"templatePickerHelpers.mobileBasicTemplateItems",environment:e,canUndo:!0,perform:o=>{i().n({environment:e,store:t,transaction:o})}})}}];function y(e,t){const o=new Map(e.map((e=>[e.type,e])));return t.reduce(((e,t)=>(o.has(t)&&e.push(o.get(t)),e)),[])}},556048:(e,t,o)=>{o.d(t,{C8:()=>u,Dz:()=>l,GC:()=>g,GL:()=>f,YY:()=>m,dM:()=>d,h9:()=>c,jX:()=>s,oF:()=>p,uj:()=>a});var n=()=>o(645873);const i={JiraSyncInfoPopup:new(n().O2)("JiraSyncInfoPopup",(async()=>await Promise.all([o.e(75134),o.e(68744)]).then(o.bind(o,408453)))),ImproveJiraSyncPopup:new(n().O2)("ImproveJiraSyncPopup",(async()=>await Promise.all([o.e(75134),o.e(2686)]).then(o.bind(o,484967)))),JiraDCAuthModal:new(n().O2)("JiraDCAuthModal",(async()=>await o.e(28763).then(o.bind(o,992567)))),ExternalImportAndSyncIndicator:new(n().O2)("ExternalImportAndSyncIndicator",(async()=>await o.e(98288).then(o.bind(o,244399)))),JiraSyncedAllProjectsTooltip:new(n().O2)("JiraSyncedAllProjectsTooltip",(async()=>await o.e(21446).then(o.bind(o,470020)))),JiraSyncedAllIssuesTooltip:new(n().O2)("JiraSyncedAllIssuesTooltip",(async()=>await o.e(21446).then(o.bind(o,470020)))),JiraSyncedDatabaseViewsAndFiltersTooltip:new(n().O2)("JiraSyncedDatabaseViewsAndFiltersTooltip",(async()=>await o.e(21446).then(o.bind(o,470020)))),JiraSyncSourceTooltip:new(n().O2)("JiraSyncSourceTooltip",(async()=>await o.e(21446).then(o.bind(o,470020)))),JiraSyncedSettingsToSetupProjectsAndIssuesTooltip:new(n().O2)("JiraSyncedSettingsToSetupProjectsAndIssuesTooltip",(async()=>await o.e(21446).then(o.bind(o,470020))))},r={JiraSyncTeamSpaceModal:new(n().O2)("JiraSyncTeamSpaceModal",(async()=>Promise.all([o.e(75134),o.e(92845),o.e(84468),o.e(5605),o.e(48486),o.e(95794),o.e(13677),o.e(56952),o.e(25497),o.e(74562),o.e(27711),o.e(30291),o.e(12913),o.e(28464),o.e(6463),o.e(50569),o.e(93449),o.e(56188)]).then(o.bind(o,604698))))},a=(0,n()._h)(r.JiraSyncTeamSpaceModal,(e=>e.default)),s=(0,n()._h)(i.JiraSyncedAllProjectsTooltip,(e=>e.JiraSyncedAllProjectsTooltip)),l=(0,n()._h)(i.JiraDCAuthModal,(e=>e.default)),c=(0,n()._h)(i.JiraSyncedAllIssuesTooltip,(e=>e.JiraSyncedAllIssuesTooltip)),d=(0,n()._h)(i.JiraSyncedDatabaseViewsAndFiltersTooltip,(e=>e.JiraSyncedDatabaseViewsAndFiltersTooltip)),p=(0,n()._h)(i.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip,(e=>e.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip)),u=(0,n()._h)(i.JiraSyncSourceTooltip,(e=>e.JiraSyncSourceTooltip)),m=(0,n()._h)(i.JiraSyncInfoPopup,(e=>e.JiraSyncInfoPopup)),g=(0,n()._h)(i.ImproveJiraSyncPopup,(e=>e.ImproveJiraSyncPopup)),f=(0,n()._h)(i.ExternalImportAndSyncIndicator,(e=>e.ExternalImportAndSyncIndicator));(0,o(340498).xh)("jira",{default:{loader:()=>o.e(60677).then(o.bind(o,460677)),size:20},small:{loader:()=>o.e(60677).then(o.bind(o,460677)),size:16},mini:{loader:()=>o.e(60677).then(o.bind(o,460677)),size:14},large:{loader:()=>o.e(60677).then(o.bind(o,460677)),size:24}})},646668:(e,t,o)=>{o.d(t,{Rh:()=>f,d7:()=>d,nr:()=>u,rr:()=>m,uo:()=>g,v:()=>p});var n=()=>o(636090),i=()=>o(178492),r=()=>o(148307),a=()=>o(604995),s=()=>o(416504),l=()=>o(972435);const c=(0,o(959013).YK)({aiSummaryName:{id:"feature.ai_summary.name",defaultMessage:"AI summary"},aiSummaryDescription:{id:"feature.ai_summary.description",defaultMessage:"Summarize pages with AI"},aiAutofillName:{id:"feature.ai_autofill.name",defaultMessage:"Custom AI autofill"},aiAutofillDescription:{id:"feature.ai_autofill.description",defaultMessage:"Autofill properties with AI"},aiTranslationName:{id:"feature.ai_translation.name",defaultMessage:"AI translation"},aiTranslationDescription:{id:"feature.ai_translation.description",defaultMessage:"Translate pages with AI"},aiKeywordsName:{id:"feature.ai_keywords.name",defaultMessage:"AI keywords"},aiKeywordsDescription:{id:"feature.ai_keywords.description",defaultMessage:"Extract keywords with AI"}}),d=[{uri:i().Bn.priorityHmlFeature,name:"Priority",dependencies:[{uri:i().Kg.priorityHmlProperty,type:"property",collectionUri:n().iH,name:"Priority",description:"High, medium, or low",icon:r().A.images.appPackages.featurePrioritySvg,propertySchema:{type:"select",name:"Priority",options:[{id:"priority_low",value:"Low",color:"green"},{id:"priority_medium",value:"Medium",color:"yellow"},{id:"priority_high",value:"High",color:"red"}]}}],collectionUri:n().iH},{uri:i().Bn.progressBarFeature,collectionUri:n().iH,name:"Progress Bar",description:"Visual representation of progress",icon:r().A.images.appPackages.featureStatusSvg,dependencies:[{uri:i().Kg.progressBarCurrentProperty,type:"property",collectionUri:n().iH,name:"Progress Bar Current",propertySchema:{type:"number",name:"Current"}},{uri:i().Kg.progressBarTargetProperty,type:"property",collectionUri:n().iH,name:"Progress Bar Target",propertySchema:{type:"number",name:"Target"}},{uri:i().Kg.progressBarFormulaProperty,type:"property",collectionUri:n().iH,name:"Progress Bar Progress Formula",propertySchema:{type:"formula",name:"Progress bar",formula2:{code:[["‣",[["fpp",{property:i().Kg.progressBarCurrentProperty,collection:{id:n().iH,table:"collection"}}]]],["/"],["‣",[["fpp",{property:i().Kg.progressBarTargetProperty,collection:{id:n().iH,table:"collection"}}]]]],result_type:{type:"number"}},show_as:{type:"bar",color:"green",maxValue:1,showValue:!1},version:"v2"}}]},{uri:i().Bn.ganttChartFeature,collectionUri:n().iH,name:"Gantt Chat",description:"Chart to show progress of a project's tasks over time.",icon:r().A.images.appPackages.featureGanttSvg,dependencies:[{uri:i().Kg.ganttInitiativeProperty,type:"property",collectionUri:n().iH,name:"Initiative",description:"Initiatives associated with a specific project",icon:r().A.images.appPackages.featurePrioritySvg,propertySchema:{type:"select",name:"Initiative",options:[{id:"initiative_a",value:"Initiative A",color:"purple"},{id:"initiative_b",value:"Initiative B",color:"green"},{id:"initiative_c",value:"Initiative C",color:"blue"}]}},{uri:i().Kg.ganttDueDateProperty,type:"property",collectionUri:n().iH,name:"Due Date",description:"When a project is due.",icon:r().A.images.appPackages.featurePrioritySvg,propertySchema:{type:"date",name:"Due Date"}},{uri:i().Kg.ganttTimelineView,type:"collection_view",collectionUri:n().iH,description:"GANTT chart timeline view of projects",value:{type:"timeline",name:"Timeline",format:{collection_view_icon:"/icons/timeline_gray.svg",timeline_show_table:!0,timeline_table_properties:[{width:171,visible:!0,property:"title"},{width:200,visible:!0,property:i().Kg.ganttInitiativeProperty}],timeline_preference:{zoomLevel:"month",centerTimestamp:(0,a().ln)((0,a().Ec)((0,s().P)()),(0,s().P)())},collection_group_by:{sort:{type:"manual"},type:"multi_select",property:i().Kg.ganttInitiativeProperty,hideEmptyGroups:!0}},query2:{timeline_by:i().Kg.ganttDueDateProperty}},collectionViewBlockUri:n().eh}]}],p=[u(),m(),g(),f()];function u(){return{uri:i().Bn.aiSummaryFeature,collectionUri:n().iH,name:l().A.formatMessage(c.aiSummaryName),description:l().A.formatMessage(c.aiSummaryDescription),icon:r().A.images.appPackages.featureAiSummarizeSvg,tooltipImage:{img:r().A.images.tooltips.properties.aiAutofillSummaryPng,scale:.5},isAi:!0,dependencies:[{uri:i().Kg.aiSummaryProperty,type:"property",collectionUri:n().iH,name:l().A.formatMessage(c.aiSummaryName),propertySchema:{type:"text",name:l().A.formatMessage(c.aiSummaryName),ai_inference:{type:"summarize",auto_update_on_edit:!0}}}]}}function m(){return{uri:i().Bn.aiCustomAutofillFeature,collectionUri:n().iH,name:l().A.formatMessage(c.aiAutofillName),description:l().A.formatMessage(c.aiAutofillDescription),icon:"",tooltipImage:{img:r().A.images.tooltips.properties.aiCustomAutofillPng,scale:.5},isAi:!0,dependencies:[{uri:i().Kg.aiCustomAutofillProperty,type:"property",collectionUri:n().iH,name:l().A.formatMessage(c.aiAutofillName),propertySchema:{name:l().A.formatMessage(c.aiAutofillName),type:"text",ai_inference:{type:"custom",prompt:"",auto_update_on_edit:!0}}}]}}function g(){return{uri:i().Bn.aiTranslationFeature,collectionUri:n().iH,name:l().A.formatMessage(c.aiTranslationName),description:l().A.formatMessage(c.aiTranslationDescription),icon:"",tooltipImage:{img:r().A.images.tooltips.properties.aiTranslationPng,scale:.5},isAi:!0,dependencies:[{uri:i().Kg.aiTranslationProperty,type:"property",collectionUri:n().iH,name:l().A.formatMessage(c.aiTranslationName),propertySchema:{name:l().A.formatMessage(c.aiTranslationName),type:"text",ai_inference:{type:"custom",prompt:"",auto_update_on_edit:!0}}}]}}function f(){return{uri:i().Bn.aiKeywordsFeature,collectionUri:n().iH,name:l().A.formatMessage(c.aiKeywordsName),description:l().A.formatMessage(c.aiKeywordsDescription),icon:"",tooltipImage:{img:r().A.images.tooltips.properties.aiKeywordsPng,scale:.5},isAi:!0,dependencies:[{uri:i().Kg.aiKeywordsProperty,type:"property",collectionUri:n().iH,name:l().A.formatMessage(c.aiKeywordsName),propertySchema:{type:"multi_select",name:l().A.formatMessage(c.aiKeywordsName),select_ai_inference:{type:"multi_select",add_options:!0,auto_update_on_edit:!1}}}]}}},697650:(e,t,o)=>{o.d(t,{BN:()=>l,Qo:()=>c,xf:()=>d});var n=()=>o(56366),i=()=>o(416504),r=()=>o(792071),a=()=>o(959013),s=()=>o(46986);function l(e){var t;let{collectionStore:o,intl:n,isWorkflowsContainerWithCreationEnabled:i}=e;return(null==o||null===(t=o.getModel())||void 0===t?void 0:t.getEmptyTitlePlaceholder({intl:n,isWorkflowsContainerWithCreationEnabled:i,getRecordModel:o.getRecordModel}))??n.formatMessage(r().WBy.messages.newDatabase)}function c(e){var t;const{collectionStore:o,intl:n,isWorkflowsContainerWithCreationEnabled:r}=e;return(null==o||null===(t=o.getModel())||void 0===t?void 0:t.getRenderTitleWithPlaceholder({intl:n,isWorkflowsContainerWithCreationEnabled:r,getRecordModel:o.getRecordModel,userTimeZone:(0,i().P)()}))??l(e)}function d(e){const t=(0,a().tz)(),o=(0,s().x6)();return(0,n().K8)((()=>c({collectionStore:e,intl:t,isWorkflowsContainerWithCreationEnabled:o})),[e,t,o])}},735790:(e,t,o)=>{o.d(t,{M:()=>r});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.25 15.25 11.5",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M3 7.375h6.829a2.501 2.501 0 0 0 4.842 0H17a.625.625 0 1 0 0-1.25h-2.329a2.501 2.501 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25M12.25 5.5a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M7.75 15.75a2.5 2.5 0 0 0 2.421-1.875H17a.625.625 0 1 0 0-1.25h-6.829a2.5 2.5 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25h2.329A2.5 2.5 0 0 0 7.75 15.75m0-1.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})]})},r=(0,o(340498).wt)("sliders",i)},747671:(e,t,o)=>{o.d(t,{Q:()=>n,a:()=>i});let n=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});class i extends(()=>o(757695))().Store{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}}},748054:(e,t,o)=>{o.d(t,{M:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 2.68 12.51 14.37",svg:(0,o(474848).jsx)("path",{d:"M10.282 3.66a5.39 5.39 0 0 0-5.217-.54l-.711.305a.63.63 0 0 0-.38.575v12.425a.625.625 0 1 0 1.25 0v-3.913l.333-.142a4.14 4.14 0 0 1 4.008.414 5.39 5.39 0 0 0 5.504.405l1.06-.53a.63.63 0 0 0 .346-.56V4a.625.625 0 0 0-.905-.558l-1.06.53c-1.36.68-2.983.56-4.228-.312m-5.057 7.495V4.412l.332-.142a4.14 4.14 0 0 1 4.008.413 5.39 5.39 0 0 0 5.504.406l.156-.078v6.703l-.715.357c-1.36.68-2.983.56-4.228-.312a5.4 5.4 0 0 0-5.057-.604"})},i=(0,o(340498).wt)("flag",n)},748539:(e,t,o)=>{o.d(t,{f:()=>n});const n=new(o(645873).O2)("pageCovers",(async()=>{const{pageCovers:e}=await o.e(40198).then(o.bind(o,519737));return e}))},820579:(e,t,o)=>{o.d(t,{f:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.52 2.39 12.95 15.21",svg:(0,o(474848).jsx)("path",{d:"M10 2.4c.345 0 .625.28.625.625v9.966l3.333-3.333a.625.625 0 1 1 .884.884l-4.4 4.4a.625.625 0 0 1-.884 0l-4.4-4.4a.625.625 0 0 1 .884-.884l3.333 3.333V3.025c0-.345.28-.625.625-.625M4.15 16.35a.625.625 0 1 0 0 1.25h11.7a.625.625 0 0 0 0-1.25z"})},i=(0,o(340498).wt)("arrowLineDown",n)},835755:(e,t,o)=>{o.d(t,{p:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("collectionDescriptionSmall",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 4.667C6.69049 4.667 6.39366 4.54405 6.17481 4.32519C5.95595 4.10634 5.833 3.80951 5.833 3.5C5.833 3.19049 5.95595 2.89366 6.17481 2.67481C6.39366 2.45595 6.69049 2.333 7 2.333C7.30951 2.333 7.60634 2.45595 7.82519 2.67481C8.04405 2.89366 8.167 3.19049 8.167 3.5C8.167 3.80951 8.04405 4.10634 7.82519 4.32519C7.60634 4.54405 7.30951 4.667 7 4.667V4.667ZM8 11C8 11.2652 7.89464 11.5196 7.70711 11.7071C7.51957 11.8946 7.26522 12 7 12C6.73478 12 6.48043 11.8946 6.29289 11.7071C6.10536 11.5196 6 11.2652 6 11V7C6 6.73478 6.10536 6.48043 6.29289 6.29289C6.48043 6.10536 6.73478 6 7 6C7.26522 6 7.51957 6.10536 7.70711 6.29289C7.89464 6.48043 8 6.73478 8 7V11ZM7 0C5.14348 0 3.36301 0.737498 2.05025 2.05025C0.737498 3.36301 0 5.14348 0 7C0 8.85652 0.737498 10.637 2.05025 11.9497C3.36301 13.2625 5.14348 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 5.14348 13.2625 3.36301 11.9497 2.05025C10.637 0.737498 8.85652 0 7 0V0Z"})})},882262:(e,t,o)=>{o.d(t,{m:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.23 3.23 13.54 13.53",svg:(0,o(474848).jsx)("path",{d:"M4.485 8.86V5.369l4.073 4.073a.625.625 0 0 0 .884-.884L5.369 4.485h3.49a.625.625 0 1 0 0-1.25h-5a.625.625 0 0 0-.624.625v5a.625.625 0 0 0 1.25 0m10.146 6.655-4.07-4.07a.625.625 0 0 1 .884-.884l4.07 4.07V11.14a.625.625 0 1 1 1.25 0v5c0 .345-.28.625-.625.625h-5a.625.625 0 1 1 0-1.25z"})},i=(0,o(340498).wt)("arrowExpandDiagonal",n)},926329:(e,t,o)=>{o.d(t,{b:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("templates",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},937199:(e,t,o)=>{o.d(t,{LH:()=>r,Op:()=>i,bi:()=>l,sf:()=>s,v$:()=>a});o(16280);var n=o(296540);const i=(0,n.createContext)(null);function r(){const e=(0,n.useContext)(i);if(!e)throw new Error("usePageLayoutEditorContext must be used inside BaseLayoutEditorContext.Provider");return e}function a(){return(0,n.useContext)(i)}i.displayName="BaseLayoutEditorContext";const s=(0,n.createContext)(null);function l(){const e=(0,n.useContext)(s);if(!e)throw new Error("usePageLayoutEditorContext must be used inside PageLayoutEditorContextProvider");return e}s.displayName="PageLayoutEditorContext"},937943:(e,t,o)=>{o.r(t),o.d(t,{applyUntypedFeature:()=>s});var n=()=>o(534177),i=()=>o(896628),r=()=>o(646668),a=()=>o(614537);function s(e){var t;const{environment:o,collectionStore:s,collectionViewBlockStore:l,feature:c,transaction:d}=e,p=c.dependencies,u=(null===(t=l.getFormat())||void 0===t?void 0:t.app_uri_map)??{};for(const m of p)if("property"===m.type)(0,a().Io)({environment:o,collectionStore:s,dependency:m,blockUriMap:u,allFeatures:r().d7,transaction:d});else if("collection_view"===m.type){const e=(0,a().ww)({environment:o,collectionStore:s,collectionViewBlockStore:l,dependency:m,blockUriMap:u,transaction:d});i().zA({stores:[l],update:{app_uri_map:e},transaction:d})}else(0,n().HB)(m)}},948352:(e,t,o)=>{o.d(t,{M:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("templatesColor",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z",fill:"#3C9ED7"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z",fill:"#E7595E"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z",fill:"#F5BC4E"})]})})},951340:(e,t,o)=>{o.d(t,{DC:()=>s,NI:()=>a});o(898992),o(354520),o(581454);var n=()=>o(837384),i=()=>o(255591),r=()=>o(228271);function a(e){let{persona:t,defaultToLife:o}=e;if(!t)return;if(t in i().bJ)return t;const n={customer_support:"support",designer:"design",educator:"student",entrepreneur:"hr",freelancer:"design",hr_recruiting:"hr",it:"eng",marketing_sales:"marketing",media:"marketing",operations:"hr",operations_hr:"hr",personal:"life",product_manager:"product",programmer:"eng",other:o?"life":void 0,unfilled:o?"life":void 0,undefined:o?"life":void 0,creative:"design",founderCeo:"hr",internalCommunication:"hr",productDesign:"design",projectProgramMgmt:"product",finance:void 0,itAdmin:"eng",knowledgeManagement:"hr"};return(null==n?void 0:n[t])??void 0}function s(e,t){const o=a({persona:t,defaultToLife:!0});return(o?null==l?void 0:l[o]:[]).filter((t=>(0,r().vc)(t,e)))}const l={...i().PY,design:[n().kx.designSprint,n().kx.designPortfolio],product:[n().kx.productSpec,n().kx.productWiki,n().kx.visionAndStrategy],marketing:[n().kx.blogEditorialCalendar,n().kx.socialMediaCalendar,n().kx.presentation],hr:[n().kx.companyHome,n().kx.employeeBenefits,n().kx.peopleDirectory],sales:[n().kx.salesWiki,n().kx.presentation,n().kx.oneOnOneNotes],support:[],life:[]}},965072:(e,t,o)=>{o.r(t),o.d(t,{AppInitializationOverlay:()=>H});o(898992),o(354520),o(672577),o(803949),o(581454);var n=o(296540),i=()=>o(662303),r=()=>o(484714),a=()=>o(56366),s=()=>o(401497),l=()=>o(97789),c=()=>o(304740),d=()=>o(982615),p=()=>o(179034),u=()=>o(96689),m=()=>o(854150),g=()=>o(959013),f=()=>o(284371),y=()=>o(679924),v=()=>o(217429);var h=()=>o(413677),S=()=>o(751156),k=()=>o(767435),b=()=>o(925496),x=()=>o(617254),_=()=>o(422651),w=()=>o(313892),C=()=>o(200562),M=()=>o(186445),A=()=>o(644914),P=()=>o(765957),I=()=>o(548821),T=()=>o(630116),B=()=>o(704152),E=()=>o(288722),V=()=>o(594607),j=()=>o(331542),D=()=>o(204063),R=()=>o(299772),L=o(474848);function H(e){var t;const{collectionViewBlockStore:o}=e,H=(0,r().v3)(),W=(0,r().Y0)(),{isMobile:N}=W,F=(0,a().K8)((()=>({top:H.WindowSizeStore.getSafePaddingTopPx(0),bottom:H.WindowSizeStore.getSafePaddingBottomPx(64)})),[H.WindowSizeStore]),O=(0,s().IS)((e=>({overlay:{position:"absolute",top:0,left:0,overflow:"visible",height:"100vh",width:"100%",zIndex:999,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:e.surface.wash,borderLeft:`1px solid ${e.lightDividerColor}`},welcome:{maxWidth:375,minWidth:320,maxHeight:"100%",flex:1,display:"flex",flexDirection:"column",alignItems:"stretch",marginLeft:N?void 0:"10%",marginRight:N?void 0:"10%",padding:N?`${F.top}px 16px ${F.bottom}px 16px`:"64px 16px"},welcomeLogo:{height:48,width:48},welcomeTitle:{marginTop:24,color:e.text.primary,fontFamily:f().xf({locale:i().locale}),fontWeight:f().Wy.bold,fontSize:28,flex:0,display:"flex",flexDirection:"row",alignItems:"center"},welcomeSubtitle:{marginTop:6,fontSize:18,color:e.text.secondary,fontWeight:400,flex:0},presets:{marginTop:32,marginBottom:32,gap:12,display:"flex",flexDirection:"column"},presetSelected:{background:"dark"===e.mode?e.popoverBackground:e.buttonBackground,boxShadow:e.buttonBlueFocusRing},presetSelectedCheckmark:{width:24,height:24,color:e.blueButtonBackground,opacity:0,transform:"scale(0.8)",transition:"all 0.2s ease"},presetSelectedCheckmarkShown:{opacity:1,transform:"scale(1)"},preset:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",padding:"16px 14px 16px 16px",background:"dark"===e.mode?e.palette.gray[200]:e.buttonBackground,borderRadius:7,boxShadow:e.elevatedButtonBoxShadow,cursor:"pointer",transition:"box-shadow 0.1s ease, background 0.1s ease"},scroller:{overflow:"auto",padding:4},presetHovered:{background:"dark"===e.mode?e.palette.gray[200]:e.palette.gray[30]},presetTextContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",flex:1},presetIcon:{flexShrink:0,marginTop:2,marginBottom:2,width:20,height:20,marginRight:12},presetTitle:{color:e.text.primary,fontWeight:f().Wy.medium,fontSize:14,marginBottom:1},presetSubtitle:{color:e.text.secondary,fontWeight:f().Wy.regular,fontSize:14},previewContainer:{flex:1,overflow:"auto",height:"70%",borderRadius:"8px 0 0 8px",border:e.lightDividerColor,boxShadow:e.shadowMD,background:e.popoverBackground},previewImage:{width:"100%",height:"100%"},hamburgerButton:{position:"absolute",zIndex:1e3,margin:5}})),[N,F]),[U,K]=n.useState(!1),z=(0,a().O$)(P().AppStoreCurrentSpaceViewStore),J=(0,a().K8)((()=>{const e=o.getFormatStore().getKeyStore("app_config_uri").getValue();if(!e)return;return(0,w().yl)((0,x().appConfigs)(),e)}),[o]),[Y,Z]=n.useState(void 0);n.useEffect((()=>{Z(o.getFormatStore().getKeyStore("app_template_preset").getValue())}),[o,Z]);const q=(0,a().K8)((()=>{var e;return(null==J||null===(e=J.presets)||void 0===e?void 0:e.filter((e=>"core"===e.type)))??[]}),[null==J?void 0:J.presets]),[$,G]=n.useState(Y);n.useEffect((()=>{G(Y)}),[Y,G]),n.useEffect((()=>{J&&function(e,t){(0,y().v)(e,"app_preset_selection_shown",t),v().default.logEvent("app_preset_selection_shown",t.app_uri,t)}(H,{app_uri:J.uri})}),[J,H]);const X=n.useMemo((()=>null==J?void 0:J.presets.find((e=>e.uri===Y))),[J,Y]),Q=n.useMemo((()=>{if(J&&X&&J.uri===l().xc)return(0,_().xh)(X)}),[J,X]),ee=n.useMemo((()=>{if(!J)return;const t={};return J.presets.forEach((o=>{var n;const i=J.uri===l().xc?(0,_().xh)(o):null===(n=o.previews)||void 0===n?void 0:n.find((e=>"previewRootId"in e));i&&(t[o.uri]=T().Bv.createChildStore(e.collectionViewBlockStore,{id:i.previewRootId,table:p().ev,spaceId:i.spaceId}))})),t}),[J,e.collectionViewBlockStore]),te=(0,a().K8)((()=>{const e=(0,M().F8)(H);return{left:e,right:e,bottom:(0,R().Wj)(W),coverHeight:R().mv}}),[W,H]),oe=(0,a().K8)((()=>{var e;const t=null==X||null===(e=X.previews)||void 0===e?void 0:e.find((e=>"url"in e&&!(0,c().L_)(e)));if(t&&"url"in t)return t.url}),[null==X?void 0:X.previews]),ne=(0,r().WS)(),ie=(0,a().K8)((()=>!!H.device.isMobileBrowser||!H.device.isMobileNative&&!(0,A().KB)(H)),[H]);return n.useEffect((()=>{"rendered"!==P().default.state.renderPhase&&P().default.setState({...P().default.state,renderPhase:"rendered"})}),[]),J?(0,L.jsxs)(V().U,{calloutId:"better_template_initialization",children:[ie&&(0,L.jsx)("div",{style:O.hamburgerButton,children:(0,L.jsx)(C().z,{})}),(0,L.jsxs)("div",{style:O.overlay,children:[(0,L.jsxs)("div",{style:O.welcome,children:[(0,L.jsxs)("div",{style:O.scroller,children:[(0,L.jsx)("div",{style:O.welcomeLogo,children:(0,L.jsx)("img",{src:J.logo,style:{height:"100%",width:"100%"}})}),(0,L.jsx)("div",{style:O.welcomeTitle,children:J.welcomeTitle??(0,L.jsx)(g().sA,{id:"apps.AppInitializationOverlay.welcomeTitle.default",defaultMessage:"Welcome to {appName}",values:{appName:J.name}})}),(0,L.jsx)("div",{style:O.welcomeSubtitle,children:J.welcomeSubtitle??""}),(0,L.jsx)("div",{style:O.presets,children:q.map(((e,t)=>{var o;const n=null!==(o=e.icon)&&void 0!==o&&o.startsWith("/")?(0,L.jsx)("img",{src:e.icon,style:{height:"100%",width:"100%"}}):(0,L.jsx)(E().A,{children:e.icon??""});return(0,L.jsxs)(B().A,{style:{height:"auto",...O.preset,...Y===e.uri?O.presetSelected:{}},disabled:U,hoveredStyle:O.presetHovered,onClick:()=>{Z(e.uri),function(e,t){(0,y().v)(e,"app_preset_selection",t),v().default.logEvent("app_preset_selection",t.preset_uri,t)}(H,{preset_uri:e.uri})},onMouseEnter:H.device.isMobile?void 0:()=>G(e.uri),onMouseLeave:H.device.isMobile?void 0:()=>G(Y),children:[(0,L.jsx)("div",{style:O.presetIcon,children:n}),(0,L.jsxs)("div",{style:O.presetTextContainer,children:[(0,L.jsx)("div",{style:O.presetTitle,children:e.name}),(0,L.jsx)("div",{style:O.presetSubtitle,children:e.description})]}),(0,L.jsx)("div",{children:(0,d().$)({...O.presetSelectedCheckmark,...Y===e.uri?O.presetSelectedCheckmarkShown:void 0})})]},t)}))})]}),(0,L.jsx)("div",{style:{padding:`0 4px ${H.device.isIOS?"32px":0} 4px`,alignSelf:"stretch"},children:(0,L.jsxs)(D().A,{style:{alignSelf:"stretch",height:36,width:"100%"},disabled:U,onClick:async()=>{if(Y){if(K(!0),Q){const{currentSpaceStore:t,currentSpaceViewStore:o}=P().default.state;t&&o&&await h().loadAndDuplicatePageTemplate({environment:H,item:Q,isPrivate:!1,spaceStore:t,spaceViewStore:o,useMinimalTemplates:!1,initializeStore:e.collectionViewBlockStore})}else{const t=e.collectionViewBlockStore.getParentStore();!t||t.table!==u().NX&&t.table!==m().yK&&t.table!==p().ev||S().createAndCommit({userAction:"initializeApp",environment:H,canUndo:!0,perform:o=>{if(z){const n=k().initializeApp({environment:H,spaceViewStore:z,appUri:J.uri,presetUri:Y,appParentStore:t,temporaryContainerBlockStore:e.collectionViewBlockStore,transaction:o,from:"app_onboarding"});k().markTasksDatabaseTemplateIfNeeded(n),b().createSprintPage({environment:H,spaceViewStore:z,appParentStore:t,transaction:o,blockStores:n,creationEntryPoint:{type:"preset",presetUri:Y}})}}})}!function(e,t){(0,y().v)(e,"app_preset_accepted",t),v().default.logEvent("app_preset_accepted",t.preset_uri,t)}(H,{preset_uri:Y})}},children:[(0,L.jsx)(g().sA,{id:"apps.AppInitializationOverlay.startButton",defaultMessage:"Get started"}),U&&(0,L.jsx)(j().A,{style:{marginLeft:5},onDarkBackground:!0})]})})]}),!ne&&(0,L.jsx)("div",{style:O.previewContainer,children:ee&&$&&ee[$]?(0,L.jsxs)("div",{style:{width:"108%",minWidth:900,height:"auto",minHeight:"100%",position:"relative",paddingTop:Q?0:"10%"},children:[(0,L.jsx)("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:1,zIndex:999}}),(0,L.jsx)(R().Ay,{store:ee[$],context:I().Rr.InAppTemplatePreview,titleStyle:{fontSize:28},paddingBottom:te.bottom,disabled:!0},null===(t=ee[$])||void 0===t?void 0:t.id)]}):(0,L.jsx)("img",{src:oe,style:O.previewImage})})]})]}):null}},972911:(e,t,o)=>{o.r(t),o.d(t,{AiOnboardingQueuedSelectedStore:()=>m,advanceAITutorialTooltipsStage:()=>y,getAiOnboardingPhase:()=>g,onSpaceForAiTriggered:()=>f,useUpdateAskAIAnythingOnboardingState:()=>h,useUpdateRefineAIResponseOnboardingState:()=>v});o(16280);var n=o(296540),i=()=>o(484714),r=()=>o(56366),a=()=>o(591779),s=()=>o(495989),l=()=>o(751156),c=()=>o(755199),d=()=>o(765957),p=()=>o(337567),u=()=>o(323714);const m=o(757695).Store.createValue(void 0,{name:"AiOnboardingQueuedSelectedStore"});function g(){const{currentUserSettingsStore:e}=d().default.state;if(!e||!e.isReady())return;const t=e.getSettings();return t?t.ai_assistant_tooltips_onboarding_phase??"space_for_ai":void 0}function f(e){"space_for_ai"===g()&&y(e)}function y(e){const t=g();if(void 0===t)throw new Error("Assertion failure, AI onboarding state is undefined!");const o=s().aD.indexOf(t);if(-1===o)throw new Error(`Assertion failure, ${t} is not a valid AI onboarding state!`);if(o<s().aD.length-1){const{currentUserSettingsStore:t}=d().default.state;if(!t)return;const n=s().aD[o+1];l().createAndCommit({userAction:"AiOnboardingActions.advanceAIOnboardingStage",environment:e,canUndo:!0,perform:e=>{c().mJ({userSettingsStore:t,transaction:e,data:{ai_assistant_tooltips_onboarding_phase:n}})},userId:t.id}),"complete"===n&&(0,u().setAssistantOnboardingPhase)(e,{phase:"complete",transactionUserAction:"AiOnboardingActions.advanceAIAssistantOnboardingPhase.fromAiTooltips",userSettingsStore:t})}}function v(e){const t=(0,i().v3)(),o=(0,r().K8)((()=>{const e=(0,p().K1)();return!!e&&e.isStreaming()}),[]),s="completionPopup"===e.type&&"results"===e.stage&&!e.loading,l="assistantCompletionPopup"===e.type&&"results"===e.stage&&!o,c=s||l,d=(0,a().ZC)(c);(0,n.useEffect)((()=>{d&&!c&&"refine_ai_response"===g()&&y(t)}),[c,d,t])}function h(e){const t=(0,i().v3)(),o="results"===e.stage&&e.loading,r=(0,a().ZC)(o);(0,n.useEffect)((()=>{o&&!r&&"ask_ai_anything"===g()&&y(t)}),[o,r,t])}},975318:(e,t,o)=>{o.d(t,{D:()=>_});o(898992),o(823215),o(354520),o(581454);var n=o(296540),i=()=>o(484714),r=()=>o(56366),a=()=>o(401497),s=()=>o(584262),l=()=>o(959013),c=()=>o(160568),d=()=>o(557281),p=()=>o(751156),u=()=>o(284371),m=o(474848);const g=n.memo((function(e){const{prefix:t,collectionName:o}=e,n=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",fontWeight:u().Wy.medium,color:e.text.secondary,paddingLeft:8,paddingRight:8},databaseTitle:{...u().RC}})),[]);return(0,m.jsxs)("div",{style:n.container,children:[t,(0,m.jsxs)("span",{style:n.databaseTitle,children:[" ",o]})]})}));var f=()=>o(492414),y=()=>o(722872);const v=n.memo((function(e){const t=(0,i().v3)(),r=(0,l().tz)(),s=(0,a().IS)((e=>({link:{borderRadius:6,height:24,width:24,display:"flex"},button:{height:24,width:24,fill:e.icon.tertiary},icon:{width:20,height:20}})),[]),c=(0,n.useCallback)((()=>{o(148024).FH(t,{from:e.helpButtonContext})}),[t,e.helpButtonContext]);return(0,m.jsx)(o(187485).A,{href:e.href,external:!0,style:s.link,onClick:c,children:(0,m.jsx)(o(285790).A,{icon:o(406533).questionMarkCircleIcon,style:s.button,iconStyle:s.icon,ariaLabel:r.formatMessage({id:"helpButton.ariaLabel",defaultMessage:"Help"})})})}));var h=()=>o(763996),S=()=>o(419357),k=()=>o(939740),b=()=>o(89924);const x=(0,l().YK)({filterPlaceholder:{id:"collectionPicker.searchBarFilter.text",defaultMessage:"Filter…"}}),_=n.memo((function(e){const{collectionStore:t,isOverlay:s,onEmptyEnter:c,onEmptyPageClick:d,onCancelClick:p,canConfigureCollection:u,locked:g,onTemplateClick:f}=e,v=(0,i().Y0)(),[h,S]=(0,n.useState)(""),k=(0,r().uB)(void 0,o(970585).A),x=(0,r().K8)((()=>t.getTemplatePageStores().filter((e=>e.getAlive()))),[t]),_=(0,r().K8)((()=>x.every((e=>e.isReady()))),[x]),A=(0,r().K8)((()=>s&&null!=h&&h.length?(0,o(778078).Ay)(h,x,(e=>String(e.getProperties().title)??"")):x),[x,h,s]),P=(0,a().IS)((e=>({container:{fontSize:14,padding:v.isMobile?"12px 16px":"0 12px 4px 12px",color:e.text.tertiary,wordBreak:"keep-all",...v.isMobile&&{background:e.contentBackground,boxShadow:`0 1px 0 ${e.regularDividerColor}`,marginBottom:1}}})),[v.isMobile]);if(!_)return null;if(s){const e=x.length>6,n=v.isMobile?{menuType:y().gu.Modal,title:(0,m.jsx)(l().sA,{defaultMessage:"Database templates",id:"database.mobileTemplatesMenu.title"}),left:(0,m.jsx)(o(480095).CancelMenuText,{}),onClickLeft:p}:{menuType:y().gu.Popup,width:360};return(0,m.jsxs)(o(928600).A,{...n,header:(0,m.jsx)(w,{collectionStore:t}),children:[0===x.length&&(0,m.jsx)(b().A,{children:(0,m.jsx)("div",{style:P.container,children:(0,m.jsx)(l().sA,{defaultMessage:"Create a reusable page template for this database.",id:"database.emptyTemplatesList.info"})})}),e?(0,m.jsx)(C,{templateInputValue:h,setTemplateInputValue:S}):null,(0,m.jsx)(M,{collectionStore:t,onEmptyEnter:c,onEmptyPageClick:d,onCancelClick:p,canConfigureCollection:u,isOverlay:s,locked:g,onTemplateClick:f,menuListStore:k,templateInputValue:h,filteredTemplatePageStores:A,draggable:!(e&&h)})]})}return(0,m.jsx)(M,{collectionStore:t,onEmptyEnter:c,onEmptyPageClick:d,onCancelClick:p,canConfigureCollection:u,isOverlay:s,locked:g,onTemplateClick:f,menuListStore:k,templateInputValue:h,filteredTemplatePageStores:A,draggable:!0})})),w=n.memo((function(e){const{collectionStore:t}=e,{isMobile:n}=(0,i().Y0)(),s=(0,l().tz)(),c=(0,o(46986).x6)(),d=(0,r().K8)((()=>(0,o(697650).Qo)({collectionStore:t,intl:s,isWorkflowsContainerWithCreationEnabled:c})),[t,s,c]),p=(0,a().IS)((()=>({container:{marginTop:6}})),[]);return n?null:(0,m.jsx)(o(678553).Ay,{style:p.container,title:(0,m.jsx)(g,{prefix:(0,m.jsx)(l().sA,{id:"database.templatesList.templatesFor",defaultMessage:"Templates for"}),collectionName:d}),right:(0,m.jsx)(v,{helpButtonContext:"collection_templates_menu",href:(0,o(836251).xS)("guides.databaseTemplates")})})})),C=n.memo((function(e){const{templateInputValue:t,setTemplateInputValue:r}=e,{isMobile:s,isAndroid:c}=(0,i().Y0)(),d=(0,l().tz)(),p=(0,n.useCallback)((e=>r(e.currentTarget.value)),[r]),u=(0,a().IS)((()=>({container:{margin:s?0:"10px 0"},input:{...c&&{borderBottom:"none"}}})),[c,s]);return(0,m.jsx)("div",{style:u.container,children:(0,m.jsx)(S().Ay,{value:t,focusInitial:!s||void 0,placeholder:d.formatMessage(x.filterPlaceholder),showClearButton:!0,inputLeft:(0,m.jsx)(S().Zf,{icon:o(207207).J}),onChange:p,style:u.input})})})),M=n.memo((function(e){const{filteredTemplatePageStores:t,draggable:a,collectionStore:l,onEmptyEnter:u,onEmptyPageClick:g,onCancelClick:y,canConfigureCollection:v,isOverlay:S,locked:x,onTemplateClick:_,menuListStore:w,templateInputValue:C}=e,M=(0,i().v3)(),{isMobile:P}=(0,i().Y0)(),I=(0,n.useContext)(o(175116).p2),T=(0,n.useContext)(o(484792).n),B=(0,r().K8)((()=>(0,o(611371).EF)(M)),[M]),E=(0,n.useCallback)((e=>{w.unsetFocus(),p().createAndCommit({userAction:"CollectionTemplatePicker.handleCollectionTemplatesReorder",environment:M,canUndo:!0,perform:t=>d().lU({collectionStore:l,newTemplateIds:e,transaction:t})})}),[M,l,w]),V=(0,n.useCallback)((()=>{var e;B&&(u(),c().ki(M,{template_type:"empty_page",from:"collections_template_picker",is_keyboard:!0,collection_id:l.id,collection_view_id:null==I||null===(e=I.collectionViewStore())||void 0===e?void 0:e.id}))}),[M,l,u,I,B]),j=(0,n.useCallback)((e=>{B&&(g(e.event),c().ki(M,{template_type:"empty_page",from:"collections_template_picker",is_keyboard:"keydown"===e.event.type,...I&&(0,o(476492).sl)(I)}))}),[B,I,M,g]),D=(0,n.useCallback)((()=>{var e;if(!B)return;const{performResult:t}=p().createAndCommit({userAction:"CollectionTemplatePicker.newPage",environment:M,canUndo:!0,perform:e=>d().bI({environment:M,collectionStore:l,transaction:e,title:C})});if(t){const{mainEditorCurrentBlockStore:e}=o(765957).default.state,n=e?(0,f().Ay)({store:e,peekViewBlockId:t.id,fullyQualified:!1,pageVisitSource:s().y8.Create}):(0,f().Ay)({store:t,fullyQualified:!1,pageVisitSource:s().y8.Create});T?T(n):o(435009).oo({environment:M,url:n})}c().er(M,{collection_id:l.id,collection_view_id:null==I||null===(e=I.collectionViewStore())||void 0===e?void 0:e.id}),null==y||y()}),[B,M,l,I,C,y,T]),R=(0,n.useMemo)((()=>({key:"create-template",render:e=>(0,m.jsx)(A,{isOverlay:S,locked:x,menuListItemProps:e}),action:D})),[D,S,x]),L=(0,r().K8)((()=>null==I?void 0:I.defaultPageTemplateStore.state),[I]),H=(0,r().K8)((()=>({key:"empty",render:e=>0===t.length||""!==C?null:(0,m.jsx)(h().K,{collectionStore:l,canConfigureCollection:v,isOverlay:S,templateStore:void 0,isMobile:P,locked:x||!v,draggable:!0,isDefault:void 0===(null==L?void 0:L.id),onCancelClick:y,...e}),action:j})),[v,l,null==L?void 0:L.id,P,j,S,x,y,C,t.length]),W=(0,n.useCallback)((e=>{const t=e.getAutomationStore(),i=null!=t&&t.isActive()?t.getRecurrence():void 0,r=t&&!t.canEdit(),s="disabled_duplication"===(null==t?void 0:t.getStatus())||"disabled_inactive_space"===(null==t?void 0:t.getStatus()),c={key:e.id,render:t=>(0,n.createElement)(h().K,{...t,key:e.id,isOverlay:S,collectionStore:l,canConfigureCollection:v,templateStore:e,isMobile:P,locked:x,onCancelClick:y,draggable:a,isDefault:(null==L?void 0:L.id)===e.id,recurrence:i,recurrenceDisabled:s,recurrenceButtonDisabled:r}),action:t=>{B&&_({templateStore:e,isKeyboard:"keydown"===t.event.type,useCrdt:(0,o(518736).D8)(l.getSpaceStore())})}};return c}),[v,B,l,null==L?void 0:L.id,a,P,S,x,y,_]),N=(0,r().K8)((()=>{const e=t.map((e=>e.id)),n=[0!==t.length?{key:"templates",render:t=>{if(0===t.children.length)return null;const n=t.children.slice(0,t.children.length-1),i=t.children[t.children.length-1];return(0,m.jsx)(b().A,{...t,disableDesktopPadding:!S,disableMobileBorders:!0,children:(0,m.jsxs)(m.Fragment,{children:[P||x||!v?n.map(((e,t)=>n[t])):(0,m.jsx)(o(439264).Ay,{direction:"vertical",keys:e,disabled:!a,renderKey:t=>n[e.indexOf(t)],onDrop:E}),i]})})},items:[...t.map(W),H]}:null,v?{key:"create-template",render:e=>(0,m.jsx)(b().A,{topBorder:S,disableDesktopPadding:!S,disableMobileBorders:!0,...e}),items:[R]}:null];return n.filter((e=>null!==e))}),[t,W,H,v,R,S,P,x,a,E]);return(0,m.jsx)(k().Ay,{type:k().Oh.Vertical,store:w,sections:N,onEmptyEnter:V,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,resetFocusOnMouseOut:!0})})),A=n.forwardRef((function(e,t){const{menuListItemProps:n,isOverlay:i,locked:r}=e,a=(0,m.jsx)(l().sA,{defaultMessage:"New template",id:"database.templateView.newTemplateButton"});return i?(0,m.jsx)(o(274652).o,{title:a,color:"secondary",...n}):(0,m.jsx)(o(286611).J,{title:a,icon:(0,o(617668).plusIcon)(),type:"new_template",format:i?"collection-overlay":"page-menu-item",locked:r,...n})}))},982615:(e,t,o)=>{o.d(t,{$:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("checkmark",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M10.0693 18.166C14.7759 18.166 18.6606 14.2812 18.6606 9.58301C18.6606 4.88477 14.7676 1 10.061 1C5.36279 1 1.48633 4.88477 1.48633 9.58301C1.48633 14.2812 5.37109 18.166 10.0693 18.166ZM9.13965 13.6836C8.82422 13.6836 8.56689 13.5508 8.33447 13.2437L6.30078 10.7783C6.15137 10.5874 6.07666 10.3965 6.07666 10.189C6.07666 9.75732 6.41699 9.40869 6.84863 9.40869C7.10596 9.40869 7.30518 9.5 7.521 9.77393L9.11475 11.791L12.5347 6.3125C12.7173 6.02197 12.9497 5.88086 13.2153 5.88086C13.6387 5.88086 14.0205 6.17139 14.0205 6.61133C14.0205 6.80225 13.9209 7.00977 13.8047 7.19238L9.91162 13.2437C9.729 13.5342 9.45508 13.6836 9.13965 13.6836Z"})})},990402:(e,t,o)=>{o.d(t,{m:()=>i});var n=()=>o(46986);function i(e){return("workflow"===e.getType()||e.isCollectionView()&&e.getWorkflowStore())&&e.canEdit()&&!e.isSystemBlock()&&(0,n().re)()}}}]);