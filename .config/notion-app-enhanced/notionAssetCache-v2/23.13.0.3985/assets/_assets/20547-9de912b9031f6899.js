"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[20547],{2609:(e,t,i)=>{i.d(t,{J2:()=>_,NF:()=>M,gA:()=>j,hr:()=>w,jl:()=>k,p6:()=>R,rQ:()=>I});i(898992),i(672577),i(581454),i(296540);var o=()=>i(56366),r=()=>i(401497),a=()=>i(803960),n=()=>i(959013),s=()=>i(722872),l=()=>i(115512),c=()=>i(700250),d=()=>i(493823),u=()=>i(843189),g=()=>i(760217),p=()=>i(406699),m=()=>i(331542),v=()=>i(928600),f=()=>i(939740),h=()=>i(554509),y=()=>i(204063),S=()=>i(73332),b=()=>i(89924),x=()=>i(475971),A=i(474848);const j=24,_=440,M=_+40;function I(e){const{icon:t,title:i,byline:o,bylineWidthOverride:a}=e,n=(0,r().IS)((()=>({container:{margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",gap:8},title:{textAlign:"center"},byline:{textAlign:"center"}})),[]);return(0,A.jsxs)("div",{style:n.container,children:[t,(0,A.jsx)(h().D,{styleName:"Heading-17px/Semibold",customStyles:n.title,children:i}),(0,A.jsx)(h().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",customStyles:a?{...n.byline,width:a}:n.byline,children:o})]})}function k(e){const{primaryText:t,primaryAction:i,primaryDisabled:o,secondaryText:a,secondaryAction:n,isLightRed:s,isDarkRed:l,isLoading:c}=e,g=!(s||l),p=(0,r().IS)((e=>({container:{margin:"0 auto",display:"flex",flexDirection:g?"row-reverse":"column",alignItems:"center",justifyContent:g?"flex-start":"flex-end",gap:8,padding:"0 20px",marginLeft:-20,width:"calc(100% + 40px)"},fullWidth:g?{}:{width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},cancelButton:{...x().W,height:32,color:e.text.secondary}})),[g]);return(0,A.jsxs)("div",{style:p.container,children:[s?(0,A.jsx)(u().E,{size:"lg",onClick:i,color:s?"uiRed":void 0,disabled:o,style:p.fullWidth,children:c?(0,A.jsx)(m().A,{}):t}):(0,A.jsx)(y().A,{size:"lg",onClick:i,disabled:o,style:p.fullWidth,isRed:l,children:c?(0,A.jsx)(m().A,{}):t}),(0,A.jsx)(d().p,{size:"lg",onClick:n,style:{...p.fullWidth,...p.cancelButton},children:a})]})}function w(e){const{selectedId:t,options:i,onChange:o}=e,l=(0,r().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:8},chevron:{width:12,marginLeft:3,marginRight:3,fill:e.icon.tertiary},selectedButton:{width:"100%",margin:0,paddingTop:4,paddingBottom:4,border:`1px solid ${e.outlineButtonBorder}`},icon:{alignSelf:"start",marginTop:0,fill:e.icon.secondary,height:18,width:18}})),[]);return(0,A.jsxs)("div",{style:l.container,children:[(0,A.jsx)(h().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,A.jsx)(n().sA,{id:"orgConsole.modal.dropdown.title",defaultMessage:"Select role"})}),(0,A.jsx)(p().Ay,{popupType:p().z7.Popup,renderOrigin:e=>{const o=i.find((e=>e.id===t));return o?(0,A.jsx)(g().A,{...e,title:o.title,caption:o.caption,icon:o.icon({fill:l.icon.fill}),desktopIconStyle:l.icon,disabled:!1,right:(0,a().arrowChevronSingleDownIcon)(l.chevron),shouldWrapCaption:!0,buttonStyle:l.selectedButton,focused:!1}):null},originGap:8,placementToOrigin:c().UV.Bottom,alignmentToOrigin:c().MY.Center,sameWidthAsOrigin:!0,render:e=>{const r=[{key:"options",render:e=>(0,A.jsx)(b().A,{...e,topBorder:0!==e.index}),items:i.map((i=>{const r=i.id===t;return{key:i.id,render:e=>(0,A.jsx)(g().A,{...e,title:i.title,caption:i.caption,icon:i.icon({fill:l.icon.fill}),desktopIconStyle:l.icon,isChecked:r,shouldWrapCaption:!0}),action:()=>{o(i.id),e.close()}}}))}];return(0,A.jsx)(v().A,{menuType:s().gu.Popup,children:(0,A.jsx)(f().Ay,{type:f().Oh.Vertical,initialFocus:void 0,sections:r})})}})]})}function R(e){const{items:t,selectedIds:i,disabledIds:a,onSelectHeader:n,onSelect:s,titleText:c,headerText:d,headerAction:u}=e,g=(0,r().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:8,marginBottom:4},selectorContainer:{border:`1px solid ${e.stroke.secondary}`,boxShadow:"0px 2px 4px 0px #0000000a",borderRadius:8},checkbox:{display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},headerText:{display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},right:{display:"flex",justifyContent:"flex-end",alignItems:"flex-end",flexDirection:"row"},workspace:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",gap:8},byline:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"},bylineWithoutCheckboxes:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center",height:28,width:28},textContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",gap:2},selectorHeader:{padding:"4px 12px",borderBottom:`1px solid ${e.stroke.secondary}`,display:"grid",gridTemplateColumns:"24px 1fr 1fr"},selectorHeaderWithAction:{padding:"4px 4px 4px 12px",borderBottom:`1px solid ${e.stroke.secondary}`,display:"grid",gridTemplateColumns:"24px 1fr 1fr"},selectorBody:{paddingInline:12,display:"flex",flexDirection:"column",alignItems:"center",justifyItems:"center",width:"100%",maxHeight:204,overflowX:"hidden",overflowY:"auto"},selectorBodyRow:{display:"grid",gridTemplateColumns:"24px minmax(auto, 50%) 1fr",width:"100%",paddingBlock:8,gap:8,borderTop:`1px solid ${e.stroke.secondary}`}})),[]),p=void 0!==i&&void 0!==a&&s&&n,m=void 0!==a?t.length-a.length:0,v=(0,o().K8)((()=>{if(void 0===i)return!1;let e=0;for(const o of t)i.includes(o.id)&&(e+=1);return 0!==e&&(e===m?0!==m:"partial")}),[t,i,m]);return(0,A.jsxs)("div",{style:g.container,children:[(0,A.jsx)(h().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:c}),(0,A.jsxs)("div",{style:g.selectorContainer,children:[(0,A.jsxs)("div",{style:{...u?g.selectorHeaderWithAction:g.selectorHeader,gridTemplateColumns:p?"24px 1fr 1fr":"1fr 1fr"},children:[p?(0,A.jsx)("div",{style:g.checkbox,children:(0,A.jsx)(S().T,{checked:v,size:14,onClick:n})}):null,(0,A.jsx)(h().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",customStyles:g.headerText,children:d}),(0,A.jsx)("div",{style:g.right,children:u})]}),(0,A.jsx)("div",{style:g.selectorBody,children:t.map(((e,t)=>{let{id:o,icon:r,name:n,caption:c,byline:d}=e;return(0,A.jsxs)("div",{style:{...g.selectorBodyRow,borderTopWidth:0===t?0:1,gridTemplateColumns:p?"24px minmax(auto, 50%) 1fr":"minmax(auto, 50%) 1fr"},children:[p?(0,A.jsx)("div",{style:g.checkbox,children:(0,A.jsx)(S().T,{checked:i.includes(o)||a.includes(o),size:14,onClick:()=>s(o),disabled:a.includes(o),style:{opacity:a.includes(o)?.3:1}})}):null,(0,A.jsxs)("div",{style:g.workspace,children:[(0,A.jsx)("div",{style:g.iconContainer,children:r}),(0,A.jsxs)("div",{style:g.textContainer,children:[(0,A.jsx)(h().D,{styleName:"UIRegular-14px/Medium",customStyles:{...(0,l().pA)(1),textOverflow:"ellipsis"},children:n}),c?(0,A.jsx)(h().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:{...(0,l().pA)(1),textOverflow:"ellipsis"},children:c}):null]})]}),(0,A.jsx)("div",{style:g.byline,children:d})]},o)}))})]})]})}},51334:(e,t,i)=>{i.d(t,{_:()=>c});var o=()=>i(908006),r=()=>i(912720),a=()=>i(763824),n=()=>i(686526),s=()=>i(837570),l=()=>i(799832);async function c(e){const{environment:t,automationNavigableBlockStore:i,automationId:c,source:d,rootStore:u}=e;await o().default.afterNextFlush();const g=await async function(e,t){const i=Date.now(),o=async()=>{const r=e();return void 0!==r?r:Date.now()-i>=t?void 0:(await(0,a().wR)(10),await o())};return await o()}((()=>(0,l().U)(i)),2e3);if(!g)return;const p=g.settingsStore;if(p)if(c){"event"===u.getRecordStore(u,{table:r().yB,id:c,spaceId:u.getSpaceId()}).getTriggerType()&&(n().Ow({collectionContextStore:g,collectionSettingsStore:p}),s().h({environment:t,collectionContextStore:g,collectionSettingsStore:p,mode:"edit_automation",automationId:c,source:d}))}else n().Ow({collectionContextStore:g,collectionSettingsStore:p}),n().R8({collectionSettingsStore:p,item:{type:"automationSettings",source:d}})}},68913:(e,t,i)=>{i.r(t),i.d(t,{alarmIcon:()=>a,iconDefinition:()=>r});i(296540);var o=i(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"1.91 0.78 16.18 16.85",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M5.791 1.886a.625.625 0 1 0-.801-.96L2.138 3.31a.625.625 0 1 0 .802.96zm4.834 3.839a.625.625 0 1 0-1.25 0v3.65H6.4a.625.625 0 0 0 0 1.25H10c.345 0 .625-.28.625-.625z"}),(0,o.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0M14.13 1.006a.625.625 0 0 0 .079.88l2.851 2.383a.625.625 0 1 0 .802-.96L15.01.927a.625.625 0 0 0-.88.079"})]})},a=(0,i(340498).wt)("alarm",r)},94701:(e,t,i)=>{i.r(t),i.d(t,{checkmarkFillIcon:()=>r,iconDefinition:()=>o});i(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.66 3.66 12.68 12.68",svg:(0,i(474848).jsx)("path",{d:"M15.913 3.787a.875.875 0 0 1 .3 1.2L9.658 15.914a.875.875 0 0 1-1.415.119l-4.37-5.098a.875.875 0 0 1 1.329-1.14l3.58 4.177 5.93-9.884a.875.875 0 0 1 1.2-.3"})},r=(0,i(340498).wt)("checkmarkFill",o)},101847:(e,t,i)=>{i.d(t,{T:()=>o});const o=(0,i(340498).xh)("gift",{default:{loader:()=>i.e(23202).then(i.bind(i,723202))},small:{loader:()=>i.e(2264).then(i.bind(i,902264))},mini:{loader:()=>i.e(42668).then(i.bind(i,542668))},large:{loader:()=>i.e(25196).then(i.bind(i,725196))}})},126550:(e,t,i)=>{i.d(t,{t:()=>s});var o=()=>i(792071),r=()=>i(848538),a=()=>i(798880),n=()=>i(436856);function s(e,t){const i=o().Bj6.fromAccessRequest(e);if(!i.isPageAccessRequest())return!1;const s=i.getForActorPointer(t.id);return s.table===a().oo&&!n().V.createChildStore(t,r().i1({userId:s.id,spaceId:t.id})).isMember()}},201361:(e,t,i)=>{i.d(t,{P:()=>a});i(296540);var o=i(474848);const r={viewBox:"2.72 1.1 15.56 16.51",svg:e=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.93132 1.82416C6.22047 1.48199 4.62427 2.79056 4.62427 4.5353C4.62427 5.09457 4.79032 5.61505 5.07582 6.05014H4.29912C3.42927 6.05014 2.72412 6.75529 2.72412 7.62514V9.52514C2.72412 10.1359 3.07175 10.6654 3.57994 10.9267H9.37427V6.05643H10.6243V10.9267H16.4183C16.9265 10.6654 17.2741 10.1359 17.2741 9.52514V7.62514C17.2741 6.75529 16.569 6.05014 15.6991 6.05014H14.9228C15.2082 5.61507 15.3743 5.09461 15.3743 4.53538C15.3743 2.78566 13.7613 1.48542 12.0554 1.82661C11.2118 1.99533 10.4924 2.47592 10.0119 3.13467C9.54306 2.48204 8.83618 2.00513 8.00124 1.83815L7.93132 1.82416ZM9.37427 5.03772V6.05013H7.3891C6.55248 6.05013 5.87427 5.37192 5.87427 4.5353C5.87427 3.57937 6.74882 2.86241 7.68618 3.04989L7.7561 3.06387C8.69699 3.25205 9.37427 4.07819 9.37427 5.03772ZM14.1243 4.53538C14.1243 5.36715 13.4539 6.04235 12.624 6.05014H10.6243V5.08677C10.6243 4.10164 11.3289 3.24667 12.3005 3.05234C13.2428 2.86389 14.1243 3.58444 14.1243 4.53538Z",style:{rotate:"animate"===e?"14deg":"0deg",transformOrigin:"75% center",transition:"rotate 0.548s linear(\n    \t\t\t\t0, 0.007, 0.028 1.8%, 0.113 3.9%, 0.613 12.1%, 0.817 16.2%, 0.894,\n   \t\t\t\t\t0.954 20.4%, 1, 1.031 25.1%, 1.043 26.4%, 1.051, 1.055, 1.056 31.2%,\n    \t\t\t\t1.049 34.9%, 1.012 46.3%, 0.999 54.2%, 0.997 61.9%, 1\n  \t\t\t\t)"}}),(0,o.jsx)("path",{d:"M10.6243 12.1768H16.4133V15.7002C16.4133 16.5701 15.7082 17.2752 14.8383 17.2752H10.6243V12.1768Z"}),(0,o.jsx)("path",{d:"M3.58521 12.1768H9.37427V17.2752H5.1602C4.29036 17.2752 3.58521 16.5701 3.58521 15.7002V12.1768Z"})]})},a=(0,i(882827).p)("presentFillAnimated",r)},208603:(e,t,i)=>{i.d(t,{i9:()=>s,lP:()=>l,sH:()=>n});var o=i(296540),r=()=>i(401497),a=()=>i(625634);function n(e){let{icon:t,style:i,animationState:o}=e;return"static"===t.type?t.iconFn(i,void 0,void 0,"all"):t.iconFn({style:i,animationState:o})}function s(e,t){return(0,r().IS)((i=>({icon:{fill:i.icon[e.iconColor],...t?{width:a().z[t],height:a().z[t]}:{}}})),[t,e]).icon}function l(){const[e,t]=o.useState("initial");return{animationState:e,animationTriggers:{onMouseEnter:()=>t("animate"),onMouseLeave:()=>t("initial")}}}},254437:(e,t,i)=>{i.d(t,{F:()=>r});i(296540);var o=i(474848);const r=(0,i(340498).wt)("mail",{viewBox:"0 0 30 30",svg:(0,o.jsx)("path",{d:"M0,4v22h30V4H0z M17.591,16.33C16.137,17.753,15.819,18,15,18s-1.137-0.247-2.555-1.635L2,6h26L17.591,16.33z M2,8.814 l7.17,7.119L2,21.8V8.814z M2.445,24l8.141-6.661L11,17.75c1.438,1.406,2.281,2.25,4,2.25s2.563-0.844,4-2.25l0.414-0.411L27.555,24 H2.445z M28,21.8l-7.17-5.867L28,8.814V21.8z"})})},302873:(e,t,i)=>{i.d(t,{A:()=>E});var o=i(296540),r=()=>i(484714),a=()=>i(56366),n=()=>i(401497),s=()=>i(764880),l=()=>i(869190),c=()=>i(402390),d=()=>i(68263),u=()=>i(296344),g=()=>i(310442),p=()=>i(179034),m=()=>i(824862),v=()=>i(96689),f=()=>i(798880),h=()=>i(959013),y=()=>i(496603),S=()=>i(534177),b=()=>i(284371),x=()=>i(848259),A=()=>i(701763),j=()=>i(572080),_=()=>i(579627),M=()=>i(246826),I=()=>i(751156),k=()=>i(126550),w=()=>i(731320),R=()=>i(963575),C=()=>i(212326),T=()=>i(765957),B=()=>i(715392),K=()=>i(682197),q=()=>i(12296),N=()=>i(770176),P=()=>i(493823),W=()=>i(864943),F=()=>i(125565),L=()=>i(912913),D=i(474848);const V=i(757695).Store.createClass(void 0,{name:"RoleStore"});const E=function(e){const{accessRequestStore:t,targetBlockStore:i,notification:o,initialRole:r,rootStore:n,activity:s,tabArgs:l}=e,c=(0,a().uB)(void 0,V),d=(0,a().K8)((()=>t.getValue()),[t]),g=(0,a().K8)((()=>i.canAdmin()),[i]);return d?(0,u().z)(d)?(0,D.jsx)(ee,{accessRequestStore:t,accessRequestValue:d}):g?(0,D.jsx)(Z,{accessRequestStore:t,notification:o,targetBlockStore:i,initialRole:r,roleStore:c,accessRequestValue:d,rootStore:n,activity:s,tabArgs:l}):null:null};function z(){const e=(0,n().IS)((e=>({banner:{borderRadius:R().A.borderRadius,padding:"5px 8px",background:e.palette.yellow[50],marginBottom:12,fontSize:b().J.UISmall.desktop,lineHeight:b().K_.UISmall.desktop,fontWeight:b().Wy.regular,color:e.palette.yellow[500]}})),[]);return(0,D.jsx)("div",{style:e.banner,children:(0,D.jsx)(h().sA,{defaultMessage:"Make sure you trust this external user before sharing any content",id:"grantPageAccessActivityAction.externalWarning"})})}function H(e,t){const i=e.getValue();if(!i)return;const o=t.getPermissionItems();for(const r of o){if(i.for_actor_table===f().oo&&(0,d().B2)(r)&&r.user_id===i.for_actor_id)return r;if(i.for_actor_table===m().GP&&(0,d().P3)(r)&&r.bot_id===i.for_actor_id)return r}}function O(e){return{tab:x().jD(),activityId:null==e?void 0:e.activity_id,notificationId:null==e?void 0:e.id}}function U(e,t){const i={borderRadius:6,height:32,paddingLeft:12,paddingRight:12,border:`1px solid ${t.stroke.primary}`,fontSize:14,marginRight:10,fontWeight:b().Wy.medium};return e?i:{...i,color:t.text.primary,fontWeight:500}}function $(e){const{notification:t,accessRequestStore:i,activity:o,tabArgs:a}=e,n=(0,r().v3)();return t?t.visited?null:(0,D.jsx)(K().g,{children:(0,D.jsx)(P().p,{size:"lg",onClick:e=>{(0,q().jU)({...a,environment:n,activity:o}),function(e,t,i,o){if(!o)return;I().createAndCommit({userAction:"GrantPageAccessActivityAction.handleArchive",environment:i,canUndo:!0,perform:e=>{j().s4({notification:o,rootStore:t,transaction:e})}});const r=t.id,a=O(o);A().Fs(i,{...a,requestId:r})}(0,i,n,t)},style:{fontSize:14,borderRadius:6,fontWeight:b().Wy.medium},children:(0,D.jsx)(h().sA,{defaultMessage:"Deny",id:"grantPageAccessActivityAction.ignoreButton.label.deny"})})}):null}function G(e,t,i,o){const r=H(e,t),a=r&&r.role;return o.state||a||i}function Y(e,t,i,o,r){var a;const n=function(e,t,i,o){const r=e.getValue();if(r)return r.for_actor_table===f().oo?{type:"user_permission",user_id:r.for_actor_id,role:G(e,t,i,o)}:r.for_actor_table===m().GP?{type:"bot_permission",bot_id:r.for_actor_id,role:G(e,t,i,o)}:void(r.for_actor_table!==g().yj&&(0,S().HB)(r.for_actor_table))}(t,i,o,r);if(!n)return{};if(H(t,i))return{permissionItem:n};const s=null===(a=T().default.getState().currentSpaceStore)||void 0===a?void 0:a.id;if(!s)return{};if("user_permission"===n.type){const i=B().W.getData(e,{userId:n.user_id,spaceId:s});if(i&&"none"!==i.membership_type){return{type:"existingUser",value:t.getRecordModel({table:f().oo,id:n.user_id}),permissionItem:n}}return{permissionItem:n}}if("bot_permission"===n.type){const e=t.getRecordModel({table:m().GP,id:n.bot_id}),i=s&&s===(null==e?void 0:e.space_id)&&e.alive;return e&&!i?{type:"bot",value:e,permissionItem:n}:{permissionItem:n}}(0,S().HB)(n)}function Q(e,t,i){if(e===f().oo){const o=i.getRecordModel({table:e,id:t});if(o)return(0,s().A7)(o)}if(e===m().GP){const o=i.getRecordModel({table:e,id:t});if(o)return(0,s().qt)(o)}}async function J(e,t,i,o,r,a,n,s){if(o.getKeyStore("for_actor_table").getValue()!==f().oo)return;const l=o.getKeyStore("for_actor_id").getValue(),c=(0,w().zt)({userId:l,store:i}).role,d=Y(t,o,i,r,a);if(!("permissionItem"in d))return;s&&(d.permissionItem.role=s);const u=t.currentUser.id;if(!u)return;if("type"in d&&!s){if(!(await _().eP({environment:t,store:i,inviteTargets:[d],inviteRole:d.permissionItem.role,isOnboarding:!1,invite:{inviteOrigin:"page_request_access"}})).success)return}I().createAndCommit({userAction:"GrantPageAccessActivityAction.handleGrantPageAccess",environment:t,canUndo:!0,perform:e=>{"type"in d||_().zP({environment:t,transaction:e,store:i,permissionItems:[d.permissionItem]}),n&&j().ZB({notification:n,rootStore:i,transaction:e,read:!0}),M().zv({store:o,transaction:e,data:{granted_time:Date.now(),granted_by_table:f().oo,granted_by_id:u,resolved_time:Date.now(),resolved_by_table:f().oo,resolved_by_id:u,status:"approved"}})}});const g=o.isDefined(),p=o.id,m=o.getKeyStore("created_time").getValue(),v=o.getKeyStore("resolved_time").getValue(),h=g&&m&&v?v-m:void 0;A().qI(t,{requestId:p,timeElapsedSinceRequest:h,newAccessLevel:d.permissionItem.role,prevAccessLevel:c,...O(n)})}function X(e){const{table:t,id:i,accessRequestStore:o}=e,r=(0,a().K8)((()=>{const e=y().oE([Q(t,i,o)]);return(0,N().bD)(e,{...(0,C()._m)()})}),[t,i,o]);return(0,D.jsx)(D.Fragment,{children:r})}function Z(e){const{accessRequestValue:t,accessRequestStore:i,notification:s,targetBlockStore:l,initialRole:c,roleStore:g,rootStore:m,activity:y,tabArgs:S}=e,b=(0,n().DP)(),x=(0,r().v3)(),j=(0,o.useCallback)((e=>function(e,t,i,o,r){const a=i.id,n=o.state;o.setState(e),A().Sd(t,{requestId:a,previousAccessLevel:n,newAccessLevel:e,...O(r)})}(e,x,i,g,s)),[x,i,g,s]),_=t.parent_table===v().NX,M=(0,a().K8)((()=>H(i,l)),[i,l]),I=(0,a().K8)((()=>G(i,l,c,g)),[i,l,c,g]),w=(0,u().HH)(t),R=(0,a().K8)((()=>(0,k().t)(t,m)),[t,m]),C=(0,a().K8)((()=>l.getType()),[l]);if(M&&!_){const e=(0,D.jsx)(X,{accessRequestStore:i,table:t.for_actor_table,id:t.for_actor_id}),o=M.role===I;if(!w||w&&(0,d().p2)(M.role))return(0,D.jsxs)(D.Fragment,{children:[w?(0,D.jsx)(F().A,{isSecondaryColor:!0,isMultiline:!0,style:{marginBottom:6},children:(0,D.jsx)(h().sA,{defaultMessage:"{requestingUser} already has edit access.",id:"grantPageAccessActivityAction.alreadyHasEditAccess.label",values:{requestingUser:e}})}):(0,D.jsx)(F().A,{isSecondaryColor:!0,isMultiline:!0,style:{marginBottom:6},children:(0,D.jsx)(h().sA,{defaultMessage:"{requestingUser} already has access.",id:"grantPageAccessActivityAction.alreadyHasAccess.label",values:{requestingUser:e}})}),(0,D.jsx)(K().g,{children:(0,D.jsx)(L().Ay,{upgradeButtonName:"user_permission_item",role:I,table:p().ev,blockType:C,type:t.for_actor_table===f().oo?"user_permission":"bot_permission",onChange:j,isInvite:!0,buttonStyle:U(!0,b)})}),(0,D.jsx)(K().g,{children:(0,D.jsx)(W().A,{disabled:o,size:"lg",style:{marginRight:10},onClick:e=>J(0,x,l,i,c,g,s),children:(0,D.jsx)(h().sA,{defaultMessage:"Change",id:"grantPageAccessActivityAction.changePermissionButton.label"})})}),(0,D.jsx)($,{notification:s,accessRequestStore:i,activity:y,tabArgs:S})]})}return(0,D.jsxs)(D.Fragment,{children:[R?(0,D.jsx)(z,{}):void 0,(0,D.jsx)(K().g,{children:w?void 0:(0,D.jsx)(L().Ay,{upgradeButtonName:"user_permission_item",role:I,table:p().ev,blockType:C,type:t.for_actor_table===f().oo?"user_permission":"bot_permission",onChange:j,isInvite:!0,buttonStyle:U(!1,b)})}),(0,D.jsx)(K().g,{children:w?(0,D.jsx)(W().A,{size:"lg",onClick:e=>{s&&(0,q().hx)({...S,environment:x,activity:y}),J(0,x,l,i,c,g,s,"read_and_write")},style:{marginRight:10},children:(0,D.jsx)(h().sA,{defaultMessage:"Approve",id:"grantPageAccessActivityAction.grantEditAccessButton.label.approve"})}):(0,D.jsx)(W().A,{size:"lg",onClick:e=>{s&&(0,q().hx)({...S,environment:x,activity:y}),J(0,x,l,i,c,g,s)},style:{marginRight:10},children:(0,D.jsx)(h().sA,{defaultMessage:"Approve",id:"grantPageAccessActivityAction.grantAccessButton.label.approve"})})}),(0,D.jsx)($,{notification:s,accessRequestStore:i,activity:y,tabArgs:S})]})}function ee(e){const{accessRequestValue:t,accessRequestStore:i}=e,o=(0,h().tz)(),r=(0,n().DP)(),a=(0,D.jsx)(X,{accessRequestStore:i,table:t.granted_by_table,id:t.granted_by_id}),s=(0,l().W_)(Math.min(t.granted_time,Date.now()),"medium_with_time",(0,c().H)(o));return(0,D.jsx)("div",{style:{fontSize:14,color:r.text.secondary},children:(0,D.jsx)(h().sA,{defaultMessage:"Approved by {grantedBy} on {time}",id:"grantPageAccessActivityAction.accessGrantedWithTime.title",values:{grantedBy:a,time:s}})})}},317131:(e,t,i)=>{i.d(t,{p:()=>j,l:()=>b});i(581454),i(296540);var o=()=>i(484714),r=()=>i(56366),a=()=>i(401497),n=()=>i(254437),s=()=>i(695608),l=()=>i(959013),c=()=>i(755636),d=()=>i(125565),u=()=>i(453697),g=()=>i(493823),p=()=>i(859428),m=()=>i(75491);function v(e){let{totalCount:t,shownCount:i}=e;const o=t-i;return o>0?o:0}var f=()=>i(566468),h=i(474848);const y=24,S=4;function b(e){let{userStores:t,isClickable:i,useSecondaryColorTitle:n,useIconsOnly:g,totalCount:f,customAvatarStyles:b}=e;const j=(0,l().tz)(),_=(0,o().v3)(),M=(0,a().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",height:"auto",paddingTop:8,paddingBottom:8},iconsWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},icons:{display:"flex",flexDirection:"row",alignItems:"center"},iconContainer:{marginRight:-y/4,display:"flex",alignItems:"center",justifyContent:"center"},avatar:{marginRight:4,...b},plusMore:{opacity:.5,marginLeft:4,display:"inline-block"},tooltip:{color:e.text.contrastPrimary,fontSize:12}})),[b]),I=t.slice(0,S),k=(0,r().K8)((()=>{if(I[0])return I.map((e=>{if(e)return e.computeWithRecordValues((t=>{let{getRecordValueAndSubscribe:i}=t;return i(e)}))}))}),[I]),w=k&&k[0],R=(0,h.jsxs)("div",{style:M.container,children:[(0,h.jsx)(u().A,{style:M.avatar,userValue:w,size:y}),(0,h.jsx)(l().sA,{id:"baseTable.usersCell.userName",defaultMessage:"{remainingCount, plural, =0 {<user>{firstUser}</user>} one {<user>{firstUser}</user><gray>+{remainingCount}</gray>} other {<user>{firstUser}</user><gray>+{remainingCount}</gray>}}",values:{firstUser:(0,s().c6)(j,w),remainingCount:v({totalCount:f||t.length,shownCount:1}),user:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,h.jsx)(d().A,{isSecondaryColor:n,children:t})},gray:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,h.jsx)(d().A,{style:M.plusMore,children:t})}}})]});let C=R;if(g){const e=v({totalCount:f||t.length,shownCount:I.length});C=(0,h.jsxs)("div",{style:M.iconsWrapper,children:[(0,h.jsx)("div",{style:M.icons,children:null==k?void 0:k.map(((e,t)=>(0,h.jsx)("div",{style:M.iconContainer,children:(0,h.jsx)(u().A,{userValue:e,size:y})},(null==e?void 0:e.id)||t)))}),e>0&&(0,h.jsx)(l().sA,{id:"baseTable.usersCell.remainingUsers",defaultMessage:"<gray>+{remainingCount}</gray>",values:{remainingCount:e,gray:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,h.jsx)(d().A,{style:{...M.plusMore,marginLeft:M.plusMore.marginLeft+-1*M.iconContainer.marginRight},children:t})}}})]})}if(!i)return(0,h.jsx)(p().A,{disableTooltip:t.length<=1,render:e=>(0,h.jsx)("div",{...e,children:C}),renderTooltip:()=>(0,h.jsx)(h.Fragment,{children:t.map(((e,t)=>(0,h.jsx)(d().A,{style:M.tooltip,children:(0,h.jsx)(A,{userStore:e})},e?e.id:t)))})});const T=t.map(((e,t)=>({key:null!=e&&e.id?null==e?void 0:e.id:t,render:t=>(0,h.jsx)(x,{userStore:e,...t}),action:()=>null!=e&&e.getEmail?c().f({environment:_,url:`mailto:${null==e?void 0:e.getEmail()}`}):void 0})));return(0,h.jsx)(m().ED,{hideDropdownIcon:!0,title:C,items:T,itemMaxWidth:380})}function x(e){let{userStore:t,...i}=e;const o=(0,r().K8)((()=>null==t?void 0:t.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:i}=e;return i(t)}))),[t]),s=(0,a().IS)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",height:"auto",paddingBlock:8,marginInline:4},avatarContainer:{display:"flex",justifyContent:"center",alignItems:"center"},copyContainer:{display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"auto",opacity:.5},nameContainer:{marginLeft:8,marginRight:8},name:{fontSize:14,lineHeight:1.2,maxWidth:400},email:{fontSize:12,lineHeight:1.2,opacity:.5,maxWidth:400}})),[]);return(0,h.jsxs)(g().p,{style:s.container,...i,children:[(0,h.jsx)("div",{style:s.avatarContainer,children:(0,h.jsx)(u().A,{userValue:o,size:y})}),(0,h.jsxs)("div",{style:s.nameContainer,children:[(0,h.jsx)(d().A,{style:s.name,children:(0,h.jsx)(A,{userStore:t})}),o?(0,h.jsx)(d().A,{style:s.email,children:o.email}):null]}),(0,h.jsx)("div",{style:s.copyContainer,children:(0,n().F)({height:18,width:18})})]})}function A(e){const t=(0,l().tz)(),{userStore:i}=e,o=(0,r().K8)((()=>null==i?void 0:i.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:t}=e;return t(i)}))),[i]);return(0,h.jsx)(h.Fragment,{children:(0,s().c6)(t,o)})}function j(){const e=(0,a().IS)((()=>({icon:{borderRadius:"100%"},title:{width:"80%"}})),[]);return(0,h.jsx)(f().mf,{titleStyles:e.title,includeIcon:!0,iconStyles:e.icon})}},350648:(e,t,i)=>{i.d(t,{D2:()=>_,Ip:()=>x,Jk:()=>A,YT:()=>j,e2:()=>S,g:()=>b});i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698),i(898992),i(354520);var o=()=>i(584262),r=()=>i(798880),a=()=>i(946141),n=()=>i(449506),s=()=>i(246826),l=()=>i(436572),c=()=>i(426116),d=()=>i(751156),u=()=>i(972435),g=()=>i(640653),p=()=>i(37433),m=()=>i(765957),v=()=>i(999830),f=()=>i(848237),h=()=>i(263928);const y=(0,i(959013).YK)({joinTeamSuccessMessage:{id:"teamInviteLinkActions.joinTeam.confirmationMessage",defaultMessage:"Joined {teamName}"},requestTeamSuccessMessage:{id:"teamInviteLinkActions.requestAccess.successMessage",defaultMessage:"Successfully requested membership"},requestTeamFailureMessage:{id:"teamInviteLinkActions.requestAccess.failureMessage",defaultMessage:"Failed to request membership"}});async function S(e){let{environment:t,userId:i,teamStore:o,user:r}=e;const n=o.getSpaceId();if(!n)return;await f().rU({environment:t,teamId:o.id,spaceId:n,teamUserInfo:r,isSettingDefaultTeam:!1,inviterId:i})&&(a().vo(t,{store:o,joined_role:"member",from:"team_invite_link"}),await b({environment:t,userId:i,teamStore:o}),l().D6({label:u().A.formatMessage(y.joinTeamSuccessMessage,{teamName:o.getName()})}))}async function b(e){let{environment:t,userId:i,teamStore:r}=e;const a=m().default.state.currentUserRootStore,n=r.getSpaceId();if(!n||!a)return;const s=a.getSpaceViewStores().filter((e=>e.getSpaceId()===n))[0];await c().tR({environment:t,spaceViewStore:s,userSettingsStore:void 0,userRootStore:a,pageVisitSource:o().y8.JoinTeam,navigationType:"switchingToOrLoadingSpace"}),(0,p().Qn)()?v().q.fetchUnfetchedTeams({userId:i,spaceId:n,teamTypes:new Set(["Joined"]),environment:t,callGetTeamsV2ApiFn:p().FK}):await h().J({environment:t,spaceId:n,userId:i}),f().L0({environment:t,teamStore:r,shouldScroll:!0})}async function x(e){let{environment:t,teamId:i,message:o}=e;if(!t.currentUser.id)return;"success"===(await n().callApi({eventName:"requestAccess",environment:t,data:{type:"current-actor-to-team",teamId:i,message:o}})).type?(a().XQ(t,{teamId:i}),await j({environment:t}),new Promise((e=>setTimeout(e,500))).then((()=>{l().D6({label:u().A.formatMessage(y.requestTeamSuccessMessage)})}))):l().D6({label:u().A.formatMessage(y.requestTeamFailureMessage)})}async function A(e){let{environment:t,teamStore:i,accessRequestStore:o,status:n}=e;const l=o.getForActorId();if(!l)return;const c=o.getRecordModel({table:r().oo,id:l});if(c){if("approved"===n){const e=[{type:"member",entity_type:"user",user_id:c.id}];if(!(await f().Zd({environment:t,teamStore:i,teamMemberInfos:e,isSettingDefaultTeam:!1,createNewTeamFlowId:void 0})))return}d().createAndCommit({userAction:"GrantAccessActivityAction.handleGrantAccess",environment:t,canUndo:!0,perform:e=>{s().zv({store:o,transaction:e,data:{resolved_time:Date.now(),resolved_by_table:r().oo,resolved_by_id:t.currentUser.id,status:n}})}}),a().GW(t,{store:i,resolution:n})}}async function j(e){let{environment:t}=e;const{lastVisitedSpaceView:i,userRootStore:r,userSettingsStore:a}=await(0,g().ex)({environment:t,disableRedirectUrl:!1});i?await c().tR({environment:t,spaceViewStore:i,userRootStore:r,userSettingsStore:a,pageVisitSource:o().y8.BackForward,navigationType:"switchingToOrLoadingSpace"}):await c().t9({environment:t,userRootStore:r,userSettingsStore:a,pageVisitSource:o().y8.BackForward})}async function _(e){let{environment:t,teamId:i}=e;const o=await n().callApi({eventName:"getTeamAccessRequestMetadata",environment:t,data:{teamId:i}});if("success"===o.type)return o.data}},384100:(e,t,i)=>{i.d(t,{l5:()=>n,z5:()=>a});var o=()=>i(798880),r=()=>i(630116);function a(e){let{userId:t,currentSpaceStore:i}=e;return r().LU.createChildStore(i,{table:o().oo,id:t})}function n(e){const{blockStore:t,actorPointer:i}=e;if(i.table===o().oo&&null!=t&&t.isDefined())return r().LU.createChildStore(t,{table:o().oo,id:i.id})}},459711:(e,t,i)=>{i.d(t,{A:()=>b});i(296540);var o=()=>i(56366),r=()=>i(401497),a=()=>i(764880),n=()=>i(869190),s=()=>i(402390),l=()=>i(824862),c=()=>i(798880),d=()=>i(959013),u=()=>i(496603),g=()=>i(284371),p=()=>i(209660),m=()=>i(212326),v=()=>i(973189),f=()=>i(682197),h=()=>i(770176),y=()=>i(864943),S=i(474848);const b=function(e){const{accessRequestStore:t,effectiveAccessRequestType:a,onApprove:n,onReject:s,spaceStore:l}=e,c=(0,i(484714).v3)(),u=(0,o().K8)((()=>t.isDefined()),[t]),m=(0,o().K8)((()=>t.getModel()),[t]),h=(0,o().K8)((()=>l.canAdmin()),[l]),b=(0,o().K8)((()=>l.canEditMembership()),[l]),x=(0,o().K8)((()=>null==m?void 0:m.isResolved()),[m]),A=(0,o().K8)((()=>null==m?void 0:m.isGuestInviteRequest()),[m]),_=(0,r().IS)((e=>({viewAllButton:{fontWeight:g().Wy.medium},secondaryButtonForGuestInvites:{fontWeight:g().Wy.medium},actionButton:{fontWeight:g().Wy.medium},notifContainer:{display:"flex",alignItems:"center",gap:A?10:8,paddingTop:A?4:0},guestApproveButton:{fontWeight:g().Wy.medium}})),[A]),M="space_membership_request"===a;return u?x?(0,S.jsx)(j,{accessRequestStore:t,spaceStore:l}):A&&!h||M&&!b?null:(0,S.jsxs)("div",{style:_.notifContainer,children:[(0,S.jsx)(f().g,{children:(0,S.jsx)(y().A,{size:"lg",onClick:n,style:A?_.guestApproveButton:_.actionButton,children:(0,S.jsx)(d().sA,{defaultMessage:"Approve",id:"approveSpaceMembershipActivityAction.approveButton.label"})})}),(0,S.jsx)(f().g,{children:(0,S.jsx)(y().A,{size:"lg",onClick:s,style:_.actionButton,children:(0,S.jsx)(d().sA,{defaultMessage:"Deny",id:"approveSpaceMembershipActivityAction.denyButton.label"})})}),c.device.isMobile?void 0:(0,S.jsx)(f().g,{children:(0,S.jsx)(i(493823).p,{size:"lg",onClick:()=>{i(701763).Sp(c,{disable_membership_requests:l.getDisableMembershipRequests()}),p().Ow({currentTab:"members",subtab:v().d.Requests})},style:A?_.secondaryButtonForGuestInvites:_.viewAllButton,children:A?(0,S.jsx)(d().sA,{defaultMessage:"View all requests",id:"approveSpaceMembershipActivityAction.viewAllRequests.label"}):(0,S.jsx)(d().sA,{defaultMessage:"View all",id:"approveSpaceMembershipActivityAction.viewAll.label"})})})]}):null};function x(e,t,i){if(e===c().oo){const o=i.getRecordValue({table:e,id:t});if(o)return(0,a().A7)(o)}if(e===l().GP){const o=i.getRecordValue({table:e,id:t});if(o)return(0,a().qt)(o)}}function A(e){const{pointer:t,accessRequestStore:i}=e,{table:r,id:a}=t,n=(0,o().K8)((()=>u().oE([x(r,a,i)])),[r,a,i]),s=(0,o().K8)((()=>(0,h().bD)(n,(0,m()._m)())),[n]);return(0,S.jsx)(S.Fragment,{children:s})}function j(e){const{accessRequestStore:t,spaceStore:i}=e,a=(0,d().tz)(),l=(0,r().DP)(),c=(0,o().K8)((()=>t.getModel()),[t]),u=(0,o().K8)((()=>t.getStatus()),[t]),g=(0,o().K8)((()=>t.getResolvedTime()),[t]),{isResolved:p,resolveByPointer:m}=(0,o().K8)((()=>({isResolved:(null==c?void 0:c.isResolved())??!1,resolveByPointer:null==c?void 0:c.getResolvedByPointer(i.id)})),[c,i.id]);if(!c)return null;const v=p&&m&&(0,S.jsx)(A,{accessRequestStore:t,pointer:m});return(0,S.jsx)("div",{style:{fontSize:14,color:l.text.secondary},children:"approved"===u?(0,S.jsx)(d().sA,{defaultMessage:"Approved by {grantedBy} on {resolvedTime}",id:"approveSpaceMembershipActivityAction.requestApprovedWithTime.title",values:{grantedBy:v,resolvedTime:(0,n().W_)(Math.min(g??1/0,Date.now()),"medium_with_time",(0,s().H)(a))}}):(0,S.jsx)(d().sA,{defaultMessage:"Denied by {grantedBy} on {resolvedTime}",id:"approveSpaceMembershipActivityAction.requestDenied.title",values:{grantedBy:v,resolvedTime:(0,n().W_)(Math.min(g??1/0,Date.now()),"medium_with_time",(0,s().H)(a))}})})}},475971:(e,t,i)=>{i.d(t,{M:()=>r,W:()=>o});const o={height:28,paddingLeft:8,paddingRight:8,paddingTop:4,paddingBottom:4,fontWeight:i(284371).Wy.medium},r={opacity:.4}},563943:(e,t,i)=>{i.d(t,{A:()=>p});i(296540);var o=()=>i(484714),r=()=>i(401497),a=()=>i(563884),n=()=>i(179034),s=()=>i(38337),l=()=>i(907514),c=()=>i(630116),d=()=>i(128295),u=()=>i(659799),g=i(474848);function p(e){const{timestamp:t,header:i,navigableBlockId:p,rootStore:m,showRecordPath:v,disableJustify:f,onBacklinkClick:h,titleAriaId:y}=e,S=(0,l().nl)(t,{useUltraCompactFormat:!0}),b=(0,o().v3)().device.isMobile,x=(0,l().x$)(t),A=(0,r().IS)((e=>({container:{width:"100%"},header:{width:b?"calc(100% - 98px)":"100%",fontSize:14,lineHeight:1.4,minWidth:0,minHeight:b?28:void 0,display:"flex",alignItems:"baseline",justifyContent:f?void 0:"space-between"},time:{fontSize:12,color:e.text.tertiary,whiteSpace:"nowrap",display:"inline",paddingLeft:6},path:{marginTop:4,marginBottom:4}})),[b,f]);return(0,g.jsxs)("div",{style:A.container,children:[(0,g.jsxs)("div",{className:s().k2l,style:A.header,children:[(0,g.jsx)("span",{id:y,children:i}),(0,g.jsx)("div",{style:A.time,className:s().Cxn,children:(0,g.jsx)(u().A,{text:S,tooltipText:x,icon:a().k})})]}),v&&p&&m&&(0,g.jsx)("div",{style:A.path,children:(0,g.jsx)(d().Ay,{isLink:!0,store:c().Bv.createChildStore(m,{table:n().ev,id:p}),onClick:h})})]})}},599500:(e,t,i)=>{i.d(t,{g:()=>y});i(296540);var o=()=>i(484714),r=()=>i(56366),a=()=>i(401497),n=()=>i(101847),s=()=>i(959013),l=()=>i(512062),c=()=>i(704152),d=()=>i(460292),u=()=>i(554509),g=()=>i(859428),p=()=>i(640653),m=()=>i(58293),v=()=>i(962730),f=()=>i(10984),h=i(474848);function y(e){let{onClick:t,showIcon:i=!0}=e;const a=b(i),n=(0,o().v3)(),l=(0,m().r)(),d=(0,r().K8)((()=>l&&(0,p().GK)(n,l)),[n,l]),y=(0,r().K8)((()=>(0,f().AI)()),[]);return void 0===t?(0,h.jsx)("div",{style:{...a.badge,cursor:"default"},children:(0,h.jsx)(S,{showIcon:i})}):(0,h.jsx)(g().A,{placement:v().W.Bottom,style:a.tooltip,render:e=>(0,h.jsx)(c().A,{onClick:t,style:{...a.badge,cursor:"pointer"},hoveredStyle:a.badgeHover,pressedStyle:a.badgePressed,...e,children:(0,h.jsx)(S,{showIcon:i})}),renderTooltip:()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u().D,{styleName:"UISmall-12px/Medium",colorName:"contrastPrimary",children:(0,h.jsx)(s().sA,{id:"trialBadge.tooltip.title",defaultMessage:"{hasSpaceName, select, true {{spaceName}} other {Your workspace}} is on a free {planName, select, plus {Plus} business {Business} enterprise {Enterprise} other {}} trial",values:{hasSpaceName:Boolean(d),spaceName:d,planName:y}})}),(0,h.jsx)(u().D,{styleName:"UISmall-12px/Regular",colorName:"contrastSecondary",children:(0,h.jsx)(s().sA,{id:"trialBadge.tooltip.description",defaultMessage:"Click to learn more"})})]}),textWrap:!0})}function S(e){let{showIcon:t}=e;const i=b(t);return(0,h.jsxs)(h.Fragment,{children:[t?(0,h.jsx)("span",{style:i.giftIcon,children:(0,h.jsx)(d().Q,{iconGroup:n().T,variantName:"mini",colorName:"orangePrimary"})}):null,(0,h.jsx)(u().D,{styleName:"UISmall-12px/Medium",children:(0,h.jsx)(s().sA,{id:"trialBadge.title",defaultMessage:"Free trial"})})]})}function b(e){return(0,a().IS)((t=>({badge:{display:"flex",flexDirection:"row",gap:4,justifyContent:"center",alignItems:"center",color:t.icon.orangePrimary,background:t.fill.orangeSecondary,padding:e?"0px 6px 0px 4px":"0px 6px",height:e?22:20,borderRadius:6,width:"fit-content"},badgeHover:{background:l().M[t.mode].orange[100]},badgePressed:{background:l().M[t.mode].orange[200]},tooltip:{maxWidth:"240px",width:"max-content",display:"flex",padding:"4px 6px",flexDirection:"column",alignItems:"flex-start",gap:2,borderRadius:4},giftIcon:{paddingBottom:1}})),[e])}},617137:(e,t,i)=>{i.d(t,{P:()=>N});i(18107),i(967357);var o=i.n(i(842838)),r=i.n(i(42833)),a=i.n(i(542922)),n=i(296540),s=()=>i(484714),l=()=>i(56366),c=()=>i(401497),d=()=>i(584262),u=i(474848);const g=(0,i(340498).wt)("arrowRightContained",{viewBox:"0 0 20 20",directional:!0,svg:(0,u.jsxs)("g",{children:[(0,u.jsx)("path",{d:"M11.673 13.387a.75.75 0 01-1.06-1.06l1.576-1.577H6a.75.75 0 010-1.5h6.19l-1.577-1.577a.75.75 0 111.06-1.06L14.53 9.47a.75.75 0 010 1.06l-2.857 2.857z"}),(0,u.jsx)("path",{fillRule:"evenodd",d:"M4.25 3.5A2.75 2.75 0 001.5 6.25v7.5a2.75 2.75 0 002.75 2.75h11.5a2.75 2.75 0 002.75-2.75v-7.5a2.75 2.75 0 00-2.75-2.75H4.25zM3 6.25C3 5.56 3.56 5 4.25 5h11.5c.69 0 1.25.56 1.25 1.25v7.5c0 .69-.56 1.25-1.25 1.25H4.25C3.56 15 3 14.44 3 13.75v-7.5z",clipRule:"evenodd"})]})});var p=()=>i(693954),m=()=>i(128713),v=()=>i(68263),f=()=>i(179034),h=()=>i(743246),y=()=>i(145820),S=()=>i(959013),b=()=>i(498212),x=()=>i(534177),A=()=>i(284371),j=()=>i(848259),_=()=>i(572080),M=()=>i(435009),I=()=>i(751156),k=()=>i(492414),w=()=>i(630116),R=()=>i(864943),C=()=>i(12296),T=()=>i(700348);const B=(0,S().YK)({errorTitle:{id:"appBuilderNotificationActivityError.formattedHeaderMessage.errorTitle",defaultMessage:"A workflow run has failed {numWorkflows, plural, one {} other {{numWorkflows} times}}"},errorButton:{id:"appBuilderNotificationActivityError.formattedHeaderMessage.errorButton",defaultMessage:"View {numWorkflows, plural, one {} other {last}} failed run"},actionTitle:{id:"appBuilderNotificationActivityError.formattedHeaderMessage.actionTitle",defaultMessage:"{workflowName} has sent you a message"},actionButton:{id:"appBuilderNotificationActivityError.formattedHeaderMessage.actionButton",defaultMessage:"View run"},customActionTitle:{id:"appBuilderNotificationActivityError.formattedHeaderMessage.customActionTitle",defaultMessage:"From {workflowName}: {customTitle}"},defaultWorkflowName:{id:"appBuilderNotificationActivityError.defaultWorkflowName",defaultMessage:"An App"}}),K="app-builder-notification-activity--light",q="app-builder-notification-activity--dark";function N(e){const{rootStore:t,activity:i,isLast:r,tabArgs:a,isFirst:g}=e,{tab:p,notification:m}=a,N=(0,s().v3)(),F=(0,l().K8)((()=>i.getEdits()),[i]),L=F.at(0),D=(0,S().tz)(),V=(0,l().K8)((()=>{if((0,x().O9)(L))return w().NU.createChildStore(t,{table:h().C0,id:L.workflow_id,spaceId:t.getSpaceId()}).getData()}),[t,L]),{handleNavigateToAutomationRun:E,workflowRunUrl:z,navigableBlockStore:H,navigableBlockUrl:O}=function(e){let{edit:t,rootStore:i}=e;const o=(0,s().v3)(),r=(0,l().K8)((()=>{if((0,x().O9)(t)&&t.automation_run_id)return w().ty.createChildStore(i,{table:y().QR,id:t.automation_run_id,spaceId:i.getSpaceId()})}),[i,t]),a=(0,l().K8)((()=>{if((0,x().O9)(t)&&t.navigable_block_id)return new(w().Bv)(o,{id:t.navigable_block_id,table:f().ev})}),[t,o]),n=(0,l().K8)((()=>{if(!(0,x().O9)(a))return!0;const e=a.getRole();return!e||!(0,v().Tt)(e)}),[a]),c=(0,l().K8)((()=>{if((0,x().O9)(a))return(0,k().Ay)({store:a,preferPublicLink:!1,pageVisitSource:d().y8.Notification})}),[a]),u=(0,l().K8)((()=>{var e;if(n||!(0,x().O9)(t))return;const i=null==r||null===(e=r.getData())||void 0===e?void 0:e.thread_id,o=i?`&wfv=runs&t=${(0,b().Xw)(i)}`:"&wfv=runs&t=new";return`${c}${o}`}),[r,t,n,c]),g=(0,l().K8)((()=>()=>{a&&c&&u&&M().oo({environment:o,url:u})}),[o,a,c,u]);return{handleNavigateToAutomationRun:g,navigableBlockStore:a,navigableBlockUrl:c,workflowRunUrl:u}}({edit:L,rootStore:t}),U=(0,c().IS)((e=>({viewButton:{marginTop:8,height:26,fontWeight:A().Wy.medium},bodyContainer:{fontSize:T().gH,lineHeight:A().K_.UIRegular.desktop,wordBreak:"break-word"},headerName:{fontWeight:A().Wy.medium,display:"inline-flex"}})),[]),$=(0,c().eP)(),G=(0,n.useCallback)((e=>{I().createAndCommit({userAction:"AutomationTypecheckErrorRaisedActivity.viewError",environment:N,canUndo:!0,perform:e=>{_().ZB({notification:m,rootStore:t,transaction:e,read:!0})}}),E(),j().K4({tab:p,notificationId:null==m?void 0:m.id,environment:N,alreadyRead:Boolean(null==m?void 0:m.read),activity:i})}),[i,N,E,m,t,p]);if(!L)return null;const Y=(0,u.jsx)("div",{style:U.headerName,children:(null==V?void 0:V.name)||D.formatMessage(B.defaultWorkflowName)});return(0,u.jsx)(T().Ay,{header:"workflow-error"===L.app_builder_notification_type?(0,u.jsx)(S().sA,{...B.errorTitle,values:{numWorkflows:F.length}}):L.header_content?(0,u.jsx)(S().sA,{...B.customActionTitle,values:{workflowName:Y,customTitle:L.header_content}}):(0,u.jsx)(S().sA,{...B.actionTitle,values:{workflowName:Y}}),isFirst:g,isLast:r,isPrivate:!1,rootStore:t,notification:m,icon:(0,u.jsx)(P,{workflowName:(null==V?void 0:V.name)||"W",notificationType:L.app_builder_notification_type||"workflow-action"}),showSnapshotButton:!1,navigableBlockId:null==H?void 0:H.id,url:"workflow-error"===L.app_builder_notification_type?z:O,...(0,C().$5)({notification:m,activity:i,environment:N,tab:p}),children:"workflow-error"===L.app_builder_notification_type?(0,u.jsx)("div",{children:(0,u.jsx)(R().A,{style:U.viewButton,onClick:G,size:"sm",children:(0,u.jsx)(S().sA,{...B.errorButton,values:{numWorkflows:F.length}})})}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"dark"===$?q:K,style:U.bodyContainer,dangerouslySetInnerHTML:{__html:o().sanitize(W({markdown:L.body_content||""}))}}),(0,u.jsx)("div",{children:(0,u.jsx)(R().A,{style:U.viewButton,onClick:G,size:"sm",children:(0,u.jsx)(S().sA,{...B.actionButton})})})]})})}function P(e){let{workflowName:t,notificationType:i}=e;const o=(0,c().IS)((e=>({icon:{fill:e.icon.uiRedPrimary,height:12,left:9,position:"absolute",top:14,width:12},firstLetter:{textTransform:"uppercase",color:e.text.secondary},workflowIcon:{color:e.text.secondary,padding:"3px"},wrapper:{position:"relative"}})),[]);return(0,u.jsx)(T().rL,{children:(0,u.jsx)("div",{style:o.wrapper,children:"workflow-error"===i?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{style:o.firstLetter,children:t.charAt(0)}),(0,p().Q)(o.icon)]}):g(o.workflowIcon)})})}function W(e){return m().uY({MarkdownIt:a(),LinkifyIt:r(),markdown:e.markdown})}},625634:(e,t,i)=>{i.d(t,{_:()=>r,z:()=>a});var o=()=>i(340498);const r={small:"md",default:"lg",large:"xl"},a={small:o().Ev.xs,default:o().Ev.sm,large:o().Ev.sm}},645109:(e,t,i)=>{i.d(t,{c:()=>g});var o=i(296540),r=()=>i(401497),a=()=>i(340498),n=()=>i(959013),s=()=>i(864943),l=()=>i(201361),c=()=>i(922442),d=()=>i(208603),u=i(474848);function g(e){let{openedFrom:t,styleOverrides:i}=e;const{animationState:g,animationTriggers:m}=(0,d().lP)(),v=(0,o.useMemo)((()=>{switch(t){case"business_trial_verify_pages_upsell":return"pageVerification";case"business_trial_private_teamspaces_upsell":return"privateTeamspaces";case"business_trial_ai_connectors_upsell":return"aiConnectors";case"upgrade_requests_page":return"free";default:return"blank"}}),[t]),f=(0,r().IS)((e=>({button:{display:"flex",alignItems:"center",flex:1},icon:{fill:e.icon.orangePrimary,width:a().Ev.sm,height:a().Ev.sm}})),[]);return(0,u.jsx)(s().A,{...m,size:"lg",iconLeading:e=>(0,d().sH)({icon:{type:"animated",iconFn:l().P},style:e,animationState:g}),iconStyle:f.icon,style:{...f.button,...i},onClick:()=>{(0,c().openSelfServeBusinessTrialStartModal)({openedFrom:t})},children:(0,u.jsx)(n().sA,{...p[v]})})}const p=(0,n().YK)({blank:{id:"selfServeBusinessTrial.tryButton.blank",defaultMessage:"Try"},privateTeamspaces:{id:"selfServeBusinessTrial.tryButton.privateTeamspaces",defaultMessage:"Try for free"},aiConnectors:{id:"selfServeBusinessTrial.tryButton.connectors",defaultMessage:"Try connectors"},pageVerification:{id:"selfServeBusinessTrial.tryButton.pageVerification",defaultMessage:"Try for free"},free:{id:"selfServeBusinessTrial.tryButton.free",defaultMessage:"Try for free"},thirtyDays:{id:"selfServeBusinessTrial.tryButton.30Days",defaultMessage:"Try for 30 days"}})},685277:(e,t,i)=>{i.d(t,{e:()=>j});i(18107),i(967357),i(581454);var o=()=>i(244641),r=(i(296540),()=>i(484714)),a=()=>i(56366),n=()=>i(264435),s=()=>i(798880),l=()=>i(107273),c=()=>i(979340),d=()=>i(959013),u=()=>i(212326),g=()=>i(630116),p=()=>i(922442),m=()=>i(84817),v=()=>i(554509),f=()=>i(864943),h=()=>i(77179),y=()=>i(12296),S=()=>i(770176),b=()=>i(769617),x=()=>i(700348),A=i(474848);function j(e){const{activity:t,isFirst:i,isLast:j,rootStore:_,tabArgs:M}=e,{notification:I,tab:k}=M,w=(0,r().v3)(),R=(0,d().tz)(),C=(0,a().K8)((()=>(0,l().W9)(t.getEdits())),[t]),T=(0,a().K8)((()=>{if(!C.length)return(0,S().Ln)({edits:C,rootStore:_});const e={id:C.at(0).trial_data.user_id,table:s().oo},t=(0,S().T9)(e,_);return t?[t]:(0,S().Ln)({edits:C,rootStore:_})}),[C,_]),B=(0,a().K8)((()=>(0,S().bD)(T,{...(0,u()._m)()})),[T]),{frontActorStore:K,backActorStore:q}=(0,a().K8)((()=>{const e=T.map((e=>g().sk.createChildStore(_,e)));return{frontActorStore:e.at(0),backActorStore:e.at(1)}}),[T,_]);if(!(C.length>0))return null;const{trial_data:{end_time:N,product:P,days:W}}=C[0],F=o().c9.fromMillis(N);return(0,A.jsx)(x().Ay,{header:(0,A.jsx)("span",{children:(0,A.jsx)(d().sA,{id:"activity.trialCreated.standardizedHeader.single",defaultMessage:"{authorOrAuthors} started a {days} day trial of <b>Notion {plan}</b>",values:{b:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,A.jsx)("b",{children:t})},days:W,plan:(0,c().u2)({product:P,intl:R}),authorOrAuthors:B}})}),isFirst:i,isLast:j,isPrivate:!1,rootStore:_,notification:I,icon:K&&q?(0,A.jsx)(b().v9,{frontActorStore:K,backActorStore:q,spaceStore:_}):(0,A.jsx)(h().H8,{authors:T,size:x().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),url:void 0,showSnapshotButton:!1,...(0,y().$5)({notification:I,activity:t,environment:w,tab:k}),children:(0,A.jsxs)(m().Y1,{direction:"vertical",align:"center-left",gap:12,children:[(0,A.jsx)(m().Y1,{direction:"horizontal",align:"center-left",gap:4,children:(0,A.jsx)(v().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,A.jsx)(d().sA,{defaultMessage:"You now have access to all {product} plan features until {date}",id:"activityNotification.trialCreated.productName",values:{product:(0,c().u2)({product:P,intl:R}),date:`${F.toFormat("MMM")} ${(0,n().o4)(F.locale.substring(0,2),F.day,"c")} ${F.toFormat("yyyy")}`}})})}),(0,A.jsx)(f().A,{size:"lg",onClick:()=>(0,p().openSelfServeBusinessTrialExplorePlanModal)({openedFrom:"trial_created_activity"}),children:(0,A.jsx)(d().sA,{id:"activityNotification.trialCreated.learnMoreButton",defaultMessage:"Learn more"})})]})})}},715392:(e,t,i)=>{i.d(t,{W:()=>r});var o=()=>i(666144);const r=new(i(848776).U)((e=>{let{userId:t,spaceId:i}=e;return`${t}-${i}`}),(async function(e,t){var r;let{userId:a,spaceId:n}=t;const[s,l]=await Promise.all([o().sy({environment:e,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,pointer:{table:i(798880).oo,id:a},userId:a}),o().sy({environment:e,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,pointer:(0,i(848538).i1)({userId:a,spaceId:n}),userId:a})]),c=null===(r=i(765957).default.state.currentSpaceViewStore)||void 0===r||null===(r=r.getModel())||void 0===r?void 0:r.first_joined_space_time,d=null==s?void 0:s.value,u=null==l?void 0:l.value;if(d&&u&&c)return{id:d.id,space_id:u.id,membership_type:u.membership_type,email:d.email,name:d.name,profile_photo:d.profile_photo,onboarding_completed:d.onboarding_completed,first_joined_space_time:c}}));i(604341).exposeDebugValue("UserOnSpaceStore",r)},729555:(e,t,i)=>{i.d(t,{q:()=>b});i(18107),i(967357),i(296540);var o=()=>i(484714),r=()=>i(56366),a=()=>i(401497),n=()=>i(584262),s=()=>i(280746),l=()=>i(769145),c=()=>i(179034),d=()=>i(959013),u=()=>i(498212),g=()=>i(534177),p=()=>i(859004),m=()=>i(148832),v=()=>i(204063),f=()=>i(12296),h=()=>i(700348),y=i(474848);const S=(0,d().YK)({jiraSyncTokenExpiry:{id:"externalIntegrationNotificationActivity.jiraSyncTokenExpiry",defaultMessage:"Your Jira sync stopped for {site} due to expired Jira token. Please re-authenticate to continue."},sfdcTaskSuccessStatus:{id:"externalIntegrationNotificationActivity.sfdcTaskSuccessStatus",defaultMessage:"Your Salesforce import completed successfully"},sfdcTaskFailureStatus:{id:"externalIntegrationNotificationActivity.sfdcTaskFailureStatus",defaultMessage:"Your Salesforce import failed"},sfdcTokenExpiry:{id:"externalIntegrationNotificationActivity.sfdcTokenExpiry",defaultMessage:"Your Salesforce token has expired"},reauthenticationCta:{id:"externalIntegrationNotificationActivity.reauthenticationCta",defaultMessage:"Re-authenticate Salesforce"}});function b(e){const{rootStore:t,activity:i,isLast:a,tabArgs:s,isFirst:l}=e,{tab:b,notification:j}=s,_=(0,o().v3)(),M=(0,r().K8)((()=>i.getEdits()),[i]).at(0),I=(0,r().K8)((()=>{if(!M||!M.navigable_block_id)return;const e=m().B.createChildStore(t,{table:c().ev,id:M.navigable_block_id});return(0,g().O9)(e)?e:void 0}),[M,t]),k=(0,r().K8)((()=>{const e=null==I?void 0:I.getModel();if(e)return e.getRenderUrl({getRecordModel:t.getRecordModel,pageVisitSource:n().y8.Notification})}),[t,I]);return M?"jira-sync-token-expiry"===M.external_integration_notification_type?(0,y.jsx)(h().Ay,{header:(0,y.jsx)(d().sA,{...S.jiraSyncTokenExpiry,values:{site:M.identifier}}),isFirst:l,isLast:a,isPrivate:!1,rootStore:t,notification:j,icon:(0,y.jsx)(x,{}),showSnapshotButton:!1,url:k,...(0,f().$5)({notification:j,activity:i,environment:_,tab:b})}):"sfdc-task-status"===M.external_integration_notification_type?(0,y.jsx)(h().Ay,{header:"success"===(null===(w=M.content)||void 0===w?void 0:w.status)?(0,y.jsx)(d().sA,{...S.sfdcTaskSuccessStatus,values:{site:M.identifier}}):(0,y.jsx)(d().sA,{...S.sfdcTaskFailureStatus,values:{site:M.identifier}}),isFirst:l,isLast:a,isPrivate:!1,rootStore:t,notification:j,icon:(0,y.jsx)(A,{}),showSnapshotButton:!1,url:k,...(0,f().$5)({notification:j,activity:i,environment:_,tab:b}),children:(null===(R=M.content)||void 0===R?void 0:R.body)&&(0,y.jsx)("div",{style:{marginTop:8,fontSize:14,color:"#666"},children:(0,y.jsx)("div",{style:{lineHeight:"1.4"},children:M.content.body})})}):"sfdc-token-expiry"===M.external_integration_notification_type?(0,y.jsx)(h().Ay,{header:(0,y.jsx)(d().sA,{...S.sfdcTokenExpiry}),isFirst:l,isLast:a,isPrivate:!1,rootStore:t,notification:j,icon:(0,y.jsx)(A,{}),showSnapshotButton:!1,url:k,...(0,f().$5)({notification:j,activity:i,environment:_,tab:b}),children:(0,y.jsx)(v().A,{style:{},onClick:async()=>{await(0,p().Tp)({environment:_,spaceId:M.space_id,authType:"admin",flowId:(0,u().Ay)(),from:"inapp_notification"})},children:(0,y.jsx)(d().sA,{...S.reauthenticationCta})})}):null:null;var w,R}function x(){const e=(0,a().IS)((e=>({icon:{height:17,width:17,marginTop:2,marginRight:2,fill:e.icon.secondary}})),[]);return(0,y.jsx)(h().rL,{children:(0,s().jiraIcon)(e.icon)})}function A(){const e=(0,a().IS)((e=>({icon:{height:16,width:16,marginTop:1,fill:e.icon.secondary}})),[]);return(0,y.jsx)(h().rL,{children:(0,l().salesforceIcon)(e.icon)})}},769145:(e,t,i)=>{i.r(t),i.d(t,{iconDefinition:()=>r,salesforceIcon:()=>a});i(296540);var o=i(474848);const r={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{fill:"#00A1E0",fillRule:"evenodd",d:"M8.322 4.65a3.5 3.5 0 0 1 2.536-1.088c1.322 0 2.469.735 3.086 1.83a4.3 4.3 0 0 1 1.742-.371C18.067 5.02 20 6.968 20 9.37c0 2.404-1.933 4.351-4.314 4.351q-.436 0-.852-.084a3.157 3.157 0 0 1-4.13 1.3 3.592 3.592 0 0 1-6.68-.162 3.3 3.3 0 0 1-.687.07C1.492 14.847 0 13.334 0 11.475A3.39 3.39 0 0 1 1.668 8.55a3.883 3.883 0 0 1 3.568-5.424 3.87 3.87 0 0 1 3.087 1.529",clipRule:"evenodd"}),(0,o.jsx)("path",{fill:"#FFFFFE",fillRule:"evenodd",d:"M2.913 10.382c-.012.033.005.04.009.046.037.027.075.046.114.069.204.108.397.14.598.14.41 0 .665-.22.665-.57v-.007c0-.325-.288-.443-.557-.528l-.035-.011c-.204-.066-.38-.124-.38-.258v-.006c0-.115.103-.2.262-.2.176 0 .387.06.521.133 0 0 .04.026.054-.012l.084-.225c.008-.022-.006-.038-.02-.046a1.16 1.16 0 0 0-.588-.158H3.6c-.376 0-.638.227-.638.552v.007c0 .342.29.454.56.531l.043.014c.197.06.368.113.368.251v.007c0 .127-.111.222-.29.222a.97.97 0 0 1-.528-.152c-.029-.017-.045-.03-.067-.043-.012-.007-.041-.02-.054.019zm6.004 0c-.012.032.005.04.009.045.037.027.076.047.114.069.204.108.397.14.598.14.41 0 .665-.219.665-.57v-.007c0-.325-.287-.443-.557-.528l-.035-.01c-.204-.067-.38-.124-.38-.258v-.007c0-.115.103-.2.262-.2.177 0 .386.06.521.134 0 0 .04.026.055-.013l.083-.225c.008-.021-.006-.037-.02-.046a1.16 1.16 0 0 0-.588-.158h-.041c-.376 0-.638.227-.638.552v.007c0 .343.29.454.56.532l.043.013c.198.06.368.113.368.251v.007c0 .127-.111.222-.289.222a.97.97 0 0 1-.528-.152c-.03-.017-.046-.028-.068-.042-.007-.005-.042-.019-.054.018zm4.1-.688q0 .299-.11.466c-.072.11-.18.163-.333.163q-.226 0-.332-.162c-.072-.11-.108-.268-.108-.466q0-.299.108-.464.105-.162.332-.16.228-.001.334.16.109.165.11.464m.342-.368a.8.8 0 0 0-.156-.298.75.75 0 0 0-.263-.2.9.9 0 0 0-.368-.073.9.9 0 0 0-.367.073.76.76 0 0 0-.42.498q-.05.17-.05.368t.05.368a.8.8 0 0 0 .157.298q.105.125.263.198a.9.9 0 0 0 .367.072.9.9 0 0 0 .367-.072.74.74 0 0 0 .263-.198.8.8 0 0 0 .156-.298q.05-.17.05-.368t-.05-.368m2.815.94c-.012-.033-.044-.02-.044-.02a1 1 0 0 1-.16.045q-.086.014-.187.014a.52.52 0 0 1-.392-.147c-.095-.098-.148-.255-.147-.469 0-.194.048-.34.132-.45q.125-.167.38-.168c.14 0 .249.016.362.051 0 0 .027.012.04-.023l.084-.234c.01-.026-.013-.037-.021-.04a1.3 1.3 0 0 0-.486-.075.9.9 0 0 0-.381.073.79.79 0 0 0-.443.498 1.2 1.2 0 0 0-.056.369q0 .426.228.682.23.254.676.254c.176 0 .356-.035.485-.087 0 0 .025-.012.014-.04zm.599-.764a.7.7 0 0 1 .094-.273.37.37 0 0 1 .331-.169.36.36 0 0 1 .325.169.6.6 0 0 1 .077.273h-.83zm1.154-.243a.7.7 0 0 0-.149-.27.7.7 0 0 0-.22-.168.9.9 0 0 0-.332-.068.9.9 0 0 0-.383.075.8.8 0 0 0-.267.203.8.8 0 0 0-.157.301q-.051.173-.051.37 0 .201.052.37a.8.8 0 0 0 .169.295.8.8 0 0 0 .291.193q.177.07.422.069c.335-.002.511-.076.583-.117.013-.007.025-.02.01-.055l-.076-.212c-.011-.032-.043-.02-.043-.02-.084.03-.201.086-.477.085-.18 0-.313-.053-.397-.136-.085-.085-.128-.21-.134-.386h1.161s.03 0 .034-.03c.001-.012.04-.237-.035-.498zM7.49 9.502a.7.7 0 0 1 .094-.273.37.37 0 0 1 .331-.169.36.36 0 0 1 .325.169.6.6 0 0 1 .077.273h-.83zm1.154-.243a.7.7 0 0 0-.149-.27.7.7 0 0 0-.22-.168.9.9 0 0 0-.332-.068.9.9 0 0 0-.383.075.8.8 0 0 0-.267.203.8.8 0 0 0-.157.301q-.051.173-.051.37 0 .201.053.37a.8.8 0 0 0 .167.295.8.8 0 0 0 .292.193q.176.07.421.069c.335-.002.511-.076.583-.117.013-.007.025-.02.01-.055l-.075-.212c-.012-.032-.044-.02-.044-.02-.083.03-.2.086-.476.085-.18 0-.313-.053-.397-.136-.085-.085-.128-.21-.135-.386h1.161s.031 0 .034-.03c.001-.012.04-.237-.035-.498m-3.66 1a.2.2 0 0 1-.067-.069.3.3 0 0 1-.035-.15q0-.152.104-.225c-.001 0 .1-.086.336-.083q.158.002.315.026v.527s-.147.032-.313.042c-.236.014-.34-.068-.34-.068m.461-.816a3 3 0 0 0-.18-.005q-.15 0-.286.037a.7.7 0 0 0-.241.112.56.56 0 0 0-.169.191.56.56 0 0 0-.062.268q0 .155.053.264a.5.5 0 0 0 .152.182.6.6 0 0 0 .236.102q.136.03.307.031.179 0 .352-.03.147-.024.292-.056l.081-.02c.029-.008.027-.038.027-.038l-.001-1.059q0-.35-.184-.511-.184-.16-.532-.16a2 2 0 0 0-.311.028s-.253.05-.358.131c0 0-.022.014-.01.046l.082.22c.01.03.038.02.038.02l.02-.01c.222-.121.504-.118.504-.118q.188 0 .287.075c.063.049.095.122.095.277v.049c-.099-.015-.19-.023-.19-.023zm9.334-.597a.03.03 0 0 0 0-.025.03.03 0 0 0-.018-.017 1 1 0 0 0-.194-.033.6.6 0 0 0-.299.048.5.5 0 0 0-.195.145v-.141c0-.02-.014-.035-.034-.035h-.297c-.019 0-.033.015-.033.035v1.727q0 .015.01.025t.025.01h.305q.014 0 .024-.01a.04.04 0 0 0 .01-.025v-.867c0-.117.014-.232.039-.305a.44.44 0 0 1 .101-.17q.061-.061.144-.086a.56.56 0 0 1 .283-.006c.022.002.034-.012.042-.032l.088-.243",clipRule:"evenodd"}),(0,o.jsx)("path",{fill:"#FFFFFE",fillRule:"evenodd",d:"M11.938 8.049a1 1 0 0 0-.272-.04q-.316.001-.491.176-.174.176-.233.526l-.014.079h-.263s-.032-.002-.04.034l-.043.24c-.003.024.007.038.038.038h.257l-.26 1.45q-.03.177-.07.287a.6.6 0 0 1-.08.165.2.2 0 0 1-.107.082.43.43 0 0 1-.23.009c-.027-.006-.041-.012-.062-.02 0 0-.03-.012-.042.018l-.086.236c-.008.023.004.04.018.046a.7.7 0 0 0 .276.047.9.9 0 0 0 .284-.044.53.53 0 0 0 .215-.15.8.8 0 0 0 .15-.259q.06-.158.102-.39l.261-1.477h.382s.033.001.04-.034l.042-.24q.006-.037-.038-.038h-.37c.002-.009.019-.139.061-.262a.34.34 0 0 1 .081-.123.24.24 0 0 1 .097-.06.5.5 0 0 1 .279.006c.038.01.043 0 .05-.019l.09-.243c.008-.026-.014-.037-.022-.04m-5.18 2.507c0 .02-.013.035-.032.035h-.308c-.02 0-.033-.016-.033-.035V8.082c0-.02.014-.035.033-.035h.308c.019 0 .033.015.033.035z",clipRule:"evenodd"})]})},a=(0,i(340498).wt)("salesforce",r)},827774:(e,t,i)=>{i.d(t,{C:()=>f});var o=i(296540),r=()=>i(484714),a=()=>i(56366),n=()=>i(762433),s=()=>i(461946),l=()=>i(640653),c=()=>i(645873),d=()=>i(58293),u=()=>i(679616),g=()=>i(324561),p=()=>i(753735),m=()=>i(985315);const v={TrialModals:new(c().O2)("TrialModals",(()=>Promise.all([i.e(1172),i.e(71677)]).then(i.bind(i,161163))))};function f(){const e=(0,r().v3)(),t=(0,d().r)(),i=(0,g().f_)({spaceId:null==t?void 0:t.id}),c=(0,m().g)({spaceId:null==t?void 0:t.id}),v=(0,a().K8)((()=>(0,l().s7)(e)),[e]),f=y("showTimedTrialInfoModal"),S=y("showTimedTrialCancelModal"),b=y("isSelfServeBusinessTrialsEnabled"),x=y("openSelfServeBusinessTrialExplorePlanModal"),A=y("openSelfServeBusinessTrialLossAversionModal"),j=(0,a().K8)((()=>null==b?void 0:b()),[b]);return{showTrialInfoModal:(0,o.useCallback)((e=>{let{openedFrom:t}=e;if(!j)return void(null==f||f({openedFrom:t}));const o=(0,n().DS)(i);if(h(i)){const e=(0,n().i5)(i);if(!e)return;v&&!(0,p().z2)({billingData:i,claimedOffers:c})&&o>e.minus({days:s().$G})?u().uI({openedFrom:t,modalState:"initial"}):null==x||x({openedFrom:t})}else null==f||f({openedFrom:t})}),[j,i,c,v,x,f]),showTrialCancelModal:(0,o.useCallback)((t=>{let{openedFrom:o,trialPlan:r}=t;j&&h(i)?null==A||A({openedFrom:o}):null==S||S({environment:e,trialPlan:r,openedFrom:o})}),[j,i,e,A,S])}}function h(e){return Boolean((0,n().TB)(e)&&"business"===(0,n().AI)(e))}function y(e){var t;const i=(0,c().fJ)(v.TrialModals);return null==i||null===(t=i.value)||void 0===t?void 0:t[e]}},882827:(e,t,i)=>{i.d(t,{p:()=>n});i(296540);var o=()=>i(783982),r=()=>i(340498),a=i(474848);function n(e,t){const{viewBox:i,svg:n}=t,s=i??`0 0 ${r().Ev.default} ${r().Ev.default}`;return Object.assign((t=>{let{style:i,className:r,label:l,animationState:c}=t;const d=r?`${e} ${r}`:e;return(0,a.jsx)(o().A,{viewBox:s,className:d,style:i,label:l,children:n(c)})}),{__iconDefinition:{viewBox:s,svg:n("initial")}})}},909306:(e,t,i)=>{i.d(t,{Mb:()=>a,ze:()=>n});var o=()=>i(715256),r=()=>i(762433);function a(e){let{billingData:t,experimentService:i,spaceId:a}=e;const n=(0,r().YF)(t),s=(0,r().N8)(null==t?void 0:t.subscription),l=i.checkGate({gateName:"packaging_changes_05_13_2025",actor:o().S3,customIDs:{spaceId:a}}),c=(0,r().eh)(t,"plus"),d=(0,r().eh)(t,"business"),u=(0,r().eh)(t,"enterprise"),g=(0,r().eh)(t,"ai"),p=(0,r().eh)(t,"student"),m=(0,r().eh)(t,"personal");return l?s?g&&(c||d||u)?{currentState:{featureSet:"advanced",reason:"ai_product"},upsell:void 0}:t&&(0,r().PB)(t)?{currentState:{featureSet:"advanced",reason:u?"enterprise":"business"},upsell:void 0}:{currentState:{featureSet:"none"},upsell:{product:"ai",featureSet:"advanced"}}:n?g&&m?{currentState:{featureSet:"advanced",reason:"personal_ai"},upsell:void 0}:m&&!g?{currentState:{featureSet:"none"},upsell:{product:"ai",featureSet:"advanced"}}:g&&!m?{currentState:{featureSet:"core",reason:"ai_product"},upsell:{product:"personal",featureSet:"advanced"}}:{currentState:{featureSet:"none"},upsell:{product:"ai",featureSet:"core"}}:p?g?{currentState:{featureSet:"core",reason:"ai_product"},upsell:{product:"business",featureSet:"advanced"}}:{currentState:{featureSet:"none"},upsell:{product:"ai",featureSet:"core"}}:d?g?{currentState:{featureSet:"advanced",reason:"ai_product"},upsell:void 0}:{currentState:{featureSet:"advanced",reason:"business"},upsell:void 0}:u?g?{currentState:{featureSet:"advanced",reason:"ai_product"},upsell:void 0}:{currentState:{featureSet:"advanced",reason:"enterprise"},upsell:void 0}:g?{currentState:{featureSet:"core",reason:"ai_product"},upsell:{product:"business",featureSet:"advanced"}}:{currentState:{featureSet:"none"},upsell:{product:"business",featureSet:"advanced"}}:g?{currentState:{featureSet:"core",reason:"ai_product"},upsell:void 0}:{currentState:{featureSet:"none"},upsell:{product:"ai",featureSet:"core"}}}function n(e){var t;let{billingData:i,experimentService:o,spaceId:r}=e;return"ai"===(null===(t=a({billingData:i,experimentService:o,spaceId:r}))||void 0===t||null===(t=t.upsell)||void 0===t?void 0:t.product)}},963612:(e,t,i)=>{i.d(t,{Ol:()=>Ft,_b:()=>Lt});var o=i(296540),r=()=>i(56366),a=()=>i(296344),n=()=>i(534177),s=()=>i(773442),l=()=>i(630116),c=(i(18107),i(967357),()=>i(484714)),d=()=>i(401497),u=()=>i(692026),g=()=>i(584262),p=()=>i(179034),m=()=>i(96689),v=()=>i(854150),f=()=>i(959013),h=()=>i(284371),y=()=>i(746970),S=()=>i(979620),b=()=>i(459711),x=()=>i(302873),A=()=>i(77179),j=()=>i(12296),_=()=>i(360137),M=()=>i(870923),I=()=>i(61548),k=i(474848);function w(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:n,guestInviteRequestModel:s}=e,{notification:u,tab:m,source:v}=o,y=(0,c().v3)(),S=(0,f().tz)(),b=(0,r().K8)((()=>l().v3.createChildStore(i,{table:s.table,id:s.id,spaceId:s.spaceId})),[s,i]),x=(0,r().K8)((()=>b.getModel()),[b]),_=(0,r().K8)((()=>{if(!x)return;const e=i.getSpaceId();if(!e)return;const t=x.getCreatedByPointer(e);return l().sk.createChildStore(i,t)}),[x,i]),w=(0,r().K8)((()=>{if(_&&_ instanceof l().LU)return _.getDisplayName(S)}),[_,S]),C=(0,r().K8)((()=>{if(t.navigable_block_id)return l().Bv.createChildStore(i,{table:p().ev,id:t.navigable_block_id})}),[t,i]),T=(0,r().K8)((()=>{if(!C)return;const e=C.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,discussionId:t.discussion_id,pageVisitSource:g().y8.Notification}):void 0}),[C,i,t]),B=(0,r().K8)((()=>{const e=null==x?void 0:x.getForActorPointer(i.getSpaceId());if(!e)return;const t=l().sk.createChildStore(i,e);return t&&t instanceof l().LU?t.getEmail():void 0}),[x,i]),K=(0,d().IS)((e=>({externalUser:{color:e.palette.yellow[300]}})),[]),q=(0,r().K8)((()=>{var e;return null==_||null===(e=_.getModel())||void 0===e?void 0:e.asActor}),[_]);return(0,k.jsx)(I().my,{notificationTitleStore:C,header:{icon:(0,k.jsx)(A().H8,{authors:q?[q]:[],size:I().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:(0,k.jsx)(f().sA,{defaultMessage:"{requestingActorName} <regular>requested access to</regular> {pageTitleAndIcon}",id:"activity.guestInviteRequest.header",values:{requestingActorName:w,regular:e=>(0,k.jsx)("span",{style:{fontWeight:h().Wy.regular},children:e}),pageTitleAndIcon:(0,k.jsx)(M().i,{blockStore:C,underline:!1,shouldWrap:!0})}})},body:(0,k.jsx)(f().sA,{id:"activity.guestInviteRequest.bodyMessage",defaultMessage:"Requested access for {guestEmail} <yellow>(external user)</yellow>",values:{guestEmail:B,yellow:e=>(0,k.jsx)("span",{style:K.externalUser,children:e})}}),isFirst:a,isLast:n,rootStore:i,notification:u,url:T,...(0,j().$5)({notification:u,activity:t,environment:y,tab:m}),children:(0,k.jsx)(R,{activity:t,accessRequestStore:b,rootStore:i,source:v,notification:u,tabArgs:o})})}function R(e){const{activity:t,accessRequestStore:i,rootStore:a,notification:g,tabArgs:f}=e,h=(0,c().v3)(),A=(0,r().K8)((()=>t.getEdits()),[t])[0],j=(0,r().K8)((()=>i.getParentTable()),[i]),M=(0,r().K8)((()=>i.getParentId()),[i]),I=(0,r().K8)((()=>t.navigable_block_id),[t]),w=(0,r().K8)((()=>i.getModel()),[i]),R=(0,r().K8)((()=>w&&(0,u().C)(w)),[w]),C=(0,s().I)({spaceStore:a,request:w}),T=(0,r().K8)((()=>{if("page_access_request"===R){var e;const t=null==w||null===(e=w.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e||null===(e=e.at(0))||void 0===e?void 0:e.role;if(t)return t}return"reader"}),[w,R]),B=(0,o.useCallback)((async()=>{if(R&&C&&w)if("space_membership_request"===C&&"space_membership_request"===R)await y().p4({status:"approved",environment:h,requests:[w],store:a,from:"notification"});else if("space_membership_request"===C&&"guest_invite_request"===R)await y().KB({status:"approved",environment:h,store:a,requests:[w],from:"notification"});else{if("guest_invite_request"!==R)return;await y().aV({status:"approved",environment:h,requests:[w],from:"notification"})}}),[h,w,a,C,R]),K=(0,o.useCallback)((async()=>{if(R&&w)if("space_membership_request"===R)await y().p4({status:"rejected",environment:h,requests:[w],store:a,from:"notification"});else if("guest_invite_request"===R)await y().aV({status:"rejected",environment:h,requests:[w],from:"notification"});else{if("team_membership_request"===R||"page_access_request"===R)return;(0,n().HB)(R)}}),[h,w,a,R]),q=(0,d().IS)((e=>({actionPrimaryContainer:{paddingTop:0,paddingBottom:0,paddingRight:0},actionButton:(0,_().Ei)(e)})),[]),N=I?l().Bv.createChildStore(a,{table:p().ev,id:I}):void 0,P=(0,r().K8)((()=>j===p().ev&&Boolean(null==N?void 0:N.canAdmin())),[j,N]);if(!(j&&M&&C&&A))return null;if("page_access_request"===C)return P&&N?(0,k.jsx)("div",{style:q.actionPrimaryContainer,children:(0,k.jsx)(x().A,{accessRequestStore:i,targetBlockStore:N,initialRole:T,buttonStyle:q.actionButton,notification:g,rootStore:a,activity:t,tabArgs:f})}):null;if("space_membership_request"===C||"guest_invite_request"===C){const e=l().SL.createChildStore(a,{table:m().NX,id:M});return(0,k.jsx)("div",{style:q.actionPrimaryContainer,children:(0,k.jsx)(b().A,{effectiveAccessRequestType:C,accessRequestStore:i,spaceStore:e,initialRole:"reader",buttonStyle:q.actionButton,notification:g,onApprove:B,onReject:K})})}if("team_membership_request"===C){const e=l().h4.createChildStore(a,{table:v().yK,id:M});return(0,k.jsx)("div",{style:q.actionPrimaryContainer,children:(0,k.jsx)(S().A,{accessRequestStore:i,teamStore:e})})}(0,n().HB)(C)}const C=o.memo(w);function T(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:s}=e,{notification:d,tab:u,source:m}=o,v=(0,c().v3)(),y=(0,f().tz)(),S=(0,r().K8)((()=>t.getEdits()),[t])[0],b=(0,r().K8)((()=>l().v3.createChildStore(i,{table:a().O,id:t.access_request_id,spaceId:i.getSpaceId()})),[t,i]),x=(0,r().K8)((()=>b.getModel()),[b]),_=(0,r().K8)((()=>null==x?void 0:x.isEditPageAccessRequest()),[x]),w=S.message,R=(0,r().K8)((()=>{if(!x)return;const e=i.getSpaceId();if(!e)return;const t=x.getCreatedByPointer(e);return l().sk.createChildStore(i,t)}),[x,i]),C=(0,r().K8)((()=>{if(t.navigable_block_id)return l().Bv.createChildStore(i,{table:p().ev,id:t.navigable_block_id})}),[t,i]),T=(0,r().K8)((()=>{if(!C)return;const e=C.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,discussionId:t.discussion_id,pageVisitSource:g().y8.Notification}):void 0}),[C,i,t]),K=(0,r().K8)((()=>{if(R)return R.getDisplayName(y)}),[R,y]),q=(0,r().K8)((()=>{var e;if(!R)return[];const t=null===(e=R.getModel())||void 0===e?void 0:e.asActor;return t?[t]:[]}),[R]),N=(0,r().K8)((()=>C?(0,k.jsx)(f().sA,{id:"activity.pageAccessRequest.pageTitleText",defaultMessage:"{requestingActorName} <regular>requested access to</regular> {pageTitle}",values:{requestingActorName:K,regular:e=>(0,k.jsx)("span",{style:{fontWeight:h().Wy.regular},children:e}),pageTitle:(0,k.jsx)(M().i,{blockStore:C,underline:!1,shouldWrap:!0})}}):null),[C,K]);return(0,k.jsx)(I().my,{notificationTitleStore:C,header:{icon:(0,k.jsx)(A().H8,{authors:q,size:I().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:N},body:w?(0,k.jsx)(f().sA,{id:"activity.pageAccessRequest.messageBody",defaultMessage:"{message}",values:{message:w}}):_?(0,k.jsx)(f().sA,{id:"activity.pageAccessRequest.bodyEditAccessNoMessage",defaultMessage:"Requested edit access"}):void 0,isFirst:n,isLast:s,rootStore:i,navigableBlockId:null==C?void 0:C.id,notification:d,url:T,...(0,j().$5)({notification:d,activity:t,environment:v,tab:u}),children:(0,k.jsx)(B,{activity:t,accessRequestStore:b,rootStore:i,source:m,notification:d,tabArgs:o})})}function B(e){const{activity:t,accessRequestStore:i,rootStore:a,notification:g,tabArgs:f}=e,h=(0,c().v3)(),A=(0,r().K8)((()=>t.getEdits()),[t])[0],j=(0,r().K8)((()=>i.getParentTable()),[i]),M=(0,r().K8)((()=>i.getParentId()),[i]),I=(0,r().K8)((()=>t.navigable_block_id),[t]),w=(0,r().K8)((()=>i.getModel()),[i]),R=(0,r().K8)((()=>w&&(0,u().C)(w)),[w]),C=(0,s().I)({spaceStore:a,request:w}),T=(0,r().K8)((()=>{if("page_access_request"===R){var e;const t=null==w||null===(e=w.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e||null===(e=e.at(0))||void 0===e?void 0:e.role;if(t)return t}return"reader"}),[w,R]),B=(0,o.useCallback)((async()=>{if(R&&C&&w)if("space_membership_request"===C&&"space_membership_request"===R)await y().p4({status:"approved",environment:h,requests:[w],store:a,from:"notification"});else if("space_membership_request"===C&&"guest_invite_request"===R)await y().KB({status:"approved",environment:h,store:a,requests:[w],from:"notification"});else{if("guest_invite_request"!==R)return;await y().aV({status:"approved",environment:h,requests:[w],from:"notification"})}}),[h,w,a,C,R]),K=(0,o.useCallback)((async()=>{if(R&&w)if("space_membership_request"===R)await y().p4({status:"rejected",environment:h,requests:[w],store:a,from:"notification"});else if("guest_invite_request"===R)await y().aV({status:"rejected",environment:h,requests:[w],from:"notification"});else{if("team_membership_request"===R||"page_access_request"===R)return;(0,n().HB)(R)}}),[h,w,a,R]),q=(0,d().IS)((e=>({actionPrimaryContainer:{paddingTop:4,paddingBottom:0,paddingRight:0},actionButton:(0,_().Ei)(e)})),[]),N=I?l().Bv.createChildStore(a,{table:p().ev,id:I}):void 0,P=(0,r().K8)((()=>j===p().ev&&Boolean(null==N?void 0:N.canAdmin())),[j,N]);if(!(j&&M&&C&&A))return null;if("page_access_request"===C)return P&&N?(0,k.jsx)("div",{style:q.actionPrimaryContainer,children:(0,k.jsx)(x().A,{accessRequestStore:i,targetBlockStore:N,initialRole:T,buttonStyle:q.actionButton,notification:g,rootStore:a,activity:t,tabArgs:f})}):null;if("space_membership_request"===C||"guest_invite_request"===C){const e=l().SL.createChildStore(a,{table:m().NX,id:M});return(0,k.jsx)("div",{style:q.actionPrimaryContainer,children:(0,k.jsx)(b().A,{effectiveAccessRequestType:C,accessRequestStore:i,spaceStore:e,initialRole:"reader",buttonStyle:q.actionButton,notification:g,onApprove:B,onReject:K})})}if("team_membership_request"===C){const e=l().h4.createChildStore(a,{table:v().yK,id:M});return(0,k.jsx)("div",{style:q.actionPrimaryContainer,children:(0,k.jsx)(S().A,{accessRequestStore:i,teamStore:e})})}(0,n().HB)(C)}const K=o.memo(T);function q(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:s}=e,{notification:d,tab:u,source:g}=o,p=(0,c().v3)(),m=(0,f().tz)(),v=(0,r().K8)((()=>t.getEdits()),[t])[0],y=(0,r().K8)((()=>l().v3.createChildStore(i,{table:a().O,id:t.access_request_id})),[t,i]),S=(0,r().K8)((()=>y.getModel()),[y]),b=v.message,x=(0,r().K8)((()=>{if(!S)return;const e=S.getCreatedByPointer(i.getSpaceId());return l().sk.createChildStore(i,e)}),[S,i]),_=(0,r().K8)((()=>!!S&&S.getForActorId()===S.getCreatedById()),[S]),M=(0,r().K8)((()=>{if(!S)return;const e=S.getForActorPointer(i.id);if(!e)return;const t=l().sk.createChildStore(i,e);return t instanceof l().LU?t.getEmail():void 0}),[S,i]),w=(0,r().K8)((()=>{if(x)return x.getDisplayName(m)}),[x,m]),R=(0,r().K8)((()=>{var e;return null==x||null===(e=x.getModel())||void 0===e?void 0:e.asActor}),[x]);return(0,k.jsx)(I().my,{notificationTitleStore:x,header:{icon:(0,k.jsx)(A().H8,{authors:R?[R]:[],size:I().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:_?(0,k.jsx)(f().sA,{id:"activity.spaceMembershipRequestForSelf.title",defaultMessage:"{requestingActorName} <regular>requested to be added as a workspace member</regular> {hasMessage, select, true {, {message}} other {}}",values:{hasMessage:Boolean(b),message:b,requestingActorName:w,regular:e=>(0,k.jsx)("span",{style:{fontWeight:h().Wy.regular},children:e})}}):(0,k.jsx)(f().sA,{id:"activity.spaceMembershipRequest.title",defaultMessage:"{requestingActorName} <regular>requested to add</regular> {forActorEmail} <regular>as a workspace member</regular> {hasMessage, select, true {, {message}} other {}}",values:{forActorEmail:M,hasMessage:Boolean(b),message:b,requestingActorName:w,regular:e=>(0,k.jsx)("span",{style:{fontWeight:h().Wy.regular},children:e})}})},isFirst:n,isLast:s,rootStore:i,notification:d,url:void 0,...(0,j().$5)({notification:d,activity:t,environment:p,tab:u}),children:(0,k.jsx)(N,{activity:t,accessRequestStore:y,rootStore:i,source:g,notification:d,tabArgs:o})})}function N(e){const{activity:t,accessRequestStore:i,rootStore:a,notification:g,tabArgs:f}=e,h=(0,c().v3)(),A=(0,r().K8)((()=>t.getEdits()),[t])[0],j=(0,r().K8)((()=>i.getParentTable()),[i]),M=(0,r().K8)((()=>i.getParentId()),[i]),I=(0,r().K8)((()=>t.navigable_block_id),[t]),w=(0,r().K8)((()=>i.getModel()),[i]),R=(0,r().K8)((()=>w&&(0,u().C)(w)),[w]),C=(0,s().I)({spaceStore:a,request:w}),T=(0,r().K8)((()=>{if("page_access_request"===R){var e;const t=null==w||null===(e=w.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e||null===(e=e.at(0))||void 0===e?void 0:e.role;if(t)return t}return"reader"}),[w,R]),B=(0,o.useCallback)((async()=>{if(R&&C&&w)if("space_membership_request"===C&&"space_membership_request"===R)await y().p4({status:"approved",environment:h,requests:[w],store:a,from:"notification"});else if("space_membership_request"===C&&"guest_invite_request"===R)await y().KB({status:"approved",environment:h,store:a,requests:[w],from:"notification"});else{if("guest_invite_request"!==R)return;await y().aV({status:"approved",environment:h,requests:[w],from:"notification"})}}),[h,w,a,C,R]),K=(0,o.useCallback)((async()=>{if(R&&w)if("space_membership_request"===R)await y().p4({status:"rejected",environment:h,requests:[w],store:a,from:"notification"});else if("guest_invite_request"===R)await y().aV({status:"rejected",environment:h,requests:[w],from:"notification"});else{if("team_membership_request"===R||"page_access_request"===R)return;(0,n().HB)(R)}}),[h,w,a,R]),q=(0,d().IS)((e=>({actionPrimaryContainer:{paddingTop:4,paddingBottom:0,paddingRight:0},actionButton:(0,_().Ei)(e)})),[]),N=I?l().Bv.createChildStore(a,{table:p().ev,id:I}):void 0,P=(0,r().K8)((()=>j===p().ev&&Boolean(null==N?void 0:N.canAdmin())),[j,N]);if(!(j&&M&&C&&A))return null;if("page_access_request"===C)return P&&N?(0,k.jsx)("div",{style:q.actionPrimaryContainer,children:(0,k.jsx)(x().A,{accessRequestStore:i,targetBlockStore:N,initialRole:T,buttonStyle:q.actionButton,notification:g,rootStore:a,activity:t,tabArgs:f})}):null;if("space_membership_request"===C||"guest_invite_request"===C){const e=l().SL.createChildStore(a,{table:m().NX,id:M});return(0,k.jsx)("div",{style:q.actionPrimaryContainer,children:(0,k.jsx)(b().A,{effectiveAccessRequestType:C,accessRequestStore:i,spaceStore:e,initialRole:"reader",buttonStyle:q.actionButton,notification:g,onApprove:B,onReject:K})})}if("team_membership_request"===C){const e=l().h4.createChildStore(a,{table:v().yK,id:M});return(0,k.jsx)("div",{style:q.actionPrimaryContainer,children:(0,k.jsx)(S().A,{accessRequestStore:i,teamStore:e})})}(0,n().HB)(C)}const P=o.memo(q);var W=()=>i(187820),F=()=>i(16006);function L(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:s}=e,{notification:u,tab:g,source:p}=o,m=(0,c().v3)(),y=(0,f().tz)(),S=(0,r().K8)((()=>t.getEdits()),[t])[0],b=(0,r().K8)((()=>{if(t.team_id)return l().h4.createChildStore(i,{table:v().yK,id:t.team_id,spaceId:i.getSpaceId()})}),[t,i]),{teamName:x,teamIcon:_}=(0,r().K8)((()=>{var e,t;return{teamName:null==b||null===(e=b.getModel())||void 0===e?void 0:e.getName(),teamIcon:null==b||null===(t=b.getModel())||void 0===t?void 0:t.getRenderIcon({getRecordModel:b.getRecordModel})}}),[b]),M=(0,r().K8)((()=>l().v3.createChildStore(i,{table:a().O,id:t.access_request_id})),[t,i]),w=(0,r().K8)((()=>M.getModel()),[M]),R=S.message,C=(0,r().K8)((()=>{if(!w)return;const e=i.getSpaceId();if(!e)return;const t=w.getCreatedByPointer(e);return l().sk.createChildStore(i,t)}),[w,i]),T=(0,r().K8)((()=>{if(C)return C.getDisplayName(y)}),[C,y]),B=(0,r().K8)((()=>{var e;return null==C||null===(e=C.getModel())||void 0===e?void 0:e.asActor}),[C]),K=(0,d().IS)((e=>({teamIconAndNameContainer:{maxWidth:"fit-content",display:"inline",borderRadius:4,paddingLeft:3,paddingRight:5,marginTop:-2,marginBottom:-2,marginLeft:-2.5,marginRight:-5,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},teamIcon:{...Boolean(_)?{whiteSpace:"nowrap",display:"inline-block",verticalAlign:"text-top",marginRight:3}:{display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"text-bottom",marginRight:3}},teamTitle:{fontSize:14,fontWeight:h().Wy.medium,paddingBottom:1,whiteSpace:"nowrap"}})),[_]);return(0,k.jsx)(I().my,{notificationTitleStore:b,header:{icon:(0,k.jsx)(A().H8,{authors:B?[B]:[],size:I().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:(0,k.jsx)(f().sA,{defaultMessage:"{requestingActorName} <regular>requested to join</regular> {teamIconAndName}",id:"activity.teamMembershipRequest.header",values:{requestingActorName:T,regular:e=>(0,k.jsx)("span",{style:{fontWeight:h().Wy.regular},children:e}),teamIconAndName:(0,k.jsxs)("div",{style:K.teamIconAndNameContainer,children:[(0,k.jsx)(W().B6,{title:Boolean(_)?void 0:x,disabled:!0,icon:_,iconRecordCategory:"teamspace",isEmptyPage:!1,size:16,style:K.teamIcon}),b&&(0,k.jsx)(F().A,{store:b,style:K.teamTitle,shouldWrap:!0})]})}})},body:R?(0,k.jsx)(f().sA,{id:"activity.teamMembershipRequest.messageBody",defaultMessage:"{message}",values:{message:R}}):void 0,isFirst:n,isLast:s,rootStore:i,notification:u,url:void 0,...(0,j().$5)({notification:u,activity:t,environment:m,tab:g}),children:(0,k.jsx)(D,{activity:t,accessRequestStore:M,rootStore:i,source:p,notification:u,tabArgs:o})})}function D(e){const{activity:t,accessRequestStore:i,rootStore:a,notification:g,tabArgs:f}=e,h=(0,c().v3)(),A=(0,r().K8)((()=>t.getEdits()),[t])[0],j=(0,r().K8)((()=>i.getParentTable()),[i]),M=(0,r().K8)((()=>i.getParentId()),[i]),I=(0,r().K8)((()=>t.navigable_block_id),[t]),w=(0,r().K8)((()=>i.getModel()),[i]),R=(0,r().K8)((()=>w&&(0,u().C)(w)),[w]),C=(0,s().I)({spaceStore:a,request:w}),T=(0,r().K8)((()=>{if("page_access_request"===R){var e;const t=null==w||null===(e=w.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e||null===(e=e.at(0))||void 0===e?void 0:e.role;if(t)return t}return"reader"}),[w,R]),B=(0,o.useCallback)((async()=>{if(R&&C&&w)if("space_membership_request"===C&&"space_membership_request"===R)await y().p4({status:"approved",environment:h,requests:[w],store:a,from:"notification"});else if("space_membership_request"===C&&"guest_invite_request"===R)await y().KB({status:"approved",environment:h,store:a,requests:[w],from:"notification"});else{if("guest_invite_request"!==R)return;await y().aV({status:"approved",environment:h,requests:[w],from:"notification"})}}),[h,w,a,C,R]),K=(0,o.useCallback)((async()=>{if(R&&w)if("space_membership_request"===R)await y().p4({status:"rejected",environment:h,requests:[w],store:a,from:"notification"});else if("guest_invite_request"===R)await y().aV({status:"rejected",environment:h,requests:[w],from:"notification"});else{if("team_membership_request"===R||"page_access_request"===R)return;(0,n().HB)(R)}}),[h,w,a,R]),q=(0,d().IS)((e=>({actionPrimaryContainer:{paddingTop:4,paddingBottom:0,paddingRight:0},actionButton:(0,_().Ei)(e)})),[]),N=I?l().Bv.createChildStore(a,{table:p().ev,id:I}):void 0,P=(0,r().K8)((()=>j===p().ev&&Boolean(null==N?void 0:N.canAdmin())),[j,N]);if(!(j&&M&&C&&A))return null;if("page_access_request"===C)return P&&N?(0,k.jsx)("div",{style:q.actionPrimaryContainer,children:(0,k.jsx)(x().A,{accessRequestStore:i,targetBlockStore:N,initialRole:T,buttonStyle:q.actionButton,notification:g,rootStore:a,activity:t,tabArgs:f})}):null;if("space_membership_request"===C||"guest_invite_request"===C){const e=l().SL.createChildStore(a,{table:m().NX,id:M});return(0,k.jsx)("div",{style:q.actionPrimaryContainer,children:(0,k.jsx)(b().A,{effectiveAccessRequestType:C,accessRequestStore:i,spaceStore:e,initialRole:"reader",buttonStyle:q.actionButton,notification:g,onApprove:B,onReject:K})})}if("team_membership_request"===C){const e=l().h4.createChildStore(a,{table:v().yK,id:M});return(0,k.jsx)("div",{style:q.actionPrimaryContainer,children:(0,k.jsx)(S().A,{accessRequestStore:i,teamStore:e})})}(0,n().HB)(C)}const V=o.memo(L);function E(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:c,isLast:d}=e,u=(0,r().K8)((()=>l().v3.createChildStore(i,{table:a().O,id:t.access_request_id})),[t,i]),g=(0,r().K8)((()=>u.getModel()),[u]),{pageAccessRequestModel:p,guestInviteRequestModel:m,teamMembershipRequestModel:v}=(0,r().K8)((()=>({pageAccessRequestModel:null!=g&&g.isPageAccessRequest()?g:void 0,guestInviteRequestModel:null!=g&&g.isGuestInviteRequest()?g:void 0,spaceMembershipRequestModel:null!=g&&g.isSpaceMembershipRequest()?g:void 0,teamMembershipRequestModel:null!=g&&g.isTeamMembershipRequest()?g:void 0})),[g]),f=(0,s().I)({spaceStore:i,request:g});switch(f){case"guest_invite_request":return m?(0,k.jsx)(C,{activity:t,rootStore:i,tabArgs:o,isFirst:c,isLast:d,guestInviteRequestModel:m}):null;case"space_membership_request":return(0,k.jsx)(P,{activity:t,rootStore:i,tabArgs:o,isFirst:c,isLast:d});case"team_membership_request":return v?(0,k.jsx)(V,{activity:t,rootStore:i,tabArgs:o,isFirst:c,isLast:d}):null;case"page_access_request":return p?(0,k.jsx)(K,{activity:t,rootStore:i,tabArgs:o,isFirst:c,isLast:d,pageAccessRequestModel:p}):null;case void 0:return null;default:(0,n().HB)(f)}}const z=o.memo(E);function H(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:n,isLast:s}=e,{notification:d,tab:u}=o,m=(0,c().v3)(),v=(0,f().tz)(),h=(0,r().K8)((()=>l().v3.createChildStore(i,{table:a().O,id:t.access_request_id,spaceId:i.id})),[t,i]),y=(0,r().K8)((()=>{const e=h.getModel();return e&&e.isGuestInviteRequest()&&e.isResolved()||e&&e.isEditPageAccessRequest()&&e.isApproved()?e:void 0}),[h]),S=(0,r().K8)((()=>null==y?void 0:y.getStatus()),[y]),b=(0,r().K8)((()=>Boolean(null==y?void 0:y.isEditPageAccessRequest())),[y]),x=(0,r().K8)((()=>{if(t.navigable_block_id)return l().Bv.createChildStore(i,{table:p().ev,id:t.navigable_block_id,spaceId:i.id})}),[t,i]),_=(0,r().K8)((()=>{if(!y)return;const e=y.getForActorPointer(i.getSpaceId()),t=l().sk.createChildStore(i,e);return t instanceof l().LU?t:void 0}),[y,i]),w=(0,r().K8)((()=>{const e=null==_?void 0:_.getDisplayName(v),t=null==_?void 0:_.getEmail();return e?`${e} (${t})`:t}),[_,v]),{resolvedByActorModel:R,resolvedByActor:C}=(0,r().K8)((()=>{if(!y)return{resolvedByActorModel:void 0,resolvedByActor:void 0};const e=y.getResolvedByPointer(i.getSpaceId());if(!e)return{resolvedByActorModel:void 0,resolvedByActor:void 0};const t=l().sk.createChildStore(i,e).getModel();return{resolvedByActorModel:t,resolvedByActor:null==t?void 0:t.asActor}}),[y,i]),T=(0,r().K8)((()=>{if(R)return R.getDisplayName(v)}),[R,v]),B=(0,r().K8)((()=>{if(!x)return;const e=x.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,discussionId:t.discussion_id,pageVisitSource:g().y8.Notification}):void 0}),[x,i,t]);return(0,k.jsx)(I().my,{notificationTitleStore:x,header:{icon:(0,k.jsx)(A().H8,{authors:C?[C]:[],size:I().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:b?(0,k.jsx)(f().sA,{defaultMessage:"{resolvingActorName} <regular>approved your request to edit the page</regular>",id:"activity.EditAccessRequestResolved.approvedHeader",values:{resolvingActorName:T,regular:O}}):"approved"===S?(0,k.jsx)(f().sA,{defaultMessage:"{resolvingActorName} <regular>approved your request to invite</regular> {forActorNameOrEmail} <regular>as a guest</regular>",values:{resolvingActorName:T,forActorNameOrEmail:w,regular:O},id:"activity.GuestInviteRequestResolved.approvedHeader"}):"rejected"===S?(0,k.jsx)(f().sA,{defaultMessage:"{resolvingActorName} <regular>denied your request to invite</regular> {forActorNameOrEmail} <regular>as a guest</regular>",values:{resolvingActorName:T,forActorNameOrEmail:w,regular:O},id:"activity.GuestInviteRequestResolved.rejectedHeader"}):T},subheader:x?(0,k.jsx)(M().i,{blockStore:x,underline:!1,shouldWrap:!0}):void 0,isFirst:n,isLast:s,rootStore:i,navigableBlockId:null==x?void 0:x.id,notification:d,url:B,disableTitleClamp:!0,...(0,j().$5)({notification:d,activity:t,environment:m,tab:u})})}function O(e){return(0,k.jsx)("span",{style:{fontWeight:h().Wy.regular},children:e})}const U=o.memo(H);i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698),i(581454);var $=()=>i(278132),G=()=>i(297813),Y=()=>i(68263),Q=()=>i(912720),J=()=>i(848259),X=()=>i(435009),Z=()=>i(2220),ee=()=>i(492414),te=()=>i(864943),ie=()=>i(51334);function oe(e){const{rootStore:t,activity:a,isLast:s,tabArgs:u,isFirst:m}=e,{tab:v,notification:y}=u,S=(0,f().tz)(),b=(0,c().v3)(),x=(0,r().K8)((()=>a.getEdits()),[a]),A=x.at(0),_=(0,d().IS)((e=>({editAutomation:{marginTop:8,height:26,fontWeight:h().Wy.medium}})),[]),M=(0,o.useMemo)((()=>new Set(x.map((e=>e.automation_id)))),[x]),w=(0,r().K8)((()=>{if(!(0,n().O9)(A))return!1;return!l().dn.createChildStore(t,{table:Q().yB,id:A.automation_id,spaceId:t.getSpaceId()}).getAlive()}),[t,A]),{handleNavigateToAutomation:R,navigableBlockStore:C,navigableBlockUrl:T}=function(e){let{edit:t,rootStore:i,uniqueAutomationIds:o}=e;const a=(0,c().v3)(),s=1===o.size,d=(0,r().K8)((()=>{if(!(0,n().O9)(t))return!1;return!l().dn.createChildStore(i,{table:Q().yB,id:t.automation_id,spaceId:i.getSpaceId()}).getAlive()}),[i,t]),u=(0,r().K8)((()=>{if((0,n().O9)(t))return new(l().Bv)(a,{id:t.automation_navigable_block_id,table:p().ev})}),[t,a]),m=(0,r().K8)((()=>{if(!(0,n().O9)(u))return!0;const e=u.getRole();return!e||!(0,Y().Tt)(e)}),[u]),v=(0,r().K8)((()=>{if((0,n().O9)(u))return(0,ee().Ay)({store:u,preferPublicLink:!1,pageVisitSource:g().y8.Notification})}),[u]),f=(0,r().K8)((()=>m||!(0,n().O9)(t)?()=>{}:()=>{const e=t.automation_id;u&&v&&((0,Z().u)({environment:a,event:{eventName:"click_automation_typecheck_error_notification",eventProperties:{block_id:u.id,automation_id:e}}}),X().oo({environment:a,url:v,callback:async()=>await(0,ie()._)({environment:a,automationNavigableBlockStore:u,automationId:s&&!d?e:void 0,rootStore:i,source:"automation_typecheck_error_raised_notification"})}))}),[d,s,m,t,u,v,a,i]);return{handleNavigateToAutomation:f,navigableBlockStore:u,navigableBlockUrl:v}}({edit:A,rootStore:t,uniqueAutomationIds:M}),B=(0,r().K8)((()=>[...M].map((e=>{const i=t.getRecordStore(t,{table:Q().yB,id:e,spaceId:a.spaceId}),o=i.getRole();return(0,n().O9)(o)&&(0,Y().Tt)(o)?i.getAlive()?i.getNameWithDefault(S):S.formatMessage($().VS.automationDeletedName):S.formatMessage($().VS.automationPrivateName)}))),[S,t,a,M]),K=(0,o.useCallback)((e=>{i(751156).createAndCommit({userAction:"AutomationTypecheckErrorRaisedActivity.viewError",environment:b,canUndo:!0,perform:e=>{i(572080).ZB({notification:y,rootStore:t,transaction:e,read:!0})}}),R(),J().K4({tab:v,notificationId:null==y?void 0:y.id,environment:b,alreadyRead:Boolean(null==y?void 0:y.read),activity:a})}),[a,b,R,y,t,v]);if(!(0,n().O9)(C)||!(0,n().O9)(A)||0===x.length)return null;const q=w&&1===M.size;return(0,k.jsx)(I().my,{header:{icon:(0,k.jsx)(I().S7,{icon:G().xMarkFillIcon}),title:(0,k.jsx)(f().sA,{id:"AutomationTypecheckErrorRaisedActivity.formattedHeaderMessage.header",defaultMessage:"{numAutomationNames, plural, one {Automation is} other {Automations are}} invalid",values:{numAutomationNames:M.size}})},subheader:B.join(", "),body:!q&&(0,k.jsx)(f().sA,{id:"AutomationTypecheckErrorRaisedActivity.formattedHeaderMessage.body",defaultMessage:"Resolve any errors or remove failing steps to enable {numAutomationNames, plural, one {this automation} other {these automations}}",values:{numAutomationNames:M.size}}),isFirst:m,isLast:s,rootStore:t,navigableBlockId:C.id,notification:y,url:T,...(0,j().$5)({notification:y,activity:a,environment:b,tab:v}),children:!q&&(0,k.jsx)(te().A,{style:_.editAutomation,onClick:K,size:"md",children:(0,k.jsx)(f().sA,{id:"AutomationTypecheckErrorRaisedActivity.editAutomation.automationMessage",defaultMessage:"Edit automation"})})})}const re=o.memo(oe);i(898992),i(908872);var ae=()=>i(107273),ne=()=>i(962730),se=()=>i(859428),le=()=>i(921194),ce=()=>i(447587),de=()=>i(770176),ue=()=>i(769617);const ge=(0,f().YK)({singlePropertyEdited:{id:"activity.blockEdited.singlePropertyEdited",defaultMessage:"{author} <regular>updated a property in</regular> {pageTitle}"},multiplePropertiesEditedWithTitle:{id:"activity.blockEdited.multiplePropertiesEdited",defaultMessage:"{author} <regular>updated multiple properties in</regular> {pageTitle}"},multiplePropertiesEditedWithoutTitle:{id:"activity.blockEdited.multiplePropertiesEditedWithoutTitle",defaultMessage:"{author} <regular>edited properties</regular>"}});function pe(e){let{shouldShowPageTitle:t,shouldOnlyShowEditsOnHover:i,authorNames:o,blockStore:r,intl:a}=e,n=ge.singlePropertyEdited;return i&&(n=t?ge.multiplePropertiesEditedWithTitle:ge.multiplePropertiesEditedWithoutTitle),(0,k.jsx)(ce().A,{maxLines:3,children:a.formatMessage(n,{author:o.join(", "),regular:e=>(0,k.jsx)("span",{style:{fontWeight:h().Wy.regular},children:e}),pageTitle:(0,k.jsx)(M().i,{blockStore:r,underline:!1,shouldWrap:!0})})})}function me(e){let{shouldOnlyShowEditsOnHover:t,authorActors:i,rootStore:o}=e;const r=(0,k.jsx)(A().H8,{authors:i,size:I().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1});if(!t||i.length<=1)return r;const a=i.map((e=>l().sk.createChildStore(o,e))),n=a.at(0),s=a.at(1);return n&&s?(0,k.jsx)(ue().v9,{frontActorStore:n,backActorStore:s,spaceStore:o}):r}function ve(e){const{activity:t,rootStore:o,tabArgs:a,isFirst:n,isLast:s}=e,{tab:u,notification:m}=a,v=(0,c().v3)(),h=(0,f().tz)(),y=(0,d().eP)(),S=(0,d().IS)((()=>({tooltipWrapperStyles:{whiteSpace:"normal",borderRadius:16,maxWidth:350}})),[]),b=(0,r().K8)((()=>(0,ae().W9)(t.getEdits())),[t]),x=b.length>0,A=(0,r().K8)((()=>l().Bv.createChildStore(o,{table:p().ev,id:b[0].navigable_block_id})),[o,b]),_=(0,r().K8)((()=>{const e=A.getModel();if(e)return e.getRenderUrl({getRecordModel:o.getRecordModel,pageVisitSource:g().y8.Notification})}),[A,o]),M=(0,r().K8)((()=>(0,de().Ln)({edits:b,rootStore:o})),[b,o]),w=(0,r().K8)((()=>b.reduce(((e,t)=>e+Object.keys(t.property_updates).length),0)>1),[b]),R=(0,i(963589).X)("block_property_edits_hover")&&w,C=(0,r().K8)((()=>M.map((e=>e.getDisplayName(h)))),[M,h]),T=(0,r().K8)((()=>M.map((e=>e.asActor))),[M]),B=(0,r().K8)((()=>A.isDefined()),[A]),K=e=>{let{shouldShowPageTitle:r,shouldShowEdits:a,isLastOverride:l}=e;return(0,k.jsx)(I().my,{notificationTitleStore:A,header:{icon:me({shouldOnlyShowEditsOnHover:R,authorActors:T,rootStore:o}),title:pe({shouldShowPageTitle:r,shouldOnlyShowEditsOnHover:R,authorNames:C,blockStore:A,intl:h})},body:a&&(0,k.jsx)("div",{style:{marginTop:-4},children:(0,k.jsx)(i(6533).A,{visible:5,items:b.map(((e,t)=>(0,k.jsx)(le().A,{edit:e,rootStore:o},t)))})}),isFirst:n,isLast:void 0!==l?l:s,rootStore:o,navigableBlockId:A.id,notification:m,url:_,...(0,j().$5)({notification:m,activity:t,environment:v,tab:u})})};return B&&x?R?(0,k.jsx)(se().A,{placement:ne().W.Right,isLightBackground:"light"===y,style:S.tooltipWrapperStyles,render:e=>(0,k.jsx)("div",{...e,children:K({shouldShowPageTitle:!0,shouldShowEdits:!1})}),renderTooltip:()=>(0,k.jsx)("div",{children:K({shouldShowPageTitle:!1,shouldShowEdits:!0,isLastOverride:!0})})}):K({shouldShowPageTitle:!0,shouldShowEdits:!0}):null}const fe=o.memo(ve);var he=()=>i(656352),ye=()=>i(94701);function Se(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:n}=e,{tab:s,notification:l}=o,d=(0,c().v3)(),u=(0,r().K8)((()=>(0,ae().W9)(t.getEdits())),[t]),g=(0,r().K8)((()=>{const e=u[0];return e?e.new_email:""}),[u]);return(0,k.jsx)(I().my,{header:{icon:(0,k.jsx)(I().S7,{icon:ye().checkmarkFillIcon}),title:(0,k.jsx)(f().sA,{defaultMessage:"Email updated",id:"activity.emailEdited.header"})},body:(0,k.jsx)(f().sA,{defaultMessage:"Updated to {newEmail}",values:{newEmail:g},id:"activity.emailEdited.subheader.short"}),isFirst:a,isLast:n,rootStore:i,notification:l,url:void 0,...(0,j().$5)({notification:l,activity:t,environment:d,tab:s})})}const be=o.memo(Se);function xe(e){const{activity:t,rootStore:i,tabArgs:a,isFirst:n,isLast:s}=e,{tab:l,notification:d}=a,u=(0,c().v3)(),g=(0,r().K8)((()=>t.getEdits()),[t]),p=(0,o.useCallback)((()=>{window.open(g[0].link,"_blank")}),[g]);return(0,k.jsx)(I().my,{header:{icon:(0,k.jsx)(I().S7,{icon:ye().checkmarkFillIcon}),title:(0,k.jsx)(f().sA,{defaultMessage:"Your workspace export is ready",id:"activity.exportCompleted.header"})},body:(0,k.jsx)(f().sA,{defaultMessage:"The download link will expire in 7 days.",id:"activity.exportCompleted.downloadLink"}),isFirst:n,isLast:s,rootStore:i,notification:d,url:void 0,...(0,j().$5)({notification:d,activity:t,environment:u,tab:l}),children:(0,k.jsx)(te().A,{size:"md",onClick:p,children:(0,k.jsx)(f().sA,{defaultMessage:"Download",id:"activity.actions.exportCompleted.download"})})})}const Ae=o.memo(xe);i(354520),i(430670);var je=()=>i(496603);const _e=o.memo((function(e){const{notificationStore:t,isFirst:i,isLast:a,tab:s}=e,l=(0,r().K8)((()=>t.getSpaceStore()),[t]),c=(0,r().K8)((()=>{var e;return null===(e=t.getModel())||void 0===e?void 0:e.__IM_SORRY__getValue()}),[t]),d=(0,r().K8)((()=>t.getChildNotificationStores()),[t]),u=(0,r().K8)((()=>d.map((e=>e.getActivityStore())).filter(n().O9).flatMap((e=>e.getEdits().filter((e=>function(e){switch(null==e?void 0:e.type){case"comment-changed":case"comment-created":case"comment-deleted":case"suggestion-created":return!0;default:return!1}}(e)))))),[d]),g=(0,r().K8)((()=>je().hS(d.flatMap((e=>e.getDiscussionStore())).filter(n().O9),(e=>e.pointer.id))),[d]),p=(0,o.useMemo)((()=>c?{notification:c,tab:s,source:"notifications_tab"}:void 0),[c,s]);return l&&c&&p?(0,k.jsx)(he().yb,{notification:c,edits:u,discussionStores:g,rootStore:l,isFirst:i,isLast:a,tabArgs:p,activity:void 0}):null}));var Me=()=>i(381349),Ie=()=>i(712030),ke=()=>i(921855);function we(e){const{activity:t,rootStore:i,isFirst:o,isLast:a,tabArgs:n}=e,{tab:s,notification:u}=n,m=(0,c().v3)(),v=(0,f().tz)(),y=(0,r().K8)((()=>t.getEdits()),[t]),S=y.length>0,b=y[0],x=(0,r().K8)((()=>l().Bv.createChildStore(i,{table:p().ev,id:b.navigable_block_id,spaceId:i.id})),[i,b.navigable_block_id]),_=(0,r().K8)((()=>x.isDefined()),[x]),w=(0,r().K8)((()=>l().Bv.createChildStore(i,{table:p().ev,id:t.getMentionedBlockId(),spaceId:i.id})),[i,t]),R=(0,r().K8)((()=>{const e=w.getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification})}),[i,w]),C=(0,r().K8)((()=>(0,de().Ln)({edits:y,rootStore:i})),[y,i]),T=C.map((e=>e.asActor)),B=(0,r().K8)((()=>{const e=C[0];if(e)return l().sk.createChildStore(i,e.pointer)}),[C,i]),K=(0,r().K8)((()=>{var e;return null==B||null===(e=B.getModel())||void 0===e?void 0:e.getDisplayName(v)}),[B,v]),q=(0,d().eP)(),N=(0,r().K8)((()=>(0,k.jsx)(f().sA,{id:"activity.groupMentionActivity.subheaderPageTitle",defaultMessage:"{author} <regular>mentioned your group in</regular> {pageTitle}",values:{author:K,regular:e=>(0,k.jsx)("span",{style:{fontWeight:h().Wy.regular},children:e}),pageTitle:(0,k.jsx)(M().i,{blockStore:x,underline:!1,shouldWrap:!0})}})),[x,K]),P=(0,r().K8)((()=>{const e=(0,Me().O4)({theme:q}),t=w.getTitleValue(),o=x.pointer.spaceId;if(o)return(0,ke().S5)({environment:m,textValue:{value:t,spaceId:o},parentStore:i,disableHover:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!0,disabled:!0,emojiType:(0,Ie().FN)(m),theme:e,katex:m.KatexStore.getKatex(),formulaValueTypes:[]})}),[w,q,x.pointer.spaceId,m,i]);return S&&_&&R?(0,k.jsx)(I().my,{notificationTitleStore:x,header:{icon:(0,k.jsx)(A().H8,{authors:T,size:I().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:N},body:P,isFirst:o,isLast:a,rootStore:i,navigableBlockId:x.id,notification:u,url:R,...(0,j().$5)({notification:u,activity:t,environment:m,tab:s})}):null}const Re=o.memo(we);function Ce(e){const{activity:t,rootStore:o,tabArgs:a,isFirst:n,isLast:s}=e,{tab:d,notification:u}=a,m=(0,c().v3)(),h=(0,r().K8)((()=>t.getEdits()),[t]),y=(0,r().K8)((()=>{var e;const t=null===(e=h[0])||void 0===e?void 0:e.teamspace_id;if(t)return l().sk.createChildStore(o,{table:v().yK,id:t,spaceId:o.id})}),[o,h]),S=(0,r().K8)((()=>null==y?void 0:y.getName()),[y]),{import_source:b,import_status:x,version:A,landing_page:_,collection_page_ids:M}=h[0],w=(0,i(921940).A)({pageId:_,pageVisitSource:g().y8.Import}),R="successful"===x?(0,k.jsx)(I().S7,{icon:ye().checkmarkFillIcon}):(0,k.jsx)(I().S7,{icon:G().xMarkFillIcon}),{body:C,header:T,children:B}=(0,r().K8)((()=>{const e=Boolean(b)?(0,i(484392).A)(b):void 0,t=(0,k.jsx)(f().sA,{defaultMessage:"{importSource, select, false {External} other {{importSource}}} import failed",id:"importCompletedActivity.importFailed.header",values:{importSource:e,importStatus:x}}),r=(0,k.jsx)(f().sA,{defaultMessage:"{importSource, select, false {External} other {{importSource}}} import was successful",id:"importCompletedActivity.importSuccess.header",values:{importSource:e,importStatus:x}}),a=(0,k.jsx)(f().sA,{defaultMessage:"View projects and tasks in Notion",id:"importCompletedActivity.projects.redirect"}),n=(0,k.jsx)(f().sA,{defaultMessage:"View boards in Notion",id:"importCompletedActivity.boards.redirect"}),s=(0,k.jsx)(f().sA,{defaultMessage:"View import logs",id:"importCompletedActivity.loggerPage.redirect"}),c=null==M?void 0:M[0];let d,u="successful"===x?r:t;if("Jira"===e&&(y&&"successful"===x&&(u=(0,k.jsx)(f().sA,{defaultMessage:"Your Jira projects and tasks have been synced to {teamName}",id:"importCompletedActivity.jiraSuccess.header",values:{teamName:S}})),c)){const e=l().Bv.createChildStore(o,{id:c.projectCollectionPageId,spaceId:o.id,table:p().ev}),t=l().Bv.createChildStore(o,{id:c.taskCollectionPageId,spaceId:o.id,table:p().ev});d=(0,k.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,k.jsx)(te().A,{size:"md",onClick:()=>{var t;const i=null===(t=e.getModel())||void 0===t?void 0:t.getRenderUrl({pageVisitSource:g().y8.Import,getRecordModel:e.getRecordModel});i&&X().oo({environment:m,url:i})},children:(0,k.jsx)(f().sA,{defaultMessage:"View project",id:"importCompletedActivity.project.redirect"})}),(0,k.jsx)(te().A,{size:"md",onClick:()=>{var e;const i=null===(e=t.getModel())||void 0===e?void 0:e.getRenderUrl({pageVisitSource:g().y8.Import,getRecordModel:t.getRecordModel});i&&X().oo({environment:m,url:i})},children:(0,k.jsx)(f().sA,{defaultMessage:"View task",id:"importCompletedActivity.task.redirect"})})]})}return{header:u,body:"successful"===x?"Monday"===e&&"v2"===A?n:a:s,children:d}}),[M,x,b,A,y,S,o,m]);return h.length?(0,k.jsx)(I().my,{header:{icon:R,title:T},body:C,isFirst:n,isLast:s,rootStore:o,notification:u,url:w,...(0,j().$5)({notification:u,activity:t,environment:m,tab:d}),children:B}):null}const Te=o.memo(Ce);var Be=()=>i(101209),Ke=()=>i(722872),qe=()=>i(115512),Ne=()=>i(377586),Pe=()=>i(463830),We=()=>i(704152),Fe=()=>i(493823),Le=()=>i(406699),De=()=>i(928600),Ve=()=>i(480095),Ee=()=>i(563943),ze=()=>i(700348);function He(e){const{activity:t,tabArgs:i}=e,{tab:o,notification:a}=i,n=(0,c().v3)(),s=(0,r().K8)((()=>t.getEdits()),[t]),l=s.length>0,u={tab:o,notificationId:null==a?void 0:a.id,environment:n,alreadyRead:Boolean(null==a?void 0:a.read),activity:t},g=(0,d().IS)((e=>({notificationContainer:{paddingBlock:"8px 4px",display:"flex",flexDirection:"column",rowGap:8}})),[]);return l?(0,k.jsx)(tt,{analyticsInfo:u,children:(0,k.jsx)(Ue,{...e,edits:s,style:g.notificationContainer})}):null}const Oe=1;function Ue(e){const{rootStore:t,activity:i,isLast:a,tabArgs:s,edits:u,style:m,isFirst:v}=e,{tab:y,notification:S,source:b}=s,x=(0,c().v3)(),A=(0,f().tz)(),M=u.at(0),[w,R]=(0,o.useState)(null),C=(0,o.useMemo)((()=>w&&w.scrollHeight>w.clientHeight),[w]),T=(0,r().K8)((()=>{if(!M)return;const e=l().Bv.createChildStore(t,{table:p().ev,id:M.navigable_block_id});return(0,n().O9)(e)?e:void 0}),[M,t]),B=(0,r().K8)((()=>{const e=null==T?void 0:T.getModel();if(e)return e.getRenderUrl({getRecordModel:t.getRecordModel,pageVisitSource:g().y8.Notification})}),[t,T]),K=(0,d().IS)((e=>({container:{paddingBlock:4,display:"flex",flexDirection:"row",columnGap:1.5*Number((0,_().AG)(e).paddingLeft),alignItems:"center"}})),[]),q=(0,o.useMemo)((()=>new Set(u.map((e=>e.automation_id)))),[u]);return(0,n().O9)(T)&&(0,n().O9)(M)?(0,k.jsx)(I().my,{header:{icon:(0,k.jsx)(Ze,{}),title:(0,k.jsx)(Je,{rootStore:t,uniqueAutomations:q,firstEdit:M,spaceId:i.spaceId,environment:x,shortened:q.size>1,titleStyle:{fontWeight:h().Wy.regular},verbose:!0})},body:u.slice(-1*Oe).map(((i,o)=>(0,k.jsxs)("div",{children:[q.size>1?(0,k.jsx)($e,{rootStore:t,edit:i,intl:A}):void 0,(0,k.jsx)(Qe,{...e,edit:i,isViewAllMenu:!1,source:b,isLast:u.length>Oe?o===u.length-1-Oe:o===u.length-1,clampedMessageContainerRef:R})]},o))),isFirst:v,isLast:a,rootStore:t,navigableBlockId:T.id,notification:S,url:B,...(0,j().$5)({notification:S,activity:i,environment:x,tab:y}),children:(C||u.length>Oe)&&(0,k.jsx)("div",{style:m,children:(0,k.jsx)("div",{style:K.container,children:(0,k.jsx)(Ge,{edits:u,rootStore:t,activity:i,navigableBlockStore:T,source:b})})})}):null}function $e(e){const{rootStore:t,edit:i,intl:o}=e,a=(0,d().IS)((e=>({automationName:{fontSize:14,fontWeight:h().Wy.regular,color:e.text.primary,...h().RC}})),[]),n=(0,r().K8)((()=>t.getRecordStore(t,{table:Q().yB,id:i.automation_id,spaceId:t.id}).renderName(o)),[t,i,o]);return(0,k.jsx)("div",{style:a.automationName,children:n})}function Ge(e){const{edits:t,rootStore:i,activity:a,navigableBlockStore:n,source:s}=e,l=(0,c().Y0)(),u=(0,c().v3)(),{handleAnalyticsForPopupMenu:g}=(0,o.useContext)(et),p=(0,r().uB)(void 0,Pe().A),m=(0,o.useCallback)((()=>p.reset()),[p]),v=(0,o.useMemo)((()=>(0,k.jsx)(f().sA,{defaultMessage:"{numNotifications, plural, one {View more} other {View {numRemainingNotifications}}}",id:"inAppNotificationAutomationActionTriggeredActivity.renderViewAllNotificationsButton.buttonLabel",values:{numNotifications:t.length,numRemainingNotifications:t.length}})),[t.length]);let y;y=l.isMobile?{menuType:Ke().gu.Modal,title:v,right:(0,k.jsx)(Ve().DoneMenuText,{}),onClickRight:m,whiteBackground:!0}:{menuType:Ke().gu.Popup,width:420,maxWidth:l.isMobileBrowser?"80vw":"100%"};const S=(0,d().IS)((e=>({actionButton:(0,_().Ei)(e),divider:{borderBlockEnd:`1px solid ${e.regularDividerColor}`},viewAllMenuNotificationContainer:{display:"flex",flexDirection:"column",padding:12},viewAllMenuHeaderContainer:{display:"flex",flexDirection:"row",gap:ze().VB},popupMenu:{marginInlineStart:-2,fontSize:ze().gH}})),[]),b=(0,o.useId)();return(0,k.jsx)(Le().Ay,{buttonPopupStore:p,popupType:l.isMobile?Ne().n.SlideUp:Ne().n.Popup,placementToOrigin:ne().W.Bottom,alignmentToOrigin:ne().C.Center,originGap:4,onClick:()=>!p.state.open&&g(),renderOrigin:e=>(0,k.jsx)(Fe().p,{isGray:!0,size:"xs",...e,style:S.actionButton,children:v}),render:()=>(0,k.jsx)(De().A,{...y,children:(0,k.jsx)("div",{style:S.popupMenu,children:t.map(((o,r)=>(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{style:S.viewAllMenuNotificationContainer,children:[(0,k.jsxs)("div",{style:S.viewAllMenuHeaderContainer,children:[(0,k.jsx)(Ze,{}),(0,k.jsx)(Ee().A,{timestamp:o.timestamp,titleAriaId:b,onBacklinkClick:()=>null,disableJustify:!0,header:(0,k.jsx)(Je,{rootStore:i,uniqueAutomations:new Set([o.automation_id]),firstEdit:o,spaceId:a.spaceId,environment:u,closeViewAllMenu:m,shortened:!0,titleStyle:{fontWeight:h().Wy.regular},verbose:!0}),rootStore:i,navigableBlockId:n.id,showRecordPath:!1})]}),(0,k.jsx)(Qe,{...e,edit:o,isViewAllMenu:!0,source:s,isLast:r===t.length-1},r)]}),r!==t.length-1&&(0,k.jsx)("div",{style:S.divider})]},r)))})})})}const Ye=4;function Qe(e){const{edit:t,rootStore:i,source:o,isViewAllMenu:a,clampedMessageContainerRef:n}=e,s=(0,d().DP)(),l=(0,c().v3)(),u=(0,c().Y0)(),{isMobile:g}=u,p=(0,r().K8)((()=>l.KatexStore.getKatex()),[l]),m=(0,Ie().Ol)(),v=(0,r().K8)((()=>(0,k.jsx)("div",{children:(0,ke().S5)({environment:l,textValue:t.message.value?{value:t.message.value,spaceId:t.space_id}:void 0,parentStore:i,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disabled:!1,theme:s,emojiType:m,katex:p,parentBlockId:void 0,renderedPageBlockId:void 0,formulaValueTypes:[],stopLinkPropagation:!0})})),[l,m,p,s,t.message.value,i,t.space_id]),f=(0,d().IS)((e=>({container:{paddingInlineStart:a?32:(0,_().F9)({source:o,isMobile:g}),paddingBlockEnd:4},messageContainer:{position:"relative",display:"flex",justifyContent:"space-between",alignItems:"center"},clampedMessageContainer:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:a?void 0:Ye,verticalAlign:"top",textAlign:"left",lineHeight:h().K_.UIRegular.desktop,...h().RC},messageContent:{whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:ze().gH,lineHeight:(0,qe().ks)({device:u},"UIRegular"),paddingInlineEnd:8}})),[g,o,u,a]);return(0,k.jsx)("div",{style:{...a&&f.container,...f.messageContainer},children:(0,k.jsx)("div",{ref:n,style:f.clampedMessageContainer,children:(0,k.jsx)("div",{style:f.messageContent,children:v})})})}function Je(e){const{rootStore:t,spaceId:i,environment:o,closeViewAllMenu:a,shortened:s,titleStyle:c,firstEdit:d,uniqueAutomations:u,verbose:m=!1}=e,v=(0,f().tz)(),y=1===u.size,S=(0,r().K8)((()=>!l().dn.createChildStore(t,{table:Q().yB,id:d.automation_id,spaceId:t.getSpaceId()}).getAlive()),[t,d]),b=(0,r().K8)((()=>{const e=new(l().Bv)(o,{id:d.automation_navigable_block_id,table:p().ev}).getRole();return!e||!(0,Y().Tt)(e)}),[d,o]),x=(0,r().K8)((()=>{if(!(S&&y||b))return()=>{const e=d.automation_navigable_block_id,i=d.automation_id,r=l().Bv.createChildStore(t,{table:p().ev,id:e});if(!r)return;a&&a();const n=(0,ee().Ay)({store:r,preferPublicLink:!1,pageVisitSource:g().y8.Notification});X().oo({environment:o,url:n,callback:async()=>await(0,ie()._)({environment:o,automationNavigableBlockStore:r,automationId:y?i:void 0,rootStore:t,source:"in_app_notification"})})}}),[o,y,d,t,a,S,b]),A=(0,r().K8)((()=>[...u].map((e=>{const o=t.getRecordStore(t,{table:Q().yB,id:e,spaceId:i}),r=o.getRole();return(0,n().O9)(r)&&(0,Y().Tt)(r)?o.getAlive()?o.getNameWithDefault(v):v.formatMessage($().VS.automationDeletedName):v.formatMessage($().VS.automationPrivateName)}))),[v,t,i,u]);return s?m?(0,k.jsx)("div",{style:{...c,display:"inline-flex"},children:(0,k.jsx)(Xe,{handleAutomationNavigate:x,automationNames:A})}):(0,k.jsx)(f().sA,{defaultMessage:"Messages from automations",id:"inAppNotificationAutomationActionTriggeredActivity.multipleAutomation.header"}):m?(0,k.jsx)("div",{style:{...c,display:"contents"},children:(0,k.jsx)(f().sA,{id:"inAppNotificationAutomationActionTriggeredActivity.formattedHeaderMessage.automationTitle",defaultMessage:"{automationNameWrappedHeader} sent you a message",values:{automationNameWrappedHeader:(0,k.jsx)("div",{style:{fontWeight:h().Wy.medium,display:"inline-flex"},children:(0,k.jsx)(Xe,{handleAutomationNavigate:x,automationNames:A})})}})}):(0,k.jsx)(f().sA,{defaultMessage:"Messages from automation",id:"inAppNotificationAutomationActionTriggeredActivity.singleAutomation.header"})}function Xe(e){const{automationNames:t,handleAutomationNavigate:i}=e,o=(0,f().tz)(),r=t.at(0),a=t.length,s=a-2,l=o.formatList([...t.slice(0,2),s>0?o.formatMessage({defaultMessage:"{numRemainingAutomations} more",id:"inAppNotificationAutomationActionTriggeredActivity.wrappedAutomationName.tooltipNumRemainingAutomations"},{numRemainingAutomations:s}):void 0].filter(n().O9),{style:"long",type:"conjunction"}),c={defaultMessage:"{numAutomations, plural, one {{firstAutomationName}} other {{numAutomations} automations}}",values:{firstAutomationName:r,numAutomations:a},id:"inAppNotificationAutomationActionTriggeredActivity.wrappedAutomationName.automationName",description:"The display name for an automation."},d=e=>i?(0,k.jsx)(We().A,{...e,onClick:i,children:(0,k.jsx)(f().sA,{...c})}):(0,k.jsx)("div",{...e,children:(0,k.jsx)(f().sA,{...c,...e})});return 1===a?d():(0,k.jsx)(se().A,{renderTooltip:e=>(0,k.jsx)("div",{...e,children:l}),render:e=>d(e)})}function Ze(){const e=(0,d().IS)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,k.jsx)(ze().rL,{children:(0,Be().v)(e.icon)})}const et=(0,o.createContext)({handleAnalyticsForPopupMenu:()=>{}});function tt(e){const{analyticsInfo:t,children:i}=e,r=(0,o.useCallback)((()=>J().mF(t)),[t]);return(0,k.jsx)(et.Provider,{value:{handleAnalyticsForPopupMenu:r},children:i})}et.displayName="InAppNotificationAutomationActionTriggeredAnalyticsContext";const it=o.memo(He);var ot=()=>i(641007);function rt(e){const{activity:t,rootStore:o,tabArgs:a,isFirst:n,isLast:s}=e,{tab:l,notification:d}=a,u=(0,c().v3)(),m=(0,f().tz)(),v=(0,r().K8)((()=>t.navigable_block_id),[t]),y=(0,r().K8)((()=>{const e=i(148832).B.createChildStore(o,{table:p().ev,id:t.navigable_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:o.getRecordModel,pageVisitSource:g().y8.Notification})}),[t,o]),S=(0,k.jsx)("span",{children:(0,k.jsx)(f().sA,{defaultMessage:"<b>{author}</b> did not find conflicts",id:"activity.noConflictsFound.header",values:{author:ot().px.getDisplayName(m),b:e=>(0,k.jsx)("span",{style:{fontWeight:h().Wy.semibold},children:e})}})});return y?(0,k.jsx)(ze().Ay,{header:S,isFirst:n,isLast:s,isPrivate:!0,rootStore:o,navigableBlockId:v,notification:d,icon:(0,k.jsx)(A().H8,{authors:[ot().px],size:ze().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:y,...(0,j().$5)({notification:d,activity:t,environment:u,tab:l})}):null}const at=o.memo(rt);function nt(e){const{activity:t,rootStore:o,tabArgs:a,isFirst:n,isLast:s}=e,{tab:d,notification:u}=a,m=(0,c().v3)(),v=(0,f().tz)(),y=(0,r().K8)((()=>t.getEdits()),[t]),S=y[0],b=(0,r().K8)((()=>(0,de().Ln)({edits:y,rootStore:o})),[y,o]),x=(0,r().K8)((()=>(0,de().bD)(b,{fontWeight:h().Wy.regular})),[b]),A=l().sk.createChildStore(o,{table:p().ev,id:t.navigable_block_id,spaceId:o.id}),_=l().sk.createChildStore(o,{table:i(798880).oo,id:S.from_user_id,spaceId:o.id}),M=(0,r().K8)((()=>_.getDisplayName(v)),[_,v]),w=(0,r().K8)((()=>{var e;return null===(e=A.getModel())||void 0===e?void 0:e.getRenderUrl({pageVisitSource:g().y8.Notification,getRecordModel:A.getRecordModel})}),[A]);return y.length>0?(0,k.jsx)(I().my,{header:{icon:(0,k.jsx)(I().S7,{icon:ye().checkmarkFillIcon}),title:(0,k.jsx)(f().sA,{defaultMessage:"Private content transfer",id:"activity.privateContentTransferred.header"})},body:(0,k.jsx)(f().sA,{defaultMessage:"{authorPhrase} transferred {fromUserName}{fromUserNameEndsWithS, select, true {} other {s}} private pages to you",values:{authorPhrase:x,fromUserName:M,fromUserNameEndsWithS:"s"===M.slice(-1).toLowerCase()},id:"activity.privateContentTransferred.standardizedHeader.short"}),rootStore:o,notification:a.notification,isFirst:n,isLast:s,url:w,...(0,j().$5)({notification:u,activity:t,environment:m,tab:d})}):null}const st=o.memo(nt);i(803949);var lt=()=>i(343666),ct=()=>i(197959);function dt(e){const{activity:t,tabArgs:o,rootStore:a,isFirst:s,isLast:u}=e,{tab:p,notification:m}=o,v=(0,f().tz)(),y=(0,r().K8)((()=>t.getEdits()),[t]),S=(0,c().v3)(),b=(0,r().K8)((()=>{const e=t.discussion_id;if(!y||!t.discussion_id)return;const{reacted_comment_id:i}=y[0],o=i?lt().SN:ct().$Y,r=i??e;return a.getRecordStore(a,{table:o,id:r,spaceId:t.space_id})}),[y,t,a]),x=(0,r().K8)((()=>{if(b){if(b.table===lt().SN){const e=b.getParentStore();return null==e?void 0:e.getParentStore()}return b.table===ct().$Y?b.getParentStore():void 0}}),[b]),A=(0,r().K8)((()=>{const e=null==x?void 0:x.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,x]),_=(0,r().K8)((()=>{var e;if(x)return null===(e=x.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:a.getRecordModel,discussionId:t.discussion_id,pageVisitSource:g().y8.Notification})}),[x,a,t]),w=(0,r().K8)((()=>{if(!b)return[];const e=(b.getReactionPointers()??[]).map((e=>l().sk.createChildStore(a,e)));let t;var i;b instanceof l().jg&&(t=null===(i=b.getCreatedById)||void 0===i?void 0:i.call(b));if(b instanceof l().cc){const e=b.getParentStore();t=null==e?void 0:e.getCreatedById()}const o=(0,je().hS)(e.flatMap((e=>{var t;return(null===(t=e.getActorPointers())||void 0===t?void 0:t.filter(n().O9))??[]})).filter((e=>e.id!==t)),"id"),r=new Map;null==y||y.forEach((e=>{"reaction-created"===e.type&&e.authors&&e.authors.forEach((t=>{const i=r.get(t.id)??0;e.timestamp>i&&r.set(t.id,e.timestamp)}))}));return o.sort(((e,t)=>{const i=r.get(e.id)??0;return(r.get(t.id)??0)-i}))}),[b,a,y]),R=(0,r().K8)((()=>{if(null==y||!y.length)return;const e=y.filter((e=>"reaction-created"===e.type)),o=e.reduce(((e,t)=>e.timestamp>t.timestamp?e:t),e[0]);if(null==o||!o.reaction_id)return;const r=a.getRecordStore(a,{table:i(204384).ez,id:o.reaction_id,spaceId:t.space_id});return null==r?void 0:r.getIcon()}),[t,a,y]),C=(0,d().DP)(),T=(0,r().K8)((()=>{if(!(b instanceof l().jg))return;const e=i(299545).gp(b).getValue();if(!e)return;const o=(0,i(191772).Eh)({textValue:e,currentUserId:S.currentUser.id,getRecordModel:b.getRecordModel,highlightStyle:"text_only"});return(0,ke().S5)({environment:S,textValue:{value:o,spaceId:t.space_id},parentStore:b,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableHover:!0,disabled:!0,theme:C,emojiType:(0,Ie().FN)(S),katex:S.KatexStore.getKatex(),formulaValueTypes:[]})}),[b,S,C,t.space_id]),B=(0,r().K8)((()=>w.map((e=>{var t;return null===(t=l().sk.createChildStore(a,e).getModel())||void 0===t?void 0:t.getDisplayName(v)})).filter(n().O9).join(", ")),[w,a,v]),K=(0,r().K8)((()=>x?(0,k.jsx)(f().sA,{id:"activity.reactionActivity.pageTitleText",defaultMessage:"{author} <regular>reacted in</regular> {pageTitle}",values:{author:B,regular:e=>(0,k.jsx)("span",{style:{fontWeight:h().Wy.regular},children:e}),pageTitle:(0,k.jsx)(M().i,{blockStore:x,underline:!1,shouldWrap:!0})}}):null),[x,B]);return b&&x?(0,k.jsx)(I().my,{notificationTitleStore:x,header:{icon:R?(0,k.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24},children:(0,k.jsx)(i(56086).A,{char:R,size:20})}):null,title:K},body:(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{style:{marginBottom:3},children:T}),(0,k.jsx)("div",{children:(0,k.jsx)(i(774733).fj,{parentStore:b,discussionLocation:"updates_menu_archive"})})]}),isFirst:s,isLast:u,rootStore:a,navigableBlockId:A,notification:m,url:_,...(0,j().$5)({notification:m,environment:S,tab:p,activity:t})}):null}const ut=o.memo(dt);var gt=()=>i(700500),pt=()=>i(350297);function mt(e){const{activity:t,rootStore:a,tabArgs:n,isFirst:s,isLast:u}=e,{notification:m,tab:v}=n,y=(0,c().v3)(),S=(0,d().eP)(),b=(0,r().K8)((()=>t.getEdits()),[t]),x=b.length>0,A=l().Bv.createChildStore(a,{table:p().ev,id:b[0].navigable_block_id}),_=(0,r().K8)((()=>A.isDefined()),[A]),w=(0,r().K8)((()=>l().Bv.createChildStore(a,t.getReminderBlockPointer())),[t,a]),R=(0,r().K8)((()=>(null==w?void 0:w.getType())===gt().xd.tableRow),[w]),C=(0,r().K8)((()=>{const e=w.getModel();if(e)return e.getRenderUrl({getRecordModel:a.getRecordModel,pageVisitSource:g().y8.Notification})}),[w,a]),T=(0,o.useMemo)((()=>i(792071).b4_.fromGetRecordValueFn(a.getRecordValue)),[a]),B=(0,r().K8)((()=>{if(w){if(R){var e,o;const l=w.getParentPointer();if(!l)return;const c=T({table:"block",id:l.id,spaceId:l.spaceId}),d=t.getReminderProperty(),u=null===(e=w.getModel())||void 0===e?void 0:e.__IM_SORRY__getValue(),g=u?null===(o=u.properties)||void 0===o?void 0:o[d]:void 0;if(u&&u.type===gt().xd.tableRow&&c&&d&&g){var r,n,s;const e=(0,Me().O4)({theme:S}),t=Boolean(null==c||null===(r=c.getFormat())||void 0===r?void 0:r.table_block_row_header),o=Boolean(null==c||null===(n=c.getFormat())||void 0===n?void 0:n.table_block_column_header),l=null==c||null===(s=c.getFormat())||void 0===s?void 0:s.table_block_column_order,p=(null==l?void 0:l.indexOf(d))??0;return(0,k.jsx)(i(313028).A,{theme:e,style:{color:e.text.secondary,marginTop:4,overflow:"visible"},title:(0,k.jsx)(pt().j,{colIndex:p,blockValue:u,simpleTableValue:c,hasColumnHeader:o,hasRowHeader:t,columnOrder:l??[],environment:y,rootStore:a,theme:e,getRecordModel:T}),children:i(980914).qO({environment:y,cellValue:g,spaceId:u.space_id,parentStore:a,theme:e})})}}return(0,k.jsx)(le().A,{edit:b[0],rootStore:a})}}),[w,R,y,a,S,t,b,T]);return x&&_&&C?(0,k.jsx)(I().my,{notificationTitleStore:A,header:{icon:(0,k.jsx)(I().S7,{icon:i(68913).alarmIcon}),title:(0,k.jsx)(f().sA,{id:"activity.reminderActivity.header",defaultMessage:"Reminder <regular>in</regular> {pageTitle}",values:{regular:e=>(0,k.jsx)("span",{style:{fontWeight:h().Wy.regular},children:e}),pageTitle:(0,k.jsx)(M().i,{blockStore:A,underline:!1,shouldWrap:!0})}})},body:B,isFirst:s,isLast:u,rootStore:a,navigableBlockId:A.id,notification:m,url:C,disableLineClamp:R,...(0,j().$5)({notification:m,activity:t,environment:y,tab:v})}):null}const vt=o.memo(mt);var ft=()=>i(212326);function ht(e){const{activity:t,rootStore:o,tabArgs:a,isFirst:n,isLast:s}=e,{notification:d,tab:u}=a,p=(0,c().v3)(),m=(0,r().K8)((()=>t.getEdits()),[t]),y=m.length>0,S=(0,r().K8)((()=>(0,de().Ln)({edits:m,rootStore:o})),[m,o]),b=(0,r().K8)((()=>(0,de().bD)(S,{...(0,ft()._m)()})),[S]),x=m[0],_=(0,r().K8)((()=>l().h4.createChildStore(o,{table:v().yK,id:x.team_id})),[o,x.team_id]),M=(0,r().K8)((()=>{var e;return null===(e=_.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:_.getRecordModel})}),[_]),w=(0,r().K8)((()=>_.isDefined()),[_]),R=(0,r().K8)((()=>{if((0,i(578136).D)({isMobileNative:p.device.isMobileNative}))return(0,i(120739).a)({teamId:x.team_id,spaceId:_.getSpaceId(),pageVisitSource:g().y8.Notification})}),[x.team_id,p,_]);return y&&w&&_?(0,k.jsx)(I().my,{notificationTitleStore:_,header:{icon:(0,k.jsx)(A().H8,{authors:S,size:I().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:(0,k.jsx)(f().sA,{defaultMessage:"{author} <regular>invited you to</regular> {teamIconAndName}",id:"activity.teamMembershipEdited.subheader",values:{author:b,regular:e=>(0,k.jsx)("span",{style:{fontWeight:h().Wy.regular},children:e}),teamIconAndName:(0,k.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[(0,k.jsx)(W().B6,{disabled:!0,icon:M,iconRecordCategory:"teamspace",isEmptyPage:!1,size:16}),(0,k.jsx)(F().A,{store:_,style:{fontWeight:h().Wy.medium}})]})}})},isFirst:n,isLast:s,rootStore:o,notification:d,url:R,...(0,j().$5)({notification:d,activity:t,environment:p,tab:u})}):null}const yt=o.memo(ht);function St(e){const{activity:t,rootStore:i,isFirst:o,isLast:a,tabArgs:n}=e,{tab:s,notification:u}=n,m=(0,c().v3)(),v=(0,f().tz)(),y=(0,r().K8)((()=>t.getEdits()),[t]),S=y.length>0,b=y[0],x=(0,r().K8)((()=>l().Bv.createChildStore(i,{table:p().ev,id:b.navigable_block_id})),[b,i]),_=(0,r().K8)((()=>x&&x.isDefined()),[x]),w=(0,r().K8)((()=>l().Bv.createChildStore(i,{table:p().ev,id:t.mentioned_block_id,spaceId:i.id})),[t,i]),R=(0,r().K8)((()=>{const e=w.getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification})}),[w,i]),C=(0,d().eP)(),T=(0,r().K8)((()=>{const e=(0,Me().O4)({theme:C}),t=w.getTitleValue();return(0,ke().S5)({environment:m,textValue:{value:t,spaceId:i.id},parentStore:x,disableHover:!1,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!0,disableSuggestionAnnotations:!0,disabled:!0,emojiType:(0,Ie().FN)(m),theme:e,katex:m.KatexStore.getKatex(),formulaValueTypes:[]})}),[w,C,m,i,x]),B=(0,r().K8)((()=>(0,de().Ln)({edits:y,rootStore:i})),[y,i]),K=B.map((e=>e.asActor)),q=(0,r().K8)((()=>{const e=B[0];if(e)return e}),[B]),N=(0,r().K8)((()=>q?q.getDisplayName(v):null),[q,v]),P=(0,r().K8)((()=>x?(0,k.jsx)(f().sA,{id:"activity.teamMentionActivity.pageTitleText",defaultMessage:"{author} <regular>mentioned your teamspace in</regular> {pageTitle}",values:{author:N,regular:e=>(0,k.jsx)("span",{style:{fontWeight:h().Wy.regular},children:e}),pageTitle:(0,k.jsx)(M().i,{blockStore:x,underline:!1,shouldWrap:!0})}}):null),[x,N]);return S&&_&&R?(0,k.jsx)(I().my,{notificationTitleStore:x,header:{icon:(0,k.jsx)(A().H8,{authors:K,size:I().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:P},body:(0,k.jsx)(f().sA,{defaultMessage:'"{blockText}"',id:"activity.teamMentionActivity.bodyBlockText",values:{blockText:T}}),isFirst:o,isLast:a,rootStore:i,navigableBlockId:x.id,notification:u,url:R,...(0,j().$5)({notification:u,activity:t,environment:m,tab:s})}):null}const bt=o.memo(St);var xt=()=>i(814388),At=()=>i(426302),jt=()=>i(456328),_t=()=>i(720665);function Mt(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:n}=e,{notification:s,tab:d}=o,u=(0,c().v3)(),p=(0,f().tz)(),m=(0,r().K8)((()=>t.getEdits()),[t]),v=kt({spaceStore:i,edit:m[0]}),h=(0,r().K8)((()=>(0,de().Ln)({edits:m,rootStore:i})),[m,i]),y=(0,r().K8)((()=>{if("block"===(null==v?void 0:v.type))return v.blockStore}),[v]),S=(0,r().K8)((()=>{if(!y)return;const e=y.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification}):void 0}),[y,i.getRecordModel]),b=(0,r().K8)((()=>t.navigable_block_id),[t]),x=function(e){const{edit:t,activity:i,spaceStore:o}=e,a=kt({spaceStore:o,edit:t}),n=(0,r().K8)((()=>parseInt(i.getEndTime())),[i]),s=(0,r().K8)((()=>{if("block"!==(null==a?void 0:a.type))return;const e=a.blockStore;return null!=e&&e.isDefined()?e.getModel():void 0}),[a]);return(0,r().K8)((()=>{if(!s)return{isValid:!1};const e=s&&(0,jt()._T)(s,i);if(!e)return{isValid:!1};const t=o.getRecordModel({table:At().Yx,id:e,spaceId:i.space_id});return t&&t.getMessage()&&t.getCreatedTime()<=n+5*_t().Xb?{isValid:!0,message:t.getMessage()}:{isValid:!1}}),[i,n,s,o])}({edit:m[0],activity:t,spaceStore:i}),_=(0,r().K8)((()=>{if(v){if("block"===v.type)return v.blockStore;if("group"===v.type){const e=h[0];if(!e)return;return l().sk.createChildStore(i,e.pointer)}return"space"===v.type?v.spaceStore:void 0}}),[h,v,i]),M=(0,r().K8)((()=>{var e;return null===(e=h[0])||void 0===e?void 0:e.getDisplayName(p)}),[h,p]);return 0!==m.length&&v&&_?(0,k.jsx)(I().my,{notificationTitleStore:_,header:{icon:(0,k.jsx)(A().H8,{authors:h.map((e=>e.asActor)),size:I().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:(0,k.jsx)(It,{data:v,blockStore:y,authorName:M})},body:"block"===v.type&&x.isValid&&x.message?(0,k.jsx)(f().sA,{defaultMessage:'"{message}"',id:"activity.userInvitedActivity.messageBody",values:{message:x.message}}):void 0,disableLineClamp:!0,isFirst:a,isLast:n,rootStore:i,navigableBlockId:b,notification:s,url:S,...(0,j().$5)({notification:s,environment:u,tab:d,activity:t})}):null}function It(e){var t;const{data:i,blockStore:o,authorName:a}=e,s=(0,r().K8)((()=>{var e;if("space"===i.type)return null===(e=i.spaceStore.getModel())||void 0===e?void 0:e.getName()}),[i]);switch(i.type){case"block":return(0,k.jsx)(f().sA,{id:"activity.userInvitedActivity.pageTitleText",defaultMessage:"{author} <regular>invited you to</regular> {pageTitle}",values:{author:a,regular:e=>(0,k.jsx)("span",{style:{fontWeight:h().Wy.regular},children:e}),pageTitle:(0,k.jsx)(M().i,{blockStore:o,underline:!1,shouldWrap:!0})}});case"group":return(0,k.jsx)(f().sA,{defaultMessage:"{author} <regular>added you to</regular> @{groupName}",values:{author:a,regular:e=>(0,k.jsx)("span",{style:{fontWeight:h().Wy.regular},children:e}),groupName:null===(t=i.group)||void 0===t?void 0:t.name},id:"activity.userInvitedActivityGroupId.standardizedHeader.pageGrouping"});case"space":return(0,k.jsx)(f().sA,{defaultMessage:"{author} <regular>added you to</regular> {workspaceName}",values:{author:a,regular:e=>(0,k.jsx)("span",{style:{fontWeight:h().Wy.regular},children:e}),workspaceName:(0,k.jsx)("span",{style:{fontWeight:h().Wy.semibold},children:s})},id:"activity.userInvitedActivityOtherInvite.standardizedHeader.pageGrouping"});default:(0,n().HB)(i)}}function kt(e){const{spaceStore:t,edit:i}=e;return(0,r().K8)((()=>{if(i)return i.navigable_block_id?{type:"block",blockStore:l().Bv.createChildStore(t,{table:p().ev,id:i.navigable_block_id})}:i.permission_group_id?{type:"group",group:(0,xt().$I)({spaceId:i.space_id,permissionGroupId:i.permission_group_id,getRecordValue:t.getRecordValue})}:{type:"space",spaceStore:l().SL.createChildStore(t,{table:m().NX,id:i.space_id})}}),[i,t])}const wt=o.memo(Mt);var Rt=()=>i(743176),Ct=()=>i(797809);function Tt(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:a,isLast:n}=e,{tab:s,notification:u}=o,m=(0,c().v3)(),v=(0,f().tz)(),y=(0,d().eP)(),S=(0,r().K8)((()=>t.getEdits()),[t]),b=S.length>0,x=S[0],_=l().sk.createChildStore(i,{table:p().ev,id:x.navigable_block_id}),w=(0,r().K8)((()=>_.isDefined()),[_]),R=(0,r().K8)((()=>l().Bv.createChildStore(i,{table:p().ev,id:t.mentioned_block_id})),[t,i]),C=(0,r().K8)((()=>x.mentioned_property),[x]),T=(0,r().K8)((()=>{if(!R)return;const e=R.getModel();return null==e?void 0:e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:g().y8.Notification})}),[R,i]),B=(0,r().K8)((()=>(0,de().Ln)({edits:S,rootStore:i})),[S,i]),K=B.map((e=>e.asActor)),q=(0,r().K8)((()=>{const e=B[0];if(e)return l().sk.createChildStore(i,e.pointer)}),[B,i]),N=(0,r().K8)((()=>{var e;return null==q||null===(e=q.getModel())||void 0===e?void 0:e.getDisplayName(v)}),[q,v]),P=(0,r().K8)((()=>(null==R?void 0:R.getType())===gt().xd.tableRow),[R]),W=(0,r().K8)((()=>{if(!R)return;if(P){var e;const t=null===(e=R.getModel())||void 0===e?void 0:e.__IM_SORRY__getValue();if(t&&t.type===gt().xd.tableRow)return(0,k.jsx)(pt().V,{blockValue:t,rootStore:i})}const t=R.getTitleValue(),o=(0,Me().O4)({theme:y}),r=_.pointer.spaceId;if(!r)return;const a="title"===C;return _.id===R.id&&!a?(0,k.jsx)(Bt,{property:C,blockStore:R}):(0,ke().S5)({environment:m,textValue:{value:t,spaceId:r},parentStore:i,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!0,disableHover:!0,disabled:!0,theme:o,emojiType:(0,Ie().FN)(m),katex:m.KatexStore.getKatex(),formulaValueTypes:[]})}),[R,y,_.pointer.spaceId,C,m,i,_.id,P]);return b&&w&&T?(0,k.jsx)(I().my,{notificationTitleStore:_,header:{icon:(0,k.jsx)(A().H8,{authors:K,size:I().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),title:(0,k.jsx)(f().sA,{id:"activity.userMentionedActivity.subheaderPageTitle",defaultMessage:"{author} <regular>mentioned you in</regular> {pageTitle}",values:{author:N,regular:e=>(0,k.jsx)("span",{style:{fontWeight:h().Wy.regular},children:e}),pageTitle:(0,k.jsx)(M().i,{blockStore:_,underline:!1,shouldWrap:!0})}})},body:W,isFirst:a,isLast:n,rootStore:i,navigableBlockId:_.id,notification:u,url:T,disableLineClamp:P,...(0,j().$5)({notification:u,activity:t,environment:m,tab:s})}):null}function Bt(e){const{property:t,blockStore:i}=e,o=(0,c().v3)(),a=i.pointer.spaceId,n=(0,d().DP)(),s=(0,f().tz)(),l=(0,r().K8)((()=>{var e;const t=i.getAssociatedCollectionStore();return(null==t||null===(e=t.getModel())||void 0===e?void 0:e.getNormalizedSchema())||(0,Ct().RX)(s)}),[i,s]),u=(0,r().K8)((()=>{if(l&&t&&t in l)return l[t]}),[l,t]),g=(0,r().K8)((()=>i.getPropertyValue(t)),[i,t]),p=(0,d().IS)((e=>({container:{display:"inline-flex",alignItems:"baseline",gap:6,paddingRight:4},propertyIcon:{alignSelf:"center",fill:e.text.secondary},propertyValue:{wordBreak:"break-all"}})),[]),m=(0,r().K8)((()=>{if(!g||!a)return;const e=g.map((e=>","===e[0]?[", "]:e));return(0,ke().S5)({environment:o,textValue:{value:e,spaceId:a},parentStore:i,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!0,disableHover:!0,disabled:!0,theme:n,emojiType:(0,Ie().FN)(o),katex:o.KatexStore.getKatex(),formulaValueTypes:[]})}),[g,o,a,i,n]);return u?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{style:p.container,children:[(0,k.jsx)(Rt().zB,{type:u.type,icon:u.icon,size:14,theme:n,style:p.propertyIcon}),u.name,": "]}),(0,k.jsx)("span",{style:p.propertyValue,children:m})]}):null}const Kt=o.memo(Tt);i(672577);var qt=()=>i(931075),Nt=()=>i(907514);function Pt(e){const{activity:t,rootStore:o,tabArgs:a,isFirst:n,isLast:s}=e,{tab:d,notification:u}=a,m=(0,c().v3)(),v=(0,r().K8)((()=>l().Bv.createChildStore(o,{table:p().ev,id:t.navigable_block_id})),[t,o]),y=(0,r().K8)((()=>v.isDefined()),[v]),S=(0,r().K8)((()=>{const e=v.getModel();if(e)return e.getRenderUrl({getRecordModel:o.getRecordModel,pageVisitSource:g().y8.Notification})}),[v,o]),b=(0,r().K8)((()=>t.collection_id?l().md.createChildStore(o,{table:i(519831).Vl,id:t.collection_id,spaceId:t.space_id}):void 0),[t,o]),x=(0,r().K8)((()=>Boolean(null==b?void 0:b.isPageTreeCollection())),[b]),A=(0,r().K8)((()=>{let e;if(x){const t=null==b?void 0:b.getSchema();e=(t?Object.keys(t):[]).find((e=>{var i;return!!t&&"verification"===(null===(i=t[e])||void 0===i?void 0:i.type)}))}else e=qt()._e.Verification;let t=(0,k.jsx)(f().sA,{id:"Activity.author.unknown",defaultMessage:"Unknown"});if(e){const i=v.getPropertyValue(e),r=(0,qt().U1)(i);if(r){const e=r[0],i=(0,de().T9)(e,o);i&&i.asActor&&(t=(0,de().bD)([i],{...(0,ft()._m)(),fontWeight:h().Wy.regular}))}}return t}),[v,b,x,o]),{activityStartTimestamp:_,activityEndTimestamp:M}=(0,r().K8)((()=>({activityStartTimestamp:parseInt(t.start_time),activityEndTimestamp:parseInt(t.end_time)})),[t]);if(!y)return null;const w=_&&M?(0,k.jsx)(f().sA,{defaultMessage:"Last verified by {person} from {startDate} to {endDate}",values:{person:A,startDate:(0,Nt().DG)(_),endDate:(0,Nt().DG)(M)},id:"activity.verificationExpired.contentWithTimestamp"}):(0,k.jsx)(f().sA,{defaultMessage:"Last verified by {person}",values:{person:A},id:"activity.verificationExpired.contentWithoutTimestamp"}),R=x?(0,k.jsx)(f().sA,{defaultMessage:"Wiki verification expired",id:"activity.verificationExpiredWiki.body"}):(0,k.jsx)(f().sA,{defaultMessage:"Page verification expired",id:"activity.verificationExpiredPage.body"});return(0,k.jsx)(I().my,{notificationTitleStore:v,header:{icon:(0,k.jsx)(I().S7,{icon:i(112665).J}),title:R},body:w,isFirst:n,isLast:s,rootStore:o,navigableBlockId:v.id,notification:u,url:S,...(0,j().$5)({notification:u,activity:t,environment:m,tab:d})})}const Wt=o.memo(Pt),Ft={"grouped-block-property-updated":_e,"grouped-commented":_e,"grouped-user-mentioned":_e},Lt={...{"block-property-edited":fe,"user-mentioned":Kt,commented:he().EG,"user-invited":wt,reminder:vt,"email-edited":be,"access-requested":z,"access-request-resolved":U,"team-membership-edited":yt,"private-content-transferred":st,"permission-group-mentioned":Re,"team-mentioned":bt,"verification-expired":Wt,"export-completed":Ae,"import-completed":Te,"in-app-notification-automation-action-triggered":it,"no-conflicts-found":at,"automation-typecheck-error-raised":re,reacted:ut,"upgrade-request-created":i(981402).J,"app-builder-notification":i(617137).P,"external-integration-notification":i(729555).q,"trial-created":i(685277).e},...Ft}},979620:(e,t,i)=>{i.d(t,{A:()=>d});i(296540);var o=()=>i(56366),r=()=>i(869190),a=()=>i(402390),n=()=>i(959013),s=()=>i(682197),l=()=>i(864943),c=i(474848);const d=function(e){const{accessRequestStore:t,teamStore:d}=e,u=(0,i(484714).v3)(),g=(0,n().tz)(),{isRequestResolved:p,resolvedStatus:m,resolvedTime:v}=(0,o().K8)((()=>({isRequestResolved:t.isResolvedTeamMembershipRequest(),resolvedStatus:t.getStatus(),resolvedTime:t.getResolvedTime()})),[t]),f=(0,o().K8)((()=>{const e=t.getResolvedById();if(!e)return;const o=i(630116).LU.createChildStore(t,{table:i(798880).oo,id:e});return o?o.getDisplayName(g):void 0}),[t,g]),h=async e=>{await i(350648).Jk({environment:u,teamStore:d,accessRequestStore:t,status:e})},y=(0,i(401497).IS)((e=>({container:{display:"flex",alignItems:"center"},redesignedContainer:{display:"flex",alignItems:"center",fontSize:14,color:e.text.secondary},approveButton:{marginRight:10,fontWeight:i(284371).Wy.medium,color:e.text.primary}})),[]);return(0,c.jsx)("div",{style:y.container,children:p?(0,c.jsx)("div",{style:y.redesignedContainer,children:"approved"===m?(0,c.jsx)(n().sA,{defaultMessage:"Approved by {grantedBy} on {resolvedTime}",id:"approveTeamMembershipActivityButton.requestApprovedWithTime.title",values:{grantedBy:f,resolvedTime:(0,r().W_)(Math.min(v??0,Date.now()),"medium_with_time",(0,a().H)(g))}}):(0,c.jsx)(n().sA,{defaultMessage:"Denied by {grantedBy} on {resolvedTime}",id:"approveTeamMembershipActivityButton.requestDeniedWithTime.title",values:{grantedBy:f,resolvedTime:(0,r().W_)(Math.min(v??0,Date.now()),"medium_with_time",(0,a().H)(g))}})}):(0,c.jsxs)("div",{children:[(0,c.jsx)(s().g,{children:(0,c.jsx)(l().A,{size:"lg",style:y.approveButton,onClick:()=>h("approved"),children:(0,c.jsx)(n().sA,{defaultMessage:"Approve",id:"approveTeamMembershipActivityButton.approveButton.label"})})}),(0,c.jsx)(s().g,{children:(0,c.jsx)(l().A,{size:"lg",style:y.approveButton,onClick:()=>h("rejected"),children:(0,c.jsx)(n().sA,{defaultMessage:"Deny",id:"approveTeamMembershipActivityButton.denyButton.label"})})})]})})}},981402:(e,t,i)=>{i.d(t,{J:()=>W});i(18107),i(967357),i(581454),i(296540);var o=()=>i(484714),r=()=>i(56366),a=()=>i(401497),n=()=>i(529099),s=()=>i(132855),l=()=>i(413267),c=()=>i(232802),d=()=>i(107273),u=()=>i(909306),g=()=>i(762433),p=()=>i(979340),m=()=>i(959013),v=()=>i(284371),f=()=>i(209660),h=()=>i(58293),y=()=>i(217429),S=()=>i(630116),b=()=>i(128265),x=()=>i(807778),A=()=>i(714300),j=()=>i(911964),_=()=>i(938621),M=()=>i(84817),I=()=>i(493823),k=()=>i(8980),w=()=>i(554509),R=()=>i(864943),C=()=>i(77179),T=()=>i(12296),B=()=>i(770176),K=()=>i(769617),q=()=>i(700348),N=()=>i(682197),P=i(474848);function W(e){const{activity:t,isFirst:i,isLast:W,rootStore:F,tabArgs:L}=e,{tab:D,notification:V}=L,E=(0,a().IS)((e=>({container:{paddingTop:8},approvalIcon:{width:12,height:12},approvalMessageContainer:{fontSize:12,color:e.text.secondary}})),[]),z=(0,o().v3)(),H=(0,h().r)(),O=(0,m().tz)(),U=(0,A().l)({spaceId:null==H?void 0:H.id}),$=(0,r().K8)((()=>(0,d().W9)(t.getEdits())),[t]),G=(0,r().K8)((()=>(0,B().Ln)({edits:$,rootStore:F})),[$,F]),{frontActorStore:Y,backActorStore:Q}=(0,r().K8)((()=>{const e=G.map((e=>S().sk.createChildStore(F,e)));return{frontActorStore:e.at(0),backActorStore:e.at(1)}}),[G,F]),J=$.length>0,X=(0,r().K8)((()=>(0,x().Le)()),[]),Z=(0,r().K8)((()=>{var e;const i=null===(e=$[0])||void 0===e?void 0:e.request_id;return F.getRecordModel({table:c().GU,id:i,spaceId:t.space_id})}),[$,F,t.space_id]),ee=(0,r().K8)((()=>(0,u().Mb)({billingData:U,experimentService:y().default,spaceId:t.space_id})),[U,t.space_id]),te=(0,r().K8)((()=>{var e;if(!Z)return null;const t=Z.getRequest();return X&&"ai"===t?"business"===(null===(e=ee.upsell)||void 0===e?void 0:e.product)?"business":"advanced"!==ee.currentState.featureSet||"business"!==ee.currentState.reason&&"enterprise"!==ee.currentState.reason?t:"business":t}),[Z,X,ee]),ie=(0,r().K8)((()=>g().N8(null==U?void 0:U.subscription)),[U]),oe=(0,b().n)(),re=(0,r().K8)((()=>Z?Z.getReasonForRequest():null),[Z]),ae=(0,r().K8)((()=>{if(!Z)return null;const e=Z.getRequestStatus();return X&&"ai"===Z.getRequest()&&void 0===ee.upsell?"approved":e}),[Z,X,ee]);if(!te)return null;const ne=(0,_().Y)(te,ie,oe);if(!Z||!J||!ne)return null;return(0,P.jsxs)(q().Ay,{header:(0,P.jsx)("span",{children:(0,P.jsx)(m().sA,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested an upgrade to the workspace} other {{authorOrAuthors} requested an upgrade to the workspace}}",id:"activity.upgradeRequested.standardizedHeader.single",values:{numberOfAuthors:G.length,authorOrAuthors:(0,P.jsx)(K()._B,{authorsLength:G.length,frontActorStore:Y,backActorStore:Q,authorTextStyle:{fontWeight:v().Wy.medium}})}})}),isFirst:i,isLast:W,isPrivate:!1,rootStore:F,notification:V,icon:Y&&Q?(0,P.jsx)(K().v9,{frontActorStore:Y,backActorStore:Q,spaceStore:F}):(0,P.jsx)(C().H8,{authors:G,size:q().eQ,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),url:void 0,showSnapshotButton:!1,...(0,T().$5)({notification:V,activity:t,environment:z,tab:D}),children:[(0,P.jsxs)(M().Y1,{direction:"vertical",align:"center-left",gap:8,children:[(0,P.jsxs)(M().Y1,{direction:"horizontal",align:"center-left",gap:4,children:["ai"===te&&(0,P.jsx)(k().I,{icon:n().aiFaceIcon}),"ai"!==te&&(0,P.jsx)(k().I,{icon:s().arrowInCircleUpFillIcon,color:"uiBluePrimary"}),(0,P.jsx)(w().D,{styleName:"UIRegular-14px/Semibold",children:(0,P.jsx)(m().sA,{defaultMessage:"Notion {productName}",id:"activityNotification.upgradeRequestCreated.productName",values:{productName:p().v0[te].defaultMessage}})})]}),(0,P.jsx)(w().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",style:{marginBottom:4},children:re})]}),"pending"===ae&&(0,P.jsx)("div",{style:E.container,children:(0,P.jsxs)(M().Y1,{direction:"horizontal",align:"center-left",gap:4,children:[(0,P.jsx)(N().g,{children:(0,P.jsx)(R().A,{onClick:async()=>{await(0,j().showUpgradeModal)({environment:z,spaceStore:H,billingData:U,product:te,from:"upgrade_request_created_notification"})},size:"lg",children:O.formatMessage(ne)})}),(0,P.jsx)(N().g,{children:(0,P.jsx)(I().p,{size:"lg",onClick:()=>{f().Ow({currentTab:"requests",openedFrom:"upgrade_request_created_notification",subtab:"upgrades"})},children:(0,P.jsx)(m().sA,{defaultMessage:"View all",id:"activityNotification.upgradeRequestCreated.viewAllRequestsButton.label"})})})]})}),("approved"===ae||"superseded"===ae)&&(0,P.jsx)("div",{style:E.container,children:(0,P.jsxs)(M().Y1,{direction:"horizontal",align:"center-left",gap:4,style:E.approvalMessageContainer,children:[(0,l().b)(E.approvalIcon),(0,P.jsx)(m().sA,{id:"activityNotification.upgradeRequestCreated.requestApproved",defaultMessage:"This request has been approved."})]})})]})}}}]);