"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[26942],{26942:(e,t,o)=>{o.d(t,{Hc:()=>de,ph:()=>le,RD:()=>se,Ay:()=>ce});var i=o(296540),r=()=>o(484714),n=()=>o(56366),a=()=>o(401497),l=()=>o(700500),s=()=>o(534177),d=()=>o(872539),c=()=>o(396301),p=()=>o(744705),u=()=>o(630116),g=()=>o(644914),m=(o(16280),()=>o(179034)),S=()=>o(959013),y=()=>o(284371),b=()=>o(899963),f=()=>o(426116),v=()=>o(313892),h=()=>o(296798),I=()=>o(16006),x=()=>o(859428),w=()=>o(125565),A=()=>o(490044),j=()=>o(780054),k=()=>o(492414),C=()=>o(159588),M=()=>o(108944),T=()=>o(640653),D=()=>o(37433),V=()=>o(907514),B=()=>o(441199),O=()=>o(154060),_=()=>o(962730),P=()=>o(765957);const K=(0,o(340498).xh)("arrowDiagonalUpRight",{default:{loader:()=>o.e(66972).then(o.bind(o,955363))},small:{loader:()=>o.e(66972).then(o.bind(o,8741))},fill:{loader:()=>o.e(66972).then(o.bind(o,663247))},fillSmall:{loader:()=>o.e(66972).then(o.bind(o,748902))}},["arrow","up","right","direction","navigation"]);var L=()=>o(460292),N=()=>o(303742),E=()=>o(349990),R=o(474848);function F(e){const t=(0,E().l)(),o=(0,n().O$)(P().AppStoreCurrentSpaceStore),i=(0,n().K8)((()=>e.store.getSpaceId()!==(null==o?void 0:o.getSpaceId())),[e.store,o]),r=(0,n().K8)((()=>(0,N().o)(o)),[o]);return t&&i&&!r?(0,R.jsxs)("div",{style:{position:"relative"},children:[e.children,(0,R.jsx)(L().Q,{style:{position:"absolute",bottom:-4,right:-6},overrideSize:()=>12,iconGroup:K,variantName:"fillSmall"})]}):e.children}var W=()=>o(246826),U=()=>o(751156),z=()=>o(187820),H=()=>o(696746);function $(e){const{targetStore:t,canEditItem:o}=e,i=(0,S().tz)(),l=(0,r().v3)(),{isMobile:s}=l.device,d=(0,n().K8)((()=>t.getIcon()),[t]),c=(0,n().K8)((()=>!s&&o&&!t.isNonEditableState()&&!(0,H().Nh)(t.id)),[s,o,t]),p=(0,a().IS)((e=>({pageIcon:{fill:e.sidebarSecondaryColor}})),[]),u=e=>{const o=t.getIconStore();o&&U().createAndCommit({userAction:"OutlinerItem.handleRecordIconChange",environment:l,canUndo:!0,perform:t=>{W().KY({store:o,value:e,transaction:t})}})},g=(0,n().K8)((()=>{const e=t.getIconStore(),o=null==e?void 0:e.table;return{recordTable:o,source:"sidebar",block_type:t.getType(),collection_id:"collection"===o?null==e?void 0:e.id:void 0}}),[t]);return(0,R.jsx)(x().A,{renderTooltip:()=>(0,R.jsx)(S().sA,{defaultMessage:"Change icon",id:"sidebarItem.changeIconButton.tooltip"}),placement:_().W.Bottom,render:e=>c?(0,R.jsx)(z().B6,{bucket:"secure",disabled:!0,icon:d,store:t,title:void 0,isEmptyPage:t.isEmptyPage(),iconRecordCategory:(0,z().Te)(t),size:s?24:20,onChange:u,pageIconStyle:p.pageIcon,...e,largeIcon:!0,iconLoggingData:g,label:i.formatMessage({defaultMessage:"Change page icon",id:"sidebarItem.changeIconButton.buttonLabel"}),disableAnimation:!0}):(0,R.jsx)(z().B6,{disabled:!0,icon:d,title:void 0,isEmptyPage:t.isEmptyPage(),iconRecordCategory:(0,z().Te)(t),size:s?24:20,pageIconStyle:p.pageIcon,largeIcon:!0,label:i.formatMessage({defaultMessage:"Page icon",id:"sidebarItem.changeIconButton.disabledLabel"}),disableAnimation:!0,iconLoggingData:g})})}var X=()=>o(606273);function G(e){const{store:t,from:o,type:i,itemIndex:n,itemDepth:l,isOpen:s,onToggle:d}=e,p=(0,r().v3)(),u=(0,a().IS)((e=>({toggle:{color:e.icon.tertiary}})),[]);return(0,R.jsx)(X().f,{isSidebar:!0,fill:!0,icon:"chevron",open:s,color:u.toggle.color,onClick:()=>{const e=0===l,r=M().Uo(t);b().tD(p,{teamStore:r,type:e?"top_level":"nested",is_toggled:!s,outliner_type:i,outliner_position:n,outliner_depth:l,outliner_location:"main_sidebar"===o?"sidebar":"pane"}),d(),c().s4({store:t,toOpen:!s,environment:p,isTopLevelItem:e})},"aria-describedby":e["aria-describedby"],"aria-controls":e["aria-controls"]})}var Q=()=>o(907893);const J=function(e){const{store:t,from:l,variant:s,style:d,targetStore:c,itemDepth:p,type:u,nestedOutlinerAriaId:m,titleAriaId:y,isOpen:v,itemIndex:I,onFocus:w,onBlur:k,onMouseMove:D,onMouseLeave:V,onNavigate:K,spaceViewStore:L}=e,N=(0,r().v3)(),E=(0,n().K8)((()=>q({targetStore:c,type:u,from:l})),[l,c,u]),F=(0,i.useCallback)((()=>q({targetStore:c,type:u,from:l,openInSidePeek:!0})),[l,c,u]),{isCopyIndicator:W,shouldShowAsLoadingSpinner:U}=(0,g().v8)(t),z=(0,n().K8)((()=>{const{mainEditorCurrentBlockStore:e}=P().default.state;return e&&t.id===e.id}),[t]),H=(0,n().K8)((()=>(0,o(97059).W)(N,t.id)),[N,t]),$=(0,n().K8)((()=>{const e=t.getFormat();if("workflow_template_placeholder"===e.collection_view_sub_type&&e.placeholder_workflow_template_id&&t.isCollectionView())return{collectionTemplateId:e.placeholder_workflow_template_id,collectionViewBlockStore:t}}),[t]),X=(0,g().ab)(),G=(0,a().IS)((e=>({sidebarItem:{...!j().A.isMobile&&{paddingLeft:5},...z&&X.currentSelectedSidebarItem,...!j().A.isMobile&&(0,C().Jg)(),...d,..."secondary"===s&&{padding:8,height:"unset"}},children:{display:"flex",alignItems:"center"},loadingSpinner:{marginLeft:6},moveOrDuplicateProgress:{flex:1,marginLeft:j().A.isMobile?10:6,marginRight:j().A.isMobile?12:void 0},link:{width:"100%"},sidebarItemHovered:{background:e.sidebarItemSelectedBackground},tooltipContainer:{maxWidth:280,width:"max-content"},tooltipMessage:{color:e.text.secondary}})),[z,X.currentSelectedSidebarItem,d,s]),{shouldRedirectToExternalPages:Q,hasDismissedLeaveWorkspaceForSharedPageModal:J}=(0,n().K8)((()=>{var e;const{currentSpaceStore:o,currentUserSettingsStore:i}=P().default.state;return{shouldRedirectToExternalPages:(0,O().A)(N)&&t.getSpaceId()!==(null==o?void 0:o.id)&&!(0,T().IL)(o),hasDismissedLeaveWorkspaceForSharedPageModal:null==i||null===(e=i.getSettings())||void 0===e?void 0:e.hide_leave_workspace_external_pages_modal}}),[N,t]),Z=(0,o(38961).C)(),ee=(0,i.useCallback)((e=>{if(H)return;if(Q)return void(J?Z(t):o(602235).u.setState({isOpen:!0,blockStore:t}));K&&K(t);if(!(e.metaKey||e.ctrlKey)){("secondary_sidebar"===l?"peek"===B().default.state.mode&&B().default.isVisible():B().default.isVisible())&&o(770906).VI({environment:N,skipAnimation:!0})}const i=M().Uo(t);b().zg(N,{teamStore:i,type:0===p?"top_level":"nested",outliner_type:u,outliner_position:I,outliner_depth:p})}),[l,K,u,I,t,N,p,H,Q,J,Z]),te=(0,i.useCallback)((async e=>{if(L){const{currentSpaceStore:t}=P().default.state;if(!((null==t?void 0:t.id)===L.getSpaceId())){const t=await f().yV({environment:N,spaceViewStore:L});if(t.switchedUser)return e(t.newEnvironment)}}e()}),[N,L]),oe={role:"treeitem","aria-current":z?"page":void 0,"aria-expanded":!!v,"aria-owns":m,"aria-labelledby":y};if(W)return U?(0,R.jsxs)(A().A,{style:G.sidebarItem,childrenStyle:G.children,onFocus:w,onBlur:k,onMouseMove:D,onMouseLeave:V,children:[(0,R.jsx)(o(331542).A,{style:G.loadingSpinner}),(0,R.jsx)(o(575650).A,{targetRecordId:t.id,style:G.moveOrDuplicateProgress})]}):null;if($)return(0,R.jsx)(o(704152).A,{onClick:async()=>{const{collectionTemplateId:e,collectionViewBlockStore:i}=$,{getCollectionTemplateFromId:r}=await o(541801).tA.load(),n=r(e);if(!n)throw new Error("Collection template not found");K&&K(t);const{onNavigateToPlaceholderWorkflowTemplateBlock:a}=await o(373444).O.load();a({environment:N,collectionTemplate:n,collectionViewBlockStore:i})},children:(0,R.jsx)(Y,{...e,onFocus:w,onBlur:k,sidebarItemStyle:G.sidebarItem,sidebarItemChildrenStyle:G.children,titleAriaId:y,nestedOutlinerAriaId:m,isWorkflowTemplatePlaceholder:!0,...oe})});const ie=(0,R.jsxs)("div",{style:G.tooltipContainer,children:[(0,R.jsx)(S().sA,{id:"blockSidebarItem.offlineTooltip.title",defaultMessage:"Unavailable offline"}),(0,R.jsx)("div",{style:G.tooltipMessage,children:(0,R.jsx)(S().sA,{id:"blockSidebarItem.offlineTooltip.message",defaultMessage:"Return online to view or make the page available offline."})})]});return E?(0,R.jsx)(x().A,{disableTooltip:!H,placement:_().W.Right,textWrap:!0,renderTooltip:()=>ie,render:t=>(0,R.jsx)(h().A,{altHref:F,disabled:H,disabledFeedback:H,onFocus:w,onBlur:k,style:G.link,href:H||Q?void 0:E,onClick:ee,innerStyle:C().hG,hoveredStyle:G.sidebarItemHovered,preNavigationAction:te,...oe,...t,children:(0,R.jsx)(Y,{...e,sidebarItemStyle:G.sidebarItem,sidebarItemChildrenStyle:G.children,titleAriaId:y,nestedOutlinerAriaId:m,disableRightButtons:H})})}):(0,R.jsx)(Y,{...e,onFocus:w,onBlur:k,sidebarItemStyle:G.sidebarItem,sidebarItemChildrenStyle:G.children,titleAriaId:y,nestedOutlinerAriaId:m,...oe})};function Y(e){const{store:t,variant:o,from:i,parentStore:s,targetStore:d,itemDepth:p,type:g,onFocus:S,onBlur:b,onMouseMove:f,onMouseLeave:h,onToggle:x,titleAriaId:k,nestedOutlinerAriaId:M,isOpen:B,isHovered:_,isFocused:P}=e,K=(0,n().K8)((()=>function(e){const{store:t,parentStore:o,isTopLevelItem:i,type:r}=e;if(t.isDefined()&&(0,v().sZ)(t))return!1;const n=(0,D().zI)()>0;if(t.isCollectionView()&&!n)return 0===t.getOwnedCollectionStores().length;if("block"===(null==o?void 0:o.table)){if(u().Bv.createChildStore(o,{table:m().ev,id:o.id,spaceId:t.getSpaceId()}).isType("collection_view_page"))return!1}if(t.isDefined()&&t.getType()===l().xd.alias)return!0;if(i&&"team"!==r)return!1;if(!o)return!1;if(t.isDefined())return t.getParentId()!==o.id;return!1}({store:t,parentStore:s,isTopLevelItem:0===p,type:g})),[t,s,p,g]),L=(0,n().K8)((()=>{const e=t.getLastEditedTime();return(0,V().nl)(e,{useLowercase:!1,useCompactFormat:!0})}),[t]),N=_||P,E=(0,n().K8)((()=>{if((0,D().AD)()){const e=Boolean(null==d?void 0:d.isCollectionView()),o=c().Mr(t).length>0;return e||o}return!0}),[t,d]),W=N&&E,U=(0,a().IS)((t=>({iconContainer:{display:"grid"},toggle:{gridColumn:1,gridRow:1,zIndex:1,opacity:W?1:0,order:W?1:0,transition:`opacity ${C().bM}`},itemIcon:{gridColumn:1,gridRow:1,opacity:W?0:1,transition:`opacity ${C().bM}`,order:W?0:1,..."secondary"===o&&{marginTop:-6}},rightIcons:{...!j().A.isMobile&&{opacity:N?1:0,transition:`opacity ${C().bM}`}},childrenStyle:{...e.sidebarItemChildrenStyle,..."secondary"===o&&{display:"flex",flexDirection:"column",alignItems:"flex-start"}},title:{fontWeight:y().Wy.medium,..."secondary"===o&&{width:"100%"}},subtitle:{marginTop:2},subtitleContainer:{display:"flex",gap:4},subtitleSeparator:{color:t.text.secondary}})),[e.sidebarItemChildrenStyle,N,o,W]),z=(0,r().v3)(),H=(0,n().K8)((()=>{const e=t.getSpaceStore();return!(!e||!(0,O().A)(z))&&(0,T().GK)(z,e)}),[t,z]);return(0,R.jsxs)(A().A,{role:e.role,"aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:e.sidebarItemStyle,childrenStyle:U.childrenStyle,left:j().A.isMobile?(0,R.jsx)(G,{store:t,from:i,type:g,itemIndex:e.itemIndex,itemDepth:p,"aria-controls":M,"aria-describedby":k,onToggle:x,isOpen:B}):void 0,icon:j().A.isMobile?d&&(0,R.jsx)($,{targetStore:d,canEditItem:e.canEditItem}):(0,R.jsxs)("div",{style:U.iconContainer,children:[E&&(0,R.jsx)("div",{style:U.toggle,children:(0,R.jsx)(G,{store:t,from:i,type:g,itemIndex:e.itemIndex,itemDepth:p,"aria-controls":M,"aria-describedby":k,onToggle:x,isOpen:B})}),(0,R.jsx)("div",{style:U.itemIcon,children:(0,R.jsx)(F,{store:d,children:d&&(0,R.jsxs)(R.Fragment,{children:[e.isWorkflowTemplatePlaceholder&&(0,R.jsx)(Z,{}),(0,R.jsx)($,{targetStore:d,canEditItem:e.canEditItem})]})})})]}),right:e.disableRightButtons?void 0:(0,R.jsx)("div",{style:U.rightIcons,children:(0,R.jsx)(Q().Ay,{store:t,from:i,type:g,itemIndex:e.itemIndex,itemDepth:p,canEditItem:e.canEditItem,onToggle:x,isHovered:_,isFocused:P})}),onFocus:S,onBlur:b,onMouseMove:f,onMouseLeave:h,isAlias:K,children:[(0,R.jsx)(I().A,{id:k,store:t,style:U.title}),"secondary"===o&&(H?(0,R.jsxs)("div",{style:U.subtitleContainer,children:[(0,R.jsx)(w().A,{isSmall:!0,isSecondaryColor:!0,style:U.subtitle,children:H}),(0,R.jsx)("span",{style:U.subtitleSeparator,children:"•"}),(0,R.jsx)(w().A,{isSmall:!0,isSecondaryColor:!0,style:U.subtitle,children:L})]}):(0,R.jsx)(w().A,{isSmall:!0,isSecondaryColor:!0,style:U.subtitle,children:L}))]})}function Z(){const e=(0,a().IS)((e=>({circle:{position:"absolute",background:e.blueColor,borderRadius:"50%",border:`1px solid ${e.surface.wash}`,width:8,height:8,left:14,zIndex:1}})),[]);return(0,R.jsx)("div",{style:e.circle})}function q(e){const{targetStore:t,type:o,from:i,openInSidePeek:r=!1}=e;if(!t)return;const n=(0,c().NX)({type:o,from:i}),a=r?{openInSidePeek:!0,peekMode:"s",peekViewBlockId:t.id}:{};if(t.isNavigableBlock())return(0,k().Ay)({...a,store:t,fullyQualified:!1,pageVisitSource:n});{const e=M().Nq(t);if(e)return(0,k().Ay)({...a,store:e,scrollToBlockId:t.id,fullyQualified:!1,pageVisitSource:n})}}o(581454);var ee=()=>o(402014),te=(o(898992),o(737550),()=>o(31902)),oe=()=>o(578392);function ie(e){const{store:t,collectionViewStore:o,onNavigate:l,type:s,from:d,spaceViewStore:m}=e,S=(0,r().v3)(),y=(0,n().K8)((()=>t.getCollectionViewStores().some((e=>"page"===e.getType()))),[t]),b=(0,n().K8)((()=>{if(y)return!1;const{mainEditorCurrentBlockStore:e,currentCollectionViewStore:i}=P().default.state;return Boolean(e&&t.id===e.id&&i&&i.id===o.id)}),[o.id,t.id,y]),v=(0,g().ab)(),I=(0,a().IS)((t=>({initialIcon:{fontSize:12,fontWeight:500,marginLeft:5,color:t.text.secondary},sidebarItem:{...b&&v.currentSelectedSidebarItem,...(0,C().Jg)(),...e.style},hoveredItem:{background:t.sidebarItemSelectedBackground},linkBox:{width:"100%"}})),[b,v.currentSelectedSidebarItem,e.style]),x=(0,n().K8)((()=>(0,k().Ay)({store:t,fullyQualified:!1,collectionViewId:o.id,pageVisitSource:(0,c().NX)({type:s,from:d})})),[o.id,d,t,s]),w=(0,n().K8)((()=>({ready:o.isReady(),type:o.getType(),pagePointer:o.getFormat().page_pointer,name:o.getName()})),[o]),j=(0,n().K8)((()=>{if("page"!==w.type||!w.pagePointer)return null;const e=u().Bv.createChildStore(t,{table:w.pagePointer.table,id:w.pagePointer.id});return{ready:(0,p().X)(e),outlinerItems:(0,c().yD)({rootStore:e})}}),[w,t]),M=(0,n().K8)((()=>t.getContentStore()),[t]),T=(0,i.useCallback)((()=>{l&&l(t)}),[t,l]),D=(0,i.useCallback)((async e=>{if(m){const{currentSpaceStore:t}=P().default.state;if(!((null==t?void 0:t.id)===m.getSpaceId())){const t=await f().yV({environment:S,spaceViewStore:m});if(t.switchedUser)return e(t.newEnvironment)}}e()}),[S,m]);if(!w.ready)return null;if("page"===w.type&&j){const{ready:t,outlinerItems:o}=j;return(0,R.jsx)(oe().A,{type:e.type,childStores:o,areChildrenLoading:!t,itemDepth:e.itemDepth+1,parentStore:M,itemStyle:I.sidebarItem,itemToggleStyle:e.itemToggleStyle,onNavigate:e.onNavigate,disabled:e.disabled,from:d,spaceViewStore:e.spaceViewStore})}return y?null:(0,R.jsx)(h().A,{href:x,style:I.linkBox,hoveredStyle:I.hoveredItem,innerStyle:C().hG,preNavigationAction:D,onClick:T,role:"treeitem","aria-current":b?"step":void 0,children:(0,R.jsx)(A().A,{icon:(0,R.jsx)("div",{style:I.initialIcon,children:"•"}),style:I.sidebarItem,children:(0,R.jsx)(te().A,{collectionViewName:w.name,collectionViewType:w.type??"table"})})})}function re(e){const{store:t,from:o}=e,i=(0,n().K8)((()=>t.getCollectionViewStores()),[t]);return(0,R.jsx)("div",{role:"group",id:e.id,"aria-labelledby":e["aria-labelledby"],onContextMenu:e=>{e.preventDefault(),(0,ee().SQ)({event:e,context:ee().y$.EditorContextMenu,callback:()=>{}})},children:i.map((i=>(0,R.jsx)(ie,{store:t,from:o,collectionViewStore:i,style:e.itemStyle,onNavigate:e.onNavigate,type:e.type,itemDepth:e.itemDepth,disabled:e.disabled,childStores:e.childStores,spaceViewStore:e.spaceViewStore},i.id)))})}function ne(e){const{disabled:t,store:o,from:i,style:l,targetStore:s,itemDepth:d,nestedOutlinerAriaId:u,titleAriaId:g,onNavigate:m,type:S,toggleStyle:y,spaceViewStore:b}=e,{isMobile:f}=(0,r().Y0)(),v=(0,n().K8)((()=>!(0,p().X)(o)),[o]),h=(0,n().K8)((()=>s.isCollectionView()?s:null),[s]),I=(0,n().K8)((()=>(0,c().Mr)(o)),[o]),x=(0,n().K8)((()=>s.getContentStore()),[s]),w=(0,a().IS)((()=>{const e="number"==typeof(null==l?void 0:l.paddingLeft)?l.paddingLeft:f?le:5,t=f?se:de;return{item:{...l,paddingLeft:e+t}}}),[l,f]);return h?(0,R.jsx)(re,{store:h,from:i,itemStyle:w.item,onNavigate:m,type:S,childStores:I,areChildrenLoading:!1,itemDepth:d+1,parentStore:x,itemToggleStyle:e.toggleStyle,disabled:t,id:u,"aria-labelledby":g,spaceViewStore:b}):(0,R.jsx)(oe().A,{from:i,type:S,childStores:I,areChildrenLoading:v,itemDepth:d+1,parentStore:x,itemStyle:w.item,itemToggleStyle:y,onNavigate:m,disabled:t,id:u,"aria-labelledby":g,spaceViewStore:b})}function ae(e){return`Outliner-${e.id}`}const le=6,se=22,de=8,ce=function(e){const{store:t,itemIndex:c,parentStore:p,type:m,itemDepth:S,disabled:y,from:b,variant:f,spaceViewStore:v}=e,h=(0,r().v3)(),I=(0,o(792485).S)(),x=function(e){return 0===e}(S),[w,A]=(0,i.useState)((()=>{if((0,s().O9)(e.itemOpenByDefault))return e.itemOpenByDefault;if(x){const e=o(763884).K.get({userId:h.currentUser.id,key:ae(t)});if((0,s().O9)(e))return e}return!1})),[j,k]=(0,i.useState)(!1),[C,M]=(0,i.useState)(!1),T=(0,i.useId)(),D=(0,i.useId)(),V=(0,n().K8)((()=>function(e){if(e.getType()===l().xd.alias){const t=e.getAliasTargetStore();return t instanceof u().Bv?t:void 0}return e}(t)),[t]),B=(0,n().K8)((()=>g().UN(t)),[t]),O=0===c,_=(0,n().K8)((()=>!y&&(0,o(878377).p2L)({environment:h,blocks:[t],publicEditMode:I&&I.publicEditModeStore.state})),[y,I,h,t]),P=(0,n().K8)((()=>_&&!t.isLinkedCollectionView()),[t,_]),{isCopyIndicator:K,shouldShowAsLoadingSpinner:L}=(0,g().v8)(t),N=(0,i.useRef)(null);(0,o(790748).b)(o(182106).A,(()=>({store:t,parentStore:p,type:m,isTopLevelItem:x,getNode:()=>N.current})),[t,p,m,x]);const E=(0,i.useMemo)((()=>B&&p?{onInsertBelow:e=>d().o8({...e,environment:h,store:t,parentStore:p,before:!0,type:m}),onInsertAbove:e=>d().o8({...e,environment:h,store:t,parentStore:p,before:!1,type:m})}:{}),[B,h,p,t,m]),F=(0,i.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,o(819121).p)(t)&&M(!0)}),[]),W=(0,i.useCallback)((()=>{M(!1)}),[]),U=(0,i.useCallback)((()=>{o(353643).A.state.isDragging||k(!0)}),[]),z=(0,i.useCallback)((()=>{k(!1)}),[]),H=(0,i.useCallback)((e=>{A(void 0!==e?e:e=>!e)}),[]),$=(0,a().IS)((()=>({selectableStyle:{display:"flex",flexDirection:"column",gap:1,paddingBottom:w&&"secondary"===f?8:0}})),[w,f]),X=(0,i.useCallback)((e=>{const i=t.getRecordStoreUIParent();null!=i&&i.valueIs(o(65269)._)&&d().Nr({...e,type:m,targetStore:t,targetParentStore:i,isTopLevelItem:x})}),[t,m,x]),{value:G}=(0,o(645873).fJ)(o(855801).VI.duplicateActions),Q=(0,o(646736).HI)(),Y=(0,i.useCallback)((async e=>{const{droppedDirection:o,droppedStores:i,duplicate:r}=e;p&&await d().Hu({environment:h,currentSpaceUserStore:Q,type:m,targetParentStore:p,targetStore:t,isTopLevelItem:x,droppedDirection:o,droppedStores:i,duplicate:r,isDroppingOnFullSection:!1,duplicateActions:G})}),[p,h,m,t,x,G,Q]);return V?K&&!L?null:(0,R.jsxs)(o(199896).Ay,{analyticsName:"outliner_item",actionSectionGroupKey:"sidebar_outliner",contextMenuAndDragStores:[t],canDrag:B,canDropAbove:O,canDropBelow:B,canDropOnto:P,canInsertBelow:B,canInsertAbove:B,canSelect:B,canTriggerContextMenu:!0,onRemove:X,onSelectableDrop:Y,shouldShowDropZone:!0,showBlockMenuInput:!1,store:t,ref:N,style:$.selectableStyle,...E,children:[(0,R.jsx)(J,{variant:f,from:b,store:t,style:e.style,parentStore:p,type:m,itemIndex:e.itemIndex,itemDepth:e.itemDepth,onNavigate:e.onNavigate,targetStore:V,canEditItem:_,nestedOutlinerAriaId:T,titleAriaId:D,onFocus:F,onBlur:W,onMouseMove:U,onMouseLeave:z,onToggle:H,isHovered:j,isFocused:C,isOpen:w,spaceViewStore:v}),w&&(0,R.jsx)(ne,{disabled:y,store:t,from:b,style:e.style,targetStore:V,itemDepth:e.itemDepth,nestedOutlinerAriaId:T,titleAriaId:D,onNavigate:e.onNavigate,type:m,toggleStyle:e.toggleStyle,spaceViewStore:v})]}):null}},31902:(e,t,o)=>{o.d(t,{A:()=>n});o(296540);var i=()=>o(959013),r=o(474848);const n=function(e){let{collectionViewName:t,collectionViewType:n}=e;return t?(0,r.jsx)(o(288722).A,{children:t}):"page"===n?(0,r.jsx)(i().sA,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,r.jsx)(i().sA,{...o(403905).X[n]})}},38961:(e,t,o)=>{o.d(t,{C:()=>l});var i=()=>o(484714),r=()=>o(584262),n=()=>o(857783),a=()=>o(646736);function l(){const e=(0,i().v3)();return t=>{var o;const i=t.getSpaceStore(),l=null===(o=e.currentUser)||void 0===o?void 0:o.id,s=!(!i||!l)&&(0,a().dp)(i,l).isMember();n().uK({store:t,environment:e,openInNew:s?void 0:"tab",pageVisitSource:r().y8.ExternalPagesSidebar})}}},349990:(e,t,o)=>{o.d(t,{l:()=>a});var i=()=>o(484714),r=()=>o(56366),n=()=>o(154060);function a(){const e=(0,i().v3)();return(0,r().K8)((()=>(0,n().A)(e)),[e])}},578392:(e,t,o)=>{o.d(t,{A:()=>A});o(898992),o(354520),o(581454);var i=o(296540),r=()=>o(484714),n=()=>o(56366),a=()=>o(401497),l=()=>o(946065),s=()=>o(959013),d=()=>o(638013),c=()=>o(872539),p=()=>o(556048),u=()=>o(490044),g=()=>o(780054),m=()=>o(38337),S=()=>o(396301),y=()=>o(765957),b=()=>o(373444),f=o(474848);const v=i.memo((e=>{const{disabled:t,childStores:a,areChildrenLoading:s,itemDepth:c,type:u}=e,v=(0,r().v3)(),A=(0,n().O$)(y().AppStoreMainEditorCurrentBlockStore),j=(0,n().K8)((()=>(0,o(739135).gt)(y().default.state.currentUserSettingsStore,"jira-sync-onboarding")),[]),k=(0,i.useRef)(),C=(0,i.useRef)(),M=(0,n().O$)(o(666803).Ay),T=(0,n().K8)((()=>{const e=(0,o(337567).Vk)();if(M.showOnboardingTour){let e=null,n=null;for(const i of a){if(i.isCollectionView()){const r=i.getCollectionStore();if((null==A?void 0:A.id)===i.id){var t;const a=null===(t=i.getCollectionStore())||void 0===t?void 0:t.getFormat();if("notion://projects_collection"===(null==a?void 0:a.app_config_uri)||"notion://tasks_collection"===(null==a?void 0:a.app_config_uri)){const t=(0,o(504836).Be)(r);e=t.projectCollectionPointer,n=t.taskCollectionPointer;break}}}}for(const t of a){if(t.isCollectionView()){var i,r;const o=t.getCollectionStore();if(o&&(null==o?void 0:o.id)===(null===(i=e)||void 0===i?void 0:i.id)){k.current=t.id;continue}if(o&&o.id===(null===(r=n)||void 0===r?void 0:r.id)){C.current=t.id;continue}}}}return(0,o(534177).O9)(e)?a.filter((t=>!e.includes(t.id))):a}),[a,null==A?void 0:A.id,M.showOnboardingTour]).map(((t,o)=>{const r=i.createRef();return M.showOnboardingTour&&k.current===t.id&&"all-projects-tooltip"===j?(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{ref:r,style:{boxShadow:d().p.buttonBlueFocusRing.light,borderRadius:6},children:(0,i.createElement)(x,{...e,key:t.id,store:t,index:o})}),(0,f.jsx)(p().jX,{origin:r})]},t.id):M.showOnboardingTour&&C.current===t.id&&"all-issues-tooltip"===j?(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{ref:r,style:{boxShadow:d().p.buttonBlueFocusRing.light,borderRadius:6},children:(0,i.createElement)(x,{...e,key:t.id,store:t,index:o})}),(0,f.jsx)(p().h9,{origin:r})]},t.id):(0,i.createElement)(x,{...e,key:t.id,store:t,index:o})})),D=(0,n().O$)(y().AppStoreCurrentSpaceViewStore),V=(0,n().K8)((()=>void 0!==D&&(0,S().XA)({spaceViewStore:D})),[D]),B=(0,n().K8)((()=>!g().A.isMobile&&(0,o(37433).AD)()),[]),O=(0,n().K8)((()=>(0,o(611371).EF)(v)),[v]),_=0===c,P=0===(null==T?void 0:T.length),K=((null==T?void 0:T.length)<=o(962877).i||e.isHeaderless||g().A.isMobile)&&_&&("private"===u||"workspace"===u)&&!t,L=P&&!K&&!_&&!B,N={offline:m().lpW,bookmarks:m().X3W,workspace:m().rR7,shared:m().Bbz,private:m().$_L,team:m().zqk,[l().zt]:void 0,[l().AX]:void 0,[l().GU]:void 0,[l().st]:void 0,[l().yy]:void 0}[e.type],E=K&&O;return(0,i.useEffect)((()=>{E&&b().O.load()}),[E]),(0,f.jsxs)(o(378765).A,{id:e.id,"aria-labelledby":e["aria-labelledby"],role:_?"tree":"group",style:e.style,innerStyle:{display:"flex",flexDirection:"column",gap:1},className:N,loaded:!s,showSpinnerTimeout:3e3,spinnerSize:"relative",children:[(0,f.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:1},children:T}),P&&_&&!("private"===u&&V)&&(0,f.jsx)(w,{type:e.type,parentStore:e.parentStore}),K&&(0,f.jsx)(I,{type:e.type,from:"main_sidebar"}),L&&(0,f.jsx)(h,{itemStyle:e.itemStyle})]})}));function h(e){const{isTablet:t}=(0,r().Y0)(),i=(0,a().IS)((e=>({placeholder:{color:e.text.tertiary,fontWeight:t?o(284371).Wy.regular:void 0,paddingLeft:16,...g().A.isMobile&&{display:"flex",alignItems:"center",height:32,marginTop:t?"-8px":void 0}}})),[t]);return(0,f.jsx)(u().A,{role:"treeitem",style:e.itemStyle,children:(0,f.jsx)("div",{style:i.placeholder,children:(0,f.jsx)(s().sA,{defaultMessage:"No pages inside",id:"outliner.NoPagesInside.placeholder"})})})}function I(e){const{type:t,from:n}=e,l=(0,r().v3)(),d=(0,a().IS)((e=>({sidebarItem:{color:e.sidebarSecondaryColor},hovered:{background:e.sidebarItemSelectedBackground}})),[]),p=(0,o(644914).ab)(),m=(0,i.useCallback)((async()=>{if("team"===t||!y().default.state.currentSpaceStore||!y().default.state.currentSpaceViewStore)return;if((0,o(338907).u)(l)){const{openTemplateOnboardingModal:e,getTemplateOnboardingVersion:t}=await b().O.load();return void e({origin:"sidebar_private_section_empty_state",parentStore:y().default.state.currentSpaceStore,template:void 0,version:t({template:void 0})})}await c().SE({environment:l,spaceStore:y().default.state.currentSpaceStore,spaceViewStore:y().default.state.currentSpaceViewStore,type:t,outlinerItemFrom:n,prepend:!1,shouldPersistToggleState:!0})&&g().A.isMobile&&o(869562).close()}),[t,l,n]);return(0,f.jsx)(o(704152).A,{style:p.baseSidebarItem,hoveredStyle:d.hovered,onClick:m,children:(0,f.jsx)(u().A,{style:d.sidebarItem,left:(0,f.jsx)(o(8980).I,{icon:o(863330).plusSmallIcon,size:"sm",color:g().A.isMobile?"tertiary":"secondary"}),disableMobileBorder:!0,children:(0,f.jsx)(s().sA,{defaultMessage:"Add new",id:"sidebar.addAWorkspaceOrPrivatePage.tooltip"})})})}v.displayName="Outliner";const x=i.memo((function(e){const{store:t,index:i}=e;return(0,f.jsx)(o(26942).Ay,{type:e.type,from:e.from,variant:"primary",store:t,style:e.itemStyle,toggleStyle:e.itemToggleStyle,itemIndex:i,itemDepth:e.itemDepth,itemOpenByDefault:e.itemOpenByDefault,parentStore:t.getRecordStoreUIParent(),onNavigate:e.onNavigate,disabled:e.disabled,spaceViewStore:e.spaceViewStore},t.id)})),w=i.memo((function(e){const t=(0,r().v3)(),{type:i,parentStore:n}=e,a=`OutlinerItem${i??""}${(null==n?void 0:n.id)??""}`,{value:l}=(0,o(645873).fJ)(o(855801).VI.duplicateActions),s=(0,o(646736).HI)();return(0,f.jsx)(o(218557).Tl,{dropTargetKey:a,canDropBelow:!0,onSelectableDrop:async e=>{await c().RM({dropArgs:e,environment:t,type:i,isDroppingOnFullSection:!1,parentStore:n,duplicateActions:l,currentSpaceUserStore:s})},shouldShowDropZone:!0,canAcceptDrop:e=>{const{currentSpaceStore:o}=y().default.state;return!!o&&(0,S().ox)({environment:t,draggingStores:e.draggingStores,parentStore:n,currentSpaceStore:o})}})})),A=v},602235:(e,t,o)=>{o.d(t,{u:()=>r});class i extends(()=>o(757695))().Store{getInitialState(){return{isOpen:!1}}}(0,o(604341).exposeDebugValue)("LeaveWorkspaceForSharedPageModalStore",i);const r=new i},962877:(e,t,o)=>{o.d(t,{c:()=>k,i:()=>j});var i=o(296540),r=()=>o(484714),n=()=>o(56366),a=()=>o(401497),l=()=>o(863330),s=()=>o(959013),d=()=>o(872539),c=()=>o(704152),p=()=>o(8980),u=()=>o(859428),g=()=>o(490044),m=()=>o(780054),S=()=>o(124749),y=()=>o(646736),b=()=>o(962730),f=()=>o(765957),v=()=>o(486130),h=()=>o(611371),I=()=>o(373444),x=()=>o(644914),w=()=>o(26942),A=o(474848);const j=2;function k(e){let{teamStore:t,numTeamPages:o,currentSpaceStore:k}=e;const C=(0,r().v3)(),M=(0,S().$)(),T=(0,n().K8)((()=>t.canAddOrRemoveTopLevelPages()),[t]),D=(0,n().K8)((()=>(0,h().EF)(C)),[C]),V=(0,n().K8)((()=>{if(!M)return!1;const e=(0,y().dp)(k,M.id).getModel();return t.canViewTopLevelPages(M.id,v()._.getSpacePermissionGroupIds({userId:M.id,spaceId:k.id}),e)}),[t,M,k]),B=o<=j,O=B&&T&&D;(0,i.useEffect)((()=>{O&&I().O.load()}),[O]);const _=(0,i.useCallback)((async()=>{const{currentSpaceStore:e,currentSpaceViewStore:o}=f().default.state;if(e&&o)if(m().A.isMobile)d().A5({environment:C,from:"sidebar_team_section_empty_state",spaceStore:e,spaceViewStore:o,teamStore:t,andNavigate:!0,appendOrPrepend:"append"});else{const{openTemplateOnboardingModal:e,getTemplateOnboardingVersion:o}=await I().O.load();e({origin:"sidebar_team_section_empty_state",parentStore:t,template:void 0,version:o({template:void 0})})}}),[C,t]),P=(0,a().IS)((e=>({emptyPlaceholder:{color:e.text.tertiary,paddingLeft:29,...!m().A.isMobile&&{fontSize:14},...m().A.isMobile&&{display:"flex",alignItems:"center",height:32},display:"flex",alignItems:"center"},addPageButtonText:{color:e.sidebarSecondaryColor},addPageButton:{borderRadius:6,paddingLeft:m().A.isMobile?w().RD:w().Hc,height:x().Zr},addPageButtonHovered:{background:e.sidebarItemSelectedBackground},addPageIconContainer:{display:"flex",alignItems:"center",justifyContent:"center"},tooltip:{width:"204px"}})),[]);return!B||!T&&o>0?null:T?(0,A.jsx)(u().A,{textWrap:!0,renderTooltip:()=>(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{children:(0,A.jsx)(s().sA,{defaultMessage:"You’ve used up your free blocks.",id:"teamOutliner.disabledTooltipUpper"})}),(0,A.jsx)("div",{children:(0,A.jsx)(s().sA,{defaultMessage:"Upgrade to add a new page.",id:"teamOutliner.disabledTooltipLower"})})]}),placement:b().W.Bottom,render:e=>(0,A.jsx)(c().A,{onClick:_,style:P.addPageButton,hoveredStyle:P.addPageButtonHovered,disabled:!D,...e,children:(0,A.jsx)(g().A,{style:P.addPageButtonText,disableMobileBorder:!0,left:(0,A.jsx)("div",{style:P.addPageIconContainer,children:(0,A.jsx)(p().I,{icon:l().plusSmallIcon,size:"sm",color:m().A.isMobile?"tertiary":"secondary"})}),children:(0,A.jsx)(s().sA,{id:"teamOutlinerEmptyState.addNew",defaultMessage:"Add new"})})}),style:P.tooltip,disableTooltip:D}):(0,A.jsx)(g().A,{disableMobileBorder:!0,children:(0,A.jsx)("div",{style:P.emptyPlaceholder,children:(0,A.jsx)("span",{children:(()=>{if(M)return V?0===o?(0,A.jsx)(s().sA,{defaultMessage:"No pages inside",id:"teamOutliner.noOverflowEmptyMessage"}):void 0:(0,A.jsx)(s().sA,{defaultMessage:"No access",id:"teamOutliner.noOverflowEmptyMessage.noViewPermission"})})()})})})}}}]);