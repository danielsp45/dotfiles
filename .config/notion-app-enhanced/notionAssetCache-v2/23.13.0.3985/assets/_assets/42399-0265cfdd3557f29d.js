(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[42399],{12323:(e,t,i)=>{"use strict";i(146449),i(693514);var n=i(697015);e.exports=n("Array","flat")},58168:(e,t,i)=>{"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},n.apply(null,arguments)}i.d(t,{A:()=>n})},63666:(e,t,i)=>{"use strict";function n(e,t){const i=[];e:for(const n of e){for(const e of i)if(t?t(n,e):n===e)continue e;i.push(n)}return i}function s(e){return e.filter((e=>null!=e))}function o(e){return e[e.length-1]}function r(e,t){let i,n=1/0;for(const s of e){const e=t(s);e<n&&(i=s,n=e)}return i}function a(e,t){const i=[],n=[];for(const s of e)t(s)?i.push(s):n.push(s);return[i,n]}function l(e){const t=(...i)=>{try{return e(...i)}catch(n){throw n instanceof Error&&Error.captureStackTrace&&Error.captureStackTrace(n,t),n}};return t}i.d(t,{TF:()=>g,vA:()=>d,Z1:()=>u,oE:()=>s,sg:()=>h,Qq:()=>n,A4:()=>w,h6:()=>c,xp:()=>m,g5:()=>b,mQ:()=>y,BW:()=>x,hl:()=>A,HV:()=>o,wq:()=>r,ww:()=>f,iA:()=>M,Ic:()=>C,jB:()=>a,Sh:()=>I,pN:()=>S});function c(e,t){const i=t&&e&&"object"==typeof e&&t in e?e[t]:e;throw new Error(`Unknown switch case ${i}`)}const d=l(((e,t)=>{if(!e)throw new Error(t||"Assertion Error")})),u=l(((e,t)=>{if(null==e)throw new Error(t??"value must be defined");return e}));function h(e,t){let i;const n=(...n)=>(i||(i={},i.promise=new Promise(((e,t)=>{i.resolve=e,i.reject=t}))),clearTimeout(i.timeout),i.latestArgs=n,i.timeout=setTimeout((()=>{const t=i;i=void 0;try{t.resolve(e(...t.latestArgs))}catch(n){t.reject(n)}}),t),i.promise);return n.cancel=()=>{i&&clearTimeout(i.timeout)},n}const p=new WeakMap;function g(e,t){if("object"!=typeof e||null===e)return;let i=p.get(e);i||(i={tags:{},extras:{}},p.set(e,i)),t.tags&&(i.tags={...i.tags,...t.tags}),t.extras&&(i.extras={...i.extras,...t.extras})}function m(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t+""}function I(e=""){let t=0,i=0,n=0,s=0;function o(){const e=t^t<<11;return t=i,i=n,n=s,s^=(s>>>19^e^e>>>8)>>>0,s/4294967296*2}for(let r=0;r<e.length+64;r++)t^=0|e.charCodeAt(r),o();return o}function f(e,t,i,n=!1){const[s,o]=t,[r,a]=i,l=r+(e-s)/(o-s)*(a-r);return n?r<a?Math.max(Math.min(l,a),r):Math.max(Math.min(l,r),a):l}function y(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function b(e,t){if(y(e,t))return e[t]}function w(e){if(!e)return e;if(Array.isArray(e)){const t=[],i=e.length;for(let n=0;n<i;n++)t.push(w(e[n]));return t}if("object"==typeof e){const t=Object.keys(e),i=t.length,n={};for(let s=0;s<i;s++){const i=t[s];n[i]=w(e[i])}return n}return e}function C(e){return Object.values(e)}function M(e){return Object.entries(e)}function x(e){return null!==e}function A(e){return null!=e}const S="undefined"!=typeof window&&window.structuredClone?window.structuredClone:e=>e?JSON.parse(JSON.stringify(e)):e},64295:(e,t,i)=>{"use strict";i(967357);var n=i(697015);e.exports=n("String","at")},81436:(e,t,i)=>{"use strict";var n=i(64295);e.exports=n},133517:(e,t,i)=>{"use strict";var n=i(179504),s=i(779039),o=i(194901),r=i(136955),a=i(497751),l=i(933706),c=function(){},d=a("Reflect","construct"),u=/^\s*(?:class|function)\b/,h=n(u.exec),p=!u.test(c),g=function(e){if(!o(e))return!1;try{return d(c,[],e),!0}catch(t){return!1}},m=function(e){if(!o(e))return!1;switch(r(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!h(u,l(e))}catch(t){return!0}};m.sham=!0,e.exports=!d||s((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?m:g},146449:(e,t,i)=>{"use strict";var n=i(746518),s=i(670259),o=i(748981),r=i(326198),a=i(991291),l=i(501469);n({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),i=r(t),n=l(t,0);return n.length=s(n,t,t,i,0,void 0===e?1:a(e)),n}})},160788:(e,t,i)=>{"use strict";var n=i(820034),s=i(544576),o=i(978227)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"===s(e))}},257829:(e,t,i)=>{"use strict";var n=i(268183).charAt;e.exports=function(e,t,i){return t+(i?n(e,t).length:1)}},268183:(e,t,i)=>{"use strict";var n=i(179504),s=i(991291),o=i(500655),r=i(567750),a=n("".charAt),l=n("".charCodeAt),c=n("".slice),d=function(e){return function(t,i){var n,d,u=o(r(t)),h=s(i),p=u.length;return h<0||h>=p?e?"":void 0:(n=l(u,h))<55296||n>56319||h+1===p||(d=l(u,h+1))<56320||d>57343?e?a(u,h):n:e?c(u,h,h+2):d-56320+(n-55296<<10)+65536}};e.exports={codeAt:d(!1),charAt:d(!0)}},289228:(e,t,i)=>{"use strict";i(327495);var n=i(969565),s=i(436840),o=i(957323),r=i(779039),a=i(978227),l=i(266699),c=a("species"),d=RegExp.prototype;e.exports=function(e,t,i,u){var h=a(e),p=!r((function(){var t={};return t[h]=function(){return 7},7!==""[e](t)})),g=p&&!r((function(){var t=!1,i=/a/;return"split"===e&&((i={}).constructor={},i.constructor[c]=function(){return i},i.flags="",i[h]=/./[h]),i.exec=function(){return t=!0,null},i[h](""),!t}));if(!p||!g||i){var m=/./[h],I=t(h,""[e],(function(e,t,i,s,r){var a=t.exec;return a===o||a===d.exec?p&&!r?{done:!0,value:n(m,t,i,s)}:{done:!0,value:n(e,i,t,s)}:{done:!1}}));s(String.prototype,e,I[0]),s(d,h,I[1])}u&&l(d[h],"sham",!0)}},327495:(e,t,i)=>{"use strict";var n=i(746518),s=i(957323);n({target:"RegExp",proto:!0,forced:/./.exec!==s},{exec:s})},351084:(e,t,i)=>{"use strict";i.d(t,{HlI:()=>n().HlI,tzH:()=>fd,xlB:()=>n().xlB,Mss:()=>n().Mss,koU:()=>n().koU,wOc:()=>n().wOc,i5Z:()=>n().i5Z,Vbk:()=>n().Vbk,dVE:()=>n().dVE,O75:()=>n().O75,UFg:()=>n().UFg,xM4:()=>$g,dMu:()=>tr});i(934496),i(606258),i(446501),i(81436),i(781015);var n=()=>i(371990),s=()=>i(63666),o=()=>i(681986);const r=(e,t)=>t.some((t=>e instanceof t));let a,l;const c=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,p=new WeakMap;let g={get(e,t,i){if(e instanceof IDBTransaction){if("done"===t)return d.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return f(e[t])},set:(e,t,i)=>(e[t]=i,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function m(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(y(this),t),f(c.get(this))}:function(...t){return f(e.apply(y(this),t))}:function(t,...i){const n=e.call(y(this),t,...i);return u.set(n,t.sort?t.sort():[t]),f(n)}}function I(e){return"function"==typeof e?m(e):(e instanceof IDBTransaction&&function(e){if(d.has(e))return;const t=new Promise(((t,i)=>{const n=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{t(),n()},o=()=>{i(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)}));d.set(e,t)}(e),r(e,a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,g):e)}function f(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,i)=>{const n=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{t(f(e.result)),n()},o=()=>{i(e.error),n()};e.addEventListener("success",s),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&c.set(t,e)})).catch((()=>{})),p.set(t,e),t}(e);if(h.has(e))return h.get(e);const t=I(e);return t!==e&&(h.set(e,t),p.set(t,e)),t}const y=e=>p.get(e);const b=["get","getKey","getAll","getAllKeys","count"],w=["put","add","delete","clear"],C=new Map;function M(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(C.get(t))return C.get(t);const i=t.replace(/FromIndex$/,""),n=t!==i,s=w.includes(i);if(!(i in(n?IDBIndex:IDBObjectStore).prototype)||!s&&!b.includes(i))return;const o=async function(e,...t){const o=this.transaction(e,s?"readwrite":"readonly");let r=o.store;return n&&(r=r.index(t.shift())),(await Promise.all([r[i](...t),s&&o.done]))[0]};return C.set(t,o),o}g=(e=>({...e,get:(t,i,n)=>M(t,i)||e.get(t,i,n),has:(t,i)=>!!M(t,i)||e.has(t,i)}))(g);const x="TLDRAW_TAB_ID_v2",A=globalThis.window;const S="TLDRAW_USER_DATA_v2",v=(0,o().eU)("globalUserData",JSON.parse(A?.localStorage.getItem(S)||"null")??n().i5Z.create({}));(0,o().wv)("set global user data",(()=>{A&&A.localStorage.setItem(S,JSON.stringify(v.value))}));const L="TLDRAW_DEFAULT_DOCUMENT_NAME_v2",j=A?.localStorage.getItem(L)??(0,n().NF7)();A?.localStorage.setItem(L,j);const N=A?.[x]??A?.sessionStorage[x]??n().koU.createId();A&&(A[x]=N,A&&(["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(A.navigator.platform)||A.navigator.userAgent.includes("Mac")&&"ontouchend"in document)?A.sessionStorage[x]=N:delete A.sessionStorage[x]),A?.addEventListener("beforeunload",(()=>{A.sessionStorage[x]=N}));const D="TLDRAW_DB_NAME_INDEX_v2";function E(){const e=JSON.parse(A?.localStorage.getItem(D)||"[]")??[];return Array.isArray(e)?e:[]}"undefined"==typeof BroadcastChannel||BroadcastChannel;"undefined"!=typeof window&&(window.__tldraw__hardReset=async function({shouldReload:e=!0}={}){sessionStorage.clear(),await Promise.all(E().map((e=>function(e,{blocked:t}={}){const i=indexedDB.deleteDatabase(e);return t&&i.addEventListener("blocked",(e=>t(e.oldVersion,e))),f(i).then((()=>{}))}(e)))),localStorage.clear(),e&&window.location.reload()});var k=i(296540),Z=i.t(k,2);var T=i(474848),W=()=>i(58168),z=i(440961);function P(e,t,{checkForDefaultPrevented:i=!0}={}){return function(n){if(null==e||e(n),!1===i||!n.defaultPrevented)return null==t?void 0:t(n)}}function Y(...e){return t=>e.forEach((e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t)))}function O(...e){return(0,k.useCallback)(Y(...e),e)}function R(e,t=[]){let i=[];const n=()=>{const t=i.map((e=>(0,k.createContext)(e)));return function(i){const n=(null==i?void 0:i[e])||t;return(0,k.useMemo)((()=>({[`__scope${e}`]:{...i,[e]:n}})),[i,n])}};return n.scopeName=e,[function(t,n){const s=(0,k.createContext)(n),o=i.length;function r(t){const{scope:i,children:n,...r}=t,a=(null==i?void 0:i[e][o])||s,l=(0,k.useMemo)((()=>r),Object.values(r));return(0,k.createElement)(a.Provider,{value:l},n)}return i=[...i,n],r.displayName=t+"Provider",[r,function(i,r){const a=(null==r?void 0:r[e][o])||s,l=(0,k.useContext)(a);if(l)return l;if(void 0!==n)return n;throw new Error(`\`${i}\` must be used within \`${t}\``)}]},G(n,...t)]}function G(...e){const t=e[0];if(1===e.length)return t;const i=()=>{const i=e.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(e){const n=i.reduce(((t,{useScope:i,scopeName:n})=>({...t,...i(e)[`__scope${n}`]})),{});return(0,k.useMemo)((()=>({[`__scope${t.scopeName}`]:n})),[n])}};return i.scopeName=t.scopeName,i}const _=(0,k.forwardRef)(((e,t)=>{const{children:i,...n}=e,s=k.Children.toArray(i),o=s.find(H);if(o){const e=o.props.children,i=s.map((t=>t===o?k.Children.count(e)>1?k.Children.only(null):(0,k.isValidElement)(e)?e.props.children:null:t));return(0,k.createElement)(B,(0,W().A)({},n,{ref:t}),(0,k.isValidElement)(e)?(0,k.cloneElement)(e,void 0,i):null)}return(0,k.createElement)(B,(0,W().A)({},n,{ref:t}),i)}));_.displayName="Slot";const B=(0,k.forwardRef)(((e,t)=>{const{children:i,...n}=e;return(0,k.isValidElement)(i)?(0,k.cloneElement)(i,{...V(n,i.props),ref:Y(t,i.ref)}):k.Children.count(i)>1?k.Children.only(null):null}));B.displayName="SlotClone";const J=({children:e})=>(0,k.createElement)(k.Fragment,null,e);function H(e){return(0,k.isValidElement)(e)&&e.type===J}function V(e,t){const i={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?i[n]=(...e)=>{o(...e),s(...e)}:s&&(i[n]=s):"style"===n?i[n]={...s,...o}:"className"===n&&(i[n]=[s,o].filter(Boolean).join(" "))}return{...e,...i}}function U(e){const t=e+"CollectionProvider",[i,n]=R(t),[s,o]=i(t,{collectionRef:{current:null},itemMap:new Map}),r=e=>{const{scope:t,children:i}=e,n=k.useRef(null),o=k.useRef(new Map).current;return k.createElement(s,{scope:t,itemMap:o,collectionRef:n},i)},a=e+"CollectionSlot",l=k.forwardRef(((e,t)=>{const{scope:i,children:n}=e,s=O(t,o(a,i).collectionRef);return k.createElement(_,{ref:s},n)})),c=e+"CollectionItemSlot",d="data-radix-collection-item",u=k.forwardRef(((e,t)=>{const{scope:i,children:n,...s}=e,r=k.useRef(null),a=O(t,r),l=o(c,i);return k.useEffect((()=>(l.itemMap.set(r,{ref:r,...s}),()=>{l.itemMap.delete(r)}))),k.createElement(_,{[d]:"",ref:a},n)}));return[{Provider:r,Slot:l,ItemSlot:u},function(t){const i=o(e+"CollectionConsumer",t),n=k.useCallback((()=>{const e=i.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${d}]`)),n=Array.from(i.itemMap.values()).sort(((e,i)=>t.indexOf(e.ref.current)-t.indexOf(i.ref.current)));return n}),[i.collectionRef,i.itemMap]);return n},n]}const X=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((e,t)=>{const i=(0,k.forwardRef)(((e,i)=>{const{asChild:n,...s}=e,o=n?_:t;return(0,k.useEffect)((()=>{window[Symbol.for("radix-ui")]=!0}),[]),(0,k.createElement)(o,(0,W().A)({},s,{ref:i}))}));return i.displayName=`Primitive.${t}`,{...e,[t]:i}}),{});function F(e,t){e&&(0,z.flushSync)((()=>e.dispatchEvent(t)))}function K(e){const t=(0,k.useRef)(e);return(0,k.useEffect)((()=>{t.current=e})),(0,k.useMemo)((()=>(...e)=>{var i;return null===(i=t.current)||void 0===i?void 0:i.call(t,...e)}),[])}const Q="dismissableLayer.update",$="dismissableLayer.pointerDownOutside",q="dismissableLayer.focusOutside";let ee;const te=(0,k.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ie=(0,k.forwardRef)(((e,t)=>{var i;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:r,onInteractOutside:a,onDismiss:l,...c}=e,d=(0,k.useContext)(te),[u,h]=(0,k.useState)(null),p=null!==(i=null==u?void 0:u.ownerDocument)&&void 0!==i?i:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,g]=(0,k.useState)({}),m=O(t,(e=>h(e))),I=Array.from(d.layers),[f]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=I.indexOf(f),b=u?I.indexOf(u):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,C=b>=y,M=function(e,t=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const i=K(e),n=(0,k.useRef)(!1),s=(0,k.useRef)((()=>{}));return(0,k.useEffect)((()=>{const e=e=>{if(e.target&&!n.current){const o={originalEvent:e};function r(){oe($,i,o,{discrete:!0})}"touch"===e.pointerType?(t.removeEventListener("click",s.current),s.current=r,t.addEventListener("click",s.current,{once:!0})):r()}n.current=!1},o=window.setTimeout((()=>{t.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",e),t.removeEventListener("click",s.current)}}),[t,i]),{onPointerDownCapture:()=>n.current=!0}}((e=>{const t=e.target,i=[...d.branches].some((e=>e.contains(t)));C&&!i&&(null==o||o(e),null==a||a(e),e.defaultPrevented||null==l||l())}),p),x=function(e,t=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const i=K(e),n=(0,k.useRef)(!1);return(0,k.useEffect)((()=>{const e=e=>{if(e.target&&!n.current){oe(q,i,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)}),[t,i]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}((e=>{const t=e.target;[...d.branches].some((e=>e.contains(t)))||(null==r||r(e),null==a||a(e),e.defaultPrevented||null==l||l())}),p);return function(e,t=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const i=K(e);(0,k.useEffect)((()=>{const e=e=>{"Escape"===e.key&&i(e)};return t.addEventListener("keydown",e),()=>t.removeEventListener("keydown",e)}),[i,t])}((e=>{b===d.layers.size-1&&(null==s||s(e),!e.defaultPrevented&&l&&(e.preventDefault(),l()))}),p),(0,k.useEffect)((()=>{if(u)return n&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(ee=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),se(),()=>{n&&1===d.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=ee)}}),[u,p,n,d]),(0,k.useEffect)((()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),se())}),[u,d]),(0,k.useEffect)((()=>{const e=()=>g({});return document.addEventListener(Q,e),()=>document.removeEventListener(Q,e)}),[]),(0,k.createElement)(X.div,(0,W().A)({},c,{ref:m,style:{pointerEvents:w?C?"auto":"none":void 0,...e.style},onFocusCapture:P(e.onFocusCapture,x.onFocusCapture),onBlurCapture:P(e.onBlurCapture,x.onBlurCapture),onPointerDownCapture:P(e.onPointerDownCapture,M.onPointerDownCapture)}))})),ne=(0,k.forwardRef)(((e,t)=>{const i=(0,k.useContext)(te),n=(0,k.useRef)(null),s=O(t,n);return(0,k.useEffect)((()=>{const e=n.current;if(e)return i.branches.add(e),()=>{i.branches.delete(e)}}),[i.branches]),(0,k.createElement)(X.div,(0,W().A)({},e,{ref:s}))}));function se(){const e=new CustomEvent(Q);document.dispatchEvent(e)}function oe(e,t,i,{discrete:n}){const s=i.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:i});t&&s.addEventListener(e,t,{once:!0}),n?F(s,o):s.dispatchEvent(o)}const re=ie,ae=ne,le=(0,k.forwardRef)(((e,t)=>{var i;const{container:n=(null===globalThis||void 0===globalThis||null===(i=globalThis.document)||void 0===i?void 0:i.body),...s}=e;return n?z.createPortal((0,k.createElement)(X.div,(0,W().A)({},s,{ref:t})),n):null})),ce=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?k.useLayoutEffect:()=>{};const de=e=>{const{present:t,children:i}=e,n=function(e){const[t,i]=(0,k.useState)(),n=(0,k.useRef)({}),s=(0,k.useRef)(e),o=(0,k.useRef)("none"),r=e?"mounted":"unmounted",[a,l]=function(e,t){return(0,k.useReducer)(((e,i)=>{const n=t[e][i];return null!=n?n:e}),e)}(r,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return(0,k.useEffect)((()=>{const e=ue(n.current);o.current="mounted"===a?e:"none"}),[a]),ce((()=>{const t=n.current,i=s.current;if(i!==e){const n=o.current,r=ue(t);if(e)l("MOUNT");else if("none"===r||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(i&&n!==r?"ANIMATION_OUT":"UNMOUNT")}s.current=e}}),[e,l]),ce((()=>{if(t){const e=e=>{const i=ue(n.current).includes(e.animationName);e.target===t&&i&&(0,z.flushSync)((()=>l("ANIMATION_END")))},i=e=>{e.target===t&&(o.current=ue(n.current))};return t.addEventListener("animationstart",i),t.addEventListener("animationcancel",e),t.addEventListener("animationend",e),()=>{t.removeEventListener("animationstart",i),t.removeEventListener("animationcancel",e),t.removeEventListener("animationend",e)}}l("ANIMATION_END")}),[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:(0,k.useCallback)((e=>{e&&(n.current=getComputedStyle(e)),i(e)}),[])}}(t),s="function"==typeof i?i({present:n.isPresent}):k.Children.only(i),o=O(n.ref,s.ref);return"function"==typeof i||n.isPresent?(0,k.cloneElement)(s,{ref:o}):null};function ue(e){return(null==e?void 0:e.animationName)||"none"}function he({prop:e,defaultProp:t,onChange:i=(()=>{})}){const[n,s]=function({defaultProp:e,onChange:t}){const i=(0,k.useState)(e),[n]=i,s=(0,k.useRef)(n),o=K(t);return(0,k.useEffect)((()=>{s.current!==n&&(o(n),s.current=n)}),[n,s,o]),i}({defaultProp:t,onChange:i}),o=void 0!==e,r=o?e:n,a=K(i);return[r,(0,k.useCallback)((t=>{if(o){const i="function"==typeof t?t(e):t;i!==e&&a(i)}else s(t)}),[o,e,s,a])]}de.displayName="Presence";const pe=(0,k.forwardRef)(((e,t)=>(0,k.createElement)(X.span,(0,W().A)({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})))),ge="ToastProvider",[me,Ie,fe]=U("Toast"),[ye,be]=R("Toast",[fe]),[we,Ce]=ye(ge),Me=e=>{const{__scopeToast:t,label:i="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:r}=e,[a,l]=(0,k.useState)(null),[c,d]=(0,k.useState)(0),u=(0,k.useRef)(!1),h=(0,k.useRef)(!1);return(0,k.createElement)(me.Provider,{scope:t},(0,k.createElement)(we,{scope:t,label:i,duration:n,swipeDirection:s,swipeThreshold:o,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:(0,k.useCallback)((()=>d((e=>e+1))),[]),onToastRemove:(0,k.useCallback)((()=>d((e=>e-1))),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:h},r))};Me.propTypes={label(e){if(e.label&&"string"==typeof e.label&&!e.label.trim()){return new Error(`Invalid prop \`label\` supplied to \`${ge}\`. Expected non-empty \`string\`.`)}return null}};const xe="ToastViewport",Ae=["F8"],Se="toast.viewportPause",ve="toast.viewportResume",Le=(0,k.forwardRef)(((e,t)=>{const{__scopeToast:i,hotkey:n=Ae,label:s="Notifications ({hotkey})",...o}=e,r=Ce(xe,i),a=Ie(i),l=(0,k.useRef)(null),c=(0,k.useRef)(null),d=(0,k.useRef)(null),u=(0,k.useRef)(null),h=O(t,u,r.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=r.toastCount>0;(0,k.useEffect)((()=>{const e=e=>{var t;n.every((t=>e[t]||e.code===t))&&(null===(t=u.current)||void 0===t||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[n]),(0,k.useEffect)((()=>{const e=l.current,t=u.current;if(g&&e&&t){const i=()=>{if(!r.isClosePausedRef.current){const e=new CustomEvent(Se);t.dispatchEvent(e),r.isClosePausedRef.current=!0}},n=()=>{if(r.isClosePausedRef.current){const e=new CustomEvent(ve);t.dispatchEvent(e),r.isClosePausedRef.current=!1}},s=t=>{!e.contains(t.relatedTarget)&&n()},o=()=>{e.contains(document.activeElement)||n()};return e.addEventListener("focusin",i),e.addEventListener("focusout",s),e.addEventListener("pointermove",i),e.addEventListener("pointerleave",o),window.addEventListener("blur",i),window.addEventListener("focus",n),()=>{e.removeEventListener("focusin",i),e.removeEventListener("focusout",s),e.removeEventListener("pointermove",i),e.removeEventListener("pointerleave",o),window.removeEventListener("blur",i),window.removeEventListener("focus",n)}}}),[g,r.isClosePausedRef]);const m=(0,k.useCallback)((({tabbingDirection:e})=>{const t=a().map((t=>{const i=t.ref.current,n=[i,...Ve(i)];return"forwards"===e?n:n.reverse()}));return("forwards"===e?t.reverse():t).flat()}),[a]);return(0,k.useEffect)((()=>{const e=u.current;if(e){const t=t=>{const i=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!i){const i=document.activeElement,r=t.shiftKey;var n;if(t.target===e&&r)return void(null===(n=c.current)||void 0===n||n.focus());const a=m({tabbingDirection:r?"backwards":"forwards"}),l=a.findIndex((e=>e===i));var s,o;if(Ue(a.slice(l+1)))t.preventDefault();else r?null===(s=c.current)||void 0===s||s.focus():null===(o=d.current)||void 0===o||o.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}}),[a,m]),(0,k.createElement)(ae,{ref:l,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"}},g&&(0,k.createElement)(Ne,{ref:c,onFocusFromOutsideViewport:()=>{Ue(m({tabbingDirection:"forwards"}))}}),(0,k.createElement)(me.Slot,{scope:i},(0,k.createElement)(X.ol,(0,W().A)({tabIndex:-1},o,{ref:h}))),g&&(0,k.createElement)(Ne,{ref:d,onFocusFromOutsideViewport:()=>{Ue(m({tabbingDirection:"backwards"}))}}))})),je="ToastFocusProxy",Ne=(0,k.forwardRef)(((e,t)=>{const{__scopeToast:i,onFocusFromOutsideViewport:n,...s}=e,o=Ce(je,i);return(0,k.createElement)(pe,(0,W().A)({"aria-hidden":!0,tabIndex:0},s,{ref:t,style:{position:"fixed"},onFocus:e=>{var t;const i=e.relatedTarget;!(null!==(t=o.viewport)&&void 0!==t&&t.contains(i))&&n()}}))})),De="Toast",Ee=(0,k.forwardRef)(((e,t)=>{const{forceMount:i,open:n,defaultOpen:s,onOpenChange:o,...r}=e,[a=!0,l]=he({prop:n,defaultProp:s,onChange:o});return(0,k.createElement)(de,{present:i||a},(0,k.createElement)(Te,(0,W().A)({open:a},r,{ref:t,onClose:()=>l(!1),onPause:K(e.onPause),onResume:K(e.onResume),onSwipeStart:P(e.onSwipeStart,(e=>{e.currentTarget.setAttribute("data-swipe","start")})),onSwipeMove:P(e.onSwipeMove,(e=>{const{x:t,y:i}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${i}px`)})),onSwipeCancel:P(e.onSwipeCancel,(e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")})),onSwipeEnd:P(e.onSwipeEnd,(e=>{const{x:t,y:i}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${i}px`),l(!1)}))})))})),[ke,Ze]=ye(De,{onClose(){}}),Te=(0,k.forwardRef)(((e,t)=>{const{__scopeToast:i,type:n="foreground",duration:s,open:o,onClose:r,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:u,onSwipeCancel:h,onSwipeEnd:p,...g}=e,m=Ce(De,i),[I,f]=(0,k.useState)(null),y=O(t,(e=>f(e))),b=(0,k.useRef)(null),w=(0,k.useRef)(null),C=s||m.duration,M=(0,k.useRef)(0),x=(0,k.useRef)(C),A=(0,k.useRef)(0),{onToastAdd:S,onToastRemove:v}=m,L=K((()=>{var e;(null==I?void 0:I.contains(document.activeElement))&&(null===(e=m.viewport)||void 0===e||e.focus()),r()})),j=(0,k.useCallback)((e=>{e&&e!==1/0&&(window.clearTimeout(A.current),M.current=(new Date).getTime(),A.current=window.setTimeout(L,e))}),[L]);(0,k.useEffect)((()=>{const e=m.viewport;if(e){const t=()=>{j(x.current),null==c||c()},i=()=>{const e=(new Date).getTime()-M.current;x.current=x.current-e,window.clearTimeout(A.current),null==l||l()};return e.addEventListener(Se,i),e.addEventListener(ve,t),()=>{e.removeEventListener(Se,i),e.removeEventListener(ve,t)}}}),[m.viewport,C,l,c,j]),(0,k.useEffect)((()=>{o&&!m.isClosePausedRef.current&&j(C)}),[o,C,m.isClosePausedRef,j]),(0,k.useEffect)((()=>(S(),()=>v())),[S,v]);const N=(0,k.useMemo)((()=>I?Be(I):null),[I]);return m.viewport?(0,k.createElement)(k.Fragment,null,N&&(0,k.createElement)(We,{__scopeToast:i,role:"status","aria-live":"foreground"===n?"assertive":"polite","aria-atomic":!0},N),(0,k.createElement)(ke,{scope:i,onClose:L},(0,z.createPortal)((0,k.createElement)(me.ItemSlot,{scope:i},(0,k.createElement)(re,{asChild:!0,onEscapeKeyDown:P(a,(()=>{m.isFocusedToastEscapeKeyDownRef.current||L(),m.isFocusedToastEscapeKeyDownRef.current=!1}))},(0,k.createElement)(X.li,(0,W().A)({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":m.swipeDirection},g,{ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:P(e.onKeyDown,(e=>{"Escape"===e.key&&(null==a||a(e.nativeEvent),e.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,L()))})),onPointerDown:P(e.onPointerDown,(e=>{0===e.button&&(b.current={x:e.clientX,y:e.clientY})})),onPointerMove:P(e.onPointerMove,(e=>{if(!b.current)return;const t=e.clientX-b.current.x,i=e.clientY-b.current.y,n=Boolean(w.current),s=["left","right"].includes(m.swipeDirection),o=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,r=s?o(0,t):0,a=s?0:o(0,i),l="touch"===e.pointerType?10:2,c={x:r,y:a},h={originalEvent:e,delta:c};n?(w.current=c,Je("toast.swipeMove",u,h,{discrete:!1})):He(c,m.swipeDirection,l)?(w.current=c,Je("toast.swipeStart",d,h,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(i)>l)&&(b.current=null)})),onPointerUp:P(e.onPointerUp,(e=>{const t=w.current,i=e.target;if(i.hasPointerCapture(e.pointerId)&&i.releasePointerCapture(e.pointerId),w.current=null,b.current=null,t){const i=e.currentTarget,n={originalEvent:e,delta:t};He(t,m.swipeDirection,m.swipeThreshold)?Je("toast.swipeEnd",p,n,{discrete:!0}):Je("toast.swipeCancel",h,n,{discrete:!0}),i.addEventListener("click",(e=>e.preventDefault()),{once:!0})}}))})))),m.viewport))):null}));Te.propTypes={type(e){if(e.type&&!["foreground","background"].includes(e.type)){return new Error(`Invalid prop \`type\` supplied to \`${De}\`. Expected \`foreground | background\`.`)}return null}};const We=e=>{const{__scopeToast:t,children:i,...n}=e,s=Ce(De,t),[o,r]=(0,k.useState)(!1),[a,l]=(0,k.useState)(!1);return function(e=(()=>{})){const t=K(e);ce((()=>{let e=0,i=0;return e=window.requestAnimationFrame((()=>i=window.requestAnimationFrame(t))),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(i)}}),[t])}((()=>r(!0))),(0,k.useEffect)((()=>{const e=window.setTimeout((()=>l(!0)),1e3);return()=>window.clearTimeout(e)}),[]),a?null:(0,k.createElement)(le,{asChild:!0},(0,k.createElement)(pe,n,o&&(0,k.createElement)(k.Fragment,null,s.label," ",i)))},ze=(0,k.forwardRef)(((e,t)=>{const{__scopeToast:i,...n}=e;return(0,k.createElement)(X.div,(0,W().A)({},n,{ref:t}))})),Pe=(0,k.forwardRef)(((e,t)=>{const{__scopeToast:i,...n}=e;return(0,k.createElement)(X.div,(0,W().A)({},n,{ref:t}))})),Ye="ToastAction",Oe=(0,k.forwardRef)(((e,t)=>{const{altText:i,...n}=e;return i?(0,k.createElement)(_e,{altText:i,asChild:!0},(0,k.createElement)(Ge,(0,W().A)({},n,{ref:t}))):null}));Oe.propTypes={altText:e=>e.altText?null:new Error(`Missing prop \`altText\` expected on \`${Ye}\``)};const Re="ToastClose",Ge=(0,k.forwardRef)(((e,t)=>{const{__scopeToast:i,...n}=e,s=Ze(Re,i);return(0,k.createElement)(_e,{asChild:!0},(0,k.createElement)(X.button,(0,W().A)({type:"button"},n,{ref:t,onClick:P(e.onClick,s.onClose)})))})),_e=(0,k.forwardRef)(((e,t)=>{const{__scopeToast:i,altText:n,...s}=e;return(0,k.createElement)(X.div,(0,W().A)({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0},s,{ref:t}))}));function Be(e){const t=[];return Array.from(e.childNodes).forEach((e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const i=e.ariaHidden||e.hidden||"none"===e.style.display,n=""===e.dataset.radixToastAnnounceExclude;if(!i)if(n){const i=e.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...Be(e))}})),t}function Je(e,t,i,{discrete:n}){const s=i.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:i});t&&s.addEventListener(e,t,{once:!0}),n?F(s,o):s.dispatchEvent(o)}const He=(e,t,i=0)=>{const n=Math.abs(e.x),s=Math.abs(e.y),o=n>s;return"left"===t||"right"===t?o&&n>i:!o&&s>i};function Ve(e){const t=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)t.push(i.currentNode);return t}function Ue(e){const t=document.activeElement;return e.some((e=>e===t||(e.focus(),document.activeElement!==t)))}const Xe=Ee,Fe=ze,Ke=Pe,Qe=Oe,$e=Ge;var qe=()=>i(32485),et=()=>i(850955);const tt=(0,k.createContext)(void 0);function it(e){const t=(0,k.useContext)(tt);return e||t||"ltr"}let nt=0;function st(){(0,k.useEffect)((()=>{var e,t;const i=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=i[0])&&void 0!==e?e:ot()),document.body.insertAdjacentElement("beforeend",null!==(t=i[1])&&void 0!==t?t:ot()),nt++,()=>{1===nt&&document.querySelectorAll("[data-radix-focus-guard]").forEach((e=>e.remove())),nt--}}),[])}function ot(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const rt="focusScope.autoFocusOnMount",at="focusScope.autoFocusOnUnmount",lt={bubbles:!1,cancelable:!0},ct=(0,k.forwardRef)(((e,t)=>{const{loop:i=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...r}=e,[a,l]=(0,k.useState)(null),c=K(s),d=K(o),u=(0,k.useRef)(null),h=O(t,(e=>l(e))),p=(0,k.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,k.useEffect)((()=>{if(n){function e(e){if(p.paused||!a)return;const t=e.target;a.contains(t)?u.current=t:pt(u.current,{select:!0})}function t(e){!p.paused&&a&&(a.contains(e.relatedTarget)||pt(u.current,{select:!0}))}return document.addEventListener("focusin",e),document.addEventListener("focusout",t),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t)}}}),[n,a,p.paused]),(0,k.useEffect)((()=>{if(a){gt.add(p);const t=document.activeElement;if(!a.contains(t)){const i=new CustomEvent(rt,lt);a.addEventListener(rt,c),a.dispatchEvent(i),i.defaultPrevented||(!function(e,{select:t=!1}={}){const i=document.activeElement;for(const n of e)if(pt(n,{select:t}),document.activeElement!==i)return}((e=dt(a),e.filter((e=>"A"!==e.tagName))),{select:!0}),document.activeElement===t&&pt(a))}return()=>{a.removeEventListener(rt,c),setTimeout((()=>{const e=new CustomEvent(at,lt);a.addEventListener(at,d),a.dispatchEvent(e),e.defaultPrevented||pt(null!=t?t:document.body,{select:!0}),a.removeEventListener(at,d),gt.remove(p)}),0)}}var e}),[a,c,d,p]);const g=(0,k.useCallback)((e=>{if(!i&&!n)return;if(p.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,s=document.activeElement;if(t&&s){const t=e.currentTarget,[n,o]=function(e){const t=dt(e),i=ut(t,e),n=ut(t.reverse(),e);return[i,n]}(t);n&&o?e.shiftKey||s!==o?e.shiftKey&&s===n&&(e.preventDefault(),i&&pt(o,{select:!0})):(e.preventDefault(),i&&pt(n,{select:!0})):s===t&&e.preventDefault()}}),[i,n,p.paused]);return(0,k.createElement)(X.div,(0,W().A)({tabIndex:-1},r,{ref:h,onKeyDown:g}))}));function dt(e){const t=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)t.push(i.currentNode);return t}function ut(e,t){for(const i of e)if(!ht(i,{upTo:t}))return i}function ht(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function pt(e,{select:t=!1}={}){if(e&&e.focus){const i=document.activeElement;e.focus({preventScroll:!0}),e!==i&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}const gt=function(){let e=[];return{add(t){const i=e[0];t!==i&&(null==i||i.pause()),e=mt(e,t),e.unshift(t)},remove(t){var i;e=mt(e,t),null===(i=e[0])||void 0===i||i.resume()}}}();function mt(e,t){const i=[...e],n=i.indexOf(t);return-1!==n&&i.splice(n,1),i}const It=Z["useId".toString()]||(()=>{});let ft=0;function yt(e){const[t,i]=k.useState(It());return ce((()=>{e||i((e=>null!=e?e:String(ft++)))}),[e]),e||(t?`radix-${t}`:"")}function bt(e){return e.split("-")[0]}function wt(e){return e.split("-")[1]}function Ct(e){return["top","bottom"].includes(bt(e))?"x":"y"}function Mt(e){return"y"===e?"height":"width"}function xt(e,t,i){let{reference:n,floating:s}=e;const o=n.x+n.width/2-s.width/2,r=n.y+n.height/2-s.height/2,a=Ct(t),l=Mt(a),c=n[l]/2-s[l]/2,d="x"===a;let u;switch(bt(t)){case"top":u={x:o,y:n.y-s.height};break;case"bottom":u={x:o,y:n.y+n.height};break;case"right":u={x:n.x+n.width,y:r};break;case"left":u={x:n.x-s.width,y:r};break;default:u={x:n.x,y:n.y}}switch(wt(t)){case"start":u[a]-=c*(i&&d?-1:1);break;case"end":u[a]+=c*(i&&d?-1:1)}return u}function At(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function St(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function vt(e,t){var i;void 0===t&&(t={});const{x:n,y:s,platform:o,rects:r,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:p=0}=t,g=At(p),m=a[h?"floating"===u?"reference":"floating":u],I=St(await o.getClippingRect({element:null==(i=await(null==o.isElement?void 0:o.isElement(m)))||i?m:m.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),f=St(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===u?{...r.floating,x:n,y:s}:r.reference,offsetParent:await(null==o.getOffsetParent?void 0:o.getOffsetParent(a.floating)),strategy:l}):r[u]);return{top:I.top-f.top+g.top,bottom:f.bottom-I.bottom+g.bottom,left:I.left-f.left+g.left,right:f.right-I.right+g.right}}const Lt=Math.min,jt=Math.max;function Nt(e,t,i){return jt(e,Lt(t,i))}const Dt=e=>({name:"arrow",options:e,async fn(t){const{element:i,padding:n=0}=null!=e?e:{},{x:s,y:o,placement:r,rects:a,platform:l}=t;if(null==i)return{};const c=At(n),d={x:s,y:o},u=Ct(r),h=wt(r),p=Mt(u),g=await l.getDimensions(i),m="y"===u?"top":"left",I="y"===u?"bottom":"right",f=a.reference[p]+a.reference[u]-d[u]-a.floating[p],y=d[u]-a.reference[u],b=await(null==l.getOffsetParent?void 0:l.getOffsetParent(i));let w=b?"y"===u?b.clientHeight||0:b.clientWidth||0:0;0===w&&(w=a.floating[p]);const C=f/2-y/2,M=c[m],x=w-g[p]-c[I],A=w/2-g[p]/2+C,S=Nt(M,A,x),v=("start"===h?c[m]:c[I])>0&&A!==S&&a.reference[p]<=a.floating[p];return{[u]:d[u]-(v?A<M?M-A:x-A:0),data:{[u]:S,centerOffset:A-S}}}}),Et={left:"right",right:"left",bottom:"top",top:"bottom"};function kt(e){return e.replace(/left|right|bottom|top/g,(e=>Et[e]))}function Zt(e,t,i){void 0===i&&(i=!1);const n=wt(e),s=Ct(e),o=Mt(s);let r="x"===s?n===(i?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[o]>t.floating[o]&&(r=kt(r)),{main:r,cross:kt(r)}}const Tt={start:"end",end:"start"};function Wt(e){return e.replace(/start|end/g,(e=>Tt[e]))}const zt=["top","right","bottom","left"],Pt=(zt.reduce(((e,t)=>e.concat(t,t+"-start",t+"-end")),[]),function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var i;const{placement:n,middlewareData:s,rects:o,initialPlacement:r,platform:a,elements:l}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:u,fallbackStrategy:h="bestFit",flipAlignment:p=!0,...g}=e,m=bt(n),I=u||(m!==r&&p?function(e){const t=kt(e);return[Wt(e),t,Wt(t)]}(r):[kt(r)]),f=[r,...I],y=await vt(t,g),b=[];let w=(null==(i=s.flip)?void 0:i.overflows)||[];if(c&&b.push(y[m]),d){const{main:e,cross:t}=Zt(n,o,await(null==a.isRTL?void 0:a.isRTL(l.floating)));b.push(y[e],y[t])}if(w=[...w,{placement:n,overflows:b}],!b.every((e=>e<=0))){var C,M;const e=(null!=(C=null==(M=s.flip)?void 0:M.index)?C:0)+1,t=f[e];if(t)return{data:{index:e,overflows:w},reset:{placement:t}};let i="bottom";switch(h){case"bestFit":{var x;const e=null==(x=w.map((e=>[e,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:x[0].placement;e&&(i=e);break}case"initialPlacement":i=r}if(n!==i)return{reset:{placement:i}}}return{}}}});function Yt(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ot(e){return zt.some((t=>e[t]>=0))}const Rt=function(e){let{strategy:t="referenceHidden",...i}=void 0===e?{}:e;return{name:"hide",async fn(e){const{rects:n}=e;switch(t){case"referenceHidden":{const t=Yt(await vt(e,{...i,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:t,referenceHidden:Ot(t)}}}case"escaped":{const t=Yt(await vt(e,{...i,altBoundary:!0}),n.floating);return{data:{escapedOffsets:t,escaped:Ot(t)}}}default:return{}}}}},Gt=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){const{x:i,y:n}=t,s=await async function(e,t){const{placement:i,platform:n,elements:s}=e,o=await(null==n.isRTL?void 0:n.isRTL(s.floating)),r=bt(i),a=wt(i),l="x"===Ct(i),c=["left","top"].includes(r)?-1:1,d=o&&l?-1:1,u="function"==typeof t?t(e):t;let{mainAxis:h,crossAxis:p,alignmentAxis:g}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...u};return a&&"number"==typeof g&&(p="end"===a?-1*g:g),l?{x:p*d,y:h*c}:{x:h*c,y:p*d}}(t,e);return{x:i+s.x,y:n+s.y,data:s}}}};function _t(e){return"x"===e?"y":"x"}const Bt=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:n,placement:s}=t,{mainAxis:o=!0,crossAxis:r=!1,limiter:a={fn:e=>{let{x:t,y:i}=e;return{x:t,y:i}}},...l}=e,c={x:i,y:n},d=await vt(t,l),u=Ct(bt(s)),h=_t(u);let p=c[u],g=c[h];if(o){const e="y"===u?"bottom":"right";p=Nt(p+d["y"===u?"top":"left"],p,p-d[e])}if(r){const e="y"===h?"bottom":"right";g=Nt(g+d["y"===h?"top":"left"],g,g-d[e])}const m=a.fn({...t,[u]:p,[h]:g});return{...m,data:{x:m.x-i,y:m.y-n}}}}},Jt=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:i,y:n,placement:s,rects:o,middlewareData:r}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=e,d={x:i,y:n},u=Ct(s),h=_t(u);let p=d[u],g=d[h];const m="function"==typeof a?a({...o,placement:s}):a,I="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const e="y"===u?"height":"width",t=o.reference[u]-o.floating[e]+I.mainAxis,i=o.reference[u]+o.reference[e]-I.mainAxis;p<t?p=t:p>i&&(p=i)}if(c){var f,y,b,w;const e="y"===u?"width":"height",t=["top","left"].includes(bt(s)),i=o.reference[h]-o.floating[e]+(t&&null!=(f=null==(y=r.offset)?void 0:y[h])?f:0)+(t?0:I.crossAxis),n=o.reference[h]+o.reference[e]+(t?0:null!=(b=null==(w=r.offset)?void 0:w[h])?b:0)-(t?I.crossAxis:0);g<i?g=i:g>n&&(g=n)}return{[u]:p,[h]:g}}}},Ht=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){const{placement:i,rects:n,platform:s,elements:o}=t,{apply:r,...a}=e,l=await vt(t,a),c=bt(i),d=wt(i);let u,h;"top"===c||"bottom"===c?(u=c,h=d===(await(null==s.isRTL?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(h=c,u="end"===d?"top":"bottom");const p=jt(l.left,0),g=jt(l.right,0),m=jt(l.top,0),I=jt(l.bottom,0),f={availableHeight:n.floating.height-(["left","right"].includes(i)?2*(0!==m||0!==I?m+I:jt(l.top,l.bottom)):l[u]),availableWidth:n.floating.width-(["top","bottom"].includes(i)?2*(0!==p||0!==g?p+g:jt(l.left,l.right)):l[h])},y=await s.getDimensions(o.floating);null==r||r({...t,...f});const b=await s.getDimensions(o.floating);return y.width!==b.width||y.height!==b.height?{reset:{rects:!0}}:{}}}};function Vt(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function Ut(e){if(null==e)return window;if(!Vt(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function Xt(e){return Ut(e).getComputedStyle(e)}function Ft(e){return Vt(e)?"":e?(e.nodeName||"").toLowerCase():""}function Kt(){const e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((e=>e.brand+"/"+e.version)).join(" "):navigator.userAgent}function Qt(e){return e instanceof Ut(e).HTMLElement}function $t(e){return e instanceof Ut(e).Element}function qt(e){return"undefined"!=typeof ShadowRoot&&(e instanceof Ut(e).ShadowRoot||e instanceof ShadowRoot)}function ei(e){const{overflow:t,overflowX:i,overflowY:n}=Xt(e);return/auto|scroll|overlay|hidden/.test(t+n+i)}function ti(e){return["table","td","th"].includes(Ft(e))}function ii(e){const t=/firefox/i.test(Kt()),i=Xt(e);return"none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||["transform","perspective"].includes(i.willChange)||t&&"filter"===i.willChange||t&&!!i.filter&&"none"!==i.filter}function ni(){return!/^((?!chrome|android).)*safari/i.test(Kt())}const si=Math.min,oi=Math.max,ri=Math.round;function ai(e,t,i){var n,s,o,r;void 0===t&&(t=!1),void 0===i&&(i=!1);const a=e.getBoundingClientRect();let l=1,c=1;t&&Qt(e)&&(l=e.offsetWidth>0&&ri(a.width)/e.offsetWidth||1,c=e.offsetHeight>0&&ri(a.height)/e.offsetHeight||1);const d=$t(e)?Ut(e):window,u=!ni()&&i,h=(a.left+(u&&null!=(n=null==(s=d.visualViewport)?void 0:s.offsetLeft)?n:0))/l,p=(a.top+(u&&null!=(o=null==(r=d.visualViewport)?void 0:r.offsetTop)?o:0))/c,g=a.width/l,m=a.height/c;return{width:g,height:m,top:p,right:h+g,bottom:p+m,left:h,x:h,y:p}}function li(e){return(t=e,(t instanceof Ut(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function ci(e){return $t(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function di(e){return ai(li(e)).left+ci(e).scrollLeft}function ui(e,t,i){const n=Qt(t),s=li(t),o=ai(e,n&&function(e){const t=ai(e);return ri(t.width)!==e.offsetWidth||ri(t.height)!==e.offsetHeight}(t),"fixed"===i);let r={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(n||!n&&"fixed"!==i)if(("body"!==Ft(t)||ei(s))&&(r=ci(t)),Qt(t)){const e=ai(t,!0);a.x=e.x+t.clientLeft,a.y=e.y+t.clientTop}else s&&(a.x=di(s));return{x:o.left+r.scrollLeft-a.x,y:o.top+r.scrollTop-a.y,width:o.width,height:o.height}}function hi(e){return"html"===Ft(e)?e:e.assignedSlot||e.parentNode||(qt(e)?e.host:null)||li(e)}function pi(e){return Qt(e)&&"fixed"!==getComputedStyle(e).position?e.offsetParent:null}function gi(e){const t=Ut(e);let i=pi(e);for(;i&&ti(i)&&"static"===getComputedStyle(i).position;)i=pi(i);return i&&("html"===Ft(i)||"body"===Ft(i)&&"static"===getComputedStyle(i).position&&!ii(i))?t:i||function(e){let t=hi(e);for(qt(t)&&(t=t.host);Qt(t)&&!["html","body"].includes(Ft(t));){if(ii(t))return t;t=t.parentNode}return null}(e)||t}function mi(e){if(Qt(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=ai(e);return{width:t.width,height:t.height}}function Ii(e){const t=hi(e);return["html","body","#document"].includes(Ft(t))?e.ownerDocument.body:Qt(t)&&ei(t)?t:Ii(t)}function fi(e,t){var i;void 0===t&&(t=[]);const n=Ii(e),s=n===(null==(i=e.ownerDocument)?void 0:i.body),o=Ut(n),r=s?[o].concat(o.visualViewport||[],ei(n)?n:[]):n,a=t.concat(r);return s?a:a.concat(fi(r))}function yi(e,t,i){return"viewport"===t?St(function(e,t){const i=Ut(e),n=li(e),s=i.visualViewport;let o=n.clientWidth,r=n.clientHeight,a=0,l=0;if(s){o=s.width,r=s.height;const e=ni();(e||!e&&"fixed"===t)&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:r,x:a,y:l}}(e,i)):$t(t)?function(e,t){const i=ai(e,!1,"fixed"===t),n=i.top+e.clientTop,s=i.left+e.clientLeft;return{top:n,left:s,x:s,y:n,right:s+e.clientWidth,bottom:n+e.clientHeight,width:e.clientWidth,height:e.clientHeight}}(t,i):St(function(e){var t;const i=li(e),n=ci(e),s=null==(t=e.ownerDocument)?void 0:t.body,o=oi(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),r=oi(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0);let a=-n.scrollLeft+di(e);const l=-n.scrollTop;return"rtl"===Xt(s||i).direction&&(a+=oi(i.clientWidth,s?s.clientWidth:0)-o),{width:o,height:r,x:a,y:l}}(li(e)))}function bi(e){const t=fi(e),i=["absolute","fixed"].includes(Xt(e).position)&&Qt(e)?gi(e):e;return $t(i)?t.filter((e=>$t(e)&&function(e,t){const i=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(i&&qt(i)){let i=t;do{if(i&&e===i)return!0;i=i.parentNode||i.host}while(i)}return!1}(e,i)&&"body"!==Ft(e))):[]}const wi={getClippingRect:function(e){let{element:t,boundary:i,rootBoundary:n,strategy:s}=e;const o=[..."clippingAncestors"===i?bi(t):[].concat(i),n],r=o[0],a=o.reduce(((e,i)=>{const n=yi(t,i,s);return e.top=oi(n.top,e.top),e.right=si(n.right,e.right),e.bottom=si(n.bottom,e.bottom),e.left=oi(n.left,e.left),e}),yi(t,r,s));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:i,strategy:n}=e;const s=Qt(i),o=li(i);if(i===o)return t;let r={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((s||!s&&"fixed"!==n)&&(("body"!==Ft(i)||ei(o))&&(r=ci(i)),Qt(i))){const e=ai(i,!0);a.x=e.x+i.clientLeft,a.y=e.y+i.clientTop}return{...t,x:t.x-r.scrollLeft+a.x,y:t.y-r.scrollTop+a.y}},isElement:$t,getDimensions:mi,getOffsetParent:gi,getDocumentElement:li,getElementRects:e=>{let{reference:t,floating:i,strategy:n}=e;return{reference:ui(t,gi(i),n),floating:{...mi(i),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>"rtl"===Xt(e).direction};function Ci(e,t,i,n){void 0===n&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:r=!0,animationFrame:a=!1}=n,l=s&&!a,c=o&&!a,d=l||c?[...$t(e)?fi(e):[],...fi(t)]:[];d.forEach((e=>{l&&e.addEventListener("scroll",i,{passive:!0}),c&&e.addEventListener("resize",i)}));let u,h=null;if(r){let n=!0;h=new ResizeObserver((()=>{n||i(),n=!1})),$t(e)&&!a&&h.observe(e),h.observe(t)}let p=a?ai(e):null;return a&&function t(){const n=ai(e);!p||n.x===p.x&&n.y===p.y&&n.width===p.width&&n.height===p.height||i(),p=n,u=requestAnimationFrame(t)}(),i(),()=>{var e;d.forEach((e=>{l&&e.removeEventListener("scroll",i),c&&e.removeEventListener("resize",i)})),null==(e=h)||e.disconnect(),h=null,a&&cancelAnimationFrame(u)}}const Mi=(e,t,i)=>(async(e,t,i)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:r}=i,a=await(null==r.isRTL?void 0:r.isRTL(t));let l=await r.getElementRects({reference:e,floating:t,strategy:s}),{x:c,y:d}=xt(l,n,a),u=n,h={},p=0;for(let g=0;g<o.length;g++){const{name:i,fn:m}=o[g],{x:I,y:f,data:y,reset:b}=await m({x:c,y:d,initialPlacement:n,placement:u,strategy:s,middlewareData:h,rects:l,platform:r,elements:{reference:e,floating:t}});c=null!=I?I:c,d=null!=f?f:d,h={...h,[i]:{...h[i],...y}},b&&p<=50&&(p++,"object"==typeof b&&(b.placement&&(u=b.placement),b.rects&&(l=!0===b.rects?await r.getElementRects({reference:e,floating:t,strategy:s}):b.rects),({x:c,y:d}=xt(l,u,a))),g=-1)}return{x:c,y:d,placement:u,strategy:s,middlewareData:h}})(e,t,{platform:wi,...i});var xi="undefined"!=typeof document?k.useLayoutEffect:k.useEffect;function Ai(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let i,n,s;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(i=e.length,i!=t.length)return!1;for(n=i;0!=n--;)if(!Ai(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),i=s.length,i!==Object.keys(t).length)return!1;for(n=i;0!=n--;)if(!Object.prototype.hasOwnProperty.call(t,s[n]))return!1;for(n=i;0!=n--;){const i=s[n];if(("_owner"!==i||!e.$$typeof)&&!Ai(e[i],t[i]))return!1}return!0}return e!=e&&t!=t}function Si(e){let{middleware:t,placement:i="bottom",strategy:n="absolute",whileElementsMounted:s}=void 0===e?{}:e;const o=k.useRef(null),r=k.useRef(null),a=function(e){const t=k.useRef(e);return xi((()=>{t.current=e})),t}(s),l=k.useRef(null),[c,d]=k.useState({x:null,y:null,strategy:n,placement:i,middlewareData:{}}),[u,h]=k.useState(t);Ai(null==u?void 0:u.map((e=>{let{options:t}=e;return t})),null==t?void 0:t.map((e=>{let{options:t}=e;return t})))||h(t);const p=k.useCallback((()=>{o.current&&r.current&&Mi(o.current,r.current,{middleware:u,placement:i,strategy:n}).then((e=>{g.current&&z.flushSync((()=>{d(e)}))}))}),[u,i,n]);xi((()=>{g.current&&p()}),[p]);const g=k.useRef(!1);xi((()=>(g.current=!0,()=>{g.current=!1})),[]);const m=k.useCallback((()=>{if("function"==typeof l.current&&(l.current(),l.current=null),o.current&&r.current)if(a.current){const e=a.current(o.current,r.current,p);l.current=e}else p()}),[p,a]),I=k.useCallback((e=>{o.current=e,m()}),[m]),f=k.useCallback((e=>{r.current=e,m()}),[m]),y=k.useMemo((()=>({reference:o,floating:r})),[]);return k.useMemo((()=>({...c,update:p,refs:y,reference:I,floating:f})),[c,p,y,I,f])}const vi=e=>{const{element:t,padding:i}=e;return{name:"arrow",options:e,fn(e){return n=t,Object.prototype.hasOwnProperty.call(n,"current")?null!=t.current?Dt({element:t.current,padding:i}).fn(e):{}:t?Dt({element:t,padding:i}).fn(e):{};var n}}};function Li(e){const[t,i]=(0,k.useState)(void 0);return ce((()=>{if(e){i({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver((t=>{if(!Array.isArray(t))return;if(!t.length)return;const n=t[0];let s,o;if("borderBoxSize"in n){const e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,o=t.blockSize}else s=e.offsetWidth,o=e.offsetHeight;i({width:s,height:o})}));return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}i(void 0)}),[e]),t}const ji="Popper",[Ni,Di]=R(ji),[Ei,ki]=Ni(ji),Zi=e=>{const{__scopePopper:t,children:i}=e,[n,s]=(0,k.useState)(null);return(0,k.createElement)(Ei,{scope:t,anchor:n,onAnchorChange:s},i)},Ti="PopperAnchor",Wi=(0,k.forwardRef)(((e,t)=>{const{__scopePopper:i,virtualRef:n,...s}=e,o=ki(Ti,i),r=(0,k.useRef)(null),a=O(t,r);return(0,k.useEffect)((()=>{o.onAnchorChange((null==n?void 0:n.current)||r.current)})),n?null:(0,k.createElement)(X.div,(0,W().A)({},s,{ref:a}))})),zi="PopperContent",[Pi,Yi]=Ni(zi),[Oi,Ri]=Ni(zi,{hasParent:!1,positionUpdateFns:new Set}),Gi=(0,k.forwardRef)(((e,t)=>{var i,n,s,o,r,a,l,c;const{__scopePopper:d,side:u="bottom",sideOffset:h=0,align:p="center",alignOffset:g=0,arrowPadding:m=0,collisionBoundary:I=[],collisionPadding:f=0,sticky:y="partial",hideWhenDetached:b=!1,avoidCollisions:w=!0,onPlaced:C,...M}=e,x=ki(zi,d),[A,S]=(0,k.useState)(null),v=O(t,(e=>S(e))),[L,j]=(0,k.useState)(null),N=Li(L),D=null!==(i=null==N?void 0:N.width)&&void 0!==i?i:0,E=null!==(n=null==N?void 0:N.height)&&void 0!==n?n:0,Z=u+("center"!==p?"-"+p:""),T="number"==typeof f?f:{top:0,right:0,bottom:0,left:0,...f},W=Array.isArray(I)?I:[I],z=W.length>0,P={padding:T,boundary:W.filter(Bi),altBoundary:z},{reference:Y,floating:R,strategy:G,x:_,y:B,placement:J,middlewareData:H,update:V}=Si({strategy:"fixed",placement:Z,whileElementsMounted:Ci,middleware:[Ji(),Gt({mainAxis:h+E,alignmentAxis:g}),w?Bt({mainAxis:!0,crossAxis:!1,limiter:"partial"===y?Jt():void 0,...P}):void 0,L?vi({element:L,padding:m}):void 0,w?Pt({...P}):void 0,Ht({...P,apply:({elements:e,availableWidth:t,availableHeight:i})=>{e.floating.style.setProperty("--radix-popper-available-width",`${t}px`),e.floating.style.setProperty("--radix-popper-available-height",`${i}px`)}}),Hi({arrowWidth:D,arrowHeight:E}),b?Rt({strategy:"referenceHidden"}):void 0].filter(_i)});ce((()=>{Y(x.anchor)}),[Y,x.anchor]);const U=null!==_&&null!==B,[F,Q]=Vi(J),$=K(C);ce((()=>{U&&(null==$||$())}),[U,$]);const q=null===(s=H.arrow)||void 0===s?void 0:s.x,ee=null===(o=H.arrow)||void 0===o?void 0:o.y,te=0!==(null===(r=H.arrow)||void 0===r?void 0:r.centerOffset),[ie,ne]=(0,k.useState)();ce((()=>{A&&ne(window.getComputedStyle(A).zIndex)}),[A]);const{hasParent:se,positionUpdateFns:oe}=Ri(zi,d),re=!se;(0,k.useLayoutEffect)((()=>{if(!re)return oe.add(V),()=>{oe.delete(V)}}),[re,oe,V]),ce((()=>{re&&U&&Array.from(oe).reverse().forEach((e=>requestAnimationFrame(e)))}),[re,U,oe]);const ae={"data-side":F,"data-align":Q,...M,ref:v,style:{...M.style,animation:U?void 0:"none",opacity:null!==(a=H.hide)&&void 0!==a&&a.referenceHidden?0:void 0}};return(0,k.createElement)("div",{ref:R,"data-radix-popper-content-wrapper":"",style:{position:G,left:0,top:0,transform:U?`translate3d(${Math.round(_)}px, ${Math.round(B)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:ie,"--radix-popper-transform-origin":[null===(l=H.transformOrigin)||void 0===l?void 0:l.x,null===(c=H.transformOrigin)||void 0===c?void 0:c.y].join(" ")},dir:e.dir},(0,k.createElement)(Pi,{scope:d,placedSide:F,onArrowChange:j,arrowX:q,arrowY:ee,shouldHideArrow:te},re?(0,k.createElement)(Oi,{scope:d,hasParent:!0,positionUpdateFns:oe},(0,k.createElement)(X.div,ae)):(0,k.createElement)(X.div,ae)))}));function _i(e){return void 0!==e}function Bi(e){return null!==e}const Ji=()=>({name:"anchorCssProperties",fn(e){const{rects:t,elements:i}=e,{width:n,height:s}=t.reference;return i.floating.style.setProperty("--radix-popper-anchor-width",`${n}px`),i.floating.style.setProperty("--radix-popper-anchor-height",`${s}px`),{}}}),Hi=e=>({name:"transformOrigin",options:e,fn(t){var i,n,s,o,r;const{placement:a,rects:l,middlewareData:c}=t,d=0!==(null===(i=c.arrow)||void 0===i?void 0:i.centerOffset),u=d?0:e.arrowWidth,h=d?0:e.arrowHeight,[p,g]=Vi(a),m={start:"0%",center:"50%",end:"100%"}[g],I=(null!==(n=null===(s=c.arrow)||void 0===s?void 0:s.x)&&void 0!==n?n:0)+u/2,f=(null!==(o=null===(r=c.arrow)||void 0===r?void 0:r.y)&&void 0!==o?o:0)+h/2;let y="",b="";return"bottom"===p?(y=d?m:`${I}px`,b=-h+"px"):"top"===p?(y=d?m:`${I}px`,b=`${l.floating.height+h}px`):"right"===p?(y=-h+"px",b=d?m:`${f}px`):"left"===p&&(y=`${l.floating.width+h}px`,b=d?m:`${f}px`),{data:{x:y,y:b}}}});function Vi(e){const[t,i="center"]=e.split("-");return[t,i]}const Ui=Zi,Xi=Wi,Fi=Gi,Ki="rovingFocusGroup.onEntryFocus",Qi={bubbles:!1,cancelable:!0},$i="RovingFocusGroup",[qi,en,tn]=U($i),[nn,sn]=R($i,[tn]),[on,rn]=nn($i),an=(0,k.forwardRef)(((e,t)=>(0,k.createElement)(qi.Provider,{scope:e.__scopeRovingFocusGroup},(0,k.createElement)(qi.Slot,{scope:e.__scopeRovingFocusGroup},(0,k.createElement)(ln,(0,W().A)({},e,{ref:t})))))),ln=(0,k.forwardRef)(((e,t)=>{const{__scopeRovingFocusGroup:i,orientation:n,loop:s=!1,dir:o,currentTabStopId:r,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,...d}=e,u=(0,k.useRef)(null),h=O(t,u),p=it(o),[g=null,m]=he({prop:r,defaultProp:a,onChange:l}),[I,f]=(0,k.useState)(!1),y=K(c),b=en(i),w=(0,k.useRef)(!1),[C,M]=(0,k.useState)(0);return(0,k.useEffect)((()=>{const e=u.current;if(e)return e.addEventListener(Ki,y),()=>e.removeEventListener(Ki,y)}),[y]),(0,k.createElement)(on,{scope:i,orientation:n,dir:p,loop:s,currentTabStopId:g,onItemFocus:(0,k.useCallback)((e=>m(e)),[m]),onItemShiftTab:(0,k.useCallback)((()=>f(!0)),[]),onFocusableItemAdd:(0,k.useCallback)((()=>M((e=>e+1))),[]),onFocusableItemRemove:(0,k.useCallback)((()=>M((e=>e-1))),[])},(0,k.createElement)(X.div,(0,W().A)({tabIndex:I||0===C?-1:0,"data-orientation":n},d,{ref:h,style:{outline:"none",...e.style},onMouseDown:P(e.onMouseDown,(()=>{w.current=!0})),onFocus:P(e.onFocus,(e=>{const t=!w.current;if(e.target===e.currentTarget&&t&&!I){const t=new CustomEvent(Ki,Qi);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=b().filter((e=>e.focusable));hn([e.find((e=>e.active)),e.find((e=>e.id===g)),...e].filter(Boolean).map((e=>e.ref.current)))}}w.current=!1})),onBlur:P(e.onBlur,(()=>f(!1)))})))})),cn="RovingFocusGroupItem",dn=(0,k.forwardRef)(((e,t)=>{const{__scopeRovingFocusGroup:i,focusable:n=!0,active:s=!1,tabStopId:o,...r}=e,a=yt(),l=o||a,c=rn(cn,i),d=c.currentTabStopId===l,u=en(i),{onFocusableItemAdd:h,onFocusableItemRemove:p}=c;return(0,k.useEffect)((()=>{if(n)return h(),()=>p()}),[n,h,p]),(0,k.createElement)(qi.ItemSlot,{scope:i,id:l,focusable:n,active:s},(0,k.createElement)(X.span,(0,W().A)({tabIndex:d?0:-1,"data-orientation":c.orientation},r,{ref:t,onMouseDown:P(e.onMouseDown,(e=>{n?c.onItemFocus(l):e.preventDefault()})),onFocus:P(e.onFocus,(()=>c.onItemFocus(l))),onKeyDown:P(e.onKeyDown,(e=>{if("Tab"===e.key&&e.shiftKey)return void c.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,i){const n=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,i);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(n)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)?void 0:un[n]}(e,c.orientation,c.dir);if(void 0!==t){e.preventDefault();let s=u().filter((e=>e.focusable)).map((e=>e.ref.current));if("last"===t)s.reverse();else if("prev"===t||"next"===t){"prev"===t&&s.reverse();const o=s.indexOf(e.currentTarget);s=c.loop?(n=o+1,(i=s).map(((e,t)=>i[(n+t)%i.length]))):s.slice(o+1)}setTimeout((()=>hn(s)))}var i,n}))})))})),un={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function hn(e){const t=document.activeElement;for(const i of e){if(i===t)return;if(i.focus(),document.activeElement!==t)return}}const pn=an,gn=dn;var mn=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},In=new WeakMap,fn=new WeakMap,yn={},bn=0,wn=function(e){return e&&(e.host||wn(e.parentNode))},Cn=function(e,t,i,n){var s=function(e,t){return t.map((function(t){if(e.contains(t))return t;var i=wn(t);return i&&e.contains(i)?i:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)})).filter((function(e){return Boolean(e)}))}(t,Array.isArray(e)?e:[e]);yn[i]||(yn[i]=new WeakMap);var o=yn[i],r=[],a=new Set,l=new Set(s),c=function(e){e&&!a.has(e)&&(a.add(e),c(e.parentNode))};s.forEach(c);var d=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,(function(e){if(a.has(e))d(e);else try{var t=e.getAttribute(n),s=null!==t&&"false"!==t,l=(In.get(e)||0)+1,c=(o.get(e)||0)+1;In.set(e,l),o.set(e,c),r.push(e),1===l&&s&&fn.set(e,!0),1===c&&e.setAttribute(i,"true"),s||e.setAttribute(n,"true")}catch(wt){console.error("aria-hidden: cannot operate on ",e,wt)}}))};return d(t),a.clear(),bn++,function(){r.forEach((function(e){var t=In.get(e)-1,s=o.get(e)-1;In.set(e,t),o.set(e,s),t||(fn.has(e)||e.removeAttribute(n),fn.delete(e)),s||e.removeAttribute(i)})),--bn||(In=new WeakMap,In=new WeakMap,fn=new WeakMap,yn={})}},Mn=function(e,t,i){void 0===i&&(i="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=t||mn(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),Cn(n,s,i,"aria-hidden")):function(){return null}},xn=()=>i(331635),An="right-scroll-bar-position",Sn="width-before-scroll-bar";function vn(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var Ln="undefined"!=typeof window?k.useLayoutEffect:k.useEffect,jn=new WeakMap;function Nn(e,t){var i=function(e,t){var i=(0,k.useState)((function(){return{value:e,callback:t,facade:{get current(){return i.value},set current(e){var t=i.value;t!==e&&(i.value=e,i.callback(e,t))}}}}))[0];return i.callback=t,i.facade}(t||null,(function(t){return e.forEach((function(e){return vn(e,t)}))}));return Ln((function(){var t=jn.get(i);if(t){var n=new Set(t),s=new Set(e),o=i.current;n.forEach((function(e){s.has(e)||vn(e,null)})),s.forEach((function(e){n.has(e)||vn(e,o)}))}jn.set(i,e)}),[e]),i}function Dn(e){return e}function En(e,t){void 0===t&&(t=Dn);var i=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:e},useMedium:function(e){var s=t(e,n);return i.push(s),function(){i=i.filter((function(e){return e!==s}))}},assignSyncMedium:function(e){for(n=!0;i.length;){var t=i;i=[],t.forEach(e)}i={push:function(t){return e(t)},filter:function(){return i}}},assignMedium:function(e){n=!0;var t=[];if(i.length){var s=i;i=[],s.forEach(e),t=i}var o=function(){var i=t;t=[],i.forEach(e)},r=function(){return Promise.resolve().then(o)};r(),i={push:function(e){t.push(e),r()},filter:function(e){return t=t.filter(e),i}}}};return s}function kn(e){void 0===e&&(e={});var t=En(null);return t.options=(0,xn().__assign)({async:!0,ssr:!1},e),t}var Zn=kn(),Tn=function(){},Wn=k.forwardRef((function(e,t){var i=k.useRef(null),n=k.useState({onScrollCapture:Tn,onWheelCapture:Tn,onTouchMoveCapture:Tn}),s=n[0],o=n[1],r=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,u=e.shards,h=e.sideCar,p=e.noIsolation,g=e.inert,m=e.allowPinchZoom,I=e.as,f=void 0===I?"div":I,y=(0,xn().__rest)(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),b=h,w=Nn([i,t]),C=(0,xn().__assign)((0,xn().__assign)({},y),s);return k.createElement(k.Fragment,null,d&&k.createElement(b,{sideCar:Zn,removeScrollBar:c,shards:u,noIsolation:p,inert:g,setCallbacks:o,allowPinchZoom:!!m,lockRef:i}),r?k.cloneElement(k.Children.only(a),(0,xn().__assign)((0,xn().__assign)({},C),{ref:w})):k.createElement(f,(0,xn().__assign)({},C,{className:l,ref:w}),a))}));Wn.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Wn.classNames={fullWidth:Sn,zeroRight:An};var zn,Pn=function(e){var t=e.sideCar,i=(0,xn().__rest)(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return k.createElement(n,(0,xn().__assign)({},i))};function Yn(e,t){return e.useMedium(t),Pn}Pn.isSideCarExport=!0;function On(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=zn||i.nc;return t&&e.setAttribute("nonce",t),e}var Rn=function(){var e=0,t=null;return{add:function(i){var n,s;0==e&&(t=On())&&(s=i,(n=t).styleSheet?n.styleSheet.cssText=s:n.appendChild(document.createTextNode(s)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Gn=function(){var e,t=(e=Rn(),function(t,i){k.useEffect((function(){return e.add(t),function(){e.remove()}}),[t&&i])});return function(e){var i=e.styles,n=e.dynamic;return t(i,n),null}},_n={left:0,top:0,right:0,gap:0},Bn=function(e){return parseInt(e||"",10)||0},Jn=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return _n;var t=function(e){var t=window.getComputedStyle(document.body),i=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],s=t["padding"===e?"paddingRight":"marginRight"];return[Bn(i),Bn(n),Bn(s)]}(e),i=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-i+t[2]-t[0])}},Hn=Gn(),Vn="data-scroll-locked",Un=function(e,t,i,n){var s=e.left,o=e.top,r=e.right,a=e.gap;return void 0===i&&(i="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(a,"px ").concat(n,";\n  }\n  body[").concat(Vn,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===i&&"\n    padding-left: ".concat(s,"px;\n    padding-top: ").concat(o,"px;\n    padding-right: ").concat(r,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(n,";\n    "),"padding"===i&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(An," {\n    right: ").concat(a,"px ").concat(n,";\n  }\n  \n  .").concat(Sn," {\n    margin-right: ").concat(a,"px ").concat(n,";\n  }\n  \n  .").concat(An," .").concat(An," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(Sn," .").concat(Sn," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(Vn,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},Xn=function(){var e=parseInt(document.body.getAttribute(Vn)||"0",10);return isFinite(e)?e:0},Fn=function(e){var t=e.noRelative,i=e.noImportant,n=e.gapMode,s=void 0===n?"margin":n;k.useEffect((function(){return document.body.setAttribute(Vn,(Xn()+1).toString()),function(){var e=Xn()-1;e<=0?document.body.removeAttribute(Vn):document.body.setAttribute(Vn,e.toString())}}),[]);var o=k.useMemo((function(){return Jn(s)}),[s]);return k.createElement(Hn,{styles:Un(o,!t,s,i?"":"!important")})},Kn=!1;if("undefined"!=typeof window)try{var Qn=Object.defineProperty({},"passive",{get:function(){return Kn=!0,!0}});window.addEventListener("test",Qn,Qn),window.removeEventListener("test",Qn,Qn)}catch(tm){Kn=!1}var $n=!!Kn&&{passive:!1},qn=function(e,t){var i=window.getComputedStyle(e);return"hidden"!==i[t]&&!(i.overflowY===i.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===i[t])},es=function(e,t){var i=t;do{if("undefined"!=typeof ShadowRoot&&i instanceof ShadowRoot&&(i=i.host),ts(e,i)){var n=is(e,i);if(n[1]>n[2])return!0}i=i.parentNode}while(i&&i!==document.body);return!1},ts=function(e,t){return"v"===e?function(e){return qn(e,"overflowY")}(t):function(e){return qn(e,"overflowX")}(t)},is=function(e,t){return"v"===e?[(i=t).scrollTop,i.scrollHeight,i.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var i},ns=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ss=function(e){return[e.deltaX,e.deltaY]},os=function(e){return e&&"current"in e?e.current:e},rs=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},as=0,ls=[];const cs=Yn(Zn,(function(e){var t=k.useRef([]),i=k.useRef([0,0]),n=k.useRef(),s=k.useState(as++)[0],o=k.useState((function(){return Gn()}))[0],r=k.useRef(e);k.useEffect((function(){r.current=e}),[e]),k.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var t=(0,xn().__spreadArray)([e.lockRef.current],(e.shards||[]).map(os),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(s))})),function(){document.body.classList.remove("block-interactivity-".concat(s)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(s))}))}}}),[e.inert,e.lockRef.current,e.shards]);var a=k.useCallback((function(e,t){if("touches"in e&&2===e.touches.length)return!r.current.allowPinchZoom;var s,o=ns(e),a=i.current,l="deltaX"in e?e.deltaX:a[0]-o[0],c="deltaY"in e?e.deltaY:a[1]-o[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var h=es(u,d);if(!h)return!0;if(h?s=u:(s="v"===u?"h":"v",h=es(u,d)),!h)return!1;if(!n.current&&"changedTouches"in e&&(l||c)&&(n.current=s),!s)return!0;var p=n.current||s;return function(e,t,i,n,s){var o=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),r=o*n,a=i.target,l=t.contains(a),c=!1,d=r>0,u=0,h=0;do{var p=is(e,a),g=p[0],m=p[1]-p[2]-o*g;(g||m)&&ts(e,a)&&(u+=m,h+=g),a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(d&&(s&&0===u||!s&&r>u)||!d&&(s&&0===h||!s&&-r>h))&&(c=!0),c}(p,t,e,"h"===p?l:c,!0)}),[]),l=k.useCallback((function(e){var i=e;if(ls.length&&ls[ls.length-1]===o){var n="deltaY"in i?ss(i):ns(i),s=t.current.filter((function(e){return e.name===i.type&&e.target===i.target&&function(e,t){return e[0]===t[0]&&e[1]===t[1]}(e.delta,n)}))[0];if(s&&s.should)i.cancelable&&i.preventDefault();else if(!s){var l=(r.current.shards||[]).map(os).filter(Boolean).filter((function(e){return e.contains(i.target)}));(l.length>0?a(i,l[0]):!r.current.noIsolation)&&i.cancelable&&i.preventDefault()}}}),[]),c=k.useCallback((function(e,i,n,s){var o={name:e,delta:i,target:n,should:s};t.current.push(o),setTimeout((function(){t.current=t.current.filter((function(e){return e!==o}))}),1)}),[]),d=k.useCallback((function(e){i.current=ns(e),n.current=void 0}),[]),u=k.useCallback((function(t){c(t.type,ss(t),t.target,a(t,e.lockRef.current))}),[]),h=k.useCallback((function(t){c(t.type,ns(t),t.target,a(t,e.lockRef.current))}),[]);k.useEffect((function(){return ls.push(o),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:h}),document.addEventListener("wheel",l,$n),document.addEventListener("touchmove",l,$n),document.addEventListener("touchstart",d,$n),function(){ls=ls.filter((function(e){return e!==o})),document.removeEventListener("wheel",l,$n),document.removeEventListener("touchmove",l,$n),document.removeEventListener("touchstart",d,$n)}}),[]);var p=e.removeScrollBar,g=e.inert;return k.createElement(k.Fragment,null,g?k.createElement(o,{styles:rs(s)}):null,p?k.createElement(Fn,{gapMode:"margin"}):null)}));var ds=k.forwardRef((function(e,t){return k.createElement(Wn,(0,xn().__assign)({},e,{ref:t,sideCar:cs}))}));ds.classNames=Wn.classNames;const us=ds,hs=["Enter"," "],ps=["ArrowUp","PageDown","End"],gs=["ArrowDown","PageUp","Home",...ps],ms={ltr:[...hs,"ArrowRight"],rtl:[...hs,"ArrowLeft"]},Is={ltr:["ArrowLeft"],rtl:["ArrowRight"]},fs="Menu",[ys,bs,ws]=U(fs),[Cs,Ms]=R(fs,[ws,Di,sn]),xs=Di(),As=sn(),[Ss,vs]=Cs(fs),[Ls,js]=Cs(fs),Ns=e=>{const{__scopeMenu:t,open:i=!1,children:n,dir:s,onOpenChange:o,modal:r=!0}=e,a=xs(t),[l,c]=(0,k.useState)(null),d=(0,k.useRef)(!1),u=K(o),h=it(s);return(0,k.useEffect)((()=>{const e=()=>{d.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>d.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}}),[]),(0,k.createElement)(Ui,a,(0,k.createElement)(Ss,{scope:t,open:i,onOpenChange:u,content:l,onContentChange:c},(0,k.createElement)(Ls,{scope:t,onClose:(0,k.useCallback)((()=>u(!1)),[u]),isUsingKeyboardRef:d,dir:h,modal:r},n)))},Ds=(0,k.forwardRef)(((e,t)=>{const{__scopeMenu:i,...n}=e,s=xs(i);return(0,k.createElement)(Xi,(0,W().A)({},s,n,{ref:t}))})),Es="MenuPortal",[ks,Zs]=Cs(Es,{forceMount:void 0}),Ts=e=>{const{__scopeMenu:t,forceMount:i,children:n,container:s}=e,o=vs(Es,t);return(0,k.createElement)(ks,{scope:t,forceMount:i},(0,k.createElement)(de,{present:i||o.open},(0,k.createElement)(le,{asChild:!0,container:s},n)))},Ws="MenuContent",[zs,Ps]=Cs(Ws),Ys=(0,k.forwardRef)(((e,t)=>{const i=Zs(Ws,e.__scopeMenu),{forceMount:n=i.forceMount,...s}=e,o=vs(Ws,e.__scopeMenu),r=js(Ws,e.__scopeMenu);return(0,k.createElement)(ys.Provider,{scope:e.__scopeMenu},(0,k.createElement)(de,{present:n||o.open},(0,k.createElement)(ys.Slot,{scope:e.__scopeMenu},r.modal?(0,k.createElement)(Os,(0,W().A)({},s,{ref:t})):(0,k.createElement)(Rs,(0,W().A)({},s,{ref:t})))))})),Os=(0,k.forwardRef)(((e,t)=>{const i=vs(Ws,e.__scopeMenu),n=(0,k.useRef)(null),s=O(t,n);return(0,k.useEffect)((()=>{const e=n.current;if(e)return Mn(e)}),[]),(0,k.createElement)(Gs,(0,W().A)({},e,{ref:s,trapFocus:i.open,disableOutsidePointerEvents:i.open,disableOutsideScroll:!0,onFocusOutside:P(e.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1}),onDismiss:()=>i.onOpenChange(!1)}))})),Rs=(0,k.forwardRef)(((e,t)=>{const i=vs(Ws,e.__scopeMenu);return(0,k.createElement)(Gs,(0,W().A)({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>i.onOpenChange(!1)}))})),Gs=(0,k.forwardRef)(((e,t)=>{const{__scopeMenu:i,loop:n=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:r,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:h,onDismiss:p,disableOutsideScroll:g,...m}=e,I=vs(Ws,i),f=js(Ws,i),y=xs(i),b=As(i),w=bs(i),[C,M]=(0,k.useState)(null),x=(0,k.useRef)(null),A=O(t,x,I.onContentChange),S=(0,k.useRef)(0),v=(0,k.useRef)(""),L=(0,k.useRef)(0),j=(0,k.useRef)(null),N=(0,k.useRef)("right"),D=(0,k.useRef)(0),E=g?us:k.Fragment,Z=g?{as:_,allowPinchZoom:!0}:void 0,T=e=>{var t,i;const n=v.current+e,s=w().filter((e=>!e.disabled)),o=document.activeElement,r=null===(t=s.find((e=>e.ref.current===o)))||void 0===t?void 0:t.textValue,a=function(e,t,i){const n=t.length>1&&Array.from(t).every((e=>e===t[0])),s=n?t[0]:t,o=i?e.indexOf(i):-1;let r=(a=e,l=Math.max(o,0),a.map(((e,t)=>a[(l+t)%a.length])));var a,l;1===s.length&&(r=r.filter((e=>e!==i)));const c=r.find((e=>e.toLowerCase().startsWith(s.toLowerCase())));return c!==i?c:void 0}(s.map((e=>e.textValue)),n,r),l=null===(i=s.find((e=>e.textValue===a)))||void 0===i?void 0:i.ref.current;!function e(t){v.current=t,window.clearTimeout(S.current),""!==t&&(S.current=window.setTimeout((()=>e("")),1e3))}(n),l&&setTimeout((()=>l.focus()))};(0,k.useEffect)((()=>()=>window.clearTimeout(S.current)),[]),st();const z=(0,k.useCallback)((e=>{var t,i;return N.current===(null===(t=j.current)||void 0===t?void 0:t.side)&&function(e,t){if(!t)return!1;const i={x:e.clientX,y:e.clientY};return function(e,t){const{x:i,y:n}=e;let s=!1;for(let o=0,r=t.length-1;o<t.length;r=o++){const e=t[o].x,a=t[o].y,l=t[r].x,c=t[r].y;a>n!=c>n&&i<(l-e)*(n-a)/(c-a)+e&&(s=!s)}return s}(i,t)}(e,null===(i=j.current)||void 0===i?void 0:i.area)}),[]);return(0,k.createElement)(zs,{scope:i,searchRef:v,onItemEnter:(0,k.useCallback)((e=>{z(e)&&e.preventDefault()}),[z]),onItemLeave:(0,k.useCallback)((e=>{var t;z(e)||(null===(t=x.current)||void 0===t||t.focus(),M(null))}),[z]),onTriggerLeave:(0,k.useCallback)((e=>{z(e)&&e.preventDefault()}),[z]),pointerGraceTimerRef:L,onPointerGraceIntentChange:(0,k.useCallback)((e=>{j.current=e}),[])},(0,k.createElement)(E,Z,(0,k.createElement)(ct,{asChild:!0,trapped:s,onMountAutoFocus:P(o,(e=>{var t;e.preventDefault(),null===(t=x.current)||void 0===t||t.focus()})),onUnmountAutoFocus:r},(0,k.createElement)(ie,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:h,onDismiss:p},(0,k.createElement)(pn,(0,W().A)({asChild:!0},b,{dir:f.dir,orientation:"vertical",loop:n,currentTabStopId:C,onCurrentTabStopIdChange:M,onEntryFocus:P(l,(e=>{f.isUsingKeyboardRef.current||e.preventDefault()}))}),(0,k.createElement)(Fi,(0,W().A)({role:"menu","aria-orientation":"vertical","data-state":co(I.open),"data-radix-menu-content":"",dir:f.dir},y,m,{ref:A,style:{outline:"none",...m.style},onKeyDown:P(m.onKeyDown,(e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,i=e.ctrlKey||e.altKey||e.metaKey,n=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!i&&n&&T(e.key));const s=x.current;if(e.target!==s)return;if(!gs.includes(e.key))return;e.preventDefault();const o=w().filter((e=>!e.disabled)).map((e=>e.ref.current));ps.includes(e.key)&&o.reverse(),function(e){const t=document.activeElement;for(const i of e){if(i===t)return;if(i.focus(),document.activeElement!==t)return}}(o)})),onBlur:P(e.onBlur,(e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(S.current),v.current="")})),onPointerMove:P(e.onPointerMove,po((e=>{const t=e.target,i=D.current!==e.clientX;if(e.currentTarget.contains(t)&&i){const t=e.clientX>D.current?"right":"left";N.current=t,D.current=e.clientX}})))})))))))})),_s=(0,k.forwardRef)(((e,t)=>{const{__scopeMenu:i,...n}=e;return(0,k.createElement)(X.div,(0,W().A)({role:"group"},n,{ref:t}))})),Bs="MenuItem",Js="menu.itemSelect",Hs=(0,k.forwardRef)(((e,t)=>{const{disabled:i=!1,onSelect:n,...s}=e,o=(0,k.useRef)(null),r=js(Bs,e.__scopeMenu),a=Ps(Bs,e.__scopeMenu),l=O(t,o),c=(0,k.useRef)(!1);return(0,k.createElement)(Vs,(0,W().A)({},s,{ref:l,disabled:i,onClick:P(e.onClick,(()=>{const e=o.current;if(!i&&e){const t=new CustomEvent(Js,{bubbles:!0,cancelable:!0});e.addEventListener(Js,(e=>null==n?void 0:n(e)),{once:!0}),F(e,t),t.defaultPrevented?c.current=!1:r.onClose()}})),onPointerDown:t=>{var i;null===(i=e.onPointerDown)||void 0===i||i.call(e,t),c.current=!0},onPointerUp:P(e.onPointerUp,(e=>{var t;c.current||null===(t=e.currentTarget)||void 0===t||t.click()})),onKeyDown:P(e.onKeyDown,(e=>{const t=""!==a.searchRef.current;i||t&&" "===e.key||hs.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())}))}))})),Vs=(0,k.forwardRef)(((e,t)=>{const{__scopeMenu:i,disabled:n=!1,textValue:s,...o}=e,r=Ps(Bs,i),a=As(i),l=(0,k.useRef)(null),c=O(t,l),[d,u]=(0,k.useState)(!1),[h,p]=(0,k.useState)("");return(0,k.useEffect)((()=>{const e=l.current;var t;e&&p((null!==(t=e.textContent)&&void 0!==t?t:"").trim())}),[o.children]),(0,k.createElement)(ys.ItemSlot,{scope:i,disabled:n,textValue:null!=s?s:h},(0,k.createElement)(gn,(0,W().A)({asChild:!0},a,{focusable:!n}),(0,k.createElement)(X.div,(0,W().A)({role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0},o,{ref:c,onPointerMove:P(e.onPointerMove,po((e=>{if(n)r.onItemLeave(e);else if(r.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus()}}))),onPointerLeave:P(e.onPointerLeave,po((e=>r.onItemLeave(e)))),onFocus:P(e.onFocus,(()=>u(!0))),onBlur:P(e.onBlur,(()=>u(!1)))}))))})),Us=(0,k.forwardRef)(((e,t)=>{const{checked:i=!1,onCheckedChange:n,...s}=e;return(0,k.createElement)($s,{scope:e.__scopeMenu,checked:i},(0,k.createElement)(Hs,(0,W().A)({role:"menuitemcheckbox","aria-checked":uo(i)?"mixed":i},s,{ref:t,"data-state":ho(i),onSelect:P(s.onSelect,(()=>null==n?void 0:n(!!uo(i)||!i)),{checkForDefaultPrevented:!1})})))})),Xs="MenuRadioGroup",[Fs,Ks]=Cs(Xs,{value:void 0,onValueChange:()=>{}}),Qs="MenuItemIndicator",[$s,qs]=Cs(Qs,{checked:!1}),eo=(0,k.forwardRef)(((e,t)=>{const{__scopeMenu:i,forceMount:n,...s}=e,o=qs(Qs,i);return(0,k.createElement)(de,{present:n||uo(o.checked)||!0===o.checked},(0,k.createElement)(X.span,(0,W().A)({},s,{ref:t,"data-state":ho(o.checked)})))})),to="MenuSub",[io,no]=Cs(to),so=e=>{const{__scopeMenu:t,children:i,open:n=!1,onOpenChange:s}=e,o=vs(to,t),r=xs(t),[a,l]=(0,k.useState)(null),[c,d]=(0,k.useState)(null),u=K(s);return(0,k.useEffect)((()=>(!1===o.open&&u(!1),()=>u(!1))),[o.open,u]),(0,k.createElement)(Ui,r,(0,k.createElement)(Ss,{scope:t,open:n,onOpenChange:u,content:c,onContentChange:d},(0,k.createElement)(io,{scope:t,contentId:yt(),triggerId:yt(),trigger:a,onTriggerChange:l},i)))},oo="MenuSubTrigger",ro=(0,k.forwardRef)(((e,t)=>{const i=vs(oo,e.__scopeMenu),n=js(oo,e.__scopeMenu),s=no(oo,e.__scopeMenu),o=Ps(oo,e.__scopeMenu),r=(0,k.useRef)(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=o,c={__scopeMenu:e.__scopeMenu},d=(0,k.useCallback)((()=>{r.current&&window.clearTimeout(r.current),r.current=null}),[]);return(0,k.useEffect)((()=>d),[d]),(0,k.useEffect)((()=>{const e=a.current;return()=>{window.clearTimeout(e),l(null)}}),[a,l]),(0,k.createElement)(Ds,(0,W().A)({asChild:!0},c),(0,k.createElement)(Vs,(0,W().A)({id:s.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":s.contentId,"data-state":co(i.open)},e,{ref:Y(t,s.onTriggerChange),onClick:t=>{var n;null===(n=e.onClick)||void 0===n||n.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),i.open||i.onOpenChange(!0))},onPointerMove:P(e.onPointerMove,po((t=>{o.onItemEnter(t),t.defaultPrevented||e.disabled||i.open||r.current||(o.onPointerGraceIntentChange(null),r.current=window.setTimeout((()=>{i.onOpenChange(!0),d()}),100))}))),onPointerLeave:P(e.onPointerLeave,po((e=>{var t;d();const n=null===(t=i.content)||void 0===t?void 0:t.getBoundingClientRect();if(n){var s;const t=null===(s=i.content)||void 0===s?void 0:s.dataset.side,r="right"===t,l=r?-5:5,c=n[r?"left":"right"],d=n[r?"right":"left"];o.onPointerGraceIntentChange({area:[{x:e.clientX+l,y:e.clientY},{x:c,y:n.top},{x:d,y:n.top},{x:d,y:n.bottom},{x:c,y:n.bottom}],side:t}),window.clearTimeout(a.current),a.current=window.setTimeout((()=>o.onPointerGraceIntentChange(null)),300)}else{if(o.onTriggerLeave(e),e.defaultPrevented)return;o.onPointerGraceIntentChange(null)}}))),onKeyDown:P(e.onKeyDown,(t=>{const s=""!==o.searchRef.current;var r;e.disabled||s&&" "===t.key||ms[n.dir].includes(t.key)&&(i.onOpenChange(!0),null===(r=i.content)||void 0===r||r.focus(),t.preventDefault())}))})))})),ao="MenuSubContent",lo=(0,k.forwardRef)(((e,t)=>{const i=Zs(Ws,e.__scopeMenu),{forceMount:n=i.forceMount,...s}=e,o=vs(Ws,e.__scopeMenu),r=js(Ws,e.__scopeMenu),a=no(ao,e.__scopeMenu),l=(0,k.useRef)(null),c=O(t,l);return(0,k.createElement)(ys.Provider,{scope:e.__scopeMenu},(0,k.createElement)(de,{present:n||o.open},(0,k.createElement)(ys.Slot,{scope:e.__scopeMenu},(0,k.createElement)(Gs,(0,W().A)({id:a.contentId,"aria-labelledby":a.triggerId},s,{ref:c,align:"start",side:"rtl"===r.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;r.isUsingKeyboardRef.current&&(null===(t=l.current)||void 0===t||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:P(e.onFocusOutside,(e=>{e.target!==a.trigger&&o.onOpenChange(!1)})),onEscapeKeyDown:P(e.onEscapeKeyDown,(e=>{r.onClose(),e.preventDefault()})),onKeyDown:P(e.onKeyDown,(e=>{const t=e.currentTarget.contains(e.target),i=Is[r.dir].includes(e.key);var n;t&&i&&(o.onOpenChange(!1),null===(n=a.trigger)||void 0===n||n.focus(),e.preventDefault())}))})))))}));function co(e){return e?"open":"closed"}function uo(e){return"indeterminate"===e}function ho(e){return uo(e)?"indeterminate":e?"checked":"unchecked"}function po(e){return t=>"mouse"===t.pointerType?e(t):void 0}const go=Ns,mo=Ds,Io=Ts,fo=Ys,yo=_s,bo=Hs,wo=Us,Co=eo,Mo=so,xo=ro,Ao=lo,So="ContextMenu",[vo,Lo]=R(So,[Ms]),jo=Ms(),[No,Do]=vo(So),Eo=e=>{const{__scopeContextMenu:t,children:i,onOpenChange:n,dir:s,modal:o=!0}=e,[r,a]=(0,k.useState)(!1),l=jo(t),c=K(n),d=(0,k.useCallback)((e=>{a(e),c(e)}),[c]);return(0,k.createElement)(No,{scope:t,open:r,onOpenChange:d,modal:o},(0,k.createElement)(go,(0,W().A)({},l,{dir:s,open:r,onOpenChange:d,modal:o}),i))},ko="ContextMenuTrigger",Zo=(0,k.forwardRef)(((e,t)=>{const{__scopeContextMenu:i,disabled:n=!1,...s}=e,o=Do(ko,i),r=jo(i),a=(0,k.useRef)({x:0,y:0}),l=(0,k.useRef)({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),c=(0,k.useRef)(0),d=(0,k.useCallback)((()=>window.clearTimeout(c.current)),[]),u=e=>{a.current={x:e.clientX,y:e.clientY},o.onOpenChange(!0)};return(0,k.useEffect)((()=>d),[d]),(0,k.useEffect)((()=>{n&&d()}),[n,d]),(0,k.createElement)(k.Fragment,null,(0,k.createElement)(mo,(0,W().A)({},r,{virtualRef:l})),(0,k.createElement)(X.span,(0,W().A)({"data-state":o.open?"open":"closed","data-disabled":n?"":void 0},s,{ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:n?e.onContextMenu:P(e.onContextMenu,(e=>{d(),u(e),e.preventDefault()})),onPointerDown:n?e.onPointerDown:P(e.onPointerDown,Bo((e=>{d(),c.current=window.setTimeout((()=>u(e)),700)}))),onPointerMove:n?e.onPointerMove:P(e.onPointerMove,Bo(d)),onPointerCancel:n?e.onPointerCancel:P(e.onPointerCancel,Bo(d)),onPointerUp:n?e.onPointerUp:P(e.onPointerUp,Bo(d))})))})),To=e=>{const{__scopeContextMenu:t,...i}=e,n=jo(t);return(0,k.createElement)(Io,(0,W().A)({},n,i))},Wo="ContextMenuContent",zo=(0,k.forwardRef)(((e,t)=>{const{__scopeContextMenu:i,...n}=e,s=Do(Wo,i),o=jo(i),r=(0,k.useRef)(!1);return(0,k.createElement)(fo,(0,W().A)({},o,n,{ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:t=>{var i;null===(i=e.onCloseAutoFocus)||void 0===i||i.call(e,t),!t.defaultPrevented&&r.current&&t.preventDefault(),r.current=!1},onInteractOutside:t=>{var i;null===(i=e.onInteractOutside)||void 0===i||i.call(e,t),t.defaultPrevented||s.modal||(r.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))})),Po=(0,k.forwardRef)(((e,t)=>{const{__scopeContextMenu:i,...n}=e,s=jo(i);return(0,k.createElement)(yo,(0,W().A)({},s,n,{ref:t}))})),Yo=(0,k.forwardRef)(((e,t)=>{const{__scopeContextMenu:i,...n}=e,s=jo(i);return(0,k.createElement)(bo,(0,W().A)({},s,n,{ref:t}))})),Oo=(0,k.forwardRef)(((e,t)=>{const{__scopeContextMenu:i,...n}=e,s=jo(i);return(0,k.createElement)(wo,(0,W().A)({},s,n,{ref:t}))})),Ro=e=>{const{__scopeContextMenu:t,children:i,onOpenChange:n,open:s,defaultOpen:o}=e,r=jo(t),[a,l]=he({prop:s,defaultProp:o,onChange:n});return(0,k.createElement)(Mo,(0,W().A)({},r,{open:a,onOpenChange:l}),i)},Go=(0,k.forwardRef)(((e,t)=>{const{__scopeContextMenu:i,...n}=e,s=jo(i);return(0,k.createElement)(xo,(0,W().A)({},s,n,{ref:t}))})),_o=(0,k.forwardRef)(((e,t)=>{const{__scopeContextMenu:i,...n}=e,s=jo(i);return(0,k.createElement)(Ao,(0,W().A)({},s,n,{ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}));function Bo(e){return t=>"mouse"!==t.pointerType?e(t):void 0}const Jo=Eo,Ho=Zo,Vo=To,Uo=zo,Xo=Po,Fo=Yo,Ko=Oo,Qo=Ro,$o=Go,qo=_o;function er(e){return e.filter((e=>null!=e&&!1!==e))}function tr(e,...t){const i=er(t);return 0===i.length?null:{id:e,type:"group",checkbox:i.every((e=>"item"===e.type&&e.actionItem.checkbox)),disabled:i.every((e=>e.disabled)),readonlyOk:i.some((e=>e.readonlyOk)),children:i}}function ir(e,t,...i){const n=er(i);return 0===n.length?null:{id:e,type:"submenu",label:t,children:n,disabled:n.every((e=>e.disabled)),readonlyOk:n.some((e=>e.readonlyOk))}}function nr(e,t={}){const{readonlyOk:i=!0,disabled:n=!1}=t;return{id:e,type:"custom",disabled:n,readonlyOk:i}}function sr(e,t={}){if(!e)throw Error("No action item provided to menuItem");if(!e.label)throw Error("Trying to create menu item for action item that doesn't have a label");const{checked:i=!1,disabled:n=!1}=t;return{id:e.id,type:"item",actionItem:e,disabled:n,checked:i,readonlyOk:e.readonlyOk}}function or(e){const{selectedIds:t}=e;return t.map((t=>e.getShapeById(t))).filter((e=>!!e&&((!n().o4Y.is(e)||"binding"!==e.props.start.type)&&(!n().o4Y.is(e)||"binding"!==e.props.end.type))))}const rr=()=>{const e=(0,n().nme)();return(0,et().h)("threeStackableItems",(()=>or(e).length>2),[e])},ar=()=>{const e=(0,n().nme)();return(0,et().h)("allowGroup",(()=>or(e).length>1),[e])},lr=()=>{const e=(0,n().nme)();return(0,et().h)("allowUngroup",(()=>e.selectedIds.some((t=>"group"===e.getShapeById(t)?.type))),[])},cr="undefined"!=typeof window&&"navigator"in window&&Boolean(navigator.clipboard)&&Boolean(navigator.clipboard.read),dr=(e,t,i)=>e.meta?.geo?"geo"===t&&i===e.meta?.geo:t===e.id;var ur=()=>i(875954);const hr="Dialog",[pr,gr]=R(hr),[mr,Ir]=pr(hr),fr=e=>{const{__scopeDialog:t,children:i,open:n,defaultOpen:s,onOpenChange:o,modal:r=!0}=e,a=(0,k.useRef)(null),l=(0,k.useRef)(null),[c=!1,d]=he({prop:n,defaultProp:s,onChange:o});return(0,k.createElement)(mr,{scope:t,triggerRef:a,contentRef:l,contentId:yt(),titleId:yt(),descriptionId:yt(),open:c,onOpenChange:d,onOpenToggle:(0,k.useCallback)((()=>d((e=>!e))),[d]),modal:r},i)},yr="DialogPortal",[br,wr]=pr(yr,{forceMount:void 0}),Cr=e=>{const{__scopeDialog:t,forceMount:i,children:n,container:s}=e,o=Ir(yr,t);return(0,k.createElement)(br,{scope:t,forceMount:i},k.Children.map(n,(e=>(0,k.createElement)(de,{present:i||o.open},(0,k.createElement)(le,{asChild:!0,container:s},e)))))},Mr="DialogOverlay",xr=(0,k.forwardRef)(((e,t)=>{const i=wr(Mr,e.__scopeDialog),{forceMount:n=i.forceMount,...s}=e,o=Ir(Mr,e.__scopeDialog);return o.modal?(0,k.createElement)(de,{present:n||o.open},(0,k.createElement)(Ar,(0,W().A)({},s,{ref:t}))):null})),Ar=(0,k.forwardRef)(((e,t)=>{const{__scopeDialog:i,...n}=e,s=Ir(Mr,i);return(0,k.createElement)(us,{as:_,allowPinchZoom:!0,shards:[s.contentRef]},(0,k.createElement)(X.div,(0,W().A)({"data-state":Tr(s.open)},n,{ref:t,style:{pointerEvents:"auto",...n.style}})))})),Sr="DialogContent",vr=(0,k.forwardRef)(((e,t)=>{const i=wr(Sr,e.__scopeDialog),{forceMount:n=i.forceMount,...s}=e,o=Ir(Sr,e.__scopeDialog);return(0,k.createElement)(de,{present:n||o.open},o.modal?(0,k.createElement)(Lr,(0,W().A)({},s,{ref:t})):(0,k.createElement)(jr,(0,W().A)({},s,{ref:t})))})),Lr=(0,k.forwardRef)(((e,t)=>{const i=Ir(Sr,e.__scopeDialog),n=(0,k.useRef)(null),s=O(t,i.contentRef,n);return(0,k.useEffect)((()=>{const e=n.current;if(e)return Mn(e)}),[]),(0,k.createElement)(Nr,(0,W().A)({},e,{ref:s,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:P(e.onCloseAutoFocus,(e=>{var t;e.preventDefault(),null===(t=i.triggerRef.current)||void 0===t||t.focus()})),onPointerDownOutside:P(e.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,i=0===t.button&&!0===t.ctrlKey;(2===t.button||i)&&e.preventDefault()})),onFocusOutside:P(e.onFocusOutside,(e=>e.preventDefault()))}))})),jr=(0,k.forwardRef)(((e,t)=>{const i=Ir(Sr,e.__scopeDialog),n=(0,k.useRef)(!1);return(0,k.createElement)(Nr,(0,W().A)({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var s,o;(null===(s=e.onCloseAutoFocus)||void 0===s||s.call(e,t),t.defaultPrevented)||(n.current||null===(o=i.triggerRef.current)||void 0===o||o.focus(),t.preventDefault());n.current=!1},onInteractOutside:t=>{var s,o;null===(s=e.onInteractOutside)||void 0===s||s.call(e,t),t.defaultPrevented||(n.current=!0);const r=t.target;(null===(o=i.triggerRef.current)||void 0===o?void 0:o.contains(r))&&t.preventDefault()}}))})),Nr=(0,k.forwardRef)(((e,t)=>{const{__scopeDialog:i,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...r}=e,a=Ir(Sr,i),l=O(t,(0,k.useRef)(null));return st(),(0,k.createElement)(k.Fragment,null,(0,k.createElement)(ct,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o},(0,k.createElement)(ie,(0,W().A)({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Tr(a.open)},r,{ref:l,onDismiss:()=>a.onOpenChange(!1)}))),!1)})),Dr="DialogTitle",Er=(0,k.forwardRef)(((e,t)=>{const{__scopeDialog:i,...n}=e,s=Ir(Dr,i);return(0,k.createElement)(X.h2,(0,W().A)({id:s.titleId},n,{ref:t}))})),kr="DialogClose",Zr=(0,k.forwardRef)(((e,t)=>{const{__scopeDialog:i,...n}=e,s=Ir(kr,i);return(0,k.createElement)(X.button,(0,W().A)({type:"button"},n,{ref:t,onClick:P(e.onClick,(()=>s.onOpenChange(!1)))}))}));function Tr(e){return e?"open":"closed"}const Wr="DialogTitleWarning",[zr,Pr]=function(e,t){const i=(0,k.createContext)(t);function n(e){const{children:t,...n}=e,s=(0,k.useMemo)((()=>n),Object.values(n));return(0,k.createElement)(i.Provider,{value:s},t)}return n.displayName=e+"Provider",[n,function(n){const s=(0,k.useContext)(i);if(s)return s;if(void 0!==t)return t;throw new Error(`\`${n}\` must be used within \`${e}\``)}]}(Wr,{contentName:Sr,titleName:Dr,docsSlug:"dialog"}),Yr=fr,Or=Cr,Rr=xr,Gr=vr;function _r(e){return(0,T.jsx)("svg",{width:16,height:16,viewBox:"0 0 16 16",...e,children:(0,T.jsxs)("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[(0,T.jsx)("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"currentColor"}),(0,T.jsx)("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"currentColor",children:(0,T.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})})}const Br=(0,k.forwardRef)((function({small:e,invertIcon:t,icon:i,className:n,...s},o){const r=Ql();return(0,T.jsx)("div",{ref:o,...s,className:qe()("tlui-icon",{"tlui-icon__small":e},n),style:{mask:`url(${r.icons[i]}) center 100% / 100% no-repeat`,WebkitMask:`url(${r.icons[i]}) center 100% / 100% no-repeat`,backgroundColor:"currentcolor",transform:t?"scale(-1, 1)":void 0}})}));const Jr="undefined"!=typeof window&&window.navigator.userAgent.toLowerCase().indexOf("mac")>-1,Hr=Jr?"":"Ctrl",Vr=Jr?"":"Alt";function Ur(e){return" "+e.split(",")[0].split("").map((e=>{const t=e.replace(/\$/g,Hr).replace(/\?/g,Vr).replace(/!/g,"");return t[0].toUpperCase()+t.slice(1)})).join("")}"undefined"==typeof process||"production"===process.env.NEXT_PUBLIC_VERCEL_ENV||"preview"===process.env.NEXT_PUBLIC_VERCEL_ENV&&process.env.NEXT_PUBLIC_VERCEL_URL;function Xr({children:e}){return(0,T.jsx)("kbd",{className:"tlui-kbd",children:(t=e,t.split(",")[0].split("").map((e=>{const t=e.replace(/\$/g,Hr).replace(/\?/g,Vr).replace(/!/g,"");return t[0].toUpperCase()+t.slice(1)}))).map(((e,t)=>(0,T.jsx)("span",{children:e},t)))});var t}const Fr=k.forwardRef((function({label:e,icon:t,invertIcon:i,iconLeft:n,smallIcon:s,kbd:o,isChecked:r=!1,type:a="normal",children:l,spinner:c,...d},u){const h=tc(),p=e?h(e):"";return(0,T.jsxs)("button",{ref:u,draggable:!1,type:"button",...d,title:d.title??p,className:qe()("tlui-button",`tlui-button__${a}`,d.className),children:[n&&(0,T.jsx)(Br,{icon:n,className:"tlui-icon-left",small:!0}),l,e&&(0,T.jsxs)("span",{draggable:!1,children:[p,r&&(0,T.jsx)(Br,{icon:"check"})]}),o&&(0,T.jsx)(Xr,{children:o}),t&&!c&&(0,T.jsx)(Br,{icon:t,small:!!e||s,invertIcon:i}),c&&(0,T.jsx)(_r,{})]})}));function Kr({className:e,children:t}){return(0,T.jsx)("div",{className:qe()("tlui-dialog__header",e),children:t})}function Qr({className:e,children:t}){return(0,T.jsx)(Er,{dir:"ltr",className:qe()("tlui-dialog__header__title",e),children:t})}function $r(){return(0,T.jsx)("div",{className:"tlui-dialog__header__close",children:(0,T.jsx)(Zr,{"data-wd":"dialog.close",dir:"ltr",asChild:!0,children:(0,T.jsx)(Fr,{"aria-label":"Close",onTouchEnd:e=>e.target.click(),children:(0,T.jsx)(Br,{small:!0,icon:"cross-2"})})})})}function qr({className:e,children:t,style:i}){return(0,T.jsx)("div",{className:qe()("tlui-dialog__body",e),style:i,children:t})}function ea({className:e,children:t}){return(0,T.jsx)("div",{className:qe()("tlui-dialog__footer",e),children:t})}const ta="DropdownMenu",[ia,na]=R(ta,[Ms]),sa=Ms(),[oa,ra]=ia(ta),aa=e=>{const{__scopeDropdownMenu:t,children:i,dir:n,open:s,defaultOpen:o,onOpenChange:r,modal:a=!0}=e,l=sa(t),c=(0,k.useRef)(null),[d=!1,u]=he({prop:s,defaultProp:o,onChange:r});return(0,k.createElement)(oa,{scope:t,triggerId:yt(),triggerRef:c,contentId:yt(),open:d,onOpenChange:u,onOpenToggle:(0,k.useCallback)((()=>u((e=>!e))),[u]),modal:a},(0,k.createElement)(go,(0,W().A)({},l,{open:d,onOpenChange:u,dir:n,modal:a}),i))},la="DropdownMenuTrigger",ca=(0,k.forwardRef)(((e,t)=>{const{__scopeDropdownMenu:i,disabled:n=!1,...s}=e,o=ra(la,i),r=sa(i);return(0,k.createElement)(mo,(0,W().A)({asChild:!0},r),(0,k.createElement)(X.button,(0,W().A)({type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":n?"":void 0,disabled:n},s,{ref:Y(t,o.triggerRef),onPointerDown:P(e.onPointerDown,(e=>{n||0!==e.button||!1!==e.ctrlKey||(o.onOpenToggle(),o.open||e.preventDefault())})),onKeyDown:P(e.onKeyDown,(e=>{n||(["Enter"," "].includes(e.key)&&o.onOpenToggle(),"ArrowDown"===e.key&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())}))})))})),da=e=>{const{__scopeDropdownMenu:t,...i}=e,n=sa(t);return(0,k.createElement)(Io,(0,W().A)({},n,i))},ua="DropdownMenuContent",ha=(0,k.forwardRef)(((e,t)=>{const{__scopeDropdownMenu:i,...n}=e,s=ra(ua,i),o=sa(i),r=(0,k.useRef)(!1);return(0,k.createElement)(fo,(0,W().A)({id:s.contentId,"aria-labelledby":s.triggerId},o,n,{ref:t,onCloseAutoFocus:P(e.onCloseAutoFocus,(e=>{var t;r.current||null===(t=s.triggerRef.current)||void 0===t||t.focus(),r.current=!1,e.preventDefault()})),onInteractOutside:P(e.onInteractOutside,(e=>{const t=e.detail.originalEvent,i=0===t.button&&!0===t.ctrlKey,n=2===t.button||i;s.modal&&!n||(r.current=!0)})),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))})),pa=(0,k.forwardRef)(((e,t)=>{const{__scopeDropdownMenu:i,...n}=e,s=sa(i);return(0,k.createElement)(yo,(0,W().A)({},s,n,{ref:t}))})),ga=(0,k.forwardRef)(((e,t)=>{const{__scopeDropdownMenu:i,...n}=e,s=sa(i);return(0,k.createElement)(bo,(0,W().A)({},s,n,{ref:t}))})),ma=(0,k.forwardRef)(((e,t)=>{const{__scopeDropdownMenu:i,...n}=e,s=sa(i);return(0,k.createElement)(wo,(0,W().A)({},s,n,{ref:t}))})),Ia=(0,k.forwardRef)(((e,t)=>{const{__scopeDropdownMenu:i,...n}=e,s=sa(i);return(0,k.createElement)(Co,(0,W().A)({},s,n,{ref:t}))})),fa=(0,k.forwardRef)(((e,t)=>{const{__scopeDropdownMenu:i,...n}=e,s=sa(i);return(0,k.createElement)(xo,(0,W().A)({},s,n,{ref:t}))})),ya=(0,k.forwardRef)(((e,t)=>{const{__scopeDropdownMenu:i,...n}=e,s=sa(i);return(0,k.createElement)(Ao,(0,W().A)({},s,n,{ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))})),ba=aa,wa=ca,Ca=da,Ma=ha,xa=pa,Aa=ga,Sa=ma,va=Ia,La=e=>{const{__scopeDropdownMenu:t,children:i,open:n,onOpenChange:s,defaultOpen:o}=e,r=sa(t),[a=!1,l]=he({prop:n,defaultProp:o,onChange:s});return(0,k.createElement)(Mo,(0,W().A)({},r,{open:a,onOpenChange:l}),i)},ja=fa,Na=ya;function Da({id:e,open:t,children:i,modal:n=!1}){const s=dd(e);return(0,T.jsx)(ba,{open:t,dir:"ltr",modal:n,onOpenChange:s,children:i})}function Ea({children:e,"data-wd":t}){return(0,T.jsx)(wa,{dir:"ltr","data-wd":t,asChild:!0,children:e})}function ka({side:e="bottom",align:t="start",sideOffset:i=8,alignOffset:s=8,children:o}){const r=(0,n().NFA)();return(0,T.jsx)(Ca,{dir:"ltr",container:r,children:(0,T.jsx)(Ma,{className:"tlui-menu",align:t,sideOffset:i,side:e,alignOffset:s,collisionPadding:4,children:o})})}function Za({id:e,children:t,open:i}){const n=dd(e);return(0,T.jsx)(La,{open:i,onOpenChange:n,children:t})}function Ta({label:e,"data-wd":t,"data-direction":i}){return(0,T.jsx)(ja,{dir:"ltr","data-direction":i,"data-wd":t,asChild:!0,children:(0,T.jsx)(Fr,{className:"tlui-menu__button tlui-menu__submenu__trigger",label:e,icon:"chevron-right"})})}function Wa({alignOffset:e=0,sideOffset:t=5,children:i}){const s=(0,n().NFA)();return(0,T.jsx)(Ca,{container:s,dir:"ltr",children:(0,T.jsx)(Na,{className:"tlui-menu tlui-menu__submenu__content",alignOffset:e,sideOffset:t,collisionPadding:4,children:i})})}function za({children:e,size:t="medium"}){return(0,T.jsx)(xa,{dir:"ltr",className:"tlui-menu__group","data-size":t,children:e})}function Pa({noClose:e,...t}){return(0,T.jsx)(Aa,{dir:"ltr",asChild:!0,onClick:e||void 0!==t.isChecked?n().woC:void 0,children:(0,T.jsx)(Fr,{className:"tlui-menu__button",...t})})}function Ya({children:e,onSelect:t,...i}){return(0,T.jsxs)(Sa,{dir:"ltr",className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",onSelect:e=>{t?.(e),(0,n().woC)(e)},...i,children:[(0,T.jsx)("div",{className:"tlui-menu__checkbox-item__check",style:{transformOrigin:"75% center",transform:`scale(${i.checked?1:.5})`,opacity:i.checked?1:.5},children:(0,T.jsx)(Br,{small:!0,icon:i.checked?"check":"checkbox-empty"})}),e]})}function Oa({children:e,onSelect:t,...i}){return(0,T.jsxs)(Sa,{dir:"ltr",className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",onSelect:e=>{t?.(e),(0,n().woC)(e)},...i,children:[(0,T.jsx)(va,{dir:"ltr",className:"tlui-menu__checkbox-item__check",children:(0,T.jsx)(Br,{icon:"check"})}),e]})}const Ra=k.memo((function(e){const{items:t,title:i,styleType:s,value:o=null,onValueChange:r,columns:a=(t.length<4?2:4)}=e,l=(0,n().nme)(),c=tc(),d=(0,k.useRef)(!1),{handleButtonClick:u,handleButtonPointerDown:h,handleButtonPointerEnter:p,handleButtonPointerUp:g}=k.useMemo((()=>{const e=()=>{d.current=!1,window.removeEventListener("pointerup",e)};return{handleButtonClick:e=>{const{id:i}=e.currentTarget.dataset;o!==i&&(l.mark("point picker item"),r(t.find((e=>e.id===i)),!1))},handleButtonPointerDown:i=>{const{id:n}=i.currentTarget.dataset;l.mark("point picker item"),r(t.find((e=>e.id===n)),!0),d.current=!0,window.addEventListener("pointerup",e)},handleButtonPointerEnter:e=>{if(!d.current)return;const{id:i}=e.currentTarget.dataset;r(t.find((e=>e.id===i)),!0)},handleButtonPointerUp:e=>{const{id:i}=e.currentTarget.dataset;r(t.find((e=>e.id===i)),!1)}}}),[l,o,r,t]);return(0,T.jsx)("div",{className:qe()("tlui-button-grid",{"tlui-button-grid__two":2===a,"tlui-button-grid__three":3===a,"tlui-button-grid__four":4===a}),children:t.map((t=>(0,T.jsx)(Fr,{"data-id":t.id,"data-wd":`${e["data-wd"]}.${t.id}`,"aria-label":t.id,"data-state":o===t.id?"hinted":void 0,title:i+"  "+c(`${s}-style.${t.id}`),className:qe()("tlui-button-grid__button"),style:"color"===t.type?{color:`var(--palette-${t.id})`}:void 0,onPointerEnter:p,onPointerDown:h,onPointerUp:g,onClick:u,icon:t.icon},t.id)))})})),Ga=k.forwardRef((function({className:e,label:t,icon:i,iconLeft:n,autoselect:s=!1,autofocus:o=!1,defaultValue:r,placeholder:a,onComplete:l,onValueChange:c,onCancel:d,shouldManuallyMaintainScrollPositionWhenFocused:u=!1,children:h},p){const g=k.useRef(null);k.useImperativeHandle(p,(()=>g.current));const m=tc(),I=k.useRef(r??""),f=k.useRef(r??""),[y,b]=k.useState(!1),w=k.useCallback((e=>{b(!0);const t=e.currentTarget;f.current=t.value,requestAnimationFrame((()=>{s&&t.select()}))}),[s]),C=k.useCallback((e=>{const t=e.currentTarget.value;f.current=t,c?.(t)}),[c]),M=k.useCallback((e=>{switch(e.key){case"Enter":e.currentTarget.blur(),e.stopPropagation(),l?.(e.currentTarget.value);break;case"Escape":e.currentTarget.value=I.current,e.currentTarget.blur(),e.stopPropagation(),d?.(e.currentTarget.value)}}),[l,d]),x=k.useCallback((()=>b(!1)),[]);return k.useEffect((()=>{const e=window.visualViewport;if(y&&u&&e){const t=()=>{g.current?.scrollIntoView({block:"center"})};return e.addEventListener("resize",t),e.addEventListener("scroll",t),requestAnimationFrame((()=>{g.current?.scrollIntoView({block:"center"})})),()=>{e.removeEventListener("resize",t),e.removeEventListener("scroll",t)}}}),[y,u]),(0,T.jsxs)("div",{draggable:!1,className:"tlui-input__wrapper",children:[h,t&&(0,T.jsx)("label",{children:m(t)}),n&&(0,T.jsx)(Br,{icon:n,className:"tlui-icon-left",small:!0}),(0,T.jsx)("input",{ref:g,className:qe()("tlui-input",e),type:"text",defaultValue:r,onKeyUp:M,onChange:C,onFocus:w,onBlur:x,autoFocus:o,placeholder:a}),i&&(0,T.jsx)(Br,{icon:i,small:!!t})]})}));const _a=["PageUp","PageDown"],Ba=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ja={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ha="Slider",[Va,Ua,Xa]=U(Ha),[Fa,Ka]=R(Ha,[Xa]),[Qa,$a]=Fa(Ha),qa=(0,k.forwardRef)(((e,t)=>{const{name:i,min:n=0,max:s=100,step:o=1,orientation:r="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[n],value:d,onValueChange:u=(()=>{}),onValueCommit:h=(()=>{}),inverted:p=!1,...g}=e,[m,I]=(0,k.useState)(null),f=O(t,(e=>I(e))),y=(0,k.useRef)(new Set),b=(0,k.useRef)(0),w="horizontal"===r,C=!m||Boolean(m.closest("form")),M=w?il:nl,[x=[],A]=he({prop:d,defaultProp:c,onChange:e=>{var t;null===(t=[...y.current][b.current])||void 0===t||t.focus(),u(e)}}),S=(0,k.useRef)(x);function v(e,t,{commit:i}={commit:!1}){const r=function(e){return(String(e).split(".")[1]||"").length}(o),a=function(e,t){const i=Math.pow(10,t);return Math.round(e*i)/i}(Math.round((e-n)/o)*o+n,r),c=function(e,[t,i]){return Math.min(i,Math.max(t,e))}(a,[n,s]);A(((e=[])=>{const n=function(e=[],t,i){const n=[...e];return n[i]=t,n.sort(((e,t)=>e-t))}(e,c,t);if(function(e,t){if(t>0){const i=function(e){return e.slice(0,-1).map(((t,i)=>e[i+1]-t))}(e);return Math.min(...i)>=t}return!0}(n,l*o)){b.current=n.indexOf(c);const t=String(n)!==String(e);return t&&i&&h(n),t?n:e}return e}))}return(0,k.createElement)(Qa,{scope:e.__scopeSlider,disabled:a,min:n,max:s,valueIndexToChangeRef:b,thumbs:y.current,values:x,orientation:r},(0,k.createElement)(Va.Provider,{scope:e.__scopeSlider},(0,k.createElement)(Va.Slot,{scope:e.__scopeSlider},(0,k.createElement)(M,(0,W().A)({"aria-disabled":a,"data-disabled":a?"":void 0},g,{ref:f,onPointerDown:P(g.onPointerDown,(()=>{a||(S.current=x)})),min:n,max:s,inverted:p,onSlideStart:a?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const i=e.map((e=>Math.abs(e-t))),n=Math.min(...i);return i.indexOf(n)}(x,e);v(e,t)},onSlideMove:a?void 0:function(e){v(e,b.current)},onSlideEnd:a?void 0:function(){const e=S.current[b.current];x[b.current]!==e&&h(x)},onHomeKeyDown:()=>!a&&v(n,0,{commit:!0}),onEndKeyDown:()=>!a&&v(s,x.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!a){const i=_a.includes(e.key)||e.shiftKey&&Ba.includes(e.key)?10:1,n=b.current;v(x[n]+o*i*t,n,{commit:!0})}}})))),C&&x.map(((e,t)=>(0,k.createElement)(hl,{key:t,name:i?i+(x.length>1?"[]":""):void 0,value:e}))))})),[el,tl]=Fa(Ha,{startEdge:"left",endEdge:"right",size:"width",direction:1}),il=(0,k.forwardRef)(((e,t)=>{const{min:i,max:n,dir:s,inverted:o,onSlideStart:r,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...d}=e,[u,h]=(0,k.useState)(null),p=O(t,(e=>h(e))),g=(0,k.useRef)(),m=it(s),I="ltr"===m,f=I&&!o||!I&&o;function y(e){const t=g.current||u.getBoundingClientRect(),s=gl([0,t.width],f?[i,n]:[n,i]);return g.current=t,s(e-t.left)}return(0,k.createElement)(el,{scope:e.__scopeSlider,startEdge:f?"left":"right",endEdge:f?"right":"left",direction:f?1:-1,size:"width"},(0,k.createElement)(sl,(0,W().A)({dir:m,"data-orientation":"horizontal"},d,{ref:p,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const t=y(e.clientX);null==r||r(t)},onSlideMove:e=>{const t=y(e.clientX);null==a||a(t)},onSlideEnd:()=>{g.current=void 0,null==l||l()},onStepKeyDown:e=>{const t=Ja[f?"from-left":"from-right"].includes(e.key);null==c||c({event:e,direction:t?-1:1})}})))})),nl=(0,k.forwardRef)(((e,t)=>{const{min:i,max:n,inverted:s,onSlideStart:o,onSlideMove:r,onSlideEnd:a,onStepKeyDown:l,...c}=e,d=(0,k.useRef)(null),u=O(t,d),h=(0,k.useRef)(),p=!s;function g(e){const t=h.current||d.current.getBoundingClientRect(),s=gl([0,t.height],p?[n,i]:[i,n]);return h.current=t,s(e-t.top)}return(0,k.createElement)(el,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1},(0,k.createElement)(sl,(0,W().A)({"data-orientation":"vertical"},c,{ref:u,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const t=g(e.clientY);null==o||o(t)},onSlideMove:e=>{const t=g(e.clientY);null==r||r(t)},onSlideEnd:()=>{h.current=void 0,null==a||a()},onStepKeyDown:e=>{const t=Ja[p?"from-bottom":"from-top"].includes(e.key);null==l||l({event:e,direction:t?-1:1})}})))})),sl=(0,k.forwardRef)(((e,t)=>{const{__scopeSlider:i,onSlideStart:n,onSlideMove:s,onSlideEnd:o,onHomeKeyDown:r,onEndKeyDown:a,onStepKeyDown:l,...c}=e,d=$a(Ha,i);return(0,k.createElement)(X.span,(0,W().A)({},c,{ref:t,onKeyDown:P(e.onKeyDown,(e=>{"Home"===e.key?(r(e),e.preventDefault()):"End"===e.key?(a(e),e.preventDefault()):_a.concat(Ba).includes(e.key)&&(l(e),e.preventDefault())})),onPointerDown:P(e.onPointerDown,(e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),d.thumbs.has(t)?t.focus():n(e)})),onPointerMove:P(e.onPointerMove,(e=>{e.target.hasPointerCapture(e.pointerId)&&s(e)})),onPointerUp:P(e.onPointerUp,(e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),o(e))}))}))})),ol="SliderTrack",rl=(0,k.forwardRef)(((e,t)=>{const{__scopeSlider:i,...n}=e,s=$a(ol,i);return(0,k.createElement)(X.span,(0,W().A)({"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation},n,{ref:t}))})),al="SliderRange",ll=(0,k.forwardRef)(((e,t)=>{const{__scopeSlider:i,...n}=e,s=$a(al,i),o=tl(al,i),r=O(t,(0,k.useRef)(null)),a=s.values.length,l=s.values.map((e=>pl(e,s.min,s.max))),c=a>1?Math.min(...l):0,d=100-Math.max(...l);return(0,k.createElement)(X.span,(0,W().A)({"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0},n,{ref:r,style:{...e.style,[o.startEdge]:c+"%",[o.endEdge]:d+"%"}}))})),cl="SliderThumb",dl=(0,k.forwardRef)(((e,t)=>{const i=Ua(e.__scopeSlider),[n,s]=(0,k.useState)(null),o=O(t,(e=>s(e))),r=(0,k.useMemo)((()=>n?i().findIndex((e=>e.ref.current===n)):-1),[i,n]);return(0,k.createElement)(ul,(0,W().A)({},e,{ref:o,index:r}))})),ul=(0,k.forwardRef)(((e,t)=>{const{__scopeSlider:i,index:n,...s}=e,o=$a(cl,i),r=tl(cl,i),[a,l]=(0,k.useState)(null),c=O(t,(e=>l(e))),d=Li(a),u=o.values[n],h=void 0===u?0:pl(u,o.min,o.max),p=function(e,t){return t>2?`Value ${e+1} of ${t}`:2===t?["Minimum","Maximum"][e]:void 0}(n,o.values.length),g=null==d?void 0:d[r.size],m=g?function(e,t,i){const n=e/2,s=gl([0,50],[0,n]);return(n-s(t)*i)*i}(g,h,r.direction):0;return(0,k.useEffect)((()=>{if(a)return o.thumbs.add(a),()=>{o.thumbs.delete(a)}}),[a,o.thumbs]),(0,k.createElement)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[r.startEdge]:`calc(${h}% + ${m}px)`}},(0,k.createElement)(Va.ItemSlot,{scope:e.__scopeSlider},(0,k.createElement)(X.span,(0,W().A)({role:"slider","aria-label":e["aria-label"]||p,"aria-valuemin":o.min,"aria-valuenow":u,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0},s,{ref:c,style:void 0===u?{display:"none"}:e.style,onFocus:P(e.onFocus,(()=>{o.valueIndexToChangeRef.current=n}))}))))})),hl=e=>{const{value:t,...i}=e,n=(0,k.useRef)(null),s=function(e){const t=(0,k.useRef)({value:e,previous:e});return(0,k.useMemo)((()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous)),[e])}(t);return(0,k.useEffect)((()=>{const e=n.current,i=window.HTMLInputElement.prototype,o=Object.getOwnPropertyDescriptor(i,"value").set;if(s!==t&&o){const i=new Event("input",{bubbles:!0});o.call(e,t),e.dispatchEvent(i)}}),[s,t]),(0,k.createElement)("input",(0,W().A)({style:{display:"none"}},i,{ref:n,defaultValue:t}))};function pl(e,t,i){return 100/(i-t)*(e-t)}function gl(e,t){return i=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(i-e[0])}}const ml=qa,Il=rl,fl=ll,yl=dl;function bl(e){const{title:t,steps:i,value:s,label:o,onValueChange:r}=e,a=(0,n().nme)(),l=tc(),c=(0,k.useCallback)((e=>{r(e[0],!0)}),[r]),d=(0,k.useCallback)((()=>{a.mark("click slider")}),[a]),u=(0,k.useCallback)((()=>{s&&r(s,!1)}),[s,r]);return(0,T.jsx)("div",{className:"tlui-slider__container",children:(0,T.jsxs)(ml,{"data-wd":e["data-wd"],className:"tlui-slider","area-label":"Opacity",dir:"ltr",min:0,max:i,step:1,value:s?[s]:void 0,onPointerDown:d,onValueChange:c,onPointerUp:u,title:t+"  "+l(o),children:[(0,T.jsx)(Il,{className:"tlui-slider__track",dir:"ltr",children:null!==s&&(0,T.jsx)(fl,{className:"tlui-slider__range",dir:"ltr"})}),null!==s&&(0,T.jsx)(yl,{className:"tlui-slider__thumb",dir:"ltr"})]})})}const wl=new RegExp(/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i);function Cl(e){return!!wl.test(e)||!!wl.test("https://"+e)&&"needs protocol"}const Ml=(0,et().u4)((function({onClose:e}){const t=(0,n().nme)(),i=tc(),s=t.onlySelectedShape,[o,r]=(0,k.useState)(Cl(s?.props.url)),a=(0,k.useRef)(s?.props.url),l=(0,k.useRef)(s?.props.url),c=(0,k.useCallback)((e=>{const t=Cl(e.trim());r((e=>e===t?e:t)),t&&(l.current=e)}),[]),d=(0,k.useCallback)((()=>{t.setProp("url","",!1),e()}),[t,e]),u=(0,k.useCallback)((i=>{const n=Cl(i=i.trim()),s=t.selectedShapes[0];if(s){const e=s.props.url,o=n?"needs protocol"===n?"https://"+i:i:"bookmark"===s.type?a.current:"";void 0!==e&&e!==o&&t.setProp("url",o,!1)}e()}),[t,e]),h=(0,k.useCallback)((()=>{e()}),[e]);if(!s)return e(),null;const p=a.current&&!o;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(Kr,{children:[(0,T.jsx)(Qr,{children:i("edit-link-dialog.title")}),(0,T.jsx)($r,{})]}),(0,T.jsx)(qr,{children:(0,T.jsxs)("div",{className:"tlui-edit-link-dialog",children:[(0,T.jsx)(Ga,{className:"tlui-edit-link-dialog__input",label:"edit-link-dialog.url",defaultValue:o?"needs protocol"===o?"https://"+s.props.url:s.props.url:"https://",autofocus:!0,onValueChange:c,onComplete:u,onCancel:h}),(0,T.jsx)("div",{children:i(o?"edit-link-dialog.detail":"edit-link-dialog.invalid-url")})]})}),(0,T.jsxs)(ea,{className:"tlui-dialog__footer__actions",children:[(0,T.jsx)(Fr,{onClick:h,onTouchEnd:h,children:i("edit-link-dialog.cancel")}),p?(0,T.jsx)(Fr,{type:"danger",onTouchEnd:d,onClick:d,children:i("edit-link-dialog.clear")}):(0,T.jsx)(Fr,{type:"primary",disabled:!o,onTouchEnd:()=>u(l.current),onClick:()=>u(l.current),children:i("edit-link-dialog.save")})]})]})}));var xl=()=>i(832992);function Al(){const e=(0,n().nme)();return(0,et().h)("app.isFocused",(()=>e.isFocused),[e])}async function Sl(e){return new Promise(((t,i)=>{const n=new FileReader;n.addEventListener("loadend",(()=>{const e=n.result;t(e)})),n.addEventListener("error",(()=>{i(n.error)})),n.readAsText(e)}))}async function vl(e){return new Promise((t=>{e.getAsString((e=>{t(e)}))}))}const Ll=["input","select","textarea"];function jl(e){const{activeElement:t}=document;return e.isMenuOpen||t&&(t.getAttribute("contenteditable")||Ll.indexOf(t.tagName.toLowerCase())>-1)}function Nl(e){const t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=e,t.body.textContent||t.body.innerText||""}const Dl=async(e,t,i)=>{const n=i??(e.inputs.shiftKey?e.inputs.currentPagePoint:void 0);e.mark("paste"),e.putContent(t,{point:n,select:!0})},El=async(e,t,i)=>{const s=i??(e.inputs.shiftKey?e.inputs.currentPagePoint:e.viewportPageCenter);try{const i=await fetch(t);if(i.headers.get("content-type")?.match(/^image\//))return e.mark("paste"),void kl(e,[t])}catch(tm){"Failed to fetch"!==tm.message&&console.error(tm)}const o=(0,n().g1B)(t);o?(e.mark("paste"),(0,n().Av2)(e,o.url,s,o.definition)):(e.mark("paste"),await(0,n().nyR)(e,t,s))},kl=async(e,t,i)=>{const s=i??(e.inputs.shiftKey?e.inputs.currentPagePoint:e.viewportPageCenter),o=(await Promise.all(t.map((async e=>await(await fetch(e)).blob())))).map((e=>new File([e],"TLdrawFile",{type:e.type})));e.mark("paste"),await(0,n().aXJ)(e,o,s,!1),t.forEach((e=>URL.revokeObjectURL(e)))},Zl=e=>{const t=e.getContent();if(!t)return void window.navigator.clipboard.writeText("");const i=(o=t,r="content",(0,xl().compressToBase64)(JSON.stringify({type:"application/tldraw",kind:r,data:o})));var o,r;if(void 0!==window?.navigator){const e=t.shapes.map((e=>n().Wrk.is(e)||n().iNw.is(e)||n().o4Y.is(e)?e.props.text:n().lGR.is(e)||n().gGX.is(e)?e.props.url:null)).filter(s().BW);if(navigator.clipboard?.write){const t=new Blob([`<tldraw>${i}</tldraw>`],{type:"text/html"});let n=e.join(" ");""===n&&(n=" "),navigator.clipboard.write([new ClipboardItem({"text/html":t,"text/plain":new Blob([n],{type:"text/plain"})})])}else navigator.clipboard.writeText&&navigator.clipboard.writeText(`<tldraw>${i}</tldraw>`)}},Tl=(e,t,i)=>{const s=(0,n().m0Y)(t);if(s)for(const n of s)El(e,n,i);else(0,n().aXM)(t)?El(e,t,i):(0,n().GbU)(t)?((e,t,i)=>{const s=i??(e.inputs.shiftKey?e.inputs.currentPagePoint:e.viewportPageCenter);e.mark("paste"),(0,n().hux)(e,t,s)})(e,t,i):(async(e,t,i)=>{const s=i??(e.inputs.shiftKey?e.inputs.currentPagePoint:e.viewportPageCenter),o=e.getShapeUtilByDef(n().Wrk).defaultProps(),{w:r,h:a}=e.textMeasure.measureText({...n().N9,text:Nl(t),fontFamily:n().vtD[o.font],fontSize:n().$N6[o.size],width:"fit-content"});e.mark("paste"),e.createShapes([{id:(0,n().n6Y)(),type:"text",x:s.x-r/2,y:s.y-a/2,props:{text:Nl(t),autoSize:!0}}])})(e,t,i)};const Wl=async(e,t,i)=>{const n=t.map((e=>URL.createObjectURL(e)));kl(e,n,i)},zl=async(e,t,i)=>{const n=t.match(/<tldraw[^>]*>(.*)<\/tldraw>/)?.[1];if(n)try{const t=JSON.parse((0,xl().decompressFromBase64)(n));"application/tldraw"===t.type?Dl(e,t.data,i):Tl(e,n,i)}catch(s){Tl(e,n,i)}else{const n=(new DOMParser).parseFromString(t,"text/html").querySelector("body");if(n&&1===Array.from(n.children).filter((e=>1===e.nodeType)).length&&n.firstElementChild&&"A"===n.firstElementChild.tagName&&n.firstElementChild.hasAttribute("href")&&""!==n.firstElementChild.getAttribute("href")){const t=n.firstElementChild.getAttribute("href");Tl(e,t,i)}else Tl(e,t,i)}},Pl=async(e,t,i)=>{const o=t.trim(),r=t.match(/<tldraw[^>]*>(.*)<\/tldraw>/)?.[1];if(r)zl(e,t);else if(o)try{const t=JSON.parse(o);"application/tldraw"===t.type?Dl(e,t.data,i):"excalidraw/clipboard"===t.type?async function(e,t,i){const{elements:o,files:r}=t,a={shapes:[],rootShapeIds:[],assets:[],schema:e.store.schema.serialize()},l=new Map,c=new Map,d=e=>{const t=e/100;return t<.2?"0.1":t<.4?"0.25":t<.6?"0.5":t<.8?"0.75":"1"},u={1:"s",2:"m",3:"l",4:"xl"},h={16:"s",20:"m",28:"l",36:"xl"};function p(e){const t=h[e];return t?{size:t,scale:1}:e<16?{size:"s",scale:e/16}:e>36?{size:"xl",scale:e/36}:{size:"m",scale:1}}const g={1:"draw",2:"sans",3:"mono"},m={"#ffffff":"grey","#000000":"black","#343a40":"grey","#495057":"grey","#c92a2a":"red","#a61e4d":"light-red","#862e9c":"violet","#5f3dc4":"light-violet","#364fc7":"blue","#1864ab":"light-blue","#0b7285":"light-green","#087f5b":"light-green","#2b8a3e":"green","#5c940d":"light-green","#e67700":"yellow","#d9480f":"orange","#ced4da":"grey","#868e96":"grey","#fa5252":"light-red","#e64980":"red","#be4bdb":"light-violet","#7950f2":"violet","#4c6ef5":"blue","#228be6":"light-blue","#15aabf":"light-green","#12b886":"green","#40c057":"green","#82c91e":"light-green","#fab005":"yellow","#fd7e14":"orange","#212529":"grey"},I={solid:"draw",dashed:"dashed",dotted:"dotted"},f={"cross-hatch":"pattern",hachure:"pattern",solid:"solid"},y={left:"start",center:"middle",right:"end"},b={arrow:"arrow",dot:"dot",triangle:"triangle",bar:"pipe"};function w(e,t,i){let n=0;if(e.points.length>2){const s=new(ur().hd)(t[0],t[1]),o=new(ur().hd)(i[0],i[1]),r=new(ur().hd)(e.points[1][0],e.points[1][1]),a=ur().hd.Sub(o,s),l=ur().hd.Per(a),c=ur().hd.Med(o,s),d=ur().hd.Sub(c,l),u=ur().hd.Add(c,l),h=ur().hd.NearestPointOnLineSegment(d,u,r,!1);n=ur().hd.Dist(h,c),ur().hd.Clockwise(h,o,c)&&(n*=-1)}return n}const C=e=>{let t=I[e.strokeStyle]??"draw";return"draw"===t&&0===e.roughness&&(t="solid"),t},M=e=>"transparent"===e.backgroundColor?"none":f[e.fillStyle]??"solid",{currentPageId:x}=e;let A="a1";const S=new Map,v=[],L=new Set;o.forEach((t=>{if(S.set(t.id,e.createShapeId()),null!==t.boundElements)for(const e of t.boundElements)"text"===e.type&&L.add(e.id)}));for(const s of o){if(L.has(s.id))continue;const e=S.get(s.id),t={id:e,typeName:"shape",parentId:x,index:A,x:s.x,y:s.y,rotation:0,isLocked:s.locked};switch(0!==s.angle&&c.set(e,s.angle),s.groupIds&&s.groupIds.length>0?l.has(s.groupIds[0])?l.get(s.groupIds[0])?.push(e):l.set(s.groupIds[0],[e]):v.push(e),s.type){case"rectangle":case"ellipse":case"diamond":{let e="",i="middle";if(null!==s.boundElements)for(const t of s.boundElements)if("text"===t.type){const n=o.find((e=>e.id===t.id));n&&(e=n.text,i=y[n.textAlign])}const n="transparent"===s.backgroundColor?s.strokeColor:s.backgroundColor;a.shapes.push({...t,type:"geo",props:{geo:s.type,opacity:d(s.opacity),url:s.link??"",w:s.width,h:s.height,size:u[s.strokeWidth]??"draw",color:m[n]??"black",text:e,align:i,dash:C(s),fill:M(s)}});break}case"freedraw":a.shapes.push({...t,type:"draw",props:{dash:C(s),size:u[s.strokeWidth],opacity:d(s.opacity),color:m[s.strokeColor]??"black",segments:[{type:"free",points:s.points.map((([e,t,i=.5])=>({x:e,y:t,z:i})))}]}});break;case"line":{const e=s.points[0],i=s.points[s.points.length-1],o=(0,n().uud)(s.points.length);a.shapes.push({...t,type:"line",props:{dash:C(s),size:u[s.strokeWidth],opacity:d(s.opacity),color:m[s.strokeColor]??"black",spline:s.roundness?"cubic":"line",handles:{start:{id:"start",type:"vertex",index:o[0],x:e[0],y:e[1]},end:{id:"end",type:"vertex",index:o[o.length-1],x:i[0],y:i[1]},...Object.fromEntries(s.points.slice(1,-1).map((([e,t],i)=>{const s=(0,n().NF7)();return[s,{id:s,type:"vertex",index:o[i+1],x:e,y:t}]})))}}});break}case"arrow":{let e="";if(null!==s.boundElements)for(const t of s.boundElements)if("text"===t.type){const i=o.find((e=>e.id===t.id));i&&(e=i.text)}const i=s.points[0],n=s.points[s.points.length-1],r=S.get(s.startBinding?.elementId),l=S.get(s.endBinding?.elementId);a.shapes.push({...t,type:"arrow",props:{text:e,bend:w(s,i,n),dash:C(s),opacity:d(s.opacity),size:u[s.strokeWidth]??"m",color:m[s.strokeColor]??"black",start:r?{type:"binding",boundShapeId:r,normalizedAnchor:{x:.5,y:.5},isExact:!1}:{type:"point",x:i[0],y:i[1]},end:l?{type:"binding",boundShapeId:l,normalizedAnchor:{x:.5,y:.5},isExact:!1}:{type:"point",x:n[0],y:n[1]},arrowheadEnd:b[s.endArrowhead]??"none",arrowheadStart:b[s.startArrowhead]??"none"}});break}case"text":{const{size:e,scale:i}=p(s.fontSize);a.shapes.push({...t,type:"text",props:{size:e,scale:i,font:g[s.fontFamily]??"draw",opacity:d(s.opacity),color:m[s.strokeColor]??"black",text:s.text,align:y[s.textAlign]}});break}case"image":{const e=r[s.fileId];if(!e)break;const i=n().xlB.createId();a.assets.push({id:i,typeName:"asset",type:"image",props:{w:s.width,h:s.height,name:s.id??"Untitled",isAnimated:!1,mimeType:e.mimeType,src:e.dataURL}}),a.shapes.push({...t,type:"image",props:{opacity:d(s.opacity),w:s.width,h:s.height,assetId:i}})}}A=(0,n().AQy)(A)}const j=i??(e.inputs.shiftKey?e.inputs.currentPagePoint:void 0);e.mark("paste"),e.putContent(a,{point:j,select:!1,preserveIds:!0});for(const s of l.values())if(s.length>1){e.groupShapes(s);const t=e.getShapeById(s[0]);t?.parentId&&(0,n().vc4)(t.parentId)&&v.push(t.parentId)}for(const[n,s]of c)e.select(n),e.rotateShapesBy([n],s);const N=(0,s().oE)(v.map((t=>e.getShapeById(t)))),D=ur().Ax.Common(N.map((t=>e.getPageBounds(t)))),E=e.viewportPageBounds.center;e.updateShapes(N.map((e=>{const t=(e.x??0)-(D.x+D.w/2),i=(e.y??0)-(D.y+D.h/2);return{id:e.id,type:e.type,x:E.x+t,y:E.y+i}}))),e.setSelectedIds(v)}(e,t,i):Tl(e,o,i)}catch(a){Tl(e,o,i)}},Yl=async(e,t,i)=>{if(e.isIn("select.editing"))return;const n=t.some((e=>(e=>e.types.find((e=>e.match(/^image\//))))(e))),s=t.some((e=>e.types.includes("text/html"))),o=t.filter((e=>!!e.types.find((e=>e.match(/^image\//)))));await Promise.all(o.map((async t=>{const n=t.types.find((e=>"text/plain"!==e&&"text/html"!==e));if(n){const s=await t.getType(n);s&&await Wl(e,[s],i)}})));for(const r of t)if(r.types.includes("text/html")){if(n)break;const t=await r.getType("text/html");await zl(e,await Sl(t),i)}else if(r.types.includes("text/uri-list")){if(s)break;const t=await r.getType("text/uri-list");await El(e,await Sl(t),i)}else if(r.types.includes("text/plain")){if(s)break;const t=await r.getType("text/plain");await Pl(e,await Sl(t),i)}};function Ol(){const e=(0,n().nme)(),t=(0,k.useCallback)((function(){0!==e.selectedIds.length&&Zl(e)}),[e]),i=(0,k.useCallback)((function(){0!==e.selectedIds.length&&(Zl(e),e.deleteShapes())}),[e]),s=(0,k.useCallback)((async function(t,i){Array.isArray(t)&&t[0]instanceof ClipboardItem?Yl(e,t,i):navigator.clipboard.read().then((t=>{s(t,e.inputs.currentPagePoint)}))}),[e]);return{copy:t,cut:i,paste:s}}function Rl(){const e=(0,n().nme)(),t=Al();(0,k.useEffect)((()=>{if(!t)return;const i=()=>{0===e.selectedIds.length||null!==e.editingId||jl(e)||Zl(e)};function n(){0===e.selectedIds.length||null!==e.editingId||jl(e)||(Zl(e),e.deleteShapes())}const s=t=>{null!==e.editingId||jl(e)||(t.clipboardData&&!e.inputs.shiftKey?(async(e,t,i)=>{if(!e.isIn("select.editing")&&t){const n=Object.values(t.items),s=n.some((e=>"file"===e.kind)),o=n.some((e=>"text/html"===e.type)),r=[],a=[];n.forEach((e=>{if("file"===e.kind){const t=e.getAsFile();t&&r.push(t)}else"string"===e.kind&&a.push(e)})),r.length>0&&Wl(e,r,i);for(const t of a)s||"text/html"!==t.type?"text/plain"===t.type&&(o||await Pl(e,await vl(t),i)):await zl(e,await vl(t),i)}})(e,t.clipboardData):navigator.clipboard.read().then((t=>{Array.isArray(t)&&t[0]instanceof ClipboardItem&&Yl(e,t,e.inputs.currentPagePoint)})))};return document.addEventListener("copy",i),document.addEventListener("cut",n),document.addEventListener("paste",s),()=>{document.removeEventListener("copy",i),document.removeEventListener("cut",n),document.removeEventListener("paste",s)}}),[e,t])}const Gl=(0,k.createContext)({});function _l({children:e}){const[t,i]=(0,k.useState)([]),s=(0,k.useCallback)((e=>{const t=e.id??(0,n().NF7)();return i((i=>[...i.filter((t=>t.id!==e.id)),{...e,id:t}])),t}),[]),o=(0,k.useCallback)((e=>(i((t=>t.filter((t=>t.id!==e)))),e)),[]),r=(0,k.useCallback)((()=>{i((()=>[]))}),[]);return(0,T.jsx)(Gl.Provider,{value:{toasts:t,addToast:s,removeToast:o,clearToasts:r},children:e})}function Bl(){const e=(0,k.useContext)(Gl);if(!e)throw new Error("useToasts must be used within a ToastsProvider");return e}const Jl={"action.convert-to-bookmark":"Convert to Bookmark","action.convert-to-embed":"Convert to Embed","action.open-embed-link":"Open link","action.align-bottom":"Align bottom","action.align-center-horizontal":"Align horizontally","action.align-center-vertical":"Align vertically","action.align-center-horizontal.short":"Align H","action.align-center-vertical.short":"Align V","action.align-left":"Align left","action.align-right":"Align right","action.align-top":"Align top","action.back-to-content":"Back to content","action.bring-forward":"Bring forward","action.bring-to-front":"Bring to front","action.copy-as-json.short":"JSON","action.copy-as-json":"Copy as JSON","action.copy-as-png.short":"PNG","action.copy-as-png":"Copy as PNG","action.copy-as-svg.short":"SVG","action.copy-as-svg":"Copy as SVG","action.copy":"Copy","action.cut":"Cut","action.delete":"Delete","action.distribute-horizontal":"Distribute horizontally","action.distribute-vertical":"Distribute vertically","action.distribute-horizontal.short":"Distribute H","action.distribute-vertical.short":"Distribute V","action.duplicate":"Duplicate","action.edit-link":"Edit link","action.exit-pen-mode":"Exit pen mode","action.export-as-json.short":"JSON","action.export-as-json":"Export as JSON","action.export-as-png.short":"PNG","action.export-as-png":"Export as PNG","action.export-as-svg.short":"SVG","action.export-as-svg":"Export as SVG","action.flip-horizontal":"Flip horizontally","action.flip-vertical":"Flip vertically","action.flip-horizontal.short":"Flip H","action.flip-vertical.short":"Flip V","action.group":"Group","action.insert-media":"Upload media","action.new-shared-project":"New shared project","action.nudge-down":"Nudge down","action.nudge-left":"Nudge left","action.nudge-right":"Nudge right","action.nudge-up":"Nudge up","action.open-file":"Open file","action.pack":"Pack","action.paste":"Paste","action.print":"Print","action.redo":"Redo","action.rotate-ccw":"Rotate counterclockwise","action.rotate-cw":"Rotate clockwise","action.save-copy":"Save a copy","action.select-all":"Select all","action.select-none":"Select none","action.send-backward":"Send backward","action.send-to-back":"Send to back","action.share-project":"Share this project","action.stack-horizontal":"Stack horizontally","action.stack-vertical":"Stack vertically","action.stack-horizontal.short":"Stack H","action.stack-vertical.short":"Stack V","action.stretch-horizontal":"Stretch horizontally","action.stretch-vertical":"Stretch vertically","action.stretch-horizontal.short":"Stretch H","action.stretch-vertical.short":"Stretch V","action.toggle-auto-size":"Toggle auto size","action.toggle-dark-mode.menu":"Dark mode","action.toggle-dark-mode":"Toggle dark mode","action.toggle-debug-mode.menu":"Debug mode","action.toggle-debug-mode":"Toggle debug mode","action.toggle-focus-mode.menu":"Focus mode","action.toggle-focus-mode":"Toggle focus mode","action.toggle-grid.menu":"Show grid","action.toggle-grid":"Toggle grid","action.toggle-snap-mode.menu":"Always snap","action.toggle-snap-mode":"Toggle always snap","action.toggle-tool-lock.menu":"Tool lock","action.toggle-tool-lock":"Toggle tool lock","action.toggle-transparent.context-menu":"Transparent","action.toggle-transparent.menu":"Transparent","action.toggle-transparent":"Toggle transparent background","action.undo":"Undo","action.ungroup":"Ungroup","action.zoom-in":"Zoom in","action.zoom-out":"Zoom out","action.zoom-to-100":"Zoom to 100%","action.zoom-to-fit":"Zoom to fit","action.zoom-to-selection":"Zoom to selection","color-style.black":"Black","color-style.blue":"Blue","color-style.green":"Green","color-style.grey":"Grey","color-style.light-blue":"Light blue","color-style.light-green":"Light green","color-style.light-red":"Light red","color-style.light-violet":"Light violet","color-style.orange":"Orange","color-style.red":"Red","color-style.violet":"Violet","color-style.yellow":"Yellow","fill-style.none":"None","fill-style.semi":"Semi","fill-style.solid":"Solid","fill-style.pattern":"Pattern","dash-style.dashed":"Dashed","dash-style.dotted":"Dotted","dash-style.draw":"Draw","dash-style.solid":"Solid","size-style.s":"Small","size-style.m":"Medium","size-style.l":"Large","size-style.xl":"Extra large","opacity-style.0.1":"10%","opacity-style.0.25":"25%","opacity-style.0.5":"50%","opacity-style.0.75":"75%","opacity-style.1":"100%","font-style.draw":"Draw","font-style.sans":"Sans","font-style.serif":"Serif","font-style.mono":"Mono","align-style.start":"Start","align-style.middle":"Middle","align-style.end":"End","align-style.justify":"Justify","geo-style.arrow-down":"Arrow down","geo-style.arrow-left":"Arrow left","geo-style.arrow-right":"Arrow right","geo-style.arrow-up":"Arrow up","geo-style.diamond":"Diamond","geo-style.ellipse":"Ellipse","geo-style.hexagon":"Hexagon","geo-style.octagon":"Octagon","geo-style.oval":"Oval","geo-style.pentagon":"Pentagon","geo-style.rectangle":"Rectangle","geo-style.rhombus-2":"Rhombus 2","geo-style.rhombus":"Rhombus","geo-style.star":"Star","geo-style.trapezoid":"Trapezoid","geo-style.triangle":"Triangle","geo-style.x-box":"X Box","arrowheadStart-style.none":"None","arrowheadStart-style.arrow":"Arrow","arrowheadStart-style.bar":"Bar","arrowheadStart-style.diamond":"Diamond","arrowheadStart-style.dot":"Dot","arrowheadStart-style.inverted":"Inverted","arrowheadStart-style.pipe":"Pipe","arrowheadStart-style.square":"Square","arrowheadStart-style.triangle":"Triangle","arrowheadEnd-style.none":"None","arrowheadEnd-style.arrow":"Arrow","arrowheadEnd-style.bar":"Bar","arrowheadEnd-style.diamond":"Diamond","arrowheadEnd-style.dot":"Dot","arrowheadEnd-style.inverted":"Inverted","arrowheadEnd-style.pipe":"Pipe","arrowheadEnd-style.square":"Square","arrowheadEnd-style.triangle":"Triangle","spline-style.line":"Line","spline-style.cubic":"Cubic","tool.select":"Select","tool.hand":"Hand","tool.draw":"Draw","tool.eraser":"Eraser","tool.arrow-down":"Arrow down","tool.arrow-left":"Arrow left","tool.arrow-right":"Arrow right","tool.arrow-up":"Arrow up","tool.arrow":"Arrow","tool.diamond":"Diamond","tool.ellipse":"Ellipse","tool.hexagon":"Hexagon","tool.line":"Line","tool.octagon":"Octagon","tool.oval":"Oval","tool.pentagon":"Pentagon","tool.rectangle":"Rectangle","tool.rhombus":"Rhombus","tool.star":"Star","tool.trapezoid":"Trapezoid","tool.triangle":"Triangle","tool.x-box":"X box","tool.asset":"Asset","tool.frame":"Frame","tool.note":"Note","tool.embed":"Embed","tool.text":"Text","menu.title":"Menu","menu.copy-as":"Copy as","menu.edit":"Edit","menu.export-as":"Export as","menu.file":"File","menu.language":"Language","menu.preferences":"Preferences","menu.view":"View","context-menu.arrange":"Arrange","context-menu.copy-as":"Copy as","context-menu.export-as":"Export as","context-menu.move-to-page":"Move to page","context-menu.reorder":"Reorder","page-menu.title":"Pages","page-menu.create-new-page":"Create new page","page-menu.edit-pages":"Edit pages","page-menu.max-page-count-reached":"Max pages reached","page-menu.new-page-initial-name":"Page 1","page-menu.page":"Page","page-menu.edit-start":"Edit","page-menu.edit-done":"Done","page-menu.submenu.rename":"Rename","page-menu.submenu.duplicate-page":"Duplicate","page-menu.submenu.go-to-page":"Go to page","page-menu.submenu.title":"Menu","page-menu.submenu.move-down":"Move down","page-menu.submenu.move-up":"Move up","page-menu.submenu.delete":"Delete","share-menu.title":"Share","share-menu.share-project":"Share this project","share-menu.create-project":"New shared project","share-menu.copy-link":"Copy link","share-menu.readonly-link":"Read-only","share-menu.copy-readonly-link":"Copy read-only link","share-menu.offline-note":"Sharing this project will create a hosted live copy at a new URL. You can share the URL with up to thirty other people to view and edit the project together.","share-menu.copy-link-note":"Anyone with the link will be able to view and edit this project.","share-menu.copy-readonly-link-note":"Anyone with the link will be able to view (but not edit) this project.","share-menu.project-too-large":"Sorry, this project can't be shared because it's too large. We're working on it!","people-menu.title":"People","people-menu.change-name":"Change name","people-menu.change-color":"Change color","people-menu.user":"(You)","people-menu.invite":"Invite others","debug-menu.hard-reset":"Hard reset","debug-menu.create-shapes":"Create 100 shapes","help-menu.title":"Help and resources","help-menu.about":"About","help-menu.discord":"Discord","help-menu.github":"GitHub","help-menu.keyboard-shortcuts":"Keyboard shortcuts","help-menu.twitter":"Twitter","links-menu.about":"About","links-menu.discord":"Discord","links-menu.github":"GitHub","links-menu.twitter":"Twitter","actions-menu.title":"Actions","edit-link-dialog.title":"Edit link","edit-link-dialog.invalid-url":"A link must be a valid URL.","edit-link-dialog.detail":"Links will open in a new tab.","edit-link-dialog.url":"URL","edit-link-dialog.clear":"Clear","edit-link-dialog.save":"Continue","edit-link-dialog.cancel":"Cancel","embed-dialog.title":"Create embed","embed-dialog.url-title":"Create %s embed","embed-dialog.url-label":"Paste URL","embed-dialog.back":"Back","embed-dialog.create":"Create","embed-dialog.cancel":"Cancel","embed-dialog.url":"URL","embed-dialog.instruction":"Paste in the site's URL to create the embed.","embed-dialog.invalid-url":"We could not create an embed from that URL.","edit-pages-dialog.title":"Edit pages","edit-pages-dialog.create-new-page":"Create new page","edit-pages-dialog.delete":"Delete","edit-pages-dialog.duplicate-page":"Duplicate","edit-pages-dialog.go-to-page":"Go to page","edit-pages-dialog.max-page-count-reached":"Max pages reached","edit-pages-dialog.more-menu":"Menu","edit-pages-dialog.move-down":"Move down","edit-pages-dialog.move-up":"Move up","edit-pages-dialog.new-page-initial-name":"Page 1","reload-file-dialog.title":"Continue editing file","reload-file-dialog.description":"You were just editing a file. Would you like to continue editing it?","reload-file-dialog.failure":"Failed to reload file. Try again?","reload-file-dialog.reload":"Continue editing","reload-file-dialog.revert":"No thanks","shortcuts-dialog.title":"Keyboard shortcuts","shortcuts-dialog.edit":"Edit","shortcuts-dialog.file":"File","shortcuts-dialog.preferences":"Preferences","shortcuts-dialog.tools":"Tools","shortcuts-dialog.transform":"Transform","shortcuts-dialog.view":"View","shortcuts-dialog.save":"Continue","style-panel.title":"Styles","style-panel.align":"Align","style-panel.arrowheads":"Arrowheads","style-panel.arrowhead-start":"Start","style-panel.arrowhead-end":"End","style-panel.color":"Color","style-panel.dash":"Dash","style-panel.fill":"Fill","style-panel.font":"Font","style-panel.geo":"Shape","style-panel.label":"Label","style-panel.mixed":"Mixed","style-panel.opacity":"Opacity","style-panel.size":"Size","style-panel.spline":"Spline","style-panel.text":"Text","tool-panel.drawing":"Drawing","tool-panel.geo":"Shape","tool-panel.shapes":"Shapes","tool-panel.things":"Things","tool-panel.tools":"Tools","save-changes-prompt.title":"You have unsaved changes","save-changes-prompt.description":"Would you like to save changes to your current file?","save-changes-prompt.go-back":"Go back","save-changes-prompt.continue":"Continue","navigation-zone.toggle-minimap":"Toggle minimap","navigation-zone.zoom":"Zoom","focus-mode.toggle-focus-mode":"Toggle focus mode","toast.close":"Close","file-system.file-open-error.title":"Could not open file","file-system.file-open-error.not-a-tldraw-file":"The file you tried to open doesn't look like a tldraw file.","file-system.file-open-error.file-format-version-too-new":"The file you tried to open is from a newer version of tldraw. Please reload the page and try again.","file-system.file-open-error.generic-corrupted-file":"The file you tried to open is corrupted.","file-system.confirm-open.title":"Overwrite current project?","file-system.confirm-open.description":"Opening a file will replace your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-open.cancel":"Cancel","file-system.confirm-open.open":"Open file","file-system.confirm-open.dont-show-again":"Don't ask again","file-system.shared-document-file-open-error.title":"Could not open file","file-system.shared-document-file-open-error.description":"Opening files from shared projects is not supported.","toast.error.export-fail.title":"Failed export","toast.error.export-fail.desc":"Failed to export image","toast.error.copy-fail.title":"Failed copy","toast.error.copy-fail.desc":"Failed to copy image","context.pages.new-page":"New page","vscode.file-open.desc":"We've updated this document to work with the current version of tldraw. If you'd like to keep the original version (which will work on old.tldraw.com), click below to create a backup.","vscode.file-open.open":"Continue","vscode.file-open.backup":"Backup","vscode.file-open.backup-saved":"Backup saved","vscode.file-open.backup-failed":"Backup failed: this is not a .tldr file.","vscode.file-open.dont-show-again":"Don't ask again"},Hl=[{locale:"ar",label:""},{locale:"ca",label:"Catal"},{locale:"da",label:"Danish"},{locale:"de",label:"Deutsch"},{locale:"en",label:"English"},{locale:"es",label:"Espaol"},{locale:"fa",label:""},{locale:"fi",label:"Suomi"},{locale:"fr",label:"Franais"},{locale:"gl",label:"Galego"},{locale:"he",label:""},{locale:"it",label:"Italiano"},{locale:"ja",label:""},{locale:"ko-kr",label:""},{locale:"ku",label:""},{locale:"hi-in",label:""},{locale:"hu",label:"Magyar"},{locale:"my",label:""},{locale:"ne",label:""},{locale:"no",label:"Norwegian"},{locale:"pl",label:"Polski"},{locale:"pt-br",label:"Portugus - Brasil"},{locale:"pt-pt",label:"Portugus - Europeu"},{locale:"ro",label:"Romn"},{locale:"ru",label:"Russian"},{locale:"sv",label:"Svenska"},{locale:"te",label:""},{locale:"th",label:""},{locale:"tr",label:"Trke"},{locale:"uk",label:"Ukrainian"},{locale:"vi",label:"Ting Vit"},{locale:"zh-cn",label:"Chinese - Simplified"},{locale:"zh-tw",label:" ()"}],Vl={locale:"en",label:"English",messages:Jl};async function Ul(e,t){return await async function(e,t){if(!(await fetch(t.translations.en)).ok)return console.warn("No main translations found."),Vl;if("en"===e)return Vl;const i=Hl.find((t=>t.locale===e));if(!i)return console.warn(`No translation found for locale ${e}`),Vl;const n=await fetch(t.translations[i.locale]),s=await n.json();if(!s)return console.warn(`No messages found for locale ${e}`),Vl;const o=[];for(const r in Vl)s[r]||o.push(r);return o.length,{...Vl,messages:{...Vl.messages,...s}}}(e,t)}function Xl(){const e=(0,n().nme)();return{languages:Hl,currentLanguage:e.user.locale}}const Fl=(0,k.createContext)(null);function Kl({assetUrls:e,children:t}){return(0,T.jsx)(Fl.Provider,{value:e,children:t})}function Ql(){const e=(0,k.useContext)(Fl);if(!e)throw new Error("useAssetUrls must be used within an AssetUrlsProvider");return e}const $l=k.createContext({}),ql=()=>k.useContext($l),ec=(0,et().u4)((function({overrides:e,children:t}){const i=(0,n().nme)().userSettings.locale,s=Ql(),[o,r]=k.useState((()=>e&&e.en?{locale:"en",label:"English",messages:{...Jl,...e.en}}:{locale:"en",label:"English",messages:Jl}));return k.useEffect((()=>{let t=!1;return async function(){const n=i??navigator.language.split(/[-_]/)[0],o=await Ul(n,s);o&&!t&&(e&&e[n]?r({...o,messages:{...o.messages,...e[n]}}):r(o))}(),()=>{t=!0}}),[s,i,e]),(0,T.jsx)($l.Provider,{value:o,children:t})}));function tc(){const e=ql();return k.useCallback((function(t){return e.messages[t]??t}),[e])}async function ic(e,t,i){const n=await e.getSvg(t,{scale:"svg"===i?1:2,background:e.instanceState.exportBackground});if(!n)throw new Error("Could not construct SVG.");return n}async function nc(e,t){return new Blob([(0,n().GXs)(await ic(e,t,"svg"))],{type:"text/plain"})}async function sc(e,t,i){return await(0,n().A3N)(await ic(e,t,i),{type:i,quality:1,scale:1})}async function oc(e){navigator.clipboard.writeText(await e())}const rc=(0,k.createContext)({});function ac({children:e}){const t=(0,n().nme)(),[i,s]=(0,k.useState)([]),o=(0,k.useCallback)((e=>{const i=e.id??(0,n().NF7)();return s((t=>[...t.filter((t=>t.id!==e.id)),{...e,id:i}])),t.openMenus.add(i),i}),[t]),r=(0,k.useCallback)(((e,i)=>(s((t=>t.map((t=>t.id===e?{...t,...i}:t)))),t.openMenus.add(e),e)),[t]),a=(0,k.useCallback)((e=>(s((t=>t.filter((t=>t.id!==e||(t.onClose?.(),!1))))),t.openMenus.delete(e),e)),[t]),l=(0,k.useCallback)((()=>{s((e=>(e.forEach((e=>{e.onClose?.(),t.openMenus.delete(e.id)})),[])))}),[t]);return(0,T.jsx)(rc.Provider,{value:{dialogs:i,addDialog:o,removeDialog:a,clearDialogs:l,updateDialog:r},children:e})}function lc(){const e=(0,k.useContext)(rc);if(!e)throw new Error("useDialogs must be used within a DialogsProvider");return e}function cc(){const e=(0,n().nme)(),t=(0,k.useRef)();return(0,k.useEffect)((()=>{const i=window.document.createElement("input");async function s(t){const s=t.target.files;s&&0!==s.length&&(await(0,n().aXJ)(e,Array.from(s),e.viewportPageBounds.center,!1),i.value="")}return i.type="file",i.accept=n().KOK,i.multiple=!0,t.current=i,i.addEventListener("change",s),()=>{t.current=void 0,i.removeEventListener("change",s)}}),[e]),(0,k.useCallback)((()=>{t.current?.click()}),[t])}const dc=k.createContext({});function uc({overrides:e,children:t}){const i=(0,n().nme)(),{addDialog:o,clearDialogs:r}=lc(),{clearToasts:a}=Bl(),l=cc(),c=function(){const e=(0,n().nme)(),t=(0,k.useRef)(null),i=(0,k.useRef)(null);return(0,k.useCallback)((async function(){const s=document.createElement("div"),o=document.createElement("style"),r=(e,t)=>{e&&(e.innerHTML=""),t&&document.head.contains(t)&&document.head.removeChild(t),e&&document.body.contains(e)&&document.body.removeChild(e)};r(t.current,i.current),t.current=s,i.current=o;const a=`rs-print-surface-${(0,n().NF7)()}`;s.className=a,o.innerHTML=`\n\t\t\t.${a} {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\n\t\t\t.${a} svg {\n\t\t\t\tmax-width: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n\t\t\t@media print {\t\t\t\t  \n\t\t\t\thtml, body {\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t}\n\n\t\t\t\tbody {\n\t\t\t\t\tposition: relative;\n\t\t\t\t}\n\n\t\t\t\tbody > * {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t.${a} {\n\t\t\t\t\tdisplay: block !important;\n\t\t\t\t\tbackground: white;\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmax-width: 100%;\n\t\t\t\t}\n\n\t\t\t\t.${a}__item {\n\t\t\t\t\tpadding: 10mm;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tpage-break-after: always;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\theight: 100%;\n\t\t\t\t}\n\n\t\t\t\t.${a}__item__main {\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tmax-height: 100%;\n\t\t\t\t}\n\n\t\t\t\t.${a}__item__header {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t.${a}__item__footer {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t\ttext-align: right;\n\t\t\t\t}\n\n\t\t\t\t.${a}__item__footer__hide {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t\n\t\t\t}\n\n\t\t`;const l=()=>{document.head.appendChild(o),document.body.appendChild(s)},c=()=>{e.once("change-camera",(()=>{r(s,o)}))};function d(e,t,i){try{s.innerHTML+=`<div class="${a}__item">\n        <div class="${a}__item__header">\n          ${e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}\n        </div>\n        <div class="${a}__item__main">\n          ${i.outerHTML}\n        </div>\n        <div class="${a}__item__footer ${a}__item__footer__${t?"":"hide"}">\n          ${t??""}\n        </div>\n      </div>`}catch(wt){console.error(wt)}}function u(){e.isSafari?(l(),document.execCommand("print",!1)):window.print()}window.addEventListener("beforeprint",l),window.addEventListener("afterprint",c);const{pages:h,currentPageId:p,selectedIds:g}=e,m={scale:1,background:!1,darkMode:!1,preserveAspectRatio:"xMidYMid meet"};if(e.selectedIds.length>0){const t=await e.getSvg(g,m);if(t){const e=h.find((e=>e.id===p));d(`tldraw  ${e?.name}`,null,t),u()}}else{const t=e.currentPage,i=await e.getSvg(e.getSortedChildIds(t.id),m);i&&(d(`tldraw  ${t.name}`,null,i),u())}window.removeEventListener("beforeprint",l),window.removeEventListener("afterprint",c)}),[e])}(),{cut:d,copy:u}=Ol(),h=function(){const e=(0,n().nme)(),{addToast:t}=Bl(),i=tc();return(0,k.useCallback)((function(s=e.selectedIds,o="svg"){if(0===s.length&&(s=[...e.shapeIds]),0!==s.length)switch(o){case"svg":window.navigator.clipboard&&(window.navigator.clipboard.write?window.navigator.clipboard.write([new ClipboardItem({"text/plain":nc(e,s)})]):oc((async()=>(0,n().GXs)(await ic(e,s,o)))));break;case"jpeg":case"png":{const n="jpeg"===o?"image/jpeg":"image/png";window.navigator.clipboard.write([new ClipboardItem({[n]:sc(e,s,o).then((e=>{if(e){if(window.navigator.clipboard)return e;throw new Error("Copy not supported")}throw t({id:"copy-fail",icon:"warning-triangle",title:i("toast.error.copy-fail.title"),description:i("toast.error.copy-fail.desc")}),new Error("Copy not possible")}))})]);break}case"json":{const t=e.getContent(s);if(window.navigator.clipboard){const e=JSON.stringify(t);window.navigator.clipboard.write?window.navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([e],{type:"text/plain"})})]):oc((async()=>e))}break}default:throw new Error(`Copy type ${o} not supported.`)}}),[e,t,i])}(),p=function(){const e=(0,n().nme)(),{addToast:t}=Bl(),i=tc();return(0,k.useCallback)((async function(s=e.selectedIds,o="png"){if(0===s.length&&(s=[...e.shapeIds]),0===s.length)return;const r=await e.getSvg(s,{scale:"svg"===o?1:2,background:e.instanceState.exportBackground});if(!r)throw new Error("Could not construct SVG.");const a=1===s.length?e.getShapeById(s[0])?.id.replace(/:/,"_"):"shapes";switch(o){case"svg":{const e=await(0,n().Ck7)(r);return void(0,n().eAV)(e,`${a||"shapes"}.svg`)}case"webp":case"png":{const e=await(0,n().A3N)(r,{type:o,quality:1,scale:1});if(!e)return void t({id:"export-fail",title:i("toast.error.export-fail.title"),description:i("toast.error.export-fail.desc")});const s=URL.createObjectURL(e);return(0,n().eAV)(s,`${a||"shapes"}.${o}`),void URL.revokeObjectURL(s)}case"json":{const t=e.getContent(s),i=URL.createObjectURL(new Blob([JSON.stringify(t,null,4)],{type:"application/json"}));return(0,n().eAV)(i,`${a||"shapes"}.json`),void URL.revokeObjectURL(i)}default:throw new Error(`Export type ${o} not supported.`)}}),[e,t,i])}(),g=k.useMemo((()=>{const t=function(e){return Object.fromEntries(e.map((e=>[e.id,e])))}([{id:"edit-link",label:"action.edit-link",icon:"link",readonlyOk:!1,onSelect(){i.mark("edit-link"),o({component:Ml})}},{id:"insert-media",label:"action.insert-media",kbd:"$u",readonlyOk:!1,onSelect(){l()}},{id:"undo",label:"action.undo",icon:"undo",kbd:"$z",readonlyOk:!1,onSelect(){i.undo()}},{id:"redo",label:"action.redo",icon:"redo",kbd:"$!z",readonlyOk:!1,onSelect(){i.redo()}},{id:"export-as-svg",label:"action.export-as-svg",menuLabel:"action.export-as-svg.short",contextMenuLabel:"action.export-as-svg.short",readonlyOk:!0,onSelect(){p(i.selectedIds,"svg")}},{id:"export-as-png",label:"action.export-as-png",menuLabel:"action.export-as-png.short",contextMenuLabel:"action.export-as-png.short",readonlyOk:!0,onSelect(){p(i.selectedIds,"png")}},{id:"export-as-json",label:"action.export-as-json",menuLabel:"action.export-as-json.short",contextMenuLabel:"action.export-as-json.short",readonlyOk:!0,onSelect(){p(i.selectedIds,"json")}},{id:"copy-as-svg",label:"action.copy-as-svg",menuLabel:"action.copy-as-svg.short",contextMenuLabel:"action.copy-as-svg.short",kbd:"$!c",readonlyOk:!0,onSelect(){h(i.selectedIds,"svg")}},{id:"copy-as-png",label:"action.copy-as-png",menuLabel:"action.copy-as-png.short",contextMenuLabel:"action.copy-as-png.short",readonlyOk:!0,onSelect(){h(i.selectedIds,"png")}},{id:"copy-as-json",label:"action.copy-as-json",menuLabel:"action.copy-as-json.short",contextMenuLabel:"action.copy-as-json.short",readonlyOk:!0,onSelect(){h(i.selectedIds,"json")}},{id:"toggle-auto-size",label:"action.toggle-auto-size",readonlyOk:!1,onSelect(){i.mark(),i.updateShapes(i.selectedShapes.filter((e=>e&&"text"===e.type&&!1===e.props.autoSize)).map((e=>({id:e.id,type:e.type,props:{...e.props,w:8,autoSize:!0}}))))}},{id:"open-embed-link",label:"action.open-embed-link",readonlyOk:!0,onSelect(){const e=i.selectedIds,t="No embed shapes selected";if(1!==e.length)return void console.error(t);const s=i.getShapeById(e[0]);s&&n().gGX.is(s)?(0,n().D1x)(s.props.url,"_blank"):console.error(t)}},{id:"convert-to-bookmark",label:"action.convert-to-bookmark",readonlyOk:!1,onSelect(){const e=i.selectedIds.map((e=>i.getShapeById(e))),t=[],s=[];for(const o of e){if(!o||!n().gGX.is(o)||!o.props.url)continue;const e=new(ur().hd)(o.x,o.y);e.rot(-o.rotation),e.add(new(ur().hd)(o.props.w/2-n().e46/2,o.props.h/2-n().RPb/2)),e.rot(o.rotation),t.push({id:i.createShapeId(),type:"bookmark",rotation:o.rotation,x:e.x,y:e.y,props:{url:o.props.url,opacity:"1"}}),s.push(o.id)}i.mark("convert shapes to bookmark"),i.deleteShapes(s),i.createShapes(t)}},{id:"convert-to-embed",label:"action.convert-to-embed",readonlyOk:!1,onSelect(){const e=i.selectedIds,t=(0,s().oE)(e.map((e=>i.getShapeById(e)))),o=[],r=[];for(const s of t){if(!n().lGR.is(s))continue;const{url:e}=s.props,t=(0,n().g1B)(s.props.url);if(!t)continue;if(!t.definition)continue;const{width:a,height:l,doesResize:c}=t.definition,d=new(ur().hd)(s.x,s.y);d.rot(-s.rotation),d.add(new(ur().hd)(s.props.w/2-a/2,s.props.h/2-l/2)),d.rot(s.rotation),o.push({id:i.createShapeId(),type:"embed",x:d.x,y:d.y,rotation:s.rotation,props:{url:e,w:a,h:l,doesResize:c}}),r.push(s.id)}i.mark("convert shapes to embed"),i.deleteShapes(r),i.createShapes(o)}},{id:"duplicate",kbd:"$d",label:"action.duplicate",icon:"duplicate",readonlyOk:!1,onSelect(){if("select"!==i.currentToolId)return;const e=i.selectedIds,t=ur().Ax.Common((0,s().oE)(e.map((e=>i.getPageBoundsById(e))))),n=i.canMoveCamera?{x:t.width+10,y:0}:{x:16/i.camera.z,y:16/i.camera.z};i.mark("duplicate shapes"),i.duplicateShapes(e,n)}},{id:"ungroup",label:"action.ungroup",kbd:"$!g",icon:"ungroup",readonlyOk:!1,onSelect(){i.mark("ungroup"),i.ungroupShapes(i.selectedIds)}},{id:"group",label:"action.group",kbd:"$g",icon:"group",readonlyOk:!1,onSelect(){1===i.selectedShapes.length&&"group"===i.selectedShapes[0].type?(i.mark("ungroup"),i.ungroupShapes(i.selectedIds)):(i.mark("group"),i.groupShapes(i.selectedIds))}},{id:"align-left",label:"action.align-left",kbd:"?A",icon:"align-left",readonlyOk:!1,onSelect(){i.mark("align left"),i.alignShapes("left",i.selectedIds)}},{id:"align-center-horizontal",label:"action.align-center-horizontal",contextMenuLabel:"action.align-center-horizontal.short",kbd:"?H",icon:"align-center-horizontal",readonlyOk:!1,onSelect(){i.mark("align center horizontal"),i.alignShapes("center-horizontal",i.selectedIds)}},{id:"align-right",label:"action.align-right",kbd:"?D",icon:"align-right",readonlyOk:!1,onSelect(){i.mark("align right"),i.alignShapes("right",i.selectedIds)}},{id:"align-center-vertical",label:"action.align-center-vertical",contextMenuLabel:"action.align-center-vertical.short",kbd:"?V",icon:"align-center-vertical",readonlyOk:!1,onSelect(){i.mark("align center vertical"),i.alignShapes("center-vertical",i.selectedIds)}},{id:"align-top",label:"action.align-top",icon:"align-top",kbd:"?W",readonlyOk:!1,onSelect(){i.mark("align top"),i.alignShapes("top",i.selectedIds)}},{id:"align-bottom",label:"action.align-bottom",icon:"align-bottom",kbd:"?S",readonlyOk:!1,onSelect(){i.mark("align bottom"),i.alignShapes("bottom",i.selectedIds)}},{id:"distribute-horizontal",label:"action.distribute-horizontal",contextMenuLabel:"action.distribute-horizontal.short",icon:"distribute-horizontal",readonlyOk:!1,onSelect(){i.mark("distribute horizontal"),i.distributeShapes("horizontal",i.selectedIds)}},{id:"distribute-vertical",label:"action.distribute-vertical",contextMenuLabel:"action.distribute-vertical.short",icon:"distribute-vertical",readonlyOk:!1,onSelect(){i.mark("distribute vertical"),i.distributeShapes("vertical",i.selectedIds)}},{id:"stretch-horizontal",label:"action.stretch-horizontal",contextMenuLabel:"action.stretch-horizontal.short",icon:"stretch-horizontal",readonlyOk:!1,onSelect(){i.mark("stretch horizontal"),i.stretchShapes("horizontal",i.selectedIds)}},{id:"stretch-vertical",label:"action.stretch-vertical",contextMenuLabel:"action.stretch-vertical.short",icon:"stretch-vertical",readonlyOk:!1,onSelect(){i.mark("stretch vertical"),i.stretchShapes("vertical",i.selectedIds)}},{id:"flip-horizontal",label:"action.flip-horizontal",contextMenuLabel:"action.flip-horizontal.short",kbd:"!h",readonlyOk:!1,onSelect(){i.mark("flip horizontal"),i.flipShapes("horizontal",i.selectedIds)}},{id:"flip-vertical",label:"action.flip-vertical",contextMenuLabel:"action.flip-vertical.short",kbd:"!v",readonlyOk:!1,onSelect(){i.mark("flip vertical"),i.flipShapes("vertical",i.selectedIds)}},{id:"pack",label:"action.pack",icon:"pack",readonlyOk:!1,onSelect(){i.mark("pack"),i.packShapes(i.selectedIds)}},{id:"stack-vertical",label:"action.stack-vertical",contextMenuLabel:"action.stack-vertical.short",icon:"stack-vertical",readonlyOk:!1,onSelect(){i.mark("stack-vertical"),i.stackShapes("vertical",i.selectedIds)}},{id:"stack-horizontal",label:"action.stack-horizontal",contextMenuLabel:"action.stack-horizontal.short",icon:"stack-horizontal",readonlyOk:!1,onSelect(){i.mark("stack-horizontal"),i.stackShapes("horizontal",i.selectedIds)}},{id:"bring-to-front",label:"action.bring-to-front",kbd:"]",icon:"bring-to-front",readonlyOk:!1,onSelect(){i.mark("bring to front"),i.bringToFront()}},{id:"bring-forward",label:"action.bring-forward",icon:"bring-forward",kbd:"?]",readonlyOk:!1,onSelect(){i.mark("bring forward"),i.bringForward()}},{id:"send-backward",label:"action.send-backward",icon:"send-backward",kbd:"?[",readonlyOk:!1,onSelect(){i.mark("send backward"),i.sendBackward()}},{id:"send-to-back",label:"action.send-to-back",icon:"send-to-back",kbd:"[",readonlyOk:!1,onSelect(){i.mark("send to back"),i.sendToBack()}},{id:"cut",label:"action.cut",kbd:"$x",readonlyOk:!1,onSelect(){i.mark("cut"),d()}},{id:"copy",label:"action.copy",kbd:"$c",readonlyOk:!0,onSelect(){u()}},{id:"paste",label:"action.paste",kbd:"$v",readonlyOk:!1,onSelect(){}},{id:"select-all",label:"action.select-all",kbd:"$a",readonlyOk:!0,onSelect(){"select"!==i.currentToolId&&(i.cancel(),i.setSelectedTool("select")),i.mark("select all kbd"),i.selectAll()}},{id:"select-none",label:"action.select-none",readonlyOk:!0,onSelect(){i.mark("select none"),i.selectNone()}},{id:"delete",label:"action.delete",kbd:"",icon:"trash",readonlyOk:!1,onSelect(){"select"===i.currentToolId&&(i.mark("delete"),i.deleteShapes())}},{id:"rotate-cw",label:"action.rotate-cw",icon:"rotate-cw",readonlyOk:!1,onSelect(){if(0===i.selectedIds.length)return;i.mark("rotate-cw");const e=i.selectionRotation%(ur().DD/2),t=(0,ur().YY)(e,0)||(0,ur().YY)(e,ur().DD/2);i.rotateShapesBy(i.selectedIds,ur().DD/2-(t?0:e))}},{id:"rotate-ccw",label:"action.rotate-ccw",icon:"rotate-ccw",readonlyOk:!1,onSelect(){if(0===i.selectedIds.length)return;i.mark("rotate-ccw");const e=i.selectionRotation%(ur().DD/2),t=(0,ur().YY)(e,0);i.rotateShapesBy(i.selectedIds,t?-ur().DD/2:-e)}},{id:"zoom-in",label:"action.zoom-in",kbd:"$=",readonlyOk:!0,onSelect(){i.zoomIn(i.viewportScreenCenter,{duration:n().kmY})}},{id:"zoom-out",label:"action.zoom-out",kbd:"$-",readonlyOk:!0,onSelect(){i.zoomOut(i.viewportScreenCenter,{duration:n().kmY})}},{id:"zoom-to-100",label:"action.zoom-to-100",icon:"reset-zoom",kbd:"!0",readonlyOk:!0,onSelect(){i.resetZoom(i.viewportScreenCenter,{duration:n().kmY})}},{id:"zoom-to-fit",label:"action.zoom-to-fit",kbd:"!1",readonlyOk:!0,onSelect(){i.zoomToFit({duration:n().kmY})}},{id:"zoom-to-selection",label:"action.zoom-to-selection",kbd:"!2",readonlyOk:!0,onSelect(){i.zoomToSelection({duration:n().kmY})}},{id:"toggle-snap-mode",label:"action.toggle-snap-mode",menuLabel:"action.toggle-snap-mode.menu",readonlyOk:!1,onSelect(){i.updateUserDocumentSettings({isSnapMode:!i.userDocumentSettings.isSnapMode},!0)},checkbox:!0},{id:"toggle-dark-mode",label:"action.toggle-dark-mode",menuLabel:"action.toggle-dark-mode.menu",kbd:"$/",readonlyOk:!0,onSelect(){i.updateUserDocumentSettings({isDarkMode:!i.userDocumentSettings.isDarkMode},!0)},checkbox:!0},{id:"toggle-transparent",label:"action.toggle-transparent",menuLabel:"action.toggle-transparent.menu",contextMenuLabel:"action.toggle-transparent.context-menu",readonlyOk:!0,onSelect(){i.updateInstanceState({exportBackground:!i.instanceState.exportBackground},!0)},checkbox:!0},{id:"toggle-tool-lock",label:"action.toggle-tool-lock",menuLabel:"action.toggle-tool-lock.menu",readonlyOk:!1,kbd:"q",onSelect(){i.updateInstanceState({isToolLocked:!i.instanceState.isToolLocked},!0)},checkbox:!0},{id:"toggle-focus-mode",label:"action.toggle-focus-mode",menuLabel:"action.toggle-focus-mode.menu",readonlyOk:!0,kbd:"$.",checkbox:!0,onSelect(){requestAnimationFrame((()=>{i.batch((()=>{r(),a(),i.updateInstanceState({isFocusMode:!i.instanceState.isFocusMode},!0)}))}))}},{id:"toggle-grid",label:"action.toggle-grid",menuLabel:"action.toggle-grid.menu",readonlyOk:!0,kbd:"$'",onSelect(){i.updateUserDocumentSettings({isGridMode:!i.userDocumentSettings.isGridMode},!0)},checkbox:!0},{id:"toggle-debug-mode",label:"action.toggle-debug-mode",menuLabel:"action.toggle-debug-mode.menu",readonlyOk:!0,onSelect(){i.updateInstanceState({isDebugMode:!i.instanceState.isDebugMode},!0)},checkbox:!0},{id:"print",label:"action.print",kbd:"$p",readonlyOk:!0,onSelect(){c()}},{id:"nudge-left",kbd:"left,shift+left",label:"action.nudge-left",readonlyOk:!1,onSelect(){i.mark("nudge left"),i.nudgeShapes(i.selectedIds,"left",i.inputs.shiftKey)}},{id:"nudge-up",kbd:"up,shift+up",label:"action.nudge-up",readonlyOk:!1,onSelect(){i.mark("nudge up"),i.nudgeShapes(i.selectedIds,"up",i.inputs.shiftKey)}},{id:"nudge-right",kbd:"right,shift+right",label:"action.nudge-right",readonlyOk:!1,onSelect(){i.mark("nudge right"),i.nudgeShapes(i.selectedIds,"right",i.inputs.shiftKey)}},{id:"nudge-down",kbd:"down,shift+down",label:"action.nudge-down",readonlyOk:!1,onSelect(){i.mark("nudge down"),i.nudgeShapes(i.selectedIds,"down",i.inputs.shiftKey)}},{id:"exit-pen-mode",label:"action.exit-pen-mode",icon:"cross-2",readonlyOk:!0,onSelect(){i.setPenMode(!1)}},{id:"back-to-content",label:"action.back-to-content",icon:"arrow-left",readonlyOk:!0,onSelect(){const e=i.selectedPageBounds??i.allShapesCommonBounds;e&&i.zoomToBounds(e.minX,e.minY,e.width,e.height,Math.min(1,i.camera.z),{duration:220})}}]);return e?e(i,t,void 0):t}),[e,i,o,l,p,h,d,u,r,a,c]);return(0,T.jsx)(dc.Provider,{value:g,children:t})}function hc(){const e=k.useContext(dc);if(!e)throw new Error("useTools must be used within a ToolProvider");return e}const pc=[0,380,420,460,580,640,840,1023],gc=k.createContext(0);function mc({children:e}){const t=(0,n().nme)(),i=(0,et().h)("breakpoint",(()=>{const{width:e}=t.viewportScreenBounds,i=pc;for(let t=0;t<i.length-1;t++)if(e>i[t]&&e<=i[t+1])return t;return i.length}),[t]);return(0,T.jsx)(gc.Provider,{value:i,children:e})}function Ic(){let e=(0,k.useContext)(gc);const t=new URL(window.location.href).searchParams.get("layout");return"desktop"===t?e=7:"mobile"===t&&(e=1),e}function fc(){const e=(0,n().nme)();return(0,et().h)("hasLinkShapeSelected",(()=>{const{selectedShapes:t}=e;return 1===t.length&&"url"in t[0].props&&"embed"!==t[0].type}),[e])}const yc=k.createContext({}),bc=(0,et().u4)((function({overrides:e,children:t}){const i=(0,n().nme)(),s=hc(),o=i.selectedIds.length,r=o>0,a=o>1,l=o>2,c=rr(),d=ar(),u=lr(),h=fc(),p=Ic(),g=1===i.camera.z,m=(0,k.useMemo)((()=>{const t=[sr(s["align-left"],{disabled:!a}),sr(s["align-center-horizontal"],{disabled:!a}),sr(s["align-right"],{disabled:!a}),sr(s["stretch-horizontal"],{disabled:!a}),sr(s["align-top"],{disabled:!a}),sr(s["align-center-vertical"],{disabled:!a}),sr(s["align-bottom"],{disabled:!a}),sr(s["stretch-vertical"],{disabled:!a}),sr(s["distribute-horizontal"],{disabled:!l}),sr(s["distribute-vertical"],{disabled:!l}),sr(s["stack-horizontal"],{disabled:!c}),sr(s["stack-vertical"],{disabled:!c}),sr(s["send-to-back"],{disabled:!r}),sr(s["send-backward"],{disabled:!r}),sr(s["bring-forward"],{disabled:!r}),sr(s["bring-to-front"],{disabled:!r}),p<5?sr(s["zoom-to-100"],{disabled:!!g}):sr(s["rotate-ccw"],{disabled:!r}),sr(s["rotate-cw"],{disabled:!r}),sr(s["edit-link"],{disabled:!h}),d?sr(s.group,{disabled:!a}):u?sr(s.ungroup):sr(s.group,{disabled:!a})];return e?e(i,t,{actions:s,oneSelected:r,twoSelected:a,threeSelected:l}):t}),[i,g,d,e,s,r,a,l,c,u,h,p]);return(0,T.jsx)(yc.Provider,{value:m,children:t})}));function wc(){const e=(0,n().nme)();return(0,et().h)("useCanRedo",(()=>e.canRedo),[e])}function Cc(){const e=(0,n().nme)();return(0,et().h)("useCanUndo",(()=>e.canUndo),[e])}function Mc(){const e=(0,n().nme)();return(0,et().h)("showAutoSizeToggle",(()=>{const{selectedShapes:t}=e;return 1===t.length&&"text"===t[0].type&&!1===t[0].props.autoSize}),[e])}const xc=k.createContext({}),Ac="undefined"!=typeof window&&"navigator"in window&&Boolean(navigator.clipboard)&&Boolean(navigator.clipboard.read),Sc=(0,et().u4)((function({overrides:e,children:t}){const i=(0,n().nme)(),s=hc(),o=Mc(),r=function(){const e=(0,n().nme)();return(0,et().h)("onlyFlippableShape",(()=>{const{selectedShapes:t}=e;return 1===t.length&&t.every((e=>"group"===e.type||(0,n().fty)(e)))}),[e])}(),a=i.selectedIds.length,l=a>0,c=(0,et().h)("oneEmbedSelected",(()=>1===i.selectedIds.length&&i.selectedIds.some((e=>{const t=i.getShapeById(e);return t&&n().gGX.is(t)&&t.props.url}))),[]),d=(0,et().h)("oneEmbeddableBookmarkSelected",(()=>1===i.selectedIds.length&&i.selectedIds.some((e=>{const t=i.getShapeById(e);return t&&n().lGR.is(t)&&(0,n().g1B)(t.props.url)}))),[]),u=a>1,h=a>2,p=rr(),g=(0,et().h)("atLeastOneShapeOnPage",(()=>i.shapeIds.size>0),[]),m=(0,et().h)("isTransparentBg",(()=>i.instanceState.exportBackground),[]),I=ar(),f=lr(),y=Boolean(window.navigator.clipboard?.write),b=fc(),w=(0,k.useMemo)((()=>{let t=er([tr("selection",c&&sr(s["open-embed-link"]),c&&sr(s["convert-to-bookmark"]),d&&sr(s["convert-to-embed"]),o&&sr(s["toggle-auto-size"]),b&&sr(s["edit-link"]),l&&sr(s.duplicate),I&&sr(s.group),f&&sr(s.ungroup)),tr("modify",(u||r)&&ir("arrange","context-menu.arrange",u&&tr("align",sr(s["align-left"]),sr(s["align-center-horizontal"]),sr(s["align-right"]),sr(s["align-top"]),sr(s["align-center-vertical"]),sr(s["align-bottom"])),h&&tr("distribute",sr(s["distribute-horizontal"]),sr(s["distribute-vertical"])),u&&tr("stretch",sr(s["stretch-horizontal"]),sr(s["stretch-vertical"])),r&&tr("flip",sr(s["flip-horizontal"]),sr(s["flip-vertical"])),u&&tr("order",sr(s.pack,{disabled:!u}),p&&sr(s["stack-vertical"]),p&&sr(s["stack-horizontal"]))),l&&ir("reorder","context-menu.reorder",tr("reorder",sr(s["bring-to-front"]),sr(s["bring-forward"]),sr(s["send-backward"]),sr(s["send-to-back"]))),l&&nr("MOVE_TO_PAGE_MENU",{readonlyOk:!1})),tr("clipboard-group",l&&sr(s.cut),l&&sr(s.copy),Ac&&nr("MENU_PASTE",{readonlyOk:!1})),g&&tr("conversions",ir("copy-as","context-menu.copy-as",tr("copy-as-group",sr(s["copy-as-svg"]),y&&sr(s["copy-as-png"]),sr(s["copy-as-json"])),tr("export-bg",sr(s["toggle-transparent"],{checked:!m}))),ir("export-as","context-menu.export-as",tr("export-as-group",sr(s["export-as-svg"]),sr(s["export-as-png"]),sr(s["export-as-json"])),tr("export-bg,",sr(s["toggle-transparent"],{checked:!m})))),g&&tr("set-selection-group",sr(s["select-all"]),l&&sr(s["select-none"])),l&&tr("delete-group",sr(s.delete))]);return e&&(t=e(i,t,{actions:s,oneSelected:l,twoSelected:u,threeSelected:h,showAutoSizeToggle:o,showUngroup:f,onlyFlippableShapeSelected:r})),t}),[i,e,s,l,u,h,o,r,g,p,I,f,y,b,c,d,m]);return(0,T.jsx)(xc.Provider,{value:w,children:t})}));function vc(){const e=k.useContext(xc);if(!e)throw new Error("useContextMenuSchema must be used inside of a ContextMenuSchemaProvider.");return e}const Lc=()=>{const e=tc(),t=ed(),i=function(){const e=k.useContext(ld);if(!e)throw new Error("Shortcuts must be used inside of a ShortcutsProvider.");return e}();return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(Kr,{className:"tlui-shortcuts-dialog__header",children:[(0,T.jsx)(Qr,{children:e("shortcuts-dialog.title")}),(0,T.jsx)($r,{})]}),(0,T.jsx)(qr,{className:"tlui-shortcuts-dialog__body",children:i.map((function i(n){if(t&&!n.readonlyOk)return null;switch(n.type){case"group":return(0,T.jsxs)("div",{className:"tlui-shortcuts-dialog__group",children:[(0,T.jsx)("h2",{className:"tlui-shortcuts-dialog__group__title",children:e(n.id)}),(0,T.jsx)("div",{className:"tlui-shortcuts-dialog__group__content",children:n.children.filter((e=>"item"===e.type&&e.actionItem.kbd)).map(i)})]},n.id);case"item":{const{id:t,label:i,shortcutsLabel:s,kbd:o}=n.actionItem;return(0,T.jsxs)("div",{className:"tlui-shortcuts-dialog__key-pair",children:[(0,T.jsx)("div",{className:"tlui-shortcuts-dialog__key-pair__key",children:e(s??i)}),(0,T.jsx)("div",{className:"tlui-shortcuts-dialog__key-pair__value",children:(0,T.jsx)(Xr,{children:o})})]},t)}}}))}),(0,T.jsx)("div",{className:"tlui-dialog__scrim"})]})},jc=k.createContext({}),Nc=(0,et().u4)((function({overrides:e,children:t}){const i=(0,n().nme)(),o=hc(),r=i.selectedIds.length,a=r>0,l=r>1,c=r>2,{languages:d,currentLanguage:u}=Xl(),{addDialog:h}=lc(),p=(0,k.useMemo)((()=>{const t=(0,s().oE)([tr("top",nr("LANGUAGE_MENU",{readonlyOk:!0}),sr({id:"keyboard-shortcuts",label:"help-menu.keyboard-shortcuts",readonlyOk:!0,onSelect(){h({component:Lc})}}))]);return e?e(i,t,{actions:o,currentLanguage:u,languages:d,oneSelected:a,twoSelected:l,threeSelected:c}):t}),[i,e,d,o,a,l,c,u,h]);return(0,T.jsx)(jc.Provider,{value:p,children:t})}));var Dc="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function Ec(e,t,i,n){e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on".concat(t),(function(){i(window.event)}))}function kc(e,t){for(var i=t.slice(0,t.length-1),n=0;n<i.length;n++)i[n]=e[i[n].toLowerCase()];return i}function Zc(e){"string"!=typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),i=t.lastIndexOf("");i>=0;)t[i-1]+=",",t.splice(i,1),i=t.lastIndexOf("");return t}for(var Tc={backspace:8,"":8,tab:9,clear:12,enter:13,"":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":Dc?173:189,"=":Dc?61:187,";":Dc?59:186,"'":222,"[":219,"]":221,"\\":220},Wc={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,command:91},zc={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Pc={16:!1,18:!1,17:!1,91:!1},Yc={},Oc=1;Oc<20;Oc++)Tc["f".concat(Oc)]=111+Oc;var Rc=[],Gc=!1,_c="all",Bc=[],Jc=function(e){return Tc[e.toLowerCase()]||Wc[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function Hc(e){_c=e||"all"}function Vc(){return _c||"all"}var Uc=function(e){var t=e.key,i=e.scope,n=e.method,s=e.splitKey,o=void 0===s?"+":s;Zc(t).forEach((function(e){var t=e.split(o),s=t.length,r=t[s-1],a="*"===r?"*":Jc(r);if(Yc[a]){i||(i=Vc());var l=s>1?kc(Wc,t):[];Yc[a]=Yc[a].filter((function(e){return!((!n||e.method===n)&&e.scope===i&&function(e,t){for(var i=e.length>=t.length?e:t,n=e.length>=t.length?t:e,s=!0,o=0;o<i.length;o++)-1===n.indexOf(i[o])&&(s=!1);return s}(e.mods,l))}))}}))};function Xc(e,t,i,n){var s;if(t.element===n&&(t.scope===i||"all"===t.scope)){for(var o in s=t.mods.length>0,Pc)Object.prototype.hasOwnProperty.call(Pc,o)&&(!Pc[o]&&t.mods.indexOf(+o)>-1||Pc[o]&&-1===t.mods.indexOf(+o))&&(s=!1);(0!==t.mods.length||Pc[16]||Pc[18]||Pc[17]||Pc[91])&&!s&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function Fc(e,t){var i=Yc["*"],n=e.keyCode||e.which||e.charCode;if(Kc.filter.call(this,e)){if(93!==n&&224!==n||(n=91),-1===Rc.indexOf(n)&&229!==n&&Rc.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(t){var i=zc[t];e[t]&&-1===Rc.indexOf(i)?Rc.push(i):!e[t]&&Rc.indexOf(i)>-1?Rc.splice(Rc.indexOf(i),1):"metaKey"===t&&e[t]&&3===Rc.length&&(e.ctrlKey||e.shiftKey||e.altKey||(Rc=Rc.slice(Rc.indexOf(i))))})),n in Pc){for(var s in Pc[n]=!0,Wc)Wc[s]===n&&(Kc[s]=!0);if(!i)return}for(var o in Pc)Object.prototype.hasOwnProperty.call(Pc,o)&&(Pc[o]=e[zc[o]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===Rc.indexOf(17)&&Rc.push(17),-1===Rc.indexOf(18)&&Rc.push(18),Pc[17]=!0,Pc[18]=!0);var r=Vc();if(i)for(var a=0;a<i.length;a++)i[a].scope===r&&("keydown"===e.type&&i[a].keydown||"keyup"===e.type&&i[a].keyup)&&Xc(e,i[a],r,t);if(n in Yc)for(var l=0;l<Yc[n].length;l++)if(("keydown"===e.type&&Yc[n][l].keydown||"keyup"===e.type&&Yc[n][l].keyup)&&Yc[n][l].key){for(var c=Yc[n][l],d=c.splitKey,u=c.key.split(d),h=[],p=0;p<u.length;p++)h.push(Jc(u[p]));h.sort().join("")===Rc.sort().join("")&&Xc(e,c,r,t)}}}function Kc(e,t,i){Rc=[];var n=Zc(e),s=[],o="all",r=document,a=0,l=!1,c=!0,d="+",u=!1;for(void 0===i&&"function"==typeof t&&(i=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(o=t.scope),t.element&&(r=t.element),t.keyup&&(l=t.keyup),void 0!==t.keydown&&(c=t.keydown),void 0!==t.capture&&(u=t.capture),"string"==typeof t.splitKey&&(d=t.splitKey)),"string"==typeof t&&(o=t);a<n.length;a++)s=[],(e=n[a].split(d)).length>1&&(s=kc(Wc,e)),(e="*"===(e=e[e.length-1])?"*":Jc(e))in Yc||(Yc[e]=[]),Yc[e].push({keyup:l,keydown:c,scope:o,mods:s,shortcut:n[a],method:i,key:n[a],splitKey:d,element:r});void 0!==r&&!function(e){return Bc.indexOf(e)>-1}(r)&&window&&(Bc.push(r),Ec(r,"keydown",(function(e){Fc(e,r)}),u),Gc||(Gc=!0,Ec(window,"focus",(function(){Rc=[]}),u)),Ec(r,"keyup",(function(e){Fc(e,r),function(e){var t=e.keyCode||e.which||e.charCode,i=Rc.indexOf(t);if(i>=0&&Rc.splice(i,1),e.key&&"meta"===e.key.toLowerCase()&&Rc.splice(0,Rc.length),93!==t&&224!==t||(t=91),t in Pc)for(var n in Pc[t]=!1,Wc)Wc[n]===t&&(Kc[n]=!1)}(e)}),u))}var Qc={getPressedKeyString:function(){return Rc.map((function(e){return function(e){return Object.keys(Tc).find((function(t){return Tc[t]===e}))}(e)||function(e){return Object.keys(Wc).find((function(t){return Wc[t]===e}))}(e)||String.fromCharCode(e)}))},setScope:Hc,getScope:Vc,deleteScope:function(e,t){var i,n;for(var s in e||(e=Vc()),Yc)if(Object.prototype.hasOwnProperty.call(Yc,s))for(i=Yc[s],n=0;n<i.length;)i[n].scope===e?i.splice(n,1):n++;Vc()===e&&Hc(t||"all")},getPressedKeyCodes:function(){return Rc.slice(0)},isPressed:function(e){return"string"==typeof e&&(e=Jc(e)),-1!==Rc.indexOf(e)},filter:function(e){var t=e.target||e.srcElement,i=t.tagName,n=!0;return!t.isContentEditable&&("INPUT"!==i&&"TEXTAREA"!==i&&"SELECT"!==i||t.readOnly)||(n=!1),n},trigger:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(Yc).forEach((function(i){Yc[i].filter((function(i){return i.scope===t&&i.shortcut===e})).forEach((function(e){e&&e.method&&e.method()}))}))},unbind:function(e){if(void 0===e)Object.keys(Yc).forEach((function(e){return delete Yc[e]}));else if(Array.isArray(e))e.forEach((function(e){e.key&&Uc(e)}));else if("object"==typeof e)e.key&&Uc(e);else if("string"==typeof e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var s=i[0],o=i[1];"function"==typeof s&&(o=s,s=""),Uc({key:e,scope:s,method:o,splitKey:"+"})}},keyMap:Tc,modifier:Wc,modifierMap:zc};for(var $c in Qc)Object.prototype.hasOwnProperty.call(Qc,$c)&&(Kc[$c]=Qc[$c]);if("undefined"!=typeof window){var qc=window.hotkeys;Kc.noConflict=function(e){return e&&window.hotkeys===Kc&&(window.hotkeys=qc),Kc},window.hotkeys=Kc}function ed(){const e=(0,n().nme)();return(0,et().h)("isReadOnlyMode",(()=>e.isReadOnly),[e])}var td=()=>i(360955);const id=(0,et().u4)((function({onClose:e}){const t=(0,n().nme)(),i=tc(),s=Ql(),[o,r]=(0,k.useState)(null),[a,l]=(0,k.useState)(""),[c,d]=(0,k.useState)(null),[u,h]=(0,k.useState)(!1),p=(0,k.useRef)(-1);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(Kr,{children:[(0,T.jsx)(Qr,{children:o?`${i("embed-dialog.title")}  ${o.title}`:i("embed-dialog.title")}),(0,T.jsx)($r,{})]}),o?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(qr,{className:"tlui-embed-dialog__enter",children:(0,T.jsxs)("div",{className:"tlui-embed-dialog",children:[(0,T.jsx)(Ga,{className:"tlui-embed-dialog__input",label:"embed-dialog.url",placeholder:"http://example.com",autofocus:!0,onValueChange:e=>{l(e);const t=(0,n().g1B)(e);d(t&&t.definition.type===o.type?t:null),h(!1),clearTimeout(p.current),p.current=setTimeout((()=>h(!t)),320)}}),""===a?(0,T.jsxs)("div",{className:"tlui-embed-dialog__instruction",children:[(0,T.jsx)("span",{children:i("embed-dialog.instruction")})," ",o.instructionLink&&(0,T.jsxs)("a",{target:"_blank",rel:"noopener noreferrer",href:o.instructionLink,className:"tlui-embed-dialog__instruction__link",children:["Learn more.",(0,T.jsx)(Br,{icon:"external-link",small:!0})]})]}):(0,T.jsx)("div",{className:"tlui-embed-dialog__warning",children:u?i("embed-dialog.invalid-url"):""})]})}),(0,T.jsxs)(ea,{className:"tlui-dialog__footer__actions",children:[(0,T.jsx)(Fr,{onClick:()=>{r(null),d(null),l("")},label:"embed-dialog.back"}),(0,T.jsx)("div",{className:"tlui-spacer"}),(0,T.jsx)(Fr,{label:"embed-dialog.cancel",onClick:e}),(0,T.jsx)(Fr,{type:"primary",disabled:!c,label:"embed-dialog.create",onClick:()=>{c&&((0,n().Av2)(t,a,t.viewportPageCenter,{width:c.definition.width,height:c.definition.height,doesResize:c.definition.doesResize}),e())}})]})]}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(qr,{className:"tlui-embed-dialog__list",children:td().$i.map((e=>(0,T.jsxs)("button",{className:"tlui-embed-dialog__item",onClick:()=>r(e),children:[(0,T.jsx)("div",{className:"tlui-embed-dialog__item__image",children:(0,T.jsx)("div",{className:"tlui-embed-dialog__item__image__img",style:{backgroundImage:`url(${s.embedIcons[e.type]})`}})}),(0,T.jsx)("div",{className:"tlui-embed-dialog__item__title",children:e.title})]},e.type)))}),(0,T.jsx)("div",{className:"tlui-dialog__scrim"})]})]})})),nd=k.createContext({});function sd({overrides:e,children:t}){const i=(0,n().nme)(),{addDialog:s}=lc(),o=cc(),r=k.useMemo((()=>{const t=function(e){return Object.fromEntries(e.map((e=>[e.id,e])))}([{id:"select",label:"tool.select",icon:"tool-pointer",kbd:"v",readonlyOk:!0,onSelect(){i.setSelectedTool("select")}},{id:"hand",label:"tool.hand",icon:"tool-hand",kbd:"h",readonlyOk:!0,onSelect(){i.setSelectedTool("hand")}},{id:"eraser",label:"tool.eraser",icon:"tool-eraser",kbd:"e",readonlyOk:!0,onSelect(){i.setSelectedTool("eraser")}},{id:"draw",label:"tool.draw",readonlyOk:!0,icon:"tool-pencil",kbd:"d,b,x",onSelect(){i.setSelectedTool("draw")}},...[...n().PJm].map((e=>({id:e,label:`tool.${e}`,readonlyOk:!0,meta:{geo:e},kbd:"rectangle"===e?"r":"ellipse"===e?"o":void 0,icon:"geo-"+e,onSelect(){i.batch((()=>{i.updateInstanceState({propsForNextShape:{...i.instanceState.propsForNextShape,geo:e}},!0),i.setSelectedTool("geo")}))}}))),{id:"arrow",label:"tool.arrow",readonlyOk:!0,icon:"tool-arrow",kbd:"a",onSelect(){i.setSelectedTool("arrow")}},{id:"line",label:"tool.line",readonlyOk:!0,icon:"tool-line",kbd:"l",onSelect(){i.setSelectedTool("line")}},{id:"frame",label:"tool.frame",readonlyOk:!0,icon:"tool-frame",kbd:"f",onSelect(){i.setSelectedTool("frame")}},{id:"text",label:"tool.text",readonlyOk:!0,icon:"tool-text",kbd:"t",onSelect(){i.setSelectedTool("text")}},{id:"asset",label:"tool.asset",readonlyOk:!0,icon:"tool-media",kbd:"$u",onSelect(){o()}},{id:"note",label:"tool.note",readonlyOk:!0,icon:"tool-note",kbd:"n",onSelect(){i.setSelectedTool("note")}},{id:"embed",label:"tool.embed",readonlyOk:!0,icon:"tool-embed",onSelect(){s({component:id})}}]);return e?e(i,t,{insertMedia:o}):t}),[i,e,o,s]);return(0,T.jsx)(nd.Provider,{value:r,children:t})}function od(){const e=k.useContext(nd);if(!e)throw new Error("useTools must be used within a ToolProvider");return e}const rd=["copy","cut","paste","asset"];function ad(e){let t="";const i=e.split("");return t=1===i.length?i[0]:"!"===i[0]?`shift+${i[1]}`:"?"===i[0]?`alt+${i[1]}`:"$"===i[0]?"!"===i[1]?`cmd+shift+${i[2]},ctrl+shift+${i[2]}`:"?"===i[1]?`cmd++${i[2]},ctrl+alt+${i[2]}`:`cmd+${i[1]},ctrl+${i[1]}`:e,t}const ld=k.createContext({}),cd=(0,et().u4)((function({overrides:e,children:t}){const i=(0,n().nme)(),o=od(),r=hc(),a=(0,k.useMemo)((()=>{const t=(0,s().oE)([tr("shortcuts-dialog.tools",sr(r["toggle-tool-lock"]),sr(o.select),sr(o.draw),sr(o.eraser),sr(o.hand),sr(o.rectangle),sr(o.ellipse),sr(o.arrow),sr(o.line),sr(o.text),sr(o.frame),sr(o.note)),tr("shortcuts-dialog.file",sr(r["insert-media"]),sr(r.print)),tr("shortcuts-dialog.preferences",sr(r["toggle-dark-mode"]),sr(r["toggle-focus-mode"]),sr(r["toggle-grid"])),tr("shortcuts-dialog.edit",sr(r.undo),sr(r.redo),sr(r.cut),sr(r.copy),sr(r.paste),sr(r["select-all"]),sr(r.delete),sr(r.duplicate),sr(r["export-as-svg"]),sr(r["export-as-png"])),tr("shortcuts-dialog.view",sr(r["zoom-in"]),sr(r["zoom-out"]),sr(r["zoom-to-100"]),sr(r["zoom-to-fit"]),sr(r["zoom-to-selection"])),tr("shortcuts-dialog.transform",sr(r["bring-to-front"]),sr(r["bring-forward"]),sr(r["send-backward"]),sr(r["send-to-back"]),sr(r.group),sr(r.ungroup),sr(r["flip-horizontal"]),sr(r["flip-vertical"]),sr(r["align-top"]),sr(r["align-center-vertical"]),sr(r["align-bottom"]),sr(r["align-left"]),sr(r["align-center-horizontal"]),sr(r["align-right"]))]);return e?e(i,t,{tools:o,actions:r}):t}),[i,e,r,o]);return(0,T.jsx)(ld.Provider,{value:a,children:t})}));function dd(e,t){const i=(0,n().nme)(),s=(0,k.useRef)(!1),o=(0,k.useCallback)((n=>{s.current=n,n?(i.complete(),i.openMenus.add(e)):(i.openMenus.delete(e),i.openMenus.forEach((t=>{t.startsWith(e)&&i.openMenus.delete(t)}))),t?.(n)}),[i,e,t]);return(0,k.useEffect)((()=>(s.current&&i.openMenus.add(e),()=>{s.current&&(i.openMenus.delete(e),i.openMenus.forEach((t=>{t.startsWith(e)&&i.openMenus.delete(t)})),s.current=!1)})),[i,e]),o}const ud=k.createContext({});function hd({overrides:e,children:t}){const i=(0,n().nme)(),o=hc(),r=Ic()<5,a=(0,et().h)("isDarkMode",(()=>i.userDocumentSettings.isDarkMode),[i]),l=(0,et().h)("isGridMode",(()=>i.userDocumentSettings.isGridMode),[i]),c=(0,et().h)("isSnapMode",(()=>i.userDocumentSettings.isSnapMode),[i]),d=(0,et().h)("isToolLock",(()=>i.instanceState.isToolLocked),[i]),u=(0,et().h)("isFocusMode",(()=>i.instanceState.isFocusMode),[i]),h=(0,et().h)("isDebugMode",(()=>i.instanceState.isDebugMode),[i]),p=(0,et().h)("exportBackground",(()=>i.instanceState.exportBackground),[i]),g=(0,et().h)("emptyPage",(()=>0===i.shapeIds.size),[i]),m=(0,et().h)("selectedCount",(()=>i.selectedIds.length),[i]),I=0===m,f=m>0,y=m>1,b=m>2,w=Boolean(window.navigator.clipboard?.write),C=fc(),M=Mc(),x=ar(),A=lr(),S=Cc(),v=wc(),L=(0,et().h)("isZoomedTo100",(()=>1===i.camera.z),[i]),j=(0,k.useMemo)((()=>{const t=(0,s().oE)([tr("menu",ir("file","menu.file",tr("print",sr(o.print,{disabled:g}))),ir("edit","menu.edit",tr("undo-actions",sr(o.undo,{disabled:!S}),sr(o.redo,{disabled:!v})),tr("clipboard-actions",sr(o.cut,{disabled:I}),sr(o.copy,{disabled:I}),{id:"MENU_PASTE",type:"custom",disabled:!cr,readonlyOk:!1}),tr("conversions",ir("copy-as","menu.copy-as",tr("copy-as-group",sr(o["copy-as-svg"],{disabled:g}),sr(o["copy-as-png"],{disabled:g||!w}),sr(o["copy-as-json"],{disabled:g})),tr("export-bg",sr(o["toggle-transparent"],{checked:!p}))),ir("export-as","menu.export-as",tr("export-as-group",sr(o["export-as-svg"],{disabled:g}),sr(o["export-as-png"],{disabled:g}),sr(o["export-as-json"],{disabled:g})),tr("export-bg",sr(o["toggle-transparent"],{checked:!p})))),tr("set-selection-group",sr(o["select-all"],{disabled:g}),sr(o["select-none"],{disabled:!f})),tr("selection",M&&sr(o["toggle-auto-size"]),C&&sr(o["edit-link"]),sr(o.duplicate,{disabled:!f}),x&&sr(o.group),A&&sr(o.ungroup)),tr("delete-group",sr(o.delete,{disabled:!f}))),ir("view","menu.view",tr("view-actions",sr(o["zoom-in"]),sr(o["zoom-out"]),sr(o["zoom-to-100"],{disabled:L}),sr(o["zoom-to-fit"],{disabled:g}),sr(o["zoom-to-selection"],{disabled:g||!f}))),sr(o["insert-media"])),tr("preferences",ir("preferences","menu.preferences",tr("preferences-actions",sr(o["toggle-snap-mode"],{checked:c}),sr(o["toggle-tool-lock"],{checked:d}),sr(o["toggle-grid"],{checked:l}),sr(o["toggle-dark-mode"],{checked:a}),sr(o["toggle-focus-mode"],{checked:u}),sr(o["toggle-debug-mode"],{checked:h}))),r&&nr("LANGUAGE_MENU",{readonlyOk:!0}))]);return e?e(i,t,{actions:o,noneSelected:I,oneSelected:f,twoSelected:y,threeSelected:b}):t}),[i,e,o,f,y,b,g,r,x,A,C,w,M,I,S,v,a,l,c,d,u,p,h,L]);return(0,T.jsx)(ud.Provider,{value:j,children:t})}function pd(e){return{id:e.id,type:"item",readonlyOk:e.readonlyOk,toolItem:e}}const gd=k.createContext([]);function md({overrides:e,children:t}){const i=(0,n().nme)(),s=od(),o=k.useMemo((()=>{const t=[pd(s.select),pd(s.hand),pd(s.draw),pd(s.eraser),pd(s.arrow),pd(s.text),pd(s.note),pd(s.asset),pd(s.rectangle),pd(s.ellipse),pd(s.diamond),pd(s.triangle),pd(s.trapezoid),pd(s.rhombus),pd(s.pentagon),pd(s.hexagon),pd(s.octagon),pd(s.star),pd(s.oval),pd(s["x-box"]),pd(s["arrow-right"]),pd(s["arrow-left"]),pd(s["arrow-up"]),pd(s["arrow-down"]),pd(s.line),pd(s.frame),pd(s.embed)];return e?e(i,t,{tools:s}):t}),[i,e,s]);return(0,T.jsx)(gd.Provider,{value:o,children:t})}const Id=(0,et().u4)((function(){const e=(0,n().nme)(),t=(0,n().NFA)(),i=e.pages,s=e.currentPageId,o=tc();return(0,T.jsxs)(Qo,{children:[(0,T.jsx)($o,{dir:"ltr",asChild:!0,children:(0,T.jsx)(Fr,{className:"tlui-menu__button",label:"context-menu.move-to-page","data-wd":"menu-item.move-to-page",icon:"chevron-right"})}),(0,T.jsx)(Vo,{container:t,dir:"ltr",children:(0,T.jsxs)(qo,{className:"tlui-menu",sideOffset:-4,collisionPadding:4,children:[(0,T.jsx)(Xo,{dir:"ltr",className:"tlui-menu__group","data-wd":"menu-item.pages",children:i.map((t=>(0,T.jsx)(Fo,{disabled:s===t.id,onSelect:()=>{e.mark("move_shapes_to_page"),e.moveShapesToPage(e.selectedIds,t.id)},asChild:!0,children:(0,T.jsx)(Fr,{title:t.name,className:"tlui-menu__button tlui-context-menu__move-to-page__name",children:(0,T.jsx)("span",{children:t.name})})},t.id)))},"pages"),(0,T.jsx)(Xo,{dir:"ltr",className:"tlui-menu__group","data-wd":"menu-item.new-page",children:(0,T.jsx)(Fo,{onSelect:()=>{e.mark("move_shapes_to_page");const t=n()._P5.createId(),i=e.selectedIds,s=e.currentPageId;e.batch((()=>{e.createPage("Page 1",t),e.setCurrentPageId(s),e.moveShapesToPage(i,t)}))},asChild:!0,children:(0,T.jsx)(Fr,{title:o("context.pages.new-page"),className:"tlui-menu__button tlui-context-menu__move-to-page__name",children:o("context.pages.new-page")})},"new-page")},"new-page")]})})]})})),fd=function({children:e}){const t=(0,n().nme)(),i=vc(),s=dd("context menu"),o=ed(),r=0===i.length||o&&i.every((e=>!e.readonlyOk)),a=!(0,et().h)("isSelectToolActive",(()=>"select"===t.currentToolId),[t])||r;return(0,T.jsxs)(Jo,{dir:"ltr",onOpenChange:s,children:[(0,T.jsx)(Ho,{onContextMenu:a?n().woC:void 0,dir:"ltr",disabled:a,children:e}),(0,T.jsx)(yd,{})]})};function yd(){const e=(0,n().nme)(),t=tc(),i=vc(),s=dd("context menu sub"),o=ed(),{paste:r}=Ol(),a=Ic(),l=(0,n().NFA)(),[c,d]=k.useState(!1);function u(e,i,h,p){if(o&&!i.readonlyOk)return null;switch(i.type){case"custom":switch(i.id){case"MENU_PASTE":return(0,T.jsx)(Fo,{children:(0,T.jsx)(Fr,{className:"tlui-menu__button","data-wd":`menu-item.${i.id}`,kbd:"$v",label:"action.paste",disabled:i.disabled,onClick:()=>{(!e.isSafari||e.isSafari&&e.isIos)&&navigator.clipboard.read().then((t=>{r(t,e.inputs.currentPagePoint)}))},onMouseDown:()=>{e.isSafari&&!e.isIos&&navigator.clipboard.read().then((t=>{r(t,e.inputs.currentPagePoint)}))}})},i.id);case"MOVE_TO_PAGE_MENU":return(0,T.jsx)(Id,{},i.id)}break;case"group":return(0,T.jsx)(Xo,{dir:"ltr",className:qe()("tlui-menu__group",{"tlui-menu__group__small":"submenu"===h?.type}),"data-wd":`menu-item.${i.id}`,children:i.children.map((t=>u(e,t,i,p+1)))},i.id);case"submenu":return(0,T.jsxs)(Qo,{onOpenChange:s,children:[(0,T.jsx)($o,{dir:"ltr",disabled:i.disabled,asChild:!0,children:(0,T.jsx)(Fr,{className:"tlui-menu__button",label:i.label,"data-wd":`menu-item.${i.id}`,icon:"chevron-right"})}),(0,T.jsx)(Vo,{container:l,dir:"ltr",children:(0,T.jsx)(qo,{className:"tlui-menu",sideOffset:-4,collisionPadding:4,children:i.children.map((t=>u(e,t,i,p+1)))})})]},i.id);case"item":{if(o&&!i.readonlyOk)return null;const{id:e,checkbox:s,contextMenuLabel:r,label:l,onSelect:u,kbd:h,icon:g}=i.actionItem,m=r??l,I=m?t(m):void 0;return s?(0,T.jsxs)(Ko,{className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",dir:"ltr",disabled:i.disabled,onSelect:e=>{u(),(0,n().woC)(e)},title:I||void 0,checked:i.checked,children:[(0,T.jsx)("div",{className:"tlui-menu__checkbox-item__check",style:{transformOrigin:"75% center",transform:`scale(${i.checked?1:.5})`,opacity:i.checked?1:.5},children:(0,T.jsx)(Br,{small:!0,icon:i.checked?"check":"checkbox-empty"})}),I&&(0,T.jsx)("span",{children:I}),h&&(0,T.jsx)(Xr,{children:h})]},e):(0,T.jsx)(Fo,{dir:"ltr",asChild:!0,children:(0,T.jsx)(Fr,{className:"tlui-menu__button","data-wd":`menu-item.${e}`,kbd:h,label:m,disabled:i.disabled,iconLeft:a<3&&p>2?g:void 0,onClick:()=>{c?d(!1):u()}})},e)}}}return(0,T.jsx)(Vo,{dir:"ltr",container:l,children:(0,T.jsx)(Uo,{className:"tlui-menu scrollable",alignOffset:-4,collisionPadding:4,onContextMenu:n().woC,children:i.map((t=>u(e,t,null,0)))})})}let bd=0;const wd=k.memo((function({renderDebugMenuItems:e}){return(0,T.jsxs)("div",{className:"tlui-debug-panel",children:[(0,T.jsx)(Cd,{}),(0,T.jsx)(Md,{}),(0,T.jsxs)(Da,{id:"debug",children:[(0,T.jsx)(Ea,{children:(0,T.jsx)(Fr,{icon:"dots-horizontal"})}),(0,T.jsx)(ka,{side:"top",align:"end",alignOffset:0,children:(0,T.jsx)(xd,{renderDebugMenuItems:e})})]})]})})),Cd=(0,et().u4)((function(){const e=(0,n().nme)();return(0,T.jsx)("div",{className:"tlui-debug-panel__current-state",children:e.root.path.value})})),Md=(0,et().u4)((function(){const e=(0,n().nme)();return(0,T.jsxs)("div",{children:[e.renderingShapes.length," Shapes"]})}));function xd({renderDebugMenuItems:e}){const t=(0,n().nme)(),{addToast:i}=Bl(),{addDialog:s}=lc(),[o,r]=k.useState(!1);return(0,T.jsxs)(za,{children:[(()=>{if(o)throw Error("oh no!")})(),(0,T.jsx)(Pa,{onClick:()=>{r(!0)},children:(0,T.jsx)("span",{children:"Throw Error"})}),(0,T.jsx)(Pa,{onClick:()=>{i({id:(0,n().NF7)(),title:"Something happened",description:"Hey, attend to this thing over here. It might be important!"})},children:(0,T.jsx)("span",{children:"Show Toast"})}),(0,T.jsx)(Pa,{onClick:()=>{s({component:({onClose:e})=>(0,T.jsx)(Ad,{onCancel:()=>{e()},onContinue:()=>{e()}}),onClose:()=>{}})},children:"Show Dialog"}),(0,T.jsx)(Pa,{onClick:()=>{t.updateUserDocumentSettings({isReadOnly:!t.isReadOnly})},children:(0,T.jsx)("span",{children:"Toggle Read Only"})}),(0,T.jsx)(Pa,{onClick:()=>{n().bGJ.peopleMenu.set(!n().bGJ.peopleMenu.value)},children:(0,T.jsx)("span",{children:"Toggle People Menu"})}),(0,T.jsx)(Pa,{label:"debug-menu.hard-reset",onClick:()=>{window.__tldraw__hardReset()}}),(0,T.jsx)(Pa,{label:"debug-menu.create-shapes",onClick:()=>function(e,t){const i=Array(t),n=Math.floor(Math.sqrt(t));for(let s=0;s<t;s++)bd++,i[s]={id:e.createShapeId("box"+bd),type:"geo",x:s%n*132,y:132*Math.floor(s/n)};e.batch((()=>{e.createShapes(i).setSelectedIds(i.map((e=>e.id)))}))}(t,100)}),(0,T.jsx)(Pa,{onClick:()=>{function e({children:t}){let i=0;if(!t.length)return 0;for(const n of[...t])i++,i+=e(n);return i}const{selectedShapes:i}=t,n=0===i.length?t.renderingShapes:i,s=n.map((e=>document.getElementById(e.id).parentElement));let o=s.length;for(const t of s)o+=e(t);window.alert(`Shapes ${n.length}, DOM nodes:${o}`)},children:(0,T.jsx)("span",{children:"Count Shapes and Nodes"})}),e?.()]})}function Ad({onCancel:e,onContinue:t}){const[i,n]=k.useState(!1);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(Kr,{children:[(0,T.jsx)(Qr,{children:"Hello"}),(0,T.jsx)($r,{})]}),(0,T.jsx)(qr,{style:{maxWidth:350},children:"Hello Hello Hello"}),(0,T.jsxs)(ea,{className:"tlui-dialog__footer__actions",children:[(0,T.jsx)(Fr,{onClick:()=>n(!i),iconLeft:i?"checkbox-checked":"checkbox-empty",style:{marginRight:"auto"},children:"Don't show again"}),(0,T.jsx)(Fr,{onClick:e,children:"Cancel"}),(0,T.jsx)(Fr,{type:"primary",onClick:async()=>{t()},children:"Continue"})]})]})}(0,et().u4)((function(){const e=(0,n().nme)(),t=k.useRef(null),i=e.camera,s=e.shapesArray;if(t.current){const n=t.current,o=n.getContext("2d");o.resetTransform(),o.clearRect(0,0,n.width,n.height);const r=new Path2D;o.translate(i.x,i.y);for(const t of s){const i=e.getPageBounds(t);r.rect(i.minX,i.minY,i.width,i.height)}o.fillStyle="#cccccc",o.fill(r);for(const t of s){o.save();e.getPageCorners(t).forEach((e=>Sd(o,e.x,e.y,"red"))),o.restore()}}return(0,T.jsx)("canvas",{ref:t,width:e.viewportScreenBounds.width,height:e.viewportScreenBounds.height,style:{width:"100%",height:"100%"}})}));function Sd(e,t,i,n="#000"){e.save(),e.beginPath(),e.ellipse(t,i,4,4,0,0,2*Math.PI),e.fillStyle=n,e.fill(),e.restore()}function vd(){const e=(0,n().nme)(),{languages:t,currentLanguage:i}=Xl(),s=(0,k.useCallback)((t=>{e.updateUser({locale:t})}),[e]);return(0,T.jsxs)(Za,{id:"help menu language",children:[(0,T.jsx)(Ta,{label:"menu.language","data-direction":"left"}),(0,T.jsx)(Wa,{sideOffset:-4,children:(0,T.jsx)(za,{children:t.map((({locale:e,label:t})=>(0,T.jsx)(Oa,{title:e,checked:e===i,onSelect:()=>s(e),children:(0,T.jsx)("span",{children:t})},e)))})})]})}const Ld=k.memo((function(){const e=(0,n().NFA)(),t=tc(),i=dd("help menu");return(0,T.jsx)("div",{className:"tlui-help-menu",children:(0,T.jsxs)(ba,{dir:"ltr",onOpenChange:i,modal:!1,children:[(0,T.jsx)(wa,{className:"tlui-button tlui-help-menu__button",dir:"ltr",title:t("help-menu.title"),children:(0,T.jsx)(Br,{icon:"question-mark"})}),(0,T.jsx)(Ca,{container:e,dir:"ltr",children:(0,T.jsx)(Ma,{className:"tlui-menu",side:"top",sideOffset:8,align:"end",alignOffset:0,collisionPadding:4,children:(0,T.jsx)(jd,{})})})]})})}));function jd(){const e=function(){const e=k.useContext(jc);if(!e)throw new Error("useHelpMenuSchema must be used inside of a helpMenuSchemaProvider.");return e}(),t=ed();return(0,T.jsx)(T.Fragment,{children:e.map((function e(i){if(t&&!i.readonlyOk)return null;switch(i.type){case"custom":if("LANGUAGE_MENU"===i.id)return(0,T.jsx)(vd,{},"item");break;case"group":return(0,T.jsx)(za,{size:"small",children:i.children.map(e)},i.id);case"submenu":return(0,T.jsxs)(Za,{id:`help menu ${i.id}`,children:[(0,T.jsx)(Ta,{label:i.label}),(0,T.jsx)(Wa,{children:i.children.map(e)})]},i.id);case"item":{const{id:e,kbd:t,label:n,onSelect:s,icon:o}=i.actionItem;return(0,T.jsx)(Pa,{kbd:t,label:n,onClick:s,iconLeft:o},e)}}}))})}class Nd{constructor(e,t){this.app=e,this.dpr=t}colors={shapeFill:"rgba(144, 144, 144, .1)",selectFill:"#2f80ed",viewportFill:"rgba(144, 144, 144, .1)"};id=(0,n().NF7)();cvs=null;pageBounds=[];collaborators=[];canvasScreenBounds=new(ur().Ax);canvasPageBounds=new(ur().Ax);contentPageBounds=new(ur().Ax);contentScreenBounds=new(ur().Ax);originPagePoint=new(ur().hd);originPageCenter=new(ur().hd);isInViewport=!1;debug=!1;setDpr(e){this.dpr=+e.toFixed(2)}updateContentScreenBounds=()=>{const{contentScreenBounds:e,contentPageBounds:t,canvasScreenBounds:i}=this;let{x:n,y:s,w:o,h:r}=e;if(t.w>t.h){const e=i.w/(t.w/t.h);e>i.h?(n=(i.w-i.w*(i.h/e))/2,s=0,o=i.w*(i.h/e),r=i.h):(n=0,s=(i.h-e)/2,o=i.w,r=e)}else if(t.w<t.h){const e=i.h/(t.h/t.w);n=(i.w-e)/2,s=0,o=e,r=i.h}else n=i.h/2,s=0,o=i.h,r=i.h;e.set(n,s,o,r)};updateCanvasPageBounds=()=>{const{canvasPageBounds:e,canvasScreenBounds:t,contentPageBounds:i,contentScreenBounds:n}=this;e.set(0,0,i.width/(n.width/t.width),i.height/(n.height/t.height)),e.center=i.center};getScreenPoint=(e,t)=>{const{canvasScreenBounds:i}=this;return{x:(e-i.minX)*this.dpr,y:(t-i.minY)*this.dpr}};getPagePoint=(e,t)=>{const{contentPageBounds:i,contentScreenBounds:n,canvasPageBounds:s}=this,{x:o,y:r}=this.getScreenPoint(e,t);return{x:s.minX+o*i.width/n.width,y:s.minY+r*i.height/n.height,z:1}};minimapScreenPointToPagePoint=(e,t,i=!1,n=!1)=>{const{app:s}=this,{viewportPageBounds:o}=s;let{x:r,y:a}=this.getPagePoint(e,t);if(n){const e=this.app.allShapesCommonBounds,t=o,i=(e?.minX??0)-t.width/2,n=(e?.maxX??0)+t.width/2,s=(e?.minY??0)-t.height/2,l=(e?.maxY??0)+t.height/2,c=Math.max(0,i+t.width-r),d=Math.max(0,-(n-t.width-r)),u=Math.max(0,s+t.height-a),h=Math.max(0,-(l-t.height-a)),p=Math.max(0,c-d),g=Math.max(0,d-c),m=Math.max(0,u-h),I=Math.max(0,h-u);p&&p>g?r+=p/2:g&&(r-=g/2),m&&m>I?a+=m/2:I&&(a-=I/2),r=(0,ur().qE)(r,i,n),a=(0,ur().qE)(a,s,l)}if(i){const{originPagePoint:e}=this;Math.abs(r-e.x)>Math.abs(a-e.y)?a=e.y:r=e.x}return{x:r,y:a}};render=()=>{const{cvs:e,pageBounds:t}=this;this.updateCanvasPageBounds();const{app:i,canvasScreenBounds:n,canvasPageBounds:s,contentPageBounds:o,contentScreenBounds:r}=this,{width:a,height:l}=n,{viewportPageBounds:c,selectedIds:d}=i;if(!e||!t)return;const u=e.getContext("2d");if(!u)throw new Error("Minimap (shapes): Could not get context");u.resetTransform(),u.globalAlpha=1,u.clearRect(0,0,a,l);const h=r.width/o.width,p=r.height/o.height;u.translate((a-r.width)/2,(l-r.height)/2),u.scale(h,p),u.translate(-o.minX,-o.minY);const g=8/h,m=8/h,I=1/h,f=1/h,y=g/4,b=m/4,w=new Path2D,C=new Path2D,{shapeFill:M,selectFill:x,viewportFill:A}=this.colors;let S;for(let D=0,E=t.length;D<E;D++)S=t[D],Nd.roundedRect(d.includes(S.id)?C:w,S.minX,S.minY,S.width,S.height,(0,ur().qE)(g,I,S.width/y),(0,ur().qE)(m,f,S.height/b));if(u.fillStyle=M,u.fill(w),u.fillStyle=x,u.fill(C),this.debug){const e=ur().Ax.Common(t),{minX:i,minY:n,width:s,height:o}=e;u.strokeStyle="green",u.lineWidth=2/h,u.strokeRect(i+1/h,n+1/p,s-2/h,o-2/p)}{const{brush:e}=i;if(e){const{x:t,y:i,w:n,h:s}=e;u.beginPath(),Nd.sharpRect(u,t,i,n,s),u.closePath(),u.fillStyle=A,u.fill()}}{const{minX:e,minY:t,width:i,height:n}=c;u.beginPath();const s=12/h,o=12/h;Nd.roundedRect(u,e,t,i,n,Math.min(i/4,s),Math.min(n/4,o)),u.closePath(),u.fillStyle=A,u.fill(),this.debug&&(u.strokeStyle="orange",u.strokeRect(e+1/h,t+1/p,i-2/h,n-2/p))}const v=2.5/h,L=2.5/p,{currentPageId:j}=i;let N;for(let D=0;D<this.collaborators.length;D++){N=this.collaborators[D];const e=N.lastUsedInstanceId?i.store.get(N.lastUsedInstanceId):null;e?.currentPageId===j&&(u.beginPath(),u.ellipse((0,ur().qE)(N.cursor.x,s.minX+v,s.maxX-v),(0,ur().qE)(N.cursor.y,s.minY+L,s.maxY-L),5/h,5/p,0,0,ur().uA),u.fillStyle=N.color,u.fill())}if(this.debug){u.lineWidth=2/h;{const{minX:e,minY:t,width:i,height:n}=o;u.strokeStyle="red",u.strokeRect(e+1/h,t+1/p,i-2/h,n-2/p)}{const{minX:e,minY:t,width:i,height:n}=s;u.strokeStyle="blue",u.strokeRect(e+1/h,t+1/p,i-2/h,n-2/p)}}};static roundedRect(e,t,i,n,s,o,r){o<1&&r<1?e.rect(t,i,n,s):(e.moveTo(t+o,i),e.lineTo(t+n-o,i),e.quadraticCurveTo(t+n,i,t+n,i+r),e.lineTo(t+n,i+s-r),e.quadraticCurveTo(t+n,i+s,t+n-o,i+s),e.lineTo(t+o,i+s),e.quadraticCurveTo(t,i+s,t,i+s-r),e.lineTo(t,i+r),e.quadraticCurveTo(t,i,t+o,i))}static sharpRect(e,t,i,n,s,o,r){e.rect(t,i,n,s)}}const Dd=(0,et().u4)((function({shapeFill:e,selectFill:t,viewportFill:i}){const s=(0,n().nme)(),o=k.useRef(null),r=(0,n().NFA)(),a=k.useRef(!1),l=k.useMemo((()=>new Nd(s,s.devicePixelRatio)),[s]),c=s.userDocumentSettings.isDarkMode;k.useEffect((()=>{const n=requestAnimationFrame((()=>{const n=getComputedStyle(r);l.colors={shapeFill:n.getPropertyValue(e).trim(),selectFill:n.getPropertyValue(t).trim(),viewportFill:n.getPropertyValue(i).trim()},l.render()}));return()=>{cancelAnimationFrame(n)}}),[r,t,e,i,l,c]);const d=k.useCallback((e=>{if(!s.shapeIds.size)return;const{x:t,y:i}=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!1),o=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!0);l.originPagePoint.setTo(o),l.originPageCenter.setTo(s.viewportPageBounds.center),s.centerOnPoint(t,i,{duration:n().kmY})}),[s,l]),u=k.useCallback((e=>{if(e.currentTarget.setPointerCapture(e.pointerId),!s.shapeIds.size)return;a.current=!0,l.isInViewport=!1;const{x:t,y:i}=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!1),o=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!0),r=s.viewportPageBounds;l.originPagePoint.setTo(o),l.originPageCenter.setTo(r.center),l.isInViewport=r.containsPoint(o),l.isInViewport||s.centerOnPoint(t,i,{duration:n().kmY})}),[s,l]),h=k.useCallback((e=>{if(a.current){const{x:t,y:i}=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,e.shiftKey,!0);if(l.isInViewport){const e=ur().hd.Sub({x:t,y:i},l.originPagePoint),n=ur().hd.Add(l.originPageCenter,e);return void s.centerOnPoint(n.x,n.y)}s.centerOnPoint(t,i)}const t=l.getPagePoint(e.clientX,e.clientY),i=s.pageToScreen(t.x,t.y),n={type:"pointer",target:"canvas",name:"pointer_move",...Ed(e),point:i,isPen:s.isPenMode};s.dispatch(n)}),[s,l]),p=k.useCallback((e=>{a.current=!1}),[]),g=k.useCallback((e=>{const t=(0,n().jaC)(e);s.dispatch({type:"wheel",name:"wheel",delta:t,shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey})}),[s]);(0,n().lXS)("update dpr",(()=>{const{devicePixelRatio:e}=s;l.setDpr(e);const t=o.current,i=t.getBoundingClientRect(),n=i.width*e,r=i.height*e;t.width=n,t.height=r,l.canvasScreenBounds.set(i.x,i.y,n,r),l.cvs=o.current}),[s,l]);const m=(()=>{const e=(0,n().nme)(),t=(0,et().fp)("time",Date.now());return k.useEffect((()=>{const e=setInterval((()=>t.set(Date.now())),5e3);return()=>clearInterval(e)}),[t]),k.useMemo((()=>e.store.query.records("user_presence",(()=>({lastActivityTimestamp:{gt:t.value-1e4},userId:{neq:e.userId}})))),[e,t])})();return(0,n().lXS)("minimap render when pagebounds or collaborators changes",(()=>{const{devicePixelRatio:e,viewportPageBounds:t,allShapesCommonBounds:i}=s;l.contentPageBounds=i?ur().Ax.Expand(i,t):t,l.updateContentScreenBounds();const n=[];s.shapeIds.forEach((e=>{let t=s.getPageBoundsById(e);const i=s.getPageMaskById(e);if(i){const e=(0,ur().oQ)(i,t.corners);if(!e)return;t=ur().Ax.FromPoints(e)}t&&(t.id=e,n.push(t))})),l.pageBounds=n,l.collaborators=m.value,l.render()}),[s,l]),(0,T.jsx)("div",{className:"tlui-minimap",children:(0,T.jsx)("canvas",{ref:o,className:"tlui-minimap__canvas",onDoubleClick:d,onPointerMove:h,onPointerDown:u,onPointerUp:p,onWheel:g})})}));function Ed(e){return e.isKilled=!0,{point:{x:e.clientX,y:e.clientY,z:e.pressure},shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey,pointerId:e.pointerId,button:e.button,isPen:"pen"===e.pointerType}}const kd=(0,et().u4)((function(){const e=(0,n().nme)(),t=tc(),i=Ic(),s=e.zoomLevel,o=e.shapeIds.size>0,r=e.selectedIds.length>0,a=1===e.camera.z,l=k.useCallback((()=>{e.resetZoom(e.viewportScreenCenter,{duration:n().kmY})}),[e]);return(0,T.jsxs)(Da,{id:"zoom",children:[(0,T.jsx)(Ea,{children:(0,T.jsx)(Fr,{title:`${t("navigation-zone.zoom")}`,"data-wd":"minimap.zoom-menu",className:i<5?"tlui-zoom-menu__button":"tlui-zoom-menu__button__pct",onDoubleClick:l,icon:i<4?"zoom-in":void 0,children:i<4?null:(0,T.jsxs)("span",{style:{flexGrow:0,textAlign:"center"},children:[Math.floor(100*s),"%"]})})}),(0,T.jsx)(ka,{side:"top",align:"start",alignOffset:0,children:(0,T.jsxs)(za,{children:[(0,T.jsx)(Zd,{action:"zoom-in","data-wd":"minimap.zoom-menu.zoom-in",noClose:!0}),(0,T.jsx)(Zd,{action:"zoom-out","data-wd":"minimap.zoom-menu.zoom-out",noClose:!0}),(0,T.jsx)(Zd,{action:"zoom-to-100","data-wd":"minimap.zoom-menu.zoom-to-100",noClose:!0,disabled:a}),(0,T.jsx)(Zd,{action:"zoom-to-fit",disabled:!o,"data-wd":"minimap.zoom-menu.zoom-to-fit",noClose:!0}),(0,T.jsx)(Zd,{action:"zoom-to-selection",disabled:!r,"data-wd":"minimap.zoom-menu.zoom-to-selection",noClose:!0})]})})]})}));function Zd(e){const{action:t,disabled:i=!1,noClose:n=!1}=e,s=hc();return(0,T.jsx)(Pa,{label:s[t].label,kbd:s[t].kbd,"data-wd":e["data-wd"],onClick:s[t].onSelect,noClose:n,disabled:i})}const Td=(0,k.memo)((function(){const e=hc(),t=tc(),i=Ic(),[n,s]=function(e,t){const[i,n]=k.useState(t);k.useLayoutEffect((()=>{const t=localStorage.getItem(e);if(t)try{n(JSON.parse(t))}catch(wt){console.error(`Could not restore value ${e} from local storage.`)}}),[e]);const s=k.useCallback((t=>{n((i=>{const n="function"==typeof t?t(i):t;return localStorage.setItem(e,JSON.stringify(n)),n}))}),[e]);return[i,s]}("minimap",!0),o=(0,k.useCallback)((()=>{s((e=>!e))}),[s]);return i<4?null:(0,T.jsxs)("div",{className:"tlui-navigation-zone",children:[(0,T.jsx)("div",{className:"tlui-navigation-zone__controls",children:i<6?(0,T.jsx)(kd,{}):n?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(kd,{}),(0,T.jsx)(Fr,{title:t("navigation-zone.toggle-minimap"),className:"tlui-navigation-zone__toggle","data-wd":"minimap.toggle",onClick:o,icon:n?"chevrons-ne":"chevrons-sw"})]}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Fr,{icon:"minus","data-wd":"minimap.zoom-out",title:`${t(e["zoom-out"].label)} ${Ur(e["zoom-out"].kbd)}`,onClick:e["zoom-out"].onSelect}),(0,T.jsx)(kd,{}),(0,T.jsx)(Fr,{icon:"plus","data-wd":"minimap.zoom-in",title:`${t(e["zoom-in"].label)} ${Ur(e["zoom-in"].kbd)}`,onClick:e["zoom-in"].onSelect}),(0,T.jsx)(Fr,{title:t("navigation-zone.toggle-minimap"),className:"tlui-navigation-zone__toggle",onClick:o,icon:n?"chevrons-ne":"chevrons-sw"})]})}),i>=6&&!n&&(0,T.jsx)(Dd,{viewportFill:"--color-muted-1",selectFill:"--color-selected",shapeFill:"--color-text-3"})]})})),Wd=k.memo((function({"data-wd":e,label:t,labelA:i,labelB:n,itemsA:s,itemsB:o,styleTypeA:r,styleTypeB:a,valueA:l,valueB:c,onValueChange:d}){const u=tc(),h=k.useMemo((()=>s.find((e=>e.id===l))?.icon??"mixed"),[s,l]),p=k.useMemo((()=>o.find((e=>e.id===c))?.icon??"mixed"),[o,c]);if(void 0===l&&void 0===c)return null;const g=`${e}.start`,m=`${e}.end`;return(0,T.jsxs)("div",{className:"tlui-style-panel__double-select-picker",children:[(0,T.jsx)("div",{title:u(t),className:"tlui-style-panel__double-select-picker-label",children:u(t)}),(0,T.jsxs)(Da,{id:`style panel ${r}`,children:[(0,T.jsx)(wa,{asChild:!0,children:(0,T.jsx)(Fr,{"data-wd":g,title:u(i)+"  "+u(null===l?"style-panel.mixed":`${r}-style.${l}`),icon:h,invertIcon:!0,smallIcon:!0})}),(0,T.jsx)(ka,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:(0,T.jsx)("div",{className:qe()("tlui-button-grid",{"tlui-button-grid__two":s.length<4,"tlui-button-grid__four":s.length>=4}),children:s.map((e=>(0,T.jsx)(Pa,{className:"tlui-button-grid__button",title:u(i)+"  "+u(`${r}-style.${e.id}`),"data-wd":`${g}.${e.id}`,icon:e.icon,onClick:()=>d(e,!1),invertIcon:!0},e.id)))})})]}),(0,T.jsxs)(Da,{id:`style panel ${a}`,children:[(0,T.jsx)(wa,{asChild:!0,children:(0,T.jsx)(Fr,{"data-wd":m,title:u(n)+"  "+u(null===c?"style-panel.mixed":`${a}-style.${c}`),icon:p,smallIcon:!0})}),(0,T.jsx)(ka,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:(0,T.jsx)("div",{className:qe()("tlui-button-grid",{"tlui-button-grid__two":s.length<4,"tlui-button-grid__four":s.length>=4}),children:o.map((e=>(0,T.jsx)(Pa,{className:"tlui-button-grid__button",title:u(n)+"  "+u(`${a}-style.${e.id}`),"data-wd":`${m}.${e.id}`,icon:e.icon,onClick:()=>d(e,!1)},e.id)))})})]})]})})),zd=k.memo((function({id:e,items:t,styleType:i,label:n,value:s,onValueChange:o,"data-wd":r}){const a=tc(),l=k.useMemo((()=>t.find((e=>e.id===s))?.icon),[t,s]);return(0,T.jsxs)(Da,{id:`style panel ${e}`,children:[(0,T.jsx)(wa,{asChild:!0,children:(0,T.jsx)(Fr,{"data-wd":r,title:a(null===s?"style-panel.mixed":`${i}-style.${s}`),label:n,icon:l??"mixed"})}),(0,T.jsx)(ka,{side:"left",align:"center",alignOffset:0,children:(0,T.jsx)("div",{className:qe()("tlui-button-grid",{"tlui-button-grid__two":t.length<4,"tlui-button-grid__four":t.length>=4}),children:t.map((e=>(0,T.jsx)(Pa,{className:"tlui-button-grid__button","data-wd":`${r}.${e.id}`,title:a(`${i}-style.${e.id}`),icon:e.icon,onClick:()=>o(e,!1)},e.id)))})})]})})),Pd=(0,et().u4)((function({isMobile:e}){const t=(0,n().nme)(),i=t.props,s=(0,k.useCallback)((()=>{e||(t.isChangingStyle=!1)}),[t,e]);if(!i)return null;const{geo:o,arrowheadEnd:r,arrowheadStart:a,spline:l,font:c}=i,d=void 0===o,u=void 0===r&&void 0===a,h=void 0===l,p=void 0===c;return(0,T.jsxs)("div",{className:"tlui-style-panel","data-ismobile":e,onPointerLeave:s,children:[(0,T.jsx)(Rd,{props:i}),!p&&(0,T.jsx)(Gd,{props:i}),!(d&&u&&h)&&(0,T.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[(0,T.jsx)(_d,{props:i}),(0,T.jsx)(Jd,{props:i}),(0,T.jsx)(Bd,{props:i})]})]})})),{styles:Yd}=n().qwe;function Od(){const e=(0,n().nme)();return k.useCallback(((t,i)=>{e.batch((()=>{e.setProp(t.type,t.id,!1,i),e.isChangingStyle=!0}))}),[e])}function Rd({props:e}){const t=(0,n().nme)(),i=tc(),s=Od(),o=k.useCallback(((e,i)=>{const n=Yd.opacity[e];t.setProp(n.type,n.id,i),t.isChangingStyle=!0}),[t]),{color:r,fill:a,dash:l,size:c,opacity:d}=e;if(void 0===r&&void 0===a&&void 0===l&&void 0===c&&void 0===d)return null;const u=a||l||c,h=Yd.opacity.findIndex((e=>e.id===d));return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:"tlui-style-panel__section__common","aria-label":"style panel styles",children:[void 0===r?null:(0,T.jsx)(Ra,{title:i("style-panel.color"),styleType:"color","data-wd":"style.color",items:Yd.color,value:r,onValueChange:s}),void 0===d?null:(0,T.jsx)(bl,{"data-wd":"style.opacity",value:h>=0?h:Yd.opacity.length-1,label:d?`opacity-style.${d}`:"style-panel.mixed",onValueChange:o,steps:Yd.opacity.length-1,title:i("style-panel.opacity")})]}),u&&(0,T.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[void 0===a?null:(0,T.jsx)(Ra,{title:i("style-panel.fill"),styleType:"fill","data-wd":"style.fill",items:Yd.fill,value:a,onValueChange:s}),void 0===l?null:(0,T.jsx)(Ra,{title:i("style-panel.dash"),styleType:"dash","data-wd":"style.dash",items:Yd.dash,value:l,onValueChange:s}),void 0===c?null:(0,T.jsx)(Ra,{title:i("style-panel.size"),styleType:"size","data-wd":"style.size",items:Yd.size,value:c,onValueChange:s})]})]})}function Gd({props:e}){const t=tc(),i=Od(),{font:n,align:s}=e;return void 0===n&&void 0===s?null:(0,T.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel text",children:[void 0===n?null:(0,T.jsx)(Ra,{title:t("style-panel.font"),styleType:"font","data-wd":"font",items:Yd.font,value:n,onValueChange:i}),void 0===s?null:(0,T.jsx)(Ra,{title:t("style-panel.align"),styleType:"align","data-wd":"align",items:Yd.align,value:s,onValueChange:i})]})}function _d({props:e}){const t=Od(),{geo:i}=e;return void 0===i?null:(0,T.jsx)(zd,{id:"geo",label:"style-panel.geo",styleType:"geo","data-wd":"style-panel.geo",items:Yd.geo,value:i,onValueChange:t})}function Bd({props:e}){const t=Od(),{spline:i}=e;return void 0===i?null:(0,T.jsx)(zd,{id:"spline",label:"style-panel.spline",styleType:"spline","data-wd":"style.spline",items:Yd.spline,value:i,onValueChange:t})}function Jd({props:e}){const t=Od(),{arrowheadEnd:i,arrowheadStart:n}=e;return void 0===i&&void 0===n?null:(0,T.jsx)(Wd,{label:"style-panel.arrowheads",styleTypeA:"arrowheadStart","data-wd":"style.arrowheads",itemsA:Yd.arrowheadStart,valueA:n,styleTypeB:"arrowheadEnd",itemsB:Yd.arrowheadEnd,valueB:i,onValueChange:t,labelA:"style-panel.arrowhead-start",labelB:"style-panel.arrowhead-end"})}function Hd(){const e=(0,n().nme)(),t=hc()["back-to-content"],[i,s]=(0,k.useState)(!1);return(0,k.useEffect)((()=>{let t=!1;const i=setInterval((()=>{const{renderingShapes:i}=e,n=i.filter((e=>e.isInViewport)),o=0===n.length&&e.shapesArray.length>0;t!==o&&(s(o),t=o)}),1e3);return()=>{clearInterval(i)}}),[e]),i?(0,T.jsx)(Fr,{iconLeft:t.icon,label:t.label,onClick:()=>{t.onSelect(),s(!1)}}):null}const Vd=({id:e,component:t,onClose:i})=>{const{removeDialog:s}=lc(),o=(0,n().NFA)(),r=(0,k.useCallback)((t=>{if(!t){if(i)try{i()}catch(tm){console.warn(tm)}s(e)}}),[e,i,s]);return(0,T.jsx)(Yr,{onOpenChange:r,defaultOpen:!0,children:(0,T.jsx)(Or,{container:o,children:(0,T.jsx)(Rr,{dir:"ltr",className:"tlui-dialog__overlay",children:(0,T.jsx)(Gr,{dir:"ltr",className:"tlui-dialog__content",children:(0,T.jsx)(t,{onClose:()=>r(!1)})})})})})};const Ud=k.memo((function(){const{dialogs:e}=lc();return(0,T.jsx)(T.Fragment,{children:e.map((e=>(0,T.jsx)(Vd,{...e},e.id)))})})),Xd=(0,et().u4)((function(){const e=(0,n().nme)().isPenMode,t=hc();if(!e)return null;const i=t["exit-pen-mode"];return(0,T.jsx)(Fr,{label:i.label,iconLeft:i.icon,onClick:i.onSelect})}));function Fd(e,t,{checkForDefaultPrevented:i=!0}={}){return function(n){if(e?.(n),!1===i||!n.defaultPrevented)return t?.(n)}}function Kd(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function Qd(...e){return t=>{let i=!1;const n=e.map((e=>{const n=Kd(e,t);return i||"function"!=typeof n||(i=!0),n}));if(i)return()=>{for(let t=0;t<n.length;t++){const i=n[t];"function"==typeof i?i():Kd(e[t],null)}}}}function $d(...e){return k.useCallback(Qd(...e),e)}function qd(e,t=[]){let i=[];const n=()=>{const t=i.map((e=>k.createContext(e)));return function(i){const n=i?.[e]||t;return k.useMemo((()=>({[`__scope${e}`]:{...i,[e]:n}})),[i,n])}};return n.scopeName=e,[function(t,n){const s=k.createContext(n),o=i.length;i=[...i,n];const r=t=>{const{scope:i,children:n,...r}=t,a=i?.[e]?.[o]||s,l=k.useMemo((()=>r),Object.values(r));return(0,T.jsx)(a.Provider,{value:l,children:n})};return r.displayName=t+"Provider",[r,function(i,r){const a=r?.[e]?.[o]||s,l=k.useContext(a);if(l)return l;if(void 0!==n)return n;throw new Error(`\`${i}\` must be used within \`${t}\``)}]},eu(n,...t)]}function eu(...e){const t=e[0];if(1===e.length)return t;const i=()=>{const i=e.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(e){const n=i.reduce(((t,{useScope:i,scopeName:n})=>({...t,...i(e)[`__scope${n}`]})),{});return k.useMemo((()=>({[`__scope${t.scopeName}`]:n})),[n])}};return i.scopeName=t.scopeName,i}var tu=k.forwardRef(((e,t)=>{const{children:i,...n}=e,s=k.Children.toArray(i),o=s.find(su);if(o){const e=o.props.children,i=s.map((t=>t===o?k.Children.count(e)>1?k.Children.only(null):k.isValidElement(e)?e.props.children:null:t));return(0,T.jsx)(iu,{...n,ref:t,children:k.isValidElement(e)?k.cloneElement(e,void 0,i):null})}return(0,T.jsx)(iu,{...n,ref:t,children:i})}));tu.displayName="Slot";var iu=k.forwardRef(((e,t)=>{const{children:i,...n}=e;if(k.isValidElement(i)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning;if(i)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(i);return k.cloneElement(i,{...ou(n,i.props),ref:t?Qd(t,e):e})}return k.Children.count(i)>1?k.Children.only(null):null}));iu.displayName="SlotClone";var nu=({children:e})=>(0,T.jsx)(T.Fragment,{children:e});function su(e){return k.isValidElement(e)&&e.type===nu}function ou(e,t){const i={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?i[n]=(...e)=>{o(...e),s(...e)}:s&&(i[n]=s):"style"===n?i[n]={...s,...o}:"className"===n&&(i[n]=[s,o].filter(Boolean).join(" "))}return{...e,...i}}var ru=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((e,t)=>{const i=k.forwardRef(((e,i)=>{const{asChild:n,...s}=e,o=n?tu:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,T.jsx)(o,{...s,ref:i})}));return i.displayName=`Primitive.${t}`,{...e,[t]:i}}),{});function au(e){const t=k.useRef(e);return k.useEffect((()=>{t.current=e})),k.useMemo((()=>(...e)=>t.current?.(...e)),[])}var lu,cu="dismissableLayer.update",du="dismissableLayer.pointerDownOutside",uu="dismissableLayer.focusOutside",hu=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),pu=k.forwardRef(((e,t)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:r,onDismiss:a,...l}=e,c=k.useContext(hu),[d,u]=k.useState(null),h=d?.ownerDocument??globalThis?.document,[,p]=k.useState({}),g=$d(t,(e=>u(e))),m=Array.from(c.layers),[I]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),f=m.indexOf(I),y=d?m.indexOf(d):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,w=y>=f,C=function(e,t=globalThis?.document){const i=au(e),n=k.useRef(!1),s=k.useRef((()=>{}));return k.useEffect((()=>{const e=e=>{if(e.target&&!n.current){let n=function(){Iu(du,i,o,{discrete:!0})};const o={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",s.current),s.current=n,t.addEventListener("click",s.current,{once:!0})):n()}else t.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout((()=>{t.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",e),t.removeEventListener("click",s.current)}}),[t,i]),{onPointerDownCapture:()=>n.current=!0}}((e=>{const t=e.target,i=[...c.branches].some((e=>e.contains(t)));w&&!i&&(s?.(e),r?.(e),e.defaultPrevented||a?.())}),h),M=function(e,t=globalThis?.document){const i=au(e),n=k.useRef(!1);return k.useEffect((()=>{const e=e=>{if(e.target&&!n.current){Iu(uu,i,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)}),[t,i]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}((e=>{const t=e.target;[...c.branches].some((e=>e.contains(t)))||(o?.(e),r?.(e),e.defaultPrevented||a?.())}),h);return function(e,t=globalThis?.document){const i=au(e);k.useEffect((()=>{const e=e=>{"Escape"===e.key&&i(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})}),[i,t])}((e=>{y===c.layers.size-1&&(n?.(e),!e.defaultPrevented&&a&&(e.preventDefault(),a()))}),h),k.useEffect((()=>{if(d)return i&&(0===c.layersWithOutsidePointerEventsDisabled.size&&(lu=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),mu(),()=>{i&&1===c.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=lu)}}),[d,h,i,c]),k.useEffect((()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),mu())}),[d,c]),k.useEffect((()=>{const e=()=>p({});return document.addEventListener(cu,e),()=>document.removeEventListener(cu,e)}),[]),(0,T.jsx)(ru.div,{...l,ref:g,style:{pointerEvents:b?w?"auto":"none":void 0,...e.style},onFocusCapture:Fd(e.onFocusCapture,M.onFocusCapture),onBlurCapture:Fd(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Fd(e.onPointerDownCapture,C.onPointerDownCapture)})}));pu.displayName="DismissableLayer";var gu=k.forwardRef(((e,t)=>{const i=k.useContext(hu),n=k.useRef(null),s=$d(t,n);return k.useEffect((()=>{const e=n.current;if(e)return i.branches.add(e),()=>{i.branches.delete(e)}}),[i.branches]),(0,T.jsx)(ru.div,{...e,ref:s})}));function mu(){const e=new CustomEvent(cu);document.dispatchEvent(e)}function Iu(e,t,i,{discrete:n}){const s=i.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:i});t&&s.addEventListener(e,t,{once:!0}),n?function(e,t){e&&z.flushSync((()=>e.dispatchEvent(t)))}(s,o):s.dispatchEvent(o)}gu.displayName="DismissableLayerBranch";var fu=0;function yu(){k.useEffect((()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??bu()),document.body.insertAdjacentElement("beforeend",e[1]??bu()),fu++,()=>{1===fu&&document.querySelectorAll("[data-radix-focus-guard]").forEach((e=>e.remove())),fu--}}),[])}function bu(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var wu="focusScope.autoFocusOnMount",Cu="focusScope.autoFocusOnUnmount",Mu={bubbles:!1,cancelable:!0},xu=k.forwardRef(((e,t)=>{const{loop:i=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...r}=e,[a,l]=k.useState(null),c=au(s),d=au(o),u=k.useRef(null),h=$d(t,(e=>l(e))),p=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect((()=>{if(n){let e=function(e){if(p.paused||!a)return;const t=e.target;a.contains(t)?u.current=t:Lu(u.current,{select:!0})},t=function(e){if(p.paused||!a)return;const t=e.relatedTarget;null!==t&&(a.contains(t)||Lu(u.current,{select:!0}))},i=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Lu(a)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const n=new MutationObserver(i);return a&&n.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}}),[n,a,p.paused]),k.useEffect((()=>{if(a){ju.add(p);const t=document.activeElement;if(!a.contains(t)){const i=new CustomEvent(wu,Mu);a.addEventListener(wu,c),a.dispatchEvent(i),i.defaultPrevented||(!function(e,{select:t=!1}={}){const i=document.activeElement;for(const n of e)if(Lu(n,{select:t}),document.activeElement!==i)return}((e=Au(a),e.filter((e=>"A"!==e.tagName))),{select:!0}),document.activeElement===t&&Lu(a))}return()=>{a.removeEventListener(wu,c),setTimeout((()=>{const e=new CustomEvent(Cu,Mu);a.addEventListener(Cu,d),a.dispatchEvent(e),e.defaultPrevented||Lu(t??document.body,{select:!0}),a.removeEventListener(Cu,d),ju.remove(p)}),0)}}var e}),[a,c,d,p]);const g=k.useCallback((e=>{if(!i&&!n)return;if(p.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,s=document.activeElement;if(t&&s){const t=e.currentTarget,[n,o]=function(e){const t=Au(e),i=Su(t,e),n=Su(t.reverse(),e);return[i,n]}(t);n&&o?e.shiftKey||s!==o?e.shiftKey&&s===n&&(e.preventDefault(),i&&Lu(o,{select:!0})):(e.preventDefault(),i&&Lu(n,{select:!0})):s===t&&e.preventDefault()}}),[i,n,p.paused]);return(0,T.jsx)(ru.div,{tabIndex:-1,...r,ref:h,onKeyDown:g})}));function Au(e){const t=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)t.push(i.currentNode);return t}function Su(e,t){for(const i of e)if(!vu(i,{upTo:t}))return i}function vu(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Lu(e,{select:t=!1}={}){if(e&&e.focus){const i=document.activeElement;e.focus({preventScroll:!0}),e!==i&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}xu.displayName="FocusScope";var ju=function(){let e=[];return{add(t){const i=e[0];t!==i&&i?.pause(),e=Nu(e,t),e.unshift(t)},remove(t){e=Nu(e,t),e[0]?.resume()}}}();function Nu(e,t){const i=[...e],n=i.indexOf(t);return-1!==n&&i.splice(n,1),i}var Du=Boolean(globalThis?.document)?k.useLayoutEffect:()=>{},Eu=Z["useId".toString()]||(()=>{}),ku=0;function Zu(e){const[t,i]=k.useState(Eu());return Du((()=>{e||i((e=>e??String(ku++)))}),[e]),e||(t?`radix-${t}`:"")}function Tu(e){return e.split("-")[1]}function Wu(e){return"y"===e?"height":"width"}function zu(e){return e.split("-")[0]}function Pu(e){return["top","bottom"].includes(zu(e))?"x":"y"}function Yu(e,t,i){let{reference:n,floating:s}=e;const o=n.x+n.width/2-s.width/2,r=n.y+n.height/2-s.height/2,a=Pu(t),l=Wu(a),c=n[l]/2-s[l]/2,d="x"===a;let u;switch(zu(t)){case"top":u={x:o,y:n.y-s.height};break;case"bottom":u={x:o,y:n.y+n.height};break;case"right":u={x:n.x+n.width,y:r};break;case"left":u={x:n.x-s.width,y:r};break;default:u={x:n.x,y:n.y}}switch(Tu(t)){case"start":u[a]-=c*(i&&d?-1:1);break;case"end":u[a]+=c*(i&&d?-1:1)}return u}function Ou(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function Ru(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function Gu(e,t){var i;void 0===t&&(t={});const{x:n,y:s,platform:o,rects:r,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:p=0}=t,g=Ou(p),m=a[h?"floating"===u?"reference":"floating":u],I=Ru(await o.getClippingRect({element:null==(i=await(null==o.isElement?void 0:o.isElement(m)))||i?m:m.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),f="floating"===u?{...r.floating,x:n,y:s}:r.reference,y=await(null==o.getOffsetParent?void 0:o.getOffsetParent(a.floating)),b=await(null==o.isElement?void 0:o.isElement(y))&&await(null==o.getScale?void 0:o.getScale(y))||{x:1,y:1},w=Ru(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:f,offsetParent:y,strategy:l}):f);return{top:(I.top-w.top+g.top)/b.y,bottom:(w.bottom-I.bottom+g.bottom)/b.y,left:(I.left-w.left+g.left)/b.x,right:(w.right-I.right+g.right)/b.x}}const _u=Math.min,Bu=Math.max;function Ju(e,t,i){return Bu(e,_u(t,i))}const Hu=e=>({name:"arrow",options:e,async fn(t){const{element:i,padding:n=0}=e||{},{x:s,y:o,placement:r,rects:a,platform:l}=t;if(null==i)return{};const c=Ou(n),d={x:s,y:o},u=Pu(r),h=Wu(u),p=await l.getDimensions(i),g="y"===u?"top":"left",m="y"===u?"bottom":"right",I=a.reference[h]+a.reference[u]-d[u]-a.floating[h],f=d[u]-a.reference[u],y=await(null==l.getOffsetParent?void 0:l.getOffsetParent(i));let b=y?"y"===u?y.clientHeight||0:y.clientWidth||0:0;0===b&&(b=a.floating[h]);const w=I/2-f/2,C=c[g],M=b-p[h]-c[m],x=b/2-p[h]/2+w,A=Ju(C,x,M),S=null!=Tu(r)&&x!=A&&a.reference[h]/2-(x<C?c[g]:c[m])-p[h]/2<0;return{[u]:d[u]-(S?x<C?C-x:M-x:0),data:{[u]:A,centerOffset:x-A}}}}),Vu=["top","right","bottom","left"],Uu=(Vu.reduce(((e,t)=>e.concat(t,t+"-start",t+"-end")),[]),{left:"right",right:"left",bottom:"top",top:"bottom"});function Xu(e){return e.replace(/left|right|bottom|top/g,(e=>Uu[e]))}function Fu(e,t,i){void 0===i&&(i=!1);const n=Tu(e),s=Pu(e),o=Wu(s);let r="x"===s?n===(i?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[o]>t.floating[o]&&(r=Xu(r)),{main:r,cross:Xu(r)}}const Ku={start:"end",end:"start"};function Qu(e){return e.replace(/start|end/g,(e=>Ku[e]))}const $u=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var i;const{placement:n,middlewareData:s,rects:o,initialPlacement:r,platform:a,elements:l}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:u,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...m}=e,I=zu(n),f=zu(r)===r,y=await(null==a.isRTL?void 0:a.isRTL(l.floating)),b=u||(f||!g?[Xu(r)]:function(e){const t=Xu(e);return[Qu(e),t,Qu(t)]}(r));u||"none"===p||b.push(...function(e,t,i,n){const s=Tu(e);let o=function(e,t,i){const n=["left","right"],s=["right","left"],o=["top","bottom"],r=["bottom","top"];switch(e){case"top":case"bottom":return i?t?s:n:t?n:s;case"left":case"right":return t?o:r;default:return[]}}(zu(e),"start"===i,n);return s&&(o=o.map((e=>e+"-"+s)),t&&(o=o.concat(o.map(Qu)))),o}(r,g,p,y));const w=[r,...b],C=await Gu(t,m),M=[];let x=(null==(i=s.flip)?void 0:i.overflows)||[];if(c&&M.push(C[I]),d){const{main:e,cross:t}=Fu(n,o,y);M.push(C[e],C[t])}if(x=[...x,{placement:n,overflows:M}],!M.every((e=>e<=0))){var A,S;const e=((null==(A=s.flip)?void 0:A.index)||0)+1,t=w[e];if(t)return{data:{index:e,overflows:x},reset:{placement:t}};let i=null==(S=x.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:S.placement;if(!i)switch(h){case"bestFit":{var v;const e=null==(v=x.map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:v[0];e&&(i=e);break}case"initialPlacement":i=r}if(n!==i)return{reset:{placement:i}}}return{}}}};function qu(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function eh(e){return Vu.some((t=>e[t]>=0))}const th=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{strategy:i="referenceHidden",...n}=e,{rects:s}=t;switch(i){case"referenceHidden":{const e=qu(await Gu(t,{...n,elementContext:"reference"}),s.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:eh(e)}}}case"escaped":{const e=qu(await Gu(t,{...n,altBoundary:!0}),s.floating);return{data:{escapedOffsets:e,escaped:eh(e)}}}default:return{}}}}},ih=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){const{x:i,y:n}=t,s=await async function(e,t){const{placement:i,platform:n,elements:s}=e,o=await(null==n.isRTL?void 0:n.isRTL(s.floating)),r=zu(i),a=Tu(i),l="x"===Pu(i),c=["left","top"].includes(r)?-1:1,d=o&&l?-1:1,u="function"==typeof t?t(e):t;let{mainAxis:h,crossAxis:p,alignmentAxis:g}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...u};return a&&"number"==typeof g&&(p="end"===a?-1*g:g),l?{x:p*d,y:h*c}:{x:h*c,y:p*d}}(t,e);return{x:i+s.x,y:n+s.y,data:s}}}};function nh(e){return"x"===e?"y":"x"}const sh=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:n,placement:s}=t,{mainAxis:o=!0,crossAxis:r=!1,limiter:a={fn:e=>{let{x:t,y:i}=e;return{x:t,y:i}}},...l}=e,c={x:i,y:n},d=await Gu(t,l),u=Pu(zu(s)),h=nh(u);let p=c[u],g=c[h];if(o){const e="y"===u?"bottom":"right";p=Ju(p+d["y"===u?"top":"left"],p,p-d[e])}if(r){const e="y"===h?"bottom":"right";g=Ju(g+d["y"===h?"top":"left"],g,g-d[e])}const m=a.fn({...t,[u]:p,[h]:g});return{...m,data:{x:m.x-i,y:m.y-n}}}}},oh=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:i,y:n,placement:s,rects:o,middlewareData:r}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=e,d={x:i,y:n},u=Pu(s),h=nh(u);let p=d[u],g=d[h];const m="function"==typeof a?a(t):a,I="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const e="y"===u?"height":"width",t=o.reference[u]-o.floating[e]+I.mainAxis,i=o.reference[u]+o.reference[e]-I.mainAxis;p<t?p=t:p>i&&(p=i)}if(c){var f,y;const e="y"===u?"width":"height",t=["top","left"].includes(zu(s)),i=o.reference[h]-o.floating[e]+(t&&(null==(f=r.offset)?void 0:f[h])||0)+(t?0:I.crossAxis),n=o.reference[h]+o.reference[e]+(t?0:(null==(y=r.offset)?void 0:y[h])||0)-(t?I.crossAxis:0);g<i?g=i:g>n&&(g=n)}return{[u]:p,[h]:g}}}},rh=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){const{placement:i,rects:n,platform:s,elements:o}=t,{apply:r=(()=>{}),...a}=e,l=await Gu(t,a),c=zu(i),d=Tu(i),u="x"===Pu(i),{width:h,height:p}=n.floating;let g,m;"top"===c||"bottom"===c?(g=c,m=d===(await(null==s.isRTL?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(m=c,g="end"===d?"top":"bottom");const I=p-l[g],f=h-l[m];let y=I,b=f;if(u?b=_u(h-l.right-l.left,f):y=_u(p-l.bottom-l.top,I),!t.middlewareData.shift&&!d){const e=Bu(l.left,0),t=Bu(l.right,0),i=Bu(l.top,0),n=Bu(l.bottom,0);u?b=h-2*(0!==e||0!==t?e+t:Bu(l.left,l.right)):y=p-2*(0!==i||0!==n?i+n:Bu(l.top,l.bottom))}await r({...t,availableWidth:b,availableHeight:y});const w=await s.getDimensions(o.floating);return h!==w.width||p!==w.height?{reset:{rects:!0}}:{}}}};function ah(e){var t;return(null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function lh(e){return ah(e).getComputedStyle(e)}const ch=Math.min,dh=Math.max,uh=Math.round;function hh(e){const t=lh(e);let i=parseFloat(t.width),n=parseFloat(t.height);const s=e.offsetWidth,o=e.offsetHeight,r=uh(i)!==s||uh(n)!==o;return r&&(i=s,n=o),{width:i,height:n,fallback:r}}function ph(e){return yh(e)?(e.nodeName||"").toLowerCase():""}let gh;function mh(){if(gh)return gh;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(gh=e.brands.map((e=>e.brand+"/"+e.version)).join(" "),gh):navigator.userAgent}function Ih(e){return e instanceof ah(e).HTMLElement}function fh(e){return e instanceof ah(e).Element}function yh(e){return e instanceof ah(e).Node}function bh(e){return"undefined"!=typeof ShadowRoot&&(e instanceof ah(e).ShadowRoot||e instanceof ShadowRoot)}function wh(e){const{overflow:t,overflowX:i,overflowY:n,display:s}=lh(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+i)&&!["inline","contents"].includes(s)}function Ch(e){return["table","td","th"].includes(ph(e))}function Mh(e){const t=/firefox/i.test(mh()),i=lh(e),n=i.backdropFilter||i.WebkitBackdropFilter;return"none"!==i.transform||"none"!==i.perspective||!!n&&"none"!==n||t&&"filter"===i.willChange||t&&!!i.filter&&"none"!==i.filter||["transform","perspective"].some((e=>i.willChange.includes(e)))||["paint","layout","strict","content"].some((e=>{const t=i.contain;return null!=t&&t.includes(e)}))}function xh(){return/^((?!chrome|android).)*safari/i.test(mh())}function Ah(e){return["html","body","#document"].includes(ph(e))}function Sh(e){return fh(e)?e:e.contextElement}const vh={x:1,y:1};function Lh(e){const t=Sh(e);if(!Ih(t))return vh;const i=t.getBoundingClientRect(),{width:n,height:s,fallback:o}=hh(t);let r=(o?uh(i.width):i.width)/n,a=(o?uh(i.height):i.height)/s;return r&&Number.isFinite(r)||(r=1),a&&Number.isFinite(a)||(a=1),{x:r,y:a}}function jh(e,t,i,n){var s,o;void 0===t&&(t=!1),void 0===i&&(i=!1);const r=e.getBoundingClientRect(),a=Sh(e);let l=vh;t&&(n?fh(n)&&(l=Lh(n)):l=Lh(e));const c=a?ah(a):window,d=xh()&&i;let u=(r.left+(d&&(null==(s=c.visualViewport)?void 0:s.offsetLeft)||0))/l.x,h=(r.top+(d&&(null==(o=c.visualViewport)?void 0:o.offsetTop)||0))/l.y,p=r.width/l.x,g=r.height/l.y;if(a){const e=ah(a),t=n&&fh(n)?ah(n):n;let i=e.frameElement;for(;i&&n&&t!==e;){const e=Lh(i),t=i.getBoundingClientRect(),n=getComputedStyle(i);t.x+=(i.clientLeft+parseFloat(n.paddingLeft))*e.x,t.y+=(i.clientTop+parseFloat(n.paddingTop))*e.y,u*=e.x,h*=e.y,p*=e.x,g*=e.y,u+=t.x,h+=t.y,i=ah(i).frameElement}}return{width:p,height:g,top:h,right:u+p,bottom:h+g,left:u,x:u,y:h}}function Nh(e){return((yh(e)?e.ownerDocument:e.document)||window.document).documentElement}function Dh(e){return fh(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Eh(e){return jh(Nh(e)).left+Dh(e).scrollLeft}function kh(e){if("html"===ph(e))return e;const t=e.assignedSlot||e.parentNode||bh(e)&&e.host||Nh(e);return bh(t)?t.host:t}function Zh(e){const t=kh(e);return Ah(t)?t.ownerDocument.body:Ih(t)&&wh(t)?t:Zh(t)}function Th(e,t){var i;void 0===t&&(t=[]);const n=Zh(e),s=n===(null==(i=e.ownerDocument)?void 0:i.body),o=ah(n);return s?t.concat(o,o.visualViewport||[],wh(n)?n:[]):t.concat(n,Th(n))}function Wh(e,t,i){let n;if("viewport"===t)n=function(e,t){const i=ah(e),n=Nh(e),s=i.visualViewport;let o=n.clientWidth,r=n.clientHeight,a=0,l=0;if(s){o=s.width,r=s.height;const e=xh();(!e||e&&"fixed"===t)&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:r,x:a,y:l}}(e,i);else if("document"===t)n=function(e){const t=Nh(e),i=Dh(e),n=e.ownerDocument.body,s=dh(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=dh(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let r=-i.scrollLeft+Eh(e);const a=-i.scrollTop;return"rtl"===lh(n).direction&&(r+=dh(t.clientWidth,n.clientWidth)-s),{width:s,height:o,x:r,y:a}}(Nh(e));else if(fh(t))n=function(e,t){const i=jh(e,!0,"fixed"===t),n=i.top+e.clientTop,s=i.left+e.clientLeft,o=Ih(e)?Lh(e):{x:1,y:1};return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:s*o.x,y:n*o.y}}(t,i);else{const i={...t};if(xh()){var s,o;const t=ah(e);i.x-=(null==(s=t.visualViewport)?void 0:s.offsetLeft)||0,i.y-=(null==(o=t.visualViewport)?void 0:o.offsetTop)||0}n=i}return Ru(n)}function zh(e,t){return Ih(e)&&"fixed"!==lh(e).position?t?t(e):e.offsetParent:null}function Ph(e,t){const i=ah(e);let n=zh(e,t);for(;n&&Ch(n)&&"static"===lh(n).position;)n=zh(n,t);return n&&("html"===ph(n)||"body"===ph(n)&&"static"===lh(n).position&&!Mh(n))?i:n||function(e){let t=kh(e);for(;Ih(t)&&!Ah(t);){if(Mh(t))return t;t=kh(t)}return null}(e)||i}function Yh(e,t,i){const n=Ih(t),s=Nh(t),o=jh(e,!0,"fixed"===i,t);let r={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(n||!n&&"fixed"!==i)if(("body"!==ph(t)||wh(s))&&(r=Dh(t)),Ih(t)){const e=jh(t,!0);a.x=e.x+t.clientLeft,a.y=e.y+t.clientTop}else s&&(a.x=Eh(s));return{x:o.left+r.scrollLeft-a.x,y:o.top+r.scrollTop-a.y,width:o.width,height:o.height}}const Oh={getClippingRect:function(e){let{element:t,boundary:i,rootBoundary:n,strategy:s}=e;const o="clippingAncestors"===i?function(e,t){const i=t.get(e);if(i)return i;let n=Th(e).filter((e=>fh(e)&&"body"!==ph(e))),s=null;const o="fixed"===lh(e).position;let r=o?kh(e):e;for(;fh(r)&&!Ah(r);){const e=lh(r),t=Mh(r);(o?t||s:t||"static"!==e.position||!s||!["absolute","fixed"].includes(s.position))?s=e:n=n.filter((e=>e!==r)),r=kh(r)}return t.set(e,n),n}(t,this._c):[].concat(i),r=[...o,n],a=r[0],l=r.reduce(((e,i)=>{const n=Wh(t,i,s);return e.top=dh(n.top,e.top),e.right=ch(n.right,e.right),e.bottom=ch(n.bottom,e.bottom),e.left=dh(n.left,e.left),e}),Wh(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:i,strategy:n}=e;const s=Ih(i),o=Nh(i);if(i===o)return t;let r={scrollLeft:0,scrollTop:0},a={x:1,y:1};const l={x:0,y:0};if((s||!s&&"fixed"!==n)&&(("body"!==ph(i)||wh(o))&&(r=Dh(i)),Ih(i))){const e=jh(i);a=Lh(i),l.x=e.x+i.clientLeft,l.y=e.y+i.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-r.scrollLeft*a.x+l.x,y:t.y*a.y-r.scrollTop*a.y+l.y}},isElement:fh,getDimensions:function(e){return Ih(e)?hh(e):e.getBoundingClientRect()},getOffsetParent:Ph,getDocumentElement:Nh,getScale:Lh,async getElementRects(e){let{reference:t,floating:i,strategy:n}=e;const s=this.getOffsetParent||Ph,o=this.getDimensions;return{reference:Yh(t,await s(i),n),floating:{x:0,y:0,...await o(i)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>"rtl"===lh(e).direction};const Rh=(e,t,i)=>{const n=new Map,s={platform:Oh,...i},o={...s.platform,_c:n};return(async(e,t,i)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:r}=i,a=o.filter(Boolean),l=await(null==r.isRTL?void 0:r.isRTL(t));let c=await r.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:u}=Yu(c,n,l),h=n,p={},g=0;for(let m=0;m<a.length;m++){const{name:i,fn:o}=a[m],{x:I,y:f,data:y,reset:b}=await o({x:d,y:u,initialPlacement:n,placement:h,strategy:s,middlewareData:p,rects:c,platform:r,elements:{reference:e,floating:t}});d=null!=I?I:d,u=null!=f?f:u,p={...p,[i]:{...p[i],...y}},b&&g<=50&&(g++,"object"==typeof b&&(b.placement&&(h=b.placement),b.rects&&(c=!0===b.rects?await r.getElementRects({reference:e,floating:t,strategy:s}):b.rects),({x:d,y:u}=Yu(c,h,l))),m=-1)}return{x:d,y:u,placement:h,strategy:s,middlewareData:p}})(e,t,{...s,platform:o})};var Gh="undefined"!=typeof document?k.useLayoutEffect:k.useEffect;function _h(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let i,n,s;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(i=e.length,i!==t.length)return!1;for(n=i;0!=n--;)if(!_h(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),i=s.length,i!==Object.keys(t).length)return!1;for(n=i;0!=n--;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=i;0!=n--;){const i=s[n];if(("_owner"!==i||!e.$$typeof)&&!_h(e[i],t[i]))return!1}return!0}return e!=e&&t!=t}function Bh(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Jh(e,t){const i=Bh(e);return Math.round(t*i)/i}function Hh(e){const t=k.useRef(e);return Gh((()=>{t.current=e})),t}const Vh=e=>({name:"arrow",options:e,fn(t){const{element:i,padding:n}="function"==typeof e?e(t):e;return i&&(s=i,{}.hasOwnProperty.call(s,"current"))?null!=i.current?Hu({element:i.current,padding:n}).fn(t):{}:i?Hu({element:i,padding:n}).fn(t):{};var s}}),Uh=(e,t)=>({...ih(e),options:[e,t]}),Xh=(e,t)=>({...sh(e),options:[e,t]}),Fh=(e,t)=>({...oh(e),options:[e,t]}),Kh=(e,t)=>({...$u(e),options:[e,t]}),Qh=(e,t)=>({...rh(e),options:[e,t]}),$h=(e,t)=>({...th(e),options:[e,t]}),qh=(e,t)=>({...Vh(e),options:[e,t]});var ep=k.forwardRef(((e,t)=>{const{children:i,width:n=10,height:s=5,...o}=e;return(0,T.jsx)(ru.svg,{...o,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?i:(0,T.jsx)("polygon",{points:"0,0 30,0 15,10"})})}));ep.displayName="Arrow";var tp=ep;var ip="Popper",[np,sp]=qd(ip),[op,rp]=np(ip),ap=e=>{const{__scopePopper:t,children:i}=e,[n,s]=k.useState(null);return(0,T.jsx)(op,{scope:t,anchor:n,onAnchorChange:s,children:i})};ap.displayName=ip;var lp="PopperAnchor",cp=k.forwardRef(((e,t)=>{const{__scopePopper:i,virtualRef:n,...s}=e,o=rp(lp,i),r=k.useRef(null),a=$d(t,r);return k.useEffect((()=>{o.onAnchorChange(n?.current||r.current)})),n?null:(0,T.jsx)(ru.div,{...s,ref:a})}));cp.displayName=lp;var dp="PopperContent",[up,hp]=np(dp),pp=k.forwardRef(((e,t)=>{const{__scopePopper:i,side:n="bottom",sideOffset:s=0,align:o="center",alignOffset:r=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:u="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:g,...m}=e,I=rp(dp,i),[f,y]=k.useState(null),b=$d(t,(e=>y(e))),[w,C]=k.useState(null),M=function(e){const[t,i]=k.useState(void 0);return Du((()=>{if(e){i({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver((t=>{if(!Array.isArray(t))return;if(!t.length)return;const n=t[0];let s,o;if("borderBoxSize"in n){const e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,o=t.blockSize}else s=e.offsetWidth,o=e.offsetHeight;i({width:s,height:o})}));return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}i(void 0)}),[e]),t}(w),x=M?.width??0,A=M?.height??0,S=n+("center"!==o?"-"+o:""),v="number"==typeof d?d:{top:0,right:0,bottom:0,left:0,...d},L=Array.isArray(c)?c:[c],j=L.length>0,N={padding:v,boundary:L.filter(fp),altBoundary:j},{refs:D,floatingStyles:E,placement:Z,isPositioned:W,middlewareData:P}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:i="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:r}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[d,u]=k.useState({x:0,y:0,strategy:i,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=k.useState(n);_h(h,n)||p(n);const[g,m]=k.useState(null),[I,f]=k.useState(null),y=k.useCallback((e=>{e!==M.current&&(M.current=e,m(e))}),[]),b=k.useCallback((e=>{e!==x.current&&(x.current=e,f(e))}),[]),w=o||g,C=r||I,M=k.useRef(null),x=k.useRef(null),A=k.useRef(d),S=null!=l,v=Hh(l),L=Hh(s),j=Hh(c),N=k.useCallback((()=>{if(!M.current||!x.current)return;const e={placement:t,strategy:i,middleware:h};L.current&&(e.platform=L.current),Rh(M.current,x.current,e).then((e=>{const t={...e,isPositioned:!1!==j.current};D.current&&!_h(A.current,t)&&(A.current=t,z.flushSync((()=>{u(t)})))}))}),[h,t,i,L,j]);Gh((()=>{!1===c&&A.current.isPositioned&&(A.current.isPositioned=!1,u((e=>({...e,isPositioned:!1}))))}),[c]);const D=k.useRef(!1);Gh((()=>(D.current=!0,()=>{D.current=!1})),[]),Gh((()=>{if(w&&(M.current=w),C&&(x.current=C),w&&C){if(v.current)return v.current(w,C,N);N()}}),[w,C,N,v,S]);const E=k.useMemo((()=>({reference:M,floating:x,setReference:y,setFloating:b})),[y,b]),Z=k.useMemo((()=>({reference:w,floating:C})),[w,C]),T=k.useMemo((()=>{const e={position:i,left:0,top:0};if(!Z.floating)return e;const t=Jh(Z.floating,d.x),n=Jh(Z.floating,d.y);return a?{...e,transform:"translate("+t+"px, "+n+"px)",...Bh(Z.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:t,top:n}}),[i,a,Z.floating,d.x,d.y]);return k.useMemo((()=>({...d,update:N,refs:E,elements:Z,floatingStyles:T})),[d,N,E,Z,T])}({strategy:"fixed",placement:S,whileElementsMounted:(...e)=>{const t=function(e,t,i,n){void 0===n&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:r=!0,animationFrame:a=!1}=n,l=s&&!a,c=l||o?[...fh(e)?Th(e):e.contextElement?Th(e.contextElement):[],...Th(t)]:[];c.forEach((e=>{l&&e.addEventListener("scroll",i,{passive:!0}),o&&e.addEventListener("resize",i)}));let d,u=null;if(r){let n=!0;u=new ResizeObserver((()=>{n||i(),n=!1})),fh(e)&&!a&&u.observe(e),fh(e)||!e.contextElement||a||u.observe(e.contextElement),u.observe(t)}let h=a?jh(e):null;return a&&function t(){const n=jh(e);!h||n.x===h.x&&n.y===h.y&&n.width===h.width&&n.height===h.height||i(),h=n,d=requestAnimationFrame(t)}(),i(),()=>{var e;c.forEach((e=>{l&&e.removeEventListener("scroll",i),o&&e.removeEventListener("resize",i)})),null==(e=u)||e.disconnect(),u=null,a&&cancelAnimationFrame(d)}}(...e,{animationFrame:"always"===p});return t},elements:{reference:I.anchor},middleware:[Uh({mainAxis:s+A,alignmentAxis:r}),l&&Xh({mainAxis:!0,crossAxis:!1,limiter:"partial"===u?Fh():void 0,...N}),l&&Kh({...N}),Qh({...N,apply:({elements:e,rects:t,availableWidth:i,availableHeight:n})=>{const{width:s,height:o}=t.reference,r=e.floating.style;r.setProperty("--radix-popper-available-width",`${i}px`),r.setProperty("--radix-popper-available-height",`${n}px`),r.setProperty("--radix-popper-anchor-width",`${s}px`),r.setProperty("--radix-popper-anchor-height",`${o}px`)}}),w&&qh({element:w,padding:a}),yp({arrowWidth:x,arrowHeight:A}),h&&$h({strategy:"referenceHidden",...N})]}),[Y,O]=bp(Z),R=au(g);Du((()=>{W&&R?.()}),[W,R]);const G=P.arrow?.x,_=P.arrow?.y,B=0!==P.arrow?.centerOffset,[J,H]=k.useState();return Du((()=>{f&&H(window.getComputedStyle(f).zIndex)}),[f]),(0,T.jsx)("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...E,transform:W?E.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[P.transformOrigin?.x,P.transformOrigin?.y].join(" "),...P.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,T.jsx)(up,{scope:i,placedSide:Y,onArrowChange:C,arrowX:G,arrowY:_,shouldHideArrow:B,children:(0,T.jsx)(ru.div,{"data-side":Y,"data-align":O,...m,ref:b,style:{...m.style,animation:W?void 0:"none"}})})})}));pp.displayName=dp;var gp="PopperArrow",mp={top:"bottom",right:"left",bottom:"top",left:"right"},Ip=k.forwardRef((function(e,t){const{__scopePopper:i,...n}=e,s=hp(gp,i),o=mp[s.placedSide];return(0,T.jsx)("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:(0,T.jsx)(tp,{...n,ref:t,style:{...n.style,display:"block"}})})}));function fp(e){return null!==e}Ip.displayName=gp;var yp=e=>({name:"transformOrigin",options:e,fn(t){const{placement:i,rects:n,middlewareData:s}=t,o=0!==s.arrow?.centerOffset,r=o?0:e.arrowWidth,a=o?0:e.arrowHeight,[l,c]=bp(i),d={start:"0%",center:"50%",end:"100%"}[c],u=(s.arrow?.x??0)+r/2,h=(s.arrow?.y??0)+a/2;let p="",g="";return"bottom"===l?(p=o?d:`${u}px`,g=-a+"px"):"top"===l?(p=o?d:`${u}px`,g=`${n.floating.height+a}px`):"right"===l?(p=-a+"px",g=o?d:`${h}px`):"left"===l&&(p=`${n.floating.width+a}px`,g=o?d:`${h}px`),{data:{x:p,y:g}}}});function bp(e){const[t,i="center"]=e.split("-");return[t,i]}var wp=ap,Cp=cp,Mp=pp,xp=Ip,Ap=k.forwardRef(((e,t)=>{const{container:i,...n}=e,[s,o]=k.useState(!1);Du((()=>o(!0)),[]);const r=i||s&&globalThis?.document?.body;return r?z.createPortal((0,T.jsx)(ru.div,{...n,ref:t}),r):null}));Ap.displayName="Portal";var Sp=e=>{const{present:t,children:i}=e,n=function(e){const[t,i]=k.useState(),n=k.useRef({}),s=k.useRef(e),o=k.useRef("none"),r=e?"mounted":"unmounted",[a,l]=function(e,t){return k.useReducer(((e,i)=>t[e][i]??e),e)}(r,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect((()=>{const e=vp(n.current);o.current="mounted"===a?e:"none"}),[a]),Du((()=>{const t=n.current,i=s.current;if(i!==e){const n=o.current,r=vp(t);if(e)l("MOUNT");else if("none"===r||"none"===t?.display)l("UNMOUNT");else{l(i&&n!==r?"ANIMATION_OUT":"UNMOUNT")}s.current=e}}),[e,l]),Du((()=>{if(t){let e;const i=t.ownerDocument.defaultView??window,r=o=>{const r=vp(n.current).includes(o.animationName);if(o.target===t&&r&&(l("ANIMATION_END"),!s.current)){const n=t.style.animationFillMode;t.style.animationFillMode="forwards",e=i.setTimeout((()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=n)}))}},a=e=>{e.target===t&&(o.current=vp(n.current))};return t.addEventListener("animationstart",a),t.addEventListener("animationcancel",r),t.addEventListener("animationend",r),()=>{i.clearTimeout(e),t.removeEventListener("animationstart",a),t.removeEventListener("animationcancel",r),t.removeEventListener("animationend",r)}}l("ANIMATION_END")}),[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:k.useCallback((e=>{e&&(n.current=getComputedStyle(e)),i(e)}),[])}}(t),s="function"==typeof i?i({present:n.isPresent}):k.Children.only(i),o=$d(n.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning;if(i)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(s));return"function"==typeof i||n.isPresent?k.cloneElement(s,{ref:o}):null};function vp(e){return e?.animationName||"none"}function Lp({prop:e,defaultProp:t,onChange:i=(()=>{})}){const[n,s]=function({defaultProp:e,onChange:t}){const i=k.useState(e),[n]=i,s=k.useRef(n),o=au(t);return k.useEffect((()=>{s.current!==n&&(o(n),s.current=n)}),[n,s,o]),i}({defaultProp:t,onChange:i}),o=void 0!==e,r=o?e:n,a=au(i);return[r,k.useCallback((t=>{if(o){const i="function"==typeof t?t(e):t;i!==e&&a(i)}else s(t)}),[o,e,s,a])]}Sp.displayName="Presence";var jp=kn(),Np=function(){},Dp=k.forwardRef((function(e,t){var i=k.useRef(null),n=k.useState({onScrollCapture:Np,onWheelCapture:Np,onTouchMoveCapture:Np}),s=n[0],o=n[1],r=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,u=e.shards,h=e.sideCar,p=e.noIsolation,g=e.inert,m=e.allowPinchZoom,I=e.as,f=void 0===I?"div":I,y=e.gapMode,b=(0,xn().__rest)(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=h,C=Nn([i,t]),M=(0,xn().__assign)((0,xn().__assign)({},b),s);return k.createElement(k.Fragment,null,d&&k.createElement(w,{sideCar:jp,removeScrollBar:c,shards:u,noIsolation:p,inert:g,setCallbacks:o,allowPinchZoom:!!m,lockRef:i,gapMode:y}),r?k.cloneElement(k.Children.only(a),(0,xn().__assign)((0,xn().__assign)({},M),{ref:C})):k.createElement(f,(0,xn().__assign)({},M,{className:l,ref:C}),a))}));Dp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Dp.classNames={fullWidth:Sn,zeroRight:An};var Ep=!1;if("undefined"!=typeof window)try{var kp=Object.defineProperty({},"passive",{get:function(){return Ep=!0,!0}});window.addEventListener("test",kp,kp),window.removeEventListener("test",kp,kp)}catch(tm){Ep=!1}var Zp=!!Ep&&{passive:!1},Tp=function(e,t){if(!(e instanceof Element))return!1;var i=window.getComputedStyle(e);return"hidden"!==i[t]&&!(i.overflowY===i.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===i[t])},Wp=function(e,t){var i=t.ownerDocument,n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),zp(e,n)){var s=Pp(e,n);if(s[1]>s[2])return!0}n=n.parentNode}while(n&&n!==i.body);return!1},zp=function(e,t){return"v"===e?function(e){return Tp(e,"overflowY")}(t):function(e){return Tp(e,"overflowX")}(t)},Pp=function(e,t){return"v"===e?[(i=t).scrollTop,i.scrollHeight,i.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var i},Yp=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Op=function(e){return[e.deltaX,e.deltaY]},Rp=function(e){return e&&"current"in e?e.current:e},Gp=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},_p=0,Bp=[];function Jp(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Hp=Yn(jp,(function(e){var t=k.useRef([]),i=k.useRef([0,0]),n=k.useRef(),s=k.useState(_p++)[0],o=k.useState(Gn)[0],r=k.useRef(e);k.useEffect((function(){r.current=e}),[e]),k.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var t=(0,xn().__spreadArray)([e.lockRef.current],(e.shards||[]).map(Rp),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(s))})),function(){document.body.classList.remove("block-interactivity-".concat(s)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(s))}))}}}),[e.inert,e.lockRef.current,e.shards]);var a=k.useCallback((function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!r.current.allowPinchZoom;var s,o=Yp(e),a=i.current,l="deltaX"in e?e.deltaX:a[0]-o[0],c="deltaY"in e?e.deltaY:a[1]-o[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var h=Wp(u,d);if(!h)return!0;if(h?s=u:(s="v"===u?"h":"v",h=Wp(u,d)),!h)return!1;if(!n.current&&"changedTouches"in e&&(l||c)&&(n.current=s),!s)return!0;var p=n.current||s;return function(e,t,i,n,s){var o=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),r=o*n,a=i.target,l=t.contains(a),c=!1,d=r>0,u=0,h=0;do{var p=Pp(e,a),g=p[0],m=p[1]-p[2]-o*g;(g||m)&&zp(e,a)&&(u+=m,h+=g),a=a instanceof ShadowRoot?a.host:a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(d&&(s&&Math.abs(u)<1||!s&&r>u)||!d&&(s&&Math.abs(h)<1||!s&&-r>h))&&(c=!0),c}(p,t,e,"h"===p?l:c,!0)}),[]),l=k.useCallback((function(e){var i=e;if(Bp.length&&Bp[Bp.length-1]===o){var n="deltaY"in i?Op(i):Yp(i),s=t.current.filter((function(e){return e.name===i.type&&(e.target===i.target||i.target===e.shadowParent)&&function(e,t){return e[0]===t[0]&&e[1]===t[1]}(e.delta,n)}))[0];if(s&&s.should)i.cancelable&&i.preventDefault();else if(!s){var l=(r.current.shards||[]).map(Rp).filter(Boolean).filter((function(e){return e.contains(i.target)}));(l.length>0?a(i,l[0]):!r.current.noIsolation)&&i.cancelable&&i.preventDefault()}}}),[]),c=k.useCallback((function(e,i,n,s){var o={name:e,delta:i,target:n,should:s,shadowParent:Jp(n)};t.current.push(o),setTimeout((function(){t.current=t.current.filter((function(e){return e!==o}))}),1)}),[]),d=k.useCallback((function(e){i.current=Yp(e),n.current=void 0}),[]),u=k.useCallback((function(t){c(t.type,Op(t),t.target,a(t,e.lockRef.current))}),[]),h=k.useCallback((function(t){c(t.type,Yp(t),t.target,a(t,e.lockRef.current))}),[]);k.useEffect((function(){return Bp.push(o),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Zp),document.addEventListener("touchmove",l,Zp),document.addEventListener("touchstart",d,Zp),function(){Bp=Bp.filter((function(e){return e!==o})),document.removeEventListener("wheel",l,Zp),document.removeEventListener("touchmove",l,Zp),document.removeEventListener("touchstart",d,Zp)}}),[]);var p=e.removeScrollBar,g=e.inert;return k.createElement(k.Fragment,null,g?k.createElement(o,{styles:Gp(s)}):null,p?k.createElement(Fn,{gapMode:e.gapMode}):null)}));var Vp=k.forwardRef((function(e,t){return k.createElement(Dp,(0,xn().__assign)({},e,{ref:t,sideCar:Hp}))}));Vp.classNames=Dp.classNames;const Up=Vp;var Xp="Popover",[Fp,Kp]=qd(Xp,[sp]),Qp=sp(),[$p,qp]=Fp(Xp),eg=e=>{const{__scopePopover:t,children:i,open:n,defaultOpen:s,onOpenChange:o,modal:r=!1}=e,a=Qp(t),l=k.useRef(null),[c,d]=k.useState(!1),[u=!1,h]=Lp({prop:n,defaultProp:s,onChange:o});return(0,T.jsx)(wp,{...a,children:(0,T.jsx)($p,{scope:t,contentId:Zu(),triggerRef:l,open:u,onOpenChange:h,onOpenToggle:k.useCallback((()=>h((e=>!e))),[h]),hasCustomAnchor:c,onCustomAnchorAdd:k.useCallback((()=>d(!0)),[]),onCustomAnchorRemove:k.useCallback((()=>d(!1)),[]),modal:r,children:i})})};eg.displayName=Xp;var tg="PopoverAnchor",ig=k.forwardRef(((e,t)=>{const{__scopePopover:i,...n}=e,s=qp(tg,i),o=Qp(i),{onCustomAnchorAdd:r,onCustomAnchorRemove:a}=s;return k.useEffect((()=>(r(),()=>a())),[r,a]),(0,T.jsx)(Cp,{...o,...n,ref:t})}));ig.displayName=tg;var ng="PopoverTrigger",sg=k.forwardRef(((e,t)=>{const{__scopePopover:i,...n}=e,s=qp(ng,i),o=Qp(i),r=$d(t,s.triggerRef),a=(0,T.jsx)(ru.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":fg(s.open),...n,ref:r,onClick:Fd(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:(0,T.jsx)(Cp,{asChild:!0,...o,children:a})}));sg.displayName=ng;var og="PopoverPortal",[rg,ag]=Fp(og,{forceMount:void 0}),lg=e=>{const{__scopePopover:t,forceMount:i,children:n,container:s}=e,o=qp(og,t);return(0,T.jsx)(rg,{scope:t,forceMount:i,children:(0,T.jsx)(Sp,{present:i||o.open,children:(0,T.jsx)(Ap,{asChild:!0,container:s,children:n})})})};lg.displayName=og;var cg="PopoverContent",dg=k.forwardRef(((e,t)=>{const i=ag(cg,e.__scopePopover),{forceMount:n=i.forceMount,...s}=e,o=qp(cg,e.__scopePopover);return(0,T.jsx)(Sp,{present:n||o.open,children:o.modal?(0,T.jsx)(ug,{...s,ref:t}):(0,T.jsx)(hg,{...s,ref:t})})}));dg.displayName=cg;var ug=k.forwardRef(((e,t)=>{const i=qp(cg,e.__scopePopover),n=k.useRef(null),s=$d(t,n),o=k.useRef(!1);return k.useEffect((()=>{const e=n.current;if(e)return Mn(e)}),[]),(0,T.jsx)(Up,{as:tu,allowPinchZoom:!0,children:(0,T.jsx)(pg,{...e,ref:s,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Fd(e.onCloseAutoFocus,(e=>{e.preventDefault(),o.current||i.triggerRef.current?.focus()})),onPointerDownOutside:Fd(e.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,i=0===t.button&&!0===t.ctrlKey,n=2===t.button||i;o.current=n}),{checkForDefaultPrevented:!1}),onFocusOutside:Fd(e.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1})})})})),hg=k.forwardRef(((e,t)=>{const i=qp(cg,e.__scopePopover),n=k.useRef(!1),s=k.useRef(!1);return(0,T.jsx)(pg,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||i.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));const o=t.target,r=i.triggerRef.current?.contains(o);r&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})})),pg=k.forwardRef(((e,t)=>{const{__scopePopover:i,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:r,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,...u}=e,h=qp(cg,i),p=Qp(i);return yu(),(0,T.jsx)(xu,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:(0,T.jsx)(pu,{asChild:!0,disableOutsidePointerEvents:r,onInteractOutside:d,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:(0,T.jsx)(Mp,{"data-state":fg(h.open),role:"dialog",id:h.contentId,...p,...u,ref:t,style:{...u.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})})),gg="PopoverClose",mg=k.forwardRef(((e,t)=>{const{__scopePopover:i,...n}=e,s=qp(gg,i);return(0,T.jsx)(ru.button,{type:"button",...n,ref:t,onClick:Fd(e.onClick,(()=>s.onOpenChange(!1)))})}));mg.displayName=gg;var Ig=k.forwardRef(((e,t)=>{const{__scopePopover:i,...n}=e,s=Qp(i);return(0,T.jsx)(xp,{...s,...n,ref:t})}));function fg(e){return e?"open":"closed"}Ig.displayName="PopoverArrow";var yg=eg,bg=sg,wg=lg,Cg=dg;const Mg=({id:e,open:t,children:i,onOpenChange:n})=>{const s=dd(e,n);return(0,T.jsx)(yg,{onOpenChange:s,open:t,children:(0,T.jsx)("div",{className:"tlui-popover",children:i})})},xg=({children:e,disabled:t,"data-wd":i})=>(0,T.jsx)(bg,{"data-wd":i,disabled:t,asChild:!0,dir:"ltr",children:e}),Ag=({side:e,children:t,align:i="center",sideOffset:s=8,alignOffset:o=0})=>{const r=(0,n().NFA)();return(0,T.jsx)(wg,{dir:"ltr",container:r,children:(0,T.jsx)(Cg,{className:"tlui-popover__content",side:e,sideOffset:s,align:i,alignOffset:o,dir:"ltr",children:t})})},Sg=(0,k.memo)((function(){const e=tc(),t=(0,n().NFA)(),i=function(){const e=k.useContext(yc);if(!e)throw new Error("useActionsMenuSchema must be used inside of a ActionsMenuSchemaProvider.");return e}(),s=ed();return(0,T.jsxs)(Mg,{id:"actions menu",children:[(0,T.jsx)(xg,{children:(0,T.jsx)(Fr,{className:"tlui-menu__trigger","data-wd":"main.action-menu",icon:"dots-vertical",title:e("actions-menu.title"),smallIcon:!0})}),(0,T.jsx)(wg,{dir:"ltr",container:t,children:(0,T.jsx)(Cg,{className:"tlui-popover__content",side:"bottom",dir:"ltr",sideOffset:6,children:(0,T.jsx)("div",{className:"tlui-actions-menu tlui-button-grid__four",children:i.map((function(t){if(s&&!t.readonlyOk)return null;if("item"===t.type){const{id:i,icon:n,label:s,kbd:o,onSelect:r}=t.actionItem;return(0,T.jsx)(Fr,{className:"tlui-button-grid__button","data-wd":`menu-item.${t.id}`,icon:n,title:s?o?`${e(s)} ${Ur(o)}`:`${e(s)}`:o?`${Ur(o)}`:"",onClick:r,disabled:t.disabled},i)}}))})})})]})})),vg=(0,et().u4)((function(){const e=(0,n().nme)(),t=hc(),i=tc(),s=t.duplicate,o=e.selectedIds.length<=0;return(0,T.jsx)(Fr,{icon:s.icon,onClick:s.onSelect,disabled:o,title:`${i(s.label)} ${Ur(s.kbd)}`,smallIcon:!0})})),Lg=k.memo((function(){const e=tc();return(0,T.jsxs)(Da,{id:"main menu",children:[(0,T.jsx)(Ea,{children:(0,T.jsx)(Fr,{className:"tlui-menu__trigger","data-wd":"main.menu",title:e("menu.title"),icon:"menu"})}),(0,T.jsx)(ka,{alignOffset:0,sideOffset:6,children:(0,T.jsx)(jg,{})})]})}));function jg(){const e=(0,n().nme)(),t=tc(),i=function(){const e=k.useContext(ud);if(!e)throw new Error("useMenuSchema must be used inside of a MenuSchemaProvider.");return e}(),s=Ic(),o=ed(),{paste:r}=Ol();function a(e,i,l,c){switch(i.type){case"custom":return o&&!i.readonlyOk?null:"LANGUAGE_MENU"===i.id?(0,T.jsx)(vd,{},"item"):"MENU_PASTE"===i.id?(0,T.jsx)(Pa,{"data-wd":`menu-item.${i.id}`,kbd:"$v",label:"action.paste",disabled:i.disabled,onMouseDown:()=>{e.isSafari&&navigator.clipboard?.read&&navigator.clipboard.read().then((e=>{r(e)}))},onClick:()=>{e.isSafari||navigator.clipboard?.read&&navigator.clipboard.read().then((e=>{r(e)}))},onPointerUp:n().woC},i.id):null;case"group":return o&&!i.readonlyOk?null:(0,T.jsx)(za,{size:c<=1?"medium":s<3||"submenu"===l?.type&&c>2?"tiny":"medium",children:i.children.map((t=>a(e,t,i,c+1)))},i.id);case"submenu":return o&&!i.readonlyOk?null:(0,T.jsxs)(Za,{id:`main menu ${l?l.id+" ":""}${i.id}`,children:[(0,T.jsx)(Ta,{label:i.label,"data-wd":`menu-item.${i.id}`}),(0,T.jsx)(Wa,{sideOffset:-4,alignOffset:-1,children:i.children.map((t=>a(e,t,i,c+1)))})]},i.id);case"item":{if(o&&!i.readonlyOk)return null;const{id:e,checkbox:n,menuLabel:s,label:r,onSelect:a,kbd:l}=i.actionItem,c=s??r,d=c?t(c):void 0;return n?(0,T.jsxs)(Ya,{onSelect:a,title:d||"",checked:i.checked,disabled:i.disabled,children:[d&&(0,T.jsx)("span",{children:d}),l&&(0,T.jsx)(Xr,{children:l})]},e):(0,T.jsx)(Pa,{"data-wd":`menu-item.${i.id}`,kbd:l,label:c,onClick:a,disabled:i.disabled},e)}}}return(0,T.jsx)(T.Fragment,{children:i.map((t=>a(e,t,null,0)))})}const Ng=function({name:e,id:t,isCurrentPage:i}){const s=(0,n().nme)(),o=(0,k.useRef)(null),r=(0,k.useCallback)((e=>{s.renamePage(t,e||"New Page",!0)}),[s,t]),a=(0,k.useCallback)((e=>{s.mark("rename page"),s.renamePage(t,e||"New Page",!1)}),[s,t]);return(0,T.jsx)(Ga,{className:"tlui-page-menu__item__input",ref:e=>o.current=e,defaultValue:e,onValueChange:r,onComplete:a,onCancel:a,shouldManuallyMaintainScrollPositionWhenFocused:!0,autofocus:i,autoselect:!0})},Dg=(e,t,i,s)=>{let o;const r=e.pages,a=i>s?r[s-1]:r[s],l=i>s?r[s]:r[s+1];o=a&&!l?(0,n().AQy)(a.index):!a&&l?(0,n().SBu)(r[0].index):(0,n().HEt)(a.index,l.index),o!==r[i].index&&(e.mark("moving page"),e.updatePage({id:t,index:o}))},Eg=(0,et().u4)((function({index:e,listSize:t,item:i,onRename:s}){const o=(0,n().nme)(),r=tc(),a=o.pages,l=(0,k.useCallback)((()=>{o.mark("creating page");const e=n()._P5.createId();o.duplicatePage(i.id,e)}),[o,i]),c=(0,k.useCallback)((()=>{Dg(o,i.id,e,e-1)}),[o,i,e]),d=(0,k.useCallback)((()=>{Dg(o,i.id,e,e+1)}),[o,i,e]),u=(0,k.useCallback)((()=>{o.mark("deleting page"),o.deletePage(i.id)}),[o,i]);return(0,T.jsxs)(Da,{id:"page item submenu",children:[(0,T.jsx)(Ea,{children:(0,T.jsx)(Fr,{title:r("page-menu.submenu.title"),icon:"dots-vertical"})}),(0,T.jsxs)(ka,{alignOffset:0,children:[(0,T.jsxs)(za,{children:[s&&(0,T.jsx)(Aa,{dir:"ltr",onSelect:s,asChild:!0,children:(0,T.jsx)(Fr,{className:"tlui-menu__button",label:"page-menu.submenu.rename"})}),(0,T.jsx)(Aa,{dir:"ltr",onSelect:l,disabled:a.length>=n().Y0R,asChild:!0,children:(0,T.jsx)(Fr,{className:"tlui-menu__button",label:"page-menu.submenu.duplicate-page"})}),e>0&&(0,T.jsx)(Aa,{dir:"ltr",onSelect:c,asChild:!0,children:(0,T.jsx)(Fr,{className:"tlui-menu__button",label:"page-menu.submenu.move-up"})}),e<t-1&&(0,T.jsx)(Aa,{dir:"ltr",onSelect:d,asChild:!0,children:(0,T.jsx)(Fr,{className:"tlui-menu__button",label:"page-menu.submenu.move-down"})})]}),t>1&&(0,T.jsx)(za,{children:(0,T.jsx)(Aa,{dir:"ltr",onSelect:u,asChild:!0,children:(0,T.jsx)(Fr,{className:"tlui-menu__button",label:"page-menu.submenu.delete"})})})]})]})})),kg=(0,et().u4)((function(){const e=(0,n().nme)(),t=tc(),i=Ic(),s=i<5?36:40,o=(0,k.useRef)(null),{pages:r,currentPage:a}=e,l=e.isReadOnly,c=e.pages.length>=n().Y0R,[d,u]=(0,k.useState)(!1),h=(0,k.useCallback)((()=>{l||u((e=>!e))}),[l]),[p,g]=(0,k.useState)(!1),m=(0,k.useCallback)((e=>{g(e),u(!1)}),[]),I=(0,k.useRef)({isPointing:!1,status:"idle",pointing:null,startY:0,startIndex:0,dragIndex:0}),[f,y]=(0,k.useState)(Object.fromEntries(r.map(((e,t)=>[e.id,{y:t*s,offsetY:0,isSelected:!1}]))));(0,k.useLayoutEffect)((()=>{y(Object.fromEntries(r.map(((e,t)=>[e.id,{y:t*s,offsetY:0,isSelected:!1}]))))}),[s,r]),(0,k.useEffect)((()=>{p&&requestAnimationFrame((()=>{const e=document.querySelector(`[data-wd="page-menu-item-${a.id}"]`);if(e){const t=o.current;if(!t)return;const i=e.offsetTop;i<t.scrollTop&&t.scrollTo({top:i});const n=i+s;n>t.scrollTop+t.offsetHeight&&t.scrollTo({top:n-t.offsetHeight})}}))}),[s,a,p]);const b=(0,k.useCallback)((e=>{const{clientY:t,currentTarget:i}=e,{dataset:{id:n,index:o}}=i;if(!n||!o)return;const a=I.current;e.currentTarget.setPointerCapture(e.pointerId),a.status="pointing",a.pointing={id:n,index:+o};const l=f[n].y;a.startY=t,a.startIndex=Math.max(0,Math.min(Math.round(l/s),r.length-1))}),[s,r.length,f]),w=(0,k.useCallback)((e=>{const t=I.current;if("pointing"===t.status){const{clientY:i}=e,n=i-t.startY;Math.abs(n)>5&&(t.status="dragging")}if("dragging"===t.status){const{clientY:i}=e,n=i-t.startY,o=f[t.pointing.id],{startIndex:a,pointing:l}=t,c=o.y+n,d=Math.max(0,Math.min(Math.round(c/s),r.length-1)),u={...f};if(u[l.id]={y:o.y,offsetY:n,isSelected:!0},d!==t.dragIndex){t.dragIndex=d;for(let e=0;e<r.length;e++){const i=r[e];if(i.id===t.pointing.id)continue;let{y:n}=u[i.id];d===a?n=e*s:d<a?n=d<=e&&e<a?(e+1)*s:e*s:d>a&&(n=d>=e&&e>a?(e-1)*s:e*s),n!==u[i.id].y&&(u[i.id]={y:n,offsetY:0,isSelected:!0})}}y(u)}}),[s,r,f]),C=(0,k.useCallback)((t=>{const i=I.current;if("dragging"===i.status){const{id:t,index:n}=i.pointing;Dg(e,t,n,i.dragIndex)}t.currentTarget.releasePointerCapture(t.pointerId),i.status="idle"}),[e]),M=(0,k.useCallback)((e=>{const t=I.current;"Escape"===e.key&&("dragging"===t.status&&y(Object.fromEntries(r.map(((e,t)=>[e.id,{y:t*s,offsetY:0,isSelected:!1}])))),t.status="idle")}),[s,r]),x=(0,k.useCallback)((()=>{if(l)return;e.mark("creating page");const i=td()._P.createId();e.createPage(t("page-menu.new-page-initial-name"),i),u(!0)}),[e,t,l]);return(0,T.jsxs)(Mg,{id:"page menu",onOpenChange:m,open:p,children:[(0,T.jsx)(xg,{children:(0,T.jsx)(Fr,{className:"tlui-page-menu__trigger tlui-menu__trigger","data-wd":"main.page-menu",icon:"chevron-down",title:a.name,children:(0,T.jsx)("div",{className:"tlui-page-menu__name",children:a.name})})}),(0,T.jsx)(Ag,{side:"bottom",align:"start",sideOffset:6,children:(0,T.jsxs)("div",{className:"tlui-page-menu__wrapper",children:[(0,T.jsxs)("div",{className:"tlui-page-menu__header",children:[(0,T.jsx)("div",{className:"tlui-page-menu__header__title",children:t("page-menu.title")}),!l&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Fr,{"data-wd":"page-menu.edit",title:t(d?"page-menu.edit-done":"page-menu.edit-start"),icon:d?"check":"edit",onClick:h}),(0,T.jsx)(Fr,{"data-wd":"page-menu.create",icon:"plus",title:t(c?"page-menu.max-page-count-reached":"page-menu.create-new-page"),disabled:c,onClick:x})]})]}),(0,T.jsx)("div",{className:"tlui-page-menu__list tlui-menu__group",style:{height:s*r.length+4},ref:o,children:r.map(((t,n)=>{const o=f[t.id]??{position:40*n,offsetY:0};return d?(0,T.jsxs)("div",{"data-wd":`page-menu-item-${t.id}`,className:"tlui-page_menu__item__sortable",style:{zIndex:t.id===a.id?888:n,transform:`translate(0px, ${o.y+o.offsetY}px)`},children:[(0,T.jsx)(Fr,{tabIndex:-1,className:"tlui-page_menu__item__sortable__handle",icon:"drag-handle-dots",onPointerDown:b,onPointerUp:C,onPointerMove:w,onKeyDown:M,"data-id":t.id,"data-index":n}),i<5&&e.isCoarsePointer?(0,T.jsx)(Fr,{className:"tlui-page-menu__item__button",onClick:()=>{const i=window.prompt("Rename page",t.name);i&&i!==t.name&&e.renamePage(t.id,i)},onDoubleClick:h,isChecked:t.id===a.id,children:(0,T.jsx)("span",{children:t.name})}):(0,T.jsx)("div",{id:`page-menu-item-${t.id}`,"data-wd":`page-menu-item-${t.id}`,className:"tlui-page_menu__item__sortable__title",style:{height:s},children:(0,T.jsx)(Ng,{id:t.id,name:t.name,isCurrentPage:t.id===a.id})}),!l&&(0,T.jsx)("div",{className:"tlui-page_menu__item__submenu","data-isediting":d,children:(0,T.jsx)(Eg,{index:n,item:t,listSize:r.length})})]},t.id+"_editing"):(0,T.jsxs)("div",{"data-wd":`page-menu-item-${t.id}`,className:"tlui-page-menu__item",children:[(0,T.jsxs)(Fr,{className:"tlui-page-menu__item__button tlui-page-menu__item__button__checkbox",onClick:()=>e.setCurrentPageId(t.id),onDoubleClick:h,isChecked:t.id===a.id,children:[(0,T.jsx)("div",{className:"tlui-page-menu__item__button__check",children:t.id===a.id&&(0,T.jsx)(Br,{icon:"check"})}),(0,T.jsx)("span",{children:t.name})]}),!l&&(0,T.jsx)("div",{className:"tlui-page_menu__item__submenu",children:(0,T.jsx)(Eg,{index:n,item:t,listSize:r.length,onRename:()=>{if(e.isIos){const i=window.prompt("Rename page",t.name);i&&i!==t.name&&e.renamePage(t.id,i)}else u(!0),e.setCurrentPageId(t.id)}})})]},t.id)}))})]})})]})})),Zg=(0,k.memo)((function(){const e=tc(),t=wc(),i=hc().redo;return(0,T.jsx)(Fr,{"data-wd":"main.redo",icon:i.icon,title:`${e(i.label)} ${Ur(i.kbd)}`,disabled:!t,onClick:i.onSelect,smallIcon:!0})})),Tg=(0,et().u4)((function(){const e=(0,n().nme)(),t=hc(),i=tc(),s=t.delete;if(ed())return null;const o=e.selectedIds.length<=0;return(0,T.jsx)(Fr,{icon:s.icon,onClick:s.onSelect,disabled:o,title:`${i(s.label)} ${Ur(s.kbd)}`,smallIcon:!0})})),Wg=(0,k.memo)((function(){const e=tc(),t=Cc(),i=hc().undo;return(0,T.jsx)(Fr,{"data-wd":"main.undo",icon:i.icon,title:`${e(i.label)} ${Ur(i.kbd)}`,disabled:!t,onClick:i.onSelect,smallIcon:!0})})),zg=(0,et().u4)((function(){const e=Ic(),t=ed();return(0,T.jsx)("div",{className:"tlui-menu-zone",children:(0,T.jsxs)("div",{className:"tlui-menu-zone__controls",children:[(0,T.jsx)(Lg,{}),(0,T.jsx)("div",{className:"tlui-menu-zone__divider"}),(0,T.jsx)(kg,{}),e>=5&&!t&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{className:"tlui-menu-zone__divider"}),(0,T.jsx)(Wg,{}),(0,T.jsx)(Zg,{}),(0,T.jsx)(Tg,{}),(0,T.jsx)(vg,{}),(0,T.jsx)(Sg,{})]})]})})}));function Pg({toast:e}){const{removeToast:t}=Bl(),i=tc(),n=e.actions&&e.actions.length>0;return(0,T.jsxs)(Xe,{onOpenChange:i=>{i||t(e.id)},className:"tlui-toast__container",duration:e.keepOpen?1/0:5e3,children:[e.icon&&(0,T.jsx)("div",{className:"tlui-toast__icon",children:(0,T.jsx)(Br,{icon:e.icon})}),(0,T.jsxs)("div",{className:"tlui-toast__main",children:[(0,T.jsxs)("div",{className:"tlui-toast__content",children:[(0,T.jsx)(Fe,{className:"tlui-toast__title",children:e.title}),(0,T.jsx)(Ke,{className:"tlui-toast__description",children:e.description})]}),e.actions&&(0,T.jsxs)("div",{className:"tlui-toast__actions",children:[e.actions.map(((e,t)=>(0,T.jsx)(Qe,{altText:e.label,asChild:!0,onClick:e.onClick,children:(0,T.jsx)(Fr,{className:"warn"===e.type?"tlui-button__warning":"tlui-button__primary",children:e.label})},t))),n&&(0,T.jsx)($e,{asChild:!0,children:(0,T.jsx)(Fr,{className:"tlui-toast__close",style:{marginLeft:"auto"},children:e.closeLabel??i("toast.close")})})]})]}),!n&&(0,T.jsx)($e,{asChild:!0,children:(0,T.jsx)(Fr,{className:"tlui-toast__close",children:e.closeLabel??i("toast.close")})})]})}const Yg=k.memo((function(){const{toasts:e}=Bl();return(0,T.jsx)(T.Fragment,{children:e.map((e=>(0,T.jsx)(Pg,{toast:e},e.id)))})}));function Og(){const{toasts:e}=Bl(),[t,i]=k.useState(!1);return k.useEffect((()=>{let t=!1;return e.length?i(!0):setTimeout((()=>{t||i(!1)}),1e3),()=>{t=!0}}),[e.length,i]),t?(0,T.jsx)(Le,{className:"tlui-toast__viewport"}):null}function Rg(){const e=(0,n().nme)(),t=(0,et().h)("current color",(()=>{const{props:t}=e;return t?t.color?e.getCssColor(t.color):null:"var(--color-muted-1)"}),[e]),i=(0,et().h)("isHandOrEraserToolActive",(()=>"hand"===e.currentToolId||"eraser"===e.currentToolId),[e]),s=(0,k.useCallback)((t=>{t||(e.isChangingStyle=!1)}),[e]);return(0,T.jsxs)(Mg,{id:"style menu",onOpenChange:s,children:[(0,T.jsx)(xg,{disabled:i,children:(0,T.jsx)(Fr,{className:"tlui-toolbar__tools__button tlui-toolbar__styles__button tlui-popover__trigger","data-wd":"mobile.styles",style:{color:t??"var(--color-text)"},children:(0,T.jsx)(Br,{icon:t?"blob":"mixed"})})}),(0,T.jsx)(Ag,{side:"top",align:"end",children:(0,T.jsx)(Pd,{isMobile:!0})})]})}const Gg=(0,et().u4)((function({activeToolId:e}){const t=(0,n().nme)(),i=Ic(),s=tc(),{instanceState:{isToolLocked:o}}=t;return!("select"===e||"hand"===e||"draw"===e||"eraser"===e||"text"===e)?(0,T.jsx)(Fr,{title:s("action.toggle-tool-lock"),className:qe()("tlui-toolbar__lock-button",{"tlui-toolbar__lock-button__mobile":i<5}),icon:t.instanceState.isToolLocked?"lock":"unlock",onClick:()=>t.updateInstanceState({isToolLocked:!o}),smallIcon:!0}):null})),_g=(0,et().u4)((function(){const e=(0,n().nme)(),t=tc(),i=Ic(),s=k.useRef(void 0),o=e.isReadOnly,r=function(){const e=k.useContext(gd);if(!e)throw new Error("useToolbarSchema must be used within a ToolbarSchemaProvider");return e}(),a=e.currentToolId,l=e.props?e.props.geo:void 0,c=e=>e.label?`${t(e.label)} ${e.kbd?Ur(e.kbd):""}`:"",d=r.find((e=>dr(e.toolItem,a,l))),{itemsInPanel:u,itemsInDropdown:h,dropdownFirstItem:p}=k.useMemo((()=>{const e=[],t=[];let n;const o=Math.min(8,5+i);for(let i=4;i<r.length;i++){const s=r[i];i<o?e.push(s):(s===d&&(n=s),t.push(s))}return n||(s.current||(s.current=t[0]),n=s.current,t.includes(n)||(n=t[0])),s.current=n,t.length<=2&&(e.push(...t),t.length=0),{itemsInPanel:e,itemsInDropdown:t,dropdownFirstItem:n}}),[r,d,i]);return(0,T.jsx)("div",{className:"tlui-toolbar",children:(0,T.jsxs)("div",{className:"tlui-toolbar__inner",children:[(0,T.jsxs)("div",{className:"tlui-toolbar__left",children:[!o&&(0,T.jsxs)("div",{className:"tlui-toolbar__extras",children:[i<5&&(0,T.jsxs)("div",{className:"tlui-toolbar__extras__controls",children:[(0,T.jsx)(Wg,{}),(0,T.jsx)(Zg,{}),(0,T.jsx)(Tg,{}),(0,T.jsx)(vg,{}),(0,T.jsx)(Sg,{})]}),(0,T.jsx)(Gg,{activeToolId:a})]}),(0,T.jsxs)("div",{className:qe()("tlui-toolbar__tools",{"tlui-toolbar__tools__mobile":i<5}),children:[r.slice(0,2).map((({toolItem:e})=>(0,T.jsx)(Jg,{item:e,title:c(e),isSelected:dr(e,a,l)},e.id))),!o&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{className:"tlui-toolbar__divider"}),r.slice(2,4).map((({toolItem:e})=>(0,T.jsx)(Jg,{item:e,title:c(e),isSelected:dr(e,a,l)},e.id))),(0,T.jsx)("div",{className:"tlui-toolbar__divider"}),u.map((({toolItem:e})=>(0,T.jsx)(Jg,{item:e,title:c(e),isSelected:dr(e,a,l)},e.id))),h.length?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Jg,{item:p.toolItem,title:c(p.toolItem),isSelected:dr(p.toolItem,a,l)},p.toolItem.id),(0,T.jsxs)(Da,{id:"toolbar overflow",modal:!1,children:[(0,T.jsx)(Ea,{children:(0,T.jsx)(Fr,{className:"tlui-toolbar__tools__button tlui-toolbar__overflow",icon:"chevron-up","data-wd":"tools.more"})}),(0,T.jsx)(ka,{side:"top",align:"center",children:(0,T.jsx)(Bg,{toolbarItems:h})})]})]}):null]})]})]}),i<5&&!o&&(0,T.jsx)("div",{className:"tlui-toolbar__tools",children:(0,T.jsx)(Rg,{})})]})})})),Bg=(0,et().u4)((function({toolbarItems:e}){const t=tc();return(0,T.jsx)("div",{className:"tlui-button-grid__four tlui-button-grid__reverse",children:e.map((({toolItem:{id:e,meta:i,kbd:n,label:s,onSelect:o,icon:r}})=>(0,T.jsx)(Pa,{className:"tlui-button-grid__button","data-wd":`tools.${e}`,"data-tool":e,"data-geo":i?.geo??"","aria-label":s,onClick:o,title:s?`${t(s)} ${n?Ur(n):""}`:"",icon:r},e)))})}));function Jg({item:e,title:t,isSelected:i}){return(0,T.jsx)(Fr,{className:"tlui-toolbar__tools__button","data-wd":`tools.${e.id}`,"data-tool":e.id,"data-geo":e.meta?.geo??"","aria-label":e.label,title:t,icon:e.icon,"data-state":i?"selected":void 0,onClick:e.onSelect,onTouchStart:t=>{(0,n().woC)(t),e.onSelect()}},e.id)}const Hg=["align-bottom","align-center-horizontal","align-center-vertical","align-left","align-right","align-top","arrow-left","arrowhead-arrow","arrowhead-bar","arrowhead-diamond","arrowhead-dot","arrowhead-none","arrowhead-square","arrowhead-triangle-inverted","arrowhead-triangle","aspect-ratio","avatar","blob","bring-forward","bring-to-front","check","checkbox-checked","checkbox-empty","chevron-down","chevron-left","chevron-right","chevron-up","chevrons-ne","chevrons-sw","clipboard-copy","code","collab","color","comment","cross-2","cross","dash-dashed","dash-dotted","dash-draw","dash-solid","discord","distribute-horizontal","distribute-vertical","dot","dots-horizontal","dots-vertical","drag-handle-dots","duplicate","edit","external-link","file","fill-none","fill-pattern","fill-semi","fill-solid","font-draw","font-mono","font-sans","font-serif","geo-arrow-down","geo-arrow-left","geo-arrow-right","geo-arrow-up","geo-diamond","geo-ellipse","geo-hexagon","geo-octagon","geo-oval","geo-pentagon","geo-rectangle","geo-rhombus-2","geo-rhombus","geo-star","geo-trapezoid","geo-triangle","geo-x-box","github","group","hidden","image","info-circle","link","lock-small","lock","menu","minus","mixed","pack","page","plus","question-mark-circle","question-mark","redo","reset-zoom","rotate-ccw","rotate-cw","ruler","search","send-backward","send-to-back","settings-horizontal","settings-vertical-1","settings-vertical","share-1","share-2","size-extra-large","size-large","size-medium","size-small","spline-cubic","spline-line","stack-horizontal","stack-vertical","stretch-horizontal","stretch-vertical","text-align-center","text-align-justify","text-align-left","text-align-right","tool-arrow","tool-embed","tool-eraser","tool-frame","tool-hand","tool-highlighter","tool-line","tool-media","tool-note","tool-pencil","tool-pointer","tool-text","trash","triangle-down","triangle-up","twitter","undo","ungroup","unlock-small","unlock","visible","warning-triangle","zoom-in","zoom-out"];const Vg={...n().LcU,icons:Object.fromEntries(Hg.map((e=>[e,`/icons/icon/${e}.svg`]))),translations:Object.fromEntries(Hl.map((e=>[e.locale,`/translations/${e.locale}.json`]))),embedIcons:Object.fromEntries(n().$iO.map((e=>[e.type,`/embed-icons/${e.type}.png`])))};function Ug(e){return(0,k.useMemo)((()=>e),e)}function Xg(e){const t=Ug(null==e?[]:Array.isArray(e)?e:[e]);return(0,k.useMemo)((()=>{const e={};for(const i of t)if(i.translations)for(const[t,n]of(0,s().iA)(i.translations)){let i=e[t];i||(i=e[t]={}),Object.assign(i,n)}return e}),[t])}function Fg(e){const t=function(){const{addToast:e,removeToast:t,clearToasts:i}=Bl(),{addDialog:n,clearDialogs:s,removeDialog:o,updateDialog:r}=lc(),a=Ic()<5,l=tc();return(0,k.useMemo)((()=>({addToast:e,removeToast:t,clearToasts:i,addDialog:n,clearDialogs:s,removeDialog:o,updateDialog:r,msg:l,isMobile:a})),[n,e,s,i,l,o,t,r,a])}(),i=Ug(null==e?[]:Array.isArray(e)?e:[e]);return(0,k.useMemo)((()=>function(e,t){const i={};for(const n of e)if(n.translations)for(const[e,t]of(0,s().iA)(n.translations)){let n=i[e];n||(n=i[e]={}),Object.assign(n,t)}return{actionsMenu:(i,n,s)=>{for(const o of e)o.actionsMenu&&(n=o.actionsMenu(i,n,{...t,...s}));return n},actions:(i,n)=>{for(const s of e)s.actions&&(n=s.actions(i,n,t));return n},contextMenu:(i,n,s)=>{for(const o of e)o.contextMenu&&(n=o.contextMenu(i,n,{...t,...s}));return n},helpMenu:(i,n,s)=>{for(const o of e)o.helpMenu&&(n=o.helpMenu(i,n,{...t,...s}));return n},menu:(i,n,s)=>{for(const o of e)o.menu&&(n=o.menu(i,n,{...t,...s}));return n},toolbar:(i,n,s)=>{for(const o of e)o.toolbar&&(n=o.toolbar(i,n,{...t,...s}));return n},keyboardShortcutsMenu:(i,n,s)=>{for(const o of e)o.keyboardShortcutsMenu&&(n=o.keyboardShortcutsMenu(i,n,{...t,...s}));return n},tools:(i,n,s)=>{for(const o of e)o.tools&&(n=o.tools(i,n,{...t,...s}));return n},translations:i}}(i,t)),[i,t])}function Kg({overrides:e,assetUrls:t,children:i}){return(0,T.jsx)(Kl,{assetUrls:t??Vg,children:(0,T.jsx)(ec,{overrides:Xg(e),children:(0,T.jsx)(_l,{children:(0,T.jsx)(ac,{children:(0,T.jsx)(mc,{children:(0,T.jsx)(Qg,{overrides:e,children:i})})})})})})}function Qg({overrides:e,children:t}){const i=Fg(e);return(0,T.jsx)(uc,{overrides:i.actions,children:(0,T.jsx)(sd,{overrides:i.tools,children:(0,T.jsx)(md,{overrides:i.toolbar,children:(0,T.jsx)(bc,{overrides:i.actionsMenu,children:(0,T.jsx)(cd,{overrides:i.keyboardShortcutsMenu,children:(0,T.jsx)(Sc,{overrides:i.contextMenu,children:(0,T.jsx)(Nc,{overrides:i.helpMenu,children:(0,T.jsx)(hd,{overrides:i.menu,children:t})})})})})})})})}const $g=k.memo((function({shareZone:e,renderDebugMenuItems:t,children:i,...n}){return(0,T.jsx)(Kg,{...n,children:(0,T.jsx)(qg,{shareZone:e,renderDebugMenuItems:t,children:i})})})),qg=k.memo((function({children:e,...t}){return function(){const[e,t]=(0,k.useState)(!1),i=Ql();return(0,k.useEffect)((()=>{let e=!1;return async function(){await Promise.allSettled(Hg.map((e=>{const t=new Image;return t.src=i.icons[e],t.decode()}))),e||t(!0)}(),()=>{e=!0}}),[e,i]),e}()?(0,T.jsxs)(T.Fragment,{children:[e,(0,T.jsx)(em,{...t})]}):(0,T.jsx)(n().xxw,{children:"Loading assets..."})})),em=k.memo((function({shareZone:e,renderDebugMenuItems:t}){const i=(0,n().nme)(),s=tc(),o=Ic(),r=(0,et().h)("isReadOnlyMode",(()=>i.isReadOnly),[]),a=(0,et().h)("isFocusMode",(()=>i.instanceState.isFocusMode),[]),l=(0,et().h)("isDebugMode",(()=>i.instanceState.isDebugMode),[]);!function(){const e=(0,n().nme)(),t=Al(),i=ed(),s=hc(),o=od();(0,k.useEffect)((()=>{if(!t)return;const r=e.getContainer(),a=(t,i)=>{Kc(t,{element:r,scope:e.instanceId},i)},l=()=>e.isMenuOpen||null!==e.editingId||e.crashingError;for(const e of Object.values(s))e.kbd&&(i&&!e.readonlyOk||rd.includes(e.id)||a(ad(e.kbd),(t=>{l()||((0,n().woC)(t),e.onSelect())})));for(const e of Object.values(o))e.kbd&&(rd.includes(e.id)||a(ad(e.kbd),(t=>{l()||((0,n().woC)(t),e.onSelect())})));return a("g",(()=>{l()||e.setSelectedTool("geo")})),a("backspace,del",(()=>{l()||s.delete.onSelect()})),a("=",(()=>{l()||s["zoom-in"].onSelect()})),a("-",(()=>{l()||s["zoom-out"].onSelect()})),Kc.setScope(e.instanceId),()=>{Kc.deleteScope(e.instanceId)}}),[s,o,i,e,t])}(),Rl(),function(){const e=(0,n().nme)(),{addToast:t}=Bl();(0,k.useEffect)((()=>{function i({name:e,count:i}){t({title:"Maximum Shapes Reached",description:`You've reached the maximum number of shapes allowed on ${e} (${i}). Please delete some shapes or move to a different page to continue.`})}function n({name:i,fromId:n}){t({title:"Changed Page",description:`Moved to ${i}.`,actions:[{label:"Go Back",type:"primary",onClick:()=>{e.mark("change-page"),e.setCurrentPageId(n)}}]})}return e.addListener("max-shapes",i),e.addListener("moved-to-page",n),()=>{e.removeListener("max-shapes",i),e.removeListener("moved-to-page",n)}}),[e,t])}();const{"toggle-focus-mode":c}=hc();return(0,T.jsx)(Me,{children:(0,T.jsx)("main",{"data-wd":"desktop-ui",className:qe()("tlui-layout",{"tlui-layout__mobile":o<5}),children:a?(0,T.jsx)("div",{className:"tlui-layout__top",children:(0,T.jsx)(Fr,{className:"tlui-focus-button",title:`${s("focus-mode.toggle-focus-mode")}`,icon:"dot",onClick:c.onSelect})}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:"tlui-layout__top",children:[(0,T.jsx)(zg,{}),(0,T.jsx)("div",{className:"tlui-spacer"}),(0,T.jsx)("div",{className:"tlui-share-zone",draggable:!1,children:e})]}),(0,T.jsxs)("div",{className:"tlui-layout__middle","data-wd":"active-area","data-tldraw-area":"active-drawing",children:[(0,T.jsxs)("div",{className:"tlui-helper-buttons",children:[(0,T.jsx)(Xd,{}),(0,T.jsx)(Hd,{})]}),o>=5&&!r&&(0,T.jsx)("div",{className:"tlui-style-panel__wrapper",children:(0,T.jsx)(Pd,{})})]}),(0,T.jsxs)("div",{className:"tlui-layout__bottom",children:[(0,T.jsxs)("div",{className:"tlui-layout__bottom__main",children:[(0,T.jsx)(Td,{}),(0,T.jsx)(_g,{}),o>=4&&(0,T.jsx)(Ld,{})]}),l&&(0,T.jsx)(wd,{renderDebugMenuItems:t??null})]}),(0,T.jsx)(Yg,{}),(0,T.jsx)(Ud,{}),(0,T.jsx)(Og,{})]})})})}))},358429:(e,t,i)=>{"use strict";var n=i(779039),s=i(444576).RegExp,o=n((function(){var e=s("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),r=o||n((function(){return!s("a","y").sticky})),a=o||n((function(){var e=s("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:a,MISSED_STICKY:r,UNSUPPORTED_Y:o}},360955:(e,t,i)=>{"use strict";i.d(t,{jU:()=>Qe,$i:()=>Zt,xl:()=>it,Ms:()=>O,yI:()=>J,_4:()=>B,ko:()=>le,wO:()=>he,_P:()=>Ie,i5:()=>Ce,Vb:()=>Le,dV:()=>Ee,PJ:()=>g,rD:()=>r,ud:()=>bt,Nj:()=>It,hN:()=>xt,Wq:()=>wt,M_:()=>dt,n6:()=>ct,de:()=>jt,MO:()=>St,up:()=>zt,$:()=>Dt,uK:()=>ze,Sp:()=>Ot,hj:()=>Pt,s4:()=>Jt,NN:()=>Rt,gf:()=>Ut,jr:()=>Ht,Uc:()=>$t,$M:()=>Ft,o2:()=>at,vc:()=>lt,bT:()=>ti,Cj:()=>qt,fq:()=>oi,s3:()=>ii,zq:()=>We,Nr:()=>rt,vW:()=>pt,E4:()=>li,vy:()=>ri,Y0:()=>Nt,w9:()=>hi,hu:()=>ci});var n=()=>i(63666),s=()=>i(696521),o=()=>i(571264);const r=new Set(["color","labelColor","dash","fill","size","opacity","font","align","icon","geo","arrowheadStart","arrowheadEnd","spline"]),a=new Set(["black","grey","light-violet","violet","blue","light-blue","yellow","orange","green","light-green","light-red","red"]),l=new Set(["draw","solid","dashed","dotted"]),c=new Set(["none","semi","solid","pattern"]),d=new Set(["s","m","l","xl"]),u=new Set(["0.1","0.25","0.5","0.75","1"]),h=new Set(["draw","sans","serif","mono"]),p=new Set(["start","middle","end","justify"]),g=new Set(["rectangle","ellipse","triangle","diamond","pentagon","hexagon","octagon","star","rhombus","rhombus-2","oval","trapezoid","arrow-right","arrow-left","arrow-up","arrow-down","x-box"]),m=new Set(["arrow","triangle","square","dot","pipe","diamond","inverted","bar","none"]),I=new Set(["cubic","line"]),f=new Set(["activity","airplay","alert-circle","alert-octagon","alert-triangle","align-center","align-justify","align-left","align-right","anchor","aperture","archive","arrow-down-circle","arrow-down-left","arrow-down-right","arrow-down","arrow-left-circle","arrow-left","arrow-right-circle","arrow-right","arrow-up-circle","arrow-up-left","arrow-up-right","arrow-up","at-sign","award","bar-chart-2","bar-chart","battery-charging","battery","bell-off","bell","bluetooth","bold","book-open","book","bookmark","geo","briefcase","calendar","camera-off","camera","cast","check-circle","check-square","check","chevron-down","chevron-left","chevron-right","chevron-up","chevrons-down","chevrons-left","chevrons-right","chevrons-up","chrome","circle","clipboard","clock","cloud-drizzle","cloud-lightning","cloud-off","cloud-rain","cloud-snow","cloud","codepen","codesandbox","coffee","columns","command","compass","copy","corner-down-left","corner-down-right","corner-left-down","corner-left-up","corner-right-down","corner-right-up","corner-up-left","corner-up-right","cpu","credit-card","crop","crosshair","database","delete","disc","divide-circle","divide-square","divide","dollar-sign","download-cloud","download","dribbble","droplet","edit-2","edit-3","edit","external-link","eye-off","eye","facebook","fast-forward","feather","figma","file-minus","file-plus","file-text","file","film","filter","flag","folder-minus","folder-plus","folder","framer","frown","gift","git-branch","git-commit","git-merge","git-pull-request","github","gitlab","globe","grid","hard-drive","hash","headphones","heart","help-circle","hexagon","home","image","inbox","info","instagram","italic","key","layers","layout","life-buoy","link-2","link","linkedin","list","loader","lock","log-in","log-out","mail","map-pin","map","maximize-2","maximize","meh","menu","message-circle","message-square","mic-off","mic","minimize-2","minimize","minus-circle","minus-square","minus","monitor","moon","more-horizontal","more-vertical","mouse-pointer","move","music","navigation-2","navigation","octagon","package","paperclip","pause-circle","pause","pen-tool","percent","phone-call","phone-forwarded","phone-incoming","phone-missed","phone-off","phone-outgoing","phone","pie-chart","play-circle","play","plus-circle","plus-square","plus","pocket","power","printer","radio","refresh-ccw","refresh-cw","repeat","rewind","rotate-ccw","rotate-cw","rss","save","scissors","search","send","server","settings","share-2","share","shield-off","shield","shopping-bag","shopping-cart","shuffle","sidebar","skip-back","skip-forward","slack","slash","sliders","smartphone","smile","speaker","square","star","stop-circle","sun","sunrise","sunset","table","tablet","tag","target","terminal","thermometer","thumbs-down","thumbs-up","toggle-left","toggle-right","tool","trash-2","trash","trello","trending-down","trending-up","triangle","truck","tv","twitch","twitter","type","umbrella","underline","unlock","upload-cloud","upload","user-check","user-minus","user-plus","user-x","user","users","video-off","video","voicemail","volume-1","volume-2","volume-x","volume","watch","wifi-off","wifi","wind","x-circle","x-octagon","x-square","x","youtube","zap-off","zap","zoom-in","zoom-out"]);function y(e){return o().T.string.refine((t=>{if(!t.startsWith(`${e}:`))throw new Error(`${e} ID must start with "${e}:"`);return t}))}const b=y("user"),w=y("asset"),C=y("page"),M=y("shape"),x=y("instance"),A=o().T.string.refine((e=>{if(!e.startsWith("page:")&&!e.startsWith("shape:"))throw new Error('Parent ID must start with "page:" or "shape:"');return e})),S=o().T.setEnum(a),v=o().T.setEnum(l),L=o().T.setEnum(c),j=o().T.setEnum(g),N=o().T.setEnum(d),D=o().T.setEnum(h),E=o().T.setEnum(p),k=o().T.setEnum(m),Z=o().T.setEnum(u),T=o().T.setEnum(f),W=o().T.setEnum(I),z=o().T.model("camera",o().T.object({typeName:o().T.literal("camera"),id:y("camera"),x:o().T.number,y:o().T.number,z:o().T.number})),P=0,Y=(0,s().ht)({firstVersion:P,currentVersion:P,migrators:{}}),O=(0,s().WE)("camera",{migrations:Y,validator:z}).withDefaultProperties((()=>({x:0,y:0,z:1}))),R=o().T.model("document",o().T.object({typeName:o().T.literal("document"),id:o().T.literal("document:document"),gridSize:o().T.number})),G=0,_=(0,s().ht)({firstVersion:G,currentVersion:G,migrators:{}}),B=(0,s().WE)("document",{migrations:_,validator:R}).withDefaultProperties((()=>({gridSize:10}))),J=B.createCustomId("document"),H=new Set(["accent","white","black","selection-stroke","selection-fill","muted-1"]),V=o().T.setEnum(H),U=new Set(["none","default","pointer","cross","grab","rotate","grabbing","resize-edge","resize-corner","text","move","ew-resize","ns-resize","nesw-resize","nwse-resize","nesw-rotate","nwse-rotate","swne-rotate","senw-rotate"]),X=o().T.setEnum(U),F=o().T.object({color:V,type:X,rotation:o().T.number}),K=new Set(["starting","paused","active","stopping"]),Q=o().T.object({points:o().T.arrayOf(o().T.point),size:o().T.positiveNumber,color:V,opacity:o().T.number,state:o().T.setEnum(K)}),$=new Set(["vertex","virtual","create"]),q=o().T.object({id:o().T.string,type:o().T.setEnum($),canBind:o().T.boolean.optional(),index:o().T.string,x:o().T.number,y:o().T.number}),ee=o().T.model("instance",o().T.object({typeName:o().T.literal("instance"),id:y("instance"),userId:b,currentPageId:C,brush:o().T.boxModel.nullable(),propsForNextShape:o().T.object({color:S,labelColor:S,dash:v,fill:L,size:N,opacity:Z,font:D,align:E,icon:T,geo:j,arrowheadStart:k,arrowheadEnd:k,spline:W}),cursor:F,scribble:Q.nullable(),isFocusMode:o().T.boolean,isDebugMode:o().T.boolean,isToolLocked:o().T.boolean,exportBackground:o().T.boolean,screenBounds:o().T.boxModel})),te=0,ie=1,ne=2,se=3,oe=4,re=5,ae=(0,s().ht)({firstVersion:te,currentVersion:re,migrators:{[ie]:{up:e=>({...e,exportBackground:!0}),down:({exportBackground:e,...t})=>t},[ne]:{up:({dialog:e,...t})=>t,down:e=>({...e,dialog:null})},[se]:{up:e=>({...e,isToolLocked:!1}),down:({isToolLocked:e,...t})=>t},[oe]:{up:({propsForNextShape:e,...t})=>({...t,propsForNextShape:Object.fromEntries(Object.entries(e).filter((([e])=>r.has(e))))}),down:e=>e},[re]:{up:({propsForNextShape:e,...t})=>({...t,propsForNextShape:{...e,labelColor:"black"}}),down:e=>{const{labelColor:t,...i}=e.propsForNextShape;return{...e,propsForNextShape:{...i}}}}}}),le=(0,s().WE)("instance",{migrations:ae,validator:ee}).withDefaultProperties((()=>({propsForNextShape:{opacity:"1",color:"black",labelColor:"black",dash:"draw",fill:"none",size:"m",icon:"file",font:"draw",align:"middle",geo:"rectangle",arrowheadStart:"none",arrowheadEnd:"arrow",spline:"line"},brush:null,scribble:null,cursor:{type:"default",color:"black",rotation:0},isFocusMode:!1,exportBackground:!1,isDebugMode:!1,isToolLocked:!1,screenBounds:{x:0,y:0,w:1080,h:720}}))),ce=o().T.model("instance_page_state",o().T.object({typeName:o().T.literal("instance_page_state"),id:y("instance_page_state"),instanceId:x,pageId:C,cameraId:y("camera"),selectedIds:o().T.arrayOf(M),hintingIds:o().T.arrayOf(M),erasingIds:o().T.arrayOf(M),hoveredId:M.nullable(),editingId:M.nullable(),focusLayerId:M.nullable()})),de=0,ue=(0,s().ht)({currentVersion:de,firstVersion:de,migrators:{}}),he=(0,s().WE)("instance_page_state",{migrations:ue,validator:ce}).withDefaultProperties((()=>({editingId:null,selectedIds:[],hoveredId:null,erasingIds:[],hintingIds:[],focusLayerId:null}))),pe=o().T.model("page",o().T.object({typeName:o().T.literal("page"),id:C,name:o().T.string,index:o().T.string})),ge=0,me=(0,s().ht)({firstVersion:ge,currentVersion:ge,migrators:{}}),Ie=(0,s().WE)("page",{migrations:me,validator:pe}),fe=[{locale:"ar",label:""},{locale:"ca",label:"Catal"},{locale:"da",label:"Danish"},{locale:"de",label:"Deutsch"},{locale:"en",label:"English"},{locale:"es",label:"Espaol"},{locale:"fa",label:""},{locale:"fi",label:"Suomi"},{locale:"fr",label:"Franais"},{locale:"gl",label:"Galego"},{locale:"he",label:""},{locale:"it",label:"Italiano"},{locale:"ja",label:""},{locale:"ko-kr",label:""},{locale:"ku",label:""},{locale:"hi-in",label:""},{locale:"hu",label:"Magyar"},{locale:"my",label:""},{locale:"ne",label:""},{locale:"no",label:"Norwegian"},{locale:"pl",label:"Polski"},{locale:"pt-br",label:"Portugus - Brasil"},{locale:"pt-pt",label:"Portugus - Europeu"},{locale:"ro",label:"Romn"},{locale:"ru",label:"Russian"},{locale:"sv",label:"Svenska"},{locale:"te",label:""},{locale:"th",label:""},{locale:"tr",label:"Trke"},{locale:"uk",label:"Ukrainian"},{locale:"vi",label:"Ting Vit"},{locale:"zh-cn",label:"Chinese - Simplified"},{locale:"zh-tw",label:" ()"}],ye=o().T.model("user",o().T.object({typeName:o().T.literal("user"),id:b,name:o().T.string,locale:o().T.string})),be=0,we=(0,s().ht)({currentVersion:be,firstVersion:be,migrators:{}}),Ce=(0,s().WE)("user",{migrations:we,validator:ye}).withDefaultProperties((()=>{let e;if("undefined"!=typeof window&&window.navigator){const t=fe.map((({locale:e})=>e));e=window.navigator.languages.find((e=>t.indexOf(e)>-1))}return{name:"New User",locale:e??"en"}})),Me=o().T.model("user_document",o().T.object({typeName:o().T.literal("user_document"),id:y("user_document"),userId:b,isReadOnly:o().T.boolean,isPenMode:o().T.boolean,isGridMode:o().T.boolean,isDarkMode:o().T.boolean,isMobileMode:o().T.boolean,isSnapMode:o().T.boolean,lastUpdatedPageId:C.nullable(),lastUsedTabId:x.nullable()})),xe=0,Ae=1,Se=2,ve=(0,s().ht)({firstVersion:xe,currentVersion:Se,migrators:{[Ae]:{up:e=>({...e,isSnapMode:!1}),down:({isSnapMode:e,...t})=>t},[Se]:{up:e=>({...e,isMobileMode:e.isMobileMode??!1}),down:({isMobileMode:e,...t})=>t}}}),Le=(0,s().WE)("user_document",{migrations:ve,validator:Me}).withDefaultProperties((()=>({isReadOnly:!1,isPenMode:!1,isGridMode:!1,isDarkMode:!1,isMobileMode:!1,isSnapMode:!1,lastUpdatedPageId:null,lastUsedTabId:null}))),je=o().T.model("user_presence",o().T.object({typeName:o().T.literal("user_presence"),id:y("user_presence"),userId:b,lastUsedInstanceId:x.nullable(),lastActivityTimestamp:o().T.number,cursor:o().T.point,color:o().T.string})),Ne=0,De=(0,s().ht)({currentVersion:Ne,firstVersion:Ne,migrators:{}}),Ee=(0,s().WE)("user_presence",{migrations:De,validator:je}).withDefaultProperties((()=>({lastUsedInstanceId:null,lastActivityTimestamp:0,cursor:{x:0,y:0},color:"#000000"})));function ke(e,t){return e.index<t.index?-1:e.index>t.index?1:0}const Ze=["#FF802B","#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467"];function Te(e){"asset"===e.typeName&&("src"in e&&(e.src="<redacted>"),"src"in e.props&&(e.props.src="<redacted>"))}const We=({error:e,phase:t,record:i,recordBefore:s})=>{const o="initialize"===t;throw(0,n().TF)(e,{tags:{origin:"store.validateRecord",storePhase:t,isExistingValidationIssue:o},extras:{recordBefore:s?Te((0,n().pN)(s)):void 0,recordAfter:Te((0,n().pN)(i))}}),e};function ze(e){const{userId:t,instanceId:i}=e.props;if(!e.has(J))return e.put([B.create({id:J})]),ze(e);const n=e.allRecords(),s=n.filter(Le.isInstance).find((e=>e.userId===t));if(!s)return e.put([Le.create({userId:t})]),ze(e);const o=n.filter(Ie.isInstance).sort(ke);if(0===o.length)return e.put([Ie.create({name:"Page 1",index:"a1"})]),ze(e);const r=n.filter(le.isInstance).find((e=>e.id===i));if(!r){const n=s.lastUsedTabId?e.get(s.lastUsedTabId)?.propsForNextShape:void 0,r=s?.lastUpdatedPageId??o[0].id;return e.put([le.create({id:i,userId:t,currentPageId:r,propsForNextShape:n,exportBackground:!0})]),ze(e)}let a=r.currentPageId;if(!o.find((e=>e.id===a)))return a=o[0].id,e.put([{...r,currentPageId:a}]),ze(e);if(!n.find((e=>e.id===t)))return e.put([Ce.create({id:t})]),ze(e);const l=n.filter(Ee.isInstance).filter((e=>e.userId===t));if(0===l.length)return e.put([Ee.create({userId:t,color:Ze[Math.floor(Math.random()*Ze.length)]})]),ze(e);l.length>1&&e.remove(l.slice(1).map((e=>e.id)));for(const c of o){const t=n.filter(he.isInstance).filter((e=>e.pageId===c.id&&e.instanceId===i));if(t.length>1)e.remove(t.slice(1).map((e=>e.id)));else if(0===t.length){const t=O.create({});return e.put([t,he.create({pageId:c.id,instanceId:i,cameraId:t.id})]),ze(e)}e.put([{...t[0],erasingIds:[],hoveredId:null,editingId:null}]);if(!e.get(t[0].cameraId))return e.put([O.create({id:t[0].cameraId})]),ze(e)}}function Pe(e,t){return o().T.object({id:w,typeName:o().T.literal("asset"),type:o().T.literal(e),props:t})}const Ye=Pe("bookmark",o().T.object({title:o().T.string,description:o().T.string,image:o().T.string,src:o().T.string.nullable()})),Oe=0,Re=(0,s().ht)({firstVersion:Oe,currentVersion:Oe,migrators:{}}),Ge=Pe("image",o().T.object({w:o().T.number,h:o().T.number,name:o().T.string,isAnimated:o().T.boolean,mimeType:o().T.string.nullable(),src:o().T.string.nullable()})),_e=0,Be=1,Je=2,He=(0,s().ht)({firstVersion:_e,currentVersion:Je,migrators:{[Be]:{up:e=>({...e,props:{...e.props,isAnimated:!1}}),down:e=>{const{isAnimated:t,...i}=e.props;return{...e,props:i}}},[Je]:{up:e=>{const{width:t,height:i,...n}=e.props;return{...e,props:{w:t,h:i,...n}}},down:e=>{const{w:t,h:i,...n}=e.props;return{...e,props:{width:t,height:i,...n}}}}}}),Ve=Pe("video",o().T.object({w:o().T.number,h:o().T.number,name:o().T.string,isAnimated:o().T.boolean,mimeType:o().T.string.nullable(),src:o().T.string.nullable()})),Ue=0,Xe=1,Fe=2,Ke=(0,s().ht)({firstVersion:Ue,currentVersion:Fe,migrators:{[Xe]:{up:e=>({...e,props:{...e.props,isAnimated:!1}}),down:e=>{const{isAnimated:t,...i}=e.props;return{...e,props:i}}},[Fe]:{up:e=>{const{width:t,height:i,...n}=e.props;return{...e,props:{w:t,h:i,...n}}},down:e=>{const{w:t,h:i,...n}=e.props;return{...e,props:{width:t,height:i,...n}}}}}});function Qe(e){const t=Object.values(e);for(let i=0;i<t.length;i++){if(!t[i])continue;const{record:n}=$e(t[i]);n?e[t[i].id]=n:delete e[t[i].id]}return e}function $e(e){const t=[];let i=JSON.parse(JSON.stringify(e));switch(i.typeName){case"user_presence":i.cursor||(t.push("no cursor"),i.cursor={x:0,y:0}),void 0!==i.cursor.x&&null!==i.cursor.x||(t.push("no cursor x"),i.cursor.x=0),void 0!==i.cursor.y&&null!==i.cursor.y||(t.push("no cursor y"),i.cursor.y=0);break;case"asset":switch(i.type){case"image":case"video":i.props||(t.push("no props in asset"),i.props={w:100,h:100,name:"old_asset",isAnimated:!1,mimeType:null,src:null}),i.props.mimeType||(t.push("no mimeType in asset props"),i.props.mimeType="image/png"),i.props.src||(t.push("no src in asset props"),i.props.src=""),null==i.props.isAnimated&&(t.push("no isAnimated in asset props"),i.props.isAnimated=!1),void 0===i.props.name&&(i.props.name="asset"),"width"in i&&(t.push("width in asset"),i.props.w=i.width,delete i.width),"width"in i.props&&"number"==typeof i.props.width&&i.props.width&&(t.push("no w in asset props"),i.props.w=i.props.width,delete i.props.width),"height"in i&&(t.push("height in asset"),i.props.h=i.height,delete i.height),"height"in i.props&&"number"==typeof i.props.height&&i.props.height&&(t.push("no h in asset props"),i.props.h=i.props.height,delete i.props.height),i.props.w||(t.push("no w in asset props"),i.props.w=100),i.props.h||(t.push("no h in asset props"),i.props.h=100),"src"in i&&(t.push("src in asset"),i.props.src=i.src,delete i.src),"name"in i&&(t.push("name in asset"),delete i.name);break;case"bookmark":i.props||(t.push("no asset props"),i.props={title:"",description:"",image:"",src:"url"in i&&"string"==typeof i.url?i.url:""}),i.props.title||(t.push("no title in bookmark asset props"),i.props.title=""),i.props.description||(t.push("no description in bookmark asset props"),i.props.description=""),i.props.image||(t.push("no image in bookmark asset props"),i.props.image=""),"src"in i&&(t.push("leftover src in bookmark asset"),delete i.src),"width"in i&&(t.push("leftover width in bookmark asset"),delete i.width),"height"in i&&(t.push("leftover height in bookmark asset"),delete i.height),"name"in i&&(t.push("leftover name in bookmark asset"),delete i.name),"meta"in i&&delete i.meta}break;case"camera":void 0!==i.x&&null!==i.x||(t.push("no x in camera"),i.x=0),void 0!==i.y&&null!==i.y||(t.push("no y in camera"),i.y=0);break;case"instance":"props"in i&&(t.push("leftover props in instance"),delete i.props),void 0===i.isToolLocked&&(t.push("no isToolLocked in instance"),i.isToolLocked=!1),void 0===i.propsForNextShape&&(t.push("no props in instance"),i.propsForNextShape={opacity:"1",color:"black",dash:"draw",fill:"none",size:"m",icon:"file",font:"draw",align:"middle",geo:"rectangle",arrowheadStart:"none",arrowheadEnd:"arrow",spline:"line"}),"url"in i.propsForNextShape&&(t.push("leftover url in instance.propsForNextShape"),delete i.propsForNextShape.url),"lang"in i.propsForNextShape&&(t.push("leftover lang in instance.propsForNextShape"),delete i.propsForNextShape.lang),void 0===i.exportBackground&&(t.push(`no export background in ${i.typeName}`),i.exportBackground=!1),void 0===i.brush&&(t.push(`no brush in ${i.typeName}`),i.brush=null),void 0===i.scribble&&(t.push(`no scribble in ${i.typeName}`),i.scribble=null),void 0!==i.dialog&&(t.push(`no dialog in ${i.typeName}`),delete i.dialog),void 0===i.screenBounds&&(t.push(`no screen bounds in ${i.typeName}`),i.screenBounds={x:0,y:0,w:1080,h:720});break;case"user":i.name||(t.push("no name in user"),i.name="User"),i.locale||(t.push("no locale in user"),i.locale="en"),"cursor"in i&&(t.push("leftover cursor in user"),delete i.cursor),"color"in i&&(t.push("leftover color in user"),delete i.color),"brush"in i&&(t.push("leftover brush in user"),delete i.brush),"selectedIds"in i&&(t.push("leftover selectedIds in user"),delete i.selectedIds),"scribble"in i&&(t.push("leftover scribble in user"),delete i.scribble),"currentPageId"in i&&(t.push("leftover currentPageId in user"),delete i.currentPageId);break;case"user_document":void 0===i.isMobileMode&&(t.push("no ismobilemode in user document"),i.isMobileMode=!1),void 0===i.isSnapMode&&(t.push("no issnapmode in user document"),i.isSnapMode=!1);break;case"shape":if("url"in i&&delete i.url,void 0!==i.x&&null!==i.x||(t.push(`some bug in ${i.typeName} ${i.type}`),i.x=0),void 0!==i.y&&null!==i.y||(t.push(`some bug in ${i.typeName} ${i.type}`),i.y=0),"image"===i.type&&(void 0===i.props.playing&&(t.push(`some bug in ${i.typeName} ${i.type}`),i.props.playing=!1),"loaded"in i.props&&delete i.props.loaded),"arrow"===i.type&&("binding"===i.props.start.type?(void 0!==i.props.start.normalizedAnchor.x&&null!==i.props.start.normalizedAnchor.x||(t.push(`some bug in ${i.typeName} ${i.type}`),i.props.start.normalizedAnchor.x=0),void 0!==i.props.start.normalizedAnchor.y&&null!==i.props.start.normalizedAnchor.y||(t.push(`some bug in ${i.typeName} ${i.type}`),i.props.start.normalizedAnchor.y=0)):(void 0!==i.props.start.x&&null!==i.props.start.x||(t.push(`some bug in ${i.typeName} ${i.type}`),i.props.start.x=0),void 0!==i.props.start.y&&null!==i.props.start.y||(t.push(`some bug in ${i.typeName} ${i.type}`),i.props.start.y=0),"boundShapeId"in i.props.start&&(t.push("leftover bound shape id in arrow"),delete i.props.start.boundShapeId),"normalizedAnchor"in i.props.start&&(t.push("leftover normalize anchor in arrow"),delete i.props.start.normalizedAnchor),"isExact"in i.props.start&&(t.push("leftover isExact in arrow"),delete i.props.start.isExact)),"binding"===i.props.end.type?(void 0!==i.props.end.normalizedAnchor.x&&null!==i.props.end.normalizedAnchor.x||(t.push(`some bug in ${i.typeName}  ${i.type}`),i.props.end.normalizedAnchor.x=0),void 0!==i.props.end.normalizedAnchor.y&&null!==i.props.end.normalizedAnchor.y||(t.push(`some bug in ${i.typeName} ${i.type}`),i.props.end.normalizedAnchor.y=0)):(void 0!==i.props.end.x&&null!==i.props.end.x||(t.push("no x in arrow end"),i.props.end.x=0),void 0!==i.props.end.y&&null!==i.props.end.y||(t.push("no y in arrow end"),i.props.end.y=0),"boundShapeId"in i.props.end&&(t.push("leftover bound shape id in arrow"),delete i.props.end.boundShapeId),"normalizedAnchor"in i.props.end&&(t.push("leftover normalize anchor in arrow"),delete i.props.end.normalizedAnchor),"isExact"in i.props.end&&(t.push("leftover isExact in arrow"),delete i.props.end.isExact))),"note"!==i.type&&"video"!==i.type&&"image"!==i.type&&"geo"!==i.type&&"bookmark"!==i.type||void 0===i.props.url&&(t.push(`missing url prop in ${i.type} shape`),i.props.url=""),"bookmark"===i.type&&(void 0===i.props.assetId&&(t.push(`some bug in ${i.typeName}  ${i.type}`),i.props.assetId=null),"src"in i&&(t.push("leftover src in bookmark"),delete i.src)),"geo"===i.type&&("width"in i.props&&(t.push("leftover width in geo"),delete i.props.width),"height"in i.props&&(t.push("leftover height in geo"),delete i.props.height)),"draw"===i.type){void 0===i.props.segments&&(t.push(`some bug in ${i.typeName}  ${i.type}`),i.props.segments=[{points:[{x:0,y:0,z:.5},{x:1,y:1,z:.5}],type:"free"}]);for(const e of i.props.segments)for(const n of e.points)void 0!==n.x&&null!==n.y||(t.push(`some bug in ${i.typeName}`),n.x=0),void 0!==n.y&&null!==n.y||(t.push(`some bug in ${i.typeName}`),n.y=0);"points"in i.props&&delete i.props.points}"bookmark"===i.type&&"loaded"in i.props&&(t.push("leftover loaded in bookmark"),delete i.props.loaded),"draw"===i.type&&"points"in i.props&&void 0===i.props.segments&&(i.props.segments=[{type:"free",points:i.props.points}]),"image"===i.type&&(i.props.w<1&&(i.props.w=1,t.push(`zero w image in ${i.typeName}`)),i.props.h<1&&(i.props.h=1,t.push(`zero h image in ${i.typeName}`))),"embed"===i.type&&"loaded"in i.props&&(t.push("leftover loaded in embed"),delete i.props.loaded);break;case void 0:i=null}return{record:i,issues:t}}const qe=o().T.model("asset",o().T.union("type",{image:Ge,video:Ve,bookmark:Ye})),et=0,tt=(0,s().ht)({firstVersion:et,currentVersion:et,migrators:{},subTypeKey:"type",subTypeMigrations:{image:He,video:Ke,bookmark:Re}}),it=(0,s().WE)("asset",{migrations:tt,validator:qe});let nt=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"");const st=0,ot=1,rt=(0,s().ht)({currentVersion:ot,firstVersion:st,migrators:{[ot]:{up:e=>({...e,isLocked:!1}),down:e=>{const{isLocked:t,...i}=e;return{...i}}}}});function at(e){return!!e&&"shape"===e.typeName}function lt(e){return!!e&&e.startsWith("shape:")}function ct(){return`shape:${nt()}`}function dt(e){return`shape:${e}`}const ut=0,ht=1,pt=(0,s().ht)({firstVersion:ut,currentVersion:ht,migrators:{[ht]:{up:e=>Object.fromEntries(Object.entries(e).filter((([e,t])=>"shape"!==t.typeName||"icon"!==t.type&&"code"!==t.type))),down:e=>e}}});function gt(e,t){return o().T.object({id:M,typeName:o().T.literal("shape"),x:o().T.number,y:o().T.number,rotation:o().T.number,index:o().T.string,parentId:A,type:o().T.literal(e),isLocked:o().T.boolean,props:t})}const mt=o().T.union("type",{binding:o().T.object({type:o().T.literal("binding"),boundShapeId:M,normalizedAnchor:o().T.point,isExact:o().T.boolean}),point:o().T.object({type:o().T.literal("point"),x:o().T.number,y:o().T.number})}),It=gt("arrow",o().T.object({labelColor:S,color:S,fill:L,dash:v,size:N,opacity:Z,arrowheadStart:k,arrowheadEnd:k,font:D,start:mt,end:mt,bend:o().T.number,text:o().T.string})),ft=0,yt=1,bt=(0,s().ht)({currentVersion:yt,firstVersion:ft,migrators:{[yt]:{up:e=>({...e,props:{...e.props,labelColor:"black"}}),down:e=>{const{labelColor:t,...i}=e.props;return{...e,props:i}}}}}),wt=gt("bookmark",o().T.object({opacity:Z,w:o().T.nonZeroNumber,h:o().T.nonZeroNumber,assetId:w.nullable(),url:o().T.string})),Ct=0,Mt=1,xt=(0,s().ht)({firstVersion:Ct,currentVersion:Mt,migrators:{[Mt]:{up:e=>void 0===e.props.assetId?{...e,props:{...e.props,assetId:null}}:e,down:e=>{if(null===e.props.assetId){const{assetId:t,...i}=e.props;return{...e,props:i}}return e}}}}),At=new Set(["free","straight"]),St=gt("draw",o().T.object({color:S,fill:L,dash:v,size:N,opacity:Z,segments:o().T.arrayOf(o().T.object({type:o().T.setEnum(At),points:o().T.arrayOf(o().T.point)})),isComplete:o().T.boolean,isClosed:o().T.boolean,isPen:o().T.boolean})),vt=0,Lt=1,jt=(0,s().ht)({firstVersion:vt,currentVersion:Lt,migrators:{[Lt]:{up:e=>{const{points:t}=e.props.segments[0];if(0===t.length)return{...e,props:{...e.props,isPen:!1}};let i=!(0===t[0].z||.5===t[0].z);return t[1]&&(i=i&&!(0===t[1].z||.5===t[1].z)),{...e,props:{...e.props,isPen:i}}},down:e=>{const{isPen:t,...i}=e.props;return{...e,props:{...i}}}}}}),Nt={"allow-downloads-without-user-activation":!1,"allow-downloads":!1,"allow-modals":!1,"allow-orientation-lock":!1,"allow-pointer-lock":!1,"allow-popups":!0,"allow-popups-to-escape-sandbox":!1,"allow-presentation":!1,"allow-storage-access-by-user-activation":!1,"allow-top-navigation":!1,"allow-top-navigation-by-user-activation":!1,"allow-scripts":!0,"allow-same-origin":!0,"allow-forms":!0},Dt=gt("embed",o().T.object({opacity:Z,w:o().T.nonZeroNumber,h:o().T.nonZeroNumber,url:o().T.string,tmpOldUrl:o().T.string.optional(),doesResize:o().T.boolean,overridePermissions:o().T.dict(o().T.setEnum(new Set(Object.keys(Nt))),o().T.boolean.optional()).optional()})),Et=/(^\/r\/[^/]+\/?$)/,kt=e=>{try{return new URL(e)}catch(t){return}},Zt=[{type:"tldraw",title:"tldraw",hostnames:["beta.tldraw.com","lite.tldraw.com","www.tldraw.com"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,toEmbedUrl:e=>{const t=kt(e);if(t&&t.pathname.match(Et))return e},fromEmbedUrl:e=>{const t=kt(e);if(t&&t.pathname.match(Et))return e}},{type:"codesandbox",title:"CodeSandbox",hostnames:["codesandbox.io"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,toEmbedUrl:e=>{const t=kt(e),i=t&&t.pathname.match(/\/s\/([^/]+)\/?/);if(i)return`https://codesandbox.io/embed/${i[1]}`},fromEmbedUrl:e=>{const t=kt(e),i=t&&t.pathname.match(/\/embed\/([^/]+)\/?/);if(i)return`https://codesandbox.io/s/${i[1]}`}},{type:"codepen",title:"Codepen",hostnames:["codepen.io"],minWidth:300,minHeight:300,width:520,height:400,doesResize:!0,toEmbedUrl:e=>{const t=e.match(/https:\/\/codepen.io\/([^/]+)\/pen\/([^/]+)/);if(t){const[e,i,n]=t;return`https://codepen.io/${i}/embed/${n}`}},fromEmbedUrl:e=>{const t=e.match(/https:\/\/codepen.io\/([^/]+)\/embed\/([^/]+)/);if(t){const[e,i,n]=t;return`https://codepen.io/${i}/pen/${n}`}}},{type:"scratch",title:"Scratch",hostnames:["scratch.mit.edu"],width:520,height:400,doesResize:!1,toEmbedUrl:e=>{const t=e.match(/https?:\/\/scratch.mit.edu\/projects\/([^/]+)/);if(t){const[e,i]=t;return`https://scratch.mit.edu/projects/embed/${i}`}},fromEmbedUrl:e=>{const t=e.match(/https:\/\/scratch.mit.edu\/projects\/embed\/([^/]+)/);if(t){const[e,i]=t;return`https://scratch.mit.edu/projects/${i}`}}},{type:"youtube",title:"YouTube",hostnames:["*.youtube.com","youtube.com","youtu.be"],width:800,height:450,doesResize:!0,overridePermissions:{"allow-presentation":!0},isAspectRatioLocked:!0,toEmbedUrl:e=>{const t=kt(e);if(!t)return;const i=t.hostname.replace(/^www./,"");if("youtu.be"===i){return`https://www.youtube.com/embed/${t.pathname.split("/").filter(Boolean)[0]}`}if(("youtube.com"===i||"m.youtube.com"===i)&&t.pathname.match(/^\/watch/)){return`https://www.youtube.com/embed/${t.searchParams.get("v")}`}},fromEmbedUrl:e=>{const t=kt(e);if(!t)return;if("youtube.com"===t.hostname.replace(/^www./,"")){const e=t.pathname.match(/^\/embed\/([^/]+)\/?/);if(e)return`https://www.youtube.com/watch?v=${e[1]}`}}},{type:"figma",title:"Figma",hostnames:["figma.com"],width:720,height:500,doesResize:!0,toEmbedUrl:e=>{if(e.match(/https:\/\/([\w\.-]+\.)?figma.com\/(file|proto)\/([0-9a-zA-Z]{22,128})(?:\/.*)?$/)&&!e.includes("figma.com/embed"))return`https://www.figma.com/embed?embed_host=share&url=${e}`},fromEmbedUrl:e=>{const t=kt(e);if(t&&t.pathname.match(/^\/embed\/?$/)){const e=t.searchParams.get("url");if(e)return e}}},{type:"google_maps",title:"Google Maps",hostnames:["google.*"],width:720,height:500,doesResize:!0,toEmbedUrl:e=>{if(e.includes("/maps/")){const t=e.match(/@(.*),(.*),(.*)z/);let i;if(t){const[,n,s,o]=t;i=`https://${new URL(e).host.replace("www.","")}/maps/embed/v1/view?key=${process.env.NEXT_PUBLIC_GC_API_KEY}&center=${n},${s}&zoom=${o}`}else i="";return i}},fromEmbedUrl:e=>{const t=kt(e);if(!t)return;if(t.pathname.match(/^\/maps\/embed\/v1\/view\/?$/)&&t.searchParams.has("center")&&t.searchParams.get("zoom")){const e=t.searchParams.get("zoom"),[i,n]=t.searchParams.get("center").split(",");return`https://www.google.com/maps/@${i},${n},${e}z`}}},{type:"google_calendar",title:"Google Calendar",hostnames:["calendar.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,instructionLink:"https://support.google.com/calendar/answer/41207?hl=en",toEmbedUrl:e=>{const t=kt(e),i=t?.searchParams.get("cid");if(t?.pathname.match(/\/calendar\/u\/0/)&&i){t.pathname="/calendar/embed";const e=Array.from(t.searchParams.keys());for(const i of e)t.searchParams.delete(i);return t.searchParams.set("src",i),t.href}},fromEmbedUrl:e=>{const t=kt(e),i=t?.searchParams.get("src");if(t?.pathname.match(/\/calendar\/embed/)&&i){t.pathname="/calendar/u/0";const e=Array.from(t.searchParams.keys());for(const i of e)t.searchParams.delete(i);return t.searchParams.set("cid",i),t.href}}},{type:"google_slides",title:"Google Slides",hostnames:["docs.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,toEmbedUrl:e=>{const t=kt(e);if(t?.pathname.match(/^\/presentation/)&&t?.pathname.match(/\/pub\/?$/)){t.pathname=t.pathname.replace(/\/pub$/,"/embed");const e=Array.from(t.searchParams.keys());for(const i of e)t.searchParams.delete(i);return t.href}},fromEmbedUrl:e=>{const t=kt(e);if(t?.pathname.match(/^\/presentation/)&&t?.pathname.match(/\/embed\/?$/)){t.pathname=t.pathname.replace(/\/embed$/,"/pub");const e=Array.from(t.searchParams.keys());for(const i of e)t.searchParams.delete(i);return t.href}}},{type:"github_gist",title:"GitHub Gist",hostnames:["gist.github.com"],width:720,height:500,doesResize:!0,toEmbedUrl:e=>{const t=kt(e);if(t&&t.pathname.match(/\/([^/]+)\/([^/]+)/))return e},fromEmbedUrl:e=>{const t=kt(e);if(t&&t.pathname.match(/\/([^/]+)\/([^/]+)/))return e}},{type:"replit",title:"Replit",hostnames:["replit.com"],width:720,height:500,doesResize:!0,toEmbedUrl:e=>{const t=kt(e);if(t&&t.pathname.match(/\/@([^/]+)\/([^/]+)/))return`${e}?embed=true`},fromEmbedUrl:e=>{const t=kt(e);if(t&&t.pathname.match(/\/@([^/]+)\/([^/]+)/)&&t.searchParams.has("embed"))return t.searchParams.delete("embed"),t.href}},{type:"felt",title:"Felt",hostnames:["felt.com"],width:720,height:500,doesResize:!0,toEmbedUrl:e=>{const t=kt(e);if(t&&t.pathname.match(/^\/map\//))return t.origin+"/embed"+t.pathname},fromEmbedUrl:e=>{const t=kt(e);if(t&&t.pathname.match(/^\/embed\/map\//))return t.pathname=t.pathname.replace(/^\/embed/,""),t.href}},{type:"spotify",title:"Spotify",hostnames:["open.spotify.com"],width:720,height:500,minHeight:500,overrideOutlineRadius:12,doesResize:!0,toEmbedUrl:e=>{const t=kt(e);if(t&&t.pathname.match(/^\/(artist|album)\//))return t.origin+"/embed"+t.pathname},fromEmbedUrl:e=>{const t=kt(e);if(t&&t.pathname.match(/^\/embed\/(artist|album)\//))return t.origin+t.pathname.replace(/^\/embed/,"")}},{type:"vimeo",title:"Vimeo",hostnames:["vimeo.com","player.vimeo.com"],width:640,height:360,doesResize:!0,isAspectRatioLocked:!0,toEmbedUrl:e=>{const t=kt(e);if(t&&"vimeo.com"===t.hostname&&t.pathname.match(/^\/[0-9]+/))return"https://player.vimeo.com/video/"+t.pathname.split("/")[1]+"?title=0&byline=0"},fromEmbedUrl:e=>{const t=kt(e);if(t&&"player.vimeo.com"===t.hostname){const e=t.pathname.match(/^\/video\/([^/]+)\/?$/);if(e)return"https://vimeo.com/"+e[1]}}},{type:"excalidraw",title:"Excalidraw",hostnames:["excalidraw.com"],width:720,height:500,doesResize:!0,isAspectRatioLocked:!0,toEmbedUrl:e=>{const t=kt(e);if(t&&t.hash.match(/#room=/))return e},fromEmbedUrl:e=>{const t=kt(e);if(t&&t.hash.match(/#room=/))return e}},{type:"observable",title:"Observable",hostnames:["observablehq.com"],width:720,height:500,doesResize:!0,isAspectRatioLocked:!1,backgroundColor:"#fff",toEmbedUrl:e=>{const t=kt(e);if(t&&t.pathname.match(/^\/@([^/]+)\/([^/]+)\/?$/))return`${t.origin}/embed${t.pathname}?cell=*`;if(t&&t.pathname.match(/^\/d\/([^/]+)\/?$/)){const e=t.pathname.replace(/^\/d/,"");return`${t.origin}/embed${e}?cell=*`}},fromEmbedUrl:e=>{const t=kt(e);return t&&t.pathname.match(/^\/embed\/@([^/]+)\/([^/]+)\/?$/)?`${t.origin}${t.pathname.replace("/embed","")}#cell-*`:t&&t.pathname.match(/^\/embed\/([^/]+)\/?$/)?`${t.origin}${t.pathname.replace("/embed","/d")}#cell-*`:void 0}}],Tt=0,Wt=1,zt=(0,s().ht)({currentVersion:Wt,firstVersion:Tt,migrators:{[Wt]:{up:e=>{const t=e.props.url,i=new URL(t).host.replace("www.","");let n;for(const o of Zt)if(o.hostnames.includes(i))try{n=o.fromEmbedUrl(t)}catch(s){console.warn(s)}return{...e,props:{...e.props,tmpOldUrl:e.props.url,url:n??""}}},down:e=>{let t=e.props.tmpOldUrl;if(!t||""===t){const i=e.props.url,n=new URL(i).host.replace("www.","");for(const e of Zt)if(e.hostnames.includes(n))try{t=e.toEmbedUrl(i)}catch(s){console.warn(s)}}const{tmpOldUrl:i,...n}=e.props;return{...e,props:{...n,url:t??""}}}}}}),Pt=gt("frame",o().T.object({opacity:Z,w:o().T.nonZeroNumber,h:o().T.nonZeroNumber,name:o().T.string})),Yt=0,Ot=(0,s().ht)({currentVersion:Yt,firstVersion:Yt,migrators:{}}),Rt=gt("geo",o().T.object({geo:j,labelColor:S,color:S,fill:L,dash:v,size:N,opacity:Z,font:D,align:E,url:o().T.string,w:o().T.nonZeroNumber,h:o().T.nonZeroNumber,growY:o().T.positiveNumber,text:o().T.string})),Gt=0,_t=1,Bt=2,Jt=(0,s().ht)({firstVersion:Gt,currentVersion:Bt,migrators:{[_t]:{up:e=>({...e,props:{...e.props,url:""}}),down:e=>{const{url:t,...i}=e.props;return{...e,props:i}}},[Bt]:{up:e=>({...e,props:{...e.props,labelColor:"black"}}),down:e=>{const{labelColor:t,...i}=e.props;return{...e,props:i}}}}}),Ht=gt("group",o().T.object({opacity:Z})),Vt=0,Ut=(0,s().ht)({currentVersion:Vt,firstVersion:Vt,migrators:{}}),Xt=(gt("icon",o().T.object({size:N,icon:T,dash:v,color:S,opacity:Z,scale:o().T.number})),0),Ft=((0,s().ht)({currentVersion:Xt,firstVersion:Xt,migrators:{}}),gt("image",o().T.object({opacity:Z,w:o().T.nonZeroNumber,h:o().T.nonZeroNumber,playing:o().T.boolean,url:o().T.string,assetId:w.nullable()}))),Kt=0,Qt=1,$t=(0,s().ht)({firstVersion:Kt,currentVersion:Qt,migrators:{[Qt]:{up:e=>({...e,props:{...e.props,url:""}}),down:e=>{const{url:t,...i}=e.props;return{...e,props:i}}}}}),qt=gt("line",o().T.object({color:S,dash:v,size:N,opacity:Z,spline:W,handles:o().T.dict(o().T.string,q)})),ei=0,ti=(0,s().ht)({currentVersion:ei,firstVersion:ei,migrators:{}}),ii=gt("note",o().T.object({color:S,size:N,font:D,align:E,opacity:Z,growY:o().T.positiveNumber,url:o().T.string,text:o().T.string})),ni=0,si=1,oi=(0,s().ht)({firstVersion:ni,currentVersion:si,migrators:{[si]:{up:e=>({...e,props:{...e.props,url:""}}),down:e=>{const{url:t,...i}=e.props;return{...e,props:i}}}}}),ri=gt("text",o().T.object({color:S,size:N,font:D,align:E,opacity:Z,w:o().T.nonZeroNumber,text:o().T.string,scale:o().T.nonZeroNumber,autoSize:o().T.boolean})),ai=0,li=(0,s().ht)({firstVersion:ai,currentVersion:ai,migrators:{}}),ci=gt("video",o().T.object({opacity:Z,w:o().T.nonZeroNumber,h:o().T.nonZeroNumber,time:o().T.number,playing:o().T.boolean,url:o().T.string,assetId:w.nullable()})),di=0,ui=1,hi=(0,s().ht)({firstVersion:di,currentVersion:ui,migrators:{[ui]:{up:e=>({...e,props:{...e.props,url:""}}),down:e=>{const{url:t,...i}=e.props;return{...e,props:i}}}}})},371990:(e,t,i)=>{"use strict";i.d(t,{KOK:()=>K,kmY:()=>m,qwe:()=>cr,HlI:()=>Ur,RPb:()=>v,e46:()=>S,$iO:()=>n().$i,vtD:()=>Z,$N6:()=>D,xxw:()=>ca,Y0R:()=>g,N9:()=>N,o4Y:()=>cn,xlB:()=>n().xl,lGR:()=>In,Mss:()=>n().Ms,gGX:()=>Dn,iNw:()=>os,koU:()=>n().ko,wOc:()=>n().wO,_P5:()=>n()._P,Wrk:()=>js,i5Z:()=>n().i5,Vbk:()=>n().Vb,dVE:()=>n().dV,PJm:()=>n().PJ,O75:()=>ra,UFg:()=>Zs,hux:()=>se,nyR:()=>ne,Av2:()=>ie,n6Y:()=>n().n6,aXJ:()=>te,bGJ:()=>O,LcU:()=>ur,eAV:()=>H,g1B:()=>we,AQy:()=>Pe,SBu:()=>Ye,HEt:()=>ze,uud:()=>Oe,Ck7:()=>B,A3N:()=>_,GXs:()=>G,m0Y:()=>re,vc4:()=>n().vc,fty:()=>ar,GbU:()=>ae,aXM:()=>oe,jaC:()=>pi,D1x:()=>Qe,woC:()=>ue,NF7:()=>ce,nme:()=>P,NFA:()=>et,lXS:()=>tt});var n=()=>i(360955),s=i(474848),o=()=>i(696521),r=()=>i(63666),a=i(296540),l=()=>i(875954),c=()=>i(681986),d=()=>i(571264);function u({children:e,className:t="",...i}){return(0,s.jsx)("svg",{...i,className:`rs-svg-container ${t}`,children:e})}function h({type:e,getShapeUtil:t,validator:i,migrations:n={currentVersion:0,firstVersion:0,migrators:{}}}){return{type:e,createShapeUtils:i=>new(t())(i,e),is:t=>t.type===e,validator:i,migrations:n}}const p=2e3,g=40,m=(Symbol("remove"),320),I=[.1,.25,.5,1,2,4,8],f=.1,y={left:{x:-1,y:0},right:{x:1,y:0},up:{x:0,y:-1},down:{x:0,y:1},upLeft:{x:-1,y:-1},upRight:{x:1,y:-1},downLeft:{x:-1,y:1},downRight:{x:1,y:1}},b=32,w={};for(let ua=1;ua<=Math.ceil(8);ua++)w[ua+"_dark"]=`hash_pattern_zoom_${ua}_dark`,w[ua+"_light"]=`hash_pattern_zoom_${ua}_light`;const C={duration:0,easing:l().Z4.easeInOutCubic},M=.09,x=48,A=10,S=300,v=320,L=[{offsetX:0,offsetY:2,blur:4,spread:0,color:"#00000029"},{offsetX:0,offsetY:3,blur:6,spread:0,color:"#0000001f"}],j=[{min:-1,mid:.15,step:100},{min:.05,mid:.375,step:25},{min:.15,mid:1,step:5},{min:.7,mid:2.5,step:1}],N={lineHeight:1.35,fontWeight:"normal",fontVariant:"normal",fontStyle:"normal",padding:"0px",maxWidth:"auto"},D={s:18,m:24,l:36,xl:44},E={s:18,m:22,l:26,xl:32},k={s:18,m:20,l:24,xl:28},Z={draw:"var(--rs-font-draw)",sans:"var(--rs-font-sans)",serif:"var(--rs-font-serif)",mono:"var(--rs-font-mono)"},T={color:[{id:"black",type:"color",icon:"color"},{id:"grey",type:"color",icon:"color"},{id:"light-violet",type:"color",icon:"color"},{id:"violet",type:"color",icon:"color"},{id:"blue",type:"color",icon:"color"},{id:"light-blue",type:"color",icon:"color"},{id:"yellow",type:"color",icon:"color"},{id:"orange",type:"color",icon:"color"},{id:"green",type:"color",icon:"color"},{id:"light-green",type:"color",icon:"color"},{id:"light-red",type:"color",icon:"color"},{id:"red",type:"color",icon:"color"}],fill:[{id:"none",type:"fill",icon:"fill-none"},{id:"semi",type:"fill",icon:"fill-semi"},{id:"solid",type:"fill",icon:"fill-solid"},{id:"pattern",type:"fill",icon:"fill-pattern"}],dash:[{id:"draw",type:"dash",icon:"dash-draw"},{id:"dashed",type:"dash",icon:"dash-dashed"},{id:"dotted",type:"dash",icon:"dash-dotted"},{id:"solid",type:"dash",icon:"dash-solid"}],size:[{id:"s",type:"size",icon:"size-small"},{id:"m",type:"size",icon:"size-medium"},{id:"l",type:"size",icon:"size-large"},{id:"xl",type:"size",icon:"size-extra-large"}],opacity:[{id:"0.1",type:"opacity",icon:"color"},{id:"0.25",type:"opacity",icon:"color"},{id:"0.5",type:"opacity",icon:"color"},{id:"0.75",type:"opacity",icon:"color"},{id:"1",type:"opacity",icon:"color"}],font:[{id:"draw",type:"font",icon:"font-draw"},{id:"sans",type:"font",icon:"font-sans"},{id:"serif",type:"font",icon:"font-serif"},{id:"mono",type:"font",icon:"font-mono"}],align:[{id:"start",type:"align",icon:"text-align-left"},{id:"middle",type:"align",icon:"text-align-center"},{id:"end",type:"align",icon:"text-align-right"},{id:"justify",type:"align",icon:"text-align-justify"}],geo:[{id:"rectangle",type:"geo",icon:"geo-rectangle"},{id:"ellipse",type:"geo",icon:"geo-ellipse"},{id:"triangle",type:"geo",icon:"geo-triangle"},{id:"diamond",type:"geo",icon:"geo-diamond"},{id:"pentagon",type:"geo",icon:"geo-pentagon"},{id:"hexagon",type:"geo",icon:"geo-hexagon"},{id:"octagon",type:"geo",icon:"geo-octagon"},{id:"star",type:"geo",icon:"geo-star"},{id:"rhombus",type:"geo",icon:"geo-rhombus"},{id:"rhombus-2",type:"geo",icon:"geo-rhombus-2"},{id:"oval",type:"geo",icon:"geo-oval"},{id:"trapezoid",type:"geo",icon:"geo-trapezoid"},{id:"arrow-right",type:"geo",icon:"geo-arrow-right"},{id:"arrow-left",type:"geo",icon:"geo-arrow-left"},{id:"arrow-up",type:"geo",icon:"geo-arrow-up"},{id:"arrow-down",type:"geo",icon:"geo-arrow-down"},{id:"x-box",type:"geo",icon:"geo-x-box"}],arrowheadStart:[{id:"none",type:"arrowheadStart",icon:"arrowhead-none"},{id:"arrow",type:"arrowheadStart",icon:"arrowhead-arrow"},{id:"triangle",type:"arrowheadStart",icon:"arrowhead-triangle"},{id:"square",type:"arrowheadStart",icon:"arrowhead-square"},{id:"dot",type:"arrowheadStart",icon:"arrowhead-dot"},{id:"diamond",type:"arrowheadStart",icon:"arrowhead-diamond"},{id:"inverted",type:"arrowheadStart",icon:"arrowhead-triangle-inverted"},{id:"bar",type:"arrowheadStart",icon:"arrowhead-bar"}],arrowheadEnd:[{id:"none",type:"arrowheadEnd",icon:"arrowhead-none"},{id:"arrow",type:"arrowheadEnd",icon:"arrowhead-arrow"},{id:"triangle",type:"arrowheadEnd",icon:"arrowhead-triangle"},{id:"square",type:"arrowheadEnd",icon:"arrowhead-square"},{id:"dot",type:"arrowheadEnd",icon:"arrowhead-dot"},{id:"diamond",type:"arrowheadEnd",icon:"arrowhead-diamond"},{id:"inverted",type:"arrowheadEnd",icon:"arrowhead-triangle-inverted"},{id:"bar",type:"arrowheadEnd",icon:"arrowhead-bar"}],spline:[{id:"line",type:"spline",icon:"spline-line"},{id:"cubic",type:"spline",icon:"spline-cubic"}]};var W=()=>i(850955);const z=a.createContext({}),P=()=>a.useContext(z);class Y{items=new WeakMap;get(e,t){return this.items.has(e)||this.items.set(e,t(e)),this.items.get(e)}access(e){return this.items.get(e)}set(e,t){this.items.set(e,t)}has(e){return this.items.has(e)}invalidate(e){this.items.delete(e)}bust(){this.items=new WeakMap}}const O={preventDefaultLogging:R("tldrawPreventDefaultLogging",!1),pointerCaptureLogging:R("tldrawPointerCaptureLogging",!1),pointerCaptureTracking:R("tldrawPointerCaptureTracking",!1),pointerCaptureTrackingObject:R("tldrawPointerCaptureTrackingObject",new Map,!1),elementRemovalLogging:R("tldrawElementRemovalLogging",!1),debugSvg:R("tldrawDebugSvg",!1),throwToBlob:R("tldrawThrowToBlob",!1),peopleMenu:R("tldrawPeopleMenu",!1)};if("undefined"!=typeof Element){const e=Element.prototype.removeChild;(0,c().wv)("element removal logging",(()=>{O.elementRemovalLogging.value?Element.prototype.removeChild=function(t){return console.warn("[tldraw] removing child:",t),e.call(this,t)}:Element.prototype.removeChild=e}))}function R(e,t,i=!0){if("undefined"==typeof window)return(0,c().eU)(`debug:${e}`,t);const n=i?function(e){try{return JSON.parse(window.sessionStorage.getItem(`debug:${e}`)??"null")}catch(t){return null}}(e):null,s=(0,c().eU)(`debug:${e}`,n??t);return i&&(0,c().wv)(`debug:${e}`,(()=>{const i=s.value;try{i===t?window.sessionStorage.removeItem(`debug:${e}`):window.sessionStorage.setItem(`debug:${e}`,JSON.stringify(i))}catch{}})),Object.defineProperty(window,e,{get:()=>s.value,set(e){s.set(e)},configurable:!0}),s}function G(e){const t=e.cloneNode(!0);e.setAttribute("width",+e.getAttribute("width")+""),e.setAttribute("height",+e.getAttribute("height")+"");return(new XMLSerializer).serializeToString(t).replaceAll("&#10;      ","").replaceAll(/((\s|")[0-9]*\.[0-9]{2})([0-9]*)(\b|"|\))/g,"$1")}async function _(e,t){const{type:i,quality:n,scale:s}=t,o=+e.getAttribute("width"),r=+e.getAttribute("height"),a=await B(e),l=await new Promise((e=>{const t=new Image;t.crossOrigin="anonymous",t.onload=async()=>{await new Promise((e=>setTimeout(e,250)));const i=document.createElement("canvas"),n=i.getContext("2d");i.width=o*s,i.height=r*s,n.imageSmoothingEnabled=!0,n.imageSmoothingQuality="high",n.drawImage(t,0,0,o*s,r*s),URL.revokeObjectURL(a),e(i)},t.onerror=()=>{e(null)},t.src=a}));if(!l)return null;return await new Promise((e=>l.toBlob((t=>{t&&!O.throwToBlob.value||e(null),e(t)}),"image/"+i,n)))}async function B(e){const t=e.cloneNode(!0);t.setAttribute("encoding",'UTF-8"');const i=new FileReader,n=Array.from(t.querySelectorAll("image"));for(const s of n){const e=s.getAttribute("xlink:href");if(e&&!e.startsWith("data:")){const t=await(await fetch(e)).blob(),n=await new Promise(((e,n)=>{i.onload=()=>e(i.result),i.onerror=()=>n(i.error),i.readAsDataURL(t)}));s.setAttribute("xlink:href",n)}}return J(t)}function J(e){const t=(new XMLSerializer).serializeToString(e);return`data:image/svg+xml;base64,${window.btoa(unescape(encodeURIComponent(t)))}`}function H(e,t){const i=document.createElement("a");i.href=e,i.download=t,i.click()}function V(e,t){let i=0;for(;e[t+i];)i+=e[t+i]+1;return i+1}function U(e){const t=new Uint8Array(e);let i,n,s=0,o=0;if(!function(e){return"GIF"===new TextDecoder("ascii").decode(e.slice(0,3))}(e))return!1;for(i=128&t[10],n=7&t[10],s+=6,s+=7,s+=i?3*Math.pow(2,n+1):0;o<2&&s<t.length;)switch(t[s]){case 44:o+=1,i=128&t[s+9],n=7&t[s+9],s+=10,s+=i?3*Math.pow(2,n+1):0,s+=V(t,s+1)+1;break;case 33:s+=2,s+=V(t,s);break;default:s=t.length}return o>1}const X=["image/jpeg","image/png","image/gif","image/svg+xml"],F=["video/mp4","video/quicktime"],K=X.concat(F).join(", "),Q=e=>X.includes(e);async function $(e){return await new Promise(((t,i)=>{const n=document.createElement("video");n.onloadeddata=()=>t({w:n.videoWidth,h:n.videoHeight}),n.onerror=e=>{console.error(e),i(new Error("Could not get video size"))},n.crossOrigin="anonymous",n.src=e}))}async function q(e){return await new Promise(((t,i)=>{const n=new Image;n.onload=()=>t({w:n.width,h:n.height}),n.onerror=e=>{console.error(e),i(new Error("Could not get image size"))},n.crossOrigin="anonymous",n.src=e}))}async function ee(e){return await new Promise(((t,i)=>{const s=new FileReader;s.onerror=()=>i(s.error),s.onload=async()=>{let i=s.result;const o=Q(e.type),a=o?q:$;"video/quicktime"===e.type&&i.includes("video/quicktime")&&(i=i.replace("video/quicktime","video/mp4"));const l=await a(i),c=function(e,t){const i=e.w/t.w,n=e.h/t.h;return i<=1&&n<=1?e:i>n?{w:e.w/i,h:e.h/i}:{w:e.w/n,h:e.h/n}}(l,{w:1e3,h:1e3});c===l||"image/jpeg"!==e.type&&"image/png"!==e.type||(i=await async function(e,t,i){return await new Promise((n=>{const s=new Image;s.onload=()=>{const e=document.createElement("canvas"),o=e.getContext("2d");if(!o)return;e.width=2*t,e.height=2*i,o.drawImage(s,0,0,e.width,e.height);const r=e.toDataURL();n(r)},s.crossOrigin="anonymous",s.src=e}))}(i,c.w,c.h));const d=n().xl.createCustomId((0,r().xp)(i)),u=await async function(e){if("image/gif"===e.type)return await new Promise(((t,i)=>{const n=new FileReader;n.onerror=()=>i(n.error),n.onload=()=>{t({isAnimated:!!n.result&&U(n.result)})},n.readAsArrayBuffer(e)}));return{isAnimated:!Q(e.type)}}(e),h={id:d,type:o?"image":"video",typeName:"asset",props:{name:e.name,src:i,w:c.w,h:c.h,mimeType:e.type,isAnimated:u.isAnimated}};t(h)},s.readAsDataURL(e)}))}async function te(e,t,i,s=!1){const o=new(l().hd)(i.x,i.y),a=new Map,c=await Promise.all(t.map((async(t,i)=>{if(!t.type)throw new Error("No mime type");if(!X.concat(F).includes(t.type))return console.warn(`${t.name} not loaded - Extension not allowed.`),null;try{const s=await e.onCreateAssetFromFile(t);if("bookmark"===s.type)return;if(!s)throw Error("Could not create an asset");a.set(t,s);return{id:(0,n().n6)(),type:s.type,x:o.x+i,y:o.y,props:{w:s.props.w,h:s.props.h,opacity:"1"}}}catch(s){return console.error(s),null}}))),d=(0,r().oE)(c).sort(((e,t)=>e.x-t.x));if(0===d.length)return;for(let n=0;n<d.length;n++){const e=d[n];if(0===n)e.x-=e.props.w/2,e.y-=e.props.h/2;else{const t=d[n-1];e.x=t.x+t.props.w,e.y=t.y}}const u=(await Promise.all(t.map((async(t,i)=>{const n=d[i];if(!n)return;const s=a.get(t);if(!s)return;let o=e.getAssetById(s.id);return o?(a.delete(t),n.props&&(n.props.assetId=o.id),n):(o=e.getAssetBySrc(s.props.src),o?(n.props&&(n.props.assetId=o.id),n):(n.props&&(n.props.assetId=s.id),n))})))).filter(r().hl);e.createAssets((0,r().oE)([...a.values()])),e.createShapes(u),e.setSelectedIds(u.map((e=>e.id)));const{selectedIds:h,viewportPageBounds:p}=e,g=l().Ax.Common((0,r().oE)(h.map((t=>e.getPageBoundsById(t)))));g&&!p.contains(g)&&e.zoomToSelection()}function ie(e,t,i,s){e.createShapes([{id:(0,n().n6)(),type:"embed",x:i.x-(s.width||450)/2,y:i.y-(s.height||450)/2,props:{w:s.width,h:s.height,doesResize:s.doesResize,url:t,opacity:"1"}}],!0)}async function ne(e,t,i){const s=n().xl.createCustomId((0,r().xp)(t)),o=e.getAssetById(s);o?e.createShapes([{id:e.createShapeId(),type:"bookmark",x:i.x-150,y:i.y-160,props:{assetId:o.id,url:o.props.src,opacity:"1"}}]):e.batch((async()=>{const o=(0,n().n6)();e.createShapes([{id:o,type:"bookmark",x:i.x,y:i.y,props:{url:t,opacity:"1"}}],!0);const r=await e.onCreateBookmarkFromUrl(t);r&&(e.createAssets([{id:s,typeName:"asset",type:"bookmark",props:{src:t,description:r.description,image:r.image,title:r.title}}]),e.updateShapes([{id:o,type:"bookmark",props:{assetId:s,opacity:"1"}}]))}))}function se(e,t,i){const s=(new DOMParser).parseFromString(t,"image/svg+xml").querySelector("svg");if(!s)throw new Error("No <svg/> element present");const o=J(s);let a=parseFloat(s.getAttribute("width")||"0"),l=parseFloat(s.getAttribute("height")||"0");if(!a||!l){document.body.appendChild(s);const e=s.getBoundingClientRect();document.body.removeChild(s),a=e.width,l=e.height}const c=n().xl.createCustomId((0,r().xp)(o));e.batch((()=>{e.createAssets([{id:c,typeName:"asset",type:"image",props:{src:o,w:a,h:l,name:"svg",isAnimated:!0,mimeType:"image/svg+xml"}}]),e.createShapes([{id:(0,n().n6)(),type:"image",x:i.x-a/2,y:i.y-l/2,props:{assetId:c,w:a,h:l,opacity:"1"}}],!0)}))}const oe=e=>{try{const t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(t){return!1}},re=e=>{const t=e.split(/[\n\s]/);for(const i of t)try{const e=new URL(i);if("http:"!==e.protocol&&"https:"!==e.protocol)return}catch(n){return}return i(490879)(t)},ae=e=>/^<svg/.test(e);let le=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"");function ce(){return le()}function de(e){if(e instanceof HTMLElement)return e;if(e.parentElement)return de(e.parentElement);throw Error("Could not find a parent element of an HTML type!")}function ue(e){e.preventDefault(),O.preventDefaultLogging.value&&console.warn("preventDefault called on event:",e)}function he(e,t){if(e.setPointerCapture(t.pointerId),O.pointerCaptureTracking.value){const t=O.pointerCaptureTrackingObject.value;t.set(e,(t.get(e)??0)+1)}O.pointerCaptureLogging.value&&console.warn("setPointerCapture called on element:",e,t)}function pe(e,t){if(e.hasPointerCapture(t.pointerId)){if(e.releasePointerCapture(t.pointerId),O.pointerCaptureTracking.value){const t=O.pointerCaptureTrackingObject.value;1===t.get(e)?t.delete(e):t.has(e)?t.set(e,t.get(e)-1):console.warn("Release without capture")}O.pointerCaptureLogging.value&&console.warn("releasePointerCapture called on element:",e,t)}}function ge(e,t){return t.map((t=>{const{offsetX:i,offsetY:n,blur:s,spread:o,color:r}=t,a=new(l().hd)(i,n),{x:c,y:d}=a.rot(-e);return`${c}px ${d}px ${s}px ${o}px ${r}`})).join(", ")}function me(){const[e,t]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{const e=window.matchMedia("(prefers-reduced-motion: reduce)"),i=()=>{t(e.matches)};return i(),e.addEventListener("change",i),()=>e.removeEventListener("change",i)}),[]),e}const Ie=(e,t)=>e.length<=t?e:e.substring(0,t-3)+"...";const fe=e=>e.split("*").map((e=>function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e))).join(".+"),ye=(e,t)=>!!e.find((e=>{const i=new RegExp(fe(e));return t.match(i)}));function be(e){return function(e){const t=new URL(e).host.replace("www.","");for(const i of n().$i)if(ye(i.hostnames,t)){const t=i.toEmbedUrl(e);if(t)return{definition:i,embedUrl:t,url:e}}}(e)??function(e){const t=new URL(e).host.replace("www.","");for(const i of n().$i)if(ye(i.hostnames,t)){const t=i.fromEmbedUrl(e);if(t)return{definition:i,url:t,embedUrl:e}}}(e)}function we(e){try{return be(e)}catch(t){console.error(t)}}function Ce(e,t){let i=null;for(const[s,o]of Object.entries(t))n().rD.has(s)&&(i||(i={...e}),i[s]=o);return i??e}const Me="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",xe="a0",Ae="A00000000000000000000000000";function Se(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-"a".charCodeAt(0)+2;if(e>="A"&&e<="Z")return"Z".charCodeAt(0)-e.charCodeAt(0)+2;throw new Error("Invalid index key head: "+e)}function ve(e){if(e.length!==Se(e.charAt(0)))throw new Error("invalid integer part of index key: "+e)}function Le(e){if(void 0===e)throw Error("n is undefined")}function je(e){ve(e);const[t,...i]=e.split("");let n=!0;for(let s=i.length-1;n&&s>=0;s--){const e=Me.indexOf(i[s])+1;e===Me.length?i[s]="0":(i[s]=Me.charAt(e),n=!1)}if(n){if("Z"===t)return"a0";if("z"===t)return;const e=String.fromCharCode(t.charCodeAt(0)+1);return e>"a"?i.push("0"):i.pop(),e+i.join("")}return t+i.join("")}function Ne(e,t){if(void 0!==t&&e>=t)throw new Error(e+" >= "+t);if("0"===e.slice(-1)||t&&"0"===t.slice(-1))throw new Error("trailing zero");if(t){let i=0;for(;(e.charAt(i)||"0")===t.charAt(i);)i++;if(i>0)return t.slice(0,i)+Ne(e.slice(i),t.slice(i))}const i=e?Me.indexOf(e.charAt(0)):0,n=void 0!==t?Me.indexOf(t.charAt(0)):Me.length;if(n-i>1){const e=Math.round(.5*(i+n));return Me.charAt(e)}return t&&t.length>1?t.slice(0,1):Me.charAt(i)+Ne(e.slice(1),void 0)}function De(e){const t=Se(e.charAt(0));if(t>e.length)throw new Error("invalid index: "+e);return e.slice(0,t)}function Ee(e){if(e===Ae)throw new Error("invalid index: "+e);const t=De(e);if("0"===e.slice(t.length).slice(-1))throw new Error("invalid index: "+e)}function ke(e,t){if(void 0!==e&&Ee(e),void 0!==t&&Ee(t),void 0!==e&&void 0!==t&&e>=t)throw new Error(e+" >= "+t);if(void 0===e&&void 0===t)return xe;if(void 0===e){if(void 0===t)throw Error("b is undefined");const e=De(t),i=t.slice(e.length);if(e===Ae)return e+Ne("",i);if(e<t)return e;const n=function(e){ve(e);const[t,...i]=e.split("");let n=!0;for(let s=i.length-1;n&&s>=0;s--){const e=Me.indexOf(i[s])-1;-1===e?i[s]=Me.slice(-1):(i[s]=Me.charAt(e),n=!1)}if(n){if("a"===t)return"Z"+Me.slice(-1);if("A"===t)return;const e=String.fromCharCode(t.charCodeAt(0)-1);return e<"Z"?i.push(Me.slice(-1)):i.pop(),e+i.join("")}return t+i.join("")}(e);return Le(n),n}if(void 0===t){const t=De(e),i=e.slice(t.length),n=je(t);return void 0===n?t+Ne(i,void 0):n}const i=De(e),n=e.slice(i.length),s=De(t),o=t.slice(s.length);if(i===s)return i+Ne(n,o);const r=je(i);return Le(r),r<t?r:i+Ne(n,void 0)}function Ze(e,t,i){if(0===i)return[];if(1===i)return[ke(e,t)];if(void 0===t){let n=ke(e,t);const s=[n];for(let e=0;e<i-1;e++)n=ke(n,t),s.push(n);return s}if(void 0===e){let n=ke(e,t);const s=[n];for(let t=0;t<i-1;t++)n=ke(e,n),s.push(n);return s.reverse(),s}const n=Math.floor(i/2),s=ke(e,t);return[...Ze(e,s,n),s,...Ze(s,t,i-n-1)]}function Te(e,t,i){return Ze(e,t,i)}function We(e,t){return Ze(e,void 0,t)}function ze(e,t){return Ze(e,t,1)[0]}function Pe(e){return Ze(e,void 0,1)[0]}function Ye(e){return Ze(void 0,e,1)[0]}function Oe(e){return["a1",...Ze("a1",void 0,e)]}function Re(e,t){return e.index<t.index?-1:e.index>t.index?1:0}function Ge(e,t){return e.id<t.id?-1:e.id>t.id?1:0}function _e({app:e}){const{selectionRotation:t,selectionPageCenter:i,inputs:{originPagePoint:n},selectedShapes:s}=e;return{selectionPageCenter:i,initialCursorAngle:i.angle(n),initialSelectionRotation:t,shapeSnapshots:s.map((t=>({shape:(0,r().pN)(t),initialPagePoint:e.getPagePointById(t.id)})))}}function Be({delta:e,app:t,snapshot:i,stage:s}){const{selectionPageCenter:o,shapeSnapshots:r}=i;t.updateShapes(r.map((({shape:i,initialPagePoint:s})=>{const r=(0,n().vc)(i.parentId)?t.getPageTransformById(i.parentId):l().cQ.Identity(),a=l().hd.RotWith(s,o,e),c=l().cQ.applyToPoint(l().cQ.Inverse(r),a),d=(0,l().lC)(i.rotation+e);return{id:i.id,type:i.type,x:c.x,y:c.y,rotation:d}})));const a=[];r.forEach((({shape:e})=>{const i=t.getShapeById(e.id);if(!i)return;const n=t.getShapeUtil(e);if("start"===s||"one-off"===s){const t=n.onRotateStart?.(e);t&&a.push(t)}const o=n.onRotate?.(e,i);if(o&&a.push(o),"end"===s||"one-off"===s){const t=n.onRotateEnd?.(e,i);t&&a.push(t)}})),a.length>0&&t.updateShapes(a)}const Je={openWindow:(e,t)=>window.open(e,t,"noopener noreferrer")};function He(e,t){return e.match(/^\s*$/)?t:e}function Ve(e,t){e.isKilled=!0;const{top:i,left:n}=t.getBoundingClientRect();return{point:{x:e.clientX-n,y:e.clientY-i,z:e.pressure},shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey,pointerId:e.pointerId,button:e.button,isPen:"pen"===e.pointerType}}function Ue(e){return`${(0,l().WM)(e.x)},${(0,l().WM)(e.y)} `}function Xe(e,t){return`${(0,l().WM)((e.x+t.x)/2)},${(0,l().WM)((e.y+t.y)/2)} `}function Fe(e,t=!0){const i=e.length;if(i<2)return"";let n=e[0],s=e[1];if(2===i)return`M${Ue(n)}L${Ue(s)}`;let o="";for(let r=2,a=i-1;r<a;r++)n=e[r],s=e[r+1],o+=Xe(n,s);return t?`M${Xe(e[0],e[1])}Q${Ue(e[1])}${Xe(e[1],e[2])}T${o}${Xe(e[i-1],e[0])}${Xe(e[0],e[1])}Z`:`M${Ue(e[0])}Q${Ue(e[1])}${Xe(e[1],e[2])}${e.length>3?"T":""}${o}L${Ue(e[i-1])}`}function Ke(e,t=!1){const i=e.length;if(i<2)return"";let n=e[0].point,s=e[1].point;if(2===i)return`M${Ue(n)}L${Ue(s)}`;let o="";for(let r=2,a=i-1;r<a;r++)n=e[r].point,s=e[r+1].point,o+=Xe(n,s);return t?`M${Xe(e[0].point,e[1].point)}Q${Ue(e[1].point)}${Xe(e[1].point,e[2].point)}T${o}${Xe(e[i-1].point,e[0].point)}${Xe(e[0].point,e[1].point)}Z`:`M${Ue(e[0].point)}Q${Ue(e[1].point)}${Xe(e[1].point,e[2].point)}${e.length>3?"T":""}${o}L${Ue(e[i-1].point)}`}function Qe(e,t="_blank"){Je.openWindow(e,t)}const $e=(0,a.createContext)(null);function qe({container:e,children:t}){return(0,s.jsx)($e.Provider,{value:e,children:t})}function et(){return(0,r().Z1)((0,a.useContext)($e),"useContainer used outside of <Tldraw />")}function tt(e,t,i=c().Ml){(0,a.useEffect)((()=>{const i=new(c().VM)(e,t);return i.attach(),i.execute(),()=>{i.detach()}}),i)}const it="<path d='m19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill='%23fff'/><path d='m18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill='%23000'/>",nt="<path d='m9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill='%23fff'/><path d='m17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill='%23000'/>",st='<g><path d="M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill="white"/></g>';function ot(e,t,i,n,s){const o=(-i-t)*(l().PI/180),r=Math.sin(o),a=Math.cos(o);return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: ${s};'><defs><filter id='shadow' color-interpolation-filters='sRGB'><feDropShadow dx='${1*a-1*r}' dy='${1*r+1*a}' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(${t+i} 16 16)${n?" scale(-1,-1) translate(0, -32)":""}' filter='url(%23shadow)'>`+e.replaceAll('"',"'")+'</g></svg>") 16 16, pointer'}const rt={none:()=>"none",default:()=>"default",pointer:()=>"pointer",cross:()=>"crosshair",move:()=>"move",grab:(e,t,i)=>ot('<path d="m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill="%23fff"/><g stroke="%23000" stroke-linecap="round" stroke-width=".75"><path d="m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin="round"/><path d="m20.5664 21.7344v-3.459"/><path d="m18.5508 21.7461-.016-3.473"/><path d="m16.5547 18.3047.021 3.426"/></g>',e,0,t,i),grabbing:(e,t,i)=>ot("<path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill='%23fff'/><g stroke='%23000' stroke-width='.75'><path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin='round'/><path d='m20.5664 19.7344v-3.459' stroke-linecap='round'/><path d='m18.5508 19.7461-.016-3.473' stroke-linecap='round'/><path d='m16.5547 16.3047.021 3.426' stroke-linecap='round'/></g>",e,0,t,i),text:(e,t,i)=>ot("<path fill=\"currentcolor\" d='m6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform='translate(14 9)'/>",e,0,t,i),"resize-edge":(e,t,i)=>ot(nt,e,0,t,i),"resize-corner":(e,t,i)=>ot(it,e,0,t,i),"ew-resize":(e,t,i)=>ot(nt,e,0,t,i),"ns-resize":(e,t,i)=>ot(nt,e,90,t,i),"nesw-resize":(e,t,i)=>ot(it,e,0,t,i),"nwse-resize":(e,t,i)=>ot(it,e,90,t,i),rotate:(e,t,i)=>ot(st,e,45,t,i),"nwse-rotate":(e,t,i)=>ot(st,e,0,t,i),"nesw-rotate":(e,t,i)=>ot(st,e,90,t,i),"senw-rotate":(e,t,i)=>ot(st,e,180,t,i),"swne-rotate":(e,t,i)=>ot(st,e,270,t,i)};function at(e,t=0,i="black"){return rt[e]((0,l().nv)(t),!1,i)}const lt=["input","select","button","textarea"];function ct(){const{activeElement:e}=document;return!(!e||!(e.getAttribute("contenteditble")||lt.indexOf(e.tagName.toLowerCase())>-1))}const dt=["textarea","input"];const ut={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function ht(e,t,i){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*i):e*t*i/(t+i*e)}function pt(e,t,i,n=.15){return 0===n?function(e,t,i){return Math.max(t,Math.min(e,i))}(e,t,i):e<t?-ht(t-e,i-t,n)+t:e>i?+ht(e-i,i-t,n)+i:e}function gt(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function mt(e,t,i){return(t=gt(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function It(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ft(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?It(Object(i),!0).forEach((function(t){mt(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):It(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const yt={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function bt(e){return e?e[0].toUpperCase()+e.slice(1):""}const wt=["enter","leave"];function Ct(e,t="",i=!1){const n=yt[e],s=n&&n[t]||t;return"on"+bt(e)+bt(s)+(function(e=!1,t){return e&&!wt.includes(t)}(i,s)?"Capture":"")}const Mt=["gotpointercapture","lostpointercapture"];function xt(e){let t=e.substring(2).toLowerCase();const i=!!~t.indexOf("passive");i&&(t=t.replace("passive",""));const n=Mt.includes(t)?"capturecapture":"capture",s=!!~t.indexOf(n);return s&&(t=t.replace("capture","")),{device:t,capture:s,passive:i}}function At(e){return"touches"in e}function St(e){return At(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function vt(e,t){const i=t.clientX-e.clientX,n=t.clientY-e.clientY,s=(t.clientX+e.clientX)/2,o=(t.clientY+e.clientY)/2,r=Math.hypot(i,n);return{angle:-180*Math.atan2(i,n)/Math.PI,distance:r,origin:[s,o]}}function Lt(e){return function(e){return Array.from(e.touches).filter((t=>{var i,n;return t.target===e.currentTarget||(null===(i=e.currentTarget)||void 0===i||null===(n=i.contains)||void 0===n?void 0:n.call(i,t.target))}))}(e).map((e=>e.identifier))}function jt(e,t){const[i,n]=Array.from(e.touches).filter((e=>t.includes(e.identifier)));return vt(i,n)}function Nt(e){let{deltaX:t,deltaY:i,deltaMode:n}=e;return 1===n?(t*=40,i*=40):2===n&&(t*=800,i*=800),[t,i]}function Dt(e,...t){return"function"==typeof e?e(...t):e}function Et(){}function kt(...e){return 0===e.length?Et:1===e.length?e[0]:function(){let t;for(const i of e)t=i.apply(this,arguments)||t;return t}}function Zt(e,t){return Object.assign({},t,e||{})}class Tt{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:n}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=n,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?Dt(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:n}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,n.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,n.locked=!!document.pointerLockElement,Object.assign(n,function(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:i,altKey:n,metaKey:s,ctrlKey:o}=e;Object.assign(t,{shiftKey:i,altKey:n,metaKey:s,ctrlKey:o})}return t}(e)),n.down=n.pressed=n.buttons%2==1||n.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const e=t._delta.map(Math.abs);ut.addTo(t._distance,e)}this.axisIntent&&this.axisIntent(e);const[o,r]=t._movement,[a,l]=i.threshold,{_step:c,values:d}=t;if(i.hasCustomTransform?(!1===c[0]&&(c[0]=Math.abs(o)>=a&&d[0]),!1===c[1]&&(c[1]=Math.abs(r)>=l&&d[1])):(!1===c[0]&&(c[0]=Math.abs(o)>=a&&Math.sign(o)*a),!1===c[1]&&(c[1]=Math.abs(r)>=l&&Math.sign(r)*l)),t.intentional=!1!==c[0]||!1!==c[1],!t.intentional)return;const u=[0,0];if(i.hasCustomTransform){const[e,t]=d;u[0]=!1!==c[0]?e-c[0]:0,u[1]=!1!==c[1]?t-c[1]:0}else u[0]=!1!==c[0]?o-c[0]:0,u[1]=!1!==c[1]?r-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(u);const h=t.offset,p=t._active&&!t._blocked||t.active;p&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=n[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=Dt(i.bounds,t)),this.setup&&this.setup()),t.movement=u,this.computeOffset()));const[g,m]=t.offset,[[I,f],[y,b]]=t._bounds;t.overflow=[g<I?-1:g>f?1:0,m<y?-1:m>b?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);const w=t._active&&i.rubberband||[0,0];if(t.offset=function(e,[t,i],[n,s]){const[[o,r],[a,l]]=e;return[pt(t,o,r,n),pt(i,a,l,s)]}(t._bounds,t.offset,w),t.delta=ut.sub(t.offset,h),this.computeMovement(),p&&(!t.last||s>32)){t.delta=ut.sub(t.offset,h);const e=t.delta.map(Math.abs);ut.addTo(t.distance,e),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[e[0]/s,e[1]/s])}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const n=this.handler(ft(ft(ft({},t),e),{},{[this.aliasKey]:e.values}));void 0!==n&&(e.memo=n)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class Wt extends Tt{constructor(...e){super(...e),mt(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=ut.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=ut.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const n="object"==typeof i.axisThreshold?i.axisThreshold[St(e)]:i.axisThreshold;t.axis=function([e,t],i){const n=Math.abs(e),s=Math.abs(t);return n>s&&n>i?"x":s>n&&s>i?"y":void 0}(t._movement,n)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}const zt=e=>e,Pt={enabled:(e=!0)=>e,eventOptions:(e,t,i)=>ft(ft({},i.shared.eventOptions),e),preventDefault:(e=!1)=>e,triggerAllEvents:(e=!1)=>e,rubberband(e=0){switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return ut.toVector(e)}},from:e=>"function"==typeof e?e:null!=e?ut.toVector(e):void 0,transform(e,t,i){const n=e||i.shared.transform;return this.hasCustomTransform=!!n,n||zt},threshold:e=>ut.toVector(e,0)};const Yt=ft(ft({},Pt),{},{axis(e,t,{axis:i}){if(this.lockDirection="lock"===i,!this.lockDirection)return i},axisThreshold:(e=0)=>e,bounds(e={}){if("function"==typeof e)return t=>Yt.bounds(e(t));if("current"in e)return()=>e.current;if("function"==typeof HTMLElement&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:i=1/0,top:n=-1/0,bottom:s=1/0}=e;return[[t,i],[n,s]]}});const Ot="undefined"!=typeof window&&window.document&&window.document.createElement;function Rt(){return Ot&&"ontouchstart"in window||Ot&&window.navigator.maxTouchPoints>1}const Gt={isBrowser:Ot,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:Rt(),touchscreen:Rt(),pointer:Ot&&"onpointerdown"in window,pointerLock:Ot&&"exitPointerLock"in window.document},_t={mouse:0,touch:0,pen:8};ft(ft({},Yt),{},{device(e,t,{pointer:{touch:i=!1,lock:n=!1,mouse:s=!1}={}}){return this.pointerLock=n&&Gt.pointerLock,Gt.touch&&i?"touch":this.pointerLock?"mouse":Gt.pointer&&!s?"pointer":Gt.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:i}){if(this.preventScrollDelay="number"==typeof i?i:i||void 0===i&&e?250:void 0,Gt.touchscreen&&!1!==i)return e||(void 0!==i?"y":void 0)},pointerCapture(e,t,{pointer:{capture:i=!0,buttons:n=1,keys:s=!0}={}}){return this.pointerButtons=n,this.keys=s,!this.pointerLock&&"pointer"===this.device&&i},threshold(e,t,{filterTaps:i=!1,tapsThreshold:n=3,axis:s}){const o=ut.toVector(e,i?n:s?1:0);return this.filterTaps=i,this.tapsThreshold=n,o},swipe({velocity:e=.5,distance:t=50,duration:i=250}={}){return{velocity:this.transform(ut.toVector(e)),distance:this.transform(ut.toVector(t)),duration:i}},delay(e=0){switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?ft(ft({},_t),e):_t,keyboardDisplacement:(e=10)=>e});function Bt(e){const[t,i]=e.overflow,[n,s]=e._delta,[o,r]=e._direction;(t<0&&n>0&&o<0||t>0&&n<0&&o>0)&&(e._movement[0]=e._movementBound[0]),(i<0&&s>0&&r<0||i>0&&s<0&&r>0)&&(e._movement[1]=e._movementBound[1])}const Jt=ft(ft({},Pt),{},{device(e,t,{shared:i,pointer:{touch:n=!1}={}}){if(i.target&&!Gt.touch&&Gt.gesture)return"gesture";if(Gt.touch&&n)return"touch";if(Gt.touchscreen){if(Gt.pointer)return"pointer";if(Gt.touch)return"touch"}},bounds(e,t,{scaleBounds:i={},angleBounds:n={}}){const s=e=>{const t=Zt(Dt(i,e),{min:-1/0,max:1/0});return[t.min,t.max]},o=e=>{const t=Zt(Dt(n,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof i&&"function"!=typeof n?[s(),o()]:e=>[s(e),o(e)]},threshold(e,t,i){this.lockDirection="lock"===i.axis;return ut.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey:e=>void 0===e?"ctrlKey":e,pinchOnWheel:(e=!0)=>e});ft(ft({},Yt),{},{mouseOnly:(e=!0)=>e});const Ht=Yt;ft(ft({},Yt),{},{mouseOnly:(e=!0)=>e});const Vt=new Map,Ut=new Map;function Xt(e){Vt.set(e.key,e.engine),Ut.set(e.key,e.resolver)}const Ft={key:"pinch",engine:class extends Tt{constructor(...e){super(...e),mt(this,"ingKey","pinching"),mt(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:i}=this.state;this.state.offset="wheel"===e?ut.add(t,i):[(1+t[0])*i[0],t[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,i]=e._movement;if(!e.axis){const n=30*Math.abs(t)-Math.abs(i);n<0?e.axis="angle":n>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&("scale"===this.state.axis?e[1]=0:"angle"===this.state.axis&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout((()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()}),0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,i=this.ctrl.touchIds;if(t._active&&t._touchIds.every((e=>i.has(e))))return;if(i.size<2)return;this.start(e),t._touchIds=Array.from(i).slice(0,2);const n=jt(e,t._touchIds);this.pinchStart(e,n)}pointerStart(e){if(null!=e.buttons&&e.buttons%2!=1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,i=t._pointerEvents,n=this.ctrl.pointerIds;if(t._active&&Array.from(i.keys()).every((e=>n.has(e))))return;if(i.size<2&&i.set(e.pointerId,e),t._pointerEvents.size<2)return;this.start(e);const s=vt(...Array.from(i.values()));this.pinchStart(e,s)}pinchStart(e,t){this.state.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=jt(e,this.state._touchIds);this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const i=vt(...Array.from(t.values()));this.pinchMove(e,i)}pinchMove(e,t){const i=this.state,n=i._values[1],s=t.angle-n;let o=0;Math.abs(s)>270&&(o+=Math.sign(s)),this.computeValues([t.distance,t.angle-360*o]),i.origin=t.origin,i.turns=o,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some((e=>!this.ctrl.touchIds.has(e)))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch(i){}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const i=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=ut.sub(t._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&!e[t]||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const t=this.state;t._delta=[-Nt(e)[1]/100*t.offset[0],0],ut.addTo(t._movement,t._delta),Bt(t),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}},resolver:Jt},Kt={key:"wheel",engine:class extends Wt{constructor(...e){super(...e),mt(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=Nt(e),ut.addTo(t._movement,t._delta),Bt(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}},resolver:Ht};function Qt(e,t){if(null==e)return{};var i,n,s=function(e,t){if(null==e)return{};var i,n,s={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(s[i]=e[i]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}const $t={target(e){if(e)return()=>"current"in e?e.current:e},enabled:(e=!0)=>e,window:(e=(Gt.isBrowser?window:void 0))=>e,eventOptions:({passive:e=!0,capture:t=!1}={})=>({passive:e,capture:t}),transform:e=>e},qt=["target","eventOptions","window","enabled","transform"];function ei(e={},t){const i={};for(const[n,s]of Object.entries(t))switch(typeof s){case"function":i[n]=s.call(i,e[n],n,e);break;case"object":i[n]=ei(e[n],s);break;case"boolean":s&&(i[n]=e[n])}return i}class ti{constructor(e,t){mt(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,n,s){const o=this._listeners,r=function(e,t=""){const i=yt[e];return e+(i&&i[t]||t)}(t,i),a=ft(ft({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),s);e.addEventListener(r,n,a);const l=()=>{e.removeEventListener(r,n,a),o.delete(l)};return o.add(l),l}clean(){this._listeners.forEach((e=>e())),this._listeners.clear()}}class ii{constructor(){mt(this,"_timeouts",new Map)}add(e,t,i=140,...n){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...n))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach((e=>{window.clearTimeout(e)})),this._timeouts.clear()}}class ni{constructor(e){mt(this,"gestures",new Set),mt(this,"_targetEventStore",new ti(this)),mt(this,"gestureEventStores",{}),mt(this,"gestureTimeoutStores",{}),mt(this,"handlers",{}),mt(this,"config",{}),mt(this,"pointerIds",new Set),mt(this,"touchIds",new Set),mt(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&si(e,"drag");t.wheel&&si(e,"wheel");t.scroll&&si(e,"scroll");t.move&&si(e,"move");t.pinch&&si(e,"pinch");t.hover&&si(e,"hover")}(this,e)}setEventIds(e){return At(e)?(this.touchIds=new Set(Lt(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t,i={}){const n=e,{target:s,eventOptions:o,window:r,enabled:a,transform:l}=n,c=Qt(n,qt);if(i.shared=ei({target:s,eventOptions:o,window:r,enabled:a,transform:l},$t),t){const e=Ut.get(t);i[t]=ei(ft({shared:i.shared},c),e)}else for(const d in c){const e=Ut.get(d);e&&(i[d]=ei(ft({shared:i.shared},c[d]),e))}return i}(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let n;if(!t.target||(n=t.target(),n)){if(t.enabled){for(const t of this.gestures){const s=this.config[t],o=oi(i,s.eventOptions,!!n);if(s.enabled){new(Vt.get(t))(this,e,t).bind(o)}}const s=oi(i,t.eventOptions,!!n);for(const t in this.nativeHandlers)s(t,"",(i=>this.nativeHandlers[t](ft(ft({},this.state.shared),{},{event:i,args:e}))),void 0,!0)}for(const e in i)i[e]=kt(...i[e]);if(!n)return i;for(const e in i){const{device:t,capture:s,passive:o}=xt(e);this._targetEventStore.add(n,t,"",i[e],{capture:s,passive:o})}}}}function si(e,t){e.gestures.add(t),e.gestureEventStores[t]=new ti(e,t),e.gestureTimeoutStores[t]=new ii}const oi=(e,t,i)=>(n,s,o,r={},a=!1)=>{var l,c;const d=null!==(l=r.capture)&&void 0!==l?l:t.capture,u=null!==(c=r.passive)&&void 0!==c?c:t.passive;let h=a?n:Ct(n,s,d);i&&u&&(h+="Passive"),e[h]=e[h]||[],e[h].push(o)},ri=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function ai(e,t,i,n,s,o){if(!e.has(i))return;if(!Vt.has(n))return void 0;const r=i+"Start",a=i+"End";s[n]=e=>{let n;return e.first&&r in t&&t[r](e),i in t&&(n=t[i](e)),e.last&&a in t&&t[a](e),n},o[n]=o[n]||{}}function li(e,t){const[i,n,s]=function(e){const t={},i={},n=new Set;for(let s in e)ri.test(s)?(n.add(RegExp.lastMatch),i[s]=e[s]):t[s]=e[s];return[i,t,n]}(e),o={};return ai(s,i,"onDrag","drag",o,t),ai(s,i,"onWheel","wheel",o,t),ai(s,i,"onScroll","scroll",o,t),ai(s,i,"onPinch","pinch",o,t),ai(s,i,"onMove","move",o,t),ai(s,i,"onHover","hover",o,t),{handlers:o,config:t,nativeHandlers:n}}function ci(e,t={},i,n){const s=a.useMemo((()=>new ni(e)),[]);if(s.applyHandlers(e,n),s.applyConfig(t,i),a.useEffect(s.effect.bind(s)),a.useEffect((()=>s.clean.bind(s)),[]),void 0===t.target)return s.bind.bind(s)}function di(e){return e.forEach(Xt),function(e,t){const{handlers:i,nativeHandlers:n,config:s}=li(e,t||{});return ci(i,s,void 0,n)}}const ui=10,hi=/Mac|iPod|iPhone|iPad/.test("undefined"==typeof window?"node":window.navigator.platform);function pi(e){let{deltaY:t,deltaX:i}=e,n=0;if(e.ctrlKey||e.altKey||e.metaKey){const i=Math.sign(e.deltaY);let s=t;Math.abs(e.deltaY)>ui&&(s=ui*i),n=s/100}else e.shiftKey&&!hi&&(i=t,t=0);return{x:-i,y:-t,z:-n}}const gi=di([Kt,Ft]);let mi;function Ii(e){const t=P(),i=a.useMemo((()=>{const i=new(l().hd);return{onWheel:({event:e})=>{if(!t.isFocused)return;if(i=Date.now(),void 0===mi?(mi=i,0):i-mi>120&&i-mi<160?(mi=i,1):(mi=i,0))return;var i;if(t.editingId){const e=t.getShapeById(t.editingId);if(e){if(t.getShapeUtil(e).canScroll(e)){const e=t.getPageBoundsById(t.editingId);if(e?.containsPoint(t.inputs.currentPagePoint))return}}}ue(e);const n=pi(e);if(0===n.x&&0===n.y)return;const s={type:"wheel",name:"wheel",delta:n,shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey};t.dispatch(s)},onPinchStart:n=>{const s=e.current,{event:o,origin:r}=n;o instanceof WheelEvent||(o.target===s||s?.contains(o.target))&&(i.x=r[0],i.y=r[1],t.dispatch({type:"pinch",name:"pinch_start",point:{x:r[0],y:r[1],z:t.camera.z},delta:{x:0,y:0},shiftKey:o.shiftKey,altKey:o.altKey,ctrlKey:o.metaKey||o.ctrlKey}))},onPinchEnd:i=>{const n=e.current,{event:s,origin:o,offset:r}=i;if(s instanceof WheelEvent)return;if(s.target!==n&&!n?.contains(s.target))return;const a=r[0];requestAnimationFrame((()=>{t.dispatch({type:"pinch",name:"pinch_end",point:{x:o[0],y:o[1],z:a},delta:{x:o[0],y:o[1]},shiftKey:s.shiftKey,altKey:s.altKey,ctrlKey:s.metaKey||s.ctrlKey})}))},onPinch:n=>{const s=e.current,{event:o,origin:r,offset:a}=n,l=a[0];if(o instanceof WheelEvent)return;if(o.target!==s&&!s?.contains(o.target))return;const c=r[0]-i.x,d=r[1]-i.y;i.x=r[0],i.y=r[1],t.dispatch({type:"pinch",name:"pinch",point:{x:r[0],y:r[1],z:l},delta:{x:c,y:d},shiftKey:o.shiftKey,altKey:o.altKey,ctrlKey:o.metaKey||o.ctrlKey})}}}),[t,e]);gi(i,{target:e,eventOptions:{passive:!1},pinch:{from:()=>[t.camera.z,0],scaleBounds:()=>({from:t.camera.z,max:8,min:.05})}})}function fi(e,t,i){const n=e.getShapeById(t);return{shape:n,handle:e.getShapeUtil(n).handles(n).find((e=>e.id===i))}}function yi(e){const t=P();return(0,W().h)("isEditing",(()=>t.editingId===e),[t,e])}const bi=(e,t,i)=>new Promise(((n,s)=>{const o=8*t*e,r=document.createElement("canvas");r.width=o,r.height=o;const a=r.getContext("2d");if(!a)throw new Error("No canvas");a.fillStyle=i?"#212529":"#f8f9fa",a.fillRect(0,0,o,o),a.globalCompositeOperation="destination-out",a.lineCap="round",a.lineWidth=1.25*t*e;const l=8/12,c=i=>i*t*e;a.beginPath(),a.moveTo(c(1*l),c(2)),a.lineTo(c(2),c(1*l)),a.moveTo(c(5*l),c(7*l)),a.lineTo(c(7*l),c(5*l)),a.moveTo(c(6),c(11*l)),a.lineTo(c(11*l),c(6)),a.stroke(),r.toBlob((e=>{!e||O.throwToBlob.value?s():n(e)}))})),wi=(e,t)=>{const i=document.createElement("canvas");return i.width=e[0],i.height=e[1],t(i.getContext("2d")),i.toDataURL()},Ci=function(){const e=P().devicePixelRatio,[t,i]=(0,a.useState)(!1),n=(0,a.useMemo)((()=>(()=>{const e=[];for(let t=1;t<=Math.ceil(8);t++){const i=wi([1,1],(e=>{e.fillStyle="#e8e8e8",e.fillRect(0,0,1,1)})),n=wi([1,1],(e=>{e.fillStyle="#2c3036",e.fillRect(0,0,1,1)}));e.push({zoom:t,url:i,darkMode:!1}),e.push({zoom:t,url:n,darkMode:!0})}return e})()),[]),[o,r]=(0,a.useState)(n);(0,a.useEffect)((()=>{const t=[];for(let i=1;i<=Math.ceil(8);i++)t.push(bi(e,i,!1).then((e=>({zoom:i,url:URL.createObjectURL(e),darkMode:!1})))),t.push(bi(e,i,!0).then((e=>({zoom:i,url:URL.createObjectURL(e),darkMode:!0}))));let n=!1;return Promise.all(t).then((e=>{n||(r(e),i(!0))})),()=>{n=!0,i(!1)}}),[e]);return{context:(0,s.jsx)("defs",{children:o.map((e=>{const t=e.zoom+(e.darkMode?"_dark":"_light");return(0,s.jsx)("pattern",{id:w[t],width:8,height:8,patternUnits:"userSpaceOnUse",children:(0,s.jsx)("image",{href:e.url,width:8,height:8})},t)}))}),isReady:t}},Mi=8/12;function xi(){const e=P(),t=et();(0,a.useLayoutEffect)((()=>{const n=i(425858)((()=>{e.updateViewportScreenBounds()}),200,{trailing:!0}),s=new ResizeObserver((e=>{e[0].contentRect&&n()}));return t&&s.observe(t),n(),()=>{s.disconnect()}}),[e,t])}const Ai=(e,t,i)=>n=>{if(e.pageState.editingId===t&&(n.isKilled=!0),n.isKilled)return;switch(i){case"pointer_down":if(0!==n.button&&2!==n.button)return;he(n.currentTarget,n);break;case"pointer_up":pe(n.currentTarget,n)}const s=e.getShapeById(t);s?e.dispatch({type:"pointer",target:"shape",shape:s,name:i,...Ve(n,e.getContainer())}):console.error("Shape not found",t)};const Si=a.memo((function({d:e,color:t,fill:i}){switch(i){case"none":return(0,s.jsx)("path",{className:"rs-hitarea-stroke",fill:"none",d:e});case"solid":return(0,s.jsx)("path",{className:"rs-hitarea-fill-solid",fill:`var(--palette-${t}-semi)`,d:e});case"semi":return(0,s.jsx)("path",{className:"rs-hitarea-fill-solid",fill:"var(--palette-solid)",d:e});case"pattern":return(0,s.jsx)(vi,{color:t,fill:i,d:e})}})),vi=(0,W().u4)((function({d:e,color:t}){const i=P(),n=Math.ceil(i.zoomLevel),o=i.zoomLevel<=.18,r=i.userDocumentSettings.isDarkMode;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{className:"rs-hitarea-fill-solid",fill:`var(--palette-${t}-pattern)`,d:e}),(0,s.jsx)("path",{fill:o?`var(--palette-${t}-semi)`:`url(#${w[n+(r?"_dark":"_light")]})`,d:e})]})}));function Li({d:e,color:t,fill:i,colors:n}){if("none"===i)return;if("pattern"===i){const i=document.createElementNS("http://www.w3.org/2000/svg","g"),s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("d",e),s.setAttribute("fill",n.background);const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d",e),o.setAttribute("mask","url(#hash_mask)"),o.setAttribute("fill",n.pattern[t]),i.appendChild(s),i.appendChild(o),i}const s=document.createElementNS("http://www.w3.org/2000/svg","path");switch(s.setAttribute("d",e),i){case"semi":s.setAttribute("fill",n.solid);break;case"solid":s.setAttribute("fill",n.semi[t])}return s}function ji(e,t){if(t){const i=document.createElementNS("http://www.w3.org/2000/svg","g");return i.appendChild(t),i.appendChild(e),i}return e}function Ni(e,t,i={}){const{closed:n=!1,snap:s=1,start:o="outset",end:r="outset",lengthRatio:a=2,style:l="dashed"}=i;let c=0,d=0,u=1,h=0,p=0;switch(l){case"dashed":u=1,c=Math.min(t*a,e/4);break;case"dotted":u=100,c=t/u;break;default:return{strokeDasharray:"none",strokeDashoffset:"none"}}return n||("outset"===o?(e+=c/2,p+=c/2):"skip"===o&&(e-=c,p-=c),"outset"===r?e+=c/2:"skip"===r&&(e-=c)),d=Math.floor(e/c/(2*u)),d-=d%s,d<3&&"dashed"===l?e/t<5?(c=e,d=1,h=0):(c=.333*e,h=.333*e):(d=Math.max(d,3),c=e/d/(2*u),n?(p=c/2,h=(e-d*c)/d):h=(e-d*c)/Math.max(1,d-1)),{strokeDasharray:[c,h].join(" "),strokeDashoffset:p.toString()}}const Di=e=>e.stopPropagation();function Ei(e,t){const{padding:i=0}=t,n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("font-size",t.fontSize+"px"),n.setAttribute("font-family",t.fontFamily),n.setAttribute("font-style",t.fontStyle),n.setAttribute("font-weight",t.fontWeight),n.setAttribute("line-height",t.lineHeight*t.fontSize+"px"),n.setAttribute("dominant-baseline","mathematical"),n.setAttribute("alignment-baseline","mathematical");const s=t.lines.map((e=>e.trim())),o=[],r=s.length*(t.lineHeight*t.fontSize),a=(Math.ceil(t.height)-r)/2,l=i;for(let c=0;c<s.length;c++){const e=document.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttribute("alignment-baseline","mathematical"),e.textContent=s[c].replace(/\s(\s+)/g,((e,t)=>{let i=" ";for(let n=0;n<t.length;n++)i+="";return i})),s.length>1&&c<s.length-1&&(e.textContent+="\n"),e.setAttribute("y",a+t.fontSize/2+t.lineHeight*t.fontSize*c+"px"),n.appendChild(e),o.push(e)}switch(t.stroke&&t.strokeWidth&&(n.setAttribute("stroke",t.stroke),n.setAttribute("stroke-width",t.strokeWidth+"px")),t.fill&&n.setAttribute("fill",t.fill),t.textAlign){case"middle":n.setAttribute("text-align","center"),n.setAttribute("text-anchor","start"),o.forEach(((n,o)=>{const r=e.textMeasure.measureText({...N,text:s[o].trim(),fontFamily:t.fontFamily,fontSize:t.fontSize,width:"fit-content",padding:`${i}px`}).w;n.setAttribute("x",l+(t.width-r)/2+"")}));break;case"end":n.setAttribute("text-align","right"),n.setAttribute("text-anchor","start"),o.forEach(((n,o)=>{const r=e.textMeasure.measureText({...N,text:s[o].trim(),fontFamily:t.fontFamily,fontSize:t.fontSize,width:"fit-content",padding:`${i}px`}).w;n.setAttribute("x",l+t.width-r+"")}));break;default:n.setAttribute("text-align","left"),n.setAttribute("text-anchor","start"),o.forEach((e=>e.setAttribute("x",l+"")))}return n}var ki=Object.defineProperty,Zi=Object.getOwnPropertyDescriptor,Ti=(e,t,i,n)=>{for(var s,o=n>1?void 0:n?Zi(t,i):t,r=e.length-1;r>=0;r--)(s=e[r])&&(o=(n?s(t,i,o):s(o))||o);return n&&o&&ki(t,i,o),o};const Wi=new Y,zi=new Y;class Pi{constructor(e,t){this.app=e,this.type=t}is(e){return e.type===this.type}canScroll=()=>!1;canUnmount=()=>!0;canBind=(e,t)=>!0;canEdit=()=>!1;canResize=()=>!0;getEditingBounds=e=>this.bounds(e);isClosed=()=>!0;hideResizeHandles=()=>!1;hideRotateHandle=()=>!1;hideSelectionBoundsBg=()=>!1;hideSelectionBoundsFg=()=>!1;isAspectRatioLocked=()=>!1;get handlesCache(){return this.app.store.createComputedCache("handles:"+this.type,(e=>this.getHandles(e)))}handles(e){return this.getHandles?this.handlesCache.get(e.id)??c().Ml:c().Ml}get boundsCache(){return this.app.store.createComputedCache("bounds:"+this.type,(e=>this.getBounds(e)))}bounds(e){const t=this.boundsCache.get(e.id)??new(l().Ax);return 0===t.width||0===t.height?new(l().Ax)(t.x,t.y,Math.max(t.width,1),Math.max(t.height,1)):t}transform(e){return zi.get(e,(e=>l().cQ.Compose(l().cQ.Translate(e.x,e.y),l().cQ.Rotate(e.rotation))))}point(e){return Wi.get(e,(e=>({x:e.x,y:e.y})))}get outlineCache(){return this.app.store.createComputedCache("outline:"+this.type,(e=>this.getOutline(e)))}outline(e){return this.outlineCache.get(e.id)??c().Ml}snapPoints(e){return this.bounds(e).snapPoints}center(e){return this.getCenter(e)}canReceiveNewChildrenOfType(e){return!1}canDropShapes(e,t){return!1}hitTestPoint(e,t){return this.bounds(e).containsPoint(t)}hitTestLineSegment(e,t,i){const n=this.outline(e);for(let s=0;s<n.length;s++){const e=n[s],o=n[(s+1)%n.length];if((0,l().HV)(t,i,e,o))return!0}return!1}onBeforeCreate;onBeforeUpdate;onDragShapesOver;onDragShapesOut;onDropShapesOver;onResizeStart;onResize;onResizeEnd;onTranslateStart;onTranslate;onTranslateEnd;onRotateStart;onRotateEnd;onRotate;onHandleChange;onBindingChange;onChildrenChange;onDoubleClickHandle;onDoubleClickEdge;onDoubleClick;onClick;onEditEnd}function Yi(e,t,i){const n="end"===t?e.end.arrowhead:e.start.arrowhead;if("none"===n)return;const s=function(e,t,i){const n="end"===t?e.end.point:e.start.point,s="end"===t?e.start.point:e.end.point,o=e.isStraight?l().hd.Dist(s,n):Math.abs(e.bodyArc.length),r=Math.max(Math.min(o/5,3*i),i);let a;if(e.isStraight)a=l().hd.Nudge(n,s,r);else{const i=(0,l().Op)(n,r,e.handleArc.center,e.handleArc.radius);a="end"===t?e.handleArc.sweepFlag?i[0]:i[1]:e.handleArc.sweepFlag?i[1]:i[0]}return{point:n,int:a}}(e,t,i);if(s){switch(n){case"bar":return function({int:e,point:t}){const i=l().hd.Sub(e,t).div(2),n=l().hd.Add(t,l().hd.Rot(i,l().DD)),s=l().hd.Sub(t,l().hd.Rot(i,l().DD));return`M ${n.x} ${n.y} L ${s.x} ${s.y}`}(s);case"square":return function({int:e,point:t}){const i=l().hd.Lrp(t,e,.85),n=l().hd.Sub(i,t).div(2),s=l().hd.Add(t,l().hd.Rot(n,l().DD)),o=l().hd.Sub(t,l().hd.Rot(n,l().DD)),r=l().hd.Add(i,l().hd.Rot(n,l().DD)),a=l().hd.Sub(i,l().hd.Rot(n,l().DD));return`M ${s.x} ${s.y} L ${r.x} ${r.y} L ${a.x} ${a.y} L ${o.x} ${o.y} Z`}(s);case"diamond":return function({point:e,int:t}){const i=l().hd.Lrp(e,t,.75),n=l().hd.RotWith(i,e,l().PI/4),s=l().hd.RotWith(i,e,-l().PI/4),o=l().hd.Lrp(n,s,.5);return o.add(l().hd.Sub(o,e)),`M ${o.x} ${o.y} L ${n.x} ${n.y} ${e.x} ${e.y} L ${s.x} ${s.y} Z`}(s);case"dot":return function({point:e,int:t}){const i=l().hd.Lrp(e,t,.45),n=l().hd.Dist(i,e);return`M ${i.x-n},${i.y}\n  a ${n},${n} 0 1,0 ${2*n},0\n  a ${n},${n} 0 1,0 -${2*n},0 `}(s);case"inverted":return function({point:e,int:t}){const i=l().hd.Sub(t,e).div(2),n=l().hd.Add(e,l().hd.Rot(i,l().DD)),s=l().hd.Sub(e,l().hd.Rot(i,l().DD));return`M ${n.x} ${n.y} L ${t.x} ${t.y} L ${s.x} ${s.y} Z`}(s);case"arrow":return function({point:e,int:t}){const i=l().hd.RotWith(t,e,l().PI/6),n=l().hd.RotWith(t,e,-l().PI/6);return`M ${i.x} ${i.y} L ${e.x} ${e.y} L ${n.x} ${n.y}`}(s);case"triangle":return function({point:e,int:t}){const i=l().hd.RotWith(t,e,l().PI/6),n=l().hd.RotWith(t,e,-l().PI/6);return`M ${i.x} ${i.y} L ${e.x} ${e.y} L ${n.x} ${n.y} Z`}(s)}return""}}function Oi(e,t){if("point"===t.type)return;const i=e.getShapeById(t.boundShapeId);return{shape:i,util:e.getShapeUtil(i),transform:e.getPageTransform(i),isExact:t.isExact,didIntersect:!1}}function Ri(e,t,i){if("point"===i.type)return l().hd.From(i);const n=e.getShapeById(i.boundShapeId);if(n){const{point:s,size:o}=e.getBounds(n),r=l().hd.Add(s,l().hd.MulV(i.normalizedAnchor,o)),a=l().cQ.applyToPoint(e.getPageTransform(n),r);return l().cQ.applyToPoint(l().cQ.Inverse(t),a)}return console.error("Expected a bound shape!"),new(l().hd)(0,0)}function Gi(e,t){const i=e.getPageTransform(t);return{start:Ri(e,i,t.props.start),end:Ri(e,i,t.props.end)}}function _i(e,t){const{start:i,end:n,arrowheadStart:s,arrowheadEnd:o}=t.props,r=Gi(e,t),a=r.start.clone(),c=r.end.clone(),d=l().hd.Med(a,c),u=l().hd.Sub(c,a).uni(),h=Oi(e,i),p=Oi(e,n),g=e.getPageTransform(t);Bi(c,r.start,g,p),Bi(a,r.end,g,h);let m=x;const I=h&&p&&h.shape===p.shape;!h||!p||I||h.isExact||p.isExact||(p.didIntersect&&!h.didIntersect?h.util.isClosed(h.shape)&&a.setTo(l().hd.Nudge(c,a,m)):p.didIntersect||p.util.isClosed(p.shape)&&c.setTo(l().hd.Nudge(a,c,m)));const f=l().hd.Sub(c,a).uni(),y=!l().hd.Equals(f,u);if(!I){if(h&&"none"!==s&&!h.isExact){const i=A+e.getStrokeWidth(t.props.size)/2+("size"in h.shape.props?e.getStrokeWidth(h.shape.props.size)/2:0);m-=i,a.nudge(c,i*(y?-1:1))}if(p&&"none"!==o&&!p.isExact){const i=A+e.getStrokeWidth(t.props.size)/2+("size"in p.shape.props?e.getStrokeWidth(p.shape.props.size)/2:0);m-=i,c.nudge(a,i*(y?-1:1))}}h&&p&&(y?c.setTo(l().hd.Add(a,f.mul(-m))):l().hd.Dist(a,c)<x/2&&c.setTo(l().hd.Add(a,f.mul(x/2)))),y?d.setTo(l().hd.Med(r.start,r.end)):d.setTo(l().hd.Med(a,c));const b=l().hd.Dist(a,c);return{isStraight:!0,start:{handle:r.start,point:a,arrowhead:t.props.arrowheadStart},end:{handle:r.end,point:c,arrowhead:t.props.arrowheadEnd},middle:d,isValid:b>0,length:b}}function Bi(e,t,i,n){if(void 0===n)return;if(n.isExact)return;const s=l().cQ.applyToPoint(i,t),o=l().cQ.applyToPoint(i,e),r=l().cQ.applyToPoint(l().cQ.Inverse(n.transform),s),a=l().cQ.applyToPoint(l().cQ.Inverse(n.transform),o),c=n.util.isClosed(n.shape),d=(c?l().lq:l().NC)(r,a,n.util.outline(n.shape));let u;if(null!==d&&(u=d.sort(((e,t)=>l().hd.Dist(e,r)-l().hd.Dist(t,r)))[0]??(c?void 0:a)),void 0===u)return;const h=l().cQ.applyToPoint(n.transform,u),p=l().cQ.applyToPoint(l().cQ.Inverse(i),h);e.setTo(p),n.didIntersect=!0}function Ji(e){return Vi(e.start.handle,e.end.handle)}function Hi(e){return Vi(e.start.point,e.end.point)}function Vi(e,t){return`M${e.x},${e.y}L${t.x},${t.y}`}function Ui(e){const{start:t,end:i,handleArc:{radius:n,largeArcFlag:s,sweepFlag:o}}=e;return`M${t.handle.x},${t.handle.y} A${n} ${n} 0 ${s} ${o} ${i.handle.x},${i.handle.y}`}function Xi(e){const{start:t,end:i,bodyArc:{radius:n,largeArcFlag:s,sweepFlag:o}}=e;return`M${t.point.x},${t.point.y} A${n} ${n} 0 ${s} ${o} ${i.point.x},${i.point.y}`}function Fi(e,t,i){const n=-2*(e.x*(t.y-i.y)-e.y*(t.x-i.x)+t.x*i.y-i.x*t.y),s={x:((e.x*e.x+e.y*e.y)*(i.y-t.y)+(t.x*t.x+t.y*t.y)*(e.y-i.y)+(i.x*i.x+i.y*i.y)*(t.y-e.y))/n,y:((e.x*e.x+e.y*e.y)*(t.x-i.x)+(t.x*t.x+t.y*t.y)*(i.x-e.x)+(i.x*i.x+i.y*i.y)*(e.x-t.x))/n},o=l().hd.Dist(s,e),r=+l().hd.Clockwise(e,i,t),a=Math.hypot(e.y-t.y,e.x-t.x),c=Math.hypot(t.y-i.y,t.x-i.x),d=Math.hypot(i.y-e.y,i.x-e.x),u=2*Math.acos((c*c+d*d-a*a)/(2*c*d)),h=+(l().PI>u),p=(l().uA-u)*(r?1:-1);return{center:s,radius:o,size:p,length:p*o,largeArcFlag:h,sweepFlag:r}}Ti([c().EW],Pi.prototype,"handlesCache",1),Ti([c().EW],Pi.prototype,"boundsCache",1),Ti([c().EW],Pi.prototype,"outlineCache",1);class Ki{static insertTextFirefox(e,t){e.setRangeText(t,e.selectionStart||0,e.selectionEnd||0,"end"),e.dispatchEvent(new InputEvent("input",{data:t,inputType:"insertText",isComposing:!1}))}static insert(e,t){const i=e.ownerDocument,n=i.activeElement;n!==e&&e.focus(),i.execCommand("insertText",!1,t)||Ki.insertTextFirefox(e,t),n===i.body?e.blur():n instanceof HTMLElement&&n!==e&&n.focus()}static set(e,t){e.select(),Ki.insert(e,t)}static getSelection(e){const{selectionStart:t,selectionEnd:i}=e;return e.value.slice(t||void 0,i||void 0)}static wrapSelection(e,t,i){const{selectionStart:n,selectionEnd:s}=e,o=Ki.getSelection(e);Ki.insert(e,t+o+(i??t)),e.selectionStart=(n||0)+t.length,e.selectionEnd=(s||0)+t.length}static replace(e,t,i){let n=0;e.value.replace(t,((...t)=>{const s=n+t[t.length-2],o=t[0].length;e.selectionStart=s,e.selectionEnd=s+o;const r="string"==typeof i?i:i(...t);return Ki.insert(e,r),e.selectionStart=s,n+=r.length-o,r}))}static findLineEnd(e,t){const i=e.lastIndexOf("\n",t-1)+1;return"\t"!==e.charAt(i)?t:i+1}static indent(e){const{selectionStart:t,selectionEnd:i,value:n}=e,s=n.slice(t,i),o=/\n/g.exec(s)?.length;if(o&&o>0){const s=n.lastIndexOf("\n",t-1)+1,o=e.value.slice(s,i-1),r=o.replace(/^|\n/g,`$&${Ki.INDENT}`),a=r.length-o.length;e.setSelectionRange(s,i-1),Ki.insert(e,r),e.setSelectionRange(t+1,i+a)}else Ki.insert(e,Ki.INDENT)}static unindent(e){const{selectionStart:t,selectionEnd:i,value:n}=e,s=n.lastIndexOf("\n",t-1)+1,o=Ki.findLineEnd(n,i),r=e.value.slice(s,o),a=r.replace(/(^|\n)(\t| {1,2})/g,"$1"),l=r.length-a.length;e.setSelectionRange(s,o),Ki.insert(e,a);const c=/\t| {1,2}/.exec(n.slice(s,t)),d=c?c[0].length:0,u=t-d;e.setSelectionRange(t-d,Math.max(u,i-l))}static indentCE(e){const t=window.getSelection(),i=e.innerText,n=Qi(e)??0,s=Qi(e)??0,o=i.slice(n,s),r=/\n/g.exec(o)?.length;if(r&&r>0){const o=i.lastIndexOf("\n",n-1)+1,r=i.slice(o,s-1),a=r.replace(/^|\n/g,`$&${Ki.INDENT}`).length-r.length;t&&t.setBaseAndExtent(e,n+1,e,s+a)}else{const t=window.getSelection();e.innerText=i.slice(0,n)+Ki.INDENT+i.slice(n),t?.setBaseAndExtent(e,n+1,e,n+2)}}static unindentCE(e){const t=window.getSelection(),i=e.innerText,n=Qi(e)??0,s=Qi(e)??0,o=i.lastIndexOf("\n",n-1)+1,r=Ki.findLineEnd(i,s),a=i.slice(o,r),l=a.replace(/(^|\n)(\t| {1,2})/g,"$1"),c=a.length-l.length;if(t){t.setBaseAndExtent(e,o,e,r);const a=/\t| {1,2}/.exec(i.slice(o,n)),l=a?a[0].length:0,d=n-l;t.setBaseAndExtent(e,n-l,e,Math.max(d,s-c))}}static fixNewLines=/\r?\n|\r/g;static INDENT="  ";static normalizeText(e){return e.replace(Ki.fixNewLines,"\n")}static normalizeTextForDom(e){return e.replace(Ki.fixNewLines,"\n").split("\n").map((e=>e||" ")).join("\n")}}function Qi(e){if(void 0===window.getSelection)return;const t=window.getSelection();if(!t)return;let i=0;if(0!==t.rangeCount){const n=t.getRangeAt(0),s=n.cloneRange();s.selectNodeContents(e),s.setEnd(n.endContainer,n.endOffset),i=s.toString().length}return i}function $i(e,t,i){const n=P(),s=(0,a.useRef)(null),o=(0,W().h)("isEditing",(()=>n.pageState.editingId===e),[n,e]),r=(0,a.useRef)(!1),l=(0,a.useRef)(),c=(0,W().h)("is editable hovering",(()=>{if("text"===t&&n.isIn("text")&&n.hoveredId===e)return!0;if(n.isIn("select.editing_shape")){const{editingShape:i}=n;return!!i&&(n.hoveredId===e&&i.type===t&&n.getShapeUtil(i).canEdit(i))}return!1}),[t,e]),d=(0,a.useCallback)((()=>{c||requestAnimationFrame((()=>{const t=s.current;if(!t)return;const i=n.getShapeById(e);i&&(t.value=i.props.text,t.value.length&&!r.current&&t.select(),r.current=!1)}))}),[n,e,c]),u=(0,a.useCallback)((()=>{const e=l.current;requestAnimationFrame((()=>{const t=s.current;if(n.isIn("select.editing_shape")&&t)if(e)if(e.length){r.current=!0,t.focus();const i=window.getSelection();i&&e.forEach((e=>i.addRange(e)))}else t.focus();else t.focus();else window.getSelection()?.removeAllRanges(),n.complete()}))}),[n]),h=(0,a.useCallback)((e=>{switch((e.ctrlKey||e.metaKey)&&Di(e),e.key){case"Enter":(e.ctrlKey||e.metaKey)&&n.complete();break;case"Tab":ue(e),e.shiftKey?Ki.unindent(e.currentTarget):Ki.indent(e.currentTarget)}}),[n]),p=(0,a.useCallback)((i=>{const s=Ki.normalizeText(i.currentTarget.value);n.updateShapes([{id:e,type:t,props:{text:s}}])}),[n,e,t]),g=0===i.trim().length;return(0,a.useEffect)((()=>{if(s.current){let e=function(){const e=window.getSelection?.();if(e&&"None"!==e.type){const t=[];if(e)for(let i=0;i<e.rangeCount;i++)t.push(e.getRangeAt?.(i));l.current=t}};return document.addEventListener("selectionchange",e),()=>{document.removeEventListener("selectionchange",e)}}})),{rInput:s,isEditing:o,isEditableFromHover:c,handleFocus:d,handleBlur:u,handleKeyDown:h,handleChange:p,isEmpty:g}}const qi=a.memo((function({id:e,text:t,size:i,font:n,position:o,width:r,labelColor:a}){const{rInput:l,isEditing:c,handleFocus:d,handleBlur:u,handleKeyDown:h,handleChange:p,isEmpty:g}=$i(e,"arrow",t);return!c&&g?null:(0,s.jsx)("div",{className:"rs-arrow-label","data-font":n,"data-align":"center","data-hastext":!g,"data-isediting":c,style:{textAlign:"center",fontSize:k[i],lineHeight:k[i]*N.lineHeight+"px",transform:`translate(${o.x}px, ${o.y}px)`,color:a},children:(0,s.jsxs)("div",{className:"rs-arrow-label__inner",children:[(0,s.jsx)("p",{style:{width:r||"9px"},children:t?Ki.normalizeTextForDom(t):" "}),c&&(0,s.jsx)("textarea",{ref:l,className:"rs-text rs-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:t,onFocus:d,onChange:p,onKeyDown:h,onBlur:u,onContextMenu:Di})]})})}));var en=Object.defineProperty,tn=Object.getOwnPropertyDescriptor,nn=(e,t,i,n)=>{for(var s,o=n>1?void 0:n?tn(t,i):t,r=e.length-1;r>=0;r--)(s=e[r])&&(o=(n?s(t,i,o):s(o))||o);return n&&o&&en(t,i,o),o};let sn=0;class on extends Pi{static type="arrow";canEdit=()=>!0;canBind=()=>!1;isClosed=()=>!1;hideResizeHandles=()=>!0;hideRotateHandle=()=>!0;hideSelectionBoundsFg=()=>!0;hideSelectionBoundsBg=()=>!0;defaultProps(){return{opacity:"1",dash:"draw",size:"m",fill:"none",color:"black",labelColor:"black",bend:0,start:{type:"point",x:0,y:0},end:{type:"point",x:0,y:0},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",font:"draw"}}getCenter(e){return this.bounds(e).center}getBounds(e){return l().Ax.FromPoints(this.getOutlineWithoutLabel(e))}getOutlineWithoutLabel(e){const t=this.getArrowInfo(e);if(!t)return[];if(t.isStraight)return t.isValid?[t.start.point,t.end.point]:[new(l().hd)(0,0),new(l().hd)(1,1)];if(!t.isValid)return[new(l().hd)(0,0),new(l().hd)(1,1)];const i=Math.max(5,Math.ceil(Math.abs(t.bodyArc.length)/16));if(i<=0&&!isFinite(i))return[new(l().hd)(0,0),new(l().hd)(1,1)];const n=Array(i),s=l().hd.Angle(t.bodyArc.center,t.start.point),o=l().hd.Angle(t.bodyArc.center,t.end.point),r=t.bodyArc.sweepFlag?o:s,a=t.bodyArc.sweepFlag?s:o,c=t.bodyArc.largeArcFlag?-(0,l().WJ)(r,a):(0,l().qe)(r,a),d=Math.max(1,t.bodyArc.radius);for(let u=0;u<i;u++){const e=r+c*(u/(i-1)),s=(0,l().AQ)(t.bodyArc.center.x,t.bodyArc.center.y,d,e);n[u]=s}return n}getOutline(e){const t=this.getOutlineWithoutLabel(e),i=this.getLabelBounds(e);if(!i)return t;const n=i.sides,s=[0,1,2,3];let o=t[0],a=!1;const c=[o];for(let d=1;d<t.length;d++){const e=t[d];if(!a){const t=(0,r().wq)(s.filter((t=>(0,l().HV)(n[t][0],n[t][1],o,e))),(e=>l().hd.DistanceToLineSegment(n[e][0],n[e][1],o)));if(void 0!==t){const e=l().hd.NearestPointOnLineSegment(n[t][0],n[t][1],o);c.push(e);for(let i=0;i<4;i++){const e=(t+i)%4;c.push(n[e][1])}c.push(e),a=!0}}c.push(e),o=e}return c}snapPoints(e){return c().Ml}get infoCache(){return this.app.store.createComputedCache("arrow infoCache",(e=>function(e){return Math.abs(e.props.bend)<8}(e)?_i(this.app,e):function(e,t,i=0){const{arrowheadEnd:n,arrowheadStart:s}=t.props,o=t.props.bend+i;if(Math.abs(o)>Math.abs(10*t.props.bend))return _i(e,t);const r=Gi(e,t),a=l().hd.Med(r.start,r.end),c=l().hd.Sub(r.end,r.start).uni(),d=l().hd.Add(a,c.per().mul(-o)),u=Oi(e,t.props.start),h=Oi(e,t.props.end),p=r.start.clone(),g=r.end.clone(),m=d.clone(),I=Fi(p,g,m),f=e.getPageTransform(t);if(u&&!u.isExact){const i=l().cQ.applyToPoint(f,p),n=l().cQ.applyToPoint(f,g),o=l().cQ.applyToPoint(f,I.center),a=l().cQ.Inverse(u.transform),c=l().cQ.applyToPoint(a,i),h=l().cQ.applyToPoint(a,n),m=l().cQ.applyToPoint(a,o),y=u.util.isClosed(u.shape);let b,w=(y?l().SU:l().y5)(m,I.radius,u.util.outline(u.shape));if(w){w=w.filter((e=>+l().hd.Clockwise(c,e,h)===I.sweepFlag));const e=l().hd.Angle(I.center,d),t=l().hd.Angle(I.center,r.start),i=(0,l().gJ)(e,t,.5);w.sort(((e,t)=>Math.abs((0,l().qe)(i,m.angle(e)))-Math.abs((0,l().qe)(i,m.angle(t))))),b=w[0]??(y?void 0:c)}else b=y?void 0:c;if(b&&(p.setTo(e.getPointInShapeSpace(t,l().cQ.applyToPoint(u.transform,b))),u.didIntersect=!0,"none"!==s)){const i=A+e.getStrokeWidth(t.props.size)/2+("size"in u.shape.props?e.getStrokeWidth(u.shape.props.size)/2:0);p.setTo((0,l().AQ)(I.center.x,I.center.y,I.radius,(0,l().gJ)(l().hd.Angle(I.center,p),l().hd.Angle(I.center,d),i/Math.abs((0,l().B0)(I.center,I.radius,p,d)))))}}if(h&&!h.isExact){const i=l().cQ.applyToPoint(f,p),s=l().cQ.applyToPoint(f,g),o=l().cQ.applyToPoint(f,I.center),a=l().cQ.Inverse(h.transform),c=l().cQ.applyToPoint(a,i),u=l().cQ.applyToPoint(a,s),m=l().cQ.applyToPoint(a,o),y=h.util.isClosed(h.shape),b=y?l().SU:l().y5,w=l().hd.Angle(I.center,d),C=l().hd.Angle(I.center,r.end),M=(0,l().gJ)(w,C,.5);let S,v=b(m,I.radius,h.util.outline(h.shape));if(v?(v=v.filter((e=>+l().hd.Clockwise(c,e,u)===I.sweepFlag)),v.sort(((e,t)=>Math.abs((0,l().qe)(M,m.angle(e)))-Math.abs((0,l().qe)(M,m.angle(t))))),S=v[0]??(y?void 0:u)):S=y?void 0:u,S&&(g.setTo(e.getPointInShapeSpace(t,l().cQ.applyToPoint(h.transform,S))),h.didIntersect=!0,"none"!==n)){let i=A+e.getStrokeWidth(t.props.size)/2+("size"in h.shape.props?e.getStrokeWidth(h.shape.props.size)/2:0);l().hd.Dist(p,g)<x&&(i*=-2),g.setTo((0,l().AQ)(I.center.x,I.center.y,I.radius,(0,l().gJ)(l().hd.Angle(I.center,g),l().hd.Angle(I.center,d),i/Math.abs((0,l().B0)(I.center,I.radius,g,d)))))}}if(Math.abs((0,l().B0)(I.center,I.radius,p,g))<x/2&&(p.setTo(r.start),g.setTo(r.end)),u&&h&&u.shape!==h.shape&&!u.isExact&&!h.isExact){const e=l().hd.Angle(I.center,p),t=l().hd.Angle(I.center,g),i=I.sweepFlag?x:-x,n=(0,l().B0)(I.center,I.radius,g,p),{center:{x:s,y:o},radius:r}=I;u&&!u.didIntersect&&p.setTo((0,l().AQ)(s,o,r,(0,l().gJ)(e,t,i/n))),h&&!h.didIntersect&&g.setTo((0,l().AQ)(s,o,r,(0,l().gJ)(e,t,-i/n)))}let y=(0,l().gJ)(l().hd.Angle(I.center,p),l().hd.Angle(I.center,g),.5),b=(0,l().AQ)(I.center.x,I.center.y,I.radius,y);+l().hd.Clockwise(p,b,g)!==I.sweepFlag&&(y+=l().PI,b=(0,l().AQ)(I.center.x,I.center.y,I.radius,y)),m.setTo(b);const w=Fi(p,g,m);return{isStraight:!1,start:{point:p,handle:r.start,arrowhead:t.props.arrowheadStart},end:{point:g,handle:r.end,arrowhead:t.props.arrowheadEnd},middle:m,handleArc:I,bodyArc:w,isValid:0!==w.length&&isFinite(w.center.x)&&isFinite(w.center.y)}}(this.app,e)))}getArrowInfo(e){return this.infoCache.get(e.id)}getHandles(e){const t=this.infoCache.get(e.id);return[{id:"start",type:"vertex",index:"a0",x:t.start.handle.x,y:t.start.handle.y,canBind:!0},{id:"middle",type:"vertex",index:"a2",x:t.middle.x,y:t.middle.y,canBind:!1},{id:"end",type:"vertex",index:"a3",x:t.end.handle.x,y:t.end.handle.y,canBind:!0}]}onHandleChange=(e,{handle:t,isPrecise:i})=>{const n=(0,r().A4)(e);switch(t.id){case"start":case"end":{const s=this.app.getPageTransformById(n.id),o=l().cQ.applyToPoint(s,t),a=this.app.inputs.ctrlKey?void 0:(0,r().HV)(this.app.getShapesAtPoint(o).filter((t=>{if(t.id===e.id)return;const i=this.app.getShapeUtil(t);return i.canBind(n)&&i.hitTestPoint(t,this.app.getPointInShapeSpace(t,o))})));if(a){const e=this.app.getBounds(a),s=this.app.getPointInShapeSpace(a,o),r=n.props[t.id],c="binding"===n.props.start.type&&n.props.start.boundShapeId,d="binding"===n.props.end.type&&n.props.end.boundShapeId;let u=i||(c||d)&&c===d||!this.app.getShapeUtil(a).isClosed(n);("point"===r.type||"binding"===r.type&&a.id!==r.boundShapeId)&&(u=this.app.inputs.pointerVelocity.len()<.5),u&&(u=l().hd.Dist(s,e.center)>Math.max(4,Math.min(.15*Math.min(e.width,e.height),16))/this.app.zoomLevel),n.props[t.id]={type:"binding",boundShapeId:a.id,normalizedAnchor:u?{x:(s.x-e.minX)/e.width,y:(s.y-e.minY)/e.height}:{x:.5,y:.5},isExact:this.app.inputs.altKey}}else n.props[t.id]={type:"point",x:t.x,y:t.y};break}case"middle":{const{start:e,end:i}=Gi(this.app,n),s=l().hd.Sub(i,e),o=l().hd.Per(s),r=l().hd.Med(i,e),a=l().hd.Sub(r,o),c=l().hd.Add(r,o),d=l().hd.NearestPointOnLineSegment(a,c,t,!1);let u=l().hd.Dist(d,r);l().hd.Clockwise(d,i,r)&&(u*=-1),n.props.bend=u;break}}return n};onTranslateStart=e=>{let t="binding"===e.props.start.type?e.props.start.boundShapeId:null,i="binding"===e.props.end.type?e.props.end.boundShapeId:null;if(t&&this.app.isWithinSelection(t)||i&&this.app.isWithinSelection(i))return;t=null,i=null;const{start:n,end:s}=Gi(this.app,e);return{id:e.id,type:e.type,props:{...e.props,start:{type:"point",x:n.x,y:n.y},end:{type:"point",x:s.x,y:s.y}}}};onResize=(e,t)=>{const{scaleX:i,scaleY:n}=t,s=Gi(this.app,e);let{start:o,end:r}=e.props;if("point"===o.type){const e=s.start.x*i,t=s.start.y*n;o={...o,x:e,y:t}}if("point"===r.type){const e=s.end.x*i,t=s.end.y*n;r={...r,x:e,y:t}}let a=e.props.bend;if(0!==a){const e=Math.abs(i),t=Math.abs(n);i<0&&n>=0||i>=0&&n<0?(a*=-1,a*=Math.max(e,t)):(i>=0&&n>=0||i<0&&n<0)&&(a*=Math.max(e,t))}return{props:{start:o,end:r,bend:a}}};onDoubleClickHandle=(e,t)=>{switch(t.id){case"start":return{id:e.id,type:e.type,props:{...e.props,arrowheadStart:"none"===e.props.arrowheadStart?"arrow":"none"}};case"end":return{id:e.id,type:e.type,props:{...e.props,arrowheadEnd:"none"===e.props.arrowheadEnd?"arrow":"none"}}}};hitTestPoint(e,t){const i=this.outline(e);for(let n=0;n<i.length-1;n++){const e=i[n],s=i[n+1];if(l().hd.DistanceToLineSegment(e,s,t)<4)return!0}return!1}hitTestLineSegment(e,t,i){const n=this.outline(e);for(let s=0;s<n.length-1;s++){const e=n[s],o=n[s+1];if((0,l().HV)(t,i,e,o))return!0}return!1}render(e){const t=this.app.onlySelectedShape,i=this.app.isInAny("select.idle","select.pointing_handle","select.dragging_handle","arrow.dragging")&&!this.app.isReadOnly,n=this.getArrowInfo(e),o=this.bounds(e),r=this.getLabelBounds(e),c=a.useMemo((()=>this.app.isSafari?sn+=1:0),[e]);if(!n?.isValid)return null;const d=this.app.getStrokeWidth(e.props.size),h=n.start.arrowhead&&Yi(n,"start",d),p=n.end.arrowhead&&Yi(n,"end",d),g=n.isStraight?Hi(n):Xi(n);let m=null;if(t===e&&i){const t=2,{strokeDasharray:i,strokeDashoffset:o}=Ni(n.isStraight?l().hd.Dist(n.start.handle,n.end.handle):Math.abs(n.handleArc.length),t,{end:"skip",start:"skip",lengthRatio:2.5});m="binding"===e.props.start.type||"binding"===e.props.end.type?(0,s.jsx)("path",{className:"rs-arrow-hint",d:n.isStraight?Ji(n):Ui(n),strokeDasharray:i,strokeDashoffset:o,strokeWidth:t,markerStart:"binding"===e.props.start.type?e.props.start.isExact?"":ln(e.props.start.normalizedAnchor)?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",markerEnd:"binding"===e.props.end.type?e.props.end.isExact?"":ln(e.props.end.normalizedAnchor)?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",opacity:.16}):null}const{strokeDasharray:I,strokeDashoffset:f}=Ni(n.isStraight?n.length:Math.abs(n.bodyArc.length),d,{style:e.props.dash}),y=!("none"===n.start.arrowhead||"arrow"===n.start.arrowhead),b=!("none"===n.end.arrowhead||"arrow"===n.end.arrowhead),w=y||b||r,C=(e.id+"_clip_"+c).replace(":","_");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(u,{id:e.id,style:{minWidth:50,minHeight:50},children:[w&&(0,s.jsx)("defs",{children:(0,s.jsxs)("mask",{id:C,children:[(0,s.jsx)("rect",{x:(0,l().WM)(-100+o.minX),y:(0,l().WM)(-100+o.minY),width:(0,l().WM)(o.width+200),height:(0,l().WM)(o.height+200),fill:"white"}),r&&(0,s.jsx)("rect",{x:(0,l().WM)(r.x),y:(0,l().WM)(r.y),width:(0,l().WM)(r.w),height:(0,l().WM)(r.h),fill:"black",rx:4,ry:4}),h&&y&&(0,s.jsx)("path",{d:h,fill:"arrow"===n.start.arrowhead?"none":"black",stroke:"none"}),p&&b&&(0,s.jsx)("path",{d:p,fill:"arrow"===n.end.arrowhead?"none":"black",stroke:"none"})]})}),(0,s.jsxs)("g",{fill:"none",stroke:"currentColor",strokeWidth:d,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none",children:[m,(0,s.jsxs)("g",{...w?{mask:`url(#${C})`}:void 0,children:[w&&(0,s.jsx)("rect",{x:(0,l().WM)(o.minX-100),y:(0,l().WM)(o.minY-100),width:(0,l().WM)(o.width+200),height:(0,l().WM)(o.height+200),opacity:0}),(0,s.jsx)("path",{d:g,strokeDasharray:I,strokeDashoffset:f})]}),h&&y&&"none"!==e.props.fill&&(0,s.jsx)(Si,{d:h,color:e.props.color,fill:e.props.fill}),p&&b&&"none"!==e.props.fill&&(0,s.jsx)(Si,{d:p,color:e.props.color,fill:e.props.fill}),h&&(0,s.jsx)("path",{d:h}),p&&(0,s.jsx)("path",{d:p})]}),(0,s.jsx)("path",{d:g,className:"rs-hitarea-stroke"})]}),(0,s.jsx)(qi,{id:e.id,text:e.props.text,font:e.props.font,size:e.props.size,position:n.middle,width:r?.w??0,labelColor:this.app.getCssColor(e.props.labelColor)})]})}indicator(e){const{start:t,end:i}=Gi(this.app,e),n=this.getArrowInfo(e),o=this.bounds(e),r=this.getLabelBounds(e);if(!n)return null;if(l().hd.Equals(t,i))return null;const a=this.app.getStrokeWidth(e.props.size),c=n.start.arrowhead&&Yi(n,"start",a),d=n.end.arrowhead&&Yi(n,"end",a),u=n.isStraight?Hi(n):Xi(n),h=c&&"arrow"!==n.start.arrowhead||d&&"arrow"!==n.end.arrowhead||null!==r,p=(e.id+"_clip").replace(":","_");return(0,s.jsxs)("g",{children:[h&&(0,s.jsx)("defs",{children:(0,s.jsxs)("mask",{id:p,children:[(0,s.jsx)("rect",{x:o.minX-100,y:o.minY-100,width:o.w+200,height:o.h+200,fill:"white"}),r&&(0,s.jsx)("rect",{x:r.x,y:r.y,width:r.w,height:r.h,fill:"black",rx:4,ry:4}),c&&(0,s.jsx)("path",{d:c,fill:"arrow"===n.start.arrowhead?"none":"black",stroke:"none"}),d&&(0,s.jsx)("path",{d,fill:"arrow"===n.end.arrowhead?"none":"black",stroke:"none"})]})}),(0,s.jsxs)("g",{...h?{mask:`url(#${p})`}:void 0,children:[h&&(0,s.jsx)("rect",{x:o.minX-100,y:o.minY-100,width:o.width+200,height:o.height+200,opacity:0}),(0,s.jsx)("path",{d:u})]}),c&&(0,s.jsx)("path",{d:c}),d&&(0,s.jsx)("path",{d}),r&&(0,s.jsx)("rect",{x:r.x,y:r.y,width:r.w,height:r.h,rx:4,ry:4})]})}get labelBoundsCache(){return this.app.store.createComputedCache("labelBoundsCache",(e=>{const t=this.getArrowInfo(e),i=this.bounds(e),{text:n,font:s,size:o}=e.props;if(!t)return null;if(!n.trim())return null;const{w:r,h:a}=this.app.textMeasure.measureText({...N,text:n,fontFamily:Z[s],fontSize:k[o],width:"fit-content"});let c=r,d=a;if(i.width>i.height){c=Math.max(Math.min(r,64),Math.min(i.width-64,r));const{w:e,h:t}=this.app.textMeasure.measureText({...N,text:n,fontFamily:Z[s],fontSize:k[o],width:c+"px"});c=e,d=t}if(c>16*k[o]){c=16*k[o];const{w:e,h:t}=this.app.textMeasure.measureText({...N,text:n,fontFamily:Z[s],fontSize:k[o],width:c+"px"});c=e,d=t}return new(l().Ax)(t.middle.x-(c+8)/2,t.middle.y-(d+8)/2,c+8,d+8)}))}getLabelBounds(e){return this.labelBoundsCache.get(e.id)||null}getEditingBounds=e=>this.getLabelBounds(e)??new(l().Ax);onEditEnd=e=>{const{id:t,type:i,props:{text:n}}=e;n.trim()!==e.props.text&&this.app.updateShapes([{id:t,type:i,props:{text:n.trim()}}])};toSvg(e,t,i){const n=i.fill[e.props.color],s=this.getArrowInfo(e),o=this.app.getStrokeWidth(e.props.size),r=document.createElementNS("http://www.w3.org/2000/svg","g");if(!s)return r;const a=s.start.arrowhead&&Yi(s,"start",o),l=s.end.arrowhead&&Yi(s,"end",o),c=this.bounds(e),d=this.getLabelBounds(e),u=(e.id+"_clip").replace(":","_");if(a||l){const e=document.createElementNS("http://www.w3.org/2000/svg","defs"),t=document.createElementNS("http://www.w3.org/2000/svg","mask");t.id=u;const i=document.createElementNS("http://www.w3.org/2000/svg","rect");if(i.setAttribute("x",c.minX-100+""),i.setAttribute("y",c.minY-100+""),i.setAttribute("width",c.width+200+""),i.setAttribute("height",c.height+200+""),i.setAttribute("fill","white"),t.appendChild(i),a&&t.appendChild(rn(a,s.start.arrowhead)),l&&t.appendChild(rn(l,s.end.arrowhead)),d){const e=document.createElementNS("http://www.w3.org/2000/svg","rect");e.setAttribute("x",d.x+""),e.setAttribute("y",d.y+""),e.setAttribute("width",d.w+""),e.setAttribute("height",d.h+""),e.setAttribute("fill","black"),t.appendChild(e)}e.appendChild(t),r.appendChild(e)}const h=document.createElementNS("http://www.w3.org/2000/svg","g");h.setAttribute("mask",`url(#${u})`),r.appendChild(h);const p=document.createElementNS("http://www.w3.org/2000/svg","rect");p.setAttribute("x","-100"),p.setAttribute("y","-100"),p.setAttribute("width",c.width+200+""),p.setAttribute("height",c.height+200+""),p.setAttribute("fill","transparent"),p.setAttribute("stroke","none"),h.appendChild(p);const g=function(e,t,i){const n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",e),n.setAttribute("fill","none"),n.setAttribute("stroke",t),n.setAttribute("stroke-width",i+""),n}(s.isStraight?Hi(s):Xi(s),n,o),{strokeDasharray:m,strokeDashoffset:I}=Ni(s.isStraight?s.length:Math.abs(s.bodyArc.length),o,{style:e.props.dash});if(g.setAttribute("stroke-dasharray",m),g.setAttribute("stroke-dashoffset",I),h.appendChild(g),a&&r.appendChild(an(a,e.props.color,o,"arrow"===e.props.arrowheadStart?"none":e.props.fill,i)),l&&r.appendChild(an(l,e.props.color,o,"arrow"===e.props.arrowheadEnd?"none":e.props.fill,i)),d){const n={fontSize:k[e.props.size],lineHeight:N.lineHeight,fontFamily:t,padding:0,textAlign:"middle",width:d.w,height:d.h,fontStyle:"normal",fontWeight:"normal"},s=this.app.textMeasure.getTextLines({text:e.props.text,wrap:!0,...n,width:d.w-8}),o=Ei(this.app,{lines:s,...n,width:d.w-8});o.setAttribute("fill",i.fill[e.props.labelColor]);Array.from(o.children).forEach((e=>{const t=parseFloat(e.getAttribute("x")||"0"),i=parseFloat(e.getAttribute("y")||"0");e.setAttribute("x",t+4+d.x+"px"),e.setAttribute("y",i+d.y+"px")})),r.appendChild(o)}return r}}function rn(e,t){const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",e),i.setAttribute("fill","arrow"===t?"none":"black"),i.setAttribute("stroke","none"),i}function an(e,t,i,n,s){const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d",e),o.setAttribute("fill","none"),o.setAttribute("stroke",s.fill[t]),o.setAttribute("stroke-width",i+"");const r=Li({d:e,fill:n,color:t,colors:s});if(r){const e=document.createElementNS("http://www.w3.org/2000/svg","g");return e.appendChild(r),e.appendChild(o),e}return o}function ln(e){return.5!==e.x||.5!==e.y}nn([c().EW],on.prototype,"infoCache",1),nn([c().EW],on.prototype,"labelBoundsCache",1);const cn=h({type:"arrow",getShapeUtil:()=>on,validator:n().Nj,migrations:n().ud});function dn({children:e,className:t="",...i}){return(0,s.jsx)("div",{...i,className:`rs-html-container ${t}`,children:e})}const un="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E";function hn({url:e}){const{camera:{z:t}}=P();return(0,s.jsx)("a",{className:"rs-hyperlink-button "+(t<.5?"hidden":""),href:e,target:"_blank",rel:"noopener noreferrer",onPointerDown:Di,onPointerUp:Di,title:e,draggable:!1,children:(0,s.jsx)("div",{className:"rs-hyperlink-button__icon",style:{mask:`url("${un}") center 100% / 100% no-repeat`,WebkitMask:`url("${un}") center 100% / 100% no-repeat`}})})}const pn=(e,t,i={})=>{const{newPoint:n,handle:s,scaleX:o,scaleY:r}=t,{minWidth:a=1,maxWidth:c=1/0,minHeight:d=1,maxHeight:u=1/0}=i;let h=e.props.w*o,p=e.props.h*r;const g=new(l().hd)(0,0);if(h>0){if(h<a){switch(s){case"top_left":case"left":case"bottom_left":g.x=h-a;break;case"top":case"bottom":g.x=(h-a)/2;break;default:g.x=0}h=a}}else if(g.x=h,h=-h,h<a){switch(s){case"top_left":case"left":case"bottom_left":g.x=-h;break;default:g.x=-a}h=a}if(p>0){if(p<d){switch(s){case"top_left":case"top":case"top_right":g.y=p-d;break;case"right":case"left":g.y=(p-d)/2;break;default:g.y=0}p=d}}else if(g.y=p,p=-p,p<d){switch(s){case"top_left":case"top":case"top_right":g.y=-p;break;default:g.y=-d}p=d}const{x:m,y:I}=g.rot(e.rotation).add(n);return{x:m,y:I,props:{w:Math.min(c,h),h:Math.min(u,p)}}};class gn extends Pi{getBounds(e){return new(l().Ax)(0,0,e.props.w,e.props.h)}getCenter(e){return new(l().hd)(e.props.w/2,e.props.h/2)}getOutline(e){return this.bounds(e).corners}hitTestPoint(e,t){return(0,l().s3)(t,this.outline(e))}hitTestLineSegment(e,t,i){const n=this.outline(e);for(let s=0;s<n.length;s++){const e=n[s],o=n[(s+1)%n.length];if((0,l().HV)(t,i,e,o))return!0}return!1}onResize=(e,t)=>pn(e,t)}class mn extends gn{static type="bookmark";canResize=()=>!1;hideSelectionBoundsBg=()=>!0;hideSelectionBoundsFg=()=>!0;defaultProps(){return{opacity:"1",url:"",w:S,h:v,assetId:null}}render(e){const t=e.props.assetId?this.app.getAssetById(e.props.assetId):null,i=this.app.getPageRotation(e),n=this.getHumanReadableAddress(e);return(0,s.jsx)(dn,{children:(0,s.jsxs)("div",{className:"rs-bookmark__container rs-hitarea-stroke",style:{boxShadow:ge(i,L)},children:[(0,s.jsxs)("div",{className:"rs-bookmark__image_container",children:[t?.props.image?(0,s.jsx)("img",{className:"rs-bookmark__image",draggable:!1,src:t?.props.image,alt:t?.props.title||""}):(0,s.jsx)("div",{className:"rs-bookmark__placeholder"}),(0,s.jsx)(hn,{url:e.props.url})]}),(0,s.jsxs)("div",{className:"rs-bookmark__copy_container",children:[t?.props.title&&(0,s.jsx)("h2",{className:"rs-bookmark__heading",children:Ie(t?.props.title||"",54)}),t?.props.description&&(0,s.jsx)("p",{className:"rs-bookmark__description",children:Ie(t?.props.description||"",128)}),(0,s.jsx)("a",{className:"rs-bookmark__link",href:e.props.url||"",target:"_blank",rel:"noopener noreferrer",onPointerDown:Di,onPointerUp:Di,onClick:Di,children:Ie(n,45)})]})]})})}indicator(e){return(0,s.jsx)("rect",{width:(0,l().WM)(e.props.w),height:(0,l().WM)(e.props.h),rx:"8",ry:"8"})}onBeforeCreate=e=>{this.updateBookmarkAsset(e)};onBeforeUpdate=(e,t)=>{e.props.url!==t.props.url&&this.updateBookmarkAsset(t)};getHumanReadableAddress(e){try{const t=new URL(e.props.url),i=t.pathname.replace(/\/*$/,"");return`${t.hostname}${i}`}catch(t){return e.props.url}}updateBookmarkAsset=(0,r().sg)((e=>{const{url:t}=e.props,i=n().xl.createCustomId((0,r().xp)(t)),s=this.app.getAssetById(i);s?e.props.assetId!==s.id&&this.app.updateShapes([{id:e.id,type:e.type,props:{assetId:i}}]):this.app.onCreateBookmarkFromUrl&&this.app.onCreateBookmarkFromUrl(t).then((n=>{n?this.app.batch((()=>{this.app.createAssets([{id:i,typeName:"asset",type:"bookmark",props:{src:t,description:n.description,image:n.image,title:n.title}}]).updateShapes([{id:e.id,type:e.type,props:{assetId:i}}])})):this.app.updateShapes([{id:e.id,type:e.type,props:{assetId:void 0}}])}))}),500)}const In=h({type:"bookmark",getShapeUtil:()=>mn,validator:n().Wq,migrations:n().hN}),fn=e=>.65*e+.35*(0,l().dw)(e*l().PI/2),yn=e=>({size:1+e,thinning:.5,streamline:.62+(1+e)/8*.06,smoothing:.62,easing:l().Z4.easeOutSine,simulatePressure:!0}),bn=e=>({size:1+1.2*e,thinning:.62,streamline:.62,smoothing:.62,simulatePressure:!1,easing:fn}),wn=e=>({size:1+e,thinning:0,streamline:.62+(1+e)/8*.06,smoothing:.62,simulatePressure:!1,easing:l().Z4.linear});function Cn(e,t,i,n){return{...n?wn(t):"draw"===e.props.dash?e.props.isPen?bn(t):yn(t):wn(t),last:e.props.isComplete||i}}function Mn(e){const t=[];for(const i of e)if("free"===i.type||i.points.length<2)t.push(...i.points.map(l().hd.Cast));else{const e=Math.max(4,Math.floor(l().hd.Dist(i.points[0],i.points[1])/16));t.push(...l().hd.PointsBetween(i.points[0],i.points[1],e))}return t}function xn(e,t){return{draw:"none",solid:"none",dotted:"0.1 "+2*t,dashed:`${2*t} ${2*t}`}[e.props.dash]}class An extends Pi{static type="draw";hideResizeHandles=e=>this.getIsDot(e);hideRotateHandle=e=>this.getIsDot(e);hideSelectionBoundsBg=e=>this.getIsDot(e);hideSelectionBoundsFg=e=>this.getIsDot(e);defaultProps(){return{segments:[],color:"black",fill:"none",dash:"draw",size:"m",opacity:"1",isComplete:!1,isClosed:!1,isPen:!1}}isClosed=e=>e.props.isClosed;getIsDot(e){return 1===e.props.segments.length&&e.props.segments[0].points.length<2}getBounds(e){return l().Ax.FromPoints(this.outline(e))}getOutline(e){return Mn(e.props.segments)}getCenter(e){return this.bounds(e).center}hitTestPoint(e,t){const i=this.outline(e),n=this.app.zoomLevel,s=this.app.getStrokeWidth(e.props.size)/n;if(1===e.props.segments.length&&e.props.segments[0].points.length<4&&e.props.segments[0].points.some((e=>l().hd.Dist(t,e)<1.5*s)))return!0;if(this.isClosed(e))return(0,l().s3)(t,i);for(let o=0;o<i.length;o++){const e=i[o],n=i[(o+1)%i.length];if(l().hd.DistanceToLineSegment(e,n,t)<s)return!0}return!1}hitTestLineSegment(e,t,i){const n=this.outline(e);if(1===e.props.segments.length&&e.props.segments[0].points.length<4){const n=this.app.zoomLevel,s=this.app.getStrokeWidth(e.props.size)/n;if(e.props.segments[0].points.some((e=>l().hd.DistanceToLineSegment(t,i,e)<1.5*s)))return!0}if(this.isClosed(e))for(let s=0;s<n.length;s++){const e=n[s],o=n[(s+1)%n.length];if((0,l().HV)(t,i,e,o))return!0}else for(let s=0;s<n.length-1;s++){const e=n[s],o=n[s+1];if((0,l().HV)(t,i,e,o))return!0}return!1}render(e){const t=(0,W().h)("zoom",(()=>this.app.zoomLevel<.35),[]),i=this.app.getStrokeWidth(e.props.size),n=Mn(e.props.segments),o=e.props.isComplete||"straight"===(0,r().HV)(e.props.segments)?.type;let a=i;e.props.isPen||"draw"!==e.props.dash||1!==n.length||(a+=(0,r().Sh)(e.id)()*(i/6));const c=Cn(e,a,o,t),d=(0,l().Km)(n,c),h=d.length>1?Ke(d,e.props.isClosed):vn(n[0],a);if(!t&&"draw"===e.props.dash||d.length<2){(0,l().ao)(d,c);const t=(0,l().U$)(d,c);return(0,s.jsxs)(u,{id:e.id,children:[(0,s.jsx)(Si,{fill:e.props.isClosed?e.props.fill:"none",color:e.props.color,d:h}),(0,s.jsx)("path",{d:Fe(t,!0),strokeLinecap:"round",fill:"currentColor"})]})}return(0,s.jsxs)(u,{id:e.id,children:[(0,s.jsx)(Si,{color:e.props.color,fill:e.props.isClosed?e.props.fill:"none",d:h}),(0,s.jsx)("path",{d:h,strokeLinecap:"round",fill:"none",stroke:"currentColor",strokeWidth:i,strokeDasharray:xn(e,i),strokeDashoffset:"0"})]})}indicator(e){const t=this.app.getStrokeWidth(e.props.size),i=Mn(e.props.segments);let n=t;e.props.isPen||"draw"!==e.props.dash||1!==i.length||(n+=(0,r().Sh)(e.id)()*(t/6));const o=Cn(e,n,e.props.isComplete||"straight"===(0,r().HV)(e.props.segments)?.type,!0),a=(0,l().Km)(i,o),c=a.length>1?Ke(a,e.props.isClosed):vn(i[0],n);return(0,s.jsx)("path",{d:c})}toSvg(e,t,i){const{color:n}=e.props,s=this.app.getStrokeWidth(e.props.size),o=Mn(e.props.segments),a=e.props.isComplete||"straight"===(0,r().HV)(e.props.segments)?.type;let c=s;e.props.isPen||"draw"!==e.props.dash||1!==o.length||(c+=(0,r().Sh)(e.id)()*(s/6));const d=Cn(e,c,a,!1),u=(0,l().Km)(o,d),h=u.length>1?Ke(u,e.props.isClosed):vn(o[0],c);let p;if("draw"===e.props.dash||u.length<2){(0,l().ao)(u,d);const e=(0,l().U$)(u,d),t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",Fe(e,!0)),t.setAttribute("fill",i.fill[n]),t.setAttribute("stroke-linecap","round"),p=t}else{const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",h),t.setAttribute("stroke",i.fill[n]),t.setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-width",s.toString()),t.setAttribute("stroke-dasharray",xn(e,s)),t.setAttribute("stroke-dashoffset","0"),p=t}const g=Li({fill:e.props.isClosed?e.props.fill:"none",d:h,color:e.props.color,colors:i});if(g){const e=document.createElementNS("http://www.w3.org/2000/svg","g");return e.appendChild(g),e.appendChild(p),e}return p}onResize=(e,t)=>{const{scaleX:i,scaleY:n}=t,s=[];for(const o of e.props.segments)s.push({...o,points:o.points.map((({x:e,y:t,z:s})=>({x:i*e,y:n*t,z:s})))});return{props:{segments:s}}}}const Sn=h({type:"draw",getShapeUtil:()=>An,migrations:n().de,validator:n().MO});function vn(e,t){const i=.5*(t+1);return`M ${e.x} ${e.y} m -${i}, 0 a ${i},${i} 0 1,0 ${2*i},0 a ${i},${i} 0 1,0 -${2*i},0`}function Ln(e){return(0,s.jsx)("svg",{width:16,height:16,viewBox:"0 0 16 16",...e,children:(0,s.jsxs)("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[(0,s.jsx)("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"black"}),(0,s.jsx)("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"black",children:(0,s.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})})}class jn extends gn{static type="embed";canUnmount=()=>!1;canResize=e=>{const t=we(e.props.url);return!!t?.definition?.doesResize};hideSelectionBoundsBg=e=>!this.canResize(e);hideSelectionBoundsFg=e=>!this.canResize(e);canEdit=()=>!0;defaultProps(){return{opacity:"1",w:300,h:300,url:"",doesResize:!0}}isAspectRatioLocked=e=>{const t=we(e.props.url);return t?.definition.isAspectRatioLocked??!1};onResize=(e,t)=>{const i=this.isAspectRatioLocked(e),n=we(e.props.url);let s=n?.definition.minWidth??200,o=n?.definition.minHeight??200;if(i){const t=e.props.w/e.props.h;t>1?s*=t:o/=t}return pn(e,t,{minWidth:s,minHeight:o})};render(e){const{w:t,h:i,url:o}=e.props,r=yi(e.id),c=(0,a.useMemo)((()=>be(o)),[o]),d=(0,W().h)("is hovering",(()=>{const{editingId:e,hoveredId:t}=this.app.pageState;if(e&&t!==e){const t=this.app.getShapeById(e);if(t&&"embed"===t.type)return!0}return!1}),[]),u=this.app.getPageRotation(e),h=r||d;if("github_gist"===c?.definition.type){const n=c.url.split("/").pop();if(n)return(0,s.jsx)(dn,{className:"rs-embed-container",id:e.id,children:(0,s.jsx)(Nn,{id:n,width:(0,l().WM)(t),height:(0,l().WM)(i),isInteractive:h,pageRotation:u})})}const p=(g={...n().Y0,...c?.definition.overridePermissions??{}},Object.entries(g).filter((([e,t])=>t)).map((([e])=>e)).join(" "));var g;return(0,s.jsx)(dn,{className:"rs-embed-container",id:e.id,children:c?.definition?(0,s.jsx)("iframe",{className:`rs-embed rs-embed-${e.id}`,sandbox:p,src:c.embedUrl,width:(0,l().WM)(t),height:(0,l().WM)(i),draggable:!1,frameBorder:"0",referrerPolicy:"no-referrer-when-downgrade",style:{border:0,pointerEvents:h?"auto":"none",zIndex:h?"":"-1",boxShadow:ge(u,L),borderRadius:c?.definition.overrideOutlineRadius??8,background:c?.definition.backgroundColor}}):(0,s.jsx)(Ln,{x:(t-38)/2,y:(i-38)/2})})}indicator(e){const t=(0,a.useMemo)((()=>we(e.props.url)),[e.props.url]);return(0,s.jsx)("rect",{width:(0,l().WM)(e.props.w),height:(0,l().WM)(e.props.h),rx:t?.definition.overrideOutlineRadius??8,ry:t?.definition.overrideOutlineRadius??8})}}function Nn({id:e,file:t,isInteractive:i,width:n,height:o,style:r,pageRotation:c}){const d=a.useRef(null),u=`https://gist.github.com/${e}.js${t?`?file=${t}`:""}`;return(0,s.jsx)("iframe",{ref:d,className:"rs-embed",draggable:!1,width:(0,l().WM)(n),height:(0,l().WM)(o),frameBorder:"0",scrolling:"no",seamless:!0,referrerPolicy:"no-referrer-when-downgrade",style:{...r,pointerEvents:i?"all":"none",zIndex:i?"":"-1",boxShadow:ge(c,L)},srcDoc:`\n\t\t\t<html>\n\t\t\t\t<head>\n\t\t\t\t\t<base target="_blank">\n\t\t\t\t</head>\n\t\t\t\t<body>\n\t\t\t\t\t<script src=${u}><\/script>\n\t\t\t\t\t<style type="text/css">\n\t\t\t\t\t\t* { margin: 0px; }\n\t\t\t\t\t\ttable { height: 100%; background-color: red; }\n\t\t\t\t\t\t.gist { background-color: none; height: 100%;  }\n\t\t\t\t\t\t.gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }\n\t\t\t\t\t</style>\n\t\t\t\t</body>\n\t\t\t</html>`})}const Dn=h({type:"embed",getShapeUtil:()=>jn,validator:n().$,migrations:n().up}),En=(0,a.forwardRef)((({id:e,name:t,isEditing:i},n)=>{const o=P(),r=(0,a.useCallback)((e=>{"Enter"===e.key&&(e.stopPropagation(),e.currentTarget.blur(),o.setEditingId(null))}),[o]),l=(0,a.useCallback)((t=>{const i=o.getShapeById(e);if(!i)return;const n=i.props.name,s=t.currentTarget.value.trim();n!==s&&o.updateShapes([{id:e,type:"frame",props:{name:s}}],!0)}),[e,o]),c=(0,a.useCallback)((t=>{const i=o.getShapeById(e);if(!i)return;const n=i.props.name,s=t.currentTarget.value;n!==s&&o.updateShapes([{id:e,type:"frame",props:{name:s}}],!0)}),[e,o]);return(0,s.jsxs)("div",{className:"rs-frame-label "+(i?"rs-frame-label__editing":""),children:[(0,s.jsx)("input",{className:"rs-frame-name-input",ref:n,style:{display:i?void 0:"none"},value:t,autoFocus:!0,onKeyDown:r,onBlur:l,onChange:c}),He(t,"Frame")+String.fromCharCode(8203)]})})),kn=(0,W().u4)((function({id:e,name:t,width:i,height:n}){const o=P(),r=(0,l().lC)(o.getPageRotationById(e)),c=yi(e),d=(0,a.useRef)(null);(0,a.useEffect)((()=>{const e=d.current;e&&c&&(e.focus(),e.select(),requestAnimationFrame((()=>{document.activeElement!==e&&(e.focus(),e.select())})))}),[d,c]);const u=((r+Math.PI/4)*(2/Math.PI)+4)%4,h=["top","left","bottom","right"][Math.floor(u)];let p;switch(h){case"top":p="";break;case"right":p=`translate(${(0,l().WM)(i)}px, 0px) rotate(90deg)`;break;case"bottom":p=`translate(${(0,l().WM)(i)}px, ${(0,l().WM)(n)}px) rotate(180deg)`;break;case"left":p=`translate(0px, ${(0,l().WM)(n)}px) rotate(270deg)`}return(0,s.jsx)("div",{className:"rs-frame-heading",style:{overflow:c?"visible":"hidden",maxWidth:`calc(var(--rs-zoom) * ${"top"===h||"bottom"===h?Math.ceil(i):Math.ceil(n)}px + var(--space-5))`,bottom:Math.ceil(n),transform:`${p} scale(var(--rs-scale)) translateX(calc(-1 * var(--space-3))`},children:(0,s.jsx)("div",{className:"rs-frame-heading-hit-area",children:(0,s.jsx)(En,{ref:d,id:e,name:t,isEditing:c})})})}));class Zn extends gn{static type="frame";canBind=()=>!0;canEdit=()=>!0;defaultProps(){return{opacity:"1",w:320,h:180,name:""}}render(e){const t=this.bounds(e);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(u,{children:[(0,s.jsx)("rect",{className:"rs-hitarea-stroke",width:t.width,height:t.height}),(0,s.jsx)("rect",{className:"rs-frame__body",width:t.width,height:t.height,fill:"none"})]}),(0,s.jsx)(kn,{id:e.id,name:e.props.name,width:t.width,height:t.height})]})}toSvg(e,t,i){const n=document.createElementNS("http://www.w3.org/2000/svg","g"),s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("width",e.props.w.toString()),s.setAttribute("height",e.props.h.toString()),s.setAttribute("fill",i.solid),s.setAttribute("opacity",e.props.opacity),s.setAttribute("stroke",i.fill.black),s.setAttribute("stroke-width","1"),s.setAttribute("rx","4"),s.setAttribute("ry","4"),n.appendChild(s);const o=(((0,l().lC)(this.app.getPageRotationById(e.id))+Math.PI/4)*(2/Math.PI)+4)%4;let r;switch(["top","left","bottom","right"][Math.floor(o)]){case"top":default:r="";break;case"right":r=`translate(${(0,l().WM)(e.props.w)}px, 0px) rotate(90deg)`;break;case"bottom":r=`translate(${(0,l().WM)(e.props.w)}px, ${(0,l().WM)(e.props.h)}px) rotate(180deg)`;break;case"left":r=`translate(0px, ${(0,l().WM)(e.props.h)}px) rotate(270deg)`}const a={fontSize:12,fontFamily:"Inter, sans-serif",textAlign:"start",width:e.props.w+16,height:30,padding:8,lineHeight:1,fontStyle:"normal",fontWeight:"normal"};let c=He(e.props.name,"Frame")+String.fromCharCode(8203);const d=this.app.textMeasure.getTextLines({text:c,wrap:!0,...a});c=d.length>1?d[0]+"":d[0];const u=this.app.textMeasure.measureText({fontSize:12,fontFamily:"Inter, sans-serif",lineHeight:1,fontStyle:"normal",fontWeight:"normal",text:c,width:"fit-content",maxWidth:"unset",padding:"0px"}),h=document.createElementNS("http://www.w3.org/2000/svg","text");h.setAttribute("x","0"),h.setAttribute("y",-(8+u.h/2)+"px"),h.setAttribute("font-family",'"Inter", sans-serif'),h.setAttribute("font-size","12px"),h.setAttribute("font-weight","400"),h.style.setProperty("transform",r),h.textContent=c;const p=document.createElementNS("http://www.w3.org/2000/svg","rect");return p.setAttribute("x"," -4px"),p.setAttribute("y",-(16+u.h)+"px"),p.setAttribute("width",u.w+8+"px"),p.setAttribute("height",u.h+8+"px"),p.setAttribute("rx","4px"),p.setAttribute("ry","4px"),p.setAttribute("fill",i.background),n.appendChild(p),n.appendChild(h),n}indicator(e){const t=this.bounds(e);return(0,s.jsx)("rect",{width:(0,l().WM)(t.width),height:(0,l().WM)(t.height),className:"rs-frame-indicator"})}canReceiveNewChildrenOfType=e=>!0;canDropShapes=(e,t)=>!0;onDragShapesOver=(e,t)=>t.every((t=>t.parentId===e.id))?{shouldHint:!1}:(this.app.reparentShapesById(t.map((e=>e.id)),e.id),{shouldHint:!0});onDragShapesOut=(e,t)=>{const i=this.app.getShapeById(e.parentId);"group"===i?.type?this.app.reparentShapesById(t.map((e=>e.id)),i.id):this.app.reparentShapesById(t.map((e=>e.id)),this.app.currentPageId)};onResizeEnd=e=>{const t=this.app.getPageBounds(e),i=this.app.getSortedChildIds(e.id),n=[];for(const s of i){const e=this.app.getPageBoundsById(s);t.includes(e)||n.push(s)}n.length>0&&this.app.reparentShapesById(n,this.app.currentPageId)}}const Tn=h({type:"frame",getShapeUtil:()=>Zn,validator:n().hj,migrations:n().Sp}),Wn=a.memo((function({id:e,type:t,text:i,size:n,labelColor:o,font:r,align:a,wrap:l}){const{rInput:c,isEmpty:d,isEditing:u,isEditableFromHover:h,handleFocus:p,handleChange:g,handleKeyDown:m,handleBlur:I}=$i(e,t,i),f=u||h;return(0,s.jsx)("div",{className:"rs-text-label","data-font":r,"data-align":a,"data-hastext":!d,"data-isediting":u,"data-textwrap":!!l,children:(0,s.jsxs)("div",{className:"rs-text-label__inner",style:{fontSize:E[n],lineHeight:E[n]*N.lineHeight+"px",minHeight:d?E[n]*N.lineHeight+32:0,minWidth:d?33:0,color:o},children:[(0,s.jsx)("div",{className:"rs-text rs-text-content",dir:"ltr",children:Ki.normalizeTextForDom(i)}),f?(0,s.jsx)("textarea",{ref:c,className:"rs-text rs-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:u,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:i,onFocus:p,onChange:g,onKeyDown:m,onBlur:I,onContextMenu:Di}):null]})})})),zn=a.memo((function({w:e,h:t,strokeWidth:i,dash:n,color:o,fill:r}){const a=e/2,c=t/2,d=Math.max(0,a-i/2),u=Math.max(0,c-i/2),h=(0,l().VM)(d,u),{strokeDasharray:p,strokeDashoffset:g}=Ni(h<64?2*h:h,i,{style:n,snap:4,closed:!0}),m=`M${a-d},${c}a${d},${u},0,1,1,${2*d},0a${d},${u},0,1,1,-${2*d},0`;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Si,{d:m,color:o,fill:r}),(0,s.jsx)("path",{d:m,strokeWidth:i,width:(0,l().WM)(e),height:(0,l().WM)(t),fill:"none",stroke:"currentColor",strokeDasharray:p,strokeDashoffset:g,pointerEvents:"all"})]})}));function Pn(e,t){if(t>e){const i=e/2;return`\n    M0,${i}\n    a${i},${i},0,1,1,${2*i},0\n    L${e},${t-i}\n    a${i},${i},0,1,1,-${2*i},0\n    Z`}const i=t/2;return`\n    M${i},0\n    L${e-i},0\n    a${i},${i},0,1,1,0,${2*i}\n    L${i},${t}\n    a${i},${i},0,1,1,0,${2*-i}\n    Z`}function Yn(e,t){if(e>t){const i=t/2;return(0,l().VM)(i,i)+2*(e-2*i)}const i=e/2;return(0,l().VM)(i,i)+2*(t-2*i)}const On=a.memo((function({w:e,h:t,strokeWidth:i,dash:n,color:o,fill:r}){const a=Pn(e,t),c=Yn(e,t),{strokeDasharray:d,strokeDashoffset:u}=Ni(c<64?2*c:c,i,{style:n,snap:4,start:"outset",end:"outset",closed:!0});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Si,{d:a,color:o,fill:r}),(0,s.jsx)("path",{d:a,strokeWidth:i,width:(0,l().WM)(e),height:(0,l().WM)(t),fill:"none",stroke:"currentColor",strokeDasharray:d,strokeDashoffset:u,pointerEvents:"all"})]})}));function Rn({w:e,h:t,strokeWidth:i,dash:n,color:s,colors:o,fill:r}){const a=Pn(e,t),l=Yn(e,t),{strokeDasharray:c,strokeDashoffset:d}=Ni(l<64?2*l:l,i,{style:n,snap:4,closed:!0}),u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("d",a),u.setAttribute("stroke-width",i.toString()),u.setAttribute("width",e.toString()),u.setAttribute("height",t.toString()),u.setAttribute("fill","none"),u.setAttribute("stroke",o.fill[s]),u.setAttribute("stroke-dasharray",c),u.setAttribute("stroke-dashoffset",d);return ji(u,Li({d:a,fill:r,color:s,colors:o}))}const Gn=a.memo((function({dash:e,fill:t,color:i,strokeWidth:n,outline:o,bgOutline:r}){const a=r?"M"+r[0]+"L"+r.slice(1)+"Z":"M"+o[0]+"L"+o.slice(1)+"Z";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Si,{d:a,fill:t,color:i}),(0,s.jsx)("g",{strokeWidth:n,stroke:"currentColor",fill:"none",pointerEvents:"all",children:Array.from(Array(o.length)).map(((t,i)=>{const r=o[i],a=o[(i+1)%o.length],c=l().hd.Dist(r,a),{strokeDasharray:d,strokeDashoffset:u}=Ni(c,n,{style:e,start:"outset",end:"outset"});return(0,s.jsx)("line",{x1:r.x,y1:r.y,x2:a.x,y2:a.y,strokeDasharray:d,strokeDashoffset:u},i)}))})]})}));const _n=a.memo((function({id:e,w:t,h:i,strokeWidth:n,fill:o,color:r}){const a=Vn(e,t,i,n),l=Hn(e,t,i,n);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Si,{d:a,color:r,fill:o}),(0,s.jsx)("path",{d:l,fill:"currentColor",strokeWidth:0,pointerEvents:"all"})]})}));function Bn(e){return{size:1+e,thinning:.25,end:{taper:e},start:{taper:e},streamline:0,smoothing:1,simulatePressure:!1}}function Jn(e,t,i,n){const s=(0,r().Sh)(e),o=t/2,a=i/2,c=(0,l().VM)(o,a),d=[],u=l().uA*s(),h=l().uA+l().DD/2+Math.abs(s())*l().DD,p=Math.max(16,c/10);for(let r=0;r<p;r++){const e=r/(p-1),n=u+e*h,c=Math.cos(n),g=Math.sin(n);d.push(new(l().hd)(o*c+.5*t+.05*s(),a*g+i/2+.05*s(),Math.min(1,.5+Math.abs(.5-(s()>0?l().Z4.easeInOutSine(e):l().Z4.easeInExpo(e)))/2)))}return(0,l().Km)(d,Bn(n))}function Hn(e,t,i,n){const s=Bn(n);return Fe((0,l().U$)((0,l().ao)(Jn(e,t,i,n),s),s))}function Vn(e,t,i,n){return Ke(Jn(e,t,i,n))}const Un=a.memo((function({id:e,bgOutline:t,outline:i,fill:n,color:o,strokeWidth:r}){const a=Xn(e,i,r),c=Kn(r),d=(0,l().Km)(a,c),u=Ke(t?(0,l().Km)(Xn(e,t,r),c):d,!1),h=Fe((0,l().$4)(a,c));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Si,{d:u,fill:n,color:o}),(0,s.jsx)("path",{d:h,fill:"currentColor",pointerEvents:"all"})]})}));function Xn(e,t,i){const n=[],s=(0,r().Sh)(e),o=Math.round(Math.abs(s())*t.length),a=t.map((e=>l().hd.AddXY(e,s()*i/4,s()*i/4))),c=a.length;for(let r=0,d=c+1;r<d;r++){const e=a[(o+r)%c],s=a[(o+r+1)%c],d=Math.min(l().hd.Dist(e,s)/2,i/2),u=l().hd.Nudge(e,s,d),h=l().hd.Med(e,s);if(0===r)s.z=.7,n.push(new(l().hd)(h.x,h.y,.7),s);else if(r===t.length){const e=l().hd.PointsBetween(u,h,4);e.forEach((e=>e.z=.7)),n.push(...e)}else n.push(...l().hd.PointsBetween(u,s,6))}return n}function Fn(e,t,i){const n=Xn(e,t,i),s=Kn(i);return Ke((0,l().Km)(n,s),!0)}function Kn(e){return{size:1+.618*e,last:!0,simulatePressure:!1,streamline:.25,thinning:.9}}const Qn=a.memo((function({w:e,h:t,strokeWidth:i,fill:n,color:o}){const r=e/2,a=t/2,l=Math.max(0,r),c=Math.max(0,a),d=`M${r-l},${a}a${l},${c},0,1,1,${2*l},0a${l},${c},0,1,1,-${2*l},0`;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Si,{d,color:o,fill:n}),(0,s.jsx)("path",{d,stroke:`var(--palette-${o})`,strokeWidth:i,fill:"none"})]})}));const $n=a.memo((function({w:e,h:t,strokeWidth:i,fill:n,color:o}){const r=qn(e,t);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Si,{d:r,color:o,fill:n}),(0,s.jsx)("path",{d:r,stroke:`var(--palette-${o})`,strokeWidth:i,fill:"none"})]})}));function qn(e,t){let i;if(t>e){const n=e/2;i=`\n    M0,${n}\n    a${n},${n},0,1,1,${2*n},0\n    L${e},${t-n}\n    a${n},${n},0,1,1,-${2*n},0\n    Z`}else{const n=t/2;i=`\n    M${n},0\n    L${e-n},0\n    a${n},${n},0,1,1,0,${2*n}\n    L${n},${t}\n    a${n},${n},0,1,1,0,${2*-n}\n    Z`}return i}const es=a.memo((function({outline:e,bgOutline:t,fill:i,color:n,strokeWidth:o}){const r="M"+e[0]+"L"+e.slice(1)+"Z";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Si,{d:t?"M"+t[0]+"L"+t.slice(1)+"Z":r,fill:i,color:n}),(0,s.jsx)("path",{d:r,stroke:`var(--palette-${n}`,strokeWidth:o,fill:"none"})]})}));const ts=51;class is extends gn{static type="geo";canEdit=()=>!0;defaultProps(){return{w:100,h:100,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"draw",size:"m",opacity:"1",font:"draw",text:"",align:"middle",growY:0,url:""}}hitTestLineSegment(e,t,i){let n=this.outline(e);"x-box"===e.props.geo&&(n=ss(Math.max(1,e.props.w),Math.max(1,e.props.h+e.props.growY)));for(let s=0;s<n.length;s++){const e=n[s],o=n[(s+1)%n.length];if((0,l().HV)(t,i,e,o))return!0}return!1}getBounds(e){return new(l().Ax)(0,0,e.props.w,e.props.h+e.props.growY)}getCenter(e){return new(l().hd)(e.props.w/2,(e.props.h+e.props.growY)/2)}getOutline(e){const t=Math.max(1,e.props.w),i=Math.max(1,e.props.h+e.props.growY),n=t/2,s=i/2;switch(e.props.geo){case"triangle":return[new(l().hd)(n,0),new(l().hd)(t,i),new(l().hd)(0,i)];case"diamond":return[new(l().hd)(n,0),new(l().hd)(t,s),new(l().hd)(n,i),new(l().hd)(0,s)];case"pentagon":return(0,l().ye)(t,i,5);case"hexagon":return(0,l().ye)(t,i,6);case"octagon":return(0,l().ye)(t,i,8);case"ellipse":{const e=Math.pow(n-s,2)/Math.pow(n+s,2),t=l().PI*(n+s)*(1+3*e/(10+Math.sqrt(4-3*e)));let i=Math.max(4,Math.ceil(t/10));i=4*Math.ceil(i/4);const o=l().uA/i,r=Math.cos(o),a=Math.sin(o);let c=0,d=1,u=0,h=1;const p=Array(i);for(let g=0;g<i;g++)p[g]=new(l().hd)(n+n*d,s+s*c),u=a*d+r*c,h=r*d-a*c,c=u,d=h;return p}case"oval":{const e=10,o=Array(2*e);if(i>t)for(let t=0;t<e;t++){const s=-l().PI+l().PI*t/(e-2),r=l().PI*t/(e-2);o[t]=new(l().hd)(n+n*Math.cos(s),n+n*Math.sin(s)),o[t+e]=new(l().hd)(n+n*Math.cos(r),i-n+n*Math.sin(r))}else for(let n=0;n<e;n++){const r=-l().DD+l().PI*n/(e-2),a=l().DD+l().PI*-n/(e-2);o[n]=new(l().hd)(t-s+s*Math.cos(r),i-s+s*Math.sin(r)),o[n+e]=new(l().hd)(s-s*Math.cos(a),i-s+s*Math.sin(a))}return o}case"star":{const e=5,n=l().uA/e/2,s=2*Math.floor(e/4),o=2*e-s,r=0,a=2*Math.floor(e/2),c=Math.cos(-l().DD+s*n)*t/2,d=Math.cos(-l().DD+o*n)*t/2,u=Math.sin(-l().DD+r*n)*i/2,h=Math.sin(-l().DD+a*n)*i/2,p=t-Math.abs(c-d),g=i-Math.abs(h-u),m=1,I=(t-(t/2+d-(t/2-c)))/2,f=(i-(i/2+u-(i/2-h)))/2,y=(t+p)/2,b=(i+g)/2,w=y*m/2,C=b*m/2;return Array.from(Array(2*e)).map(((e,t)=>{const i=-l().DD+t*n;return new(l().hd)(I+(t%2?w:y)*Math.cos(i),f+(t%2?C:b)*Math.sin(i))}))}case"rhombus":{const e=Math.min(.38*t,.38*i);return[new(l().hd)(e,0),new(l().hd)(t,0),new(l().hd)(t-e,i),new(l().hd)(0,i)]}case"rhombus-2":{const e=Math.min(.38*t,.38*i);return[new(l().hd)(0,0),new(l().hd)(t-e,0),new(l().hd)(t,i),new(l().hd)(e,i)]}case"trapezoid":{const e=Math.min(.38*t,.38*i);return[new(l().hd)(e,0),new(l().hd)(t-e,0),new(l().hd)(t,i),new(l().hd)(0,i)]}case"arrow-right":{const e=.38*Math.min(t,i),n=.16*i;return[new(l().hd)(0,n),new(l().hd)(t-e,n),new(l().hd)(t-e,0),new(l().hd)(t,i/2),new(l().hd)(t-e,i),new(l().hd)(t-e,i-n),new(l().hd)(0,i-n)]}case"arrow-left":{const e=.38*Math.min(t,i),n=.16*i;return[new(l().hd)(e,0),new(l().hd)(e,n),new(l().hd)(t,n),new(l().hd)(t,i-n),new(l().hd)(e,i-n),new(l().hd)(e,i),new(l().hd)(0,i/2)]}case"arrow-up":{const e=.16*t,n=.38*Math.min(t,i);return[new(l().hd)(t/2,0),new(l().hd)(t,n),new(l().hd)(t-e,n),new(l().hd)(t-e,i),new(l().hd)(e,i),new(l().hd)(e,n),new(l().hd)(0,n)]}case"arrow-down":{const e=.16*t,n=.38*Math.min(t,i);return[new(l().hd)(e,0),new(l().hd)(t-e,0),new(l().hd)(t-e,i-n),new(l().hd)(t,i-n),new(l().hd)(t/2,i),new(l().hd)(0,i-n),new(l().hd)(e,i-n)]}case"x-box":case"rectangle":return[new(l().hd)(0,0),new(l().hd)(t,0),new(l().hd)(t,i),new(l().hd)(0,i)]}}onEditEnd=e=>{const{id:t,type:i,props:{text:n}}=e;n.trim()!==e.props.text&&this.app.updateShapes([{id:t,type:i,props:{text:n.trim()}}])};render(e){const{id:t,type:i,props:n}=e,o=(0,W().h)("zoom",(()=>this.app.zoomLevel<.35),[]),r=this.app.getStrokeWidth(n.size),{w:a,color:l,labelColor:c,fill:d,dash:h,growY:p,font:g,align:m,size:I,text:f}=n;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u,{id:t,children:(()=>{const i=n.h+p;switch(n.geo){case"ellipse":return"draw"===h?o?(0,s.jsx)(Qn,{strokeWidth:r,w:a,h:i,color:l,fill:d}):(0,s.jsx)(_n,{id:t,w:a,h:i,color:l,fill:d,strokeWidth:r}):"solid"===h?(0,s.jsx)(Qn,{strokeWidth:r,w:a,h:i,color:l,fill:d}):(0,s.jsx)(zn,{id:t,strokeWidth:r,w:a,h:i,dash:h,color:l,fill:d});case"oval":return"draw"===h||"solid"===h?(0,s.jsx)($n,{strokeWidth:r,w:a,h:i,color:l,fill:d}):(0,s.jsx)(On,{id:t,strokeWidth:r,w:a,h:i,dash:h,color:l,fill:d});default:{let i,n=this.outline(e);return"x-box"===e.props.geo&&(i=n,n=ss(Math.max(1,e.props.w),Math.max(1,e.props.h+e.props.growY))),"draw"===h?o?(0,s.jsx)(es,{fill:d,color:l,strokeWidth:r,outline:n,bgOutline:i}):(0,s.jsx)(Un,{id:t,fill:d,color:l,strokeWidth:r,outline:n,bgOutline:i}):"solid"===h?(0,s.jsx)(es,{fill:d,color:l,strokeWidth:r,outline:n,bgOutline:i}):(0,s.jsx)(Gn,{dash:h,fill:d,color:l,strokeWidth:r,outline:n,bgOutline:i})}}})()}),(0,s.jsx)(Wn,{id:t,type:i,font:g,fill:d,size:I,align:m,text:f,labelColor:this.app.getCssColor(c),wrap:!0}),"url"in e.props&&e.props.url&&(0,s.jsx)(hn,{url:e.props.url})]})}indicator(e){const{id:t,props:i}=e,{w:n,h:o,growY:r,size:a}=i,l=this.app.getStrokeWidth(a);switch(i.geo){case"ellipse":return"draw"===i.dash?(0,s.jsx)("path",{d:Vn(t,n,o+r,l)}):(0,s.jsx)("ellipse",{cx:n/2,cy:(o+r)/2,rx:n/2,ry:(o+r)/2});case"oval":return(0,s.jsx)("path",{d:qn(n,o+r)});default:{let n=this.outline(e);return"x-box"===e.props.geo&&(n=ss(Math.max(1,e.props.w),Math.max(1,e.props.h+e.props.growY))),"draw"===i.dash?(0,s.jsx)("path",{d:Fn(t,n,l)}):(0,s.jsx)("path",{d:`M${n[0]}L${n.slice(1)}Z`})}}}toSvg(e,t,i){const{id:n,props:s}=e,o=this.app.getStrokeWidth(s.size);let r;switch(s.geo){case"ellipse":switch(s.dash){case"draw":r=function({id:e,w:t,h:i,strokeWidth:n,fill:s,color:o,colors:r}){const a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("d",Hn(e,t,i,n)),a.setAttribute("fill",r.fill[o]),ji(a,Li({d:Vn(e,t,i,n),fill:s,color:o,colors:r}))}({id:n,w:s.w,h:s.h,color:s.color,fill:s.fill,strokeWidth:o,colors:i});break;case"solid":r=function({w:e,h:t,strokeWidth:i,fill:n,color:s,colors:o}){const r=e/2,a=t/2,l=Math.max(0,r),c=Math.max(0,a),d=`M${r-l},${a}a${l},${c},0,1,1,${2*l},0a${l},${c},0,1,1,-${2*l},0`,u=document.createElementNS("http://www.w3.org/2000/svg","path");return u.setAttribute("d",d),u.setAttribute("stroke-width",i.toString()),u.setAttribute("width",e.toString()),u.setAttribute("height",t.toString()),u.setAttribute("fill","none"),u.setAttribute("stroke",o.fill[s]),ji(u,Li({d,fill:n,color:s,colors:o}))}({strokeWidth:o,w:s.w,h:s.h,color:s.color,fill:s.fill,colors:i});break;default:r=function({w:e,h:t,strokeWidth:i,dash:n,color:s,colors:o,fill:r}){const a=e/2,c=t/2,d=Math.max(0,a-i/2),u=Math.max(0,c-i/2),h=(0,l().VM)(d,u),{strokeDasharray:p,strokeDashoffset:g}=Ni(h<64?2*h:h,i,{style:n,snap:4,closed:!0}),m=`M${a-d},${c}a${d},${u},0,1,1,${2*d},0a${d},${u},0,1,1,-${2*d},0`,I=document.createElementNS("http://www.w3.org/2000/svg","path");return I.setAttribute("d",m),I.setAttribute("stroke-width",i.toString()),I.setAttribute("width",e.toString()),I.setAttribute("height",t.toString()),I.setAttribute("fill","none"),I.setAttribute("stroke",o.fill[s]),I.setAttribute("stroke-dasharray",p),I.setAttribute("stroke-dashoffset",g),ji(I,Li({d:m,fill:r,color:s,colors:o}))}({id:n,strokeWidth:o,w:s.w,h:s.h,dash:s.dash,color:s.color,fill:s.fill,colors:i})}break;case"oval":switch(s.dash){case"draw":default:r=Rn({id:n,strokeWidth:o,w:s.w,h:s.h,dash:s.dash,color:s.color,fill:s.fill,colors:i});break;case"solid":r=function({w:e,h:t,strokeWidth:i,fill:n,color:s,colors:o}){const r=qn(e,t),a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("d",r),a.setAttribute("stroke-width",i.toString()),a.setAttribute("width",e.toString()),a.setAttribute("height",t.toString()),a.setAttribute("fill","none"),a.setAttribute("stroke",o.fill[s]),ji(a,Li({d:r,fill:n,color:s,colors:o}))}({strokeWidth:o,w:s.w,h:s.h,color:s.color,fill:s.fill,colors:i})}break;default:{let t,a=this.outline(e);switch("x-box"===s.geo&&(t=a,a=ss(Math.max(1,e.props.w),Math.max(1,e.props.h+e.props.growY))),s.dash){case"draw":r=function({id:e,outline:t,bgOutline:i,fill:n,color:s,colors:o,strokeWidth:r}){const a=Xn(e,t,r),c=Kn(r),d=document.createElementNS("http://www.w3.org/2000/svg","path");return d.setAttribute("d",Fe((0,l().$4)(a,c),!0)),d.setAttribute("fill",o.fill[s]),ji(d,Li({d:Ke((0,l().Km)(i?Xn(e,i,r):a,c),!1),fill:n,color:s,colors:o}))}({id:n,fill:s.fill,color:s.color,strokeWidth:o,outline:a,bgOutline:t,colors:i});break;case"solid":r=function({outline:e,bgOutline:t,fill:i,color:n,strokeWidth:s,colors:o}){const r="M"+e[0]+"L"+e.slice(1)+"Z",a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("d",r),a.setAttribute("stroke-width",s.toString()),a.setAttribute("stroke",o.fill[n]),a.setAttribute("fill","none"),ji(a,Li({d:t?"M"+t[0]+"L"+t.slice(1)+"Z":r,fill:i,color:n,colors:o}))}({fill:s.fill,color:s.color,strokeWidth:o,outline:a,bgOutline:t,colors:i});break;default:r=function({dash:e,fill:t,color:i,colors:n,strokeWidth:s,outline:o,bgOutline:r}){const a=document.createElementNS("http://www.w3.org/2000/svg","g");a.setAttribute("stroke-width",s.toString()),a.setAttribute("stroke",n.fill[i]),a.setAttribute("fill","none"),Array.from(Array(o.length)).forEach(((t,i)=>{const n=o[i],r=o[(i+1)%o.length],c=l().hd.Dist(n,r),{strokeDasharray:d,strokeDashoffset:u}=Ni(c,s,{style:e}),h=document.createElementNS("http://www.w3.org/2000/svg","line");h.setAttribute("x1",n.x.toString()),h.setAttribute("y1",n.y.toString()),h.setAttribute("x2",r.x.toString()),h.setAttribute("y2",r.y.toString()),h.setAttribute("stroke-dasharray",d.toString()),h.setAttribute("stroke-dashoffset",u.toString()),a.appendChild(h)}));const c=Li({d:r?"M"+r[0]+"L"+r.slice(1)+"Z":"M"+o[0]+"L"+o.slice(1)+"Z",fill:t,color:i,colors:n});return ji(a,c)}({dash:s.dash,fill:s.fill,color:s.color,strokeWidth:o,outline:a,bgOutline:t,colors:i})}break}}if(s.text){const n=this.bounds(e),o={fontSize:E[e.props.size],fontFamily:t,textAlign:e.props.align,padding:16,lineHeight:N.lineHeight,fontStyle:"normal",fontWeight:"normal",width:Math.ceil(n.width),height:Math.ceil(n.height)},a=this.app.textMeasure.getTextLines({text:s.text,wrap:!0,...o}),l=document.createElementNS("http://www.w3.org/2000/svg","g"),c=ns(this.app,e),d=Ei(this.app,{...o,lines:a,strokeWidth:2,stroke:i.background,fill:i.background,width:c.w});d.setAttribute("transform",`translate(${(n.width-c.w)/2}, 0)`);const u=d.cloneNode(!0);if(u.setAttribute("fill",i.fill[e.props.labelColor]),u.setAttribute("stroke","none"),l.append(d),l.append(u),"g"===r.nodeName)return r.appendChild(l),r;{const e=document.createElementNS("http://www.w3.org/2000/svg","g");return e.appendChild(r),e.appendChild(l),e}}return r}onResize=(e,{initialBounds:t,handle:i,newPoint:n,scaleX:s,scaleY:o})=>{let r=t.width*s,a=t.height*o,c=0,d=0;if(e.props.text.trim()){let t=Math.max(Math.abs(r),ts),i=Math.max(Math.abs(a),ts);t<ts&&i===ts&&(t=ts),t===ts&&i<ts&&(i=ts);const n=ns(this.app,{...e,props:{...e.props,w:t,h:i}}),s=Math.max(Math.abs(r),n.w)*Math.sign(r),o=Math.max(Math.abs(a),n.h)*Math.sign(a);c=Math.abs(s)-Math.abs(r),d=Math.abs(o)-Math.abs(a),r=s,a=o}const u=new(l().hd)(0,0);s<0&&(u.x+=r),"left"!==i&&"top_left"!==i&&"bottom_left"!==i||(u.x+=s<0?c:-c),o<0&&(u.y+=a),"top"!==i&&"top_left"!==i&&"top_right"!==i||(u.y+=o<0?d:-d);const{x:h,y:p}=u.rot(e.rotation).add(n);return{x:h,y:p,props:{w:Math.max(Math.abs(r),1),h:Math.max(Math.abs(a),1),growY:0}}};onBeforeCreate=e=>{if(!e.props.text)return e.props.growY?{...e,props:{...e.props,growY:0}}:void 0;const t=e.props.h,i=ns(this.app,e).h;let n=null;return i>t?n=i-t:e.props.growY&&(n=0),null!==n?{...e,props:{...e.props,growY:n}}:void 0};onBeforeUpdate=(e,t)=>{const i=e.props.text.trim(),n=t.props.text.trim();if(i===n&&e.props.font===t.props.font&&e.props.size===t.props.size)return;if(i&&!n)return{...t,props:{...t.props,growY:0}};const s=e.props.w,o=e.props.h,r=ns(this.app,t),a=r.w,l=r.h;if(!i&&n&&1===n.length){let i=Math.max(s,a),n=Math.max(o,l);return e.props.w<ts&&e.props.h<ts&&(i=Math.max(i,ts),n=Math.max(n,ts),i=Math.max(i,n),n=Math.max(i,n)),{...t,props:{...t.props,w:i,h:n,growY:0}}}let c=null;return l>o?c=l-o:e.props.growY&&(c=0),null!==c?{...t,props:{...t.props,growY:c,w:a}}:a>e.props.w?{...t,props:{...t.props,w:a}}:void 0}}function ns(e,t){const i=t.props.text.trim();if(!i)return{w:0,h:0};const n=e.textMeasure.measureText({...N,text:"w",fontFamily:Z[t.props.font],fontSize:E[t.props.size],width:"fit-content",maxWidth:"100px"}),s=e.textMeasure.measureText({...N,text:i,fontFamily:Z[t.props.font],fontSize:E[t.props.size],width:"fit-content",minWidth:n.w+"px",maxWidth:Math.max(0,Math.ceil(n.w+{s:2,m:3.5,l:5,xl:10}[t.props.size]),Math.ceil(t.props.w-32))+"px"});return{w:s.w+32,h:s.h+32}}function ss(e,t){return[new(l().hd)(0,0),new(l().hd)(e,0),new(l().hd)(e,t),new(l().hd)(0,t),new(l().hd)(0,0),new(l().hd)(.5*e,.5*t),new(l().hd)(e,t),new(l().hd)(e,0),new(l().hd)(.5*e,.5*t),new(l().hd)(0,t)]}const os=h({type:"geo",getShapeUtil:()=>is,validator:n().NN,migrations:n().s4});class rs extends Pi{static type="group";hideSelectionBoundsBg=()=>!1;hideSelectionBoundsFg=()=>!0;canBind=()=>!1;defaultProps(){return{opacity:"1"}}getBounds(e){const t=this.app.getSortedChildIds(e.id);if(0===t.length)return new(l().Ax);const i=t.flatMap((e=>{const t=this.app.getShapeById(e);return this.app.getOutlineById(e).map((e=>l().cQ.applyToPoint(this.app.getTransform(t),e)))}));return l().Ax.FromPoints(i)}getCenter(e){return this.bounds(e).center}getOutline(e){return this.bounds(e).corners}render(e){const{erasingIdsSet:t,pageState:{hintingIds:i,focusLayerId:n},zoomLevel:o}=this.app,r=t.has(e.id),a=i.length>0&&i.some((t=>t!==e.id&&"group"===this.app.getShapeById(t)?.type));if(!r&&(e.id!==n||a))return null;const l=this.bounds(e);return(0,s.jsx)(u,{id:e.id,children:(0,s.jsx)(ls,{className:"rs-group",bounds:l,zoomLevel:o})})}indicator(e){const{camera:{z:t}}=this.app,i=this.bounds(e);return(0,s.jsx)(ls,{className:"",bounds:i,zoomLevel:t})}onChildrenChange=e=>{const t=this.app.getSortedChildIds(e.id);return 0===t.length?(this.app.pageState.focusLayerId===e.id&&this.app.popFocusLayer(),void this.app.deleteShapes([e.id])):1===t.length?(this.app.pageState.focusLayerId===e.id&&this.app.popFocusLayer(),this.app.reparentShapesById(t,e.parentId),void this.app.deleteShapes([e.id])):void 0}}const as=h({type:"group",getShapeUtil:()=>rs,validator:n().jr,migrations:n().gf});function ls({bounds:e,zoomLevel:t,className:i}){return(0,s.jsx)("g",{className:i,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round",children:e.sides.map(((e,i)=>{const{strokeDasharray:n,strokeDashoffset:o}=Ni(e[0].dist(e[1]),1/t,{style:"dashed",lengthRatio:4});return(0,s.jsx)("line",{x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y,strokeDasharray:n,strokeDashoffset:o},i)}))})}const cs=async e=>{const t=await(async e=>new Promise(((t,i)=>{const n=new Image;n.onload=()=>t(n),n.onerror=()=>i(new Error("Failed to load image")),n.crossOrigin="anonymous",n.src=e})))(e),i=document.createElement("canvas");i.width=t.width,i.height=t.height;const n=i.getContext("2d");if(n)return n.drawImage(t,0,0),i.toDataURL()};class ds extends gn{static type="image";isAspectRatioLocked=()=>!0;defaultProps(){return{opacity:"1",w:100,h:100,assetId:null,playing:!0,url:""}}render(e){const[t,i]=(0,a.useState)(""),n=me(),o=e.props.assetId?this.app.getAssetById(e.props.assetId):void 0,{w:r,h:l}=e.props;if((0,a.useEffect)((()=>{if(o?.props.src&&"mimeType"in o.props&&"image/gif"===o?.props.mimeType){let e=!1;return(async()=>{const t=await cs(o.props.src);e||t&&i(t)})(),()=>{e=!0}}}),[n,o?.props]),"bookmark"===o?.type)throw Error("Bookmark assets can't be rendered as images");const c=n&&(o?.props.mimeType?.includes("video")||o?.props.mimeType?.includes("gif"));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(dn,{id:e.id,children:(0,s.jsxs)("div",{className:"rs-image-container",children:[o?.props.src?(0,s.jsx)("div",{className:`rs-image rs-image-${e.id}`,style:{backgroundImage:`url(${!e.props.playing||c?t:o.props.src}`},draggable:!1}):(0,s.jsx)(Ln,{x:(r-38)/2,y:(l-38)/2}),o?.props.isAnimated&&!e.props.playing&&(0,s.jsx)("div",{className:"rs-image__meda-tag",children:"GIF"})]})}),"url"in e.props&&e.props.url&&(0,s.jsx)(hn,{url:e.props.url})]})}indicator(e){return(0,s.jsx)("rect",{width:(0,l().WM)(e.props.w),height:(0,l().WM)(e.props.h)})}async toSvg(e){const t=document.createElementNS("http://www.w3.org/2000/svg","g"),i=e.props.assetId?this.app.getAssetById(e.props.assetId):null;let n=i?.props.src||"";n&&n.startsWith("http")&&(n=await async function(e){const t=await fetch(e),i=await t.blob();return new Promise(((e,t)=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.onerror=t,n.readAsDataURL(i)}))}(n)||"");const s=document.createElementNS("http://www.w3.org/2000/svg","image");return s.setAttributeNS("http://www.w3.org/1999/xlink","href",n),s.setAttribute("width",e.props.w.toString()),s.setAttribute("height",e.props.h.toString()),t.appendChild(s),t}onDoubleClick=e=>{const t=e.props.assetId?this.app.getAssetById(e.props.assetId):void 0;if(!t)return;t.props.src&&"mimeType"in t.props&&"image/gif"===t.props.mimeType&&this.app.updateShapes([{type:"image",id:e.id,props:{playing:!e.props.playing}}])}}const us=h({type:"image",getShapeUtil:()=>ds,validator:n().$M,migrations:n().Uc});function hs(e){const{segments:t}=e,i=[];for(let n=0,s=t.length;n<s;n++){const e=t[n].lut,o=e.length-1;n>0?i.push(l().hd.Lrp(e[0],e[1],.25)):i.push(e[0]);for(let t=1;t<o;t++)i.push(e[t]);n<s-1?i.push(l().hd.Lrp(e[o-1],e[o],.75)):i.push(e[o])}return i}function ps(e){return{size:1.25*e,thinning:.4,streamline:0,smoothing:.5,simulatePressure:!0,last:!0}}function gs(e,t,i){const n=hs(t),s=ps(i);return(0,l().Km)(n,s)}function ms(e,t,i){const n=function(e,t,i){const n=ps(i);return(0,l().U$)((0,l().ao)(gs(0,t,i),n),n)}(0,t,i);return Fe(n)}function Is(e,t,i,n){switch(e.props.dash){case"draw":return function({shape:e,strokeWidth:t,spline:i,color:n}){const s=ms(0,i,t),o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("stroke-width","0"),o.setAttribute("stroke","none"),o.setAttribute("fill",n),o.setAttribute("d",s),o}({shape:e,strokeWidth:n,spline:t,color:i});case"solid":return function({strokeWidth:e,spline:t,color:i}){const{path:n}=t,s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("stroke-width",e.toString()),s.setAttribute("stroke",i),s.setAttribute("fill","none"),s.setAttribute("d",n),s}({strokeWidth:n,spline:t,color:i});default:return function({dash:e,strokeWidth:t,spline:i,color:n}){const{segments:s}=i,o=document.createElementNS("http://www.w3.org/2000/svg","g");return o.setAttribute("stroke",n),o.setAttribute("stroke-width",t.toString()),s.forEach(((i,n)=>{const r=document.createElementNS("http://www.w3.org/2000/svg","path"),{strokeDasharray:a,strokeDashoffset:l}=Ni(i.length,t,{style:e,start:n>0?"outset":"none",end:n<s.length-1?"outset":"none"});r.setAttribute("stroke-dasharray",a.toString()),r.setAttribute("stroke-dashoffset",l.toString()),r.setAttribute("d",i.path),r.setAttribute("fill","none"),o.appendChild(r)})),o}({strokeWidth:n,spline:t,dash:e.props.dash,color:i})}}const fs=new Y,ys=new Y;class bs extends Pi{static type="line";hideResizeHandles=()=>!0;hideRotateHandle=()=>!0;hideSelectionBoundsBg=()=>!0;hideSelectionBoundsFg=()=>!0;isClosed=()=>!1;defaultProps(){return{opacity:"1",dash:"draw",size:"m",color:"black",spline:"line",handles:{start:{id:"start",type:"vertex",canBind:!1,index:"a1",x:0,y:0},end:{id:"end",type:"vertex",canBind:!1,index:"a2",x:0,y:0}}}}getBounds(e){return Cs(e).bounds}getCenter(e){return this.bounds(e).center}getHandles(e){return ys.get(e.props,(()=>{const t=e.props.handles,i=Cs(e),n=Object.values(t).sort(Re),s=n.slice();for(let e=0;e<i.segments.length;e++){const t=i.segments[e].getPoint(.5),o=ze(n[e].index,n[e+1].index);s.push({id:`mid-${e}`,type:"create",index:o,x:t.x,y:t.y})}return s.sort(Re)}))}getOutline(e){return hs(Cs(e))}onResize=(e,t)=>{const{scaleX:i,scaleY:n}=t,s=(0,r().A4)(e.props.handles);return Object.values(e.props.handles).forEach((({id:e,x:t,y:o})=>{s[e].x=t*i,s[e].y=o*n})),{props:{handles:s}}};onHandleChange=(e,{handle:t})=>{const i=(0,r().A4)(e);switch(t.id){case"start":case"end":i.props.handles[t.id]={...i.props.handles[t.id],x:t.x,y:t.y};break;default:{const n="handle:"+t.index,s=e.props.handles[n];i.props.handles[n]=s?{...s,x:t.x,y:t.y}:{id:n,type:"vertex",canBind:!1,index:t.index,x:t.x,y:t.y};break}}return i};hitTestPoint(e,t){return(0,l().EC)(t,this.outline(e))}hitTestLineSegment(e,t,i){return null!==(0,l().NC)(t,i,this.outline(e))}render(e){const t=Cs(e),i=(0,W().h)("zoom",(()=>this.app.zoomLevel<.35),[]),n=this.app.getStrokeWidth(e.props.size),o=t.path,{dash:r,color:a}=e.props;return(0,s.jsxs)(u,{id:e.id,children:[(0,s.jsx)(Si,{d:o,fill:"none",color:a}),"draw"!==r||i?"solid"===r?(0,s.jsx)("path",{strokeWidth:n,stroke:"currentColor",fill:"none",d:o}):(0,s.jsx)("g",{stroke:"currentColor",strokeWidth:n,children:t.segments.map(((e,i)=>{const{strokeDasharray:o,strokeDashoffset:a}=Ni(e.length,n,{style:r,start:i>0?"outset":"none",end:i<t.segments.length-1?"outset":"none"});return(0,s.jsx)("path",{strokeDasharray:o,strokeDashoffset:a,d:e.path,fill:"none"},i)}))}):(0,s.jsx)("path",{d:ms(0,t,n),strokeWidth:1,stroke:"currentColor",fill:"currentColor"})]})}indicator(e){const t=this.app.getStrokeWidth(e.props.size),i=function(e,t,i){if("draw"===e.props.dash)return Ke(gs(0,t,i));return t.path}(e,Cs(e),t);return(0,s.jsx)("path",{d:i})}toSvg(e,t,i){const{color:n,size:s}=e.props,o=i.fill[n];return Is(e,Cs(e),o,this.app.getStrokeWidth(s))}}const ws=h({type:"line",getShapeUtil:()=>bs,validator:n().Cj,migrations:n().bT});function Cs(e){return fs.get(e.props,(()=>{const{spline:t,handles:i}=e.props,n=Object.values(i).sort(Re).map(l().hd.From);switch(t){case"cubic":return new(l().M8)(n,2===n.length?2:1.2,20);case"line":return new(l().He)(n)}}))}const Ms=200;class xs extends Pi{static type="note";canEdit=()=>!0;hideResizeHandles=()=>!0;hideSelectionBoundsBg=()=>!0;hideSelectionBoundsFg=()=>!0;defaultProps(){return{opacity:"1",color:"black",size:"m",text:"",font:"draw",align:"middle",growY:0,url:""}}getHeight(e){return Ms+e.props.growY}getBounds(e){const t=this.getHeight(e);return new(l().Ax)(0,0,Ms,t)}getOutline(e){return this.bounds(e).corners}getCenter(e){return new(l().hd)(100,this.getHeight(e)/2)}render(e){const{id:t,type:i,props:{color:n,font:o,size:r,align:a,text:l}}=e,c="black"===n?"yellow":n;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{style:{position:"absolute",width:Ms,height:this.getHeight(e)},children:(0,s.jsxs)("div",{className:"rs-note__container rs-hitarea-fill",style:{color:`var(--palette-${c})`,backgroundColor:`var(--palette-${c})`},children:[(0,s.jsx)("div",{className:"rs-note__scrim"}),(0,s.jsx)(Wn,{id:t,type:i,font:o,size:r,align:a,text:l,labelColor:"inherit",wrap:!0})]})}),"url"in e.props&&e.props.url&&(0,s.jsx)(hn,{url:e.props.url})]})}indicator(e){return(0,s.jsx)("rect",{rx:"7",width:(0,l().WM)(Ms),height:(0,l().WM)(this.getHeight(e))})}toSvg(e,t,i){const n=this.bounds(e),s=document.createElementNS("http://www.w3.org/2000/svg","g"),o="black"===e.props.color?"yellow":e.props.color,r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("rx","10"),r.setAttribute("width",Ms.toString()),r.setAttribute("height",n.height.toString()),r.setAttribute("fill",i.fill[o]),r.setAttribute("stroke",i.fill[o]),r.setAttribute("stroke-width","1"),s.appendChild(r);const a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("rx","10"),a.setAttribute("width",Ms.toString()),a.setAttribute("height",n.height.toString()),a.setAttribute("fill",i.background),a.setAttribute("opacity",".28"),s.appendChild(a);const l={fontSize:E[e.props.size],fontFamily:t,textAlign:e.props.align,width:n.width-34,height:n.height-34,padding:0,lineHeight:N.lineHeight,fontStyle:"normal",fontWeight:"normal"},c=this.app.textMeasure.getTextLines({text:e.props.text,wrap:!0,...l}),d=Ei(this.app,{lines:c,...l});return d.setAttribute("fill",i.text),d.setAttribute("transform","translate(17 17)"),s.appendChild(d),s}onBeforeCreate=e=>Ss(this.app,e,e.props.growY);onBeforeUpdate=(e,t)=>{if(e.props.text!==t.props.text||e.props.font!==t.props.font||e.props.size!==t.props.size)return Ss(this.app,t,e.props.growY)};onEditEnd=e=>{const{id:t,type:i,props:{text:n}}=e;n.trim()!==e.props.text&&this.app.updateShapes([{id:t,type:i,props:{text:n.trim()}}])}}const As=h({getShapeUtil:()=>xs,type:"note",validator:n().s3,migrations:n().fq});function Ss(e,t,i=0){const n=e.textMeasure.measureText({...N,text:t.props.text,fontFamily:Z[t.props.font],fontSize:E[t.props.size],width:"166px"}).h+34;let s=null;if(n>Ms?s=n-Ms:i&&(s=0),null!==s)return{...t,props:{...t.props,growY:s}}}const vs=new Y;class Ls extends Pi{static type="text";canEdit=()=>!0;isAspectRatioLocked=()=>!0;defaultProps(){return{opacity:"1",color:"black",size:"m",w:8,text:"",font:"draw",align:"middle",autoSize:!0,scale:1}}getMinDimensions(e){return vs.get(e.props,(e=>Ns(this.app,e)))}getBounds(e){const{scale:t}=e.props,{width:i,height:n}=this.getMinDimensions(e);return new(l().Ax)(0,0,i*t,n*t)}getOutline(e){const t=this.bounds(e);return[new(l().hd)(0,0),new(l().hd)(t.width,0),new(l().hd)(t.width,t.height),new(l().hd)(0,t.height)]}getCenter(e){const t=this.bounds(e);return new(l().hd)(t.width/2,t.height/2)}render(e){const{id:t,type:i,props:{text:n}}=e,{width:o,height:r}=this.getMinDimensions(e),{rInput:a,isEmpty:l,isEditing:c,isEditableFromHover:d,handleFocus:u,handleChange:h,handleKeyDown:p,handleBlur:g}=$i(t,i,n);return(0,s.jsx)(dn,{id:e.id,children:(0,s.jsxs)("div",{className:"rs-text-shape__wrapper rs-text-shadow","data-font":e.props.font,"data-align":e.props.align,"data-hastext":!l,"data-isediting":c||d,"data-textwrap":!0,style:{fontSize:D[e.props.size],lineHeight:D[e.props.size]*N.lineHeight+"px",transform:`scale(${e.props.scale})`,transformOrigin:"top left",width:Math.max(1,o),height:Math.max(D[e.props.size]*N.lineHeight,r)},children:[(0,s.jsx)("div",{className:"rs-text rs-text-content",dir:"ltr",children:n}),c||d?(0,s.jsx)("textarea",{ref:a,className:"rs-text rs-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:c,placeholder:"",spellCheck:"true",wrap:"off",dir:"ltr",datatype:"wysiwyg",defaultValue:n,onFocus:u,onChange:h,onKeyDown:p,onBlur:g,onTouchEnd:Di,onContextMenu:Di}):null]})})}indicator(e){const t=this.bounds(e);return(0,s.jsx)("rect",{width:(0,l().WM)(t.width),height:(0,l().WM)(t.height)})}toSvg(e,t,i){const n=this.bounds(e),s=e.props.text,o=n.width/(e.props.scale??1),r=n.height/(e.props.scale??1),a={fontSize:D[e.props.size],fontFamily:t,textAlign:e.props.align,width:o,height:r,padding:0,lineHeight:N.lineHeight,fontStyle:"normal",fontWeight:"normal"},l=this.app.textMeasure.getTextLines({text:s,wrap:!0,...a}),c=i.fill[e.props.color],d=document.createElementNS("http://www.w3.org/2000/svg","g"),u=Ei(this.app,{lines:l,...a,stroke:i.background,strokeWidth:2,fill:i.background,padding:0}),h=u.cloneNode(!0);return h.setAttribute("fill",c),h.setAttribute("stroke","none"),d.append(u),d.append(h),d}onResize=(e,t)=>{const{initialBounds:i,initialShape:n,scaleX:s,handle:o}=t;if("scale_shape"===t.mode||"right"!==o&&"left"!==o)return function(e,{initialBounds:t,scaleX:i,scaleY:n,newPoint:s}){const o=Math.max(.01,Math.min(Math.abs(i),Math.abs(n))),r=new(l().hd)(0,0);i<0&&(r.x=-t.width*o),n<0&&(r.y=-t.height*o);const{x:a,y:c}=l().hd.Add(s,r.rot(e.rotation));return{x:a,y:c,props:{scale:o*e.props.scale}}}(e,t);{const t=i.width;let r=t*s;const a=new(l().hd)(0,0);r=Math.max(1,Math.abs(r)),"left"===o?(a.x=t-r,s<0&&(a.x+=r)):s<0&&(a.x-=r);const{x:c,y:d}=a.rot(e.rotation).add(n);return{x:c,y:d,props:{w:r/n.props.scale,autoSize:!1}}}};onBeforeCreate=e=>{if(!e.props.autoSize)return;if(e.props.text.trim())return;const t=this.getMinDimensions(e);return{...e,x:e.x-t.width/2,y:e.y-t.height/2}};onEditEnd=e=>{const{id:t,type:i,props:{text:n}}=e,s=e.props.text.trim();0===s.length?this.app.deleteShapes([e.id]):s!==e.props.text&&this.app.updateShapes([{id:t,type:i,props:{text:n.trim()}}])};onBeforeUpdate=(e,t)=>{if(!t.props.autoSize)return;const i=e.props.size!==t.props.size||e.props.align!==t.props.align||e.props.font!==t.props.font||1!==e.props.scale&&1===t.props.scale,n=e.props.text!==t.props.text;if(!i&&!n)return;const s=this.getMinDimensions(e),o=Ns(this.app,t.props),r=s.width*e.props.scale,a=s.height*e.props.scale,c=o.width*t.props.scale,d=o.height*t.props.scale;let u;switch(t.props.align){case"middle":u=new(l().hd)((c-r)/2,n?0:(d-a)/2);break;case"end":u=new(l().hd)(c-r,n?0:(d-a)/2);break;default:if(n)break;u=new(l().hd)(0,(d-a)/2)}if(u){u.rot(t.rotation);const{x:e,y:i}=t;return{...t,x:e-u.x,y:i-u.y,props:{...t.props,w:c}}}return{...t,props:{...t.props,w:c}}};onDoubleClickEdge=e=>e.props.autoSize?1!==e.props.scale?{id:e.id,type:e.type,props:{scale:1}}:void 0:{id:e.id,type:e.type,props:{autoSize:!0}}}const js=h({type:"text",getShapeUtil:()=>Ls,validator:n().vy,migrations:n().E4});function Ns(e,t){const{font:i,text:n,autoSize:s,size:o,w:r}=t,a=D[o],l=s?"fit-content":Math.floor(Math.max(16,r))+"px",c=e.textMeasure.measureText({...N,text:n,fontFamily:Z[i],fontSize:a,width:l});return s&&(c.w+=1),{width:Math.max(16,c.w),height:Math.max(a,c.h)}}class Ds extends gn{static type="video";canEdit=()=>!0;isAspectRatioLocked=()=>!0;defaultProps(){return{opacity:"1",w:100,h:100,assetId:null,time:0,playing:!0,url:""}}render(e){return(0,s.jsx)(ks,{shape:e,videoUtil:this})}indicator(e){return(0,s.jsx)("rect",{width:(0,l().WM)(e.props.w),height:(0,l().WM)(e.props.h)})}toSvg(e){const t=document.createElementNS("http://www.w3.org/2000/svg","g"),i=document.createElementNS("http://www.w3.org/2000/svg","image");return i.setAttributeNS("http://www.w3.org/1999/xlink","href",function(e){const t=e.split(":")[1],i=document.querySelector(`.rs-video-shape-${t}`);if(i){const e=document.createElement("canvas");return e.width=i.videoWidth,e.height=i.videoHeight,e.getContext("2d").drawImage(i,0,0),e.toDataURL("image/png")}throw new Error("Video with id "+t+" not found")}(e.id)),i.setAttribute("width",e.props.w.toString()),i.setAttribute("height",e.props.h.toString()),t.appendChild(i),t}}const Es=h({type:"video",getShapeUtil:()=>Ds,validator:n().hu,migrations:n().w9});const ks=(0,W().u4)((function(e){const{shape:t,videoUtil:i}=e,n=i.app.getBounds(t).w*i.app.zoomLevel>=110,o=t.props.assetId?i.app.getAssetById(t.props.assetId):null,{w:r,h:l,time:c,playing:d}=t.props,u=yi(t.id),h=me(),p=a.useRef(null),g=a.useCallback((e=>{const n=e.currentTarget;i.app.updateShapes([{type:"video",id:t.id,props:{playing:!0,time:n.currentTime}}])}),[t.id,i.app]),m=a.useCallback((e=>{const n=e.currentTarget;i.app.updateShapes([{type:"video",id:t.id,props:{playing:!1,time:n.currentTime}}])}),[t.id,i.app]),I=a.useCallback((e=>{const n=e.currentTarget;u&&i.app.updateShapes([{type:"video",id:t.id,props:{time:n.currentTime}}])}),[u,t.id,i.app]),[f,y]=a.useState(!1),b=a.useCallback((e=>{const t=e.currentTarget;c!==t.currentTime&&(t.currentTime=c),d||t.pause(),y(!0)}),[d,c]);return a.useEffect((()=>{const e=p.current;e&&f&&!u&&c!==e.currentTime&&(e.currentTime=c)}),[u,f,c]),a.useEffect((()=>{if(h){const e=p.current;e.pause(),e.currentTime=0}}),[p,h]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(dn,{id:t.id,children:(0,s.jsx)("div",{className:"rs-counter-scaled",children:o?.props.src?(0,s.jsx)("video",{ref:p,className:`rs-video rs-video-shape-${t.id.split(":")[1]} rs-hitarea-stroke`,width:"100%",height:"100%",draggable:!1,playsInline:!0,autoPlay:!0,muted:!0,loop:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:u&&n,onPlay:g,onPause:m,onTimeUpdate:I,onLoadedData:b,hidden:!f,children:(0,s.jsx)("source",{src:o.props.src})}):(0,s.jsx)(Ln,{x:(r-38)/2,y:(l-38)/2})})}),"url"in t.props&&t.props.url&&(0,s.jsx)(hn,{url:t.props.url})]})}));class Zs{static default=new Zs({});storeSchema;shapes;TLShape;tools;constructor({shapes:e=[],tools:t=[],allowUnknownShapes:i=!1}){this.tools=t;const s=[Sn,js,ws,cn,us,Es,os,As,as,In,Dn,Tn,...e];this.shapes=s;const r=new Set;for(const n of s){if(r.has(n.type))throw new Error(`Shape type ${n.type} is already defined`);r.add(n.type)}const a=(0,o().ht)({currentVersion:n().Nr.currentVersion,firstVersion:n().Nr.firstVersion,migrators:n().Nr.migrators,subTypeKey:"type",subTypeMigrations:Object.fromEntries(s.map((e=>[e.type,e.migrations])))});let l=d().T.union("type",{...Object.fromEntries(s.map((e=>[e.type,e.validator])))});i&&(l=l.validateUnknownVariants((e=>e)));const c=(0,o().WE)("shape",{migrations:a,validator:d().T.model("shape",l)}).withDefaultProperties((()=>({x:0,y:0,rotation:0,isLocked:!1})));this.TLShape=c,this.storeSchema=o().fX.create({asset:n().xl,camera:n().Ms,document:n()._4,instance:n().ko,instance_page_state:n().wO,page:n()._P,shape:c,user:n().i5,user_document:n().Vb,user_presence:n().dV},{snapshotMigrations:n().vW,onValidationFailure:n().zq,ensureStoreIsUsable:n().uK})}createStore(e){let t=e.initialData;return t&&(t=(0,n().jU)(t)),new(o().il)({schema:this.storeSchema,initialData:t,props:{userId:e?.userId??n().i5.createId(),instanceId:e?.instanceId??n().ko.createId(),documentId:n().yI}})}}const Ts=(e,t,i)=>{for(;!n()._P.isId(i.parentId);){const t=e.get(i.parentId);if(!t)return!1;i=t}return i.parentId===t},Ws={top:10,left:10,bottom:10,right:10};function zs(e){const t=e.getContainer(),i=t.querySelector('*[data-tldraw-area="active-drawing"]'),n={...Ws,width:0,height:0};if(i&&t){const e=t.getBoundingClientRect(),s=i.getBoundingClientRect();n.top=s.top,n.left=s.left,n.bottom=e.height-s.bottom,n.right=e.width-s.right}return n.width=e.viewportScreenBounds.width-n.left-n.right,n.height=e.viewportScreenBounds.height-n.top-n.bottom,n}class Ps{constructor(e){this.app=e,window.addEventListener("resize",this.updateOffsets),this.app.disposables.add(this.dispose)}offsets=(0,c().eU)("activeAreaOffsets",Ws);updateOffsets=()=>{const e=function(e){const t=zs(e),i=e.camera.z;return t.left/=i,t.right/=i,t.top/=i,t.bottom/=i,t.width/=i,t.height/=i,t}(this.app);this.offsets.set(e)};dispose=()=>{window.addEventListener("resize",this.updateOffsets)}}class Ys{constructor(e){this.app=e}state=(0,c().eU)("camera state","idle");timeoutRemaining=0;decay=e=>{this.timeoutRemaining-=e,this.timeoutRemaining<=0&&(this.state.set("idle"),this.app.off("tick",this.decay),this.app.updateCullingBounds())};tick=()=>{this.timeoutRemaining=12,"idle"===this.state.__unsafe__getWithoutCapture()&&(this.state.set("moving"),this.app.on("tick",this.decay))}}class Os{constructor(e){this.app=e}_clickId="";_clickTimeout;_clickScreenPoint;_previousScreenPoint;_getClickTimeout=(e,t=ce())=>{this._clickId=t,clearTimeout(this._clickTimeout),this._clickTimeout=setTimeout((()=>{if(this._clickState===e&&this._clickId===t){switch(this._clickState){case"pendingTriple":this.app.dispatch({...this.lastPointerInfo,type:"click",name:"double_click",phase:"settle"});break;case"pendingQuadruple":this.app.dispatch({...this.lastPointerInfo,type:"click",name:"triple_click",phase:"settle"});break;case"pendingOverflow":this.app.dispatch({...this.lastPointerInfo,type:"click",name:"quadruple_click",phase:"settle"})}this._clickState="idle"}}),"idle"===e||"pendingDouble"===e?450:200)};_clickState="idle";get clickState(){return this._clickState}lastPointerInfo={};transformPointerDownEvent=e=>{if(!this._clickState)return e;switch(this._clickScreenPoint=l().hd.From(e.point),this._previousScreenPoint&&this._previousScreenPoint.dist(this._clickScreenPoint)>40&&(this._clickState="idle"),this._previousScreenPoint=this._clickScreenPoint,this.lastPointerInfo=e,this._clickState){case"idle":return this._clickState="pendingDouble",this._clickTimeout=this._getClickTimeout(this._clickState),e;case"pendingDouble":return this._clickState="pendingTriple",this._clickTimeout=this._getClickTimeout(this._clickState),{...e,type:"click",name:"double_click",phase:"down"};case"pendingTriple":return this._clickState="pendingQuadruple",this._clickTimeout=this._getClickTimeout(this._clickState),{...e,type:"click",name:"triple_click",phase:"down"};case"pendingQuadruple":return this._clickState="pendingOverflow",this._clickTimeout=this._getClickTimeout(this._clickState),{...e,type:"click",name:"quadruple_click",phase:"down"};case"pendingOverflow":return this._clickState="overflow",this._clickTimeout=this._getClickTimeout(this._clickState),e;default:return this._clickTimeout=this._getClickTimeout(this._clickState),e}};transformPointerUpEvent=e=>{if(!this._clickState)return e;switch(this._clickScreenPoint=l().hd.From(e.point),this._clickState){case"pendingTriple":return{...this.lastPointerInfo,type:"click",name:"double_click",phase:"up"};case"pendingQuadruple":return{...this.lastPointerInfo,type:"click",name:"triple_click",phase:"up"};case"pendingOverflow":return{...this.lastPointerInfo,type:"click",name:"quadruple_click",phase:"up"};default:return e}};cancelDoubleClickTimeout=()=>{this._clickTimeout=clearTimeout(this._clickTimeout),this._clickState="idle"};handleMove=()=>{"idle"!==this._clickState&&this._clickScreenPoint&&this._clickScreenPoint.dist(this.app.inputs.currentScreenPoint)>4&&this.cancelDoubleClickTimeout()}}class Rs{constructor(e){this.app=e,this.rebind(),this.app.disposables.add(this.dispose)}_currentMM;rebind(){this.dispose(),this._currentMM=this.getMedia(),this._currentMM?.addEventListener("change",this.updateDevicePixelRatio)}dpr=(0,c().eU)("devicePixelRatio","undefined"==typeof window?1:window.devicePixelRatio);getMedia(){if(window.matchMedia)return matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`)}updateDevicePixelRatio=()=>{this.dpr.set(window.devicePixelRatio),this.rebind()};dispose=()=>{this._currentMM?.removeEventListener("change",this.updateDevicePixelRatio)}}class Gs{constructor(e){this.app=e,e.disposables.add(this.dispose)}prevDroppingShapeId=null;currDroppingShapeId=null;droppingNodeTimer=null;updateDroppingNode(e,t){if(null===this.droppingNodeTimer){const{currentPagePoint:i}=this.app.inputs;this.currDroppingShapeId=this.app.getDroppingShape(i,e)?.id??null,this.setDragTimer(e,1e3,t)}else this.app.inputs.pointerVelocity.len()>.5&&(clearInterval(this.droppingNodeTimer),this.setDragTimer(e,100,t))}setDragTimer(e,t,i){this.droppingNodeTimer=setTimeout((()=>{this.app.batch((()=>{this.handleDrag(e,i)})),this.droppingNodeTimer=null}),t)}handleDrag(e,t){const{currentPagePoint:i}=this.app.inputs;e=(0,r().oE)(e.map((e=>this.app.getShapeById(e.id))));const n=this.app.getDroppingShape(i,e)?.id??null;n!==this.currDroppingShapeId&&(this.prevDroppingShapeId=this.currDroppingShapeId,this.currDroppingShapeId=n);const{prevDroppingShapeId:s}=this;if(n===s)return;const o=s&&this.app.getShapeById(s),a=n&&this.app.getShapeById(n);if(this.prevDroppingShapeId=this.currDroppingShapeId,o&&this.app.getShapeUtil(o).onDragShapesOut?.(o,e),a){const t=this.app.getShapeUtil(a).onDragShapesOver?.(a,e);t&&t.shouldHint&&this.app.setHintingIds([a.id])}else this.app.setHintingIds([]);t?.()}dropShapes(e){const{currDroppingShapeId:t}=this;if(this.handleDrag(e),t){const i=this.app.getShapeById(t);if(!i)return;this.app.getShapeUtil(i).onDropShapesOver?.(i,e)}}clear(){this.prevDroppingShapeId=null,this.currDroppingShapeId=null,null!==this.droppingNodeTimer&&clearInterval(this.droppingNodeTimer),this.droppingNodeTimer=null,this.app.setHintingIds([])}dispose=()=>{this.clear()}}function _s(e){if(e){let t=Js;for(;e.length;)t=t.push(e.pop());return t}return Js}class Bs{length=0;head=null;tail=this;push(e){return new Hs(e,this)}toArray(){return c().Ml}[Symbol.iterator](){return{next:()=>({value:void 0,done:!0})}}}const Js=new Bs;class Hs{constructor(e,t){this.head=e,this.tail=t,this.length=t.length+1}length;push(e){return new Hs(e,this)}toArray(){return Array.from(this)}[Symbol.iterator](){let e=this;return{next(){if(e.length){const t=e.head;return e=e.tail,{value:t,done:!1}}return{value:void 0,done:!0}}}}}class Vs{constructor(e,t,i){this.ctx=e,this.onBatchComplete=t,this.annotateError=i}_undos=(0,c().eU)("HistoryManager.undos",_s());_redos=(0,c().eU)("HistoryManager.redos",_s());_batchDepth=0;_commands={};get numUndos(){return this._undos.value.length}get numRedos(){return this._redos.value.length}createCommand=(e,t,i)=>{if(this._commands[e])throw new Error(`Duplicate command: ${e}`);this._commands[e]=i;const n=(...s)=>{if(!this._batchDepth)return this.batch((()=>n(...s))),this.ctx;const r=t(...s);if(!r)return this.ctx;const{data:a,ephemeral:l,squashing:c,preservesRedoStack:d}=r;if(this.ignoringUpdates(((e,t)=>(i.do(a),{undos:e,redos:t}))),!l){const t=this._undos.value.head;c&&t&&"command"===t.type&&t.name===e&&t.preservesRedoStack===d?this._undos.update((e=>e.tail.push({...t,id:ce(),data:(0,o().fO)(i.squash(t.data,a))}))):this._undos.update((t=>t.push({type:"command",name:e,data:(0,o().fO)(a),id:ce(),preservesRedoStack:d}))),r.preservesRedoStack||this._redos.set(_s()),this.ctx.emit("change-history")}return this.ctx};return n};batch=e=>{try{this._batchDepth++,1===this._batchDepth?(0,c().hL)((()=>{const t=this._undos.value.head?.id;e(),t!==this._undos.value.head?.id&&this.onBatchComplete()})):e()}catch(t){throw this.annotateError(t),t}finally{this._batchDepth--}return this};ignoringUpdates=e=>{let t=this._undos.value,i=this._redos.value;this._undos.set(_s()),this._redos.set(_s());try{({undos:t,redos:i}=(0,c().hL)((()=>e(t,i))))}finally{this._undos.set(t),this._redos.set(i)}};_undo=({pushToRedoStack:e,toMark:t})=>(this.ignoringUpdates(((i,n)=>{if(0===i.length)return this.ctx.emit("change-history"),{undos:i,redos:n};for(;"STOP"===i.head?.type;){const s=i.head;if(i=i.tail,e&&(n=n.push(s)),s.id===t)return this.ctx.emit("change-history"),{undos:i,redos:n}}if(0===i.length)return this.ctx.emit("change-history"),{undos:i,redos:n};for(;i.head;){const s=i.head;if(i=i.tail,e&&(n=n.push(s)),"STOP"===s.type){if(s.onUndo&&(!t||s.id===t))return this.ctx.emit("change-history"),{undos:i,redos:n}}else{this._commands[s.name].undo(s.data)}}return this.ctx.emit("change-history"),{undos:i,redos:n}})),this);undo=()=>(this._undo({pushToRedoStack:!0}),this);redo=()=>(this.ignoringUpdates(((e,t)=>{if(0===t.length)return this.ctx.emit("change-history"),{undos:e,redos:t};for(;"STOP"===t.head?.type;)e=e.push(t.head),t=t.tail;if(0===t.length)return this.ctx.emit("change-history"),{undos:e,redos:t};for(;t.head;){const i=t.head;if(e=e.push(t.head),t=t.tail,"STOP"===i.type){if(i.onRedo)break}else{const e=this._commands[i.name];e.redo?e.redo(i.data):e.do(i.data)}}return this.ctx.emit("change-history"),{undos:e,redos:t}})),this);bail=()=>(this._undo({pushToRedoStack:!1}),this);bailToMark=e=>(this._undo({pushToRedoStack:!1,toMark:e}),this);mark=(e=ce(),t=!0,i=!0)=>{const n=this._undos.value.head;return n&&"STOP"===n.type&&n.id===e&&n.onUndo===t&&n.onRedo===i?n.id:(this._undos.update((n=>n.push({type:"STOP",id:e,onUndo:t,onRedo:i}))),e)};clear(){this._undos.set(_s()),this._redos.set(_s())}}class Us{state;points;size;color;opacity;onUpdate;onComplete;prev=null;next=null;constructor(e){const{size:t=20,color:i="accent",opacity:n=.8,onComplete:s,onUpdate:o}=e;this.onUpdate=o,this.onComplete=s,this.size=t,this.color=i,this.opacity=n,this.points=[],this.state="starting",this.prev=null,this.next=null,this.resume()}resume=()=>{this.state="active"};pause=()=>{this.state="starting"};stop=()=>{this.state="stopping"};addPoint=(e,t)=>{const{prev:i}=this,n={x:e,y:t,z:.5};i&&l().hd.Dist(i,n)<1||(this.next=n)};getScribble(){return{state:this.state,size:this.size,color:this.color,opacity:this.opacity,points:[...this.points]}}updateScribble(){this.onUpdate(this.getScribble())}timeoutMs=0;tick=e=>{this.timeoutMs+=e,this.timeoutMs>=16&&(this.timeoutMs=0);const{timeoutMs:t,state:i,prev:n,next:s,points:o}=this;switch(i){case"active":s&&s!==n?(this.prev=s,o.push(s),o.length>8&&o.shift(),this.updateScribble()):0===t&&o.length>1&&(o.shift(),this.updateScribble());break;case"stopping":if(0===t){if(1===o.length)return this.state="paused",void this.onComplete();this.size*=.9,o.shift(),this.updateScribble()}}}}var Xs=Object.defineProperty,Fs=Object.getOwnPropertyDescriptor,Ks=(e,t,i,n)=>{for(var s,o=n>1?void 0:n?Fs(t,i):t,r=e.length-1;r>=0;r--)(s=e[r])&&(o=(n?s(t,i,o):s(o))||o);return n&&o&&Xs(t,i,o),o};const Qs=e=>Math.round(e*10**8)/10**8;function $s(e,t,i,n,s){const o=e.filter((e=>("forward"===n?e.startNode.id===t:e.endNode.id===t)&&Qs(e.length)===Qs(i)&&(0,l().$C)(e.breadthIntersection[0],e.breadthIntersection[1],s[0],s[1])));if(0===o.length)return[];const r=new Set;for(const a of o){const t="forward"===n?a.endNode.id:a.startNode.id;r.has(t)||(r.add(t),o.push(...$s(e,t,i,n,(0,l().$C)(a.breadthIntersection[0],a.breadthIntersection[1],s[0],s[1]))))}return o}class qs{constructor(e){this.app=e}_snapLines=(0,c().eU)("snapLines",void 0);get lines(){return this._snapLines.value??c().Ml}clear(){this.lines.length&&this._snapLines.set(void 0)}setLines(e){this._snapLines.set(e)}get snapPointsCache(){return this.app.store.createComputedCache("snapPoints",(e=>{const t=this.app.getPageTransformById(e.id);if(!t)return;return this.app.getShapeUtil(e).snapPoints(e).map(((i,n)=>{const{x:s,y:o}=l().cQ.applyToPoint(t,i);return{x:s,y:o,id:`${e.id}:${n}`}}))}))}get snapThreshold(){return 8/this.app.camera.z}get visibleShapesNotInSelection(){const e=this.app.selectedIds,t=new Set,i=n=>{const s=this.app.getSortedChildIds(n);for(const o of s){const n=this.app.getShapeById(o);n&&("arrow"!==n.type&&(e.includes(o)||this.app.isShapeInViewport(n.id)&&("group"!==n.type?(t.add({id:n.id,pageBounds:this.app.getPageBoundsById(n.id)}),"frame"!==n.type&&i(o)):i(o))))}},n=this.app.findCommonAncestor((0,r().oE)(e.map((e=>this.app.getShapeById(e)))),(e=>"frame"===e.type));return i(n??this.app.currentPageId),t}get visibleSnapPointsNotInSelection(){const e=[];for(const t of this.visibleShapesNotInSelection){const i=this.snapPointsCache.get(t.id);i&&e.push(...i)}return e}get visibleGaps(){const e=[],t=[],i=[...this.visibleShapesNotInSelection].sort(((e,t)=>e.pageBounds.minX-t.pageBounds.minX));for(let s=0;s<i.length;s++){const t=i[s];for(let n=s+1;n<i.length;n++){const s=i[n];t.pageBounds.maxX<s.pageBounds.minX&&(0,l().g6)(t.pageBounds.minY,t.pageBounds.maxY,s.pageBounds.minY,s.pageBounds.maxY)&&e.push({startNode:t,endNode:s,startEdge:[new(l().hd)(t.pageBounds.maxX,t.pageBounds.minY),new(l().hd)(t.pageBounds.maxX,t.pageBounds.maxY)],endEdge:[new(l().hd)(s.pageBounds.minX,s.pageBounds.minY),new(l().hd)(s.pageBounds.minX,s.pageBounds.maxY)],length:s.pageBounds.minX-t.pageBounds.maxX,breadthIntersection:(0,l().$C)(t.pageBounds.minY,t.pageBounds.maxY,s.pageBounds.minY,s.pageBounds.maxY)})}}const n=i.slice(0).sort(((e,t)=>e.pageBounds.minY-t.pageBounds.minY));for(let s=0;s<n.length;s++){const e=n[s];for(let i=s+1;i<n.length;i++){const s=n[i];e.pageBounds.maxY<s.pageBounds.minY&&(0,l().g6)(e.pageBounds.minX,e.pageBounds.maxX,s.pageBounds.minX,s.pageBounds.maxX)&&t.push({startNode:e,endNode:s,startEdge:[new(l().hd)(e.pageBounds.minX,e.pageBounds.maxY),new(l().hd)(e.pageBounds.maxX,e.pageBounds.maxY)],endEdge:[new(l().hd)(s.pageBounds.minX,s.pageBounds.minY),new(l().hd)(s.pageBounds.maxX,s.pageBounds.minY)],length:s.pageBounds.minY-e.pageBounds.maxY,breadthIntersection:(0,l().$C)(e.pageBounds.minX,e.pageBounds.maxX,s.pageBounds.minX,s.pageBounds.maxX)})}}return{horizontal:e,vertical:t}}snapTranslate({lockedAxis:e,initialSelectionPageBounds:t,initialSelectionSnapPoints:i,dragDelta:n}){const s="x"===e,o="y"===e,r=t.clone().translate(n),a=i.map((({x:e,y:t},i)=>({id:"selection:"+i,x:e+n.x,y:t+n.y}))),c=this.visibleSnapPointsNotInSelection,d=[],u=[],h=new(l().hd)(this.snapThreshold,this.snapThreshold);this.findPointSnaps({minOffset:h,nearestSnapsX:d,nearestSnapsY:u,otherNodeSnapPoints:c,selectionSnapPoints:a}),this.findGapSnaps({selectionPageBounds:r,nearestSnapsX:d,nearestSnapsY:u,minOffset:h});const p=new(l().hd)(s?0:d[0]?.nudge??0,o?0:u[0]?.nudge??0);h.x=0,h.y=0,d.length=0,u.length=0,a.forEach((e=>{e.x+=p.x,e.y+=p.y})),r.translate(p),this.findPointSnaps({minOffset:h,nearestSnapsX:d,nearestSnapsY:u,otherNodeSnapPoints:c,selectionSnapPoints:a}),this.findGapSnaps({selectionPageBounds:r,nearestSnapsX:d,nearestSnapsY:u,minOffset:h});const g=this.getPointSnapLines({nearestSnapsX:d,nearestSnapsY:u}),m=this.getGapSnapLines({selectionPageBounds:r,nearestSnapsX:d,nearestSnapsY:u});return this._snapLines.set([...m,...g]),{nudge:p}}snapLineHandleTranslate({lineId:e,handleId:t,handlePoint:i}){const n=this.app.getShapeById(e);if(!n)return{nudge:new(l().hd)(0,0)};const s=this.app.getShapeUtilByDef(ws).handles(n).sort(Re);if(s.length<3)return{nudge:new(l().hd)(0,0)};const o=s.findIndex((e=>e.id===t)),r="vertex"===s[o].type?o/2:(o+1)/2,a=Cs(n),c=this.app.getPageTransform(n),d=a.segments.slice(0,Math.max(0,r-1)).map((e=>l().cQ.applyToPoints(c,e.lut))),u=a.segments.slice(r+1).map((e=>l().cQ.applyToPoints(c,e.lut)));return this.snapHandleTranslate({handlePoint:i,additionalOutlines:[...d,...u]})}snapHandleTranslate({handlePoint:e,additionalOutlines:t=[]}){const i=this.visibleShapesNotInSelection,n=[];for(const a of i){const e=this.app.getShapeById(a.id);if("text"===e.type||"icon"===e.type)continue;const t=(0,r().A4)(this.app.getOutlineById(a.id)),i=this.app.getShapeUtil(e).isClosed?.(e);i&&t.push(t[0]),n.push(l().cQ.applyToPoints(this.app.getPageTransformById(e.id),t))}let s=this.snapThreshold,o=null;for(const r of[...n,...t])for(let t=0;t<r.length-1;t++){const i=r[t],n=r[t+1],a=l().hd.DistanceToLineSegment(i,n,e);isNaN(a)||a<s&&(s=a,o=l().hd.NearestPointOnLineSegment(i,n,e))}if(o){const t=[];return t.push({id:ce(),type:"points",points:[o]}),this._snapLines.set(t),{nudge:l().hd.Sub(o,e)}}return{nudge:new(l().hd)(0,0)}}snapResize({initialSelectionPageBounds:e,dragDelta:t,handle:i,isAspectRatioLocked:n,isResizingFromCenter:s}){const{box:o,scaleX:r,scaleY:a}=l().Ax.Resize(e,i,s?2*t.x:t.x,s?2*t.y:t.y,n);let c=i;r<0&&(c=(0,l().mB)(c)),a<0&&(c=(0,l().tU)(c)),s&&(o.center=e.center);const d="top"===c||"bottom"===c,u="left"===c||"right"===c,h=eo(c,o),p=this.visibleSnapPointsNotInSelection,g=[],m=[],I=new(l().hd)(this.snapThreshold,this.snapThreshold);this.findPointSnaps({minOffset:I,nearestSnapsX:g,nearestSnapsY:m,otherNodeSnapPoints:p,selectionSnapPoints:h});const f=new(l().hd)(d?0:g[0]?.nudge??0,u?0:m[0]?.nudge??0);if(n&&(0,l().UB)(c)&&0!==f.len()){const t=g.length&&m.length?Math.abs(f.x)<Math.abs(f.y)?"x":"y":g.length?"x":"y",i=e.aspectRatio;"x"===t?(m.length=0,f.y=f.x/i,"bottom_left"!==c&&"top_right"!==c||(f.y=-f.y)):(g.length=0,f.x=f.y*i,"bottom_left"!==c&&"top_right"!==c||(f.x=-f.x))}const y=l().hd.Add(t,f),{box:b}=l().Ax.Resize(e,i,s?2*y.x:y.x,s?2*y.y:y.y,n);s&&(b.center=e.center);const w=eo("any",b);g.length=0,m.length=0,I.x=0,I.y=0,this.findPointSnaps({minOffset:I,nearestSnapsX:g,nearestSnapsY:m,otherNodeSnapPoints:p,selectionSnapPoints:w});const C=this.getPointSnapLines({nearestSnapsX:g,nearestSnapsY:m});return this._snapLines.set([...C]),{nudge:f}}findPointSnaps({selectionSnapPoints:e,otherNodeSnapPoints:t,minOffset:i,nearestSnapsX:n,nearestSnapsY:s}){for(const o of e)for(const e of t){const t=l().hd.Sub(o,e),r=Math.abs(t.x),a=Math.abs(t.y);Qs(r)<=Qs(i.x)&&(Qs(r)<Qs(i.x)&&(n.length=0),n.push({type:"points",points:{thisPoint:o,otherPoint:e},nudge:e.x-o.x}),i.x=r),Qs(a)<=Qs(i.y)&&(Qs(a)<Qs(i.y)&&(s.length=0),s.push({type:"points",points:{thisPoint:o,otherPoint:e},nudge:e.y-o.y}),i.y=a)}}findGapSnaps({selectionPageBounds:e,minOffset:t,nearestSnapsX:i,nearestSnapsY:n}){for(const s of this.visibleGaps.horizontal){if(!(0,l().g6)(s.breadthIntersection[0],s.breadthIntersection[1],e.minY,e.maxY))continue;const n=s.startEdge[0].x+s.length/2-e.center.x;if(s.length>e.width&&Qs(Math.abs(n))<=Qs(t.x)){Qs(Math.abs(n))<Qs(t.x)&&(i.length=0),t.x=Math.abs(n);const e={type:"gap_center",gap:s,nudge:n},o=i.find((({type:e})=>"gap_center"===e)),r=o&&(0,l().$C)(s.breadthIntersection[0],s.breadthIntersection[1],o.gap.breadthIntersection[0],o.gap.breadthIntersection[1]);o&&o.gap.length>s.length&&r?i[i.indexOf(o)]=e:o&&r||i.push(e)}const o=s.startNode.pageBounds.minX-s.length-e.maxX;Qs(Math.abs(o))<=Qs(t.x)&&(Qs(Math.abs(o))<Qs(t.x)&&(i.length=0),t.x=Math.abs(o),i.push({type:"gap_duplicate",gap:s,protrusionDirection:"left",nudge:o}));const r=s.endNode.pageBounds.maxX+s.length-e.minX;Qs(Math.abs(r))<=Qs(t.x)&&(Qs(Math.abs(r))<Qs(t.x)&&(i.length=0),t.x=Math.abs(r),i.push({type:"gap_duplicate",gap:s,protrusionDirection:"right",nudge:r}))}for(const s of this.visibleGaps.vertical){if(!(0,l().g6)(s.breadthIntersection[0],s.breadthIntersection[1],e.minX,e.maxX))continue;const i=s.startEdge[0].y+s.length/2-e.center.y;if(s.length>e.height&&Qs(Math.abs(i))<=Qs(t.y)){Qs(Math.abs(i))<Qs(t.y)&&(n.length=0),t.y=Math.abs(i);const e={type:"gap_center",gap:s,nudge:i},o=n.find((({type:e})=>"gap_center"===e)),r=o&&(0,l().g6)(o.gap.breadthIntersection[0],o.gap.breadthIntersection[1],s.breadthIntersection[0],s.breadthIntersection[1]);o&&o.gap.length>s.length&&r?n[n.indexOf(o)]=e:o&&r||n.push(e);continue}const o=s.startNode.pageBounds.minY-s.length-e.maxY;Qs(Math.abs(o))<=Qs(t.y)&&(Qs(Math.abs(o))<Qs(t.y)&&(n.length=0),t.y=Math.abs(o),n.push({type:"gap_duplicate",gap:s,protrusionDirection:"top",nudge:o}));const r=s.endNode.pageBounds.maxY+s.length-e.minY;Qs(Math.abs(r))<=Qs(t.y)&&(Qs(Math.abs(r))<Qs(t.y)&&(n.length=0),t.y=Math.abs(r),n.push({type:"gap_duplicate",gap:s,protrusionDirection:"bottom",nudge:r}))}}getPointSnapLines({nearestSnapsX:e,nearestSnapsY:t}){const i={},n={},s=[];if(e.length>0)for(const o of e)if("points"===o.type){const e=Qs(o.points.otherPoint.x);i[e]||(i[e]=[]),i[e].push(o.points)}if(t.length>0)for(const o of t)if("points"===o.type){const e=Qs(o.points.otherPoint.y);n[e]||(n[e]=[]),n[e].push(o.points)}for(const[o,a]of Object.entries(i).concat(Object.entries(n)))s.push({id:ce(),type:"points",points:(0,r().Qq)(a.map((e=>l().hd.From(e.otherPoint))).concat(a.map((e=>l().hd.From(e.thisPoint)))),((e,t)=>e.equals(t)))});return s}getGapSnapLines({selectionPageBounds:e,nearestSnapsX:t,nearestSnapsY:i}){const n={top:e.sides[0],right:e.sides[1],bottom:[e.corners[3],e.corners[2]],left:[e.corners[0],e.corners[3]]},s=[];if(t.length>0)for(const o of t){if("gap_center"===o.type){const t=(o.gap.length-e.width)/2,i=(0,l().$C)(o.gap.breadthIntersection[0],o.gap.breadthIntersection[1],e.minY,e.maxY);s.push({type:"gaps",direction:"horizontal",id:ce(),gaps:[...$s(this.visibleGaps.horizontal,o.gap.startNode.id,t,"backward",i),{startEdge:o.gap.startEdge,endEdge:n.left},{startEdge:n.right,endEdge:o.gap.endEdge},...$s(this.visibleGaps.horizontal,o.gap.endNode.id,t,"forward",i)]})}if("gap_duplicate"===o.type){const t=(0,l().$C)(o.gap.breadthIntersection[0],o.gap.breadthIntersection[1],e.minY,e.maxY);s.push({type:"gaps",direction:"horizontal",id:ce(),gaps:"left"===o.protrusionDirection?[{startEdge:n.right,endEdge:[l().hd.Add(o.gap.startEdge[0],{x:-o.gap.startNode.pageBounds.width,y:0}),l().hd.Add(o.gap.startEdge[1],{x:-o.gap.startNode.pageBounds.width,y:0})]},{startEdge:o.gap.startEdge,endEdge:o.gap.endEdge},...$s(this.visibleGaps.horizontal,o.gap.endNode.id,o.gap.length,"forward",t)]:[...$s(this.visibleGaps.horizontal,o.gap.startNode.id,o.gap.length,"backward",t),{startEdge:o.gap.startEdge,endEdge:o.gap.endEdge},{startEdge:[l().hd.Add(o.gap.endEdge[0],{x:o.gap.endNode.pageBounds.width,y:0}),l().hd.Add(o.gap.endEdge[1],{x:o.gap.endNode.pageBounds.width,y:0})],endEdge:n.left}]})}}if(i.length>0)for(const o of i){if("gap_center"===o.type){const t=(o.gap.length-e.height)/2,i=(0,l().$C)(o.gap.breadthIntersection[0],o.gap.breadthIntersection[1],e.minX,e.maxX);s.push({type:"gaps",direction:"vertical",id:ce(),gaps:[...$s(this.visibleGaps.vertical,o.gap.startNode.id,t,"backward",i),{startEdge:o.gap.startEdge,endEdge:n.top},{startEdge:n.bottom,endEdge:o.gap.endEdge},...$s(this.visibleGaps.vertical,o.gap.endNode.id,t,"forward",i)]})}if("gap_duplicate"===o.type){const t=(0,l().$C)(o.gap.breadthIntersection[0],o.gap.breadthIntersection[1],e.minX,e.maxX);s.push({type:"gaps",direction:"vertical",id:ce(),gaps:"top"===o.protrusionDirection?[{startEdge:n.bottom,endEdge:[l().hd.Add(o.gap.startEdge[0],{x:0,y:-o.gap.startNode.pageBounds.height}),l().hd.Add(o.gap.startEdge[1],{x:0,y:-o.gap.startNode.pageBounds.height})]},{startEdge:o.gap.startEdge,endEdge:o.gap.endEdge},...$s(this.visibleGaps.vertical,o.gap.endNode.id,o.gap.length,"forward",t)]:[...$s(this.visibleGaps.vertical,o.gap.startNode.id,o.gap.length,"backward",t),{startEdge:o.gap.startEdge,endEdge:o.gap.endEdge},{startEdge:[l().hd.Add(o.gap.endEdge[0],{x:0,y:o.gap.endNode.pageBounds.height}),l().hd.Add(o.gap.endEdge[1],{x:0,y:o.gap.endNode.pageBounds.height})],endEdge:n.top}]})}}return function(e){e.sort(((e,t)=>t.gaps.length-e.gaps.length));for(let t=e.length-1;t>0;t--){const i=e[t];for(let n=t-1;n>=0;n--){const s=e[n];if(s.direction===i.direction&&i.gaps.every((e=>s.gaps.some((t=>Qs(e.startEdge[0].x)===Qs(t.startEdge[0].x)&&Qs(e.startEdge[0].y)===Qs(t.startEdge[0].y)&&Qs(e.startEdge[1].x)===Qs(t.startEdge[1].x)&&Qs(e.startEdge[1].y)===Qs(t.startEdge[1].y)))&&s.gaps.some((t=>Qs(e.endEdge[0].x)===Qs(t.endEdge[0].x)&&Qs(e.endEdge[0].y)===Qs(t.endEdge[0].y)&&Qs(e.endEdge[1].x)===Qs(t.endEdge[1].x)&&Qs(e.endEdge[1].y)===Qs(t.endEdge[1].y)))))){e.splice(t,1);break}}}}(s),s}}function eo(e,t){const{minX:i,maxX:n,minY:s,maxY:o}=t,r=[];switch(e){case"top":case"left":case"top_left":case"any":r.push({id:"top_left",handle:"top_left",x:i,y:s})}switch(e){case"top":case"right":case"top_right":case"any":r.push({id:"top_right",handle:"top_right",x:n,y:s})}switch(e){case"bottom":case"right":case"bottom_right":case"any":r.push({id:"bottom_right",handle:"bottom_right",x:n,y:o})}switch(e){case"bottom":case"left":case"bottom_left":case"any":r.push({id:"bottom_left",handle:"bottom_left",x:i,y:o})}return r}Ks([c().EW],qs.prototype,"snapPointsCache",1),Ks([c().EW],qs.prototype,"visibleShapesNotInSelection",1),Ks([c().EW],qs.prototype,"visibleSnapPointsNotInSelection",1),Ks([c().EW],qs.prototype,"visibleGaps",1);const to=new RegExp(`${[32,160,4961,65792,65793,4153,4241].map((e=>String.fromCodePoint(e))).join("|")}`),io={start:"left",middle:"center",end:"right",justify:"justify"};class no{constructor(e){this.app=e}getTextElement(){const e=document.createElement("div");return this.app.getContainer().appendChild(e),e.id=`__textMeasure_${ce()}`,e.classList.add("rs-text"),e.classList.add("rs-text-measure"),e.tabIndex=-1,e}measureText=e=>{const t=this.getTextElement();t.setAttribute("dir","ltr"),t.style.setProperty("font-family",e.fontFamily),t.style.setProperty("font-style",e.fontStyle),t.style.setProperty("font-weight",e.fontWeight),t.style.setProperty("font-size",e.fontSize+"px"),t.style.setProperty("line-height",e.lineHeight*e.fontSize+"px"),t.style.setProperty("width",e.width),t.style.setProperty("min-width",e.minWidth??null),t.style.setProperty("max-width",e.maxWidth),t.style.setProperty("padding",e.padding),t.textContent=Ki.normalizeTextForDom(e.text);const i=t.getBoundingClientRect();return t.remove(),{x:0,y:0,w:i.width,h:i.height}};getTextLines(e){const t=this.getTextElement();t.style.setProperty("width",e.width-2*e.padding+"px"),t.style.setProperty("height","min-content"),t.style.setProperty("dir","ltr"),t.style.setProperty("font-size",e.fontSize+"px"),t.style.setProperty("font-family",e.fontFamily),t.style.setProperty("font-weight",e.fontWeight),t.style.setProperty("line-height",e.lineHeight*e.fontSize+"px"),t.style.setProperty("text-align",io[e.textAlign]);const i=[];e.text.split(to).flatMap((e=>e.split("\n").map((e=>e.trim())).join("\n")));for(const d of e.text.split(to))if(d.includes("\n")){const e=d.split("\n");for(let t=0;t<e.length;t++)e[t]=e[t].trim(),e[t]&&i.push(e[t]),t<e.length-1&&i.push("\n")}else i.push(d);const n=[];for(let d=0;d<i.length;d++){const e=i[d];n.push(e),"\n"===e&&""===i[d+1]&&d++}let s=n.length-1;for(;""===n[s]&&(n.pop(),0!==s);)s--;let o=[];const r=[];t.textContent="";let a=t.offsetHeight,l=t.textContent;for(let d=0;d<n.length;d++){const i=n[d],s="\n"===i?i:`${i} `;t.textContent+=s;if(t.offsetHeight<=a)o.push(o.length?" "+i.trim():i.trim());else if(e.wrap&&"\n"!==i){const e=t.textContent;t.textContent=l,t.textContent+="\n";const n=[...i];t.textContent+=n[0],a=t.offsetHeight;let s=[n[0]];const c=[s];for(let i=1;i<n.length;i++){const e=n[i];t.textContent+=e;const o=t.offsetHeight;o>a?(s=[e],c.push(s),a=o):s.push(e)}const d=c.map((e=>[e.join("")]));r.push(...d),o=r[r.length-1],t.textContent=e,a=t.offsetHeight}else o=[],r.push(o);l=t.textContent}const c=r.map((e=>e.join("").trim()));return t.remove(),c}}class so{constructor(e){this.app=e,this.app.disposables.add(this.dispose),this.start()}raf;isPaused=!0;last=0;t=0;start=()=>{this.isPaused=!1,cancelAnimationFrame(this.raf),this.raf=requestAnimationFrame(this.tick),this.last=Date.now()};tick=()=>{if(this.isPaused)return;const e=Date.now(),t=e-this.last;this.last=e,this.t+=t,this.t<16||(this.t-=16,this.updatePointerVelocity(t),this.app.emit("tick",t)),this.raf=requestAnimationFrame(this.tick)};dispose=()=>{this.isPaused=!0,cancelAnimationFrame(this.raf)};prevPoint=new(l().hd);updatePointerVelocity=e=>{const{prevPoint:t,app:{inputs:{currentScreenPoint:i,pointerVelocity:n}}}=this;if(0===e)return;const s=l().hd.Sub(i,t);this.prevPoint=i.clone();const o=s.len(),r=o?s.div(o):new(l().hd)(0,0),a=n.clone().lrp(r.mul(o/e),.5);Math.abs(a.x)<.01&&(a.x=0),Math.abs(a.y)<.01&&(a.y=0),n.equals(a)||(this.app.inputs.pointerVelocity=a)}}const oo={wheel:"onWheel",pointer_enter:"onPointerEnter",pointer_leave:"onPointerLeave",pointer_down:"onPointerDown",pointer_move:"onPointerMove",pointer_up:"onPointerUp",right_click:"onRightClick",middle_click:"onMiddleClick",key_down:"onKeyDown",key_up:"onKeyUp",cancel:"onCancel",complete:"onComplete",interrupt:"onInterrupt",double_click:"onDoubleClick",triple_click:"onTripleClick",quadruple_click:"onQuadrupleClick"};class ro{constructor(e,t){this.app=e;const{id:i,children:n,initial:s}=this.constructor;this.id=i,this.current=(0,c().eU)("toolState"+this.id,void 0),this.path=(0,c().EW)("toolPath"+this.id,(()=>{const e=this.current.value;return this.id+(e?`.${e.path.value}`:"")})),this.parent=t??{},this.parent?n&&s?(this.type="branch",this.initial=s,this.children=Object.fromEntries(n().map((e=>[e.id,new e(this.app,this)]))),this.current.set(this.children[this.initial])):this.type="leaf":(this.type="root",n&&s&&(this.initial=s,this.children=Object.fromEntries(n().map((e=>[e.id,new e(this.app,this)]))),this.current.set(this.children[this.initial])))}path;static id;static initial;static children;id;current;type;styles=[];initial;children;parent;isActive=!1;transition(e,t){const i=e.split(".");let n=this;for(let s=0;s<i.length;s++){const e=i[s],o=n.current.value,r=n.children?.[e];if(!r)throw Error(`${n.id} - no child state exists with the id ${e}.`);if(o?.id!==r.id&&(o?.exit(t,e),n.current.set(r),r.enter(t,o?.id||"initial"),!r.isActive))break;n=r}return this}handleEvent(e){const t=oo[e.name],i=this.current.value;this[t]?.(e),this.current.value===i&&this.isActive&&i?.handleEvent(e)}enter(e,t){if(this.isActive=!0,this.onEnter?.(e,t),this.children&&this.initial&&this.isActive){const i=this.children[this.initial];this.current.set(i),i.enter(e,t)}}exit(e,t){this.isActive=!1,this.onExit?.(e,t),this.isActive||this.current.value?.exit(e,t)}onWheel;onPointerEnter;onPointerLeave;onPointerDown;onPointerMove;onPointerUp;onDoubleClick;onTripleClick;onQuadrupleClick;onRightClick;onMiddleClick;onKeyDown;onKeyUp;onCancel;onComplete;onInterrupt;onEnter;onExit}class ao extends ro{static id="idle";onPointerDown=e=>{this.parent.transition("pointing",e)};onEnter=()=>{this.app.setCursor({type:"cross"})};onCancel=()=>{this.app.setSelectedTool("select")}}class lo extends ro{static id="pointing";shapeType="";shape;preciseTimeout=-1;didTimeout=!1;startPreciseTimeout(){this.preciseTimeout=window.setTimeout((()=>{this.isActive&&this.shape&&(this.didTimeout=!0)}),300)}clearPreciseTimeout(){clearTimeout(this.preciseTimeout)}onEnter=()=>{const{inputs:{currentPagePoint:e}}=this.app;this.didTimeout=!1,this.shapeType=this.parent.shapeType,this.app.mark("creating");const t=(0,n().n6)();this.app.createShapes([{id:t,type:this.shapeType,x:e.x,y:e.y}]);const i=this.app.getShapeUtilByDef(cn),s=this.app.getShapeById(t);if(!s)return;const o=i.handles?.(s);if(o){const t=this.app.getPointInShapeSpace(s,e),n=i.onHandleChange?.(s,{handle:{...o[0],x:t.x,y:t.y},isPrecise:!0});if(n){const e=n.props?.start;"binding"===e?.type&&this.app.setHintingIds([e.boundShapeId]),this.app.updateShapes([n],!0)}}this.app.select(t),this.shape=this.app.getShapeById(t),this.startPreciseTimeout()};onExit=()=>{this.clearPreciseTimeout()};onPointerMove=()=>{if(this.shape&&this.app.inputs.isDragging){const e=this.app.getShapeUtil(this.shape),t=e.handles?.(this.shape);if(!t)throw this.app.bailToMark("creating"),Error("No handles found");if(!this.didTimeout){const e=this.app.getShapeUtilByDef(cn),t=this.app.getShapeById(this.shape.id);if(!t)return;const i=e.handles(t);if(i){const{x:n,y:s}=this.app.getPointInShapeSpace(t,this.app.inputs.originPagePoint),o=e.onHandleChange?.(t,{handle:{...i[0],x:n,y:s},isPrecise:!1});o&&this.app.updateShapes([o],!0)}}this.app.setSelectedTool("select.dragging_handle",{shape:this.shape,handle:t.find((e=>"end"===e.id)),isCreating:!0,onInteractionEnd:"arrow"})}};onPointerUp=()=>{this.cancel()};onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};cancel(){this.app.bailToMark("creating"),this.app.setHintingIds([]),this.parent.transition("idle",{})}}class co extends ro{static id="arrow";static initial="idle";static children=()=>[ao,lo];shapeType="arrow";styles=["color","opacity","dash","size","arrowheadStart","arrowheadEnd","font","fill"]}class uo extends ro{static id="drawing";info={};initialShape;util=this.app.getShapeUtilByDef(Sn);isPen=!1;segmentMode="free";didJustShiftClickToExtendPreviousShapeLine=!1;pagePointWhereCurrentSegmentChanged={};pagePointWhereNextSegmentChanged=null;lastRecordedPoint={};mergeNextPoint=!1;canDraw=!1;onEnter=e=>{this.info=e,this.canDraw=!this.app.isMenuOpen,this.lastRecordedPoint=this.app.inputs.currentPagePoint.clone(),this.canDraw&&this.startShape()};onPointerMove=()=>{const{app:{inputs:e}}=this;this.isPen!==e.isPen&&this.cancel(),!this.canDraw&&e.isDragging&&(this.startShape(),this.canDraw=!0),this.canDraw&&(e.isPen?l().hd.Dist(e.currentPagePoint,this.lastRecordedPoint)>=1/this.app.camera.z?(this.lastRecordedPoint=e.currentPagePoint.clone(),this.mergeNextPoint=!1):this.mergeNextPoint=!0:this.mergeNextPoint=!1,this.updateShapes())};onKeyDown=e=>{if("Shift"===e.key)switch(this.segmentMode){case"free":this.segmentMode="starting_straight",this.pagePointWhereNextSegmentChanged=this.app.inputs.currentPagePoint.clone();break;case"starting_free":this.segmentMode="starting_straight"}this.updateShapes()};onKeyUp=e=>{if("Shift"===e.key)switch(this.app.snaps.clear(),this.segmentMode){case"straight":this.segmentMode="starting_free",this.pagePointWhereNextSegmentChanged=this.app.inputs.currentPagePoint.clone();break;case"starting_straight":this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free"}this.updateShapes()};onExit=()=>{this.app.snaps.clear(),this.pagePointWhereCurrentSegmentChanged=this.app.inputs.currentPagePoint.clone()};getIsClosed(e,t){const i=e[0].points[0],n=e[e.length-1],s=n.points[n.points.length-1];return l().hd.Dist(i,s)<2*this.app.getStrokeWidth(t)}startShape(){const{inputs:{originPagePoint:e,isPen:t}}=this.app;this.app.mark("draw create start"),this.isPen=t;const i=this.isPen?1.25*this.info.point.z:.5;if(this.segmentMode=this.app.inputs.shiftKey?"straight":"free",this.didJustShiftClickToExtendPreviousShapeLine=!1,this.lastRecordedPoint=e.clone(),this.initialShape){const t=this.app.getShapeById(this.initialShape.id);if(t&&"straight"===this.segmentMode){this.didJustShiftClickToExtendPreviousShapeLine=!0;const i=(0,r().HV)(t.props.segments);if(!i)throw Error("Expected a previous segment!");const n=(0,r().HV)(i.points);if(!n)throw Error("Expected a previous point!");const{x:s,y:o}=this.app.getPointInShapeSpace(t,e).toFixed(),a=this.isPen?1.25*this.info.point.z:.5,c={type:this.segmentMode,points:[{x:n.x,y:n.y,z:+a.toFixed(2)},{x:s,y:o,z:+a.toFixed(2)}]},d=l().cQ.applyToPoint(this.app.getPageTransformById(t.id),n);this.pagePointWhereCurrentSegmentChanged=d,this.pagePointWhereNextSegmentChanged=null;const u=[...t.props.segments,c];return void this.app.updateShapes([{id:t.id,type:"draw",props:{segments:u,isClosed:this.getIsClosed(u,t.props.size)}}])}}this.pagePointWhereCurrentSegmentChanged=e.clone();const s=(0,n().n6)();this.app.createShapes([{id:s,type:"draw",x:e.x,y:e.y,props:{isPen:this.isPen,segments:[{type:this.segmentMode,points:[{x:0,y:0,z:+i.toFixed(2)}]}]}}]),this.initialShape=this.app.getShapeById(s)}updateShapes(){const{inputs:e}=this.app,{initialShape:t}=this;if(!t)return;const{id:i,props:{size:n}}=t,s=this.app.getShapeById(i);if(!s)return;const{segments:o}=s.props,{x:a,y:c,z:d}=this.app.getPointInShapeSpace(s,e.currentPagePoint).toFixed(),u={x:a,y:c,z:this.isPen?+(1.25*d).toFixed(2):.5};switch(this.segmentMode){case"starting_straight":{const{pagePointWhereNextSegmentChanged:t}=this;if(null===t)throw Error("We should have a point where the segment changed");if(l().hd.Dist(t,e.currentPagePoint)>4){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="straight";const e=(0,r().HV)(o);if(!e)throw Error("Expected a previous segment!");const t=(0,r().HV)(e.points);if(!t)throw Error("Expected a previous last point!");let a;if("straight"===e.type){a={type:"straight",points:[{...t},this.app.getPointInShapeSpace(s,this.pagePointWhereCurrentSegmentChanged).toFixed().toJson()]};const e=this.app.getPageTransform(s);this.pagePointWhereCurrentSegmentChanged=l().cQ.applyToPoint(e,t)}else a={type:"straight",points:[this.app.getPointInShapeSpace(s,this.pagePointWhereCurrentSegmentChanged).toFixed().toJson(),u]};this.app.updateShapes([{id:i,type:"draw",props:{segments:[...o,a],isClosed:this.getIsClosed(o,n)}}],!0)}break}case"starting_free":{const{pagePointWhereNextSegmentChanged:t}=this;if(null===t)throw Error("We should have a point where the segment changed");if(l().hd.Dist(t,e.currentPagePoint)>4){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";const e=o.slice(),t=e[e.length-1],s=(0,r().HV)(t.points);if(!s)throw Error("No previous point!");const a={type:"free",points:[...l().hd.PointsBetween(s,u,6).map((e=>e.toFixed().toJson()))]};this.app.updateShapes([{id:i,type:"draw",props:{segments:[...e,a],isClosed:this.getIsClosed(o,n)}}],!0)}break}case"straight":{const e=o.slice(),t=e[e.length-1],{pagePointWhereCurrentSegmentChanged:a}=this,{currentPagePoint:c,ctrlKey:d}=this.app.inputs;if(!a)throw Error("We should have a point where the segment changed");let u,h=!1;this.didJustShiftClickToExtendPreviousShapeLine?this.app.inputs.isDragging&&(h=!d,this.didJustShiftClickToExtendPreviousShapeLine=!1):h=!d;let p,g=this.app.getPointInShapeSpace(s,c).toFixed().toJson(),m=!1;if((this.app.userDocumentSettings.isSnapMode?!d:d)&&e.length>2){let e,t=8/this.app.camera.z;for(let i=0,n=o.length-2;i<n;i++){const n=o[i];if(!n)break;if("free"===n.type)continue;const s=n.points[0],a=(0,r().HV)(n.points);if(!s||!a)continue;const c=l().hd.NearestPointOnLineSegment(s,a,g),d=l().hd.Dist(c,g);if(d<t){e=c.toFixed().toJson(),t=d,p=n;break}}e&&(m=!0,g=e)}if(m&&p){const e=this.app.getPageTransform(s),t=p.points[0],i=(0,r().HV)(p.points);if(!i)throw Error("Expected a last point!");const n=l().cQ.applyToPoint(e,t),o=l().cQ.applyToPoint(e,i),a=l().cQ.applyToPoint(e,g);this.app.snaps.setLines([{id:ce(),type:"points",points:[n,a,o]}])}else{if(this.app.snaps.clear(),h){const e=l().hd.Angle(a,c),t=(0,l().cL)(e,24)-e;u=l().hd.RotWith(c,a,t)}else u=c;g=this.app.getPointInShapeSpace(s,u).toFixed().toJson()}e[e.length-1]={...t,type:"straight",points:[t.points[0],g]},this.app.updateShapes([{id:i,type:"draw",props:{segments:e,isClosed:this.getIsClosed(o,n)}}],!0);break}case"free":{const e=o.slice(),t=e[e.length-1],s=[...t.points];if(s.length&&this.mergeNextPoint){const{z:e}=s[s.length-1];s[s.length-1]={x:u.x,y:u.y,z:e?Math.max(e,u.z):u.z}}else s.push(u);if(e[e.length-1]={...t,points:s},this.app.updateShapes([{id:i,type:"draw",props:{segments:e,isClosed:this.getIsClosed(o,n)}}],!0),s.length>500){this.app.updateShapes([{id:i,type:"draw",props:{isComplete:!0}}]);const{currentPagePoint:e}=this.app.inputs,t=this.app.createShapeId();this.app.createShapes([{id:t,type:"draw",x:e.x,y:e.y,props:{isPen:this.isPen,segments:[{type:"free",points:[{x:0,y:0,z:this.isPen?+(1.25*d).toFixed():.5}]}]}}]),this.initialShape=(0,r().pN)(this.app.getShapeById(t)),this.mergeNextPoint=!1,this.lastRecordedPoint=this.app.inputs.currentPagePoint.clone()}break}}}onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};onInterrupt=()=>{this.app.inputs.isDragging||(this.app.bail(),this.cancel())};complete(){if(!this.canDraw)return void this.cancel();const{initialShape:e}=this;e&&(this.app.updateShapes([{id:e.id,type:e.type,props:{isComplete:!0}}]),this.parent.transition("idle",{}))}cancel(){this.parent.transition("idle",this.info)}}class ho extends ro{static id="idle";onPointerDown=e=>{this.parent.transition("drawing",e)};onEnter=()=>{this.app.setCursor({type:"cross"})};onCancel=()=>{this.app.setSelectedTool("select")}}class po extends ro{static id="draw";static initial="idle";static children=()=>[ho,uo];styles=["color","opacity","dash","fill","size"];onExit=()=>{this.children.drawing.initialShape=void 0}}class go extends ro{static id="erasing";info={};scribble={};markId="";excludedShapeIds=new Set;onEnter=e=>{this.markId=this.app.mark("erase scribble begin"),this.info=e;const{originPagePoint:t}=this.app.inputs;this.excludedShapeIds=new Set(this.app.shapesArray.filter((e=>("frame"===e.type||"group"===e.type)&&this.app.isPointInShape(t,e))).map((e=>e.id))),this.startScribble(),this.update()};startScribble=()=>{this.scribble=new Us({onUpdate:this.onScribbleUpdate,onComplete:this.onScribbleComplete,color:"muted-1",size:12}),this.app.on("tick",this.scribble.tick)};pushPointToScribble=()=>{const{x:e,y:t}=this.app.inputs.currentPagePoint;this.scribble.addPoint(e,t)};onScribbleUpdate=e=>{this.app.setScribble(e)};onScribbleComplete=()=>{this.app.off("tick",this.scribble.tick),this.app.setScribble(null)};onExit=()=>{this.scribble.stop()};onPointerMove=()=>{this.update()};onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};update(){const{shapesArray:e,erasingIdsSet:t,inputs:{currentPagePoint:i,previousPagePoint:n}}=this.app,{excludedShapeIds:s}=this;this.pushPointToScribble();const o=new Set(t);for(const r of e){if("group"===r.type)continue;const e=this.app.getPageMaskById(r.id);if(e&&!(0,l().s3)(i,e))continue;const t=this.app.getShapeUtil(r),s=this.app.getPointInShapeSpace(r,n),a=this.app.getPointInShapeSpace(r,i);t.hitTestLineSegment(r,s,a)&&o.add(this.app.getOutermostSelectableShape(r).id)}this.app.setErasingIds([...o].filter((e=>!s.has(e))))}complete(){this.app.deleteShapes(this.app.pageState.erasingIds),this.app.setErasingIds([]),this.parent.transition("idle",{})}cancel(){this.app.setErasingIds([]),this.app.bailToMark(this.markId),this.parent.transition("idle",this.info)}}class mo extends ro{static id="idle";onPointerDown=e=>{this.parent.transition("pointing",e)}}class Io extends ro{static id="pointing";onEnter=()=>{const{inputs:e}=this.app,t=new Set,i=t.size;for(const n of[...this.app.sortedShapesArray].reverse())if(this.app.isPointInShape(e.currentPagePoint,n)){if("group"===n.type)continue;const e=this.app.getOutermostSelectableShape(n);if("frame"===e.type&&t.size>i)break;t.add(e.id)}this.app.setErasingIds([...t])};onPointerMove=e=>{this.app.inputs.isDragging&&this.parent.transition("erasing",e)};onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};onInterrupt=()=>{this.cancel()};complete(){const{erasingIds:e}=this.app;e.length&&(this.app.mark("erase end"),this.app.deleteShapes(e)),this.app.setErasingIds([]),this.parent.transition("idle",{})}cancel(){this.app.setErasingIds([]),this.parent.transition("idle",{})}}class fo extends ro{static id="eraser";static initial="idle";static children=()=>[mo,Io,go];onEnter=()=>{this.app.setCursor({type:"cross"})}}class yo extends ro{static id="idle";onPointerDown=e=>{this.parent.transition("pointing",e)};onEnter=()=>{this.app.setCursor({type:"cross"})};onCancel=()=>{this.app.setSelectedTool("select")}}class bo extends ro{static id="pointing";markId="creating";wasFocusedOnEnter=!1;onEnter=()=>{const{isMenuOpen:e}=this.app;this.wasFocusedOnEnter=!e};onPointerMove=e=>{if(this.app.inputs.isDragging){const{originPagePoint:t}=this.app.inputs,i=this.parent.shapeType,s=(0,n().n6)();this.app.mark(this.markId),this.app.createShapes([{id:s,type:i,x:t.x,y:t.y,props:{w:1,h:1}}]),this.app.setSelectedIds([s]),this.app.setSelectedTool("select.resizing",{...e,target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:this.parent.id})}};onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};onInterrupt=()=>{this.cancel()};complete(){const{originPagePoint:e}=this.app.inputs;if(!this.wasFocusedOnEnter)return;this.app.mark(this.markId);const t=this.parent.shapeType,i=(0,n().n6)();this.app.mark(this.markId),this.app.createShapes([{id:i,type:t,x:e.x,y:e.y}]);const s=this.app.getShapeById(i),{w:o,h:r}=this.app.getShapeUtil(s).defaultProps(),a=this.app.getDeltaInParentSpace(s,new(l().hd)(o/2,r/2));this.app.updateShapes([{id:i,type:t,x:s.x-a.x,y:s.y-a.y}]),this.app.setSelectedIds([i]),this.app.instanceState.isToolLocked?this.parent.transition("idle",{}):this.app.setSelectedTool("select.idle")}cancel(){this.parent.transition("idle",{})}}class wo extends ro{static id="box";static initial="idle";static children=()=>[yo,bo];styles=["opacity"]}class Co extends wo{static id="frame";static initial="idle";shapeType="frame";styles=["opacity"]}class Mo extends ro{static id="idle";onPointerDown=e=>{this.parent.transition("pointing",e)};onEnter=()=>{this.app.setCursor({type:"cross"})};onKeyUp=e=>{if("Enter"===e.key){const t=this.app.onlySelectedShape;t&&"geo"===t.type&&(this.app.mark("editing shape"),this.app.setEditingId(t.id),this.app.setSelectedTool("select.editing_shape",{...e,target:"shape",shape:t}))}};onCancel=()=>{this.app.setSelectedTool("select")}}class xo extends ro{static id="pointing";onPointerMove=e=>{if(this.app.inputs.isDragging){const{originPagePoint:t}=this.app.inputs,i=(0,n().n6)();this.app.mark("creating"),this.app.createShapes([{id:i,type:"geo",x:t.x,y:t.y,props:{w:1,h:1,geo:this.app.instanceState.propsForNextShape.geo}}]),this.app.select(i),this.app.setSelectedTool("select.resizing",{...e,target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:"geo"})}};onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};onInterrupt=()=>{this.cancel()};complete(){const{originPagePoint:e}=this.app.inputs,t=(0,n().n6)();this.app.mark("creating"),this.app.createShapes([{id:t,type:"geo",x:e.x,y:e.y,props:{geo:this.app.instanceState.propsForNextShape.geo,w:1,h:1}}]);const i=this.app.getShapeById(t);if(!i)return;const s="star"===i.props.geo?(0,l().sW)(5,200,200):new(l().Ax)(0,0,200,200),o=this.app.getDeltaInParentSpace(i,s.center);this.app.select(t),this.app.updateShapes([{id:i.id,type:"geo",x:i.x-o.x,y:i.y-o.y,props:{geo:this.app.instanceState.propsForNextShape.geo,w:s.width,h:s.height}}]),this.app.instanceState.isToolLocked?this.parent.transition("idle",{}):this.app.setSelectedTool("select",{})}cancel(){this.parent.transition("idle",{})}}class Ao extends ro{static id="geo";static initial="idle";static children=()=>[Mo,xo];styles=["color","opacity","dash","fill","size","geo","font","align"]}class So extends ro{static id="dragging";onEnter=()=>{this.update()};onPointerMove=()=>{this.update()};onPointerUp=()=>{this.complete()};onCancel=()=>{this.complete()};onComplete=()=>{this.complete()};update(){const{currentScreenPoint:e,previousScreenPoint:t}=this.app.inputs,i=l().hd.Sub(e,t);(Math.abs(i.x)>0||Math.abs(i.y)>0)&&this.app.pan(i.x,i.y)}complete(){this.app.slideCamera({speed:Math.min(2,this.app.inputs.pointerVelocity.len()),direction:this.app.inputs.pointerVelocity,friction:M}),this.parent.transition("idle",{})}}class vo extends ro{static id="idle";onEnter=()=>{this.app.setCursor({type:"grab"})};onPointerDown=e=>{this.parent.transition("pointing",e)};onCancel=()=>{this.app.setSelectedTool("select")}}class Lo extends ro{static id="pointing";onEnter=()=>{this.app.stopCameraAnimation(),this.app.setCursor({type:"grabbing"})};onPointerMove=e=>{this.app.inputs.isDragging&&this.parent.transition("dragging",e)};onPointerUp=()=>{this.complete()};onCancel=()=>{this.complete()};onComplete=()=>{this.complete()};onInterrupt=()=>{this.complete()};complete(){this.parent.transition("idle",{})}}class jo extends ro{static id="hand";static initial="idle";static children=()=>[vo,Lo,So];styles=[];onDoubleClick=e=>{if("settle"===e.phase){const{currentScreenPoint:e}=this.app.inputs;this.app.zoomIn(e,{duration:220,easing:l().Z4.easeOutQuint})}};onTripleClick=e=>{if("settle"===e.phase){const{currentScreenPoint:e}=this.app.inputs;this.app.zoomOut(e,{duration:320,easing:l().Z4.easeOutQuint})}};onQuadrupleClick=e=>{if("settle"===e.phase){const{zoomLevel:e,inputs:{currentScreenPoint:t}}=this.app;1===e?this.app.zoomToFit({duration:400,easing:l().Z4.easeOutQuint}):this.app.resetZoom(t,{duration:320,easing:l().Z4.easeOutQuint})}}}class No extends ro{static id="idle";shapeId="";onEnter=e=>{this.shapeId=e.shapeId,this.app.setCursor({type:"cross"})};onPointerDown=()=>{this.parent.transition("pointing",{shapeId:this.shapeId})};onCancel=()=>{this.app.setSelectedTool("select")}}class Do extends ro{static id="pointing";shapeType="";shape={};markPointId="";onEnter=e=>{const{inputs:t}=this.app,{currentPagePoint:i}=t;this.shapeType=this.parent.shapeType,this.markPointId=this.app.mark("creating");let s=!1;if(e.shapeId){const t=this.app.getShapeById(e.shapeId);t&&(s=!0,this.shape=t)}if(t.shiftKey&&s){const e=this.app.getShapeUtil(this.shape).handles(this.shape).filter((e=>"vertex"===e.type)).sort(Re),t=e[e.length-1],n=l().cQ.applyToPoint(this.app.getParentTransform(this.shape),new(l().hd)(this.shape.x,this.shape.y));let s,o,a;2===e.length&&1===e[1].x&&1===e[1].y?(s=e[1].index,o=e[1].id,a={...e[1],x:i.x-n.x,y:i.y-n.y}):(s=Pe(t.index),o="handle:"+s,a={x:i.x-n.x,y:i.y-n.y,index:s,canBind:!1,type:"vertex",id:o});const c=(0,r().pN)(this.shape.props.handles);c[a.id]=a,this.app.updateShapes([{id:this.shape.id,type:this.shape.type,props:{handles:c}}])}else{const e=(0,n().n6)();this.app.createShapes([{id:e,type:this.shapeType,x:i.x,y:i.y}]),this.app.select(e),this.shape=this.app.getShapeById(e)}};onPointerMove=()=>{if(this.shape&&this.app.inputs.isDragging){const e=this.app.getShapeUtil(this.shape),t=e.handles?.(this.shape);if(!t)throw this.app.bailToMark("creating"),Error("No handles found");this.app.setSelectedTool("select.dragging_handle",{shape:this.shape,isCreating:!0,handle:(0,r().HV)(t),onInteractionEnd:"line"})}};onPointerUp=()=>{this.complete()};onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};onInterrupt=()=>{this.parent.transition("idle",{}),this.app.bailToMark("creating"),this.app.snaps.clear()};complete(){this.parent.transition("idle",{shapeId:this.shape.id}),this.app.snaps.clear()}cancel(){this.app.bailToMark(this.markPointId),this.parent.transition("idle",{shapeId:this.shape.id}),this.app.snaps.clear()}}class Eo extends ro{static id="line";static initial="idle";static children=()=>[No,Do];shapeType="line";styles=["color","opacity","dash","size","spline"]}class ko extends ro{static id="idle";onPointerDown=e=>{this.parent.transition("pointing",e)};onEnter=()=>{this.app.setCursor({type:"cross"})};onCancel=()=>{this.app.setSelectedTool("select")}}class Zo extends ro{static id="pointing";dragged=!1;info={};wasFocusedOnEnter=!1;markPointId="creating";onEnter=()=>{this.wasFocusedOnEnter=!this.app.isMenuOpen};onPointerMove=e=>{if(this.app.inputs.isDragging){this.app.mark(this.markPointId);const t=this.createShape();if(!t)return;this.app.setSelectedTool("select.translating",{...e,target:"shape",shape:t,isCreating:!0,editAfterComplete:!0,onInteractionEnd:"note"})}};onPointerUp=()=>{this.complete()};onInterrupt=()=>{this.cancel()};onComplete=()=>{this.complete()};onCancel=()=>{this.cancel()};complete(){if(!this.wasFocusedOnEnter)return;this.app.mark(this.markPointId);const e=this.createShape();if(this.app.instanceState.isToolLocked)this.parent.transition("idle",{});else{if(!e)return;this.app.setEditingId(e.id),this.app.setSelectedTool("select.editing_shape",{...this.info,target:"shape",shape:e})}}cancel(){this.app.bailToMark(this.markPointId),this.parent.transition("idle",this.info)}createShape(){const{inputs:{originPagePoint:e}}=this.app,t=this.app.createShapeId();this.app.createShapes([{id:t,type:"note",x:e.x,y:e.y}],!0);const i=this.app.getShapeUtilByDef(As),n=this.app.getShapeById(t);(0,r().vA)(As.is(n));const s=i.bounds(n);return this.app.updateShapes([{id:t,type:"note",x:n.x-s.width/2,y:n.y-s.height/2}]),this.app.getShapeById(t)}}class To extends ro{static id="note";static initial="idle";static children=()=>[ko,Zo];styles=["color","opacity","size","align","font"]}class Wo extends ro{static id="translating";info={};selectionSnapshot={};snapshot={};markId="";isCloning=!1;isCreating=!1;editAfterComplete=!1;dragAndDropManager=new Gs(this.app);onEnter=e=>{const{isCreating:t=!1,editAfterComplete:i=!1}=e;this.info=e,this.isCreating=t,this.editAfterComplete=i,this.markId=t?"creating":this.app.mark("translating"),this.handleEnter(e),this.app.on("tick",this.updateParent)};updateParent=()=>{const{snapshot:e}=this;this.dragAndDropManager.updateDroppingNode(e.movingShapes,this.updateParentTransforms)};onExit=()=>{this.app.off("tick",this.updateParent),this.selectionSnapshot={},this.snapshot={},this.app.snaps.clear(),this.app.setCursor({type:"default"}),this.dragAndDropManager.clear()};onPointerMove=()=>{this.updateShapes()};onKeyDown=()=>{!this.app.inputs.altKey||this.isCloning?this.updateShapes():this.startCloning()};onKeyUp=()=>{this.app.inputs.altKey||!this.isCloning?this.updateShapes():this.stopCloning()};onPointerUp=()=>{this.complete()};onComplete=()=>{this.complete()};onCancel=()=>{this.cancel()};reset(){this.app.bailToMark(this.markId)}startCloning(){this.isCreating||(this.isCloning=!0,this.reset(),this.markId=this.app.mark("translating"),this.app.duplicateShapes(),this.snapshot=zo(this.app),this.handleStart(),this.updateShapes())}stopCloning(){this.isCloning=!1,this.snapshot=this.selectionSnapshot,this.reset(),this.markId=this.app.mark("translating"),this.updateShapes()}complete(){if(this.updateShapes(),this.dragAndDropManager.dropShapes(this.snapshot.movingShapes),this.handleEnd(),this.app.instanceState.isToolLocked&&this.info.onInteractionEnd)this.app.setSelectedTool(this.info.onInteractionEnd);else if(this.editAfterComplete){const e=this.app.onlySelectedShape;e&&(this.app.setEditingId(e.id),this.app.setSelectedTool("select"),this.app.root.current.value.transition("editing_shape",{}))}else this.parent.transition("idle",{})}cancel(){this.reset(),this.info.onInteractionEnd?this.app.setSelectedTool(this.info.onInteractionEnd):this.parent.transition("idle",this.info)}handleEnter(e){this.isCloning=!1,this.info=e,this.app.setCursor({type:"move"}),this.selectionSnapshot=zo(this.app),this.isCreating||!this.app.inputs.altKey?(this.snapshot=this.selectionSnapshot,this.handleStart(),this.updateShapes()):this.startCloning()}handleStart(){const{movingShapes:e}=this.snapshot,t=[];e.forEach((e=>{const i=this.app.getShapeUtil(e),n=i.onTranslateStart?.(e);n&&t.push(n)})),t.length>0&&this.app.updateShapes(t)}handleEnd(){const{movingShapes:e}=this.snapshot,t=[];e.forEach((e=>{const i=this.app.getShapeById(e.id),n=this.app.getShapeUtil(e),s=n.onTranslateEnd?.(e,i);s&&t.push(s)})),t.length>0&&this.app.updateShapes(t)}handleChange(){const{movingShapes:e}=this.snapshot,t=[];e.forEach((e=>{const i=this.app.getShapeById(e.id),n=this.app.getShapeUtil(e),s=n.onTranslate?.(e,i);s&&t.push(s)})),t.length>0&&this.app.updateShapes(t)}updateShapes(){const{snapshot:e}=this;this.dragAndDropManager.updateDroppingNode(e.movingShapes,this.updateParentTransforms),function({app:e,shapeSnapshots:t,averagePagePoint:i,initialSelectionPageBounds:n,initialSelectionSnapPoints:s}){const{inputs:o,isGridMode:a,gridSize:c}=e,d=l().hd.Sub(o.currentPagePoint,o.originPagePoint),u=e.inputs.shiftKey?Math.abs(d.x)<Math.abs(d.y)?"x":"y":null;"x"===u?d.x=0:"y"===u&&(d.y=0);e.snaps.clear();if((e.userDocumentSettings.isSnapMode?!o.ctrlKey:o.ctrlKey)&&e.inputs.pointerVelocity.len()<.5){const{nudge:t}=e.snaps.snapTranslate({dragDelta:d,initialSelectionPageBounds:n,lockedAxis:u,initialSelectionSnapPoints:s});d.add(t)}const h=l().hd.Add(i,d);a&&!o.ctrlKey&&h.snapToGrid(c);const p=l().hd.Sub(h,i);e.updateShapes((0,r().oE)(t.map((({shape:e,pagePoint:t,parentTransform:i})=>{const n=l().hd.Add(t,p),s=i?l().cQ.applyToPoint(i,n):n;return{id:e.id,type:e.type,x:s.x,y:s.y}}))),!0)}({app:this.app,shapeSnapshots:e.shapeSnapshots,averagePagePoint:e.averagePagePoint,initialSelectionPageBounds:e.initialPageBounds,initialSelectionSnapPoints:e.initialSnapPoints}),this.handleChange()}updateParentTransforms=()=>{const{app:e,snapshot:{shapeSnapshots:t}}=this,i=[];t.forEach((t=>{const s=e.getShapeById(t.shape.id);if(!s)return null;i.push(s);const o=n()._P.isId(s.parentId)?null:l().cQ.Inverse(e.getPageTransformById(s.parentId));t.parentTransform=o}))}}function zo(e){const t=[],i=[],s=(0,r().oE)(e.selectedIds.map((s=>{const o=e.getShapeById(s);if(!o)return null;t.push(o);const r=e.getPagePointById(s);if(!r)return null;i.push(r);return{shape:o,pagePoint:r,parentTransform:n()._P.isId(o.parentId)?null:l().cQ.Inverse(e.getPageTransformById(o.parentId))}})));return{averagePagePoint:l().hd.Average(i),movingShapes:t,shapeSnapshots:s,initialPageBounds:e.selectedPageBounds,initialSnapPoints:1===e.selectedIds.length?e.snaps.snapPointsCache.get(e.selectedIds[0]):e.selectedPageBounds?e.selectedPageBounds.snapPoints.map(((e,t)=>({id:"selection:"+t,x:e.x,y:e.y}))):[]}}class Po extends ro{static id="brushing";info={};brush=new(l().Ax);initialSelectedIds=[];initialStartShape=null;onEnter=e=>{const{altKey:t,currentPagePoint:i}=this.app.inputs;t?this.parent.transition("scribble_brushing",e):(this.info=e,this.initialSelectedIds=this.app.selectedIds.slice(),this.initialStartShape=this.app.getShapesAtPoint(i)[0],this.onPointerMove())};onExit=()=>{this.initialSelectedIds=[],this.app.setBrush(null)};onPointerMove=()=>{this.hitTestShapes()};onPointerUp=()=>{this.complete()};onComplete=()=>{this.complete()};onCancel=e=>{this.app.setSelectedIds(this.initialSelectedIds,!0),this.parent.transition("idle",e)};onKeyDown=e=>{this.app.inputs.altKey?this.parent.transition("scribble_brushing",e):this.hitTestShapes()};onKeyUp=()=>{this.hitTestShapes()};complete(){this.parent.transition("idle",{})}hitTestShapes(){const{currentPageId:e,shapesArray:t,inputs:{originPagePoint:i,currentPagePoint:n,shiftKey:s,ctrlKey:o}}=this.app;this.brush.setTo(l().Ax.FromPoints([i,n]));const r=new Set(s?this.initialSelectedIds:[]);let a,c,d,u,h,p,g;const{corners:m}=this.brush;e:for(let I=0,f=t.length;I<f;I++)if(d=t[I],"group"!==d.type&&!r.has(d.id)&&(h=this.app.getPageBounds(d),h))if(this.brush.contains(h))this.handleHit(d,n,e,r,m);else if(!o&&"frame"!==d.type&&this.brush.collides(h)){if(u=this.app.getShapeUtil(d),p=this.app.getPageTransform(d),!p)continue e;g=l().cQ.applyToPoints(l().cQ.Inverse(p),m);t:for(let t=0;t<g.length;t++)if(a=g[t],c=g[(t+1)%g.length],u.hitTestLineSegment(d,a,c)){this.handleHit(d,n,e,r,m);break t}}this.app.setBrush({...this.brush.toJson()}),this.app.setSelectedIds(Array.from(r),!0)}onInterrupt=()=>{this.app.setBrush(null)};handleHit(e,t,i,n,s){if(e.parentId===i)return void n.add(e.id);const o=this.app.getOutermostSelectableShape(e),r=this.app.getPageMaskById(o.id);r&&null!==(0,l().Rx)(r,s)&&!(0,l().s3)(t,r)||n.add(o.id)}}class Yo extends ro{static id="dragging_handle";shapeId="";initialHandle={};initialAdjacentHandle=null;markId="";initialPageTransform;initialPageRotation;info={};isPrecise=!1;isPreciseId=null;pointingId=null;onEnter=e=>{const{shape:t,isCreating:i,handle:n}=e;this.info=e,this.shapeId=t.id,this.markId=i?"creating":this.app.mark("dragging handle"),this.initialHandle=(0,r().A4)(n),this.initialPageTransform=this.app.getPageTransform(t),this.initialPageRotation=this.app.getPageRotation(t),this.app.setCursor({type:i?"cross":"grabbing",rotation:0});const s=this.app.getShapeUtil(t).handles(t).sort(Re),o=s.findIndex((t=>t.id===e.handle.id));this.initialAdjacentHandle=null;for(let r=o+1;r<s.length;r++){const t=s[r];if("vertex"===t.type&&"middle"!==t.id&&t.id!==e.handle.id){this.initialAdjacentHandle=t;break}}if(!this.initialAdjacentHandle)for(let r=s.length-1;r>=0;r--){const t=s[r];if("vertex"===t.type&&"middle"!==t.id&&t.id!==e.handle.id){this.initialAdjacentHandle=t;break}}const a=t.props[e.handle.id];this.isPrecise=!1,"binding"===a?.type&&(this.app.setHintingIds([a.boundShapeId]),this.isPrecise=!l().hd.Equals(a.normalizedAnchor,{x:.5,y:.5}),this.isPrecise?this.isPreciseId=a.boundShapeId:this.resetExactTimeout()),this.update()};exactTimeout=-1;resetExactTimeout(){-1!==this.exactTimeout&&this.clearExactTimeout(),this.exactTimeout=setTimeout((()=>{this.isActive&&!this.isPrecise&&(this.isPrecise=!0,this.isPreciseId=this.pointingId,this.update()),this.exactTimeout=-1}),750)}clearExactTimeout(){-1!==this.exactTimeout&&(clearTimeout(this.exactTimeout),this.exactTimeout=-1)}onPointerMove=()=>{this.update()};onKeyDown=()=>{this.update()};onKeyUp=()=>{this.update()};onPointerUp=()=>{this.complete()};onComplete=()=>{this.complete()};onCancel=()=>{this.cancel()};onExit=()=>{this.app.setHintingIds([]),this.app.snaps.clear(),this.app.setCursor({type:"default"})};complete(){this.app.snaps.clear();const{onInteractionEnd:e}=this.info;this.app.instanceState.isToolLocked&&e?this.app.setSelectedTool(e,{shapeId:this.shapeId}):this.parent.transition("idle",{})}cancel(){this.app.bailToMark(this.markId),this.app.snaps.clear();const{onInteractionEnd:e}=this.info;e?this.app.setSelectedTool(e,{shapeId:this.shapeId}):this.parent.transition("idle",{})}update(){const{currentPagePoint:e,originPagePoint:t,shiftKey:i}=this.app.inputs,n=this.app.getShapeById(this.shapeId);if(!n)return;let s=l().hd.Add(l().hd.Rot(l().hd.Sub(e,t),-this.initialPageRotation),this.initialHandle);if(i&&"middle"!==this.initialHandle.id){const{initialAdjacentHandle:e}=this;if(e){const t=l().hd.Angle(e,s),i=(0,l().cL)(t,24)-t;s=l().hd.RotWith(s,e,i)}}this.app.snaps.clear();const{ctrlKey:o}=this.app.inputs;if((this.app.userDocumentSettings.isSnapMode?!o:o)&&"line"===n.type){const e=l().cQ.applyToPoint(this.app.getPageTransformById(n.id),s),t=this.app.snaps.snapLineHandleTranslate({lineId:n.id,handleId:this.initialHandle.id,handlePoint:e}),{nudge:i}=t;if(i.x||i.y){const e=this.app.getDeltaInShapeSpace(n,i);s=l().hd.Add(s,e)}}const r=this.app.getShapeUtil(n),a=r.onHandleChange?.(n,{handle:{...this.initialHandle,x:s.x,y:s.y},isPrecise:this.isPrecise||this.app.inputs.altKey}),c={...n,...a};if(this.initialHandle.canBind){const e=c.props[this.initialHandle.id];"binding"===e?.type?this.app.hintingIds[0]!==e.boundShapeId&&(this.app.setHintingIds([e.boundShapeId]),this.pointingId=e.boundShapeId,this.isPrecise=this.app.inputs.pointerVelocity.len()<.5||this.app.inputs.altKey,this.isPreciseId=this.isPrecise?e.boundShapeId:null,this.resetExactTimeout()):this.app.hintingIds.length>0&&(this.app.setHintingIds([]),this.pointingId=null,this.isPrecise=!1,this.isPreciseId=null,this.resetExactTimeout())}a&&this.app.updateShapes([c],!0)}}class Oo extends ro{static id="editing_shape";onPointerEnter=e=>{switch(e.target){case"shape":{const{selectedIds:t,focusLayerId:i}=this.app,n=this.app.getOutermostSelectableShape(e.shape,(e=>!t.includes(e.id)));n.id!==i&&this.app.setHoveredId(n.id);break}}};onPointerLeave=e=>{if("shape"===e.target)this.app.setHoveredId(null)};onExit=()=>{if(!this.app.pageState.editingId)return;const{editingId:e}=this.app.pageState;if(!e)return;this.app.setEditingId(null);const t=this.app.getShapeById(e),i=this.app.getShapeUtil(t);i.onEditEnd?.(t)};onPointerDown=e=>{if("shape"===e.target){const{shape:t}=e,{editingId:i}=this.app.pageState;if(i){if(t.id===i)return;const e=this.app.getShapeById(i);if(e){const i=this.app.getShapeUtil(t);if(t.type===e.type&&i.canEdit?.(t))return this.app.setEditingId(t.id),this.app.setHoveredId(t.id),void this.app.setSelectedIds([t.id])}}}this.parent.transition("idle",e),this.parent.current.value?.onPointerDown?.(e)};onComplete=e=>{this.parent.transition("idle",e)};onCancel=e=>{this.parent.transition("idle",e)}}class Ro extends ro{static id="idle";onPointerEnter=e=>{switch(e.target){case"canvas":break;case"shape":{const{selectedIds:t,focusLayerId:i}=this.app,n=this.app.getOutermostSelectableShape(e.shape,(e=>!t.includes(e.id)));n.id!==i&&this.app.setHoveredId(n.id);break}}};onPointerLeave=e=>{if("shape"===e.target)this.app.setHoveredId(null)};onPointerDown=e=>{if(!this.app.isMenuOpen)if(e.ctrlKey)this.parent.transition("brushing",e);else switch(e.target){case"canvas":this.parent.transition("pointing_canvas",e);break;case"shape":this.parent.transition("pointing_shape",e);break;case"handle":if(this.app.isReadOnly)break;this.parent.transition("pointing_handle",e);break;case"selection":switch(e.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":this.parent.transition("pointing_rotate_handle",e);break;case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":this.parent.transition("pointing_resize_handle",e);break;default:this.parent.transition("pointing_selection",e)}}};onDoubleClick=e=>{switch(e.target){case"canvas":this.createTextShapeAtPoint(e);break;case"selection":{if(this.app.isReadOnly)break;const{onlySelectedShape:t}=this.app;if(t){const i=this.app.getShapeUtil(t);if("right"===e.handle||"left"===e.handle||"top"===e.handle||"bottom"===e.handle){const e=i.onDoubleClickEdge?.(t);if(e)return this.app.mark("double click edge"),void this.app.updateShapes([e])}i.canEdit(t)&&this.startEditingShape(t,e)}break}case"shape":{const{shape:t}=e,i=this.app.getShapeUtil(t);if("video"!==t.type&&this.app.isReadOnly)break;if(i.onDoubleClick){const e=i.onDoubleClick?.(t);e&&this.app.updateShapes([e])}else i.canEdit(t)?this.startEditingShape(t,e):this.createTextShapeAtPoint(e);break}case"handle":{if(this.app.isReadOnly)break;const{shape:t,handle:i}=e,n=this.app.getShapeUtil(t),s=n.onDoubleClickHandle?.(t,i);s?this.app.updateShapes([s]):n.canEdit(t)&&this.startEditingShape(t,e)}}};onRightClick=e=>{switch(e.target){case"canvas":this.app.selectNone();break;case"shape":{const{selectedIds:t}=this.app.pageState,{shape:i}=e,n=this.app.getOutermostSelectableShape(i,(e=>!this.app.isSelected(e.id)));t.includes(n.id)||(this.app.mark("selecting shape"),this.app.setSelectedIds([n.id]));break}}};onEnter=()=>{this.app.setHoveredId(null),this.app.setCursor({type:"default"})};onCancel=()=>{0===this.app.selectedIds.length||1===this.app.selectedIds.length&&"group"===this.app.getShapeById(this.app.selectedIds[0])?.type&&this.app.focusLayerId!==this.app.currentPageId?this.app.popFocusLayer():(this.app.mark("clearing selection"),this.app.selectNone())};onKeyUp=e=>{if(!this.app.isReadOnly)switch(e.key){case"Enter":{const{selectedShapes:t}=this.app;if(t.every((e=>"group"===e.type)))return void this.app.setSelectedIds(t.flatMap((e=>this.app.getSortedChildIds(e.id))));const{onlySelectedShape:i}=this.app;if(i&&this.app.getShapeUtil(i).canEdit(i))return void this.startEditingShape(i,{...e,target:"shape",shape:i});break}}};startEditingShape(e,t){this.app.mark("editing shape"),this.app.setEditingId(e.id),this.parent.transition("editing_shape",t)}createTextShapeAtPoint(e){this.app.mark("creating text shape");const t=(0,n().n6)(),{x:i,y:s}=this.app.inputs.currentPagePoint;this.app.createShapes([{id:t,type:"text",x:i,y:s,props:{text:"",autoSize:!0}}]);const o=this.app.getShapeById(t);if(!o)return;const r=this.app.getBounds(o);this.app.updateShapes([{id:t,type:"text",x:o.x-r.width/2,y:o.y-r.height/2}]),this.app.setEditingId(t),this.app.select(t),this.parent.transition("editing_shape",e)}}class Go extends ro{static id="pointing_canvas";onEnter=()=>{const{inputs:e}=this.app;e.shiftKey||this.app.selectedIds.length>0&&(this.app.mark("selecting none"),this.app.selectNone())};_clickWasInsideFocusedGroup(){const{focusLayerId:e,inputs:t}=this.app;if(!(0,n().vc)(e))return!1;const i=this.app.getShapeById(e);if(!i)return!1;const s=this.app.getPointInShapeSpace(i,t.currentPagePoint);return this.app.getShapeUtil(i).hitTestPoint(i,s)}onPointerMove=e=>{this.app.inputs.isDragging&&this.parent.transition("brushing",e)};onPointerUp=()=>{this.complete()};onComplete=()=>{this.complete()};onInterrupt=()=>{this.parent.transition("idle",{})};complete(){const{shiftKey:e}=this.app.inputs;e||(this.app.selectNone(),this._clickWasInsideFocusedGroup()||this.app.setFocusLayer(null)),this.parent.transition("idle",{})}}class _o extends ro{static id="pointing_handle";info={};onEnter=e=>{this.info=e;const t=e.shape.props[e.handle.id];"binding"===t?.type&&this.app.setHintingIds([t.boundShapeId]),this.app.setCursor({type:"grabbing"})};onExit=()=>{this.app.setHintingIds([]),this.app.setCursor({type:"default"})};onPointerUp=()=>{this.parent.transition("idle",this.info)};onPointerMove=()=>{this.app.inputs.isDragging&&this.parent.transition("dragging_handle",this.info)};onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};cancel(){this.parent.transition("idle",{})}}const Bo={bottom:"ns-resize",top:"ns-resize",left:"ew-resize",right:"ew-resize",bottom_left:"nesw-resize",bottom_right:"nwse-resize",top_left:"nwse-resize",top_right:"nesw-resize",bottom_left_rotate:"swne-rotate",bottom_right_rotate:"senw-rotate",top_left_rotate:"nwse-rotate",top_right_rotate:"nesw-rotate",mobile_rotate:"grabbing"};class Jo extends ro{static id="pointing_resize_handle";info={};updateCursor(){const e=this.app.selectedShapes,t=Bo[this.info.handle];this.app.setCursor({type:t,rotation:1===e.length?e[0].rotation:0})}onEnter=e=>{this.info=e,this.updateCursor()};onPointerMove=()=>{this.app.inputs.isDragging&&this.parent.transition("resizing",this.info)};onPointerUp=()=>{this.parent.transition("idle",{})};onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};cancel(){this.parent.transition("idle",{})}}class Ho extends ro{static id="pointing_rotate_handle";info={};updateCursor(){const{selectionRotation:e}=this.app;this.app.setCursor({type:Bo[this.info.handle],rotation:e})}onEnter=e=>{this.info=e,this.updateCursor()};onPointerMove=()=>{const{isDragging:e}=this.app.inputs;e&&this.parent.transition("rotating",this.info)};onPointerUp=()=>{this.parent.transition("idle",this.info)};onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};cancel(){this.parent.transition("idle",{})}}class Vo extends ro{static id="pointing_selection";info={};onEnter=e=>{this.info=e};onPointerUp=e=>{this.app.selectNone(),this.parent.transition("idle",e)};onPointerMove=e=>{if(this.app.inputs.isDragging){if(this.app.isReadOnly)return;this.parent.transition("translating",e)}};onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};cancel(){this.parent.transition("idle",{})}}class Uo extends ro{static id="pointing_shape";eventTargetShape={};selectingShape={};didSelectOnEnter=!1;onEnter=e=>{const{shape:t}=e;if(t){if(void 0!==this.app.getShapeUtil(t).onClick)return}if(this.eventTargetShape=e.shape,this.selectingShape=this.app.getOutermostSelectableShape(e.shape),this.selectingShape.id===this.app.focusLayerId)return void(this.didSelectOnEnter=!1);const i=this.app.isWithinSelection(this.selectingShape.id),n=this.app.selectedIds.length>1&&this.app.selectionBounds?.containsPoint(this.app.inputs.currentPagePoint);if(this.didSelectOnEnter=!i&&this.selectingShape.id!==this.app.focusLayerId&&!n,this.didSelectOnEnter){const{inputs:t,selectedIds:i}=this.app,n=this.app.getParentShape(e.shape);n&&"group"===n.type&&this.app.cancelDoubleClick(),t.shiftKey&&!t.altKey?i.includes(this.selectingShape.id)||(this.app.mark("shift selecting shape"),this.app.setSelectedIds([...i,this.selectingShape.id])):(this.app.mark("selecting shape"),this.app.setSelectedIds([this.selectingShape.id]))}};onPointerUp=e=>{const{shape:t}=e;if(t){const e=this.app.getShapeUtil(t);if(e.onClick){const i=e.onClick?.(t);return void(i&&this.app.updateShapes([i]))}}if(this.didSelectOnEnter||this.selectingShape.id===this.app.focusLayerId)this.selectingShape.id===this.app.focusLayerId&&(this.app.selectedIds.length>0?this.app.setSelectedIds([]):this.app.popFocusLayer());else{this.app.mark("selecting shape (pointer up)");const e=this.app.getOutermostSelectableShape(this.eventTargetShape,(e=>!this.app.isSelected(e.id)));if(this.app.selectedIds.includes(e.id))this.app.setSelectedIds(this.app.inputs.shiftKey?this.app.selectedIds.filter((e=>e!==this.selectingShape.id)):[this.selectingShape.id]);else if(this.app.inputs.shiftKey){const t=this.app.getAncestors(e);this.app.setSelectedIds([...this.app.selectedIds.filter((e=>!t.find((t=>t.id===e)))),e.id])}else this.app.setSelectedIds([e.id])}this.parent.transition("idle",e)};onPointerMove=e=>{if(this.app.inputs.isDragging){if(this.app.isReadOnly)return;this.parent.transition("translating",e)}};onCancel=()=>{this.cancel()};onComplete=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};cancel(){this.parent.transition("idle",{})}}class Xo extends ro{static id="resizing";info={};markId="";creationCursorOffset={x:0,y:0};editAfterComplete=!1;snapshot={};onEnter=e=>{const{isCreating:t=!1,editAfterComplete:i=!1,creationCursorOffset:n={x:0,y:0}}=e;this.info=e,this.editAfterComplete=i,this.creationCursorOffset=n,e.isCreating&&this.app.setCursor({type:"cross",rotation:0}),this.snapshot=this._createSnapshot(),this.markId=t?"creating":this.app.mark("starting resizing"),this.handleResizeStart(),this.updateShapes()};onPointerMove=()=>{this.updateShapes()};onKeyDown=()=>{this.updateShapes()};onKeyUp=()=>{this.updateShapes()};onPointerUp=()=>{this.complete()};onComplete=()=>{this.complete()};onCancel=()=>{this.cancel()};cancel(){this.app.bailToMark(this.markId),this.info.onInteractionEnd?this.app.setSelectedTool(this.info.onInteractionEnd):this.parent.transition("idle",{})}complete(){if(this.handleResizeEnd(),this.editAfterComplete&&this.app.onlySelectedShape)return this.app.setEditingId(this.app.onlySelectedShape.id),this.app.setSelectedTool("select"),void this.app.root.current.value.transition("editing_shape",{});this.app.instanceState.isToolLocked&&this.info.onInteractionEnd?this.app.setSelectedTool(this.info.onInteractionEnd):this.parent.transition("idle",{})}handleResizeStart(){const{shapeSnapshots:e}=this.snapshot,t=[];e.forEach((({shape:e})=>{const i=this.app.getShapeUtil(e),n=i.onResizeStart?.(e);n&&t.push(n)})),t.length>0&&this.app.updateShapes(t)}handleResizeEnd(){const{shapeSnapshots:e}=this.snapshot,t=[];e.forEach((({shape:e})=>{const i=this.app.getShapeById(e.id),n=this.app.getShapeUtil(e),s=n.onResizeEnd?.(e,i);s&&t.push(s)})),t.length>0&&this.app.updateShapes(t)}updateShapes(){const{altKey:e,shiftKey:t}=this.app.inputs,{shapeSnapshots:i,selectionBounds:n,cursorHandleOffset:s,selectedIds:o,selectionRotation:r,canShapesDeform:a}=this.snapshot,c=t||!a,{ctrlKey:d}=this.app.inputs,u=this.app.inputs.currentPagePoint.clone().sub(s).sub(this.creationCursorOffset),h=this.app.inputs.originPagePoint.clone().sub(s);this.app.isGridMode&&!d&&u.snapToGrid(this.app.gridSize);const p=this.info.handle,g=Ko(p,Math.PI);this.app.snaps.clear();if((this.app.userDocumentSettings.isSnapMode?!d:d)&&r%l().DD==0){const{nudge:t}=this.app.snaps.snapResize({dragDelta:l().hd.Sub(u,h),initialSelectionPageBounds:this.snapshot.initialSelectionPageBounds,handle:Ko(p,r),isAspectRatioLocked:c,isResizingFromCenter:e});u.add(t)}const m=l().hd.RotWith(e?n.center:n.getHandlePoint(g),n.point,r),I=l().hd.Sub(u,m).rot(-r),f=l().hd.Sub(h,m).rot(-r),y=l().hd.DivV(I,f);Number.isFinite(y.x)||(y.x=1),Number.isFinite(y.y)||(y.y=1);const b="top"===p||"bottom"===p,w="left"===p||"right"===p;c?w?y.y=Math.abs(y.x):b?y.x=Math.abs(y.y):Math.abs(y.x)>Math.abs(y.y)?y.y=Math.abs(y.x)*(y.y<0?-1:1):y.x=Math.abs(y.y)*(y.x<0?-1:1):(b&&(y.x=1),w&&(y.y=1)),this.info.isCreating||this.updateCursor({dragHandle:p,isFlippedX:y.x<0,isFlippedY:y.y<0,rotation:r});for(const l of i.keys()){const e=i.get(l);this.app.resizeShape(l,y,{initialBounds:e.bounds,dragHandle:p,initialPageTransform:e.pageTransform,initialShape:e.shape,mode:1===o.length&&l===o[0]?"resize_bounds":"scale_shape",scaleOrigin:m,scaleAxisRotation:r})}}updateCursor({dragHandle:e,isFlippedX:t,isFlippedY:i,rotation:n}){const s={...this.app.cursor};switch(e){case"top_left":case"bottom_right":s.type="nwse-resize",t!==i&&(s.type="nesw-resize");break;case"top_right":case"bottom_left":s.type="nesw-resize",t!==i&&(s.type="nwse-resize")}s.rotation=n,this.app.setCursor(s)}onExit=()=>{this.app.snaps.clear()};_createSnapshot=()=>{const{selectedIds:e,selectionRotation:t,inputs:{originPagePoint:i}}=this.app,n=this.app.selectionBounds,s=l().hd.RotWith(n.getHandlePoint(this.info.handle),n.point,t),o=l().hd.Sub(i,s),r=new Map;e.forEach((t=>{const i=this.app.getShapeById(t);if(i){if(r.set(i.id,this._createShapeSnapshot(i)),"frame"===i.type&&1===e.length)return;this.app.visitDescendants(i.id,(e=>{const t=this.app.getShapeById(e);if(t&&(r.set(t.id,this._createShapeSnapshot(t)),"frame"===t.type))return!1}))}}));const a=![...r.values()].some((e=>!(0,l().jw)(e.pageRotation,t)||e.isAspectRatioLocked));return{shapeSnapshots:r,selectionBounds:n,cursorHandleOffset:o,selectionRotation:t,selectedIds:e,canShapesDeform:a,initialSelectionPageBounds:this.app.selectedPageBounds}};_createShapeSnapshot=e=>{const t=this.app.getPageTransform(e),i=this.app.getShapeUtil(e);return{shape:e,bounds:i.bounds(e),pageTransform:t,pageRotation:l().cQ.Decompose(t).rotation,isAspectRatioLocked:i.isAspectRatioLocked(e)}}}const Fo=["top","top_right","right","bottom_right","bottom","bottom_left","left","top_left"];function Ko(e,t){t%=l().uA;const i=Math.round(t/(l().PI/4)),n=Fo.indexOf(e);return Fo[(n+i)%Fo.length]}class Qo extends ro{static id="rotating";snapshot={};info={};markId="";onEnter=e=>{this.info=e,this.markId=this.app.mark("rotate start"),this.snapshot=_e({app:this.app}),this.handleStart()};onExit=()=>{this.app.setCursor({type:"none"}),this.snapshot={}};onPointerMove=()=>{this.update()};onKeyDown=()=>{this.update()};onKeyUp=()=>{this.update()};onPointerUp=()=>{this.complete()};onComplete=()=>{this.complete()};onCancel=()=>{this.app.bailToMark(this.markId),this.parent.transition("idle",this.info)};update=()=>{const e=this._getRotationFromPointerPosition({snapToNearestDegree:!1});Be({app:this.app,delta:e,snapshot:this.snapshot,stage:"update"}),this.app.setCursor({type:Bo[this.info.handle],rotation:e+this.snapshot.initialSelectionRotation})};complete=()=>{Be({app:this.app,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!0}),snapshot:this.snapshot,stage:"end"}),this.parent.transition("idle",this.info)};handleStart(){const e=this._getRotationFromPointerPosition({snapToNearestDegree:!1});Be({app:this.app,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!1}),snapshot:this.snapshot,stage:"start"}),this.app.setCursor({type:Bo[this.info.handle],rotation:e+this.snapshot.initialSelectionRotation})}_getRotationFromPointerPosition({snapToNearestDegree:e}){const{selectionPageCenter:t,inputs:{shiftKey:i,currentPagePoint:n}}=this.app,{initialCursorAngle:s,initialSelectionRotation:o}=this.snapshot;let r=o+(t.angle(n)-s);if(i)r=(0,l().cL)(r,24);else if(e&&(r=Math.round(r/l().p8)*l().p8,this.app.isCoarsePointer)){const e=(0,l().cL)(r,4),t=(0,l().ST)(r,e);Math.abs(t)<(0,l().tR)(5)&&(r=e)}return r-o}}class $o extends ro{static id="scribble_brushing";static canActivateInReadOnly=!0;hits=new Set;size=0;scribble={};initialSelectedIds=new Set;newlySelectedIds=new Set;onEnter=()=>{this.initialSelectedIds=new Set(this.app.inputs.shiftKey?this.app.selectedIds:[]),this.newlySelectedIds=new Set,this.size=0,this.hits.clear(),this.startScribble(),this.updateBrushSelection(),requestAnimationFrame((()=>{this.app.setBrush(null)}))};onExit=()=>{this.app.setErasingIds([]),this.scribble.stop()};onPointerMove=()=>{this.updateBrushSelection()};onPointerUp=()=>{this.complete()};onKeyDown=()=>{this.updateBrushSelection()};onKeyUp=()=>{this.app.inputs.altKey?this.updateBrushSelection():this.parent.transition("brushing",{})};startScribble=()=>{this.scribble=new Us({onUpdate:this.onScribbleUpdate,onComplete:this.onScribbleComplete,color:"selection-stroke",opacity:.32,size:12}),this.app.on("tick",this.scribble.tick)};pushPointToScribble=()=>{const{x:e,y:t}=this.app.inputs.currentPagePoint;this.scribble.addPoint(e,t)};onScribbleUpdate=e=>{this.app.setScribble(e)};onScribbleComplete=()=>{this.app.off("tick",this.scribble.tick),this.app.setScribble(null)};updateBrushSelection(){const{shapesArray:e,inputs:{originPagePoint:t,previousPagePoint:i,currentPagePoint:n}}=this.app;this.pushPointToScribble();const s=e;let o,r;for(let a=0,c=s.length;a<c;a++)if(o=s[a],r=this.app.getShapeUtil(o),!("group"===o.type||this.newlySelectedIds.has(o.id)||"frame"===o.type&&r.hitTestPoint(o,this.app.getPointInShapeSpace(o,t)))&&r.hitTestLineSegment(o,this.app.getPointInShapeSpace(o,i),this.app.getPointInShapeSpace(o,n))){const e=this.app.getOutermostSelectableShape(o),t=this.app.getPageMaskById(e.id);if(t){if(null!==(0,l().NC)(i,n,t)){if(!(0,l().s3)(n,t))continue}}this.newlySelectedIds.add(e.id)}this.app.setSelectedIds([...new Set([...this.newlySelectedIds,...this.initialSelectedIds])],!0)}onCancel=()=>{this.cancel()};onComplete=()=>{this.complete()};complete(){this.parent.transition("idle",{})}cancel(){this.app.setSelectedIds([...this.initialSelectedIds],!0),this.parent.transition("idle",{})}}class qo extends ro{static id="select";static initial="idle";static children=()=>[Ro,Go,Uo,Wo,Po,$o,Vo,Jo,Oo,Xo,Qo,Ho,_o,Yo];styles=["color","opacity","dash","fill","size"];onExit=()=>{this.app.pageState.editingId&&this.app.setEditingId(null)}}class er extends ro{static id="idle";onPointerEnter=e=>{switch(e.target){case"canvas":break;case"shape":{const{selectedIds:t,focusLayerId:i}=this.app,n=this.app.getOutermostSelectableShape(e.shape,(e=>!t.includes(e.id)));n.id!==i&&"text"===n.type&&this.app.setHoveredId(n.id);break}}};onPointerLeave=e=>{if("shape"===e.target)this.app.setHoveredId(null)};onPointerDown=e=>{const{hoveredId:t}=this.app;if(t){const i=this.app.getShapeById(t);if("text"===i.type)return void requestAnimationFrame((()=>{this.app.setSelectedIds([i.id]),this.app.setEditingId(i.id),this.app.setSelectedTool("select.editing_shape",{...e,target:"shape",shape:i})}))}this.parent.transition("pointing",e)};onEnter=()=>{this.app.setCursor({type:"cross"})};onKeyDown=e=>{if("Enter"===e.key){const t=this.app.selectedShapes[0];t&&"geo"===t.type&&(this.app.setSelectedTool("select"),this.app.setEditingId(t.id),this.app.root.current.value.transition("editing_shape",{...e,target:"shape",shape:t}))}};onCancel=()=>{this.app.setSelectedTool("select")}}class tr extends ro{static id="pointing";shape;onExit=()=>{this.app.setHintingIds([])};onPointerMove=e=>{if(this.app.inputs.isDragging){const{inputs:{originPagePoint:t}}=this.app,i=(0,n().n6)();if(this.app.mark("creating"),this.app.createShapes([{id:i,type:"text",x:t.x,y:t.y,props:{text:"",autoSize:!1,w:20}}]),this.app.select(i),this.shape=this.app.getShapeById(i),!this.shape)return;this.app.setSelectedTool("select.resizing",{...e,target:"selection",handle:"right",isCreating:!0,creationCursorOffset:{x:1,y:1},editAfterComplete:!0,onInteractionEnd:"text"})}};onPointerUp=()=>{this.complete()};onComplete=()=>{this.cancel()};onCancel=()=>{this.cancel()};onInterrupt=()=>{this.cancel()};complete(){this.app.mark("creating text shape");const e=(0,n().n6)(),{x:t,y:i}=this.app.inputs.currentPagePoint;this.app.createShapes([{id:e,type:"text",x:t,y:i,props:{text:"",autoSize:!0}}],!0),this.app.setEditingId(e),this.app.setSelectedTool("select"),this.app.root.current.value?.transition("editing_shape",{})}cancel(){this.parent.transition("idle",{}),this.app.bailToMark("creating")}}class ir extends ro{static id="text";static initial="idle";static children=()=>[er,tr];styles=["color","opacity","font","align","size"]}class nr extends ro{static id="root";static initial="select";static children=()=>[qo,jo,fo,po,ir,Eo,co,Ao,To,Co]}var sr=Object.defineProperty,or=Object.getOwnPropertyDescriptor,rr=(e,t,i,n)=>{for(var s,o=n>1?void 0:n?or(t,i):t,r=e.length-1;r>=0;r--)(s=e[r])&&(o=(n?s(t,i,o):s(o))||o);return n&&o&&sr(t,i,o),o};function ar(e){return"arrow"===e.type||"line"===e.type||"draw"===e.type}const lr=class extends(()=>i(763770))().EventEmitter{constructor({config:e=Zs.default,store:t,getContainer:i}){if(super(),t.schema!==e.storeSchema)throw new Error("Store schema does not match schema given to App");this.config=e,this.store=t,this.getContainer=i??(()=>document.body),this.textMeasure=new no(this),this.shapeUtils=Object.fromEntries(e.shapes.map((e=>[e.type,e.createShapeUtils(this)]))),"undefined"!=typeof window&&"navigator"in window?(this.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),this.isIos=!!navigator.userAgent.match(/iPad/i)||!!navigator.userAgent.match(/iPhone/i)):(this.isSafari=!1,this.isIos=!1),this.colors=new Map(lr.styles.color.map((e=>[e.id,`var(--palette-${e.id})`]))),this.root=new nr(this),this.root.children&&e.tools.forEach((e=>{this.root.children[e.id]=new e(this)})),this.store.onBeforeDelete=e=>{"shape"===e.typeName?this._shapeWillBeDeleted(e):"page"===e.typeName&&this._pageWillBeDeleted(e)},this.store.onAfterChange=(e,t)=>{this._updateDepth++,this._updateDepth>1e3&&console.error("[onAfterChange] Maximum update depth exceeded, bailing out."),"shape"===e.typeName&&"shape"===t.typeName?this._shapeDidChange(e,t):"instance_page_state"===e.typeName&&"instance_page_state"===t.typeName&&this._tabStateDidChange(e,t),this._updateDepth--},this.store.onAfterCreate=e=>{"shape"===e.typeName&&cn.is(e)&&this._arrowDidUpdate(e)},this._shapeIds=((e,t)=>{const i=e.query.ids("shape");let s=null;function r(){const n=t();return s=n,new Set([...i.value].filter((t=>Ts(e,n,e.get(t)))))}return(0,c().EW)("_shapeIdsInCurrentPage",((i,a)=>{if((0,c()._O)(i))return r();const l=t();if(l!==s)return r();const d=e.history.getDiffSince(a);if(d===c().c2)return r();const u=new(o().zq)(i);for(const t of d){for(const i of Object.values(t.added))(0,n().o2)(i)&&Ts(e,l,i)&&u.add(i.id);for(const[i,s]of Object.values(t.updated))(0,n().o2)(s)&&(Ts(e,l,s)?u.add(s.id):u.remove(s.id));for(const e of Object.keys(t.removed))(0,n().vc)(e)&&u.remove(e)}const h=u.get();return h?(0,c()._D)(h.value,h.diff):i}))})(this.store,(()=>this.currentPageId)),this._parentIdsToChildIds=(e=>{const t=e.query.ids("shape");function i(){const i={};return t.value.forEach((t=>{const n=e.get(t);i[n.parentId]||(i[n.parentId]=[]),i[n.parentId].push([t,n.index])})),Object.values(i).forEach((e=>e.sort(((e,t)=>e[1]<t[1]?-1:1)))),i}return(0,c().EW)("parentsToChildrenWithIndexes",((t,s)=>{if((0,c()._O)(t))return i();const o=e.history.getDiffSince(s);if(o===c().c2)return i();if(0===o.length)return t;let r=null;const a=e=>{r||(r={...t}),r[e]?r[e]===t[e]&&(r[e]=[...r[e]]):r[e]=[]},l=new Set;let d;for(let e=0,i=o.length;e<i;e++){d=o[e];for(const e of Object.values(d.added))(0,n().o2)(e)&&(a(e.parentId),r[e.parentId].push([e.id,e.index]),l.add(r[e.parentId]));for(const[e,t]of Object.values(d.updated))if((0,n().o2)(t)&&(0,n().o2)(e))if(e.parentId!==t.parentId)a(e.parentId),a(t.parentId),r[e.parentId].splice(r[e.parentId].findIndex((e=>e[0]===t.id)),1),r[t.parentId].push([t.id,t.index]),l.add(r[t.parentId]);else if(e.index!==t.index){a(t.parentId);const e=r[t.parentId].findIndex((e=>e[0]===t.id));r[t.parentId][e]=[t.id,t.index],l.add(r[t.parentId])}for(const e of Object.values(d.removed))(0,n().o2)(e)&&(a(e.parentId),r[e.parentId].splice(r[e.parentId].findIndex((t=>t[0]===e.id)),1))}for(const e of l)e.sort(((e,t)=>e[1]<t[1]?-1:1));return r??t}))})(this.store),this.disposables.add(this.store.listen((e=>{this.emit("change",e)})));const s=this.getContainer(),r=()=>{this._isFocused.set(!0)},a=()=>{this._isFocused.set(!1)};s.addEventListener("focusin",r),s.addEventListener("focus",r),s.addEventListener("focusout",a),s.addEventListener("blur",a),this.disposables.add((()=>{s.removeEventListener("focusin",r),s.removeEventListener("focus",r),s.removeEventListener("focusout",a),s.removeEventListener("blur",a)})),this.store.ensureStoreIsUsable(),this.root.enter(void 0,"initial"),this.updateCullingBounds(),requestAnimationFrame((()=>{this._tickManager.start()}))}store;config;root;_shapeIds;disposables=new Set;_dprManager=new Rs(this);_cameraManager=new Ys(this);_activeAreaManager=new Ps(this);_tickManager=new so(this);_updateDepth=0;snaps=new qs(this);isSafari;isIos;_canMoveCamera=(0,c().eU)("can move camera",!0);get canMoveCamera(){return this._canMoveCamera.value}set canMoveCamera(e){this._canMoveCamera.set(e)}_isFocused=(0,c().eU)("_isFocused",!1);get isFocused(){return this._isFocused.value}getContainer;get userId(){return this.store.props.userId}get instanceId(){return this.store.props.instanceId}annotateError(e,{origin:t,willCrashApp:i,tags:n,extras:s}){const o=this.createErrorAnnotations(t,i);(0,r().TF)(e,{tags:{...o.tags,...n},extras:{...o.extras,...s}}),i&&this.store.markAsPossiblyCorrupted()}createErrorAnnotations(e,t){try{return{tags:{origin:e,willCrashApp:t},extras:{activeStateNode:this.root.path.value,selectedShapes:this.selectedShapes,editingShape:this.editingId?this.getShapeById(this.editingId):void 0,inputs:this.inputs}}}catch{return{tags:{origin:e,willCrashApp:t},extras:{}}}}_crashingError=null;get crashingError(){return this._crashingError}crash(e){this._crashingError=e,this.store.markAsPossiblyCorrupted(),this.emit("crash")}get devicePixelRatio(){return this._dprManager.dpr.value}openMenus=new Set;get isMenuOpen(){return this.openMenus.size>0}_isCoarsePointer=(0,c().eU)("isCoarsePointer",!1);get isCoarsePointer(){return this._isCoarsePointer.value}set isCoarsePointer(e){this._isCoarsePointer.set(e)}_isChangingStyle=(0,c().eU)("isChangingStyle",!1);_isChangingStyleTimeout=-1;get isChangingStyle(){return this._isChangingStyle.value}set isChangingStyle(e){this._isChangingStyle.set(e),clearTimeout(this._isChangingStyleTimeout),e&&(this._isChangingStyleTimeout=setTimeout((()=>this.isChangingStyle=!1),2e3))}get _pageTransformCache(){return this.store.createComputedCache("pageTransformCache",(e=>{if(n()._P.isId(e.parentId))return this.getTransform(e);const t=this._pageTransformCache.get(e.parentId);return l().cQ.Compose(t,this.getTransform(e))}))}get _pageBoundsCache(){return this.store.createComputedCache("pageBoundsCache",(e=>{const t=this._pageTransformCache.get(e.id);if(!t)return new(l().Ax);return l().Ax.FromPoints(l().cQ.applyToPoints(t,this.getShapeUtil(e).outline(e)))}))}get _pageMaskCache(){return this.store.createComputedCache("pageMaskCache",(e=>{if(n()._P.isId(e.parentId))return;const t=this.getAncestorsById(e.id).filter((e=>"frame"===e.type));if(0===t.length)return;return t.map((e=>l().cQ.applyToPoints(this._pageTransformCache.get(e.id),this.getOutline(e)))).reduce(((e,t)=>t&&e?(0,l().oQ)(e,t)??void 0:void 0))}))}getPageMaskById(e){return this._pageMaskCache.get(e)}get _clipPathCache(){return this.store.createComputedCache("clipPathCache",(e=>{const t=this._pageMaskCache.get(e.id);if(!t)return;const i=this._pageTransformCache.get(e.id);if(!i)return;if(0===t.length)return"polygon(0px 0px, 0px 0px, 0px 0px)";return`polygon(${l().cQ.applyToPoints(l().cQ.Inverse(i),t).map((e=>`${e.x}px ${e.y}px`)).join(",")})`}))}getClipPathById(e){return this._clipPathCache.get(e)}_parentIdsToChildIds;dispose(){this.disposables.forEach((e=>e())),this.disposables.clear()}history=new Vs(this,(()=>this._complete()),(e=>{this.annotateError(e,{origin:"history.batch",willCrashApp:!0}),this.crash(e)}));undo(){return this.history.undo()}get canUndo(){return this.history.numUndos>0}redo(){return this.history.redo(),this}get canRedo(){return this.history.numRedos>0}mark(e,t,i){return this.history.mark(e,t,i)}bail(){return this.history.bail(),this}bailToMark(e){return this.history.bailToMark(e),this}batch(e){return this.history.batch(e),this}shapeUtils;getShapeUtil(e){return this.shapeUtils[e.type]}getShapeUtilByDef(e){return this.shapeUtils[e.type]}_childIdsCache=new Y;getSortedChildIds(e){const t=this._parentIdsToChildIds.value[e];return t?this._childIdsCache.get(t,(()=>t.map((([e])=>e)))):c().Ml}visitDescendants(e,t){const i=this.getSortedChildIds(e);for(const n of i)!1!==t(n)&&this.visitDescendants(n,t)}get erasingIds(){return this.pageState.erasingIds}get hintingIds(){return this.pageState.hintingIds}get erasingIdsSet(){return new Set(this.erasingIds)}_extractSharedProps(e,t){if("group"===e.type){const i=this._parentIdsToChildIds.value[e.id];if(!i)return;for(let e=0,n=i.length;e<n;e++)this._extractSharedProps(this.getShapeById(i[e][0]),t)}else{const i=Object.entries(e.props);let n;for(let e=0,s=i.length;e<s;e++)switch(n=i[e],t[n[0]]){case void 0:t[n[0]]=n[1];break;case null:case n[1]:continue;default:t[n[0]]=null}}}_selectionSharedProps=(0,c().EW)("_selectionSharedProps",(()=>{const{selectedShapes:e}=this,t={};for(let i=0,n=e.length;i<n;i++)this._extractSharedProps(e[i],t);return t}));get allowUiPaste(){return Boolean(navigator.clipboard)&&Boolean(navigator.clipboard.read)}_prevProps={};get props(){let e;if(this.isIn("select")&&this.selectedIds.length>0)e=this._selectionSharedProps.value;else{const t=this.root.current.value;if(0===t.styles.length)e=null;else{const{propsForNextShape:i}=this.instanceState;e=Object.fromEntries(t.styles.map((e=>[e,i[e]])))}}return JSON.stringify(this._prevProps)===JSON.stringify(e)?this._prevProps:(this._prevProps=e,e)}get shapeIds(){return this._shapeIds.value}_invalidParents=new Set;_complete(){const{lastUpdatedPageId:e,lastUsedTabId:t}=this.userDocumentSettings;t===this.instanceId&&e===this.currentPageId||this.store.put([{...this.userDocumentSettings,lastUsedTabId:this.instanceId,lastUpdatedPageId:this.currentPageId}]);for(const i of this._invalidParents){this._invalidParents.delete(i);const e=this.getShapeById(i);if(!e)continue;const t=this.getShapeUtil(e),n=t.onChildrenChange?.(e);n?.length&&this.updateShapes(n,!0)}this.updateUserPresence(),this.emit("update")}get _arrowBindingsIndex(){return(e=>{const t=e.query.filterHistory("shape"),i=e.query.records("shape",(()=>({type:{eq:"arrow"}})));function n(){const e=i.value,t={};for(const i of e){const{start:e,end:n}=i.props;if("binding"===e.type){const n=t[e.boundShapeId];n?n.push({arrowId:i.id,handleId:"start"}):t[e.boundShapeId]=[{arrowId:i.id,handleId:"start"}]}if("binding"===n.type){const e=t[n.boundShapeId];e?e.push({arrowId:i.id,handleId:"end"}):t[n.boundShapeId]=[{arrowId:i.id,handleId:"end"}]}}return t}return(0,c().EW)("arrowBindingsIndex",((e,i)=>{if((0,c()._O)(e))return n();const s=e,o=t.getDiffSince(i);if(o===c().c2)return n();let r;function a(e){r||(r={...s}),r[e]?r[e]===s[e]&&(r[e]=[...r[e]]):r[e]=[]}function l(e,t,i){a(e),r[e]=r[e].filter((e=>e.arrowId!==t||e.handleId!==i)),0===r[e].length&&delete r[e]}function d(e,t,i){a(e),r[e].push({arrowId:t,handleId:i})}for(const t of o){for(const e of Object.values(t.added))if(cn.is(e)){const{start:t,end:i}=e.props;"binding"===t.type&&d(t.boundShapeId,e.id,"start"),"binding"===i.type&&d(i.boundShapeId,e.id,"end")}for(const[e,i]of Object.values(t.updated))if(cn.is(e)&&cn.is(i))for(const t of["start","end"]){const n=e.props[t],s=i.props[t];"binding"===n.type&&"point"===s.type?l(n.boundShapeId,e.id,t):"point"===n.type&&"binding"===s.type?d(s.boundShapeId,i.id,t):"binding"===n.type&&"binding"===s.type&&n.boundShapeId!==s.boundShapeId&&(l(n.boundShapeId,e.id,t),d(s.boundShapeId,i.id,t))}for(const e of Object.values(t.removed))if(cn.is(e)){const{start:t,end:i}=e.props;"binding"===t.type&&l(t.boundShapeId,e.id,"start"),"binding"===i.type&&l(i.boundShapeId,e.id,"end")}}return r??s}))})(this.store)}getArrowsBoundTo(e){return this._arrowBindingsIndex.value[e]||c().Ml}_reparentArrow(e){const t=this.getShapeById(e);if(!t)return;const{start:i,end:n}=t.props,s="binding"===i.type?this.getShapeById(i.boundShapeId):void 0,o="binding"===n.type?this.getShapeById(n.boundShapeId):void 0,r=this.getParentPageId(t);if(!r)return;let a;if(s&&o)a=this.findCommonAncestor([s,o])??r;else{if(!s&&!o)return;a=r}a&&a!==t.parentId&&this.reparentShapesById([e],a);const l=this.getShapeById(e),c=this.getNearestSiblingShape(l,s),d=this.getNearestSiblingShape(l,o);let u,h;if(c&&d)u=c.index>d.index?c:d;else if(c&&!d)u=c;else{if(!d||c)return;u=d}const p=this.getSortedChildIds(u.parentId).map((e=>this.getShapeById(e))).filter((e=>e.index>u.index));if(p.length){const e=p.find((e=>"arrow"!==e.type));if(l.index>u.index&&(!e||l.index<e.index))return;h=ze(u.index,p[0].index)}else h=Pe(u.index);h!==l.index&&this.updateShapes([{id:e,type:"arrow",index:h}])}_unbindArrowTerminal(e,t){const{x:i,y:n}=Gi(this,e)[t];this.store.put([{...e,props:{...e.props,[t]:{type:"point",x:i,y:n}}}])}_shapeWillBeDeleted(e){e.parentId&&(0,n().vc)(e.parentId)&&this._invalidParents.add(e.parentId);const t=this._arrowBindingsIndex.value[e.id];if(t?.length)for(const{arrowId:n,handleId:r}of t){const e=this.getShapeById(n);e&&this._unbindArrowTerminal(e,r)}const i=this.store.query.records("instance_page_state").value,s=new Set([e.id]),o=(0,r().oE)(i.map((e=>this._cleanupInstancePageState(e,s))));o.length&&this.store.put(o)}_arrowDidUpdate(e){for(const t of["start","end"]){const i=e.props[t];if("binding"!==i.type)continue;const n=this.getShapeById(i.boundShapeId),s=this.getParentPageId(e)===this.getParentPageId(n);n&&s||this._unbindArrowTerminal(e,t)}this._reparentArrow(e.id)}_cleanupInstancePageState(e,t){let i=null;const n=e.selectedIds.filter((e=>!t.has(e)));n.length!==e.selectedIds.length&&(i||(i={...e}),i.selectedIds=n);const s=e.erasingIds.filter((e=>!t.has(e)));s.length!==e.erasingIds.length&&(i||(i={...e}),i.erasingIds=s),e.hoveredId&&t.has(e.hoveredId)&&(i||(i={...e}),i.hoveredId=null),e.editingId&&t.has(e.editingId)&&(i||(i={...e}),i.editingId=null);const o=e.hintingIds.filter((e=>!t.has(e)));return o.length!==e.hintingIds.length&&(i||(i={...e}),i.hintingIds=o),e.focusLayerId&&t.has(e.focusLayerId)&&(i||(i={...e}),i.focusLayerId=null),i}_shapeDidChange(e,t){if(cn.is(t)&&this._arrowDidUpdate(t),e.parentId!==t.parentId){const e=e=>{const t=this._arrowBindingsIndex.value[e];if(t?.length)for(const i of t)this._reparentArrow(i.arrowId)};e(t.id),this.visitDescendants(t.id,e)}if(e.parentId!==t.parentId&&n()._P.isId(t.parentId)){const i=new Set([e.id]);this.visitDescendants(e.id,(e=>{i.add(e)}));for(const e of this.store.query.records("instance_page_state").value){if(e.pageId===t.parentId)continue;const n=this._cleanupInstancePageState(e,i);n&&this.store.put([n])}}e.parentId&&(0,n().vc)(e.parentId)&&this._invalidParents.add(e.parentId),t.parentId!==e.parentId&&(0,n().vc)(t.parentId)&&this._invalidParents.add(t.parentId)}_tabStateDidChange(e,t){if(e?.selectedIds!==t?.selectedIds){const e=t.selectedIds.filter((e=>{let i=this.getShapeById(e)?.parentId;for(;(0,n().vc)(i);){if(t.selectedIds.includes(i))return!1;i=this.getShapeById(i)?.parentId}return!0})),i=0===e.length?t?.focusLayerId:this.findCommonAncestor((0,r().oE)(e.map((e=>this.getShapeById(e)))),(e=>"group"===e.type));e.length===t.selectedIds.length&&i==t.focusLayerId||this.store.put([{...t,selectedIds:e,focusLayerId:i??null}])}}_pageWillBeDeleted(e){const t=this.store.query.exec("instance",{currentPageId:{eq:e.id}});if(!t.length)return;const i=this.pages.find((t=>t.id!==e.id))?.id;i&&this.store.put(t.map((e=>({...e,currentPageId:i}))))}get documentSettings(){return this.store.get(n().yI)}get gridSize(){return this.documentSettings.gridSize}get userSettings(){return this.store.get(this.userId)}get _userDocumentSettings(){return this.store.query.record("user_document",(()=>({userId:{eq:this.userId}})))}get userDocumentSettings(){return this._userDocumentSettings.value}get isReadOnly(){return this.userDocumentSettings.isReadOnly}get isGridMode(){return this.userDocumentSettings.isGridMode}setGridMode(e){this.updateUserDocumentSettings({isGridMode:e},!0)}setDarkMode(e){this.updateUserDocumentSettings({isDarkMode:e},!0)}enableReadOnlyMode(){this.updateUserDocumentSettings({isReadOnly:!0}),this.setSelectedTool("hand")}_isPenMode=(0,c().eU)("isPenMode",!1);_touchEventsRemainingBeforeExitingPenMode=0;get isPenMode(){return this._isPenMode.value}setPenMode(e){e&&(this._touchEventsRemainingBeforeExitingPenMode=3),this._isPenMode.set(e)}get user(){return this.store.get(this.userId)}get instanceState(){return this.store.get(this.instanceId)}get cursor(){return this.instanceState.cursor}get brush(){return this.instanceState.brush}get scribble(){return this.instanceState.scribble}get _pageState(){return this.store.query.record("instance_page_state",(()=>({pageId:{eq:this.currentPageId},instanceId:{eq:this.instanceId}})),"app._pageState")}get pageState(){return this._pageState.value}get camera(){return this.store.get(this.pageState.cameraId)}get zoomLevel(){return this.camera.z}get selectedIds(){return this.pageState.selectedIds}get selectedIdsSet(){return new Set(this.selectedIds)}get _pages(){return this.store.query.records("page")}get pages(){return this._pages.value.sort(Re)}get currentPage(){return this.getPageById(this.currentPageId)}get currentPageId(){return this.instanceState.currentPageId}getPageById(e){return this.store.get(e)}get _pageStates(){return this.store.query.records("instance_page_state",(()=>({instanceId:{eq:this.instanceId}})))}getPageStateByPageId(e){return this._pageStates.value.find((t=>t.pageId===e))}getPageInfoById(e){return this.store.get(e)}getShapesInPage(e){const t=this.store.query.exec("shape",{parentId:{eq:e}});return this.getShapesAndDescendantsInOrder(t.map((e=>e.id)))}getTransform(e){return this.getShapeUtil(e).transform(e)}getParentTransform(e){return n()._P.isId(e.parentId)?l().cQ.Identity():this._pageTransformCache.get(e.parentId)??l().cQ.Identity()}getPageTransform(e){return this.getPageTransformById(e.id)}getPageTransformById(e){return this._pageTransformCache.get(e)}getPagePointById(e){const t=this.getPageTransformById(e);if(t)return l().cQ.applyToPoint(t,new(l().hd))}getPageCenter(e){const t=this.getPageTransformById(e.id);if(!t)return null;const i=this.getShapeUtil(e).center(e);return l().cQ.applyToPoint(t,i)}getPageCenterById(e){const t=this.getShapeById(e);return this.getPageCenter(t)}getPageRotation(e){return this.getPageRotationById(e.id)}getPageRotationById(e){const t=this.getPageTransformById(e);return t?l().cQ.Decompose(t).rotation:0}getBounds(e){return this.getShapeUtil(e).bounds(e)}getBoundsById(e){const t=this.getShapeById(e);if(t)return this.getBounds(t)}getPageBounds(e){return this.getPageBoundsById(e.id)}getPageBoundsById(e){return this._pageBoundsCache.get(e)}getMaskedPageBounds(e){return this.getMaskedPageBoundsById(e.id)}getMaskedPageBoundsById(e){const t=this._pageBoundsCache.get(e);if(!t)return;const i=this._pageMaskCache.get(e);if(i){const e=(0,l().oQ)(i,t.corners);if(!e)return;return l().Ax.FromPoints(e)}return t}getOutline(e){return this.getShapeUtil(e).outline(e)}getOutlineById(e){return this.getOutline(this.getShapeById(e))}getAncestors(e,t=[]){const i=e.parentId;if(n()._P.isId(i))return t.reverse(),t;const s=this.store.get(i);return t.push(s),this.getAncestors(s,t)}getAncestorsById(e,t=[]){const i=this.getShapeById(e);return this.getAncestors(i,t)}findAncestor(e,t){const i=e.parentId;if(n()._P.isId(i))return;const s=this.getShapeById(i);return s?t(s)?s:this.findAncestor(s,t):void 0}hasAncestor(e,t){return!!e&&(e.parentId===t||this.hasAncestor(this.getParentShape(e),t))}findCommonAncestor(e,t){if(0===e.length)return;if(1===e.length){const i=e[0].parentId;if(n()._P.isId(i))return;return t?this.findAncestor(e[0],t)?.id:i}const[i,...s]=e;let o=this.getParentShape(i);for(;o;)if(!t||t(o)){if(s.every((e=>this.hasAncestor(e,o.id))))return o.id;o=this.getParentShape(o)}else o=this.getParentShape(o)}isShapeInViewport(e){const t=this.getPageBoundsById(e);return!!t&&this.viewportPageBounds.includes(t)}get renderingShapes(){const{currentPageId:e,cullingBounds:t,cullingBoundsExpanded:i,erasingIdsSet:n,editingId:s}=this,o=[],r=(e,a,l)=>{const c=this.getShapeById(e);if(!c)return;let d=+c.props.opacity*a,u=!1;!l&&n.has(e)&&(u=!0,d*=.32);const h=this.getMaskedPageBoundsById(e),p=!!h&&t.includes(h),g=!h||s!==e&&!i.includes(h);o.push({id:e,index:o.length,opacity:d,isCulled:g,isInViewport:p}),this.getSortedChildIds(e).forEach((e=>{r(e,d,l||u)}))};return this.getSortedChildIds(e).forEach((e=>r(e,1,!1))),o.sort(Ge)}get allShapesCommonBounds(){let e=null;return this.shapeIds.forEach((t=>{const i=this.getMaskedPageBoundsById(t);i&&(e?e.expand(i):e=i.clone())})),e}getPageCorners(e){const t=this.getAncestors(e),i=this.getBounds(e).corners,n=l().cQ.Compose(...t.flatMap((e=>[l().cQ.Translate(e.x,e.y),l().cQ.Rotate(e.rotation)])),l().cQ.Translate(e.x,e.y),l().cQ.Rotate(e.rotation,0,0));return l().cQ.applyToPoints(n,i)}isPointInShape(e,t){const i=this.getShapeUtil(t),n=this._pageMaskCache.get(t.id);if(n){if(!(0,l().s3)(e,n))return!1}return i.hitTestPoint(t,this.getPointInShapeSpace(t,e))}getShapesAtPoint(e){return this.sortedShapesArray.filter((t=>{const i=this._pageMaskCache.get(t.id);if(i){if(!(0,l().s3)(e,i))return!1}return this.getShapeUtil(t).hitTestPoint(t,this.getPointInShapeSpace(t,e))}))}getPointInShapeSpace(e,t){return l().cQ.applyToPoint(l().cQ.Inverse(this.getPageTransform(e)),t)}getPointInParentSpace(e,t){const i=this.getShapeById(e);if(!i)return new(l().hd)(0,0);if(n()._P.isId(i.parentId))return l().hd.From(t);const s=this.getPageTransformById(i.parentId);return s?l().cQ.applyToPoint(l().cQ.Inverse(s),t):l().hd.From(t)}getDeltaInShapeSpace(e,t){const i=this.getPageTransform(e);return i?l().hd.Rot(t,-l().cQ.Decompose(i).rotation):l().hd.From(t)}getDeltaInParentSpace(e,t){if(n()._P.isId(e.parentId))return l().hd.From(t);const i=this.getShapeById(e.parentId);return i?this.getDeltaInShapeSpace(i,t):l().hd.From(t)}getParentsMappedToChildren(e){const t=e.map((e=>this.store.get(e))),i=new Map;return t.forEach((e=>{i.has(e.parentId)||i.set(e.parentId,new Set),i.get(e.parentId)?.add(e)})),i}updateViewportScreenBounds(e=!1){const t=this.getContainer();if(!t)return this;const i=t.getBoundingClientRect(),n=new(l().Ax)(0,0,Math.max(i.width,1),Math.max(i.height,1)),s=n.equals(this.viewportScreenBounds),{_willSetInitialBounds:o}=this;if(s)this._willSetInitialBounds=!1;else if(o)this._willSetInitialBounds=!1,this.updateInstanceState({screenBounds:n.toJson()},!0,!0);else{const{zoomLevel:t}=this;if(e){const e=this.viewportPageCenter;this.updateInstanceState({screenBounds:n.toJson()},!0,!0);const i=this.viewportPageCenter;this.pan((i.x-e.x)*t,(i.y-e.y)*t)}else{const e=this.screenToPage(0,0);this.updateInstanceState({screenBounds:n.toJson()},!0,!0);const i=this.screenToPage(0,0);this.pan((i.x-e.x)*t,(i.y-e.y)*t)}}this._cameraManager.tick(),this.updateCullingBounds();const{editingId:r}=this;return r&&this.panZoomIntoView([r]),this}get viewportScreenBounds(){const{x:e,y:t,w:i,h:n}=this.instanceState.screenBounds;return new(l().Ax)(e,t,i,n)}get viewportScreenCenter(){return this.viewportScreenBounds.center}get viewportPageBounds(){const{x:e,y:t,w:i,h:n}=this.viewportScreenBounds,s=this.screenToPage(e,t),o=this.screenToPage(e+i,t+n);return new(l().Ax)(s.x,s.y,o.x-s.x,o.y-s.y)}get cullingBounds(){return this._cullingBounds.value}_cullingBounds=(0,c().eU)("culling viewport",new(l().Ax));get cullingBoundsExpanded(){return this._cullingBoundsExpanded.value}_cullingBoundsExpanded=(0,c().eU)("culling viewport expanded",new(l().Ax));updateCullingBounds(){const{viewportPageBounds:e}=this;return e.equals(this._cullingBounds.__unsafe__getWithoutCapture())||(this._cullingBounds.set(e.clone()),this._cullingBoundsExpanded.set(e.clone().expandBy(100/this.zoomLevel))),this}get viewportPageCenter(){return this.viewportPageBounds.center}screenToPage(e,t,i=.5,n=this.camera){const{screenBounds:s}=this.store.unsafeGetWithoutCapture(this.instanceId),{x:o,y:r,z:a=1}=n;return{x:(e-s.x)/a-o,y:(t-s.y)/a-r,z:i}}pageToScreen(e,t,i=.5,n=this.camera){const{x:s,y:o,z:r=1}=n;return{x:e+s*r,y:t+o*r,z:i}}get focusLayerId(){return this.pageState.focusLayerId??this.currentPageId}get focusLayerShape(){const e=this.pageState.focusLayerId;if(e)return this.getShapeById(e)}popFocusLayer(){const e=this.pageState.focusLayerId,t=e&&this.getShapeById(e);if(t){const e=this.findAncestor(t,(e=>"group"===e.type));this.setFocusLayer(e?.id??null),this.select(t.id)}else this.setFocusLayer(null),this.selectNone();return this}setFocusLayer(e){return this._setFocusLayer(e),this}_setFocusLayer=this.history.createCommand("setFocusLayer",(e=>{if(null===e&&!this.canUndo)return;return{data:{prev:this.pageState.focusLayerId,next:e},preservesRedoStack:!0,squashing:!0}}),{do:({next:e})=>{this.store.update(this.pageState.id,(t=>({...t,focusLayerId:e})))},undo:({prev:e})=>{this.store.update(this.pageState.id,(t=>({...t,focusLayerId:e})))},squash:({prev:e},{next:t})=>({prev:e,next:t})});setHintingIds(e){return this.store.update(this.pageState.id,(t=>({...t,hintingIds:(0,r().Qq)(e)}))),this}get editingId(){return this.pageState.editingId}get editingShape(){return this.editingId?this.getShapeById(this.editingId)??null:null}setEditingId(e){if(e){if(e!==this.editingId){const t=this.getShapeById(e),i=this.getShapeUtil(t);if(t&&i.canEdit(t)){this.setInstancePageState({editingId:e,hoveredId:null},!1);const{viewportPageBounds:n}=this,s=i.getEditingBounds(t),o=this.getPageTransformById(e),r=l().Ax.FromPoints(l().cQ.applyToPoints(o,s.corners));n.contains(r)||(r.width>n.width||r.height>n.height?this.zoomToBounds(r.minX,r.minY,r.width,r.height):this.centerOnPoint(r.midX,r.midY))}}}else this.setInstancePageState({editingId:null});return this}getParentIdForNewShapeAtPoint(e,t){const i=this.sortedShapesArray;for(let n=i.length-1;n>=0;n--){const s=i[n],o=this.getShapeUtil(s);if(!o.canReceiveNewChildrenOfType(t))continue;const r=this.getMaskedPageBoundsById(s.id);if(r&&r.containsPoint(e)&&o.hitTestPoint(s,this.getPointInShapeSpace(s,e)))return s.id}return this.focusLayerId}getDroppingShape(e,t=[]){const i=this.sortedShapesArray;for(let n=i.length-1;n>=0;n--){const s=i[n];if(t.find((e=>e.id===s.id||this.hasAncestor(s,e.id))))continue;const o=this.getShapeUtil(s);if(!o.canDropShapes(s,t))continue;const r=this.getMaskedPageBoundsById(s.id);if(r&&r.containsPoint(e)&&o.hitTestPoint(s,this.getPointInShapeSpace(s,e)))return s}}getOutermostSelectableShape(e,t){let i=e,n=e;for(;n;){if("group"===n.type&&this.focusLayerId!==n.id&&!this.hasAncestor(this.focusLayerShape,n.id)&&(t?.(n)??1))i=n;else if(this.focusLayerId===n.id)break;n=this.getParentShape(n)}return i}static styles=T;get selectedPageBounds(){const{pageState:{selectedIds:e}}=this;return 0===e.length?null:l().Ax.Common((0,r().oE)(e.map((e=>this.getPageBoundsById(e)))))}get selectionRotation(){const{selectedIds:e}=this;if(0===e.length)return 0;if(1===e.length)return this.getPageRotationById(this.selectedIds[0]);const t=e.map((e=>this.getPageRotationById(e)%(Math.PI/2)));return t.every((e=>Math.abs(e-t[0])<Math.PI/180))?this.getPageRotationById(e[0]):0}get selectionBounds(){const{selectedIds:e}=this;if(0===e.length)return;const{selectionRotation:t}=this;if(0===t)return this.selectedPageBounds;if(1===e.length){const t=this.getBounds(this.getShapeById(e[0])).clone();return t.point=l().cQ.applyToPoint(this.getPageTransformById(e[0]),t.point),t}const i=this.selectedIds.flatMap((e=>{const t=this.getPageTransformById(e);return t?this.getOutlineById(e).map((e=>l().cQ.applyToPoint(t,e))):[]})).map((e=>l().hd.Rot(e,-t))),n=l().Ax.FromPoints(i);return n.point=n.point.rot(t),n}get selectionPageCenter(){const{selectionBounds:e,selectionRotation:t}=this;return e?l().hd.RotWith(e.center,e.point,t):null}get shapesArray(){return Array.from(this.shapeIds).map((e=>this.store.get(e)))}get sortedShapesArray(){const e=new Set(this.shapesArray.sort(Re)),t=[];function i(n){t.push(n),e.delete(n),e.forEach((e=>{e.parentId===n.id&&i(e)}))}return e.forEach((e=>{const t=this.getShapeById(e.parentId);(0,n().o2)(t)||i(e)})),t}get selectedShapes(){const{selectedIds:e}=this.pageState;return(0,r().oE)(e.map((e=>this.store.get(e))))}get onlySelectedShape(){const{selectedShapes:e}=this;return 1===e.length?e[0]:null}getShapeById(e){if((0,n().vc)(e))return this.store.get(e)}getParentShape(e){if(void 0!==e&&(0,n().vc)(e.parentId))return this.store.get(e.parentId)}getNearestSiblingShape(e,t){if(!t)return;if(t.parentId===e.parentId)return t;return this.findAncestor(t,(t=>t.parentId===e.parentId))}getParentPageId(e){if(void 0!==e)return n()._P.isId(e.parentId)?e.parentId:this.getParentPageId(this.getShapeById(e.parentId))}isShapeInPage(e,t=this.currentPageId){let i=!1;if(e.parentId===t)i=!0;else{let n=this.getShapeById(e.parentId);e:for(;n;){if(n.parentId===t){i=!0;break e}n=this.getShapeById(n.parentId)}}return i}colors;sizes={s:2,m:3.5,l:5,xl:10};getCssColor(e){return this.colors.get(e)}getStrokeWidth(e){return this.sizes[e]}get currentToolId(){const e=this.root.current.value;let t=e?.id;if("select"===t){const i=e?.current.value;t=i?.info?.onInteractionEnd??"select"}return t??"select"}setSelectedTool(e,t={}){return this.root.transition(e,t),this}getStateDescendant(e){const t=e.split(".").reverse();let i=this.root;for(;t.length>0;){const e=t.pop();if(!e)return i;const n=i.children?.[e];if(!n)return;i=n}return i}isIn(e){const t=e.split(".").reverse();let i=this.root;for(;t.length>0;){const e=t.pop();if(!e)return!0;const n=i.current.value;if(n?.id!==e)return!1;if(0===t.length)return!0;i=n}return!1}isInAny(...e){return e.some((e=>this.isIn(e)))}inputs={originPagePoint:new(l().hd),originScreenPoint:new(l().hd),previousPagePoint:new(l().hd),previousScreenPoint:new(l().hd),currentPagePoint:new(l().hd),currentScreenPoint:new(l().hd),keys:new Set,buttons:new Set,isPen:!1,shiftKey:!1,ctrlKey:!1,altKey:!1,isDragging:!1,isPointing:!1,isPinching:!1,isEditing:!1,isPanning:!1,pointerVelocity:new(l().hd)};_updateInputsFromEvent(e){const{previousScreenPoint:t,previousPagePoint:i,currentScreenPoint:n,currentPagePoint:s}=this.inputs,{screenBounds:o}=this.store.unsafeGetWithoutCapture(this.instanceId),{x:r,y:a,z:c}=e.point,{x:d,y:u,z:h}=this.camera;t.setTo(n),i.setTo(s);const p=(r-o.x)/h-d,g=(a-o.y)/h-u;n.set(r,a),s.set(p,g,c??.5),this.inputs.isPen="pointer"===e.type&&e.isPen,"pointer_down"===e.name&&(this.inputs.pointerVelocity=new(l().hd)),this.updateUserPresence({cursor:s.toJson()})}_clickManager=new Os(this);cancelDoubleClick(){this._clickManager.cancelDoubleClickTimeout()}_prevCursor="default";_shiftKeyTimeout=-1;_setShiftKeyTimeout=()=>{this.inputs.shiftKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Shift",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey})};_altKeyTimeout=-1;_setAltKeyTimeout=()=>{this.inputs.altKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Alt",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey})};_ctrlKeyTimeout=-1;_setCtrlKeyTimeout=()=>{this.inputs.ctrlKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Ctrl",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey})};_restoreToolId="select";_pinchStart=1;_didPinch=!1;_selectedIdsAtPointerDown=[];dispatch=e=>{if(this.crashingError)return this;const{inputs:t}=this,{type:i}=e;return this.batch((()=>{if("misc"===e.type)return"cancel"!==e.name&&"complete"!==e.name||this.inputs.isPanning&&(this.inputs.isPanning=!1,this.setCursor({type:this._prevCursor})),void this.root.handleEvent(e);e.shiftKey?(clearInterval(this._shiftKeyTimeout),this._shiftKeyTimeout=-1,t.shiftKey=!0):!e.shiftKey&&t.shiftKey&&-1===this._shiftKeyTimeout&&(this._shiftKeyTimeout=setTimeout(this._setShiftKeyTimeout,150)),e.altKey?(clearInterval(this._altKeyTimeout),this._altKeyTimeout=-1,t.altKey=!0):!e.altKey&&t.altKey&&-1===this._altKeyTimeout&&(this._altKeyTimeout=setTimeout(this._setAltKeyTimeout,150)),e.ctrlKey?(clearInterval(this._ctrlKeyTimeout),this._ctrlKeyTimeout=-1,t.ctrlKey=!0):!e.ctrlKey&&t.ctrlKey&&-1===this._ctrlKeyTimeout&&(this._ctrlKeyTimeout=setTimeout(this._setCtrlKeyTimeout,150));const{originPagePoint:n,originScreenPoint:s,currentPagePoint:o,currentScreenPoint:r}=t;switch(t.isPointing||(t.isDragging=!1),i){case"pinch":if(!this.canMoveCamera)return;switch(this._updateInputsFromEvent(e),e.name){case"pinch_start":if(t.isPinching)return;return void(t.isEditing||(this._pinchStart=this.camera.z,this._selectedIdsAtPointerDown.length||(this._selectedIdsAtPointerDown=this.selectedIds.slice()),this._didPinch=!0,t.isPinching=!0,this.interrupt()));case"pinch":{if(!t.isPinching)return;const{point:{x:i,y:n,z:s=1},delta:{x:o,y:r}}=e,{camera:{x:a,y:l,z:c}}=this,d=Math.min(8,Math.max(f,s));return void this.setCamera(a+o/c-i/c+i/d,l+r/c-n/c+n/d,d)}case"pinch_end":{if(!t.isPinching)return this;t.isPinching=!1;const{_selectedIdsAtPointerDown:e}=this;this.setSelectedIds(this._selectedIdsAtPointerDown,!0),this._selectedIdsAtPointerDown=[];const{camera:{x:i,y:n,z:s}}=this;let o;if(s>.9&&s<1.05?o=1:s>.49&&s<.505&&(o=.5),s>this._pinchStart-.1&&s<this._pinchStart+.05&&(o=this._pinchStart),void 0!==o){const{x:e,y:t}=this.viewportScreenCenter;this.animateCamera(i+(e/o-e)-(e/s-e),n+(t/o-t)-(t/s-t),o,{duration:100})}return void(this._didPinch&&(this._didPinch=!1,requestAnimationFrame((()=>{this._didPinch||this.setSelectedIds(e,!0)}))))}}case"wheel":if(!this.canMoveCamera)return;if(this._viewportAnimation||this.isMenuOpen);else{if(t.ctrlKey){const{x:t,y:i}=this.inputs.currentScreenPoint,{x:n,y:s,z:o}=this.camera,r=Math.min(8,Math.max(f,o+(e.delta.z??0)*o));return void this.setCamera(n+(t/r-t)-(t/o-t),s+(i/r-i)-(i/o-i),r)}this.pan(e.delta.x,e.delta.y),t.isPointing&&!t.isDragging&&l().hd.Dist(s,this.pageToScreen(r.x,r.y))>4&&(t.isDragging=!0),this.dispatch({type:"pointer",target:"canvas",name:"pointer_move",point:r,pointerId:0,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,button:0,isPen:this.isPenMode??!1})}break;case"pointer":{if(t.isPinching)return;this._updateInputsFromEvent(e);const{isPen:i}=e;switch(e.name){case"pointer_down":if(this._selectedIdsAtPointerDown=this.selectedIds.slice(),t.buttons.add(e.button),t.isPointing=!0,t.isDragging=!1,this.isPenMode)if(i)this._touchEventsRemainingBeforeExitingPenMode=3;else{if(this._touchEventsRemainingBeforeExitingPenMode--,0!==this._touchEventsRemainingBeforeExitingPenMode)return;this.setPenMode(!1)}else i&&this.setPenMode(!0);if(5===e.button?(this._restoreToolId=this.currentToolId,this.complete(),this.setSelectedTool("eraser")):1===e.button&&(this.inputs.isPanning||(this._prevCursor=this.instanceState.cursor.type),this.inputs.isPanning=!0),this.inputs.isPanning)return this.stopCameraAnimation(),this.setCursor({type:"grabbing"}),this;s.setTo(r),n.setTo(o);break;case"pointer_move":if(!i&&this.isPenMode)return;if(this.inputs.isPanning&&this.inputs.isPointing){const{currentScreenPoint:e,previousScreenPoint:t}=this.inputs,i=l().hd.Sub(e,t);return void this.pan(i.x,i.y)}t.isPointing&&!t.isDragging&&l().hd.Dist(s,r)>4&&(t.isDragging=!0);break;case"pointer_up":if(t.buttons.delete(e.button),t.isPointing=!1,t.isDragging=!1,this.isMenuOpen)return;if(!i&&this.isPenMode)return;t.isPanning?1===e.button?this.inputs.keys.has(" ")?(this.slideCamera({speed:Math.min(2,this.inputs.pointerVelocity.len()),direction:this.inputs.pointerVelocity,friction:M}),this.setCursor({type:"grab"})):(t.isPanning=!1,this.slideCamera({speed:Math.min(2,this.inputs.pointerVelocity.len()),direction:this.inputs.pointerVelocity,friction:M}),this.setCursor({type:this._prevCursor})):0===e.button&&(this.slideCamera({speed:Math.min(2,this.inputs.pointerVelocity.len()),direction:this.inputs.pointerVelocity,friction:M}),this.setCursor({type:"grab"})):5===e.button&&(this.complete(),this.setSelectedTool(this._restoreToolId))}break}case"keyboard":switch(e.name){case"key_down":if(t.keys.has(e.key))return;t.keys.add(e.key),e.ctrlKey||" "!==e.key||(this.inputs.isPanning||(this._prevCursor=this.instanceState.cursor.type),this.inputs.isPanning=!0,this.setCursor({type:this.inputs.isPointing?"grabbing":"grab"}));break;case"key_up":t.keys.delete(e.key)," "!==e.key||this.inputs.buttons.has(1)||(this.inputs.isPanning=!1,this.setCursor({type:this._prevCursor}))}}if("pointer"===e.type&&(1===e.button?e.name="middle_click":2===e.button&&(e.name="right_click")),"pointer"===e.type&&e.isPen===this.isPenMode)switch(e.name){case"pointer_down":{const t=this._clickManager.transformPointerDownEvent(e);if(e.name!==t.name)return this.root.handleEvent(e),this.emit("event",e),this.root.handleEvent(t),void this.emit("event",t);break}case"pointer_up":{const t=this._clickManager.transformPointerUpEvent(e);if(e.name!==t.name)return this.root.handleEvent(e),this.emit("event",e),this.root.handleEvent(t),void this.emit("event",t);break}case"pointer_move":this._clickManager.handleMove()}this.root.handleEvent(e),this.emit("event",e)})),this};replaceStoreContentsWithRecordsForOtherDocument(e){(0,c().hL)((()=>{this.store.clear();const[t,i]=(0,r().jB)(e,(e=>"shape"===e.typeName));this.store.put(i,"initialize"),this.store.ensureStoreIsUsable(),this.store.put(t,"initialize"),this.history.clear(),this.updateViewportScreenBounds(),this.updateCullingBounds();const n=this.allShapesCommonBounds;n&&this.zoomToBounds(n.minX,n.minY,n.width,n.height,1)}))}getContent(e=this.selectedIds){if(!e)return;if(0===e.length)return;const t={};let i=(0,r().Qq)(e.map((e=>this.getShapeById(e))).sort(Re).flatMap((e=>{const t=[e];return this.visitDescendants(e.id,(e=>{t.push(this.getShapeById(e))})),t})));i=i.map((e=>{if(e=(0,r().pN)(e),t[e.id]=this.getPageTransformById(e.id),!cn.is(e))return e;if("binding"===e.props.start.type){const t=e.props.start.boundShapeId;if(!i.find((e=>e.id===t))){const{start:t}=Gi(this,e);e.props.start={type:"point",x:t.x,y:t.y}}}if("binding"===e.props.end.type){const t=e.props.end.boundShapeId;if(!i.find((e=>e.id===t))){const{end:t}=Gi(this,e);e.props.end={type:"point",x:t.x,y:t.y}}}return e}));const n=[];i.forEach((e=>{if(void 0===i.find((t=>t.id===e.parentId))){const t=this.getPagePointById(e.id),i=this.getPageRotationById(e.id);e.x=t.x,e.y=t.y,e.rotation=i,e.parentId=this.currentPageId,n.push(e.id)}}));const s=new Set;return i.forEach((e=>{"assetId"in e.props&&null!==e.props.assetId&&s.add(e.props.assetId)})),{shapes:i,rootShapeIds:n,schema:this.store.schema.serialize(),assets:(0,r().oE)(Array.from(s).map((e=>this.getAssetById(e))))}}putContent(e,t={}){if(this.isReadOnly)return this;if(!e.schema)throw Error("Could not put content: content is missing a schema.");const{select:i=!1,preserveIds:s=!1,preservePosition:o=!1}=t;let{point:a}=t;const{currentPageId:c}=this,{assets:d,shapes:u,rootShapeIds:h}=e,g=new Map(u.map((e=>[e.id,(0,n().n6)()])));let m=this.currentPageId,I=1/0,f=[];for(const n of this.selectedShapes){if(0===I)break;const e=this.getAncestors(n);"frame"===n.type&&e.push(n);const t="frame"===n.type?e.length+1:e.length;if(t<I)I=t,f=e,m="frame"===n.type?n.id:n.parentId;else if(t===I){if(f.length!==e.length)throw Error(`Ancestors: ${f.length} !== ${e.length}`);if(0===f.length){m=c;break}m=c;for(let t=0;t<f.length&&e[t]===f[t];t++)m=e[t].id}}let y=!1;if(!n()._P.isId(m)){const e=this.getShapeById(m);if(e)if(this.viewportPageBounds.includes(this.getPageBounds(e))){if(1===h.length){const t=u.find((e=>e.id===h[0]));Tn.is(e)&&Tn.is(t)&&t.props.w===e?.props.w&&t.props.h===e?.props.h&&(y=!0)}}else m=c;else m=c}y||(y=g.has(m)),y&&(m=this.getShapeById(m).parentId);let b=this.getHighestIndexForParent(m);const w=[],C=u.map((e=>{let t;if(s)t=(0,r().A4)(e),g.set(e.id,e.id);else{const i=g.get(e.id);t=(0,r().A4)({...e,id:i})}if(h.includes(e.id)&&(t.parentId=c,w.push(t)),g.has(t.parentId)?t.parentId=g.get(e.parentId):(h.push(t.id),t.index=b,b=Pe(b)),cn.is(t)){if("binding"===t.props.start.type){const e=g.get(t.props.start.boundShapeId);t.props.start=e?{...t.props.start,boundShapeId:e}:{type:"point",x:0,y:0}}if("binding"===t.props.end.type){const e=g.get(t.props.end.boundShapeId);t.props.end=e?{...t.props.end,boundShapeId:e}:{type:"point",x:0,y:0}}}return t}));if(C.length+this.shapeIds.size>p)return dr(this),this;let M=[];if(d){for(let i=0;i<d.length;i++){const t=d[i],n=this.store.schema.migratePersistedRecord(t,e.schema);if("success"!==n.type)throw Error(`Could not put content: could not migrate content for asset:\n${JSON.stringify(t,null,2)}`);d[i]=n.value}const t=[];M=d.filter((e=>!this.store.has(e.id))).map((e=>("image"!==e.type&&"video"!==e.type||(e.props.src&&e.props.src?.startsWith("data:image")?(t.push((0,r().pN)(e)),e.props.src=null):t.push((0,r().pN)(e))),e))),Promise.allSettled(t.map((async e=>{const t=await(i=e.props.src,n=e.props.name,s=e.props.mimeType??"image/png",fetch(i).then((function(e){return e.arrayBuffer()})).then((function(e){return new File([e],n,{type:s})})));var i,n,s;return[e,await this.onCreateAssetFromFile(t)]}))).then((e=>{this.updateAssets((0,r().oE)(e.map((e=>"fulfilled"===e.status?{...e.value[1],id:e.value[0].id}:void 0))))}))}for(let n=0;n<C.length;n++){const t=C[n],i=this.store.schema.migratePersistedRecord(t,e.schema);if("success"!==i.type)throw Error(`Could not put content: could not migrate content for shape:\n${JSON.stringify(t,null,2)}`);C[n]=i.value}return this.batch((()=>{M.length>0&&this.createAssets(M),this.createShapes(C,i),m!==c&&this.reparentShapesById(w.map((e=>e.id)),m);const e=C.map((e=>this.getShapeById(e.id))),t=l().Ax.Common(e.map((e=>this.getPageBounds(e))));if(void 0===a)if(n()._P.isId(m)){const{viewportPageBounds:e}=this;a=o||e.includes(l().Ax.From(t))?t.center:e.center}else{const e=this.getShapeById(m),t=this.getShapeUtil(e);a=t.center(e)}if(1===w.length){const e=w[0];if("frame"===e.type)for(;this.getShapesAtPoint(a).some((t=>Tn.is(t)&&t.props.w===e.props.w&&t.props.h===e.props.h));)a.x+=t.w+16}this.updateShapes(w.map((e=>{const i=(e.x??0)-(t.x+t.w/2),n=(e.y??0)-(t.y+t.h/2);return{id:e.id,type:e.type,x:a.x+i,y:a.y+n}})))})),this}createShapeId(e){return e?(0,n().M_)(e):(0,n().n6)()}getHighestIndexForParent(e){const t=this._parentIdsToChildIds.value[e];return t&&0!==t.length?Pe(t[t.length-1][1]):"a1"}createShapes(e,t=!1){return this._createShapes(e,t),this}_createShapes=this.history.createCommand("createShapes",((e,t=!1)=>{if(this.isReadOnly)return null;if(e.length<=0)return null;const{shapeIds:i,selectedIds:n}=this,s=t?n:void 0,o=e.length+i.size>p;o&&dr(this);const r=o?e.slice(0,p-i.size):e;return 0===r.length?null:{data:{prevSelectedIds:s,partials:r,select:t}}}),{do:({partials:e,select:t})=>{const{focusLayerId:i}=this;e=e.map((t=>{if(!t.parentId||!this.store.get(t.parentId)&&!e.find((e=>e.id===t.parentId))){t={...t};const e=this.getParentIdForNewShapeAtPoint({x:t.x??0,y:t.y??0},t.type);if(t.parentId=e,(0,n().vc)(e)){const i=this.getPointInShapeSpace(this.getShapeById(e),{x:t.x??0,y:t.y??0});t.x=i.x,t.y=i.y,t.rotation=-this.getPageRotationById(e)+(t.rotation??0)}return t}return t}));const s=new Map,o=[];for(const n of e){const e=this.getShapeUtil(n);let t=n.index;if(!t){const e=n.parentId??i;s.has(e)||s.set(e,this.getHighestIndexForParent(e)),t=s.get(e),s.set(e,Pe(t))}const r=e.defaultProps(),{propsForNextShape:a}=this.instanceState;for(const i in r)if(i in a){if("url"===i)continue;r[i]=a[i]}let l=this.config.TLShape.create({...n,index:t,parentId:n.parentId??i,props:"props"in n?{...r,...n.props}:r});if(void 0===l.index)throw Error("no index!");const c=this.getShapeUtil(l).onBeforeCreate?.(l);c&&(l=c),o.push(l)}if(this.store.put(o),t){const t=e.map((e=>e.id));this.store.update(this.pageState.id,(e=>({...e,selectedIds:t})))}},undo:({partials:e,prevSelectedIds:t})=>{this.store.remove(e.map((e=>e.id))),t&&this.store.update(this.pageState.id,(e=>({...e,selectedIds:t})))}});animatingShapes=new Map;animateShapes(e,t={}){const{duration:i=500,ease:n=l().Z4.linear}=t,s=ce();let o,r=i;const a=[];let c;e.forEach((e=>{if(!e)return;const t={partial:e,values:[]},i=this.getShapeById(e.id);if(i){for(const n of["x","y","rotation"])void 0!==e[n]&&i[n]!==e[n]&&t.values.push({prop:n,from:i[n],to:e[n]});a.push(t),this.animatingShapes.set(i.id,s)}}));const d=t=>{if(r-=t,r<0){const{animatingShapes:t}=this,i=e.filter((e=>e&&t.get(e.id)===s));return i.length&&this.updateShapes(i,!1),void this.removeListener("tick",d)}o=n(1-r/i);const{animatingShapes:l}=this;try{const e=[];for(let t=0;t<a.length;t++)c=a[t],l.get(c.partial.id)===s&&e.push({id:c.partial.id,type:c.partial.type,...c.values.reduce(((e,{prop:t,from:i,to:n})=>(e[t]=i+(n-i)*o,e)),{})});this._updateShapes(e,!0)}catch(u){}};return this.addListener("tick",d),this}updateShapes(e,t=!1){if(this.animatingShapes.size>0){let t;for(let i=0;i<e.length;i++)t=e[i],t&&this.animatingShapes.delete(t.id)}return this._updateShapes(e,t),this}_updateShapes=this.history.createCommand("updateShapes",((e,t=!1)=>{if(this.isReadOnly)return null;const i=(0,r().oE)(e),n=Object.fromEntries((0,r().oE)(i.map((({id:e})=>this.getShapeById(e)))).map((e=>[e.id,e])));if(i.length<=0)return null;const s=(0,r().oE)(i.map((e=>{const t=n[e.id];if(!t)return null;let i=null;for(const[n,s]of Object.entries(e))switch(n){case"id":case"type":case"typeName":continue;default:s!==t[n]&&(i||(i={...t}),"props"===n?i.props={...t.props,...s}:i[n]=s)}return i??t}))),o=Object.fromEntries(s.map((e=>[e.id,e])));return{data:{snapshots:n,updates:o},squashing:t}}),{do:({updates:e})=>{const t=Object.values(e);let i,n;for(let s=0,o=t.length;s<o;s++)i=t[s],n=this.getShapeUtil(i).onBeforeUpdate?.(this.store.get(i.id),i),n&&(t[s]=n);this.store.put(t)},undo:({snapshots:e})=>{this.store.put(Object.values(e))},squash:(e,t)=>({snapshots:{...t.snapshots,...e.snapshots},updates:{...e.updates,...t.updates}})});deleteShapes(e=this.selectedIds){return this._deleteShapes(e),this}_deleteShapes=this.history.createCommand("delete_shapes",(e=>{if(this.isReadOnly)return null;if(0===e.length)return null;const t=[...this.pageState.selectedIds],i=new Set(e);for(const r of e)this.visitDescendants(r,(e=>{i.add(e)}));const n=[...i],s=this._arrowBindingsIndex.value,o=(0,r().oE)(n.flatMap((e=>{const t=this.getShapeById(e),i=s[e];return i&&i.length>0?i.map((({arrowId:e})=>this.getShapeById(e))).concat(t):t}))),a=t.filter((e=>!i.has(e)));return{data:{deletedIds:n,snapshots:o,prevSelectedIds:t,postSelectedIds:a}}}),{do:({deletedIds:e,postSelectedIds:t})=>{this.store.remove(e),this.store.update(this.pageState.id,(e=>({...e,selectedIds:t})))},undo:({snapshots:e,prevSelectedIds:t})=>{this.store.put(e),this.store.update(this.pageState.id,(e=>({...e,selectedIds:t})))}});updateUserDocumentSettings(e,t=!1){return this._updateUserDocumentSettings(e,t),this}_updateUserDocumentSettings=this.history.createCommand("updateUserDocumentSettings",((e,t=!1)=>{const{isReadOnly:i}=e;if(!1===i)return;const n=this.userDocumentSettings;return{data:{prev:n,next:{...n,...e}},ephemeral:t}}),{do:({next:e})=>{this.store.put([e])},undo:({prev:e})=>{this.store.put([e])}});updatePage(e,t=!1){return this._updatePage(e,t),this}_updatePage=this.history.createCommand("updatePage",((e,t=!1)=>{if(this.isReadOnly)return null;const i=this.getPageById(e.id);return i?{data:{prev:i,partial:e},squashing:t}:null}),{do:({partial:e})=>{this.store.update(e.id,(t=>({...t,...e})))},undo:({prev:e,partial:t})=>{this.store.update(t.id,(()=>e))},squash:(e,t)=>({prev:{...e.prev,...t.prev},partial:t.partial})});createPage(e,t=n()._P.createId(),i){return this._createPage(e,t,i),this}_createPage=this.history.createCommand("createPage",((e,t=n()._P.createId(),i)=>{if(this.isReadOnly)return null;if(this.pages.length>=g)return null;const s=this.pages,o=i??s[s.length-1]?.index??"a1",r=s[s.findIndex((e=>e.index===o))+1]?.index,a={...this.pageState},l={...this.instanceState};e=function(e,t){let i=e;const n=new Set(t);for(;n.has(i);)i=/^.*(\d+)$/.exec(i)?.[1]?i.replace(/(\d+)(?=\D?)$/,(e=>(+e+1).toString())):`${i} 1`;return i}(e,s.map((e=>e.name)));const c=n()._P.create({id:t,name:e,index:r?ze(o,r):Pe(o)}),d=n().Ms.create({});return{data:{prevPageState:a,prevTabState:l,newPage:c,newTabPageState:n().wO.create({pageId:c.id,instanceId:this.instanceId,cameraId:d.id}),newCamera:d}}}),{do:({newPage:e,newTabPageState:t,newCamera:i})=>{this.store.put([e,i,t,{...this.instanceState,currentPageId:e.id}]),this.updateCullingBounds()},undo:({newPage:e,prevPageState:t,prevTabState:i,newTabPageState:n})=>{this.store.put([t,i]),this.store.remove([n.id,e.id,n.cameraId]),this.updateCullingBounds()}});duplicatePage(e=this.currentPageId,t=n()._P.createId()){if(this.pages.length>=g)return;const i=this.getPageById(e);if(!i)return;const s={...this.camera},o=this.getContent(this.getSortedChildIds(i.id));this.batch((()=>{if(this.createPage(i.name+" Copy",t,i.index),this.setCurrentPageId(t),this.setCamera(s.x,s.y,s.z),o)return this.putContent(o)}))}deletePage(e){this._deletePage(e)}_deletePage=this.history.createCommand("delete_page",(e=>{if(this.isReadOnly)return null;const{pages:t}=this;if(1===t.length)return null;const i=this.getPageById(e),n=this._pageStates.value.filter((t=>t.pageId===e));if(!i)return null;if(e===this.currentPageId){const i=t.findIndex((t=>t.id===e)),n=t[i-1]??t[i+1];this.setCurrentPageId(n.id)}return{data:{id:e,deletedPage:i,deletedPageStates:n}}}),{do:({deletedPage:e,deletedPageStates:t})=>{this.store.remove(t.map((e=>e.id))),this.store.remove([e.id]),this.updateCullingBounds()},undo:({deletedPage:e,deletedPageStates:t})=>{this.store.put([e]),this.store.put(t),this.updateCullingBounds()}});setInstancePageState(e,t=!1){this._setInstancePageState(e,t)}_setInstancePageState=this.history.createCommand("setInstancePageState",((e,t=!1)=>({data:{prev:this.store.get(e.id??this.pageState.id),partial:e},ephemeral:t})),{do:({prev:e,partial:t})=>{this.store.update(e.id,(e=>({...e,...t})))},undo:({prev:e})=>{this.store.update(e.id,(()=>e))}});updateUser(e){const t={...this.user,...e};this.store.put([t])}get _currentUserPresence(){return this.store.query.record("user_presence",(()=>({userId:{eq:this.userId}})))}get userPresence(){return this._currentUserPresence.value}updateUserPresence=({cursor:e,color:t}={})=>{const i=this._currentUserPresence.value;i?this.store.put([{...i,cursor:e??i.cursor,color:t??i.color,lastUsedInstanceId:this.instanceId,lastActivityTimestamp:Date.now()}]):console.error("No presence found for current user")};setSelectedIds(e,t=!1){return this._setSelectedIds(e,t),this}_setSelectedIds=this.history.createCommand("setSelectedIds",((e,t=!1)=>{const i=this.pageState.selectedIds,n=new Set(this.pageState.selectedIds);return e.length===n.size&&e.every((e=>n.has(e)))?null:{data:{ids:e,prevSelectedIds:i},squashing:t,preservesRedoStack:!0}}),{do:({ids:e})=>{this.store.update(this.pageState.id,(t=>({...t,selectedIds:e})))},undo:({prevSelectedIds:e})=>{this.store.update(this.pageState.id,(()=>({...this.pageState,selectedIds:e})))},squash:(e,t)=>({ids:t.ids,prevSelectedIds:e.prevSelectedIds})});isSelected(e){return this.selectedIdsSet.has(e)}isWithinSelection(e){const t=this.getShapeById(e);return!!t&&(!!this.isSelected(e)||!!this.findAncestor(t,(e=>this.isSelected(e.id))))}get _assets(){return this.store.query.records("asset")}get assets(){return this._assets.value}createAssets(e){return this._createAssets(e),this}_createAssets=this.history.createCommand("createAssets",(e=>this.isReadOnly||e.length<=0?null:{data:{assets:e}}),{do:({assets:e})=>{this.store.put(e)},undo:({assets:e})=>{this.store.remove(e.map((e=>e.id)))}});deleteAssets(e){return this._deleteAssets(e),this}_deleteAssets=this.history.createCommand("deleteAssets",(e=>{if(this.isReadOnly)return;if(e.length<=0)return;const t=(0,r().oE)(e.map((e=>this.store.get(e))));return{data:{ids:e,prev:t}}}),{do:({ids:e})=>{this.store.remove(e)},undo:({prev:e})=>{this.store.put(e)}});updateAssets(e){return this._updateAssets(e),this}_updateAssets=this.history.createCommand("updateAssets",(e=>{if(this.isReadOnly)return;if(e.length<=0)return;return{data:{snapshots:{},assets:e}}}),{do:({assets:e,snapshots:t})=>{this.store.put(e.map((e=>{const i=this.store.get(e.id);return t[e.id]=i,{...i,...e}})))},undo:({snapshots:e})=>{this.store.put(Object.values(e))}});getAssetBySrc(e){return this.assets.find((t=>t.props.src===e))}getAssetById(e){return this.store.get(e)}async getSvg(e=(this.selectedIds.length?this.selectedIds:Object.keys(this.shapeIds)),t={}){if(0===e.length)return;if(!window.document)throw Error("No document");const{scale:i=1,background:n=!1,padding:s=b,darkMode:o=this.userDocumentSettings.isDarkMode,preserveAspectRatio:r=!1}=t,a=this.getContainer(),c=getComputedStyle(a),d=document.createElement("div");d.className="rs-container rs-theme__"+(o?"dark":"light"),document.body.appendChild(d);const u=getComputedStyle(d),h=new Map,p={fill:Object.fromEntries(T.color.map((e=>[e.id,u.getPropertyValue(`--palette-${e.id}`)]))),pattern:Object.fromEntries(T.color.map((e=>[e.id,u.getPropertyValue(`--palette-${e.id}-pattern`)]))),semi:Object.fromEntries(T.color.map((e=>[e.id,u.getPropertyValue(`--palette-${e.id}-semi`)]))),text:u.getPropertyValue("--color-text"),background:u.getPropertyValue("--color-background"),solid:u.getPropertyValue("--palette-solid")};document.body.removeChild(d);const g=this.getShapesAndDescendantsInOrder(e),m=l().Ax.FromPoints(g.map((e=>{const t=this.getPageTransform(e);return l().cQ.applyToPoints(t,this.getOutline(e))})).flat());m.expandBy(s);const I=window.document.createElementNS("http://www.w3.org/2000/svg","svg");r&&I.setAttribute("preserveAspectRatio",r);const f=m.width*i,y=m.height*i;I.setAttribute("direction","ltr"),I.setAttribute("width",f+""),I.setAttribute("height",y+""),I.setAttribute("viewBox",`${m.minX} ${m.minY} ${m.width} ${m.height}`),I.setAttribute("stroke-linecap","round"),I.setAttribute("stroke-linejoin","round"),I.style.setProperty("background-color",n?p.background:"transparent");const w=window.document.createElementNS("http://www.w3.org/2000/svg","defs");for(const l of Array.from(function(){const e=document.createElement("div");return e.innerHTML=`\n\t\t<svg>\n\t\t\t<defs>\n\t\t\t\t<g>\n\t\t\t\t\t<pattern\n\t\t\t\t\t\tid="hash_pattern"\n\t\t\t\t\t\twidth="8"\n\t\t\t\t\t\theight="8"\n\t\t\t\t\t\tpatternUnits="userSpaceOnUse"\n\t\t\t\t\t\tstrokeLinecap="round"\n\t\t\t\t\t\tstroke="white"\n\t\t\t\t\t>\n\t\t\t\t\t\t<line x1="${1*Mi}" y1="2" x2="2" y2="${1*Mi}" />\n\t\t\t\t\t\t<line x1="${5*Mi}" y1="${7*Mi}" x2="${7*Mi}" y2="${5*Mi}" />\n\t\t\t\t\t\t<line x1="6" y1="${11*Mi}" x2="${11*Mi}" y2="6" />\n\t\t\t\t\t</pattern>\n\t\t\t\t\t<mask id="hash_mask">\n\t\t\t\t\t\t<rect x="-100%" y="-100%" width="200%" height="200%" fill="url(#hash_pattern)" />\n\t\t\t\t\t</mask>\n\t\t\t\t</g>\n\t\t\t</defs>\n\t\t</svg>\n\t`,e.querySelectorAll("defs > *")}()))w.appendChild(l);try{document.body.focus?.()}catch(A){}I.append(w);for(const l of g){let e;"font"in l.props&&l.props.font&&(h.has(l.props.font)?e=h.get(l.props.font):(e=c.getPropertyValue(`--rs-font-${l.props.font}`),h.set(l.props.font,e)));const t=this.getShapeUtil(l);let i=await(t.toSvg?.(l,e,p));if(!i){const e=this.getPageBounds(l),t=window.document.createElementNS("http://www.w3.org/2000/svg","rect");t.setAttribute("width",e.width+""),t.setAttribute("height",e.height+""),t.setAttribute("fill",p.solid),t.setAttribute("stroke",p.pattern.grey),t.setAttribute("stroke-width","1"),i=t}const n=i;let s=this.getPageTransform(l).toCssString();"scale"in l.props&&1!==l.props.scale&&(s=`${s} scale(${l.props.scale}, ${l.props.scale})`),n.setAttribute("transform",s),"opacity"in l.props&&n.setAttribute("opacity",l.props.opacity+""),I.appendChild(n);const o=this._clipPathCache.get(l.id);if(n&&o){const e=document.createElementNS("http://www.w3.org/2000/svg","g");e.style.clipPath=o;Array.from(n.childNodes).forEach((t=>e.appendChild(t))),n.appendChild(e)}}let C="";const M=window.document.createElementNS("http://www.w3.org/2000/svg","style"),x=[];"fonts"in document&&document.fonts.forEach((e=>x.push(e)));for(const l of x){const e=new FileReader;let t=!1;if(h.forEach((e=>{e.includes(l.family)&&(t=!0)})),!t)continue;const i=l.$$_url,n=l.$$_fontface;if(i){const t=await(await fetch(i)).blob(),s=await new Promise(((i,n)=>{e.onload=()=>i(e.result),e.onerror=()=>n(e.error),e.readAsDataURL(t)}));C+="\n"+n.replaceAll(i,s)}}return M.textContent=C,w.append(M),I}renamePage(e,t,i=!1){return this.isReadOnly||this.updatePage({id:e,name:t},i),this}moveShapesToPage(e,t){if(0===e.length)return this;if(this.isReadOnly)return this;const{currentPageId:i}=this;if(t===i)return this;if(!this.store.has(t))return this;const n=this.getContent(e);if(!n)return this;if(this.getShapesInPage(t).length+n.shapes.length>p)return dr(this,t),this;const s=this.camera.z;return this.history.batch((()=>{this.deleteShapes(e),this.setCurrentPageId(t),this.setFocusLayer(null),this.selectNone(),this.putContent(n,{select:!0,preserveIds:!0,preservePosition:!0});const{center:{x:i,y:o}}=this.selectionBounds;this.setCamera(this.camera.x,this.camera.y,s),this.centerOnPoint(i,o)})),this.emit("moved-to-page",{name:this.currentPage.name,toId:t,fromId:i}),this}lockShapes(e=this.pageState.selectedIds){return this.isReadOnly,this}reorderShapes(e,t){if(this.isReadOnly)return this;if(0===t.length)return this;const i=this.getParentsMappedToChildren(t),n=[];switch(e){case"toBack":i.forEach(((e,t)=>{const i=(0,r().oE)(this.getSortedChildIds(t).map((e=>this.getShapeById(e))));if(e.size===i.length)return;let s,o;for(const n of i){if(!e.has(n)){o=n.index;break}e.delete(n),s=n.index}if(0===e.size)return;const a=Te(s,o,e.size);Array.from(e.values()).sort(Re).forEach(((e,t)=>n.push({id:e.id,type:e.type,index:a[t]})))}));break;case"toFront":i.forEach(((e,t)=>{const i=(0,r().oE)(this.getSortedChildIds(t).map((e=>this.getShapeById(e)))),s=i.length;if(e.size===s)return;let o,a;for(let n=s-1;n>-1;n--){const t=i[n];if(!e.has(t)){o=t.index;break}e.delete(t),a=t.index}if(0===e.size)return;const l=Te(o,a,e.size);Array.from(e.values()).sort(Re).forEach(((e,t)=>n.push({id:e.id,type:e.type,index:l[t]})))}));break;case"forward":i.forEach(((e,t)=>{const i=(0,r().oE)(this.getSortedChildIds(t).map((e=>this.getShapeById(e)))),s=i.length;if(e.size===s)return;const o=new Set(Array.from(e).map((e=>i.indexOf(e))));let a,l,c,d=-1,u=!1;for(let r=0;r<s;r++){const e=o.has(r);if(!u&&e)u=!0,d=r,l=void 0;else if(u&&!e){u=!1,c=r-d,a=i[r].index,l=i[r+1]?.index;const e=Te(a,l,c);for(let t=0;t<c;t++){const s=i[d+t];n.push({id:s.id,type:s.type,index:e[t]})}}}}));break;case"backward":i.forEach(((e,t)=>{const i=(0,r().oE)(this.getSortedChildIds(t).map((e=>this.getShapeById(e)))),s=i.length;if(e.size===s)return;const o=new Set(Array.from(e).map((e=>i.indexOf(e))));let a,l=-1,c=!1;for(let r=s-1;r>-1;r--){const e=o.has(r);if(!c&&e)c=!0,l=r;else if(c&&!e){c=!1,a=l-r;const e=Te(i[r-1]?.index,i[r].index,a);for(let t=0;t<a;t++){const s=i[r+t+1];n.push({id:s.id,type:s.type,index:e[t]})}}}}))}return this.updateShapes(n),this}sendToBack(e=this.pageState.selectedIds){return this.reorderShapes("toBack",e),this}sendBackward(e=this.pageState.selectedIds){return this.reorderShapes("backward",e),this}bringForward(e=this.pageState.selectedIds){return this.reorderShapes("forward",e),this}bringToFront(e=this.pageState.selectedIds){return this.reorderShapes("toFront",e),this}flipShapes(e,t=this.selectedIds){if(this.isReadOnly)return this;let i=(0,r().oE)(t.map((e=>this.getShapeById(e))));if(!i.length)return this;i=i.map((e=>"group"===e.type?this.getSortedChildIds(e.id).map((e=>this.getShapeById(e))):e)).flat();const n=l().Ax.Common((0,r().oE)(i.map((e=>this.getPageBounds(e))))).center;for(const s of i){const t=this.getShapeUtil(s).bounds(s),i=this.getPageTransformById(s.id);i&&this.resizeShape(s.id,{x:"horizontal"===e?-1:1,y:"vertical"===e?-1:1},{initialBounds:t,initialPageTransform:i,initialShape:s,mode:"scale_shape",scaleOrigin:n,scaleAxisRotation:0})}return this}stackShapes(e,t=this.pageState.selectedIds,i){if(this.isReadOnly)return this;const n=(0,r().oE)(t.map((e=>this.getShapeById(e)))).filter((e=>!!e&&(!cn.is(e)||"binding"!==e.props.start.type&&"binding"!==e.props.end.type))),s=n.length;if(void 0===i&&s<3||s<2)return this;const o=Object.fromEntries(n.map((e=>[e.id,this.getPageBounds(e)])));let a,c,d,u,h;if("horizontal"===e?(a="x",c="minX",d="maxX",u="width"):(a="y",c="minY",d="maxY",u="height"),void 0===i){const e=[];n.sort(((e,t)=>o[e.id][c]-o[t.id][c]));for(let i=0;i<s-1;i++){const t=n[i],s=n[i+1],r=o[t.id],a=o[s.id][c]-r[d],l=e.find((e=>e.gap===a));l?l.count++:e.push({gap:a,count:1})}let t=0;e.forEach((e=>{e.count>t&&(t=e.count,h=e.gap)})),1===t&&(h=Math.max(0,e.reduce(((e,t)=>e+t.gap*t.count),0)/(s-1)))}else h=i;const p=[];let g=o[n[0].id][d];return n.forEach(((e,t)=>{if(0===t)return;const i={x:0,y:0};i[a]=g+h-o[e.id][a];const n=this.getParentShape(e),s=n?l().hd.Rot(i,-this.getPageRotation(n)):i,r=this.getShapeUtil(e).onTranslateStart?.(e);p.push(r?{...r,[a]:e[a]+s[a]}:{id:e.id,type:e.type,[a]:e[a]+s[a]}),g+=o[e.id][u]+h})),this.updateShapes(p),this}packShapes(e=this.pageState.selectedIds,t=16){if(this.isReadOnly)return this;if(e.length<2)return this;const i=(0,r().oE)(e.map((e=>this.getShapeById(e))).filter((e=>!!e&&(!cn.is(e)||"binding"!==e.props.start.type&&"binding"!==e.props.end.type)))),n={},s={};let o,a,c=0;for(let r=0;r<i.length;r++)o=i[r],a=this.getPageBounds(o),n[o.id]=a,s[o.id]=a.clone(),c+=a.width*a.height;const d=l().Ax.Common((0,r().oE)(Object.values(n))),u=d.width;i.sort(((e,t)=>n[t.id].height-n[e.id].height));const h=Math.max(Math.ceil(Math.sqrt(c/.95)),u),p=[new(l().Ax)(d.x,d.y,h,1/0)];let g,m,I=0,f=0;for(let r=0;r<i.length;r++){o=i[r],a=s[o.id];for(let e=p.length-1;e>=0;e--)if(g=p[e],!(a.width>g.width||a.height>g.height)){a.x=g.x,a.y=g.y,f=Math.max(f,a.maxY),I=Math.max(I,a.maxX),a.width===g.width&&a.height===g.height?(m=p.pop(),e<p.length&&(p[e]=m)):a.height===g.height?(g.x+=a.width+t,g.width-=a.width+t):a.width===g.width?(g.y+=a.height+t,g.height-=a.height+t):(p.push(new(l().Ax)(g.x+(a.width+t),g.y,g.width-(a.width+t),a.height)),g.y+=a.height+t,g.height-=a.height+t);break}}const y=l().Ax.Common(Object.values(s)),b=l().hd.Sub(d.center,y.center);let w;const C=[];for(let r=0;r<i.length;r++){o=i[r],a=n[o.id],w=s[o.id];const e=this.getDeltaInParentSpace(o,l().hd.Sub(w.point,a.point).add(b)),t={id:o.id,type:o.type,x:o.x+e.x,y:o.y+e.y},c=this.getShapeUtil(o).onTranslateStart?.({...o,...t});c?C.push({...t,...c}):C.push(t)}return C.length&&this.updateShapes(C),this}alignShapes(e,t=this.pageState.selectedIds){if(this.isReadOnly)return this;if(t.length<2)return this;const i=(0,r().oE)(t.map((e=>this.getShapeById(e)))),n=Object.fromEntries(i.map((e=>[e.id,this.getPageBounds(e)]))),s=l().Ax.Common((0,r().oE)(Object.values(n))),o=[];return i.forEach((t=>{const i=n[t.id];if(!i)return;const r={x:0,y:0};switch(e){case"top":r.y=s.minY-i.minY;break;case"center-vertical":r.y=s.midY-i.minY-i.height/2;break;case"bottom":r.y=s.maxY-i.minY-i.height;break;case"left":r.x=s.minX-i.minX;break;case"center-horizontal":r.x=s.midX-i.minX-i.width/2;break;case"right":r.x=s.maxX-i.minX-i.width}const a=this.getParentShape(t),c=a?l().hd.Rot(r,-this.getPageRotation(a)):r,d=this.getShapeUtil(t).onTranslateStart?.(t);o.push(d?{...d,x:t.x+c.x,y:t.y+c.y}:{id:t.id,type:t.type,x:t.x+c.x,y:t.y+c.y})})),this.updateShapes(o),this}distributeShapes(e,t=this.pageState.selectedIds){if(this.isReadOnly)return this;if(t.length<3)return this;const i=t.length,n=(0,r().oE)(t.map((e=>this.getShapeById(e)))),s=Object.fromEntries(n.map((e=>[e.id,this.getPageBounds(e)])));let o,a,c,d,u;"horizontal"===e?(o="x",a="minX",c="maxX",d="midX",u="width"):(o="y",a="minY",c="maxY",d="midY",u="height");const h=[],p=n.sort(((e,t)=>s[e.id][a]-s[t.id][a]))[0],g=n.sort(((e,t)=>s[t.id][c]-s[e.id][c]))[0],m=s[p.id][d],I=(s[g.id][d]-m)/(i-1),f=m+I;return n.filter((e=>e!==p&&e!==g)).sort(((e,t)=>s[e.id][d]-s[t.id][d])).forEach(((e,t)=>{const i={x:0,y:0};i[o]=f+I*t-s[e.id][u]/2-s[e.id][o];const n=this.getParentShape(e),r=n?l().hd.Rot(i,-this.getPageRotation(n)):i,a=this.getShapeUtil(e).onTranslateStart?.(e);h.push(a?{...a,[o]:e[o]+r[o]}:{id:e.id,type:e.type,[o]:e[o]+r[o]})})),this.updateShapes(h),this}_resizeUnalignedShape(e,t,i){const{type:n}=i.initialShape,s=new(l().hd)(t.x,t.y);if(Math.abs(t.x)>Math.abs(t.y)?s.x=Math.sign(t.x)*Math.abs(t.y):s.y=Math.sign(t.y)*Math.abs(t.x),this.resizeShape(e,s,{initialShape:i.initialShape,initialBounds:i.initialBounds}),Math.sign(t.x)*Math.sign(t.y)<0){let{rotation:t}=l().cQ.Decompose(i.initialPageTransform);t-=2*t,this.updateShapes([{id:e,type:n,rotation:t}],!0)}const o=l().cQ.applyToPoint(i.initialPageTransform,i.initialBounds.center),r=this._scalePagePoint(o,i.scaleOrigin,t,i.scaleAxisRotation),a=this.getPageCenterById(e),c=this.getPagePointById(e);if(!a||!c)return this;const d=l().hd.Sub(r,a),u=l().hd.Add(c,d),{x:h,y:p}=this.getPointInParentSpace(e,u);return this.updateShapes([{id:e,type:n,x:h,y:p}],!0),this}_scalePagePoint(e,t,i,n){const s=l().hd.RotWith(e,t,-n).sub(t),o=l().hd.MulV(s,i);return l().hd.Add(o,t).rotWith(t,n)}resizeShape(e,t,i){if(this.isReadOnly)return this;Number.isFinite(t.x)||(t=new(l().hd)(1,t.y)),Number.isFinite(t.y)||(t=new(l().hd)(t.x,1));const n=i?.initialShape??this.getShapeById(e);if(!n)return this;const s=i?.scaleOrigin??this.getPageBoundsById(e)?.center;if(!s)return this;const o=this.getPageRotationById(e);if(null==o)return this;const r=i?.scaleAxisRotation??o,a=i?.initialPageTransform??this.getPageTransformById(e);if(!a)return this;const c=i?.initialBounds??this.getBoundsById(e);if(!c)return this;if(!(0,l().jw)(o,r))return this._resizeUnalignedShape(e,t,{...i,initialBounds:c,scaleOrigin:s,scaleAxisRotation:r,initialPageTransform:a,initialShape:n});const d=this.getShapeUtil(n);if(d.isAspectRatioLocked(n)&&(t=Math.abs(t.x)>Math.abs(t.y)?new(l().hd)(t.x,Math.sign(t.y)*Math.abs(t.x)):new(l().hd)(Math.sign(t.x)*Math.abs(t.y),t.y)),d.onResize&&d.canResize(n)){const u=this._scalePagePoint(l().cQ.applyToPoint(a,new(l().hd)(0,0)),s,t,r),h=this.getPointInParentSpace(n.id,u),p=new(l().hd)(t.x,t.y),g=(0,l().YY)((o-r)%Math.PI,0);p.x=g?t.x:t.y,p.y=g?t.y:t.x;const m=l().cQ.applyToPoint(a,new(l().hd)),{x:I,y:f}=this.getPointInParentSpace(n.id,m);this.updateShapes([{id:e,type:n.type,x:h.x,y:h.y,...d.onResize({...n,x:I,y:f},{newPoint:h,handle:i?.dragHandle??"bottom_right",mode:i?.mode??"scale_shape",scaleX:p.x,scaleY:p.y,initialBounds:c,initialShape:n})}],!0)}else{const i=l().cQ.applyToPoint(a,c.center),o=this._scalePagePoint(i,s,t,r),d=this.getPointInParentSpace(n.id,i),u=this.getPointInParentSpace(n.id,o),h=l().hd.Sub(u,d);this.updateShapes([{id:e,type:n.type,x:n.x+h.x,y:n.y+h.y}],!0)}return this}stretchShapes(e,t=this.pageState.selectedIds){if(this.isReadOnly)return this;if(t.length<2)return this;const i=(0,r().oE)(t.map((e=>this.getShapeById(e)))),n=Object.fromEntries(i.map((e=>[e.id,this.getBounds(e)]))),s=Object.fromEntries(i.map((e=>[e.id,this.getPageBounds(e)]))),o=l().Ax.Common((0,r().oE)(Object.values(s)));switch(e){case"vertical":this.batch((()=>{for(const e of i){if(this.getPageRotation(e)%l().uA)continue;const t=n[e.id],i=s[e.id],r=this.getDeltaInParentSpace(e,new(l().hd)(0,o.minY-i.minY)),{x:a,y:c}=l().hd.Add(r,e);this.updateShapes([{id:e.id,type:e.type,x:a,y:c}],!0);const d=new(l().hd)(1,o.height/i.height);this.resizeShape(e.id,d,{initialBounds:t,scaleOrigin:new(l().hd)(i.center.x,o.minY),scaleAxisRotation:0})}}));break;case"horizontal":this.batch((()=>{for(const e of i){const t=n[e.id],i=s[e.id];if(this.getPageRotation(e)%l().uA)continue;const r=this.getDeltaInParentSpace(e,new(l().hd)(o.minX-i.minX,0)),{x:a,y:c}=l().hd.Add(r,e);this.updateShapes([{id:e.id,type:e.type,x:a,y:c}],!0);const d=new(l().hd)(o.width/i.width,1);this.resizeShape(e.id,d,{initialBounds:t,scaleOrigin:new(l().hd)(o.minX,i.center.y),scaleAxisRotation:0})}}))}return this.updateShapes([]),this}reparentShapesById(e,t,i){const s=[],o=n()._P.isId(t)?l().cQ.Identity():this.getPageTransformById(t),a=o.decompose().rotation;let c=[];const d=(0,r().oE)(this.getSortedChildIds(t).map((e=>this.getShapeById(e))));if(i){const t=d.find((e=>e.index===i));if(t){const n=d[d.indexOf(t)+1];c=n?Te(i,n.index,e.length):We(i,e.length)}else{const t=d.sort(Re).find((e=>e.index>i));c=t?Te(i,t.index,e.length):We(i,e.length)}}else{const t=d.length&&d[d.length-1];c=t?We(t.index,e.length):Oe(e.length)}let u;for(let n=0;n<e.length;n++){u=e[n];const i=this.getShapeById(u),r=this.getPagePointById(u);if(!i||!r)continue;const d=l().cQ.applyToPoint(l().cQ.Inverse(o),r),h=this.getPageRotation(i)-a;s.push({id:i.id,type:i.type,parentId:t,x:d.x,y:d.y,rotation:h,index:c[n]})}return this.updateShapes(s),this}select(...e){return this.setSelectedIds(e),this}deselect(...e){const{selectedIds:t}=this;return t.length>0&&e.length>0&&this.setSelectedIds(t.filter((t=>!e.includes(t)))),this}selectAll(){const e=this.getSortedChildIds(this.currentPageId);return e.length<=0||this.setSelectedIds(e),this}getShapesAndDescendantsInOrder(e){const t=[],i=new Set,n=[...e];for(;n.length>0;){const e=n.pop();if(!e)break;i.has(e)||(t.push(e),this.getSortedChildIds(e).forEach((e=>{n.push(e)})))}const s=t.map((e=>this.getShapeById(e))).filter((e=>"group"!==e.type)),{sortedShapesArray:o}=this;return s.sort(((e,t)=>o.indexOf(e)-o.indexOf(t))),s}selectNone(){return this.selectedIds.length>0&&this.setSelectedIds([]),this}setCurrentPageId(e){return this._setCurrentPageId(e),this}_setCurrentPageId=this.history.createCommand("setCurrentPage",(e=>{if(this.store.has(e))return{data:{pageId:e,prev:this.currentPageId},squashing:!0,preservesRedoStack:!0};console.error("Tried to set the current page id to a page that doesn't exist.")}),{do:({pageId:e})=>{if(!this.getPageStateByPageId(e)){const t=n().Ms.create({});this.store.put([t,n().wO.create({pageId:e,instanceId:this.instanceId,cameraId:t.id})])}this.store.put([{...this.instanceState,currentPageId:e}]),this.updateCullingBounds()},undo:({prev:e})=>{this.store.put([{...this.instanceState,currentPageId:e}]),this.updateCullingBounds()},squash:({prev:e},{pageId:t})=>({pageId:t,prev:e})});updateInstanceState(e,t=!1,i=!1){return this._updateInstanceState(e,t,i),this}_updateInstanceState=this.history.createCommand("updateTabState",((e,t=!1,i=!1)=>{const n=this.instanceState;return{data:{prev:n,next:{...n,...e}},squashing:i,ephemeral:t}}),{do:({next:e})=>{this.store.put([e])},undo:({prev:e})=>{this.store.put([e])},squash:({prev:e},{next:t})=>({prev:e,next:t})});get hoveredId(){return this.pageState.hoveredId}get hoveredShape(){return this.hoveredId?this.getShapeById(this.hoveredId)??null:null}setHoveredId(e=null){return e===this.pageState.hoveredId||this.setInstancePageState({hoveredId:e},!0),this}setErasingIds(e=[]){const t=this.erasingIdsSet;return e.length===t.size&&e.every((e=>t.has(e)))||this.setInstancePageState({erasingIds:e},!0),this}setCursor(e){const t=this.cursor,i={...t,rotation:0,...e};return t.type===i.type&&t.rotation===i.rotation&&t.color===i.color||this.updateInstanceState({cursor:i},!0),this}setScribble(e=null){return this.updateInstanceState({scribble:e},!0),this}setBrush(e=null){return!e&&this.brush,this.batch((()=>{this.updateInstanceState({brush:e},!0)})),this}rotateShapesBy(e,t){if(e.length<=0)return this;return Be({delta:t,snapshot:_e({app:this}),app:this,stage:"one-off"}),this}nudgeShapes(e,t,i=!1){if(e.length<=0)return this;const n=this.isGridMode?i?5*this.gridSize:this.gridSize:i?10:1,s=l().hd.Mul(y[t],n),o=[];for(const r of e){const e=this.getShapeById(r);if(!e)throw Error(`Could not find a shape with the id ${r}.`);const t=this.getDeltaInParentSpace(e,s),i=this.getShapeUtil(e).onTranslateStart?.(e);o.push(i?{...i,x:e.x+t.x,y:e.y+t.y}:{id:r,x:e.x+t.x,y:e.y+t.y,type:e.type})}return this.updateShapes(o),this}duplicateShapes(e=this.selectedIds,t){if(e.length<=0)return this;const i=new Set(e),s=[],o=[...e];for(;o.length>0;){const e=o.pop();if(!e)break;s.push(e),this.getSortedChildIds(e).forEach((e=>o.push(e)))}s.reverse();const a=new Map(s.map((e=>[e,this.createShapeId()]))),c=(0,r().oE)(s.map((e=>{const n=this.getShapeById(e);if(!n)return null;const s=a.get(e);let o=0,c=0;if(t&&i.has(e)){const e=this.getParentTransform(n),i=new(l().hd)(t.x,t.y).rot(-l().cQ.Decompose(e).rotation);o=i.x,c=i.y}const d=n.parentId??this.currentPageId,u=this.getSortedChildIds(d),h=u.indexOf(n.id),p=u[h+1],g=p?this.getShapeById(p):null,m=g?ze(n.index,g.index):Pe(n.index),I={...(0,r().A4)(n),id:s,x:n.x+o,y:n.y+c,index:m};if(cn.is(n)&&cn.is(I)){if("binding"===n.props.start.type){const e=a.get(n.props.start.boundShapeId);if(e)I.props.start.boundShapeId=e;else{const e=this.getPageBoundsById(n.props.start.boundShapeId),t=new(l().hd)(n.props.start.normalizedAnchor.x*e.width+e.minX,n.props.start.normalizedAnchor.y*e.height+e.minY),i=l().cQ.applyToPoint(l().cQ.Inverse(this.getTransform(I)),t);I.props.start={type:"point",x:i.x+o,y:i.y+c}}}if("binding"===n.props.end.type){const e=a.get(n.props.end.boundShapeId);if(e)I.props.end.boundShapeId=e;else{const e=this.getPageBoundsById(n.props.end.boundShapeId),t=new(l().hd)(n.props.end.normalizedAnchor.x*e.width+e.minX,n.props.end.normalizedAnchor.y*e.height+e.minY),i=l().cQ.applyToPoint(l().cQ.Inverse(this.getTransform(I)),t);I.props.end={type:"point",x:i.x+o,y:i.y+c}}}}return I})));return c.forEach((e=>{(0,n().vc)(e.parentId)&&a.has(e.parentId)&&(e.parentId=a.get(e.parentId))})),this.history.batch((()=>{const e=c.length+this.shapeIds.size>p;e&&dr(this);const i=e?c.slice(0,p-this.shapeIds.size):c,n=i.map((e=>e.id));if(this.createShapes(i),this.setSelectedIds(n),void 0!==t){const{viewportPageBounds:e,selectedPageBounds:t}=this;t&&!e.contains(t)&&this.centerOnPoint(t.center.x,t.center.y,{duration:m})}})),this}setProp(e,t,i=!1,n=!1){const s=[],o=e=>{const t=this.getSortedChildIds(e);for(const i of t){const e=this.getShapeById(i);"group"===e?.type&&o(e.id),s.push(e)}};return this.history.batch((()=>{if(this.updateInstanceState({propsForNextShape:Ce(this.instanceState.propsForNextShape,{[e]:t})},i,n),this.isIn("select")){const{pageState:{selectedIds:n}}=this;if(n.length>0){const a=(0,r().oE)(n.map((e=>{const t=this.getShapeById(e);if("group"===t?.type){const e=this.getSortedChildIds(t.id);for(const t of e){const e=this.getShapeById(t);"group"===e?.type&&o(e.id),s.push(e)}return s}return t}))).flat().filter((t=>void 0!==t.props[e]&&"group"!==t?.type));if(this.updateShapes(a.map((i=>{const n={...i.props,[e]:t};return"color"===e&&"labelColor"in n&&(n.labelColor="black"),{id:i.id,type:i.type,props:n}})),i),"color"!==e&&"opacity"!==e){const e=[];for(const t of a){const i=this.getShapeById(t.id);if(!i)continue;const n=this.getShapeUtil(i),s=n.bounds(t),o=n.bounds(i),r={id:t.id,type:t.type};let a=!1;if(s.width!==o.width)if(a=!0,js.is(t))switch(t.props.align){case"middle":r.x=i.x+(s.width-o.width)/2;break;case"end":r.x=i.x+s.width-o.width}else r.x=i.x+(s.width-o.width)/2;s.height!==o.height&&(a=!0,r.y=i.y+(s.height-o.height)/2),a&&e.push(r)}e.length&&this.updateShapes(e,i)}}}this.updateInstanceState({propsForNextShape:Ce(this.instanceState.propsForNextShape,{[e]:t})},i,n)})),this}_willSetInitialBounds=!0;_setCamera(e,t,i=this.camera.z){const n=this.camera;return n.x===e&&n.y===t&&n.z===i||(this.store.put([{...n,x:e,y:t,z:i}]),this._cameraManager.tick(),this.emit("change-camera",this.camera)),this}setCamera(e,t,i=this.camera.z){return this.stopCameraAnimation(),e=Number.isNaN(e)?0:e,t=Number.isNaN(t)?0:t,i=Number.isNaN(i)?1:i,this._setCamera(e,t,i),this}animateCamera(e,t,i=this.camera.z,n=C){e=Number.isNaN(e)?0:e,t=Number.isNaN(t)?0:t,i=Number.isNaN(i)?1:i;const{width:s,height:o}=this.viewportScreenBounds,r=s/i,a=o/i,c=new(l().Ax)(-e,-t,r,a);return this._animateToViewport(c,n)}centerOnPoint(e,t,i){if(!this.canMoveCamera)return this;const{viewportPageBounds:{width:n,height:s},camera:o}=this;return i?.duration?this.animateCamera(-(e-n/2),-(t-s/2),o.z,i):this.setCamera(-(e-n/2),-(t-s/2),o.z),this}zoomToFit(e){if(!this.canMoveCamera)return this;const t=[...this.shapeIds];if(t.length<=0)return this;const i=l().Ax.Common((0,r().oE)(t.map((e=>this.getPageBoundsById(e)))));return this.zoomToBounds(i.minX,i.minY,i.width,i.height,void 0,e),this}resetZoom(e=this.viewportScreenCenter,t){if(!this.canMoveCamera)return this;const{x:i,y:n,z:s}=this.camera,{x:o,y:r}=e;return t?.duration?this.animateCamera(i+(o/1-o)-(o/s-o),n+(r/1-r)-(r/s-r),1,t):this.setCamera(i+(o/1-o)-(o/s-o),n+(r/1-r)-(r/s-r),1),this}zoomIn(e=this.viewportScreenCenter,t){if(!this.canMoveCamera)return this;const{x:i,y:n,z:s}=this.camera;let o=8;for(let l=1;l<I.length;l++){const e=I[l];if(!(e-s<=(e-I[l-1])/2)){o=e;break}}const{x:r,y:a}=e;return t?.duration?this.animateCamera(i+(r/o-r)-(r/s-r),n+(a/o-a)-(a/s-a),o,t):this.setCamera(i+(r/o-r)-(r/s-r),n+(a/o-a)-(a/s-a),o),this}zoomOut(e=this.viewportScreenCenter,t){if(!this.canMoveCamera)return this;const{x:i,y:n,z:s}=this.camera;let o=f;for(let l=I.length-1;l>0;l--){const e=I[l-1],t=I[l];if(!(t-s>=(t-e)/2)){o=e;break}}const{x:r,y:a}=e;return t?.duration?this.animateCamera(i+(r/o-r)-(r/s-r),n+(a/o-a)-(a/s-a),o,t):this.setCamera(i+(r/o-r)-(r/s-r),n+(a/o-a)-(a/s-a),o),this}zoomToSelection(e){if(!this.canMoveCamera)return this;const t=this.selectedIds;if(t.length<=0)return this;const i=l().Ax.Common((0,r().oE)(t.map((e=>this.getPageBoundsById(e)))));return this.zoomToBounds(i.minX,i.minY,i.width,i.height,Math.max(1,this.camera.z),e),this}panZoomIntoView(e,t){if(!this.canMoveCamera)return this;if(e.length<=0)return this;const i=l().Ax.Common((0,r().oE)(e.map((e=>this.getPageBoundsById(e))))),{viewportPageBounds:n}=this;if(n.h<i.h||n.w<i.w)return this.zoomToBounds(i.minX,i.minY,i.width,i.height,this.camera.z,t),this;{const e=this._activeAreaManager.offsets.value,s=n.y+e.top,o=n.maxY-e.right,r=n.maxY-e.bottom,a=n.x+e.left,l=i.y,c=i.maxX,d=i.maxY,u=i.x;let h=0,p=0;r<d?p=r-d:s>l&&(p=s-l),o<c?h=o-c:a>u&&(h=a-u);const{camera:g}=this;t?.duration?this.animateCamera(g.x+h,g.y+p,g.z,t):this.setCamera(g.x+h,g.y+p,g.z)}return this}zoomToBounds(e,t,i,n,s,o){if(!this.canMoveCamera)return this;const{viewportScreenBounds:r}=this,a=Math.min(256,.28*r.width);let c=(0,l().qE)(Math.min((r.width-a)/i,(r.height-a)/n),f,8);return void 0!==s&&(c=Math.min(s,c)),o?.duration?this.animateCamera(-e+(r.width-i*c)/2/c,-t+(r.height-n*c)/2/c,c,o):this.setCamera(-e+(r.width-i*c)/2/c,-t+(r.height-n*c)/2/c,c),this}pan(e,t,i){if(!this.canMoveCamera)return this;const{camera:n}=this,{x:s,y:o,z:r}=n,a=new(l().hd)(e,t).div(r);return i?.duration?this.animateCamera(s+a.x,o+a.y,r,i):(this.setCamera(s+a.x,o+a.y,r),this)}stopCameraAnimation(){return this.emit("stop-camera-animation"),this}_viewportAnimation=null;_animateViewport(e){if(!this._viewportAnimation)return;const t=()=>{this.removeListener("tick",this._animateViewport),this.removeListener("stop-camera-animation",t)};this.once("stop-camera-animation",t),this._viewportAnimation.elapsed+=e;const{elapsed:i,easing:n,duration:s,start:o,end:r}=this._viewportAnimation;if(i>s){const e=this.viewportScreenBounds.width/r.width,t=-r.x,i=-r.y;return this._setCamera(t,i,e),this.removeListener("tick",this._animateViewport),void(this._viewportAnimation=null)}const a=n(1-(s-i)/s),c=o.minX+(r.minX-o.minX)*a,d=o.minY+(r.minY-o.minY)*a,u=o.maxX+(r.maxX-o.maxX)*a,h=o.maxY+(r.maxY-o.maxY)*a,p=new(l().Ax)(c,d,u-c,h-d),g=this.viewportScreenBounds.width/p.width,m=-p.x,I=-p.y;this._setCamera(m,I,g)}_animateToViewport(e,t={}){const{duration:i=0,easing:n=l().Z4.easeInOutCubic}=t,s=this.viewportPageBounds.clone();return this.stopCameraAnimation(),this._viewportAnimation={elapsed:0,duration:i,easing:n,start:s,end:e},this.addListener("tick",this._animateViewport),this}slideCamera(e={}){if(!this.canMoveCamera)return this;const{speed:t,direction:i,friction:n,speedThreshold:s=.01}=e;let o=t;this.stopCameraAnimation();const r=()=>{this.removeListener("tick",a),this.removeListener("stop-camera-animation",r)};this.once("stop-camera-animation",r);const a=e=>{const{x:t,y:a,z:l}=this.camera,c=i.clone().mul(o*e/l);o*=1-n,o<s?r():this._setCamera(t+c.x,a+c.y,l)};return this.addListener("tick",a),this}animateToShape(e,t=C){if(!this.canMoveCamera)return this;const i=zs(this),n=i.width/i.height,s=this.getPageBoundsById(e);if(!s)return this;const o=s.width/s.height,r=s.clone(),a=s.width/i.width;return r.width+=(i.left+i.right)*a,r.height+=(i.top+i.bottom)*a,r.x-=i.left*a,r.y-=i.top*a,o>n?(r.height=s.width/n,r.y-=(r.height-s.height)/2):(r.width=s.height*n,r.x-=(r.width-s.width)/2),this._animateToViewport(r,t)}blur(){return this.complete(),this.getContainer().blur(),this._isFocused.set(!1),this}focus(){return this.getContainer().focus(),this._isFocused.set(!0),this}cancel(){return this.dispatch({type:"misc",name:"cancel"}),this}interrupt(){return this.dispatch({type:"misc",name:"interrupt"}),this}complete(){return this.dispatch({type:"misc",name:"complete"}),this}async onCreateAssetFromFile(e){return await ee(e)}async onCreateBookmarkFromUrl(e){try{const t=await fetch(e,{method:"GET",mode:"no-cors"}),i=await t.text(),n=(new DOMParser).parseFromString(i,"text/html");return{image:n.head.querySelector('meta[property="og:image"]')?.getAttribute("content")??"",title:n.head.querySelector('meta[property="og:title"]')?.getAttribute("content")??"",description:n.head.querySelector('meta[property="og:description"]')?.getAttribute("content")??""}}catch(t){return console.error(t),{image:"",title:"",description:""}}}textMeasure;groupShapes(e=this.selectedIds,t=(0,n().n6)()){if(this.isReadOnly)return this;if(e.length<=1)return this;const i=(0,r().oE)(e.map((e=>this.getShapeById(e)))),s=i.sort(Re).map((e=>e.id)),o=l().Ax.Common((0,r().oE)(i.map((e=>this.getPageBounds(e))))),{x:a,y:c}=o.point,d=this.findCommonAncestor(i)??this.currentPageId;if("select"!==this.currentToolId)return this;this.isIn("select.idle")||this.cancel();const u=i.filter((e=>e.parentId===d)).sort(Re),h=u[u.length-1]?.index;return this.batch((()=>{this.createShapes([{id:t,type:"group",parentId:d,index:h,x:a,y:c,props:{opacity:"1"}}]),this.reparentShapesById(s,t),this.select(t)})),this}ungroupShapes(e=this.selectedIds){if(this.isReadOnly)return this;if(0===e.length)return this;if("select"!==this.currentToolId)return this;this.isIn("select.idle")||this.cancel();const t=new Set,i=(0,r().oE)(e.map((e=>this.getShapeById(e)))),n=[];return i.forEach((e=>{as.is(e)?n.push(e):t.add(e.id)})),0===n.length||this.batch((()=>{let e;for(let i=0,s=n.length;i<s;i++){e=n[i];const s=this.getSortedChildIds(e.id);for(let e=0,i=s.length;e<i;e++)t.add(s[e]);this.reparentShapesById(s,e.parentId,e.index)}this.deleteShapes(n.map((e=>e.id))),this.select(...t)})),this}};let cr=lr;function dr(e,t=e.currentPageId){const i=e.getPageById(t).name;e.emit("max-shapes",{name:i,pageId:t,count:p})}rr([c().EW],cr.prototype,"_pageTransformCache",1),rr([c().EW],cr.prototype,"_pageBoundsCache",1),rr([c().EW],cr.prototype,"_pageMaskCache",1),rr([c().EW],cr.prototype,"_clipPathCache",1),rr([c().EW],cr.prototype,"canUndo",1),rr([c().EW],cr.prototype,"canRedo",1),rr([c().EW],cr.prototype,"erasingIds",1),rr([c().EW],cr.prototype,"hintingIds",1),rr([c().EW],cr.prototype,"erasingIdsSet",1),rr([c().EW],cr.prototype,"allowUiPaste",1),rr([c().EW],cr.prototype,"props",1),rr([c().EW],cr.prototype,"_arrowBindingsIndex",1),rr([c().EW],cr.prototype,"documentSettings",1),rr([c().EW],cr.prototype,"_userDocumentSettings",1),rr([c().EW],cr.prototype,"_pageState",1),rr([c().EW],cr.prototype,"camera",1),rr([c().EW],cr.prototype,"zoomLevel",1),rr([c().EW],cr.prototype,"selectedIds",1),rr([c().EW],cr.prototype,"selectedIdsSet",1),rr([c().EW],cr.prototype,"_pages",1),rr([c().EW],cr.prototype,"pages",1),rr([c().EW],cr.prototype,"_pageStates",1),rr([c().EW],cr.prototype,"renderingShapes",1),rr([c().EW],cr.prototype,"allShapesCommonBounds",1),rr([c().EW],cr.prototype,"viewportScreenBounds",1),rr([c().EW],cr.prototype,"viewportScreenCenter",1),rr([c().EW],cr.prototype,"viewportPageBounds",1),rr([c().EW],cr.prototype,"cullingBounds",1),rr([c().EW],cr.prototype,"cullingBoundsExpanded",1),rr([c().EW],cr.prototype,"viewportPageCenter",1),rr([c().EW],cr.prototype,"editingShape",1),rr([c().EW],cr.prototype,"selectedPageBounds",1),rr([c().EW],cr.prototype,"selectionRotation",1),rr([c().EW],cr.prototype,"selectionBounds",1),rr([c().EW],cr.prototype,"selectionPageCenter",1),rr([c().EW],cr.prototype,"shapesArray",1),rr([c().EW],cr.prototype,"sortedShapesArray",1),rr([c().EW],cr.prototype,"selectedShapes",1),rr([c().EW],cr.prototype,"onlySelectedShape",1),rr([c().EW],cr.prototype,"_currentUserPresence",1),rr([c().EW],cr.prototype,"_assets",1),rr([c().EW],cr.prototype,"hoveredId",1),rr([c().EW],cr.prototype,"hoveredShape",1);const ur={fonts:{draw:"/fonts/Shantell_Sans-Normal-SemiBold.woff2",serif:"/fonts/IBMPlexSerif-Medium.woff2",sansSerif:"/fonts/IBMPlexSans-Medium.woff2",monospace:"/fonts/IBMPlexMono-Medium.woff2"}},hr={error:null};class pr extends a.Component{static getDerivedStateFromError(e){return{error:e}}state=hr;componentDidCatch(e){this.props.onError?.(e)}render(){const{error:e}=this.state;return null!==e?this.props.fallback(e):this.props.children}}var gr=()=>i(32485);const mr=(0,W().u4)((function(){const e=P(),t=e.brush,i=e.isIn("select.brushing");return t&&i?(0,s.jsx)("rect",{className:"rs-brush",width:(0,l().WM)(Math.max(1,t.w)),height:(0,l().WM)(Math.max(1,t.h)),transform:`translate(${t.x},${t.y})`}):null})),Ir=(0,W().u4)((function({size:e}){const t=P(),{x:i,y:n,z:o}=t.camera;return t.isGridMode?(0,s.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("defs",{children:j.map((({min:t,mid:r,step:a},l)=>(0,s.jsx)(fr,{min:t,mid:r,step:a,x:i,y:n,z:o,size:e},`grid-layer-${l}`)))}),j.map((({step:e},t)=>(0,s.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${e})`},`grid-rect-${t}`)))]}):null}));function fr({step:e,min:t,mid:i,size:n,x:o,y:a,z:l}){const c=e*n*l,d=.5+o*l,u=.5+a*l,h=d>0?d%c:c+d%c,p=u>0?u%c:c+u%c,g=l<i?(0,r().ww)(l,[t,i],[0,1]):1;return(0,s.jsx)("pattern",{id:`grid-${e}`,width:c,height:c,patternUnits:"userSpaceOnUse",children:(0,s.jsx)("circle",{className:"tl-grid-dot",cx:h,cy:p,r:1,opacity:g})},`grid-pattern-${e}`)}function yr({id:e,handle:t}){const i=function(e,t){const i=P();return a.useMemo((()=>{let n,s;return{onPointerDown:n=>{if(n.isKilled)return;he(de(n.currentTarget),n);const{shape:s,handle:o}=fi(i,e,t);o&&i.dispatch({type:"pointer",target:"handle",handle:o,shape:s,name:"pointer_down",...Ve(n,i.getContainer())})},onPointerMove:o=>{if(o.isKilled)return;if(o.clientX===n&&o.clientY===s)return;n=o.clientX,s=o.clientY;const{shape:r,handle:a}=fi(i,e,t);a&&i.dispatch({type:"pointer",target:"handle",handle:a,shape:r,name:"pointer_move",...Ve(o,i.getContainer())})},onPointerUp:n=>{if(n.isKilled)return;pe(de(n.currentTarget),n);const{shape:s,handle:o}=fi(i,e,t);o&&i.dispatch({type:"pointer",target:"handle",handle:o,shape:s,name:"pointer_up",...Ve(n,i.getContainer())})},onPointerEnter:n=>{if(n.isKilled)return;const{shape:s,handle:o}=fi(i,e,t);o&&i.dispatch({type:"pointer",target:"handle",handle:o,shape:s,name:"pointer_enter",...Ve(n,i.getContainer())})},onPointerLeave:n=>{if(n.isKilled)return;const{shape:s,handle:o}=fi(i,e,t);o&&i.dispatch({type:"pointer",target:"handle",handle:o,shape:s,name:"pointer_leave",...Ve(n,i.getContainer())})}}}),[i,e,t])}(e,t.id),{x:n,y:o,type:r}=t;return(0,s.jsxs)("g",{className:gr()("rs-handle",{"rs-handle-hint":"vertex"!==r}),"aria-label":"handle",transform:`translate(${n}, ${o})`,...i,children:[(0,s.jsx)("circle",{className:"rs-handle-bg"}),(0,s.jsx)("circle",{className:"rs-handle-fg"})]})}const br=(0,W().u4)((function(){const e=P(),t=e.zoomLevel,i=e.isChangingStyle,n=e.onlySelectedShape,o=e.isInAny("select.idle","select.pointing_handle")&&!i&&!e.isReadOnly;if(!n||!o)return null;const r=e.getShapeUtil(n),a=r.handles?.(n);if(!a)return null;const c=e.getPageTransform(n);if(!c)return null;const d=[];for(let s=0,l=a[s];s<a.length;s++,l=a[s]){if("vertex"!==l.type){const e=a[s-1],i=a[s+1];if(e&&i&&Math.hypot(e.y-i.y,e.x-i.x)<48/t)continue}d.push(l)}return d.sort((e=>"vertex"===e.type?1:-1)),(0,s.jsx)("g",{transform:l().cQ.toCssString(c),children:d.map((e=>(0,s.jsx)(yr,{id:n.id,handle:e},e.id)))})})),wr=(0,a.memo)((({zoom:e,point:t,color:i})=>t?(0,s.jsx)("use",{href:"#cursor",transform:`translate(${t.x}, ${t.y}) scale(${1/e})`,color:i}):null)),Cr=({zoom:e,point:t,color:i,viewport:n})=>{const o=(0,l().qE)(t.x,n.minX+5/e,n.maxX-5/e),r=(0,l().qE)(t.y,n.minY+5/e,n.maxY-5/e),a=(0,l().nv)(l().hd.Angle(n.center,t));return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("use",{href:"#cursor_hint",transform:`translate(${o}, ${r}) scale(${1/e}) rotate(${a})`,color:i})})};class Mr{constructor(e){this.shape=e}equals(e){return this.shape?.props===e?.shape?.props}}const xr=({shape:e,util:t})=>(0,W().A1)("Indicator:",(()=>t.indicator(e))),Ar=({app:e,id:t})=>{const i=(0,W().h)("shape",(()=>new Mr(e.store.get(t))),[e,t]);return i.shape?(0,s.jsx)(pr,{fallback:Sr,onError:t=>e.annotateError(t,{origin:"react.shapeIndicator",willCrashApp:!1}),children:(0,s.jsx)(xr,{shape:i.shape,util:e.getShapeUtil(i.shape)})}):null};function Sr(){return(0,s.jsx)("circle",{cx:4,cy:4,r:8,strokeWidth:"1",stroke:"red"})}const vr=a.memo((function({id:e,isHinting:t,color:i}){const n=P(),o=(0,W().h)("transform",(()=>{const t=n.getPageTransformById(e);return t?l().cQ.toCssString(t):""}),[n,e]);return(0,s.jsx)("g",{className:gr()("rs-shape-indicator",{"rs-shape-indicator__hinting":t}),transform:o,stroke:i??"var(--color-selected)",children:(0,s.jsx)(Ar,{app:n,id:e})})})),Lr=(0,W().u4)((function(){const e=P(),{viewportPageBounds:t,zoomLevel:i}=e,n=(()=>{const e=P(),t=(0,W().fp)("time",Date.now());return a.useEffect((()=>{const e=setInterval((()=>t.set(Date.now())),5e3);return()=>clearInterval(e)}),[t]),(0,a.useMemo)((()=>e.store.query.records("user_presence",(()=>({lastActivityTimestamp:{gt:t.value-jr},userId:{neq:e.userId}})))),[e,t])})();return(0,s.jsx)("g",{children:n.value.map((e=>(0,s.jsx)(Nr,{presence:e,viewport:t,zoom:i},e.id)))})})),jr=1e4,Nr=(0,W().u4)((function({presence:e,viewport:t,zoom:i}){const n=P(),{userId:o,color:r,cursor:c,lastUsedInstanceId:d}=e,u=(0,a.useMemo)((()=>d?n.store.query.record("instance_page_state",(()=>({instanceId:{eq:d},pageId:{eq:n.currentPageId}}))):null),[n,d]);if(!d||!u)return null;const h=n.store.get(d);if(!h)return null;if(h.currentPageId!==n.currentPageId)return null;if(!u.value)return null;const{brush:p,scribble:g}=h,{selectedIds:m}=u.value,I=!(c.x<t.minX-12/i||c.y<t.minY-16/i||c.x>t.maxX-12/i||c.y>t.maxY-16/i);return(0,s.jsxs)(s.Fragment,{children:[p?(0,s.jsxs)("g",{className:"rs-collaborator-brush",transform:`translate(${p.x},${p.y})`,children:[(0,s.jsx)("rect",{width:(0,l().WM)(Math.max(1,p.w)),height:(0,l().WM)(Math.max(1,p.h)),fill:r,opacity:.1}),(0,s.jsx)("rect",{width:(0,l().WM)(Math.max(1,p.w)),height:(0,l().WM)(Math.max(1,p.h)),fill:"none",stroke:r,opacity:.1})]},o+"_brush"):null,I?(0,s.jsx)(wr,{point:c,color:r,zoom:i},o+"_cursor"):(0,s.jsx)(Cr,{point:c,color:r,zoom:i,viewport:t},o+"_cursor_hint"),g?(0,s.jsx)(Dr,{scribble:g,color:r,zoom:i},o+"_scribble"):null,m.map((e=>(0,s.jsx)(vr,{id:e,color:r},o+"_"+e)))]})}));function Dr({scribble:e,color:t,zoom:i}){if(!e)return null;const n=l().Ax.FromPoints(e.points),o=Fe((0,l().$4)(e.points,{size:e.size/i,start:{taper:!0},last:"stopping"===e.state||n.width<128&&n.height<128}));return(0,s.jsx)("path",{className:"tl-scribble",d:o,fill:t,opacity:.1})}const Er=(0,W().u4)((function(){const e=P(),t=e.scribble,i=e.zoomLevel;if(!t)return null;const n=Fe((0,l().$4)(t.points,{size:t.size/i,start:{taper:!0,easing:l().Z4.linear},last:!1,simulatePressure:!1}));return(0,s.jsx)("path",{className:"tl-scribble",d:n,fill:`var(--color-${t.color})`,opacity:t.opacity})})),kr=(0,W().u4)((function(){const e=P(),t=a.useMemo((()=>({onPointerDown:t=>{if(t.isKilled)return;he(t.currentTarget,t);const i={type:"pointer",target:"selection",name:"pointer_down",...Ve(t,e.getContainer())};e.dispatch(i)},onPointerMove:t=>{if(t.isKilled)return;const i={type:"pointer",target:"selection",name:"pointer_move",...Ve(t,e.getContainer())};e.dispatch(i)},onPointerUp:t=>{if(t.isKilled)return;pe(t.currentTarget,t);const i={type:"pointer",target:"selection",name:"pointer_up",...Ve(t,e.getContainer())};e.dispatch(i)},onPointerEnter:t=>{if(t.isKilled)return;const i={type:"pointer",target:"selection",name:"pointer_enter",...Ve(t,e.getContainer())};e.dispatch(i)},onPointerLeave:t=>{if(t.isKilled)return;const i={type:"pointer",target:"selection",name:"pointer_leave",...Ve(t,e.getContainer())};e.dispatch(i)}})),[e]),{selectionBounds:i,selectedIds:n}=e;if(!i)return null;const o=e.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","text.resizing");if(1===n.length){const t=e.getShapeById(n[0]);if(!t)return null;if(e.getShapeUtil(t).hideSelectionBoundsBg(t))return null}const r=l().cQ.toCssString(l().cQ.Compose(l().cQ.Translate(i.minX,i.minY),l().cQ.Rotate(e.selectionRotation)));return(0,s.jsx)("div",{className:"tlui-selection__bg",draggable:!1,style:{transform:r,width:(0,l().WM)(Math.max(1,i.width)),height:(0,l().WM)(Math.max(1,i.height)),pointerEvents:o?"all":"none",opacity:o?1:0},...t})}));function Zr(e){const t=P();return(0,a.useMemo)((function(){let i,n;return{onPointerDown:i=>{if(i.isKilled)return;if(0!==i.button)return;const n=de(i.currentTarget);he(n,i),n.addEventListener("pointerup",(function e(){n.removeEventListener("pointerup",e),pe(n,i)})),t.dispatch({name:"pointer_down",type:"pointer",target:"selection",handle:e,...Ve(i,t.getContainer())}),i.stopPropagation()},onPointerMove:function(s){s.isKilled||0===s.button&&(s.clientX===i&&s.clientY===n||(i=s.clientX,n=s.clientY,t.dispatch({name:"pointer_move",type:"pointer",target:"selection",handle:e,...Ve(s,t.getContainer())})))},onPointerUp:i=>{i.isKilled||0===i.button&&t.dispatch({name:"pointer_up",type:"pointer",target:"selection",handle:e,...Ve(i,t.getContainer())})}}}),[t,e])}const Tr=Math.sqrt(Math.PI),Wr=function({cx:e,cy:t,size:i,isHidden:n,"data-wd":o}){const r=Zr("mobile_rotate");return(0,s.jsxs)("g",{children:[(0,s.jsx)("circle",{"data-wd":o,className:gr()("rs-transparent","rs-mobile-rotate__bg",{"rs-hidden":n}),cx:e,cy:t,...r}),(0,s.jsx)("circle",{className:gr()("rs-mobile-rotate__fg",{"rs-hidden":n}),cx:e,cy:t,r:i/Tr})]})},zr=function({cx:e,cy:t,targetSize:i,corner:n,cursor:o,isHidden:r,"data-wd":a}){const c=Zr(n);return(0,s.jsx)("rect",{className:gr()("rs-transparent","rs-rotate-corner",{"rs-hidden":r}),"data-wd":a,"aria-label":`${n} target`,x:(0,l().WM)(e-3*i),y:(0,l().WM)(t-3*i),width:(0,l().WM)(Math.max(1,3*i)),height:(0,l().WM)(Math.max(1,3*i)),cursor:o,...c})},Pr=(0,W().u4)((function(){const e=P(),t=(0,W().h)("isReadOnlyMode",(()=>e.isReadOnly),[e]),i=Zr("top"),n=Zr("right"),o=Zr("bottom"),r=Zr("left"),a=Zr("top_left"),c=Zr("top_right"),d=Zr("bottom_right"),u=Zr("bottom_left"),h=!e.isMenuOpen&&"default"===e.cursor.type,p=e.isCoarsePointer,g=e.selectionBounds;if(!g)return null;const m=e.selectedShapes,I=e.selectionRotation,f=e.isChangingStyle,y=Math.max(1,g.width),b=Math.max(1,g.height),w=e.zoomLevel,C=8/w,M=y<2*C,x=b<2*C,A=y<4*C,S=b<4*C,v=p?1.75:1,L=6/w*v,j=(A?L/2:L)*(.75*v),N=(S?L/2:L)*(.75*v),D=l().cQ.toCssString(l().cQ.Compose(l().cQ.Translate(g.minX,g.minY),l().cQ.Rotate(e.selectionRotation))),E=1===m.length?m[0]:null,k=!(E&&e.getShapeUtil(E).hideSelectionBoundsFg(E)||f),Z=(e.isInAny("select.idle","select.brushing","select.editing_shape","select.scribble_brushing","select.pointing_canvas","select.pointing_selection","select.pointing_shape")||e.isIn("select.resizing")&&E&&"text"===m[0].type||e.isIn("select")&&e.inputs.ctrlKey)&&k,T=e.isInAny("select.idle","select.pointing_selection","select.pointing_shape","select.pointing_selection")&&!f&&!t,z=!p&&!(M||x)&&T&&(!E||!e.getShapeUtil(E).hideRotateHandle(E)),Y=p&&(!A||!S)&&T&&(!E||!e.getShapeUtil(E).hideRotateHandle(E)),O=T&&(!E||e.getShapeUtil(E).canResize(E)&&!e.getShapeUtil(E).hideResizeHandles(E)),R=M||x,G=M&&x,_=!T||!z,B=!T||!Y,J=!T||!O,H=!T||!O||R,V=!T||!O||R,U=!T||!O||G;let X=p;X&&m.every((t=>e.getShapeUtil(t).isAspectRatioLocked(t)))&&(X=!1);const F=!T||!O||R||G||X;return(0,s.jsxs)("g",{transform:D,children:[Z&&(0,s.jsx)("rect",{className:"tlui-selection__fg-outline",width:(0,l().WM)(y),height:(0,l().WM)(b)}),(0,s.jsxs)("g",{children:[(0,s.jsx)("g",{pointerEvents:"all",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(zr,{"data-wd":"selection.rotate.top-left",cx:0,cy:0,targetSize:L,corner:"top_left_rotate",cursor:h?at("nwse-rotate",I):void 0,isHidden:_}),(0,s.jsx)(zr,{"data-wd":"selection.rotate.top-right",cx:y+3*L,cy:0,targetSize:L,corner:"top_right_rotate",cursor:h?at("nesw-rotate",I):void 0,isHidden:_}),(0,s.jsx)(zr,{"data-wd":"selection.rotate.bottom-left",cx:0,cy:b+3*L,targetSize:L,corner:"bottom_left_rotate",cursor:h?at("swne-rotate",I):void 0,isHidden:_}),(0,s.jsx)(zr,{"data-wd":"selection.rotate.bottom-right",cx:y+3*L,cy:b+3*L,targetSize:L,corner:"bottom_right_rotate",cursor:h?at("senw-rotate",I):void 0,isHidden:_})]})}),(0,s.jsx)(Wr,{"data-wd":"selection.rotate.mobile",cx:A?1.5*-L:y/2,cy:A?b/2:1.5*-L,size:C,isHidden:B}),(0,s.jsxs)("g",{pointerEvents:"all",children:[(0,s.jsx)("rect",{className:gr()("rs-transparent",{"rs-hidden":F}),"data-wd":"selection.resize.top","aria-label":"top target",x:0,y:(0,l().WM)(0-(S?2*N:N)),width:(0,l().WM)(Math.max(1,y)),height:(0,l().WM)(Math.max(1,2*N)),style:h?{cursor:at("ns-resize",I)}:void 0,...i}),(0,s.jsx)("rect",{className:gr()("rs-transparent",{"rs-hidden":F}),"data-wd":"selection.resize.right","aria-label":"right target",x:(0,l().WM)(y-(A?0:j)),y:0,height:(0,l().WM)(Math.max(1,b)),width:(0,l().WM)(Math.max(1,2*j)),style:h?{cursor:at("ew-resize",I)}:void 0,...n}),(0,s.jsx)("rect",{className:gr()("rs-transparent",{"rs-hidden":F}),"data-wd":"selection.resize.bottom","aria-label":"bottom target",x:0,y:(0,l().WM)(b-(S?0:N)),width:(0,l().WM)(Math.max(1,y)),height:(0,l().WM)(Math.max(1,2*N)),style:h?{cursor:at("ns-resize",I)}:void 0,...o}),(0,s.jsx)("rect",{className:gr()("rs-transparent",{"rs-hidden":F}),"data-wd":"selection.resize.left","aria-label":"left target",x:(0,l().WM)(0-(A?2*j:j)),y:0,height:(0,l().WM)(Math.max(1,b)),width:(0,l().WM)(Math.max(1,2*j)),style:h?{cursor:at("ew-resize",I)}:void 0,...r}),(0,s.jsx)("rect",{className:gr()("rs-transparent",{"rs-hidden":J}),"data-wd":"selection.resize.top-left","aria-label":"top-left target",x:(0,l().WM)(0-(A?2*j:1.5*j)),y:(0,l().WM)(0-(S?2*N:1.5*N)),width:(0,l().WM)(3*j),height:(0,l().WM)(3*N),style:h?{cursor:at("nwse-resize",I)}:void 0,...a}),(0,s.jsx)("rect",{className:gr()("rs-transparent",{"rs-hidden":H}),"data-wd":"selection.resize.top-right","aria-label":"top-right target",x:(0,l().WM)(y-(A?0:1.5*j)),y:(0,l().WM)(0-(S?2*N:1.5*N)),width:(0,l().WM)(3*j),height:(0,l().WM)(3*N),style:h?{cursor:at("nesw-resize",I)}:void 0,...c}),(0,s.jsx)("rect",{className:gr()("rs-transparent",{"rs-hidden":U}),"data-wd":"selection.resize.bottom-right","aria-label":"bottom-right target",x:(0,l().WM)(y-(A?j:1.5*j)),y:(0,l().WM)(b-(S?N:1.5*N)),width:(0,l().WM)(3*j),height:(0,l().WM)(3*N),style:h?{cursor:at("nwse-resize",I)}:void 0,...d}),(0,s.jsx)("rect",{className:gr()("rs-transparent",{"rs-hidden":V}),"data-wd":"selection.resize.bottom-left","aria-label":"bottom-left target",x:(0,l().WM)(0-(A?3*j:1.5*j)),y:(0,l().WM)(b-(S?0:1.5*N)),width:(0,l().WM)(3*j),height:(0,l().WM)(3*N),style:h?{cursor:at("nesw-resize",I)}:void 0,...u}),(0,s.jsx)("rect",{"data-wd":"selection.resize.top-left",className:gr()("rs-corner-handle",{"rs-hidden":J}),"aria-label":"top_left handle",x:(0,l().WM)(0-C/2),y:(0,l().WM)(0-C/2),width:(0,l().WM)(C),height:(0,l().WM)(C)}),(0,s.jsx)("rect",{"data-wd":"selection.resize.top-right",className:gr()("rs-corner-handle",{"rs-hidden":H}),"aria-label":"top_right handle",x:(0,l().WM)(y-C/2),y:(0,l().WM)(0-C/2),width:(0,l().WM)(C),height:(0,l().WM)(C)}),(0,s.jsx)("rect",{"data-wd":"selection.resize.bottom-right",className:gr()("rs-corner-handle",{"rs-hidden":U}),"aria-label":"bottom_right handle",x:(0,l().WM)(y-C/2),y:(0,l().WM)(b-C/2),width:(0,l().WM)(C),height:(0,l().WM)(C)}),(0,s.jsx)("rect",{"data-wd":"selection.resize.bottom-left",className:gr()("rs-corner-handle",{"rs-hidden":V}),"aria-label":"bottom_left handle",x:(0,l().WM)(0-C/2),y:(0,l().WM)(b-C/2),width:(0,l().WM)(C),height:(0,l().WM)(C)})]})]})]})}));function Yr(){return(0,s.jsx)("div",{className:"rs-shape-error-boundary"})}const Or=(0,W().u4)((function({id:e,index:t,opacity:i,isCulled:n}){const o=P(),r=function(e){const t=P();return a.useMemo((()=>{const i=Ai(t,e,"pointer_move");let n,s;return{onPointerDown:Ai(t,e,"pointer_down"),onPointerUp:Ai(t,e,"pointer_up"),onPointerEnter:Ai(t,e,"pointer_enter"),onPointerLeave:Ai(t,e,"pointer_leave"),onPointerMove:function(e){if(!e.isKilled&&(e.clientX!==n||e.clientY!==s))return n=e.clientX,s=e.clientY,i(e)},onTouchStart:function(e){e.isKilled=!0,ue(e)},onTouchEnd:function(e){e.isKilled=!0,ue(e)}}}),[t,e])}(e),c=a.useRef(null);tt("set shape container transform position",(()=>{const t=c.current;if(!t)return;const i=o.getShapeById(e),n=o.getPageTransformById(e);if(!i||!n)return null;const s=l().cQ.toCssString(n);t.style.setProperty("transform",s)}),[o]),tt("set shape container clip path / color",(()=>{const t=c.current,i=o.getShapeById(e);if(!t)return;if(!i)return null;const n=o.getClipPathById(e);t.style.setProperty("clip-path",n??"none"),"color"in i.props&&t.style.setProperty("color",o.getCssColor(i.props.color))}),[o]),tt("set shape height and width",(()=>{const t=c.current,i=o.getShapeById(e);if(!t)return;if(!i)return null;const n=o.getShapeUtil(i).bounds(i);t.style.setProperty("width",Math.ceil(n.width)+"px"),t.style.setProperty("height",Math.ceil(n.height)+"px")}),[o]),a.useLayoutEffect((()=>{const e=c.current;e&&(e.style.setProperty("opacity",i+""),e.style.setProperty("z-index",t+""))}),[i,t]);const d=o.getShapeById(e);if(!d)return null;const u=o.getShapeUtil(d);return(0,s.jsx)("div",{ref:c,className:"rs-shape","data-shape-type":d.type,draggable:!1,onPointerDown:r.onPointerDown,onPointerMove:r.onPointerMove,onPointerUp:r.onPointerUp,onPointerEnter:r.onPointerEnter,onPointerLeave:r.onPointerLeave,children:n&&u.canUnmount(d)?(0,s.jsx)(Gr,{shape:d,util:u}):(0,s.jsxs)(pr,{fallback:Yr,onError:e=>o.annotateError(e,{origin:"react.shape",willCrashApp:!1}),children:[" ",(0,s.jsx)(Rr,{shape:d,util:u})]})},e)})),Rr=a.memo((function({shape:e,util:t}){return(0,W().A1)("InnerShape:"+t.type,(()=>t.render(e)))}),((e,t)=>e.shape.props===t.shape.props)),Gr=a.memo((function({shape:e,util:t}){const i=t.bounds(e);return(0,s.jsx)("div",{className:"rs-shape__culled",style:{transform:`translate(${i.minX}px, ${i.minY}px)`,width:i.width,height:i.height}})}),(()=>!0));function _r({points:e,zoom:t}){const i=2.5/t,n=e.reduce(((e,t)=>Math.min(e,t.x)),1/0),o=e.reduce(((e,t)=>Math.max(e,t.x)),-1/0),r=e.reduce(((e,t)=>Math.min(e,t.y)),1/0),a=e.reduce(((e,t)=>Math.max(e,t.y)),-1/0);let l,c,d,u;return e.some((e=>e.x===n&&e.y===r))?(l=n,c=r,d=o,u=a):(l=n,c=a,d=o,u=r),(0,s.jsxs)("g",{className:"rs-snap-line",children:[(0,s.jsx)("line",{x1:l,y1:c,x2:d,y2:u}),e.map(((e,t)=>(0,s.jsx)("g",{transform:`translate(${e.x},${e.y})`,children:(0,s.jsx)("path",{className:"rs-snap-point",d:`M ${-i},${-i} L ${i},${i} M ${-i},${i} L ${i},${-i}`})},t)))]})}function Br({gaps:e,direction:t,zoom:i}){const n=3.5/i;let o=[-1/0,1/0],r=null;const c="horizontal"===t;for(const s of e)r=(0,l().$C)(o[0],o[1],c?s.startEdge[0].y:s.startEdge[0].x,c?s.startEdge[1].y:s.startEdge[1].x),r&&(o=r,r=(0,l().$C)(o[0],o[1],c?s.endEdge[0].y:s.endEdge[0].x,c?s.endEdge[1].y:s.endEdge[1].x),r&&(o=r));if(null===o)return null;const d=(o[0]+o[1])/2;return(0,s.jsx)("g",{className:"rs-snap-line",children:e.map((({startEdge:e,endEdge:t},i)=>(0,s.jsx)(a.Fragment,{children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("line",{x1:e[0].x,y1:d-2*n,x2:e[1].x,y2:d+2*n}),(0,s.jsx)("line",{x1:t[0].x,y1:d-2*n,x2:t[1].x,y2:d+2*n}),(0,s.jsx)("line",{x1:e[0].x,y1:d,x2:t[0].x,y2:d}),(0,s.jsx)("line",{x1:(e[0].x+t[0].x)/2,y1:d-n,x2:(e[0].x+t[0].x)/2,y2:d+n})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("line",{x1:d-2*n,y1:e[0].y,x2:d+2*n,y2:e[1].y}),(0,s.jsx)("line",{x1:d-2*n,y1:t[0].y,x2:d+2*n,y2:t[1].y}),(0,s.jsx)("line",{x1:d,y1:e[0].y,x2:d,y2:t[0].y}),(0,s.jsx)("line",{x1:d-n,y1:(e[0].y+t[0].y)/2,x2:d+n,y2:(e[0].y+t[0].y)/2})]})},i)))})}function Jr({line:e,zoom:t}){switch(e.type){case"points":return(0,s.jsx)(_r,{...e,zoom:t});case"gaps":return(0,s.jsx)(Br,{...e,zoom:t});default:return null}}const Hr=(0,W().u4)((function(){const e=P(),t=e.zoomLevel;return(0,s.jsx)(s.Fragment,{children:e.snaps.lines.map((e=>(0,s.jsx)(Jr,{line:e,zoom:t},e.id)))})})),Vr=(0,W().u4)((function({id:e}){const t=P(),i=t.getShapeById(e),[n,o]=a.useState("");return a.useEffect((()=>{let i=!1;return(async()=>{if(i)return;const n=t.getPageBoundsById(e),s=await t.getSvg([e],{padding:0});s&&n&&!i&&(s.style.setProperty("overflow","visible"),s.setAttribute("preserveAspectRatio","xMidYMin slice"),s.style.setProperty("transform",`translate(${n.x}px, ${n.y+n.h+12}px)`),s.style.setProperty("border","1px solid black"),o(s?.outerHTML))})(),()=>{i=!0}}),[t,i,e]),(0,s.jsx)("div",{style:{paddingTop:12,position:"absolute"},children:(0,s.jsx)("div",{style:{display:"flex"},dangerouslySetInnerHTML:{__html:n}})})})),Ur=(0,W().u4)((function({onDropOverride:e}){const t=P(),i=a.useRef(null),n=a.useRef(null),o=a.useRef(null);!function(){const e=P(),t=et(),i=(0,W().h)("isFocused",(()=>e.isFocused),[e]);(0,a.useEffect)((()=>{if(!i)return;const n=t=>{if(!t.altKey||e.root.path.value.endsWith(".idle")||ct()||ue(t),t.isKilled)return;switch(t.isKilled=!0,t.key){case"=":case"-":case"0":if(t.metaKey||t.ctrlKey)return void ue(t);break;case"Tab":default:if(ct()||e.isMenuOpen)return;break;case",":if(!ct()&&(ue(t),!e.inputs.keys.has(","))){const{x:i,y:n,z:s}=e.inputs.currentScreenPoint,{pageState:{hoveredId:o}}=e;e.inputs.keys.add(",");const r={type:"pointer",name:"pointer_down",point:{x:i,y:n,z:s},shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey,pointerId:0,button:0,isPen:e.isPenMode,...o?{target:"shape",shape:e.getShapeById(o)}:{target:"canvas"}};return void e.dispatch(r)}break;case"Escape":return void(e.inputs.keys.has("Escape")||(e.inputs.keys.add("Escape"),e.cancel()))}const i={type:"keyboard",name:"key_down",key:t.key,shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey};e.dispatch(i)},s=t=>{if(t.isKilled)return;if(t.isKilled=!0,ct()||e.isMenuOpen)return;if(","===t.key&&(document.activeElement?.ELEMENT_NODE&&ue(t),e.inputs.keys.has(","))){const{x:i,y:n,z:s}=e.inputs.currentScreenPoint,{pageState:{hoveredId:o}}=e;e.inputs.keys.delete(",");const r={type:"pointer",name:"pointer_up",point:{x:i,y:n,z:s},shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey,pointerId:0,button:0,isPen:e.isPenMode,...o?{target:"shape",shape:e.getShapeById(o)}:{target:"canvas"}};return void e.dispatch(r)}const i={type:"keyboard",name:"key_up",key:t.key,shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey};e.dispatch(i)};function o(i){if(t.contains(i.target)){const t=i.touches[0].pageX,n=i.touches[0].radiusX||0;(t-n<10||t+n>e.viewportScreenBounds.width-10)&&("BUTTON"===i.target?.tagName&&i.target?.click(),ue(i))}}const r=e=>{t.contains(e.target)&&(e.ctrlKey||e.metaKey)&&ue(e)};function a(){e.complete()}function l(){e.updateViewportScreenBounds()}return t.addEventListener("touchstart",o,{passive:!1}),document.addEventListener("wheel",r,{passive:!1}),document.addEventListener("gesturestart",ue),document.addEventListener("gesturechange",ue),document.addEventListener("gestureend",ue),document.addEventListener("keydown",n),document.addEventListener("keyup",s),window.addEventListener("blur",a),window.addEventListener("focus",l),()=>{t.removeEventListener("touchstart",o),document.removeEventListener("wheel",r),document.removeEventListener("gesturestart",ue),document.removeEventListener("gesturechange",ue),document.removeEventListener("gestureend",ue),document.removeEventListener("keydown",n),document.removeEventListener("keyup",s),window.removeEventListener("blur",a),window.removeEventListener("focus",l)}}),[e,t,i])}(),function(){const e=P();(0,a.useEffect)((()=>{const t=window.matchMedia("(pointer: coarse)"),i=()=>{e.isCoarsePointer=t.matches};return i(),t.addEventListener("change",i),()=>t.removeEventListener("change",i)}),[e])}(),Ii(i),function(e){const t=P();(0,a.useEffect)((()=>{const i=e.current;if(!i)return;const n=e=>{if(e instanceof PointerEvent&&"pen"===e.pointerType){e.isKilled=!0;const{target:i}=e;if(dt.includes(i.tagName?.toLocaleLowerCase())||t.isIn("select.editing_shape"))return;ue(e)}};return i.addEventListener("touchstart",n),i.addEventListener("touchend",n),()=>{i.removeEventListener("touchstart",n),i.addEventListener("touchend",n)}}),[t,e])}(i),xi(),tt("position layers",(()=>{const e=o.current,i=n.current;if(!e||!i)return;const{x:s,y:a,z:c}=t.camera,d=c>=1?(0,r().ww)(c,[1,8],[.125,.5],!0):(0,r().ww)(c,[.1,1],[-2,.125],!0);e.style.setProperty("transform",`scale(${(0,l().WM)(c)}) translate(${(0,l().WM)(s)}px,${(0,l().WM)(a)}px)`),i.style.setProperty("transform",`scale(${(0,l().WM)(c)}) translate(${(0,l().WM)(s+d)}px,${(0,l().WM)(a+d)}px)`)}),[t]);const{context:c,isReady:d}=Ci(),u=function(){const e=P();return(0,a.useMemo)((function(){let t,i;return{onPointerDown:function(t){t.isKilled||0!==t.button&&1!==t.button&&5!==t.button||(he(t.currentTarget,t),e.dispatch({type:"pointer",target:"canvas",name:"pointer_down",...Ve(t,e.getContainer())}))},onPointerMove:function(n){n.isKilled||n.clientX===t&&n.clientY===i||(t=n.clientX,i=n.clientY,e.dispatch({type:"pointer",target:"canvas",name:"pointer_move",...Ve(n,e.getContainer())}))},onPointerUp:function(n){n.isKilled||0!==n.button&&1!==n.button&&5!==n.button||(t=n.clientX,i=n.clientY,pe(n.currentTarget,n),e.dispatch({type:"pointer",target:"canvas",name:"pointer_up",...Ve(n,e.getContainer())}))},onPointerEnter:function(t){t.isKilled||e.dispatch({type:"pointer",target:"canvas",name:"pointer_enter",...Ve(t,e.getContainer())})},onPointerLeave:function(t){t.isKilled||e.dispatch({type:"pointer",target:"canvas",name:"pointer_leave",...Ve(t,e.getContainer())})},onDragOver:function(e){ue(e)},onDrop:async function(t){if(ue(t),!t.dataTransfer?.files?.length)return;const i=Array.from(t.dataTransfer.files).filter((e=>!e.name.endsWith(".tldr")));await te(e,i,e.screenToPage(t.clientX,t.clientY),!1)},onTouchStart:function(e){e.isKilled=!0,document.body.click(),ue(e)},onTouchEnd:function(e){e.isKilled=!0,"A"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&ue(e)}}}),[e])}();return e&&(u.onDrop=e(u.onDrop)),a.useEffect((()=>{if(d&&t.isSafari){const e=o.current,t=n.current;e&&t&&requestAnimationFrame((()=>{e.style.display="none",t.style.display="none",requestAnimationFrame((()=>{e.style.display="",t.style.display=""}))}))}}),[t,d]),a.useEffect((()=>{i.current?.focus()}),[]),(0,s.jsxs)("div",{ref:i,draggable:!1,className:"rs-canvas","data-wd":"canvas",...u,children:[(0,s.jsx)(Ir,{size:t.gridSize}),(0,s.jsxs)("div",{ref:n,className:"rs-html-layer",draggable:!1,children:[(0,s.jsx)(kr,{}),(0,s.jsx)(Xr,{})]}),(0,s.jsxs)("svg",{className:"rs-svg-layer",children:[c,(0,s.jsxs)("defs",{children:[(0,s.jsx)($r,{}),(0,s.jsx)(qr,{}),(0,s.jsx)("marker",{id:"arrowhead-dot",className:"rs-arrow-hint",refX:"3.0",refY:"3.0",orient:"0",children:(0,s.jsx)("circle",{cx:"3",cy:"3",r:"2",strokeDasharray:"100%"})}),(0,s.jsxs)("marker",{id:"arrowhead-cross",className:"rs-arrow-hint",refX:"3.0",refY:"3.0",orient:"auto",children:[(0,s.jsx)("line",{x1:"1.5",y1:"1.5",x2:"4.5",y2:"4.5",strokeDasharray:"100%"}),(0,s.jsx)("line",{x1:"1.5",y1:"4.5",x2:"4.5",y2:"1.5",strokeDasharray:"100%"})]})]}),(0,s.jsxs)("g",{ref:o,children:[(0,s.jsx)(Lr,{}),(0,s.jsx)(Er,{}),(0,s.jsx)(mr,{}),(0,s.jsx)(Fr,{}),(0,s.jsx)(Kr,{}),(0,s.jsx)(Pr,{}),(0,s.jsx)(Qr,{}),(0,s.jsx)(br,{}),(0,s.jsx)(Hr,{})]})]})]})})),Xr=(0,W().u4)((function(){const e=P(),{renderingShapes:t}=e;return O.debugSvg.value?(0,s.jsx)(s.Fragment,{children:t.map((e=>(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)(Or,{...e},e.id+"_shape"),(0,s.jsx)(Vr,{id:e.id},e.id+"_shape_debug")]},e.id+"_fragment")))}):(0,s.jsx)(s.Fragment,{children:t.map((e=>(0,s.jsx)(Or,{...e},e.id+"_shape")))})})),Fr=(0,W().u4)((function(){const e=P(),t=e.selectedIds,i=e.isChangingStyle;return e.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","select.pointing_handle")&&!i?(0,s.jsx)("g",{"aria-label":"SELECTED INDICATORS",children:t.map((e=>(0,s.jsx)(vr,{id:e},e+"_indicator")))}):null})),Kr=(0,W().u4)((function(){const e=P(),t=e.pageState.hoveredId,i=e.isInAny("select.idle","select.editing_shape");return t&&i?(0,s.jsx)(vr,{id:t},t):null})),Qr=(0,W().u4)((function(){const e=P(),t=(0,r().Qq)(e.hintingIds);return t.length?(0,s.jsx)("g",{"aria-label":"HINTED SHAPES",children:t.map((e=>(0,s.jsx)(vr,{id:e,isHinting:!0},e+"_hinting")))}):null}));function $r(){return(0,s.jsxs)("g",{id:"cursor",children:[(0,s.jsxs)("g",{fill:"rgba(0,0,0,.2)",transform:"translate(-11,-11)",children:[(0,s.jsx)("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),(0,s.jsx)("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),(0,s.jsxs)("g",{fill:"white",transform:"translate(-12,-12)",children:[(0,s.jsx)("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),(0,s.jsx)("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),(0,s.jsxs)("g",{fill:"currentColor",transform:"translate(-12,-12)",children:[(0,s.jsx)("path",{d:"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z"}),(0,s.jsx)("path",{d:"m13 10.814v11.188l2.969-2.866.428-.139h4.768z"})]})]})}function qr(){return(0,s.jsx)("path",{id:"cursor_hint",fill:"currentColor",d:"M -2,-5 2,0 -2,5 Z",opacity:".8"})}const ea="https://github.com/tldraw/editor/issues/new";function ta(){}function ia({error:e,app:t}){const i=(0,a.useRef)(null),[n,o]=(0,a.useState)(!1),[r,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),u=e instanceof Error?e.message:String(e),h=e instanceof Error?e.stack:null,p=(0,W().h)("isDarkMode",(()=>{try{if(t)return t.userDocumentSettings.isDarkMode}catch{}return null}),[t]),[g,m]=(0,a.useState)(null);(0,a.useLayoutEffect)((()=>{null!==p&&m(p);let e=i.current?.parentElement,t=!1;for(;e;){if(e.classList.contains("rs-theme__dark")||e.classList.contains("rs-theme__light")){t=!0;break}e=e.parentElement}m(t?null:window.matchMedia("(prefers-color-scheme: dark)").matches)}),[p]),(0,a.useEffect)((()=>{if(r){const e=setTimeout((()=>{l(!1)}),2e3);return()=>clearTimeout(e)}}),[r]);const I=new URL(ea);return I.searchParams.set("title",u),I.searchParams.set("labels","bug"),I.searchParams.set("body",`Hey, I ran into an error while using tldraw:\n\n\`\`\`js\n${h??u}\n\`\`\`\n\nMy browser: ${navigator.userAgent}`),(0,s.jsxs)("div",{ref:i,className:gr()("rs-container rs-error-boundary",null===g?"":g?"rs-theme__dark":"rs-theme__light"),children:[(0,s.jsx)("div",{className:"rs-error-boundary__overlay"}),t&&(0,s.jsx)(pr,{onError:ta,fallback:()=>null,children:(0,s.jsx)(z.Provider,{value:t,children:(0,s.jsx)("div",{className:"rs-overlay rs-error-boundary__canvas",children:(0,s.jsx)(Ur,{})})})}),(0,s.jsx)("div",{className:gr()("rs-modal","rs-error-boundary__content",{"rs-error-boundary__content__expanded":n&&!c}),children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{children:"Are you sure?"}),(0,s.jsx)("p",{children:"Resetting your data will delete your drawing and cannot be undone."}),(0,s.jsxs)("div",{className:"rs-error-boundary__content__actions",children:[(0,s.jsx)("button",{onClick:()=>d(!1),children:"Cancel"}),(0,s.jsx)("button",{className:"rs-error-boundary__reset",onClick:async()=>{await(window.__tldraw__hardReset?.())},children:"Reset data"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{children:"Something's gone wrong."}),(0,s.jsxs)("p",{children:["Sorry, we encountered an error. Please refresh the page to continue. If you keep seeing this error, you can ",(0,s.jsx)("a",{href:I.toString(),children:"create a GitHub issue"})," or"," ",(0,s.jsx)("a",{href:"https://discord.gg/Cq6cPsTfNy",children:"ask for help on Discord"}),"."]}),n&&(0,s.jsxs)("div",{className:"rs-error-boundary__content__error",children:[(0,s.jsx)("pre",{children:(0,s.jsx)("code",{children:h??u})}),(0,s.jsx)("button",{onClick:()=>{const e=document.createElement("textarea");e.value=h??u,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove(),l(!0)},children:r?"Copied!":"Copy"})]}),(0,s.jsxs)("div",{className:"rs-error-boundary__content__actions",children:[(0,s.jsx)("button",{onClick:()=>o(!n),children:n?"Hide details":"Show details"}),(0,s.jsxs)("div",{className:"rs-error-boundary__content__actions__group",children:[(0,s.jsx)("button",{className:"rs-error-boundary__reset",onClick:()=>d(!0),children:"Reset data"}),(0,s.jsx)("button",{className:"rs-error-boundary__refresh",onClick:()=>{window.location.reload()},children:"Refresh Page"})]})]})]})})]})}let na=!1;if("undefined"!=typeof window){const e=window.navigator.userAgent,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i),i=!!e.match(/WebKit/i);na=t&&i&&!e.match(/CriOS/i)}const sa=({children:e})=>(function(){const e=P(),t=et();a.useEffect((()=>{const i=e=>t.style.setProperty("--rs-zoom",e.toString()),n=(0,r().sg)(i,100),s=new(c().VM)("useZoomCss",(()=>{e.shapeIds.size<300?i(e.zoomLevel):n(e.zoomLevel)}));return s.attach(),s.execute(),()=>{s.detach()}}),[e,t])}(),function(){const e=P(),t=et();tt("useCursor",(()=>{const{type:i,rotation:n,color:s}=e.cursor;t.style.setProperty("--rs-cursor",at(i,n,s))}),[e,t])}(),function(){const e=P(),t=et(),i=(0,W().h)("isDarkMode",(()=>e.userDocumentSettings.isDarkMode),[e]);a.useEffect((()=>{i?(t.setAttribute("data-color-mode","dark"),t.classList.remove("rs-theme__light"),t.classList.add("rs-theme__dark"),e.setCursor({color:"white"})):(t.setAttribute("data-color-mode","light"),t.classList.remove("rs-theme__dark"),t.classList.add("rs-theme__light"),e.setCursor({color:"black"}))}),[e,t,i])}(),function(){const[e,t]=(0,a.useState)(0);(0,a.useEffect)((()=>t((e=>e+1))),[])}(),function(){const e=P();a.useEffect((()=>{if(na)return document.addEventListener("focusout",t),()=>document.removeEventListener("focusout",t);function t(t){(t.target instanceof HTMLInputElement&&"text"===t.target.type||t.target instanceof HTMLTextAreaElement)&&e.complete()}}),[e])}(),e);const oa=(e,t)=>{const[i,n]=(0,a.useState)(2);return(0,a.useEffect)((()=>{const{url:i,style:s="normal",weight:o="500",display:r,featureSettings:a,stretch:l,unicodeRange:c,variant:d}=t;let u=!1;n(2);const h=new FontFace(e,`url(${i})`,{style:s,weight:o,display:r,featureSettings:a,stretch:l,unicodeRange:c,variant:d});return h.load().then((()=>{u||(document.fonts.add(h),n(0))})).catch((e=>{u||(console.error(e),n(1))})),h.$$_url=i,h.$$_fontface=`\n@font-face {\n\tfont-family: ${h.family};\n\tfont-stretch: ${h.stretch};\n\tfont-weight: ${h.weight};\n\tfont-style: ${h.style};\n\tsrc: url("${i}") format("woff2")\n}`,()=>{document.fonts.delete(h),u=!0}}),[e,t]),i};function ra(e){const[t,i]=a.useState(null);return(0,s.jsx)("div",{ref:i,draggable:!1,className:"rs-container rs-theme__light",tabIndex:0,children:(0,s.jsx)(pr,{fallback:e=>(0,s.jsx)(ia,{error:e}),onError:e=>(0,r().TF)(e,{tags:{origin:"react.tldraw-before-app"}}),children:t&&(0,s.jsx)(qe,{container:t,children:(0,s.jsx)(aa,{...e})})})})}function aa({config:e=Zs.default,userId:t,instanceId:i,store:r,...l}){const{done:c,error:d}=function(e){const t=(0,a.useMemo)((()=>function(e){return{draw:{url:e.fonts.draw},serif:{url:e.fonts.serif},sansSerif:{url:e.fonts.sansSerif},monospace:{url:e.fonts.monospace}}}(e)),[e]),i=[oa("tldraw_draw",t.draw),oa("tldraw_serif",t.serif),oa("tldraw_sans",t.sansSerif),oa("tldraw_mono",t.monospace)];return{error:i.some((e=>1===e)),done:!i.some((e=>2===e))}}(l.assetUrls??ur);let u;if(r??=e.createStore({userId:t??n().i5.createId(),instanceId:i??n().ko.createId()}),r instanceof o().il)u=r;else{if(r.error)throw r.error;if(!r.store)return(0,s.jsx)(ca,{children:"Connecting..."});u=r.store}return i&&u.props.instanceId!==i&&console.error(`The store's instanceId (${u.props.instanceId}) does not match the instanceId prop (${i}). This may cause unexpected behavior.`),t&&u.props.userId!==t&&console.error(`The store's userId (${u.props.userId}) does not match the userId prop (${t}). This may cause unexpected behavior.`),d?(0,s.jsx)(da,{children:"Could not load assets. Please refresh the page."}):c?(0,s.jsx)(la,{...l,store:u,config:e}):(0,s.jsx)(ca,{children:"Loading assets..."})}function la({onMount:e,config:t,isDarkMode:i,children:n,onCreateAssetFromFile:o,onCreateBookmarkFromUrl:l,store:c,autoFocus:d}){const u=et(),[h,p]=a.useState(null);a.useLayoutEffect((()=>{const e=new cr({store:c,getContainer:()=>u,config:t});return p(e),d&&e.focus(),window.app=e,()=>{e.dispose(),p((t=>t===e?null:t))}}),[u,t,c,d]),a.useEffect((()=>{h&&(o&&(h.onCreateAssetFromFile=o),l&&(h.onCreateBookmarkFromUrl=l))}),[h,i,o,l]);const g=function(e){const t=(0,a.useRef)();return(0,a.useLayoutEffect)((()=>{t.current=e})),(0,a.useDebugValue)(e),(0,a.useCallback)(((...e)=>{const i=t.current;return(0,r().vA)(i,"fn does not exist"),i(...e)}),[])}((t=>e?.(t)));a.useEffect((()=>{h&&(void 0!==i&&h.updateUserDocumentSettings({isDarkMode:i}),window.tldrawReady=!0,g(h))}),[h,g,i]);const m=(0,a.useSyncExternalStore)((0,a.useCallback)((e=>h?(h.on("crash",e),()=>h.off("crash",e)):()=>{}),[h]),(()=>h?.crashingError??null));return h?(0,s.jsx)(pr,{fallback:e=>(0,s.jsx)(ia,{error:e,app:h}),onError:e=>h.annotateError(e,{origin:"react.tldraw",willCrashApp:!0}),children:m?(0,s.jsx)(ia,{error:m,app:h}):(0,s.jsx)(z.Provider,{value:h,children:(0,s.jsx)(sa,{children:n})})}):null}function ca({children:e}){return(0,s.jsxs)("div",{className:"rs-loading",children:[(0,s.jsx)(Ln,{}),e]})}function da({children:e}){return(0,s.jsx)("div",{className:"rs-loading",children:e})}},383635:(e,t,i)=>{"use strict";var n=i(779039),s=i(444576).RegExp;e.exports=n((function(){var e=s(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)}))},404552:(e,t,i)=>{"use strict";i(478350),i(730237);var n=i(697015);e.exports=n("Array","flatMap")},425858:(e,t,i)=>{var n="Expected a function",s=NaN,o="[object Symbol]",r=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt,u="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,h="object"==typeof self&&self&&self.Object===Object&&self,p=u||h||Function("return this")(),g=Object.prototype.toString,m=Math.max,I=Math.min,f=function(){return p.Date.now()};function y(e,t,i){var s,o,r,a,l,c,d=0,u=!1,h=!1,p=!0;if("function"!=typeof e)throw new TypeError(n);function g(t){var i=s,n=o;return s=o=void 0,d=t,a=e.apply(n,i)}function y(e){var i=e-c;return void 0===c||i>=t||i<0||h&&e-d>=r}function C(){var e=f();if(y(e))return M(e);l=setTimeout(C,function(e){var i=t-(e-c);return h?I(i,r-(e-d)):i}(e))}function M(e){return l=void 0,p&&s?g(e):(s=o=void 0,a)}function x(){var e=f(),i=y(e);if(s=arguments,o=this,c=e,i){if(void 0===l)return function(e){return d=e,l=setTimeout(C,t),u?g(e):a}(c);if(h)return l=setTimeout(C,t),g(c)}return void 0===l&&(l=setTimeout(C,t)),a}return t=w(t)||0,b(i)&&(u=!!i.leading,r=(h="maxWait"in i)?m(w(i.maxWait)||0,t):r,p="trailing"in i?!!i.trailing:p),x.cancel=function(){void 0!==l&&clearTimeout(l),d=0,s=c=o=l=void 0},x.flush=function(){return void 0===l?a:M(f())},x}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function w(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&g.call(e)==o}(e))return s;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var i=l.test(e);return i||c.test(e)?d(e.slice(2),i?2:8):a.test(e)?s:+e}e.exports=function(e,t,i){var s=!0,o=!0;if("function"!=typeof e)throw new TypeError(n);return b(i)&&(s="leading"in i?!!i.leading:s,o="trailing"in i?!!i.trailing:o),y(e,t,{leading:s,maxWait:t,trailing:o})}},446501:(e,t,i)=>{"use strict";var n=i(404552);e.exports=n},461034:(e,t,i)=>{"use strict";var n=i(969565),s=i(39297),o=i(401625),r=i(867979),a=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||s(e,"flags")||!o(a,e)?t:n(r,e)}},478350:(e,t,i)=>{"use strict";var n=i(746518),s=i(670259),o=i(479306),r=i(748981),a=i(326198),l=i(501469);n({target:"Array",proto:!0},{flatMap:function(e){var t,i=r(this),n=a(i);return o(e),(t=l(i,0)).length=s(t,i,i,n,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},487433:(e,t,i)=>{"use strict";var n=i(734376),s=i(133517),o=i(820034),r=i(978227)("species"),a=Array;e.exports=function(e){var t;return n(e)&&(t=e.constructor,(s(t)&&(t===a||n(t.prototype))||o(t)&&null===(t=t[r]))&&(t=void 0)),void 0===t?a:t}},490879:(e,t,i)=>{var n=200,s="__lodash_hash_undefined__",o="[object Function]",r="[object GeneratorFunction]",a=/^\[object .+?Constructor\]$/,l="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,c="object"==typeof self&&self&&self.Object===Object&&self,d=l||c||Function("return this")();function u(e,t){return!!(e?e.length:0)&&function(e,t,i){if(t!=t)return function(e,t,i,n){var s=e.length,o=i+(n?1:-1);for(;n?o--:++o<s;)if(t(e[o],o,e))return o;return-1}(e,p,i);var n=i-1,s=e.length;for(;++n<s;)if(e[n]===t)return n;return-1}(e,t,0)>-1}function h(e,t,i){for(var n=-1,s=e?e.length:0;++n<s;)if(i(t,e[n]))return!0;return!1}function p(e){return e!=e}function g(e,t){return e.has(t)}function m(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}var I,f=Array.prototype,y=Function.prototype,b=Object.prototype,w=d["__core-js_shared__"],C=(I=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||""))?"Symbol(src)_1."+I:"",M=y.toString,x=b.hasOwnProperty,A=b.toString,S=RegExp("^"+M.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v=f.splice,L=Y(d,"Map"),j=Y(d,"Set"),N=Y(Object,"create");function D(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function E(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function k(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Z(e){var t=-1,i=e?e.length:0;for(this.__data__=new k;++t<i;)this.add(e[t])}function T(e,t){for(var i,n,s=e.length;s--;)if((i=e[s][0])===(n=t)||i!=i&&n!=n)return s;return-1}function W(e){if(!O(e)||(t=e,C&&C in t))return!1;var t,i=function(e){var t=O(e)?A.call(e):"";return t==o||t==r}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(i){}return t}(e)?S:a;return i.test(function(e){if(null!=e){try{return M.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}D.prototype.clear=function(){this.__data__=N?N(null):{}},D.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},D.prototype.get=function(e){var t=this.__data__;if(N){var i=t[e];return i===s?void 0:i}return x.call(t,e)?t[e]:void 0},D.prototype.has=function(e){var t=this.__data__;return N?void 0!==t[e]:x.call(t,e)},D.prototype.set=function(e,t){return this.__data__[e]=N&&void 0===t?s:t,this},E.prototype.clear=function(){this.__data__=[]},E.prototype.delete=function(e){var t=this.__data__,i=T(t,e);return!(i<0)&&(i==t.length-1?t.pop():v.call(t,i,1),!0)},E.prototype.get=function(e){var t=this.__data__,i=T(t,e);return i<0?void 0:t[i][1]},E.prototype.has=function(e){return T(this.__data__,e)>-1},E.prototype.set=function(e,t){var i=this.__data__,n=T(i,e);return n<0?i.push([e,t]):i[n][1]=t,this},k.prototype.clear=function(){this.__data__={hash:new D,map:new(L||E),string:new D}},k.prototype.delete=function(e){return P(this,e).delete(e)},k.prototype.get=function(e){return P(this,e).get(e)},k.prototype.has=function(e){return P(this,e).has(e)},k.prototype.set=function(e,t){return P(this,e).set(e,t),this},Z.prototype.add=Z.prototype.push=function(e){return this.__data__.set(e,s),this},Z.prototype.has=function(e){return this.__data__.has(e)};var z=j&&1/m(new j([,-0]))[1]==1/0?function(e){return new j(e)}:function(){};function P(e,t){var i,n,s=e.__data__;return("string"==(n=typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?s["string"==typeof t?"string":"hash"]:s.map}function Y(e,t){var i=function(e,t){return null==e?void 0:e[t]}(e,t);return W(i)?i:void 0}function O(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return e&&e.length?function(e,t,i){var s=-1,o=u,r=e.length,a=!0,l=[],c=l;if(i)a=!1,o=h;else if(r>=n){var d=t?null:z(e);if(d)return m(d);a=!1,o=g,c=new Z}else c=t?[]:l;e:for(;++s<r;){var p=e[s],I=t?t(p):p;if(p=i||0!==p?p:0,a&&I==I){for(var f=c.length;f--;)if(c[f]===I)continue e;t&&c.push(I),l.push(p)}else o(c,I,i)||(c!==l&&c.push(I),l.push(p))}return l}(e):[]}},501469:(e,t,i)=>{"use strict";var n=i(487433);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},515818:(e,t,i)=>{"use strict";i(327495),i(725440),i(879978);var n=i(697015);e.exports=n("String","replaceAll")},571264:(e,t,i)=>{"use strict";i.d(t,{T:()=>n});var n={};i.r(n),i.d(n,{ArrayOfValidator:()=>c,DictValidator:()=>h,ObjectValidator:()=>d,UnionValidator:()=>u,ValidationError:()=>o,Validator:()=>l,any:()=>m,array:()=>v,arrayOf:()=>L,bigint:()=>A,boolean:()=>x,boxModel:()=>W,dict:()=>D,integer:()=>w,literal:()=>S,model:()=>k,nonZeroInteger:()=>M,nonZeroNumber:()=>b,number:()=>f,object:()=>N,point:()=>T,positiveInteger:()=>C,positiveNumber:()=>y,setEnum:()=>Z,string:()=>I,union:()=>E,unknown:()=>g,unknownObject:()=>j});var s=()=>i(63666);class o extends Error{constructor(e,t=[]){const i=function(e){if(!e.length)return null;let t="";for(const i of e)"number"==typeof i?t+=`.${i}`:i.startsWith("(")?t.endsWith(")")?t=`${t.slice(0,-1)}, ${i.slice(1)}`:t+=i:t+=`.${i}`;return t.startsWith(".")?t.slice(1):t}(t),n=e.split("\n").map(((e,t)=>0===t?e:`  ${e}`)).join("\n");super(t?`At ${i}: ${n}`:n),this.rawMessage=e,this.path=t}name="ValidationError"}function r(e,t){try{return t()}catch(i){if(i instanceof o)throw new o(i.rawMessage,[e,...i.path]);throw new o(i.toString(),[e])}}function a(e){if(null===e)return"null";if(Array.isArray(e))return"an array";const t=typeof e;switch(t){case"bigint":case"boolean":case"function":case"number":case"string":case"symbol":return`a ${t}`;case"object":return`an ${t}`;case"undefined":return"undefined";default:(0,s().h6)(t)}}class l{constructor(e){this.validationFn=e}validate(e){return this.validationFn(e)}nullable(){return new l((e=>null===e?null:this.validate(e)))}optional(){return new l((e=>{if(void 0!==e)return this.validate(e)}))}refine(e){return new l((t=>e(this.validate(t))))}check(e,t){return"string"==typeof e?this.refine((i=>(r(`(check ${e})`,(()=>t(i))),i))):this.refine((t=>(e(t),t)))}}class c extends l{constructor(e){super((t=>{const i=v.validate(t);for(let n=0;n<i.length;n++)r(n,(()=>e.validate(i[n])));return i})),this.itemValidator=e}nonEmpty(){return this.check((e=>{if(0===e.length)throw new o("Expected a non-empty array")}))}lengthGreaterThan1(){return this.check((e=>{if(e.length<=1)throw new o("Expected an array with length greater than 1")}))}}class d extends l{constructor(e,t=!1){super((i=>{if("object"!=typeof i||null===i)throw new o(`Expected object, got ${a(i)}`);for(const[t,n]of Object.entries(e))r(t,(()=>{n.validate((0,s().g5)(i,t))}));if(!t)for(const t of Object.keys(i))if(!(0,s().mQ)(e,t))throw new o("Unexpected property",[t]);return i})),this.config=e,this.shouldAllowUnknownProperties=t}allowUnknownProperties(){return new d(this.config,!0)}extend(e){return new d({...this.config,...e})}}class u extends l{constructor(e,t,i){super((i=>{if("object"!=typeof i||null===i)throw new o(`Expected an object, got ${a(i)}`,[]);const n=(0,s().g5)(i,e);if("string"!=typeof n)throw new o(`Expected a string for key "${e}", got ${a(n)}`);const l=(0,s().mQ)(t,n)?t[n]:void 0;return void 0===l?this.unknownValueValidation(i,n):r(`(${e} = ${n})`,(()=>l.validate(i)))})),this.key=e,this.config=t,this.unknownValueValidation=i}validateUnknownVariants(e){return new u(this.key,this.config,e)}}class h extends l{constructor(e,t){super((i=>{if("object"!=typeof i||null===i)throw new o(`Expected object, got ${a(i)}`);for(const[n,s]of Object.entries(i))r(n,(()=>{e.validate(n),t.validate(s)}));return i})),this.keyValidator=e,this.valueValidator=t}}function p(e){return new l((t=>{if(typeof t!==e)throw new o(`Expected ${e}, got ${a(t)}`);return t}))}const g=new l((e=>e)),m=new l((e=>e)),I=p("string"),f=p("number").check((e=>{if(Number.isNaN(e))throw new o("Expected a number, got NaN");if(!Number.isFinite(e))throw new o(`Expected a finite number, got ${e}`)})),y=f.check((e=>{if(e<0)throw new o(`Expected a positive number, got ${e}`)})),b=f.check((e=>{if(e<=0)throw new o(`Expected a non-zero positive number, got ${e}`)})),w=f.check((e=>{if(!Number.isInteger(e))throw new o(`Expected an integer, got ${e}`)})),C=w.check((e=>{if(e<0)throw new o(`Expected a positive integer, got ${e}`)})),M=w.check((e=>{if(e<=0)throw new o(`Expected a non-zero positive integer, got ${e}`)})),x=p("boolean"),A=p("bigint");function S(e){return new l((t=>{if(t!==e)throw new o(`Expected ${e}, got ${JSON.stringify(t)}`);return e}))}const v=new l((e=>{if(!Array.isArray(e))throw new o(`Expected an array, got ${a(e)}`);return e}));function L(e){return new c(e)}const j=new l((e=>{if("object"!=typeof e||null===e)throw new o(`Expected object, got ${a(e)}`);return e}));function N(e){return new d(e)}function D(e,t){return new h(e,t)}function E(e,t){return new u(e,t,((i,n)=>{throw new o(`Expected one of ${Object.keys(t).map((e=>JSON.stringify(e))).join(" or ")}, got ${JSON.stringify(n)}`,[e])}))}function k(e,t){return new l((i=>r(i&&"object"==typeof i&&"id"in i&&"string"==typeof i.id?`${e}(id = ${i.id})`:e,(()=>t.validate(i)))))}function Z(e){return new l((t=>{if(!e.has(t)){const i=Array.from(e,(e=>JSON.stringify(e))).join(" or ");throw new o(`Expected ${i}, got ${t}`)}return t}))}const T=N({x:f,y:f,z:f.optional()}),W=N({x:f,y:f,w:f,h:f})},606258:(e,t,i)=>{"use strict";var n=i(12323);e.exports=n},619497:(e,t,i)=>{"use strict";i(18107);var n=i(697015);e.exports=n("Array","at")},670259:(e,t,i)=>{"use strict";var n=i(734376),s=i(326198),o=i(596837),r=i(276080),a=function(e,t,i,l,c,d,u,h){for(var p,g,m=c,I=0,f=!!u&&r(u,h);I<l;)I in i&&(p=f?f(i[I],I,t):i[I],d>0&&n(p)?(g=s(p),m=a(e,t,p,g,m,d-1)-1):(o(m+1),e[m]=p),m++),I++;return m};e.exports=a},681986:(e,t,i)=>{"use strict";i.d(t,{Ml:()=>c,VM:()=>W,c2:()=>f,eU:()=>L,EW:()=>T,_O:()=>N,wv:()=>z,Px:()=>P,hL:()=>S,_D:()=>E});var n=class{arraySize=0;array=Array(8);set=null;get isEmpty(){if(this.array)return 0===this.arraySize;if(this.set)return 0===this.set.size;throw new Error("no set or array")}add(e){if(this.array){return-1===this.array.indexOf(e)&&(this.arraySize<8?(this.array[this.arraySize]=e,this.arraySize++,!0):(this.set=new Set(this.array),this.array=null,this.set.add(e),!0))}if(this.set)return!this.set.has(e)&&(this.set.add(e),!0);throw new Error("no set or array")}remove(e){if(this.array){const t=this.array.indexOf(e);return-1!==t&&(this.array[t]=void 0,this.arraySize--,t!==this.arraySize&&(this.array[t]=this.array[this.arraySize],this.array[this.arraySize]=void 0),!0)}if(this.set)return!!this.set.has(e)&&(this.set.delete(e),!0);throw new Error("no set or array")}visit(e){if(this.array)for(let t=0;t<this.arraySize;t++){const i=this.array[t];void 0!==i&&e(i)}else{if(!this.set)throw new Error("no set or array");this.set.forEach(e)}}};function s(e){return e&&"object"==typeof e&&"parents"in e}function o(e){for(let t=0,i=e.parents.length;t<i;t++)if(e.parents[t].__unsafe__getWithoutCapture(),e.parents[t].lastChangedEpoch!==e.parentEpochs[t])return!0;return!1}var r=(e,t)=>{if(e.children.remove(t)&&e.children.isEmpty&&s(e))for(let i=0,n=e.parents.length;i<n;i++)r(e.parents[i],e)},a=(e,t)=>{if(e.children.add(t)&&s(e))for(let i=0,n=e.parents.length;i<n;i++)a(e.parents[i],e)};function l(e,t){return e===t||Object.is(e,t)||Boolean(e&&t&&"function"==typeof e.equals&&e.equals(t))}var c=Object.freeze([]),d=Symbol.for("__signia__"),u=globalThis;u[d]?console.error('Multiple versions of signia detected. This will cause unexpected behavior. Please add "resolutions" (yarn/pnpm) or "overrides" (npm) in your package.json to ensure only one version of signia is loaded.'):u[d]=!0;var h=class{constructor(e,t){this.below=e,this.child=t}offset=0;numNewParents=0;maybeRemoved},p=null;function g(e){p=new h(p,e)}function m(){const e=p;p=e.below;if(e.numNewParents>0||e.offset!==e.child.parents.length){for(let t=e.offset;t<e.child.parents.length;t++){const i=e.child.parents[t];e.child.parents.indexOf(i)>=e.offset&&r(i,e.child)}if(e.child.parents.length=e.offset,e.child.parentEpochs.length=e.offset,p?.maybeRemoved)for(let t=0;t<p.maybeRemoved.length;t++){const i=p.maybeRemoved[t];-1===e.child.parents.indexOf(i)&&r(i,e.child)}}}function I(e){if(p){const t=p.child.parents.indexOf(e);if(t<0&&(p.numNewParents++,p.child.isActivelyListening&&a(e,p.child)),t<0||t>=p.offset){if(t!==p.offset&&t>0){const e=p.child.parents[p.offset];p.maybeRemoved?-1===p.maybeRemoved.indexOf(e)&&p.maybeRemoved.push(e):p.maybeRemoved=[e]}p.child.parents[p.offset]=e,p.child.parentEpochs[p.offset]=e.lastChangedEpoch,p.offset++}}}var f=Symbol("RESET_VALUE"),y=class{constructor(e){this.capacity=e,this.buffer=new Array(e)}index=0;buffer;pushEntry(e,t,i){void 0!==i&&(i!==f?(this.buffer[this.index]=[e,t,i],this.index=(this.index+1)%this.capacity):this.clear())}clear(){this.index=0,this.buffer.fill(void 0)}getChangesSince(e){const{index:t,capacity:i,buffer:n}=this;for(let s=0;s<i;s++){const o=(t-1+i-s)%i,r=n[o];if(!r)return f;const[a,l]=r;if(0===s&&e>=l)return[];if(a<=e&&e<l){const e=s+1,t=new Array(e);for(let s=0;s<e;s++)t[s]=n[(o+s)%i][2];return t}}return f}},b=-1,w=0,C=!1;var M=class{constructor(e){this.parent=e}initialAtomValues=new Map;get isRoot(){return null===this.parent}commit(){if(this.isRoot){const e=this.initialAtomValues;this.initialAtomValues=new Map,x(e.keys())}else this.initialAtomValues.forEach(((e,t)=>{this.parent.initialAtomValues.has(t)||this.parent.initialAtomValues.set(t,e)}))}abort(){w++,this.initialAtomValues.forEach(((e,t)=>{t.set(e),t.historyBuffer?.clear()})),this.commit()}};function x(e){if(C)throw new Error("cannot change atoms during reaction cycle");try{C=!0;const t=new Set,i=e=>{e.lastTraversedEpoch!==w&&(e.lastTraversedEpoch=w,"maybeScheduleEffect"in e?t.add(e):e.children.visit(i))};for(const n of e)n.children.visit(i);for(const e of t)e.maybeScheduleEffect()}finally{C=!1}}var A=null;function S(e){return A?e():function(e){const t=new M(A);A=t;try{let i=!1;const n=e((()=>i=!0));return i?t.abort():t.commit(),n}catch(i){throw t.abort(),i}finally{A=A.parent}}(e)}var v=class{constructor(e,t,i){this.name=e,this.current=t,this.isEqual=i?.isEqual??null,i&&(i.historyLength&&(this.historyBuffer=new y(i.historyLength)),this.computeDiff=i.computeDiff)}isEqual;computeDiff;lastChangedEpoch=w;children=new n;historyBuffer;__unsafe__getWithoutCapture(){return this.current}get value(){return I(this),this.current}set(e,t){if(this.isEqual?.(this.current,e)??l(this.current,e))return this.current;w++,this.historyBuffer&&this.historyBuffer.pushEntry(this.lastChangedEpoch,w,t??this.computeDiff?.(this.current,e,this.lastChangedEpoch,w)??f),this.lastChangedEpoch=w;const i=this.current;return this.current=e,function(e,t){A?A.initialAtomValues.has(e)||A.initialAtomValues.set(e,t):x([e])}(this,i),e}update(e){return this.set(e(this.current))}getDiffSince(e){return I(this),e>=this.lastChangedEpoch?c:this.historyBuffer?.getChangesSince(e)??f}};function L(e,t,i){return new v(e,t,i)}var j=Symbol("UNINITIALIZED"),N=e=>e===j,D=class{constructor(e,t){this.value=e,this.diff=t}};function E(e,t){return new D(e,t)}var k=class{constructor(e,t,i){this.name=e,this.derive=t,i?.historyLength&&(this.historyBuffer=new y(i.historyLength)),this.computeDiff=i?.computeDiff,this.isEqual=i?.isEqual??l}lastChangedEpoch=b;lastTraversedEpoch=b;lastCheckedEpoch=b;parents=[];parentEpochs=[];children=new n;get isActivelyListening(){return!this.children.isEmpty}historyBuffer;state=j;computeDiff;isEqual;__unsafe__getWithoutCapture(){const e=this.lastChangedEpoch===b;if(!(e||this.lastCheckedEpoch!==w&&o(this)))return this.lastCheckedEpoch=w,this.state;try{g(this);const t=this.derive(this.state,this.lastCheckedEpoch),i=t instanceof D?t.value:t;if(this.state===j||!this.isEqual(i,this.state)){if(this.historyBuffer&&!e){const e=t instanceof D?t.diff:void 0;this.historyBuffer.pushEntry(this.lastChangedEpoch,w,e??this.computeDiff?.(this.state,i,this.lastCheckedEpoch,w)??f)}this.lastChangedEpoch=w,this.state=i}return this.lastCheckedEpoch=w,this.state}finally{m()}}get value(){const e=this.__unsafe__getWithoutCapture();return I(this),e}getDiffSince(e){return this.value,e>=this.lastChangedEpoch?c:this.historyBuffer?.getChangesSince(e)??f}};function Z(e={},t,i,n){const s=n.get,o=Symbol.for("__signia__computed__"+i);return n.get=function(){let t=this[o];return t||(t=new k(i,s.bind(this),e),Object.defineProperty(this,o,{enumerable:!1,configurable:!1,writable:!1,value:t})),t.value},n}function T(){if(1===arguments.length){const e=arguments[0];return(t,i,n)=>Z(e,0,i,n)}return"string"==typeof arguments[0]?new k(arguments[0],arguments[1],arguments[2]):Z(void 0,0,arguments[1],arguments[2])}var W=class{constructor(e,t,i){this.name=e,this.runEffect=t,this._scheduleEffect=i?.scheduleEffect}_isActivelyListening=!1;get isActivelyListening(){return this._isActivelyListening}lastTraversedEpoch=b;lastReactedEpoch=b;_scheduleCount=0;get scheduleCount(){return this._scheduleCount}parentEpochs=[];parents=[];_scheduleEffect;maybeScheduleEffect(){this._isActivelyListening&&this.lastReactedEpoch!==w&&(!this.parents.length||o(this)?this.scheduleEffect():this.lastReactedEpoch=w)}scheduleEffect(){this._scheduleCount++,this._scheduleEffect?this._scheduleEffect(this.maybeExecute):this.execute()}maybeExecute=()=>{this._isActivelyListening&&this.execute()};attach(){this._isActivelyListening=!0;for(let e=0,t=this.parents.length;e<t;e++)a(this.parents[e],this)}detach(){this._isActivelyListening=!1;for(let e=0,t=this.parents.length;e<t;e++)r(this.parents[e],this)}execute(){try{g(this);const e=this.runEffect(this.lastReactedEpoch);return this.lastReactedEpoch=w,e}finally{m()}}};function z(e,t,i){const n=new W(e,t,i);return n.attach(),n.scheduleEffect(),()=>{n.detach()}}function P(e,t,i){const n=new W(e,t,i);return{scheduler:n,start:e=>{const t=e?.force??!1;n.attach(),t?n.scheduleEffect():n.maybeScheduleEffect()},stop:()=>{n.detach()}}}},693514:(e,t,i)=>{"use strict";i(206469)("flat")},696521:(e,t,i)=>{"use strict";i.d(t,{zq:()=>n,il:()=>p,fX:()=>b,_e:()=>w,WE:()=>r,ht:()=>I,fO:()=>c,Dm:()=>g});class n{constructor(e){this.previousValue=e}nextValue;diff;get(){const e=this.diff?.removed?.size??0,t=this.diff?.added?.size??0;if(0!==e||0!==t)return{value:this.nextValue,diff:this.diff}}_add(e,t){this.nextValue??=new Set(this.previousValue),this.nextValue.add(e),this.diff??={},t?this.diff.removed?.delete(e):(this.diff.added??=new Set,this.diff.added.add(e))}add(e){const t=this.previousValue.has(e);if(t){const i=this.diff?.removed?.has(e);if(!i)return;return this._add(e,t)}const i=this.nextValue?.has(e);i||this._add(e,t)}_remove(e,t){this.nextValue??=new Set(this.previousValue),this.nextValue.delete(e),this.diff??={},t?(this.diff.removed??=new Set,this.diff.removed.add(e)):this.diff.added?.delete(e)}remove(e){const t=this.previousValue.has(e);if(!t){const i=this.diff?.added?.has(e);if(!i)return;return this._remove(e,t)}const i=this.diff?.removed?.has(e);i||this._remove(e,t)}}var s=()=>i(63666);class o{constructor(e,t){this.typeName=e,this.createDefaultProperties=t.createDefaultProperties,this.migrations=t.migrations,this.validator=t.validator??{validate:e=>e}}createDefaultProperties;migrations;validator;create(e){const t={...this.createDefaultProperties(),id:this.createId()};for(const[i,n]of Object.entries(e))void 0!==n&&(t[i]=n);return t.typeName=this.typeName,t}clone(e){return{...(0,s().pN)(e),id:this.createId()}}createId(){return this.typeName+":"+((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),""))()}createCustomId(e){return this.typeName+":"+e}isInstance=e=>e?.typeName===this.typeName;isId(e){if(!e)return!1;for(let t=0;t<this.typeName.length;t++)if(e[t]!==this.typeName[t])return!1;return":"===e[this.typeName.length]}withDefaultProperties(e){return new o(this.typeName,{createDefaultProperties:e,migrations:this.migrations,validator:this.validator})}validate(e){return this.validator.validate(e)}}function r(e,t){return new o(e,{createDefaultProperties:()=>({}),migrations:t.migrations??{currentVersion:0,firstVersion:0,migrators:{}},validator:t.validator})}var a=()=>i(681986);class l{items=new WeakMap;get(e,t){return this.items.has(e)||this.items.set(e,t(e)),this.items.get(e)}}function c(e){return e}function d(e,t){for(const[i,n]of Object.entries(e)){const e=n,s=t[i];if("eq"in e&&s!==e.eq)return!1;if("neq"in e&&s===e.neq)return!1;if("gt"in e&&("number"!=typeof s||s<=e.gt))return!1}return!0}function u(e,t,i){const n=Object.fromEntries(Object.keys(i).map((e=>[e,new Set])));for(const[s,o]of Object.entries(i))if("eq"in o){const i=e.index(t,s).value.get(o.eq);if(i)for(const e of i)n[s].add(e)}else if("neq"in o){const i=e.index(t,s);for(const[e,t]of i.value)if(e!==o.neq)for(const i of t)n[s].add(i)}else if("gt"in o){const i=e.index(t,s);for(const[e,t]of i.value)if(e>o.gt)for(const i of t)n[s].add(i)}return function(e){if(0===e.length)return new Set;const t=e[0],i=e.slice(1),n=new Set;for(const s of t)i.every((e=>e.has(s)))&&n.add(s);return n}(Object.values(n))}class h{constructor(e,t){this.atoms=e,this.history=t}indexCache=new Map;historyCache=new Map;filterHistory(e){if(this.historyCache.has(e))return this.historyCache.get(e);const t=(0,a().EW)("filterHistory:"+e,((t,i)=>{if((0,a()._O)(t))return this.history.value;const n=this.history.getDiffSince(i);if(n===a().c2)return this.history.value;const s={added:{},removed:{},updated:{}};let o=0,r=0,l=0;for(const a of n){for(const t of Object.values(a.added))if(t.typeName===e)if(s.removed[t.id]){const e=s.removed[t.id];delete s.removed[t.id],r--,e!==t&&(s.updated[t.id]=[e,t],l++)}else s.added[t.id]=t,o++;for(const[t,i]of Object.values(a.updated))i.typeName===e&&(s.added[i.id]?s.added[i.id]=i:s.updated[i.id]?s.updated[i.id]=[s.updated[i.id][0],i]:(s.updated[i.id]=[t,i],l++));for(const t of Object.values(a.removed))t.typeName===e&&(s.added[t.id]?(delete s.added[t.id],o--):s.updated[t.id]?(s.removed[t.id]=s.updated[t.id][0],delete s.updated[t.id],l--,r++):(s.removed[t.id]=t,r++))}return o||r||l?(0,a()._D)(this.history.value,s):t}),{historyLength:100});return this.historyCache.set(e,t),t}index(e,t){const i=e+":"+t;if(this.indexCache.has(i))return this.indexCache.get(i);const n=this.__uncached_createIndex(e,t);return this.indexCache.set(i,n),n}__uncached_createIndex(e,t){const i=this.filterHistory(e),s=()=>{i.value;const n=new Map;for(const i of Object.values(this.atoms.value)){const s=i.value;if(s.typeName===e){const e=s[t];n.has(e)||n.set(e,new Set),n.get(e).add(s.id)}}return n};return(0,a().EW)("index:"+e+":"+t,((o,r)=>{if((0,a()._O)(o))return s();const l=i.getDiffSince(r);if(l===a().c2)return s();const c=new Map,d=(e,t)=>{let i=c.get(e);i||(i=new n(o.get(e)??new Set)),i.add(t),c.set(e,i)},u=(e,t)=>{let i=c.get(e);i||(i=new n(o.get(e)??new Set)),i.remove(t),c.set(e,i)};for(const i of l){for(const n of Object.values(i.added))if(n.typeName===e){d(n[t],n.id)}for(const[n,s]of Object.values(i.updated))if(s.typeName===e){const e=n[t],i=s[t];e!==i&&(u(e,s.id),d(i,s.id))}for(const n of Object.values(i.removed))if(n.typeName===e){u(n[t],n.id)}}let h,p;for(const[e,t]of c){const i=t.get();i&&(h||(h=new Map(o)),p||(p=new Map),0===i.value.size?h.delete(e):h.set(e,i.value),p.set(e,i.diff))}return h&&p?(0,a()._D)(h,p):o}),{historyLength:100})}record(e,t=(()=>({})),i="record:"+e+(t?":"+t.toString():"")){const n=this.ids(e,t,i);return(0,a().EW)(i,(()=>{for(const e of n.value)return this.atoms.value[e]?.value}))}records(e,t=(()=>({})),i="records:"+e+(t?":"+t.toString():"")){const n=this.ids(e,t,"ids:"+i);return(0,a().EW)(i,(()=>[...n.value].map((e=>{const t=this.atoms.value[e];if(!t)throw new Error("no atom found for record id: "+e);return t.value}))))}ids(e,t=(()=>({})),s="ids:"+e+(t?":"+t.toString():"")){const o=this.filterHistory(e),r=()=>{o.value;const i=t();return 0===Object.keys(i).length?new Set(Object.values(this.atoms.value).flatMap((t=>{const i=t.value;return i.typeName===e?i.id:[]}))):u(this,e,i)},l=e=>{const t=r(),i=function(e,t){const i={};for(const n of t)e.has(n)||(i.added??=new Set,i.added.add(n));for(const n of e)t.has(n)||(i.removed??=new Set,i.removed.add(n));return i.added||i.removed?i:void 0}(e,t);return i?(0,a()._D)(t,i):e},c=(0,a().EW)("ids_query:"+s,t,{isEqual:i(908142)});return(0,a().EW)("query:"+s,((t,i)=>{const s=c.value;if((0,a()._O)(t))return r();if(i<c.lastChangedEpoch)return l(t);const u=o.getDiffSince(i);if(u===a().c2)return l(t);const h=new n(t);for(const n of u){for(const t of Object.values(n.added))t.typeName===e&&d(s,t)&&h.add(t.id);for(const[t,i]of Object.values(n.updated))i.typeName===e&&(d(s,i)?h.add(i.id):h.remove(i.id));for(const t of Object.values(n.removed))t.typeName===e&&h.remove(t.id)}const p=h.get();return p?(0,a()._D)(p.value,p.diff):t}),{historyLength:50})}exec(e,t){const i=u(this,e,t);if(0===i.size)return a().Ml;const n=this.atoms.value;return[...i].map((e=>n[e].value))}}class p{atoms=(0,a().eU)("store_atoms",{});history=(0,a().eU)("history",0,{historyLength:1e3});query=new h(this.atoms,this.history);listeners=new Set;historyAccumulator=new m;historyReactor;schema;props;constructor(e){const{initialData:t,schema:i}=e;this.schema=i,this.props=e.props,t&&this.atoms.set(Object.fromEntries(Object.entries(t).map((([e,t])=>[e,(0,a().eU)("atom:"+e,this.schema.validateRecord(this,t,"initialize",null))])))),this.historyReactor=(0,a().Px)("Store.historyReactor",(()=>{this.history.value,this._flushHistory()}),{scheduleEffect:e=>requestAnimationFrame(e)})}_flushHistory(){if(this.historyAccumulator.hasChanges()){const e=this.historyAccumulator.flush();for(const{changes:t,source:i}of e)this.listeners.forEach((e=>e({changes:t,source:i})))}}updateHistory(e){this.historyAccumulator.add({changes:e,source:this.isMergingRemoteChanges?"remote":"user"}),0===this.listeners.size&&this.historyAccumulator.clear(),this.history.set(this.history.value+1,e)}validate(e){this.allRecords().forEach((t=>this.schema.validateRecord(this,t,e,null)))}onAfterCreate;onAfterChange;onBeforeDelete;onAfterDelete;_runCallbacks=!0;put=(e,t)=>{(0,a().hL)((()=>{const i={},n={},s=this.atoms.__unsafe__getWithoutCapture();let o,r=null,l=!1;for(let u=0,h=e.length;u<h;u++){o=e[u];const c=(r??s)[o.id];if(c){const e=c.__unsafe__getWithoutCapture();o=this.schema.validateRecord(this,o,t??"updateRecord",e),c.set(o);const n=c.__unsafe__getWithoutCapture();e!==n&&(l=!0,i[o.id]=[e,n])}else l=!0,o=this.schema.validateRecord(this,o,t??"createRecord",null),n[o.id]=o,r||(r={...s}),r[o.id]=(0,a().eU)("atom:"+o.id,o)}if(r&&this.atoms.set(r),!l)return;this.updateHistory({added:n,updated:i,removed:{}});const{onAfterCreate:c,onAfterChange:d}=this;c&&this._runCallbacks&&Object.values(n).forEach((e=>{c(e)})),d&&this._runCallbacks&&Object.values(i).forEach((([e,t])=>{d(e,t)}))}))};remove=e=>{(0,a().hL)((()=>{if(this.onBeforeDelete&&this._runCallbacks)for(const i of e){const e=this.atoms.__unsafe__getWithoutCapture()[i];e&&this.onBeforeDelete(e.value)}let t;if(this.atoms.update((i=>{let n;for(const s of e)s in i&&(n||(n={...i}),t||(t={}),delete n[s],t[s]=i[s].value);return n??i})),t&&(this.updateHistory({added:{},updated:{},removed:t}),this.onAfterDelete&&this._runCallbacks))for(let i=0,n=e.length;i<n;i++)this.onAfterDelete(t[e[i]])}))};get=e=>this.atoms.value[e]?.value;unsafeGetWithoutCapture=e=>this.atoms.value[e]?.__unsafe__getWithoutCapture();serialize=e=>{const t={};for(const[i,n]of Object.entries(this.atoms.value)){const s=n.value;("function"!=typeof e||e(s))&&(t[i]=s)}return t};deserialize=e=>{(0,a().hL)((()=>{this.clear(),this.put(Object.values(e))}))};allRecords=()=>Object.values(this.atoms.value).map((e=>e.value));clear=()=>{this.remove(Object.keys(this.atoms.value))};update=(e,t)=>{const i=this.atoms.value[e];i?this.put([t(i.__unsafe__getWithoutCapture())]):console.error(`Record ${e} not found. This is probably an error`)};has=e=>!!this.atoms.value[e];listen=e=>(this._flushHistory(),this.listeners.add(e),this.historyReactor.scheduler.isActivelyListening||this.historyReactor.start(),()=>{this.listeners.delete(e),0===this.listeners.size&&this.historyReactor.stop()});isMergingRemoteChanges=!1;mergeRemoteChanges=e=>{if(this.isMergingRemoteChanges)return e();try{this.isMergingRemoteChanges=!0,(0,a().hL)(e)}finally{this.isMergingRemoteChanges=!1}};extractingChanges(e){const t=[],i=this.historyAccumulator.intercepting((e=>t.push(e.changes)));try{return(0,a().hL)(e),g(t)}finally{i()}}applyDiff(e,t=!0){const i=this._runCallbacks;try{this._runCallbacks=t,(0,a().hL)((()=>{const t=Object.values(e.added).concat(Object.values(e.updated).map((([e,t])=>t))),i=Object.keys(e.removed);t.length&&this.put(t),i.length&&this.remove(i)}))}finally{this._runCallbacks=i}}createComputedCache=(e,t)=>{const i=new l;return{get:n=>{const s=this.atoms.value[n];if(s)return i.get(s,(()=>(0,a().EW)(e+":"+n,(()=>t(s.value))))).value}}};createSelectedComputedCache=(e,t,i)=>{const n=new l;return{get:s=>{const o=this.atoms.value[s];if(!o)return;const r=(0,a().EW)(e+":"+s+":selector",(()=>t(o.value)));return n.get(o,(()=>(0,a().EW)(e+":"+s,(()=>i(r.value))))).value}}};ensureStoreIsUsable(){this.schema.ensureStoreIsUsable(this)}_isPossiblyCorrupted=!1;markAsPossiblyCorrupted(){this._isPossiblyCorrupted=!0}isPossiblyCorrupted(){return this._isPossiblyCorrupted}}function g(e){const t={added:{},removed:{},updated:{}};for(const i of e){for(const[e,n]of Object.entries(i.added))if(t.removed[e]){const i=t.removed[e];delete t.removed[e],i!==n&&(t.updated[e]=[i,n])}else t.added[e]=n;for(const[e,[n,s]]of Object.entries(i.updated))t.added[e]?(t.added[e]=s,delete t.updated[e],delete t.removed[e]):t.updated[e]?(t.updated[e][1]=s,delete t.removed[e]):(t.updated[e]=i.updated[e],delete t.removed[e]);for(const[e,n]of Object.entries(i.removed))t.added[e]?delete t.added[e]:t.updated[e]?(t.removed[e]=t.updated[e][0],delete t.updated[e]):t.removed[e]=n}return t}class m{_history=[];_inteceptors=new Set;intercepting(e){return this._inteceptors.add(e),()=>{this._inteceptors.delete(e)}}add(e){this._history.push(e);for(const t of this._inteceptors)t(e)}flush(){const e=function(e){const t=[];let i,n=e[0];for(let s=1,o=e.length;s<o;s++)i=e[s],n.source!==i.source?(t.push(n),n=i):n={source:n.source,changes:g([n.changes,i.changes])};return t.push(n),t}(this._history);return this._history=[],e}clear(){this._history=[]}hasChanges(){return this._history.length>0}ensureStoreIsUsable(e={}){}}function I({firstVersion:e,currentVersion:t,migrators:i,subTypeKey:n,subTypeMigrations:s}){return{currentVersion:t,firstVersion:e,migrators:i,subTypeKey:n,subTypeMigrations:s}}var f=(e=>(e.IncompatibleSubtype="incompatible-subtype",e.UnknownType="unknown-type",e.TargetVersionTooNew="target-version-too-new",e.TargetVersionTooOld="target-version-too-old",e.MigrationError="migration-error",e.UnrecognizedSubtype="unrecognized-subtype",e))(f||{});function y({record:e,migrations:t,fromVersion:i,toVersion:n}){let s=i;if(!function(e){return"object"==typeof e&&null!==e&&"id"in e&&"typeName"in e}(e))throw new Error("[migrateRecord] object is not a record");const{typeName:o,id:r,...a}=e;let l=a;for(;s<n;){const e=s+1,i=t.migrators[e];if(!i)return{type:"error",reason:"target-version-too-new"};l=i.up(l),s=e}for(;s>n;){const e=s-1,i=t.migrators[s];if(!i)return{type:"error",reason:"target-version-too-old"};l=i.down(l),s=e}return{type:"success",value:{...l,id:r,typeName:o}}}class b{constructor(e,t){this.types=e,this.options=t}static create(e,t){return new b(e,t??{})}get currentStoreVersion(){return this.options.snapshotMigrations?.currentVersion??0}validateRecord(e,t,i,n){try{const e=(0,s().g5)(this.types,t.typeName);if(!e)throw new Error(`Missing definition for record type ${t.typeName}`);return e.validate(t)}catch(o){if(this.options.onValidationFailure)return this.options.onValidationFailure({store:e,record:t,phase:i,recordBefore:n,error:o});throw o}}migratePersistedRecord(e,t,i="up"){const n=(0,s().g5)(this.types,e.typeName),o=t.recordVersions[e.typeName];if(!o||!n)return{type:"error",reason:f.UnknownType};const r=n.migrations.currentVersion,a=o.version;if(r!==a){const t=y("up"===i?{record:e,migrations:n.migrations,fromVersion:a,toVersion:r}:{record:e,migrations:n.migrations,fromVersion:r,toVersion:a});if("error"===t.type)return t;e=t.value}if(!n.migrations.subTypeKey)return{type:"success",value:e};const l=n.migrations.subTypeMigrations?.[e[n.migrations.subTypeKey]],c="subTypeVersions"in o?o.subTypeVersions[e[n.migrations.subTypeKey]]:null;if(void 0===l)return{type:"error",reason:f.UnrecognizedSubtype};if(null==c)return{type:"error",reason:f.IncompatibleSubtype};const d=y("up"===i?{record:e,migrations:l,fromVersion:c,toVersion:l.currentVersion}:{record:e,migrations:l,fromVersion:l.currentVersion,toVersion:c});return"error"===d.type?d:{type:"success",value:d.value}}migrateStoreSnapshot(e,t){const i=this.options.snapshotMigrations;if(!i)return{type:"success",value:e};const n=i.currentVersion,s=t.storeVersion??0;if(n<s)return{type:"error",reason:f.TargetVersionTooOld};if(n>s){const t=function({value:e,migrations:t,fromVersion:i,toVersion:n}){let s=i;for(;s<n;){const i=s+1,n=t.migrators[i];if(!n)return{type:"error",reason:"target-version-too-new"};e=n.up(e),s=i}for(;s>n;){const i=s-1,n=t.migrators[s];if(!n)return{type:"error",reason:"target-version-too-old"};e=n.down(e),s=i}return{type:"success",value:e}}({value:e,migrations:i,fromVersion:s,toVersion:n});if("error"===t.type)return t;e=t.value}const o=[];for(const r of Object.values(e)){const e=this.migratePersistedRecord(r,t);if("error"===e.type)return e;e.value&&e.value!==r&&o.push(e.value)}if(o.length){e={...e};for(const t of o)e[t.id]=t}return{type:"success",value:e}}ensureStoreIsUsable(e){this.options.ensureStoreIsUsable?.(e)}serialize(){return{schemaVersion:1,storeVersion:this.options.snapshotMigrations?.currentVersion??0,recordVersions:Object.fromEntries((0,s().Ic)(this.types).map((e=>[e.typeName,e.migrations.subTypeKey&&e.migrations.subTypeMigrations?{version:e.migrations.currentVersion,subTypeKey:e.migrations.subTypeKey,subTypeVersions:e.migrations.subTypeMigrations?Object.fromEntries(Object.entries(e.migrations.subTypeMigrations).map((([e,t])=>[e,t.currentVersion]))):void 0}:{version:e.migrations.currentVersion}])))}}serializeEarliestVersion(){return{schemaVersion:1,storeVersion:this.options.snapshotMigrations?.firstVersion??0,recordVersions:Object.fromEntries((0,s().Ic)(this.types).map((e=>[e.typeName,e.migrations.subTypeKey&&e.migrations.subTypeMigrations?{version:e.migrations.firstVersion,subTypeKey:e.migrations.subTypeKey,subTypeVersions:e.migrations.subTypeMigrations?Object.fromEntries(Object.entries(e.migrations.subTypeMigrations).map((([e,t])=>[e,t.firstVersion]))):void 0}:{version:e.migrations.firstVersion}])))}}}const w=(e,t)=>{if(e.schemaVersion>t.schemaVersion)return 1;if(e.schemaVersion<t.schemaVersion)return-1;if(e.storeVersion>t.storeVersion)return 1;if(e.storeVersion<t.storeVersion)return-1;for(const i of Object.keys(e.recordVersions)){const n=e.recordVersions[i],s=t.recordVersions[i];if(n.version>s.version)return 1;if(n.version<s.version)return-1;if("subTypeVersions"in n&&!("subTypeVersions"in s))return 1;if(!("subTypeVersions"in n)&&"subTypeVersions"in s)return-1;if("subTypeVersions"in n&&"subTypeVersions"in s)for(const e of Object.keys(n.subTypeVersions)){const t=n.subTypeVersions[e],i=s.subTypeVersions[e];if(t>i)return 1;if(t<i)return-1}}return 0}},697015:(e,t,i)=>{"use strict";var n=i(444576),s=i(179504);e.exports=function(e,t){return s(n[e].prototype[t])}},718814:(e,t,i)=>{"use strict";var n=i(779039),s=i(444576).RegExp;e.exports=n((function(){var e=s("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},725440:(e,t,i)=>{"use strict";var n=i(318745),s=i(969565),o=i(179504),r=i(289228),a=i(779039),l=i(28551),c=i(194901),d=i(964117),u=i(991291),h=i(218014),p=i(500655),g=i(567750),m=i(257829),I=i(655966),f=i(802478),y=i(956682),b=i(978227)("replace"),w=Math.max,C=Math.min,M=o([].concat),x=o([].push),A=o("".indexOf),S=o("".slice),v="$0"==="a".replace(/./,"$0"),L=!!/./[b]&&""===/./[b]("a","$0");r("replace",(function(e,t,i){var o=L?"$":"$0";return[function(e,i){var n=g(this),o=d(e)?void 0:I(e,b);return o?s(o,e,n,i):s(t,p(n),e,i)},function(e,s){var r=l(this),a=p(e);if("string"==typeof s&&-1===A(s,o)&&-1===A(s,"$<")){var d=i(t,r,a,s);if(d.done)return d.value}var g=c(s);g||(s=p(s));var I,b=r.global;b&&(I=r.unicode,r.lastIndex=0);for(var v,L=[];null!==(v=y(r,a))&&(x(L,v),b);){""===p(v[0])&&(r.lastIndex=m(a,h(r.lastIndex),I))}for(var j,N="",D=0,E=0;E<L.length;E++){for(var k,Z=p((v=L[E])[0]),T=w(C(u(v.index),a.length),0),W=[],z=1;z<v.length;z++)x(W,void 0===(j=v[z])?j:String(j));var P=v.groups;if(g){var Y=M([Z],W,T,a);void 0!==P&&x(Y,P),k=p(n(s,void 0,Y))}else k=f(Z,a,T,W,P,s);T>=D&&(N+=S(a,D,T)+k,D=T+Z.length)}return N+S(a,D)}]}),!!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!v||L)},730237:(e,t,i)=>{"use strict";i(206469)("flatMap")},763770:e=>{"use strict";var t=Object.prototype.hasOwnProperty,i="~";function n(){}function s(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function o(e,t,n,o,r){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new s(n,o||e,r),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function r(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),a.prototype.eventNames=function(){var e,n,s=[];if(0===this._eventsCount)return s;for(n in e=this._events)t.call(e,n)&&s.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},a.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,o=n.length,r=new Array(o);s<o;s++)r[s]=n[s].fn;return r},a.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,s,o,r){var a=i?i+e:e;if(!this._events[a])return!1;var l,c,d=this._events[a],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,s),!0;case 5:return d.fn.call(d.context,t,n,s,o),!0;case 6:return d.fn.call(d.context,t,n,s,o,r),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var h,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,n);break;case 4:d[c].fn.call(d[c].context,t,n,s);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d[c].fn.apply(d[c].context,l)}}return!0},a.prototype.on=function(e,t,i){return o(this,e,t,i,!1)},a.prototype.once=function(e,t,i){return o(this,e,t,i,!0)},a.prototype.removeListener=function(e,t,n,s){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return r(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||s&&!a.once||n&&a.context!==n||r(this,o);else{for(var l=0,c=[],d=a.length;l<d;l++)(a[l].fn!==t||s&&!a[l].once||n&&a[l].context!==n)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:r(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&r(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,e.exports=a},781015:(e,t,i)=>{"use strict";var n=i(515818);e.exports=n},802478:(e,t,i)=>{"use strict";var n=i(179504),s=i(748981),o=Math.floor,r=n("".charAt),a=n("".replace),l=n("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,i,n,u,h){var p=i+e.length,g=n.length,m=d;return void 0!==u&&(u=s(u),m=c),a(h,m,(function(s,a){var c;switch(r(a,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,i);case"'":return l(t,p);case"<":c=u[l(a,1,-1)];break;default:var d=+a;if(0===d)return s;if(d>g){var h=o(d/10);return 0===h?s:h<=g?void 0===n[h-1]?r(a,1):n[h-1]+r(a,1):s}c=n[d-1]}return void 0===c?"":c}))}},832992:(e,t,i)=>{var n,s=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function s(e,t){if(!n[e]){n[e]={};for(var i=0;i<e.length;i++)n[e][e.charAt(i)]=i}return n[e][t]}var o={compressToBase64:function(e){if(null==e)return"";var i=o._compress(e,6,(function(e){return t.charAt(e)}));switch(i.length%4){default:case 0:return i;case 1:return i+"===";case 2:return i+"==";case 3:return i+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,(function(i){return s(t,e.charAt(i))}))},compressToUTF16:function(t){return null==t?"":o._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=o.compress(e),i=new Uint8Array(2*t.length),n=0,s=t.length;n<s;n++){var r=t.charCodeAt(n);i[2*n]=r>>>8,i[2*n+1]=r%256}return i},decompressFromUint8Array:function(t){if(null==t)return o.decompress(t);for(var i=new Array(t.length/2),n=0,s=i.length;n<s;n++)i[n]=256*t[2*n]+t[2*n+1];var r=[];return i.forEach((function(t){r.push(e(t))})),o.decompress(r.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,(function(e){return i.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,(function(t){return s(i,e.charAt(t))})))},compress:function(t){return o._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,i){if(null==e)return"";var n,s,o,r={},a={},l="",c="",d="",u=2,h=3,p=2,g=[],m=0,I=0;for(o=0;o<e.length;o+=1)if(l=e.charAt(o),Object.prototype.hasOwnProperty.call(r,l)||(r[l]=h++,a[l]=!0),c=d+l,Object.prototype.hasOwnProperty.call(r,c))d=c;else{if(Object.prototype.hasOwnProperty.call(a,d)){if(d.charCodeAt(0)<256){for(n=0;n<p;n++)m<<=1,I==t-1?(I=0,g.push(i(m)),m=0):I++;for(s=d.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&s,I==t-1?(I=0,g.push(i(m)),m=0):I++,s>>=1}else{for(s=1,n=0;n<p;n++)m=m<<1|s,I==t-1?(I=0,g.push(i(m)),m=0):I++,s=0;for(s=d.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&s,I==t-1?(I=0,g.push(i(m)),m=0):I++,s>>=1}0==--u&&(u=Math.pow(2,p),p++),delete a[d]}else for(s=r[d],n=0;n<p;n++)m=m<<1|1&s,I==t-1?(I=0,g.push(i(m)),m=0):I++,s>>=1;0==--u&&(u=Math.pow(2,p),p++),r[c]=h++,d=String(l)}if(""!==d){if(Object.prototype.hasOwnProperty.call(a,d)){if(d.charCodeAt(0)<256){for(n=0;n<p;n++)m<<=1,I==t-1?(I=0,g.push(i(m)),m=0):I++;for(s=d.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&s,I==t-1?(I=0,g.push(i(m)),m=0):I++,s>>=1}else{for(s=1,n=0;n<p;n++)m=m<<1|s,I==t-1?(I=0,g.push(i(m)),m=0):I++,s=0;for(s=d.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&s,I==t-1?(I=0,g.push(i(m)),m=0):I++,s>>=1}0==--u&&(u=Math.pow(2,p),p++),delete a[d]}else for(s=r[d],n=0;n<p;n++)m=m<<1|1&s,I==t-1?(I=0,g.push(i(m)),m=0):I++,s>>=1;0==--u&&(u=Math.pow(2,p),p++)}for(s=2,n=0;n<p;n++)m=m<<1|1&s,I==t-1?(I=0,g.push(i(m)),m=0):I++,s>>=1;for(;;){if(m<<=1,I==t-1){g.push(i(m));break}I++}return g.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,i,n){var s,o,r,a,l,c,d,u=[],h=4,p=4,g=3,m="",I=[],f={val:n(0),position:i,index:1};for(s=0;s<3;s+=1)u[s]=s;for(r=0,l=Math.pow(2,2),c=1;c!=l;)a=f.val&f.position,f.position>>=1,0==f.position&&(f.position=i,f.val=n(f.index++)),r|=(a>0?1:0)*c,c<<=1;switch(r){case 0:for(r=0,l=Math.pow(2,8),c=1;c!=l;)a=f.val&f.position,f.position>>=1,0==f.position&&(f.position=i,f.val=n(f.index++)),r|=(a>0?1:0)*c,c<<=1;d=e(r);break;case 1:for(r=0,l=Math.pow(2,16),c=1;c!=l;)a=f.val&f.position,f.position>>=1,0==f.position&&(f.position=i,f.val=n(f.index++)),r|=(a>0?1:0)*c,c<<=1;d=e(r);break;case 2:return""}for(u[3]=d,o=d,I.push(d);;){if(f.index>t)return"";for(r=0,l=Math.pow(2,g),c=1;c!=l;)a=f.val&f.position,f.position>>=1,0==f.position&&(f.position=i,f.val=n(f.index++)),r|=(a>0?1:0)*c,c<<=1;switch(d=r){case 0:for(r=0,l=Math.pow(2,8),c=1;c!=l;)a=f.val&f.position,f.position>>=1,0==f.position&&(f.position=i,f.val=n(f.index++)),r|=(a>0?1:0)*c,c<<=1;u[p++]=e(r),d=p-1,h--;break;case 1:for(r=0,l=Math.pow(2,16),c=1;c!=l;)a=f.val&f.position,f.position>>=1,0==f.position&&(f.position=i,f.val=n(f.index++)),r|=(a>0?1:0)*c,c<<=1;u[p++]=e(r),d=p-1,h--;break;case 2:return I.join("")}if(0==h&&(h=Math.pow(2,g),g++),u[d])m=u[d];else{if(d!==p)return null;m=o+o.charAt(0)}I.push(m),u[p++]=o+m.charAt(0),o=m,0==--h&&(h=Math.pow(2,g),g++)}}};return o}();void 0===(n=function(){return s}.call(t,i,t,e))||(e.exports=n)},850955:(e,t,i)=>{"use strict";i.d(t,{u4:()=>d,fp:()=>u,A1:()=>o,h:()=>h});var n=i(296540),s=()=>i(681986);function o(e,t){const i=n.useRef(t);i.current=t;const[o,r,a]=n.useMemo((()=>{let t=null;const n=new(s().VM)(`useStateTracking(${e})`,(()=>i.current?.()),{scheduleEffect(){t?.()}});return[n,e=>(t=e,()=>{t=null}),()=>n.scheduleCount]}),[e]);return n.useSyncExternalStore(r,a,a),n.useEffect((()=>(o.attach(),o.maybeScheduleEffect(),()=>{o.detach()})),[o]),o.execute()}var r={apply:(e,t,i)=>o(e.displayName??e.name??"tracked(???)",(()=>e.apply(t,i)))},a=Symbol.for("react.lazy"),l=Symbol.for("react.memo"),c=Symbol.for("react.forward_ref");function d(e){let t=null;const i=e.$$typeof;if(i===l&&(t=(e=e.type).compare),i===c)return(0,n.memo)((0,n.forwardRef)(new Proxy(e.render,r)));if(i===a){let t;return(0,n.memo)((0,n.lazy)((()=>{if(!t){const{_init:i,_payload:n}=e,s=i(n);t=d(s)}return Promise.resolve({default:t})})))}return(0,n.memo)(new Proxy(e,r),t)}function u(e,t,i){return(0,n.useMemo)((()=>{const n="function"==typeof t?t():t;return(0,s().eU)(`useAtom(${e})`,n,i)}),[])}function h(){const e=arguments,t=3===e.length?e[2]:[e[0]],i=3===e.length?e[0]:`useValue(${e[0].name})`,o=(0,n.useRef)(!0);o.current=!0;const r=(0,n.useMemo)((()=>1===e.length?e[0]:(0,s().EW)(i,(()=>{if(o.current)return e[1]();try{return e[1]()}catch{return{}}}))),t);try{const{subscribe:e,getSnapshot:t}=(0,n.useMemo)((()=>({subscribe:e=>(0,s().wv)(`useValue(${i})`,(()=>{r.value,e()})),getSnapshot:()=>r.value})),[r]);return(0,n.useSyncExternalStore)(e,t,t)}finally{o.current=!1}}Symbol.for("react.memo"),Symbol.for("react.forward_ref"),Symbol.for("react.lazy")},875954:(e,t,i)=>{"use strict";i.d(t,{Ax:()=>W,M8:()=>_,Z4:()=>n,p8:()=>c,cQ:()=>J,PI:()=>r,uA:()=>l,He:()=>H,dw:()=>d,DD:()=>a,hd:()=>s,ST:()=>b,YY:()=>p,jw:()=>M,lC:()=>m,qE:()=>u,tR:()=>x,mB:()=>P,tU:()=>z,B0:()=>S,AQ:()=>v,ye:()=>L,sW:()=>D,$4:()=>te,U$:()=>X,Km:()=>Q,Op:()=>re,SU:()=>ae,y5:()=>le,lq:()=>oe,NC:()=>se,oQ:()=>ue,UB:()=>Y,gJ:()=>y,HV:()=>de,WJ:()=>f,VM:()=>g,s3:()=>k,EC:()=>Z,Rx:()=>he,nv:()=>A,$C:()=>N,g6:()=>j,ao:()=>ee,qe:()=>I,cL:()=>C,WM:()=>T});const n={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e*e:(4-2*e)*e-1,easeInCubic:e=>e*e*e,easeOutCubic:e=>--e*e*e+1,easeInOutCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1- --e*e*e*e,easeInOutQuart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1+--e*e*e*e*e,easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e<=0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e>=1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e<=0?0:e>=1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2};class s{constructor(e=0,t=0,i=1){this.x=e,this.y=t,this.z=i}get pressure(){return this.z}set(e=this.x,t=this.y,i=this.z){return this.x=e,this.y=t,this.z=i,this}setTo({x:e=0,y:t=0,z:i=1}){return this.x=e,this.y=t,this.z=i,this}rot(e){if(0===e)return this;const{x:t,y:i}=this,n=Math.sin(e),s=Math.cos(e);return this.x=t*s-i*n,this.y=t*n+i*s,this}rotWith(e,t){if(0===t)return this;const i=this.x-e.x,n=this.y-e.y,s=Math.sin(t),o=Math.cos(t);return this.x=e.x+(i*o-n*s),this.y=e.y+(i*s+n*o),this}clone(){const{x:e,y:t,z:i}=this;return new s(e,t,i)}sub(e){return this.x-=e.x,this.y-=e.y,this}subXY(e,t){return this.x-=e,this.y-=t,this}subScalar(e){return this.x-=e,this.y-=e,this}add(e){return this.x+=e.x,this.y+=e.y,this}addXY(e,t){return this.x+=e,this.y+=t,this}addScalar(e){return this.x+=e,this.y+=e,this}clamp(e,t){return this.x=Math.min(Math.max(this.x,e),t??this.x),this.y=Math.min(Math.max(this.y,e),t??this.y),this}div(e){return this.x/=e,this.y/=e,this}divV(e){return this.x/=e.x,this.y/=e.y,this}mul(e){return this.x*=e,this.y*=e,this}mulV(e){return this.x*=e.x,this.y*=e.y,this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}nudge(e,t){const i=s.Tan(e,this);return this.add(i.mul(t))}neg(){return this.x*=-1,this.y*=-1,this}cross(e){return this.x=this.y*e.z-this.z*e.y,this.y=this.z*e.x-this.x*e.z,this}dpr(e){return s.Dpr(this,e)}cpr(e){return s.Cpr(this,e)}len2(){return s.Len2(this)}len(){return s.Len(this)}pry(e){return s.Pry(this,e)}per(){const{x:e,y:t}=this;return this.x=t,this.y=-e,this}uni(){return s.Uni(this)}tan(e){return s.Tan(this,e)}dist(e){return s.Dist(this,e)}distanceToLineSegment(e,t){return s.DistanceToLineSegment(e,t,this)}slope(e){return s.Slope(this,e)}snapToGrid(e){return this.x=Math.round(this.x/e)*e,this.y=Math.round(this.y/e)*e,this}angle(e){return s.Angle(this,e)}toAngle(){return s.ToAngle(this)}lrp(e,t){return this.x=this.x+(e.x-this.x)*t,this.y=this.y+(e.y-this.y)*t,this}equals(e){return s.Equals(this,e)}equalsXY(e,t){return s.EqualsXY(this,e,t)}norm(){const e=this.len();return this.x=0===e?0:this.x/e,this.y=0===e?0:this.y/e,this}toFixed(){return s.ToFixed(this)}toString(){return s.ToString(s.ToFixed(this))}toJson(){return s.ToJson(this)}toArray(){return s.ToArray(this)}static Add(e,t){return new s(e.x+t.x,e.y+t.y)}static AddXY(e,t,i){return new s(e.x+t,e.y+i)}static Sub(e,t){return new s(e.x-t.x,e.y-t.y)}static SubXY(e,t,i){return new s(e.x-t,e.y-i)}static AddScalar(e,t){return new s(e.x+t,e.y+t)}static SubScalar(e,t){return new s(e.x-t,e.y-t)}static Div(e,t){return new s(e.x/t,e.y/t)}static Mul(e,t){return new s(e.x*t,e.y*t)}static DivV(e,t){return new s(e.x/t.x,e.y/t.y)}static MulV(e,t){return new s(e.x*t.x,e.y*t.y)}static Neg(e){return new s(-e.x,-e.y)}static Per(e){return new s(e.y,-e.x)}static Dist2(e,t){return s.Sub(e,t).len2()}static Abs(e){return new s(Math.abs(e.x),Math.abs(e.y))}static Dist(e,t){return Math.hypot(e.y-t.y,e.x-t.x)}static Dpr(e,t){return e.x*t.x+e.y*t.y}static Cross(e,t){return new s(e.y*t.z-e.z*t.y,e.z*t.x-e.x*t.z)}static Cpr(e,t){return e.x*t.y-t.x*e.y}static Len2(e){return e.x*e.x+e.y*e.y}static Len(e){return Math.sqrt(s.Len2(e))}static Pry(e,t){return s.Dpr(e,t)/s.Len(t)}static Uni(e){return s.Div(e,s.Len(e))}static Tan(e,t){return s.Uni(s.Sub(e,t))}static Min(e,t){return new s(Math.min(e.x,t.x),Math.min(e.y,t.y))}static Max(e,t){return new s(Math.max(e.x,t.x),Math.max(e.y,t.y))}static From({x:e,y:t,z:i=1}){return new s(e,t,i)}static FromArray(e){return new s(e[0],e[1])}static Rot(e,t=0){const i=Math.sin(t),n=Math.cos(t);return new s(e.x*n-e.y*i,e.x*i+e.y*n)}static RotWith(e,t,i){const n=e.x-t.x,o=e.y-t.y,r=Math.sin(i),a=Math.cos(i);return new s(t.x+(n*a-o*r),t.y+(n*r+o*a))}static NearestPointOnLineThroughPoint(e,t,i){return s.Mul(t,s.Sub(i,e).pry(t)).add(e)}static NearestPointOnLineSegment(e,t,i,n=!0){const o=s.Tan(t,e),r=s.Add(e,s.Mul(o,s.Sub(i,e).pry(o)));if(n){if(r.x<Math.min(e.x,t.x))return s.Cast(e.x<t.x?e:t);if(r.x>Math.max(e.x,t.x))return s.Cast(e.x>t.x?e:t);if(r.y<Math.min(e.y,t.y))return s.Cast(e.y<t.y?e:t);if(r.y>Math.max(e.y,t.y))return s.Cast(e.y>t.y?e:t)}return r}static DistanceToLineThroughPoint(e,t,i){return s.Dist(i,s.NearestPointOnLineThroughPoint(e,t,i))}static DistanceToLineSegment(e,t,i,n=!0){return s.Dist(i,s.NearestPointOnLineSegment(e,t,i,n))}static Snap(e,t=1){return new s(Math.round(e.x/t)*t,Math.round(e.y/t)*t)}static Cast(e){return e instanceof s?e:s.From(e)}static Slope(e,t){return e.x===t.y?NaN:(e.y-t.y)/(e.x-t.x)}static Angle(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}static Lrp(e,t,i){return s.Sub(t,e).mul(i).add(e)}static Med(e,t){return new s((e.x+t.x)/2,(e.y+t.y)/2)}static Equals(e,t){return Math.abs(e.x-t.x)<1e-4&&Math.abs(e.y-t.y)<1e-4}static EqualsXY(e,t,i){return e.x===t&&e.y===i}static Clockwise(e,t,i){return(i.x-e.x)*(t.y-e.y)-(t.x-e.x)*(i.y-e.y)<0}static Rescale(e,t){const i=s.Len(e);return new s(t*e.x/i,t*e.y/i)}static ScaleWithOrigin(e,t,i){return s.Sub(e,i).mul(t).add(i)}static ToFixed(e,t=2){return new s(+e.x.toFixed(t),+e.y.toFixed(t),+e.z.toFixed(t))}static Nudge(e,t,i){return s.Add(e,s.Tan(t,e).mul(i))}static ToString(e){return`${e.x}, ${e.y}`}static ToAngle(e){let t=Math.atan2(e.y,e.x);return t<0&&(t+=2*Math.PI),t}static ToArray(e){return[e.x,e.y,e.z]}static ToJson(e){const{x:t,y:i,z:n}=e;return{x:t,y:i,z:n}}static Average(e){const t=e.length,i=new s(0,0);for(let n=0;n<t;n++)i.add(e[n]);return i.div(t)}static Clamp(e,t,i){return new s(Math.min(Math.max(e.x,t),i??e.x),Math.min(Math.max(e.y,t),i??e.y))}static PointsBetween(e,t,i=6){const r=[];for(let a=0;a<i;a++){const l=n.easeInQuad(a/(i-1)),c=s.Lrp(e,t,l);c.z=Math.min(1,.5+.65*Math.abs(.5-o(l))),r.push(c)}return r}static SnapToGrid(e,t=8){return new s(Math.round(e.x/t)*t,Math.round(e.y/t)*t)}}const o=e=>e<.5?2*e*e:(4-2*e)*e-1,r=Math.PI,a=r/2,l=2*r,c=Math.PI/180,d=Math.sin;function u(e,t,i){return Math.max(t,void 0!==i?Math.min(e,i):e)}function h(e,t=1e10){return e?Math.round(e*t)/t:0}function p(e,t,i=1e-6){return Math.abs(e-t)<=i}function g(e,t){const i=Math.pow(e-t,2)/Math.pow(e+t,2);return r*(e+t)*(1+3*i/(10+Math.sqrt(4-3*i)))}function m(e){return(e%=l)<0?e+=l:0===e&&(e=0),e}function I(e,t){const i=(t-e)%l;return 2*i%l-i}function f(e,t){return l-I(e,t)}function y(e,t,i){return e+I(e,t)*i}function b(e,t){return I(e,t)}function w(e){return(l+e)%l}function C(e,t){const i=l/t;let n=Math.floor((w(e)+i/2)/i)*i%l;return n<r&&(n+=l),n>r&&(n-=l),n}function M(e,t){return e===t||p(e%(Math.PI/2)-t%(Math.PI/2),0)}function x(e){return e*r/180}function A(e){return 180*e/r}function S(e,t,i,n){const o=function(e,t,i){return b(s.Angle(e,t),s.Angle(e,i))}(e,i,n);return t*l*(o/l)}function v(e,t,i,n){return new s(e+i*Math.cos(n),t+i*Math.sin(n))}function L(e,t,i){const n=e/2,o=t/2,r=[];for(let c=0;c<i;c++){const e=c*(l/i)-a;r.push(new s(n+n*Math.cos(e),o+o*Math.sin(e)))}return r}function j(e,t,i,n){return e<n&&i<t}function N(e,t,i,n){const s=Math.max(e,i),o=Math.min(t,n);return s<=o?[s,o]:null}const D=(e,t,i)=>{const n=l/e/2,s=2*Math.floor(e/4),o=2*e-s,r=2*Math.floor(e/2),c=Math.cos(s*n-a)*t/2,d=Math.cos(o*n-a)*t/2,u=Math.sin(0*n-a)*i/2,h=Math.sin(r*n-a)*i/2;return new W(0,0,c-d,h-u)};function E(e,t,i){return(t.x-e.x)*(i.y-e.y)-(i.x-e.x)*(t.y-e.y)}function k(e,t){let i,n,s=0;for(let o=0;o<t.length;o++)i=t[o],n=t[(o+1)%t.length],i.y<=e.y?n.y>e.y&&E(i,n,e)>0&&(s+=1):n.y<=e.y&&E(i,n,e)<0&&(s-=1);return 0!==s}function Z(e,t,i=8){const n=t.length;for(let o=1;o<n;o++){const n=t[o-1],r=t[o];if(s.DistanceToLineSegment(n,r,e)<i)return!0}return!1}function T(e){return+e.toFixed(4)}class W{constructor(e=0,t=0,i=0,n=0){this.x=e,this.y=t,this.w=i,this.h=n}x=0;y=0;w=0;h=0;get point(){return new s(this.x,this.y)}set point(e){this.x=e.x,this.y=e.y}get minX(){return this.x}set minX(e){this.x=e}get midX(){return this.x+this.w/2}get maxX(){return this.x+this.w}get minY(){return this.y}set minY(e){this.y=e}get midY(){return this.y+this.h/2}get maxY(){return this.y+this.h}get width(){return this.w}set width(e){this.w=e}get height(){return this.h}set height(e){this.h=e}get aspectRatio(){return this.width/this.height}get center(){return new s(this.midX,this.midY)}set center(e){this.minX=e.x-this.width/2,this.minY=e.y-this.height/2}get corners(){return[new s(this.minX,this.minY),new s(this.maxX,this.minY),new s(this.maxX,this.maxY),new s(this.minX,this.maxY)]}get snapPoints(){return[new s(this.minX,this.minY),new s(this.maxX,this.minY),new s(this.maxX,this.maxY),new s(this.minX,this.maxY),this.center]}get sides(){const{corners:e}=this;return[[e[0],e[1]],[e[1],e[2]],[e[2],e[3]],[e[3],e[0]]]}get size(){return new s(this.w,this.h)}toFixed(){return this.x=h(this.x),this.y=h(this.y),this.w=h(this.w),this.h=h(this.h),this}setTo(e){return this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h,this}set(e=0,t=0,i=0,n=0){return this.x=e,this.y=t,this.w=i,this.h=n,this}expand(e){const t=Math.min(this.minX,e.minX),i=Math.min(this.minY,e.minY),n=Math.max(this.maxX,e.maxX),s=Math.max(this.maxY,e.maxY);return this.x=t,this.y=i,this.w=n-t,this.h=s-i,this}expandBy(e){return this.x-=e,this.y-=e,this.w+=2*e,this.h+=2*e,this}scale(e){return this.x/=e,this.y/=e,this.w/=e,this.h/=e,this}clone(){const{x:e,y:t,w:i,h:n}=this;return new W(e,t,i,n)}translate(e){return this.x+=e.x,this.y+=e.y,this}snapToGrid(e){const t=Math.round(this.minX/e)*e,i=Math.round(this.minY/e)*e,n=Math.round(this.maxX/e)*e,s=Math.round(this.maxY/e)*e;this.minX=t,this.minY=i,this.width=Math.max(1,n-t),this.height=Math.max(1,s-i)}collides(e){return W.Collides(this,e)}contains(e){return W.Contains(this,e)}includes(e){return W.Includes(this,e)}containsPoint(e,t){return W.ContainsPoint(this,e,t)}getHandlePoint(e){switch(e){case"top_left":return new s(this.minX,this.minY);case"top_right":return new s(this.maxX,this.minY);case"bottom_left":return new s(this.minX,this.maxY);case"bottom_right":return new s(this.maxX,this.maxY);case"top":return new s(this.midX,this.minY);case"right":return new s(this.maxX,this.midY);case"bottom":return new s(this.midX,this.maxY);case"left":return new s(this.minX,this.midY)}}toJson(){return{x:this.minX,y:this.minY,w:this.w,h:this.h}}resize(e,t,i){const{minX:n,minY:s,maxX:o,maxY:r}=this;let{minX:a,minY:l,maxX:c,maxY:d}=this;switch(e){case"left":case"top_left":case"bottom_left":a+=t;break;case"right":case"top_right":case"bottom_right":c+=t}switch(e){case"top":case"top_left":case"top_right":l+=i;break;case"bottom":case"bottom_left":case"bottom_right":d+=i}if((c-a)/(o-n)<0){const e=c;c=a,a=e}if((d-l)/(r-s)<0){const e=d;d=l,l=e}this.minX=a,this.minY=l,this.width=Math.abs(c-a),this.height=Math.abs(d-l)}static From(e){return new W(e.x,e.y,e.w,e.h)}static FromPoints(e){if(0===e.length)return new W;let t,i=1/0,n=1/0,s=-1/0,o=-1/0;for(let r=0,a=e.length;r<a;r++)t=e[r],i=Math.min(t.x,i),n=Math.min(t.y,n),s=Math.max(t.x,s),o=Math.max(t.y,o);return new W(i,n,s-i,o-n)}static Expand(e,t){const i=Math.min(t.minX,e.minX),n=Math.min(t.minY,e.minY),s=Math.max(t.maxX,e.maxX),o=Math.max(t.maxY,e.maxY);return new W(i,n,s-i,o-n)}static ExpandBy(e,t){return new W(e.minX-t,e.minY-t,e.width+2*t,e.height+2*t)}static Collides=(e,t)=>!(e.maxX<t.minX||e.minX>t.maxX||e.maxY<t.minY||e.minY>t.maxY);static Contains=(e,t)=>e.minX<t.minX&&e.minY<t.minY&&e.maxY>t.maxY&&e.maxX>t.maxX;static Includes=(e,t)=>W.Collides(e,t)||W.Contains(e,t);static ContainsPoint=(e,t,i)=>"number"==typeof t?!(t<e.minX||i<e.minY||t>e.maxX||i>e.maxY):!(t.x<e.minX||t.y<e.minY||t.x>e.maxX||t.y>e.maxY);static Common=e=>{let t=1/0,i=1/0,n=-1/0,s=-1/0;for(let o=0;o<e.length;o++){const r=e[o];t=Math.min(t,r.minX),i=Math.min(i,r.minY),n=Math.max(n,r.maxX),s=Math.max(s,r.maxY)}return new W(t,i,n-t,s-i)};static Sides=(e,t=0)=>{const{corners:i}=e;return[[i[0],i[1]],[i[1],i[2]],[i[2],i[3]],[i[3],i[0]]]};static Resize(e,t,i,n,s=!1){const{minX:o,minY:r,maxX:a,maxY:l}=e;let{minX:c,minY:d,maxX:u,maxY:h}=e;switch(t){case"left":case"top_left":case"bottom_left":c+=i;break;case"right":case"top_right":case"bottom_right":u+=i}switch(t){case"top":case"top_left":case"top_right":d+=n;break;case"bottom":case"bottom_left":case"bottom_right":h+=n}const p=(u-c)/(a-o),g=(h-d)/(l-r),m=p<0,I=g<0;if(s){const e=(a-o)/(l-r),i=Math.abs(u-c),n=Math.abs(h-d),s=i*(g<0?1:-1)*(1/e),m=n*(p<0?1:-1)*e,I=e<i/n;switch(t){case"top_left":I?d=h+s:c=u+m;break;case"top_right":I?d=h+s:u=c-m;break;case"bottom_right":I?h=d-s:u=c-m;break;case"bottom_left":I?h=d-s:c=u+m;break;case"bottom":case"top":{const t=(c+u)/2,i=n*e;c=t-i/2,u=t+i/2;break}case"left":case"right":{const t=(d+h)/2,n=i/e;d=t-n/2,h=t+n/2;break}}}if(m){const e=u;u=c,c=e}if(I){const e=h;h=d,d=e}const f=new W(c,d,Math.abs(u-c),Math.abs(h-d));return{box:f,scaleX:+(f.width/e.width*(p>0?1:-1)).toFixed(5),scaleY:+(f.height/e.height*(g>0?1:-1)).toFixed(5)}}equals(e){return W.Equals(this,e)}static Equals(e,t){return t.x===e.x&&t.y===e.y&&t.w===e.w&&t.h===e.h}}function z(e){switch(e){case"top":return"bottom";case"bottom":return"top";case"top_left":return"bottom_left";case"top_right":return"bottom_right";case"bottom_left":return"top_left";case"bottom_right":return"top_right";default:return e}}function P(e){switch(e){case"left":return"right";case"right":return"left";case"top_left":return"top_right";case"top_right":return"top_left";case"bottom_left":return"bottom_right";case"bottom_right":return"bottom_left";default:return e}}function Y(e){return"top_left"===e||"top_right"===e||"bottom_right"===e||"bottom_left"===e}class O{constructor(e){this._values=e}_values;_computed={};get values(){return this._values}set values(e){this._values=e,this._computed={}}get length(){if(void 0!==this._computed.length)return this._computed.length;const{lut:e}=this;let t=e[0],i=0;for(let n=1;n<e.length;n++){const s=e[n];i+=t.dist(s),t=s}return this._computed.length=i,i}get bounds(){if(void 0!==this._computed.bounds)return this._computed.bounds;let e=1/0,t=1/0,i=-1/0,n=-1/0;const{lut:s}=this;for(const r of s)e=Math.min(r.x,e),t=Math.min(r.y,t),i=Math.max(r.x,i),n=Math.max(r.y,n);const o=new W(e,t,i-e,n-t);return this._computed.bounds=o,o}get lut(){if(this._computed.lut)return this._computed.lut;const{p:e}=this.values,t=[];for(let i=0;i<e+1;i++)t.push(this.getPoint(i/e));return this._computed.lut=t,t}get midPoint(){if(this._computed.midPoint)return this._computed.midPoint;const e=this.getPoint(.5);return this._computed.midPoint=e,e}get path(){if(this._computed.path)return this._computed.path;const e=this.getPath();return this._computed.path=e,e}getPointAtLength(e){const t=Math.max(0,Math.min(1,e/this.length));return this.getPoint(t)}getNormal(e){return this.getPoint(e-.0025).tan(this.getPoint(e+.0025)).per().uni().toFixed()}getNormalAtLength(e){return this.getNormal(e/this.length)}getClosestPointTo(e){const{lut:t}=this;let i=0,n=t[0],o=t[0].dist(e);for(let a=1;a<t.length;a++){const r=s.Dist(t[a],e);r<o&&(o=r,n=t[a],i=a/t.length)}const r=1/this.values.p;for(let a=Math.max(0,i-r/2);a<Math.min(1,i+r/2);a+=r/10){const t=this.getPoint(a),i=s.Dist(t,e);i<o&&(o=i,n=t)}return{point:n,distance:o}}update(e){this._computed={},this.values={...this.values,...e}}}class R extends O{constructor(e,t,i,n,s=25){super({a:e,b:t,c:i,d:n,p:s})}[Symbol.iterator]=function*(){const{a:e,b:t,c:i,d:n}=this.values;yield*[e,t,i,n]};getPath(e=!0){const{a:t,b:i,c:n,d:o}=this.values;return s.Equals(t,o)?"":`${e?`M${t.x.toFixed(2)},${t.y.toFixed(2)}C`:""}${i.x.toFixed(2)},${i.y.toFixed(2)} ${n.x.toFixed(2)},${n.y.toFixed(2)} ${o.x.toFixed(2)},${o.y.toFixed(2)}`}getPoint(e){const{a:t,b:i,c:n,d:o}=this.values;return new s((1-e)*(1-e)*(1-e)*t.x+(1-e)*(1-e)*3*e*i.x+3*(1-e)*(e*e)*n.x+e*e*e*o.x,(1-e)*(1-e)*(1-e)*t.y+(1-e)*(1-e)*3*e*i.y+3*(1-e)*(e*e)*n.y+e*e*e*o.y)}getX(e){const{a:t,b:i,c:n,d:s}=this.values;return(1-e)*(1-e)*(1-e)*t.x+(1-e)*(1-e)*3*e*i.x+3*(1-e)*(e*e)*n.x+e*e*e*s.x}getY(e){const{a:t,b:i,c:n,d:s}=this.values;return(1-e)*(1-e)*(1-e)*t.y+(1-e)*(1-e)*3*e*i.y+3*(1-e)*(e*e)*n.y+e*e*e*s.y}}class G{constructor(e,t=50,i=1){this.points=e,this.p=t,this.k=i}computed={};get length(){if(void 0!==this.computed.length)return this.computed.length;const{segments:e}=this,t=e.reduce(((e,t)=>e+t.length),0);return this.computed.length=t,t}get bounds(){if(void 0!==this.computed.bounds)return this.computed.bounds;const{segments:e}=this,t=W.Common(e.map((e=>e.bounds)));return this.computed.bounds=t,t}get head(){const{points:e}=this;return e[0]}get tail(){const{points:e}=this;return e[e.length-1]}get path(){if(void 0!==this.computed.path)return this.computed.path;const e=this.segments.map((e=>e.path)).filter((e=>null!=e&&""!==e)).join(" ");return this.computed.path=e,e}addPoint(e){const{points:t,k:i,p:n}=this;return t.push(e),this.computed={},this.getSegmentsFromPoints(this.points,n,i),this}removePoint(e){const{points:t,k:i,p:n}=this,s="number"==typeof e?Math.floor(e):t.indexOf(e);return-1===s||(t.splice(s,1),this.computed={},this.getSegmentsFromPoints(this.points,n,i)),this}getPointAtLength(e){const{segments:t}=this;let i=e;if(e<=0)return t[0].getPoint(0);if(e>=this.length)return t[t.length-1].getPoint(1);for(let n=0;n<t.length;n++){const e=t[n],{length:s}=e;if(i<s)return e.getPoint(i/s);i-=e.length}return t[t.length-1].getPoint(1)}getPoint(e){return e<=0?this.segments[0].getPoint(0):e>=1?this.segments[this.segments.length-1].getPoint(1):this.getPointAtLength(e*this.length)}getNormal(e){const{length:t}=this;return this.getNormalAtLength(e*t)}getNormalAtLength(e){const{segments:t}=this;if(e<0)return new s(0,0);let i=e;for(const n of t){const e=n.length;if(i<=e)return n.getNormal(i/e);i-=e}return new s(0,0)}getClosestPointTo(e){const{head:t,segments:i}=this;let n=t,o=s.Dist(e,t);for(const s of i){const t=s.getClosestPointTo(e);t.distance<o&&(o=t.distance,n=t.point)}return{point:n,distance:o}}}class _ extends G{constructor(e,t=1.2,i=20){super(e,t,i),this.segments=this.getSegmentsFromPoints(e,t,i)}segments;getSegmentsFromPoints(e,t=1.25,i=20){const n=e.length,o=n-2,r=[];for(let a=0;a<n-1;a++){const n=0===a?e[0]:e[a-1],l=e[a],c=e[a+1],d=a===o?c:e[a+2];r.push(new R(l,0===a?n:new s(l.x+(c.x-n.x)/6*t,l.y+(c.y-n.y)/6*t),a===o?c:new s(c.x-(d.x-l.x)/6*t,c.y-(d.y-l.y)/6*t),c,i))}return r}static FromPoints(e){return new _(e)}}class B extends O{constructor(e,t,i=2){super({a:e,b:t,p:i}),this.a=e,this.b=t,this.values.p=Math.max(10,Math.ceil(this.length/20))}get length(){return s.Dist(this.a,this.b)}get tangent(){return s.Tan(this.a,this.b)}get angle(){return s.Angle(this.a,this.b)}get bounds(){return W.FromPoints([this.a,this.b])}getX(e){const{a:t,b:i}=this.values;return t.x+(i.x-t.x)*e}getY(e){const{a:t,b:i}=this.values;return t.y+(i.y-t.y)*e}getPoint(e){const{a:t,b:i}=this.values;return s.Lrp(t,i,e)}getPath(e=!0){const{a:t,b:i}=this.values;return s.Equals(t,i)?"":e?`M${t.x},${t.y}L${i.x},${i.y}`:`${i.x},${i.y}`}getNormal(){const{a:e,b:t}=this.values;return s.Sub(e,t).per().uni().toFixed()}getClosestPointTo(e){const{a:t,b:i}=this.values,n=s.NearestPointOnLineSegment(t,i,e),o=n.dist(e);return{point:n,distance:o}}static Length(e){return s.Dist(e.a,e.b)}static Tangent(e){return s.Tan(e.a,e.b)}static Angle(e){return s.Angle(e.a,e.b)}}class J{constructor(e,t,i,n,s,o){this.a=e,this.b=t,this.c=i,this.d=n,this.e=s,this.f=o}a=1;b=0;c=0;d=1;e=0;f=0;equals(e){return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}multiply(e){const t=e,{a:i,b:n,c:s,d:o,e:r,f:a}=this;return this.a=i*t.a+s*t.b,this.c=i*t.c+s*t.d,this.e=i*t.e+s*t.f+r,this.b=n*t.a+o*t.b,this.d=n*t.c+o*t.d,this.f=n*t.e+o*t.f+a,this}rotate(e,t,i){return 0===e?this:void 0===t?this.multiply(J.Rotate(e)):this.translate(t,i).multiply(J.Rotate(e)).translate(-t,-i)}translate(e,t){return this.multiply(J.Translate(e,t))}scale(e,t){return this.multiply(J.Scale(e,t))}invert(){const{a:e,b:t,c:i,d:n,e:s,f:o}=this,r=e*n-t*i;return this.a=n/r,this.b=t/-r,this.c=i/-r,this.d=e/r,this.e=(n*s-i*o)/-r,this.f=(t*s-e*o)/r,this}applyToPoint(e){return J.applyToPoint(this,e)}applyToPoints(e){return J.applyToPoints(this,e)}decomposed(){return J.Decompose(this)}toCssString(){return J.toCssString(this)}setTo(e){return Object.assign(this,e),this}decompose(){return J.Decompose(this)}clone(){return new J(this.a,this.b,this.c,this.d,this.e,this.f)}static Identity(){return new J(1,0,0,1,0,0)}static Translate(e,t){return new J(1,0,0,1,e,t)}static Rotate(e,t,i){if(0===e)return J.Identity();const n=Math.cos(e),s=Math.sin(e),o=new J(n,s,-s,n,0,0);return void 0===t?o:J.Compose(J.Translate(t,i),o,J.Translate(-t,-i))}static Scale=(e,t,i,n)=>{const s=new J(e,0,0,0,t,0);return void 0===i?s:J.Compose(J.Translate(i,n),s,J.Translate(-i,-n))};static Multiply(e,t){return{a:e.a*t.a+e.c*t.b,c:e.a*t.c+e.c*t.d,e:e.a*t.e+e.c*t.f+e.e,b:e.b*t.a+e.d*t.b,d:e.b*t.c+e.d*t.d,f:e.b*t.e+e.d*t.f+e.f}}static Inverse(e){const t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:e.b/-t,c:e.c/-t,d:e.a/t,e:(e.d*e.e-e.c*e.f)/-t,f:(e.b*e.e-e.a*e.f)/t}}static Absolute(e){const t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:e.b/-t,c:e.c/-t,d:e.a/t,e:(e.d*e.e-e.c*e.f)/t,f:(e.b*e.e-e.a*e.f)/-t}}static Compose(...e){const t=J.Identity();for(let i=0,n=e.length;i<n;i++)t.multiply(e[i]);return t}static Decompose(e){let t,i,n;if(0!==e.a||0!==e.c){const s=Math.hypot(e.a,e.c);t=s,i=(e.a*e.d-e.b*e.c)/s,n=Math.acos(e.a/s)*(e.c>0?-1:1)}else if(0!==e.b||0!==e.d){const s=Math.hypot(e.b,e.d);t=(e.a*e.d-e.b*e.c)/s,i=s,n=a+Math.acos(e.b/s)*(e.d>0?-1:1)}else t=0,i=0,n=0;return{x:e.e,y:e.f,scaleX:t,scaleY:i,rotation:w(n)}}static Smooth(e,t=1e10){return e.a=Math.round(e.a*t)/t,e.b=Math.round(e.b*t)/t,e.c=Math.round(e.c*t)/t,e.d=Math.round(e.d*t)/t,e.e=Math.round(e.e*t)/t,e.f=Math.round(e.f*t)/t,e}static toCssString(e){return`matrix(${T(e.a)}, ${T(e.b)}, ${T(e.c)}, ${T(e.d)}, ${T(e.e)}, ${T(e.f)})`}static applyToPoint(e,t){return new s(e.a*t.x+e.c*t.y+e.e,e.b*t.x+e.d*t.y+e.f,t.z)}static applyToXY(e,t,i){return[e.a*t+e.c*i+e.e,e.b*t+e.d*i+e.f]}static applyToPoints(e,t){return t.map((t=>new s(e.a*t.x+e.c*t.y+e.e,e.b*t.x+e.d*t.y+e.f,t.z)))}static applyToBounds(e,t){return new W(e.e+t.minX,e.f+t.minY,t.width,t.height)}static From(e){return new J(e.a,e.b,e.c,e.d,e.e,e.f)}}class H extends G{constructor(e,t=1.2,i=20){super(e,t,i),this.segments=this.getSegmentsFromPoints(e,i)}segments;getSegmentsFromPoints(e,t=50){const i=[];for(let n=0;n<e.length-1;n++)i.push(new B(e[n],e[n+1],t));return i}static FromPoints(e){return new H(e)}}const{PI:V}=Math,U=V+1e-4;function X(e,t={}){const{size:i=16,smoothing:n=.5,start:o={},end:r={},last:a=!1}=t,{cap:l=!0}=o,{cap:c=!0}=r;if(0===e.length||i<=0)return[];const d=e[0],u=e[e.length-1],h=u.runningLength,p=!1===o.taper?0:!0===o.taper?Math.max(i,h):o.taper,g=!1===r.taper?0:!0===r.taper?Math.max(i,h):r.taper,m=Math.pow(i*n,2),I=[],f=[];let y,b=e[0].vector,w=e[0].point,C=w,M=w,x=C,A=!1;for(let D=0;D<e.length;D++){y=e[D];const{point:t,vector:i}=e[D],n=y.vector.dpr(b),o=(D<e.length-1?e[D+1]:e[D]).vector,r=D<e.length-1?o.dpr(y.vector):1,a=null!==r&&r<.2;if(n<0&&!A||a){if(r>-.62&&h-y.runningLength>y.radius){const e=b.clone().mul(y.radius);b.clone().cpr(o)<0?(M=s.Add(t,e),x=s.Sub(t,e)):(M=s.Sub(t,e),x=s.Add(t,e)),I.push(M),f.push(x)}else{const e=b.clone().mul(y.radius).per(),t=s.Sub(y.input,e);for(let i=1/13,n=0;n<1;n+=i)M=s.RotWith(t,y.input,U*n),I.push(M),x=s.RotWith(t,y.input,U+U*-n),f.push(x)}w=M,C=x,a&&(A=!0);continue}if(A=!1,y===d||y===u){const e=s.Per(i).mul(y.radius);I.push(s.Sub(t,e)),f.push(s.Add(t,e));continue}const l=s.Lrp(o,i,r).per().mul(y.radius);M=s.Sub(t,l),(D<=1||s.Dist2(w,M)>m)&&(I.push(M),w=M),x=s.Add(t,l),(D<=1||s.Dist2(C,x)>m)&&(f.push(x),C=x),b=i}const S=d.point,v=e.length>1?e[e.length-1].point:s.AddXY(d.point,1,1);if(1===e.length&&(!p&&!g||a)){const e=s.Add(S,s.Sub(S,v).uni().per().mul(-d.radius)),t=[];for(let i=1/13,n=i;n<=1;n+=i)t.push(s.RotWith(e,S,2*U*n));return t}const L=[];if(p||g&&1===e.length);else if(l)for(let D=1/8,E=D;E<=1;E+=D){const e=s.RotWith(f[0],S,U*E);L.push(e)}else{const e=s.Sub(I[0],f[0]),t=s.Mul(e,.5),i=s.Mul(e,.51);L.push(s.Sub(S,t),s.Sub(S,i),s.Add(S,i),s.Add(S,t))}const j=[],N=u.vector.clone().per().neg();if(g||p&&1===e.length)j.push(v);else if(c){const e=s.Add(v,s.Mul(N,u.radius));for(let t=1/29,i=t;i<1;i+=t)j.push(s.RotWith(e,v,3*U*i))}else j.push(s.Add(v,s.Mul(N,u.radius)),s.Add(v,s.Mul(N,.99*u.radius)),s.Sub(v,s.Mul(N,.99*u.radius)),s.Sub(v,s.Mul(N,u.radius)));return I.concat(j,f.reverse(),L)}const F=.025,K=.01;function Q(e,t={}){const{streamline:i=.5,size:n=16,simulatePressure:o=!1}=t;if(0===e.length)return[];const r=.15+.85*(1-i);let a=e.map(s.From),l=0;if(!o){let e=a[0];for(;e&&!(e.z>=F);)a.shift(),e=a[0]}if(!o){let e=a[a.length-1];for(;e&&!(e.z>=K);)a.pop(),e=a[a.length-1]}if(0===a.length)return[{point:s.From(e[0]),input:s.From(e[0]),pressure:o?.5:.15,vector:new s(1,1),distance:0,runningLength:0,radius:1}];let c=a[1];for(;c&&!(s.Dist(c,a[0])>n/3);)a[0].z=Math.max(a[0].z,c.z),a.splice(1,1),c=a[1];const d=a.pop();for(c=a[a.length-1];c&&!(s.Dist(c,d)>n/3);)a.pop(),c=a[a.length-1],l++;a.push(d);const u=t.last||!t.simulatePressure||a.length>1&&s.Dist(a[a.length-1],a[a.length-2])<n||l>0;if(2===a.length&&t.simulatePressure){const e=a[1];a=a.slice(0,-1);for(let t=1;t<5;t++){const i=s.Lrp(a[0],e,t/4);i.z=(a[0].z+(e.z-a[0].z))*t/4,a.push(i)}}const h=[{point:a[0],input:a[0],pressure:o?.5:a[0].z,vector:new s(1,1),distance:0,runningLength:0,radius:1}];let p,g,m=0,I=h[0];u&&i>0&&a.push(a[a.length-1].clone());for(let f=1,y=a.length;f<y;f++)p=!r||t.last&&f===y-1?a[f].clone():a[f].clone().lrp(I.point,1-r),I.point.equals(p)||(g=s.Dist(p,I.point),m+=g,f<4&&m<n||(I={input:a[f],point:p,pressure:o?.5:a[f].z,vector:s.Sub(I.point,p).uni(),distance:g,runningLength:m,radius:1},h.push(I)));if(h[1]?.vector&&(h[0].vector=h[1].vector.clone()),m<1){const e=Math.max(.5,...h.map((e=>e.pressure)));h.forEach((t=>t.pressure=e))}return h}const{min:$}=Math,q=.275;function ee(e,t){const{size:i=16,thinning:s=.5,simulatePressure:o=!0,easing:r=(e=>e),start:a={},end:l={}}=t,{easing:c=n.easeOutQuad}=a,{easing:d=n.easeOutCubic}=l,u=e[e.length-1].runningLength;let h,p,g=e[0].pressure;if(!o&&u<i){const t=e.reduce(((e,t)=>Math.max(e,t.pressure)),.5);return e.forEach((e=>{e.pressure=t,e.radius=i*r(.5-s*(.5-e.pressure))})),e}{let t;for(let n=0,s=e.length;n<s&&(p=e[n],!(p.runningLength>5*i));n++){const e=$(1,p.distance/i);if(o){const i=$(1,1-e);t=$(1,g+e*q*(i-g))}else t=$(1,g+.5*(p.pressure-g));g+=.5*(t-g)}for(let n=0;n<e.length;n++){if(p=e[n],s){let{pressure:e}=p;const t=$(1,p.distance/i);if(o){const i=$(1,1-t);e=$(1,g+t*q*(i-g))}else e=$(1,g+t*q*(e-g));p.radius=i*r(.5-s*(.5-e)),g=e}else p.radius=i/2;void 0===h&&(h=p.radius)}}const m=!1===a.taper?0:!0===a.taper?Math.max(i,u):a.taper,I=!1===l.taper?0:!0===l.taper?Math.max(i,u):l.taper;if(m||I)for(let n=0;n<e.length;n++){p=e[n];const{runningLength:t}=p,i=t<m?c(t/m):1,s=u-t<I?d((u-t)/I):1;p.radius=Math.max(.01,p.radius*Math.min(i,s))}return e}function te(e,t={}){return X(ee(Q(e,t),t),t)}function ie(e,t,i,n){const o=e.x-i.x,r=e.y-i.y,a=n.x-i.x,l=n.y-i.y,c=t.x-e.x,d=t.y-e.y,u=a*r-l*o,h=c*r-d*o,p=l*c-a*d;if(0===u||0===h)return null;if(0===p)return null;if(0!==p){const t=u/p,i=h/p;if(0<=t&&t<=1&&0<=i&&i<=1)return s.AddXY(e,t*c,t*d)}return null}function ne(e,t,i,n){const o=(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y),r=2*((t.x-e.x)*(e.x-i.x)+(t.y-e.y)*(e.y-i.y)),a=r*r-4*o*(i.x*i.x+i.y*i.y+e.x*e.x+e.y*e.y-2*(i.x*e.x+i.y*e.y)-n*n);if(a<0)return null;if(0===a)return null;const l=Math.sqrt(a),c=(-r+l)/(2*o),d=(-r-l)/(2*o);if((c<0||c>1)&&(d<0||d>1))return null;const u=[];return 0<=c&&c<=1&&u.push(s.Lrp(e,t,c)),0<=d&&d<=1&&u.push(s.Lrp(e,t,d)),0===u.length?null:u}function se(e,t,i){const n=[];let s;for(let o=0,r=i.length-1;o<r;o++)s=ie(e,t,i[o],i[o+1]),s&&n.push(s);return 0===n.length?null:n}function oe(e,t,i){const n=[];let s;for(let o=1,r=i.length;o<r+1;o++)s=ie(e,t,i[o-1],i[o%i.length]),s&&n.push(s);return 0===n.length?null:n}function re(e,t,i,n){let o=i.x-e.x,r=i.y-e.y;const a=Math.sqrt(o*o+r*r),l=(a*a-n*n+t*t)/(2*a),c=Math.sqrt(t*t-l*l);return o/=a,r/=a,[new s(e.x+o*l-r*c,e.y+r*l+o*c),new s(e.x+o*l+r*c,e.y+r*l-o*c)]}function ae(e,t,i){const n=[];let s,o,r;for(let a=0,l=i.length;a<l;a++)s=i[a],o=i[(a+1)%i.length],r=ne(s,o,e,t),r&&n.push(...r);return 0===n.length?null:n}function le(e,t,i){const n=[];let s,o,r;for(let a=1,l=i.length;a<l;a++)s=i[a-1],o=i[a],r=ne(s,o,e,t),r&&n.push(...r);return 0===n.length?null:n}function ce(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function de(e,t,i,n){return ce(e,i,n)!==ce(t,i,n)&&ce(e,t,i)!==ce(e,t,n)}function ue(e,t){const i=[];let n,o,r,a;for(let s=0,l=e.length;s<l;s++)n=e[s],k(n,t)&&i.push(n);for(let s=0,l=t.length;s<l;s++)n=t[s],k(n,e)&&i.push(n);for(let s=0,l=e.length;s<l;s++){n=e[s],o=e[(s+1)%e.length];for(let e=0,s=t.length;e<s;e++){r=t[e],a=t[(e+1)%t.length];const s=ie(n,o,r,a);null!==s&&i.push(s)}}return 0===i.length?null:function(e){const t=s.Average(e);return e.sort(((e,i)=>s.Angle(t,e)-s.Angle(t,i)))}(i)}function he(e,t){let i,n,s,o;for(let r=0,a=e.length;r<a;r++){i=e[r],n=e[(r+1)%a];for(let e=0,r=t.length;e<r;e++)if(s=t[e],o=t[(e+1)%r],de(i,n,s,o))return!0}return!1}},879978:(e,t,i)=>{"use strict";var n=i(746518),s=i(969565),o=i(179504),r=i(567750),a=i(194901),l=i(964117),c=i(160788),d=i(500655),u=i(655966),h=i(461034),p=i(802478),g=i(978227),m=i(996395),I=g("replace"),f=TypeError,y=o("".indexOf),b=o("".replace),w=o("".slice),C=Math.max;n({target:"String",proto:!0},{replaceAll:function(e,t){var i,n,o,g,M,x,A,S,v,L,j=r(this),N=0,D="";if(!l(e)){if((i=c(e))&&(n=d(r(h(e))),!~y(n,"g")))throw new f("`.replaceAll` does not allow non-global regexes");if(o=u(e,I))return s(o,e,j,t);if(m&&i)return b(d(j),e,t)}for(g=d(j),M=d(e),(x=a(t))||(t=d(t)),A=M.length,S=C(1,A),v=y(g,M);-1!==v;)L=x?d(t(M,v,g)):p(M,g,v,[],void 0,t),D+=w(g,N,v)+L,N=v+A,v=v+S>g.length?-1:y(g,M,v+S);return N<g.length&&(D+=w(g,N)),D}})},904676:(e,t,i)=>{"use strict";i.d(t,{Z:()=>Ri});const n=i.p+"drawing/codepen-2ffa5c13753de62e.png",s=i.p+"drawing/codesandbox-bcee9dfd4ed3a23b.png",o=i.p+"drawing/excalidraw-baf8d3b936b5dab4.png",r=i.p+"drawing/felt-c02f36622f4ebfb2.png",a=i.p+"drawing/figma-c12fc04b78ec622e.png",l=i.p+"drawing/github_gist-4ec71d64697aff9e.png",c=i.p+"drawing/google_calendar-acdd964c8de92f28.png",d=i.p+"drawing/google_maps-38161febcdf979ea.png",u=i.p+"drawing/google_slides-8b6c9beef8285ba4.png",h=i.p+"drawing/observable-cb2a3bcbcfd87256.png",p=i.p+"drawing/replit-05be412bf2da35c5.png",g=i.p+"drawing/scratch-71114287ee1728fb.png",m=i.p+"drawing/spotify-68ebd50cf322806e.png",I=i.p+"drawing/tldraw-1cca1b7e66d3482b.png",f=i.p+"drawing/vimeo-b9164a4078dbbbf9.png",y=i.p+"drawing/youtube-b5daf3abc5b1d056.png",b=i.p+"drawing/IBMPlexMono-Medium-2ebb03f221700c9b.woff2",w=i.p+"drawing/IBMPlexSans-Medium-ca3046f66b97fb2a.woff2",C=i.p+"drawing/IBMPlexSerif-Medium-493712db4062284b.woff2",M=i.p+"drawing/Shantell_Sans-Normal-SemiBold-1eb412157cea7761.woff2",x="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTE4IDVhMSAxIDAgMCAwLTEtMWgtNGExIDEgMCAwIDAtMSAxdjIzSDNhMSAxIDAgMSAwIDAgMmgyNGExIDEgMCAxIDAgMC0yaC05VjVaIi8+PC9zdmc+",A="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTIgMTNhMSAxIDAgMCAxIDEtMWgyNGExIDEgMCAwIDEgMSAxdjRhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTF2LTRaIi8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTE0IDNhMSAxIDAgMSAxIDIgMHYyNGExIDEgMCAwIDEtMiAwVjNaIi8+PC9zdmc+",S="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEzIDJhMSAxIDAgMCAwLTEgMXYxMUgzYTEgMSAwIDEgMCAwIDJoOXYxMWExIDEgMCAwIDAgMSAxaDRhMSAxIDAgMCAwIDEtMVYxNmg5YTEgMSAwIDAgMCAwLTJoLTlWM2ExIDEgMCAwIDAtMS0xaC00WiIvPjwvc3ZnPg==",v="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTAgM2ExIDEgMCAwIDEgMiAwdjI0YTEgMSAwIDEgMS0yIDBWM1oiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMCAxMmgyNWExIDEgMCAwIDEgMSAxdjRhMSAxIDAgMCAxLTEgMUgwdi02WiIvPjwvc3ZnPg==",L="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTQgMTNhMSAxIDAgMCAxIDEtMWgyNXY2SDVhMSAxIDAgMCAxLTEtMXYtNFoiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMjggM2ExIDEgMCAxIDEgMiAwdjI0YTEgMSAwIDAgMS0yIDBWM1oiLz48L3N2Zz4=",j="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTMgMGExIDEgMCAxIDAgMCAyaDl2MjNhMSAxIDAgMCAwIDEgMWg0YTEgMSAwIDAgMCAxLTFWMmg5YTEgMSAwIDEgMCAwLTJIM1oiLz48L3N2Zz4=",N="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEyLjUgMjEuNSA2IDE1bTAgMCA2LjUtNi41TTYgMTVoMTgiLz48L3N2Zz4=",D="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEgMTVoMjZNMTMgMjZsMTYtMTFMMTMgNCIvPjwvc3ZnPg==",E="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEgMTVoMjhtMCAwVjJtMCAxM3YxMyIvPjwvc3ZnPg==",k="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Im0xOC40MTQgMy44MjggOS45IDkuOWEyIDIgMCAwIDEgMCAyLjgyOGwtOS45IDkuOWEyIDIgMCAwIDEtMi44MjggMGwtOS45LTkuOWEyIDIgMCAwIDEgMC0yLjgyOGw5LjktOS45YTIgMiAwIDAgMSAyLjgyOCAwWiIvPjxwYXRoIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xIDE1aDQiLz48L3N2Zz4=",Z="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yOSAxNWMwIDYuMDc1LTQuOTI1IDExLTExIDExUzcgMjEuMDc1IDcgMTUgMTEuOTI1IDQgMTggNHMxMSA0LjkyNSAxMSAxMVoiLz48cGF0aCBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMSAxNWg1Ii8+PC9zdmc+",T="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEgMTVoMjgiLz48L3N2Zz4=",W="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEgMTVoNG0zIDEyaDE4YTMgMyAwIDAgMCAzLTNWNmEzIDMgMCAwIDAtMy0zSDhhMyAzIDAgMCAwLTMgM3YxOGEzIDMgMCAwIDAgMyAzWiIvPjwvc3ZnPg==",z="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEgMTRhMSAxIDAgMSAwIDAgMnYtMlpNMjkgMmgxYTEgMSAwIDAgMC0xLjU4NS0uODFMMjkgMlptMCAyNi0uNTg1LjgxQTEgMSAwIDAgMCAzMCAyOGgtMVpNMSAxNmgxMHYtMkgxdjJaTTI4IDJ2MjZoMlYyaC0yWm0xLjU4NSAyNS4xOS0xOC0xMy0xLjE3IDEuNjIgMTggMTMgMS4xNy0xLjYyWm0tMTgtMTEuMzggMTgtMTMtMS4xNy0xLjYyLTE4IDEzIDEuMTcgMS42MloiLz48L3N2Zz4=",P="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEgMTUuMTU0aDEwLjY5Mm0xLTExLjY5MnYyMy4wNzZMMjguODQ2IDE1IDEyLjY5MiAzLjQ2MloiLz48L3N2Zz4=",Y="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTE1IDhhMSAxIDAgMSAwIDAtMiAxIDEgMCAwIDAgMCAyWk0xNiAxMWExIDEgMCAxIDEtMiAwIDEgMSAwIDAgMSAyIDBaTTE1IDE2YTEgMSAwIDEgMCAwLTIgMSAxIDAgMCAwIDAgMlpNMjAgMTVhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwWk0yMyAxNmExIDEgMCAxIDAgMC0yIDEgMSAwIDAgMCAwIDJaIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMiAzLjVBMS41IDEuNSAwIDAgMSAzLjUgMmgyM0ExLjUgMS41IDAgMCAxIDI4IDMuNXYyM2ExLjUgMS41IDAgMCAxLTEuNSAxLjVoLTIzQTEuNSAxLjUgMCAwIDEgMiAyNi41di0yM1pNNCAyNlY0aDIydjIySDRaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=",O="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTUgMjcuNWMwLTcuMiAzLjgtMTAuNCAxMC0xMC40czEwIDMuMiAxMCAxMC40TTE1IDE1LjZBNi4zIDYuMyAwIDEgMCAxNSAzYTYuMyA2LjMgMCAwIDAgMCAxMi42WiIvPjwvc3ZnPg==",R="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEuOTgxIDEyLjQ3MmMtLjE0My4yMjIuMTE1LjUyOS4zNTEuNDEzLjgxNS0uNCAxLjYwNC0uODIzIDIuMzc1LTEuMjg4LjIyNy0uMTM3LjQ3Ni4xMDguMzI5LjMyOC0xLjkwNCAyLjg1Ny02LjYzMiA5Ljg3My0xLjQyNyAxMC4zMzMgMy4xNi4yNzkgNi4zMy0yLjI5NiA5LjMwNC00Ljk4NS4yMTktLjE5Ny41MjUuMDYyLjM2MS4zMDctMi40MiAzLjYzNC02Ljg1OSAxMS4wNTYtMS4wMjUgMTEuNDEgNS4wNzQuMzA4IDMuOTA0LTQuMzkyIDE1LjQzLTEwLjczOC44MzgtLjQ2IDEuMTAyLTEuNDEyLjg5Mi0yLjM0LS4zNzItMS45OTQtNC4xMzUtMS45NjItNi4yMjQtMS40MTQtLjI1NS4wNjctLjUtLjI1My0uMzI5LS40NTMgMi41NDYtMi45ODYgOS44NTMtMTAuNDQgNS4yNTItMTIuNzY4QzIzLjIxOS0uNzcgMTMuOTE4IDguODk4IDkuOTY1IDEyLjU0MWMtLjIwOC4xOTEtLjQzNS0uMDIyLS4yNjctLjI1IDEuOTQ0LTIuNjM4IDQuNDg4LTUuNTYgNC45NDUtOC41OTdhMS44MDcgMS44MDcgMCAwIDAtLjIzOC0xLjIxNCAyLjA1NyAyLjA1NyAwIDAgMC0uOTcxLS44NTRDOS4xMjQtLjI4NCA0LjIwMyA5LjAyOCAxLjk4IDEyLjQ3MloiLz48L3N2Zz4=",G="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTguNSAxMi42MzkgMTUgNi41bTAgMCA2LjUgNi4xMzlNMTUgNi41djE3Ii8+PC9zdmc+",_="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTguNSAxNS41IDE1IDltMCAwIDYuNSA2LjVNMTUgOXYxOE0zIDNoMjQiLz48L3N2Zz4=",B="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTIyLjkzNCA3LjQ1NGExLjI1IDEuMjUgMCAwIDEgLjM2MiAxLjczbC04LjUgMTNhMS4yNSAxLjI1IDAgMCAxLTEuODg3LjI0bC01LjUtNWExLjI1IDEuMjUgMCAxIDEgMS42ODItMS44NDlsNC40MTUgNC4wMTQgNy42OTgtMTEuNzczYTEuMjUgMS4yNSAwIDAgMSAxLjczLS4zNjJaIi8+PC9zdmc+",J="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zIDNoMjR2MjRIM1YzWiIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik0yMi45MzQgNy40NTRhMS4yNSAxLjI1IDAgMCAxIC4zNjIgMS43M2wtOC41IDEzYTEuMjUgMS4yNSAwIDAgMS0xLjg4Ny4yNGwtNS41LTVhMS4yNSAxLjI1IDAgMSAxIDEuNjgyLTEuODQ5bDQuNDE1IDQuMDE0IDcuNjk4LTExLjc3M2ExLjI1IDEuMjUgMCAwIDEgMS43My0uMzYyWiIvPjwvc3ZnPg==",H="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zIDNoMjR2MjRIM1YzWiIvPjwvc3ZnPg==",V="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNi4yNyAxMi4zMTZhMSAxIDAgMCAxIDEuNDE0LS4wNDZMMTUgMTkuMTNsNy4zMTYtNi44NmExIDEgMCAxIDEgMS4zNjggMS40NmwtOCA3LjVhMSAxIDAgMCAxLTEuMzY4IDBsLTgtNy41YTEgMSAwIDAgMS0uMDQ2LTEuNDE0WiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+",U="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTcuNjg0IDYuMjdhMSAxIDAgMCAxIC4wNDUgMS40MTRMMTAuODcgMTVsNi44NiA3LjMxNmExIDEgMCAxIDEtMS40NiAxLjM2OGwtNy41LThhMSAxIDAgMCAxIDAtMS4zNjhsNy41LThhMSAxIDAgMCAxIDEuNDE0LS4wNDZaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=",X="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuMzE3IDYuMjdhMSAxIDAgMCAxIDEuNDEzLjA0Nmw3LjUgOGExIDEgMCAwIDEgMCAxLjM2OGwtNy41IDhhMSAxIDAgMSAxLTEuNDU5LTEuMzY4TDE5LjEzIDE1bC02Ljg1OS03LjMxNmExIDEgMCAwIDEgLjA0Ni0xLjQxNFoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==",F="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNi4yNyAxNy42ODRhMSAxIDAgMCAwIDEuNDE0LjA0NkwxNSAxMC44N2w3LjMxNiA2Ljg2YTEgMSAwIDEgMCAxLjM2OC0xLjQ2bC04LTcuNWExIDEgMCAwIDAtMS4zNjggMGwtOCA3LjVhMSAxIDAgMCAwLS4wNDYgMS40MTRaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=",K="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTcuNTI3IDguNzMzIDEzLjc5NSAxNWwtNi4yNjggNi4yNjhtOC42NzgtMTIuNTM2TDIyLjQ3MyAxNWwtNi4yNjggNi4yNjciLz48L3N2Zz4=",Q="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIyLjQ3MyAyMS4yNjcgMTYuMjA1IDE1bDYuMjY4LTYuMjY4bS04LjY3OCAxMi41MzZMNy41MjcgMTVsNi4yNjgtNi4yNjciLz48L3N2Zz4=",$="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOCAydjJoMTBWMkg4Wm0tMi0uNUExLjUgMS41IDAgMCAxIDcuNSAwaDExQTEuNSAxLjUgMCAwIDEgMjAgMS41VjJoMWEzIDMgMCAwIDEgMyAzdjloLTJWNWExIDEgMCAwIDAtMS0xaC0xdi41QTEuNSAxLjUgMCAwIDEgMTguNSA2aC0xMUExLjUgMS41IDAgMCAxIDYgNC41VjRINWExIDEgMCAwIDAtMSAxdjIwYTEgMSAwIDAgMCAxIDFoN3YySDVhMyAzIDAgMCAxLTMtM1Y1YTMgMyAwIDAgMSAzLTNoMXYtLjVaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMjggMjlhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwWk0yOCAyNWExIDEgMCAxIDEtMiAwIDEgMSAwIDAgMSAyIDBaTTI4IDIxYTEgMSAwIDEgMS0yIDAgMSAxIDAgMCAxIDIgMFpNMjggMTdhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwWk0yNCAxN2ExIDEgMCAxIDEtMiAwIDEgMSAwIDAgMSAyIDBaTTIwIDE3YTEgMSAwIDEgMS0yIDAgMSAxIDAgMCAxIDIgMFpNMTYgMTdhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwWk0xNiAyMWExIDEgMCAxIDEtMiAwIDEgMSAwIDAgMSAyIDBaTTE2IDI1YTEgMSAwIDEgMS0yIDAgMSAxIDAgMCAxIDIgMFpNMTYgMjlhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwWk0yMCAyOWExIDEgMCAxIDEtMiAwIDEgMSAwIDAgMSAyIDBaTTI0IDI5YTEgMSAwIDEgMS0yIDAgMSAxIDAgMCAxIDIgMFoiLz48L3N2Zz4=",q="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTE5LjkyOCA1LjM3MWExIDEgMCAxIDAtMS44NTctLjc0MmwtOCAyMGExIDEgMCAwIDAgMS44NTcuNzQybDgtMjBaTTcuNzA3IDEwLjI5M2ExIDEgMCAwIDEgMCAxLjQxNEw0LjQxNCAxNWwzLjI5MyAzLjI5M2ExIDEgMCAxIDEtMS40MTQgMS40MTRsLTQtNGExIDEgMCAwIDEgMC0xLjQxNGw0LTRhMSAxIDAgMCAxIDEuNDE0IDBaTTIyLjI5MyAxMC4yOTNhMSAxIDAgMCAxIDEuNDE0IDBsNCA0YTEgMSAwIDAgMSAwIDEuNDE0bC00IDRhMSAxIDAgMSAxLTEuNDE0LTEuNDE0TDI1LjU4NiAxNWwtMy4yOTMtMy4yOTNhMSAxIDAgMCAxIDAtMS40MTRaIi8+PC9zdmc+",ee="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMjAuOTMgMTUuMTVjLTEuNTg4IDAtMi45MTYuMjY4LTMuOTc5Ljc4Mi0uNTMxLjI1Ny0xLjIxMS0xLjY1Ni4zNS0yLjE0OSAxLjEwMi0uMzQ3IDIuMzIyLS41MDggMy42My0uNTA4IDIuMzEyIDAgNC4zNTQuNTAzIDUuOTQ3IDEuNjU0IDEuNjA5IDEuMTYyIDIuNjU4IDIuOTE0IDMuMTA1IDUuMjA4YS45MzguOTM4IDAgMCAxLTEuODQuMzU4Yy0uMzcyLTEuOTEtMS4yMDQtMy4yMDktMi4zNjQtNC4wNDctMS4xNzYtLjg1LTIuNzkxLTEuMjk4LTQuODQ4LTEuMjk4Wk00LjI2IDIwLjA5NWMtMS4xNDIuNzYyLTEuOTggMS45MzQtMi40MTQgMy42MzdhLjkzNy45MzcgMCAxIDEtMS44MTctLjQ2NGMuNTM1LTIuMDkzIDEuNjE2LTMuNjgyIDMuMTkyLTQuNzMzIDEuNTU4LTEuMDM4IDMuNTE1LTEuNDk0IDUuNzE4LTEuNDk0IDIuNzQ0IDAgNS4xMDguNzA5IDYuNzg0IDIuMzYgMS42NzggMS42NTQgMi41MTYgNC4xMDYgMi41MTYgNy4yNzRhLjkzNy45MzcgMCAxIDEtMS44NzUgMGMwLTIuODUyLS43NS00Ljc1LTEuOTU3LTUuOTM4LTEuMjEtMS4xOTItMy4wMjctMS44MjEtNS40NjgtMS44MjEtMS45NiAwLTMuNTE5LjQwNi00LjY3OCAxLjE4WiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTE0LjA4OCA4LjQ4Yy44NzMuMzcgMS42MjYuOTcgMi4xODMgMS43MjJhNC4zMzEgNC4zMzEgMCAxIDEgLjYwNSAxLjA1MSA1LjI1MiA1LjI1MiAwIDAgMSAuMzgzIDIuNzU1IDYuMjA2IDYuMjA2IDAgMSAwLTMuMTctNS41MjdaIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS44MjcgMTIuNzFhNi4yMDYgNi4yMDYgMCAxIDEgMTIuNDEyIDAgNi4yMDYgNi4yMDYgMCAwIDEtMTIuNDEyIDBabTYuMjA2LTQuMzMxYTQuMzMxIDQuMzMxIDAgMSAwIDAgOC42NjIgNC4zMzEgNC4zMzEgMCAwIDAgMC04LjY2MloiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==",te="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PGNpcmNsZSBjeD0iMTUiIGN5PSIxNSIgcj0iMTMiIGZpbGw9IiMwMDAiLz48L3N2Zz4=",ie="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik01IDNhNCA0IDAgMCAwLTQgNHYxMGE0IDQgMCAwIDAgNCA0aDEwbDYgNnYtNmg0YTQgNCAwIDAgMCA0LTRWN2E0IDQgMCAwIDAtNC00SDVaIi8+PC9zdmc+",ne="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTIzLjU2MyA4LjA2M2ExLjE1IDEuMTUgMCAxIDAtMS42MjYtMS42MjZMMTUgMTMuMzc0IDguMDYzIDYuNDM3YTEuMTUgMS4xNSAwIDAgMC0xLjYyNiAxLjYyNkwxMy4zNzQgMTVsLTYuOTM3IDYuOTM3YTEuMTUgMS4xNSAwIDEgMCAxLjYyNiAxLjYyNkwxNSAxNi42MjZsNi45MzcgNi45MzdhMS4xNSAxLjE1IDAgMSAwIDEuNjI2LTEuNjI2TDE2LjYyNiAxNWw2LjkzNy02LjkzN1oiLz48L3N2Zz4=",se="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTI1LjcwNyA1LjcwN2ExIDEgMCAwIDAtMS40MTQtMS40MTRMMTUgMTMuNTg2IDUuNzA3IDQuMjkzYTEgMSAwIDAgMC0xLjQxNCAxLjQxNEwxMy41ODYgMTVsLTkuMjkzIDkuMjkzYTEgMSAwIDEgMCAxLjQxNCAxLjQxNEwxNSAxNi40MTRsOS4yOTMgOS4yOTNhMSAxIDAgMCAwIDEuNDE0LTEuNDE0TDE2LjQxNCAxNWw5LjI5My05LjI5M1oiLz48L3N2Zz4=",oe="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuNDY1IDIuMjQ3YTEzLjA1NSAxMy4wNTUgMCAwIDEgNS4wNyAwIDEuNjEgMS42MSAwIDEgMS0uNjI1IDMuMTYgOS44MzUgOS44MzUgMCAwIDAtMy44MiAwIDEuNjEgMS42MSAwIDEgMS0uNjI1LTMuMTZaTTEwLjAxIDQuNjMzYTEuNjEgMS42MSAwIDAgMS0uNDQyIDIuMjM0IDkuODQyIDkuODQyIDAgMCAwLTIuNyAyLjdBMS42MSAxLjYxIDAgMCAxIDQuMTkgNy43NzcgMTMuMDYzIDEzLjA2MyAwIDAgMSA3Ljc3NiA0LjE5YTEuNjEgMS42MSAwIDAgMSAyLjIzNC40NDJabTkuOTggMGExLjYxIDEuNjEgMCAwIDEgMi4yMzQtLjQ0MiAxMy4wNjMgMTMuMDYzIDAgMCAxIDMuNTg1IDMuNTg1IDEuNjEgMS42MSAwIDEgMS0yLjY3NiAxLjc5MiA5Ljg0MSA5Ljg0MSAwIDAgMC0yLjctMi43IDEuNjEgMS42MSAwIDAgMS0uNDQzLTIuMjM1Wk00LjE0IDExLjE5N2ExLjYxIDEuNjEgMCAwIDEgMS4yNjcgMS44OTMgOS44MzUgOS44MzUgMCAwIDAgMCAzLjgyIDEuNjEgMS42MSAwIDEgMS0zLjE2LjYyNSAxMy4wNTUgMTMuMDU1IDAgMCAxIDAtNS4wNyAxLjYxIDEuNjEgMCAwIDEgMS44OTMtMS4yNjhabTIxLjcyIDBhMS42MSAxLjYxIDAgMCAxIDEuODkzIDEuMjY4IDEzLjA1MyAxMy4wNTMgMCAwIDEgMCA1LjA3IDEuNjEgMS42MSAwIDEgMS0zLjE2LS42MjUgOS44MzMgOS44MzMgMCAwIDAgMC0zLjgyIDEuNjEgMS42MSAwIDAgMSAxLjI2Ny0xLjg5M1pNNC42MzMgMTkuOTlhMS42MSAxLjYxIDAgMCAxIDIuMjM0LjQ0MiA5Ljg0MSA5Ljg0MSAwIDAgMCAyLjcgMi43IDEuNjEgMS42MSAwIDAgMS0xLjc5MSAyLjY3NyAxMy4wNjMgMTMuMDYzIDAgMCAxLTMuNTg1LTMuNTg1IDEuNjEgMS42MSAwIDAgMSAuNDQyLTIuMjM0Wm0yMC43MzQgMGExLjYxIDEuNjEgMCAwIDEgLjQ0MiAyLjIzNCAxMy4wNjQgMTMuMDY0IDAgMCAxLTMuNTg1IDMuNTg1IDEuNjEgMS42MSAwIDEgMS0xLjc5Mi0yLjY3NiA5Ljg0MSA5Ljg0MSAwIDAgMCAyLjctMi43IDEuNjEgMS42MSAwIDAgMSAyLjIzNS0uNDQzWm0tMTQuMTcgNS44N2ExLjYxIDEuNjEgMCAwIDEgMS44OTMtMS4yNjcgOS44MzMgOS44MzMgMCAwIDAgMy44MiAwIDEuNjEgMS42MSAwIDEgMSAuNjI1IDMuMTYgMTMuMDUzIDEzLjA1MyAwIDAgMS01LjA3IDAgMS42MSAxLjYxIDAgMCAxLTEuMjY4LTEuODkzWiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+",re="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTE3IDMuNzkyYTIgMiAwIDEgMS00IDAgMiAyIDAgMCAxIDQgMFpNMTcgMjUuNzkxYTIgMiAwIDEgMS00IDAgMiAyIDAgMCAxIDQgMFpNMjIuMjMyIDYuMjY1YTIgMiAwIDEgMS0zLjQ2NC0yIDIgMiAwIDAgMSAzLjQ2NCAyWk0xMS4yMzIgMjUuMzE4YTIgMiAwIDEgMS0zLjQ2NC0yIDIgMiAwIDAgMSAzLjQ2NCAyWk0yNS41MjYgMTEuMDI0YTIgMiAwIDEgMS0yLTMuNDY1IDIgMiAwIDAgMSAyIDMuNDY1Wk02LjQ3NCAyMi4wMjRhMiAyIDAgMSAxLTItMy40NjUgMiAyIDAgMCAxIDIgMy40NjVaTTI2IDE2Ljc5MWEyIDIgMCAxIDEgMC00IDIgMiAwIDAgMSAwIDRaTTQgMTYuNzkxYTIgMiAwIDEgMSAwLTQgMiAyIDAgMCAxIDAgNFpNMjMuNTI2IDIyLjAyNGEyIDIgMCAxIDEgMi0zLjQ2NSAyIDIgMCAwIDEtMiAzLjQ2NVpNNC40NzQgMTEuMDI0YTIgMiAwIDEgMSAyLTMuNDY1IDIgMiAwIDAgMS0yIDMuNDY1Wk0xOC43NjggMjUuMzE4YTIgMiAwIDEgMSAzLjQ2NC0yIDIgMiAwIDAgMS0zLjQ2NCAyWk03Ljc2OCA2LjI2NWEyIDIgMCAxIDEgMy40NjQtMiAyIDIgMCAwIDEtMy40NjQgMloiLz48L3N2Zz4=",ae="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMjEuODg4IDE1LjczM2MwLTQuMTYtNC4wMjItNi44MS04Ljc3Ni02LjgxLTMuNjMgMC02LjEzIDIuNjQxLTYuODQgNS4yNDYtMS4zMTEgNC44MDYgMS42MjIgOC44NTkgNS40MDMgOS45MjIgNi4wMzggMS4xOSAxMC4yMTMtMi41OTkgMTAuMjEzLTguMzU4Wk0xNy4xNDMgMi4xODRjNC45MTMuNzIgOC45NTIgNC40MTcgMTAuMjgxIDkuMTdDMzEuMjgxIDI0LjQ2IDE0LjgxNCAzMy4xMzEgNi4yNzEgMjQuNTktMy40NTkgMTQuODYxIDQuODMxLjE4NyAxNy4xNDMgMi4xODRaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=",le="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PGNpcmNsZSBjeD0iMTUiIGN5PSIxNSIgcj0iMTEuNSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjMiLz48L3N2Zz4=",ce="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PGcgY2xpcC1wYXRoPSJ1cmwoI2EpIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNOC4xNjEgMTQuMDI0YTIuNTI3IDIuNTI3IDAgMCAxIDEuODQtLjgyNGMuNjkuMDAzIDEuMzUxLjMgMS44MzguODI0LjQ4OC41MjUuNzYxIDEuMjM2Ljc2MSAxLjk3NnMtLjI3MyAxLjQ1LS43NiAxLjk3NkEyLjUyNyAyLjUyNyAwIDAgMSAxMCAxOC44YTIuNTI3IDIuNTI3IDAgMCAxLTEuODM5LS44MjVBMi45MDYgMi45MDYgMCAwIDEgNy40MDEgMTZjMC0uNzQuMjczLTEuNDUuNzYtMS45NzZaTTE4LjE1OSAxNC4wMjRhMi41MjcgMi41MjcgMCAwIDEgMS44MzktLjgyNGMuNjkuMDAzIDEuMzUyLjMgMS44MzkuODI0LjQ4Ny41MjUuNzYgMS4yMzYuNzYgMS45NzZzLS4yNzMgMS40NS0uNzYgMS45NzZhMi41MjcgMi41MjcgMCAwIDEtMS44NC44MjQgMi41MjcgMi41MjcgMCAwIDEtMS44MzgtLjgyNUEyLjkwNyAyLjkwNyAwIDAgMSAxNy4zOTggMTZjMC0uNzQuMjczLTEuNDUuNzYtMS45NzZaIi8+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEyIDYuOGMtLjIwOS0uNzE1LTEuMjQ4LTIuMDgyLTItMi4yLTEuNTMuMTY3LTMuOTcgMS4wMjQtNS40IDEuOC0xLjAyNSAxLjE3Mi0yLjA4IDQuMTU2LTIuNDkgNS44LS42ODUgMi43MzYtMS4wNjYgNi4wNDgtMS4xMTUgOS4yLjk1NiAxLjgxOSA0LjQzNCAzLjggNi41MDUgNCAuNDgzLS41MjQgMS45LTIuOCAxLjktMi44bTguNTk1LTE1LjhjLjIwOS0uNzE1IDEuMjQ4LTIuMDgyIDItMi4yIDEuNTMuMTY3IDMuOTcgMS4wMjQgNS40IDEuOCAxLjAyNSAxLjE3MiAyLjA4IDQuMTU2IDIuNDkgNS44LjY4NSAyLjczNiAxLjA2NiA2LjA0OCAxLjExNSA5LjItLjk1NiAxLjgxOS00LjQzNCAzLjgtNi41MDUgNC0uNDgzLS41MjQtMS45LTIuOC0xLjktMi44TTcgOWMuNi0uOCAzLTIgOC0yczcuNCAxLjIgOCAyTTUuOCAyMC40QzYuNiAyMS42IDguNCAyMyAxNSAyM3M4LjQtMS40IDkuMi0yLjYiLz48L2c+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDMwdjMwSDB6Ii8+PC9jbGlwUGF0aD48L2RlZnM+PC9zdmc+",de="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTIgMTJoOWExIDEgMCAwIDEgMSAxdjRhMSAxIDAgMCAxLTEgMUgydi02Wk0xOCAxM2ExIDEgMCAwIDEgMS0xaDl2NmgtOWExIDEgMCAwIDEtMS0xdi00Wk0wIDNhMSAxIDAgMCAxIDIgMHYyNGExIDEgMCAxIDEtMiAwVjNaTTI4IDNhMSAxIDAgMSAxIDIgMHYyNGExIDEgMCAwIDEtMiAwVjNaIi8+PC9zdmc+",ue="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEyIDJoNnY5YTEgMSAwIDAgMS0xIDFoLTRhMSAxIDAgMCAxLTEtMVYyWk0xMiAxOWExIDEgMCAwIDEgMS0xaDRhMSAxIDAgMCAxIDEgMXY5aC02di05Wk0yIDFhMSAxIDAgMCAxIDEtMWgyNGExIDEgMCAxIDEgMCAySDNhMSAxIDAgMCAxLTEtMVpNMiAyOWExIDEgMCAwIDEgMS0xaDI0YTEgMSAwIDEgMSAwIDJIM2ExIDEgMCAwIDEtMS0xWiIvPjwvc3ZnPg==",he="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PGNpcmNsZSBjeD0iMTQuNSIgY3k9IjE1LjUiIHI9IjQuNSIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==",pe="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTcuMjUgMTVhMi4yNSAyLjI1IDAgMSAxLTQuNSAwIDIuMjUgMi4yNSAwIDAgMSA0LjUgMFpNMTcuMjUgMTVhMi4yNSAyLjI1IDAgMSAxLTQuNSAwIDIuMjUgMi4yNSAwIDAgMSA0LjUgMFpNMjcuMjUgMTVhMi4yNSAyLjI1IDAgMSAxLTQuNSAwIDIuMjUgMi4yNSAwIDAgMSA0LjUgMFoiLz48L3N2Zz4=",ge="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTE3LjI1IDVhMi4yNSAyLjI1IDAgMSAxLTQuNSAwIDIuMjUgMi4yNSAwIDAgMSA0LjUgMFpNMTcuMjUgMTVhMi4yNSAyLjI1IDAgMSAxLTQuNSAwIDIuMjUgMi4yNSAwIDAgMSA0LjUgMFpNMTcuMjUgMjVhMi4yNSAyLjI1IDAgMSAxLTQuNSAwIDIuMjUgMi4yNSAwIDAgMSA0LjUgMFoiLz48L3N2Zz4=",me="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTExIDkuMjVhMi4yNSAyLjI1IDAgMSAwIDAtNC41IDIuMjUgMi4yNSAwIDAgMCAwIDQuNVpNMTkgOS4yNWEyLjI1IDIuMjUgMCAxIDAgMC00LjUgMi4yNSAyLjI1IDAgMCAwIDAgNC41Wk0yMS4yNSAxNWEyLjI1IDIuMjUgMCAxIDEtNC41IDAgMi4yNSAyLjI1IDAgMCAxIDQuNSAwWk0xMSAxNy4yNWEyLjI1IDIuMjUgMCAxIDAgMC00LjUgMi4yNSAyLjI1IDAgMCAwIDAgNC41Wk0yMS4yNSAyM2EyLjI1IDIuMjUgMCAxIDEtNC41IDAgMi4yNSAyLjI1IDAgMCAxIDQuNSAwWk0xMSAyNS4yNWEyLjI1IDIuMjUgMCAxIDAgMC00LjUgMi4yNSAyLjI1IDAgMCAwIDAgNC41WiIvPjwvc3ZnPg==",Ie="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMiAxOWEzIDMgMCAwIDAgMyAzaDN2LTJINWExIDEgMCAwIDEtMS0xVjVhMSAxIDAgMCAxIDEtMWgxNGExIDEgMCAwIDEgMSAxdjNoLTlhMyAzIDAgMCAwLTMgM3YxNGEzIDMgMCAwIDAgMyAzaDE0YTMgMyAwIDAgMCAzLTNWMTFhMyAzIDAgMCAwLTMtM2gtM1Y1YTMgMyAwIDAgMC0zLTNINWEzIDMgMCAwIDAtMyAzdjE0Wm04LThhMSAxIDAgMCAxIDEtMWgxNGExIDEgMCAwIDEgMSAxdjE0YTEgMSAwIDAgMS0xIDFIMTFhMSAxIDAgMCAxLTEtMVYxMVoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==",fe="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI0IDkuMjczIDExLjc5NSAyMS40NzdhLjUwMy41MDMgMCAwIDEtLjE1Ni4xMDZMNiAyNGwyLjQxNy01LjYzOWEuNTAxLjUwMSAwIDAgMSAuMTA2LS4xNTZMMjAuNzI3IDYgMjQgOS4yNzNaIi8+PC9zdmc+",ye="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEzIDVIN2EyIDIgMCAwIDAtMiAydjE2YTIgMiAwIDAgMCAyIDJoMTZhMiAyIDAgMCAwIDItMnYtNk0xOSA1aDZtMCAwdjZtMC02TDEzIDE3Ii8+PC9zdmc+",be="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyA0YTEgMSAwIDAgMC0xIDF2MjBhMSAxIDAgMCAwIDEgMWgxNmExIDEgMCAwIDAgMS0xVjEyaC03YTEgMSAwIDAgMS0xLTFWNEg3Wm0xMSAxLjQxNEwyMi41ODYgMTBIMThWNS40MTRaTTQgNWEzIDMgMCAwIDEgMy0zaDEwYTEgMSAwIDAgMSAuNzA3LjI5M2w4IDhBMSAxIDAgMCAxIDI2IDExdjE0YTMgMyAwIDAgMS0zIDNIN2EzIDMgMCAwIDEtMy0zVjVaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=",we="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOCA0aDE4djE4aC0yVjhhMiAyIDAgMCAwLTItMkg4VjRaTTYgNlY0YTIgMiAwIDAgMSAyLTJoMThhMiAyIDAgMCAxIDIgMnYxOGEyIDIgMCAwIDEtMiAyaC0ydjJhMiAyIDAgMCAxLTIgMkg0YTIgMiAwIDAgMS0yLTJWOGEyIDIgMCAwIDEgMi0yaDJabTE2IDE4djJINFY4aDJ2MTRhMiAyIDAgMCAwIDIgMmgxNFptMC0ySDhWOGgxNHYxNFoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==",Ce="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMjYgNEg4djJoMTRhMiAyIDAgMCAxIDIgMnYxNGgyVjRaTTYgNHYySDRhMiAyIDAgMCAwLTIgMnYxOGEyIDIgMCAwIDAgMiAyaDE4YTIgMiAwIDAgMCAyLTJ2LTJoMmEyIDIgMCAwIDAgMi0yVjRhMiAyIDAgMCAwLTItMkg4YTIgMiAwIDAgMC0yIDJabTE2IDIySDRWOGgxOHYxOFoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTIzLjQzOCAxNS41NTNhLjk2OC45NjggMCAwIDEgMCAxLjQxN2wtMS40OSAxLjQxOGExLjA5MSAxLjA5MSAwIDAgMS0xLjQ5IDAgLjk2OC45NjggMCAwIDEgMC0xLjQxOGwxLjQ5LTEuNDE3YTEuMDkxIDEuMDkxIDAgMCAxIDEuNDkgMFptLTQuNDY4IDUuNjdhLjk2OC45NjggMCAwIDAgMC0xLjQxOCAxLjA5MSAxLjA5MSAwIDAgMC0xLjQ5IDBsLTEuNDkgMS40MTdhLjk2OC45NjggMCAwIDAgMCAxLjQxOCAxLjA5MSAxLjA5MSAwIDAgMCAxLjQ5IDBsMS40OS0xLjQxOFptLTQuNDY4IDIuODM0YS45NjguOTY4IDAgMCAxIDAgMS40MThsLTEuNDkgMS40MTdhMS4wOTEgMS4wOTEgMCAwIDEtMS40OSAwIC45NjguOTY4IDAgMCAxIDAtMS40MTdsMS40OS0xLjQxOGExLjA5MSAxLjA5MSAwIDAgMSAxLjQ5IDBabTAtMTcuMDFhLjk2OC45NjggMCAwIDEgMCAxLjQxOGwtMS40OSAxLjQxOGExLjA5MSAxLjA5MSAwIDAgMS0xLjQ5IDAgLjk2OC45NjggMCAwIDEgMC0xLjQxOGwxLjQ5LTEuNDE3YTEuMDkxIDEuMDkxIDAgMCAxIDEuNDkgMFptLTQuNDY5IDUuNjdhLjk2OC45NjggMCAwIDAgMC0xLjQxNyAxLjA5MSAxLjA5MSAwIDAgMC0xLjQ4OSAwbC0xLjQ5IDEuNDE3YS45NjguOTY4IDAgMCAwIDAgMS40MTggMS4wOTEgMS4wOTEgMCAwIDAgMS40OSAwbDEuNDktMS40MThabS00LjQ2NyAyLjgzNWEuOTY4Ljk2OCAwIDAgMSAwIDEuNDE4bC0xLjQ5IDEuNDE3YTEuMDkxIDEuMDkxIDAgMCAxLTEuNDkgMCAuOTY5Ljk2OSAwIDAgMSAwLTEuNDE3bDEuNDktMS40MTdhMS4wOTEgMS4wOTEgMCAwIDEgMS40OSAwWk0yMy40MzcgMTEuM2EuOTY4Ljk2OCAwIDAgMCAwLTEuNDE4IDEuMDkxIDEuMDkxIDAgMCAwLTEuNDg5IDBsLTEuNDkgMS40MThhLjk2OC45NjggMCAwIDAgMCAxLjQxNyAxLjA5MSAxLjA5MSAwIDAgMCAxLjQ5IDBsMS40OS0xLjQxN1ptLTQuNDY3IDIuODM1YS45NjkuOTY5IDAgMCAxIDAgMS40MTdsLTEuNDkgMS40MThhMS4wOTEgMS4wOTEgMCAwIDEtMS40OSAwIC45NjguOTY4IDAgMCAxIDAtMS40MThsMS40OS0xLjQxN2ExLjA5MSAxLjA5MSAwIDAgMSAxLjQ5IDBabS00LjQ2OCA1LjY3YS45NjkuOTY5IDAgMCAwIDAtMS40MTggMS4wOTEgMS4wOTEgMCAwIDAtMS40OSAwbC0xLjQ5IDEuNDE4YS45NjguOTY4IDAgMCAwIDAgMS40MTcgMS4wOTEgMS4wOTEgMCAwIDAgMS40OSAwbDEuNDktMS40MTdabS00LjQ2OCAyLjgzNWEuOTY4Ljk2OCAwIDAgMSAwIDEuNDE3bC0xLjQ5IDEuNDE4YTEuMDkxIDEuMDkxIDAgMCAxLTEuNDkgMCAuOTY4Ljk2OCAwIDAgMSAwLTEuNDE4bDEuNDktMS40MTdhMS4wOTEgMS4wOTEgMCAwIDEgMS40OSAwWm0wLTE1LjU5My0xLjQ5IDEuNDE4YTEuMDkxIDEuMDkxIDAgMCAxLTEuNDkgMCAuOTY4Ljk2OCAwIDAgMSAwLTEuNDE4YzEuMTA1LTEuMDUgNC43NzItMS43MDUgMi45OCAwWk01LjU2NiAxMS4zYS45NjguOTY4IDAgMCAwIDAtMS40MTggMS4wOTEgMS4wOTEgMCAwIDAtMS40OSAwTDIuNTg2IDExLjNhLjk2OC45NjggMCAwIDAgMCAxLjQxNyAxLjA5MSAxLjA5MSAwIDAgMCAxLjQ5IDBsMS40OS0xLjQxN1ptMTcuODcxIDkuOTIyYS45NjguOTY4IDAgMCAxIDAgMS40MThsLTEuNDg5IDEuNDE3YTEuMDkxIDEuMDkxIDAgMCAxLTEuNDkgMCAuOTY4Ljk2OCAwIDAgMSAwLTEuNDE3bDEuNDktMS40MThhMS4wOTEgMS4wOTEgMCAwIDEgMS40OSAwWm0tNC40NjggNS42N2EuOTY4Ljk2OCAwIDAgMCAwLTEuNDE3IDEuMDkxIDEuMDkxIDAgMCAwLTEuNDg5IDBsLTEuNDkgMS40MTdjLTEuODE4IDEuNzMxIDEuODYgMS4wNjYgMi45OCAwWm0wLTE3LjAxYS45NjguOTY4IDAgMCAwIDAtMS40MTcgMS4wOTEgMS4wOTEgMCAwIDAtMS40ODkgMGwtMS40OSAxLjQxN2EuOTY4Ljk2OCAwIDAgMCAwIDEuNDE4IDEuMDkxIDEuMDkxIDAgMCAwIDEuNDkgMGwxLjQ5LTEuNDE4Wm0tNC40NjggMi44MzVhLjk2OC45NjggMCAwIDEgMCAxLjQxOGwtMS40ODkgMS40MTdhMS4wOTEgMS4wOTEgMCAwIDEtMS40OSAwIC45NjguOTY4IDAgMCAxIDAtMS40MTdsMS40OS0xLjQxOGExLjA5MSAxLjA5MSAwIDAgMSAxLjQ5IDBabS00LjQ2NyA1LjY3YS45NjguOTY4IDAgMCAwIDAtMS40MTcgMS4wOTEgMS4wOTEgMCAwIDAtMS40OSAwbC0xLjQ5IDEuNDE3YS45NjguOTY4IDAgMCAwIDAgMS40MTggMS4wOTEgMS4wOTEgMCAwIDAgMS40OSAwbDEuNDktMS40MThabS00LjQ2OCAyLjgzNWEuOTY4Ljk2OCAwIDAgMSAwIDEuNDE4bC0xLjQ5IDEuNDE3YTEuMDkxIDEuMDkxIDAgMCAxLTEuNDkgMCAuOTY5Ljk2OSAwIDAgMSAwLTEuNDE3bDEuNDktMS40MThhMS4wOTEgMS4wOTEgMCAwIDEgMS40OSAwWiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+",Me="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMjYgNEg4djJoMTRhMiAyIDAgMCAxIDIgMnYxNGgyVjRaTTYgNHYySDRhMiAyIDAgMCAwLTIgMnYxOGEyIDIgMCAwIDAgMiAyaDE4YTIgMiAwIDAgMCAyLTJ2LTJoMmEyIDIgMCAwIDAgMi0yVjRhMiAyIDAgMCAwLTItMkg4YTIgMiAwIDAgMC0yIDJabTE2IDIySDRWOGgxOHYxOFoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==",xe="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMjYgNEg4djJoMTRhMiAyIDAgMCAxIDIgMnYxNGgyVjRaTTYgNHYySDRhMiAyIDAgMCAwLTIgMnYxOGEyIDIgMCAwIDAgMiAyaDE4YTIgMiAwIDAgMCAyLTJ2LTJoMmEyIDIgMCAwIDAgMi0yVjRhMiAyIDAgMCAwLTItMkg4YTIgMiAwIDAgMC0yIDJabTE2IDIySDRWOGgxOHYxOFoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjMyIiBkPSJNNCA4aDE4djE4SDRWOFoiLz48L3N2Zz4=",Ae="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMy4yIiBkPSJNMjIuOTY1IDExLjk2M2MtMy45MzYgMC03LjMwNSA2LjM2OS0zLjkwOCA5LjY2MyAzLjM5NyAzLjI5NCA1Ljc4Ny00LjE3MyA1Ljg1My03LjAyOC4wNjYtMi44NTUgMS40MDYgNS4xMjggMy4yOTMgNy40N00xLjggMTguNThzNC4zMzYtMS4zMTEgMTEuMjktMS4zOTltLTkuMzY3LTYuMzczYTE1OS4wOTYgMTU5LjA5NiAwIDAgMC0uMDg1IDYuMjE3bTAgMGMuMDE0IDMuMjkuMDggNC43MzMtLjM5NSA1LjE2NS0uMjk0LjI2OC0uMTYtMi4xOS4zOTUtNS4xNjVabTAgMGMuNzc5LTQuMTggMi4zODQtOS4zODQgNC43ODgtOS40OTkgNC4xMTYtLjE5NyAxLjM4NiA4LjExIDUuODIzIDE1LjA1NSIvPjwvc3ZnPg==",Se="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0ibTExLjM1OCAyMy45MzUtMS4yNzctNC42MUg0LjY5bC0xLjI1IDQuNjFIMEw1LjEwNiA1Ljc1Mmg0Ljc0MWw1LjEzMiAxOC4xODNoLTMuNjIxWk03LjUwMyA5LjExM2gtLjIwOWwtMi4wMDYgNy40MjRoNC4yMkw3LjUwMyA5LjExM1pNMjguMDQ2IDIzLjkzNWMtLjgxNiAwLTEuNDUtLjItMS45MDEtLjU5OS0uNDM1LS40MTctLjY5NS0uOTktLjc4Mi0xLjcyaC0uMTNhMy40MDcgMy40MDcgMCAwIDEtMS40MzMgMS45NTVjLS43MTIuNDUxLTEuNTkuNjc3LTIuNjMxLjY3Ny0xLjM1NSAwLTIuNDMxLS4zNTYtMy4yMy0xLjA2OC0uOC0uNzEyLTEuMTk5LTEuNzAyLTEuMTk5LTIuOTcgMC0yLjcxIDEuOTg5LTQuMDY0IDUuOTY2LTQuMDY0aDIuMzd2LS44ODZjMC0uODUtLjIwOC0xLjQ5My0uNjI1LTEuOTI3LS40MTctLjQzNC0xLjA5NC0uNjUyLTIuMDMyLS42NTItLjg1IDAtMS41MzcuMTY2LTIuMDU4LjQ5Ni0uNTIuMzMtLjk2NC43NTUtMS4zMjggMS4yNzZsLTEuOTAyLTEuNjE1Yy40MTctLjc0NyAxLjA4NS0xLjM3MiAyLjAwNi0xLjg3Ni45MzgtLjUyIDIuMTQ1LS43ODEgMy42MjEtLjc4MSAxLjc3MSAwIDMuMTUyLjQxNyA0LjE0MiAxLjI1IDEuMDA3LjgxNiAxLjUxIDIuMDQgMS41MSAzLjY3M3Y2LjMzSDMwdjIuNTAxaC0xLjk1NFptLTUuNzU3LTEuOThjLjc5OSAwIDEuNDU5LS4xODIgMS45OC0uNTQ3LjUzOC0uMzgyLjgwOC0uODk0LjgwOC0xLjUzN3YtMS43OTdoLTIuMjkzYy0xLjgyMyAwLTIuNzM1LjU3My0yLjczNSAxLjcydi41MmMwIC41MzkuMi45NDcuNTk5IDEuMjI1LjQuMjc3Ljk0Ni40MTYgMS42NDEuNDE2WiIvPjwvc3ZnPg==",ve="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0ibTEyLjUwNCAyNC0xLjQyLTQuNTE1aC02LjI5TDMuMzk5IDI0SDBMNS45MzUgNi4yOTZoNC4xNkwxNS45NzkgMjRoLTMuNDc1Wk03Ljk5IDkuMzRoLS4xMjZsLTIuMjU4IDcuMjhoNC42NjdMNy45OSA5LjM0Wk0yOC4yIDI0Yy0uNzExIDAtMS4yNzctLjIwMy0xLjctLjYwOS0uNDA2LS40MjMtLjY2LS45OC0uNzYxLTEuNjc0aC0uMTUyYy0uMjIuODYzLS42NjggMS41MTQtMS4zNDUgMS45NTMtLjY3Ni40MjMtMS41MTMuNjM0LTIuNTEuNjM0LTEuMzUzIDAtMi4zOTMtLjM1NS0zLjEyLTEuMDY1LS43MjctLjcxLTEuMDktMS42NTctMS4wOS0yLjg0IDAtMS4zNy40OS0yLjM4NSAxLjQ3LTMuMDQ0Ljk4MS0uNjc3IDIuMzc2LTEuMDE1IDQuMTg1LTEuMDE1aDIuMjU4di0uOTY0YzAtLjc0NC0uMTk1LTEuMzE5LS41ODQtMS43MjQtLjM4OS0uNDA2LTEuMDE0LS42MS0xLjg3Ny0uNjEtLjc2IDAtMS4zNzguMTctMS44NTEuNTA4YTQuNzggNC43OCAwIDAgMC0xLjE2NyAxLjE2N2wtMS45MjctMS43MjVhNS40NzcgNS40NzcgMCAwIDEgMS45NTItMS44MjZjLjgxMi0uNDczIDEuODg2LS43MSAzLjIyMi0uNzEgMS43OTIgMCAzLjE1My40MDYgNC4wODMgMS4yMTcuOTMuODEyIDEuMzk1IDEuOTc5IDEuMzk1IDMuNXY2LjI0SDMwVjI0aC0xLjhabS01LjM3OC0yLjA1NWMuNzI3IDAgMS4zNDQtLjE2IDEuODUyLS40ODIuNTA3LS4zMi43Ni0uNzk0Ljc2LTEuNDJ2LTEuNzVoLTIuMDhjLTEuNjkgMC0yLjUzNi41NDEtMi41MzYgMS42MjN2LjQzMWMwIC41NDIuMTcuOTQ3LjUwOCAxLjIxOC4zNTUuMjU0Ljg1NC4zOCAxLjQ5Ni4zOFoiLz48L3N2Zz4=",Le="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTAgMjIuMDAzaDEuMjYyTDYuNzA2IDYuMjE1SDkuOGw1LjQ0NSAxNS43ODhoMS4yNjJ2MS40ODVIOS42NXYtMS40ODVoMi4wNTRsLTEuMjg3LTMuODg1SDQuNDU0bC0xLjI4NiAzLjg4NUg1LjIydjEuNDg1SDB2LTEuNDg1Wm00LjktNS40NDRoNS4wNzNMNy40OTggOC44ODhoLS4xMjRMNC45IDE2LjU1OVpNMjEuNjg1IDIzLjc4NWMtMS4zMzYgMC0yLjMyNi0uMzIyLTIuOTctLjk2NS0uNjQzLS42NDQtLjk2NC0xLjUzNS0uOTY0LTIuNjczIDAtMS4yNTQuNDUzLTIuMjAyIDEuMzYtMi44NDYuOTI1LS42NDMgMi4zNi0uOTY1IDQuMzA2LS45NjVoMS43NTd2LTEuNTU5YzAtMS4wMDYtLjIwNi0xLjc2NS0uNjE4LTIuMjc2LS40MTMtLjUyOC0xLjA4OS0uNzkyLTIuMDMtLjc5Mi0uNzI1IDAtMS4yODYuMTA3LTEuNjgyLjMyMXYuMWMuMTY1LjA5OC4zMjIuMjU1LjQ3LjQ3LjE2NS4xOTcuMjQ4LjQ3OC4yNDguODQgMCAuNDgtLjE0OS44NzUtLjQ0NiAxLjE4OS0uMjguMjk3LS43MDEuNDQ1LTEuMjYyLjQ0NS0uNDc4IDAtLjg3NC0uMTU2LTEuMTg4LS40Ny0uMjk3LS4zMTMtLjQ0NS0uNzI2LS40NDUtMS4yMzcgMC0uMzk2LjEwNy0uNzc2LjMyMi0xLjEzOS4yMy0uMzguNTY5LS43MDkgMS4wMTQtLjk5LjQ0Ni0uMjk2Ljk5LS41MjcgMS42MzMtLjY5Mi42Ni0uMTgyIDEuNDItLjI3MyAyLjI3Ny0uMjczIDEuNjUgMCAyLjg4Ny4zOCAzLjcxMiAxLjEzOS44MjUuNzQyIDEuMjM3IDEuNzkgMS4yMzcgMy4xNDN2Ny40NzNIMzB2MS4yMzdjLS4yNDcuMTY1LS41NzcuMjg5LS45OS4zNzFhNS4zOSA1LjM5IDAgMCAxLTEuMjYyLjE0OWMtLjgyNSAwLTEuNDE5LS4xOTgtMS43ODItLjU5NC0uMzYzLS40MTItLjU0NC0uOTMyLS41NDQtMS41NnYtLjA3M2gtLjEyNGE0LjM5IDQuMzkgMCAwIDEtLjQ0NS44MTYgMy4xNTkgMy4xNTkgMCAwIDEtLjY5My43MThjLS4yOC4xOTgtLjYyNy4zNjMtMS4wNC40OTUtLjM5NS4xMzItLjg3NC4xOTgtMS40MzUuMTk4Wm0xLjI2Mi0xLjk4Yy42NiAwIDEuMTk2LS4xNTcgMS42MDktLjQ3LjQxMi0uMzE0LjYxOC0uODQxLjYxOC0xLjU4NHYtMi4wNzloLTEuNDFjLS45OSAwLTEuNy4xODItMi4xMjguNTQ1LS40MTMuMzQ2LS42MTkuODUtLjYxOSAxLjUxdi40NDVjMCAuNTYuMTczLjk3My41MiAxLjIzNy4zNjMuMjY0LjgzMy4zOTYgMS40MS4zOTZaIi8+PC9zdmc+",je="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0ibTE1IDI2LjgyMyAxMS42NTQtMTQuMTY1YTEgMSAwIDAgMC0uNzcyLTEuNjM1SDIxLjh2LTguMkg4LjJ2OC4ySDQuMTE4YTEgMSAwIDAgMC0uNzcyIDEuNjM1TDE1IDI2LjgyM1oiLz48L3N2Zz4=",Ne="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0ibTMgMTQuODIyIDE0LjE2NSAxMS42NTVhMSAxIDAgMCAwIDEuNjM1LS43NzJ2LTQuMDgySDI3di0xMy42aC04LjJWMy45NGExIDEgMCAwIDAtMS42MzUtLjc3MkwzIDE0LjgyMloiLz48L3N2Zz4=",De="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI3IDE0LjgyMiAxMi44MzUgMy4xNjhhMSAxIDAgMCAwLTEuNjM1Ljc3MnY0LjA4M0gzdjEzLjZoOC4ydjQuMDgyYTEgMSAwIDAgMCAxLjYzNS43NzJMMjcgMTQuODIyWiIvPjwvc3ZnPg==",Ee="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE1IDIuODIzIDMuMzQ2IDE2Ljk4N2ExIDEgMCAwIDAgLjc3MiAxLjYzNkg4LjJ2OC4yaDEzLjZ2LTguMmg0LjA4MmExIDEgMCAwIDAgLjc3Mi0xLjYzNkwxNSAyLjgyM1oiLz48L3N2Zz4=",ke="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNi40MTQgMS45NyAyOC4wMyAxMy41ODdhMiAyIDAgMCAxIDAgMi44MjhMMTYuNDE0IDI4LjAzYTIgMiAwIDAgMS0yLjgyOCAwTDEuOTcgMTYuNDE0YTIgMiAwIDAgMSAwLTIuODI4TDEzLjU4NiAxLjk3YTIgMiAwIDAgMSAyLjgyOCAwWiIvPjwvc3ZnPg==",Ze="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNyAxNWMwIDYuNjI3LTUuMzczIDEyLTEyIDEyUzMgMjEuNjI3IDMgMTUgOC4zNzMgMyAxNSAzczEyIDUuMzczIDEyIDEyWiIvPjwvc3ZnPg==",Te="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNC4wMDkgMy4yMTdhMiAyIDAgMCAxIDEuOTgyIDBsOC44MjYgNS4wMzhhMiAyIDAgMCAxIDEuMDA5IDEuNzM3djEwLjAxNmEyIDIgMCAwIDEtMS4wMDkgMS43MzdsLTguODI1IDUuMDM4YTIgMiAwIDAgMS0xLjk4MyAwbC04LjgyNi01LjAzOGEyIDIgMCAwIDEtMS4wMDktMS43MzdWOS45OTJhMiAyIDAgMCAxIDEuMDA5LTEuNzM3bDguODI2LTUuMDM4WiIvPjwvc3ZnPg==",We="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNC4yNDIgMy4yMjRhMiAyIDAgMCAxIDEuNTE2IDBsNy4wODIgMi45YTIgMiAwIDAgMSAxLjA4NyAxLjA3OWwyLjkxNSA2Ljk1N2EyIDIgMCAwIDEgMCAxLjU0NmwtMi45MTUgNi45NTdhMiAyIDAgMCAxLTEuMDg3IDEuMDc4bC03LjA4MiAyLjlhMiAyIDAgMCAxLTEuNTE2IDBsLTcuMDgyLTIuOWEyIDIgMCAwIDEtMS4wODctMS4wNzhsLTIuOTE1LTYuOTU3YTIgMiAwIDAgMSAwLTEuNTQ2bDIuOTE1LTYuOTU3QTIgMiAwIDAgMSA3LjE2IDYuMTI1bDcuMDgyLTIuOVoiLz48L3N2Zz4=",ze="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNSAzYzQuODUyIDAgOCAzLjgyMSA4IDguODE3djYuMzY2QzIzIDIzLjE4IDE5Ljg1MiAyNyAxNSAyN2MtNC44MiAwLTcuOTQ4LTMuNzcxLTgtOC43MjN2LTYuNDZDNyA2LjgyIDEwLjE0OCAzIDE1IDNaIi8+PC9zdmc+",Pe="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMy44MjQgMy44NGEyIDIgMCAwIDEgMi4zNTIgMEwyNi4yIDExLjEyNGEyIDIgMCAwIDEgLjcyNyAyLjIzNmwtMy44MyAxMS43ODdhMiAyIDAgMCAxLTEuOTAyIDEuMzgySDguODA0YTIgMiAwIDAgMS0xLjkwMi0xLjM4M0wzLjA3MiAxMy4zNmEyIDIgMCAwIDEgLjcyNy0yLjIzNkwxMy44MjQgMy44NFoiLz48L3N2Zz4=",Ye="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNSAzYTIgMiAwIDAgMSAyIDJ2MjBhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJWNWEyIDIgMCAwIDEgMi0yaDIwWiIvPjwvc3ZnPg==",Oe="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik01Ljc3MSAzYTIgMiAwIDAgMC0xLjk0OSAyLjQ1bDQuNjE2IDIwQTIgMiAwIDAgMCAxMC4zODYgMjdIMjQuMjNhMiAyIDAgMCAwIDEuOTQ5LTIuNDVsLTQuNjE2LTIwQTIgMiAwIDAgMCAxOS42MTMgM0g1Ljc3MVoiLz48L3N2Zz4=",Re="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNC4yMjkgM2EyIDIgMCAwIDEgMS45NDkgMi40NWwtNC42MTYgMjBBMiAyIDAgMCAxIDE5LjYxMyAyN0g1Ljc3MWEyIDIgMCAwIDEtMS45NDktMi40NWw0LjYxNi0yMEEyIDIgMCAwIDEgMTAuMzg2IDNIMjQuMjNaIi8+PC9zdmc+",Ge="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Im03LjM0NyAxNy43NC0uODEuNTg3LjgxLS41ODgtNC4xMTMtNS42NiA2LjY1NC0yLjE2MWEyIDIgMCAwIDAgMS0uNzI3TDE1IDMuNTMxbDQuMTEyIDUuNjYuODA5LS41ODgtLjgxLjU4OGEyIDIgMCAwIDAgMS4wMDEuNzI3bDYuNjU0IDIuMTYxLTQuMTEzIDUuNjZhMiAyIDAgMCAwLS4zODIgMS4xNzZ2Ni45OTZsLTYuNjUzLTIuMTYyLS4zMDkuOTUuMzEtLjk1YTIgMiAwIDAgMC0xLjIzNyAwbC4zMDkuOTUtLjMxLS45NS02LjY1MyAyLjE2MnYtNi45OTZhMiAyIDAgMCAwLS4zODEtMS4xNzZaIi8+PC9zdmc+",_e="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xOS42MTMgM2EyIDIgMCAwIDEgMS45NSAxLjU1bDQuNjE1IDIwYTIgMiAwIDAgMS0xLjk1IDIuNDVINS43NzJhMiAyIDAgMCAxLTEuOTQ5LTIuNDVsNC42MTYtMjBBMiAyIDAgMCAxIDEwLjM4NiAzaDkuMjI3WiIvPjwvc3ZnPg==",Be="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNy41NSAyNkgyLjQ1TDE1IDRsMTIuNTUgMjJaIi8+PC9zdmc+",Je="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNSAzYTIgMiAwIDAgMSAyIDJ2MjBhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJWNWEyIDIgMCAwIDEgMi0yaDIwWiIvPjxwYXRoIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Im04IDggMTQgMTRNMjIgOCA4IDIyIi8+PC9zdmc+",He="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQuOTk5LjVDNi45OTMuNS41IDYuOTkyLjUgMTVjMCA2LjQwNiA0LjE1NCAxMS44NDEgOS45MTYgMTMuNzYuNzI2LjEzMi45OS0uMzE2Ljk5LS43IDAtLjM0NS0uMDEyLTEuMjU2LS4wMi0yLjQ2Ni00LjAzMy44NzYtNC44ODQtMS45NDQtNC44ODQtMS45NDQtLjY2LTEuNjc1LTEuNjEtMi4xMjEtMS42MS0yLjEyMS0xLjMxNy0uOS4xLS44ODEuMS0uODgxIDEuNDU1LjEwMiAyLjIyIDEuNDk0IDIuMjIgMS40OTQgMS4yOTQgMi4yMTYgMy4zOTUgMS41NzYgNC4yMiAxLjIwNC4xMzMtLjkzNi41MDctMS41NzUuOTIxLTEuOTM3LTMuMjItLjM2Ny02LjYwNS0xLjYxLTYuNjA1LTcuMTY3IDAtMS41ODQuNTY2LTIuODc3IDEuNDkzLTMuODktLjE1LS4zNjctLjY0Ny0xLjg0Mi4xNDItMy44MzggMCAwIDEuMjE3LS4zOSAzLjk4NyAxLjQ4NUExMy45MjYgMTMuOTI2IDAgMCAxIDE1IDcuNTEyYzEuMjMyLjAwNiAyLjQ3Mi4xNjYgMy42My40ODcgMi43NjktMS44NzUgMy45ODQtMS40ODUgMy45ODQtMS40ODUuNzkxIDEuOTk2LjI5NCAzLjQ3LjE0NSAzLjgzNy45MyAxLjAxNCAxLjQ5IDIuMzA3IDEuNDkgMy44OTEgMCA1LjU3LTMuMzkgNi43OTYtNi42MiA3LjE1NS41Mi40NDguOTg0IDEuMzMzLjk4NCAyLjY4NiAwIDEuOTM4LS4wMTggMy41MDItLjAxOCAzLjk3NyAwIC4zODguMjYyLjg0Ljk5Ny42OThDMjUuMzQ5IDI2LjgzNiAyOS41IDIxLjQwNSAyOS41IDE1IDI5LjUgNi45OSAyMy4wMDcuNSAxNC45OTkuNVoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==",Ve="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTIuOSAxLjlhMSAxIDAgMCAwLTEgMXY0YTEgMSAwIDAgMCAyIDB2LTNoM2ExIDEgMCAxIDAgMC0yaC00Wk0xMS45IDEuOWExIDEgMCAxIDAgMCAyaDZhMSAxIDAgMSAwIDAtMmgtNlpNMTAuOSAyNi45YTEgMSAwIDAgMSAxLTFoNmExIDEgMCAxIDEgMCAyaC02YTEgMSAwIDAgMS0xLTFaTTMuOSAxMS45YTEgMSAwIDEgMC0yIDB2NmExIDEgMCAxIDAgMiAwdi02Wk0yNi45IDEwLjlhMSAxIDAgMCAxIDEgMXY2YTEgMSAwIDEgMS0yIDB2LTZhMSAxIDAgMCAxIDEtMVpNMjIuOSAxLjlhMSAxIDAgMSAwIDAgMmgzdjNhMSAxIDAgMSAwIDIgMHYtNGMwLS41NTItLjQ1LTEtMS4wMDItMUgyMi45Wk0yLjkgMjEuOWExIDEgMCAwIDEgMSAxdjNoM2ExIDEgMCAxIDEgMCAyaC00YTEgMSAwIDAgMS0xLTF2LTRhMSAxIDAgMCAxIDEtMVpNMjcuOSAyMi45YTEgMSAwIDEgMC0yIDBsLS4wMDIgM0gyMi45YTEgMSAwIDEgMCAwIDJoNGExIDEgMCAwIDAgMS0xdi00WiIvPjwvc3ZnPg==",Ue="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTQgMjYgMjYgNE0xIDE1YzMgNC44IDggOCAxNCA4czExLTMuMiAxNC04Yy0zLTQuOC04LTgtMTQtOFM0IDEwLjIgMSAxNVoiLz48L3N2Zz4=",Xe="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTUgNy4zOThhMy42MDIgMy42MDIgMCAxIDAgMCA3LjIwNCAzLjYwMiAzLjYwMiAwIDAgMCAwLTcuMjA0Wk0xMy4zOTggMTFhMS42MDIgMS42MDIgMCAxIDEgMy4yMDQgMCAxLjYwMiAxLjYwMiAwIDAgMS0zLjIwNCAwWiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNC41IDJoMjFBMi41IDIuNSAwIDAgMSAyOCA0LjV2MjFhMi41IDIuNSAwIDAgMS0yLjUgMi41aC0yMUEyLjUgMi41IDAgMCAxIDIgMjUuNXYtMjFBMi41IDIuNSAwIDAgMSA0LjUgMlpNMjYgNC41djE0LjA4NmwtMy4yOTMtMy4yOTNhMSAxIDAgMCAwLTEuNDE0IDBsLTUuNTQzIDUuNTQzLTcuMDE5LTcuNTE4YTEgMSAwIDAgMC0xLjQzOC0uMDI1TDQgMTYuNTg2VjQuNWEuNS41IDAgMCAxIC41LS41aDIxYS41LjUgMCAwIDEgLjUuNVptLTIyIDIxdi02LjA4NmwzLjk3NS0zLjk3NSA3LjAxNCA3LjUxM0wxNy43NDcgMjZINC41YS41LjUgMCAwIDEtLjUtLjVabTIxLjUuNWgtNS4wNTVsLTMuMzQtMy42OUwyMiAxNy40MTNsNCA0VjI1LjVhLjUuNSAwIDAgMS0uNS41WiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+",Fe="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNSAyNy4yOTVjNi43OSAwIDEyLjI5NS01LjUwNSAxMi4yOTUtMTIuMjk2QzI3LjI5NSA4LjIxIDIxLjc5IDIuNzA0IDE1IDIuNzA0UzIuNzA0IDguMjA5IDIuNzA0IDE0Ljk5OSA4LjIxIDI3LjI5NSAxNSAyNy4yOTVaIi8+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMyAyMWgybTIgMGgtMm0wIDB2LThoLTIiLz48Y2lyY2xlIGN4PSIxNSIgY3k9IjkiIHI9IjEuNSIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==",Ke="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTExIDlIOS4yNWMtMS4xNjIgMC0xLjc0MiAwLTIuMjI1LjA5Mi0xLjk4NC4zNzktMy41MzQgMS44NjctMy45MjkgMy43NzJDMyAxMy4zMjcgMyAxMy44ODQgMyAxNWMwIDEuMTE1IDAgMS42NzMuMDk2IDIuMTM2LjM5NSAxLjkwNSAxLjk0NSAzLjM5MyAzLjkyOSAzLjc3MkM3LjUwOCAyMSA4LjA4OCAyMSA5LjI1IDIxSDExbTgtMTJoMS43NWMxLjE2MiAwIDEuNzQyIDAgMi4yMjYuMDkyIDEuOTgzLjM3OSAzLjUzMyAxLjg2NyAzLjkyOCAzLjc3MkMyNyAxMy4zMjcgMjcgMTMuODg0IDI3IDE1YzAgMS4xMTUgMCAxLjY3My0uMDk2IDIuMTM2LS4zOTUgMS45MDUtMS45NDUgMy4zOTMtMy45MjggMy43NzItLjQ4My4wOTItMS4wNjQuMDkyLTIuMjI2LjA5MkgxOU0xMC4wMDIgMTVoMTAiLz48L3N2Zz4=",Qe="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik05IDE0Ljg0OGExIDEgMCAwIDEgMS0xaDkuNjQ2YTEgMSAwIDAgMSAxIDFWMjFhMSAxIDAgMCAxLTEgMUgxMGExIDEgMCAwIDEtMS0xdi02LjE1MloiLz48cGF0aCBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE4LjMxNyAxMy44NDh2LTIuMTc0QzE4LjMxNyA5LjQyNiAxNy4wNzMgOCAxNC44MjUgOHMtMy40OTYgMS40My0zLjQ5NiAzLjY3N3YyLjE3MSIvPjwvc3ZnPg==",$e="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik01IDE0LjAyMWExIDEgMCAwIDEgMS0xaDE4YTEgMSAwIDAgMSAxIDF2MTJhMSAxIDAgMCAxLTEgMUg2YTEgMSAwIDAgMS0xLTF2LTEyWiIvPjxwYXRoIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjEgMTMuMDIyVjkuMjg4YzAtMy44Ni0yLjEzNi02LjMxLTUuOTk3LTYuMzFDMTEuMTQzIDIuOTc5IDkgNS40MzQgOSA5LjI5NXYzLjcyOCIvPjwvc3ZnPg==",qe="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTMuOTIzIDZDMy40MTMgNiAzIDYuNDQ4IDMgN3MuNDEzIDEgLjkyMyAxaDIyLjE1NGMuNTEgMCAuOTIzLS40NDguOTIzLTFzLS40MTMtMS0uOTIzLTFIMy45MjNaTTMgMTVjMC0uNTUyLjQxMy0xIC45MjMtMWgyMi4xNTRjLjUxIDAgLjkyMy40NDguOTIzIDFzLS40MTMgMS0uOTIzIDFIMy45MjNDMy40MTMgMTYgMyAxNS41NTIgMyAxNVpNMyAyM2MwLS41NTIuNDEzLTEgLjkyMy0xaDIyLjE1NGMuNTEgMCAuOTIzLjQ0OC45MjMgMXMtLjQxMyAxLS45MjMgMUgzLjkyM0MzLjQxMyAyNCAzIDIzLjU1MiAzIDIzWiIvPjwvc3ZnPg==",et="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTQuNSAxNWExIDEgMCAwIDEgMS0xaDE5YTEgMSAwIDEgMSAwIDJoLTE5YTEgMSAwIDAgMS0xLTFaIi8+PC9zdmc+",tt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTI3LjI1IDE0LjVhMi4yNSAyLjI1IDAgMSAxLTQuNSAwIDIuMjUgMi4yNSAwIDAgMSA0LjUgMFpNNy4yNSAxNC41YTIuMjUgMi4yNSAwIDEgMS00LjUgMCAyLjI1IDIuMjUgMCAwIDEgNC41IDBaTTE3LjI1IDQuNWEyLjI1IDIuMjUgMCAxIDEtNC41IDAgMi4yNSAyLjI1IDAgMCAxIDQuNSAwWk0xNy4yNSAyNC41YTIuMjUgMi4yNSAwIDEgMS00LjUgMCAyLjI1IDIuMjUgMCAwIDEgNC41IDBaTTYuNSA0Ljc1YTEuNSAxLjUgMCAxIDEtMyAwIDEuNSAxLjUgMCAwIDEgMyAwWk02LjUgMjQuNzVhMS41IDEuNSAwIDEgMS0zIDAgMS41IDEuNSAwIDAgMSAzIDBaTTE2LjUgMTQuNWExLjUgMS41IDAgMSAxLTMgMCAxLjUgMS41IDAgMCAxIDMgMFpNMjYuNSAyNC43NWExLjUgMS41IDAgMSAxLTMgMCAxLjUgMS41IDAgMCAxIDMgMFpNMjYuNSA0Ljc1YTEuNSAxLjUgMCAxIDEtMyAwIDEuNSAxLjUgMCAwIDEgMyAwWiIvPjwvc3ZnPg==",it="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xIDJhMSAxIDAgMCAxIDEtMWgxMGExIDEgMCAwIDEgMSAxdjEwYTEgMSAwIDAgMS0xIDFIMmExIDEgMCAwIDEtMS0xVjJabTAgMTZhMSAxIDAgMCAxIDEtMWgxMGExIDEgMCAwIDEgMSAxdjEwYTEgMSAwIDAgMS0xIDFIMmExIDEgMCAwIDEtMS0xVjE4Wk0xNyAyYTEgMSAwIDAgMSAxLTFoMTBhMSAxIDAgMCAxIDEgMXYxMGExIDEgMCAwIDEtMSAxSDE4YTEgMSAwIDAgMS0xLTFWMlptMCAxNmExIDEgMCAwIDEgMS0xaDEwYTEgMSAwIDAgMSAxIDF2MTBhMSAxIDAgMCAxLTEgMUgxOGExIDEgMCAwIDEtMS0xVjE4WiIvPjwvc3ZnPg==",nt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyA0YTEgMSAwIDAgMC0xIDF2MjBhMSAxIDAgMCAwIDEgMWgxNmExIDEgMCAwIDAgMS0xVjkuNDE0TDE4LjU4NiA0SDdaTTQgNWEzIDMgMCAwIDEgMy0zaDExLjU4NkEyIDIgMCAwIDEgMjAgMi41ODZMMjUuNDE0IDhBMiAyIDAgMCAxIDI2IDkuNDE0VjI1YTMgMyAwIDAgMS0zIDNIN2EzIDMgMCAwIDEtMy0zVjVaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04IDlhMSAxIDAgMCAxIDEtMWg2YTEgMSAwIDEgMSAwIDJIOWExIDEgMCAwIDEtMS0xWm0wIDZhMSAxIDAgMCAxIDEtMWgxMmExIDEgMCAxIDEgMCAySDlhMSAxIDAgMCAxLTEtMVptMCA2YTEgMSAwIDAgMSAxLTFoMTJhMSAxIDAgMSAxIDAgMkg5YTEgMSAwIDAgMS0xLTFaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=",st="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTE2IDUuNWExIDEgMCAxIDAtMiAwVjE0SDUuNWExIDEgMCAxIDAgMCAySDE0djguNWExIDEgMCAxIDAgMiAwVjE2aDguNWExIDEgMCAxIDAgMC0ySDE2VjUuNVoiLz48L3N2Zz4=",ot="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNSAyNy4yOTVjNi43OSAwIDEyLjI5NS01LjUwNSAxMi4yOTUtMTIuMjk2QzI3LjI5NSA4LjIxIDIxLjc5IDIuNzA0IDE1IDIuNzA0UzIuNzA0IDguMjA5IDIuNzA0IDE0Ljk5OUMyLjcwNCAyMS43OSA4LjIxIDI3LjI5NSAxNSAyNy4yOTVaIi8+PGNpcmNsZSBjeD0iMTUiIGN5PSIyMSIgcj0iMS41IiBmaWxsPSIjMDAwIi8+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMi4yIiBkPSJNMTEgMTIuNWMwLTIgMS43LTMuNzUgNC0zLjc1czQgMS43NSA0IDMuNzVjMCAzLjE5LTQgMy4xNS00IDQuOSIvPjwvc3ZnPg==",rt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMi4zIiBkPSJNOSA4LjJjMC0zLjE2MSAzLjAzOS01LjUgNi01LjVzNiAyLjMzOSA2IDUuNWMwIDUuNTAzLTYgNS4zNDUtNiAxMC44Ii8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTE2Ljc1IDI0Ljk2NWExLjc1IDEuNzUgMCAxIDEtMy41IDAgMS43NSAxLjc1IDAgMCAxIDMuNSAwWiIvPjwvc3ZnPg==",at="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMjAuMjkzIDQuMjkzYTEgMSAwIDAgMSAxLjQxNCAwbDQgNGExIDEgMCAwIDEgMCAxLjQxNGwtNCA0YTEgMSAwIDAgMS0xLjQxNC0xLjQxNEwyMi41ODYgMTBIMTJhNyA3IDAgMSAwIDAgMTRoOGExIDEgMCAxIDEgMCAyaC04YTkgOSAwIDEgMSAwLTE4aDEwLjU4NmwtMi4yOTMtMi4yOTNhMSAxIDAgMCAxIDAtMS40MTRaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=",lt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PGNpcmNsZSBjeD0iMTIuNDA4IiBjeT0iMTIuNDA4IiByPSI5LjQwOCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMjcuMDggMjUuMjRhMS4zMDEgMS4zMDEgMCAwIDEtMS44NCAxLjg0TDE4Ljg5IDIwLjczYTEuMyAxLjMgMCAxIDEgMS44NC0xLjg0bDYuMzUxIDYuMzUxWiIvPjxwYXRoIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik03LjkwOCAxMi40MDhhNC41IDQuNSAwIDEgMCA0LjUtNC41Ii8+PGNpcmNsZSBjeD0iOS4yMTYiIGN5PSI5LjE1NSIgcj0iMSIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==",ct="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMSIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTE1LjU5NyA3LjE4NkEuMjUuMjUgMCAwIDAgMTYgNi45OVY1YzMuOTYzIDAgNi4zNy43MjcgNy44MjEgMi4xNzlDMjUuMjczIDguNjMgMjYgMTEuMDM3IDI2IDE1YTEgMSAwIDEgMCAyIDBjMC00LjExMi0uNzM1LTcuMjA2LTIuNzY1LTkuMjM1QzIzLjIwNSAzLjczNSAyMC4xMTMgMyAxNiAzVjEuMDExYS4yNS4yNSAwIDAgMC0uNDAzLS4xOTdsLTMuODQzIDIuOTg5YS4yNS4yNSAwIDAgMCAwIC4zOTVsMy44NDMgMi45ODhaIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMy41IDlBMS41IDEuNSAwIDAgMCAyIDEwLjV2MTdBMS41IDEuNSAwIDAgMCAzLjUgMjloMTdhMS41IDEuNSAwIDAgMCAxLjUtMS41di0xN0ExLjUgMS41IDAgMCAwIDIwLjUgOWgtMTdabS41IDJ2MTZoMTZWMTFINFoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==",dt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTE0LjQwMyA3LjIxN0EuMjUuMjUgMCAwIDEgMTQgNy4wMlY1LjAzYy0zLjk2MyAwLTYuMzcuNzI4LTcuODIxIDIuMThDNC43MjcgOC42NiA0IDExLjA2OCA0IDE1LjAzYTEgMSAwIDAgMS0yIDBjMC00LjExMi43MzUtNy4yMDUgMi43NjUtOS4yMzVDNi43OTUgMy43NjUgOS44ODggMy4wMzEgMTQgMy4wMzFWMS4wNDJhLjI1LjI1IDAgMCAxIC40MDMtLjE5N2wzLjg0MyAyLjk4OGEuMjUuMjUgMCAwIDEgMCAuMzk1bC0zLjg0MyAyLjk4OVoiLz48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yNi41IDkuMDNhMS41IDEuNSAwIDAgMSAxLjUgMS41djE3YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtMTdhMS41IDEuNSAwIDAgMS0xLjUtMS41di0xN2ExLjUgMS41IDAgMCAxIDEuNS0xLjVoMTdabS0uNSAydjE2SDEwdi0xNmgxNloiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==",ut="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIxIDQuNVY5bTQtMy41VjlNNC41IDIxSDltLTMuNS00SDltLTMuNSA4SDlNMiA5aDdtMCAwVjJtMCA3aDIwVjFIMXYyOGg4VjlabTgtMy41VjlNNS41IDEzSDltNC03LjVWOSIvPjwvc3ZnPg==",ht="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PGNpcmNsZSBjeD0iMTMiIGN5PSIxMyIgcj0iOCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiLz48cGF0aCBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJtMTkgMTkgNiA2Ii8+PC9zdmc+",pt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIxLjUgMTcuNSAxNSAyNG0wIDAtNi41LTYuNU0xNSAyNFY2Ii8+PC9zdmc+",gt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIxLjUgMTQuNSAxNSAyMW0wIDAtNi41LTYuNU0xNSAyMVYzbTEyIDI0SDMiLz48L3N2Zz4=",mt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI3IDlIMTZtMTEgMTJoLTNNMyA5aDNNMyAyMWgxMW0xLTEyYTQgNCAwIDEgMS04IDAgNCA0IDAgMCAxIDggMFptOCAxMmE0IDQgMCAxIDEtOCAwIDQgNCAwIDAgMSA4IDBaIi8+PC9zdmc+",It="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwLjc1IDEzLjdhMS43NSAxLjc1IDAgMSAwIDAtMy41IDEuNzUgMS43NSAwIDAgMCAwIDMuNVpNMTkuMjUgMTMuN2ExLjc1IDEuNzUgMCAxIDAgMC0zLjUgMS43NSAxLjc1IDAgMCAwIDAgMy41WiIvPjxwYXRoIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMC43NDUgMTlBNi45OTIgNi45OTIgMCAwIDEgMTUgMjJhNi45OTIgNi45OTIgMCAwIDEtNS43NDUtM00xNSAyNy4yOTZjNi43OSAwIDEyLjI5Ni01LjUwNSAxMi4yOTYtMTIuMjk2QzI3LjI5NiA4LjIxIDIxLjc5IDIuNzA0IDE1IDIuNzA0IDguMjEgMi43MDQgMi43MDQgOC4yMSAyLjcwNCAxNWMwIDYuNzkgNS41MDUgMTIuMjk2IDEyLjI5NiAxMi4yOTZaTTEwLjc1IDEzLjdhMS43NSAxLjc1IDAgMSAwIDAtMy41IDEuNzUgMS43NSAwIDAgMCAwIDMuNVptOC41IDBhMS43NSAxLjc1IDAgMSAwIDAtMy41IDEuNzUgMS43NSAwIDAgMCAwIDMuNVoiLz48L3N2Zz4=",ft="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik05IDN2MTFNMjEgM3YzTTkgMjd2LTNtMTIgM1YxNk05IDE1YTQgNCAwIDEgMSAwIDggNCA0IDAgMCAxIDAtOFptMTItOGE0IDQgMCAxIDEgMCA4IDQgNCAwIDAgMSAwLThaIi8+PC9zdmc+",yt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMSAxNWE0IDQgMCAxIDEtOCAwIDQgNCAwIDAgMSA4IDBabTE2LThhNCA0IDAgMSAxLTggMCA0IDQgMCAwIDEgOCAwWm0wIDE2YTQgNCAwIDEgMS04IDAgNCA0IDAgMCAxIDggMFpNMTkgMjFsLTgtNW04LTctOCA1Ii8+PC9zdmc+",bt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIwLjUgOUgyM2EyIDIgMCAwIDEgMiAydjEyYTIgMiAwIDAgMS0yIDJIN2EyIDIgMCAwIDEtMi0yVjExYTIgMiAwIDAgMSAyLTJoMi41bTUuNSA4VjNtLTQuNSAyLjVMMTUgMWw0LjUgNC41Ii8+PC9zdmc+",wt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMSIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0ibTQuNDIgNS43OTIgMy42MyA2LjEzNGguMTQxbDMuNjQ4LTYuMTM1aDQuMjk4bC01LjQ5MyA5IDUuNjE2IDloLTQuMzc3TDguMTkgMTcuNjQ4aC0uMTRMNC4zNTkgMjMuNzlIMGw1LjYzNC05LTUuNTI5LTloNC4zMTZaTTE4LjU0NSAyMy43OTF2LTE4aDMuODA2djE0Ljg2M2g3LjcxNnYzLjEzN0gxOC41NDVaIi8+PC9zdmc+",Ct="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTkgMjMuNzkxdi0xOGgzLjgwNnYxNC44NjNoNy43MTd2My4xMzdIOVoiLz48L3N2Zz4=",Mt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTUgNS43OTJoNC42OTNsNC45NTcgMTIuMDkzaC4yMTFsNC45NTctMTIuMDk0aDQuNjk0djE4SDIwLjgyVjEyLjA3NmgtLjE1bC00LjY1NyAxMS42MjhoLTIuNTE0TDguODQxIDEyLjAzMmgtLjE1djExLjc2SDV2LTE4WiIvPjwvc3ZnPg==",xt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTE4LjA2NSAxMS4wNjhjLS4wNjktLjY5LS4zNjItMS4yMjYtLjg4MS0xLjYwOC0uNTE5LS4zODItMS4yMjMtLjU3My0yLjExMi0uNTczLS42MDQgMC0xLjExNS4wODUtMS41My4yNTctLjQxNy4xNjUtLjczNi4zOTYtLjk1OS42OTJhMS42NjcgMS42NjcgMCAwIDAtLjMyNSAxLjAxYy0uMDExLjMxMy4wNTUuNTg2LjE5Ny44Mi4xNDguMjM0LjM1LjQzNi42MDcuNjA3LjI1Ny4xNjUuNTUzLjMxLjg5LjQzNi4zMzYuMTIuNjk1LjIyMyAxLjA3Ny4zMDhsMS41NzMuMzc2Yy43NjQuMTcxIDEuNDY1LjQgMi4xMDQuNjg0YTYuMzg2IDYuMzg2IDAgMCAxIDEuNjU5IDEuMDUyYy40NjcuNDE2LjgzLjkwNyAxLjA4NiAxLjQ3MS4yNjIuNTY0LjM5NiAxLjIxMS40MDIgMS45NDEtLjAwNiAxLjA3Mi0uMjggMi4wMDEtLjgyMSAyLjc4OC0uNTM2Ljc4LTEuMzExIDEuMzg4LTIuMzI2IDEuODIxLTEuMDEuNDI4LTIuMjI2LjY0Mi0zLjY1MS42NDItMS40MTQgMC0yLjY0Ni0uMjE3LTMuNjk0LS42NS0xLjA0NC0uNDM0LTEuODU5LTEuMDc1LTIuNDQ2LTEuOTI0LS41ODItLjg1NS0uODg2LTEuOTEzLS45MTUtMy4xNzNoMy41ODNjLjA0LjU4Ny4yMDggMS4wNzguNTA0IDEuNDcxLjMwMy4zODguNzA0LjY4MSAxLjIwNi44OC41MDguMTk1IDEuMDguMjkxIDEuNzE5LjI5MS42MjcgMCAxLjE3MS0uMDkgMS42MzMtLjI3My40NjgtLjE4My44My0uNDM2IDEuMDg2LS43NjEuMjU3LS4zMjUuMzg1LS42OTkuMzg1LTEuMTIgMC0uMzk0LS4xMTctLjcyNC0uMzUtLjk5Mi0uMjI5LS4yNjgtLjU2NS0uNDk2LTEuMDEtLjY4NC0uNDM5LS4xODgtLjk3Ny0uMzYtMS42MTYtLjUxNGwtMS45MDctLjQ3OGMtMS40NzYtLjM2LTIuNjQyLS45MjEtMy40OTctMS42ODVzLTEuMjgtMS43OTMtMS4yNzQtMy4wODdjLS4wMDYtMS4wNi4yNzYtMS45ODcuODQ2LTIuNzc5LjU3Ni0uNzkyIDEuMzY2LTEuNDEgMi4zNjktMS44NTYgMS4wMDMtLjQ0NCAyLjE0My0uNjY3IDMuNDItLjY2NyAxLjMgMCAyLjQzNS4yMjMgMy40MDQuNjY3Ljk3NC40NDUgMS43MzMgMS4wNjQgMi4yNzQgMS44NTYuNTQyLjc5Mi44MjEgMS43MS44MzggMi43NTRoLTMuNTQ4WiIvPjwvc3ZnPg==",At="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTYgNnYyYzAgNS42IDAgOC40IDEuMDkgMTAuNTRhMTAgMTAgMCAwIDAgNC4zNyA0LjM3QzEzLjYgMjQgMTYuNCAyNCAyMiAyNGgyIi8+PC9zdmc+",St="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTYgNnYxOGgxOCIvPjwvc3ZnPg==",vt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMi42IiBkPSJNMyAyOFYybTggMjZWMm04IDI2VjJtOCAyNlYyIi8+PC9zdmc+",Lt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMi42IiBkPSJNMjggMjdIMm0yNi04SDJtMjYtOEgybTI2LThIMiIvPjwvc3ZnPg==",jt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTIgMTJoMjZ2Nkgydi02Wk0wIDNhMSAxIDAgMCAxIDIgMHYyNGExIDEgMCAxIDEtMiAwVjNaTTI4IDNhMSAxIDAgMSAxIDIgMHYyNGExIDEgMCAwIDEtMiAwVjNaIi8+PC9zdmc+",Nt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTIgMWExIDEgMCAwIDEgMS0xaDI0YTEgMSAwIDEgMSAwIDJIM2ExIDEgMCAwIDEtMS0xWk0xMiAyaDZ2MjZoOWExIDEgMCAxIDEgMCAySDNhMSAxIDAgMSAxIDAtMmg5VjJaIi8+PC9zdmc+",Dt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTcgMjFoMTZNOSAxNWgxMk01IDloMjAiLz48L3N2Zz4=",Et="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTUgMjFoMjBNNSAxNWg3bTcgMGg2TTUgOWgyMCIvPjwvc3ZnPg==",kt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTUgMjFoMTZNNSAxNWgxME01IDloMjAiLz48L3N2Zz4=",Zt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTkgMjFoMTZtLTEwLTZoMTBNNSA5aDIwIi8+PC9zdmc+",Tt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI0IDE4LjQ2N1Y2bTAgMEgxMS41MzNNMjQgNiA3IDIzIi8+PC9zdmc+",Wt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMiAzLjVBMS41IDEuNSAwIDAgMSAzLjUgMmgyM0ExLjUgMS41IDAgMCAxIDI4IDMuNXYyM2ExLjUgMS41IDAgMCAxLTEuNSAxLjVoLTIzQTEuNSAxLjUgMCAwIDEgMiAyNi41di0yM1pNNCAyNlY0aDIydjIySDRaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTYgOC4wNzhhMSAxIDAgMSAwLTIgMHY1LjVIOC41YTEgMSAwIDEgMCAwIDJIMTR2NS41YTEgMSAwIDEgMCAyIDB2LTUuNWg1LjVhMSAxIDAgMSAwIDAtMkgxNnYtNS41WiIvPjwvc3ZnPg==",zt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0ibTYuNzM2IDEzLjY2LTMuNDMgMy40M2EyIDIgMCAwIDAgMCAyLjgyOGw1LjMwNCA1LjMwNGE1IDUgMCAwIDAgNy4wNzEgMGwxLjMwOC0xLjMwOE02LjczNiAxMy42NiAxNy44NTQgMi41NDNsMTAuMjUzIDEwLjI1M0wxNi45OSAyMy45MTRNNi43MzYgMTMuNjYgMTYuOTkgMjMuOTE0Ii8+PC9zdmc+",Pt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEwLjIgMjdINWEyIDIgMCAwIDEtMi0ydi01LjJNMTkuOCAyN0gyNWEyIDIgMCAwIDAgMi0ydi01LjJNMyAxMC4yVjVhMiAyIDAgMCAxIDItMmg1LjJtOS42IDBIMjVhMiAyIDAgMCAxIDIgMnY1LjIiLz48L3N2Zz4=",Yt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTguNjM2IDE2LjAyMmMtLjE5LS43MjMtLjM4LTEuNjE4LS43OC0yLjk1LS43NTctMi40OS0yLjA3NS00LjgtMi43MjMtNy4zMjYtLjQyNS0xLjgxIDEuMTItMy42NDMgMy4wNDYtMi45NjkgMi45NDkgMS4wMzYgMy44NjggNi4xMDkgNC4yODMgOC42NzhsLjE1Mi44NTZjLS4yMDMtMy43MDctLjQ2OS02LjEyNiAwLTkuMTcyLjQ2My0yLjg5IDQuODg4LTIuODI1IDUuMjU0LjAzOC4xODkgMi4wNzkuMTkgNC4xNTQuMTkgNi4yNDIgMCAuNDM3IDAgMy4wODIuMDM4IDIuNzk3LjExNC0xLjI1Ni4xNzEtNi4wNy42NDctNy40OTggMS4wNC0zLjE5IDQuODkzLTIuMDI4IDUuMDgzLjg3Ni4xNTcgMi4xLS4wNjIgNC4yOS0uMTE0IDYuMzk0IDAgLjA3Ni0uMDIuNTcuMDM4LjM0Mi41NzQtMS43ODYuMDc2LTYuNzM2IDMuMTg3LTYuMTE5IDEuMDI3LjIwNCAyLjkzMSAxLjU5IDEuNTQyIDYuMjg5LTEuOTYgNi42MzEtNC41IDkuNDk4LTQuNSAxNi41aC0xNGMwLTUtNi42MS04LjgyLTguNS0xMi41OTgtLjQxOC0uNzk5LS42MjYtMS44MDctLjM2LTIuNTMuNDM4LTEuMTIzIDEuMjU0LTEuNzEzIDIuNTY4LTEuNTggMi4xNDIuMjA2IDMuMDA4IDIuMDMyIDQuOTQ5IDMuNzNaIi8+PC9zdmc+",Ot="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTExLjYwNCAyNS4xMjMgMjcuMTUxIDkuNTU0IDIwLjAzMiAyLjM1IDQuNDg2IDE3LjkxOG03LjExOCA3LjIwNS0zLjgxOCAxLjYzNi00LjkzNy01LjAyMyAxLjYzNy0zLjgxOW03LjExOCA3LjIwNi03LjExOC03LjIwNiIvPjwvc3ZnPg==",Rt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI1IDUgNSAyNSIvPjwvc3ZnPg==",Gt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTUgNy4zOThhMy42MDIgMy42MDIgMCAxIDAgMCA3LjIwNCAzLjYwMiAzLjYwMiAwIDAgMCAwLTcuMjA0Wk0xMy4zOTggMTFhMS42MDIgMS42MDIgMCAxIDEgMy4yMDQgMCAxLjYwMiAxLjYwMiAwIDAgMS0zLjIwNCAwWiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNC41IDJoMjFBMi41IDIuNSAwIDAgMSAyOCA0LjV2MjFhMi41IDIuNSAwIDAgMS0yLjUgMi41aC0yMUEyLjUgMi41IDAgMCAxIDIgMjUuNXYtMjFBMi41IDIuNSAwIDAgMSA0LjUgMlpNMjYgNC41djE0LjA4NmwtMy4yOTMtMy4yOTNhMSAxIDAgMCAwLTEuNDE0IDBsLTUuNTQzIDUuNTQzLTcuMDE5LTcuNTE4YTEgMSAwIDAgMC0xLjQzOC0uMDI1TDQgMTYuNTg2VjQuNWEuNS41IDAgMCAxIC41LS41aDIxYS41LjUgMCAwIDEgLjUuNVptLTIyIDIxdi02LjA4NmwzLjk3NS0zLjk3NSA3LjAxNCA3LjUxM0wxNy43NDcgMjZINC41YS41LjUgMCAwIDEtLjUtLjVabTIxLjUuNWgtNS4wNTVsLTMuMzQtMy42OUwyMiAxNy40MTNsNCA0VjI1LjVhLjUuNSAwIDAgMS0uNS41WiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+",_t="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMjMuODU0LjMxNWMuNDItLjQyIDEuMTAyLS40MiAxLjUyMyAwbDQuMzA4IDQuMzA4Yy40Mi40Mi40MiAxLjEwMyAwIDEuNTIzbC04LjQ5MiA4LjQ5MmMtLjE2NC4xNjQtLjM1My4zLS41Ni40MDNsLTguNDYgNC4yM2ExLjA3NyAxLjA3NyAwIDAgMS0xLjQ0NC0xLjQ0NWw0LjIzLTguNDU5Yy4xMDMtLjIwNy4yNC0uMzk2LjQwMy0uNTZMMjMuODU0LjMxNVptLjc2MSAyLjI4NS03LjczIDcuNzMtMi4yMzYgNC40NzMuNTQ4LjU0OCA0LjQ3My0yLjIzNiA3LjczLTcuNzNMMjQuNjE1IDIuNlptLTUuMzg0LS40NDYtMi4xNTQgMi4xNTRoLTguODNjLS45MjMgMC0xLjU1IDAtMi4wMzUuMDQtLjQ3Mi4wMzktLjcxNC4xMDktLjg4Mi4xOTRhMi4xNTQgMi4xNTQgMCAwIDAtLjk0MS45NDJjLS4wODYuMTY4LS4xNTYuNDEtLjE5NS44ODItLjA0LjQ4NC0uMDQgMS4xMTItLjA0IDIuMDM0djEzLjM1NGMwIC45MjIgMCAxLjU1LjA0IDIuMDM0LjAzOS40NzIuMTA5LjcxNC4xOTUuODgyLjIwNi40MDUuNTM2LjczNS45NC45NDEuMTcuMDg2LjQxLjE1Ni44ODMuMTk1LjQ4NS4wNCAxLjExMi4wNCAyLjAzNC4wNEgyMS42Yy45MjIgMCAxLjU1IDAgMi4wMzQtLjA0LjQ3Mi0uMDM5LjcxNC0uMTA5Ljg4Mi0uMTk1LjQwNi0uMjA2LjczNS0uNTM2Ljk0Mi0uOTQuMDg1LS4xNy4xNTUtLjQxLjE5NC0uODgzLjA0LS40ODUuMDQtMS4xMTIuMDQtMi4wMzR2LTguODMxbDIuMTU0LTIuMTU0djExLjAyOWMwIC44NjcgMCAxLjU4My0uMDQ3IDIuMTY2LS4wNS42MDUtLjE1NiAxLjE2MS0uNDIyIDEuNjg0YTQuMzA4IDQuMzA4IDAgMCAxLTEuODgzIDEuODgzYy0uNTIzLjI2Ni0xLjA3OS4zNzItMS42ODQuNDIxLS41ODMuMDQ4LTEuMjk5LjA0OC0yLjE2NS4wNDhIOC4yMDJjLS44NjcgMC0xLjU4MyAwLTIuMTY1LS4wNDgtLjYwNi0uMDUtMS4xNjItLjE1NS0xLjY4NS0uNDIyYTQuMzA4IDQuMzA4IDAgMCAxLTEuODgyLTEuODgyYy0uMjY3LS41MjMtLjM3My0xLjA4LS40MjItMS42ODRDMiAyMy4zOCAyIDIyLjY2NSAyIDIxLjc5N1Y4LjM1NmMwLS44NjcgMC0xLjU4My4wNDgtMi4xNjYuMDQ5LS42MDUuMTU1LTEuMTYxLjQyMi0xLjY4NGE0LjMwOCA0LjMwOCAwIDAgMSAxLjg4Mi0xLjg4M2MuNTIzLS4yNjYgMS4wOC0uMzcyIDEuNjg0LS40MjIuNTgzLS4wNDcgMS4yOTktLjA0NyAyLjE2Ni0uMDQ3SDE5LjIzWiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+",Bt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0ibTQuNjM2IDIzLjE4MiAxLjU5OS0zLjczYS41LjUgMCAwIDEgLjEwNi0uMTU3TDIyLjYzNiAzIDI3IDcuMzY0IDEwLjcwNCAyMy42NTlhLjUwMS41MDEgMCAwIDEtLjE1Ni4xMDZsLTMuNzMgMS41OTltLTIuMTgyLTIuMTgyTDMgMjdsMy44MTgtMS42MzZtLTIuMTgyLTIuMTgyIDIuMTgyIDIuMTgyIi8+PHBhdGggZmlsbD0iIzAwMCIgZD0ibTMgMjcgMS43MTQtNEw3IDI1LjI4NiAzIDI3WiIvPjwvc3ZnPg==",Jt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Im0xNy4wNzIgMjguNzEzIDQuMjQ1LTEuOTM1LTQuNDE1LTkuNzAxIDguMDM3LS4zNTVMNy4xMjMgMS4yODd2MjMuNTVsNS41MjUtNS44MjYgNC40MjQgOS43MDJaIi8+PC9zdmc+",Ht="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTExLjUwOSAyNGExIDEgMCAxIDAgMCAydi0yWm03IDJhMSAxIDAgMSAwIDAtMnYyWk03IDVWNGExIDEgMCAwIDAtMSAxaDFabTE2IDBoMWExIDEgMCAwIDAtMS0xdjFabS0xIDRhMSAxIDAgMSAwIDIgMGgtMlpNNiA5YTEgMSAwIDAgMCAyIDBINlptMTAgMTUuNXYtMTloLTJ2MTloMlpNMTEuNTA5IDI2aDd2LTJoLTd2MlpNNyA2aDE2VjRIN3YyWm0xNyAzVjVoLTJ2NGgyWk04IDlWNUg2djRoMloiLz48L3N2Zz4=",Vt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNSAzLjN2MS44aDlWMy4zaC05Wm0xMC44IDEuOFYyLjg1YTEuMzUgMS4zNSAwIDAgMC0xLjM1LTEuMzVoLTkuOUExLjM1IDEuMzUgMCAwIDAgOC43IDIuODVWNS4xSDMuM2EuOS45IDAgMCAwIDAgMS44aDEuOTYxYzAgLjA1LjAwMi4xMDIuMDA3LjE1NGwxLjcgMTkuOEExLjggMS44IDAgMCAwIDguNzYgMjguNWgxMi40NzhhMS44IDEuOCAwIDAgMCAxLjc5NC0xLjY0NmwxLjctMTkuOGMuMDA0LS4wNTIuMDA2LS4xMDMuMDA2LS4xNTRIMjYuN2EuOS45IDAgMSAwIDAtMS44aC01LjRabTEuNjM5IDEuOEg3LjA2bDEuNyAxOS44aDEyLjQ3OGwxLjctMTkuOFoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTExLjMyNSAxMS40MDNhLjkuOSAwIDAgMSAuOTcyLjgyMmwuOSAxMC44YS45LjkgMCAxIDEtMS43OTQuMTVsLS45LTEwLjhhLjkuOSAwIDAgMSAuODIyLS45NzJaTTE3LjYyNSAyMy45OTdhLjkuOSAwIDAgMS0uODIyLS45NzJsLjktMTAuOGEuOS45IDAgMCAxIDEuNzk0LjE1bC0uOSAxMC44YS45LjkgMCAwIDEtLjk3Mi44MjJaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=",Ut="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTggMTJoMTRsLTcgOS03LTlaIi8+PC9zdmc+",Xt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTggMThoMTRsLTctOS03IDlaIi8+PC9zdmc+",Ft="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIwLjcyIDQuMTM3YTUuMjU0IDUuMjU0IDAgMCAwLTUuMjUzIDUuMjU2YzAgLjQxLjA0Ny44MS4xMzUgMS4xOTVhMTQuOTE5IDE0LjkxOSAwIDAgMS0xMC44MjktNS40OSA1LjI1MSA1LjI1MSAwIDAgMC0uNzEgMi42NDFjMCAxLjgyMy45MjggMy40MzIgMi4zMzcgNC4zNzRhNS4yNDEgNS4yNDEgMCAwIDEtMi4zOC0uNjU4di4wNjhhNS4yNTYgNS4yNTYgMCAwIDAgNC4yMTQgNS4xNTIgNS4yOTQgNS4yOTQgMCAwIDEtMi4zNzIuMDkgNS4yNTcgNS4yNTcgMCAwIDAgNC45MDggMy42NDcgMTAuNTQyIDEwLjU0MiAwIDAgMS02LjUyNiAyLjI1Yy0uNDI0IDAtLjg0Mi0uMDI1LTEuMjU0LS4wNzNhMTQuODU4IDE0Ljg1OCAwIDAgMCA4LjA1MyAyLjM2YzkuNjY1IDAgMTQuOTQ4LTguMDA1IDE0Ljk0OC0xNC45NDcgMC0yLjk2LTIuMDk0LTUuODY1LTUuMjcxLTUuODY1WiIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik0yNi4zOTMgNy4xMzhhMTAuNTIgMTAuNTIgMCAwIDAgMy4wMTctLjgyN2wtLjAwMy4wMDNhMTAuNjggMTAuNjggMCAwIDEtMi42MiAyLjcxOGwtMS40Mi0zLjUyN2ExMC40ODggMTAuNDg4IDAgMCAwIDMuMzM2LTEuMjc1IDUuMjY4IDUuMjY4IDAgMCAxLTIuMzEgMi45MDhaIi8+PC9zdmc+",Kt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOS43MDcgNC4yOTNhMSAxIDAgMCAxIDAgMS40MTRMNy40MTQgOEgxOGE5IDkgMCAxIDEgMCAxOGgtOGExIDEgMCAxIDEgMC0yaDhhNyA3IDAgMSAwIDAtMTRINy40MTRsMi4yOTMgMi4yOTNhMSAxIDAgMCAxLTEuNDE0IDEuNDE0bC00LTRhMSAxIDAgMCAxIDAtMS40MTRsNC00YTEgMSAwIDAgMSAxLjQxNCAwWiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+",Qt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTIuOSAxLjlhMSAxIDAgMCAwLTEgMXY0YTEgMSAwIDAgMCAyIDB2LTNoM2ExIDEgMCAxIDAgMC0yaC00Wk0xMS45IDEuOWExIDEgMCAxIDAgMCAyaDZhMSAxIDAgMSAwIDAtMmgtNlpNMTAuOSAyNi45YTEgMSAwIDAgMSAxLTFoNmExIDEgMCAxIDEgMCAyaC02YTEgMSAwIDAgMS0xLTFaTTMuOSAxMS45YTEgMSAwIDEgMC0yIDB2NmExIDEgMCAxIDAgMiAwdi02Wk0yNi45IDEwLjlhMSAxIDAgMCAxIDEgMXY2YTEgMSAwIDEgMS0yIDB2LTZhMSAxIDAgMCAxIDEtMVpNMjcuOSAyMi45YTEgMSAwIDEgMC0yIDBsLS4wMDIgM0gyMi45YTEgMSAwIDEgMCAwIDJoNGExIDEgMCAwIDAgMS0xdi00WiIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTI3LjI5MyAzLjcwNyAzLjcwNyAyNy4yOTNhMSAxIDAgMCAxLTEuNDE0LTEuNDE0TDI1Ljg3OSAyLjI5M2ExIDEgMCAxIDEgMS40MTQgMS40MTRaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=",$t="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMCAxNS40NjFhMSAxIDAgMCAxIDEtMWg4Ljc3YTEgMSAwIDAgMSAxIDFWMjFhMSAxIDAgMCAxLTEgMUgxMWExIDEgMCAwIDEtMS0xdi01LjUzOVoiLz48cGF0aCBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE4LjYxNiAxNC40NjF2LTMuMDg0QzE4LjYxNiA5LjMgMTcuNDYyIDggMTUuMzgzIDhjLTEuMTQxIDAtMi4wMDMuMzc0LTIuNTQ4IDEuMDc3LS40NDcuNTc3LS42ODEgMS4zNi0uNjgxIDIuMjk3Ii8+PC9zdmc+",qt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik01IDE1YTEgMSAwIDAgMSAxLTFoMThhMSAxIDAgMCAxIDEgMXYxMmExIDEgMCAwIDEtMSAxSDZhMSAxIDAgMCAxLTEtMVYxNVoiLz48cGF0aCBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIxIDE0VjguMjcyQzIxIDQuNDEyIDE4Ljg1OCAyIDE0Ljk5NyAyYy0yLjEyIDAtMy43Mi42OTUtNC43MzIgMkM5LjQzNSA1LjA3MiA5IDYuNTI2IDkgOC4yNjciLz48L3N2Zz4=",ei="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTE5IDE1YTQgNCAwIDEgMS04IDAgNCA0IDAgMCAxIDggMFoiLz48L3N2Zz4=",ti="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PGNpcmNsZSBjeD0iMTYuNCIgY3k9IjIxLjM4IiByPSIxLjUiIGZpbGw9IiMwMDAiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTUuMDU0IDkuNGExLjM0NyAxLjM0NyAwIDEgMSAyLjY5MiAwbC0uMzA4IDguMDAyYTEuMDQgMS4wNCAwIDAgMS0yLjA3NiAwTDE1LjA1MyA5LjRaIi8+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yOS45NiAyMy44NSAxNi41MTQgMS4yOTNhLjYuNiAwIDAgMC0xLjAzIDBMMi4wNCAyMy44NWEuNi42IDAgMCAwIC41MTUuOTA3aDI2Ljg4OGEuNi42IDAgMCAwIC41MTUtLjkwN1oiLz48L3N2Zz4=",ii="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PGNpcmNsZSBjeD0iMTIuNDA4IiBjeT0iMTIuNDA4IiByPSI5LjQwOCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiLz48cmVjdCB3aWR0aD0iMi42MDIiIGhlaWdodD0iOS4xMDciIHg9IjExLjEwNyIgeT0iNy44NTQiIGZpbGw9IiMwMDAiIHJ4PSIxLjMwMSIvPjxyZWN0IHdpZHRoPSIyLjYwMiIgaGVpZ2h0PSI5LjEwNyIgeD0iMTYuOTYxIiB5PSIxMS4xMDciIGZpbGw9IiMwMDAiIHJ4PSIxLjMwMSIgdHJhbnNmb3JtPSJyb3RhdGUoOTAgMTYuOTYgMTEuMTA3KSIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik0yNy4wOCAyNS4yNGExLjMwMSAxLjMwMSAwIDAgMS0xLjg0IDEuODRMMTguODkgMjAuNzNhMS4zIDEuMyAwIDEgMSAxLjg0LTEuODRsNi4zNTEgNi4zNTFaIi8+PC9zdmc+",ni="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgZmlsbD0ibm9uZSI+PGNpcmNsZSBjeD0iMTIuNDA4IiBjeT0iMTIuNDA4IiByPSI5LjQwOCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiLz48cmVjdCB3aWR0aD0iMi42MDIiIGhlaWdodD0iOS4xMDciIHg9IjE2Ljk2MSIgeT0iMTEuMTA3IiBmaWxsPSIjMDAwIiByeD0iMS4zMDEiIHRyYW5zZm9ybT0icm90YXRlKDkwIDE2Ljk2IDExLjEwNykiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMjcuMDggMjUuMjRhMS4zMDEgMS4zMDEgMCAwIDEtMS44NCAxLjg0TDE4Ljg5IDIwLjczYTEuMyAxLjMgMCAxIDEgMS44NC0xLjg0bDYuMzUxIDYuMzUxWiIvPjwvc3ZnPg==",si=i.p+"drawing/ar-cf3360a3251fd569.json",oi=i.p+"drawing/ca-3ec185bf193f0e4a.json",ri=i.p+"drawing/da-3e7032a846418073.json",ai=i.p+"drawing/de-ef7f7ad0dceb8679.json",li="data:application/json;base64,e30=",ci=i.p+"drawing/es-f6ba4a7e449da821.json",di="data:application/json;base64,ewoJImFjdGlvbi5icmluZy1mb3J3YXJkIjogItin2YbYqtmC2KfZhCDYqNmHINiz2YXYqiDYrNmE2YgiLAoJImFjdGlvbi5icmluZy10by1mcm9udCI6ICLYp9mG2KrZgtin2YQg2KjZhyDYrNmE2YgiLAoJImFjdGlvbi5jb3B5IjogItqp2b7bjCIsCgkiYWN0aW9uLmN1dCI6ICLYqNix24zYr9mGIiwKCSJhY3Rpb24uZGVsZXRlIjogItit2LDZgSIsCgkiYWN0aW9uLmR1cGxpY2F0ZSI6ICLYqtqp2KvbjNix2qnYsdiv2YYiLAoJImFjdGlvbi5mbGlwLWhvcml6b250YWwiOiAi2YjYp9ix2YjZhtmH4oCM2LPYp9iy24wg2KfZgdmC24wiLAoJImFjdGlvbi5mbGlwLXZlcnRpY2FsIjogItmI2KfYsdmI2YbZh+KAjNiz2KfYstuMINi52YXZiNiv24wiLAoJImFjdGlvbi5mbGlwLWhvcml6b250YWwuc2hvcnQiOiAi2YjYp9ix2YjZhtmH4oCM2LPYp9iy24wg2KfZgdmC24wiLAoJImFjdGlvbi5mbGlwLXZlcnRpY2FsLnNob3J0IjogItmI2KfYsdmI2YbZh+KAjNiz2KfYstuMINi52YXZiNiv24wiLAoJImFjdGlvbi5ncm91cCI6ICLar9ix2YjZh+KAjNio2YbYr9uMIiwKCSJhY3Rpb24uaW5zZXJ0LW1lZGlhIjogItio2KfYsdqv2LDYp9ix24wg2LHYs9in2YbZhyIsCgkiYWN0aW9uLnBhc3RlIjogItis2KfbjOKAjNqv2LDYp9ix24wiLAoJImFjdGlvbi5yZWRvIjogItin2YbYrNin2YUg2K/ZiNio2KfYsdmHIiwKCSJhY3Rpb24uc2VsZWN0LWFsbCI6ICLYp9mG2KrYrtin2Kgg2YfZhdmHIiwKCSJhY3Rpb24uc2VsZWN0LW5vbmUiOiAi2KfZhtiq2K7Yp9ioINmH24zahuKAjNuM2qkiLAoJImFjdGlvbi5zZW5kLWJhY2t3YXJkIjogItin2YbYqtmC2KfZhCDYqNmHINiz2YXYqiDYudmC2KgiLAoJImFjdGlvbi5zZW5kLXRvLWJhY2siOiAi2KfZhtiq2YLYp9mEINio2Ycg2LnZgtioIiwKCSJhY3Rpb24udG9nZ2xlLWRhcmstbW9kZS5tZW51IjogItit2KfZhNiqINiq2KfYsduM2qkiLAoJImFjdGlvbi50b2dnbGUtZGFyay1tb2RlIjogItit2KfZhNiqINiq2KfYsduM2qkiLAoJImFjdGlvbi50b2dnbGUtZGVidWctbW9kZS5tZW51IjogItit2KfZhNiqINi524zYqOKAjNuM2KfYqNuMIiwKCSJhY3Rpb24udG9nZ2xlLWRlYnVnLW1vZGUiOiAi2K3Yp9mE2Kog2LnbjNio4oCM24zYp9io24wiLAoJImFjdGlvbi50b2dnbGUtZm9jdXMtbW9kZS5tZW51IjogItit2KfZhNiqINiq2YXYsdqp2LIiLAoJImFjdGlvbi50b2dnbGUtZm9jdXMtbW9kZSI6ICLYrdin2YTYqiDYqtmF2LHaqdiyIiwKCSJhY3Rpb24udG9nZ2xlLWdyaWQubWVudSI6ICLZhtmF2KfbjNi0INiu2LfZiNi3INix2KfZh9mG2YXYpyIsCgkiYWN0aW9uLnVuZG8iOiAi2YjYp9qv2LHYr9in2YbbjCIsCgkiYWN0aW9uLnVuZ3JvdXAiOiAi2YTYutmIINqv2LHZiNmH4oCM2KjZhtiv24wiLAoJImFjdGlvbi56b29tLWluIjogItio2LLYsdqv4oCM2YbZhdin24zbjCIsCgkiYWN0aW9uLnpvb20tb3V0IjogItqp2Yjahtqp4oCM2YbZhdin24zbjCIsCgkiYWN0aW9uLnpvb20tdG8tZml0IjogItio2LLYsdqv4oCM2YbZhdin24zbjCDZhdiq2YbYp9iz2Kgg2KjYpyDYtdmB2K3ZhyIsCgkiYWN0aW9uLnpvb20tdG8tc2VsZWN0aW9uIjogItio2LLYsdqv4oCM2YbZhdin24zbjCDYqNmHINmG2KfYrduM2Ycg2KfZhtiq2K7Yp9io4oCM2LTYr9mHIiwKCSJnZW8tc3R5bGUuZWxsaXBzZSI6ICLar9ix2K/bjCIsCgkiZ2VvLXN0eWxlLnJlY3RhbmdsZSI6ICLahtmH2KfYsdqv2YjYtCIsCgkiZ2VvLXN0eWxlLnRyaWFuZ2xlIjogItiz2YfigIzar9mI2LQiLAoJImFycm93aGVhZFN0YXJ0LXN0eWxlLmFycm93IjogItmB2ZDZhNmQ2LQiLAoJImFycm93aGVhZFN0YXJ0LXN0eWxlLnRyaWFuZ2xlIjogItiz2YfigIzar9mI2LQiLAoJImFycm93aGVhZEVuZC1zdHlsZS5hcnJvdyI6ICLZgdmQ2YTZkNi0IiwKCSJhcnJvd2hlYWRFbmQtc3R5bGUudHJpYW5nbGUiOiAi2LPZh+KAjNqv2YjYtCIsCgkic3BsaW5lLXN0eWxlLmxpbmUiOiAi2K7YtyIsCgkidG9vbC5zZWxlY3QiOiAi2KfZhtiq2K7Yp9ioIiwKCSJ0b29sLmRyYXciOiAi2LHYs9mFIiwKCSJ0b29sLmVyYXNlciI6ICLZvtin2qnigIzaqdmGIiwKCSJ0b29sLmFycm93IjogItmB2ZDZhNmQ2LQiLAoJInRvb2wuZWxsaXBzZSI6ICLar9ix2K/bjCIsCgkidG9vbC5yZWN0YW5nbGUiOiAi2obZh9in2LHar9mI2LQiLAoJInRvb2wudHJpYW5nbGUiOiAi2LPZh+KAjNqv2YjYtCIsCgkidG9vbC5ub3RlIjogItio2LHar9mHINqG2LPYqNin2YYiLAoJInRvb2wudGV4dCI6ICLZhdiq2YYiLAoJIm1lbnUuY29weS1hcyI6ICLaqdm+24wg2KjZh+KAjNi52YbZiNin2YYiLAoJIm1lbnUuZWRpdCI6ICLZiNuM2LHYp9uM2LQiLAoJIm1lbnUuZXhwb3J0LWFzIjogItiu2LHZiNis24zigIzar9ix2YHYqtmGINio2YfigIzYudmG2YjYp9mGIiwKCSJtZW51LmZpbGUiOiAi2b7YsdmI2YbYr9mHIiwKCSJtZW51Lmxhbmd1YWdlIjogItiy2KjYp9mGIiwKCSJtZW51LnByZWZlcmVuY2VzIjogItiq2LHYrNuM2K3Yp9iqIiwKCSJtZW51LnZpZXciOiAi2YbZhdin24zYtCIsCgkiY29udGV4dC1tZW51LmNvcHktYXMiOiAi2qnZvtuMINio2YfigIzYudmG2YjYp9mGIiwKCSJjb250ZXh0LW1lbnUuZXhwb3J0LWFzIjogItiu2LHZiNis24zigIzar9ix2YHYqtmGINio2YfigIzYudmG2YjYp9mGIiwKCSJjb250ZXh0LW1lbnUubW92ZS10by1wYWdlIjogItin2YbYqtmC2KfZhCDYqNmHINio2LHar9mHIiwKCSJwYWdlLW1lbnUuY3JlYXRlLW5ldy1wYWdlIjogItin24zYrNin2K8g2KjYsdqv2YciLAoJInBhZ2UtbWVudS5wYWdlIjogItio2LHar9mHIiwKCSJwYWdlLW1lbnUuZWRpdC1zdGFydCI6ICLZiNuM2LHYp9uM2LQiLAoJInBhZ2UtbWVudS5zdWJtZW51LmR1cGxpY2F0ZS1wYWdlIjogItiq2qnYq9uM2LHaqdix2K/ZhiIsCgkicGFnZS1tZW51LnN1Ym1lbnUuZGVsZXRlIjogItit2LDZgSIsCgkic2hhcmUtbWVudS5jb3B5LWxpbmsiOiAi2qnZvtuM4oCM2qnYsdiv2YYg2b7bjNmI2YbYryDYr9i52YjYqiIsCgkic2hhcmUtbWVudS5jb3B5LXJlYWRvbmx5LWxpbmsiOiAi2qnZvtuM4oCM2qnYsdiv2YYg2b7bjNmI2YbYryDYutuM2LHZgtin2KjZhCDZiNuM2LHYp9uM2LQiLAoJImhlbHAtbWVudS5rZXlib2FyZC1zaG9ydGN1dHMiOiAi2YXbjNin2YbigIzYqNix2YfYp9uMINi12YHYrdmH4oCM2qnZhNuM2K8iLAoJImVkaXQtbGluay1kaWFsb2cuY2FuY2VsIjogItmE2LrZiCIsCgkiZWRpdC1wYWdlcy1kaWFsb2cuY3JlYXRlLW5ldy1wYWdlIjogItin24zYrNin2K8g2KjYsdqv2YciLAoJImVkaXQtcGFnZXMtZGlhbG9nLmRlbGV0ZSI6ICLYrdiw2YEiLAoJImVkaXQtcGFnZXMtZGlhbG9nLmR1cGxpY2F0ZS1wYWdlIjogItiq2qnYq9uM2LHaqdix2K/ZhiIsCgkic2hvcnRjdXRzLWRpYWxvZy50aXRsZSI6ICLZhduM2KfZhuKAjNio2LHZh9in24wg2LXZgdit2YfigIzaqdmE24zYryIsCgkic2hvcnRjdXRzLWRpYWxvZy5lZGl0IjogItmI24zYsdin24zYtCIsCgkic2hvcnRjdXRzLWRpYWxvZy5maWxlIjogItm+2LHZiNmG2K/ZhyIsCgkic2hvcnRjdXRzLWRpYWxvZy5wcmVmZXJlbmNlcyI6ICLYqtix2KzbjNit2KfYqiIsCgkic2hvcnRjdXRzLWRpYWxvZy50b29scyI6ICLYp9io2LLYp9ix2YfYpyIsCgkic2hvcnRjdXRzLWRpYWxvZy50cmFuc2Zvcm0iOiAi2KrYutuM24zYsSDYtNqp2YQiLAoJInNob3J0Y3V0cy1kaWFsb2cudmlldyI6ICLZhtmF2KfbjNi0IiwKCSJzdHlsZS1wYW5lbC50aXRsZSI6ICLYs9io2qnigIzZh9inIiwKCSJzdHlsZS1wYW5lbC5hbGlnbiI6ICLYqtix2KfYsiIsCgkic3R5bGUtcGFuZWwuY29sb3IiOiAi2LHZhtqvIiwKCSJzdHlsZS1wYW5lbC5kYXNoIjogItiu2LfigIzahtuM2YYiLAoJInN0eWxlLXBhbmVsLmZpbGwiOiAi2KrZiNm+2Y/YsSIsCgkic3R5bGUtcGFuZWwuZm9udCI6ICLZgtmE2YUiLAoJInN0eWxlLXBhbmVsLnNpemUiOiAi2KfZhtiv2KfYstmHIiwKCSJzdHlsZS1wYW5lbC50ZXh0IjogItmF2KrZhiIsCgkiYWN0aW9uLmFsaWduLWJvdHRvbSI6ICLYqtix2KfYsiDYqNmHINm+2KfbjNuM2YYiLAoJImFjdGlvbi5hbGlnbi1jZW50ZXItaG9yaXpvbnRhbCI6ICLYqtix2KfYsiDYqNmHINmF2LHaqdiyINin2YHZgtuMIiwKCSJhY3Rpb24uYWxpZ24tY2VudGVyLXZlcnRpY2FsIjogItiq2LHYp9iyINio2Ycg2YXYsdqp2LIg2LnZhdmI2K/bjCIsCgkiYWN0aW9uLmFsaWduLWNlbnRlci1ob3Jpem9udGFsLnNob3J0IjogItiq2LHYp9iyINio2Ycg2YXYsdqp2LIg2KfZgdmC24wiLAoJImFjdGlvbi5hbGlnbi1jZW50ZXItdmVydGljYWwuc2hvcnQiOiAi2KrYsdin2LIg2KjZhyDZhdix2qnYsiDYudmF2YjYr9uMIiwKCSJhY3Rpb24uYWxpZ24tbGVmdCI6ICLYqtix2KfYsiDYqNmHINqG2b4iLAoJImFjdGlvbi5hbGlnbi1yaWdodCI6ICLYqtix2KfYsiDYqNmHINix2KfYs9iqIiwKCSJhY3Rpb24uYWxpZ24tdG9wIjogItiq2LHYp9iyINio2Ycg2KjYp9mE2KciLAoJImFjdGlvbi5kaXN0cmlidXRlLWhvcml6b250YWwiOiAi2b7Yrti04oCM2qnYsdiv2YYg2KfZgdmC24wiLAoJImFjdGlvbi5kaXN0cmlidXRlLXZlcnRpY2FsIjogItm+2K7YtOKAjNqp2LHYr9mGINi52YXZiNiv24wiLAoJImFjdGlvbi5kaXN0cmlidXRlLWhvcml6b250YWwuc2hvcnQiOiAi2b7Yrti04oCM2qnYsdiv2YYg2KfZgdmC24wiLAoJImFjdGlvbi5kaXN0cmlidXRlLXZlcnRpY2FsLnNob3J0IjogItm+2K7YtOKAjNqp2LHYr9mGINi52YXZiNiv24wiLAoJImFjdGlvbi5zdHJldGNoLWhvcml6b250YWwiOiAi2qnYtOKAjNii2YjYsdiv2YYg2KfZgdmC24wiLAoJImFjdGlvbi5zdHJldGNoLXZlcnRpY2FsIjogItqp2LTigIzYotmI2LHYr9mGINi52YXZiNiv24wiLAoJImFjdGlvbi5zdHJldGNoLWhvcml6b250YWwuc2hvcnQiOiAi2qnYtOKAjNii2YjYsdiv2YYg2KfZgdmC24wiLAoJImFjdGlvbi5zdHJldGNoLXZlcnRpY2FsLnNob3J0IjogItqp2LTigIzYotmI2LHYr9mGINi52YXZiNiv24wiLAoJImFjdGlvbi50b2dnbGUtZ3JpZCI6ICLZhtmF2KfbjNi0INiu2LfZiNi3INix2KfZh9mG2YXYpyIsCgkiYWN0aW9uLnRvZ2dsZS1zbmFwLW1vZGUubWVudSI6ICLZh9mF24zYtNmHINmG2YLYp9i3INqG2LPYqNin2YYg2LHYpyDZhti02KfZhiDYqNiv2YciLAoJImFjdGlvbi50b2dnbGUtc25hcC1tb2RlIjogItmH2YXbjNi02Ycg2YbZgtin2Lcg2obYs9io2KfZhiDYsdinINmG2LTYp9mGINio2K/ZhyIsCgkiYWN0aW9uLnRvZ2dsZS10cmFuc3BhcmVudC5jb250ZXh0LW1lbnUiOiAi2LTZgdin2YEiLAoJImFjdGlvbi50b2dnbGUtdHJhbnNwYXJlbnQubWVudSI6ICLYtNmB2KfZgSIsCgkiY29sb3Itc3R5bGUuYmxhY2siOiAi2YXYtNqp24wiLAoJImNvbG9yLXN0eWxlLmJsdWUiOiAi2KLYqNuMIiwKCSJjb2xvci1zdHlsZS5ncmVlbiI6ICLYs9io2LIiLAoJImNvbG9yLXN0eWxlLmdyZXkiOiAi2K7Yp9qp2LPYqtix24wiLAoJImNvbG9yLXN0eWxlLm9yYW5nZSI6ICLZhtin2LHZhtis24wiLAoJImNvbG9yLXN0eWxlLnJlZCI6ICLZgtix2YXYsiIsCgkiY29sb3Itc3R5bGUudmlvbGV0IjogItio2YbZgdi0IiwKCSJjb2xvci1zdHlsZS55ZWxsb3ciOiAi2LLYsdivIiwKCSJmaWxsLXN0eWxlLnNvbGlkIjogItiq2YjZvtmP2LEiLAoJImRhc2gtc3R5bGUuZGFzaGVkIjogItiu2LfigIzahtuM2YYiLAoJImRhc2gtc3R5bGUuZG90dGVkIjogItmG2YLYt9mH4oCM2obbjNmGIiwKCSJkYXNoLXN0eWxlLmRyYXciOiAi2LHYs9mFIiwKCSJkYXNoLXN0eWxlLnNvbGlkIjogItiq2YjZvtmP2LEiLAoJInNpemUtc3R5bGUucyI6ICLaqdmI2obaqSIsCgkic2l6ZS1zdHlsZS5tIjogItmF2KrZiNiz2LciLAoJInNpemUtc3R5bGUubCI6ICLYqNiy2LHaryIsCgkiZm9udC1zdHlsZS5kcmF3IjogItix2LPZhSIsCgkidG9vbC5saW5lIjogItiu2LciLAoJImhlbHAtbWVudS5kaXNjb3JkIjogItiv24zYs9qp2YjYsdivIiwKCSJoZWxwLW1lbnUuZ2l0aHViIjogItqv24zYquKAjNmH2KfYqCIsCgkiaGVscC1tZW51LnR3aXR0ZXIiOiAi2KrZiNuM24zYqtixIiwKCSJsaW5rcy1tZW51LmRpc2NvcmQiOiAi2K/bjNiz2qnZiNix2K8iLAoJImxpbmtzLW1lbnUuZ2l0aHViIjogItqv24zYquKAjNmH2KfYqCIsCgkibGlua3MtbWVudS50d2l0dGVyIjogItiq2YjbjNuM2KrYsSIsCgkiZW1iZWQtZGlhbG9nLmNhbmNlbCI6ICLZhNi62YgiLAoJInRvb2wtcGFuZWwuc2hhcGVzIjogIti02qnZhOKAjNmH2KciLAoJInRvb2wtcGFuZWwudG9vbHMiOiAi2KfYqNiy2KfYsdmH2KciLAoJImZvY3VzLW1vZGUudG9nZ2xlLWZvY3VzLW1vZGUiOiAi2K3Yp9mE2Kog2KrZhdix2qnYsiIsCgkiZmlsZS1zeXN0ZW0uY29uZmlybS1vcGVuLmNhbmNlbCI6ICLZhNi62YgiCn0K",ui=i.p+"drawing/fi-1dce6328eb5e71ca.json",hi=i.p+"drawing/fr-79340bed743acf73.json",pi="data:application/json;base64,ewogICAgImFjdGlvbi5hbGlnbi1ib3R0b20iOiAiQWxpw7FhciBhYmFpeG8iLAogICAgImFjdGlvbi5hbGlnbi1jZW50ZXItaG9yaXpvbnRhbCI6ICJBbGnDsWFyIGFvIGNlbnRybyBob3Jpem9udGFsbWVudGUiLAogICAgImFjdGlvbi5hbGlnbi1jZW50ZXItdmVydGljYWwiOiAiQWxpw7FhciBhbyBjZW50cm8gdmVydGljYWxtZW50ZSIsCiAgICAiYWN0aW9uLmFsaWduLWNlbnRlci1ob3Jpem9udGFsLnNob3J0IjogIkFsacOxYXIgYW8gY2VudHJvIGhvcml6b250YWxtZW50ZSIsCiAgICAiYWN0aW9uLmFsaWduLWNlbnRlci12ZXJ0aWNhbC5zaG9ydCI6ICJBbGnDsWFyIGFvIGNlbnRybyB2ZXJ0aWNhbG1lbnRlIiwKICAgICJhY3Rpb24uYWxpZ24tbGVmdCI6ICJBbGnDsWFyIMOhIGVzcXVlcmRhIiwKICAgICJhY3Rpb24uYWxpZ24tcmlnaHQiOiAiQWxpw7FhciDDoSBkZXJlaXRhIiwKICAgICJhY3Rpb24uYWxpZ24tdG9wIjogIkFsacOxYXIgYXJyaWJhIiwKICAgICJhY3Rpb24uYnJpbmctZm9yd2FyZCI6ICJNb3ZlciBhZGlhbnRlIiwKICAgICJhY3Rpb24uYnJpbmctdG8tZnJvbnQiOiAiTW92ZXIgYW8gZnJvbnRlIiwKICAgICJhY3Rpb24uY29weSI6ICJDb3BpYXIiLAogICAgImFjdGlvbi5jdXQiOiAiQ29ydGFyIiwKICAgICJhY3Rpb24uZGVsZXRlIjogIkJvcnJhciIsCiAgICAiYWN0aW9uLmRpc3RyaWJ1dGUtaG9yaXpvbnRhbCI6ICJEaXN0cmlidcOtciBob3Jpem9udGFsbWVudGUiLAogICAgImFjdGlvbi5kaXN0cmlidXRlLXZlcnRpY2FsIjogIkRpc3RyaWJ1w61yIHZlcnRpY2FsbWVudGUiLAogICAgImFjdGlvbi5kaXN0cmlidXRlLWhvcml6b250YWwuc2hvcnQiOiAiRGlzdHJpYnXDrXIgaG9yaXpvbnRhbG1lbnRlIiwKICAgICJhY3Rpb24uZGlzdHJpYnV0ZS12ZXJ0aWNhbC5zaG9ydCI6ICJEaXN0cmlidcOtciB2ZXJ0aWNhbG1lbnRlIiwKICAgICJhY3Rpb24uZHVwbGljYXRlIjogIkR1cGxpY2FyIiwKICAgICJhY3Rpb24uZmxpcC1ob3Jpem9udGFsIjogIlZvbHRlYXIgaG9yaXpvbnRhbG1lbnRlIiwKICAgICJhY3Rpb24uZmxpcC12ZXJ0aWNhbCI6ICJWb2x0ZWFyIHZlcnRpY2FsbWVudGUiLAogICAgImFjdGlvbi5mbGlwLWhvcml6b250YWwuc2hvcnQiOiAiVm9sdGVhciBob3Jpem9udGFsbWVudGUiLAogICAgImFjdGlvbi5mbGlwLXZlcnRpY2FsLnNob3J0IjogIlZvbHRlYXIgdmVydGljYWxtZW50ZSIsCiAgICAiYWN0aW9uLmdyb3VwIjogIkFncnVwYXIiLAogICAgImFjdGlvbi5pbnNlcnQtbWVkaWEiOiAiU3ViaXIgbWVkaW9zIiwKICAgICJhY3Rpb24ucGFzdGUiOiAiUGVnYXIiLAogICAgImFjdGlvbi5yZWRvIjogIlJlZmFjZXIiLAogICAgImFjdGlvbi5zZWxlY3QtYWxsIjogIlNlbGVjaW9uYXIgdG9kbyIsCiAgICAiYWN0aW9uLnNlbGVjdC1ub25lIjogIlNlbGVjaW9uYXIgbmFkYSIsCiAgICAiYWN0aW9uLnNlbmQtYmFja3dhcmQiOiAiTW92ZXIgYXRyw6FzIiwKICAgICJhY3Rpb24uc2VuZC10by1iYWNrIjogIk1vdmVyIGFvIGZvbmRvIiwKICAgICJhY3Rpb24uc3RyZXRjaC1ob3Jpem9udGFsIjogIkVzdGlyYXIgaG9yaXpvbnRhbG1lbnRlIiwKICAgICJhY3Rpb24uc3RyZXRjaC12ZXJ0aWNhbCI6ICJFc3RpcmFyIHZlcnRpY2FsbWVudGUiLAogICAgImFjdGlvbi5zdHJldGNoLWhvcml6b250YWwuc2hvcnQiOiAiRXN0aXJhciBob3Jpem9udGFsbWVudGUiLAogICAgImFjdGlvbi5zdHJldGNoLXZlcnRpY2FsLnNob3J0IjogIkVzdGlyYXIgdmVydGljYWxtZW50ZSIsCiAgICAiYWN0aW9uLnRvZ2dsZS1kYXJrLW1vZGUubWVudSI6ICJNb2RvIGVzY3VybyIsCiAgICAiYWN0aW9uLnRvZ2dsZS1kYXJrLW1vZGUiOiAiTW9kbyBlc2N1cm8iLAogICAgImFjdGlvbi50b2dnbGUtZGVidWctbW9kZS5tZW51IjogIk1vZG8gZGVwdXJhY2nDs24iLAogICAgImFjdGlvbi50b2dnbGUtZGVidWctbW9kZSI6ICJNb2RvIGRlcHVyYWNpw7NuIiwKICAgICJhY3Rpb24udG9nZ2xlLWZvY3VzLW1vZGUubWVudSI6ICJNb2RvIGNvbmNlbnRyYWNpw7NuIiwKICAgICJhY3Rpb24udG9nZ2xlLWZvY3VzLW1vZGUiOiAiTW9kbyBjb25jZW50cmFjacOzbiIsCiAgICAiYWN0aW9uLnRvZ2dsZS1ncmlkLm1lbnUiOiAiQW1vc2FyIGN1YWRyw61jdWxhIiwKICAgICJhY3Rpb24udG9nZ2xlLWdyaWQiOiAiQW1vc2FyIGN1YWRyw61jdWxhIiwKICAgICJhY3Rpb24udG9nZ2xlLXNuYXAtbW9kZS5tZW51IjogIkFtb3NhciBwdW50b3MgZGUgYXh1c3RlIiwKICAgICJhY3Rpb24udG9nZ2xlLXNuYXAtbW9kZSI6ICJBbW9zYXIgcHVudG9zIGRlIGF4dXN0ZSIsCiAgICAiYWN0aW9uLnRvZ2dsZS10cmFuc3BhcmVudC5jb250ZXh0LW1lbnUiOiAiVHJhbnNwYXJlbnRlIiwKICAgICJhY3Rpb24udG9nZ2xlLXRyYW5zcGFyZW50Lm1lbnUiOiAiVHJhbnNwYXJlbnRlIiwKICAgICJhY3Rpb24udW5kbyI6ICJEZXNmYWNlciIsCiAgICAiYWN0aW9uLnVuZ3JvdXAiOiAiRGVzYWdydXBhciIsCiAgICAiYWN0aW9uLnpvb20taW4iOiAiQWNoZWdhciIsCiAgICAiYWN0aW9uLnpvb20tb3V0IjogIkFmYXN0YXIiLAogICAgImFjdGlvbi56b29tLXRvLWZpdCI6ICJBeHVzdGFyIMOhIHZlbnTDoSIsCiAgICAiYWN0aW9uLnpvb20tdG8tc2VsZWN0aW9uIjogIkFjaGVnYXIgw6Egc2VsZWNjacOzbiIsCiAgICAiY29sb3Itc3R5bGUuYmxhY2siOiAiTmVncm8iLAogICAgImNvbG9yLXN0eWxlLmJsdWUiOiAiQXp1bCIsCiAgICAiY29sb3Itc3R5bGUuZ3JlZW4iOiAiVmVyZGUiLAogICAgImNvbG9yLXN0eWxlLmdyZXkiOiAiR3JpcyIsCiAgICAiY29sb3Itc3R5bGUub3JhbmdlIjogIkxhcmFueGEiLAogICAgImNvbG9yLXN0eWxlLnJlZCI6ICJWZXJtZWxsbyIsCiAgICAiY29sb3Itc3R5bGUudmlvbGV0IjogIlZpb2xldGEiLAogICAgImNvbG9yLXN0eWxlLnllbGxvdyI6ICJBbWFyZWxvIiwKICAgICJmaWxsLXN0eWxlLnNvbGlkIjogIkNvbnTDrW51byIsCiAgICAiZGFzaC1zdHlsZS5kYXNoZWQiOiAiRGlzY29udMOtbnVvIiwKICAgICJkYXNoLXN0eWxlLmRvdHRlZCI6ICJQdW50ZWFkbyIsCiAgICAiZGFzaC1zdHlsZS5kcmF3IjogIkRlYnV4YXIiLAogICAgImRhc2gtc3R5bGUuc29saWQiOiAiQ29udMOtbnVvIiwKICAgICJzaXplLXN0eWxlLnMiOiAiUGVxdWVubyIsCiAgICAic2l6ZS1zdHlsZS5tIjogIk1lZGlhbm8iLAogICAgInNpemUtc3R5bGUubCI6ICJHcmFuZGUiLAogICAgImZvbnQtc3R5bGUuZHJhdyI6ICJEZWJ1eGFyIiwKICAgICJnZW8tc3R5bGUuZWxsaXBzZSI6ICJFbGlwc2UiLAogICAgImdlby1zdHlsZS5yZWN0YW5nbGUiOiAiUmVjdMOhbmd1bG8iLAogICAgImdlby1zdHlsZS50cmlhbmdsZSI6ICJUcmnDoW5ndWxvIiwKICAgICJhcnJvd2hlYWRTdGFydC1zdHlsZS5hcnJvdyI6ICJGcmVjaGEiLAogICAgImFycm93aGVhZFN0YXJ0LXN0eWxlLnRyaWFuZ2xlIjogIlRyacOhbmd1bG8iLAogICAgImFycm93aGVhZEVuZC1zdHlsZS5hcnJvdyI6ICJGcmVjaGEiLAogICAgImFycm93aGVhZEVuZC1zdHlsZS50cmlhbmdsZSI6ICJUcmnDoW5ndWxvIiwKICAgICJzcGxpbmUtc3R5bGUubGluZSI6ICJMacOxYSIsCiAgICAidG9vbC5zZWxlY3QiOiAiU2VsZWNjaW9uYXIiLAogICAgInRvb2wuZHJhdyI6ICJEZWJ1eGFyIiwKICAgICJ0b29sLmVyYXNlciI6ICJCb3JyYWRvciIsCiAgICAidG9vbC5hcnJvdyI6ICJGcmVjaGEiLAogICAgInRvb2wuZWxsaXBzZSI6ICJFbGlwc2UiLAogICAgInRvb2wubGluZSI6ICJMacOxYSIsCiAgICAidG9vbC5yZWN0YW5nbGUiOiAiUmVjdMOhbmd1bG8iLAogICAgInRvb2wudHJpYW5nbGUiOiAiVHJpw6FuZ3VsbyIsCiAgICAidG9vbC5ub3RlIjogIlBlZ2F0aW5hIiwKICAgICJ0b29sLnRleHQiOiAiVGV4dG8iLAogICAgIm1lbnUuY29weS1hcyI6ICJDb3BpYXIgY29tbyIsCiAgICAibWVudS5lZGl0IjogIkVkaXRhciIsCiAgICAibWVudS5leHBvcnQtYXMiOiAiRXhwb3J0YXIgY29tbyIsCiAgICAibWVudS5maWxlIjogIkFycXVpdm8iLAogICAgIm1lbnUubGFuZ3VhZ2UiOiAiSWRpb21hIiwKICAgICJtZW51LnByZWZlcmVuY2VzIjogIlByZWZlcmVuY2lhcyIsCiAgICAibWVudS52aWV3IjogIlZlciIsCiAgICAiY29udGV4dC1tZW51LmNvcHktYXMiOiAiQ29waWFyIGNvbW8iLAogICAgImNvbnRleHQtbWVudS5leHBvcnQtYXMiOiAiRXhwb3J0YXIgY29tbyIsCiAgICAiY29udGV4dC1tZW51Lm1vdmUtdG8tcGFnZSI6ICJNb3ZlciDDoSBww6F4aW5hIiwKICAgICJwYWdlLW1lbnUuY3JlYXRlLW5ldy1wYWdlIjogIkNyZWFyIHDDoXhpbmEiLAogICAgInBhZ2UtbWVudS5wYWdlIjogIlDDoXhpbmEiLAogICAgInBhZ2UtbWVudS5lZGl0LXN0YXJ0IjogIkVkaXRhciIsCiAgICAicGFnZS1tZW51LnN1Ym1lbnUuZHVwbGljYXRlLXBhZ2UiOiAiRHVwbGljYXIiLAogICAgInBhZ2UtbWVudS5zdWJtZW51LmRlbGV0ZSI6ICJCb3JyYXIiLAogICAgInNoYXJlLW1lbnUuY29weS1saW5rIjogIkNvcGlhciBpbnZpdGFjacOzbiIsCiAgICAic2hhcmUtbWVudS5jb3B5LXJlYWRvbmx5LWxpbmsiOiAiQ29waWFyIGludml0YWNpw7NuIChzw7MgbGVjdHVyYSkiLAogICAgImhlbHAtbWVudS5kaXNjb3JkIjogIkRpc2NvcmQiLAogICAgImhlbHAtbWVudS5naXRodWIiOiAiR2l0SHViIiwKICAgICJoZWxwLW1lbnUua2V5Ym9hcmQtc2hvcnRjdXRzIjogIkF0YWxsb3MgZGUgdGVjbGFkbyIsCiAgICAiaGVscC1tZW51LnR3aXR0ZXIiOiAiVHdpdHRlciIsCiAgICAibGlua3MtbWVudS5kaXNjb3JkIjogIkRpc2NvcmQiLAogICAgImxpbmtzLW1lbnUuZ2l0aHViIjogIkdpdEh1YiIsCiAgICAibGlua3MtbWVudS50d2l0dGVyIjogIlR3aXR0ZXIiLAogICAgImVkaXQtbGluay1kaWFsb2cuY2FuY2VsIjogIkNhbmNlbGFyIiwKICAgICJlbWJlZC1kaWFsb2cuY2FuY2VsIjogIkNhbmNlbGFyIiwKICAgICJlZGl0LXBhZ2VzLWRpYWxvZy5jcmVhdGUtbmV3LXBhZ2UiOiAiQ3JlYXIgcMOheGluYSIsCiAgICAiZWRpdC1wYWdlcy1kaWFsb2cuZGVsZXRlIjogIkJvcnJhciIsCiAgICAiZWRpdC1wYWdlcy1kaWFsb2cuZHVwbGljYXRlLXBhZ2UiOiAiRHVwbGljYXIiLAogICAgInNob3J0Y3V0cy1kaWFsb2cudGl0bGUiOiAiQXRhbGxvcyBkZSB0ZWNsYWRvIiwKICAgICJzaG9ydGN1dHMtZGlhbG9nLmVkaXQiOiAiRWRpdGFyIiwKICAgICJzaG9ydGN1dHMtZGlhbG9nLmZpbGUiOiAiQXJxdWl2byIsCiAgICAic2hvcnRjdXRzLWRpYWxvZy5wcmVmZXJlbmNlcyI6ICJQcmVmZXJlbmNpYXMiLAogICAgInNob3J0Y3V0cy1kaWFsb2cudG9vbHMiOiAiRmVycmFtZW50YXMiLAogICAgInNob3J0Y3V0cy1kaWFsb2cudHJhbnNmb3JtIjogIlRyYW5zZm9ybWFyIiwKICAgICJzaG9ydGN1dHMtZGlhbG9nLnZpZXciOiAiVmVyIiwKICAgICJzdHlsZS1wYW5lbC50aXRsZSI6ICJFc3RpbG9zIiwKICAgICJzdHlsZS1wYW5lbC5hbGlnbiI6ICJBbGnDsWFtZW50byIsCiAgICAic3R5bGUtcGFuZWwuY29sb3IiOiAiQ29yIiwKICAgICJzdHlsZS1wYW5lbC5kYXNoIjogIkxpw7FhIiwKICAgICJzdHlsZS1wYW5lbC5maWxsIjogIlJlY2hlbyIsCiAgICAic3R5bGUtcGFuZWwuZm9udCI6ICJGb250ZSIsCiAgICAic3R5bGUtcGFuZWwuc2l6ZSI6ICJUYW1hw7FvIiwKICAgICJzdHlsZS1wYW5lbC50ZXh0IjogIlRleHRvIiwKICAgICJ0b29sLXBhbmVsLnNoYXBlcyI6ICJGb3JtYXMiLAogICAgInRvb2wtcGFuZWwudG9vbHMiOiAiRmVycmFtZW50YXMiLAogICAgImZvY3VzLW1vZGUudG9nZ2xlLWZvY3VzLW1vZGUiOiAiTW9kbyBjb25jZW50cmFjacOzbiIsCiAgICAiZmlsZS1zeXN0ZW0uZmlsZS1vcGVuLWVycm9yLmdlbmVyaWMtY29ycnVwdGVkLWZpbGUiOiAiTyBhcnF1aXZvIHF1ZSBpbnRlbnRvdSBhYnJpciBlc3TDoSBjb3Jyb21waWRvLiIsCiAgICAiZmlsZS1zeXN0ZW0uY29uZmlybS1vcGVuLnRpdGxlIjogIlNvYnJlc2NyaWJpciBvIHByb3hlY3RvIGFjdHVhbD8iLAogICAgImZpbGUtc3lzdGVtLmNvbmZpcm0tb3Blbi5kZXNjcmlwdGlvbiI6ICJBYnJpciB1biBhcnF1aXZvIHZhaSByZW1wbGF6YXIgbyBhY3R1YWwgcHJveGVjdG8gZSBjYWxxdWVyYSBjYW1iaW8gc2VuIGdhcmRhciBwZXJkZXJhc2UuIEVzdMOhcyBzZWd1cm8gZGUgcXVlIHF1ZXJlcyBjb250aW51YXI/IiwKICAgICJmaWxlLXN5c3RlbS5jb25maXJtLW9wZW4uY2FuY2VsIjogIkNhbmNlbGFyIiwKICAgICJmaWxlLXN5c3RlbS5jb25maXJtLW9wZW4ub3BlbiI6ICJBYnJpciBhcnF1aXZvIiwKICAgICJmaWxlLXN5c3RlbS5jb25maXJtLW9wZW4uZG9udC1zaG93LWFnYWluIjogIk5vbiBwcmVndW50YXIgb3V0cmEgdmV6IiwKICAgICJ0b2FzdC5lcnJvci5leHBvcnQtZmFpbC50aXRsZSI6ICJFcnJvIG5hIGV4cG9ydGFjacOzbiIsCiAgICAidG9hc3QuZXJyb3IuZXhwb3J0LWZhaWwuZGVzYyI6ICJFcnJvIGFvIGV4cG9ydGFyIGEgaW1heGUiLAogICAgInRvYXN0LmVycm9yLmNvcHktZmFpbC50aXRsZSI6ICJFcnJvIG5hIGNvcGlhIiwKICAgICJ0b2FzdC5lcnJvci5jb3B5LWZhaWwuZGVzYyI6ICJFcnJvIGFvIGNvcGlhciBhIGltYXhlIiwKICAgICJmaWxlLXN5c3RlbS5zaGFyZWQtZG9jdW1lbnQtZmlsZS1vcGVuLWVycm9yLnRpdGxlIjogIk5vbiBzZSBwdWlkbyBhYnJpciBvIGFycXVpdm8iLAogICAgImZpbGUtc3lzdGVtLnNoYXJlZC1kb2N1bWVudC1maWxlLW9wZW4tZXJyb3IuZGVzY3JpcHRpb24iOiAiQWJyaXIgYXJxdWl2b3MgZGVuZGUgcHJveGVjdG9zIGNvbXBhcnRpZG9zIG5vbiBlc3TDoSBwZXJtaXRpZG8uIiwKICAgICJ2c2NvZGUuZmlsZS1vcGVuLnRpdGxlIjogIk1pZ3JhciBhcnF1aXZvIiwKICAgICJ2c2NvZGUuZmlsZS1vcGVuLmRvbnQtc2hvdy1hZ2FpbiI6ICJOb24gcHJlZ3VudGFyIG91dHJhIHZleiIsCiAgICAidnNjb2RlLmZpbGUtb3Blbi5kZXNjIjogIkVzdGUgYXJxdWl2byBmb2kgY3JlYWRvIGN1bmhhIHZlcnNpw7NuIGFudGlnYSBkZSB0bGRyYXcuIFF1ZXJlcyBhY3R1YWxpemFsbyBwYXJhIHF1ZSBmdW5jaW9uZSBjYSBub3ZhIHZlcnNpw7NuPyIsCiAgICAidnNjb2RlLmNvbmZpcm0tb3Blbi5jYW5jZWwiOiAiUGVjaGFyIGFycXVpdm8iLAogICAgInZzY29kZS5jb25maXJtLW9wZW4ub3BlbiI6ICJDb250aW51YXIiLAogICAgImNvbnRleHQucGFnZXMubmV3LXBhZ2UiOiAiTm92YSBww6F4aW5hIgp9",gi="data:application/json;base64,ewoJImFjdGlvbi5icmluZy1mb3J3YXJkIjogIteU15bXliDXp9eT15nXnteUIiwKCSJhY3Rpb24uYnJpbmctdG8tZnJvbnQiOiAi15TXkdeQINec15fXlteZ16oiLAoJImFjdGlvbi5jb3B5IjogIteU16LXqtenIiwKCSJhY3Rpb24uY3V0IjogIteS15bXldeoIiwKCSJhY3Rpb24uZGVsZXRlIjogItee15fXpyIsCgkiYWN0aW9uLmR1cGxpY2F0ZSI6ICLXqdeb16TXnCIsCgkiYWN0aW9uLmZsaXAtaG9yaXpvbnRhbCI6ICLXlNek15XXmiDXkNeV16TXp9eZ16oiLAoJImFjdGlvbi5mbGlwLXZlcnRpY2FsIjogIteU16TXldeaINeQ16DXm9eZ16oiLAoJImFjdGlvbi5mbGlwLWhvcml6b250YWwuc2hvcnQiOiAi15TXpNeV15og15DXldek16fXmdeqIiwKCSJhY3Rpb24uZmxpcC12ZXJ0aWNhbC5zaG9ydCI6ICLXlNek15XXmiDXkNeg15vXmdeqIiwKCSJhY3Rpb24uZ3JvdXAiOiAi16fXkdelIiwKCSJhY3Rpb24uaW5zZXJ0LW1lZGlhIjogIteU16LXnNeQ16og157Xk9eZ15QiLAoJImFjdGlvbi5wYXN0ZSI6ICLXlNeT15HXpyIsCgkiYWN0aW9uLnJlZG8iOiAi16LXqdeUINee15fXk9epIiwKCSJhY3Rpb24uc2VsZWN0LWFsbCI6ICLXkdeX16gg15TXm9ecIiwKCSJhY3Rpb24uc2VsZWN0LW5vbmUiOiAi15HXmNecINeR15fXmdeo15QiLAoJImFjdGlvbi5zZW5kLWJhY2t3YXJkIjogIteU15bXliDXkNeX15XXqNeUIiwKCSJhY3Rpb24uc2VuZC10by1iYWNrIjogIteU15HXkCDXnNeq15fXqteZ16oiLAoJImFjdGlvbi50b2dnbGUtZGFyay1tb2RlLm1lbnUiOiAi157XpteRINeX16nXldeaIiwKCSJhY3Rpb24udG9nZ2xlLWRhcmstbW9kZSI6ICLXntem15Eg15fXqdeV15oiLAoJImFjdGlvbi50b2dnbGUtZGVidWctbW9kZS5tZW51IjogItee16bXkSDXk9eZ15HXkNeSIiwKCSJhY3Rpb24udG9nZ2xlLWRlYnVnLW1vZGUiOiAi157XpteRINeT15nXkdeQ15IiLAoJImFjdGlvbi50b2dnbGUtZm9jdXMtbW9kZS5tZW51IjogItee16bXkSDXpNeV16fXldehIiwKCSJhY3Rpb24udG9nZ2xlLWZvY3VzLW1vZGUiOiAi157XpteRINek15XXp9eV16EiLAoJImFjdGlvbi50b2dnbGUtZ3JpZC5tZW51IjogIijXkteo15nXkynXlNeo15DXlCDXqNep16og16LXmdee15XXkyIsCgkiYWN0aW9uLnVuZG8iOiAi15HXmNecIiwKCSJhY3Rpb24udW5ncm91cCI6ICLXkdeY15wg16fXmdeR15XXpSIsCgkiYWN0aW9uLnpvb20taW4iOiAi15TXkteT15wg16rXpteV15LXlCIsCgkiYWN0aW9uLnpvb20tb3V0IjogIteU16fXmNefINeq16bXldeS15QiLAoJImFjdGlvbi56b29tLXRvLWZpdCI6ICLXlteV150g15zXlNeq15DXnteUIiwKCSJhY3Rpb24uem9vbS10by1zZWxlY3Rpb24iOiAi15bXldedINec15HXl9eZ16jXlCIsCgkiZ2VvLXN0eWxlLmVsbGlwc2UiOiAi15DXnNeZ16TXodeUIiwKCSJnZW8tc3R5bGUucmVjdGFuZ2xlIjogItee16jXldeR16IiLAoJImdlby1zdHlsZS50cmlhbmdsZSI6ICLXntep15XXnNepIiwKCSJhcnJvd2hlYWRTdGFydC1zdHlsZS5hcnJvdyI6ICLXl9elIiwKCSJhcnJvd2hlYWRTdGFydC1zdHlsZS50cmlhbmdsZSI6ICLXntep15XXnNepIiwKCSJhcnJvd2hlYWRFbmQtc3R5bGUuYXJyb3ciOiAi15fXpSIsCgkiYXJyb3doZWFkRW5kLXN0eWxlLnRyaWFuZ2xlIjogItee16nXldec16kiLAoJInNwbGluZS1zdHlsZS5saW5lIjogIten15UiLAoJInRvb2wuc2VsZWN0IjogIteh157XnyIsCgkidG9vbC5kcmF3IjogItem15nXmdeoIiwKCSJ0b29sLmVyYXNlciI6ICLXnteX16ciLAoJInRvb2wuYXJyb3ciOiAi15fXpSIsCgkidG9vbC5lbGxpcHNlIjogIteQ15zXmdek16HXlCIsCgkidG9vbC5yZWN0YW5nbGUiOiAi157XqNeV15HXoiIsCgkidG9vbC50cmlhbmdsZSI6ICLXntep15XXnNepIiwKCSJ0b29sLm5vdGUiOiAi15PXkdeZ16fXmSIsCgkidG9vbC50ZXh0IjogIteY16fXodeYIiwKCSJtZW51LmNvcHktYXMiOiAi15TXoteq16cg15siLAoJIm1lbnUuZWRpdCI6ICLXoteo15nXm9eUIiwKCSJtZW51LmV4cG9ydC1hcyI6ICLXmdeZ16bXkCDXmyIsCgkibWVudS5maWxlIjogIten15XXkdelIiwKCSJtZW51Lmxhbmd1YWdlIjogItep16TXlCIsCgkibWVudS5wcmVmZXJlbmNlcyI6ICLXnteQ16TXmdeZ16DXmdedIiwKCSJtZW51LnZpZXciOiAi16rXpteV15LXlCIsCgkiY29udGV4dC1tZW51LmNvcHktYXMiOiAi15TXoteq16cg15siLAoJImNvbnRleHQtbWVudS5leHBvcnQtYXMiOiAi15nXmdem15Ag15siLAoJImNvbnRleHQtbWVudS5tb3ZlLXRvLXBhZ2UiOiAi15TXlteWINec15PXoyIsCgkicGFnZS1tZW51LmNyZWF0ZS1uZXctcGFnZSI6ICLXpteV16gg15PXoyIsCgkicGFnZS1tZW51LmVkaXQtc3RhcnQiOiAi16LXqNeZ15vXlCIsCgkicGFnZS1tZW51LnN1Ym1lbnUuZHVwbGljYXRlLXBhZ2UiOiAi16nXm9ek15wiLAoJInBhZ2UtbWVudS5zdWJtZW51LmRlbGV0ZSI6ICLXnteX16ciLAoJInNoYXJlLW1lbnUuY29weS1saW5rIjogIteU16LXqtenINen15nXqdeV16gg15TXltee16DXlCIsCgkiZWRpdC1saW5rLWRpYWxvZy5jYW5jZWwiOiAi15HXmNecIiwKCSJlZGl0LXBhZ2VzLWRpYWxvZy5jcmVhdGUtbmV3LXBhZ2UiOiAi16bXldeoINeT16MiLAoJImVkaXQtcGFnZXMtZGlhbG9nLmRlbGV0ZSI6ICLXnteX16ciLAoJImVkaXQtcGFnZXMtZGlhbG9nLmR1cGxpY2F0ZS1wYWdlIjogItep15vXpNecIiwKCSJzaG9ydGN1dHMtZGlhbG9nLmVkaXQiOiAi16LXqNeZ15vXlCIsCgkic2hvcnRjdXRzLWRpYWxvZy5maWxlIjogIten15XXkdelIiwKCSJzaG9ydGN1dHMtZGlhbG9nLnByZWZlcmVuY2VzIjogItee15DXpNeZ15nXoNeZ150iLAoJInNob3J0Y3V0cy1kaWFsb2cudmlldyI6ICLXqtem15XXkteUIiwKCSJzdHlsZS1wYW5lbC50aXRsZSI6ICLXoteZ16bXldeRIiwKCSJzdHlsZS1wYW5lbC5hbGlnbiI6ICLXmdeZ16nXldeoIiwKCSJzdHlsZS1wYW5lbC5jb2xvciI6ICLXpteR16IiLAoJInN0eWxlLXBhbmVsLmRhc2giOiAi15LXkdeV15wiLAoJInN0eWxlLXBhbmVsLmZpbGwiOiAi157XnNeQIiwKCSJzdHlsZS1wYW5lbC5mb250IjogIteS15XXpNefIiwKCSJzdHlsZS1wYW5lbC5zaXplIjogIteS15XXk9ecIiwKCSJzdHlsZS1wYW5lbC50ZXh0IjogIteY16fXodeYIiwKCSJhY3Rpb24udG9nZ2xlLWdyaWQiOiAiKNeS16jXmdeTKdeU16jXkNeUINeo16nXqiDXoteZ157XldeTIiwKCSJhY3Rpb24udG9nZ2xlLXNuYXAtbW9kZS5tZW51IjogIteU16jXkNeUINen15XXldeZINee16rXkNeoIiwKCSJhY3Rpb24udG9nZ2xlLXNuYXAtbW9kZSI6ICLXlNeo15DXlCDXp9eV15XXmSDXnteq15DXqCIsCgkiZGFzaC1zdHlsZS5kcmF3IjogItem15nXmdeoIiwKCSJmb250LXN0eWxlLmRyYXciOiAi16bXmdeZ16giLAoJInRvb2wubGluZSI6ICLXp9eVIiwKCSJlbWJlZC1kaWFsb2cuY2FuY2VsIjogIteR15jXnCIsCgkiZm9jdXMtbW9kZS50b2dnbGUtZm9jdXMtbW9kZSI6ICLXntem15Eg16TXlden15XXoSIsCgkiZmlsZS1zeXN0ZW0uY29uZmlybS1vcGVuLmNhbmNlbCI6ICLXkdeY15wiCn0K",mi=i.p+"drawing/hi-in-5477871446a60d44.json",Ii="data:application/json;base64,ewogICAgInZzY29kZS5maWxlLW9wZW4udGl0bGUiOiAiRmlsZSBtaWdyw6Fsw6FzYSIsCiAgICAidnNjb2RlLmZpbGUtb3Blbi5kb250LXNob3ctYWdhaW4iOiAiTmUga8OpcmRlemQgdMO2YmJldCIsCiAgICAidnNjb2RlLmZpbGUtb3Blbi5kZXNjIjogIkV6IGEgZmlsZSBlZ3kgZWzFkXrFkSB2ZXJ6acOzdmFsIGvDqXN6w7xsdC4gRnJpc3PDrXRzw7xrLCBob2d5IGF6IMO6aiB2ZXJ6acOzdmFsIGlzIG3FsWvDtmRqw7ZuPyIsCiAgICAidnNjb2RlLmNvbmZpcm0tb3Blbi5jYW5jZWwiOiAiQmV6w6Fyw6FzIiwKICAgICJ2c2NvZGUuY29uZmlybS1vcGVuLm9wZW4iOiAiRm9seXRhdMOhcyIsCiAgICAiY29udGV4dC5wYWdlcy5uZXctcGFnZSI6ICLDmmogb2xkYWwiCn0=",fi=i.p+"drawing/it-c86599a3e1084fa9.json",yi="data:application/json;base64,ewoJImFjdGlvbi5icmluZy1mb3J3YXJkIjogIuOBsuOBqOOBpOWJjeOBq+enu+WLlSIsCgkiYWN0aW9uLmJyaW5nLXRvLWZyb250IjogIuacgOWJjemdouOBq+enu+WLlSIsCgkiYWN0aW9uLmNvcHkiOiAi44Kz44OU44O8IiwKCSJhY3Rpb24uY3V0IjogIuWIh+OCiuWPluOCiiIsCgkiYWN0aW9uLmRlbGV0ZSI6ICLliYrpmaQiLAoJImFjdGlvbi5kdXBsaWNhdGUiOiAi6KSH6KO9IiwKCSJhY3Rpb24uZmxpcC1ob3Jpem9udGFsIjogIuawtOW5s+aWueWQkeOBq+WPjei7oiIsCgkiYWN0aW9uLmZsaXAtdmVydGljYWwiOiAi5Z6C55u05pa55ZCR44Gr5Y+N6LuiIiwKCSJhY3Rpb24uZmxpcC1ob3Jpem9udGFsLnNob3J0IjogIuawtOW5s+aWueWQkeOBq+WPjei7oiIsCgkiYWN0aW9uLmZsaXAtdmVydGljYWwuc2hvcnQiOiAi5Z6C55u05pa55ZCR44Gr5Y+N6LuiIiwKCSJhY3Rpb24uZ3JvdXAiOiAi44Kw44Or44O844OU44Oz44KwIiwKCSJhY3Rpb24uaW5zZXJ0LW1lZGlhIjogIuODoeODh+OCo+OCouOCkuOCouODg+ODl+ODreODvOODiSIsCgkiYWN0aW9uLnBhc3RlIjogIuiyvOOCiuS7mOOBkSIsCgkiYWN0aW9uLnJlZG8iOiAi44KE44KK55u044GXIiwKCSJhY3Rpb24uc2VsZWN0LWFsbCI6ICLjgZnjgbnjgabpgbjmip4iLAoJImFjdGlvbi5zZWxlY3Qtbm9uZSI6ICLpgbjmip7jgpLop6PpmaQiLAoJImFjdGlvbi5zZW5kLWJhY2t3YXJkIjogIuOBsuOBqOOBpOW+jOOCjeOBq+enu+WLlSIsCgkiYWN0aW9uLnNlbmQtdG8tYmFjayI6ICLmnIDog4zpnaLjgavnp7vli5UiLAoJImFjdGlvbi50b2dnbGUtZGFyay1tb2RlLm1lbnUiOiAi44OA44O844Kv44Oi44O844OJIiwKCSJhY3Rpb24udG9nZ2xlLWRhcmstbW9kZSI6ICLjg4Djg7zjgq/jg6Ljg7zjg4kiLAoJImFjdGlvbi50b2dnbGUtZGVidWctbW9kZS5tZW51IjogIuODh+ODkOODg+OCsOODouODvOODiSIsCgkiYWN0aW9uLnRvZ2dsZS1kZWJ1Zy1tb2RlIjogIuODh+ODkOODg+OCsOODouODvOODiSIsCgkiYWN0aW9uLnRvZ2dsZS1mb2N1cy1tb2RlLm1lbnUiOiAi44OV44Kp44O844Kr44K544Oi44O844OJIiwKCSJhY3Rpb24udG9nZ2xlLWZvY3VzLW1vZGUiOiAi44OV44Kp44O844Kr44K544Oi44O844OJIiwKCSJhY3Rpb24udG9nZ2xlLWdyaWQubWVudSI6ICLjgrDjg6rjg4Pjg4njgpLooajnpLoiLAoJImFjdGlvbi51bmRvIjogIuWFg+OBq+aIu+OBmSIsCgkiYWN0aW9uLnVuZ3JvdXAiOiAi44Kw44Or44O844OX6Kej6ZmkIiwKCSJhY3Rpb24uem9vbS1pbiI6ICLmi6HlpKciLAoJImFjdGlvbi56b29tLW91dCI6ICLnuK7lsI8iLAoJImFjdGlvbi56b29tLXRvLWZpdCI6ICLmi6HlpKfjgZfjgabjgZnjgbnjgabjgpLooajnpLoiLAoJImFjdGlvbi56b29tLXRvLXNlbGVjdGlvbiI6ICLpgbjmip7jgZfjgZ/jgqLjgqTjg4bjg6DjgavlkIjjgo/jgZvjgabmi6HlpKciLAoJImdlby1zdHlsZS5lbGxpcHNlIjogIualleWGhuW9oiIsCgkiZ2VvLXN0eWxlLnJlY3RhbmdsZSI6ICLplbfmlrnlvaIiLAoJImdlby1zdHlsZS50cmlhbmdsZSI6ICLkuInop5LlvaIiLAoJImFycm93aGVhZFN0YXJ0LXN0eWxlLmFycm93IjogIuefouWNsCIsCgkiYXJyb3doZWFkU3RhcnQtc3R5bGUudHJpYW5nbGUiOiAi5LiJ6KeS5b2iIiwKCSJhcnJvd2hlYWRFbmQtc3R5bGUuYXJyb3ciOiAi55+i5Y2wIiwKCSJhcnJvd2hlYWRFbmQtc3R5bGUudHJpYW5nbGUiOiAi5LiJ6KeS5b2iIiwKCSJzcGxpbmUtc3R5bGUubGluZSI6ICLnt5oiLAoJInRvb2wuc2VsZWN0IjogIumBuOaKniIsCgkidG9vbC5kcmF3IjogIuaPj+eUuyIsCgkidG9vbC5lcmFzZXIiOiAi5raI44GX44K044OgIiwKCSJ0b29sLmFycm93IjogIuefouWNsCIsCgkidG9vbC5lbGxpcHNlIjogIualleWGhuW9oiIsCgkidG9vbC5yZWN0YW5nbGUiOiAi6ZW35pa55b2iIiwKCSJ0b29sLnRyaWFuZ2xlIjogIuS4ieinkuW9oiIsCgkidG9vbC5ub3RlIjogIuOBteOBm+OCkyIsCgkidG9vbC50ZXh0IjogIuODhuOCreOCueODiCIsCgkibWVudS5jb3B5LWFzIjogIuW9ouW8j+OCkumBuOaKnuOBl+OBpuOCs+ODlOODvCIsCgkibWVudS5lZGl0IjogIue3qOmbhiIsCgkibWVudS5leHBvcnQtYXMiOiAi5b2i5byP44KS6YG45oqe44GX44Gm44Ko44Kv44K544Od44O844OIIiwKCSJtZW51LmZpbGUiOiAi44OV44Kh44Kk44OrIiwKCSJtZW51Lmxhbmd1YWdlIjogIuiogOiqniIsCgkibWVudS5wcmVmZXJlbmNlcyI6ICLoqK3lrpoiLAoJIm1lbnUudmlldyI6ICLooajnpLoiLAoJImNvbnRleHQtbWVudS5jb3B5LWFzIjogIuW9ouW8j+OCkumBuOaKnuOBl+OBpuOCs+ODlOODvCIsCgkiY29udGV4dC1tZW51LmV4cG9ydC1hcyI6ICLlvaLlvI/jgpLpgbjmip7jgZfjgabjgqjjgq/jgrnjg53jg7zjg4giLAoJImNvbnRleHQtbWVudS5tb3ZlLXRvLXBhZ2UiOiAi44Oa44O844K444G456e75YuVIiwKCSJwYWdlLW1lbnUuY3JlYXRlLW5ldy1wYWdlIjogIuODmuODvOOCuOOCkuS9nOaIkCIsCgkicGFnZS1tZW51LmVkaXQtc3RhcnQiOiAi57eo6ZuGIiwKCSJwYWdlLW1lbnUuc3VibWVudS5kdXBsaWNhdGUtcGFnZSI6ICLopIfoo70iLAoJInBhZ2UtbWVudS5zdWJtZW51LmRlbGV0ZSI6ICLliYrpmaQiLAoJInNoYXJlLW1lbnUuY29weS1saW5rIjogIuWFseacieODquODs+OCr+OCkuOCr+ODquODg+ODl+ODnOODvOODieOBq+OCs+ODlOODvCIsCgkiZWRpdC1saW5rLWRpYWxvZy5jYW5jZWwiOiAi44Kt44Oj44Oz44K744OrIiwKCSJlZGl0LXBhZ2VzLWRpYWxvZy5jcmVhdGUtbmV3LXBhZ2UiOiAi44Oa44O844K444KS5L2c5oiQIiwKCSJlZGl0LXBhZ2VzLWRpYWxvZy5kZWxldGUiOiAi5YmK6ZmkIiwKCSJlZGl0LXBhZ2VzLWRpYWxvZy5kdXBsaWNhdGUtcGFnZSI6ICLopIfoo70iLAoJInNob3J0Y3V0cy1kaWFsb2cuZWRpdCI6ICLnt6jpm4YiLAoJInNob3J0Y3V0cy1kaWFsb2cuZmlsZSI6ICLjg5XjgqHjgqTjg6siLAoJInNob3J0Y3V0cy1kaWFsb2cucHJlZmVyZW5jZXMiOiAi6Kit5a6aIiwKCSJzaG9ydGN1dHMtZGlhbG9nLnZpZXciOiAi6KGo56S6IiwKCSJzdHlsZS1wYW5lbC50aXRsZSI6ICLjgrnjgr/jgqTjg6siLAoJInN0eWxlLXBhbmVsLmFsaWduIjogIumFjee9riIsCgkic3R5bGUtcGFuZWwuY29sb3IiOiAi6ImyIiwKCSJzdHlsZS1wYW5lbC5kYXNoIjogIue3miIsCgkic3R5bGUtcGFuZWwuZmlsbCI6ICLloZfjgorjgaTjgbbjgZciLAoJInN0eWxlLXBhbmVsLmZvbnQiOiAi44OV44Kp44Oz44OIIiwKCSJzdHlsZS1wYW5lbC5zaXplIjogIuWkquOBlS/jgrXjgqTjgroiLAoJInN0eWxlLXBhbmVsLnRleHQiOiAi44OG44Kt44K544OIIiwKCSJhY3Rpb24udG9nZ2xlLWdyaWQiOiAi44Kw44Oq44OD44OJ44KS6KGo56S6IiwKCSJhY3Rpb24udG9nZ2xlLXNuYXAtbW9kZS5tZW51IjogIuOCueODiuODg+ODl+OCkuW4uOOBq+ihqOekuiIsCgkiYWN0aW9uLnRvZ2dsZS1zbmFwLW1vZGUiOiAi44K544OK44OD44OX44KS5bi444Gr6KGo56S6IiwKCSJkYXNoLXN0eWxlLmRyYXciOiAi5o+P55S7IiwKCSJmb250LXN0eWxlLmRyYXciOiAi5o+P55S7IiwKCSJ0b29sLmxpbmUiOiAi57eaIiwKCSJlbWJlZC1kaWFsb2cuY2FuY2VsIjogIuOCreODo+ODs+OCu+ODqyIsCgkiZm9jdXMtbW9kZS50b2dnbGUtZm9jdXMtbW9kZSI6ICLjg5Xjgqnjg7zjgqvjgrnjg6Ljg7zjg4kiLAoJImZpbGUtc3lzdGVtLmNvbmZpcm0tb3Blbi5jYW5jZWwiOiAi44Kt44Oj44Oz44K744OrIgp9Cg==",bi=i.p+"drawing/ko-kr-ee3b58b5e0bf659e.json",wi="data:application/json;base64,ewogICAgImFjdGlvbi5icmluZy1mb3J3YXJkIjogItio2pXbhiDZvtuO2LTbldmI25UiLAogICAgImFjdGlvbi5icmluZy10by1mcm9udCI6ICLYqNqv2YjYp9iy2LHbjtiq25XZiNuVINio24Yg2b7bjti025XZiNuVIiwKICAgICJhY3Rpb24uY29weSI6ICLaqduG2b7bjCDYqNqp25UiLAogICAgImFjdGlvbi5jdXQiOiAi2KjalduM2YYiLAogICAgImFjdGlvbi5kZWxldGUiOiAi2LPalduM2YbbldmI25UiLAogICAgImFjdGlvbi5kdXBsaWNhdGUiOiAi2K/ZiNmI2KjYp9ix25Xaqdix2K/ZhtuV2YjblSIsCiAgICAiYWN0aW9uLmZsaXAtaG9yaXpvbnRhbCI6ICLYptin2LPbhtuM24wg2Yjbldix2q/bldqV2KfZhtiv2YYiLAogICAgImFjdGlvbi5mbGlwLXZlcnRpY2FsIjogItiz2KrZiNmG24wg2Yjbldix2q/bldqV2KfZhtiv2YYiLAogICAgImFjdGlvbi5mbGlwLWhvcml6b250YWwuc2hvcnQiOiAi2KbYp9iz24bbjNuMINmI25XYsdqv25Xaldin2YbYr9mGIiwKICAgICJhY3Rpb24uZmxpcC12ZXJ0aWNhbC5zaG9ydCI6ICLYs9iq2YjZhtuMINmI25XYsdqv25Xaldin2YbYr9mGIiwKICAgICJhY3Rpb24uZ3JvdXAiOiAi2qnbhtmF25XatduVIiwKICAgICJhY3Rpb24uaW5zZXJ0LW1lZGlhIjogItiv2Kfar9ix2KrZhtuMINmF24zYr9uM2KciLAogICAgImFjdGlvbi5wYXN0ZSI6ICLZvtuV24zYs9iqINio2qnblSIsCiAgICAiYWN0aW9uLnJlZG8iOiAi2K/ZiNmI2KjYp9ix25Ug2KjbjNqp25XYsduV2YjblSIsCiAgICAiYWN0aW9uLnNlbGVjdC1hbGwiOiAi2YfbldmF2YjZiNuM2KfZhiDZh9uV2rXYqNqY247YsdmHIiwKICAgICJhY3Rpb24uc2VsZWN0LW5vbmUiOiAi2YfbjNqGINmH2YfigIzatdmF2YfigIzYqNqY247YsdmH4oCMIiwKICAgICJhY3Rpb24uc2VuZC1iYWNrd2FyZCI6ICLYqNuV2LHbldmIINiv2YjYp9mI25UiLAogICAgImFjdGlvbi5zZW5kLXRvLWJhY2siOiAi2KjahtuGINio24Yg2b7YtNiq25XZiNuVIiwKICAgICJhY3Rpb24udG9nZ2xlLWRhcmstbW9kZS5tZW51IjogItiv24bYrtuMINiq2KfYsduM2qkiLAogICAgImFjdGlvbi50b2dnbGUtZGFyay1tb2RlIjogItiv24bYrtuMINiq2KfYsduM2qkiLAogICAgImFjdGlvbi50b2dnbGUtZGVidWctbW9kZS5tZW51IjogItmF24bYr9uMINmH25XatduV2K/bhtiy24zZhiIsCiAgICAiYWN0aW9uLnRvZ2dsZS1kZWJ1Zy1tb2RlIjogItmF24bYr9uMINmH25XatduV2K/bhtiy24zZhiIsCiAgICAiYWN0aW9uLnRvZ2dsZS1mb2N1cy1tb2RlLm1lbnUiOiAi2K/bhtiu24wg2YHbhtqp25XYsyIsCiAgICAiYWN0aW9uLnRvZ2dsZS1mb2N1cy1tb2RlIjogItiv24bYrtuMINmB24baqduV2LMiLAogICAgImFjdGlvbi50b2dnbGUtZ3JpZC5tZW51IjogItiq24balduMINm+24zYtNin2YYg2KjYr9uVIiwKICAgICJhY3Rpb24udG9nZ2xlLWdyaWQiOiAi2KrbhtqV24wg2b7bjNi02KfZhiDYqNiv25UiLAogICAgImFjdGlvbi50b2dnbGUtc25hcC1tb2RlLm1lbnUiOiAi2YfbldmF24zYtNuVINmI247ZhtuV24wg2K7bjtix2Kcg2b7bjNi02KfZhiDYqNiv25UiLAogICAgImFjdGlvbi50b2dnbGUtc25hcC1tb2RlIjogItmH25XZhduM2LTblSDZiNuO2YbblduMINiu247YsdinINm+24zYtNin2YYg2KjYr9uVIiwKICAgICJhY3Rpb24udG9nZ2xlLXRyYW5zcGFyZW50LmNvbnRleHQtbWVudSI6ICLaldmI2YjZhiIsCiAgICAiYWN0aW9uLnRvZ2dsZS10cmFuc3BhcmVudC5tZW51IjogItqV2YjZiNmGIiwKICAgICJhY3Rpb24udW5kbyI6ICLZvtin2LTbldqp2LTblSDYqNqp25UiLAogICAgImFjdGlvbi51bmdyb3VwIjogItmE2KfYqNix2K/ZhtuMINqp24bZhduV2rXblSIsCiAgICAiYWN0aW9uLnpvb20taW4iOiAi2YfbjtmG2KfZhtuVINm+247YtNuV2YjblSIsCiAgICAiYWN0aW9uLnpvb20tb3V0IjogItiv2YjZiNixINiu2LPYqtmG25XZiNuVIiwKICAgICJhY3Rpb24uem9vbS10by1maXQiOiAi2LLZiNmI2YUg2KjaqduVINio24Yg2KbbldmI25XbjCDZhNuV2q/bldq124zYr9inINio2q/ZiNmG2KzbjtiqIiwKICAgICJhY3Rpb24uem9vbS10by1zZWxlY3Rpb24iOiAi2LLZiNmI2YUg2KjaqduVINio24Yg2Yfbldq12KjamNin2LHYr9mGIiwKICAgICJkYXNoLXN0eWxlLmRyYXciOiAi2YjbjtmG25XaqduO2LTYp9mGIiwKICAgICJmb250LXN0eWxlLmRyYXciOiAi2YjbjtmG25XaqduO2LTYp9mGIiwKICAgICJnZW8tc3R5bGUuZWxsaXBzZSI6ICLYqNuM2KjZhNuMIiwKICAgICJnZW8tc3R5bGUucmVjdGFuZ2xlIjogItmE2KfaqduO2LTblSIsCiAgICAiZ2VvLXN0eWxlLnRyaWFuZ2xlIjogItiz247ar9uG2LTblSIsCiAgICAiYXJyb3doZWFkU3RhcnQtc3R5bGUuYXJyb3ciOiAi2KrbjNixIiwKICAgICJhcnJvd2hlYWRTdGFydC1zdHlsZS50cmlhbmdsZSI6ICLYs9uO2q/bhti025UiLAogICAgImFycm93aGVhZEVuZC1zdHlsZS5hcnJvdyI6ICLYqtuM2LEiLAogICAgImFycm93aGVhZEVuZC1zdHlsZS50cmlhbmdsZSI6ICLYs9uO2q/bhti025UiLAogICAgInNwbGluZS1zdHlsZS5saW5lIjogItmH247atSIsCiAgICAidG9vbC5zZWxlY3QiOiAi2K/bldiz2YbbjNin2LTZhtqp2LHYr9mGIiwKICAgICJ0b29sLmRyYXciOiAi2YjbjtmG25XaqduO2LTYp9mGIiwKICAgICJ0b29sLmVyYXNlciI6ICLYs9qV25XYsduV2YjblSIsCiAgICAidG9vbC5hcnJvdyI6ICLYqtuM2LEiLAogICAgInRvb2wuZWxsaXBzZSI6ICLYqNuM2KjZhNuMIiwKICAgICJ0b29sLmxpbmUiOiAi2Yfbjtq1IiwKICAgICJ0b29sLnJlY3RhbmdsZSI6ICLZhNin2qnbjti025UiLAogICAgInRvb2wudHJpYW5nbGUiOiAi2LPbjtqv24bYtNuVIiwKICAgICJ0b29sLm5vdGUiOiAi2obbldiz2b7Yp9mIIiwKICAgICJ0b29sLnRleHQiOiAi2K/bldmCIiwKICAgICJtZW51LmNvcHktYXMiOiAi2qnbhtm+24wg2YjbldqpIiwKICAgICJtZW51LmVkaXQiOiAi2K/bldiz2Kraqdin2LHbjCIsCiAgICAibWVudS5leHBvcnQtYXMiOiAi2YfbldmG2KfYsdiv25Xaqdix2K/ZhiDZiNuV2qkiLAogICAgIm1lbnUuZmlsZSI6ICLZgdin24zZhNuO2qkiLAogICAgIm1lbnUubGFuZ3VhZ2UiOiAi2LLZhdin2YYiLAogICAgIm1lbnUucHJlZmVyZW5jZXMiOiAi2K7ZiNin2LPYqiIsCiAgICAibWVudS52aWV3IjogItiv24zZhduV2YYiLAogICAgImNvbnRleHQtbWVudS5jb3B5LWFzIjogItqp24bZvtuMINmI25XaqSIsCiAgICAiY29udGV4dC1tZW51LmV4cG9ydC1hcyI6ICLZh9uV2YbYp9ix2K/bldqp2LHYr9mGINmI25XaqSIsCiAgICAiY29udGV4dC1tZW51Lm1vdmUtdG8tcGFnZSI6ICLYqNqG24Yg2KjbhiDZhNin2b7bldqV25UiLAogICAgInBhZ2UtbWVudS5jcmVhdGUtbmV3LXBhZ2UiOiAi2K/YsdmI2LPYqtqp2LHYr9mG24wg2YTYp9m+25XalduVIiwKICAgICJwYWdlLW1lbnUucGFnZSI6ICLZhNin2b7bldqV25UiLAogICAgInBhZ2UtbWVudS5lZGl0LXN0YXJ0IjogItiv25XYs9iq2qnYp9ix24wiLAogICAgInBhZ2UtbWVudS5zdWJtZW51LmR1cGxpY2F0ZS1wYWdlIjogItiv2YjZiNio2KfYsduV2qnYsdiv2YbbldmI25UiLAogICAgInBhZ2UtbWVudS5zdWJtZW51LmRlbGV0ZSI6ICLYs9qV24zZhtuV2YjblSIsCiAgICAic2hhcmUtbWVudS5jb3B5LWxpbmsiOiAi2YTbjNmG2qnbjCDYqNin2Ybar9mH247YtNiq2qnYsdiv2YYg2qnbhtm+24wg2KjaqduVIiwKICAgICJzaGFyZS1tZW51LmNvcHktcmVhZG9ubHktbGluayI6ICLYqNuVINi0247ZiNuV24zbldqp24wg2YfbldqV25XZhduV2qnbjCDaqduG2b7bjCDYqNqp25UiLAogICAgImhlbHAtbWVudS5rZXlib2FyZC1zaG9ydGN1dHMiOiAi2qnZiNix2Kraqdix2KfZiNuV2qnYp9mG24wg2Krbldiu2Krbldqp2YTbjNmEIiwKICAgICJlZGl0LWxpbmstZGlhbG9nLmNhbmNlbCI6ICLalduV2Kraqdix2K/ZhtuV2YjblSIsCiAgICAiZW1iZWQtZGlhbG9nLmNhbmNlbCI6ICLalduV2Kraqdix2K/ZhtuV2YjblSIsCiAgICAiZWRpdC1wYWdlcy1kaWFsb2cuY3JlYXRlLW5ldy1wYWdlIjogItiv2LHZiNiz2Kraqdix2K/ZhtuMINmE2KfZvtuV2pXblSIsCiAgICAiZWRpdC1wYWdlcy1kaWFsb2cuZGVsZXRlIjogItiz2pXbjNmG25XZiNuVIiwKICAgICJlZGl0LXBhZ2VzLWRpYWxvZy5kdXBsaWNhdGUtcGFnZSI6ICLYr9mI2YjYqNin2LHbldqp2LHYr9mG25XZiNuVIiwKICAgICJzaG9ydGN1dHMtZGlhbG9nLnRpdGxlIjogItqp2YjYsdiq2qnYsdin2Yjbldqp2KfZhtuMINiq25XYrtiq25XaqdmE24zZhCIsCiAgICAic2hvcnRjdXRzLWRpYWxvZy5lZGl0IjogItiv25XYs9iq2qnYp9ix24wiLAogICAgInNob3J0Y3V0cy1kaWFsb2cuZmlsZSI6ICLZgdin24zZhNuO2qkiLAogICAgInNob3J0Y3V0cy1kaWFsb2cucHJlZmVyZW5jZXMiOiAi2K7ZiNin2LPYqiIsCiAgICAic2hvcnRjdXRzLWRpYWxvZy50b29scyI6ICLYptin2YXYsdin2LLbldqp2KfZhiIsCiAgICAic2hvcnRjdXRzLWRpYWxvZy50cmFuc2Zvcm0iOiAi2q/bhtqV24zZhiIsCiAgICAic2hvcnRjdXRzLWRpYWxvZy52aWV3IjogItiv24zZhduV2YYiLAogICAgInN0eWxlLXBhbmVsLnRpdGxlIjogItmG25XYrti025Xaqdin2YYiLAogICAgInN0eWxlLXBhbmVsLmFsaWduIjogItqV247aqdiu2LPYqtmGIiwKICAgICJzdHlsZS1wYW5lbC5jb2xvciI6ICLYsduV2YbaryIsCiAgICAic3R5bGUtcGFuZWwuZGFzaCI6ICLZhNuV2Kog2YTbldiqIiwKICAgICJzdHlsZS1wYW5lbC5maWxsIjogItm+2pXaqdix2K/ZhtuV2YjblSIsCiAgICAic3R5bGUtcGFuZWwuZm9udCI6ICLZh9uO2rUiLAogICAgInN0eWxlLXBhbmVsLnNpemUiOiAi2YLbldio2KfYsduVIiwKICAgICJzdHlsZS1wYW5lbC50ZXh0IjogItiv25XZgiIsCiAgICAidG9vbC1wYW5lbC50b29scyI6ICLYptin2YXYsdin2LLbldqp2KfZhiIsCiAgICAiZm9jdXMtbW9kZS50b2dnbGUtZm9jdXMtbW9kZSI6ICLYr9uG2K7bjCDZgduG2qnbldizIiwKICAgICJmaWxlLXN5c3RlbS5jb25maXJtLW9wZW4uY2FuY2VsIjogItqV25XYqtqp2LHYr9mG25XZiNuVIgp9",Ci="data:application/json;base64,WwoJewoJCSJsb2NhbGUiOiAiYXIiLAoJCSJsYWJlbCI6ICLYudix2KjZiiIKCX0sCgl7CgkJImxvY2FsZSI6ICJjYSIsCgkJImxhYmVsIjogIkNhdGFsw6AiCgl9LAoJewoJCSJsb2NhbGUiOiAiZGEiLAoJCSJsYWJlbCI6ICJEYW5pc2giCgl9LAoJewoJCSJsb2NhbGUiOiAiZGUiLAoJCSJsYWJlbCI6ICJEZXV0c2NoIgoJfSwKCXsKCQkibG9jYWxlIjogImVuIiwKCQkibGFiZWwiOiAiRW5nbGlzaCIKCX0sCgl7CgkJImxvY2FsZSI6ICJlcyIsCgkJImxhYmVsIjogIkVzcGHDsW9sIgoJfSwKCXsKCQkibG9jYWxlIjogImZhIiwKCQkibGFiZWwiOiAi2YHYp9ix2LPbjCIKCX0sCgl7CgkJImxvY2FsZSI6ICJmaSIsCgkJImxhYmVsIjogIlN1b21pIgoJfSwKCXsKCQkibG9jYWxlIjogImZyIiwKCQkibGFiZWwiOiAiRnJhbsOnYWlzIgoJfSwKCXsKCQkibG9jYWxlIjogImdsIiwKCQkibGFiZWwiOiAiR2FsZWdvIgoJfSwKCXsKCQkibG9jYWxlIjogImhlIiwKCQkibGFiZWwiOiAi16LXkdeo15nXqiIKCX0sCgl7CgkJImxvY2FsZSI6ICJpdCIsCgkJImxhYmVsIjogIkl0YWxpYW5vIgoJfSwKCXsKCQkibG9jYWxlIjogImphIiwKCQkibGFiZWwiOiAi5pel5pys6KqeIgoJfSwKCXsKCQkibG9jYWxlIjogImtvLWtyIiwKCQkibGFiZWwiOiAi7ZWc6rWt7Ja0IgoJfSwKCXsKCQkibG9jYWxlIjogImt1IiwKCQkibGFiZWwiOiAi2qnZiNix2K/bjCIKCX0sCgl7CgkJImxvY2FsZSI6ICJoaS1pbiIsCgkJImxhYmVsIjogIuCkueCkv+CkqOCljeCkpuClgCIKCX0sCgl7CgkJImxvY2FsZSI6ICJodSIsCgkJImxhYmVsIjogIk1hZ3lhciIKCX0sCgl7CgkJImxvY2FsZSI6ICJteSIsCgkJImxhYmVsIjogIuGAmeGAvOGAlOGAuuGAmeGArOGAheGArCIKCX0sCgl7CgkJImxvY2FsZSI6ICJuZSIsCgkJImxhYmVsIjogIuCkqOClh+CkquCkvuCksuClgCIKCX0sCgl7CgkJImxvY2FsZSI6ICJubyIsCgkJImxhYmVsIjogIk5vcndlZ2lhbiIKCX0sCgl7CgkJImxvY2FsZSI6ICJwbCIsCgkJImxhYmVsIjogIlBvbHNraSIKCX0sCgl7CgkJImxvY2FsZSI6ICJwdC1iciIsCgkJImxhYmVsIjogIlBvcnR1Z3XDqnMgLSBCcmFzaWwiCgl9LAoJewoJCSJsb2NhbGUiOiAicHQtcHQiLAoJCSJsYWJlbCI6ICJQb3J0dWd1w6pzIC0gRXVyb3BldSIKCX0sCgl7CgkJImxvY2FsZSI6ICJybyIsCgkJImxhYmVsIjogIlJvbcOibsSDIgoJfSwKCXsKCQkibG9jYWxlIjogInJ1IiwKCQkibGFiZWwiOiAiUnVzc2lhbiIKCX0sCgl7CgkJImxvY2FsZSI6ICJzdiIsCgkJImxhYmVsIjogIlN2ZW5za2EiCgl9LAoJewoJCSJsb2NhbGUiOiAidGUiLAoJCSJsYWJlbCI6ICLgsKTgsYbgsLLgsYHgsJfgsYEiCgl9LAoJewoJCSJsb2NhbGUiOiAidGgiLAoJCSJsYWJlbCI6ICLguKDguLLguKnguLLguYTguJfguKIiCgl9LAoJewoJCSJsb2NhbGUiOiAidHIiLAoJCSJsYWJlbCI6ICJUw7xya8OnZSIKCX0sCgl7CgkJImxvY2FsZSI6ICJ1ayIsCgkJImxhYmVsIjogIlVrcmFpbmlhbiIKCX0sCgl7CgkJImxvY2FsZSI6ICJ2aSIsCgkJImxhYmVsIjogIlRp4bq/bmcgVmnhu4d0IgoJfSwKCXsKCQkibG9jYWxlIjogInpoLWNuIiwKCQkibGFiZWwiOiAiQ2hpbmVzZSAtIFNpbXBsaWZpZWQiCgl9LAoJewoJCSJsb2NhbGUiOiAiemgtdHciLAoJCSJsYWJlbCI6ICLnuYHpq5TkuK3mlocgKOWPsOeBoykiCgl9Cl0K",Mi=i.p+"drawing/main-08684ef7a315b641.json",xi=i.p+"drawing/my-0e485a7ee21bc3fd.json",Ai=i.p+"drawing/ne-579ae9ed2f96804c.json",Si="data:application/json;base64,ewogICAgImFjdGlvbi5jb3B5IjogIktvcGllciIsCiAgICAiYWN0aW9uLmN1dCI6ICJLbGlwcCB1dCIsCiAgICAiYWN0aW9uLmRlbGV0ZSI6ICJTbGV0dCIsCiAgICAiYWN0aW9uLmR1cGxpY2F0ZSI6ICJEdXBsaXNlciIsCiAgICAiYWN0aW9uLmZsaXAtaG9yaXpvbnRhbCI6ICJTbnUgaG9yaXNvbnRhbHQiLAogICAgImFjdGlvbi5mbGlwLXZlcnRpY2FsIjogIlNudSB2ZXJ0aWthbHQiLAogICAgImFjdGlvbi5ncm91cCI6ICJHcnVwcGVyIiwKICAgICJhY3Rpb24uaW5zZXJ0LW1lZGlhIjogIkxhc3Qgb3BwIG1lZGlhIiwKICAgICJhY3Rpb24ucGFzdGUiOiAiTGltIGlubiIsCiAgICAiYWN0aW9uLnJlZG8iOiAiR2rDuHIgb20iLAogICAgImFjdGlvbi5zZWxlY3QtYWxsIjogIlZlbGcgYWxsZSIsCiAgICAiYWN0aW9uLnNlbGVjdC1ub25lIjogIlZlbGcgaW5nZW4iLAogICAgImFjdGlvbi51bmRvIjogIkFuZ3JlIiwKICAgICJhY3Rpb24udW5ncm91cCI6ICJBdmdydXBwZXIiLAogICAgImFjdGlvbi56b29tLWluIjogIlpvb20gaW5uIiwKICAgICJhY3Rpb24uem9vbS1vdXQiOiAiWm9vbSB1dCIsCiAgICAiYWN0aW9uLnpvb20tdG8tZml0IjogIlpvb20gZm9yIMOlIHBhc3NlIiwKICAgICJhY3Rpb24uem9vbS10by1zZWxlY3Rpb24iOiAiWm9vbSB0aWwgdmFsZyIsCiAgICAiZGFzaC1zdHlsZS5kcmF3IjogIlRlZ24iLAogICAgImZvbnQtc3R5bGUuZHJhdyI6ICJUZWduIiwKICAgICJnZW8tc3R5bGUuZWxsaXBzZSI6ICJFbGxpcHNlIiwKICAgICJnZW8tc3R5bGUucmVjdGFuZ2xlIjogIlJla3RhbmdlbCIsCiAgICAiZ2VvLXN0eWxlLnRyaWFuZ2xlIjogIlRyZWthbnQiLAogICAgImFycm93aGVhZFN0YXJ0LXN0eWxlLmFycm93IjogIlBpbCIsCiAgICAiYXJyb3doZWFkU3RhcnQtc3R5bGUudHJpYW5nbGUiOiAiVHJla2FudCIsCiAgICAiYXJyb3doZWFkRW5kLXN0eWxlLmFycm93IjogIlBpbCIsCiAgICAiYXJyb3doZWFkRW5kLXN0eWxlLnRyaWFuZ2xlIjogIlRyZWthbnQiLAogICAgInNwbGluZS1zdHlsZS5saW5lIjogIkxpbmplIiwKICAgICJ0b29sLnNlbGVjdCI6ICJWZWxnIiwKICAgICJ0b29sLmRyYXciOiAiVGVnbiIsCiAgICAidG9vbC5lcmFzZXIiOiAiVmlza2Vsw6ZyIiwKICAgICJ0b29sLmFycm93IjogIlBpbCIsCiAgICAidG9vbC5lbGxpcHNlIjogIkVsbGlwc2UiLAogICAgInRvb2wubGluZSI6ICJMaW5qZSIsCiAgICAidG9vbC5yZWN0YW5nbGUiOiAiUmVrdGFuZ2VsIiwKICAgICJ0b29sLnRyaWFuZ2xlIjogIlRyZWthbnQiLAogICAgInRvb2wubm90ZSI6ICJMYXBwIiwKICAgICJ0b29sLnRleHQiOiAiVGVrc3QiLAogICAgIm1lbnUuY29weS1hcyI6ICJLb3BpZXIgc29tIiwKICAgICJtZW51LmVkaXQiOiAiUmVkaWdlciIsCiAgICAibWVudS5leHBvcnQtYXMiOiAiRWtzcG9ydGVyIHNvbSIsCiAgICAibWVudS5maWxlIjogIkZpbCIsCiAgICAibWVudS5sYW5ndWFnZSI6ICJTcHLDpWsiLAogICAgIm1lbnUucHJlZmVyZW5jZXMiOiAiUHJlZmVyYW5zZXIiLAogICAgIm1lbnUudmlldyI6ICJWaXMiLAogICAgImNvbnRleHQtbWVudS5jb3B5LWFzIjogIktvcGllciBzb20iLAogICAgImNvbnRleHQtbWVudS5leHBvcnQtYXMiOiAiRWtzcG9ydGVyIHNvbSIsCiAgICAiY29udGV4dC1tZW51Lm1vdmUtdG8tcGFnZSI6ICJGbHl0dCB0aWwgc2lkZSIsCiAgICAicGFnZS1tZW51LnN1Ym1lbnUuZGVsZXRlIjogIlNsZXR0IiwKICAgICJzaG9ydGN1dHMtZGlhbG9nLmVkaXQiOiAiUmVkaWdlciIsCiAgICAic2hvcnRjdXRzLWRpYWxvZy5maWxlIjogIkZpbCIsCiAgICAic2hvcnRjdXRzLWRpYWxvZy5wcmVmZXJlbmNlcyI6ICJQcmVmZXJhbnNlciIsCiAgICAic2hvcnRjdXRzLWRpYWxvZy52aWV3IjogIlZpcyIsCiAgICAic3R5bGUtcGFuZWwudGl0bGUiOiAiU3RpbGVyIiwKICAgICJzdHlsZS1wYW5lbC5hbGlnbiI6ICJKdXN0ZXIiLAogICAgInN0eWxlLXBhbmVsLmNvbG9yIjogIkZhcmdlIiwKICAgICJzdHlsZS1wYW5lbC5kYXNoIjogIkxpbmplIiwKICAgICJzdHlsZS1wYW5lbC5maWxsIjogIkZ5bGwiLAogICAgInN0eWxlLXBhbmVsLmZvbnQiOiAiVGVrc3R0eXBlIiwKICAgICJzdHlsZS1wYW5lbC5zaXplIjogIlN0w7hycmVsc2UiLAogICAgInN0eWxlLXBhbmVsLnRleHQiOiAiVGVrc3QiCn0=",vi="data:application/json;base64,ewogICAgImFjdGlvbi5jb3B5LWFzLWpzb24uc2hvcnQiOiAiSlNPTiIsCiAgICAiYWN0aW9uLmNvcHktYXMtcG5nLnNob3J0IjogIlBORyIsCiAgICAiYWN0aW9uLmNvcHktYXMtcG5nIjogIktvcGl1aiBqYWtvIFBORyIsCiAgICAiYWN0aW9uLmNvcHktYXMtc3ZnLnNob3J0IjogIlNWRyIsCiAgICAiYWN0aW9uLmNvcHkiOiAiS29waXVqIiwKICAgICJhY3Rpb24uY3V0IjogIld5dG5paiIsCiAgICAiYWN0aW9uLmRlbGV0ZSI6ICJVc3XFhCIsCiAgICAiYWN0aW9uLmR1cGxpY2F0ZSI6ICJQb3dpZWwiLAogICAgImFjdGlvbi5leHBvcnQtYXMtanNvbi5zaG9ydCI6ICJKU09OIiwKICAgICJhY3Rpb24uZXhwb3J0LWFzLXBuZy5zaG9ydCI6ICJQTkciLAogICAgImFjdGlvbi5leHBvcnQtYXMtc3ZnLnNob3J0IjogIlNWRyIsCiAgICAiYWN0aW9uLmZsaXAtaG9yaXpvbnRhbCI6ICJPZHdyw7PEhyB3IHBvemlvbWllIiwKICAgICJhY3Rpb24uZmxpcC12ZXJ0aWNhbCI6ICJPZHdyw7PEhyB3IHBpb25pZSIsCiAgICAiYWN0aW9uLmdyb3VwIjogIkdydXB1aiIsCiAgICAiYWN0aW9uLmluc2VydC1tZWRpYSI6ICJaYcWCYWR1aiBtdWx0aW1lZGlhIiwKICAgICJhY3Rpb24ucGFzdGUiOiAiV2tsZWoiLAogICAgImFjdGlvbi5yZWRvIjogIlBvd3TDs3J6IiwKICAgICJhY3Rpb24uc2VsZWN0LWFsbCI6ICJaYXpuYWN6IHdzenlzdGtvIiwKICAgICJhY3Rpb24uc2VsZWN0LW5vbmUiOiAiT2R6bmFjeiB3c3p5c3RrbyIsCiAgICAiYWN0aW9uLnRvZ2dsZS1kYXJrLW1vZGUubWVudSI6ICJUcnliIGNpZW1ueSIsCiAgICAiYWN0aW9uLnVuZG8iOiAiQ29mbmlqIiwKICAgICJhY3Rpb24udW5ncm91cCI6ICJSb3pncnVwdWoiLAogICAgImFjdGlvbi56b29tLWluIjogIlByenlibGnFvCIsCiAgICAiYWN0aW9uLnpvb20tb3V0IjogIk9kZGFsIiwKICAgICJhY3Rpb24uem9vbS10by1maXQiOiAiV3lwZcWCbmlqIGVrcmFuIiwKICAgICJhY3Rpb24uem9vbS10by1zZWxlY3Rpb24iOiAiUHJ6eWJsacW8IGRvIHphem5hY3plbmlhIiwKICAgICJjb2xvci1zdHlsZS5ibGFjayI6ICJDemFybnkiLAogICAgImNvbG9yLXN0eWxlLmJsdWUiOiAiTmllYmllc2tpIiwKICAgICJjb2xvci1zdHlsZS5ncmVlbiI6ICJaaWVsb255IiwKICAgICJjb2xvci1zdHlsZS5ncmV5IjogIlN6YXJ5IiwKICAgICJjb2xvci1zdHlsZS5saWdodC1ibHVlIjogIkphc25vbmllYmllc2tpIiwKICAgICJjb2xvci1zdHlsZS5saWdodC1ncmVlbiI6ICJKYXNub3ppZWxvbnkiLAogICAgImNvbG9yLXN0eWxlLmxpZ2h0LXJlZCI6ICJKYXNub2N6ZXJ3b255IiwKICAgICJjb2xvci1zdHlsZS5saWdodC12aW9sZXQiOiAiSmFzbnkgZmlvbGV0IiwKICAgICJjb2xvci1zdHlsZS5vcmFuZ2UiOiAiUG9tYXJhxYRjem93eSIsCiAgICAiY29sb3Itc3R5bGUucmVkIjogIkN6ZXJ3b255IiwKICAgICJjb2xvci1zdHlsZS52aW9sZXQiOiAiRmlvbGV0b3d5IiwKICAgICJjb2xvci1zdHlsZS55ZWxsb3ciOiAixbvDs8WCdHkiLAogICAgImRhc2gtc3R5bGUuZHJhdyI6ICJSeXN1aiIsCiAgICAib3BhY2l0eS1zdHlsZS4wLjEiOiAiMTAlIiwKICAgICJvcGFjaXR5LXN0eWxlLjAuMjUiOiAiMjUlIiwKICAgICJvcGFjaXR5LXN0eWxlLjAuNSI6ICI1MCUiLAogICAgIm9wYWNpdHktc3R5bGUuMC43NSI6ICI3NSUiLAogICAgIm9wYWNpdHktc3R5bGUuMSI6ICIxMDAlIiwKICAgICJmb250LXN0eWxlLmRyYXciOiAiUnlzdWoiLAogICAgImdlby1zdHlsZS5kaWFtb25kIjogIlJvbWIiLAogICAgImdlby1zdHlsZS5lbGxpcHNlIjogIkVsaXBzYSIsCiAgICAiZ2VvLXN0eWxlLnJlY3RhbmdsZSI6ICJQcm9zdG9rxIV0IiwKICAgICJnZW8tc3R5bGUucmhvbWJ1cy0yIjogIlJvbWIgMiIsCiAgICAiZ2VvLXN0eWxlLnJob21idXMiOiAiUm9tYiIsCiAgICAiZ2VvLXN0eWxlLnN0YXIiOiAiR3dpYXpkYSIsCiAgICAiZ2VvLXN0eWxlLnRyYXBlem9pZCI6ICJUcmFwZXoiLAogICAgImdlby1zdHlsZS50cmlhbmdsZSI6ICJUcsOzamvEhXQiLAogICAgImFycm93aGVhZFN0YXJ0LXN0eWxlLmFycm93IjogIlN0cnphxYJrYSIsCiAgICAiYXJyb3doZWFkU3RhcnQtc3R5bGUuZGlhbW9uZCI6ICJSb21iIiwKICAgICJhcnJvd2hlYWRTdGFydC1zdHlsZS50cmlhbmdsZSI6ICJUcsOzamvEhXQiLAogICAgImFycm93aGVhZEVuZC1zdHlsZS5hcnJvdyI6ICJTdHJ6YcWCa2EiLAogICAgImFycm93aGVhZEVuZC1zdHlsZS5kaWFtb25kIjogIlJvbWIiLAogICAgImFycm93aGVhZEVuZC1zdHlsZS5zcXVhcmUiOiAiS3dhZHJhdCIsCiAgICAiYXJyb3doZWFkRW5kLXN0eWxlLnRyaWFuZ2xlIjogIlRyw7Nqa8SFdCIsCiAgICAic3BsaW5lLXN0eWxlLmxpbmUiOiAiTGluaWEiLAogICAgInRvb2wuc2VsZWN0IjogIlphem5hY3oiLAogICAgInRvb2wuZHJhdyI6ICJSeXN1aiIsCiAgICAidG9vbC5lcmFzZXIiOiAiR3Vta2EiLAogICAgInRvb2wuYXJyb3ciOiAiU3RyemHFgmthIiwKICAgICJ0b29sLmRpYW1vbmQiOiAiUm9tYiIsCiAgICAidG9vbC5lbGxpcHNlIjogIkVsaXBzYSIsCiAgICAidG9vbC5oZXhhZ29uIjogIlN6ZcWbY2lva8SFdCIsCiAgICAidG9vbC5saW5lIjogIkxpbmlhIiwKICAgICJ0b29sLm9jdGFnb24iOiAiT8WbbWlva8SFdCIsCiAgICAidG9vbC5vdmFsIjogIk93YWwiLAogICAgInRvb2wucGVudGFnb24iOiAiUGnEmWNpb2vEhXQiLAogICAgInRvb2wucmVjdGFuZ2xlIjogIlByb3N0b2vEhXQiLAogICAgInRvb2wucmhvbWJ1cyI6ICJSb21iIiwKICAgICJ0b29sLnN0YXIiOiAiR3dpYXpkYSIsCiAgICAidG9vbC50cmlhbmdsZSI6ICJUcsOzamvEhXQiLAogICAgInRvb2wubm90ZSI6ICJOYWtsZWprYSIsCiAgICAidG9vbC50ZXh0IjogIlRla3N0IiwKICAgICJtZW51LmNvcHktYXMiOiAiS29waXVqIGpha28iLAogICAgIm1lbnUuZWRpdCI6ICJFZHljamEiLAogICAgIm1lbnUuZXhwb3J0LWFzIjogIkVrc3BvcnR1aiBqYWtvIiwKICAgICJtZW51LmZpbGUiOiAiUGxpayIsCiAgICAibWVudS5sYW5ndWFnZSI6ICJKxJl6eWsiLAogICAgIm1lbnUucHJlZmVyZW5jZXMiOiAiUHJlZmVyZW5jamUiLAogICAgIm1lbnUudmlldyI6ICJXaWRvayIsCiAgICAiY29udGV4dC1tZW51LmNvcHktYXMiOiAiS29waXVqIGpha28iLAogICAgImNvbnRleHQtbWVudS5leHBvcnQtYXMiOiAiRWtzcG9ydHVqIGpha28iLAogICAgImNvbnRleHQtbWVudS5tb3ZlLXRvLXBhZ2UiOiAiUHJ6ZW5pZcWbIG5hIHN0cm9uxJkiLAogICAgInBhZ2UtbWVudS5uZXctcGFnZS1pbml0aWFsLW5hbWUiOiAiU3Ryb25hIDEiLAogICAgInBhZ2UtbWVudS5wYWdlIjogIlN0cm9uYSIsCiAgICAicGFnZS1tZW51LnN1Ym1lbnUuZGVsZXRlIjogIlVzdcWEIiwKICAgICJzaGFyZS1tZW51LmNyZWF0ZS1wcm9qZWN0IjogIk5vd3kgd3Nww7NsbnkgcHJvamVrdCIsCiAgICAicGVvcGxlLW1lbnUudGl0bGUiOiAiTHVkemllIiwKICAgICJwZW9wbGUtbWVudS5jaGFuZ2UtY29sb3IiOiAiWm1pZcWEIGtvbG9yIiwKICAgICJoZWxwLW1lbnUuZGlzY29yZCI6ICJEaXNjb3JkIiwKICAgICJoZWxwLW1lbnUuZ2l0aHViIjogIkdpdEh1YiIsCiAgICAiaGVscC1tZW51LnR3aXR0ZXIiOiAiVHdpdHRlciIsCiAgICAibGlua3MtbWVudS5kaXNjb3JkIjogIkRpc2NvcmQiLAogICAgImxpbmtzLW1lbnUuZ2l0aHViIjogIkdpdEh1YiIsCiAgICAibGlua3MtbWVudS50d2l0dGVyIjogIlR3aXR0ZXIiLAogICAgImVkaXQtcGFnZXMtZGlhbG9nLm1vcmUtbWVudSI6ICJNZW51IiwKICAgICJlZGl0LXBhZ2VzLWRpYWxvZy5uZXctcGFnZS1pbml0aWFsLW5hbWUiOiAiU3Ryb25hIDEiLAogICAgInJlbG9hZC1maWxlLWRpYWxvZy5yZXZlcnQiOiAiTmllLCBkemnEmWt1asSZIiwKICAgICJzaG9ydGN1dHMtZGlhbG9nLnRpdGxlIjogIlNrcsOzdHkga2xhd2lhdHVyb3dlIiwKICAgICJzaG9ydGN1dHMtZGlhbG9nLmVkaXQiOiAiRWR5Y2phIiwKICAgICJzaG9ydGN1dHMtZGlhbG9nLmZpbGUiOiAiUGxpayIsCiAgICAic2hvcnRjdXRzLWRpYWxvZy5wcmVmZXJlbmNlcyI6ICJQcmVmZXJlbmNqZSIsCiAgICAic2hvcnRjdXRzLWRpYWxvZy52aWV3IjogIldpZG9rIiwKICAgICJzdHlsZS1wYW5lbC50aXRsZSI6ICJTdHlsZSIsCiAgICAic3R5bGUtcGFuZWwuYWxpZ24iOiAiV3lyw7N3bmFuaWUiLAogICAgInN0eWxlLXBhbmVsLmNvbG9yIjogIktvbG9yIiwKICAgICJzdHlsZS1wYW5lbC5kYXNoIjogIkxpbmlhIiwKICAgICJzdHlsZS1wYW5lbC5maWxsIjogIld5cGXFgm5pZW5pZSIsCiAgICAic3R5bGUtcGFuZWwuZm9udCI6ICJDemNpb25rYSIsCiAgICAic3R5bGUtcGFuZWwuc2l6ZSI6ICJSb3ptaWFyIiwKICAgICJzdHlsZS1wYW5lbC50ZXh0IjogIlRla3N0IiwKICAgICJ0b29sLXBhbmVsLnRoaW5ncyI6ICJSemVjenkiLAogICAgImZpbGUtc3lzdGVtLmNvbmZpcm0tb3Blbi5kb250LXNob3ctYWdhaW4iOiAiTmllIHB5dGFqIHBvbm93bmllIiwKICAgICJ2c2NvZGUuZmlsZS1vcGVuLmRvbnQtc2hvdy1hZ2FpbiI6ICJOaWUgcHl0YWogcG9ub3duaWUiLAogICAgInZzY29kZS5jb25maXJtLW9wZW4uY2FuY2VsIjogIlphbWtuaWogcGxpayIsCiAgICAiY29udGV4dC5wYWdlcy5uZXctcGFnZSI6ICJOb3dhIHN0cm9uYSIKfQ==",Li="data:application/json;base64,ewoJImFjdGlvbi5icmluZy1mb3J3YXJkIjogIkF2YW7Dp2FyIiwKCSJhY3Rpb24uYnJpbmctdG8tZnJvbnQiOiAiVHJhemVyIHBhcmEgRnJlbnRlIiwKCSJhY3Rpb24uY29weSI6ICJDb3BpYXIiLAoJImFjdGlvbi5jdXQiOiAiQ29ydGFyIiwKCSJhY3Rpb24uZGVsZXRlIjogIkRlbGV0YXIiLAoJImFjdGlvbi5kdXBsaWNhdGUiOiAiRHVwbGljYXIiLAoJImFjdGlvbi5mbGlwLWhvcml6b250YWwiOiAiVmlyYXIgSG9yaXpvbnRhbG1lbnRlIiwKCSJhY3Rpb24uZmxpcC12ZXJ0aWNhbCI6ICJWaXJhciBWZXJ0aWNhbG1lbnRlIiwKCSJhY3Rpb24uZmxpcC1ob3Jpem9udGFsLnNob3J0IjogIlZpcmFyIEhvcml6b250YWxtZW50ZSIsCgkiYWN0aW9uLmZsaXAtdmVydGljYWwuc2hvcnQiOiAiVmlyYXIgVmVydGljYWxtZW50ZSIsCgkiYWN0aW9uLmdyb3VwIjogIkFncnVwYXIiLAoJImFjdGlvbi5pbnNlcnQtbWVkaWEiOiAiQ2FycmVnYXIgTcOtZGlhIiwKCSJhY3Rpb24ucGFzdGUiOiAiQ29sYXIiLAoJImFjdGlvbi5yZWRvIjogIlJlZmF6ZXIiLAoJImFjdGlvbi5zZWxlY3QtYWxsIjogIlNlbGVjaW9uYXIgdG9kb3MiLAoJImFjdGlvbi5zZWxlY3Qtbm9uZSI6ICJTZWxlY2lvbmFyIG5lbmh1bSIsCgkiYWN0aW9uLnNlbmQtYmFja3dhcmQiOiAiRW52aWFyIHBhcmEgVHLDoXMiLAoJImFjdGlvbi5zZW5kLXRvLWJhY2siOiAiUmVjdWFyIiwKCSJhY3Rpb24udG9nZ2xlLWRhcmstbW9kZS5tZW51IjogIk1vZG8gRXNjdXJvIiwKCSJhY3Rpb24udG9nZ2xlLWRhcmstbW9kZSI6ICJNb2RvIEVzY3VybyIsCgkiYWN0aW9uLnRvZ2dsZS1kZWJ1Zy1tb2RlLm1lbnUiOiAiTW9kbyBEZWJ1ZyIsCgkiYWN0aW9uLnRvZ2dsZS1kZWJ1Zy1tb2RlIjogIk1vZG8gRGVidWciLAoJImFjdGlvbi50b2dnbGUtZm9jdXMtbW9kZS5tZW51IjogIk1vZG8gRm9jbyIsCgkiYWN0aW9uLnRvZ2dsZS1mb2N1cy1tb2RlIjogIk1vZG8gRm9jbyIsCgkiYWN0aW9uLnRvZ2dsZS1ncmlkLm1lbnUiOiAiTW9zdHJhciBHcmFkZSIsCgkiYWN0aW9uLnVuZG8iOiAiRGVzZmF6ZXIiLAoJImFjdGlvbi51bmdyb3VwIjogIkRlc2FncnVwYXIiLAoJImFjdGlvbi56b29tLWluIjogIkF1bWVudGFyIHpvb20iLAoJImFjdGlvbi56b29tLW91dCI6ICJEaW1pbnVpciB6b29tIiwKCSJhY3Rpb24uem9vbS10by1maXQiOiAiWm9vbSBwYXJhIGFqdXN0ZSIsCgkiYWN0aW9uLnpvb20tdG8tc2VsZWN0aW9uIjogIlpvb20gcGFyYSBhIHNlbGXDp8OjbyIsCgkiZ2VvLXN0eWxlLmVsbGlwc2UiOiAiRWxpcHNlIiwKCSJnZW8tc3R5bGUucmVjdGFuZ2xlIjogIlJldMOibmd1bG8iLAoJImdlby1zdHlsZS50cmlhbmdsZSI6ICJUcmnDom5ndWxvIiwKCSJhcnJvd2hlYWRTdGFydC1zdHlsZS5hcnJvdyI6ICJTZXRhIiwKCSJhcnJvd2hlYWRTdGFydC1zdHlsZS50cmlhbmdsZSI6ICJUcmnDom5ndWxvIiwKCSJhcnJvd2hlYWRFbmQtc3R5bGUuYXJyb3ciOiAiU2V0YSIsCgkiYXJyb3doZWFkRW5kLXN0eWxlLnRyaWFuZ2xlIjogIlRyacOibmd1bG8iLAoJInNwbGluZS1zdHlsZS5saW5lIjogIkxpbmhhIiwKCSJ0b29sLnNlbGVjdCI6ICJTZWxlY2lvbmFyIiwKCSJ0b29sLmRyYXciOiAiRGVzZW5oYXIiLAoJInRvb2wuZXJhc2VyIjogIkJvcnJhY2hhIiwKCSJ0b29sLmFycm93IjogIlNldGEiLAoJInRvb2wuZWxsaXBzZSI6ICJFbGlwc2UiLAoJInRvb2wucmVjdGFuZ2xlIjogIlJldMOibmd1bG8iLAoJInRvb2wudHJpYW5nbGUiOiAiVHJpw6JuZ3VsbyIsCgkidG9vbC5ub3RlIjogIkFkZXNpdm8iLAoJInRvb2wudGV4dCI6ICJUZXh0byIsCgkibWVudS5jb3B5LWFzIjogIkNvcGlhciBjb21vIiwKCSJtZW51LmVkaXQiOiAiRWRpdGFyIiwKCSJtZW51LmV4cG9ydC1hcyI6ICJFeHBvcnRhciBjb21vIiwKCSJtZW51LmZpbGUiOiAiQXJxdWl2byIsCgkibWVudS5sYW5ndWFnZSI6ICJJZGlvbWEiLAoJIm1lbnUucHJlZmVyZW5jZXMiOiAiUHJlZmVyw6puY2lhcyIsCgkibWVudS52aWV3IjogIlZpc3VhbGl6YXIiLAoJImNvbnRleHQtbWVudS5jb3B5LWFzIjogIkNvcGlhciBjb21vIiwKCSJjb250ZXh0LW1lbnUuZXhwb3J0LWFzIjogIkV4cG9ydGFyIGNvbW8iLAoJImNvbnRleHQtbWVudS5tb3ZlLXRvLXBhZ2UiOiAiTW92ZXIgcGFyYSBQw6FnaW5hIiwKCSJwYWdlLW1lbnUuY3JlYXRlLW5ldy1wYWdlIjogIkNyaWFyIFDDoWdpbmEiLAoJInBhZ2UtbWVudS5wYWdlIjogIlDDoWdpbmEiLAoJInBhZ2UtbWVudS5lZGl0LXN0YXJ0IjogIkVkaXRhciIsCgkicGFnZS1tZW51LnN1Ym1lbnUuZHVwbGljYXRlLXBhZ2UiOiAiRHVwbGljYXIiLAoJInBhZ2UtbWVudS5zdWJtZW51LmRlbGV0ZSI6ICJEZWxldGFyIiwKCSJzaGFyZS1tZW51LmNvcHktbGluayI6ICJDb3BpYXIgTGluayBkZSBDb252aXRlIiwKCSJzaGFyZS1tZW51LmNvcHktcmVhZG9ubHktbGluayI6ICJDb3BpYXIgTGluayBSZWFkT25seSIsCgkiaGVscC1tZW51LmtleWJvYXJkLXNob3J0Y3V0cyI6ICJBdGFsaG9zIGRlIFRlY2xhZG8iLAoJImVkaXQtbGluay1kaWFsb2cuY2FuY2VsIjogIkNhbmNlbGFyIiwKCSJlZGl0LXBhZ2VzLWRpYWxvZy5jcmVhdGUtbmV3LXBhZ2UiOiAiQ3JpYXIgUMOhZ2luYSIsCgkiZWRpdC1wYWdlcy1kaWFsb2cuZGVsZXRlIjogIkRlbGV0YXIiLAoJImVkaXQtcGFnZXMtZGlhbG9nLmR1cGxpY2F0ZS1wYWdlIjogIkR1cGxpY2FyIiwKCSJzaG9ydGN1dHMtZGlhbG9nLnRpdGxlIjogIkF0YWxob3MgZGUgVGVjbGFkbyIsCgkic2hvcnRjdXRzLWRpYWxvZy5lZGl0IjogIkVkaXRhciIsCgkic2hvcnRjdXRzLWRpYWxvZy5maWxlIjogIkFycXVpdm8iLAoJInNob3J0Y3V0cy1kaWFsb2cucHJlZmVyZW5jZXMiOiAiUHJlZmVyw6puY2lhcyIsCgkic2hvcnRjdXRzLWRpYWxvZy50b29scyI6ICJGZXJyYW1lbnRhcyIsCgkic2hvcnRjdXRzLWRpYWxvZy50cmFuc2Zvcm0iOiAiVHJhbnNmb3JtYXIiLAoJInNob3J0Y3V0cy1kaWFsb2cudmlldyI6ICJWaXN1YWxpemFyIiwKCSJzdHlsZS1wYW5lbC50aXRsZSI6ICJFc3RpbG9zIiwKCSJzdHlsZS1wYW5lbC5hbGlnbiI6ICJBbGluaGFtZW50byIsCgkic3R5bGUtcGFuZWwuY29sb3IiOiAiQ29yIiwKCSJzdHlsZS1wYW5lbC5kYXNoIjogIlRyYcOnbyIsCgkic3R5bGUtcGFuZWwuZmlsbCI6ICJQcmVlbmNoZXIiLAoJInN0eWxlLXBhbmVsLmZvbnQiOiAiRm9udGUiLAoJInN0eWxlLXBhbmVsLnNpemUiOiAiVGFtYW5obyIsCgkic3R5bGUtcGFuZWwudGV4dCI6ICJUZXh0byIsCgkiYWN0aW9uLmFsaWduLWJvdHRvbSI6ICJBbGluaGFyIGVtYmFpeG8iLAoJImFjdGlvbi5hbGlnbi1jZW50ZXItaG9yaXpvbnRhbCI6ICJBbGluaGFyIGFvIGNlbnRybyBuYSBob3Jpem9udGFsIiwKCSJhY3Rpb24uYWxpZ24tY2VudGVyLXZlcnRpY2FsIjogIkFsaW5oYXIgYW8gY2VudHJvIG5hIHZlcnRpY2FsIiwKCSJhY3Rpb24uYWxpZ24tY2VudGVyLWhvcml6b250YWwuc2hvcnQiOiAiQWxpbmhhciBhbyBjZW50cm8gbmEgaG9yaXpvbnRhbCIsCgkiYWN0aW9uLmFsaWduLWNlbnRlci12ZXJ0aWNhbC5zaG9ydCI6ICJBbGluaGFyIGFvIGNlbnRybyBuYSB2ZXJ0aWNhbCIsCgkiYWN0aW9uLmFsaWduLWxlZnQiOiAiQWxpbmhhciDDoCBlc3F1ZXJkYSIsCgkiYWN0aW9uLmFsaWduLXJpZ2h0IjogIkFsaW5oYXIgw6AgZGlyZWl0YSIsCgkiYWN0aW9uLmFsaWduLXRvcCI6ICJBbGluaGFzIGVtIGNpbWEiLAoJImFjdGlvbi5kaXN0cmlidXRlLWhvcml6b250YWwiOiAiRGlzdHJ1aWJ1aXIgbmEgaG9yaXpvbnRhbCIsCgkiYWN0aW9uLmRpc3RyaWJ1dGUtdmVydGljYWwiOiAiRGlzdHJ1aWJ1aXIgbmEgdmVydGljYWwiLAoJImFjdGlvbi5kaXN0cmlidXRlLWhvcml6b250YWwuc2hvcnQiOiAiRGlzdHJ1aWJ1aXIgbmEgaG9yaXpvbnRhbCIsCgkiYWN0aW9uLmRpc3RyaWJ1dGUtdmVydGljYWwuc2hvcnQiOiAiRGlzdHJ1aWJ1aXIgbmEgdmVydGljYWwiLAoJImFjdGlvbi5zdHJldGNoLWhvcml6b250YWwiOiAiRXN0aWNhciBuYSBob3Jpem9udGFsIiwKCSJhY3Rpb24uc3RyZXRjaC12ZXJ0aWNhbCI6ICJFc3RpY2FyIG5hIHZlcnRpY2FsIiwKCSJhY3Rpb24uc3RyZXRjaC1ob3Jpem9udGFsLnNob3J0IjogIkVzdGljYXIgbmEgaG9yaXpvbnRhbCIsCgkiYWN0aW9uLnN0cmV0Y2gtdmVydGljYWwuc2hvcnQiOiAiRXN0aWNhciBuYSB2ZXJ0aWNhbCIsCgkiYWN0aW9uLnRvZ2dsZS1ncmlkIjogIk1vc3RyYXIgR3JhZGUiLAoJImFjdGlvbi50b2dnbGUtc25hcC1tb2RlLm1lbnUiOiAiTW9zdHJhciBQb250b3MgZGUgQWp1c3RlIiwKCSJhY3Rpb24udG9nZ2xlLXNuYXAtbW9kZSI6ICJNb3N0cmFyIFBvbnRvcyBkZSBBanVzdGUiLAoJImFjdGlvbi50b2dnbGUtdHJhbnNwYXJlbnQuY29udGV4dC1tZW51IjogIlRyYW5zcGFyZW50ZSIsCgkiYWN0aW9uLnRvZ2dsZS10cmFuc3BhcmVudC5tZW51IjogIlRyYW5zcGFyZW50ZSIsCgkiZGFzaC1zdHlsZS5kcmF3IjogIkRlc2VuaGFyIiwKCSJmb250LXN0eWxlLmRyYXciOiAiRGVzZW5oYXIiLAoJInRvb2wubGluZSI6ICJMaW5oYSIsCgkiZW1iZWQtZGlhbG9nLmNhbmNlbCI6ICJDYW5jZWxhciIsCgkidG9vbC1wYW5lbC50b29scyI6ICJGZXJyYW1lbnRhcyIsCgkiZm9jdXMtbW9kZS50b2dnbGUtZm9jdXMtbW9kZSI6ICJNb2RvIEZvY28iLAoJImZpbGUtc3lzdGVtLmNvbmZpcm0tb3Blbi5jYW5jZWwiOiAiQ2FuY2VsYXIiCn0K",ji="data:application/json;base64,ewogICAgImFjdGlvbi5icmluZy1mb3J3YXJkIjogIk1vdmVyIGFjaW1hIiwKICAgICJhY3Rpb24uYnJpbmctdG8tZnJvbnQiOiAiQ29sb2NhciDDoCBGcmVudGUiLAogICAgImFjdGlvbi5jb3B5IjogIkNvcGlhciIsCiAgICAiYWN0aW9uLmN1dCI6ICJDb3J0YXIiLAogICAgImFjdGlvbi5kZWxldGUiOiAiQXBhZ2FyIiwKICAgICJhY3Rpb24uZHVwbGljYXRlIjogIkR1cGxpY2FyIiwKICAgICJhY3Rpb24uZmxpcC1ob3Jpem9udGFsIjogIkludmVydGVyIEhvcml6b250YWxtZW50ZSIsCiAgICAiYWN0aW9uLmZsaXAtdmVydGljYWwiOiAiSW52ZXJ0ZXIgVmVydGljYWxtZW50ZSIsCiAgICAiYWN0aW9uLmZsaXAtaG9yaXpvbnRhbC5zaG9ydCI6ICJJbnZlcnRlciBIb3Jpem9udGFsbWVudGUiLAogICAgImFjdGlvbi5mbGlwLXZlcnRpY2FsLnNob3J0IjogIkludmVydGVyIFZlcnRpY2FsbWVudGUiLAogICAgImFjdGlvbi5ncm91cCI6ICJBZ3J1cGFyIiwKICAgICJhY3Rpb24uaW5zZXJ0LW1lZGlhIjogIlVwbG9hZCBNw6lkaWEiLAogICAgImFjdGlvbi5wYXN0ZSI6ICJDb2xhciIsCiAgICAiYWN0aW9uLnJlZG8iOiAiUmVmYXplciIsCiAgICAiYWN0aW9uLnNlbGVjdC1hbGwiOiAiU2VsZWNpb25hciB0b2RvcyIsCiAgICAiYWN0aW9uLnNlbGVjdC1ub25lIjogIlNlbGVjaW9uYXIgbmVuaHVtIiwKICAgICJhY3Rpb24uc2VuZC1iYWNrd2FyZCI6ICJNb3ZlciBhYmFpeG8iLAogICAgImFjdGlvbi5zZW5kLXRvLWJhY2siOiAiQ29sb2NhciBubyBGdW5kbyIsCiAgICAiYWN0aW9uLnRvZ2dsZS1kYXJrLW1vZGUubWVudSI6ICJNb2RvIEVzY3VybyIsCiAgICAiYWN0aW9uLnRvZ2dsZS1kYXJrLW1vZGUiOiAiTW9kbyBFc2N1cm8iLAogICAgImFjdGlvbi50b2dnbGUtZGVidWctbW9kZS5tZW51IjogIk1vZG8gRGVidWciLAogICAgImFjdGlvbi50b2dnbGUtZGVidWctbW9kZSI6ICJNb2RvIERlYnVnIiwKICAgICJhY3Rpb24udG9nZ2xlLWZvY3VzLW1vZGUubWVudSI6ICJNb2RvIEZvY28iLAogICAgImFjdGlvbi50b2dnbGUtZm9jdXMtbW9kZSI6ICJNb2RvIEZvY28iLAogICAgImFjdGlvbi50b2dnbGUtZ3JpZC5tZW51IjogIk1vc3RyYXIgR3JlbGhhIiwKICAgICJhY3Rpb24udG9nZ2xlLWdyaWQiOiAiTW9zdHJhciBHcmVsaGEiLAogICAgImFjdGlvbi50b2dnbGUtc25hcC1tb2RlLm1lbnUiOiAiTW9zdHJhciBQb250b3MgZGUgQWp1c3RlIiwKICAgICJhY3Rpb24udG9nZ2xlLXNuYXAtbW9kZSI6ICJNb3N0cmFyIFBvbnRvcyBkZSBBanVzdGUiLAogICAgImFjdGlvbi51bmRvIjogIkRlc2ZhemVyIiwKICAgICJhY3Rpb24udW5ncm91cCI6ICJEZXNhZ3J1cGFyIiwKICAgICJhY3Rpb24uem9vbS1pbiI6ICJBdW1lbnRhciB6b29tIiwKICAgICJhY3Rpb24uem9vbS1vdXQiOiAiRGltaW51aXIgem9vbSIsCiAgICAiYWN0aW9uLnpvb20tdG8tZml0IjogIlpvb20gcGFyYSBjYWJlciIsCiAgICAiYWN0aW9uLnpvb20tdG8tc2VsZWN0aW9uIjogIlpvb20gbmEgc2VsZcOnw6NvIiwKICAgICJkYXNoLXN0eWxlLmRyYXciOiAiRGVzZW5oYXIiLAogICAgImZvbnQtc3R5bGUuZHJhdyI6ICJEZXNlbmhhciIsCiAgICAiZ2VvLXN0eWxlLmVsbGlwc2UiOiAiRWxpcHNlIiwKICAgICJnZW8tc3R5bGUucmVjdGFuZ2xlIjogIlJldMOibmd1bG8iLAogICAgImdlby1zdHlsZS50cmlhbmdsZSI6ICJUcmnDom5ndWxvIiwKICAgICJhcnJvd2hlYWRTdGFydC1zdHlsZS5hcnJvdyI6ICJTZXRhIiwKICAgICJhcnJvd2hlYWRTdGFydC1zdHlsZS50cmlhbmdsZSI6ICJUcmnDom5ndWxvIiwKICAgICJhcnJvd2hlYWRFbmQtc3R5bGUuYXJyb3ciOiAiU2V0YSIsCiAgICAiYXJyb3doZWFkRW5kLXN0eWxlLnRyaWFuZ2xlIjogIlRyacOibmd1bG8iLAogICAgInNwbGluZS1zdHlsZS5saW5lIjogIkxpbmhhIiwKICAgICJ0b29sLnNlbGVjdCI6ICJTZWxlY2lvbmFyIiwKICAgICJ0b29sLmRyYXciOiAiRGVzZW5oYXIiLAogICAgInRvb2wuZXJhc2VyIjogIkJvcnJhY2hhIiwKICAgICJ0b29sLmFycm93IjogIlNldGEiLAogICAgInRvb2wuZWxsaXBzZSI6ICJFbGlwc2UiLAogICAgInRvb2wubGluZSI6ICJMaW5oYSIsCiAgICAidG9vbC5yZWN0YW5nbGUiOiAiUmV0w6JuZ3VsbyIsCiAgICAidG9vbC50cmlhbmdsZSI6ICJUcmnDom5ndWxvIiwKICAgICJ0b29sLm5vdGUiOiAiUG9zdC1pdCIsCiAgICAidG9vbC50ZXh0IjogIlRleHRvIiwKICAgICJtZW51LmNvcHktYXMiOiAiQ29waWFyIGNvbW8iLAogICAgIm1lbnUuZWRpdCI6ICJFZGl0YXIiLAogICAgIm1lbnUuZXhwb3J0LWFzIjogIkV4cG9ydGFyIGNvbW8iLAogICAgIm1lbnUuZmlsZSI6ICJGaWNoZWlybyIsCiAgICAibWVudS5sYW5ndWFnZSI6ICJMw61uZ3VhIiwKICAgICJtZW51LnByZWZlcmVuY2VzIjogIlByZWZlcsOqbmNpYXMiLAogICAgIm1lbnUudmlldyI6ICJWaXN1YWxpemFyIiwKICAgICJjb250ZXh0LW1lbnUuY29weS1hcyI6ICJDb3BpYXIgY29tbyIsCiAgICAiY29udGV4dC1tZW51LmV4cG9ydC1hcyI6ICJFeHBvcnRhciBjb21vIiwKICAgICJjb250ZXh0LW1lbnUubW92ZS10by1wYWdlIjogIk1vdmVyIHBhcmEgUMOhZ2luYSIsCiAgICAicGFnZS1tZW51LmNyZWF0ZS1uZXctcGFnZSI6ICJDcmlhciBQw6FnaW5hIiwKICAgICJwYWdlLW1lbnUuZWRpdC1zdGFydCI6ICJFZGl0YXIiLAogICAgInBhZ2UtbWVudS5zdWJtZW51LmR1cGxpY2F0ZS1wYWdlIjogIkR1cGxpY2FyIiwKICAgICJwYWdlLW1lbnUuc3VibWVudS5kZWxldGUiOiAiQXBhZ2FyIiwKICAgICJzaGFyZS1tZW51LmNvcHktbGluayI6ICJDb3BpYXIgTGluayBkZSBDb252aXRlIiwKICAgICJlZGl0LWxpbmstZGlhbG9nLmNhbmNlbCI6ICJDYW5jZWxhciIsCiAgICAiZW1iZWQtZGlhbG9nLmNhbmNlbCI6ICJDYW5jZWxhciIsCiAgICAiZWRpdC1wYWdlcy1kaWFsb2cuY3JlYXRlLW5ldy1wYWdlIjogIkNyaWFyIFDDoWdpbmEiLAogICAgImVkaXQtcGFnZXMtZGlhbG9nLmRlbGV0ZSI6ICJBcGFnYXIiLAogICAgImVkaXQtcGFnZXMtZGlhbG9nLmR1cGxpY2F0ZS1wYWdlIjogIkR1cGxpY2FyIiwKICAgICJzaG9ydGN1dHMtZGlhbG9nLmVkaXQiOiAiRWRpdGFyIiwKICAgICJzaG9ydGN1dHMtZGlhbG9nLmZpbGUiOiAiRmljaGVpcm8iLAogICAgInNob3J0Y3V0cy1kaWFsb2cucHJlZmVyZW5jZXMiOiAiUHJlZmVyw6puY2lhcyIsCiAgICAic2hvcnRjdXRzLWRpYWxvZy52aWV3IjogIlZpc3VhbGl6YXIiLAogICAgInN0eWxlLXBhbmVsLnRpdGxlIjogIkVzdGlsb3MiLAogICAgInN0eWxlLXBhbmVsLmFsaWduIjogIkFsaW5oYW1lbnRvIiwKICAgICJzdHlsZS1wYW5lbC5jb2xvciI6ICJDb3IiLAogICAgInN0eWxlLXBhbmVsLmRhc2giOiAiVHJhw6dvIiwKICAgICJzdHlsZS1wYW5lbC5maWxsIjogIlByZWVuY2hlciIsCiAgICAic3R5bGUtcGFuZWwuZm9udCI6ICJGb250ZSIsCiAgICAic3R5bGUtcGFuZWwuc2l6ZSI6ICJUYW1hbmhvIiwKICAgICJzdHlsZS1wYW5lbC50ZXh0IjogIlRleHRvIiwKICAgICJmb2N1cy1tb2RlLnRvZ2dsZS1mb2N1cy1tb2RlIjogIk1vZG8gRm9jbyIsCiAgICAiZmlsZS1zeXN0ZW0uY29uZmlybS1vcGVuLmNhbmNlbCI6ICJDYW5jZWxhciIKfQ==",Ni=i.p+"drawing/ro-954c2e85357d9023.json",Di=i.p+"drawing/ru-c1146cf1f1e9f9b9.json",Ei="data:application/json;base64,ewogICAgImFjdGlvbi5icmluZy1mb3J3YXJkIjogIkZseXR0YSBmcmFtw6V0IiwKICAgICJhY3Rpb24uYnJpbmctdG8tZnJvbnQiOiAiUGxhY2VyYSBsw6RuZ3N0IGZyYW0iLAogICAgImFjdGlvbi5jb3B5IjogIktvcGllcmEiLAogICAgImFjdGlvbi5jdXQiOiAiS2xpcHAgdXQiLAogICAgImFjdGlvbi5kZWxldGUiOiAiUmFkZXJhIiwKICAgICJhY3Rpb24uZHVwbGljYXRlIjogIkR1cGxpY2VyYSIsCiAgICAiYWN0aW9uLmZsaXAtaG9yaXpvbnRhbCI6ICJWw6RuZCBob3Jpc29udGVsbHQiLAogICAgImFjdGlvbi5mbGlwLXZlcnRpY2FsIjogIlbDpG5kIHZlcnRpa2FsdCIsCiAgICAiYWN0aW9uLmZsaXAtaG9yaXpvbnRhbC5zaG9ydCI6ICJWw6RuZCBob3Jpc29udGVsbHQiLAogICAgImFjdGlvbi5mbGlwLXZlcnRpY2FsLnNob3J0IjogIlbDpG5kIHZlcnRpa2FsdCIsCiAgICAiYWN0aW9uLmdyb3VwIjogIkdydXBwZXJhIiwKICAgICJhY3Rpb24uaW5zZXJ0LW1lZGlhIjogIkxhZGRhIHVwcCBtZWRpYSIsCiAgICAiYWN0aW9uLnBhc3RlIjogIktsaXN0cmEgaW4iLAogICAgImFjdGlvbi5yZWRvIjogIkfDtnIgb20iLAogICAgImFjdGlvbi5zZWxlY3QtYWxsIjogIlbDpGxqIGFsbGEiLAogICAgImFjdGlvbi5zZWxlY3Qtbm9uZSI6ICJWw6RsaiBpbmdlbiIsCiAgICAiYWN0aW9uLnNlbmQtYmFja3dhcmQiOiAiRmx5dHRhIGJha8OldCIsCiAgICAiYWN0aW9uLnNlbmQtdG8tYmFjayI6ICJQbGFjZXJhIGzDpG5nc3QgYmFrIiwKICAgICJhY3Rpb24udG9nZ2xlLWRhcmstbW9kZS5tZW51IjogIk3DtnJrdCBsw6RnZSIsCiAgICAiYWN0aW9uLnRvZ2dsZS1kYXJrLW1vZGUiOiAiTcO2cmt0IGzDpGdlIiwKICAgICJhY3Rpb24udG9nZ2xlLWRlYnVnLW1vZGUubWVudSI6ICJEZWJ1Z2zDpGdlIiwKICAgICJhY3Rpb24udG9nZ2xlLWRlYnVnLW1vZGUiOiAiRGVidWdsw6RnZSIsCiAgICAiYWN0aW9uLnRvZ2dsZS1mb2N1cy1tb2RlLm1lbnUiOiAiRm9rdXNsw6RnZSIsCiAgICAiYWN0aW9uLnRvZ2dsZS1mb2N1cy1tb2RlIjogIkZva3VzbMOkZ2UiLAogICAgImFjdGlvbi50b2dnbGUtZ3JpZC5tZW51IjogIlZpc2EgcnV0bsOkdCIsCiAgICAiYWN0aW9uLnRvZ2dsZS1ncmlkIjogIlZpc2EgcnV0bsOkdCIsCiAgICAiYWN0aW9uLnRvZ2dsZS1zbmFwLW1vZGUubWVudSI6ICJWaXNhIGFsbHRpZCBmw6RzdHB1bmt0ZXIiLAogICAgImFjdGlvbi50b2dnbGUtc25hcC1tb2RlIjogIlZpc2EgYWxsdGlkIGbDpHN0cHVua3RlciIsCiAgICAiYWN0aW9uLnRvZ2dsZS10cmFuc3BhcmVudC5jb250ZXh0LW1lbnUiOiAiVHJhbnNwYXJlbnQiLAogICAgImFjdGlvbi50b2dnbGUtdHJhbnNwYXJlbnQubWVudSI6ICJUcmFuc3BhcmVudCIsCiAgICAiYWN0aW9uLnVuZG8iOiAiw4VuZ3JhIiwKICAgICJhY3Rpb24udW5ncm91cCI6ICJBdmdydXBwZXJhIiwKICAgICJhY3Rpb24uem9vbS1pbiI6ICJab29tYSBpbiIsCiAgICAiYWN0aW9uLnpvb20tb3V0IjogIlpvb21hIHV0IiwKICAgICJhY3Rpb24uem9vbS10by1maXQiOiAiQW5wYXNzYSB6b29tIHRpbGwgc2vDpHJtIiwKICAgICJhY3Rpb24uem9vbS10by1zZWxlY3Rpb24iOiAiQW5wYXNzYSB6b29tIHRpbGwgdXJ2YWwiLAogICAgImRhc2gtc3R5bGUuZHJhdyI6ICJSaXRhIiwKICAgICJmb250LXN0eWxlLmRyYXciOiAiUml0YSIsCiAgICAiZ2VvLXN0eWxlLmVsbGlwc2UiOiAiRWxsaXBzIiwKICAgICJnZW8tc3R5bGUucmVjdGFuZ2xlIjogIlJla3RhbmdlbCIsCiAgICAiZ2VvLXN0eWxlLnRyaWFuZ2xlIjogIlRyaWFuZ2VsIiwKICAgICJhcnJvd2hlYWRTdGFydC1zdHlsZS5hcnJvdyI6ICJQaWwiLAogICAgImFycm93aGVhZFN0YXJ0LXN0eWxlLnRyaWFuZ2xlIjogIlRyaWFuZ2VsIiwKICAgICJhcnJvd2hlYWRFbmQtc3R5bGUuYXJyb3ciOiAiUGlsIiwKICAgICJhcnJvd2hlYWRFbmQtc3R5bGUudHJpYW5nbGUiOiAiVHJpYW5nZWwiLAogICAgInNwbGluZS1zdHlsZS5saW5lIjogIkxpbmplIiwKICAgICJ0b29sLnNlbGVjdCI6ICJWw6RsaiIsCiAgICAidG9vbC5kcmF3IjogIlJpdGEiLAogICAgInRvb2wuZXJhc2VyIjogIlJhZGVyYSIsCiAgICAidG9vbC5hcnJvdyI6ICJQaWwiLAogICAgInRvb2wuZWxsaXBzZSI6ICJFbGxpcHMiLAogICAgInRvb2wubGluZSI6ICJMaW5qZSIsCiAgICAidG9vbC5yZWN0YW5nbGUiOiAiUmVrdGFuZ2VsIiwKICAgICJ0b29sLnRyaWFuZ2xlIjogIlRyaWFuZ2VsIiwKICAgICJ0b29sLm5vdGUiOiAiS2xpc3RlcmxhcHAiLAogICAgInRvb2wudGV4dCI6ICJUZXh0IiwKICAgICJtZW51LmNvcHktYXMiOiAiS29waWVyYSBzb20iLAogICAgIm1lbnUuZWRpdCI6ICJSZWRpZ2VyYSIsCiAgICAibWVudS5leHBvcnQtYXMiOiAiRXhwb3J0ZXJhIHRpbGwiLAogICAgIm1lbnUuZmlsZSI6ICJBcmtpdiIsCiAgICAibWVudS5sYW5ndWFnZSI6ICJTcHLDpWsiLAogICAgIm1lbnUucHJlZmVyZW5jZXMiOiAiSW5zdMOkbGxuaW5nYXIiLAogICAgIm1lbnUudmlldyI6ICJJbm5laMOlbGwiLAogICAgImNvbnRleHQtbWVudS5jb3B5LWFzIjogIktvcGllcmEgc29tIiwKICAgICJjb250ZXh0LW1lbnUuZXhwb3J0LWFzIjogIkV4cG9ydGVyYSB0aWxsIiwKICAgICJjb250ZXh0LW1lbnUubW92ZS10by1wYWdlIjogIkZseXR0YSB0aWxsIHNpZGEiLAogICAgInBhZ2UtbWVudS5jcmVhdGUtbmV3LXBhZ2UiOiAiU2thcGEgc2lkYSIsCiAgICAicGFnZS1tZW51LnBhZ2UiOiAiU2lkYSIsCiAgICAicGFnZS1tZW51LmVkaXQtc3RhcnQiOiAiUmVkaWdlcmEiLAogICAgInBhZ2UtbWVudS5zdWJtZW51LmR1cGxpY2F0ZS1wYWdlIjogIkR1cGxpY2VyYSIsCiAgICAicGFnZS1tZW51LnN1Ym1lbnUuZGVsZXRlIjogIlJhZGVyYSIsCiAgICAic2hhcmUtbWVudS5jb3B5LWxpbmsiOiAiS29waWVyYSBsw6RuayBtZWQgcmVkaWdlcmluZ3Nyw6R0dGlnaGV0ZXIiLAogICAgInNoYXJlLW1lbnUuY29weS1yZWFkb25seS1saW5rIjogIktvcGllcmEgbMOkbmsgbWVkIGzDpHNyw6R0dGlnaGV0ZXIiLAogICAgImhlbHAtbWVudS5kaXNjb3JkIjogIkRpc2NvcmQiLAogICAgImhlbHAtbWVudS5naXRodWIiOiAiR2l0SHViIiwKICAgICJoZWxwLW1lbnUua2V5Ym9hcmQtc2hvcnRjdXRzIjogIlRhbmdlbnRib3Jkc2dlbnbDpGdhciIsCiAgICAiaGVscC1tZW51LnR3aXR0ZXIiOiAiVHdpdHRlciIsCiAgICAibGlua3MtbWVudS5kaXNjb3JkIjogIkRpc2NvcmQiLAogICAgImxpbmtzLW1lbnUuZ2l0aHViIjogIkdpdEh1YiIsCiAgICAibGlua3MtbWVudS50d2l0dGVyIjogIlR3aXR0ZXIiLAogICAgImVkaXQtbGluay1kaWFsb2cuY2FuY2VsIjogIkF2YnJ5dCIsCiAgICAiZW1iZWQtZGlhbG9nLmNhbmNlbCI6ICJBdmJyeXQiLAogICAgImVkaXQtcGFnZXMtZGlhbG9nLmNyZWF0ZS1uZXctcGFnZSI6ICJTa2FwYSBzaWRhIiwKICAgICJlZGl0LXBhZ2VzLWRpYWxvZy5kZWxldGUiOiAiUmFkZXJhIiwKICAgICJlZGl0LXBhZ2VzLWRpYWxvZy5kdXBsaWNhdGUtcGFnZSI6ICJEdXBsaWNlcmEiLAogICAgInNob3J0Y3V0cy1kaWFsb2cudGl0bGUiOiAiVGFuZ2VudGJvcmRzZ2VudsOkZ2FyIiwKICAgICJzaG9ydGN1dHMtZGlhbG9nLmVkaXQiOiAiUmVkaWdlcmEiLAogICAgInNob3J0Y3V0cy1kaWFsb2cuZmlsZSI6ICJBcmtpdiIsCiAgICAic2hvcnRjdXRzLWRpYWxvZy5wcmVmZXJlbmNlcyI6ICJJbnN0w6RsbG5pbmdhciIsCiAgICAic2hvcnRjdXRzLWRpYWxvZy50b29scyI6ICJWZXJrdHlnIiwKICAgICJzaG9ydGN1dHMtZGlhbG9nLnRyYW5zZm9ybSI6ICJUcmFuc2Zvcm0iLAogICAgInNob3J0Y3V0cy1kaWFsb2cudmlldyI6ICJJbm5laMOlbGwiLAogICAgInN0eWxlLXBhbmVsLnRpdGxlIjogIlV0c2VlbmRlIiwKICAgICJzdHlsZS1wYW5lbC5hbGlnbiI6ICJKdXN0ZXJhIiwKICAgICJzdHlsZS1wYW5lbC5jb2xvciI6ICJGw6RyZyIsCiAgICAic3R5bGUtcGFuZWwuZGFzaCI6ICJTdHJlY2siLAogICAgInN0eWxlLXBhbmVsLmZpbGwiOiAiSWZ5bGxkIiwKICAgICJzdHlsZS1wYW5lbC5mb250IjogIlR5cHNuaXR0IiwKICAgICJzdHlsZS1wYW5lbC5zaXplIjogIlN0b3JsZWsiLAogICAgInN0eWxlLXBhbmVsLnRleHQiOiAiVGV4dCIsCiAgICAidG9vbC1wYW5lbC50b29scyI6ICJWZXJrdHlnIiwKICAgICJmb2N1cy1tb2RlLnRvZ2dsZS1mb2N1cy1tb2RlIjogIkZva3VzbMOkZ2UiLAogICAgImZpbGUtc3lzdGVtLmNvbmZpcm0tb3Blbi5jYW5jZWwiOiAiQXZicnl0Igp9",ki="data:application/json;base64,ewogICAgImFjdGlvbi5hbGlnbi1ib3R0b20iOiAi4LCF4LCh4LGB4LCX4LGB4LCoIOCwleCxgeCwpuCxgeCwsOCxjeCwmuCxgSIsCiAgICAiYWN0aW9uLmFsaWduLWNlbnRlci1ob3Jpem9udGFsIjogIuCwheCwoeCxjeCwoeCwguCwl+CwviDgsK7gsKfgsY3gsK/gsLLgsYsg4LCV4LGB4LCm4LGB4LCw4LGN4LCa4LGBIiwKICAgICJhY3Rpb24uYWxpZ24tY2VudGVyLXZlcnRpY2FsIjogIuCwqOCwv+CwsuCxgeCwteCxgeCwl+CwviDgsK7gsKfgsY3gsK/gsLLgsYsg4LCV4LGB4LCm4LGB4LCw4LGN4LCa4LGBIiwKICAgICJhY3Rpb24uYWxpZ24tY2VudGVyLWhvcml6b250YWwuc2hvcnQiOiAi4LCF4LCh4LGN4LCh4LCC4LCX4LC+IOCwruCwp+CxjeCwr+CwsuCxiyDgsJXgsYHgsKbgsYHgsLDgsY3gsJrgsYEiLAogICAgImFjdGlvbi5hbGlnbi1jZW50ZXItdmVydGljYWwuc2hvcnQiOiAi4LCo4LC/4LCy4LGB4LC14LGB4LCX4LC+IOCwruCwp+CxjeCwr+CwsuCxiyDgsJXgsYHgsKbgsYHgsLDgsY3gsJrgsYEiLAogICAgImFjdGlvbi5hbGlnbi1sZWZ0IjogIuCwjuCwoeCwruCwteCxiOCwquCxgeCwleCxgSDgsJXgsYHgsKbgsYHgsLDgsY3gsJrgsYEiLAogICAgImFjdGlvbi5hbGlnbi1yaWdodCI6ICLgsJXgsYHgsKHgsL/gsLXgsYjgsKrgsYHgsJXgsYEg4LCV4LGB4LCm4LGB4LCw4LGN4LCa4LGBIiwKICAgICJhY3Rpb24uYWxpZ24tdG9wIjogIuCwquCxiOCwleCwvyDgsJXgsYHgsKbgsYHgsLDgsY3gsJrgsYEiLAogICAgImFjdGlvbi5icmluZy1mb3J3YXJkIjogIuCwruCxgeCwguCwpuCxgeCwleCxgSDgsJzgsLDgsYHgsKrgsYEiLAogICAgImFjdGlvbi5icmluZy10by1mcm9udCI6ICLgsK7gsYrgsKbgsJ/gsL/gsJXgsL8g4LCc4LCw4LGB4LCq4LGBIiwKICAgICJhY3Rpb24uY29weSI6ICLgsKjgsJXgsLLgsYEiLAogICAgImFjdGlvbi5jdXQiOiAi4LCV4LCk4LGN4LCk4LC/4LCw4LC/4LCC4LCa4LGBIiwKICAgICJhY3Rpb24uZGVsZXRlIjogIuCwpOCxiuCwsuCwl+Cwv+CwguCwmuCxgSIsCiAgICAiYWN0aW9uLmRpc3RyaWJ1dGUtaG9yaXpvbnRhbCI6ICLgsIXgsKHgsY3gsKHgsILgsJfgsL4g4LCq4LCC4LCa4LGBIiwKICAgICJhY3Rpb24uZGlzdHJpYnV0ZS12ZXJ0aWNhbCI6ICLgsKjgsL/gsLLgsYHgsLXgsYHgsJfgsL4g4LCq4LCC4LCa4LGBIiwKICAgICJhY3Rpb24uZGlzdHJpYnV0ZS1ob3Jpem9udGFsLnNob3J0IjogIuCwheCwoeCxjeCwoeCwguCwl+CwviDgsKrgsILgsJrgsYEiLAogICAgImFjdGlvbi5kaXN0cmlidXRlLXZlcnRpY2FsLnNob3J0IjogIuCwqOCwv+CwsuCxgeCwteCxgeCwl+CwviDgsKrgsILgsJrgsYEiLAogICAgImFjdGlvbi5kdXBsaWNhdGUiOiAi4LCu4LC+4LCw4LGB4LCq4LGN4LCw4LCk4LC/IiwKICAgICJhY3Rpb24uZmxpcC1ob3Jpem9udGFsIjogIuCwheCwoeCxjeCwoeCwguCwl+CwviDgsKrgsLLgsY3gsJ/gsYAiLAogICAgImFjdGlvbi5mbGlwLXZlcnRpY2FsIjogIuCwqOCwv+CwsuCxgeCwteCxgeCwl+CwviDgsKrgsLLgsY3gsJ/gsYAiLAogICAgImFjdGlvbi5mbGlwLWhvcml6b250YWwuc2hvcnQiOiAi4LCF4LCh4LGN4LCh4LCC4LCX4LC+IOCwquCwsuCxjeCwn+CxgCIsCiAgICAiYWN0aW9uLmZsaXAtdmVydGljYWwuc2hvcnQiOiAi4LCo4LC/4LCy4LGB4LC14LGB4LCX4LC+IOCwquCwsuCxjeCwn+CxgCIsCiAgICAiYWN0aW9uLmdyb3VwIjogIuCwl+CxgeCwguCwquCxgeCwl+CwviDgsI/gsLDgsY3gsKrgsLDgsJrgsYEiLAogICAgImFjdGlvbi5pbnNlcnQtbWVkaWEiOiAi4LCO4LCX4LGB4LCu4LCk4LC/IOCwruCwvuCwp+CxjeCwr+CwgiIsCiAgICAiYWN0aW9uLnBhc3RlIjogIuCwheCwpOCwv+CwleCwv+CwguCwmuCxgSIsCiAgICAiYWN0aW9uLnJlZG8iOiAi4LCu4LCz4LGN4LCz4LGAIOCwruCwvuCwsOCxjeCwmuCxgSIsCiAgICAiYWN0aW9uLnNlbGVjdC1hbGwiOiAi4LCF4LCo4LGN4LCo4LGAIOCwjuCwguCwquCwv+CwleCwmuCxhuCwr+CxjeCwr+CwvyIsCiAgICAiYWN0aW9uLnNlbGVjdC1ub25lIjogIuCwjuCwpuCxgCDgsI7gsILgsKrgsL/gsJXgsJrgsYbgsK/gsY3gsK/gsLXgsKbgsY3gsKbgsYEiLAogICAgImFjdGlvbi5zZW5kLWJhY2t3YXJkIjogIuCwteCxhuCwqOCxgeCwleCwleCxgSDgsJzgsLDgsYHgsKrgsYEiLAogICAgImFjdGlvbi5zZW5kLXRvLWJhY2siOiAi4LCG4LCW4LCw4LC/4LCV4LC/IOCwnOCwsOCxgeCwquCxgSIsCiAgICAiYWN0aW9uLnN0cmV0Y2gtaG9yaXpvbnRhbCI6ICLgsIXgsKHgsY3gsKHgsILgsJfgsL4g4LCy4LC+4LCX4LGBIiwKICAgICJhY3Rpb24uc3RyZXRjaC12ZXJ0aWNhbCI6ICLgsKjgsL/gsLLgsYHgsLXgsYHgsJfgsL4g4LCy4LC+4LCX4LGBIiwKICAgICJhY3Rpb24uc3RyZXRjaC1ob3Jpem9udGFsLnNob3J0IjogIuCwheCwoeCxjeCwoeCwguCwl+CwviDgsLLgsL7gsJfgsYEiLAogICAgImFjdGlvbi5zdHJldGNoLXZlcnRpY2FsLnNob3J0IjogIuCwqOCwv+CwsuCxgeCwteCxgeCwl+CwviDgsLLgsL7gsJfgsYEiLAogICAgImFjdGlvbi50b2dnbGUtZGFyay1tb2RlLm1lbnUiOiAi4LCa4LGA4LCV4LCf4LGI4LCoIOCwleCxjeCwsOCwruCwgiIsCiAgICAiYWN0aW9uLnRvZ2dsZS1kYXJrLW1vZGUiOiAi4LCa4LGA4LCV4LCf4LGI4LCoIOCwleCxjeCwsOCwruCwgiIsCiAgICAiYWN0aW9uLnRvZ2dsZS1kZWJ1Zy1tb2RlLm1lbnUiOiAi4LCk4LCq4LGN4LCq4LGB4LCy4LGH4LCw4LGBIOCwleCxjeCwsOCwruCwgiIsCiAgICAiYWN0aW9uLnRvZ2dsZS1kZWJ1Zy1tb2RlIjogIuCwpOCwquCxjeCwquCxgeCwsuCxh+CwsOCxgSDgsJXgsY3gsLDgsK7gsIIiLAogICAgImFjdGlvbi50b2dnbGUtZm9jdXMtbW9kZS5tZW51IjogIuCwpOCxgOCwleCxjeCwt+CwoyDgsJXgsY3gsLDgsK7gsIIiLAogICAgImFjdGlvbi50b2dnbGUtZm9jdXMtbW9kZSI6ICLgsKTgsYDgsJXgsY3gsLfgsKMg4LCV4LGN4LCw4LCu4LCCIiwKICAgICJhY3Rpb24udG9nZ2xlLWdyaWQubWVudSI6ICLgsJrgsJ/gsY3gsLDgsIIg4LCa4LGC4LCq4LGBIiwKICAgICJhY3Rpb24udG9nZ2xlLWdyaWQiOiAi4LCa4LCf4LGN4LCw4LCCIOCwmuCxguCwquCxgSIsCiAgICAiYWN0aW9uLnRvZ2dsZS1zbmFwLW1vZGUubWVudSI6ICLgsI7gsKrgsY3gsKrgsYHgsKHgsYIg4LCm4LGD4LC24LGN4LCv4LCt4LC+4LCX4LCCIOCwmuCxguCwquCxgSIsCiAgICAiYWN0aW9uLnRvZ2dsZS1zbmFwLW1vZGUiOiAi4LCO4LCq4LGN4LCq4LGB4LCh4LGCIOCwpuCxg+CwtuCxjeCwr+CwreCwvuCwl+CwgiDgsJrgsYLgsKrgsYEiLAogICAgImFjdGlvbi50b2dnbGUtdHJhbnNwYXJlbnQuY29udGV4dC1tZW51IjogIuCwleCwvuCwguCwpOCwvyDgsK3gsYfgsKbgsY3gsK/gsK7gsYEiLAogICAgImFjdGlvbi50b2dnbGUtdHJhbnNwYXJlbnQubWVudSI6ICLgsJXgsL7gsILgsKTgsL8g4LCt4LGH4LCm4LGN4LCv4LCu4LGBIiwKICAgICJhY3Rpb24udW5kbyI6ICLgsK7gsL7gsLDgsY3gsKrgsYHgsKjgsL8g4LCk4LC/4LCw4LGB4LCX4LCX4LGK4LCf4LGN4LCf4LGBIiwKICAgICJhY3Rpb24udW5ncm91cCI6ICLgsJfgsYHgsILgsKrgsYHgsKjgsYEg4LCa4LGG4LCm4LCw4LCX4LGK4LCf4LGN4LCf4LGBIiwKICAgICJhY3Rpb24uem9vbS1pbiI6ICLgsKbgsJfgsY3gsJfgsLDgsJfgsL4g4LCa4LGC4LCq4LGBIiwKICAgICJhY3Rpb24uem9vbS1vdXQiOiAi4LCm4LGC4LCw4LCC4LCX4LC+IOCwmuCxguCwquCxgSIsCiAgICAiYWN0aW9uLnpvb20tdG8tZml0IjogIuCwuOCwsOCwv+CwquCxhuCwn+CxjeCwn+CwvyDgsJrgsYLgsKrgsYEiLAogICAgImFjdGlvbi56b29tLXRvLXNlbGVjdGlvbiI6ICLgsI7gsILgsJrgsYHgsJXgsYHgsKjgsY3gsKgg4LC14LC/4LC34LCv4LC+4LCo4LGN4LCo4LGHIOCwmuCxguCwquCxgSIsCiAgICAiZGFzaC1zdHlsZS5kcmF3IjogIuCwl+CxgOCwr+CxjeCwr+CwvyIsCiAgICAiZm9udC1zdHlsZS5kcmF3IjogIuCwl+CxgOCwr+CxjeCwr+CwvyIsCiAgICAiZ2VvLXN0eWxlLmVsbGlwc2UiOiAi4LCm4LGA4LCw4LGN4LCY4LC14LGD4LCk4LGN4LCk4LCCIiwKICAgICJnZW8tc3R5bGUucmVjdGFuZ2xlIjogIuCwpuCxgOCwsOCxjeCwmOCwmuCwpOCxgeCwsOCwuOCxjeCwsOCwgiIsCiAgICAiZ2VvLXN0eWxlLnRyaWFuZ2xlIjogIuCwpOCxjeCwsOCwv+CwreCxgeCwnOCwgiIsCiAgICAiYXJyb3doZWFkU3RhcnQtc3R5bGUuYXJyb3ciOiAi4LCs4LC+4LCj4LCCIiwKICAgICJhcnJvd2hlYWRTdGFydC1zdHlsZS50cmlhbmdsZSI6ICLgsKTgsY3gsLDgsL/gsK3gsYHgsJzgsIIiLAogICAgImFycm93aGVhZEVuZC1zdHlsZS5hcnJvdyI6ICLgsKzgsL7gsKPgsIIiLAogICAgImFycm93aGVhZEVuZC1zdHlsZS50cmlhbmdsZSI6ICLgsKTgsY3gsLDgsL/gsK3gsYHgsJzgsIIiLAogICAgInNwbGluZS1zdHlsZS5saW5lIjogIuCwl+CxgOCwpCIsCiAgICAidG9vbC5zZWxlY3QiOiAi4LCO4LCC4LCq4LC/4LCV4LCa4LGG4LCv4LGN4LCv4LC/IiwKICAgICJ0b29sLmRyYXciOiAi4LCX4LGA4LCv4LGN4LCv4LC/IiwKICAgICJ0b29sLmVyYXNlciI6ICJFcmFzZXIiLAogICAgInRvb2wuYXJyb3ciOiAi4LCs4LC+4LCj4LCCIiwKICAgICJ0b29sLmVsbGlwc2UiOiAi4LCm4LGA4LCw4LGN4LCY4LC14LGD4LCk4LGN4LCk4LCCIiwKICAgICJ0b29sLmxpbmUiOiAi4LCX4LGA4LCkIiwKICAgICJ0b29sLnJlY3RhbmdsZSI6ICLgsKbgsYDgsLDgsY3gsJjgsJrgsKTgsYHgsLDgsLjgsY3gsLDgsIIiLAogICAgInRvb2wudHJpYW5nbGUiOiAi4LCk4LGN4LCw4LC/4LCt4LGB4LCc4LCCIiwKICAgICJ0b29sLm5vdGUiOiAi4LCF4LCk4LGB4LCV4LGN4LCV4LGB4LCo4LGHIiwKICAgICJ0b29sLnRleHQiOiAi4LCF4LCV4LGN4LC34LCw4LCu4LGB4LCy4LGBIiwKICAgICJtZW51LmNvcHktYXMiOiAi4LCo4LCV4LCy4LGB4LCq4LGN4LCw4LCk4LC/4LCX4LC+IOCwh+CwleCxjeCwleCwoeCwv+CwleCwvyIsCiAgICAibWVudS5lZGl0IjogIuCwquCwsOCwv+Cwt+CxjeCwleCwsOCwv+CwguCwmuCxgSIsCiAgICAibWVudS5leHBvcnQtYXMiOiAi4LCO4LCX4LGB4LCu4LCk4LC/IOCwh+CwleCxjeCwleCwoeCwv+CwleCwvyIsCiAgICAibWVudS5maWxlIjogIuCwq+CxiOCwsuCxjSIsCiAgICAibWVudS5sYW5ndWFnZSI6ICLgsK3gsL7gsLciLAogICAgIm1lbnUucHJlZmVyZW5jZXMiOiAi4LCO4LCC4LCa4LGB4LCV4LGK4LCo4LGN4LCo4LC14LC/IiwKICAgICJtZW51LnZpZXciOiAi4LCa4LGC4LCq4LGBIiwKICAgICJjb250ZXh0LW1lbnUuY29weS1hcyI6ICLgsKjgsJXgsLLgsYHgsKrgsY3gsLDgsKTgsL/gsJfgsL4g4LCH4LCV4LGN4LCV4LCh4LC/4LCV4LC/IiwKICAgICJjb250ZXh0LW1lbnUuZXhwb3J0LWFzIjogIuCwjuCwl+CxgeCwruCwpOCwvyDgsIfgsJXgsY3gsJXgsKHgsL/gsJXgsL8iLAogICAgImNvbnRleHQtbWVudS5tb3ZlLXRvLXBhZ2UiOiAi4LCq4LGB4LCf4LCy4LGL4LCV4LC/IOCwnOCwsOCxgeCwquCxgSIsCiAgICAicGFnZS1tZW51LmNyZWF0ZS1uZXctcGFnZSI6ICLgsKrgsYHgsJ8g4LCV4LCy4LGN4LCq4LC/4LCC4LCa4LGBIiwKICAgICJwYWdlLW1lbnUucGFnZSI6ICLgsKrgsYHgsKQiLAogICAgInBhZ2UtbWVudS5lZGl0LXN0YXJ0IjogIuCwquCwsOCwv+Cwt+CxjeCwleCwsOCwv+CwguCwmuCxgSIsCiAgICAicGFnZS1tZW51LnN1Ym1lbnUuZHVwbGljYXRlLXBhZ2UiOiAi4LCu4LC+4LCw4LGB4LCq4LGN4LCw4LCk4LC/IiwKICAgICJwYWdlLW1lbnUuc3VibWVudS5kZWxldGUiOiAi4LCk4LGK4LCy4LCX4LC/4LCC4LCa4LGBIiwKICAgICJzaGFyZS1tZW51LmNvcHktbGluayI6ICLgsIXgsLngsY3gsLXgsL7gsKgg4LCy4LC/4LCC4LCV4LGBIOCwsOCwvuCwr+CwvyIsCiAgICAic2hhcmUtbWVudS5jb3B5LXJlYWRvbmx5LWxpbmsiOiAi4LCu4LC+4LCw4LCo4LC/4LCq4LGN4LCw4LCk4LC/IOCwsuCwv+CwguCwleCxgSDgsLDgsL7gsK/gsL8iLAogICAgImhlbHAtbWVudS5kaXNjb3JkIjogIkRpc2NvcmQiLAogICAgImhlbHAtbWVudS5naXRodWIiOiAiR2l0SHViIiwKICAgICJoZWxwLW1lbnUua2V5Ym9hcmQtc2hvcnRjdXRzIjogIuCwleCxgOCwrOCxi+CwsOCxjeCwoeCxjSDgsLjgsKTgsY3gsLXgsLDgsK7gsL7gsLDgsY3gsJfgsIIiLAogICAgImhlbHAtbWVudS50d2l0dGVyIjogIlR3aXR0ZXIiLAogICAgImxpbmtzLW1lbnUuZGlzY29yZCI6ICJEaXNjb3JkIiwKICAgICJsaW5rcy1tZW51LmdpdGh1YiI6ICJHaXRIdWIiLAogICAgImxpbmtzLW1lbnUudHdpdHRlciI6ICJUd2l0dGVyIiwKICAgICJlZGl0LWxpbmstZGlhbG9nLmNhbmNlbCI6ICLgsLDgsKbgsY3gsKbgsYHgsJrgsYfgsK/gsL8iLAogICAgImVtYmVkLWRpYWxvZy5jYW5jZWwiOiAi4LCw4LCm4LGN4LCm4LGB4LCa4LGH4LCv4LC/IiwKICAgICJlZGl0LXBhZ2VzLWRpYWxvZy5jcmVhdGUtbmV3LXBhZ2UiOiAi4LCq4LGB4LCfIOCwleCwsuCxjeCwquCwv+CwguCwmuCxgSIsCiAgICAiZWRpdC1wYWdlcy1kaWFsb2cuZGVsZXRlIjogIuCwpOCxiuCwsuCwl+Cwv+CwguCwmuCxgSIsCiAgICAiZWRpdC1wYWdlcy1kaWFsb2cuZHVwbGljYXRlLXBhZ2UiOiAi4LCu4LC+4LCw4LGB4LCq4LGN4LCw4LCk4LC/IiwKICAgICJzaG9ydGN1dHMtZGlhbG9nLnRpdGxlIjogIuCwleCxgOCwrOCxi+CwsOCxjeCwoeCxjSDgsLjgsKTgsY3gsLXgsLDgsK7gsL7gsLDgsY3gsJfgsIIiLAogICAgInNob3J0Y3V0cy1kaWFsb2cuZWRpdCI6ICLgsKrgsLDgsL/gsLfgsY3gsJXgsLDgsL/gsILgsJrgsYEiLAogICAgInNob3J0Y3V0cy1kaWFsb2cuZmlsZSI6ICLgsKvgsYjgsLLgsY0iLAogICAgInNob3J0Y3V0cy1kaWFsb2cucHJlZmVyZW5jZXMiOiAi4LCO4LCC4LCa4LGB4LCV4LGK4LCo4LGN4LCo4LC14LC/IiwKICAgICJzaG9ydGN1dHMtZGlhbG9nLnRvb2xzIjogIuCwquCwsOCwv+CwleCwsOCwvuCwsuCxgSIsCiAgICAic2hvcnRjdXRzLWRpYWxvZy50cmFuc2Zvcm0iOiAi4LCu4LC+4LCw4LGN4LCa4LGBIiwKICAgICJzaG9ydGN1dHMtZGlhbG9nLnZpZXciOiAi4LCa4LGC4LCq4LGBIiwKICAgICJzdHlsZS1wYW5lbC50aXRsZSI6ICLgsLXgsL/gsKfgsK7gsYHgsLLgsYEiLAogICAgInN0eWxlLXBhbmVsLmFsaWduIjogIuCwuOCwsOCwv+CwquCwsOCwmuCxgSIsCiAgICAic3R5bGUtcGFuZWwuY29sb3IiOiAi4LCw4LCC4LCX4LGBIiwKICAgICJzdHlsZS1wYW5lbC5kYXNoIjogIuCwheCwoeCxjeCwoSDgsJfgsYDgsKQiLAogICAgInN0eWxlLXBhbmVsLmZpbGwiOiAi4LCo4LC/4LCC4LCq4LGBIiwKICAgICJzdHlsZS1wYW5lbC5mb250IjogIuCwheCwleCxjeCwt+CwsOCwvuCwleCxg+CwpOCwvyIsCiAgICAic3R5bGUtcGFuZWwuc2l6ZSI6ICLgsKrgsLDgsL/gsK7gsL7gsKPgsIIiLAogICAgInN0eWxlLXBhbmVsLnRleHQiOiAi4LCF4LCV4LGN4LC34LCw4LCu4LGB4LCy4LGBIiwKICAgICJ0b29sLXBhbmVsLnRvb2xzIjogIuCwquCwsOCwv+CwleCwsOCwvuCwsuCxgSIsCiAgICAiZm9jdXMtbW9kZS50b2dnbGUtZm9jdXMtbW9kZSI6ICLgsKTgsYDgsJXgsY3gsLfgsKMg4LCV4LGN4LCw4LCu4LCCIiwKICAgICJmaWxlLXN5c3RlbS5jb25maXJtLW9wZW4uY2FuY2VsIjogIuCwsOCwpuCxjeCwpuCxgeCwmuCxh+Cwr+CwvyIKfQ==",Zi=i.p+"drawing/th-7a7c99517fc9290a.json",Ti=i.p+"drawing/tr-33eab07764347777.json",Wi=i.p+"drawing/uk-5558ba6ec182bcbd.json",zi=i.p+"drawing/vi-6d8d0d4d0649637b.json",Pi=i.p+"drawing/zh-cn-c104d99a1cb0ea43.json",Yi="data:application/json;base64,ewoJImFjdGlvbi5icmluZy1mb3J3YXJkIjogIuS4iuenu+S4gOWxpCIsCgkiYWN0aW9uLmJyaW5nLXRvLWZyb250IjogIuenu+WIsOacgOS4iuWxpCIsCgkiYWN0aW9uLmNvcHkiOiAi6KSH6KO9IiwKCSJhY3Rpb24uY3V0IjogIuWJquS4iyIsCgkiYWN0aW9uLmRlbGV0ZSI6ICLliKrpmaQiLAoJImFjdGlvbi5kdXBsaWNhdGUiOiAi6KSH6KO9IiwKCSJhY3Rpb24uZmxpcC1ob3Jpem9udGFsIjogIuawtOW5s+e/u+i9iSIsCgkiYWN0aW9uLmZsaXAtdmVydGljYWwiOiAi5Z6C55u057+76L2JIiwKCSJhY3Rpb24uZmxpcC1ob3Jpem9udGFsLnNob3J0IjogIuawtOW5s+e/u+i9iSIsCgkiYWN0aW9uLmZsaXAtdmVydGljYWwuc2hvcnQiOiAi5Z6C55u057+76L2JIiwKCSJhY3Rpb24uZ3JvdXAiOiAi57WE5oiQ576k57WEIiwKCSJhY3Rpb24uaW5zZXJ0LW1lZGlhIjogIuS4iuWCs+WqkumrlCIsCgkiYWN0aW9uLnBhc3RlIjogIuiyvOS4iiIsCgkiYWN0aW9uLnJlZG8iOiAi5Y+W5raI5b6p5Y6fIiwKCSJhY3Rpb24uc2VsZWN0LWFsbCI6ICLlhajpgbgiLAoJImFjdGlvbi5zZWxlY3Qtbm9uZSI6ICLlj5bmtojpgbjlj5YiLAoJImFjdGlvbi5zZW5kLWJhY2t3YXJkIjogIuS4i+enu+S4gOWxpCIsCgkiYWN0aW9uLnNlbmQtdG8tYmFjayI6ICLnp7vliLDmnIDkuIvlsaQiLAoJImFjdGlvbi50b2dnbGUtZGFyay1tb2RlLm1lbnUiOiAi5rex6Imy5qih5byPIiwKCSJhY3Rpb24udG9nZ2xlLWRhcmstbW9kZSI6ICLmt7HoibLmqKHlvI8iLAoJImFjdGlvbi50b2dnbGUtZGVidWctbW9kZS5tZW51IjogIumZpOmMr+aooeW8jyIsCgkiYWN0aW9uLnRvZ2dsZS1kZWJ1Zy1tb2RlIjogIumZpOmMr+aooeW8jyIsCgkiYWN0aW9uLnRvZ2dsZS1mb2N1cy1tb2RlLm1lbnUiOiAi5bCI5rOo5qih5byPIiwKCSJhY3Rpb24udG9nZ2xlLWZvY3VzLW1vZGUiOiAi5bCI5rOo5qih5byPIiwKCSJhY3Rpb24udG9nZ2xlLWdyaWQubWVudSI6ICLpoa/npLrntrLmoLwiLAoJImFjdGlvbi51bmRvIjogIuW+qeWOnyIsCgkiYWN0aW9uLnVuZ3JvdXAiOiAi5Y+W5raI576k57WEIiwKCSJhY3Rpb24uem9vbS1pbiI6ICLmlL7lpKciLAoJImFjdGlvbi56b29tLW91dCI6ICLnuK7lsI8iLAoJImFjdGlvbi56b29tLXRvLWZpdCI6ICLnuK7mlL7oh7PpgannlbblpKflsI8iLAoJImFjdGlvbi56b29tLXRvLXNlbGVjdGlvbiI6ICLnuK7mlL7oh7Ppgbjlj5bnr4TlnI0iLAoJImdlby1zdHlsZS5lbGxpcHNlIjogIuapouWck+W9oiIsCgkiZ2VvLXN0eWxlLnJlY3RhbmdsZSI6ICLplbfmlrnlvaIiLAoJImdlby1zdHlsZS50cmlhbmdsZSI6ICLkuInop5LlvaIiLAoJImFycm93aGVhZFN0YXJ0LXN0eWxlLmFycm93IjogIueuremgrSIsCgkiYXJyb3doZWFkU3RhcnQtc3R5bGUudHJpYW5nbGUiOiAi5LiJ6KeS5b2iIiwKCSJhcnJvd2hlYWRFbmQtc3R5bGUuYXJyb3ciOiAi566t6aCtIiwKCSJhcnJvd2hlYWRFbmQtc3R5bGUudHJpYW5nbGUiOiAi5LiJ6KeS5b2iIiwKCSJzcGxpbmUtc3R5bGUubGluZSI6ICLnm7Tnt5oiLAoJInRvb2wuc2VsZWN0IjogIumBuOWPliIsCgkidG9vbC5kcmF3IjogIuaJi+e5qiIsCgkidG9vbC5lcmFzZXIiOiAi5qmh55qu5pOmIiwKCSJ0b29sLmFycm93IjogIueuremgrSIsCgkidG9vbC5lbGxpcHNlIjogIuapouWck+W9oiIsCgkidG9vbC5yZWN0YW5nbGUiOiAi6ZW35pa55b2iIiwKCSJ0b29sLnRyaWFuZ2xlIjogIuS4ieinkuW9oiIsCgkidG9vbC5ub3RlIjogIuS+v+WIqeiyvCIsCgkidG9vbC50ZXh0IjogIuaWh+WtlyIsCgkibWVudS5jb3B5LWFzIjogIuikh+ijveaIkCIsCgkibWVudS5lZGl0IjogIue3qOi8ryIsCgkibWVudS5leHBvcnQtYXMiOiAi5Yyv5Ye65oiQIiwKCSJtZW51LmZpbGUiOiAi5qqU5qGIIiwKCSJtZW51Lmxhbmd1YWdlIjogIuiqnuiogCIsCgkibWVudS5wcmVmZXJlbmNlcyI6ICLpgbjpoIUiLAoJIm1lbnUudmlldyI6ICLmqqLoppYiLAoJImNvbnRleHQtbWVudS5jb3B5LWFzIjogIuikh+ijveaIkCIsCgkiY29udGV4dC1tZW51LmV4cG9ydC1hcyI6ICLljK/lh7rmiJAiLAoJImNvbnRleHQtbWVudS5tb3ZlLXRvLXBhZ2UiOiAi56e76Iez6aCB6Z2iIiwKCSJwYWdlLW1lbnUuY3JlYXRlLW5ldy1wYWdlIjogIuW7uueri+mggemdoiIsCgkicGFnZS1tZW51LnBhZ2UiOiAi6aCB6Z2iIiwKCSJwYWdlLW1lbnUuZWRpdC1zdGFydCI6ICLnt6jovK8iLAoJInBhZ2UtbWVudS5zdWJtZW51LmR1cGxpY2F0ZS1wYWdlIjogIuikh+ijvSIsCgkicGFnZS1tZW51LnN1Ym1lbnUuZGVsZXRlIjogIuWIqumZpCIsCgkic2hhcmUtbWVudS5jb3B5LWxpbmsiOiAi6KSH6KO96YKA6KuL6YCj57WQIiwKCSJzaGFyZS1tZW51LmNvcHktcmVhZG9ubHktbGluayI6ICLopIfoo73llK/oroDpgKPntZAiLAoJImVkaXQtbGluay1kaWFsb2cuY2FuY2VsIjogIuWPlua2iCIsCgkiZWRpdC1wYWdlcy1kaWFsb2cuY3JlYXRlLW5ldy1wYWdlIjogIuW7uueri+mggemdoiIsCgkiZWRpdC1wYWdlcy1kaWFsb2cuZGVsZXRlIjogIuWIqumZpCIsCgkiZWRpdC1wYWdlcy1kaWFsb2cuZHVwbGljYXRlLXBhZ2UiOiAi6KSH6KO9IiwKCSJzaG9ydGN1dHMtZGlhbG9nLmVkaXQiOiAi57eo6LyvIiwKCSJzaG9ydGN1dHMtZGlhbG9nLmZpbGUiOiAi5qqU5qGIIiwKCSJzaG9ydGN1dHMtZGlhbG9nLnByZWZlcmVuY2VzIjogIumBuOmghSIsCgkic2hvcnRjdXRzLWRpYWxvZy52aWV3IjogIuaqouimliIsCgkic3R5bGUtcGFuZWwudGl0bGUiOiAi5qij5byPIiwKCSJzdHlsZS1wYW5lbC5hbGlnbiI6ICLlsI3pvYoiLAoJInN0eWxlLXBhbmVsLmNvbG9yIjogIumhj+iJsiIsCgkic3R5bGUtcGFuZWwuZGFzaCI6ICLomZvnt5oiLAoJInN0eWxlLXBhbmVsLmZpbGwiOiAi5aGr5YWFIiwKCSJzdHlsZS1wYW5lbC5mb250IjogIuWtl+WeiyIsCgkic3R5bGUtcGFuZWwuc2l6ZSI6ICLlpKflsI8iLAoJInN0eWxlLXBhbmVsLnRleHQiOiAi5paH5a2XIiwKCSJhY3Rpb24udG9nZ2xlLWdyaWQiOiAi6aGv56S657ay5qC8IiwKCSJhY3Rpb24udG9nZ2xlLXNuYXAtbW9kZS5tZW51IjogIuawuOmBoOmhr+ekuuWwjem9iue3miIsCgkiYWN0aW9uLnRvZ2dsZS1zbmFwLW1vZGUiOiAi5rC46YGg6aGv56S65bCN6b2K57eaIiwKCSJkYXNoLXN0eWxlLmRyYXciOiAi5omL57mqIiwKCSJmb250LXN0eWxlLmRyYXciOiAi5omL57mqIiwKCSJ0b29sLmxpbmUiOiAi55u057eaIiwKCSJlbWJlZC1kaWFsb2cuY2FuY2VsIjogIuWPlua2iCIsCgkiZm9jdXMtbW9kZS50b2dnbGUtZm9jdXMtbW9kZSI6ICLlsIjms6jmqKHlvI8iLAoJImZpbGUtc3lzdGVtLmNvbmZpcm0tb3Blbi5jYW5jZWwiOiAi5Y+W5raIIgp9Cg==";function Oi(e,{baseUrl:t="",format:i}={}){const n="string"==typeof e?e:e.src;return i?i(n):n.startsWith("data:")?n:`${t.replace(/\/$/,"")}/${n.replace(/^\.?\//,"")}`}function Ri(e){return{fonts:{monospace:Oi(b,e),sansSerif:Oi(w,e),serif:Oi(C,e),draw:Oi(M,e)},icons:{"align-bottom":Oi(x,e),"align-center-horizontal":Oi(A,e),"align-center-vertical":Oi(S,e),"align-left":Oi(v,e),"align-right":Oi(L,e),"align-top":Oi(j,e),"arrow-left":Oi(N,e),"arrowhead-arrow":Oi(D,e),"arrowhead-bar":Oi(E,e),"arrowhead-diamond":Oi(k,e),"arrowhead-dot":Oi(Z,e),"arrowhead-none":Oi(T,e),"arrowhead-square":Oi(W,e),"arrowhead-triangle-inverted":Oi(z,e),"arrowhead-triangle":Oi(P,e),"aspect-ratio":Oi(Y,e),avatar:Oi(O,e),blob:Oi(R,e),"bring-forward":Oi(G,e),"bring-to-front":Oi(_,e),check:Oi(B,e),"checkbox-checked":Oi(J,e),"checkbox-empty":Oi(H,e),"chevron-down":Oi(V,e),"chevron-left":Oi(U,e),"chevron-right":Oi(X,e),"chevron-up":Oi(F,e),"chevrons-ne":Oi(K,e),"chevrons-sw":Oi(Q,e),"clipboard-copy":Oi($,e),code:Oi(q,e),collab:Oi(ee,e),color:Oi(te,e),comment:Oi(ie,e),"cross-2":Oi(ne,e),cross:Oi(se,e),"dash-dashed":Oi(oe,e),"dash-dotted":Oi(re,e),"dash-draw":Oi(ae,e),"dash-solid":Oi(le,e),discord:Oi(ce,e),"distribute-horizontal":Oi(de,e),"distribute-vertical":Oi(ue,e),dot:Oi(he,e),"dots-horizontal":Oi(pe,e),"dots-vertical":Oi(ge,e),"drag-handle-dots":Oi(me,e),duplicate:Oi(Ie,e),edit:Oi(fe,e),"external-link":Oi(ye,e),file:Oi(be,e),"fill-none":Oi(we,e),"fill-pattern":Oi(Ce,e),"fill-semi":Oi(Me,e),"fill-solid":Oi(xe,e),"font-draw":Oi(Ae,e),"font-mono":Oi(Se,e),"font-sans":Oi(ve,e),"font-serif":Oi(Le,e),"geo-arrow-down":Oi(je,e),"geo-arrow-left":Oi(Ne,e),"geo-arrow-right":Oi(De,e),"geo-arrow-up":Oi(Ee,e),"geo-diamond":Oi(ke,e),"geo-ellipse":Oi(Ze,e),"geo-hexagon":Oi(Te,e),"geo-octagon":Oi(We,e),"geo-oval":Oi(ze,e),"geo-pentagon":Oi(Pe,e),"geo-rectangle":Oi(Ye,e),"geo-rhombus-2":Oi(Oe,e),"geo-rhombus":Oi(Re,e),"geo-star":Oi(Ge,e),"geo-trapezoid":Oi(_e,e),"geo-triangle":Oi(Be,e),"geo-x-box":Oi(Je,e),github:Oi(He,e),group:Oi(Ve,e),hidden:Oi(Ue,e),image:Oi(Xe,e),"info-circle":Oi(Fe,e),link:Oi(Ke,e),"lock-small":Oi(Qe,e),lock:Oi($e,e),menu:Oi(qe,e),minus:Oi(et,e),mixed:Oi(tt,e),pack:Oi(it,e),page:Oi(nt,e),plus:Oi(st,e),"question-mark-circle":Oi(ot,e),"question-mark":Oi(rt,e),redo:Oi(at,e),"reset-zoom":Oi(lt,e),"rotate-ccw":Oi(ct,e),"rotate-cw":Oi(dt,e),ruler:Oi(ut,e),search:Oi(ht,e),"send-backward":Oi(pt,e),"send-to-back":Oi(gt,e),"settings-horizontal":Oi(mt,e),"settings-vertical-1":Oi(It,e),"settings-vertical":Oi(ft,e),"share-1":Oi(yt,e),"share-2":Oi(bt,e),"size-extra-large":Oi(wt,e),"size-large":Oi(Ct,e),"size-medium":Oi(Mt,e),"size-small":Oi(xt,e),"spline-cubic":Oi(At,e),"spline-line":Oi(St,e),"stack-horizontal":Oi(vt,e),"stack-vertical":Oi(Lt,e),"stretch-horizontal":Oi(jt,e),"stretch-vertical":Oi(Nt,e),"text-align-center":Oi(Dt,e),"text-align-justify":Oi(Et,e),"text-align-left":Oi(kt,e),"text-align-right":Oi(Zt,e),"tool-arrow":Oi(Tt,e),"tool-embed":Oi(Wt,e),"tool-eraser":Oi(zt,e),"tool-frame":Oi(Pt,e),"tool-hand":Oi(Yt,e),"tool-highlighter":Oi(Ot,e),"tool-line":Oi(Rt,e),"tool-media":Oi(Gt,e),"tool-note":Oi(_t,e),"tool-pencil":Oi(Bt,e),"tool-pointer":Oi(Jt,e),"tool-text":Oi(Ht,e),trash:Oi(Vt,e),"triangle-down":Oi(Ut,e),"triangle-up":Oi(Xt,e),twitter:Oi(Ft,e),undo:Oi(Kt,e),ungroup:Oi(Qt,e),"unlock-small":Oi($t,e),unlock:Oi(qt,e),visible:Oi(ei,e),"warning-triangle":Oi(ti,e),"zoom-in":Oi(ii,e),"zoom-out":Oi(ni,e)},translations:{ar:Oi(si,e),ca:Oi(oi,e),da:Oi(ri,e),de:Oi(ai,e),en:Oi(li,e),es:Oi(ci,e),fa:Oi(di,e),fi:Oi(ui,e),fr:Oi(hi,e),gl:Oi(pi,e),he:Oi(gi,e),"hi-in":Oi(mi,e),hu:Oi(Ii,e),it:Oi(fi,e),ja:Oi(yi,e),"ko-kr":Oi(bi,e),ku:Oi(wi,e),languages:Oi(Ci,e),main:Oi(Mi,e),my:Oi(xi,e),ne:Oi(Ai,e),no:Oi(Si,e),pl:Oi(vi,e),"pt-br":Oi(Li,e),"pt-pt":Oi(ji,e),ro:Oi(Ni,e),ru:Oi(Di,e),sv:Oi(Ei,e),te:Oi(ki,e),th:Oi(Zi,e),tr:Oi(Ti,e),uk:Oi(Wi,e),vi:Oi(zi,e),"zh-cn":Oi(Pi,e),"zh-tw":Oi(Yi,e)},embedIcons:{codepen:Oi(n,e),codesandbox:Oi(s,e),excalidraw:Oi(o,e),felt:Oi(r,e),figma:Oi(a,e),github_gist:Oi(l,e),google_calendar:Oi(c,e),google_maps:Oi(d,e),google_slides:Oi(u,e),observable:Oi(h,e),replit:Oi(p,e),scratch:Oi(g,e),spotify:Oi(m,e),tldraw:Oi(I,e),vimeo:Oi(f,e),youtube:Oi(y,e)}}}},934496:(e,t,i)=>{"use strict";var n=i(619497);e.exports=n},956682:(e,t,i)=>{"use strict";var n=i(969565),s=i(28551),o=i(194901),r=i(544576),a=i(957323),l=TypeError;e.exports=function(e,t){var i=e.exec;if(o(i)){var c=n(i,e,t);return null!==c&&s(c),c}if("RegExp"===r(e))return n(a,e,t);throw new l("RegExp#exec called on incompatible receiver")}},957323:(e,t,i)=>{"use strict";var n,s,o=i(969565),r=i(179504),a=i(500655),l=i(867979),c=i(358429),d=i(725745),u=i(202360),h=i(591181).get,p=i(383635),g=i(718814),m=d("native-string-replace",String.prototype.replace),I=RegExp.prototype.exec,f=I,y=r("".charAt),b=r("".indexOf),w=r("".replace),C=r("".slice),M=(s=/b*/g,o(I,n=/a/,"a"),o(I,s,"a"),0!==n.lastIndex||0!==s.lastIndex),x=c.BROKEN_CARET,A=void 0!==/()??/.exec("")[1];(M||A||x||p||g)&&(f=function(e){var t,i,n,s,r,c,d,p=this,g=h(p),S=a(e),v=g.raw;if(v)return v.lastIndex=p.lastIndex,t=o(f,v,S),p.lastIndex=v.lastIndex,t;var L=g.groups,j=x&&p.sticky,N=o(l,p),D=p.source,E=0,k=S;if(j&&(N=w(N,"y",""),-1===b(N,"g")&&(N+="g"),k=C(S,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==y(S,p.lastIndex-1))&&(D="(?: "+D+")",k=" "+k,E++),i=new RegExp("^(?:"+D+")",N)),A&&(i=new RegExp("^"+D+"$(?!\\s)",N)),M&&(n=p.lastIndex),s=o(I,j?i:p,k),j?s?(s.input=C(s.input,E),s[0]=C(s[0],E),s.index=p.lastIndex,p.lastIndex+=s[0].length):p.lastIndex=0:M&&s&&(p.lastIndex=p.global?s.index+s[0].length:n),A&&s&&s.length>1&&o(m,s[0],i,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(s[r]=void 0)})),s&&L)for(s.groups=c=u(null),r=0;r<L.length;r++)c[(d=L[r])[0]]=s[d[1]];return s}),e.exports=f}}]);