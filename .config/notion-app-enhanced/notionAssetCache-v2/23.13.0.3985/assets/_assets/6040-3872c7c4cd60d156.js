"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[6040,46292],{2e3:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{open:!1}}}const i=new o},6040:(e,t,n)=>{n.r(t);var o=()=>n(624919),i=()=>n(630116);(0,o().EX)({id:"selectableFormatter",canFormat:e=>Boolean(e&&e instanceof i().Bv),header(e){const{tr:t,td:s,object:l,objectSummary:c}=o().iY,r=n(695625).T.findSelectableFromStore(e)||void 0,a=e.getTitleValue(),d=e.getType(),u=e.getBlockTitleTextSliceTree(),h=e.getOwnedCollectionStores(),p=e.getAssociatedCollectionStore(),f=e.getCollectionViewStores(),S=e.getAutomationStore(),g=e.getWorkflowStore();let m;return h&&h.length>0&&(m=1===h.length?t({},s({},"collection:"),s({},l(h[0]))):t({},s({},"collections:"),s({},l(h)))),(0,i().Fz)(e,a&&t({},s({},"block title:"),s({},c(a,{asJSON:!0}))),u&&t({},s({},"block title CRDT:"),s({},l(new(n(746292).CollapsibleTextSliceTreeWrapper)(u)))),d&&t({},s({},"block type:"),s({},l(d))),m,p&&t({},s({},"associated\ncollection:"),s({},l(p))),f.length>0?t({},s({},"collection\nviews (tabs):"),s({},l(f))):void 0,g&&t({},s({},"workflow:"),s({},l(g))),r&&t({},s({},"<Selectable>:"),s({},l(r))),S&&t({},s({},"automation:"),s({},l(S))))},hasBody:()=>!1,body:()=>null})},746292:(e,t,n)=>{n.r(t),n.d(t,{CollapsibleTextSliceTreeWrapper:()=>m});n(944114),n(898992),n(803949);var o=()=>n(624919),i=()=>n(604341),s=(n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(581454),()=>n(425877)),l=()=>n(426234);function c(e){return d(r(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})).join("\n")}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u(e,t,{latestRandomId:0,uuidMap:t.uuidMap??{},instanceIdsShown:new Set},0)}function a(e,t){return t[e]??e}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{simplifiedId:n,hasShownInstance:o,clock:i,searchLabel:s,textValue:c,simplifiedItems:r,children:a}=e,u=[];if(u.push(`${t}- id: ${n}`),o||u.push(`${t}  clock: ${i}`),void 0!==s&&u.push(`${t}  searchLabel: "${s}" (${(0,l().DH)(s)})`),u.push(`${t}  text: ${JSON.stringify(c)}`),u.push(`${t}  items: ${r}`),a.length>0){u.push(`${t}  children:`);for(const e of a)u.push(...d(e,`${t}  `))}return u}function u(e,t,n,o){const i=e.getTextSlice(),l=i.textInstanceId;t.isInstanceIdRandom&&!n.uuidMap[l]&&(n.uuidMap[l]=`[random UUID #${++n.latestRandomId}]`);const c=a(i.textInstanceId,n.uuidMap),r=n.instanceIdsShown.has(l),d=i.opClock.getValue();r||n.instanceIdsShown.add(l);const h=t.includeSearchLabels?i.getSearchLabel():void 0,p=i.getTextValue(),f=Array.from(i.iterateItems({includeDeleted:!0,includeEndItem:!0})).map((e=>function(e,t,n){const o=e.toString();if(e instanceof s().pC){const i=`${a(e.id[0],t)}@${e.id[1]}${n.includeEndId?`~${e.getEndId()[1]}`:""}`;return o.replace(" ",` ${i} `)}if(e instanceof s().of){const n=`${a(e.id[0],t)}@${e.id[1]}`;return o.replace("]",` ${n}]`)}return o}(e,n.uuidMap,t))),S={simplifiedId:c,clock:d,textValue:p,simplifiedItems:f.join(" "),hasShownInstance:r,children:[],depth:o,searchLabel:h};for(const s of e.children)S.children.push(u(s,t,n,o+1));return S}var h=()=>n(2e3);const p=new class{constructor(e){this.nextId=0,this.uuidMap=e}pseudonymizeSessions(e){for(const t of e.getTextSlice().iterateItems({includeDeleted:!0,includeEndItem:!0}))if(t instanceof s().pC||t instanceof s().of){const e=t.id[0];this.uuidMap[e]||(this.uuidMap[e]=this.zeroOrPositiveIntToLetters(this.nextId++))}for(const t of e.children)this.pseudonymizeSessions(t)}zeroOrPositiveIntToLetters(e){const t="A".codePointAt(0)-"0".codePointAt(0);return e.toString().split("").map((e=>String.fromCodePoint(e.charCodeAt(0)+t))).join("")}}({});function f(e,t){p.pseudonymizeSessions(e);return g(r(e,{...t,uuidMap:{...p.uuidMap,...null==t?void 0:t.uuidMap}}))}i().exposeDebugValue("toggleCrdtDebuggingOverlay",(()=>{const e=!h().A.state.open;h().A.setState({open:e}),console.log(`CRDT debugging overlay is now ${e?"enabled":"disabled"}.`)})),i().exposeDebugValue("visualizeTextSliceTreesOfSelectedBlocks",(()=>{const e=n(502438).default.state.stores,t={};e.forEach(((e,n)=>{t[e.id]=`block${n+1}`}));for(const n of e){const e=n.getBlockTitleTextSliceTree();if(e){const o=c(e,{uuidMap:t});console.log(`TextSliceTree for ${t[n.id]} (${n.id}):\n\n`,o)}}}));const S=4;function g(e){const{simplifiedId:t,hasShownInstance:n,clock:i,textValue:s,simplifiedItems:l,children:c,depth:r}=e,{ol:a,li:u,span:h,div:p,objectSummary:f}=o().iY,m=function(e){const t="id"===e?"â€¢":" ";for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return u({},h({},`${t} `),h({style:"font-weight: bold"},`${e}: `),...o)},T=[];for(const o of c){const e=p({},r>S?d(o,"    ").join("\n"):g(o));T.push(e)}return a({style:"list-style-type: none; padding-left: 2em"},m("id",t),n?void 0:m("clock",i.toString()),m("text",f(s,{asJSON:!0})),m("items",l),T.length>0?m("children",...T):void 0)}(0,o().EX)({id:"textSliceTreeFormatter",canFormat:e=>Boolean(e&&e instanceof n(855355).Ay),header(e){const{span:t,CONTAINER_STYLE:n,object:i}=o().iY;return t(n,t({},i(e,{useDefaultFormatter:!0}),`(${T(e)})`),f(e))},hasBody:()=>!1,body:()=>null});class m{constructor(e){this.textSliceTree=e}}function T(e){let t=0;for(const n of e.iterateTextSliceTrees())t++;return t}(0,o().EX)({id:"collapsibleTextSliceTreeWrapperFormatter",canFormat:e=>Boolean(e&&e instanceof m),header(e){const{span:t}=o().iY;return t({},`TextSliceTree(${T(e.textSliceTree)})`)},hasBody:()=>!0,body:e=>f(e.textSliceTree)})}}]);