"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[80071],{24184:(e,t,a)=>{a.d(t,{e:()=>n});const n=(0,a(340498).xh)("arrowCounterClockwise",{default:{loader:()=>a.e(79311).then(a.bind(a,579311))},small:{loader:()=>a.e(49121).then(a.bind(a,449121))},mini:{loader:()=>a.e(48591).then(a.bind(a,248591))},large:{loader:()=>a.e(95490).then(a.bind(a,873109))}})},55846:(e,t,a)=>{a.d(t,{g:()=>l});a(296540);var n=()=>a(401497),r=()=>a(554509),i=()=>a(221329),o=a(474848);function l(e){let{imageSrc:t,title:a,description:l,customStyles:s}=e;const d=(0,n().IS)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",gap:8},image:{width:55,objectFit:"contain",position:"static"},placeholderLoadedStyle:{width:"unset"}})),[]);return(0,o.jsxs)("div",{style:{...d.container,...null==s?void 0:s.container},children:[(0,o.jsx)(i().p,{imageSrc:t,darkImageSrc:t,style:{...d.image,...null==s?void 0:s.image},isHidden:!1,placeholderLoadedStyle:{...d.placeholderLoadedStyle,...null==s?void 0:s.placeholderLoadedStyle}}),(0,o.jsx)(r().D,{styleName:"UIHeading-17px/Semibold",colorName:"primary",children:a}),(0,o.jsx)(r().D,{styleName:"UIMedium-13px/Regular",colorName:"secondary",customStyles:null==s?void 0:s.description,children:l})]})}},195821:(e,t,a)=>{a.d(t,{A:()=>s,O:()=>l});a(296540);var n=()=>a(401497),r=()=>a(381349),i=()=>a(284371),o=a(474848);function l(e){const{name:t,htmlLabel:a,children:i,errorMessage:l,hideLabel:s,style:u={},labelStyle:c={},errorMessageStyle:m={},required:p}=e,f=(0,n().IS)((e=>({formInputContainer:{display:"flex",flexDirection:"column",gap:6,width:"100%"},formLabel:{color:e.darkTextColor,visibility:s?"hidden":"inherit"},errorMessage:{fontSize:12,color:e.errorText,...m},wrapper:{display:"flex",alignItems:"center"},required:{color:r().Ay.red,marginLeft:2}})),[s,m]);return(0,o.jsxs)("div",{style:{...f.formInputContainer,...u},children:[(0,o.jsxs)("div",{style:f.wrapper,children:[(0,o.jsx)(d,{htmlFor:a,style:{...f.formLabel,...c},children:t}),p?(0,o.jsx)("div",{style:f.required,children:"*"}):void 0]}),i,l?(0,o.jsx)("div",{role:"alert",style:f.errorMessage,children:l}):void 0]})}const s=l;function d(e){const{children:t,htmlFor:a,style:r}=e,l=(0,n().IS)((e=>({base:{lineHeight:i().K_.UISmall.desktop,fontSize:i().J.UISmall.desktop,color:e.text.primary}})),[]);return(0,o.jsx)("label",{htmlFor:a,style:{...l.base,...r},children:t})}},221329:(e,t,a)=>{a.d(t,{p:()=>d});var n=a(296540),r=()=>a(484714),i=()=>a(56366),o=()=>a(401497),l=()=>a(807683),s=a(474848);function d(e){const{imageSrc:t,darkImageSrc:a,style:d={},isHidden:u,placeholderLoadedStyle:c}=e,[m,p]=n.useState(null),f=(0,r().v3)(),g=(0,i().K8)((()=>f.ThemeModeStore.state),[f]),y=function(e){const{visible:t}=e;return(0,o().IS)((()=>({image:{opacity:null!==t&&t?1:0,transition:"opacity 175ms ease-in",position:"absolute"}})),[t])}({visible:m}),h="light"===g?t:a;return n.useEffect((()=>{p(!u)}),[u,m]),(0,s.jsx)(l().Ay,{src:h,loading:"eager",style:{...y.image,...d},placeholderLoadedStyle:c})}},284622:(e,t,a)=>{a.d(t,{G:()=>n});const n=(0,a(340498).xh)("xmarkCircle",{default:{loader:()=>a.e(15830).then(a.bind(a,593449))},small:{loader:()=>a.e(57507).then(a.bind(a,657507))},mini:{loader:()=>a.e(26357).then(a.bind(a,26357))},large:{loader:()=>a.e(16939).then(a.bind(a,116939))}})},329452:(e,t,a)=>{a.d(t,{l:()=>n});const n=(0,a(340498).xh)("chat",{default:{loader:()=>a.e(49291).then(a.bind(a,859002))},small:{loader:()=>a.e(49291).then(a.bind(a,827312))},fill:{loader:()=>a.e(49291).then(a.bind(a,296488))},fillSmall:{loader:()=>a.e(49291).then(a.bind(a,470447))}},["comment","bubble","chat","message","speech","right"])},556927:(e,t,a)=>{a.d(t,{j:()=>n});const n=(0,a(340498).xh)("arrowUpRight",{default:{loader:()=>a.e(43274).then(a.bind(a,443274))},small:{loader:()=>a.e(30720).then(a.bind(a,230720))},mini:{loader:()=>a.e(37972).then(a.bind(a,315591))},large:{loader:()=>a.e(49172).then(a.bind(a,749172))}})},563881:(e,t,a)=>{a.r(t),a.d(t,{BuyerProfileModal:()=>We,BuyerProfileRefundModal:()=>xt});var n=a(296540),r=()=>a(484714),i=()=>a(56366),o=()=>a(401497),l=()=>a(959013),s=()=>a(2220),d=()=>a(107683),u=()=>a(217429),c=()=>a(530681),m=()=>a(570882),p=()=>a(816360),f=()=>a(76489),g=()=>a(460292),y=a(474848);function h(){const e=(0,o().IS)((e=>({headerContainer:{height:52,width:"100%",display:"flex",alignItems:"center",gap:10},headerIconContainer:{width:32,height:32,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",padding:6,background:"light"===e.mode?"rgba(241, 241, 239, 1)":"rgba(43, 43, 43, 1)"},headerText:{fontSize:24,color:e.text.primary,fontWeight:590}})),[]);return(0,y.jsxs)("div",{style:e.headerContainer,children:[(0,y.jsx)("div",{style:e.headerIconContainer,children:(0,y.jsx)(g().Q,{iconGroup:f().z,variantName:"default"})}),(0,y.jsx)("span",{style:e.headerText,children:(0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.dialog.header.purchased",defaultMessage:"Purchased"})})]})}var x=()=>a(187174),b=()=>a(765957),v=()=>a(148307),j=()=>a(55846);function M(){const e=(0,o().IS)((()=>({description:{maxWidth:218}})),[]);return(0,y.jsx)(j().g,{imageSrc:v().A.images.templates.darkBubblePng,title:(0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.emptyState.header",defaultMessage:"No products"}),description:(0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.emptyState.subheader",defaultMessage:"Products purchased from the Template gallery will appear here"}),customStyles:e})}a(944114),a(581454);var R=()=>a(292119),C=()=>a(869190),k=()=>a(340498);const w=(0,k().xh)("ellipsis",{default:{loader:()=>a.e(37217).then(a.bind(a,537217))},small:{loader:()=>a.e(19131).then(a.bind(a,419131))},mini:{loader:()=>a.e(30189).then(a.bind(a,630189))},large:{loader:()=>a.e(8675).then(a.bind(a,808675))}});var A=()=>a(704152),P=()=>a(554509),_=()=>a(2143),I=()=>a(453697),N=()=>a(317182),S=()=>a(756279),B=()=>a(84178),D=()=>a(60200),T=()=>a(244641),q=()=>a(24184);const L=(0,k().xh)("arrowDownPage",{default:{loader:()=>a.e(85416).then(a.bind(a,785416))},small:{loader:()=>a.e(88350).then(a.bind(a,88350))},mini:{loader:()=>a.e(72934).then(a.bind(a,572934))},large:{loader:()=>a.e(76630).then(a.bind(a,876630))}});var U=()=>a(556927),E=()=>a(160817),W=()=>a(284622),G=()=>a(985595),K=()=>a(161908),z=()=>a(365970),O=()=>a(901389),Q=()=>a(755636),$=()=>a(760217),Y=()=>a(406699),H=()=>a(331542),F=()=>a(928600),X=()=>a(939740),V=()=>a(89924),Z=()=>a(859428),J=()=>a(722872),ee=()=>a(477293),te=()=>a(963589),ae=()=>a(630116),ne=()=>a(71268);function re(e){const t=e.id,a=e.refund_id;return(0,i().K8)((()=>{const e=p().A.getState().acquisitionRefundMap;return(null==e?void 0:e[t])||a}),[t,a])}var ie=()=>a(6501),oe=()=>a(686670),le=()=>a(130102),se=()=>a(518906),de=()=>a(917279);function ue(e){let{acquisition:t,...a}=e;return(0,y.jsx)(de().h,{acquisition:t,as:e=>(0,y.jsx)(ce,{...e,menuListItemProps:a}),source:"buyerProfile"})}function ce(e){let{children:t,disabled:a,onClick:n,menuListItemProps:r}=e;return(0,y.jsx)($().A,{...r,icon:(0,y.jsx)(g().Q,{iconGroup:le().u,variantName:"default",colorName:a?"tertiary":"primary"}),title:(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:a?"tertiary":"primary",children:a?(0,y.jsx)(l().sA,{id:"marketplace.buyerProfile.reviews.actions.leaveReview.disabled",defaultMessage:"Review submitted"}):t}),onClick:n,disabled:a})}function me(e){const t=(0,r().v3)(),a=pe(),n=(0,l().tz)(),i=t.device.isMobile;return(0,y.jsx)(Y().Ay,{alignmentToOrigin:Y().yP.End,popupType:i?Y().z7.SlideUp:Y().z7.Popup,renderOrigin:r=>(0,y.jsx)(A().A,{...r,style:a.ellipsisButton,ariaLabel:n.formatMessage({id:"inApp.marketplace.buyerProfile.listing.actionButton",defaultMessage:"action menu popup button"}),onClick:()=>{r.onClick(),(0,s().u)({environment:t,event:{eventName:"buyer_profile_dropdown_click",eventProperties:{product_id:e.template.id,product_type:"template"}}}),u().default.logEvent("buyer_profile_dropdown_click")},children:(0,y.jsx)(g().Q,{...r,iconGroup:w,variantName:"default",colorName:"secondary"})}),render:()=>(0,y.jsx)(fe,{...e})})}function pe(){return(0,o().IS)((e=>({menuList:{minWidth:265},mailIcon:{width:20,height:20,fill:e.icon.primary},ellipsisButton:{borderRadius:4},viewTemplateMenuItemButton:{marginRight:8},viewTemplateMenuItemContainer:{display:"flex",alignItems:"center",justifyContent:"space-between"}})),[])}function fe(e){var t;const a=(0,r().v3)(),o=pe(),[d,u]=(0,n.useState)(!1),{template:p,acquisition:f}=e,{creator:h,slug:x}=p,b="on"===(0,ee().r)("marketplace_refund_improvements"),v=Boolean(null==h||null===(t=h.attributes)||void 0===t?void 0:t.contactEmail),j=re(f),{isRefundButtonDisabled:M,refundButtonLabel:R,renderCancelButton:C,renderRefundButton:k}=function(e){var t;const{environment:a,acquisition:n,refundId:r}=e,o=(0,i().K8)((()=>{var e;const t=n.total_price;return!(!t||0===t||"string"==typeof t&&0===parseInt(t,10))&&(n.acquirer_id===(null===(e=a.currentUser)||void 0===e?void 0:e.id)&&"refunded"!==n.status)}),[n,null===(t=a.currentUser)||void 0===t?void 0:t.id]),{isRefundButtonDisabled:s,refundButtonLabel:d,renderCancelButton:u}=(0,i().K8)((()=>{if(!o)return{isRefundButtonDisabled:!0,refundButtonLabel:void 0,renderCancelButton:!1};try{const e=n.acquired_time;if(T().c9.now().diff(T().c9.fromMillis("string"==typeof e?parseInt(e):e),"days").days>14)return{isRefundButtonDisabled:!0,refundButtonLabel:(0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.listing.actionButtonItem.refund.disabled",defaultMessage:"Refunds are only available for purchases made within the last 14 days."},"tooltip-label"),renderCancelButton:!1}}catch(e){return{isRefundButtonDisabled:!1,refundButtonLabel:void 0,renderCancelButton:!1}}if(r){const e=new(ae().H0)(a,{table:z().en,id:r}).getStatus();if((0,K().XD)(e))return{isRefundButtonDisabled:!0,refundButtonLabel:(0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.listing.actionButtonItem.refund.activeRequestDisabled",defaultMessage:"There is an active refund request."},"tooltip-label"),renderCancelButton:!0}}return{isRefundButtonDisabled:!1,refundButtonLabel:void 0,renderCancelButton:!1}}),[o,n,a,r]);return{renderRefundButton:o,isRefundButtonDisabled:s,refundButtonLabel:d,renderCancelButton:u}}({environment:a,acquisition:f,refundId:j}),{shouldRenderDownloadInvoiceButton:w}=function(e){var t;const{environment:a,acquisition:n}=e,r=(0,te().X)("marketplace_buyer_profile_download_invoice"),o=(0,i().K8)((()=>{var e;const t=n.total_price;return!(!t||0===t||"string"==typeof t&&0===parseInt(t,10))&&(n.acquirer_id===(null===(e=a.currentUser)||void 0===e?void 0:e.id)&&(("succeeded"===n.status||"refunded"===n.status)&&r))}),[n,null===(t=a.currentUser)||void 0===t?void 0:t.id,r]);return{shouldRenderDownloadInvoiceButton:o}}({environment:a,acquisition:f}),A=(0,m().I)(),{showReviewButton:_,acquisition:I}=function(e){var t,a;const[n]=(0,se().S)({productId:e}),r=null===(t=n.value)||void 0===t?void 0:t.acquisition,i=Boolean(null===(a=n.value)||void 0===a?void 0:a.isEligibleToReview);return r?{showReviewButton:i,acquisition:r}:{showReviewButton:!1}}(p.id),N=[],S=[];if(_&&S.push({key:"leaveReview",action:()=>{},render:e=>(0,y.jsx)(ue,{acquisition:I,...e})}),v){const e={key:"contactCreator",action:()=>{},render:e=>(0,y.jsx)($().A,{...e,icon:(0,y.jsx)("span",{children:(0,G().n)(o.mailIcon)}),title:(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.listing.actionButtonItem.contactCreator",defaultMessage:"Contact creator"})}),onClick:()=>{var e;(0,s().u)({environment:a,event:{eventName:"buyer_profile_menu_item_click",eventProperties:{menu_item:"contactCreator"}}}),null!=h&&null!==(e=h.attributes)&&void 0!==e&&e.contactEmail&&Q().f({environment:a,url:`mailto:${null==h?void 0:h.attributes.contactEmail}`})}})};S.push(e)}if(w){const e={key:"downloadInvoice",action:()=>{},render:e=>(0,y.jsx)($().A,{...e,icon:d?(0,y.jsx)(H().A,{style:{width:20,height:20}}):(0,y.jsx)(g().Q,{iconGroup:L,variantName:"default"}),disabledFeedback:!0,title:(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.listing.actionButtonItem.downloadInvoice",defaultMessage:"Download invoice"})}),disabled:d,onClick:async()=>{u(!0),(0,s().u)({environment:a,event:{eventName:"buyer_profile_menu_item_click",eventProperties:{menu_item:"downloadInvoice"}}});const e=await c().su({environment:a,acquisitionId:f.id});e?window.open(e,"_blank"):O().f1((0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.listing.actionButtonItem.downloadInvoice.error",defaultMessage:"Unable to download invoice. Please try again at another time."})),u(!1)}})};S.push(e)}if(b&&"refunded"!==f.status){const e=async e=>{let{templateBlockStore:t,...a}=e;t&&await(0,ne().uy)({...a,templateBlockStore:t,from:"notion_template_gallery"})},t={key:"addAgain",action:()=>{},render:t=>(0,y.jsx)(oe()._,{template:p,renderButton:e=>(0,y.jsx)($().A,{...t,...e,onClick:n=>{var r;(0,s().u)({environment:a,event:{eventName:"buyer_profile_menu_item_click",eventProperties:{menu_item:"addAgain"}}}),null===(r=e.onClick)||void 0===r||r.call(e,n),t.onClick(n)},icon:(0,y.jsx)(g().Q,{iconGroup:E().h,variantName:"default"}),title:(0,y.jsx)(l().sA,{id:"marketplace.buyerProfile.addAgain",defaultMessage:"Add again"})}),onTeamAccept:e,onPrivateAccept:e})};S.push(t)}if(k){const t={key:"refundAction",action:()=>{},render:t=>R?(0,y.jsx)(Z().A,{renderTooltip:()=>R,render:n=>(0,y.jsx)($().A,{...t,...n,icon:(0,y.jsx)(g().Q,{iconGroup:q().e,variantName:"default"}),disabledFeedback:!0,title:(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.listing.actionButtonItem.refund",defaultMessage:"Request a refund"})}),disabled:M,onClick:()=>{var t;(0,s().u)({environment:a,event:{eventName:"buyer_profile_menu_item_click",eventProperties:{menu_item:"refundAction"}}}),ie().A.openModal({stage:"initial",acquisitionId:f.id,productName:null===(t=f.product)||void 0===t?void 0:t.name,creator:e.template.creator})}})}):(0,y.jsx)($().A,{...t,icon:(0,y.jsx)(g().Q,{iconGroup:q().e,variantName:"default"}),title:(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.listing.actionButtonItem.refund",defaultMessage:"Request a refund"})}),disabled:M,disabledFeedback:!0,onClick:()=>{var t;(0,s().u)({environment:a,event:{eventName:"buyer_profile_menu_item_click",eventProperties:{menu_item:"refundAction"}}}),ie().A.openModal({stage:"initial",acquisitionId:f.id,productName:null===(t=f.product)||void 0===t?void 0:t.name,creator:e.template.creator})}})};S.push(t)}if(C&&j){const e={key:"cancelRefundAction",action:()=>{},render:e=>(0,y.jsx)($().A,{...e,icon:(0,y.jsx)(g().Q,{iconGroup:W().G,variantName:"default"}),title:(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.listing.actionButtonItem.cancelRefund",defaultMessage:"Cancel refund"})}),onClick:()=>{(0,s().u)({environment:a,event:{eventName:"buyer_profile_menu_item_click",eventProperties:{menu_item:"cancelRefundAction"}}}),ie().A.openModal({stage:"cancel",refundId:j,acquisitionId:f.id})}})};S.push(e)}if(0!==S.length){const e={key:"userAction",render:e=>(0,y.jsx)(V().A,{...e}),items:S};N.push(e)}const B={key:"viewTemplate",render:e=>(0,y.jsx)(V().A,{...e,topBorder:0!==S.length}),items:[{key:"viewTemplate",action:()=>{},render:e=>(0,y.jsx)($().A,{...e,onClick:()=>{(0,s().u)({environment:a,event:{eventName:"buyer_profile_menu_item_click",eventProperties:{menu_item:"viewTemplate"}}}),c().SU({environment:a}),ne().Lv({environment:a,slug:x,openInNewTab:!0,makeTabActive:!0,route:A,creator:h})},buttonStyle:o.viewTemplateMenuItemButton,title:(0,y.jsxs)("div",{style:o.viewTemplateMenuItemContainer,children:[(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.listing.actionButtonItem.viewTemplate",defaultMessage:"View template in gallery"})}),(0,y.jsx)(g().Q,{iconGroup:U().j,variantName:"small",colorName:"secondary"})]})})}]};return N.push(B),(0,y.jsx)(F().A,{menuType:J().gu.Popup,children:(0,y.jsx)(X().Ay,{type:X().Oh.Vertical,initialFocus:void 0,sections:N,style:o.menuList})})}const ge=(0,k().xh)("arrowLeft",{default:{loader:()=>a.e(49102).then(a.bind(a,449102))},small:{loader:()=>a.e(13788).then(a.bind(a,613788))},mini:{loader:()=>a.e(8592).then(a.bind(a,508592))},large:{loader:()=>a.e(95600).then(a.bind(a,95600))}});var ye=()=>a(38488);function he(e){const{onPreviousClick:t,onNextClick:a,currentPage:n,numPages:r,hasPagination:i}=e,s=1===n,d=n===r,u=function(e){const{hasPagination:t}=e;return(0,o().IS)((()=>({container:{width:"100%",display:"flex",alignItems:"center",gap:8,visibility:t?"visible":"hidden"},button:{display:"flex",height:20,width:20,justifyContent:"center",alignItems:"center",borderRadius:4},paginatedText:{display:"flex",alignItems:"center",gap:4}})),[t])}({hasPagination:i}),c=(0,l().tz)();return(0,y.jsxs)("div",{style:u.container,children:[(0,y.jsx)(A().A,{onClick:t,disabled:s,style:u.button,ariaLabel:c.formatMessage({id:"inApp.marketplace.buyerProfile.pagination.previousButton",defaultMessage:"previous page button"}),children:(0,y.jsx)(g().Q,{iconGroup:ge,variantName:"large",colorName:s?"tertiary":"primary"})}),(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",customStyles:u.paginatedText,children:(0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.pagination.pageLabel",defaultMessage:"<bold>{currentPage}</bold> of {numPages}",values:{bold:e=>(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:e}),currentPage:n,numPages:r}})}),(0,y.jsx)(A().A,{onClick:a,disabled:d,style:u.button,ariaLabel:c.formatMessage({id:"inApp.marketplace.buyerProfile.pagination.nextButton",defaultMessage:"next page button"}),children:(0,y.jsx)(g().Q,{iconGroup:ye().M,variantName:"default",colorName:d?"tertiary":"primary"})})]})}var xe=()=>a(885938);const be=(0,k().xh)("arrowUp",{default:{loader:()=>a.e(96642).then(a.bind(a,596642))},small:{loader:()=>a.e(33112).then(a.bind(a,233112))},mini:{loader:()=>a.e(89708).then(a.bind(a,689708))},large:{loader:()=>a.e(19980).then(a.bind(a,319980))}});function ve(e){const t=(0,o().IS)((()=>({headerButton:{width:"fit-content",height:24,display:"flex",alignItems:"center",borderRadius:4,gap:2,padding:"0px 6px"}})),[]),{label:a,columnKey:n,onClick:r,orderByConfig:i,disabled:l}=e,{key:s,orderBy:d}=i;return(0,y.jsxs)(A().A,{style:t.headerButton,disabled:l,onClick:r,children:[(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:a}),s===n&&(0,y.jsx)(y.Fragment,{children:"desc"===d?(0,y.jsx)(g().Q,{iconGroup:xe().E,variantName:"small",colorName:"secondary"}):(0,y.jsx)(g().Q,{iconGroup:be,variantName:"small",colorName:"secondary"})})]})}var je=()=>a(798880);function Me(e){const t=(0,r().v3)(),{userId:a,disabled:n}=e,l=(0,o().IS)((()=>({addedByCell:{display:"flex",alignItems:"center",gap:4},disabled:{opacity:.5}})),[]),s=(0,i().K8)((()=>{const e=new(ae().LU)(t,{table:je().oo,id:a});return e.isDefined()&&e.isReady()?{email:e.getEmail(),profilePhoto:e.getProfilePhoto()??"",name:e.getName()}:null}),[a,t]);return s?(0,y.jsxs)("div",{style:{...l.addedByCell,...n?l.disabled:{}},children:[(0,y.jsx)(I().A,{size:20,avatar:{email:s.email,avatarUrl:s.profilePhoto,name:s.name}}),(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:s.name})]}):null}var Re=()=>a(534177);var Ce=()=>a(897119),ke=()=>a(554283),we=()=>a(962730),Ae=()=>a(377586),Pe=()=>a(852100),_e=()=>a(62160),Ie=()=>a(234187),Ne=()=>a(871315);function Se(e){const{acquisitionStatus:t,refundData:a}=e,n=(0,o().IS)((e=>({requestedContainer:{...Be,backgroundColor:e.fill.yellowSecondary},cancelledContainer:{...Be,backgroundColor:e.fill.redPrimary},deniedContainer:{...Be,backgroundColor:e.fill.grayPrimary},refundedContainer:{...Be,backgroundColor:e.fill.blueSecondary}})),[]);if("refunded"===t||a&&"successful"===a.status)return(0,y.jsx)(Z().A,{placement:we().W.Bottom,render:e=>(0,y.jsx)("div",{...e,children:(0,y.jsx)(Ne().L,{overrideStyles:n.refundedContainer,children:(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,y.jsx)(l().sA,{id:"marketplace.buyerProfile.templatePreview.refundedStatus",defaultMessage:"Refunded"})})})}),renderTooltip:()=>(0,y.jsxs)("div",{children:[(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"contrastPrimary",children:(0,y.jsx)(l().sA,{id:"marketplace.buyerProfile.templatePreview.refundApprovedTooltip",defaultMessage:"Your return was approved and processed, the template has been deleted from your workspace."})}),(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"contrastSecondary",children:(0,y.jsx)(l().sA,{id:"marketplace.buyerProfile.templatePreview.refundProcessingTimeTooltip",defaultMessage:" It might take up to 10 days for the funds to appear on your account"})})]})});if((0,K().XD)(null==a?void 0:a.status))return(0,y.jsx)(Z().A,{placement:we().W.Bottom,render:e=>(0,y.jsx)("div",{...e,children:(0,y.jsx)(Ne().L,{overrideStyles:n.requestedContainer,children:(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,y.jsx)(l().sA,{id:"marketplace.buyerProfile.templatePreview.refundRequestedStatus",defaultMessage:"Refund requested"})})})}),renderTooltip:()=>(0,y.jsx)("div",{children:(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"contrastPrimary",children:(0,y.jsx)(l().sA,{id:"marketplace.buyerProfile.templatePreview.refundRequestDateTooltip",defaultMessage:"Refund requested on {date}",values:{date:T().c9.fromMillis((null==a?void 0:a.created_time)??0).toLocaleString(T().c9.DATE_MED)}})})})});return T().c9.now().diff(T().c9.fromMillis((null==a?void 0:a.created_time)??0),"days").days>10?null:"denied"===(null==a?void 0:a.status)?(0,y.jsx)(Z().A,{placement:we().W.Bottom,render:e=>(0,y.jsx)("div",{...e,children:(0,y.jsx)(Ne().L,{overrideStyles:n.deniedContainer,children:(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,y.jsx)(l().sA,{id:"marketplace.buyerProfile.templatePreview.refundDeniedStatus",defaultMessage:"Refund denied"})})})}),renderTooltip:()=>(0,y.jsx)("div",{children:(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"contrastPrimary",children:(0,y.jsx)(l().sA,{id:"marketplace.buyerProfile.templatePreview.refundDeniedTooltip",defaultMessage:"Please check your email to learn more about the status of your refund"})})})}):"cancelled"===(null==a?void 0:a.status)?(0,y.jsx)(Z().A,{placement:we().W.Bottom,render:e=>(0,y.jsx)("div",{...e,children:(0,y.jsx)(Ne().L,{overrideStyles:n.cancelledContainer,children:(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,y.jsx)(l().sA,{id:"marketplace.buyerProfile.templatePreview.refundCancelledStatus",defaultMessage:"Refund cancelled"})})})}),renderTooltip:()=>(0,y.jsx)("div",{children:(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"contrastPrimary",children:(0,y.jsx)(l().sA,{id:"marketplace.buyerProfile.templatePreview.refundCancelledTooltip",defaultMessage:"Please check your email to learn more about the status of your refund"})})})}):null}const Be={padding:"2px 8px",borderRadius:12,cursor:"default"};function De(e){const{template:t,templateListing:a}=e,n=(0,r().v3)(),l=(0,o().IS)((()=>({popoverContainer:{minWidth:256,padding:8,borderRadius:8},title:{paddingTop:8,paddingBottom:0},popoverButton:{width:"fit-content",height:24,display:"flex",alignItems:"center",borderRadius:4,gap:2,padding:"0px 6px"},container:{display:"flex",gap:4}})),[]),[d,p]=(0,ke().B)(),f=a.status,g=re(a),h=(0,i().K8)((()=>{if(!g)return null;const e=new(ae().H0)(n,{id:g,table:z().en});return{status:e.getStatus(),created_time:e.getCreatedTime()}}),[n,g]),x=(0,m().I)();return(0,y.jsxs)("div",{style:l.container,children:[(0,y.jsx)(Ce().Ay,{open:p,popupType:Ae().n.Popup,disableMouseCapture:!0,disableContentScroll:!0,origin:(0,y.jsx)(A().A,{style:l.popoverButton,ref:d,href:(0,Pe().sO)(t.slug,x,t.creator),onClick:e=>{(0,s().u)({environment:n,event:{eventName:"buyer_profile_product_click",eventProperties:{product_id:t.id,product_type:"template"}}}),u().default.logEvent("buyer_profile_product_click"),e.ctrlKey||e.metaKey||c().SU({environment:n})},children:(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:t.name})}),originGap:6,alignmentToOrigin:we().C.Start,placementToOrigin:we().W.Bottom,render:()=>(0,y.jsx)(_e().Yn,{isDisabled:!0,template:t,imageBorderRadius:6,titleStyles:l.title,customTitle:(0,y.jsx)(Te,{template:t})}),style:l.popoverContainer}),h||"refunded"===f?(0,y.jsx)(Se,{refundData:h,acquisitionStatus:f}):null]})}function Te(e){const{template:t}=e,a=(0,o().IS)((()=>({templateTitleContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginRight:-10,marginLeft:-10},templateTitleMetadata:{display:"flex",alignItems:"center",gap:"6px"}})),[]),n=(0,B().kx)(t.creator);return(0,y.jsxs)("div",{style:a.templateTitleContainer,children:[(0,y.jsxs)("div",{style:a.templateTitleMetadata,children:[(0,y.jsx)(I().A,{size:20,avatar:n}),(0,y.jsx)(_e().Dn,{template:t})]}),(0,y.jsx)(Ie().z,{price:t.price??0})]})}var qe=()=>a(496603);const Le="―";function Ue(e){const{listings:t,isLoading:a,count:d}=e,p=(0,r().v3)(),f=(0,l().tz)(),h=(0,m().I)(),[x,v]=(0,n.useState)({orderBy:"desc",key:"transactionDate"}),j=(0,n.useCallback)((e=>{v((t=>t.key===e?{...t,orderBy:"asc"===t.orderBy?"desc":"asc"}:{key:e,orderBy:"desc"}))}),[]),{hasMoreThanOneSpaceMember:M}=function(){const{currentSpaceStore:e}=(0,i().K8)((()=>b().default.state),[]),t=(0,i().K8)((()=>null==e?void 0:e.getMemberCountFromPublicSpaceData()),[e]);return{hasMoreThanOneSpaceMember:qe().Et(t)&&t>1}}(),k=function(e){const{hasListings:t,isLoading:a}=e;return(0,o().IS)((e=>({tableContainer:{width:"100%",height:t||a?"100%":void 0,display:"flex",flexDirection:"column",position:"relative",gap:16},row:{height:58},headerRow:{borderBottom:`4px solid ${e.regularDividerColor}`},columnButton:{width:"fit-content",height:24,display:"flex",alignItems:"center",borderRadius:4,gap:2,padding:"0px 6px"},createdByButton:{width:"fit-content",height:34,display:"flex",alignItems:"center",borderRadius:4,gap:2,padding:"0px 6px 0px 4px"},textCell:{padding:"0px 6px"},createdByCell:{display:"flex",alignItems:"center",gap:7},scroller:{overflow:"unset",minHeight:t||a?570:void 0},disabled:{opacity:.5}})),[t,a])}({hasListings:!a&&0!==t.length,isLoading:a}),T=(0,n.useMemo)((()=>function(e){const{onClick:t,orderByConfig:a,hasMoreThanOneSpaceMember:n}=e,r=[{key:"product",header:(0,y.jsx)(ve,{label:(0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.table.column.product",defaultMessage:"Product"}),onClick:()=>t("product"),orderByConfig:a,columnKey:"product"}),style:{width:"47%",minWidth:n?390:520}},{key:"createdBy",header:(0,y.jsx)(ve,{label:(0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.table.column.createdBy",defaultMessage:"Created by"}),onClick:()=>t("createdBy"),orderByConfig:a,columnKey:"createdBy"}),style:{width:"20%",minWidth:200}},{key:"price",header:(0,y.jsx)(ve,{label:(0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.table.column.price",defaultMessage:"Price"}),onClick:()=>t("price"),orderByConfig:a,columnKey:"price"}),style:{width:"9%",minWidth:120,maxWidth:"9%"}}];n&&r.push({key:"addedBy",header:(0,y.jsx)(ve,{label:(0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.table.column.addedBy",defaultMessage:"Added by"}),disabled:!0,orderByConfig:a,columnKey:"addedBy"}),style:{width:"11%",minWidth:120,maxWidth:"11%"}});return r.push({key:"transactionDate",header:(0,y.jsx)(ve,{label:(0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.table.column.transactionDate",defaultMessage:"Transaction date"}),onClick:()=>t("transactionDate"),orderByConfig:a,columnKey:"transactionDate"}),style:{width:"11%",minWidth:140,maxWidth:"11%"}},{key:"threeDot",header:null,style:{width:"2%",maxWidth:"2%"}}),r}({hasMoreThanOneSpaceMember:M,orderByConfig:x,onClick:j})),[M,x,j]),q=(0,n.useMemo)((()=>function(e){const{hasMoreThanOneSpaceMember:t}=e;return[...Array(c().bt)].map(((e,a)=>{const n=[(0,y.jsx)(D().R,{width:224,height:14},`loadingProduct-${a}-1`),(0,y.jsx)(D().R,{width:119,height:14},`loadingCreatedBy-${a}-2`),(0,y.jsx)(D().R,{width:52,height:14},`loadingPrice-${a}-3`)];return t&&n.push((0,y.jsx)(D().R,{width:87,height:14},`loadingAddedBy-${a}-4`)),n.push((0,y.jsx)(D().R,{width:87,height:14},`loadingTransactionDate-${a}-5`),(0,y.jsx)(g().Q,{iconGroup:w,variantName:"default",colorName:"secondary"},`loadingAction-${a}-6`)),{key:`loadingProductRow-${a}`,columns:n}}))}({hasMoreThanOneSpaceMember:M})),[M]),L=(0,n.useMemo)((()=>function(e,t){const{key:a,orderBy:n}=t;switch(a){case"product":return e.sort(((e,t)=>e.product&&t.product?"asc"===n?e.product.name.localeCompare(t.product.name):t.product.name.localeCompare(e.product.name):t.created_time-e.created_time));case"createdBy":return e.sort(((e,t)=>e.product&&t.product&&e.product.creator&&t.product.creator?"asc"===n?e.product.creator.name.localeCompare(t.product.creator.name):t.product.creator.name.localeCompare(e.product.creator.name):t.created_time-e.created_time));case"price":return e.sort(((e,t)=>{const a=e.total_price??0,r=t.total_price??0;return"asc"===n?a-r||e.product_price-t.product_price:r-a||t.product_price-e.product_price}));case"transactionDate":return e.sort(((e,t)=>"asc"===n?e.created_time-t.created_time:t.created_time-e.created_time));case"addedBy":return e;default:(0,Re().HB)(a)}}(t,x)),[t,x]),{itemsToDisplay:U,hasPagination:E,handlePreviousClick:W,handleNextClick:G,page:K,numPages:z}=function(e){const{items:t,count:a,numItemsPerPage:r}=e,[i,o]=(0,n.useState)(1),l=a<=r?0:Math.ceil(a/r),s=l>0,d=t.slice((i-1)*r,i*r),u=(0,n.useCallback)((()=>{1!==i&&o((e=>e-1))}),[i]),c=(0,n.useCallback)((()=>{i!==l&&o((e=>e+1))}),[i,l]);return{page:i,numPages:l,itemsToDisplay:d,hasPagination:s,handlePreviousClick:u,handleNextClick:c}}({items:L,count:d,numItemsPerPage:c().bt}),O=(0,n.useMemo)((()=>{const e=[];for(const[n,r]of U.entries()){const i=r.product,o=[];if(i){var t,a;const e=(0,B().kx)(i.creator);o.push((0,y.jsx)(De,{template:i,templateListing:r},`template-row${n}-column1-name`),(0,y.jsxs)(A().A,{style:{...k.createdByButton,...k.createdByCell},href:(0,B().rE)((null===(t=i.creator)||void 0===t?void 0:t.username)??"",h),onClick:e=>{var t;(0,s().u)({environment:p,event:{eventName:"buyer_profile_creator_click",eventProperties:{product_id:r.product_id,product_type:r.product_table,creator_name:(null===(t=i.creator)||void 0===t?void 0:t.name)??""}}}),u().default.logEvent("buyer_profile_creator_click"),e.ctrlKey||e.metaKey||c().SU({environment:p})},children:[(0,y.jsx)(I().A,{size:20,avatar:e}),(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:null===(a=i.creator)||void 0===a?void 0:a.name})]},`template-row${n}-column2-createdBy`),(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",customStyles:{...k.textCell,...i?{}:k.disabled},children:0===r.product_price?(0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.templateListing.productPrice.free",defaultMessage:"Free"}):(0,y.jsx)(R().v,{cost:{amount:null!==r.total_price&&void 0!==r.total_price?r.total_price:r.product_price,currencyCode:"USD"},intl:f,trailingZeroDisplay:"auto"})},`template-row${n}-column3-price`))}else o.push((0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",style:{...k.textCell,...k.disabled},children:(0,y.jsx)(l().sA,{id:"inApp.marketplace.buyerProfile.table.column.deletedTemplate",defaultMessage:"Deleted template"})},`template-row${n}-column1-deletedTemplate`),(0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",style:{...k.createdByButton,...k.createdByCell,...k.disabled},children:Le},`template-row${n}-column2-deletedTemplate`));M&&o.push((0,y.jsx)(Me,{userId:r.acquirer_id,disabled:!i},`template-row${n}-column4-addedBy`)),o.push((0,y.jsx)(P().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",customStyles:{...k.textCell,...i?{}:k.disabled},children:(0,C().W_)(Number(r.acquired_time),"medium",f.locale)},`template-row${n}-column5-transactionDate`)),i&&o.push((0,y.jsx)(me,{template:i,acquisition:r},`template-row${n}-column6-actionMenu`)),e.push({key:`templateProductRow-${n}`,columns:o})}return e}),[f,U,k,M,p,h]);return(0,y.jsxs)("div",{style:k.tableContainer,children:[(0,y.jsx)(_().H,{type:S().A.X,style:k.scroller,children:(0,y.jsx)(N().A,{columns:T,rows:a?q:O,rowStyle:k.row,hideTopBorderForHeader:!0})}),(0,y.jsx)(he,{currentPage:K,numPages:z,onPreviousClick:W,onNextClick:G,hasPagination:E&&!a})]})}function Ee(){var e,t;const a=(0,o().IS)((()=>({listingsContainer:{width:"100%",height:"inherit",display:"flex",flexDirection:"column",position:"relative",gap:8},emptyStateContainer:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}})),[]),n=(0,r().v3)(),{currentSpaceStore:l}=(0,i().K8)((()=>b().default.state),[]),[s]=(0,x().Yb)((async()=>{if(!l)return c().eO;return await c().zC({environment:n,spaceId:l.id,includeProduct:!0,includeCount:!0,includeRefunds:!0,productTable:"template"})}),[n,l]),d="pending"!==s.status&&"idle"!==s.status,u=(null===(e=s.value)||void 0===e?void 0:e.listings)??[],m=(null===(t=s.value)||void 0===t?void 0:t.count)??0;return(0,y.jsxs)("div",{style:a.listingsContainer,children:[(0,y.jsx)(Ue,{listings:u,count:m,isLoading:!d}),d&&0===u.length&&(0,y.jsx)("div",{style:a.emptyStateContainer,children:(0,y.jsx)(M,{})})]})}function We(){const e=(0,l().tz)(),t=(0,m().I)(),a=(0,r().v3)(),o=(0,i().K8)((()=>p().A.state.isModalOpen),[]),f=(0,i().K8)((()=>p().A.state.openedTimestamp),[]);return(0,n.useEffect)((()=>((0,s().u)({environment:a,event:{eventName:"buyer_profile_visit",eventProperties:{page_visited_from:t.pageType??"home"}}}),u().default.logEvent("buyer_profile_visit"),()=>{void 0!==f&&((0,s().u)({environment:a,event:{eventName:"buyer_profile_close",eventProperties:{page_closed_from:t.pageType??"home",opened_timestamp:f}}}),u().default.logEvent("buyer_profile_close"))})),[a,f,t.pageType]),(0,y.jsx)(d().s,{ariaLabel:e.formatMessage({id:"inApp.marketplace.buyerProfile.dialogLabel",defaultMessage:"Buyer profile"}),isOpen:o,onDismiss:()=>{c().SU({environment:a})},showCloseIcon:!0,areaConstraint:{width:{type:"min",length:1150},height:{type:"max",length:720}},render:()=>(0,y.jsx)(Ge,{})})}function Ge(){const e=(0,o().IS)((()=>({modalContainer:{height:720,display:"flex",padding:"28px 32px 32px 32px",flexDirection:"column",gap:20,borderRadius:12,position:"relative",overflowY:"auto"}})),[]);return(0,y.jsxs)("div",{style:e.modalContainer,children:[(0,y.jsx)(h,{}),(0,y.jsx)(Ee,{})]})}const Ke=(0,k().xh)("exclamationMarkCircleArrow",{default:{loader:()=>a.e(61967).then(a.bind(a,561967))},small:{loader:()=>a.e(36193).then(a.bind(a,236193))},mini:{loader:()=>a.e(47311).then(a.bind(a,247311))},micro:{loader:()=>a.e(70728).then(a.bind(a,70728))},large:{loader:()=>a.e(53237).then(a.bind(a,753237))},max:{loader:()=>a.e(53237).then(a.bind(a,753237))}});var ze=()=>a(449506);var Oe=()=>a(619418);function Qe(){const e=(0,r().v3)(),t=(0,i().O$)(ie().A);return a=>{var n;(0,s().u)({environment:e,event:{eventName:"buyer_profile_refund_action",eventProperties:{action:a,stage:t.stage,acquisition_id:t.acquisitionId,refund_id:t.refundId,product_name:t.productName,creator_id:null===(n=t.creator)||void 0===n?void 0:n.id}}})}}function $e(){const e=(0,l().tz)(),t=(0,r().v3)(),a=Qe(),[i,o]=(0,n.useState)(!1);return(0,y.jsx)(Oe().Y,{width:360,icon:(0,y.jsx)(g().Q,{colorName:"secondary",variantName:"large",overrideSize:()=>36,iconGroup:Ke}),title:e.formatMessage(Ye.title),subTitle:e.formatMessage(Ye.subtitle),actions:[{type:"outline",text:e.formatMessage(Ye.submit),onClick:async()=>{const{refundId:e}=ie().A.state;if(!e)return;const n=await async function(e){const{environment:t,refundId:a}=e,n=await ze().callApi({eventName:"updateMarketplaceRefund",environment:t,data:{refundId:a,status:"cancelled"},headers:{}}),r=n.type;return"success"===r||"failed"===r?n:void(0,Re().HB)(r)}({environment:t,refundId:e});"success"===n.type?(a("cancel_refund"),ie().A.closeModal()):o(!0)},error:i?e.formatMessage(Ye.error):null},{type:"plain",text:e.formatMessage(Ye.cancel),onClick:()=>ie().A.closeModal()}]})}const Ye=(0,l().YK)({title:{id:"buyerProfile.refundModal.cancel.title",defaultMessage:"Cancel refund?"},subtitle:{id:"buyerProfile.refundModal.cancel.subtitle",defaultMessage:"We will notify the creator that you’ve changed your mind. Your template will be kept as is."},cancel:{id:"buyerProfile.refundModal.cancel",defaultMessage:"Cancel"},submit:{id:"buyerProfile.refundModal.cancel.submit",defaultMessage:"Yes, cancel my refund"},error:{id:"buyerProfile.refundModal.cancel.error",defaultMessage:"There was an issue cancelling your refund."}});var He=()=>a(246760),Fe=()=>a(329452);function Xe(){var e;const t=(0,r().v3)(),a=(0,o().IS)((e=>({creatorContainer:{width:"100%",display:"flex",alignItems:"center",gap:8,border:`1px solid ${e.outlineButtonBorder}`,borderRadius:6,padding:12},creatorNameContainer:{flex:"1 0 auto"},chatIconContainer:{width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center"}})),[]),[s,d]=(0,n.useState)(!1),[u,c]=(0,n.useState)(void 0),m=Qe(),{creator:p,handleSubmitRefundRequest:f}=(0,i().K8)((()=>({creator:ie().A.state.creator,handleSubmitRefundRequest:ie().A.state.handleSubmitRefundRequest})),[]),h=(0,B().kx)(p),x=null==p||null===(e=p.attributes)||void 0===e?void 0:e.contactEmail;return x&&f?(0,y.jsx)(Oe().Y,{width:360,icon:(0,y.jsx)(g().Q,{iconGroup:He().G,colorName:"secondary",variantName:"default",overrideSize:e=>36}),title:(0,y.jsx)(l().sA,{id:"marketplace.refund.contactCreatorStage.title",defaultMessage:"Contact creator for help"}),subTitle:(0,y.jsx)(l().sA,{id:"marketplace.refund.contactCreatorStage.subtitle",defaultMessage:"Would you like to get help instead?"}),body:(0,y.jsxs)("div",{style:a.creatorContainer,children:[(0,y.jsx)(I().A,{size:40,avatar:h}),(0,y.jsxs)("div",{style:a.creatorNameContainer,children:[(0,y.jsx)(P().D,{styleName:"Body-14px/Regular",children:p.name}),(0,y.jsx)(P().D,{styleName:"Body-12px/Regular",colorName:"secondary",children:p.username})]}),(0,y.jsx)("div",{style:a.chatIconContainer,children:(0,y.jsx)(g().Q,{iconGroup:Fe().l,variantName:"default"})})]}),actions:[{type:"primary",text:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(l().sA,{id:"marketplace.refund.contactCreatorStage.contact",defaultMessage:"Contact creator"}),(0,y.jsx)(g().Q,{iconGroup:U().j,variantName:"small",colorName:"contrast"})]}),onClick:()=>{m("contact_creator"),Q().f({environment:t,url:`mailto:${x}`})}},{type:"outline",text:(0,y.jsx)(l().sA,{id:"marketplace.refund.contactCreatorStage.continue",defaultMessage:"Continue to refund"}),onClick:async()=>{d(!0);const e=await f();d(!1),e?c(e):m("request_refund")},isLoading:s,error:u},{type:"plain",text:(0,y.jsx)(l().sA,{id:"marketplace.refund.contactCreatorStage.cancel",defaultMessage:"Cancel"}),onClick:()=>{m("close"),ie().A.closeModal()}}]}):null}const Ve=(0,k().xh)("arrowBranch",{default:{loader:()=>a.e(28137).then(a.bind(a,728137))},small:{loader:()=>a.e(99043).then(a.bind(a,999043))},mini:{loader:()=>a.e(74421).then(a.bind(a,374421))},large:{loader:()=>a.e(33931).then(a.bind(a,333931))}});var Ze=()=>a(280335);const Je=(0,k().xh)("squareOnSquareDashed",{default:{loader:()=>a.e(28184).then(a.bind(a,228184))},small:{loader:()=>a.e(93518).then(a.bind(a,93518))},mini:{loader:()=>a.e(62230).then(a.bind(a,562230))},large:{loader:()=>a.e(14246).then(a.bind(a,514246))}});function et(){const e=(0,l().tz)(),t=(0,i().K8)((()=>ie().A.state.productName),[]),a=Qe();return(0,y.jsx)(Oe().Y,{title:(0,y.jsx)(l().sA,{defaultMessage:"If refund is approved, all content related to ‘{productName}’ will be deleted",id:"buyerProfile.refundModal.initial.title",values:{productName:t}}),icon:(0,y.jsx)(g().Q,{iconGroup:Ze().Z,variantName:"default",overrideSize:()=>36,colorName:"uiRedPrimary"}),body:(0,y.jsx)(tt,{}),actions:[{type:"outline",text:e.formatMessage(nt.continueWithRefund),onClick:()=>{a("continue"),ie().A.setStage("refundReason")}},{type:"plain",text:e.formatMessage(nt.cancel),onClick:()=>{a("close"),ie().A.closeModal()}}],width:360})}function tt(){const e=(0,o().IS)((e=>({refundWarningContainer:{padding:"12px",backgroundColor:e.surface.wash,borderRadius:"8px",gap:"12px",display:"flex",flexDirection:"column"}})),[]);return(0,y.jsxs)("section",{style:e.refundWarningContainer,children:[(0,y.jsx)(at,{icon:(0,y.jsx)(g().Q,{iconGroup:Je,variantName:"default",colorName:"uiRedPrimary"}),title:(0,y.jsx)(l().sA,{defaultMessage:"All copies of the template",id:"buyerProfile.refundModal.initial.warning.allCopiesOfTemplate"}),subtitle:(0,y.jsx)(l().sA,{defaultMessage:"including duplicates in other members’ private pages",id:"buyerProfile.refundModal.initial.warning.allCopiesOfTemplate.subtitle"})}),(0,y.jsx)(at,{icon:(0,y.jsx)(g().Q,{iconGroup:Ve,variantName:"default",colorName:"uiRedPrimary"}),title:(0,y.jsx)(l().sA,{defaultMessage:"Any copied sections of the template",id:"buyerProfile.refundModal.initial.warning.copiedSections"}),subtitle:(0,y.jsx)(l().sA,{defaultMessage:"including pages, databases, and buttons",id:"buyerProfile.refundModal.initial.warning.copiedSections.subtitle"})}),(0,y.jsx)(at,{icon:(0,y.jsx)(g().Q,{iconGroup:le().u,variantName:"default",colorName:"uiRedPrimary"}),title:(0,y.jsx)(l().sA,{defaultMessage:"All edits and additions to the template",id:"buyerProfile.refundModal.initial.warning.allEditsAndAdditions"}),subtitle:(0,y.jsx)(l().sA,{defaultMessage:"including any new pages that are nested inside the template",id:"buyerProfile.refundModal.initial.warning.allEditsAndAdditions.subtitle"})})]})}function at(e){const{icon:t,title:a,subtitle:n}=e,r=(0,o().IS)((e=>({refundWarningContainer:{display:"flex",gap:8},refundWarningTextContainer:{display:"flex",flexDirection:"column",gap:4}})),[]);return(0,y.jsxs)("div",{style:r.refundWarningContainer,children:[(0,y.jsx)("div",{children:t}),(0,y.jsxs)("div",{style:r.refundWarningTextContainer,children:[(0,y.jsx)(P().D,{styleName:"Body-14px/Medium",colorName:"uiRedPrimary",children:a}),(0,y.jsx)(P().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:n})]})]})}const nt=(0,l().YK)({continueWithRefund:{id:"buyerProfile.refundModal.initial.continueWithRefund",defaultMessage:"Continue with refund"},cancel:{id:"buyerProfile.refundModal.initial.cancel",defaultMessage:"Cancel"}});a(898992),a(354520);var rt=()=>a(416845),it=()=>a(668725),ot=()=>a(623580),lt=()=>a(864943),st=()=>a(933117),dt=()=>a(195821),ut=()=>a(898486);function ct(){const e=(0,l().tz)(),t=(0,r().v3)(),a="on"===(0,ee().r)("marketplace_refund_improvements"),[i,o]=(0,n.useState)(),[s,d]=(0,n.useState)(void 0),u=Qe(),[c,m]=(0,n.useState)(!1),[f,h]=(0,n.useState)(),[x,b]=(0,n.useState)(),[v,j]=(0,n.useState)(),M=(0,n.useCallback)((()=>{let t=!1;i||(h(e.formatMessage(pt.reasonErrorMessage)),t=!0);try{(0,K().DQ)({customReason:s,reason:i,isRefundImprovementsEnabled:a})}catch(n){(0,rt().V4j)(n)&&(b((0,ut().DX)(e,n.body)),t=!0)}return t}),[s,i,e,a]),R=(0,n.useCallback)((async()=>{const a=await async function(e){const{environment:t,acquisitionId:a,refundReason:n,customReason:r}=e,i=await ze().callApi({eventName:"createMarketplaceRefund",environment:t,data:{acquisitionId:a,reason:n,customReason:r},headers:{}}),o=i.type;if("success"===o){const e=i.data.marketplaceRefundId;return p().A.setAcquisitionRefund(a,e),i}if("failed"===o)return i;(0,Re().HB)(o)}({environment:t,acquisitionId:ie().A.state.acquisitionId,refundReason:i,customReason:s});if("success"===a.type)"creator_intervention"===a.data.refundStatus?ie().A.setStage("creator_intervention"):ie().A.setStage("success");else if("failed"===a.type){var n;const t=null===(n=a.error.data.responseBody)||void 0===n?void 0:n.clientData;return(null==t?void 0:t.type)&&(0,ut().t4)(e,t)||e.formatMessage(pt.defaultErrorMessage)}}),[t,s,i,e]);return(0,y.jsx)(Oe().Y,{width:360,icon:(0,y.jsx)(g().Q,{iconGroup:He().G,colorName:"secondary",variantName:"default",overrideSize:e=>36}),title:e.formatMessage(pt.title),subTitle:e.formatMessage(pt.subtitle),body:(0,y.jsx)(mt,{refundReason:i,setRefundReason:e=>{o(e),j(void 0),h(void 0)},customReason:s,setCustomReason:e=>{d(e),j(void 0),b(void 0)},reasonError:f,customReasonError:x}),actions:[{type:"primary",text:e.formatMessage(pt.continue),isLoading:c,error:v,onClick:async()=>{var e;if(M())return;if(a&&null!==(e=ie().A.state.creator)&&void 0!==e&&null!==(e=e.attributes)&&void 0!==e&&e.contactEmail&&"not_added"!==i)return u("continue"),void ie().A.updateState({stage:"contact_creator",handleSubmitRefundRequest:R});m(!0);const t=await R();m(!1),t?j(t):u("request_refund")}},{type:"plain",text:e.formatMessage(pt.cancel),onClick:()=>{u("close"),ie().A.closeModal()}}]})}function mt(e){let{refundReason:t,setRefundReason:a,customReason:n,setCustomReason:r,reasonError:i,customReasonError:s}=e;const d=(0,l().tz)(),u=(0,o().IS)((e=>({selectChevron:{width:16,height:16,fill:e.text.tertiary},selectInputButton:{border:"none",boxShadow:e.inputBoxShadow,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"18px 14px",width:"100%"}})),[]),c="on"===(0,ee().r)("marketplace_refund_improvements"),m={items:[...z().y_.filter((e=>c||"not_added"!==e))],getKey:e=>e,onSelect:a,renderOrigin:e=>(0,y.jsxs)(lt().A,{...e,style:u.selectInputButton,size:"lg",children:[t?d.formatMessage(ft[c&&"unable_to_use"===t?"unable_to_use_next":t]):d.formatMessage(ft.placeholder),(0,it().b)(u.selectChevron)]}),menuTitle:(0,y.jsx)(P().D,{colorName:"secondary",styleName:"Body-14px/Regular",children:d.formatMessage(ft.label)}),selectedItem:t,renderItem:e=>{const t=ft[c&&"unable_to_use"===e.value?"unable_to_use_next":e.value];return(0,y.jsx)($().A,{...e,title:t.defaultMessage})},sameWidthAsOrigin:!0,originGap:6,width:"100%",minWidth:"100%"};return(0,y.jsxs)("section",{style:{display:"flex",flexDirection:"column",gap:12,width:"100%",marginTop:"-4px"},children:[(0,y.jsx)(dt().O,{name:d.formatMessage(ft.label),errorMessage:i,children:(0,y.jsx)(st().A,{...m})}),c||"custom"===t?(0,y.jsx)(dt().O,{name:d.formatMessage(pt.customReasonLabel),errorMessage:s,children:(0,y.jsx)(ot().A,{type:"text",maxlength:1e3,textarea:!0,placeholder:d.formatMessage(pt.customReasonPlaceholder),value:n,onChange:e=>r(e.target.value)})}):null]})}const pt=(0,l().YK)({title:{id:"buyerProfile.refundModal.refundReason.title",defaultMessage:"Reason for refund"},subtitle:{id:"buyerProfile.refundModal.refundReason.subtitle",defaultMessage:"Let us know why you’d like a refund"},continue:{id:"buyerProfile.refundModal.refundReason.continue",defaultMessage:"Continue"},cancel:{id:"buyerProfile.refundModal.refundReason.cancel",defaultMessage:"Cancel"},customReasonLabel:{id:"buyerProfile.refundModal.refundReason.customReasonLabel",defaultMessage:"Description"},customReasonPlaceholder:{id:"buyerProfile.refundModal.refundReason.customReasonPlaceholder",defaultMessage:"I’d like a refund because..."},defaultErrorMessage:{id:"buyerProfile.refundModal.refundReason.defaultErrorMessage",defaultMessage:"Something went wrong"},reasonErrorMessage:{id:"buyerProfile.refundModal.refundReason.reasonError",defaultMessage:"Please select a reason"}}),ft=(0,l().YK)({label:{id:"buyerProfile.refundModal.refundReason.label",defaultMessage:"Reason"},placeholder:{id:"buyerProfile.refundModal.refundReason.placeholder",defaultMessage:"Choose a reason..."},not_as_described:{id:"buyerProfile.refundModal.refundReason.notAsDescribed",defaultMessage:"Template was not as described"},not_wanted:{id:"buyerProfile.refundModal.refundReason.notWanted",defaultMessage:"I no longer want this template"},not_needed:{id:"buyerProfile.refundModal.refundReason.notNeeded",defaultMessage:"Template was not needed"},unable_to_use:{id:"buyerProfile.refundModal.refundReason.unableToUse",defaultMessage:"I couldn't use the template"},unable_to_use_next:{id:"buyerProfile.refundModal.refundReason.dontKnowHowToUse",defaultMessage:"I don’t know how to use this template"},not_added:{id:"buyerProfile.refundModal.refundReason.notAdded",defaultMessage:"Template was not added to my workspace"},custom:{id:"buyerProfile.refundModal.refundReason.custom",defaultMessage:"Other"}}),gt=(0,k().xh)("arrowCircleCheck",{default:{loader:()=>a.e(43741).then(a.bind(a,743741))},small:{loader:()=>a.e(3071).then(a.bind(a,903071))},mini:{loader:()=>a.e(91121).then(a.bind(a,291121))},large:{loader:()=>a.e(37303).then(a.bind(a,737303))}});function yt(e){const{refundStatus:t}=e,a=(0,l().tz)(),n=Qe();return(0,y.jsx)(Oe().Y,{width:360,icon:(0,y.jsx)(g().Q,{colorName:"secondary",variantName:"large",overrideSize:()=>36,iconGroup:gt}),title:a.formatMessage(ht.title),subTitle:"requested"===t?a.formatMessage(ht.subtitle):a.formatMessage(ht.creatorInterventionSubtitle),actions:[{type:"outline",text:a.formatMessage(ht.gotIt),onClick:()=>{ie().A.closeModal(),n("close")}}]})}const ht=(0,l().YK)({title:{id:"buyerProfile.refundModal.success.title",defaultMessage:"Refund request sent"},subtitle:{id:"buyerProfile.refundModal.success.subtitle",defaultMessage:"We will respond to the request within 5 business days. Please check your email to keep up with the latest updates."},gotIt:{id:"buyerProfile.refundModal.success.gotIt",defaultMessage:"Got it"},creatorInterventionSubtitle:{id:"buyerProfile.refundModal.success.creatorInterventionSubtitle",defaultMessage:"The creator of this template will reach out to provide support. Please keep an eye out for an email from them."}});function xt(){const e=Qe(),{isOpen:t,stage:a}=(0,i().O$)(ie().A),r=(0,n.useCallback)((()=>{e("close"),ie().A.closeModal()}),[e]);return(0,y.jsx)(d().s,{isOpen:t,onDismiss:r,showCloseIcon:!0,render:()=>{switch(a){case"initial":return(0,y.jsx)(et,{});case"refundReason":return(0,y.jsx)(ct,{});case"success":return(0,y.jsx)(yt,{refundStatus:"requested"});case"cancel":return(0,y.jsx)($e,{});case"creator_intervention":return(0,y.jsx)(yt,{refundStatus:"creator_intervention"});case"contact_creator":return(0,y.jsx)(Xe,{});default:(0,Re().HB)(a)}},animateSizeTransition:"refundReason"===a})}},619418:(e,t,a)=>{a.d(t,{Y:()=>c});a(581454),a(296540);var n=()=>a(484714),r=()=>a(401497),i=()=>a(534177),o=()=>a(493823),l=()=>a(554509),s=()=>a(864943),d=()=>a(204063),u=a(474848);function c(e){let{icon:t,title:a,subTitle:i,body:o,actions:s,width:d,style:c}=e;const p=(0,n().Y0)(),f=function(e){let{width:t=406,style:a={}}=e;return(0,r().IS)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",width:t,padding:"20px",gap:"24px",...a},header:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"8px"},headerPadding:{paddingTop:"16px"},actions:{display:"flex",flexDirection:"column",gap:"6px",width:"100%"}})),[t,a])}({width:d,style:c});return(0,u.jsxs)("div",{style:f.container,children:[(0,u.jsxs)(l().D,{styleName:p.isMobile?"UITitle-26px/Bold":"Heading-17px/Medium",style:{...f.header,...!t&&f.headerPadding},children:[t,a,i?(0,u.jsx)(l().D,{styleName:"Body-14px/Regular",colorName:"secondary",children:i}):null]}),o,(0,u.jsx)("div",{style:f.actions,children:null==s?void 0:s.map(((e,t)=>(0,u.jsx)(m,{...e},`marketplace-modal-action-${t}`)))})]})}function m(e){const t=(0,n().Y0)(),a=function(){const e=(0,n().Y0)();return(0,r().IS)((t=>({mobileButton:e.isMobile?{height:48,borderRadius:12}:{},plainButton:{justifyContent:"center"},actionError:{textAlign:"center"}})),[e.isMobile])}();return(0,u.jsxs)(u.Fragment,{children:[(()=>{switch(e.type){case"primary":return(0,u.jsx)(d().A,{size:"lg",onClick:e.onClick,disabled:e.isDisabled,isLoading:e.isLoading,color:t.isMobile?"black":"uiBlue",style:a.mobileButton,children:(0,u.jsx)(l().D,{styleName:t.isMobile?"Heading-17px/Medium":"UIRegular-14px/Medium",children:e.text})});case"outline":return(0,u.jsx)(s().A,{size:"lg",onClick:e.onClick,style:a.mobileButton,children:(0,u.jsx)(l().D,{styleName:t.isMobile?"Heading-17px/Medium":"UIRegular-14px/Medium",children:e.text})});case"plain":return(0,u.jsx)(o().p,{size:"lg",onClick:e.onClick,isBlue:e.isBlue,isGray:!e.isBlue,style:{...a.plainButton,...a.mobileButton},children:(0,u.jsx)(l().D,{styleName:t.isMobile?"Heading-17px/Regular":"UIRegular-14px/Regular",children:e.text})});default:(0,i().HB)(e)}})(),e.error&&(0,u.jsx)(l().D,{styleName:"UIRegular-14px/Regular",colorName:"redTertiary",customStyles:a.actionError,children:e.error})]})}}}]);