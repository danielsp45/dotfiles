"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[94256],{22394:(e,t,s)=>{s.d(t,{o:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("circleCheck",{viewBox:"0 0 12 12",svg:(0,i.jsx)("path",{d:"M6.09277 11.1855C8.88574 11.1855 11.1855 8.88574 11.1855 6.09277C11.1855 3.30469 8.88086 1 6.08789 1C3.2998 1 1 3.30469 1 6.09277C1 8.88574 3.2998 11.1855 6.09277 11.1855ZM6.09277 10.0674C3.89062 10.0674 2.12305 8.29492 2.12305 6.09277C2.12305 3.89062 3.88574 2.11816 6.08789 2.11816C8.29492 2.11816 10.0625 3.89062 10.0674 6.09277C10.0723 8.29492 8.29492 10.0674 6.09277 10.0674ZM5.57031 8.41699C5.75586 8.41699 5.92188 8.31934 6.0293 8.15332L8.17773 4.81836C8.24609 4.71094 8.2998 4.58887 8.2998 4.47656C8.2998 4.21289 8.07031 4.03711 7.82129 4.03711C7.66016 4.03711 7.51855 4.125 7.41113 4.30078L5.55566 7.2793L4.68652 6.19043C4.56934 6.03906 4.44727 5.98047 4.2959 5.98047C4.03711 5.98047 3.82715 6.18555 3.82715 6.44922C3.82715 6.57129 3.87598 6.68359 3.96387 6.7959L5.0918 8.1582C5.22852 8.3291 5.37988 8.41699 5.57031 8.41699Z"})})},30580:(e,t,s)=>{s.d(t,{Y:()=>i,b:()=>n});s(581454);class i extends(()=>s(757695))().Store{getInitialState(){return{step:"backupCodesUninitialized"}}}class n extends(()=>s(658921))()._{constructor(e,t){super(e,"backupCodes"),this.service=void 0,this.service=t}backupCodesInitialSetup(e){if(!this.checkStep("backupCodesUninitialized"))return;const{onLoadingComplete:t,onComplete:s}=e;this.store.setState({step:"backupCodesLoading"}),this.doCreateBackupCodes({forceRecreate:!1,onComplete:s,onLoadingComplete:t}).catch(this.handleUnexpectedError)}backupCodesShowCreate(){this.checkStep("backupCodesUninitialized")&&this.store.setState({step:"backupCodesRegenerateCodes"})}backupCodesRegenerateCodes(){this.checkStep("backupCodesRegenerateCodes")&&(this.store.setState({step:"backupCodesRegenerateCodes",isLoading:!0}),this.doCreateBackupCodes({forceRecreate:!0,onComplete:()=>{},onLoadingComplete:()=>{}}).catch(this.handleUnexpectedError))}exit(){this.store.setState({step:"backupCodesUninitialized"})}async doCreateBackupCodes(e){const{forceRecreate:t,onComplete:i,onLoadingComplete:n}=e,o=await this.withStep(["backupCodesLoading","backupCodesRegenerateCodes"],(()=>this.service.createBackupCodes(t)));if(!o)return;const{result:a}=o;if("already-exists"===a.status)i();else{const e=function(e){const t=s(972435).A.getIntl(),i=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.title",defaultMessage:"Notion Backup Codes"}),n=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.createdAt",defaultMessage:"Created at {createdAt}"},{createdAt:`${new Date}`}),o=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.warningMessage",defaultMessage:"Please store these in a secure location and mark off codes as they are used."}),a=`${i}\n${n}\n\n${e.map(s(219505).H).join("\n")}\n\n${o}\n`;return encodeURIComponent(a)}(a.backupCodes);this.store.setState({step:"backupCodesShowCodes",backupCodes:a.backupCodes,mfaSettingId:a.mfaSettingId,backupCodesFile:e}),n()}}}},42476:(e,t,s)=>{s.d(t,{A:()=>i});const i=(0,s(340498).xh)("personCropCircleBadgeExclamationPoint",{default:{loader:()=>s.e(4643).then(s.bind(s,504643))},small:{loader:()=>s.e(87661).then(s.bind(s,87661))},mini:{loader:()=>s.e(42683).then(s.bind(s,442683))},large:{loader:()=>s.e(94097).then(s.bind(s,894097))}})},61442:(e,t,s)=>{s.d(t,{M:()=>m});s(898992),s(581454),s(908872);var i=()=>s(690825),n=s(296540),o=()=>s(56366),a=()=>s(401497),r=()=>s(378815),l=()=>s(284371),d=()=>s(493823),c=()=>s(331542),u=()=>s(73332),p=s(474848);function m(e){const{columns:t,listSource:s,transformRow:i,estimatedRowHeight:r,renderEmpty:l,sort:d,onSortChange:m,allowHorizontalScroll:f=!1,multiselect:S,style:v}=e,A=(0,a().IS)((e=>({container:{height:"100%",width:"100%",display:"flex",flexDirection:"column",minWidth:x(t),...v},headerRow:{display:"flex",position:"relative",boxShadow:`\n\t\t\t\t\tinset 0 1px 0 ${e.tableDividerColor},\n\t\t\t\t\tinset 0 -1px 0 ${e.tableDividerColor}\n\t\t\t\t`},loadingContainer:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:8},horizontalScrollContainer:{position:"relative",width:"100%",height:"100%",overflowX:"auto"},multiselectCheckbox:{alignSelf:"center",color:e.selectLightGray[300],opacity:null!=S&&S.header.isDisabled?.5:1,marginLeft:y/2}})),[t,null==S?void 0:S.header.isDisabled,v]),w=(0,n.useCallback)((e=>{const t=e.id===(null==d?void 0:d.by)&&!d.asc;m&&m({by:e.id,asc:t})}),[d,m]),M=(0,o().K8)((()=>e.rows??(null==s?void 0:s.rowsStore.state.rows)),[e.rows,s]),j=(0,p.jsxs)("div",{style:A.container,children:[(0,p.jsxs)("div",{style:A.headerRow,children:[S?(0,p.jsx)(u().T,{style:A.multiselectCheckbox,disabled:S.header.isDisabled,checked:S.header.isSelected,onClick:()=>S.header.onClick(),size:b,tapArea:{size:30}}):void 0,t.map((e=>(0,p.jsx)(g,{column:e,sort:d,onSortableColumnClick:w},`header_${e.id}`)))]}),void 0===M?(0,p.jsx)("div",{style:A.loadingContainer,children:(0,p.jsx)(c().A,{})}):0===M.length&&l?l():(0,p.jsx)(h,{columns:t,rows:M,listSource:s,estimatedRowHeight:r,transformRow:i,multiselect:S})]});return f?(0,p.jsx)("div",{style:A.horizontalScrollContainer,children:j}):j}function g(e){let{column:t,sort:s,onSortableColumnClick:i}=e;const n=(0,a().IS)((e=>({cellContainer:{...A(t.widthData),display:"flex",alignItems:"center",height:32,...t.border&&{boxShadow:`inset -1px 0 0 ${e.tableDividerColor}`}},cell:{display:"flex",alignItems:"center",padding:t.headerCellPadding},text:{fontSize:l().J.UISmall.desktop,fontWeight:l().Wy.regular,color:e.text.secondary},sortButton:{paddingLeft:6,paddingRight:6,marginLeft:-6,marginRight:-6},sortIcon:{color:e.text.secondary,width:12,height:12,marginLeft:4,fill:"currentColor"}})),[t.widthData,t.headerCellPadding,t.border]),o=(0,p.jsx)("div",{style:n.text,children:t.headerTitle});return(0,p.jsx)("div",{style:n.cellContainer,children:(0,p.jsx)("div",{style:n.cell,children:t.sortable?(0,p.jsxs)(d().p,{size:"xs",style:n.sortButton,onClick:()=>i(t),children:[o,(null==s?void 0:s.by)===t.id&&(0,r().C)({...n.sortIcon,...s.asc&&{transform:"rotate(180deg)"}})]}):o})})}function h(e){const{columns:t,rows:s,listSource:o,estimatedRowHeight:a,transformRow:r,multiselect:l}=e,d=n.useRef(null),c=(0,i().Te)({count:s.length,getScrollElement:()=>d.current,estimateSize:()=>a,overscan:10}),u=c.getVirtualItems();return(0,n.useEffect)((()=>{!async function(){const e=u[u.length-1];null!=o&&o.rowsStore.state.hasMore&&(null==e?void 0:e.index)>=s.length-1&&await o.loadMore()}()}),[o,s.length,u]),(0,p.jsx)("div",{ref:d,style:{flex:"1 1 0",overflowY:"auto",overflowX:"hidden",position:"relative"},children:(0,p.jsx)("div",{style:{height:c.getTotalSize(),width:"100%",position:"relative"},children:u.map((e=>(0,p.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${e.start}px)`},"data-index":e.index,ref:c.measureElement,children:(0,p.jsx)(f,{columns:t,row:s[e.index],transformRow:r,multiselect:l})},String(e.key))))})})}function f(e){let{row:t,columns:s,transformRow:i,multiselect:n}=e;const r=(0,a().IS)((e=>({container:{display:"flex",height:"100%",alignItems:"stretch",boxShadow:`inset 0 -1px 0 ${e.tableDividerColor}`},multiselectCheckbox:{alignSelf:"center",color:e.selectLightGray[300],opacity:null!=n&&n.header.isDisabled?.5:1,marginLeft:y/2}})),[null==n?void 0:n.header.isDisabled]),l=(0,o().K8)((()=>i(t)),[i,t]);return void 0===l?null:(0,p.jsxs)("div",{style:r.container,children:[n?(0,p.jsx)(u().T,{style:r.multiselectCheckbox,disabled:n.row.getDisabledState(l),checked:n.row.getSelectedState(l),onClick:()=>n.row.onClick(l),size:b,tapArea:{size:30}}):void 0,s.map((e=>(0,p.jsx)(S,{row:l,column:e},`cell_${l.id}_${e.id}`)))]})}function S(e){let{row:t,column:s}=e;const i=(0,a().IS)((e=>({cellContainer:{...A(s.widthData),display:"flex",alignItems:"center",...s.border&&{boxShadow:`inset -1px 0 0 ${e.tableDividerColor}`}},cell:{minWidth:v(s.widthData),maxWidth:s.widthData.maxWidth,padding:s.cellPadding}})),[s.widthData,s.border,s.cellPadding]);return(0,p.jsx)("div",{style:i.cellContainer,children:(0,p.jsx)("div",{style:i.cell,children:s.renderCell(t)})})}const y=24,b=14;function x(e){return e.reduce(((e,t)=>e+v(t.widthData)+y),0)}function v(e){return"minWidth"in e?e.minWidth:e.width}function A(e){let t;return t="width"in e?{width:e.width,maxWidth:null==e?void 0:e.maxWidth}:{width:`${e.widthPercent}%`,minWidth:e.minWidth,maxWidth:null==e?void 0:e.maxWidth},{...t,paddingLeft:y/2,paddingRight:y/2}}},112799:(e,t,s)=>{s.d(t,{a:()=>d,E:()=>l});s(16280);var i=s(296540),n=()=>s(484714),o=(s(898992),s(672577),()=>s(427704));o().GJ.downloadMac,o().GJ.downloadMacUniversal,o().GJ.downloadMacIntel,o().GJ.downloadMacAppleSilicon,o().GJ.downloadWindows,o().GJ.downloadWindowsArm;const a=[{route:o().GJ.downloadMac,architecture:"universal",operatingSystem:"mac",target:"macUniversal"},{route:o().GJ.downloadMacIntel,architecture:"x86",operatingSystem:"mac",target:"mac"},{route:o().GJ.downloadMacUniversal,architecture:"universal",operatingSystem:"mac",target:"macUniversal"},{route:o().GJ.downloadMacAppleSilicon,architecture:"arm",operatingSystem:"mac",target:"macArm64"},{route:o().GJ.downloadWindows,architecture:"x86",operatingSystem:"windows",target:"windows"},{route:o().GJ.downloadWindowsArm,architecture:"arm",operatingSystem:"windows",target:"windowsArm64"}];function r(e,t){const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=e.toLowerCase();if(t.startsWith("arm"))return"arm";if(t.startsWith("x86")||"intel"===t)return"x86";return null}(e);if(!s||!("mac"===t||"windows"===t))return null;const i=a.find((e=>e.architecture===s&&e.operatingSystem===t));return(null==i?void 0:i.route)||null}function l(){const e=(0,i.useRef)(null),t=(0,n().Y0)();return(0,i.useEffect)((()=>{d(t).then((t=>{e.current=t??null})).catch((e=>{throw new Error(e)}))}),[t]),e}async function d(e){var t;if(!("userAgentData"in navigator))return e.isMac?o().GJ.downloadMacUniversal:o().GJ.downloadWindows;const s=navigator.userAgentData,i=await(null==s||null===(t=s.getHighEntropyValues)||void 0===t?void 0:t.call(s,["architecture"])),n=r(null==i?void 0:i.architecture,e.os);return n||null}},127955:(e,t,s)=>{s.d(t,{fm:()=>ce,Ck:()=>ue,AJ:()=>de,Ay:()=>le});s(898992),s(354520);var i=s(296540),n=()=>s(484714),o=()=>s(56366),a=()=>s(401497),r=()=>s(985595),l=()=>s(959013),d=()=>s(284371),c=()=>s(706024),u=()=>s(751156),p=()=>s(709062),m=()=>s(765957),g=()=>s(132813),h=()=>s(991249),f=()=>s(118849),S=()=>s(134217),y=()=>s(946548),b=()=>s(125565),x=()=>s(8178),v=()=>s(508490),A=(s(581454),()=>s(709438)),w=()=>s(317182),M=(s(672577),()=>s(869190)),j=()=>s(604995),k=()=>s(842599),C=()=>s(416504),_=()=>s(644484),I=()=>s(668725),P=()=>s(742117),T=()=>s(496603),B=()=>s(534177),R=()=>s(746970),D=()=>s(436572),N=()=>s(962730),L=()=>s(630116),O=()=>s(704152),F=()=>s(493823),U=()=>s(864943),E=()=>s(859428),G=()=>s(994006),V=()=>s(453697),z=()=>s(584262),K=()=>s(433847),q=()=>s(179034),W=()=>s(435009),H=()=>s(492414),$=()=>s(296798),Y=()=>s(187820),Q=()=>s(16006),X=s(474848);function J(e){const{pageAndRole:t,environment:s,intl:i}=e,n=(0,a().IS)((e=>({title:{marginLeft:2},role:{marginLeft:4},linkContainer:{display:"inline-flex",alignItems:"center"}})),[]),r=(0,o().K8)((()=>new(L().Bv)(s,{table:q().ev,id:t.id})),[s,t.id]),l=(0,o().K8)((()=>{var e;return null===(e=r.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:r.getRecordModel})}),[r]),d=(0,o().K8)((()=>(0,Y().Te)(r)),[r]),c=(0,o().K8)((()=>(0,H().Ay)({store:r,pageVisitSource:z().y8.LinkInPage})),[r]);return(0,X.jsxs)($().A,{style:n.linkContainer,onClick:()=>{W().oo({environment:s,url:c,openInNew:"tab"})},children:[(0,X.jsx)(Y().B6,{icon:l,iconRecordCategory:d,size:16,isEmptyPage:!1,disabled:!0}),(0,X.jsx)("b",{children:(0,X.jsx)(Q().A,{style:n.title,store:r})}),(0,X.jsx)(b().A,{style:n.role,isSecondaryColor:!0,children:`(${i.formatMessage((0,K().an)(t.role,q().ev)).toLocaleLowerCase()})`})]})}function Z(e){const{store:t,request:s}=e,{forActor:r,accessRequest:d,createdByActorsWithReason:c}=s,u=(0,n().v3)(),p=(0,a().IS)((e=>({actionButtons:{display:"flex",alignItems:"center",gap:12},requestMetadata:{minWidth:0,marginLeft:10,marginRight:6},tooltip:{marginBottom:2},tooltipHeader:{color:e.text.contrastSecondary,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em",marginBottom:2},requestBody:{marginLeft:38,marginTop:8}})),[]),m=(0,l().tz)(),g=(0,o().K8)((()=>r.__IM_SORRY__getValue()),[r]),h=(0,o().K8)((()=>(0,T().hS)(c.map((e=>{let{actor:t}=e;return t})),(e=>e.id))),[c]),f=(0,o().K8)((()=>d.getType()),[d]),S=(0,o().K8)((()=>s.createdByActorsWithReason.filter((e=>{let{reason:t}=e;return Boolean(t)})).map((e=>`${e.actor.getDisplayName(m)} · ${e.reason}`))),[s,m]),y=(0,o().K8)((()=>{var e;return d.isGuestInviteRequest()?null===(e=d.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e?void 0:e[0]:void 0}),[d]),x=(0,o().K8)((()=>{if(!d.isGuestInviteRequest())return;const e=(0,k().qh)(r.email),s=e&&(0,k().zN)(e);return s?t.getEmailDomains().find((e=>e===s)):void 0}),[d,r,t]),v=(0,o().K8)((()=>d.created_time),[d]),A=(0,i.useCallback)((async()=>{if(d.isGuestInviteRequest()){(await R().aV({environment:u,requests:[d],status:"approved",from:"requests_center"})).failedUsers.length>0?D().D6({label:(0,X.jsx)(l().sA,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveGuestInvite.failure",defaultMessage:"Failed to invite {actorEmail} as a guest",values:{actorEmail:r.email}})}):D().D6({label:(0,X.jsx)(l().sA,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveGuestInvite.success",defaultMessage:"Invited {actorEmail} as guest",values:{actorEmail:r.email}})})}else if(d.isSpaceMembershipRequest()){(await R().p4({environment:u,store:t,requests:[d],status:"approved",from:"requests_center"})).failedUsers.length>0?D().D6({label:(0,X.jsx)(l().sA,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveSpaceMembership.failure",defaultMessage:"Failed to add {actorEmail} as a member",values:{actorEmail:r.email}})}):D().D6({label:(0,X.jsx)(l().sA,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveSpaceMembership.success",defaultMessage:"Added {actorEmail} as a member",values:{actorEmail:r.email}})})}}),[d,u,r,t]),w=(0,i.useCallback)((()=>{d.isGuestInviteRequest()?R().aV({environment:u,requests:[d],status:"rejected",from:"requests_center"}):d.isSpaceMembershipRequest()&&R().p4({environment:u,store:t,requests:[d],status:"rejected",from:"requests_center"})}),[d,u,t]);if(!(s&&r&&g&&c.length))return null;const _=j().KQ(v,(0,C().P)()),I=(0,M().ZF)({value:_,date_format:"relative",userTimeZone:(0,C().P)(),intl:m,allowRelativeDates:!0}),P=S.length>0||(0,B().O9)(y);return(0,X.jsxs)("div",{style:{width:"100%"},children:[(0,X.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,X.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,X.jsx)(ie,{forActor:g,type:f}),(0,X.jsxs)("div",{style:p.requestMetadata,children:[(0,X.jsx)(se,{type:f,forActor:g}),(0,X.jsxs)(b().A,{isSmall:!0,children:[(0,X.jsx)(E().A,{renderTooltip:()=>(0,X.jsxs)("div",{style:p.tooltip,children:[(0,X.jsx)(b().A,{style:p.tooltipHeader,children:(0,X.jsx)(l().sA,{defaultMessage:"Requested by",id:"spaceSettingsRequests.requestRowAction.requestedByMoreThanTwo.tooltip"})}),h.map((e=>(0,X.jsx)(oe,{actor:e},e.id)))]}),render:e=>(0,X.jsx)("span",{...e,children:(0,X.jsx)(ne,{request:s,createdByActors:h})})})," · ",I]})]})]}),(0,X.jsxs)("div",{style:p.actionButtons,children:[(0,X.jsx)(F().p,{isGray:!0,onClick:w,children:(0,X.jsx)(l().sA,{defaultMessage:"Decline",id:"spaceSettingsRequests.requestRowAction.declineButton.label"})}),(0,X.jsx)(E().A,{render:e=>(0,X.jsx)(U().A,{size:"lg",color:"uiBlue",onClick:A,...e,children:(0,X.jsx)(l().sA,{defaultMessage:"Approve",id:"spaceSettingsRequests.requestRowAction.acceptButton.label"})}),renderTooltip:()=>(0,X.jsx)("div",{style:{width:300},children:(0,X.jsx)(l().sA,{defaultMessage:"This user will automatically be added to the workspace when approved since {domain} is an allowed email domain",id:"spaceSettingsRequests.requestRowAction.allowedEmailDomain.tooltip",values:{domain:x}})}),disableTooltip:!x,textWrap:!0,placement:N().W.Bottom})]})]}),P&&(0,X.jsxs)("div",{style:p.requestBody,children:[y&&(0,X.jsx)(J,{pageAndRole:y,environment:u,intl:m}),S.length>0&&(0,X.jsx)(te,{reasonMessages:S})]})]})}function ee(e){return(0,X.jsx)("b",{children:e})}function te(e){const{reasonMessages:t}=e,[s,n]=(0,i.useState)(!1),o=(0,a().IS)((e=>({viewReasonsToggle:{paddingLeft:2,paddingRight:2,borderRadius:2,display:"inline-flex",alignItems:"center"},viewReasonsCaratIcon:{marginLeft:2,width:12,height:12,color:e.palette.gray[500]},reasonMessageBody:{marginTop:2}})),[]);return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(O().A,{style:o.viewReasonsToggle,onClick:()=>n(!s),children:[(0,X.jsx)(b().A,{isSmall:!0,children:(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.requestRowAction.viewReasonsButton.label",defaultMessage:"View reasons"})}),s?(0,I().b)(o.viewReasonsCaratIcon):(0,P().V)(o.viewReasonsCaratIcon)]}),s&&(0,X.jsx)("div",{style:o.reasonMessageBody,children:t.map(((e,t)=>(0,X.jsx)("div",{children:e},t)))})]})}function se(e){const{forActor:t,type:s}=e,i=(0,a().IS)((e=>({title:{display:"flex",gap:4},semibold:{fontWeight:d().Wy.semibold}})),[]),n="guest_invite_request"===s?(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.requestRow.title.guestInviteRequest",defaultMessage:"Invite {actorEmail} as a guest",values:{actorEmail:(0,X.jsx)("span",{style:i.semibold,children:t.email})}}):(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.requestRow.title.membershipRequest",defaultMessage:"Add {actorEmail} as a member",values:{actorEmail:(0,X.jsx)("span",{style:i.semibold,children:t.email})}});return(0,X.jsx)("div",{style:i.title,children:(0,X.jsx)(b().A,{className:"notranslate",children:n})})}function ie(e){const{type:t,forActor:s}=e,i=(0,a().IS)((e=>({avatarWrapper:{borderRadius:"100%",background:e.palette.gray[75],width:28,height:28,display:"flex",alignItems:"center",justifyContent:"center"},addPersonIcon:{width:18,height:18,color:e.palette.gray[500]}})),[]);return"guest_invite_request"===t?(0,X.jsx)("div",{style:i.avatarWrapper,children:(0,_().g)(i.addPersonIcon)}):(0,X.jsx)(V().A,{userValue:s,size:28,borderStyle:"dashed"})}function ne(e){const{createdByActors:t,request:s}=e,i=(0,l().tz)(),n=(0,o().K8)((()=>t.filter((e=>e.email!==s.forActor.email))),[s,t]),a=(0,o().K8)((()=>{var e;return null===(e=t[0])||void 0===e?void 0:e.getDisplayName(i)}),[t,i]),r=(0,o().K8)((()=>{var e;return null===(e=t[1])||void 0===e?void 0:e.getDisplayName(i)}),[t,i]),d=(0,o().K8)((()=>{var e;return null===(e=n[0])||void 0===e?void 0:e.getDisplayName(i)}),[n,i]),c=n.length!==t.length;return 1===t.length?c?(0,X.jsx)(l().sA,{defaultMessage:"Guest self request",id:"spaceSettingsRequests.requestRowAction.requestedBySingularGuestSelfRequest"}):(0,X.jsx)(l().sA,{defaultMessage:"Requested by <b>{actorName}</b>",id:"spaceSettingsRequests.requestRowAction.requestedBySingular.v2",values:{actorName:a,b:ee}}):c?(0,X.jsx)(l().sA,{defaultMessage:"{numberOfOtherActors, plural, one {Guest self request and requested by <b>{secondActorName}</b>} other {Guest self request and requested by <b>{numberOfOtherActors}</b> more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPluralIncludingGuestSelfRequest.v2",values:{secondActorName:d,numberOfOtherActors:n.length,b:ee}}):(0,X.jsx)(l().sA,{defaultMessage:"{numberOfOtherActors, plural, one {Requested by {firstActorName} and {secondActorName}} other {Requested by {firstActorName} and {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPlural.v2",values:{firstActorName:a,secondActorName:r,numberOfOtherActors:t.length-1}})}function oe(e){let{actor:t}=e;const s=(0,n().v3)(),i=(0,a().IS)((()=>({component:{display:"flex",justifyContent:"space-between",marginBottom:4},email:{marginLeft:5}})),[]),r=(0,o().K8)((()=>t.email),[t]),l=new(L().LU)(s,t.pointer);return(0,X.jsxs)("div",{style:i.component,children:[(0,X.jsx)(G().A,{avatarSize:18,userStore:l}),(0,X.jsx)("div",{style:i.email,children:r})]},t.id)}function ae(e){const{spaceStore:t,accessRequestRenderValues:s,lastOpenedRequestCenterTime:i}=e,n=(0,o().K8)((()=>s.filter((e=>"pending"===e.accessRequest.status)).sort(((e,t)=>t.accessRequest.created_time-e.accessRequest.created_time))),[s]),d=(0,a().IS)((e=>({requestColumn:{width:"100%"},zeroStateContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:40,color:e.text.secondary,borderStyle:"solid",borderColor:e.regularDividerColor,borderWidth:1,borderRadius:4},mailIcon:{height:12,width:17,color:e.icon.secondary,marginRight:6}})),[]),c={key:"request",header:void 0,style:d.requestColumn};return 0===n.length?(0,X.jsxs)("div",{style:d.zeroStateContainer,children:[(0,r().n)(d.mailIcon),(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.emptyRequests.message",defaultMessage:"No invite requests yet"})]}):(0,X.jsx)(w().A,{hideHeader:!0,columns:[c],rows:n.map(((e,s)=>({key:`request${s.toString()}`,columns:[(0,X.jsx)(re,{request:e,lastOpenedRequestCenterTime:i,spaceStore:t},e.accessRequest.id)]})))})}function re(e){let{request:t,lastOpenedRequestCenterTime:s,spaceStore:i}=e;const n=(0,o().K8)((()=>s<t.accessRequest.created_time),[s,t.accessRequest]);return(0,X.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[n&&(0,X.jsx)("div",{style:{marginLeft:-18,marginRight:10},children:(0,X.jsx)(A().m,{size:8})}),(0,X.jsx)(Z,{store:i,request:t})]},t.accessRequest.id)}function le(e){const{spaceStore:t,accessRequestRenderValues:s}=e,c=(0,n().v3)(),[p,h]=(0,i.useState)(Date.now()),f=(0,o().uB)(void 0,g().A),S=(0,o().K8)((()=>f.getValueForSpace(t)),[t,f]),y=(0,o().K8)((()=>s?s.filter((e=>"pending"===e.accessRequest.status)).length:0),[s]),b=(0,o().K8)((()=>t.canAdmin()),[t]),A=(0,a().IS)((e=>({errorContainer:{display:"flex",justifyContent:"center",alignItems:"center",padding:40,color:e.text.secondary},settingHeader:{fontSize:16,fontWeight:d().Wy.medium},requestCount:{color:e.text.tertiary}})),[]);(0,i.useEffect)((()=>{const{currentSpaceViewStore:e}=m().default.state;if(!e)return;const t=e.getKeyStore("settings").getKeyStore("last_opened_request_center").getValue();t&&h(t),u().createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:c,canUndo:!0,perform:t=>{u().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_request_center"],command:"set",args:Date.now()},transaction:t})}})}),[]);const w=(0,i.useCallback)((()=>b?null:(0,X.jsx)(me,{securitySettingsStoreState:S,spaceStore:t,environment:c,isReadOnly:!0})),[c,b,S,t]);return s?(0,X.jsxs)(X.Fragment,{children:[b?(0,X.jsx)(v().A,{icon:r().n,title:(0,X.jsx)(l().sA,{id:"spaceSettingsRequest.deeplinkCard.title",defaultMessage:"Change request settings in the <bold>Security</bold> tab",values:{bold:e=>(0,X.jsx)("span",{style:{fontWeight:d().Wy.semibold},children:e})}}),deeplinkTab:{currentTab:"security",defaultSubtab:void 0}}):null,w(),(0,X.jsxs)(x().A,{divider:"none",large:!0,style:A.settingHeader,children:[(0,X.jsx)(l().sA,{id:"spaceSettingsRequest.title",defaultMessage:"Requests"}),(0,X.jsx)("span",{children:" "}),(0,X.jsx)("span",{style:A.requestCount,children:y>0?y:void 0})]}),(0,X.jsx)(ae,{spaceStore:t,accessRequestRenderValues:s,lastOpenedRequestCenterTime:p})]}):(0,X.jsx)("div",{style:A.errorContainer,children:(0,X.jsx)(ge,{})})}function de(e){return(0,X.jsx)(pe,{...e,title:(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.allowMembersToRequestMembers.title",defaultMessage:"Allow members to request adding other members"}),description:(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.allowMembersToRequestMembers.description",defaultMessage:"Members can submit requests to admins to add more members"})})}function ce(e){return(0,X.jsx)(pe,{...e,title:(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.allowExternalUsersToRequestMembership.title",defaultMessage:"Allow any user to request to be added as a member of the workspace"}),description:(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.allowExternalUsersToRequestMembership.description",defaultMessage:"If enabled, users with teamspace invite links can submit requests to admins to be added as members"})})}function ue(e){return(0,X.jsx)(pe,{...e,title:(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.title",defaultMessage:"Allow page guests to request to be added as members to the workspace"}),description:(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.description",defaultMessage:"Guests of the workspace can submit requests to admins to be added as members"})})}function pe(e){const{toggleOn:t,shouldShowUpsell:s,onClick:n,style:o,upsellOrigin:r,environment:d,description:c,title:u,isReadOnly:m,isControlledByOrganization:g}=e,S=(0,a().IS)((()=>({toggleContainer:{display:"flex",alignItems:"center",cursor:m?"auto":"pointer",marginBottom:14,...o},titleDescription:{fontSize:14,marginRight:8,flexGrow:1},description:{marginTop:2,width:"80%"}})),[o,m]),x=(0,i.useCallback)((()=>{m||g||(s?h().K(d,{from:r,upsell:{type:"product",product:"plus",limit:{type:"none"},trialability:"none"}}):n())}),[d,r,m,s,n,g]);return(0,X.jsxs)("div",{style:S.toggleContainer,onClick:x,children:[(0,X.jsxs)("div",{style:S.titleDescription,children:[u,s?(0,X.jsx)(f().A,{subscriptionTier:"plus",analyticsName:r,onClick:()=>h().K(d,{from:r,upsell:{type:"product",product:"plus",limit:{type:"none"},trialability:"none"}}),desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3}}):null,(0,X.jsx)(b().A,{isSmall:!0,isMultiline:!0,style:S.description,children:c})]}),m?(0,X.jsx)(b().A,{isSmall:!0,children:(0,X.jsx)(l().sA,{id:"spaceSettingsRequests.readOnlyState.label",defaultMessage:"{isEnabled, select, true {Enabled} other {Disabled}}",values:{isEnabled:t}})}):(0,X.jsx)(y().A,{on:t,disabled:s,isLocked:g,lockedTooltip:(0,p().C_)()})]})}function me(e){const{securitySettingsStoreState:t,spaceStore:s,environment:n,isReadOnly:a}=e,r=Boolean(null==t?void 0:t.disableMembershipRequests),l=Boolean(null==t?void 0:t.disableExternalMembershipRequests),d=Boolean(null==t?void 0:t.disableGuestMembershipRequests),u=(0,o().K8)((()=>(0,S().dW)()),[]),p=(0,i.useCallback)((()=>{t&&c().V(n,{securitySettingsState:{...t,disableMembershipRequests:!t.disableMembershipRequests},spaceStore:s})}),[n,t,s]),m=(0,i.useCallback)((()=>{t&&c().V(n,{securitySettingsState:{...t,disableExternalMembershipRequests:!t.disableExternalMembershipRequests},spaceStore:s})}),[n,t,s]),g=(0,i.useCallback)((()=>{t&&c().V(n,{securitySettingsState:{...t,disableGuestMembershipRequests:!t.disableGuestMembershipRequests},spaceStore:s})}),[n,t,s]);return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(de,{environment:n,upsellOrigin:"members_settings",toggleOn:!r,shouldShowUpsell:!1,isReadOnly:a,onClick:p}),(0,X.jsx)(ce,{environment:n,upsellOrigin:"members_settings",toggleOn:!l,shouldShowUpsell:!1,isReadOnly:a,onClick:m}),u&&(0,X.jsx)(ue,{environment:n,upsellOrigin:"members_settings",toggleOn:!d,shouldShowUpsell:!1,isReadOnly:a,onClick:g})]})}function ge(){return(0,X.jsx)(l().sA,{defaultMessage:"Something went wrong.",id:"spaceSettingsRequests.unknownErrorMessage"})}},128907:(e,t,s)=>{s.d(t,{R:()=>o});var i=()=>s(604995),n=()=>s(765957);function o(){const e=n().default.state.currentUserSettingsStore;if(null==e||!e.isDefined())return!1;const t=e.getSettings();if(null==t||!t.seen_contraction_survey_at)return!0;return Date.now()>(0,i().K1)({date:null==t?void 0:t.seen_contraction_survey_at,daysToAdd:1})}},149397:(e,t,s)=>{s.d(t,{k:()=>r});var i=s(296540),n=()=>s(484714),o=()=>s(449506),a=s(474848);function r(e){return function(t){const s=(0,n().v3)(),[r,l]=(0,i.useState)({isDomainVerified:!1,settings:{}});(0,i.useEffect)((()=>{o().callApi({eventName:"getEmailDomainSettings",environment:s,data:{}}).then((e=>{"success"===e.type&&l(e.data)}))}),[s]);const d={...t,userEmailDomainSettings:r};return(0,a.jsx)(e,{...d})}}},187859:(e,t,s)=>{s.d(t,{m:()=>i});const i=(0,s(340498).xh)("google",{default:{loader:()=>s.e(78472).then(s.bind(s,293901))},darkMode:{loader:()=>s.e(78472).then(s.bind(s,259539))}})},205224:(e,t,s)=>{s.d(t,{D:()=>S,P:()=>f});s(16280),s(296540);var i=()=>s(959013),n=()=>s(680074),o=()=>s(224701),a=()=>s(475355),r=()=>s(134696),l=()=>s(966505),d=()=>s(449506),c=()=>s(496414),u=()=>s(579627),p=()=>s(436572),m=()=>s(751156),g=s(474848);const h=(0,i().YK)({removingGuest:{id:"convertGuestToMember.removeGuest.updatingMessage",defaultMessage:"Updating…"},convertingGuest:{id:"convertGuestToMember.convertingGuest.updatingMessage",defaultMessage:"Updating…"}});async function f(e){const{environment:t,store:s,role:d,guestUserStore:f,isConvertToAdmin:S}=e,y=f.id,b=f.getEmail();try{if(c().m({message:h.convertingGuest}),!s.isTeamsEnabled()){if(!(await a().oH({environment:t,flowId:"",trackCreateTeamComplete:!1})))return}const i=[{type:"user_permission",role:d,user_id:y}],{serverCommitResult:o}=m().createAndCommit({userAction:"spacePerimssionGuestActions.convertGuestToMember",environment:t,canUndo:!0,perform:e=>{u().dy({environment:t,spaceStore:s,permissionItems:i,transaction:e,from:"convert_to_member"})}});await o,l().gc(t,{member_user_id:y,convert_to:S?"admin":"member",origin:e.origin}),r().Jg(t,{role:d,is_space:!0,invite_targets:[{type:"existingUser",value:{id:y,version:0,email:""},spaceRole:"none"}],is_onboarding:!1,invite_origin:"convert_to_member",permission_items:i,invite_message_length:0,domainType:(0,n().FX)()})}catch(x){p().D6({label:(0,g.jsx)(i().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.snackbar.failure",defaultMessage:"Failed to convert {email} to workspace member",values:{email:b}})})}finally{await o().nO({environment:t,spaceStore:s}),c().V()}}async function S(e){const{environment:t,store:s,guestUserStore:n}=e,a=n.id,r=n.getEmail();try{c().m({message:h.removingGuest});if("success"!==(await d().callApi({eventName:"removeUsersFromSpace",environment:t,data:{userIds:[a],spaceId:s.id,removePagePermissions:!0,revokeUserTokens:!1}})).type)throw new Error("Failed to remove guest");l().wX(t)}catch(u){p().D6({label:(0,g.jsx)(i().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.snackbar.failure",defaultMessage:"Failed to remove {email} from workspace",values:{email:r}})})}finally{await o().nO({environment:t,spaceStore:s}),c().V(),l().xO(t,{origin:"space_setting_guest_tab",changedNumber:-1})}}},230510:(e,t,s)=>{s.d(t,{P:()=>i});const i=(0,s(340498).xh)("openAi",{default:{loader:()=>s.e(77375).then(s.bind(s,89116))},darkMode:{loader:()=>s.e(77375).then(s.bind(s,457784))}})},231127:(e,t,s)=>{s.d(t,{V:()=>a});s(296540);var i=()=>s(959013),n=s(474848);const o=(0,i().YK)({switchingToNewTool:{id:"survey.options.switching.placeholder",defaultMessage:"Share the name of the other tools"},switchingToNewAiTool:{id:"survey.options.usingAnotherAIService.placeholder",defaultMessage:"Share the name of the other AI tools"}}),a={consolidatingWorkspaces:{optionName:"consolidating_workspaces",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.consolidatingWorkspaces",defaultMessage:"Consolidating Notion workspaces"})},dataSecurity:{optionName:"data_security",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"churnSurvey.reasons.dataSecurity",defaultMessage:"Data security"})},missingFeatures:{optionName:"missing_features",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.missingFeatures",defaultMessage:"Missing features"})},noLongerNeedAccess:{optionName:"no_longer_need_access",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.noLongerNeedAccess",defaultMessage:"No longer need access to Notion"})},noLongerWorkTogether:{optionName:"no_longer_work_together",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.noLongerWorksHere",defaultMessage:"No longer works here"})},notUsingEnough:{optionName:"not_using_enough",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.notUsingEnough",defaultMessage:"Not using it enough"})},other:{optionName:"other",type:"checkboxAndInput",label:(0,n.jsx)(i().sA,{id:"survey.options.otherFieldLabel",defaultMessage:"Other"})},switching:{optionName:"switching",type:"checkboxAndInput",label:(0,n.jsx)(i().sA,{id:"survey.options.switching",defaultMessage:"Switching to another tool"}),placeholderText:o.switchingToNewTool},switchingToAnotherWorkspace:{optionName:"switching_to_another_workspace",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.switchingToAnotherWorkspace",defaultMessage:"Switching to another Notion workspace"})},tooDifficult:{optionName:"too_difficult",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.tooDifficult",defaultMessage:"Too difficult to use"})},tooExpensive:{optionName:"too_expensive",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.tooExpensive",defaultMessage:"Too expensive"})},upgradedByMistake:{optionName:"upgraded_by_mistake",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.upgradedByMistake",defaultMessage:"Upgraded by mistake"})},usingAnotherAiService:{optionName:"using_another_ai_service",type:"checkboxAndInput",label:(0,n.jsx)(i().sA,{id:"churnSurvey.reasons.usingAnotherAIService",defaultMessage:"Using another AI service"}),placeholderText:o.switchingToNewAiTool},qualityOfResults:{optionName:"quality_of_results",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"churnSurvey.reasons.qualityOfResults",defaultMessage:"Quality of results"})}}},243923:(e,t,s)=>{s.d(t,{A:()=>P});var i=s(296540),n=()=>s(484714),o=()=>s(56366),a=()=>s(401497),r=s(474848);const l=(0,s(340498).wt)("paperAirplane",{viewBox:"0 0 34 34",directional:!0,svg:(0,r.jsx)("path",{d:"M19.6719 32.7188C20.6406 32.7188 21.3125 31.9375 21.8281 30.625L32.2188 3.45312C32.4375 2.875 32.5625 2.375 32.5625 1.9375C32.5625 1.07812 32.0312 0.546875 31.1719 0.546875C30.7344 0.546875 30.2344 0.671875 29.6562 0.890625L2.39062 11.3281C1.20312 11.7812 0.390625 12.4688 0.390625 13.4375C0.390625 14.625 1.26562 15.0781 2.64062 15.4844L14.2344 18.875L17.5938 30.375C18.0156 31.7969 18.4688 32.7188 19.6719 32.7188ZM14.7812 17.0469L3.51562 13.6719C3.0625 13.5469 2.95312 13.4375 2.95312 13.2812C2.95312 13.125 3.0625 13 3.4375 12.8594L26.6562 4.03125C27.6094 3.67188 28.5469 3.20312 29.375 2.82812C28.6094 3.4375 27.5156 4.29688 26.9062 4.90625L14.7812 17.0469ZM19.8281 30.1719C19.6719 30.1719 19.5625 30.0469 19.4375 29.6094L16.0625 18.3438L28.2031 6.20312C28.8125 5.60938 29.6875 4.5 30.3125 3.70312C29.9219 4.54688 29.4531 5.48438 29.0781 6.45312L20.25 29.6719C20.1094 30.0469 20 30.1719 19.8281 30.1719Z"})});var d=()=>s(640479),c=()=>s(413267),u=()=>s(560686),p=()=>s(959013),m=()=>s(381349),g=()=>s(496603),h=()=>s(284371),f=()=>s(278768),S=()=>s(449506),y=()=>s(38337),b=()=>s(898486),x=()=>s(398194),v=()=>s(802790),A=()=>s(297872),w=()=>s(623580),M=()=>s(676007),j=()=>s(125565),k=()=>s(274602),C=()=>s(653027),_=()=>s(318575),I=()=>s(101919);const P=(0,p().j4)((function(e){let{mfaStatus:t,isError:o,samlEnforced:a,isEducationPlan:l,hasPassword:d,intl:c,onReloadSettings:u,email:m}=e;const g=(0,n().v3)(),h=(0,i.useRef)();(0,i.useEffect)((()=>{if("on"===t&&void 0===h.current){const e=new(s(461857).q)(g),t=new(_().r);h.current=new(_().U)(t,e)}}),[g,t]);const S=(0,i.useCallback)((()=>function(e,t,s){"on"===t?x().A.setState({open:!0,verifyIdentity:!0,onCancel:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.exit()}}):(f().d7(e),x().A.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}))}(g,t,h)),[g,t,h]),{device:y}=g;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s(702723).A,{type:"custom",isMobile:y.isMobile,title:(0,r.jsx)(p().sA,{id:"profileSettings.accountSecuritySection.passwordSetting.label",defaultMessage:"Password"}),caption:(0,r.jsx)(D,{hasPassword:d,isError:o,samlEnforced:a,isEducationPlan:l}),customButton:(0,r.jsx)(s(864943).A,{size:"lg",style:{marginTop:12,marginBottom:4},disabled:a,onClick:S,children:d?(0,r.jsx)(p().sA,{id:"passwordSetting.changePasswordButton.label",defaultMessage:"Change password"}):(0,r.jsx)(p().sA,{id:"passwordSetting.setPasswordButton.label",defaultMessage:"Add password"})}),disabled:a}),(0,r.jsx)(J,{hasPassword:d,intl:c,onReloadSettings:u,isEducationPlan:l,email:m,mfaStatus:t,settingsStateMachineRef:h})]})}));function T(e){return{display:e?"inherit":"none",marginTop:10,textAlign:"center",color:m().Ay.red,fontSize:h().J.UISmall.desktop}}function B(){return(0,r.jsx)(p().sA,{id:"passwordSettings.passwordModal.educationPlanGuidelines",defaultMessage:"If you lose access to your school email address, you'll be able to log in using your password."})}function R(e,t){return!e&&t}function D(e){let{isError:t,samlEnforced:s,isEducationPlan:i,hasPassword:n}=e;return t?(0,r.jsx)(p().sA,{id:"passwordSettings.passwordSetError.message",defaultMessage:"Your password cannot be set at this time. Please try again later."}):s?(0,r.jsx)(p().sA,{id:"passwordSettings.passwordManagedThroughSAMLProvider.message",defaultMessage:"Your password is managed through your SAML single sign-on Provider."}):i?(0,r.jsx)(B,{}):n?(0,r.jsx)(p().sA,{id:"passwordSettings.changePassword.message",defaultMessage:"Change your password to login to your account."}):(0,r.jsx)(p().sA,{id:"passwordSettings.setPassword.message",defaultMessage:"Set a permanent password to login to your account."})}function N(e){return{width:27,height:27,fill:e.icon.primary}}function L(e){(x().A.isSetNewPasswordModal()||x().A.isRemovePasswordModal())&&x().A.setState({...x().A.state,oldPassword:e.target.value,alert:void 0})}function O(){(x().A.isSetNewPasswordModal()||x().A.isRemovePasswordModal())&&x().A.setState({...x().A.state,oldPassword:"",alert:void 0})}function F(e){x().A.isSetNewPasswordModal()&&x().A.setState({...x().A.state,password:e.target.value,alert:void 0})}function U(){const{onCancel:e}=x().A.state;x().A.reset(),e&&e()}function E(){x().A.isSetNewPasswordModal()&&x().A.setState({...x().A.state,password:"",repeatPassword:"",alert:void 0})}function G(e){x().A.isSetNewPasswordModal()&&x().A.setState({...x().A.state,repeatPassword:e.target.value,alert:void 0})}function V(){x().A.isSetNewPasswordModal()&&x().A.setState({...x().A.state,repeatPassword:"",alert:void 0})}function z(){x().A.setState({open:!0,removePassword:!0,isSuccess:!1,oldPassword:""})}function K(e){if(x().A.isSetNewPasswordModal()){const{password:t,repeatPassword:s}=x().A.state;t&&s&&t!==s&&x().A.setState({...x().A.state,alert:e.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordMismatchError",defaultMessage:"Your new password does not match."})})}}async function q(e,t,s){if(!x().A.isRemovePasswordModal())return;const{oldPassword:i}=x().A.state;if(f().T8(s),!i)return void x().A.setState({...x().A.state,alert:e.formatMessage({id:"passwordSettings.removePasswordModal.oldPasswordNotEnteredError",defaultMessage:"Please enter your current password."})});const n=await S().callApi({eventName:"setPassword",environment:s,data:{oldPassword:i,clearPassword:!0}});if("success"===n.type)t(),x().A.isRemovePasswordModal()&&x().A.setState({...x().A.state,isSuccess:!0,oldPassword:"",alert:void 0});else{const t=(0,b().Hu)(e,n);x().A.setState({...x().A.state,alert:t||e.formatMessage({id:"passwordSettings.removePasswordModal.message",defaultMessage:"Error removing password. Please try again later."})})}}function W(e){let{isEducationPlan:t}=e;const s=(0,a().DP)(),i=(0,o().K8)((()=>x().A.isPasswordSetModal()),[]),n=(0,o().O$)(x().A);if(!i)return null;const{oldPassword:l}=n,d=void 0===l?(0,r.jsx)(p().sA,{id:"passwordSettings.passwordUpdatedModal.passwordSetSuccessModal.title",defaultMessage:"Your password has been set"}):(0,r.jsx)(p().sA,{id:"passwordSettings.passwordUpdatedModal.passwordUpdatedModal.title",defaultMessage:"Your password has been saved"}),u=t?(0,r.jsx)(p().sA,{id:"passwordSettings.passwordUpdateSuccessModal.educationPlan.header",defaultMessage:"You'll be able to log in, even if you lose access to your school email address."}):(0,r.jsx)(p().sA,{id:"passwordSettings.passwordUpdateSuccessModal.header",defaultMessage:"We'll ask for this password when you log in to your account."});return(0,r.jsx)(k().A,{title:d,header:u,icon:(0,c().b)(N(s)),onDismiss:U})}function H(e){let{isEducationPlan:t,mfaStatus:s,onReloadSettings:i}=e;const d=(0,p().tz)(),c=(0,a().DP)(),u=(0,n().v3)(),m=(0,o().K8)((()=>x().A.isRemovePasswordModal()),[]),g=(0,o().O$)(x().A);if(!m)return null;const{oldPassword:f,alert:S}=g,y=(0,r.jsx)(p().sA,{id:"passwordSettings.removePasswordModal.title",defaultMessage:"Remove password for temporary login codes?"}),b=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p().sA,{id:"passwordSettings.removePasswordModal.header",defaultMessage:"You'll receive a link and login code via email when you try to login."}),t&&(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsx)(p().sA,{id:"passwordSettings.removePasswordModal.educationPlanWarning.message",defaultMessage:"If you lose access to your school email, you'll be unable to log back into Notion."})]}),"on"===s&&(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsx)(p().sA,{id:"passwordSettings.removePasswordModal.removeMfaWarning.message",defaultMessage:"<boldtext>2-step verification will also be removed if you continue.</boldtext>",values:{boldtext:e=>(0,r.jsx)("span",{style:{fontWeight:h().Wy.semibold},children:e})}})]})]}),v={text:(0,r.jsx)(p().sA,{id:"passwordSettings.removePasswordModal.continueButton.label",defaultMessage:"Continue"}),onClick:()=>q(d,i,u),isRed:!0},A=[{text:(0,r.jsx)(p().sA,{id:"passwordSettings.removePasswordModal.keepUsingPasswordButton.label",defaultMessage:"Keep using password"}),onClick:U,type:"button",view:"plain"}];return(0,r.jsxs)(k().A,{title:y,header:b,icon:l(N(c)),onDismiss:U,primaryAction:v,secondaryActions:A,containerStyles:{width:350,padding:24},children:[(0,r.jsx)(I().A,{hasMarginTop:!0,children:(0,r.jsx)(p().sA,{id:"passwordSettings.removePasswordModal.passwordInput.label",defaultMessage:"Enter your current password"})}),(0,r.jsx)(w().A,{type:"password",value:f,onChange:L,showClearButton:!0,onClearButtonClick:O,placeholder:d.formatMessage({id:"passwordSettings.removePasswordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),(0,r.jsx)(j().A,{isMultiline:!0,style:T(S),children:S})]})}function $(){const e=(0,a().DP)();if(!(0,o().K8)((()=>x().A.isRemovePasswordSuccessModal()),[]))return null;const t=(0,r.jsx)(p().sA,{id:"passwordSettings.removePasswordSuccessModal.title",defaultMessage:"Password removed"}),s=(0,r.jsx)(p().sA,{id:"passwordSettings.removePasswordSuccessModal.header",defaultMessage:"To log into your account, we’ll send you a temporary login code to your email."});return(0,r.jsx)(k().A,{title:t,header:s,icon:(0,c().b)(N(e)),onDismiss:U})}async function Y(e,t,s,i){if(!x().A.isSetNewPasswordModal())return;const{oldPassword:n,password:o,repeatPassword:a}=x().A.state;let r;if(t&&!n)r=s.formatMessage({id:"passwordSettings.changePasswordModal.oldPasswordMissingError",defaultMessage:"Please enter your old password."});else if(o){const e=(0,u().ZK)(o);e.success?a?o!==a&&(r=s.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordsMismatchError",defaultMessage:"Your passwords do not match."})):r=s.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordNotRepeatedError",defaultMessage:"Please repeat your new password."}):r=function(e,t){const s=b().K$[e.type];return s?t.formatMessage(s):t.formatMessage({id:"passwordSettings.genericPasswordSaveError",defaultMessage:"Error saving password. Please try again later."})}(e.reason,s)}else r=s.formatMessage({id:"passwordSettings.changePasswordModal.passwordNotEnteredError",defaultMessage:"Please enter a password."});if(r)return void x().A.setState({...x().A.state,alert:r});const l=await S().callApi({eventName:"setPassword",environment:e,data:{oldPassword:n,newPassword:o}});if("success"===l.type)i(),x().A.setState({...x().A.state,isSet:!0});else{const e=(0,b().Hu)(s,l);x().A.setState({...x().A.state,alert:e})}}function Q(e){let{hasPassword:t,intl:s,onReloadSettings:l,isEducationPlan:c,email:u}=e;const m=(0,a().DP)(),g=(0,n().v3)(),h=(0,i.useCallback)((()=>Y(g,t,s,l)),[g,t,s,l]),f=(0,o().K8)((()=>x().A.isSetNewPasswordModal()?x().A.state:null),[]);if(null===f)return null;const{password:S,repeatPassword:y,oldPassword:b,alert:A}=f,M=t?(0,r.jsx)(p().sA,{id:"profileSettings.changePasswordModal.title",defaultMessage:"Change password"}):(0,r.jsx)(p().sA,{id:"profileSettings.setPasswordModal.title",defaultMessage:"Set a password"}),C=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p().sA,{id:"passwordSettings.passwordModal.passwordGuidelines",defaultMessage:"Use a password at least 15 letters long, or at least 8 characters long with both letters and numbers."}),c&&(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsx)(B,{})]})]}),_=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I().A,{children:(0,r.jsx)(p().sA,{id:"passwordSettings.passwordModal.newPasswordInput.label",defaultMessage:"Enter a new password"})}),(0,r.jsx)(w().A,{type:"password",value:S,onChange:F,showClearButton:!0,onClearButtonClick:E,placeholder:s.formatMessage({id:"passwordSettings.passwordModal.newPasswordInput.placeholder",defaultMessage:"New password"}),focusInitial:!t,onBlur:()=>K(s),autoComplete:"new-password"}),(0,r.jsx)(v().A,{size:10,isHidden:!0}),(0,r.jsx)(I().A,{children:(0,r.jsx)(p().sA,{id:"passwordSettings.changePasswordModal.confirmPasswordInput.label",defaultMessage:"Confirm your new password"})}),(0,r.jsx)(w().A,{type:"password",value:y,onChange:G,showClearButton:!0,onClearButtonClick:V,placeholder:s.formatMessage({id:"passwordSettings.passwordModal.confirmPasswordInput.placeholder",defaultMessage:"Confirm password"}),onBlur:()=>K(s),autoComplete:"new-password"})]}),P=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w().A,{style:{display:"none"},type:"text",value:u,autoComplete:"username",disabled:!0}),(0,r.jsx)(I().A,{children:(0,r.jsx)(p().sA,{id:"passwordSettings.passwordModal.currentPasswordInput.label",defaultMessage:"Enter your current password"})}),(0,r.jsx)(w().A,{type:"password",value:b,onChange:L,showClearButton:!0,onClearButtonClick:O,placeholder:s.formatMessage({id:"passwordSettings.passwordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),(0,r.jsx)(v().A,{size:10,isHidden:!0}),_]}),D={text:t?(0,r.jsx)(p().sA,{id:"passwordSettings.passwordModal.changePasswordButton.label",defaultMessage:"Change password"}):(0,r.jsx)(p().sA,{id:"passwordSettings.passwordModal.setPasswordButton.label",defaultMessage:"Set a password"}),onClick:h},q=[{text:(0,r.jsx)(p().sA,{id:"passwordSettings.passwordModal.removePasswordButton.label",defaultMessage:"Remove password"}),onClick:z,type:"button",view:"plain"}];return(0,r.jsxs)(k().A,{title:M,header:C,icon:(0,d().r)(N(m)),onDismiss:U,primaryAction:D,secondaryActions:R(c,t)?q:void 0,containerStyles:{width:350,padding:24},children:[t?P:_,(0,r.jsx)(j().A,{isMultiline:!0,style:T(A),children:A})]})}function X(e){let{settingsStateMachineRef:t}=e;const s=(0,o().K8)((()=>x().A.isVerifyIdentityWithMfaModal()),[]);return(0,i.useEffect)((()=>{s&&void 0!==t.current&&t.current.settingsConfirmIdentityForPasswordSetting()})),s&&void 0!==t.current?(0,r.jsx)(C().A,{settingsStateMachine:t.current,onDismiss:U,onStartSMS:g().lQ,onStartTOTP:g().lQ,onStartBackupCodes:g().lQ}):null}function J(e){let{hasPassword:t,intl:s,onReloadSettings:n,isEducationPlan:a,email:l,mfaStatus:d,settingsStateMachineRef:c}=e;const u=(0,o().K8)((()=>x().A.state.open),[]);return(0,r.jsx)(M().a,{open:u,onDismiss:U,className:y().l0W,preventHideChildrenWhileOpening:!0,render:()=>(0,r.jsx)(A().A,{capture:!0,allowEsc:!0,render:()=>(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(Q,{hasPassword:t,intl:s,onReloadSettings:n,isEducationPlan:a,email:l}),(0,r.jsx)(W,{isEducationPlan:a}),(0,r.jsx)(H,{isEducationPlan:a,mfaStatus:d,onReloadSettings:n}),(0,r.jsx)(X,{settingsStateMachineRef:c}),(0,r.jsx)($,{})]})})})}},278407:(e,t,s)=>{s.d(t,{GH:()=>c,JD:()=>u,Kt:()=>d,Ng:()=>r,k_:()=>l,we:()=>p,xC:()=>m,yF:()=>g});var i=()=>s(2220),n=()=>s(680074),o=()=>s(217429),a=()=>s(10984);function r(e,t){const s=a().AI(),o=n().FX();(0,i().u)({environment:e,event:{eventName:"google_contacts_imports_invite_render_button",eventProperties:{subscription_tier:s,domain_type:o,origin:t.origin,invite_flow_id:t.invite_flow_id}}})}function l(e,t){const s=a().AI(),o=n().FX();(0,i().u)({environment:e,event:{eventName:"google_contacts_imports_invite_render_invite_popup",eventProperties:{subscription_tier:s,domain_type:o,origin:t.origin,invite_flow_id:t.invite_flow_id}}})}function d(e,t){const s=a().AI(),o=n().FX();(0,i().u)({environment:e,event:{eventName:"google_contacts_imports_invite_click_invite_button",eventProperties:{subscription_tier:s,domain_type:o,invited_user_count:t.invited_user_count,origin:t.origin,invite_token_query:t.inviteTokenQuery,invite_targets:t.inviteTargets,invite_flow_id:t.invite_flow_id}}})}function c(e,t){const s=a().AI(),o=n().FX();(0,i().u)({environment:e,event:{eventName:"google_contacts_imports_invite_completed",eventProperties:{subscription_tier:s,domain_type:o,invited_user_count:t.invited_user_count,is_success:t.is_success,origin:t.origin,invite_flow_id:t.invite_flow_id,error:t.error,invite_stage:t.invite_stage}}})}function u(e,t){const s=a().AI(),o=n().FX();(0,i().u)({environment:e,event:{eventName:"google_contacts_imports_invite_dismiss_popup",eventProperties:{subscription_tier:s,domain_type:o,origin:t.origin,invite_flow_id:t.invite_flow_id}}})}function p(e,t){const s=a().AI(),o=n().FX();(0,i().u)({environment:e,event:{eventName:"google_contacts_imports_invite_click_select_all",eventProperties:{subscription_tier:s,domain_type:o,origin:t.origin,invite_flow_id:t.invite_flow_id,invited_user_count:t.invited_user_count,is_unselect:t.is_unselect,invite_token_query:t.invite_token_query}}})}function m(e,t){const s=a().AI(),r=n().FX();(0,i().u)({environment:e,event:{eventName:"google_contacts_imports_invite_start_google_contacts_integration",eventProperties:{subscription_tier:s,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from}}}),o().default.logEvent("google_contacts_imports_invite_start_google_contacts_integration",void 0,{subscription_tier:s,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from})}function g(e,t){const s=a().AI(),r=n().FX();(0,i().u)({environment:e,event:{eventName:"google_contacts_imports_invite_complete_google_contacts_integration",eventProperties:{subscription_tier:s,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success}}}),o().default.logEvent("google_contacts_imports_invite_complete_google_contacts_integration",void 0,{subscription_tier:s,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from})}},280161:(e,t,s)=>{s.d(t,{r:()=>Ne});s(898992),s(354520),s(581454);var i=s(296540),n=()=>s(56366),o=()=>s(401497),a=()=>s(959013),r=()=>s(778078),l=()=>s(284371),d=()=>s(698449),c=()=>s(37433),u=()=>s(605402),p=()=>s(641300),m=()=>s(125565),g=(s(737550),()=>s(484714)),h=()=>s(972435),f=()=>s(722872),S=()=>s(632709),y=()=>s(463830),b=()=>s(848237),x=()=>s(898808),v=()=>s(452558),A=()=>s(493823),w=()=>s(760217),M=()=>s(406699),j=()=>s(419357),k=()=>s(928600),C=()=>s(89924),_=s(474848);const I=(0,a().YK)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForGroupMenu.filterForTeams.placeholder"}});function P(e){const t=(0,g().v3)(),s=(0,o().IS)((()=>({teamMenuItem:{fontWeight:400}})),[]),[r,l]=(0,i.useState)(""),d=(0,i.useCallback)((e=>b().F2({environment:t,teamId:e,tab:S().p.Members,from:"teams_dropdown_for_group"})),[t]),u=(0,n().K8)((()=>[{key:"teams for group",render:e=>(0,_.jsx)(C().A,{...e}),actions:e.teamStores.map((e=>{const t={key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>{var i;return(0,_.jsx)(w().A,{icon:(0,_.jsx)(x().x,{disabled:!0,store:e}),title:(0,_.jsx)(m().A,{style:s.teamMenuItem,children:e.getName()}),right:(0,_.jsx)(a().sA,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsInGroupMenu.filterForTeams.numMembers",values:{numMembers:(null===(i=(0,c().PF)({teamStore:e}))||void 0===i?void 0:i.memberCountWithGuests)??0}}),...t})},action:()=>{d(e.id)},closeParentMenu:!0};return t}))}]),[s,e.teamStores,d]),p=r,y=(0,_.jsx)(v().A,{filter:p,context:{blocks:[],environment:t,publicEditMode:void 0},sections:u,initialFocus:0}),A=(0,_.jsx)(C().A,{isInput:!0,children:(0,_.jsx)(j().Ay,{value:p,onChange:(0,i.useCallback)((e=>{l(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:h().A.formatMessage(I.filterTeams)})}),M={menuType:f().gu.Popup,width:280,maxHeight:"50vh",header:e.teamStores.length>5?A:void 0};return(0,_.jsx)(k().A,{...M,children:y})}const T=function(e){const t=(0,n().uB)(void 0,y().A),r=(0,o().IS)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.text.tertiary},chevron:{width:10,marginLeft:4,fill:e.icon.tertiary}})),[]),l=(0,c().uJ)(),d=(0,i.useMemo)((()=>((null==l?void 0:l.teams)??[]).map((e=>e.store))),[l]),u=(0,c().qQ)(),p=(0,c().D5)(),m=(0,i.useMemo)((()=>p?d:u),[d,u,p]),g=(0,n().K8)((()=>m.filter((t=>t.getRawMembership().some((t=>"group"===t.entity_type&&t.group_id===e.group.group_id))))),[e.group,m]);return(0,_.jsx)(M().Ay,{popupType:M().z7.Popup,renderOrigin:e=>(0,_.jsxs)(A().p,{disabled:0===g.length,style:0===g.length?r.noTeams:r.button,...e,children:[0===g.length?(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCountNone",defaultMessage:"None"}):(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCount",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:g.length}}),g.length>0&&(0,s(668725).b)(r.chevron)]}),buttonPopupStore:t,placementToOrigin:s(700250).UV.Bottom,render:e=>(0,_.jsx)(P,{parent:e,teamStores:g}),onClose:(0,i.useCallback)((()=>{t.reset()}),[t])})};var B=()=>s(30626),R=()=>s(496603),D=()=>s(701763),N=()=>s(901389),L=()=>s(426116),O=()=>s(751156),F=()=>s(510473),U=()=>s(456663),E=()=>s(575143),G=()=>s(285790),V=()=>s(939740),z=()=>s(897119);function K(e){const{group:t,spaceStore:s,settingsStore:i}=e,o=(0,n().uB)(void 0,y().A);return(0,_.jsx)(M().Ay,{popupType:z().nl.Popup,render:()=>(0,_.jsx)(q,{group:t,spaceStore:s,popupStore:o,settingsStore:i}),buttonPopupStore:o,renderOrigin:e=>(0,_.jsx)(G().A,{icon:B()._,...e})})}function q(e){const{group:t,spaceStore:s,popupStore:r,settingsStore:l}=e,d=(0,n().K8)((()=>s.canAdmin()),[s]),u=(0,g().v3)(),p=(0,n().K8)((()=>(0,c().sx)({environment:u,spaceStore:s})),[s,u]),m=(0,o().IS)((e=>({deleteButton:{color:e.redBadgeBackground}})),[]),h=(0,i.useCallback)((async()=>{r.setState({open:!1});const{accept:e}=await N().Gh({message:(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationMessage",defaultMessage:"Are you sure you want to delete this group?"}),description:(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationDescription",defaultMessage:"Any pages that are private to this group will be transferred to you."}),acceptLabel:(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationButton.label",defaultMessage:"Yes"})});if(e){const e=(0,F().E)({spaceStore:s,groupId:t.group_id});await O().createAndCommitAsync({environment:u,userAction:"SpacePermissionGroup.handleDelete",waitForServerCommit:!1,perform:async t=>{await L().c$({environment:u,groupStore:e,transaction:t})}}),D().$N(u)}}),[t,u,s,r]),S=(0,i.useCallback)((()=>{l.setState({...l.state,editingNameGroupId:t.group_id,groupNameInputValue:t.name||""}),r.setState({open:!1}),D().yg(u)}),[t,u,r,l]),y=(0,i.useCallback)((()=>{U().A.setState({...U().A.state,name:t.name||"",defaultInviteTargets:[{type:"group",value:t}]}),b().vn("group_settings")}),[t]),x={key:"action_menu",render:e=>(0,_.jsx)(C().A,{...e}),items:R().oE([{key:"rename",render:e=>(0,_.jsx)(E().A,{...e,title:(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.renameItem",defaultMessage:"Rename"})}),action:S},p?{key:"create_team_from_group",render:e=>(0,_.jsx)(E().A,{...e,title:(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.createTeamFromGroup",defaultMessage:"Create teamspace from group"})}),action:y}:void 0,d&&{key:"delete",render:e=>(0,_.jsx)(E().A,{...e,title:(0,_.jsx)("div",{style:m.deleteButton,children:(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.deleteItem",defaultMessage:"Delete"})})}),action:h}])};return(0,_.jsx)(k().A,{menuType:f().gu.Popup,children:(0,_.jsx)(V().Ay,{type:V().Oh.Vertical,initialFocus:0,sections:[x],onAccept:()=>{r.setState({open:!1})}})})}var W=()=>s(187174),H=()=>s(68263),$=()=>s(798880),Y=()=>s(381349),Q=()=>s(449506);var X=()=>s(646736),J=()=>s(765957),Z=()=>s(630116);class ee extends(()=>s(757695))().Store{getInitialState(){return{userInputValue:"",temporaryUserIds:[],limitUsers:!0}}}const te=ee;var se=()=>s(34293),ie=()=>s(994006),ne=()=>s(764880),oe=()=>s(842599),ae=()=>s(689094),re=()=>s(542056),le=()=>s(106628),de=()=>s(251126),ce=()=>s(64e3),ue=()=>s(204063),pe=()=>s(448693),me=()=>s(856952),ge=()=>s(457688);function he(e){const{group:t,spaceStore:s,groupStore:i,userIds:r,onAddUsers:l}=e,d=(0,n().uB)(void 0,y().A),c=(0,o().IS)((()=>({popup:{width:400},button:{marginTop:4}})),[]);return(0,_.jsx)(M().Ay,{popupType:z().nl.Popup,render:()=>(0,_.jsx)(fe,{spaceStore:s,group:t,userIds:r,popupStore:d,groupStore:i,onAddUsers:l}),buttonPopupStore:d,onClose:()=>i.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),style:c.popup,renderOrigin:e=>(0,_.jsx)("div",{children:(0,_.jsx)(A().p,{isGray:!0,iconLeading:ae().W,style:c.button,...e,children:(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.groupList.addMemberButton.label",defaultMessage:"Add members"})})})})}function fe(e){const t=(0,g().v3)(),s=(0,a().tz)(),{group:o,userIds:r,spaceStore:l,popupStore:d,groupStore:c,onAddUsers:p}=e,m=(0,n().K8)((()=>c.state.temporaryUserIds.map((e=>{const t=l.getRecordValue({table:$().oo,id:e});return(0,_.jsx)(pe().t_,{userValue:t,format:pe().t_.Format.Medium,showRemoveButton:!0,onClickRemove:()=>{const t=c.state.temporaryUserIds.filter((t=>t!==e));c.setState({...c.state,temporaryUserIds:t})},shouldShrink:!0,isSingle:!1,hasPersonHoverCard:!1},e)}))),[l,c]),h=(0,n().K8)((()=>()=>{const{temporaryUserIds:e}=c.state;O().createAndCommit({userAction:"SpacePermissionGroup.handleAddDoneClick",environment:t,canUndo:!0,perform:t=>{for(const s of e){const e=(0,F().A)({spaceStore:l,groupId:o.group_id,userId:s});L().cJ({groupMemberStore:e,spaceId:l.id,groupId:o.group_id,userId:s,transaction:t})}p(e),u().A.setState({...u().A.state,permissionGroupsAndMemberCounts:u().A.state.permissionGroupsAndMemberCounts.map((t=>t.group.group_id===o.group_id?{group:o,memberCount:t.memberCount+e.length}:t))})}}),c.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),d.setState({open:!1}),D().s$(t,{add_member_count:e.length})}),[c,t,d,l,o,p]),S=(0,i.useCallback)((()=>{const{temporaryUserIds:e}=c.state,t=e.slice(0,e.length-1);c.setState({...c.state,temporaryUserIds:t})}),[c]),y=(0,i.useCallback)((async e=>{const s=e.target.value,{extractedEmails:i,newInputValue:n}=(0,oe().Ct)(s),o=(await re().Ah(t,i)).filter((e=>e.value.id&&!c.state.temporaryUserIds.includes(e.value.id)));c.setState({...c.state,temporaryUserIds:[...c.state.temporaryUserIds,...R().oE(o.map((e=>e.value.id)))],userInputValue:n})}),[t,c]),b=(0,n().K8)((()=>c.state.userInputValue),[c]),x=(0,n().K8)((()=>c.state.temporaryUserIds),[c]);return(0,_.jsx)(k().A,{menuType:f().gu.Popup,tokenInputHeader:!0,header:(0,_.jsx)(me().Ay,{focus:!0,disabled:!1,focusAfterAnimation:!0,format:me().le.Group,tokens:m,placeholder:s.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.userSearchInput.placeholder",defaultMessage:"Search for a person…"}),onRemoveLastToken:S,value:b,onChange:y,inputAndTokenWrapRightStyle:{paddingTop:t.device.isMobile?0:6,paddingBottom:t.device.isMobile?0:6},right:(0,_.jsx)(ue().A,{size:"lg",onClick:h,children:(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.addUserButton.label",defaultMessage:"Add"})})}),children:(0,_.jsx)(de().A,{request:{query:b,temporaryUserIds:x},performRequest:async e=>{let{query:s,temporaryUserIds:i}=e;const n=await le().T.searchActions.load();return(await n.searchSpaceUsers({environment:t,query:s,membersOnly:!0,limit:20+i.length+r.length,shouldUseEdgeCacheRollout:!0})).filter((e=>r.indexOf(e.id)<0&&i.indexOf(e.id)<0)).slice(0,20)},render:(e,t)=>(0,_.jsx)(Se,{results:t,spaceStore:l,groupStore:c})})})}function Se(e){const{spaceStore:t,groupStore:s}=e,[i,o]=(0,n().$y)(s,te),r=(e.results||[]).map((e=>{let{id:t}=e;return t})),l=(0,n().K8)((()=>r.map((e=>{const s=Z().LU.createChildStore(t,{table:$().oo,id:e}).getValue(),n={key:e,render:e=>(0,_.jsx)(ge().A,{...e,actor:(0,ne().MR)(s),useEmailAsTooltip:!0}),action:()=>{const t=[...i.temporaryUserIds,e];o({...i,temporaryUserIds:t,userInputValue:""})}};return n}))),[t,o,i,r]);if(0===r.length)return(0,_.jsx)(C().A,{children:(0,_.jsx)(ce().A,{title:(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.searchUserDropdown.noResultsMessage",defaultMessage:"No results"})})});{const e={key:"user_menu",render:e=>(0,_.jsx)(C().A,{...e}),items:l};return(0,_.jsx)(V().Ay,{type:V().Oh.Vertical,initialFocus:0,sections:[e]})}}const ye=10;function be(e){const{group:t,canEdit:s,spaceStore:o,settingsStore:r}=e,l=(0,a().tz)(),c=(0,g().v3)(),u=(0,n().O$)(J().AppStoreCurrentSpaceStore),p=(0,n().uB)(void 0,te),m=(0,n().K8)((()=>p.state.limitUsers&&!r.state.groupsFilter?ye:void 0),[p,r]),[{value:h}]=(0,W().Yb)((async()=>{const e=await Q().callApi({eventName:"getSpacePermissionGroupMembers",environment:c,data:{groupIds:[t.group_id],spaceId:o.id}});if("success"===e.type){var s;const i=(null===(s=e.data.groupUsersMap[t.group_id])||void 0===s?void 0:s.userIds).map((e=>Z().LU.createChildStore(o,{table:$().oo,id:e})));return{allUserStores:(0,d().cp)({userStores:i,spaceStore:u,intl:l})}}}),[u,c,t,l,o]),[f,S]=(0,i.useState)([]);(0,i.useEffect)((()=>{null!=h&&h.allUserStores&&S(h.allUserStores)}),[null==h?void 0:h.allUserStores]);const[y,b]=(0,i.useState)([]);return(0,i.useEffect)((()=>{b(m?f.slice(0,m):f)}),[f,m]),(0,_.jsxs)("div",{style:{padding:"4px 42px 8px"},children:[y.map((t=>(0,_.jsx)(xe,{userStore:t,...e,onRemoveUser:e=>{S(f.filter((t=>t.id!==e))),b(y.filter((t=>t.id!==e)))}},t.id))),m&&f.length>m&&(0,_.jsx)(A().p,{isGray:!0,style:{marginTop:4},onClick:()=>{p.setState({...p.state,limitUsers:!1})},children:(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.showMoreUsersButton.label",defaultMessage:"{numberOfHiddenUsers, plural, one {Show {numberOfHiddenUsers} more} other {Show {numberOfHiddenUsers} more}}",values:{numberOfHiddenUsers:f.length-y.length}})}),s&&u?(0,_.jsx)(he,{group:t,spaceStore:o,groupStore:p,userIds:f.map((e=>e.id))||[],onAddUsers:e=>{const t=e.map((e=>Z().LU.createChildStore(o,{table:$().oo,id:e})));S([...f,...t])}}):y.length<1&&(0,_.jsx)(A().p,{disabled:!0,isGray:!0,children:(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.groupList.noMembersInside",defaultMessage:"No members inside"})})]})}function xe(e){const{spaceStore:t,userStore:s,group:i,canEdit:o,onRemoveUser:r}=e,l=(0,g().v3)(),d=(0,n().K8)((()=>(0,X().dp)(t,s.id).getMembershipTypeAsRoleOrNone()),[t,s]);return(0,_.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,_.jsxs)("div",{style:{display:"flex"},children:[(0,_.jsx)(ie().A,{userStore:s,style:{fontSize:14,fontWeight:400,lineHeight:"17px",paddingRight:6,minHeight:34,width:"100%"},avatarSize:22}),(0,H().EH)(d)&&(0,_.jsx)(se().A,{role:"membership_admin"===d?"membership_admin":"admin"})]}),o&&(0,_.jsx)(A().p,{isGray:!0,hoveredStyle:{color:Y().Ay.red},onClick:async()=>{const{accept:e}=await N().Gh({message:(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationMessage",defaultMessage:"Are you sure you want to remove this member?"}),acceptLabel:(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationButton.label",defaultMessage:"Yes"})});e&&(O().createAndCommit({userAction:"SpacePermissionGroup.removeUser",environment:l,canUndo:!0,perform:e=>{!function(e){const{groupMemberStore:t,transaction:s}=e;O().applyOperation({store:t,operation:{command:"update",pointer:t.pointer,path:[],args:{removed_at:Date.now()}},transaction:s})}({transaction:e,groupMemberStore:(0,F().A)({spaceStore:t,groupId:i.group_id,userId:s.id})}),r(s.id),u().A.setState({...u().A.state,permissionGroupsAndMemberCounts:u().A.state.permissionGroupsAndMemberCounts.map((e=>e.group.group_id===i.group_id?{group:i,memberCount:e.memberCount>=1?e.memberCount-1:0}:e))})}}),D().G8(l))},children:(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupButton.label",defaultMessage:"Remove"})})]},s.id)}var ve=()=>s(662303),Ae=()=>s(464699),we=()=>s(138389),Me=()=>s(945778),je=()=>s(268845),ke=()=>s(437607),Ce=()=>s(403409),_e=()=>s(173783),Ie=()=>s(623580),Pe=()=>s(545805),Te=()=>s(187820),Be=()=>s(859428),Re=()=>s(606273);function De(e){const{row:t,canEdit:s,open:r,toggleOpenState:c,spaceStore:p,settingsStore:h}=e,f=t.group,S=(0,a().tz)(),y=(0,o().DP)(),b=(0,g().v3)(),x=d().Pf({intl:S,groupName:f.name}),v=(0,o().IS)((e=>({container:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%"},toggle:{flexShrink:0,marginRight:2},name:{fontFamily:l().vc(ve().locale).sans,fontSize:14,lineHeight:"17px",marginRight:4},input:{fontWeight:l().Wy.medium,padding:"4px 6px",background:e.contentBackgroundTransparent},icon:{marginRight:9}})),[]),A=(0,i.useCallback)((e=>{const t=Date.now();O().createAndCommit({userAction:"SpacePermissionGroup.handleIconChange",environment:b,canUndo:!0,perform:s=>{L().O1({spacePermissionGroupStore:(0,F().E)({spaceStore:p,groupId:f.group_id}),transaction:s,value:{icon:e,last_edited_at:t}})}});const s={id:(0,ke().T1)({spacePermissionGroupId:f.group_id,spaceId:p.id}),icon:e,name:f.name,group_id:f.group_id,space_id:f.space_id,version:f.getVersion(),created_by_id:f.created_by_id,created_by_table:f.created_by_table,created_at:f.created_at,last_edited_by_id:f.last_edited_by_id,last_edited_at:t,last_edited_by_table:f.last_edited_by_table};u().A.setState({...u().A.state,permissionGroupsAndMemberCounts:u().A.state.permissionGroupsAndMemberCounts.map((e=>e.group.group_id===f.group_id?{group:je().B.fromValue(ke().n,s),memberCount:e.memberCount}:e))}),D().Nn(b,{is_emoji:(0,Me().A)(e)})}),[f,p,b]),w=(0,i.useCallback)((()=>{h.setState({...h.state,editingNameGroupId:void 0,groupNameInputValue:""})}),[h]),M=(0,i.useCallback)((e=>{h.setState({...h.state,groupNameInputValue:e.target.value})}),[h]),j=(0,i.useCallback)((()=>{const{editingNameGroupId:e,groupNameInputValue:t}=h.state,s=t.trim(),i=Date.now();if(e===f.group_id){if(s!==f.name){const e=(0,F().E)({spaceStore:p,groupId:f.group_id});O().createAndCommit({userAction:"SpacePermissionGroup.handleNameAccept",environment:b,canUndo:!0,perform:t=>{L().O1({spacePermissionGroupStore:e,value:{name:s,last_edited_at:i},transaction:t})}})}const e={id:(0,ke().T1)({spacePermissionGroupId:f.group_id,spaceId:p.id}),icon:f.icon,name:s,group_id:f.group_id,space_id:f.space_id,version:f.getVersion(),created_by_id:f.created_by_id,created_by_table:f.created_by_table,created_at:f.created_at,last_edited_by_id:f.last_edited_by_id,last_edited_at:i,last_edited_by_table:f.last_edited_by_table};u().A.setState({...u().A.state,permissionGroupsAndMemberCounts:u().A.state.permissionGroupsAndMemberCounts.map((t=>t.group.group_id===f.group_id?{group:je().B.fromValue(ke().n,e),memberCount:t.memberCount}:t))}),h.setState({...h.state,editingNameGroupId:void 0,groupNameInputValue:""})}}),[f,b,p,h]),k=(0,n().K8)((()=>h.state.editingNameGroupId===f.group_id),[f,h]),C=(0,n().K8)((()=>h.state.groupNameInputValue),[h]);function I(e){const t={width:e-4,height:e-4,fill:y.icon.secondary},s={width:12,height:12,fill:y.icon.secondary};return(0,_.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,we().X)(t),(0,Ae().b)(s)]})}return(0,_.jsxs)("div",{style:v.container,children:[(0,_.jsx)(Re().f,{isSidebar:!1,fill:!0,icon:"chevron",open:r,color:y.icon.secondary,onClick:()=>c(f.group_id),style:v.toggle}),(0,_.jsx)(_e().A,{size:28,style:v.icon}),k?(0,_.jsx)(Pe().A,{debugName:"GroupNameToggle",capture:!0,onEsc:w,children:(0,_.jsx)(Ie().A,{disabled:!s,type:Ce().e.Inline,style:v.input,placeholder:S.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.groupNameInput.placeholder",defaultMessage:"Untitled"}),focus:!0,value:C,onChange:M,onBlur:j,onSubmit:j})}):(0,_.jsx)(m().A,{style:v.name,showTooltipWhenTruncated:!0,children:x}),(P=t.isRowHovered,f.icon?s?(0,_.jsx)(Te().B6,{disabled:!1,bucket:"public",icon:f.icon?{pointer:p.pointer,icon:f.icon}:void 0,size:18,isEmptyPage:!1,title:x,onChange:A,style:v.icon}):(0,_.jsx)(Te().B6,{disabled:!0,bucket:"public",icon:f.icon?{pointer:p.pointer,icon:f.icon}:void 0,size:18,isEmptyPage:!1,title:x,style:v.icon}):P&&s?(0,_.jsx)(Be().A,{renderTooltip:()=>(0,_.jsx)(a().sA,{defaultMessage:"Add icon",id:"spacePermissionsSettings.groupsTab.userGroup.groupIcon.tooltip"}),render:e=>(0,_.jsx)(Te().B6,{disabled:!1,bucket:"public",icon:f.icon?{pointer:p.pointer,icon:f.icon}:void 0,size:18,isEmptyPage:!1,title:x,onChange:A,style:{...v.icon,width:30},defaultIcon:I(18),...e})}):void 0)]});var P}function Ne(e){let{canEdit:t,spaceStore:s,permissionsSettingsStore:d,containerMarginTop:g}=e;const[h,f]=(0,i.useState)([]),S=(0,o().DP)(),y=(0,n().K8)((()=>u().A.state.permissionGroupsAndMemberCounts.map((e=>e.group))),[]),b=(0,n().K8)((()=>0!==(0,c().zI)()),[]),x=(0,n().K8)((()=>(0,r().Ay)(d.state.groupsFilter,y,(e=>e.name||""))),[d,y]),v=(0,i.useCallback)((e=>{f((t=>t.includes(e)?t.filter((t=>t!==e)):t.concat(e)))}),[f]),A=(0,i.useMemo)((()=>function(e){return e.map((e=>({id:e.group_id,group:e,isClickable:!1})))}(x)),[x]),w=(0,i.useMemo)((()=>function(e){let{openRowIds:t,toggleOpenRowId:s,canEdit:i,showTeamsColumn:n,spaceStore:o,settingsStore:r}=e;const d={id:"title",headerTitle:(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.groups",defaultMessage:"Group"}),renderCell:e=>(0,_.jsx)(De,{row:e,open:t.includes(e.id),toggleOpenState:s,canEdit:i,spaceStore:o,settingsStore:r}),widthData:{width:120},hasClickableContents:!1,sortable:!1},c={id:"teams",headerTitle:(0,_.jsx)("div",{style:{paddingLeft:8},children:(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.teams",defaultMessage:"Teamspaces"})}),renderCell:e=>(0,_.jsx)("div",{style:l().RC,children:(0,_.jsx)(T,{group:e.group})}),widthData:{width:40},hasClickableContents:!1,sortable:!1},u={id:"members",headerTitle:(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.member",defaultMessage:"Members"}),renderCell:e=>(0,_.jsx)(Le,{row:e}),widthData:{width:40},hasClickableContents:!1,sortable:!1},p={id:"menu",headerTitle:null,renderCell:e=>(0,_.jsx)(K,{group:e.group,spaceStore:o,settingsStore:r}),widthData:{width:20},hasClickableContents:!0,sortable:!1};return[d,...n?[c]:[],u,...i?[p]:[]]}({openRowIds:h,toggleOpenRowId:v,canEdit:t,showTeamsColumn:b,spaceStore:s,settingsStore:d})),[h,v,t,b,s,d]),M=(0,p().rC)({columnRenderInfo:w,theme:S,containerMarginTop:g}),j=(0,o().IS)((e=>({noRowContainer:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",gap:4,borderBottom:`1px solid ${e.stroke.primary}`}})),[]);return(0,_.jsx)(p().WE,{showRowBorders:!0,hideHeaderRowPadding:!0,columnRenderInfo:w,rows:A,styles:M,renderNoRowsComponent:()=>(0,_.jsx)(m().A,{isSmall:!0,style:j.noRowContainer,children:y.length>0?(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.noGroupsFound",defaultMessage:"No groups found"}):(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.noGroups",defaultMessage:"No groups"})}),renderRowChild:e=>h.includes(e.id)?(0,_.jsx)(be,{group:e.group,canEdit:t,spaceStore:s,settingsStore:d}):void 0})}function Le(e){const{row:t}=e,s=(0,n().K8)((()=>(0,d().xQ)({groupId:t.group.group_id})),[t.group]);return(0,_.jsx)("div",{style:l().RC,children:(0,_.jsx)(a().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:s}})})}},289251:(e,t,s)=>{s.d(t,{A:()=>y});var i=s(296540),n=()=>s(662303),o=()=>s(484714),a=()=>s(56366),r=()=>s(869190),l=()=>s(736501),d=()=>s(842599),c=()=>s(959013),u=()=>s(449506),p=()=>s(962730),m=()=>s(765957),g=()=>s(378765),h=()=>s(859428),f=()=>s(702723),S=s(474848);const y=function(e){let{emailDomainSettings:t}=e;const n=(0,o().v3)(),r=(0,a().uB)(void 0,s(40851).A),d=(0,i.useCallback)(((e,s,i)=>(0,S.jsx)(M,{emailDomainSettings:t,requestStore:r,error:e,result:s,ready:i})),[t,r]),c=(0,s(124749).$)();return c?(0,S.jsx)(s(251126).A,{requestStore:r,request:{userId:c.id,expiryTime:Date.now()+l().f},performRequest:e=>async function(e,t){const s=await u().callApi({eventName:"getDataAccessConsent",environment:t,data:{}});if("failed"===s.type)throw s.error;return s.data}(0,n),render:d}):null};function b(e){return Boolean(e.prevent_granting_support_access)}function x(e){const t=(0,o().v3)(),{accessGranted:s,onClick:i,expiryTime:a,emailDomainSettings:l}=e,{device:d}=t;return(0,S.jsx)(f().A,{disabled:b(l),isMobile:d.isMobile,title:(0,S.jsx)(c().sA,{id:"personalSettings.supportSection.userDataConsentSettings.label",defaultMessage:"Support access"}),caption:s&&a?(0,S.jsx)(c().sA,{id:"userDataConsentSettings.accessGranted.label",defaultMessage:"You have granted Notion access to your account for support purposes until {expiryTime}.",values:{expiryTime:(0,r().W_)(a,"medium_with_time",n().locale)}}):(0,S.jsx)(c().sA,{id:"personalSettings.supportSection.userDataConsentSettings.message",defaultMessage:"Grant Notion support temporary access to your account so we can troubleshoot problems or recover content on your behalf. You can revoke access at any time."}),type:"toggle",isOn:s,onToggle:i})}function v(e){const{accessGranted:t,onClick:s,expiryTime:i,emailDomainSettings:n}=e,o=(0,a().K8)((()=>{var e;const t=null===(e=m().default.state.currentUserStore)||void 0===e?void 0:e.getEmail();return t?(0,d().zN)(t):void 0}),[]);return(0,S.jsx)(h().A,{disableTooltip:!b(n),renderTooltip:()=>(0,S.jsx)(c().sA,{id:"userDataConsentSetting.disabledByOrganization",defaultMessage:"Granting support access has been disabled by your organization, {emailDomain}",values:{emailDomain:o}}),placement:p().W.Bottom,alignment:p().C.Center,render:e=>(0,S.jsx)("div",{...e,children:(0,S.jsx)(x,{emailDomainSettings:n,accessGranted:t,onClick:s,expiryTime:i})})})}async function A(e,t,s){const i=await u().callApi({eventName:"setDataAccessConsent",environment:t,data:e});if("success"===i.type&&i.data){const e=s.state;s.setState({...e,result:i.data})}}function w(e){let{emailDomainSettings:t,requestStore:s}=e;const n=(0,o().v3)(),r=(0,i.useCallback)((()=>async function(e,t,s){b(t)||await A({expiryTime:Date.now()+l().f},e,s)}(n,t,s)),[n,t,s]),d=(0,i.useCallback)((()=>async function(e,t,s){b(t)||await A({},e,s)}(n,t,s)),[n,t,s]),c=(0,a().K8)((()=>{var e;return null===(e=s.state.result)||void 0===e?void 0:e.expiryTime}),[s]),u=Boolean(c&&Number(c)>Date.now()),p=u?d:r;return(0,S.jsx)(v,{emailDomainSettings:t,accessGranted:u,onClick:p,expiryTime:c})}function M(e){let{error:t,result:s,ready:i,emailDomainSettings:n,requestStore:o}=e;const a=(0,c().tz)();return(0,S.jsx)(g().A,{loaded:i,spinnerSize:"sm",showSpinnerTimeout:600,children:t||!s?(0,S.jsx)("div",{children:a.formatMessage({id:"userDataConsent.render.error",defaultMessage:"Something went wrong"})}):(0,S.jsx)(w,{emailDomainSettings:n,requestStore:o})})}},293901:(e,t,s)=>{s.r(t),s.d(t,{googleIcon:()=>o,iconDefinition:()=>n});s(296540);var i=s(474848);const n={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_2234_44729)",children:[(0,i.jsx)("path",{fill:"#4285F4",d:"M18.64 10.205q-.002-.958-.164-1.841H10v3.481h4.844a4.14 4.14 0 0 1-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615"}),(0,i.jsx)("path",{fill:"#34A853",d:"M10 19c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H1.957v2.332A9 9 0 0 0 10 19"}),(0,i.jsx)("path",{fill:"#FBBC04",d:"M4.964 11.71A5.4 5.4 0 0 1 4.682 10c0-.593.102-1.17.282-1.71V5.958H1.957A9 9 0 0 0 1 10c0 1.452.348 2.827.957 4.042z"}),(0,i.jsx)("path",{fill:"#E94235",d:"M10 4.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C14.463 1.891 12.426.999 10 .999a9 9 0 0 0-8.043 4.958L4.964 8.29C5.672 6.163 7.656 4.58 10 4.58"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_2234_44729",children:(0,i.jsx)("path",{fill:"#fff",d:"M1 1h18v18H1z"})})})]})},o=(0,s(340498).wt)("google",n)},304067:(e,t,s)=>{s.d(t,{G:()=>g});s(296540);var i=()=>s(687681),n=()=>s(959013),o=()=>s(496603),a=()=>s(252105),r=()=>s(231127),l=()=>s(7674),d=()=>s(107683),c=()=>s(49210),u=()=>s(775471),p=()=>s(841101),m=s(474848);async function g(e){const{environment:t,contractionSurveyId:s}=e;a().u4(t,{name:"contraction_survey_opened",args:{contractionSurveyId:s}});const o=await async function(e){const{iconGroup:t,options:s,title:i,description:o}=e;return await c().T.showAsyncModal((e=>{const a=new(p().a);return a.setOptions(s),(0,m.jsx)(d().s,{isOpen:e.isOpen,onDismiss:e.onDismiss,onClosed:e.onClosed,areaConstraint:{width:{type:"min",length:406},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,m.jsx)(l().tf,{header:(0,m.jsx)(l().YA,{iconAndTitle:(0,m.jsx)("div",{style:{padding:"0 24px"},children:(0,m.jsx)(l().ZQ,{iconGroup:t,title:i})}),description:o}),footer:(0,m.jsx)(l().aO,{layout:"vertical",primaryButtons:[{label:(0,m.jsx)(n().sA,{id:"contractionSurvey.continue",defaultMessage:"Continue"}),onClick:()=>e.resolve(a.toSurveyResult())}],secondaryButtons:[{buttonType:"dismiss"}]}),children:(0,m.jsx)(u().B,{store:a})})})}))}({iconGroup:i().u,title:(0,m.jsx)(n().sA,{id:"contractionSurvey.title",defaultMessage:"Why are you removing this member from your workspace?"}),description:(0,m.jsx)(n().sA,{id:"contractionSurvey.description",defaultMessage:"We'd love your input to make Notion better"}),options:h()});return o?a().u4(t,{name:"contraction_survey_completed",args:{contraction_survey_id:s,reasons:o.reasons,reason_indexes:o.reasonIndexes,reason_other:o.customTextByReason.other}}):a().u4(t,{name:"contraction_survey_dismissed",args:{contractionSurveyId:s}}),o}function h(){return[...(0,o().k4)([r().V.noLongerNeedAccess,r().V.noLongerWorkTogether,r().V.notUsingEnough,r().V.switching,r().V.switchingToAnotherWorkspace,r().V.tooExpensive]),r().V.other]}},318575:(e,t,s)=>{s.d(t,{U:()=>d,r:()=>l});s(898992),s(354520),s(672577);var i=()=>s(821062),n=()=>s(534177),o=()=>s(398194),a=()=>s(478525);const r={settingsVerifyWithPassword:a().xc.incorrectPassword,settingsVerifyWithSMS:a().xc.smsIncorrectCode,settingsVerifyWithTOTP:a().xc.totpIncorrectCode,settingsVerifyWithBackupCode:a().xc.backupCodeIncorrectCode};class l extends(()=>s(757695))().Store{getInitialState(){return{step:"settingsUninitialized"}}}class d extends(()=>s(658921))()._{constructor(e,t){super(e,"settings"),this.service=void 0,this.service=t}settingsConfirmIdentityForPasswordSetting(){this.checkStep("settingsUninitialized")&&(this.store.setState({step:"settingsConfirmIdentity",source:"passwordSetting"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsConfirmIdentityForSettings(){this.checkStep(["settingsUninitialized","settingsDeleteSettings","settingsDisableMFA"])&&(this.store.setState({step:"settingsConfirmIdentity",source:"settings"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsVerifyPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithPassword(e).catch(this.handleUnexpectedError))}settingsForgotPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isForgotPasswordLoading:!0}),this.doForgotPassword(e).catch(this.handleUnexpectedError))}settingsChooseVerifyMethod(e){const t=this.checkStep("settingsVerifyChooseMFAMethod");if(!t)return;const s=e.mfaMethod;switch(s){case"sms":this.store.setState({...t,isSMSLoading:!0,chosenMfaSettingId:e.mfaSettingId}),this.doVerifyIdentitySendSMS({mfaSetting:e});break;case"totp":this.store.setState({mfaSetting:e,step:"settingsVerifyWithTOTP",isLoading:!1,source:t.source});break;case"backup_code":this.store.setState({step:"settingsVerifyWithBackupCode",isLoading:!1,source:t.source});break;default:(0,n().HB)(s)}}settingsTryAnotherMethod(){this.checkStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"])&&this.doTryAnotherMethod().catch(this.handleUnexpectedError)}settingsVerifyTOTP(e){const t=this.checkStep("settingsVerifyWithTOTP");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithTOTP(e).catch(this.handleUnexpectedError))}settingsVerifySMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithSMS(e).catch(this.handleUnexpectedError))}settingsVerifyResendSMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,resentStatus:"resending"}),this.doVerifyIdentityResendSMS(e).catch(this.handleUnexpectedError))}settingsVerifyBackupCode(e){const t=this.checkStep("settingsVerifyWithBackupCode");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithBackupCode({code:e}).catch(this.handleUnexpectedError))}settingsShow(e){const{refresh:t}=e,s=this.getCurrentStep();if("settingsUninitialized"===s.step)return this.settingsConfirmIdentityForSettings();t&&("settingsShowSettings"===s.step||"settingsInitialSetup"===s.step)&&(this.store.setState({step:"settingsLoadSettings"}),this.doLoadSettings().catch(this.handleUnexpectedError))}settingsUpdate(e){this.checkStep("settingsShowSettings")&&this.doUpdateSettings(e).catch(this.handleUnexpectedError)}passkeySettingsShow(){this.store.setState({step:"settingsPasskeyLoadSettings"}),this.doLoadPasskeySettings({nameNewSetting:!1}).catch(this.handleUnexpectedError)}settingsPasskeyAddSetting(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromNudge:!1};const{fromNudge:s}=t;(s||this.checkStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"]))&&this.doCreatePasskeySetting(e,{fromNudge:s}).catch(this.handleUnexpectedError)}settingsPasskeyRenameSetting(e){this.checkStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"])&&this.doRenamePasskeySetting(e).catch(this.handleUnexpectedError)}settingsDeletePasskeySetting(){const e=this.checkStep("settingsDeletePasskeySetting");e&&this.doDeletePasskeySetting({passkeyAuthenticatorId:e.passkeyAuthenticatorIdToDelete}).catch(this.handleUnexpectedError)}settingsConfirmDeletePasskeySetting(e){const t=this.checkStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"]);t&&this.store.setState({passkeys:t.passkeys,step:"settingsDeletePasskeySetting",passkeyAuthenticatorIdToDelete:e.passkeyAuthenticatorId})}settingsConfirmDelete(e){const t=this.checkStep("settingsShowSettings");if(!t)return;t.mfaSettings.find((t=>t.mfaSettingId===e.mfaSettingId));const s=t.mfaSettings.filter((e=>"totp"===e.mfaMethod||"sms"===e.mfaMethod));1===s.length?this.store.setState({step:"settingsDisableMFA",lastMFASetting:e}):this.store.setState({step:"settingsDeleteSettings",mfaSettings:t.mfaSettings,mfaSettingToDelete:e,isLoading:!1})}settingsDelete(){const e=this.checkStep("settingsDeleteSettings");e&&(this.store.setState({...e,isLoading:!0}),this.doDeleteSettings(e.mfaSettingToDelete.mfaSettingId).catch(this.handleUnexpectedError))}settingsConfirmDisableMFA(){this.checkStep("settingsShowSettings")&&this.store.setState({step:"settingsDisableMFA"})}settingsDisableMFA(){const e=this.checkStep("settingsDisableMFA");e&&(this.store.setState({step:"settingsConfirmIdentity",source:"disableMFA",lastMFASetting:e.lastMFASetting}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}exit(){this.store.setState({step:"settingsUninitialized"})}async doConfirmIdentity(){const e=await this.withStep("settingsConfirmIdentity",(()=>this.service.confirmIdentity()));if(!e)return;const{result:t,state:s}=e,i=t.status;switch(i){case"ready":this.store.setState({step:"settingsIdentityConfirmed",source:s.source});const e=s.source;"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(o().A.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,n().HB)(e);break;case"mfa":this.store.setState({step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings,source:s.source});break;case"password":this.store.setState({step:"settingsVerifyWithPassword",isLoading:!1,isForgotPasswordLoading:!1,source:"settings"});break;default:throw(0,n().HB)(i)}}async doForgotPassword(e){if(!e)return void this.store.setState({step:"settingsVerifyWithPassword",source:"settings",isLoading:!1,isForgotPasswordLoading:!1,error:a().xc.unexpectedError});const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.sendTemporaryPassword({email:e})));if(!t)return;const{result:s,state:i}=t;switch(s.status){case"ok":this.store.setState({...i,isForgotPasswordLoading:!1,alert:a().By.passwordResentLinkSent(e)});break;case"error":this.store.setState({...i,isForgotPasswordLoading:!1,error:a().xc.unexpectedError});break;default:return(0,n().HB)(s.status)}}async doVerifyIdentityWithPassword(e){const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.verifyIdentityWithPassword({password:e})));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityWithTOTP(e){const t=await this.withStep("settingsVerifyWithTOTP",(()=>this.service.verifyIdentityWithTOTP(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityWithSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.verifyIdentityWithSMS(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityResendSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.sendSMS({mfaSettingId:e})));if(!t)return;const{result:s,state:i}=t;switch(s.status){case"ok":this.store.setState({...i,isLoading:!1,resentStatus:"resent",resentAt:Date.now()});break;case"error":this.store.setState({...i,resentStatus:"not-resent",error:a().xc.unexpectedError});break;default:return(0,n().HB)(s.status)}}async doVerifyIdentityWithBackupCode(e){const t=await this.withStep("settingsVerifyWithBackupCode",(()=>this.service.verifyBackupCode(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async handleVerifyIdentityResponse(e){const{status:t,state:s}=e;switch(t){case"match":const e=s.source;this.store.setState({step:"settingsIdentityConfirmed",source:s.source}),"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(o().A.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,n().HB)(e);break;case"incorrect":this.store.setState({...s,isLoading:!1,error:r[s.step]});break;case"error":this.store.setState({...s,isLoading:!1,error:a().xc.unexpectedError});break;default:return(0,n().HB)(t)}}async doTryAnotherMethod(){const e=await this.withStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e;t.settings.length>0?this.store.setState({...s,step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings}):this.store.setState({...s,error:a().xc.unexpectedError})}async doLoadSettings(){const e=await this.withStep(["settingsLoadSettings","settingsIdentityConfirmed"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e,i=s.step;switch(i){case"settingsIdentityConfirmed":case"settingsLoadSettings":t.settings.length>0?this.store.setState({step:"settingsShowSettings",mfaSettings:t.settings}):this.store.setState({step:"settingsInitialSetup"});break;default:return(0,n().HB)(i)}}async doVerifyIdentitySendSMS(e){const{mfaSetting:t}=e,s=await this.withStep("settingsVerifyChooseMFAMethod",(()=>this.service.sendSMS({mfaSettingId:t.mfaSettingId})));if(!s)return;const{result:i,state:o}=s;switch(i.status){case"ok":this.store.setState({mfaSetting:t,step:"settingsVerifyWithSMS",isLoading:!1,resentAt:0,resentStatus:"not-resent",source:o.source});break;case"error":break;default:return(0,n().HB)(i.status)}}async doUpdateSettings(e){const{mfaMethod:t,mfaSettingId:s}=e;if("totp"!==t)return;const n=await this.withStep("settingsShowSettings",(()=>this.service.renameSettings({mfaSettingId:s,friendlyName:e.friendlyName})));if(!n)return;const{result:o,state:r}=n;"saved"===o.status?o.settings.length>0&&!(0,i().A)(o,r.mfaSettings)?this.store.setState({step:"settingsShowSettings",mfaSettings:o.settings}):this.store.setState({...r,error:void 0}):this.store.setState({...r,error:"duplicate"===o.status?a().xc.totpDuplicateFriendlyName:"bad_friendly_name"===o.status?a().xc.totpBadFriendlyName:a().xc.totpEmptyFriendlyName})}async doLoadPasskeySettings(e){let{nameNewSetting:t=!1}=e;const s=await this.withStep(["settingsPasskeyLoadSettings","settingsPasskeyShowSettings","settingsPasskeyNameNewSetting","settingsUninitialized"],(()=>this.service.loadPasskeySettings()));if(!s)return;const{result:i,state:n}=s;this.store.setState({...n,step:t?"settingsPasskeyNameNewSetting":"settingsPasskeyShowSettings",passkeys:i.settings})}async doCreatePasskeySetting(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromNudge:!1};const{fromNudge:s}=t,i=await this.withStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting","settingsUninitialized"],(()=>this.service.createPasskeySetting(e)));if(!i)return;const{result:n,state:o}=i;!0===n.created?s||await this.doLoadPasskeySettings({nameNewSetting:!0}):this.store.setState({...o,error:a().xc.unableToSavePasskey})}async doRenamePasskeySetting(e){const{passkeyAuthenticatorId:t,name:s}=e,n=await this.withStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"],(()=>this.service.renamePasskeySetting({passkeyAuthenticatorId:t,name:s})));if(!n)return;const{result:o,state:a}=n;o.settings.length>0&&!(0,i().A)(o.settings,a.passkeys)?this.store.setState({step:"settingsPasskeyShowSettings",passkeys:o.settings}):this.store.setState({...a,error:void 0})}async doDeletePasskeySetting(e){const t=await this.withStep("settingsDeletePasskeySetting",(()=>this.service.deletePasskeySetting(e)));if(!t)return;const{result:s,state:n}=t;s.settings.length>=0&&!(0,i().A)(s.settings,n.passkeys)?this.store.setState({step:"settingsPasskeyShowSettings",passkeys:s.settings}):this.store.setState({...n,error:void 0})}async doDisableMFA(){const e=await this.withStep("settingsIdentityConfirmed",(()=>this.service.disableMFA()));if(!e)return;const{result:t}=e;switch(t.status){case"ok":case"error":break;default:return(0,n().HB)(t.status)}}async doDeleteSettings(e){const t=await this.withStep("settingsDeleteSettings",(()=>this.service.deleteSettings(e)));if(!t)return;const{result:s}=t;this.store.setState({step:"settingsShowSettings",mfaSettings:s.settings})}}},328716:(e,t,s)=>{s.d(t,{n:()=>i});const i=(0,s(340498).xh)("office365",{default:{loader:()=>s.e(59287).then(s.bind(s,849050))},darkMode:{loader:()=>s.e(59287).then(s.bind(s,450770))}})},332381:(e,t,s)=>{s.d(t,{L:()=>M});var i=s(296540),n=()=>s(484714),o=()=>s(56366),a=()=>s(842599),r=()=>s(576250),l=()=>s(959013),d=()=>s(534177),c=()=>s(848259),u=()=>s(449506),p=()=>s(874913),m=()=>s(246826),g=()=>s(755636),h=()=>s(72234),f=()=>s(751156),S=()=>s(144114),y=()=>s(765957),b=()=>s(864943),x=()=>s(347306),v=()=>s(963550),A=()=>s(702723),w=s(474848);function M(e){let{target:t}=e;const s=(0,n().v3)(),{desktopAppId:M}=(0,n().Y0)(),j=(0,o().O$)(y().AppStoreCurrentSpaceViewStore),k=(0,o().K8)((()=>{var e,s,i,n;switch(t){case"notify_mobile":case"notify_desktop":case"notify_email":case"notify_email_always":return(null==j||null===(e=j.getKeyStore(t))||void 0===e?void 0:e.getValue())||!1;case"notify_email_digest":return(null==j||null===(s=j.getSettingsStore())||void 0===s||null===(s=s.getKeyStore(t))||void 0===s?void 0:s.getValue())||!1;case"disable_ai_meeting_notes_audio_process_detection_notification":return(null==j?void 0:j.isAiMeetingNotesAudioProcessDetectionNotificationEnabled())??!0;case"notify_home_digest_email":return(null==j||null===(i=j.getSettingsStore())||void 0===i||null===(i=i.getKeyStore(t))||void 0===i?void 0:i.getValue())??(null==j||null===(n=j.getSettingsStore())||void 0===n||null===(n=n.getKeyStore("notify_email_digest"))||void 0===n?void 0:n.getValue())??!1;case"marketing_emails":case"notify_slack":case"desktop_badge":case"notify_slack_mention":case"notify_slack_all_activity":return!1;default:(0,d().HB)(t)}}),[j,t]),C=(0,i.useCallback)((()=>{if(j){const e=!k;"notify_email_digest"===t?h().T$({environment:s,newValue:e}):"notify_home_digest_email"===t?h().gI(s,e):"disable_ai_meeting_notes_audio_process_detection_notification"===t?h().AC(s,!e):f().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:s,canUndo:!0,perform:s=>{m().zv({store:j,data:{[t]:e},transaction:s})}}),"notify_slack"!==t&&"marketing_emails"!==t&&"desktop_badge"!==t&&"disable_ai_meeting_notes_audio_process_detection_notification"!==t&&c().DN(s,{is_on:e,target:t})}}),[j,k,t,s]),_=async()=>{const e=await u().callApi({eventName:"getAuthorizedEmailPreferenceCenterLink",environment:s,data:{}});if(e&&"success"===e.type&&e.data.preferenceCenterLink)return c().iE(s),g().f({environment:s,url:e.data.preferenceCenterLink});{const e=await(0,S().k_)(s),t=(0,a().j5)(e);return c().iE(s),g().f({environment:s,url:t})}},I=()=>{var e;null!==(e=p().electronApi)&&void 0!==e&&e.openExternalUrl&&p().electronApi.openExternalUrl(`x-apple.systempreferences:com.apple.preference.notifications?id=${M}`)};return"marketing_emails"===t?(0,w.jsx)(A().A,{type:"custom",isMobile:!0,title:(0,w.jsx)(v().A,{target:t}),caption:(0,w.jsx)(x().A,{target:t}),customButton:(0,w.jsx)(b().A,{size:"lg",onClick:_,iconLeading:r().y,children:(0,w.jsx)(l().sA,{id:"notificationSettings.marketingEmails.manageSettingsButton",defaultMessage:"Manage settings"})}),disableSettingsItemClick:!0}):"desktop_badge"===t?(0,w.jsx)(A().A,{type:"custom",isMobile:!0,title:(0,w.jsx)(v().A,{target:t}),caption:(0,w.jsx)(x().A,{target:t}),customButton:(0,w.jsx)(b().A,{size:"lg",onClick:I,iconLeading:r().y,children:(0,w.jsx)(l().sA,{id:"notificationSettings.desktopBadge.manageSettingsButton",defaultMessage:"Manage in System Settings"})}),disableSettingsItemClick:!0}):(0,w.jsx)(A().A,{isMobile:!0,title:(0,w.jsx)(v().A,{target:t}),caption:(0,w.jsx)(x().A,{target:t}),type:"toggle",isOn:k,onToggle:C})}},334711:(e,t,s)=>{s.d(t,{$:()=>i,U:()=>n});s(944114);class i extends(()=>s(757695))().Store{getInitialState(){return{step:"totpUninitialized"}}}class n extends(()=>s(658921))()._{constructor(e,t){super(e,"totp"),this.service=void 0,this.service=t}totpStart(){this.checkStep("totpUninitialized")&&(this.store.setState({step:"totpLoadingQRCode"}),this.doCreateTOTP().catch(this.handleUnexpectedError))}totpVerifyCode(e){const{friendlyName:t,code:s,onVerified:i}=e;this.doRenameTOTPAndVerifyCode({friendlyName:t,code:s,onVerified:i}).catch(this.handleUnexpectedError)}totpBackupCodesComplete(){this.checkStep("totpBackupCodesLoading")&&this.store.setState({step:"totpVerified"})}totpComplete(){this.checkStep("totpVerified")&&this.store.setState({step:"totpComplete"})}exit(){this.store.setState({step:"totpUninitialized"})}async doCreateTOTP(){const e=await this.withStep("totpLoadingQRCode",(()=>this.service.createTOTP()));if(!e)return;const{result:t}=e;this.store.setState({step:"totpVerifyCode",qrCode:t.qrCode,rawString:t.secret,mfaSettingId:t.mfaSettingId})}async doRenameTOTPAndVerifyCode(e){const{friendlyName:t,code:s,onVerified:i}=e,n=await this.withStep(["totpVerifyCode"],(e=>this.service.renameSettings({mfaSettingId:e.mfaSettingId,friendlyName:t}))),o=await this.withStep("totpVerifyCode",(e=>this.service.verifyTOTP({mfaSettingId:e.mfaSettingId,code:s})));if(!n||!o)return;const{result:a,state:r}=n,{result:l}=o;if("saved"===a.status&&"match"===l.status)this.store.setState({step:"totpBackupCodesLoading"}),i();else{const e=[];switch(a.status){case"duplicate":e.push("totpDuplicateFriendlyName");break;case"empty":e.push("totpEmptyFriendlyName");break;case"bad_friendly_name":e.push("totpBadFriendlyName")}switch(l.status){case"error":e.push("unexpectedError");break;case"incorrect":e.push("totpIncorrectCode")}this.store.setState({...r,step:"totpVerifyCode",errorKeys:e})}}}},334992:(e,t,s)=>{s.d(t,{A:()=>r});var i=()=>s(56366),n=()=>s(762433),o=()=>s(324561),a=()=>s(714300);function r(e){const t=(0,i().K8)((()=>e.getMemberCountFromPublicSpaceData()),[e]),s=(0,a().l)({spaceId:e.id}),r=(0,o().Q7)(e.id,s,t??0);return Boolean(!(0,n().Qx)(null==s?void 0:s.subscription)&&!(0,n().N8)(null==s?void 0:s.subscription)&&!(0,n().TB)(s)&&r>0)}},347306:(e,t,s)=>{s.d(t,{A:()=>a});s(296540);var i=()=>s(959013),n=()=>s(534177),o=s(474848);function a(e){let{target:t}=e;switch(t){case"notify_mobile":return(0,o.jsx)(i().sA,{id:"notificationSettings.mobilePushNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments via your mobile app"});case"notify_desktop":return(0,o.jsx)(i().sA,{id:"notificationSettings.desktopNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments immediately on desktop"});case"notify_email":return(0,o.jsx)(i().sA,{id:"notificationSettings.emailNotificationSettings.improvedDescription",defaultMessage:"Receive emails when you get comments, mentions, page invites, reminders, access requests, and property changes"});case"notify_email_always":return(0,o.jsx)(i().sA,{id:"notificationSettings.emailAlwaysNotificationSettings.improvedDescription",defaultMessage:"Receive emails about activity in your workspace, even when you're active on the app"});case"notify_slack":return(0,o.jsx)(i().sA,{id:"notificationSettings.slackNotificationsSettings.default.description",defaultMessage:"Receive notifications in your Slack workspace when you're mentioned in a page, database property, or comment"});case"notify_slack_mention":return(0,o.jsx)(i().sA,{id:"notificationSettings.slackMentionNotificationSettings.description",defaultMessage:"Receive notifications in your Slack workspace when you're mentioned in a group, page, database property, or comment."});case"notify_slack_all_activity":return(0,o.jsx)(i().sA,{id:"notificationSettings.slackAllActivityNotificationSettings.description",defaultMessage:"Receive notifications in your Slack workspace when you get comments, mentions, page invites, and property changes."});case"notify_email_digest":return(0,o.jsx)(i().sA,{id:"notificationSettings.pageUpdatesNotificationsSettings.description",defaultMessage:"Receive email digests for changes to pages you’re subscribed to"});case"notify_home_digest_email":return(0,o.jsx)(i().sA,{id:"notificationSettings.homeDigestEmailNotificationsSettings.description",defaultMessage:"Receive email digests of what's happening in your workspace"});case"marketing_emails":return(0,o.jsx)(i().sA,{id:"notificationSettings.marketingEmails.description",defaultMessage:"Receive occasional emails about product launches and new features from Notion"});case"desktop_badge":return(0,o.jsx)(i().sA,{id:"notificationSettings.desktopBadge.description",defaultMessage:'Show/hide the notification badge using the "Badge application icon" switch in System Settings'});case"disable_ai_meeting_notes_audio_process_detection_notification":return(0,o.jsx)(i().sA,{id:"notificationSettings.aiMeetingNotesAudioProcessDetectionNotification.description",defaultMessage:"Receive push notifications to start meeting notes when you join a meeting on desktop"});default:(0,n().HB)(t)}}},347930:(e,t,s)=>{s.d(t,{H:()=>o});var i=()=>s(645873);const n=new(i().O2)("permissionsInviteWithModal",(async()=>await Promise.all([s.e(75134),s.e(9304),s.e(16471),s.e(58550),s.e(44711),s.e(53321),s.e(90825),s.e(96346),s.e(55373),s.e(37353),s.e(29151),s.e(78191),s.e(62475),s.e(3151),s.e(98629),s.e(49889),s.e(97727),s.e(22900),s.e(85128),s.e(95555),s.e(14659),s.e(92845),s.e(84468),s.e(5605),s.e(48486),s.e(95794),s.e(13677),s.e(56952),s.e(48632),s.e(74562),s.e(27711),s.e(4422),s.e(11341),s.e(46414),s.e(95168),s.e(28271),s.e(34877),s.e(36908),s.e(17254),s.e(84185),s.e(32421),s.e(15315),s.e(24587),s.e(78708),s.e(43777),s.e(74752),s.e(91194),s.e(81197),s.e(98659),s.e(20502),s.e(6266),s.e(8184),s.e(83884),s.e(65881),s.e(99809),s.e(93282),s.e(43678),s.e(15019),s.e(90978),s.e(3910),s.e(77213),s.e(6912),s.e(21194),s.e(30291),s.e(39541),s.e(12913),s.e(45620),s.e(54220),s.e(19930),s.e(81768),s.e(58102),s.e(52836),s.e(26483),s.e(19687),s.e(6463),s.e(68137),s.e(50569),s.e(40925),s.e(24975),s.e(282),s.e(87250),s.e(93847),s.e(79928),s.e(7203),s.e(61349),s.e(55197),s.e(94256),s.e(76690),s.e(29669),s.e(24930),s.e(62573),s.e(33882),s.e(44763),s.e(1440),s.e(5044),s.e(31782),s.e(93449),s.e(63996),s.e(895),s.e(66559),s.e(35986),s.e(45683),s.e(78862),s.e(38536),s.e(92924),s.e(64819),s.e(67378),s.e(40186),s.e(97339),s.e(55717),s.e(63797),s.e(56352),s.e(52811),s.e(28398),s.e(21367),s.e(65351),s.e(22686),s.e(4112),s.e(31889),s.e(36009),s.e(81973),s.e(2600),s.e(77663),s.e(97832),s.e(75681)]).then(s.bind(s,543950)))),o=(0,i()._h)(n,(e=>e.PermissionsInviteWithModal))},352704:(e,t,s)=>{s.d(t,{A:()=>Ns});s(944114),s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),s(898992),s(354520),s(672577),s(581454);var i=s(296540),n=()=>s(484714),o=()=>s(56366),a=()=>s(401497),r=()=>s(187174),l=()=>s(126158),d=()=>s(30626),c=()=>s(560838),u=()=>s(381138),p=()=>s(793565),m=()=>s(206267),g=()=>s(792071),h=()=>s(386164),f=()=>s(68263),S=()=>s(96689),y=()=>s(848538),b=()=>s(798880),x=()=>s(322769),v=()=>s(959013),A=()=>s(381349),w=()=>s(778078),M=()=>s(496603),j=()=>s(534177),k=()=>s(284371),C=()=>s(701763),_=()=>s(278768),I=()=>s(966505),P=()=>s(492666),T=()=>s(449506),B=()=>s(884107),R=()=>s(901389),D=()=>s(496414),N=()=>s(579627),L=()=>s(426116),O=()=>s(205224),F=()=>s(751156),U=()=>s(704152),E=()=>s(493823),G=()=>s(760217),V=()=>s(406699),z=()=>s(802790),K=()=>s(285790),q=()=>s(623580),W=()=>s(331542),H=()=>s(928600),$=()=>s(939740),Y=()=>s(864943),Q=()=>s(204063),X=()=>s(89924),J=()=>s(946548),Z=()=>s(125565),ee=()=>s(234194),te=()=>s(698449),se=()=>s(605402),ie=()=>s(265665),ne=()=>s(187820),oe=()=>s(75491),ae=s(474848);function re(e){let{spaceStore:t,groupIds:s,onGroupClick:i}=e;const n=(0,v().tz)(),r=(0,a().IS)((e=>({title:{marginRight:8,color:0===s.length?e.text.tertiary:void 0},defaultGroupIconPill:{height:14,width:14,color:e.text.secondary,fill:"currentColor"},untitled:{color:e.text.tertiary}})),[s]),l=(0,o().K8)((()=>s.map((e=>({key:e,render:s=>{const i=se().A.state.permissionGroupsAndMemberCounts.find((t=>t.group.group_id===e));if(!i)return null;const o=te().Pf({intl:n,groupName:i.group.name});return(0,ae.jsx)(G().A,{icon:(0,ae.jsx)(ne().B6,{disabled:!0,icon:i.group.icon&&t?{pointer:t.pointer,icon:i.group.icon}:void 0,size:18,isEmptyPage:!1,title:o,defaultIcon:(0,ee().M)(r.defaultGroupIconPill)}),title:(0,ae.jsx)(Z().A,{style:i.group.name?void 0:r.untitled,children:(0,ae.jsx)(ie().j,{style:{maxWidth:200},children:o})}),caption:(0,ae.jsx)(v().sA,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"groupsDropdownForMember.numMembers",values:{numMembers:i.memberCount}}),inline:!0,...s})},action:i})))),[s,n,i,t,r.defaultGroupIconPill,r.untitled]);return(0,ae.jsx)(oe().ED,{title:(0,ae.jsx)(Z().A,{style:r.title,children:s&&0!==s.length?(0,ae.jsx)(v().sA,{id:"groupsDropdownForMember.groupsCount.label",defaultMessage:"{numberOfGroups, plural, one {{numberOfGroups} group} other {{numberOfGroups} groups}}",values:{numberOfGroups:s.length}}):(0,ae.jsx)(v().sA,{id:"groupsDropdownForMember.groupsCountNone.label",defaultMessage:"None"})}),items:l,disabled:!s||0===s.length})}var le=()=>s(592791),de=()=>s(690197),ce=()=>s(719147),ue=()=>s(442672),pe=()=>s(912913),me=()=>s(8178),ge=()=>s(792223),he=()=>s(709438),fe=()=>s(317182),Se=()=>s(584262),ye=()=>s(179034),be=()=>s(435009),xe=()=>s(492414),ve=()=>s(972435),Ae=()=>s(722872),we=()=>s(37433),Me=()=>s(632709),je=()=>s(765957),ke=()=>s(630116),Ce=()=>s(848237),_e=()=>s(898808),Ie=()=>s(452558),Pe=()=>s(419357),Te=()=>s(958378);const Be=(0,v().YK)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder"}});function Re(e){const{teamGuest:t}=e,s=(0,n().v3)(),i=(0,o().O$)(je().AppStoreCurrentSpaceStore);if(!i)return null;if(0===t.guestPageIds.length)return null;const a=[{key:"pages",render:e=>(0,ae.jsx)(X().A,{...e}),items:t.guestPageIds.map((e=>{const t=ke().Bv.createChildStore(i,{table:ye().ev,id:e}),n={key:e,render:e=>(0,ae.jsx)(Te().A,{...e,store:t,placeholder:(0,ae.jsx)(v().sA,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})}),action:()=>{const t=ke().Bv.createChildStore(i,{table:ye().ev,id:e}),n=(0,xe().Ay)({store:t,fullyQualified:!1,pageVisitSource:Se().y8.LinkInPage});be().oo({environment:s,url:n,openInNew:"tab"})}};return n}))}],r={menuType:Ae().gu.Popup,minWidth:300,maxWidth:350,maxHeight:300,header:t.guestPageIds.length>0&&(0,ae.jsx)(Z().A,{isSmall:!0,style:{color:A().Ay.regularTextColor,marginLeft:15,marginRight:15,paddingTop:6},children:(0,ae.jsx)(v().sA,{id:"guestpagesforteamguest.header",defaultMessage:"Pages"})})};return(0,ae.jsx)(H().A,{...r,children:(0,ae.jsx)($().Ay,{type:$().Oh.Vertical,initialFocus:void 0,sections:a})})}function De(e){const t=(0,n().v3)(),[s,r]=(0,i.useState)(""),l=(0,i.useCallback)((e=>Ce().F2({environment:t,teamId:e,tab:Me().p.Members,from:"teams_dropdown_for_team_guest"})),[t]),d=(0,a().IS)((()=>({teamMenuItem:{fontWeight:400,maxWidth:180}})),[]),c=(0,o().K8)((()=>[{key:"teams for team guest",render:e=>(0,ae.jsx)(X().A,{...e}),actions:e.teamStores.map((e=>{const t={key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>{var s;return(0,ae.jsx)(G().A,{icon:(0,ae.jsx)(_e().x,{disabled:!0,store:e}),title:(0,ae.jsx)(Z().A,{style:d.teamMenuItem,children:e.getName()}),caption:(0,ae.jsx)(v().sA,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",values:{numMembers:(null===(s=(0,we().PF)({teamStore:e}))||void 0===s?void 0:s.memberCountWithGuests)??0}}),inline:!0,...t})},action:()=>{l(e.id)},closeParentMenu:!1};return t}))}]),[e.teamStores,d.teamMenuItem,l]),u=(0,ae.jsx)(X().A,{isInput:!0,children:(0,ae.jsx)(Pe().Ay,{value:s,onChange:(0,i.useCallback)((e=>{r(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:ve().A.formatMessage(Be.filterTeams)})}),p={menuType:Ae().gu.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?u:void 0};return(0,ae.jsx)(H().A,{...p,children:(0,ae.jsx)(Ie().A,{filter:s,context:{blocks:[],environment:t,publicEditMode:void 0},initialFocus:0,sections:c})})}const Ne=function(e){const{teamGuest:t}=e,n=(0,we().uJ)(),r=(0,i.useMemo)((()=>((null==n?void 0:n.teams)??[]).map((e=>e.store))),[n]),l=(0,we().qQ)(),d=(0,we().D5)(),c=(0,i.useMemo)((()=>d?r:l),[r,l,d]),u=(0,o().K8)((()=>c.filter((e=>e.isMemberOrGuest(t.userId,new Set)))),[c,t]),p=(0,a().IS)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.text.tertiary},chevron:{width:10,marginLeft:4,fill:e.icon.tertiary}})),[]),m=u.length??0;return(0,ae.jsx)(V().Ay,{popupType:V().z7.Popup,renderOrigin:e=>(0,ae.jsx)(E().p,{disabled:0===m,style:0===m?p.noTeams:p.button,...e,children:0===m?(0,ae.jsx)(v().sA,{id:"teamsDropdownForTeamGuest.teamsCountNone.label",defaultMessage:"No access"}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(v().sA,{id:"teamsDropdownForMember.teamsCount.label",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:m}}),(0,s(668725).b)(p.chevron)]})}),render:()=>(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(De,{teamGuest:t,teamStores:u}),(0,ae.jsx)(z().A,{size:"100%"}),(0,ae.jsx)(Re,{teamGuest:t})]})})};var Le=()=>s(37625),Oe=()=>s(347930),Fe=()=>s(725118),Ue=()=>s(47373),Ee=()=>s(680074),Ge=()=>s(731320),Ve=()=>s(836251),ze=()=>s(640653),Ke=()=>s(963589),qe=()=>s(637573),We=()=>s(240865),He=()=>s(118789),$e=()=>s(562866),Ye=()=>s(716730),Qe=()=>s(623742),Xe=()=>s(973189),Je=()=>s(404141),Ze=()=>s(309049),et=()=>s(763392),tt=()=>s(224701),st=()=>s(971407),it=()=>s(128907),nt=()=>s(329304),ot=()=>s(134217),at=()=>s(910609),rt=()=>s(749240),lt=()=>s(304067),dt=()=>s(42476),ct=()=>s(583705),ut=()=>s(385527),pt=()=>s(437607),mt=()=>s(76118),gt=()=>s(91709),ht=()=>s(710149),ft=()=>s(179030),St=()=>s(859428),yt=()=>s(61442),bt=()=>s(127955),xt=()=>s(140828),vt=()=>s(821879),At=()=>s(508490),wt=()=>s(792361),Mt=()=>s(280161),jt=()=>s(777967),kt=()=>s(317194),Ct=()=>s(480822),_t=()=>s(606273),It=()=>s(785606),Pt=()=>s(646736),Tt=()=>s(21735),Bt=()=>s(217429),Rt=()=>s(19575),Dt=()=>s(970209),Nt=()=>s(324561),Lt=()=>s(960236),Ot=()=>s(803025),Ft=()=>s(334992);const Ut={maxWidth:275,borderRadius:30},Et={marginTop:8},Gt={maxWidth:160},Vt=50;function zt(e){const{store:t,currentTab:s,inviteLinkCode:i,members:n,guests:o,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:r,accessRequestRenderValues:l}=e;return s===Xe().d.Members?(0,ae.jsx)(As,{store:t,inviteLinkCode:i,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:r,members:n}):s===Xe().d.Guests?(0,ae.jsx)(ws,{store:t,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:r,guests:o}):s===Xe().d.Groups?(0,ae.jsx)(ds,{store:t,spacePermissionsSettingsStore:a}):s===Xe().d.Reprovisioning?(0,ae.jsx)(Kt,{store:t}):s===Xe().d.Requests?(0,ae.jsx)(bt().Ay,{spaceStore:t,accessRequestRenderValues:l}):s===Xe().d.Contacts?(0,ae.jsx)(jt().x,{spaceStore:t}):void(0,j().HB)(s)}function Kt(e){let{store:t}=e;const s=(0,a().IS)((()=>({label:{width:"80%"}})),[]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Z().A,{isMultiline:!0,style:s.label,children:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption",defaultMessage:"View users that were previously part of the workspace in the past 30 days. Only workspace owners can see this."})}),(0,ae.jsx)(Z().A,{isMultiline:!0,style:s.label,children:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption.disclaimer",defaultMessage:"Only users who had private pages will appear here."})}),(0,ae.jsx)(z().A,{size:24,isHidden:!0}),(0,ae.jsx)(qt,{store:t})]})}function qt(e){let{store:t}=e;const s=(0,n().v3)(),[o,a]=(0,i.useState)([]),[{value:l,status:d}]=(0,r().Yb)((async()=>{const e=await T().callApi({eventName:"getRecoverableSpaceUserContent",environment:s,data:{spaceId:t.id}});if("failed"===e.type)throw R().Qg(e),e;return e.data}),[s,t.id]),c=(null==l?void 0:l.recentSpaceRecoverPages)??[],u=(0,i.useCallback)((async(e,i)=>{const{accept:n}=await R().Gh({message:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationMessage",defaultMessage:"Transfer their private pages?"}),description:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationDescription",defaultMessage:"This action cannot be undone."}),acceptLabel:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmButton.label",defaultMessage:"Transfer private pages"})});if(!n)return;a([...o,e]);const r=await T().callApi({eventName:"transferSpaceUserContent",environment:s,data:{spaceId:t.id,fromUserId:e,toUserId:i}});"failed"===r.type&&R().Qg(r),a(o.filter((t=>t!==e)))}),[s,t.id,o]),p=(0,i.useCallback)((e=>{const s=[];for(const{userId:i,privatePagesCount:n}of e){if(n<1)continue;const e=ke().LU.createChildStore(t,{table:b().oo,id:i});s.push({key:i,columns:[(0,ae.jsx)($t,{userStore:e},"Member"),n,o.includes(i)?(0,ae.jsx)(Ht,{}):(0,ae.jsx)("div",{style:{marginLeft:-4},children:(0,ae.jsx)(xt().A,{mode:vt().C.Button,focused:!1,title:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.reprovision.toUser.title",defaultMessage:"Transfer private pages"}),parentStore:t,userIds:o,onChange:e=>{let[t]=e;u(i,t)}})})]})}return s}),[t,o,u]);return"pending"===d?(0,ae.jsx)(Ht,{}):null!=l&&l.recentSpaceRecoverPages?(0,ae.jsx)(fe().A,{columns:[{key:"user",header:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),style:{width:"50%"}},{key:"count",header:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.userTable.pageCountColumn.header",defaultMessage:"Private pages"}),style:{width:"25%"}},{key:"action",header:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.userTable.actionLevelColumn.header",defaultMessage:"Action"}),style:{width:"25%"}}],rows:p(c)}):null}function Wt(){const e=rt().subscriptionDataStoreInstance.state;return Boolean(e&&ot().Fq(e))}function Ht(){return(0,ae.jsx)(W().A,{style:{margin:"calc(50% - 1em) auto"}})}function $t(e){let{userStore:t,restorationStatus:s}=e;return(0,ae.jsx)(Qe().A,{actorStore:t,restorationStatus:s})}function Yt(e){let{user:t,userPermissionGroupIds:s}=e;return"none"!==t.role?(0,ae.jsx)(Le().Ay,{memberId:t.userId,userPermissionGroupIds:s}):null}function Qt(e,t,s,i){return t&&t.length>0?(0,w().Ay)(t,e,(e=>{const t=ke().LU.createChildStore(s,{table:b().oo,id:e.userId});return t.isDefined()?t.getSearchName(i):""})):e}function Xt(e){let{store:t}=e;return(0,o().K8)((()=>L().CU(t)),[t])?(0,ae.jsx)(Z().A,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,ae.jsx)(v().sA,{id:"spaceBasicSettings.membersTab.manageMembersWithLinkCaption",defaultMessage:"Manage members here."})}):(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Z().A,{isSmall:!0,isMultiline:!0,style:{width:"80%",marginBottom:2},children:(0,ae.jsx)(v().sA,{id:"spaceBasicSettings.membersTab.manageMembersWithoutLinkCaption",defaultMessage:"Manage members here, or <setupdomainlink>set up a domain</setupdomainlink>, so everyone with allowed email domains can join the workspace.",values:{setupdomainlink:e=>(0,ae.jsx)(ce().A,{onClick:()=>{Je().A.setState({...Je().A.state,currentTab:"settings",defaultSubtab:void 0})},children:e})}})}),(0,ae.jsx)(Z().A,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,ae.jsx)(v().sA,{id:"spaceBasicSettings.membersTab.learnMore",defaultMessage:"<billingguidelink>Learn more about adding members.</billingguidelink>",values:{billingguidelink:e=>(0,ae.jsx)(ce().A,{href:(0,Ve().xS)("guides.billingGuide"),children:e})}})})]})}function Jt(e){return ot().vl(e)&&Wt()}function Zt(e){let{group:t,user:s,userStore:i,store:o}=e;const a=(0,v().tz)(),r=(0,n().v3)();return(0,ae.jsx)(V().Ay,{popupType:V().z7.Popup,renderOrigin:e=>(0,ae.jsx)(K().A,{...e,icon:d()._,iconStyle:{height:14,width:14},ariaLabel:a.formatMessage({id:"spacePermissionsSettings.externalTab.userThreeDotMenu.ariaLabel",defaultMessage:"Convert to member or remove from workspace"})}),render:e=>{const n=[{key:"convertToMember",render:e=>(0,ae.jsx)(G().A,{...e,icon:(0,p().V)({height:17,width:17}),title:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.title",defaultMessage:"Convert to member"}),shouldWrapCaption:!0,caption:"team_guests"===t&&(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.caption",defaultMessage:"Workspace members are not restricted to specific teamspaces"})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e,o=Wt()?"read_and_write":"editor";R().ui({message:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.message",defaultMessage:"Are you sure you want to convert this user into a workspace member?"}),description:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.description",defaultMessage:"This is a billable event."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{R().zw(),n.close()},items:[{label:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.confirm",defaultMessage:"Convert to workspace member"}),color:"blue",onAccept:async()=>{n.close(),await O().P({environment:s,guestUserStore:i,role:o,store:t,isConvertToAdmin:!Wt(),origin:"page_or_teamspace_guest_three_dot_menu"})}}]})}({user:s,userStore:i,parent:e},o,r)},{key:"removeFromWorkspace",render:e=>(0,ae.jsx)(G().A,{...e,icon:(0,c()._)({height:17,width:17,color:A().Ay.red}),title:(0,ae.jsx)("span",{style:{color:A().Ay.red},children:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.title",defaultMessage:"Remove from workspace"})})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e;R().ui({message:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.message",defaultMessage:"Are you sure you want to remove this user from the workspace?"}),description:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.description",defaultMessage:"This action will completely remove the user from the workspace, including any teamspaces and pages they have access to."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{R().zw(),n.close()},items:[{label:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.confirm",defaultMessage:"Remove from workspace"}),color:"red",onAccept:async()=>{n.close(),await O().D({environment:s,guestUserStore:i,store:t})}}]})}({user:s,userStore:i,parent:e},o,r)}],a=[{key:"team section",render:e=>(0,ae.jsx)(X().A,{...e}),items:n}];return(0,ae.jsx)(H().A,{menuType:Ae().gu.Popup,children:(0,ae.jsx)($().Ay,{type:$().Oh.Vertical,sections:a,initialFocus:void 0,style:{minWidth:265}})})}})}function es(e){return{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.icon.secondary}}const ts=(0,v().YK)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});function ss(){D().m({message:ts.updatingPermissions})}function is(){D().V()}async function ns(e,t,s,i,n){const o=n.currentUser.id;if(e.userId!==o||"none"!==t)ss(),"none"===t?(await T().callApi({eventName:"removeUsersFromSpace",environment:n,data:{userIds:[e.userId],spaceId:i.id,removePagePermissions:!0,revokeUserTokens:!1}}),await tt().nO({environment:n,spaceStore:i})):F().createAndCommit({userAction:"SpacePermissionsSettings.handleMemberPermissionRoleChange",environment:n,canUndo:!0,perform:s=>N().dy({environment:n,spaceStore:i,permissionItems:[{type:"user_permission",role:t,user_id:e.userId}],transaction:s,from:"space_permission_setting_table"})}),is();else{await L().ev({environment:n,spaceId:i.id,userSettingsStore:s})&&(I().KX(n,{invite_origin:"workspace_leave",domainType:(0,Ee().FX)(),new_workspace_member_count:-1,new_workspace_member_ids:[o]}),Je().A.setState({...Je().A.state,open:!1}))}}function os(e){let{buttonStyle:t,store:s}=e;const a=(0,n().v3)(),r=(0,o().K8)((()=>s.canEditMembership()),[s]),l=(0,o().K8)((()=>!r&&!s.getDisableMembershipRequests()&&(0,Ue().x3)()),[r,s]),d=(0,o().K8)((()=>Wt()),[]),c=(0,i.useCallback)((()=>{(0,Ye().q)(a)}),[a]);return l?(0,ae.jsx)($e().cx,{store:s,analyticsFrom:"space_settings_add_members",origin:(0,ae.jsx)(Q().A,{size:"lg",onClick:c,children:(0,ae.jsx)(v().sA,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})}):(0,ae.jsxs)("div",{style:{display:"flex"},children:[(0,ae.jsx)(Oe().H,{disabled:!r,store:s,onInviteClick:ss,onInviteComplete:is,isSubscribed:d,membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:t,analyticsFrom:"space_settings_add_members"}),(0,ae.jsx)(Fe().R,{inviteOrigin:"space_setting_slack_imports",canEditPermission:r,onInviteClick:ss,onInviteComplete:is})]})}function as(e){let{member:t,store:s}=e;const i=(0,n().v3)(),a=(0,v().tz)(),r=i.currentUser.id,{currentUserSettingsStore:l,currentSpaceStore:d}=(0,o().K8)((()=>{const{currentUserSettingsStore:e,currentSpaceStore:t}=je().default.state;return{currentUserSettingsStore:e,currentSpaceStore:t}}),[]),c=(0,o().K8)((()=>function(e,t){const s=e.formatMessage({id:"spacePermissionSettings.memberRoleSelect.permissionitem.roleUpgradeDisabled",defaultMessage:"Cannot upgrade to a higher role than member"}),i=(0,Ge().Qu)();return M().oE(f().Gb.map((e=>{if(i||"membership_admin"!==e)return!t.canAdmin()&&f().EH(e)?{role:e,disabledInfo:{isDisabled:!0,disabledMessage:s}}:{role:e}})))}(a,s)),[a,s]),u=(0,o().K8)((()=>!(s.canAdmin()||s.canEditMembership()&&(f().NB(t.role)||t.userId===r))),[r,t,s]);return l?(0,ae.jsx)(pe().Ay,{role:t.role,table:S().NX,type:"user_permission",disabled:u,isUserPermission:t.userId===r,upgradeButtonName:"space_permission_item",availableRoleItems:c,onChange:async e=>{await ns(t,e,l,s,i)},buttonStyle:Gt,onRemoveMemberClick:async()=>{let e,n;if(it().R()&&(n=m().JW(),e=await(0,lt().G)({environment:i,contractionSurveyId:n}),!e))return null;await(async()=>await(0,st().B)(i,t.userId,null==d?void 0:d.id))()&&(await(async e=>{await ns(t,"none",l,s,i),I().ej(i,{member_user_id:t.userId,member_role:t.role,contraction_survey_id:e,is_space:!0,domainType:(0,Ee().FX)(),new_workspace_member_count:-1})})(n),e&&et().x(i))}}):null}function rs(e,t,s,i,n){const o=n.state.sorts[e];if(!o)return t;switch(o.by){case"role":return t.sort(((e,t)=>(f().TE[t.role]-f().TE[e.role])*(o.asc?-1:1)));case"name":return t.map((e=>({user:e,store:ke().LU.createChildStore(s,{table:b().oo,id:e.userId})}))).sort(((e,t)=>{const s=i.formatMessage(g().Fvx.messages.anonymousPlaceholder),n=e.store.getFullName(i)||s,a=t.store.getFullName(i)||s;return n.localeCompare(a)*(o.asc?1:-1)})).map((e=>e.user))}}function ls(e,t,s){const i=s.state.sorts[e];let n;n=!(!i||i.by!==t)&&i.asc,s.update((s=>({...s,sorts:{...s.sorts,[e]:{by:t,asc:!n}}})))}function ds(e){let{store:t,spacePermissionsSettingsStore:s}=e;const r=(0,v().tz)(),l=(0,a().DP)(),d=(0,n().v3)(),c=(0,i.useCallback)((e=>function(e,t){t.setState({...t.state,groupsFilter:e.target.value})}(e,s)),[s]),p=(0,i.useCallback)((()=>function(e,t,s){F().createAndCommit({userAction:"SpacePermissionsSettings.handleCreateGroupClick",environment:e,canUndo:!0,perform:e=>{const i=L().np({spaceStore:t,transaction:e});if(i){s.setState({...s.state,editingNameGroupId:i.getGroupId(),groupNameInputValue:""});const e=g().Bj6.fromValue(pt().n,i.getValue()),t=[...se().A.state.permissionGroupsAndMemberCounts,{group:e,memberCount:0}],n=(0,w().Ay)(s.state.groupsFilter,t,(e=>e.group.name||""));se().A.setState({...se().A.state,permissionGroupsAndMemberCounts:n})}}}),C().UY(e)}(d,t,s)),[d,t,s]),m=(0,o().K8)((()=>s.state.groupsFilter),[s]),h=(0,o().K8)((()=>Jt(d)),[d]),f=(0,o().K8)((()=>t.canEditMembership()),[t]),S=(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.groupsTab.groupCreationInsufficientPermissions",defaultMessage:"Only membership admins and workspace owners can add a permission group."}),y=(0,o().K8)((()=>t.isDefined()),[t]),b=(0,o().K8)((()=>0!==(0,Ge().Qo)()),[]),x=(0,o().K8)((()=>(0,we().zI)()>0),[]),A=(0,o().K8)((()=>function(e,t){return Jt(t)&&e.canEditMembership()}(t,d)),[d,t]);return y?(0,ae.jsxs)("div",{style:{overflow:"auto"},children:[h?(0,ae.jsx)(Z().A,{isMultiline:!0,style:{width:"80%"},children:x?(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.groupsTab.captionWithTeamsV2",defaultMessage:"Set up groups to streamline page permissions from the share menu and manage teamspace members in bulk."}):(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.groupsTab.caption",defaultMessage:"Set up groups to conveniently control page permissions from the share menu."})}):(0,ae.jsx)(Dt().A,{subscriptionTier:"plus",from:"permission_groups",icon:ct().$,title:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",defaultMessage:"Upgrade to create groups"}),caption:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.groupsTab.upgradeCaption.plus",defaultMessage:"Upgrade to the Plus Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups"}),(0,ae.jsx)(z().A,{size:24,isHidden:!0}),(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"16px 8px"},children:[h?(0,ae.jsx)(St().A,{renderTooltip:()=>!f&&S,render:e=>(0,ae.jsx)(Q().A,{size:"lg",onClick:p,disabled:!f,...f?void 0:e,children:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",defaultMessage:"Create a group"})})}):void 0,b?(0,ae.jsx)(q().A,{placeholder:r.formatMessage({id:"spacePermissionsSettings.groupsTab.filterGroupNamesInput.placeholder",defaultMessage:"Filter by group name…"}),left:(0,u().q)(es(l)),showClearButton:!0,format:q().C.Small,value:m,style:{...Ut,marginRight:0},onChange:c,onClick:()=>{C().Z9(d,{current_tab:Xe().d.Groups})}}):void 0]}),b?(0,ae.jsx)(Mt().r,{spaceStore:t,permissionsSettingsStore:s,canEdit:A}):void 0]}):null}function cs(e){let{groupIds:t,store:s,spacePermissionsSettingsStore:i}=e;return(0,ae.jsx)(re,{spaceStore:s,groupIds:t,onGroupClick:()=>{!function(e,t){t.setState({...t.state,currentTab:e})}(Xe().d.Groups,i)}})}function us(e){let{group:t,user:s,userStore:i,store:n}=e;const a=(0,o().K8)((()=>(0,Ue().Qd)()),[]),r=(0,o().K8)((()=>Wt()),[]);return"none"===s.role?a&&"team_guests"===t?(0,ae.jsx)(Ne,{teamGuest:s}):(0,ae.jsx)(le().V,{store:n,guestPageIds:s.guestPageIds,guestStore:i,isSubscribed:r,hideActionButtons:a}):(0,ae.jsx)(as,{store:n,member:s})}function ps(e){let{group:t,spaceMembers:s,store:a,spacePermissionsSettingsStore:l,recentlyRemovedMembersStore:d}=e;const c=(0,n().v3)(),u=(0,o().K8)((()=>l.state.sorts[t]),[t,l]),p={key:"user",header:(0,ae.jsxs)(U().A,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{ls(t,"name",l)},style:{display:"flex",alignItems:"center"},children:[(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),u&&"name"===u.by?(0,ae.jsx)(wt().X,{up:u.asc}):void 0]}),style:{width:"45%"}},m={key:"groups",header:(0,ae.jsx)(U().A,{disabled:!0,ignoreLocalHoverState:!0,style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.userTable.groupsColumn.header",defaultMessage:"Groups"})}),style:{width:"15%"}},g={key:"teams",header:(0,ae.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.userTable.teamsColumn.header",defaultMessage:"Teamspaces"})}),style:{width:"20%",textAlign:"center"}},f={key:"access_level",header:(0,ae.jsxs)(U().A,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{ls(t,"role",l)},style:{display:"flex",alignItems:"center",paddingLeft:8},children:[(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"}),u&&"role"===u.by?(0,ae.jsx)(wt().X,{up:u.asc}):void 0]}),style:{width:"20%",textAlign:"center"}},S={key:"pages",header:(0,ae.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.userTable.pagesColumn.header",defaultMessage:"Pages"})}),style:{width:"20%",textAlign:"center"}},y={key:"three_dot",header:(0,ae.jsx)(U().A,{disabled:!0,ignoreLocalHoverState:!0})},x=(0,o().K8)((()=>Jt(c)&&"team_guests"!==t&&"guests"!==t),[c,t]),A=(0,o().K8)((()=>("team_guests"===t||"guests"===t)&&(0,Ue().Qd)()&&a.canEditMembership()),[t,a]),w=(0,o().K8)((()=>(0,we().zI)()>0),[]);let M="members"===t&&w?[p,g,f]:A?[p,S,y]:[p,S];x&&(M=[...M.slice(0,1),m,...M.slice(1)]);const j=(0,o().O$)(d),k=(0,o().K8)((()=>s.map((e=>({member:e,store:ke().LU.createChildStore(a,{table:b().oo,id:e.userId})}))).filter((e=>e.store.isDefined()))),[s,a]),C=(0,o().O$)(je().AppStoreCurrentSpaceStore),[{value:_}]=(0,r().Yb)((async()=>{if(!C)return;const e=await T().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:c,data:{userIds:k.map((e=>e.member.userId)),spaceId:C.id},headers:(0,h().WS)({cellId:void 0,spaceId:C.id})});return"success"===e.type?e.data.userToGroupMap:void 0}),[C,c,k]);return(0,ae.jsx)(fe().A,{columns:M,rows:k.map((e=>{var s;const{member:n,store:o}=e,r=_&&_[n.userId],d=Array.isArray(j)?null===(s=j.find((e=>e.userId===n.userId)))||void 0===s?void 0:s.restorationStatus:void 0,c=[(0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)(Qe().A,{actorStore:o,restorationStatus:d,spaceRole:(0,Qe().v)(n.role),hideRolePill:!0})},"member")];return x&&c.push((0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)(cs,{store:a,spacePermissionsSettingsStore:l,groupIds:r||[]})},"groups")),"members"===t&&w&&c.push((0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)(Yt,{user:n,userPermissionGroupIds:new Set(r??[])})},"teams")),c.push((0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)(us,{store:a,group:t,user:n,userStore:o})},"user-permission")),A&&c.push((0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)(Zt,{group:t,user:n,userStore:o,store:a})},"three-dot")),{key:n.userId,columns:c}}))})}function ms(e){var t;let{members:s,store:n,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:r}=e;const l=(0,v().tz)(),d=(0,i.useCallback)((()=>function(e){e.setState({...e.state,limitMembers:!1})}(a)),[a]),{membersFilter:c,limitMembers:u}=(0,o().K8)((()=>{const{membersFilter:e,limitMembers:t}=a.state;return{membersFilter:e,limitMembers:t}}),[a]),p=(0,o().K8)((()=>Qt(s,c,n,l)),[s,c,n,l]),m=(0,o().K8)((()=>rs("members",p,n,l,a)),[p,n,l,a]),g=(0,Lt().lh)({spaceId:n.id}),h=u?m.slice(0,Vt):m,f=(0,Ft().A)(n),S=(0,Nt().Q7)(n.id,g,m.length),y=f&&(null==g?void 0:g.subscription)&&S&&S>0,b=m.length;return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{style:{marginRight:8,flexGrow:1},children:(0,ae.jsx)(me().A,{smallMarginBottom:!0,children:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.spaceMembers.members.title",defaultMessage:"Members"})})}),(0,ae.jsx)(Xt,{store:n}),(0,ae.jsx)("div",{style:{margin:"24px 0px"},children:y?(0,ae.jsx)(Ct().x,{quantityOfSpaceMembers:b,quantityOfPaidSeats:S,nextBillingDate:(null==g||null===(t=g.subscription)||void 0===t?void 0:t.currentPeriodEnd.toLocaleString({month:"short",day:"numeric",year:"numeric"}))??""}):null}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(ps,{store:n,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:r,group:"members",spaceMembers:h}),m.length>Vt&&u?(0,ae.jsx)(E().p,{isGray:!0,size:"xs",style:Et,onClick:d,children:(0,ae.jsx)(v().sA,{defaultMessage:"Show {moreMembersCount} more",id:"spacePermissionsSettings.membersTab.showMore.message",values:{moreMembersCount:m.length-Vt}})}):void 0]})]})}function gs(e){let{guests:t,store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:r}=e;const l=(0,v().tz)(),d=(0,a().DP)(),c=(0,i.useCallback)((()=>function(e){e.setState({...e.state,limitTeamGuests:!1})}(n)),[n]),{teamGuestsFilter:p,limitTeamGuests:m}=(0,o().K8)((()=>{const{teamGuestsFilter:e,limitTeamGuests:t}=n.state;return{teamGuestsFilter:e,limitTeamGuests:t}}),[n]),g=t.filter((e=>e.isTeamGuest)),h=(0,o().K8)((()=>Qt(g,p,s,l)),[g,p,s,l]),f=(0,o().K8)((()=>rs("team_guests",h,s,l,n)),[h,s,l,n]),S=m?f.slice(0,5):f;return(0,ae.jsx)("div",{style:{marginBottom:5},children:(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:(0,ae.jsx)(q().A,{placeholder:l.formatMessage({id:"spacePermissionsSettings.membersTab.filterTeamGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,u().q)(es(d)),showClearButton:!0,format:q().C.Small,value:p,style:Ut,onChange:e=>{n.setState({...n.state,teamGuestsFilter:e.target.value,limitTeamGuests:!0})}})}),(0,ae.jsx)(ps,{store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:r,group:"team_guests",spaceMembers:S}),f.length>5&&m?(0,ae.jsx)(E().p,{isGray:!0,size:"xs",style:Et,onClick:c,children:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:f.length-5}})}):void 0]})})}function hs(e){let{guests:t,store:s,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:l}=e;const d=(0,v().tz)(),c=(0,a().DP)(),p=(0,n().v3)(),{guestsFilter:m,limitGuests:g}=(0,o().K8)((()=>({guestsFilter:r.state.guestsFilter,sorts:r.state.sorts,limitGuests:r.state.limitGuests})),[r]),h=(0,i.useCallback)((()=>function(e){e.setState({...e.state,limitGuests:!1})}(r)),[r]),f=t.filter((e=>!e.isTeamGuest&&e.isPageGuest)),S=(0,o().K8)((()=>Qt(f,m,s,d)),[f,m,s,d]),y=(0,o().K8)((()=>rs("guests",S,s,d,r)),[S,s,d,r]),b=(0,o().K8)((()=>(0,Ue().Qd)()?5:Vt),[]),x=(0,o().O$)(je().AppStoreCurrentSpaceStore),A=(0,o().O$)(rt().subscriptionDataStoreInstance),w=(0,o().K8)((()=>Boolean(x&&A&&"subscribed_admin"===A.type&&Bt().default.checkGate({gateName:"enable_guest_export"}))),[x,A]),M=g?y.slice(0,b):y;return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:[(0,ae.jsx)(q().A,{placeholder:d.formatMessage({id:"spacePermissionsSettings.membersTab.filterGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,u().q)(es(c)),showClearButton:!0,format:q().C.Small,value:m,style:Ut,onChange:e=>{r.setState({...r.state,guestsFilter:e.target.value,limitGuests:!0})},onClick:()=>{C().Z9(p,{current_tab:Xe().d.Guests})}}),w?(0,ae.jsx)(Y().A,{size:"lg",disabled:!1,color:"uiBlue",onClick:()=>function(e,t,s){const{currentSpaceStore:i}=je().default.state,n=rt().subscriptionDataStoreInstance.state;i&&n&&"subscribed_admin"===n.type&&gt().s6(s,{intl:t,spaceStore:i,guests:e})}(y,d,p),disabledFeedback:!0,children:(0,ae.jsx)(v().sA,{id:"exportGuestsButton.label",defaultMessage:"Export guests as CSV"})}):void 0]}),(0,ae.jsx)(ps,{store:s,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:l,group:"guests",spaceMembers:M}),y.length>b&&g?(0,ae.jsx)(E().p,{isGray:!0,size:"xs",style:Et,onClick:h,children:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:y.length-b}})}):void 0]})}function fs(e){let{guests:t,store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:a}=e;const[r,l]=(0,i.useState)(!0),[d,c]=(0,i.useState)(!0),u=(0,o().K8)((()=>!Boolean(s.getSettingsStore().getKeyStore("disable_team_guests").getValue())),[s]);return(0,ae.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[u?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsxs)("div",{style:{display:"flex"},children:[(0,ae.jsx)(_t().f,{open:r,onClick:()=>l(!r),isSidebar:!1,fill:!0,style:{marginLeft:-27}}),(0,ae.jsxs)("div",{style:{marginLeft:3},children:[(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center",height:24},children:[(0,ae.jsx)(Z().A,{style:{fontSize:15},children:(0,ae.jsx)(v().sA,{id:"spacePermissionSettings.teamGuests.title",defaultMessage:"Teamspace guests"})}),(0,ae.jsx)("span",{children:" "}),(0,ae.jsx)(Z().A,{isSecondaryColor:!0,style:{fontSize:15},children:t.filter((e=>e.isTeamGuest)).length})]}),(0,ae.jsx)(Z().A,{isSecondaryColor:!0,style:{fontSize:15},children:(0,ae.jsx)(v().sA,{id:"spacePermissionSettings.teamGuests.subtitle",defaultMessage:"Teamspace guests are billed as members and can access all pages in teamspaces they’ve been invited to."})})]})]}),r?(0,ae.jsx)(gs,{store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:a,guests:t}):void 0]}):void 0,(0,ae.jsxs)("div",{style:{display:"flex"},children:[(0,ae.jsx)(_t().f,{open:d,onClick:()=>c(!d),isSidebar:!1,fill:!0,style:{marginLeft:-27}}),(0,ae.jsxs)("div",{style:{marginLeft:3},children:[(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center",height:24},children:[(0,ae.jsx)(Z().A,{style:{fontSize:15},children:(0,ae.jsx)(v().sA,{id:"spacePermissionSettings.pageGuests.title",defaultMessage:"Page guests"})}),(0,ae.jsx)("span",{children:" "}),(0,ae.jsx)(Z().A,{isSecondaryColor:!0,style:{fontSize:15},children:t.filter((e=>e.isPageGuest&&!e.isTeamGuest)).length})]}),(0,ae.jsx)(Z().A,{isSecondaryColor:!0,style:{fontSize:15},children:(0,ae.jsx)(v().sA,{id:"spacePermissionSettings.pageGuests.subtitle",defaultMessage:"Page guests are free but can only access pages they’ve been invited to."})})]})]}),d?(0,ae.jsx)(hs,{store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:a,guests:t}):void 0]})}function Ss(e){var t;let{store:s,recentlyRemovedMembersStore:l,membersFilter:d,spacePermissionsSettingsStore:c}=e;const u=(0,o().O$)(l),p=(0,Lt().lh)({spaceId:s.id}),m=(0,Ft().A)(s),g=(0,We().V)()??1,f=m&&(null==p?void 0:p.subscription)&&g>0,S=(0,Nt().Q7)(s.id,p,g),x=(0,a().IS)((e=>({emptyMessage:{color:e.text.secondary,boxShadow:`inset 0 -1px 0 ${e.tableDividerColor}`,display:"flex",height:32,padding:"0px 4px",alignItems:"center"},tableContainer:{paddingBottom:36}})),[]),A=(0,o().K8)((()=>c.state.sorts.members),[c]),w=(0,i.useMemo)((()=>A?{field:"name"===A.by?"name_normalized":"type",direction:A.asc?"asc":"desc"}:{field:"name_normalized",direction:"asc"}),[A]),M=(0,i.useCallback)((e=>{["name","role"].includes(e.by)&&ls("members","name"===e.by?"name":"role",c)}),[c]),j=(0,He().n)({query:d,sort:w,filter:"members",limit:30}),k=(0,o().K8)((()=>null==j?void 0:j.rowsStore.state.rows),[j]),C=(0,i.useMemo)((()=>[ys,bs,xs,vs]),[]),_=(0,n().v3)(),[I,P]=(0,i.useState)({});(0,r().Yb)((async()=>{if(!k)return;const e=k.map((e=>e.id)),t=await T().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:_,data:{userIds:e,spaceId:s.id},headers:(0,h().WS)({cellId:void 0,spaceId:s.id})});"success"===t.type&&P((s=>{const i={...s,...t.data.userToGroupMap};for(const t of e)void 0===i[t]&&(i[t]=[]);return i}))}),[k,_,s.id]);const B=(0,i.useCallback)((e=>{var t;const i=(0,Pt().dp)(s,e.id),n=i.getMembershipType()??e.membership_type;if(void 0===n||!(0,y().MN)(n))return;const o=(0,y().C4)(n);return{id:e.id,userStore:ke().LU.createChildStore(s,{id:e.id,table:b().oo}),spaceStore:s,isSpaceUserStoreLoaded:i.isReady(),userRole:o,restorationStatus:null==u||null===(t=u.find((t=>t.userId===e.id)))||void 0===t?void 0:t.restorationStatus,spacePermissionGroupIds:I[e.id],spacePermissionsSettingsStore:c}}),[u,c,s,I]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{style:{marginRight:8,flexGrow:1},children:(0,ae.jsx)(me().A,{smallMarginBottom:!0,children:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.spaceMembers.members.title",defaultMessage:"Members"})})}),(0,ae.jsx)(Xt,{store:s}),f?(0,ae.jsx)("div",{style:{margin:"24px 0px"},children:(0,ae.jsx)(Ct().x,{quantityOfSpaceMembers:g,quantityOfPaidSeats:S,nextBillingDate:(null==p||null===(t=p.subscription)||void 0===t?void 0:t.currentPeriodEnd.toLocaleString({month:"short",day:"numeric",year:"numeric"}))??""})}):(0,ae.jsx)("div",{style:{margin:"12px 0px"}}),(0,ae.jsx)(yt().M,{columns:C,listSource:j,onSortChange:M,sort:A,estimatedRowHeight:52,allowHorizontalScroll:!0,renderEmpty:()=>(0,ae.jsx)(Z().A,{isSmall:!0,style:x.emptyMessage,children:(0,ae.jsx)(v().sA,{id:"membersTab.emptySearch",defaultMessage:"No search results"})}),transformRow:B,style:x.tableContainer})]})}const ys={id:"name",headerTitle:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),cellPadding:"8px 0",widthData:{widthPercent:45,minWidth:200},renderCell:e=>(0,ae.jsx)(Qe().A,{actorStore:e.userStore,restorationStatus:e.restorationStatus,spaceRole:(0,Qe().v)(e.userRole),hideRolePill:!0}),sortable:!0},bs={id:"groups",headerTitle:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.userTable.groupsColumn.header",defaultMessage:"Groups"}),headerCellPadding:"0 0 0 8px",cellPadding:"8px 0",widthData:{widthPercent:20,minWidth:125},renderCell:e=>void 0!==e.spacePermissionGroupIds?(0,ae.jsx)(cs,{store:e.spaceStore,groupIds:e.spacePermissionGroupIds,spacePermissionsSettingsStore:e.spacePermissionsSettingsStore}):(0,ae.jsx)(ht().A,{style:{width:60,height:12,borderRadius:4,marginLeft:8}}),sortable:!1},xs={id:"teams",headerTitle:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.userTable.teamsColumn.header",defaultMessage:"Teamspaces"}),headerCellPadding:"0 0 0 8px",cellPadding:"8px 0",widthData:{widthPercent:20,minWidth:125},renderCell:e=>e.isSpaceUserStoreLoaded&&void 0!==e.spacePermissionGroupIds?(0,ae.jsx)(Le().Ay,{memberId:e.userStore.id,userPermissionGroupIds:new Set(e.spacePermissionGroupIds)}):(0,ae.jsx)(ht().A,{style:{width:100,height:12,borderRadius:4,marginLeft:8}}),sortable:!1},vs={id:"role",headerTitle:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"}),headerCellPadding:"0 0 0 8px",cellPadding:"8px 0",widthData:{widthPercent:25,minWidth:155},renderCell:e=>(0,ae.jsx)(as,{store:e.spaceStore,member:{userId:e.userStore.id,role:e.userRole}}),sortable:!0};function As(e){let{members:t,store:s,inviteLinkCode:i,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:l}=e;const d=(0,o().K8)((()=>{const e=Tt().A.state.shouldUseEdgeCache,t=Bt().default.checkGate({gateName:"edge_cache_settings"}),s=Bt().default.checkGate({gateName:"virtualize_people_table"});return e&&t||s}),[]),c=(0,n().v3)(),p=(0,v().tz)(),m=(0,a().DP)(),g=(0,o().K8)((()=>r.state.membersFilter),[r]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(kt().K,{spaceStore:s,inviteLinkCode:i,spacePermissionsSettingsStore:r}),(0,ae.jsxs)("div",{style:{height:"100%",paddingBottom:48},children:[(0,ae.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:[(0,ae.jsx)(os,{store:s}),(0,ae.jsx)(q().A,{placeholder:p.formatMessage({id:"spacePermissionsSettings.membersTab.filterMembersInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,u().q)(es(m)),showClearButton:!0,format:q().C.Small,value:g,style:Ut,onChange:e=>{r.setState({...r.state,membersFilter:e.target.value,limitMembers:!0})},onClick:()=>{C().Z9(c,{current_tab:Xe().d.Members})}})]}),d?(0,ae.jsx)(Ss,{store:s,recentlyRemovedMembersStore:l,membersFilter:g,spacePermissionsSettingsStore:r}):(0,ae.jsx)(ms,{store:s,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:l,members:t})]})]})}function ws(e){let{guests:t,store:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:a}=e;const r=(0,n().v3)(),l=(0,o().K8)((()=>s.canAdmin()),[s]),d=(0,o().K8)((()=>{const e=Tt().A.state.shouldUseEdgeCache,t=Bt().default.checkGate({gateName:"edge_cache_settings"}),s=Bt().default.checkGate({gateName:"virtualize_people_table"});return e&&t||s}),[]),c=r.currentUser.id,u=s.id,p=(0,nt()._X)({name:"internal_guests",spaceId:u,userId:c,amount:0}),m=(0,Ot().q)(),g=(0,qe().r)(),h=(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.deeplinkCard.title",defaultMessage:"Change who can invite guests in the <bold>Security</bold> tab",values:{bold:e=>(0,ae.jsx)("span",{style:{fontWeight:k().Wy.semibold},children:e})}}),f=p&&(0,mt().N9)(p,{available:()=>l?(0,ae.jsx)(At().A,{icon:ut().h,title:h,deeplinkTab:{currentTab:"security",defaultSubtab:void 0}}):null,unavailable:e=>{let{limit:t,upsell:s}=e;return l?"sales_assisted"===m?(0,ae.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,ae.jsx)(It().I,{children:(0,ae.jsx)(ft().l,{iconGroup:dt().A,display:"inline",tint:"yellow",label:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.guestsTab.limitBanner.title",defaultMessage:"Your workspace is over the {limit}-guest limit",values:{limit:t.total}}),description:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.guestsTab.limitBanner.description.sales_assisted",defaultMessage:"Find teammates who are currently guests by filtering to your workspace’s email domains and upgrade them to members to continue collaborating. To get more guest seats, reach out to your account manager."})})})}):"product"===s.type||"none"===s.type?(0,ae.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,ae.jsx)(It().I,{children:(0,ae.jsx)(ft().l,{iconGroup:dt().A,display:"inline",tint:"yellow",label:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.guestsTab.limitBanner.title",defaultMessage:"Your workspace is over the {limit}-guest limit",values:{limit:t.total}}),description:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.guestsTab.limitBanner.description",defaultMessage:"Find teammates who are currently guests by filtering to your workspace’s email domains and upgrade them to members to continue collaborating. To manage guest seats, <saleslink>reach out to sales</saleslink>.",values:{saleslink:e=>(0,ae.jsx)(ce().A,{onClick:()=>(0,Rt().lK)({initialQuestion:"manage_guests",openedFrom:"permissions_guest_limit_banner"}),children:e})}})})})}):(0,j().HB)(s):null}}),S=(0,o().K8)((()=>(0,Ue().Qd)()),[]);return g&&0!==g?(0,ae.jsxs)(ae.Fragment,{children:[f,S?(0,ae.jsx)(fs,{store:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:a,guests:t}):d?(0,ae.jsx)(js,{store:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:a}):(0,ae.jsx)(hs,{store:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:a,guests:t})]}):(0,ae.jsx)(At().A,{icon:ut().h,title:l?(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.deeplinkCard.noGuests.title",defaultMessage:"<bold>Your workspace has no guests.</bold> Change who can invite guests in the <bold>Security</bold> tab.",values:{bold:e=>(0,ae.jsx)("span",{style:{fontWeight:k().Wy.semibold},children:e})}}):void 0,deeplinkTab:l?{currentTab:"security",defaultSubtab:void 0}:void 0})}const Ms={pageIds:[]};function js(e){let{store:t,spacePermissionsSettingsStore:s,recentlyRemovedMembersStore:l}=e;const d=(0,v().tz)(),c=(0,n().v3)(),p=(0,a().DP)(),m=(0,a().IS)((e=>({emptyMessage:{color:e.text.secondary,boxShadow:`inset 0 -1px 0 ${e.tableDividerColor}`,display:"flex",height:32,padding:"0px 4px",alignItems:"center"},searchContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},container:{height:"100%"},tableContainer:{paddingBottom:36}})),[]),{guestsFilter:g,sort:f}=(0,o().K8)((()=>({guestsFilter:s.state.guestsFilter,sort:s.state.sorts.guests})),[s]),S=(0,i.useCallback)((()=>{ls("guests","name",s)}),[s]),y=(0,i.useMemo)((()=>f?{field:"name"===f.by?"name_normalized":"type",direction:f.asc?"asc":"desc"}:{field:"name_normalized",direction:"asc"}),[f]),x=(0,He().n)({query:g,sort:y,filter:"guests",limit:30}),A=(0,o().K8)((()=>null==x?void 0:x.rowsStore.state.rows),[x]),w=(0,o().O$)(l),j=(0,o().K8)((()=>t.canEditMembership()),[t]),[k,_]=(0,i.useState)({});(0,r().Yb)((async()=>{if(!A)return;if(!j)return;const e=A.map((e=>e.id)),s=await T().callApi({eventName:"getGuestPagesForUserIds",environment:c,data:{spaceId:t.id,guestUserIds:e},headers:(0,h().WS)({cellId:void 0,spaceId:t.id})});"success"===s.type&&_((t=>{const i={...t,...s.data.guestIdToPages};for(const s of e)void 0===i[s]&&(i[s]=Ms);return i}))}),[t,c,A,j]);const I=(0,o().K8)((()=>{const e=rt().subscriptionDataStoreInstance.state;return Boolean(e&&ot().Fq(e))}),[]),P=(0,o().K8)((()=>{const e=rt().subscriptionDataStoreInstance.state;return Boolean(e&&"subscribed_admin"===e.type&&Bt().default.checkGate({gateName:"enable_guest_export"}))}),[]),B=(0,i.useCallback)((e=>{var s,i;if("page_guest"===((0,Pt().dp)(t,e.id).getMembershipType()??e.membership_type))return{id:e.id,userStore:ke().LU.createChildStore(t,{id:e.id,table:b().oo}),spaceStore:t,userRole:"none",restorationStatus:null==w||null===(s=w.find((t=>t.userId===e.id)))||void 0===s?void 0:s.restorationStatus,guestPageIds:null===(i=k[e.id])||void 0===i?void 0:i.pageIds,subscribed:I}}),[t,w,k,I]),R=(0,i.useMemo)((()=>M().oE([ks,j?Cs:void 0])),[j]);return(0,ae.jsxs)("div",{style:m.container,children:[(0,ae.jsxs)("div",{style:m.searchContainer,children:[(0,ae.jsx)(q().A,{placeholder:d.formatMessage({id:"spacePermissionsSettings.membersTab.filterGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,u().q)(es(p)),showClearButton:!0,format:q().C.Small,value:g,style:Ut,onChange:e=>{s.setState({...s.state,guestsFilter:e.target.value,limitGuests:!0})},onClick:()=>{C().Z9(c,{current_tab:Xe().d.Guests})}}),P?(0,ae.jsx)(Y().A,{size:"lg",disabled:!1,color:"uiBlue",onClick:()=>gt().li({spaceStore:t,intl:d,environment:c}),disabledFeedback:!0,children:(0,ae.jsx)(v().sA,{id:"exportGuestsButton.label",defaultMessage:"Export guests as CSV"})}):void 0]}),(0,ae.jsx)(yt().M,{columns:R,listSource:x,transformRow:B,onSortChange:S,sort:f,estimatedRowHeight:52,allowHorizontalScroll:!0,renderEmpty:()=>(0,ae.jsx)(Z().A,{isSmall:!0,style:m.emptyMessage,children:(0,ae.jsx)(v().sA,{id:"membersTab.emptySearch",defaultMessage:"No search results"})}),style:m.tableContainer})]})}const ks={id:"name",headerTitle:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),cellPadding:"8px 0",widthData:{widthPercent:80,minWidth:200},renderCell:e=>(0,ae.jsx)(Qe().A,{actorStore:e.userStore,restorationStatus:e.restorationStatus,spaceRole:(0,Qe().v)(e.userRole),hideRolePill:!0}),sortable:!0},Cs={id:"pages",headerTitle:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.userTable.pagesColumn.header",defaultMessage:"Pages"}),headerCellPadding:"0 0 0 8px",cellPadding:"8px 0",widthData:{widthPercent:20,minWidth:100},renderCell:e=>void 0!==e.guestPageIds?(0,ae.jsx)(le().V,{store:e.spaceStore,guestPageIds:e.guestPageIds,guestStore:e.userStore,isSubscribed:e.subscribed,hideActionButtons:!1}):(0,ae.jsx)(ht().A,{style:{width:60,height:12,borderRadius:4,marginLeft:8}}),sortable:!1},_s={maxWidth:275,borderRadius:30},Is={marginTop:8},Ps={maxWidth:160},Ts=50;function Bs(e){const{store:t,isMobile:l,unreadAccessRequests:d,disableAddMembers:c}=e,u=(0,n().v3)(),p=(0,o().uB)(void 0,Xe().A),m=(0,o().uB)(void 0,yi),g=(0,at().o)({spaceId:t.id});(0,s(852507).l)((()=>{!function(e){Je().A.state.open&&"members"===Je().A.state.currentTab&&Je().A.state.defaultSubtab&&(e.setState({...e.state,currentTab:Je().A.state.defaultSubtab}),Je().A.setState({...Je().A.state,defaultSubtab:void 0}))}(p),async function(e,t,s){if(!t.canAdmin())return;const i=await T().callApi({eventName:"getRecentlyRemovedUsers",environment:e,data:{spaceId:t.id}});if("failed"===i.type)throw R().Qg(i),i;s.setState(i.data.recentlyRemovedMembers)}(u,t,m)}));const[{value:h}]=(0,r().Yb)((async()=>{const e=await T().callApi({eventName:"getAccessRequests",environment:u,data:{parentTable:"space",parentId:t.id,size:100,status:"pending"}});if("failed"===e.type)return[];const i=e.data.accessRequestIds;return await s(746970).si(u,t,i)}),[u,t],{throttle:1e3}),f=(0,o().O$)(rt().subscriptionDataStoreInstance),S=(0,o().K8)((()=>f?ot().Be(f):[]),[f]),y=(0,o().K8)((()=>!!f&&M().Si(S.map((e=>ke().LU.createChildStore(t,{table:b().oo,id:e.userId}).isReady())))),[t,f,S]),A=(0,o().K8)((()=>S.filter(x().c7)),[S]),w=(0,o().K8)((()=>S.filter(x().QE)),[S]),_=(0,o().K8)((()=>(0,Ue().Qd)()),[]),{tabs:I,selectedTabIndex:P,currentTab:B}=(0,o().K8)((()=>{const e=qs(u,t),s=e.map((e=>(0,ae.jsx)(Ds,{tab:e,unreadAccessRequests:d,accessRequestRenderValues:h},e))),i=p.state.currentTab;return{tabs:s,selectedTabIndex:e.indexOf(i),currentTab:i}}),[u,t,p,d,h]),D=(0,s(359941).V)({spaceStore:t}),N=(0,i.useCallback)((e=>{!function(e,t,s,i){const n=qs(t,s)[e];switch(n){case Xe().d.Members:C().K4(t,{tab:"members"});break;case Xe().d.Groups:C().K4(t,{tab:"groups"});break;case Xe().d.Guests:C().K4(t,{tab:"guests"});break;case Xe().d.Reprovisioning:C().K4(t,{tab:"reprovisioning"});break;case Xe().d.Requests:C().K4(t,{tab:"requests"});break;case Xe().d.Contacts:C().K4(t,{tab:"contacts"});break;default:(0,j().HB)(n)}i.state.currentTab===Xe().d.Requests&&n!==Xe().d.Requests&&Ze().A.reset();ri(n,i)}(e,u,t,p)}),[u,t,p]),L=(0,a().IS)((e=>({tabBarMenuItem:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14,overflowY:void 0,overflowX:void 0},tabTitle:{fontSize:16},labelContainer:{display:"flex",flexDirection:"column",gap:8,marginBottom:20},peopleTabTitleContainer:{display:"flex",alignItems:"center",gap:7},peopleTabTitle:{fontWeight:k().Wy.medium,fontSize:17},peopleSubtitle:{fontSize:15},peopleDirectoryLinkContainer:{marginBottom:20,display:"flex",justifyContent:"flex-end"}})),[]);if(!f||!y||void 0===h)return(0,ae.jsx)("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ae.jsx)(W().A,{})});if(l)return(0,ae.jsx)(Rs,{store:t,members:A,spacePermissionsSettingsStore:p,recentlyRemovedMembersStore:m,disableAddMembers:c});const O=(0,ae.jsxs)(ae.Fragment,{children:[D?(0,ae.jsx)("div",{style:L.peopleDirectoryLinkContainer,children:(0,ae.jsx)(s(301863).$,{})}):void 0,(0,ae.jsx)(s(987017).Ay,{tabs:I,selectedIndex:P,onChange:N,style:L.tabBarMenuItem,tabTitleStyle:L.tabTitle}),_?(0,ae.jsxs)("div",{style:L.labelContainer,children:[(0,ae.jsxs)("div",{style:L.peopleTabTitleContainer,children:[(0,ae.jsx)(Z().A,{style:L.peopleTabTitle,children:(0,ae.jsx)(v().sA,{id:"spaceBasicSettings.people.title",defaultMessage:"People"})}),(0,ae.jsx)(de().A,{href:(0,Ve().xS)("guides.members"),analyticsFrom:"members_settings"})]}),(0,ae.jsx)(Z().A,{isSecondaryColor:!0,style:L.peopleSubtitle,children:(0,ae.jsx)(v().sA,{id:"spaceBasicSettings.people.subtitle",defaultMessage:"Manage members, external guests, groups and permissions."})})]}):void 0,(0,ae.jsx)(zt,{store:t,currentTab:B,members:A,inviteLinkCode:g,guests:w,spacePermissionsSettingsStore:p,recentlyRemovedMembersStore:m,accessRequestRenderValues:h})]});return(0,ae.jsx)(s(843878).Ay,{children:O})}function Rs(e){const{store:t,members:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:n,disableAddMembers:a}=e,r=(0,o().K8)((()=>t.canEditMembership()&&!a),[t,a]),l=Xs();return(0,ae.jsxs)("div",{style:{height:"100%",position:"relative",display:"flex",flexDirection:"column"},children:[r?(0,ae.jsxs)(X().A,{shouldShowBottomDivider:!0,children:[(0,ae.jsx)(ni,{store:t}),(0,ae.jsx)("div",{style:l,children:(0,ae.jsx)(oi,{store:t,isMobile:!0,spacePermissionsSettingsStore:i})})]}):void 0,(0,ae.jsx)(Si,{isMobile:!0,store:t,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:n,members:s})]})}function Ds(e){let{tab:t,accessRequestRenderValues:s,unreadAccessRequests:i}=e;const r=(0,n().v3)(),l=(0,o().K8)((()=>Ws(r)),[r]),d=(0,o().K8)((()=>se().A.state.permissionGroupsAndMemberCounts.length),[]),c=(0,o().K8)((()=>(0,Ue().Qd)()),[]),u=(0,qe().r)()??0,p=(0,We().V)()??1,m=(0,a().IS)((e=>({lightTextColor:{color:e.text.tertiary}})),[]);switch(t){case Xe().d.Members:return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.membersTab.title",defaultMessage:"Members"}),(0,ae.jsx)("span",{children:" "}),(0,ae.jsx)("span",{style:m.lightTextColor,children:p})]});case Xe().d.Groups:return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(v().sA,{id:"spaceBasicSettings.groupsTab.title",defaultMessage:"Groups"}),l&&(0,j().O9)(d)?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("span",{children:" "}),(0,ae.jsx)("span",{style:m.lightTextColor,children:d})]}):void 0]});case Xe().d.Guests:return(0,ae.jsxs)(ae.Fragment,{children:[c?(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.externalTab.title",defaultMessage:"External"}):(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.guestsTab.title",defaultMessage:"Guests"}),(0,ae.jsx)("span",{children:" "}),(0,ae.jsx)("span",{style:m.lightTextColor,children:u})]});case Xe().d.Reprovisioning:return(0,ae.jsx)(v().sA,{id:"spaceBasicSettings.reprovisioningTab.title",defaultMessage:"Recently left"});case Xe().d.Requests:return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(v().sA,{id:"spaceBasicSettings.requestsTab.title",defaultMessage:"Requests"}),(0,ae.jsx)("span",{children:" "}),(0,ae.jsx)("span",{style:m.lightTextColor,children:(0,ae.jsx)(ai,{accessRequestRenderValues:s})}),(0,ae.jsx)(Js,{unreadAccessRequests:i})]});case Xe().d.Contacts:return(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.contactsTab.title",defaultMessage:"Contacts"});default:(0,j().HB)(t)}}const Ns=i.memo(Bs);function Ls(){const e=rt().subscriptionDataStoreInstance.state;return Boolean(e&&ot().Fq(e))}function Os(){return(0,ae.jsx)("div",{style:{marginTop:24,marginBottom:24},children:(0,ae.jsx)(de().A,{title:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.helpButton.caption",defaultMessage:"Learn about adding members to your workspace"}),href:(0,Ve().xS)("guides.members"),analyticsFrom:"members_settings"})})}function Fs(e){const{up:t}=e,s={width:10,height:10,marginLeft:4};return t?(0,l().m)({...s,transform:"rotate(180deg)"}):(0,l().m)(s)}function Us(e){let{userStore:t,restorationStatus:s}=e;return(0,ae.jsx)(Qe().A,{actorStore:t,restorationStatus:s})}function Es(e){let{user:t,userPermissionGroupIds:s}=e;return"none"!==t.role?(0,ae.jsx)(Le().Ay,{memberId:t.userId,userPermissionGroupIds:s}):null}function Gs(e){return Boolean(e.getKeyStore("invite_link_enabled").getValue())}function Vs(e,t){var s;return t.canAdmin()&&(0,nt().zD)(e,{name:"content_reprovisioning",spaceId:t.id,userId:null===(s=e.currentUser)||void 0===s?void 0:s.id})}function zs(e){return e.canEditMembership()&&(0,Ue().x3)()}function Ks(e){let{store:t}=e;return(0,o().K8)((()=>L().CU(t)),[t])?(0,ae.jsx)(Z().A,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,ae.jsx)(v().sA,{id:"spaceBasicSettings.membersTab.manageMembersWithLinkCaption",defaultMessage:"Manage members here."})}):(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Z().A,{isSmall:!0,isMultiline:!0,style:{width:"80%",marginBottom:6},children:(0,ae.jsx)(v().sA,{id:"spaceBasicSettings.membersTab.manageMembersDescriptionText",defaultMessage:"Manage members here, or <setupdomainlink>set up a domain</setupdomainlink>, so everyone with allowed email domains can join the workspace automatically.",values:{setupdomainlink:e=>(0,ae.jsx)(ce().A,{onClick:()=>{Je().A.setState({...Je().A.state,currentTab:"settings",defaultSubtab:void 0})},children:e})}})}),(0,ae.jsx)(Z().A,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,ae.jsx)(v().sA,{id:"spaceBasicSettings.membersTab.payPerMemberCaption",defaultMessage:"You will be charged for each member added. Visit <billingguidelink>our guide</billingguidelink> for more information on how we bill.",values:{billingguidelink:e=>(0,ae.jsx)(ce().A,{href:(0,Ve().xS)("guides.billingGuide"),children:e})}})})]})}function qs(e,t){return[Xe().d.Members,Xe().d.Groups,Xe().d.Guests,...Vs(e,t)?[Xe().d.Reprovisioning]:[],...zs(t)?[Xe().d.Requests]:[]]}function Ws(e){return ot().vl(e)&&Ls()}function Hs(e){let{store:t}=e;const s=(0,n().v3)();return(0,o().K8)((()=>t.isDefined()),[t])?(0,ae.jsx)(v().sA,{id:"spacePermissionSettings.spaceMembers.inviteLink.resetLink",defaultMessage:"You can <resetlink>reset the link</resetlink> for all space members to generate a new invite link.",values:{resetlink:e=>(0,ae.jsx)(ce().A,{onClick:()=>{R().ui({message:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.inviteLinkRefreshModal.description",defaultMessage:"Are you sure you want to reset the invite link for all space members? Your old one will no longer be able to be used."}),showCancel:!0,keepFocus:!1,handleCancel:R().zw,items:[{label:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.inviteLinkRefreshModal.accept",defaultMessage:"Reset"}),color:"red",onAccept:async()=>{await T().callApi({eventName:"refreshInviteLink",environment:s,data:{spaceId:t.id}}),tt().x(s)}}]})},children:e})}}):null}function $s(e){let{inviteLinkUrl:t,isMobile:s}=e;const i=(0,n().v3)(),{mobileNative:o}=i,a=(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.spaceMembers.inviteLink.copyButton",defaultMessage:"Copy link"}),r=async()=>{const e=await B().R.clipboardActions.load();e.copyString({environment:i,stringValue:t,copiedMessage:e.clipboardMessages.copiedLinkToClipboard}),(0,P().b)(i)},l=()=>{o&&o.share(t),(0,P().b)(i)};return s?(0,ae.jsxs)("div",{children:[(0,ae.jsx)(q().A,{type:"text",format:q().C.Default,value:t,disabled:!0}),o?(0,ae.jsx)(Y().A,{size:"lg",onClick:l,style:{marginTop:10,width:"100%"},children:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.spaceMembers.inviteLink.shareButton",defaultMessage:"Share link"})}):(0,ae.jsx)(Y().A,{size:"lg",onClick:r,style:{marginTop:10,width:"100%"},children:a})]}):(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",marginTop:12},children:[(0,ae.jsx)(q().A,{type:"text",format:q().C.Default,value:t,disabled:!0,style:{borderTopRightRadius:0,borderBottomRightRadius:0,width:"calc(100% - 90px)",height:32}}),(0,ae.jsx)(Q().A,{onClick:r,style:{borderTopLeftRadius:0,borderBottomLeftRadius:0},size:"lg",children:a})]})}function Ys(e){let{group:t,user:s,userStore:i,store:o}=e;const a=(0,v().tz)(),r=(0,n().v3)();return(0,ae.jsx)(V().Ay,{popupType:V().z7.Popup,renderOrigin:e=>(0,ae.jsx)(K().A,{...e,icon:d()._,iconStyle:{height:14,width:14},ariaLabel:a.formatMessage({id:"spacePermissionsSettings.externalTab.userThreeDotMenu.ariaLabel",defaultMessage:"Convert to member or remove from workspace"})}),render:e=>{const n=[{key:"convertToMember",render:e=>(0,ae.jsx)(G().A,{...e,icon:(0,p().V)({height:17,width:17}),title:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.title",defaultMessage:"Convert to member"}),shouldWrapCaption:!0,caption:"team_guests"===t&&(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.caption",defaultMessage:"Workspace members are not restricted to specific teamspaces"})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e,o=Ls()?"read_and_write":"editor";R().ui({message:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.message",defaultMessage:"Are you sure you want to convert this user into a workspace member?"}),description:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.description",defaultMessage:"This is a billable event."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{R().zw(),n.close()},items:[{label:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.confirm",defaultMessage:"Convert to workspace member"}),color:"blue",onAccept:async()=>{n.close(),await O().P({environment:s,guestUserStore:i,role:o,store:t,isConvertToAdmin:!Ls(),origin:"page_or_teamspace_guest_three_dot_menu"})}}]})}({user:s,userStore:i,parent:e},o,r)},{key:"removeFromWorkspace",render:e=>(0,ae.jsx)(G().A,{...e,icon:(0,c()._)({height:17,width:17,color:A().Ay.red}),title:(0,ae.jsx)("span",{style:{color:A().Ay.red},children:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.title",defaultMessage:"Remove from workspace"})})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e;R().ui({message:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.message",defaultMessage:"Are you sure you want to remove this user from the workspace?"}),description:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.description",defaultMessage:"This action will completely remove the user from the workspace, including any teamspaces and pages they have access to."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{R().zw(),n.close()},items:[{label:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.confirm",defaultMessage:"Remove from workspace"}),color:"red",onAccept:async()=>{n.close(),await O().D({environment:s,guestUserStore:i,store:t})}}]})}({user:s,userStore:i,parent:e},o,r)}],a=[{key:"team section",render:e=>(0,ae.jsx)(X().A,{...e}),items:n}];return(0,ae.jsx)(H().A,{menuType:Ae().gu.Popup,children:(0,ae.jsx)($().Ay,{type:$().Oh.Vertical,sections:a,initialFocus:void 0,style:{minWidth:265}})})}})}function Qs(e){return{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.icon.secondary}}function Xs(){const{WindowSizeStore:e}=(0,n().v3)(),t=(0,o().K8)((()=>e.getSafePaddingRightCSS(14)),[e]);return(0,a().IS)((e=>({mobileMenuItem:{display:"flex",paddingTop:14,paddingBottom:14,paddingLeft:14,paddingRight:t,background:e.cardContentBackground}})),[t]).mobileMenuItem}function Js(e){let{unreadAccessRequests:t}=e;const s=(0,a().DP)();return t&&t>0?(0,ae.jsx)(he().m,{color:s.redBadgeBackground,style:{marginLeft:6}}):null}function Zs(){const e=(0,v().YK)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});D().m({message:e.updatingPermissions})}function ei(){D().V()}async function ti(e,t,s,i,n){const o=n.currentUser.id;if(e.userId!==o||"none"!==t)Zs(),"none"===t?(await T().callApi({eventName:"removeUsersFromSpace",environment:n,data:{userIds:[e.userId],spaceId:i.id,removePagePermissions:!0,revokeUserTokens:!1}}),await tt().nO({environment:n,spaceStore:i})):F().createAndCommit({userAction:"SpacePermissionsSettings.handleMemberPermissionRoleChange",environment:n,canUndo:!0,perform:s=>N().dy({environment:n,spaceStore:i,permissionItems:[{type:"user_permission",role:t,user_id:e.userId}],transaction:s,from:"space_permission_setting_table"})}),ei();else{await L().ev({environment:n,spaceId:i.id,userSettingsStore:s})&&(I().KX(n,{invite_origin:"workspace_leave",domainType:(0,Ee().FX)(),new_workspace_member_count:-1,new_workspace_member_ids:[o]}),Je().A.setState({...Je().A.state,open:!1}))}}function si(e){let{buttonStyle:t,store:s}=e;const a=(0,n().v3)(),r=(0,o().K8)((()=>s.canEditMembership()),[s]),l=(0,o().K8)((()=>!r&&!s.getDisableMembershipRequests()&&(0,Ue().x3)()),[r,s]),d=(0,o().K8)((()=>Ls()),[]),c=(0,i.useCallback)((()=>{(0,Ye().q)(a)}),[a]);return l?(0,ae.jsx)($e().cx,{store:s,analyticsFrom:"space_settings_add_members",origin:(0,ae.jsx)(Q().A,{size:"lg",onClick:c,children:(0,ae.jsx)(v().sA,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})}):(0,ae.jsxs)("div",{style:{display:"flex"},children:[(0,ae.jsx)(Oe().H,{disabled:!r,store:s,onInviteClick:Zs,onInviteComplete:ei,isSubscribed:d,membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:t,analyticsFrom:"space_settings_add_members"}),(0,ae.jsx)(Fe().R,{inviteOrigin:"space_setting_slack_imports",canEditPermission:r,onInviteClick:Zs,onInviteComplete:ei})]})}function ii(e){let{member:t,store:s}=e;const i=(0,n().v3)(),a=(0,v().tz)(),r=i.currentUser.id,{currentUserSettingsStore:l,currentSpaceStore:d}=(0,o().K8)((()=>{const{currentUserSettingsStore:e,currentSpaceStore:t}=je().default.state;return{currentUserSettingsStore:e,currentSpaceStore:t}}),[]),c=(0,o().K8)((()=>function(e,t){const s=e.formatMessage({id:"spacePermissionSettings.memberRoleSelect.permissionitem.roleUpgradeDisabled",defaultMessage:"Cannot upgrade to a higher role than member"}),i=(0,Ge().Qu)();return M().oE(f().Gb.map((e=>{if(i||"membership_admin"!==e)return{role:e,disabledInfo:!t.canAdmin()&&f().EH(e)?{isDisabled:!0,disabledMessage:s}:void 0}})))}(a,s)),[a,s]),u=(0,o().K8)((()=>!(s.canAdmin()||s.canEditMembership()&&(f().NB(t.role)||t.userId===r))),[r,t,s]);return l?(0,ae.jsx)(pe().Ay,{role:t.role,table:S().NX,type:"user_permission",disabled:u,isUserPermission:t.userId===r,upgradeButtonName:"space_permission_item",availableRoleItems:c,onChange:async e=>{await ti(t,e,l,s,i)},buttonStyle:Ps,onRemoveMemberClick:async()=>{let e,n;if(it().R()&&(n=m().JW(),e=await(0,lt().G)({environment:i,contractionSurveyId:n}),!e))return null;await(async()=>await(0,st().B)(i,t.userId,null==d?void 0:d.id))()&&(await(async e=>{await ti(t,"none",l,s,i),I().ej(i,{member_user_id:t.userId,member_role:t.role,contraction_survey_id:e,is_space:!0,domainType:(0,Ee().FX)(),new_workspace_member_count:-1})})(n),e&&et().x(i))}}):null}function ni(e){let{store:t}=e;const s=(0,a().DP)(),i=Xs();return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{style:i,children:(0,ae.jsx)(si,{store:t,buttonStyle:{flex:1}})}),(0,ae.jsx)("div",{style:{borderBottom:`1px solid ${s.regularDividerColor}`}})]})}function oi(e){let{store:t,isMobile:s,spacePermissionsSettingsStore:i}=e;const a=(0,n().v3)(),r=(0,ge().Gg)({spaceStore:t}),l=(0,at().o)({spaceId:t.id}),d=(0,o().K8)((()=>function(e,t,s){if(void 0===s)return;const i=e.id;return s?(0,ze().X$)(t,i,s):void 0}(t,a,l)),[a,t,l]),c=(0,o().K8)((()=>Gs(t)),[t]);return r&&d?(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",cursor:"pointer"},children:[(0,ae.jsxs)("div",{style:{marginRight:8,flexGrow:1},children:[(0,ae.jsx)(me().A,{children:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.spaceMembers.inviteLink.title",defaultMessage:"Invite link"})}),(0,ae.jsxs)(Z().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"},children:[(0,ae.jsx)(v().sA,{id:"spacePermissionSettings.spaceMembers.inviteLink.caption",defaultMessage:"Share this secret link to invite people to this workspace. Only users who can invite members can see this."})," ",s?void 0:(0,ae.jsx)(Hs,{store:t})]})]}),(0,ae.jsx)("div",{style:{marginTop:5},children:(0,ae.jsx)(J().A,{on:c,onClick:()=>function(e,t){const s=!Gs(e);_().OE(t,{enabled:s}),F().createAndCommit({userAction:"SpacePermissionsSettings.handleInviteLinkClick",environment:t,canUndo:!0,perform:t=>{L().Xk({transaction:t,spaceStore:e,inviteLinkEnabled:Boolean(s)})}})}(t,a)})})]}),i&&c&&d?(0,ae.jsx)("div",{style:s?{marginTop:5}:void 0,children:(0,ae.jsx)($s,{isMobile:s,inviteLinkUrl:d})}):void 0,(0,ae.jsx)(z().A,{size:40})]}):null}function ai(e){let{accessRequestRenderValues:t}=e;const s=(0,o().K8)((()=>t?t.filter((e=>"pending"===e.accessRequest.status)).length:0),[t]);return t?(0,ae.jsx)("span",{children:s}):(0,ae.jsx)("span",{})}function ri(e,t){t.setState({...t.state,currentTab:e})}function li(e,t,s){const i=s.state.sorts[e];let n;n=!(!i||i.by!==t)&&i.asc,s.update((s=>({...s,sorts:{...s.sorts,[e]:{by:t,asc:!n}}})))}function di(e){let{groupIds:t,store:s,spacePermissionsSettingsStore:i}=e;return(0,ae.jsx)(re,{spaceStore:s,groupIds:t,onGroupClick:()=>{ri(Xe().d.Groups,i)}})}function ci(e){let{group:t,user:s,userStore:i,store:n}=e;const a=(0,o().K8)((()=>(0,Ue().Qd)()),[]),r=(0,o().K8)((()=>Ls()),[]);return"none"===s.role?a&&"team_guests"===t?(0,ae.jsx)(Ne,{teamGuest:s}):(0,ae.jsx)(le().V,{store:n,guestPageIds:s.guestPageIds,guestStore:i,isSubscribed:r,hideActionButtons:a}):(0,ae.jsx)(ii,{store:n,member:s})}function ui(e){let{members:t,store:s}=e;return(0,Ke().X)("edge_cache_settings")?(0,ae.jsx)(pi,{store:s}):(0,ae.jsx)(gi,{members:t,store:s})}function pi(e){let{store:t}=e;const s=(0,a().IS)((e=>({container:{flex:1,width:"100%",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:`0 -1px 0 ${e.regularDividerColor}`},loadingContainer:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"}})),[]),i=(0,He().n)({sort:{field:"type",direction:"desc"},query:"",filter:"members",limit:30}),n=(0,o().K8)((()=>!(null!=i&&i.rowsStore.state.rows)),[i]);return!i||n?(0,ae.jsx)("div",{style:s.loadingContainer,children:(0,ae.jsx)(W().A,{})}):(0,ae.jsx)("div",{style:s.container,children:(0,ae.jsx)(ue().u,{listSource:i,renderRow:e=>(0,ae.jsx)(mi,{member:e,spaceStore:t}),estimateSize:()=>57})})}function mi(e){let{member:t,spaceStore:s}=e;const i=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",padding:10,paddingRight:2,gap:5,justifyContent:"space-between",width:"100%",borderBottom:`1px solid ${e.lightDividerColor}`,background:e.cardContentBackground},memberContainer:{flexShrink:1,minWidth:50},permissionContainer:{textAlign:"center",marginLeft:"auto",flexShrink:0}})),[]),n=(0,o().K8)((()=>ke().LU.createChildStore(s,{table:b().oo,id:t.id})),[t,s]);return void 0!==t.membership_type&&(0,y().MN)(t.membership_type)?(0,ae.jsxs)("div",{style:i.container,children:[(0,ae.jsx)("div",{style:i.memberContainer,children:(0,ae.jsx)(Us,{userStore:n})}),(0,ae.jsx)("div",{style:i.permissionContainer,children:(0,ae.jsx)(ci,{store:s,group:"members",user:{userId:t.id,role:(0,y().C4)(t.membership_type)},userStore:n})})]},t.id):null}function gi(e){let{members:t,store:s}=e;const i=(0,a().IS)((e=>({container:{borderTop:`1px solid ${e.lightDividerColor}`},rowContainer:{display:"flex",alignItems:"center",padding:10,paddingRight:2,gap:5,justifyContent:"space-between",width:"100%",borderBottom:`1px solid ${e.lightDividerColor}`,background:e.cardContentBackground},memberContainer:{flexShrink:1,minWidth:50},permissionContainer:{textAlign:"center",marginLeft:"auto",flexShrink:0}})),[]),n=(0,o().K8)((()=>t.map((e=>[e,ke().LU.createChildStore(s,{table:b().oo,id:e.userId})]))),[t,s]);return(0,ae.jsx)("div",{style:i.container,children:n.map((e=>{let[t,n]=e;return(0,ae.jsxs)("div",{style:i.rowContainer,children:[(0,ae.jsx)("div",{style:i.memberContainer,children:(0,ae.jsx)(Us,{userStore:n})}),(0,ae.jsx)("div",{style:i.permissionContainer,children:(0,ae.jsx)(ci,{store:s,group:"members",user:t,userStore:n})})]},t.userId)}))})}function hi(e){let{group:t,spaceMembers:s,store:a,spacePermissionsSettingsStore:l,recentlyRemovedMembersStore:d}=e;const c=(0,n().v3)(),u=(0,o().K8)((()=>l.state.sorts[t]),[t,l]),p={key:"user",header:(0,ae.jsxs)(U().A,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{li(t,"name",l)},style:{display:"flex",alignItems:"center"},children:[(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),u&&"name"===u.by?(0,ae.jsx)(Fs,{up:u.asc}):void 0]}),style:{width:"45%"}},m={key:"groups",header:(0,ae.jsx)(U().A,{disabled:!0,ignoreLocalHoverState:!0,style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.userTable.groupsColumn.header",defaultMessage:"Groups"})}),style:{width:"15%"}},g={key:"teams",header:(0,ae.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.userTable.teamsColumn.header",defaultMessage:"Teamspaces"})}),style:{width:"20%",textAlign:"center"}},f={key:"access_level",header:(0,ae.jsxs)(U().A,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{li(t,"role",l)},style:{display:"flex",alignItems:"center",paddingLeft:8},children:[(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"}),u&&"role"===u.by?(0,ae.jsx)(Fs,{up:u.asc}):void 0]}),style:{width:"20%",textAlign:"center"}},S={key:"pages",header:(0,ae.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.userTable.pagesColumn.header",defaultMessage:"Pages"})}),style:{width:"20%",textAlign:"center"}},y={key:"three_dot",header:(0,ae.jsx)(U().A,{disabled:!0,ignoreLocalHoverState:!0})},x=(0,o().K8)((()=>Ws(c)&&"team_guests"!==t&&"guests"!==t),[c,t]),A=(0,o().K8)((()=>("team_guests"===t||"guests"===t)&&(0,Ue().Qd)()&&a.canEditMembership()),[t,a]),w=(0,o().K8)((()=>(0,we().zI)()>0),[]);let M="members"===t&&w?[p,g,f]:A?[p,S,y]:[p,S];x&&(M=[...M.slice(0,1),m,...M.slice(1)]);const j=(0,o().O$)(d),k=(0,o().K8)((()=>s.map((e=>({member:e,store:ke().LU.createChildStore(a,{table:b().oo,id:e.userId})}))).filter((e=>e.store.isDefined()))),[s,a]),C=(0,o().O$)(je().AppStoreCurrentSpaceStore),[{value:_}]=(0,r().Yb)((async()=>{if(!C)return;const e=await T().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:c,data:{userIds:k.map((e=>e.member.userId)),spaceId:C.id},headers:(0,h().WS)({cellId:void 0,spaceId:C.id})});return"success"===e.type?e.data.userToGroupMap:void 0}),[C,c,k]);return(0,ae.jsx)(fe().A,{columns:M,rows:k.map((e=>{var s;const{member:n,store:o}=e,r=_&&_[n.userId],d=Array.isArray(j)?null===(s=j.find((e=>e.userId===n.userId)))||void 0===s?void 0:s.restorationStatus:void 0,c=[(0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)(Us,{userStore:o,restorationStatus:d})},"member")];return x&&c.push((0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)(di,{store:a,spacePermissionsSettingsStore:l,groupIds:r||[]})},"groups")),"members"===t&&w&&c.push((0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)(Es,{user:n,userPermissionGroupIds:new Set(r??[])})},"teams")),c.push((0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)(ci,{store:a,group:t,user:n,userStore:o})},"user-permission")),A&&c.push((0,ae.jsx)(i.Fragment,{children:(0,ae.jsx)(Ys,{group:t,user:n,userStore:o,store:a})},"three-dot")),{key:n.userId,columns:c}}))})}function fi(e){let{members:t,store:s,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:l}=e;const d=(0,v().tz)(),c=(0,a().DP)(),p=(0,n().v3)(),m=(0,i.useCallback)((()=>function(e){e.setState({...e.state,limitMembers:!1})}(r)),[r]),{membersFilter:h,limitMembers:S}=(0,o().K8)((()=>{const{membersFilter:e,limitMembers:t}=r.state;return{membersFilter:e,limitMembers:t}}),[r]),y=(0,o().K8)((()=>function(e,t,s,i){return t&&t.length>0?(0,w().Ay)(t,e,(e=>{const t=ke().LU.createChildStore(s,{table:b().oo,id:e.userId});return t.isDefined()?t.getSearchName(i):""})):e}(t,h,s,d)),[t,h,s,d]),x=(0,o().K8)((()=>function(e,t,s,i,n){const o=n.state.sorts[e];if(!o)return t;switch(o.by){case"role":return t.sort(((e,t)=>(f().TE[t.role]-f().TE[e.role])*(o.asc?-1:1)));case"name":return t.map((e=>({user:e,store:ke().LU.createChildStore(s,{table:b().oo,id:e.userId})}))).sort(((e,t)=>{const s=i.formatMessage(g().Fvx.messages.anonymousPlaceholder),n=e.store.getFullName(i)||s,a=t.store.getFullName(i)||s;return n.localeCompare(a)*(o.asc?1:-1)})).map((e=>e.user))}}("members",y,s,d,r)),[y,s,d,r]),A=S?x.slice(0,Ts):x;return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{style:{marginRight:8,flexGrow:1},children:(0,ae.jsx)(me().A,{children:(0,ae.jsx)(v().sA,{id:"spacePermissionsSettings.spaceMembers.members.title",defaultMessage:"Members"})})}),(0,ae.jsx)(Ks,{store:s}),(0,ae.jsx)(z().A,{size:16,isHidden:!0}),(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:[(0,ae.jsx)(si,{store:s}),(0,ae.jsx)(q().A,{placeholder:d.formatMessage({id:"spacePermissionsSettings.membersTab.filterMembersInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,u().q)(Qs(c)),showClearButton:!0,format:q().C.Small,value:h,style:_s,onChange:e=>{r.setState({...r.state,membersFilter:e.target.value,limitMembers:!0})},onClick:()=>{C().Z9(p,{current_tab:Xe().d.Members})}})]}),(0,ae.jsx)(hi,{store:s,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:l,group:"members",spaceMembers:A}),x.length>Ts&&S?(0,ae.jsx)(E().p,{isGray:!0,size:"xs",style:Is,onClick:m,children:(0,ae.jsx)(v().sA,{defaultMessage:"Show {moreMembersCount} more",id:"spacePermissionsSettings.membersTab.showMore.message",values:{moreMembersCount:x.length-Ts}})}):void 0]})]})}function Si(e){let{members:t,isMobile:s,store:i,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:o}=e;return s?(0,ae.jsx)(ui,{store:i,members:t}):(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Os,{}),(0,ae.jsx)(oi,{store:i,isMobile:s,spacePermissionsSettingsStore:n}),(0,ae.jsx)(fi,{store:i,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:o,members:t})]})}class yi extends(()=>s(757695))().Store{getInitialState(){}}},364671:(e,t,s)=>{s.d(t,{A:()=>H});var i=s(296540),n=()=>s(56366),o=()=>s(534177),a=()=>s(676007),r=()=>s(959013),l=()=>s(284371),d=()=>s(331542),c=()=>s(274602),u=s(474848);function p(e){let{errorMessage:t,isLoading:s,onDisplayBackupCodes:i,onCancel:n,onDismiss:o}=e;const a=(0,u.jsx)(r().sA,{id:"mfa.regenerateBackupCodes.title",defaultMessage:"Regenerate backup codes"}),p=(0,u.jsx)(r().sA,{id:"mfa.regenerateBackupCodes.message",defaultMessage:"Backup codes are used to log in if you lose access to your password and second factors. <boldtext>Your existing codes won't work after regenerating new ones.</boldtext>",values:{boldtext:e=>(0,u.jsx)("span",{style:{fontWeight:l().Wy.semibold},children:e})}}),m={text:s?(0,u.jsx)(d().A,{}):(0,u.jsx)(r().sA,{id:"mfa.regenerateBackupCodes.regenerateBackupCodes.button.message",defaultMessage:"Generate new backup codes"}),onClick:i,view:"outline",disabled:s,isRed:!0},g=[{text:(0,u.jsx)(r().sA,{id:"mfa.regenerateBackupCodes.cancel.button.message",defaultMessage:"Cancel"}),onClick:n,view:"outline",type:"button"}];return(0,u.jsx)(c().A,{title:a,header:p,errorMessage:t,primaryAction:m,secondaryActions:g,onDismiss:o})}var m=()=>s(401497),g=()=>s(373204),h=()=>s(414446);function f(e){let{backupCodes:t,backupCodeDownload:s,backupCodeFileName:i,errorMessage:n,onNoted:o,onDownload:a}=e;const d=(0,m().IS)(S,[]),p=(0,u.jsx)(r().sA,{id:"mfa.showBackupCodes.title",defaultMessage:"Save your backup codes"}),f=(0,u.jsx)(r().sA,{id:"mfa.showBackupCodes.message",defaultMessage:"<boldtext>You can only see this once</boldtext>, so be sure to keep them to avoid getting locked out of your account.",values:{boldtext:e=>(0,u.jsx)("span",{style:{fontWeight:l().Wy.semibold},children:e})}}),y={text:(0,u.jsx)(r().sA,{id:"mfa.showBackupCodes.codesNotedDown.button.message",defaultMessage:"I've saved them"}),onClick:o},b=[{text:(0,u.jsx)(r().sA,{id:"mfa.showBackupCodes.downloadAsTextFile.button.message",defaultMessage:"Download as text file"}),href:`data:text/plain;charset=UTF-8,${s}`,saveAs:i,view:"outline",type:"link",onClick:a}];return(0,u.jsx)(c().A,{title:p,header:f,icon:(0,g().K)(d.icon),errorMessage:n,primaryAction:y,secondaryActions:b,children:(0,u.jsx)(h().A,{type:"unencryptedCodes",backupCodes:t})})}function S(e){return(0,m().$4)({icon:{width:30,height:30,fill:e.icon.primary}})}function y(e){const{backupCodesStateMachine:t,onGoToSettings:s,onDismiss:i}=e,a=(0,n().K8)((()=>t.getCurrentStep()),[t]),r=()=>t.backupCodesRegenerateCodes();switch(a.step){case"backupCodesUninitialized":case"backupCodesLoading":return null;case"backupCodesRegenerateCodes":return(0,u.jsx)(p,{isLoading:a.isLoading,errorMessage:a.error,onDisplayBackupCodes:r,onDismiss:i,onCancel:s});case"backupCodesShowCodes":return(0,u.jsx)(f,{errorMessage:a.error,backupCodes:a.backupCodes,backupCodeDownload:a.backupCodesFile,backupCodeFileName:"Notion Backup Codes.txt",onNoted:s});default:return(0,o().HB)(a)}}var b=()=>s(653027),x=()=>s(22394);function v(e){let{type:t,errorMessage:s,onDismiss:i,onAddMethod:n}=e;const a=(0,m().IS)(A,[]),l=(0,u.jsx)(r().sA,{id:"mfa.setupComplete.confirmation.header",defaultMessage:"Every time you enter your password, Notion will ask you for a verification code to confirm your identity."}),d=[{text:(0,u.jsx)(r().sA,{id:"mfa.setupComplete.confirmation.viewTwoStepMethods.button.message",defaultMessage:"View 2-step methods"}),onClick:n,type:"button",view:"outline"}];return(0,u.jsx)(c().A,{title:"totp"===t?(0,u.jsx)(r().sA,{id:"mfa.totp.setupComplete.confirmation.title",defaultMessage:"2-step verification with authenticator is turned on"}):"sms"===t?(0,u.jsx)(r().sA,{id:"mfa.sms.setupComplete.confirmation.title",defaultMessage:"2-step verification with phone number is turned on"}):(0,o().HB)(t),header:l,errorMessage:s,icon:(0,x().o)(a.confirmationIcon),secondaryActions:d,onDismiss:i})}function A(e){return(0,m().$4)({confirmationIcon:{width:30,fill:"green"}})}s(581454);var w=()=>s(85128),M=()=>s(381349),j=()=>s(778078),k=()=>s(722872),C=()=>s(920949),_=()=>s(836251),I=()=>s(463830),P=()=>s(700250),T=()=>s(760217),B=()=>s(406699),R=()=>s(623580),D=()=>s(419357),N=()=>s(928600),L=()=>s(939740),O=()=>s(864943),F=()=>s(89924),U=()=>s(125565);const E={name:"United States",countryCode:"1",regionCode:"US"};function G(e){let{isLoading:t,phoneNumber:s,country:o,errorMessage:a,onDismiss:l,onBack:p,onContinue:g}=e;const h=(0,m().IS)(V,[]),f=(0,r().tz)(),[S,y]=(0,i.useState)(s??""),[b,x]=(0,i.useState)([]),[v,A]=(0,i.useState)(""),[M,G]=(0,i.useState)(o??E),z=(0,n().uB)(void 0,I().A),K=(0,i.useMemo)((()=>(0,w().cE)(M.regionCode)),[M.regionCode]),q=(0,i.useCallback)((e=>{const t=e.target.value.replace(/\D/g,"");y(K.reset(t))}),[K]);(0,i.useEffect)((()=>{y(o!==M?K.reset(S??""):K.reset(s??""));const e=new Intl.DisplayNames(["en"],{type:"region"}),t=(0,w().LU)();let i=-1;const n=t.map(((t,s)=>{const n=(0,w().qY)(t).toString(),o=e.of(t);return t===M.regionCode&&(i=s),{name:o??t,countryCode:n,regionCode:t}}));-1!==i&&n.unshift(n.splice(i,1)[0]),x(n)}),[M]);const W=(0,u.jsx)(r().sA,{id:"profileSettings.mfa.sms.addPhoneTitle",defaultMessage:"Add a phone number"}),H=(0,u.jsx)(r().sA,{id:"profileSettings.mfa.sms.addPhoneHeader",defaultMessage:"Enter your phone number to receive a 2-step verification code."}),$={text:t?(0,u.jsx)(d().A,{}):(0,u.jsx)(r().sA,{id:"profileSettings.mfa.sms.continueButton",defaultMessage:"Continue"}),onClick:()=>g(M,S.trim()),disabled:t||""===S},Y=[{text:(0,u.jsx)(r().sA,{id:"profileSettings.mfa.sms.addPhoneNeedHelp",defaultMessage:"Need help?"}),href:(0,_().xS)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}],Q=f.formatMessage({id:"profileSettings.mfa.sms.phoneNumberInput.placeholder",defaultMessage:"Enter phone number"}),X=f.formatMessage({defaultMessage:"Search country code",id:"profileSettings.mfa.sms.countryCodeSelect.placeholder"}),J=e=>(0,u.jsxs)("div",{style:h.countryCodeSelectTitle,children:[e.name,(0,u.jsx)(U().A,{isSmall:!0,children:`+${e.countryCode}`})]}),Z=(0,u.jsx)(B().Ay,{popupType:B().z7.Popup,placementToOrigin:P().UV.Bottom,alignmentToOrigin:P().MY.Start,buttonPopupStore:z,renderOrigin:e=>(0,u.jsx)(O().A,{size:"lg",...e,children:`+${M.countryCode}`}),render:e=>(0,u.jsx)(N().A,{menuType:k().gu.Popup,minWidth:280,maxHeight:"30vh",header:(0,u.jsx)(F().A,{isInput:!0,children:(0,u.jsx)(D().Ay,{value:v,onChange:e=>A(e.target.value),focus:!0,focusAfterAnimation:!0,placeholder:X})}),children:(0,u.jsx)(L().Ay,{type:L().Oh.Vertical,initialFocus:0,sections:[{key:"countries",render:e=>(0,u.jsx)(F().A,{...e}),items:(0,j().Ay)(v,b,(e=>/\d/.test(v)?`${e.countryCode}`:e.name)).map((t=>({key:t.regionCode,render:e=>(0,u.jsx)(T().A,{...e,title:J(t),isChecked:t.name===M.name}),action:()=>{A(""),G(t),e.close()}})))}]})})});return(0,u.jsx)(c().A,{onDismiss:l,onBack:p,title:W,header:H,errorMessage:a,primaryAction:$,secondaryActions:Y,children:(0,u.jsxs)("div",{style:h.container,children:[(0,u.jsx)("div",{style:h.countryCodeDropdownMenu,children:Z}),(0,u.jsx)(R().A,{autoFocus:!0,value:S,placeholder:Q,spellCheck:!1,style:h.phoneNumberInput,onChange:q,disabled:t,customElementAttributes:C().SY})]})})}function V(e){return(0,m().$4)({container:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:16,marginBottom:4},countryCodeDropdownMenu:{marginRight:5},countryCodeSelectTitle:{paddingTop:8,paddingBottom:8},phoneNumberInput:{background:"light"===e.mode?M().Ay.transparent:e.inputBackground}})}var z=()=>s(852310);function K(e){const{smsStateMachine:t,onGoToSettings:s,onDismiss:i,onStartBackupCodes:a}=e,r=(0,n().K8)((()=>t.getCurrentStep()),[t]);switch(r.step){case"smsUninitialized":case"smsVerified":return null;case"smsSendingSMS":case"smsSetPhoneNumber":return(0,u.jsx)(G,{phoneNumber:r.phoneNumber,country:r.country,isLoading:"smsSendingSMS"===r.step,errorMessage:r.error,onDismiss:i,onBack:s,onContinue:(e,s)=>t.smsCreateSMS(e,s)});case"smsVerifyCode":case"smsResendSMS":case"smsBackupCodesLoading":case"smsVerifying":return(0,u.jsx)(z().Ay,{isLoading:"smsVerifying"===r.step||"smsBackupCodesLoading"===r.step,errorMessage:r.error,phoneNumber:`+${r.country.countryCode} ${r.phoneNumber}`,onDismiss:i,onBack:()=>t.smsRestart(),onVerifyCode:e=>t.smsVerifyCode({code:e,onVerified:a}),resentStatus:"smsResendSMS"===r.step?"resending":"resentAt"in r&&void 0!==r.resentAt?"resent":"not-resent",resentAt:"resentAt"in r&&r.resentAt?r.resentAt:0,onResendLink:()=>t.smsResendSMS()});case"smsComplete":return(0,u.jsx)(v,{type:"sms",errorMessage:r.error,onAddMethod:s,onDismiss:i});default:return(0,o().HB)(r)}}var q=()=>s(936457);function W(e){const{totpStateMachine:t,onGoToSettings:s,onStartBackupCodes:i,onDismiss:a}=e,r=(0,n().K8)((()=>t.getCurrentStep()),[t]);switch(r.step){case"totpUninitialized":case"totpVerified":return null;case"totpLoadingQRCode":case"totpBackupCodesLoading":case"totpVerifyCode":return(0,u.jsx)(q().Ay,{isLoading:"totpBackupCodesLoading"===r.step||"totpLoadingQRCode"===r.step,qrCode:"totpVerifyCode"===r.step?r.qrCode:void 0,textCode:"totpVerifyCode"===r.step?r.rawString:void 0,friendlyName:"totpVerifyCode"===r.step?r.friendlyName:void 0,errorMessage:r.error,errorKeys:"totpVerifyCode"===r.step?r.errorKeys:void 0,onDismiss:a,onBack:s,onContinue:(e,s)=>{t.totpVerifyCode({friendlyName:e,code:s,onVerified:i})}});case"totpComplete":return(0,u.jsx)(v,{type:"totp",errorMessage:r.error,onDismiss:a,onAddMethod:s});default:return(0,o().HB)(r)}}function H(e){const{rootStateMachine:t,settingsStateMachine:s,totpStateMachine:r,smsStateMachine:l,backupCodesStateMachine:d,onReloadSettings:c}=e,p=(0,n().K8)((()=>t.getCurrentStep()),[t]),[{showSettings:m,onRootExit:g}]=(0,i.useState)((()=>({onRootExit:()=>t.exit((()=>{s.exit(),r.exit(),l.exit(),d.exit(),c&&c()})),showSettings:()=>t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{s.settingsConfirmIdentityForSettings()}})}))),h=()=>t.rootCloseSettings((()=>{s.exit(),c&&c()})),f=()=>t.rootStartTOTP((()=>r.totpStart())),S=()=>t.rootStartSMS((()=>l.smsStart())),x=()=>{t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{r.exit(),s.settingsShow({refresh:!0})}})},v=()=>{t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{l.exit(),s.settingsShow({refresh:!0})}})},A=()=>{d.exit(),t.rootEndBackupCodes({completeTotp:()=>{r.totpComplete()},completeSMS:()=>{l.smsComplete()},showSettings:m})},w=()=>{d.backupCodesInitialSetup({onLoadingComplete:()=>{r.totpBackupCodesComplete(),t.rootShowBackupCodesFromTOTP()},onComplete:()=>{r.totpBackupCodesComplete(),r.totpComplete(),A()}})},M=()=>{d.backupCodesInitialSetup({onLoadingComplete:()=>{l.smsBackupCodesComplete(),t.rootShowBackupCodesFromSMS()},onComplete:()=>{l.smsBackupCodesComplete(),l.smsComplete(),A()}})},j=()=>{t.rootStartBackupCodesFromSettings((()=>d.backupCodesShowCreate()))},k=(0,n().K8)((()=>s.getCurrentStep()),[s]),C=(0,n().K8)((()=>r.getCurrentStep()),[r]),_=(0,n().K8)((()=>l.getCurrentStep()),[l]),I=(0,n().K8)((()=>d.getCurrentStep()),[d]);let P;switch(p.step){case"rootUninitialized":break;case"rootSettings":P={open:"settingsUninitialized"!==k.step,onDismiss:g,render:()=>(0,u.jsx)(b().A,{settingsStateMachine:s,onDismiss:h,onStartTOTP:f,onStartSMS:S,onStartBackupCodes:j})};break;case"rootTOTP":P={open:"totpUninitialized"!==C.step,onDismiss:g,render:()=>(0,u.jsx)(W,{totpStateMachine:r,onGoToSettings:x,onStartBackupCodes:w,onDismiss:g})};break;case"rootSMS":P={open:"smsUninitialized"!==_.step,onDismiss:g,render:()=>(0,u.jsx)(K,{smsStateMachine:l,onGoToSettings:v,onStartBackupCodes:M,onDismiss:g})};break;case"rootBackupCodes":P={open:"backupCodesUninitialized"!==I.step,onDismiss:"backupCodesRegenerateCodes"===I.step?g:void 0,render:()=>(0,u.jsx)(y,{backupCodesStateMachine:d,onGoToSettings:A,onDismiss:g})};break;default:throw(0,o().HB)(p)}return P?(0,u.jsx)(a().a,{...P,preventHideChildrenWhileOpening:!0}):null}},388450:(e,t,s)=>{s.d(t,{R:()=>U});s(898992),s(672577);var i=s(296540),n=()=>s(484714),o=()=>s(56366),a=()=>s(401497),r=()=>s(402904),l=()=>s(959013),d=()=>s(534177),c=()=>s(284371),u=()=>s(848259),p=()=>s(246826),m=()=>s(751156),g=()=>s(881707),h=()=>s(878079),f=()=>s(765957),S=()=>s(53137),y=()=>s(630116),b=()=>s(347306),x=()=>s(963550),v=(s(581454),()=>s(617871)),A=()=>s(668725),w=()=>s(689094),M=()=>s(973647),j=()=>s(898563),k=()=>s(510683),C=()=>s(722872),_=()=>s(704152),I=()=>s(760217),P=()=>s(406699),T=()=>s(928600),B=()=>s(939740),R=()=>s(89924),D=s(474848);function N(e){const{currentExternalAuthentication:t,externalAuthentications:s,spaceId:r,spaceViewStore:d}=e,c=(0,n().v3)(),u=(0,n().Y0)(),h=(0,o().K8)((()=>S().A.integrations.state.find((e=>e.id===v().zG))),[]),f=(0,a().IS)((e=>({popupContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:14,marginTop:12},dropdownButtonContainer:{display:"flex",alignItems:"center",minWidth:0,padding:"0px 8px",borderRadius:4,marginLeft:8},currentValueLabel:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",flex:1},icon:{marginLeft:8,width:12,height:12,color:e.text.tertiary}})),[]);let y;y=u.isPhone?{menuType:C().gu.ActionSheet}:{menuType:C().gu.Popup,width:280,maxHeight:"50vh"};const b=i.useCallback((e=>Object.entries((0,g().Os)(s)).map(((s,i)=>{let[n,o]=s;return{key:n,items:o.map((s=>{let{externalAuthentication:i,workspaceName:n}=s;return{key:i.id,action:()=>{e.close(),L({environment:c,spaceViewStore:d,currentExternalBotId:null==t?void 0:t.parent_id,selectedExternalBotId:i.parent_id})},render:e=>(0,D.jsx)(I().A,{...e,title:n,isChecked:i.id===(null==t?void 0:t.id)})}})),render:e=>(0,D.jsx)(R().A,{...e,title:n,topBorder:0!==i})}}))),[null==t?void 0:t.id,null==t?void 0:t.parent_id,c,s,d]),x=i.useCallback((e=>h?[{key:"disable-notification",items:[{key:"disable-slack-notification",action:()=>{e.close(),function(e){const{environment:t,spaceViewStore:s}=e;m().createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,canUndo:!0,perform:e=>{p().zv({store:s.getSettingsStore(),data:{notify_slack:null},transaction:e})}}),j().YT(t,{type:"personal",source:"notifications_and_settings"})}({environment:c,spaceViewStore:d})},render:e=>(0,D.jsx)(I().A,{...e,title:(0,D.jsx)(l().sA,{id:"personalSlackNotificationsAccountDropdownButton.disableNotification.label",defaultMessage:"Off"}),isChecked:void 0===t})}],render:e=>(0,D.jsx)(R().A,{...e,topBorder:b.length>0})},{key:"create-new-auth",items:[{key:"connect",render:e=>(0,D.jsx)(I().A,{...e,icon:(0,w().W)({width:12,height:12}),title:(0,D.jsx)(l().sA,{id:"database.viewSettings.notificationsTab.slack.addNewAccount.label",defaultMessage:"Add new account"})}),action:async()=>{var e;const t=await k().Jq({environment:c,integration:h,spaceId:r,from:"notifications_and_settings"});if(M().Q.isFail(t))return;const s=null===(e=t.value.externalAuthentication)||void 0===e?void 0:e.parent_id;s&&L({environment:c,spaceViewStore:d,currentExternalBotId:void 0,selectedExternalBotId:s})}}],render:e=>(0,D.jsx)(R().A,{...e,topBorder:!0})}]:[]),[t,c,b.length,r,d,h]);return(0,D.jsx)("div",{style:f.popupContainer,children:(0,D.jsx)(P().Ay,{popupType:P().z7.Popup,alignmentToOrigin:P().yP.End,render:e=>(0,D.jsx)(T().A,{...y,children:(0,D.jsx)(B().Ay,{type:B().Oh.Vertical,initialFocus:0,sections:[...b(e),...x(e)]})}),renderOrigin:t=>(0,D.jsxs)(_().A,{...t,style:f.dropdownButtonContainer,children:[(0,D.jsx)("div",{style:f.currentValueLabel,children:(0,D.jsx)(O,{...e})}),(0,A().b)(f.icon)]})})})}function L(e){const{environment:t,spaceViewStore:s,selectedExternalBotId:i,currentExternalBotId:n}=e,o=s.getSettingsStore(),a=o.getKeyStore("notify_slack").getValue();if(n!==i){const e=(0,h().Z5)();let s=!1;e&&(s=!n||Boolean(null==a?void 0:a.notify_slack_all_activity)),m().createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,canUndo:!0,perform:e=>{p().zv({store:o,data:{notify_slack:{external_bot_id:i,notify_slack_all_activity:s,notify_slack_mention:!n||(null==a?void 0:a.notify_slack_all_activity)}},transaction:e})}}),void 0===n?j().lL(t,{type:"personal",source:"notifications_and_settings"}):j().Eu(t,{type:"personal",source:"notifications_and_settings"})}}function O(e){const{currentExternalAuthentication:t}=e;if(!t)return(0,D.jsx)(l().sA,{id:"SlackNotificationsPersonalSettingsAccountPicker.accountDropdown.selectPlaceholder",defaultMessage:"Off"});const s=(0,g().qO)(t).organizationName;return(0,D.jsx)(D.Fragment,{children:s})}var F=()=>s(702723);function U(e){const t=(0,n().v3)(),{target:s}=e,{isMobile:v}=(0,n().Y0)(),A=(0,o().O$)(f().AppStoreCurrentSpaceViewStore),w=(0,o().O$)(f().AppStoreCurrentSpaceStore),M=(0,o().O$)(S().A.completeSlackAuthentications),j=(0,o().K8)((()=>(0,h().Z5)()),[]),k=(0,o().K8)((()=>{var e;const t=null==A||null===(e=A.getSettings())||void 0===e||null===(e=e.notify_slack)||void 0===e?void 0:e.external_bot_id;if(!t)return;const s=M.find((e=>e.parent_id===t));if(s)return s;if(!A)return;return(0,y().Oo)(A,{id:t,table:r().As}).getValue()}),[A,M]),C=(0,o().K8)((()=>{var e;const t=null==A||null===(e=A.getSettingsStore())||void 0===e||null===(e=e.getKeyStore("notify_slack"))||void 0===e?void 0:e.getValue();switch(s){case"notify_slack_mention":return k&&(null==t?void 0:t.notify_slack_mention)||!1;case"notify_slack_all_activity":return(null==t?void 0:t.notify_slack_all_activity)||!1;case"notify_slack":return!1;default:(0,d().HB)(s)}}),[A,s,k]),_=(0,o().K8)((()=>{var e;const t=null==A||null===(e=A.getSettingsStore())||void 0===e||null===(e=e.getKeyStore("notify_slack"))||void 0===e?void 0:e.getValue();return null==t?void 0:t.notify_slack_all_activity}),[A]),I=(0,i.useCallback)((()=>{if(A){const e=!C,i=A.getSettingsStore();let n=i.getKeyStore("notify_slack").getValue();if(!n)return;"notify_slack_mention"===s?(n[s]=e,e||n.notify_slack_all_activity||(n=void 0),m().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:t,canUndo:!0,perform:e=>{p().zv({store:i,data:{notify_slack:n},transaction:e})}})):"notify_slack_all_activity"===s&&(n[s]=e,m().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:t,canUndo:!0,perform:e=>{p().zv({store:i,data:{notify_slack:n},transaction:e})}})),"notify_slack"!==s&&u().DN(t,{is_on:e,target:s})}}),[t,A,C,s]),P=(0,a().IS)((e=>({notifySlackSelectedWorkspaceName:{fontWeight:c().Wy.bold,color:e.darkTextColor},titleWithBadgeContainer:{display:"flex",alignItems:"center"},betaBadgeContainer:{marginTop:-3},betaBadge:{display:"inline",marginLeft:6}})),[]);return A&&w?"notify_slack"===s?(0,D.jsx)(F().A,{type:"custom",isMobile:v,title:(0,D.jsx)(x().A,{target:s}),caption:(0,D.jsx)(D.Fragment,{children:k?(0,D.jsx)(l().sA,{id:"notificationSettings.slackNotificationsSettings.workspaceSelected.description",defaultMessage:"Receive notifications in {slackWorkspaceName} slack workspace{slackNotificationSettingMessage}.",values:{slackWorkspaceName:(0,D.jsx)("span",{style:P.notifySlackSelectedWorkspaceName,children:(0,g().qO)(k).organizationName}),slackNotificationSettingMessage:j?"":" when you're mentioned in a page, database property, or comment"}}):(0,D.jsx)(b().A,{target:s})}),customButton:(0,D.jsx)(N,{currentExternalAuthentication:k,externalAuthentications:M,spaceId:w.id,spaceViewStore:A})}):"notify_slack_mention"===s?k?(0,D.jsx)(F().A,{isMobile:!0,title:(0,D.jsx)(x().A,{target:s}),caption:(0,D.jsx)(b().A,{target:s}),type:"toggle",isOn:C,onToggle:I,disabled:Boolean(_)}):(0,D.jsx)(D.Fragment,{}):k?(0,D.jsx)(F().A,{isMobile:!0,title:(0,D.jsx)(x().A,{target:s}),caption:(0,D.jsx)(b().A,{target:s}),type:"toggle",isOn:C,onToggle:I}):(0,D.jsx)(D.Fragment,{}):null}},413107:(e,t,s)=>{s.d(t,{L:()=>g});var i=s(296540),n=()=>s(484714),o=()=>s(56366),a=()=>s(187174),r=()=>s(959013),l=()=>s(874913),d=()=>s(2220),c=()=>s(864943),u=()=>s(702723),p=()=>s(227440);var m=s(474848);function g(){const e=(0,n().v3)(),{isMobile:t,isElectron:s}=(0,n().Y0)(),g=!(0,o().O$)(p().e),[h,f]=(0,i.useState)(0),[S,y]=(0,i.useState)(!1),b=(0,i.useCallback)((async()=>{let i;if(s)i=await l().getSqliteDiskUsage();else if(t){var n;i=await(null===(n=e.mobileNative)||void 0===n?void 0:n.getSqliteDiskUsage())}void 0!==i&&f(i)}),[e.mobileNative,s,t]),x=(0,i.useCallback)((async()=>{y(!0),await async function(e){try{var t,s;await(null===(t=e.defaultRecordCache.persistedRecordCache)||void 0===t?void 0:t.flushPendingWrites()),await(null===(s=e.defaultRecordCache.persistedRecordCache)||void 0===s?void 0:s.deleteAllRecordTables())}catch(i){}}(e),(0,d().u)({environment:e,event:{eventName:"offline_storage_cleared",eventProperties:{cache_size_in_mb_before_clear:h}}}),await b()}),[e,h,b]);return(0,a().Yb)((async()=>{await b()}),[b]),(0,m.jsx)(u().A,{type:"custom",isMobile:!0,title:(0,m.jsx)(r().sA,{id:"offlineSettingsTab.storageManagementSection.title",defaultMessage:"Notion cache"}),disableTitle:g,disableSettingsItemClick:!0,caption:(0,m.jsx)(r().sA,{id:"offlineSettingsTab.storageManagementSection.subheading",defaultMessage:"This will clear { amount } of cache across all of your Notion workspaces.",values:{amount:`${h} MB`}}),shouldHighlight:!1,customButton:(0,m.jsx)(c().A,{size:"lg",style:{marginTop:12,marginBottom:4},onClick:x,disabled:g||S,children:(0,m.jsx)(r().sA,{id:"offlineSettingsTab.storageManagementSection.cta",defaultMessage:"Clear cache"})})})}},420844:(e,t,s)=>{s.d(t,{xF:()=>re,OC:()=>ce,jo:()=>de});s(898992),s(354520);var i=s(296540),n=()=>s(484714),o=()=>s(56366),a=()=>s(762433),r=()=>s(959013),l=()=>s(534177),d=()=>s(874913),c=()=>s(851650),u=()=>s(751156),p=()=>s(755199),m=()=>s(863569),g=()=>s(959098),h=()=>s(331542),f=()=>s(591256),S=()=>s(719147),y=()=>s(862961),b=()=>s(243923),x=()=>s(702723),v=()=>s(782649),A=()=>s(289251),w=()=>s(836251),M=()=>s(141966),j=()=>s(645873),k=()=>s(963589),C=()=>s(610716),_=()=>s(155959),I=()=>s(765957),P=()=>s(948914),T=()=>s(217429),B=()=>s(410555),R=()=>s(807778),D=()=>s(401497),N=()=>s(711059),L=()=>s(502492),O=()=>s(579631),F=()=>s(435009),U=()=>s(187485),E=()=>s(864943),G=()=>s(125565),V=()=>s(780054),z=()=>s(597755),K=()=>s(112799),q=()=>s(927080),W=()=>s(404141),H=s(474848);function $(){const{isMac:e,isDesktop:t}=(0,n().Y0)(),s=t&&e,i=(0,n().v3)().device.desktopAppVersion;if(i){const e=(0,N().parseVersion)(i);if(e&&d().isVersionVulnerableWhenUniversalLinksIsOff(e))return!1}return s}function Y(e){var t;const s=e.environment.device,{isElectron:i,isMac:n,isWindows:a,isDesktop:r}=s,d=void 0!==(null===(t=(0,o().O$)(P().A).preferences)||void 0===t?void 0:t.isUniversalLinksEnabled);return[r&&(n||a||!1)&&!d?{key:"open-in-desktop-app",renderSettingsItem:()=>(0,H.jsx)(se,{})}:void 0,$()?{key:"open-in-browser",renderSettingsItem:()=>(0,H.jsx)(X,{})}:void 0,i&&n?{key:"close-browser-tabs",renderSettingsItem:()=>(0,H.jsx)(ie,{})}:void 0].filter(l().O9)}function Q(){return(0,H.jsx)(x().A,{isMobile:!1,caption:(0,H.jsx)(r().sA,{id:"openInBrowserSetting.caption.browser",defaultMessage:"If installed, macOS will open links to Notion in the desktop app, even if this setting is turned off. To disable that behavior, enable “Open Notion links in browser” in your app."}),type:"custom",customButton:(0,H.jsx)(E().A,{size:"lg",onClick:()=>{window.open(L().$J({httpUrl:(0,z().A)(window.location.href),protocol:V().A.protocol}))},children:(0,H.jsx)(r().sA,{id:"openInBrowserSetting.button",defaultMessage:"Set in app"})})})}function X(){const e=(0,n().Y0)(),{isElectron:t,isMac:s}=e,a=$(),l=(0,o().K8)((()=>{var e;return null===(e=P().A.state.preferences)||void 0===e?void 0:e.isUniversalLinksEnabled}),[]),c=(0,i.useCallback)((()=>{const e=!l;d().electronAppFeatures.setPreference("isUniversalLinksEnabled",e)}),[l]);if(!t&&a)return(0,H.jsx)(Q,{});if(!t||!s||void 0===l)return null;const u=(0,H.jsx)(r().sA,{id:"openInDesktopAppSettings.universalLinks.title",defaultMessage:"Open Notion links in browser"}),p=(0,H.jsx)(r().sA,{id:"openInDesktopAppSettings.universalLinks.caption",defaultMessage:"By default, macOS will open links to Notion in the desktop app. Turning this setting on will redirect links to your browser instead."});return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(x().A,{isMobile:!1,title:u,caption:p,type:"toggle",isOn:!l,onToggle:c}),(0,H.jsx)(J,{show:!1===l})]})}function J(){let{show:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{show:!1};const t=(0,D().IS)((e=>({titleStyle:{fontSize:12,fontWeight:"medium",font:"SF Pro",color:e.text.primary,height:18},divTitleStyle:{color:e.text.secondary,display:"flex",background:e.fill.lightGraySecondary,width:"100%",padding:"16px",justifyContent:"center",alignItems:"center",gap:12,borderRadius:8,borderColor:e.fill.lightGraySecondary},divStyle:{display:"flex",alignItems:"center",marginTop:10,minWidth:0,width:"100%",gap:10},UiLabelStyle:{color:e.text.secondary,font:"SF Pro",fontSize:12,whiteSpace:"normal"}})),[]);return e?(0,H.jsx)("div",{style:t.divStyle,children:(0,H.jsxs)("div",{style:t.divTitleStyle,children:[(0,H.jsx)(G().A,{isSecondaryColor:!0,style:t.UiLabelStyle,children:(0,H.jsx)(r().sA,{id:"openInDesktopAppSettings.universalLinks.guide.caption",defaultMessage:"Notion will redirect links to your browser. You may also want to prevent your browser from opening Notion links in the desktop app. To use Notion in your browser only, ensure that the setting “Open links in desktop app” is turned off in your browser."})}),(0,H.jsx)("div",{children:(0,H.jsx)("div",{style:{display:"flex"},children:(0,H.jsx)("div",{style:t.titleStyle,children:(0,H.jsx)(Z,{})})})})]})}):null}function Z(){const e=(0,n().v3)();return(0,H.jsx)(U().A,{href:(0,z().A)(window.location.href),external:!0,onClick:()=>{O().mu(e)},children:(0,H.jsx)(E().A,{size:"lg",children:(0,H.jsx)(r().sA,{id:"openInDesktopAppSetting.desktopConfigureButton",defaultMessage:"Set in browser"})})})}function ee(){return(0,H.jsx)(r().sA,{id:"openInDesktopAppSetting.title",defaultMessage:"Open links in desktop app"})}function te(){const e=void 0!==(0,o().K8)((()=>{var e;return null===(e=P().A.state.preferences)||void 0===e?void 0:e.isUniversalLinksEnabled}),[]);let t=(0,H.jsx)(ee,{}),s=(0,H.jsx)(r().sA,{id:"openInDesktopAppSetting.desktopConfigureCaption",defaultMessage:"You can configure browser links to open in this app."});return e&&(t=(0,H.jsx)(r().sA,{id:"openInDesktopAppSetting.title.universal",defaultMessage:"Open browser links in desktop app"}),s=(0,H.jsx)(r().sA,{id:"openInDesktopAppSetting.desktopConfigureCaption.universal",defaultMessage:"You can also configure your browser to automatically redirect Notion links to the app."})),(0,H.jsx)(x().A,{isMobile:!1,title:t,caption:s,type:"custom",customButton:(0,H.jsx)(Z,{})})}function se(){const e=(0,n().v3)(),{isElectron:t,isMac:s}=(0,n().Y0)(),i=(0,o().O$)(q().A),a=(0,H.jsx)(ee,{}),l=(0,o().K8)((()=>W().A.state.highlightedSetting===W().r.OpenInDesktopApp),[]),d=(0,K().E)();if(t)return(0,H.jsx)(te,{});const c=s?"macOS":"Windows";return(0,H.jsx)(x().A,{isMobile:!1,title:a,caption:(0,H.jsx)(r().sA,{id:"openInDesktopAppSetting.description.messageWindows",defaultMessage:"You must have the <desktopAppLink>{platform} app</desktopAppLink> installed.",values:{desktopAppLink:function(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return(0,H.jsx)(S().A,{external:!0,onClick:t=>{d.current&&(F().oo({environment:e,url:d.current,openInNew:"tab"}),t.stopPropagation())},children:s})},platform:c}}),type:"toggle",isOn:"always"===i,onToggle:()=>{const t="always"===i?"never":"always";q().A.setState(t),"always"===t&&F().eG({url:(0,z().P)(window.location.href),environment:e}),O().kF(e,{toggled_to:"always"===t?"on":"off"})},shouldHighlight:l})}function ie(){const{isElectron:e,isMac:t}=(0,n().Y0)(),s=(0,o().K8)((()=>{var e;return null===(e=P().A.state.preferences)||void 0===e?void 0:e.isClosingBrowserTabs}),[]),a=(0,i.useCallback)((()=>{const e=!s;d().electronAppFeatures.setPreference("isClosingBrowserTabs",e)}),[s]);if(!e||!t||void 0===s)return null;const l=(0,H.jsx)(r().sA,{id:"openInDesktopAppSettings.closeBrowserTabs.title",defaultMessage:"Close redirecting browser tabs"}),c=(0,H.jsx)(r().sA,{id:"openInDesktopAppSettings.closeBrowserTabs.caption",defaultMessage:"When opening links in the desktop app, close “Redirecting to your Notion app...” browser tabs."});return(0,H.jsx)(x().A,{isMobile:!1,title:l,caption:c,type:"toggle",isOn:s,onToggle:a})}var ne=()=>s(563253),oe=()=>s(993342);const ae=(0,j()._h)(new(j().O2)("experimentSettings",(()=>Promise.all([s.e(23930),s.e(7717)]).then(s.bind(s,45135)))),(e=>e.ExperimentSettingsSection));function re(e){let{isPhone:t,isMobileNative:s,showOfflineSettings:i,passwordRequestStore:n,userEmailDomainSettings:o,billingData:r,accountSettings:d}=e;const c=s&&(0,a().et)(r),u=(0,M().l)(),p=!(t&&(0,_().T)("supportsNativeHome")),h=T().default.checkGate({gateName:"block_attribution"}),f=s&&T().default.checkGate({gateName:"mobile_open_links_in_external_browser"});return[{key:"password",renderSettingsItem:()=>(0,H.jsx)(ue,{passwordRequestStore:n,billingData:r})},T().default.checkGate({gateName:"hide_passkey_setting_for_old_android"})?void 0:{key:"passkeys",renderSettingsItem:()=>(0,H.jsx)(y().A,{samlEnforced:d.isSamlEnforced,hasPasskeys:d.hasPasskeys})},{key:"appearance",renderSettingsItem:()=>(0,H.jsx)(pe,{isMobile:!0})},f?{key:"open-external-links",renderSettingsItem:()=>(0,H.jsx)(me,{})}:void 0,p?{key:"page-on-app-start",renderSettingsItem:()=>(0,H.jsx)(oe().A,{isMobile:!0})}:void 0,h?{key:"block-attribution",renderSettingsItem:()=>(0,H.jsx)(ge,{isMobile:!0})}:void 0,c?{key:"subscription",renderSettingsItem:()=>(0,H.jsx)(v().L,{})}:void 0,{key:"user-consent",renderSettingsItem:()=>(0,H.jsx)(A().A,{emailDomainSettings:o.settings})},{key:"calendar",renderSettingsItem:()=>(0,H.jsx)(m().A,{})},u?{key:"experiments",renderSettingsItem:()=>(0,H.jsx)(ae,{})}:void 0,i&&s?{key:"offline",renderSettingsItem:()=>(0,H.jsx)(C().S,{})}:void 0,{key:"deleteAccount",renderSettingsItem:()=>(0,H.jsx)(g().A,{userEmailDomainSettings:o})},{key:"spaceInfo",renderSettingsItem:()=>(0,H.jsx)(le,{})}].filter(l().O9)}function le(){const e=(0,o().O$)(I().AppStoreCurrentSpaceStore);return e?(0,H.jsx)(f().K,{spaceStore:e,showDomain:!0}):null}function de(){return[{key:"appearance",renderSettingsItem:()=>(0,H.jsx)(pe,{isMobile:!1})}]}function ce(e){var t;const{environment:s}=e,{isElectron:i,isMac:n}=s.device,a=(0,k().X)("block_attribution"),r=(0,o().K8)((()=>(0,R().xu)(s)),[s]),d=(0,o().O$)(P().A),c=d.isQuickSearchSupported,u=Boolean(null===(t=d.preferences)||void 0===t?void 0:t.isQuickSearchEnabled),p=d.isMenuBarIconSupported,m=d.isNewTabSearchSupported,g=i&&c,h=i&&c&&u,f=i&&n&&p&&u;return[r?void 0:{key:"appearance",renderSettingsItem:()=>(0,H.jsx)(pe,{isMobile:!1})},i&&m?{key:"page-on-tab-start",renderSettingsItem:()=>(0,H.jsx)(he,{})}:void 0,...Y(e),g?{key:"quick-search-enabled",renderSettingsItem:()=>(0,H.jsx)(fe,{})}:void 0,h?{key:"quick-search-shortcut",renderSettingsItem:()=>(0,H.jsx)(Se,{})}:void 0,h?{key:"notion-ai-shortcut",renderSettingsItem:()=>(0,H.jsx)(ye,{})}:void 0,f?{key:"menu-bar-icon-enabled",renderSettingsItem:()=>(0,H.jsx)(be,{})}:void 0,a?{key:"block-attribution",renderSettingsItem:()=>(0,H.jsx)(ge,{isMobile:!1})}:void 0].filter(l().O9)}function ue(e){let{billingData:t,passwordRequestStore:s}=e;const i=(0,a().eh)(t,"student"),n=(0,o().K8)((()=>{var e;return(null===(e=I().default.state.currentUserStore)||void 0===e?void 0:e.getEmail())??""}),[]),{hasPassword:r,canConfigurePassword:l,isSamlEnforced:d,mfaStatus:c,error:u,ready:p}=(0,o().K8)((()=>({...s.state.result,error:s.state.error,ready:s.state.result})),[s]);return u?(0,H.jsx)(b().A,{hasPassword:!1,hasPasswordActions:!1,samlEnforced:!1,mfaStatus:"loading",email:n,onReloadSettings:()=>s.refresh(),isError:!0}):p?(0,H.jsx)(b().A,{hasPassword:r,hasPasswordActions:l,samlEnforced:d,mfaStatus:c,isEducationPlan:i,email:n,onReloadSettings:()=>s.refresh(),isError:!1}):(0,H.jsx)(h().A,{})}function pe(e){let{isMobile:t}=e;const s=(0,n().v3)(),i=(0,o().K8)((()=>c().lv(s)),[s]);return(0,H.jsx)(x().A,{isMobile:t,title:(0,H.jsx)(r().sA,{id:"appearanceSettings.title",defaultMessage:"Appearance"}),caption:(0,H.jsx)(r().sA,{id:"appearanceSettings.description.message",defaultMessage:"Customize how Notion looks on your device."}),type:"dropdown",currentOption:i,options:[{key:"system",label:(0,H.jsx)(r().sA,{id:"appearanceSetting.system.label",defaultMessage:"Use system setting"})},{key:"light",label:(0,H.jsx)(r().sA,{id:"appearanceSetting.light.label",defaultMessage:"Light"})},{key:"dark",label:(0,H.jsx)(r().sA,{id:"appearanceSetting.dark.label",defaultMessage:"Dark"})}],onSelectOption:e=>{c().C5(e)}})}function me(){const e=(0,o().K8)((()=>B().A.state??"external"),[]);return(0,H.jsx)(x().A,{isMobile:!0,title:(0,H.jsx)(r().sA,{id:"openExternalLinksSettings.title",defaultMessage:"External links"}),caption:(0,H.jsx)(r().sA,{id:"openExternalLinksSettings.description.message",defaultMessage:"Choose how to open links on this device."}),type:"dropdown",currentOption:e,options:[{key:"in-app",label:(0,H.jsx)(r().sA,{id:"openExternalLinksSettings.inAppBrowser.title",defaultMessage:"In-app browser"})},{key:"external",label:(0,H.jsx)(r().sA,{id:"openExternalLinksSettings.externalBrowser.title",defaultMessage:"System default browser"})}],onSelectOption:e=>{B().A.setState(e)}})}function ge(e){let{isMobile:t}=e;const s=(0,n().v3)(),a=(0,o().K8)((()=>I().default.state.currentUserSettingsStore),[]),l=(0,o().K8)((()=>{var e;return(null==a||null===(e=a.getSettings())||void 0===e?void 0:e.show_block_attribution)??!0}),[a]),d=(0,i.useCallback)((()=>{a&&u().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:s,canUndo:!0,perform:e=>{p().mJ({userSettingsStore:a,data:{show_block_attribution:!l},transaction:e})}})}),[a,l,s]);return(0,H.jsx)(x().A,{isMobile:t,title:(0,H.jsx)(r().sA,{id:"attributionSetting.title",defaultMessage:"Block attribution"}),caption:(0,H.jsx)(r().sA,{id:"attributionSetting.description.message",defaultMessage:"See your teammates’ initials to the left of blocks they created or edited."}),type:"toggle",isOn:l,onToggle:d})}function he(){const{currentPreference:e}=(0,o().K8)((()=>{var e;const t=P().A.state;return{currentPreference:Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isNewTabSearchEnabled)}}),[]),t=(0,i.useCallback)((()=>{const t=!e;d().electronAppFeatures.setPreference("isNewTabSearchEnabled",t)}),[e]),s=(0,H.jsx)(r().sA,{id:"desktopNewTabSearch.toggle.title",defaultMessage:"New Tab Search"}),n=(0,H.jsx)(r().sA,{id:"desktopNewTabSearch.toggle.caption",defaultMessage:"Immediately search for and navigate to a specific page when you open a new tab. When turned off, new tabs will follow your “Default page” settings. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,H.jsx)(S().A,{external:!0,href:(0,w().xS)("guides.whyDesktop"),onClick:e=>{e.stopPropagation()},children:e})}});return(0,H.jsx)(x().A,{isMobile:!1,type:"toggle",title:s,caption:n,isOn:e,onToggle:t})}function fe(){const{currentPreference:e}=(0,o().K8)((()=>{var e;const t=P().A.state;return{currentPreference:Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isQuickSearchEnabled)}}),[]),t=(0,i.useCallback)((()=>{const t=!e;d().electronAppFeatures.setPreference("isQuickSearchEnabled",t)}),[e]),s=(0,H.jsx)(r().sA,{id:"desktopQuickSearch.toggle.title",defaultMessage:"Use Command Search"}),n=(0,H.jsx)(r().sA,{id:"desktopQuickSearch.toggle.caption",defaultMessage:"Open Notion AI and search anywhere with a shortcut, even when your Notion app isn’t active."});return(0,H.jsx)(x().A,{isMobile:!1,type:"toggle",title:s,caption:n,isOn:e,onToggle:t})}function Se(){const{quickSearchShortcut:e,notionAiShortcut:t}=(0,o().K8)((()=>{const e=P().A.state.preferences;return{quickSearchShortcut:null==e?void 0:e.quickSearchShortcut,notionAiShortcut:null==e?void 0:e.notionAiShortcut}}),[]),{isMac:s}=(0,n().Y0)(),a=(0,i.useCallback)((e=>{d().electronAppFeatures.setPreference("quickSearchShortcut",e)}),[]),c=(0,H.jsx)(r().sA,{id:"desktopQuickSearch.shortcut.title",defaultMessage:"Command Search shortcut"}),u=(0,H.jsx)(r().sA,{id:"desktopQuickSearch.shortcut.caption",defaultMessage:"Customize the shortcut used to trigger Command Search."});return(0,H.jsx)(x().A,{isMobile:!1,type:"custom",title:c,caption:u,disableSettingsItemClick:!0,customButton:(0,H.jsx)("div",{children:(0,H.jsx)(ne().np,{shortcut:e,onChange:a,conflictingShortcuts:[t].filter(l().O9),isMac:s})})})}function ye(){const{notionAiShortcut:e,commandSearchShortcut:t}=(0,o().K8)((()=>{const e=P().A.state.preferences;return{notionAiShortcut:null==e?void 0:e.notionAiShortcut,commandSearchShortcut:null==e?void 0:e.quickSearchShortcut}}),[]),s=(0,i.useCallback)((e=>{d().electronAppFeatures.setPreference("notionAiShortcut",e)}),[]),{isMac:a}=(0,n().Y0)(),c=(0,H.jsx)(r().sA,{id:"desktopNotionAi.shortcut.title",defaultMessage:"Notion AI shortcut"}),u=(0,H.jsx)(r().sA,{id:"desktopNotionAi.shortcut.caption",defaultMessage:"Customize the shortcut to trigger Notion AI, if your workspace has AI enabled."});return(0,H.jsx)(x().A,{isMobile:!1,type:"custom",title:c,caption:u,disableSettingsItemClick:!0,customButton:(0,H.jsx)("div",{children:(0,H.jsx)(ne().np,{shortcut:e,onChange:s,conflictingShortcuts:[t].filter(l().O9),isMac:a})})})}function be(){const{isMenuBarIconEnabled:e}=(0,o().K8)((()=>{var e;const t=P().A.state;return{isMenuBarIconEnabled:Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isMenuBarIconEnabled)}}),[]),t=(0,i.useCallback)((()=>{d().electronAppFeatures.setPreference("isMenuBarIconEnabled",!e)}),[e]),s=(0,H.jsx)(r().sA,{id:"menuBarIconMacSetting.toggle.title",defaultMessage:"Show Notion in menu bar"}),n=(0,H.jsx)(r().sA,{id:"menuBarIconMacSetting.toggle.caption",defaultMessage:"Access Notion faster from the top right of your screen."});return(0,H.jsx)(x().A,{isMobile:!1,type:"toggle",title:s,caption:n,isOn:e,onToggle:t})}},442672:(e,t,s)=>{s.d(t,{u:()=>r});s(581454);var i=()=>s(690825),n=s(296540),o=()=>s(56366),a=s(474848);function r(e){const t=n.useRef(null),{rows:s=[],hasMore:r}=(0,o().O$)(e.listSource.rowsStore),l=(0,i().Te)({count:s.length,getScrollElement:()=>t.current,estimateSize:t=>e.estimateSize(s[t],t),overscan:10}),d=l.getVirtualItems();return(0,n.useEffect)((()=>{!async function(){const t=d[d.length-1];r&&(null==t?void 0:t.index)>=s.length-1&&await e.listSource.loadMore()}()}),[e.listSource,d,s.length,r]),(0,a.jsx)("div",{ref:t,style:{overflow:"auto",...e.style},children:(0,a.jsx)("div",{style:{height:`${l.getTotalSize()}px`,width:"100%",position:"relative"},children:d.map((t=>(0,a.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${t.size}px`,transform:`translateY(${t.start}px)`},children:e.renderRow(s[t.index],t.index)},t.key.toString())))})})}},454529:(e,t,s)=>{s.d(t,{y:()=>i});const i=(0,s(959013).YK)({offlineSettingsTitle:{id:"offlineSettings.title",defaultMessage:"Offline"},offlinePagesSectionSearchPlaceholder:{id:"offlineSettings.offlinePagesSection.searchPlaceholder",defaultMessage:"Search by name"},offlinePagesSectionSearchIconLabel:{id:"offlineSettings.offlinePagesSection.searchIconLabel",defaultMessage:"Search"}})},461857:(e,t,s)=>{s.d(t,{q:()=>o});s(898992),s(672577);var i=()=>s(449506),n=()=>s(775191);class o{constructor(e){this.environment=void 0,this.environment=e}async confirmIdentity(){const{settings:e,sessionVerificationExpirationInSeconds:t}=await this.loadSettings();return t&&t>2*s(720665).m1?{status:"ready"}:e.length>0?{status:"mfa",settings:e}:{status:"password"}}async loadSettings(){const e=await i().callApi({eventName:"authGetLoginConfiguration",environment:this.environment,data:{}});if("success"===e.type){const{data:t}=e;return"required"===t.samlSignIn?{settings:[],sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}:{settings:t.mfaOptions,sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}}throw e}async sendTemporaryPassword(e){const{email:t}=e,s=await i().callApi({eventName:"sendTemporaryPassword",environment:this.environment,data:{passwordReset:!0,email:t}});if("success"===s.type)return{status:"ok"};throw s}async verifyBackupCode(e){var t;const{code:s}=e,n=s.split("-").join(""),o=await i().callApi({eventName:"authVerifyBackupCodesLogin",environment:this.environment,data:{code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async verifyIdentityWithPassword(e){var t;const{password:s}=e,n=await i().callApi({eventName:"authVerifyPassword",environment:this.environment,data:{password:s}});if("success"===n.type)return{status:"match"};if("incorrect_password"===(null===(t=n.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw n}async disableMFA(){const e=await i().callApi({eventName:"authUpdateMfa",environment:this.environment,data:{action:"disable_all"}});if("success"===e.type)return{status:"ok"};throw e}async verifyIdentityWithTOTP(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifyTotpLogin",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async verifyIdentityWithSMS(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifySmsLogin",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async renameSettings(e){var t,s,n;const{mfaSettingId:o,friendlyName:a}=e,r=await i().callApi({eventName:"authUpdateMfa",environment:this.environment,data:{action:"rename",mfaSettingId:o,friendlyName:a}});if("success"===r.type)return{status:"saved",settings:r.data.mfaOptions};if("mfa_duplicate_friendly_name"===(null===(t=r.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"duplicate"};if("mfa_empty_friendly_name"===(null===(s=r.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"empty"};if("mfa_bad_friendly_name"===(null===(n=r.body)||void 0===n||null===(n=n.clientData)||void 0===n?void 0:n.type))return{status:"bad_friendly_name"};throw r}async deleteSettings(e){const t=await i().callApi({eventName:"authUpdateMfa",environment:this.environment,data:{action:"delete",mfaSettingId:e}});if("success"===t.type)return{settings:t.data.mfaOptions};throw t}async createTOTP(){const e=await i().callApi({eventName:"authCreateTotp",environment:this.environment,data:{}});if("success"===e.type)return{mfaSettingId:e.data.mfaSettingId,secret:e.data.authCode,qrCode:e.data.qrCode};throw e}async verifyTOTP(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifyTotpEnroll",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async createSMS(e,t){var s,n,o,a;const r=await i().callApi({eventName:"authCreateSms",environment:this.environment,data:{countryCode:e,phoneNumber:t}});if("success"===r.type)return{status:"created",mfaSettingId:r.data.mfaSettingId};if("already_verified_phone_number"===(null===(s=r.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"already_verified_phone_number"};if("invalid_country_code"===(null===(n=r.body)||void 0===n||null===(n=n.clientData)||void 0===n?void 0:n.type))return{status:"invalid_country_code"};if("invalid_phone_number"===(null===(o=r.body)||void 0===o||null===(o=o.clientData)||void 0===o?void 0:o.type))return{status:"invalid_phone_number"};if("mfa_sms_unsupported_country_code_for_enrollment"===(null===(a=r.body)||void 0===a||null===(a=a.clientData)||void 0===a?void 0:a.type))return{status:"sms_unsupported_country_code_for_enrollment"};throw r}async verifySMS(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifySmsEnroll",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async sendSMS(e){const{mfaSettingId:t}=e,s=await i().callApi({eventName:"authSendSms",environment:this.environment,data:{mfaSettingId:t}});if("success"===s.type)return{status:"ok"};throw s}async createBackupCodes(e){if(!e){const{settings:e}=await this.loadSettings();if(e.find((e=>"backup_code"===e.mfaMethod)))return{status:"already-exists"}}const t=await i().callApi({eventName:"authCreateBackupCodes",environment:this.environment,data:{}});if("success"===t.type)return{status:"new",mfaSettingId:t.data.mfaSettingId,backupCodes:t.data.codes};throw t}async loadPasskeySettings(){const e=await i().callApi({eventName:"authGetLoginConfiguration",environment:this.environment,data:{}});if("success"===e.type){const{data:t}=e;return{settings:t.passkeys}}throw e}async createPasskeySetting(e){const t=await i().callApi({eventName:"generatePasskeyRegistrationOptions",environment:e,data:{}});if("success"!==t.type)return{created:!1};const{options:s,attemptId:o}=t.data,a=await n().Go({options:s});return a?await n().d6({environment:e,attemptId:o,attestation:a}):{created:!1}}async renamePasskeySetting(e){const t=await i().callApi({eventName:"renamePasskey",environment:this.environment,data:e});if("success"===t.type)return{status:"saved",settings:t.data.passkeys};throw t}async deletePasskeySetting(e){const t=await i().callApi({eventName:"removePasskey",environment:this.environment,data:e});if("success"===t.type)return{settings:t.data.passkeys};throw t}}},480822:(e,t,s)=>{s.d(t,{x:()=>g});s(296540);var i=()=>s(401497),n=()=>s(246760),o=()=>s(959013),a=()=>s(84817),r=()=>s(493823),l=()=>s(187485),d=()=>s(460292),c=()=>s(554509),u=()=>s(859428),p=()=>s(21140),m=s(474848);function g(e){let{quantityOfPaidSeats:t,quantityOfSpaceMembers:s,nextBillingDate:n}=e;const a=(0,i().IS)((e=>({container:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",border:`1px solid ${e.stroke.secondary}`,borderRadius:6}})),[]),r=t-s,l=r<0?(0,m.jsx)(o().sA,{id:"spaceSettings.billingBreakdown.seatsTooltipText.gracePeriod",defaultMessage:"At the end of this billing period, you’ll be automatically charged for {difference, plural, one {# new seat} other {# new seats}} (since your current billing period is only for {difference, plural, one {# seat} other {# seats}}). Please ensure that the member list is up-to-date.",values:{difference:Math.abs(r),seats:t}}):r>0?(0,m.jsx)(o().sA,{id:"spaceSettings.billingBreakdown.seatsTooltipText.remainingSeats",defaultMessage:"You can invite {remainingSeats, plural, one {# more member} other {# more members}} without an additional charge, since you’ve already paid for those seats this billing period. You can also purchase more seats.",values:{remainingSeats:r}}):(0,m.jsx)(o().sA,{id:"spaceSettings.billingBreakdown.seatsTooltipText.noSeats",defaultMessage:"All seats are currently filled"});return(0,m.jsxs)("div",{style:a.container,children:[(0,m.jsx)(h,{title:(0,m.jsx)(o().sA,{id:"spaceSettings.billingBreakdown.title.paidSeatsTitle",defaultMessage:"Paid seats"}),titleTooltipContent:(0,m.jsx)(o().sA,{id:"spaceSettings.billingBreakdown.paidSeatsTooltip",defaultMessage:"The number of paid seats in your workspace"}),body:t}),(0,m.jsx)(h,{title:(0,m.jsx)(o().sA,{id:"spaceSettings.billingBreakdown.title.currentMembersTitle",defaultMessage:"Current members"}),titleTooltipContent:l,body:(0,m.jsxs)(p().Ye,{alignItems:"center",gap:4,children:[(0,m.jsx)("span",{children:s}),r<0?(0,m.jsx)("div",{style:{color:"green",fontSize:10},children:"▲"}):r>0?(0,m.jsx)("div",{style:{color:"gray",fontSize:10},children:"▼"}):null]})}),(0,m.jsx)(h,{customStyles:{borderRight:"none"},title:(0,m.jsx)(o().sA,{id:"spaceSettings.billingBreakdown.title.nextBillingPeriodTitle",defaultMessage:"Next billing period"}),titleTooltipContent:(0,m.jsx)(o().sA,{id:"spaceSettings.billingBreakdown.nextBillingPeriodTooltip",defaultMessage:"You have paid for seats until the next billing period, and you may purchase more before the next billing period"}),body:n})]})}function h(e){let{title:t,titleTooltipContent:s,body:p,customStyles:g}=e;const h=(0,i().IS)((e=>({container:{padding:16,borderRight:`1px solid ${e.stroke.secondary}`,...g},helpIcon:{borderRadius:3,height:"auto",padding:0}})),[g]);return(0,m.jsxs)("div",{style:h.container,children:[(0,m.jsxs)(a().Y1,{direction:"horizontal",align:"center-left",gap:4,style:{marginBottom:4},children:[(0,m.jsx)(c().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t}),(0,m.jsx)(u().A,{allowHover:!0,textWrap:!0,renderTooltip:e=>(0,m.jsxs)(a().Y1,{width:200,gap:2,style:{whiteSpace:"normal"},...e,children:[s,(0,m.jsx)(l().A,{href:"https://www.notion.so/help/guides/adding-members-admins-and-guests",children:(0,m.jsx)(c().D,{colorName:"contrastSecondary",children:(0,m.jsx)(o().sA,{id:"spaceSettings.people.peopleDashboard.clickToLearnMore",defaultMessage:"Click to learn more"})})})]}),render:e=>(0,m.jsx)(r().p,{...e,style:h.helpIcon,className:"tooltip-button",role:"button",href:"https://www.notion.so/help/guides/adding-members-admins-and-guests",children:(0,m.jsx)(d().Q,{iconGroup:n().G,variantName:"small",colorName:"tertiary"})})})]}),(0,m.jsx)(c().D,{styleName:"Heading-17px/Medium",children:p})]})}},508490:(e,t,s)=>{s.d(t,{A:()=>m});s(296540);var i=()=>s(484714),n=()=>s(401497),o=()=>s(442277),a=()=>s(959013),r=()=>s(284371),l=()=>s(966505),d=()=>s(404141),c=()=>s(197190),u=()=>s(125565),p=s(474848);function m(e){const{icon:t,title:s,deeplinkTab:m}=e,g=(0,i().v3)(),h=(0,n().IS)((e=>({cardContainer:{backgroundColor:e.palette.gray[30],width:"100%",marginTop:20,marginBottom:20,padding:10,border:4,display:"flex",alignItems:"center",justifyContent:"space-between",gap:4,overflow:"hidden"},title:{flexShrink:1,...r().RC},titleContainer:{display:"flex",alignItems:"center",flexShrink:1,overflow:"hidden"},button:{borderRadius:2,padding:4,display:"flex",alignItems:"center"},linkTitle:{color:e.text.secondary,fontWeight:r().Wy.medium},titleIcon:{marginRight:8,height:20,width:20,color:e.text.secondary},arrowIcon:{marginLeft:4,color:e.text.secondary,height:14,width:14}})),[]);return(0,p.jsxs)("div",{style:h.cardContainer,children:[(0,p.jsxs)("div",{style:h.titleContainer,children:[t(h.titleIcon),(0,p.jsx)(u().A,{style:h.title,showTooltipWhenTruncated:!0,children:s})]}),m?(0,p.jsxs)(c().A,{onClick:()=>function(e,t){l().Gq(t,{source_tab:d().A.state.currentTab,destination_tab:e.currentTab,destination_subtab:e.defaultSubtab}),d().A.setState({...d().A.state,...e})}(m,g),style:h.button,children:[(0,p.jsx)(u().A,{style:h.linkTitle,children:(0,p.jsx)(a().sA,{id:"settingsDeeplinkBanner.deeplinkMessage",defaultMessage:"View settings"})}),(0,o().B)(h.arrowIcon)]}):null]})}},526292:(e,t,s)=>{s.d(t,{T:()=>v});var i=s(296540),n=()=>s(484714),o=()=>s(56366),a=()=>s(401497),r=s(474848);const l={viewBox:"0 0 20 20",fittedViewBox:"0.35 2.37 17.28 15.26",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M2.557 13.1a.625.625 0 0 0 .884.003l2.03-2.02a.625.625 0 1 0-.882-.886l-.964.96V10a6.375 6.375 0 1 1 1.925 4.565.625.625 0 1 0-.872.895A7.625 7.625 0 1 0 2.375 10v1.146l-.952-.957a.625.625 0 1 0-.886.882z"}),(0,r.jsx)("path",{d:"M9.875 6.25c.345 0 .625.28.625.625v3.5a.625.625 0 0 1-1.25 0v-3.5c0-.345.28-.625.625-.625m0 7.375a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5"})]})},d=(0,s(340498).wt)("exclamationMarkCircleArrow",l);var c=()=>s(959013),u=()=>s(296798),p=()=>s(331542),m=()=>s(8980),g=()=>s(744766),h=()=>s(560868),f=()=>s(670631),S=()=>s(227440),y=()=>s(404141);const b=10,x=(0,c().YK)({downloadingSubTitle:{id:"offlinePagesTable.cell.pageNameDownloading",defaultMessage:"Syncing..."},failedOnlineSubTitle:{id:"offlinePagesTable.cell.pageNameFailedOnline",defaultMessage:"Failed. Tap to retry."},failedOfflineSubTitle:{id:"offlinePagesTable.cell.pageNameFailedOffline",defaultMessage:"Failed. Go online to retry."}}),v={id:"pageName",headerTitle:(0,r.jsx)(c().sA,{id:"offlinePagesTable.columnHeader.pageName",defaultMessage:"Page name"}),renderCell:e=>(0,r.jsx)(A,{pageBlockStore:e.pageBlockStore,downloadStatus:e.downloadStatus}),widthData:{width:260},sortable:!1};function A(e){let{pageBlockStore:t,downloadStatus:n}=e;const a=(0,s(963589).X)("offline_desktop_ui_updates"),l=j(),d=(0,s(46986).x6)(),{displayTitle:c}=(0,o().K8)((()=>(0,g().tL)({blockStore:t,isWorkflowsContainerWithCreationEnabled:d})),[t,d]),p=(0,o().K8)((()=>(0,s(492414).J8)({store:t,pageVisitSource:s(584262).y8.LinkInPage})),[t]),m=(0,i.useCallback)((e=>{e.metaKey||y().A.setState({...y().A.state,open:!1})}),[]);return a?(0,r.jsx)("div",{style:l.container,children:"failed"===n?(0,r.jsx)(w,{blockStore:t,pageTitle:c}):(0,r.jsx)(u().A,{href:p,style:l.linkBox,hoveredStyle:l.linkBoxHover,onClick:m,children:"downloading"===n?(0,r.jsx)(M,{pageTitle:c}):(0,r.jsx)(g().oc,{blockStore:t,skipUntitledStyling:!0})})}):(0,r.jsx)(u().A,{href:p,style:l.linkBox,hoveredStyle:l.linkBoxHover,onClick:m,children:(0,r.jsx)(g().oc,{blockStore:t,skipUntitledStyling:!0})})}function w(e){let{blockStore:t,pageTitle:s}=e;const a=(0,n().v3)(),l=(0,c().tz)(),p=j(),y=(0,o().O$)(S().e),[b,v]=(0,i.useState)(!1),A=(0,o().K8)((()=>f().A.state.isSlowWrite),[]);(0,i.useEffect)((()=>{if(!b)return;if(A)return;const e=setTimeout((()=>{v(!1)}),500);return()=>{e&&clearTimeout(e)}}),[A,b]);const w=(0,i.useCallback)((()=>{y&&(v(!0),(0,h().lX)({store:t,environment:a,analyticsFrom:"offline_settings",operation:"addPage"}))}),[y,t,a]);return b?(0,r.jsx)(M,{pageTitle:s}):(0,r.jsx)(u().A,{disabled:!y,hoveredStyle:p.linkBoxHover,onClick:w,style:p.linkBox,children:(0,r.jsx)(g().dX,{mainIcon:(0,r.jsx)(m().I,{icon:d,color:"uiRedPrimary"}),subTitle:l.formatMessage(y?x.failedOnlineSubTitle:x.failedOfflineSubTitle),title:s,titleOpacity:.25})})}function M(e){let{pageTitle:t}=e;const s=(0,c().tz)();return(0,r.jsx)(g().dX,{mainIcon:(0,r.jsx)(p().A,{}),subTitle:s.formatMessage(x.downloadingSubTitle),title:t})}function j(){return(0,a().IS)((()=>({container:{width:"100%"},linkBox:{width:"100%"},linkBoxHover:{marginLeft:-b,paddingLeft:b,width:`calc(100% + ${b}px)`}})),[])}},537296:(e,t,s)=>{s.d(t,{U:()=>c});s(581454);var i=s(296540),n=()=>s(484714),o=()=>s(681873),a=()=>s(722872),r=()=>s(141966),l=()=>s(802790),d=s(474848);function c(e){const{items:t}=e,{isMobile:s}=(0,n().Y0)(),c=(0,a().Tf)(),u=(0,r().H)(s,c);return(0,d.jsx)(d.Fragment,{children:(0,o().A)(t.map((e=>{let{key:t,renderSettingsItem:s}=e;return(0,d.jsx)(i.Fragment,{children:s()},t)})),(e=>(0,d.jsx)(l().A,{size:u,isHidden:!s},e)))})}},538669:(e,t,s)=>{s.d(t,{G:()=>a,N:()=>o});var i=()=>s(534177),n=()=>s(478525);class o extends(()=>s(757695))().Store{getInitialState(){return{step:"smsUninitialized"}}}class a extends(()=>s(658921))()._{constructor(e,t){super(e,"sms"),this.service=void 0,this.service=t}smsStart(){this.checkStep("smsUninitialized")&&this.store.setState({step:"smsSetPhoneNumber"})}smsRestart(){const e=this.checkStep(["smsResendSMS","smsVerifyCode","smsVerifying"]);e&&this.store.setState({step:"smsSetPhoneNumber",country:e.country,phoneNumber:e.phoneNumber,error:void 0})}smsCreateSMS(e,t){this.checkStep("smsSetPhoneNumber")&&(this.store.setState({country:e,phoneNumber:t,step:"smsSendingSMS"}),this.doCreateSMS().catch(this.handleUnexpectedError))}smsResendSMS(){const e=this.checkStep(["smsVerifyCode","smsVerifying"]);e&&(this.store.setState({...e,step:"smsResendSMS",error:void 0}),this.doResendSMS().catch(this.handleUnexpectedError))}smsVerifyCode(e){const{code:t,onVerified:s}=e,i=this.checkStep("smsVerifyCode");i&&(this.store.setState({...i,step:"smsVerifying",error:void 0}),this.doVerifyCode({code:t,onVerified:s}).catch(this.handleUnexpectedError))}smsBackupCodesComplete(){this.checkStep("smsBackupCodesLoading")&&this.store.setState({step:"smsVerified"})}smsComplete(){this.checkStep("smsVerified")&&this.store.setState({step:"smsComplete"})}exit(){this.store.setState({step:"smsUninitialized"})}async doCreateSMS(){const e=await this.withStep("smsSendingSMS",(e=>this.service.createSMS(e.country.countryCode,e.phoneNumber)));if(!e)return;const{result:t,state:s}=e;switch(t.status){case"created":this.store.setState({...s,step:"smsVerifyCode",mfaSettingId:t.mfaSettingId,error:void 0});break;case"already_verified_phone_number":this.store.setState({step:"smsSetPhoneNumber",error:n().xc.smsAlreadyVerifiedPhoneNumber});break;case"invalid_country_code":this.store.setState({step:"smsSetPhoneNumber",error:n().xc.smsInvalidCountryCode});break;case"invalid_phone_number":this.store.setState({step:"smsSetPhoneNumber",error:n().xc.smsInvalidPhoneCode});break;case"sms_unsupported_country_code_for_enrollment":this.store.setState({step:"smsSetPhoneNumber",error:n().xc.smsUnsupportedCountryCodeForEnrollment});break;default:return(0,i().HB)(t)}}async doVerifyCode(e){const{code:t,onVerified:s}=e,o=await this.withStep("smsVerifying",(e=>this.service.verifySMS({mfaSettingId:e.mfaSettingId,code:t})));if(!o)return;const{result:a,state:r}=o;switch(a.status){case"match":this.store.setState({step:"smsBackupCodesLoading",country:r.country,phoneNumber:r.phoneNumber}),s();break;case"error":this.store.setState({...r,step:"smsVerifyCode",error:n().xc.unexpectedError});break;case"incorrect":this.store.setState({...r,step:"smsVerifyCode",error:n().xc.smsIncorrectCode});break;default:return(0,i().HB)(a.status)}}async doResendSMS(){const e=await this.withStep("smsResendSMS",(e=>this.service.sendSMS({mfaSettingId:e.mfaSettingId})));if(!e)return;const{result:t,state:s}=e;switch(t.status){case"ok":this.store.setState({...s,step:"smsVerifyCode",mfaSettingId:s.mfaSettingId,error:void 0,resentAt:Date.now()});break;case"error":this.store.setState({...s,step:"smsVerifyCode",mfaSettingId:s.mfaSettingId,error:n().xc.unexpectedError});break;default:return(0,i().HB)(t.status)}}}},549200:(e,t,s)=>{s.d(t,{b:()=>d,f:()=>l});var i=()=>s(617871),n=()=>s(857639),o=()=>s(502800),a=()=>s(763824),r=()=>s(449506);const l=s(496603).sg((e=>{let{environment:t,flowId:i,origin:n,type:o}=e;switch(o){case"slack":s(898563).tr(t,{origin:n,invite_flow_id:i});break;case"google":s(278407).Ng(t,{origin:n,invite_flow_id:i});break;default:(0,s(534177).HB)(o)}}),2e3);async function d(e){const{bots:t,spaceId:s,environment:l}=e;await(0,a().lX)(t,10,(async e=>{const{botId:t,importContactType:a}=e,d="google"===a?i().E8:i().zG;await r().callApi({eventName:"loadContacts",environment:l,data:{botId:t,spaceId:s,integrationId:d,importContactType:a}}).catch((e=>{n().log({level:"error",from:"loadContactsForBots",type:"loadContacts",error:(0,o().convertErrorToLog)(e)})}))}))}},558034:(e,t,s)=>{s.d(t,{mt:()=>n().m,jJ:()=>o().j});var i=()=>s(340498);(0,i().xh)("abstract",{default:{loader:()=>s.e(40471).then(s.bind(s,324692))},darkMode:{loader:()=>s.e(40471).then(s.bind(s,90816))},tintable:{loader:()=>s.e(40471).then(s.bind(s,695122))},darkModeTintable:{loader:()=>s.e(40471).then(s.bind(s,239229))}}),(0,i().xh)("adobeXd",{default:{loader:()=>s.e(79254).then(s.bind(s,735385))},darkMode:{loader:()=>s.e(79254).then(s.bind(s,214991))}}),(0,i().xh)("airtable",{default:{loader:()=>s.e(73865).then(s.bind(s,201350))},darkMode:{loader:()=>s.e(73865).then(s.bind(s,816142))}}),(0,i().xh)("amplitude",{default:{loader:()=>s.e(36448).then(s.bind(s,683631))},darkMode:{loader:()=>s.e(36448).then(s.bind(s,130049))},tintable:{loader:()=>s.e(36448).then(s.bind(s,360727))},darkModeTintable:{loader:()=>s.e(36448).then(s.bind(s,338096))}}),(0,i().xh)("apple",{default:{loader:()=>s.e(5815).then(s.bind(s,834258))},darkMode:{loader:()=>s.e(5815).then(s.bind(s,425722))},tintable:{loader:()=>s.e(5815).then(s.bind(s,888976))},darkModeTintable:{loader:()=>s.e(5815).then(s.bind(s,231223))}}),(0,i().xh)("asana",{default:{loader:()=>s.e(44225).then(s.bind(s,686452))},darkMode:{loader:()=>s.e(44225).then(s.bind(s,139808))},tintable:{loader:()=>s.e(44225).then(s.bind(s,159794))},darkModeTintable:{loader:()=>s.e(44225).then(s.bind(s,960093))}}),(0,i().xh)("basecamp",{default:{loader:()=>s.e(67601).then(s.bind(s,229574))},darkMode:{loader:()=>s.e(67601).then(s.bind(s,976782))}}),(0,i().xh)("bitwarden",{default:{loader:()=>s.e(60245).then(s.bind(s,146232))},darkMode:{loader:()=>s.e(60245).then(s.bind(s,695796))}}),(0,i().xh)("box",{default:{loader:()=>s.e(88472).then(s.bind(s,180187))},darkMode:{loader:()=>s.e(88472).then(s.bind(s,695661))}});(0,i().xh)("clickUp",{default:{loader:()=>s.e(52084).then(s.bind(s,676243))},darkMode:{loader:()=>s.e(52084).then(s.bind(s,992757))}}),(0,i().xh)("coda",{default:{loader:()=>s.e(59430).then(s.bind(s,216703))},darkMode:{loader:()=>s.e(59430).then(s.bind(s,266129))}}),(0,i().xh)("codepen",{default:{loader:()=>s.e(32179).then(s.bind(s,732198))},darkMode:{loader:()=>s.e(32179).then(s.bind(s,77870))}}),(0,i().xh)("confluence",{default:{loader:()=>s.e(16999).then(s.bind(s,658212))},darkMode:{loader:()=>s.e(16999).then(s.bind(s,7952))}}),(0,i().xh)("dashlane",{default:{loader:()=>s.e(34251).then(s.bind(s,603556))},darkMode:{loader:()=>s.e(34251).then(s.bind(s,754064))}}),(0,i().xh)("deepnote",{default:{loader:()=>s.e(2147).then(s.bind(s,46192))},darkMode:{loader:()=>s.e(2147).then(s.bind(s,849404))}}),(0,i().xh)("dropbox",{default:{loader:()=>s.e(30737).then(s.bind(s,374436))},darkMode:{loader:()=>s.e(30737).then(s.bind(s,983440))}}),(0,i().xh)("evernote",{default:{loader:()=>s.e(89253).then(s.bind(s,943322))},darkMode:{loader:()=>s.e(89253).then(s.bind(s,103954))}}),(0,i().xh)("excalidraw",{default:{loader:()=>s.e(23873).then(s.bind(s,651374))},darkMode:{loader:()=>s.e(23873).then(s.bind(s,742758))}}),(0,i().xh)("figma",{default:{loader:()=>s.e(44539).then(s.bind(s,158894))},darkMode:{loader:()=>s.e(44539).then(s.bind(s,56358))}}),(0,i().xh)("framer",{default:{loader:()=>s.e(87102).then(s.bind(s,214039))},darkMode:{loader:()=>s.e(87102).then(s.bind(s,447577))}});(0,i().xh)("gitLab",{default:{loader:()=>s.e(70916).then(s.bind(s,178469))},darkMode:{loader:()=>s.e(70916).then(s.bind(s,985627))}});(0,i().xh)("googleDocs",{default:{loader:()=>s.e(49373).then(s.bind(s,481082))},darkMode:{loader:()=>s.e(49373).then(s.bind(s,217138))}});var n=()=>s(187859);(0,i().xh)("grid",{default:{loader:()=>s.e(21697).then(s.bind(s,866894))},darkMode:{loader:()=>s.e(21697).then(s.bind(s,155142))}}),(0,i().xh)("hex",{default:{loader:()=>s.e(20512).then(s.bind(s,599927))},darkMode:{loader:()=>s.e(20512).then(s.bind(s,216953))}}),(0,i().xh)("hubSpot",{default:{loader:()=>s.e(21914).then(s.bind(s,757381))},darkMode:{loader:()=>s.e(21914).then(s.bind(s,533499))}}),(0,i().xh)("instagram",{default:{loader:()=>s.e(77355).then(s.bind(s,749910))},darkMode:{loader:()=>s.e(77355).then(s.bind(s,117470))}}),(0,i().xh)("inVision",{default:{loader:()=>s.e(35364).then(s.bind(s,515285))},darkMode:{loader:()=>s.e(35364).then(s.bind(s,482763))}});(0,i().xh)("linkedin",{default:{loader:()=>s.e(58319).then(s.bind(s,960860))},darkMode:{loader:()=>s.e(58319).then(s.bind(s,202680))}}),(0,i().xh)("loom",{default:{loader:()=>s.e(68642).then(s.bind(s,464083))},darkMode:{loader:()=>s.e(68642).then(s.bind(s,910005))}}),(0,i().xh)("lucidchart",{default:{loader:()=>s.e(30512).then(s.bind(s,355893))},darkMode:{loader:()=>s.e(30512).then(s.bind(s,705835))}}),(0,i().xh)("lucidspark",{default:{loader:()=>s.e(7391).then(s.bind(s,243208))},darkMode:{loader:()=>s.e(7391).then(s.bind(s,653636))}}),(0,i().xh)("make",{default:{loader:()=>s.e(14079).then(s.bind(s,560996))},darkMode:{loader:()=>s.e(14079).then(s.bind(s,924816))}}),(0,i().xh)("maps",{default:{loader:()=>s.e(78724).then(s.bind(s,799017))},darkMode:{loader:()=>s.e(78724).then(s.bind(s,191967))}}),(0,i().xh)("microsoftOneNote",{default:{loader:()=>s.e(96773).then(s.bind(s,186186))},darkMode:{loader:()=>s.e(96773).then(s.bind(s,657474))}});(0,i().xh)("microsoftWord",{default:{loader:()=>s.e(67199).then(s.bind(s,704562))},darkMode:{loader:()=>s.e(67199).then(s.bind(s,876762))}}),(0,i().xh)("miro",{default:{loader:()=>s.e(6122).then(s.bind(s,620507))},darkMode:{loader:()=>s.e(6122).then(s.bind(s,296173))}}),(0,i().xh)("mixpanel",{default:{loader:()=>s.e(41837).then(s.bind(s,191726))},darkMode:{loader:()=>s.e(41837).then(s.bind(s,282662))}}),(0,i().xh)("monday",{default:{loader:()=>s.e(98713).then(s.bind(s,357926))},darkMode:{loader:()=>s.e(98713).then(s.bind(s,947758))}}),(0,i().xh)("notionCalendar",{default:{loader:()=>s.e(30848).then(s.bind(s,16789))},darkMode:{loader:()=>s.e(30848).then(s.bind(s,540491))}});(0,i().xh)("oneDrive",{default:{loader:()=>s.e(77957).then(s.bind(s,582162))},darkMode:{loader:()=>s.e(77957).then(s.bind(s,952634))}}),(0,i().xh)("onePassword",{default:{loader:()=>s.e(71768).then(s.bind(s,507291))},darkMode:{loader:()=>s.e(71768).then(s.bind(s,463725))}});(0,i().xh)("pagerDuty",{default:{loader:()=>s.e(19314).then(s.bind(s,173737))},darkMode:{loader:()=>s.e(19314).then(s.bind(s,71455))}}),(0,i().xh)("pitch",{default:{loader:()=>s.e(39689).then(s.bind(s,574892))},darkMode:{loader:()=>s.e(39689).then(s.bind(s,61e3))}}),(0,i().xh)("polymer",{default:{loader:()=>s.e(38949).then(s.bind(s,907596))},darkMode:{loader:()=>s.e(38949).then(s.bind(s,370728))}}),(0,i().xh)("protonPass",{default:{loader:()=>s.e(99998).then(s.bind(s,401823))},darkMode:{loader:()=>s.e(99998).then(s.bind(s,423857))}}),(0,i().xh)("quip",{default:{loader:()=>s.e(61492).then(s.bind(s,592353))},darkMode:{loader:()=>s.e(61492).then(s.bind(s,266183))}}),(0,i().xh)("replit",{default:{loader:()=>s.e(49229).then(s.bind(s,394666))},darkMode:{loader:()=>s.e(49229).then(s.bind(s,800098))}}),(0,i().xh)("salesforce",{default:{loader:()=>s.e(81764).then(s.bind(s,769145))},darkMode:{loader:()=>s.e(81764).then(s.bind(s,781167))}}),(0,i().xh)("sketch",{default:{loader:()=>s.e(64557).then(s.bind(s,118038))},darkMode:{loader:()=>s.e(64557).then(s.bind(s,461086))}});var o=()=>s(703888);(0,i().xh)("smartSheet",{default:{loader:()=>s.e(87153).then(s.bind(s,800230))},darkMode:{loader:()=>s.e(87153).then(s.bind(s,198574))}}),(0,i().xh)("tiktok",{default:{loader:()=>s.e(80931).then(s.bind(s,605820))},darkMode:{loader:()=>s.e(80931).then(s.bind(s,832728))}}),(0,i().xh)("trello",{default:{loader:()=>s.e(9555).then(s.bind(s,590852))},darkMode:{loader:()=>s.e(9555).then(s.bind(s,259056))}}),(0,i().xh)("twitter",{default:{loader:()=>s.e(53974).then(s.bind(s,361881))},darkMode:{loader:()=>s.e(53974).then(s.bind(s,572175))}}),(0,i().xh)("typeform",{default:{loader:()=>s.e(61487).then(s.bind(s,528312))},darkMode:{loader:()=>s.e(61487).then(s.bind(s,780404))}}),(0,i().xh)("whimsical",{default:{loader:()=>s.e(43862).then(s.bind(s,164241))},darkMode:{loader:()=>s.e(43862).then(s.bind(s,902308))}}),(0,i().xh)("workflowy",{default:{loader:()=>s.e(15135).then(s.bind(s,948458))},darkMode:{loader:()=>s.e(15135).then(s.bind(s,565090))}}),(0,i().xh)("youTube",{default:{loader:()=>s.e(55724).then(s.bind(s,720931))},darkMode:{loader:()=>s.e(55724).then(s.bind(s,901509))}}),(0,i().xh)("zapier",{default:{loader:()=>s.e(70074).then(s.bind(s,255811))},darkMode:{loader:()=>s.e(70074).then(s.bind(s,376037))}}),(0,i().xh)("zendesk",{default:{loader:()=>s.e(11235).then(s.bind(s,295434))},darkMode:{loader:()=>s.e(11235).then(s.bind(s,373826))}}),(0,i().xh)("zoom",{default:{loader:()=>s.e(9832).then(s.bind(s,444901))},darkMode:{loader:()=>s.e(9832).then(s.bind(s,360923))}})},560686:(e,t,s)=>{s.d(t,{ZK:()=>n,aC:()=>o,lO:()=>a});var i=()=>s(496603);function n(e){if(i().sb(e).length<=3)return{success:!1,reason:{type:"password_too_consistent"}};if(e.length>=15)return{success:!0};if(e.length<8)return{success:!1,reason:{type:"password_too_short"}};const t=o(e),s=a(e);return t&&s?{success:!0}:t||s?s?t?{success:!1,reason:{type:"password_too_short"}}:{success:!1,reason:{type:"password_missing_letter"}}:{success:!1,reason:{type:"password_missing_number"}}:{success:!1,reason:{type:"password_missing_letter_and_number"}}}function o(e){return e.match(/[a-z]/i)}function a(e){return e.match(/\d/)}},560838:(e,t,s)=>{s.d(t,{_:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("handWave",{viewBox:"0 0 14 15",svg:(0,i.jsx)("path",{d:"M12.223 12.396c.888-.893 1.406-1.886 1.551-2.98.15-1.098-.08-2.288-.69-3.568l-1.552-3.275a2.264 2.264 0 00-.417-.594 1.28 1.28 0 00-.95-.404c-.36 0-.677.135-.95.404a1.211 1.211 0 00-.335.628c-.05.247-.023.502.082.766l.383.91c.013.031.011.056-.007.074-.023.019-.048.016-.075-.006L5.537.625C5.232.32 4.897.167 4.532.167c-.36-.005-.688.144-.984.444a1.115 1.115 0 00-.219.308 1.13 1.13 0 00-.096.349c-.291-.2-.59-.288-.895-.26-.3.023-.574.157-.82.403a1.278 1.278 0 00-.397.827c-.023.306.057.6.24.882a.876.876 0 00-.602.287c-.278.274-.415.584-.41.93.004.346.148.66.43.943l.458.458a.877.877 0 00-.348.09 1.115 1.115 0 00-.308.218 1.32 1.32 0 00-.37.615 1.29 1.29 0 00.021.684 1.6 1.6 0 00.397.635l4.231 4.232c.78.775 1.6 1.294 2.461 1.559.866.264 1.72.28 2.564.047.843-.232 1.622-.706 2.338-1.421zm-.841-.793c-.579.58-1.197.957-1.853 1.135-.651.178-1.317.15-1.996-.082-.674-.228-1.335-.663-1.982-1.305L1.497 7.297a.452.452 0 01-.143-.308.38.38 0 01.13-.3.403.403 0 01.3-.137c.119 0 .223.045.315.136l2.495 2.489a.45.45 0 00.355.15.476.476 0 00.342-.15.478.478 0 00.164-.349.461.461 0 00-.15-.362l-3.733-3.74a.446.446 0 01-.143-.3.38.38 0 01.13-.301.425.425 0 01.307-.137.45.45 0 01.315.137l3.48 3.486c.104.1.225.148.361.144a.476.476 0 00.342-.15c.1-.1.153-.22.157-.356a.47.47 0 00-.143-.362L2.283 2.799a.477.477 0 01-.143-.315.41.41 0 01.136-.307.39.39 0 01.301-.123c.119.004.223.05.315.136l4.04 4.034a.434.434 0 00.348.15.5.5 0 00.349-.15c.1-.1.153-.22.157-.356a.46.46 0 00-.137-.355L4.218 2.08a.425.425 0 01-.137-.308c0-.113.041-.216.123-.307a.41.41 0 01.308-.123c.114 0 .218.045.314.136L9.64 6.292c.136.141.282.212.437.212a.577.577 0 00.403-.178.71.71 0 00.192-.342c.032-.136.011-.298-.062-.485L9.748 3.25a.52.52 0 01-.014-.37.42.42 0 01.22-.232.362.362 0 01.32 0c.1.05.185.149.253.294l1.586 3.377c.52 1.121.702 2.108.547 2.96-.155.853-.58 1.627-1.278 2.325z"})})},562866:(e,t,s)=>{s.d(t,{$c:()=>r,aI:()=>a,cx:()=>o,uf:()=>n});var i=()=>s(645873);const n={RequestMembersModal:new(i().O2)("RequestMembersModal",(()=>Promise.all([s.e(75134),s.e(16471),s.e(58550),s.e(44711),s.e(53321),s.e(90825),s.e(96346),s.e(55373),s.e(37353),s.e(29151),s.e(78191),s.e(92845),s.e(84468),s.e(5605),s.e(48486),s.e(95794),s.e(13677),s.e(56952),s.e(48632),s.e(75078),s.e(25497),s.e(74562),s.e(27711),s.e(4422),s.e(11341),s.e(46414),s.e(95168),s.e(28271),s.e(34877),s.e(36908),s.e(17254),s.e(84185),s.e(32421),s.e(15315),s.e(24587),s.e(78708),s.e(43777),s.e(74752),s.e(91194),s.e(81197),s.e(98659),s.e(20502),s.e(6266),s.e(8184),s.e(83884),s.e(65881),s.e(99809),s.e(93282),s.e(43678),s.e(15019),s.e(90978),s.e(3910),s.e(77213),s.e(80781),s.e(34442),s.e(94233),s.e(77282)]).then(s.bind(s,123350)))),GoogleImportsInviteWithModal:new(i().O2)("GoogleImportsInviteWithModal",(()=>Promise.all([s.e(92845),s.e(84468),s.e(5605),s.e(48486),s.e(95794),s.e(13677),s.e(56952),s.e(50569),s.e(51226)]).then(s.bind(s,720193)))),InviteDropdownMenuItemLabel:new(i().O2)("InviteDropdownMenuItemLabel",(()=>s.e(25171).then(s.bind(s,726799)))),personPropertyInviteActions:new(i().O2)("personPropertyInviteActions",(()=>Promise.all([s.e(92845),s.e(84468),s.e(5605),s.e(48486),s.e(95794),s.e(13677),s.e(57613)]).then(s.bind(s,980270))))},o=(0,i()._h)(n.RequestMembersModal,(e=>e.RequestMembersModal)),a=(0,i()._h)(n.GoogleImportsInviteWithModal,(e=>e.GoogleImportsInviteWithModal)),r=(0,i()._h)(n.InviteDropdownMenuItemLabel,(e=>e.InviteDropdownMenuItemLabel))},579631:(e,t,s)=>{s.d(t,{SS:()=>d,_g:()=>r,co:()=>l,e1:()=>a,kF:()=>n,mu:()=>o});var i=()=>s(679924);function n(e,t){(0,i().v)(e,"toggle_open_in_desktop_app",t)}function o(e){(0,i().v)(e,"configure_open_in_desktop_app")}function a(e){(0,i().v)(e,"open_in_desktop_app_popup_dismiss")}function r(e){(0,i().v)(e,"open_in_desktop_app_popup_display")}function l(e){(0,i().v)(e,"open_in_desktop_app_popup_download")}function d(e,t){(0,i().v)(e,"open_in_desktop_app_popup_open_in_app",t)}},583705:(e,t,s)=>{s.d(t,{$:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("group",{viewBox:"0 0 30 30",svg:(0,i.jsx)("path",{d:"M15.011 14.795c1.678 0 3.096-1.502 3.096-3.444C18.107 9.455 16.682 8 15.012 8c-1.67 0-3.096 1.478-3.088 3.367 0 1.926 1.41 3.428 3.088 3.428zm-8.872.178c1.464 0 2.697-1.316 2.697-3.003 0-1.656-1.241-2.917-2.697-2.917-1.448 0-2.697 1.284-2.69 2.933 0 1.671 1.234 2.987 2.69 2.987zm17.722 0c1.456 0 2.69-1.316 2.69-2.987.007-1.649-1.242-2.933-2.69-2.933s-2.697 1.261-2.697 2.917c0 1.687 1.241 3.003 2.697 3.003zM1.917 22h5.747c-.82-1.184.069-3.521 1.8-4.899-.842-.55-1.946-.952-3.325-.952C2.714 16.15.5 18.695.5 20.793.5 21.559.883 22 1.917 22zm26.166 0c1.034 0 1.417-.441 1.417-1.207 0-2.098-2.214-4.644-5.64-4.644-1.378 0-2.474.403-3.317.952 1.732 1.378 2.62 3.715 1.8 4.899h5.74zm-17.852-.008h9.554c1.264 0 1.7-.387 1.7-1.099 0-1.989-2.505-4.728-6.473-4.728-3.977 0-6.475 2.74-6.475 4.728 0 .712.437 1.1 1.693 1.1z"})})},591256:(e,t,s)=>{s.d(t,{K:()=>S});s(296540);var i=()=>s(484714),n=()=>s(56366),o=()=>s(427704),a=()=>s(564766),r=()=>s(959013),l=()=>s(780054),d=()=>s(329304),c=()=>s(884107),u=()=>s(719147),p=()=>s(859428),m=s(474848);function g(e){let{tooltip:t,text:s}=e;const n=(0,i().v3)();return(0,m.jsx)(p().A,{delayThreshold:0,renderTooltip:()=>t,render:e=>(0,m.jsx)(u().A,{onClick:async()=>{const e=await c().R.clipboardActions.load();e.copyString({environment:n,stringValue:s,copiedMessage:e.clipboardMessages.copiedPropertyToClipboard})},...e,children:s})})}var h=()=>s(249117),f=()=>s(125565);function S(e){let{spaceStore:t,showDomain:s}=e;const c=(0,i().v3)(),u=(0,r().tz)(),p=(0,n().K8)((()=>t.id),[t]),S=(0,n().K8)((()=>t.getPublicContentDomain()),[t]),y=(0,d().P9)({name:"saml",spaceId:t.id,userId:c.currentUser.id}),b=(0,d().P9)({name:"scim",spaceId:t.id,userId:c.currentUser.id});return(0,m.jsxs)(h().xA,{gap:8,children:[(0,m.jsx)(h().LX,{row:1,col:1,children:(0,m.jsx)(f().A,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(r().sA,{id:"securitySAMLSettings.SetupInformationSection.workspaceId",defaultMessage:"Workspace ID"})})}),(0,m.jsx)(h().LX,{row:1,col:2,children:(0,m.jsx)(f().A,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(g,{text:p,tooltip:u.formatMessage({id:"securitySAMLSettings.SetupInformationSection.workspaceId.copyTooltip",defaultMessage:"Click to copy ID"})})})}),y?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(h().LX,{row:2,col:1,children:(0,m.jsx)(f().A,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(r().sA,{id:"securitySAMLSettings.SetupInformationSection.samlSSOEntityIDLink",defaultMessage:"SAML SSO/SAML Entity ID"})})}),(0,m.jsx)(h().LX,{row:2,col:2,children:(0,m.jsx)(f().A,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(g,{text:(0,a().Hw)(l().A.domainBaseUrl),tooltip:u.formatMessage({id:"securitySAMLSettings.SetupInformationSection.samlSSOEntityID.copyTooltip",defaultMessage:"Click to copy link"})})})})]}):null,b?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(h().LX,{row:3,col:1,children:(0,m.jsx)(f().A,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(r().sA,{id:"securitySAMLSettings.SetupInformationSection.scimBaseUrl",defaultMessage:"SCIM base URL"})})}),(0,m.jsx)(h().LX,{row:3,col:2,children:(0,m.jsx)(f().A,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(g,{text:l().A.domainBaseUrl+o().JZ.scimApiBasePath,tooltip:u.formatMessage({id:"securitySAMLSettings.SetupInformationSection.scimBaseUrl.copyTooltip",defaultMessage:"Click to copy link"})})})})]}):null,s&&void 0!==S?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(h().LX,{row:y?4:2,col:1,children:(0,m.jsx)(f().A,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(r().sA,{id:"securitySAMLSettings.SetupInformationSection.workspaceDomain",defaultMessage:"Workspace Domain"})})}),(0,m.jsx)(h().LX,{row:y?4:2,col:2,children:(0,m.jsx)(f().A,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(g,{text:S,tooltip:u.formatMessage({id:"securitySAMLSettings.SetupInformationSection.workspaceDomain.copyTooltip",defaultMessage:"Click to copy domain"})})})})]}):null]})}},592791:(e,t,s)=>{s.d(t,{V:()=>D});s(581454);var i=s(296540),n=()=>s(484714),o=()=>s(56366),a=()=>s(401497),r=()=>s(584262),l=()=>s(668725),d=()=>s(179034),c=()=>s(959013),u=()=>s(901389),p=()=>s(435009),m=()=>s(205224),g=()=>s(780054),h=()=>s(492414),f=()=>s(722872),S=()=>s(397103),y=()=>s(377586),b=()=>s(463830),x=()=>s(630116),v=()=>s(134217),A=()=>s(749240),w=()=>s(493823),M=()=>s(406699),j=()=>s(928600),k=()=>s(678553),C=()=>s(939740),_=()=>s(64e3),I=()=>s(864943),P=()=>s(958378),T=()=>s(89924),B=()=>s(859428),R=s(474848);function D(e){let{store:t,guestStore:s,isSubscribed:n,guestPageIds:r,hideActionButtons:u,renderOrigin:p}=e;const m=(0,o().uB)(void 0,b().A),h=(0,i.useCallback)((()=>(0,R.jsx)(N,{store:t,guestStore:s,isSubscribed:n,guestPageIds:r,hideActionButtons:u,buttonPopupStore:m})),[t,s,n,r,u,m]),f=g().A.isMobile;(0,o().K8)((()=>r.map((e=>{x().Bv.createChildStore(t,{table:d().ev,id:e}).load()}))),[t,r]);const S=(0,a().IS)((e=>({chevronIcon:{width:10,marginLeft:4,fill:e.icon.tertiary}})),[]);return 0===r.length?(0,R.jsx)(w().p,{disabled:!0,children:(0,R.jsx)(c().sA,{id:"guestPagesPopup.permissionsForUserGuest.label",defaultMessage:"Guest"})}):(0,R.jsx)(M().Ay,{popupType:f?y().n.BottomSheet:y().n.Popup,renderOrigin:e=>p?p(e):(0,R.jsxs)(w().p,{...e,children:[(0,R.jsx)(c().sA,{id:"guestPagesPopup.page",defaultMessage:"{numberOfAccessiblePages, plural, one {{numberOfAccessiblePages} page} other {{numberOfAccessiblePages} pages}}",values:{numberOfAccessiblePages:r.length}}),(0,l().b)(S.chevronIcon)]}),buttonPopupStore:m,render:h})}function N(e){let{store:t,guestStore:s,isSubscribed:a,guestPageIds:l,hideActionButtons:y,buttonPopupStore:b}=e;const w=(0,n().v3)(),M=(0,i.useCallback)((()=>function(e,t,s,i){u().ui({showCancel:!0,keepFocus:!1,message:(0,R.jsx)(c().sA,{id:"guestPagesPopup.removeGuestModal.confirmationMessage",defaultMessage:"Are you sure you want to remove this person? They will lose access to all shared pages."}),items:[{label:(0,R.jsx)(c().sA,{id:"guestPagesPopup.removeGuestModal.removeButton.label",defaultMessage:"Remove"}),color:"red",onAccept:async()=>{i.setState({...i.state,open:!1}),await m().D({environment:e,guestUserStore:s,store:t})}}]})}(w,t,s,b)),[w,t,s,b]),D=(0,i.useCallback)((()=>async function(e,t,s,i,n){const o=i?"read_and_write":"editor";n.setState({...n.state,open:!1}),await m().P({environment:e,guestUserStore:s,role:o,store:t,isConvertToAdmin:!i,origin:"guest_pages_popup"})}(w,t,s,a,b)),[w,t,s,a,b]),N=g().A.isMobile,L=(0,o().K8)((()=>t.canEditMembership()),[t]),O=l.map((e=>{const s=x().Bv.createChildStore(t,{table:d().ev,id:e}),i={key:e,render:e=>(0,R.jsx)(P().A,{...e,store:s,placeholder:(0,R.jsx)(c().sA,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})}),action:()=>{const s=x().Bv.createChildStore(t,{table:d().ev,id:e}),i=(0,h().Ay)({store:s,fullyQualified:!1,pageVisitSource:r().y8.LinkInPage});p().oo({environment:w,url:i,openInNew:"tab"})}};return i}));let F;F=N?{menuType:f().gu.ActionSheet}:{menuType:f().gu.Popup,width:300};const U=(0,S().h)(),E=(0,o().K8)((()=>function(){const e=A().subscriptionDataStoreInstance.state;return Boolean(e&&(0,v().Fq)(e))}()),[]);let G;U&&(G=(0,R.jsx)(B().A,{renderTooltip:()=>E?(0,R.jsx)(c().sA,{id:"guestPagesPopup.addMemberPermissionButton.tooltip",defaultMessage:"This guest will become a member of this workspace."}):(0,R.jsx)(c().sA,{id:"guestPagesPopup.addAdminPermissionButton.tooltip",defaultMessage:"This guest will become an admin of this workspace."}),render:e=>(0,R.jsx)(I().A,{size:"lg",onClick:D,...e,children:E?(0,R.jsx)(c().sA,{id:"guestPagesPopup.addMemberPermissionButton.label",defaultMessage:"Convert to member"}):(0,R.jsx)(c().sA,{id:"guestPagesPopup.addAdminPermissionButton.label",defaultMessage:"Convert to admin"})})}));const V=!y&&L;return(0,R.jsxs)(j().A,{...F,children:[V?(0,R.jsx)(k().Ay,{title:(0,R.jsxs)("div",{style:{paddingTop:12,paddingBottom:8,display:"flex",alignItems:"flex-start"},children:[G,(0,R.jsx)(B().A,{renderTooltip:()=>(0,R.jsx)(c().sA,{id:"guestPagesPopup.removeGuestButton.tooltip",defaultMessage:"This guest will be removed from all pages in this Workspace."}),render:e=>(0,R.jsx)(I().A,{size:"lg",color:"uiRed",style:{marginLeft:G?8:0},onClick:M,...e,children:(0,R.jsx)(c().sA,{id:"guestPagesPopup.removeGuestButton.label",defaultMessage:"Remove"})})})]})}):void 0,V?(0,R.jsx)(_().A,{title:1===O.length?(0,R.jsx)(c().sA,{id:"guestPagesPopup.guestHasAccessToSinglePageCaption",defaultMessage:"This guest can access this page:"}):(0,R.jsx)(c().sA,{id:"guestPagesPopup.guestHasAccessToMultiplePagesCaption",defaultMessage:"This guest can access these pages:"})}):void 0,(0,R.jsx)(C().Ay,{type:C().Oh.Vertical,initialFocus:0,sections:[{key:"pages",render:e=>(0,R.jsx)(T().A,{...e}),items:O}]})]})}},610716:(e,t,s)=>{s.d(t,{S:()=>F,h:()=>N});var i=s(296540),n=()=>s(484714),o=()=>s(56366),a=()=>s(401497),r=()=>s(110750),l=()=>s(381138),d=()=>s(427704),c=()=>s(959013),u=()=>s(435009),p=()=>s(2220),m=()=>s(802790),g=()=>s(285790),h=()=>s(419357),f=()=>s(928600),S=()=>s(480095),y=()=>s(864943),b=()=>s(89924),x=()=>s(702723),v=()=>s(722872),A=()=>s(963589),w=()=>s(575301),M=()=>s(722038),j=()=>s(454529),k=()=>s(651761),C=()=>s(405425),_=()=>s(931404),I=()=>s(934679),P=()=>s(682817),T=()=>s(413107),B=()=>s(966480),R=()=>s(526292),D=s(474848);function N(){const e=(0,n().v3)(),t=(0,c().tz)(),s=(0,M().y)(),a=(0,i.useCallback)((e=>{u().aX(e)}),[]),l=(0,o().K8)((()=>(0,r().Xz)(e.TabbedRouterStore.state)),[e]),d=(0,o().K8)((()=>{var e,t;return Boolean("web"===l.type&&("nativeTab"===l.route.name&&"offline"===l.route.tab||"nativeTab"===(null===(e=l.redirectedTo)||void 0===e?void 0:e.route.name)&&"offline"===(null===(t=l.redirectedTo)||void 0===t?void 0:t.route.tab)))}),[l]);return(0,i.useLayoutEffect)((()=>{if(d){var t;null===(t=e.mobileNative)||void 0===t||t.markTransitionReady({environment:e,type:"offline_settings"});const s=e.RouterStore.state.route,i="nativeTab"===s.name&&"offline"===s.tab?s.from:void 0;(0,p().u)({environment:e,event:{eventName:"mobile_settings_navigation",eventProperties:{target:"offline_settings",from:i}}})}}),[e,d]),s?(0,D.jsx)(f().A,{menuType:v().gu.Modal,title:t.formatMessage(j().y.offlineSettingsTitle),left:(0,D.jsx)(S().MobileModalBackButton,{}),onClickLeft:()=>a(e),onCancel:()=>a(e),enableMobileRefresh:!0,disableScroller:!0,children:(0,D.jsx)(O,{})}):null}function L(e){const{searchQuery:t,setSearchQuery:s,setSearchOpen:i,disabled:n}=e,o=(0,c().tz)(),r=(0,a().IS)((e=>({searchIcon:{width:14,height:14,fill:e.icon.secondary}})),[]);return(0,D.jsx)(h().Ay,{disabled:n,placeholder:o.formatMessage(j().y.offlinePagesSectionSearchPlaceholder),inputLeft:(0,l().q)(r.searchIcon),value:t,forceShowClearButton:!0,focusInitial:!0,onChange:e=>s(e.target.value),onClearButtonClick:()=>{t.length>0?s(""):i(!1)}})}function O(){const e=(0,c().tz)(),[t,s]=(0,i.useState)(!1),[n,o]=(0,i.useState)(""),[r,d]=(0,i.useState)("all"),u=(0,C().Q)({searchQuery:n,filterCategory:r}),p=(0,k().s)(u,{column:B().B,sortAscending:!1}),h=0===p.length,f=(0,w().o_)(),S=(0,A().X)("offline_clear_cache"),y=(0,a().IS)((e=>({container:{display:"flex",flexDirection:"column",height:"100%",paddingBottom:f},tableContainer:{flex:1,overflowY:"scroll"},tableContainerInner:{background:h?void 0:e.contentBackground,paddingLeft:8,paddingRight:8,paddingTop:0},searchFilterContainer:{paddingLeft:16,paddingRight:16,marginTop:16,display:"flex",alignItems:"center",justifyContent:"space-between",height:45},searchButton:{height:40,width:40},searchButtonIcon:{width:20,height:20,fill:e.icon.secondary}})),[h,f]);return(0,D.jsxs)("div",{style:y.container,children:[(0,D.jsxs)("div",{style:{flex:0},children:[(0,D.jsx)(m().A,{size:16,isHidden:!0}),S?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(b().A,{mobileStyle:{borderRadius:0},children:(0,D.jsx)(T().L,{})}),(0,D.jsx)(m().A,{size:40,style:{paddingLeft:16,paddingRight:16,paddingTop:12}})]}):null,(0,D.jsx)(b().A,{mobileStyle:{borderRadius:0},children:(0,D.jsx)(_().N,{})}),(0,D.jsx)(m().A,{size:40,style:{paddingLeft:16,paddingRight:16,paddingTop:12}}),(0,D.jsx)(b().A,{mobileStyle:{borderRadius:0,paddingTop:0},children:(0,D.jsx)(P().f3,{})}),!t&&(0,D.jsxs)("div",{style:y.searchFilterContainer,children:[(0,D.jsx)(I().m,{filterCategory:r,setFilterCategory:d}),(0,D.jsx)(g().A,{icon:l().q,iconStyle:y.searchButtonIcon,style:y.searchButton,disabled:!1,onClick:()=>s(!t),ariaLabel:e.formatMessage(j().y.offlinePagesSectionSearchIconLabel)})]}),t&&(0,D.jsx)(b().A,{children:(0,D.jsx)(L,{searchQuery:n,setSearchQuery:o,setSearchOpen:s,disabled:!1})})]}),(0,D.jsx)("div",{style:y.tableContainer,children:(0,D.jsx)(b().A,{mobileStyle:y.tableContainerInner,children:(0,D.jsx)(P().oL,{hideHeaderRow:!0,columnRenderInfo:[R().T,B().j],rows:p,sortState:void 0,onSortStateChanged:void 0,searchQuery:n})})})]})}function F(e){const t=(0,n().v3)(),s=(0,c().tz)(),o=(0,i.useCallback)((()=>{u().oo({environment:t,url:`${d().GJ.nativeTab}/offline?from=settings`})}),[t]);return(0,D.jsx)(x().A,{type:"custom",isMobile:!0,title:s.formatMessage(j().y.offlineSettingsTitle),disableSettingsItemClick:!0,caption:(0,D.jsx)(c().sA,{id:"mobileSettings.offline.description",defaultMessage:"Manage your workspace storage and offline pages."}),shouldHighlight:!1,customButton:(0,D.jsx)(y().A,{size:"lg",style:{marginTop:12,marginBottom:4},onClick:o,children:(0,D.jsx)(c().sA,{id:"mobileSettings.offline.cta",defaultMessage:"Manage"})})})}},611308:(e,t,s)=>{s.d(t,{A:()=>n});class i extends(()=>s(757695))().Store{getInitialState(){return{modalInfoById:{}}}async showModal(e){const t=s(206267).JW();return new Promise((s=>{const i=e((e=>{s(e),this.internalCloseModal(t,(()=>{this.internalRemoveModal(t)}))}));this.update((e=>({modalInfoById:{...e.modalInfoById,[t]:{...i,isOpen:!0}}})))}))}internalRemoveModal(e){this.update((t=>{const s={...t.modalInfoById};return delete s[e],{modalInfoById:s}}))}internalCloseModal(e,t){this.update((s=>({modalInfoById:{...s.modalInfoById,[e]:{...s.modalInfoById[e],isOpen:!1,onClosed:t}}})))}}const n=new i},637573:(e,t,s)=>{s.d(t,{r:()=>r});var i=()=>s(484714),n=()=>s(56366),o=()=>s(640653),a=()=>s(765957);function r(){const e=(0,i().v3)();return(0,n().K8)((()=>{const{currentSpaceStore:t}=a().default.state;if(t)return(0,o().fD)({environment:e,spaceId:t.id})}),[e])}},640479:(e,t,s)=>{s.d(t,{r:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("setPassword",{viewBox:"0 0 31 21",svg:(0,i.jsx)("path",{d:"M29.4746 3.43945L30.1777 2.7168C30.5684 2.32617 30.5781 1.7793 30.1973 1.39844L29.9336 1.14453C29.6016 0.802734 29.0352 0.851562 28.6641 1.22266L27.9609 1.91602L29.4746 3.43945ZM18.2441 13.4883L20.3047 12.5996L28.7227 4.18164L27.209 2.6875L18.8008 11.0957L17.8633 13.0977C17.7656 13.3223 18.0195 13.5859 18.2441 13.4883ZM3.40039 20.0508H23.6543C25.5 20.0508 26.5254 19.0547 26.5254 17.2188V8.88867L24.5918 10.8223V17.0625C24.5918 17.8242 24.1621 18.2637 23.3906 18.2637H3.6543C2.88281 18.2637 2.45312 17.8242 2.45312 17.0625V8.91797C2.45312 8.14648 2.88281 7.7168 3.6543 7.7168H19.6504L21.4375 5.93945H3.40039C1.54492 5.93945 0.519531 6.92578 0.519531 8.77148V17.2188C0.519531 19.0547 1.54492 20.0508 3.40039 20.0508ZM6.06641 14.4453C6.85742 14.4453 7.51172 13.791 7.51172 12.9902C7.51172 12.1895 6.85742 11.5449 6.06641 11.5449C5.25586 11.5449 4.61133 12.1895 4.61133 12.9902C4.61133 13.791 5.25586 14.4453 6.06641 14.4453ZM10.373 14.4453C11.1738 14.4453 11.8184 13.791 11.8184 12.9902C11.8184 12.1895 11.1738 11.5449 10.373 11.5449C9.57227 11.5449 8.91797 12.1895 8.91797 12.9902C8.91797 13.791 9.57227 14.4453 10.373 14.4453ZM14.6797 14.4453C15.4805 14.4453 16.1348 13.791 16.1348 12.9902C16.1348 12.1895 15.4805 11.5449 14.6797 11.5449C13.8789 11.5449 13.2344 12.1895 13.2344 12.9902C13.2344 13.791 13.8789 14.4453 14.6797 14.4453Z"})})},644484:(e,t,s)=>{s.d(t,{g:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("addPerson",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M9.48242 7.91211C10.8076 7.91211 11.8352 6.77783 11.8352 5.35718C11.8352 4.00391 10.7908 2.84717 9.48242 2.84717C8.17407 2.84717 7.12964 4.00952 7.13525 5.36279C7.14087 6.77783 8.16284 7.91211 9.48242 7.91211ZM9.48242 8.87231C8.7356 8.87231 8.04492 8.99585 7.44409 9.22046C8.23022 9.95044 8.72437 10.9836 8.72437 12.1235C8.72437 12.511 8.66821 12.8872 8.55591 13.2466H12.8684C13.969 13.2466 14.3171 12.8479 14.3171 12.2302C14.3171 10.804 12.3967 8.87231 9.48242 8.87231ZM4.74316 15.1895C6.42212 15.1895 7.80347 13.7969 7.80347 12.1235C7.80347 10.4558 6.42212 9.06885 4.74316 9.06885C3.06982 9.06885 1.68286 10.4558 1.68286 12.1235C1.68286 13.7969 3.06982 15.1895 4.74316 15.1895ZM4.74316 14.1675C4.41187 14.1675 4.18726 13.9429 4.18726 13.6172V12.6907H3.27197C2.94629 12.6907 2.72168 12.4661 2.71606 12.1292C2.71045 11.7979 2.93506 11.5732 3.27197 11.5732H4.18726V10.6636C4.18726 10.3379 4.41187 10.1133 4.74316 10.1077C5.08008 10.1021 5.30469 10.3267 5.30469 10.6636V11.5732H6.22559C6.55127 11.5732 6.77588 11.7979 6.77588 12.1292C6.77588 12.4661 6.55127 12.6907 6.22559 12.6907H5.30469V13.6172C5.30469 13.9429 5.08008 14.1675 4.74316 14.1675Z"})})},651761:(e,t,s)=>{s.d(t,{s:()=>o});var i=()=>s(496603);const n={failed:1,downloading:2,to_download:3,success:4};function o(e,t){let{sortAscending:s}=t;const o=s?"asc":"desc";return i().My(e,[e=>n[e.downloadStatus??"success"],"lastModifiedTime"],["asc",o])}},653027:(e,t,s)=>{s.d(t,{A:()=>De});var i=s(296540),n=()=>s(484714),o=()=>s(56366),a=()=>s(534177),r=()=>s(775191),l=()=>s(186445),d=()=>s(401497),c=()=>s(373204),u=()=>s(959013),p=()=>s(284371),m=()=>s(508382),g=()=>s(274602),h=s(474848);function f(e){const{errorMessage:t,onStartTOTP:s,onStartSMS:n,onDismiss:o}=e,a=(0,d().IS)(S,[]),r=(0,h.jsx)(u().sA,{id:"mfa.turnOnSettings.title",defaultMessage:"Turn on 2-step verification"}),l=(0,h.jsx)(u().sA,{id:"mfa.turnOnSettings.message",defaultMessage:"Confirm it's you when you use a password with a verification code"}),p=(0,i.useMemo)((()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(m().A,{type:"totp",title:(0,h.jsx)(u().sA,{id:"mfa.turnOnSettings.setupAuthenticator.button.title",defaultMessage:"Code from authenticator"}),caption:(0,h.jsx)(u().sA,{id:"mfa.turnOnSettings.setupAuthenticator.button.message",defaultMessage:"Generate a one-time code in your authenticator app"}),onClick:s,style:a.button}),(0,h.jsx)(m().A,{type:"sms",title:(0,h.jsx)(u().sA,{id:"mfa.turnOnSettings.setupSMS.button.title",defaultMessage:"Text me a code"}),caption:(0,h.jsx)(u().sA,{id:"mfa.turnOnSettings.setupSMS.button.message",defaultMessage:"Add and verify your phone number"}),onClick:n,style:a.button})]})),[a,n,s]);return(0,h.jsx)(g().A,{title:r,header:l,children:p,icon:(0,c().K)(a.icon),errorMessage:t,onDismiss:o})}function S(e){return(0,d().$4)({button:{marginBottom:5},settingsTitle:{color:e.text.secondary,fontWeight:p().Wy.medium,marginBottom:8},icon:{width:30,height:30,fill:e.icon.primary}})}var y=()=>s(735384),b=()=>s(331542);function x(e){const{isLoading:t,mfaSetting:s,errorMessage:i,onDismiss:n,onCancel:o,onDeleteMethod:r}=e,l=(0,d().IS)(v,[]),c={text:t?(0,h.jsx)(b().A,{}):(0,h.jsx)(u().sA,{id:"mfa.deleteSetting.permanentlyDelete.button.message",defaultMessage:"Permanently delete"}),onClick:()=>r(s),isRed:!0},p=[{text:(0,h.jsx)(u().sA,{id:"mfa.deleteSetting.cancel.button.message",defaultMessage:"Cancel"}),onClick:o,type:"button",view:"outline"}];return(0,h.jsx)(g().A,{title:(()=>{const e=s.mfaMethod;switch(e){case"sms":return(0,h.jsx)(u().sA,{id:"mfa.deleteSetting.sms.title",defaultMessage:"Delete {phoneHint}",values:{phoneHint:s.phoneNumber}});case"totp":return(0,h.jsx)(u().sA,{id:"mfa.deleteSetting.totp.title",defaultMessage:"Delete {friendlyName}",values:{friendlyName:s.friendlyName}});default:return(0,a().HB)(e)}})(),header:(()=>{const e=s.mfaMethod;switch(e){case"sms":return(0,h.jsx)(u().sA,{id:"mfa.deleteSetting.sms.header",defaultMessage:"Once deleted, you will no longer receive codes sent to {phoneHint}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{phoneHint:s.phoneNumber,boldtext:e=>(0,h.jsx)("span",{style:l.boldText,children:e})}});case"totp":return(0,h.jsx)(u().sA,{id:"mfa.deleteSetting.totp.header",defaultMessage:"Once deleted, you will no longer be able to use codes generated from {friendlyName}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{friendlyName:s.friendlyName,boldtext:e=>(0,h.jsx)("span",{style:l.boldText,children:e})}});default:return(0,a().HB)(e)}})(),icon:(0,y().I)(l.crossIcon),primaryAction:c,secondaryActions:p,errorMessage:i,onDismiss:n})}function v(e){return(0,d().$4)({crossIcon:{width:30,fill:"red"},boldText:{fontWeight:p().Wy.semibold}})}s(581454);var A=()=>s(920949),w=()=>s(836251);const M=(0,s(340498).wt)("lockedFilledRedOutlinedWhite",{viewBox:"0 0 11 15",svg:(0,h.jsx)("path",{d:"M2.48352 14.5H8.51649C9.08993 14.5 9.61159 14.3415 9.98454 13.9481C10.3531 13.5594 10.5 13.0215 10.5 12.423V7.8578C10.5 7.33161 10.3876 6.85321 10.1075 6.47956C9.90863 6.21422 9.64758 6.03138 9.34616 5.92009V4.70387C9.34616 3.34493 8.90074 2.28402 8.17081 1.56217C7.44518 0.844569 6.47639 0.5 5.49671 0.5C4.51986 0.5 3.55273 0.844872 2.82813 1.5624C2.09925 2.28417 1.65385 3.34494 1.65385 4.70387V5.9209C1.35431 6.03229 1.09426 6.21478 0.895574 6.47875C0.614816 6.85174 0.5 7.32992 0.5 7.8578V12.423C0.5 13.0215 0.646934 13.5594 1.01546 13.9481C1.38841 14.3415 1.91008 14.5 2.48352 14.5ZM3.7022 4.5581C3.7022 3.8322 3.93059 3.32509 4.24526 3.00203C4.56164 2.67723 5.00162 2.50051 5.49671 2.50051C5.99216 2.50051 6.43618 2.67753 6.75611 3.00343C7.07385 3.3271 7.30439 3.83398 7.30439 4.5581V5.78746H3.7022V4.5581Z",fill:"#E12D2D",stroke:"white"})});var j=()=>s(453697);function k(e){const{userStore:t}=e,s=(0,d().IS)(C,[]);return(0,h.jsxs)("div",{style:s.iconContainer,children:[(0,h.jsx)(j().A,{userStore:t,size:36,avatarShouldShowShadow:!0,style:s.userIcon}),(0,h.jsx)("span",{children:M(s.lockIcon)})]})}function C(){return(0,d().$4)({iconContainer:{position:"relative"},userIcon:{position:"relative"},lockIcon:{position:"absolute",width:9,height:20,right:0,left:26,top:21}})}function _(e){const{mfaSettings:t,isSMSLoading:s,chosenMfaSettingId:n,userStore:o,errorMessage:r,onClick:l,onDismiss:c}=e,p=(0,d().IS)(I,[]),f=(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.title",defaultMessage:"To continue, we need to verify your identity"}),S=(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.header",defaultMessage:"Select a method to verify your identity."}),y=[{text:(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.needHelp.button",defaultMessage:"Need help?"}),href:(0,w().xS)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}],b=(0,i.useMemo)((()=>(0,A().WS)(t).map((e=>{const t=e.mfaMethod;switch(t){case"totp":return(0,h.jsx)(m().A,{type:t,title:e.friendlyName,caption:(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useAuthenticator.button.message",defaultMessage:"Use code from authenticator"}),onClick:()=>l(e),style:p.actionButton,isActive:!0,disabled:s});case"sms":return(0,h.jsx)(m().A,{type:t,title:e.phoneNumber,caption:(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useSMS.button.message",defaultMessage:"Text me a code"}),onClick:()=>l(e),style:p.actionButton,isActive:!0,isLoading:s&&n===e.mfaSettingId,disabled:s&&n!==e.mfaSettingId});case"backup_code":return(0,h.jsx)(m().A,{type:t,title:(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.title",defaultMessage:"Use a backup code"}),caption:(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.message",defaultMessage:"Use a one-time backup code"}),onClick:()=>l(e),style:p.actionButton,isActive:!0,disabled:s});default:return(0,a().HB)(t)}}))),[t,l,s,n,p.actionButton]);return(0,h.jsx)(g().A,{title:f,header:S,errorMessage:r,icon:(0,h.jsx)(k,{userStore:o}),secondaryActions:y,onDismiss:c,children:b})}function I(e){return(0,d().$4)({resendLink:{fontWeight:p().Wy.medium,color:e.blueColor},actionButton:{marginBottom:5}})}var P=()=>s(22394);function T(e){const t=(0,d().IS)(B,[]),{errorMessage:s,onDismiss:i}=e,n=(0,h.jsx)(u().sA,{id:"mfa.turnOffMFAComplete.title",defaultMessage:"2-step verification is turned off"}),o=(0,h.jsx)(u().sA,{id:"mfa.turnOffMFAComplete.header",defaultMessage:"2-step verification has been removed from your account. Notion will only ask for your password during log in."}),a=[{text:(0,h.jsx)(u().sA,{id:"mfa.turnOffMFAComplete.button.message",defaultMessage:"Complete"}),onClick:i,type:"button",view:"outline"}];return(0,h.jsx)(g().A,{title:n,header:o,errorMessage:s,icon:(0,P().o)(t.confirmationIcon),secondaryActions:a,onDismiss:i})}function B(e){return(0,d().$4)({confirmationIcon:{width:30,fill:"green"}})}var R=()=>s(213962);function D(e){const{isLoading:t,lastMFASetting:s,errorMessage:i,onDismiss:n,onTurnOffMFA:o,onCancel:a}=e,r=(0,d().IS)(N,[]),l=(0,h.jsx)(u().sA,{id:"mfa.turnOffMFA.title",defaultMessage:"Turn off 2-step verification"}),c={text:t?(0,h.jsx)(b().A,{}):(0,h.jsx)(u().sA,{id:"mfa.turnOffMFA.disableMFA.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:o,isRed:!0},m=[{text:(0,h.jsx)(u().sA,{id:"mfa.turnOffMFA.cancel.button.message",defaultMessage:"Cancel"}),onClick:a,type:"button",view:"outline"}];return(0,h.jsx)(g().A,{title:l,header:s?(0,h.jsx)(u().sA,{id:"mfa.turnOffMFA.lastMFASettingDeleted.header",defaultMessage:"Deleting {mfaSettingName} will turn off 2-step verification and remove the additional layer of security on your account. Notion will only ask for your password during log in.",values:{mfaSettingName:"sms"===s.mfaMethod?`${s.phoneNumber}`:s.friendlyName,boldtext:e=>(0,h.jsx)("span",{style:{fontWeight:p().Wy.semibold},children:e})}}):(0,h.jsx)(u().sA,{id:"mfa.turnOffMFA.header",defaultMessage:"Turning off 2-step verification will remove the additional layer of security on your account. Notion will only ask for your password during log in. "}),icon:(0,R().s)(r.crossIcon),primaryAction:c,secondaryActions:m,errorMessage:i,onDismiss:n})}function N(e){return(0,d().$4)({crossIcon:{width:30,fill:"red"}})}s(898992),s(354520);var L=()=>s(662303),O=()=>s(869190),F=()=>s(802790),U=()=>s(125565),E=()=>s(356756),G=()=>s(30626),V=()=>s(173019),z=()=>s(880156),K=()=>s(704152),q=()=>s(760217),W=()=>s(406699),H=()=>s(623580);function $(e){const{setting:t,setIsEditing:s,isEditing:n,onUpdateMethod:o}=e,a=(0,d().IS)(Y,[]),[r,l]=(0,i.useState)(""),c=t.friendlyName,u=""===r?c:r,p=(0,i.useCallback)((e=>""!==e&&e!==c),[c]),m=(0,i.useCallback)((()=>{p(u)?(o({mfaMethod:t.mfaMethod,mfaSettingId:t.mfaSettingId,action:"rename",friendlyName:u}),l(r)):l(c),s(!n)}),[u,n,s,o,r,c,p,t.mfaMethod,t.mfaSettingId]),g=(0,i.useCallback)((e=>{"Enter"!==e.key&&"Escape"!==e.key||m()}),[m]),f=(0,i.useCallback)((e=>{p(e.target.value)&&l(e.target.value)}),[p]);return n?(0,h.jsx)(H().A,{value:u,maxlength:30,onChange:f,onKeyDown:g,onBlur:m,focus:n,style:a.inputField,inputStyle:a.input}):(0,h.jsx)(U().A,{children:u})}function Y(){return(0,d().$4)({inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14,...p().RC}})}var Q=()=>s(722872),X=()=>s(928600),J=()=>s(939740),Z=()=>s(89924);function ee(e){const{activeMenuActions:t}=e;return(0,h.jsx)(X().A,{menuType:Q().gu.Popup,children:(0,h.jsx)(J().Ay,{type:J().Oh.Vertical,sections:[{key:"mfaMethodActions",render:e=>(0,h.jsx)(Z().A,{...e}),items:t}],initialFocus:void 0})})}function te(e){const{type:t,title:s,caption:n,setting:o,onDeleteMethod:r,onUpdateMethod:l}=e,c=(0,d().IS)(se,[]),p={totp:(0,E().s)(c.icon),sms:(0,z().A)(c.icon)},[m,g]=(0,i.useState)(!1),f=e=>({key:"deleteMFAMethod",render:e=>(0,h.jsx)(q().A,{...e,title:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.activeSection.editMenu.delete.button.message",defaultMessage:"Delete"}),icon:(0,y().I)(c.menuItemIcon)}),action:()=>{r(o),e.close()}}),S=e=>({key:"editMFAMethod",render:e=>(0,h.jsx)(q().A,{...e,title:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.activeSection.editMenu.editTitle.button.message",defaultMessage:"Edit title"}),icon:(0,V().r)(c.menuItemIcon)}),action:()=>{g(!0),e.close()}});return(0,h.jsxs)("div",{style:c.activeMethodContainer,children:[(0,h.jsxs)("div",{style:c.activeMethodLeftContainer,children:[(0,h.jsx)("div",{style:c.icon,children:p[t]}),(0,h.jsxs)("div",{style:c.activeMethodText,children:[(()=>{switch(t){case"sms":return(0,h.jsx)(U().A,{children:s});case"totp":return(0,h.jsx)($,{setting:o,setIsEditing:g,isEditing:m,onUpdateMethod:l});default:return(0,a().HB)(t)}})(),(0,h.jsx)("span",{style:c.activeMethodCaption,children:n})]})]}),(0,h.jsx)(W().Ay,{render:e=>{switch(t){case"sms":return(0,h.jsx)(ee,{activeMenuActions:[f(e)]});case"totp":return(0,h.jsx)(ee,{activeMenuActions:[S(e),f(e)]});default:(0,a().HB)(t)}},alignmentToOrigin:W().yP.Start,renderOrigin:e=>(0,h.jsx)(K().A,{style:c.menuButton,disabled:m,...e,children:(0,G()._)(c.menuIcon)}),popupType:W().z7.Popup})]})}function se(e){return(0,d().$4)({activeMethodContainer:{display:"flex",justifyContent:"space-between",border:`1px solid ${e.outlineButtonBorder}`,width:"100%",padding:"10px 14px 10px 16px",alignItems:"start",height:"auto",borderRadius:4,marginBottom:5},activeMethodLeftContainer:{display:"flex",justifyContent:"left",minWidth:0},activeMethodText:{display:"flex",flexDirection:"column",minWidth:0},activeMethodCaption:{fontSize:p().J.UISmall.desktop,lineHeight:p().K_.UISmall.desktop,color:e.text.secondary,whiteSpace:"normal"},icon:{width:20,height:20,marginRight:10,fill:e.blueColor},menuIcon:{fill:e.icon.tertiary,width:15,height:15},menuButton:{borderRadius:4,padding:3},menuItemIcon:{width:17,height:17},inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14}})}function ie(e){const{mfaSettings:t,errorMessage:s,onStartTOTP:n,onStartSMS:o,onTurnOffMFA:r,onStartBackupCodes:l,onDismiss:p,onDeleteMethod:f,onUpdateMethod:S}=e,y=(0,d().IS)(ne,[]),b=(0,h.jsx)(u().sA,{id:"mfa.updateSettings.title",defaultMessage:"2-step verification"}),x=(0,h.jsx)(u().sA,{id:"mfa.settingModal.message",defaultMessage:"Confirm it's you after using a password by providing a verification code."}),v=(0,i.useMemo)((()=>(0,A().WS)(t).map((e=>{const{mfaMethod:t}=e,s=(0,O().v9)(e.createdAt,L().locale);switch(t){case"totp":return(0,h.jsx)(te,{type:t,title:e.friendlyName,caption:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.activeSection.useAuthenticator.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:f,onUpdateMethod:S});case"sms":return(0,h.jsx)(te,{type:t,title:`${e.phoneNumber}`,caption:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.activeSection.useSMS.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:f,onUpdateMethod:S});case"backup_code":return;default:(0,a().HB)(t)}}))),[t,f,S]),w=t.filter((e=>"totp"===e.mfaMethod)).length,M=t.filter((e=>"sms"===e.mfaMethod)).length,j=(0,i.useMemo)((()=>[{type:"totp",title:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.title",defaultMessage:"Add authenticator"}),caption:w>=2?(0,h.jsx)(u().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.disabled.button.message",defaultMessage:"2 of 2 authenticators added"}):(0,h.jsx)(u().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.message",defaultMessage:"{numOfTotpSettings} of 2 authenticators added",values:{numOfTotpSettings:w}}),onClick:n,style:y.button,disabled:w>=2},{type:"sms",title:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.title",defaultMessage:"Add phone number"}),caption:M>=2?(0,h.jsx)(u().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.disabled.button.message",defaultMessage:"2 of 2 phones added"}):(0,h.jsx)(u().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.message",defaultMessage:"{numOfSmsSettings} of 2 phones added",values:{numOfSmsSettings:M}}),onClick:o,style:y.button,disabled:M>=2},{type:"backup_code",title:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.title",defaultMessage:"Regenerate backup codes"}),caption:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.message",defaultMessage:"Use for account recovery when other methods don't work"}),onClick:l,style:y.button,disabled:!1}].sort(((e,t)=>(e.disabled?1:0)-(t.disabled?1:0)))),[n,o,l,w,M,y]),k=(0,i.useMemo)((()=>j.map(((e,t)=>(0,i.createElement)(m().A,{...e,key:t})))),[j]),C=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(U().A,{style:y.settingsTitle,isSmall:!0,children:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.activeSection.title",defaultMessage:"Active"})}),v,(0,h.jsx)(F().A,{size:15,isHidden:!0}),(0,h.jsx)(U().A,{style:y.settingsTitle,isSmall:!0,children:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.addMoreMethodsSection.title",defaultMessage:"Add more methods"})}),k]}),_=[{text:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.turnOffVerification.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:r,type:"button",view:"plain",isRed:!0}];return(0,h.jsx)(g().A,{title:b,header:x,errorMessage:s,icon:(0,c().K)(y.icon),onDismiss:p,secondaryActions:_,children:C})}function ne(e){return(0,d().$4)({button:{marginBottom:5},settingsTitle:{color:e.text.secondary,fontWeight:p().Wy.medium,marginBottom:8},icon:{width:30,height:30,fill:e.icon.secondary}})}var oe=()=>s(219505),ae=()=>s(381349);function re(e){const{isLoading:t,userStore:s,errorMessage:n,onDismiss:o,onVerifyBackupCode:a,onTryAnotherMethod:r}=e,l=(0,d().IS)(le,[]),[c,p]=(0,i.useState)(""),m=(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.title",defaultMessage:"To continue, we need to verify your identity"}),f=(0,h.jsx)(u().sA,{id:"profileSeettings.mfa.verifyIdentity.withBackupCode.header",defaultMessage:"Enter an unused one-time backup code."}),S={text:t?(0,h.jsx)(b().A,{}):(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.button.message",defaultMessage:"Continue"}),onClick:()=>a(c.replace(/[^0-9a-zA-Z]/g,"")),disabled:t||""===c},y=[{text:(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>r(),disabled:t}];return(0,h.jsx)(g().A,{title:m,header:f,icon:(0,h.jsx)(k,{userStore:s}),primaryAction:S,secondaryActions:y,errorMessage:n,onDismiss:o,children:(0,h.jsx)(H().A,{type:"text",value:c,onChange:e=>{p((0,oe().H)(e.target.value))},placeholder:"0000-0000",style:l.backupCodeInput,disabled:t,autoFocus:!0})})}function le(e){return(0,d().$4)({backupCodeInput:{width:"100%",background:"light"===e.mode?ae().Ay.transparent:e.inputBackground}})}function de(e){const{isLoading:t,isForgotPasswordLoading:s,userStore:n,errorMessage:a,alertMessage:r,onDismiss:l,onVerifyPassword:c,onForgotPassword:p}=e,m=(0,d().IS)(ce,[]),[f,S]=(0,i.useState)(""),y=(0,o().K8)((()=>null==n?void 0:n.getEmail()),[n]),x=(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withPassword.title",defaultMessage:"To continue, we need to verify your identity"}),v={text:t?(0,h.jsx)(b().A,{}):(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withPassword.button.message",defaultMessage:"Continue"}),onClick:()=>c(f),disabled:t||""===f},A=[{text:(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withPassword.secondaryButton.message",defaultMessage:"Forgot password?"}),view:"plain",type:"button",disabled:s,onClick:()=>p(y)}];return(0,h.jsx)(g().A,{title:x,header:y,icon:(0,h.jsx)(k,{userStore:n}),primaryAction:v,secondaryActions:A,errorMessage:a,alertMessage:r,onDismiss:l,children:(0,h.jsx)(H().A,{type:"password",value:f,onChange:e=>S(e.target.value),placeholder:"Your password",style:m.passwordInput,disabled:t,autoComplete:"current-password",autoFocus:!0})})}function ce(){return(0,d().$4)({passwordInput:{width:"100%"}})}var ue=()=>s(496603),pe=()=>s(217448),me=()=>s(891909);function ge(e){const{mfaSetting:t,isLoading:s,userStore:n,errorMessage:o,resentStatus:a,resentAt:r,onDismiss:l,onVerifySMS:d,onResendLink:c,onTryAnotherMethod:p}=e,[m,f]=(0,i.useState)([]),S=(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withSMS.title",defaultMessage:"To continue, we need to verify your identity"}),y=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u().sA,{id:"profileSeettings.mfa.verifyIdentity.withSMS.header",defaultMessage:"Enter the code sent to {phoneHint}.",values:{phoneHint:`${t.phoneNumber}`}})," ",(0,h.jsx)(pe().n,{resentAt:r,resentStatus:a,onResendLink:c})]}),x={text:s?(0,h.jsx)(b().A,{}):(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withSMS.button.message",defaultMessage:"Continue"}),onClick:()=>d(t.mfaSettingId,m.join("")),disabled:s||"resending"===a||6!==(0,ue().oE)(m).length},v=[{text:(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withSMS.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>p(),disabled:s}];return(0,h.jsx)(g().A,{title:S,header:y,icon:(0,h.jsx)(k,{userStore:n}),primaryAction:x,secondaryActions:v,errorMessage:o,onDismiss:l,children:(0,h.jsx)("div",{children:(0,h.jsx)(me().Ay,{numInputs:6,value:m,format:"settings",disabled:!1,onChange:f,autoFocus:!0,isValidKey:me().Vx})})})}function he(e){const{mfaSetting:t,isLoading:s,userStore:n,errorMessage:o,onDismiss:a,onVerifyTOTP:r,onTryAnotherMethod:l}=e,c=(0,d().IS)(fe,[]),[p,m]=(0,i.useState)([]),f=(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withTOTP.title",defaultMessage:"To continue, we need to verify your identity"}),S=(0,h.jsx)(u().sA,{id:"profileSeettings.mfa.verifyIdentity.withTOTP.header",defaultMessage:"Enter code from authenticator <boldtext>{friendlyName}</boldtext>.",values:{friendlyName:t.friendlyName,boldtext:e=>(0,h.jsx)("span",{style:c.boldText,children:e})}}),y={text:s?(0,h.jsx)(b().A,{}):(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withTOTP.button.message",defaultMessage:"Continue"}),onClick:()=>r({mfaSettingId:t.mfaSettingId,code:p.join("")}),disabled:s||6!==(0,ue().oE)(p).length},x=[{text:(0,h.jsx)(u().sA,{id:"profileSettings.mfa.verifyIdentity.withTOTP.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>l(),disabled:s}];return(0,h.jsx)(g().A,{title:f,header:S,icon:(0,h.jsx)(k,{userStore:n}),primaryAction:y,secondaryActions:x,errorMessage:o,onDismiss:a,children:(0,h.jsx)("div",{children:(0,h.jsx)(me().Ay,{numInputs:6,value:p,format:"settings",disabled:!1,onChange:m,autoFocus:!0,isValidKey:me().Vx})})})}function fe(e){return(0,d().$4)({boldText:{fontWeight:p().Wy.semibold}})}s(672577);function Se(e){const{passkeys:t,passkeyAuthenticatorIdToDelete:s,onDismiss:i,onCancel:n,onDeleteMethod:o}=e,a=(0,d().IS)(ye,[]),r=t.find((e=>e.id===s));if(!r)return null;const l=(0,h.jsx)(u().sA,{id:"passkey.deleteSetting.title",defaultMessage:"Delete {passkeyName}",values:{passkeyName:r.authenticatorName}}),c=(0,h.jsx)(u().sA,{id:"passkey.deleteSetting.header",defaultMessage:"Once deleted, you will no longer be able to use the passkey saved in {friendlyName}.{newline}<boldtext>Are you sure you want to delete this?</boldtext>",values:{friendlyName:r.authenticatorName,boldtext:e=>(0,h.jsx)("span",{style:a.boldText,children:e}),newline:(0,h.jsx)("br",{})}}),p={text:(0,h.jsx)(u().sA,{id:"mfa.deleteSetting.permanentlyDelete.button.message",defaultMessage:"Permanently delete"}),onClick:()=>o(),isRed:!0},m=[{text:(0,h.jsx)(u().sA,{id:"mfa.deleteSetting.cancel.button.message",defaultMessage:"Cancel"}),onClick:n,type:"button",view:"outline"}];return(0,h.jsx)(g().A,{title:l,header:c,icon:(0,y().I)(a.crossIcon),primaryAction:p,secondaryActions:m,onDismiss:i})}function ye(e){return(0,d().$4)({crossIcon:{width:30,fill:"red"},boldText:{fontWeight:p().Wy.semibold}})}s(803949);var be=()=>s(62926),xe=()=>s(689094),ve=()=>s(554509),Ae=()=>s(864943),we=()=>s(984925),Me=()=>s(876926),je=()=>s(661033),ke=()=>s(293901);function Ce(e){const{setting:t,setIsEditing:s,isEditing:n,onUpdateMethod:o}=e,a=(0,d().IS)(_e,[]),[r,l]=(0,i.useState)(""),c=t.authenticatorName,u=""===r?c:r,p=(0,i.useCallback)((e=>""!==e&&e!==c),[c]),m=()=>{p(u)?(o({passkeyAuthenticatorId:t.id,name:u}),l(u)):l(c),s(!n)},g=(0,i.useCallback)((e=>{p(e.target.value)&&l(e.target.value)}),[p]);return n?(0,h.jsx)(H().A,{value:u,maxlength:30,onChange:g,onKeyDown:e=>{"Enter"!==e.key&&"Escape"!==e.key||m()},onBlur:m,focus:n,style:a.inputField,inputStyle:a.input}):(0,h.jsx)(U().A,{children:u})}function _e(){return(0,d().$4)({inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14,...p().RC}})}const Ie={"fbfc3007-154e-4ecc-8c0b-6e020557d7bd":Me().m,"dd4ec289-e01d-41c9-bb89-70fa845d4bf2":Me().m,"ea9b8d66-4d01-1d21-3ce4-b6b48cb575d4":ke().googleIcon,"adce0002-35bc-c60a-648b-0b25f1f05503":ke().googleIcon,"08987058-cadc-4b81-b6e1-30de50dcbe96":je().P,"9ddd1817-af5a-4672-a2b9-3e3dd95000a9":je().P,"6028b017-b1d4-4c02-b4b3-afcdafc96bb2":je().P};function Pe(e){const{caption:t,setting:s,onDeleteMethod:n,onUpdateMethod:o,isEditing:a}=e,r=(0,d().IS)(Te,[]),[l,c]=(0,i.useState)(a),p=Ie[s.aaguid]||be().a,m=e=>({key:"deletePasskeyMethod",render:e=>(0,h.jsx)(q().A,{...e,title:(0,h.jsx)(u().sA,{id:"mfa.updatePasskeySettings.activeSection.editMenu.delete.button.message",defaultMessage:"Delete"}),icon:(0,y().I)(r.menuItemIcon)}),action:()=>{n({passkeyAuthenticatorId:s.id}),e.close()}}),g=e=>({key:"editPasskeyMethod",render:e=>(0,h.jsx)(q().A,{...e,title:(0,h.jsx)(u().sA,{id:"mfa.updatePasskeySettings.activeSection.editMenu.editTitle.button.message",defaultMessage:"Rename passkey"}),icon:(0,V().r)(r.menuItemIcon)}),action:()=>{c(!0),e.close()}});return(0,h.jsxs)("div",{style:r.activeMethodContainer,children:[(0,h.jsxs)("div",{style:r.activeMethodLeftContainer,children:[(0,h.jsx)("div",{style:r.icon,children:p(r.icon)}),(0,h.jsxs)("div",{style:r.activeMethodText,children:[(0,h.jsx)(Ce,{setting:s,setIsEditing:c,isEditing:l,onUpdateMethod:o}),(0,h.jsx)("span",{style:r.activeMethodCaption,children:t})]})]}),(0,h.jsx)(W().Ay,{render:e=>(0,h.jsx)(ee,{activeMenuActions:[g(e),m(e)]}),alignmentToOrigin:W().yP.End,renderOrigin:e=>(0,h.jsx)(K().A,{style:r.menuButton,disabled:l,...e,children:(0,G()._)(r.menuIcon)}),popupType:W().z7.Popup})]})}function Te(e){return(0,d().$4)({activeMethodContainer:{display:"flex",justifyContent:"space-between",border:`1px solid ${e.outlineButtonBorder}`,width:"100%",padding:"10px 14px 10px 16px",alignItems:"center",height:"auto",borderRadius:4,marginBottom:5},activeMethodLeftContainer:{display:"flex",justifyContent:"left",minWidth:0,alignItems:"center"},activeMethodText:{display:"flex",flexDirection:"column",minWidth:0},activeMethodCaption:{fontSize:p().J.UISmall.desktop,lineHeight:p().K_.UISmall.desktop,color:e.text.secondary,whiteSpace:"normal"},icon:{width:24,height:24,marginRight:10,fill:e.blueColor},menuIcon:{fill:e.icon.tertiary,width:15,height:15},menuButton:{borderRadius:4,padding:3},menuItemIcon:{width:17,height:17}})}function Be(e){const{passkeySettings:t,errorMessage:s,onDismiss:i,onAddMethod:n,onDeleteMethod:o,onUpdateMethod:a,shouldNameNewSetting:r}=e,l=(0,d().IS)(Re,[]);let p;null==t||t.forEach((e=>{var t;(!p||e.createdAt>(null===(t=p)||void 0===t?void 0:t.createdAt))&&(p=e)}));const m=0===t.length?be().a:xe().W;return(0,h.jsxs)(g().A,{title:"Manage Passkeys",header:"Use your device's built-in security features like Face ID to sign in instead of remembering passwords.",errorMessage:s,icon:(0,c().K)(l.icon),onDismiss:i,children:[t.length>0&&(0,h.jsxs)("div",{style:l.activePasskeyContainer,children:[(0,h.jsx)("div",{style:{marginBottom:"10px"},children:(0,h.jsx)(ve().D,{styleName:"UISmall-12px/Medium",color:"textSecondary",children:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.activeSection.passkeyTitle",defaultMessage:"Active passkey"})})}),t.map(((e,t)=>{var s;const i=(0,O().v9)(e.createdAt,L().locale);return(0,h.jsx)(Pe,{caption:(0,h.jsx)(u().sA,{id:"mfa.updateSettings.activeSection.useAuthenticator.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:i}}),setting:e,onDeleteMethod:o,onUpdateMethod:a,isEditing:r&&e.id===(null===(s=p)||void 0===s?void 0:s.id)},e.id)}))]}),(0,h.jsxs)("div",{style:l.actionButtonContainer,children:[t.length<5&&(0,h.jsx)(we().e,{title:"Add new passkey",onClick:n,icon:m}),(0,h.jsx)(Ae().A,{onClick:i,style:l.cancelButton,children:(0,h.jsx)(ve().D,{styleName:"UIRegular-14px/Medium",color:"textLight",children:(0,h.jsx)(u().sA,{id:"passkey.updateSettings.cancel",defaultMessage:"Cancel"})})})]})]})}function Re(e){return(0,d().$4)({icon:{width:30,height:30,fill:e.icon.secondary},cancelButton:{marginTop:10,width:"100%",padding:10,textAlign:"center"},activePasskeyContainer:{marginTop:"24px"},actionButtonContainer:{marginTop:"24px"}})}function De(e){const{settingsStateMachine:t,onDismiss:s,onStartTOTP:i,onStartSMS:d,onStartBackupCodes:c}=e,u=(0,n().v3)(),p=(0,n().Y0)(),m=(0,o().K8)((()=>(0,l()._m)(u)),[u]),g=(0,o().K8)((()=>t.getCurrentStep()),[t]);switch(g.step){case"settingsUninitialized":case"settingsPasskeyLoadSettings":case"settingsLoadSettings":return null;case"settingsVerifyWithPassword":return(0,h.jsx)(de,{isLoading:g.isLoading,isForgotPasswordLoading:g.isForgotPasswordLoading,userStore:m,errorMessage:g.error,alertMessage:g.alert,onVerifyPassword:e=>t.settingsVerifyPassword(e),onForgotPassword:e=>t.settingsForgotPassword(e),onDismiss:s});case"settingsVerifyChooseMFAMethod":return(0,h.jsx)(_,{isSMSLoading:g.isSMSLoading,chosenMfaSettingId:g.chosenMfaSettingId,mfaSettings:g.mfaSettings,userStore:m,errorMessage:g.error,onClick:e=>t.settingsChooseVerifyMethod(e),onDismiss:s});case"settingsVerifyWithTOTP":return(0,h.jsx)(he,{isLoading:g.isLoading,mfaSetting:g.mfaSetting,userStore:m,errorMessage:g.error,onDismiss:s,onVerifyTOTP:e=>t.settingsVerifyTOTP(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithSMS":return(0,h.jsx)(ge,{isLoading:g.isLoading,mfaSetting:g.mfaSetting,userStore:m,errorMessage:g.error,resentAt:g.resentAt,resentStatus:g.resentStatus,onDismiss:s,onVerifySMS:(e,s)=>t.settingsVerifySMS({mfaSettingId:e,code:s}),onResendLink:()=>t.settingsVerifyResendSMS(g.mfaSetting.mfaSettingId),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithBackupCode":return(0,h.jsx)(re,{isLoading:g.isLoading,userStore:m,errorMessage:g.error,onDismiss:s,onVerifyBackupCode:e=>t.settingsVerifyBackupCode(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsInitialSetup":return(0,h.jsx)(f,{errorMessage:g.error,onStartTOTP:i,onStartSMS:d,onDismiss:s});case"settingsShowSettings":const e=g.mfaSettings;return(0,h.jsx)(ie,{mfaSettings:e,errorMessage:g.error,onStartTOTP:i,onStartSMS:d,onStartBackupCodes:c,onTurnOffMFA:()=>t.settingsConfirmDisableMFA(),onDismiss:s,onDeleteMethod:e=>t.settingsConfirmDelete(e),onUpdateMethod:e=>t.settingsUpdate(e)});case"settingsPasskeyShowSettings":case"settingsPasskeyNameNewSetting":return(0,h.jsx)(Be,{passkeySettings:g.passkeys,errorMessage:g.error,onDismiss:s,onAddMethod:()=>p.isElectron?r().Yw(u):t.settingsPasskeyAddSetting(u),onDeleteMethod:e=>t.settingsConfirmDeletePasskeySetting(e),onUpdateMethod:e=>t.settingsPasskeyRenameSetting(e),shouldNameNewSetting:"settingsPasskeyNameNewSetting"===g.step});case"settingsDeletePasskeySetting":return(0,h.jsx)(Se,{passkeys:g.passkeys,passkeyAuthenticatorIdToDelete:g.passkeyAuthenticatorIdToDelete,onDismiss:s,onCancel:()=>t.passkeySettingsShow(),onDeleteMethod:()=>t.settingsDeletePasskeySetting()});case"settingsDeleteSettings":return(0,h.jsx)(x,{isLoading:g.isLoading,mfaSetting:g.mfaSettingToDelete,errorMessage:g.error,onDismiss:s,onCancel:()=>t.settingsConfirmIdentityForSettings(),onDeleteMethod:()=>t.settingsDelete()});case"settingsConfirmIdentity":case"settingsDisableMFA":const n="settingsConfirmIdentity"===g.step&&"disableMFA"===g.source;return"settingsDisableMFA"===g.step||n?(0,h.jsx)(D,{isLoading:n,lastMFASetting:g.lastMFASetting,errorMessage:g.error,onDismiss:s,onTurnOffMFA:()=>t.settingsDisableMFA(),onCancel:()=>t.settingsConfirmIdentityForSettings()}):null;case"settingsIdentityConfirmed":return"disableMFA"===g.source?(0,h.jsx)(T,{errorMessage:g.error,onDismiss:s}):null;default:return(0,a().HB)(g)}}},667734:(e,t,s)=>{s.d(t,{g:()=>a});s(296540);var i=()=>s(959013),n=()=>s(125565),o=s(474848);function a(e){const{isSmall:t,isSecondaryColor:s}=e;return(0,o.jsx)(n().A,{isSmall:t,isSecondaryColor:s,style:{textAlign:"center"},children:(0,o.jsx)(i().sA,{id:"spaceSettings.offlineMessage",defaultMessage:"Please go online to manage settings."})})}},678894:(e,t,s)=>{s.d(t,{A:()=>o});var i=()=>s(604995);class n extends(()=>s(757695))().Store{getInitialState(){return{uploadingProfilePhoto:!1,name:"",startDayOfWeek:(0,i().Lm)(),accountSettings:{hasPassword:!1,canConfigurePassword:!1,isSamlEnforced:!1,mfaStatus:"loading",numMfaSettings:0,regenerateBackupCodes:!1,hasPasskeys:!1,error:void 0}}}getValueForUser(e,t,s){if(e.isDefined()){const n=e.getFullName(s),o=e.getProfilePhoto(),a=t.getSettings();return{...this.state,uploadingProfilePhoto:!1,profilePhoto:o,name:n||"",startDayOfWeek:void 0===(null==a?void 0:a.start_day_of_week)?(0,i().Lm)():null==a?void 0:a.start_day_of_week}}}}const o=n},682817:(e,t,s)=>{s.d(t,{f3:()=>T,v4:()=>_,oL:()=>I});var i=s(296540),n=()=>s(484714),o=()=>s(56366),a=()=>s(401497),r=()=>s(959013),l=()=>s(641300),d=()=>s(125565),c=()=>s(702723),u=()=>s(640653),p=()=>s(756581),m=()=>s(765957),g=()=>s(651761),h=()=>s(405425),f=()=>s(934679),S=()=>s(381138),y=()=>s(145214),b=()=>s(285790),x=()=>s(623580),v=()=>s(454529),A=s(474848);function w(e){const{searchQuery:t,setSearchQuery:s,disabled:n}=e,[o,l]=(0,i.useState)(!1),d=(0,r().tz)(),c=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center"},icon:{width:14,height:14,fill:e.icon.secondary},input:{fontSize:14,lineHeight:"20px",width:"100%",paddingLeft:4}})),[]),u=()=>{s(""),l(!1)};return(0,A.jsxs)("div",{style:c.container,children:[(0,A.jsx)(b().A,{icon:S().q,iconStyle:c.icon,disabled:n,onClick:()=>o?u():l(!0),ariaLabel:d.formatMessage(v().y.offlinePagesSectionSearchIconLabel)}),(0,A.jsx)(y().A,{visible:o,animate:{width:150},initial:{width:0,opacity:0},exit:{width:0,opacity:0},children:(0,A.jsx)(x().A,{style:c.input,format:x().C.Transparent,value:t,onChange:e=>s(e.target.value),placeholder:d.formatMessage(v().y.offlinePagesSectionSearchPlaceholder),focusInitial:o,showClearButton:!0,onClearButtonClick:u,onCancel:u})})]})}var M=()=>s(966480),j=()=>s(923525);const k=500,C=[s(526292).T,M().B,M().j];function _(){const[e,t]=(0,i.useState)(""),[s,n]=(0,i.useState)("all"),[o,l]=(0,i.useState)({column:M().B,sortAscending:!1}),c=(0,h().Q)({searchQuery:e,filterCategory:s}),u=(0,g().s)(c,o),p=(0,a().IS)((e=>({headings:{flexDirection:"column",marginBottom:12},tableActions:{display:"flex",alignItems:"center",marginBottom:12},search:{paddingRight:8,borderRight:`1px solid ${e.tableDividerColor}`},label:{marginLeft:8,marginRight:8}})),[]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:p.headings,children:(0,A.jsx)(T,{})}),(0,A.jsxs)("div",{style:p.tableActions,children:[(0,A.jsx)("div",{style:p.search,children:(0,A.jsx)(w,{searchQuery:e,setSearchQuery:t,disabled:0===u.length&&!Boolean(e)})}),(0,A.jsx)(d().A,{isSecondaryColor:!0,style:p.label,children:(0,A.jsx)(r().sA,{id:"offlineSettingsTab.offlinePagesSection.filterPillPrefix",defaultMessage:"Viewing"})}),(0,A.jsx)(f().m,{filterCategory:s,setFilterCategory:n})]}),(0,A.jsx)(I,{columnRenderInfo:C,rows:u,sortState:o,onSortStateChanged:l,searchQuery:e,maxHeight:k})]})}function I(e){const{columnRenderInfo:t,rows:s,sortState:i,onSortStateChanged:n,searchQuery:o,hideHeaderRow:r,maxHeight:d}=e,c=(0,a().IS)((e=>(0,l().rC)({columnRenderInfo:t,theme:e,containerMarginTop:0})),[t]);return(0,A.jsx)(l().WE,{hideHeaderRow:r,hideHeaderRowPadding:!0,setStickyHeaderRow:!0,allowHorizontalScroll:!0,setStickyHeaderColumn:!1,maxHeight:d,columnRenderInfo:t,rows:s,styles:c,renderNoRowsComponent:()=>(0,A.jsx)(P,{isSearching:Boolean(o)}),sortState:i,onSortStateChanged:n})}function P(e){const{isSearching:t}=e,s=(0,a().IS)((()=>({label:{marginTop:15,marginBottom:40,textAlign:"center"}})),[]);return(0,A.jsx)(d().A,{isSmall:!0,style:s.label,children:t?(0,A.jsx)(r().sA,{id:"offlineSettingsTab.offlinePagesSection.noPagesFound",defaultMessage:"No pages found"}):(0,A.jsx)(r().sA,{id:"offlineSettingsTab.offlinePagesSection.noPagesAvailable",defaultMessage:"No pages available"})})}function T(){const e=(0,n().v3)(),t=(0,p().V)(),s=(0,o().K8)((()=>{const t=m().default.state.currentSpaceStore;if(t)return(0,u().GK)(e,t)}),[e]),i=s?(0,A.jsx)(r().sA,{id:"offlineSettingsTab.offlinePagesSection.subheadingWithSpaceName",defaultMessage:"<bold>{currentSpaceName}</bold> pages available for offline use.",values:{bold:e=>(0,A.jsx)("strong",{children:e}),currentSpaceName:s}}):(0,A.jsx)(r().sA,{id:"offlineSettingsTab.offlinePagesSection.subheading",defaultMessage:"Pages in this workspace that are available for offline use."});let a=null;return"unavailable"===(null==t?void 0:t.type)&&(a=(0,A.jsx)(r().sA,{id:"offlineSettingsTab.offlinePagesSection.subheadingUpsell",defaultMessage:"<cta>Upgrade</cta> for unlimited pages.",values:{cta:s=>(0,A.jsx)(j().E,{environment:e,from:"offline_settings_table",upsell:t.upsell,children:s})}})),(0,A.jsx)(c().A,{type:"custom",isMobile:!0,title:(0,A.jsx)(r().sA,{id:"offlineSettingsTab.offlinePagesSection.title",defaultMessage:"Offline pages"}),disableSettingsItemClick:!0,caption:(0,A.jsxs)(A.Fragment,{children:[i,a?" ":void 0,a]}),shouldHighlight:!1,customButton:null})}},684462:(e,t,s)=>{s.d(t,{j:()=>i});const i=(0,s(340498).xh)("claude",{default:{loader:()=>s.e(3791).then(s.bind(s,802140))},darkMode:{loader:()=>s.e(3791).then(s.bind(s,80696))}})},687681:(e,t,s)=>{s.d(t,{u:()=>i});const i=(0,s(340498).xh)("pencilLine",{default:{loader:()=>s.e(92668).then(s.bind(s,105819))},small:{loader:()=>s.e(92668).then(s.bind(s,523389))},fill:{loader:()=>s.e(92668).then(s.bind(s,71287))},fillSmall:{loader:()=>s.e(92668).then(s.bind(s,396654))}},["compose","edit","write","create"])},704444:(e,t,s)=>{s.d(t,{A:()=>m,y:()=>u});s(296540);var i=()=>s(401497),n=()=>s(75756),o=()=>s(668725),a=()=>s(959013),r=()=>s(529543),l=()=>s(455215),d=()=>s(493823),c=s(474848);function u(e){return(0,r().canSetCookie)(e)&&(0,r().canShowCookieUi)(e)}function p(){const e=(0,i().DP)();return(0,c.jsx)(l().A,{hasDismissButton:!1,renderOrigin:t=>(0,c.jsxs)(d().p,{style:{paddingLeft:8,paddingRight:8,height:32},...t,children:[(0,c.jsx)(a().sA,{id:"cookieSelector.label.customize",defaultMessage:"Customize"}),(0,o().b)({width:10,marginLeft:4,fill:e.icon.tertiary})]})})}const m=function(e){let{isMobile:t}=e;return u((0,s(484714).v3)())?(0,c.jsx)(s(702723).A,{isMobile:t,title:(0,c.jsx)(a().sA,{...n().LS.cookieSettingsLabel}),caption:(0,n().Qq)(s(673998).N6,"settings"),type:"custom",customButton:(0,c.jsx)(p,{})}):null}},716730:(e,t,s)=>{s.d(t,{q:()=>o});var i=()=>s(134696),n=()=>s(701763);function o(e){n().CW(e,{type:"request"}),i().vX(e,{type:"request",from:"settings_modal"})}},725118:(e,t,s)=>{s.d(t,{R:()=>o});var i=()=>s(645873);const n=new(i().O2)("SlackImportsInviteWithModal",(async()=>await s.e(68117).then(s.bind(s,559183)))),o=(0,i()._h)(n,(e=>e.SlackImportsInviteWithModal))},739793:(e,t,s)=>{s.d(t,{A:()=>y});s(898992),s(354520);var i=s(296540),n=()=>s(484714),o=()=>s(56366),a=()=>s(959013),r=()=>s(534177),l=()=>s(878079),d=()=>s(420844),c=()=>s(765957),u=()=>s(704444),p=()=>s(802790),m=()=>s(332381),g=()=>s(8178),h=()=>s(537296),f=()=>s(388450),S=s(474848);const y=(0,s(149397).k)((function(e){let{isMobile:t,isMobileNative:y,passwordRequestStore:b,userEmailDomainSettings:x,billingData:v}=e;const{isElectron:A,isPhone:w}=(0,n().Y0)(),M=(0,n().v3)(),j=(0,o().O$)(s(227440).e),k=(0,o().K8)((()=>{var e,s;const i=(null===(e=c().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getNotifyEmail())||!1,n=Boolean(null===(s=c().default.state.currentSpaceViewStore)||void 0===s||null===(s=s.getSettings())||void 0===s?void 0:s.notify_slack),o=(0,l().fb)(),a=(0,l().Z5)();return function(e){const{isMobile:t,isElectron:s,showNotifyEmailAlwaysSetting:i,slackSettingsAndGates:n}=e,o=function(e){const{isSlackNotificationSettingEnabled:t,showSlackNotificationSetting:s,showNotionActivityNotificationsToSlackSetting:i}=e;return s?i?[{key:"notify_slack",renderSettingsItem:()=>(0,S.jsx)(f().R,{target:"notify_slack"})},t?{key:"notify_slack_all_activity",renderSettingsItem:()=>(0,S.jsx)(f().R,{target:"notify_slack_all_activity"})}:void 0,t?{key:"notify_slack_mention",renderSettingsItem:()=>(0,S.jsx)(f().R,{target:"notify_slack_mention"})}:void 0].filter(r().O9):[{key:"notify_slack",renderSettingsItem:()=>(0,S.jsx)(f().R,{target:"notify_slack"})}]:[]}(n);return[t?{key:"notify_mobile",renderSettingsItem:()=>(0,S.jsx)(m().L,{target:"notify_mobile"})}:void 0,!t&&s?{key:"notify_desktop",renderSettingsItem:()=>(0,S.jsx)(m().L,{target:"notify_desktop"})}:void 0,!t&&s?{key:"disable_ai_meeting_notes_audio_process_detection_notification",renderSettingsItem:()=>(0,S.jsx)(m().L,{target:"disable_ai_meeting_notes_audio_process_detection_notification"})}:void 0,{key:"notify_email",renderSettingsItem:()=>(0,S.jsx)(m().L,{target:"notify_email"})},i?{key:"notify_email_always",renderSettingsItem:()=>(0,S.jsx)(m().L,{target:"notify_email_always"})}:void 0,{key:"notify_email_digest",renderSettingsItem:()=>(0,S.jsx)(m().L,{target:"notify_email_digest"})},{key:"notify_home_digest_email",renderSettingsItem:()=>(0,S.jsx)(m().L,{target:"notify_home_digest_email"})},...o,{key:"marketing_emails",renderSettingsItem:()=>(0,S.jsx)(m().L,{target:"marketing_emails"})}].filter(r().O9)}({isMobile:t,isElectron:A,showNotifyEmailAlwaysSetting:i,slackSettingsAndGates:{isSlackNotificationSettingEnabled:n,showSlackNotificationSetting:o,showNotionActivityNotificationsToSlackSetting:a}})}),[t,A]),C=(0,d().OC)({environment:M}),_=(0,o().K8)((()=>Boolean("on"===s(217429).default.getEligibleGroup({experimentId:"settings_refresh_2025",defaultGroup:"control"}))),[]),I=(0,o().uB)(void 0,s(678894).A);(0,s(852507).l)((()=>{s(804411).Q(M,I)}));const P=(0,o().K8)((()=>I.state.accountSettings),[I]),T=(0,s(722038).y)(),B=(0,o().K8)((()=>t?(0,d().xF)({isPhone:w,isMobileNative:y,showOfflineSettings:T,passwordRequestStore:b,userEmailDomainSettings:x,billingData:v,accountSettings:P}):C),[C,t,w,y,T,b,x,v,P]),R=(0,o().K8)((()=>[(0,u().y)(M)?{key:"cookies",renderSettingsItem:()=>(0,S.jsx)(u().A,{isMobile:t})}:void 0,{key:"view-history",renderSettingsItem:()=>(0,S.jsx)(s(991627).L,{isMobile:t})}].filter(r().O9)),[M,t]),D=(0,o().K8)((()=>M.WindowSizeStore.state.paddingBottomCSS),[M]);return(0,i.useEffect)((()=>{s(725614).clear({environment:M})}),[M]),j?(0,S.jsxs)(s(843878).Ay,{disableScroller:t,children:[(0,S.jsx)(g().A,{large:!t,divider:"full",children:_?(0,S.jsx)(a().sA,{id:"notificationAndPersonalSettings.notificationSection.title.v2",defaultMessage:"Notifications"}):(0,S.jsx)(a().sA,{id:"notificationAndPersonalSettings.notificationSection.title",defaultMessage:"My notifications"})}),(0,S.jsx)(h().U,{items:k}),(0,S.jsx)(p().A,{size:48,isHidden:!0}),(0,S.jsx)(g().A,{large:!t,divider:"full",children:_?(0,S.jsx)(a().sA,{id:"notificationAndPersonalSettings.settingsSection.title.v2",defaultMessage:"Preferences"}):(0,S.jsx)(a().sA,{id:"notificationAndPersonalSettings.settingsSection.title",defaultMessage:"My settings"})}),(0,S.jsx)(h().U,{items:B}),(0,S.jsx)(p().A,{size:48,isHidden:!0}),(0,S.jsx)(g().A,{large:!t,divider:"full",children:(0,S.jsx)(a().sA,{id:"notificationAndPersonalSettings.privacySection.title",defaultMessage:"Privacy"})}),(0,S.jsx)(h().U,{items:R}),(0,S.jsx)(p().A,{size:48,isHidden:!1}),(0,S.jsx)("div",{style:{marginTop:4,marginBottom:t?D:void 0},children:(0,S.jsx)(s(690197).A,{title:(0,S.jsx)(a().sA,{id:"notificationSettings.helpButton.caption",defaultMessage:"Learn about notifications & settings"}),href:(0,s(836251).xS)("guides.notificationSettings"),analyticsFrom:"notifications_settings"})})]}):(0,S.jsx)(s(667734).g,{})}))},763392:(e,t,s)=>{s.d(t,{Vr:()=>x,qb:()=>v,x:()=>b});var i=()=>s(206267),n=()=>s(959013),o=()=>s(966505),a=()=>s(449506),r=()=>s(496414),l=()=>s(579627),d=()=>s(426116),c=()=>s(751156),u=()=>s(755199),p=()=>s(680074),m=()=>s(765957),g=()=>s(404141),h=()=>s(224701),f=()=>s(971407),S=()=>s(128907),y=()=>s(304067);function b(e){const t=m().default.state.currentUserSettingsStore;t&&c().createAndCommit({userAction:"saveContractionSurveySeenDate",environment:e,canUndo:!0,perform:e=>{u().mJ({userSettingsStore:t,transaction:e,data:{seen_contraction_survey_at:(new Date).getTime()}})}})}async function x(e){let{environment:t,user:s,spaceStore:n,userSettingStore:a}=e;let r,l;if(S().R()&&(l=i().JW(),r=await(0,y().G)({environment:t,contractionSurveyId:l}),!r))return;await(async()=>await(0,f().B)(t,s.userId,n.id))()&&(await(async e=>{await v({member:s,newRole:"none",currentUserSettingsStore:a,spaceStore:n,environment:t}),o().ej(t,{member_user_id:s.userId,member_role:s.role,contraction_survey_id:e,is_space:!0,domainType:(0,p().FX)(),new_workspace_member_count:-1})})(l),r&&b(t))}async function v(e){let{member:t,newRole:s,currentUserSettingsStore:i,spaceStore:u,environment:m}=e;const f=m.currentUser.id;if(t.userId!==f||"none"!==s)!function(){const e=(0,n().YK)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});r().m({message:e.updatingPermissions})}(),"none"===s?(await a().callApi({eventName:"removeUsersFromSpace",environment:m,data:{userIds:[t.userId],spaceId:u.id,removePagePermissions:!0,revokeUserTokens:!1}}),await h().nO({environment:m,spaceStore:u})):c().createAndCommit({userAction:"contractionActions.handleMemberPermissionRoleChange",environment:m,canUndo:!0,perform:e=>l().dy({environment:m,spaceStore:u,permissionItems:[{type:"user_permission",role:s,user_id:t.userId}],transaction:e,from:"space_permission_setting_table"})}),r().V();else{await d().ev({environment:m,spaceId:u.id,userSettingsStore:i})&&(o().KX(m,{invite_origin:"workspace_remove_member",domainType:(0,p().FX)(),new_workspace_member_count:-1,new_workspace_member_ids:[f]}),g().A.setState({...g().A.state,open:!1}))}}},775471:(e,t,s)=>{s.d(t,{B:()=>g});s(581454),s(296540);var i=()=>s(56366),n=()=>s(401497),o=()=>s(959013),a=()=>s(534177),r=()=>s(84817),l=()=>s(115562),d=()=>s(554509),c=s(474848);function u(e){const{isChecked:t,label:s,onClickToggle:i}=e,o=(0,n().IS)((()=>({row:{alignItems:"center",cursor:"pointer",display:"flex",gap:8}})),[]);return(0,c.jsxs)("label",{style:o.row,children:[(0,c.jsx)(l().W,{checked:t,onChange:i}),(0,c.jsx)(d().D,{styleName:"Body-14px/Regular",children:s})]})}var p=()=>s(623580);function m(e){const{inputText:t,isChecked:s,label:i,onClickToggle:n,placeholderText:o,setInputText:a}=e;return(0,c.jsxs)(r().Y1,{gap:8,children:[(0,c.jsx)(u,{label:i,isChecked:s,onClickToggle:n}),s?(0,c.jsx)(p().A,{autoFocus:!0,value:t,placeholder:o,onChange:e=>a(e.target.value)}):null]})}function g(e){const{store:t}=e,s=(0,n().IS)((e=>({container:{border:`1px solid ${e.stroke.secondary}`,borderRadius:6}})),[]),l=(0,i().K8)((()=>t.state.options),[t]),{selectedIndexes:d,customTextByIndex:p}=(0,i().K8)((()=>{const{selectedIndexes:e,customTextByIndex:s}=t.state;return{selectedIndexes:e,customTextByIndex:s}}),[t]),g=(0,o().tz)();return(0,c.jsx)(r().Y1,{padding:"16px 16px",style:s.container,gap:12,children:l.map(((e,s)=>{const{type:i}=e,n=d.has(s);switch(i){case"checkbox":return(0,c.jsx)(u,{isChecked:n,label:e.label,onClickToggle:()=>t.toggleIndex(s)},s);case"checkboxAndInput":const o="placeholderText"in e&&e.placeholderText?g.formatMessage(e.placeholderText):void 0;return(0,c.jsx)(m,{inputText:p[s]??"",isChecked:n,label:e.label,onClickToggle:()=>t.toggleIndex(s),placeholderText:o,setInputText:e=>t.setCustomTextByIndex(s,e)},s);default:(0,a().HB)(i)}}))})}},777967:(e,t,s)=>{s.d(t,{x:()=>E});s(944114),s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),s(898992),s(354520),s(581454),s(737550);var i=s(296540),n=()=>s(484714),o=()=>s(56366),a=()=>s(401497),r=()=>s(617871),l=()=>s(857639),d=()=>s(591779),c=()=>s(798880),u=()=>s(959013),p=()=>s(496603),m=()=>s(502800),g=()=>s(763824),h=()=>s(534177),f=()=>s(449506),S=()=>s(2220),y=()=>s(646736),b=()=>s(549200),x=()=>s(962730),v=()=>s(53137),A=()=>s(957599),w=()=>s(630116),M=()=>s(486130),j=()=>s(641300),k=()=>s(710149),C=()=>s(460292),_=()=>s(125565),I=()=>s(719147),P=()=>s(558034),T=()=>s(762286),B=s(474848);const R=25;var D=function(e){return e.Contact="contact",e.Loading="loading",e}(D||{});const N={id:"user",widthData:{width:30},headerTitle:(0,B.jsx)(u().sA,{id:"peopleSectionContactsTab.name",defaultMessage:"User"}),sortable:!0,renderCell:e=>{if(e.type===D.Loading)return(0,B.jsx)(s(236527).a,{});const t=e.email.length>30,i=()=>(0,B.jsx)(s(453697).A,{size:32,type:"avatar-name-email",...e.userStore?{userStore:e.userStore}:{avatar:{name:e.name,email:e.email,avatarUrl:e.profilePhoto}}});return t?(0,B.jsx)("div",{style:{display:"flex",alignItems:"center",gap:8},children:(0,B.jsx)(s(859428).A,{renderTooltip:()=>(0,B.jsx)("div",{children:e.email}),placement:x().W.Right,alignment:x().C.Center,render:t=>(0,B.jsx)("div",{"aria-label":e.email,...t,children:i()})})}):i()}};const L={id:"teamspaces",widthData:{width:20},headerTitle:(0,B.jsx)(u().sA,{id:"peopleSectionContactsTab.teamspaces",defaultMessage:"Teamspaces"}),sortable:!1,renderCell:e=>{if(e.type===D.Loading)return(0,B.jsx)(k().A,{});const t=e.userId,i=e.spaceRole,n=e.spacePermissionGroupIds;return t&&function(e){return"read_and_write"===e||"editor"===e||"membership_admin"===e}(i)&&n?(0,B.jsx)(s(967554).A,{user:{userId:t,role:i},userPermissionGroupIds:n}):(0,B.jsx)(u().sA,{id:"peopleSectionContactsTab.teamspaces.none",defaultMessage:"None"})}},O={id:"source",widthData:{width:10},headerTitle:(0,B.jsx)(u().sA,{id:"peopleSectionContactsTab.source",defaultMessage:"Source"}),sortable:!1,renderCell:e=>{if(e.type===D.Loading)return(0,B.jsx)(k().A,{});let t="";switch(e.source){case"slack":t="Slack";break;case"google":t="Google";break;case"guest":t="Guest";break;default:t=e.source}return(0,B.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4},children:["slack"===e.source?(0,B.jsx)(C().Q,{style:{width:16,height:16},iconGroup:P().jJ,variantName:"default"}):void 0,"google"===e.source?(0,B.jsx)(C().Q,{style:{width:16,height:16},iconGroup:P().mt,variantName:"default"}):void 0,t]})}},F={id:"role",widthData:{width:40,minWidth:100},headerTitle:(0,B.jsx)(u().sA,{id:"peopleSectionContactsTab.role",defaultMessage:"Role"}),sortable:!1,renderCell:e=>{if(e.type===D.Loading)return(0,B.jsx)(k().A,{});if(e.spaceRole){var t;if("page_guest"===e.spaceMembershipType&&null!==(t=e.userStore)&&void 0!==t&&t.getOnboardingCompleted())return(0,B.jsx)(u().sA,{id:"peopleSectionContactsTab.role.guest",defaultMessage:"Guest"});if("none"!==e.spaceRole){const{label:t}=(0,s(747788).R)({type:"space_permission",role:e.spaceRole,table:s(96689).NX,isRemovable:!1,isCurrentUser:!1});return(0,B.jsx)(u().sA,{...t})}}return e.isInvited?(0,B.jsx)(u().sA,{id:"peopleSectionContactsTab.role.invited",defaultMessage:"Invited"}):(0,B.jsx)(u().sA,{id:"peopleSectionContactsTab.role.not_invited",defaultMessage:"Not invited"})}},U=[...Array(10)].map(((e,t)=>({type:D.Loading,id:`loading-${t}`,isClickable:!1})));function E(e){const t=(0,n().v3)(),{spaceStore:s}=e,[x,k]=(0,i.useState)(!1),[C,P]=(0,i.useState)({column:N,sortAscending:!0}),[E,G]=(0,i.useState)([]),[V,z]=(0,i.useState)({contacts:[],invites:[]}),[K,q]=(0,i.useState)(!0),{googleContactsAuthentications:W,slackAuthentications:H}=(0,o().K8)((()=>({googleContactsAuthentications:v().A.externalAuthentications.state.filter((e=>e.integration_id===r().E8)),slackAuthentications:v().A.completeSlackAuthentications.state})),[]),$=(0,o().K8)((()=>T().A.getState().searchQuery),[]),[Y,Q]=(0,i.useState)(0),X=(0,d().lW)($,250,((e,t)=>e===t));(0,i.useEffect)((()=>{Q(0),G([])}),[X]),(0,i.useEffect)((()=>{!async function(){s&&(await(0,b().b)({bots:[...W.map((e=>({botId:e.id,importContactType:"google"}))),...H.map((e=>({botId:e.id,importContactType:"slack"})))],spaceId:s.id,environment:t}),k(!0))}()}),[t,s,W,H]),(0,i.useEffect)((()=>{!async function(){var e;if(q(!0),!s||!x)return x&&q(!1),{contacts:[],invites:[]};const i=[],n=[],o=H.length>0,a=W.length>0,r=await f().callApi({eventName:"searchContacts",environment:t,data:{spaceId:s.id,importContactType:o&&!a?"slack":a&&!o?"google":void 0,includeUserId:!0,includeNonNotionUsers:!0,query:X}}).catch((e=>{l().log({level:"error",from:"PeopleSectionContactsTab",type:"searchContacts",error:(0,m().convertErrorToLog)(e)})}));if("success"===(null==r?void 0:r.type)&&null!==(e=r.data)&&void 0!==e&&e.contacts){const{column:e,sortAscending:t}=C,s=(0,p().Ul)(r.data.contacts,(s=>"source"===e.id?t?s.type:`z${s.type}`:"user"===e.id?t?s.name:`z${s.name}`:""));i.push(...s)}if(i.length>0){var d;const e=await f().callApi({eventName:"getInvitesForInvitees",environment:t,data:{spaceId:s.id,inviteeIds:i.map((e=>e.user_id)).filter(h().O9)}}).catch((e=>{l().log({level:"error",from:"PeopleSectionContactsTab",type:"getInvitesForInvitees",error:(0,m().convertErrorToLog)(e)})}));"success"===(null==e?void 0:e.type)&&null!==(d=e.data)&&void 0!==d&&d.invites&&n.push(...e.data.invites)}const c={contacts:i,invites:n};z(c),0===c.contacts.length&&0===c.invites.length&&q(!1)}()}),[t,s,x,C,H,X,W]),(0,i.useEffect)((()=>{if(!V.contacts.length)return;(async()=>{q(!0);const e=V.contacts.slice(Y*R,(Y+1)*R),i=await(0,g().lX)(e,R,(async(e,i)=>{let n,o,a,r,l=!1,d=new Set;var u,p,m;e.user_id&&(n=new(w().LU)(t,{table:c().oo,id:e.user_id}),o=(0,y().dp)(s,e.user_id),a=null===(u=o)||void 0===u?void 0:u.getMembershipTypeAsRoleOrNone(),r=null===(p=o)||void 0===p?void 0:p.getMembershipType(),l=V.invites.some((t=>t.invitee_id===e.user_id)),d=M()._.getSpacePermissionGroupIds({userId:e.user_id,spaceId:s.id}));n&&await(null===(m=n)||void 0===m?void 0:m.waitUntil((()=>{var e,t;return(null===(e=n)||void 0===e?void 0:e.isDefined())&&(null===(t=n)||void 0===t?void 0:t.isReady())})));return{id:`${e.type}-${e.email}`,email:e.email,name:e.name||e.email,source:e.type,userId:e.user_id,profilePhoto:e.profile_photo,isClickable:!1,spaceStore:s,type:D.Contact,userStore:n,spaceRole:a,spaceMembershipType:r,isInvited:l,spacePermissionGroupIds:d}}));G((e=>{if(0===Y)return i;const t=new Set(e.map((e=>e.id))),s=i.filter((e=>!t.has(e.id)));return[...e,...s]})),q(!1)})()}),[V,Y,s,t]);const J=(0,i.useCallback)((e=>{P(e),G((t=>{const{column:s,sortAscending:i}=e;return(0,p().Ul)(t,(e=>"source"===s.id?i?e.source:`z${e.source}`:"user"===s.id?i?e.name:`z${e.name}`:""))}))}),[]),Z=(0,o().K8)((()=>s.isTeamsEnabled()),[s]),ee=(0,i.useMemo)((()=>Z?[N,L,F,O]:[N,F,O]),[Z]),te=(0,a().IS)((e=>({titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,minHeight:30,paddingTop:10},titleNumber:{color:e.text.tertiary},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`,color:e.text.secondary,fontSize:14,fontWeight:400,textAlign:"center"},connectLink:{textDecoration:"underline"}})),[]),se=(0,i.useCallback)((()=>{Q((e=>e+1))}),[]),ie=(Y+1)*R<V.contacts.length,ne=(0,i.useMemo)((()=>K&&0===E.length?U:E),[K,E]),oe=(0,a().IS)((e=>(0,j().rC)({columnRenderInfo:ee,theme:e,containerMarginTop:0})),[ee]);return(0,B.jsx)("div",{children:(0,B.jsx)(j().WE,{allowHorizontalScroll:!0,setStickyHeaderRow:!0,columnRenderInfo:ee,rows:ne,styles:oe,showRowBorders:!0,hideHeaderRowPadding:!0,sortState:C,onSortStateChanged:J,renderNoRowsComponent:()=>(0,B.jsx)(_().A,{isSmall:!0,style:te.emptyMessage,children:(0,B.jsx)(u().sA,{id:"peopleSectionContactsTab.empty",defaultMessage:"No contacts found. <connectlink>Connect your Google or Slack account</connectlink> to import contacts.",values:{connectlink:e=>(0,B.jsx)(I().A,{style:te.connectLink,onClick:()=>{(0,S().u)({environment:t,event:{eventName:"open_import_contacts_dropdown",eventProperties:{source:"contacts_tab_empty_state"}}}),A().F.openImportDropdown({shouldAddMembers:!1})},children:e})}})}),loadMoreMethod:{type:"button",onLoadMore:se,hasNextPage:ie}})})}},782649:(e,t,s)=>{s.d(t,{L:()=>g});s(296540);var i=()=>s(484714),n=()=>s(56366),o=()=>s(959013),a=()=>s(58293),r=()=>s(155959),l=()=>s(749240),d=()=>s(187485),c=()=>s(864943),u=()=>s(125565),p=()=>s(8178),m=s(474848);function g(){const e=(0,i().v3)(),t=(0,n().K8)((()=>function(e){const{device:t,WindowSizeStore:s}=e;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:t.isMobile?s.state.paddingLeftCSS:0,paddingRight:t.isMobile?s.state.paddingRightCSS:0}}(e)),[e]);return(0,m.jsxs)("div",{children:[(0,m.jsx)(f,{}),(0,m.jsxs)("div",{style:t,children:[(0,m.jsx)(u().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,m.jsx)(S,{})}),(0,m.jsx)(h,{})]})]})}function h(){const e=(0,a().r)(),{mobileNative:t}=(0,i().v3)(),{isIOS:s}=(0,i().Y0)(),u=(0,n().K8)((()=>{var e;const t=l().subscriptionDataStoreInstance.state;return"subscribed_admin"===(null==t?void 0:t.type)?null===(e=t.customerData)||void 0===e||null===(e=e.revenueCat)||void 0===e?void 0:e.store:void 0}),[]),p={marginTop:12,marginBottom:4},g=(0,m.jsx)(o().sA,{id:"subscriptionSettings.button",defaultMessage:"Manage subscription"});if(s&&"app_store"===u&&(0,r().T)("supportsAiIAP")&&null!=t&&t.openUpgradeModal&&e)return(0,m.jsx)(c().A,{size:"lg",style:p,onClick:()=>{t.openUpgradeModal({spaceId:e.getSpaceId(),from:"settings",showActivePlan:!0})},children:g});let h;switch(u){case"app_store":h="https://apps.apple.com/account/subscriptions";break;case"play_store":h="https://play.google.com/store/account/subscriptions"}return(0,m.jsx)(d().A,{href:h,children:(0,m.jsx)(c().A,{size:"lg",style:p,children:g})})}function f(){const e=(0,i().v3)(),{device:t}=e;return(0,m.jsx)(p().A,{large:!t.isMobile||void 0,divider:t.isMobile?void 0:"full",children:(0,m.jsx)(o().sA,{id:"subscriptionSettings.title",defaultMessage:"Subscription"})})}function S(){const e=(0,i().v3)(),{device:t}=e;return t.isMobile?(0,m.jsx)(o().sA,{id:"subscriptionSettings.mobileDescription",defaultMessage:"Manage your subscription through the App Store."}):(0,m.jsx)(o().sA,{id:"subscriptionSettings.description",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. You can manage your subscription in Apple's subscription settings."})}},785606:(e,t,s)=>{s.d(t,{I:()=>a});var i=s(296540),n=()=>s(484714),o=()=>s(134696);function a(e){const{children:t}=e,s=(0,n().v3)();return(0,i.useEffect)((()=>{o().ig(s,{})}),[s]),t}},791570:(e,t,s)=>{s.d(t,{A:()=>C});var i=s(296540),n=()=>s(484714),o=()=>s(401497),a=()=>s(668725),r=()=>s(959013),l=()=>s(284371),d=()=>s(701763),c=()=>s(493823),u=()=>s(406699),p=(s(581454),()=>s(56366)),m=()=>s(972435),g=()=>s(722872),h=()=>s(37433),f=()=>s(632709),S=()=>s(848237),y=()=>s(898808),b=()=>s(452558),x=()=>s(760217),v=()=>s(419357),A=()=>s(928600),w=()=>s(89924),M=s(474848);const j=(0,r().YK)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder"},privateTeamspace:{defaultMessage:"Private teamspace",id:"teamsDropdownForMember.privateTeamspace"}});function k(e){const t=(0,n().v3)(),[s,a]=(0,i.useState)(""),l=(0,i.useCallback)((e=>S().F2({environment:t,teamId:e,tab:f().p.Members,from:"teams_dropdown_space_settings_people"})),[t]),d=(0,o().IS)((e=>({teamName:{color:e.text.primary,fontSize:14},teamMemberCount:{color:e.text.secondary,fontSize:12}})),[]),c=(0,p().K8)((()=>[{key:"teams for member",render:e=>(0,M.jsx)(w().A,{...e}),actions:e.teamStores.map((e=>{const t={key:e.id,displayName:e.getName()??m().A.formatMessage(j.privateTeamspace),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>{var s;return(0,M.jsx)(x().A,{style:{padding:4},textWrapperStyle:{marginLeft:0,marginRight:0},title:(0,M.jsxs)("div",{style:{display:"flex",padding:"4px 6px 4px 8px",alignItems:"flex-start",gap:8,alignSelf:"stretch"},children:[(0,M.jsx)(y().x,{disabled:!0,store:e,size:20,style:{borderRadius:4}}),(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{style:d.teamName,children:e.getName()??m().A.formatMessage(j.privateTeamspace)}),(0,M.jsx)("div",{style:d.teamMemberCount,children:(0,M.jsx)(r().sA,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",values:{numMembers:(null===(s=(0,h().PF)({teamStore:e}))||void 0===s?void 0:s.memberCountWithGuests)??0}})})]})]}),disabled:!Boolean(e.getName()),inline:!0,...t})},action:()=>{l(e.id)},closeParentMenu:!1};return t}))}]),[e.teamStores,l,d.teamMemberCount,d.teamName]),u=s,k=(0,M.jsx)(w().A,{isInput:!0,children:(0,M.jsx)(v().Ay,{value:u,onChange:(0,i.useCallback)((e=>{a(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:m().A.formatMessage(j.filterTeams)})}),C={menuType:g().gu.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?k:void 0};return(0,M.jsx)(A().A,{...C,children:(0,M.jsx)(b().A,{filter:u,context:{blocks:[],environment:t,publicEditMode:void 0},initialFocus:void 0,sections:c})})}function C(e){let{from:t,teamStores:s}=e;const{styles:p,onClickButton:m}=function(e){let{from:t}=e;const s=(0,o().IS)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.text.tertiary},chevron:{width:10,marginLeft:4,fill:e.icon.tertiary},teamspaceName:{color:e.text.secondary,maxWidth:70,...l().RC},teamspaceNameSuffix:{color:e.text.tertiary,paddingLeft:4}})),[]),a=(0,n().v3)(),r=(0,i.useCallback)((()=>{d().jR(a,{from:t,button_name:"open_teamspaces"})}),[a,t]);return{styles:s,onClickButton:r}}({from:t}),g=s.length;return(0,M.jsx)(u().Ay,{popupType:u().z7.Popup,onClick:m,renderOrigin:e=>(0,M.jsx)(c().p,{disabled:0===g,style:0===g?p.noTeams:p.button,...e,children:0===g?(0,M.jsx)(r().sA,{id:"teamsDropdownForMember.teamsCountNone.label",defaultMessage:"No access"}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{style:p.teamspaceName,title:s[0].getName(),children:s[0].getName()}),(0,M.jsx)("span",{style:p.teamspaceNameSuffix,children:g>1?(0,M.jsxs)("div",{children:["+",g-1]}):null}),(0,a().b)(p.chevron)]})}),render:()=>(0,M.jsx)(k,{teamStores:s})})}},792361:(e,t,s)=>{s.d(t,{X:()=>n});var i=()=>s(378815);function n(e){const{fill:t,up:s}=e,n={width:10,height:10,marginLeft:4,fill:t};return s?(0,i().C)({...n,transform:"rotate(180deg)"}):(0,i().C)(n)}},804411:(e,t,s)=>{s.d(t,{Q:()=>o});var i=()=>s(920949),n=()=>s(449506);async function o(e,t){const s=await n().callApi({eventName:"getEmailDomainSettings",environment:e,data:{}});"success"===s.type&&t.setState({...t.state,emailDomainSettings:s.data});try{const s=await(0,i().Su)(e);t.setState({...t.state,accountSettings:{...s,error:void 0}})}catch(o){t.setState({...t.state,accountSettings:{...t.state.accountSettings,error:o}})}}},841101:(e,t,s)=>{s.d(t,{M:()=>n,a:()=>i});s(944114),s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),s(898992),s(803949);class i extends(()=>s(757695))().Store{getInitialState(){return{options:[],customTextByIndex:{},selectedIndexes:new Set}}setOptions(e){this.setState({customTextByIndex:{},options:e,selectedIndexes:new Set})}setCustomTextByIndex(e,t){this.update((s=>({...s,customTextByIndex:{...s.customTextByIndex,[e]:t}})))}toggleIndex(e){this.update((t=>{const s=new Set(t.selectedIndexes);return s.has(e)?s.delete(e):s.add(e),{...t,selectedIndexes:s}}))}toSurveyResult(){const{customTextByIndex:e,options:t,selectedIndexes:s}=this.state,i=[],n=[],o={};return s.forEach((s=>{const a=t[s];i.push(a.optionName),n.push(s),"checkboxAndInput"===a.type&&e[s]&&(o[a.optionName]=e[s])})),{reasons:i,reasonIndexes:n,customTextByReason:o}}}const n=new i},862961:(e,t,s)=>{s.d(t,{A:()=>b});var i=s(296540),n=()=>s(484714),o=()=>s(56366),a=()=>s(959013),r=()=>s(404141),l=()=>s(147294),d=()=>s(864943),c=()=>s(702723),u=()=>s(30580),p=()=>s(461857),m=()=>s(364671),g=()=>s(955302),h=()=>s(318575),f=()=>s(538669),S=()=>s(334711),y=s(474848);function b(e){let{samlEnforced:t,hasPasskeys:s}=e;const b=(0,n().v3)(),x=b.device.isMobile,[{rootStateMachine:v,settingsStateMachine:A,totpStateMachine:w,smsStateMachine:M,backupCodesStateMachine:j}]=(0,i.useState)((()=>{const e=new(p().q)(b),t={totpStore:new(S().$),settingsStore:new(h().r),smsStore:new(f().N),backupCodesStore:new(u().Y),rootStore:new(g().y)};return{mfaService:e,rootStateMachine:new(g().J)(t.rootStore),settingsStateMachine:new(h().U)(t.settingsStore,e),totpStateMachine:new(S().U)(t.totpStore,e),smsStateMachine:new(f().G)(t.smsStore,e),backupCodesStateMachine:new(u().b)(t.backupCodesStore,e)}}));const k=(0,y.jsx)(d().A,{size:"lg",onClick:()=>function(e){let{rootStateMachine:t,settingsStateMachine:s}=e;t.rootShowSettings({refresh:!1,startConfirmIdentity:()=>s.passkeySettingsShow()})}({rootStateMachine:v,settingsStateMachine:A}),disabled:t,children:s?(0,y.jsx)(a().sA,{id:"profileSettings.accountSecuritySection.managePasskeysButton.label",defaultMessage:"Manage passkeys"}):(0,y.jsx)(a().sA,{id:"profileSettings.accountSecuritySection.addPasskeysButton.label",defaultMessage:"Add passkey"})}),C=(0,o().K8)((()=>r().A.state.highlightedSetting===r().r.Passkey),[]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c().A,{type:"custom",isMobile:x,title:(0,y.jsx)(a().sA,{id:"profileSettings.accountSecuritySection.passkeySetting.label",defaultMessage:"Passkeys"}),caption:(0,y.jsx)(a().sA,{id:"profileSettings.accountSecuritySection.passkeySetting.message",defaultMessage:"Securely sign-in with on-device biometric authentication."}),badge:(0,y.jsx)(l().Ee,{newBadgeKey:"passkey_setting",didUserEngage:!1,keyType:"date"}),shouldHighlight:C,disabled:t,tooltipLabel:(0,y.jsx)(a().sA,{id:"profileSettings.accountSecuritySection.passkeySetting.tooltip",defaultMessage:"Your organization requires you to use SAML for authentication."}),disableTooltip:!t,customButton:k}),(0,y.jsx)(m().A,{rootStateMachine:v,settingsStateMachine:A,totpStateMachine:w,smsStateMachine:M,backupCodesStateMachine:j})]})}},863569:(e,t,s)=>{s.d(t,{A:()=>r});s(296540);var i=()=>s(959013),n=()=>s(755199),o=()=>s(765957),a=s(474848);const r=function(){const e=(0,s(484714).v3)(),{device:t}=e,o=(0,s(56366).K8)((()=>l()),[]);return(0,a.jsx)(s(702723).A,{isMobile:t.isMobile,title:(0,a.jsx)(i().sA,{id:"calendarSettings.startWeekOnMonday.label",defaultMessage:"Start week on Monday"}),caption:(0,a.jsx)(i().sA,{id:"calendarSettings.startWeekOnMonday.message",defaultMessage:"This will change how all calendars in your app look."}),type:"toggle",isOn:1===o,onToggle:()=>function(e){const t=l();1===t?n().OQ(e):n().Wq(e)}(e)})};function l(){const{currentUserSettingsStore:e}=o().default.state;if(e){const t=e.getSettings();if(t)return t.start_day_of_week}}},876926:(e,t,s)=>{s.d(t,{m:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("apple",{viewBox:"0 0 64 64",svg:(0,i.jsx)("path",{d:"m54,30c0,12-8.09,24-14,24-3.63,0-4.4-2-8-2s-4.37,2-8,2c-5.91,0-14-12-14-24s6.09-16,12-16c3.24,0,5.71,1.89,7.65,3.08.77-7.85,4.35-13.08,4.35-13.08l6,3s-3.51,3.71-5.29,9.85c1.89-1.18,4.25-2.85,7.29-2.85,5.91,0,12,4,12,16Z"})})},881707:(e,t,s)=>{s.d(t,{Dy:()=>r,Os:()=>d,l$:()=>l,qO:()=>a});s(944114),s(898992),s(354520);var i=()=>s(617871),n=()=>s(792071),o=()=>s(402904);function a(e){if(e.integration_id!==i().zG)throw"Cannot render account for integration.";const t=/(.+) - (.+)/.exec(e.account_name);if(!t)return{accountName:e.account_name};const[,s,n]=t;return{organizationName:s,accountName:n}}function r(e){return n().Bj6.fromValue(o().As,e).getSlackWorkspaceId()}function l(e,t){return t?e.filter((e=>{const s=r(e);return!!s&&t(s)})):e}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const s={};for(const i of e){const{accountName:e,organizationName:n}=a(i);c({query:t,accountName:e,organizationName:n})&&(s[e]||(s[e]=[]),s[e].push({externalAuthentication:i,workspaceName:n}))}return s}function c(e){const{accountName:t,organizationName:s,query:i}=e;if(0===i.length)return!0;const n=t.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0,o=!!s&&s.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0;return n||o}},881738:(e,t,s)=>{s.d(t,{b:()=>h,l:()=>f});var i=()=>s(243020),n=()=>s(679924),o=()=>s(898486),a=()=>s(972435),r=()=>s(719431),l=()=>s(765957),d=()=>s(589994),c=()=>s(449506),u=()=>s(901389),p=()=>s(496414),m=()=>s(246826);const g=(0,s(959013).YK)({deletingAccount:{id:"accountActions.deletingAccount.loadingMessage",defaultMessage:"Deleting your account…"},noUserError:{id:"accountActions.deletingAccount.noUserToDeleteMessage",defaultMessage:"No account to delete."}});function h(e){const{userStore:t,data:s,transaction:i}=e,n={};"name"in s&&s.name&&(n.name=s.name),"profilePhoto"in s&&(n.profile_photo=s.profilePhoto),0!==Object.keys(n).length&&m().zv({store:t,data:n,transaction:i})}async function f(e){p().m({message:g.deletingAccount});const t=e.currentUser.id,{currentUserRootStore:s,currentUserStore:m}=l().default.state;if(!s||!m||!t)return p().V(),void u().f1(a().A.formatMessage(g.noUserError));(0,n().v)(e,"delete_user");const h=await c().callApi({eventName:"deleteUser",environment:e,data:{}});if("success"===h.type)await d().transactionQueue.clearForUser(t),r().logoutSingleAccount({environment:e,userId:t,logoutOrigin:i().d.DeleteAccount});else{const e=a().A.getIntl();u().f1((0,o().Hu)(e,h))}p().V()}},910609:(e,t,s)=>{s.d(t,{o:()=>r});var i=()=>s(484714),n=()=>s(56366);const o=new(s(848776).U)((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{let{spaceId:i}=t;const n=await Promise.resolve().then(s.bind(s,449506)),o=await n.callApi({eventName:"getOrGenerateInviteLinkCode",environment:e,data:{spaceId:i},headers:(0,s(386164).WS)({cellId:void 0,spaceId:i})});if("success"===o.type&&o.data.inviteLinkCode)return o.data.inviteLinkCode}));s(604341).exposeDebugValue("BillingDataStore",o);const a=o;function r(e){let{spaceId:t}=e;const s=(0,i().v3)();return(0,n().K8)((()=>{if(t)return a.getData(s,{spaceId:t})}),[s,t])}},923525:(e,t,s)=>{s.d(t,{E:()=>d});s(296540);var i=()=>s(401497),n=()=>s(132855),o=()=>s(8980),a=()=>s(719147),r=()=>s(991249),l=s(474848);function d(e){const{children:t,environment:s,from:d,upsell:c}=e,u=(0,i().IS)((e=>({text:{alignItems:"baseline",color:e.text.uiBluePrimary,display:"inline-flex",gap:2},icon:{alignSelf:"center"}})),[]);return(0,l.jsxs)(a().A,{disableUnderline:!0,hoverColor:"blue",onClick:()=>{(0,r().K)(s,{from:d,upsell:c})},style:u.text,children:[(0,l.jsx)(o().I,{icon:n().arrowInCircleUpFillIcon,size:"sm",style:u.icon}),t]})}},931404:(e,t,s)=>{s.d(t,{N:()=>m});s(296540);var i=()=>s(484714),n=()=>s(56366),o=()=>s(959013),a=()=>s(946548),r=()=>s(702723),l=()=>s(756581),d=()=>s(227440),c=()=>s(291606),u=()=>s(923525),p=s(474848);function m(){const e=(0,i().v3)(),t=(0,n().K8)((()=>(0,c().AC)()),[]),s=!(0,n().O$)(d().e),m=(0,l().V)();if(!m)return null;const g=(0,p.jsx)(o().sA,{id:"offlineSettingsTab.autosyncedPagesSection.title",defaultMessage:"Automatic offline syncing"});return"unavailable"===m.type?(0,p.jsx)(r().A,{type:"custom",caption:(0,p.jsx)(o().sA,{id:"offlineSettingsTab.autoSyncPagesSection.upsell",defaultMessage:"<cta>Upgrade</cta> to automatically sync recently viewed pages for offline use",values:{cta:t=>(0,p.jsx)(u().E,{environment:e,from:"offline_settings_auto_sync_section",upsell:m.upsell,children:t})}}),customButton:null,disableSettingsItemClick:!0,disableTitle:s,isMobile:!0,shouldHighlight:!1,title:g}):(0,p.jsx)(r().A,{type:"custom",isMobile:!0,title:g,disableTitle:s,disableSettingsItemClick:!0,caption:(0,p.jsx)(o().sA,{id:"offlineSettingsTab.autosyncedPagesSection.subheading",defaultMessage:"This will make your most recently viewed pages available for offline use."}),shouldHighlight:!1,customButton:(0,p.jsx)(a().A,{disabled:s,on:t,onClick:()=>(0,c().tn)({environment:e})})})}},934679:(e,t,s)=>{s.d(t,{m:()=>b});var i=s(296540),n=()=>s(484714),o=()=>s(401497),a=()=>s(56394),r=()=>s(760217),l=()=>s(928600),d=()=>s(939740),c=()=>s(897119),u=()=>s(89924),p=()=>s(972435),m=()=>s(722872),g=()=>s(962730),h=()=>s(377586),f=s(474848);const S=["all","manual","autosynced"],y=(0,s(959013).YK)({all:{id:"offlineSettingsTab.offlinePagesFilter.all",defaultMessage:"All pages"},manual:{id:"offlineSettingsTab.offlinePagesFilter.manual",defaultMessage:"Manual"},autosynced:{id:"offlineSettingsTab.offlinePagesFilter.autosynced",defaultMessage:"Autosynced"}});function b(e){const{filterCategory:t,setFilterCategory:s}=e,[b,x]=(0,i.useState)(!1),{isMobile:v}=(0,n().Y0)(),A=(0,o().IS)((()=>({pillContainer:{display:"flex",alignItems:"center"},pillInner:{...v?{height:40,paddingLeft:14,paddingRight:14}:{}}})),[v]),w=(0,f.jsx)(a().A,{on:!0,wrapStyle:A.pillContainer,innerStyle:A.pillInner,title:p().A.formatMessage(y[t]),onClick:()=>x(!0)}),M={key:"categories",items:S.map((e=>({key:e,action:()=>{},render:()=>(0,f.jsx)(r().A,{focused:!1,onClick:()=>{s(e),x(!1)},title:p().A.formatMessage(y[e])})}))),render:e=>(0,f.jsx)(u().A,{...e})},j=(0,f.jsx)(l().A,{menuType:m().gu.Popup,header:null,children:(0,f.jsx)(d().Ay,{type:d().Oh.Vertical,initialFocus:0,sections:[M]})});return(0,f.jsx)(c().Ay,{popupType:h().n.Popup,placementToOrigin:g().W.Bottom,alignmentToOrigin:g().C.Start,open:b,render:()=>j,onDismiss:()=>x(!1),origin:w})}},955302:(e,t,s)=>{s.d(t,{J:()=>n,y:()=>i});class i extends(()=>s(757695))().Store{getInitialState(){return{step:"rootUninitialized"}}}class n extends(()=>s(658921))()._{constructor(e){super(e,"root")}rootShowSettings(e){const{refresh:t,startConfirmIdentity:s}=e;if(this.checkStep("rootSettings")){if(!t)return}else this.store.setState({step:"rootSettings"});s()}rootStartBackupCodesFromSettings(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootBackupCodes",source:"settings"}),e())}rootStartTOTP(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootTOTP"}),e())}rootShowBackupCodesFromTOTP(){this.checkStep("rootTOTP")&&this.store.setState({step:"rootBackupCodes",source:"totp"})}rootStartSMS(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootSMS"}),e())}rootShowBackupCodesFromSMS(){this.checkStep("rootSMS")&&this.store.setState({step:"rootBackupCodes",source:"sms"})}rootEndBackupCodes(e){const t=this.checkStep("rootBackupCodes");if(t)switch(t.source){case"settings":return this.store.setState({step:"rootSettings"}),e.showSettings();case"sms":return this.store.setState({step:"rootSMS"}),e.completeSMS();case"totp":return this.store.setState({step:"rootTOTP"}),e.completeTotp();default:(0,s(534177).HB)(t.source)}}rootCloseSettings(e){e(),this.store.setState({step:"rootUninitialized"})}exit(e){this.store.setState({step:"rootUninitialized"}),e()}}},957599:(e,t,s)=>{s.d(t,{F:()=>n});class i extends(()=>s(757695))().Store{getInitialState(){return{forceImportDropdownOpen:!1,shouldAddMembers:!0}}closeImportDropdown(){this.setState({forceImportDropdownOpen:!1,shouldAddMembers:!0})}openImportDropdown(e){this.setState({forceImportDropdownOpen:!0,shouldAddMembers:e.shouldAddMembers})}}const n=new i},959098:(e,t,s)=>{s.d(t,{A:()=>m});s(898992),s(354520),s(581454),s(737550),s(296540);var i=()=>s(56366),n=()=>s(959013),o=()=>s(496603),a=()=>s(278768),r=()=>s(780054),l=()=>s(640653),d=()=>s(786667),c=()=>s(749240),u=()=>s(125565),p=s(474848);const m=function(e){var t;const m=(0,s(484714).v3)(),g=(0,n().tz)(),h=(0,s(401497).IS)((e=>({icon:{width:20,height:20,fill:e.icon.tertiary},spaceNameList:{listStyle:"none",maxHeight:200,overflowY:"auto",margin:0,padding:"12px 14px",display:"flex",flexDirection:"column",gap:6,border:`1px solid ${e.stroke.secondary}`},spaceItem:{display:"flex",alignItems:"center",lineHeight:"120%",width:"100%",borderRadius:6,paddingTop:4,paddingBottom:4,gap:12,height:44}})),[]),f=(0,i().K8)((()=>{var e;return(0,s(979340).OX)(null===(e=c().subscriptionDataStoreInstance.state)||void 0===e?void 0:e.subscriptionTier)}),[]),S=(0,i().K8)((()=>(0,s(807778).Le)()),[]),y=Boolean(null===(t=e.userEmailDomainSettings)||void 0===t?void 0:t.isDomainVerified),{loading:b,organizationsInfo:x}=(0,s(926938).q)(),v=null==x?void 0:x.some((e=>e.isUserLastOwner)),A=e.disabled||y&&f||v,w=y&&f?(0,p.jsx)(n().sA,{defaultMessage:"Your organization has disabled account deletion.",id:"profileSettings.accountDeleteButton.disabledForManagedUser.tooltip"}):v?(0,p.jsx)(n().sA,{defaultMessage:"You are the last owner of an organization. Add a new organization owner to enable this action.",id:"profileSettings.accountDeleteButton.disabledForLastOrgOwner.tooltip"}):b?(0,p.jsx)(n().sA,{defaultMessage:"Loading account details...",id:"profileSettings.accountDeleteButton.loading.tooltip"}):null,M=async()=>{const{currentUserStore:e,currentUserRootStore:t}=s(765957).default.state;if(!e||!t)return;if(!e.isDefined())return;const i=o().oE(t.getSpaceViewStores().map((e=>e.getSpaceStore())));if(!c().subscriptionDataStoreInstance.state)return;const f=i.filter((e=>{const t=e.canAdmin()&&1===e.getOwnerCountFromPublicSpaceData();return!(0,s(322769).zL)({space:e.getModel(),spaceRole:e.getRole(),otherAdminWithAccess:!t})})),y=o().oE(f.map((e=>{if(e)return{key:e.id,render:()=>(0,p.jsxs)("div",{style:h.spaceItem,children:[(0,p.jsx)(s(187820).B6,{disabled:!0,icon:(0,l().c2)(m,e),iconRecordCategory:"workspace",isEmptyPage:!1,title:(0,l().GK)(m,e),size:32,isLarge:!0}),(0,p.jsxs)("div",{style:{minWidth:0},children:[(0,p.jsx)(u().A,{className:"notranslate",isMobile:r().A.isMobile,children:(0,d().rK)(m,e)}),(0,p.jsx)(u().A,{isSmall:!0,isMobile:r().A.isMobile,children:(0,d().rY)(m,g,e,S).subtitle})]})]})}}))),b=o().oE(f.map((e=>({id:e.id,name:(0,l().GK)(m,e)}))));a().X0(m);const x=(0,s(209199).vL)(s(662303).locale)?(0,p.jsx)(n().sA,{id:"profileSettings.deleteAccountConfirmationDialog.warning",defaultMessage:"This action cannot be undone. This will permanently delete your entire account. All private workspaces will be deleted, and you will be removed from all shared workspaces."}):(0,p.jsx)(s(418884).A,{translations:{es:"Esta acción no se puede deshacer. Esto eliminará permanentemente su cuenta completa. Se eliminarán todas las áreas de trabajo privadas y se eliminará de todas las áreas de trabajo compartidas. Por favor, escriba su correo electrónico para confirmar.",ru:"Это действие не может быть отменено. Это навсегда удалит всю вашу учетную запись. Все частные рабочие области будут удалены, и вы будете удалены из всех общих рабочих областей. Пожалуйста, введите ваш адрес электронной почты для подтверждения.",zh:"此操作无法撤消。 这将永久删除您的整个帐户。 将删除所有私有工作空间，您将从所有共享工作空间中删除。 请输入您的电子邮箱进行确认。",de:"Diese Aktion kann nicht rückgängig gemacht werden. Dadurch wird Ihr gesamtes Konto dauerhaft gelöscht. Alle privaten Arbeitsbereiche werden gelöscht und Sie werden aus allen freigegebenen Arbeitsbereichen entfernt. Bitte geben Sie Ihre E-Mail-Adresse zur Bestätigung ein.",fr:"Cette action ne peut pas être annulée. Cela supprimera définitivement votre compte en entier. Tous les espaces de travail privés seront supprimés et vous serez supprimé de tous les espaces de travail partagés. Veuillez taper votre email pour confirmer.",ja:"この操作を元に戻すことはできません。 これによりアカウント全体が完全に削除されます。 すべてのプライベートワークスペースが削除され、あなたはすべての共有ワークスペースから削除されます。 確認のためにメールアドレスを入力してください。",it:"Questa azione non può essere annullata. Questo eliminerà definitivamente l'intero account. Tutti gli spazi di lavoro privati verranno eliminati e verranno rimossi da tutti gli spazi di lavoro condivisi. Inserisci la tua email per confermare.",pt:"Essa ação não pode ser desfeita. Isso excluirá permanentemente sua conta inteira. Todos os espaços de trabalho privados serão excluídos e você será removido de todos os espaços de trabalho compartilhados. Por favor, digite o seu email para confirmar.",nl:"Deze actie kan niet ongedaan gemaakt worden. Hiermee wordt uw gehele account permanent verwijderd. Alle privéwerkruimten worden verwijderd en u wordt verwijderd uit alle gedeelde werkruimten. Voer je e-mailadres in om te bevestigen.",pl:"Tego działania nie można cofnąć. Spowoduje to trwałe usunięcie całego konta. Wszystkie prywatne obszary robocze zostaną usunięte, a użytkownik zostanie usunięty ze wszystkich współużytkowanych obszarów roboczych. Wpisz swój e-mail, aby potwierdzić.",sv:"Den här åtgärden kan inte ångras. Detta tar bort hela ditt konto permanent. Alla privata arbetsytor kommer att raderas, och du kommer att tas bort från alla delade arbetsytor. Vänligen skriv in din email för att bekräfta.",uk:"Цю дію не можна скасувати. Таким чином буде видалено весь обліковий запис назавжди. Всі приватні робочі області будуть видалені, і ви будете видалені з усіх спільних робочих областей. Будь ласка, введіть електронний лист для підтвердження.",no:"Denne handlingen kan ikke fortrykkes. Dette vil permanent slette hele kontoen din. Alle private arbeidsområder blir slettet, og du vil bli fjernet fra alle delte arbeidsområder. Vennligst skriv inn din epost for å bekrefte.",tr:"Bu işlem geri alınamaz. Bu işlem hesabınızın tamamını kalıcı olarak siler. Tüm özel çalışma alanları silinecek ve paylaşılan tüm çalışma alanlarından kaldırılacaksınız. Lütfen onaylamak için e-postanızı yazın.",cs:"Tuto akci nelze vrátit zpět. Tím bude trvale smazán celý váš účet. Všechny soukromé pracovní prostory budou smazány a budete ze všech sdílených pracovních prostor odstraněni. Pro potvrzení zadejte svůj e-mail.",vi:"Hành động này không thể được hoàn tác. Điều này sẽ xóa vĩnh viễn toàn bộ tài khoản của bạn. Tất cả các không gian làm việc riêng tư sẽ bị xóa và bạn sẽ bị xóa khỏi tất cả các không gian làm việc chung. Vui lòng nhập email của bạn để xác nhận.",da:"Denne handling kan ikke fortrydes. Dette vil permanent slette hele din konto. Alle private arbejdsområder slettes, og du vil blive fjernet fra alle delte arbejdsområder. Indtast venligst din email for at bekræfte.",hu:"Ez a művelet nem visszavonható. Ez véglegesen törli a teljes fiókot. Minden privát munkaterület törlődik, és eltávolításra kerül minden megosztott munkaterületről. Kérjük, írja be e-mail címét, hogy megerősítse.",ar:"لا يمكن التراجع عن هذا الإجراء. سيؤدي الإجراء إلى حذف حسابك بالكامل. سيتم أيضا حذف جميع مساحات العمل الخاصة ، وستتم إزالتك من جميع مساحات العمل المشتركة. يرجى كتابة البريد الإلكتروني الخاص بك للتأكيد.",th:"การกระทำนี้ไม่สามารถยกเลิกได้ นี่จะเป็นการลบบัญชีทั้งหมดของคุณอย่างถาวร พื้นที่ทำงานส่วนตัวทั้งหมดจะถูกลบและคุณจะถูกลบออกจากพื้นที่ทำงานที่ใช้ร่วมกันทั้งหมด กรุณาพิมพ์อีเมลของคุณเพื่อยืนยัน",he:"לא ניתן לבטל פעולה זו. פעולה זו תמחק לצמיתות את כל החשבון שלך. כל סביבות העבודה הפרטיות יימחקו, ותוסר מכל סביבות העבודה המשותפות. הקלד את האימייל שלך כדי לאשר.",fi:"Tätä toimintoa ei voi peruuttaa. Tämä poistaa koko tilin pysyvästi. Kaikki yksityiset työtilat poistetaan ja poistetaan kaikista jaetuista työtiloista. Vahvistaaksesi kirjoita sähköpostiosoitteesi.",id:"Tindakan ini tidak bisa dibatalkan. Ini akan secara permanen menghapus seluruh akun Anda. Semua ruang kerja pribadi akan dihapus, dan Anda akan dihapus dari semua ruang kerja bersama. Ketikkan email Anda untuk mengonfirmasi."}});await s(920093).h({title:(0,p.jsx)(n().sA,{id:"profileSettings.deleteAccountConfirmationDialog.title",defaultMessage:"Delete your entire account permanently?"}),message:x,content:(0,p.jsxs)(p.Fragment,{children:[y&&y.length>0?(0,p.jsx)("div",{style:{overflow:"hidden",borderRadius:6},children:(0,p.jsx)("ul",{style:h.spaceNameList,children:y.map((e=>{let{key:t,render:s}=e;return(0,p.jsx)("div",{children:s()},t)}))})}):null,(0,p.jsx)(s(554509).D,{styleName:"Body-14px/Regular",colorName:"primary",children:(0,p.jsx)(n().sA,{id:"profileSettings.deleteAccountConfirmationDialog.prompt",defaultMessage:"Please type in your email to confirm."})})]}),acceptLabel:0===b.length?(0,p.jsx)(n().sA,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountButton.label",defaultMessage:"Permanently delete account"}):r().A.isMobile?(0,p.jsx)(n().sA,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButtonMobile.label",defaultMessage:"{numberOfWorkspaces, plural, one {Delete account & 1 workspace} other {Delete account & {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:b.length}}):(0,p.jsx)(n().sA,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButton.label",defaultMessage:"{numberOfWorkspaces, plural, one {Permanently delete account and 1 workspace} other {Permanently delete account and {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:b.length}}),requiredInputValue:e.getEmail()})&&(a().FZ(m),s(404141).A.reset(),s(881738).l(m))};return(0,p.jsx)(s(702723).A,{type:"custom",useFlexboxStyle:!r().A.isMobile,isMobile:Boolean(r().A.isMobile),title:(0,p.jsx)(n().sA,{id:"profileSettings.accountDeletionSetting.title",defaultMessage:"Delete my account"}),caption:(0,p.jsx)(n().sA,{id:"manageActiveSessions.accountDeletionSetting.label",defaultMessage:"Permanently delete the account and remove access from all workspaces."}),isCritical:!0,customButton:r().A.isMobile?(0,p.jsx)("div",{style:{marginTop:12},children:(0,p.jsx)(s(864943).A,{size:"lg",color:"uiRed",onClick:M,disabled:A,disabledFeedback:A,children:(0,p.jsx)(n().sA,{id:"profileSettings.deleteMyAccount.button.label",defaultMessage:"Delete my account"})})}):(0,p.jsx)(s(197190).A,{style:{borderRadius:"0.25em"},onClick:M,disabled:A,disabledFeedback:A,children:(0,s(983125).d)(h.icon)}),disabled:A,tooltipLabel:w})}},963550:(e,t,s)=>{s.d(t,{A:()=>a});s(296540);var i=()=>s(959013),n=()=>s(534177),o=s(474848);function a(e){let{target:t}=e;switch(t){case"notify_mobile":return(0,o.jsx)(i().sA,{defaultMessage:"Mobile push notifications",id:"notificationSettings.mobilePushNotificationSettings.title"});case"notify_desktop":return(0,o.jsx)(i().sA,{id:"notificationSettings.commentsAndMentions.title",defaultMessage:"Desktop comments and mentions notifications"});case"notify_email":return(0,o.jsx)(i().sA,{id:"notificationSettings.productNotifEmails.title",defaultMessage:"Activity in your workspace"});case"notify_email_always":return(0,o.jsx)(i().sA,{id:"notificationSettings.emailAlwaysNotificationSettings.title",defaultMessage:"Always send email notifications"});case"notify_slack":return(0,o.jsx)(i().sA,{id:"notificationSettings.slackNotificationSettings.title",defaultMessage:"Slack notifications"});case"notify_slack_mention":return(0,o.jsx)(i().sA,{id:"notificationSettings.slackMentionNotificationSettings.title",defaultMessage:"Only user or group mentions"});case"notify_slack_all_activity":return(0,o.jsx)(i().sA,{id:"notificationSettings.slackAllActivityNotificationSettings.title",defaultMessage:"Activity in your workspace"});case"notify_email_digest":return(0,o.jsx)(i().sA,{id:"notificationSettings.pageUpdatesNotificationSettings.title",defaultMessage:"Page updates"});case"notify_home_digest_email":return(0,o.jsx)(i().sA,{id:"notificationSettings.homeDigestEmailNotificationSettings.title",defaultMessage:"Workspace digest"});case"marketing_emails":return(0,o.jsx)(i().sA,{id:"notificationSettings.marketingEmails.title",defaultMessage:"Announcements and update emails"});case"desktop_badge":return(0,o.jsx)(i().sA,{id:"notificationSettings.desktopBadge.title",defaultMessage:"Desktop badge icon"});case"disable_ai_meeting_notes_audio_process_detection_notification":return(0,o.jsx)(i().sA,{id:"notificationSettings.aiMeetingNotesAudioProcessDetectionNotification.title",defaultMessage:"Desktop meeting detection notifications"});default:(0,n().HB)(t)}}},966480:(e,t,s)=>{s.d(t,{B:()=>l,j:()=>u});s(296540);var i=()=>s(484714),n=()=>s(959013),o=()=>s(406699),a=()=>s(939740),r=s(474848);const l={id:"lastModifiedTime",headerTitle:(0,r.jsx)(n().sA,{id:"offlinePagesTable.columnHeader.lastModifiedTime",defaultMessage:"Last modified time"}),renderCell:e=>(0,r.jsx)(s(625383).d,{dateTs:e.lastModifiedTime}),widthData:{width:100},sortable:!0};function d(){const{isMobileNative:e}=(0,i().Y0)();return e?(0,r.jsx)(n().sA,{id:"offlinePagesTable.columnHeader.options",defaultMessage:"Options"}):null}function c(e){let{blockStore:t}=e;const l=(0,n().tz)(),d=(0,i().v3)(),c=!(0,s(56366).O$)(s(227440).e);return(0,r.jsx)(o().Ay,{popupType:o().z7.Popup,renderOrigin:e=>(0,r.jsx)(s(285790).A,{icon:s(568625).L,...e,ariaLabel:l.formatMessage({id:"offlinePagesTable.options",defaultMessage:"Options"})}),render:()=>(0,r.jsx)(s(928600).A,{menuType:s(722872).gu.Popup,children:(0,r.jsx)(a().Ay,{type:a().Oh.Vertical,sections:[{key:"options",render:e=>(0,r.jsx)(s(89924).A,{...e,shouldShowBottomDivider:!0}),items:[{key:"removeOffline",action:()=>{s(560868).lX({store:t,environment:d,analyticsFrom:"offline_settings"})},render:e=>(0,r.jsx)(s(760217).A,{...e,title:(0,r.jsx)(n().sA,{defaultMessage:"Remove offline page",id:"offlinePagesTable.options.remove"}),disabled:c,disabledFeedback:!0})}]}],initialFocus:void 0})})})}const u={id:"options",headerTitle:(0,r.jsx)(d,{}),renderCell:e=>e.showOptions?(0,r.jsx)(c,{blockStore:e.pageBlockStore}):null,widthData:{width:24},sortable:!1}},967554:(e,t,s)=>{s.d(t,{A:()=>l});s(898992),s(354520),s(581454);var i=s(296540),n=()=>s(56366),o=()=>s(37433),a=()=>s(791570),r=s(474848);function l(e){let{user:t,userPermissionGroupIds:s}=e;const{userTeamStores:l}=function(e){let{user:t,userPermissionGroupIds:s}=e;const a=(0,o().uJ)({userId:t.userId}),r=(0,i.useMemo)((()=>((null==a?void 0:a.teams)??[]).map((e=>e.store))),[a]),l=(0,o().qQ)(),d=(0,o().D5)(),c=(0,i.useMemo)((()=>d?r:l),[r,l,d]),u=(0,n().K8)((()=>c.filter((e=>e.isMemberOrGuest(t.userId,s)))),[t.userId,s,c]);return{userTeamStores:u}}({user:t,userPermissionGroupIds:s});return(0,r.jsx)(a().A,{teamStores:l,from:"member"})}},970209:(e,t,s)=>{s.d(t,{A:()=>g});s(296540);var i=()=>s(484714),n=()=>s(401497),o=()=>s(959013),a=()=>s(284371),r=()=>s(148024),l=()=>s(755636),d=()=>s(864943),c=()=>s(204063),u=()=>s(836251),p=()=>s(991249),m=s(474848);const g=function(e){let{style:t,icon:s,title:n,caption:o,upgradeMessage:a,from:r,subscriptionTier:l,onUpgradeClick:d,learnMoreRoute:c}=e;const u=(0,i().v3)();return(0,m.jsxs)("section",{style:f(u,t),children:[(0,m.jsx)(y,{icon:s}),(0,m.jsx)(h,{title:n}),(0,m.jsx)(b,{caption:o}),(0,m.jsx)(A,{upgradeMessage:a,from:r,subscriptionTier:l,onUpgradeClick:d,learnMoreRoute:c})]})};function h(e){let{title:t}=e;return(0,m.jsx)("header",{style:{fontWeight:a().Wy.semibold},children:t})}function f(e,t){const{device:s}=e;return{...t,fontSize:14,...!s.isMobile&&{maxWidth:340}}}function S(e){return{color:e.text.secondary,marginTop:4,marginBottom:16}}function y(e){let{icon:t}=e;const s=(0,n().DP)();return t?t(function(e){return{width:32,height:"auto",fill:e.icon.secondary,marginBottom:8}}(s)):null}function b(e){let{caption:t}=e;const s=(0,n().DP)();return(0,m.jsx)("p",{style:S(s),children:t})}function x(e){let{upgradeMessage:t,from:s,subscriptionTier:n,onUpgradeClick:a}=e;const r=(0,i().v3)();return(0,m.jsx)(c().A,{onClick:e=>function(e,t,s,i,n){p().K(i,{from:t,upsell:{type:"product",product:s,limit:{type:"none"},trialability:"none"}}),n&&n(e)}(e,s,n,r,a),size:"lg",children:t||(0,m.jsx)(o().sA,{defaultMessage:"Upgrade",id:"upsellCallout.upgradeButton.text"})})}function v(e){let{from:t,learnMoreRoute:s}=e;const n=(0,i().v3)();return(0,m.jsx)(d().A,{size:"lg",onClick:()=>function(e,t,s){l().f({environment:s,url:(0,u().xS)(t)}),r().FH(s,{from:e})}(t,s,n),children:(0,m.jsx)(o().sA,{defaultMessage:"Learn more",id:"upsellCallout.learnMoreButton.text"})})}function A(e){let{upgradeMessage:t,from:s,subscriptionTier:i,onUpgradeClick:n,learnMoreRoute:o}=e;return(0,m.jsxs)("footer",{style:{display:"flex",flexWrap:"wrap",gap:"8px 12px"},children:[(0,m.jsx)(x,{upgradeMessage:t,from:s,subscriptionTier:i,onUpgradeClick:n}),(0,m.jsx)(v,{from:s,learnMoreRoute:o})]})}},971407:(e,t,s)=>{s.d(t,{B:()=>L});s(944114),s(581454),s(296540);var i=()=>s(662303),n=()=>s(56366),o=()=>s(401497),a=()=>s(869190),r=()=>s(857639),l=s(474848);const d=(0,s(340498).wt)("docOnDoc",{viewBox:"0 0 20 20",svg:(0,l.jsx)("path",{d:"M6.268 5.28V3.61q0-1.107.56-1.674.561-.575 1.661-.575h2.57q.595 0 1.06.171.473.164.855.56l3.404 3.467q.403.417.567.888.165.465.164 1.142v5.414q0 1.107-.567 1.675-.56.567-1.654.567h-1.402v-1.34h1.279q.498 0 .745-.253.252-.26.253-.731v-5.66h-3.008q-.636 0-.964-.322-.328-.328-.328-.963V2.709H8.599q-.492 0-.745.253-.247.253-.247.731V5.28zm6.316.526q0 .177.075.26.083.075.253.075h2.502l-2.83-2.871zm-9.7 10.705V7.118q0-1.107.56-1.675.561-.573 1.661-.574h2.38q.621 0 1.025.137.41.13.82.554l3.705 3.76q.287.293.438.56.15.267.198.595.055.321.055.779v5.257q0 1.107-.561 1.675-.56.567-1.661.567H5.105q-1.1 0-1.66-.567-.561-.56-.561-1.675m1.346-.082q0 .479.247.731.246.253.738.253h6.173q.492 0 .738-.253.253-.253.253-.731V11.41h-3.61q-.725 0-1.086-.355-.363-.363-.363-1.1v-3.74H5.222q-.5 0-.745.253-.247.253-.247.724zm4.676-6.2h3.288L8.503 6.476v3.35q0 .21.096.307.095.096.307.096"})});var c=()=>s(426388),u=()=>s(965998),p=()=>s(798880),m=()=>s(762433),g=()=>s(959013),h=()=>s(252105),f=()=>s(449506),S=()=>s(84817),y=()=>s(7674),b=()=>s(554509),x=()=>s(107683),v=()=>s(453697),A=()=>s(719147),w=()=>s(836251),M=()=>s(765957),j=()=>s(630116),k=()=>s(324561),C=()=>s(329304),_=()=>s(334992),I=()=>s(611308);function P(e){const{onFinished:t,userId:s,userContractionMessages:i}=e,a=(0,o().IS)((e=>({customIcon:{alignSelf:"center",flexGrow:0},removeIconInCornerOfUserAvatar:{background:"white",borderRadius:"50%",position:"absolute",bottom:0,right:-5},dashedEllipse:{width:56,height:56,position:"absolute",top:-4,left:-4},customIconWrapper:{position:"relative",width:"fit-content",margin:"0 auto"},wrapper:{marginTop:4},descriptionBox:{borderRadius:6,textAlign:"center",background:e.surface.wash,padding:"16px 12px"}})),[]),r=(0,g().tz)(),d=(0,n().O$)(M().AppStoreCurrentSpaceStore),c=(0,n().K8)((()=>{if(!d)return;const e=j().LU.createChildStore(d,{id:s,table:p().oo});return e.isDefined()&&!e.getIsDeleted()?e:void 0}),[d,s]),u=(0,C().P9)({name:"admin_transfer_private_content",spaceId:null==d?void 0:d.id,userId:s}),{name:m,spaceName:h}=(0,n().K8)((()=>({name:null==c?void 0:c.getDisplayName(r),spaceName:null==d?void 0:d.getName()})),[c,r,d]),f=(0,k().f_)({spaceId:null==d?void 0:d.id}),A=(0,k().a9)(f);return(0,l.jsx)(x().s,{areaConstraint:{width:{type:"min",length:406},height:{type:"unlimited",scroll:"allow"}},isOpen:!0,onDismiss:()=>t(!1),animateSizeTransition:!0,render:()=>(0,l.jsx)(y().tf,{header:(0,l.jsx)(y().YA,{iconAndTitle:(0,l.jsxs)(S().Y1,{align:"center",gap:8,direction:"vertical",children:[(0,l.jsx)(v().A,{userStore:c,size:48,style:a.customIcon,borderStyle:"solid"}),(0,l.jsx)(b().D,{styleName:"Heading-17px/Semibold",style:{textAlign:"center"},children:N(h,m)})]})}),footer:(0,l.jsx)(y().aO,{layout:"vertical",primaryButtons:[{buttonType:"destructive",label:D(m),onClick:()=>t(!0)}],secondaryButtons:[{buttonType:"outline",label:(0,l.jsx)(g().sA,{id:"contractionConfirmation.manageMembers",defaultMessage:"Manage members"}),onClick:()=>t(!1)}]}),children:(0,l.jsxs)(S().Y1,{style:a.descriptionBox,gap:12,children:[(0,l.jsx)(b().D,{styleName:"UIRegular-14px/Medium",children:(0,l.jsx)(g().sA,{id:"contractionConfirmation.description.withName",defaultMessage:"They have been an active Notion member. {hasTransferrableContent, select, true {} other {Removing them may cause loss of private pages.}}",values:{hasTransferrableContent:u}})}),d&&A&&(0,l.jsx)(R,{spaceStore:d,billingData:A,userContractionMessages:i})]})})})}function T(){return null}function B(e){return e>2e3?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.2000",defaultMessage:"2000+"}):e>1500?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.1500",defaultMessage:"1500+"}):e>1e3?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.1000",defaultMessage:"1000+"}):e>500?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.500",defaultMessage:"500+"}):e>250?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.250",defaultMessage:"250+"}):e>100?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.100",defaultMessage:"100+"}):e>75?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.75",defaultMessage:"75+"}):e>50?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.50",defaultMessage:"50+"}):e>25?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.25",defaultMessage:"25+"}):e>10?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.10",defaultMessage:"10+"}):e>5?(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.5",defaultMessage:"5+"}):(0,l.jsx)(g().sA,{id:"contractionConfirmation.amount.2",defaultMessage:"2+"})}function R(e){let{spaceStore:t,billingData:s,userContractionMessages:o}=e;const d=(0,n().K8)((()=>t.getMemberCountFromPublicSpaceData()),[t]),c=(0,k().Q7)(t.id,s,d??0),u=(0,m().yB)({logFunction:r().log.bind(r()),spaceId:t.id,billingData:s})??c,p=(0,_().A)(t),h=c-1<u;if(s.subscription&&p&&h){const e=(0,a().W_)(s.subscription.currentPeriodEnd.toMillis(),"month_day_long",i().locale);return(0,l.jsx)(b().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:{padding:"0px 12px"},children:(0,l.jsx)(g().sA,{id:"contractionConfirmation.billing.message",defaultMessage:"Your workspace is currently billed for {paidSeats, plural, one {# seat} other {# seats}}. Your bill will remain the same until it is adjusted at the start of your next renewal: {nextBillingDate}. <learnmorelink>Learn more</learnmorelink>",values:{paidSeats:c,nextBillingDate:e,learnmorelink:e=>(0,l.jsx)(A().A,{href:(0,w().xS)("guides.billingGuide"),external:!0,children:e})}})})}return(0,l.jsxs)("div",{style:{padding:"12px 0 0 12px"},children:[(0,l.jsx)(T,{}),(0,l.jsx)(S().Y1,{gap:16,children:o.map(((e,t)=>{let{icon:s,message:i}=e;return(0,l.jsxs)(S().Y1,{direction:"horizontal",align:"center-left",gap:6,children:[(0,l.jsx)(s,{width:14}),(0,l.jsx)(b().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:i})]},t)}))})]})}function D(e){return e&&e.length<16?(0,l.jsx)(g().sA,{id:"contractionConfirmation.remove.withName",defaultMessage:"Remove {name}",values:{name:e}}):(0,l.jsx)(g().sA,{id:"contractionConfirmation.remove",defaultMessage:"Remove member"})}function N(e,t){return t?(0,l.jsx)(g().sA,{id:"contractionConfirmation.title.withName",defaultMessage:"Remove {name} from {space}?",values:{name:t||"this member",space:e||"this workspace"}}):(0,l.jsx)(g().sA,{id:"contractionConfirmation.title",defaultMessage:"Are you sure you want to remove this member?"})}async function L(e,t,s){let i=[],n={};if(s){const o=await f().callApi({eventName:"getUserContractionData",environment:e,data:{userId:t,spaceId:s}});"success"===o.type&&(n=o.data,i=function(e){const t=[];if(!("l28_active"in e))return t;const s=Number(e.num_pages_created);s>1&&t.push({icon:d,message:(0,l.jsx)(g().sA,{id:"contractionConfirmation.numberOfPages",defaultMessage:"Created {numberOfPages} pages",values:{numberOfPages:B(s)}})});const i=Number(e.num_comments);i>1&&t.push({icon:u().M,message:(0,l.jsx)(g().sA,{id:"contractionConfirmation.numberOfComments",defaultMessage:"Made {numberOfComments} comments",values:{numberOfComments:B(i)}})});const n=Number(e.l28_active);return n>1&&t.push({icon:c().S,message:(0,l.jsx)(g().sA,{id:"contractionConfirmation.activity",defaultMessage:"Visited {activeDays} days in the past month",values:{activeDays:B(n)}})}),t}(n))}return h().u4(e,{name:"contraction_contextual_confirmation_shown",args:{userContractionData:n}}),await I().A.showModal((s=>{const o=t=>{t?h().u4(e,{name:"contraction_contextual_confirmation_confirmed",args:{userContractionData:n}}):h().u4(e,{name:"contraction_contextual_confirmation_cancelled",args:{userContractionData:n}}),s(t)};return{dismissUsing:"closeButtonOrEscape",modalStyle:{minWidth:406,padding:20},onDismiss:()=>o(!1),content:(0,l.jsx)(P,{onFinished:o,userId:t,userContractionMessages:i})}}))}},983125:(e,t,s)=>{s.d(t,{d:()=>n});s(296540);var i=s(474848);const n=(0,s(340498).wt)("chevronRightRoundedThin",{viewBox:"0 0 24 24",directional:!0,svg:(0,i.jsx)("path",{d:"M17.0078 11.8594C17.0078 11.724 16.9818 11.599 16.9297 11.4844C16.8776 11.3698 16.7995 11.2604 16.6953 11.1562L10.6094 5.20312C10.4375 5.03125 10.224 4.94531 9.96875 4.94531C9.80208 4.94531 9.64844 4.98698 9.50781 5.07031C9.36719 5.14844 9.25521 5.25521 9.17188 5.39062C9.09375 5.52604 9.05469 5.67969 9.05469 5.85156C9.05469 6.09635 9.14844 6.3151 9.33594 6.50781L14.8203 11.8594L9.33594 17.2109C9.14844 17.4036 9.05469 17.625 9.05469 17.875C9.05469 18.0417 9.09375 18.1927 9.17188 18.3281C9.25521 18.4688 9.36719 18.5781 9.50781 18.6562C9.64844 18.7396 9.80208 18.7812 9.96875 18.7812C10.224 18.7812 10.4375 18.6927 10.6094 18.5156L16.6953 12.5625C16.7995 12.4583 16.8776 12.349 16.9297 12.2344C16.9818 12.1198 17.0078 11.9948 17.0078 11.8594Z"})})},984925:(e,t,s)=>{s.d(t,{e:()=>l});s(296540);var i=()=>s(401497),n=()=>s(62926),o=()=>s(554509),a=()=>s(204063),r=s(474848);function l(e){const{title:t,onClick:s,icon:l}=e,d=l||n().a,c=(0,i().IS)((e=>({button:{width:"100%",padding:"6px",textAlign:"center"}})),[]);return(0,r.jsx)(a().A,{size:"md",color:"uiBlue",style:c.button,onClick:s,iconLeading:d,children:(0,r.jsx)(o().D,{colorName:"contrastPrimary",styleName:"UIRegular-14px/Semibold",children:t})})}},991627:(e,t,s)=>{s.d(t,{L:()=>h});var i=s(296540),n=()=>s(484714),o=()=>s(56366),a=()=>s(959013),r=()=>s(751156),l=()=>s(755199),d=()=>s(679924),c=()=>s(836251),u=()=>s(765957),p=()=>s(719147),m=()=>s(702723),g=s(474848);function h(e){let{isMobile:t}=e;const s=(0,n().v3)(),h=(0,o().K8)((()=>u().default.state.currentUserSettingsStore),[]),f=(0,o().K8)((()=>{var e;return!0===(null==h||null===(e=h.getSettings())||void 0===e?void 0:e.disable_page_analytics)?"do_not_record":"record"}),[h]),S=(0,i.useCallback)((()=>{const e=!("do_not_record"===f);r().createAndCommit({userAction:"ViewHistorySettings.onSelectOption",environment:s,canUndo:!0,perform:t=>{h&&l().mJ({userSettingsStore:h,data:{disable_page_analytics:e},transaction:t})}}),(0,d().v)(s,e?"page_analytics_account_opt_out":"page_analytics_account_opt_in")}),[s,h,f]);return(0,g.jsx)(m().A,{isMobile:t,title:(0,g.jsx)(a().sA,{id:"viewHistorySettings.title",defaultMessage:"Show my view history"}),caption:(0,g.jsx)(a().sA,{id:"viewHistorySettings.description.message",defaultMessage:"People with edit or full access will be able to see when you’ve viewed a page. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,g.jsx)(p().A,{external:!0,href:(0,c().xS)("guides.pageAnalytics"),children:e})}}),type:"toggle",isOn:"record"===f,onToggle:S})}},993342:(e,t,s)=>{s.d(t,{A:()=>m});s(296540);var i=()=>s(484714),n=()=>s(56366),o=()=>s(959013),a=()=>s(980151),r=()=>s(702723),l=()=>s(640653),d=()=>s(765957),c=()=>s(948914),u=()=>s(84161),p=s(474848);function m(e){let{isMobile:t}=e;const s=(0,i().v3)(),m=(0,n().K8)((()=>(0,u().S)()),[]),{isElectron:g}=(0,i().Y0)(),h=(0,n().K8)((()=>{var e,t;return l().Yi(s,{spaceView:null===(e=d().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getModel(),space:null===(t=d().default.state.currentSpaceStore)||void 0===t?void 0:t.getModel()})}),[s]),f=(0,n().K8)((()=>{var e;return null===(e=c().A.state.preferences)||void 0===e?void 0:e.isTabSpacesEnabled}),[]),S=g?(0,p.jsx)(o().sA,{id:"pageOnAppStoreSetting.desktopDescription.message",defaultMessage:"Choose what to show when opening new windows,{tabGroupsEnabled, select, true { opening new tab groups,} other {}} switching workspaces, or launching app without restoring tabs.",values:{tabGroupsEnabled:f}}):(0,p.jsx)(o().sA,{id:"pageOnAppStoreSetting.description.message",defaultMessage:"Choose what to show when Notion starts or when you switch workspaces."}),y=g?(0,p.jsx)(o().sA,{id:"pageOnAppStoreSetting.title",defaultMessage:"Default page"}):(0,p.jsx)(o().sA,{id:"pageOnAppStoreSetting.title.desktop",defaultMessage:"Open on start"});return(0,p.jsx)(r().A,{isMobile:t,title:y,caption:S,type:"dropdown",currentOption:h,options:m,onSelectOption:e=>{a()._V({userAction:"NotificationsAndPersonalSettings.PageOnAppStartSetting",environment:s,option:e,from:"user_settings"})}})}}}]);